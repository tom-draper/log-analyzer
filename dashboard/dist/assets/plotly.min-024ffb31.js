import{g as kd}from"./index-a3606c29.js";function Ad(nu,yc){for(var Pl=0;Pl<yc.length;Pl++){const Cs=yc[Pl];if(typeof Cs!="string"&&!Array.isArray(Cs)){for(const Ha in Cs)if(Ha!=="default"&&!(Ha in nu)){const ee=Object.getOwnPropertyDescriptor(Cs,Ha);ee&&Object.defineProperty(nu,Ha,ee.get?ee:{enumerable:!0,get:()=>Cs[Ha]})}}}return Object.freeze(Object.defineProperty(nu,Symbol.toStringTag,{value:"Module"}))}var Uh={exports:{}};(function(nu,yc){/*! For license information please see plotly.min.js.LICENSE.txt */(function(Pl,Cs){nu.exports=Cs()})(self,function(){return function(){var Pl={98847:function(ee,D,e){var M=e(71828),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var l in k){var T=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(T,k[l])}},98222:function(ee,D,e){ee.exports=e(82887)},27206:function(ee,D,e){ee.exports=e(60822)},59893:function(ee,D,e){ee.exports=e(23381)},5224:function(ee,D,e){ee.exports=e(83832)},59509:function(ee,D,e){ee.exports=e(72201)},75557:function(ee,D,e){ee.exports=e(91815)},40338:function(ee,D,e){ee.exports=e(21462)},35080:function(ee,D,e){ee.exports=e(51319)},61396:function(ee,D,e){ee.exports=e(57516)},40549:function(ee,D,e){ee.exports=e(98128)},49866:function(ee,D,e){ee.exports=e(99442)},36089:function(ee,D,e){ee.exports=e(93740)},19548:function(ee,D,e){ee.exports=e(8729)},35831:function(ee,D,e){ee.exports=e(93814)},61039:function(ee,D,e){ee.exports=e(14382)},97040:function(ee,D,e){ee.exports=e(51759)},77986:function(ee,D,e){ee.exports=e(10421)},24296:function(ee,D,e){ee.exports=e(43102)},58872:function(ee,D,e){ee.exports=e(92165)},29626:function(ee,D,e){ee.exports=e(3325)},65591:function(ee,D,e){ee.exports=e(36071)},69738:function(ee,D,e){ee.exports=e(43905)},92650:function(ee,D,e){ee.exports=e(35902)},35630:function(ee,D,e){ee.exports=e(69816)},73434:function(ee,D,e){ee.exports=e(94507)},27909:function(ee,D,e){var M=e(19548);M.register([e(27206),e(5224),e(58872),e(65591),e(69738),e(92650),e(49866),e(25743),e(6197),e(97040),e(85461),e(73434),e(54201),e(81299),e(47645),e(35630),e(77986),e(83043),e(93005),e(96881),e(4534),e(50581),e(40549),e(77900),e(47582),e(35080),e(21641),e(17280),e(5861),e(29626),e(10021),e(65317),e(96268),e(61396),e(35831),e(16122),e(46163),e(40344),e(40338),e(48131),e(36089),e(55334),e(75557),e(19440),e(99488),e(59893),e(97393),e(98222),e(61039),e(24296),e(66398),e(59509)]),ee.exports=M},46163:function(ee,D,e){ee.exports=e(15154)},96881:function(ee,D,e){ee.exports=e(64943)},50581:function(ee,D,e){ee.exports=e(21164)},55334:function(ee,D,e){ee.exports=e(54186)},65317:function(ee,D,e){ee.exports=e(94873)},10021:function(ee,D,e){ee.exports=e(67618)},54201:function(ee,D,e){ee.exports=e(58810)},5861:function(ee,D,e){ee.exports=e(20593)},16122:function(ee,D,e){ee.exports=e(29396)},83043:function(ee,D,e){ee.exports=e(13551)},48131:function(ee,D,e){ee.exports=e(46858)},47582:function(ee,D,e){ee.exports=e(17988)},21641:function(ee,D,e){ee.exports=e(68868)},96268:function(ee,D,e){ee.exports=e(20467)},19440:function(ee,D,e){ee.exports=e(91271)},99488:function(ee,D,e){ee.exports=e(21461)},97393:function(ee,D,e){ee.exports=e(85956)},25743:function(ee,D,e){ee.exports=e(52979)},66398:function(ee,D,e){ee.exports=e(32275)},17280:function(ee,D,e){ee.exports=e(6419)},77900:function(ee,D,e){ee.exports=e(61510)},81299:function(ee,D,e){ee.exports=e(87619)},93005:function(ee,D,e){ee.exports=e(93601)},40344:function(ee,D,e){ee.exports=e(96595)},47645:function(ee,D,e){ee.exports=e(70954)},6197:function(ee,D,e){ee.exports=e(47462)},4534:function(ee,D,e){ee.exports=e(17659)},85461:function(ee,D,e){ee.exports=e(19990)},82884:function(ee){ee.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(ee,D,e){var M=e(82884),k=e(41940),l=e(85555),T=e(44467).templatedArray;e(24695),ee.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(ee,D,e){var M=e(71828),k=e(89298),l=e(92605).draw;function T(d){var s=d._fullLayout;M.filterVisible(s.annotations).forEach(function(t){var i=k.getFromId(d,t.xref),r=k.getFromId(d,t.yref),n=k.getRefType(t.xref),o=k.getRefType(t.yref);t._extremes={},n==="range"&&b(t,i),o==="range"&&b(t,r)})}function b(d,s){var t,i=s._id,r=i.charAt(0),n=d[r],o=d["a"+r],a=d[r+"ref"],u=d["a"+r+"ref"],p=d["_"+r+"padplus"],c=d["_"+r+"padminus"],x={x:1,y:-1}[r]*d[r+"shift"],g=3*d.arrowsize*d.arrowwidth||0,h=g+x,y=g-x,v=3*d.startarrowsize*d.arrowwidth||0,m=v+x,_=v-x;if(u===a){var f=k.findExtremes(s,[s.r2c(n)],{ppadplus:h,ppadminus:y}),S=k.findExtremes(s,[s.r2c(o)],{ppadplus:Math.max(p,m),ppadminus:Math.max(c,_)});t={min:[f.min[0],S.min[0]],max:[f.max[0],S.max[0]]}}else m=o?m+o:m,_=o?_-o:_,t=k.findExtremes(s,[s.r2c(n)],{ppadplus:Math.max(p,h,m),ppadminus:Math.max(c,y,_)});d._extremes[i]=t}ee.exports=function(d){var s=d._fullLayout;if(M.filterVisible(s.annotations).length&&d._fullData.length)return M.syncOrAsync([l,T],d)}},44317:function(ee,D,e){var M=e(71828),k=e(73972),l=e(44467).arrayEditor;function T(d,s){var t,i,r,n,o,a,u,p=d._fullLayout.annotations,c=[],x=[],g=[],h=(s||[]).length;for(t=0;t<p.length;t++)if(n=(r=p[t]).clicktoshow){for(i=0;i<h;i++)if(a=(o=s[i]).xaxis,u=o.yaxis,a._id===r.xref&&u._id===r.yref&&a.d2r(o.x)===b(r._xclick,a)&&u.d2r(o.y)===b(r._yclick,u)){(r.visible?n==="onout"?x:g:c).push(t);break}i===h&&r.visible&&n==="onout"&&x.push(t)}return{on:c,off:x,explicitOff:g}}function b(d,s){return s.type==="log"?s.l2r(d):s.d2r(d)}ee.exports={hasClickToShow:function(d,s){var t=T(d,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(d,s){var t,i,r=T(d,s),n=r.on,o=r.off.concat(r.explicitOff),a={},u=d._fullLayout.annotations;if(n.length||o.length){for(t=0;t<n.length;t++)(i=l(d.layout,"annotations",u[n[t]])).modifyItem("visible",!0),M.extendFlat(a,i.getUpdateObj());for(t=0;t<o.length;t++)(i=l(d.layout,"annotations",u[o[t]])).modifyItem("visible",!1),M.extendFlat(a,i.getUpdateObj());return k.call("update",d,{},a)}}}},25625:function(ee,D,e){var M=e(71828),k=e(7901);ee.exports=function(l,T,b,d){d("opacity");var s=d("bgcolor"),t=d("bordercolor"),i=k.opacity(t);d("borderpad");var r=d("borderwidth"),n=d("showarrow");if(d("text",n?" ":b._dfltTitle.annotation),d("textangle"),M.coerceFont(d,"font",b.font),d("width"),d("align"),d("height")&&d("valign"),n){var o,a,u=d("arrowside");u.indexOf("end")!==-1&&(o=d("arrowhead"),a=d("arrowsize")),u.indexOf("start")!==-1&&(d("startarrowhead",o),d("startarrowsize",a)),d("arrowcolor",i?T.bordercolor:k.defaultLine),d("arrowwidth",2*(i&&r||1)),d("standoff"),d("startstandoff")}var p=d("hovertext"),c=b.hoverlabel||{};if(p){var x=d("hoverlabel.bgcolor",c.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),g=d("hoverlabel.bordercolor",c.bordercolor||k.contrast(x));M.coerceFont(d,"hoverlabel.font",{family:c.font.family,size:c.font.size,color:c.font.color||g})}d("captureevents",!!p)}},94128:function(ee,D,e){var M=e(92770),k=e(58163);ee.exports=function(l,T,b,d){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t)for(var i,r,n=l._fullLayout.annotations,o=T._id.charAt(0),a=0;a<n.length;a++)i=n[a],r="annotations["+a+"].",i[o+"ref"]===T._id&&u(o),i["a"+o+"ref"]===T._id&&u("a"+o);function u(p){var c=i[p],x=null;x=s?k(c,T.range):Math.pow(10,c),M(x)||(x=null),d(r+p,x)}}},84046:function(ee,D,e){var M=e(71828),k=e(89298),l=e(85501),T=e(25625),b=e(50215);function d(s,t,i){function r(S,w){return M.coerce(s,t,b,S,w)}var n=r("visible"),o=r("clicktoshow");if(n||o){T(s,t,i,r);for(var a=t.showarrow,u=["x","y"],p=[-10,-30],c={_fullLayout:i},x=0;x<2;x++){var g=u[x],h=k.coerceRef(s,t,c,g,"","paper");if(h!=="paper"&&k.getFromId(c,h)._annIndices.push(t._index),k.coercePosition(t,c,r,h,g,.5),a){var y="a"+g,v=k.coerceRef(s,t,c,y,"pixel",["pixel","paper"]);v!=="pixel"&&v!==h&&(v=t[y]="pixel");var m=v==="pixel"?p[x]:.4;k.coercePosition(t,c,r,v,y,m)}r(g+"anchor"),r(g+"shift")}if(M.noneOrAll(s,t,["x","y"]),a&&M.noneOrAll(s,t,["ax","ay"]),o){var _=r("xclick"),f=r("yclick");t._xclick=_===void 0?t.x:k.cleanPosition(_,c,t.xref),t._yclick=f===void 0?t.y:k.cleanPosition(f,c,t.yref)}}}ee.exports=function(s,t){l(s,t,{name:"annotations",handleItemDefaults:d})}},92605:function(ee,D,e){var M=e(39898),k=e(73972),l=e(74875),T=e(71828),b=T.strTranslate,d=e(89298),s=e(7901),t=e(91424),i=e(30211),r=e(63893),n=e(6964),o=e(28569),a=e(44467).arrayEditor,u=e(13011);function p(g,h){var y=g._fullLayout.annotations[h]||{},v=d.getFromId(g,y.xref),m=d.getFromId(g,y.yref);v&&v.setScale(),m&&m.setScale(),x(g,y,h,!1,v,m)}function c(g,h,y,v,m){var _=m[y],f=m[y+"ref"],S=y.indexOf("y")!==-1,w=d.getRefType(f)==="domain",E=S?v.h:v.w;return g?w?_+(S?-h:h)/g._length:g.p2r(g.r2p(_)+h):_+(S?-h:h)/E}function x(g,h,y,v,m,_){var f,S,w=g._fullLayout,E=g._fullLayout._size,L=g._context.edits;v?(f="annotation-"+v,S=v+".annotations"):(f="annotation",S="annotations");var C=a(g.layout,S,h),P=C.modifyBase,z=C.modifyItem,G=C.getUpdateObj;w._infolayer.selectAll("."+f+'[data-index="'+y+'"]').remove();var O="clip"+w._uid+"_ann"+y;if(h._input&&h.visible!==!1){var H={x:{},y:{}},N=+h.textangle||0,B=w._infolayer.append("g").classed(f,!0).attr("data-index",String(y)).style("opacity",h.opacity),V=B.append("g").classed("annotation-text-g",!0),q=L[h.showarrow?"annotationTail":"annotationPosition"],te=h.captureevents||L.annotationText||q,K=V.append("g").style("pointer-events",te?"all":null).call(n,"pointer").on("click",function(){g._dragging=!1,g.emit("plotly_clickannotation",ge(M.event))});h.hovertext&&K.on("mouseover",function(){var ve=h.hoverlabel,Oe=ve.font,Me=this.getBoundingClientRect(),Te=g.getBoundingClientRect();i.loneHover({x0:Me.left-Te.left,x1:Me.right-Te.left,y:(Me.top+Me.bottom)/2-Te.top,text:h.hovertext,color:ve.bgcolor,borderColor:ve.bordercolor,fontFamily:Oe.family,fontSize:Oe.size,fontColor:Oe.color},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:g})}).on("mouseout",function(){i.loneUnhover(w._hoverlayer.node())});var J=h.borderwidth,Y=h.borderpad,W=J+Y,Q=K.append("rect").attr("class","bg").style("stroke-width",J+"px").call(s.stroke,h.bordercolor).call(s.fill,h.bgcolor),ne=h.width||h.height,re=w._topclips.selectAll("#"+O).data(ne?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),re.exit().remove();var ae=h.font,ue=w._meta?T.templateString(h.text,w._meta):h.text,pe=K.append("text").classed("annotation-text",!0).text(ue);L.annotationText?pe.call(r.makeEditable,{delegate:K,gd:g}).call(_e).on("edit",function(ve){h.text=ve,this.call(_e),z("text",ve),m&&m.autorange&&P(m._name+".autorange",!0),_&&_.autorange&&P(_._name+".autorange",!0),k.call("_guiRelayout",g,G())}):pe.call(_e)}else M.selectAll("#"+O).remove();function ge(ve){var Oe={index:y,annotation:h._input,fullAnnotation:h,event:ve};return v&&(Oe.subplotId=v),Oe}function _e(ve){return ve.call(t.font,ae).attr({"text-anchor":{left:"start",right:"end"}[h.align]||"middle"}),r.convertToTspans(ve,g,me),ve}function me(){var ve=pe.selectAll("a");ve.size()===1&&ve.text()===pe.text()&&K.insert("a",":first-child").attr({"xlink:xlink:href":ve.attr("xlink:href"),"xlink:xlink:show":ve.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Q.node());var Oe=K.select(".annotation-text-math-group"),Me=!Oe.empty(),Te=t.bBox((Me?Oe:pe).node()),se=Te.width,oe=Te.height,he=h.width||se,Ee=h.height||oe,ke=Math.round(he+2*W),be=Math.round(Ee+2*W);function Ie(gt,ut){return ut==="auto"&&(ut=gt<.3333333333333333?"left":gt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ut]}for(var Fe=!1,ce=["x","y"],we=0;we<ce.length;we++){var ye,Ce,Re,ze,He,Ge=ce[we],Je=h[Ge+"ref"]||Ge,ot=h["a"+Ge+"ref"],Qe={x:m,y:_}[Ge],vt=(N+(Ge==="x"?0:-90))*Math.PI/180,xt=ke*Math.cos(vt),mt=be*Math.sin(vt),rt=Math.abs(xt)+Math.abs(mt),it=h[Ge+"anchor"],Tt=h[Ge+"shift"]*(Ge==="x"?1:-1),Mt=H[Ge],Pt=d.getRefType(Je);if(Qe&&Pt!=="domain"){var kt=Qe.r2fraction(h[Ge]);(kt<0||kt>1)&&(ot===Je?((kt=Qe.r2fraction(h["a"+Ge]))<0||kt>1)&&(Fe=!0):Fe=!0),ye=Qe._offset+Qe.r2p(h[Ge]),ze=.5}else{var Ze=Pt==="domain";Ge==="x"?(Re=h[Ge],ye=Ze?Qe._offset+Qe._length*Re:ye=E.l+E.w*Re):(Re=1-h[Ge],ye=Ze?Qe._offset+Qe._length*Re:ye=E.t+E.h*Re),ze=h.showarrow?.5:Re}if(h.showarrow){Mt.head=ye;var Xe=h["a"+Ge];if(He=xt*Ie(.5,h.xanchor)-mt*Ie(.5,h.yanchor),ot===Je){var Ve=d.getRefType(ot);Ve==="domain"?(Ge==="y"&&(Xe=1-Xe),Mt.tail=Qe._offset+Qe._length*Xe):Ve==="paper"?Ge==="y"?(Xe=1-Xe,Mt.tail=E.t+E.h*Xe):Mt.tail=E.l+E.w*Xe:Mt.tail=Qe._offset+Qe.r2p(Xe),Ce=He}else Mt.tail=ye+Xe,Ce=He+Xe;Mt.text=Mt.tail+He;var We=w[Ge==="x"?"width":"height"];if(Je==="paper"&&(Mt.head=T.constrain(Mt.head,1,We-1)),ot==="pixel"){var at=-Math.max(Mt.tail-3,Mt.text),et=Math.min(Mt.tail+3,Mt.text)-We;at>0?(Mt.tail+=at,Mt.text+=at):et>0&&(Mt.tail-=et,Mt.text-=et)}Mt.tail+=Tt,Mt.head+=Tt}else Ce=He=rt*Ie(ze,it),Mt.text=ye+He;Mt.text+=Tt,He+=Tt,Ce+=Tt,h["_"+Ge+"padplus"]=rt/2+Ce,h["_"+Ge+"padminus"]=rt/2-Ce,h["_"+Ge+"size"]=rt,h["_"+Ge+"shift"]=He}if(Fe)K.remove();else{var De=0,Be=0;if(h.align!=="left"&&(De=(he-se)*(h.align==="center"?.5:1)),h.valign!=="top"&&(Be=(Ee-oe)*(h.valign==="middle"?.5:1)),Me)Oe.select("svg").attr({x:W+De-1,y:W+Be}).call(t.setClipUrl,ne?O:null,g);else{var nt=W+Be-Te.top,tt=W+De-Te.left;pe.call(r.positionText,tt,nt).call(t.setClipUrl,ne?O:null,g)}re.select("rect").call(t.setRect,W,W,he,Ee),Q.call(t.setRect,J/2,J/2,ke-J,be-J),K.call(t.setTranslate,Math.round(H.x.text-ke/2),Math.round(H.y.text-be/2)),V.attr({transform:"rotate("+N+","+H.x.text+","+H.y.text+")"});var dt,ht=function(gt,ut){B.selectAll(".annotation-arrow-g").remove();var wt=H.x.head,ct=H.y.head,ft=H.x.tail+gt,bt=H.y.tail+ut,It=H.x.text+gt,Dt=H.y.text+ut,Nt=T.rotationXYMatrix(N,It,Dt),Qt=T.apply2DTransform(Nt),jt=T.apply2DTransform2(Nt),Ut=+Q.attr("width"),Xt=+Q.attr("height"),gn=It-.5*Ut,Mn=gn+Ut,cn=Dt-.5*Xt,qt=cn+Xt,nn=[[gn,cn,gn,qt],[gn,qt,Mn,qt],[Mn,qt,Mn,cn],[Mn,cn,gn,cn]].map(jt);if(!nn.reduce(function(Jn,Gn){return Jn^!!T.segmentsIntersect(wt,ct,wt+1e6,ct+1e6,Gn[0],Gn[1],Gn[2],Gn[3])},!1)){nn.forEach(function(Jn){var Gn=T.segmentsIntersect(ft,bt,wt,ct,Jn[0],Jn[1],Jn[2],Jn[3]);Gn&&(ft=Gn.x,bt=Gn.y)});var Kt=h.arrowwidth,sn=h.arrowcolor,hn=h.arrowside,bn=B.append("g").style({opacity:s.opacity(sn)}).classed("annotation-arrow-g",!0),yn=bn.append("path").attr("d","M"+ft+","+bt+"L"+wt+","+ct).style("stroke-width",Kt+"px").call(s.stroke,s.rgb(sn));if(u(yn,hn,h),L.annotationPosition&&yn.node().parentNode&&!v){var Sn=wt,pn=ct;if(h.standoff){var Cn=Math.sqrt(Math.pow(wt-ft,2)+Math.pow(ct-bt,2));Sn+=h.standoff*(ft-wt)/Cn,pn+=h.standoff*(bt-ct)/Cn}var Hn,Qn,nr=bn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(ft-Sn)+","+(bt-pn),transform:b(Sn,pn)}).style("stroke-width",Kt+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");o.init({element:nr.node(),gd:g,prepFn:function(){var Jn=t.getTranslate(K);Hn=Jn.x,Qn=Jn.y,m&&m.autorange&&P(m._name+".autorange",!0),_&&_.autorange&&P(_._name+".autorange",!0)},moveFn:function(Jn,Gn){var lr=Qt(Hn,Qn),Rt=lr[0]+Jn,$t=lr[1]+Gn;K.call(t.setTranslate,Rt,$t),z("x",c(m,Jn,"x",E,h)),z("y",c(_,Gn,"y",E,h)),h.axref===h.xref&&z("ax",c(m,Jn,"ax",E,h)),h.ayref===h.yref&&z("ay",c(_,Gn,"ay",E,h)),bn.attr("transform",b(Jn,Gn)),V.attr({transform:"rotate("+N+","+Rt+","+$t+")"})},doneFn:function(){k.call("_guiRelayout",g,G());var Jn=document.querySelector(".js-notes-box-panel");Jn&&Jn.redraw(Jn.selectedObj)}})}}};h.showarrow&&ht(0,0),q&&o.init({element:K.node(),gd:g,prepFn:function(){dt=V.attr("transform")},moveFn:function(gt,ut){var wt="pointer";if(h.showarrow)h.axref===h.xref?z("ax",c(m,gt,"ax",E,h)):z("ax",h.ax+gt),h.ayref===h.yref?z("ay",c(_,ut,"ay",E.w,h)):z("ay",h.ay+ut),ht(gt,ut);else{if(v)return;var ct,ft;if(m)ct=c(m,gt,"x",E,h);else{var bt=h._xsize/E.w,It=h.x+(h._xshift-h.xshift)/E.w-bt/2;ct=o.align(It+gt/E.w,bt,0,1,h.xanchor)}if(_)ft=c(_,ut,"y",E,h);else{var Dt=h._ysize/E.h,Nt=h.y-(h._yshift+h.yshift)/E.h-Dt/2;ft=o.align(Nt-ut/E.h,Dt,0,1,h.yanchor)}z("x",ct),z("y",ft),m&&_||(wt=o.getCursor(m?.5:ct,_?.5:ft,h.xanchor,h.yanchor))}V.attr({transform:b(gt,ut)+dt}),n(K,wt)},clickFn:function(gt,ut){h.captureevents&&g.emit("plotly_clickannotation",ge(ut))},doneFn:function(){n(K),k.call("_guiRelayout",g,G());var gt=document.querySelector(".js-notes-box-panel");gt&&gt.redraw(gt.selectedObj)}})}}}ee.exports={draw:function(g){var h=g._fullLayout;h._infolayer.selectAll(".annotation").remove();for(var y=0;y<h.annotations.length;y++)h.annotations[y].visible&&p(g,y);return l.previousPromises(g)},drawOne:p,drawRaw:x}},13011:function(ee,D,e){var M=e(39898),k=e(7901),l=e(82884),T=e(71828),b=T.strScale,d=T.strRotate,s=T.strTranslate;ee.exports=function(t,i,r){var n,o,a,u,p=t.node(),c=l[r.arrowhead||0],x=l[r.startarrowhead||0],g=(r.arrowwidth||1)*(r.arrowsize||1),h=(r.arrowwidth||1)*(r.startarrowsize||1),y=i.indexOf("start")>=0,v=i.indexOf("end")>=0,m=c.backoff*g+r.standoff,_=x.backoff*h+r.startstandoff;if(p.nodeName==="line"){n={x:+t.attr("x1"),y:+t.attr("y1")},o={x:+t.attr("x2"),y:+t.attr("y2")};var f=n.x-o.x,S=n.y-o.y;if(u=(a=Math.atan2(S,f))+Math.PI,m&&_&&m+_>Math.sqrt(f*f+S*S))return void B();if(m){if(m*m>f*f+S*S)return void B();var w=m*Math.cos(a),E=m*Math.sin(a);o.x+=w,o.y+=E,t.attr({x2:o.x,y2:o.y})}if(_){if(_*_>f*f+S*S)return void B();var L=_*Math.cos(a),C=_*Math.sin(a);n.x-=L,n.y-=C,t.attr({x1:n.x,y1:n.y})}}else if(p.nodeName==="path"){var P=p.getTotalLength(),z="";if(P<m+_)return void B();var G=p.getPointAtLength(0),O=p.getPointAtLength(.1);a=Math.atan2(G.y-O.y,G.x-O.x),n=p.getPointAtLength(Math.min(_,P)),z="0px,"+_+"px,";var H=p.getPointAtLength(P),N=p.getPointAtLength(P-.1);u=Math.atan2(H.y-N.y,H.x-N.x),o=p.getPointAtLength(Math.max(0,P-m)),z+=P-(z?_+m:m)+"px,"+P+"px",t.style("stroke-dasharray",z)}function B(){t.style("stroke-dasharray","0px,100px")}function V(q,te,K,J){q.path&&(q.noRotate&&(K=0),M.select(p.parentNode).append("path").attr({class:t.attr("class"),d:q.path,transform:s(te.x,te.y)+d(180*K/Math.PI)+b(J)}).style({fill:k.rgb(r.arrowcolor),"stroke-width":0}))}y&&V(x,n,a,h),v&&V(c,o,u,g)}},32745:function(ee,D,e){var M=e(92605),k=e(44317);ee.exports={moduleType:"component",name:"annotations",layoutAttributes:e(50215),supplyLayoutDefaults:e(84046),includeBasePlot:e(76325)("annotations"),calcAutorange:e(3749),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(94128)}},26997:function(ee,D,e){var M=e(50215),k=e(30962).overrideAll,l=e(44467).templatedArray;ee.exports=k(l("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},5485:function(ee,D,e){var M=e(71828),k=e(89298);function l(T,b){var d=b.fullSceneLayout.domain,s=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},M.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=s.l+d.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(d.x[1]-d.x[0])},T._ya={},M.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=s.t+(1-d.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(d.y[1]-d.y[0])}}ee.exports=function(T){for(var b=T.fullSceneLayout.annotations,d=0;d<b.length;d++)l(b[d],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},20226:function(ee,D,e){var M=e(71828),k=e(89298),l=e(85501),T=e(25625),b=e(26997);function d(s,t,i,r){function n(a,u){return M.coerce(s,t,b,a,u)}function o(a){var u=a+"axis",p={_fullLayout:{}};return p._fullLayout[u]=i[u],k.coercePosition(t,p,n,a,a,.5)}n("visible")&&(T(s,t,r.fullLayout,n),o("x"),o("y"),o("z"),M.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),M.noneOrAll(s,t,["ax","ay"])))}ee.exports=function(s,t,i){l(s,t,{name:"annotations",handleItemDefaults:d,fullLayout:i.fullLayout})}},82188:function(ee,D,e){var M=e(92605).drawRaw,k=e(63538),l=["x","y","z"];ee.exports=function(T){for(var b=T.fullSceneLayout,d=T.dataScale,s=b.annotations,t=0;t<s.length;t++){for(var i=s[t],r=!1,n=0;n<3;n++){var o=l[n],a=i[o],u=b[o+"axis"].r2fraction(a);if(u<0||u>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(i._pdata=k(T.glplot.cameraParams,[b.xaxis.r2l(i.x)*d[0],b.yaxis.r2l(i.y)*d[1],b.zaxis.r2l(i.z)*d[2]]),M(T.graphDiv,i,t,T.id,i._xa,i._ya))}}},2468:function(ee,D,e){var M=e(73972),k=e(71828);ee.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(26997)}}},layoutAttributes:e(26997),handleDefaults:e(20226),includeBasePlot:function(l,T){var b=M.subplotsRegistry.gl3d;if(b)for(var d=b.attrRegex,s=Object.keys(l),t=0;t<s.length;t++){var i=s[t];d.test(i)&&(l[i].annotations||[]).length&&(k.pushUnique(T._basePlotModules,b),k.pushUnique(T._subplots.gl3d,i))}},convert:e(5485),draw:e(82188)}},7561:function(ee,D,e){ee.exports=e(63489),e(94338),e(3961),e(38751),e(86825),e(37715),e(99384),e(43805),e(88874),e(83290),e(29108),e(55422),e(94320),e(31320),e(51367),e(21457)},72201:function(ee,D,e){var M=e(7561),k=e(71828),l=e(50606),T=l.EPOCHJD,b=l.ONEDAY,d={valType:"enumerated",values:k.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},s=function(g,h,y,v){var m={};return m[y]=d,k.coerce(g,h,m,y,v)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(g){var h=r[g];return h||(r[g]=M.instance(g))}function o(g){return k.extendFlat({},d,{description:g})}function a(g){return"Sets the calendar system to use with `"+g+"` date data."}var u={xcalendar:o(a("x"))},p=k.extendFlat({},u,{ycalendar:o(a("y"))}),c=k.extendFlat({},p,{zcalendar:o(a("z"))}),x=o(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ee.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:c,surface:c,mesh3d:c,scattergl:p,ohlc:u,candlestick:u},layout:{calendar:o(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:o(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:o(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:d,handleDefaults:s,handleTraceDefaults:function(g,h,y,v){for(var m=0;m<y.length;m++)s(g,h,y[m]+"calendar",v.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(g,h,y){for(var v,m,_,f,S,w=Math.floor((h+.05)/b)+T,E=n(y).fromJD(w),L=0;(L=g.indexOf("%",L))!==-1;)(v=g.charAt(L+1))==="0"||v==="-"||v==="_"?(_=3,m=g.charAt(L+2),v==="_"&&(v="-")):(m=v,v="0",_=2),(f=i[m])?(S=f===t?t:E.formatDate(f[v]),g=g.substr(0,L)+S+g.substr(L+_),L+=S.length):L+=_;return g}}},22399:function(ee,D){D.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],D.defaultLine="#444",D.lightLine="#eee",D.background="#fff",D.borderLine="#BEC8D9",D.lightFraction=90.9090909090909},7901:function(ee,D,e){var M=e(84267),k=e(92770),l=e(73627).isTypedArray,T=ee.exports={},b=e(22399);T.defaults=b.defaults;var d=T.defaultLine=b.defaultLine;T.lightLine=b.lightLine;var s=T.background=b.background;function t(i){if(k(i)||typeof i!="string")return i;var r=i.trim();if(r.substr(0,3)!=="rgb")return i;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return i;var o=n[1].trim().split(/\s*[\s,]\s*/),a=r.charAt(3)==="a"&&o.length===4;if(!a&&o.length!==3)return i;for(var u=0;u<o.length;u++){if(!o[u].length||(o[u]=Number(o[u]),!(o[u]>=0)))return i;if(u===3)o[u]>1&&(o[u]=1);else if(o[u]>=1)return i}var p=Math.round(255*o[0])+", "+Math.round(255*o[1])+", "+Math.round(255*o[2]);return a?"rgba("+p+", "+o[3]+")":"rgb("+p+")"}T.tinyRGB=function(i){var r=i.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(i){return T.tinyRGB(M(i))},T.opacity=function(i){return i?M(i).getAlpha():0},T.addOpacity=function(i,r){var n=M(i).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(i,r){var n=M(i).toRgb();if(n.a===1)return M(i).toRgbString();var o=M(r||s).toRgb(),a=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},u={r:a.r*(1-n.a)+n.r*n.a,g:a.g*(1-n.a)+n.g*n.a,b:a.b*(1-n.a)+n.b*n.a};return M(u).toRgbString()},T.contrast=function(i,r,n){var o=M(i);return o.getAlpha()!==1&&(o=M(T.combine(i,s))),(o.isDark()?r?o.lighten(r):s:n?o.darken(n):d).toString()},T.stroke=function(i,r){var n=M(r);i.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(i,r){var n=M(r);i.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(i){if(i&&typeof i=="object"){var r,n,o,a,u=Object.keys(i);for(r=0;r<u.length;r++)if(a=i[o=u[r]],o.substr(o.length-5)==="color")if(Array.isArray(a))for(n=0;n<a.length;n++)a[n]=t(a[n]);else i[o]=t(a);else if(o.substr(o.length-10)==="colorscale"&&Array.isArray(a))for(n=0;n<a.length;n++)Array.isArray(a[n])&&(a[n][1]=t(a[n][1]));else if(Array.isArray(a)){var p=a[0];if(!Array.isArray(p)&&p&&typeof p=="object")for(n=0;n<a.length;n++)T.clean(a[n])}else a&&typeof a=="object"&&!l(a)&&T.clean(a)}}},63583:function(ee,D,e){var M=e(13838),k=e(41940),l=e(1426).extendFlat,T=e(30962).overrideAll;ee.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:l({},M.ticks,{dflt:""}),ticklabeloverflow:l({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:k({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(ee){ee.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(ee,D,e){var M=e(71828),k=e(44467),l=e(26218),T=e(38701),b=e(96115),d=e(89426),s=e(63583);ee.exports=function(t,i,r){var n=k.newContainer(i,"colorbar"),o=t.colorbar||{};function a(z,G){return M.coerce(o,n,s,z,G)}var u=r.margin||{t:0,b:0,l:0,r:0},p=r.width-u.l-u.r,c=r.height-u.t-u.b,x=a("orientation")==="v",g=a("thicknessmode");a("thickness",g==="fraction"?30/(x?p:c):30);var h=a("lenmode");a("len",h==="fraction"?1:x?c:p);var y,v,m,_=a("yref")==="paper",f=a("xref")==="paper",S="left";x?(m="middle",S=f?"left":"right",y=f?1.02:1,v=.5):(m=_?"bottom":"top",S="center",y=.5,v=_?1.02:1),M.coerce(o,n,{x:{valType:"number",min:f?-2:0,max:f?3:1,dflt:y}},"x"),M.coerce(o,n,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:v}},"y"),a("xanchor",S),a("xpad"),a("yanchor",m),a("ypad"),M.noneOrAll(o,n,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");var w=M.coerce(o,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");a("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),l(o,n,a,"linear");var E=r.font,L={outerTicks:!1,font:E};w.indexOf("inside")!==-1&&(L.bgColor="black"),d(o,n,a,"linear",L),b(o,n,a,"linear",L),T(o,n,a,"linear",L),a("title.text",r._dfltTitle.colorbar);var C=n.showticklabels?n.tickfont:E,P=M.extendFlat({},C,{color:E.color,size:M.bigFont(C.size)});M.coerceFont(a,"title.font",P),a("title.side",x?"top":"right")}},98981:function(ee,D,e){var M=e(39898),k=e(84267),l=e(74875),T=e(73972),b=e(89298),d=e(28569),s=e(71828),t=s.strTranslate,i=e(1426).extendFlat,r=e(6964),n=e(91424),o=e(7901),a=e(92998),u=e(63893),p=e(52075).flipScale,c=e(71453),x=e(52830),g=e(13838),h=e(18783),y=h.LINE_SPACING,v=h.FROM_TL,m=h.FROM_BR,_=e(30939).cn;ee.exports={draw:function(f){var S=f._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(w){var E,L,C,P,z=w._fullLayout,G=w.calcdata,O=[];function H(ne){return i(ne,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function N(){typeof P.calc=="function"?P.calc(w,C,E):(E._fillgradient=L.reversescale?p(L.colorscale):L.colorscale,E._zrange=[L[P.min],L[P.max]])}for(var B=0;B<G.length;B++){var V=G[B];if((C=V[0].trace)._module){var q=C._module.colorbar;if(C.visible===!0&&q)for(var te=Array.isArray(q),K=te?q:[q],J=0;J<K.length;J++){var Y=(P=K[J]).container;(L=Y?C[Y]:C)&&L.showscale&&((E=H(L.colorbar))._id="cb"+C.uid+(te&&Y?"-"+Y:""),E._traceIndex=C.index,E._propPrefix=(Y?Y+".":"")+"colorbar.",E._meta=C._meta,N(),O.push(E))}}}for(var W in z._colorAxes)if((L=z[W]).showscale){var Q=z._colorAxes[W];(E=H(L.colorbar))._id="cb"+W,E._propPrefix=W+".colorbar.",E._meta=z._meta,P={min:"cmin",max:"cmax"},Q[0]!=="heatmap"&&(C=Q[1],P.calc=C._module.colorbar.calc),N(),O.push(E)}return O}(f),function(w){return w._id});S.enter().append("g").attr("class",function(w){return w._id}).classed(_.colorbar,!0),S.each(function(w){var E=M.select(this);s.ensureSingle(E,"rect",_.cbbg),s.ensureSingle(E,"g",_.cbfills),s.ensureSingle(E,"g",_.cblines),s.ensureSingle(E,"g",_.cbaxis,function(C){C.classed(_.crisp,!0)}),s.ensureSingle(E,"g",_.cbtitleunshift,function(C){C.append("g").classed(_.cbtitle,!0)}),s.ensureSingle(E,"rect",_.cboutline);var L=function(C,P,z){var G=P.orientation==="v",O=P.len,H=P.lenmode,N=P.thickness,B=P.thicknessmode,V=P.outlinewidth,q=P.borderwidth,te=P.bgcolor,K=P.xanchor,J=P.yanchor,Y=P.xpad,W=P.ypad,Q=P.x,ne=G?P.y:1-P.y,re=P.yref==="paper",ae=P.xref==="paper",ue=z._fullLayout,pe=ue._size,ge=P._fillcolor,_e=P._line,me=P.title,ve=me.side,Oe=P._zrange||M.extent((typeof ge=="function"?ge:_e.color).domain()),Me=typeof _e.color=="function"?_e.color:function(){return _e.color},Te=typeof ge=="function"?ge:function(){return ge},se=P._levels,oe=function(Ve,We,at){var et,De,Be=We._levels,nt=[],tt=[],dt=Be.end+Be.size/100,ht=Be.size,gt=1.001*at[0]-.001*at[1],ut=1.001*at[1]-.001*at[0];for(De=0;De<1e5&&(et=Be.start+De*ht,!(ht>0?et>=dt:et<=dt));De++)et>gt&&et<ut&&nt.push(et);if(We._fillgradient)tt=[0];else if(typeof We._fillcolor=="function"){var wt=We._filllevels;if(wt)for(dt=wt.end+wt.size/100,ht=wt.size,De=0;De<1e5&&(et=wt.start+De*ht,!(ht>0?et>=dt:et<=dt));De++)et>at[0]&&et<at[1]&&tt.push(et);else(tt=nt.map(function(ct){return ct-Be.size/2})).push(tt[tt.length-1]+Be.size)}else We._fillcolor&&typeof We._fillcolor=="string"&&(tt=[0]);return Be.size<0&&(nt.reverse(),tt.reverse()),{line:nt,fill:tt}}(0,P,Oe),he=oe.fill,Ee=oe.line,ke=Math.round(N*(B==="fraction"?G?pe.w:pe.h:1)),be=ke/(G?pe.w:pe.h),Ie=Math.round(O*(H==="fraction"?G?pe.h:pe.w:1)),Fe=Ie/(G?pe.h:pe.w),ce=ae?pe.w:z._fullLayout.width,we=re?pe.h:z._fullLayout.height,ye=Math.round(G?Q*ce+Y:ne*we+W),Ce={center:.5,right:1}[K]||0,Re={top:1,middle:.5}[J]||0,ze=G?Q-Ce*be:ne-Re*be,He=G?ne-Re*Fe:Q-Ce*Fe,Ge=Math.round(G?we*(1-He):ce*He);P._lenFrac=Fe,P._thickFrac=be,P._uFrac=ze,P._vFrac=He;var Je=P._axis=function(Ve,We,at){var et=Ve._fullLayout,De=We.orientation==="v",Be={type:"linear",range:at,tickmode:We.tickmode,nticks:We.nticks,tick0:We.tick0,dtick:We.dtick,tickvals:We.tickvals,ticktext:We.ticktext,ticks:We.ticks,ticklen:We.ticklen,tickwidth:We.tickwidth,tickcolor:We.tickcolor,showticklabels:We.showticklabels,labelalias:We.labelalias,ticklabelposition:We.ticklabelposition,ticklabeloverflow:We.ticklabeloverflow,ticklabelstep:We.ticklabelstep,tickfont:We.tickfont,tickangle:We.tickangle,tickformat:We.tickformat,exponentformat:We.exponentformat,minexponent:We.minexponent,separatethousands:We.separatethousands,showexponent:We.showexponent,showtickprefix:We.showtickprefix,tickprefix:We.tickprefix,showticksuffix:We.showticksuffix,ticksuffix:We.ticksuffix,title:We.title,showline:!0,anchor:"free",side:De?"right":"bottom",position:1},nt=De?"y":"x",tt={type:"linear",_id:nt+We._id},dt={letter:nt,font:et.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:et.calendar};function ht(gt,ut){return s.coerce(Be,tt,g,gt,ut)}return c(Be,tt,ht,dt,et),x(Be,tt,ht,dt),tt}(z,P,Oe);Je.position=be+(G?Q+Y/pe.w:ne+W/pe.h);var ot=["top","bottom"].indexOf(ve)!==-1;if(G&&ot&&(Je.title.side=ve,Je.titlex=Q+Y/pe.w,Je.titley=He+(me.side==="top"?Fe-W/pe.h:W/pe.h)),G||ot||(Je.title.side=ve,Je.titley=ne+W/pe.h,Je.titlex=He+Y/pe.w),_e.color&&P.tickmode==="auto"){Je.tickmode="linear",Je.tick0=se.start;var Qe=se.size,vt=s.constrain(Ie/50,4,15)+1,xt=(Oe[1]-Oe[0])/((P.nticks||vt)*Qe);if(xt>1){var mt=Math.pow(10,Math.floor(Math.log(xt)/Math.LN10));Qe*=mt*s.roundUp(xt/mt,[2,5,10]),(Math.abs(se.start)/se.size+1e-6)%1<2e-6&&(Je.tick0=0)}Je.dtick=Qe}Je.domain=G?[He+W/pe.h,He+Fe-W/pe.h]:[He+Y/pe.w,He+Fe-Y/pe.w],Je.setScale(),C.attr("transform",t(Math.round(pe.l),Math.round(pe.t)));var rt,it=C.select("."+_.cbtitleunshift).attr("transform",t(-Math.round(pe.l),-Math.round(pe.t))),Tt=Je.ticklabelposition,Mt=Je.title.font.size,Pt=C.select("."+_.cbaxis),kt=0,Ze=0;function Xe(Ve,We){var at={propContainer:Je,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:ue._dfltTitle.colorbar,containerGroup:C.select("."+_.cbtitle)},et=Ve.charAt(0)==="h"?Ve.substr(1):"h"+Ve;C.selectAll("."+et+",."+et+"-math-group").remove(),a.draw(z,Ve,i(at,We||{}))}return s.syncOrAsync([l.previousPromises,function(){var Ve,We;(G&&ot||!G&&!ot)&&(ve==="top"&&(Ve=Y+pe.l+ce*Q,We=W+pe.t+we*(1-He-Fe)+3+.75*Mt),ve==="bottom"&&(Ve=Y+pe.l+ce*Q,We=W+pe.t+we*(1-He)-3-.25*Mt),ve==="right"&&(We=W+pe.t+we*ne+3+.75*Mt,Ve=Y+pe.l+ce*He),Xe(Je._id+"title",{attributes:{x:Ve,y:We,"text-anchor":G?"start":"middle"}}))},function(){if(!G&&!ot||G&&ot){var Ve,We=C.select("."+_.cbtitle),at=We.select("text"),et=[-V/2,V/2],De=We.select(".h"+Je._id+"title-math-group").node(),Be=15.6;if(at.node()&&(Be=parseInt(at.node().style.fontSize,10)*y),De?(Ve=n.bBox(De),Ze=Ve.width,(kt=Ve.height)>Be&&(et[1]-=(kt-Be)/2)):at.node()&&!at.classed(_.jsPlaceholder)&&(Ve=n.bBox(at.node()),Ze=Ve.width,kt=Ve.height),G){if(kt){if(kt+=5,ve==="top")Je.domain[1]-=kt/pe.h,et[1]*=-1;else{Je.domain[0]+=kt/pe.h;var nt=u.lineCount(at);et[1]+=(1-nt)*Be}We.attr("transform",t(et[0],et[1])),Je.setScale()}}else Ze&&(ve==="right"&&(Je.domain[0]+=(Ze+Mt/2)/pe.w),We.attr("transform",t(et[0],et[1])),Je.setScale())}C.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",G?t(0,Math.round(pe.h*(1-Je.domain[1]))):t(Math.round(pe.w*Je.domain[0]),0)),Pt.attr("transform",G?t(0,Math.round(-pe.t)):t(Math.round(-pe.l),0));var tt=C.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(he);tt.enter().append("rect").classed(_.cbfill,!0).attr("style",""),tt.exit().remove();var dt=Oe.map(Je.c2p).map(Math.round).sort(function(ct,ft){return ct-ft});tt.each(function(ct,ft){var bt=[ft===0?Oe[0]:(he[ft]+he[ft-1])/2,ft===he.length-1?Oe[1]:(he[ft]+he[ft+1])/2].map(Je.c2p).map(Math.round);G&&(bt[1]=s.constrain(bt[1]+(bt[1]>bt[0])?1:-1,dt[0],dt[1]));var It=M.select(this).attr(G?"x":"y",ye).attr(G?"y":"x",M.min(bt)).attr(G?"width":"height",Math.max(ke,2)).attr(G?"height":"width",Math.max(M.max(bt)-M.min(bt),2));if(P._fillgradient)n.gradient(It,z,P._id,G?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var Dt=Te(ct).replace("e-","");It.attr("fill",k(Dt).toHexString())}});var ht=C.select("."+_.cblines).selectAll("path."+_.cbline).data(_e.color&&_e.width?Ee:[]);ht.enter().append("path").classed(_.cbline,!0),ht.exit().remove(),ht.each(function(ct){var ft=ye,bt=Math.round(Je.c2p(ct))+_e.width/2%1;M.select(this).attr("d","M"+(G?ft+","+bt:bt+","+ft)+(G?"h":"v")+ke).call(n.lineGroupStyle,_e.width,Me(ct),_e.dash)}),Pt.selectAll("g."+Je._id+"tick,path").remove();var gt=ye+ke+(V||0)/2-(P.ticks==="outside"?1:0),ut=b.calcTicks(Je),wt=b.getTickSigns(Je)[2];return b.drawTicks(z,Je,{vals:Je.ticks==="inside"?b.clipEnds(Je,ut):ut,layer:Pt,path:b.makeTickPath(Je,gt,wt),transFn:b.makeTransTickFn(Je)}),b.drawLabels(z,Je,{vals:ut,layer:Pt,transFn:b.makeTransTickLabelFn(Je),labelFns:b.makeLabelFns(Je,gt)})},function(){if(G&&!ot||!G&&ot){var Ve,We,at=Je.position||0,et=Je._offset+Je._length/2;if(ve==="right")We=et,Ve=pe.l+ce*at+10+Mt*(Je.showticklabels?1:.5);else if(Ve=et,ve==="bottom"&&(We=pe.t+we*at+10+(Tt.indexOf("inside")===-1?Je.tickfont.size:0)+(Je.ticks!=="intside"&&P.ticklen||0)),ve==="top"){var De=me.text.split("<br>").length;We=pe.t+we*at+10-ke-y*Mt*De}Xe((G?"h":"v")+Je._id+"title",{avoid:{selection:M.select(z).selectAll("g."+Je._id+"tick"),side:ve,offsetTop:G?0:pe.t,offsetLeft:G?pe.l:0,maxShift:G?ue.width:ue.height},attributes:{x:Ve,y:We,"text-anchor":"middle"},transform:{rotate:G?-90:0,offset:0}})}},l.previousPromises,function(){var Ve,We=ke+V/2;Tt.indexOf("inside")===-1&&(Ve=n.bBox(Pt.node()),We+=G?Ve.width:Ve.height),rt=it.select("text");var at=0,et=G&&ve==="top",De=!G&&ve==="right",Be=0;if(rt.node()&&!rt.classed(_.jsPlaceholder)){var nt,tt=it.select(".h"+Je._id+"title-math-group").node();tt&&(G&&ot||!G&&!ot)?(at=(Ve=n.bBox(tt)).width,nt=Ve.height):(at=(Ve=n.bBox(it.node())).right-pe.l-(G?ye:Ge),nt=Ve.bottom-pe.t-(G?Ge:ye),G||ve!=="top"||(We+=Ve.height,Be=Ve.height)),De&&(rt.attr("transform",t(at/2+Mt/2,0)),at*=2),We=Math.max(We,G?at:nt)}var dt=2*(G?Y:W)+We+q+V/2,ht=0;!G&&me.text&&J==="bottom"&&ne<=0&&(dt+=ht=dt/2,Be+=ht),ue._hColorbarMoveTitle=ht,ue._hColorbarMoveCBTitle=Be;var gt=q+V,ut=(G?ye:Ge)-gt/2-(G?Y:0),wt=(G?Ge:ye)-(G?Ie:W+Be-ht);C.select("."+_.cbbg).attr("x",ut).attr("y",wt).attr(G?"width":"height",Math.max(dt-ht,2)).attr(G?"height":"width",Math.max(Ie+gt,2)).call(o.fill,te).call(o.stroke,P.bordercolor).style("stroke-width",q);var ct=De?Math.max(at-10,0):0;C.selectAll("."+_.cboutline).attr("x",(G?ye:Ge+Y)+ct).attr("y",(G?Ge+W-Ie:ye)+(et?kt:0)).attr(G?"width":"height",Math.max(ke,2)).attr(G?"height":"width",Math.max(Ie-(G?2*W+kt:2*Y+ct),2)).call(o.stroke,P.outlinecolor).style({fill:"none","stroke-width":V});var ft=G?Ce*dt:0,bt=G?0:(1-Re)*dt-Be;if(ft=ae?pe.l-ft:-ft,bt=re?pe.t-bt:-bt,C.attr("transform",t(ft,bt)),!G&&(q||k(te).getAlpha()&&!k.equals(ue.paper_bgcolor,te))){var It=Pt.selectAll("text"),Dt=It[0].length,Nt=C.select("."+_.cbbg).node(),Qt=n.bBox(Nt),jt=n.getTranslate(C);It.each(function(hn,bn){var yn=Dt-1;if(bn===0||bn===yn){var Sn,pn=n.bBox(this),Cn=n.getTranslate(this);if(bn===yn){var Hn=pn.right+Cn.x;(Sn=Qt.right+jt.x+Ge-q-2+Q-Hn)>0&&(Sn=0)}else if(bn===0){var Qn=pn.left+Cn.x;(Sn=Qt.left+jt.x+Ge+q+2-Qn)<0&&(Sn=0)}Sn&&(Dt<3?this.setAttribute("transform","translate("+Sn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ut={},Xt=v[K],gn=m[K],Mn=v[J],cn=m[J],qt=dt-ke;G?(H==="pixels"?(Ut.y=ne,Ut.t=Ie*Mn,Ut.b=Ie*cn):(Ut.t=Ut.b=0,Ut.yt=ne+O*Mn,Ut.yb=ne-O*cn),B==="pixels"?(Ut.x=Q,Ut.l=dt*Xt,Ut.r=dt*gn):(Ut.l=qt*Xt,Ut.r=qt*gn,Ut.xl=Q-N*Xt,Ut.xr=Q+N*gn)):(H==="pixels"?(Ut.x=Q,Ut.l=Ie*Xt,Ut.r=Ie*gn):(Ut.l=Ut.r=0,Ut.xl=Q+O*Xt,Ut.xr=Q-O*gn),B==="pixels"?(Ut.y=1-ne,Ut.t=dt*Mn,Ut.b=dt*cn):(Ut.t=qt*Mn,Ut.b=qt*cn,Ut.yt=ne-N*Mn,Ut.yb=ne+N*cn));var nn=P.y<.5?"b":"t",Kt=P.x<.5?"l":"r";z._fullLayout._reservedMargin[P._id]={};var sn={r:ue.width-ut-ft,l:ut+Ut.r,b:ue.height-wt-bt,t:wt+Ut.b};ae&&re?l.autoMargin(z,P._id,Ut):ae?z._fullLayout._reservedMargin[P._id][nn]=sn[nn]:re||G?z._fullLayout._reservedMargin[P._id][Kt]=sn[Kt]:z._fullLayout._reservedMargin[P._id][nn]=sn[nn]}],z)}(E,w,f);L&&L.then&&(f._promises||[]).push(L),f._context.edits.colorbarPosition&&function(C,P,z){var G,O,H,N=P.orientation==="v",B=z._fullLayout._size;d.init({element:C.node(),gd:z,prepFn:function(){G=C.attr("transform"),r(C)},moveFn:function(V,q){C.attr("transform",G+t(V,q)),O=d.align((N?P._uFrac:P._vFrac)+V/B.w,N?P._thickFrac:P._lenFrac,0,1,P.xanchor),H=d.align((N?P._vFrac:1-P._uFrac)-q/B.h,N?P._lenFrac:P._thickFrac,0,1,P.yanchor);var te=d.getCursor(O,H,P.xanchor,P.yanchor);r(C,te)},doneFn:function(){if(r(C),O!==void 0&&H!==void 0){var V={};V[P._propPrefix+"x"]=O,V[P._propPrefix+"y"]=H,P._traceIndex!==void 0?T.call("_guiRestyle",z,V,P._traceIndex):T.call("_guiRelayout",z,V)}}})}(E,w,f)}),S.exit().each(function(w){l.autoMargin(f,w._id)}).remove(),S.order()}}},76228:function(ee,D,e){var M=e(71828);ee.exports=function(k){return M.isPlainObject(k.colorbar)}},12311:function(ee,D,e){ee.exports={moduleType:"component",name:"colorbar",attributes:e(63583),supplyDefaults:e(62499),draw:e(98981).draw,hasColorbar:e(76228)}},50693:function(ee,D,e){var M=e(63583),k=e(30587).counter,l=e(78607),T=e(63282).scales;function b(d){return"`"+d+"`"}l(T),ee.exports=function(d,s){d=d||"";var t,i=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:d==="marker.line"),n="showScaleDflt"in s?s.showScaleDflt:i==="z",o=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,a=s.editTypeOverride||"",u=d?d+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):b(u+(t={z:"z",c:"color"}[i]));var p=i+"auto",c=i+"min",x=i+"max",g=i+"mid",h={};h[c]=h[x]=void 0;var y={};y[p]=!1;var v={};return t==="color"&&(v.color={valType:"color",arrayOk:!0,editType:a||"style"},s.anim&&(v.color.anim=!0)),v[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:h},v[c]={valType:"number",dflt:null,editType:a||"plot",impliedEdits:y},v[x]={valType:"number",dflt:null,editType:a||"plot",impliedEdits:y},v[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:h},v.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},v.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},v.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(v.showscale={valType:"boolean",dflt:n,editType:"calc"},v.colorbar=M),s.noColorAxis||(v.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),v}},78803:function(ee,D,e){var M=e(92770),k=e(71828),l=e(52075).extractOpts;ee.exports=function(T,b,d){var s,t=T._fullLayout,i=d.vals,r=d.containerStr,n=r?k.nestedProperty(b,r).get():b,o=l(n),a=o.auto!==!1,u=o.min,p=o.max,c=o.mid,x=function(){return k.aggNums(Math.min,null,i)},g=function(){return k.aggNums(Math.max,null,i)};u===void 0?u=x():a&&(u=n._colorAx&&M(u)?Math.min(u,x()):x()),p===void 0?p=g():a&&(p=n._colorAx&&M(p)?Math.max(p,g()):g()),a&&c!==void 0&&(p-c>c-u?u=c-(p-c):p-c<c-u&&(p=c+(c-u))),u===p&&(u-=.5,p+=.5),o._sync("min",u),o._sync("max",p),o.autocolorscale&&(s=u*p<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,o._sync("colorscale",s))}},33046:function(ee,D,e){var M=e(71828),k=e(52075).hasColorscale,l=e(52075).extractOpts;ee.exports=function(T,b){function d(a,u){var p=a["_"+u];p!==void 0&&(a[u]=p)}function s(a,u){var p=u.container?M.nestedProperty(a,u.container).get():a;if(p)if(p.coloraxis)p._colorAx=b[p.coloraxis];else{var c=l(p),x=c.auto;(x||c.min===void 0)&&d(p,u.min),(x||c.max===void 0)&&d(p,u.max),c.autocolorscale&&d(p,"colorscale")}}for(var t=0;t<T.length;t++){var i=T[t],r=i._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)s(i,r[n]);else s(i,r);k(i,"marker.line")&&s(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var o in b._colorAxes)s(b[o],{min:"cmin",max:"cmax"})}},1586:function(ee,D,e){var M=e(92770),k=e(71828),l=e(76228),T=e(62499),b=e(63282).isValid,d=e(73972).traceIs;function s(t,i){var r=i.slice(0,i.length-1);return i?k.nestedProperty(t,r).get()||{}:t}ee.exports=function t(i,r,n,o,a){var u=a.prefix,p=a.cLetter,c="_module"in r,x=s(i,u),g=s(r,u),h=s(r._template||{},u)||{},y=function(){return delete i.coloraxis,delete r.coloraxis,t(i,r,n,o,a)};if(c){var v=n._colorAxes||{},m=o(u+"coloraxis");if(m){var _=d(r,"contour")&&k.nestedProperty(r,"contours.coloring").get()||"heatmap",f=v[m];return void(f?(f[2].push(y),f[0]!==_&&(f[0]=!1,k.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):v[m]=[_,r,[y]])}}var S=x[p+"min"],w=x[p+"max"],E=M(S)&&M(w)&&S<w;o(u+p+"auto",!E)?o(u+p+"mid"):(o(u+p+"min"),o(u+p+"max"));var L,C,P=x.colorscale,z=h.colorscale;P!==void 0&&(L=!b(P)),z!==void 0&&(L=!b(z)),o(u+"autocolorscale",L),o(u+"colorscale"),o(u+"reversescale"),u!=="marker.line."&&(u&&c&&(C=l(x)),o(u+"showscale",C)&&(u&&h&&(g._template=h),T(x,g,n)))}},52075:function(ee,D,e){var M=e(39898),k=e(84267),l=e(92770),T=e(71828),b=e(7901),d=e(63282).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(u){var p,c,x,g=u._colorAx,h=g||u,y={};for(c=0;c<s.length;c++)y[x=s[c]]=h[x];if(g)for(p="c",c=0;c<t.length;c++)y[x=t[c]]=h["c"+x];else{var v;for(c=0;c<t.length;c++)((v="c"+(x=t[c]))in h||(v="z"+x)in h)&&(y[x]=h[v]);p=v.charAt(0)}return y._sync=function(m,_){var f=t.indexOf(m)!==-1?p+m:m;h[f]=h["_"+f]=_},y}function r(u){for(var p=i(u),c=p.min,x=p.max,g=p.reversescale?n(p.colorscale):p.colorscale,h=g.length,y=new Array(h),v=new Array(h),m=0;m<h;m++){var _=g[m];y[m]=c+_[0]*(x-c),v[m]=_[1]}return{domain:y,range:v}}function n(u){for(var p=u.length,c=new Array(p),x=p-1,g=0;x>=0;x--,g++){var h=u[x];c[g]=[1-h[0],h[1]]}return c}function o(u,p){p=p||{};for(var c=u.domain,x=u.range,g=x.length,h=new Array(g),y=0;y<g;y++){var v=k(x[y]).toRgb();h[y]=[v.r,v.g,v.b,v.a]}var m,_=M.scale.linear().domain(c).range(h).clamp(!0),f=p.noNumericCheck,S=p.returnArray;return(m=f&&S?_:f?function(w){return a(_(w))}:S?function(w){return l(w)?_(w):k(w).isValid()?w:b.defaultLine}:function(w){return l(w)?a(_(w)):k(w).isValid()?w:b.defaultLine}).domain=_.domain,m.range=function(){return x},m}function a(u){var p={r:u[0],g:u[1],b:u[2],a:u[3]};return k(p).toRgbString()}ee.exports={hasColorscale:function(u,p,c){var x=p?T.nestedProperty(u,p).get()||{}:u,g=x[c||"color"],h=!1;if(T.isArrayOrTypedArray(g)){for(var y=0;y<g.length;y++)if(l(g[y])){h=!0;break}}return T.isPlainObject(x)&&(h||x.showscale===!0||l(x.cmin)&&l(x.cmax)||d(x.colorscale)||T.isPlainObject(x.colorbar))},extractOpts:i,extractScale:r,flipScale:n,makeColorScaleFunc:o,makeColorScaleFuncFromTrace:function(u,p){return o(r(u),p)}}},21081:function(ee,D,e){var M=e(63282),k=e(52075);ee.exports={moduleType:"component",name:"colorscale",attributes:e(50693),layoutAttributes:e(72673),supplyLayoutDefaults:e(30959),handleDefaults:e(1586),crossTraceDefaults:e(33046),calc:e(78803),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},72673:function(ee,D,e){var M=e(1426).extendFlat,k=e(50693),l=e(63282).scales;ee.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:l.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:l.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:l.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(ee,D,e){var M=e(71828),k=e(44467),l=e(72673),T=e(1586);ee.exports=function(b,d){function s(p,c){return M.coerce(b,d,l,p,c)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,i,r=d._colorAxes;function n(p,c){return M.coerce(t,i,l.coloraxis,p,c)}for(var o in r){var a=r[o];if(a[0])t=b[o]||{},(i=k.newContainer(d,o,"coloraxis"))._name=o,T(t,i,d,n,{prefix:"",cLetter:"c"});else{for(var u=0;u<a[2].length;u++)a[2][u]();delete d._colorAxes[o]}}}},63282:function(ee,D,e){var M=e(84267),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=k.RdBu;function T(b){var d=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var s=0;s<b.length;s++){var t=b[s];if(t.length!==2||+t[0]<d||!M(t[1]).isValid())return!1;d=+t[0]}return!0}ee.exports={scales:k,defaultScale:l,get:function(b,d){if(d||(d=l),!b)return d;function s(){try{b=k[b]||JSON.parse(b)}catch{b=d}}return typeof b=="string"&&(s(),typeof b=="string"&&s()),T(b)?b:d},isValid:function(b){return k[b]!==void 0||T(b)}}},92807:function(ee){ee.exports=function(D,e,M,k,l){var T=(D-M)/(k-M),b=T+e/(k-M),d=(T+b)/2;return l==="left"||l==="bottom"?T:l==="center"||l==="middle"?d:l==="right"||l==="top"?b:T<.6666666666666666-d?T:b>1.3333333333333333-d?b:d}},70461:function(ee,D,e){var M=e(71828),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ee.exports=function(l,T,b,d){return l=b==="left"?0:b==="center"?1:b==="right"?2:M.constrain(Math.floor(3*l),0,2),T=d==="bottom"?0:d==="middle"?1:d==="top"?2:M.constrain(Math.floor(3*T),0,2),k[T][l]}},64505:function(ee,D){D.selectMode=function(e){return e==="lasso"||e==="select"},D.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},D.openMode=function(e){return e==="drawline"||e==="drawopenpath"},D.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},D.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},D.selectingOrDrawing=function(e){return D.freeMode(e)||D.rectMode(e)}},28569:function(ee,D,e){var M=e(48956),k=e(57035),l=e(38520),T=e(71828).removeElement,b=e(85555),d=ee.exports={};d.align=e(92807),d.getCursor=e(70461);var s=e(26041);function t(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function i(r){return M(r.changedTouches?r.changedTouches[0]:r,document.body)}d.unhover=s.wrapped,d.unhoverRaw=s.raw,d.init=function(r){var n,o,a,u,p,c,x,g,h=r.gd,y=1,v=h._context.doubleClickDelay,m=r.element;h._mouseDownTime||(h._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=f,l?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=f,m.addEventListener("touchstart",f,{passive:!1})):m.ontouchstart=f;var _=r.clampFn||function(E,L,C){return Math.abs(E)<C&&(E=0),Math.abs(L)<C&&(L=0),[E,L]};function f(E){h._dragged=!1,h._dragging=!0;var L=i(E);n=L[0],o=L[1],x=E.target,c=E,g=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=n,E.clientY=o),(a=new Date().getTime())-h._mouseDownTime<v?y+=1:(y=1,h._mouseDownTime=a),r.prepFn&&r.prepFn(E,n,o),k&&!g?(p=t()).style.cursor=window.getComputedStyle(m).cursor:k||(p=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),r.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var L=i(E),C=r.minDrag||b.MINDRAG,P=_(L[0]-n,L[1]-o,C),z=P[0],G=P[1];(z||G)&&(h._dragged=!0,d.unhover(h,E)),h._dragged&&r.moveFn&&!g&&(h._dragdata={element:m,dx:z,dy:G},r.moveFn(z,G))}function w(E){if(delete h._dragdata,r.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),k?T(p):u&&(p.documentElement.style.cursor=u,u=null),h._dragging){if(h._dragging=!1,new Date().getTime()-h._mouseDownTime>v&&(y=Math.max(y-1,1)),h._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(y,c),!g){var L;try{L=new MouseEvent("click",E)}catch{var C=i(E);(L=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(L)}h._dragging=!1,h._dragged=!1}else h._dragged=!1}},d.coverSlip=t},26041:function(ee,D,e){var M=e(11086),k=e(79990),l=e(24401).getGraphDiv,T=e(26675),b=ee.exports={};b.wrapped=function(d,s,t){(d=l(d))._fullLayout&&k.clear(d._fullLayout._uid+T.HOVERID),b.raw(d,s,t)},b.raw=function(d,s){var t=d._fullLayout,i=d._hoverdata;s||(s={}),s.target&&!d._dragged&&M.triggerHandler(d,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),d._hoverdata=void 0,s.target&&i&&d.emit("plotly_unhover",{event:s,points:i}))}},79952:function(ee,D){D.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},D.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(ee,D,e){var M=e(39898),k=e(71828),l=k.numberFormat,T=e(92770),b=e(84267),d=e(73972),s=e(7901),t=e(21081),i=k.strTranslate,r=e(63893),n=e(77922),o=e(18783).LINE_SPACING,a=e(37822).DESELECTDIM,u=e(34098),p=e(39984),c=e(23469).appendArrayPointValue,x=ee.exports={};function g(Me,Te,se){var oe=Te.fillpattern,he=oe&&x.getPatternAttr(oe.shape,0,"");if(he){var Ee=x.getPatternAttr(oe.bgcolor,0,null),ke=x.getPatternAttr(oe.fgcolor,0,null),be=oe.fgopacity,Ie=x.getPatternAttr(oe.size,0,8),Fe=x.getPatternAttr(oe.solidity,0,.3),ce=Te.uid;x.pattern(Me,"point",se,ce,he,Ie,Fe,void 0,oe.fillmode,Ee,ke,be)}else Te.fillcolor&&Me.call(s.fill,Te.fillcolor)}x.font=function(Me,Te,se,oe){k.isPlainObject(Te)&&(oe=Te.color,se=Te.size,Te=Te.family),Te&&Me.style("font-family",Te),se+1&&Me.style("font-size",se+"px"),oe&&Me.call(s.fill,oe)},x.setPosition=function(Me,Te,se){Me.attr("x",Te).attr("y",se)},x.setSize=function(Me,Te,se){Me.attr("width",Te).attr("height",se)},x.setRect=function(Me,Te,se,oe,he){Me.call(x.setPosition,Te,se).call(x.setSize,oe,he)},x.translatePoint=function(Me,Te,se,oe){var he=se.c2p(Me.x),Ee=oe.c2p(Me.y);return!!(T(he)&&T(Ee)&&Te.node())&&(Te.node().nodeName==="text"?Te.attr("x",he).attr("y",Ee):Te.attr("transform",i(he,Ee)),!0)},x.translatePoints=function(Me,Te,se){Me.each(function(oe){var he=M.select(this);x.translatePoint(oe,he,Te,se)})},x.hideOutsideRangePoint=function(Me,Te,se,oe,he,Ee){Te.attr("display",se.isPtWithinRange(Me,he)&&oe.isPtWithinRange(Me,Ee)?null:"none")},x.hideOutsideRangePoints=function(Me,Te){if(Te._hasClipOnAxisFalse){var se=Te.xaxis,oe=Te.yaxis;Me.each(function(he){var Ee=he[0].trace,ke=Ee.xcalendar,be=Ee.ycalendar,Ie=d.traceIs(Ee,"bar-like")?".bartext":".point,.textpoint";Me.selectAll(Ie).each(function(Fe){x.hideOutsideRangePoint(Fe,M.select(this),se,oe,ke,be)})})}},x.crispRound=function(Me,Te,se){return Te&&T(Te)?Me._context.staticPlot?Te:Te<1?1:Math.round(Te):se||0},x.singleLineStyle=function(Me,Te,se,oe,he){Te.style("fill","none");var Ee=(((Me||[])[0]||{}).trace||{}).line||{},ke=se||Ee.width||0,be=he||Ee.dash||"";s.stroke(Te,oe||Ee.color),x.dashLine(Te,be,ke)},x.lineGroupStyle=function(Me,Te,se,oe){Me.style("fill","none").each(function(he){var Ee=(((he||[])[0]||{}).trace||{}).line||{},ke=Te||Ee.width||0,be=oe||Ee.dash||"";M.select(this).call(s.stroke,se||Ee.color).call(x.dashLine,be,ke)})},x.dashLine=function(Me,Te,se){se=+se||0,Te=x.dashStyle(Te,se),Me.style({"stroke-dasharray":Te,"stroke-width":se+"px"})},x.dashStyle=function(Me,Te){Te=+Te||1;var se=Math.max(Te,3);return Me==="solid"?Me="":Me==="dot"?Me=se+"px,"+se+"px":Me==="dash"?Me=3*se+"px,"+3*se+"px":Me==="longdash"?Me=5*se+"px,"+5*se+"px":Me==="dashdot"?Me=3*se+"px,"+se+"px,"+se+"px,"+se+"px":Me==="longdashdot"&&(Me=5*se+"px,"+2*se+"px,"+se+"px,"+2*se+"px"),Me},x.singleFillStyle=function(Me,Te){var se=M.select(Me.node());g(Me,((se.data()[0]||[])[0]||{}).trace||{},Te)},x.fillGroupStyle=function(Me,Te){Me.style("stroke-width",0).each(function(se){var oe=M.select(this);se[0].trace&&g(oe,se[0].trace,Te)})};var h=e(90998);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(h).forEach(function(Me){var Te=h[Me],se=Te.n;x.symbolList.push(se,String(se),Me,se+100,String(se+100),Me+"-open"),x.symbolNames[se]=Me,x.symbolFuncs[se]=Te.f,x.symbolBackOffs[se]=Te.backoff||0,Te.needLine&&(x.symbolNeedLines[se]=!0),Te.noDot?x.symbolNoDot[se]=!0:x.symbolList.push(se+200,String(se+200),Me+"-dot",se+300,String(se+300),Me+"-open-dot"),Te.noFill&&(x.symbolNoFill[se]=!0)});var y=x.symbolNames.length;function v(Me,Te,se,oe){var he=Me%100;return x.symbolFuncs[he](Te,se,oe)+(Me>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(Me){if(T(Me))Me=+Me;else if(typeof Me=="string"){var Te=0;Me.indexOf("-open")>0&&(Te=100,Me=Me.replace("-open","")),Me.indexOf("-dot")>0&&(Te+=200,Me=Me.replace("-dot","")),(Me=x.symbolNames.indexOf(Me))>=0&&(Me+=Te)}return Me%100>=y||Me>=400?0:Math.floor(Math.max(Me,0))};var m={x1:1,x2:0,y1:0,y2:0},_={x1:0,x2:0,y1:1,y2:0},f=l("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:m},horizontalreversed:{node:"linearGradient",attrs:m,reversed:!0},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:!0}};x.gradient=function(Me,Te,se,oe,he,Ee){for(var ke=he.length,be=S[oe],Ie=new Array(ke),Fe=0;Fe<ke;Fe++)be.reversed?Ie[ke-1-Fe]=[f(100*(1-he[Fe][0])),he[Fe][1]]:Ie[Fe]=[f(100*he[Fe][0]),he[Fe][1]];var ce=Te._fullLayout,we="g"+ce._uid+"-"+se,ye=ce._defs.select(".gradients").selectAll("#"+we).data([oe+Ie.join(";")],k.identity);ye.exit().remove(),ye.enter().append(be.node).each(function(){var Ce=M.select(this);be.attrs&&Ce.attr(be.attrs),Ce.attr("id",we);var Re=Ce.selectAll("stop").data(Ie);Re.exit().remove(),Re.enter().append("stop"),Re.each(function(ze){var He=b(ze[1]);M.select(this).attr({offset:ze[0]+"%","stop-color":s.tinyRGB(He),"stop-opacity":He.getAlpha()})})}),Me.style(Ee,K(we,Te)).style(Ee+"-opacity",null),Me.classed("gradient_filled",!0)},x.pattern=function(Me,Te,se,oe,he,Ee,ke,be,Ie,Fe,ce,we){var ye=Te==="legend";be&&(Ie==="overlay"?(Fe=be,ce=s.contrast(Fe)):(Fe=void 0,ce=be));var Ce,Re,ze,He,Ge,Je,ot,Qe,vt,xt=se._fullLayout,mt="p"+xt._uid+"-"+oe,rt={},it=b(ce),Tt=s.tinyRGB(it),Mt=we*it.getAlpha();switch(he){case"/":Ce=Ee*Math.sqrt(2),Re=Ee*Math.sqrt(2),Je="path",rt={d:ze="M-"+Ce/4+","+Re/4+"l"+Ce/2+",-"+Re/2+"M0,"+Re+"L"+Ce+",0M"+Ce/4*3+","+Re/4*5+"l"+Ce/2+",-"+Re/2,opacity:Mt,stroke:Tt,"stroke-width":(He=ke*Ee)+"px"};break;case"\\":Ce=Ee*Math.sqrt(2),Re=Ee*Math.sqrt(2),Je="path",rt={d:ze="M"+Ce/4*3+",-"+Re/4+"l"+Ce/2+","+Re/2+"M0,0L"+Ce+","+Re+"M-"+Ce/4+","+Re/4*3+"l"+Ce/2+","+Re/2,opacity:Mt,stroke:Tt,"stroke-width":(He=ke*Ee)+"px"};break;case"x":Ce=Ee*Math.sqrt(2),Re=Ee*Math.sqrt(2),ze="M-"+Ce/4+","+Re/4+"l"+Ce/2+",-"+Re/2+"M0,"+Re+"L"+Ce+",0M"+Ce/4*3+","+Re/4*5+"l"+Ce/2+",-"+Re/2+"M"+Ce/4*3+",-"+Re/4+"l"+Ce/2+","+Re/2+"M0,0L"+Ce+","+Re+"M-"+Ce/4+","+Re/4*3+"l"+Ce/2+","+Re/2,He=Ee-Ee*Math.sqrt(1-ke),Je="path",rt={d:ze,opacity:Mt,stroke:Tt,"stroke-width":He+"px"};break;case"|":Je="path",Je="path",rt={d:ze="M"+(Ce=Ee)/2+",0L"+Ce/2+","+(Re=Ee),opacity:Mt,stroke:Tt,"stroke-width":(He=ke*Ee)+"px"};break;case"-":Je="path",Je="path",rt={d:ze="M0,"+(Re=Ee)/2+"L"+(Ce=Ee)+","+Re/2,opacity:Mt,stroke:Tt,"stroke-width":(He=ke*Ee)+"px"};break;case"+":Je="path",ze="M"+(Ce=Ee)/2+",0L"+Ce/2+","+(Re=Ee)+"M0,"+Re/2+"L"+Ce+","+Re/2,He=Ee-Ee*Math.sqrt(1-ke),Je="path",rt={d:ze,opacity:Mt,stroke:Tt,"stroke-width":He+"px"};break;case".":Ce=Ee,Re=Ee,ke<Math.PI/4?Ge=Math.sqrt(ke*Ee*Ee/Math.PI):(ot=ke,Qe=Math.PI/4,Ge=(vt=Ee/2)+(Ee/Math.sqrt(2)-vt)*(ot-Qe)/(1-Qe)),Je="circle",rt={cx:Ce/2,cy:Re/2,r:Ge,opacity:Mt,fill:Tt}}var Pt=[he||"noSh",Fe||"noBg",ce||"noFg",Ee,ke].join(";"),kt=xt._defs.select(".patterns").selectAll("#"+mt).data([Pt],k.identity);kt.exit().remove(),kt.enter().append("pattern").each(function(){var Ze=M.select(this);if(Ze.attr({id:mt,width:Ce+"px",height:Re+"px",patternUnits:"userSpaceOnUse",patternTransform:ye?"scale(0.8)":""}),Fe){var Xe=b(Fe),Ve=s.tinyRGB(Xe),We=Xe.getAlpha(),at=Ze.selectAll("rect").data([0]);at.exit().remove(),at.enter().append("rect").attr({width:Ce+"px",height:Re+"px",fill:Ve,"fill-opacity":We})}var et=Ze.selectAll(Je).data([0]);et.exit().remove(),et.enter().append(Je).attr(rt)}),Me.style("fill",K(mt,se)).style("fill-opacity",null),Me.classed("pattern_filled",!0)},x.initGradients=function(Me){var Te=Me._fullLayout;k.ensureSingle(Te._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),M.select(Me).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(Me){var Te=Me._fullLayout;k.ensureSingle(Te._defs,"g","patterns").selectAll("pattern").remove(),M.select(Me).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(Me,Te,se){return Me&&k.isArrayOrTypedArray(Me)?Te<Me.length?Me[Te]:se:Me},x.pointStyle=function(Me,Te,se,oe){if(Me.size()){var he=x.makePointStyleFns(Te);Me.each(function(Ee){x.singlePointStyle(Ee,M.select(this),Te,he,se,oe)})}},x.singlePointStyle=function(Me,Te,se,oe,he,Ee){var ke=se.marker,be=ke.line;if(Ee&&Ee.i>=0&&Me.i===void 0&&(Me.i=Ee.i),Te.style("opacity",oe.selectedOpacityFn?oe.selectedOpacityFn(Me):Me.mo===void 0?ke.opacity:Me.mo),oe.ms2mrc){var Ie;Ie=Me.ms==="various"||ke.size==="various"?3:oe.ms2mrc(Me.ms),Me.mrc=Ie,oe.selectedSizeFn&&(Ie=Me.mrc=oe.selectedSizeFn(Me));var Fe=x.symbolNumber(Me.mx||ke.symbol)||0;Me.om=Fe%200>=100;var ce=Oe(Me,se),we=W(Me,se);Te.attr("d",v(Fe,Ie,ce,we))}var ye,Ce,Re,ze=!1;if(Me.so)Re=be.outlierwidth,Ce=be.outliercolor,ye=ke.outliercolor;else{var He=(be||{}).width;Re=(Me.mlw+1||He+1||(Me.trace?(Me.trace.marker.line||{}).width:0)+1)-1||0,Ce="mlc"in Me?Me.mlcc=oe.lineScale(Me.mlc):k.isArrayOrTypedArray(be.color)?s.defaultLine:be.color,k.isArrayOrTypedArray(ke.color)&&(ye=s.defaultLine,ze=!0),ye="mc"in Me?Me.mcc=oe.markerScale(Me.mc):ke.color||ke.colors||"rgba(0,0,0,0)",oe.selectedColorFn&&(ye=oe.selectedColorFn(Me))}if(Me.om)Te.call(s.stroke,ye).style({"stroke-width":(Re||1)+"px",fill:"none"});else{Te.style("stroke-width",(Me.isBlank?0:Re)+"px");var Ge=ke.gradient,Je=Me.mgt;Je?ze=!0:Je=Ge&&Ge.type,k.isArrayOrTypedArray(Je)&&(Je=Je[0],S[Je]||(Je=0));var ot=ke.pattern,Qe=ot&&x.getPatternAttr(ot.shape,Me.i,"");if(Je&&Je!=="none"){var vt=Me.mgc;vt?ze=!0:vt=Ge.color;var xt=se.uid;ze&&(xt+="-"+Me.i),x.gradient(Te,he,xt,Je,[[0,vt],[1,ye]],"fill")}else if(Qe){var mt=!1,rt=ot.fgcolor;!rt&&Ee&&Ee.color&&(rt=Ee.color,mt=!0);var it=x.getPatternAttr(rt,Me.i,Ee&&Ee.color||null),Tt=x.getPatternAttr(ot.bgcolor,Me.i,null),Mt=ot.fgopacity,Pt=x.getPatternAttr(ot.size,Me.i,8),kt=x.getPatternAttr(ot.solidity,Me.i,.3);mt=mt||Me.mcc||k.isArrayOrTypedArray(ot.shape)||k.isArrayOrTypedArray(ot.bgcolor)||k.isArrayOrTypedArray(ot.fgcolor)||k.isArrayOrTypedArray(ot.size)||k.isArrayOrTypedArray(ot.solidity);var Ze=se.uid;mt&&(Ze+="-"+Me.i),x.pattern(Te,"point",he,Ze,Qe,Pt,kt,Me.mcc,ot.fillmode,Tt,it,Mt)}else k.isArrayOrTypedArray(ye)?s.fill(Te,ye[Me.i]):s.fill(Te,ye);Re&&s.stroke(Te,Ce)}},x.makePointStyleFns=function(Me){var Te={},se=Me.marker;return Te.markerScale=x.tryColorscale(se,""),Te.lineScale=x.tryColorscale(se,"line"),d.traceIs(Me,"symbols")&&(Te.ms2mrc=u.isBubble(Me)?p(Me):function(){return(se.size||6)/2}),Me.selectedpoints&&k.extendFlat(Te,x.makeSelectedPointStyleFns(Me)),Te},x.makeSelectedPointStyleFns=function(Me){var Te={},se=Me.selected||{},oe=Me.unselected||{},he=Me.marker||{},Ee=se.marker||{},ke=oe.marker||{},be=he.opacity,Ie=Ee.opacity,Fe=ke.opacity,ce=Ie!==void 0,we=Fe!==void 0;(k.isArrayOrTypedArray(be)||ce||we)&&(Te.selectedOpacityFn=function(Qe){var vt=Qe.mo===void 0?he.opacity:Qe.mo;return Qe.selected?ce?Ie:vt:we?Fe:a*vt});var ye=he.color,Ce=Ee.color,Re=ke.color;(Ce||Re)&&(Te.selectedColorFn=function(Qe){var vt=Qe.mcc||ye;return Qe.selected?Ce||vt:Re||vt});var ze=he.size,He=Ee.size,Ge=ke.size,Je=He!==void 0,ot=Ge!==void 0;return d.traceIs(Me,"symbols")&&(Je||ot)&&(Te.selectedSizeFn=function(Qe){var vt=Qe.mrc||ze/2;return Qe.selected?Je?He/2:vt:ot?Ge/2:vt}),Te},x.makeSelectedTextStyleFns=function(Me){var Te={},se=Me.selected||{},oe=Me.unselected||{},he=Me.textfont||{},Ee=se.textfont||{},ke=oe.textfont||{},be=he.color,Ie=Ee.color,Fe=ke.color;return Te.selectedTextColorFn=function(ce){var we=ce.tc||be;return ce.selected?Ie||we:Fe||(Ie?we:s.addOpacity(we,a))},Te},x.selectedPointStyle=function(Me,Te){if(Me.size()&&Te.selectedpoints){var se=x.makeSelectedPointStyleFns(Te),oe=Te.marker||{},he=[];se.selectedOpacityFn&&he.push(function(Ee,ke){Ee.style("opacity",se.selectedOpacityFn(ke))}),se.selectedColorFn&&he.push(function(Ee,ke){s.fill(Ee,se.selectedColorFn(ke))}),se.selectedSizeFn&&he.push(function(Ee,ke){var be=ke.mx||oe.symbol||0,Ie=se.selectedSizeFn(ke);Ee.attr("d",v(x.symbolNumber(be),Ie,Oe(ke,Te),W(ke,Te))),ke.mrc2=Ie}),he.length&&Me.each(function(Ee){for(var ke=M.select(this),be=0;be<he.length;be++)he[be](ke,Ee)})}},x.tryColorscale=function(Me,Te){var se=Te?k.nestedProperty(Me,Te).get():Me;if(se){var oe=se.color;if((se.colorscale||se._colorAx)&&k.isArrayOrTypedArray(oe))return t.makeColorScaleFuncFromTrace(se)}return k.identity};var w,E,L={start:1,end:-1,middle:0,bottom:1,top:-1};function C(Me,Te,se,oe,he){var Ee=M.select(Me.node().parentNode),ke=Te.indexOf("top")!==-1?"top":Te.indexOf("bottom")!==-1?"bottom":"middle",be=Te.indexOf("left")!==-1?"end":Te.indexOf("right")!==-1?"start":"middle",Ie=oe?oe/.8+1:0,Fe=(r.lineCount(Me)-1)*o+1,ce=L[be]*Ie,we=.75*se+L[ke]*Ie+(L[ke]-1)*Fe*se/2;Me.attr("text-anchor",be),he||Ee.attr("transform",i(ce,we))}function P(Me,Te){var se=Me.ts||Te.textfont.size;return T(se)&&se>0?se:0}function z(Me,Te,se){return se&&(Me=V(Me)),Te?O(Me[1]):G(Me[0])}function G(Me){var Te=M.round(Me,2);return w=Te,Te}function O(Me){var Te=M.round(Me,2);return E=Te,Te}function H(Me,Te,se,oe){var he=Me[0]-Te[0],Ee=Me[1]-Te[1],ke=se[0]-Te[0],be=se[1]-Te[1],Ie=Math.pow(he*he+Ee*Ee,.25),Fe=Math.pow(ke*ke+be*be,.25),ce=(Fe*Fe*he-Ie*Ie*ke)*oe,we=(Fe*Fe*Ee-Ie*Ie*be)*oe,ye=3*Fe*(Ie+Fe),Ce=3*Ie*(Ie+Fe);return[[G(Te[0]+(ye&&ce/ye)),O(Te[1]+(ye&&we/ye))],[G(Te[0]-(Ce&&ce/Ce)),O(Te[1]-(Ce&&we/Ce))]]}x.textPointStyle=function(Me,Te,se){if(Me.size()){var oe;if(Te.selectedpoints){var he=x.makeSelectedTextStyleFns(Te);oe=he.selectedTextColorFn}var Ee=Te.texttemplate,ke=se._fullLayout;Me.each(function(be){var Ie=M.select(this),Fe=Ee?k.extractOption(be,Te,"txt","texttemplate"):k.extractOption(be,Te,"tx","text");if(Fe||Fe===0){if(Ee){var ce=Te._module.formatLabels,we=ce?ce(be,Te,ke):{},ye={};c(ye,Te,be.i);var Ce=Te._meta||{};Fe=k.texttemplateString(Fe,we,ke._d3locale,ye,be,Ce)}var Re=be.tp||Te.textposition,ze=P(be,Te),He=oe?oe(be):be.tc||Te.textfont.color;Ie.call(x.font,be.tf||Te.textfont.family,ze,He).text(Fe).call(r.convertToTspans,se).call(C,Re,ze,be.mrc)}else Ie.remove()})}},x.selectedTextStyle=function(Me,Te){if(Me.size()&&Te.selectedpoints){var se=x.makeSelectedTextStyleFns(Te);Me.each(function(oe){var he=M.select(this),Ee=se.selectedTextColorFn(oe),ke=oe.tp||Te.textposition,be=P(oe,Te);s.fill(he,Ee);var Ie=d.traceIs(Te,"bar-like");C(he,ke,be,oe.mrc2||oe.mrc,Ie)})}},x.smoothopen=function(Me,Te){if(Me.length<3)return"M"+Me.join("L");var se,oe="M"+Me[0],he=[];for(se=1;se<Me.length-1;se++)he.push(H(Me[se-1],Me[se],Me[se+1],Te));for(oe+="Q"+he[0][0]+" "+Me[1],se=2;se<Me.length-1;se++)oe+="C"+he[se-2][1]+" "+he[se-1][0]+" "+Me[se];return oe+"Q"+he[Me.length-3][1]+" "+Me[Me.length-1]},x.smoothclosed=function(Me,Te){if(Me.length<3)return"M"+Me.join("L")+"Z";var se,oe="M"+Me[0],he=Me.length-1,Ee=[H(Me[he],Me[0],Me[1],Te)];for(se=1;se<he;se++)Ee.push(H(Me[se-1],Me[se],Me[se+1],Te));for(Ee.push(H(Me[he-1],Me[he],Me[0],Te)),se=1;se<=he;se++)oe+="C"+Ee[se-1][1]+" "+Ee[se][0]+" "+Me[se];return oe+"C"+Ee[he][1]+" "+Ee[0][0]+" "+Me[0]+"Z"};var N={hv:function(Me,Te,se){return"H"+G(Te[0])+"V"+z(Te,1,se)},vh:function(Me,Te,se){return"V"+O(Te[1])+"H"+z(Te,0,se)},hvh:function(Me,Te,se){return"H"+G((Me[0]+Te[0])/2)+"V"+O(Te[1])+"H"+z(Te,0,se)},vhv:function(Me,Te,se){return"V"+O((Me[1]+Te[1])/2)+"H"+G(Te[0])+"V"+z(Te,1,se)}},B=function(Me,Te,se){return"L"+z(Te,0,se)+","+z(Te,1,se)};function V(Me,Te){var se=Me.backoff,oe=Me.trace,he=Me.d,Ee=Me.i;if(se&&oe&&oe.marker&&oe.marker.angle%360==0&&oe.line&&oe.line.shape!=="spline"){var ke=k.isArrayOrTypedArray(se),be=Me,Ie=Te?Te[0]:w||0,Fe=Te?Te[1]:E||0,ce=be[0],we=be[1],ye=ce-Ie,Ce=we-Fe,Re=Math.atan2(Ce,ye),ze=ke?se[Ee]:se;if(ze==="auto"){var He=be.i;oe.type==="scatter"&&He--;var Ge=be.marker,Je=Ge.symbol;k.isArrayOrTypedArray(Je)&&(Je=Je[He]);var ot=Ge.size;k.isArrayOrTypedArray(ot)&&(ot=ot[He]),ze=Ge?x.symbolBackOffs[x.symbolNumber(Je)]*ot:0,ze+=x.getMarkerStandoff(he[He],oe)||0}var Qe=ce-ze*Math.cos(Re),vt=we-ze*Math.sin(Re);(Qe<=ce&&Qe>=Ie||Qe>=ce&&Qe<=Ie)&&(vt<=we&&vt>=Fe||vt>=we&&vt<=Fe)&&(Me=[Qe,vt])}return Me}x.steps=function(Me){var Te=N[Me]||B;return function(se){for(var oe="M"+G(se[0][0])+","+O(se[0][1]),he=se.length,Ee=1;Ee<he;Ee++)oe+=Te(se[Ee-1],se[Ee],Ee===he-1);return oe}},x.applyBackoff=V,x.makeTester=function(){var Me=k.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(se){se.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Te=k.ensureSingle(Me,"path","js-reference-point",function(se){se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=Me,x.testref=Te},x.savedBBoxes={};var q=0;function te(Me){var Te=Me.getAttribute("data-unformatted");if(Te!==null)return Te+Me.getAttribute("data-math")+Me.getAttribute("text-anchor")+Me.getAttribute("style")}function K(Me,Te){if(!Me)return null;var se=Te._context,oe=se._exportedPlot?"":se._baseUrl||"";return oe?"url('"+oe+"#"+Me+"')":"url(#"+Me+")"}x.bBox=function(Me,Te,se){var oe,he,Ee;if(se||(se=te(Me)),se){if(oe=x.savedBBoxes[se])return k.extendFlat({},oe)}else if(Me.childNodes.length===1){var ke=Me.childNodes[0];if(se=te(ke)){var be=+ke.getAttribute("x")||0,Ie=+ke.getAttribute("y")||0,Fe=ke.getAttribute("transform");if(!Fe){var ce=x.bBox(ke,!1,se);return be&&(ce.left+=be,ce.right+=be),Ie&&(ce.top+=Ie,ce.bottom+=Ie),ce}if(se+="~"+be+"~"+Ie+"~"+Fe,oe=x.savedBBoxes[se])return k.extendFlat({},oe)}}Te?he=Me:(Ee=x.tester.node(),he=Me.cloneNode(!0),Ee.appendChild(he)),M.select(he).attr("transform",null).call(r.positionText,0,0);var we=he.getBoundingClientRect(),ye=x.testref.node().getBoundingClientRect();Te||Ee.removeChild(he);var Ce={height:we.height,width:we.width,left:we.left-ye.left,top:we.top-ye.top,right:we.right-ye.left,bottom:we.bottom-ye.top};return q>=1e4&&(x.savedBBoxes={},q=0),se&&(x.savedBBoxes[se]=Ce),q++,k.extendFlat({},Ce)},x.setClipUrl=function(Me,Te,se){Me.attr("clip-path",K(Te,se))},x.getTranslate=function(Me){var Te=(Me[Me.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(se,oe,he){return[oe,he].join(" ")}).split(" ");return{x:+Te[0]||0,y:+Te[1]||0}},x.setTranslate=function(Me,Te,se){var oe=Me.attr?"attr":"getAttribute",he=Me.attr?"attr":"setAttribute",Ee=Me[oe]("transform")||"";return Te=Te||0,se=se||0,Ee=Ee.replace(/(\btranslate\(.*?\);?)/,"").trim(),Ee=(Ee+=i(Te,se)).trim(),Me[he]("transform",Ee),Ee},x.getScale=function(Me){var Te=(Me[Me.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(se,oe,he){return[oe,he].join(" ")}).split(" ");return{x:+Te[0]||1,y:+Te[1]||1}},x.setScale=function(Me,Te,se){var oe=Me.attr?"attr":"getAttribute",he=Me.attr?"attr":"setAttribute",Ee=Me[oe]("transform")||"";return Te=Te||1,se=se||1,Ee=Ee.replace(/(\bscale\(.*?\);?)/,"").trim(),Ee=(Ee+="scale("+Te+","+se+")").trim(),Me[he]("transform",Ee),Ee};var J=/\s*sc.*/;x.setPointGroupScale=function(Me,Te,se){if(Te=Te||1,se=se||1,Me){var oe=Te===1&&se===1?"":"scale("+Te+","+se+")";Me.each(function(){var he=(this.getAttribute("transform")||"").replace(J,"");he=(he+=oe).trim(),this.setAttribute("transform",he)})}};var Y=/translate\([^)]*\)\s*$/;function W(Me,Te){var se;return Me&&(se=Me.mf),se===void 0&&(se=Te.marker&&Te.marker.standoff||0),Te._geo||Te._xA?se:-se}x.setTextPointsScale=function(Me,Te,se){Me&&Me.each(function(){var oe,he=M.select(this),Ee=he.select("text");if(Ee.node()){var ke=parseFloat(Ee.attr("x")||0),be=parseFloat(Ee.attr("y")||0),Ie=(he.attr("transform")||"").match(Y);oe=Te===1&&se===1?[]:[i(ke,be),"scale("+Te+","+se+")",i(-ke,-be)],Ie&&oe.push(Ie),he.attr("transform",oe.join(""))}})},x.getMarkerStandoff=W;var Q,ne,re,ae,ue,pe,ge=Math.atan2,_e=Math.cos,me=Math.sin;function ve(Me,Te){var se=Te[0],oe=Te[1];return[se*_e(Me)-oe*me(Me),se*me(Me)+oe*_e(Me)]}function Oe(Me,Te){var se,oe,he=Me.ma;he===void 0&&(he=Te.marker.angle||0);var Ee=Te.marker.angleref;if(Ee==="previous"||Ee==="north"){if(Te._geo){var ke=Te._geo.project(Me.lonlat);se=ke[0],oe=ke[1]}else{var be=Te._xA,Ie=Te._yA;if(!be||!Ie)return 90;se=be.c2p(Me.x),oe=Ie.c2p(Me.y)}if(Te._geo){var Fe,ce=Me.lonlat[0],we=Me.lonlat[1],ye=Te._geo.project([ce,we+1e-5]),Ce=Te._geo.project([ce+1e-5,we]),Re=ge(Ce[1]-oe,Ce[0]-se),ze=ge(ye[1]-oe,ye[0]-se);if(Ee==="north")Fe=he/180*Math.PI;else if(Ee==="previous"){var He=ce/180*Math.PI,Ge=we/180*Math.PI,Je=Q/180*Math.PI,ot=ne/180*Math.PI,Qe=Je-He,vt=_e(ot)*me(Qe),xt=me(ot)*_e(Ge)-_e(ot)*me(Ge)*_e(Qe);Fe=-ge(vt,xt)-Math.PI,Q=ce,ne=we}var mt=ve(Re,[_e(Fe),0]),rt=ve(ze,[me(Fe),0]);he=ge(mt[1]+rt[1],mt[0]+rt[0])/Math.PI*180,Ee!=="previous"||pe===Te.uid&&Me.i===ue+1||(he=null)}if(Ee==="previous"&&!Te._geo)if(pe===Te.uid&&Me.i===ue+1&&T(se)&&T(oe)){var it=se-re,Tt=oe-ae,Mt=Te.line&&Te.line.shape||"",Pt=Mt.slice(Mt.length-1);Pt==="h"&&(Tt=0),Pt==="v"&&(it=0),he+=ge(Tt,it)/Math.PI*180+90}else he=null}return re=se,ae=oe,ue=Me.i,pe=Te.uid,he}x.getMarkerAngle=Oe},90998:function(ee,D,e){var M,k,l,T,b=e(95616),d=e(39898).round,s="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),r=Math.PI,n=Math.cos,o=Math.sin;function a(p){return p===null}function u(p,c,x){if(!(p&&p%360!=0||c))return x;if(l===p&&T===c&&M===x)return k;function g(z,G){var O=n(z),H=o(z),N=G[0],B=G[1]+(c||0);return[N*O-B*H,N*H+B*O]}l=p,T=c,M=x;for(var h=p/180*r,y=0,v=0,m=b(x),_="",f=0;f<m.length;f++){var S=m[f],w=S[0],E=y,L=v;if(w==="M"||w==="L")y=+S[1],v=+S[2];else if(w==="m"||w==="l")y+=+S[1],v+=+S[2];else if(w==="H")y=+S[1];else if(w==="h")y+=+S[1];else if(w==="V")v=+S[1];else if(w==="v")v+=+S[1];else if(w==="A"){y=+S[1],v=+S[2];var C=g(h,[+S[6],+S[7]]);S[6]=C[0],S[7]=C[1],S[3]=+S[3]+p}w!=="H"&&w!=="V"||(w="L"),w!=="h"&&w!=="v"||(w="l"),w!=="m"&&w!=="l"||(y-=E,v-=L);var P=g(h,[y,v]);w!=="H"&&w!=="V"||(w="L"),w!=="M"&&w!=="L"&&w!=="m"&&w!=="l"||(S[1]=P[0],S[2]=P[1]),S[0]=w,_+=S[0]+S.slice(1).join(",")}return k=_,_}ee.exports={circle:{n:0,f:function(p,c,x){if(a(c))return s;var g=d(p,2),h="M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z";return x?u(c,x,h):h}},square:{n:1,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")}},diamond:{n:2,f:function(p,c,x){if(a(c))return s;var g=d(1.3*p,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"Z")}},cross:{n:3,f:function(p,c,x){if(a(c))return s;var g=d(.4*p,2),h=d(1.2*p,2);return u(c,x,"M"+h+","+g+"H"+g+"V"+h+"H-"+g+"V"+g+"H-"+h+"V-"+g+"H-"+g+"V-"+h+"H"+g+"V-"+g+"H"+h+"Z")}},x:{n:4,f:function(p,c,x){if(a(c))return s;var g=d(.8*p/t,2),h="l"+g+","+g,y="l"+g+",-"+g,v="l-"+g+",-"+g,m="l-"+g+","+g;return u(c,x,"M0,"+g+h+y+v+y+v+m+v+m+h+m+h+"Z")}},"triangle-up":{n:5,f:function(p,c,x){if(a(c))return s;var g=d(2*p/i,2);return u(c,x,"M-"+g+","+d(p/2,2)+"H"+g+"L0,-"+d(p,2)+"Z")}},"triangle-down":{n:6,f:function(p,c,x){if(a(c))return s;var g=d(2*p/i,2);return u(c,x,"M-"+g+",-"+d(p/2,2)+"H"+g+"L0,"+d(p,2)+"Z")}},"triangle-left":{n:7,f:function(p,c,x){if(a(c))return s;var g=d(2*p/i,2);return u(c,x,"M"+d(p/2,2)+",-"+g+"V"+g+"L-"+d(p,2)+",0Z")}},"triangle-right":{n:8,f:function(p,c,x){if(a(c))return s;var g=d(2*p/i,2);return u(c,x,"M-"+d(p/2,2)+",-"+g+"V"+g+"L"+d(p,2)+",0Z")}},"triangle-ne":{n:9,f:function(p,c,x){if(a(c))return s;var g=d(.6*p,2),h=d(1.2*p,2);return u(c,x,"M-"+h+",-"+g+"H"+g+"V"+h+"Z")}},"triangle-se":{n:10,f:function(p,c,x){if(a(c))return s;var g=d(.6*p,2),h=d(1.2*p,2);return u(c,x,"M"+g+",-"+h+"V"+g+"H-"+h+"Z")}},"triangle-sw":{n:11,f:function(p,c,x){if(a(c))return s;var g=d(.6*p,2),h=d(1.2*p,2);return u(c,x,"M"+h+","+g+"H-"+g+"V-"+h+"Z")}},"triangle-nw":{n:12,f:function(p,c,x){if(a(c))return s;var g=d(.6*p,2),h=d(1.2*p,2);return u(c,x,"M-"+g+","+h+"V-"+g+"H"+h+"Z")}},pentagon:{n:13,f:function(p,c,x){if(a(c))return s;var g=d(.951*p,2),h=d(.588*p,2),y=d(-p,2),v=d(-.309*p,2);return u(c,x,"M"+g+","+v+"L"+h+","+d(.809*p,2)+"H-"+h+"L-"+g+","+v+"L0,"+y+"Z")}},hexagon:{n:14,f:function(p,c,x){if(a(c))return s;var g=d(p,2),h=d(p/2,2),y=d(p*i/2,2);return u(c,x,"M"+y+",-"+h+"V"+h+"L0,"+g+"L-"+y+","+h+"V-"+h+"L0,-"+g+"Z")}},hexagon2:{n:15,f:function(p,c,x){if(a(c))return s;var g=d(p,2),h=d(p/2,2),y=d(p*i/2,2);return u(c,x,"M-"+h+","+y+"H"+h+"L"+g+",0L"+h+",-"+y+"H-"+h+"L-"+g+",0Z")}},octagon:{n:16,f:function(p,c,x){if(a(c))return s;var g=d(.924*p,2),h=d(.383*p,2);return u(c,x,"M-"+h+",-"+g+"H"+h+"L"+g+",-"+h+"V"+h+"L"+h+","+g+"H-"+h+"L-"+g+","+h+"V-"+h+"Z")}},star:{n:17,f:function(p,c,x){if(a(c))return s;var g=1.4*p,h=d(.225*g,2),y=d(.951*g,2),v=d(.363*g,2),m=d(.588*g,2),_=d(-g,2),f=d(-.309*g,2),S=d(.118*g,2),w=d(.809*g,2);return u(c,x,"M"+h+","+f+"H"+y+"L"+v+","+S+"L"+m+","+w+"L0,"+d(.382*g,2)+"L-"+m+","+w+"L-"+v+","+S+"L-"+y+","+f+"H-"+h+"L0,"+_+"Z")}},hexagram:{n:18,f:function(p,c,x){if(a(c))return s;var g=d(.66*p,2),h=d(.38*p,2),y=d(.76*p,2);return u(c,x,"M-"+y+",0l-"+h+",-"+g+"h"+y+"l"+h+",-"+g+"l"+h+","+g+"h"+y+"l-"+h+","+g+"l"+h+","+g+"h-"+y+"l-"+h+","+g+"l-"+h+",-"+g+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(p,c,x){if(a(c))return s;var g=d(p*i*.8,2),h=d(.8*p,2),y=d(1.6*p,2),v=d(4*p,2),m="A "+v+","+v+" 0 0 1 ";return u(c,x,"M-"+g+","+h+m+g+","+h+m+"0,-"+y+m+"-"+g+","+h+"Z")}},"star-triangle-down":{n:20,f:function(p,c,x){if(a(c))return s;var g=d(p*i*.8,2),h=d(.8*p,2),y=d(1.6*p,2),v=d(4*p,2),m="A "+v+","+v+" 0 0 1 ";return u(c,x,"M"+g+",-"+h+m+"-"+g+",-"+h+m+"0,"+y+m+g+",-"+h+"Z")}},"star-square":{n:21,f:function(p,c,x){if(a(c))return s;var g=d(1.1*p,2),h=d(2*p,2),y="A "+h+","+h+" 0 0 1 ";return u(c,x,"M-"+g+",-"+g+y+"-"+g+","+g+y+g+","+g+y+g+",-"+g+y+"-"+g+",-"+g+"Z")}},"star-diamond":{n:22,f:function(p,c,x){if(a(c))return s;var g=d(1.4*p,2),h=d(1.9*p,2),y="A "+h+","+h+" 0 0 1 ";return u(c,x,"M-"+g+",0"+y+"0,"+g+y+g+",0"+y+"0,-"+g+y+"-"+g+",0Z")}},"diamond-tall":{n:23,f:function(p,c,x){if(a(c))return s;var g=d(.7*p,2),h=d(1.4*p,2);return u(c,x,"M0,"+h+"L"+g+",0L0,-"+h+"L-"+g+",0Z")}},"diamond-wide":{n:24,f:function(p,c,x){if(a(c))return s;var g=d(1.4*p,2),h=d(.7*p,2);return u(c,x,"M0,"+h+"L"+g+",0L0,-"+h+"L-"+g+",0Z")}},hourglass:{n:25,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"H-"+g+"L"+g+",-"+g+"H-"+g+"Z")},noDot:!0},bowtie:{n:26,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"V-"+g+"L-"+g+","+g+"V-"+g+"Z")},noDot:!0},"circle-cross":{n:27,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(p,c,x){if(a(c))return s;var g=d(p,2),h=d(p/t,2);return u(c,x,"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(p,c,x){if(a(c))return s;var g=d(1.3*p,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM0,-"+g+"V"+g+"M-"+g+",0H"+g)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(p,c,x){if(a(c))return s;var g=d(1.3*p,2),h=d(.65*p,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM-"+h+",-"+h+"L"+h+","+h+"M-"+h+","+h+"L"+h+",-"+h)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(p,c,x){if(a(c))return s;var g=d(1.4*p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(p,c,x){if(a(c))return s;var g=d(1.2*p,2),h=d(.85*p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(p,c,x){if(a(c))return s;var g=d(p/2,2),h=d(p,2);return u(c,x,"M"+g+","+h+"V-"+h+"M"+(g-h)+",-"+h+"V"+h+"M"+h+","+g+"H-"+h+"M-"+h+","+(g-h)+"H"+h)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(p,c,x){if(a(c))return s;var g=d(1.2*p,2),h=d(1.6*p,2),y=d(.8*p,2);return u(c,x,"M-"+g+","+y+"L0,0M"+g+","+y+"L0,0M0,-"+h+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(p,c,x){if(a(c))return s;var g=d(1.2*p,2),h=d(1.6*p,2),y=d(.8*p,2);return u(c,x,"M-"+g+",-"+y+"L0,0M"+g+",-"+y+"L0,0M0,"+h+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(p,c,x){if(a(c))return s;var g=d(1.2*p,2),h=d(1.6*p,2),y=d(.8*p,2);return u(c,x,"M"+y+","+g+"L0,0M"+y+",-"+g+"L0,0M-"+h+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(p,c,x){if(a(c))return s;var g=d(1.2*p,2),h=d(1.6*p,2),y=d(.8*p,2);return u(c,x,"M-"+y+","+g+"L0,0M-"+y+",-"+g+"L0,0M"+h+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(p,c,x){if(a(c))return s;var g=d(1.4*p,2);return u(c,x,"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(p,c,x){if(a(c))return s;var g=d(1.4*p,2);return u(c,x,"M0,"+g+"V-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M0,0L-"+g+","+d(2*p,2)+"H"+g+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M0,0L-"+g+",-"+d(2*p,2)+"H"+g+"Z")},noDot:!0},"arrow-left":{n:47,f:function(p,c,x){if(a(c))return s;var g=d(2*p,2),h=d(p,2);return u(c,x,"M0,0L"+g+",-"+h+"V"+h+"Z")},noDot:!0},"arrow-right":{n:48,f:function(p,c,x){if(a(c))return s;var g=d(2*p,2),h=d(p,2);return u(c,x,"M0,0L-"+g+",-"+h+"V"+h+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M-"+g+",0H"+g+"M0,0L-"+g+","+d(2*p,2)+"H"+g+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(p,c,x){if(a(c))return s;var g=d(p,2);return u(c,x,"M-"+g+",0H"+g+"M0,0L-"+g+",-"+d(2*p,2)+"H"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(p,c,x){if(a(c))return s;var g=d(2*p,2),h=d(p,2);return u(c,x,"M0,-"+h+"V"+h+"M0,0L"+g+",-"+h+"V"+h+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(p,c,x){if(a(c))return s;var g=d(2*p,2),h=d(p,2);return u(c,x,"M0,-"+h+"V"+h+"M0,0L-"+g+",-"+h+"V"+h+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(p,c,x){if(a(c))return s;var g=r/2.5,h=2*p*n(g),y=2*p*o(g);return u(c,x,"M0,0L"+-h+","+y+"L"+h+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(p,c,x){if(a(c))return s;var g=r/4,h=2*p*n(g),y=2*p*o(g);return u(c,x,"M0,0L"+-h+","+y+"A "+2*p+","+2*p+" 0 0 1 "+h+","+y+"Z")},backoff:.4,noDot:!0}}},25673:function(ee){ee.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(ee,D,e){var M=e(92770),k=e(73972),l=e(89298),T=e(71828),b=e(45827);function d(s,t,i,r){var n=t["error_"+r]||{},o=[];if(n.visible&&["linear","log"].indexOf(i.type)!==-1){for(var a=b(n),u=0;u<s.length;u++){var p=s[u],c=p.i;if(c===void 0)c=u;else if(c===null)continue;var x=p[r];if(M(i.c2l(x))){var g=a(x,c);if(M(g[0])&&M(g[1])){var h=p[r+"s"]=x-g[0],y=p[r+"h"]=x+g[1];o.push(h,y)}}}var v=i._id,m=t._extremes[v],_=l.findExtremes(i,o,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(_.min),m.max=m.max.concat(_.max)}}ee.exports=function(s){for(var t=s.calcdata,i=0;i<t.length;i++){var r=t[i],n=r[0].trace;if(n.visible===!0&&k.traceIs(n,"errorBarsOK")){var o=l.getFromId(s,n.xaxis),a=l.getFromId(s,n.yaxis);d(r,n,o,"x"),d(r,n,a,"y")}}}},45827:function(ee){function D(e,M){return e==="percent"?function(k){return Math.abs(k*M/100)}:e==="constant"?function(){return Math.abs(M)}:e==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}ee.exports=function(e){var M=e.type,k=e.symmetric;if(M==="data"){var l=e.array||[];if(k)return function(s,t){var i=+l[t];return[i,i]};var T=e.arrayminus||[];return function(s,t){var i=+l[t],r=+T[t];return isNaN(i)&&isNaN(r)?[NaN,NaN]:[r||0,i||0]}}var b=D(M,e.value),d=D(M,e.valueminus);return k||e.valueminus===void 0?function(s){var t=b(s);return[t,t]}:function(s){return[d(s),b(s)]}}},97587:function(ee,D,e){var M=e(92770),k=e(73972),l=e(71828),T=e(44467),b=e(25673);ee.exports=function(d,s,t,i){var r="error_"+i.axis,n=T.newContainer(s,r),o=d[r]||{};function a(x,g){return l.coerce(o,n,b,x,g)}if(a("visible",o.array!==void 0||o.value!==void 0||o.type==="sqrt")!==!1){var u=a("type","array"in o?"data":"percent"),p=!0;u!=="sqrt"&&(p=a("symmetric",!((u==="data"?"arrayminus":"valueminus")in o))),u==="data"?(a("array"),a("traceref"),p||(a("arrayminus"),a("tracerefminus"))):u!=="percent"&&u!=="constant"||(a("value"),p||a("valueminus"));var c="copy_"+i.inherit+"style";i.inherit&&(s["error_"+i.inherit]||{}).visible&&a(c,!(o.color||M(o.thickness)||M(o.width))),i.inherit&&n[c]||(a("color",t),a("thickness"),a("width",k.traceIs(s,"gl3d")?0:4))}}},37369:function(ee,D,e){var M=e(71828),k=e(30962).overrideAll,l=e(25673),T={error_x:M.extendFlat({},l),error_y:M.extendFlat({},l)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var b={error_x:M.extendFlat({},l),error_y:M.extendFlat({},l),error_z:M.extendFlat({},l)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,ee.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(b,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(97587),calc:e(84532),makeComputeError:e(45827),plot:e(19398),style:e(62662),hoverInfo:function(d,s,t){(s.error_y||{}).visible&&(t.yerr=d.yh-d.y,s.error_y.symmetric||(t.yerrneg=d.y-d.ys)),(s.error_x||{}).visible&&(t.xerr=d.xh-d.x,s.error_x.symmetric||(t.xerrneg=d.x-d.xs))}}},19398:function(ee,D,e){var M=e(39898),k=e(92770),l=e(91424),T=e(34098);ee.exports=function(b,d,s,t){var i=s.xaxis,r=s.yaxis,n=t&&t.duration>0,o=b._context.staticPlot;d.each(function(a){var u,p=a[0].trace,c=p.error_x||{},x=p.error_y||{};p.ids&&(u=function(v){return v.id});var g=T.hasMarkers(p)&&p.marker.maxdisplayed>0;x.visible||c.visible||(a=[]);var h=M.select(this).selectAll("g.errorbar").data(a,u);if(h.exit().remove(),a.length){c.visible||h.selectAll("path.xerror").remove(),x.visible||h.selectAll("path.yerror").remove(),h.style("opacity",1);var y=h.enter().append("g").classed("errorbar",!0);n&&y.style("opacity",0).transition().duration(t.duration).style("opacity",1),l.setClipUrl(h,s.layerClipId,b),h.each(function(v){var m=M.select(this),_=function(C,P,z){var G={x:P.c2p(C.x),y:z.c2p(C.y)};return C.yh!==void 0&&(G.yh=z.c2p(C.yh),G.ys=z.c2p(C.ys),k(G.ys)||(G.noYS=!0,G.ys=z.c2p(C.ys,!0))),C.xh!==void 0&&(G.xh=P.c2p(C.xh),G.xs=P.c2p(C.xs),k(G.xs)||(G.noXS=!0,G.xs=P.c2p(C.xs,!0))),G}(v,i,r);if(!g||v.vis){var f,S=m.select("path.yerror");if(x.visible&&k(_.x)&&k(_.yh)&&k(_.ys)){var w=x.width;f="M"+(_.x-w)+","+_.yh+"h"+2*w+"m-"+w+",0V"+_.ys,_.noYS||(f+="m-"+w+",0h"+2*w),S.size()?n&&(S=S.transition().duration(t.duration).ease(t.easing)):S=m.append("path").style("vector-effect",o?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",f)}else S.remove();var E=m.select("path.xerror");if(c.visible&&k(_.y)&&k(_.xh)&&k(_.xs)){var L=(c.copy_ystyle?x:c).width;f="M"+_.xh+","+(_.y-L)+"v"+2*L+"m0,-"+L+"H"+_.xs,_.noXS||(f+="m0,-"+L+"v"+2*L),E.size()?n&&(E=E.transition().duration(t.duration).ease(t.easing)):E=m.append("path").style("vector-effect",o?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",f)}else E.remove()}})}})}},62662:function(ee,D,e){var M=e(39898),k=e(7901);ee.exports=function(l){l.each(function(T){var b=T[0].trace,d=b.error_y||{},s=b.error_x||{},t=M.select(this);t.selectAll("path.yerror").style("stroke-width",d.thickness+"px").call(k.stroke,d.color),s.copy_ystyle&&(s=d),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},77914:function(ee,D,e){var M=e(41940),k=e(528).hoverlabel,l=e(1426).extendFlat;ee.exports={hoverlabel:{bgcolor:l({},k.bgcolor,{arrayOk:!0}),bordercolor:l({},k.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:l({},k.align,{arrayOk:!0}),namelength:l({},k.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(ee,D,e){var M=e(71828),k=e(73972);function l(T,b,d,s){s=s||M.identity,Array.isArray(T)&&(b[0][d]=s(T))}ee.exports=function(T){var b=T.calcdata,d=T._fullLayout;function s(o){return function(a){return M.coerceHoverinfo({hoverinfo:a},{_module:o._module},d)}}for(var t=0;t<b.length;t++){var i=b[t],r=i[0].trace;if(!k.traceIs(r,"pie-like")){var n=k.traceIs(r,"2dMap")?l:M.fillArray;n(r.hoverinfo,i,"hi",s(r)),r.hovertemplate&&n(r.hovertemplate,i,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,i,"hbg"),n(r.hoverlabel.bordercolor,i,"hbc"),n(r.hoverlabel.font.size,i,"hts"),n(r.hoverlabel.font.color,i,"htc"),n(r.hoverlabel.font.family,i,"htf"),n(r.hoverlabel.namelength,i,"hnl"),n(r.hoverlabel.align,i,"hta"))}}}},75914:function(ee,D,e){var M=e(73972),k=e(88335).hover;ee.exports=function(l,T,b){var d=M.getComponentMethod("annotations","onClick")(l,l._hoverdata);function s(){l.emit("plotly_click",{points:l._hoverdata,event:T})}b!==void 0&&k(l,T,b,!0),l._hoverdata&&T&&T.target&&(d&&d.then?d.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},26675:function(ee){ee.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(ee,D,e){var M=e(71828),k=e(77914),l=e(38048);ee.exports=function(T,b,d,s){var t=M.extendFlat({},s.hoverlabel);b.hovertemplate&&(t.namelength=-1),l(T,b,function(i,r){return M.coerce(T,b,k,i,r)},t)}},23469:function(ee,D,e){var M=e(71828);D.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},D.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var i=s.xaxes||[],r=s.yaxes||[],n=0;n<i.length;n++)for(var o=0;o<r.length;o++)if(t.indexOf(i[n]+r[o])!==-1)return!0;return!1}return t.indexOf(D.getSubplot(s))!==-1},D.flat=function(s,t){for(var i=new Array(s.length),r=0;r<s.length;r++)i[r]=t;return i},D.p2c=function(s,t){for(var i=new Array(s.length),r=0;r<s.length;r++)i[r]=s[r].p2c(t);return i},D.getDistanceFunction=function(s,t,i,r){return s==="closest"?r||D.quadrature(t,i):s.charAt(0)==="x"?t:i},D.getClosest=function(s,t,i){if(i.index!==!1)i.index>=0&&i.index<s.length?i.distance=0:i.index=!1;else for(var r=0;r<s.length;r++){var n=t(s[r]);n<=i.distance&&(i.index=r,i.distance=n)}return i},D.inbox=function(s,t,i){return s*t<0||s===0?i:1/0},D.quadrature=function(s,t){return function(i){var r=s(i),n=t(i);return Math.sqrt(r*r+n*n)}},D.makeEventData=function(s,t,i){var r="index"in s?s.index:s.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var o=t._indexToPoints[r];o.length===1?n.pointIndex=o[0]:n.pointIndices=o}else n.pointIndex=r;return t._module.eventData?n=t._module.eventData(n,s,t,i,r):("xVal"in s?n.x=s.xVal:"x"in s&&(n.x=s.x),"yVal"in s?n.y=s.yVal:"y"in s&&(n.y=s.y),s.xa&&(n.xaxis=s.xa),s.ya&&(n.yaxis=s.ya),s.zLabelVal!==void 0&&(n.z=s.zLabelVal)),D.appendArrayPointValue(n,t,r),n},D.appendArrayPointValue=function(s,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var o=r[n],a=l(o);if(s[a]===void 0){var u=T(M.nestedProperty(t,o).get(),i);u!==void 0&&(s[a]=u)}}},D.appendArrayMultiPointValues=function(s,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var o=r[n],a=l(o);if(s[a]===void 0){for(var u=M.nestedProperty(t,o).get(),p=new Array(i.length),c=0;c<i.length;c++)p[c]=T(u,i[c]);s[a]=p}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(s){return k[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var b={x:!0,y:!0},d={"x unified":!0,"y unified":!0};D.isUnifiedHover=function(s){return typeof s=="string"&&!!d[s]},D.isXYhover=function(s){return typeof s=="string"&&!!b[s]}},88335:function(ee,D,e){var M=e(39898),k=e(92770),l=e(84267),T=e(71828),b=T.strTranslate,d=T.strRotate,s=e(11086),t=e(63893),i=e(39918),r=e(91424),n=e(7901),o=e(28569),a=e(89298),u=e(73972),p=e(23469),c=e(26675),x=e(99017),g=e(43969),h=c.YANGLE,y=Math.PI*h/180,v=1/Math.sin(y),m=Math.cos(y),_=Math.sin(y),f=c.HOVERARROWSIZE,S=c.HOVERTEXTPAD,w={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function L(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa?Y.xa._id:"",Y.ya?Y.ya._id:""].join(",")}D.hover=function(Y,W,Q,ne){Y=T.getGraphDiv(Y);var re=W.target;T.throttle(Y._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){(function(ae,ue,pe,ge,_e){pe||(pe="xy");var me=Array.isArray(pe)?pe:[pe],ve=ae._fullLayout,Oe=ve._plots||[],Me=Oe[pe],Te=ve._has("cartesian");if(Me){var se=Me.overlays.map(function(Rt){return Rt.id});me=me.concat(se)}for(var oe=me.length,he=new Array(oe),Ee=new Array(oe),ke=!1,be=0;be<oe;be++){var Ie=me[be];if(Oe[Ie])ke=!0,he[be]=Oe[Ie].xaxis,Ee[be]=Oe[Ie].yaxis;else{if(!ve[Ie]||!ve[Ie]._subplot)return void T.warn("Unrecognized subplot: "+Ie);var Fe=ve[Ie]._subplot;he[be]=Fe.xaxis,Ee[be]=Fe.yaxis}}var ce=ue.hovermode||ve.hovermode;if(ce&&!ke&&(ce="closest"),["x","y","closest","x unified","y unified"].indexOf(ce)===-1||!ae.calcdata||ae.querySelector(".zoombox")||ae._dragging)return o.unhoverRaw(ae,ue);var we=ve.hoverdistance;we===-1&&(we=1/0);var ye=ve.spikedistance;ye===-1&&(ye=1/0);var Ce,Re,ze,He,Ge,Je,ot,Qe,vt,xt,mt,rt,it,Tt=[],Mt=[],Pt={hLinePoint:null,vLinePoint:null},kt=!1;if(Array.isArray(ue))for(ce="array",ze=0;ze<ue.length;ze++)(Ge=ae.calcdata[ue[ze].curveNumber||0])&&(Je=Ge[0].trace,Ge[0].trace.hoverinfo!=="skip"&&(Mt.push(Ge),Je.orientation==="h"&&(kt=!0)));else{for(He=0;He<ae.calcdata.length;He++)Ge=ae.calcdata[He],(Je=Ge[0].trace).hoverinfo!=="skip"&&p.isTraceInSubplots(Je,me)&&(Mt.push(Ge),Je.orientation==="h"&&(kt=!0));var Ze,Xe;if(_e){if(s.triggerHandler(ae,"plotly_beforehover",ue)===!1)return;var Ve=_e.getBoundingClientRect();Ze=ue.clientX-Ve.left,Xe=ue.clientY-Ve.top,ve._calcInverseTransform(ae);var We=T.apply3DTransform(ve._invTransform)(Ze,Xe);if(Ze=We[0],Xe=We[1],Ze<0||Ze>he[0]._length||Xe<0||Xe>Ee[0]._length)return o.unhoverRaw(ae,ue)}else Ze="xpx"in ue?ue.xpx:he[0]._length/2,Xe="ypx"in ue?ue.ypx:Ee[0]._length/2;if(ue.pointerX=Ze+he[0]._offset,ue.pointerY=Xe+Ee[0]._offset,Ce="xval"in ue?p.flat(me,ue.xval):p.p2c(he,Ze),Re="yval"in ue?p.flat(me,ue.yval):p.p2c(Ee,Xe),!k(Ce[0])||!k(Re[0]))return T.warn("Fx.hover failed",ue,ae),o.unhoverRaw(ae,ue)}var at=1/0;function et(Rt,$t){for(He=0;He<Mt.length;He++)if((Ge=Mt[He])&&Ge[0]&&Ge[0].trace&&(Je=Ge[0].trace).visible===!0&&Je._length!==0&&["carpet","contourcarpet"].indexOf(Je._module.name)===-1){if(Je.type==="splom"?ot=me[Qe=0]:(ot=p.getSubplot(Je),Qe=me.indexOf(ot)),vt=ce,p.isUnifiedHover(vt)&&(vt=vt.charAt(0)),rt={cd:Ge,trace:Je,xa:he[Qe],ya:Ee[Qe],maxHoverDistance:we,maxSpikeDistance:ye,index:!1,distance:Math.min(at,we),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:n.defaultLine,name:Je.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ve[ot]&&(rt.subplot=ve[ot]._subplot),ve._splomScenes&&ve._splomScenes[Je.uid]&&(rt.scene=ve._splomScenes[Je.uid]),it=Tt.length,vt==="array"){var an=ue[He];"pointNumber"in an?(rt.index=an.pointNumber,vt="closest"):(vt="","xval"in an&&(xt=an.xval,vt="x"),"yval"in an&&(mt=an.yval,vt=vt?"closest":"y"))}else Rt!==void 0&&$t!==void 0?(xt=Rt,mt=$t):(xt=Ce[Qe],mt=Re[Qe]);if(we!==0)if(Je._module&&Je._module.hoverPoints){var fn=Je._module.hoverPoints(rt,xt,mt,vt,{finiteRange:!0,hoverLayer:ve._hoverlayer});if(fn)for(var wn,Bn=0;Bn<fn.length;Bn++)wn=fn[Bn],k(wn.x0)&&k(wn.y0)&&Tt.push(H(wn,ce))}else T.log("Unrecognized trace type in hover:",Je);if(ce==="closest"&&Tt.length>it&&(Tt.splice(0,it),at=Tt[0].distance),Te&&ye!==0&&Tt.length===0){rt.distance=ye,rt.index=!1;var Ln=Je._module.hoverPoints(rt,xt,mt,"closest",{hoverLayer:ve._hoverlayer});if(Ln&&(Ln=Ln.filter(function(Gt){return Gt.spikeDistance<=ye})),Ln&&Ln.length){var In,Wn=Ln.filter(function(Gt){return Gt.xa.showspikes&&Gt.xa.spikesnap!=="hovered data"});if(Wn.length){var Vt=Wn[0];k(Vt.x0)&&k(Vt.y0)&&(In=Be(Vt),(!Pt.vLinePoint||Pt.vLinePoint.spikeDistance>In.spikeDistance)&&(Pt.vLinePoint=In))}var _n=Ln.filter(function(Gt){return Gt.ya.showspikes&&Gt.ya.spikesnap!=="hovered data"});if(_n.length){var At=_n[0];k(At.x0)&&k(At.y0)&&(In=Be(At),(!Pt.hLinePoint||Pt.hLinePoint.spikeDistance>In.spikeDistance)&&(Pt.hLinePoint=In))}}}}}function De(Rt,$t,an){for(var fn,wn=null,Bn=1/0,Ln=0;Ln<Rt.length;Ln++)fn=Rt[Ln].spikeDistance,an&&Ln===0&&(fn=-1/0),fn<=Bn&&fn<=$t&&(wn=Rt[Ln],Bn=fn);return wn}function Be(Rt){return Rt?{xa:Rt.xa,ya:Rt.ya,x:Rt.xSpike!==void 0?Rt.xSpike:(Rt.x0+Rt.x1)/2,y:Rt.ySpike!==void 0?Rt.ySpike:(Rt.y0+Rt.y1)/2,distance:Rt.distance,spikeDistance:Rt.spikeDistance,curveNumber:Rt.trace.index,color:Rt.color,pointNumber:Rt.index}:null}et();var nt={fullLayout:ve,container:ve._hoverlayer,event:ue},tt=ae._spikepoints,dt={vLinePoint:Pt.vLinePoint,hLinePoint:Pt.hLinePoint};ae._spikepoints=dt;var ht=function(){Tt.sort(function(Rt,$t){return Rt.distance-$t.distance}),Tt=function(Rt,$t){for(var an=$t.charAt(0),fn=[],wn=[],Bn=[],Ln=0;Ln<Rt.length;Ln++){var In=Rt[Ln];u.traceIs(In.trace,"bar-like")||u.traceIs(In.trace,"box-violin")?Bn.push(In):In.trace[an+"period"]?wn.push(In):fn.push(In)}return fn.concat(wn).concat(Bn)}(Tt,ce)};ht();var gt=ce.charAt(0),ut=(gt==="x"||gt==="y")&&Tt[0]&&E[Tt[0].trace.type];if(Te&&ye!==0&&Tt.length!==0){var wt=De(Tt.filter(function(Rt){return Rt.ya.showspikes}),ye,ut);Pt.hLinePoint=Be(wt);var ct=De(Tt.filter(function(Rt){return Rt.xa.showspikes}),ye,ut);Pt.vLinePoint=Be(ct)}if(Tt.length===0){var ft=o.unhoverRaw(ae,ue);return!Te||Pt.hLinePoint===null&&Pt.vLinePoint===null||B(tt)&&N(ae,Pt,nt),ft}if(Te&&B(tt)&&N(ae,Pt,nt),p.isXYhover(vt)&&Tt[0].length!==0&&Tt[0].trace.type!=="splom"){var bt=Tt[0],It=(Tt=w[bt.trace.type]?Tt.filter(function(Rt){return Rt.trace.index===bt.trace.index}):[bt]).length;et(q("x",bt,ve),q("y",bt,ve));var Dt,Nt=[],Qt={},jt=0,Ut=function(Rt){var $t=w[Rt.trace.type]?L(Rt):Rt.trace.index;if(Qt[$t]){var an=Qt[$t]-1,fn=Nt[an];an>0&&Math.abs(Rt.distance)<Math.abs(fn.distance)&&(Nt[an]=Rt)}else jt++,Qt[$t]=jt,Nt.push(Rt)};for(Dt=0;Dt<It;Dt++)Ut(Tt[Dt]);for(Dt=Tt.length-1;Dt>It-1;Dt--)Ut(Tt[Dt]);Tt=Nt,ht()}var Xt=ae._hoverdata,gn=[],Mn=te(ae),cn=K(ae);for(ze=0;ze<Tt.length;ze++){var qt=Tt[ze],nn=p.makeEventData(qt,qt.trace,qt.cd);if(qt.hovertemplate!==!1){var Kt=!1;qt.cd[qt.index]&&qt.cd[qt.index].ht&&(Kt=qt.cd[qt.index].ht),qt.hovertemplate=Kt||qt.trace.hovertemplate||!1}if(qt.xa&&qt.ya){var sn=qt.x0+qt.xa._offset,hn=qt.x1+qt.xa._offset,bn=qt.y0+qt.ya._offset,yn=qt.y1+qt.ya._offset,Sn=Math.min(sn,hn),pn=Math.max(sn,hn),Cn=Math.min(bn,yn),Hn=Math.max(bn,yn);nn.bbox={x0:Sn+cn,x1:pn+cn,y0:Cn+Mn,y1:Hn+Mn}}qt.eventData=[nn],gn.push(nn)}ae._hoverdata=gn;var Qn=ce==="y"&&(Mt.length>1||Tt.length>1)||ce==="closest"&&kt&&Tt.length>1,nr=n.combine(ve.plot_bgcolor||n.background,ve.paper_bgcolor),Jn=P(Tt,{gd:ae,hovermode:ce,rotateLabels:Qn,bgColor:nr,container:ve._hoverlayer,outerContainer:ve._paper.node(),commonLabelOpts:ve.hoverlabel,hoverdistance:ve.hoverdistance}),Gn=Jn.hoverLabels;if(p.isUnifiedHover(ce)||(function(Rt,$t,an,fn){var wn,Bn,Ln,In,Wn,Vt,_n,At=$t?"xa":"ya",Gt=$t?"ya":"xa",Jt=0,mn=1,xn=Rt.size(),An=new Array(xn),ln=0,Yt=fn.minX,Wt=fn.maxX,on=fn.minY,un=fn.maxY,En=function(cr){return cr*an._invScaleX},Pn=function(cr){return cr*an._invScaleY};function Un(cr){var br=cr[0],Yn=cr[cr.length-1];if(Bn=br.pmin-br.pos-br.dp+br.size,Ln=Yn.pos+Yn.dp+Yn.size-br.pmax,Bn>.01){for(Wn=cr.length-1;Wn>=0;Wn--)cr[Wn].dp+=Bn;wn=!1}if(!(Ln<.01)){if(Bn<-.01){for(Wn=cr.length-1;Wn>=0;Wn--)cr[Wn].dp-=Ln;wn=!1}if(wn){var dr=0;for(In=0;In<cr.length;In++)(Vt=cr[In]).pos+Vt.dp+Vt.size>br.pmax&&dr++;for(In=cr.length-1;In>=0&&!(dr<=0);In--)(Vt=cr[In]).pos>br.pmax-1&&(Vt.del=!0,dr--);for(In=0;In<cr.length&&!(dr<=0);In++)if((Vt=cr[In]).pos<br.pmin+1)for(Vt.del=!0,dr--,Ln=2*Vt.size,Wn=cr.length-1;Wn>=0;Wn--)cr[Wn].dp-=Ln;for(In=cr.length-1;In>=0&&!(dr<=0);In--)(Vt=cr[In]).pos+Vt.dp+Vt.size>br.pmax&&(Vt.del=!0,dr--)}}}for(Rt.each(function(cr){var br=cr[At],Yn=cr[Gt],dr=br._id.charAt(0)==="x",Sr=br.range;ln===0&&Sr&&Sr[0]>Sr[1]!==dr&&(mn=-1);var Gr=0,ai=dr?an.width:an.height;if(an.hovermode==="x"||an.hovermode==="y"){var ni,ci,Kr=G(cr,$t),bi=cr.anchor,qa=bi==="end"?-1:1;if(bi==="middle")ci=(ni=cr.crossPos+(dr?Pn(Kr.y-cr.by/2):En(cr.bx/2+cr.tx2width/2)))+(dr?Pn(cr.by):En(cr.bx));else if(dr)ci=(ni=cr.crossPos+Pn(f+Kr.y)-Pn(cr.by/2-f))+Pn(cr.by);else{var ha=En(qa*f+Kr.x),to=ha+En(qa*cr.bx);ni=cr.crossPos+Math.min(ha,to),ci=cr.crossPos+Math.max(ha,to)}dr?on!==void 0&&un!==void 0&&Math.min(ci,un)-Math.max(ni,on)>1&&(Yn.side==="left"?(Gr=Yn._mainLinePosition,ai=an.width):ai=Yn._mainLinePosition):Yt!==void 0&&Wt!==void 0&&Math.min(ci,Wt)-Math.max(ni,Yt)>1&&(Yn.side==="top"?(Gr=Yn._mainLinePosition,ai=an.height):ai=Yn._mainLinePosition)}An[ln++]=[{datum:cr,traceIndex:cr.trace.index,dp:0,pos:cr.pos,posref:cr.posref,size:cr.by*(dr?v:1)/2,pmin:Gr,pmax:ai}]}),An.sort(function(cr,br){return cr[0].posref-br[0].posref||mn*(br[0].traceIndex-cr[0].traceIndex)});!wn&&Jt<=xn;){for(Jt++,wn=!0,In=0;In<An.length-1;){var Fn=An[In],Kn=An[In+1],qn=Fn[Fn.length-1],rr=Kn[0];if((Bn=qn.pos+qn.dp+qn.size-rr.pos-rr.dp+rr.size)>.01&&qn.pmin===rr.pmin&&qn.pmax===rr.pmax){for(Wn=Kn.length-1;Wn>=0;Wn--)Kn[Wn].dp+=Bn;for(Fn.push.apply(Fn,Kn),An.splice(In+1,1),_n=0,Wn=Fn.length-1;Wn>=0;Wn--)_n+=Fn[Wn].dp;for(Ln=_n/Fn.length,Wn=Fn.length-1;Wn>=0;Wn--)Fn[Wn].dp-=Ln;wn=!1}else In++}An.forEach(Un)}for(In=An.length-1;In>=0;In--){var er=An[In];for(Wn=er.length-1;Wn>=0;Wn--){var tr=er[Wn],ur=tr.datum;ur.offset=tr.dp,ur.del=tr.del}}}(Gn,Qn,ve,Jn.commonLabelBoundingBox),O(Gn,Qn,ve._invScaleX,ve._invScaleY)),_e&&_e.tagName){var lr=u.getComponentMethod("annotations","hasClickToShow")(ae,gn);i(M.select(_e),lr?"pointer":"")}_e&&!ge&&function(Rt,$t,an){if(!an||an.length!==Rt._hoverdata.length)return!0;for(var fn=an.length-1;fn>=0;fn--){var wn=an[fn],Bn=Rt._hoverdata[fn];if(wn.curveNumber!==Bn.curveNumber||String(wn.pointNumber)!==String(Bn.pointNumber)||String(wn.pointNumbers)!==String(Bn.pointNumbers))return!0}return!1}(ae,0,Xt)&&(Xt&&ae.emit("plotly_unhover",{event:ue,points:Xt}),ae.emit("plotly_hover",{event:ue,points:ae._hoverdata,xaxes:he,yaxes:Ee,xvals:Ce,yvals:Re}))})(Y,W,Q,ne,re)})},D.loneHover=function(Y,W){var Q=!0;Array.isArray(Y)||(Q=!1,Y=[Y]);var ne=W.gd,re=te(ne),ae=K(ne),ue=P(Y.map(function(_e){var me=_e._x0||_e.x0||_e.x||0,ve=_e._x1||_e.x1||_e.x||0,Oe=_e._y0||_e.y0||_e.y||0,Me=_e._y1||_e.y1||_e.y||0,Te=_e.eventData;if(Te){var se=Math.min(me,ve),oe=Math.max(me,ve),he=Math.min(Oe,Me),Ee=Math.max(Oe,Me),ke=_e.trace;if(u.traceIs(ke,"gl3d")){var be=ne._fullLayout[ke.scene]._scene.container,Ie=be.offsetLeft,Fe=be.offsetTop;se+=Ie,oe+=Ie,he+=Fe,Ee+=Fe}Te.bbox={x0:se+ae,x1:oe+ae,y0:he+re,y1:Ee+re},W.inOut_bbox&&W.inOut_bbox.push(Te.bbox)}else Te=!1;return{color:_e.color||n.defaultLine,x0:_e.x0||_e.x||0,x1:_e.x1||_e.x||0,y0:_e.y0||_e.y||0,y1:_e.y1||_e.y||0,xLabel:_e.xLabel,yLabel:_e.yLabel,zLabel:_e.zLabel,text:_e.text,name:_e.name,idealAlign:_e.idealAlign,borderColor:_e.borderColor,fontFamily:_e.fontFamily,fontSize:_e.fontSize,fontColor:_e.fontColor,nameLength:_e.nameLength,textAlign:_e.textAlign,trace:_e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:_e.hovertemplate||!1,hovertemplateLabels:_e.hovertemplateLabels||!1,eventData:Te}}),{gd:ne,hovermode:"closest",rotateLabels:!1,bgColor:W.bgColor||n.background,container:M.select(W.container),outerContainer:W.outerContainer||W.container}).hoverLabels,pe=0,ge=0;return ue.sort(function(_e,me){return _e.y0-me.y0}).each(function(_e,me){var ve=_e.y0-_e.by/2;_e.offset=ve-5<pe?pe-ve+5:0,pe=ve+_e.by+_e.offset,me===W.anchorIndex&&(ge=_e.offset)}).each(function(_e){_e.offset-=ge}),O(ue,!1,ne._fullLayout._invScaleX,ne._fullLayout._invScaleY),Q?ue:ue.node()};var C=/<extra>([\s\S]*)<\/extra>/;function P(Y,W){var Q=W.gd,ne=Q._fullLayout,re=W.hovermode,ae=W.rotateLabels,ue=W.bgColor,pe=W.container,ge=W.outerContainer,_e=W.commonLabelOpts||{};if(Y.length===0)return[[]];var me=W.fontFamily||c.HOVERFONT,ve=W.fontSize||c.HOVERFONTSIZE,Oe=Y[0],Me=Oe.xa,Te=Oe.ya,se=re.charAt(0),oe=se+"Label",he=Oe[oe];if(he===void 0&&Me.type==="multicategory")for(var Ee=0;Ee<Y.length&&(he=Y[Ee][oe])===void 0;Ee++);var ke=J(Q,ge),be=ke.top,Ie=ke.width,Fe=ke.height,ce=he!==void 0&&Oe.distance<=W.hoverdistance&&(re==="x"||re==="y");if(ce){var we,ye,Ce=!0;for(we=0;we<Y.length;we++)if(Ce&&Y[we].zLabel===void 0&&(Ce=!1),ye=Y[we].hoverinfo||Y[we].trace.hoverinfo){var Re=Array.isArray(ye)?ye:ye.split("+");if(Re.indexOf("all")===-1&&Re.indexOf(re)===-1){ce=!1;break}}Ce&&(ce=!1)}var ze=pe.selectAll("g.axistext").data(ce?[0]:[]);ze.enter().append("g").classed("axistext",!0),ze.exit().remove();var He={minX:0,maxX:0,minY:0,maxY:0};if(ze.each(function(){var ft=M.select(this),bt=T.ensureSingle(ft,"path","",function(Cn){Cn.style({"stroke-width":"1px"})}),It=T.ensureSingle(ft,"text","",function(Cn){Cn.attr("data-notex",1)}),Dt=_e.bgcolor||n.defaultLine,Nt=_e.bordercolor||n.contrast(Dt),Qt=n.contrast(Dt),jt={family:_e.font.family||me,size:_e.font.size||ve,color:_e.font.color||Qt};bt.style({fill:Dt,stroke:Nt}),It.text(he).call(r.font,jt).call(t.positionText,0,0).call(t.convertToTspans,Q),ft.attr("transform","");var Ut,Xt,gn=J(Q,It.node());if(re==="x"){var Mn=Me.side==="top"?"-":"";It.attr("text-anchor","middle").call(t.positionText,0,Me.side==="top"?be-gn.bottom-f-S:be-gn.top+f+S),Ut=Me._offset+(Oe.x0+Oe.x1)/2,Xt=Te._offset+(Me.side==="top"?0:Te._length);var cn=gn.width/2+S;Ut<cn?(Ut=cn,bt.attr("d","M-"+(cn-f)+",0L-"+(cn-2*f)+","+Mn+f+"H"+cn+"v"+Mn+(2*S+gn.height)+"H-"+cn+"V"+Mn+f+"Z")):Ut>ne.width-cn?(Ut=ne.width-cn,bt.attr("d","M"+(cn-f)+",0L"+cn+","+Mn+f+"v"+Mn+(2*S+gn.height)+"H-"+cn+"V"+Mn+f+"H"+(cn-2*f)+"Z")):bt.attr("d","M0,0L"+f+","+Mn+f+"H"+cn+"v"+Mn+(2*S+gn.height)+"H-"+cn+"V"+Mn+f+"H-"+f+"Z"),He.minX=Ut-cn,He.maxX=Ut+cn,Me.side==="top"?(He.minY=Xt-(2*S+gn.height),He.maxY=Xt-S):(He.minY=Xt+S,He.maxY=Xt+(2*S+gn.height))}else{var qt,nn,Kt;Te.side==="right"?(qt="start",nn=1,Kt="",Ut=Me._offset+Me._length):(qt="end",nn=-1,Kt="-",Ut=Me._offset),Xt=Te._offset+(Oe.y0+Oe.y1)/2,It.attr("text-anchor",qt),bt.attr("d","M0,0L"+Kt+f+","+f+"V"+(S+gn.height/2)+"h"+Kt+(2*S+gn.width)+"V-"+(S+gn.height/2)+"H"+Kt+f+"V-"+f+"Z"),He.minY=Xt-(S+gn.height/2),He.maxY=Xt+(S+gn.height/2),Te.side==="right"?(He.minX=Ut+f,He.maxX=Ut+f+(2*S+gn.width)):(He.minX=Ut-f-(2*S+gn.width),He.maxX=Ut-f);var sn,hn=gn.height/2,bn=be-gn.top-hn,yn="clip"+ne._uid+"commonlabel"+Te._id;if(Ut<gn.width+2*S+f){sn="M-"+(f+S)+"-"+hn+"h-"+(gn.width-S)+"V"+hn+"h"+(gn.width-S)+"Z";var Sn=gn.width-Ut+S;t.positionText(It,Sn,bn),qt==="end"&&It.selectAll("tspan").each(function(){var Cn=M.select(this),Hn=r.tester.append("text").text(Cn.text()).call(r.font,jt),Qn=J(Q,Hn.node());Math.round(Qn.width)<Math.round(gn.width)&&Cn.attr("x",Sn-Qn.width),Hn.remove()})}else t.positionText(It,nn*(S+f),bn),sn=null;var pn=ne._topclips.selectAll("#"+yn).data(sn?[0]:[]);pn.enter().append("clipPath").attr("id",yn).append("path"),pn.exit().remove(),pn.select("path").attr("d",sn),r.setClipUrl(It,sn?yn:null,Q)}ft.attr("transform",b(Ut,Xt))}),p.isUnifiedHover(re)){pe.selectAll("g.hovertext").remove();var Ge=Y.filter(function(ft){return ft.hoverinfo!=="none"});if(Ge.length===0)return[];var Je=ne.hoverlabel,ot=Je.font,Qe={showlegend:!0,legend:{title:{text:he,font:ot},font:ot,bgcolor:Je.bgcolor,bordercolor:Je.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ne.legend?ne.legend.traceorder:void 0,orientation:"v"}},vt={font:ot};x(Qe,vt,Q._fullData);var xt=vt.legend;xt.entries=[];for(var mt=0;mt<Ge.length;mt++){var rt=Ge[mt];if(rt.hoverinfo!=="none"){var it=z(rt,!0,re,ne,he),Tt=it[0],Mt=it[1];rt.name=Mt,rt.text=Mt!==""?Mt+" : "+Tt:Tt;var Pt=rt.cd[rt.index];Pt&&(Pt.mc&&(rt.mc=Pt.mc),Pt.mcc&&(rt.mc=Pt.mcc),Pt.mlc&&(rt.mlc=Pt.mlc),Pt.mlcc&&(rt.mlc=Pt.mlcc),Pt.mlw&&(rt.mlw=Pt.mlw),Pt.mrc&&(rt.mrc=Pt.mrc),Pt.dir&&(rt.dir=Pt.dir)),rt._distinct=!0,xt.entries.push([rt])}}xt.entries.sort(function(ft,bt){return ft[0].trace.index-bt[0].trace.index}),xt.layer=pe,xt._inHover=!0,xt._groupTitleFont=Je.grouptitlefont,g(Q,xt);var kt,Ze,Xe,Ve,We=pe.select("g.legend"),at=J(Q,We.node()),et=at.width+2*S,De=at.height+2*S,Be=Ge[0],nt=(Be.x0+Be.x1)/2,tt=(Be.y0+Be.y1)/2,dt=!(u.traceIs(Be.trace,"bar-like")||u.traceIs(Be.trace,"box-violin"));se==="y"?dt?(Ze=tt-S,kt=tt+S):(Ze=Math.min.apply(null,Ge.map(function(ft){return Math.min(ft.y0,ft.y1)})),kt=Math.max.apply(null,Ge.map(function(ft){return Math.max(ft.y0,ft.y1)}))):Ze=kt=T.mean(Ge.map(function(ft){return(ft.y0+ft.y1)/2}))-De/2,se==="x"?dt?(Xe=nt+S,Ve=nt-S):(Xe=Math.max.apply(null,Ge.map(function(ft){return Math.max(ft.x0,ft.x1)})),Ve=Math.min.apply(null,Ge.map(function(ft){return Math.min(ft.x0,ft.x1)}))):Xe=Ve=T.mean(Ge.map(function(ft){return(ft.x0+ft.x1)/2}))-et/2;var ht,gt,ut=Me._offset,wt=Te._offset;return Ve+=ut-et,Ze+=wt-De,ht=(Xe+=ut)+et<Ie&&Xe>=0?Xe:Ve+et<Ie&&Ve>=0?Ve:ut+et<Ie?ut:Xe-nt<nt-Ve+et?Ie-et:0,ht+=S,gt=(kt+=wt)+De<Fe&&kt>=0?kt:Ze+De<Fe&&Ze>=0?Ze:wt+De<Fe?wt:kt-tt<tt-Ze+De?Fe-De:0,gt+=S,We.attr("transform",b(ht-1,gt-1)),We}var ct=pe.selectAll("g.hovertext").data(Y,function(ft){return L(ft)});return ct.enter().append("g").classed("hovertext",!0).each(function(){var ft=M.select(this);ft.append("rect").call(n.fill,n.addOpacity(ue,.8)),ft.append("text").classed("name",!0),ft.append("path").style("stroke-width","1px"),ft.append("text").classed("nums",!0).call(r.font,me,ve)}),ct.exit().remove(),ct.each(function(ft){var bt=M.select(this).attr("transform",""),It=ft.color;Array.isArray(It)&&(It=It[ft.eventData[0].pointNumber]);var Dt=ft.bgcolor||It,Nt=n.combine(n.opacity(Dt)?Dt:n.defaultLine,ue),Qt=n.combine(n.opacity(It)?It:n.defaultLine,ue),jt=ft.borderColor||n.contrast(Nt),Ut=z(ft,ce,re,ne,he,bt),Xt=Ut[0],gn=Ut[1],Mn=bt.select("text.nums").call(r.font,ft.fontFamily||me,ft.fontSize||ve,ft.fontColor||jt).text(Xt).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,Q),cn=bt.select("text.name"),qt=0,nn=0;if(gn&&gn!==Xt){cn.call(r.font,ft.fontFamily||me,ft.fontSize||ve,Qt).text(gn).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,Q);var Kt=J(Q,cn.node());qt=Kt.width+2*S,nn=Kt.height+2*S}else cn.remove(),bt.select("rect").remove();bt.select("path").style({fill:Nt,stroke:jt});var sn=ft.xa._offset+(ft.x0+ft.x1)/2,hn=ft.ya._offset+(ft.y0+ft.y1)/2,bn=Math.abs(ft.x1-ft.x0),yn=Math.abs(ft.y1-ft.y0),Sn=J(Q,Mn.node()),pn=Sn.width/ne._invScaleX,Cn=Sn.height/ne._invScaleY;ft.ty0=(be-Sn.top)/ne._invScaleY,ft.bx=pn+2*S,ft.by=Math.max(Cn+2*S,nn),ft.anchor="start",ft.txwidth=pn,ft.tx2width=qt,ft.offset=0;var Hn,Qn,nr=(pn+f+S+qt)*ne._invScaleX;if(ae)ft.pos=sn,Hn=hn+yn/2+nr<=Fe,Qn=hn-yn/2-nr>=0,ft.idealAlign!=="top"&&Hn||!Qn?Hn?(hn+=yn/2,ft.anchor="start"):ft.anchor="middle":(hn-=yn/2,ft.anchor="end"),ft.crossPos=hn;else{if(ft.pos=hn,Hn=sn+bn/2+nr<=Ie,Qn=sn-bn/2-nr>=0,ft.idealAlign!=="left"&&Hn||!Qn)if(Hn)sn+=bn/2,ft.anchor="start";else{ft.anchor="middle";var Jn=nr/2,Gn=sn+Jn-Ie,lr=sn-Jn;Gn>0&&(sn-=Gn),lr<0&&(sn+=-lr)}else sn-=bn/2,ft.anchor="end";ft.crossPos=sn}Mn.attr("text-anchor",ft.anchor),qt&&cn.attr("text-anchor",ft.anchor),bt.attr("transform",b(sn,hn)+(ae?d(h):""))}),{hoverLabels:ct,commonLabelBoundingBox:He}}function z(Y,W,Q,ne,re,ae){var ue="",pe="";Y.nameOverride!==void 0&&(Y.name=Y.nameOverride),Y.name&&(Y.trace._meta&&(Y.name=T.templateString(Y.name,Y.trace._meta)),ue=V(Y.name,Y.nameLength));var ge=Q.charAt(0),_e=ge==="x"?"y":"x";Y.zLabel!==void 0?(Y.xLabel!==void 0&&(pe+="x: "+Y.xLabel+"<br>"),Y.yLabel!==void 0&&(pe+="y: "+Y.yLabel+"<br>"),Y.trace.type!=="choropleth"&&Y.trace.type!=="choroplethmapbox"&&(pe+=(pe?"z: ":"")+Y.zLabel)):W&&Y[ge+"Label"]===re?pe=Y[_e+"Label"]||"":Y.xLabel===void 0?Y.yLabel!==void 0&&Y.trace.type!=="scattercarpet"&&(pe=Y.yLabel):pe=Y.yLabel===void 0?Y.xLabel:"("+Y.xLabel+", "+Y.yLabel+")",!Y.text&&Y.text!==0||Array.isArray(Y.text)||(pe+=(pe?"<br>":"")+Y.text),Y.extraText!==void 0&&(pe+=(pe?"<br>":"")+Y.extraText),ae&&pe===""&&!Y.hovertemplate&&(ue===""&&ae.remove(),pe=ue);var me=Y.hovertemplate||!1;if(me){var ve=Y.hovertemplateLabels||Y;Y[ge+"Label"]!==re&&(ve[ge+"other"]=ve[ge+"Val"],ve[ge+"otherLabel"]=ve[ge+"Label"]),pe=(pe=T.hovertemplateString(me,ve,ne._d3locale,Y.eventData[0]||{},Y.trace._meta)).replace(C,function(Oe,Me){return ue=V(Me,Y.nameLength),""})}return[pe,ue]}function G(Y,W){var Q=0,ne=Y.offset;return W&&(ne*=-_,Q=Y.offset*m),{x:Q,y:ne}}function O(Y,W,Q,ne){var re=function(ue){return ue*Q},ae=function(ue){return ue*ne};Y.each(function(ue){var pe=M.select(this);if(ue.del)return pe.remove();var ge,_e,me,ve,Oe=pe.select("text.nums"),Me=ue.anchor,Te=Me==="end"?-1:1,se=(ve=(me=(_e={start:1,end:-1,middle:0}[(ge=ue).anchor])*(f+S))+_e*(ge.txwidth+S),ge.anchor==="middle"&&(me-=ge.tx2width/2,ve+=ge.txwidth/2+S),{alignShift:_e,textShiftX:me,text2ShiftX:ve}),oe=G(ue,W),he=oe.x,Ee=oe.y,ke=Me==="middle";pe.select("path").attr("d",ke?"M-"+re(ue.bx/2+ue.tx2width/2)+","+ae(Ee-ue.by/2)+"h"+re(ue.bx)+"v"+ae(ue.by)+"h-"+re(ue.bx)+"Z":"M0,0L"+re(Te*f+he)+","+ae(f+Ee)+"v"+ae(ue.by/2-f)+"h"+re(Te*ue.bx)+"v-"+ae(ue.by)+"H"+re(Te*f+he)+"V"+ae(Ee-f)+"Z");var be=he+se.textShiftX,Ie=Ee+ue.ty0-ue.by/2+S,Fe=ue.textAlign||"auto";Fe!=="auto"&&(Fe==="left"&&Me!=="start"?(Oe.attr("text-anchor","start"),be=ke?-ue.bx/2-ue.tx2width/2+S:-ue.bx-S):Fe==="right"&&Me!=="end"&&(Oe.attr("text-anchor","end"),be=ke?ue.bx/2-ue.tx2width/2-S:ue.bx+S)),Oe.call(t.positionText,re(be),ae(Ie)),ue.tx2width&&(pe.select("text.name").call(t.positionText,re(se.text2ShiftX+se.alignShift*S+he),ae(Ee+ue.ty0-ue.by/2+S)),pe.select("rect").call(r.setRect,re(se.text2ShiftX+(se.alignShift-1)*ue.tx2width/2+he),ae(Ee-ue.by/2-1),re(ue.tx2width),ae(ue.by+2)))})}function H(Y,W){var Q=Y.index,ne=Y.trace||{},re=Y.cd[0],ae=Y.cd[Q]||{};function ue(Oe){return Oe||k(Oe)&&Oe===0}var pe=Array.isArray(Q)?function(Oe,Me){var Te=T.castOption(re,Q,Oe);return ue(Te)?Te:T.extractOption({},ne,"",Me)}:function(Oe,Me){return T.extractOption(ae,ne,Oe,Me)};function ge(Oe,Me,Te){var se=pe(Me,Te);ue(se)&&(Y[Oe]=se)}if(ge("hoverinfo","hi","hoverinfo"),ge("bgcolor","hbg","hoverlabel.bgcolor"),ge("borderColor","hbc","hoverlabel.bordercolor"),ge("fontFamily","htf","hoverlabel.font.family"),ge("fontSize","hts","hoverlabel.font.size"),ge("fontColor","htc","hoverlabel.font.color"),ge("nameLength","hnl","hoverlabel.namelength"),ge("textAlign","hta","hoverlabel.align"),Y.posref=W==="y"||W==="closest"&&ne.orientation==="h"?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2,Y.x0=T.constrain(Y.x0,0,Y.xa._length),Y.x1=T.constrain(Y.x1,0,Y.xa._length),Y.y0=T.constrain(Y.y0,0,Y.ya._length),Y.y1=T.constrain(Y.y1,0,Y.ya._length),Y.xLabelVal!==void 0&&(Y.xLabel="xLabel"in Y?Y.xLabel:a.hoverLabelText(Y.xa,Y.xLabelVal,ne.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal)),Y.yLabelVal!==void 0&&(Y.yLabel="yLabel"in Y?Y.yLabel:a.hoverLabelText(Y.ya,Y.yLabelVal,ne.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal)),Y.zLabelVal!==void 0&&Y.zLabel===void 0&&(Y.zLabel=String(Y.zLabelVal)),!(isNaN(Y.xerr)||Y.xa.type==="log"&&Y.xerr<=0)){var _e=a.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;Y.xerrneg!==void 0?Y.xLabel+=" +"+_e+" / -"+a.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text:Y.xLabel+="  "+_e,W==="x"&&(Y.distance+=1)}if(!(isNaN(Y.yerr)||Y.ya.type==="log"&&Y.yerr<=0)){var me=a.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text;Y.yerrneg!==void 0?Y.yLabel+=" +"+me+" / -"+a.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text:Y.yLabel+="  "+me,W==="y"&&(Y.distance+=1)}var ve=Y.hoverinfo||Y.trace.hoverinfo;return ve&&ve!=="all"&&((ve=Array.isArray(ve)?ve:ve.split("+")).indexOf("x")===-1&&(Y.xLabel=void 0),ve.indexOf("y")===-1&&(Y.yLabel=void 0),ve.indexOf("z")===-1&&(Y.zLabel=void 0),ve.indexOf("text")===-1&&(Y.text=void 0),ve.indexOf("name")===-1&&(Y.name=void 0)),Y}function N(Y,W,Q){var ne,re,ae=Q.container,ue=Q.fullLayout,pe=ue._size,ge=Q.event,_e=!!W.hLinePoint,me=!!W.vLinePoint;if(ae.selectAll(".spikeline").remove(),me||_e){var ve=n.combine(ue.plot_bgcolor,ue.paper_bgcolor);if(_e){var Oe,Me,Te=W.hLinePoint;ne=Te&&Te.xa,(re=Te&&Te.ya).spikesnap==="cursor"?(Oe=ge.pointerX,Me=ge.pointerY):(Oe=ne._offset+Te.x,Me=re._offset+Te.y);var se,oe,he=l.readability(Te.color,ve)<1.5?n.contrast(ve):Te.color,Ee=re.spikemode,ke=re.spikethickness,be=re.spikecolor||he,Ie=a.getPxPosition(Y,re);if(Ee.indexOf("toaxis")!==-1||Ee.indexOf("across")!==-1){if(Ee.indexOf("toaxis")!==-1&&(se=Ie,oe=Oe),Ee.indexOf("across")!==-1){var Fe=re._counterDomainMin,ce=re._counterDomainMax;re.anchor==="free"&&(Fe=Math.min(Fe,re.position),ce=Math.max(ce,re.position)),se=pe.l+Fe*pe.w,oe=pe.l+ce*pe.w}ae.insert("line",":first-child").attr({x1:se,x2:oe,y1:Me,y2:Me,"stroke-width":ke,stroke:be,"stroke-dasharray":r.dashStyle(re.spikedash,ke)}).classed("spikeline",!0).classed("crisp",!0),ae.insert("line",":first-child").attr({x1:se,x2:oe,y1:Me,y2:Me,"stroke-width":ke+2,stroke:ve}).classed("spikeline",!0).classed("crisp",!0)}Ee.indexOf("marker")!==-1&&ae.insert("circle",":first-child").attr({cx:Ie+(re.side!=="right"?ke:-ke),cy:Me,r:ke,fill:be}).classed("spikeline",!0)}if(me){var we,ye,Ce=W.vLinePoint;ne=Ce&&Ce.xa,re=Ce&&Ce.ya,ne.spikesnap==="cursor"?(we=ge.pointerX,ye=ge.pointerY):(we=ne._offset+Ce.x,ye=re._offset+Ce.y);var Re,ze,He=l.readability(Ce.color,ve)<1.5?n.contrast(ve):Ce.color,Ge=ne.spikemode,Je=ne.spikethickness,ot=ne.spikecolor||He,Qe=a.getPxPosition(Y,ne);if(Ge.indexOf("toaxis")!==-1||Ge.indexOf("across")!==-1){if(Ge.indexOf("toaxis")!==-1&&(Re=Qe,ze=ye),Ge.indexOf("across")!==-1){var vt=ne._counterDomainMin,xt=ne._counterDomainMax;ne.anchor==="free"&&(vt=Math.min(vt,ne.position),xt=Math.max(xt,ne.position)),Re=pe.t+(1-xt)*pe.h,ze=pe.t+(1-vt)*pe.h}ae.insert("line",":first-child").attr({x1:we,x2:we,y1:Re,y2:ze,"stroke-width":Je,stroke:ot,"stroke-dasharray":r.dashStyle(ne.spikedash,Je)}).classed("spikeline",!0).classed("crisp",!0),ae.insert("line",":first-child").attr({x1:we,x2:we,y1:Re,y2:ze,"stroke-width":Je+2,stroke:ve}).classed("spikeline",!0).classed("crisp",!0)}Ge.indexOf("marker")!==-1&&ae.insert("circle",":first-child").attr({cx:we,cy:Qe-(ne.side!=="top"?Je:-Je),r:Je,fill:ot}).classed("spikeline",!0)}}}function B(Y,W){return!W||W.vLinePoint!==Y._spikepoints.vLinePoint||W.hLinePoint!==Y._spikepoints.hLinePoint}function V(Y,W){return t.plainText(Y||"",{len:W,allowedTags:["br","sub","sup","b","i","em"]})}function q(Y,W,Q){var ne=W[Y+"a"],re=W[Y+"Val"],ae=W.cd[0];if(ne.type==="category"||ne.type==="multicategory")re=ne._categoriesMap[re];else if(ne.type==="date"){var ue=W.trace[Y+"periodalignment"];if(ue){var pe=W.cd[W.index],ge=pe[Y+"Start"];ge===void 0&&(ge=pe[Y]);var _e=pe[Y+"End"];_e===void 0&&(_e=pe[Y]);var me=_e-ge;ue==="end"?re+=me:ue==="middle"&&(re+=me/2)}re=ne.d2c(re)}return ae&&ae.t&&ae.t.posLetter===ne._id&&(Q.boxmode!=="group"&&Q.violinmode!=="group"||(re+=ae.t.dPos)),re}function te(Y){return Y.offsetTop+Y.clientTop}function K(Y){return Y.offsetLeft+Y.clientLeft}function J(Y,W){var Q=Y._fullLayout,ne=W.getBoundingClientRect(),re=ne.left,ae=ne.top,ue=re+ne.width,pe=ae+ne.height,ge=T.apply3DTransform(Q._invTransform)(re,ae),_e=T.apply3DTransform(Q._invTransform)(ue,pe),me=ge[0],ve=ge[1],Oe=_e[0],Me=_e[1];return{x:me,y:ve,width:Oe-me,height:Me-ve,top:Math.min(ve,Me),left:Math.min(me,Oe),right:Math.max(me,Oe),bottom:Math.max(ve,Me)}}},38048:function(ee,D,e){var M=e(71828),k=e(7901),l=e(23469).isUnifiedHover;ee.exports=function(T,b,d,s){s=s||{};var t=b.legend;function i(r){s.font[r]||(s.font[r]=t?b.legend.font[r]:b.font[r])}b&&l(b.hovermode)&&(s.font||(s.font={}),i("size"),i("family"),i("color"),t?(s.bgcolor||(s.bgcolor=k.combine(b.legend.bgcolor,b.paper_bgcolor)),s.bordercolor||(s.bordercolor=b.legend.bordercolor)):s.bgcolor||(s.bgcolor=b.paper_bgcolor)),d("hoverlabel.bgcolor",s.bgcolor),d("hoverlabel.bordercolor",s.bordercolor),d("hoverlabel.namelength",s.namelength),M.coerceFont(d,"hoverlabel.font",s.font),d("hoverlabel.align",s.align)}},98212:function(ee,D,e){var M=e(71828),k=e(528);ee.exports=function(l,T){function b(d,s){return T[d]!==void 0?T[d]:M.coerce(l,T,k,d,s)}return b("clickmode"),b("hovermode")}},30211:function(ee,D,e){var M=e(39898),k=e(71828),l=e(28569),T=e(23469),b=e(528),d=e(88335);ee.exports={moduleType:"component",name:"fx",constants:e(26675),schema:{layout:b},attributes:e(77914),layoutAttributes:b,supplyLayoutGlobalDefaults:e(22774),supplyDefaults:e(54268),supplyLayoutDefaults:e(34938),calc:e(30732),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,i){return k.castOption(s,t,"hoverlabel."+i)},castHoverinfo:function(s,t,i){return k.castOption(s,i,"hoverinfo",function(r){return k.coerceHoverinfo({hoverinfo:r},{_module:s._module},t)})},hover:d.hover,unhover:l.unhover,loneHover:d.loneHover,loneUnhover:function(s){var t=k.isD3Selection(s)?s:M.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(75914)}},528:function(ee,D,e){var M=e(26675),k=e(41940),l=k({editType:"none"});l.family.dflt=M.HOVERFONT,l.size.dflt=M.HOVERFONTSIZE,ee.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:l,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(ee,D,e){var M=e(71828),k=e(528),l=e(98212),T=e(38048);ee.exports=function(b,d){function s(n,o){return M.coerce(b,d,k,n,o)}l(b,d)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=d._has("mapbox"),i=d._has("geo"),r=d._basePlotModules.length;d.dragmode==="zoom"&&((t||i)&&r===1||t&&i&&r===2)&&(d.dragmode="pan"),T(b,d,s),M.coerceFont(s,"hoverlabel.grouptitlefont",d.hoverlabel.font)}},22774:function(ee,D,e){var M=e(71828),k=e(38048),l=e(528);ee.exports=function(T,b){k(T,b,function(d,s){return M.coerce(T,b,l,d,s)})}},83312:function(ee,D,e){var M=e(71828),k=e(30587).counter,l=e(27670).Y,T=e(85555).idRegex,b=e(44467),d={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:l({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,n,o){var a=n[o+"axes"],u=Object.keys((r._splomAxes||{})[o]||{});return Array.isArray(a)?a:u.length?u:void 0}function t(r,n,o,a,u,p){var c=n(r+"gap",o),x=n("domain."+r);n(r+"side",a);for(var g=new Array(u),h=x[0],y=(x[1]-h)/(u-c),v=y*(1-c),m=0;m<u;m++){var _=h+y*m;g[p?u-1-m:m]=[_,_+v]}return g}function i(r,n,o,a,u){var p,c=new Array(o);function x(g,h){n.indexOf(h)!==-1&&a[h]===void 0?(c[g]=h,a[h]=g):c[g]=""}if(Array.isArray(r))for(p=0;p<o;p++)x(p,r[p]);else for(x(0,u),p=1;p<o;p++)x(p,u+(p+1));return c}ee.exports={moduleType:"component",name:"grid",schema:{layout:{grid:d}},layoutAttributes:d,sizeDefaults:function(r,n){var o=r.grid||{},a=s(n,o,"x"),u=s(n,o,"y");if(r.grid||a||u){var p,c,x=Array.isArray(o.subplots)&&Array.isArray(o.subplots[0]),g=Array.isArray(a),h=Array.isArray(u),y=g&&a!==o.xaxes&&h&&u!==o.yaxes;x?(p=o.subplots.length,c=o.subplots[0].length):(h&&(p=u.length),g&&(c=a.length));var v=b.newContainer(n,"grid"),m=C("rows",p),_=C("columns",c);if(m*_>1){x||g||h||C("pattern")==="independent"&&(x=!0),v._hasSubplotGrid=x;var f,S,w=C("roworder")==="top to bottom",E=x?.2:.1,L=x?.3:.1;y&&n._splomGridDflt&&(f=n._splomGridDflt.xside,S=n._splomGridDflt.yside),v._domains={x:t("x",C,E,f,_),y:t("y",C,L,S,m,w)}}else delete n.grid}function C(P,z){return M.coerce(o,v,d,P,z)}},contentDefaults:function(r,n){var o=n.grid;if(o&&o._domains){var a,u,p,c,x,g,h,y=r.grid||{},v=n._subplots,m=o._hasSubplotGrid,_=o.rows,f=o.columns,S=o.pattern==="independent",w=o._axisMap={};if(m){var E=y.subplots||[];g=o.subplots=new Array(_);var L=1;for(a=0;a<_;a++){var C=g[a]=new Array(f),P=E[a]||[];for(u=0;u<f;u++)if(S?(x=L===1?"xy":"x"+L+"y"+L,L++):x=P[u],C[u]="",v.cartesian.indexOf(x)!==-1){if(h=x.indexOf("y"),p=x.slice(0,h),c=x.slice(h),w[p]!==void 0&&w[p]!==u||w[c]!==void 0&&w[c]!==a)continue;C[u]=x,w[p]=u,w[c]=a}}}else{var z=s(n,y,"x"),G=s(n,y,"y");o.xaxes=i(z,v.xaxis,f,w,"x"),o.yaxes=i(G,v.yaxis,_,w,"y")}var O=o._anchors={},H=o.roworder==="top to bottom";for(var N in w){var B,V,q,te=N.charAt(0),K=o[te+"side"];if(K.length<8)O[N]="free";else if(te==="x"){if(K.charAt(0)==="t"===H?(B=0,V=1,q=_):(B=_-1,V=-1,q=-1),m){var J=w[N];for(a=B;a!==q;a+=V)if((x=g[a][J])&&(h=x.indexOf("y"),x.slice(0,h)===N)){O[N]=x.slice(h);break}}else for(a=B;a!==q;a+=V)if(c=o.yaxes[a],v.cartesian.indexOf(N+c)!==-1){O[N]=c;break}}else if(K.charAt(0)==="l"?(B=0,V=1,q=f):(B=f-1,V=-1,q=-1),m){var Y=w[N];for(a=B;a!==q;a+=V)if((x=g[Y][a])&&(h=x.indexOf("y"),x.slice(h)===N)){O[N]=x.slice(0,h);break}}else for(a=B;a!==q;a+=V)if(p=o.xaxes[a],v.cartesian.indexOf(p+N)!==-1){O[N]=p;break}}}}}},69819:function(ee,D,e){var M=e(85555),k=e(44467).templatedArray;e(24695),ee.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(ee,D,e){var M=e(92770),k=e(58163);ee.exports=function(l,T,b,d){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t){for(var i,r,n=l._fullLayout.images,o=T._id.charAt(0),a=0;a<n.length;a++)if(r="images["+a+"].",(i=n[a])[o+"ref"]===T._id){var u=i[o],p=i["size"+o],c=null,x=null;if(s){c=k(u,T.range);var g=p/Math.pow(10,c)/2;x=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else x=(c=Math.pow(10,u))*(Math.pow(10,p/2)-Math.pow(10,-p/2));M(c)?M(x)||(x=null):(c=null,x=null),d(r+o,c),d(r+"size"+o,x)}}}},81603:function(ee,D,e){var M=e(71828),k=e(89298),l=e(85501),T=e(69819);function b(d,s,t){function i(c,x){return M.coerce(d,s,T,c,x)}var r=i("source");if(!i("visible",!!r))return s;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var n={_fullLayout:t},o=["x","y"],a=0;a<2;a++){var u=o[a],p=k.coerceRef(d,s,n,u,"paper",void 0);p!=="paper"&&k.getFromId(n,p)._imgIndices.push(s._index),k.coercePosition(s,n,i,p,u,0)}return s}ee.exports=function(d,s){l(d,s,{name:"images",handleItemDefaults:b})}},80750:function(ee,D,e){var M=e(39898),k=e(91424),l=e(89298),T=e(41675),b=e(77922);ee.exports=function(d){var s,t,i=d._fullLayout,r=[],n={},o=[];for(t=0;t<i.images.length;t++){var a=i.images[t];if(a.visible)if(a.layer==="below"&&a.xref!=="paper"&&a.yref!=="paper"){s=T.ref2id(a.xref)+T.ref2id(a.yref);var u=i._plots[s];if(!u){o.push(a);continue}u.mainplot&&(s=u.mainplot.id),n[s]||(n[s]=[]),n[s].push(a)}else a.layer==="above"?r.push(a):o.push(a)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(f){var S=M.select(this);if(this._imgSrc!==f.source)if(S.attr("xmlns",b.svg),f.source&&f.source.slice(0,5)==="data:")S.attr("xlink:href",f.source),this._imgSrc=f.source;else{var w=new Promise((function(E){var L=new Image;function C(){S.remove(),E()}this.img=L,L.setAttribute("crossOrigin","anonymous"),L.onerror=C,L.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=P.toDataURL("image/png");S.attr("xlink:href",z),E()},S.on("error",C),L.src=f.source,this._imgSrc=f.source}).bind(this));d._promises.push(w)}}function g(f){var S,w,E=M.select(this),L=l.getFromId(d,f.xref),C=l.getFromId(d,f.yref),P=l.getRefType(f.xref)==="domain",z=l.getRefType(f.yref)==="domain",G=i._size;S=L!==void 0?typeof f.xref=="string"&&P?L._length*f.sizex:Math.abs(L.l2p(f.sizex)-L.l2p(0)):f.sizex*G.w,w=C!==void 0?typeof f.yref=="string"&&z?C._length*f.sizey:Math.abs(C.l2p(f.sizey)-C.l2p(0)):f.sizey*G.h;var O,H,N=S*p[f.xanchor].offset,B=w*c[f.yanchor].offset,V=p[f.xanchor].sizing+c[f.yanchor].sizing;switch(O=L!==void 0?typeof f.xref=="string"&&P?L._length*f.x+L._offset:L.r2p(f.x)+L._offset:f.x*G.w+G.l,O+=N,H=C!==void 0?typeof f.yref=="string"&&z?C._length*(1-f.y)+C._offset:C.r2p(f.y)+C._offset:G.h-f.y*G.h+G.t,H+=B,f.sizing){case"fill":V+=" slice";break;case"stretch":V="none"}E.attr({x:O,y:H,width:S,height:w,preserveAspectRatio:V,opacity:f.opacity});var q=(L&&l.getRefType(f.xref)!=="domain"?L._id:"")+(C&&l.getRefType(f.yref)!=="domain"?C._id:"");k.setClipUrl(E,q?"clip"+i._uid+q:null,d)}var h=i._imageLowerLayer.selectAll("image").data(o),y=i._imageUpperLayer.selectAll("image").data(r);h.enter().append("image"),y.enter().append("image"),h.exit().remove(),y.exit().remove(),h.each(function(f){x.bind(this)(f),g.bind(this)(f)}),y.each(function(f){x.bind(this)(f),g.bind(this)(f)});var v=Object.keys(i._plots);for(t=0;t<v.length;t++){s=v[t];var m=i._plots[s];if(m.imagelayer){var _=m.imagelayer.selectAll("image").data(n[s]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(f){x.bind(this)(f),g.bind(this)(f)})}}}},68804:function(ee,D,e){ee.exports={moduleType:"component",name:"images",layoutAttributes:e(69819),supplyLayoutDefaults:e(81603),includeBasePlot:e(76325)("images"),draw:e(80750),convertCoords:e(75378)}},33030:function(ee,D,e){var M=e(41940),k=e(22399);ee.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(ee){ee.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(ee,D,e){var M=e(73972),k=e(71828),l=e(44467),T=e(9012),b=e(33030),d=e(10820),s=e(10130);function t(i,r,n,o){var a=r[i]||{},u=l.newContainer(n,i);function p(V,q){return k.coerce(a,u,b,V,q)}var c=k.coerceFont(p,"font",n.font);if(p("bgcolor",n.paper_bgcolor),p("bordercolor"),p("visible")){for(var x,g=function(V,q){var te=x._input,K=x;return k.coerce(te,K,T,V,q)},h=n.font||{},y=k.coerceFont(p,"grouptitlefont",k.extendFlat({},h,{size:Math.round(1.1*h.size)})),v=0,m=!1,_="normal",f=(n.shapes||[]).filter(function(V){return V.showlegend}),S=o.concat(f).filter(function(V){return i===(V.legend||"legend")}),w=0;w<S.length;w++)if((x=S[w]).visible){var E=x._isShape;(x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(v++,x.showlegend&&(m=!0,(!E&&M.traceIs(x,"pie-like")||x._input.showlegend===!0)&&v++),k.coerceFont(g,"legendgrouptitle.font",y)),(!E&&M.traceIs(x,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(_=s.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(_=s.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var L=k.coerce(r,n,d,"showlegend",m&&v>(i==="legend"?1:0));if(L===!1&&(n[i]=void 0),(L!==!1||a.uirevision)&&(p("uirevision",n.uirevision),L!==!1)){p("borderwidth");var C,P,z,G=p("orientation")==="h",O=p("yref")==="paper",H=p("xref")==="paper",N="left";if(G?(C=0,M.getComponentMethod("rangeslider","isVisible")(r.xaxis)?O?(P=1.1,z="bottom"):(P=1,z="top"):O?(P=-.1,z="top"):(P=0,z="bottom")):(P=1,z="auto",H?C=1.02:(C=1,N="right")),k.coerce(a,u,{x:{valType:"number",editType:"legend",min:H?-2:0,max:H?3:1,dflt:C}},"x"),k.coerce(a,u,{y:{valType:"number",editType:"legend",min:O?-2:0,max:O?3:1,dflt:P}},"y"),p("traceorder",_),s.isGrouped(n[i])&&p("tracegroupgap"),p("entrywidth"),p("entrywidthmode"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("xanchor",N),p("yanchor",z),p("valign"),k.noneOrAll(a,u,["x","y"]),p("title.text")){p("title.side",G?"left":"top");var B=k.extendFlat({},c,{size:k.bigFont(c.size)});k.coerceFont(p,"title.font",B)}}}}ee.exports=function(i,r,n){var o,a=n.slice(),u=r.shapes;if(u)for(o=0;o<u.length;o++){var p=u[o];if(p.showlegend){var c={_input:p._input,visible:p.visible,showlegend:p.showlegend,legend:p.legend};a.push(c)}}var x=["legend"];for(o=0;o<a.length;o++)k.pushUnique(x,a[o].legend);for(r._legends=[],o=0;o<x.length;o++){var g=x[o];t(g,i,r,a),r[g]&&r[g].visible&&(r[g]._id=g),r._legends.push(g)}}},43969:function(ee,D,e){var M=e(39898),k=e(71828),l=e(74875),T=e(73972),b=e(11086),d=e(28569),s=e(91424),t=e(7901),i=e(63893),r=e(85167),n=e(14928),o=e(18783),a=o.LINE_SPACING,u=o.FROM_TL,p=o.FROM_BR,c=e(82424),x=e(53630),g=e(10130),h=1,y=/^legend[0-9]*$/;function v(z,G){var O,H,N=G||{},B=z._fullLayout,V=P(N),q=N._inHover;if(q?(H=N.layer,O="hover"):(H=B._infolayer,O=V),H){var te;if(O+=B._uid,z._legendMouseDownTime||(z._legendMouseDownTime=0),q){if(!N.entries)return;te=c(N.entries,N)}else{for(var K=(z.calcdata||[]).slice(),J=B.shapes,Y=0;Y<J.length;Y++){var W=J[Y];if(W.showlegend){var Q={_isShape:!0,_fullInput:W,index:W._index,name:W.name||W.label.text||"shape "+W._index,legend:W.legend,legendgroup:W.legendgroup,legendgrouptitle:W.legendgrouptitle,legendrank:W.legendrank,legendwidth:W.legendwidth,showlegend:W.showlegend,visible:W.visible,opacity:W.opacity,mode:W.type==="line"?"lines":"markers",line:W.line,marker:{line:W.line,color:W.fillcolor,size:12,symbol:W.type==="rect"?"square":W.type==="circle"?"circle":"hexagon2"}};K.push([{trace:Q}])}}te=B.showlegend&&c(K,N,B._legends.length>1)}var ne=B.hiddenlabels||[];if(!(q||B.showlegend&&te.length))return H.selectAll("."+V).remove(),B._topdefs.select("#"+O).remove(),l.autoMargin(z,V);var re=k.ensureSingle(H,"g",V,function(Me){q||Me.attr("pointer-events","all")}),ae=k.ensureSingleById(B._topdefs,"clipPath",O,function(Me){Me.append("rect")}),ue=k.ensureSingle(re,"rect","bg",function(Me){Me.attr("shape-rendering","crispEdges")});ue.call(t.stroke,N.bordercolor).call(t.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px");var pe,ge=k.ensureSingle(re,"g","scrollbox"),_e=N.title;N._titleWidth=0,N._titleHeight=0,_e.text?((pe=k.ensureSingle(ge,"text",V+"titletext")).attr("text-anchor","start").call(s.font,_e.font).text(_e.text),E(pe,ge,z,N,h)):ge.selectAll("."+V+"titletext").remove();var me=k.ensureSingle(re,"rect","scrollbar",function(Me){Me.attr(n.scrollBarEnterAttrs).call(t.fill,n.scrollBarColor)}),ve=ge.selectAll("g.groups").data(te);ve.enter().append("g").attr("class","groups"),ve.exit().remove();var Oe=ve.selectAll("g.traces").data(k.identity);Oe.enter().append("g").attr("class","traces"),Oe.exit().remove(),Oe.style("opacity",function(Me){var Te=Me[0].trace;return T.traceIs(Te,"pie-like")?ne.indexOf(Me[0].label)!==-1?.5:1:Te.visible==="legendonly"?.5:1}).each(function(){M.select(this).call(f,z,N)}).call(x,z,N).each(function(){q||M.select(this).call(w,z,V)}),k.syncOrAsync([l.previousPromises,function(){return function(Me,Te,se,oe){var he=Me._fullLayout,Ee=P(oe);oe||(oe=he[Ee]);var ke=he._size,be=g.isVertical(oe),Ie=g.isGrouped(oe),Fe=oe.entrywidthmode==="fraction",ce=oe.borderwidth,we=2*ce,ye=n.itemGap,Ce=oe.itemwidth+2*ye,Re=2*(ce+ye),ze=C(oe),He=oe.y<0||oe.y===0&&ze==="top",Ge=oe.y>1||oe.y===1&&ze==="bottom",Je=oe.tracegroupgap,ot={};oe._maxHeight=Math.max(He||Ge?he.height/2:ke.h,30);var Qe=0;oe._width=0,oe._height=0;var vt=function(ht){var gt=0,ut=0,wt=ht.title.side;return wt&&(wt.indexOf("left")!==-1&&(gt=ht._titleWidth),wt.indexOf("top")!==-1&&(ut=ht._titleHeight)),[gt,ut]}(oe);if(be)se.each(function(ht){var gt=ht[0].height;s.setTranslate(this,ce+vt[0],ce+vt[1]+oe._height+gt/2+ye),oe._height+=gt,oe._width=Math.max(oe._width,ht[0].width)}),Qe=Ce+oe._width,oe._width+=ye+Ce+we,oe._height+=Re,Ie&&(Te.each(function(ht,gt){s.setTranslate(this,0,gt*oe.tracegroupgap)}),oe._height+=(oe._lgroupsLength-1)*oe.tracegroupgap);else{var xt=L(oe),mt=oe.x<0||oe.x===0&&xt==="right",rt=oe.x>1||oe.x===1&&xt==="left",it=Ge||He,Tt=he.width/2;oe._maxWidth=Math.max(mt?it&&xt==="left"?ke.l+ke.w:Tt:rt?it&&xt==="right"?ke.r+ke.w:Tt:ke.w,2*Ce);var Mt=0,Pt=0;se.each(function(ht){var gt=m(ht,oe,Ce);Mt=Math.max(Mt,gt),Pt+=gt}),Qe=null;var kt=0;if(Ie){var Ze=0,Xe=0,Ve=0;Te.each(function(){var ht=0,gt=0;M.select(this).selectAll("g.traces").each(function(wt){var ct=m(wt,oe,Ce),ft=wt[0].height;s.setTranslate(this,vt[0],vt[1]+ce+ye+ft/2+gt),gt+=ft,ht=Math.max(ht,ct),ot[wt[0].trace.legendgroup]=ht});var ut=ht+ye;Xe>0&&ut+ce+Xe>oe._maxWidth?(kt=Math.max(kt,Xe),Xe=0,Ve+=Ze+Je,Ze=gt):Ze=Math.max(Ze,gt),s.setTranslate(this,Xe,Ve),Xe+=ut}),oe._width=Math.max(kt,Xe)+ce,oe._height=Ve+Ze+Re}else{var We=se.size(),at=Pt+we+(We-1)*ye<oe._maxWidth,et=0,De=0,Be=0,nt=0;se.each(function(ht){var gt=ht[0].height,ut=m(ht,oe,Ce),wt=at?ut:Mt;Fe||(wt+=ye),wt+ce+De-ye>=oe._maxWidth&&(kt=Math.max(kt,nt),De=0,Be+=et,oe._height+=et,et=0),s.setTranslate(this,vt[0]+ce+De,vt[1]+ce+Be+gt/2+ye),nt=De+ut+ye,De+=wt,et=Math.max(et,gt)}),at?(oe._width=De+we,oe._height=et+Re):(oe._width=Math.max(kt,nt)+we,oe._height+=et+Re)}}oe._width=Math.ceil(Math.max(oe._width+vt[0],oe._titleWidth+2*(ce+n.titlePad))),oe._height=Math.ceil(Math.max(oe._height+vt[1],oe._titleHeight+2*(ce+n.itemGap))),oe._effHeight=Math.min(oe._height,oe._maxHeight);var tt=Me._context.edits,dt=tt.legendText||tt.legendPosition;se.each(function(ht){var gt=M.select(this).select("."+Ee+"toggle"),ut=ht[0].height,wt=ht[0].trace.legendgroup,ct=m(ht,oe,Ce);Ie&&wt!==""&&(ct=ot[wt]);var ft=dt?Ce:Qe||ct;be||Fe||(ft+=ye/2),s.setRect(gt,0,-ut/2,ft,ut)})}(z,ve,Oe,N)},function(){var Me,Te,se,oe,he=B._size,Ee=N.borderwidth,ke=N.xref==="paper",be=N.yref==="paper";if(_e.text&&function(it,Tt,Mt){if(Tt.title.side==="top center"||Tt.title.side==="top right"){var Pt=Tt.title.font.size*a,kt=0,Ze=it.node(),Xe=s.bBox(Ze).width;Tt.title.side==="top center"?kt=.5*(Tt._width-2*Mt-2*n.titlePad-Xe):Tt.title.side==="top right"&&(kt=Tt._width-2*Mt-2*n.titlePad-Xe),i.positionText(it,Mt+n.titlePad+kt,Mt+Pt)}}(pe,N,Ee),!q){var Ie,Fe;Ie=ke?he.l+he.w*N.x-u[L(N)]*N._width:B.width*N.x-u[L(N)]*N._width,Fe=be?he.t+he.h*(1-N.y)-u[C(N)]*N._effHeight:B.height*(1-N.y)-u[C(N)]*N._effHeight;var ce=function(it,Tt,Mt,Pt){var kt=it._fullLayout,Ze=kt[Tt],Xe=L(Ze),Ve=C(Ze),We=Ze.xref==="paper",at=Ze.yref==="paper";it._fullLayout._reservedMargin[Tt]={};var et=Ze.y<.5?"b":"t",De=Ze.x<.5?"l":"r",Be={r:kt.width-Mt,l:Mt+Ze._width,b:kt.height-Pt,t:Pt+Ze._effHeight};if(We&&at)return l.autoMargin(it,Tt,{x:Ze.x,y:Ze.y,l:Ze._width*u[Xe],r:Ze._width*p[Xe],b:Ze._effHeight*p[Ve],t:Ze._effHeight*u[Ve]});We?it._fullLayout._reservedMargin[Tt][et]=Be[et]:at||Ze.orientation==="v"?it._fullLayout._reservedMargin[Tt][De]=Be[De]:it._fullLayout._reservedMargin[Tt][et]=Be[et]}(z,V,Ie,Fe);if(ce)return;if(B.margin.autoexpand){var we=Ie,ye=Fe;Ie=ke?k.constrain(Ie,0,B.width-N._width):we,Fe=be?k.constrain(Fe,0,B.height-N._effHeight):ye,Ie!==we&&k.log("Constrain "+V+".x to make legend fit inside graph"),Fe!==ye&&k.log("Constrain "+V+".y to make legend fit inside graph")}s.setTranslate(re,Ie,Fe)}if(me.on(".drag",null),re.on("wheel",null),q||N._height<=N._maxHeight||z._context.staticPlot){var Ce=N._effHeight;q&&(Ce=N._height),ue.attr({width:N._width-Ee,height:Ce-Ee,x:Ee/2,y:Ee/2}),s.setTranslate(ge,0,0),ae.select("rect").attr({width:N._width-2*Ee,height:Ce-2*Ee,x:Ee,y:Ee}),s.setClipUrl(ge,O,z),s.setRect(me,0,0,0,0),delete N._scrollY}else{var Re,ze,He,Ge=Math.max(n.scrollBarMinHeight,N._effHeight*N._effHeight/N._height),Je=N._effHeight-Ge-2*n.scrollBarMargin,ot=N._height-N._effHeight,Qe=Je/ot,vt=Math.min(N._scrollY||0,ot);ue.attr({width:N._width-2*Ee+n.scrollBarWidth+n.scrollBarMargin,height:N._effHeight-Ee,x:Ee/2,y:Ee/2}),ae.select("rect").attr({width:N._width-2*Ee+n.scrollBarWidth+n.scrollBarMargin,height:N._effHeight-2*Ee,x:Ee,y:Ee+vt}),s.setClipUrl(ge,O,z),rt(vt,Ge,Qe),re.on("wheel",function(){rt(vt=k.constrain(N._scrollY+M.event.deltaY/Je*ot,0,ot),Ge,Qe),vt!==0&&vt!==ot&&M.event.preventDefault()});var xt=M.behavior.drag().on("dragstart",function(){var it=M.event.sourceEvent;Re=it.type==="touchstart"?it.changedTouches[0].clientY:it.clientY,He=vt}).on("drag",function(){var it=M.event.sourceEvent;it.buttons===2||it.ctrlKey||(ze=it.type==="touchmove"?it.changedTouches[0].clientY:it.clientY,vt=function(Tt,Mt,Pt){var kt=(Pt-Mt)/Qe+Tt;return k.constrain(kt,0,ot)}(He,Re,ze),rt(vt,Ge,Qe))});me.call(xt);var mt=M.behavior.drag().on("dragstart",function(){var it=M.event.sourceEvent;it.type==="touchstart"&&(Re=it.changedTouches[0].clientY,He=vt)}).on("drag",function(){var it=M.event.sourceEvent;it.type==="touchmove"&&(ze=it.changedTouches[0].clientY,vt=function(Tt,Mt,Pt){var kt=(Mt-Pt)/Qe+Tt;return k.constrain(kt,0,ot)}(He,Re,ze),rt(vt,Ge,Qe))});ge.call(mt)}function rt(it,Tt,Mt){N._scrollY=z._fullLayout[V]._scrollY=it,s.setTranslate(ge,0,-it),s.setRect(me,N._width,n.scrollBarMargin+it*Mt,n.scrollBarWidth,Tt),ae.select("rect").attr("y",Ee+it)}z._context.edits.legendPosition&&(re.classed("cursor-move",!0),d.init({element:re.node(),gd:z,prepFn:function(){var it=s.getTranslate(re);se=it.x,oe=it.y},moveFn:function(it,Tt){var Mt=se+it,Pt=oe+Tt;s.setTranslate(re,Mt,Pt),Me=d.align(Mt,N._width,he.l,he.l+he.w,N.xanchor),Te=d.align(Pt+N._height,-N._height,he.t+he.h,he.t,N.yanchor)},doneFn:function(){if(Me!==void 0&&Te!==void 0){var it={};it[V+".x"]=Me,it[V+".y"]=Te,T.call("_guiRelayout",z,it)}},clickFn:function(it,Tt){var Mt=H.selectAll("g.traces").filter(function(){var Pt=this.getBoundingClientRect();return Tt.clientX>=Pt.left&&Tt.clientX<=Pt.right&&Tt.clientY>=Pt.top&&Tt.clientY<=Pt.bottom});Mt.size()>0&&_(z,re,Mt,it,Tt)}}))}],z)}}function m(z,G,O){var H=z[0],N=H.width,B=G.entrywidthmode,V=H.trace.legendwidth||G.entrywidth;return B==="fraction"?G._maxWidth*V:O+(V||N)}function _(z,G,O,H,N){var B=O.data()[0][0].trace,V={event:N,node:O.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:z.data,layout:z.layout,frames:z._transitionData._frames,config:z._context,fullData:z._fullData,fullLayout:z._fullLayout};B._group&&(V.group=B._group),T.traceIs(B,"pie-like")&&(V.label=O.datum()[0].label);var q=b.triggerHandler(z,"plotly_legendclick",V);if(H===1){if(q===!1)return;G._clickTimeout=setTimeout(function(){z._fullLayout&&r(O,z,H)},z._context.doubleClickDelay)}else H===2&&(G._clickTimeout&&clearTimeout(G._clickTimeout),z._legendMouseDownTime=0,b.triggerHandler(z,"plotly_legenddoubleclick",V)!==!1&&q!==!1&&r(O,z,H))}function f(z,G,O){var H,N,B=P(O),V=z.data()[0][0],q=V.trace,te=T.traceIs(q,"pie-like"),K=!O._inHover&&G._context.edits.legendText&&!te,J=O._maxNameLength;V.groupTitle?(H=V.groupTitle.text,N=V.groupTitle.font):(N=O.font,O.entries?H=V.text:(H=te?V.label:q.name,q._meta&&(H=k.templateString(H,q._meta))));var Y=k.ensureSingle(z,"text",B+"text");Y.attr("text-anchor","start").call(s.font,N).text(K?S(H,J):H);var W=O.itemwidth+2*n.itemGap;i.positionText(Y,W,0),K?Y.call(i.makeEditable,{gd:G,text:H}).call(E,z,G,O).on("edit",function(Q){this.text(S(Q,J)).call(E,z,G,O);var ne=V.trace._fullInput||{},re={};if(T.hasTransform(ne,"groupby")){var ae=T.getTransformIndices(ne,"groupby"),ue=ae[ae.length-1],pe=k.keyedContainer(ne,"transforms["+ue+"].styles","target","value.name");pe.set(V.trace._group,Q),re=pe.constructUpdate()}else re.name=Q;return ne._isShape?T.call("_guiRelayout",G,"shapes["+q.index+"].name",re.name):T.call("_guiRestyle",G,re,q.index)}):E(Y,z,G,O)}function S(z,G){var O=Math.max(4,G);if(z&&z.trim().length>=O/2)return z;for(var H=O-(z=z||"").length;H>0;H--)z+=" ";return z}function w(z,G,O){var H,N=G._context.doubleClickDelay,B=1,V=k.ensureSingle(z,"rect",O+"toggle",function(q){G._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(t.fill,"rgba(0,0,0,0)")});G._context.staticPlot||(V.on("mousedown",function(){(H=new Date().getTime())-G._legendMouseDownTime<N?B+=1:(B=1,G._legendMouseDownTime=H)}),V.on("mouseup",function(){if(!G._dragged&&!G._editing){var q=G._fullLayout[O];new Date().getTime()-G._legendMouseDownTime>N&&(B=Math.max(B-1,1)),_(G,q,z,B,M.event)}}))}function E(z,G,O,H,N){H._inHover&&z.attr("data-notex",!0),i.convertToTspans(z,O,function(){(function(B,V,q,te){var K=B.data()[0][0];if(q._inHover||!K||K.trace.showlegend){var J=B.select("g[class*=math-group]"),Y=J.node(),W=P(q);q||(q=V._fullLayout[W]);var Q,ne,re=q.borderwidth,ae=(te===h?q.title.font:K.groupTitle?K.groupTitle.font:q.font).size*a;if(Y){var ue=s.bBox(Y);Q=ue.height,ne=ue.width,te===h?s.setTranslate(J,re,re+.75*Q):s.setTranslate(J,0,.25*Q)}else{var pe="."+W+(te===h?"title":"")+"text",ge=B.select(pe),_e=i.lineCount(ge),me=ge.node();if(Q=ae*_e,ne=me?s.bBox(me).width:0,te===h)q.title.side==="left"&&(ne+=2*n.itemGap),i.positionText(ge,re+n.titlePad,re+ae);else{var ve=2*n.itemGap+q.itemwidth;K.groupTitle&&(ve=n.itemGap,ne-=q.itemwidth),i.positionText(ge,ve,-ae*((_e-1)/2-.3))}}te===h?(q._titleWidth=ne,q._titleHeight=Q):(K.lineHeight=ae,K.height=Math.max(Q,16)+3,K.width=ne)}else B.remove()})(G,O,H,N)})}function L(z){return k.isRightAnchor(z)?"right":k.isCenterAnchor(z)?"center":"left"}function C(z){return k.isBottomAnchor(z)?"bottom":k.isMiddleAnchor(z)?"middle":"top"}function P(z){return z._id||"legend"}ee.exports=function(z,G){if(G)v(z,G);else{var O=z._fullLayout,H=O._legends;O._infolayer.selectAll('[class^="legend"]').each(function(){var V=M.select(this),q=V.attr("class").split(" ")[0];q.match(y)&&H.indexOf(q)===-1&&V.remove()});for(var N=0;N<H.length;N++){var B=H[N];v(z,z._fullLayout[B])}}}},82424:function(ee,D,e){var M=e(73972),k=e(10130);ee.exports=function(l,T,b){var d,s,t=T._inHover,i=k.isGrouped(T),r=k.isReversed(T),n={},o=[],a=!1,u={},p=0,c=0;function x(H,N,B){if(T.visible!==!1&&(!b||H===T._id))if(N!==""&&k.isGrouped(T))o.indexOf(N)===-1?(o.push(N),a=!0,n[N]=[B]):n[N].push(B);else{var V="~~i"+p;o.push(V),n[V]=[B],p++}}for(d=0;d<l.length;d++){var g=l[d],h=g[0],y=h.trace,v=y.legend,m=y.legendgroup;if(t||y.visible&&y.showlegend)if(M.traceIs(y,"pie-like"))for(u[m]||(u[m]={}),s=0;s<g.length;s++){var _=g[s].label;u[m][_]||(x(v,m,{label:_,color:g[s].color,i:g[s].i,trace:y,pts:g[s].pts}),u[m][_]=!0,c=Math.max(c,(_||"").length))}else x(v,m,h),c=Math.max(c,(y.name||"").length)}if(!o.length)return[];var f=!a||!i,S=[];for(d=0;d<o.length;d++){var w=n[o[d]];f?S.push(w[0]):S.push(w)}for(f&&(S=[S]),d=0;d<S.length;d++){var E=1/0;for(s=0;s<S[d].length;s++){var L=S[d][s].trace.legendrank;E>L&&(E=L)}S[d][0]._groupMinRank=E,S[d][0]._preGroupSort=d}var C=function(H,N){return H.trace.legendrank-N.trace.legendrank||H._preSort-N._preSort};for(S.forEach(function(H,N){H[0]._preGroupSort=N}),S.sort(function(H,N){return H[0]._groupMinRank-N[0]._groupMinRank||H[0]._preGroupSort-N[0]._preGroupSort}),d=0;d<S.length;d++){S[d].forEach(function(H,N){H._preSort=N}),S[d].sort(C);var P=S[d][0].trace,z=null;for(s=0;s<S[d].length;s++){var G=S[d][s].trace.legendgrouptitle;if(G&&G.text){z=G,t&&(G.font=T._groupTitleFont);break}}if(r&&S[d].reverse(),z){var O=!1;for(s=0;s<S[d].length;s++)if(M.traceIs(S[d][s].trace,"pie-like")){O=!0;break}S[d].unshift({i:-1,groupTitle:z,noClick:O,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:T.groupclick==="toggleitem"||P.visible}})}for(s=0;s<S[d].length;s++)S[d][s]=[S[d][s]]}return T._lgroupsLength=S.length,T._maxNameLength=c,S}},85167:function(ee,D,e){var M=e(73972),k=e(71828),l=k.pushUnique,T=!0;ee.exports=function(b,d,s){var t=d._fullLayout;if(!d._dragged&&!d._editing){var i,r=t.legend.itemclick,n=t.legend.itemdoubleclick,o=t.legend.groupclick;if(s===1&&r==="toggle"&&n==="toggleothers"&&T&&d.data&&d._context.showTips&&k.notifier(k._(d,"Double-click on legend to isolate one trace"),"long"),T=!1,s===1?i=r:s===2&&(i=n),i){var a=o==="togglegroup",u=t.hiddenlabels?t.hiddenlabels.slice():[],p=b.data()[0][0];if(!p.groupTitle||!p.noClick){var c=d._fullData,x=(t.shapes||[]).filter(function(Te){return Te.showlegend}),g=c.concat(x),h=p.trace;h._isShape&&(h=h._fullInput);var y,v,m,_,f,S=h.legendgroup,w={},E=[],L=[],C=[],P=(t.shapes||[]).map(function(Te){return Te._input}),z=!1,G=h.legend,O=h._fullInput;if(O&&O._isShape||!M.traceIs(h,"pie-like")){var H,N=S&&S.length,B=[];if(N)for(y=0;y<g.length;y++)(H=g[y]).visible&&H.legendgroup===S&&B.push(y);if(i==="toggle"){var V;switch(h.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(N)if(a)for(y=0;y<g.length;y++){var q=g[y];q.visible!==!1&&q.legendgroup===S&&Me(q,V)}else Me(h,V);else Me(h,V)}else if(i==="toggleothers"){var te,K,J,Y,W=!0;for(y=0;y<g.length;y++)if(te=(Y=g[y])===h,K=Y.showlegend!==!0,!(te||K||N&&Y.legendgroup===S||Y.legend!==G||Y.visible!==!0||M.traceIs(Y,"notLegendIsolatable"))){W=!1;break}for(y=0;y<g.length;y++)if((Y=g[y]).visible!==!1&&Y.legend===G&&!M.traceIs(Y,"notLegendIsolatable"))switch(h.visible){case"legendonly":Me(Y,!0);break;case!0:J=!!W||"legendonly",te=Y===h,K=Y.showlegend!==!0&&!Y.legendgroup,Me(Y,!!(te||N&&Y.legendgroup===S||K)||J)}}for(y=0;y<L.length;y++)if(m=L[y]){var Q=m.constructUpdate(),ne=Object.keys(Q);for(v=0;v<ne.length;v++)_=ne[v],(w[_]=w[_]||[])[C[y]]=Q[_]}for(f=Object.keys(w),y=0;y<f.length;y++)for(_=f[y],v=0;v<E.length;v++)w[_].hasOwnProperty(v)||(w[_][v]=void 0);z?M.call("_guiUpdate",d,w,{shapes:P},E):M.call("_guiRestyle",d,w,E)}else{var re=p.label,ae=u.indexOf(re);if(i==="toggle")ae===-1?u.push(re):u.splice(ae,1);else if(i==="toggleothers"){var ue=ae!==-1,pe=[];for(y=0;y<d.calcdata.length;y++){var ge=d.calcdata[y];for(v=0;v<ge.length;v++){var _e=ge[v].label;G===ge[0].trace.legend&&re!==_e&&(u.indexOf(_e)===-1&&(ue=!0),l(u,_e),pe.push(_e))}}if(!ue)for(var me=0;me<pe.length;me++){var ve=u.indexOf(pe[me]);ve!==-1&&u.splice(ve,1)}}M.call("_guiRelayout",d,"hiddenlabels",u)}}}}function Oe(Te,se){var oe=E.indexOf(Te),he=w.visible;return he||(he=w.visible=[]),E.indexOf(Te)===-1&&(E.push(Te),oe=E.length-1),he[oe]=se,oe}function Me(Te,se){if(!p.groupTitle||a){var oe,he=Te._fullInput||Te,Ee=he._isShape,ke=he.index;if(ke===void 0&&(ke=he._index),M.hasTransform(he,"groupby")){var be=L[ke];if(!be){var Ie=M.getTransformIndices(he,"groupby"),Fe=Ie[Ie.length-1];be=k.keyedContainer(he,"transforms["+Fe+"].styles","target","value.visible"),L[ke]=be}var ce=be.get(Te._group);ce===void 0&&(ce=!0),ce!==!1&&be.set(Te._group,se),C[ke]=Oe(ke,he.visible!==!1)}else{var we=he.visible!==!1&&se;Ee?(oe=we,P[ke].visible=oe,z=!0):Oe(ke,we)}}}}},10130:function(ee,D){D.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},D.isVertical=function(e){return e.orientation!=="h"},D.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2199:function(ee,D,e){ee.exports={moduleType:"component",name:"legend",layoutAttributes:e(33030),supplyLayoutDefaults:e(99017),draw:e(43969),style:e(53630)}},53630:function(ee,D,e){var M=e(39898),k=e(73972),l=e(71828),T=l.strTranslate,b=e(91424),d=e(7901),s=e(52075).extractOpts,t=e(34098),i=e(63463),r=e(53581).castOption,n=e(14928);function o(p,c){return(c?"radial":"horizontal")+(p?"":"reversed")}function a(p){var c=p[0].trace,x=c.contours,g=t.hasLines(c),h=t.hasMarkers(c),y=c.visible&&c.fill&&c.fill!=="none",v=!1,m=!1;if(x){var _=x.coloring;_==="lines"?v=!0:g=_==="none"||_==="heatmap"||x.showlines,x.type==="constraint"?y=x._operation!=="=":_!=="fill"&&_!=="heatmap"||(m=!0)}return{showMarker:h,showLine:g,showFill:y,showGradientLine:v,showGradientFill:m,anyLine:g||v,anyFill:y||m}}function u(p,c,x){return p&&l.isArrayOrTypedArray(p)?c:p>x?x:p}ee.exports=function(p,c,x){var g=c._fullLayout;x||(x=g.legend);var h=x.itemsizing==="constant",y=x.itemwidth,v=(y+2*n.itemGap)/2,m=T(v,0),_=function(w,E,L,C){var P;if(w+1)P=w;else{if(!(E&&E.width>0))return 0;P=E.width}return h?C:Math.min(P,L)};function f(w,E,L){var C=w[0].trace,P=C.marker||{},z=P.line||{},G=L?C.visible&&C.type===L:k.traceIs(C,"bar"),O=M.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(G?[w]:[]);O.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),O.exit().remove(),O.each(function(H){var N=M.select(this),B=H[0],V=_(B.mlw,P.line,5,2);N.style("stroke-width",V+"px");var q=B.mcc;if(!x._inHover&&"mc"in B){var te=s(P),K=te.mid;K===void 0&&(K=(te.max+te.min)/2),q=b.tryColorscale(P,"")(K)}var J=q||B.mc||P.color,Y=P.pattern,W=Y&&b.getPatternAttr(Y.shape,0,"");if(W){var Q=b.getPatternAttr(Y.bgcolor,0,null),ne=b.getPatternAttr(Y.fgcolor,0,null),re=Y.fgopacity,ae=u(Y.size,8,10),ue=u(Y.solidity,.5,1),pe="legend-"+C.uid;N.call(b.pattern,"legend",c,pe,W,ae,ue,q,Y.fillmode,Q,ne,re)}else N.call(d.fill,J);V&&d.stroke(N,B.mlc||z.color)})}function S(w,E,L){var C=w[0],P=C.trace,z=L?P.visible&&P.type===L:k.traceIs(P,L),G=M.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(z?[w]:[]);if(G.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),G.exit().remove(),G.size()){var O=P.marker||{},H=_(r(O.line.width,C.pts),O.line,5,2),N="pieLike",B=l.minExtend(P,{marker:{line:{width:H}}},N),V=l.minExtend(C,{trace:B},N);i(G,V,B,c)}}p.each(function(w){var E=M.select(this),L=l.ensureSingle(E,"g","layers");L.style("opacity",w[0].trace.opacity);var C=x.valign,P=w[0].lineHeight,z=w[0].height;if(C!=="middle"&&P&&z){var G={top:1,bottom:-1}[C]*(.5*(P-z+3));L.attr("transform",T(0,G))}else L.attr("transform",null);L.selectAll("g.legendfill").data([w]).enter().append("g").classed("legendfill",!0),L.selectAll("g.legendlines").data([w]).enter().append("g").classed("legendlines",!0);var O=L.selectAll("g.legendsymbols").data([w]);O.enter().append("g").classed("legendsymbols",!0),O.selectAll("g.legendpoints").data([w]).enter().append("g").classed("legendpoints",!0)}).each(function(w){var E,L=w[0].trace,C=[];if(L.visible)switch(L.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(z,G){var O,H=M.select(this),N=s(L),B=N.colorscale,V=N.reversescale;if(B){if(!E){var q=B.length;O=G===0?B[V?q-1:0][1]:G===1?B[V?0:q-1][1]:B[Math.floor((q-1)/2)][1]}}else{var te=L.vertexcolor||L.facecolor||L.color;O=l.isArrayOrTypedArray(te)?te[G]||te[0]:te}H.attr("d",z[0]),O?H.call(d.fill,O):H.call(function(K){if(K.size()){var J="legendfill-"+L.uid;b.gradient(K,c,J,o(V,E==="radial"),B,"fill")}})})}).each(function(w){var E=w[0].trace,L=E.type==="waterfall";if(w[0]._distinct&&L){var C=w[0].trace[w[0].dir].marker;return w[0].mc=C.color,w[0].mlw=C.line.width,w[0].mlc=C.line.color,f(w,this,"waterfall")}var P=[];E.visible&&L&&(P=w[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(G){var O=M.select(this),H=E[G[0]].marker,N=_(void 0,H.line,5,2);O.attr("d",G[1]).style("stroke-width",N+"px").call(d.fill,H.color),N&&O.call(d.stroke,H.line.color)})}).each(function(w){f(w,this,"funnel")}).each(function(w){f(w,this)}).each(function(w){var E=w[0].trace,L=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[w]:[]);L.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),L.exit().remove(),L.each(function(){var C=M.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||d.opacity(E.fillcolor)!==0||d.opacity((E.line||{}).color)!==0){var P=_(void 0,E.line,5,2);C.style("stroke-width",P+"px").call(d.fill,E.fillcolor),P&&d.stroke(C,E.line.color)}else{var z=l.minExtend(E,{marker:{size:h?12:l.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});L.call(b.pointStyle,z,c)}})}).each(function(w){S(w,this,"funnelarea")}).each(function(w){S(w,this,"pie")}).each(function(w){var E,L,C=a(w),P=C.showFill,z=C.showLine,G=C.showGradientLine,O=C.showGradientFill,H=C.anyFill,N=C.anyLine,B=w[0],V=B.trace,q=s(V),te=q.colorscale,K=q.reversescale,J=t.hasMarkers(V)||!H?"M5,0":N?"M5,-2":"M5,-3",Y=M.select(this),W=Y.select(".legendfill").selectAll("path").data(P||O?[w]:[]);if(W.enter().append("path").classed("js-fill",!0),W.exit().remove(),W.attr("d",J+"h"+y+"v6h-"+y+"z").call(function(re){if(re.size())if(P)b.fillGroupStyle(re,c);else{var ae="legendfill-"+V.uid;b.gradient(re,c,ae,o(K),te,"fill")}}),z||G){var Q=_(void 0,V.line,10,5);L=l.minExtend(V,{line:{width:Q}}),E=[l.minExtend(B,{trace:L})]}var ne=Y.select(".legendlines").selectAll("path").data(z||G?[E]:[]);ne.enter().append("path").classed("js-line",!0),ne.exit().remove(),ne.attr("d",J+(G?"l"+y+",0.0001":"h"+y)).call(z?b.lineGroupStyle:function(re){if(re.size()){var ae="legendline-"+V.uid;b.lineGroupStyle(re),b.gradient(re,c,ae,o(K),te,"stroke")}})}).each(function(w){var E,L,C=a(w),P=C.anyFill,z=C.anyLine,G=C.showLine,O=C.showMarker,H=w[0],N=H.trace,B=!O&&!z&&!P&&t.hasText(N);function V(ne,re,ae,ue){var pe=l.nestedProperty(N,ne).get(),ge=l.isArrayOrTypedArray(pe)&&re?re(pe):pe;if(h&&ge&&ue!==void 0&&(ge=ue),ae){if(ge<ae[0])return ae[0];if(ge>ae[1])return ae[1]}return ge}function q(ne){return H._distinct&&H.index&&ne[H.index]?ne[H.index]:ne[0]}if(O||B||G){var te={},K={};if(O){te.mc=V("marker.color",q),te.mx=V("marker.symbol",q),te.mo=V("marker.opacity",l.mean,[.2,1]),te.mlc=V("marker.line.color",q),te.mlw=V("marker.line.width",l.mean,[0,5],2),K.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var J=V("marker.size",l.mean,[2,16],12);te.ms=J,K.marker.size=J}G&&(K.line={width:V("line.width",q,[0,10],5)}),B&&(te.tx="Aa",te.tp=V("textposition",q),te.ts=10,te.tc=V("textfont.color",q),te.tf=V("textfont.family",q)),E=[l.minExtend(H,te)],(L=l.minExtend(N,K)).selectedpoints=null,L.texttemplate=null}var Y=M.select(this).select("g.legendpoints"),W=Y.selectAll("path.scatterpts").data(O?E:[]);W.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),W.exit().remove(),W.call(b.pointStyle,L,c),O&&(E[0].mrc=3);var Q=Y.selectAll("g.pointtext").data(B?E:[]);Q.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),Q.exit().remove(),Q.selectAll("text").call(b.textPointStyle,L,c)}).each(function(w){var E=w[0].trace,L=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[w,w]:[]);L.enter().append("path").classed("legendcandle",!0).attr("d",function(C,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var z=M.select(this),G=E[P?"increasing":"decreasing"],O=_(void 0,G.line,5,2);z.style("stroke-width",O+"px").call(d.fill,G.fillcolor),O&&d.stroke(z,G.line.color)})}).each(function(w){var E=w[0].trace,L=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[w,w]:[]);L.enter().append("path").classed("legendohlc",!0).attr("d",function(C,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var z=M.select(this),G=E[P?"increasing":"decreasing"],O=_(void 0,G.line,5,2);z.style("fill","none").call(b.dashLine,G.line.dash,O),O&&d.stroke(z,G.line.color)})})}},42068:function(ee,D,e){e(93348),ee.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(ee,D,e){var M=e(73972),k=e(74875),l=e(41675),T=e(24255),b=e(34031).eraseActiveShape,d=e(71828),s=d._,t=ee.exports={};function i(g,h){var y,v,m=h.currentTarget,_=m.getAttribute("data-attr"),f=m.getAttribute("data-val")||!0,S=g._fullLayout,w={},E=l.list(g,null,!0),L=S._cartesianSpikesEnabled;if(_==="zoom"){var C,P=f==="in"?.5:2,z=(1+P)/2,G=(1-P)/2;for(v=0;v<E.length;v++)if(!(y=E[v]).fixedrange)if(C=y._name,f==="auto")w[C+".autorange"]=!0;else if(f==="reset")y._rangeInitial0===void 0&&y._rangeInitial1===void 0?w[C+".autorange"]=!0:y._rangeInitial0===void 0?(w[C+".autorange"]=y._autorangeInitial,w[C+".range"]=[null,y._rangeInitial1]):y._rangeInitial1===void 0?(w[C+".range"]=[y._rangeInitial0,null],w[C+".autorange"]=y._autorangeInitial):w[C+".range"]=[y._rangeInitial0,y._rangeInitial1],y._showSpikeInitial!==void 0&&(w[C+".showspikes"]=y._showSpikeInitial,L!=="on"||y._showSpikeInitial||(L="off"));else{var O=[y.r2l(y.range[0]),y.r2l(y.range[1])],H=[z*O[0]+G*O[1],z*O[1]+G*O[0]];w[C+".range[0]"]=y.l2r(H[0]),w[C+".range[1]"]=y.l2r(H[1])}}else _!=="hovermode"||f!=="x"&&f!=="y"||(f=S._isHoriz?"y":"x",m.setAttribute("data-val",f)),w[_]=f;S._cartesianSpikesEnabled=L,M.call("_guiRelayout",g,w)}function r(g,h){for(var y=h.currentTarget,v=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,_=g._fullLayout._subplots.gl3d||[],f={},S=v.split("."),w=0;w<_.length;w++)f[_[w]+"."+S[1]]=m;var E=m==="pan"?m:"zoom";f.dragmode=E,M.call("_guiRelayout",g,f)}function n(g,h){for(var y=h.currentTarget.getAttribute("data-attr"),v=y==="resetLastSave",m=y==="resetDefault",_=g._fullLayout,f=_._subplots.gl3d||[],S={},w=0;w<f.length;w++){var E,L=f[w],C=L+".camera",P=L+".aspectratio",z=L+".aspectmode",G=_[L]._scene;v?(S[C+".up"]=G.viewInitial.up,S[C+".eye"]=G.viewInitial.eye,S[C+".center"]=G.viewInitial.center,E=!0):m&&(S[C+".up"]=null,S[C+".eye"]=null,S[C+".center"]=null,E=!0),E&&(S[P+".x"]=G.viewInitial.aspectratio.x,S[P+".y"]=G.viewInitial.aspectratio.y,S[P+".z"]=G.viewInitial.aspectratio.z,S[z]=G.viewInitial.aspectmode)}M.call("_guiRelayout",g,S)}function o(g,h){var y=h.currentTarget,v=y._previousVal,m=g._fullLayout,_=m._subplots.gl3d||[],f=["xaxis","yaxis","zaxis"],S={},w={};if(v)w=v,y._previousVal=null;else{for(var E=0;E<_.length;E++){var L=_[E],C=m[L],P=L+".hovermode";S[P]=C.hovermode,w[P]=!1;for(var z=0;z<3;z++){var G=f[z],O=L+"."+G+".showspikes";w[O]=!1,S[O]=C[G].showspikes}}y._previousVal=S}return w}function a(g,h){for(var y=h.currentTarget,v=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,_=g._fullLayout,f=_._subplots.geo||[],S=0;S<f.length;S++){var w=f[S],E=_[w];if(v==="zoom"){var L=E.projection.scale,C=m==="in"?2*L:.5*L;M.call("_guiRelayout",g,w+".projection.scale",C)}}v==="reset"&&x(g,"geo")}function u(g){var h=g._fullLayout;return!h.hovermode&&(h._has("cartesian")?h._isHoriz?"y":"x":"closest")}function p(g){var h=u(g);M.call("_guiRelayout",g,"hovermode",h)}function c(g,h){for(var y=h.currentTarget.getAttribute("data-val"),v=g._fullLayout,m=v._subplots.mapbox||[],_={},f=0;f<m.length;f++){var S=m[f],w=v[S].zoom,E=y==="in"?1.05*w:w/1.05;_[S+".zoom"]=E}M.call("_guiRelayout",g,_)}function x(g,h){for(var y=g._fullLayout,v=y._subplots[h]||[],m={},_=0;_<v.length;_++)for(var f=v[_],S=y[f]._subplot.viewInitial,w=Object.keys(S),E=0;E<w.length;E++){var L=w[E];m[f+"."+L]=S[L]}M.call("_guiRelayout",g,m)}t.toImage={name:"toImage",title:function(g){var h=(g._context.toImageButtonOptions||{}).format||"png";return s(g,h==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(g){var h=g._context.toImageButtonOptions,y={format:h.format||"png"};d.notifier(s(g,"Taking snapshot - this may take a few seconds"),"long"),y.format!=="svg"&&d.isIE()&&(d.notifier(s(g,"IE only supports svg.  Changing format to svg."),"long"),y.format="svg"),["filename","width","height","scale"].forEach(function(v){v in h&&(y[v]=h[v])}),M.call("downloadImage",g,y).then(function(v){d.notifier(s(g,"Snapshot succeeded")+" - "+v,"long")}).catch(function(){d.notifier(s(g,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(g){return s(g,"Edit in Chart Studio")},icon:T.disk,click:function(g){k.sendDataToCloud(g)}},t.editInChartStudio={name:"editInChartStudio",title:function(g){return s(g,"Edit in Chart Studio")},icon:T.pencil,click:function(g){k.sendDataToCloud(g)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(g){return s(g,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(g){return s(g,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(g){return s(g,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(g){return s(g,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(g){return s(g,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(g){return s(g,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:i},t.drawline={name:"drawline",title:function(g){return s(g,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:i},t.drawrect={name:"drawrect",title:function(g){return s(g,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(g){return s(g,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(g){return s(g,"Erase active shape")},icon:T.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(g){return s(g,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(g){return s(g,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(g){return s(g,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(g){return s(g,"Compare data on hover")},attr:"hovermode",val:function(g){return g._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(g){return s(g,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(g){return s(g,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(g){return s(g,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(g){return s(g,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(g){return s(g,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(g){return s(g,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(g,h){var y=o(g,h);M.call("_guiRelayout",g,y)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:a},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:a},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(g){return s(g,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:a},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:p},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:p},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:p},t.resetViewSankey={name:"resetSankeyGroup",title:function(g){return s(g,"Reset view")},icon:T.home,click:function(g){for(var h={"node.groups":[],"node.x":[],"node.y":[]},y=0;y<g._fullData.length;y++){var v=g._fullData[y]._viewInitial;h["node.groups"].push(v.node.groups.slice()),h["node.x"].push(v.node.x.slice()),h["node.y"].push(v.node.y.slice())}M.call("restyle",g,h)}},t.toggleHover={name:"toggleHover",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(g,h){var y=o(g,h);y.hovermode=u(g),M.call("_guiRelayout",g,y)}},t.resetViews={name:"resetViews",title:function(g){return s(g,"Reset views")},icon:T.home,click:function(g,h){var y=h.currentTarget;y.setAttribute("data-attr","zoom"),y.setAttribute("data-val","reset"),i(g,h),y.setAttribute("data-attr","resetLastSave"),n(g,h),x(g,"geo"),x(g,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(g){return s(g,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(g){var h=g._fullLayout,y=h._cartesianSpikesEnabled;h._cartesianSpikesEnabled=y==="on"?"off":"on",M.call("_guiRelayout",g,function(v){for(var m=v._fullLayout._cartesianSpikesEnabled==="on",_=l.list(v,null,!0),f={},S=0;S<_.length;S++){var w=_[S];f[w._name+".showspikes"]=!!m||w._showSpikeInitial}return f}(g))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(g){return s(g,"Reset view")},attr:"reset",icon:T.home,click:function(g){x(g,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:c},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:c}},93348:function(ee,D,e){var M=e(26023),k=Object.keys(M),l=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(l),b=[];k.forEach(function(d){(function(s){if(T.indexOf(s._cat||s.name)===-1){var t=s.name,i=(s._cat||s.name).toLowerCase();b.indexOf(t)===-1&&b.push(t),b.indexOf(i)===-1&&b.push(i)}})(M[d])}),b.sort(),ee.exports={DRAW_MODES:l,backButtons:T,foreButtons:b}},35750:function(ee,D,e){var M=e(71828),k=e(7901),l=e(44467),T=e(42068);ee.exports=function(b,d){var s=b.modebar||{},t=l.newContainer(d,"modebar");function i(n,o){return M.coerce(s,t,T,n,o)}i("orientation"),i("bgcolor",k.addOpacity(d.paper_bgcolor,.5));var r=k.contrast(k.rgb(d.modebar.bgcolor));i("color",k.addOpacity(r,.3)),i("activecolor",k.addOpacity(r,.7)),i("uirevision",d.uirevision),i("add"),i("remove")}},64168:function(ee,D,e){ee.exports={moduleType:"component",name:"modebar",layoutAttributes:e(42068),supplyLayoutDefaults:e(35750),manage:e(14192)}},14192:function(ee,D,e){var M=e(41675),k=e(34098),l=e(73972),T=e(23469).isUnifiedHover,b=e(37676),d=e(26023),s=e(93348).DRAW_MODES,t=e(71828).extendDeep;ee.exports=function(i){var r=i._fullLayout,n=i._context,o=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a,u=n.modeBarButtons;a=Array.isArray(u)&&u.length?function(p){for(var c=t([],p),x=0;x<c.length;x++)for(var g=c[x],h=0;h<g.length;h++){var y=g[h];if(typeof y=="string"){if(d[y]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[x][h]=d[y]}}return c}(u):!n.displayModeBar&&n.watermark?[]:function(p){var c=p._fullLayout,x=p._fullData,g=p._context;function h(pe,ge){if(typeof ge=="string"){if(ge.toLowerCase()===pe.toLowerCase())return!0}else{var _e=ge.name,me=ge._cat||ge.name;if(_e===pe||me===pe.toLowerCase())return!0}return!1}var y=c.modebar.add;typeof y=="string"&&(y=[y]);var v=c.modebar.remove;typeof v=="string"&&(v=[v]);var m=g.modeBarButtonsToAdd.concat(y.filter(function(pe){for(var ge=0;ge<g.modeBarButtonsToRemove.length;ge++)if(h(pe,g.modeBarButtonsToRemove[ge]))return!1;return!0})),_=g.modeBarButtonsToRemove.concat(v.filter(function(pe){for(var ge=0;ge<g.modeBarButtonsToAdd.length;ge++)if(h(pe,g.modeBarButtonsToAdd[ge]))return!1;return!0})),f=c._has("cartesian"),S=c._has("gl3d"),w=c._has("geo"),E=c._has("pie"),L=c._has("funnelarea"),C=c._has("gl2d"),P=c._has("ternary"),z=c._has("mapbox"),G=c._has("polar"),O=c._has("smith"),H=c._has("sankey"),N=function(pe){for(var ge=M.list({_fullLayout:pe},null,!0),_e=0;_e<ge.length;_e++)if(!ge[_e].fixedrange)return!1;return!0}(c),B=T(c.hovermode),V=[];function q(pe){if(pe.length){for(var ge=[],_e=0;_e<pe.length;_e++){for(var me=pe[_e],ve=d[me],Oe=ve.name.toLowerCase(),Me=(ve._cat||ve.name).toLowerCase(),Te=!1,se=0;se<_.length;se++){var oe=_[se].toLowerCase();if(oe===Oe||oe===Me){Te=!0;break}}Te||ge.push(d[me])}V.push(ge)}}var te=["toImage"];g.showEditInChartStudio?te.push("editInChartStudio"):g.showSendToCloud&&te.push("sendDataToCloud"),q(te);var K=[],J=[],Y=[],W=[];(f||C||E||L||P)+w+S+z+G+O>1?(J=["toggleHover"],Y=["resetViews"]):w?(K=["zoomInGeo","zoomOutGeo"],J=["hoverClosestGeo"],Y=["resetGeo"]):S?(J=["hoverClosest3d"],Y=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(K=["zoomInMapbox","zoomOutMapbox"],J=["toggleHover"],Y=["resetViewMapbox"]):C?J=["hoverClosestGl2d"]:E?J=["hoverClosestPie"]:H?(J=["hoverClosestCartesian","hoverCompareCartesian"],Y=["resetViewSankey"]):J=["toggleHover"],f&&(J=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(pe){for(var ge=0;ge<pe.length;ge++)if(!l.traceIs(pe[ge],"noHover"))return!1;return!0}(x)||B)&&(J=[]),!f&&!C||N||(K=["zoomIn2d","zoomOut2d","autoScale2d"],Y[0]!=="resetViews"&&(Y=["resetScale2d"])),S?W=["zoom3d","pan3d","orbitRotation","tableRotation"]:(f||C)&&!N||P?W=["zoom2d","pan2d"]:z||w?W=["pan2d"]:G&&(W=["zoom2d"]),function(pe){for(var ge=!1,_e=0;_e<pe.length&&!ge;_e++){var me=pe[_e];me._module&&me._module.selectPoints&&(l.traceIs(me,"scatter-like")?(k.hasMarkers(me)||k.hasText(me))&&(ge=!0):l.traceIs(me,"box-violin")&&me.boxpoints!=="all"&&me.points!=="all"||(ge=!0))}return ge}(x)&&W.push("select2d","lasso2d");var Q=[],ne=function(pe){Q.indexOf(pe)===-1&&J.indexOf(pe)!==-1&&Q.push(pe)};if(Array.isArray(m)){for(var re=[],ae=0;ae<m.length;ae++){var ue=m[ae];typeof ue=="string"?(ue=ue.toLowerCase(),s.indexOf(ue)!==-1?(c._has("mapbox")||c._has("cartesian"))&&W.push(ue):ue==="togglespikelines"?ne("toggleSpikelines"):ue==="togglehover"?ne("toggleHover"):ue==="hovercompare"?ne("hoverCompareCartesian"):ue==="hoverclosest"?(ne("hoverClosestCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie")):ue==="v1hovermode"&&(ne("toggleHover"),ne("hoverClosestCartesian"),ne("hoverCompareCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie"))):re.push(ue)}m=re}return q(W),q(K.concat(Y)),q(Q),function(pe,ge){if(ge.length)if(Array.isArray(ge[0]))for(var _e=0;_e<ge.length;_e++)pe.push(ge[_e]);else pe.push(ge);return pe}(V,m)}(i),o?o.update(i,a):r._modeBar=b(i,a)}else o&&(o.destroy(),delete r._modeBar)}},37676:function(ee,D,e){var M=e(39898),k=e(92770),l=e(71828),T=e(24255),b=e(11506).version,d=new DOMParser;function s(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(i,r){this.graphInfo=i;var n=this.graphInfo._context,o=this.graphInfo._fullLayout,a="modebar-"+o._uid;this.element.setAttribute("id",a),this._uid=a,this.element.className="modebar",n.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),o.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var u=o.modebar,p=n.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(a),l.addRelatedStyleRule(a,p+"#"+a+" .modebar-group","background-color: "+u.bgcolor),l.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+u.color),l.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+u.activecolor),l.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(r),x=this.hasLogo!==n.displaylogo,g=this.locale!==n.locale;if(this.locale=n.locale,(c||x||g)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var h=this.getLogo();n.watermark&&(h.className=h.className+" watermark"),o.modebar.orientation==="v"?this.element.insertBefore(h,this.element.childNodes[0]):this.element.appendChild(h),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var r=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var o=r.createGroup();n.forEach(function(a){var u=a.name;if(!u)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");r.buttonsNames.push(u);var p=r.createButton(a);r.buttonElements.push(p),o.appendChild(p)}),r.element.appendChild(o)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var o=i.title;o===void 0?o=i.name:typeof o=="function"&&(o=o(this.graphInfo)),(o||o===0)&&n.setAttribute("data-title",o),i.attr!==void 0&&n.setAttribute("data-attr",i.attr);var a=i.val;if(a!==void 0&&(typeof a=="function"&&(a=a(this.graphInfo)),n.setAttribute("data-val",a)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(p){i.click(r.graphInfo,p),r.updateActiveButton(p.currentTarget)}),n.setAttribute("data-toggle",i.toggle||!1),i.toggle&&M.select(n).classed("active",!0);var u=i.icon;return typeof u=="function"?n.appendChild(u()):n.appendChild(this.createIcon(u||T.question)),n.setAttribute("data-gravity",i.gravity||"n"),n},t.createIcon=function(i){var r,n=k(i.height)?Number(i.height):i.ascent-i.descent,o="http://www.w3.org/2000/svg";if(i.path){(r=document.createElementNS(o,"svg")).setAttribute("viewBox",[0,0,i.width,n].join(" ")),r.setAttribute("class","icon");var a=document.createElementNS(o,"path");a.setAttribute("d",i.path),i.transform?a.setAttribute("transform",i.transform):i.ascent!==void 0&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),r.appendChild(a)}return i.svg&&(r=d.parseFromString(i.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(i){var r=this.graphInfo._fullLayout,n=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(o){var a=o.getAttribute("data-val")||!0,u=o.getAttribute("data-attr"),p=o.getAttribute("data-toggle")==="true",c=M.select(o);if(p)u===n&&c.classed("active",!c.classed("active"));else{var x=u===null?u:l.nestedProperty(r,u).get();c.classed("active",x===a)}})},t.hasButtons=function(i){var r=this.buttons;if(!r||i.length!==r.length)return!1;for(var n=0;n<i.length;++n){if(i[n].length!==r[n].length)return!1;for(var o=0;o<i[n].length;o++)if(i[n][o].name!==r[n][o].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),i.appendChild(r),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){l.removeElement(this.container.querySelector(".modebar")),l.deleteRelatedStyleRule(this._uid)},ee.exports=function(i,r){var n=i._fullLayout,o=new s({graphInfo:i,container:n._modebardiv.node(),buttons:r});return n._privateplot&&M.select(o.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),o}},37113:function(ee,D,e){var M=e(41940),k=e(22399),l=(0,e(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ee.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(ee){ee.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(ee,D,e){var M=e(71828),k=e(7901),l=e(44467),T=e(85501),b=e(37113),d=e(89573);function s(t,i,r,n){var o=n.calendar;function a(p,c){return M.coerce(t,i,b.buttons,p,c)}if(a("visible")){var u=a("step");u!=="all"&&(!o||o==="gregorian"||u!=="month"&&u!=="year"?a("stepmode"):i.stepmode="backward",a("count")),a("label")}}ee.exports=function(t,i,r,n,o){var a=t.rangeselector||{},u=l.newContainer(i,"rangeselector");function p(g,h){return M.coerce(a,u,b,g,h)}if(p("visible",T(a,u,{name:"buttons",handleItemDefaults:s,calendar:o}).length>0)){var c=function(g,h,y){for(var v=y.filter(function(S){return h[S].anchor===g._id}),m=0,_=0;_<v.length;_++){var f=h[v[_]].domain;f&&(m=Math.max(f[1],m))}return[g.domain[0],m+d.yPad]}(i,r,n);p("x",c[0]),p("y",c[1]),M.noneOrAll(t,i,["x","y"]),p("xanchor"),p("yanchor"),M.coerceFont(p,"font",r.font);var x=p("bgcolor");p("activecolor",k.contrast(x,d.lightAmount,d.darkAmount)),p("bordercolor"),p("borderwidth")}}},21598:function(ee,D,e){var M=e(39898),k=e(73972),l=e(74875),T=e(7901),b=e(91424),d=e(71828),s=d.strTranslate,t=e(63893),i=e(41675),r=e(18783),n=r.LINE_SPACING,o=r.FROM_TL,a=r.FROM_BR,u=e(89573),p=e(70565);function c(h){return h._id}function x(h,y,v){var m=d.ensureSingle(h,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});m.attr({rx:u.rx,ry:u.ry}),m.call(T.stroke,y.bordercolor).call(T.fill,function(_,f){return f._isActive||f._isHovered?_.activecolor:_.bgcolor}(y,v)).style("stroke-width",y.borderwidth+"px")}function g(h,y,v,m){var _,f;d.ensureSingle(h,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(b.font,y.font).text((_=v,f=m._fullLayout._meta,_.label?f?d.templateString(_.label,f):_.label:_.step==="all"?"all":_.count+_.step.charAt(0))).call(function(S){t.convertToTspans(S,m)})}ee.exports=function(h){var y=h._fullLayout._infolayer.selectAll(".rangeselector").data(function(v){for(var m=i.list(v,"x",!0),_=[],f=0;f<m.length;f++){var S=m[f];S.rangeselector&&S.rangeselector.visible&&_.push(S)}return _}(h),c);y.enter().append("g").classed("rangeselector",!0),y.exit().remove(),y.style({cursor:"pointer","pointer-events":"all"}),y.each(function(v){var m=M.select(this),_=v,f=_.rangeselector,S=m.selectAll("g.button").data(d.filterVisible(f.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(w){var E=M.select(this),L=p(_,w);w._isActive=function(C,P,z){if(P.step==="all")return C.autorange===!0;var G=Object.keys(z);return C.range[0]===z[G[0]]&&C.range[1]===z[G[1]]}(_,w,L),E.call(x,f,w),E.call(g,f,w,h),E.on("click",function(){h._dragged||k.call("_guiRelayout",h,L)}),E.on("mouseover",function(){w._isHovered=!0,E.call(x,f,w)}),E.on("mouseout",function(){w._isHovered=!1,E.call(x,f,w)})}),function(w,E,L,C,P){var z=0,G=0,O=L.borderwidth;E.each(function(){var te=M.select(this).select(".selector-text"),K=L.font.size*n,J=Math.max(K*t.lineCount(te),16)+3;G=Math.max(G,J)}),E.each(function(){var te=M.select(this),K=te.select(".selector-rect"),J=te.select(".selector-text"),Y=J.node()&&b.bBox(J.node()).width,W=L.font.size*n,Q=t.lineCount(J),ne=Math.max(Y+10,u.minButtonWidth);te.attr("transform",s(O+z,O)),K.attr({x:0,y:0,width:ne,height:G}),t.positionText(J,ne/2,G/2-(Q-1)*W/2+3),z+=ne+5});var H=w._fullLayout._size,N=H.l+H.w*L.x,B=H.t+H.h*(1-L.y),V="left";d.isRightAnchor(L)&&(N-=z,V="right"),d.isCenterAnchor(L)&&(N-=z/2,V="center");var q="top";d.isBottomAnchor(L)&&(B-=G,q="bottom"),d.isMiddleAnchor(L)&&(B-=G/2,q="middle"),z=Math.ceil(z),G=Math.ceil(G),N=Math.round(N),B=Math.round(B),l.autoMargin(w,C+"-range-selector",{x:L.x,y:L.y,l:z*o[V],r:z*a[V],b:G*a[q],t:G*o[q]}),P.attr("transform",s(N,B))}(h,S,f,_._name,m)})}},70565:function(ee,D,e){var M=e(81041),k=e(71828).titleCase;ee.exports=function(l,T){var b=l._name,d={};if(T.step==="all")d[b+".autorange"]=!0;else{var s=function(t,i){var r,n=t.range,o=new Date(t.r2l(n[1])),a=i.step,u=M["utc"+k(a)],p=i.count;switch(i.stepmode){case"backward":r=t.l2r(+u.offset(o,-p));break;case"todate":var c=u.offset(o,-p);r=t.l2r(+u.ceil(c))}return[r,n[1]]}(l,T);d[b+".range[0]"]=s[0],d[b+".range[1]"]=s[1]}return d}},97218:function(ee,D,e){ee.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(37113)}}},layoutAttributes:e(37113),handleDefaults:e(28674),draw:e(21598)}},75148:function(ee,D,e){var M=e(22399);ee.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(ee,D,e){var M=e(41675).list,k=e(71739).getAutoRange,l=e(73251);ee.exports=function(T){for(var b=M(T,"x",!0),d=0;d<b.length;d++){var s=b[d],t=s[l.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,s))}}},73251:function(ee){ee.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(ee,D,e){var M=e(71828),k=e(44467),l=e(41675),T=e(75148),b=e(47850);ee.exports=function(d,s,t){var i=d[t],r=s[t];if(i.rangeslider||s._requestRangeslider[r._id]){M.isPlainObject(i.rangeslider)||(i.rangeslider={});var n,o,a=i.rangeslider,u=k.newContainer(r,"rangeslider");if(m("visible")){m("bgcolor",s.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!r.isValidRange(a.range)),m("range");var p=s._subplots;if(p)for(var c=p.cartesian.filter(function(f){return f.substr(0,f.indexOf("y"))===l.name2id(t)}).map(function(f){return f.substr(f.indexOf("y"),f.length)}),x=M.simpleMap(c,l.id2name),g=0;g<x.length;g++){var h=x[g];n=a[h]||{},o=k.newContainer(u,h,"yaxis");var y,v=s[h];n.range&&v.isValidRange(n.range)&&(y="fixed"),_("rangemode",y)!=="match"&&_("range",v.range.slice())}u._input=a}}function m(f,S){return M.coerce(a,u,T,f,S)}function _(f,S){return M.coerce(n,o,b,f,S)}}},72413:function(ee,D,e){var M=e(39898),k=e(73972),l=e(74875),T=e(71828),b=T.strTranslate,d=e(91424),s=e(7901),t=e(92998),i=e(93612),r=e(41675),n=e(28569),o=e(6964),a=e(73251);function u(y,v,m,_){var f=T.ensureSingle(y,"rect",a.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),S=_.borderwidth%2==0?_.borderwidth:_.borderwidth-1,w=-_._offsetShift,E=d.crispRound(v,_.borderwidth);f.attr({width:_._width+S,height:_._height+S,transform:b(w,w),"stroke-width":E}).call(s.stroke,_.bordercolor).call(s.fill,_.bgcolor)}function p(y,v,m,_){var f=v._fullLayout;T.ensureSingleById(f._topdefs,"clipPath",_._clipId,function(S){S.append("rect").attr({x:0,y:0})}).select("rect").attr({width:_._width,height:_._height})}function c(y,v,m,_){var f,S=v.calcdata,w=y.selectAll("g."+a.rangePlotClassName).data(m._subplotsWith,T.identity);w.enter().append("g").attr("class",function(E){return a.rangePlotClassName+" "+E}).call(d.setClipUrl,_._clipId,v),w.order(),w.exit().remove(),w.each(function(E,L){var C=M.select(this),P=L===0,z=r.getFromId(v,E,"y"),G=z._name,O=_[G],H={data:[],layout:{xaxis:{type:m.type,domain:[0,1],range:_.range.slice(),calendar:m.calendar},width:_._width,height:_._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};m.rangebreaks&&(H.layout.xaxis.rangebreaks=m.rangebreaks),H.layout[G]={type:z.type,domain:[0,1],range:O.rangemode!=="match"?O.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(H.layout[G].rangebreaks=z.rangebreaks),l.supplyDefaults(H);var N=H._fullLayout.xaxis,B=H._fullLayout[G];N.clearCalc(),N.setScale(),B.clearCalc(),B.setScale();var V={id:E,plotgroup:C,xaxis:N,yaxis:B,isRangePlot:!0};P?f=V:(V.mainplot="xy",V.mainplotinfo=f),i.rangePlot(v,V,function(q,te){for(var K=[],J=0;J<q.length;J++){var Y=q[J],W=Y[0].trace;W.xaxis+W.yaxis===te&&K.push(Y)}return K}(S,E))})}function x(y,v,m,_,f){T.ensureSingle(y,"rect",a.maskMinClassName,function(S){S.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call(s.fill,a.maskColor),T.ensureSingle(y,"rect",a.maskMaxClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call(s.fill,a.maskColor),f.rangemode!=="match"&&(T.ensureSingle(y,"rect",a.maskMinOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).call(s.fill,a.maskOppAxisColor),T.ensureSingle(y,"rect",a.maskMaxOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).style("border-top",a.maskOppBorder).call(s.fill,a.maskOppAxisColor))}function g(y,v,m,_){v._context.staticPlot||T.ensureSingle(y,"rect",a.slideBoxClassName,function(f){f.attr({y:0,cursor:a.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:_._height,fill:a.slideBoxFill})}function h(y,v,m,_){var f=T.ensureSingle(y,"g",a.grabberMinClassName),S=T.ensureSingle(y,"g",a.grabberMaxClassName),w={x:0,width:a.handleWidth,rx:a.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":a.handleStrokeWidth,"shape-rendering":"crispEdges"},E={y:Math.round(_._height/4),height:Math.round(_._height/2)};T.ensureSingle(f,"rect",a.handleMinClassName,function(C){C.attr(w)}).attr(E),T.ensureSingle(S,"rect",a.handleMaxClassName,function(C){C.attr(w)}).attr(E);var L={width:a.grabAreaWidth,x:0,y:0,fill:a.grabAreaFill,cursor:v._context.staticPlot?void 0:a.grabAreaCursor};T.ensureSingle(f,"rect",a.grabAreaMinClassName,function(C){C.attr(L)}).attr("height",_._height),T.ensureSingle(S,"rect",a.grabAreaMaxClassName,function(C){C.attr(L)}).attr("height",_._height)}ee.exports=function(y){for(var v=y._fullLayout,m=v._rangeSliderData,_=0;_<m.length;_++){var f=m[_][a.name];f._clipId=f._id+"-"+v._uid}var S=v._infolayer.selectAll("g."+a.containerClassName).data(m,function(w){return w._name});S.exit().each(function(w){var E=w[a.name];v._topdefs.select("#"+E._clipId).remove()}).remove(),m.length!==0&&(S.enter().append("g").classed(a.containerClassName,!0).attr("pointer-events","all"),S.each(function(w){var E=M.select(this),L=w[a.name],C=v[r.id2name(w.anchor)],P=L[r.id2name(w.anchor)];if(L.range){var z,G=T.simpleMap(L.range,w.r2l),O=T.simpleMap(w.range,w.r2l);z=O[0]<O[1]?[Math.min(G[0],O[0]),Math.max(G[1],O[1])]:[Math.max(G[0],O[0]),Math.min(G[1],O[1])],L.range=L._input.range=T.simpleMap(z,w.l2r)}w.cleanRange("rangeslider.range");var H=v._size,N=w.domain;L._width=H.w*(N[1]-N[0]);var B=Math.round(H.l+H.w*N[0]),V=Math.round(H.t+H.h*(1-w._counterDomainMin)+(w.side==="bottom"?w._depth:0)+L._offsetShift+a.extraPad);E.attr("transform",b(B,V)),L._rl=T.simpleMap(L.range,w.r2l);var q=L._rl[0],te=L._rl[1],K=te-q;if(L.p2d=function(pe){return pe/L._width*K+q},L.d2p=function(pe){return(pe-q)/K*L._width},w.rangebreaks){var J=w.locateBreaks(q,te);if(J.length){var Y,W,Q=0;for(Y=0;Y<J.length;Y++)Q+=(W=J[Y]).max-W.min;var ne=L._width/(te-q-Q),re=[-ne*q];for(Y=0;Y<J.length;Y++)W=J[Y],re.push(re[re.length-1]-ne*(W.max-W.min));for(L.d2p=function(pe){for(var ge=re[0],_e=0;_e<J.length;_e++){var me=J[_e];if(pe>=me.max)ge=re[_e+1];else if(pe<me.min)break}return ge+ne*pe},Y=0;Y<J.length;Y++)(W=J[Y]).pmin=L.d2p(W.min),W.pmax=L.d2p(W.max);L.p2d=function(pe){for(var ge=re[0],_e=0;_e<J.length;_e++){var me=J[_e];if(pe>=me.pmax)ge=re[_e+1];else if(pe<me.pmin)break}return(pe-ge)/ne}}}if(P.rangemode!=="match"){var ae=C.r2l(P.range[0]),ue=C.r2l(P.range[1])-ae;L.d2pOppAxis=function(pe){return(pe-ae)/ue*L._height}}E.call(u,y,w,L).call(p,y,w,L).call(c,y,w,L).call(x,y,w,L,P).call(g,y,w,L).call(h,y,w,L),function(pe,ge,_e,me){if(!ge._context.staticPlot){var ve=pe.select("rect."+a.slideBoxClassName).node(),Oe=pe.select("rect."+a.grabAreaMinClassName).node(),Me=pe.select("rect."+a.grabAreaMaxClassName).node();pe.on("mousedown",Te),pe.on("touchstart",Te)}function Te(){var se=M.event,oe=se.target,he=se.clientX||se.touches[0].clientX,Ee=he-pe.node().getBoundingClientRect().left,ke=me.d2p(_e._rl[0]),be=me.d2p(_e._rl[1]),Ie=n.coverSlip();function Fe(we){var ye,Ce,Re,ze=+(we.clientX||we.touches[0].clientX)-he;switch(oe){case ve:if(Re="ew-resize",ke+ze>_e._length||be+ze<0)return;ye=ke+ze,Ce=be+ze;break;case Oe:if(Re="col-resize",ke+ze>_e._length)return;ye=ke+ze,Ce=be;break;case Me:if(Re="col-resize",be+ze<0)return;ye=ke,Ce=be+ze;break;default:Re="ew-resize",ye=Ee,Ce=Ee+ze}if(Ce<ye){var He=Ce;Ce=ye,ye=He}me._pixelMin=ye,me._pixelMax=Ce,o(M.select(Ie),Re),function(Ge,Je,ot,Qe){function vt(rt){return ot.l2r(T.constrain(rt,Qe._rl[0],Qe._rl[1]))}var xt=vt(Qe.p2d(Qe._pixelMin)),mt=vt(Qe.p2d(Qe._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",Je,ot._name+".range",[xt,mt])})}(0,ge,_e,me)}function ce(){Ie.removeEventListener("mousemove",Fe),Ie.removeEventListener("mouseup",ce),this.removeEventListener("touchmove",Fe),this.removeEventListener("touchend",ce),T.removeElement(Ie)}this.addEventListener("touchmove",Fe),this.addEventListener("touchend",ce),Ie.addEventListener("mousemove",Fe),Ie.addEventListener("mouseup",ce)}}(E,y,w,L),function(pe,ge,_e,me,ve,Oe){var Me=a.handleWidth/2;function Te(we){return T.constrain(we,0,me._width)}function se(we){return T.constrain(we,0,me._height)}function oe(we){return T.constrain(we,-Me,me._width+Me)}var he=Te(me.d2p(_e._rl[0])),Ee=Te(me.d2p(_e._rl[1]));if(pe.select("rect."+a.slideBoxClassName).attr("x",he).attr("width",Ee-he),pe.select("rect."+a.maskMinClassName).attr("width",he),pe.select("rect."+a.maskMaxClassName).attr("x",Ee).attr("width",me._width-Ee),Oe.rangemode!=="match"){var ke=me._height-se(me.d2pOppAxis(ve._rl[1])),be=me._height-se(me.d2pOppAxis(ve._rl[0]));pe.select("rect."+a.maskMinOppAxisClassName).attr("x",he).attr("height",ke).attr("width",Ee-he),pe.select("rect."+a.maskMaxOppAxisClassName).attr("x",he).attr("y",be).attr("height",me._height-be).attr("width",Ee-he),pe.select("rect."+a.slideBoxClassName).attr("y",ke).attr("height",be-ke)}var Ie=.5,Fe=Math.round(oe(he-Me))-Ie,ce=Math.round(oe(Ee-Me))+Ie;pe.select("g."+a.grabberMinClassName).attr("transform",b(Fe,Ie)),pe.select("g."+a.grabberMaxClassName).attr("transform",b(ce,Ie))}(E,0,w,L,C,P),w.side==="bottom"&&t.draw(y,w._id+"title",{propContainer:w,propName:w._name+".title",placeholder:v._dfltTitle.x,attributes:{x:w._offset+w._length/2,y:V+L._height+L._offsetShift+10+1.5*w.title.font.size,"text-anchor":"middle"}})}))}},549:function(ee,D,e){var M=e(41675),k=e(63893),l=e(73251),T=e(18783).LINE_SPACING,b=l.name;function d(s){var t=s&&s[b];return t&&t.visible}D.isVisible=d,D.makeData=function(s){var t=M.list({_fullLayout:s},"x",!0),i=s.margin,r=[];if(!s._has("gl2d"))for(var n=0;n<t.length;n++){var o=t[n];if(d(o)){r.push(o);var a=o[b];a._id=b+o._id,a._height=(s.height-i.b-i.t)*a.thickness,a._offsetShift=Math.floor(a.borderwidth/2)}}s._rangeSliderData=r},D.autoMarginOpts=function(s,t){var i=s._fullLayout,r=t[b],n=t._id.charAt(0),o=0,a=0;return t.side==="bottom"&&(o=t._depth,t.title.text!==i._dfltTitle[n]&&(a=1.5*t.title.font.size+10+r._offsetShift,a+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+o+Math.max(i.margin.b,a),pad:l.extraPad+2*r._offsetShift}}},13137:function(ee,D,e){var M=e(71828),k=e(75148),l=e(47850),T=e(549);ee.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},k,{yaxis:l})}}},layoutAttributes:e(75148),handleDefaults:e(26377),calcAutorange:e(88443),draw:e(72413),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},47850:function(ee){ee.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(ee,D,e){var M=e(50215),k=e(82196).line,l=e(79952).P,T=e(1426).extendFlat,b=e(30962).overrideAll,d=e(44467).templatedArray;e(24695),ee.exports=b(d("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},M.xref,{}),yref:T({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},l,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(ee){ee.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(ee,D,e){var M=e(71828),k=e(89298),l=e(85501),T=e(8389),b=e(30477);function d(s,t,i){function r(E,L){return M.coerce(s,t,T,E,L)}var n=r("path"),o=r("type",n?"path":"rect")!=="path";o&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var a=["x","y"],u=0;u<2;u++){var p,c,x,g=a[u],h={_fullLayout:i},y=k.coerceRef(s,t,h,g);if((p=k.getFromId(h,y))._selectionIndices.push(t._index),x=b.rangeToShapePosition(p),c=b.shapePositionToRange(p),o){var v=g+"0",m=g+"1",_=s[v],f=s[m];s[v]=c(s[v],!0),s[m]=c(s[m],!0),k.coercePosition(t,h,r,y,v),k.coercePosition(t,h,r,y,m);var S=t[v],w=t[m];S!==void 0&&w!==void 0&&(t[v]=x(S),t[m]=x(w),s[v]=_,s[m]=f)}}o&&M.noneOrAll(s,t,["x0","x1","y0","y1"])}ee.exports=function(s,t){l(s,t,{name:"selections",handleItemDefaults:d});for(var i=t.selections,r=0;r<i.length;r++){var n=i[r];n&&n.path===void 0&&(n.x0!==void 0&&n.x1!==void 0&&n.y0!==void 0&&n.y1!==void 0||(t.selections[r]=null))}}},32485:function(ee,D,e){var M=e(60165).readPaths,k=e(42359),l=e(51873).clearOutlineControllers,T=e(7901),b=e(91424),d=e(44467).arrayEditor,s=e(30477),t=s.getPathString;function i(u){var p=u._fullLayout;for(var c in l(u),p._selectionLayer.selectAll("path").remove(),p._plots){var x=p._plots[c].selectionLayer;x&&x.selectAll("path").remove()}for(var g=0;g<p.selections.length;g++)n(u,g)}function r(u){return u._context.editSelection}function n(u,p){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+p+'"]').remove();var c=s.makeSelectionsOptionsAndPlotinfo(u,p),x=c.options,g=c.plotinfo;x._input&&function(h){var y=t(u,x),v={"data-index":p,"fill-rule":"evenodd",d:y},m=x.opacity,_="rgba(0,0,0,0)",f=x.line.color||T.contrast(u._fullLayout.plot_bgcolor),S=x.line.width,w=x.line.dash;S||(S=5,w="solid");var E=r(u)&&u._fullLayout._activeSelectionIndex===p;E&&(_=u._fullLayout.activeselection.fillcolor,m=u._fullLayout.activeselection.opacity);for(var L=[],C=1;C>=0;C--){var P=h.append("path").attr(v).style("opacity",C?.1:m).call(T.stroke,f).call(T.fill,_).call(b.dashLine,C?"solid":w,C?4+S:S);if(o(P,u,x),E){var z=d(u.layout,"selections",x);P.style({cursor:"move"});var G={element:P.node(),plotinfo:g,gd:u,editHelpers:z,isActiveSelection:!0},O=M(y,u);k(O,P,G)}else P.style("pointer-events",C?"all":"none");L[C]=P}var H=L[0];L[1].node().addEventListener("click",function(){return function(N,B){if(r(N)){var V=+B.node().getAttribute("data-index");if(V>=0){if(V===N._fullLayout._activeSelectionIndex)return void a(N);N._fullLayout._activeSelectionIndex=V,N._fullLayout._deactivateSelection=a,i(N)}}}(u,H)})}(u._fullLayout._selectionLayer)}function o(u,p,c){var x=c.xref+c.yref;b.setClipUrl(u,"clip"+p._fullLayout._uid+x,p)}function a(u){r(u)&&u._fullLayout._activeSelectionIndex>=0&&(l(u),delete u._fullLayout._activeSelectionIndex,i(u))}ee.exports={draw:i,drawOne:n,activateLastSelection:function(u){if(r(u)){var p=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=p,u._fullLayout._deactivateSelection=a,i(u)}}}},53777:function(ee,D,e){var M=e(79952).P,k=e(1426).extendFlat;ee.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(ee){ee.exports=function(D,e,M){M("newselection.mode"),M("newselection.line.width")&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},35855:function(ee,D,e){var M=e(64505).selectMode,k=e(51873).clearOutline,l=e(60165),T=l.readPaths,b=l.writePaths,d=l.fixDatesForPaths;ee.exports=function(s,t){if(s.length){var i=s[0][0];if(i){var r=i.getAttribute("d"),n=t.gd,o=n._fullLayout.newselection,a=t.plotinfo,u=a.xaxis,p=a.yaxis,c=t.isActiveSelection,x=t.dragmode,g=(n.layout||{}).selections||[];if(!M(x)&&c!==void 0){var h=n._fullLayout._activeSelectionIndex;if(h<g.length)switch(n._fullLayout.selections[h].type){case"rect":x="select";break;case"path":x="lasso"}}var y,v=T(r,n,a,c),m={xref:u._id,yref:p._id,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};v.length===1&&(y=v[0]),y&&y.length===5&&x==="select"?(m.type="rect",m.x0=y[0][1],m.y0=y[0][2],m.x1=y[2][1],m.y1=y[2][2]):(m.type="path",u&&p&&d(v,u,p),m.path=b(v),y=null),k(n);for(var _=t.editHelpers,f=(_||{}).modifyItem,S=[],w=0;w<g.length;w++){var E=n._fullLayout.selections[w];if(E){if(S[w]=E._input,c!==void 0&&w===n._fullLayout._activeSelectionIndex){var L=m;switch(E.type){case"rect":f("x0",L.x0),f("x1",L.x1),f("y0",L.y0),f("y1",L.y1);break;case"path":f("path",L.path)}}}else S[w]=E}return c===void 0?(S.push(m),S):_?_.getUpdateObj():{}}}}},75549:function(ee,D,e){var M=e(71828).strTranslate;function k(l,T){switch(l.type){case"log":return l.p2d(T);case"date":return l.p2r(T,0,l.calendar);default:return l.p2r(T)}}ee.exports={p2r:k,r2p:function(l,T){switch(l.type){case"log":return l.d2p(T);case"date":return l.r2p(T,0,l.calendar);default:return l.r2p(T)}},axValue:function(l){var T=l._id.charAt(0)==="y"?1:0;return function(b){return k(l,b[T])}},getTransform:function(l){return M(l.xaxis._offset,l.yaxis._offset)}}},47322:function(ee,D,e){var M=e(32485),k=e(3937);ee.exports={moduleType:"component",name:"selections",layoutAttributes:e(8389),supplyLayoutDefaults:e(59402),supplyDrawNewSelectionDefaults:e(90849),includeBasePlot:e(76325)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},3937:function(ee,D,e){var M=e(52142),k=e(38258),l=e(73972),T=e(91424).dashStyle,b=e(7901),d=e(30211),s=e(23469).makeEventData,t=e(64505),i=t.freeMode,r=t.rectMode,n=t.drawMode,o=t.openMode,a=t.selectMode,u=e(30477),p=e(21459),c=e(42359),x=e(51873).clearOutline,g=e(60165),h=g.handleEllipse,y=g.readPaths,v=e(90551).newShapes,m=e(35855),_=e(32485).activateLastSelection,f=e(71828),S=f.sorterAsc,w=e(61082),E=e(79990),L=e(41675).getFromId,C=e(33306),P=e(61549).redrawReglTraces,z=e(34122),G=z.MINSELECT,O=w.filter,H=w.tester,N=e(75549),B=N.p2r,V=N.axValue,q=N.getTransform;function te(ce){return ce.subplot!==void 0}function K(ce,we,ye,Ce,Re,ze,He){var Ge,Je,ot,Qe,vt,xt,mt,rt,it,Tt=we._hoverdata,Mt=we._fullLayout.clickmode.indexOf("event")>-1,Pt=[];if(function(We){return We&&Array.isArray(We)&&We[0].hoverOnBox!==!0}(Tt)){Q(ce,we,ze);var kt=function(We,at){var et,De,Be=We[0],nt=-1,tt=[];for(De=0;De<at.length;De++)if(et=at[De],Be.fullData._expandedIndex===et.cd[0].trace._expandedIndex){if(Be.hoverOnBox===!0)break;Be.pointNumber!==void 0?nt=Be.pointNumber:Be.binNumber!==void 0&&(nt=Be.binNumber,tt=Be.pointNumbers);break}return{pointNumber:nt,pointNumbers:tt,searchInfo:et}}(Tt,Ge=ae(we,ye,Ce,Re));if(kt.pointNumbers.length>0?function(We,at){var et,De,Be,nt=[];for(Be=0;Be<We.length;Be++)(et=We[Be]).cd[0].trace.selectedpoints&&et.cd[0].trace.selectedpoints.length>0&&nt.push(et);if(nt.length===1&&nt[0]===at.searchInfo&&(De=at.searchInfo.cd[0].trace).selectedpoints.length===at.pointNumbers.length){for(Be=0;Be<at.pointNumbers.length;Be++)if(De.selectedpoints.indexOf(at.pointNumbers[Be])<0)return!1;return!0}return!1}(Ge,kt):function(We){var at,et,De=0;for(et=0;et<We.length;et++)if((at=We[et].cd[0].trace).selectedpoints&&(at.selectedpoints.length>1||(De+=at.selectedpoints.length)>1))return!1;return De===1}(Ge)&&(xt=pe(kt))){for(He&&He.remove(),it=0;it<Ge.length;it++)(Je=Ge[it])._module.selectPoints(Je,!1);ge(we,Ge),ne(ze),Mt&&Fe(we)}else{for(mt=ce.shiftKey&&(xt!==void 0?xt:pe(kt)),ot=function(We,at,et){return{pointNumber:We,searchInfo:at,subtract:!!et}}(kt.pointNumber,kt.searchInfo,mt),Qe=W(ze.selectionDefs.concat([ot])),it=0;it<Ge.length;it++)if(vt=me(Ge[it]._module.selectPoints(Ge[it],Qe),Ge[it]),Pt.length)for(var Ze=0;Ze<vt.length;Ze++)Pt.push(vt[Ze]);else Pt=vt;if(ge(we,Ge,rt={points:Pt}),ot&&ze&&ze.selectionDefs.push(ot),He){var Xe=ze.mergedPolygons,Ve=o(ze.dragmode);c(ve(Xe,Ve),He,ze)}Mt&&Ie(we,rt)}}}function J(ce){return"pointNumber"in ce&&"searchInfo"in ce}function Y(ce){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(we,ye,Ce,Re){var ze=ce.searchInfo.cd[0].trace._expandedIndex;return Re.cd[0].trace._expandedIndex===ze&&Ce===ce.pointNumber},isRect:!1,degenerate:!1,subtract:!!ce.subtract}}function W(ce){if(ce.length){for(var we=[],ye=J(ce[0])?0:ce[0][0][0],Ce=ye,Re=J(ce[0])?0:ce[0][0][1],ze=Re,He=0;He<ce.length;He++)if(J(ce[He]))we.push(Y(ce[He]));else{var Ge=H(ce[He]);Ge.subtract=!!ce[He].subtract,we.push(Ge),ye=Math.min(ye,Ge.xmin),Ce=Math.max(Ce,Ge.xmax),Re=Math.min(Re,Ge.ymin),ze=Math.max(ze,Ge.ymax)}return{xmin:ye,xmax:Ce,ymin:Re,ymax:ze,pts:[],contains:function(Je,ot,Qe,vt){for(var xt=!1,mt=0;mt<we.length;mt++)we[mt].contains(Je,ot,Qe,vt)&&(xt=!we[mt].subtract);return xt},isRect:!1,degenerate:!1}}}function Q(ce,we,ye){var Ce=we._fullLayout,Re=ye.plotinfo,ze=ye.dragmode,He=Ce._lastSelectedSubplot&&Ce._lastSelectedSubplot===Re.id,Ge=(ce.shiftKey||ce.altKey)&&!(n(ze)&&o(ze));He&&Ge&&Re.selection&&Re.selection.selectionDefs&&!ye.selectionDefs?(ye.selectionDefs=Re.selection.selectionDefs,ye.mergedPolygons=Re.selection.mergedPolygons):Ge&&Re.selection||ne(ye),He||(x(we),Ce._lastSelectedSubplot=Re.id)}function ne(ce,we){var ye=ce.dragmode,Ce=ce.plotinfo,Re=ce.gd;(function(vt){return vt._fullLayout._activeShapeIndex>=0})(Re)&&Re._fullLayout._deactivateShape(Re),function(vt){return vt._fullLayout._activeSelectionIndex>=0}(Re)&&Re._fullLayout._deactivateSelection(Re);var ze=Re._fullLayout._zoomlayer,He=n(ye),Ge=a(ye);if(He||Ge){var Je,ot,Qe=ze.selectAll(".select-outline-"+Ce.id);Qe&&Re._fullLayout._outlining&&(He&&(Je=v(Qe,ce)),Je&&l.call("_guiRelayout",Re,{shapes:Je}),Ge&&!te(ce)&&(ot=m(Qe,ce)),ot&&(Re._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",Re,{selections:ot}).then(function(){we&&_(Re)})),Re._fullLayout._outlining=!1)}Ce.selection={},Ce.selection.selectionDefs=ce.selectionDefs=[],Ce.selection.mergedPolygons=ce.mergedPolygons=[]}function re(ce){return ce._id}function ae(ce,we,ye,Ce){if(!ce.calcdata)return[];var Re,ze,He,Ge=[],Je=we.map(re),ot=ye.map(re);for(He=0;He<ce.calcdata.length;He++)if((ze=(Re=ce.calcdata[He])[0].trace).visible===!0&&ze._module&&ze._module.selectPoints)if(!te({subplot:Ce})||ze.subplot!==Ce&&ze.geo!==Ce)if(ze.type==="splom"){if(ze._xaxes[Je[0]]&&ze._yaxes[ot[0]]){var Qe=ue(ze._module,Re,we[0],ye[0]);Qe.scene=ce._fullLayout._splomScenes[ze.uid],Ge.push(Qe)}}else if(ze.type==="sankey"){var vt=ue(ze._module,Re,we[0],ye[0]);Ge.push(vt)}else{if(Je.indexOf(ze.xaxis)===-1||ot.indexOf(ze.yaxis)===-1)continue;Ge.push(ue(ze._module,Re,L(ce,ze.xaxis),L(ce,ze.yaxis)))}else Ge.push(ue(ze._module,Re,we[0],ye[0]));return Ge}function ue(ce,we,ye,Ce){return{_module:ce,cd:we,xaxis:ye,yaxis:Ce}}function pe(ce){var we=ce.searchInfo.cd[0].trace,ye=ce.pointNumber,Ce=ce.pointNumbers,Re=Ce.length>0?Ce[0]:ye;return!!we.selectedpoints&&we.selectedpoints.indexOf(Re)>-1}function ge(ce,we,ye){var Ce,Re;for(Ce=0;Ce<we.length;Ce++){var ze=we[Ce].cd[0].trace._fullInput,He=ce._fullLayout._tracePreGUI[ze.uid]||{};He.selectedpoints===void 0&&(He.selectedpoints=ze._input.selectedpoints||null)}if(ye){var Ge=ye.points||[];for(Ce=0;Ce<we.length;Ce++)(Re=we[Ce].cd[0].trace)._input.selectedpoints=Re._fullInput.selectedpoints=[],Re._fullInput!==Re&&(Re.selectedpoints=[]);for(var Je=0;Je<Ge.length;Je++){var ot=Ge[Je],Qe=ot.data,vt=ot.fullData,xt=ot.pointIndex,mt=ot.pointIndices;mt?([].push.apply(Qe.selectedpoints,mt),Re._fullInput!==Re&&[].push.apply(vt.selectedpoints,mt)):(Qe.selectedpoints.push(xt),Re._fullInput!==Re&&vt.selectedpoints.push(xt))}}else for(Ce=0;Ce<we.length;Ce++)delete(Re=we[Ce].cd[0].trace).selectedpoints,delete Re._input.selectedpoints,Re._fullInput!==Re&&delete Re._fullInput.selectedpoints;(function(rt,it){for(var Tt=!1,Mt=0;Mt<it.length;Mt++){var Pt=it[Mt],kt=Pt.cd;l.traceIs(kt[0].trace,"regl")&&(Tt=!0);var Ze=Pt._module,Xe=Ze.styleOnSelect||Ze.style;Xe&&(Xe(rt,kt,kt[0].node3),kt[0].nodeRangePlot3&&Xe(rt,kt,kt[0].nodeRangePlot3))}Tt&&(C(rt),P(rt))})(ce,we)}function _e(ce,we,ye){for(var Ce=(ye?M.difference:M.union)({regions:ce},{regions:[we]}).regions.reverse(),Re=0;Re<Ce.length;Re++){var ze=Ce[Re];ze.subtract=he(ze,Ce.slice(0,Re))}return Ce}function me(ce,we){if(Array.isArray(ce))for(var ye=we.cd,Ce=we.cd[0].trace,Re=0;Re<ce.length;Re++)ce[Re]=s(ce[Re],Ce,ye);return ce}function ve(ce,we){for(var ye=[],Ce=0;Ce<ce.length;Ce++){ye[Ce]=[];for(var Re=0;Re<ce[Ce].length;Re++){ye[Ce][Re]=[],ye[Ce][Re][0]=Re?"L":"M";for(var ze=0;ze<ce[Ce][Re].length;ze++)ye[Ce][Re].push(ce[Ce][Re][ze])}we||ye[Ce].push(["Z",ye[Ce][0][1],ye[Ce][0][2]])}return ye}function Oe(ce,we){for(var ye,Ce,Re=[],ze=[],He=0;He<we.length;He++){var Ge=we[He];Ce=Ge._module.selectPoints(Ge,ce),ze.push(Ce),ye=me(Ce,Ge),Re=Re.concat(ye)}return Re}function Me(ce,we,ye,Ce,Re){var ze,He,Ge,Je=!!Ce;Re&&(ze=Re.plotinfo,He=Re.xaxes[0]._id,Ge=Re.yaxes[0]._id);var ot=[],Qe=[],vt=oe(ce),xt=ce._fullLayout;if(ze){var mt=xt._zoomlayer,rt=xt.dragmode,it=n(rt),Tt=a(rt);if(it||Tt){var Mt=L(ce,He,"x"),Pt=L(ce,Ge,"y");if(Mt&&Pt){var kt=mt.selectAll(".select-outline-"+ze.id);if(kt&&ce._fullLayout._outlining&&kt.length){for(var Ze=kt[0][0].getAttribute("d"),Xe=y(Ze,ce,ze),Ve=[],We=0;We<Xe.length;We++){for(var at=Xe[We],et=[],De=0;De<at.length;De++)et.push([Ee(Mt,at[De][1]),Ee(Pt,at[De][2])]);et.xref=He,et.yref=Ge,et.subtract=he(et,Ve),Ve.push(et)}vt=vt.concat(Ve)}}}}var Be=He&&Ge?[He+Ge]:xt._subplots.cartesian;(function(yn){var Sn=yn.calcdata;if(Sn)for(var pn=0;pn<Sn.length;pn++){var Cn=Sn[pn][0].trace,Hn=yn._fullLayout._splomScenes;if(Hn){var Qn=Hn[Cn.uid];Qn&&(Qn.selectBatch=[])}}})(ce);for(var nt={},tt=0;tt<Be.length;tt++){var dt=Be[tt],ht=dt.indexOf("y"),gt=dt.slice(0,ht),ut=dt.slice(ht),wt=He&&Ge?ye:void 0;if(wt=se(vt,gt,ut,wt)){var ct=Ce;if(!Je){var ft=L(ce,gt,"x"),bt=L(ce,ut,"y");ct=ae(ce,[ft],[bt],dt);for(var It=0;It<ct.length;It++){var Dt=ct[It],Nt=Dt.cd[0],Qt=Nt.trace;if(Dt._module.name==="scattergl"&&!Nt.t.xpx){var jt=Qt.x,Ut=Qt.y,Xt=Qt._length;Nt.t.xpx=[],Nt.t.ypx=[];for(var gn=0;gn<Xt;gn++)Nt.t.xpx[gn]=ft.c2p(jt[gn]),Nt.t.ypx[gn]=bt.c2p(Ut[gn])}Dt._module.name==="splom"&&(nt[Qt.uid]||(nt[Qt.uid]=!0))}}var Mn=Oe(wt,ct);ot=ot.concat(Mn),Qe=Qe.concat(ct)}}var cn={points:ot};ge(ce,Qe,cn);var qt=xt.clickmode.indexOf("event")>-1&&we;if(!ze&&we){var nn=oe(ce,!0);if(nn.length){var Kt=nn[0].xref,sn=nn[0].yref;if(Kt&&sn){var hn=ke(nn);be([L(ce,Kt,"x"),L(ce,sn,"y")])(cn,hn)}}ce._fullLayout._noEmitSelectedAtStart?ce._fullLayout._noEmitSelectedAtStart=!1:qt&&Ie(ce,cn),xt._reselect=!1}if(!ze&&xt._deselect){var bn=xt._deselect;(function(yn,Sn,pn){for(var Cn=0;Cn<pn.length;Cn++){var Hn=pn[Cn];if(Hn.xaxis&&Hn.xaxis._id===yn&&Hn.yaxis&&Hn.yaxis._id===Sn)return!0}return!1})(He=bn.xref,Ge=bn.yref,Qe)||Te(ce,He,Ge,Ce),qt&&(cn.points.length?Ie(ce,cn):Fe(ce)),xt._deselect=!1}return{eventData:cn,selectionTesters:ye}}function Te(ce,we,ye,Ce){Ce=ae(ce,[L(ce,we,"x")],[L(ce,ye,"y")],we+ye);for(var Re=0;Re<Ce.length;Re++){var ze=Ce[Re];ze._module.selectPoints(ze,!1)}ge(ce,Ce)}function se(ce,we,ye,Ce){for(var Re,ze=0;ze<ce.length;ze++){var He=ce[ze];we===He.xref&&ye===He.yref&&(Re?Ce=W(Re=_e(Re,He,!!He.subtract)):(Re=[He],Ce=H(He)))}return Ce}function oe(ce,we){for(var ye=[],Ce=ce._fullLayout,Re=Ce.selections,ze=Re.length,He=0;He<ze;He++)if(!we||He===Ce._activeSelectionIndex){var Ge=Re[He];if(Ge){var Je,ot,Qe,vt,xt,mt=Ge.xref,rt=Ge.yref,it=L(ce,mt,"x"),Tt=L(ce,rt,"y");if(Ge.type==="rect"){xt=[];var Mt=Ee(it,Ge.x0),Pt=Ee(it,Ge.x1),kt=Ee(Tt,Ge.y0),Ze=Ee(Tt,Ge.y1);xt=[[Mt,kt],[Mt,Ze],[Pt,Ze],[Pt,kt]],Je=Math.min(Mt,Pt),ot=Math.max(Mt,Pt),Qe=Math.min(kt,Ze),vt=Math.max(kt,Ze),xt.xmin=Je,xt.xmax=ot,xt.ymin=Qe,xt.ymax=vt,xt.xref=mt,xt.yref=rt,xt.subtract=!1,xt.isRect=!0,ye.push(xt)}else if(Ge.type==="path")for(var Xe=Ge.path.split("Z"),Ve=[],We=0;We<Xe.length;We++){var at=Xe[We];if(at){at+="Z";var et=u.extractPathCoords(at,p.paramIsX,"raw"),De=u.extractPathCoords(at,p.paramIsY,"raw");Je=1/0,ot=-1/0,Qe=1/0,vt=-1/0,xt=[];for(var Be=0;Be<et.length;Be++){var nt=Ee(it,et[Be]),tt=Ee(Tt,De[Be]);xt.push([nt,tt]),Je=Math.min(nt,Je),ot=Math.max(nt,ot),Qe=Math.min(tt,Qe),vt=Math.max(tt,vt)}xt.xmin=Je,xt.xmax=ot,xt.ymin=Qe,xt.ymax=vt,xt.xref=mt,xt.yref=rt,xt.subtract=he(xt,Ve),Ve.push(xt),ye.push(xt)}}}}return ye}function he(ce,we){for(var ye=!1,Ce=0;Ce<we.length;Ce++)for(var Re=we[Ce],ze=0;ze<ce.length;ze++)if(k(ce[ze],Re)){ye=!ye;break}return ye}function Ee(ce,we){return ce.type==="date"&&(we=we.replace("_"," ")),ce.type==="log"?ce.c2p(we):ce.r2p(we,null,ce.calendar)}function ke(ce){for(var we=ce.length,ye=[],Ce=0;Ce<we;Ce++){var Re=ce[Ce];ye=(ye=ye.concat(Re)).concat([Re[0]])}return(ze=ye).isRect=ze.length===5&&ze[0][0]===ze[4][0]&&ze[0][1]===ze[4][1]&&ze[0][0]===ze[1][0]&&ze[2][0]===ze[3][0]&&ze[0][1]===ze[3][1]&&ze[1][1]===ze[2][1]||ze[0][1]===ze[1][1]&&ze[2][1]===ze[3][1]&&ze[0][0]===ze[3][0]&&ze[1][0]===ze[2][0],ze.isRect&&(ze.xmin=Math.min(ze[0][0],ze[2][0]),ze.xmax=Math.max(ze[0][0],ze[2][0]),ze.ymin=Math.min(ze[0][1],ze[2][1]),ze.ymax=Math.max(ze[0][1],ze[2][1])),ze;var ze}function be(ce){return function(we,ye){for(var Ce,Re,ze=0;ze<ce.length;ze++){var He=ce[ze],Ge=He._id,Je=Ge.charAt(0);if(ye.isRect){Ce||(Ce={});var ot=ye[Je+"min"],Qe=ye[Je+"max"];ot!==void 0&&Qe!==void 0&&(Ce[Ge]=[B(He,ot),B(He,Qe)].sort(S))}else Re||(Re={}),Re[Ge]=ye.map(V(He))}Ce&&(we.range=Ce),Re&&(we.lassoPoints=Re)}}function Ie(ce,we){we&&(we.selections=(ce.layout||{}).selections||[]),ce.emit("plotly_selected",we)}function Fe(ce){ce.emit("plotly_deselect",null)}ee.exports={reselect:Me,prepSelect:function(ce,we,ye,Ce,Re){var ze=!te(Ce),He=i(Re),Ge=r(Re),Je=o(Re),ot=n(Re),Qe=a(Re),vt=Re==="drawcircle",xt=Re==="drawline"||vt,mt=Ce.gd,rt=mt._fullLayout,it=Qe&&rt.newselection.mode==="immediate"&&ze,Tt=rt._zoomlayer,Mt=Ce.element.getBoundingClientRect(),Pt=Ce.plotinfo,kt=q(Pt),Ze=we-Mt.left,Xe=ye-Mt.top;rt._calcInverseTransform(mt);var Ve=f.apply3DTransform(rt._invTransform)(Ze,Xe);Ze=Ve[0],Xe=Ve[1];var We,at,et,De,Be,nt,tt,dt=rt._invScaleX,ht=rt._invScaleY,gt=Ze,ut=Xe,wt="M"+Ze+","+Xe,ct=Ce.xaxes[0],ft=Ce.yaxes[0],bt=ct._length,It=ft._length,Dt=ce.altKey&&!(n(Re)&&Je);Q(ce,mt,Ce),He&&(We=O([[Ze,Xe]],z.BENDPX));var Nt=Tt.selectAll("path.select-outline-"+Pt.id).data([1]),Qt=ot?rt.newshape:rt.newselection;ot&&(Ce.hasText=Qt.label.text||Qt.label.texttemplate);var jt=ot&&!Je?Qt.fillcolor:"rgba(0,0,0,0)",Ut=Qt.line.color||(ze?b.contrast(mt._fullLayout.plot_bgcolor):"#7f7f7f");Nt.enter().append("path").attr("class","select-outline select-outline-"+Pt.id).style({opacity:ot?Qt.opacity/2:1,"stroke-dasharray":T(Qt.line.dash,Qt.line.width),"stroke-width":Qt.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,Ut).call(b.fill,jt).attr("fill-rule","evenodd").classed("cursor-move",!!ot).attr("transform",kt).attr("d",wt+"Z");var Xt=Tt.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",kt).attr("d","M0,0Z");if(ot&&Ce.hasText){var gn=Tt.select(".label-temp");gn.empty()&&(gn=Tt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Mn=rt._uid+z.SELECTID,cn=[],qt=ae(mt,Ce.xaxes,Ce.yaxes,Ce.subplot);it&&!ce.shiftKey&&(Ce._clearSubplotSelections=function(){if(ze){var Kt=ct._id,sn=ft._id;Te(mt,Kt,sn,qt);for(var hn=(mt.layout||{}).selections||[],bn=[],yn=!1,Sn=0;Sn<hn.length;Sn++){var pn=rt.selections[Sn];pn.xref!==Kt||pn.yref!==sn?bn.push(hn[Sn]):yn=!0}yn&&(mt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",mt,{selections:bn}))}});var nn=function(Kt){return Kt.plotinfo.fillRangeItems||be(Kt.xaxes.concat(Kt.yaxes))}(Ce);Ce.moveFn=function(Kt,sn){Ce._clearSubplotSelections&&(Ce._clearSubplotSelections(),Ce._clearSubplotSelections=void 0),gt=Math.max(0,Math.min(bt,dt*Kt+Ze)),ut=Math.max(0,Math.min(It,ht*sn+Xe));var hn=Math.abs(gt-Ze),bn=Math.abs(ut-Xe);if(Ge){var yn,Sn,pn;if(Qe){var Cn=rt.selectdirection;switch(yn=Cn==="any"?bn<Math.min(.6*hn,G)?"h":hn<Math.min(.6*bn,G)?"v":"d":Cn){case"h":Sn=vt?It/2:0,pn=It;break;case"v":Sn=vt?bt/2:0,pn=bt}}if(ot)switch(rt.newshape.drawdirection){case"vertical":yn="h",Sn=vt?It/2:0,pn=It;break;case"horizontal":yn="v",Sn=vt?bt/2:0,pn=bt;break;case"ortho":hn<bn?(yn="h",Sn=Xe,pn=ut):(yn="v",Sn=Ze,pn=gt);break;default:yn="d"}yn==="h"?((De=xt?h(vt,[gt,Sn],[gt,pn]):[[Ze,Sn],[Ze,pn],[gt,pn],[gt,Sn]]).xmin=xt?gt:Math.min(Ze,gt),De.xmax=xt?gt:Math.max(Ze,gt),De.ymin=Math.min(Sn,pn),De.ymax=Math.max(Sn,pn),Xt.attr("d","M"+De.xmin+","+(Xe-G)+"h-4v"+2*G+"h4ZM"+(De.xmax-1)+","+(Xe-G)+"h4v"+2*G+"h-4Z")):yn==="v"?((De=xt?h(vt,[Sn,ut],[pn,ut]):[[Sn,Xe],[Sn,ut],[pn,ut],[pn,Xe]]).xmin=Math.min(Sn,pn),De.xmax=Math.max(Sn,pn),De.ymin=xt?ut:Math.min(Xe,ut),De.ymax=xt?ut:Math.max(Xe,ut),Xt.attr("d","M"+(Ze-G)+","+De.ymin+"v-4h"+2*G+"v4ZM"+(Ze-G)+","+(De.ymax-1)+"v4h"+2*G+"v-4Z")):yn==="d"&&((De=xt?h(vt,[Ze,Xe],[gt,ut]):[[Ze,Xe],[Ze,ut],[gt,ut],[gt,Xe]]).xmin=Math.min(Ze,gt),De.xmax=Math.max(Ze,gt),De.ymin=Math.min(Xe,ut),De.ymax=Math.max(Xe,ut),Xt.attr("d","M0,0Z"))}else He&&(We.addPt([gt,ut]),De=We.filtered);if(Ce.selectionDefs&&Ce.selectionDefs.length?(et=_e(Ce.mergedPolygons,De,Dt),De.subtract=Dt,at=W(Ce.selectionDefs.concat([De]))):(et=[De],at=H(De)),c(ve(et,Je),Nt,Ce),Qe){var Hn,Qn=Me(mt,!1),nr=Qn.eventData?Qn.eventData.points.slice():[];Qn=Me(mt,!1,at,qt,Ce),at=Qn.selectionTesters,tt=Qn.eventData,Hn=We?We.filtered:ke(et),E.throttle(Mn,z.SELECTDELAY,function(){for(var Jn=(cn=Oe(at,qt)).slice(),Gn=0;Gn<nr.length;Gn++){for(var lr=nr[Gn],Rt=!1,$t=0;$t<Jn.length;$t++)if(Jn[$t].curveNumber===lr.curveNumber&&Jn[$t].pointNumber===lr.pointNumber){Rt=!0;break}Rt||Jn.push(lr)}Jn.length&&(tt||(tt={}),tt.points=Jn),nn(tt,Hn),function(an,fn){an.emit("plotly_selecting",fn)}(mt,tt)})}},Ce.clickFn=function(Kt,sn){if(Xt.remove(),mt._fullLayout._activeShapeIndex>=0)mt._fullLayout._deactivateShape(mt);else if(!ot){var hn=rt.clickmode;E.done(Mn).then(function(){if(E.clear(Mn),Kt===2){for(Nt.remove(),Be=0;Be<qt.length;Be++)(nt=qt[Be])._module.selectPoints(nt,!1);if(ge(mt,qt),ne(Ce),Fe(mt),qt.length){var bn=qt[0].xaxis,yn=qt[0].yaxis;if(bn&&yn){for(var Sn=[],pn=mt._fullLayout.selections,Cn=0;Cn<pn.length;Cn++){var Hn=pn[Cn];Hn&&(Hn.xref===bn._id&&Hn.yref===yn._id||Sn.push(Hn))}Sn.length<pn.length&&(mt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",mt,{selections:Sn}))}}}else hn.indexOf("select")>-1&&K(sn,mt,Ce.xaxes,Ce.yaxes,Ce.subplot,Ce,Nt),hn==="event"&&Ie(mt,void 0);d.click(mt,sn,Pt.id)}).catch(f.error)}},Ce.doneFn=function(){Xt.remove(),E.done(Mn).then(function(){E.clear(Mn),!it&&De&&Ce.selectionDefs&&(De.subtract=Dt,Ce.selectionDefs.push(De),Ce.mergedPolygons.length=0,[].push.apply(Ce.mergedPolygons,et)),(it||ot)&&ne(Ce,it),Ce.doneFnCompleted&&Ce.doneFnCompleted(cn),Qe&&Ie(mt,tt)}).catch(f.error)}},clearOutline:x,clearSelectionsCache:ne,selectOnClick:K}},89827:function(ee,D,e){var M=e(50215),k=e(41940),l=e(82196).line,T=e(79952).P,b=e(1426).extendFlat,d=e(44467).templatedArray,s=(e(24695),e(9012)),t=e(5386).R,i=e(37281);ee.exports=d("shape",{visible:b({},s.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:b({},s.legend,{editType:"calc+arraydraw"}),legendgroup:b({},s.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:b({},s.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:b({},s.legendrank,{editType:"calc+arraydraw"}),legendwidth:b({},s.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:b({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},l.color,{editType:"arraydraw"}),width:b({},l.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(ee,D,e){var M=e(71828),k=e(89298),l=e(21459),T=e(30477);function b(i){return s(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function d(i){return s(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function s(i,r,n,o,a,u){var p=i/2,c=u;if(r==="pixel"){var x=a?T.extractPathCoords(a,u?l.paramIsY:l.paramIsX):[n,o],g=M.aggNums(Math.max,null,x),h=M.aggNums(Math.min,null,x),y=h<0?Math.abs(h)+p:p,v=g>0?g+p:p;return{ppad:p,ppadplus:c?y:v,ppadminus:c?v:y}}return{ppad:p}}function t(i,r,n,o,a){var u=i.type==="category"||i.type==="multicategory"?i.r2c:i.d2c;if(r!==void 0)return[u(r),u(n)];if(o){var p,c,x,g,h=1/0,y=-1/0,v=o.match(l.segmentRE);for(i.type==="date"&&(u=T.decodeDate(u)),p=0;p<v.length;p++)(c=a[v[p].charAt(0)].drawn)!==void 0&&(!(x=v[p].substr(1).match(l.paramRE))||x.length<c||((g=u(x[c]))<h&&(h=g),g>y&&(y=g)));return y>=h?[h,y]:void 0}}ee.exports=function(i){var r=i._fullLayout,n=M.filterVisible(r.shapes);if(n.length&&i._fullData.length)for(var o=0;o<n.length;o++){var a,u,p=n[o];p._extremes={};var c=k.getRefType(p.xref),x=k.getRefType(p.yref);if(p.xref!=="paper"&&c!=="domain"){var g=p.xsizemode==="pixel"?p.xanchor:p.x0,h=p.xsizemode==="pixel"?p.xanchor:p.x1;(u=t(a=k.getFromId(i,p.xref),g,h,p.path,l.paramIsX))&&(p._extremes[a._id]=k.findExtremes(a,u,b(p)))}if(p.yref!=="paper"&&x!=="domain"){var y=p.ysizemode==="pixel"?p.yanchor:p.y0,v=p.ysizemode==="pixel"?p.yanchor:p.y1;(u=t(a=k.getFromId(i,p.yref),y,v,p.path,l.paramIsY))&&(p._extremes[a._id]=k.findExtremes(a,u,d(p)))}}}},21459:function(ee){ee.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(ee,D,e){var M=e(71828),k=e(89298),l=e(85501),T=e(89827),b=e(30477);function d(s,t,i){function r(N,B){return M.coerce(s,t,T,N,B)}if(t._isShape=!0,r("visible")){r("showlegend")&&(r("legend"),r("legendwidth"),r("legendgroup"),r("legendgrouptitle.text"),M.coerceFont(r,"legendgrouptitle.font"),r("legendrank"));var n=r("path"),o=r("type",n?"path":"rect"),a=o!=="path";a&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var u=r("xsizemode"),p=r("ysizemode"),c=["x","y"],x=0;x<2;x++){var g,h,y,v=c[x],m=v+"anchor",_=v==="x"?u:p,f={_fullLayout:i},S=k.coerceRef(s,t,f,v,void 0,"paper");if(k.getRefType(S)==="range"?((g=k.getFromId(f,S))._shapeIndices.push(t._index),y=b.rangeToShapePosition(g),h=b.shapePositionToRange(g)):h=y=M.identity,a){var w=v+"0",E=v+"1",L=s[w],C=s[E];s[w]=h(s[w],!0),s[E]=h(s[E],!0),_==="pixel"?(r(w,0),r(E,10)):(k.coercePosition(t,f,r,S,w,.25),k.coercePosition(t,f,r,S,E,.75)),t[w]=y(t[w]),t[E]=y(t[E]),s[w]=L,s[E]=C}if(_==="pixel"){var P=s[m];s[m]=h(s[m],!0),k.coercePosition(t,f,r,S,m,.25),t[m]=y(t[m]),s[m]=P}}a&&M.noneOrAll(s,t,["x0","x1","y0","y1"]);var z,G,O=o==="line";if(a&&(z=r("label.texttemplate")),z||(G=r("label.text")),G||z){r("label.textangle");var H=r("label.textposition",O?"middle":"middle center");r("label.xanchor"),r("label.yanchor",function(N,B){return N?"bottom":B.indexOf("top")!==-1?"top":B.indexOf("bottom")!==-1?"bottom":"middle"}(O,H)),r("label.padding"),M.coerceFont(r,"label.font",i.font)}}}ee.exports=function(s,t){l(s,t,{name:"shapes",handleItemDefaults:d})}},48100:function(ee,D,e){var M=e(71828),k=e(89298),l=e(63893),T=e(91424),b=e(60165).readPaths,d=e(30477),s=d.getPathString,t=e(37281),i=e(18783).FROM_TL;ee.exports=function(r,n,o,a){if(a.selectAll(".shape-label").remove(),o.label.text||o.label.texttemplate){var u;if(o.label.texttemplate){var p={};if(o.type!=="path"){var c=k.getFromId(r,o.xref),x=k.getFromId(r,o.yref);for(var g in t){var h=t[g](o,c,x);h!==void 0&&(p[g]=h)}}u=M.texttemplateStringForShapes(o.label.texttemplate,{},r._fullLayout._d3locale,p)}else u=o.label.text;var y,v,m,_,f={"data-index":n},S=o.label.font,w=a.append("g").attr(f).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(o.path){var E=s(r,o),L=b(E,r);y=1/0,m=1/0,v=-1/0,_=-1/0;for(var C=0;C<L.length;C++)for(var P=0;P<L[C].length;P++)for(var z=L[C][P],G=1;G<z.length;G+=2){var O=z[G],H=z[G+1];y=Math.min(y,O),v=Math.max(v,O),m=Math.min(m,H),_=Math.max(_,H)}}else{var N=k.getFromId(r,o.xref),B=k.getRefType(o.xref),V=k.getFromId(r,o.yref),q=k.getRefType(o.yref),te=d.getDataToPixel(r,N,!1,B),K=d.getDataToPixel(r,V,!0,q);y=te(o.x0),v=te(o.x1),m=K(o.y0),_=K(o.y1)}var J=o.label.textangle;J==="auto"&&(J=o.type==="line"?function(re,ae,ue,pe){var ge,_e;return _e=Math.abs(ue-re),ge=ue>=re?ae-pe:pe-ae,-180/Math.PI*Math.atan2(ge,_e)}(y,m,v,_):0),w.call(function(re){return re.call(T.font,S).attr({}),l.convertToTspans(re,r),re});var Y=function(re,ae,ue,pe,ge,_e,me){var ve,Oe,Me,Te,se=ge.label.textposition,oe=ge.label.textangle,he=ge.label.padding,Ee=ge.type,ke=Math.PI/180*_e,be=Math.sin(ke),Ie=Math.cos(ke),Fe=ge.label.xanchor,ce=ge.label.yanchor;if(Ee==="line"){se==="start"?(ve=re,Oe=ae):se==="end"?(ve=ue,Oe=pe):(ve=(re+ue)/2,Oe=(ae+pe)/2),Fe==="auto"&&(Fe=se==="start"?oe==="auto"?ue>re?"left":ue<re?"right":"center":ue>re?"right":ue<re?"left":"center":se==="end"?oe==="auto"?ue>re?"right":ue<re?"left":"center":ue>re?"left":ue<re?"right":"center":"center");var we={bottom:-1,middle:0,top:1};if(oe==="auto"){var ye=we[ce];Me=-he*be*ye,Te=he*Ie*ye}else Me=he*{left:1,center:0,right:-1}[Fe],Te=he*we[ce];ve+=Me,Oe+=Te}else Me=he+3,se.indexOf("right")!==-1?(ve=Math.max(re,ue)-Me,Fe==="auto"&&(Fe="right")):se.indexOf("left")!==-1?(ve=Math.min(re,ue)+Me,Fe==="auto"&&(Fe="left")):(ve=(re+ue)/2,Fe==="auto"&&(Fe="center")),Oe=se.indexOf("top")!==-1?Math.min(ae,pe):se.indexOf("bottom")!==-1?Math.max(ae,pe):(ae+pe)/2,Te=he,ce==="bottom"?Oe-=Te:ce==="top"&&(Oe+=Te);var Ce=i[ce],Re=ge.label.font.size,ze=me.height;return{textx:ve+(ze*Ce-Re)*be,texty:Oe+-(ze*Ce-Re)*Ie,xanchor:Fe}}(y,m,v,_,o,J,T.bBox(w.node())),W=Y.textx,Q=Y.texty,ne=Y.xanchor;w.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ne],y:Q,x:W,transform:"rotate("+J+","+W+","+Q+")"}).call(l.positionText,W,Q)}}},42359:function(ee,D,e){var M=e(71828).strTranslate,k=e(28569),l=e(64505),T=l.drawMode,b=l.selectMode,d=e(73972),s=e(7901),t=e(89995),i=t.i000,r=t.i090,n=t.i180,o=t.i270,a=e(51873).clearOutlineControllers,u=e(60165),p=u.pointsOnRectangle,c=u.pointsOnEllipse,x=u.writePaths,g=e(90551).newShapes,h=e(90551).createShapeObj,y=e(35855),v=e(48100);function m(_,f){var S,w,E,L=_[f][1],C=_[f][2],P=_.length;return w=_[S=(f+1)%P][1],E=_[S][2],w===L&&E===C&&(w=_[S=(f+2)%P][1],E=_[S][2]),[S,w,E]}ee.exports=function _(f,S,w,E){E||(E=0);var L=w.gd;function C(){_(f,S,w,E++),(c(f[0])||w.hasText)&&P({redrawing:!0})}function P(ge){var _e={};w.isActiveShape!==void 0&&(w.isActiveShape=!1,_e=g(S,w)),w.isActiveSelection!==void 0&&(w.isActiveSelection=!1,_e=y(S,w),L._fullLayout._reselect=!0),Object.keys(_e).length&&d.call((ge||{}).redrawing?"relayout":"_guiRelayout",L,_e)}var z,G,O,H,N,B=L._fullLayout._zoomlayer,V=w.dragmode,q=T(V),te=b(V);if((q||te)&&(L._fullLayout._outlining=!0),a(L),S.attr("d",x(f)),E||!w.isActiveShape&&!w.isActiveSelection||(N=function(ge,_e){for(var me=0;me<_e.length;me++){var ve=_e[me];ge[me]=[];for(var Oe=0;Oe<ve.length;Oe++){ge[me][Oe]=[];for(var Me=0;Me<ve[Oe].length;Me++)ge[me][Oe][Me]=ve[Oe][Me]}}return ge}([],f),function(ge){z=[];for(var _e=0;_e<f.length;_e++){var me=f[_e],ve=p(me),Oe=!ve&&c(me);z[_e]=[];for(var Me=me.length,Te=0;Te<Me;Te++)if(me[Te][0]!=="Z"&&(!Oe||Te===i||Te===r||Te===n||Te===o)){var se,oe=ve&&w.isActiveSelection;oe&&(se=m(me,Te));var he=me[Te][1],Ee=me[Te][2],ke=ge.append(oe?"rect":"circle").attr("data-i",_e).attr("data-j",Te).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(oe){var be=se[1]-he,Ie=se[2]-Ee,Fe=Ie?5:Math.max(Math.min(25,Math.abs(be)-5),5),ce=be?5:Math.max(Math.min(25,Math.abs(Ie)-5),5);ke.classed(Ie?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Fe).attr("height",ce).attr("x",he-Fe/2).attr("y",Ee-ce/2).attr("transform",M(be/2,Ie/2))}else ke.classed("cursor-grab",!0).attr("r",5).attr("cx",he).attr("cy",Ee);z[_e][Te]={element:ke.node(),gd:L,prepFn:Y,doneFn:Q,clickFn:ne},k.init(z[_e][Te])}}}(B.append("g").attr("class","outline-controllers")),function(){G=[],f.length&&(G[0]={element:S[0][0],gd:L,prepFn:ae,doneFn:ue,clickFn:pe},k.init(G[0]))}()),q&&w.hasText){var K=B.select(".label-temp"),J=h(S,w,w.dragmode);v(L,"label-temp",J,K)}function Y(ge){O=+ge.srcElement.getAttribute("data-i"),H=+ge.srcElement.getAttribute("data-j"),z[O][H].moveFn=W}function W(ge,_e){if(f.length){var me=N[O][H][1],ve=N[O][H][2],Oe=f[O],Me=Oe.length;if(p(Oe)){var Te=ge,se=_e;w.isActiveSelection&&(m(Oe,H)[1]===Oe[H][1]?se=0:Te=0);for(var oe=0;oe<Me;oe++)if(oe!==H){var he=Oe[oe];he[1]===Oe[H][1]&&(he[1]=me+Te),he[2]===Oe[H][2]&&(he[2]=ve+se)}if(Oe[H][1]=me+Te,Oe[H][2]=ve+se,!p(Oe))for(var Ee=0;Ee<Me;Ee++)for(var ke=0;ke<Oe[Ee].length;ke++)Oe[Ee][ke]=N[O][Ee][ke]}else Oe[H][1]=me+ge,Oe[H][2]=ve+_e;C()}}function Q(){P()}function ne(ge,_e){if(ge===2){O=+_e.srcElement.getAttribute("data-i"),H=+_e.srcElement.getAttribute("data-j");var me=f[O];p(me)||c(me)||function(){if(f.length&&f[O]&&f[O].length){for(var ve=[],Oe=0;Oe<f[O].length;Oe++)Oe!==H&&ve.push(f[O][Oe]);ve.length>1&&(ve.length!==2||ve[1][0]!=="Z")&&(H===0&&(ve[0][0]="M"),f[O]=ve,C(),P())}}()}}function re(ge,_e){(function(me,ve){if(f.length)for(var Oe=0;Oe<f.length;Oe++)for(var Me=0;Me<f[Oe].length;Me++)for(var Te=0;Te+2<f[Oe][Me].length;Te+=2)f[Oe][Me][Te+1]=N[Oe][Me][Te+1]+me,f[Oe][Me][Te+2]=N[Oe][Me][Te+2]+ve})(ge,_e),C()}function ae(ge){(O=+ge.srcElement.getAttribute("data-i"))||(O=0),G[O].moveFn=re}function ue(){P()}function pe(ge){ge===2&&function(_e){if(b(_e._fullLayout.dragmode)){a(_e);var me=_e._fullLayout._activeSelectionIndex,ve=(_e.layout||{}).selections||[];if(me<ve.length){for(var Oe=[],Me=0;Me<ve.length;Me++)Me!==me&&Oe.push(ve[Me]);delete _e._fullLayout._activeSelectionIndex;var Te=_e._fullLayout.selections[me];_e._fullLayout._deselect={xref:Te.xref,yref:Te.yref},d.call("_guiRelayout",_e,{selections:Oe})}}}(L)}}},34031:function(ee,D,e){var M=e(39898),k=e(73972),l=e(71828),T=e(89298),b=e(60165).readPaths,d=e(42359),s=e(48100),t=e(51873).clearOutlineControllers,i=e(7901),r=e(91424),n=e(44467).arrayEditor,o=e(28569),a=e(6964),u=e(21459),p=e(30477),c=p.getPathString;function x(f){var S=f._fullLayout;for(var w in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[w].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var L=0;L<S.shapes.length;L++)S.shapes[L].visible===!0&&y(f,L)}function g(f){return!!f._fullLayout._outlining}function h(f){return!f._context.edits.shapePosition}function y(f,S){f._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var w=p.makeShapesOptionsAndPlotinfo(f,S),E=w.options,L=w.plotinfo;function C(P){var z=c(f,E),G={"data-index":S,"fill-rule":E.fillrule,d:z},O=E.opacity,H=E.fillcolor,N=E.line.width?E.line.color:"rgba(0,0,0,0)",B=E.line.width,V=E.line.dash;B||E.editable!==!0||(B=5,V="solid");var q=z[z.length-1]!=="Z",te=h(f)&&E.editable&&f._fullLayout._activeShapeIndex===S;te&&(H=q?"rgba(0,0,0,0)":f._fullLayout.activeshape.fillcolor,O=f._fullLayout.activeshape.opacity);var K,J=P.append("g").classed("shape-group",!0).attr({"data-index":S}),Y=J.append("path").attr(G).style("opacity",O).call(i.stroke,N).call(i.fill,H).call(r.dashLine,V,B);if(v(J,f,E),s(f,S,E,J),(te||f._context.edits.shapePosition)&&(K=n(f.layout,"shapes",E)),te){Y.style({cursor:"move"});var W={element:Y.node(),plotinfo:L,gd:f,editHelpers:K,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},Q=b(z,f);d(Q,Y,W)}else f._context.edits.shapePosition?function(ne,re,ae,ue,pe,ge){var _e,me,ve,Oe,Me,Te,se,oe,he,Ee,ke,be,Ie,Fe,ce,we,ye=10,Ce=10,Re=ae.xsizemode==="pixel",ze=ae.ysizemode==="pixel",He=ae.type==="line",Ge=ae.type==="path",Je=ge.modifyItem,ot=M.select(re.node().parentNode),Qe=T.getFromId(ne,ae.xref),vt=T.getRefType(ae.xref),xt=T.getFromId(ne,ae.yref),mt=T.getRefType(ae.yref),rt=p.getDataToPixel(ne,Qe,!1,vt),it=p.getDataToPixel(ne,xt,!0,mt),Tt=p.getPixelToData(ne,Qe,!1,vt),Mt=p.getPixelToData(ne,xt,!0,mt),Pt=He?function(){var et=10,De=Math.max(ae.line.width,et),Be=pe.append("g").attr("data-index",ue).attr("drag-helper",!0);Be.append("path").attr("d",re.attr("d")).style({cursor:"move","stroke-width":De,"stroke-opacity":"0"});var nt={"fill-opacity":"0"},tt=Math.max(De/2,et);return Be.append("circle").attr({"data-line-point":"start-point",cx:Re?rt(ae.xanchor)+ae.x0:rt(ae.x0),cy:ze?it(ae.yanchor)-ae.y0:it(ae.y0),r:tt}).style(nt).classed("cursor-grab",!0),Be.append("circle").attr({"data-line-point":"end-point",cx:Re?rt(ae.xanchor)+ae.x1:rt(ae.x1),cy:ze?it(ae.yanchor)-ae.y1:it(ae.y1),r:tt}).style(nt).classed("cursor-grab",!0),Be}():re,kt={element:Pt.node(),gd:ne,prepFn:function(et){g(ne)||(Re&&(Me=rt(ae.xanchor)),ze&&(Te=it(ae.yanchor)),ae.type==="path"?ce=ae.path:(_e=Re?ae.x0:rt(ae.x0),me=ze?ae.y0:it(ae.y0),ve=Re?ae.x1:rt(ae.x1),Oe=ze?ae.y1:it(ae.y1)),_e<ve?(he=_e,Ie="x0",Ee=ve,Fe="x1"):(he=ve,Ie="x1",Ee=_e,Fe="x0"),!ze&&me<Oe||ze&&me>Oe?(se=me,ke="y0",oe=Oe,be="y1"):(se=Oe,ke="y1",oe=me,be="y0"),Ze(et),We(pe,ae),function(De,Be,nt){var tt=Be.xref,dt=Be.yref,ht=T.getFromId(nt,tt),gt=T.getFromId(nt,dt),ut="";tt==="paper"||ht.autorange||(ut+=tt),dt==="paper"||gt.autorange||(ut+=dt),r.setClipUrl(De,ut?"clip"+nt._fullLayout._uid+ut:null,nt)}(re,ae,ne),kt.moveFn=we==="move"?Xe:Ve,kt.altKey=et.altKey)},doneFn:function(){g(ne)||(a(re),at(pe),v(re,ne,ae),k.call("_guiRelayout",ne,ge.getUpdateObj()))},clickFn:function(){g(ne)||at(pe)}};function Ze(et){if(g(ne))we=null;else if(He)we=et.target.tagName==="path"?"move":et.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var De=kt.element.getBoundingClientRect(),Be=De.right-De.left,nt=De.bottom-De.top,tt=et.clientX-De.left,dt=et.clientY-De.top,ht=!Ge&&Be>ye&&nt>Ce&&!et.shiftKey?o.getCursor(tt/Be,1-dt/nt):"move";a(re,ht),we=ht.split("-")[0]}}function Xe(et,De){if(ae.type==="path"){var Be=function(dt){return dt},nt=Be,tt=Be;Re?Je("xanchor",ae.xanchor=Tt(Me+et)):(nt=function(dt){return Tt(rt(dt)+et)},Qe&&Qe.type==="date"&&(nt=p.encodeDate(nt))),ze?Je("yanchor",ae.yanchor=Mt(Te+De)):(tt=function(dt){return Mt(it(dt)+De)},xt&&xt.type==="date"&&(tt=p.encodeDate(tt))),Je("path",ae.path=m(ce,nt,tt))}else Re?Je("xanchor",ae.xanchor=Tt(Me+et)):(Je("x0",ae.x0=Tt(_e+et)),Je("x1",ae.x1=Tt(ve+et))),ze?Je("yanchor",ae.yanchor=Mt(Te+De)):(Je("y0",ae.y0=Mt(me+De)),Je("y1",ae.y1=Mt(Oe+De)));re.attr("d",c(ne,ae)),We(pe,ae),s(ne,ue,ae,ot)}function Ve(et,De){if(Ge){var Be=function(Ut){return Ut},nt=Be,tt=Be;Re?Je("xanchor",ae.xanchor=Tt(Me+et)):(nt=function(Ut){return Tt(rt(Ut)+et)},Qe&&Qe.type==="date"&&(nt=p.encodeDate(nt))),ze?Je("yanchor",ae.yanchor=Mt(Te+De)):(tt=function(Ut){return Mt(it(Ut)+De)},xt&&xt.type==="date"&&(tt=p.encodeDate(tt))),Je("path",ae.path=m(ce,nt,tt))}else if(He){if(we==="resize-over-start-point"){var dt=_e+et,ht=ze?me-De:me+De;Je("x0",ae.x0=Re?dt:Tt(dt)),Je("y0",ae.y0=ze?ht:Mt(ht))}else if(we==="resize-over-end-point"){var gt=ve+et,ut=ze?Oe-De:Oe+De;Je("x1",ae.x1=Re?gt:Tt(gt)),Je("y1",ae.y1=ze?ut:Mt(ut))}}else{var wt=function(Ut){return we.indexOf(Ut)!==-1},ct=wt("n"),ft=wt("s"),bt=wt("w"),It=wt("e"),Dt=ct?se+De:se,Nt=ft?oe+De:oe,Qt=bt?he+et:he,jt=It?Ee+et:Ee;ze&&(ct&&(Dt=se-De),ft&&(Nt=oe-De)),(!ze&&Nt-Dt>Ce||ze&&Dt-Nt>Ce)&&(Je(ke,ae[ke]=ze?Dt:Mt(Dt)),Je(be,ae[be]=ze?Nt:Mt(Nt))),jt-Qt>ye&&(Je(Ie,ae[Ie]=Re?Qt:Tt(Qt)),Je(Fe,ae[Fe]=Re?jt:Tt(jt)))}re.attr("d",c(ne,ae)),We(pe,ae),s(ne,ue,ae,ot)}function We(et,De){(Re||ze)&&function(){var Be=De.type!=="path",nt=et.selectAll(".visual-cue").data([0]);nt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var tt=rt(Re?De.xanchor:l.midRange(Be?[De.x0,De.x1]:p.extractPathCoords(De.path,u.paramIsX))),dt=it(ze?De.yanchor:l.midRange(Be?[De.y0,De.y1]:p.extractPathCoords(De.path,u.paramIsY)));if(tt=p.roundPositionForSharpStrokeRendering(tt,1),dt=p.roundPositionForSharpStrokeRendering(dt,1),Re&&ze){var ht="M"+(tt-1-1)+","+(dt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";nt.attr("d",ht)}else if(Re){var gt="M"+(tt-1-1)+","+(dt-9-1)+"v18 h2 v-18 Z";nt.attr("d",gt)}else{var ut="M"+(tt-9-1)+","+(dt-1-1)+"h18 v2 h-18 Z";nt.attr("d",ut)}}()}function at(et){et.selectAll(".visual-cue").remove()}o.init(kt),Pt.node().onmousemove=Ze}(f,Y,E,S,P,K):E.editable===!0&&Y.style("pointer-events",q||i.opacity(H)*O<=.5?"stroke":"all");Y.node().addEventListener("click",function(){return function(ne,re){if(h(ne)){var ae=+re.node().getAttribute("data-index");if(ae>=0){if(ae===ne._fullLayout._activeShapeIndex)return void _(ne);ne._fullLayout._activeShapeIndex=ae,ne._fullLayout._deactivateShape=_,x(ne)}}}(f,Y)})}E._input&&E.visible===!0&&(E.layer!=="below"?C(f._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?C(f._fullLayout._shapeLowerLayer):L._hadPlotinfo?C((L.mainplotinfo||L).shapelayer):C(f._fullLayout._shapeLowerLayer))}function v(f,S,w){var E=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(f,E?"clip"+S._fullLayout._uid+E:null,S)}function m(f,S,w){return f.replace(u.segmentRE,function(E){var L=0,C=E.charAt(0),P=u.paramIsX[C],z=u.paramIsY[C],G=u.numParams[C];return C+E.substr(1).replace(u.paramRE,function(O){return L>=G||(P[L]?O=S(O):z[L]&&(O=w(O)),L++),O})})}function _(f){h(f)&&f._fullLayout._activeShapeIndex>=0&&(t(f),delete f._fullLayout._activeShapeIndex,x(f))}ee.exports={draw:x,drawOne:y,eraseActiveShape:function(f){if(h(f)){t(f);var S=f._fullLayout._activeShapeIndex,w=(f.layout||{}).shapes||[];if(S<w.length){for(var E=[],L=0;L<w.length;L++)L!==S&&E.push(w[L]);return delete f._fullLayout._activeShapeIndex,k.call("_guiRelayout",f,{shapes:E})}}},drawLabel:s}},29241:function(ee,D,e){var M=e(30962).overrideAll,k=e(9012),l=e(41940),T=e(79952).P,b=e(1426).extendFlat,d=e(5386).R,s=e(37281);ee.exports=M({newshape:{visible:b({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:b({},k.legend,{}),legendgroup:b({},k.legendgroup,{}),legendgrouptitle:{text:b({},k.legendgrouptitle.text,{}),font:l({})},legendrank:b({},k.legendrank,{}),legendwidth:b({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:b({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:b({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:d({newshape:!0},{keys:Object.keys(s)}),font:l({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function(ee){ee.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(ee,D,e){var M=e(7901),k=e(71828);ee.exports=function(l,T,b){if(b("newshape.visible"),b("newshape.name"),b("newshape.showlegend"),b("newshape.legend"),b("newshape.legendwidth"),b("newshape.legendgroup"),b("newshape.legendgrouptitle.text"),k.coerceFont(b,"newshape.legendgrouptitle.font"),b("newshape.legendrank"),b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")){var d=(l||{}).plot_bgcolor||"#FFF";b("newshape.line.color",M.contrast(d)),b("newshape.line.dash")}var s=l.dragmode==="drawline",t=b("newshape.label.text"),i=b("newshape.label.texttemplate");if(t||i){b("newshape.label.textangle");var r=b("newshape.label.textposition",s?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",function(n,o){return n?"bottom":o.indexOf("top")!==-1?"top":o.indexOf("bottom")!==-1?"bottom":"middle"}(s,r)),b("newshape.label.padding"),k.coerceFont(b,"newshape.label.font",T.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},60165:function(ee,D,e){var M=e(95616),k=e(89995),l=k.CIRCLE_SIDES,T=k.SQRT2,b=e(75549),d=b.p2r,s=b.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function r(o,a){return Math.abs(o-a)<=1e-6}function n(o,a){var u=a[1]-o[1],p=a[2]-o[2];return Math.sqrt(u*u+p*p)}D.writePaths=function(o){var a=o.length;if(!a)return"M0,0Z";for(var u="",p=0;p<a;p++)for(var c=o[p].length,x=0;x<c;x++){var g=o[p][x][0];if(g==="Z")u+="Z";else for(var h=o[p][x].length,y=0;y<h;y++){var v=y;g==="Q"||g==="S"?v=i[y]:g==="C"&&(v=t[y]),u+=o[p][x][v],y>0&&y<h-1&&(u+=",")}}return u},D.readPaths=function(o,a,u,p){var c,x,g,h=M(o),y=[],v=-1,m=0,_=0,f=function(){x=m,g=_};f();for(var S=0;S<h.length;S++){var w,E,L,C,P=[],z=h[S][0],G=z;switch(z){case"M":y[++v]=[],m=+h[S][1],_=+h[S][2],P.push([G,m,_]),f();break;case"Q":case"S":w=+h[S][1],L=+h[S][2],m=+h[S][3],_=+h[S][4],P.push([G,m,_,w,L]);break;case"C":w=+h[S][1],L=+h[S][2],E=+h[S][3],C=+h[S][4],m=+h[S][5],_=+h[S][6],P.push([G,m,_,w,L,E,C]);break;case"T":case"L":m=+h[S][1],_=+h[S][2],P.push([G,m,_]);break;case"H":G="L",m=+h[S][1],P.push([G,m,_]);break;case"V":G="L",_=+h[S][1],P.push([G,m,_]);break;case"A":G="L";var O=+h[S][1],H=+h[S][2];+h[S][4]||(O=-O,H=-H);var N=m-O,B=_;for(c=1;c<=l/2;c++){var V=2*Math.PI*c/l;P.push([G,N+O*Math.cos(V),B+H*Math.sin(V)])}break;case"Z":m===x&&_===g||(m=x,_=g,P.push([G,m,_]))}for(var q=(u||{}).domain,te=a._fullLayout._size,K=u&&u.xsizemode==="pixel",J=u&&u.ysizemode==="pixel",Y=p===!1,W=0;W<P.length;W++){for(c=0;c+2<7;c+=2){var Q=P[W][c+1],ne=P[W][c+2];Q!==void 0&&ne!==void 0&&(m=Q,_=ne,u&&(u.xaxis&&u.xaxis.p2r?(Y&&(Q-=u.xaxis._offset),Q=K?s(u.xaxis,u.xanchor)+Q:d(u.xaxis,Q)):(Y&&(Q-=te.l),q?Q=q.x[0]+Q/te.w:Q/=te.w),u.yaxis&&u.yaxis.p2r?(Y&&(ne-=u.yaxis._offset),ne=J?s(u.yaxis,u.yanchor)-ne:d(u.yaxis,ne)):(Y&&(ne-=te.t),ne=q?q.y[1]-ne/te.h:1-ne/te.h)),P[W][c+1]=Q,P[W][c+2]=ne)}y[v].push(P[W].slice())}}return y},D.pointsOnRectangle=function(o){if(o.length!==5)return!1;for(var a=1;a<3;a++)if(!r(o[0][a]-o[1][a],o[3][a]-o[2][a])||!r(o[0][a]-o[3][a],o[1][a]-o[2][a]))return!1;return!(!r(o[0][1],o[1][1])&&!r(o[0][1],o[3][1])||!(n(o[0],o[1])*n(o[0],o[3])))},D.pointsOnEllipse=function(o){var a=o.length;if(a!==l+1)return!1;a=l;for(var u=0;u<a;u++){var p=(2*a-u)%a,c=(a/2+p)%a,x=(a/2+u)%a;if(!r(n(o[u],o[x]),n(o[p],o[c])))return!1}return!0},D.handleEllipse=function(o,a,u){if(!o)return[a,u];var p=D.ellipseOver({x0:a[0],y0:a[1],x1:u[0],y1:u[1]}),c=(p.x1+p.x0)/2,x=(p.y1+p.y0)/2,g=(p.x1-p.x0)/2,h=(p.y1-p.y0)/2;g||(g=h/=T),h||(h=g/=T);for(var y=[],v=0;v<l;v++){var m=2*v*Math.PI/l;y.push([c+g*Math.cos(m),x+h*Math.sin(m)])}return y},D.ellipseOver=function(o){var a=o.x0,u=o.y0,p=o.x1,c=o.y1,x=p-a,g=c-u,h=((a-=x)+p)/2,y=((u-=g)+c)/2;return{x0:h-(x*=T),y0:y-(g*=T),x1:h+x,y1:y+g}},D.fixDatesForPaths=function(o,a,u){var p=a.type==="date",c=u.type==="date";if(!p&&!c)return o;for(var x=0;x<o.length;x++)for(var g=0;g<o[x].length;g++)for(var h=0;h+2<o[x][g].length;h+=2)p&&(o[x][g][h+1]=o[x][g][h+1].replace(" ","_")),c&&(o[x][g][h+2]=o[x][g][h+2].replace(" ","_"));return o}},90551:function(ee,D,e){var M=e(64505),k=M.drawMode,l=M.openMode,T=e(89995),b=T.i000,d=T.i090,s=T.i180,t=T.i270,i=T.cos45,r=T.sin45,n=e(75549),o=n.p2r,a=n.r2p,u=e(51873).clearOutline,p=e(60165),c=p.readPaths,x=p.writePaths,g=p.ellipseOver,h=p.fixDatesForPaths;function y(v,m,_){var f,S=v[0][0],w=m.gd,E=S.getAttribute("d"),L=w._fullLayout.newshape,C=m.plotinfo,P=m.isActiveShape,z=C.xaxis,G=C.yaxis,O=!!C.domain||!C.xaxis,H=!!C.domain||!C.yaxis,N=l(_),B=c(E,w,C,P),V={editable:!0,visible:L.visible,name:L.name,showlegend:L.showlegend,legend:L.legend,legendwidth:L.legendwidth,legendgroup:L.legendgroup,legendgrouptitle:{text:L.legendgrouptitle.text,font:L.legendgrouptitle.font},legendrank:L.legendrank,label:L.label,xref:O?"paper":z._id,yref:H?"paper":G._id,layer:L.layer,opacity:L.opacity,line:{color:L.line.color,width:L.line.width,dash:L.line.dash}};if(N||(V.fillcolor=L.fillcolor,V.fillrule=L.fillrule),B.length===1&&(f=B[0]),f&&f.length===5&&_==="drawrect")V.type="rect",V.x0=f[0][1],V.y0=f[0][2],V.x1=f[2][1],V.y1=f[2][2];else if(f&&_==="drawline")V.type="line",V.x0=f[0][1],V.y0=f[0][2],V.x1=f[1][1],V.y1=f[1][2];else if(f&&_==="drawcircle"){V.type="circle";var q=f[b][1],te=f[d][1],K=f[s][1],J=f[t][1],Y=f[b][2],W=f[d][2],Q=f[s][2],ne=f[t][2],re=C.xaxis&&(C.xaxis.type==="date"||C.xaxis.type==="log"),ae=C.yaxis&&(C.yaxis.type==="date"||C.yaxis.type==="log");re&&(q=a(C.xaxis,q),te=a(C.xaxis,te),K=a(C.xaxis,K),J=a(C.xaxis,J)),ae&&(Y=a(C.yaxis,Y),W=a(C.yaxis,W),Q=a(C.yaxis,Q),ne=a(C.yaxis,ne));var ue=(te+J)/2,pe=(Y+Q)/2,ge=g({x0:ue,y0:pe,x1:ue+(J-te+K-q)/2*i,y1:pe+(ne-W+Q-Y)/2*r});re&&(ge.x0=o(C.xaxis,ge.x0),ge.x1=o(C.xaxis,ge.x1)),ae&&(ge.y0=o(C.yaxis,ge.y0),ge.y1=o(C.yaxis,ge.y1)),V.x0=ge.x0,V.y0=ge.y0,V.x1=ge.x1,V.y1=ge.y1}else V.type="path",z&&G&&h(B,z,G),V.path=x(B),f=null;return V}ee.exports={newShapes:function(v,m){if(v.length&&v[0][0]){var _=m.gd,f=m.isActiveShape,S=m.dragmode,w=(_.layout||{}).shapes||[];if(!k(S)&&f!==void 0){var E=_._fullLayout._activeShapeIndex;if(E<w.length)switch(_._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var L=w[E].path||"";S=L[L.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var C=y(v,m,S);u(_);for(var P=m.editHelpers,z=(P||{}).modifyItem,G=[],O=0;O<w.length;O++){var H=_._fullLayout.shapes[O];if(G[O]=H._input,f!==void 0&&O===_._fullLayout._activeShapeIndex){var N=C;switch(H.type){case"line":case"rect":case"circle":z("x0",N.x0),z("x1",N.x1),z("y0",N.y0),z("y1",N.y1);break;case"path":z("path",N.path)}}}return f===void 0?(G.push(C),G):P?P.getUpdateObj():{}}},createShapeObj:y}},51873:function(ee){ee.exports={clearOutlineControllers:function(D){var e=D._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(D){var e=D._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),D._fullLayout._outlining=!1}}},30477:function(ee,D,e){var M=e(21459),k=e(71828),l=e(89298);D.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(b){return b}},D.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(b){return b}},D.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},D.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},D.extractPathCoords=function(T,b,d){var s=[];return T.match(M.segmentRE).forEach(function(t){var i=b[t.charAt(0)].drawn;if(i!==void 0){var r=t.substr(1).match(M.paramRE);if(r&&!(r.length<i)){var n=r[i],o=d?n:k.cleanNumber(n);s.push(o)}}}),s},D.getDataToPixel=function(T,b,d,s){var t,i=T._fullLayout._size;if(b)if(s==="domain")t=function(n){return b._length*(d?1-n:n)+b._offset};else{var r=D.shapePositionToRange(b);t=function(n){return b._offset+b.r2p(r(n,!0))},b.type==="date"&&(t=D.decodeDate(t))}else t=d?function(n){return i.t+i.h*(1-n)}:function(n){return i.l+i.w*n};return t},D.getPixelToData=function(T,b,d,s){var t,i=T._fullLayout._size;if(b)if(s==="domain")t=function(n){var o=(n-b._offset)/b._length;return d?1-o:o};else{var r=D.rangeToShapePosition(b);t=function(n){return r(b.p2r(n-b._offset))}}else t=d?function(n){return 1-(n-i.t)/i.h}:function(n){return(n-i.l)/i.w};return t},D.roundPositionForSharpStrokeRendering=function(T,b){var d=Math.round(b%2)===1,s=Math.round(T);return d?s+.5:s},D.makeShapesOptionsAndPlotinfo=function(T,b){var d=T._fullLayout.shapes[b]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&d.xref!=="paper"&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&d.yref!=="paper"&&(s.yaxis=T._fullLayout[d.yref+"axis"])),s.xsizemode=d.xsizemode,s.ysizemode=d.ysizemode,s.xanchor=d.xanchor,s.yanchor=d.yanchor,{options:d,plotinfo:s}},D.makeSelectionsOptionsAndPlotinfo=function(T,b){var d=T._fullLayout.selections[b]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&(s.yaxis=T._fullLayout[d.yref+"axis"])),{options:d,plotinfo:s}},D.getPathString=function(T,b){var d,s,t,i,r,n,o,a,u=b.type,p=l.getRefType(b.xref),c=l.getRefType(b.yref),x=l.getFromId(T,b.xref),g=l.getFromId(T,b.yref),h=T._fullLayout._size;if(x?p==="domain"?s=function(L){return x._offset+x._length*L}:(d=D.shapePositionToRange(x),s=function(L){return x._offset+x.r2p(d(L,!0))}):s=function(L){return h.l+h.w*L},g?c==="domain"?i=function(L){return g._offset+g._length*(1-L)}:(t=D.shapePositionToRange(g),i=function(L){return g._offset+g.r2p(t(L,!0))}):i=function(L){return h.t+h.h*(1-L)},u==="path")return x&&x.type==="date"&&(s=D.decodeDate(s)),g&&g.type==="date"&&(i=D.decodeDate(i)),function(L,C,P){var z=L.path,G=L.xsizemode,O=L.ysizemode,H=L.xanchor,N=L.yanchor;return z.replace(M.segmentRE,function(B){var V=0,q=B.charAt(0),te=M.paramIsX[q],K=M.paramIsY[q],J=M.numParams[q],Y=B.substr(1).replace(M.paramRE,function(W){return te[V]?W=G==="pixel"?C(H)+Number(W):C(W):K[V]&&(W=O==="pixel"?P(N)-Number(W):P(W)),++V>J&&(W="X"),W});return V>J&&(Y=Y.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+B)),q+Y})}(b,s,i);if(b.xsizemode==="pixel"){var y=s(b.xanchor);r=y+b.x0,n=y+b.x1}else r=s(b.x0),n=s(b.x1);if(b.ysizemode==="pixel"){var v=i(b.yanchor);o=v-b.y0,a=v-b.y1}else o=i(b.y0),a=i(b.y1);if(u==="line")return"M"+r+","+o+"L"+n+","+a;if(u==="rect")return"M"+r+","+o+"H"+n+"V"+a+"H"+r+"Z";var m=(r+n)/2,_=(o+a)/2,f=Math.abs(m-r),S=Math.abs(_-o),w="A"+f+","+S,E=m+f+","+_;return"M"+E+w+" 0 1,1 "+m+","+(_-S)+w+" 0 0,1 "+E+"Z"}},89853:function(ee,D,e){var M=e(34031);ee.exports={moduleType:"component",name:"shapes",layoutAttributes:e(89827),supplyLayoutDefaults:e(84726),supplyDrawNewShapeDefaults:e(45547),includeBasePlot:e(76325)("shapes"),calcAutorange:e(5627),draw:M.draw,drawOne:M.drawOne}},37281:function(ee){function D(l,T){return T?T.d2l(l):l}function e(l,T){return T?T.l2d(l):l}function M(l,T){return D(l.x1,T)-D(l.x0,T)}function k(l,T,b){return D(l.y1,b)-D(l.y0,b)}ee.exports={x0:function(l){return l.x0},x1:function(l){return l.x1},y0:function(l){return l.y0},y1:function(l){return l.y1},slope:function(l,T,b){return l.type!=="line"?void 0:k(l,0,b)/M(l,T)},dx:M,dy:k,width:function(l,T){return Math.abs(M(l,T))},height:function(l,T,b){return Math.abs(k(l,0,b))},length:function(l,T,b){return l.type!=="line"?void 0:Math.sqrt(Math.pow(M(l,T),2)+Math.pow(k(l,0,b),2))},xcenter:function(l,T){return e((D(l.x1,T)+D(l.x0,T))/2,T)},ycenter:function(l,T,b){return e((D(l.y1,b)+D(l.y0,b))/2,b)}}},75067:function(ee,D,e){var M=e(41940),k=e(35025),l=e(1426).extendDeepAll,T=e(30962).overrideAll,b=e(85594),d=e(44467).templatedArray,s=e(98292),t=d("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ee.exports=T(d("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:l(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},98292:function(ee){ee.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(ee,D,e){var M=e(71828),k=e(85501),l=e(75067),T=e(98292).name,b=l.steps;function d(t,i,r){function n(c,x){return M.coerce(t,i,l,c,x)}for(var o=k(t,i,{name:"steps",handleItemDefaults:s}),a=0,u=0;u<o.length;u++)o[u].visible&&a++;if(a<2?i.visible=!1:n("visible")){i._stepCount=a;var p=i._visibleSteps=M.filterVisible(o);(o[n("active")]||{}).visible||(i.active=p[0]._index),n("x"),n("y"),M.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),M.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),M.coerceFont(n,"currentvalue.font",i.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function s(t,i){function r(o,a){return M.coerce(t,i,b,o,a)}if(t.method==="skip"||Array.isArray(t.args)?r("visible"):i.visible=!1){r("method"),r("args");var n=r("label","step-"+i._index);r("value",n),r("execute")}}ee.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:d})}},44504:function(ee,D,e){var M=e(39898),k=e(74875),l=e(7901),T=e(91424),b=e(71828),d=b.strTranslate,s=e(63893),t=e(44467).arrayEditor,i=e(98292),r=e(18783),n=r.LINE_SPACING,o=r.FROM_TL,a=r.FROM_BR;function u(P){return i.autoMarginIdRoot+P._index}function p(P){return P._index}function c(P,z){var G=T.tester.selectAll("g."+i.labelGroupClass).data(z._visibleSteps);G.enter().append("g").classed(i.labelGroupClass,!0);var O=0,H=0;G.each(function(W){var Q=h(M.select(this),{step:W},z).node();if(Q){var ne=T.bBox(Q);H=Math.max(H,ne.height),O=Math.max(O,ne.width)}}),G.remove();var N=z._dims={};N.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var B=P._fullLayout._size;N.lx=B.l+B.w*z.x,N.ly=B.t+B.h*(1-z.y),z.lenmode==="fraction"?N.outerLength=Math.round(B.w*z.len):N.outerLength=z.len,N.inputAreaStart=0,N.inputAreaLength=Math.round(N.outerLength-z.pad.l-z.pad.r);var V=(N.inputAreaLength-2*i.stepInset)/(z._stepCount-1),q=O+i.labelPadding;if(N.labelStride=Math.max(1,Math.ceil(q/V)),N.labelHeight=H,N.currentValueMaxWidth=0,N.currentValueHeight=0,N.currentValueTotalHeight=0,N.currentValueMaxLines=1,z.currentvalue.visible){var te=T.tester.append("g");G.each(function(W){var Q=x(te,z,W.label),ne=Q.node()&&T.bBox(Q.node())||{width:0,height:0},re=s.lineCount(Q);N.currentValueMaxWidth=Math.max(N.currentValueMaxWidth,Math.ceil(ne.width)),N.currentValueHeight=Math.max(N.currentValueHeight,Math.ceil(ne.height)),N.currentValueMaxLines=Math.max(N.currentValueMaxLines,re)}),N.currentValueTotalHeight=N.currentValueHeight+z.currentvalue.offset,te.remove()}N.height=N.currentValueTotalHeight+i.tickOffset+z.ticklen+i.labelOffset+N.labelHeight+z.pad.t+z.pad.b;var K="left";b.isRightAnchor(z)&&(N.lx-=N.outerLength,K="right"),b.isCenterAnchor(z)&&(N.lx-=N.outerLength/2,K="center");var J="top";b.isBottomAnchor(z)&&(N.ly-=N.height,J="bottom"),b.isMiddleAnchor(z)&&(N.ly-=N.height/2,J="middle"),N.outerLength=Math.ceil(N.outerLength),N.height=Math.ceil(N.height),N.lx=Math.round(N.lx),N.ly=Math.round(N.ly);var Y={y:z.y,b:N.height*a[J],t:N.height*o[J]};z.lenmode==="fraction"?(Y.l=0,Y.xl=z.x-z.len*o[K],Y.r=0,Y.xr=z.x+z.len*a[K]):(Y.x=z.x,Y.l=N.outerLength*o[K],Y.r=N.outerLength*a[K]),k.autoMargin(P,u(z),Y)}function x(P,z,G){if(z.currentvalue.visible){var O,H,N=z._dims;switch(z.currentvalue.xanchor){case"right":O=N.inputAreaLength-i.currentValueInset-N.currentValueMaxWidth,H="left";break;case"center":O=.5*N.inputAreaLength,H="middle";break;default:O=i.currentValueInset,H="left"}var B=b.ensureSingle(P,"text",i.labelClass,function(Y){Y.attr({"text-anchor":H,"data-notex":1})}),V=z.currentvalue.prefix?z.currentvalue.prefix:"";if(typeof G=="string")V+=G;else{var q=z.steps[z.active].label,te=z._gd._fullLayout._meta;te&&(q=b.templateString(q,te)),V+=q}z.currentvalue.suffix&&(V+=z.currentvalue.suffix),B.call(T.font,z.currentvalue.font).text(V).call(s.convertToTspans,z._gd);var K=s.lineCount(B),J=(N.currentValueMaxLines+1-K)*z.currentvalue.font.size*n;return s.positionText(B,O,J),B}}function g(P,z,G){b.ensureSingle(P,"rect",i.gripRectClass,function(O){O.call(_,z,P,G).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(l.stroke,G.bordercolor).call(l.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px")}function h(P,z,G){var O=b.ensureSingle(P,"text",i.labelClass,function(B){B.attr({"text-anchor":"middle","data-notex":1})}),H=z.step.label,N=G._gd._fullLayout._meta;return N&&(H=b.templateString(H,N)),O.call(T.font,G.font).text(H).call(s.convertToTspans,G._gd),O}function y(P,z){var G=b.ensureSingle(P,"g",i.labelsClass),O=z._dims,H=G.selectAll("g."+i.labelGroupClass).data(O.labelSteps);H.enter().append("g").classed(i.labelGroupClass,!0),H.exit().remove(),H.each(function(N){var B=M.select(this);B.call(h,N,z),T.setTranslate(B,w(z,N.fraction),i.tickOffset+z.ticklen+z.font.size*n+i.labelOffset+O.currentValueTotalHeight)})}function v(P,z,G,O,H){var N=Math.round(O*(G._stepCount-1)),B=G._visibleSteps[N]._index;B!==G.active&&m(P,z,G,B,!0,H)}function m(P,z,G,O,H,N){var B=G.active;G.active=O,t(P.layout,i.name,G).applyUpdate("active",O);var V=G.steps[G.active];z.call(S,G,N),z.call(x,G),P.emit("plotly_sliderchange",{slider:G,step:G.steps[G.active],interaction:H,previousActive:B}),V&&V.method&&H&&(z._nextMethod?(z._nextMethod.step=V,z._nextMethod.doCallback=H,z._nextMethod.doTransition=N):(z._nextMethod={step:V,doCallback:H,doTransition:N},z._nextMethodRaf=window.requestAnimationFrame(function(){var q=z._nextMethod.step;q.method&&(q.execute&&k.executeAPICommand(P,q.method,q.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function _(P,z,G){if(!z._context.staticPlot){var O=G.node(),H=M.select(z);P.on("mousedown",B),P.on("touchstart",B)}function N(){return G.data()[0]}function B(){var V=N();z.emit("plotly_sliderstart",{slider:V});var q=G.select("."+i.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),q.call(l.fill,V.activebgcolor);var te=E(V,M.mouse(O)[0]);function K(){var Y=N(),W=E(Y,M.mouse(O)[0]);v(z,G,Y,W,!1)}function J(){var Y=N();Y._dragging=!1,q.call(l.fill,Y.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),z.emit("plotly_sliderend",{slider:Y,step:Y.steps[Y.active]})}v(z,G,V,te,!0),V._dragging=!0,H.on("mousemove",K),H.on("touchmove",K),H.on("mouseup",J),H.on("touchend",J)}}function f(P,z){var G=P.selectAll("rect."+i.tickRectClass).data(z._visibleSteps),O=z._dims;G.enter().append("rect").classed(i.tickRectClass,!0),G.exit().remove(),G.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),G.each(function(H,N){var B=N%O.labelStride==0,V=M.select(this);V.attr({height:B?z.ticklen:z.minorticklen}).call(l.fill,z.tickcolor),T.setTranslate(V,w(z,N/(z._stepCount-1))-.5*z.tickwidth,(B?i.tickOffset:i.minorTickOffset)+O.currentValueTotalHeight)})}function S(P,z,G){for(var O=P.select("rect."+i.gripRectClass),H=0,N=0;N<z._stepCount;N++)if(z._visibleSteps[N]._index===z.active){H=N;break}var B=w(z,H/(z._stepCount-1));if(!z._invokingCommand){var V=O;G&&z.transition.duration>0&&(V=V.transition().duration(z.transition.duration).ease(z.transition.easing)),V.attr("transform",d(B-.5*i.gripWidth,z._dims.currentValueTotalHeight))}}function w(P,z){var G=P._dims;return G.inputAreaStart+i.stepInset+(G.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,z))}function E(P,z){var G=P._dims;return Math.min(1,Math.max(0,(z-i.stepInset-G.inputAreaStart)/(G.inputAreaLength-2*i.stepInset-2*G.inputAreaStart)))}function L(P,z,G){var O=G._dims,H=b.ensureSingle(P,"rect",i.railTouchRectClass,function(N){N.call(_,z,P,G).style("pointer-events","all")});H.attr({width:O.inputAreaLength,height:Math.max(O.inputAreaWidth,i.tickOffset+G.ticklen+O.labelHeight)}).call(l.fill,G.bgcolor).attr("opacity",0),T.setTranslate(H,0,O.currentValueTotalHeight)}function C(P,z){var G=z._dims,O=G.inputAreaLength-2*i.railInset,H=b.ensureSingle(P,"rect",i.railRectClass);H.attr({width:O,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,z.bordercolor).call(l.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),T.setTranslate(H,i.railInset,.5*(G.inputAreaWidth-i.railWidth)+G.currentValueTotalHeight)}ee.exports=function(P){var z=P._context.staticPlot,G=P._fullLayout,O=function(te,K){for(var J=te[i.name],Y=[],W=0;W<J.length;W++){var Q=J[W];Q.visible&&(Q._gd=K,Y.push(Q))}return Y}(G,P),H=G._infolayer.selectAll("g."+i.containerClassName).data(O.length>0?[0]:[]);function N(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),k.autoMargin(P,u(te))}if(H.enter().append("g").classed(i.containerClassName,!0).style("cursor",z?null:"ew-resize"),H.exit().each(function(){M.select(this).selectAll("g."+i.groupClassName).each(N)}).remove(),O.length!==0){var B=H.selectAll("g."+i.groupClassName).data(O,p);B.enter().append("g").classed(i.groupClassName,!0),B.exit().each(N).remove();for(var V=0;V<O.length;V++){var q=O[V];c(P,q)}B.each(function(te){var K=M.select(this);(function(J){var Y=J._dims;Y.labelSteps=[];for(var W=J._stepCount,Q=0;Q<W;Q+=Y.labelStride)Y.labelSteps.push({fraction:Q/(W-1),step:J._visibleSteps[Q]})})(te),k.manageCommandObserver(P,te,te._visibleSteps,function(J){var Y=K.data()[0];Y.active!==J.index&&(Y._dragging||m(P,K,Y,J.index,!1,!0))}),function(J,Y,W){(W.steps[W.active]||{}).visible||(W.active=W._visibleSteps[0]._index),Y.call(x,W).call(C,W).call(y,W).call(f,W).call(L,J,W).call(g,J,W);var Q=W._dims;T.setTranslate(Y,Q.lx+W.pad.l,Q.ly+W.pad.t),Y.call(S,W,!1),Y.call(x,W)}(P,M.select(this),te)})}}},23243:function(ee,D,e){var M=e(98292);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(75067),supplyLayoutDefaults:e(12343),draw:e(44504)}},92998:function(ee,D,e){var M=e(39898),k=e(92770),l=e(74875),T=e(73972),b=e(71828),d=b.strTranslate,s=e(91424),t=e(7901),i=e(63893),r=e(37822),n=e(18783).OPPOSITE_SIDE,o=/ [XY][0-9]* /;ee.exports={draw:function(a,u,p){var c,x=p.propContainer,g=p.propName,h=p.placeholder,y=p.traceIndex,v=p.avoid||{},m=p.attributes,_=p.transform,f=p.containerGroup,S=a._fullLayout,w=1,E=!1,L=x.title,C=(L&&L.text?L.text:"").trim(),P=L&&L.font?L.font:{},z=P.family,G=P.size,O=P.color;g==="title.text"?c="titleText":g.indexOf("axis")!==-1?c="axisTitleText":g.indexOf(!0)&&(c="colorbarTitleText");var H=a._context.edits[c];C===""?w=0:C.replace(o," % ")===h.replace(o," % ")&&(w=.2,E=!0,H||(C="")),p._meta?C=b.templateString(C,p._meta):S._meta&&(C=b.templateString(C,S._meta));var N,B=C||H;f||(f=b.ensureSingle(S._infolayer,"g","g-"+u),N=S._hColorbarMoveTitle);var V=f.selectAll("text").data(B?[0]:[]);if(V.enter().append("text"),V.text(C).attr("class",u),V.exit().remove(),!B)return f;function q(J){b.syncOrAsync([te,K],J)}function te(J){var Y;return!_&&N&&(_={}),_?(Y="",_.rotate&&(Y+="rotate("+[_.rotate,m.x,m.y]+")"),(_.offset||N)&&(Y+=d(0,(_.offset||0)-(N||0)))):Y=null,J.attr("transform",Y),J.style({"font-family":z,"font-size":M.round(G,2)+"px",fill:t.rgb(O),opacity:w*t.opacity(O),"font-weight":l.fontWeight}).attr(m).call(i.convertToTspans,a),l.previousPromises(a)}function K(J){var Y=M.select(J.node().parentNode);if(v&&v.selection&&v.side&&C){Y.attr("transform",null);var W=n[v.side],Q=v.side==="left"||v.side==="top"?-1:1,ne=k(v.pad)?v.pad:2,re=s.bBox(Y.node()),ae={t:0,b:0,l:0,r:0},ue=a._fullLayout._reservedMargin;for(var pe in ue)for(var ge in ue[pe]){var _e=ue[pe][ge];ae[ge]=Math.max(ae[ge],_e)}var me={left:ae.l,top:ae.t,right:S.width-ae.r,bottom:S.height-ae.b},ve=v.maxShift||Q*(me[v.side]-re[v.side]),Oe=0;if(ve<0)Oe=ve;else{var Me=v.offsetLeft||0,Te=v.offsetTop||0;re.left-=Me,re.right-=Me,re.top-=Te,re.bottom-=Te,v.selection.each(function(){var oe=s.bBox(this);b.bBoxIntersect(re,oe,ne)&&(Oe=Math.max(Oe,Q*(oe[v.side]-re[W])+ne))}),Oe=Math.min(ve,Oe),x._titleScoot=Math.abs(Oe)}if(Oe>0||ve<0){var se={left:[-Oe,0],right:[Oe,0],top:[0,-Oe],bottom:[0,Oe]}[v.side];Y.attr("transform",d(se[0],se[1]))}}}return V.call(q),H&&(C?V.on(".opacity",null):(w=0,E=!0,V.text(h).on("mouseover.opacity",function(){M.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),V.call(i.makeEditable,{gd:a}).on("edit",function(J){y!==void 0?T.call("_guiRestyle",a,g,J,y):T.call("_guiRelayout",a,g,J)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(q)}).on("input",function(J){this.text(J||" ").call(i.positionText,m.x,m.y)})),V.classed("js-placeholder",E),f}}},7163:function(ee,D,e){var M=e(41940),k=e(22399),l=e(1426).extendFlat,T=e(30962).overrideAll,b=e(35025),d=e(44467).templatedArray,s=d("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ee.exports=T(d("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:l(b({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(ee){ee.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},64897:function(ee,D,e){var M=e(71828),k=e(85501),l=e(7163),T=e(75909).name,b=l.buttons;function d(t,i,r){function n(o,a){return M.coerce(t,i,l,o,a)}n("visible",k(t,i,{name:"buttons",handleItemDefaults:s}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),M.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),M.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function s(t,i){function r(n,o){return M.coerce(t,i,b,n,o)}r("visible",t.method==="skip"||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}ee.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:d})}},13689:function(ee,D,e){var M=e(39898),k=e(74875),l=e(7901),T=e(91424),b=e(71828),d=e(63893),s=e(44467).arrayEditor,t=e(18783).LINE_SPACING,i=e(75909),r=e(25849);function n(w){return w._index}function o(w,E){return+w.attr(i.menuIndexAttrName)===E._index}function a(w,E,L,C,P,z,G,O){E.active=G,s(w.layout,i.name,E).applyUpdate("active",G),E.type==="buttons"?p(w,C,null,null,E):E.type==="dropdown"&&(P.attr(i.menuIndexAttrName,"-1"),u(w,C,P,z,E),O||p(w,C,P,z,E))}function u(w,E,L,C,P){var z=b.ensureSingle(E,"g",i.headerClassName,function(V){V.style("pointer-events","all")}),G=P._dims,O=P.active,H=P.buttons[O]||i.blankHeaderOpts,N={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},B={width:G.headerWidth,height:G.headerHeight};z.call(c,P,H,w).call(f,P,N,B),b.ensureSingle(E,"text",i.headerArrowClassName,function(V){V.attr("text-anchor","end").call(T.font,P.font).text(i.arrowSymbol[P.direction])}).attr({x:G.headerWidth-i.arrowOffsetX+P.pad.l,y:G.headerHeight/2+i.textOffsetY+P.pad.t}),z.on("click",function(){L.call(S,String(o(L,P)?-1:P._index)),p(w,E,L,C,P)}),z.on("mouseover",function(){z.call(y)}),z.on("mouseout",function(){z.call(v,P)}),T.setTranslate(E,G.lx,G.ly)}function p(w,E,L,C,P){L||(L=E).attr("pointer-events","all");var z=function(Y){return+Y.attr(i.menuIndexAttrName)==-1}(L)&&P.type!=="buttons"?[]:P.buttons,G=P.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,O=L.selectAll("g."+G).data(b.filterVisible(z)),H=O.enter().append("g").classed(G,!0),N=O.exit();P.type==="dropdown"?(H.attr("opacity","0").transition().attr("opacity","1"),N.transition().attr("opacity","0").remove()):N.remove();var B=0,V=0,q=P._dims,te=["up","down"].indexOf(P.direction)!==-1;P.type==="dropdown"&&(te?V=q.headerHeight+i.gapButtonHeader:B=q.headerWidth+i.gapButtonHeader),P.type==="dropdown"&&P.direction==="up"&&(V=-i.gapButtonHeader+i.gapButton-q.openHeight),P.type==="dropdown"&&P.direction==="left"&&(B=-i.gapButtonHeader+i.gapButton-q.openWidth);var K={x:q.lx+B+P.pad.l,y:q.ly+V+P.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},J={l:K.x+P.borderwidth,t:K.y+P.borderwidth};O.each(function(Y,W){var Q=M.select(this);Q.call(c,P,Y,w).call(f,P,K),Q.on("click",function(){M.event.defaultPrevented||(Y.execute&&(Y.args2&&P.active===W?(a(w,P,0,E,L,C,-1),k.executeAPICommand(w,Y.method,Y.args2)):(a(w,P,0,E,L,C,W),k.executeAPICommand(w,Y.method,Y.args))),w.emit("plotly_buttonclicked",{menu:P,button:Y,active:P.active}))}),Q.on("mouseover",function(){Q.call(y)}),Q.on("mouseout",function(){Q.call(v,P),O.call(h,P)})}),O.call(h,P),te?(J.w=Math.max(q.openWidth,q.headerWidth),J.h=K.y-J.t):(J.w=K.x-J.l,J.h=Math.max(q.openHeight,q.headerHeight)),J.direction=P.direction,C&&(O.size()?function(Y,W,Q,ne,re,ae){var ue,pe,ge,_e=re.direction,me=_e==="up"||_e==="down",ve=re._dims,Oe=re.active;if(me)for(pe=0,ge=0;ge<Oe;ge++)pe+=ve.heights[ge]+i.gapButton;else for(ue=0,ge=0;ge<Oe;ge++)ue+=ve.widths[ge]+i.gapButton;ne.enable(ae,ue,pe),ne.hbar&&ne.hbar.attr("opacity","0").transition().attr("opacity","1"),ne.vbar&&ne.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,P,J):function(Y){var W=!!Y.hbar,Q=!!Y.vbar;W&&Y.hbar.transition().attr("opacity","0").each("end",function(){W=!1,Q||Y.disable()}),Q&&Y.vbar.transition().attr("opacity","0").each("end",function(){Q=!1,W||Y.disable()})}(C))}function c(w,E,L,C){w.call(x,E).call(g,E,L,C)}function x(w,E){b.ensureSingle(w,"rect",i.itemRectClassName,function(L){L.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function g(w,E,L,C){var P=b.ensureSingle(w,"text",i.itemTextClassName,function(O){O.attr({"text-anchor":"start","data-notex":1})}),z=L.label,G=C._fullLayout._meta;G&&(z=b.templateString(z,G)),P.call(T.font,E.font).text(z).call(d.convertToTspans,C)}function h(w,E){var L=E.active;w.each(function(C,P){var z=M.select(this);P===L&&E.showactive&&z.select("rect."+i.itemRectClassName).call(l.fill,i.activeColor)})}function y(w){w.select("rect."+i.itemRectClassName).call(l.fill,i.hoverColor)}function v(w,E){w.select("rect."+i.itemRectClassName).call(l.fill,E.bgcolor)}function m(w,E){var L=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+i.dropdownButtonClassName).data(b.filterVisible(E.buttons));C.enter().append("g").classed(i.dropdownButtonClassName,!0);var P=["up","down"].indexOf(E.direction)!==-1;C.each(function(B,V){var q=M.select(this);q.call(c,E,B,w);var te=q.select("."+i.itemTextClassName),K=te.node()&&T.bBox(te.node()).width,J=Math.max(K+i.textPadX,i.minWidth),Y=E.font.size*t,W=d.lineCount(te),Q=Math.max(Y*W,i.minHeight)+i.textOffsetY;Q=Math.ceil(Q),J=Math.ceil(J),L.widths[V]=J,L.heights[V]=Q,L.height1=Math.max(L.height1,Q),L.width1=Math.max(L.width1,J),P?(L.totalWidth=Math.max(L.totalWidth,J),L.openWidth=L.totalWidth,L.totalHeight+=Q+i.gapButton,L.openHeight+=Q+i.gapButton):(L.totalWidth+=J+i.gapButton,L.openWidth+=J+i.gapButton,L.totalHeight=Math.max(L.totalHeight,Q),L.openHeight=L.totalHeight)}),P?L.totalHeight-=i.gapButton:L.totalWidth-=i.gapButton,L.headerWidth=L.width1+i.arrowPadX,L.headerHeight=L.height1,E.type==="dropdown"&&(P?(L.width1+=i.arrowPadX,L.totalHeight=L.height1):L.totalWidth=L.width1,L.totalWidth+=i.arrowPadX),C.remove();var z=L.totalWidth+E.pad.l+E.pad.r,G=L.totalHeight+E.pad.t+E.pad.b,O=w._fullLayout._size;L.lx=O.l+O.w*E.x,L.ly=O.t+O.h*(1-E.y);var H="left";b.isRightAnchor(E)&&(L.lx-=z,H="right"),b.isCenterAnchor(E)&&(L.lx-=z/2,H="center");var N="top";b.isBottomAnchor(E)&&(L.ly-=G,N="bottom"),b.isMiddleAnchor(E)&&(L.ly-=G/2,N="middle"),L.totalWidth=Math.ceil(L.totalWidth),L.totalHeight=Math.ceil(L.totalHeight),L.lx=Math.round(L.lx),L.ly=Math.round(L.ly),k.autoMargin(w,_(E),{x:E.x,y:E.y,l:z*({right:1,center:.5}[H]||0),r:z*({left:1,center:.5}[H]||0),b:G*({top:1,middle:.5}[N]||0),t:G*({bottom:1,middle:.5}[N]||0)})}function _(w){return i.autoMarginIdRoot+w._index}function f(w,E,L,C){C=C||{};var P=w.select("."+i.itemRectClassName),z=w.select("."+i.itemTextClassName),G=E.borderwidth,O=L.index,H=E._dims;T.setTranslate(w,G+L.x,G+L.y);var N=["up","down"].indexOf(E.direction)!==-1,B=C.height||(N?H.heights[O]:H.height1);P.attr({x:0,y:0,width:C.width||(N?H.width1:H.widths[O]),height:B});var V=E.font.size*t,q=(d.lineCount(z)-1)*V/2;d.positionText(z,i.textOffsetX,B/2-q+i.textOffsetY),N?L.y+=H.heights[O]+L.yPad:L.x+=H.widths[O]+L.xPad,L.index++}function S(w,E){w.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}ee.exports=function(w){var E=w._fullLayout,L=b.filterVisible(E[i.name]);function C(V){k.autoMargin(w,_(V))}var P=E._menulayer.selectAll("g."+i.containerClassName).data(L.length>0?[0]:[]);if(P.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){M.select(this).selectAll("g."+i.headerGroupClassName).each(C)}).remove(),L.length!==0){var z=P.selectAll("g."+i.headerGroupClassName).data(L,n);z.enter().append("g").classed(i.headerGroupClassName,!0);for(var G=b.ensureSingle(P,"g",i.dropdownButtonGroupClassName,function(V){V.style("pointer-events","all")}),O=0;O<L.length;O++){var H=L[O];m(w,H)}var N="updatemenus"+E._uid,B=new r(w,G,N);z.enter().size()&&(G.node().parentNode.appendChild(G.node()),G.call(S)),z.exit().each(function(V){G.call(S),C(V)}).remove(),z.each(function(V){var q=M.select(this),te=V.type==="dropdown"?G:null;k.manageCommandObserver(w,V,V.buttons,function(K){a(w,V,V.buttons[K.index],q,te,B,K.index,!0)}),V.type==="dropdown"?(u(w,q,G,B,V),o(G,V)&&p(w,q,G,B,V)):p(w,q,null,null,V)})}}},20763:function(ee,D,e){var M=e(75909);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(7163),supplyLayoutDefaults:e(64897),draw:e(13689)}},25849:function(ee,D,e){ee.exports=b;var M=e(39898),k=e(7901),l=e(91424),T=e(71828);function b(d,s,t){this.gd=d,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(d,s,t){var i=this.gd._fullLayout,r=i.width,n=i.height;this.position=d;var o,a,u,p,c=this.position.l,x=this.position.w,g=this.position.t,h=this.position.h,y=this.position.direction,v=y==="down",m=y==="left",_=y==="up",f=x,S=h;v||m||y==="right"||_||(this.position.direction="down",v=!0),v||_?(a=(o=c)+f,v?(u=g,S=(p=Math.min(u+S,n))-u):S=(p=g+S)-(u=Math.max(p-S,0))):(p=(u=g)+S,m?f=(a=c+f)-(o=Math.max(a-f,0)):(o=c,f=(a=Math.min(o+f,r))-o)),this._box={l:o,t:u,w:f,h:S};var w=x>f,E=b.barLength+2*b.barPad,L=b.barWidth+2*b.barPad,C=c,P=g+h;P+L>n&&(P=n-L);var z=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,b.barColor),w?(this.hbar=z.attr({rx:b.barRadius,ry:b.barRadius,x:C,y:P,width:E,height:L}),this._hbarXMin=C+E/2,this._hbarTranslateMax=f-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var G=h>S,O=b.barWidth+2*b.barPad,H=b.barLength+2*b.barPad,N=c+x,B=g;N+O>r&&(N=r-O);var V=this.container.selectAll("rect.scrollbar-vertical").data(G?[0]:[]);V.exit().on(".drag",null).remove(),V.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,b.barColor),G?(this.vbar=V.attr({rx:b.barRadius,ry:b.barRadius,x:N,y:B,width:O,height:H}),this._vbarYMin=B+H/2,this._vbarTranslateMax=S-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,te=o-.5,K=G?a+O+.5:a+.5,J=u-.5,Y=w?p+L+.5:p+.5,W=i._topdefs.selectAll("#"+q).data(w||G?[0]:[]);if(W.exit().remove(),W.enter().append("clipPath").attr("id",q).append("rect"),w||G?(this._clipRect=W.select("rect").attr({x:Math.floor(te),y:Math.floor(J),width:Math.ceil(K)-Math.floor(te),height:Math.ceil(Y)-Math.floor(J)}),this.container.call(l.setClipUrl,q,this.gd),this.bg.attr({x:c,y:g,width:x,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),w||G){var Q=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Q);var ne=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));w&&this.hbar.on(".drag",null).call(ne),G&&this.vbar.on(".drag",null).call(ne)}this.setTranslate(s,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d-=M.event.dx),this.vbar&&(s-=M.event.dy),this.setTranslate(d,s)},b.prototype._onBoxWheel=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d+=M.event.deltaY),this.vbar&&(s+=M.event.deltaY),this.setTranslate(d,s)},b.prototype._onBarDrag=function(){var d=this.translateX,s=this.translateY;if(this.hbar){var t=d+this._hbarXMin,i=t+this._hbarTranslateMax;d=(T.constrain(M.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,n=r+this._vbarTranslateMax;s=(T.constrain(M.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(d,s)},b.prototype.setTranslate=function(d,s){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;if(d=T.constrain(d||0,0,t),s=T.constrain(s||0,0,i),this.translateX=d,this.translateY=s,this.container.call(l.setTranslate,this._box.l-this.position.l-d,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+d-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var r=d/t;this.hbar.call(l.setTranslate,d+r*this._hbarTranslateMax,s)}if(this.vbar){var n=s/i;this.vbar.call(l.setTranslate,d,s+n*this._vbarTranslateMax)}}},18783:function(ee){ee.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(ee){ee.exports={axisRefDescription:function(D,e,M){return["If set to a",D,"axis id (e.g. *"+D+"* or","*"+D+"2*), the `"+D+"` position refers to a",D,"coordinate. If set to *paper*, the `"+D+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+M+"). If set to a",D,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+D+"2 domain* refers to the domain of the second",D," axis and a",D,"position of 0.5 refers to the","point between the",e,"and the",M,"of the domain of the","second",D,"axis."].join(" ")}}},22372:function(ee){ee.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},31562:function(ee){ee.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(ee){ee.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(ee){ee.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(ee){ee.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},37822:function(ee){ee.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(ee){ee.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},32396:function(ee,D){D.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],D.STYLE=D.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},77922:function(ee,D){D.xmlns="http://www.w3.org/2000/xmlns/",D.svg="http://www.w3.org/2000/svg",D.xlink="http://www.w3.org/1999/xlink",D.svgAttrs={xmlns:D.svg,"xmlns:xlink":D.xlink}},8729:function(ee,D,e){D.version=e(11506).version,e(7417),e(98847);for(var M=e(73972),k=D.register=M.register,l=e(10641),T=Object.keys(l),b=0;b<T.length;b++){var d=T[b];d.charAt(0)!=="_"&&(D[d]=l[d]),k({moduleType:"apiMethod",name:d,fn:l[d]})}k(e(67368)),k([e(32745),e(2468),e(47322),e(89853),e(68804),e(20763),e(23243),e(13137),e(97218),e(83312),e(37369),e(21081),e(12311),e(2199),e(30211),e(64168)]),k([e(92177),e(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),D.Icons=e(24255);var s=e(30211),t=e(74875);D.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},D.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},D.Snapshot=e(44511),D.PlotSchema=e(86281)},24255:function(ee){ee.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(ee,D){D.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},D.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},D.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},D.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},D.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},D.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},26348:function(ee,D,e){var M=e(64872),k=M.mod,l=M.modHalf,T=Math.PI,b=2*T;function d(r){return Math.abs(r[1]-r[0])>b-1e-14}function s(r,n){return l(n-r,b)}function t(r,n){if(d(n))return!0;var o,a;n[0]<n[1]?(o=n[0],a=n[1]):(o=n[1],a=n[0]),(o=k(o,b))>(a=k(a,b))&&(a+=b);var u=k(r,b),p=u+b;return u>=o&&u<=a||p>=o&&p<=a}function i(r,n,o,a,u,p,c){u=u||0,p=p||0;var x,g,h,y,v,m=d([o,a]);function _(E,L){return[E*Math.cos(L)+u,p-E*Math.sin(L)]}m?(x=0,g=T,h=b):o<a?(x=o,h=a):(x=a,h=o),r<n?(y=r,v=n):(y=n,v=r);var f,S=Math.abs(h-x)<=T?0:1;function w(E,L,C){return"A"+[E,E]+" "+[0,S,C]+" "+_(E,L)}return m?f=y===null?"M"+_(v,x)+w(v,g,0)+w(v,h,0)+"Z":"M"+_(y,x)+w(y,g,0)+w(y,h,0)+"ZM"+_(v,x)+w(v,g,1)+w(v,h,1)+"Z":y===null?(f="M"+_(v,x)+w(v,h,0),c&&(f+="L0,0Z")):f="M"+_(y,x)+"L"+_(v,x)+w(v,h,0)+"L"+_(y,h)+w(y,x,1)+"Z",f}ee.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:s,angleDist:function(r,n){return Math.abs(s(r,n))},isFullCircle:d,isAngleInsideSector:t,isPtInsideSector:function(r,n,o,a){return!!t(n,a)&&(o[0]<o[1]?(u=o[0],p=o[1]):(u=o[1],p=o[0]),r>=u&&r<=p);var u,p},pathArc:function(r,n,o,a,u){return i(null,r,n,o,a,u,0)},pathSector:function(r,n,o,a,u){return i(null,r,n,o,a,u,1)},pathAnnulus:function(r,n,o,a,u,p){return i(r,n,o,a,u,p,1)}}},73627:function(ee,D){var e=Array.isArray,M=ArrayBuffer,k=DataView;function l(d){return M.isView(d)&&!(d instanceof k)}function T(d){return e(d)||l(d)}function b(d,s,t){if(T(d)){if(T(d[0])){for(var i=t,r=0;r<d.length;r++)i=s(i,d[r].length);return i}return d.length}return 0}D.isTypedArray=l,D.isArrayOrTypedArray=T,D.isArray1D=function(d){return!T(d[0])},D.ensureArray=function(d,s){return e(d)||(d=[]),d.length=s,d},D.concat=function(){var d,s,t,i,r,n,o,a,u=[],p=!0,c=0;for(t=0;t<arguments.length;t++)(n=(i=arguments[t]).length)&&(s?u.push(i):(s=i,r=n),e(i)?d=!1:(p=!1,c?d!==i.constructor&&(d=!1):d=i.constructor),c+=n);if(!c)return[];if(!u.length)return s;if(p)return s.concat.apply(s,u);if(d){for((o=new d(c)).set(s),t=0;t<u.length;t++)i=u[t],o.set(i,r),r+=i.length;return o}for(o=new Array(c),a=0;a<s.length;a++)o[a]=s[a];for(t=0;t<u.length;t++){for(i=u[t],a=0;a<i.length;a++)o[r+a]=i[a];r+=a}return o},D.maxRowLength=function(d){return b(d,Math.max,0)},D.minRowLength=function(d){return b(d,Math.min,1/0)}},95218:function(ee,D,e){var M=e(92770),k=e(50606).BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ee.exports=function(T){return typeof T=="string"&&(T=T.replace(l,"")),M(T)?Number(T):k}},33306:function(ee){ee.exports=function(D){var e=D._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},86367:function(ee){ee.exports=function(D){D._responsiveChartHandler&&(window.removeEventListener("resize",D._responsiveChartHandler),delete D._responsiveChartHandler)}},96554:function(ee,D,e){var M=e(92770),k=e(84267),l=e(9012),T=e(63282),b=e(7901),d=e(37822).DESELECTDIM,s=e(65487),t=e(30587).counter,i=e(64872).modHalf,r=e(73627).isArrayOrTypedArray;function n(o,a){var u=D.valObjectMeta[a.valType];if(a.arrayOk&&r(o))return!0;if(u.validateFunction)return u.validateFunction(o,a);var p={},c=p,x={set:function(g){c=g}};return u.coerceFunction(o,x,p,a),c!==p}D.valObjectMeta={data_array:{coerceFunction:function(o,a,u){r(o)?a.set(o):u!==void 0&&a.set(u)}},enumerated:{coerceFunction:function(o,a,u,p){p.coerceNumber&&(o=+o),p.values.indexOf(o)===-1?a.set(u):a.set(o)},validateFunction:function(o,a){a.coerceNumber&&(o=+o);for(var u=a.values,p=0;p<u.length;p++){var c=String(u[p]);if(c.charAt(0)==="/"&&c.charAt(c.length-1)==="/"){if(new RegExp(c.substr(1,c.length-2)).test(o))return!0}else if(o===u[p])return!0}return!1}},boolean:{coerceFunction:function(o,a,u){o===!0||o===!1?a.set(o):a.set(u)}},number:{coerceFunction:function(o,a,u,p){!M(o)||p.min!==void 0&&o<p.min||p.max!==void 0&&o>p.max?a.set(u):a.set(+o)}},integer:{coerceFunction:function(o,a,u,p){o%1||!M(o)||p.min!==void 0&&o<p.min||p.max!==void 0&&o>p.max?a.set(u):a.set(+o)}},string:{coerceFunction:function(o,a,u,p){if(typeof o!="string"){var c=typeof o=="number";p.strict!==!0&&c?a.set(String(o)):a.set(u)}else p.noBlank&&!o?a.set(u):a.set(o)}},color:{coerceFunction:function(o,a,u){k(o).isValid()?a.set(o):a.set(u)}},colorlist:{coerceFunction:function(o,a,u){Array.isArray(o)&&o.length&&o.every(function(p){return k(p).isValid()})?a.set(o):a.set(u)}},colorscale:{coerceFunction:function(o,a,u){a.set(T.get(o,u))}},angle:{coerceFunction:function(o,a,u){o==="auto"?a.set("auto"):M(o)?a.set(i(+o,360)):a.set(u)}},subplotid:{coerceFunction:function(o,a,u,p){var c=p.regex||t(u);typeof o=="string"&&c.test(o)?a.set(o):a.set(u)},validateFunction:function(o,a){var u=a.dflt;return o===u||typeof o=="string"&&!!t(u).test(o)}},flaglist:{coerceFunction:function(o,a,u,p){if((p.extras||[]).indexOf(o)===-1)if(typeof o=="string"){for(var c=o.split("+"),x=0;x<c.length;){var g=c[x];p.flags.indexOf(g)===-1||c.indexOf(g)<x?c.splice(x,1):x++}c.length?a.set(c.join("+")):a.set(u)}else a.set(u);else a.set(o)}},any:{coerceFunction:function(o,a,u){o===void 0?a.set(u):a.set(o)}},info_array:{coerceFunction:function(o,a,u,p){function c(P,z,G){var O,H={set:function(N){O=N}};return G===void 0&&(G=z.dflt),D.valObjectMeta[z.valType].coerceFunction(P,H,G,z),O}var x=p.dimensions===2||p.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(Array.isArray(o)){var g,h,y,v,m,_,f=p.items,S=[],w=Array.isArray(f),E=w&&x&&Array.isArray(f[0]),L=x&&w&&!E,C=w&&!L?f.length:o.length;if(u=Array.isArray(u)?u:[],x)for(g=0;g<C;g++)for(S[g]=[],y=Array.isArray(o[g])?o[g]:[],m=L?f.length:w?f[g].length:y.length,h=0;h<m;h++)v=L?f[h]:w?f[g][h]:f,(_=c(y[h],v,(u[g]||[])[h]))!==void 0&&(S[g][h]=_);else for(g=0;g<C;g++)(_=c(o[g],w?f[g]:f,u[g]))!==void 0&&(S[g]=_);a.set(S)}else a.set(u)},validateFunction:function(o,a){if(!Array.isArray(o))return!1;var u=a.items,p=Array.isArray(u),c=a.dimensions===2;if(!a.freeLength&&o.length!==u.length)return!1;for(var x=0;x<o.length;x++)if(c){if(!Array.isArray(o[x])||!a.freeLength&&o[x].length!==u[x].length)return!1;for(var g=0;g<o[x].length;g++)if(!n(o[x][g],p?u[x][g]:u))return!1}else if(!n(o[x],p?u[x]:u))return!1;return!0}}},D.coerce=function(o,a,u,p,c){var x=s(u,p).get(),g=s(o,p),h=s(a,p),y=g.get(),v=a._template;if(y===void 0&&v&&(y=s(v,p).get(),v=0),c===void 0&&(c=x.dflt),x.arrayOk&&r(y))return h.set(y),y;var m=D.valObjectMeta[x.valType].coerceFunction;m(y,h,c,x);var _=h.get();return v&&_===c&&!n(y,x)&&(m(y=s(v,p).get(),h,c,x),_=h.get()),_},D.coerce2=function(o,a,u,p,c){var x=s(o,p),g=D.coerce(o,a,u,p,c);return x.get()!=null&&g},D.coerceFont=function(o,a,u){var p={};return u=u||{},p.family=o(a+".family",u.family),p.size=o(a+".size",u.size),p.color=o(a+".color",u.color),p},D.coercePattern=function(o,a,u,p){if(o(a+".shape")){o(a+".solidity"),o(a+".size");var c=o(a+".fillmode")==="overlay";if(!p){var x=o(a+".bgcolor",c?u:void 0);o(a+".fgcolor",c?b.contrast(x):u)}o(a+".fgopacity",c?.5:1)}},D.coerceHoverinfo=function(o,a,u){var p,c=a._module.attributes,x=c.hoverinfo?c:l,g=x.hoverinfo;if(u._dataLength===1){var h=g.dflt==="all"?g.flags.slice():g.dflt.split("+");h.splice(h.indexOf("name"),1),p=h.join("+")}return D.coerce(o,a,x,"hoverinfo",p)},D.coerceSelectionMarkerOpacity=function(o,a){if(o.marker){var u,p,c=o.marker.opacity;c!==void 0&&(r(c)||o.selected||o.unselected||(u=c,p=d*c),a("selected.marker.opacity",u),a("unselected.marker.opacity",p))}},D.validate=n},41631:function(ee,D,e){var M,k,l=e(84096).i$,T=e(92770),b=e(47769),d=e(64872).mod,s=e(50606),t=s.BADNUM,i=s.ONEDAY,r=s.ONEHOUR,n=s.ONEMIN,o=s.ONESEC,a=s.EPOCHJD,u=e(73972),p=e(84096).g0,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=new Date().getFullYear()-70;function h(z){return z&&u.componentsRegistry.calendars&&typeof z=="string"&&z!=="gregorian"}function y(z,G){return String(z+Math.pow(10,G)).substr(1)}D.dateTick0=function(z,G){var O=function(N,B){return h(N)?B?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[N]:u.getComponentMethod("calendars","CANONICAL_TICK")[N]:B?"2000-01-02":"2000-01-01"}(z,!!G);if(G<2)return O;var H=D.dateTime2ms(O,z);return H+=i*(G-1),D.ms2DateTime(H,0,z)},D.dfltRange=function(z){return h(z)?u.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},D.isJSDate=function(z){return typeof z=="object"&&z!==null&&typeof z.getTime=="function"},D.dateTime2ms=function(z,G){if(D.isJSDate(z)){var O=z.getTimezoneOffset()*n,H=(z.getUTCMinutes()-z.getMinutes())*n+(z.getUTCSeconds()-z.getSeconds())*o+(z.getUTCMilliseconds()-z.getMilliseconds());if(H){var N=3*n;O=O-N/2+d(H-O+N/2,N)}return(z=Number(z)-O)>=M&&z<=k?z:t}if(typeof z!="string"&&typeof z!="number")return t;z=String(z);var B=h(G),V=z.charAt(0);!B||V!=="G"&&V!=="g"||(z=z.substr(1),G="");var q=B&&G.substr(0,7)==="chinese",te=z.match(q?x:c);if(!te)return t;var K=te[1],J=te[3]||"1",Y=Number(te[5]||1),W=Number(te[7]||0),Q=Number(te[9]||0),ne=Number(te[11]||0);if(B){if(K.length===2)return t;var re;K=Number(K);try{var ae=u.getComponentMethod("calendars","getCal")(G);if(q){var ue=J.charAt(J.length-1)==="i";J=parseInt(J,10),re=ae.newDate(K,ae.toMonthIndex(K,J,ue),Y)}else re=ae.newDate(K,Number(J),Y)}catch{return t}return re?(re.toJD()-a)*i+W*r+Q*n+ne*o:t}K=K.length===2?(Number(K)+2e3-g)%100+g:Number(K),J-=1;var pe=new Date(Date.UTC(2e3,J,Y,W,Q));return pe.setUTCFullYear(K),pe.getUTCMonth()!==J||pe.getUTCDate()!==Y?t:pe.getTime()+ne*o},M=D.MIN_MS=D.dateTime2ms("-9999"),k=D.MAX_MS=D.dateTime2ms("9999-12-31 23:59:59.9999"),D.isDateTime=function(z,G){return D.dateTime2ms(z,G)!==t};var v=90*i,m=3*r,_=5*n;function f(z,G,O,H,N){if((G||O||H||N)&&(z+=" "+y(G,2)+":"+y(O,2),(H||N)&&(z+=":"+y(H,2),N))){for(var B=4;N%10==0;)B-=1,N/=10;z+="."+y(N,B)}return z}D.ms2DateTime=function(z,G,O){if(typeof z!="number"||!(z>=M&&z<=k))return t;G||(G=0);var H,N,B,V,q,te,K=Math.floor(10*d(z+.05,1)),J=Math.round(z-K/10);if(h(O)){var Y=Math.floor(J/i)+a,W=Math.floor(d(z,i));try{H=u.getComponentMethod("calendars","getCal")(O).fromJD(Y).formatDate("yyyy-mm-dd")}catch{H=p("G%Y-%m-%d")(new Date(J))}if(H.charAt(0)==="-")for(;H.length<11;)H="-0"+H.substr(1);else for(;H.length<10;)H="0"+H;N=G<v?Math.floor(W/r):0,B=G<v?Math.floor(W%r/n):0,V=G<m?Math.floor(W%n/o):0,q=G<_?W%o*10+K:0}else te=new Date(J),H=p("%Y-%m-%d")(te),N=G<v?te.getUTCHours():0,B=G<v?te.getUTCMinutes():0,V=G<m?te.getUTCSeconds():0,q=G<_?10*te.getUTCMilliseconds()+K:0;return f(H,N,B,V,q)},D.ms2DateTimeLocal=function(z){if(!(z>=M+i&&z<=k-i))return t;var G=Math.floor(10*d(z+.05,1)),O=new Date(Math.round(z-G/10));return f(l("%Y-%m-%d")(O),O.getHours(),O.getMinutes(),O.getSeconds(),10*O.getUTCMilliseconds()+G)},D.cleanDate=function(z,G,O){if(z===t)return G;if(D.isJSDate(z)||typeof z=="number"&&isFinite(z)){if(h(O))return b.error("JS Dates and milliseconds are incompatible with world calendars",z),G;if(!(z=D.ms2DateTimeLocal(+z))&&G!==void 0)return G}else if(!D.isDateTime(z,O))return b.error("unrecognized date",z),G;return z};var S=/%\d?f/g,w=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function L(z,G,O,H){z=z.replace(S,function(B){var V=Math.min(+B.charAt(1)||6,6);return(G/1e3%1+2).toFixed(V).substr(2).replace(/0+$/,"")||"0"});var N=new Date(Math.floor(G+.05));if(z=z.replace(w,function(){return E[O("%q")(N)]}),h(H))try{z=u.getComponentMethod("calendars","worldCalFmt")(z,G,H)}catch{return"Invalid"}return O(z)(N)}var C=[59,59.9,59.99,59.999,59.9999];D.formatDate=function(z,G,O,H,N,B){if(N=h(N)&&N,!G)if(O==="y")G=B.year;else if(O==="m")G=B.month;else{if(O!=="d")return function(V,q){var te=d(V+.05,i),K=y(Math.floor(te/r),2)+":"+y(d(Math.floor(te/n),60),2);if(q!=="M"){T(q)||(q=0);var J=(100+Math.min(d(V/o,60),C[q])).toFixed(q).substr(1);q>0&&(J=J.replace(/0+$/,"").replace(/[\.]$/,"")),K+=":"+J}return K}(z,O)+`
`+L(B.dayMonthYear,z,H,N);G=B.dayMonth+`
`+B.year}return L(G,z,H,N)};var P=3*i;D.incrementMonth=function(z,G,O){O=h(O)&&O;var H=d(z,i);if(z=Math.round(z-H),O)try{var N=Math.round(z/i)+a,B=u.getComponentMethod("calendars","getCal")(O),V=B.fromJD(N);return G%12?B.add(V,G,"m"):B.add(V,G/12,"y"),(V.toJD()-a)*i+H}catch{b.error("invalid ms "+z+" in calendar "+O)}var q=new Date(z+P);return q.setUTCMonth(q.getUTCMonth()+G)+H-P},D.findExactDates=function(z,G){for(var O,H,N=0,B=0,V=0,q=0,te=h(G)&&u.getComponentMethod("calendars","getCal")(G),K=0;K<z.length;K++)if(H=z[K],T(H)){if(!(H%i))if(te)try{(O=te.fromJD(H/i+a)).day()===1?O.month()===1?N++:B++:V++}catch{}else(O=new Date(H)).getUTCDate()===1?O.getUTCMonth()===0?N++:B++:V++}else q++;V+=B+=N;var J=z.length-q;return{exactYears:N/J,exactMonths:B/J,exactDays:V/J}}},24401:function(ee,D,e){var M=e(39898),k=e(47769),l=e(35657),T=e(79576);function b(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function d(r,n,o){var a="plotly.js-style-"+r,u=document.getElementById(a);u||((u=document.createElement("style")).setAttribute("id",a),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var p=u.sheet;p.insertRule?p.insertRule(n+"{"+o+"}",0):p.addRule?p.addRule(n,o,0):k.warn("addStyleRule failed")}function s(r){var n=window.getComputedStyle(r,null),o=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return o==="none"?null:o.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(a){return+a})}function t(r){for(var n=[];i(r);)n.push(r),r=r.parentNode;return n}function i(r){return r&&(r instanceof Element||r instanceof HTMLElement)}ee.exports={getGraphDiv:function(r){var n;if(typeof r=="string"){if((n=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=M.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(r,n){d("global",r,n)},addRelatedStyleRule:d,deleteRelatedStyleRule:function(r){var n="plotly.js-style-"+r,o=document.getElementById(n);o&&b(o)},getFullTransformMatrix:function(r){var n=t(r),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(a){var u=s(a);if(u){var p=l.convertCssMatrix(u);o=T.multiply(o,o,p)}}),o},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},11086:function(ee,D,e){var M=e(15398).EventEmitter,k={init:function(l){if(l._ev instanceof M)return l;var T=new M,b=new M;return l._ev=T,l._internalEv=b,l.on=T.on.bind(T),l.once=T.once.bind(T),l.removeListener=T.removeListener.bind(T),l.removeAllListeners=T.removeAllListeners.bind(T),l._internalOn=b.on.bind(b),l._internalOnce=b.once.bind(b),l._removeInternalListener=b.removeListener.bind(b),l._removeAllInternalListeners=b.removeAllListeners.bind(b),l.emit=function(d,s){typeof jQuery<"u"&&jQuery(l).trigger(d,s),T.emit(d,s),b.emit(d,s)},l},triggerHandler:function(l,T,b){var d,s;typeof jQuery<"u"&&(d=jQuery(l).triggerHandler(T,b));var t=l._ev;if(!t)return d;var i,r=t._events[T];if(!r)return d;function n(o){return o.listener?(t.removeListener(T,o.listener),o.fired?void 0:(o.fired=!0,o.listener.apply(t,[b]))):o.apply(t,[b])}for(r=Array.isArray(r)?r:[r],i=0;i<r.length-1;i++)n(r[i]);return s=n(r[i]),d!==void 0?d:s},purge:function(l){return delete l._ev,delete l.on,delete l.once,delete l.removeListener,delete l.removeAllListeners,delete l.emit,delete l._ev,delete l._internalEv,delete l._internalOn,delete l._internalOnce,delete l._removeInternalListener,delete l._removeAllInternalListeners,l}};ee.exports=k},1426:function(ee,D,e){var M=e(41965),k=Array.isArray;function l(T,b,d,s){var t,i,r,n,o,a,u,p=T[0],c=T.length;if(c===2&&k(p)&&k(T[1])&&p.length===0){if(u=function(g,h){var y,v;for(y=0;y<g.length;y++){if((v=g[y])!==null&&typeof v=="object")return!1;v!==void 0&&(h[y]=v)}return!0}(T[1],p),u)return p;p.splice(0,p.length)}for(var x=1;x<c;x++)for(i in t=T[x])r=p[i],n=t[i],s&&k(n)?p[i]=n:b&&n&&(M(n)||(o=k(n)))?(o?(o=!1,a=r&&k(r)?r:[]):a=r&&M(r)?r:{},p[i]=l([a,n],b,d,s)):(n!==void 0||d)&&(p[i]=n);return p}D.extendFlat=function(){return l(arguments,!1,!1,!1)},D.extendDeep=function(){return l(arguments,!0,!1,!1)},D.extendDeepAll=function(){return l(arguments,!0,!0,!1)},D.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)}},75744:function(ee){ee.exports=function(D){for(var e={},M=[],k=0,l=0;l<D.length;l++){var T=D[l];e[T]!==1&&(e[T]=1,M[k++]=T)}return M}},76756:function(ee){function D(M){return M.visible===!0}function e(M){var k=M[0].trace;return k.visible===!0&&k._length!==0}ee.exports=function(M){for(var k,l=(k=M,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:D),T=[],b=0;b<M.length;b++){var d=M[b];l(d)&&T.push(d)}return T}},41327:function(ee,D,e){var M=e(39898),k=e(24138),l=e(30774),T=e(29261),b=e(85268),d=e(23389),s=e(47769),t=e(41965),i=e(65487),r=e(61082),n=Object.keys(k),o={"ISO-3":d,"USA-states":d,"country names":function(u){for(var p=0;p<n.length;p++){var c=n[p];if(new RegExp(k[c]).test(u.trim().toLowerCase()))return c}return s.log("Unrecognized country name: "+u+"."),!1}};function a(u){var p=u.geojson,c=window.PlotlyGeoAssets||{},x=typeof p=="string"?c[p]:p;return t(x)?x:(s.error("Oops ... something went wrong when fetching "+p),!1)}ee.exports={locationToFeature:function(u,p,c){if(!p||typeof p!="string")return!1;var x,g,h,y=o[u](p);if(y){if(u==="USA-states")for(x=[],h=0;h<c.length;h++)(g=c[h]).properties&&g.properties.gu&&g.properties.gu==="USA"&&x.push(g);else x=c;for(h=0;h<x.length;h++)if((g=x[h]).id===y)return g;s.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var p,c,x,g,h=u.geometry,y=h.coordinates,v=u.id,m=[];function _(f){for(var S=0;S<f.length-1;S++)if(f[S][0]>0&&f[S+1][0]<0)return S;return null}switch(p=v==="RUS"||v==="FJI"?function(f){var S;if(_(f)===null)S=f;else for(S=new Array(f.length),g=0;g<f.length;g++)S[g]=[f[g][0]<0?f[g][0]+360:f[g][0],f[g][1]];m.push(r.tester(S))}:v==="ATA"?function(f){var S=_(f);if(S===null)return m.push(r.tester(f));var w=new Array(f.length+1),E=0;for(g=0;g<f.length;g++)g>S?w[E++]=[f[g][0]+360,f[g][1]]:g===S?(w[E++]=f[g],w[E++]=[f[g][0],-90]):w[E++]=f[g];var L=r.tester(w);L.pts.pop(),m.push(L)}:function(f){m.push(r.tester(f))},h.type){case"MultiPolygon":for(c=0;c<y.length;c++)for(x=0;x<y[c].length;x++)p(y[c][x]);break;case"Polygon":for(c=0;c<y.length;c++)p(y[c])}return m},getTraceGeojson:a,extractTraceFeature:function(u){var p=u[0].trace,c=a(p);if(!c)return!1;var x,g={},h=[];for(x=0;x<p._length;x++){var y=u[x];(y.loc||y.loc===0)&&(g[y.loc]=y)}function v(f){var S=i(f,p.featureidkey||"id").get(),w=g[S];if(w){var E=f.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var L={type:"Feature",id:S,geometry:E,properties:{}};L.properties.ct=function(C){var P,z=C.geometry;if(z.type==="MultiPolygon")for(var G=z.coordinates,O=0,H=0;H<G.length;H++){var N={type:"Polygon",coordinates:G[H]},B=l.default(N);B>O&&(O=B,P=N)}else P=z;return T.default(P).geometry.coordinates}(L),w.fIn=f,w.fOut=L,h.push(L)}else s.log(["Location",w.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete g[S]}switch(c.type){case"FeatureCollection":var m=c.features;for(x=0;x<m.length;x++)v(m[x]);break;case"Feature":v(c);break;default:return s.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in g)s.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+p.featureidkey+"*."].join(" "));return h},fetchTraceGeoData:function(u){var p=window.PlotlyGeoAssets||{},c=[];function x(v){return new Promise(function(m,_){M.json(v,function(f,S){if(f){delete p[v];var w=f.status===404?'GeoJSON at URL "'+v+'" does not exist.':"Unexpected error while fetching from "+v;return _(new Error(w))}return p[v]=S,m(S)})})}function g(v){return new Promise(function(m,_){var f=0,S=setInterval(function(){return p[v]&&p[v]!=="pending"?(clearInterval(S),m(p[v])):f>100?(clearInterval(S),_("Unexpected error while fetching from "+v)):void f++},50)})}for(var h=0;h<u.length;h++){var y=u[h][0].trace.geojson;typeof y=="string"&&(p[y]?p[y]==="pending"&&c.push(g(y)):(p[y]="pending",c.push(x(y))))}return c},computeBbox:function(u){return b.default(u)}}},18214:function(ee,D,e){var M=e(50606).BADNUM;D.calcTraceToLineCoords=function(k){for(var l=k[0].trace.connectgaps,T=[],b=[],d=0;d<k.length;d++){var s=k[d].lonlat;s[0]!==M?b.push(s):!l&&b.length>0&&(T.push(b),b=[])}return b.length>0&&T.push(b),T},D.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},D.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var l=new Array(k.length),T=0;T<k.length;T++)l[T]=[k[T]];return{type:"MultiPolygon",coordinates:l}},D.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(ee,D,e){var M,k,l,T=e(64872).mod;function b(s,t,i,r,n,o,a,u){var p=i-s,c=n-s,x=a-n,g=r-t,h=o-t,y=u-o,v=p*y-x*g;if(v===0)return null;var m=(c*y-x*h)/v,_=(c*g-p*h)/v;return _<0||_>1||m<0||m>1?null:{x:s+p*m,y:t+g*m}}function d(s,t,i,r,n){var o=r*s+n*t;if(o<0)return r*r+n*n;if(o>i){var a=r-s,u=n-t;return a*a+u*u}var p=r*t-n*s;return p*p/i}D.segmentsIntersect=b,D.segmentDistance=function(s,t,i,r,n,o,a,u){if(b(s,t,i,r,n,o,a,u))return 0;var p=i-s,c=r-t,x=a-n,g=u-o,h=p*p+c*c,y=x*x+g*g,v=Math.min(d(p,c,h,n-s,o-t),d(p,c,h,a-s,u-t),d(x,g,y,s-n,t-o),d(x,g,y,i-n,r-o));return Math.sqrt(v)},D.getTextLocation=function(s,t,i,r){if(s===k&&r===l||(M={},k=s,l=r),M[i])return M[i];var n=s.getPointAtLength(T(i-r/2,t)),o=s.getPointAtLength(T(i+r/2,t)),a=Math.atan((o.y-n.y)/(o.x-n.x)),u=s.getPointAtLength(T(i,t)),p={x:(4*u.x+n.x+o.x)/6,y:(4*u.y+n.y+o.y)/6,theta:a};return M[i]=p,p},D.clearLocationCache=function(){k=null},D.getVisibleSegment=function(s,t,i){var r,n,o=t.left,a=t.right,u=t.top,p=t.bottom,c=0,x=s.getTotalLength(),g=x;function h(v){var m=s.getPointAtLength(v);v===0?r=m:v===x&&(n=m);var _=m.x<o?o-m.x:m.x>a?m.x-a:0,f=m.y<u?u-m.y:m.y>p?m.y-p:0;return Math.sqrt(_*_+f*f)}for(var y=h(c);y;){if((c+=y+i)>g)return;y=h(c)}for(y=h(g);y;){if(c>(g-=y+i))return;y=h(g)}return{min:c,max:g,len:g-c,total:x,isClosed:c===0&&g===x&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},D.findPointOnPath=function(s,t,i,r){for(var n,o,a,u=(r=r||{}).pathLength||s.getTotalLength(),p=r.tolerance||.001,c=r.iterationLimit||30,x=s.getPointAtLength(0)[i]>s.getPointAtLength(u)[i]?-1:1,g=0,h=0,y=u;g<c;){if(n=(h+y)/2,a=(o=s.getPointAtLength(n))[i]-t,Math.abs(a)<p)return o;x*a>0?y=n:h=n,g++}return o}},81697:function(ee,D,e){var M=e(92770),k=e(84267),l=e(25075),T=e(21081),b=e(22399).defaultLine,d=e(73627).isArrayOrTypedArray,s=l(b);function t(n,o){var a=n;return a[3]*=o,a}function i(n){if(M(n))return s;var o=l(n);return o.length?o:s}function r(n){return M(n)?n:1}ee.exports={formatColor:function(n,o,a){var u,p,c,x,g,h=n.color,y=d(h),v=d(o),m=T.extractOpts(n),_=[];if(u=m.colorscale!==void 0?T.makeColorScaleFuncFromTrace(n):i,p=y?function(S,w){return S[w]===void 0?s:l(u(S[w]))}:i,c=v?function(S,w){return S[w]===void 0?1:r(S[w])}:r,y||v)for(var f=0;f<a;f++)x=p(h,f),g=c(o,f),_[f]=t(x,g);else _=t(l(h),o);return _},parseColorScale:function(n){var o=T.extractOpts(n),a=o.colorscale;return o.reversescale&&(a=T.flipScale(o.colorscale)),a.map(function(u){var p=u[0],c=k(u[1]).toRgb();return{index:p,rgb:[c.r,c.g,c.b,c.a]}})}}},28984:function(ee,D,e){var M=e(23389);function k(l){return[l]}ee.exports={keyFun:function(l){return l.key},repeat:k,descend:M,wrap:k,unwrap:function(l){return l[0]}}},23389:function(ee){ee.exports=function(D){return D}},39240:function(ee){ee.exports=function(D,e){if(!e)return D;var M=1/Math.abs(e),k=M>1?(M*D+M*e)/M:D+e,l=String(k).length;if(l>16){var T=String(e).length;if(l>=String(D).length+T){var b=parseFloat(k).toPrecision(12);b.indexOf("e+")===-1&&(k=+b)}}return k}},71828:function(ee,D,e){var M=e(39898),k=e(84096).g0,l=e(60721).WU,T=e(92770),b=e(50606),d=b.FP_SAFE,s=-d,t=b.BADNUM,i=ee.exports={};i.adjustFormat=function(W){return!W||/^\d[.]\df/.test(W)||/[.]\d%/.test(W)?W:W==="0.f"?"~f":/^\d%/.test(W)?"~%":/^\ds/.test(W)?"~s":!/^[~,.0$]/.test(W)&&/[&fps]/.test(W)?"~"+W:W};var r={};i.warnBadFormat=function(W){var Q=String(W);r[Q]||(r[Q]=1,i.warn('encountered bad format: "'+Q+'"'))},i.noFormat=function(W){return String(W)},i.numberFormat=function(W){var Q;try{Q=l(i.adjustFormat(W))}catch{return i.warnBadFormat(W),i.noFormat}return Q},i.nestedProperty=e(65487),i.keyedContainer=e(66636),i.relativeAttr=e(6962),i.isPlainObject=e(41965),i.toLogRange=e(58163),i.relinkPrivateKeys=e(51332);var n=e(73627);i.isTypedArray=n.isTypedArray,i.isArrayOrTypedArray=n.isArrayOrTypedArray,i.isArray1D=n.isArray1D,i.ensureArray=n.ensureArray,i.concat=n.concat,i.maxRowLength=n.maxRowLength,i.minRowLength=n.minRowLength;var o=e(64872);i.mod=o.mod,i.modHalf=o.modHalf;var a=e(96554);i.valObjectMeta=a.valObjectMeta,i.coerce=a.coerce,i.coerce2=a.coerce2,i.coerceFont=a.coerceFont,i.coercePattern=a.coercePattern,i.coerceHoverinfo=a.coerceHoverinfo,i.coerceSelectionMarkerOpacity=a.coerceSelectionMarkerOpacity,i.validate=a.validate;var u=e(41631);i.dateTime2ms=u.dateTime2ms,i.isDateTime=u.isDateTime,i.ms2DateTime=u.ms2DateTime,i.ms2DateTimeLocal=u.ms2DateTimeLocal,i.cleanDate=u.cleanDate,i.isJSDate=u.isJSDate,i.formatDate=u.formatDate,i.incrementMonth=u.incrementMonth,i.dateTick0=u.dateTick0,i.dfltRange=u.dfltRange,i.findExactDates=u.findExactDates,i.MIN_MS=u.MIN_MS,i.MAX_MS=u.MAX_MS;var p=e(65888);i.findBin=p.findBin,i.sorterAsc=p.sorterAsc,i.sorterDes=p.sorterDes,i.distinctVals=p.distinctVals,i.roundUp=p.roundUp,i.sort=p.sort,i.findIndexOfMin=p.findIndexOfMin,i.sortObjectKeys=e(78607);var c=e(80038);i.aggNums=c.aggNums,i.len=c.len,i.mean=c.mean,i.median=c.median,i.midRange=c.midRange,i.variance=c.variance,i.stdev=c.stdev,i.interp=c.interp;var x=e(35657);i.init2dArray=x.init2dArray,i.transposeRagged=x.transposeRagged,i.dot=x.dot,i.translationMatrix=x.translationMatrix,i.rotationMatrix=x.rotationMatrix,i.rotationXYMatrix=x.rotationXYMatrix,i.apply3DTransform=x.apply3DTransform,i.apply2DTransform=x.apply2DTransform,i.apply2DTransform2=x.apply2DTransform2,i.convertCssMatrix=x.convertCssMatrix,i.inverseTransformMatrix=x.inverseTransformMatrix;var g=e(26348);i.deg2rad=g.deg2rad,i.rad2deg=g.rad2deg,i.angleDelta=g.angleDelta,i.angleDist=g.angleDist,i.isFullCircle=g.isFullCircle,i.isAngleInsideSector=g.isAngleInsideSector,i.isPtInsideSector=g.isPtInsideSector,i.pathArc=g.pathArc,i.pathSector=g.pathSector,i.pathAnnulus=g.pathAnnulus;var h=e(99863);i.isLeftAnchor=h.isLeftAnchor,i.isCenterAnchor=h.isCenterAnchor,i.isRightAnchor=h.isRightAnchor,i.isTopAnchor=h.isTopAnchor,i.isMiddleAnchor=h.isMiddleAnchor,i.isBottomAnchor=h.isBottomAnchor;var y=e(87642);i.segmentsIntersect=y.segmentsIntersect,i.segmentDistance=y.segmentDistance,i.getTextLocation=y.getTextLocation,i.clearLocationCache=y.clearLocationCache,i.getVisibleSegment=y.getVisibleSegment,i.findPointOnPath=y.findPointOnPath;var v=e(1426);i.extendFlat=v.extendFlat,i.extendDeep=v.extendDeep,i.extendDeepAll=v.extendDeepAll,i.extendDeepNoArrays=v.extendDeepNoArrays;var m=e(47769);i.log=m.log,i.warn=m.warn,i.error=m.error;var _=e(30587);i.counterRegex=_.counter;var f=e(79990);i.throttle=f.throttle,i.throttleDone=f.done,i.clearThrottle=f.clear;var S=e(24401);function w(W){var Q={};for(var ne in W)for(var re=W[ne],ae=0;ae<re.length;ae++)Q[re[ae]]=+ne;return Q}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=e(86367),i.preserveDrawingBuffer=e(45142),i.makeTraceGroups=e(77310),i._=e(15867),i.notifier=e(75046),i.filterUnique=e(75744),i.filterVisible=e(76756),i.pushUnique=e(75138),i.increment=e(39240),i.cleanNumber=e(95218),i.ensureNumber=function(W){return T(W)?(W=Number(W))>d||W<s?t:W:t},i.isIndex=function(W,Q){return!(Q!==void 0&&W>=Q)&&T(W)&&W>=0&&W%1==0},i.noop=e(64213),i.identity=e(23389),i.repeat=function(W,Q){for(var ne=new Array(Q),re=0;re<Q;re++)ne[re]=W;return ne},i.swapAttrs=function(W,Q,ne,re){ne||(ne="x"),re||(re="y");for(var ae=0;ae<Q.length;ae++){var ue=Q[ae],pe=i.nestedProperty(W,ue.replace("?",ne)),ge=i.nestedProperty(W,ue.replace("?",re)),_e=pe.get();pe.set(ge.get()),ge.set(_e)}},i.raiseToTop=function(W){W.parentNode.appendChild(W)},i.cancelTransition=function(W){return W.transition().duration(0)},i.constrain=function(W,Q,ne){return Q>ne?Math.max(ne,Math.min(Q,W)):Math.max(Q,Math.min(ne,W))},i.bBoxIntersect=function(W,Q,ne){return ne=ne||0,W.left<=Q.right+ne&&Q.left<=W.right+ne&&W.top<=Q.bottom+ne&&Q.top<=W.bottom+ne},i.simpleMap=function(W,Q,ne,re,ae){for(var ue=W.length,pe=new Array(ue),ge=0;ge<ue;ge++)pe[ge]=Q(W[ge],ne,re,ae);return pe},i.randstr=function W(Q,ne,re,ae){if(re||(re=16),ne===void 0&&(ne=24),ne<=0)return"0";var ue,pe,ge=Math.log(Math.pow(2,ne))/Math.log(re),_e="";for(ue=2;ge===1/0;ue*=2)ge=Math.log(Math.pow(2,ne/ue))/Math.log(re)*ue;var me=ge-Math.floor(ge);for(ue=0;ue<Math.floor(ge);ue++)_e=Math.floor(Math.random()*re).toString(re)+_e;me&&(pe=Math.pow(re,me),_e=Math.floor(Math.random()*pe).toString(re)+_e);var ve=parseInt(_e,re);return Q&&Q[_e]||ve!==1/0&&ve>=Math.pow(2,ne)?ae>10?(i.warn("randstr failed uniqueness"),_e):W(Q,ne,re,(ae||0)+1):_e},i.OptionControl=function(W,Q){W||(W={}),Q||(Q="opt");var ne={optionList:[],_newoption:function(re){re[Q]=W,ne[re.name]=re,ne.optionList.push(re)}};return ne["_"+Q]=W,ne},i.smooth=function(W,Q){if((Q=Math.round(Q)||0)<2)return W;var ne,re,ae,ue,pe=W.length,ge=2*pe,_e=2*Q-1,me=new Array(_e),ve=new Array(pe);for(ne=0;ne<_e;ne++)me[ne]=(1-Math.cos(Math.PI*(ne+1)/Q))/(2*Q);for(ne=0;ne<pe;ne++){for(ue=0,re=0;re<_e;re++)(ae=ne+re+1-Q)<-pe?ae-=ge*Math.round(ae/ge):ae>=ge&&(ae-=ge*Math.floor(ae/ge)),ae<0?ae=-1-ae:ae>=pe&&(ae=ge-1-ae),ue+=W[ae]*me[re];ve[ne]=ue}return ve},i.syncOrAsync=function(W,Q,ne){var re;function ae(){return i.syncOrAsync(W,Q,ne)}for(;W.length;)if((re=(0,W.splice(0,1)[0])(Q))&&re.then)return re.then(ae);return ne&&ne(Q)},i.stripTrailingSlash=function(W){return W.substr(-1)==="/"?W.substr(0,W.length-1):W},i.noneOrAll=function(W,Q,ne){if(W){var re,ae=!1,ue=!0;for(re=0;re<ne.length;re++)W[ne[re]]!=null?ae=!0:ue=!1;if(ae&&!ue)for(re=0;re<ne.length;re++)W[ne[re]]=Q[ne[re]]}},i.mergeArray=function(W,Q,ne,re){var ae=typeof re=="function";if(i.isArrayOrTypedArray(W))for(var ue=Math.min(W.length,Q.length),pe=0;pe<ue;pe++){var ge=W[pe];Q[pe][ne]=ae?re(ge):ge}},i.mergeArrayCastPositive=function(W,Q,ne){return i.mergeArray(W,Q,ne,function(re){var ae=+re;return isFinite(ae)&&ae>0?ae:0})},i.fillArray=function(W,Q,ne,re){if(re=re||i.identity,i.isArrayOrTypedArray(W))for(var ae=0;ae<Q.length;ae++)Q[ae][ne]=re(W[ae])},i.castOption=function(W,Q,ne,re){re=re||i.identity;var ae=i.nestedProperty(W,ne).get();return i.isArrayOrTypedArray(ae)?Array.isArray(Q)&&i.isArrayOrTypedArray(ae[Q[0]])?re(ae[Q[0]][Q[1]]):re(ae[Q]):ae},i.extractOption=function(W,Q,ne,re){if(ne in W)return W[ne];var ae=i.nestedProperty(Q,re).get();return Array.isArray(ae)?void 0:ae},i.tagSelected=function(W,Q,ne){var re,ae,ue=Q.selectedpoints,pe=Q._indexToPoints;pe&&(re=w(pe));for(var ge=0;ge<ue.length;ge++){var _e=ue[ge];if(i.isIndex(_e)||i.isArrayOrTypedArray(_e)&&i.isIndex(_e[0])&&i.isIndex(_e[1])){var me=re?re[_e]:_e,ve=ne?ne[me]:me;(ae=ve)!==void 0&&ae<W.length&&(W[ve].selected=1)}}},i.selIndices2selPoints=function(W){var Q=W.selectedpoints,ne=W._indexToPoints;if(ne){for(var re=w(ne),ae=[],ue=0;ue<Q.length;ue++){var pe=Q[ue];if(i.isIndex(pe)){var ge=re[pe];i.isIndex(ge)&&ae.push(ge)}}return ae}return Q},i.getTargetArray=function(W,Q){var ne=Q.target;if(typeof ne=="string"&&ne){var re=i.nestedProperty(W,ne).get();return!!Array.isArray(re)&&re}return!!Array.isArray(ne)&&ne},i.minExtend=function W(Q,ne,re){var ae={};typeof ne!="object"&&(ne={});var ue,pe,ge,_e=re==="pieLike"?-1:3,me=Object.keys(Q);for(ue=0;ue<me.length;ue++)ge=Q[pe=me[ue]],pe.charAt(0)!=="_"&&typeof ge!="function"&&(pe==="module"?ae[pe]=ge:Array.isArray(ge)?ae[pe]=pe==="colorscale"||_e===-1?ge.slice():ge.slice(0,_e):i.isTypedArray(ge)?ae[pe]=_e===-1?ge.subarray():ge.subarray(0,_e):ae[pe]=ge&&typeof ge=="object"?W(Q[pe],ne[pe],re):ge);for(me=Object.keys(ne),ue=0;ue<me.length;ue++)typeof(ge=ne[pe=me[ue]])=="object"&&pe in ae&&typeof ae[pe]=="object"||(ae[pe]=ge);return ae},i.titleCase=function(W){return W.charAt(0).toUpperCase()+W.substr(1)},i.containsAny=function(W,Q){for(var ne=0;ne<Q.length;ne++)if(W.indexOf(Q[ne])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var L=/iPad|iPhone|iPod/;i.isIOS=function(){return L.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var W=C.exec(window.navigator.userAgent);if(W&&W.length===2){var Q=parseInt(W[1]);if(!isNaN(Q))return Q}return null},i.isD3Selection=function(W){return W instanceof M.selection},i.ensureSingle=function(W,Q,ne,re){var ae=W.select(Q+(ne?"."+ne:""));if(ae.size())return ae;var ue=W.append(Q);return ne&&ue.classed(ne,!0),re&&ue.call(re),ue},i.ensureSingleById=function(W,Q,ne,re){var ae=W.select(Q+"#"+ne);if(ae.size())return ae;var ue=W.append(Q).attr("id",ne);return re&&ue.call(re),ue},i.objectFromPath=function(W,Q){for(var ne,re=W.split("."),ae=ne={},ue=0;ue<re.length;ue++){var pe=re[ue],ge=null,_e=re[ue].match(/(.*)\[([0-9]+)\]/);_e?(pe=_e[1],ge=_e[2],ne=ne[pe]=[],ue===re.length-1?ne[ge]=Q:ne[ge]={},ne=ne[ge]):(ue===re.length-1?ne[pe]=Q:ne[pe]={},ne=ne[pe])}return ae};var P=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function G(W){return W.slice(0,2)==="__"}i.expandObjectPaths=function(W){var Q,ne,re,ae,ue,pe,ge;if(typeof W=="object"&&!Array.isArray(W)){for(ne in W)if(W.hasOwnProperty(ne))if(Q=ne.match(P)){if(ae=W[ne],G(re=Q[1]))continue;delete W[ne],W[re]=i.extendDeepNoArrays(W[re]||{},i.objectFromPath(ne,i.expandObjectPaths(ae))[re])}else if(Q=ne.match(z)){if(ae=W[ne],G(re=Q[1]))continue;if(ue=parseInt(Q[2]),delete W[ne],W[re]=W[re]||[],Q[3]===".")ge=Q[4],pe=W[re][ue]=W[re][ue]||{},i.extendDeepNoArrays(pe,i.objectFromPath(ge,i.expandObjectPaths(ae)));else{if(G(re))continue;W[re][ue]=i.expandObjectPaths(ae)}}else{if(G(ne))continue;W[ne]=i.expandObjectPaths(W[ne])}}return W},i.numSeparate=function(W,Q,ne){if(ne||(ne=!1),typeof Q!="string"||Q.length===0)throw new Error("Separator string required for formatting!");typeof W=="number"&&(W=String(W));var re=/(\d+)(\d{3})/,ae=Q.charAt(0),ue=Q.charAt(1),pe=W.split("."),ge=pe[0],_e=pe.length>1?ae+pe[1]:"";if(ue&&(pe.length>1||ge.length>4||ne))for(;re.test(ge);)ge=ge.replace(re,"$1"+ue+"$2");return ge+_e},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var O=/^\w*$/;i.templateString=function(W,Q){var ne={};return W.replace(i.TEMPLATE_STRING_REGEX,function(re,ae){var ue;return O.test(ae)?ue=Q[ae]:(ne[ae]=ne[ae]||i.nestedProperty(Q,ae).get,ue=ne[ae]()),i.isValidTextValue(ue)?ue:""})};var H={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return te.apply(H,arguments)};var N={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return te.apply(N,arguments)};var B=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,V={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return te.apply(V,arguments)};var q=/^[:|\|]/;function te(W,Q,ne){var re=this,ae=arguments;Q||(Q={});var ue={};return W.replace(i.TEMPLATE_STRING_REGEX,function(pe,ge,_e){var me=ge==="_xother"||ge==="_yother",ve=ge==="_xother_"||ge==="_yother_",Oe=ge==="xother_"||ge==="yother_",Me=ge==="xother"||ge==="yother"||me||Oe||ve,Te=ge;(me||ve)&&(Te=Te.substring(1)),(Oe||ve)&&(Te=Te.substring(0,Te.length-1));var se,oe,he,Ee=null,ke=null;if(re.parseMultDiv){var be=function(we){var ye=we.match(B);return ye?{key:ye[1],op:ye[2],number:Number(ye[3])}:{key:we,op:null,number:null}}(Te);Te=be.key,Ee=be.op,ke=be.number}if(Me){if((se=Q[Te])===void 0)return""}else for(he=3;he<ae.length;he++)if(oe=ae[he]){if(oe.hasOwnProperty(Te)){se=oe[Te];break}if(O.test(Te)||(se=i.nestedProperty(oe,Te).get(),(se=ue[Te]||i.nestedProperty(oe,Te).get())&&(ue[Te]=se)),se!==void 0)break}if(se!==void 0&&(Ee==="*"&&(se*=ke),Ee==="/"&&(se/=ke)),se===void 0&&re)return re.count<re.max&&(i.warn("Variable '"+Te+"' in "+re.name+" could not be found!"),se=pe),re.count===re.max&&i.warn("Too many "+re.name+" warnings - additional warnings will be suppressed"),re.count++,pe;if(_e){var Ie;if(_e[0]===":"&&(se=(Ie=ne?ne.numberFormat:i.numberFormat)(_e.replace(q,""))(se)),_e[0]==="|"){Ie=ne?ne.timeFormat:k;var Fe=i.dateTime2ms(se);se=i.formatDate(Fe,_e.replace(q,""),!1,Ie)}}else{var ce=Te+"Label";Q.hasOwnProperty(ce)&&(se=Q[ce])}return Me&&(se="("+se+")",(me||ve)&&(se=" "+se),(Oe||ve)&&(se+=" ")),se})}i.subplotSort=function(W,Q){for(var ne=Math.min(W.length,Q.length)+1,re=0,ae=0,ue=0;ue<ne;ue++){var pe=W.charCodeAt(ue)||0,ge=Q.charCodeAt(ue)||0,_e=pe>=48&&pe<=57,me=ge>=48&&ge<=57;if(_e&&(re=10*re+pe-48),me&&(ae=10*ae+ge-48),!_e||!me){if(re!==ae)return re-ae;if(pe!==ge)return pe-ge}}return ae-re};var K=2e9;i.seedPseudoRandom=function(){K=2e9},i.pseudoRandom=function(){var W=K;return K=(69069*K+1)%4294967296,Math.abs(K-W)<429496729?i.pseudoRandom():K/4294967296},i.fillText=function(W,Q,ne){var re=Array.isArray(ne)?function(pe){ne.push(pe)}:function(pe){ne.text=pe},ae=i.extractOption(W,Q,"htx","hovertext");if(i.isValidTextValue(ae))return re(ae);var ue=i.extractOption(W,Q,"tx","text");return i.isValidTextValue(ue)?re(ue):void 0},i.isValidTextValue=function(W){return W||W===0},i.formatPercent=function(W,Q){Q=Q||0;for(var ne=(Math.round(100*W*Math.pow(10,Q))*Math.pow(.1,Q)).toFixed(Q)+"%",re=0;re<Q;re++)ne.indexOf(".")!==-1&&(ne=(ne=ne.replace("0%","%")).replace(".%","%"));return ne},i.isHidden=function(W){var Q=window.getComputedStyle(W).display;return!Q||Q==="none"},i.strTranslate=function(W,Q){return W||Q?"translate("+W+","+Q+")":""},i.strRotate=function(W){return W?"rotate("+W+")":""},i.strScale=function(W){return W!==1?"scale("+W+")":""},i.getTextTransform=function(W){var Q=W.noCenter,ne=W.textX,re=W.textY,ae=W.targetX,ue=W.targetY,pe=W.anchorX||0,ge=W.anchorY||0,_e=W.rotate,me=W.scale;return me?me>1&&(me=1):me=0,i.strTranslate(ae-me*(ne+pe),ue-me*(re+ge))+i.strScale(me)+(_e?"rotate("+_e+(Q?"":" "+ne+" "+re)+")":"")},i.setTransormAndDisplay=function(W,Q){W.attr("transform",i.getTextTransform(Q)),W.style("display",Q.scale?null:"none")},i.ensureUniformFontSize=function(W,Q){var ne=i.extendFlat({},Q);return ne.size=Math.max(Q.size,W._fullLayout.uniformtext.minsize||0),ne},i.join2=function(W,Q,ne){var re=W.length;return re>1?W.slice(0,-1).join(Q)+ne+W[re-1]:W.join(Q)},i.bigFont=function(W){return Math.round(1.2*W)};var J=i.getFirefoxVersion(),Y=J!==null&&J<86;i.getPositionFromD3Event=function(){return Y?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},41965:function(ee){ee.exports=function(D){return window&&window.process&&window.process.versions?Object.prototype.toString.call(D)==="[object Object]":Object.prototype.toString.call(D)==="[object Object]"&&Object.getPrototypeOf(D).hasOwnProperty("hasOwnProperty")}},66636:function(ee,D,e){var M=e(65487),k=/^\w*$/;ee.exports=function(l,T,b,d){var s,t,i;b=b||"name",d=d||"value";var r={};T&&T.length?(i=M(l,T),t=i.get()):t=l,T=T||"";var n={};if(t)for(s=0;s<t.length;s++)n[t[s][b]]=s;var o=k.test(d),a={set:function(u,p){var c=p===null?4:0;if(!t){if(!i||c===4)return;t=[],i.set(t)}var x=n[u];if(x===void 0){if(c===4)return;c|=3,x=t.length,n[u]=x}else p!==(o?t[x][d]:M(t[x],d).get())&&(c|=2);var g=t[x]=t[x]||{};return g[b]=u,o?g[d]=p:M(g,d).set(p),p!==null&&(c&=-5),r[x]=r[x]|c,a},get:function(u){if(t){var p=n[u];return p===void 0?void 0:o?t[p][d]:M(t[p],d).get()}},rename:function(u,p){var c=n[u];return c===void 0||(r[c]=1|r[c],n[p]=c,delete n[u],t[c][b]=p),a},remove:function(u){var p=n[u];if(p===void 0)return a;var c=t[p];if(Object.keys(c).length>2)return r[p]=2|r[p],a.set(u,null);if(o){for(s=p;s<t.length;s++)r[s]=3|r[s];for(s=p;s<t.length;s++)n[t[s][b]]--;t.splice(p,1),delete n[u]}else M(c,d).set(null),r[p]=6|r[p];return a},constructUpdate:function(){for(var u,p,c={},x=Object.keys(r),g=0;g<x.length;g++)p=x[g],u=T+"["+p+"]",t[p]?(1&r[p]&&(c[u+"."+b]=t[p][b]),2&r[p]&&(c[u+"."+d]=o?4&r[p]?null:t[p][d]:4&r[p]?null:M(t[p],d).get())):c[u]=null;return c}};return a}},15867:function(ee,D,e){var M=e(73972);ee.exports=function(k,l){for(var T=k._context.locale,b=0;b<2;b++){for(var d=k._context.locales,s=0;s<2;s++){var t=(d[T]||{}).dictionary;if(t){var i=t[l];if(i)return i}d=M.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return l}},47769:function(ee,D,e){var M=e(72075).dfltConfig,k=e(75046),l=ee.exports={};l.log=function(){var T;if(M.logging>1){var b=["LOG:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(M.notifyOnLogging>1){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"long")}},l.warn=function(){var T;if(M.logging>0){var b=["WARN:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(M.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"stick")}},l.error=function(){var T;if(M.logging>0){var b=["ERROR:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.error.apply(console,b)}if(M.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"stick")}}},77310:function(ee,D,e){var M=e(39898);ee.exports=function(k,l,T){var b=k.selectAll("g."+T.replace(/\s/g,".")).data(l,function(s){return s[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",T),b.order();var d=k.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(s){s[0][d]=M.select(this)}),b}},35657:function(ee,D,e){var M=e(79576);D.init2dArray=function(k,l){for(var T=new Array(k),b=0;b<k;b++)T[b]=new Array(l);return T},D.transposeRagged=function(k){var l,T,b=0,d=k.length;for(l=0;l<d;l++)b=Math.max(b,k[l].length);var s=new Array(b);for(l=0;l<b;l++)for(s[l]=new Array(d),T=0;T<d;T++)s[l][T]=k[T][l];return s},D.dot=function(k,l){if(!k.length||!l.length||k.length!==l.length)return null;var T,b,d=k.length;if(k[0].length)for(T=new Array(d),b=0;b<d;b++)T[b]=D.dot(k[b],l);else if(l[0].length){var s=D.transposeRagged(l);for(T=new Array(s.length),b=0;b<s.length;b++)T[b]=D.dot(k,s[b])}else for(T=0,b=0;b<d;b++)T+=k[b]*l[b];return T},D.translationMatrix=function(k,l){return[[1,0,k],[0,1,l],[0,0,1]]},D.rotationMatrix=function(k){var l=k*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},D.rotationXYMatrix=function(k,l,T){return D.dot(D.dot(D.translationMatrix(l,T),D.rotationMatrix(k)),D.translationMatrix(-l,-T))},D.apply3DTransform=function(k){return function(){var l=arguments,T=arguments.length===1?l[0]:[l[0],l[1],l[2]||0];return D.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},D.apply2DTransform=function(k){return function(){var l=arguments;l.length===3&&(l=l[0]);var T=arguments.length===1?l[0]:[l[0],l[1]];return D.dot(k,[T[0],T[1],1]).slice(0,2)}},D.apply2DTransform2=function(k){var l=D.apply2DTransform(k);return function(T){return l(T.slice(0,2)).concat(l(T.slice(2,4)))}},D.convertCssMatrix=function(k){if(k){var l=k.length;if(l===16)return k;if(l===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},D.inverseTransformMatrix=function(k){var l=[];return M.invert(l,k),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},64872:function(ee){ee.exports={mod:function(D,e){var M=D%e;return M<0?M+e:M},modHalf:function(D,e){return Math.abs(D)>e/2?D-Math.round(D/e)*e:D}}},65487:function(ee,D,e){var M=e(92770),k=e(73627).isArrayOrTypedArray;function l(r,n){return function(){var o,a,u,p,c,x=r;for(p=0;p<n.length-1;p++){if((o=n[p])===-1){for(a=!0,u=[],c=0;c<x.length;c++)u[c]=l(x[c],n.slice(p+1))(),u[c]!==u[0]&&(a=!1);return a?u[0]:u}if(typeof o=="number"&&!k(x)||typeof(x=x[o])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(u=x[n[p]])!==null)return u}}ee.exports=function(r,n){if(M(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";var o,a,u,p,c=n.split(".");for(p=0;p<c.length;p++)if(String(c[p]).slice(0,2)==="__")throw"bad property string";for(p=0;p<c.length;){if(o=String(c[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(o[1])c[p]=o[1];else{if(p!==0)throw"bad property string";c.splice(0,1)}for(a=o[2].substr(1,o[2].length-2).split("]["),u=0;u<a.length;u++)p++,c.splice(p,0,Number(a[u]))}p++}return typeof r!="object"?function(x,g,h){return{set:function(){throw"bad container"},get:function(){},astr:g,parts:h,obj:x}}(r,n,c):{set:d(r,c,n),get:l(r,c),astr:n,parts:c,obj:r}};var T=/(^|\.)args\[/;function b(r,n){return r===void 0||r===null&&!n.match(T)}function d(r,n,o){return function(a){var u,p,c=r,x="",g=b(a,o);for(p=0;p<n.length-1;p++){if(typeof(u=n[p])=="number"&&!k(c))throw"array index but container is not an array";if(u===-1){if(g=!t(c,n.slice(p+1),a,o))break;return}if(!i(c,u,n[p+1],g))break;if(typeof(c=c[u])!="object"||c===null)throw"container is not an object";x=s(x,u)}if(g){if(p===n.length-1&&(delete c[n[p]],Array.isArray(c)&&+n[p]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[n[p]]=a}}function s(r,n){var o=n;return M(n)?o="["+n+"]":r&&(o="."+n),r+o}function t(r,n,o,a){var u,p=k(o),c=!0,x=o,g=a.replace("-1",0),h=!p&&b(o,g),y=n[0];for(u=0;u<r.length;u++)g=a.replace("-1",u),p&&(h=b(x=o[u%o.length],g)),h&&(c=!1),i(r,u,y,h)&&d(r[u],n,a.replace("-1",u))(x);return c}function i(r,n,o,a){if(r[n]===void 0){if(a)return!1;r[n]=typeof o=="number"?[]:{}}return!0}},64213:function(ee){ee.exports=function(){}},75046:function(ee,D,e){var M=e(39898),k=e(92770),l=[];ee.exports=function(T,b){if(l.indexOf(T)===-1){l.push(T);var d=1e3;k(b)?d=b:b==="long"&&(d=3e3);var s=M.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var r=M.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var n=r.append("p"),o=i.split(/<br\s*\/?>/g),a=0;a<o.length;a++)a&&n.append("br"),n.append("span").text(o[a]);b==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(d).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(r){var n=l.indexOf(r);n!==-1&&l.splice(n,1),M.select(this).remove()})}}},39918:function(ee,D,e){var M=e(6964),k="data-savedcursor";ee.exports=function(l,T){var b=l.attr(k);if(T){if(!b){for(var d=(l.attr("class")||"").split(" "),s=0;s<d.length;s++){var t=d[s];t.indexOf("cursor-")===0&&l.attr(k,t.substr(7)).classed(t,!1)}l.attr(k)||l.attr(k,"!!")}M(l,T)}else b&&(l.attr(k,null),b==="!!"?M(l):M(l,b))}},61082:function(ee,D,e){var M=e(35657).dot,k=e(50606).BADNUM,l=ee.exports={};l.tester=function(T){var b,d=T.slice(),s=d[0][0],t=s,i=d[0][1],r=i;for(d[d.length-1][0]===d[0][0]&&d[d.length-1][1]===d[0][1]||d.push(d[0]),b=1;b<d.length;b++)s=Math.min(s,d[b][0]),t=Math.max(t,d[b][0]),i=Math.min(i,d[b][1]),r=Math.max(r,d[b][1]);var n,o=!1;d.length===5&&(d[0][0]===d[1][0]?d[2][0]===d[3][0]&&d[0][1]===d[3][1]&&d[1][1]===d[2][1]&&(o=!0,n=function(p){return p[0]===d[0][0]}):d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(o=!0,n=function(p){return p[1]===d[0][1]}));var a=!0,u=d[0];for(b=1;b<d.length;b++)if(u[0]!==d[b][0]||u[1]!==d[b][1]){a=!1;break}return{xmin:s,xmax:t,ymin:i,ymax:r,pts:d,contains:o?function(p,c){var x=p[0],g=p[1];return!(x===k||x<s||x>t||g===k||g<i||g>r||c&&n(p))}:function(p,c){var x=p[0],g=p[1];if(x===k||x<s||x>t||g===k||g<i||g>r)return!1;var h,y,v,m,_,f=d.length,S=d[0][0],w=d[0][1],E=0;for(h=1;h<f;h++)if(y=S,v=w,S=d[h][0],w=d[h][1],!(x<(m=Math.min(y,S))||x>Math.max(y,S)||g>Math.max(v,w)))if(g<Math.min(v,w))x!==m&&E++;else{if(g===(_=S===y?g:v+(x-y)*(w-v)/(S-y)))return h!==1||!c;g<=_&&x!==m&&E++}return E%2==1},isRect:o,degenerate:a}},l.isSegmentBent=function(T,b,d,s){var t,i,r,n=T[b],o=[T[d][0]-n[0],T[d][1]-n[1]],a=M(o,o),u=Math.sqrt(a),p=[-o[1]/u,o[0]/u];for(t=b+1;t<d;t++)if(i=[T[t][0]-n[0],T[t][1]-n[1]],(r=M(i,o))<0||r>a||Math.abs(M(i,p))>s)return!0;return!1},l.filter=function(T,b){var d=[T[0]],s=0,t=0;function i(r){T.push(r);var n=d.length,o=s;d.splice(t+1);for(var a=o+1;a<T.length;a++)(a===T.length-1||l.isSegmentBent(T,o,a+1,b))&&(d.push(T[a]),d.length<n-2&&(s=a,t=d.length-1),o=a)}return T.length>1&&i(T.pop()),{addPt:i,raw:T,filtered:d}}},79749:function(ee,D,e){var M=e(58617),k=e(98580);ee.exports=function(l,T,b){var d=l._fullLayout,s=!0;return d._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||d._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:l._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:b||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(i){l&&l.emit&&l.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),s||M({container:d._glcontainer.node()}),s}},45142:function(ee,D,e){var M=e(92770),k=e(35791);ee.exports=function(l){var T;if(typeof(T=l&&l.hasOwnProperty("userAgent")?l.userAgent:function(){var n;return typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),n}())!="string")return!0;var b=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!b){for(var d=T.split(" "),s=1;s<d.length;s++)if(d[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var i=d[t];if(i.substr(0,8)==="Version/"){var r=i.substr(8).split(".")[0];if(M(r)&&(r=+r),r>=13)return!0}}}return b}},75138:function(ee){ee.exports=function(D,e){if(e instanceof RegExp){for(var M=e.toString(),k=0;k<D.length;k++)if(D[k]instanceof RegExp&&D[k].toString()===M)return D;D.push(e)}else!e&&e!==0||D.indexOf(e)!==-1||D.push(e);return D}},10847:function(ee,D,e){var M=e(71828),k=e(72075).dfltConfig,l={add:function(T,b,d,s,t){var i,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,i),T.undoQueue.index+=1):i=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(b),i.undo.args.unshift(d),i.redo.calls.push(s),i.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var b,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<b.undo.calls.length;d++)l.plotDo(T,b.undo.calls[d],b.undo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var b,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<b.redo.calls.length;d++)l.plotDo(T,b.redo.calls[d],b.redo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,b,d){T.autoplay=!0,d=function(s,t){for(var i,r=[],n=0;n<t.length;n++)i=t[n],r[n]=i===s?i:typeof i=="object"?Array.isArray(i)?M.extendDeep([],i):M.extendDeepAll({},i):i;return r}(T,d),b.apply(null,d)}};ee.exports=l},30587:function(ee,D){D.counter=function(e,M,k,l){var T=(M||"")+(k?"":"$"),b=l===!1?"":"^";return e==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+T)}},6962:function(ee){var D=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;ee.exports=function(M,k){for(;k;){var l=M.match(D);if(l)M=l[1];else{if(!M.match(e))throw new Error("bad relativeAttr call:"+[M,k]);M=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return M&&k.charAt(0)!=="["?M+"."+k:M+k}},51332:function(ee,D,e){var M=e(73627).isArrayOrTypedArray,k=e(41965);ee.exports=function l(T,b){for(var d in b){var s=b[d],t=T[d];if(t!==s)if(d.charAt(0)==="_"||typeof s=="function"){if(d in T)continue;T[d]=s}else if(M(s)&&M(t)&&k(s[0])){if(d==="customdata"||d==="ids")continue;for(var i=Math.min(s.length,t.length),r=0;r<i;r++)t[r]!==s[r]&&k(s[r])&&k(t[r])&&l(t[r],s[r])}else k(s)&&k(t)&&(l(t,s),Object.keys(t).length||delete T[d])}}},65888:function(ee,D,e){var M=e(92770),k=e(47769),l=e(23389),T=e(50606).BADNUM,b=1e-9;function d(r,n){return r<n}function s(r,n){return r<=n}function t(r,n){return r>n}function i(r,n){return r>=n}D.findBin=function(r,n,o){if(M(n.start))return o?Math.ceil((r-n.start)/n.size-b)-1:Math.floor((r-n.start)/n.size+b);var a,u,p=0,c=n.length,x=0,g=c>1?(n[c-1]-n[0])/(c-1):1;for(u=g>=0?o?d:s:o?i:t,r+=g*b*(o?-1:1)*(g>=0?1:-1);p<c&&x++<100;)u(n[a=Math.floor((p+c)/2)],r)?p=a+1:c=a;return x>90&&k.log("Long binary search..."),p-1},D.sorterAsc=function(r,n){return r-n},D.sorterDes=function(r,n){return n-r},D.distinctVals=function(r){var n,o=r.slice();for(o.sort(D.sorterAsc),n=o.length-1;n>-1&&o[n]===T;n--);for(var a,u=o[n]-o[0]||1,p=u/(n||1)/1e4,c=[],x=0;x<=n;x++){var g=o[x],h=g-a;a===void 0?(c.push(g),a=g):h>p&&(u=Math.min(u,h),c.push(g),a=g)}return{vals:c,minDiff:u}},D.roundUp=function(r,n,o){for(var a,u=0,p=n.length-1,c=0,x=o?0:1,g=o?1:0,h=o?Math.ceil:Math.floor;u<p&&c++<100;)n[a=h((u+p)/2)]<=r?u=a+x:p=a-g;return n[u]},D.sort=function(r,n){for(var o=0,a=0,u=1;u<r.length;u++){var p=n(r[u],r[u-1]);if(p<0?o=1:p>0&&(a=1),o&&a)return r.sort(n)}return a?r:r.reverse()},D.findIndexOfMin=function(r,n){n=n||l;for(var o,a=1/0,u=0;u<r.length;u++){var p=n(r[u]);p<a&&(a=p,o=u)}return o}},6964:function(ee){ee.exports=function(D,e){(D.attr("class")||"").split(" ").forEach(function(M){M.indexOf("cursor-")===0&&D.classed(M,!1)}),e&&D.classed("cursor-"+e,!0)}},58617:function(ee,D,e){var M=e(7901),k=function(){};ee.exports=function(l){for(var T in l)typeof l[T]=="function"&&(l[T]=k);l.destroy=function(){l.container.parentNode.removeChild(l.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=M.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=M.lightLine,b.style["z-index"]=30;var d=document.createElement("p");return d.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",d.style.position="relative",d.style.top="50%",d.style.left="50%",d.style.height="30%",d.style.width="50%",d.style.margin="-15% 0 0 -25%",b.appendChild(d),l.container.appendChild(b),l.container.style.background="#FFFFFF",l.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(ee){ee.exports=function(D){return Object.keys(D).sort()}},80038:function(ee,D,e){var M=e(92770),k=e(73627).isArrayOrTypedArray;D.aggNums=function(l,T,b,d){var s,t;if((!d||d>b.length)&&(d=b.length),M(T)||(T=!1),k(b[0])){for(t=new Array(d),s=0;s<d;s++)t[s]=D.aggNums(l,T,b[s]);b=t}for(s=0;s<d;s++)M(T)?M(b[s])&&(T=l(+T,+b[s])):T=b[s];return T},D.len=function(l){return D.aggNums(function(T){return T+1},0,l)},D.mean=function(l,T){return T||(T=D.len(l)),D.aggNums(function(b,d){return b+d},0,l)/T},D.midRange=function(l){if(l!==void 0&&l.length!==0)return(D.aggNums(Math.max,null,l)+D.aggNums(Math.min,null,l))/2},D.variance=function(l,T,b){return T||(T=D.len(l)),M(b)||(b=D.mean(l,T)),D.aggNums(function(d,s){return d+Math.pow(s-b,2)},0,l)/T},D.stdev=function(l,T,b){return Math.sqrt(D.variance(l,T,b))},D.median=function(l){var T=l.slice().sort();return D.interp(T,.5)},D.interp=function(l,T){if(!M(T))throw"n should be a finite number";if((T=T*l.length-.5)<0)return l[0];if(T>l.length-1)return l[l.length-1];var b=T%1;return b*l[Math.ceil(T)]+(1-b)*l[Math.floor(T)]}},78614:function(ee,D,e){var M=e(25075);ee.exports=function(k){return k?M(k):[0,0,0,1]}},3883:function(ee,D,e){var M=e(32396),k=e(91424),l=e(71828),T=null;ee.exports=function(){if(T!==null)return T;T=!1;var b=l.isIE()||l.isSafari()||l.isIOS();if(window.navigator.userAgent&&!b){var d=Array.from(M.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")T=d.some(function(r){return s.apply(null,r)});else{var t=k.tester.append("image").attr("style",M.STYLE),i=window.getComputedStyle(t.node()).imageRendering;T=d.some(function(r){var n=r[1];return i===n||i===n.toLowerCase()}),t.remove()}}return T}},63893:function(ee,D,e){var M=e(39898),k=e(71828),l=k.strTranslate,T=e(77922),b=e(18783).LINE_SPACING,d=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;D.convertToTspans=function(z,G,O){var H=z.text(),N=!z.attr("data-notex")&&G&&G._context.typesetMath&&typeof MathJax<"u"&&H.match(d),B=M.select(z.node().parentNode);if(!B.empty()){var V=z.attr("class")?z.attr("class").split(" ")[0]:"text";return V+="-math",B.selectAll("svg."+V).remove(),B.selectAll("g."+V+"-group").remove(),z.style("display",null).attr({"data-unformatted":H,"data-math":"N"}),N?(G&&G._promises||[]).push(new Promise(function(te){z.style("display","none");var K=parseInt(z.node().style.fontSize,10),J={fontSize:K};(function(Y,W,Q){var ne,re,ae,ue,pe=parseInt((MathJax.version||"").split(".")[0]);if(pe===2||pe===3){var ge=function(){var me="math-output-"+k.randstr({},64),ve=(ue=M.select("body").append("div").attr({id:me}).style({visibility:"hidden",position:"absolute","font-size":W.fontSize+"px"}).text(Y.replace(s,"\\lt ").replace(t,"\\gt "))).node();return pe===2?MathJax.Hub.Typeset(ve):MathJax.typeset([ve])},_e=function(){var me=ue.select(pe===2?".MathJax_SVG":".MathJax"),ve=!me.empty()&&ue.select("svg").node();if(ve){var Oe,Me=ve.getBoundingClientRect();Oe=pe===2?M.select("body").select("#MathJax_SVG_glyphs"):me.select("defs"),Q(me,Oe,Me)}else k.log("There was an error in the tex syntax.",Y),Q();ue.remove()};pe===2?MathJax.Hub.Queue(function(){return re=k.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((ne=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ge,_e,function(){if(ne!=="SVG")return MathJax.Hub.setRenderer(ne)},function(){return ae!==void 0&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(re)}):pe===3&&(re=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(ne=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ge(),_e(),ne!=="svg"&&(MathJax.config.startup.output=ne),MathJax.config=re}))}else k.warn("No MathJax version:",MathJax.version)})(N[2],J,function(Y,W,Q){B.selectAll("svg."+V).remove(),B.selectAll("g."+V+"-group").remove();var ne=Y&&Y.select("svg");if(!ne||!ne.node())return q(),void te();var re=B.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":H,"data-math":"Y"});re.node().appendChild(ne.node()),W&&W.node()&&ne.node().insertBefore(W.node().cloneNode(!0),ne.node().firstChild);var ae=Q.width,ue=Q.height;ne.attr({class:V,height:ue,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var pe=z.node().style.fill||"black",ge=ne.select("g");ge.attr({fill:pe,stroke:pe});var _e=ge.node().getBoundingClientRect(),me=_e.width,ve=_e.height;(me>ae||ve>ue)&&(ne.style("overflow","hidden"),me=(_e=ne.node().getBoundingClientRect()).width,ve=_e.height);var Oe=+z.attr("x"),Me=+z.attr("y"),Te=-(K||z.node().getBoundingClientRect().height)/4;if(V[0]==="y")re.attr({transform:"rotate("+[-90,Oe,Me]+")"+l(-me/2,Te-ve/2)});else if(V[0]==="l")Me=Te-ve/2;else if(V[0]==="a"&&V.indexOf("atitle")!==0)Oe=0,Me=Te;else{var se=z.attr("text-anchor");Oe-=me*(se==="middle"?.5:se==="end"?1:0),Me=Me+Te-ve/2}ne.attr({x:Oe,y:Me}),O&&O.call(z,re),te(re)})})):q(),z}function q(){B.empty()||(V=z.attr("class")+"-math",B.select("svg."+V).remove()),z.text("").style("white-space","pre");var te=function(K,J){J=J.replace(p," ");var Y,W=!1,Q=[],ne=-1;function re(){ne++;var ke=document.createElementNS(T.svg,"tspan");M.select(ke).attr({class:"line",dy:ne*b+"em"}),K.appendChild(ke),Y=ke;var be=Q;if(Q=[{node:ke}],be.length>1)for(var Ie=1;Ie<be.length;Ie++)ae(be[Ie])}function ae(ke){var be,Ie=ke.type,Fe={};if(Ie==="a"){be="a";var ce=ke.target,we=ke.href,ye=ke.popup;we&&(Fe={"xlink:xlink:show":ce==="_blank"||ce.charAt(0)!=="_"?"new":"replace",target:ce,"xlink:xlink:href":we},ye&&(Fe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+ye+'");return false;'))}else be="tspan";ke.style&&(Fe.style=ke.style);var Ce=document.createElementNS(T.svg,be);if(Ie==="sup"||Ie==="sub"){ue(Y,a),Y.appendChild(Ce);var Re=document.createElementNS(T.svg,"tspan");ue(Re,a),M.select(Re).attr("dy",o[Ie]),Fe.dy=n[Ie],Y.appendChild(Ce),Y.appendChild(Re)}else Y.appendChild(Ce);M.select(Ce).attr(Fe),Y=ke.node=Ce,Q.push(ke)}function ue(ke,be){ke.appendChild(document.createTextNode(be))}function pe(ke){if(Q.length!==1){var be=Q.pop();ke!==be.type&&k.log("Start tag <"+be.type+"> doesnt match end tag <"+ke+">. Pretending it did match.",J),Y=Q[Q.length-1].node}else k.log("Ignoring unexpected end tag </"+ke+">.",J)}g.test(J)?re():(Y=K,Q=[{node:K}]);for(var ge=J.split(c),_e=0;_e<ge.length;_e++){var me=ge[_e],ve=me.match(x),Oe=ve&&ve[2].toLowerCase(),Me=r[Oe];if(Oe==="br")re();else if(Me===void 0)ue(Y,E(me));else if(ve[1])pe(Oe);else{var Te=ve[4],se={type:Oe},oe=_(Te,h);if(oe?(oe=oe.replace(f,"$1 fill:"),Me&&(oe+=";"+Me)):Me&&(oe=Me),oe&&(se.style=oe),Oe==="a"){W=!0;var he=_(Te,y);if(he){var Ee=L(he);Ee&&(se.href=Ee,se.target=_(Te,v)||"_blank",se.popup=_(Te,m))}}ae(se)}}return W}(z.node(),H);te&&z.style("pointer-events","all"),D.positionText(z),O&&O.call(z)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},o={sub:"-0.21em",sup:"0.42em"},a="",u=["http:","https:","mailto:","",void 0,":"],p=D.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,g=/<br(\s+.*)?>/i;D.BR_TAG_ALL=/<br(\s+.*)?>/gi;var h=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,v=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(z,G){if(!z)return null;var O=z.match(G),H=O&&(O[3]||O[4]);return H&&E(H)}var f=/(^|;)\s*color:/;D.plainText=function(z,G){for(var O=(G=G||{}).len!==void 0&&G.len!==-1?G.len:1/0,H=G.allowedTags!==void 0?G.allowedTags:["br"],N=z.split(c),B=[],V="",q=0,te=0;te<N.length;te++){var K=N[te],J=K.match(x),Y=J&&J[2].toLowerCase();if(Y)H.indexOf(Y)!==-1&&(B.push(K),V=Y);else{var W=K.length;if(q+W<O)B.push(K),q+=W;else if(q<O){var Q=O-q;V&&(V!=="br"||Q<=3||W<=3)&&B.pop(),O>3?B.push(K.substr(0,Q-3)+"..."):B.push(K.substr(0,Q));break}V=""}}return B.join("")};var S={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(z){return z.replace(w,function(G,O){return(O.charAt(0)==="#"?function(H){if(!(H>1114111)){var N=String.fromCodePoint;if(N)return N(H);var B=String.fromCharCode;return H<=65535?B(H):B(55232+(H>>10),H%1024+56320)}}(O.charAt(1)==="x"?parseInt(O.substr(2),16):parseInt(O.substr(1),10)):S[O])||G})}function L(z){var G=encodeURI(decodeURI(z)),O=document.createElement("a"),H=document.createElement("a");O.href=z,H.href=G;var N=O.protocol,B=H.protocol;return u.indexOf(N)!==-1&&u.indexOf(B)!==-1?G:""}function C(z,G,O){var H,N,B,V=O.horizontalAlign,q=O.verticalAlign||"top",te=z.node().getBoundingClientRect(),K=G.node().getBoundingClientRect();return N=q==="bottom"?function(){return te.bottom-H.height}:q==="middle"?function(){return te.top+(te.height-H.height)/2}:function(){return te.top},B=V==="right"?function(){return te.right-H.width}:V==="center"?function(){return te.left+(te.width-H.width)/2}:function(){return te.left},function(){H=this.node().getBoundingClientRect();var J=B()-K.left,Y=N()-K.top,W=O.gd||{};if(O.gd){W._fullLayout._calcInverseTransform(W);var Q=k.apply3DTransform(W._fullLayout._invTransform)(J,Y);J=Q[0],Y=Q[1]}return this.style({top:Y+"px",left:J+"px","z-index":1e3}),this}}D.convertEntities=E,D.sanitizeHTML=function(z){z=z.replace(p," ");for(var G=document.createElement("p"),O=G,H=[],N=z.split(c),B=0;B<N.length;B++){var V=N[B],q=V.match(x),te=q&&q[2].toLowerCase();if(te in r)if(q[1])H.length&&(O=H.pop());else{var K=q[4],J=_(K,h),Y=J?{style:J}:{};if(te==="a"){var W=_(K,y);if(W){var Q=L(W);if(Q){Y.href=Q;var ne=_(K,v);ne&&(Y.target=ne)}}}var re=document.createElement(te);O.appendChild(re),M.select(re).attr(Y),O=re,H.push(re)}else O.appendChild(document.createTextNode(E(V)))}return G.innerHTML},D.lineCount=function(z){return z.selectAll("tspan.line").size()||1},D.positionText=function(z,G,O){return z.each(function(){var H=M.select(this);function N(q,te){return te===void 0?(te=H.attr(q))===null&&(H.attr(q,0),te=0):H.attr(q,te),te}var B=N("x",G),V=N("y",O);this.nodeName==="text"&&H.selectAll("tspan.line").attr({x:B,y:V})})};var P="1px ";D.makeTextShadow=function(z){return P+P+P+z+", -"+P+"-"+P+P+z+", "+P+"-"+P+P+z+", -"+P+P+P+z},D.makeEditable=function(z,G){var O=G.gd,H=G.delegate,N=M.dispatch("edit","input","cancel"),B=H||z;if(z.style({"pointer-events":H?"none":"all"}),z.size()!==1)throw new Error("boo");function V(){var te,K,J,Y,W;te=M.select(O).select(".svg-container"),K=te.append("div"),J=z.node().style,Y=parseFloat(J.fontSize||12),(W=G.text)===void 0&&(W=z.attr("data-unformatted")),K.classed("plugin-editable editable",!0).style({position:"absolute","font-family":J.fontFamily||"Arial","font-size":Y,color:G.fill||J.fill||"black",opacity:1,"background-color":G.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Y/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(W).call(C(z,te,G)).on("blur",function(){O._editing=!1,z.text(this.textContent).style({opacity:1});var re,ae=M.select(this).attr("class");(re=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(z.node().parentNode).select(re).style({opacity:0});var ue=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),N.edit.call(z,ue)}).on("focus",function(){var re=this;O._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===re)return!1;document.activeElement===K.node()&&K.node().blur()})}).on("keyup",function(){M.event.which===27?(O._editing=!1,z.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),N.cancel.call(z,this.textContent)):(N.input.call(z,this.textContent),M.select(this).call(C(z,te,G)))}).on("keydown",function(){M.event.which===13&&this.blur()}).call(q),z.style({opacity:0});var Q,ne=B.attr("class");(Q=ne?"."+ne.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(z.node().parentNode).select(Q).style({opacity:0})}function q(te){var K=te.node(),J=document.createRange();J.selectNodeContents(K);var Y=window.getSelection();Y.removeAllRanges(),Y.addRange(J),K.focus()}return G.immediate?V():B.on("click",V),M.rebind(z,N,"on")}},79990:function(ee,D){var e={};function M(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}D.throttle=function(k,l,T){var b=e[k],d=Date.now();if(!b){for(var s in e)e[s].ts<d-6e4&&delete e[s];b=e[k]={ts:0,timer:null}}function t(){T(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}M(b),d>b.ts+l?t():b.timer=setTimeout(function(){t(),b.timer=null},l)},D.done=function(k){var l=e[k];return l&&l.timer?new Promise(function(T){var b=l.onDone;l.onDone=function(){b&&b(),T(),l.onDone=null}}):Promise.resolve()},D.clear=function(k){if(k)M(e[k]),delete e[k];else for(var l in e)D.clear(l)}},58163:function(ee,D,e){var M=e(92770);ee.exports=function(k,l){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(l[0],l[1]))/Math.LN10;return M(T)||(T=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),T}},90973:function(ee,D,e){var M=ee.exports={},k=e(78776).locationmodeToLayer,l=e(96892).zL;M.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(T,b){return T+b+".json"},M.getTopojsonFeatures=function(T,b){var d=k[T.locationmode],s=b.objects[d];return l(b,s).features}},37815:function(ee){ee.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(ee){ee.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(ee,D,e){var M=e(73972);ee.exports=function(k){for(var l,T,b=M.layoutArrayContainers,d=M.layoutArrayRegexes,s=k.split("[")[0],t=0;t<d.length;t++)if((T=k.match(d[t]))&&T.index===0){l=T[0];break}if(l||(l=b[b.indexOf(s)]),!l)return!1;var i=k.substr(l.length);return i?!!(T=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:l,index:Number(T[1]),property:T[3]||""}:{array:l,index:"",property:""}}},30962:function(ee,D,e){var M=e(1426).extendFlat,k=e(41965),l={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},b=l.flags.slice().concat(["fullReplot"]),d=T.flags.slice().concat("layoutReplot");function s(r){for(var n={},o=0;o<r.length;o++)n[r[o]]=!1;return n}function t(r,n,o){var a=M({},r);for(var u in a){var p=a[u];k(p)&&(a[u]=i(p,n,0,u))}return o==="from-root"&&(a.editType=n),a}function i(r,n,o,a){if(r.valType){var u=M({},r);if(u.editType=n,Array.isArray(r.items)){u.items=new Array(r.items.length);for(var p=0;p<r.items.length;p++)u.items[p]=i(r.items[p],n)}return u}return t(r,n,a.charAt(0)==="_"?"nested":"from-root")}ee.exports={traces:l,layout:T,traceFlags:function(){return s(b)},layoutFlags:function(){return s(d)},update:function(r,n){var o=n.editType;if(o&&o!=="none")for(var a=o.split("+"),u=0;u<a.length;u++)r[a[u]]=!0},overrideAll:t}},58377:function(ee,D,e){var M=e(92770),k=e(27812),l=e(73972),T=e(71828),b=e(74875),d=e(41675),s=e(7901),t=d.cleanId,i=d.getFromTrace,r=l.traceIs;function n(y,v){var m=y[v],_=v.charAt(0);m&&m!=="paper"&&(y[v]=t(m,_,!0))}function o(y){function v(m,_){var f=y[m],S=y.title&&y.title[_];f&&!S&&(y.title||(y.title={}),y.title[_]=y[m],delete y[m])}y&&(typeof y.title!="string"&&typeof y.title!="number"||(y.title={text:y.title}),v("titlefont","font"),v("titleposition","position"),v("titleside","side"),v("titleoffset","offset"))}function a(y){if(!T.isPlainObject(y))return!1;var v=y.name;return delete y.name,delete y.showlegend,(typeof v=="string"||typeof v=="number")&&String(v)}function u(y,v,m,_){if(m&&!_)return y;if(_&&!m||!y.trim())return v;if(!v.trim())return y;var f,S=Math.min(y.length,v.length);for(f=0;f<S&&y.charAt(f)===v.charAt(f);f++);return y.substr(0,f).trim()}function p(y){var v="middle",m="center";return typeof y=="string"&&(y.indexOf("top")!==-1?v="top":y.indexOf("bottom")!==-1&&(v="bottom"),y.indexOf("left")!==-1?m="left":y.indexOf("right")!==-1&&(m="right")),v+" "+m}function c(y,v){return v in y&&typeof y[v]=="object"&&Object.keys(y[v]).length===0}D.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&T.log("Clearing previous rejected promises from queue."),y._promises=[]},D.cleanLayout=function(y){var v,m;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var _=(b.subplotsRegistry.cartesian||{}).attrRegex,f=(b.subplotsRegistry.polar||{}).attrRegex,S=(b.subplotsRegistry.ternary||{}).attrRegex,w=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(y);for(v=0;v<E.length;v++){var L=E[v];if(_&&_.test(L)){var C=y[L];C.anchor&&C.anchor!=="free"&&(C.anchor=t(C.anchor)),C.overlaying&&(C.overlaying=t(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),C.autorange!=="withzero"&&C.autorange!=="tozero"||(C.autorange=!0,C.rangemode="tozero"),C.insiderange&&delete C.range,delete C.islog,delete C.isdate,delete C.categories,c(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),o(C)}else if(f&&f.test(L))o(y[L].radialaxis);else if(S&&S.test(L)){var P=y[L];o(P.aaxis),o(P.baxis),o(P.caxis)}else if(w&&w.test(L)){var z=y[L],G=z.cameraposition;if(Array.isArray(G)&&G[0].length===4){var O=G[0],H=G[1],N=G[2],B=k([],O),V=[];for(m=0;m<3;++m)V[m]=H[m]+N*B[2+4*m];z.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:H[0],y:H[1],z:H[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}o(z.xaxis),o(z.yaxis),o(z.zaxis)}}var q=Array.isArray(y.annotations)?y.annotations.length:0;for(v=0;v<q;v++){var te=y.annotations[v];T.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),n(te,"xref"),n(te,"yref"))}var K=Array.isArray(y.shapes)?y.shapes.length:0;for(v=0;v<K;v++){var J=y.shapes[v];T.isPlainObject(J)&&(n(J,"xref"),n(J,"yref"))}var Y=Array.isArray(y.images)?y.images.length:0;for(v=0;v<Y;v++){var W=y.images[v];T.isPlainObject(W)&&(n(W,"xref"),n(W,"yref"))}var Q=y.legend;return Q&&(Q.x>3?(Q.x=1.02,Q.xanchor="left"):Q.x<-2&&(Q.x=-.02,Q.xanchor="right"),Q.y>3?(Q.y=1.02,Q.yanchor="bottom"):Q.y<-2&&(Q.y=-.02,Q.yanchor="top")),o(y),y.dragmode==="rotate"&&(y.dragmode="orbit"),s.clean(y),y.template&&y.template.layout&&D.cleanLayout(y.template.layout),y},D.cleanData=function(y){for(var v=0;v<y.length;v++){var m,_=y[v];if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var f=s.defaults,S=_.error_y.color||(r(_,"bar")?s.defaultLine:f[v%f.length]);_.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir!=="h"||!r(_,"bar")&&_.type.substr(0,9)!=="histogram"||(_.orientation="h",D.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&D.swapXYData(_),_.type!=="histogramx"&&_.type!=="histogramy"||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=t(_.xaxis,"x")),_.yaxis&&(_.yaxis=t(_.yaxis,"y")),r(_,"gl3d")&&_.scene&&(_.scene=b.subplotsRegistry.gl3d.cleanId(_.scene)),!r(_,"pie-like")&&!r(_,"bar-like"))if(Array.isArray(_.textposition))for(m=0;m<_.textposition.length;m++)_.textposition[m]=p(_.textposition[m]);else _.textposition&&(_.textposition=p(_.textposition));var w=l.getModule(_);if(w&&w.colorbar){var E=w.colorbar.container,L=E?_[E]:_;L&&L.colorscale&&(L.colorscale==="YIGnBu"&&(L.colorscale="YlGnBu"),L.colorscale==="YIOrRd"&&(L.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var C=["x","y","z"];for(m=0;m<C.length;m++){var P=_.contours[C[m]];T.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var z=(_.increasing||{}).showlegend!==!1,G=(_.decreasing||{}).showlegend!==!1,O=a(_.increasing),H=a(_.decreasing);if(O!==!1&&H!==!1){var N=u(O,H,z,G);N&&(_.name=N)}else!O&&!H||_.name||(_.name=O||H)}if(Array.isArray(_.transforms)){var B=_.transforms;for(m=0;m<B.length;m++){var V=B[m];if(T.isPlainObject(V))switch(V.type){case"filter":V.filtersrc&&(V.target=V.filtersrc,delete V.filtersrc),V.calendar&&(V.valuecalendar||(V.valuecalendar=V.calendar),delete V.calendar);break;case"groupby":if(V.styles=V.styles||V.style,V.styles&&!Array.isArray(V.styles)){var q=V.styles,te=Object.keys(q);V.styles=[];for(var K=0;K<te.length;K++)V.styles.push({target:te[K],value:q[te[K]]})}}}}c(_,"line")&&delete _.line,"marker"in _&&(c(_.marker,"line")&&delete _.marker.line,c(_,"marker")&&delete _.marker),s.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),o(_),_.colorbar&&o(_.colorbar),_.marker&&_.marker.colorbar&&o(_.marker.colorbar),_.line&&_.line.colorbar&&o(_.line.colorbar),_.aaxis&&o(_.aaxis),_.baxis&&o(_.baxis)}},D.swapXYData=function(y){var v;if(T.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var m=y.error_y,_="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(y,["error_?.copy_ystyle"]),_&&T.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if(typeof y.hoverinfo=="string"){var f=y.hoverinfo.split("+");for(v=0;v<f.length;v++)f[v]==="x"?f[v]="y":f[v]==="y"&&(f[v]="x");y.hoverinfo=f.join("+")}},D.coerceTraceIndices=function(y,v){if(M(v))return[v];if(!Array.isArray(v)||!v.length)return y.data.map(function(f,S){return S});if(Array.isArray(v)){for(var m=[],_=0;_<v.length;_++)T.isIndex(v[_],y.data.length)?m.push(v[_]):T.warn("trace index (",v[_],") is not a number or is out of bounds");return m}return v},D.manageArrayContainers=function(y,v,m){var _=y.obj,f=y.parts,S=f.length,w=f[S-1],E=M(w);if(E&&v===null){var L=f.slice(0,S-1).join(".");T.nestedProperty(_,L).get().splice(w,1)}else E&&y.get()===void 0&&y.get()===void 0&&(m[y.astr]=null),y.set(v)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function g(y){var v=y.search(x);if(v>0)return y.substr(0,v)}D.hasParent=function(y,v){for(var m=g(v);m;){if(m in y)return!0;m=g(m)}return!1};var h=["x","y","z"];D.clearAxisTypes=function(y,v,m){for(var _=0;_<v.length;_++)for(var f=y._fullData[_],S=0;S<3;S++){var w=i(y,f,h[S]);if(w&&w.type!=="log"){var E=w._name,L=w._id.substr(1);if(L.substr(0,5)==="scene"){if(m[L]!==void 0)continue;E=L+"."+E}var C=E+".type";m[E]===void 0&&m[C]===void 0&&T.nestedProperty(y.layout,C).set(null)}}}},10641:function(ee,D,e){var M=e(72391);D._doPlot=M._doPlot,D.newPlot=M.newPlot,D.restyle=M.restyle,D.relayout=M.relayout,D.redraw=M.redraw,D.update=M.update,D._guiRestyle=M._guiRestyle,D._guiRelayout=M._guiRelayout,D._guiUpdate=M._guiUpdate,D._storeDirectGUIEdit=M._storeDirectGUIEdit,D.react=M.react,D.extendTraces=M.extendTraces,D.prependTraces=M.prependTraces,D.addTraces=M.addTraces,D.deleteTraces=M.deleteTraces,D.moveTraces=M.moveTraces,D.purge=M.purge,D.addFrames=M.addFrames,D.deleteFrames=M.deleteFrames,D.animate=M.animate,D.setPlotConfig=M.setPlotConfig;var k=e(24401).getGraphDiv,l=e(34031).eraseActiveShape;D.deleteActiveShape=function(b){return l(k(b))},D.toImage=e(403),D.validate=e(84936),D.downloadImage=e(7239);var T=e(96318);D.makeTemplate=T.makeTemplate,D.validateTemplate=T.validateTemplate},6611:function(ee,D,e){var M=e(41965),k=e(64213),l=e(47769),T=e(65888).sorterAsc,b=e(73972);D.containerArrayMatch=e(14458);var d=D.isAddVal=function(t){return t==="add"||M(t)},s=D.isRemoveVal=function(t){return t===null||t==="remove"};D.applyContainerArrayChanges=function(t,i,r,n,o){var a=i.astr,u=b.getComponentMethod(a,"supplyLayoutDefaults"),p=b.getComponentMethod(a,"draw"),c=b.getComponentMethod(a,"drawOne"),x=n.replot||n.recalc||u===k||p===k,g=t.layout,h=t._fullLayout;if(r[""]){Object.keys(r).length>1&&l.warn("Full array edits are incompatible with other edits",a);var y=r[""][""];if(s(y))i.set(null);else{if(!Array.isArray(y))return l.warn("Unrecognized full array edit value",a,y),!0;i.set(y)}return!x&&(u(g,h),p(t),!0)}var v,m,_,f,S,w,E,L,C=Object.keys(r).map(Number).sort(T),P=i.get(),z=P||[],G=o(h,a).get(),O=[],H=-1,N=z.length;for(v=0;v<C.length;v++)if(f=r[_=C[v]],S=Object.keys(f),w=f[""],E=d(w),_<0||_>z.length-(E?0:1))l.warn("index out of range",a,_);else if(w!==void 0)S.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",a,_),s(w)?O.push(_):E?(w==="add"&&(w={}),z.splice(_,0,w),G&&G.splice(_,0,{})):l.warn("Unrecognized full object edit value",a,_,w),H===-1&&(H=_);else for(m=0;m<S.length;m++)L=a+"["+_+"].",o(z[_],S[m],L).set(f[S[m]]);for(v=O.length-1;v>=0;v--)z.splice(O[v],1),G&&G.splice(O[v],1);if(z.length?P||i.set(z):i.set(null),x)return!1;if(u(g,h),c!==k){var B;if(H===-1)B=C;else{for(N=Math.max(z.length,N),B=[],v=0;v<C.length&&!((_=C[v])>=H);v++)B.push(_);for(v=H;v<N;v++)B.push(v)}for(v=0;v<B.length;v++)c(t,B[v])}else p(t);return!0}},72391:function(ee,D,e){var M=e(39898),k=e(92770),l=e(57035),T=e(71828),b=T.nestedProperty,d=e(11086),s=e(10847),t=e(73972),i=e(86281),r=e(74875),n=e(89298),o=e(23608),a=e(13838),u=e(91424),p=e(7901),c=e(4305).initInteractions,x=e(77922),g=e(47322).clearOutline,h=e(72075).dfltConfig,y=e(6611),v=e(58377),m=e(61549),_=e(30962),f=e(85555).AX_NAME_PATTERN,S=0;function w(ke){var be=ke._fullLayout;be._redrawFromAutoMarginCount?be._redrawFromAutoMarginCount--:ke.emit("plotly_afterplot")}function E(ke,be){try{ke._fullLayout._paper.style("background",be)}catch(Ie){T.error(Ie)}}function L(ke,be){E(ke,p.combine(be,"white"))}function C(ke,be){if(!ke._context){ke._context=T.extendDeep({},h);var Ie=M.select("base");ke._context._baseUrl=Ie.size()&&Ie.attr("href")?window.location.href.split("#")[0]:""}var Fe,ce,we,ye=ke._context;if(be){for(ce=Object.keys(be),Fe=0;Fe<ce.length;Fe++)(we=ce[Fe])!=="editable"&&we!=="edits"&&we in ye&&(we==="setBackground"&&be[we]==="opaque"?ye[we]=L:ye[we]=be[we]);be.plot3dPixelRatio&&!ye.plotGlPixelRatio&&(ye.plotGlPixelRatio=ye.plot3dPixelRatio);var Ce=be.editable;if(Ce!==void 0)for(ye.editable=Ce,ce=Object.keys(ye.edits),Fe=0;Fe<ce.length;Fe++)ye.edits[ce[Fe]]=Ce;if(be.edits)for(ce=Object.keys(be.edits),Fe=0;Fe<ce.length;Fe++)(we=ce[Fe])in ye.edits&&(ye.edits[we]=be.edits[we]);ye._exportedPlot=be._exportedPlot}ye.staticPlot&&(ye.editable=!1,ye.edits={},ye.autosizable=!1,ye.scrollZoom=!1,ye.doubleClick=!1,ye.showTips=!1,ye.showLink=!1,ye.displayModeBar=!1),ye.displayModeBar!=="hover"||l||(ye.displayModeBar=!0),ye.setBackground!=="transparent"&&typeof ye.setBackground=="function"||(ye.setBackground=E),ye._hasZeroHeight=ye._hasZeroHeight||ke.clientHeight===0,ye._hasZeroWidth=ye._hasZeroWidth||ke.clientWidth===0;var Re=ye.scrollZoom,ze=ye._scrollZoom={};if(Re===!0)ze.cartesian=1,ze.gl3d=1,ze.geo=1,ze.mapbox=1;else if(typeof Re=="string"){var He=Re.split("+");for(Fe=0;Fe<He.length;Fe++)ze[He[Fe]]=1}else Re!==!1&&(ze.gl3d=1,ze.geo=1,ze.mapbox=1)}function P(ke,be){var Ie,Fe,ce=be+1,we=[];for(Ie=0;Ie<ke.length;Ie++)(Fe=ke[Ie])<0?we.push(ce+Fe):we.push(Fe);return we}function z(ke,be,Ie){var Fe,ce;for(Fe=0;Fe<be.length;Fe++){if((ce=be[Fe])!==parseInt(ce,10))throw new Error("all values in "+Ie+" must be integers");if(ce>=ke.data.length||ce<-ke.data.length)throw new Error(Ie+" must be valid indices for gd.data.");if(be.indexOf(ce,Fe+1)>-1||ce>=0&&be.indexOf(-ke.data.length+ce)>-1||ce<0&&be.indexOf(ke.data.length+ce)>-1)throw new Error("each index in "+Ie+" must be unique.")}}function G(ke,be,Ie){if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(be===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(be)||(be=[be]),z(ke,be,"currentIndices"),Ie===void 0||Array.isArray(Ie)||(Ie=[Ie]),Ie!==void 0&&z(ke,Ie,"newIndices"),Ie!==void 0&&be.length!==Ie.length)throw new Error("current and new indices must be of equal length.")}function O(ke,be,Ie,Fe,ce){(function(Je,ot,Qe,vt){var xt=T.isPlainObject(vt);if(!Array.isArray(Je.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(ot))throw new Error("update must be a key:value object");if(Qe===void 0)throw new Error("indices must be an integer or array of integers");for(var mt in z(Je,Qe,"indices"),ot){if(!Array.isArray(ot[mt])||ot[mt].length!==Qe.length)throw new Error("attribute "+mt+" must be an array of length equal to indices array length");if(xt&&(!(mt in vt)||!Array.isArray(vt[mt])||vt[mt].length!==ot[mt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(ke,be,Ie,Fe);for(var we=function(Je,ot,Qe,vt){var xt,mt,rt,it,Tt,Mt=T.isPlainObject(vt),Pt=[];for(var kt in Array.isArray(Qe)||(Qe=[Qe]),Qe=P(Qe,Je.data.length-1),ot)for(var Ze=0;Ze<Qe.length;Ze++){if(xt=Je.data[Qe[Ze]],mt=(rt=b(xt,kt)).get(),it=ot[kt][Ze],!T.isArrayOrTypedArray(it))throw new Error("attribute: "+kt+" index: "+Ze+" must be an array");if(!T.isArrayOrTypedArray(mt))throw new Error("cannot extend missing or non-array attribute: "+kt);if(mt.constructor!==it.constructor)throw new Error("cannot extend array with an array of a different type: "+kt);Tt=Mt?vt[kt][Ze]:vt,k(Tt)||(Tt=-1),Pt.push({prop:rt,target:mt,insert:it,maxp:Math.floor(Tt)})}return Pt}(ke,be,Ie,Fe),ye={},Ce={},Re=0;Re<we.length;Re++){var ze=we[Re].prop,He=we[Re].maxp,Ge=ce(we[Re].target,we[Re].insert,He);ze.set(Ge[0]),Array.isArray(ye[ze.astr])||(ye[ze.astr]=[]),ye[ze.astr].push(Ge[1]),Array.isArray(Ce[ze.astr])||(Ce[ze.astr]=[]),Ce[ze.astr].push(we[Re].target.length)}return{update:ye,maxPoints:Ce}}function H(ke,be){var Ie=new ke.constructor(ke.length+be.length);return Ie.set(ke),Ie.set(be,ke.length),Ie}function N(ke,be,Ie,Fe){ke=T.getGraphDiv(ke),v.clearPromiseQueue(ke);var ce={};if(typeof be=="string")ce[be]=Ie;else{if(!T.isPlainObject(be))return T.warn("Restyle fail.",be,Ie,Fe),Promise.reject();ce=T.extendFlat({},be),Fe===void 0&&(Fe=Ie)}Object.keys(ce).length&&(ke.changed=!0);var we=v.coerceTraceIndices(ke,Fe),ye=te(ke,ce,we),Ce=ye.flags;Ce.calc&&(ke.calcdata=void 0),Ce.clearAxisTypes&&v.clearAxisTypes(ke,we,{});var Re=[];Ce.fullReplot?Re.push(D._doPlot):(Re.push(r.previousPromises),r.supplyDefaults(ke),Ce.markerSize&&(r.doCalcdata(ke),W(Re)),Ce.style&&Re.push(m.doTraceStyle),Ce.colorbars&&Re.push(m.doColorBars),Re.push(w)),Re.push(r.rehover,r.redrag,r.reselect),s.add(ke,N,[ke,ye.undoit,ye.traces],N,[ke,ye.redoit,ye.traces]);var ze=T.syncOrAsync(Re,ke);return ze&&ze.then||(ze=Promise.resolve()),ze.then(function(){return ke.emit("plotly_restyle",ye.eventData),ke})}function B(ke){return ke===void 0?null:ke}function V(ke,be){return be?function(Ie,Fe,ce){var we=b(Ie,Fe),ye=we.set;return we.set=function(Ce){q((ce||"")+Fe,we.get(),Ce,ke),ye(Ce)},we}:b}function q(ke,be,Ie,Fe){if(Array.isArray(be)||Array.isArray(Ie))for(var ce=Array.isArray(be)?be:[],we=Array.isArray(Ie)?Ie:[],ye=Math.max(ce.length,we.length),Ce=0;Ce<ye;Ce++)q(ke+"["+Ce+"]",ce[Ce],we[Ce],Fe);else if(T.isPlainObject(be)||T.isPlainObject(Ie)){var Re=T.isPlainObject(be)?be:{},ze=T.isPlainObject(Ie)?Ie:{},He=T.extendFlat({},Re,ze);for(var Ge in He)q(ke+"."+Ge,Re[Ge],ze[Ge],Fe)}else Fe[ke]===void 0&&(Fe[ke]=B(be))}function te(ke,be,Ie){var Fe,ce=ke._fullLayout,we=ke._fullData,ye=ke.data,Ce=ce._guiEditing,Re=V(ce._preGUI,Ce),ze=T.extendDeepAll({},be);K(be);var He,Ge=_.traceFlags(),Je={},ot={};function Qe(){return Ie.map(function(){})}function vt(jt){var Ut=n.id2name(jt);He.indexOf(Ut)===-1&&He.push(Ut)}function xt(jt){return"LAYOUT"+jt+".autorange"}function mt(jt){return"LAYOUT"+jt+".range"}function rt(jt){for(var Ut=jt;Ut<we.length;Ut++)if(we[Ut]._input===ye[jt])return we[Ut]}function it(jt,Ut,Xt){if(Array.isArray(jt))jt.forEach(function(cn){it(cn,Ut,Xt)});else if(!(jt in be)&&!v.hasParent(be,jt)){var gn;if(jt.substr(0,6)==="LAYOUT")gn=Re(ke.layout,jt.replace("LAYOUT",""));else{var Mn=Ie[Xt];gn=V(ce._tracePreGUI[rt(Mn)._fullInput.uid],Ce)(ye[Mn],jt)}jt in ot||(ot[jt]=Qe()),ot[jt][Xt]===void 0&&(ot[jt][Xt]=B(gn.get())),Ut!==void 0&&gn.set(Ut)}}function Tt(jt){return function(Ut){return we[Ut][jt]}}function Mt(jt){return function(Ut,Xt){return Ut===!1?we[Ie[Xt]][jt]:null}}for(var Pt in be){if(v.hasParent(be,Pt))throw new Error("cannot set "+Pt+" and a parent attribute simultaneously");var kt,Ze,Xe,Ve,We,at,et=be[Pt];if(Pt!=="autobinx"&&Pt!=="autobiny"||(Pt=Pt.charAt(Pt.length-1)+"bins",et=Array.isArray(et)?et.map(Mt(Pt)):et===!1?Ie.map(Tt(Pt)):null),Je[Pt]=et,Pt.substr(0,6)!=="LAYOUT"){for(ot[Pt]=Qe(),Fe=0;Fe<Ie.length;Fe++)if(kt=ye[Ie[Fe]],Ze=rt(Ie[Fe]),Ve=(Xe=V(ce._tracePreGUI[Ze._fullInput.uid],Ce)(kt,Pt)).get(),(We=Array.isArray(et)?et[Fe%et.length]:et)!==void 0){var De=Xe.parts[Xe.parts.length-1],Be=Pt.substr(0,Pt.length-De.length-1),nt=Be?Be+".":"",tt=Be?b(Ze,Be).get():Ze;if((at=i.getTraceValObject(Ze,Xe.parts))&&at.impliedEdits&&We!==null)for(var dt in at.impliedEdits)it(T.relativeAttr(Pt,dt),at.impliedEdits[dt],Fe);else if(De!=="thicknessmode"&&De!=="lenmode"||Ve===We||We!=="fraction"&&We!=="pixels"||!tt){if(Pt==="type"&&(We==="pie"!=(Ve==="pie")||We==="funnelarea"!=(Ve==="funnelarea"))){var ht="x",gt="y";We!=="bar"&&Ve!=="bar"||kt.orientation!=="h"||(ht="y",gt="x"),T.swapAttrs(kt,["?","?src"],"labels",ht),T.swapAttrs(kt,["d?","?0"],"label",ht),T.swapAttrs(kt,["?","?src"],"values",gt),Ve==="pie"||Ve==="funnelarea"?(b(kt,"marker.color").set(b(kt,"marker.colors").get()),ce._pielayer.selectAll("g.trace").remove()):t.traceIs(kt,"cartesian")&&b(kt,"marker.colors").set(b(kt,"marker.color").get())}}else{var ut=ce._size,wt=tt.orient,ct=wt==="top"||wt==="bottom";if(De==="thicknessmode"){var ft=ct?ut.h:ut.w;it(nt+"thickness",tt.thickness*(We==="fraction"?1/ft:ft),Fe)}else{var bt=ct?ut.w:ut.h;it(nt+"len",tt.len*(We==="fraction"?1/bt:bt),Fe)}}if(ot[Pt][Fe]=B(Ve),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Pt)!==-1){if(Pt==="orientation"){Xe.set(We);var It=kt.x&&!kt.y?"h":"v";if((Xe.get()||It)===Ze.orientation)continue}else Pt==="orientationaxes"&&(kt.orientation={v:"h",h:"v"}[Ze.orientation]);v.swapXYData(kt),Ge.calc=Ge.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(Xe.parts[0])!==-1?(v.manageArrayContainers(Xe,We,ot),Ge.calc=!0):(at?at.arrayOk&&!t.traceIs(Ze,"regl")&&(T.isArrayOrTypedArray(We)||T.isArrayOrTypedArray(Ve))?Ge.calc=!0:_.update(Ge,at):Ge.calc=!0,Xe.set(We))}if(["swapxyaxes","orientationaxes"].indexOf(Pt)!==-1&&n.swap(ke,Ie),Pt==="orientationaxes"){var Dt=b(ke.layout,"hovermode"),Nt=Dt.get();Nt==="x"?Dt.set("y"):Nt==="y"?Dt.set("x"):Nt==="x unified"?Dt.set("y unified"):Nt==="y unified"&&Dt.set("x unified")}if(["orientation","type"].indexOf(Pt)!==-1){for(He=[],Fe=0;Fe<Ie.length;Fe++){var Qt=ye[Ie[Fe]];t.traceIs(Qt,"cartesian")&&(vt(Qt.xaxis||"x"),vt(Qt.yaxis||"y"))}it(He.map(xt),!0,0),it(He.map(mt),[0,1],0)}}else Xe=Re(ke.layout,Pt.replace("LAYOUT","")),ot[Pt]=[B(Xe.get())],Xe.set(Array.isArray(et)?et[0]:et),Ge.calc=!0}return(Ge.calc||Ge.plot)&&(Ge.fullReplot=!0),{flags:Ge,undoit:ot,redoit:Je,traces:Ie,eventData:T.extendDeepNoArrays([],[ze,Ie])}}function K(ke){var be,Ie,Fe,ce=T.counterRegex("axis",".title",!1,!1),we=/colorbar\.title$/,ye=Object.keys(ke);for(be=0;be<ye.length;be++)Ie=ye[be],Fe=ke[Ie],Ie!=="title"&&!ce.test(Ie)&&!we.test(Ie)||typeof Fe!="string"&&typeof Fe!="number"?Ie.indexOf("titlefont")>-1&&Ie.indexOf("grouptitlefont")===-1?Ce(Ie,Ie.replace("titlefont","title.font")):Ie.indexOf("titleposition")>-1?Ce(Ie,Ie.replace("titleposition","title.position")):Ie.indexOf("titleside")>-1?Ce(Ie,Ie.replace("titleside","title.side")):Ie.indexOf("titleoffset")>-1&&Ce(Ie,Ie.replace("titleoffset","title.offset")):Ce(Ie,Ie.replace("title","title.text"));function Ce(Re,ze){ke[ze]=ke[Re],delete ke[Re]}}function J(ke,be,Ie){ke=T.getGraphDiv(ke),v.clearPromiseQueue(ke);var Fe={};if(typeof be=="string")Fe[be]=Ie;else{if(!T.isPlainObject(be))return T.warn("Relayout fail.",be,Ie),Promise.reject();Fe=T.extendFlat({},be)}Object.keys(Fe).length&&(ke.changed=!0);var ce=ae(ke,Fe),we=ce.flags;we.calc&&(ke.calcdata=void 0);var ye=[r.previousPromises];we.layoutReplot?ye.push(m.layoutReplot):Object.keys(Fe).length&&(Y(ke,we,ce)||r.supplyDefaults(ke),we.legend&&ye.push(m.doLegend),we.layoutstyle&&ye.push(m.layoutStyles),we.axrange&&W(ye,ce.rangesAltered),we.ticks&&ye.push(m.doTicksRelayout),we.modebar&&ye.push(m.doModeBar),we.camera&&ye.push(m.doCamera),we.colorbars&&ye.push(m.doColorBars),ye.push(w)),ye.push(r.rehover,r.redrag,r.reselect),s.add(ke,J,[ke,ce.undoit],J,[ke,ce.redoit]);var Ce=T.syncOrAsync(ye,ke);return Ce&&Ce.then||(Ce=Promise.resolve(ke)),Ce.then(function(){return ke.emit("plotly_relayout",ce.eventData),ke})}function Y(ke,be,Ie){var Fe,ce,we=ke._fullLayout;if(!be.axrange)return!1;for(var ye in be)if(ye!=="axrange"&&be[ye])return!1;var Ce=function(ot,Qe){return T.coerce(Fe,ce,a,ot,Qe)},Re={};for(var ze in Ie.rangesAltered){var He=n.id2name(ze);if(Fe=ke.layout[He],ce=we[He],o(Fe,ce,Ce,Re),ce._matchGroup){for(var Ge in ce._matchGroup)if(Ge!==ze){var Je=we[n.id2name(Ge)];Je.autorange=ce.autorange,Je.range=ce.range.slice(),Je._input.range=ce.range.slice()}}}return!0}function W(ke,be){var Ie=be?function(Fe){var ce=[];for(var we in be){var ye=n.getFromId(Fe,we);if(ce.push(we),(ye.ticklabelposition||"").indexOf("inside")!==-1&&ye._anchorAxis&&ce.push(ye._anchorAxis._id),ye._matchGroup)for(var Ce in ye._matchGroup)be[Ce]||ce.push(Ce)}return n.draw(Fe,ce,{skipTitle:!0})}:function(Fe){return n.draw(Fe,"redraw")};ke.push(g,m.doAutoRangeAndConstraints,Ie,m.drawData,m.finalDraw)}var Q=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ne=/^[xyz]axis[0-9]*\.autorange$/,re=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ae(ke,be){var Ie,Fe,ce,we=ke.layout,ye=ke._fullLayout,Ce=ye._guiEditing,Re=V(ye._preGUI,Ce),ze=Object.keys(be),He=n.list(ke),Ge=T.extendDeepAll({},be),Je={};for(K(be),ze=Object.keys(be),Fe=0;Fe<ze.length;Fe++)if(ze[Fe].indexOf("allaxes")===0){for(ce=0;ce<He.length;ce++){var ot=He[ce]._id.substr(1),Qe=ot.indexOf("scene")!==-1?ot+".":"",vt=ze[Fe].replace("allaxes",Qe+He[ce]._name);be[vt]||(be[vt]=be[ze[Fe]])}delete be[ze[Fe]]}var xt=_.layoutFlags(),mt={},rt={};function it(cn,qt){if(Array.isArray(cn))cn.forEach(function(Kt){it(Kt,qt)});else if(!(cn in be)&&!v.hasParent(be,cn)){var nn=Re(we,cn);cn in rt||(rt[cn]=B(nn.get())),qt!==void 0&&nn.set(qt)}}var Tt,Mt={};function Pt(cn){var qt=n.name2id(cn.split(".")[0]);return Mt[qt]=1,qt}for(var kt in be){if(v.hasParent(be,kt))throw new Error("cannot set "+kt+" and a parent attribute simultaneously");for(var Ze=Re(we,kt),Xe=be[kt],Ve=Ze.parts.length-1;Ve>0&&typeof Ze.parts[Ve]!="string";)Ve--;var We=Ze.parts[Ve],at=Ze.parts[Ve-1]+"."+We,et=Ze.parts.slice(0,Ve).join("."),De=b(ke.layout,et).get(),Be=b(ye,et).get(),nt=Ze.get();if(Xe!==void 0){mt[kt]=Xe,rt[kt]=We==="reverse"?Xe:B(nt);var tt=i.getLayoutValObject(ye,Ze.parts);if(tt&&tt.impliedEdits&&Xe!==null)for(var dt in tt.impliedEdits)it(T.relativeAttr(kt,dt),tt.impliedEdits[dt]);if(["width","height"].indexOf(kt)!==-1)if(Xe){it("autosize",null);var ht=kt==="height"?"width":"height";it(ht,ye[ht])}else ye[kt]=ke._initialAutoSize[kt];else if(kt==="autosize")it("width",Xe?null:ye.width),it("height",Xe?null:ye.height);else if(at.match(Q))Pt(at),b(ye,et+"._inputRange").set(null);else if(at.match(ne)){Pt(at),b(ye,et+"._inputRange").set(null);var gt=b(ye,et).get();gt._inputDomain&&(gt._input.domain=gt._inputDomain.slice())}else at.match(re)&&b(ye,et+"._inputDomain").set(null);if(We==="type"){Tt=De;var ut=Be.type==="linear"&&Xe==="log",wt=Be.type==="log"&&Xe==="linear";if(ut||wt){if(Tt&&Tt.range)if(Be.autorange)ut&&(Tt.range=Tt.range[1]>Tt.range[0]?[1,2]:[2,1]);else{var ct=Tt.range[0],ft=Tt.range[1];ut?(ct<=0&&ft<=0&&it(et+".autorange",!0),ct<=0?ct=ft/1e6:ft<=0&&(ft=ct/1e6),it(et+".range[0]",Math.log(ct)/Math.LN10),it(et+".range[1]",Math.log(ft)/Math.LN10)):(it(et+".range[0]",Math.pow(10,ct)),it(et+".range[1]",Math.pow(10,ft)))}else it(et+".autorange",!0);Array.isArray(ye._subplots.polar)&&ye._subplots.polar.length&&ye[Ze.parts[0]]&&Ze.parts[1]==="radialaxis"&&delete ye[Ze.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(ke,Be,Xe,it),t.getComponentMethod("images","convertCoords")(ke,Be,Xe,it)}else it(et+".autorange",!0),it(et+".range",null);b(ye,et+"._inputRange").set(null)}else if(We.match(f)){var bt=b(ye,kt).get(),It=(Xe||{}).type;It&&It!=="-"||(It="linear"),t.getComponentMethod("annotations","convertCoords")(ke,bt,It,it),t.getComponentMethod("images","convertCoords")(ke,bt,It,it)}var Dt=y.containerArrayMatch(kt);if(Dt){Ie=Dt.array,Fe=Dt.index;var Nt=Dt.property,Qt=tt||{editType:"calc"};Fe!==""&&Nt===""&&(y.isAddVal(Xe)?rt[kt]=null:y.isRemoveVal(Xe)?rt[kt]=(b(we,Ie).get()||[])[Fe]:T.warn("unrecognized full object value",be)),_.update(xt,Qt),Je[Ie]||(Je[Ie]={});var jt=Je[Ie][Fe];jt||(jt=Je[Ie][Fe]={}),jt[Nt]=Xe,delete be[kt]}else We==="reverse"?(De.range?De.range.reverse():(it(et+".autorange",!0),De.range=[1,0]),Be.autorange?xt.calc=!0:xt.plot=!0):(kt==="dragmode"&&(Xe===!1&&nt!==!1||Xe!==!1&&nt===!1)||ye._has("scatter-like")&&ye._has("regl")&&kt==="dragmode"&&(Xe==="lasso"||Xe==="select")&&nt!=="lasso"&&nt!=="select"||ye._has("gl2d")?xt.plot=!0:tt?_.update(xt,tt):xt.calc=!0,Ze.set(Xe))}}for(Ie in Je)y.applyContainerArrayChanges(ke,Re(we,Ie),Je[Ie],xt,Re)||(xt.plot=!0);for(var Ut in Mt){var Xt=(Tt=n.getFromId(ke,Ut))&&Tt._constraintGroup;if(Xt)for(var gn in xt.calc=!0,Xt)Mt[gn]||(n.getFromId(ke,gn)._constraintShrinkable=!0)}(ue(ke)||be.height||be.width)&&(xt.plot=!0);var Mn=ye.shapes;for(Fe=0;Fe<Mn.length;Fe++)if(Mn[Fe].showlegend){xt.calc=!0;break}return(xt.plot||xt.calc)&&(xt.layoutReplot=!0),{flags:xt,rangesAltered:Mt,undoit:rt,redoit:mt,eventData:Ge}}function ue(ke){var be=ke._fullLayout,Ie=be.width,Fe=be.height;return ke.layout.autosize&&r.plotAutoSize(ke,ke.layout,be),be.width!==Ie||be.height!==Fe}function pe(ke,be,Ie,Fe){ke=T.getGraphDiv(ke),v.clearPromiseQueue(ke),T.isPlainObject(be)||(be={}),T.isPlainObject(Ie)||(Ie={}),Object.keys(be).length&&(ke.changed=!0),Object.keys(Ie).length&&(ke.changed=!0);var ce=v.coerceTraceIndices(ke,Fe),we=te(ke,T.extendFlat({},be),ce),ye=we.flags,Ce=ae(ke,T.extendFlat({},Ie)),Re=Ce.flags;(ye.calc||Re.calc)&&(ke.calcdata=void 0),ye.clearAxisTypes&&v.clearAxisTypes(ke,ce,Ie);var ze=[];Re.layoutReplot?ze.push(m.layoutReplot):ye.fullReplot?ze.push(D._doPlot):(ze.push(r.previousPromises),Y(ke,Re,Ce)||r.supplyDefaults(ke),ye.style&&ze.push(m.doTraceStyle),(ye.colorbars||Re.colorbars)&&ze.push(m.doColorBars),Re.legend&&ze.push(m.doLegend),Re.layoutstyle&&ze.push(m.layoutStyles),Re.axrange&&W(ze,Ce.rangesAltered),Re.ticks&&ze.push(m.doTicksRelayout),Re.modebar&&ze.push(m.doModeBar),Re.camera&&ze.push(m.doCamera),ze.push(w)),ze.push(r.rehover,r.redrag,r.reselect),s.add(ke,pe,[ke,we.undoit,Ce.undoit,we.traces],pe,[ke,we.redoit,Ce.redoit,we.traces]);var He=T.syncOrAsync(ze,ke);return He&&He.then||(He=Promise.resolve(ke)),He.then(function(){return ke.emit("plotly_update",{data:we.eventData,layout:Ce.eventData}),ke})}function ge(ke){return function(be){be._fullLayout._guiEditing=!0;var Ie=ke.apply(null,arguments);return be._fullLayout._guiEditing=!1,Ie}}var _e=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],me=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ve(ke,be){for(var Ie=0;Ie<be.length;Ie++){var Fe=be[Ie],ce=ke.match(Fe.pattern);if(ce){var we=ce[1]||"";return{head:we,tail:ke.substr(we.length+1),attr:Fe.attr}}}}function Oe(ke,be){var Ie=b(be,ke).get();if(Ie!==void 0)return Ie;var Fe=ke.split(".");for(Fe.pop();Fe.length>1;)if(Fe.pop(),(Ie=b(be,Fe.join(".")+".uirevision").get())!==void 0)return Ie;return be.uirevision}function Me(ke,be){for(var Ie=0;Ie<be.length;Ie++)if(be[Ie]._fullInput.uid===ke)return Ie;return-1}function Te(ke,be,Ie){for(var Fe=0;Fe<be.length;Fe++)if(be[Fe].uid===ke)return Fe;return!be[Ie]||be[Ie].uid?-1:Ie}function se(ke,be){var Ie=T.isPlainObject(ke),Fe=Array.isArray(ke);return Ie||Fe?(Ie&&T.isPlainObject(be)||Fe&&Array.isArray(be))&&JSON.stringify(ke)===JSON.stringify(be):ke===be}function oe(ke,be,Ie,Fe){var ce,we,ye,Ce=Fe.getValObject,Re=Fe.flags,ze=Fe.immutable,He=Fe.inArray,Ge=Fe.arrayIndex;function Je(){var De=ce.editType;He&&De.indexOf("arraydraw")!==-1?T.pushUnique(Re.arrays[He],Ge):(_.update(Re,ce),De!=="none"&&Re.nChanges++,Fe.transition&&ce.anim&&Re.nChangesAnim++,(Q.test(ye)||ne.test(ye))&&(Re.rangesAltered[Ie[0]]=1),re.test(ye)&&b(be,"_inputDomain").set(null),we==="datarevision"&&(Re.newDataRevision=1))}function ot(De){return De.valType==="data_array"||De.arrayOk}for(we in ke){if(Re.calc&&!Fe.transition)return;var Qe=ke[we],vt=be[we],xt=Ie.concat(we);if(ye=xt.join("."),we.charAt(0)!=="_"&&typeof Qe!="function"&&Qe!==vt){if((we==="tick0"||we==="dtick")&&Ie[0]!=="geo"){var mt=be.tickmode;if(mt==="auto"||mt==="array"||!mt)continue}if((we!=="range"||!be.autorange)&&(we!=="zmin"&&we!=="zmax"||be.type!=="contourcarpet")&&(ce=Ce(xt))&&(!ce._compareAsJSON||JSON.stringify(Qe)!==JSON.stringify(vt))){var rt,it=ce.valType,Tt=ot(ce),Mt=Array.isArray(Qe),Pt=Array.isArray(vt);if(Mt&&Pt){var kt="_input_"+we,Ze=ke[kt],Xe=be[kt];if(Array.isArray(Ze)&&Ze===Xe)continue}if(vt===void 0)Tt&&Mt?Re.calc=!0:Je();else if(ce._isLinkedToArray){var Ve=[],We=!1;He||(Re.arrays[we]=Ve);var at=Math.min(Qe.length,vt.length),et=Math.max(Qe.length,vt.length);if(at!==et){if(ce.editType!=="arraydraw"){Je();continue}We=!0}for(rt=0;rt<at;rt++)oe(Qe[rt],vt[rt],xt.concat(rt),T.extendFlat({inArray:we,arrayIndex:rt},Fe));if(We)for(rt=at;rt<et;rt++)Ve.push(rt)}else!it&&T.isPlainObject(Qe)?oe(Qe,vt,xt,Fe):Tt?Mt&&Pt?(ze&&(Re.calc=!0),(ze||Fe.newDataRevision)&&Je()):Mt!==Pt?Re.calc=!0:Je():Mt&&Pt&&Qe.length===vt.length&&String(Qe)===String(vt)||Je()}}}for(we in be)if(!(we in ke)&&we.charAt(0)!=="_"&&typeof be[we]!="function"){if(ot(ce=Ce(Ie.concat(we)))&&Array.isArray(be[we]))return void(Re.calc=!0);Je()}}function he(ke,be){var Ie;for(Ie in ke)if(Ie.charAt(0)!=="_"){var Fe=ke[Ie],ce=be[Ie];if(Fe!==ce)if(T.isPlainObject(Fe)&&T.isPlainObject(ce)){if(he(Fe,ce))return!0}else{if(!Array.isArray(Fe)||!Array.isArray(ce)||Fe.length!==ce.length)return!0;for(var we=0;we<Fe.length;we++)if(Fe[we]!==ce[we]&&(!T.isPlainObject(Fe[we])||!T.isPlainObject(ce[we])||he(Fe[we],ce[we])))return!0}}}function Ee(ke){var be=ke._fullLayout,Ie=ke.getBoundingClientRect();if(!T.equalDomRects(Ie,be._lastBBox)){var Fe=be._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(ke));be._invScaleX=Math.sqrt(Fe[0][0]*Fe[0][0]+Fe[0][1]*Fe[0][1]+Fe[0][2]*Fe[0][2]),be._invScaleY=Math.sqrt(Fe[1][0]*Fe[1][0]+Fe[1][1]*Fe[1][1]+Fe[1][2]*Fe[1][2]),be._lastBBox=Ie}}D.animate=function(ke,be,Ie){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Fe=ke._transitionData;Fe._frameQueue||(Fe._frameQueue=[]);var ce=(Ie=r.supplyAnimationDefaults(Ie)).transition,we=Ie.frame;function ye(ze){return Array.isArray(ce)?ze>=ce.length?ce[0]:ce[ze]:ce}function Ce(ze){return Array.isArray(we)?ze>=we.length?we[0]:we[ze]:we}function Re(ze,He){var Ge=0;return function(){if(ze&&++Ge===He)return ze()}}return Fe._frameWaitingCnt===void 0&&(Fe._frameWaitingCnt=0),new Promise(function(ze,He){function Ge(){ke.emit("plotly_animating"),Fe._lastFrameAt=-1/0,Fe._timeToNext=0,Fe._runningTransitions=0,Fe._currentFrame=null;var kt=function(){Fe._animationRaf=window.requestAnimationFrame(kt),Date.now()-Fe._lastFrameAt>Fe._timeToNext&&function(){Fe._currentFrame&&Fe._currentFrame.onComplete&&Fe._currentFrame.onComplete();var Ze=Fe._currentFrame=Fe._frameQueue.shift();if(Ze){var Xe=Ze.name?Ze.name.toString():null;ke._fullLayout._currentFrame=Xe,Fe._lastFrameAt=Date.now(),Fe._timeToNext=Ze.frameOpts.duration,r.transition(ke,Ze.frame.data,Ze.frame.layout,v.coerceTraceIndices(ke,Ze.frame.traces),Ze.frameOpts,Ze.transitionOpts).then(function(){Ze.onComplete&&Ze.onComplete()}),ke.emit("plotly_animatingframe",{name:Xe,frame:Ze.frame,animation:{frame:Ze.frameOpts,transition:Ze.transitionOpts}})}else ke.emit("plotly_animated"),window.cancelAnimationFrame(Fe._animationRaf),Fe._animationRaf=null}()};kt()}var Je,ot,Qe=0;function vt(kt){return Array.isArray(ce)?Qe>=ce.length?kt.transitionOpts=ce[Qe]:kt.transitionOpts=ce[0]:kt.transitionOpts=ce,Qe++,kt}var xt=[],mt=be==null,rt=Array.isArray(be);if(mt||rt||!T.isPlainObject(be)){if(mt||["string","number"].indexOf(typeof be)!==-1)for(Je=0;Je<Fe._frames.length;Je++)(ot=Fe._frames[Je])&&(mt||String(ot.group)===String(be))&&xt.push({type:"byname",name:String(ot.name),data:vt({name:ot.name})});else if(rt)for(Je=0;Je<be.length;Je++){var it=be[Je];["number","string"].indexOf(typeof it)!==-1?(it=String(it),xt.push({type:"byname",name:it,data:vt({name:it})})):T.isPlainObject(it)&&xt.push({type:"object",data:vt(T.extendFlat({},it))})}}else xt.push({type:"object",data:vt(T.extendFlat({},be))});for(Je=0;Je<xt.length;Je++)if((ot=xt[Je]).type==="byname"&&!Fe._frameHash[ot.data.name])return T.warn('animate failure: frame not found: "'+ot.data.name+'"'),void He();["next","immediate"].indexOf(Ie.mode)!==-1&&function(){if(Fe._frameQueue.length!==0){for(;Fe._frameQueue.length;){var kt=Fe._frameQueue.pop();kt.onInterrupt&&kt.onInterrupt()}ke.emit("plotly_animationinterrupted",[])}}(),Ie.direction==="reverse"&&xt.reverse();var Tt=ke._fullLayout._currentFrame;if(Tt&&Ie.fromcurrent){var Mt=-1;for(Je=0;Je<xt.length;Je++)if((ot=xt[Je]).type==="byname"&&ot.name===Tt){Mt=Je;break}if(Mt>0&&Mt<xt.length-1){var Pt=[];for(Je=0;Je<xt.length;Je++)ot=xt[Je],(xt[Je].type!=="byname"||Je>Mt)&&Pt.push(ot);xt=Pt}}xt.length>0?function(kt){if(kt.length!==0){for(var Ze=0;Ze<kt.length;Ze++){var Xe;Xe=kt[Ze].type==="byname"?r.computeFrame(ke,kt[Ze].name):kt[Ze].data;var Ve=Ce(Ze),We=ye(Ze);We.duration=Math.min(We.duration,Ve.duration);var at={frame:Xe,name:kt[Ze].name,frameOpts:Ve,transitionOpts:We};Ze===kt.length-1&&(at.onComplete=Re(ze,2),at.onInterrupt=He),Fe._frameQueue.push(at)}Ie.mode==="immediate"&&(Fe._lastFrameAt=-1/0),Fe._animationRaf||Ge()}}(xt):(ke.emit("plotly_animated"),ze())})},D.addFrames=function(ke,be,Ie){if(ke=T.getGraphDiv(ke),be==null)return Promise.resolve();if(!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Fe,ce,we,ye,Ce=ke._transitionData._frames,Re=ke._transitionData._frameHash;if(!Array.isArray(be))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+be);var ze=Ce.length+2*be.length,He=[],Ge={};for(Fe=be.length-1;Fe>=0;Fe--)if(T.isPlainObject(be[Fe])){var Je=be[Fe].name,ot=(Re[Je]||Ge[Je]||{}).name,Qe=be[Fe].name,vt=Re[ot]||Ge[ot];ot&&Qe&&typeof Qe=="number"&&vt&&S<5&&(S++,T.warn('addFrames: overwriting frame "'+(Re[ot]||Ge[ot]).name+'" with a frame whose name of type "number" also equates to "'+ot+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ge[Je]={name:Je},He.push({frame:r.supplyFrameDefaults(be[Fe]),index:Ie&&Ie[Fe]!==void 0&&Ie[Fe]!==null?Ie[Fe]:ze+Fe})}He.sort(function(kt,Ze){return kt.index>Ze.index?-1:kt.index<Ze.index?1:0});var xt=[],mt=[],rt=Ce.length;for(Fe=He.length-1;Fe>=0;Fe--){if(typeof(ce=He[Fe].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!ce.name)for(;Re[ce.name="frame "+ke._transitionData._counter++];);if(Re[ce.name]){for(we=0;we<Ce.length&&(Ce[we]||{}).name!==ce.name;we++);xt.push({type:"replace",index:we,value:ce}),mt.unshift({type:"replace",index:we,value:Ce[we]})}else ye=Math.max(0,Math.min(He[Fe].index,rt)),xt.push({type:"insert",index:ye,value:ce}),mt.unshift({type:"delete",index:ye}),rt++}var it=r.modifyFrames,Tt=r.modifyFrames,Mt=[ke,mt],Pt=[ke,xt];return s&&s.add(ke,it,Mt,Tt,Pt),r.modifyFrames(ke,xt)},D.deleteFrames=function(ke,be){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);var Ie,Fe,ce=ke._transitionData._frames,we=[],ye=[];if(!be)for(be=[],Ie=0;Ie<ce.length;Ie++)be.push(Ie);for((be=be.slice()).sort(),Ie=be.length-1;Ie>=0;Ie--)Fe=be[Ie],we.push({type:"delete",index:Fe}),ye.unshift({type:"insert",index:Fe,value:ce[Fe]});var Ce=r.modifyFrames,Re=r.modifyFrames,ze=[ke,ye],He=[ke,we];return s&&s.add(ke,Ce,ze,Re,He),r.modifyFrames(ke,we)},D.addTraces=function ke(be,Ie,Fe){be=T.getGraphDiv(be);var ce,we,ye=[],Ce=D.deleteTraces,Re=ke,ze=[be,ye],He=[be,Ie];for(function(Ge,Je,ot){var Qe,vt;if(!Array.isArray(Ge.data))throw new Error("gd.data must be an array.");if(Je===void 0)throw new Error("traces must be defined.");for(Array.isArray(Je)||(Je=[Je]),Qe=0;Qe<Je.length;Qe++)if(typeof(vt=Je[Qe])!="object"||Array.isArray(vt)||vt===null)throw new Error("all values in traces array must be non-array objects");if(ot===void 0||Array.isArray(ot)||(ot=[ot]),ot!==void 0&&ot.length!==Je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(be,Ie,Fe),Array.isArray(Ie)||(Ie=[Ie]),Ie=Ie.map(function(Ge){return T.extendFlat({},Ge)}),v.cleanData(Ie),ce=0;ce<Ie.length;ce++)be.data.push(Ie[ce]);for(ce=0;ce<Ie.length;ce++)ye.push(-Ie.length+ce);if(Fe===void 0)return we=D.redraw(be),s.add(be,Ce,ze,Re,He),we;Array.isArray(Fe)||(Fe=[Fe]);try{G(be,ye,Fe)}catch(Ge){throw be.data.splice(be.data.length-Ie.length,Ie.length),Ge}return s.startSequence(be),s.add(be,Ce,ze,Re,He),we=D.moveTraces(be,ye,Fe),s.stopSequence(be),we},D.deleteTraces=function ke(be,Ie){be=T.getGraphDiv(be);var Fe,ce,we=[],ye=D.addTraces,Ce=ke,Re=[be,we,Ie],ze=[be,Ie];if(Ie===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ie)||(Ie=[Ie]),z(be,Ie,"indices"),(Ie=P(Ie,be.data.length-1)).sort(T.sorterDes),Fe=0;Fe<Ie.length;Fe+=1)ce=be.data.splice(Ie[Fe],1)[0],we.push(ce);var He=D.redraw(be);return s.add(be,ye,Re,Ce,ze),He},D.extendTraces=function ke(be,Ie,Fe,ce){var we=O(be=T.getGraphDiv(be),Ie,Fe,ce,function(Re,ze,He){var Ge,Je;if(T.isTypedArray(Re))if(He<0){var ot=new Re.constructor(0),Qe=H(Re,ze);He<0?(Ge=Qe,Je=ot):(Ge=ot,Je=Qe)}else if(Ge=new Re.constructor(He),Je=new Re.constructor(Re.length+ze.length-He),He===ze.length)Ge.set(ze),Je.set(Re);else if(He<ze.length){var vt=ze.length-He;Ge.set(ze.subarray(vt)),Je.set(Re),Je.set(ze.subarray(0,vt),Re.length)}else{var xt=He-ze.length,mt=Re.length-xt;Ge.set(Re.subarray(mt)),Ge.set(ze,xt),Je.set(Re.subarray(0,mt))}else Ge=Re.concat(ze),Je=He>=0&&He<Ge.length?Ge.splice(0,Ge.length-He):[];return[Ge,Je]}),ye=D.redraw(be),Ce=[be,we.update,Fe,we.maxPoints];return s.add(be,D.prependTraces,Ce,ke,arguments),ye},D.moveTraces=function ke(be,Ie,Fe){var ce,we=[],ye=[],Ce=ke,Re=ke,ze=[be=T.getGraphDiv(be),Fe,Ie],He=[be,Ie,Fe];if(G(be,Ie,Fe),Ie=Array.isArray(Ie)?Ie:[Ie],Fe===void 0)for(Fe=[],ce=0;ce<Ie.length;ce++)Fe.push(-Ie.length+ce);for(Fe=Array.isArray(Fe)?Fe:[Fe],Ie=P(Ie,be.data.length-1),Fe=P(Fe,be.data.length-1),ce=0;ce<be.data.length;ce++)Ie.indexOf(ce)===-1&&we.push(be.data[ce]);for(ce=0;ce<Ie.length;ce++)ye.push({newIndex:Fe[ce],trace:be.data[Ie[ce]]});for(ye.sort(function(Je,ot){return Je.newIndex-ot.newIndex}),ce=0;ce<ye.length;ce+=1)we.splice(ye[ce].newIndex,0,ye[ce].trace);be.data=we;var Ge=D.redraw(be);return s.add(be,Ce,ze,Re,He),Ge},D.prependTraces=function ke(be,Ie,Fe,ce){var we=O(be=T.getGraphDiv(be),Ie,Fe,ce,function(Re,ze,He){var Ge,Je;if(T.isTypedArray(Re))if(He<=0){var ot=new Re.constructor(0),Qe=H(ze,Re);He<0?(Ge=Qe,Je=ot):(Ge=ot,Je=Qe)}else if(Ge=new Re.constructor(He),Je=new Re.constructor(Re.length+ze.length-He),He===ze.length)Ge.set(ze),Je.set(Re);else if(He<ze.length){var vt=ze.length-He;Ge.set(ze.subarray(0,vt)),Je.set(ze.subarray(vt)),Je.set(Re,vt)}else{var xt=He-ze.length;Ge.set(ze),Ge.set(Re.subarray(0,xt),ze.length),Je.set(Re.subarray(xt))}else Ge=ze.concat(Re),Je=He>=0&&He<Ge.length?Ge.splice(He,Ge.length):[];return[Ge,Je]}),ye=D.redraw(be),Ce=[be,we.update,Fe,we.maxPoints];return s.add(be,D.extendTraces,Ce,ke,arguments),ye},D.newPlot=function(ke,be,Ie,Fe){return ke=T.getGraphDiv(ke),r.cleanPlot([],{},ke._fullData||[],ke._fullLayout||{}),r.purge(ke),D._doPlot(ke,be,Ie,Fe)},D._doPlot=function(ke,be,Ie,Fe){var ce;if(ke=T.getGraphDiv(ke),d.init(ke),T.isPlainObject(be)){var we=be;be=we.data,Ie=we.layout,Fe=we.config,ce=we.frames}if(d.triggerHandler(ke,"plotly_beforeplot",[be,Ie,Fe])===!1)return Promise.reject();be||Ie||T.isPlotDiv(ke)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ke),C(ke,Fe),Ie||(Ie={}),M.select(ke).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(ke._promises)||(ke._promises=[]);var ye=(ke.data||[]).length===0&&Array.isArray(be);Array.isArray(be)&&(v.cleanData(be),ye?ke.data=be:ke.data.push.apply(ke.data,be),ke.empty=!1),ke.layout&&!ye||(ke.layout=v.cleanLayout(Ie)),r.supplyDefaults(ke);var Ce=ke._fullLayout,Re=Ce._has("cartesian");Ce._replotting=!0,(ye||Ce._shouldCreateBgLayer)&&(function(mt){var rt=M.select(mt),it=mt._fullLayout;if(it._calcInverseTransform=Ee,it._calcInverseTransform(mt),it._container=rt.selectAll(".plot-container").data([0]),it._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),it._paperdiv=it._container.selectAll(".svg-container").data([0]),it._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),it._glcontainer=it._paperdiv.selectAll(".gl-container").data([{}]),it._glcontainer.enter().append("div").classed("gl-container",!0),it._paperdiv.selectAll(".main-svg").remove(),it._paperdiv.select(".modebar-container").remove(),it._paper=it._paperdiv.insert("svg",":first-child").classed("main-svg",!0),it._toppaper=it._paperdiv.append("svg").classed("main-svg",!0),it._modebardiv=it._paperdiv.append("div"),delete it._modeBar,it._hoverpaper=it._paperdiv.append("svg").classed("main-svg",!0),!it._uid){var Tt={};M.selectAll("defs").each(function(){this.id&&(Tt[this.id.split("-")[1]]=1)}),it._uid=T.randstr(Tt)}it._paperdiv.selectAll(".main-svg").attr(x.svgAttrs),it._defs=it._paper.append("defs").attr("id","defs-"+it._uid),it._clips=it._defs.append("g").classed("clips",!0),it._topdefs=it._toppaper.append("defs").attr("id","topdefs-"+it._uid),it._topclips=it._topdefs.append("g").classed("clips",!0),it._bgLayer=it._paper.append("g").classed("bglayer",!0),it._draggers=it._paper.append("g").classed("draglayer",!0);var Mt=it._paper.append("g").classed("layer-below",!0);it._imageLowerLayer=Mt.append("g").classed("imagelayer",!0),it._shapeLowerLayer=Mt.append("g").classed("shapelayer",!0),it._cartesianlayer=it._paper.append("g").classed("cartesianlayer",!0),it._polarlayer=it._paper.append("g").classed("polarlayer",!0),it._smithlayer=it._paper.append("g").classed("smithlayer",!0),it._ternarylayer=it._paper.append("g").classed("ternarylayer",!0),it._geolayer=it._paper.append("g").classed("geolayer",!0),it._funnelarealayer=it._paper.append("g").classed("funnelarealayer",!0),it._pielayer=it._paper.append("g").classed("pielayer",!0),it._iciclelayer=it._paper.append("g").classed("iciclelayer",!0),it._treemaplayer=it._paper.append("g").classed("treemaplayer",!0),it._sunburstlayer=it._paper.append("g").classed("sunburstlayer",!0),it._indicatorlayer=it._toppaper.append("g").classed("indicatorlayer",!0),it._glimages=it._paper.append("g").classed("glimages",!0);var Pt=it._toppaper.append("g").classed("layer-above",!0);it._imageUpperLayer=Pt.append("g").classed("imagelayer",!0),it._shapeUpperLayer=Pt.append("g").classed("shapelayer",!0),it._selectionLayer=it._toppaper.append("g").classed("selectionlayer",!0),it._infolayer=it._toppaper.append("g").classed("infolayer",!0),it._menulayer=it._toppaper.append("g").classed("menulayer",!0),it._zoomlayer=it._toppaper.append("g").classed("zoomlayer",!0),it._hoverlayer=it._hoverpaper.append("g").classed("hoverlayer",!0),it._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),mt.emit("plotly_framework")}(ke),Ce._shouldCreateBgLayer&&delete Ce._shouldCreateBgLayer),u.initGradients(ke),u.initPatterns(ke),ye&&n.saveShowSpikeInitial(ke);var ze=!ke.calcdata||ke.calcdata.length!==(ke._fullData||[]).length;ze&&r.doCalcdata(ke);for(var He=0;He<ke.calcdata.length;He++)ke.calcdata[He][0].trace=ke._fullData[He];ke._context.responsive?ke._responsiveChartHandler||(ke._responsiveChartHandler=function(){T.isHidden(ke)||r.resize(ke)},window.addEventListener("resize",ke._responsiveChartHandler)):T.clearResponsive(ke);var Ge=T.extendFlat({},Ce._size),Je=0;function ot(){if(r.clearAutoMarginIds(ke),m.drawMarginPushers(ke),n.allowAutoMargin(ke),ke._fullLayout.title.text&&ke._fullLayout.title.automargin&&r.allowAutoMargin(ke,"title.automargin"),Ce._has("pie"))for(var mt=ke._fullData,rt=0;rt<mt.length;rt++){var it=mt[rt];it.type==="pie"&&it.automargin&&r.allowAutoMargin(ke,"pie."+it.uid+".automargin")}return r.doAutoMargin(ke),r.previousPromises(ke)}function Qe(){ke._transitioning||(m.doAutoRangeAndConstraints(ke),ye&&n.saveRangeInitial(ke),t.getComponentMethod("rangeslider","calcAutorange")(ke))}var vt=[r.previousPromises,function(){if(ce)return D.addFrames(ke,ce)},function mt(){for(var rt=Ce._basePlotModules,it=0;it<rt.length;it++)rt[it].drawFramework&&rt[it].drawFramework(ke);!Ce._glcanvas&&Ce._has("gl")&&(Ce._glcanvas=Ce._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(kt){return kt.key}),Ce._glcanvas.enter().append("canvas").attr("class",function(kt){return"gl-canvas gl-canvas-"+kt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Tt=ke._context.plotGlPixelRatio;if(Ce._glcanvas){Ce._glcanvas.attr("width",Ce.width*Tt).attr("height",Ce.height*Tt).style("width",Ce.width+"px").style("height",Ce.height+"px");var Mt=Ce._glcanvas.data()[0].regl;if(Mt&&(Math.floor(Ce.width*Tt)!==Mt._gl.drawingBufferWidth||Math.floor(Ce.height*Tt)!==Mt._gl.drawingBufferHeight)){var Pt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Je)return T.log(Pt+" Clearing graph and plotting again."),r.cleanPlot([],{},ke._fullData,Ce),r.supplyDefaults(ke),Ce=ke._fullLayout,r.doCalcdata(ke),Je++,mt();T.error(Pt)}}return Ce.modebar.orientation==="h"?Ce._modebardiv.style("height",null).style("width","100%"):Ce._modebardiv.style("width",null).style("height",Ce.height+"px"),r.previousPromises(ke)},ot,function(){if(r.didMarginChange(Ge,Ce._size))return T.syncOrAsync([ot,m.layoutStyles],ke)}];Re&&vt.push(function(){if(ze)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),Qe],ke);Qe()}),vt.push(m.layoutStyles),Re&&vt.push(function(){return n.draw(ke,ye?"":"redraw")},function(mt){var rt=mt._fullLayout._insideTickLabelsUpdaterange;if(rt)return mt._fullLayout._insideTickLabelsUpdaterange=void 0,J(mt,rt).then(function(){n.saveRangeInitial(mt,!0)})}),vt.push(m.drawData,m.finalDraw,c,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,r.previousPromises);var xt=T.syncOrAsync(vt,ke);return xt&&xt.then||(xt=Promise.resolve()),xt.then(function(){return w(ke),ke})},D.purge=function(ke){var be=(ke=T.getGraphDiv(ke))._fullLayout||{},Ie=ke._fullData||[];return r.cleanPlot([],{},Ie,be),r.purge(ke),d.purge(ke),be._container&&be._container.remove(),delete ke._context,ke},D.react=function(ke,be,Ie,Fe){var ce,we;ke=T.getGraphDiv(ke),v.clearPromiseQueue(ke);var ye=ke._fullData,Ce=ke._fullLayout;if(T.isPlotDiv(ke)&&ye&&Ce){if(T.isPlainObject(be)){var Re=be;be=Re.data,Ie=Re.layout,Fe=Re.config,ce=Re.frames}var ze=!1;if(Fe){var He=T.extendDeep({},ke._context);ke._context=void 0,C(ke,Fe),ze=he(He,ke._context)}ke.data=be||[],v.cleanData(ke.data),ke.layout=Ie||{},v.cleanLayout(ke.layout),function(et,De,Be,nt){var tt,dt,ht,gt,ut,wt,ct,ft,bt,It,Dt=nt._preGUI,Nt=[],Qt={},jt={};for(tt in Dt){if(ut=ve(tt,_e)){if(bt=ut.head,It=ut.tail,dt=ut.attr||bt+".uirevision",(gt=(ht=b(nt,dt).get())&&Oe(dt,De))&&gt===ht){if((wt=Dt[tt])===null&&(wt=void 0),se(ft=(ct=b(De,tt)).get(),wt)){ft===void 0&&It==="autorange"&&Nt.push(bt),ct.set(B(b(nt,tt).get()));continue}if(It==="autorange"||It.substr(0,6)==="range["){var Ut=Dt[bt+".range[0]"],Xt=Dt[bt+".range[1]"],gn=Dt[bt+".autorange"];if(gn||gn===null&&Ut===null&&Xt===null){if(!(bt in Qt)){var Mn=b(De,bt).get();Qt[bt]=Mn&&(Mn.autorange||Mn.autorange!==!1&&(!Mn.range||Mn.range.length!==2))}if(Qt[bt]){ct.set(B(b(nt,tt).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+tt);delete Dt[tt],ut&&ut.tail.substr(0,6)==="range["&&(jt[ut.head]=1)}for(var cn=0;cn<Nt.length;cn++){var qt=Nt[cn];if(jt[qt]){var nn=b(De,qt).get();nn&&delete nn.autorange}}var Kt=nt._tracePreGUI;for(var sn in Kt){var hn,bn=Kt[sn],yn=null;for(tt in bn){if(!yn){var Sn=Me(sn,Be);if(Sn<0){delete Kt[sn];break}var pn=Te(sn,et,(hn=Be[Sn]._fullInput).index);if(pn<0){delete Kt[sn];break}yn=et[pn]}if(ut=ve(tt,me)){if(ut.attr?gt=(ht=b(nt,ut.attr).get())&&Oe(ut.attr,De):(ht=hn.uirevision,(gt=yn.uirevision)===void 0&&(gt=De.uirevision)),gt&&gt===ht&&((wt=bn[tt])===null&&(wt=void 0),se(ft=(ct=b(yn,tt)).get(),wt))){ct.set(B(b(hn,tt).get()));continue}}else T.warn("unrecognized GUI edit: "+tt+" in trace uid "+sn);delete bn[tt]}}}(ke.data,ke.layout,ye,Ce),r.supplyDefaults(ke,{skipUpdateCalc:!0});var Ge=ke._fullData,Je=ke._fullLayout,ot=Je.datarevision===void 0,Qe=Je.transition,vt=function(et,De,Be,nt,tt){var dt=_.layoutFlags();return dt.arrays={},dt.rangesAltered={},dt.nChanges=0,dt.nChangesAnim=0,oe(De,Be,[],{getValObject:function(ht){return i.getLayoutValObject(Be,ht)},flags:dt,immutable:nt,transition:tt,gd:et}),(dt.plot||dt.calc)&&(dt.layoutReplot=!0),tt&&dt.nChanges&&dt.nChangesAnim&&(dt.anim=dt.nChanges===dt.nChangesAnim?"all":"some"),dt}(ke,Ce,Je,ot,Qe),xt=vt.newDataRevision,mt=function(et,De,Be,nt,tt,dt){var ht=De.length===Be.length;if(!tt&&!ht)return{fullReplot:!0,calc:!0};var gt,ut,wt=_.traceFlags();wt.arrays={},wt.nChanges=0,wt.nChangesAnim=0;var ct={getValObject:function(bt){var It=i.getTraceValObject(ut,bt);return!ut._module.animatable&&It.anim&&(It.anim=!1),It},flags:wt,immutable:nt,transition:tt,newDataRevision:dt,gd:et},ft={};for(gt=0;gt<De.length;gt++)if(Be[gt]){if(ut=Be[gt]._fullInput,r.hasMakesDataTransform(ut)&&(ut=Be[gt]),ft[ut.uid])continue;ft[ut.uid]=1,oe(De[gt]._fullInput,ut,[],ct)}return(wt.calc||wt.plot)&&(wt.fullReplot=!0),tt&&wt.nChanges&&wt.nChangesAnim&&(wt.anim=wt.nChanges===wt.nChangesAnim&&ht?"all":"some"),wt}(ke,ye,Ge,ot,Qe,xt);if(ue(ke)&&(vt.layoutReplot=!0),mt.calc||vt.calc){ke.calcdata=void 0;for(var rt=Object.getOwnPropertyNames(Je),it=0;it<rt.length;it++){var Tt=rt[it],Mt=Tt.substring(0,5);if(Mt==="xaxis"||Mt==="yaxis"){var Pt=Je[Tt]._emptyCategories;Pt&&Pt()}}}else r.supplyDefaultsUpdateCalc(ke.calcdata,Ge);var kt=[];if(ce&&(ke._transitionData={},r.createTransitionData(ke),kt.push(function(){return D.addFrames(ke,ce)})),Je.transition&&!ze&&(mt.anim||vt.anim))vt.ticks&&kt.push(m.doTicksRelayout),r.doCalcdata(ke),m.doAutoRangeAndConstraints(ke),kt.push(function(){return r.transitionFromReact(ke,mt,vt,Ce)});else if(mt.fullReplot||vt.layoutReplot||ze)ke._fullLayout._skipDefaults=!0,kt.push(D._doPlot);else{for(var Ze in vt.arrays){var Xe=vt.arrays[Ze];if(Xe.length){var Ve=t.getComponentMethod(Ze,"drawOne");if(Ve!==T.noop)for(var We=0;We<Xe.length;We++)Ve(ke,Xe[We]);else{var at=t.getComponentMethod(Ze,"draw");if(at===T.noop)throw new Error("cannot draw components: "+Ze);at(ke)}}}kt.push(r.previousPromises),mt.style&&kt.push(m.doTraceStyle),(mt.colorbars||vt.colorbars)&&kt.push(m.doColorBars),vt.legend&&kt.push(m.doLegend),vt.layoutstyle&&kt.push(m.layoutStyles),vt.axrange&&W(kt),vt.ticks&&kt.push(m.doTicksRelayout),vt.modebar&&kt.push(m.doModeBar),vt.camera&&kt.push(m.doCamera),kt.push(w)}kt.push(r.rehover,r.redrag,r.reselect),(we=T.syncOrAsync(kt,ke))&&we.then||(we=Promise.resolve(ke))}else we=D.newPlot(ke,be,Ie,Fe);return we.then(function(){return ke.emit("plotly_react",{data:be,layout:Ie}),ke})},D.redraw=function(ke){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);return v.cleanData(ke.data),v.cleanLayout(ke.layout),ke.calcdata=void 0,D._doPlot(ke).then(function(){return ke.emit("plotly_redraw"),ke})},D.relayout=J,D.restyle=N,D.setPlotConfig=function(ke){return T.extendFlat(h,ke)},D.update=pe,D._guiRelayout=ge(J),D._guiRestyle=ge(N),D._guiUpdate=ge(pe),D._storeDirectGUIEdit=function(ke,be,Ie){for(var Fe in Ie)q(Fe,b(ke,Fe).get(),Ie[Fe],be)}},72075:function(ee){var D={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function M(k,l){for(var T in k){var b=k[T];b.valType?l[T]=b.dflt:(l[T]||(l[T]={}),M(b,l[T]))}})(D,e),ee.exports={configAttributes:D,dfltConfig:e}},86281:function(ee,D,e){var M=e(73972),k=e(71828),l=e(9012),T=e(10820),b=e(31391),d=e(85594),s=e(72075).configAttributes,t=e(30962),i=k.extendDeepAll,r=k.isPlainObject,n=k.isArrayOrTypedArray,o=k.nestedProperty,a=k.valObjectMeta,u="_isSubplotObj",p="_isLinkedToArray",c="_deprecated",x=[u,p,"_arrayAttrRegexps",c];function g(f,S,w){if(!f)return!1;if(f._isLinkedToArray){if(h(S[w]))w++;else if(w<S.length)return!1}for(;w<S.length;w++){var E=f[S[w]];if(!r(E)||(f=E,w===S.length-1))break;if(f._isLinkedToArray){if(!h(S[++w]))return!1}else if(f.valType==="info_array"){var L=S[++w];if(!h(L))return!1;var C=f.items;if(Array.isArray(C)){if(L>=C.length)return!1;if(f.dimensions===2){if(w++,S.length===w)return f;var P=S[w];if(!h(P))return!1;f=C[L][P]}else f=C[L]}else f=C}}return f}function h(f){return f===Math.round(f)&&f>=0}function y(){var f,S,w={};for(f in i(w,T),M.subplotsRegistry)if((S=M.subplotsRegistry[f]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)m(w,S,S.attr[E]);else m(w,S,S.attr==="subplot"?S.name:S.attr);for(f in M.componentsRegistry){var L=(S=M.componentsRegistry[f]).schema;if(L&&(L.subplots||L.layout)){var C=L.subplots;if(C&&C.xaxis&&!C.yaxis)for(var P in C.xaxis)delete w.yaxis[P];delete w.xaxis.shift,delete w.xaxis.autoshift}else S.name==="colorscale"?i(w,S.layoutAttributes):S.layoutAttributes&&_(w,S.layoutAttributes,S.name)}return{layoutAttributes:v(w)}}function v(f){return function(S){D.crawl(S,function(w,E,L){D.isValObject(w)?w.arrayOk!==!0&&w.valType!=="data_array"||(L[E+"src"]={valType:"string",editType:"none"}):r(w)&&(w.role="object")})}(f),function(S){D.crawl(S,function(w,E,L){if(w){var C=w[p];C&&(delete w[p],L[E]={items:{}},L[E].items[C]=w,L[E].role="object")}})}(f),function(S){(function w(E){for(var L in E)if(r(E[L]))w(E[L]);else if(Array.isArray(E[L]))for(var C=0;C<E[L].length;C++)w(E[L][C]);else E[L]instanceof RegExp&&(E[L]=E[L].toString())})(S)}(f),f}function m(f,S,w){var E=o(f,w),L=i({},S.layoutAttributes);L[u]=!0,E.set(L)}function _(f,S,w){var E=o(f,w);E.set(i(E.get()||{},S))}D.IS_SUBPLOT_OBJ=u,D.IS_LINKED_TO_ARRAY=p,D.DEPRECATED=c,D.UNDERSCORE_ATTRS=x,D.get=function(){var f={};M.allTypes.forEach(function(E){f[E]=function(L){var C,P;P=(C=M.modules[L]._module).basePlotModule;var z={type:null},G=i({},l),O=i({},C.attributes);D.crawl(O,function(B,V,q,te,K){o(G,K).set(void 0),B===void 0&&o(O,K).set(void 0)}),i(z,G),M.traceIs(L,"noOpacity")&&delete z.opacity,M.traceIs(L,"showLegend")||(delete z.showlegend,delete z.legendgroup),M.traceIs(L,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),C.selectPoints||delete z.selectedpoints,i(z,O),P.attributes&&i(z,P.attributes),z.type=L;var H={meta:C.meta||{},categories:C.categories||{},animatable:!!C.animatable,type:L,attributes:v(z)};if(C.layoutAttributes){var N={};i(N,C.layoutAttributes),H.layoutAttributes=v(N)}return C.animatable||D.crawl(H,function(B){D.isValObject(B)&&"anim"in B&&delete B.anim}),H}(E)});var S,w={};return Object.keys(M.transformsRegistry).forEach(function(E){w[E]=function(L){var C=M.transformsRegistry[L],P=i({},C.attributes);return Object.keys(M.componentsRegistry).forEach(function(z){var G=M.componentsRegistry[z];G.schema&&G.schema.transforms&&G.schema.transforms[L]&&Object.keys(G.schema.transforms[L]).forEach(function(O){_(P,G.schema.transforms[L][O],O)})}),{attributes:v(P)}}(E)}),{defs:{valObjects:a,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:f,layout:y(),transforms:w,frames:(S={frames:i({},b)},v(S),S.frames),animation:v(d),config:v(s)}},D.crawl=function(f,S,w,E){var L=w||0;E=E||"",Object.keys(f).forEach(function(C){var P=f[C];if(x.indexOf(C)===-1){var z=(E?E+".":"")+C;S(P,C,f,L,z),D.isValObject(P)||r(P)&&C!=="impliedEdits"&&D.crawl(P,S,L+1,z)}})},D.isValObject=function(f){return f&&f.valType!==void 0},D.findArrayAttributes=function(f){var S,w,E=[],L=[],C=[];function P(B,V,q,te){L=L.slice(0,te).concat([V]),C=C.slice(0,te).concat([B&&B._isLinkedToArray]),B&&(B.valType==="data_array"||B.arrayOk===!0)&&(L[te-1]!=="colorbar"||V!=="ticktext"&&V!=="tickvals")&&z(S,0,"")}function z(B,V,q){var te=B[L[V]],K=q+L[V];if(V===L.length-1)n(te)&&E.push(w+K);else if(C[V]){if(Array.isArray(te))for(var J=0;J<te.length;J++)r(te[J])&&z(te[J],V+1,K+"["+J+"].")}else r(te)&&z(te,V+1,K+".")}S=f,w="",D.crawl(l,P),f._module&&f._module.attributes&&D.crawl(f._module.attributes,P);var G=f.transforms;if(G)for(var O=0;O<G.length;O++){var H=G[O],N=H._module;N&&(w="transforms["+O+"].",S=H,D.crawl(N.attributes,P))}return E},D.getTraceValObject=function(f,S){var w,E,L=S[0],C=1;if(L==="transforms"){if(S.length===1)return l.transforms;var P=f.transforms;if(!Array.isArray(P)||!P.length)return!1;var z=S[1];if(!h(z)||z>=P.length)return!1;E=(w=(M.transformsRegistry[P[z].type]||{}).attributes)&&w[S[2]],C=3}else{var G=f._module;if(G||(G=(M.modules[f.type||l.type.dflt]||{})._module),!G)return!1;if(!(E=(w=G.attributes)&&w[L])){var O=G.basePlotModule;O&&O.attributes&&(E=O.attributes[L])}E||(E=l[L])}return g(E,S,C)},D.getLayoutValObject=function(f,S){var w=function(E,L){var C,P,z,G,O=E._basePlotModules;if(O){var H;for(C=0;C<O.length;C++){if((z=O[C]).attrRegex&&z.attrRegex.test(L)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!H&&z.layoutAttributes&&(H=z.layoutAttributes)}var N=z.baseLayoutAttrOverrides;if(N&&L in N)return N[L]}if(H)return H}var B=E._modules;if(B){for(C=0;C<B.length;C++)if((G=B[C].layoutAttributes)&&L in G)return G[L]}for(P in M.componentsRegistry){if((z=M.componentsRegistry[P]).name==="colorscale"&&L.indexOf("coloraxis")===0)return z.layoutAttributes[L];if(!z.schema&&L===z.name)return z.layoutAttributes}return L in T&&T[L]}(f,S[0]);return g(w,S,1)}},44467:function(ee,D,e){var M=e(71828),k=e(9012),l="templateitemname",T={name:{valType:"string",editType:"none"}};function b(s){return s&&typeof s=="string"}function d(s){var t=s.length-1;return s.charAt(t)!=="s"&&M.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}T[l]={valType:"string",editType:"calc"},D.templatedArray=function(s,t){return t._isLinkedToArray=s,t.name=T.name,t[l]=T[l],t},D.traceTemplater=function(s){var t,i,r={};for(t in s)i=s[t],Array.isArray(i)&&i.length&&(r[t]=0);return{newTrace:function(n){var o={type:t=M.coerce(n,{},k,"type"),_template:null};if(t in r){i=s[t];var a=r[t]%i.length;r[t]++,o._template=i[a]}return o}}},D.newContainer=function(s,t,i){var r=s._template,n=r&&(r[t]||i&&r[i]);return M.isPlainObject(n)||(n=null),s[t]={_template:n}},D.arrayTemplater=function(s,t,i){var r=s._template,n=r&&r[d(t)],o=r&&r[t];Array.isArray(o)&&o.length||(o=[]);var a={};return{newItem:function(u){var p={name:u.name,_input:u},c=p[l]=u[l];if(!b(c))return p._template=n,p;for(var x=0;x<o.length;x++){var g=o[x];if(g.name===c)return a[c]=1,p._template=g,p}return p[i]=u[i]||!1,p._template=!1,p},defaultItems:function(){for(var u=[],p=0;p<o.length;p++){var c=o[p],x=c.name;if(b(x)&&!a[x]){var g={_template:c,name:x,_input:{_templateitemname:x}};g[l]=c[l],u.push(g),a[x]=1}}return u}}},D.arrayDefaultKey=d,D.arrayEditor=function(s,t,i){var r=(M.nestedProperty(s,t).get()||[]).length,n=i._index,o=n>=r&&(i._input||{})._templateitemname;o&&(n=r);var a,u=t+"["+n+"]";function p(){a={},o&&(a[u]={},a[u][l]=o)}function c(g,h){o?M.nestedProperty(a[u],g).set(h):a[u+"."+g]=h}function x(){var g=a;return p(),g}return p(),{modifyBase:function(g,h){a[g]=h},modifyItem:c,getUpdateObj:x,applyUpdate:function(g,h){g&&c(g,h);var y=x();for(var v in y)M.nestedProperty(s,v).set(y[v])}}}},61549:function(ee,D,e){var M=e(39898),k=e(73972),l=e(74875),T=e(71828),b=e(63893),d=e(33306),s=e(7901),t=e(91424),i=e(92998),r=e(64168),n=e(89298),o=e(18783),a=e(99082),u=a.enforce,p=a.clean,c=e(71739).doAutoRange,x="start";function g(_,f,S){for(var w=0;w<S.length;w++){var E=S[w][0],L=S[w][1];if(!(E[0]>=_[1]||E[1]<=_[0])&&L[0]<f[1]&&L[1]>f[0])return!0}return!1}function h(_){var f,S,w,E,L,C,P=_._fullLayout,z=P._size,G=z.p,O=n.list(_,"",!0);if(P._paperdiv.style({width:_._context.responsive&&P.autosize&&!_._context._hasZeroWidth&&!_.layout.width?"100%":P.width+"px",height:_._context.responsive&&P.autosize&&!_._context._hasZeroHeight&&!_.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(t.setSize,P.width,P.height),_._context.setBackground(_,P.paper_bgcolor),D.drawMainTitle(_),r.manage(_),!P._has("cartesian"))return l.previousPromises(_);function H(ze,He,Ge){var Je=ze._lw/2;return ze._id.charAt(0)==="x"?He?Ge==="top"?He._offset-G-Je:He._offset+He._length+G+Je:z.t+z.h*(1-(ze.position||0))+Je%1:He?Ge==="right"?He._offset+He._length+G+Je:He._offset-G-Je:z.l+z.w*(ze.position||0)+Je%1}for(f=0;f<O.length;f++){var N=(E=O[f])._anchorAxis;E._linepositions={},E._lw=t.crispRound(_,E.linewidth,1),E._mainLinePosition=H(E,N,E.side),E._mainMirrorPosition=E.mirror&&N?H(E,N,o.OPPOSITE_SIDE[E.side]):null}var B=[],V=[],q=[],te=s.opacity(P.paper_bgcolor)===1&&s.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(S in P._plots)if((w=P._plots[S]).mainplot)w.bg&&w.bg.remove(),w.bg=void 0;else{var K=w.xaxis.domain,J=w.yaxis.domain,Y=w.plotgroup;if(g(K,J,q)){var W=Y.node(),Q=w.bg=T.ensureSingle(Y,"rect","bg");W.insertBefore(Q.node(),W.childNodes[0]),V.push(S)}else Y.select("rect.bg").remove(),q.push([K,J]),te||(B.push(S),V.push(S))}var ne,re,ae,ue,pe,ge,_e,me,ve,Oe,Me,Te,se,oe=P._bgLayer.selectAll(".bg").data(B);for(oe.enter().append("rect").classed("bg",!0),oe.exit().remove(),oe.each(function(ze){P._plots[ze].bg=M.select(this)}),f=0;f<V.length;f++)w=P._plots[V[f]],L=w.xaxis,C=w.yaxis,w.bg&&L._offset!==void 0&&C._offset!==void 0&&w.bg.call(t.setRect,L._offset-G,C._offset-G,L._length+2*G,C._length+2*G).call(s.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(S in P._plots){w=P._plots[S],L=w.xaxis,C=w.yaxis;var he,Ee,ke=w.clipId="clip"+P._uid+S+"plot",be=T.ensureSingleById(P._clips,"clipPath",ke,function(ze){ze.classed("plotclip",!0).append("rect")});w.clipRect=be.select("rect").attr({width:L._length,height:C._length}),t.setTranslate(w.plot,L._offset,C._offset),w._hasClipOnAxisFalse?(he=null,Ee=ke):(he=ke,Ee=null),t.setClipUrl(w.plot,he,_),w.layerClipId=Ee}function Ie(ze){return"M"+ne+","+ze+"H"+re}function Fe(ze){return"M"+L._offset+","+ze+"h"+L._length}function ce(ze){return"M"+ze+","+me+"V"+_e}function we(ze){return C._shift!==void 0&&(ze+=C._shift),"M"+ze+","+C._offset+"v"+C._length}function ye(ze,He,Ge){if(!ze.showline||S!==ze._mainSubplot)return"";if(!ze._anchorAxis)return Ge(ze._mainLinePosition);var Je=He(ze._mainLinePosition);return ze.mirror&&(Je+=He(ze._mainMirrorPosition)),Je}for(S in P._plots){w=P._plots[S],L=w.xaxis,C=w.yaxis;var Ce="M0,0";y(L,S)&&(pe=m(L,"left",C,O),ne=L._offset-(pe?G+pe:0),ge=m(L,"right",C,O),re=L._offset+L._length+(ge?G+ge:0),ae=H(L,C,"bottom"),ue=H(L,C,"top"),!(se=!L._anchorAxis||S!==L._mainSubplot)||L.mirror!=="allticks"&&L.mirror!=="all"||(L._linepositions[S]=[ae,ue]),Ce=ye(L,Ie,Fe),se&&L.showline&&(L.mirror==="all"||L.mirror==="allticks")&&(Ce+=Ie(ae)+Ie(ue)),w.xlines.style("stroke-width",L._lw+"px").call(s.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),w.xlines.attr("d",Ce);var Re="M0,0";y(C,S)&&(Me=m(C,"bottom",L,O),_e=C._offset+C._length+(Me?G:0),Te=m(C,"top",L,O),me=C._offset-(Te?G:0),ve=H(C,L,"left"),Oe=H(C,L,"right"),!(se=!C._anchorAxis||S!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[S]=[ve,Oe]),Re=ye(C,ce,we),se&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(Re+=ce(ve)+ce(Oe)),w.ylines.style("stroke-width",C._lw+"px").call(s.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),w.ylines.attr("d",Re)}return n.makeClipPaths(_),l.previousPromises(_)}function y(_,f){return(_.ticks||_.showline)&&(f===_._mainSubplot||_.mirror==="all"||_.mirror==="allticks")}function v(_,f,S){if(!S.showline||!S._lw)return!1;if(S.mirror==="all"||S.mirror==="allticks")return!0;var w=S._anchorAxis;if(!w)return!1;var E=o.FROM_BL[f];return S.side===f?w.domain[E]===_.domain[E]:S.mirror&&w.domain[1-E]===_.domain[1-E]}function m(_,f,S,w){if(v(_,f,S))return S._lw;for(var E=0;E<w.length;E++){var L=w[E];if(L._mainAxis===S._mainAxis&&v(_,f,L))return L._lw}return 0}D.layoutStyles=function(_){return T.syncOrAsync([l.doAutoMargin,h],_)},D.drawMainTitle=function(_){var f,S=_._fullLayout.title,w=_._fullLayout,E=function(H){var N=H.title,B="middle";return T.isRightAnchor(N)?B="end":T.isLeftAnchor(N)&&(B=x),B}(w),L=function(H){var N=H.title,B="0em";return T.isTopAnchor(N)?B=o.CAP_SHIFT+"em":T.isMiddleAnchor(N)&&(B=o.MID_SHIFT+"em"),B}(w),C=function(H,N){var B=H.title,V=H._size,q=0;return N!=="0em"&&N?N===o.CAP_SHIFT+"em"&&(q=B.pad.t):q=-B.pad.b,B.y==="auto"?V.t/2:B.yref==="paper"?V.t+V.h-V.h*B.y+q:H.height-H.height*B.y+q}(w,L),P=function(H,N){var B=H.title,V=H._size,q=0;return N===x?q=B.pad.l:N==="end"&&(q=-B.pad.r),B.xref==="paper"?V.l+V.w*B.x+q:H.width*B.x+q}(w,E);if(i.draw(_,"gtitle",{propContainer:w,propName:"title.text",placeholder:w._dfltTitle.plot,attributes:{x:P,y:C,"text-anchor":E,dy:L}}),S.text&&S.automargin){var z=M.selectAll(".gtitle"),G=t.bBox(z.node()).height,O=function(H,N,B){var V=N.y,q=N.yanchor,te=V>.5?"t":"b",K=H._fullLayout.margin[te],J=0;return N.yref==="paper"?J=B+N.pad.t+N.pad.b:N.yref==="container"&&(J=function(Y,W,Q,ne,re){var ae=0;return Q==="middle"&&(ae+=re/2),Y==="t"?(Q==="top"&&(ae+=re),ae+=ne-W*ne):(Q==="bottom"&&(ae+=re),ae+=W*ne),ae}(te,V,q,H._fullLayout.height,B)+N.pad.t+N.pad.b),J>K?J:0}(_,S,G);O>0&&(function(H,N,B,V){var q="title.automargin",te=H._fullLayout.title,K=te.y>.5?"t":"b",J={x:te.x,y:te.y,t:0,b:0},Y={};te.yref==="paper"&&function(W,Q,ne,re,ae){var ue=Q.yref==="paper"?W._fullLayout._size.h:W._fullLayout.height,pe=T.isTopAnchor(Q)?re:re-ae,ge=ne==="b"?ue-pe:pe;return!(T.isTopAnchor(Q)&&ne==="t"||T.isBottomAnchor(Q)&&ne==="b")&&ge<ae}(H,te,K,N,V)?J[K]=B:te.yref==="container"&&(Y[K]=B,H._fullLayout._reservedMargin[q]=Y),l.allowAutoMargin(H,q),l.autoMargin(H,q,J)}(_,C,O,G),z.attr({x:P,y:C,"text-anchor":E,dy:(f=S.yanchor,f==="top"?o.CAP_SHIFT+.3+"em":f==="bottom"?"-0.3em":o.MID_SHIFT+"em")}).call(b.positionText,P,C))}},D.doTraceStyle=function(_){var f,S=_.calcdata,w=[];for(f=0;f<S.length;f++){var E=S[f],L=E[0]||{},C=L.trace||{},P=C._module||{},z=P.arraysToCalcdata;z&&z(E,C);var G=P.editStyle;G&&w.push({fn:G,cd0:L})}if(w.length){for(f=0;f<w.length;f++){var O=w[f];O.fn(_,O.cd0)}d(_),D.redrawReglTraces(_)}return l.style(_),k.getComponentMethod("legend","draw")(_),l.previousPromises(_)},D.doColorBars=function(_){return k.getComponentMethod("colorbar","draw")(_),l.previousPromises(_)},D.layoutReplot=function(_){var f=_.layout;return _.layout=void 0,k.call("_doPlot",_,"",f)},D.doLegend=function(_){return k.getComponentMethod("legend","draw")(_),l.previousPromises(_)},D.doTicksRelayout=function(_){return n.draw(_,"redraw"),_._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(_),d(_),D.redrawReglTraces(_)),D.drawMainTitle(_),l.previousPromises(_)},D.doModeBar=function(_){var f=_._fullLayout;r.manage(_);for(var S=0;S<f._basePlotModules.length;S++){var w=f._basePlotModules[S].updateFx;w&&w(_)}return l.previousPromises(_)},D.doCamera=function(_){for(var f=_._fullLayout,S=f._subplots.gl3d,w=0;w<S.length;w++){var E=f[S[w]];E._scene.setViewport(E)}},D.drawData=function(_){var f=_._fullLayout;d(_);for(var S=f._basePlotModules,w=0;w<S.length;w++)S[w].plot(_);return D.redrawReglTraces(_),l.style(_),k.getComponentMethod("selections","draw")(_),k.getComponentMethod("shapes","draw")(_),k.getComponentMethod("annotations","draw")(_),k.getComponentMethod("images","draw")(_),f._replotting=!1,l.previousPromises(_)},D.redrawReglTraces=function(_){var f=_._fullLayout;if(f._has("regl")){var S,w,E=_._fullData,L=[],C=[];for(f._hasOnlyLargeSploms&&f._splomGrid.draw(),S=0;S<E.length;S++){var P=E[S];P.visible===!0&&P._length!==0&&(P.type==="splom"?f._splomScenes[P.uid].draw():P.type==="scattergl"?T.pushUnique(L,P.xaxis+P.yaxis):P.type==="scatterpolargl"&&T.pushUnique(C,P.subplot))}for(S=0;S<L.length;S++)(w=f._plots[L[S]])._scene&&w._scene.draw();for(S=0;S<C.length;S++)(w=f[C[S]]._subplot)._scene&&w._scene.draw()}},D.doAutoRangeAndConstraints=function(_){for(var f,S=n.list(_,"",!0),w={},E=0;E<S.length;E++)if(!w[(f=S[E])._id]){w[f._id]=1,p(_,f),c(_,f);var L=f._matchGroup;if(L)for(var C in L){var P=n.getFromId(_,C);c(_,P,f.range),w[C]=1}}u(_)},D.finalDraw=function(_){k.getComponentMethod("rangeslider","draw")(_),k.getComponentMethod("rangeselector","draw")(_)},D.drawMarginPushers=function(_){k.getComponentMethod("legend","draw")(_),k.getComponentMethod("rangeselector","draw")(_),k.getComponentMethod("sliders","draw")(_),k.getComponentMethod("updatemenus","draw")(_),k.getComponentMethod("colorbar","draw")(_)}},96318:function(ee,D,e){var M=e(71828),k=M.isPlainObject,l=e(86281),T=e(74875),b=e(9012),d=e(44467),s=e(72075).dfltConfig;function t(c,x){c=M.extendDeep({},c);var g,h,y=Object.keys(c).sort();function v(w,E,L){if(k(E)&&k(w))t(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var C=d.arrayTemplater({_template:c},L);for(h=0;h<E.length;h++){var P=E[h],z=C.newItem(P)._template;z&&t(z,P)}var G=C.defaultItems();for(h=0;h<G.length;h++)E.push(G[h]._template);for(h=0;h<E.length;h++)delete E[h].templateitemname}}for(g=0;g<y.length;g++){var m=y[g],_=c[m];if(m in x?v(_,x[m],m):x[m]=_,i(m)===m)for(var f in x){var S=i(f);f===S||S!==m||f in c||v(_,x[f],m)}}}function i(c){return c.replace(/[0-9]+$/,"")}function r(c,x,g,h,y){var v=y&&g(y);for(var m in c){var _=c[m],f=a(c,m,h),S=a(c,m,y),w=g(S);if(!w){var E=i(m);E!==m&&(w=g(S=a(c,E,y)))}if(!(v&&v===w||!w||w._noTemplating||w.valType==="data_array"||w.arrayOk&&Array.isArray(_)))if(!w.valType&&k(_))r(_,x,g,f,S);else if(w._isLinkedToArray&&Array.isArray(_))for(var L=!1,C=0,P={},z=0;z<_.length;z++){var G=_[z];if(k(G)){var O=G.name;if(O)P[O]||(r(G,x,g,a(_,C,f),a(_,C,S)),C++,P[O]=1);else if(!L){var H=a(c,d.arrayDefaultKey(m),h),N=a(_,C,f);r(G,x,g,N,a(_,C,S));var B=M.nestedProperty(x,N);M.nestedProperty(x,H).set(B.get()),B.set(null),L=!0}}}else M.nestedProperty(x,f).set(_)}}function n(c,x){return l.getLayoutValObject(c,M.nestedProperty({},x).parts)}function o(c,x){return l.getTraceValObject(c,M.nestedProperty({},x).parts)}function a(c,x,g){return g?Array.isArray(c)?g+"["+x+"]":g+"."+x:x}function u(c){for(var x=0;x<c.length;x++)if(k(c[x]))return!0}function p(c){var x;switch(c.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":x=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=x,c}D.makeTemplate=function(c){c=M.isPlainObject(c)?c:M.getGraphDiv(c),c=M.extendDeep({_context:s},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var x=c.data||[],g=c.layout||{};g._basePlotModules=c._fullLayout._basePlotModules,g._modules=c._fullLayout._modules;var h={data:{},layout:{}};x.forEach(function(C){var P={};r(C,P,o.bind(null,C));var z=M.coerce(C,{},b,"type"),G=h.data[z];G||(G=h.data[z]=[]),G.push(P)}),r(g,h.layout,n.bind(null,g)),delete h.layout.template;var y=g.template;if(k(y)){var v,m,_,f,S,w,E=y.layout;k(E)&&t(E,h.layout);var L=y.data;if(k(L)){for(m in h.data)if(_=L[m],Array.isArray(_)){for(w=(S=h.data[m]).length,f=_.length,v=0;v<w;v++)t(_[v%f],S[v]);for(v=w;v<f;v++)S.push(M.extendDeep({},_[v]))}for(m in L)m in h.data||(h.data[m]=M.extendDeep([],L[m]))}}return h},D.validateTemplate=function(c,x){var g=M.extendDeep({},{_context:s,data:c.data,layout:c.layout}),h=g.layout||{};k(x)||(x=h.template||{});var y=x.layout,v=x.data,m=[];g.layout=h,g.layout.template=x,T.supplyDefaults(g);var _=g._fullLayout,f=g._fullData,S={};if(k(y)?(function G(O,H){for(var N in O)if(N.charAt(0)!=="_"&&k(O[N])){var B,V=i(N),q=[];for(B=0;B<H.length;B++)q.push(a(O,N,H[B])),V!==N&&q.push(a(O,V,H[B]));for(B=0;B<q.length;B++)S[q[B]]=1;G(O[N],q)}}(_,["layout"]),function G(O,H){for(var N in O)if(N.indexOf("defaults")===-1&&k(O[N])){var B=a(O,N,H);S[B]?G(O[N],B):m.push({code:"unused",path:B})}}(y,"layout")):m.push({code:"layout"}),k(v)){for(var w,E={},L=0;L<f.length;L++){var C=f[L];E[w=C.type]=(E[w]||0)+1,C._fullInput._template||m.push({code:"missing",index:C._fullInput.index,traceType:w})}for(w in v){var P=v[w].length,z=E[w]||0;P>z?m.push({code:"unused",traceType:w,templateCount:P,dataCount:z}):z>P&&m.push({code:"reused",traceType:w,templateCount:P,dataCount:z})}}else m.push({code:"data"});if(function G(O,H){for(var N in O)if(N.charAt(0)!=="_"){var B=O[N],V=a(O,N,H);k(B)?(Array.isArray(O)&&B._template===!1&&B.templateitemname&&m.push({code:"missing",path:V,templateitemname:B.templateitemname}),G(B,V)):Array.isArray(B)&&u(B)&&G(B,V)}}({data:f,layout:_},""),m.length)return m.map(p)}},403:function(ee,D,e){var M=e(92770),k=e(72391),l=e(74875),T=e(71828),b=e(25095),d=e(5900),s=e(70942),t=e(11506).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ee.exports=function(r,n){var o,a,u,p;function c(z){return!(z in n)||T.validate(n[z],i[z])}if(n=n||{},T.isPlainObject(r)?(o=r.data||[],a=r.layout||{},u=r.config||{},p={}):(r=T.getGraphDiv(r),o=T.extendDeep([],r.data),a=T.extendDeep({},r.layout),u=r._context,p=r._fullLayout||{}),!c("width")&&n.width!==null||!c("height")&&n.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+T.join2(i.format.values,", "," or ")+".");var x={};function g(z,G){return T.coerce(n,x,i,z,G)}var h=g("format"),y=g("width"),v=g("height"),m=g("scale"),_=g("setBackground"),f=g("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var w=T.extendFlat({},a);y?w.width=y:n.width===null&&M(p.width)&&(w.width=p.width),v?w.height=v:n.height===null&&M(p.height)&&(w.height=p.height);var E=T.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),L=b.getRedrawFunc(S);function C(){return new Promise(function(z){setTimeout(z,b.getDelay(S._fullLayout))})}function P(){return new Promise(function(z,G){var O=d(S,h,m),H=S._fullLayout.width,N=S._fullLayout.height;function B(){k.purge(S),document.body.removeChild(S)}if(h==="full-json"){var V=l.graphJson(S,!1,"keepdata","object",!0,!0);return V.version=t,V=JSON.stringify(V),B(),z(f?V:b.encodeJSON(V))}if(B(),h==="svg")return z(f?O:b.encodeSVG(O));var q=document.createElement("canvas");q.id=T.randstr(),s({format:h,width:H,height:N,scale:m,canvas:q,svg:O,promise:!0}).then(z).catch(G)})}return new Promise(function(z,G){k.newPlot(S,o,w,E).then(L).then(C).then(P).then(function(O){z(function(H){return f?H.replace(b.IMAGE_URL_PREFIX,""):H}(O))}).catch(function(O){G(O)})})}},84936:function(ee,D,e){var M=e(71828),k=e(74875),l=e(86281),T=e(72075).dfltConfig,b=M.isPlainObject,d=Array.isArray,s=M.isArrayOrTypedArray;function t(c,x,g,h,y,v){v=v||[];for(var m=Object.keys(c),_=0;_<m.length;_++){var f=m[_];if(f!=="transforms"){var S=v.slice();S.push(f);var w=c[f],E=x[f],L=a(g,f),C=(L||{}).valType,P=C==="info_array",z=C==="colorscale",G=(L||{}).items;if(o(g,f))if(b(w)&&b(E)&&C!=="any")t(w,E,L,h,y,S);else if(P&&d(w)){w.length>E.length&&h.push(n("unused",y,S.concat(E.length)));var O,H,N,B,V,q=E.length,te=Array.isArray(G);if(te&&(q=Math.min(q,G.length)),L.dimensions===2)for(H=0;H<q;H++)if(d(w[H])){w[H].length>E[H].length&&h.push(n("unused",y,S.concat(H,E[H].length)));var K=E[H].length;for(O=0;O<(te?Math.min(K,G[H].length):K);O++)N=te?G[H][O]:G,B=w[H][O],V=E[H][O],M.validate(B,N)?V!==B&&V!==+B&&h.push(n("dynamic",y,S.concat(H,O),B,V)):h.push(n("value",y,S.concat(H,O),B))}else h.push(n("array",y,S.concat(H),w[H]));else for(H=0;H<q;H++)N=te?G[H]:G,B=w[H],V=E[H],M.validate(B,N)?V!==B&&V!==+B&&h.push(n("dynamic",y,S.concat(H),B,V)):h.push(n("value",y,S.concat(H),B))}else if(L.items&&!P&&d(w)){var J,Y,W=G[Object.keys(G)[0]],Q=[];for(J=0;J<E.length;J++){var ne=E[J]._index||J;if((Y=S.slice()).push(ne),b(w[ne])&&b(E[J])){Q.push(ne);var re=w[ne],ae=E[J];b(re)&&re.visible!==!1&&ae.visible===!1?h.push(n("invisible",y,Y)):t(re,ae,W,h,y,Y)}}for(J=0;J<w.length;J++)(Y=S.slice()).push(J),b(w[J])?Q.indexOf(J)===-1&&h.push(n("unused",y,Y)):h.push(n("object",y,Y,w[J]))}else!b(w)&&b(E)?h.push(n("object",y,S,w)):s(w)||!s(E)||P||z?f in x?M.validate(w,L)?L.valType==="enumerated"&&(L.coerceNumber&&w!==+E||w!==E)&&h.push(n("dynamic",y,S,w,E)):h.push(n("value",y,S,w)):h.push(n("unused",y,S,w)):h.push(n("array",y,S,w));else h.push(n("schema",y,S))}}return h}ee.exports=function(c,x){c===void 0&&(c=[]),x===void 0&&(x={});var g,h,y=l.get(),v=[],m={_context:M.extendFlat({},T)};d(c)?(m.data=M.extendDeep([],c),g=c):(m.data=[],g=[],v.push(n("array","data"))),b(x)?(m.layout=M.extendDeep({},x),h=x):(m.layout={},h={},arguments.length>1&&v.push(n("object","layout"))),k.supplyDefaults(m);for(var _=m._fullData,f=g.length,S=0;S<f;S++){var w=g[S],E=["data",S];if(b(w)){var L=_[S],C=L.type,P=y.traces[C].attributes;P.type={valType:"enumerated",values:[C]},L.visible===!1&&w.visible!==!1&&v.push(n("invisible",E)),t(w,L,P,v,E);var z=w.transforms,G=L.transforms;if(z){d(z)||v.push(n("array",E,["transforms"])),E.push("transforms");for(var O=0;O<z.length;O++){var H=["transforms",O],N=z[O].type;if(b(z[O])){var B=y.transforms[N]?y.transforms[N].attributes:{};B.type={valType:"enumerated",values:Object.keys(y.transforms)},t(z[O],G[O],B,v,E,H)}else v.push(n("object",E,H))}}}else v.push(n("object",E))}var V=m._fullLayout,q=function(te,K){for(var J=te.layout.layoutAttributes,Y=0;Y<K.length;Y++){var W=K[Y],Q=te.traces[W.type],ne=Q.layoutAttributes;ne&&(W.subplot?M.extendFlat(J[Q.attributes.subplot.dflt],ne):M.extendFlat(J,ne))}return J}(y,_);return t(h,V,q,v,"layout"),v.length===0?void 0:v};var i={object:function(c,x){return(c==="layout"&&x===""?"The layout argument":c[0]==="data"&&x===""?"Trace "+c[1]+" in the data argument":r(c)+"key "+x)+" must be linked to an object container"},array:function(c,x){return(c==="data"?"The data argument":r(c)+"key "+x)+" must be linked to an array container"},schema:function(c,x){return r(c)+"key "+x+" is not part of the schema"},unused:function(c,x,g){var h=b(g)?"container":"key";return r(c)+h+" "+x+" did not get coerced"},dynamic:function(c,x,g,h){return[r(c)+"key",x,"(set to '"+g+"')","got reset to","'"+h+"'","during defaults."].join(" ")},invisible:function(c,x){return(x?r(c)+"item "+x:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,x,g){return[r(c)+"key "+x,"is set to an invalid value ("+g+")"].join(" ")}};function r(c){return d(c)?"In data trace "+c[1]+", ":"In "+c+", "}function n(c,x,g,h,y){var v,m;g=g||"",d(x)?(v=x[0],m=x[1]):(v=x,m=null);var _=function(S){if(!d(S))return String(S);for(var w="",E=0;E<S.length;E++){var L=S[E];typeof L=="number"?w=w.substr(0,w.length-1)+"["+L+"]":w+=L,E<S.length-1&&(w+=".")}return w}(g),f=i[c](x,_,h,y);return M.log(f),{code:c,container:v,trace:m,path:g,astr:_,msg:f}}function o(c,x){var g=p(x),h=g.keyMinusId,y=g.id;return!!(h in c&&c[h]._isSubplotObj&&y)||x in c}function a(c,x){return x in c?c[x]:c[p(x).keyMinusId]}var u=M.counterRegex("([a-z]+)");function p(c){var x=c.match(u);return{keyMinusId:x&&x[1],id:x&&x[2]}}},85594:function(ee){ee.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(ee,D,e){var M=e(71828),k=e(44467);ee.exports=function(l,T,b){var d,s,t=b.name,i=b.inclusionAttr||"visible",r=T[t],n=M.isArrayOrTypedArray(l[t])?l[t]:[],o=T[t]=[],a=k.arrayTemplater(T,t,i);for(d=0;d<n.length;d++){var u=n[d];M.isPlainObject(u)?s=a.newItem(u):(s=a.newItem({}))[i]=!1,s._index=d,s[i]!==!1&&b.handleItemDefaults(u,s,T,b),o.push(s)}var p=a.defaultItems();for(d=0;d<p.length;d++)(s=p[d])._index=o.length,b.handleItemDefaults({},s,T,b,{}),o.push(s);if(M.isArrayOrTypedArray(r)){var c=Math.min(r.length,o.length);for(d=0;d<c;d++)M.relinkPrivateKeys(o[d],r[d])}return o}},9012:function(ee,D,e){var M=e(41940),k=e(77914);ee.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(ee,D,e){var M=e(92770),k=e(71828),l=k.dateTime2ms,T=k.incrementMonth,b=e(50606).ONEAVGMONTH;ee.exports=function(d,s,t,i){if(s.type!=="date")return{vals:i};var r=d[t+"periodalignment"];if(!r)return{vals:i};var n,o=d[t+"period"];if(M(o)){if((o=+o)<=0)return{vals:i}}else if(typeof o=="string"&&o.charAt(0)==="M"){var a=+o.substring(1);if(!(a>0&&Math.round(a)===a))return{vals:i};n=a}for(var u=s.calendar,p=r==="start",c=r==="end",x=d[t+"period0"],g=l(x,u)||0,h=[],y=[],v=[],m=i.length,_=0;_<m;_++){var f,S,w,E=i[_];if(n){for(f=Math.round((E-g)/(n*b)),w=T(g,n*f,u);w>E;)w=T(w,-n,u);for(;w<=E;)w=T(w,n,u);S=T(w,-n,u)}else{for(w=g+(f=Math.round((E-g)/o))*o;w>E;)w-=o;for(;w<=E;)w+=o;S=w-o}h[_]=p?S:c?w:(S+w)/2,y[_]=S,v[_]=w}return{vals:h,starts:y,ends:v}}},89502:function(ee){ee.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(ee,D,e){var M=e(39898),k=e(92770),l=e(71828),T=e(50606).FP_SAFE,b=e(73972),d=e(91424),s=e(41675),t=s.getFromId,i=s.isLinked;function r(_,f){var S,w,E=[],L=_._fullLayout,C=o(L,f,0),P=o(L,f,1),z=u(_,f),G=z.min,O=z.max;if(G.length===0||O.length===0)return l.simpleMap(f.range,f.r2l);var H=G[0].val,N=O[0].val;for(S=1;S<G.length&&H===N;S++)H=Math.min(H,G[S].val);for(S=1;S<O.length&&H===N;S++)N=Math.max(N,O[S].val);var B=f.autorange,V=B==="reversed"||B==="min reversed"||B==="max reversed";if(!V&&f.range){var q=l.simpleMap(f.range,f.r2l);V=q[1]<q[0]}f.autorange==="reversed"&&(f.autorange=!0);var te,K,J,Y,W,Q,ne=f.rangemode,re=ne==="tozero",ae=ne==="nonnegative",ue=f._length,pe=ue/10,ge=0;for(S=0;S<G.length;S++)for(te=G[S],w=0;w<O.length;w++)(Q=(K=O[w]).val-te.val-n(f,te.val,K.val))>0&&((W=ue-C(te)-P(K))>pe?Q/W>ge&&(J=te,Y=K,ge=Q/W):Q/ue>ge&&(J={val:te.val,nopad:1},Y={val:K.val,nopad:1},ge=Q/ue));if(H===N){var _e=H-1,me=H+1;if(re)if(H===0)E=[0,1];else{var ve=(H>0?O:G).reduce(function(Me,Te){return Math.max(Me,P(Te))},0),Oe=H/(1-Math.min(.5,ve/ue));E=H>0?[0,Oe]:[Oe,0]}else E=ae?[Math.max(0,_e),Math.max(1,me)]:[_e,me]}else re?(J.val>=0&&(J={val:0,nopad:1}),Y.val<=0&&(Y={val:0,nopad:1})):ae&&(J.val-ge*C(J)<0&&(J={val:0,nopad:1}),Y.val<=0&&(Y={val:1,nopad:1})),ge=(Y.val-J.val-n(f,te.val,K.val))/(ue-C(J)-P(Y)),E=[J.val-ge*C(J),Y.val+ge*P(Y)];return E=m(E,f),f.limitRange&&f.limitRange(),V&&E.reverse(),l.simpleMap(E,f.l2r||Number)}function n(_,f,S){var w=0;if(_.rangebreaks)for(var E=_.locateBreaks(f,S),L=0;L<E.length;L++){var C=E[L];w+=C.max-C.min}return w}function o(_,f,S){var w=.05*f._length,E=f._anchorAxis||{};if((f.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var L=f.isReversed();if(!L){var C=l.simpleMap(f.range,f.r2l);L=C[1]<C[0]}L&&(S=!S)}var P=0;return i(_,f._id)||(P=function(z,G,O){var H=0,N=G._id.charAt(0)==="x";for(var B in z._plots){var V=z._plots[B];if(G._id===V.xaxis._id||G._id===V.yaxis._id){var q=(N?V.yaxis:V.xaxis)||{};if((q.ticklabelposition||"").indexOf("inside")!==-1&&(!O&&(q.side==="left"||q.side==="bottom")||O&&(q.side==="top"||q.side==="right"))){if(q._vals){var te=l.deg2rad(q._tickAngles[q._id+"tick"]||0),K=Math.abs(Math.cos(te)),J=Math.abs(Math.sin(te));if(!q._vals[0].bb){var Y=q._id+"tick";q._selections[Y].each(function(ae){var ue=M.select(this);ue.select(".text-math-group").empty()&&(ae.bb=d.bBox(ue.node()))})}for(var W=0;W<q._vals.length;W++){var Q=q._vals[W].bb;if(Q){var ne=2*a+Q.width,re=2*a+Q.height;H=Math.max(H,N?Math.max(ne*K,re*J):Math.max(re*K,ne*J))}}}q.ticks==="inside"&&q.ticklabelposition==="inside"&&(H+=q.ticklen||0)}}}return H}(_,f,S)),w=Math.max(P,w),f.constrain==="domain"&&f._inputDomain&&(w*=(f._inputDomain[1]-f._inputDomain[0])/(f.domain[1]-f.domain[0])),function(z){return z.nopad?0:z.pad+(z.extrapad?w:P)}}ee.exports={applyAutorangeOptions:m,getAutoRange:r,makePadFn:o,doAutoRange:function(_,f,S){if(f.setScale(),f.autorange){f.range=S?S.slice():r(_,f),f._r=f.range.slice(),f._rl=l.simpleMap(f._r,f.r2l);var w=f._input,E={};E[f._attr+".range"]=f.range,E[f._attr+".autorange"]=f.autorange,b.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,E),w.range=f.range.slice(),w.autorange=f.autorange}var L=f._anchorAxis;if(L&&L.rangeslider){var C=L.rangeslider[f._name];C&&C.rangemode==="auto"&&(C.range=r(_,f)),L._input.rangeslider[f._name]=l.extendFlat({},C)}},findExtremes:function(_,f,S){S||(S={}),_._m||_.setScale();var w,E,L,C,P,z,G,O,H,N=[],B=[],V=f.length,q=S.padded||!1,te=S.tozero&&(_.type==="linear"||_.type==="-"),K=_.type==="log",J=!1,Y=S.vpadLinearized||!1;function W(_e){if(Array.isArray(_e))return J=!0,function(ve){return Math.max(Number(_e[ve]||0),0)};var me=Math.max(Number(_e||0),0);return function(){return me}}var Q=W((_._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),ne=W((_._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),re=W(S.vpadplus||S.vpad),ae=W(S.vpadminus||S.vpad);if(!J){if(O=1/0,H=-1/0,K)for(w=0;w<V;w++)(E=f[w])<O&&E>0&&(O=E),E>H&&E<T&&(H=E);else for(w=0;w<V;w++)(E=f[w])<O&&E>-T&&(O=E),E>H&&E<T&&(H=E);f=[O,H],V=2}var ue={tozero:te,extrapad:q};function pe(_e){L=f[_e],k(L)&&(z=Q(_e),G=ne(_e),Y?(C=_.c2l(L)-ae(_e),P=_.c2l(L)+re(_e)):(O=L-ae(_e),H=L+re(_e),K&&O<H/10&&(O=H/10),C=_.c2l(O),P=_.c2l(H)),te&&(C=Math.min(0,C),P=Math.max(0,P)),g(C)&&p(N,C,G,ue),g(P)&&c(B,P,z,ue))}var ge=Math.min(6,V);for(w=0;w<ge;w++)pe(w);for(w=V-1;w>=ge;w--)pe(w);return{min:N,max:B,opts:S}},concatExtremes:u};var a=3;function u(_,f,S){var w,E,L,C=f._id,P=_._fullData,z=_._fullLayout,G=[],O=[];function H(te,K){for(w=0;w<K.length;w++){var J=te[K[w]],Y=(J._extremes||{})[C];if(J.visible===!0&&Y){for(E=0;E<Y.min.length;E++)L=Y.min[E],p(G,L.val,L.pad,{extrapad:L.extrapad});for(E=0;E<Y.max.length;E++)L=Y.max[E],c(O,L.val,L.pad,{extrapad:L.extrapad})}}}if(H(P,f._traceIndices),H(z.annotations||[],f._annIndices||[]),H(z.shapes||[],f._shapeIndices||[]),f._matchGroup&&!S){for(var N in f._matchGroup)if(N!==f._id){var B=t(_,N),V=u(_,B,!0),q=f._length/B._length;for(E=0;E<V.min.length;E++)L=V.min[E],p(G,L.val,L.pad*q,{extrapad:L.extrapad});for(E=0;E<V.max.length;E++)L=V.max[E],c(O,L.val,L.pad*q,{extrapad:L.extrapad})}}return{min:G,max:O}}function p(_,f,S,w){x(_,f,S,w,h)}function c(_,f,S,w){x(_,f,S,w,y)}function x(_,f,S,w,E){for(var L=w.tozero,C=w.extrapad,P=!0,z=0;z<_.length&&P;z++){var G=_[z];if(E(G.val,f)&&G.pad>=S&&(G.extrapad||!C)){P=!1;break}E(f,G.val)&&G.pad<=S&&(C||!G.extrapad)&&(_.splice(z,1),z--)}if(P){var O=L&&f===0;_.push({val:f,pad:O?0:S,extrapad:!O&&C})}}function g(_){return k(_)&&Math.abs(_)<T}function h(_,f){return _<=f}function y(_,f){return _>=f}function v(_,f,S){return f===void 0||S===void 0||(f=_.d2l(f))<_.d2l(S)}function m(_,f){if(!f||!f.autorangeoptions)return _;var S=_[0],w=_[1],E=f.autorangeoptions.include;if(E!==void 0){var L=f.d2l(S),C=f.d2l(w);l.isArrayOrTypedArray(E)||(E=[E]);for(var P=0;P<E.length;P++){var z=f.d2l(E[P]);L>=z&&(L=z,S=z),C<=z&&(C=z,w=z)}}return S=function(G,O){var H=O.autorangeoptions;return H&&H.minallowed!==void 0&&v(O,H.minallowed,H.maxallowed)?H.minallowed:H&&H.clipmin!==void 0&&v(O,H.clipmin,H.clipmax)?Math.max(G,O.d2l(H.clipmin)):G}(S,f),w=function(G,O){var H=O.autorangeoptions;return H&&H.maxallowed!==void 0&&v(O,H.minallowed,H.maxallowed)?H.maxallowed:H&&H.clipmax!==void 0&&v(O,H.clipmin,H.clipmax)?Math.min(G,O.d2l(H.clipmax)):G}(w,f),[S,w]}},23074:function(ee){ee.exports=function(D,e,M){var k,l;if(M){var T=e==="reversed"||e==="min reversed"||e==="max reversed";k=M[T?1:0],l=M[T?0:1]}var b=D("autorangeoptions.minallowed",l===null?k:void 0),d=D("autorangeoptions.maxallowed",k===null?l:void 0);b===void 0&&D("autorangeoptions.clipmin"),d===void 0&&D("autorangeoptions.clipmax"),D("autorangeoptions.include")}},89298:function(ee,D,e){var M=e(39898),k=e(92770),l=e(74875),T=e(73972),b=e(71828),d=b.strTranslate,s=e(63893),t=e(92998),i=e(7901),r=e(91424),n=e(13838),o=e(66287),a=e(50606),u=a.ONEMAXYEAR,p=a.ONEAVGYEAR,c=a.ONEMINYEAR,x=a.ONEMAXQUARTER,g=a.ONEAVGQUARTER,h=a.ONEMINQUARTER,y=a.ONEMAXMONTH,v=a.ONEAVGMONTH,m=a.ONEMINMONTH,_=a.ONEWEEK,f=a.ONEDAY,S=f/2,w=a.ONEHOUR,E=a.ONEMIN,L=a.ONESEC,C=a.MINUS_SIGN,P=a.BADNUM,z={K:"zeroline"},G={K:"gridline",L:"path"},O={K:"minor-gridline",L:"path"},H={K:"tick",L:"path"},N={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},V=e(18783),q=V.MID_SHIFT,te=V.CAP_SHIFT,K=V.LINE_SPACING,J=V.OPPOSITE_SIDE,Y=ee.exports={};Y.setConvert=e(21994);var W=e(4322),Q=e(41675),ne=Q.idSort,re=Q.isLinked;Y.id2name=Q.id2name,Y.name2id=Q.name2id,Y.cleanId=Q.cleanId,Y.list=Q.list,Y.listIds=Q.listIds,Y.getFromId=Q.getFromId,Y.getFromTrace=Q.getFromTrace;var ae=e(71739);Y.getAutoRange=ae.getAutoRange,Y.findExtremes=ae.findExtremes;var ue=1e-4;function pe(De){var Be=(De[1]-De[0])*ue;return[De[0]-Be,De[1]+Be]}Y.coerceRef=function(De,Be,nt,tt,dt,ht){var gt=tt.charAt(tt.length-1),ut=nt._fullLayout._subplots[gt+"axis"],wt=tt+"ref",ct={};return dt||(dt=ut[0]||(typeof ht=="string"?ht:ht[0])),ht||(ht=dt),ut=ut.concat(ut.map(function(ft){return ft+" domain"})),ct[wt]={valType:"enumerated",values:ut.concat(ht?typeof ht=="string"?[ht]:ht:[]),dflt:dt},b.coerce(De,Be,ct,wt)},Y.getRefType=function(De){return De===void 0?De:De==="paper"?"paper":De==="pixel"?"pixel":/( domain)$/.test(De)?"domain":"range"},Y.coercePosition=function(De,Be,nt,tt,dt,ht){var gt,ut;if(Y.getRefType(tt)!=="range")gt=b.ensureNumber,ut=nt(dt,ht);else{var wt=Y.getFromId(Be,tt);ut=nt(dt,ht=wt.fraction2r(ht)),gt=wt.cleanPos}De[dt]=gt(ut)},Y.cleanPosition=function(De,Be,nt){return(nt==="paper"||nt==="pixel"?b.ensureNumber:Y.getFromId(Be,nt).cleanPos)(De)},Y.redrawComponents=function(De,Be){Be=Be||Y.listIds(De);var nt=De._fullLayout;function tt(dt,ht,gt,ut){for(var wt=T.getComponentMethod(dt,ht),ct={},ft=0;ft<Be.length;ft++)for(var bt=nt[Y.id2name(Be[ft])][gt],It=0;It<bt.length;It++){var Dt=bt[It];if(!ct[Dt]&&(wt(De,Dt),ct[Dt]=1,ut))return}}tt("annotations","drawOne","_annIndices"),tt("shapes","drawOne","_shapeIndices"),tt("images","draw","_imgIndices",!0),tt("selections","drawOne","_selectionIndices")};var ge=Y.getDataConversions=function(De,Be,nt,tt){var dt,ht=nt==="x"||nt==="y"||nt==="z"?nt:tt;if(Array.isArray(ht)){if(dt={type:W(tt,void 0,{autotypenumbers:De._fullLayout.autotypenumbers}),_categories:[]},Y.setConvert(dt),dt.type==="category")for(var gt=0;gt<tt.length;gt++)dt.d2c(tt[gt])}else dt=Y.getFromTrace(De,Be,ht);return dt?{d2c:dt.d2c,c2d:dt.c2d}:ht==="ids"?{d2c:me,c2d:me}:{d2c:_e,c2d:_e}};function _e(De){return+De}function me(De){return String(De)}function ve(De,Be){return Math.abs((De/Be+.5)%1-.5)<.001}function Oe(De,Be){return Math.abs(De/Be-1)<.001}function Me(De){return+De.substring(1)}function Te(De,Be){return De.rangebreaks&&(Be=Be.filter(function(nt){return De.maskBreaks(nt.x)!==P})),Be}function se(De){var Be=De._mainAxis,nt=[];if(Be._vals){for(var tt=0;tt<Be._vals.length;tt++)if(!Be._vals[tt].noTick){var dt=Be.l2p(Be._vals[tt].x),ht=De.p2l(dt),gt=Y.tickText(De,ht);Be._vals[tt].minor&&(gt.minor=!0,gt.text=""),nt.push(gt)}}return Te(De,nt)}function oe(De){var Be=pe(b.simpleMap(De.range,De.r2l)),nt=Math.min(Be[0],Be[1]),tt=Math.max(Be[0],Be[1]),dt=De.type==="category"?De.d2l_noadd:De.d2l;De.type==="log"&&String(De.dtick).charAt(0)!=="L"&&(De.dtick="L"+Math.pow(10,Math.floor(Math.min(De.range[0],De.range[1]))-1));for(var ht=[],gt=0;gt<=1;gt++)if(!gt||De.minor){var ut=gt?De.minor.tickvals:De.tickvals,wt=gt?[]:De.ticktext;if(ut){Array.isArray(wt)||(wt=[]);for(var ct=0;ct<ut.length;ct++){var ft=dt(ut[ct]);if(ft>nt&&ft<tt){var bt=wt[ct]===void 0?Y.tickText(De,ft):Ce(De,ft,String(wt[ct]));gt&&(bt.minor=!0,bt.text=""),ht.push(bt)}}}}return Te(De,ht)}Y.getDataToCoordFunc=function(De,Be,nt,tt){return ge(De,Be,nt,tt).d2c},Y.counterLetter=function(De){var Be=De.charAt(0);return Be==="x"?"y":Be==="y"?"x":void 0},Y.minDtick=function(De,Be,nt,tt){["log","category","multicategory"].indexOf(De.type)===-1&&tt?De._minDtick===void 0?(De._minDtick=Be,De._forceTick0=nt):De._minDtick&&((De._minDtick/Be+1e-6)%1<2e-6&&((nt-De._forceTick0)/Be%1+1.000001)%1<2e-6?(De._minDtick=Be,De._forceTick0=nt):((Be/De._minDtick+1e-6)%1>2e-6||((nt-De._forceTick0)/De._minDtick%1+1.000001)%1>2e-6)&&(De._minDtick=0)):De._minDtick=0},Y.saveRangeInitial=function(De,Be){for(var nt=Y.list(De,"",!0),tt=!1,dt=0;dt<nt.length;dt++){var ht=nt[dt],gt=ht._rangeInitial0===void 0&&ht._rangeInitial1===void 0,ut=gt||ht.range[0]!==ht._rangeInitial0||ht.range[1]!==ht._rangeInitial1,wt=ht.autorange;(gt&&wt!==!0||Be&&ut)&&(ht._rangeInitial0=wt==="min"||wt==="max reversed"?void 0:ht.range[0],ht._rangeInitial1=wt==="max"||wt==="min reversed"?void 0:ht.range[1],ht._autorangeInitial=wt,tt=!0)}return tt},Y.saveShowSpikeInitial=function(De,Be){for(var nt=Y.list(De,"",!0),tt=!1,dt="on",ht=0;ht<nt.length;ht++){var gt=nt[ht],ut=gt._showSpikeInitial===void 0,wt=ut||gt.showspikes!==gt._showspikes;(ut||Be&&wt)&&(gt._showSpikeInitial=gt.showspikes,tt=!0),dt!=="on"||gt.showspikes||(dt="off")}return De._fullLayout._cartesianSpikesEnabled=dt,tt},Y.autoBin=function(De,Be,nt,tt,dt,ht){var gt,ut=b.aggNums(Math.min,null,De),wt=b.aggNums(Math.max,null,De);if(Be.type==="category"||Be.type==="multicategory")return{start:ut-.5,end:wt+.5,size:Math.max(1,Math.round(ht)||1),_dataSpan:wt-ut};if(dt||(dt=Be.calendar),gt=Be.type==="log"?{type:"linear",range:[ut,wt]}:{type:Be.type,range:b.simpleMap([ut,wt],Be.c2r,0,dt),calendar:dt},Y.setConvert(gt),ht=ht&&o.dtick(ht,gt.type))gt.dtick=ht,gt.tick0=o.tick0(void 0,gt.type,dt);else{var ct;if(nt)ct=(wt-ut)/nt;else{var ft=b.distinctVals(De),bt=Math.pow(10,Math.floor(Math.log(ft.minDiff)/Math.LN10)),It=bt*b.roundUp(ft.minDiff/bt,[.9,1.9,4.9,9.9],!0);ct=Math.max(It,2*b.stdev(De)/Math.pow(De.length,tt?.25:.4)),k(ct)||(ct=1)}Y.autoTicks(gt,ct)}var Dt,Nt=gt.dtick,Qt=Y.tickIncrement(Y.tickFirst(gt),Nt,"reverse",dt);if(typeof Nt=="number")Qt=function(jt,Ut,Xt,gn,Mn){var cn=0,qt=0,nn=0,Kt=0;function sn(Sn){return(1+100*(Sn-jt)/Xt.dtick)%100<2}for(var hn=0;hn<Ut.length;hn++)Ut[hn]%1==0?nn++:k(Ut[hn])||Kt++,sn(Ut[hn])&&cn++,sn(Ut[hn]+Xt.dtick/2)&&qt++;var bn=Ut.length-Kt;if(nn===bn&&Xt.type!=="date")Xt.dtick<1?jt=gn-.5*Xt.dtick:(jt-=.5)+Xt.dtick<gn&&(jt+=Xt.dtick);else if(qt<.1*bn&&(cn>.3*bn||sn(gn)||sn(Mn))){var yn=Xt.dtick/2;jt+=jt+yn<gn?yn:-yn}return jt}(Qt,De,gt,ut,wt),Dt=Qt+(1+Math.floor((wt-Qt)/Nt))*Nt;else for(gt.dtick.charAt(0)==="M"&&(Qt=function(jt,Ut,Xt,gn,Mn){var cn=b.findExactDates(Ut,Mn);if(cn.exactDays>.8){var qt=Number(Xt.substr(1));cn.exactYears>.8&&qt%12==0?jt=Y.tickIncrement(jt,"M6","reverse")+1.5*f:cn.exactMonths>.8?jt=Y.tickIncrement(jt,"M1","reverse")+15.5*f:jt-=S;var nn=Y.tickIncrement(jt,Xt);if(nn<=gn)return nn}return jt}(Qt,De,Nt,ut,dt)),Dt=Qt;Dt<=wt;)Dt=Y.tickIncrement(Dt,Nt,!1,dt);return{start:Be.c2r(Qt,0,dt),end:Be.c2r(Dt,0,dt),size:Nt,_dataSpan:wt-ut}},Y.prepMinorTicks=function(De,Be,nt){if(!Be.minor.dtick){delete De.dtick;var tt,dt=Be.dtick&&k(Be._tmin);if(dt){var ht=Y.tickIncrement(Be._tmin,Be.dtick,!0);tt=[Be._tmin,.99*ht+.01*Be._tmin]}else{var gt=b.simpleMap(Be.range,Be.r2l);tt=[gt[0],.8*gt[0]+.2*gt[1]]}if(De.range=b.simpleMap(tt,Be.l2r),De._isMinor=!0,Y.prepTicks(De,nt),dt){var ut=k(Be.dtick),wt=k(De.dtick),ct=ut?Be.dtick:+Be.dtick.substring(1),ft=wt?De.dtick:+De.dtick.substring(1);ut&&wt?ve(ct,ft)?ct===2*_&&ft===2*f&&(De.dtick=_):ct===2*_&&ft===3*f?De.dtick=_:ct!==_||(Be._input.minor||{}).nticks?Oe(ct/ft,2.5)?De.dtick=ct/2:De.dtick=ct:De.dtick=f:String(Be.dtick).charAt(0)==="M"?wt?De.dtick="M1":ve(ct,ft)?ct>=12&&ft===2&&(De.dtick="M3"):De.dtick=Be.dtick:String(De.dtick).charAt(0)==="L"?String(Be.dtick).charAt(0)==="L"?ve(ct,ft)||(De.dtick=Oe(ct/ft,2.5)?Be.dtick/2:Be.dtick):De.dtick="D1":De.dtick==="D2"&&+Be.dtick>1&&(De.dtick=1)}De.range=Be.range}Be.minor._tick0Init===void 0&&(De.tick0=Be.tick0)},Y.prepTicks=function(De,Be){var nt=b.simpleMap(De.range,De.r2l,void 0,void 0,Be);if(De.tickmode==="auto"||!De.dtick){var tt,dt=De.nticks;dt||(De.type==="category"||De.type==="multicategory"?(tt=De.tickfont?b.bigFont(De.tickfont.size||12):15,dt=De._length/tt):(tt=De._id.charAt(0)==="y"?40:80,dt=b.constrain(De._length/tt,4,9)+1),De._name==="radialaxis"&&(dt*=2)),De.minor&&De.minor.tickmode!=="array"||De.tickmode==="array"&&(dt*=100),De._roughDTick=Math.abs(nt[1]-nt[0])/dt,Y.autoTicks(De,De._roughDTick),De._minDtick>0&&De.dtick<2*De._minDtick&&(De.dtick=De._minDtick,De.tick0=De.l2r(De._forceTick0))}De.ticklabelmode==="period"&&function(ht){var gt;function ut(){return!(k(ht.dtick)||ht.dtick.charAt(0)!=="M")}var wt=ut(),ct=Y.getTickFormat(ht);if(ct){var ft=ht._dtickInit!==ht.dtick;/%[fLQsSMX]/.test(ct)||(/%[HI]/.test(ct)?(gt=w,ft&&!wt&&ht.dtick<w&&(ht.dtick=w)):/%p/.test(ct)?(gt=S,ft&&!wt&&ht.dtick<S&&(ht.dtick=S)):/%[Aadejuwx]/.test(ct)?(gt=f,ft&&!wt&&ht.dtick<f&&(ht.dtick=f)):/%[UVW]/.test(ct)?(gt=_,ft&&!wt&&ht.dtick<_&&(ht.dtick=_)):/%[Bbm]/.test(ct)?(gt=v,ft&&(wt?Me(ht.dtick)<1:ht.dtick<m)&&(ht.dtick="M1")):/%[q]/.test(ct)?(gt=g,ft&&(wt?Me(ht.dtick)<3:ht.dtick<h)&&(ht.dtick="M3")):/%[Yy]/.test(ct)&&(gt=p,ft&&(wt?Me(ht.dtick)<12:ht.dtick<c)&&(ht.dtick="M12")))}(wt=ut())&&ht.tick0===ht._dowTick0&&(ht.tick0=ht._rawTick0),ht._definedDelta=gt}(De),De.tick0||(De.tick0=De.type==="date"?"2000-01-01":0),De.type==="date"&&De.dtick<.1&&(De.dtick=.1),ye(De)},Y.calcTicks=function(De,Be){for(var nt,tt,dt=De.type,ht=De.calendar,gt=De.ticklabelstep,ut=De.ticklabelmode==="period",wt=b.simpleMap(De.range,De.r2l,void 0,void 0,Be),ct=wt[1]<wt[0],ft=Math.min(wt[0],wt[1]),bt=Math.max(wt[0],wt[1]),It=Math.max(1e3,De._length||0),Dt=[],Nt=[],Qt=[],jt=[],Ut=De.minor&&(De.minor.ticks||De.minor.showgrid),Xt=1;Xt>=(Ut?0:1);Xt--){var gn=!Xt;Xt?(De._dtickInit=De.dtick,De._tick0Init=De.tick0):(De.minor._dtickInit=De.minor.dtick,De.minor._tick0Init=De.minor.tick0);var Mn=Xt?De:b.extendFlat({},De,De.minor);if(gn?Y.prepMinorTicks(Mn,De,Be):Y.prepTicks(Mn,Be),Mn.tickmode!=="array")if(Mn.tickmode!=="sync"){var cn=pe(wt),qt=cn[0],nn=cn[1],Kt=k(Mn.dtick),sn=dt==="log"&&!(Kt||Mn.dtick.charAt(0)==="L"),hn=Y.tickFirst(Mn,Be);if(Xt){if(De._tmin=hn,hn<qt!==ct)break;dt!=="category"&&dt!=="multicategory"||(nn=ct?Math.max(-.5,nn):Math.min(De._categories.length-.5,nn))}var bn,yn,Sn=null,pn=hn;Xt&&(Kt?yn=De.dtick:dt==="date"?typeof De.dtick=="string"&&De.dtick.charAt(0)==="M"&&(yn=v*De.dtick.substring(1)):yn=De._roughDTick,bn=Math.round((De.r2l(pn)-De.r2l(De.tick0))/yn)-1);var Cn=Mn.dtick;for(Mn.rangebreaks&&Mn._tick0Init!==Mn.tick0&&(pn=Ve(pn,De),ct||(pn=Y.tickIncrement(pn,Cn,!ct,ht))),Xt&&ut&&(pn=Y.tickIncrement(pn,Cn,!ct,ht),bn--);ct?pn>=nn:pn<=nn;pn=Y.tickIncrement(pn,Cn,ct,ht)){if(Xt&&bn++,Mn.rangebreaks&&!ct){if(pn<qt)continue;if(Mn.maskBreaks(pn)===P&&Ve(pn,Mn)>=bt)break}if(Qt.length>It||pn===Sn)break;Sn=pn;var Hn={value:pn};Xt?(sn&&pn!==(0|pn)&&(Hn.simpleLabel=!0),gt>1&&bn%gt&&(Hn.skipLabel=!0),Qt.push(Hn)):(Hn.minor=!0,jt.push(Hn))}}else Qt=[],Dt=se(De);else Xt?(Qt=[],Dt=oe(De)):(jt=[],Nt=oe(De))}if(Ut&&!(De.minor.ticks==="inside"&&De.ticks==="outside"||De.minor.ticks==="outside"&&De.ticks==="inside")){for(var Qn=Qt.map(function(At){return At.value}),nr=[],Jn=0;Jn<jt.length;Jn++){var Gn=jt[Jn],lr=Gn.value;if(Qn.indexOf(lr)===-1){for(var Rt=!1,$t=0;!Rt&&$t<Qt.length;$t++)1e7+Qt[$t].value===1e7+lr&&(Rt=!0);Rt||nr.push(Gn)}}jt=nr}if(ut&&function(At,Gt,Jt){for(var mn=0;mn<At.length;mn++){var xn=At[mn].value,An=mn,ln=mn+1;mn<At.length-1?(An=mn,ln=mn+1):mn>0?(An=mn-1,ln=mn):(An=mn,ln=mn);var Yt,Wt=At[An].value,on=At[ln].value,un=Math.abs(on-Wt),En=Jt||un,Pn=0;En>=c?Pn=un>=c&&un<=u?un:p:Jt===g&&En>=h?Pn=un>=h&&un<=x?un:g:En>=m?Pn=un>=m&&un<=y?un:v:Jt===_&&En>=_?Pn=_:En>=f?Pn=f:Jt===S&&En>=S?Pn=S:Jt===w&&En>=w&&(Pn=w),Pn>=un&&(Pn=un,Yt=!0);var Un=xn+Pn;if(Gt.rangebreaks&&Pn>0){for(var Fn=0,Kn=0;Kn<84;Kn++){var qn=(Kn+.5)/84;Gt.maskBreaks(xn*(1-qn)+qn*Un)!==P&&Fn++}(Pn*=Fn/84)||(At[mn].drop=!0),Yt&&un>_&&(Pn=un)}(Pn>0||mn===0)&&(At[mn].periodX=xn+Pn/2)}}(Qt,De,De._definedDelta),De.rangebreaks){var an=De._id.charAt(0)==="y",fn=1;De.tickmode==="auto"&&(fn=De.tickfont?De.tickfont.size:12);var wn=NaN;for(nt=Qt.length-1;nt>-1;nt--)if(Qt[nt].drop)Qt.splice(nt,1);else{Qt[nt].value=Ve(Qt[nt].value,De);var Bn=De.c2p(Qt[nt].value);(an?wn>Bn-fn:wn<Bn+fn)?Qt.splice(ct?nt+1:nt,1):wn=Bn}}Xe(De)&&Math.abs(wt[1]-wt[0])===360&&Qt.pop(),De._tmax=(Qt[Qt.length-1]||{}).value,De._prevDateHead="",De._inCalcTicks=!0;var Ln,In,Wn=function(At){At.text="",De._prevDateHead=tt};for(Qt=Qt.concat(jt),nt=0;nt<Qt.length;nt++){var Vt=Qt[nt].minor,_n=Qt[nt].value;Vt?Nt.push({x:_n,minor:!0}):(tt=De._prevDateHead,Ln=Y.tickText(De,_n,!1,Qt[nt].simpleLabel),(In=Qt[nt].periodX)!==void 0&&(Ln.periodX=In,(In>bt||In<ft)&&(In>bt&&(Ln.periodX=bt),In<ft&&(Ln.periodX=ft),Wn(Ln))),Qt[nt].skipLabel&&Wn(Ln),Dt.push(Ln))}return Dt=Dt.concat(Nt),De._inCalcTicks=!1,ut&&Dt.length&&(Dt[0].noTick=!0),Dt};var he=[2,5,10],Ee=[1,2,3,6,12],ke=[1,2,5,10,15,30],be=[1,2,3,7,14],Ie=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Fe=[-.301,0,.301,.699,1],ce=[15,30,45,90,180];function we(De,Be,nt){return Be*b.roundUp(De/Be,nt)}function ye(De){var Be=De.dtick;if(De._tickexponent=0,k(Be)||typeof Be=="string"||(Be=1),De.type!=="category"&&De.type!=="multicategory"||(De._tickround=null),De.type==="date"){var nt=De.r2l(De.tick0),tt=De.l2r(nt).replace(/(^-|i)/g,""),dt=tt.length;if(String(Be).charAt(0)==="M")dt>10||tt.substr(5)!=="01-01"?De._tickround="d":De._tickround=+Be.substr(1)%12==0?"y":"m";else if(Be>=f&&dt<=10||Be>=15*f)De._tickround="d";else if(Be>=E&&dt<=16||Be>=w)De._tickround="M";else if(Be>=L&&dt<=19||Be>=E)De._tickround="S";else{var ht=De.l2r(nt+Be).replace(/^-/,"").length;De._tickround=Math.max(dt,ht)-20,De._tickround<0&&(De._tickround=4)}}else if(k(Be)||Be.charAt(0)==="L"){var gt=De.range.map(De.r2d||Number);k(Be)||(Be=Number(Be.substr(1))),De._tickround=2-Math.floor(Math.log(Be)/Math.LN10+.01);var ut=Math.max(Math.abs(gt[0]),Math.abs(gt[1])),wt=Math.floor(Math.log(ut)/Math.LN10+.01),ct=De.minexponent===void 0?3:De.minexponent;Math.abs(wt)>ct&&(ze(De.exponentformat)&&!He(wt)?De._tickexponent=3*Math.round((wt-1)/3):De._tickexponent=wt)}else De._tickround=null}function Ce(De,Be,nt){var tt=De.tickfont||{};return{x:Be,dx:0,dy:0,text:nt||"",fontSize:tt.size,font:tt.family,fontColor:tt.color}}Y.autoTicks=function(De,Be,nt){var tt;function dt(bt){return Math.pow(bt,Math.floor(Math.log(Be)/Math.LN10))}if(De.type==="date"){De.tick0=b.dateTick0(De.calendar,0);var ht=2*Be;if(ht>p)Be/=p,tt=dt(10),De.dtick="M"+12*we(Be,tt,he);else if(ht>v)Be/=v,De.dtick="M"+we(Be,1,Ee);else if(ht>f){if(De.dtick=we(Be,f,De._hasDayOfWeekBreaks?[1,2,7,14]:be),!nt){var gt=Y.getTickFormat(De),ut=De.ticklabelmode==="period";ut&&(De._rawTick0=De.tick0),/%[uVW]/.test(gt)?De.tick0=b.dateTick0(De.calendar,2):De.tick0=b.dateTick0(De.calendar,1),ut&&(De._dowTick0=De.tick0)}}else ht>w?De.dtick=we(Be,w,Ee):ht>E?De.dtick=we(Be,E,ke):ht>L?De.dtick=we(Be,L,ke):(tt=dt(10),De.dtick=we(Be,tt,he))}else if(De.type==="log"){De.tick0=0;var wt=b.simpleMap(De.range,De.r2l);if(De._isMinor&&(Be*=1.5),Be>.7)De.dtick=Math.ceil(Be);else if(Math.abs(wt[1]-wt[0])<1){var ct=1.5*Math.abs((wt[1]-wt[0])/Be);Be=Math.abs(Math.pow(10,wt[1])-Math.pow(10,wt[0]))/ct,tt=dt(10),De.dtick="L"+we(Be,tt,he)}else De.dtick=Be>.3?"D2":"D1"}else De.type==="category"||De.type==="multicategory"?(De.tick0=0,De.dtick=Math.ceil(Math.max(Be,1))):Xe(De)?(De.tick0=0,tt=1,De.dtick=we(Be,tt,ce)):(De.tick0=0,tt=dt(10),De.dtick=we(Be,tt,he));if(De.dtick===0&&(De.dtick=1),!k(De.dtick)&&typeof De.dtick!="string"){var ft=De.dtick;throw De.dtick=1,"ax.dtick error: "+String(ft)}},Y.tickIncrement=function(De,Be,nt,tt){var dt=nt?-1:1;if(k(Be))return b.increment(De,dt*Be);var ht=Be.charAt(0),gt=dt*Number(Be.substr(1));if(ht==="M")return b.incrementMonth(De,gt,tt);if(ht==="L")return Math.log(Math.pow(10,De)+gt)/Math.LN10;if(ht==="D"){var ut=Be==="D2"?Fe:Ie,wt=De+.01*dt,ct=b.roundUp(b.mod(wt,1),ut,nt);return Math.floor(wt)+Math.log(M.round(Math.pow(10,ct),1))/Math.LN10}throw"unrecognized dtick "+String(Be)},Y.tickFirst=function(De,Be){var nt=De.r2l||Number,tt=b.simpleMap(De.range,nt,void 0,void 0,Be),dt=tt[1]<tt[0],ht=dt?Math.floor:Math.ceil,gt=pe(tt)[0],ut=De.dtick,wt=nt(De.tick0);if(k(ut)){var ct=ht((gt-wt)/ut)*ut+wt;return De.type!=="category"&&De.type!=="multicategory"||(ct=b.constrain(ct,0,De._categories.length-1)),ct}var ft=ut.charAt(0),bt=Number(ut.substr(1));if(ft==="M"){for(var It,Dt,Nt,Qt=0,jt=wt;Qt<10;){if(((It=Y.tickIncrement(jt,ut,dt,De.calendar))-gt)*(jt-gt)<=0)return dt?Math.min(jt,It):Math.max(jt,It);Dt=(gt-(jt+It)/2)/(It-jt),Nt=ft+(Math.abs(Math.round(Dt))||1)*bt,jt=Y.tickIncrement(jt,Nt,Dt<0?!dt:dt,De.calendar),Qt++}return b.error("tickFirst did not converge",De),jt}if(ft==="L")return Math.log(ht((Math.pow(10,gt)-wt)/bt)*bt+wt)/Math.LN10;if(ft==="D"){var Ut=ut==="D2"?Fe:Ie,Xt=b.roundUp(b.mod(gt,1),Ut,dt);return Math.floor(gt)+Math.log(M.round(Math.pow(10,Xt),1))/Math.LN10}throw"unrecognized dtick "+String(ut)},Y.tickText=function(De,Be,nt,tt){var dt,ht=Ce(De,Be),gt=De.tickmode==="array",ut=nt||gt,wt=De.type,ct=wt==="category"?De.d2l_noadd:De.d2l;if(gt&&Array.isArray(De.ticktext)){var ft=b.simpleMap(De.range,De.r2l),bt=(Math.abs(ft[1]-ft[0])-(De._lBreaks||0))/1e4;for(dt=0;dt<De.ticktext.length&&!(Math.abs(Be-ct(De.tickvals[dt]))<bt);dt++);if(dt<De.ticktext.length)return ht.text=String(De.ticktext[dt]),ht}function It(jt){if(jt===void 0)return!0;if(nt)return jt==="none";var Ut={first:De._tmin,last:De._tmax}[jt];return jt!=="all"&&Be!==Ut}var Dt=nt?"never":De.exponentformat!=="none"&&It(De.showexponent)?"hide":"";if(wt==="date"?function(jt,Ut,Xt,gn){var Mn=jt._tickround,cn=Xt&&jt.hoverformat||Y.getTickFormat(jt);(gn=!cn&&gn)&&(Mn=k(Mn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Mn]);var qt,nn=b.formatDate(Ut.x,cn,Mn,jt._dateFormat,jt.calendar,jt._extraFormat),Kt=nn.indexOf(`
`);if(Kt!==-1&&(qt=nn.substr(Kt+1),nn=nn.substr(0,Kt)),gn&&(qt===void 0||nn!=="00:00:00"&&nn!=="00:00"?nn.length===8&&(nn=nn.replace(/:00$/,"")):(nn=qt,qt="")),qt)if(Xt)Mn==="d"?nn+=", "+qt:nn=qt+(nn?", "+nn:"");else if(jt._inCalcTicks&&jt._prevDateHead===qt){var sn=We(jt),hn=jt._trueSide||jt.side;(!sn&&hn==="top"||sn&&hn==="bottom")&&(nn+="<br> ")}else jt._prevDateHead=qt,nn+="<br>"+qt;Ut.text=nn}(De,ht,nt,ut):wt==="log"?function(jt,Ut,Xt,gn,Mn){var cn=jt.dtick,qt=Ut.x,nn=jt.tickformat,Kt=typeof cn=="string"&&cn.charAt(0);if(Mn==="never"&&(Mn=""),gn&&Kt!=="L"&&(cn="L3",Kt="L"),nn||Kt==="L")Ut.text=Ge(Math.pow(10,qt),jt,Mn,gn);else if(k(cn)||Kt==="D"&&b.mod(qt+.01,1)<.1){var sn=Math.round(qt),hn=Math.abs(sn),bn=jt.exponentformat;bn==="power"||ze(bn)&&He(sn)?(Ut.text=sn===0?1:sn===1?"10":"10<sup>"+(sn>1?"":C)+hn+"</sup>",Ut.fontSize*=1.25):(bn==="e"||bn==="E")&&hn>2?Ut.text="1"+bn+(sn>0?"+":C)+hn:(Ut.text=Ge(Math.pow(10,qt),jt,"","fakehover"),cn==="D1"&&jt._id.charAt(0)==="y"&&(Ut.dy-=Ut.fontSize/6))}else{if(Kt!=="D")throw"unrecognized dtick "+String(cn);Ut.text=String(Math.round(Math.pow(10,b.mod(qt,1)))),Ut.fontSize*=.75}if(jt.dtick==="D1"){var yn=String(Ut.text).charAt(0);yn!=="0"&&yn!=="1"||(jt._id.charAt(0)==="y"?Ut.dx-=Ut.fontSize/4:(Ut.dy+=Ut.fontSize/2,Ut.dx+=(jt.range[1]>jt.range[0]?1:-1)*Ut.fontSize*(qt<0?.5:.25)))}}(De,ht,0,ut,Dt):wt==="category"?function(jt,Ut){var Xt=jt._categories[Math.round(Ut.x)];Xt===void 0&&(Xt=""),Ut.text=String(Xt)}(De,ht):wt==="multicategory"?function(jt,Ut,Xt){var gn=Math.round(Ut.x),Mn=jt._categories[gn]||[],cn=Mn[1]===void 0?"":String(Mn[1]),qt=Mn[0]===void 0?"":String(Mn[0]);Xt?Ut.text=qt+" - "+cn:(Ut.text=cn,Ut.text2=qt)}(De,ht,nt):Xe(De)?function(jt,Ut,Xt,gn,Mn){if(jt.thetaunit!=="radians"||Xt)Ut.text=Ge(Ut.x,jt,Mn,gn);else{var cn=Ut.x/180;if(cn===0)Ut.text="0";else{var qt=function(Kt){function sn(Sn,pn){return Math.abs(Sn-pn)<=1e-6}var hn=function(Sn){for(var pn=1;!sn(Math.round(Sn*pn)/pn,Sn);)pn*=10;return pn}(Kt),bn=Kt*hn,yn=Math.abs(function Sn(pn,Cn){return sn(Cn,0)?pn:Sn(Cn,pn%Cn)}(bn,hn));return[Math.round(bn/yn),Math.round(hn/yn)]}(cn);if(qt[1]>=100)Ut.text=Ge(b.deg2rad(Ut.x),jt,Mn,gn);else{var nn=Ut.x<0;qt[1]===1?qt[0]===1?Ut.text="":Ut.text=qt[0]+"":Ut.text=["<sup>",qt[0],"</sup>","","<sub>",qt[1],"</sub>",""].join(""),nn&&(Ut.text=C+Ut.text)}}}}(De,ht,nt,ut,Dt):function(jt,Ut,Xt,gn,Mn){Mn==="never"?Mn="":jt.showexponent==="all"&&Math.abs(Ut.x/jt.dtick)<1e-6&&(Mn="hide"),Ut.text=Ge(Ut.x,jt,Mn,gn)}(De,ht,0,ut,Dt),tt||(De.tickprefix&&!It(De.showtickprefix)&&(ht.text=De.tickprefix+ht.text),De.ticksuffix&&!It(De.showticksuffix)&&(ht.text+=De.ticksuffix)),De.labelalias&&De.labelalias.hasOwnProperty(ht.text)){var Nt=De.labelalias[ht.text];typeof Nt=="string"&&(ht.text=Nt)}if(De.tickson==="boundaries"||De.showdividers){var Qt=function(jt){var Ut=De.l2p(jt);return Ut>=0&&Ut<=De._length?jt:null};ht.xbnd=[Qt(ht.x-.5),Qt(ht.x+De.dtick-.5)]}return ht},Y.hoverLabelText=function(De,Be,nt){nt&&(De=b.extendFlat({},De,{hoverformat:nt}));var tt=Array.isArray(Be)?Be[0]:Be,dt=Array.isArray(Be)?Be[1]:void 0;if(dt!==void 0&&dt!==tt)return Y.hoverLabelText(De,tt,nt)+" - "+Y.hoverLabelText(De,dt,nt);var ht=De.type==="log"&&tt<=0,gt=Y.tickText(De,De.c2l(ht?-tt:tt),"hover").text;return ht?tt===0?"0":C+gt:gt};var Re=["f","p","n","","m","","k","M","G","T"];function ze(De){return De==="SI"||De==="B"}function He(De){return De>14||De<-15}function Ge(De,Be,nt,tt){var dt=De<0,ht=Be._tickround,gt=nt||Be.exponentformat||"B",ut=Be._tickexponent,wt=Y.getTickFormat(Be),ct=Be.separatethousands;if(tt){var ft={exponentformat:gt,minexponent:Be.minexponent,dtick:Be.showexponent==="none"?Be.dtick:k(De)&&Math.abs(De)||1,range:Be.showexponent==="none"?Be.range.map(Be.r2d):[0,De||1]};ye(ft),ht=(Number(ft._tickround)||0)+4,ut=ft._tickexponent,Be.hoverformat&&(wt=Be.hoverformat)}if(wt)return Be._numFormat(wt)(De).replace(/-/g,C);var bt,It=Math.pow(10,-ht)/2;if(gt==="none"&&(ut=0),(De=Math.abs(De))<It)De="0",dt=!1;else{if(De+=It,ut&&(De*=Math.pow(10,-ut),ht+=ut),ht===0)De=String(Math.floor(De));else if(ht<0){De=(De=String(Math.round(De))).substr(0,De.length+ht);for(var Dt=ht;Dt<0;Dt++)De+="0"}else{var Nt=(De=String(De)).indexOf(".")+1;Nt&&(De=De.substr(0,Nt+ht).replace(/\.?0+$/,""))}De=b.numSeparate(De,Be._separators,ct)}return ut&&gt!=="hide"&&(ze(gt)&&He(ut)&&(gt="power"),bt=ut<0?C+-ut:gt!=="power"?"+"+ut:String(ut),gt==="e"||gt==="E"?De+=gt+bt:gt==="power"?De+="10<sup>"+bt+"</sup>":gt==="B"&&ut===9?De+="B":ze(gt)&&(De+=Re[ut/3+5])),dt?C+De:De}function Je(De,Be){if(De){var nt=Object.keys(B).reduce(function(tt,dt){return Be.indexOf(dt)!==-1&&B[dt].forEach(function(ht){tt[ht]=1}),tt},{});Object.keys(De).forEach(function(tt){nt[tt]||(tt.length===1?De[tt]=0:delete De[tt])})}}function ot(De,Be){for(var nt=[],tt={},dt=0;dt<Be.length;dt++){var ht=Be[dt];tt[ht.text2]?tt[ht.text2].push(ht.x):tt[ht.text2]=[ht.x]}for(var gt in tt)nt.push(Ce(De,b.interp(tt[gt],.5),gt));return nt}function Qe(De){return De.periodX!==void 0?De.periodX:De.x}function vt(De){return[De.text,De.x,De.axInfo,De.font,De.fontSize,De.fontColor].join("_")}function xt(De){var Be=De.title.font.size,nt=(De.title.text.match(s.BR_TAG_ALL)||[]).length;return De.title.hasOwnProperty("standoff")?nt?Be*(te+nt*K):Be*te:nt?Be*(nt+1)*K:Be}function mt(De,Be){var nt=De.l2p(Be);return nt>1&&nt<De._length-1}function rt(De){var Be=M.select(De),nt=Be.select(".text-math-group");return nt.empty()?Be.select("text"):nt}function it(De){return De._id+".automargin"}function Tt(De){return it(De)+".mirror"}function Mt(De){return De._id+".rangeslider"}function Pt(De,Be){for(var nt=0;nt<Be.length;nt++)De.indexOf(Be[nt])===-1&&De.push(Be[nt])}function kt(De,Be,nt){var tt,dt,ht=[],gt=[],ut=De.layout;for(tt=0;tt<Be.length;tt++)ht.push(Y.getFromId(De,Be[tt]));for(tt=0;tt<nt.length;tt++)gt.push(Y.getFromId(De,nt[tt]));var wt=Object.keys(n),ct=["anchor","domain","overlaying","position","side","tickangle","editType"],ft=["linear","log"];for(tt=0;tt<wt.length;tt++){var bt=wt[tt],It=ht[0][bt],Dt=gt[0][bt],Nt=!0,Qt=!1,jt=!1;if(bt.charAt(0)!=="_"&&typeof It!="function"&&ct.indexOf(bt)===-1){for(dt=1;dt<ht.length&&Nt;dt++){var Ut=ht[dt][bt];bt==="type"&&ft.indexOf(It)!==-1&&ft.indexOf(Ut)!==-1&&It!==Ut?Qt=!0:Ut!==It&&(Nt=!1)}for(dt=1;dt<gt.length&&Nt;dt++){var Xt=gt[dt][bt];bt==="type"&&ft.indexOf(Dt)!==-1&&ft.indexOf(Xt)!==-1&&Dt!==Xt?jt=!0:gt[dt][bt]!==Dt&&(Nt=!1)}Nt&&(Qt&&(ut[ht[0]._name].type="linear"),jt&&(ut[gt[0]._name].type="linear"),Ze(ut,bt,ht,gt,De._fullLayout._dfltTitle))}}for(tt=0;tt<De._fullLayout.annotations.length;tt++){var gn=De._fullLayout.annotations[tt];Be.indexOf(gn.xref)!==-1&&nt.indexOf(gn.yref)!==-1&&b.swapAttrs(ut.annotations[tt],["?"])}}function Ze(De,Be,nt,tt,dt){var ht,gt=b.nestedProperty,ut=gt(De[nt[0]._name],Be).get(),wt=gt(De[tt[0]._name],Be).get();for(Be==="title"&&(ut&&ut.text===dt.x&&(ut.text=dt.y),wt&&wt.text===dt.y&&(wt.text=dt.x)),ht=0;ht<nt.length;ht++)gt(De,nt[ht]._name+"."+Be).set(wt);for(ht=0;ht<tt.length;ht++)gt(De,tt[ht]._name+"."+Be).set(ut)}function Xe(De){return De._id==="angularaxis"}function Ve(De,Be){for(var nt=Be._rangebreaks.length,tt=0;tt<nt;tt++){var dt=Be._rangebreaks[tt];if(De>=dt.min&&De<dt.max)return dt.max}return De}function We(De){return(De.ticklabelposition||"").indexOf("inside")!==-1}function at(De,Be){We(De._anchorAxis||{})&&De._hideCounterAxisInsideTickLabels&&De._hideCounterAxisInsideTickLabels(Be)}function et(De,Be,nt,tt){var dt,ht=De.anchor==="free"||De.overlaying!==void 0&&De.overlaying!==!1?De.overlaying:De._id;dt=tt?De.side==="right"?Be:-Be:Be,ht in nt||(nt[ht]={}),De.side in nt[ht]||(nt[ht][De.side]=0),nt[ht][De.side]+=dt}Y.getTickFormat=function(De){var Be,nt,tt,dt,ht,gt,ut,wt;function ct(It){return typeof It!="string"?It:Number(It.replace("M",""))*v}function ft(It,Dt){var Nt=["L","D"];if(typeof It==typeof Dt){if(typeof It=="number")return It-Dt;var Qt=Nt.indexOf(It.charAt(0)),jt=Nt.indexOf(Dt.charAt(0));return Qt===jt?Number(It.replace(/(L|D)/g,""))-Number(Dt.replace(/(L|D)/g,"")):Qt-jt}return typeof It=="number"?1:-1}function bt(It,Dt){var Nt=Dt[0]===null,Qt=Dt[1]===null,jt=ft(It,Dt[0])>=0,Ut=ft(It,Dt[1])<=0;return(Nt||jt)&&(Qt||Ut)}if(De.tickformatstops&&De.tickformatstops.length>0)switch(De.type){case"date":case"linear":for(Be=0;Be<De.tickformatstops.length;Be++)if((tt=De.tickformatstops[Be]).enabled&&(dt=De.dtick,ht=tt.dtickrange,gt=void 0,ut=void 0,wt=void 0,gt=ct||function(It){return It},ut=ht[0],wt=ht[1],(!ut&&typeof ut!="number"||gt(ut)<=gt(dt))&&(!wt&&typeof wt!="number"||gt(wt)>=gt(dt)))){nt=tt;break}break;case"log":for(Be=0;Be<De.tickformatstops.length;Be++)if((tt=De.tickformatstops[Be]).enabled&&bt(De.dtick,tt.dtickrange)){nt=tt;break}}return nt?nt.value:De.tickformat},Y.getSubplots=function(De,Be){var nt=De._fullLayout._subplots,tt=nt.cartesian.concat(nt.gl2d||[]),dt=Be?Y.findSubplotsWithAxis(tt,Be):tt;return dt.sort(function(ht,gt){var ut=ht.substr(1).split("y"),wt=gt.substr(1).split("y");return ut[0]===wt[0]?+ut[1]-+wt[1]:+ut[0]-+wt[0]}),dt},Y.findSubplotsWithAxis=function(De,Be){for(var nt=new RegExp(Be._id.charAt(0)==="x"?"^"+Be._id+"y":Be._id+"$"),tt=[],dt=0;dt<De.length;dt++){var ht=De[dt];nt.test(ht)&&tt.push(ht)}return tt},Y.makeClipPaths=function(De){var Be=De._fullLayout;if(!Be._hasOnlyLargeSploms){var nt,tt,dt={_offset:0,_length:Be.width,_id:""},ht={_offset:0,_length:Be.height,_id:""},gt=Y.list(De,"x",!0),ut=Y.list(De,"y",!0),wt=[];for(nt=0;nt<gt.length;nt++)for(wt.push({x:gt[nt],y:ht}),tt=0;tt<ut.length;tt++)nt===0&&wt.push({x:dt,y:ut[tt]}),wt.push({x:gt[nt],y:ut[tt]});var ct=Be._clips.selectAll(".axesclip").data(wt,function(ft){return ft.x._id+ft.y._id});ct.enter().append("clipPath").classed("axesclip",!0).attr("id",function(ft){return"clip"+Be._uid+ft.x._id+ft.y._id}).append("rect"),ct.exit().remove(),ct.each(function(ft){M.select(this).select("rect").attr({x:ft.x._offset||0,y:ft.y._offset||0,width:ft.x._length||1,height:ft.y._length||1})})}},Y.draw=function(De,Be,nt){var tt=De._fullLayout;Be==="redraw"&&tt._paper.selectAll("g.subplot").each(function(ut){var wt=ut[0],ct=tt._plots[wt];if(ct){var ft=ct.xaxis,bt=ct.yaxis;ct.xaxislayer.selectAll("."+ft._id+"tick").remove(),ct.yaxislayer.selectAll("."+bt._id+"tick").remove(),ct.xaxislayer.selectAll("."+ft._id+"tick2").remove(),ct.yaxislayer.selectAll("."+bt._id+"tick2").remove(),ct.xaxislayer.selectAll("."+ft._id+"divider").remove(),ct.yaxislayer.selectAll("."+bt._id+"divider").remove(),ct.minorGridlayer&&ct.minorGridlayer.selectAll("path").remove(),ct.gridlayer&&ct.gridlayer.selectAll("path").remove(),ct.zerolinelayer&&ct.zerolinelayer.selectAll("path").remove(),tt._infolayer.select(".g-"+ft._id+"title").remove(),tt._infolayer.select(".g-"+bt._id+"title").remove()}});var dt=Be&&Be!=="redraw"?Be:Y.listIds(De),ht=Y.list(De).filter(function(ut){return ut.autoshift}).map(function(ut){return ut.overlaying});dt.map(function(ut){var wt=Y.getFromId(De,ut);if(wt.tickmode==="sync"&&wt.overlaying){var ct=dt.findIndex(function(ft){return ft===wt.overlaying});ct>=0&&dt.unshift(dt.splice(ct,1).shift())}});var gt={false:{left:0,right:0}};return b.syncOrAsync(dt.map(function(ut){return function(){if(ut){var wt=Y.getFromId(De,ut);nt||(nt={}),nt.axShifts=gt,nt.overlayingShiftedAx=ht;var ct=Y.drawOne(De,wt,nt);return wt._shiftPusher&&et(wt,wt._fullDepth||0,gt,!0),wt._r=wt.range.slice(),wt._rl=b.simpleMap(wt._r,wt.r2l),ct}}}))},Y.drawOne=function(De,Be,nt){var tt,dt,ht,gt=(nt=nt||{}).axShifts||{},ut=nt.overlayingShiftedAx||[];Be.setScale();var wt=De._fullLayout,ct=Be._id,ft=ct.charAt(0),bt=Y.counterLetter(ct),It=wt._plots[Be._mainSubplot];if(It){if(Be._shiftPusher=Be.autoshift||ut.indexOf(Be._id)!==-1||ut.indexOf(Be.overlaying)!==-1,Be._shiftPusher&Be.anchor==="free"){var Dt=Be.linewidth/2||0;Be.ticks==="inside"&&(Dt+=Be.ticklen),et(Be,Dt,gt,!0),et(Be,Be.shift||0,gt,!1)}nt.skipTitle===!0&&Be._shift!==void 0||(Be._shift=function(ln,Yt){return ln.autoshift?Yt[ln.overlaying][ln.side]:ln.shift||0}(Be,gt));var Nt=It[ft+"axislayer"],Qt=Be._mainLinePosition,jt=Qt+=Be._shift,Ut=Be._mainMirrorPosition,Xt=Be._vals=Y.calcTicks(Be),gn=[Be.mirror,jt,Ut].join("_");for(tt=0;tt<Xt.length;tt++)Xt[tt].axInfo=gn;Be._selections={},Be._tickAngles&&(Be._prevTickAngles=Be._tickAngles),Be._tickAngles={},Be._depth=null;var Mn={};if(Be.visible){var cn,qt,nn=Y.makeTransTickFn(Be),Kt=Y.makeTransTickLabelFn(Be),sn=Be.ticks==="inside",hn=Be.ticks==="outside";if(Be.tickson==="boundaries"){var bn=function(ln,Yt){var Wt,on=[],un=function(En,Pn){var Un=En.xbnd[Pn];Un!==null&&on.push(b.extendFlat({},En,{x:Un}))};if(Yt.length){for(Wt=0;Wt<Yt.length;Wt++)un(Yt[Wt],0);un(Yt[Wt-1],1)}return on}(0,Xt);qt=Y.clipEnds(Be,bn),cn=sn?qt:bn}else qt=Y.clipEnds(Be,Xt),cn=sn&&Be.ticklabelmode!=="period"?qt:Xt;var yn,Sn=Be._gridVals=qt,pn=function(ln,Yt){var Wt,on,un=[],En=Yt.length&&Yt[Yt.length-1].x<Yt[0].x,Pn=function(Fn,Kn){var qn=Fn.xbnd[Kn];qn!==null&&un.push(b.extendFlat({},Fn,{x:qn}))};if(ln.showdividers&&Yt.length){for(Wt=0;Wt<Yt.length;Wt++){var Un=Yt[Wt];Un.text2!==on&&Pn(Un,En?1:0),on=Un.text2}Pn(Yt[Wt-1],En?0:1)}return un}(Be,Xt);if(!wt._hasOnlyLargeSploms){var Cn=Be._subplotsWith,Hn={};for(tt=0;tt<Cn.length;tt++){dt=Cn[tt];var Qn=(ht=wt._plots[dt])[bt+"axis"],nr=Qn._mainAxis._id;if(!Hn[nr]){Hn[nr]=1;var Jn=ft==="x"?"M0,"+Qn._offset+"v"+Qn._length:"M"+Qn._offset+",0h"+Qn._length;Y.drawGrid(De,Be,{vals:Sn,counterAxis:Qn,layer:ht.gridlayer.select("."+ct),minorLayer:ht.minorGridlayer.select("."+ct),path:Jn,transFn:nn}),Y.drawZeroLine(De,Be,{counterAxis:Qn,layer:ht.zerolinelayer,path:Jn,transFn:nn})}}}var Gn=Y.getTickSigns(Be),lr=Y.getTickSigns(Be,"minor");if(Be.ticks||Be.minor&&Be.minor.ticks){var Rt,$t,an,fn,wn=Y.makeTickPath(Be,jt,Gn[2]),Bn=Y.makeTickPath(Be,jt,lr[2],{minor:!0});if(Be._anchorAxis&&Be.mirror&&Be.mirror!==!0?(Rt=Y.makeTickPath(Be,Ut,Gn[3]),$t=Y.makeTickPath(Be,Ut,lr[3],{minor:!0}),an=wn+Rt,fn=Bn+$t):(Rt="",$t="",an=wn,fn=Bn),Be.showdividers&&hn&&Be.tickson==="boundaries"){var Ln={};for(tt=0;tt<pn.length;tt++)Ln[pn[tt].x]=1;yn=function(ln){return Ln[ln.x]?Rt:an}}else yn=function(ln){return ln.minor?fn:an}}if(Y.drawTicks(De,Be,{vals:cn,layer:Nt,path:yn,transFn:nn}),Be.mirror==="allticks"){var In=Object.keys(Be._linepositions||{});for(tt=0;tt<In.length;tt++){dt=In[tt],ht=wt._plots[dt];var Wn=Be._linepositions[dt]||[],Vt=Wn[0],_n=Wn[1],At=Wn[2],Gt=Y.makeTickPath(Be,Vt,At?Gn[0]:lr[0],{minor:At})+Y.makeTickPath(Be,_n,At?Gn[1]:lr[1],{minor:At});Y.drawTicks(De,Be,{vals:cn,layer:ht[ft+"axislayer"],path:Gt,transFn:nn})}}var Jt=[];if(Jt.push(function(){return Y.drawLabels(De,Be,{vals:Xt,layer:Nt,plotinfo:ht,transFn:Kt,labelFns:Y.makeLabelFns(Be,jt)})}),Be.type==="multicategory"){var mn={x:2,y:10}[ft];Jt.push(function(){var ln={x:"height",y:"width"}[ft],Yt=An()[ln]+mn+(Be._tickAngles[ct+"tick"]?Be.tickfont.size*K:0);return Y.drawLabels(De,Be,{vals:ot(Be,Xt),layer:Nt,cls:ct+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:nn,labelFns:Y.makeLabelFns(Be,jt+Yt*Gn[4])})}),Jt.push(function(){return Be._depth=Gn[4]*(An("tick2")[Be.side]-jt),function(ln,Yt,Wt){var on=Yt._id+"divider",un=Wt.vals,En=Wt.layer.selectAll("path."+on).data(un,vt);En.exit().remove(),En.enter().insert("path",":first-child").classed(on,1).classed("crisp",1).call(i.stroke,Yt.dividercolor).style("stroke-width",r.crispRound(ln,Yt.dividerwidth,1)+"px"),En.attr("transform",Wt.transFn).attr("d",Wt.path)}(De,Be,{vals:pn,layer:Nt,path:Y.makeTickPath(Be,jt,Gn[4],{len:Be._depth}),transFn:nn})})}else Be.title.hasOwnProperty("standoff")&&Jt.push(function(){Be._depth=Gn[4]*(An()[Be.side]-jt)});var xn=T.getComponentMethod("rangeslider","isVisible")(Be);return nt.skipTitle||xn&&Be.side==="bottom"||Jt.push(function(){return function(ln,Yt){var Wt,on=ln._fullLayout,un=Yt._id,En=un.charAt(0),Pn=Yt.title.font.size;if(Yt.title.hasOwnProperty("standoff"))Wt=Yt._depth+Yt.title.standoff+xt(Yt);else{var Un=We(Yt);if(Yt.type==="multicategory")Wt=Yt._depth;else{var Fn=1.5*Pn;Un&&(Fn=.5*Pn,Yt.ticks==="outside"&&(Fn+=Yt.ticklen)),Wt=10+Fn+(Yt.linewidth?Yt.linewidth-1:0)}Un||(Wt+=En==="x"?Yt.side==="top"?Pn*(Yt.showticklabels?1:0):Pn*(Yt.showticklabels?1.5:.5):Yt.side==="right"?Pn*(Yt.showticklabels?1:.5):Pn*(Yt.showticklabels?.5:0))}var Kn,qn,rr,er,tr=Y.getPxPosition(ln,Yt);if(En==="x"?(qn=Yt._offset+Yt._length/2,rr=Yt.side==="top"?tr-Wt:tr+Wt):(rr=Yt._offset+Yt._length/2,qn=Yt.side==="right"?tr+Wt:tr-Wt,Kn={rotate:"-90",offset:0}),Yt.type!=="multicategory"){var ur=Yt._selections[Yt._id+"tick"];if(er={selection:ur,side:Yt.side},ur&&ur.node()&&ur.node().parentNode){var cr=r.getTranslate(ur.node().parentNode);er.offsetLeft=cr.x,er.offsetTop=cr.y}Yt.title.hasOwnProperty("standoff")&&(er.pad=0)}return Yt._titleStandoff=Wt,t.draw(ln,un+"title",{propContainer:Yt,propName:Yt._name+".title.text",placeholder:on._dfltTitle[En],avoid:er,transform:Kn,attributes:{x:qn,y:rr,"text-anchor":"middle"}})}(De,Be)}),Jt.push(function(){var ln,Yt,Wt,on,un=Be.side.charAt(0),En=J[Be.side].charAt(0),Pn=Y.getPxPosition(De,Be),Un=hn?Be.ticklen:0;(Be.automargin||xn||Be._shiftPusher)&&(Be.type==="multicategory"?ln=An("tick2"):(ln=An(),ft==="x"&&un==="b"&&(Be._depth=Math.max(ln.width>0?ln.bottom-Pn:0,Un))));var Fn=0,Kn=0;if(Be._shiftPusher&&(Fn=Math.max(Un,ln.height>0?un==="l"?Pn-ln.left:ln.right-Pn:0),Be.title.text!==wt._dfltTitle[ft]&&(Kn=(Be._titleStandoff||0)+(Be._titleScoot||0),un==="l"&&(Kn+=xt(Be))),Be._fullDepth=Math.max(Fn,Kn)),Be.automargin){Yt={x:0,y:0,r:0,l:0,t:0,b:0};var qn=[0,1],rr=typeof Be._shift=="number"?Be._shift:0;if(ft==="x"){if(un==="b"?Yt[un]=Be._depth:(Yt[un]=Be._depth=Math.max(ln.width>0?Pn-ln.top:0,Un),qn.reverse()),ln.width>0){var er=ln.right-(Be._offset+Be._length);er>0&&(Yt.xr=1,Yt.r=er);var tr=Be._offset-ln.left;tr>0&&(Yt.xl=0,Yt.l=tr)}}else if(un==="l"?(Be._depth=Math.max(ln.height>0?Pn-ln.left:0,Un),Yt[un]=Be._depth-rr):(Be._depth=Math.max(ln.height>0?ln.right-Pn:0,Un),Yt[un]=Be._depth+rr,qn.reverse()),ln.height>0){var ur=ln.bottom-(Be._offset+Be._length);ur>0&&(Yt.yb=0,Yt.b=ur);var cr=Be._offset-ln.top;cr>0&&(Yt.yt=1,Yt.t=cr)}Yt[bt]=Be.anchor==="free"?Be.position:Be._anchorAxis.domain[qn[0]],Be.title.text!==wt._dfltTitle[ft]&&(Yt[un]+=xt(Be)+(Be.title.standoff||0)),Be.mirror&&Be.anchor!=="free"&&((Wt={x:0,y:0,r:0,l:0,t:0,b:0})[En]=Be.linewidth,Be.mirror&&Be.mirror!==!0&&(Wt[En]+=Un),Be.mirror===!0||Be.mirror==="ticks"?Wt[bt]=Be._anchorAxis.domain[qn[1]]:Be.mirror!=="all"&&Be.mirror!=="allticks"||(Wt[bt]=[Be._counterDomainMin,Be._counterDomainMax][qn[1]]))}xn&&(on=T.getComponentMethod("rangeslider","autoMarginOpts")(De,Be)),typeof Be.automargin=="string"&&(Je(Yt,Be.automargin),Je(Wt,Be.automargin)),l.autoMargin(De,it(Be),Yt),l.autoMargin(De,Tt(Be),Wt),l.autoMargin(De,Mt(Be),on)}),b.syncOrAsync(Jt)}}function An(ln){var Yt=ct+(ln||"tick");return Mn[Yt]||(Mn[Yt]=function(Wt,on){var un,En,Pn,Un;return Wt._selections[on].size()?(un=1/0,En=-1/0,Pn=1/0,Un=-1/0,Wt._selections[on].each(function(){var Fn=rt(this),Kn=r.bBox(Fn.node().parentNode);un=Math.min(un,Kn.top),En=Math.max(En,Kn.bottom),Pn=Math.min(Pn,Kn.left),Un=Math.max(Un,Kn.right)})):(un=0,En=0,Pn=0,Un=0),{top:un,bottom:En,left:Pn,right:Un,height:En-un,width:Un-Pn}}(Be,Yt)),Mn[Yt]}},Y.getTickSigns=function(De,Be){var nt=De._id.charAt(0),tt={x:"top",y:"right"}[nt],dt=De.side===tt?1:-1,ht=[-1,1,dt,-dt];return(Be?(De.minor||{}).ticks:De.ticks)!=="inside"==(nt==="x")&&(ht=ht.map(function(gt){return-gt})),De.side&&ht.push({l:-1,t:-1,r:1,b:1}[De.side.charAt(0)]),ht},Y.makeTransTickFn=function(De){return De._id.charAt(0)==="x"?function(Be){return d(De._offset+De.l2p(Be.x),0)}:function(Be){return d(0,De._offset+De.l2p(Be.x))}},Y.makeTransTickLabelFn=function(De){var Be=function(dt){var ht=dt.ticklabelposition||"",gt=function(Ut){return ht.indexOf(Ut)!==-1},ut=gt("top"),wt=gt("left"),ct=gt("right"),ft=gt("bottom"),bt=gt("inside"),It=ft||wt||ut||ct;if(!It&&!bt)return[0,0];var Dt=dt.side,Nt=It?(dt.tickwidth||0)/2:0,Qt=3,jt=dt.tickfont?dt.tickfont.size:12;return(ft||ut)&&(Nt+=jt*te,Qt+=(dt.linewidth||0)/2),(wt||ct)&&(Nt+=(dt.linewidth||0)/2,Qt+=3),bt&&Dt==="top"&&(Qt-=jt*(1-te)),(wt||ut)&&(Nt=-Nt),Dt!=="bottom"&&Dt!=="right"||(Qt=-Qt),[It?Nt:0,bt?Qt:0]}(De),nt=Be[0],tt=Be[1];return De._id.charAt(0)==="x"?function(dt){return d(nt+De._offset+De.l2p(Qe(dt)),tt)}:function(dt){return d(tt,nt+De._offset+De.l2p(Qe(dt)))}},Y.makeTickPath=function(De,Be,nt,tt){tt||(tt={});var dt=tt.minor;if(dt&&!De.minor)return"";var ht=tt.len!==void 0?tt.len:dt?De.minor.ticklen:De.ticklen,gt=De._id.charAt(0),ut=(De.linewidth||1)/2;return gt==="x"?"M0,"+(Be+ut*nt)+"v"+ht*nt:"M"+(Be+ut*nt)+",0h"+ht*nt},Y.makeLabelFns=function(De,Be,nt){var tt=De.ticklabelposition||"",dt=function(bn){return tt.indexOf(bn)!==-1},ht=dt("top"),gt=dt("left"),ut=dt("right"),wt=dt("bottom")||gt||ht||ut,ct=dt("inside"),ft=tt==="inside"&&De.ticks==="inside"||!ct&&De.ticks==="outside"&&De.tickson!=="boundaries",bt=0,It=0,Dt=ft?De.ticklen:0;if(ct?Dt*=-1:wt&&(Dt=0),ft&&(bt+=Dt,nt)){var Nt=b.deg2rad(nt);bt=Dt*Math.cos(Nt)+1,It=Dt*Math.sin(Nt)}De.showticklabels&&(ft||De.showline)&&(bt+=.2*De.tickfont.size);var Qt,jt,Ut,Xt,gn,Mn={labelStandoff:bt+=(De.linewidth||1)/2*(ct?-1:1),labelShift:It},cn=0,qt=De.side,nn=De._id.charAt(0),Kt=De.tickangle;if(nn==="x")Xt=(gn=!ct&&qt==="bottom"||ct&&qt==="top")?1:-1,ct&&(Xt*=-1),Qt=It*Xt,jt=Be+bt*Xt,Ut=gn?1:-.2,Math.abs(Kt)===90&&(ct?Ut+=q:Ut=Kt===-90&&qt==="bottom"?te:Kt===90&&qt==="top"?q:.5,cn=q/2*(Kt/90)),Mn.xFn=function(bn){return bn.dx+Qt+cn*bn.fontSize},Mn.yFn=function(bn){return bn.dy+jt+bn.fontSize*Ut},Mn.anchorFn=function(bn,yn){if(wt){if(gt)return"end";if(ut)return"start"}return k(yn)&&yn!==0&&yn!==180?yn*Xt<0!==ct?"end":"start":"middle"},Mn.heightFn=function(bn,yn,Sn){return yn<-60||yn>60?-.5*Sn:De.side==="top"!==ct?-Sn:0};else if(nn==="y"){if(Xt=(gn=!ct&&qt==="left"||ct&&qt==="right")?1:-1,ct&&(Xt*=-1),Qt=bt,jt=It*Xt,Ut=0,ct||Math.abs(Kt)!==90||(Ut=Kt===-90&&qt==="left"||Kt===90&&qt==="right"?te:.5),ct){var sn=k(Kt)?+Kt:0;if(sn!==0){var hn=b.deg2rad(sn);cn=Math.abs(Math.sin(hn))*te*Xt,Ut=0}}Mn.xFn=function(bn){return bn.dx+Be-(Qt+bn.fontSize*Ut)*Xt+cn*bn.fontSize},Mn.yFn=function(bn){return bn.dy+jt+bn.fontSize*q},Mn.anchorFn=function(bn,yn){return k(yn)&&Math.abs(yn)===90?"middle":gn?"end":"start"},Mn.heightFn=function(bn,yn,Sn){return De.side==="right"&&(yn*=-1),yn<-30?-Sn:yn<30?-.5*Sn:0}}return Mn},Y.drawTicks=function(De,Be,nt){nt=nt||{};var tt=Be._id+"tick",dt=[].concat(Be.minor&&Be.minor.ticks?nt.vals.filter(function(gt){return gt.minor&&!gt.noTick}):[]).concat(Be.ticks?nt.vals.filter(function(gt){return!gt.minor&&!gt.noTick}):[]),ht=nt.layer.selectAll("path."+tt).data(dt,vt);ht.exit().remove(),ht.enter().append("path").classed(tt,1).classed("ticks",1).classed("crisp",nt.crisp!==!1).each(function(gt){return i.stroke(M.select(this),gt.minor?Be.minor.tickcolor:Be.tickcolor)}).style("stroke-width",function(gt){return r.crispRound(De,gt.minor?Be.minor.tickwidth:Be.tickwidth,1)+"px"}).attr("d",nt.path).style("display",null),at(Be,[H]),ht.attr("transform",nt.transFn)},Y.drawGrid=function(De,Be,nt){if(nt=nt||{},Be.tickmode!=="sync"){var tt=Be._id+"grid",dt=Be.minor&&Be.minor.showgrid,ht=dt?nt.vals.filter(function(Ut){return Ut.minor}):[],gt=Be.showgrid?nt.vals.filter(function(Ut){return!Ut.minor}):[],ut=nt.counterAxis;if(ut&&Y.shouldShowZeroLine(De,Be,ut))for(var wt=Be.tickmode==="array",ct=0;ct<gt.length;ct++){var ft=gt[ct].x;if(wt?!ft:Math.abs(ft)<Be.dtick/100){if(gt=gt.slice(0,ct).concat(gt.slice(ct+1)),!wt)break;ct--}}Be._gw=r.crispRound(De,Be.gridwidth,1);for(var bt=dt?r.crispRound(De,Be.minor.gridwidth,1):0,It=nt.layer,Dt=nt.minorLayer,Nt=1;Nt>=0;Nt--){var Qt=Nt?It:Dt;if(Qt){var jt=Qt.selectAll("path."+tt).data(Nt?gt:ht,vt);jt.exit().remove(),jt.enter().append("path").classed(tt,1).classed("crisp",nt.crisp!==!1),jt.attr("transform",nt.transFn).attr("d",nt.path).each(function(Ut){return i.stroke(M.select(this),Ut.minor?Be.minor.gridcolor:Be.gridcolor||"#ddd")}).style("stroke-dasharray",function(Ut){return r.dashStyle(Ut.minor?Be.minor.griddash:Be.griddash,Ut.minor?Be.minor.gridwidth:Be.gridwidth)}).style("stroke-width",function(Ut){return(Ut.minor?bt:Be._gw)+"px"}).style("display",null),typeof nt.path=="function"&&jt.attr("d",nt.path)}}at(Be,[G,O])}},Y.drawZeroLine=function(De,Be,nt){nt=nt||nt;var tt=Be._id+"zl",dt=Y.shouldShowZeroLine(De,Be,nt.counterAxis),ht=nt.layer.selectAll("path."+tt).data(dt?[{x:0,id:Be._id}]:[]);ht.exit().remove(),ht.enter().append("path").classed(tt,1).classed("zl",1).classed("crisp",nt.crisp!==!1).each(function(){nt.layer.selectAll("path").sort(function(gt,ut){return ne(gt.id,ut.id)})}),ht.attr("transform",nt.transFn).attr("d",nt.path).call(i.stroke,Be.zerolinecolor||i.defaultLine).style("stroke-width",r.crispRound(De,Be.zerolinewidth,Be._gw||1)+"px").style("display",null),at(Be,[z])},Y.drawLabels=function(De,Be,nt){nt=nt||{};var tt=De._fullLayout,dt=Be._id,ht=dt.charAt(0),gt=nt.cls||dt+"tick",ut=nt.vals.filter(function(yn){return yn.text}),wt=nt.labelFns,ct=nt.secondary?0:Be.tickangle,ft=(Be._prevTickAngles||{})[gt],bt=nt.layer.selectAll("g."+gt).data(Be.showticklabels?ut:[],vt),It=[];function Dt(yn,Sn){yn.each(function(pn){var Cn=M.select(this),Hn=Cn.select(".text-math-group"),Qn=wt.anchorFn(pn,Sn),nr=nt.transFn.call(Cn.node(),pn)+(k(Sn)&&+Sn!=0?" rotate("+Sn+","+wt.xFn(pn)+","+(wt.yFn(pn)-pn.fontSize/2)+")":""),Jn=s.lineCount(Cn),Gn=K*pn.fontSize,lr=wt.heightFn(pn,k(Sn)?+Sn:0,(Jn-1)*Gn);if(lr&&(nr+=d(0,lr)),Hn.empty()){var Rt=Cn.select("text");Rt.attr({transform:nr,"text-anchor":Qn}),Rt.style("opacity",1),Be._adjustTickLabelsOverflow&&Be._adjustTickLabelsOverflow()}else{var $t=r.bBox(Hn.node()).width*{end:-.5,start:.5}[Qn];Hn.attr("transform",nr+d($t,0))}})}bt.enter().append("g").classed(gt,1).append("text").attr("text-anchor","middle").each(function(yn){var Sn=M.select(this),pn=De._promises.length;Sn.call(s.positionText,wt.xFn(yn),wt.yFn(yn)).call(r.font,yn.font,yn.fontSize,yn.fontColor).text(yn.text).call(s.convertToTspans,De),De._promises[pn]?It.push(De._promises.pop().then(function(){Dt(Sn,ct)})):Dt(Sn,ct)}),at(Be,[N]),bt.exit().remove(),nt.repositionOnUpdate&&bt.each(function(yn){M.select(this).select("text").call(s.positionText,wt.xFn(yn),wt.yFn(yn))}),Be._adjustTickLabelsOverflow=function(){var yn=Be.ticklabeloverflow;if(yn&&yn!=="allow"){var Sn=yn.indexOf("hide")!==-1,pn=Be._id.charAt(0)==="x",Cn=0,Hn=pn?De._fullLayout.width:De._fullLayout.height;if(yn.indexOf("domain")!==-1){var Qn=b.simpleMap(Be.range,Be.r2l);Cn=Be.l2p(Qn[0])+Be._offset,Hn=Be.l2p(Qn[1])+Be._offset}var nr=Math.min(Cn,Hn),Jn=Math.max(Cn,Hn),Gn=Be.side,lr=1/0,Rt=-1/0;for(var $t in bt.each(function(wn){var Bn=M.select(this);if(Bn.select(".text-math-group").empty()){var Ln=r.bBox(Bn.node()),In=0;pn?(Ln.right>Jn||Ln.left<nr)&&(In=1):(Ln.bottom>Jn||Ln.top+(Be.tickangle?0:wn.fontSize/4)<nr)&&(In=1);var Wn=Bn.select("text");In?Sn&&Wn.style("opacity",0):(Wn.style("opacity",1),lr=Gn==="bottom"||Gn==="right"?Math.min(lr,pn?Ln.top:Ln.left):-1/0,Rt=Gn==="top"||Gn==="left"?Math.max(Rt,pn?Ln.bottom:Ln.right):1/0)}}),tt._plots){var an=tt._plots[$t];if(Be._id===an.xaxis._id||Be._id===an.yaxis._id){var fn=pn?an.yaxis:an.xaxis;fn&&(fn["_visibleLabelMin_"+Be._id]=lr,fn["_visibleLabelMax_"+Be._id]=Rt)}}}},Be._hideCounterAxisInsideTickLabels=function(yn){var Sn=Be._id.charAt(0)==="x",pn=[];for(var Cn in tt._plots){var Hn=tt._plots[Cn];Be._id!==Hn.xaxis._id&&Be._id!==Hn.yaxis._id||pn.push(Sn?Hn.yaxis:Hn.xaxis)}pn.forEach(function(Qn,nr){Qn&&We(Qn)&&(yn||[z,O,G,H,N]).forEach(function(Jn){var Gn=Jn.K==="tick"&&Jn.L==="text"&&Be.ticklabelmode==="period",lr=tt._plots[Be._mainSubplot];(Jn.K===z.K?lr.zerolinelayer.selectAll("."+Be._id+"zl"):Jn.K===O.K?lr.minorGridlayer.selectAll("."+Be._id):Jn.K===G.K?lr.gridlayer.selectAll("."+Be._id):lr[Be._id.charAt(0)+"axislayer"]).each(function(){var Rt=M.select(this);Jn.L&&(Rt=Rt.selectAll(Jn.L)),Rt.each(function($t){var an=Be.l2p(Gn?Qe($t):$t.x)+Be._offset,fn=M.select(this);an<Be["_visibleLabelMax_"+Qn._id]&&an>Be["_visibleLabelMin_"+Qn._id]?fn.style("display","none"):Jn.K!=="tick"||nr||fn.style("display",null)})})})})},Dt(bt,ft+1?ft:ct);var Nt=null;Be._selections&&(Be._selections[gt]=bt);var Qt=[function(){return It.length&&Promise.all(It)}];Be.automargin&&tt._redrawFromAutoMarginCount&&ft===90?(Nt=90,Qt.push(function(){Dt(bt,ft)})):Qt.push(function(){if(Dt(bt,ct),ut.length&&ht==="x"&&!k(ct)&&(Be.type!=="log"||String(Be.dtick).charAt(0)!=="D")){Nt=0;var yn,Sn=0,pn=[];if(bt.each(function(Bn){Sn=Math.max(Sn,Bn.fontSize);var Ln=Be.l2p(Bn.x),In=rt(this),Wn=r.bBox(In.node());pn.push({top:0,bottom:10,height:10,left:Ln-Wn.width/2,right:Ln+Wn.width/2+2,width:Wn.width+2})}),Be.tickson!=="boundaries"&&!Be.showdividers||nt.secondary){var Cn=ut.length,Hn=Math.abs((ut[Cn-1].x-ut[0].x)*Be._m)/(Cn-1),Qn=Be.ticklabelposition||"",nr=function(Bn){return Qn.indexOf(Bn)!==-1},Jn=nr("top"),Gn=nr("left"),lr=nr("right"),Rt=nr("bottom")||Gn||Jn||lr?(Be.tickwidth||0)+6:0,$t=Hn<2.5*Sn||Be.type==="multicategory"||Be._name==="realaxis";for(yn=0;yn<pn.length-1;yn++)if(b.bBoxIntersect(pn[yn],pn[yn+1],Rt)){Nt=$t?90:30;break}}else{var an=2;for(Be.ticks&&(an+=Be.tickwidth/2),yn=0;yn<pn.length;yn++){var fn=ut[yn].xbnd,wn=pn[yn];if(fn[0]!==null&&wn.left-Be.l2p(fn[0])<an||fn[1]!==null&&Be.l2p(fn[1])-wn.right<an){Nt=90;break}}}Nt&&Dt(bt,Nt)}}),Be._tickAngles&&Qt.push(function(){Be._tickAngles[gt]=Nt===null?k(ct)?ct:0:Nt});var jt=function(){var yn=0,Sn=0;return bt.each(function(pn,Cn){var Hn,Qn=rt(this);Qn.select(".text-math-group").empty()&&(Be._vals[Cn]&&(Hn=Be._vals[Cn].bb||r.bBox(Qn.node()),Be._vals[Cn].bb=Hn),yn=Math.max(yn,Hn.width),Sn=Math.max(Sn,Hn.height))}),{labelsMaxW:yn,labelsMaxH:Sn}},Ut=Be._anchorAxis;if(Ut&&(Ut.autorange||Ut.insiderange)&&We(Be)&&!re(tt,Be._id)&&(tt._insideTickLabelsUpdaterange||(tt._insideTickLabelsUpdaterange={}),Ut.autorange&&(tt._insideTickLabelsUpdaterange[Ut._name+".autorange"]=Ut.autorange,Qt.push(jt)),Ut.insiderange)){var Xt=jt(),gn=Be._id.charAt(0)==="y"?Xt.labelsMaxW:Xt.labelsMaxH;gn+=6,Be.ticklabelposition==="inside"&&(gn+=Be.ticklen||0);var Mn=Be.side==="right"||Be.side==="top"?1:-1,cn=Mn===1?1:0,qt=Mn===1?0:1,nn=[];nn[qt]=Ut.range[qt];var Kt=Ut.d2p(Ut.range[cn]),sn=Ut.d2p(Ut.range[qt]),hn=Math.abs(sn-Kt);hn-gn>0?gn*=1+gn/(hn-=gn):gn=0,Be._id.charAt(0)!=="y"&&(gn=-gn),nn[cn]=Ut.p2d(Ut.d2p(Ut.range[cn])+Mn*gn),Ut.autorange==="min"||Ut.autorange==="max reversed"?(nn[0]=null,Ut._rangeInitial0=void 0,Ut._rangeInitial1=void 0):Ut.autorange!=="max"&&Ut.autorange!=="min reversed"||(nn[1]=null,Ut._rangeInitial0=void 0,Ut._rangeInitial1=void 0),tt._insideTickLabelsUpdaterange[Ut._name+".range"]=nn}var bn=b.syncOrAsync(Qt);return bn&&bn.then&&De._promises.push(bn),bn},Y.getPxPosition=function(De,Be){var nt,tt=De._fullLayout._size,dt=Be._id.charAt(0),ht=Be.side;return Be.anchor!=="free"?nt=Be._anchorAxis:dt==="x"?nt={_offset:tt.t+(1-(Be.position||0))*tt.h,_length:0}:dt==="y"&&(nt={_offset:tt.l+(Be.position||0)*tt.w+Be._shift,_length:0}),ht==="top"||ht==="left"?nt._offset:ht==="bottom"||ht==="right"?nt._offset+nt._length:void 0},Y.shouldShowZeroLine=function(De,Be,nt){var tt=b.simpleMap(Be.range,Be.r2l);return tt[0]*tt[1]<=0&&Be.zeroline&&(Be.type==="linear"||Be.type==="-")&&!(Be.rangebreaks&&Be.maskBreaks(0)===P)&&(mt(Be,0)||!function(dt,ht,gt,ut){var wt=gt._mainAxis;if(wt){var ct=dt._fullLayout,ft=ht._id.charAt(0),bt=Y.counterLetter(ht._id),It=ht._offset+(Math.abs(ut[0])<Math.abs(ut[1])==(ft==="x")?0:ht._length),Dt=ct._plots[gt._mainSubplot];if(!(Dt.mainplotinfo||Dt).overlays.length)return Ut(gt);for(var Nt=Y.list(dt,bt),Qt=0;Qt<Nt.length;Qt++){var jt=Nt[Qt];if(jt._mainAxis===wt&&Ut(jt))return!0}}function Ut(Xt){if(!Xt.showline||!Xt.linewidth)return!1;var gn=Math.max((Xt.linewidth+ht.zerolinewidth)/2,1);function Mn(nn){return typeof nn=="number"&&Math.abs(nn-It)<gn}if(Mn(Xt._mainLinePosition)||Mn(Xt._mainMirrorPosition))return!0;var cn=Xt._linepositions||{};for(var qt in cn)if(Mn(cn[qt][0])||Mn(cn[qt][1]))return!0}}(De,Be,nt,tt)||function(dt,ht){for(var gt=dt._fullData,ut=ht._mainSubplot,wt=ht._id.charAt(0),ct=0;ct<gt.length;ct++){var ft=gt[ct];if(ft.visible===!0&&ft.xaxis+ft.yaxis===ut&&(T.traceIs(ft,"bar-like")&&ft.orientation==={x:"h",y:"v"}[wt]||ft.fill&&ft.fill.charAt(ft.fill.length-1)===wt))return!0}return!1}(De,Be))},Y.clipEnds=function(De,Be){return Be.filter(function(nt){return mt(De,nt.x)})},Y.allowAutoMargin=function(De){for(var Be=Y.list(De,"",!0),nt=0;nt<Be.length;nt++){var tt=Be[nt];tt.automargin&&(l.allowAutoMargin(De,it(tt)),tt.mirror&&l.allowAutoMargin(De,Tt(tt))),T.getComponentMethod("rangeslider","isVisible")(tt)&&l.allowAutoMargin(De,Mt(tt))}},Y.swap=function(De,Be){for(var nt=function(dt,ht){var gt,ut,wt=[];for(gt=0;gt<ht.length;gt++){var ct=[],ft=dt._fullData[ht[gt]].xaxis,bt=dt._fullData[ht[gt]].yaxis;if(ft&&bt){for(ut=0;ut<wt.length;ut++)wt[ut].x.indexOf(ft)===-1&&wt[ut].y.indexOf(bt)===-1||ct.push(ut);if(ct.length){var It,Dt=wt[ct[0]];if(ct.length>1)for(ut=1;ut<ct.length;ut++)It=wt[ct[ut]],Pt(Dt.x,It.x),Pt(Dt.y,It.y);Pt(Dt.x,[ft]),Pt(Dt.y,[bt])}else wt.push({x:[ft],y:[bt]})}}return wt}(De,Be),tt=0;tt<nt.length;tt++)kt(De,nt[tt].x,nt[tt].y)}},4322:function(ee,D,e){var M=e(92770),k=e(71828),l=e(50606).BADNUM,T=k.isArrayOrTypedArray,b=k.isDateTime,d=k.cleanNumber,s=Math.round;function t(r,n){return n?M(r):typeof r=="number"}function i(r){return Math.max(1,(r-1)/1e3)}ee.exports=function(r,n,o){var a=r,u=o.noMultiCategory;if(T(a)&&!a.length)return"-";if(!u&&function(h){return T(h[0])&&T(h[1])}(a))return"multicategory";if(u&&Array.isArray(a[0])){for(var p=[],c=0;c<a.length;c++)if(T(a[c]))for(var x=0;x<a[c].length;x++)p.push(a[c][x]);a=p}if(function(h,y){for(var v=h.length,m=i(v),_=0,f=0,S={},w=0;w<v;w+=m){var E=h[s(w)],L=String(E);S[L]||(S[L]=1,b(E,y)&&_++,M(E)&&f++)}return _>2*f}(a,n))return"date";var g=o.autotypenumbers!=="strict";return function(h,y){for(var v=h.length,m=i(v),_=0,f=0,S={},w=0;w<v;w+=m){var E=h[s(w)],L=String(E);if(!S[L]){S[L]=1;var C=typeof E;C==="boolean"?f++:(y?d(E)!==l:C==="number")?_++:C==="string"&&f++}}return f>2*_}(a,g)?"category":function(h,y){for(var v=h.length,m=0;m<v;m++)if(t(h[m],y))return!0;return!1}(a,g)?"linear":"-"}},71453:function(ee,D,e){var M=e(92770),k=e(73972),l=e(71828),T=e(44467),b=e(85501),d=e(13838),s=e(26218),t=e(38701),i=e(96115),r=e(89426),n=e(15258),o=e(92128),a=e(23608),u=e(21994),p=e(85555).WEEKDAY_PATTERN,c=e(85555).HOUR_PATTERN;function x(y,v,m){function _(z,G){return l.coerce(y,v,d.rangebreaks,z,G)}if(_("enabled")){var f=_("bounds");if(f&&f.length>=2){var S,w,E="";if(f.length===2){for(S=0;S<2;S++)if(w=h(f[S])){E=p;break}}var L=_("pattern",E);if(L===p)for(S=0;S<2;S++)(w=h(f[S]))&&(v.bounds[S]=f[S]=w-1);if(L)for(S=0;S<2;S++)switch(w=f[S],L){case p:if(!M(w)||(w=+w)!==Math.floor(w)||w<0||w>=7)return void(v.enabled=!1);v.bounds[S]=f[S]=w;break;case c:if(!M(w)||(w=+w)<0||w>24)return void(v.enabled=!1);v.bounds[S]=f[S]=w}if(m.autorange===!1){var C=m.range;if(C[0]<C[1]){if(f[0]<C[0]&&f[1]>C[1])return void(v.enabled=!1)}else if(f[0]>C[0]&&f[1]<C[1])return void(v.enabled=!1)}}else{var P=_("values");if(!P||!P.length)return void(v.enabled=!1);_("dvalue")}}}ee.exports=function(y,v,m,_,f){var S,w=_.letter,E=_.font||{},L=_.splomStash||{},C=m("visible",!_.visibleDflt),P=v._template||{},z=v.type||P.type||"-";z==="date"&&(k.getComponentMethod("calendars","handleDefaults")(y,v,"calendar",_.calendar),_.noTicklabelmode||(S=m("ticklabelmode")));var G="";_.noTicklabelposition&&z!=="multicategory"||(G=l.coerce(y,v,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:w==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||m("ticklabeloverflow",G.indexOf("inside")!==-1?"hide past domain":z==="category"||z==="multicategory"?"allow":"hide past div"),u(v,f),a(y,v,m,_),n(y,v,m,_),z==="category"||_.noHover||m("hoverformat");var O=m("color"),H=O!==d.color.dflt?O:E.color,N=L.label||f._dfltTitle[w];if(r(y,v,m,z,_),!C)return v;m("title.text",N),l.coerceFont(m,"title.font",{family:E.family,size:l.bigFont(E.size),color:H}),s(y,v,m,z);var B=_.hasMinor;if(B&&(T.newContainer(v,"minor"),s(y,v,m,z,{isMinor:!0})),i(y,v,m,z,_),t(y,v,m,_),B){var V=_.isMinor;_.isMinor=!0,t(y,v,m,_),_.isMinor=V}o(y,v,m,{dfltColor:O,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:B,attributes:d}),!B||v.minor.ticks||v.minor.showgrid||delete v.minor,(v.showline||v.ticks)&&m("mirror");var q,te=z==="multicategory";if(_.noTickson||z!=="category"&&!te||!v.ticks&&!v.showgrid||(te&&(q="boundaries"),m("tickson",q)==="boundaries"&&delete v.ticklabelposition),te&&m("showdividers")&&(m("dividercolor"),m("dividerwidth")),z==="date")if(b(y,v,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),v.rangebreaks.length){for(var K=0;K<v.rangebreaks.length;K++)if(v.rangebreaks[K].pattern===p){v._hasDayOfWeekBreaks=!0;break}if(u(v,f),f._has("scattergl")||f._has("splom"))for(var J=0;J<_.data.length;J++){var Y=_.data[J];Y.type!=="scattergl"&&Y.type!=="splom"||(Y.visible=!1,l.warn(Y.type+" traces do not work on axes with rangebreaks. Setting trace "+Y.index+" to `visible: false`."))}}else delete v.rangebreaks;return v};var g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function h(y){if(typeof y=="string")return g[y.substr(0,3).toLowerCase()]}},12663:function(ee,D,e){var M=e(31562),k=M.FORMAT_LINK,l=M.DATE_FORMAT_LINK;function T(d,s){return["Sets the "+d+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function b(d,s){return T(d,s)+[" And for dates see: "+l+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ee.exports={axisHoverFormat:function(d,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:b)("hover text",d)+["By default the values are formatted using "+(s?"generic number format":"`"+d+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:b}},41675:function(ee,D,e){var M=e(73972),k=e(85555);function l(T,b){if(b&&b.length){for(var d=0;d<b.length;d++)if(b[d][T])return!0}return!1}D.id2name=function(T){if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)){var b=T.split(" ")[0].substr(1);return b==="1"&&(b=""),T.charAt(0)+"axis"+b}},D.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var b=T.substr(5);return b==="1"&&(b=""),T.charAt(0)+b}},D.cleanId=function(T,b,d){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)&&(!b||T.charAt(0)===b)&&(!s||d)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(s&&d?" domain":"")}},D.list=function(T,b,d){var s=T._fullLayout;if(!s)return[];var t,i=D.listIds(T,b),r=new Array(i.length);for(t=0;t<i.length;t++){var n=i[t];r[t]=s[n.charAt(0)+"axis"+n.substr(1)]}if(!d){var o=s._subplots.gl3d||[];for(t=0;t<o.length;t++){var a=s[o[t]];b?r.push(a[b+"axis"]):r.push(a.xaxis,a.yaxis,a.zaxis)}}return r},D.listIds=function(T,b){var d=T._fullLayout;if(!d)return[];var s=d._subplots;return b?s[b+"axis"]:s.xaxis.concat(s.yaxis)},D.getFromId=function(T,b,d){var s=T._fullLayout;return b=b===void 0||typeof b!="string"?b:b.replace(" domain",""),d==="x"?b=b.replace(/y[0-9]*/,""):d==="y"&&(b=b.replace(/x[0-9]*/,"")),s[D.id2name(b)]},D.getFromTrace=function(T,b,d){var s=T._fullLayout,t=null;if(M.traceIs(b,"gl3d")){var i=b.scene;i.substr(0,5)==="scene"&&(t=s[i][d+"axis"])}else t=D.getFromId(T,b[d+"axis"]||d);return t},D.idSort=function(T,b){var d=T.charAt(0),s=b.charAt(0);return d!==s?d>s?1:-1:+(T.substr(1)||1)-+(b.substr(1)||1)},D.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},D.isLinked=function(T,b){return l(b,T._axisMatchGroups)||l(b,T._axisConstraintGroups)}},15258:function(ee){ee.exports=function(D,e,M,k){if(e.type==="category"){var l,T=D.categoryarray,b=Array.isArray(T)&&T.length>0;b&&(l="array");var d,s=M("categoryorder",l);s==="array"&&(d=M("categoryarray")),b||s!=="array"||(s=e.categoryorder="trace"),s==="trace"?e._initialCategories=[]:s==="array"?e._initialCategories=d.slice():(d=function(t,i){var r,n,o,a=i.dataAttr||t._id.charAt(0),u={};if(i.axData)r=i.axData;else for(r=[],n=0;n<i.data.length;n++){var p=i.data[n];p[a+"axis"]===t._id&&r.push(p)}for(n=0;n<r.length;n++){var c=r[n][a];for(o=0;o<c.length;o++){var x=c[o];x!=null&&(u[x]=1)}}return Object.keys(u)}(e,k).sort(),s==="category ascending"?e._initialCategories=d:s==="category descending"&&(e._initialCategories=d.reverse()))}}},66287:function(ee,D,e){var M=e(92770),k=e(71828),l=e(50606),T=l.ONEDAY,b=l.ONEWEEK;D.dtick=function(d,s){var t=s==="log",i=s==="date",r=s==="category",n=i?T:1;if(!d)return n;if(M(d))return(d=Number(d))<=0?n:r?Math.max(1,Math.round(d)):i?Math.max(.1,d):d;if(typeof d!="string"||!i&&!t)return n;var o=d.charAt(0),a=d.substr(1);return(a=M(a)?Number(a):0)<=0||!(i&&o==="M"&&a===Math.round(a)||t&&o==="L"||t&&o==="D"&&(a===1||a===2))?n:d},D.tick0=function(d,s,t,i){return s==="date"?k.cleanDate(d,k.dateTick0(t,i%b==0?1:0)):i!=="D1"&&i!=="D2"?M(d)?Number(d):0:void 0}},85555:function(ee,D,e){var M=e(30587).counter;ee.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(ee,D,e){var M=e(71828),k=e(71739),l=e(41675).id2name,T=e(13838),b=e(42449),d=e(21994),s=e(50606).ALMOST_EQUAL,t=e(18783).FROM_BL;function i(c,x,g){var h=g.axIds,y=g.layoutOut,v=g.hasImage,m=y._axisConstraintGroups,_=y._axisMatchGroups,f=x._id,S=f.charAt(0),w=((y._splomAxes||{})[S]||{})[f]||{},E=x._id,L=E.charAt(0)==="x";function C(W,Q){return M.coerce(c,x,T,W,Q)}x._matchGroup=null,x._constraintGroup=null,C("constrain",v?"domain":"range"),M.coerce(c,x,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var P,z,G=x.type,O=[];for(P=0;P<h.length;P++)(z=h[P])!==E&&y[l(z)].type===G&&O.push(z);var H=n(m,E);if(H){var N=[];for(P=0;P<O.length;P++)H[z=O[P]]||N.push(z);O=N}var B,V,q=O.length;q&&(c.matches||w.matches)&&(B=M.coerce(c,x,{matches:{valType:"enumerated",values:O,dflt:O.indexOf(w.matches)!==-1?w.matches:void 0}},"matches"));var te=v&&!L?x.anchor:void 0;if(q&&!B&&(c.scaleanchor||te)&&(V=M.coerce(c,x,{scaleanchor:{valType:"enumerated",values:O.concat([!1])}},"scaleanchor",te)),B){x._matchGroup=o(_,E,B,1);var K=y[l(B)],J=r(y,x)/r(y,K);L!==(B.charAt(0)==="x")&&(J=(L?"x":"y")+J),o(m,E,B,J)}else c.matches&&h.indexOf(c.matches)!==-1&&M.warn("ignored "+x._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(V){var Y=C("scaleratio");Y||(Y=x.scaleratio=1),o(m,E,V,Y)}else c.scaleanchor&&h.indexOf(c.scaleanchor)!==-1&&M.warn("ignored "+x._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(c,x){var g=x.domain;return g||(g=c[l(x.overlaying)].domain),g[1]-g[0]}function n(c,x){for(var g=0;g<c.length;g++)if(c[g][x])return c[g];return null}function o(c,x,g,h){var y,v,m,_,f,S=n(c,x);S===null?((S={})[x]=1,f=c.length,c.push(S)):f=c.indexOf(S);var w=Object.keys(S);for(y=0;y<c.length;y++)if(m=c[y],y!==f&&m[g]){var E=m[g];for(v=0;v<w.length;v++)m[_=w[v]]=a(E,a(h,S[_]));return void c.splice(f,1)}if(h!==1)for(v=0;v<w.length;v++){var L=w[v];S[L]=a(h,S[L])}S[g]=1}function a(c,x){var g,h,y="",v="";typeof c=="string"&&(g=(y=c.match(/^[xy]*/)[0]).length,c=+c.substr(g)),typeof x=="string"&&(h=(v=x.match(/^[xy]*/)[0]).length,x=+x.substr(h));var m=c*x;return g||h?g&&h&&y.charAt(0)!==v.charAt(0)?g===h?m:(g>h?y.substr(h):v.substr(g))+m:y+v+c*x:m}function u(c,x){for(var g=x._size,h=g.h/g.w,y={},v=Object.keys(c),m=0;m<v.length;m++){var _=v[m],f=c[_];if(typeof f=="string"){var S=f.match(/^[xy]*/)[0],w=S.length;f=+f.substr(w);for(var E=S.charAt(0)==="y"?h:1/h,L=0;L<w;L++)f*=E}y[_]=f}return y}function p(c,x){var g=c._inputDomain,h=t[c.constraintoward],y=g[0]+(g[1]-g[0])*h;c.domain=c._input.domain=[y+(g[0]-y)/x,y+(g[1]-y)/x],c.setScale()}D.handleDefaults=function(c,x,g){var h,y,v,m,_,f,S,w,E=g.axIds,L=g.axHasImage,C=x._axisConstraintGroups=[],P=x._axisMatchGroups=[];for(h=0;h<E.length;h++)i(_=c[m=l(E[h])],f=x[m],{axIds:E,layoutOut:x,hasImage:L[m]});function z(K,J){for(h=0;h<K.length;h++)for(v in y=K[h])x[l(v)][J]=y}for(z(P,"_matchGroup"),h=0;h<C.length;h++)for(v in y=C[h])if((f=x[l(v)]).fixedrange){for(var G in y){var O=l(G);(c[O]||{}).fixedrange===!1&&M.warn("fixedrange was specified as false for axis "+O+" but was overridden because another axis in its constraint group has fixedrange true"),x[O].fixedrange=!0}break}for(h=0;h<C.length;){for(v in y=C[h]){(f=x[l(v)])._matchGroup&&Object.keys(f._matchGroup).length===Object.keys(y).length&&(C.splice(h,1),h--);break}h++}z(C,"_constraintGroup");var H=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],N=!1,B=!1;function V(){w=f[S],S==="rangebreaks"&&(B=f._hasDayOfWeekBreaks)}for(h=0;h<P.length;h++){y=P[h];for(var q=0;q<H.length;q++){var te;for(v in S=H[q],w=null,y)if(_=c[m=l(v)],f=x[m],S in f){if(!f.matches&&(te=f,S in _)){V();break}w===null&&S in _&&V()}if(S==="range"&&w&&_.range&&_.range.length===2&&_.range[0]!==null&&_.range[1]!==null&&(N=!0),S==="autorange"&&w===null&&N&&(w=!1),w===null&&S in te&&(w=te[S]),w!==null)for(v in y)(f=x[l(v)])[S]=S==="range"?w.slice():w,S==="rangebreaks"&&(f._hasDayOfWeekBreaks=B,d(f,x))}}},D.enforce=function(c){var x,g,h,y,v,m,_,f,S=c._fullLayout,w=S._axisConstraintGroups||[];for(x=0;x<w.length;x++){h=u(w[x],S);var E=Object.keys(h),L=1/0,C=0,P=1/0,z={},G={},O=!1;for(g=0;g<E.length;g++)G[y=E[g]]=v=S[l(y)],v._inputDomain?v.domain=v._inputDomain.slice():v._inputDomain=v.domain.slice(),v._inputRange||(v._inputRange=v.range.slice()),v.setScale(),z[y]=m=Math.abs(v._m)/h[y],L=Math.min(L,m),v.constrain!=="domain"&&v._constraintShrinkable||(P=Math.min(P,m)),delete v._constraintShrinkable,C=Math.max(C,m),v.constrain==="domain"&&(O=!0);if(!(L>s*C)||O){for(g=0;g<E.length;g++)if(m=z[y=E[g]],_=(v=G[y]).constrain,m!==P||_==="domain")if(f=m/P,_==="range")b(v,f);else{var H=v._inputDomain,N=(v.domain[1]-v.domain[0])/(H[1]-H[0]),B=(v.r2l(v.range[1])-v.r2l(v.range[0]))/(v.r2l(v._inputRange[1])-v.r2l(v._inputRange[0]));if((f/=N)*B<1){v.domain=v._input.domain=H.slice(),b(v,f);continue}if(B<1&&(v.range=v._input.range=v._inputRange.slice(),f*=B),v.autorange){var V=v.r2l(v.range[0]),q=v.r2l(v.range[1]),te=(V+q)/2,K=te,J=te,Y=Math.abs(q-te),W=te-Y*f*1.0001,Q=te+Y*f*1.0001,ne=k.makePadFn(S,v,0),re=k.makePadFn(S,v,1);p(v,f);var ae,ue,pe=Math.abs(v._m),ge=k.concatExtremes(c,v),_e=ge.min,me=ge.max;for(ue=0;ue<_e.length;ue++)(ae=_e[ue].val-ne(_e[ue])/pe)>W&&ae<K&&(K=ae);for(ue=0;ue<me.length;ue++)(ae=me[ue].val+re(me[ue])/pe)<Q&&ae>J&&(J=ae);f/=(J-K)/(2*Y),K=v.l2r(K),J=v.l2r(J),v.range=v._input.range=V<q?[K,J]:[J,K]}p(v,f)}}}},D.getAxisGroup=function(c,x){for(var g=c._axisMatchGroups,h=0;h<g.length;h++)if(g[h][x])return"g"+h;return x},D.clean=function(c,x){if(x._inputDomain){for(var g=!1,h=x._id,y=c._fullLayout._axisConstraintGroups,v=0;v<y.length;v++)if(y[v][h]){g=!0;break}g&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},29323:function(ee,D,e){var M=e(39898),k=e(71828),l=k.numberFormat,T=e(84267),b=e(38520),d=e(73972),s=k.strTranslate,t=e(63893),i=e(7901),r=e(91424),n=e(30211),o=e(89298),a=e(6964),u=e(28569),p=e(64505),c=p.selectingOrDrawing,x=p.freeMode,g=e(18783).FROM_TL,h=e(33306),y=e(61549).redrawReglTraces,v=e(74875),m=e(41675).getFromId,_=e(47322).prepSelect,f=e(47322).clearOutline,S=e(47322).selectOnClick,w=e(42449),E=e(85555),L=E.MINDRAG,C=E.MINZOOM,P=!0;function z(ae,ue,pe,ge){var _e=k.ensureSingle(ae.draglayer,ue,pe,function(me){me.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return _e.call(a,ge),_e.node()}function G(ae,ue,pe,ge,_e,me,ve){var Oe=z(ae,"rect",ue,pe);return M.select(Oe).call(r.setRect,ge,_e,me,ve),Oe}function O(ae,ue){for(var pe=0;pe<ae.length;pe++)if(!ae[pe].fixedrange)return ue;return""}function H(ae,ue,pe,ge,_e){for(var me=0;me<ae.length;me++){var ve=ae[me];if(!ve.fixedrange)if(ve.rangebreaks){var Oe=ve._id.charAt(0)==="y",Me=Oe?1-ue:ue,Te=Oe?1-pe:pe;ge[ve._name+".range[0]"]=ve.l2r(ve.p2l(Me*ve._length)),ge[ve._name+".range[1]"]=ve.l2r(ve.p2l(Te*ve._length))}else{var se=ve._rl[0],oe=ve._rl[1]-se;ge[ve._name+".range[0]"]=ve.l2r(se+oe*ue),ge[ve._name+".range[1]"]=ve.l2r(se+oe*pe)}}if(_e&&_e.length){var he=(ue+(1-pe))/2;H(_e,he,1-he,ge,[])}}function N(ae,ue){for(var pe=0;pe<ae.length;pe++){var ge=ae[pe];if(!ge.fixedrange){if(ge.rangebreaks){var _e=ge._length,me=(ge.p2l(0+ue)-ge.p2l(0)+(ge.p2l(_e+ue)-ge.p2l(_e)))/2;ge.range=[ge.l2r(ge._rl[0]-me),ge.l2r(ge._rl[1]-me)]}else ge.range=[ge.l2r(ge._rl[0]-ue/ge._m),ge.l2r(ge._rl[1]-ue/ge._m)];ge.limitRange&&ge.limitRange()}}}function B(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function V(ae,ue,pe,ge,_e){return ae.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(pe,ge)).attr("d",_e+"Z")}function q(ae,ue,pe){return ae.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(ue,pe)).attr("d","M0,0Z")}function te(ae,ue,pe,ge,_e,me){ae.attr("d",ge+"M"+pe.l+","+pe.t+"v"+pe.h+"h"+pe.w+"v-"+pe.h+"h-"+pe.w+"Z"),K(ae,ue,_e,me)}function K(ae,ue,pe,ge){pe||(ae.transition().style("fill",ge>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function J(ae){M.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Y(ae){P&&ae.data&&ae._context.showTips&&(k.notifier(k._(ae,"Double-click to zoom back out"),"long"),P=!1)}function W(ae){var ue=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,C)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function Q(ae,ue,pe,ge,_e){for(var me,ve,Oe,Me,Te=!1,se={},oe={},he=(_e||{}).xaHash,Ee=(_e||{}).yaHash,ke=0;ke<ue.length;ke++){var be=ue[ke];for(me in pe)if(be[me]){for(Oe in be)_e&&(he[Oe]||Ee[Oe])||(Oe.charAt(0)==="x"?pe:ge)[Oe]||(se[Oe]=me);for(ve in ge)_e&&(he[ve]||Ee[ve])||!be[ve]||(Te=!0)}for(ve in ge)if(be[ve])for(Me in be)_e&&(he[Me]||Ee[Me])||(Me.charAt(0)==="x"?pe:ge)[Me]||(oe[Me]=ve)}Te&&(k.extendFlat(se,oe),oe={});var Ie={},Fe=[];for(Oe in se){var ce=m(ae,Oe);Fe.push(ce),Ie[ce._id]=ce}var we={},ye=[];for(Me in oe){var Ce=m(ae,Me);ye.push(Ce),we[Ce._id]=Ce}return{xaHash:Ie,yaHash:we,xaxes:Fe,yaxes:ye,xLinks:se,yLinks:oe,isSubplotConstrained:Te}}function ne(ae,ue){if(b){var pe=ae.onwheel!==void 0?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(pe,ae._onwheel),ae._onwheel=ue,ae.addEventListener(pe,ue,{passive:!1})}else ae.onwheel!==void 0?ae.onwheel=ue:ae.onmousewheel!==void 0?ae.onmousewheel=ue:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",ue,{passive:!1}))}function re(ae){var ue=[];for(var pe in ae)ue.push(ae[pe]);return ue}ee.exports={makeDragBox:function(ae,ue,pe,ge,_e,me,ve,Oe){var Me,Te,se,oe,he,Ee,ke,be,Ie,Fe,ce,we,ye,Ce,Re,ze,He,Ge,Je,ot,Qe,vt,xt,mt=ae._fullLayout._zoomlayer,rt=ve+Oe==="nsew",it=(ve+Oe).length===1;function Tt(){if(Me=ue.xaxis,Te=ue.yaxis,Ie=Me._length,Fe=Te._length,ke=Me._offset,be=Te._offset,(se={})[Me._id]=Me,(oe={})[Te._id]=Te,ve&&Oe)for(var qt=ue.overlays,nn=0;nn<qt.length;nn++){var Kt=qt[nn].xaxis;se[Kt._id]=Kt;var sn=qt[nn].yaxis;oe[sn._id]=sn}he=re(se),Ee=re(oe),ye=O(he,Oe),Ce=O(Ee,ve),Re=!Ce&&!ye,we=Q(ae,ae._fullLayout._axisMatchGroups,se,oe);var hn=(ce=Q(ae,ae._fullLayout._axisConstraintGroups,se,oe,we)).isSubplotConstrained||we.isSubplotConstrained;ze=Oe||hn,He=ve||hn;var bn=ae._fullLayout;Ge=bn._has("scattergl"),Je=bn._has("splom"),ot=bn._has("svg")}pe+=ue.yaxis._shift,Tt();var Mt=function(qt,nn,Kt){return qt?qt==="nsew"?Kt?"":nn==="pan"?"move":"crosshair":qt.toLowerCase()+"-resize":"pointer"}(Ce+ye,ae._fullLayout.dragmode,rt),Pt=G(ue,ve+Oe+"drag",Mt,pe,ge,_e,me);if(Re&&!rt)return Pt.onmousedown=null,Pt.style.pointerEvents="none",Pt;var kt,Ze,Xe,Ve,We,at,et,De,Be,nt,tt={element:Pt,gd:ae,plotinfo:ue};function dt(){tt.plotinfo.selection=!1,f(ae)}function ht(qt,nn){var Kt=tt.gd;if(Kt._fullLayout._activeShapeIndex>=0)Kt._fullLayout._deactivateShape(Kt);else{var sn=Kt._fullLayout.clickmode;if(J(Kt),qt!==2||it||jt(),rt)sn.indexOf("select")>-1&&S(nn,Kt,he,Ee,ue.id,tt),sn.indexOf("event")>-1&&n.click(Kt,nn,ue.id);else if(qt===1&&it){var hn=ve?Te:Me,bn=ve==="s"||Oe==="w"?0:1,yn=hn._name+".range["+bn+"]",Sn=function(Hn,Qn){var nr,Jn=Hn.range[Qn],Gn=Math.abs(Jn-Hn.range[1-Qn]);return Hn.type==="date"?Jn:Hn.type==="log"?(nr=Math.ceil(Math.max(0,-Math.log(Gn)/Math.LN10))+3,l("."+nr+"g")(Math.pow(10,Jn))):(nr=Math.floor(Math.log(Math.abs(Jn))/Math.LN10)-Math.floor(Math.log(Gn)/Math.LN10)+4,l("."+String(nr)+"g")(Jn))}(hn,bn),pn="left",Cn="middle";if(hn.fixedrange)return;ve?(Cn=ve==="n"?"top":"bottom",hn.side==="right"&&(pn="right")):Oe==="e"&&(pn="right"),Kt._context.showAxisRangeEntryBoxes&&M.select(Pt).call(t.makeEditable,{gd:Kt,immediate:!0,background:Kt._fullLayout.paper_bgcolor,text:String(Sn),fill:hn.tickfont?hn.tickfont.color:"#444",horizontalAlign:pn,verticalAlign:Cn}).on("edit",function(Hn){var Qn=hn.d2r(Hn);Qn!==void 0&&d.call("_guiRelayout",Kt,yn,Qn)})}}}function gt(qt,nn){if(ae._transitioningWithDuration)return!1;var Kt=Math.max(0,Math.min(Ie,vt*qt+kt)),sn=Math.max(0,Math.min(Fe,xt*nn+Ze)),hn=Math.abs(Kt-kt),bn=Math.abs(sn-Ze);function yn(){et="",Xe.r=Xe.l,Xe.t=Xe.b,Be.attr("d","M0,0Z")}if(Xe.l=Math.min(kt,Kt),Xe.r=Math.max(kt,Kt),Xe.t=Math.min(Ze,sn),Xe.b=Math.max(Ze,sn),ce.isSubplotConstrained)hn>C||bn>C?(et="xy",hn/Ie>bn/Fe?(bn=hn*Fe/Ie,Ze>sn?Xe.t=Ze-bn:Xe.b=Ze+bn):(hn=bn*Ie/Fe,kt>Kt?Xe.l=kt-hn:Xe.r=kt+hn),Be.attr("d",W(Xe))):yn();else if(we.isSubplotConstrained)if(hn>C||bn>C){et="xy";var Sn=Math.min(Xe.l/Ie,(Fe-Xe.b)/Fe),pn=Math.max(Xe.r/Ie,(Fe-Xe.t)/Fe);Xe.l=Sn*Ie,Xe.r=pn*Ie,Xe.b=(1-Sn)*Fe,Xe.t=(1-pn)*Fe,Be.attr("d",W(Xe))}else yn();else!Ce||bn<Math.min(Math.max(.6*hn,L),C)?hn<L||!ye?yn():(Xe.t=0,Xe.b=Fe,et="x",Be.attr("d",function(Cn,Hn){return"M"+(Cn.l-.5)+","+(Hn-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(Cn.r+.5)+","+(Hn-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(Xe,Ze))):!ye||hn<Math.min(.6*bn,C)?(Xe.l=0,Xe.r=Ie,et="y",Be.attr("d",function(Cn,Hn){return"M"+(Hn-C-.5)+","+(Cn.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(Hn-C-.5)+","+(Cn.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(Xe,kt))):(et="xy",Be.attr("d",W(Xe)));Xe.w=Xe.r-Xe.l,Xe.h=Xe.b-Xe.t,et&&(nt=!0),ae._dragged=nt,te(De,Be,Xe,We,at,Ve),ut(),ae.emit("plotly_relayouting",Qe),at=!0}function ut(){Qe={},et!=="xy"&&et!=="x"||(H(he,Xe.l/Ie,Xe.r/Ie,Qe,ce.xaxes),Nt("x",Qe)),et!=="xy"&&et!=="y"||(H(Ee,(Fe-Xe.b)/Fe,(Fe-Xe.t)/Fe,Qe,ce.yaxes),Nt("y",Qe))}function wt(){ut(),J(ae),Ut(),Y(ae)}tt.prepFn=function(qt,nn,Kt){var sn=tt.dragmode,hn=ae._fullLayout.dragmode;hn!==sn&&(tt.dragmode=hn),Tt(),vt=ae._fullLayout._invScaleX,xt=ae._fullLayout._invScaleY,Re||(rt?qt.shiftKey?hn==="pan"?hn="zoom":c(hn)||(hn="pan"):qt.ctrlKey&&(hn="pan"):hn="pan"),x(hn)?tt.minDrag=1:tt.minDrag=void 0,c(hn)?(tt.xaxes=he,tt.yaxes=Ee,_(qt,nn,Kt,tt,hn)):(tt.clickFn=ht,c(sn)&&dt(),Re||(hn==="zoom"?(tt.moveFn=gt,tt.doneFn=wt,tt.minDrag=1,function(bn,yn,Sn){var pn=Pt.getBoundingClientRect();kt=yn-pn.left,Ze=Sn-pn.top,ae._fullLayout._calcInverseTransform(ae);var Cn=k.apply3DTransform(ae._fullLayout._invTransform)(kt,Ze);kt=Cn[0],Ze=Cn[1],Xe={l:kt,r:kt,w:0,t:Ze,b:Ze,h:0},Ve=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:T(ae._fullLayout.plot_bgcolor).getLuminance(),at=!1,et="xy",nt=!1,De=V(mt,Ve,ke,be,We="M0,0H"+Ie+"V"+Fe+"H0V0"),Be=q(mt,ke,be)}(0,nn,Kt)):hn==="pan"&&(tt.moveFn=Dt,tt.doneFn=Ut))),ae._fullLayout._redrag=function(){var bn=ae._dragdata;if(bn&&bn.element===Pt){var yn=ae._fullLayout.dragmode;c(yn)||(Tt(),Xt([0,0,Ie,Fe]),tt.moveFn(bn.dx,bn.dy))}}},u.init(tt);var ct=[0,0,Ie,Fe],ft=null,bt=E.REDRAWDELAY,It=ue.mainplot?ae._fullLayout._plots[ue.mainplot]:ue;function Dt(qt,nn){if(qt*=vt,nn*=xt,!ae._transitioningWithDuration){if(ae._fullLayout._replotting=!0,ye==="ew"||Ce==="ns"){var Kt=ye?-qt:0,sn=Ce?-nn:0;if(we.isSubplotConstrained){if(ye&&Ce){var hn=(qt/Ie-nn/Fe)/2;Kt=-(qt=hn*Ie),sn=-(nn=-hn*Fe)}Ce?Kt=-sn*Ie/Fe:sn=-Kt*Fe/Ie}return ye&&(N(he,qt),Nt("x")),Ce&&(N(Ee,nn),Nt("y")),Xt([Kt,sn,Ie,Fe]),Qt(),void ae.emit("plotly_relayouting",Qe)}var bn,yn,Sn=ye==="w"==(Ce==="n")?1:-1;if(ye&&Ce&&(ce.isSubplotConstrained||we.isSubplotConstrained)){var pn=(qt/Ie+Sn*nn/Fe)/2;qt=pn*Ie,nn=Sn*pn*Fe}if(ye==="w"?qt=nr(he,0,qt):ye==="e"?qt=nr(he,1,-qt):ye||(qt=0),Ce==="n"?nn=nr(Ee,1,nn):Ce==="s"?nn=nr(Ee,0,-nn):Ce||(nn=0),bn=ye==="w"?qt:0,yn=Ce==="n"?nn:0,ce.isSubplotConstrained&&!we.isSubplotConstrained||we.isSubplotConstrained&&ye&&Ce&&Sn>0){var Cn;if(we.isSubplotConstrained||!ye&&Ce.length===1){for(Cn=0;Cn<he.length;Cn++)he[Cn].range=he[Cn]._r.slice(),w(he[Cn],1-nn/Fe);bn=(qt=nn*Ie/Fe)/2}if(we.isSubplotConstrained||!Ce&&ye.length===1){for(Cn=0;Cn<Ee.length;Cn++)Ee[Cn].range=Ee[Cn]._r.slice(),w(Ee[Cn],1-qt/Ie);yn=(nn=qt*Fe/Ie)/2}}we.isSubplotConstrained&&Ce||Nt("x"),we.isSubplotConstrained&&ye||Nt("y");var Hn=Ie-qt,Qn=Fe-nn;!we.isSubplotConstrained||ye&&Ce||(ye?(yn=bn?0:qt*Fe/Ie,Qn=Hn*Fe/Ie):(bn=yn?0:nn*Ie/Fe,Hn=Qn*Ie/Fe)),Xt([bn,yn,Hn,Qn]),Qt(),ae.emit("plotly_relayouting",Qe)}function nr(Jn,Gn,lr){for(var Rt,$t,an=1-Gn,fn=0;fn<Jn.length;fn++){var wn=Jn[fn];if(!wn.fixedrange){Rt=wn,$t=wn._rl[an]+(wn._rl[Gn]-wn._rl[an])/B(lr/wn._length);var Bn=wn.l2r($t);Bn!==!1&&Bn!==void 0&&(wn.range[Gn]=Bn)}}return Rt._length*(Rt._rl[Gn]-$t)/(Rt._rl[Gn]-Rt._rl[an])}}function Nt(qt,nn){for(var Kt=we.isSubplotConstrained?{x:Ee,y:he}[qt]:we[qt+"axes"],sn=we.isSubplotConstrained?{x:he,y:Ee}[qt]:[],hn=0;hn<Kt.length;hn++){var bn=Kt[hn],yn=bn._id,Sn=we.xLinks[yn]||we.yLinks[yn],pn=sn[0]||se[Sn]||oe[Sn];pn&&(nn?(nn[bn._name+".range[0]"]=nn[pn._name+".range[0]"],nn[bn._name+".range[1]"]=nn[pn._name+".range[1]"]):bn.range=pn.range.slice())}}function Qt(){var qt,nn=[];function Kt(yn){for(qt=0;qt<yn.length;qt++)yn[qt].fixedrange||nn.push(yn[qt]._id)}function sn(yn,Sn){for(qt=0;qt<yn.length;qt++){var pn=yn[qt],Cn=pn[Sn];pn.fixedrange||Cn.tickmode!=="sync"||nn.push(Cn._id)}}for(ze&&(Kt(he),Kt(ce.xaxes),Kt(we.xaxes),sn(ue.overlays,"xaxis")),He&&(Kt(Ee),Kt(ce.yaxes),Kt(we.yaxes),sn(ue.overlays,"yaxis")),Qe={},qt=0;qt<nn.length;qt++){var hn=nn[qt],bn=m(ae,hn);o.drawOne(ae,bn,{skipTitle:!0}),Qe[bn._name+".range[0]"]=bn.range[0],Qe[bn._name+".range[1]"]=bn.range[1]}o.redrawComponents(ae,nn)}function jt(){if(!ae._transitioningWithDuration){var qt=ae._context.doubleClick,nn=[];ye&&(nn=nn.concat(he)),Ce&&(nn=nn.concat(Ee)),we.xaxes&&(nn=nn.concat(we.xaxes)),we.yaxes&&(nn=nn.concat(we.yaxes));var Kt,sn,hn={};if(qt==="reset+autosize")for(qt="autosize",sn=0;sn<nn.length;sn++){var bn=(Kt=nn[sn])._rangeInitial0,yn=Kt._rangeInitial1,Sn=bn!==void 0||yn!==void 0;if(Sn&&(bn!==void 0&&bn!==Kt.range[0]||yn!==void 0&&yn!==Kt.range[1])||!Sn&&Kt.autorange!==!0){qt="reset";break}}if(qt==="autosize")for(sn=0;sn<nn.length;sn++)(Kt=nn[sn]).fixedrange||(hn[Kt._name+".autorange"]=!0);else if(qt==="reset"){for((ye||ce.isSubplotConstrained)&&(nn=nn.concat(ce.xaxes)),Ce&&!ce.isSubplotConstrained&&(nn=nn.concat(ce.yaxes)),ce.isSubplotConstrained&&(ye?Ce||(nn=nn.concat(Ee)):nn=nn.concat(he)),sn=0;sn<nn.length;sn++)if(!(Kt=nn[sn]).fixedrange){var pn=Kt._name,Cn=Kt._autorangeInitial;Kt._rangeInitial0===void 0&&Kt._rangeInitial1===void 0?hn[pn+".autorange"]=!0:Kt._rangeInitial0===void 0?(hn[pn+".autorange"]=Cn,hn[pn+".range"]=[null,Kt._rangeInitial1]):Kt._rangeInitial1===void 0?(hn[pn+".range"]=[Kt._rangeInitial0,null],hn[pn+".autorange"]=Cn):hn[pn+".range"]=[Kt._rangeInitial0,Kt._rangeInitial1]}}ae.emit("plotly_doubleclick",null),d.call("_guiRelayout",ae,hn)}}function Ut(){Xt([0,0,Ie,Fe]),k.syncOrAsync([v.previousPromises,function(){ae._fullLayout._replotting=!1,d.call("_guiRelayout",ae,Qe)}],ae)}function Xt(qt){var nn,Kt,sn,hn,bn=ae._fullLayout,yn=bn._plots,Sn=bn._subplots.cartesian;if(Je&&d.subplotsRegistry.splom.drag(ae),Ge){for(nn=0;nn<Sn.length;nn++)if(sn=(Kt=yn[Sn[nn]]).xaxis,hn=Kt.yaxis,Kt._scene){var pn=k.simpleMap(sn.range,sn.r2l),Cn=k.simpleMap(hn.range,hn.r2l);sn.limitRange&&sn.limitRange(),hn.limitRange&&hn.limitRange(),pn=sn.range,Cn=hn.range,Kt._scene.update({range:[pn[0],Cn[0],pn[1],Cn[1]]})}}if((Je||Ge)&&(h(ae),y(ae)),ot){var Hn=qt[2]/Me._length,Qn=qt[3]/Te._length;for(nn=0;nn<Sn.length;nn++){sn=(Kt=yn[Sn[nn]]).xaxis,hn=Kt.yaxis;var nr,Jn,Gn,lr,Rt=(ze||we.isSubplotConstrained)&&!sn.fixedrange&&se[sn._id],$t=(He||we.isSubplotConstrained)&&!hn.fixedrange&&oe[hn._id];if(Rt?(nr=Hn,Gn=Oe||we.isSubplotConstrained?qt[0]:cn(sn,nr)):we.xaHash[sn._id]?(nr=Hn,Gn=qt[0]*sn._length/Me._length):we.yaHash[sn._id]?(nr=Qn,Gn=Ce==="ns"?-qt[1]*sn._length/Te._length:cn(sn,nr,{n:"top",s:"bottom"}[Ce])):Gn=Mn(sn,nr=gn(sn,Hn,Qn)),nr>1&&(sn.maxallowed!==void 0&&ze===(sn.range[0]<sn.range[1]?"e":"w")||sn.minallowed!==void 0&&ze===(sn.range[0]<sn.range[1]?"w":"e"))&&(nr=1,Gn=0),$t?(Jn=Qn,lr=ve||we.isSubplotConstrained?qt[1]:cn(hn,Jn)):we.yaHash[hn._id]?(Jn=Qn,lr=qt[1]*hn._length/Te._length):we.xaHash[hn._id]?(Jn=Hn,lr=ye==="ew"?-qt[0]*hn._length/Me._length:cn(hn,Jn,{e:"right",w:"left"}[ye])):lr=Mn(hn,Jn=gn(hn,Hn,Qn)),Jn>1&&(hn.maxallowed!==void 0&&He===(hn.range[0]<hn.range[1]?"n":"s")||hn.minallowed!==void 0&&He===(hn.range[0]<hn.range[1]?"s":"n"))&&(Jn=1,lr=0),nr||Jn){nr||(nr=1),Jn||(Jn=1);var an=sn._offset-Gn/nr,fn=hn._offset-lr/Jn;Kt.clipRect.call(r.setTranslate,Gn,lr).call(r.setScale,nr,Jn),Kt.plot.call(r.setTranslate,an,fn).call(r.setScale,1/nr,1/Jn),nr===Kt.xScaleFactor&&Jn===Kt.yScaleFactor||(r.setPointGroupScale(Kt.zoomScalePts,nr,Jn),r.setTextPointsScale(Kt.zoomScaleTxt,nr,Jn)),r.hideOutsideRangePoints(Kt.clipOnAxisFalseTraces,Kt),Kt.xScaleFactor=nr,Kt.yScaleFactor=Jn}}}}function gn(qt,nn,Kt){return qt.fixedrange?0:ze&&ce.xaHash[qt._id]?nn:He&&(ce.isSubplotConstrained?ce.xaHash:ce.yaHash)[qt._id]?Kt:0}function Mn(qt,nn){return nn?(qt.range=qt._r.slice(),w(qt,nn),cn(qt,nn)):0}function cn(qt,nn,Kt){return qt._length*(1-nn)*g[Kt||qt.constraintoward||"middle"]}return ve.length*Oe.length!=1&&ne(Pt,function(qt){if(ae._context._scrollZoom.cartesian||ae._fullLayout._enablescrollzoom){if(dt(),ae._transitioningWithDuration)return qt.preventDefault(),void qt.stopPropagation();Tt(),clearTimeout(ft);var nn=-qt.deltaY;if(isFinite(nn)||(nn=qt.wheelDelta/10),isFinite(nn)){var Kt,sn=Math.exp(-Math.min(Math.max(nn,-20),20)/200),hn=It.draglayer.select(".nsewdrag").node().getBoundingClientRect(),bn=(qt.clientX-hn.left)/hn.width,yn=(hn.bottom-qt.clientY)/hn.height;if(ze){for(Oe||(bn=.5),Kt=0;Kt<he.length;Kt++)Sn(he[Kt],bn,sn);Nt("x"),ct[2]*=sn,ct[0]+=ct[2]*bn*(1/sn-1)}if(He){for(ve||(yn=.5),Kt=0;Kt<Ee.length;Kt++)Sn(Ee[Kt],yn,sn);Nt("y"),ct[3]*=sn,ct[1]+=ct[3]*(1-yn)*(1/sn-1)}Xt(ct),Qt(),ae.emit("plotly_relayouting",Qe),ft=setTimeout(function(){ae._fullLayout&&(ct=[0,0,Ie,Fe],Ut())},bt),qt.preventDefault()}else k.log("Did not find wheel motion attributes: ",qt)}function Sn(pn,Cn,Hn){if(!pn.fixedrange){var Qn=k.simpleMap(pn.range,pn.r2l),nr=Qn[0]+(Qn[1]-Qn[0])*Cn;pn.range=Qn.map(function(Jn){return pn.l2r(nr+(Jn-nr)*Hn)})}}}),Pt},makeDragger:z,makeRectDragger:G,makeZoombox:V,makeCorners:q,updateZoombox:te,xyCorners:W,transitionZoombox:K,removeZoombox:J,showDoubleClickNotifier:Y,attachWheelEventHandler:ne}},4305:function(ee,D,e){var M=e(39898),k=e(30211),l=e(28569),T=e(6964),b=e(29323).makeDragBox,d=e(85555).DRAGGERSIZE;D.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)M.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,n){if((t._plots[r].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var o=r.split("y"),a=n.split("y");return o[0]===a[0]?Number(o[1]||1)-Number(a[1]||1):Number(o[0]||1)-Number(a[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var n=t._plots[r],o=n.xaxis,a=n.yaxis;if(!n.mainplot){var u=b(s,n,o._offset,a._offset,o._length,a._length,"ns","ew");u.onmousemove=function(x){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&k.hover(s,x,r)},k.hover(s,x,r),s._fullLayout._lasthover=u,s._fullLayout._hoversubplot=r},u.onmouseout=function(x){s._dragging||(s._fullLayout._hoversubplot=null,l.unhover(s,x))},s._context.showAxisDragHandles&&(b(s,n,o._offset-d,a._offset-d,d,d,"n","w"),b(s,n,o._offset+o._length,a._offset-d,d,d,"n","e"),b(s,n,o._offset-d,a._offset+a._length,d,d,"s","w"),b(s,n,o._offset+o._length,a._offset+a._length,d,d,"s","e"))}if(s._context.showAxisDragHandles){if(r===o._mainSubplot){var p=o._mainLinePosition;o.side==="top"&&(p-=d),b(s,n,o._offset+.1*o._length,p,.8*o._length,d,"","ew"),b(s,n,o._offset,p,.1*o._length,d,"","w"),b(s,n,o._offset+.9*o._length,p,.1*o._length,d,"","e")}if(r===a._mainSubplot){var c=a._mainLinePosition;a.side!=="right"&&(c-=d),b(s,n,c,a._offset+.1*a._length,d,.8*a._length,"ns",""),b(s,n,c,a._offset+.9*a._length,d,.1*a._length,"s",""),b(s,n,c,a._offset,d,.1*a._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(r){r.target=s._fullLayout._lasthover,k.hover(s,r,t._hoversubplot)},i.onclick=function(r){r.target=s._fullLayout._lasthover,k.click(s,r)},i.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},D.updateFx(s)}},D.updateFx=function(s){var t=s._fullLayout,i=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,i)}},76325:function(ee,D,e){var M=e(73972),k=e(71828),l=e(41675);ee.exports=function(T){return function(b,d){var s=b[T];if(Array.isArray(s))for(var t=M.subplotsRegistry.cartesian,i=t.idRegex,r=d._subplots,n=r.xaxis,o=r.yaxis,a=r.cartesian,u=d._has("cartesian")||d._has("gl2d"),p=0;p<s.length;p++){var c=s[p];if(k.isPlainObject(c)){var x=l.cleanId(c.xref,"x",!1),g=l.cleanId(c.yref,"y",!1),h=i.x.test(x),y=i.y.test(g);if(h||y){u||k.pushUnique(d._basePlotModules,t);var v=!1;h&&n.indexOf(x)===-1&&(n.push(x),v=!0),y&&o.indexOf(g)===-1&&(o.push(g),v=!0),v&&h&&y&&a.push(x+g)}}}}}},93612:function(ee,D,e){var M=e(39898),k=e(73972),l=e(71828),T=e(74875),b=e(91424),d=e(27659).a0,s=e(41675),t=e(85555),i=e(77922),r=l.ensureSingle;function n(c,x,g){return l.ensureSingle(c,x,g,function(h){h.datum(g)})}function o(c,x,g,h,y){for(var v,m,_,f=t.traceLayerClasses,S=c._fullLayout,w=S._modules,E=[],L=[],C=0;C<w.length;C++){var P=(v=w[C]).name,z=k.modules[P].categories;if(z.svg){var G=v.layerName||P+"layer",O=v.plot;_=(m=d(g,O))[0],g=m[1],_.length&&E.push({i:f.indexOf(G),className:G,plotMethod:O,cdModule:_}),z.zoomScale&&L.push("."+G)}}E.sort(function(B,V){return B.i-V.i});var H=x.plot.selectAll("g.mlayer").data(E,function(B){return B.className});if(H.enter().append("g").attr("class",function(B){return B.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),H.exit().remove(),H.order(),H.each(function(B){var V=M.select(this),q=B.className;B.plotMethod(c,x,B.cdModule,V,h,y),t.clipOnAxisFalseQuery.indexOf("."+q)===-1&&b.setClipUrl(V,x.layerClipId,c)}),S._has("scattergl")&&(v=k.getModule("scattergl"),_=d(g,v)[0],v.plot(c,x,_)),!c._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var N=x.plot.selectAll(L.join(",")).selectAll(".trace");x.zoomScalePts=N.selectAll("path.point"),x.zoomScaleTxt=N.selectAll(".textpoint")}}function a(c,x){var g=x.plotgroup,h=x.id,y=t.layerValue2layerClass[x.xaxis.layer],v=t.layerValue2layerClass[x.yaxis.layer],m=c._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var _=x.mainplotinfo,f=_.plotgroup,S=h+"-x",w=h+"-y";x.minorGridlayer=_.minorGridlayer,x.gridlayer=_.gridlayer,x.zerolinelayer=_.zerolinelayer,r(_.overlinesBelow,"path",S),r(_.overlinesBelow,"path",w),r(_.overaxesBelow,"g",S),r(_.overaxesBelow,"g",w),x.plot=r(_.overplot,"g",h),r(_.overlinesAbove,"path",S),r(_.overlinesAbove,"path",w),r(_.overaxesAbove,"g",S),r(_.overaxesAbove,"g",w),x.xlines=f.select(".overlines-"+y).select("."+S),x.ylines=f.select(".overlines-"+v).select("."+w),x.xaxislayer=f.select(".overaxes-"+y).select("."+S),x.yaxislayer=f.select(".overaxes-"+v).select("."+w)}else if(m)x.xlines=r(g,"path","xlines-above"),x.ylines=r(g,"path","ylines-above"),x.xaxislayer=r(g,"g","xaxislayer-above"),x.yaxislayer=r(g,"g","yaxislayer-above");else{var E=r(g,"g","layer-subplot");x.shapelayer=r(E,"g","shapelayer"),x.imagelayer=r(E,"g","imagelayer"),x.minorGridlayer=r(g,"g","minor-gridlayer"),x.gridlayer=r(g,"g","gridlayer"),x.zerolinelayer=r(g,"g","zerolinelayer"),r(g,"path","xlines-below"),r(g,"path","ylines-below"),x.overlinesBelow=r(g,"g","overlines-below"),r(g,"g","xaxislayer-below"),r(g,"g","yaxislayer-below"),x.overaxesBelow=r(g,"g","overaxes-below"),x.plot=r(g,"g","plot"),x.overplot=r(g,"g","overplot"),x.xlines=r(g,"path","xlines-above"),x.ylines=r(g,"path","ylines-above"),x.overlinesAbove=r(g,"g","overlines-above"),r(g,"g","xaxislayer-above"),r(g,"g","yaxislayer-above"),x.overaxesAbove=r(g,"g","overaxes-above"),x.xlines=g.select(".xlines-"+y),x.ylines=g.select(".ylines-"+v),x.xaxislayer=g.select(".xaxislayer-"+y),x.yaxislayer=g.select(".yaxislayer-"+v)}m||(n(x.minorGridlayer,"g",x.xaxis._id),n(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort),n(x.gridlayer,"g",x.xaxis._id),n(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function u(c,x){if(c){var g={};for(var h in c.each(function(_){var f=_[0];M.select(this).remove(),p(f,x),g[f]=!0}),x._plots)for(var y=x._plots[h].overlays||[],v=0;v<y.length;v++){var m=y[v];g[m.id]&&m.plot.selectAll(".trace").remove()}}}function p(c,x){x._draggers.selectAll("g."+c).remove(),x._defs.select("#clip"+x._uid+c+"plot").remove()}D.name="cartesian",D.attr=["xaxis","yaxis"],D.idRoot=["x","y"],D.idRegex=t.idRegex,D.attrRegex=t.attrRegex,D.attributes=e(89502),D.layoutAttributes=e(13838),D.supplyLayoutDefaults=e(86763),D.transitionAxes=e(66847),D.finalizeSubplots=function(c,x){var g,h,y,v=x._subplots,m=v.xaxis,_=v.yaxis,f=v.cartesian,S=f.concat(v.gl2d||[]),w={},E={};for(g=0;g<S.length;g++){var L=S[g].split("y");w[L[0]]=1,E["y"+L[1]]=1}for(g=0;g<m.length;g++)w[h=m[g]]||(y=(c[s.id2name(h)]||{}).anchor,t.idRegex.y.test(y)||(y="y"),f.push(h+y),S.push(h+y),E[y]||(E[y]=1,l.pushUnique(_,y)));for(g=0;g<_.length;g++)E[y=_[g]]||(h=(c[s.id2name(y)]||{}).anchor,t.idRegex.x.test(h)||(h="x"),f.push(h+y),S.push(h+y),w[h]||(w[h]=1,l.pushUnique(m,h)));if(!S.length){for(var C in h="",y="",c)t.attrRegex.test(C)&&(C.charAt(0)==="x"?(!h||+C.substr(5)<+h.substr(5))&&(h=C):(!y||+C.substr(5)<+y.substr(5))&&(y=C));h=h?s.name2id(h):"x",y=y?s.name2id(y):"y",m.push(h),_.push(y),f.push(h+y)}},D.plot=function(c,x,g,h){var y,v=c._fullLayout,m=v._subplots.cartesian,_=c.calcdata;if(!Array.isArray(x))for(x=[],y=0;y<_.length;y++)x.push(y);for(y=0;y<m.length;y++){for(var f,S=m[y],w=v._plots[S],E=[],L=0;L<_.length;L++){var C=_[L],P=C[0].trace;P.xaxis+P.yaxis===S&&((x.indexOf(P.index)!==-1||P.carpet)&&(f&&f[0].trace.xaxis+f[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(P.fill)!==-1&&E.indexOf(f)===-1&&E.push(f),E.push(C)),f=C)}o(c,w,E,g,h)}},D.clean=function(c,x,g,h){var y,v,m,_=h._plots||{},f=x._plots||{},S=h._subplots||{};if(h._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(m in _)(y=_[m]).plotgroup&&y.plotgroup.remove();var w=h._has&&h._has("gl"),E=x._has&&x._has("gl");if(w&&!E)for(m in _)(y=_[m])._scene&&y._scene.destroy();if(S.xaxis&&S.yaxis){var L=s.listIds({_fullLayout:h});for(v=0;v<L.length;v++){var C=L[v];x[s.id2name(C)]||h._infolayer.selectAll(".g-"+C+"title").remove()}}var P=h._has&&h._has("cartesian"),z=x._has&&x._has("cartesian");if(P&&!z)u(h._cartesianlayer.selectAll(".subplot"),h),h._defs.selectAll(".axesclip").remove(),delete h._axisConstraintGroups,delete h._axisMatchGroups;else if(S.cartesian)for(v=0;v<S.cartesian.length;v++){var G=S.cartesian[v];if(!f[G]){var O="."+G+",."+G+"-x,."+G+"-y";h._cartesianlayer.selectAll(O).remove(),p(G,h)}}},D.drawFramework=function(c){var x=c._fullLayout,g=function(y){var v,m,_,f,S,w,E=y._fullLayout,L=E._subplots.cartesian,C=L.length,P=[],z=[];for(v=0;v<C;v++){_=L[v],S=(f=E._plots[_]).xaxis,w=f.yaxis;var G=S._mainAxis,O=w._mainAxis,H=G._id+O._id,N=E._plots[H];f.overlays=[],H!==_&&N?(f.mainplot=H,f.mainplotinfo=N,z.push(_)):(f.mainplot=void 0,f.mainplotinfo=void 0,P.push(_))}for(v=0;v<z.length;v++)_=z[v],(f=E._plots[_]).mainplotinfo.overlays.push(f);var B=P.concat(z),V=new Array(C);for(v=0;v<C;v++){_=B[v],S=(f=E._plots[_]).xaxis,w=f.yaxis;var q=[_,S.layer,w.layer,S.overlaying||"",w.overlaying||""];for(m=0;m<f.overlays.length;m++)q.push(f.overlays[m].id);V[v]=q}return V}(c),h=x._cartesianlayer.selectAll(".subplot").data(g,String);h.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),h.order(),h.exit().call(u,x),h.each(function(y){var v=y[0],m=x._plots[v];m.plotgroup=M.select(this),a(c,m),m.draglayer=r(x._draggers,"g",v)})},D.rangePlot=function(c,x,g){a(c,x),o(c,x,g),T.style(c)},D.toSVG=function(c){var x=c._fullLayout._glimages,g=M.select(c).selectAll(".svg-container");g.filter(function(h,y){return y===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var h=this,y=h.toDataURL("image/png");x.append("svg:image").attr({xmlns:i.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:h.style.width,height:h.style.height})})},D.updateFx=e(4305).updateFx},13838:function(ee,D,e){var M=e(41940),k=e(22399),l=e(79952).P,T=e(1426).extendFlat,b=e(44467).templatedArray,d=e(12663).descriptionWithDates,s=e(50606).ONEDAY,t=e(85555),i=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},o=T({},n,{values:n.values.slice().concat(["sync"])});function a(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function g(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=5),w}function h(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var y={valType:"color",dflt:k.defaultLine,editType:"ticks"},v={valType:"color",dflt:k.lightLine,editType:"ticks"};function m(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var _=T({},l,{editType:"ticks"}),f={valType:"boolean",editType:"ticks"};ee.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:o,nticks:a(),tick0:u,dtick:p,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:g(),tickwidth:h(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},l,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:d("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:d("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:f,gridcolor:v,gridwidth:m(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:a("minor"),tick0:u,dtick:p,tickvals:c,ticks:x,ticklen:g("minor"),tickwidth:h("minor"),tickcolor:y,gridcolor:v,gridwidth:m("minor"),griddash:_,showgrid:f,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},86763:function(ee,D,e){var M=e(71828),k=e(7901),l=e(23469).isUnifiedHover,T=e(98212),b=e(44467),d=e(10820),s=e(13838),t=e(951),i=e(71453),r=e(99082),n=e(52830),o=e(41675),a=o.id2name,u=o.name2id,p=e(85555).AX_ID_PATTERN,c=e(73972),x=c.traceIs,g=c.getComponentMethod;function h(y,v,m){Array.isArray(y[v])?y[v].push(m):y[v]=[m]}ee.exports=function(y,v,m){var _,f,S=v.autotypenumbers,w={},E={},L={},C={},P={},z={},G={},O={},H={},N={};for(_=0;_<m.length;_++){var B=m[_];if(x(B,"cartesian")||x(B,"gl2d")){var V,q;if(B.xaxis)V=a(B.xaxis),h(w,V,B);else if(B.xaxes)for(f=0;f<B.xaxes.length;f++)h(w,a(B.xaxes[f]),B);if(B.yaxis)q=a(B.yaxis),h(w,q,B);else if(B.yaxes)for(f=0;f<B.yaxes.length;f++)h(w,a(B.yaxes[f]),B);B.type==="funnel"?B.orientation==="h"?(V&&(E[V]=!0),q&&(G[q]=!0)):q&&(L[q]=!0):B.type==="image"?(q&&(O[q]=!0),V&&(O[V]=!0)):(q&&(P[q]=!0,z[q]=!0),x(B,"carpet")&&(B.type!=="carpet"||B._cheater)||V&&(C[V]=!0)),B.type==="carpet"&&B._cheater&&V&&(E[V]=!0),x(B,"2dMap")&&(H[V]=!0,H[q]=!0),x(B,"oriented")&&(N[B.orientation==="h"?q:V]=!0)}}var te=v._subplots,K=te.xaxis,J=te.yaxis,Y=M.simpleMap(K,a),W=M.simpleMap(J,a),Q=Y.concat(W),ne=k.background;K.length&&J.length&&(ne=M.coerce(y,v,d,"plot_bgcolor"));var re,ae,ue,pe,ge,_e=k.combine(ne,v.paper_bgcolor);function me(){var it=w[re]||[];ge._traceIndices=it.map(function(Tt){return Tt._expandedIndex}),ge._annIndices=[],ge._shapeIndices=[],ge._selectionIndices=[],ge._imgIndices=[],ge._subplotsWith=[],ge._counterAxes=[],ge._name=ge._attr=re,ge._id=ae}function ve(it,Tt){return M.coerce(pe,ge,s,it,Tt)}function Oe(it,Tt){return M.coerce2(pe,ge,s,it,Tt)}function Me(it){return it==="x"?J:K}function Te(it,Tt){for(var Mt=it==="x"?Y:W,Pt=[],kt=0;kt<Mt.length;kt++){var Ze=Mt[kt];Ze===Tt||(y[Ze]||{}).overlaying||Pt.push(u(Ze))}return Pt}var se={x:Me("x"),y:Me("y")},oe=se.x.concat(se.y),he={},Ee=[];function ke(){var it=pe.matches;p.test(it)&&oe.indexOf(it)===-1&&(he[it]=pe.type,Ee=Object.keys(he))}var be=T(y,v),Ie=l(be);for(_=0;_<Q.length;_++){re=Q[_],ae=u(re),ue=re.charAt(0),M.isPlainObject(y[re])||(y[re]={}),pe=y[re],ge=b.newContainer(v,re,ue+"axis"),me();var Fe=ue==="x"&&!C[re]&&E[re]||ue==="y"&&!P[re]&&L[re],ce=ue==="y"&&(!z[re]&&G[re]||O[re]),we={hasMinor:!0,letter:ue,font:v.font,outerTicks:H[re],showGrid:!N[re],data:w[re]||[],bgColor:_e,calendar:v.calendar,automargin:!0,visibleDflt:Fe,reverseDflt:ce,autotypenumbersDflt:S,splomStash:((v._splomAxes||{})[ue]||{})[ae]};ve("uirevision",v.uirevision),t(pe,ge,ve,we),i(pe,ge,ve,we,v);var ye=Ie&&ue===be.charAt(0),Ce=Oe("spikecolor",Ie?ge.color:void 0),Re=Oe("spikethickness",Ie?1.5:void 0),ze=Oe("spikedash",Ie?"dot":void 0),He=Oe("spikemode",Ie?"across":void 0),Ge=Oe("spikesnap");ve("showspikes",!!(ye||Ce||Re||ze||He||Ge))||(delete ge.spikecolor,delete ge.spikethickness,delete ge.spikedash,delete ge.spikemode,delete ge.spikesnap);var Je=a(pe.overlaying),ot=[0,1];if(v[Je]!==void 0){var Qe=a(v[Je].anchor);v[Qe]!==void 0&&(ot=v[Qe].domain)}n(pe,ge,ve,{letter:ue,counterAxes:se[ue],overlayableAxes:Te(ue,re),grid:v.grid,overlayingDomain:ot}),ve("title.standoff"),ke(),ge._input=pe}for(_=0;_<Ee.length;){ae=Ee[_++],ue=(re=a(ae)).charAt(0),M.isPlainObject(y[re])||(y[re]={}),pe=y[re],ge=b.newContainer(v,re,ue+"axis"),me();var vt={letter:ue,font:v.font,outerTicks:H[re],showGrid:!N[re],data:[],bgColor:_e,calendar:v.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((v._splomAxes||{})[ue]||{})[ae]};ve("uirevision",v.uirevision),ge.type=he[ae]||"linear",i(pe,ge,ve,vt,v),n(pe,ge,ve,{letter:ue,counterAxes:se[ue],overlayableAxes:Te(ue,re),grid:v.grid}),ve("fixedrange"),ke(),ge._input=pe}var xt=g("rangeslider","handleDefaults"),mt=g("rangeselector","handleDefaults");for(_=0;_<Y.length;_++)re=Y[_],pe=y[re],ge=v[re],xt(y,v,re),ge.type==="date"&&mt(pe,ge,v,W,ge.calendar),ve("fixedrange");for(_=0;_<W.length;_++){re=W[_],pe=y[re],ge=v[re];var rt=v[a(ge.anchor)];ve("fixedrange",g("rangeslider","isVisible")(rt))}r.handleDefaults(y,v,{axIds:oe.concat(Ee).sort(o.idSort),axHasImage:O})}},92128:function(ee,D,e){var M=e(84267).mix,k=e(22399),l=e(71828);ee.exports=function(T,b,d,s){var t=(s=s||{}).dfltColor;function i(y,v){return l.coerce2(T,b,s.attributes,y,v)}var r=i("linecolor",t),n=i("linewidth");d("showline",s.showLine||!!r||!!n)||(delete b.linecolor,delete b.linewidth);var o=i("gridcolor",M(t,s.bgColor,s.blend||k.lightFraction).toRgbString()),a=i("gridwidth"),u=i("griddash");if(d("showgrid",s.showGrid||!!o||!!a||!!u)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),s.hasMinor){var p=i("minor.gridcolor",M(b.gridcolor,s.bgColor,67).toRgbString()),c=i("minor.gridwidth",b.gridwidth||1),x=i("minor.griddash",b.griddash||"solid");d("minor.showgrid",!!p||!!c||!!x)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!s.noZeroLine){var g=i("zerolinecolor",t),h=i("zerolinewidth");d("zeroline",s.showGrid||!!g||!!h)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},52830:function(ee,D,e){var M=e(92770),k=e(71828);ee.exports=function(l,T,b,d){var s,t,i,r,n,o,a=d.counterAxes||[],u=d.overlayableAxes||[],p=d.letter,c=d.grid,x=d.overlayingDomain;c&&(t=c._domains[p][c._axisMap[T._id]],s=c._anchors[T._id],t&&(i=c[p+"side"].split(" ")[0],r=c.domain[p][i==="right"||i==="top"?1:0])),t=t||[0,1],s=s||(M(l.position)?"free":a[0]||"free"),i=i||(p==="x"?"bottom":"left"),r=r||0,n=0,o=!1;var g=k.coerce(l,T,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:s}},"anchor"),h=k.coerce(l,T,{side:{valType:"enumerated",values:p==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");g==="free"&&(p==="y"&&(b("autoshift")&&(r=h==="left"?x[0]:x[1],o=!T.automargin||T.automargin,n=h==="left"?-3:3),b("shift",n)),b("position",r)),b("automargin",o);var y=!1;if(u.length&&(y=k.coerce(l,T,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!y){var v=b("domain",t);v[0]>v[1]-.000244140625&&(T.domain=t),k.noneOrAll(l.domain,T.domain,t),T.tickmode==="sync"&&(T.tickmode="auto")}return b("layer"),T}},89426:function(ee,D,e){var M=e(59652);ee.exports=function(k,l,T,b,d){d||(d={});var s=d.tickSuffixDflt,t=M(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},23608:function(ee,D,e){var M=e(23074);ee.exports=function(k,l,T,b){var d=l._template||{},s=l.type||d.type||"-";T("minallowed"),T("maxallowed");var t,i=T("range");i||b.noInsiderange||s==="log"||(!(t=T("insiderange"))||t[0]!==null&&t[1]!==null||(l.insiderange=!1,t=void 0),t&&(i=T("range",t)));var r,n=l.getAutorangeDflt(i,b),o=T("autorange",n);!i||(i[0]!==null||i[1]!==null)&&(i[0]!==null&&i[1]!==null||o!=="reversed"&&o!==!0)&&(i[0]===null||o!=="min"&&o!=="max reversed")&&(i[1]===null||o!=="max"&&o!=="min reversed")||(i=void 0,delete l.range,l.autorange=!0,r=!0),r||(o=T("autorange",n=l.getAutorangeDflt(i,b))),o&&(M(T,o,i),s!=="linear"&&s!=="-"||T("rangemode")),l.cleanRange()}},42449:function(ee,D,e){var M=e(18783).FROM_BL;ee.exports=function(k,l,T){T===void 0&&(T=M[k.constraintoward||"center"]);var b=[k.r2l(k.range[0]),k.r2l(k.range[1])],d=b[0]+(b[1]-b[0])*T;k.range=k._input.range=[k.l2r(d+(b[0]-d)*l),k.l2r(d+(b[1]-d)*l)],k.setScale()}},21994:function(ee,D,e){var M=e(39898),k=e(84096).g0,l=e(71828),T=l.numberFormat,b=e(92770),d=l.cleanNumber,s=l.ms2DateTime,t=l.dateTime2ms,i=l.ensureNumber,r=l.isArrayOrTypedArray,n=e(50606),o=n.FP_SAFE,a=n.BADNUM,u=n.LOG_CLIP,p=n.ONEWEEK,c=n.ONEDAY,x=n.ONEHOUR,g=n.ONEMIN,h=n.ONESEC,y=e(41675),v=e(85555),m=v.HOUR_PATTERN,_=v.WEEKDAY_PATTERN;function f(w){return Math.pow(10,w)}function S(w){return w!=null}ee.exports=function(w,E){E=E||{};var L=w._id||"x",C=L.charAt(0);function P(Q,ne){if(Q>0)return Math.log(Q)/Math.LN10;if(Q<=0&&ne&&w.range&&w.range.length===2){var re=w.range[0],ae=w.range[1];return .5*(re+ae-2*u*Math.abs(re-ae))}return a}function z(Q,ne,re,ae){if((ae||{}).msUTC&&b(Q))return+Q;var ue=t(Q,re||w.calendar);if(ue===a){if(!b(Q))return a;Q=+Q;var pe=Math.floor(10*l.mod(Q+.05,1)),ge=Math.round(Q-pe/10);ue=t(new Date(ge))+pe/10}return ue}function G(Q,ne,re){return s(Q,ne,re||w.calendar)}function O(Q){return w._categories[Math.round(Q)]}function H(Q){if(S(Q)){if(w._categoriesMap===void 0&&(w._categoriesMap={}),w._categoriesMap[Q]!==void 0)return w._categoriesMap[Q];w._categories.push(typeof Q=="number"?String(Q):Q);var ne=w._categories.length-1;return w._categoriesMap[Q]=ne,ne}return a}function N(Q){if(w._categoriesMap)return w._categoriesMap[Q]}function B(Q){var ne=N(Q);return ne!==void 0?ne:b(Q)?+Q:void 0}function V(Q){return b(Q)?+Q:N(Q)}function q(Q,ne,re){return M.round(re+ne*Q,2)}function te(Q,ne,re){return(Q-re)/ne}var K=function(Q){return b(Q)?q(Q,w._m,w._b):a},J=function(Q){return te(Q,w._m,w._b)};if(w.rangebreaks){var Y=C==="y";K=function(Q){if(!b(Q))return a;var ne=w._rangebreaks.length;if(!ne)return q(Q,w._m,w._b);var re=Y;w.range[0]>w.range[1]&&(re=!re);for(var ae=re?-1:1,ue=ae*Q,pe=0,ge=0;ge<ne;ge++){var _e=ae*w._rangebreaks[ge].min,me=ae*w._rangebreaks[ge].max;if(ue<_e)break;if(!(ue>me)){pe=ue<(_e+me)/2?ge:ge+1;break}pe=ge+1}var ve=w._B[pe]||0;return isFinite(ve)?q(Q,w._m2,ve):0},J=function(Q){var ne=w._rangebreaks.length;if(!ne)return te(Q,w._m,w._b);for(var re=0,ae=0;ae<ne&&!(Q<w._rangebreaks[ae].pmin);ae++)Q>w._rangebreaks[ae].pmax&&(re=ae+1);return te(Q,w._m2,w._B[re])}}w.c2l=w.type==="log"?P:i,w.l2c=w.type==="log"?f:i,w.l2p=K,w.p2l=J,w.c2p=w.type==="log"?function(Q,ne){return K(P(Q,ne))}:K,w.p2c=w.type==="log"?function(Q){return f(J(Q))}:J,["linear","-"].indexOf(w.type)!==-1?(w.d2r=w.r2d=w.d2c=w.r2c=w.d2l=w.r2l=d,w.c2d=w.c2r=w.l2d=w.l2r=i,w.d2p=w.r2p=function(Q){return w.l2p(d(Q))},w.p2d=w.p2r=J,w.cleanPos=i):w.type==="log"?(w.d2r=w.d2l=function(Q,ne){return P(d(Q),ne)},w.r2d=w.r2c=function(Q){return f(d(Q))},w.d2c=w.r2l=d,w.c2d=w.l2r=i,w.c2r=P,w.l2d=f,w.d2p=function(Q,ne){return w.l2p(w.d2r(Q,ne))},w.p2d=function(Q){return f(J(Q))},w.r2p=function(Q){return w.l2p(d(Q))},w.p2r=J,w.cleanPos=i):w.type==="date"?(w.d2r=w.r2d=l.identity,w.d2c=w.r2c=w.d2l=w.r2l=z,w.c2d=w.c2r=w.l2d=w.l2r=G,w.d2p=w.r2p=function(Q,ne,re){return w.l2p(z(Q,0,re))},w.p2d=w.p2r=function(Q,ne,re){return G(J(Q),ne,re)},w.cleanPos=function(Q){return l.cleanDate(Q,a,w.calendar)}):w.type==="category"?(w.d2c=w.d2l=H,w.r2d=w.c2d=w.l2d=O,w.d2r=w.d2l_noadd=B,w.r2c=function(Q){var ne=V(Q);return ne!==void 0?ne:w.fraction2r(.5)},w.l2r=w.c2r=i,w.r2l=V,w.d2p=function(Q){return w.l2p(w.r2c(Q))},w.p2d=function(Q){return O(J(Q))},w.r2p=w.d2p,w.p2r=J,w.cleanPos=function(Q){return typeof Q=="string"&&Q!==""?Q:i(Q)}):w.type==="multicategory"&&(w.r2d=w.c2d=w.l2d=O,w.d2r=w.d2l_noadd=B,w.r2c=function(Q){var ne=B(Q);return ne!==void 0?ne:w.fraction2r(.5)},w.r2c_just_indices=N,w.l2r=w.c2r=i,w.r2l=B,w.d2p=function(Q){return w.l2p(w.r2c(Q))},w.p2d=function(Q){return O(J(Q))},w.r2p=w.d2p,w.p2r=J,w.cleanPos=function(Q){return Array.isArray(Q)||typeof Q=="string"&&Q!==""?Q:i(Q)},w.setupMultiCategory=function(Q){var ne,re,ae=w._traceIndices,ue=w._matchGroup;if(ue&&w._categories.length===0){for(var pe in ue)if(pe!==L){var ge=E[y.id2name(pe)];ae=ae.concat(ge._traceIndices)}}var _e=[[0,{}],[0,{}]],me=[];for(ne=0;ne<ae.length;ne++){var ve=Q[ae[ne]];if(C in ve){var Oe=ve[C],Me=ve._length||l.minRowLength(Oe);if(r(Oe[0])&&r(Oe[1]))for(re=0;re<Me;re++){var Te=Oe[0][re],se=Oe[1][re];S(Te)&&S(se)&&(me.push([Te,se]),Te in _e[0][1]||(_e[0][1][Te]=_e[0][0]++),se in _e[1][1]||(_e[1][1][se]=_e[1][0]++))}}}for(me.sort(function(oe,he){var Ee=_e[0][1],ke=Ee[oe[0]]-Ee[he[0]];if(ke)return ke;var be=_e[1][1];return be[oe[1]]-be[he[1]]}),ne=0;ne<me.length;ne++)H(me[ne])}),w.fraction2r=function(Q){var ne=w.r2l(w.range[0]),re=w.r2l(w.range[1]);return w.l2r(ne+Q*(re-ne))},w.r2fraction=function(Q){var ne=w.r2l(w.range[0]),re=w.r2l(w.range[1]);return(w.r2l(Q)-ne)/(re-ne)},w.limitRange=function(Q){var ne=w.minallowed,re=w.maxallowed;if(ne!==void 0||re!==void 0){Q||(Q="range");var ae=l.nestedProperty(w,Q).get(),ue=l.simpleMap(ae,w.r2l),pe=ue[1]<ue[0];pe&&ue.reverse();var ge=l.simpleMap([ne,re],w.r2l);ne!==void 0&&ue[0]<ge[0]&&(ae[pe?1:0]=ne),re!==void 0&&ue[1]>ge[1]&&(ae[pe?0:1]=re)}},w.cleanRange=function(Q,ne){w._cleanRange(Q,ne),w.limitRange(Q)},w._cleanRange=function(Q,ne){ne||(ne={}),Q||(Q="range");var re,ae,ue=l.nestedProperty(w,Q).get();if(ae=(ae=w.type==="date"?l.dfltRange(w.calendar):C==="y"?v.DFLTRANGEY:w._name==="realaxis"?[0,1]:ne.dfltRange||v.DFLTRANGEX).slice(),w.rangemode!=="tozero"&&w.rangemode!=="nonnegative"||(ae[0]=0),ue&&ue.length===2){var pe=ue[0]===null,ge=ue[1]===null;for(w.type!=="date"||w.autorange||(ue[0]=l.cleanDate(ue[0],a,w.calendar),ue[1]=l.cleanDate(ue[1],a,w.calendar)),re=0;re<2;re++)if(w.type==="date"){if(!l.isDateTime(ue[re],w.calendar)){w[Q]=ae;break}if(w.r2l(ue[0])===w.r2l(ue[1])){var _e=l.constrain(w.r2l(ue[0]),l.MIN_MS+1e3,l.MAX_MS-1e3);ue[0]=w.l2r(_e-1e3),ue[1]=w.l2r(_e+1e3);break}}else{if(!b(ue[re])){if(pe||ge||!b(ue[1-re])){w[Q]=ae;break}ue[re]=ue[1-re]*(re?10:.1)}if(ue[re]<-o?ue[re]=-o:ue[re]>o&&(ue[re]=o),ue[0]===ue[1]){var me=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=me,ue[1]+=me}}}else l.nestedProperty(w,Q).set(ae)},w.setScale=function(Q){var ne=E._size;if(w.overlaying){var re=y.getFromId({_fullLayout:E},w.overlaying);w.domain=re.domain}var ae=Q&&w._r?"_r":"range",ue=w.calendar;w.cleanRange(ae);var pe,ge,_e=w.r2l(w[ae][0],ue),me=w.r2l(w[ae][1],ue),ve=C==="y";if(ve?(w._offset=ne.t+(1-w.domain[1])*ne.h,w._length=ne.h*(w.domain[1]-w.domain[0]),w._m=w._length/(_e-me),w._b=-w._m*me):(w._offset=ne.l+w.domain[0]*ne.w,w._length=ne.w*(w.domain[1]-w.domain[0]),w._m=w._length/(me-_e),w._b=-w._m*_e),w._rangebreaks=[],w._lBreaks=0,w._m2=0,w._B=[],w.rangebreaks&&(w._rangebreaks=w.locateBreaks(Math.min(_e,me),Math.max(_e,me)),w._rangebreaks.length)){for(pe=0;pe<w._rangebreaks.length;pe++)ge=w._rangebreaks[pe],w._lBreaks+=Math.abs(ge.max-ge.min);var Oe=ve;_e>me&&(Oe=!Oe),Oe&&w._rangebreaks.reverse();var Me=Oe?-1:1;for(w._m2=Me*w._length/(Math.abs(me-_e)-w._lBreaks),w._B.push(-w._m2*(ve?me:_e)),pe=0;pe<w._rangebreaks.length;pe++)ge=w._rangebreaks[pe],w._B.push(w._B[w._B.length-1]-Me*w._m2*(ge.max-ge.min));for(pe=0;pe<w._rangebreaks.length;pe++)(ge=w._rangebreaks[pe]).pmin=K(ge.min),ge.pmax=K(ge.max)}if(!isFinite(w._m)||!isFinite(w._b)||w._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},w.maskBreaks=function(Q){var ne,re,ae,ue,pe,ge=w.rangebreaks||[];ge._cachedPatterns||(ge._cachedPatterns=ge.map(function(Te){return Te.enabled&&Te.bounds?l.simpleMap(Te.bounds,Te.pattern?d:w.d2c):null})),ge._cachedValues||(ge._cachedValues=ge.map(function(Te){return Te.enabled&&Te.values?l.simpleMap(Te.values,w.d2c).sort(l.sorterAsc):null}));for(var _e=0;_e<ge.length;_e++){var me=ge[_e];if(me.enabled){if(me.bounds){var ve=me.pattern;switch(re=(ne=ge._cachedPatterns[_e])[0],ae=ne[1],ve){case _:ue=(pe=new Date(Q)).getUTCDay(),re>ae&&(ae+=7,ue<re&&(ue+=7));break;case m:ue=(pe=new Date(Q)).getUTCHours()+(pe.getUTCMinutes()/60+pe.getUTCSeconds()/3600+pe.getUTCMilliseconds()/36e5),re>ae&&(ae+=24,ue<re&&(ue+=24));break;case"":ue=Q}if(ue>=re&&ue<ae)return a}else for(var Oe=ge._cachedValues[_e],Me=0;Me<Oe.length;Me++)if(ae=(re=Oe[Me])+me.dvalue,Q>=re&&Q<ae)return a}}return Q},w.locateBreaks=function(Q,ne){var re,ae,ue,pe,ge=[];if(!w.rangebreaks)return ge;var _e=w.rangebreaks.slice().sort(function(be,Ie){return be.pattern===_&&Ie.pattern===m?-1:Ie.pattern===_&&be.pattern===m?1:0}),me=function(be,Ie){if((be=l.constrain(be,Q,ne))!==(Ie=l.constrain(Ie,Q,ne))){for(var Fe=!0,ce=0;ce<ge.length;ce++){var we=ge[ce];be<we.max&&Ie>=we.min&&(be<we.min&&(we.min=be),Ie>we.max&&(we.max=Ie),Fe=!1)}Fe&&ge.push({min:be,max:Ie})}};for(re=0;re<_e.length;re++){var ve=_e[re];if(ve.enabled)if(ve.bounds){var Oe=Q,Me=ne;ve.pattern&&(Oe=Math.floor(Oe)),ue=(ae=l.simpleMap(ve.bounds,ve.pattern?d:w.r2l))[0],pe=ae[1];var Te,se,oe=new Date(Oe);switch(ve.pattern){case _:se=p,Te=(pe-ue+(pe<ue?7:0))*c,Oe+=ue*c-(oe.getUTCDay()*c+oe.getUTCHours()*x+oe.getUTCMinutes()*g+oe.getUTCSeconds()*h+oe.getUTCMilliseconds());break;case m:se=c,Te=(pe-ue+(pe<ue?24:0))*x,Oe+=ue*x-(oe.getUTCHours()*x+oe.getUTCMinutes()*g+oe.getUTCSeconds()*h+oe.getUTCMilliseconds());break;default:Oe=Math.min(ae[0],ae[1]),Te=se=(Me=Math.max(ae[0],ae[1]))-Oe}for(var he=Oe;he<Me;he+=se)me(he,he+Te)}else for(var Ee=l.simpleMap(ve.values,w.d2c),ke=0;ke<Ee.length;ke++)me(ue=Ee[ke],pe=ue+ve.dvalue)}return ge.sort(function(be,Ie){return be.min-Ie.min}),ge},w.makeCalcdata=function(Q,ne,re){var ae,ue,pe,ge,_e=w.type,me=_e==="date"&&Q[ne+"calendar"];if(ne in Q){if(ae=Q[ne],ge=Q._length||l.minRowLength(ae),l.isTypedArray(ae)&&(_e==="linear"||_e==="log")){if(ge===ae.length)return ae;if(ae.subarray)return ae.subarray(0,ge)}if(_e==="multicategory")return function(Me,Te){for(var se=new Array(Te),oe=0;oe<Te;oe++){var he=(Me[0]||[])[oe],Ee=(Me[1]||[])[oe];se[oe]=N([he,Ee])}return se}(ae,ge);for(ue=new Array(ge),pe=0;pe<ge;pe++)ue[pe]=w.d2c(ae[pe],0,me,re)}else{var ve=ne+"0"in Q?w.d2c(Q[ne+"0"],0,me):0,Oe=Q["d"+ne]?Number(Q["d"+ne]):1;for(ae=Q[{x:"y",y:"x"}[ne]],ge=Q._length||ae.length,ue=new Array(ge),pe=0;pe<ge;pe++)ue[pe]=ve+pe*Oe}if(w.rangebreaks)for(pe=0;pe<ge;pe++)ue[pe]=w.maskBreaks(ue[pe]);return ue},w.isValidRange=function(Q,ne){return Array.isArray(Q)&&Q.length===2&&(ne&&Q[0]===null||b(w.r2l(Q[0])))&&(ne&&Q[1]===null||b(w.r2l(Q[1])))},w.getAutorangeDflt=function(Q,ne){var re=!w.isValidRange(Q,"nullOk");return re&&ne&&ne.reverseDflt?re="reversed":Q&&(Q[0]===null&&Q[1]===null?re=!0:Q[0]===null&&Q[1]!==null?re="min":Q[0]!==null&&Q[1]===null&&(re="max")),re},w.isReversed=function(){var Q=w.autorange;return Q==="reversed"||Q==="min reversed"||Q==="max reversed"},w.isPtWithinRange=function(Q,ne){var re=w.c2l(Q[C],null,ne),ae=w.r2l(w.range[0]),ue=w.r2l(w.range[1]);return ae<ue?ae<=re&&re<=ue:ue<=re&&re<=ae},w._emptyCategories=function(){w._categories=[],w._categoriesMap={}},w.clearCalc=function(){var Q=w._matchGroup;if(Q){var ne=null,re=null;for(var ae in Q){var ue=E[y.id2name(ae)];if(ue._categories){ne=ue._categories,re=ue._categoriesMap;break}}ne&&re?(w._categories=ne,w._categoriesMap=re):w._emptyCategories()}else w._emptyCategories();if(w._initialCategories)for(var pe=0;pe<w._initialCategories.length;pe++)H(w._initialCategories[pe])},w.sortByInitialCategories=function(){var Q=[];if(w._emptyCategories(),w._initialCategories)for(var ne=0;ne<w._initialCategories.length;ne++)H(w._initialCategories[ne]);Q=Q.concat(w._traceIndices);var re=w._matchGroup;for(var ae in re)if(L!==ae){var ue=E[y.id2name(ae)];ue._categories=w._categories,ue._categoriesMap=w._categoriesMap,Q=Q.concat(ue._traceIndices)}return Q};var W=E._d3locale;w.type==="date"&&(w._dateFormat=W?W.timeFormat:k,w._extraFormat=E._extraFormat),w._separators=E.separators,w._numFormat=W?W.numberFormat:T,delete w._minDtick,delete w._forceTick0}},59652:function(ee){ee.exports=function(D){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(M){return D[M]!==void 0});if(e.every(function(M){return D[M]===D[e[0]]})||e.length===1)return D[e[0]]}},96115:function(ee,D,e){var M=e(71828),k=e(7901).contrast,l=e(13838),T=e(59652),b=e(85501);function d(s,t){function i(r,n){return M.coerce(s,t,l.tickformatstops,r,n)}i("enabled")&&(i("dtickrange"),i("value"))}ee.exports=function(s,t,i,r,n){n||(n={});var o=i("labelalias");M.isPlainObject(o)||delete t.labelalias;var a=T(s);if(i("showticklabels")){var u=n.font||{},p=t.color,c=(t.ticklabelposition||"").indexOf("inside")!==-1?k(n.bgColor):p&&p!==l.color.dflt?p:u.color;if(M.coerceFont(i,"tickfont",{family:u.family,size:u.size,color:c}),n.noTicklabelstep||r==="multicategory"||r==="log"||i("ticklabelstep"),n.noAng||i("tickangle"),r!=="category"){var x=i("tickformat");b(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:d}),t.tickformatstops.length||delete t.tickformatstops,n.noExp||x||r==="date"||(i("showexponent",a),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},38701:function(ee,D,e){var M=e(71828),k=e(13838);ee.exports=function(l,T,b,d){var s=d.isMinor,t=s?l.minor||{}:l,i=s?T.minor:T,r=s?k.minor:k,n=s?"minor.":"",o=M.coerce2(t,i,r,"ticklen",s?.6*(T.ticklen||5):void 0),a=M.coerce2(t,i,r,"tickwidth",s?T.tickwidth||1:void 0),u=M.coerce2(t,i,r,"tickcolor",(s?T.tickcolor:void 0)||i.color);b(n+"ticks",!s&&d.outerTicks||o||a||u?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26218:function(ee,D,e){var M=e(66287),k=e(71828).isArrayOrTypedArray;ee.exports=function(l,T,b,d,s){s||(s={});var t=s.isMinor,i=t?l.minor||{}:l,r=t?T.minor:T,n=t?"minor.":"";function o(g){var h=i[g];return h!==void 0?h:(r._template||{})[g]}var a=o("tick0"),u=o("dtick"),p=o("tickvals"),c=b(n+"tickmode",k(p)?"array":u?"linear":"auto");if(c==="auto"||c==="sync")b(n+"nticks");else if(c==="linear"){var x=r.dtick=M.dtick(u,d);r.tick0=M.tick0(a,d,T.calendar,x)}else d!=="multicategory"&&(b(n+"tickvals")===void 0?r.tickmode="auto":t||b("ticktext"))}},66847:function(ee,D,e){var M=e(39898),k=e(73972),l=e(71828),T=e(91424),b=e(89298);ee.exports=function(d,s,t,i){var r=d._fullLayout;if(s.length!==0){var n,o,a,u;i&&(n=i());var p=M.ease(t.easing);return d._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var g={},h=0;h<s.length;h++){var y=s[h],v=y.plotinfo.xaxis,m=y.plotinfo.yaxis;y.xr0&&(g[v._name+".range"]=y.xr0.slice()),y.yr0&&(g[m._name+".range"]=y.yr0.slice())}return k.call("relayout",d,g).then(function(){for(var _=0;_<s.length;_++)c(s[_].plotinfo)})}()}),o=Date.now(),u=window.requestAnimationFrame(function g(){a=Date.now();for(var h=Math.min(1,(a-o)/t.duration),y=p(h),v=0;v<s.length;v++)x(s[v],y);a-o>t.duration?(function(){for(var m={},_=0;_<s.length;_++){var f=s[_],S=f.plotinfo.xaxis,w=f.plotinfo.yaxis;f.xr1&&(m[S._name+".range"]=f.xr1.slice()),f.yr1&&(m[w._name+".range"]=f.yr1.slice())}n&&n(),k.call("relayout",d,m).then(function(){for(var E=0;E<s.length;E++)c(s[E].plotinfo)})}(),u=window.cancelAnimationFrame(g)):u=window.requestAnimationFrame(g)}),Promise.resolve()}function c(g){var h=g.xaxis,y=g.yaxis;r._defs.select("#"+g.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),g.plot.call(T.setTranslate,h._offset,y._offset).call(T.setScale,1,1);var v=g.plot.selectAll(".scatterlayer .trace");v.selectAll(".point").call(T.setPointGroupScale,1,1),v.selectAll(".textpoint").call(T.setTextPointsScale,1,1),v.call(T.hideOutsideRangePoints,g)}function x(g,h){var y=g.plotinfo,v=y.xaxis,m=y.yaxis,_=v._length,f=m._length,S=!!g.xr1,w=!!g.yr1,E=[];if(S){var L=l.simpleMap(g.xr0,v.r2l),C=l.simpleMap(g.xr1,v.r2l),P=L[1]-L[0],z=C[1]-C[0];E[0]=(L[0]*(1-h)+h*C[0]-L[0])/(L[1]-L[0])*_,E[2]=_*(1-h+h*z/P),v.range[0]=v.l2r(L[0]*(1-h)+h*C[0]),v.range[1]=v.l2r(L[1]*(1-h)+h*C[1])}else E[0]=0,E[2]=_;if(w){var G=l.simpleMap(g.yr0,m.r2l),O=l.simpleMap(g.yr1,m.r2l),H=G[1]-G[0],N=O[1]-O[0];E[1]=(G[1]*(1-h)+h*O[1]-G[1])/(G[0]-G[1])*f,E[3]=f*(1-h+h*N/H),m.range[0]=v.l2r(G[0]*(1-h)+h*O[0]),m.range[1]=m.l2r(G[1]*(1-h)+h*O[1])}else E[1]=0,E[3]=f;b.drawOne(d,v,{skipTitle:!0}),b.drawOne(d,m,{skipTitle:!0}),b.redrawComponents(d,[v._id,m._id]);var B=S?_/E[2]:1,V=w?f/E[3]:1,q=S?E[0]:0,te=w?E[1]:0,K=S?E[0]/E[2]*_:0,J=w?E[1]/E[3]*f:0,Y=v._offset-K,W=m._offset-J;y.clipRect.call(T.setTranslate,q,te).call(T.setScale,1/B,1/V),y.plot.call(T.setTranslate,Y,W).call(T.setScale,B,V),T.setPointGroupScale(y.zoomScalePts,1/B,1/V),T.setTextPointsScale(y.zoomScaleTxt,1/B,1/V)}b.redrawComponents(d)}},951:function(ee,D,e){var M=e(73972).traceIs,k=e(4322);function l(b){return{v:"x",h:"y"}[b.orientation||"v"]}function T(b,d){var s=l(b),t=M(b,"box-violin"),i=M(b._fullInput||{},"candlestick");return t&&!i&&d===s&&b[s]===void 0&&b[s+"0"]===void 0}ee.exports=function(b,d,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(i,r){if(i.type==="-"){var n,o=i._id,a=o.charAt(0);o.indexOf("scene")!==-1&&(o=a);var u=function(m,_,f){for(var S=0;S<m.length;S++){var w=m[S];if(w.type==="splom"&&w._length>0&&(w["_"+f+"axes"]||{})[_]||(w[f+"axis"]||f)===_&&(T(w,f)||(w[f]||[]).length||w[f+"0"]))return w}}(r,o,a);if(u)if(u.type!=="histogram"||a!=={v:"y",h:"x"}[u.orientation||"v"]){var p=a+"calendar",c=u[p],x={noMultiCategory:!M(u,"cartesian")||M(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&a==={h:"x",v:"y"}[u.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=i.autotypenumbers,T(u,a)){var g=l(u),h=[];for(n=0;n<r.length;n++){var y=r[n];M(y,"box-violin")&&(y[a+"axis"]||a)===o&&(y[g]!==void 0?h.push(y[g][0]):y.name!==void 0?h.push(y.name):h.push("text"),y[p]!==c&&(c=void 0))}i.type=k(h,c,x)}else if(u.type==="splom"){var v=u.dimensions[u._axesDim[o]];v.visible&&(i.type=k(v.values,c,x))}else i.type=k(u[a]||[u[a+"0"]],c,x)}else i.type="linear"}}(d,t.data),d.type==="-"?d.type="linear":b.type=d.type)}},31137:function(ee,D,e){var M=e(73972),k=e(71828);function l(s,t,i){var r,n,o,a=!1;if(t.type==="data")r=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;r=s._fullLayout}return n=k.nestedProperty(r,t.prop).get(),(o=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&o[t.prop]!==n&&(a=!0),o[t.prop]=n,{changed:a,value:n}}function T(s,t){var i=[],r=t[0],n={};if(typeof r=="string")n[r]=t[1];else{if(!k.isPlainObject(r))return i;n=r}return d(n,function(o,a,u){i.push({type:"layout",prop:o,value:u})},"",0),i}function b(s,t){var i,r,n,o,a=[];if(r=t[0],n=t[1],i=t[2],o={},typeof r=="string")o[r]=n;else{if(!k.isPlainObject(r))return a;o=r,i===void 0&&(i=n)}return i===void 0&&(i=null),d(o,function(u,p,c){var x,g;if(Array.isArray(c)){g=c.slice();var h=Math.min(g.length,s.data.length);i&&(h=Math.min(h,i.length)),x=[];for(var y=0;y<h;y++)x[y]=i?i[y]:y}else g=c,x=i?i.slice():null;if(x===null)Array.isArray(g)&&(g=g[0]);else if(Array.isArray(x)){if(!Array.isArray(g)){var v=g;g=[];for(var m=0;m<x.length;m++)g[m]=v}g.length=Math.min(x.length,g.length)}a.push({type:"data",prop:u,traces:x,value:g})},"",0),a}function d(s,t,i,r){Object.keys(s).forEach(function(n){var o=s[n];if(n[0]!=="_"){var a=i+(r>0?".":"")+n;k.isPlainObject(o)?d(o,t,a,r+1):t(a,n,o)}})}D.manageCommandObserver=function(s,t,i,r){var n={},o=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var a=D.hasSimpleAPICommandBindings(s,i,n.lookupTable);if(t&&t._commandObserver){if(a)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(a){l(s,a,n.cache),n.check=function(){if(o){var c=l(s,a,n.cache);return c.changed&&r&&n.lookupTable[c.value]!==void 0&&(n.disable(),Promise.resolve(r({value:c.value,type:a.type,prop:a.prop,traces:a.traces,index:n.lookupTable[c.value]})).then(n.enable,n.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<u.length;p++)s._internalOn(u[p],n.check);n.remove=function(){for(var c=0;c<u.length;c++)s._removeInternalListener(u[c],n.check)}}else k.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){o=!1},n.enable=function(){o=!0},t&&(t._commandObserver=n),n},D.hasSimpleAPICommandBindings=function(s,t,i){var r,n,o=t.length;for(r=0;r<o;r++){var a,u=t[r],p=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!p)return!1;var x=D.computeAPICommandBindings(s,p,c);if(x.length!==1)return!1;if(n){if((a=x[0]).type!==n.type||a.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(a.traces))return!1;a.traces.sort();for(var g=0;g<n.traces.length;g++)if(n.traces[g]!==a.traces[g])return!1}else if(a.prop!==n.prop)return!1}else n=x[0],Array.isArray(n.traces)&&n.traces.sort();var h=(a=x[0]).value;if(Array.isArray(h)){if(h.length!==1)return!1;h=h[0]}i&&(i[h]=r)}return n},D.executeAPICommand=function(s,t,i){if(t==="skip")return Promise.resolve();var r=M.apiMethodRegistry[t],n=[s];Array.isArray(i)||(i=[]);for(var o=0;o<i.length;o++)n.push(i[o]);return r.apply(null,n).catch(function(a){return k.warn("API call to Plotly."+t+" rejected.",a),Promise.reject(a)})},D.computeAPICommandBindings=function(s,t,i){var r;switch(Array.isArray(i)||(i=[]),t){case"restyle":r=b(s,i);break;case"relayout":r=T(0,i);break;case"update":r=b(s,[i[0],i[2]]).concat(T(0,[i[1]]));break;case"animate":r=function(n,o){return Array.isArray(o[0])&&o[0].length===1&&["string","number"].indexOf(typeof o[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:o[0][0].toString()}]:[]}(0,i);break;default:r=[]}return r}},27670:function(ee,D,e){var M=e(1426).extendFlat;D.Y=function(k,l){l=l||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},b=(k.name&&k.name,k.trace,l.description&&l.description,{x:M({},T,{}),y:M({},T,{}),editType:k.editType});return k.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:k.editType},b.column={valType:"integer",min:0,dflt:0,editType:k.editType}),b},D.c=function(k,l,T,b){var d=b&&b.x||[0,1],s=b&&b.y||[0,1],t=l.grid;if(t){var i=T("domain.column");i!==void 0&&(i<t.columns?d=t._domains.x[i]:delete k.domain.column);var r=T("domain.row");r!==void 0&&(r<t.rows?s=t._domains.y[r]:delete k.domain.row)}var n=T("domain.x",d),o=T("domain.y",s);n[0]<n[1]||(k.domain.x=d.slice()),o[0]<o[1]||(k.domain.y=s.slice())}},41940:function(ee){ee.exports=function(D){var e=D.editType,M=D.colorEditType;M===void 0&&(M=e);var k={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:M},editType:e};return D.autoSize&&(k.size.dflt="auto"),D.autoColor&&(k.color.dflt="auto"),D.arrayOk&&(k.family.arrayOk=!0,k.size.arrayOk=!0,k.color.arrayOk=!0),k}},31391:function(ee){ee.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(ee,D){D.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},D.axesNames=["lonaxis","lataxis"],D.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},D.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},D.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},D.clipPad=.001,D.precision=.1,D.landColor="#F0DC82",D.waterColor="#3399FF",D.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},D.sphereSVG={type:"Sphere"},D.fillLayers={ocean:1,land:1,lakes:1},D.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},D.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],D.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],D.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(ee,D,e){var M=e(39898),k=e(27362),l=k.geoPath,T=k.geoDistance,b=e(65704),d=e(73972),s=e(71828),t=s.strTranslate,i=e(7901),r=e(91424),n=e(30211),o=e(74875),a=e(89298),u=e(71739).getAutoRange,p=e(28569),c=e(47322).prepSelect,x=e(47322).clearOutline,g=e(47322).selectOnClick,h=e(74455),y=e(78776),v=e(41327),m=e(90973),_=e(96892).zL;function f(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=f.prototype;function w(E,L){var C=y.clipPad,P=E[0]+C,z=E[1]-C,G=L[0]+C,O=L[1]-C;P>0&&z<0&&(z+=360);var H=(z-P)/4;return{type:"Polygon",coordinates:[[[P,G],[P,O],[P+H,O],[P+2*H,O],[P+3*H,O],[z,O],[z,G],[z-H,G],[z-2*H,G],[z-3*H,G],[P,G]]]}}ee.exports=function(E){return new f(E)},S.plot=function(E,L,C,P){var z=this;if(P)return z.update(E,L,!0);z._geoCalcData=E,z._fullLayout=L;var G=L[this.id],O=[],H=!1;for(var N in y.layerNameToAdjective)if(N!=="frame"&&G["show"+N]){H=!0;break}for(var B=!1,V=0;V<E.length;V++){var q=E[0][0].trace;q._geo=z,q.locationmode&&(H=!0);var te=q.marker;if(te){var K=te.angle,J=te.angleref;(K||J==="north"||J==="previous")&&(B=!0)}}if(this._hasMarkerAngles=B,H){var Y=m.getTopojsonName(G);z.topojson!==null&&Y===z.topojsonName||(z.topojsonName=Y,PlotlyGeoAssets.topojson[z.topojsonName]===void 0&&O.push(z.fetchTopojson()))}O=O.concat(v.fetchTraceGeoData(E)),C.push(new Promise(function(W,Q){Promise.all(O).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(E,L),W()}).catch(Q)}))},S.fetchTopojson=function(){var E=this,L=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,P){M.json(L,function(z,G){if(z)return z.status===404?P(new Error(["plotly.js could not find topojson file at",L+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):P(new Error(["unexpected error while fetching topojson file at",L].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=G,C()})})},S.update=function(E,L,C){var P=L[this.id];this.hasChoropleth=!1;for(var z=0;z<E.length;z++){var G=E[z],O=G[0].trace;O.type==="choropleth"&&(this.hasChoropleth=!0),O.visible===!0&&O._length>0&&O._module.calcGeoJSON(G,L)}if(!C){if(this.updateProjection(E,L))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(L,P),this.updateDims(L,P),this.updateFx(L,P),o.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var N=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=N.selectAll("path"),this._render()},S.updateProjection=function(E,L){var C=this.graphDiv,P=L[this.id],z=L._size,G=P.domain,O=P.projection,H=P.lonaxis,N=P.lataxis,B=H._ax,V=N._ax,q=this.projection=function(oe){var he=oe.projection,Ee=he.type,ke=y.projNames[Ee];ke="geo"+s.titleCase(ke);for(var be=(k[ke]||b[ke])(),Ie=oe._isSatellite?180*Math.acos(1/he.distance)/Math.PI:oe._isClipped?y.lonaxisSpan[Ee]/2:null,Fe=["center","rotate","parallels","clipExtent"],ce=function(Ce){return Ce?be:[]},we=0;we<Fe.length;we++){var ye=Fe[we];typeof be[ye]!="function"&&(be[ye]=ce)}return be.isLonLatOverEdges=function(Ce){if(be(Ce)===null)return!0;if(Ie){var Re=be.rotate();return T(Ce,[-Re[0],-Re[1]])>Ie*Math.PI/180}return!1},be.getPath=function(){return l().projection(be)},be.getBounds=function(Ce){return be.getPath().bounds(Ce)},be.precision(y.precision),oe._isSatellite&&be.tilt(he.tilt).distance(he.distance),Ie&&be.clipAngle(Ie-y.clipPad),be}(P),te=[[z.l+z.w*G.x[0],z.t+z.h*(1-G.y[1])],[z.l+z.w*G.x[1],z.t+z.h*(1-G.y[0])]],K=P.center||{},J=O.rotation||{},Y=H.range||[],W=N.range||[];if(P.fitbounds){B._length=te[1][0]-te[0][0],V._length=te[1][1]-te[0][1],B.range=u(C,B),V.range=u(C,V);var Q=(B.range[0]+B.range[1])/2,ne=(V.range[0]+V.range[1])/2;if(P._isScoped)K={lon:Q,lat:ne};else if(P._isClipped){K={lon:Q,lat:ne},J={lon:Q,lat:ne,roll:J.roll};var re=O.type,ae=y.lonaxisSpan[re]/2||180,ue=y.lataxisSpan[re]/2||90;Y=[Q-ae,Q+ae],W=[ne-ue,ne+ue]}else K={lon:Q,lat:ne},J={lon:Q,lat:J.lat,roll:J.roll}}q.center([K.lon-J.lon,K.lat-J.lat]).rotate([-J.lon,-J.lat,J.roll]).parallels(O.parallels);var pe=w(Y,W);q.fitExtent(te,pe);var ge=this.bounds=q.getBounds(pe),_e=this.fitScale=q.scale(),me=q.translate();if(P.fitbounds){var ve=q.getBounds(w(B.range,V.range)),Oe=Math.min((ge[1][0]-ge[0][0])/(ve[1][0]-ve[0][0]),(ge[1][1]-ge[0][1])/(ve[1][1]-ve[0][1]));isFinite(Oe)?q.scale(Oe*_e):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else q.scale(O.scale*_e);var Me=this.midPt=[(ge[0][0]+ge[1][0])/2,(ge[0][1]+ge[1][1])/2];if(q.translate([me[0]+(Me[0]-me[0]),me[1]+(Me[1]-me[1])]).clipExtent(ge),P._isAlbersUsa){var Te=q([K.lon,K.lat]),se=q.translate();q.translate([se[0]-(Te[0]-se[0]),se[1]-(Te[1]-se[1])])}},S.updateBaseLayers=function(E,L){var C=this,P=C.topojson,z=C.layers,G=C.basePaths;function O(q){return q==="lonaxis"||q==="lataxis"}function H(q){return!!y.lineLayers[q]}function N(q){return!!y.fillLayers[q]}var B=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(q){return H(q)||N(q)?L["show"+q]:!O(q)||L[q].showgrid}),V=C.framework.selectAll(".layer").data(B,String);V.exit().each(function(q){delete z[q],delete G[q],M.select(this).remove()}),V.enter().append("g").attr("class",function(q){return"layer "+q}).each(function(q){var te=z[q]=M.select(this);q==="bg"?C.bgRect=te.append("rect").style("pointer-events","all"):O(q)?G[q]=te.append("path").style("fill","none"):q==="backplot"?te.append("g").classed("choroplethlayer",!0):q==="frontplot"?te.append("g").classed("scatterlayer",!0):H(q)?G[q]=te.append("path").style("fill","none").style("stroke-miterlimit",2):N(q)&&(G[q]=te.append("path").style("stroke","none"))}),V.order(),V.each(function(q){var te=G[q],K=y.layerNameToAdjective[q];q==="frame"?te.datum(y.sphereSVG):H(q)||N(q)?te.datum(_(P,P.objects[q])):O(q)&&te.datum(function(J,Y,W){var Q,ne,re,ae=Y[J],ue=y.scopeDefaults[Y.scope];J==="lonaxis"?(Q=ue.lonaxisRange,ne=ue.lataxisRange,re=function(se,oe){return[se,oe]}):J==="lataxis"&&(Q=ue.lataxisRange,ne=ue.lonaxisRange,re=function(se,oe){return[oe,se]});var pe={type:"linear",range:[Q[0],Q[1]-1e-6],tick0:ae.tick0,dtick:ae.dtick};a.setConvert(pe,W);var ge=a.calcTicks(pe);Y.isScoped||J!=="lonaxis"||ge.pop();for(var _e=ge.length,me=new Array(_e),ve=0;ve<_e;ve++)for(var Oe=ge[ve].x,Me=me[ve]=[],Te=ne[0];Te<ne[1]+2.5;Te+=2.5)Me.push(re(Oe,Te));return{type:"MultiLineString",coordinates:me}}(q,L,E)).call(i.stroke,L[q].gridcolor).call(r.dashLine,L[q].griddash,L[q].gridwidth),H(q)?te.call(i.stroke,L[K+"color"]).call(r.dashLine,"",L[K+"width"]):N(q)&&te.call(i.fill,L[K+"color"])})},S.updateDims=function(E,L){var C=this.bounds,P=(L.framewidth||0)/2,z=C[0][0]-P,G=C[0][1]-P,O=C[1][0]-z+P,H=C[1][1]-G+P;r.setRect(this.clipRect,z,G,O,H),this.bgRect.call(r.setRect,z,G,O,H).call(i.fill,L.bgcolor),this.xaxis._offset=z,this.xaxis._length=O,this.yaxis._offset=G,this.yaxis._length=H},S.updateFx=function(E,L){var C=this,P=C.graphDiv,z=C.bgRect,G=E.dragmode,O=E.clickmode;if(!C.isStatic){var H={element:C.bgRect.node(),gd:P,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(B,V){V.isRect?(B.range={})[C.id]=[N([V.xmin,V.ymin]),N([V.xmax,V.ymax])]:(B.lassoPoints={})[C.id]=V.map(N)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(B){B===2&&x(P)}};G==="pan"?(z.node().onmousedown=null,z.call(h(C,L)),z.on("dblclick.zoom",function(){var B=C.viewInitial,V={};for(var q in B)V[C.id+"."+q]=B[q];d.call("_guiRelayout",P,V),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||z.on("wheel.zoom",null)):G!=="select"&&G!=="lasso"||(z.on(".zoom",null),H.prepFn=function(B,V,q){c(B,V,q,H,G)},p.init(H)),z.on("mousemove",function(){var B=C.projection.invert(s.getPositionFromD3Event());if(!B)return p.unhover(P,M.event);C.xaxis.p2c=function(){return B[0]},C.yaxis.p2c=function(){return B[1]},n.hover(P,M.event,C.id)}),z.on("mouseout",function(){P._dragging||p.unhover(P,M.event)}),z.on("click",function(){G!=="select"&&G!=="lasso"&&(O.indexOf("select")>-1&&g(M.event,P,[C.xaxis],[C.yaxis],C.id,H),O.indexOf("event")>-1&&n.click(P,M.event))})}function N(B){return C.projection.invert([B[0]+C.xaxis._offset,B[1]+C.yaxis._offset])}},S.makeFramework=function(){var E=this,L=E.graphDiv,C=L._fullLayout,P="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=M.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,P,L),E.project=function(z){var G=E.projection(z);return G?[G[0]-E.xaxis._offset,G[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(z){return E.project(z)[0]}},E.yaxis={_id:"y",c2p:function(z){return E.project(z)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},a.setConvert(E.mockAxis,C)},S.saveViewInitial=function(E){var L,C=E.center||{},P=E.projection,z=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},L=E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":z.lon},s.extendFlat(this.viewInitial,L)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,L=this.projection,C=L.getPath();function P(G){var O=L(G.lonlat);return O?t(O[0],O[1]):null}function z(G){return L.isLonLatOverEdges(G.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(G){return C(G.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",z).attr("transform",P)}},44622:function(ee,D,e){var M=e(27659).AU,k=e(71828).counterRegex,l=e(69082),T="geo",b=k(T),d={};d[T]={valType:"subplotid",dflt:T,editType:"calc"},ee.exports={attr:T,name:T,idRoot:T,idRegex:b,attrRegex:b,attributes:d,layoutAttributes:e(77519),supplyLayoutDefaults:e(82161),plot:function(s){for(var t=s._fullLayout,i=s.calcdata,r=t._subplots[T],n=0;n<r.length;n++){var o=r[n],a=M(i,T,o),u=t[o]._subplot;u||(u=l({id:o,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[o]._subplot=u),u.plot(a,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,i=t._subplots[T],r=0;r<i.length;r++){var n=t[i[r]];n._subplot.updateFx(t,n)}},clean:function(s,t,i,r){for(var n=r._subplots[T]||[],o=0;o<n.length;o++){var a=n[o],u=r[a]._subplot;!t[a]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},77519:function(ee,D,e){var M=e(22399),k=e(27670).Y,l=e(79952).P,T=e(78776),b=e(30962).overrideAll,d=e(78607),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:l};(ee.exports=b({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:d(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:d(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(ee,D,e){var M=e(71828),k=e(49119),l=e(27659).NG,T=e(78776),b=e(77519),d=T.axesNames;function s(t,i,r,n){var o=l(n.fullData,"geo",n.id).map(function(J){return J._expandedIndex}),a=r("resolution"),u=r("scope"),p=T.scopeDefaults[u],c=r("projection.type",p.projType),x=i._isAlbersUsa=c==="albers usa";x&&(u=i.scope="usa");var g=i._isScoped=u!=="world",h=i._isSatellite=c==="satellite",y=i._isConic=c.indexOf("conic")!==-1||c==="albers",v=i._isClipped=!!T.lonaxisSpan[c];if(t.visible===!1){var m=M.extendDeep({},i._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),i._template=m}for(var _=r("visible"),f=0;f<d.length;f++){var S,w=d[f],E=[30,10][f];if(g)S=p[w+"Range"];else{var L=T[w+"Span"],C=(L[c]||L["*"])/2,P=r("projection.rotation."+w.substr(0,3),p.projRotate[f]);S=[P-C,P+C]}var z=r(w+".range",S);r(w+".tick0"),r(w+".dtick",E),r(w+".showgrid",!!_&&void 0)&&(r(w+".gridcolor"),r(w+".gridwidth"),r(w+".griddash")),i[w]._ax={type:"linear",_id:w.slice(0,3),_traceIndices:o,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var G=i.lonaxis.range,O=i.lataxis.range,H=G[0],N=G[1];H>0&&N<0&&(N+=360);var B,V,q,te=(H+N)/2;if(!x){var K=g?p.projRotate:[te,0,0];B=r("projection.rotation.lon",K[0]),r("projection.rotation.lat",K[1]),r("projection.rotation.roll",K[2]),r("showcoastlines",!g&&_)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!_&&void 0)&&r("oceancolor")}x?(V=-96.6,q=38.7):(V=g?te:B,q=(O[0]+O[1])/2),r("center.lon",V),r("center.lat",q),h&&(r("projection.tilt"),r("projection.distance")),y&&r("projection.parallels",p.projParallels||[0,60]),r("projection.scale"),r("showland",!!_&&void 0)&&r("landcolor"),r("showlakes",!!_&&void 0)&&r("lakecolor"),r("showrivers",!!_&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",g&&u!=="usa"&&_)&&(r("countrycolor"),r("countrywidth")),(u==="usa"||u==="north america"&&a===50)&&(r("showsubunits",_),r("subunitcolor"),r("subunitwidth")),g||r("showframe",_)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete i.projection.scale,g?(delete i.center.lon,delete i.center.lat):v?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}ee.exports=function(t,i,r){k(t,i,r,{type:"geo",attributes:b,handleDefaults:s,fullData:r,partition:"y"})}},74455:function(ee,D,e){var M=e(39898),k=e(71828),l=e(73972),T=Math.PI/180,b=180/Math.PI,d={cursor:"pointer"},s={cursor:"auto"};function t(g,h){return M.behavior.zoom().translate(h.translate()).scale(h.scale())}function i(g,h,y){var v=g.id,m=g.graphDiv,_=m.layout,f=_[v],S=m._fullLayout,w=S[v],E={},L={};function C(P,z){E[v+"."+P]=k.nestedProperty(f,P).get(),l.call("_storeDirectGUIEdit",_,S._preGUI,E);var G=k.nestedProperty(w,P);G.get()!==z&&(G.set(z),k.nestedProperty(f,P).set(z),L[v+"."+P]=z)}y(C),C("projection.scale",h.scale()/g.fitScale),C("fitbounds",!1),m.emit("plotly_relayout",L)}function r(g,h){var y=t(0,h);function v(m){var _=h.invert(g.midPt);m("center.lon",_[0]),m("center.lat",_[1])}return y.on("zoomstart",function(){M.select(this).style(d)}).on("zoom",function(){h.scale(M.event.scale).translate(M.event.translate),g.render(!0);var m=h.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":h.scale()/g.fitScale,"geo.center.lon":m[0],"geo.center.lat":m[1]})}).on("zoomend",function(){M.select(this).style(s),i(g,h,v)}),y}function n(g,h){var y,v,m,_,f,S,w,E,L,C=t(0,h);function P(G){return h.invert(G)}function z(G){var O=h.rotate(),H=h.invert(g.midPt);G("projection.rotation.lon",-O[0]),G("center.lon",H[0]),G("center.lat",H[1])}return C.on("zoomstart",function(){M.select(this).style(d),y=M.mouse(this),v=h.rotate(),m=h.translate(),_=v,f=P(y)}).on("zoom",function(){if(S=M.mouse(this),function(H){var N=P(H);if(!N)return!0;var B=h(N);return Math.abs(B[0]-H[0])>2||Math.abs(B[1]-H[1])>2}(y))return C.scale(h.scale()),void C.translate(h.translate());h.scale(M.event.scale),h.translate([m[0],M.event.translate[1]]),f?P(S)&&(E=P(S),w=[_[0]+(E[0]-f[0]),v[1],v[2]],h.rotate(w),_=w):f=P(y=S),L=!0,g.render(!0);var G=h.rotate(),O=h.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":h.scale()/g.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1],"geo.projection.rotation.lon":-G[0]})}).on("zoomend",function(){M.select(this).style(s),L&&i(g,h,z)}),C}function o(g,h){var y;h.rotate(),h.scale();var v=t(0,h),m=function(w){for(var E=0,L=arguments.length,C=[];++E<L;)C.push(arguments[E]);var P=M.dispatch.apply(null,C);return P.of=function(z,G){return function(O){var H;try{H=O.sourceEvent=M.event,O.target=w,M.event=O,P[O.type].apply(z,G)}finally{M.event=H}}},P}(v,"zoomstart","zoom","zoomend"),_=0,f=v.on;function S(w){var E=h.rotate();w("projection.rotation.lon",-E[0]),w("projection.rotation.lat",-E[1])}return v.on("zoomstart",function(){M.select(this).style(d);var w,E,L,C,P,z,G,O,H,N,B,V=M.mouse(this),q=h.rotate(),te=q,K=h.translate(),J=(E=.5*(w=q)[0]*T,L=.5*w[1]*T,C=.5*w[2]*T,P=Math.sin(E),z=Math.cos(E),G=Math.sin(L),O=Math.cos(L),H=Math.sin(C),[z*O*(N=Math.cos(C))+P*G*H,P*O*N-z*G*H,z*G*N+P*O*H,z*O*H-P*G*N]);y=a(h,V),f.call(v,"zoom",function(){var Y,W,Q,ne,re,ae,ue,pe,ge,_e,me=M.mouse(this);if(h.scale(M.event.scale),y){if(a(h,me)){h.rotate(q).translate(K);var ve=a(h,me),Oe=function(se,oe){if(se&&oe){var he=function(Ie,Fe){return[Ie[1]*Fe[2]-Ie[2]*Fe[1],Ie[2]*Fe[0]-Ie[0]*Fe[2],Ie[0]*Fe[1]-Ie[1]*Fe[0]]}(se,oe),Ee=Math.sqrt(x(he,he)),ke=.5*Math.acos(Math.max(-1,Math.min(1,x(se,oe)))),be=Math.sin(ke)/Ee;return Ee&&[Math.cos(ke),he[2]*be,-he[1]*be,he[0]*be]}}(y,ve),Me=function(se){return[Math.atan2(2*(se[0]*se[1]+se[2]*se[3]),1-2*(se[1]*se[1]+se[2]*se[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(se[0]*se[2]-se[3]*se[1]))))*b,Math.atan2(2*(se[0]*se[3]+se[1]*se[2]),1-2*(se[2]*se[2]+se[3]*se[3]))*b]}((Q=(Y=J)[0],ne=Y[1],re=Y[2],ae=Y[3],[Q*(ue=(W=Oe)[0])-ne*(pe=W[1])-re*(ge=W[2])-ae*(_e=W[3]),Q*pe+ne*ue+re*_e-ae*ge,Q*ge-ne*_e+re*ue+ae*pe,Q*_e+ne*ge-re*pe+ae*ue])),Te=function(se,oe,he){var Ee=c(oe,2,se[0]);Ee=c(Ee,1,se[1]),Ee=c(Ee,0,se[2]-he[2]);var ke,be,Ie=oe[0],Fe=oe[1],ce=oe[2],we=Ee[0],ye=Ee[1],Ce=Ee[2],Re=Math.atan2(Fe,Ie)*b,ze=Math.sqrt(Ie*Ie+Fe*Fe);Math.abs(ye)>ze?(be=(ye>0?90:-90)-Re,ke=0):(be=Math.asin(ye/ze)*b-Re,ke=Math.sqrt(ze*ze-ye*ye));var He=180-be-2*Re,Ge=(Math.atan2(Ce,we)-Math.atan2(ce,ke))*b,Je=(Math.atan2(Ce,we)-Math.atan2(ce,-ke))*b;return u(he[0],he[1],be,Ge)<=u(he[0],he[1],He,Je)?[be,Ge,he[2]]:[He,Je,he[2]]}(Me,y,te);isFinite(Te[0])&&isFinite(Te[1])&&isFinite(Te[2])||(Te=te),h.rotate(Te),te=Te}}else y=a(h,V=me);m.of(this,arguments)({type:"zoom"})}),B=m.of(this,arguments),_++||B({type:"zoomstart"})}).on("zoomend",function(){var w;M.select(this).style(s),f.call(v,"zoom",null),w=m.of(this,arguments),--_||w({type:"zoomend"}),i(g,h,S)}).on("zoom.redraw",function(){g.render(!0);var w=h.rotate();g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":h.scale()/g.fitScale,"geo.projection.rotation.lon":-w[0],"geo.projection.rotation.lat":-w[1]})}),M.rebind(v,m,"on")}function a(g,h){var y=g.invert(h);return y&&isFinite(y[0])&&isFinite(y[1])&&function(v){var m=v[0]*T,_=v[1]*T,f=Math.cos(_);return[f*Math.cos(m),f*Math.sin(m),Math.sin(_)]}(y)}function u(g,h,y,v){var m=p(y-g),_=p(v-h);return Math.sqrt(m*m+_*_)}function p(g){return(g%360+540)%360-180}function c(g,h,y){var v=y*T,m=g.slice(),_=h===0?1:0,f=h===2?1:2,S=Math.cos(v),w=Math.sin(v);return m[_]=g[_]*S-g[f]*w,m[f]=g[f]*S+g[_]*w,m}function x(g,h){for(var y=0,v=0,m=g.length;v<m;++v)y+=g[v]*h[v];return y}ee.exports=function(g,h){var y=g.projection;return(h._isScoped?r:h._isClipped?o:n)(g,y)}},27659:function(ee,D,e){var M=e(73972),k=e(85555).SUBPLOT_PATTERN;D.AU=function(l,T,b){var d=M.subplotsRegistry[T];if(!d)return[];for(var s=d.attr,t=[],i=0;i<l.length;i++){var r=l[i];r[0].trace[s]===b&&t.push(r)}return t},D.a0=function(l,T){var b,d=[],s=[];if(!(b=typeof T=="string"?M.getModule(T).plot:typeof T=="function"?T:T.plot))return[d,l];for(var t=0;t<l.length;t++){var i=l[t],r=i[0].trace;r.visible===!0&&r._length!==0&&(r._module&&r._module.plot===b?d.push(i):s.push(i))}return[d,s]},D.NG=function(l,T,b){if(!M.subplotsRegistry[T])return[];var d,s,t,i=M.subplotsRegistry[T].attr,r=[];if(T==="gl2d"){var n=b.match(k);s="x"+n[1],t="y"+n[2]}for(var o=0;o<l.length;o++)d=l[o],T==="gl2d"&&M.traceIs(d,"gl2d")?d[i[0]]===s&&d[i[1]]===t&&r.push(d):d[i]===b&&r.push(d);return r}},75071:function(ee,D,e){var M=e(16825),k=e(1195),l=e(48956),T=e(85555),b=e(38520);function d(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ee.exports=function(s){var t=s.mouseContainer,i=s.glplot,r=new d(t,i);function n(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function o(a,u,p){var c,x,g=s.calcDataBox(),h=i.viewBox,y=r.lastPos[0],v=r.lastPos[1],m=T.MINDRAG*i.pixelRatio,_=T.MINZOOM*i.pixelRatio;function f(P,z,G){var O=Math.min(z,G),H=Math.max(z,G);O!==H?(g[P]=O,g[P+2]=H,r.dataBox=g,s.setRanges(g)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(u*=i.pixelRatio,p*=i.pixelRatio,p=h[3]-h[1]-p,s.fullLayout.dragmode){case"zoom":if(a){var S=u/(h[2]-h[0])*(g[2]-g[0])+g[0],w=p/(h[3]-h[1])*(g[3]-g[1])+g[1];r.boxInited||(r.boxStart[0]=S,r.boxStart[1]=w,r.dragStart[0]=u,r.dragStart[1]=p),r.boxEnd[0]=S,r.boxEnd[1]=w,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-u)<_,L=Math.abs(r.dragStart[1]-p)<_;if(!function(){for(var P=s.graphDiv._fullLayout._axisConstraintGroups,z=s.xaxis._id,G=s.yaxis._id,O=0;O<P.length;O++)if(P[O][z]!==-1){if(P[O][G]!==-1)return!0;break}return!1}()||E&&L)E&&(r.boxEnd[0]=r.boxStart[0]),L&&(r.boxEnd[1]=r.boxStart[1]);else{c=r.boxEnd[0]-r.boxStart[0],x=r.boxEnd[1]-r.boxStart[1];var C=(g[3]-g[1])/(g[2]-g[0]);Math.abs(c*C)>Math.abs(x)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(c)*C*(x>=0?1:-1),r.boxEnd[1]<g[1]?(r.boxEnd[1]=g[1],r.boxEnd[0]=r.boxStart[0]+(g[1]-r.boxStart[1])/Math.abs(C)):r.boxEnd[1]>g[3]&&(r.boxEnd[1]=g[3],r.boxEnd[0]=r.boxStart[0]+(g[3]-r.boxStart[1])/Math.abs(C))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(x)/C*(c>=0?1:-1),r.boxEnd[0]<g[0]?(r.boxEnd[0]=g[0],r.boxEnd[1]=r.boxStart[1]+(g[0]-r.boxStart[0])*Math.abs(C)):r.boxEnd[0]>g[2]&&(r.boxEnd[0]=g[2],r.boxEnd[1]=r.boxStart[1]+(g[2]-r.boxStart[0])*Math.abs(C)))}}else r.boxEnabled?(c=r.boxStart[0]!==r.boxEnd[0],x=r.boxStart[1]!==r.boxEnd[1],c||x?(c&&(f(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),x&&(f(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,a?(r.panning||(r.dragStart[0]=u,r.dragStart[1]=p),Math.abs(r.dragStart[0]-u)<m&&(u=r.dragStart[0]),Math.abs(r.dragStart[1]-p)<m&&(p=r.dragStart[1]),c=(y-u)*(g[2]-g[0])/(i.viewBox[2]-i.viewBox[0]),x=(v-p)*(g[3]-g[1])/(i.viewBox[3]-i.viewBox[1]),g[0]+=c,g[2]+=c,g[1]+=x,g[3]+=x,s.setRanges(g),r.panning=!0,r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=u,r.lastPos[1]=p}return r.mouseListener=M(t,o),t.addEventListener("touchstart",function(a){var u=l(a.changedTouches[0],t);o(0,u[0],u[1]),o(1,u[0],u[1]),a.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(a){a.preventDefault();var u=l(a.changedTouches[0],t);o(1,u[0],u[1]),a.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(a){o(0,r.lastPos[0],r.lastPos[1]),a.preventDefault()},!!b&&{passive:!1}),r.wheelListener=k(t,function(a,u){if(!s.scrollZoom)return!1;var p=s.calcDataBox(),c=i.viewBox,x=r.lastPos[0],g=r.lastPos[1],h=Math.exp(5*u/(c[3]-c[1])),y=x/(c[2]-c[0])*(p[2]-p[0])+p[0],v=g/(c[3]-c[1])*(p[3]-p[1])+p[1];return p[0]=(p[0]-y)*h+y,p[2]=(p[2]-y)*h+y,p[1]=(p[1]-v)*h+v,p[3]=(p[3]-v)*h+v,s.setRanges(p),r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},82961:function(ee,D,e){var M=e(89298),k=e(78614);function l(d){this.scene=d,this.gl=d.gl,this.pixelRatio=d.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=l.prototype,b=["xaxis","yaxis"];T.merge=function(d){var s,t,i,r,n,o,a,u,p,c,x;for(this.titleEnable=!1,this.backgroundColor=k(d.plot_bgcolor),c=0;c<2;++c){var g=(s=b[c]).charAt(0);for(i=(t=d[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[g]?"":t.title.text,x=0;x<=2;x+=2)this.labelEnable[c+x]=!1,this.labels[c+x]=i,this.labelColor[c+x]=k(t.title.font.color),this.labelFont[c+x]=t.title.font.family,this.labelSize[c+x]=t.title.font.size,this.labelPad[c+x]=this.getLabelPad(s,t),this.tickEnable[c+x]=!1,this.tickColor[c+x]=k((t.tickfont||{}).color),this.tickAngle[c+x]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[c+x]=this.getTickPad(t),this.tickMarkLength[c+x]=0,this.tickMarkWidth[c+x]=t.tickwidth||0,this.tickMarkColor[c+x]=k(t.tickcolor),this.borderLineEnable[c+x]=!1,this.borderLineColor[c+x]=k(t.linecolor),this.borderLineWidth[c+x]=t.linewidth||0;a=this.hasSharedAxis(t),n=this.hasAxisInDfltPos(s,t)&&!a,o=this.hasAxisInAltrPos(s,t)&&!a,r=t.mirror||!1,u=a?String(r).indexOf("all")!==-1:!!r,p=a?r==="allticks":String(r).indexOf("ticks")!==-1,n?this.labelEnable[c]=!0:o&&(this.labelEnable[c+2]=!0),n?this.tickEnable[c]=t.showticklabels:o&&(this.tickEnable[c+2]=t.showticklabels),(n||u)&&(this.borderLineEnable[c]=t.showline),(o||u)&&(this.borderLineEnable[c+2]=t.showline),(n||p)&&(this.tickMarkLength[c]=this.getTickMarkLength(t)),(o||p)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(t)),this.gridLineEnable[c]=t.showgrid,this.gridLineColor[c]=k(t.gridcolor),this.gridLineWidth[c]=t.gridwidth,this.zeroLineEnable[c]=t.zeroline,this.zeroLineColor[c]=k(t.zerolinecolor),this.zeroLineWidth[c]=t.zerolinewidth}},T.hasSharedAxis=function(d){var s=this.scene,t=s.fullLayout._subplots.gl2d;return M.findSubplotsWithAxis(t,d).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(d,s){var t=s.side;return d==="xaxis"?t==="bottom":d==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(d,s){var t=s.side;return d==="xaxis"?t==="top":d==="yaxis"?t==="right":void 0},T.getLabelPad=function(d,s){var t=1.5,i=s.title.font.size,r=s.showticklabels;return d==="xaxis"?s.side==="top"?i*(t+(r?1:0))-10:i*(t+(r?.5:0))-10:d==="yaxis"?s.side==="right"?10+i*(t+(r?1:.5)):10+i*(t+(r?.5:0)):void 0},T.getTickPad=function(d){return d.ticks==="outside"?10+d.ticklen:15},T.getTickMarkLength=function(d){if(!d.ticks)return 0;var s=d.ticklen;return d.ticks==="inside"?-s:s},ee.exports=function(d){return new l(d)}},4796:function(ee,D,e){var M=e(30962).overrideAll,k=e(92918),l=e(10820),T=e(77922),b=e(85555),d=e(93612),s=e(528),t=e(27659).NG;D.name="gl2d",D.attr=["xaxis","yaxis"],D.idRoot=["x","y"],D.idRegex=b.idRegex,D.attrRegex=b.attrRegex,D.attributes=e(89502),D.supplyLayoutDefaults=function(i,r,n){r._has("cartesian")||d.supplyLayoutDefaults(i,r,n)},D.layoutAttrOverrides=M(d.layoutAttributes,"plot","from-root"),D.baseLayoutAttrOverrides=M({plot_bgcolor:l.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),D.plot=function(i){for(var r=i._fullLayout,n=i._fullData,o=r._subplots.gl2d,a=0;a<o.length;a++){var u=o[a],p=r._plots[u],c=t(n,"gl2d",u),x=p._scene2d;x===void 0&&(x=new k({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},r),p._scene2d=x),x.plot(c,i.calcdata,r,i.layout)}},D.clean=function(i,r,n,o){for(var a=o._subplots.gl2d||[],u=0;u<a.length;u++){var p=a[u],c=o._plots[p];c._scene2d&&t(i,"gl2d",p).length===0&&(c._scene2d.destroy(),delete o._plots[p])}d.clean.apply(this,arguments)},D.drawFramework=function(i){i._context.staticPlot||d.drawFramework(i)},D.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,o=0;o<n.length;o++){var a=r._plots[n[o]]._scene2d,u=a.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),a.destroy()}},D.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,o=0;o<n.length;o++)r._plots[n[o]]._scene2d.updateFx(r.dragmode)}},92918:function(ee,D,e){var M,k,l=e(73972),T=e(89298),b=e(30211),d=e(9330).gl_plot2d,s=e(9330).gl_spikes2d,t=e(9330).gl_select_box,i=e(40372),r=e(82961),n=e(75071),o=e(58617),a=e(99082),u=a.enforce,p=a.clean,c=e(71739).doAutoRange,x=e(64505),g=x.drawMode,h=x.selectMode,y=["xaxis","yaxis"],v=e(85555).SUBPLOT_PATTERN;function m(f,S){this.container=f.container,this.graphDiv=f.graphDiv,this.pixelRatio=f.plotGlPixelRatio||window.devicePixelRatio,this.id=f.id,this.staticPlot=!!f.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(S),this.glplot=d(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ee.exports=m;var _=m.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(k||(M=document.createElement("canvas"),k=i({canvas:M,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=M,this.gl=k}else{var f=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:f,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return o(this),void(this.stopped=!0);this.canvas=f,this.gl=S}var w=this.canvas;w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style["pointer-events"]="none",this.updateSize(w);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(L);var P=this;L.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),L.addEventListener("mouseover",function(){P.isMouseOver=!0})},_.toImage=function(f){f||(f="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(M),this.updateSize(this.canvas);var S=this.glplot.gl,w=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var L=new Uint8Array(w*E*4);S.readPixels(0,0,w,E,S.RGBA,S.UNSIGNED_BYTE,L);for(var C=0,P=E-1;C<P;++C,--P)for(var z=0;z<w;++z)for(var G=0;G<4;++G){var O=L[4*(w*C+z)+G];L[4*(w*C+z)+G]=L[4*(w*P+z)+G],L[4*(w*P+z)+G]=O}var H=document.createElement("canvas");H.width=w,H.height=E;var N,B=H.getContext("2d",{willReadFrequently:!0}),V=B.createImageData(w,E);switch(V.data.set(L),B.putImageData(V,0,0),f){case"jpeg":N=H.toDataURL("image/jpeg");break;case"webp":N=H.toDataURL("image/webp");break;default:N=H.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(M),N},_.updateSize=function(f){f||(f=this.canvas);var S=this.pixelRatio,w=this.fullLayout,E=w.width,L=w.height,C=0|Math.ceil(S*E),P=0|Math.ceil(S*L);return f.width===C&&f.height===P||(f.width=C,f.height=P),f},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var f=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var w=0;w<f[S].length;++w)f[S][w].text=f[S][w].text+"";return f},_.updateRefs=function(f){this.fullLayout=f;var S=this.id.match(v),w="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[w],this.yaxis=this.fullLayout[E]},_.relayoutCallback=function(){var f=this.graphDiv,S=this.xaxis,w=this.yaxis,E=f.layout,L={},C=L[S._name+".range"]=S.range.slice(),P=L[w._name+".range"]=w.range.slice();L[S._name+".autorange"]=S.autorange,L[w._name+".autorange"]=w.autorange,l.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,L);var z=E[S._name];z.range=C,z.autorange=S.autorange;var G=E[w._name];G.range=P,G.autorange=w.autorange,L.lastInputTime=this.camera.lastInputTime,f.emit("plotly_relayout",L)},_.cameraChanged=function(){var f=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(w,E){for(var L=0;L<2;++L){var C=w[L],P=E[L];if(C.length!==P.length)return!0;for(var z=0;z<C.length;++z)if(C[z].x!==P[z].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=f.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var f=this.graphDiv,S=this.fullLayout.annotations,w=0;w<S.length;w++){var E=S[w];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&l.getComponentMethod("annotations","drawOne")(f,w)}},_.destroy=function(){if(this.glplot){var f=this.traces;f&&Object.keys(f).map(function(S){f[S].dispose(),delete f[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(f,S,w){var E=this.glplot;this.updateRefs(w),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(f,S),this.updateFx(w.dragmode);var L=w.width,C=w.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(w),P.screenBox=[0,0,L,C];var z={_fullLayout:{_axisConstraintGroups:w._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:w._size}};p(z,this.xaxis),p(z,this.yaxis);var G,O,H=w._size,N=this.xaxis.domain,B=this.yaxis.domain;for(P.viewBox=[H.l+N[0]*H.w,H.b+B[0]*H.h,L-H.r-(1-N[1])*H.w,C-H.t-(1-B[1])*H.h],this.mouseContainer.style.width=H.w*(N[1]-N[0])+"px",this.mouseContainer.style.height=H.h*(B[1]-B[0])+"px",this.mouseContainer.height=H.h*(B[1]-B[0]),this.mouseContainer.style.left=H.l+N[0]*H.w+"px",this.mouseContainer.style.top=H.t+(1-B[1])*H.h+"px",O=0;O<2;++O)(G=this[y[O]])._length=P.viewBox[O+2]-P.viewBox[O],c(this.graphDiv,G),G.setScale();u(z),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(w),E.update(P),this.glplot.draw()},_.calcDataBox=function(){var f=this.xaxis,S=this.yaxis,w=f.range,E=S.range,L=f.r2l,C=S.r2l;return[L(w[0]),C(E[0]),L(w[1]),C(E[1])]},_.setRanges=function(f){var S=this.xaxis,w=this.yaxis,E=S.l2r,L=w.l2r;S.range=[E(f[0]),E(f[2])],w.range=[L(f[1]),L(f[3])]},_.updateTraces=function(f,S){var w,E,L,C=Object.keys(this.traces);this.fullData=f;e:for(w=0;w<C.length;w++){var P=C[w],z=this.traces[P];for(E=0;E<f.length;E++)if((L=f[E]).uid===P&&L.type===z.type)continue e;z.dispose(),delete this.traces[P]}for(w=0;w<f.length;w++){L=f[w];var G=S[w],O=this.traces[L.uid];O?O.update(L,G):(O=L._module.plot(this,L,G),this.traces[L.uid]=O)}this.glplot.objects.sort(function(H,N){return H._trace.index-N._trace.index})},_.updateFx=function(f){h(f)||g(f)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=f==="pan"?"move":f==="zoom"?"crosshair":null},_.emitPointAction=function(f,S){for(var w,E=f.trace.uid,L=f.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(w=this.fullData[C]);var P={x:f.traceCoord[0],y:f.traceCoord[1],curveNumber:w.index,pointNumber:L,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(P,w,L),this.graphDiv.emit(S,{points:[P]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var f=this.glplot,S=this.camera,w=S.mouseListener,E=this.lastButtonState===1&&w.buttons===0,L=this.fullLayout;this.lastButtonState=w.buttons,this.cameraChanged();var C,P=w.x*f.pixelRatio,z=this.canvas.height-f.pixelRatio*w.y;if(S.boxEnabled&&L.dragmode==="zoom"){this.selectBox.enabled=!0;for(var G=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],O=0;O<2;O++)S.boxStart[O]===S.boxEnd[O]&&(G[O]=f.dataBox[O],G[O+2]=f.dataBox[O+2]);f.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var H=L._size,N=this.xaxis.domain,B=this.yaxis.domain,V=(C=f.pick(P/f.pixelRatio+H.l+N[0]*H.w,z/f.pixelRatio-(H.t+(1-B[1])*H.h)))&&C.object._trace.handlePick(C);if(V&&E&&this.emitPointAction(V,"plotly_click"),C&&C.object._trace.hoverinfo!=="skip"&&L.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var q=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),q.screenCoord=[((f.viewBox[2]-f.viewBox[0])*(C.dataCoord[0]-f.dataBox[0])/(f.dataBox[2]-f.dataBox[0])+f.viewBox[0])/f.pixelRatio,(this.canvas.height-(f.viewBox[3]-f.viewBox[1])*(C.dataCoord[1]-f.dataBox[1])/(f.dataBox[3]-f.dataBox[1])-f.viewBox[1])/f.pixelRatio],this.emitPointAction(V,"plotly_hover");var te=this.fullData[q.trace.index]||{},K=q.pointIndex,J=b.castHoverinfo(te,L,K);if(J&&J!=="all"){var Y=J.split("+");Y.indexOf("x")===-1&&(q.traceCoord[0]=void 0),Y.indexOf("y")===-1&&(q.traceCoord[1]=void 0),Y.indexOf("z")===-1&&(q.traceCoord[2]=void 0),Y.indexOf("text")===-1&&(q.textLabel=void 0),Y.indexOf("name")===-1&&(q.name=void 0)}b.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:b.castHoverOption(te,K,"bgcolor")||q.color,borderColor:b.castHoverOption(te,K,"bordercolor"),fontFamily:b.castHoverOption(te,K,"font.family"),fontSize:b.castHoverOption(te,K,"font.size"),fontColor:b.castHoverOption(te,K,"font.color"),nameLength:b.castHoverOption(te,K,"namelength"),textAlign:b.castHoverOption(te,K,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),f.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},_.hoverFormatter=function(f,S){if(S!==void 0){var w=this[f];return T.tickText(w,w.c2l(S),"hover").text}}},58547:function(ee,D,e){var M=e(30962).overrideAll,k=e(528),l=e(33539),T=e(27659).NG,b=e(71828),d=e(77922),s="gl3d",t="scene";D.name=s,D.attr=t,D.idRoot=t,D.idRegex=D.attrRegex=b.counterRegex("scene"),D.attributes=e(59084),D.layoutAttributes=e(65500),D.baseLayoutAttrOverrides=M({hoverlabel:k.hoverlabel},"plot","nested"),D.supplyLayoutDefaults=e(24682),D.plot=function(i){for(var r=i._fullLayout,n=i._fullData,o=r._subplots[s],a=0;a<o.length;a++){var u=o[a],p=T(n,s,u),c=r[u],x=c.camera,g=c._scene;g||(g=new l({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:x},r),c._scene=g),g.viewInitial||(g.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),g.plot(p,r,i.layout)}},D.clean=function(i,r,n,o){for(var a=o._subplots[s]||[],u=0;u<a.length;u++){var p=a[u];!r[p]&&o[p]._scene&&(o[p]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+p).remove())}},D.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots[s],o=r._size,a=0;a<n.length;a++){var u=r[n[a]],p=u.domain,c=u._scene,x=c.toImage("png");r._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":x,x:o.l+o.w*p.x[0],y:o.t+o.h*(1-p.y[1]),width:o.w*(p.x[1]-p.x[0]),height:o.h*(p.y[1]-p.y[0]),preserveAspectRatio:"none"}),c.destroy()}},D.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var r=i.substr(5);return r==="1"&&(r=""),t+r}},D.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots[s],o=0;o<n.length;o++)r[n[o]]._scene.updateFx(r.dragmode,r.hovermode)}},59084:function(ee){ee.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(ee,D,e){var M=e(7901),k=e(13838),l=e(1426).extendFlat,T=e(30962).overrideAll;ee.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:l({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:l({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:l({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},3277:function(ee,D,e){var M=e(84267).mix,k=e(71828),l=e(44467),T=e(77894),b=e(951),d=e(71453),s=["xaxis","yaxis","zaxis"];ee.exports=function(t,i,r){var n,o;function a(c,x){return k.coerce(n,o,T,c,x)}for(var u=0;u<s.length;u++){var p=s[u];n=t[p]||{},(o=l.newContainer(i,p))._id=p[0]+r.scene,o._name=p,b(n,o,a,r),d(n,o,a,{font:r.font,letter:p[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),a("gridcolor",M(o.color,r.bgColor,72.72727272727273).toRgbString()),a("title.text",p[0]),o.setScale=k.noop,a("showspikes")&&(a("spikesides"),a("spikethickness"),a("spikecolor",o.color)),a("showaxeslabels"),a("showbackground")&&a("backgroundcolor")}}},30422:function(ee,D,e){var M=e(78614),k=e(71828),l=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(b,d){for(var s=this,t=0;t<3;++t){var i=d[l[t]];i.visible?(s.labels[t]=b._meta?k.templateString(i.title.text,b._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(s.labelColor[t]=M(i.title.font.color)),i.title.font.family&&(s.labelFont[t]=i.title.font.family),i.title.font.size&&(s.labelSize[t]=i.title.font.size)),"showline"in i&&(s.lineEnable[t]=i.showline),"linecolor"in i&&(s.lineColor[t]=M(i.linecolor)),"linewidth"in i&&(s.lineWidth[t]=i.linewidth),"showgrid"in i&&(s.gridEnable[t]=i.showgrid),"gridcolor"in i&&(s.gridColor[t]=M(i.gridcolor)),"gridwidth"in i&&(s.gridWidth[t]=i.gridwidth),i.type==="log"?s.zeroEnable[t]=!1:"zeroline"in i&&(s.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(s.zeroLineColor[t]=M(i.zerolinecolor)),"zerolinewidth"in i&&(s.zeroLineWidth[t]=i.zerolinewidth),"ticks"in i&&i.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in i&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(s.lineTickColor[t]=M(i.tickcolor)),"tickwidth"in i&&(s.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(s.tickAngle[t]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(s.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(s.tickColor[t]=M(i.tickfont.color)),i.tickfont.family&&(s.tickFont[t]=i.tickfont.family),i.tickfont.size&&(s.tickSize[t]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):i.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in i&&i.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=M(i.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},ee.exports=function(b,d){var s=new T;return s.merge(b,d),s}},24682:function(ee,D,e){var M=e(71828),k=e(7901),l=e(73972),T=e(49119),b=e(3277),d=e(65500),s=e(27659).NG,t="gl3d";function i(r,n,o,a){for(var u=o("bgcolor"),p=k.combine(u,a.paper_bgcolor),c=["up","center","eye"],x=0;x<c.length;x++)o("camera."+c[x]+".x"),o("camera."+c[x]+".y"),o("camera."+c[x]+".z");o("camera.projection.type");var g=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),h=o("aspectmode",g?"manual":"auto");g||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},h==="manual"&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var y=s(a.fullData,t,a.id);b(r,n,{font:a.font,scene:a.id,data:y,bgColor:p,calendar:a.calendar,autotypenumbersDflt:a.autotypenumbersDflt,fullLayout:a.fullLayout}),l.getComponentMethod("annotations3d","handleDefaults")(r,n,a);var v=a.getDfltFromLayout("dragmode");if(v!==!1&&!v)if(v="orbit",r.camera&&r.camera.up){var m=r.camera.up.x,_=r.camera.up.y,f=r.camera.up.z;f!==0&&(m&&_&&f?f/Math.sqrt(m*m+_*_+f*f)>.999&&(v="turntable"):v="turntable")}else v="turntable";o("dragmode",v),o("hovermode",a.getDfltFromLayout("hovermode"))}ee.exports=function(r,n,o){var a=n._basePlotModules.length>1;T(r,n,o,{type:t,attributes:d,handleDefaults:i,fullLayout:n,font:n.font,fullData:o,getDfltFromLayout:function(u){if(!a)return M.validate(r[u],d[u])?r[u]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},65500:function(ee,D,e){var M=e(77894),k=e(27670).Y,l=e(1426).extendFlat,T=e(71828).counterRegex;function b(d,s,t){return{x:{valType:"number",dflt:d,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}ee.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(b(0,0,1),{}),center:l(b(0,0,0),{}),eye:l(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(ee,D,e){var M=e(78614),k=["xaxis","yaxis","zaxis"];function l(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}l.prototype.merge=function(T){for(var b=0;b<3;++b){var d=T[k[b]];d.visible?(this.enabled[b]=d.showspikes,this.colors[b]=M(d.spikecolor),this.drawSides[b]=d.spikesides,this.lineWidth[b]=d.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},ee.exports=function(T){var b=new l;return b.merge(T),b}},96085:function(ee,D,e){ee.exports=function(b){for(var d=b.axesOptions,s=b.glplot.axesPixels,t=b.fullSceneLayout,i=[[],[],[]],r=0;r<3;++r){var n=t[l[r]];if(n._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/b.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))i[r]=[];else{n._input_range=n.range.slice(),n.range[0]=s[r].lo/b.dataScale[r],n.range[1]=s[r].hi/b.dataScale[r],n._m=1/(b.dataScale[r]*s[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var o=n.tickmode;if(n.tickmode==="auto"){n.tickmode="linear";var a=n.nticks||k.constrain(n._length/40,4,9);M.autoTicks(n,Math.abs(n.range[1]-n.range[0])/a)}for(var u=M.calcTicks(n,{msUTC:!0}),p=0;p<u.length;++p)u[p].x=u[p].x*b.dataScale[r],n.type==="date"&&(u[p].text=u[p].text.replace(/\<br\>/g," "));i[r]=u,n.tickmode=o}}for(d.ticks=i,r=0;r<3;++r)for(T[r]=.5*(b.glplot.bounds[0][r]+b.glplot.bounds[1][r]),p=0;p<2;++p)d.bounds[p][r]=b.glplot.bounds[p][r];b.contourLevels=function(c){for(var x=new Array(3),g=0;g<3;++g){for(var h=c[g],y=new Array(h.length),v=0;v<h.length;++v)y[v]=h[v].x;x[g]=y}return x}(i)};var M=e(89298),k=e(71828),l=["xaxis","yaxis","zaxis"],T=[0,0,0]},63538:function(ee){function D(e,M){var k,l,T=[0,0,0,0];for(k=0;k<4;++k)for(l=0;l<4;++l)T[l]+=e[4*k+l]*M[k];return T}ee.exports=function(e,M){return D(e.projection,D(e.view,D(e.model,[M[0],M[1],M[2],1])))}},33539:function(ee,D,e){var M,k,l=e(9330).gl_plot3d,T=l.createCamera,b=l.createScene,d=e(40372),s=e(38520),t=e(73972),i=e(71828),r=i.preserveDrawingBuffer(),n=e(89298),o=e(30211),a=e(78614),u=e(58617),p=e(63538),c=e(30422),x=e(13133),g=e(96085),h=e(71739).applyAutorangeOptions,y=!1;function v(w,E){var L=document.createElement("div"),C=w.container;this.graphDiv=w.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",L.appendChild(P),this.svgContainer=P,L.id=w.id,L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",C.appendChild(L),this.fullLayout=E,this.id=w.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(E,E[this.id]),this.spikeOptions=x(E[this.id]),this.container=L,this.staticMode=!!w.staticPlot,this.pixelRatio=this.pixelRatio||w.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var m=v.prototype;m.prepareOptions=function(){var w=this,E={canvas:w.canvas,gl:w.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:w.container,axes:w.axesOptions,spikes:w.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:w.camera,pixelRatio:w.pixelRatio};if(w.staticMode){if(!(k||(M=document.createElement("canvas"),k=d({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=k,E.canvas=M}return E};var _=!0;m.tryCreatePlot=function(){var w=this,E=w.prepareOptions(),L=!0;try{w.glplot=b(E)}catch{if(w.staticMode||!_||r)L=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=E.glOptions.preserveDrawingBuffer=!0,w.glplot=b(E)}catch{r=E.glOptions.preserveDrawingBuffer=!1,L=!1}}}return _=!1,L},m.initializeGLCamera=function(){var w=this,E=w.fullSceneLayout.camera,L=E.projection.type==="orthographic";w.camera=T(w.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:L,zoomMin:.01,zoomMax:100,mode:"orbit"})},m.initializeGLPlot=function(){var w=this;if(w.initializeGLCamera(),!w.tryCreatePlot())return u(w);w.traces={},w.make4thDimension();var E=w.graphDiv,L=E.layout,C=function(){var z={};return w.isCameraChanged(L)&&(z[w.id+".camera"]=w.getCamera()),w.isAspectChanged(L)&&(z[w.id+".aspectratio"]=w.glplot.getAspectratio(),L[w.id].aspectmode!=="manual"&&(w.fullSceneLayout.aspectmode=L[w.id].aspectmode=z[w.id+".aspectmode"]="manual")),z},P=function(z){if(z.fullSceneLayout.dragmode!==!1){var G=C();z.saveLayout(L),z.graphDiv.emit("plotly_relayout",G)}};return w.glplot.canvas&&(w.glplot.canvas.addEventListener("mouseup",function(){P(w)}),w.glplot.canvas.addEventListener("touchstart",function(){y=!0}),w.glplot.canvas.addEventListener("wheel",function(z){if(E._context._scrollZoom.gl3d){if(w.camera._ortho){var G=z.deltaX>z.deltaY?1.1:.9090909090909091,O=w.glplot.getAspectratio();w.glplot.setAspectratio({x:G*O.x,y:G*O.y,z:G*O.z})}P(w)}},!!s&&{passive:!1}),w.glplot.canvas.addEventListener("mousemove",function(){if(w.fullSceneLayout.dragmode!==!1&&w.camera.mouseListener.buttons!==0){var z=C();w.graphDiv.emit("plotly_relayouting",z)}}),w.staticMode||w.glplot.canvas.addEventListener("webglcontextlost",function(z){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:z,layer:w.id})},!1)),w.glplot.oncontextloss=function(){w.recoverContext()},w.glplot.onrender=function(){w.render()},!0},m.render=function(){var w,E=this,L=E.graphDiv,C=E.svgContainer,P=E.container.getBoundingClientRect();L._fullLayout._calcInverseTransform(L);var z=L._fullLayout._invScaleX,G=L._fullLayout._invScaleY,O=P.width*z,H=P.height*G;C.setAttributeNS(null,"viewBox","0 0 "+O+" "+H),C.setAttributeNS(null,"width",O),C.setAttributeNS(null,"height",H),g(E),E.glplot.axes.update(E.axesOptions);for(var N=Object.keys(E.traces),B=null,V=E.glplot.selection,q=0;q<N.length;++q)(w=E.traces[N[q]]).data.hoverinfo!=="skip"&&w.handlePick(V)&&(B=w),w.setContourLevels&&w.setContourLevels();function te(me,ve,Oe){var Me=E.fullSceneLayout[me+"axis"];return Me.type!=="log"&&(ve=Me.d2l(ve)),n.hoverLabelText(Me,ve,Oe)}if(B!==null){var K=p(E.glplot.cameraParams,V.dataCoordinate);w=B.data;var J,Y=L._fullData[w.index],W=V.index,Q={xLabel:te("x",V.traceCoordinate[0],w.xhoverformat),yLabel:te("y",V.traceCoordinate[1],w.yhoverformat),zLabel:te("z",V.traceCoordinate[2],w.zhoverformat)},ne=o.castHoverinfo(Y,E.fullLayout,W),re=(ne||"").split("+"),ae=ne&&ne==="all";Y.hovertemplate||ae||(re.indexOf("x")===-1&&(Q.xLabel=void 0),re.indexOf("y")===-1&&(Q.yLabel=void 0),re.indexOf("z")===-1&&(Q.zLabel=void 0),re.indexOf("text")===-1&&(V.textLabel=void 0),re.indexOf("name")===-1&&(B.name=void 0));var ue=[];w.type==="cone"||w.type==="streamtube"?(Q.uLabel=te("x",V.traceCoordinate[3],w.uhoverformat),(ae||re.indexOf("u")!==-1)&&ue.push("u: "+Q.uLabel),Q.vLabel=te("y",V.traceCoordinate[4],w.vhoverformat),(ae||re.indexOf("v")!==-1)&&ue.push("v: "+Q.vLabel),Q.wLabel=te("z",V.traceCoordinate[5],w.whoverformat),(ae||re.indexOf("w")!==-1)&&ue.push("w: "+Q.wLabel),Q.normLabel=V.traceCoordinate[6].toPrecision(3),(ae||re.indexOf("norm")!==-1)&&ue.push("norm: "+Q.normLabel),w.type==="streamtube"&&(Q.divergenceLabel=V.traceCoordinate[7].toPrecision(3),(ae||re.indexOf("divergence")!==-1)&&ue.push("divergence: "+Q.divergenceLabel)),V.textLabel&&ue.push(V.textLabel),J=ue.join("<br>")):w.type==="isosurface"||w.type==="volume"?(Q.valueLabel=n.hoverLabelText(E._mockAxis,E._mockAxis.d2l(V.traceCoordinate[3]),w.valuehoverformat),ue.push("value: "+Q.valueLabel),V.textLabel&&ue.push(V.textLabel),J=ue.join("<br>")):J=V.textLabel;var pe={x:V.traceCoordinate[0],y:V.traceCoordinate[1],z:V.traceCoordinate[2],data:Y._input,fullData:Y,curveNumber:Y.index,pointNumber:W};o.appendArrayPointValue(pe,Y,W),w._module.eventData&&(pe=Y._module.eventData(pe,V,Y,{},W));var ge={points:[pe]};if(E.fullSceneLayout.hovermode){var _e=[];o.loneHover({trace:Y,x:(.5+.5*K[0]/K[3])*O,y:(.5-.5*K[1]/K[3])*H,xLabel:Q.xLabel,yLabel:Q.yLabel,zLabel:Q.zLabel,text:J,name:B.name,color:o.castHoverOption(Y,W,"bgcolor")||B.color,borderColor:o.castHoverOption(Y,W,"bordercolor"),fontFamily:o.castHoverOption(Y,W,"font.family"),fontSize:o.castHoverOption(Y,W,"font.size"),fontColor:o.castHoverOption(Y,W,"font.color"),nameLength:o.castHoverOption(Y,W,"namelength"),textAlign:o.castHoverOption(Y,W,"align"),hovertemplate:i.castOption(Y,W,"hovertemplate"),hovertemplateLabels:i.extendFlat({},pe,Q),eventData:[pe]},{container:C,gd:L,inOut_bbox:_e}),pe.bbox=_e[0]}V.distance<5&&(V.buttons||y)?L.emit("plotly_click",ge):L.emit("plotly_hover",ge),this.oldEventData=ge}else o.loneUnhover(C),this.oldEventData&&L.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},m.recoverContext=function(){var w=this;w.glplot.dispose();var E=function(){w.glplot.gl.isContextLost()?requestAnimationFrame(E):w.initializeGLPlot()?w.plot.apply(w,w.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var f=["xaxis","yaxis","zaxis"];function S(w,E,L){for(var C=w.fullSceneLayout,P=0;P<3;P++){var z=f[P],G=z.charAt(0),O=C[z],H=E[G],N=E[G+"calendar"],B=E["_"+G+"length"];if(i.isArrayOrTypedArray(H))for(var V,q=0;q<(B||H.length);q++)if(i.isArrayOrTypedArray(H[q]))for(var te=0;te<H[q].length;++te)V=O.d2l(H[q][te],0,N),!isNaN(V)&&isFinite(V)&&(L[0][P]=Math.min(L[0][P],V),L[1][P]=Math.max(L[1][P],V));else V=O.d2l(H[q],0,N),!isNaN(V)&&isFinite(V)&&(L[0][P]=Math.min(L[0][P],V),L[1][P]=Math.max(L[1][P],V));else L[0][P]=Math.min(L[0][P],0),L[1][P]=Math.max(L[1][P],B-1)}}m.plot=function(w,E,L){var C=this;if(C.plotArgs=[w,E,L],!C.glplot.contextLost){var P,z,G,O,H,N,B=E[C.id],V=L[C.id];C.fullLayout=E,C.fullSceneLayout=B,C.axesOptions.merge(E,B),C.spikeOptions.merge(B),C.setViewport(B),C.updateFx(B.dragmode,B.hovermode),C.camera.enableWheel=C.graphDiv._context._scrollZoom.gl3d,C.glplot.setClearColor(a(B.bgcolor)),C.setConvert(H),w?Array.isArray(w)||(w=[w]):w=[];var q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(G=0;G<w.length;++G)(P=w[G]).visible===!0&&P._length!==0&&S(this,P,q);(function(Ie,Fe){for(var ce=Ie.fullSceneLayout,we=ce.annotations||[],ye=0;ye<3;ye++)for(var Ce=f[ye],Re=Ce.charAt(0),ze=ce[Ce],He=0;He<we.length;He++){var Ge=we[He];if(Ge.visible){var Je=ze.r2l(Ge[Re]);!isNaN(Je)&&isFinite(Je)&&(Fe[0][ye]=Math.min(Fe[0][ye],Je),Fe[1][ye]=Math.max(Fe[1][ye],Je))}}})(this,q);var te=[1,1,1];for(O=0;O<3;++O)q[1][O]===q[0][O]?te[O]=1:te[O]=1/(q[1][O]-q[0][O]);for(C.dataScale=te,C.convertAnnotations(this),G=0;G<w.length;++G)(P=w[G]).visible===!0&&P._length!==0&&((z=C.traces[P.uid])?z.data.type===P.type?z.update(P):(z.dispose(),z=P._module.plot(this,P),C.traces[P.uid]=z):(z=P._module.plot(this,P),C.traces[P.uid]=z),z.name=P.name);var K=Object.keys(C.traces);e:for(G=0;G<K.length;++G){for(O=0;O<w.length;++O)if(w[O].uid===K[G]&&w[O].visible===!0&&w[O]._length!==0)continue e;(z=C.traces[K[G]]).dispose(),delete C.traces[K[G]]}C.glplot.objects.sort(function(Ie,Fe){return Ie._trace.data.index-Fe._trace.data.index});var J,Y=[[0,0,0],[0,0,0]],W=[],Q={};for(G=0;G<3;++G){var ne;if((N=(H=B[f[G]]).type)in Q?(Q[N].acc*=te[G],Q[N].count+=1):Q[N]={acc:te[G],count:1},H.autorange){Y[0][G]=1/0,Y[1][G]=-1/0;var re=C.glplot.objects,ae=C.fullSceneLayout.annotations||[],ue=H._name.charAt(0);for(O=0;O<re.length;O++){var pe=re[O],ge=pe.bounds,_e=pe._trace.data._pad||0;pe.constructor.name==="ErrorBars"&&H._lowerLogErrorBound?Y[0][G]=Math.min(Y[0][G],H._lowerLogErrorBound):Y[0][G]=Math.min(Y[0][G],ge[0][G]/te[G]-_e),Y[1][G]=Math.max(Y[1][G],ge[1][G]/te[G]+_e)}for(O=0;O<ae.length;O++){var me=ae[O];if(me.visible){var ve=H.r2l(me[ue]);Y[0][G]=Math.min(Y[0][G],ve),Y[1][G]=Math.max(Y[1][G],ve)}}if("rangemode"in H&&H.rangemode==="tozero"&&(Y[0][G]=Math.min(Y[0][G],0),Y[1][G]=Math.max(Y[1][G],0)),Y[0][G]>Y[1][G])Y[0][G]=-1,Y[1][G]=1;else{var Oe=Y[1][G]-Y[0][G];Y[0][G]-=Oe/32,Y[1][G]+=Oe/32}if(ne=[Y[0][G],Y[1][G]],ne=h(ne,H),Y[0][G]=ne[0],Y[1][G]=ne[1],H.isReversed()){var Me=Y[0][G];Y[0][G]=Y[1][G],Y[1][G]=Me}}else ne=H.range,Y[0][G]=H.r2l(ne[0]),Y[1][G]=H.r2l(ne[1]);Y[0][G]===Y[1][G]&&(Y[0][G]-=1,Y[1][G]+=1),W[G]=Y[1][G]-Y[0][G],H.range=[Y[0][G],Y[1][G]],H.limitRange(),C.glplot.setBounds(G,{min:H.range[0]*te[G],max:H.range[1]*te[G]})}var Te=B.aspectmode;if(Te==="cube")J=[1,1,1];else if(Te==="manual"){var se=B.aspectratio;J=[se.x,se.y,se.z]}else{if(Te!=="auto"&&Te!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var oe=[1,1,1];for(G=0;G<3;++G){var he=Q[N=(H=B[f[G]]).type];oe[G]=Math.pow(he.acc,1/he.count)/te[G]}J=Te==="data"||Math.max.apply(null,oe)/Math.min.apply(null,oe)<=4?oe:[1,1,1]}B.aspectratio.x=V.aspectratio.x=J[0],B.aspectratio.y=V.aspectratio.y=J[1],B.aspectratio.z=V.aspectratio.z=J[2],C.glplot.setAspectratio(B.aspectratio),C.viewInitial.aspectratio||(C.viewInitial.aspectratio={x:B.aspectratio.x,y:B.aspectratio.y,z:B.aspectratio.z}),C.viewInitial.aspectmode||(C.viewInitial.aspectmode=B.aspectmode);var Ee=B.domain||null,ke=E._size||null;if(Ee&&ke){var be=C.container.style;be.position="absolute",be.left=ke.l+Ee.x[0]*ke.w+"px",be.top=ke.t+(1-Ee.y[1])*ke.h+"px",be.width=ke.w*(Ee.x[1]-Ee.x[0])+"px",be.height=ke.h*(Ee.y[1]-Ee.y[0])+"px"}C.glplot.redraw()}},m.destroy=function(){var w=this;w.glplot&&(w.camera.mouseListener.enabled=!1,w.container.removeEventListener("wheel",w.camera.wheelListener),w.camera=null,w.glplot.dispose(),w.container.parentNode.removeChild(w.container),w.glplot=null)},m.getCamera=function(){var w,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(w=E.camera).up[0],y:w.up[1],z:w.up[2]},center:{x:w.center[0],y:w.center[1],z:w.center[2]},eye:{x:w.eye[0],y:w.eye[1],z:w.eye[2]},projection:{type:w._ortho===!0?"orthographic":"perspective"}}},m.setViewport=function(w){var E,L=this,C=w.camera;L.camera.lookAt.apply(this,[[(E=C).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),L.glplot.setAspectratio(w.aspectratio),C.projection.type==="orthographic"!==L.camera._ortho&&(L.glplot.redraw(),L.glplot.clearRGBA(),L.glplot.dispose(),L.initializeGLPlot())},m.isCameraChanged=function(w){var E=this.getCamera(),L=i.nestedProperty(w,this.id+".camera").get();function C(O,H,N,B){var V=["up","center","eye"],q=["x","y","z"];return H[V[N]]&&O[V[N]][q[B]]===H[V[N]][q[B]]}var P=!1;if(L===void 0)P=!0;else{for(var z=0;z<3;z++)for(var G=0;G<3;G++)if(!C(E,L,z,G)){P=!0;break}(!L.projection||E.projection&&E.projection.type!==L.projection.type)&&(P=!0)}return P},m.isAspectChanged=function(w){var E=this.glplot.getAspectratio(),L=i.nestedProperty(w,this.id+".aspectratio").get();return L===void 0||L.x!==E.x||L.y!==E.y||L.z!==E.z},m.saveLayout=function(w){var E,L,C,P,z,G,O=this,H=O.fullLayout,N=O.isCameraChanged(w),B=O.isAspectChanged(w),V=N||B;if(V){var q={};N&&(E=O.getCamera(),C=(L=i.nestedProperty(w,O.id+".camera")).get(),q[O.id+".camera"]=C),B&&(P=O.glplot.getAspectratio(),G=(z=i.nestedProperty(w,O.id+".aspectratio")).get(),q[O.id+".aspectratio"]=G),t.call("_storeDirectGUIEdit",w,H._preGUI,q),N&&(L.set(E),i.nestedProperty(H,O.id+".camera").set(E)),B&&(z.set(P),i.nestedProperty(H,O.id+".aspectratio").set(P),O.glplot.redraw())}return V},m.updateFx=function(w,E){var L=this,C=L.camera;if(C)if(w==="orbit")C.mode="orbit",C.keyBindingMode="rotate";else if(w==="turntable"){C.up=[0,0,1],C.mode="turntable",C.keyBindingMode="rotate";var P=L.graphDiv,z=P._fullLayout,G=L.fullSceneLayout.camera,O=G.up.x,H=G.up.y,N=G.up.z;if(N/Math.sqrt(O*O+H*H+N*N)<.999){var B=L.id+".camera.up",V={x:0,y:0,z:1},q={};q[B]=V;var te=P.layout;t.call("_storeDirectGUIEdit",te,z._preGUI,q),G.up=V,i.nestedProperty(te,B).set(V)}}else C.keyBindingMode=w;L.fullSceneLayout.hovermode=E},m.toImage=function(w){var E=this;w||(w="png"),E.staticMode&&E.container.appendChild(M),E.glplot.redraw();var L=E.glplot.gl,C=L.drawingBufferWidth,P=L.drawingBufferHeight;L.bindFramebuffer(L.FRAMEBUFFER,null);var z=new Uint8Array(C*P*4);L.readPixels(0,0,C,P,L.RGBA,L.UNSIGNED_BYTE,z),function(B,V,q){for(var te=0,K=q-1;te<K;++te,--K)for(var J=0;J<V;++J)for(var Y=0;Y<4;++Y){var W=4*(V*te+J)+Y,Q=4*(V*K+J)+Y,ne=B[W];B[W]=B[Q],B[Q]=ne}}(z,C,P),function(B,V,q){for(var te=0;te<q;++te)for(var K=0;K<V;++K){var J=4*(V*te+K),Y=B[J+3];if(Y>0)for(var W=255/Y,Q=0;Q<3;++Q)B[J+Q]=Math.min(W*B[J+Q],255)}}(z,C,P);var G=document.createElement("canvas");G.width=C,G.height=P;var O,H=G.getContext("2d",{willReadFrequently:!0}),N=H.createImageData(C,P);switch(N.data.set(z),H.putImageData(N,0,0),w){case"jpeg":O=G.toDataURL("image/jpeg");break;case"webp":O=G.toDataURL("image/webp");break;default:O=G.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(M),O},m.setConvert=function(){for(var w=0;w<3;w++){var E=this.fullSceneLayout[f[w]];n.setConvert(E,this.fullLayout),E.setScale=i.noop}},m.make4thDimension=function(){var w=this,E=w.graphDiv._fullLayout;w._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(w._mockAxis,E)},ee.exports=v},90060:function(ee){ee.exports=function(D,e,M,k){k=k||D.length;for(var l=new Array(k),T=0;T<k;T++)l[T]=[D[T],e[T],M[T]];return l}},10820:function(ee,D,e){var M=e(41940),k=e(85594),l=e(22399),T=e(29241),b=e(53777),d=e(35025),s=e(1426).extendFlat,t=M({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=l.defaultLine,ee.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(d({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:l.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:l.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:l.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},77734:function(ee,D,e){var M=e(78607),k="1.10.1",l=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=[' <a target="_blank" href="https://carto.com/">Carto</a>',l].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),d={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:l,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=M(d);ee.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:d,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+k+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function(ee,D,e){var M=e(71828);ee.exports=function(k,l){var T=k.split(" "),b=T[0],d=T[1],s=M.isArrayOrTypedArray(l)?M.mean(l):l,t=.5+s/100,i=1.5+s/100,r=["",""],n=[0,0];switch(b){case"top":r[0]="top",n[1]=-i;break;case"bottom":r[0]="bottom",n[1]=i}switch(d){case"left":r[1]="right",n[0]=-t;break;case"right":r[1]="left",n[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},50101:function(ee,D,e){var M=e(44517),k=e(71828),l=k.strTranslate,T=k.strScale,b=e(27659).AU,d=e(77922),s=e(39898),t=e(91424),i=e(63893),r=e(10481),n="mapbox",o=D.constants=e(77734);function a(u){return typeof u=="string"&&(o.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0)}D.name=n,D.attr="subplot",D.idRoot=n,D.idRegex=D.attrRegex=k.counterRegex(n),D.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},D.layoutAttributes=e(23585),D.supplyLayoutDefaults=e(77882),D.plot=function(u){var p=u._fullLayout,c=u.calcdata,x=p._subplots[n];if(M.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var g=function(f,S){var w=f._fullLayout;if(f._context.mapboxAccessToken==="")return"";for(var E=[],L=[],C=!1,P=!1,z=0;z<S.length;z++){var G=w[S[z]],O=G.accesstoken;a(G.style)&&(O?k.pushUnique(E,O):(a(G._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),C=!0),P=!0)),O&&k.pushUnique(L,O)}if(P){var H=C?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw k.error(H),new Error(H)}return E.length?(E.length>1&&k.warn(o.multipleTokensErrorMsg),E[0]):(L.length&&k.log(["Listed mapbox access token(s)",L.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,x);M.accessToken=g;for(var h=0;h<x.length;h++){var y=x[h],v=b(c,n,y),m=p[y],_=m._subplot;_||(_=new r(u,y),p[y]._subplot=_),_.viewInitial||(_.viewInitial={center:k.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),_.plot(v,p,u._promises)}},D.clean=function(u,p,c,x){for(var g=x._subplots[n]||[],h=0;h<g.length;h++){var y=g[h];!p[y]&&x[y]._subplot&&x[y]._subplot.destroy()}},D.toSVG=function(u){for(var p=u._fullLayout,c=p._subplots[n],x=p._size,g=0;g<c.length;g++){var h=p[c[g]],y=h.domain,v=h._subplot.toImage("png");p._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":v,x:x.l+x.w*y.x[0],y:x.t+x.h*(1-y.y[1]),width:x.w*(y.x[1]-y.x[0]),height:x.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var m=s.select(h._subplot.div);if(m.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var _=p._glimages.append("g");_.attr("transform",l(x.l+x.w*y.x[0]+10,x.t+x.h*(1-y.y[0])-31)),_.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var f=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=p._glimages.append("g"),w=S.append("text");w.text(f).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":f});var E=t.bBox(w.node()),L=x.w*(y.x[1]-y.x[0]);if(E.width>L/2){var C=f.split("|").join("<br>");w.text(C).attr("data-unformatted",C).call(i.convertToTspans,u),E=t.bBox(w.node())}w.attr("transform",l(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>L&&(P=L/(E.width+6));var z=[x.l+x.w*y.x[1],x.t+x.h*(1-y.y[0])];S.attr("transform",l(z[0],z[1])+T(P))}},D.updateFx=function(u){for(var p=u._fullLayout,c=p._subplots[n],x=0;x<c.length;x++)p[c[x]]._subplot.updateFx(p)}},67911:function(ee,D,e){var M=e(71828),k=e(63893).sanitizeHTML,l=e(13056),T=e(77734);function b(i,r){this.subplot=i,this.uid=i.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var d=b.prototype;function s(i){if(!i.visible)return!1;var r=i.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if(typeof r[n]!="string"||r[n].length===0)return!1;return!0}return M.isPlainObject(r)||typeof r=="string"&&r.length>0}function t(i){var r={},n={};switch(i.type){case"circle":M.extendFlat(n,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":M.extendFlat(n,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":M.extendFlat(n,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var o=i.symbol,a=l(o.textposition,o.iconsize);M.extendFlat(r,{"icon-image":o.icon+"-15","icon-size":o.iconsize/10,"text-field":o.text,"text-size":o.textfont.size,"text-anchor":a.anchor,"text-offset":a.offset,"symbol-placement":o.placement}),M.extendFlat(n,{"icon-color":i.color,"text-color":o.textfont.color,"text-opacity":i.opacity});break;case"raster":M.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:r,paint:n}}d.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=s(i)},d.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},d.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},d.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},d.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},d.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},d.updateSource=function(i){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,s(i)){var n=function(o){var a,u=o.sourcetype,p=o.source,c={type:u};return u==="geojson"?a="data":u==="vector"?a=typeof p=="string"?"url":"tiles":u==="raster"?(a="tiles",c.tileSize=256):u==="image"&&(a="url",c.coordinates=o.coordinates),c[a]=p,o.sourceattribution&&(c.attribution=k(o.sourceattribution)),c}(i);r.addSource(this.idSource,n)}},d.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var o=r[n].id;if(typeof o=="string"&&o.indexOf(T.traceLayerPrefix)===0){i=o;break}}return i},d.updateLayer=function(i){var r=this.subplot,n=t(i),o=this.lookupBelow(),a=this.findFollowingMapboxLayerId(o);this.removeLayer(),s(i)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:n.layout,paint:n.paint},a),this.layerType=i.type,this.below=o},d.updateStyle=function(i){if(s(i)){var r=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},d.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},d.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},ee.exports=function(i,r,n){var o=new b(i,r);return o.update(n),o}},23585:function(ee,D,e){var M=e(71828),k=e(7901).defaultLine,l=e(27670).Y,T=e(41940),b=e(82196).textposition,d=e(30962).overrideAll,s=e(44467).templatedArray,t=e(77734),i=T({});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ee.exports=d({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:l({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:M.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(ee,D,e){var M=e(71828),k=e(49119),l=e(85501),T=e(23585);function b(s,t,i,r){i("accesstoken",r.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var n=i("bounds.west"),o=i("bounds.east"),a=i("bounds.south"),u=i("bounds.north");n!==void 0&&o!==void 0&&a!==void 0&&u!==void 0||delete t.bounds,l(s,t,{name:"layers",handleItemDefaults:d}),t._input=s}function d(s,t){function i(u,p){return M.coerce(s,t,T.layers,u,p)}if(i("visible")){var r,n=i("sourcetype"),o=n==="raster"||n==="image";i("source"),i("sourceattribution"),n==="vector"&&i("sourcelayer"),n==="image"&&i("coordinates"),o&&(r="raster");var a=i("type",r);o&&a!=="raster"&&(a=t.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),a==="circle"&&i("circle.radius"),a==="line"&&(i("line.width"),i("line.dash")),a==="fill"&&i("fill.outlinecolor"),a==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),M.coerceFont(i,"symbol.textfont"),i("symbol.textposition"),i("symbol.placement"))}}ee.exports=function(s,t,i){k(s,t,i,{type:"mapbox",attributes:T,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},10481:function(ee,D,e){var M=e(44517),k=e(71828),l=e(41327),T=e(73972),b=e(89298),d=e(28569),s=e(30211),t=e(64505),i=t.drawMode,r=t.selectMode,n=e(47322).prepSelect,o=e(47322).clearOutline,a=e(47322).clearSelectionsCache,u=e(47322).selectOnClick,p=e(77734),c=e(67911);function x(_,f){this.id=f,this.gd=_;var S=_._fullLayout,w=_._context;this.container=S._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var g=x.prototype;g.plot=function(_,f,S){var w,E=this,L=f[E.id];E.map&&L.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),w=E.map?new Promise(function(C,P){E.updateMap(_,f,C,P)}):new Promise(function(C,P){E.createMap(_,f,C,P)}),S.push(w)},g.createMap=function(_,f,S,w){var E=this,L=f[E.id],C=E.styleObj=y(L.style);E.accessToken=L.accesstoken;var P=L.bounds,z=P?[[P.west,P.south],[P.east,P.north]]:null,G=E.map=new M.Map({container:E.div,style:C.style,center:m(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:z,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));G._canvas.style.left="0px",G._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(_,f);var O=[];O.push(new Promise(function(H){G.once("load",H)})),O=O.concat(l.fetchTraceGeoData(_)),Promise.all(O).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},g.updateMap=function(_,f,S,w){var E=this,L=E.map,C=f[this.id];E.rejectOnError(w);var P=[],z=y(C.style);JSON.stringify(E.styleObj)!==JSON.stringify(z)&&(E.styleObj=z,L.setStyle(z.style),E.traceHash={},P.push(new Promise(function(G){L.once("styledata",G)}))),P=P.concat(l.fetchTraceGeoData(_)),Promise.all(P).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},g.fillBelowLookup=function(_,f){var S,w,E=f[this.id].layers,L=this.belowLookup={},C=!1;for(S=0;S<_.length;S++){var P=_[S][0].trace,z=P._module;typeof P.below=="string"?w=P.below:z.getBelow&&(w=z.getBelow(P,this)),w===""&&(C=!0),L["trace-"+P.uid]=w||""}for(S=0;S<E.length;S++){var G=E[S];w=typeof G.below=="string"?G.below:C?"traces":"",L["layout-"+S]=w}var O,H,N={};for(O in L)N[w=L[O]]?N[w].push(O):N[w]=[O];for(w in N){var B=N[w];if(B.length>1)for(S=0;S<B.length;S++)(O=B[S]).indexOf("trace-")===0?(H=O.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):O.indexOf("layout-")===0&&(H=O.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var h={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function y(_){var f={};return k.isPlainObject(_)?(f.id=_.id,f.style=_):typeof _=="string"?(f.id=_,p.styleValuesMapbox.indexOf(_)!==-1?f.style=v(_):p.stylesNonMapbox[_]?f.style=p.stylesNonMapbox[_]:f.style=_):(f.id=p.styleValueDflt,f.style=v(p.styleValueDflt)),f.transition={duration:0,delay:0},f}function v(_){return p.styleUrlPrefix+_+"-"+p.styleUrlSuffix}function m(_){return[_.lon,_.lat]}g.updateData=function(_){var f,S,w,E,L=this.traceHash,C=_.slice().sort(function(H,N){return h[H[0].trace.type]-h[N[0].trace.type]});for(w=0;w<C.length;w++){var P=C[w],z=!1;(f=L[(S=P[0].trace).uid])&&(f.type===S.type?(f.update(P),z=!0):f.dispose()),!z&&S._module&&(L[S.uid]=S._module.plot(this,P))}var G=Object.keys(L);e:for(w=0;w<G.length;w++){var O=G[w];for(E=0;E<_.length;E++)if(O===(S=_[E][0].trace).uid)continue e;(f=L[O]).dispose(),delete L[O]}},g.updateLayout=function(_){var f=this.map,S=_[this.id];this.dragging||this.wheeling||(f.setCenter(m(S.center)),f.setZoom(S.zoom),f.setBearing(S.bearing),f.setPitch(S.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()},g.resolveOnRender=function(_){var f=this.map;f.on("render",function S(){f.loaded()&&(f.off("render",S),setTimeout(_,10))})},g.rejectOnError=function(_){var f=this.map;function S(){_(new Error(p.mapOnErrorMsg))}f.once("error",S),f.once("style.error",S),f.once("source.error",S),f.once("tile.error",S),f.once("layer.error",S)},g.createFramework=function(_){var f=this,S=f.div=document.createElement("div");S.id=f.uid,S.style.position="absolute",f.container.appendChild(S),f.xaxis={_id:"x",c2p:function(w){return f.project(w).x}},f.yaxis={_id:"y",c2p:function(w){return f.project(w).y}},f.updateFramework(_),f.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(f.mockAxis,_)},g.initFx=function(_,f){var S=this,w=S.gd,E=S.map;function L(){s.loneUnhover(f._hoverlayer)}function C(){var P=S.getView();w.emit("plotly_relayouting",S.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(S.map){var z=w._fullLayout;if(P.originalEvent||S.wheeling){var G=z[S.id];T.call("_storeDirectGUIEdit",w.layout,z._preGUI,S.getViewEdits(G));var O=S.getView();G._input.center=G.center=O.center,G._input.zoom=G.zoom=O.zoom,G._input.bearing=G.bearing=O.bearing,G._input.pitch=G.pitch=O.pitch,w.emit("plotly_relayout",S.getViewEditsWithDerived(O))}P.originalEvent&&P.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),z._rehover&&z._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(P){var z=S.div.getBoundingClientRect(),G=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return z},S.xaxis.p2c=function(){return E.unproject(G).lng},S.yaxis.p2c=function(){return E.unproject(G).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===S.id&&w._fullLayout[S.id]&&s.hover(w,P,S.id)},s.hover(w,P,S.id),w._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,L()}),E.on("zoomstart",L),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var P=w._fullLayout[S.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,S.getViewEdits(P));var z=S.viewInitial;E.setCenter(m(z.center)),E.setZoom(z.zoom),E.setBearing(z.bearing),E.setPitch(z.pitch);var G=S.getView();P._input.center=P.center=G.center,P._input.zoom=P.zoom=G.zoom,P._input.bearing=P.bearing=G.bearing,P._input.pitch=P.pitch=G.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",S.getViewEditsWithDerived(G))}),S.clearOutline=function(){a(S.dragOptions),o(S.dragOptions.gd)},S.onClickInPanFn=function(P){return function(z){var G=w._fullLayout.clickmode;G.indexOf("select")>-1&&u(z.originalEvent,w,[S.xaxis],[S.yaxis],S.id,P),G.indexOf("event")>-1&&s.click(w,z.originalEvent)}}},g.updateFx=function(_){var f=this,S=f.map,w=f.gd;if(!f.isStatic){var E,L=_.dragmode;E=function(z,G){G.isRect?(z.range={})[f.id]=[P([G.xmin,G.ymin]),P([G.xmax,G.ymax])]:(z.lassoPoints={})[f.id]=G.map(P)};var C=f.dragOptions;f.dragOptions=k.extendDeep(C||{},{dragmode:_.dragmode,element:f.div,gd:w,plotinfo:{id:f.id,domain:_[f.id].domain,xaxis:f.xaxis,yaxis:f.yaxis,fillRangeItems:E},xaxes:[f.xaxis],yaxes:[f.yaxis],subplot:f.id}),S.off("click",f.onClickInPanHandler),r(L)||i(L)?(S.dragPan.disable(),S.on("zoomstart",f.clearOutline),f.dragOptions.prepFn=function(z,G,O){n(z,G,O,f.dragOptions,L)},d.init(f.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",f.clearOutline),f.div.onmousedown=null,f.div.ontouchstart=null,f.div.removeEventListener("touchstart",f.div._ontouchstart),f.onClickInPanHandler=f.onClickInPanFn(f.dragOptions),S.on("click",f.onClickInPanHandler))}function P(z){var G=f.map.unproject(z);return[G.lng,G.lat]}},g.updateFramework=function(_){var f=_[this.id].domain,S=_._size,w=this.div.style;w.width=S.w*(f.x[1]-f.x[0])+"px",w.height=S.h*(f.y[1]-f.y[0])+"px",w.left=S.l+f.x[0]*S.w+"px",w.top=S.t+(1-f.y[1])*S.h+"px",this.xaxis._offset=S.l+f.x[0]*S.w,this.xaxis._length=S.w*(f.x[1]-f.x[0]),this.yaxis._offset=S.t+(1-f.y[1])*S.h,this.yaxis._length=S.h*(f.y[1]-f.y[0])},g.updateLayers=function(_){var f,S=_[this.id].layers,w=this.layerList;if(S.length!==w.length){for(f=0;f<w.length;f++)w[f].dispose();for(w=this.layerList=[],f=0;f<S.length;f++)w.push(c(this,f,S[f]))}else for(f=0;f<S.length;f++)w[f].update(S[f])},g.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},g.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},g.setOptions=function(_,f,S){for(var w in S)this.map[f](_,w,S[w])},g.getMapLayers=function(){return this.map.getStyle().layers},g.addLayer=function(_,f){var S=this.map;if(typeof f=="string"){if(f==="")return void S.addLayer(_,f);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(f===w[E].id)return void S.addLayer(_,f);k.warn(["Trying to add layer with *below* value",f,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(_)},g.project=function(_){return this.map.project(new M.LngLat(_[0],_[1]))},g.getView=function(){var _=this.map,f=_.getCenter(),S={lon:f.lng,lat:f.lat},w=_.getCanvas(),E=parseInt(w.style.width),L=parseInt(w.style.height);return{center:S,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([E,0]).toArray(),_.unproject([E,L]).toArray(),_.unproject([0,L]).toArray()]}}},g.getViewEdits=function(_){for(var f=this.id,S=["center","zoom","bearing","pitch"],w={},E=0;E<S.length;E++){var L=S[E];w[f+"."+L]=_[L]}return w},g.getViewEditsWithDerived=function(_){var f=this.id,S=this.getViewEdits(_);return S[f+"._derived"]=_._derived,S},ee.exports=x},35025:function(ee){ee.exports=function(D){var e=D.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},74875:function(ee,D,e){var M=e(39898),k=e(84096).Dq,l=e(60721).FF,T=e(92770),b=e(73972),d=e(86281),s=e(44467),t=e(71828),i=e(7901),r=e(50606).BADNUM,n=e(41675),o=e(51873).clearOutline,a=e(21479),u=e(85594),p=e(31391),c=e(27659).a0,x=t.relinkPrivateKeys,g=t._,h=ee.exports={};t.extendFlat(h,b),h.attributes=e(9012),h.attributes.type.values=h.allTypes,h.fontAttrs=e(41940),h.layoutAttributes=e(10820),h.fontWeight="normal";var y=h.transformsRegistry,v=e(31137);h.executeAPICommand=v.executeAPICommand,h.computeAPICommandBindings=v.computeAPICommandBindings,h.manageCommandObserver=v.manageCommandObserver,h.hasSimpleAPICommandBindings=v.hasSimpleAPICommandBindings,h.redrawText=function(N){return N=t.getGraphDiv(N),new Promise(function(B){setTimeout(function(){N._fullLayout&&(b.getComponentMethod("annotations","draw")(N),b.getComponentMethod("legend","draw")(N),b.getComponentMethod("colorbar","draw")(N),B(h.previousPromises(N)))},300)})},h.resize=function(N){var B;N=t.getGraphDiv(N);var V=new Promise(function(q,te){N&&!t.isHidden(N)||te(new Error("Resize must be passed a displayed plot div element.")),N._redrawTimer&&clearTimeout(N._redrawTimer),N._resolveResize&&(B=N._resolveResize),N._resolveResize=q,N._redrawTimer=setTimeout(function(){if(!N.layout||N.layout.width&&N.layout.height||t.isHidden(N))q(N);else{delete N.layout.width,delete N.layout.height;var K=N.changed;N.autoplay=!0,b.call("relayout",N,{autosize:!0}).then(function(){N.changed=K,N._resolveResize===q&&(delete N._resolveResize,q(N))})}},100)});return B&&B(V),V},h.previousPromises=function(N){if((N._promises||[]).length)return Promise.all(N._promises).then(function(){N._promises=[]})},h.addLinks=function(N){if(N._context.showLink||N._context.showSources){var B=N._fullLayout,V=t.ensureSingle(B._paper,"text","js-plot-link-container",function(W){W.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:i.defaultLine,"pointer-events":"all"}).each(function(){var Q=M.select(this);Q.append("tspan").classed("js-link-to-tool",!0),Q.append("tspan").classed("js-link-spacer",!0),Q.append("tspan").classed("js-sourcelinks",!0)})}),q=V.node(),te={y:B._paper.attr("height")-9};document.body.contains(q)&&q.getComputedTextLength()>=B.width-20?(te["text-anchor"]="start",te.x=5):(te["text-anchor"]="end",te.x=B._paper.attr("width")-7),V.attr(te);var K=V.select(".js-link-to-tool"),J=V.select(".js-link-spacer"),Y=V.select(".js-sourcelinks");N._context.showSources&&N._context.showSources(N),N._context.showLink&&function(W,Q){Q.text("");var ne=Q.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(W._context.linkText+" "+String.fromCharCode(187));if(W._context.sendData)ne.on("click",function(){h.sendDataToCloud(W)});else{var re=window.location.pathname.split("/"),ae=window.location.search;ne.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+re[2].split(".")[0]+"/"+re[1]+ae})}}(N,K),J.text(K.text()&&Y.text()?" - ":"")}},h.sendDataToCloud=function(N){var B=(window.PLOTLYENV||{}).BASE_URL||N._context.plotlyServerURL;if(B){N.emit("plotly_beforeexport");var V=M.select(N).append("div").attr("id","hiddenform").style("display","none"),q=V.append("form").attr({action:B+"/external",method:"post",target:"_blank"});return q.append("input").attr({type:"text",name:"data"}).node().value=h.graphJson(N,!1,"keepdata"),q.node().submit(),V.remove(),N.emit("plotly_afterexport"),!1}};var m=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function f(N,B){var V=N._context.locale;V||(V="en-US");var q=!1,te={};function K(re){for(var ae=!0,ue=0;ue<B.length;ue++){var pe=B[ue];te[pe]||(re[pe]?te[pe]=re[pe]:ae=!1)}ae&&(q=!0)}for(var J=0;J<2;J++){for(var Y=N._context.locales,W=0;W<2;W++){var Q=(Y[V]||{}).format;if(Q&&(K(Q),q))break;Y=b.localeRegistry}var ne=V.split("-")[0];if(q||ne===V)break;V=ne}return q||K(b.localeRegistry.en.format),te}function S(N,B){var V={_fullLayout:B},q=N._id.charAt(0)==="x",te=N._mainAxis._anchorAxis,K="",J="",Y="";if(te&&(Y=te._mainAxis._id,K=q?N._id+Y:Y+N._id),!K||!B._plots[K]){K="";for(var W=N._counterAxes,Q=0;Q<W.length;Q++){var ne=W[Q],re=q?N._id+ne:ne+N._id;J||(J=re);var ae=n.getFromId(V,ne);if(Y&&ae.overlaying===Y){K=re;break}}}return K||J}function w(N){var B=N.transforms;if(Array.isArray(B)&&B.length)for(var V=0;V<B.length;V++){var q=B[V],te=q._module||y[q.type];if(te&&te.makesData)return!0}return!1}function E(N,B,V,q){for(var te=N.transforms,K=[N],J=0;J<te.length;J++){var Y=te[J],W=y[Y.type];W&&W.transform&&(K=W.transform(K,{transform:Y,fullTrace:N,fullData:B,layout:V,fullLayout:q,transformIndex:J}))}return K}function L(N){return typeof N=="string"&&N.substr(N.length-2)==="px"&&parseFloat(N)}function C(N){var B=N.margin;if(!N._size){var V=N._size={l:Math.round(B.l),r:Math.round(B.r),t:Math.round(B.t),b:Math.round(B.b),p:Math.round(B.pad)};V.w=Math.round(N.width)-V.l-V.r,V.h=Math.round(N.height)-V.t-V.b}N._pushmargin||(N._pushmargin={}),N._pushmarginIds||(N._pushmarginIds={}),N._reservedMargin||(N._reservedMargin={})}h.supplyDefaults=function(N,B){var V=B&&B.skipUpdateCalc,q=N._fullLayout||{};if(q._skipDefaults)delete q._skipDefaults;else{var te,K=N._fullLayout={},J=N.layout||{},Y=N._fullData||[],W=N._fullData=[],Q=N.data||[],ne=N.calcdata||[],re=N._context||{};N._transitionData||h.createTransitionData(N),K._dfltTitle={plot:g(N,"Click to enter Plot title"),x:g(N,"Click to enter X axis title"),y:g(N,"Click to enter Y axis title"),colorbar:g(N,"Click to enter Colorscale title"),annotation:g(N,"new text")},K._traceWord=g(N,"trace");var ae=f(N,m);if(K._mapboxAccessToken=re.mapboxAccessToken,q._initialAutoSizeIsDone){var ue=q.width,pe=q.height;h.supplyLayoutGlobalDefaults(J,K,ae),J.width||(K.width=ue),J.height||(K.height=pe),h.sanitizeMargins(K)}else{h.supplyLayoutGlobalDefaults(J,K,ae);var ge=!J.width||!J.height,_e=K.autosize,me=re.autosizable;ge&&(_e||me)?h.plotAutoSize(N,J,K):ge&&h.sanitizeMargins(K),!_e&&ge&&(J.width=K.width,J.height=K.height)}K._d3locale=function(Re,ze){return Re.decimal=ze.charAt(0),Re.thousands=ze.charAt(1),{numberFormat:function(He){try{He=l(Re).format(t.adjustFormat(He))}catch{return t.warnBadFormat(He),t.noFormat}return He},timeFormat:k(Re).utcFormat}}(ae,K.separators),K._extraFormat=f(N,_),K._initialAutoSizeIsDone=!0,K._dataLength=Q.length,K._modules=[],K._visibleModules=[],K._basePlotModules=[];var ve=K._subplots=function(){var Re,ze,He=b.collectableSubplotTypes,Ge={};if(!He){He=[];var Je=b.subplotsRegistry;for(var ot in Je){var Qe=Je[ot].attr;if(Qe&&(He.push(ot),Array.isArray(Qe)))for(ze=0;ze<Qe.length;ze++)t.pushUnique(He,Qe[ze])}}for(Re=0;Re<He.length;Re++)Ge[He[Re]]=[];return Ge}(),Oe=K._splomAxes={x:{},y:{}},Me=K._splomSubplots={};K._splomGridDflt={},K._scatterStackOpts={},K._firstScatter={},K._alignmentOpts={},K._colorAxes={},K._requestRangeslider={},K._traceUids=function(Re,ze){var He,Ge,Je=ze.length,ot=[];for(He=0;He<Re.length;He++){var Qe=Re[He]._fullInput;Qe!==Ge&&ot.push(Qe),Ge=Qe}var vt=ot.length,xt=new Array(Je),mt={};function rt(Mt,Pt){xt[Pt]=Mt,mt[Mt]=1}function it(Mt,Pt){if(Mt&&typeof Mt=="string"&&!mt[Mt])return rt(Mt,Pt),!0}for(He=0;He<Je;He++){var Tt=ze[He].uid;typeof Tt=="number"&&(Tt=String(Tt)),it(Tt,He)||He<vt&&it(ot[He].uid,He)||rt(t.randstr(mt),He)}return xt}(Y,Q),K._globalTransforms=(N._context||{}).globalTransforms,h.supplyDataDefaults(Q,W,J,K);var Te=Object.keys(Oe.x),se=Object.keys(Oe.y);if(Te.length>1&&se.length>1){for(b.getComponentMethod("grid","sizeDefaults")(J,K),te=0;te<Te.length;te++)t.pushUnique(ve.xaxis,Te[te]);for(te=0;te<se.length;te++)t.pushUnique(ve.yaxis,se[te]);for(var oe in Me)t.pushUnique(ve.cartesian,oe)}if(K._has=h._hasPlotType.bind(K),Y.length===W.length)for(te=0;te<W.length;te++)x(W[te],Y[te]);h.supplyLayoutModuleDefaults(J,K,W,N._transitionData);var he=K._visibleModules,Ee=[];for(te=0;te<he.length;te++){var ke=he[te].crossTraceDefaults;ke&&t.pushUnique(Ee,ke)}for(te=0;te<Ee.length;te++)Ee[te](W,K);K._hasOnlyLargeSploms=K._basePlotModules.length===1&&K._basePlotModules[0].name==="splom"&&Te.length>15&&se.length>15&&K.shapes.length===0&&K.images.length===0,h.linkSubplots(W,K,Y,q),h.cleanPlot(W,K,Y,q);var be=!(!q._has||!q._has("gl2d")),Ie=!(!K._has||!K._has("gl2d")),Fe=!(!q._has||!q._has("cartesian"))||be,ce=!(!K._has||!K._has("cartesian"))||Ie;Fe&&!ce?q._bgLayer.remove():ce&&!Fe&&(K._shouldCreateBgLayer=!0),q._zoomlayer&&!N._dragging&&o({_fullLayout:q}),function(Re,ze){var He,Ge=[];ze.meta&&(He=ze._meta={meta:ze.meta,layout:{meta:ze.meta}});for(var Je=0;Je<Re.length;Je++){var ot=Re[Je];ot.meta?Ge[ot.index]=ot._meta={meta:ot.meta}:ze.meta&&(ot._meta={meta:ze.meta}),ze.meta&&(ot._meta.layout={meta:ze.meta})}Ge.length&&(He||(He=ze._meta={}),He.data=Ge)}(W,K),x(K,q),b.getComponentMethod("colorscale","crossTraceDefaults")(W,K),K._preGUI||(K._preGUI={}),K._tracePreGUI||(K._tracePreGUI={});var we,ye=K._tracePreGUI,Ce={};for(we in ye)Ce[we]="old";for(te=0;te<W.length;te++)Ce[we=W[te]._fullInput.uid]||(ye[we]={}),Ce[we]="new";for(we in Ce)Ce[we]==="old"&&delete ye[we];C(K),b.getComponentMethod("rangeslider","makeData")(K),V||ne.length!==W.length||h.supplyDefaultsUpdateCalc(ne,W)}},h.supplyDefaultsUpdateCalc=function(N,B){for(var V=0;V<B.length;V++){var q=B[V],te=(N[V]||[])[0];if(te&&te.trace){var K=te.trace;if(K._hasCalcTransform){var J,Y,W,Q=K._arrayAttrs;for(J=0;J<Q.length;J++)Y=Q[J],W=t.nestedProperty(K,Y).get().slice(),t.nestedProperty(q,Y).set(W)}te.trace=q}}},h.createTransitionData=function(N){N._transitionData||(N._transitionData={}),N._transitionData._frames||(N._transitionData._frames=[]),N._transitionData._frameHash||(N._transitionData._frameHash={}),N._transitionData._counter||(N._transitionData._counter=0),N._transitionData._interruptCallbacks||(N._transitionData._interruptCallbacks=[])},h._hasPlotType=function(N){var B,V=this._basePlotModules||[];for(B=0;B<V.length;B++)if(V[B].name===N)return!0;var q=this._modules||[];for(B=0;B<q.length;B++){var te=q[B].name;if(te===N)return!0;var K=b.modules[te];if(K&&K.categories[N])return!0}return!1},h.cleanPlot=function(N,B,V,q){var te,K,J=q._basePlotModules||[];for(te=0;te<J.length;te++){var Y=J[te];Y.clean&&Y.clean(N,B,V,q)}var W=q._has&&q._has("gl"),Q=B._has&&B._has("gl");W&&!Q&&q._glcontainer!==void 0&&(q._glcontainer.selectAll(".gl-canvas").remove(),q._glcontainer.selectAll(".no-webgl").remove(),q._glcanvas=null);var ne=!!q._infolayer;e:for(te=0;te<V.length;te++){var re=V[te].uid;for(K=0;K<N.length;K++)if(re===N[K].uid)continue e;ne&&q._infolayer.select(".cb"+re).remove()}},h.linkSubplots=function(N,B,V,q){var te,K,J=q._plots||{},Y=B._plots={},W=B._subplots,Q={_fullData:N,_fullLayout:B},ne=W.cartesian.concat(W.gl2d||[]);for(te=0;te<ne.length;te++){var re,ae=ne[te],ue=J[ae],pe=n.getFromId(Q,ae,"x"),ge=n.getFromId(Q,ae,"y");for(ue?re=Y[ae]=ue:(re=Y[ae]={}).id=ae,pe._counterAxes.push(ge._id),ge._counterAxes.push(pe._id),pe._subplotsWith.push(ae),ge._subplotsWith.push(ae),re.xaxis=pe,re.yaxis=ge,re._hasClipOnAxisFalse=!1,K=0;K<N.length;K++){var _e=N[K];if(_e.xaxis===re.xaxis._id&&_e.yaxis===re.yaxis._id&&_e.cliponaxis===!1){re._hasClipOnAxisFalse=!0;break}}}var me,ve=n.list(Q,null,!0);for(te=0;te<ve.length;te++){var Oe=null;(me=ve[te]).overlaying&&(Oe=n.getFromId(Q,me.overlaying))&&Oe.overlaying&&(me.overlaying=!1,Oe=null),me._mainAxis=Oe||me,Oe&&(me.domain=Oe.domain.slice()),me._anchorAxis=me.anchor==="free"?null:n.getFromId(Q,me.anchor)}for(te=0;te<ve.length;te++)if((me=ve[te])._counterAxes.sort(n.idSort),me._subplotsWith.sort(t.subplotSort),me._mainSubplot=S(me,B),me._counterAxes.length&&(me.spikemode&&me.spikemode.indexOf("across")!==-1||me.automargin&&me.mirror&&me.anchor!=="free"||b.getComponentMethod("rangeslider","isVisible")(me))){var Me=1,Te=0;for(K=0;K<me._counterAxes.length;K++){var se=n.getFromId(Q,me._counterAxes[K]);Me=Math.min(Me,se.domain[0]),Te=Math.max(Te,se.domain[1])}Me<Te&&(me._counterDomainMin=Me,me._counterDomainMax=Te)}},h.clearExpandedTraceDefaultColors=function(N){var B,V,q;for(V=[],(B=N._module._colorAttrs)||(N._module._colorAttrs=B=[],d.crawl(N._module.attributes,function(te,K,J,Y){V[Y]=K,V.length=Y+1,te.valType==="color"&&te.dflt===void 0&&B.push(V.join("."))})),q=0;q<B.length;q++)t.nestedProperty(N,"_input."+B[q]).get()||t.nestedProperty(N,B[q]).set(null)},h.supplyDataDefaults=function(N,B,V,q){var te,K,J,Y=q._modules,W=q._visibleModules,Q=q._basePlotModules,ne=0,re=0;function ae(oe){B.push(oe);var he=oe._module;he&&(t.pushUnique(Y,he),oe.visible===!0&&t.pushUnique(W,he),t.pushUnique(Q,oe._module.basePlotModule),ne++,oe._input.visible!==!1&&re++)}q._transformModules=[];var ue={},pe=[],ge=(V.template||{}).data||{},_e=s.traceTemplater(ge);for(te=0;te<N.length;te++){if(J=N[te],(K=_e.newTrace(J)).uid=q._traceUids[te],h.supplyTraceDefaults(J,K,re,q,te),K.index=te,K._input=J,K._expandedIndex=ne,K.transforms&&K.transforms.length)for(var me=J.visible!==!1&&K.visible===!1,ve=E(K,B,V,q),Oe=0;Oe<ve.length;Oe++){var Me=ve[Oe],Te={_template:K._template,type:K.type,uid:K.uid+Oe};me&&Me.visible===!1&&delete Me.visible,h.supplyTraceDefaults(Me,Te,ne,q,te),x(Te,Me),Te.index=te,Te._input=J,Te._fullInput=K,Te._expandedIndex=ne,Te._expandedInput=Me,ae(Te)}else K._fullInput=K,K._expandedInput=K,ae(K);b.traceIs(K,"carpetAxis")&&(ue[K.carpet]=K),b.traceIs(K,"carpetDependent")&&pe.push(te)}for(te=0;te<pe.length;te++)if((K=B[pe[te]]).visible){var se=ue[K.carpet];K._carpet=se,se&&se.visible?(K.xaxis=se.xaxis,K.yaxis=se.yaxis):K.visible=!1}},h.supplyAnimationDefaults=function(N){var B;N=N||{};var V={};function q(te,K){return t.coerce(N||{},V,u,te,K)}if(q("mode"),q("direction"),q("fromcurrent"),Array.isArray(N.frame))for(V.frame=[],B=0;B<N.frame.length;B++)V.frame[B]=h.supplyAnimationFrameDefaults(N.frame[B]||{});else V.frame=h.supplyAnimationFrameDefaults(N.frame||{});if(Array.isArray(N.transition))for(V.transition=[],B=0;B<N.transition.length;B++)V.transition[B]=h.supplyAnimationTransitionDefaults(N.transition[B]||{});else V.transition=h.supplyAnimationTransitionDefaults(N.transition||{});return V},h.supplyAnimationFrameDefaults=function(N){var B={};function V(q,te){return t.coerce(N||{},B,u.frame,q,te)}return V("duration"),V("redraw"),B},h.supplyAnimationTransitionDefaults=function(N){var B={};function V(q,te){return t.coerce(N||{},B,u.transition,q,te)}return V("duration"),V("easing"),B},h.supplyFrameDefaults=function(N){var B={};function V(q,te){return t.coerce(N,B,p,q,te)}return V("group"),V("name"),V("traces"),V("baseframe"),V("data"),V("layout"),B},h.supplyTraceDefaults=function(N,B,V,q,te){var K,J=q.colorway||i.defaults,Y=J[V%J.length];function W(ve,Oe){return t.coerce(N,B,h.attributes,ve,Oe)}var Q=W("visible");W("type"),W("name",q._traceWord+" "+te),W("uirevision",q.uirevision);var ne=h.getModule(B);if(B._module=ne,ne){var re=ne.basePlotModule,ae=re.attr,ue=re.attributes;if(ae&&ue){var pe=q._subplots,ge="";if(Q||re.name!=="gl2d"){if(Array.isArray(ae))for(K=0;K<ae.length;K++){var _e=ae[K],me=t.coerce(N,B,ue,_e);pe[_e]&&t.pushUnique(pe[_e],me),ge+=me}else ge=t.coerce(N,B,ue,ae);pe[re.name]&&t.pushUnique(pe[re.name],ge)}}}return Q&&(W("customdata"),W("ids"),W("meta"),b.traceIs(B,"showLegend")?(t.coerce(N,B,ne.attributes.showlegend?ne.attributes:h.attributes,"showlegend"),W("legend"),W("legendwidth"),W("legendgroup"),W("legendgrouptitle.text"),W("legendrank"),B._dfltShowLegend=!0):B._dfltShowLegend=!1,ne&&ne.supplyDefaults(N,B,Y,q),b.traceIs(B,"noOpacity")||W("opacity"),b.traceIs(B,"notLegendIsolatable")&&(B.visible=!!B.visible),b.traceIs(B,"noHover")||(B.hovertemplate||t.coerceHoverinfo(N,B,q),B.type!=="parcats"&&b.getComponentMethod("fx","supplyDefaults")(N,B,Y,q)),ne&&ne.selectPoints&&W("selectedpoints"),h.supplyTransformDefaults(N,B,q)),B},h.hasMakesDataTransform=w,h.supplyTransformDefaults=function(N,B,V){if(B._length||w(N)){var q=V._globalTransforms||[],te=V._transformModules||[];if(Array.isArray(N.transforms)||q.length!==0)for(var K=N.transforms||[],J=q.concat(K),Y=B.transforms=[],W=0;W<J.length;W++){var Q,ne=J[W],re=ne.type,ae=y[re],ue=!(ne._module&&ne._module===ae),pe=ae&&typeof ae.transform=="function";ae||t.warn("Unrecognized transform type "+re+"."),ae&&ae.supplyDefaults&&(ue||pe)?((Q=ae.supplyDefaults(ne,B,V,N)).type=re,Q._module=ae,t.pushUnique(te,ae)):Q=t.extendFlat({},ne),Y.push(Q)}}},h.supplyLayoutGlobalDefaults=function(N,B,V){function q(ne,re){return t.coerce(N,B,h.layoutAttributes,ne,re)}var te=N.template;t.isPlainObject(te)&&(B.template=te,B._template=te.layout,B._dataTemplate=te.data),q("autotypenumbers");var K=t.coerceFont(q,"font"),J=K.size;t.coerceFont(q,"title.font",t.extendFlat({},K,{size:Math.round(1.4*J)})),q("title.text",B._dfltTitle.plot),q("title.xref");var Y=q("title.yref");q("title.pad.t"),q("title.pad.r"),q("title.pad.b"),q("title.pad.l");var W=q("title.automargin");q("title.x"),q("title.xanchor"),q("title.y"),q("title.yanchor"),W&&(Y==="paper"&&(B.title.y!==0&&(B.title.y=1),B.title.yanchor==="auto"&&(B.title.yanchor=B.title.y===0?"top":"bottom")),Y==="container"&&(B.title.y==="auto"&&(B.title.y=1),B.title.yanchor==="auto"&&(B.title.yanchor=B.title.y<.5?"bottom":"top"))),q("uniformtext.mode")&&q("uniformtext.minsize"),q("autosize",!(N.width&&N.height)),q("width"),q("height"),q("minreducedwidth"),q("minreducedheight"),q("margin.l"),q("margin.r"),q("margin.t"),q("margin.b"),q("margin.pad"),q("margin.autoexpand"),N.width&&N.height&&h.sanitizeMargins(B),b.getComponentMethod("grid","sizeDefaults")(N,B),q("paper_bgcolor"),q("separators",V.decimal+V.thousands),q("hidesources"),q("colorway"),q("datarevision");var Q=q("uirevision");q("editrevision",Q),q("selectionrevision",Q),b.getComponentMethod("modebar","supplyLayoutDefaults")(N,B),b.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(N,B,q),b.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(N,B,q),q("meta"),t.isPlainObject(N.transition)&&(q("transition.duration"),q("transition.easing"),q("transition.ordering")),b.getComponentMethod("calendars","handleDefaults")(N,B,"calendar"),b.getComponentMethod("fx","supplyLayoutGlobalDefaults")(N,B,q),t.coerce(N,B,a,"scattermode")},h.plotAutoSize=function(N,B,V){var q,te,K=N._context||{},J=K.frameMargins,Y=t.isPlotDiv(N);if(Y&&N.emit("plotly_autosize"),K.fillFrame)q=window.innerWidth,te=window.innerHeight,document.body.style.overflow="hidden";else{var W=Y?window.getComputedStyle(N):{};if(q=L(W.width)||L(W.maxWidth)||V.width,te=L(W.height)||L(W.maxHeight)||V.height,T(J)&&J>0){var Q=1-2*J;q=Math.round(Q*q),te=Math.round(Q*te)}}var ne=h.layoutAttributes.width.min,re=h.layoutAttributes.height.min;q<ne&&(q=ne),te<re&&(te=re);var ae=!B.width&&Math.abs(V.width-q)>1,ue=!B.height&&Math.abs(V.height-te)>1;(ue||ae)&&(ae&&(V.width=q),ue&&(V.height=te)),N._initialAutoSize||(N._initialAutoSize={width:q,height:te}),h.sanitizeMargins(V)},h.supplyLayoutModuleDefaults=function(N,B,V,q){var te,K,J,Y=b.componentsRegistry,W=B._basePlotModules,Q=b.subplotsRegistry.cartesian;for(te in Y)(J=Y[te]).includeBasePlot&&J.includeBasePlot(N,B);for(var ne in W.length||W.push(Q),B._has("cartesian")&&(b.getComponentMethod("grid","contentDefaults")(N,B),Q.finalizeSubplots(N,B)),B._subplots)B._subplots[ne].sort(t.subplotSort);for(K=0;K<W.length;K++)(J=W[K]).supplyLayoutDefaults&&J.supplyLayoutDefaults(N,B,V);var re=B._modules;for(K=0;K<re.length;K++)(J=re[K]).supplyLayoutDefaults&&J.supplyLayoutDefaults(N,B,V);var ae=B._transformModules;for(K=0;K<ae.length;K++)(J=ae[K]).supplyLayoutDefaults&&J.supplyLayoutDefaults(N,B,V,q);for(te in Y)(J=Y[te]).supplyLayoutDefaults&&J.supplyLayoutDefaults(N,B,V)},h.purge=function(N){var B=N._fullLayout||{};B._glcontainer!==void 0&&(B._glcontainer.selectAll(".gl-canvas").remove(),B._glcontainer.remove(),B._glcanvas=null),B._modeBar&&B._modeBar.destroy(),N._transitionData&&(N._transitionData._interruptCallbacks&&(N._transitionData._interruptCallbacks.length=0),N._transitionData._animationRaf&&window.cancelAnimationFrame(N._transitionData._animationRaf)),t.clearThrottle(),t.clearResponsive(N),delete N.data,delete N.layout,delete N._fullData,delete N._fullLayout,delete N.calcdata,delete N.empty,delete N.fid,delete N.undoqueue,delete N.undonum,delete N.autoplay,delete N.changed,delete N._promises,delete N._redrawTimer,delete N._hmlumcount,delete N._hmpixcount,delete N._transitionData,delete N._transitioning,delete N._initialAutoSize,delete N._transitioningWithDuration,delete N._dragging,delete N._dragged,delete N._dragdata,delete N._hoverdata,delete N._snapshotInProgress,delete N._editing,delete N._mouseDownTime,delete N._legendMouseDownTime,N.removeAllListeners&&N.removeAllListeners()},h.style=function(N){var B,V=N._fullLayout._visibleModules,q=[];for(B=0;B<V.length;B++){var te=V[B];te.style&&t.pushUnique(q,te.style)}for(B=0;B<q.length;B++)q[B](N)},h.sanitizeMargins=function(N){if(N&&N.margin){var B,V=N.width,q=N.height,te=N.margin,K=V-(te.l+te.r),J=q-(te.t+te.b);K<0&&(B=(V-1)/(te.l+te.r),te.l=Math.floor(B*te.l),te.r=Math.floor(B*te.r)),J<0&&(B=(q-1)/(te.t+te.b),te.t=Math.floor(B*te.t),te.b=Math.floor(B*te.b))}},h.clearAutoMarginIds=function(N){N._fullLayout._pushmarginIds={}},h.allowAutoMargin=function(N,B){N._fullLayout._pushmarginIds[B]=1},h.autoMargin=function(N,B,V){var q=N._fullLayout,te=q.width,K=q.height,J=q.margin,Y=q.minreducedwidth,W=q.minreducedheight,Q=t.constrain(te-J.l-J.r,2,Y),ne=t.constrain(K-J.t-J.b,2,W),re=Math.max(0,te-Q),ae=Math.max(0,K-ne),ue=q._pushmargin,pe=q._pushmarginIds;if(J.autoexpand!==!1){if(V){var ge=V.pad;if(ge===void 0&&(ge=Math.min(12,J.l,J.r,J.t,J.b)),re){var _e=(V.l+V.r)/re;_e>1&&(V.l/=_e,V.r/=_e)}if(ae){var me=(V.t+V.b)/ae;me>1&&(V.t/=me,V.b/=me)}var ve=V.xl!==void 0?V.xl:V.x,Oe=V.xr!==void 0?V.xr:V.x,Me=V.yt!==void 0?V.yt:V.y,Te=V.yb!==void 0?V.yb:V.y;ue[B]={l:{val:ve,size:V.l+ge},r:{val:Oe,size:V.r+ge},b:{val:Te,size:V.b+ge},t:{val:Me,size:V.t+ge}},pe[B]=1}else delete ue[B],delete pe[B];if(!q._replotting)return h.doAutoMargin(N)}},h.doAutoMargin=function(N){var B=N._fullLayout,V=B.width,q=B.height;B._size||(B._size={}),C(B);var te=B._size,K=B.margin,J={t:0,b:0,l:0,r:0},Y=t.extendFlat({},te),W=K.l,Q=K.r,ne=K.t,re=K.b,ae=B._pushmargin,ue=B._pushmarginIds,pe=B.minreducedwidth,ge=B.minreducedheight;if(K.autoexpand!==!1){for(var _e in ae)ue[_e]||delete ae[_e];var me=N._fullLayout._reservedMargin;for(var ve in me)for(var Oe in me[ve]){var Me=me[ve][Oe];J[Oe]=Math.max(J[Oe],Me)}for(var Te in ae.base={l:{val:0,size:W},r:{val:1,size:Q},t:{val:1,size:ne},b:{val:0,size:re}},J){var se=0;for(var oe in ae)oe!=="base"&&T(ae[oe][Te].size)&&(se=ae[oe][Te].size>se?ae[oe][Te].size:se);var he=Math.max(0,K[Te]-se);J[Te]=Math.max(0,J[Te]-he)}for(var Ee in ae){var ke=ae[Ee].l||{},be=ae[Ee].b||{},Ie=ke.val,Fe=ke.size,ce=be.val,we=be.size,ye=V-J.r-J.l,Ce=q-J.t-J.b;for(var Re in ae){if(T(Fe)&&ae[Re].r){var ze=ae[Re].r.val,He=ae[Re].r.size;if(ze>Ie){var Ge=(Fe*ze+(He-ye)*Ie)/(ze-Ie),Je=(He*(1-Ie)+(Fe-ye)*(1-ze))/(ze-Ie);Ge+Je>W+Q&&(W=Ge,Q=Je)}}if(T(we)&&ae[Re].t){var ot=ae[Re].t.val,Qe=ae[Re].t.size;if(ot>ce){var vt=(we*ot+(Qe-Ce)*ce)/(ot-ce),xt=(Qe*(1-ce)+(we-Ce)*(1-ot))/(ot-ce);vt+xt>re+ne&&(re=vt,ne=xt)}}}}}var mt=t.constrain(V-K.l-K.r,2,pe),rt=t.constrain(q-K.t-K.b,2,ge),it=Math.max(0,V-mt),Tt=Math.max(0,q-rt);if(it){var Mt=(W+Q)/it;Mt>1&&(W/=Mt,Q/=Mt)}if(Tt){var Pt=(re+ne)/Tt;Pt>1&&(re/=Pt,ne/=Pt)}if(te.l=Math.round(W)+J.l,te.r=Math.round(Q)+J.r,te.t=Math.round(ne)+J.t,te.b=Math.round(re)+J.b,te.p=Math.round(K.pad),te.w=Math.round(V)-te.l-te.r,te.h=Math.round(q)-te.t-te.b,!B._replotting&&(h.didMarginChange(Y,te)||function(Ze){if("_redrawFromAutoMarginCount"in Ze._fullLayout)return!1;var Xe=n.list(Ze,"",!0);for(var Ve in Xe)if(Xe[Ve].autoshift||Xe[Ve].shift)return!0;return!1}(N))){"_redrawFromAutoMarginCount"in B?B._redrawFromAutoMarginCount++:B._redrawFromAutoMarginCount=1;var kt=3*(1+Object.keys(ue).length);if(B._redrawFromAutoMarginCount<kt)return b.call("_doPlot",N);B._size=Y,t.warn("Too many auto-margin redraws.")}(function(Ze){var Xe=n.list(Ze,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ve){for(var We=0;We<Xe.length;We++){var at=Xe[We][Ve];at&&at()}})})(N)};var P=["l","r","t","b","p","w","h"];function z(N,B,V){var q=!1,te=[h.previousPromises,function(){if(N._transitionData)return N._transitioning=!1,function(J){var Y=Promise.resolve();if(!J)return Y;for(;J.length;)Y=Y.then(J.shift());return Y}(N._transitionData._interruptCallbacks)},V.prepareFn,h.rehover,h.reselect,function(){return N.emit("plotly_transitioning",[]),new Promise(function(J){N._transitioning=!0,B.duration>0&&(N._transitioningWithDuration=!0),N._transitionData._interruptCallbacks.push(function(){q=!0}),V.redraw&&N._transitionData._interruptCallbacks.push(function(){return b.call("redraw",N)}),N._transitionData._interruptCallbacks.push(function(){N.emit("plotly_transitioninterrupted",[])});var Y=0,W=0;function Q(){return Y++,function(){var ne;W++,q||W!==Y||(ne=J,N._transitionData&&(function(re){if(re)for(;re.length;)re.shift()}(N._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(V.redraw)return b.call("redraw",N)}).then(function(){N._transitioning=!1,N._transitioningWithDuration=!1,N.emit("plotly_transitioned",[])}).then(ne)))}}V.runFn(Q),setTimeout(Q())})}],K=t.syncOrAsync(te,N);return K&&K.then||(K=Promise.resolve()),K.then(function(){return N})}h.didMarginChange=function(N,B){for(var V=0;V<P.length;V++){var q=P[V],te=N[q],K=B[q];if(!T(te)||Math.abs(K-te)>1)return!0}return!1},h.graphJson=function(N,B,V,q,te,K){(te&&B&&!N._fullData||te&&!B&&!N._fullLayout)&&h.supplyDefaults(N);var J=te?N._fullData:N.data,Y=te?N._fullLayout:N.layout,W=(N._transitionData||{})._frames;function Q(ae,ue){if(typeof ae=="function")return ue?"_function_":null;if(t.isPlainObject(ae)){var pe,ge={};return Object.keys(ae).sort().forEach(function(_e){if(["_","["].indexOf(_e.charAt(0))===-1)if(typeof ae[_e]!="function"){if(V==="keepdata"){if(_e.substr(_e.length-3)==="src")return}else if(V==="keepstream"){if(typeof(pe=ae[_e+"src"])=="string"&&pe.indexOf(":")>0&&!t.isPlainObject(ae.stream))return}else if(V!=="keepall"&&typeof(pe=ae[_e+"src"])=="string"&&pe.indexOf(":")>0)return;ge[_e]=Q(ae[_e],ue)}else ue&&(ge[_e]="_function")}),ge}return Array.isArray(ae)?ae.map(function(_e){return Q(_e,ue)}):t.isTypedArray(ae)?t.simpleMap(ae,t.identity):t.isJSDate(ae)?t.ms2DateTimeLocal(+ae):ae}var ne={data:(J||[]).map(function(ae){var ue=Q(ae);return B&&delete ue.fit,ue})};if(!B&&(ne.layout=Q(Y),te)){var re=Y._size;ne.layout.computed={margin:{b:re.b,l:re.l,r:re.r,t:re.t}}}return W&&(ne.frames=Q(W)),K&&(ne.config=Q(N._context,!0)),q==="object"?ne:JSON.stringify(ne)},h.modifyFrames=function(N,B){var V,q,te,K=N._transitionData._frames,J=N._transitionData._frameHash;for(V=0;V<B.length;V++)switch((q=B[V]).type){case"replace":te=q.value;var Y=(K[q.index]||{}).name,W=te.name;K[q.index]=J[W]=te,W!==Y&&(delete J[Y],J[W]=te);break;case"insert":J[(te=q.value).name]=te,K.splice(q.index,0,te);break;case"delete":delete J[(te=K[q.index]).name],K.splice(q.index,1)}return Promise.resolve()},h.computeFrame=function(N,B){var V,q,te,K,J=N._transitionData._frameHash;if(!B)throw new Error("computeFrame must be given a string frame name");var Y=J[B.toString()];if(!Y)return!1;for(var W=[Y],Q=[Y.name];Y.baseframe&&(Y=J[Y.baseframe.toString()])&&Q.indexOf(Y.name)===-1;)W.push(Y),Q.push(Y.name);for(var ne={};Y=W.pop();)if(Y.layout&&(ne.layout=h.extendLayout(ne.layout,Y.layout)),Y.data){if(ne.data||(ne.data=[]),!(q=Y.traces))for(q=[],V=0;V<Y.data.length;V++)q[V]=V;for(ne.traces||(ne.traces=[]),V=0;V<Y.data.length;V++)(te=q[V])!=null&&((K=ne.traces.indexOf(te))===-1&&(K=ne.data.length,ne.traces[K]=te),ne.data[K]=h.extendTrace(ne.data[K],Y.data[V]))}return ne},h.recomputeFrameHash=function(N){for(var B=N._transitionData._frameHash={},V=N._transitionData._frames,q=0;q<V.length;q++){var te=V[q];te&&te.name&&(B[te.name]=te)}},h.extendObjectWithContainers=function(N,B,V){var q,te,K,J,Y,W,Q,ne=t.extendDeepNoArrays({},B||{}),re=t.expandObjectPaths(ne),ae={};if(V&&V.length)for(K=0;K<V.length;K++)(te=(q=t.nestedProperty(re,V[K])).get())===void 0?t.nestedProperty(ae,V[K]).set(null):(q.set(null),t.nestedProperty(ae,V[K]).set(te));if(N=t.extendDeepNoArrays(N||{},re),V&&V.length){for(K=0;K<V.length;K++)if(W=t.nestedProperty(ae,V[K]).get()){for(Q=(Y=t.nestedProperty(N,V[K])).get(),Array.isArray(Q)||(Q=[],Y.set(Q)),J=0;J<W.length;J++){var ue=W[J];Q[J]=ue===null?null:h.extendObjectWithContainers(Q[J],ue)}Y.set(Q)}}return N},h.dataArrayContainers=["transforms","dimensions"],h.layoutArrayContainers=b.layoutArrayContainers,h.extendTrace=function(N,B){return h.extendObjectWithContainers(N,B,h.dataArrayContainers)},h.extendLayout=function(N,B){return h.extendObjectWithContainers(N,B,h.layoutArrayContainers)},h.transition=function(N,B,V,q,te,K){var J={redraw:te.redraw},Y={},W=[];return J.prepareFn=function(){for(var Q=Array.isArray(B)?B.length:0,ne=q.slice(0,Q),re=0;re<ne.length;re++){var ae=ne[re],ue=N._fullData[ae]._module;if(ue){if(ue.animatable){var pe=ue.basePlotModule.name;Y[pe]||(Y[pe]=[]),Y[pe].push(ae)}N.data[ne[re]]=h.extendTrace(N.data[ne[re]],B[re])}}var ge=t.expandObjectPaths(t.extendDeepNoArrays({},V)),_e=/^[xy]axis[0-9]*$/;for(var me in ge)_e.test(me)&&delete ge[me].range;h.extendLayout(N.layout,ge),delete N.calcdata,h.supplyDefaults(N),h.doCalcdata(N);var ve=t.expandObjectPaths(V);if(ve){var Oe=N._fullLayout._plots;for(var Me in Oe){var Te=Oe[Me],se=Te.xaxis,oe=Te.yaxis,he=se.range.slice(),Ee=oe.range.slice(),ke=null,be=null,Ie=null,Fe=null;Array.isArray(ve[se._name+".range"])?ke=ve[se._name+".range"].slice():Array.isArray((ve[se._name]||{}).range)&&(ke=ve[se._name].range.slice()),Array.isArray(ve[oe._name+".range"])?be=ve[oe._name+".range"].slice():Array.isArray((ve[oe._name]||{}).range)&&(be=ve[oe._name].range.slice()),he&&ke&&(se.r2l(he[0])!==se.r2l(ke[0])||se.r2l(he[1])!==se.r2l(ke[1]))&&(Ie={xr0:he,xr1:ke}),Ee&&be&&(oe.r2l(Ee[0])!==oe.r2l(be[0])||oe.r2l(Ee[1])!==oe.r2l(be[1]))&&(Fe={yr0:Ee,yr1:be}),(Ie||Fe)&&W.push(t.extendFlat({plotinfo:Te},Ie,Fe))}}return Promise.resolve()},J.runFn=function(Q){var ne,re,ae=N._fullLayout._basePlotModules,ue=W.length;if(V)for(re=0;re<ae.length;re++)ae[re].transitionAxes&&ae[re].transitionAxes(N,W,K,Q);for(var pe in ue?((ne=t.extendFlat({},K)).duration=0,delete Y.cartesian):ne=K,Y){var ge=Y[pe];N._fullData[ge[0]]._module.basePlotModule.plot(N,ge,ne,Q)}},z(N,K,J)},h.transitionFromReact=function(N,B,V,q){var te=N._fullLayout,K=te.transition,J={},Y=[];return J.prepareFn=function(){var W=te._plots;for(var Q in J.redraw=!1,B.anim==="some"&&(J.redraw=!0),V.anim==="some"&&(J.redraw=!0),W){var ne=W[Q],re=ne.xaxis,ae=ne.yaxis,ue=q[re._name].range.slice(),pe=q[ae._name].range.slice(),ge=re.range.slice(),_e=ae.range.slice();re.setScale(),ae.setScale();var me=null,ve=null;re.r2l(ue[0])===re.r2l(ge[0])&&re.r2l(ue[1])===re.r2l(ge[1])||(me={xr0:ue,xr1:ge}),ae.r2l(pe[0])===ae.r2l(_e[0])&&ae.r2l(pe[1])===ae.r2l(_e[1])||(ve={yr0:pe,yr1:_e}),(me||ve)&&Y.push(t.extendFlat({plotinfo:ne},me,ve))}return Promise.resolve()},J.runFn=function(W){for(var Q,ne,re,ae=N._fullData,ue=N._fullLayout._basePlotModules,pe=[],ge=0;ge<ae.length;ge++)pe.push(ge);function _e(){if(N._fullLayout)for(var ve=0;ve<ue.length;ve++)ue[ve].transitionAxes&&ue[ve].transitionAxes(N,Y,Q,W)}function me(){if(N._fullLayout)for(var ve=0;ve<ue.length;ve++)ue[ve].plot(N,re,ne,W)}Y.length&&B.anim?K.ordering==="traces first"?(Q=t.extendFlat({},K,{duration:0}),re=pe,ne=K,setTimeout(_e,K.duration),me()):(Q=K,re=null,ne=t.extendFlat({},K,{duration:0}),setTimeout(me,Q.duration),_e()):Y.length?(Q=K,_e()):B.anim&&(re=pe,ne=K,me())},z(N,K,J)},h.doCalcdata=function(N,B){var V,q,te,K,J=n.list(N),Y=N._fullData,W=N._fullLayout,Q=new Array(Y.length),ne=(N.calcdata||[]).slice();for(N.calcdata=Q,W._numBoxes=0,W._numViolins=0,W._violinScaleGroupStats={},N._hmpixcount=0,N._hmlumcount=0,W._piecolormap={},W._sunburstcolormap={},W._treemapcolormap={},W._iciclecolormap={},W._funnelareacolormap={},te=0;te<Y.length;te++)Array.isArray(B)&&B.indexOf(te)===-1&&(Q[te]=ne[te]);for(te=0;te<Y.length;te++)(V=Y[te])._arrayAttrs=d.findArrayAttributes(V),V._extremes={};var re=W._subplots.polar||[];for(te=0;te<re.length;te++)J.push(W[re[te]].radialaxis,W[re[te]].angularaxis);for(var ae in W._colorAxes){var ue=W[ae];ue.cauto!==!1&&(delete ue.cmin,delete ue.cmax)}var pe=!1;function ge(ve){if(V=Y[ve],q=V._module,V.visible===!0&&V.transforms){if(q&&q.calc){var Oe=q.calc(N,V);Oe[0]&&Oe[0].t&&Oe[0].t._scene&&delete Oe[0].t._scene.dirty}for(K=0;K<V.transforms.length;K++){var Me=V.transforms[K];(q=y[Me.type])&&q.calcTransform&&(V._hasCalcTransform=!0,pe=!0,q.calcTransform(N,V,Me))}}}function _e(ve,Oe){if(V=Y[ve],!!(q=V._module).isContainer===Oe){var Me=[];if(V.visible===!0&&V._length!==0){delete V._indexToPoints;var Te=V.transforms||[];for(K=Te.length-1;K>=0;K--)if(Te[K].enabled){V._indexToPoints=Te[K]._indexToPoints;break}q&&q.calc&&(Me=q.calc(N,V))}Array.isArray(Me)&&Me[0]||(Me=[{x:r,y:r}]),Me[0].t||(Me[0].t={}),Me[0].trace=V,Q[ve]=Me}}for(O(J,Y,W),te=0;te<Y.length;te++)_e(te,!0);for(te=0;te<Y.length;te++)ge(te);for(pe&&O(J,Y,W),te=0;te<Y.length;te++)_e(te,!0);for(te=0;te<Y.length;te++)_e(te,!1);H(N);var me=function(ve,Oe){var Me,Te,se,oe,he,Ee=[];function ke(Ve,We,at){var et=We._id.charAt(0);if(Ve==="histogram2dcontour"){var De=We._counterAxes[0],Be=n.getFromId(Oe,De),nt=et==="x"||De==="x"&&Be.type==="category",tt=et==="y"||De==="y"&&Be.type==="category";return function(dt,ht){return dt===0||ht===0||nt&&dt===at[ht].length-1||tt&&ht===at.length-1?-1:(et==="y"?ht:dt)-1}}return function(dt,ht){return et==="y"?ht:dt}}var be={min:function(Ve){return t.aggNums(Math.min,null,Ve)},max:function(Ve){return t.aggNums(Math.max,null,Ve)},sum:function(Ve){return t.aggNums(function(We,at){return We+at},null,Ve)},total:function(Ve){return t.aggNums(function(We,at){return We+at},null,Ve)},mean:function(Ve){return t.mean(Ve)},median:function(Ve){return t.median(Ve)}};function Ie(Ve,We){return Ve[1]-We[1]}function Fe(Ve,We){return We[1]-Ve[1]}for(Me=0;Me<ve.length;Me++){var ce=ve[Me];if(ce.type==="category"){var we=ce.categoryorder.match(G);if(we){var ye=we[1],Ce=we[2],Re=ce._id.charAt(0),ze=Re==="x",He=[];for(Te=0;Te<ce._categories.length;Te++)He.push([ce._categories[Te],[]]);for(Te=0;Te<ce._traceIndices.length;Te++){var Ge=ce._traceIndices[Te],Je=Oe._fullData[Ge];if(Je.visible===!0){var ot=Je.type;b.traceIs(Je,"histogram")&&(delete Je._xautoBinFinished,delete Je._yautoBinFinished);var Qe=ot==="splom",vt=ot==="scattergl",xt=Oe.calcdata[Ge];for(se=0;se<xt.length;se++){var mt,rt,it=xt[se];if(Qe){var Tt=Je._axesDim[ce._id];if(!ze){var Mt=Je._diag[Tt][0];Mt&&(ce=Oe._fullLayout[n.id2name(Mt)])}var Pt=it.trace.dimensions[Tt].values;for(oe=0;oe<Pt.length;oe++)for(mt=ce._categoriesMap[Pt[oe]],he=0;he<it.trace.dimensions.length;he++)if(he!==Tt){var kt=it.trace.dimensions[he];He[mt][1].push(kt.values[oe])}}else if(vt){for(oe=0;oe<it.t.x.length;oe++)ze?(mt=it.t.x[oe],rt=it.t.y[oe]):(mt=it.t.y[oe],rt=it.t.x[oe]),He[mt][1].push(rt);it.t&&it.t._scene&&delete it.t._scene.dirty}else if(it.hasOwnProperty("z")){rt=it.z;var Ze=ke(Je.type,ce,rt);for(oe=0;oe<rt.length;oe++)for(he=0;he<rt[oe].length;he++)(mt=Ze(he,oe))+1&&He[mt][1].push(rt[oe][he])}else for((mt=it.p)===void 0&&(mt=it[Re]),(rt=it.s)===void 0&&(rt=it.v),rt===void 0&&(rt=ze?it.y:it.x),Array.isArray(rt)||(rt=rt===void 0?[]:[rt]),oe=0;oe<rt.length;oe++)He[mt][1].push(rt[oe])}}}ce._categoriesValue=He;var Xe=[];for(Te=0;Te<He.length;Te++)Xe.push([He[Te][0],be[ye](He[Te][1])]);Xe.sort(Ce==="descending"?Fe:Ie),ce._categoriesAggregatedValue=Xe,ce._initialCategories=Xe.map(function(Ve){return Ve[0]}),Ee=Ee.concat(ce.sortByInitialCategories())}}}return Ee}(J,N);if(me.length){for(W._numBoxes=0,W._numViolins=0,te=0;te<me.length;te++)_e(me[te],!0);for(te=0;te<me.length;te++)_e(me[te],!1);H(N)}b.getComponentMethod("fx","calc")(N),b.getComponentMethod("errorbars","calc")(N)};var G=/(total|sum|min|max|mean|median) (ascending|descending)/;function O(N,B,V){var q={};function te(W){W.clearCalc(),W.type==="multicategory"&&W.setupMultiCategory(B),q[W._id]=1}t.simpleMap(N,te);for(var K=V._axisMatchGroups||[],J=0;J<K.length;J++)for(var Y in K[J])q[Y]||te(V[n.id2name(Y)])}function H(N){var B,V,q,te=N._fullLayout,K=te._visibleModules,J={};for(V=0;V<K.length;V++){var Y=K[V],W=Y.crossTraceCalc;if(W){var Q=Y.basePlotModule.name;J[Q]?t.pushUnique(J[Q],W):J[Q]=[W]}}for(q in J){var ne=J[q],re=te._subplots[q];if(Array.isArray(re))for(B=0;B<re.length;B++){var ae=re[B],ue=q==="cartesian"?te._plots[ae]:te[ae];for(V=0;V<ne.length;V++)ne[V](N,ue,ae)}else for(V=0;V<ne.length;V++)ne[V](N)}}h.rehover=function(N){N._fullLayout._rehover&&N._fullLayout._rehover()},h.redrag=function(N){N._fullLayout._redrag&&N._fullLayout._redrag()},h.reselect=function(N){var B=N._fullLayout,V=(N.layout||{}).selections,q=B._previousSelections;B._previousSelections=V;var te=B._reselect||JSON.stringify(V)!==JSON.stringify(q);b.getComponentMethod("selections","reselect")(N,te)},h.generalUpdatePerTraceModule=function(N,B,V,q){var te,K=B.traceHash,J={};for(te=0;te<V.length;te++){var Y=V[te],W=Y[0].trace;W.visible&&(J[W.type]=J[W.type]||[],J[W.type].push(Y))}for(var Q in K)if(!J[Q]){var ne=K[Q][0];ne[0].trace.visible=!1,J[Q]=[ne]}for(var re in J){var ae=J[re];ae[0][0].trace._module.plot(N,B,t.filterVisible(ae),q)}B.traceHash=J},h.plotBasePlot=function(N,B,V,q,te){var K=b.getModule(N),J=c(B.calcdata,K)[0];K.plot(B,J,q,te)},h.cleanBasePlot=function(N,B,V,q,te){var K=te._has&&te._has(N),J=V._has&&V._has(N);K&&!J&&te["_"+N+"layer"].selectAll("g.trace").remove()}},9813:function(ee){ee.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(ee,D,e){var M=e(71828),k=e(61082).tester,l=M.findIndexOfMin,T=M.isAngleInsideSector,b=M.angleDelta,d=M.angleDist;function s(n,o,a,u){var p,c,x=u[0],g=u[1],h=i(Math.sin(o)-Math.sin(n)),y=i(Math.cos(o)-Math.cos(n)),v=Math.tan(a),m=i(1/v),_=h/y,f=g-_*x;return m?h&&y?c=v*(p=f/(v-_)):y?(p=g*m,c=g):(p=x,c=x*v):h&&y?(p=0,c=f):y?(p=0,c=g):p=c=NaN,[p,c]}function t(n,o,a,u){return M.isFullCircle([o,a])?function(p,c){var x,g=c.length,h=new Array(g+1);for(x=0;x<g;x++){var y=c[x];h[x]=[p*Math.cos(y),p*Math.sin(y)]}return h[x]=h[0].slice(),h}(n,u):function(p,c,x,g){var h,y,v=g.length,m=[];function _(G){return[p*Math.cos(G),p*Math.sin(G)]}function f(G,O,H){return s(G,O,H,_(G))}function S(G){return M.mod(G,v)}function w(G){return T(G,[c,x])}var E=l(g,function(G){return w(G)?d(G,c):1/0}),L=f(g[E],g[S(E-1)],c);for(m.push(L),h=E,y=0;y<v;h++,y++){var C=g[S(h)];if(!w(C))break;m.push(_(C))}var P=l(g,function(G){return w(G)?d(G,x):1/0}),z=f(g[P],g[S(P+1)],x);return m.push(z),m.push([0,0]),m.push(m[0].slice()),m}(n,o,a,u)}function i(n){return Math.abs(n)>1e-10?n:0}function r(n,o,a){o=o||0,a=a||0;for(var u=n.length,p=new Array(u),c=0;c<u;c++){var x=n[c];p[c]=[o+x[0],a-x[1]]}return p}ee.exports={isPtInsidePolygon:function(n,o,a,u,p){if(!T(o,u))return!1;var c,x;a[0]<a[1]?(c=a[0],x=a[1]):(c=a[1],x=a[0]);var g=k(t(c,u[0],u[1],p)),h=k(t(x,u[0],u[1],p)),y=[n*Math.cos(o),n*Math.sin(o)];return h.contains(y)&&!g.contains(y)},findPolygonOffset:function(n,o,a,u){for(var p=1/0,c=1/0,x=t(n,o,a,u),g=0;g<x.length;g++){var h=x[g];p=Math.min(p,h[0]),c=Math.min(c,-h[1])}return[p,c]},findEnclosingVertexAngles:function(n,o){var a=l(o,function(p){var c=b(p,n);return c>0?c:1/0}),u=M.mod(a+1,o.length);return[o[a],o[u]]},findIntersectionXY:s,findXYatLength:function(n,o,a,u){var p=-o*a,c=o*o+1,x=2*(o*p-a),g=p*p+a*a-n*n,h=Math.sqrt(x*x-4*c*g),y=(-x+h)/(2*c),v=(-x-h)/(2*c);return[[y,o*y+p+u],[v,o*v+p+u]]},clampTiny:i,pathPolygon:function(n,o,a,u,p,c){return"M"+r(t(n,o,a,u),p,c).join("L")},pathPolygonAnnulus:function(n,o,a,u,p,c,x){var g,h;n<o?(g=n,h=o):(g=o,h=n);var y=r(t(g,a,u,p),c,x);return"M"+r(t(h,a,u,p),c,x).reverse().join("L")+"M"+y.join("L")}}},23580:function(ee,D,e){var M=e(27659).AU,k=e(71828).counterRegex,l=e(77997),T=e(9813),b=T.attr,d=T.name,s=k(d),t={};t[b]={valType:"subplotid",dflt:d,editType:"calc"},ee.exports={attr:b,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(73812),supplyLayoutDefaults:e(68993),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,o=r._subplots[d],a=0;a<o.length;a++){var u=o[a],p=M(n,d,u),c=r[u]._subplot;c||(c=l(i,u),r[u]._subplot=c),c.plot(p,r,i._promises)}},clean:function(i,r,n,o){for(var a=o._subplots[d]||[],u=o._has&&o._has("gl"),p=r._has&&r._has("gl"),c=u&&!p,x=0;x<a.length;x++){var g=a[x],h=o[g]._subplot;if(!r[g]&&h)for(var y in h.framework.remove(),h.layers["radial-axis-title"].remove(),h.clipPaths)h.clipPaths[y].remove();c&&h._scene&&(h._scene.destroy(),h._scene=null)}},toSVG:e(93612).toSVG}},73812:function(ee,D,e){var M=e(22399),k=e(13838),l=e(27670).Y,T=e(71828).extendFlat,b=e(30962).overrideAll,d=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:T({},k.minallowed,{editType:"plot"}),maxallowed:T({},k.maxallowed,{editType:"plot"}),range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,d,s);var i={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(i,d,s),ee.exports={domain:l({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(ee,D,e){var M=e(71828),k=e(7901),l=e(44467),T=e(49119),b=e(27659).NG,d=e(26218),s=e(38701),t=e(96115),i=e(89426),r=e(15258),n=e(92128),o=e(23074),a=e(4322),u=e(73812),p=e(12101),c=e(9813),x=c.axisNames;function g(y,v,m,_){var f=m("bgcolor");_.bgColor=k.combine(f,_.paper_bgcolor);var S=m("sector");m("hole");var w,E=b(_.fullData,c.name,_.id),L=_.layoutOut;function C(ae,ue){return m(w+"."+ae,ue)}for(var P=0;P<x.length;P++){w=x[P],M.isPlainObject(y[w])||(y[w]={});var z=y[w],G=l.newContainer(v,w);G._id=G._name=w,G._attr=_.id+"."+w,G._traceIndices=E.map(function(ae){return ae._expandedIndex});var O=c.axisName2dataArray[w],H=h(z,G,C,E,O,_);r(z,G,C,{axData:E,dataAttr:O});var N=C("visible");switch(p(G,v,L),C("uirevision",v.uirevision),G._m=1,w){case"radialaxis":C("minallowed"),C("maxallowed");var B,V=C("range"),q=G.getAutorangeDflt(V),te=C("autorange",q);!V||(V[0]!==null||V[1]!==null)&&(V[0]!==null&&V[1]!==null||te!=="reversed"&&te!==!0)&&(V[0]===null||te!=="min"&&te!=="max reversed")&&(V[1]===null||te!=="max"&&te!=="min reversed")||(V=void 0,delete G.range,G.autorange=!0,B=!0),B||(te=C("autorange",q=G.getAutorangeDflt(V))),z.autorange=te,te&&(o(C,te,V),H!=="linear"&&H!=="-"||C("rangemode"),G.isReversed()&&(G._m=-1)),G.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(H==="date"){M.log("Polar plots do not support date angular axes yet.");for(var K=0;K<E.length;K++)E[K].visible=!1;H=z.type=G.type="linear"}C(H==="linear"?"thetaunit":"period");var J=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[J])}if(i(z,G,C,G.type,{tickSuffixDflt:G.thetaunit==="degrees"?"":void 0}),N){var Y,W,Q,ne,re=_.font||{};W=(Y=C("color"))===z.color?Y:re.color,Q=re.size,ne=re.family,d(z,G,C,G.type),t(z,G,C,G.type,{font:{color:W,size:Q,family:ne}}),s(z,G,C,{outerTicks:!0}),n(z,G,C,{dfltColor:Y,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[w]}),C("layer"),w==="radialaxis"&&(C("side"),C("angle",S[0]),C("title.text"),M.coerceFont(C,"title.font",{color:W,size:M.bigFont(Q),family:ne}))}H!=="category"&&C("hoverformat"),G._input=z}v.angularaxis.type==="category"&&m("gridshape")}function h(y,v,m,_,f,S){var w=m("autotypenumbers",S.autotypenumbersDflt);if(m("type")==="-"){for(var E,L=0;L<_.length;L++)if(_[L].visible){E=_[L];break}E&&E[f]&&(v.type=a(E[f],"gregorian",{noMultiCategory:!0,autotypenumbers:w})),v.type==="-"?v.type="linear":y.type=v.type}return v.type}ee.exports=function(y,v,m){T(y,v,m,{type:c.name,attributes:u,handleDefaults:g,font:v.font,autotypenumbersDflt:v.autotypenumbers,paper_bgcolor:v.paper_bgcolor,fullData:m,layoutOut:v})}},77997:function(ee,D,e){var M=e(39898),k=e(84267),l=e(73972),T=e(71828),b=T.strRotate,d=T.strTranslate,s=e(7901),t=e(91424),i=e(74875),r=e(89298),n=e(21994),o=e(12101),a=e(71739).doAutoRange,u=e(29323),p=e(28569),c=e(30211),x=e(92998),g=e(47322).prepSelect,h=e(47322).selectOnClick,y=e(47322).clearOutline,v=e(6964),m=e(33306),_=e(61549).redrawReglTraces,f=e(18783).MID_SHIFT,S=e(9813),w=e(10869),E=e(23893),L=E.smith,C=E.reactanceArc,P=E.resistanceArc,z=E.smithTransform,G=T._,O=T.mod,H=T.deg2rad,N=T.rad2deg;function B(J,Y,W){this.isSmith=W||!1,this.id=Y,this.gd=J,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Q=J._fullLayout,ne="clip"+Q._uid+Y;this.clipIds.forTraces=ne+"-for-traces",this.clipPaths.forTraces=Q._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Q["_"+(W?"smith":"polar")+"layer"].append("g").attr("class",Y),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},W||(this.radialTickLayout=null,this.angularTickLayout=null)}var V=B.prototype;function q(J){var Y=J.ticks+String(J.ticklen)+String(J.showticklabels);return"side"in J&&(Y+=J.side),Y}function te(J,Y){return Y[T.findIndexOfMin(Y,function(W){return T.angleDist(J,W)})]}function K(J,Y,W){return Y?(J.attr("display",null),J.attr(W)):J&&J.attr("display","none"),J}ee.exports=function(J,Y,W){return new B(J,Y,W)},V.plot=function(J,Y){for(var W=this,Q=Y[W.id],ne=!1,re=0;re<J.length;re++)if(J[re][0].trace.cliponaxis===!1){ne=!0;break}W._hasClipOnAxisFalse=ne,W.updateLayers(Y,Q),W.updateLayout(Y,Q),i.generalUpdatePerTraceModule(W.gd,W,J,Q),W.updateFx(Y,Q),W.isSmith&&(delete Q.realaxis.range,delete Q.imaginaryaxis.range)},V.updateLayers=function(J,Y){var W=this,Q=W.isSmith,ne=W.layers,re=W.getRadial(Y),ae=W.getAngular(Y),ue=S.layerNames,pe=ue.indexOf("frontplot"),ge=ue.slice(0,pe),_e=ae.layer==="below traces",me=re.layer==="below traces";_e&&ge.push("angular-line"),me&&ge.push("radial-line"),_e&&ge.push("angular-axis"),me&&ge.push("radial-axis"),ge.push("frontplot"),_e||ge.push("angular-line"),me||ge.push("radial-line"),_e||ge.push("angular-axis"),me||ge.push("radial-axis");var ve=(Q?"smith":"polar")+"sublayer",Oe=W.framework.selectAll("."+ve).data(ge,String);Oe.enter().append("g").attr("class",function(Me){return ve+" "+Me}).each(function(Me){var Te=ne[Me]=M.select(this);switch(Me){case"frontplot":Q||Te.append("g").classed("barlayer",!0),Te.append("g").classed("scatterlayer",!0);break;case"backplot":Te.append("g").classed("maplayer",!0);break;case"plotbg":ne.bg=Te.append("path");break;case"radial-grid":case"angular-grid":Te.style("fill","none");break;case"radial-line":Te.append("line").style("fill","none");break;case"angular-line":Te.append("path").style("fill","none")}}),Oe.order()},V.updateLayout=function(J,Y){var W=this,Q=W.layers,ne=J._size,re=W.getRadial(Y),ae=W.getAngular(Y),ue=Y.domain.x,pe=Y.domain.y;W.xOffset=ne.l+ne.w*ue[0],W.yOffset=ne.t+ne.h*(1-pe[1]);var ge=W.xLength=ne.w*(ue[1]-ue[0]),_e=W.yLength=ne.h*(pe[1]-pe[0]),me=W.getSector(Y);W.sectorInRad=me.map(H);var ve,Oe,Me,Te,se,oe=W.sectorBBox=function(ot){var Qe,vt=ot[0],xt=ot[1]-vt,mt=O(vt,360),rt=mt+xt,it=Math.cos(H(mt)),Tt=Math.sin(H(mt)),Mt=Math.cos(H(rt)),Pt=Math.sin(H(rt));return Qe=mt<=90&&rt>=90||mt>90&&rt>=450?1:Tt<=0&&Pt<=0?0:Math.max(Tt,Pt),[mt<=180&&rt>=180||mt>180&&rt>=540?-1:it>=0&&Mt>=0?0:Math.min(it,Mt),mt<=270&&rt>=270||mt>270&&rt>=630?-1:Tt>=0&&Pt>=0?0:Math.min(Tt,Pt),rt>=360?1:it<=0&&Mt<=0?0:Math.max(it,Mt),Qe]}(me),he=oe[2]-oe[0],Ee=oe[3]-oe[1],ke=_e/ge,be=Math.abs(Ee/he);ke>be?(ve=ge,se=(_e-(Oe=ge*be))/ne.h/2,Me=[ue[0],ue[1]],Te=[pe[0]+se,pe[1]-se]):(Oe=_e,se=(ge-(ve=_e/be))/ne.w/2,Me=[ue[0]+se,ue[1]-se],Te=[pe[0],pe[1]]),W.xLength2=ve,W.yLength2=Oe,W.xDomain2=Me,W.yDomain2=Te;var Ie,Fe=W.xOffset2=ne.l+ne.w*Me[0],ce=W.yOffset2=ne.t+ne.h*(1-Te[1]),we=W.radius=ve/he,ye=W.innerRadius=W.getHole(Y)*we,Ce=W.cx=Fe-we*oe[0],Re=W.cy=ce+we*oe[3],ze=W.cxx=Ce-Fe,He=W.cyy=Re-ce,Ge=re.side;Ge==="counterclockwise"?(Ie=Ge,Ge="top"):Ge==="clockwise"&&(Ie=Ge,Ge="bottom"),W.radialAxis=W.mockAxis(J,Y,re,{_id:"x",side:Ge,_trueSide:Ie,domain:[ye/ne.w,we/ne.w]}),W.angularAxis=W.mockAxis(J,Y,ae,{side:"right",domain:[0,Math.PI],autorange:!1}),W.doAutoRange(J,Y),W.updateAngularAxis(J,Y),W.updateRadialAxis(J,Y),W.updateRadialAxisTitle(J,Y),W.xaxis=W.mockCartesianAxis(J,Y,{_id:"x",domain:Me}),W.yaxis=W.mockCartesianAxis(J,Y,{_id:"y",domain:Te});var Je=W.pathSubplot();W.clipPaths.forTraces.select("path").attr("d",Je).attr("transform",d(ze,He)),Q.frontplot.attr("transform",d(Fe,ce)).call(t.setClipUrl,W._hasClipOnAxisFalse?null:W.clipIds.forTraces,W.gd),Q.bg.attr("d",Je).attr("transform",d(Ce,Re)).call(s.fill,Y.bgcolor)},V.mockAxis=function(J,Y,W,Q){var ne=T.extendFlat({},W,Q);return o(ne,Y,J),ne},V.mockCartesianAxis=function(J,Y,W){var Q=this,ne=Q.isSmith,re=W._id,ae=T.extendFlat({type:"linear"},W);n(ae,J);var ue={x:[0,2],y:[1,3]};return ae.setRange=function(){var pe=Q.sectorBBox,ge=ue[re],_e=Q.radialAxis._rl,me=(_e[1]-_e[0])/(1-Q.getHole(Y));ae.range=[pe[ge[0]]*me,pe[ge[1]]*me]},ae.isPtWithinRange=re!=="x"||ne?function(){return!0}:function(pe){return Q.isPtInside(pe)},ae.setRange(),ae.setScale(),ae},V.doAutoRange=function(J,Y){var W=this,Q=W.gd,ne=W.radialAxis,re=W.getRadial(Y);a(Q,ne);var ae=ne.range;re.range=ae.slice(),re._input.range=ae.slice(),ne._rl=[ne.r2l(ae[0],null,"gregorian"),ne.r2l(ae[1],null,"gregorian")]},V.updateRadialAxis=function(J,Y){var W=this,Q=W.gd,ne=W.layers,re=W.radius,ae=W.innerRadius,ue=W.cx,pe=W.cy,ge=W.getRadial(Y),_e=O(W.getSector(Y)[0],360),me=W.radialAxis,ve=ae<re,Oe=W.isSmith;Oe||(W.fillViewInitialKey("radialaxis.angle",ge.angle),W.fillViewInitialKey("radialaxis.range",me.range.slice()),me.setGeometry()),me.tickangle==="auto"&&_e>90&&_e<=270&&(me.tickangle=180);var Me=Oe?function(ce){var we=z(W,L([ce.x,0]));return d(we[0]-ue,we[1]-pe)}:function(ce){return d(me.l2p(ce.x)+ae,0)},Te=Oe?function(ce){return P(W,ce.x,-1/0,1/0)}:function(ce){return W.pathArc(me.r2p(ce.x)+ae)},se=q(ge);if(W.radialTickLayout!==se&&(ne["radial-axis"].selectAll(".xtick").remove(),W.radialTickLayout=se),ve){me.setScale();var oe=0,he=Oe?(me.tickvals||[]).filter(function(ce){return ce>=0}).map(function(ce){return r.tickText(me,ce,!0,!1)}):r.calcTicks(me),Ee=Oe?he:r.clipEnds(me,he),ke=r.getTickSigns(me)[2];Oe&&((me.ticks==="top"&&me.side==="bottom"||me.ticks==="bottom"&&me.side==="top")&&(ke=-ke),me.ticks==="top"&&me.side==="top"&&(oe=-me.ticklen),me.ticks==="bottom"&&me.side==="bottom"&&(oe=me.ticklen)),r.drawTicks(Q,me,{vals:he,layer:ne["radial-axis"],path:r.makeTickPath(me,0,ke),transFn:Me,crisp:!1}),r.drawGrid(Q,me,{vals:Ee,layer:ne["radial-grid"],path:Te,transFn:T.noop,crisp:!1}),r.drawLabels(Q,me,{vals:he,layer:ne["radial-axis"],transFn:Me,labelFns:r.makeLabelFns(me,oe)})}var be=W.radialAxisAngle=W.vangles?N(te(H(ge.angle),W.vangles)):ge.angle,Ie=d(ue,pe),Fe=Ie+b(-be);K(ne["radial-axis"],ve&&(ge.showticklabels||ge.ticks),{transform:Fe}),K(ne["radial-grid"],ve&&ge.showgrid,{transform:Oe?"":Ie}),K(ne["radial-line"].select("line"),ve&&ge.showline,{x1:Oe?-re:ae,y1:0,x2:re,y2:0,transform:Fe}).attr("stroke-width",ge.linewidth).call(s.stroke,ge.linecolor)},V.updateRadialAxisTitle=function(J,Y,W){if(!this.isSmith){var Q=this,ne=Q.gd,re=Q.radius,ae=Q.cx,ue=Q.cy,pe=Q.getRadial(Y),ge=Q.id+"title",_e=0;if(pe.title){var me=t.bBox(Q.layers["radial-axis"].node()).height,ve=pe.title.font.size,Oe=pe.side;_e=Oe==="top"?ve:Oe==="counterclockwise"?-(me+.4*ve):me+.8*ve}var Me=W!==void 0?W:Q.radialAxisAngle,Te=H(Me),se=Math.cos(Te),oe=Math.sin(Te),he=ae+re/2*se+_e*oe,Ee=ue-re/2*oe+_e*se;Q.layers["radial-axis-title"]=x.draw(ne,ge,{propContainer:pe,propName:Q.id+".radialaxis.title",placeholder:G(ne,"Click to enter radial axis title"),attributes:{x:he,y:Ee,"text-anchor":"middle"},transform:{rotate:-Me}})}},V.updateAngularAxis=function(J,Y){var W=this,Q=W.gd,ne=W.layers,re=W.radius,ae=W.innerRadius,ue=W.cx,pe=W.cy,ge=W.getAngular(Y),_e=W.angularAxis,me=W.isSmith;me||(W.fillViewInitialKey("angularaxis.rotation",ge.rotation),_e.setGeometry(),_e.setScale());var ve=me?function(ce){var we=z(W,L([0,ce.x]));return Math.atan2(we[0]-ue,we[1]-pe)-Math.PI/2}:function(ce){return _e.t2g(ce.x)};_e.type==="linear"&&_e.thetaunit==="radians"&&(_e.tick0=N(_e.tick0),_e.dtick=N(_e.dtick));var Oe=function(ce){return d(ue+re*Math.cos(ce),pe-re*Math.sin(ce))},Me=me?function(ce){var we=z(W,L([0,ce.x]));return d(we[0],we[1])}:function(ce){return Oe(ve(ce))},Te=me?function(ce){var we=z(W,L([0,ce.x])),ye=Math.atan2(we[0]-ue,we[1]-pe)-Math.PI/2;return d(we[0],we[1])+b(-N(ye))}:function(ce){var we=ve(ce);return Oe(we)+b(-N(we))},se=me?function(ce){return C(W,ce.x,0,1/0)}:function(ce){var we=ve(ce),ye=Math.cos(we),Ce=Math.sin(we);return"M"+[ue+ae*ye,pe-ae*Ce]+"L"+[ue+re*ye,pe-re*Ce]},oe=r.makeLabelFns(_e,0).labelStandoff,he={xFn:function(ce){var we=ve(ce);return Math.cos(we)*oe},yFn:function(ce){var we=ve(ce),ye=Math.sin(we)>0?.2:1;return-Math.sin(we)*(oe+ce.fontSize*ye)+Math.abs(Math.cos(we))*(ce.fontSize*f)},anchorFn:function(ce){var we=ve(ce),ye=Math.cos(we);return Math.abs(ye)<.1?"middle":ye>0?"start":"end"},heightFn:function(ce,we,ye){var Ce=ve(ce);return-.5*(1+Math.sin(Ce))*ye}},Ee=q(ge);W.angularTickLayout!==Ee&&(ne["angular-axis"].selectAll("."+_e._id+"tick").remove(),W.angularTickLayout=Ee);var ke,be=me?[1/0].concat(_e.tickvals||[]).map(function(ce){return r.tickText(_e,ce,!0,!1)}):r.calcTicks(_e);if(me&&(be[0].text="",be[0].fontSize*=1.75),Y.gridshape==="linear"?(ke=be.map(ve),T.angleDelta(ke[0],ke[1])<0&&(ke=ke.slice().reverse())):ke=null,W.vangles=ke,_e.type==="category"&&(be=be.filter(function(ce){return T.isAngleInsideSector(ve(ce),W.sectorInRad)})),_e.visible){var Ie=_e.ticks==="inside"?-1:1,Fe=(_e.linewidth||1)/2;r.drawTicks(Q,_e,{vals:be,layer:ne["angular-axis"],path:"M"+Ie*Fe+",0h"+Ie*_e.ticklen,transFn:Te,crisp:!1}),r.drawGrid(Q,_e,{vals:be,layer:ne["angular-grid"],path:se,transFn:T.noop,crisp:!1}),r.drawLabels(Q,_e,{vals:be,layer:ne["angular-axis"],repositionOnUpdate:!0,transFn:Me,labelFns:he})}K(ne["angular-line"].select("path"),ge.showline,{d:W.pathSubplot(),transform:d(ue,pe)}).attr("stroke-width",ge.linewidth).call(s.stroke,ge.linecolor)},V.updateFx=function(J,Y){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(J),this.updateRadialDrag(J,Y,0),this.updateRadialDrag(J,Y,1)),this.updateHoverAndMainDrag(J))},V.updateHoverAndMainDrag=function(J){var Y,W,Q=this,ne=Q.isSmith,re=Q.gd,ae=Q.layers,ue=J._zoomlayer,pe=S.MINZOOM,ge=S.OFFEDGE,_e=Q.radius,me=Q.innerRadius,ve=Q.cx,Oe=Q.cy,Me=Q.cxx,Te=Q.cyy,se=Q.sectorInRad,oe=Q.vangles,he=Q.radialAxis,Ee=w.clampTiny,ke=w.findXYatLength,be=w.findEnclosingVertexAngles,Ie=S.cornerHalfWidth,Fe=S.cornerLen/2,ce=u.makeDragger(ae,"path","maindrag",J.dragmode===!1?"none":"crosshair");M.select(ce).attr("d",Q.pathSubplot()).attr("transform",d(ve,Oe)),ce.onmousemove=function(et){c.hover(re,et,Q.id),re._fullLayout._lasthover=ce,re._fullLayout._hoversubplot=Q.id},ce.onmouseout=function(et){re._dragging||p.unhover(re,et)};var we,ye,Ce,Re,ze,He,Ge,Je,ot,Qe={element:ce,gd:re,subplot:Q.id,plotinfo:{id:Q.id,xaxis:Q.xaxis,yaxis:Q.yaxis},xaxes:[Q.xaxis],yaxes:[Q.yaxis]};function vt(et,De){return Math.sqrt(et*et+De*De)}function xt(et,De){return vt(et-Me,De-Te)}function mt(et,De){return Math.atan2(Te-De,et-Me)}function rt(et,De){return[et*Math.cos(De),et*Math.sin(-De)]}function it(et,De){if(et===0)return Q.pathSector(2*Ie);var Be=Fe/et,nt=De-Be,tt=De+Be,dt=Math.max(0,Math.min(et,_e)),ht=dt-Ie,gt=dt+Ie;return"M"+rt(ht,nt)+"A"+[ht,ht]+" 0,0,0 "+rt(ht,tt)+"L"+rt(gt,tt)+"A"+[gt,gt]+" 0,0,1 "+rt(gt,nt)+"Z"}function Tt(et,De,Be){if(et===0)return Q.pathSector(2*Ie);var nt,tt,dt=rt(et,De),ht=rt(et,Be),gt=Ee((dt[0]+ht[0])/2),ut=Ee((dt[1]+ht[1])/2);if(gt&&ut){var wt=ut/gt,ct=-1/wt,ft=ke(Ie,wt,gt,ut);nt=ke(Fe,ct,ft[0][0],ft[0][1]),tt=ke(Fe,ct,ft[1][0],ft[1][1])}else{var bt,It;ut?(bt=Fe,It=Ie):(bt=Ie,It=Fe),nt=[[gt-bt,ut-It],[gt+bt,ut-It]],tt=[[gt-bt,ut+It],[gt+bt,ut+It]]}return"M"+nt.join("L")+"L"+tt.reverse().join("L")+"Z"}function Mt(et,De){return De=Math.max(Math.min(De,_e),me),et<ge?et=0:_e-et<ge?et=_e:De<ge?De=0:_e-De<ge&&(De=_e),Math.abs(De-et)>pe?(et<De?(Ce=et,Re=De):(Ce=De,Re=et),!0):(Ce=null,Re=null,!1)}function Pt(et,De){et=et||ze,De=De||"M0,0Z",Je.attr("d",et),ot.attr("d",De),u.transitionZoombox(Je,ot,He,Ge),He=!0;var Be={};We(Be),re.emit("plotly_relayouting",Be)}function kt(et,De){var Be,nt,tt=we+(et*=Y),dt=ye+(De*=W),ht=xt(we,ye),gt=Math.min(xt(tt,dt),_e),ut=mt(we,ye);Mt(ht,gt)&&(Be=ze+Q.pathSector(Re),Ce&&(Be+=Q.pathSector(Ce)),nt=it(Ce,ut)+it(Re,ut)),Pt(Be,nt)}function Ze(et,De,Be,nt){var tt=w.findIntersectionXY(Be,nt,Be,[et-Me,Te-De]);return vt(tt[0],tt[1])}function Xe(et,De){var Be,nt,tt=we+et,dt=ye+De,ht=mt(we,ye),gt=mt(tt,dt),ut=be(ht,oe),wt=be(gt,oe);Mt(Ze(we,ye,ut[0],ut[1]),Math.min(Ze(tt,dt,wt[0],wt[1]),_e))&&(Be=ze+Q.pathSector(Re),Ce&&(Be+=Q.pathSector(Ce)),nt=[Tt(Ce,ut[0],ut[1]),Tt(Re,ut[0],ut[1])].join(" ")),Pt(Be,nt)}function Ve(){if(u.removeZoombox(re),Ce!==null&&Re!==null){var et={};We(et),u.showDoubleClickNotifier(re),l.call("_guiRelayout",re,et)}}function We(et){var De=he._rl,Be=(De[1]-De[0])/(1-me/_e)/_e,nt=[De[0]+(Ce-me)*Be,De[0]+(Re-me)*Be];et[Q.id+".radialaxis.range"]=nt}function at(et,De){var Be=re._fullLayout.clickmode;if(u.removeZoombox(re),et===2){var nt={};for(var tt in Q.viewInitial)nt[Q.id+"."+tt]=Q.viewInitial[tt];re.emit("plotly_doubleclick",null),l.call("_guiRelayout",re,nt)}Be.indexOf("select")>-1&&et===1&&h(De,re,[Q.xaxis],[Q.yaxis],Q.id,Qe),Be.indexOf("event")>-1&&c.click(re,De,Q.id)}Qe.prepFn=function(et,De,Be){var nt=re._fullLayout.dragmode,tt=ce.getBoundingClientRect();re._fullLayout._calcInverseTransform(re);var dt=re._fullLayout._invTransform;Y=re._fullLayout._invScaleX,W=re._fullLayout._invScaleY;var ht=T.apply3DTransform(dt)(De-tt.left,Be-tt.top);if(we=ht[0],ye=ht[1],oe){var gt=w.findPolygonOffset(_e,se[0],se[1],oe);we+=Me+gt[0],ye+=Te+gt[1]}switch(nt){case"zoom":Qe.clickFn=at,ne||(Qe.moveFn=oe?Xe:kt,Qe.doneFn=Ve,function(){Ce=null,Re=null,ze=Q.pathSubplot(),He=!1;var ut=re._fullLayout[Q.id];Ge=k(ut.bgcolor).getLuminance(),(Je=u.makeZoombox(ue,Ge,ve,Oe,ze)).attr("fill-rule","evenodd"),ot=u.makeCorners(ue,ve,Oe),y(re)}());break;case"select":case"lasso":g(et,De,Be,Qe,nt)}},p.init(Qe)},V.updateRadialDrag=function(J,Y,W){var Q=this,ne=Q.gd,re=Q.layers,ae=Q.radius,ue=Q.innerRadius,pe=Q.cx,ge=Q.cy,_e=Q.radialAxis,me=S.radialDragBoxSize,ve=me/2;if(_e.visible){var Oe,Me,Te,se=H(Q.radialAxisAngle),oe=_e._rl,he=oe[0],Ee=oe[1],ke=oe[W],be=.75*(oe[1]-oe[0])/(1-Q.getHole(Y))/ae;W?(Oe=pe+(ae+ve)*Math.cos(se),Me=ge-(ae+ve)*Math.sin(se),Te="radialdrag"):(Oe=pe+(ue-ve)*Math.cos(se),Me=ge-(ue-ve)*Math.sin(se),Te="radialdrag-inner");var Ie,Fe,ce,we=u.makeRectDragger(re,Te,"crosshair",-ve,-ve,me,me),ye={element:we,gd:ne};J.dragmode===!1&&(ye.dragmode=!1),K(M.select(we),_e.visible&&ue<ae,{transform:d(Oe,Me)}),ye.prepFn=function(){Ie=null,Fe=null,ce=null,ye.moveFn=Ce,ye.doneFn=Re,y(ne)},ye.clampFn=function(Ge,Je){return Math.sqrt(Ge*Ge+Je*Je)<S.MINDRAG&&(Ge=0,Je=0),[Ge,Je]},p.init(ye)}function Ce(Ge,Je){if(Ie)Ie(Ge,Je);else{var ot=[Ge,-Je],Qe=[Math.cos(se),Math.sin(se)],vt=Math.abs(T.dot(ot,Qe)/Math.sqrt(T.dot(ot,ot)));isNaN(vt)||(Ie=vt<.5?ze:He)}var xt={};(function(mt){Fe!==null?mt[Q.id+".radialaxis.angle"]=Fe:ce!==null&&(mt[Q.id+".radialaxis.range["+W+"]"]=ce)})(xt),ne.emit("plotly_relayouting",xt)}function Re(){Fe!==null?l.call("_guiRelayout",ne,Q.id+".radialaxis.angle",Fe):ce!==null&&l.call("_guiRelayout",ne,Q.id+".radialaxis.range["+W+"]",ce)}function ze(Ge,Je){if(W!==0){var ot=Oe+Ge,Qe=Me+Je;Fe=Math.atan2(ge-Qe,ot-pe),Q.vangles&&(Fe=te(Fe,Q.vangles)),Fe=N(Fe);var vt=d(pe,ge)+b(-Fe);re["radial-axis"].attr("transform",vt),re["radial-line"].select("line").attr("transform",vt);var xt=Q.gd._fullLayout,mt=xt[Q.id];Q.updateRadialAxisTitle(xt,mt,Fe)}}function He(Ge,Je){var ot=T.dot([Ge,-Je],[Math.cos(se),Math.sin(se)]);if(ce=ke-be*ot,be>0==(W?ce>he:ce<Ee)){var Qe=ne._fullLayout,vt=Qe[Q.id];_e.range[W]=ce,_e._rl[W]=ce,Q.updateRadialAxis(Qe,vt),Q.xaxis.setRange(),Q.xaxis.setScale(),Q.yaxis.setRange(),Q.yaxis.setScale();var xt=!1;for(var mt in Q.traceHash){var rt=Q.traceHash[mt],it=T.filterVisible(rt);rt[0][0].trace._module.plot(ne,Q,it,vt),l.traceIs(mt,"gl")&&it.length&&(xt=!0)}xt&&(m(ne),_(ne))}else ce=null}},V.updateAngularDrag=function(J){var Y=this,W=Y.gd,Q=Y.layers,ne=Y.radius,re=Y.angularAxis,ae=Y.cx,ue=Y.cy,pe=Y.cxx,ge=Y.cyy,_e=S.angularDragBoxSize,me=u.makeDragger(Q,"path","angulardrag",J.dragmode===!1?"none":"move"),ve={element:me,gd:W};function Oe(ye,Ce){return Math.atan2(ge+_e-Ce,ye-pe-_e)}J.dragmode===!1?ve.dragmode=!1:M.select(me).attr("d",Y.pathAnnulus(ne,ne+_e)).attr("transform",d(ae,ue)).call(v,"move");var Me,Te,se,oe,he,Ee,ke=Q.frontplot.select(".scatterlayer").selectAll(".trace"),be=ke.selectAll(".point"),Ie=ke.selectAll(".textpoint");function Fe(ye,Ce){var Re=Y.gd._fullLayout,ze=Re[Y.id],He=Oe(Me+ye*J._invScaleX,Te+Ce*J._invScaleY),Ge=N(He-Ee);if(oe=se+Ge,Q.frontplot.attr("transform",d(Y.xOffset2,Y.yOffset2)+b([-Ge,pe,ge])),Y.vangles){he=Y.radialAxisAngle+Ge;var Je=d(ae,ue)+b(-Ge),ot=d(ae,ue)+b(-he);Q.bg.attr("transform",Je),Q["radial-grid"].attr("transform",Je),Q["radial-axis"].attr("transform",ot),Q["radial-line"].select("line").attr("transform",ot),Y.updateRadialAxisTitle(Re,ze,he)}else Y.clipPaths.forTraces.select("path").attr("transform",d(pe,ge)+b(Ge));be.each(function(){var it=M.select(this),Tt=t.getTranslate(it);it.attr("transform",d(Tt.x,Tt.y)+b([Ge]))}),Ie.each(function(){var it=M.select(this),Tt=it.select("text"),Mt=t.getTranslate(it);it.attr("transform",b([Ge,Tt.attr("x"),Tt.attr("y")])+d(Mt.x,Mt.y))}),re.rotation=T.modHalf(oe,360),Y.updateAngularAxis(Re,ze),Y._hasClipOnAxisFalse&&!T.isFullCircle(Y.sectorInRad)&&ke.call(t.hideOutsideRangePoints,Y);var Qe=!1;for(var vt in Y.traceHash)if(l.traceIs(vt,"gl")){var xt=Y.traceHash[vt],mt=T.filterVisible(xt);xt[0][0].trace._module.plot(W,Y,mt,ze),mt.length&&(Qe=!0)}Qe&&(m(W),_(W));var rt={};ce(rt),W.emit("plotly_relayouting",rt)}function ce(ye){ye[Y.id+".angularaxis.rotation"]=oe,Y.vangles&&(ye[Y.id+".radialaxis.angle"]=he)}function we(){Ie.select("text").attr("transform",null);var ye={};ce(ye),l.call("_guiRelayout",W,ye)}ve.prepFn=function(ye,Ce,Re){var ze=J[Y.id];se=ze.angularaxis.rotation;var He=me.getBoundingClientRect();Me=Ce-He.left,Te=Re-He.top,W._fullLayout._calcInverseTransform(W);var Ge=T.apply3DTransform(J._invTransform)(Me,Te);Me=Ge[0],Te=Ge[1],Ee=Oe(Me,Te),ve.moveFn=Fe,ve.doneFn=we,y(W)},Y.vangles&&!T.isFullCircle(Y.sectorInRad)&&(ve.prepFn=T.noop,v(M.select(me),null)),p.init(ve)},V.isPtInside=function(J){if(this.isSmith)return!0;var Y=this.sectorInRad,W=this.vangles,Q=this.angularAxis.c2g(J.theta),ne=this.radialAxis,re=ne.c2l(J.r),ae=ne._rl;return(W?w.isPtInsidePolygon:T.isPtInsideSector)(re,Q,ae,Y,W)},V.pathArc=function(J){var Y=this.sectorInRad,W=this.vangles;return(W?w.pathPolygon:T.pathArc)(J,Y[0],Y[1],W)},V.pathSector=function(J){var Y=this.sectorInRad,W=this.vangles;return(W?w.pathPolygon:T.pathSector)(J,Y[0],Y[1],W)},V.pathAnnulus=function(J,Y){var W=this.sectorInRad,Q=this.vangles;return(Q?w.pathPolygonAnnulus:T.pathAnnulus)(J,Y,W[0],W[1],Q)},V.pathSubplot=function(){var J=this.innerRadius,Y=this.radius;return J?this.pathAnnulus(J,Y):this.pathSector(Y)},V.fillViewInitialKey=function(J,Y){J in this.viewInitial||(this.viewInitial[J]=Y)}},12101:function(ee,D,e){var M=e(71828),k=e(21994),l=M.deg2rad,T=M.rad2deg;ee.exports=function(b,d,s){switch(k(b,s),b._id){case"x":case"radialaxis":(function(t,i){var r=i._subplot;t.setGeometry=function(){var n=t._rl[0],o=t._rl[1],a=r.innerRadius,u=(r.radius-a)/(o-n),p=a/u,c=n>o?function(x){return x<=0}:function(x){return x>=0};t.c2g=function(x){var g=t.c2l(x)-n;return(c(g)?g:0)+p},t.g2c=function(x){return t.l2c(x+n-p)},t.g2p=function(x){return x*u},t.c2p=function(x){return t.g2p(t.c2g(x))}}})(b,d);break;case"angularaxis":(function(t,i){var r=t.type;if(r==="linear"){var n=t.d2c,o=t.c2d;t.d2c=function(a,u){return function(p,c){return c==="degrees"?l(p):p}(n(a),u)},t.c2d=function(a,u){return o(function(p,c){return c==="degrees"?T(p):p}(a,u))}}t.makeCalcdata=function(a,u){var p,c,x=a[u],g=a._length,h=function(f){return t.d2c(f,a.thetaunit)};if(x){if(M.isTypedArray(x)&&r==="linear"){if(g===x.length)return x;if(x.subarray)return x.subarray(0,g)}for(p=new Array(g),c=0;c<g;c++)p[c]=h(x[c])}else{var y=u+"0",v="d"+u,m=y in a?h(a[y]):0,_=a[v]?h(a[v]):(t.period||2*Math.PI)/g;for(p=new Array(g),c=0;c<g;c++)p[c]=m+c*_}return p},t.setGeometry=function(){var a,u,p,c,x=i.sector,g=x.map(l),h={clockwise:-1,counterclockwise:1}[t.direction],y=l(t.rotation),v=function(S){return h*S+y},m=function(S){return(S-y)/h};switch(r){case"linear":u=a=M.identity,c=l,p=T,t.range=M.isFullCircle(g)?[x[0],x[0]+360]:g.map(m).map(T);break;case"category":var _=t._categories.length,f=t.period?Math.max(t.period,_):_;f===0&&(f=1),u=c=function(S){return 2*S*Math.PI/f},a=p=function(S){return S*f/Math.PI/2},t.range=[0,f]}t.c2g=function(S){return v(u(S))},t.g2c=function(S){return a(m(S))},t.t2g=function(S){return v(c(S))},t.g2t=function(S){return p(m(S))}}})(b,d)}}},39779:function(ee){ee.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(ee){function D(l){return l<0?-1:l>0?1:0}function e(l){var T=l[0],b=l[1];if(!isFinite(T)||!isFinite(b))return[1,0];var d=(T+1)*(T+1)+b*b;return[(T*T+b*b-1)/d,2*b/d]}function M(l,T){var b=T[0],d=T[1];return[b*l.radius+l.cx,-d*l.radius+l.cy]}function k(l,T){return T*l.radius}ee.exports={smith:e,reactanceArc:function(l,T,b,d){var s=M(l,e([b,T])),t=s[0],i=s[1],r=M(l,e([d,T])),n=r[0],o=r[1];if(T===0)return["M"+t+","+i,"L"+n+","+o].join(" ");var a=k(l,1/Math.abs(T));return["M"+t+","+i,"A"+a+","+a+" 0 0,"+(T<0?1:0)+" "+n+","+o].join(" ")},resistanceArc:function(l,T,b,d){var s=k(l,1/(T+1)),t=M(l,e([T,b])),i=t[0],r=t[1],n=M(l,e([T,d])),o=n[0],a=n[1];if(D(b)!==D(d)){var u=M(l,e([T,0]));return["M"+i+","+r,"A"+s+","+s+" 0 0,"+(0<b?0:1)+" "+u[0]+","+u[1],"A"+s+","+s+" 0 0,"+(d<0?0:1)+o+","+a].join(" ")}return["M"+i+","+r,"A"+s+","+s+" 0 0,"+(d<b?0:1)+" "+o+","+a].join(" ")},smithTransform:M}},7504:function(ee,D,e){var M=e(27659).AU,k=e(71828).counterRegex,l=e(77997),T=e(39779),b=T.attr,d=T.name,s=k(d),t={};t[b]={valType:"subplotid",dflt:d,editType:"calc"},ee.exports={attr:b,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(33419),supplyLayoutDefaults:e(9558),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,o=r._subplots[d],a=0;a<o.length;a++){var u=o[a],p=M(n,d,u),c=r[u]._subplot;c||(c=l(i,u,!0),r[u]._subplot=c),c.plot(p,r,i._promises)}},clean:function(i,r,n,o){for(var a=o._subplots[d]||[],u=0;u<a.length;u++){var p=a[u],c=o[p]._subplot;if(!r[p]&&c)for(var x in c.framework.remove(),c.clipPaths)c.clipPaths[x].remove()}},toSVG:e(93612).toSVG}},33419:function(ee,D,e){var M=e(22399),k=e(13838),l=e(27670).Y,T=e(71828).extendFlat,b=e(30962).overrideAll,d=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},d,s),i=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},d,s);ee.exports={domain:l({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},9558:function(ee,D,e){var M,k,l,T=e(71828),b=e(7901),d=e(44467),s=e(49119),t=e(27659).NG,i=e(89426),r=e(96115),n=e(92128),o=e(21994),a=e(33419),u=e(39779),p=u.axisNames,c=(M=function(g){return g.slice().reverse().map(function(h){return-h}).concat([0]).concat(g)},k=String,l={},function(g){var h=k?k(g):g;if(h in l)return l[h];var y=M(g);return l[h]=y,y});function x(g,h,y,v){var m=y("bgcolor");v.bgColor=b.combine(m,v.paper_bgcolor);var _,f=t(v.fullData,u.name,v.id),S=v.layoutOut;function w(V,q){return y(_+"."+V,q)}for(var E=0;E<p.length;E++){_=p[E],T.isPlainObject(g[_])||(g[_]={});var L=g[_],C=d.newContainer(h,_);C._id=C._name=_,C._attr=v.id+"."+_,C._traceIndices=f.map(function(V){return V._expandedIndex});var P=w("visible");if(C.type="linear",o(C,S),i(L,C,w,C.type),P){var z,G,O,H,N=_==="realaxis";N&&w("side"),N?w("tickvals"):w("tickvals",c(h.realaxis.tickvals||a.realaxis.tickvals.dflt));var B=v.font||{};P&&(G=(z=w("color"))===L.color?z:B.color,O=B.size,H=B.family),r(L,C,w,C.type,{noTicklabelstep:!0,noAng:!N,noExp:!0,font:{color:G,size:O,family:H}}),T.coerce2(g,h,a,_+".ticklen"),T.coerce2(g,h,a,_+".tickwidth"),T.coerce2(g,h,a,_+".tickcolor",h.color),w("ticks")||(delete h[_].ticklen,delete h[_].tickwidth,delete h[_].tickcolor),n(L,C,w,{dfltColor:z,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:a[_]}),w("layer")}w("hoverformat"),delete C.type,C._input=L}}ee.exports=function(g,h,y){s(g,h,y,{noUirevision:!0,type:u.name,attributes:a,handleDefaults:x,font:h.font,paper_bgcolor:h.paper_bgcolor,fullData:y,layoutOut:h})}},49119:function(ee,D,e){var M=e(71828),k=e(44467),l=e(27670).c;ee.exports=function(T,b,d,s){var t,i,r=s.type,n=s.attributes,o=s.handleDefaults,a=s.partition||"x",u=b._subplots[r],p=u.length,c=p&&u[0].replace(/\d+$/,"");function x(v,m){return M.coerce(t,i,n,v,m)}for(var g=0;g<p;g++){var h=u[g];t=T[h]?T[h]:T[h]={},i=k.newContainer(b,h,c),s.noUirevision||x("uirevision",b.uirevision);var y={};y[a]=[g/p,(g+1)/p],l(i,b,x,y),s.id=h,o(t,i,x,s)}}},5386:function(ee,D,e){var M=e(31562);function k(l){var T=l.description?" "+l.description:"",b=l.keys||[];if(b.length>0){for(var d=[],s=0;s<b.length;s++)d[s]="`"+b[s]+"`";T+="Finally, the template string has access to ",T=b.length===1?T+"variable "+d[0]:T+"variables "+d.slice(0,-1).join(", ")+" and "+d.slice(-1)+"."}return T}M.FORMAT_LINK,M.DATE_FORMAT_LINK,D.fF=function(l,T){l=l||{},k(T=T||{});var b={valType:"string",dflt:"",editType:l.editType||"none"};return l.arrayOk!==!1&&(b.arrayOk=!0),b},D.si=function(l,T){l=l||{},k(T=T||{});var b={valType:"string",dflt:"",editType:l.editType||"calc"};return l.arrayOk!==!1&&(b.arrayOk=!0),b},D.R=function(l,T){return T=T||{},(l=l||{}).newshape,k(T),{valType:"string",dflt:"",editType:l.editType||"arraydraw"}}},61639:function(ee,D,e){var M=e(64380),k=e(27659).AU,l=e(71828).counterRegex,T="ternary";D.name=T;var b=D.attr="subplot";D.idRoot=T,D.idRegex=D.attrRegex=l(T),(D.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},D.layoutAttributes=e(81367),D.supplyLayoutDefaults=e(25369),D.plot=function(d){for(var s=d._fullLayout,t=d.calcdata,i=s._subplots[T],r=0;r<i.length;r++){var n=i[r],o=k(t,T,n),a=s[n]._subplot;a||(a=new M({id:n,graphDiv:d,container:s._ternarylayer.node()},s),s[n]._subplot=a),a.plot(o,s,d._promises)}},D.clean=function(d,s,t,i){for(var r=i._subplots[T]||[],n=0;n<r.length;n++){var o=r[n],a=i[o]._subplot;!s[o]&&a&&(a.plotContainer.remove(),a.clipDef.remove(),a.clipDefRelative.remove(),a.layers["a-title"].remove(),a.layers["b-title"].remove(),a.layers["c-title"].remove())}}},81367:function(ee,D,e){var M=e(22399),k=e(27670).Y,l=e(13838),T=e(30962).overrideAll,b=e(1426).extendFlat,d={title:{text:l.title.text,font:l.title.font},color:l.color,tickmode:l.minor.tickmode,nticks:b({},l.nticks,{dflt:6,min:1}),tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,labelalias:l.labelalias,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:b({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:b({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash,layer:l.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},s=ee.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:d,baxis:d,caxis:d},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},25369:function(ee,D,e){var M=e(7901),k=e(44467),l=e(71828),T=e(49119),b=e(96115),d=e(89426),s=e(38701),t=e(26218),i=e(92128),r=e(81367),n=["aaxis","baxis","caxis"];function o(u,p,c,x){var g,h,y,v=c("bgcolor"),m=c("sum");x.bgColor=M.combine(v,x.paper_bgcolor);for(var _=0;_<n.length;_++)h=u[g=n[_]]||{},(y=k.newContainer(p,g))._name=g,a(h,y,x,p);var f=p.aaxis,S=p.baxis,w=p.caxis;f.min+S.min+w.min>=m&&(f.min=0,S.min=0,w.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function a(u,p,c,x){var g=r[p._name];function h(S,w){return l.coerce(u,p,g,S,w)}h("uirevision",x.uirevision),p.type="linear";var y=h("color"),v=y!==g.color.dflt?y:c.font.color,m=p._name.charAt(0).toUpperCase(),_="Component "+m,f=h("title.text",_);p._hovertitle=f===_?f:m,l.coerceFont(h,"title.font",{family:c.font.family,size:l.bigFont(c.font.size),color:v}),h("min"),t(u,p,h,"linear"),d(u,p,h,"linear"),b(u,p,h,"linear"),s(u,p,h,{outerTicks:!0}),h("showticklabels")&&(l.coerceFont(h,"tickfont",{family:c.font.family,size:c.font.size,color:v}),h("tickangle"),h("tickformat")),i(u,p,h,{dfltColor:y,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g}),h("hoverformat"),h("layer")}ee.exports=function(u,p,c){T(u,p,c,{type:"ternary",attributes:r,handleDefaults:o,font:p.font,paper_bgcolor:p.paper_bgcolor})}},64380:function(ee,D,e){var M=e(39898),k=e(84267),l=e(73972),T=e(71828),b=T.strTranslate,d=T._,s=e(7901),t=e(91424),i=e(21994),r=e(1426).extendFlat,n=e(74875),o=e(89298),a=e(28569),u=e(30211),p=e(64505),c=p.freeMode,x=p.rectMode,g=e(92998),h=e(47322).prepSelect,y=e(47322).selectOnClick,v=e(47322).clearOutline,m=e(47322).clearSelectionsCache,_=e(85555);function f(O,H){this.id=O.id,this.graphDiv=O.graphDiv,this.init(H),this.makeFramework(H),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ee.exports=f;var S=f.prototype;S.init=function(O){this.container=O._ternarylayer,this.defs=O._defs,this.layoutId=O._uid,this.traceHash={},this.layers={}},S.plot=function(O,H){var N=this,B=H[N.id],V=H._size;N._hasClipOnAxisFalse=!1;for(var q=0;q<O.length;q++)if(O[q][0].trace.cliponaxis===!1){N._hasClipOnAxisFalse=!0;break}N.updateLayers(B),N.adjustLayout(B,V),n.generalUpdatePerTraceModule(N.graphDiv,N,O,B),N.layers.plotbg.select("path").call(s.fill,B.bgcolor)},S.makeFramework=function(O){var H=this,N=H.graphDiv,B=O[H.id],V=H.clipId="clip"+H.layoutId+H.id,q=H.clipIdRelative="clip-relative"+H.layoutId+H.id;H.clipDef=T.ensureSingleById(O._clips,"clipPath",V,function(te){te.append("path").attr("d","M0,0Z")}),H.clipDefRelative=T.ensureSingleById(O._clips,"clipPath",q,function(te){te.append("path").attr("d","M0,0Z")}),H.plotContainer=T.ensureSingle(H.container,"g",H.id),H.updateLayers(B),t.setClipUrl(H.layers.backplot,V,N),t.setClipUrl(H.layers.grids,V,N)},S.updateLayers=function(O){var H=this.layers,N=["draglayer","plotbg","backplot","grids"];O.aaxis.layer==="below traces"&&N.push("aaxis","aline"),O.baxis.layer==="below traces"&&N.push("baxis","bline"),O.caxis.layer==="below traces"&&N.push("caxis","cline"),N.push("frontplot"),O.aaxis.layer==="above traces"&&N.push("aaxis","aline"),O.baxis.layer==="above traces"&&N.push("baxis","bline"),O.caxis.layer==="above traces"&&N.push("caxis","cline");var B=this.plotContainer.selectAll("g.toplevel").data(N,String),V=["agrid","bgrid","cgrid"];B.enter().append("g").attr("class",function(q){return"toplevel "+q}).each(function(q){var te=M.select(this);H[q]=te,q==="frontplot"?te.append("g").classed("scatterlayer",!0):q==="backplot"?te.append("g").classed("maplayer",!0):q==="plotbg"?te.append("path").attr("d","M0,0Z"):q==="aline"||q==="bline"||q==="cline"?te.append("path"):q==="grids"&&V.forEach(function(K){H[K]=te.append("g").classed("grid "+K,!0)})}),B.order()};var w=Math.sqrt(4/3);S.adjustLayout=function(O,H){var N,B,V,q,te,K,J=this,Y=O.domain,W=(Y.x[0]+Y.x[1])/2,Q=(Y.y[0]+Y.y[1])/2,ne=Y.x[1]-Y.x[0],re=Y.y[1]-Y.y[0],ae=ne*H.w,ue=re*H.h,pe=O.sum,ge=O.aaxis.min,_e=O.baxis.min,me=O.caxis.min;ae>w*ue?V=(q=ue)*w:q=(V=ae)/w,te=ne*V/ae,K=re*q/ue,N=H.l+H.w*W-V/2,B=H.t+H.h*(1-Q)-q/2,J.x0=N,J.y0=B,J.w=V,J.h=q,J.sum=pe,J.xaxis={type:"linear",range:[ge+2*me-pe,pe-ge-2*_e],domain:[W-te/2,W+te/2],_id:"x"},i(J.xaxis,J.graphDiv._fullLayout),J.xaxis.setScale(),J.xaxis.isPtWithinRange=function(Ie){return Ie.a>=J.aaxis.range[0]&&Ie.a<=J.aaxis.range[1]&&Ie.b>=J.baxis.range[1]&&Ie.b<=J.baxis.range[0]&&Ie.c>=J.caxis.range[1]&&Ie.c<=J.caxis.range[0]},J.yaxis={type:"linear",range:[ge,pe-_e-me],domain:[Q-K/2,Q+K/2],_id:"y"},i(J.yaxis,J.graphDiv._fullLayout),J.yaxis.setScale(),J.yaxis.isPtWithinRange=function(){return!0};var ve=J.yaxis.domain[0],Oe=J.aaxis=r({},O.aaxis,{range:[ge,pe-_e-me],side:"left",tickangle:(+O.aaxis.tickangle||0)-30,domain:[ve,ve+K*w],anchor:"free",position:0,_id:"y",_length:V});i(Oe,J.graphDiv._fullLayout),Oe.setScale();var Me=J.baxis=r({},O.baxis,{range:[pe-ge-me,_e],side:"bottom",domain:J.xaxis.domain,anchor:"free",position:0,_id:"x",_length:V});i(Me,J.graphDiv._fullLayout),Me.setScale();var Te=J.caxis=r({},O.caxis,{range:[pe-ge-_e,me],side:"right",tickangle:(+O.caxis.tickangle||0)+30,domain:[ve,ve+K*w],anchor:"free",position:0,_id:"y",_length:V});i(Te,J.graphDiv._fullLayout),Te.setScale();var se="M"+N+","+(B+q)+"h"+V+"l-"+V/2+",-"+q+"Z";J.clipDef.select("path").attr("d",se),J.layers.plotbg.select("path").attr("d",se);var oe="M0,"+q+"h"+V+"l-"+V/2+",-"+q+"Z";J.clipDefRelative.select("path").attr("d",oe);var he=b(N,B);J.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",he),J.clipDefRelative.select("path").attr("transform",null);var Ee=b(N-Me._offset,B+q);J.layers.baxis.attr("transform",Ee),J.layers.bgrid.attr("transform",Ee);var ke=b(N+V/2,B)+"rotate(30)"+b(0,-Oe._offset);J.layers.aaxis.attr("transform",ke),J.layers.agrid.attr("transform",ke);var be=b(N+V/2,B)+"rotate(-30)"+b(0,-Te._offset);J.layers.caxis.attr("transform",be),J.layers.cgrid.attr("transform",be),J.drawAxes(!0),J.layers.aline.select("path").attr("d",Oe.showline?"M"+N+","+(B+q)+"l"+V/2+",-"+q:"M0,0").call(s.stroke,Oe.linecolor||"#000").style("stroke-width",(Oe.linewidth||0)+"px"),J.layers.bline.select("path").attr("d",Me.showline?"M"+N+","+(B+q)+"h"+V:"M0,0").call(s.stroke,Me.linecolor||"#000").style("stroke-width",(Me.linewidth||0)+"px"),J.layers.cline.select("path").attr("d",Te.showline?"M"+(N+V/2)+","+B+"l"+V/2+","+q:"M0,0").call(s.stroke,Te.linecolor||"#000").style("stroke-width",(Te.linewidth||0)+"px"),J.graphDiv._context.staticPlot||J.initInteractions(),t.setClipUrl(J.layers.frontplot,J._hasClipOnAxisFalse?null:J.clipId,J.graphDiv)},S.drawAxes=function(O){var H=this,N=H.graphDiv,B=H.id.substr(7)+"title",V=H.layers,q=H.aaxis,te=H.baxis,K=H.caxis;if(H.drawAx(q),H.drawAx(te),H.drawAx(K),O){var J=Math.max(q.showticklabels?q.tickfont.size/2:0,(K.showticklabels?.75*K.tickfont.size:0)+(K.ticks==="outside"?.87*K.ticklen:0)),Y=(te.showticklabels?te.tickfont.size:0)+(te.ticks==="outside"?te.ticklen:0)+3;V["a-title"]=g.draw(N,"a"+B,{propContainer:q,propName:H.id+".aaxis.title",placeholder:d(N,"Click to enter Component A title"),attributes:{x:H.x0+H.w/2,y:H.y0-q.title.font.size/3-J,"text-anchor":"middle"}}),V["b-title"]=g.draw(N,"b"+B,{propContainer:te,propName:H.id+".baxis.title",placeholder:d(N,"Click to enter Component B title"),attributes:{x:H.x0-Y,y:H.y0+H.h+.83*te.title.font.size+Y,"text-anchor":"middle"}}),V["c-title"]=g.draw(N,"c"+B,{propContainer:K,propName:H.id+".caxis.title",placeholder:d(N,"Click to enter Component C title"),attributes:{x:H.x0+H.w+Y,y:H.y0+H.h+.83*K.title.font.size+Y,"text-anchor":"middle"}})}},S.drawAx=function(O){var H,N=this,B=N.graphDiv,V=O._name,q=V.charAt(0),te=O._id,K=N.layers[V],J=q+"tickLayout",Y=(H=O).ticks+String(H.ticklen)+String(H.showticklabels);N[J]!==Y&&(K.selectAll("."+te+"tick").remove(),N[J]=Y),O.setScale();var W=o.calcTicks(O),Q=o.clipEnds(O,W),ne=o.makeTransTickFn(O),re=o.getTickSigns(O)[2],ae=T.deg2rad(30),ue=re*(O.linewidth||1)/2,pe=re*O.ticklen,ge=N.w,_e=N.h,me=q==="b"?"M0,"+ue+"l"+Math.sin(ae)*pe+","+Math.cos(ae)*pe:"M"+ue+",0l"+Math.cos(ae)*pe+","+-Math.sin(ae)*pe,ve={a:"M0,0l"+_e+",-"+ge/2,b:"M0,0l-"+ge/2+",-"+_e,c:"M0,0l-"+_e+","+ge/2}[q];o.drawTicks(B,O,{vals:O.ticks==="inside"?Q:W,layer:K,path:me,transFn:ne,crisp:!1}),o.drawGrid(B,O,{vals:Q,layer:N.layers[q+"grid"],path:ve,transFn:ne,crisp:!1}),o.drawLabels(B,O,{vals:W,layer:K,transFn:ne,labelFns:o.makeLabelFns(O,0,30)})};var E=_.MINZOOM/2+.87,L="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",z=!0;function G(O){M.select(O).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){m(this.dragOptions),v(this.dragOptions.gd)},S.initInteractions=function(){var O,H,N,B,V,q,te,K,J,Y,W,Q,ne=this,re=ne.layers.plotbg.select("path").node(),ae=ne.graphDiv,ue=ae._fullLayout._zoomlayer;function pe(oe){var he={};return he[ne.id+".aaxis.min"]=oe.a,he[ne.id+".baxis.min"]=oe.b,he[ne.id+".caxis.min"]=oe.c,he}function ge(oe,he){var Ee=ae._fullLayout.clickmode;G(ae),oe===2&&(ae.emit("plotly_doubleclick",null),l.call("_guiRelayout",ae,pe({a:0,b:0,c:0}))),Ee.indexOf("select")>-1&&oe===1&&y(he,ae,[ne.xaxis],[ne.yaxis],ne.id,ne.dragOptions),Ee.indexOf("event")>-1&&u.click(ae,he,ne.id)}function _e(oe,he){return 1-he/ne.h}function me(oe,he){return 1-(oe+(ne.h-he)/Math.sqrt(3))/ne.w}function ve(oe,he){return(oe-(ne.h-he)/Math.sqrt(3))/ne.w}function Oe(oe,he){var Ee=N+oe*O,ke=B+he*H,be=Math.max(0,Math.min(1,_e(0,B),_e(0,ke))),Ie=Math.max(0,Math.min(1,me(N,B),me(Ee,ke))),Fe=Math.max(0,Math.min(1,ve(N,B),ve(Ee,ke))),ce=(be/2+Fe)*ne.w,we=(1-be/2-Ie)*ne.w,ye=(ce+we)/2,Ce=we-ce,Re=(1-be)*ne.h,ze=Re-Ce/w;Ce<_.MINZOOM?(te=V,W.attr("d",J),Q.attr("d","M0,0Z")):(te={a:V.a+be*q,b:V.b+Ie*q,c:V.c+Fe*q},W.attr("d",J+"M"+ce+","+Re+"H"+we+"L"+ye+","+ze+"L"+ce+","+Re+"Z"),Q.attr("d","M"+N+","+B+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+ce+","+Re+L+"M"+we+","+Re+C+"M"+ye+","+ze+P)),Y||(W.transition().style("fill",K>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Q.transition().style("opacity",1).duration(200),Y=!0),ae.emit("plotly_relayouting",pe(te))}function Me(){G(ae),te!==V&&(l.call("_guiRelayout",ae,pe(te)),z&&ae.data&&ae._context.showTips&&(T.notifier(d(ae,"Double-click to zoom back out"),"long"),z=!1))}function Te(oe,he){var Ee=oe/ne.xaxis._m,ke=he/ne.yaxis._m,be=[(te={a:V.a-ke,b:V.b+(Ee+ke)/2,c:V.c-(Ee-ke)/2}).a,te.b,te.c].sort(T.sorterAsc),Ie=be.indexOf(te.a),Fe=be.indexOf(te.b),ce=be.indexOf(te.c);be[0]<0&&(be[1]+be[0]/2<0?(be[2]+=be[0]+be[1],be[0]=be[1]=0):(be[2]+=be[0]/2,be[1]+=be[0]/2,be[0]=0),te={a:be[Ie],b:be[Fe],c:be[ce]},he=(V.a-te.a)*ne.yaxis._m,oe=(V.c-te.c-V.b+te.b)*ne.xaxis._m);var we=b(ne.x0+oe,ne.y0+he);ne.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",we);var ye=b(-oe,-he);ne.clipDefRelative.select("path").attr("transform",ye),ne.aaxis.range=[te.a,ne.sum-te.b-te.c],ne.baxis.range=[ne.sum-te.a-te.c,te.b],ne.caxis.range=[ne.sum-te.a-te.b,te.c],ne.drawAxes(!1),ne._hasClipOnAxisFalse&&ne.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ne),ae.emit("plotly_relayouting",pe(te))}function se(){l.call("_guiRelayout",ae,pe(te))}this.dragOptions={element:re,gd:ae,plotinfo:{id:ne.id,domain:ae._fullLayout[ne.id].domain,xaxis:ne.xaxis,yaxis:ne.yaxis},subplot:ne.id,prepFn:function(oe,he,Ee){ne.dragOptions.xaxes=[ne.xaxis],ne.dragOptions.yaxes=[ne.yaxis],O=ae._fullLayout._invScaleX,H=ae._fullLayout._invScaleY;var ke=ne.dragOptions.dragmode=ae._fullLayout.dragmode;c(ke)?ne.dragOptions.minDrag=1:ne.dragOptions.minDrag=void 0,ke==="zoom"?(ne.dragOptions.moveFn=Oe,ne.dragOptions.clickFn=ge,ne.dragOptions.doneFn=Me,function(be,Ie,Fe){var ce=re.getBoundingClientRect();N=Ie-ce.left,B=Fe-ce.top,ae._fullLayout._calcInverseTransform(ae);var we=ae._fullLayout._invTransform,ye=T.apply3DTransform(we)(N,B);N=ye[0],B=ye[1],V={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},te=V,q=ne.aaxis.range[1]-V.a,K=k(ne.graphDiv._fullLayout[ne.id].bgcolor).getLuminance(),J="M0,"+ne.h+"L"+ne.w/2+", 0L"+ne.w+","+ne.h+"Z",Y=!1,W=ue.append("path").attr("class","zoombox").attr("transform",b(ne.x0,ne.y0)).style({fill:K>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",J),Q=ue.append("path").attr("class","zoombox-corners").attr("transform",b(ne.x0,ne.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ne.clearOutline(ae)}(0,he,Ee)):ke==="pan"?(ne.dragOptions.moveFn=Te,ne.dragOptions.clickFn=ge,ne.dragOptions.doneFn=se,V={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},te=V,ne.clearOutline(ae)):(x(ke)||c(ke))&&h(oe,he,Ee,ne.dragOptions,ke)}},re.onmousemove=function(oe){u.hover(ae,oe,ne.id),ae._fullLayout._lasthover=re,ae._fullLayout._hoversubplot=ne.id},re.onmouseout=function(oe){ae._dragging||a.unhover(ae,oe)},a.init(this.dragOptions)}},73972:function(ee,D,e){var M=e(47769),k=e(64213),l=e(75138),T=e(41965),b=e(24401).addStyleRule,d=e(1426),s=e(9012),t=e(10820),i=d.extendFlat,r=d.extendDeepAll;function n(y){var v=y.name,m=y.categories,_=y.meta;if(D.modules[v])M.log("Type "+v+" already registered");else{D.subplotsRegistry[y.basePlotModule.name]||function(z){var G=z.name;if(D.subplotsRegistry[G])M.log("Plot type "+G+" already registered.");else for(var O in p(z),D.subplotsRegistry[G]=z,D.componentsRegistry)g(O,z.name)}(y.basePlotModule);for(var f={},S=0;S<m.length;S++)f[m[S]]=!0,D.allCategories[m[S]]=!0;for(var w in D.modules[v]={_module:y,categories:f},_&&Object.keys(_).length&&(D.modules[v].meta=_),D.allTypes.push(v),D.componentsRegistry)c(w,v);y.layoutAttributes&&i(D.traceLayoutAttributes,y.layoutAttributes);var E=y.basePlotModule,L=E.name;if(L==="mapbox"){var C=E.constants.styleRules;for(var P in C)b(".js-plotly-plot .plotly .mapboxgl-"+P,C[P])}L!=="geo"&&L!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function o(y){if(typeof y.name!="string")throw new Error("Component module *name* must be a string.");var v=y.name;for(var m in D.componentsRegistry[v]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&l(D.layoutArrayContainers,v),p(y)),D.modules)c(v,m);for(var _ in D.subplotsRegistry)g(v,_);for(var f in D.transformsRegistry)x(v,f);y.schema&&y.schema.layout&&r(t,y.schema.layout)}function a(y){if(typeof y.name!="string")throw new Error("Transform module *name* must be a string.");var v="Transform module "+y.name,m=typeof y.transform=="function",_=typeof y.calcTransform=="function";if(!m&&!_)throw new Error(v+" is missing a *transform* or *calcTransform* method.");for(var f in m&&_&&M.log([v+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(y.attributes)||M.log(v+" registered without an *attributes* object."),typeof y.supplyDefaults!="function"&&M.log(v+" registered without a *supplyDefaults* method."),D.transformsRegistry[y.name]=y,D.componentsRegistry)x(f,y.name)}function u(y){var v=y.name,m=v.split("-")[0],_=y.dictionary,f=y.format,S=_&&Object.keys(_).length,w=f&&Object.keys(f).length,E=D.localeRegistry,L=E[v];if(L||(E[v]=L={}),m!==v){var C=E[m];C||(E[m]=C={}),S&&C.dictionary===L.dictionary&&(C.dictionary=_),w&&C.format===L.format&&(C.format=f)}S&&(L.dictionary=_),w&&(L.format=f)}function p(y){if(y.layoutAttributes){var v=y.layoutAttributes._arrayAttrRegexps;if(v)for(var m=0;m<v.length;m++)l(D.layoutArrayRegexes,v[m])}}function c(y,v){var m=D.componentsRegistry[y].schema;if(m&&m.traces){var _=m.traces[v];_&&r(D.modules[v]._module.attributes,_)}}function x(y,v){var m=D.componentsRegistry[y].schema;if(m&&m.transforms){var _=m.transforms[v];_&&r(D.transformsRegistry[v].attributes,_)}}function g(y,v){var m=D.componentsRegistry[y].schema;if(m&&m.subplots){var _=D.subplotsRegistry[v],f=_.layoutAttributes,S=_.attr==="subplot"?_.name:_.attr;Array.isArray(S)&&(S=S[0]);var w=m.subplots[S];f&&w&&r(f,w)}}function h(y){return typeof y=="object"&&(y=y.type),y}D.modules={},D.allCategories={},D.allTypes=[],D.subplotsRegistry={},D.transformsRegistry={},D.componentsRegistry={},D.layoutArrayContainers=[],D.layoutArrayRegexes=[],D.traceLayoutAttributes={},D.localeRegistry={},D.apiMethodRegistry={},D.collectableSubplotTypes=null,D.register=function(y){if(D.collectableSubplotTypes=null,!y)throw new Error("No argument passed to Plotly.register.");y&&!Array.isArray(y)&&(y=[y]);for(var v=0;v<y.length;v++){var m=y[v];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":n(m);break;case"transform":a(m);break;case"component":o(m);break;case"locale":u(m);break;case"apiMethod":var _=m.name;D.apiMethodRegistry[_]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},D.getModule=function(y){var v=D.modules[h(y)];return!!v&&v._module},D.traceIs=function(y,v){if((y=h(y))==="various")return!1;var m=D.modules[y];return m||(y&&M.log("Unrecognized trace type "+y+"."),m=D.modules[s.type.dflt]),!!m.categories[v]},D.getTransformIndices=function(y,v){for(var m=[],_=y.transforms||[],f=0;f<_.length;f++)_[f].type===v&&m.push(f);return m},D.hasTransform=function(y,v){for(var m=y.transforms||[],_=0;_<m.length;_++)if(m[_].type===v)return!0;return!1},D.getComponentMethod=function(y,v){var m=D.componentsRegistry[y];return m&&m[v]||k},D.call=function(){var y=arguments[0],v=[].slice.call(arguments,1);return D.apiMethodRegistry[y].apply(null,v)}},61914:function(ee,D,e){var M=e(73972),k=e(71828),l=k.extendFlat,T=k.extendDeep;function b(d){var s;switch(d){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}ee.exports=function(d,s){var t,i,r=d.data,n=d.layout,o=T([],r),a=T({},n,b(s.tileClass)),u=d._context||{};if(s.width&&(a.width=s.width),s.height&&(a.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){a.annotations=[];var p=Object.keys(a);for(t=0;t<p.length;t++)i=p[t],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(a[p[t]].title={text:""});for(t=0;t<o.length;t++){var c=o[t];c.showscale=!1,c.marker&&(c.marker.showscale=!1),M.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)a.annotations.push(s.annotations[t]);var x=Object.keys(a).filter(function(m){return m.match(/^scene\d*$/)});if(x.length){var g={};for(s.tileClass==="thumbnail"&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<x.length;t++){var h=a[x[t]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),l(h.xaxis,g),l(h.yaxis,g),l(h.zaxis,g),h._scene=null}}var y=document.createElement("div");s.tileClass&&(y.className=s.tileClass);var v={gd:y,td:y,layout:a,data:o,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return s.setBackground!=="transparent"&&(v.config.setBackground=s.setBackground||"opaque"),v.gd.defaultLayout=b(s.tileClass),v}},7239:function(ee,D,e){var M=e(71828),k=e(403),l=e(22435),T=e(25095);ee.exports=function(b,d){var s;return M.isPlainObject(b)||(s=M.getGraphDiv(b)),(d=d||{}).format=d.format||"png",d.width=d.width||null,d.height=d.height||null,d.imageDataOnly=!0,new Promise(function(t,i){s&&s._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),M.isIE()&&d.format!=="svg"&&i(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=k(b,d),n=d.filename||b.fn||"newplot";n+="."+d.format.replace("-","."),r.then(function(o){return s&&(s._snapshotInProgress=!1),l(o,n,d.format)}).then(function(o){t(o)}).catch(function(o){s&&(s._snapshotInProgress=!1),i(o)})})}},22435:function(ee,D,e){var M=e(71828),k=e(25095);ee.exports=function(l,T,b){var d=document.createElement("a"),s="download"in d;return new Promise(function(t,i){var r,n;if(M.isIE())return r=k.createBlob(l,"svg"),window.navigator.msSaveBlob(r,T),r=null,t(T);if(s)return r=k.createBlob(l,b),n=k.createObjectURL(r),d.href=n,d.download=T,document.body.appendChild(d),d.click(),document.body.removeChild(d),k.revokeObjectURL(n),r=null,t(T);if(M.isSafari()){var o=b==="svg"?",":";base64,";return k.octetStream(o+encodeURIComponent(l)),t(T)}i(new Error("download error"))})}},25095:function(ee,D,e){var M=e(73972);D.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},D.getRedrawFunc=function(l){return function(){M.getComponentMethod("colorbar","draw")(l)}},D.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},D.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var k=window.URL||window.webkitURL;D.createObjectURL=function(l){return k.createObjectURL(l)},D.revokeObjectURL=function(l){return k.revokeObjectURL(l)},D.createBlob=function(l,T){if(T==="svg")return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([l],{type:"application/json;charset=utf-8"});var b=function(d){for(var s=d.length,t=new ArrayBuffer(s),i=new Uint8Array(t),r=0;r<s;r++)i[r]=d.charCodeAt(r);return t}(window.atob(l));return new window.Blob([b],{type:"image/"+T})},D.octetStream=function(l){document.location.href="data:application/octet-stream"+l},D.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,D.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(ee,D,e){var M=e(25095),k={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:e(61914),toSVG:e(5900),svgToImg:e(70942),toImage:e(56395),downloadImage:e(7239)};ee.exports=k},70942:function(ee,D,e){var M=e(71828),k=e(15398).EventEmitter,l=e(25095);ee.exports=function(T){var b=T.emitter||new k,d=new Promise(function(s,t){var i=window.Image,r=T.svg,n=T.format||"png";if(M.isIE()&&n!=="svg"){var o=new Error(l.MSG_IE_BAD_FORMAT);return t(o),T.promise?d:b.emit("error",o)}var a,u,p=T.canvas,c=T.scale||1,x=T.width||300,g=T.height||150,h=c*x,y=c*g,v=p.getContext("2d",{willReadFrequently:!0}),m=new i;n==="svg"||M.isSafari()?u=l.encodeSVG(r):(a=l.createBlob(r,"svg"),u=l.createObjectURL(a)),p.width=h,p.height=y,m.onload=function(){var _;switch(a=null,l.revokeObjectURL(u),n!=="svg"&&v.drawImage(m,0,0,h,y),n){case"jpeg":_=p.toDataURL("image/jpeg");break;case"png":_=p.toDataURL("image/png");break;case"webp":_=p.toDataURL("image/webp");break;case"svg":_=u;break;default:var f="Image format is not jpeg, png, svg or webp.";if(t(new Error(f)),!T.promise)return b.emit("error",f)}s(_),T.promise||b.emit("success",_)},m.onerror=function(_){if(a=null,l.revokeObjectURL(u),t(_),!T.promise)return b.emit("error",_)},m.src=u});return T.promise?d:b}},56395:function(ee,D,e){var M=e(15398).EventEmitter,k=e(73972),l=e(71828),T=e(25095),b=e(61914),d=e(5900),s=e(70942);ee.exports=function(t,i){var r=new M,n=b(t,{format:"png"}),o=n.gd;o.style.position="absolute",o.style.left="-5000px",document.body.appendChild(o);var a=T.getRedrawFunc(o);return k.call("_doPlot",o,n.data,n.layout,n.config).then(a).then(function(){var u=T.getDelay(o._fullLayout);setTimeout(function(){var p=d(o),c=document.createElement("canvas");c.id=l.randstr(),(r=s({format:i.format,width:o._fullLayout.width,height:o._fullLayout.height,canvas:c,emitter:r,svg:p})).clean=function(){o&&document.body.removeChild(o)}},u)}).catch(function(u){r.emit("error",u)}),r}},5900:function(ee,D,e){var M=e(39898),k=e(71828),l=e(91424),T=e(7901),b=e(77922),d=/"/g,s="TOBESTRIPPED",t=new RegExp('("'+s+")|("+s+'")',"g");ee.exports=function(i,r,n){var o,a=i._fullLayout,u=a._paper,p=a._toppaper,c=a.width,x=a.height;u.insert("rect",":first-child").call(l.setRect,0,0,c,x).call(T.fill,a.paper_bgcolor);var g=a._basePlotModules||[];for(o=0;o<g.length;o++){var h=g[o];h.toSVG&&h.toSVG(i)}if(p){var y=p.node().childNodes,v=Array.prototype.slice.call(y);for(o=0;o<v.length;o++){var m=v[o];m.childNodes.length&&u.node().appendChild(m)}}a._draggers&&a._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var f=M.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){f.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&f.style("font-family",S.replace(d,s))}else f.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var f=M.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&f.style("fill",S.replace(d,s));var w=this.style.stroke;w&&w.indexOf("url(")!==-1&&f.style("stroke",w.replace(d,s))}),r!=="pdf"&&r!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(b.xmlns,"xmlns",b.svg),u.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),r==="svg"&&n&&(u.attr("width",n*c),u.attr("height",n*x),u.attr("viewBox","0 0 "+c+" "+x));var _=new window.XMLSerializer().serializeToString(u.node());return _=(_=(_=function(f){var S=M.select("body").append("div").style({display:"none"}).html(""),w=f.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),w}(_)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},75341:function(ee,D,e){var M=e(71828);ee.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(l.text,k,"tx"),M.mergeArray(l.hovertext,k,"htx");var b=l.marker;if(b){M.mergeArray(b.opacity,k,"mo",!0),M.mergeArray(b.color,k,"mc");var d=b.line;d&&(M.mergeArray(d.color,k,"mlc"),M.mergeArrayCastPositive(d.width,k,"mlw"))}}},1486:function(ee,D,e){var M=e(82196),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(5386).si,b=e(50693),d=e(41940),s=e(97313),t=e(79952).u,i=e(1426).extendFlat,r=d({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=i({},M.marker.line.width,{dflt:0}),o=i({width:n,editType:"calc"},b("marker.line")),a=i({line:o,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t});ee.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:M.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:M.hovertext,hovertemplate:l({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},r,{}),insidetextfont:i({},r,{}),outsidetextfont:i({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:a,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(ee,D,e){var M=e(89298),k=e(42973),l=e(52075).hasColorscale,T=e(78803),b=e(75341),d=e(66279);ee.exports=function(s,t){var i,r,n,o,a,u,p=M.getFromId(s,t.xaxis||"x"),c=M.getFromId(s,t.yaxis||"y"),x={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(i=p.makeCalcdata(t,"x",x),n=c.makeCalcdata(t,"y"),o=k(t,c,"y",n),a=!!t.yperiodalignment,u="y"):(i=c.makeCalcdata(t,"y",x),n=p.makeCalcdata(t,"x"),o=k(t,p,"x",n),a=!!t.xperiodalignment,u="x"),r=o.vals;for(var g=Math.min(r.length,i.length),h=new Array(g),y=0;y<g;y++)h[y]={p:r[y],s:i[y]},a&&(h[y].orig_p=n[y],h[y][u+"End"]=o.ends[y],h[y][u+"Start"]=o.starts[y]),t.ids&&(h[y].id=String(t.ids[y]));return l(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),l(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(h,t),d(h,t),h}},97313:function(ee){ee.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(ee,D,e){var M=e(92770),k=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(73972),b=e(89298),d=e(99082).getAxisGroup,s=e(61546);function t(g,h,y,v,m){if(v.length){var _,f,S,w;switch(function(E,L){var C,P;for(C=0;C<L.length;C++){var z,G=L[C],O=G[0].trace,H=O.type==="funnel"?O._base:O.base,N=O.orientation==="h"?O.xcalendar:O.ycalendar,B=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(H)){for(P=0;P<Math.min(H.length,G.length);P++)z=B(H[P],0,N),M(z)?(G[P].b=+z,G[P].hasB=1):G[P].b=0;for(;P<G.length;P++)G[P].b=0}else{z=B(H,0,N);var V=M(z);for(z=V?z:0,P=0;P<G.length;P++)G[P].b=z,V&&(G[P].hasB=1)}}}(y,v),m.mode){case"overlay":i(h,y,v,m);break;case"group":for(_=[],f=[],S=0;S<v.length;S++)(w=v[S])[0].trace.offset===void 0?f.push(w):_.push(w);f.length&&function(E,L,C,P,z){var G=new s(P,{posAxis:L,sepNegVal:!1,overlapNoMerge:!z.norm});(function(O,H,N,B){for(var V=O._fullLayout,q=N.positions,te=N.distinctPositions,K=N.minDiff,J=N.traces,Y=J.length,W=q.length!==te.length,Q=K*(1-B.gap),ne=d(V,H._id)+J[0][0].trace.orientation,re=V._alignmentOpts[ne]||{},ae=0;ae<Y;ae++){var ue,pe,ge=J[ae],_e=ge[0].trace,me=re[_e.alignmentgroup]||{},ve=Object.keys(me.offsetGroups||{}).length,Oe=(ue=ve?Q/ve:W?Q/Y:Q)*(1-(B.groupgap||0));pe=ve?((2*_e._offsetIndex+1-ve)*ue-Oe)/2:W?((2*ae+1-Y)*ue-Oe)/2:-Oe/2;var Me=ge[0].t;Me.barwidth=Oe,Me.poffset=pe,Me.bargroupwidth=Q,Me.bardelta=K}N.binWidth=J[0][0].t.barwidth/100,n(N),o(H,N),a(H,N,W)})(E,L,G,z),function(O,H){for(var N=O.traces,B=0;B<N.length;B++){var V=N[B];if(V[0].trace.base===void 0)for(var q=new s([V],{posAxis:H,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<V.length;te++){var K=V[te];if(K.p!==l){var J=q.put(K.p,K.b+K.s);J&&(K.b=J)}}}}(G,L),z.norm?(p(G),c(C,G,z)):u(C,G)}(g,h,y,f,m),_.length&&i(h,y,_,m);break;case"stack":case"relative":for(_=[],f=[],S=0;S<v.length;S++)(w=v[S])[0].trace.base===void 0?f.push(w):_.push(w);f.length&&function(E,L,C,P,z){var G=new s(P,{posAxis:L,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});r(L,G,z),function(V,q,te){var K,J,Y,W,Q,ne,re=x(V),ae=q.traces;for(W=0;W<ae.length;W++)if((J=(K=ae[W])[0].trace).type==="funnel")for(Q=0;Q<K.length;Q++)(ne=K[Q]).s!==l&&q.put(ne.p,-.5*ne.s);for(W=0;W<ae.length;W++){Y=(J=(K=ae[W])[0].trace).type==="funnel";var ue=[];for(Q=0;Q<K.length;Q++)if((ne=K[Q]).s!==l){var pe;pe=Y?ne.s:ne.s+ne.b;var ge=q.put(ne.p,pe),_e=ge+pe;ne.b=ge,ne[re]=_e,te.norm||(ue.push(_e),ne.hasB&&ue.push(ge))}te.norm||(J._extremes[V._id]=b.findExtremes(V,ue,{tozero:!0,padded:!0}))}}(C,G,z);for(var O=0;O<P.length;O++)for(var H=P[O],N=0;N<H.length;N++){var B=H[N];B.s!==l&&B.b+B.s===G.get(B.p,B.s)&&(B._outmost=!0)}z.norm&&c(C,G,z)}(0,h,y,f,m),_.length&&i(h,y,_,m)}(function(E,L){var C,P,z,G=x(L),O={},H=1/0,N=-1/0;for(C=0;C<E.length;C++)for(z=E[C],P=0;P<z.length;P++){var B=z[P].p;M(B)&&(H=Math.min(H,B),N=Math.max(N,B))}var V=1e4/(N-H),q=O.round=function(ne){return String(Math.round(V*(ne-H)))};for(C=0;C<E.length;C++){(z=E[C])[0].t.extents=O;var te=z[0].t.poffset,K=Array.isArray(te);for(P=0;P<z.length;P++){var J=z[P],Y=J[G]-J.w/2;if(M(Y)){var W=J[G]+J.w/2,Q=q(J.p);O[Q]?O[Q]=[Math.min(Y,O[Q][0]),Math.max(W,O[Q][1])]:O[Q]=[Y,W]}J.p0=J.p+(K?te[P]:te),J.p1=J.p0+J.w,J.s0=J.b,J.s1=J.s0+J.s}}})(v,h)}}function i(g,h,y,v){for(var m=0;m<y.length;m++){var _=y[m],f=new s([_],{posAxis:g,sepNegVal:!1,overlapNoMerge:!v.norm});r(g,f,v),v.norm?(p(f),c(h,f,v)):u(h,f)}}function r(g,h,y){for(var v=h.minDiff,m=h.traces,_=v*(1-y.gap),f=_*(1-(y.groupgap||0)),S=-f/2,w=0;w<m.length;w++){var E=m[w][0].t;E.barwidth=f,E.poffset=S,E.bargroupwidth=_,E.bardelta=v}h.binWidth=m[0][0].t.barwidth/100,n(h),o(g,h),a(g,h)}function n(g){var h,y,v=g.traces;for(h=0;h<v.length;h++){var m,_=v[h],f=_[0],S=f.trace,w=f.t,E=S._offset||S.offset,L=w.poffset;if(k(E)){for(m=Array.prototype.slice.call(E,0,_.length),y=0;y<m.length;y++)M(m[y])||(m[y]=L);for(y=m.length;y<_.length;y++)m.push(L);w.poffset=m}else E!==void 0&&(w.poffset=E);var C=S._width||S.width,P=w.barwidth;if(k(C)){var z=Array.prototype.slice.call(C,0,_.length);for(y=0;y<z.length;y++)M(z[y])||(z[y]=P);for(y=z.length;y<_.length;y++)z.push(P);if(w.barwidth=z,E===void 0){for(m=[],y=0;y<_.length;y++)m.push(L+(P-z[y])/2);w.poffset=m}}else C!==void 0&&(w.barwidth=C,E===void 0&&(w.poffset=L+(P-C)/2))}}function o(g,h){for(var y=h.traces,v=x(g),m=0;m<y.length;m++)for(var _=y[m],f=_[0].t,S=f.poffset,w=Array.isArray(S),E=f.barwidth,L=Array.isArray(E),C=0;C<_.length;C++){var P=_[C],z=P.w=L?E[C]:E;P.p===void 0&&(P.p=P[v],P["orig_"+v]=P[v]);var G=(w?S[C]:S)+z/2;P[v]=P.p+G}}function a(g,h,y){var v=h.traces,m=h.minDiff/2;b.minDtick(g,h.minDiff,h.distinctPositions[0],y);for(var _=0;_<v.length;_++){var f,S,w,E,L=v[_],C=L[0],P=C.trace,z=[];for(E=0;E<L.length;E++)S=(f=L[E]).p-m,w=f.p+m,z.push(S,w);if(P.width||P.offset){var G=C.t,O=G.poffset,H=G.barwidth,N=Array.isArray(O),B=Array.isArray(H);for(E=0;E<L.length;E++){f=L[E];var V=N?O[E]:O,q=B?H[E]:H;w=(S=f.p+V)+q,z.push(S,w)}}P._extremes[g._id]=b.findExtremes(g,z,{padded:!1})}}function u(g,h){for(var y=h.traces,v=x(g),m=0;m<y.length;m++){for(var _=y[m],f=_[0].trace,S=f.type==="scatter",w=f.orientation==="v",E=[],L=!1,C=0;C<_.length;C++){var P=_[C],z=S?0:P.b,G=S?w?P.y:P.x:z+P.s;P[v]=G,E.push(G),P.hasB&&E.push(z),P.hasB&&P.b||(L=!0)}f._extremes[g._id]=b.findExtremes(g,E,{tozero:L,padded:!0})}}function p(g){for(var h=g.traces,y=0;y<h.length;y++)for(var v=h[y],m=0;m<v.length;m++){var _=v[m];_.s!==l&&g.put(_.p,_.b+_.s)}}function c(g,h,y){var v=h.traces,m=x(g),_=y.norm==="fraction"?1:100,f=_/1e9,S=g.l2c(g.c2l(0)),w=y.mode==="stack"?_:S;function E(te){return M(g.c2l(te))&&(te<S-f||te>w+f||!M(S))}for(var L=0;L<v.length;L++){for(var C=v[L],P=C[0].trace,z=[],G=!1,O=!1,H=0;H<C.length;H++){var N=C[H];if(N.s!==l){var B=Math.abs(_/h.get(N.p,N.s));N.b*=B,N.s*=B;var V=N.b,q=V+N.s;N[m]=q,z.push(q),O=O||E(q),N.hasB&&(z.push(V),O=O||E(V)),N.hasB&&N.b||(G=!0)}}P._extremes[g._id]=b.findExtremes(g,z,{tozero:G,padded:O})}}function x(g){return g._id.charAt(0)}ee.exports={crossTraceCalc:function(g,h){for(var y=h.xaxis,v=h.yaxis,m=g._fullLayout,_=g._fullData,f=g.calcdata,S=[],w=[],E=0;E<_.length;E++){var L=_[E];if(L.visible===!0&&T.traceIs(L,"bar")&&L.xaxis===y._id&&L.yaxis===v._id&&(L.orientation==="h"?S.push(f[E]):w.push(f[E]),L._computePh))for(var C=g.calcdata[E],P=0;P<C.length;P++)typeof C[P].ph0=="function"&&(C[P].ph0=C[P].ph0()),typeof C[P].ph1=="function"&&(C[P].ph1=C[P].ph1())}var z={xCat:y.type==="category"||y.type==="multicategory",yCat:v.type==="category"||v.type==="multicategory",mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};t(g,y,v,w,z),t(g,v,y,S,z)},setGroupPositions:t}},90769:function(ee,D,e){var M=e(71828),k=e(7901),l=e(73972),T=e(67513),b=e(73927),d=e(98340),s=e(26125),t=e(1486),i=M.coerceFont;function r(n,o,a,u,p,c){var x=(c=c||{}).moduleHasSelected!==!1,g=c.moduleHasUnselected!==!1,h=c.moduleHasConstrain!==!1,y=c.moduleHasCliponaxis!==!1,v=c.moduleHasTextangle!==!1,m=c.moduleHasInsideanchor!==!1,_=!!c.hasPathbar,f=Array.isArray(p)||p==="auto",S=f||p==="inside",w=f||p==="outside";if(S||w){var E=i(u,"textfont",a.font),L=M.extendFlat({},E),C=!(n.textfont&&n.textfont.color);if(C&&delete L.color,i(u,"insidetextfont",L),_){var P=M.extendFlat({},E);C&&delete P.color,i(u,"pathbar.textfont",P)}w&&i(u,"outsidetextfont",E),x&&u("selected.textfont.color"),g&&u("unselected.textfont.color"),h&&u("constraintext"),y&&u("cliponaxis"),v&&u("textangle"),u("texttemplate")}S&&m&&u("insidetextanchor")}ee.exports={supplyDefaults:function(n,o,a,u){function p(h,y){return M.coerce(n,o,t,h,y)}if(T(n,o,u,p)){b(n,o,u,p),p("xhoverformat"),p("yhoverformat"),p("orientation",o.x&&!o.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var c=p("textposition");r(n,0,u,p,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d(n,o,p,a,u);var x=(o.marker.line||{}).color,g=l.getComponentMethod("errorbars","supplyDefaults");g(n,o,x||k.defaultLine,{axis:"y"}),g(n,o,x||k.defaultLine,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(o,p)}else o.visible=!1},crossTraceDefaults:function(n,o){var a,u;function p(x){return M.coerce(u._input,u,t,x)}if(o.barmode==="group")for(var c=0;c<n.length;c++)(u=n[c]).type==="bar"&&(a=u._input,s(a,u,o,p))},handleText:r}},58065:function(ee){ee.exports=function(D,e,M){return D.x="xVal"in e?e.xVal:e.x,D.y="yVal"in e?e.yVal:e.y,e.xa&&(D.xaxis=e.xa),e.ya&&(D.yaxis=e.ya),M.orientation==="h"?(D.label=D.y,D.value=D.x):(D.label=D.x,D.value=D.y),D}},69383:function(ee,D,e){var M=e(92770),k=e(84267),l=e(71828).isArrayOrTypedArray;D.coerceString=function(T,b,d){if(typeof b=="string"){if(b||!T.noBlank)return b}else if((typeof b=="number"||b===!0)&&!T.strict)return String(b);return d!==void 0?d:T.dflt},D.coerceNumber=function(T,b,d){if(M(b)){b=+b;var s=T.min,t=T.max;if(!(s!==void 0&&b<s||t!==void 0&&b>t))return b}return d!==void 0?d:T.dflt},D.coerceColor=function(T,b,d){return k(b).isValid()?b:d!==void 0?d:T.dflt},D.coerceEnumerated=function(T,b,d){return T.coerceNumber&&(b=+b),T.values.indexOf(b)!==-1?b:d!==void 0?d:T.dflt},D.getValue=function(T,b){var d;return Array.isArray(T)?b<T.length&&(d=T[b]):d=T,d},D.getLineWidth=function(T,b){return 0<b.mlw?b.mlw:l(T.marker.line.width)?0:T.marker.line.width}},95423:function(ee,D,e){var M=e(30211),k=e(73972),l=e(7901),T=e(71828).fillText,b=e(69383).getLineWidth,d=e(89298).hoverLabelText,s=e(50606).BADNUM;function t(r,n,o,a,u){var p,c,x,g,h,y,v,m=r.cd,_=m[0].trace,f=m[0].t,S=a==="closest",w=_.type==="waterfall",E=r.maxHoverDistance,L=r.maxSpikeDistance;_.orientation==="h"?(p=o,c=n,x="y",g="x",h=K,y=q):(p=n,c=o,x="x",g="y",y=K,h=q);var C=_[x+"period"],P=S||C;function z(ue){return O(ue,-1)}function G(ue){return O(ue,1)}function O(ue,pe){var ge=ue.w;return ue[x]+pe*ge/2}function H(ue){return ue[x+"End"]-ue[x+"Start"]}var N=S?z:C?function(ue){return ue.p-H(ue)/2}:function(ue){return Math.min(z(ue),ue.p-f.bardelta/2)},B=S?G:C?function(ue){return ue.p+H(ue)/2}:function(ue){return Math.max(G(ue),ue.p+f.bardelta/2)};function V(ue,pe,ge){return u.finiteRange&&(ge=0),M.inbox(ue-p,pe-p,ge+Math.min(1,Math.abs(pe-ue)/v)-1)}function q(ue){return V(N(ue),B(ue),E)}function te(ue){var pe=ue[g];if(w){var ge=Math.abs(ue.rawS)||0;c>0?pe+=ge:c<0&&(pe-=ge)}return pe}function K(ue){var pe=c,ge=ue.b,_e=te(ue);return M.inbox(ge-pe,_e-pe,E+(_e-pe)/(_e-ge)-1)}var J=r[x+"a"],Y=r[g+"a"];v=Math.abs(J.r2c(J.range[1])-J.r2c(J.range[0]));var W=M.getDistanceFunction(a,h,y,function(ue){return(h(ue)+y(ue))/2});if(M.getClosest(m,W,r),r.index!==!1&&m[r.index].p!==s){P||(N=function(ue){return Math.min(z(ue),ue.p-f.bargroupwidth/2)},B=function(ue){return Math.max(G(ue),ue.p+f.bargroupwidth/2)});var Q=m[r.index],ne=_.base?Q.b+Q.s:Q.s;r[g+"0"]=r[g+"1"]=Y.c2p(Q[g],!0),r[g+"LabelVal"]=ne;var re=f.extents[f.extents.round(Q.p)];r[x+"0"]=J.c2p(S?N(Q):re[0],!0),r[x+"1"]=J.c2p(S?B(Q):re[1],!0);var ae=Q.orig_p!==void 0;return r[x+"LabelVal"]=ae?Q.orig_p:Q.p,r.labelLabel=d(J,r[x+"LabelVal"],_[x+"hoverformat"]),r.valueLabel=d(Y,r[g+"LabelVal"],_[g+"hoverformat"]),r.baseLabel=d(Y,Q.b,_[g+"hoverformat"]),r.spikeDistance=(function(ue){var pe=c,ge=ue.b,_e=te(ue);return M.inbox(ge-pe,_e-pe,L+(_e-pe)/(_e-ge)-1)}(Q)+function(ue){return V(z(ue),G(ue),L)}(Q))/2,r[x+"Spike"]=J.c2p(Q.p,!0),T(Q,_,r),r.hovertemplate=_.hovertemplate,r}}function i(r,n){var o=n.mcc||r.marker.color,a=n.mlcc||r.marker.line.color,u=b(r,n);return l.opacity(o)?o:l.opacity(a)&&u?a:void 0}ee.exports={hoverPoints:function(r,n,o,a,u){var p=t(r,n,o,a,u);if(p){var c=p.cd,x=c[0].trace,g=c[p.index];return p.color=i(x,g),k.getComponentMethod("errorbars","hoverInfo")(g,x,p),[p]}},hoverOnBars:t,getTraceColor:i}},60822:function(ee,D,e){ee.exports={attributes:e(1486),layoutAttributes:e(43641),supplyDefaults:e(90769).supplyDefaults,crossTraceDefaults:e(90769).crossTraceDefaults,supplyLayoutDefaults:e(13957),calc:e(92290),crossTraceCalc:e(11661).crossTraceCalc,colorbar:e(4898),arraysToCalcdata:e(75341),plot:e(17295).plot,style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(95423).hoverPoints,eventData:e(58065),selectPoints:e(81974),moduleType:"trace",name:"bar",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(ee){ee.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(ee,D,e){var M=e(73972),k=e(89298),l=e(71828),T=e(43641);ee.exports=function(b,d,s){function t(x,g){return l.coerce(b,d,T,x,g)}for(var i=!1,r=!1,n=!1,o={},a=t("barmode"),u=0;u<s.length;u++){var p=s[u];if(M.traceIs(p,"bar")&&p.visible){if(i=!0,a==="group"){var c=p.xaxis+p.yaxis;o[c]&&(n=!0),o[c]=!0}p.visible&&p.type==="histogram"&&k.getFromId({_fullLayout:d},p[p.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}i?(a!=="overlay"&&t("barnorm"),t("bargap",r&&!n?0:.2),t("bargroupgap")):delete d.barmode}},17295:function(ee,D,e){var M=e(39898),k=e(92770),l=e(71828),T=e(63893),b=e(7901),d=e(91424),s=e(73972),t=e(89298).tickText,i=e(72597),r=i.recordMinTextSize,n=i.clearMinTextSize,o=e(16688),a=e(69383),u=e(97313),p=e(1486),c=p.text,x=p.textposition,g=e(23469).appendArrayPointValue,h=u.TEXTPAD;function y(L){return L.id}function v(L){if(L.ids)return y}function m(L,C){return L<C?1:-1}function _(L,C,P,z){var G;return!C.uniformtext.mode&&f(P)?(z&&(G=z()),L.transition().duration(P.duration).ease(P.easing).each("end",function(){G&&G()}).each("interrupt",function(){G&&G()})):L}function f(L){return L&&L.duration>0}function S(L){return L==="auto"?0:L}function w(L,C){var P=Math.PI/180*C,z=Math.abs(Math.sin(P)),G=Math.abs(Math.cos(P));return{x:L.width*G+L.height*z,y:L.width*z+L.height*G}}function E(L,C,P,z,G,O){var H=!!O.isHorizontal,N=!!O.constrained,B=O.angle||0,V=O.anchor||"end",q=V==="end",te=V==="start",K=((O.leftToRight||0)+1)/2,J=1-K,Y=G.width,W=G.height,Q=Math.abs(C-L),ne=Math.abs(z-P),re=Q>2*h&&ne>2*h?h:0;Q-=2*re,ne-=2*re;var ae=S(B);B!=="auto"||Y<=Q&&W<=ne||!(Y>Q||W>ne)||(Y>ne||W>Q)&&Y<W==Q<ne||(ae+=90);var ue=w(G,ae),pe=1;N&&(pe=Math.min(1,Q/ue.x,ne/ue.y));var ge=G.left*J+G.right*K,_e=(G.top+G.bottom)/2,me=(L+h)*J+(C-h)*K,ve=(P+z)/2,Oe=0,Me=0;if(te||q){var Te=(H?ue.x:ue.y)/2,se=H?m(L,C):m(P,z);H?te?(me=L+se*re,Oe=-se*Te):(me=C-se*re,Oe=se*Te):te?(ve=P+se*re,Me=-se*Te):(ve=z-se*re,Me=se*Te)}return{textX:ge,textY:_e,targetX:me,targetY:ve,anchorX:Oe,anchorY:Me,scale:pe,rotate:ae}}ee.exports={plot:function(L,C,P,z,G,O){var H=C.xaxis,N=C.yaxis,B=L._fullLayout,V=L._context.staticPlot;G||(G={mode:B.barmode,norm:B.barmode,gap:B.bargap,groupgap:B.bargroupgap},n("bar",B));var q=l.makeTraceGroups(z,P,"trace bars").each(function(te){var K=M.select(this),J=te[0].trace,Y=J.type==="waterfall",W=J.type==="funnel",Q=J.type==="bar"||W,ne=0;Y&&J.connector.visible&&J.connector.mode==="between"&&(ne=J.connector.line.width/2);var re=J.orientation==="h",ae=f(G),ue=l.ensureSingle(K,"g","points"),pe=v(J),ge=ue.selectAll("g.point").data(l.identity,pe);ge.enter().append("g").classed("point",!0),ge.exit().remove(),ge.each(function(me,ve){var Oe,Me,Te=M.select(this),se=function(Ce,Re,ze,He){var Ge=[],Je=[],ot=He?Re:ze,Qe=He?ze:Re;return Ge[0]=ot.c2p(Ce.s0,!0),Je[0]=Qe.c2p(Ce.p0,!0),Ge[1]=ot.c2p(Ce.s1,!0),Je[1]=Qe.c2p(Ce.p1,!0),He?[Ge,Je]:[Je,Ge]}(me,H,N,re),oe=se[0][0],he=se[0][1],Ee=se[1][0],ke=se[1][1],be=(re?he-oe:ke-Ee)==0;if(be&&Q&&a.getLineWidth(J,me)&&(be=!1),be||(be=!(k(oe)&&k(he)&&k(Ee)&&k(ke))),me.isBlank=be,be&&(re?he=oe:ke=Ee),ne&&!be&&(re?(oe-=m(oe,he)*ne,he+=m(oe,he)*ne):(Ee-=m(Ee,ke)*ne,ke+=m(Ee,ke)*ne)),J.type==="waterfall"){if(!be){var Ie=J[me.dir].marker;Oe=Ie.line.width,Me=Ie.color}}else Oe=a.getLineWidth(J,me),Me=me.mc||J.marker.color;function Fe(Ce){var Re=M.round(Oe/2%1,2);return G.gap===0&&G.groupgap===0?M.round(Math.round(Ce)-Re,2):Ce}if(!L._context.staticPlot){var ce=b.opacity(Me)<1||Oe>.01?Fe:function(Ce,Re,ze){return ze&&Ce===Re?Ce:Math.abs(Ce-Re)>=2?Fe(Ce):Ce>Re?Math.ceil(Ce):Math.floor(Ce)};oe=ce(oe,he,re),he=ce(he,oe,re),Ee=ce(Ee,ke,!re),ke=ce(ke,Ee,!re)}var we=_(l.ensureSingle(Te,"path"),B,G,O);if(we.style("vector-effect",V?"none":"non-scaling-stroke").attr("d",isNaN((he-oe)*(ke-Ee))||be&&L._context.staticPlot?"M0,0Z":"M"+oe+","+Ee+"V"+ke+"H"+he+"V"+Ee+"Z").call(d.setClipUrl,C.layerClipId,L),!B.uniformtext.mode&&ae){var ye=d.makePointStyleFns(J);d.singlePointStyle(me,we,J,ye,L)}(function(Ce,Re,ze,He,Ge,Je,ot,Qe,vt,xt,mt){var rt,it=Re.xaxis,Tt=Re.yaxis,Mt=Ce._fullLayout;function Pt(Qt,jt,Ut){return l.ensureSingle(Qt,"text").text(jt).attr({class:"bartext bartext-"+rt,"text-anchor":"middle","data-notex":1}).call(d.font,Ut).call(T.convertToTspans,Ce)}var kt=He[0].trace,Ze=kt.orientation==="h",Xe=function(Qt,jt,Ut,Xt,gn){var Mn,cn=jt[0].trace;return Mn=cn.texttemplate?function(qt,nn,Kt,sn,hn){var bn=nn[0].trace,yn=l.castOption(bn,Kt,"texttemplate");if(!yn)return"";var Sn,pn,Cn,Hn,Qn=bn.type==="histogram",nr=bn.type==="waterfall",Jn=bn.type==="funnel",Gn=bn.orientation==="h";function lr(Ln){return t(Hn,Hn.c2l(Ln),!0).text}Gn?(Sn="y",pn=hn,Cn="x",Hn=sn):(Sn="x",pn=sn,Cn="y",Hn=hn);var Rt,$t=nn[Kt],an={};an.label=$t.p,an.labelLabel=an[Sn+"Label"]=(Rt=$t.p,t(pn,pn.c2l(Rt),!0).text);var fn=l.castOption(bn,$t.i,"text");(fn===0||fn)&&(an.text=fn),an.value=$t.s,an.valueLabel=an[Cn+"Label"]=lr($t.s);var wn={};g(wn,bn,$t.i),(Qn||wn.x===void 0)&&(wn.x=Gn?an.value:an.label),(Qn||wn.y===void 0)&&(wn.y=Gn?an.label:an.value),(Qn||wn.xLabel===void 0)&&(wn.xLabel=Gn?an.valueLabel:an.labelLabel),(Qn||wn.yLabel===void 0)&&(wn.yLabel=Gn?an.labelLabel:an.valueLabel),nr&&(an.delta=+$t.rawS||$t.s,an.deltaLabel=lr(an.delta),an.final=$t.v,an.finalLabel=lr(an.final),an.initial=an.final-an.delta,an.initialLabel=lr(an.initial)),Jn&&(an.value=$t.s,an.valueLabel=lr(an.value),an.percentInitial=$t.begR,an.percentInitialLabel=l.formatPercent($t.begR),an.percentPrevious=$t.difR,an.percentPreviousLabel=l.formatPercent($t.difR),an.percentTotal=$t.sumR,an.percenTotalLabel=l.formatPercent($t.sumR));var Bn=l.castOption(bn,$t.i,"customdata");return Bn&&(an.customdata=Bn),l.texttemplateString(yn,an,qt._d3locale,wn,an,bn._meta||{})}(Qt,jt,Ut,Xt,gn):cn.textinfo?function(qt,nn,Kt,sn){var hn=qt[0].trace,bn=hn.orientation==="h",yn=hn.type==="waterfall",Sn=hn.type==="funnel";function pn(Bn){return t(bn?Kt:sn,+Bn,!0).text}var Cn,Hn,Qn=hn.textinfo,nr=qt[nn],Jn=Qn.split("+"),Gn=[],lr=function(Bn){return Jn.indexOf(Bn)!==-1};if(lr("label")&&Gn.push((Hn=qt[nn].p,t(bn?sn:Kt,Hn,!0).text)),lr("text")&&((Cn=l.castOption(hn,nr.i,"text"))===0||Cn)&&Gn.push(Cn),yn){var Rt=+nr.rawS||nr.s,$t=nr.v,an=$t-Rt;lr("initial")&&Gn.push(pn(an)),lr("delta")&&Gn.push(pn(Rt)),lr("final")&&Gn.push(pn($t))}if(Sn){lr("value")&&Gn.push(pn(nr.s));var fn=0;lr("percent initial")&&fn++,lr("percent previous")&&fn++,lr("percent total")&&fn++;var wn=fn>1;lr("percent initial")&&(Cn=l.formatPercent(nr.begR),wn&&(Cn+=" of initial"),Gn.push(Cn)),lr("percent previous")&&(Cn=l.formatPercent(nr.difR),wn&&(Cn+=" of previous"),Gn.push(Cn)),lr("percent total")&&(Cn=l.formatPercent(nr.sumR),wn&&(Cn+=" of total"),Gn.push(Cn))}return Gn.join("<br>")}(jt,Ut,Xt,gn):a.getValue(cn.text,Ut),a.coerceString(c,Mn)}(Mt,He,Ge,it,Tt);rt=function(Qt,jt){var Ut=a.getValue(Qt.textposition,jt);return a.coerceEnumerated(x,Ut)}(kt,Ge);var Ve=xt.mode==="stack"||xt.mode==="relative",We=He[Ge],at=!Ve||We._outmost;if(Xe&&rt!=="none"&&(!We.isBlank&&Je!==ot&&Qe!==vt||rt!=="auto"&&rt!=="inside")){var et=Mt.font,De=o.getBarColor(He[Ge],kt),Be=o.getInsideTextFont(kt,Ge,et,De),nt=o.getOutsideTextFont(kt,Ge,et),tt=ze.datum();Ze?it.type==="log"&&tt.s0<=0&&(Je=it.range[0]<it.range[1]?0:it._length):Tt.type==="log"&&tt.s0<=0&&(Qe=Tt.range[0]<Tt.range[1]?Tt._length:0);var dt,ht,gt,ut,wt,ct=Math.abs(ot-Je)-2*h,ft=Math.abs(vt-Qe)-2*h;if(rt==="outside"&&(at||We.hasB||(rt="inside")),rt==="auto"&&(at?(rt="inside",dt=Pt(ze,Xe,wt=l.ensureUniformFontSize(Ce,Be)),gt=(ht=d.bBox(dt.node())).width,ut=ht.height,gt>0&&ut>0&&(gt<=ct&&ut<=ft||gt<=ft&&ut<=ct||(Ze?ct>=gt*(ft/ut):ft>=ut*(ct/gt)))?rt="inside":(rt="outside",dt.remove(),dt=null)):rt="inside"),!dt){var bt=(dt=Pt(ze,Xe,wt=l.ensureUniformFontSize(Ce,rt==="outside"?nt:Be))).attr("transform");if(dt.attr("transform",""),gt=(ht=d.bBox(dt.node())).width,ut=ht.height,dt.attr("transform",bt),gt<=0||ut<=0)return void dt.remove()}var It,Dt=kt.textangle;It=rt==="outside"?function(Qt,jt,Ut,Xt,gn,Mn){var cn,qt=!!Mn.isHorizontal,nn=!!Mn.constrained,Kt=Mn.angle||0,sn=gn.width,hn=gn.height,bn=Math.abs(jt-Qt),yn=Math.abs(Xt-Ut);cn=qt?yn>2*h?h:0:bn>2*h?h:0;var Sn=1;nn&&(Sn=qt?Math.min(1,yn/hn):Math.min(1,bn/sn));var pn=S(Kt),Cn=w(gn,pn),Hn=(qt?Cn.x:Cn.y)/2,Qn=(gn.left+gn.right)/2,nr=(gn.top+gn.bottom)/2,Jn=(Qt+jt)/2,Gn=(Ut+Xt)/2,lr=0,Rt=0,$t=qt?m(jt,Qt):m(Ut,Xt);return qt?(Jn=jt-$t*cn,lr=$t*Hn):(Gn=Xt+$t*cn,Rt=-$t*Hn),{textX:Qn,textY:nr,targetX:Jn,targetY:Gn,anchorX:lr,anchorY:Rt,scale:Sn,rotate:pn}}(Je,ot,Qe,vt,ht,{isHorizontal:Ze,constrained:kt.constraintext==="both"||kt.constraintext==="outside",angle:Dt}):E(Je,ot,Qe,vt,ht,{isHorizontal:Ze,constrained:kt.constraintext==="both"||kt.constraintext==="inside",angle:Dt,anchor:kt.insidetextanchor}),It.fontSize=wt.size,r(kt.type==="histogram"?"bar":kt.type,It,Mt),We.transform=It;var Nt=_(dt,Mt,xt,mt);l.setTransormAndDisplay(Nt,It)}else ze.select("text").remove()})(L,C,Te,te,ve,oe,he,Ee,ke,G,O),C.layerClipId&&d.hideOutsideRangePoint(me,Te.select("text"),H,N,J.xcalendar,J.ycalendar)});var _e=J.cliponaxis===!1;d.setClipUrl(K,_e?null:C.layerClipId,L)});s.getComponentMethod("errorbars","plot")(L,q,C,G)},toMoveInsideBar:E}},81974:function(ee){function D(e,M,k,l,T){var b=M.c2p(l?e.s0:e.p0,!0),d=M.c2p(l?e.s1:e.p1,!0),s=k.c2p(l?e.p0:e.s0,!0),t=k.c2p(l?e.p1:e.s1,!0);return T?[(b+d)/2,(s+t)/2]:l?[d,(s+t)/2]:[(b+d)/2,t]}ee.exports=function(e,M){var k,l=e.cd,T=e.xaxis,b=e.yaxis,d=l[0].trace,s=d.type==="funnel",t=d.orientation==="h",i=[];if(M===!1)for(k=0;k<l.length;k++)l[k].selected=0;else for(k=0;k<l.length;k++){var r=l[k],n="ct"in r?r.ct:D(r,T,b,t,s);M.contains(n,!1,k,e)?(i.push({pointNumber:k,x:T.c2d(r.x),y:b.c2d(r.y)}),r.selected=1):r.selected=0}return i}},61546:function(ee,D,e){ee.exports=k;var M=e(71828).distinctVals;function k(l,T){this.traces=l,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var b=1/0,d=T.posAxis._id.charAt(0),s=[],t=0;t<l.length;t++){for(var i=l[t],r=0;r<i.length;r++){var n=i[r],o=n.p;o===void 0&&(o=n[d]),o!==void 0&&s.push(o)}i[0]&&i[0].width1&&(b=Math.min(i[0].width1,b))}this.positions=s;var a=M(s);this.distinctPositions=a.vals,a.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min(a.minDiff,b);var u=(T.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(l,T){var b=this.getLabel(l,T),d=this.bins[b]||0;return this.bins[b]=d+T,d},k.prototype.get=function(l,T){var b=this.getLabel(l,T);return this.bins[b]||0},k.prototype.getLabel=function(l,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?l:Math.round(l/this.binWidth))}},16688:function(ee,D,e){var M=e(39898),k=e(7901),l=e(91424),T=e(71828),b=e(73972),d=e(72597).resizeText,s=e(1486),t=s.textfont,i=s.insidetextfont,r=s.outsidetextfont,n=e(69383);function o(y,v,m){l.pointStyle(y.selectAll("path"),v,m),a(y,v,m)}function a(y,v,m){y.selectAll("text").each(function(_){var f=M.select(this),S=T.ensureUniformFontSize(m,u(f,_,v,m));l.font(f,S)})}function u(y,v,m,_){var f=_._fullLayout.font,S=m.textfont;if(y.classed("bartext-inside")){var w=h(v,m);S=c(m,v.i,f,w)}else y.classed("bartext-outside")&&(S=x(m,v.i,f));return S}function p(y,v,m){return g(t,y.textfont,v,m)}function c(y,v,m,_){var f=p(y,v,m);return(y._input.textfont===void 0||y._input.textfont.color===void 0||Array.isArray(y.textfont.color)&&y.textfont.color[v]===void 0)&&(f={color:k.contrast(_),family:f.family,size:f.size}),g(i,y.insidetextfont,v,f)}function x(y,v,m){var _=p(y,v,m);return g(r,y.outsidetextfont,v,_)}function g(y,v,m,_){v=v||{};var f=n.getValue(v.family,m),S=n.getValue(v.size,m),w=n.getValue(v.color,m);return{family:n.coerceString(y.family,f,_.family),size:n.coerceNumber(y.size,S,_.size),color:n.coerceColor(y.color,w,_.color)}}function h(y,v){return v.type==="waterfall"?v[y.dir].marker.color:y.mcc||y.mc||v.marker.color}ee.exports={style:function(y){var v=M.select(y).selectAll("g.barlayer").selectAll("g.trace");d(y,v,"bar");var m=v.size(),_=y._fullLayout;v.style("opacity",function(f){return f[0].trace.opacity}).each(function(f){(_.barmode==="stack"&&m>1||_.bargap===0&&_.bargroupgap===0&&!f[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),v.selectAll("g.points").each(function(f){o(M.select(this),f[0].trace,y)}),b.getComponentMethod("errorbars","style")(v)},styleTextPoints:a,styleOnSelect:function(y,v,m){var _=v[0].trace;_.selectedpoints?function(f,S,w){l.selectedPointStyle(f.selectAll("path"),S),function(E,L,C){E.each(function(P){var z,G=M.select(this);if(P.selected){z=T.ensureUniformFontSize(C,u(G,P,L,C));var O=L.selected.textfont&&L.selected.textfont.color;O&&(z.color=O),l.font(G,z)}else l.selectedTextStyle(G,L)})}(f.selectAll("text"),S,w)}(m,_,y):(o(m,_,y),b.getComponentMethod("errorbars","style")(m))},getInsideTextFont:c,getOutsideTextFont:x,getBarColor:h,resizeText:d}},98340:function(ee,D,e){var M=e(7901),k=e(52075).hasColorscale,l=e(1586),T=e(71828).coercePattern;ee.exports=function(b,d,s,t,i){var r=s("marker.color",t),n=k(b,"marker");n&&l(b,d,i,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",M.defaultLine),k(b,"marker.line")&&l(b,d,i,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",r,n),s("selected.marker.color"),s("unselected.marker.color")}},72597:function(ee,D,e){var M=e(39898),k=e(71828);function l(T){return"_"+T+"Text_minsize"}ee.exports={recordMinTextSize:function(T,b,d){if(d.uniformtext.mode){var s=l(T),t=d.uniformtext.minsize,i=b.scale*b.fontSize;b.hide=i<t,d[s]=d[s]||1/0,b.hide||(d[s]=Math.min(d[s],Math.max(i,t)))}},clearMinTextSize:function(T,b){b[l(T)]=void 0},resizeText:function(T,b,d){var s=T._fullLayout,t=s["_"+d+"Text_minsize"];if(t){var i,r=s.uniformtext.mode==="hide";switch(d){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}b.selectAll(i).each(function(n){var o=n.transform;if(o){o.scale=r&&o.hide?0:t/o.fontSize;var a=M.select(this).select("text");k.setTransormAndDisplay(a,o)}})}}}},55023:function(ee,D,e){var M=e(5386).fF,k=e(1426).extendFlat,l=e(81245),T=e(1486);ee.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:k({},T.base,{}),offset:k({},T.offset,{}),width:k({},T.width,{}),text:k({},T.text,{}),hovertext:k({},T.hovertext,{}),marker:T.marker,hoverinfo:l.hoverinfo,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},74692:function(ee,D,e){var M=e(52075).hasColorscale,k=e(78803),l=e(75341),T=e(11661).setGroupPositions,b=e(66279),d=e(73972).traceIs,s=e(71828).extendFlat;ee.exports={calc:function(t,i){for(var r=t._fullLayout,n=i.subplot,o=r[n].radialaxis,a=r[n].angularaxis,u=o.makeCalcdata(i,"r"),p=a.makeCalcdata(i,"theta"),c=i._length,x=new Array(c),g=u,h=p,y=0;y<c;y++)x[y]={p:h[y],s:g[y]};function v(m){var _=i[m];_!==void 0&&(i["_"+m]=Array.isArray(_)?a.makeCalcdata(i,m):a.d2c(_,i.thetaunit))}return a.type==="linear"&&(v("width"),v("offset")),M(i,"marker")&&k(t,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),M(i,"marker.line")&&k(t,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(x,i),b(x,i),x},crossTraceCalc:function(t,i,r){for(var n=t.calcdata,o=[],a=0;a<n.length;a++){var u=n[a],p=u[0].trace;p.visible===!0&&d(p,"bar")&&p.subplot===r&&o.push(u)}var c=s({},i.radialaxis,{_id:"x"}),x=i.angularaxis;T(t,x,c,o,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}}},6135:function(ee,D,e){var M=e(71828),k=e(22184).handleRThetaDefaults,l=e(98340),T=e(55023);ee.exports=function(b,d,s,t){function i(r,n){return M.coerce(b,d,T,r,n)}k(b,d,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),l(b,d,i,s,t),M.coerceSelectionMarkerOpacity(d,i)):d.visible=!1}},27379:function(ee,D,e){var M=e(30211),k=e(71828),l=e(95423).getTraceColor,T=k.fillText,b=e(59150).makeHoverPointText,d=e(10869).isPtInsidePolygon;ee.exports=function(s,t,i){var r=s.cd,n=r[0].trace,o=s.subplot,a=o.radialAxis,u=o.angularAxis,p=o.vangles,c=p?d:k.isPtInsideSector,x=s.maxHoverDistance,g=u._period||2*Math.PI,h=Math.abs(a.g2p(Math.sqrt(t*t+i*i))),y=Math.atan2(i,t);if(a.range[0]>a.range[1]&&(y+=Math.PI),M.getClosest(r,function(_){return c(h,y,[_.rp0,_.rp1],[_.thetag0,_.thetag1],p)?x+Math.min(1,Math.abs(_.thetag1-_.thetag0)/g)-1+(_.rp1-h)/(_.rp1-_.rp0)-1:1/0},s),s.index!==!1){var v=r[s.index];s.x0=s.x1=v.ct[0],s.y0=s.y1=v.ct[1];var m=k.extendFlat({},v,{r:v.s,theta:v.p});return T(v,n,s),b(m,n,o,s),s.hovertemplate=n.hovertemplate,s.color=l(n,v),s.xLabelVal=s.yLabelVal=void 0,v.s<0&&(s.idealAlign="left"),[s]}}},23381:function(ee,D,e){ee.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(23580),categories:["polar","bar","showLegend"],attributes:e(55023),layoutAttributes:e(40151),supplyDefaults:e(6135),supplyLayoutDefaults:e(19860),calc:e(74692).calc,crossTraceCalc:e(74692).crossTraceCalc,plot:e(60173),colorbar:e(4898),formatLabels:e(98608),style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(27379),selectPoints:e(81974),meta:{}}},40151:function(ee){ee.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(ee,D,e){var M=e(71828),k=e(40151);ee.exports=function(l,T,b){var d,s={};function t(n,o){return M.coerce(l[d]||{},T[d],k,n,o)}for(var i=0;i<b.length;i++){var r=b[i];r.type==="barpolar"&&r.visible===!0&&(s[d=r.subplot]||(t("barmode"),t("bargap"),s[d]=1))}}},60173:function(ee,D,e){var M=e(39898),k=e(92770),l=e(71828),T=e(91424),b=e(10869);ee.exports=function(d,s,t){var i=d._context.staticPlot,r=s.xaxis,n=s.yaxis,o=s.radialAxis,a=s.angularAxis,u=function(c){var x=c.cxx,g=c.cyy;return c.vangles?function(h,y,v,m){var _,f;l.angleDelta(v,m)>0?(_=v,f=m):(_=m,f=v);var S=[b.findEnclosingVertexAngles(_,c.vangles)[0],(_+f)/2,b.findEnclosingVertexAngles(f,c.vangles)[1]];return b.pathPolygonAnnulus(h,y,_,f,S,x,g)}:function(h,y,v,m){return l.pathAnnulus(h,y,v,m,x,g)}}(s),p=s.layers.frontplot.select("g.barlayer");l.makeTraceGroups(p,t,"trace bars").each(function(){var c=M.select(this),x=l.ensureSingle(c,"g","points").selectAll("g.point").data(l.identity);x.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(g){var h,y=M.select(this),v=g.rp0=o.c2p(g.s0),m=g.rp1=o.c2p(g.s1),_=g.thetag0=a.c2g(g.p0),f=g.thetag1=a.c2g(g.p1);if(k(v)&&k(m)&&k(_)&&k(f)&&v!==m&&_!==f){var S=o.c2g(g.s1),w=(_+f)/2;g.ct=[r.c2p(S*Math.cos(w)),n.c2p(S*Math.sin(w))],h=u(v,m,_,f)}else h="M0,0Z";l.ensureSingle(y,"path").attr("d",h)}),T.setClipUrl(c,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,d)})}},53522:function(ee,D,e){var M=e(82196),k=e(1486),l=e(22399),T=e(12663).axisHoverFormat,b=e(5386).fF,d=e(1426).extendFlat,s=M.marker,t=s.line;ee.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:d({},s.symbol,{arrayOk:!1,editType:"plot"}),opacity:d({},s.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:d({},s.angle,{arrayOk:!1,editType:"calc"}),size:d({},s.size,{arrayOk:!1,editType:"calc"}),color:d({},s.color,{arrayOk:!1,editType:"style"}),line:{color:d({},t.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:d({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:{marker:M.selected.marker,editType:"style"},unselected:{marker:M.unselected.marker,editType:"style"},text:d({},M.text,{}),hovertext:d({},M.hovertext,{}),hovertemplate:b({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(ee,D,e){var M=e(92770),k=e(89298),l=e(42973),T=e(71828),b=e(50606).BADNUM,d=T._;ee.exports=function(c,x){var g,h,y,v,m,_,f,S=c._fullLayout,w=k.getFromId(c,x.xaxis||"x"),E=k.getFromId(c,x.yaxis||"y"),L=[],C=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(y=w,v="x",m=E,_="y",f=!!x.yperiodalignment):(y=E,v="y",m=w,_="x",f=!!x.xperiodalignment);var P,z,G,O,H,N,B=function(Re,ze,He,Ge){var Je,ot=ze+"0"in Re;if(ze in Re||ot&&"d"+ze in Re){var Qe=He.makeCalcdata(Re,ze);return[l(Re,He,ze,Qe).vals,Qe]}Je=ot?Re[ze+"0"]:"name"in Re&&(He.type==="category"||M(Re.name)&&["linear","log"].indexOf(He.type)!==-1||T.isDateTime(Re.name)&&He.type==="date")?Re.name:Ge;for(var vt=He.type==="multicategory"?He.r2c_just_indices(Je):He.d2c(Je,0,Re[ze+"calendar"]),xt=Re._length,mt=new Array(xt),rt=0;rt<xt;rt++)mt[rt]=vt;return[mt]}(x,_,m,S[C]),V=B[0],q=B[1],te=T.distinctVals(V,m),K=te.vals,J=te.minDiff/2,Y=(x.boxpoints||x.points)==="all"?T.identity:function(Re){return Re.v<P.lf||Re.v>P.uf};if(x._hasPreCompStats){var W=x[v],Q=function(Re){return y.d2c((x[Re]||[])[g])},ne=1/0,re=-1/0;for(g=0;g<x._length;g++){var ae=V[g];if(M(ae)){if((P={}).pos=P[_]=ae,f&&q&&(P.orig_p=q[g]),P.q1=Q("q1"),P.med=Q("median"),P.q3=Q("q3"),z=[],W&&T.isArrayOrTypedArray(W[g]))for(h=0;h<W[g].length;h++)(N=y.d2c(W[g][h]))!==b&&(t(H={v:N,i:[g,h]},x,[g,h]),z.push(H));if(P.pts=z.sort(i),O=(G=P[v]=z.map(r)).length,P.med!==b&&P.q1!==b&&P.q3!==b&&P.med>=P.q1&&P.q3>=P.med){var ue=Q("lowerfence");P.lf=ue!==b&&ue<=P.q1?ue:n(P,G,O);var pe=Q("upperfence");P.uf=pe!==b&&pe>=P.q3?pe:o(P,G,O);var ge=Q("mean");P.mean=ge!==b?ge:O?T.mean(G,O):(P.q1+P.q3)/2;var _e=Q("sd");P.sd=ge!==b&&_e>=0?_e:O?T.stdev(G,O,P.mean):P.q3-P.q1,P.lo=a(P),P.uo=u(P);var me=Q("notchspan");me=me!==b&&me>0?me:p(P,O),P.ln=P.med-me,P.un=P.med+me;var ve=P.lf,Oe=P.uf;x.boxpoints&&G.length&&(ve=Math.min(ve,G[0]),Oe=Math.max(Oe,G[O-1])),x.notched&&(ve=Math.min(ve,P.ln),Oe=Math.max(Oe,P.un)),P.min=ve,P.max=Oe}else{var Me;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join(`
`)),Me=P.med!==b?P.med:P.q1!==b?P.q3!==b?(P.q1+P.q3)/2:P.q1:P.q3!==b?P.q3:0,P.med=Me,P.q1=P.q3=Me,P.lf=P.uf=Me,P.mean=P.sd=Me,P.ln=P.un=Me,P.min=P.max=Me}ne=Math.min(ne,P.min),re=Math.max(re,P.max),P.pts2=z.filter(Y),L.push(P)}}x._extremes[y._id]=k.findExtremes(y,[ne,re],{padded:!0})}else{var Te=y.makeCalcdata(x,v),se=function(Re,ze){for(var He=Re.length,Ge=new Array(He+1),Je=0;Je<He;Je++)Ge[Je]=Re[Je]-ze;return Ge[He]=Re[He-1]+ze,Ge}(K,J),oe=K.length,he=function(Re){for(var ze=new Array(Re),He=0;He<Re;He++)ze[He]=[];return ze}(oe);for(g=0;g<x._length;g++)if(N=Te[g],M(N)){var Ee=T.findBin(V[g],se);Ee>=0&&Ee<oe&&(t(H={v:N,i:g},x,g),he[Ee].push(H))}var ke=1/0,be=-1/0,Ie=x.quartilemethod,Fe=Ie==="exclusive",ce=Ie==="inclusive";for(g=0;g<oe;g++)if(he[g].length>0){var we,ye;(P={}).pos=P[_]=K[g],z=P.pts=he[g].sort(i),O=(G=P[v]=z.map(r)).length,P.min=G[0],P.max=G[O-1],P.mean=T.mean(G,O),P.sd=T.stdev(G,O,P.mean)*x.sdmultiple,P.med=T.interp(G,.5),O%2&&(Fe||ce)?(Fe?(we=G.slice(0,O/2),ye=G.slice(O/2+1)):ce&&(we=G.slice(0,O/2+1),ye=G.slice(O/2)),P.q1=T.interp(we,.5),P.q3=T.interp(ye,.5)):(P.q1=T.interp(G,.25),P.q3=T.interp(G,.75)),P.lf=n(P,G,O),P.uf=o(P,G,O),P.lo=a(P),P.uo=u(P);var Ce=p(P,O);P.ln=P.med-Ce,P.un=P.med+Ce,ke=Math.min(ke,P.ln),be=Math.max(be,P.un),P.pts2=z.filter(Y),L.push(P)}x._extremes[y._id]=k.findExtremes(y,x.notched?Te.concat([ke,be]):Te,{padded:!0})}return function(Re,ze){if(T.isArrayOrTypedArray(ze.selectedpoints))for(var He=0;He<Re.length;He++){for(var Ge=Re[He].pts||[],Je={},ot=0;ot<Ge.length;ot++)Je[Ge[ot].i]=ot;T.tagSelected(Ge,ze,Je)}}(L,x),L.length>0?(L[0].t={num:S[C],dPos:J,posLetter:_,valLetter:v,labels:{med:d(c,"median:"),min:d(c,"min:"),q1:d(c,"q1:"),q3:d(c,"q3:"),max:d(c,"max:"),mean:x.boxmean==="sd"||x.sizemode==="sd"?d(c,"mean  :").replace("",x.sdmultiple===1?"":x.sdmultiple+""):d(c,"mean:"),lf:d(c,"lower fence:"),uf:d(c,"upper fence:")}},S[C]++,L):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(c,x,g){for(var h in s)T.isArrayOrTypedArray(x[h])&&(Array.isArray(g)?T.isArrayOrTypedArray(x[h][g[0]])&&(c[s[h]]=x[h][g[0]][g[1]]):c[s[h]]=x[h][g])}function i(c,x){return c.v-x.v}function r(c){return c.v}function n(c,x,g){return g===0?c.q1:Math.min(c.q1,x[Math.min(T.findBin(2.5*c.q1-1.5*c.q3,x,!0)+1,g-1)])}function o(c,x,g){return g===0?c.q3:Math.max(c.q3,x[Math.max(T.findBin(2.5*c.q3-1.5*c.q1,x),0)])}function a(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function p(c,x){return x===0?0:1.57*(c.q3-c.q1)/Math.sqrt(x)}},37188:function(ee,D,e){var M=e(89298),k=e(71828),l=e(99082).getAxisGroup,T=["v","h"];function b(d,s,t,i){var r,n,o,a=s.calcdata,u=s._fullLayout,p=i._id,c=p.charAt(0),x=[],g=0;for(r=0;r<t.length;r++)for(o=a[t[r]],n=0;n<o.length;n++)x.push(i.c2l(o[n].pos,!0)),g+=(o[n].pts2||[]).length;if(x.length){var h=k.distinctVals(x);i.type!=="category"&&i.type!=="multicategory"||(h.minDiff=1);var y=h.minDiff/2;M.minDtick(i,h.minDiff,h.vals[0],!0);var v=u[d==="violin"?"_numViolins":"_numBoxes"],m=u[d+"mode"]==="group"&&v>1,_=1-u[d+"gap"],f=1-u[d+"groupgap"];for(r=0;r<t.length;r++){var S,w,E,L,C,P,z=(o=a[t[r]])[0].trace,G=o[0].t,O=z.width,H=z.side;if(O)S=w=L=O/2,E=0;else if(S=y,m){var N=l(u,i._id)+z.orientation,B=(u._alignmentOpts[N]||{})[z.alignmentgroup]||{},V=Object.keys(B.offsetGroups||{}).length,q=V||v;w=S*_*f/q,E=2*S*(((V?z._offsetIndex:G.num)+.5)/q-.5)*_,L=S*_/q}else w=S*_*f,E=0,L=S;G.dPos=S,G.bPos=E,G.bdPos=w,G.wHover=L;var te,K,J,Y,W,Q,ne=E+w,re=!!O;if(H==="positive"?(C=S*(O?1:.5),te=ne,P=te=E):H==="negative"?(C=te=E,P=S*(O?1:.5),K=ne):(C=P=S,te=K=ne),(z.boxpoints||z.points)&&g>0){var ae=z.pointpos,ue=z.jitter,pe=z.marker.size/2,ge=0;ae+ue>=0&&((ge=ne*(ae+ue))>C?(re=!0,W=pe,J=ge):ge>te&&(W=pe,J=C)),ge<=C&&(J=C);var _e=0;ae-ue<=0&&((_e=-ne*(ae-ue))>P?(re=!0,Q=pe,Y=_e):_e>K&&(Q=pe,Y=P)),_e<=P&&(Y=P)}else J=C,Y=P;var me=new Array(o.length);for(n=0;n<o.length;n++)me[n]=o[n].pos;z._extremes[p]=M.findExtremes(i,me,{padded:re,vpadminus:Y,vpadplus:J,vpadLinearized:!0,ppadminus:{x:Q,y:W}[c],ppadplus:{x:W,y:Q}[c]})}}}ee.exports={crossTraceCalc:function(d,s){for(var t=d.calcdata,i=s.xaxis,r=s.yaxis,n=0;n<T.length;n++){for(var o=T[n],a=o==="h"?r:i,u=[],p=0;p<t.length;p++){var c=t[p],x=c[0].t,g=c[0].trace;g.visible!==!0||g.type!=="box"&&g.type!=="candlestick"||x.empty||(g.orientation||"v")!==o||g.xaxis!==i._id||g.yaxis!==r._id||u.push(p)}b("box",d,u,a)}},setPositionOffset:b}},36411:function(ee,D,e){var M=e(71828),k=e(73972),l=e(7901),T=e(73927),b=e(26125),d=e(4322),s=e(53522);function t(r,n,o,a){function u(H){var N=0;return H&&H.length&&(N+=1,M.isArrayOrTypedArray(H[0])&&H[0].length&&(N+=1)),N}function p(H){return M.validate(r[H],s[H])}var c,x=o("y"),g=o("x");if(n.type==="box"){var h=o("q1"),y=o("median"),v=o("q3");n._hasPreCompStats=h&&h.length&&y&&y.length&&v&&v.length,c=Math.min(M.minRowLength(h),M.minRowLength(y),M.minRowLength(v))}var m,_,f=u(x),S=u(g),w=f&&M.minRowLength(x),E=S&&M.minRowLength(g),L=a.calendar,C={autotypenumbers:a.autotypenumbers};if(n._hasPreCompStats)switch(String(S)+String(f)){case"00":var P=p("x0")||p("dx");m=!p("y0")&&!p("dy")||P?"v":"h",_=c;break;case"10":m="v",_=Math.min(c,E);break;case"20":m="h",_=Math.min(c,g.length);break;case"01":m="h",_=Math.min(c,w);break;case"02":m="v",_=Math.min(c,x.length);break;case"12":m="v",_=Math.min(c,E,x.length);break;case"21":m="h",_=Math.min(c,g.length,w);break;case"11":_=0;break;case"22":var z,G=!1;for(z=0;z<g.length;z++)if(d(g[z],L,C)==="category"){G=!0;break}if(G)m="v",_=Math.min(c,E,x.length);else{for(z=0;z<x.length;z++)if(d(x[z],L,C)==="category"){G=!0;break}G?(m="h",_=Math.min(c,g.length,w)):(m="v",_=Math.min(c,E,x.length))}}else f>0?(m="v",_=S>0?Math.min(E,w):Math.min(w)):S>0?(m="h",_=Math.min(E)):_=0;if(_){n._length=_;var O=o("orientation",m);n._hasPreCompStats?O==="v"&&S===0?(o("x0",0),o("dx",1)):O==="h"&&f===0&&(o("y0",0),o("dy",1)):O==="v"&&S===0?o("x0"):O==="h"&&f===0&&o("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],a)}else n.visible=!1}function i(r,n,o,a){var u=a.prefix,p=M.coerce2(r,n,s,"marker.outliercolor"),c=o("marker.line.outliercolor"),x="outliers";n._hasPreCompStats?x="all":(p||c)&&(x="suspectedoutliers");var g=o(u+"points",x);g?(o("jitter",g==="all"?.3:0),o("pointpos",g==="all"?-1.5:0),o("marker.symbol"),o("marker.opacity"),o("marker.size"),o("marker.angle"),o("marker.color",n.line.color),o("marker.line.color"),o("marker.line.width"),g==="suspectedoutliers"&&(o("marker.line.outliercolor",n.marker.color),o("marker.line.outlierwidth")),o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size"),o("text"),o("hovertext")):delete n.marker;var h=o("hoveron");h!=="all"&&h.indexOf("points")===-1||o("hovertemplate"),M.coerceSelectionMarkerOpacity(n,o)}ee.exports={supplyDefaults:function(r,n,o,a){function u(_,f){return M.coerce(r,n,s,_,f)}if(t(r,n,u,a),n.visible!==!1){T(r,n,a,u),u("xhoverformat"),u("yhoverformat");var p=n._hasPreCompStats;p&&(u("lowerfence"),u("upperfence")),u("line.color",(r.marker||{}).color||o),u("line.width"),u("fillcolor",l.addOpacity(n.line.color,.5));var c=!1;if(p){var x=u("mean"),g=u("sd");x&&x.length&&(c=!0,g&&g.length&&(c="sd"))}u("whiskerwidth");var h,y=u("sizemode");y==="quartiles"&&(h=u("boxmean",c)),u("showwhiskers",y==="quartiles"),y!=="sd"&&h!=="sd"||u("sdmultiple"),u("width"),u("quartilemethod");var v=!1;if(p){var m=u("notchspan");m&&m.length&&(v=!0)}else M.validate(r.notchwidth,s.notchwidth)&&(v=!0);u("notched",v)&&u("notchwidth"),i(r,n,u,{prefix:"box"})}},crossTraceDefaults:function(r,n){var o,a;function u(x){return M.coerce(a._input,a,s,x)}for(var p=0;p<r.length;p++){var c=(a=r[p]).type;c!=="box"&&c!=="violin"||(o=a._input,n[c+"mode"]==="group"&&b(o,a,n,u))}},handleSampleDefaults:t,handlePointsDefaults:i}},74907:function(ee){ee.exports=function(D,e){return e.hoverOnBox&&(D.hoverOnBox=e.hoverOnBox),"xVal"in e&&(D.x=e.xVal),"yVal"in e&&(D.y=e.yVal),e.xa&&(D.xaxis=e.xa),e.ya&&(D.yaxis=e.ya),D}},41868:function(ee,D,e){var M=e(89298),k=e(71828),l=e(30211),T=e(7901),b=k.fillText;function d(t,i,r,n){var o,a,u,p,c,x,g,h,y,v,m,_,f,S,w=t.cd,E=t.xa,L=t.ya,C=w[0].trace,P=w[0].t,z=C.type==="violin",G=P.bdPos,O=P.wHover,H=function(Me){return u.c2l(Me.pos)+P.bPos-u.c2l(x)};z&&C.side!=="both"?(C.side==="positive"&&(y=function(Me){var Te=H(Me);return l.inbox(Te,Te+O,v)},_=G,f=0),C.side==="negative"&&(y=function(Me){var Te=H(Me);return l.inbox(Te-O,Te,v)},_=0,f=G)):(y=function(Me){var Te=H(Me);return l.inbox(Te-O,Te+O,v)},_=f=G),S=z?function(Me){return l.inbox(Me.span[0]-c,Me.span[1]-c,v)}:function(Me){return l.inbox(Me.min-c,Me.max-c,v)},C.orientation==="h"?(c=i,x=r,g=S,h=y,o="y",u=L,a="x",p=E):(c=r,x=i,g=y,h=S,o="x",u=E,a="y",p=L);var N=Math.min(1,G/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function B(Me){return(g(Me)+h(Me))/2}v=t.maxHoverDistance-N,m=t.maxSpikeDistance-N;var V=l.getDistanceFunction(n,g,h,B);if(l.getClosest(w,V,t),t.index===!1)return[];var q=w[t.index],te=C.line.color,K=(C.marker||{}).color;T.opacity(te)&&C.line.width?t.color=te:T.opacity(K)&&C.boxpoints?t.color=K:t.color=C.fillcolor,t[o+"0"]=u.c2p(q.pos+P.bPos-f,!0),t[o+"1"]=u.c2p(q.pos+P.bPos+_,!0),t[o+"LabelVal"]=q.orig_p!==void 0?q.orig_p:q.pos;var J=o+"Spike";t.spikeDistance=B(q)*m/v,t[J]=u.c2p(q.pos,!0);var Y=C.boxmean||C.sizemode==="sd"||(C.meanline||{}).visible,W=C.boxpoints||C.points,Q=W&&Y?["max","uf","q3","med","mean","q1","lf","min"]:W&&!Y?["max","uf","q3","med","q1","lf","min"]:!W&&Y?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ne=p.range[1]<p.range[0];C.orientation===(ne?"v":"h")&&Q.reverse();for(var re=t.spikeDistance,ae=t[J],ue=[],pe=0;pe<Q.length;pe++){var ge=Q[pe];if(ge in q){var _e=q[ge],me=p.c2p(_e,!0),ve=k.extendFlat({},t);ve.attr=ge,ve[a+"0"]=ve[a+"1"]=me,ve[a+"LabelVal"]=_e,ve[a+"Label"]=(P.labels?P.labels[ge]+" ":"")+M.hoverLabelText(p,_e,C[a+"hoverformat"]),ve.hoverOnBox=!0,ge!=="mean"||!("sd"in q)||C.boxmean!=="sd"&&C.sizemode!=="sd"||(ve[a+"err"]=q.sd),ve.hovertemplate=!1,ue.push(ve)}}t.name="",t.spikeDistance=void 0,t[J]=void 0;for(var Oe=0;Oe<ue.length;Oe++)ue[Oe].attr!=="med"?(ue[Oe].name="",ue[Oe].spikeDistance=void 0,ue[Oe][J]=void 0):(ue[Oe].spikeDistance=re,ue[Oe][J]=ae);return ue}function s(t,i,r){for(var n,o,a,u=t.cd,p=t.xa,c=t.ya,x=u[0].trace,g=p.c2p(i),h=c.c2p(r),y=l.quadrature(function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(p.c2p(z.x)-g)-G,1-3/G)},function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(c.c2p(z.y)-h)-G,1-3/G)}),v=!1,m=0;m<u.length;m++){o=u[m];for(var _=0;_<(o.pts||[]).length;_++){var f=y(a=o.pts[_]);f<=t.distance&&(t.distance=f,v=[m,_])}}if(!v)return!1;a=(o=u[v[0]]).pts[v[1]];var S=p.c2p(a.x,!0),w=c.c2p(a.y,!0),E=a.mrc||1;n=k.extendFlat({},t,{index:a.i,color:(x.marker||{}).color,name:x.name,x0:S-E,x1:S+E,y0:w-E,y1:w+E,spikeDistance:t.distance,hovertemplate:x.hovertemplate});var L,C=o.orig_p,P=C!==void 0?C:o.pos;return x.orientation==="h"?(L=c,n.xLabelVal=a.x,n.yLabelVal=P):(L=p,n.xLabelVal=P,n.yLabelVal=a.y),n[L._id.charAt(0)+"Spike"]=L.c2p(o.pos,!0),b(a,x,n),n}ee.exports={hoverPoints:function(t,i,r,n){var o,a=t.cd[0].trace.hoveron,u=[];return a.indexOf("boxes")!==-1&&(u=u.concat(d(t,i,r,n))),a.indexOf("points")!==-1&&(o=s(t,i,r)),n==="closest"?o?[o]:u:(o&&u.push(o),u)},hoverOnBoxes:d,hoverOnPoints:s}},83832:function(ee,D,e){ee.exports={attributes:e(53522),layoutAttributes:e(40094),supplyDefaults:e(36411).supplyDefaults,crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(4199).supplyLayoutDefaults,calc:e(48518),crossTraceCalc:e(37188).crossTraceCalc,plot:e(86047).plot,style:e(58063).style,styleOnSelect:e(58063).styleOnSelect,hoverPoints:e(41868).hoverPoints,eventData:e(74907),selectPoints:e(24626),moduleType:"trace",name:"box",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(ee){ee.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(ee,D,e){var M=e(73972),k=e(71828),l=e(40094);function T(b,d,s,t,i){for(var r=i+"Layout",n=!1,o=0;o<s.length;o++){var a=s[o];if(M.traceIs(a,r)){n=!0;break}}n&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}ee.exports={supplyLayoutDefaults:function(b,d,s){T(0,0,s,function(t,i){return k.coerce(b,d,l,t,i)},"box")},_supply:T}},86047:function(ee,D,e){var M=e(39898),k=e(71828),l=e(91424);function T(s,t,i,r,n){var o,a,u=i.orientation==="h",p=t.val,c=t.pos,x=!!c.rangebreaks,g=r.bPos,h=r.wdPos||0,y=r.bPosPxOffset||0,v=i.whiskerwidth||0,m=i.showwhiskers!==!1,_=i.notched||!1,f=_?1-2*i.notchwidth:1;Array.isArray(r.bdPos)?(o=r.bdPos[0],a=r.bdPos[1]):(o=r.bdPos,a=r.bdPos);var S=s.selectAll("path.box").data(i.type!=="violin"||i.box.visible?k.identity:[]);S.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(w){if(w.empty)return M.select(this).attr("d","M0,0Z");var E=c.c2l(w.pos+g,!0),L=c.l2p(E-o)+y,C=c.l2p(E+a)+y,P=x?(L+C)/2:c.l2p(E)+y,z=i.whiskerwidth,G=x?L*z+(1-z)*P:c.l2p(E-h)+y,O=x?C*z+(1-z)*P:c.l2p(E+h)+y,H=c.l2p(E-o*f)+y,N=c.l2p(E+a*f)+y,B=i.sizemode==="sd",V=p.c2p(B?w.mean-w.sd:w.q1,!0),q=B?p.c2p(w.mean+w.sd,!0):p.c2p(w.q3,!0),te=k.constrain(B?p.c2p(w.mean,!0):p.c2p(w.med,!0),Math.min(V,q)+1,Math.max(V,q)-1),K=w.lf===void 0||i.boxpoints===!1||B,J=p.c2p(K?w.min:w.lf,!0),Y=p.c2p(K?w.max:w.uf,!0),W=p.c2p(w.ln,!0),Q=p.c2p(w.un,!0);u?M.select(this).attr("d","M"+te+","+H+"V"+N+"M"+V+","+L+"V"+C+(_?"H"+W+"L"+te+","+N+"L"+Q+","+C:"")+"H"+q+"V"+L+(_?"H"+Q+"L"+te+","+H+"L"+W+","+L:"")+"Z"+(m?"M"+V+","+P+"H"+J+"M"+q+","+P+"H"+Y+(v===0?"":"M"+J+","+G+"V"+O+"M"+Y+","+G+"V"+O):"")):M.select(this).attr("d","M"+H+","+te+"H"+N+"M"+L+","+V+"H"+C+(_?"V"+W+"L"+N+","+te+"L"+C+","+Q:"")+"V"+q+"H"+L+(_?"V"+Q+"L"+H+","+te+"L"+L+","+W:"")+"Z"+(m?"M"+P+","+V+"V"+J+"M"+P+","+q+"V"+Y+(v===0?"":"M"+G+","+J+"H"+O+"M"+G+","+Y+"H"+O):""))})}function b(s,t,i,r){var n=t.x,o=t.y,a=r.bdPos,u=r.bPos,p=i.boxpoints||i.points;k.seedPseudoRandom();var c=s.selectAll("g.points").data(p?function(g){return g.forEach(function(h){h.t=r,h.trace=i}),g}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var x=c.selectAll("path").data(function(g){var h,y,v=g.pts2,m=Math.max((g.max-g.min)/10,g.q3-g.q1),_=1e-9*m,f=.01*m,S=[],w=0;if(i.jitter){if(m===0)for(w=1,S=new Array(v.length),h=0;h<v.length;h++)S[h]=1;else for(h=0;h<v.length;h++){var E=Math.max(0,h-5),L=v[E].v,C=Math.min(v.length-1,h+5),P=v[C].v;p!=="all"&&(v[h].v<g.lf?P=Math.min(P,g.lf):L=Math.max(L,g.uf));var z=Math.sqrt(f*(C-E)/(P-L+_))||0;z=k.constrain(Math.abs(z),0,1),S.push(z),w=Math.max(z,w)}y=2*i.jitter/(w||1)}for(h=0;h<v.length;h++){var G=v[h],O=G.v,H=i.jitter?y*S[h]*(k.pseudoRandom()-.5):0,N=g.pos+u+a*(i.pointpos+H);i.orientation==="h"?(G.y=N,G.x=O):(G.x=N,G.y=O),p==="suspectedoutliers"&&O<g.uo&&O>g.lo&&(G.so=!0)}return v});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(l.translatePoints,n,o)}function d(s,t,i,r){var n,o,a=t.val,u=t.pos,p=!!u.rangebreaks,c=r.bPos,x=r.bPosPxOffset||0,g=i.boxmean||(i.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],o=r.bdPos[1]):(n=r.bdPos,o=r.bdPos);var h=s.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?k.identity:[]);h.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),h.exit().remove(),h.each(function(y){var v=u.c2l(y.pos+c,!0),m=u.l2p(v-n)+x,_=u.l2p(v+o)+x,f=p?(m+_)/2:u.l2p(v)+x,S=a.c2p(y.mean,!0),w=a.c2p(y.mean-y.sd,!0),E=a.c2p(y.mean+y.sd,!0);i.orientation==="h"?M.select(this).attr("d","M"+S+","+m+"V"+_+(g==="sd"?"m0,0L"+w+","+f+"L"+S+","+m+"L"+E+","+f+"Z":"")):M.select(this).attr("d","M"+m+","+S+"H"+_+(g==="sd"?"m0,0L"+f+","+w+"L"+m+","+S+"L"+f+","+E+"Z":""))})}ee.exports={plot:function(s,t,i,r){var n=s._context.staticPlot,o=t.xaxis,a=t.yaxis;k.makeTraceGroups(r,i,"trace boxes").each(function(u){var p,c,x=M.select(this),g=u[0],h=g.t,y=g.trace;h.wdPos=h.bdPos*y.whiskerwidth,y.visible!==!0||h.empty?x.remove():(y.orientation==="h"?(p=a,c=o):(p=o,c=a),T(x,{pos:p,val:c},y,h,n),b(x,{x:o,y:a},y,h),d(x,{pos:p,val:c},y,h))})},plotBoxAndWhiskers:T,plotPoints:b,plotBoxMean:d}},24626:function(ee){ee.exports=function(D,e){var M,k,l=D.cd,T=D.xaxis,b=D.yaxis,d=[];if(e===!1)for(M=0;M<l.length;M++)for(k=0;k<(l[M].pts||[]).length;k++)l[M].pts[k].selected=0;else for(M=0;M<l.length;M++)for(k=0;k<(l[M].pts||[]).length;k++){var s=l[M].pts[k],t=T.c2p(s.x),i=b.c2p(s.y);e.contains([t,i],null,s.i,D)?(d.push({pointNumber:s.i,x:T.c2d(s.x),y:b.c2d(s.y)}),s.selected=1):s.selected=0}return d}},58063:function(ee,D,e){var M=e(39898),k=e(7901),l=e(91424);ee.exports={style:function(T,b,d){var s=d||M.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=M.select(this),r=t[0].trace,n=r.line.width;function o(p,c,x,g){p.style("stroke-width",c+"px").call(k.stroke,x).call(k.fill,g)}var a=i.selectAll("path.box");if(r.type==="candlestick")a.each(function(p){if(!p.empty){var c=M.select(this),x=r[p.dir];o(c,x.line.width,x.line.color,x.fillcolor),c.style("opacity",r.selectedpoints&&!p.selected?.3:1)}});else{o(a,n,r.line.color,r.fillcolor),i.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(k.stroke,r.line.color);var u=i.selectAll("path.point");l.pointStyle(u,r,T)}})},styleOnSelect:function(T,b,d){var s=b[0].trace,t=d.selectAll("path.point");s.selectedpoints?l.selectedPointStyle(t,s):l.pointStyle(t,s,T)}}},75343:function(ee,D,e){var M=e(71828).extendFlat,k=e(12663).axisHoverFormat,l=e(2522),T=e(53522);function b(d){return{line:{color:M({},T.line.color,{dflt:d}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}ee.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:l.x,open:l.open,high:l.high,low:l.low,close:l.close,line:{width:M({},T.line.width,{}),editType:"style"},increasing:b(l.increasing.line.color.dflt),decreasing:b(l.decreasing.line.color.dflt),text:l.text,hovertext:l.hovertext,whiskerwidth:M({},T.whiskerwidth,{dflt:0}),hoverlabel:l.hoverlabel}},41197:function(ee,D,e){var M=e(71828),k=e(89298),l=e(42973),T=e(3485).calcCommon;function b(d,s,t,i){return{min:t,q1:Math.min(d,i),med:i,q3:Math.max(d,i),max:s}}ee.exports=function(d,s){var t=d._fullLayout,i=k.getFromId(d,s.xaxis),r=k.getFromId(d,s.yaxis),n=i.makeCalcdata(s,"x"),o=l(s,i,"x",n).vals,a=T(d,s,n,o,r,b);return a.length?(M.extendFlat(a[0].t,{num:t._numBoxes,dPos:M.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,a):[{t:{empty:!0}}]}},1026:function(ee,D,e){var M=e(71828),k=e(7901),l=e(14555),T=e(73927),b=e(75343);function d(s,t,i,r){var n=i(r+".line.color");i(r+".line.width",t.line.width),i(r+".fillcolor",k.addOpacity(n,.5))}ee.exports=function(s,t,i,r){function n(o,a){return M.coerce(s,t,b,o,a)}l(s,t,n,r)?(T(s,t,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),d(0,t,n,"increasing"),d(0,t,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0):t.visible=!1}},91815:function(ee,D,e){ee.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(75343),layoutAttributes:e(40094),supplyLayoutDefaults:e(4199).supplyLayoutDefaults,crossTraceCalc:e(37188).crossTraceCalc,supplyDefaults:e(1026),calc:e(41197),plot:e(86047).plot,layerName:"boxlayer",style:e(58063).style,hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},13145:function(ee,D,e){var M=e(11500),k=e(44467);ee.exports=function(l,T,b,d,s){d("a")||(d("da"),d("a0")),d("b")||(d("db"),d("b0")),function(t,i,r,n){["aaxis","baxis"].forEach(function(o){var a=o.charAt(0),u=t[o]||{},p=k.newContainer(i,o),c={noTicklabelstep:!0,tickfont:"x",id:a+"axis",letter:a,font:i.font,name:o,data:t[a],calendar:i.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};M(u,p,c),p._categories=p._categories||[],t[o]||u.type==="-"||(t[o]={type:u.type})})}(l,T,b,s)}},402:function(ee,D,e){var M=e(71828).isArrayOrTypedArray;function k(l,T){if(!M(l)||T>=10)return null;for(var b=1/0,d=-1/0,s=l.length,t=0;t<s;t++){var i=l[t];if(M(i)){var r=k(i,T+1);r&&(b=Math.min(r[0],b),d=Math.max(r[1],d))}else b=Math.min(i,b),d=Math.max(i,d)}return[b,d]}ee.exports=function(l){return k(l,0)}},99798:function(ee,D,e){var M=e(41940),k=e(1928),l=e(22399),T=M({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=l.defaultLine,ee.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:l.defaultLine,editType:"plot"},transforms:void 0}},4536:function(ee,D,e){var M=e(71828).isArrayOrTypedArray;ee.exports=function(k,l,T,b){var d,s,t,i,r,n,o,a,u,p,c,x,g,h=M(T)?"a":"b",y=(h==="a"?k.aaxis:k.baxis).smoothing,v=h==="a"?k.a2i:k.b2j,m=h==="a"?T:b,_=h==="a"?b:T,f=h==="a"?l.a.length:l.b.length,S=h==="a"?l.b.length:l.a.length,w=Math.floor(h==="a"?k.b2j(_):k.a2i(_)),E=h==="a"?function(te){return k.evalxy([],te,w)}:function(te){return k.evalxy([],w,te)};y&&(t=Math.max(0,Math.min(S-2,w)),i=w-t,s=h==="a"?function(te,K){return k.dxydi([],te,t,K,i)}:function(te,K){return k.dxydj([],t,te,i,K)});var L=v(m[0]),C=v(m[1]),P=L<C?1:-1,z=1e-8*(C-L),G=P>0?Math.floor:Math.ceil,O=P>0?Math.ceil:Math.floor,H=P>0?Math.min:Math.max,N=P>0?Math.max:Math.min,B=G(L+z),V=O(C-z),q=[[o=E(L)]];for(d=B;d*P<V*P;d+=P)r=[],c=N(L,d),g=(x=H(C,d+P))-c,n=Math.max(0,Math.min(f-2,Math.floor(.5*(c+x)))),a=E(x),y&&(u=s(n,c-n),p=s(n,x-n),r.push([o[0]+u[0]/3*g,o[1]+u[1]/3*g]),r.push([a[0]-p[0]/3*g,a[1]-p[1]/3*g])),r.push(a),q.push(r),o=a;return q}},1928:function(ee,D,e){var M=e(41940),k=e(22399),l=e(13838),T=e(12663).descriptionWithDates,b=e(30962).overrideAll,d=e(79952).P,s=e(1426).extendFlat;ee.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:l.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},l.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:b(l.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},d,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},d,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(ee,D,e){var M=e(99798),k=e(7901).addOpacity,l=e(73972),T=e(71828),b=e(26218),d=e(96115),s=e(89426),t=e(15258),i=e(21994),r=e(4322);ee.exports=function(n,o,a){var u=a.letter,p=a.font||{},c=M[u+"axis"];function x(P,z){return T.coerce(n,o,c,P,z)}function g(P,z){return T.coerce2(n,o,c,P,z)}a.name&&(o._name=a.name,o._id=a.name),x("autotypenumbers",a.autotypenumbersDflt);var h=x("type");h==="-"&&(a.data&&function(P,z){if(P.type==="-"){var G=P._id.charAt(0),O=P[G+"calendar"];P.type=r(z,O,{autotypenumbers:P.autotypenumbers})}}(o,a.data),o.type==="-"?o.type="linear":h=n.type=o.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",u+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),o.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),o._hovertitle=u,h==="date"&&l.getComponentMethod("calendars","handleDefaults")(n,o,"calendar",a.calendar),i(o,a.fullLayout),o.c2p=T.identity;var y=x("color",a.dfltColor),v=y===n.color?y:p.color;x("title.text")&&(T.coerceFont(x,"title.font",{family:p.family,size:T.bigFont(p.size),color:v}),x("title.offset")),x("tickangle"),x("autorange",!o.isValidRange(n.range))&&x("rangemode"),x("range"),o.cleanRange(),x("fixedrange"),b(n,o,x,h),s(n,o,x,h,a),d(n,o,x,h,a),t(n,o,x,{data:a.data,dataAttr:u});var m=g("gridcolor",k(y,.3)),_=g("gridwidth"),f=g("griddash"),S=x("showgrid");S||(delete o.gridcolor,delete o.gridwidth,delete o.griddash);var w=g("startlinecolor",y),E=g("startlinewidth",_);x("startline",o.showgrid||!!w||!!E)||(delete o.startlinecolor,delete o.startlinewidth);var L=g("endlinecolor",y),C=g("endlinewidth",_);return x("endline",o.showgrid||!!L||!!C)||(delete o.endlinecolor,delete o.endlinewidth),S?(x("minorgridcount"),x("minorgridwidth",_),x("minorgriddash",f),x("minorgridcolor",k(m,.06)),o.minorgridcount||(delete o.minorgridwidth,delete o.minorgriddash,delete o.minorgridcolor)):(delete o.gridcolor,delete o.gridwidth,delete o.griddash),o.showticklabels==="none"&&(delete o.tickfont,delete o.tickangle,delete o.showexponent,delete o.exponentformat,delete o.minexponent,delete o.tickformat,delete o.showticksuffix,delete o.showtickprefix),o.showticksuffix||delete o.ticksuffix,o.showtickprefix||delete o.tickprefix,x("tickmode"),o}},25281:function(ee,D,e){var M=e(89298),k=e(71828).isArray1D,l=e(53824),T=e(402),b=e(20347),d=e(83311),s=e(44807),t=e(4742),i=e(72505),r=e(68296),n=e(11435);ee.exports=function(o,a){var u=M.getFromId(o,a.xaxis),p=M.getFromId(o,a.yaxis),c=a.aaxis,x=a.baxis,g=a.x,h=a.y,y=[];g&&k(g)&&y.push("x"),h&&k(h)&&y.push("y"),y.length&&r(a,c,x,"a","b",y);var v=a._a=a._a||a.a,m=a._b=a._b||a.b;g=a._x||a.x,h=a._y||a.y;var _={};if(a._cheater){var f=c.cheatertype==="index"?v.length:v,S=x.cheatertype==="index"?m.length:m;g=l(f,S,a.cheaterslope)}a._x=g=t(g),a._y=h=t(h),i(g,v,m),i(h,v,m),n(a),a.setScale();var w=T(g),E=T(h),L=.5*(w[1]-w[0]),C=.5*(w[1]+w[0]),P=.5*(E[1]-E[0]),z=.5*(E[1]+E[0]),G=1.3;return w=[C-L*G,C+L*G],E=[z-P*G,z+P*G],a._extremes[u._id]=M.findExtremes(u,w,{padded:!0}),a._extremes[p._id]=M.findExtremes(p,E,{padded:!0}),b(a,"a","b"),b(a,"b","a"),d(a,c),d(a,x),_.clipsegments=s(a._xctrl,a._yctrl,c,x),_.x=g,_.y=h,_.a=v,_.b=m,[_]}},44807:function(ee){ee.exports=function(D,e,M,k){var l,T,b,d=[],s=!!M.smoothing,t=!!k.smoothing,i=D[0].length-1,r=D.length-1;for(l=0,T=[],b=[];l<=i;l++)T[l]=D[0][l],b[l]=e[0][l];for(d.push({x:T,y:b,bicubic:s}),l=0,T=[],b=[];l<=r;l++)T[l]=D[l][i],b[l]=e[l][i];for(d.push({x:T,y:b,bicubic:t}),l=i,T=[],b=[];l>=0;l--)T[i-l]=D[r][l],b[i-l]=e[r][l];for(d.push({x:T,y:b,bicubic:s}),l=r,T=[],b=[];l>=0;l--)T[r-l]=D[l][0],b[r-l]=e[l][0];return d.push({x:T,y:b,bicubic:t}),d}},20347:function(ee,D,e){var M=e(89298),k=e(1426).extendFlat;ee.exports=function(l,T,b){var d,s,t,i,r,n,o,a,u,p,c,x,g,h,y=l["_"+T],v=l[T+"axis"],m=v._gridlines=[],_=v._minorgridlines=[],f=v._boundarylines=[],S=l["_"+b],w=l[b+"axis"];v.tickmode==="array"&&(v.tickvals=y.slice());var E=l._xctrl,L=l._yctrl,C=E[0].length,P=E.length,z=l._a.length,G=l._b.length;M.prepTicks(v),v.tickmode==="array"&&delete v.tickvals;var O=v.smoothing?3:1;function H(B){var V,q,te,K,J,Y,W,Q,ne,re,ae,ue,pe=[],ge=[],_e={};if(T==="b")for(q=l.b2j(B),te=Math.floor(Math.max(0,Math.min(G-2,q))),K=q-te,_e.length=G,_e.crossLength=z,_e.xy=function(me){return l.evalxy([],me,q)},_e.dxy=function(me,ve){return l.dxydi([],me,te,ve,K)},V=0;V<z;V++)Y=Math.min(z-2,V),W=V-Y,Q=l.evalxy([],V,q),w.smoothing&&V>0&&(ne=l.dxydi([],V-1,te,0,K),pe.push(J[0]+ne[0]/3),ge.push(J[1]+ne[1]/3),re=l.dxydi([],V-1,te,1,K),pe.push(Q[0]-re[0]/3),ge.push(Q[1]-re[1]/3)),pe.push(Q[0]),ge.push(Q[1]),J=Q;else for(V=l.a2i(B),Y=Math.floor(Math.max(0,Math.min(z-2,V))),W=V-Y,_e.length=z,_e.crossLength=G,_e.xy=function(me){return l.evalxy([],V,me)},_e.dxy=function(me,ve){return l.dxydj([],Y,me,W,ve)},q=0;q<G;q++)te=Math.min(G-2,q),K=q-te,Q=l.evalxy([],V,q),w.smoothing&&q>0&&(ae=l.dxydj([],Y,q-1,W,0),pe.push(J[0]+ae[0]/3),ge.push(J[1]+ae[1]/3),ue=l.dxydj([],Y,q-1,W,1),pe.push(Q[0]-ue[0]/3),ge.push(Q[1]-ue[1]/3)),pe.push(Q[0]),ge.push(Q[1]),J=Q;return _e.axisLetter=T,_e.axis=v,_e.crossAxis=w,_e.value=B,_e.constvar=b,_e.index=a,_e.x=pe,_e.y=ge,_e.smoothing=w.smoothing,_e}function N(B){var V,q,te,K,J,Y=[],W=[],Q={};if(Q.length=y.length,Q.crossLength=S.length,T==="b")for(te=Math.max(0,Math.min(G-2,B)),J=Math.min(1,Math.max(0,B-te)),Q.xy=function(ne){return l.evalxy([],ne,B)},Q.dxy=function(ne,re){return l.dxydi([],ne,te,re,J)},V=0;V<C;V++)Y[V]=E[B*O][V],W[V]=L[B*O][V];else for(q=Math.max(0,Math.min(z-2,B)),K=Math.min(1,Math.max(0,B-q)),Q.xy=function(ne){return l.evalxy([],B,ne)},Q.dxy=function(ne,re){return l.dxydj([],q,ne,K,re)},V=0;V<P;V++)Y[V]=E[V][B*O],W[V]=L[V][B*O];return Q.axisLetter=T,Q.axis=v,Q.crossAxis=w,Q.value=y[B],Q.constvar=b,Q.index=B,Q.x=Y,Q.y=W,Q.smoothing=w.smoothing,Q}if(v.tickmode==="array"){for(i=5e-15,n=(r=[Math.floor((y.length-1-v.arraytick0)/v.arraydtick*(1+i)),Math.ceil(-v.arraytick0/v.arraydtick/(1+i))].sort(function(B,V){return B-V}))[0]-1,o=r[1]+1,a=n;a<o;a++)(s=v.arraytick0+v.arraydtick*a)<0||s>y.length-1||m.push(k(N(s),{color:v.gridcolor,width:v.gridwidth,dash:v.griddash}));for(a=n;a<o;a++)if(t=v.arraytick0+v.arraydtick*a,c=Math.min(t+v.arraydtick,y.length-1),!(t<0||t>y.length-1||c<0||c>y.length-1))for(x=y[t],g=y[c],d=0;d<v.minorgridcount;d++)(h=c-t)<=0||(p=x+(g-x)*(d+1)/(v.minorgridcount+1)*(v.arraydtick/h))<y[0]||p>y[y.length-1]||_.push(k(H(p),{color:v.minorgridcolor,width:v.minorgridwidth,dash:v.minorgriddash}));v.startline&&f.push(k(N(0),{color:v.startlinecolor,width:v.startlinewidth})),v.endline&&f.push(k(N(y.length-1),{color:v.endlinecolor,width:v.endlinewidth}))}else{for(i=5e-15,n=(r=[Math.floor((y[y.length-1]-v.tick0)/v.dtick*(1+i)),Math.ceil((y[0]-v.tick0)/v.dtick/(1+i))].sort(function(B,V){return B-V}))[0],o=r[1],a=n;a<=o;a++)u=v.tick0+v.dtick*a,m.push(k(H(u),{color:v.gridcolor,width:v.gridwidth,dash:v.griddash}));for(a=n-1;a<o+1;a++)for(u=v.tick0+v.dtick*a,d=0;d<v.minorgridcount;d++)(p=u+v.dtick*(d+1)/(v.minorgridcount+1))<y[0]||p>y[y.length-1]||_.push(k(H(p),{color:v.minorgridcolor,width:v.minorgridwidth,dash:v.minorgriddash}));v.startline&&f.push(k(H(y[0]),{color:v.startlinecolor,width:v.startlinewidth})),v.endline&&f.push(k(H(y[y.length-1]),{color:v.endlinecolor,width:v.endlinewidth}))}}},83311:function(ee,D,e){var M=e(89298),k=e(1426).extendFlat;ee.exports=function(l,T){var b,d,s,t=T._labels=[],i=T._gridlines;for(b=0;b<i.length;b++)s=i[b],["start","both"].indexOf(T.showticklabels)!==-1&&(d=M.tickText(T,s.value),k(d,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(d)),["end","both"].indexOf(T.showticklabels)!==-1&&(d=M.tickText(T,s.value),k(d,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(d))}},42048:function(ee){ee.exports=function(D,e,M,k){var l=D[0]-e[0],T=D[1]-e[1],b=M[0]-e[0],d=M[1]-e[1],s=Math.pow(l*l+T*T,.25),t=Math.pow(b*b+d*d,.25),i=(t*t*l-s*s*b)*k,r=(t*t*T-s*s*d)*k,n=t*(s+t)*3,o=s*(s+t)*3;return[[e[0]+(n&&i/n),e[1]+(n&&r/n)],[e[0]-(o&&i/o),e[1]-(o&&r/o)]]}},53824:function(ee,D,e){var M=e(71828).isArrayOrTypedArray;ee.exports=function(k,l,T){var b,d,s,t,i,r,n=[],o=M(k)?k.length:k,a=M(l)?l.length:l,u=M(k)?k:null,p=M(l)?l:null;u&&(s=(u.length-1)/(u[u.length-1]-u[0])/(o-1)),p&&(t=(p.length-1)/(p[p.length-1]-p[0])/(a-1));var c=1/0,x=-1/0;for(d=0;d<a;d++)for(n[d]=[],i=p?(p[d]-p[0])*t:d/(a-1),b=0;b<o;b++)r=(u?(u[b]-u[0])*s:b/(o-1))-i*T,c=Math.min(r,c),x=Math.max(r,x),n[d][b]=r;var g=1/(x-c),h=-c*g;for(d=0;d<a;d++)for(b=0;b<o;b++)n[d][b]=g*n[d][b]+h;return n}},45664:function(ee,D,e){var M=e(42048),k=e(71828).ensureArray;function l(T,b,d){var s=-.5*d[0]+1.5*b[0],t=-.5*d[1]+1.5*b[1];return[(2*s+T[0])/3,(2*t+T[1])/3]}ee.exports=function(T,b,d,s,t,i){var r,n,o,a,u,p,c,x,g,h,y=d[0].length,v=d.length,m=t?3*y-2:y,_=i?3*v-2:v;for(T=k(T,_),b=k(b,_),o=0;o<_;o++)T[o]=k(T[o],m),b[o]=k(b[o],m);for(n=0,a=0;n<v;n++,a+=i?3:1)for(u=T[a],p=b[a],c=d[n],x=s[n],r=0,o=0;r<y;r++,o+=t?3:1)u[o]=c[r],p[o]=x[r];if(t)for(n=0,a=0;n<v;n++,a+=i?3:1){for(r=1,o=3;r<y-1;r++,o+=3)g=M([d[n][r-1],s[n][r-1]],[d[n][r],s[n][r]],[d[n][r+1],s[n][r+1]],t),T[a][o-1]=g[0][0],b[a][o-1]=g[0][1],T[a][o+1]=g[1][0],b[a][o+1]=g[1][1];h=l([T[a][0],b[a][0]],[T[a][2],b[a][2]],[T[a][3],b[a][3]]),T[a][1]=h[0],b[a][1]=h[1],h=l([T[a][m-1],b[a][m-1]],[T[a][m-3],b[a][m-3]],[T[a][m-4],b[a][m-4]]),T[a][m-2]=h[0],b[a][m-2]=h[1]}if(i)for(o=0;o<m;o++){for(a=3;a<_-3;a+=3)g=M([T[a-3][o],b[a-3][o]],[T[a][o],b[a][o]],[T[a+3][o],b[a+3][o]],i),T[a-1][o]=g[0][0],b[a-1][o]=g[0][1],T[a+1][o]=g[1][0],b[a+1][o]=g[1][1];h=l([T[0][o],b[0][o]],[T[2][o],b[2][o]],[T[3][o],b[3][o]]),T[1][o]=h[0],b[1][o]=h[1],h=l([T[_-1][o],b[_-1][o]],[T[_-3][o],b[_-3][o]],[T[_-4][o],b[_-4][o]]),T[_-2][o]=h[0],b[_-2][o]=h[1]}if(t&&i)for(a=1;a<_;a+=(a+1)%3==0?2:1){for(o=3;o<m-3;o+=3)g=M([T[a][o-3],b[a][o-3]],[T[a][o],b[a][o]],[T[a][o+3],b[a][o+3]],t),T[a][o-1]=.5*(T[a][o-1]+g[0][0]),b[a][o-1]=.5*(b[a][o-1]+g[0][1]),T[a][o+1]=.5*(T[a][o+1]+g[1][0]),b[a][o+1]=.5*(b[a][o+1]+g[1][1]);h=l([T[a][0],b[a][0]],[T[a][2],b[a][2]],[T[a][3],b[a][3]]),T[a][1]=.5*(T[a][1]+h[0]),b[a][1]=.5*(b[a][1]+h[1]),h=l([T[a][m-1],b[a][m-1]],[T[a][m-3],b[a][m-3]],[T[a][m-4],b[a][m-4]]),T[a][m-2]=.5*(T[a][m-2]+h[0]),b[a][m-2]=.5*(b[a][m-2]+h[1])}return[T,b]}},35509:function(ee){ee.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(ee){ee.exports=function(D,e,M){return e&&M?function(k,l,T,b,d){var s,t,i,r,n,o;k||(k=[]),l*=3,T*=3;var a=b*b,u=1-b,p=u*u,c=u*b*2,x=-3*p,g=3*(p-c),h=3*(c-a),y=3*a,v=d*d,m=v*d,_=1-d,f=_*_,S=f*_;for(o=0;o<D.length;o++)s=x*(n=D[o])[T][l]+g*n[T][l+1]+h*n[T][l+2]+y*n[T][l+3],t=x*n[T+1][l]+g*n[T+1][l+1]+h*n[T+1][l+2]+y*n[T+1][l+3],i=x*n[T+2][l]+g*n[T+2][l+1]+h*n[T+2][l+2]+y*n[T+2][l+3],r=x*n[T+3][l]+g*n[T+3][l+1]+h*n[T+3][l+2]+y*n[T+3][l+3],k[o]=S*s+3*(f*d*t+_*v*i)+m*r;return k}:e?function(k,l,T,b,d){var s,t,i,r;k||(k=[]),l*=3;var n=b*b,o=1-b,a=o*o,u=o*b*2,p=-3*a,c=3*(a-u),x=3*(u-n),g=3*n,h=1-d;for(i=0;i<D.length;i++)s=p*(r=D[i])[T][l]+c*r[T][l+1]+x*r[T][l+2]+g*r[T][l+3],t=p*r[T+1][l]+c*r[T+1][l+1]+x*r[T+1][l+2]+g*r[T+1][l+3],k[i]=h*s+d*t;return k}:M?function(k,l,T,b,d){var s,t,i,r,n,o;k||(k=[]),T*=3;var a=d*d,u=a*d,p=1-d,c=p*p,x=c*p;for(n=0;n<D.length;n++)s=(o=D[n])[T][l+1]-o[T][l],t=o[T+1][l+1]-o[T+1][l],i=o[T+2][l+1]-o[T+2][l],r=o[T+3][l+1]-o[T+3][l],k[n]=x*s+3*(c*d*t+p*a*i)+u*r;return k}:function(k,l,T,b,d){var s,t,i,r;k||(k=[]);var n=1-d;for(i=0;i<D.length;i++)s=(r=D[i])[T][l+1]-r[T][l],t=r[T+1][l+1]-r[T+1][l],k[i]=n*s+d*t;return k}}},73057:function(ee){ee.exports=function(D,e,M){return e&&M?function(k,l,T,b,d){var s,t,i,r,n,o;k||(k=[]),l*=3,T*=3;var a=b*b,u=a*b,p=1-b,c=p*p,x=c*p,g=d*d,h=1-d,y=h*h,v=h*d*2,m=-3*y,_=3*(y-v),f=3*(v-g),S=3*g;for(o=0;o<D.length;o++)s=m*(n=D[o])[T][l]+_*n[T+1][l]+f*n[T+2][l]+S*n[T+3][l],t=m*n[T][l+1]+_*n[T+1][l+1]+f*n[T+2][l+1]+S*n[T+3][l+1],i=m*n[T][l+2]+_*n[T+1][l+2]+f*n[T+2][l+2]+S*n[T+3][l+2],r=m*n[T][l+3]+_*n[T+1][l+3]+f*n[T+2][l+3]+S*n[T+3][l+3],k[o]=x*s+3*(c*b*t+p*a*i)+u*r;return k}:e?function(k,l,T,b,d){var s,t,i,r,n,o;k||(k=[]),l*=3;var a=d*d,u=a*d,p=1-d,c=p*p,x=c*p;for(n=0;n<D.length;n++)s=(o=D[n])[T+1][l]-o[T][l],t=o[T+1][l+1]-o[T][l+1],i=o[T+1][l+2]-o[T][l+2],r=o[T+1][l+3]-o[T][l+3],k[n]=x*s+3*(c*d*t+p*a*i)+u*r;return k}:M?function(k,l,T,b,d){var s,t,i,r;k||(k=[]),T*=3;var n=1-b,o=d*d,a=1-d,u=a*a,p=a*d*2,c=-3*u,x=3*(u-p),g=3*(p-o),h=3*o;for(i=0;i<D.length;i++)s=c*(r=D[i])[T][l]+x*r[T+1][l]+g*r[T+2][l]+h*r[T+3][l],t=c*r[T][l+1]+x*r[T+1][l+1]+g*r[T+2][l+1]+h*r[T+3][l+1],k[i]=n*s+b*t;return k}:function(k,l,T,b,d){var s,t,i,r;k||(k=[]);var n=1-b;for(i=0;i<D.length;i++)s=(r=D[i])[T+1][l]-r[T][l],t=r[T+1][l+1]-r[T][l+1],k[i]=n*s+b*t;return k}}},20349:function(ee){ee.exports=function(D,e,M,k,l){var T=e-2,b=M-2;return k&&l?function(d,s,t){var i,r,n,o,a,u;d||(d=[]);var p=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-p)),g=Math.max(0,Math.min(1,t-c));p*=3,c*=3;var h=x*x,y=h*x,v=1-x,m=v*v,_=m*v,f=g*g,S=f*g,w=1-g,E=w*w,L=E*w;for(u=0;u<D.length;u++)i=_*(a=D[u])[c][p]+3*(m*x*a[c][p+1]+v*h*a[c][p+2])+y*a[c][p+3],r=_*a[c+1][p]+3*(m*x*a[c+1][p+1]+v*h*a[c+1][p+2])+y*a[c+1][p+3],n=_*a[c+2][p]+3*(m*x*a[c+2][p+1]+v*h*a[c+2][p+2])+y*a[c+2][p+3],o=_*a[c+3][p]+3*(m*x*a[c+3][p+1]+v*h*a[c+3][p+2])+y*a[c+3][p+3],d[u]=L*i+3*(E*g*r+w*f*n)+S*o;return d}:k?function(d,s,t){d||(d=[]);var i,r,n,o,a,u,p=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-p)),g=Math.max(0,Math.min(1,t-c));p*=3;var h=x*x,y=h*x,v=1-x,m=v*v,_=m*v,f=1-g;for(a=0;a<D.length;a++)i=f*(u=D[a])[c][p]+g*u[c+1][p],r=f*u[c][p+1]+g*u[c+1][p+1],n=f*u[c][p+2]+g*u[c+1][p+1],o=f*u[c][p+3]+g*u[c+1][p+1],d[a]=_*i+3*(m*x*r+v*h*n)+y*o;return d}:l?function(d,s,t){d||(d=[]);var i,r,n,o,a,u,p=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-p)),g=Math.max(0,Math.min(1,t-c));c*=3;var h=g*g,y=h*g,v=1-g,m=v*v,_=m*v,f=1-x;for(a=0;a<D.length;a++)i=f*(u=D[a])[c][p]+x*u[c][p+1],r=f*u[c+1][p]+x*u[c+1][p+1],n=f*u[c+2][p]+x*u[c+2][p+1],o=f*u[c+3][p]+x*u[c+3][p+1],d[a]=_*i+3*(m*g*r+v*h*n)+y*o;return d}:function(d,s,t){d||(d=[]);var i,r,n,o,a=Math.max(0,Math.min(Math.floor(s),T)),u=Math.max(0,Math.min(Math.floor(t),b)),p=Math.max(0,Math.min(1,s-a)),c=Math.max(0,Math.min(1,t-u)),x=1-c,g=1-p;for(n=0;n<D.length;n++)i=g*(o=D[n])[u][a]+p*o[u][a+1],r=g*o[u+1][a]+p*o[u+1][a+1],d[n]=x*i+c*r;return d}}},92087:function(ee,D,e){var M=e(71828),k=e(19237),l=e(13145),T=e(99798),b=e(22399);ee.exports=function(d,s,t,i){function r(o,a){return M.coerce(d,s,T,o,a)}s._clipPathId="clip"+s.uid+"carpet";var n=r("color",b.defaultLine);M.coerceFont(r,"font"),r("carpet"),l(d,s,i,r,n),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(d,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope")):s.visible=!1}},21462:function(ee,D,e){ee.exports={attributes:e(99798),supplyDefaults:e(92087),plot:e(89740),calc:e(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(ee){ee.exports=function(D,e){for(var M,k=D._fullData.length,l=0;l<k;l++){var T=D._fullData[l];if(T.index!==e.index&&T.type==="carpet"&&(M||(M=T),T.carpet===e.carpet))return T}return M}},67961:function(ee){ee.exports=function(D,e,M){if(D.length===0)return"";var k,l=[],T=M?3:1;for(k=0;k<D.length;k+=T)l.push(D[k]+","+e[k]),M&&k<D.length-T&&(l.push("C"),l.push([D[k+1]+","+e[k+1],D[k+2]+","+e[k+2]+" "].join(" ")));return l.join(M?"":"L")}},27669:function(ee,D,e){var M=e(71828).isArrayOrTypedArray;ee.exports=function(k,l,T){var b;for(M(k)?k.length>l.length&&(k=k.slice(0,l.length)):k=[],b=0;b<l.length;b++)k[b]=T(l[b]);return k}},11651:function(ee){ee.exports=function(D,e,M,k,l,T){var b=l[0]*D.dpdx(e),d=l[1]*D.dpdy(M),s=1,t=1;if(T){var i=Math.sqrt(l[0]*l[0]+l[1]*l[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]),n=(l[0]*T[0]+l[1]*T[1])/i/r;t=Math.max(0,n)}var o=180*Math.atan2(d,b)/Math.PI;return o<-90?(o+=180,s=-s):o>90&&(o-=180,s=-s),{angle:o,flip:s,p:D.c2p(k,e,M),offsetMultplier:t}}},89740:function(ee,D,e){var M=e(39898),k=e(91424),l=e(27669),T=e(67961),b=e(11651),d=e(63893),s=e(71828),t=s.strRotate,i=s.strTranslate,r=e(18783);function n(c,x,g,h,y,v,m){var _="const-"+y+"-lines",f=g.selectAll("."+_).data(v);f.enter().append("path").classed(_,!0).style("vector-effect",m?"none":"non-scaling-stroke"),f.each(function(S){var w=S,E=w.x,L=w.y,C=l([],E,c.c2p),P=l([],L,x.c2p),z="M"+T(C,P,w.smoothing);M.select(this).attr("d",z).style("stroke-width",w.width).style("stroke",w.color).style("stroke-dasharray",k.dashStyle(w.dash,w.width)).style("fill","none")}),f.exit().remove()}function o(c,x,g,h,y,v,m,_){var f=v.selectAll("text."+_).data(m);f.enter().append("text").classed(_,!0);var S=0,w={};return f.each(function(E,L){var C;if(E.axis.tickangle==="auto")C=b(h,x,g,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;C=b(h,x,g,E.xy,[Math.cos(P),Math.sin(P)])}L||(w={angle:C.angle,flip:C.flip});var z=(E.endAnchor?-1:1)*C.flip,G=M.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(d.convertToTspans,c),O=k.bBox(this);G.attr("transform",i(C.p[0],C.p[1])+t(C.angle)+i(E.axis.labelpadding*z,.3*O.height)),S=Math.max(S,O.width+E.axis.labelpadding)}),f.exit().remove(),w.maxExtent=S,w}ee.exports=function(c,x,g,h){var y=c._context.staticPlot,v=x.xaxis,m=x.yaxis,_=c._fullLayout._clips;s.makeTraceGroups(h,g,"trace").each(function(f){var S=M.select(this),w=f[0],E=w.trace,L=E.aaxis,C=E.baxis,P=s.ensureSingle(S,"g","minorlayer"),z=s.ensureSingle(S,"g","majorlayer"),G=s.ensureSingle(S,"g","boundarylayer"),O=s.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),n(v,m,z,0,"a",L._gridlines,!0),n(v,m,z,0,"b",C._gridlines,!0),n(v,m,P,0,"a",L._minorgridlines,!0),n(v,m,P,0,"b",C._minorgridlines,!0),n(v,m,G,0,"a-boundary",L._boundarylines,y),n(v,m,G,0,"b-boundary",C._boundarylines,y);var H=o(c,v,m,E,0,O,L._labels,"a-label"),N=o(c,v,m,E,0,O,C._labels,"b-label");(function(B,V,q,te,K,J,Y,W){var Q,ne,re,ae,ue=s.aggNums(Math.min,null,q.a),pe=s.aggNums(Math.max,null,q.a),ge=s.aggNums(Math.min,null,q.b),_e=s.aggNums(Math.max,null,q.b);Q=.5*(ue+pe),ne=ge,re=q.ab2xy(Q,ne,!0),ae=q.dxyda_rough(Q,ne),Y.angle===void 0&&s.extendFlat(Y,b(q,K,J,re,q.dxydb_rough(Q,ne))),p(B,V,q,0,re,ae,q.aaxis,K,J,Y,"a-title"),Q=ue,ne=.5*(ge+_e),re=q.ab2xy(Q,ne,!0),ae=q.dxydb_rough(Q,ne),W.angle===void 0&&s.extendFlat(W,b(q,K,J,re,q.dxyda_rough(Q,ne))),p(B,V,q,0,re,ae,q.baxis,K,J,W,"b-title")})(c,O,E,0,v,m,H,N),function(B,V,q,te,K){var J,Y,W,Q,ne=q.select("#"+B._clipPathId);ne.size()||(ne=q.append("clipPath").classed("carpetclip",!0));var re=s.ensureSingle(ne,"path","carpetboundary"),ae=V.clipsegments,ue=[];for(Q=0;Q<ae.length;Q++)J=ae[Q],Y=l([],J.x,te.c2p),W=l([],J.y,K.c2p),ue.push(T(Y,W,J.bicubic));var pe="M"+ue.join("L")+"Z";ne.attr("id",B._clipPathId),re.attr("d",pe)}(E,w,_,v,m)})};var a=r.LINE_SPACING,u=(1-r.MID_SHIFT)/a+1;function p(c,x,g,h,y,v,m,_,f,S,w){var E=[];m.title.text&&E.push(m.title.text);var L=x.selectAll("text."+w).data(E),C=S.maxExtent;L.enter().append("text").classed(w,!0),L.each(function(){var P=b(g,_,f,y,v);["start","both"].indexOf(m.showticklabels)===-1&&(C=0);var z=m.title.font.size;C+=z+m.title.offset;var G=(S.angle+(S.flip<0?180:0)-P.angle+450)%360,O=G>90&&G<270,H=M.select(this);H.text(m.title.text).call(d.convertToTspans,c),O&&(C=(-d.lineCount(H)+u)*a*z-C),H.attr("transform",i(P.p[0],P.p[1])+t(P.angle)+i(0,C)).attr("text-anchor","middle").call(k.font,m.title.font)}),L.exit().remove()}},11435:function(ee,D,e){var M=e(35509),k=e(65888).findBin,l=e(45664),T=e(20349),b=e(54495),d=e(73057);ee.exports=function(s){var t=s._a,i=s._b,r=t.length,n=i.length,o=s.aaxis,a=s.baxis,u=t[0],p=t[r-1],c=i[0],x=i[n-1],g=t[t.length-1]-t[0],h=i[i.length-1]-i[0],y=g*M.RELATIVE_CULL_TOLERANCE,v=h*M.RELATIVE_CULL_TOLERANCE;u-=y,p+=y,c-=v,x+=v,s.isVisible=function(m,_){return m>u&&m<p&&_>c&&_<x},s.isOccluded=function(m,_){return m<u||m>p||_<c||_>x},s.setScale=function(){var m=s._x,_=s._y,f=l(s._xctrl,s._yctrl,m,_,o.smoothing,a.smoothing);s._xctrl=f[0],s._yctrl=f[1],s.evalxy=T([s._xctrl,s._yctrl],r,n,o.smoothing,a.smoothing),s.dxydi=b([s._xctrl,s._yctrl],o.smoothing,a.smoothing),s.dxydj=d([s._xctrl,s._yctrl],o.smoothing,a.smoothing)},s.i2a=function(m){var _=Math.max(0,Math.floor(m[0]),r-2),f=m[0]-_;return(1-f)*t[_]+f*t[_+1]},s.j2b=function(m){var _=Math.max(0,Math.floor(m[1]),r-2),f=m[1]-_;return(1-f)*i[_]+f*i[_+1]},s.ij2ab=function(m){return[s.i2a(m[0]),s.j2b(m[1])]},s.a2i=function(m){var _=Math.max(0,Math.min(k(m,t),r-2)),f=t[_],S=t[_+1];return Math.max(0,Math.min(r-1,_+(m-f)/(S-f)))},s.b2j=function(m){var _=Math.max(0,Math.min(k(m,i),n-2)),f=i[_],S=i[_+1];return Math.max(0,Math.min(n-1,_+(m-f)/(S-f)))},s.ab2ij=function(m){return[s.a2i(m[0]),s.b2j(m[1])]},s.i2c=function(m,_){return s.evalxy([],m,_)},s.ab2xy=function(m,_,f){if(!f&&(m<t[0]||m>t[r-1]|_<i[0]||_>i[n-1]))return[!1,!1];var S=s.a2i(m),w=s.b2j(_),E=s.evalxy([],S,w);if(f){var L,C,P,z,G=0,O=0,H=[];m<t[0]?(L=0,C=0,G=(m-t[0])/(t[1]-t[0])):m>t[r-1]?(L=r-2,C=1,G=(m-t[r-1])/(t[r-1]-t[r-2])):C=S-(L=Math.max(0,Math.min(r-2,Math.floor(S)))),_<i[0]?(P=0,z=0,O=(_-i[0])/(i[1]-i[0])):_>i[n-1]?(P=n-2,z=1,O=(_-i[n-1])/(i[n-1]-i[n-2])):z=w-(P=Math.max(0,Math.min(n-2,Math.floor(w)))),G&&(s.dxydi(H,L,P,C,z),E[0]+=H[0]*G,E[1]+=H[1]*G),O&&(s.dxydj(H,L,P,C,z),E[0]+=H[0]*O,E[1]+=H[1]*O)}return E},s.c2p=function(m,_,f){return[_.c2p(m[0]),f.c2p(m[1])]},s.p2x=function(m,_,f){return[_.p2c(m[0]),f.p2c(m[1])]},s.dadi=function(m){var _=Math.max(0,Math.min(t.length-2,m));return t[_+1]-t[_]},s.dbdj=function(m){var _=Math.max(0,Math.min(i.length-2,m));return i[_+1]-i[_]},s.dxyda=function(m,_,f,S){var w=s.dxydi(null,m,_,f,S),E=s.dadi(m,f);return[w[0]/E,w[1]/E]},s.dxydb=function(m,_,f,S){var w=s.dxydj(null,m,_,f,S),E=s.dbdj(_,S);return[w[0]/E,w[1]/E]},s.dxyda_rough=function(m,_,f){var S=g*(f||.1),w=s.ab2xy(m+S,_,!0),E=s.ab2xy(m-S,_,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dxydb_rough=function(m,_,f){var S=h*(f||.1),w=s.ab2xy(m,_+S,!0),E=s.ab2xy(m,_-S,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dpdx=function(m){return m._m},s.dpdy=function(m){return m._m}}},72505:function(ee,D,e){var M=e(71828);ee.exports=function(k,l,T){var b,d,s,t=[],i=[],r=k[0].length,n=k.length;function o(B,V){var q,te=0,K=0;return B>0&&(q=k[V][B-1])!==void 0&&(K++,te+=q),B<r-1&&(q=k[V][B+1])!==void 0&&(K++,te+=q),V>0&&(q=k[V-1][B])!==void 0&&(K++,te+=q),V<n-1&&(q=k[V+1][B])!==void 0&&(K++,te+=q),te/Math.max(1,K)}var a,u,p,c,x,g,h,y,v,m,_,f=0;for(b=0;b<r;b++)for(d=0;d<n;d++)k[d][b]===void 0&&(t.push(b),i.push(d),k[d][b]=o(b,d)),f=Math.max(f,Math.abs(k[d][b]));if(!t.length)return k;var S=0,w=0,E=t.length;do{for(S=0,s=0;s<E;s++){b=t[s],d=i[s];var L,C,P,z,G,O,H=0,N=0;b===0?(P=l[G=Math.min(r-1,2)],z=l[1],L=k[d][G],N+=(C=k[d][1])+(C-L)*(l[0]-z)/(z-P),H++):b===r-1&&(P=l[G=Math.max(0,r-3)],z=l[r-2],L=k[d][G],N+=(C=k[d][r-2])+(C-L)*(l[r-1]-z)/(z-P),H++),(b===0||b===r-1)&&d>0&&d<n-1&&(a=T[d+1]-T[d],N+=((u=T[d]-T[d-1])*k[d+1][b]+a*k[d-1][b])/(u+a),H++),d===0?(P=T[O=Math.min(n-1,2)],z=T[1],L=k[O][b],N+=(C=k[1][b])+(C-L)*(T[0]-z)/(z-P),H++):d===n-1&&(P=T[O=Math.max(0,n-3)],z=T[n-2],L=k[O][b],N+=(C=k[n-2][b])+(C-L)*(T[n-1]-z)/(z-P),H++),(d===0||d===n-1)&&b>0&&b<r-1&&(a=l[b+1]-l[b],N+=((u=l[b]-l[b-1])*k[d][b+1]+a*k[d][b-1])/(u+a),H++),H?N/=H:(p=l[b+1]-l[b],c=l[b]-l[b-1],y=(x=T[d+1]-T[d])*(g=T[d]-T[d-1])*(x+g),N=((h=p*c*(p+c))*(g*k[d+1][b]+x*k[d-1][b])+y*(c*k[d][b+1]+p*k[d][b-1]))/(y*(c+p)+h*(g+x))),S+=(m=(v=N-k[d][b])/f)*m,_=H?0:.85,k[d][b]+=v*(1+_)}S=Math.sqrt(S)}while(w++<100&&S>1e-5);return M.log("Smoother converged to",S,"after",w,"iterations"),k}},19237:function(ee,D,e){var M=e(71828).isArray1D;ee.exports=function(k,l,T){var b=T("x"),d=b&&b.length,s=T("y"),t=s&&s.length;if(!d&&!t)return!1;if(l._cheater=!b,d&&!M(b)||t&&!M(s))l._length=null;else{var i=d?b.length:1/0;t&&(i=Math.min(i,s.length)),l.a&&l.a.length&&(i=Math.min(i,l.a.length)),l.b&&l.b.length&&(i=Math.min(i,l.b.length)),l._length=i}return!0}},69568:function(ee,D,e){var M=e(5386).fF,k=e(19316),l=e(50693),T=e(9012),b=e(22399).defaultLine,d=e(1426).extendFlat,s=k.marker.line;ee.exports=d({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:d({},k.geojson,{}),featureidkey:k.featureidkey,text:d({},k.text,{}),hovertext:d({},k.hovertext,{}),marker:{line:{color:d({},s.color,{dflt:b}),width:d({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:d({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:d({},T.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(ee,D,e){var M=e(92770),k=e(50606).BADNUM,l=e(78803),T=e(75225),b=e(66279);function d(s){return s&&typeof s=="string"}ee.exports=function(s,t){var i,r=t._length,n=new Array(r);i=t.geojson?function(c){return d(c)||M(c)}:d;for(var o=0;o<r;o++){var a=n[o]={},u=t.locations[o],p=t.z[o];i(u)&&M(p)?(a.loc=u,a.z=p):(a.loc=null,a.z=k),a.index=o}return T(n,t),l(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(n,t),n}},61869:function(ee,D,e){var M=e(71828),k=e(1586),l=e(69568);ee.exports=function(T,b,d,s){function t(a,u){return M.coerce(T,b,l,a,u)}var i=t("locations"),r=t("z");if(i&&i.length&&M.isArrayOrTypedArray(r)&&r.length){b._length=Math.min(i.length,r.length);var n,o=t("geojson");(typeof o=="string"&&o!==""||M.isPlainObject(o))&&(n="geojson-id"),t("locationmode",n)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},92069:function(ee){ee.exports=function(D,e,M,k,l){D.location=e.location,D.z=e.z;var T=k[l];return T.fIn&&T.fIn.properties&&(D.properties=T.fIn.properties),D.ct=T.ct,D}},42300:function(ee,D,e){var M=e(89298),k=e(69568),l=e(71828).fillText;ee.exports=function(T,b,d){var s,t,i,r,n=T.cd,o=n[0].trace,a=T.subplot,u=[b,d],p=[b+360,d];for(t=0;t<n.length;t++)if(r=!1,(s=n[t])._polygons){for(i=0;i<s._polygons.length;i++)s._polygons[i].contains(u)&&(r=!r),s._polygons[i].contains(p)&&(r=!r);if(r)break}if(r&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=M.tickText(a.mockAxis,a.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(c,x,g){if(!x.hovertemplate){var h=g.hi||x.hoverinfo,y=String(g.loc),v=h==="all"?k.hoverinfo.flags:h.split("+"),m=v.indexOf("name")!==-1,_=v.indexOf("location")!==-1,f=v.indexOf("z")!==-1,S=v.indexOf("text")!==-1,w=[];!m&&_?c.nameOverride=y:(m&&(c.nameOverride=x.name),_&&w.push(y)),f&&w.push(c.zLabel),S&&l(g,x,w),c.extraText=w.join("<br>")}}(T,o,s),[T]}},51319:function(ee,D,e){ee.exports={attributes:e(69568),supplyDefaults:e(61869),colorbar:e(61243),calc:e(38675),calcGeoJSON:e(99841).calcGeoJSON,plot:e(99841).plot,style:e(99636).style,styleOnSelect:e(99636).styleOnSelect,hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),moduleType:"trace",name:"choropleth",basePlotModule:e(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(ee,D,e){var M=e(39898),k=e(71828),l=e(41327),T=e(90973).getTopojsonFeatures,b=e(71739).findExtremes,d=e(99636).style;ee.exports={calcGeoJSON:function(s,t){for(var i=s[0].trace,r=t[i.geo],n=r._subplot,o=i.locationmode,a=i._length,u=o==="geojson-id"?l.extractTraceFeature(s):T(i,n.topojson),p=[],c=[],x=0;x<a;x++){var g=s[x],h=o==="geojson-id"?g.fOut:l.locationToFeature(o,g.loc,u);if(h){g.geojson=h,g.ct=h.properties.ct,g._polygons=l.feature2polygons(h);var y=l.computeBbox(h);p.push(y[0],y[2]),c.push(y[1],y[3])}else g.geojson=null}if(r.fitbounds==="geojson"&&o==="geojson-id"){var v=l.computeBbox(l.getTraceGeojson(i));p=[v[0],v[2]],c=[v[1],v[3]]}var m={padded:!0};i._extremes.lon=b(r.lonaxis._ax,p,m),i._extremes.lat=b(r.lataxis._ax,c,m)},plot:function(s,t,i){var r=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,i,"trace choropleth").each(function(n){var o=M.select(this).selectAll("path.choroplethlocation").data(k.identity);o.enter().append("path").classed("choroplethlocation",!0),o.exit().remove(),d(s,n)})}}},81253:function(ee){ee.exports=function(D,e){var M,k,l,T,b,d=D.cd,s=D.xaxis,t=D.yaxis,i=[];if(e===!1)for(M=0;M<d.length;M++)d[M].selected=0;else for(M=0;M<d.length;M++)(l=(k=d[M]).ct)&&(T=s.c2p(l),b=t.c2p(l),e.contains([T,b],null,M,D)?(i.push({pointNumber:M,lon:l[0],lat:l[1]}),k.selected=1):k.selected=0);return i}},99636:function(ee,D,e){var M=e(39898),k=e(7901),l=e(91424),T=e(21081);function b(d,s){var t=s[0].trace,i=s[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},n=r.line||{},o=T.makeColorScaleFuncFromTrace(t);i.each(function(a){M.select(this).attr("fill",o(a.z)).call(k.stroke,a.mlc||n.color).call(l.dashLine,"",a.mlw||n.width||0).style("opacity",r.opacity)}),l.selectedPointStyle(i,t)}ee.exports={style:function(d,s){s&&b(0,s)},styleOnSelect:function(d,s){var t=s[0].node3,i=s[0].trace;i.selectedpoints?l.selectedPointStyle(t.selectAll(".choroplethlocation"),i):b(0,s)}}},64496:function(ee,D,e){var M=e(69568),k=e(50693),l=e(5386).fF,T=e(9012),b=e(1426).extendFlat;ee.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:b({},M.marker.line.color,{editType:"plot"}),width:b({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:l({},{keys:["properties"]}),showlegend:b({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(ee,D,e){var M=e(92770),k=e(71828),l=e(21081),T=e(91424),b=e(18214).makeBlank,d=e(41327);function s(t){var i,r=t[0].trace,n=r._opts;if(r.selectedpoints){for(var o=T.makeSelectedPointStyleFns(r),a=0;a<t.length;a++){var u=t[a];u.fOut&&(u.fOut.properties.mo2=o.selectedOpacityFn(u))}i={type:"identity",property:"mo2"}}else i=k.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return k.extendFlat(n.fill.paint,{"fill-opacity":i}),k.extendFlat(n.line.paint,{"line-opacity":i}),n}ee.exports={convert:function(t){var i=t[0].trace,r=i.visible===!0&&i._length!==0,n={layout:{visibility:"none"},paint:{}},o={layout:{visibility:"none"},paint:{}},a=i._opts={fill:n,line:o,geojson:b()};if(!r)return a;var u=d.extractTraceFeature(t);if(!u)return a;var p,c,x,g=l.makeColorScaleFuncFromTrace(i),h=i.marker,y=h.line||{};k.isArrayOrTypedArray(h.opacity)&&(p=function(w){var E=w.mo;return M(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(y.color)&&(c=function(w){return w.mlc}),k.isArrayOrTypedArray(y.width)&&(x=function(w){return w.mlw});for(var v=0;v<t.length;v++){var m=t[v],_=m.fOut;if(_){var f=_.properties;f.fc=g(m.z),p&&(f.mo=p(m)),c&&(f.mlc=c(m)),x&&(f.mlw=x(m)),m.ct=f.ct,m._polygons=d.feature2polygons(_)}}var S=p?{type:"identity",property:"mo"}:h.opacity;return k.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(o.paint,{"line-color":c?{type:"identity",property:"mlc"}:y.color,"line-width":x?{type:"identity",property:"mlw"}:y.width,"line-opacity":S}),n.layout.visibility="visible",o.layout.visibility="visible",a.geojson={type:"FeatureCollection",features:u},s(t),a},convertOnSelect:s}},22654:function(ee,D,e){var M=e(71828),k=e(1586),l=e(64496);ee.exports=function(T,b,d,s){function t(o,a){return M.coerce(T,b,l,o,a)}var i=t("locations"),r=t("z"),n=t("geojson");M.isArrayOrTypedArray(i)&&i.length&&M.isArrayOrTypedArray(r)&&r.length&&(typeof n=="string"&&n!==""||M.isPlainObject(n))?(t("featureidkey"),b._length=Math.min(i.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},57516:function(ee,D,e){ee.exports={attributes:e(64496),supplyDefaults:e(22654),colorbar:e(61243),calc:e(38675),plot:e(7852),hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(M,k){for(var l=k.getMapLayers(),T=l.length-2;T>=0;T--){var b=l[T].id;if(typeof b=="string"&&b.indexOf("water")===0){for(var d=T+1;d<l.length;d++)if(typeof(b=l[d].id)=="string"&&b.indexOf("plotly-")===-1)return b}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(ee,D,e){var M=e(82004).convert,k=e(82004).convertOnSelect,l=e(77734).traceLayerPrefix;function T(d,s){this.type="choroplethmapbox",this.subplot=d,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",l+s+"-fill"],["line",l+s+"-line"]],this.below=null}var b=T.prototype;b.update=function(d){this._update(M(d)),d[0].trace._glTrace=this},b.updateOnSelect=function(d){this._update(k(d))},b._update=function(d){var s=this.subplot,t=this.layerList,i=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(d.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(d,i),this.below=i);for(var r=0;r<t.length;r++){var n=t[r],o=n[0],a=n[1],u=d[o];s.setOptions(a,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&s.setOptions(a,"setPaintProperty",u.paint)}},b._addLayers=function(d,s){for(var t=this.subplot,i=this.layerList,r=this.sourceId,n=0;n<i.length;n++){var o=i[n],a=o[0],u=d[a];t.addLayer({type:a,id:o[1],source:r,layout:u.layout,paint:u.paint},s)}},b._removeLayers=function(){for(var d=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)d.removeLayer(s[t][1])},b.dispose=function(){var d=this.subplot.map;this._removeLayers(),d.removeSource(this.sourceId)},ee.exports=function(d,s){var t=s[0].trace,i=new T(d,t.uid),r=i.sourceId,n=M(s),o=i.below=d.belowLookup["trace-"+t.uid];return d.map.addSource(r,{type:"geojson",data:n.geojson}),i._addLayers(n,o),s[0].trace._glTrace=i,i}},12674:function(ee,D,e){var M=e(50693),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(2418),b=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:d({},b.showlegend,{dflt:!1})};d(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,ee.exports=s},31371:function(ee,D,e){var M=e(78803);ee.exports=function(k,l){for(var T=l.u,b=l.v,d=l.w,s=Math.min(l.x.length,l.y.length,l.z.length,T.length,b.length,d.length),t=-1/0,i=1/0,r=0;r<s;r++){var n=T[r],o=b[r],a=d[r],u=Math.sqrt(n*n+o*o+a*a);t=Math.max(t,u),i=Math.min(i,u)}l._len=s,l._normMax=t,M(k,l,{vals:[i,t],containerStr:"",cLetter:"c"})}},5453:function(ee,D,e){var M=e(9330).gl_cone3d,k=e(9330).gl_cone3d.createConeMesh,l=e(71828).simpleMap,T=e(81697).parseColorScale,b=e(21081).extractOpts,d=e(90060);function s(a,u){this.scene=a,this.uid=u,this.mesh=null,this.data=null}var t=s.prototype;t.handlePick=function(a){if(a.object===this.mesh){var u=a.index=a.data.index,p=this.data.x[u],c=this.data.y[u],x=this.data.z[u],g=this.data.u[u],h=this.data.v[u],y=this.data.w[u];a.traceCoordinate=[p,c,x,g,h,y,Math.sqrt(g*g+h*h+y*y)];var v=this.data.hovertext||this.data.text;return Array.isArray(v)&&v[u]!==void 0?a.textLabel=v[u]:v&&(a.textLabel=v),!0}};var i={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},n={tip:1,tail:1,cm:.75,center:.5};function o(a,u){var p=a.fullSceneLayout,c=a.dataScale,x={};function g(m,_){var f=p[_],S=c[i[_]];return l(m,function(w){return f.d2l(w)*S})}x.vectors=d(g(u.u,"xaxis"),g(u.v,"yaxis"),g(u.w,"zaxis"),u._len),x.positions=d(g(u.x,"xaxis"),g(u.y,"yaxis"),g(u.z,"zaxis"),u._len);var h=b(u);x.colormap=T(u),x.vertexIntensityBounds=[h.min/u._normMax,h.max/u._normMax],x.coneOffset=r[u.anchor],u.sizemode==="scaled"?x.coneSize=u.sizeref||.5:x.coneSize=u.sizeref&&u._normMax?u.sizeref/u._normMax:.5;var y=M(x),v=u.lightposition;return y.lightPosition=[v.x,v.y,v.z],y.ambient=u.lighting.ambient,y.diffuse=u.lighting.diffuse,y.specular=u.lighting.specular,y.roughness=u.lighting.roughness,y.fresnel=u.lighting.fresnel,y.opacity=u.opacity,u._pad=n[u.anchor]*y.vectorScale*y.coneScale*u._normMax,y}t.update=function(a){this.data=a;var u=o(this.scene,a);this.mesh.update(u)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(a,u){var p=a.glplot.gl,c=o(a,u),x=k(p,c),g=new s(a,u.uid);return g.mesh=x,g.data=u,x._trace=g,a.glplot.add(x),g}},91750:function(ee,D,e){var M=e(71828),k=e(1586),l=e(12674);ee.exports=function(T,b,d,s){function t(p,c){return M.coerce(T,b,l,p,c)}var i=t("u"),r=t("v"),n=t("w"),o=t("x"),a=t("y"),u=t("z");i&&i.length&&r&&r.length&&n&&n.length&&o&&o.length&&a&&a.length&&u&&u.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},98128:function(ee,D,e){ee.exports={moduleType:"trace",name:"cone",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(12674),supplyDefaults:e(91750),colorbar:{min:"cmin",max:"cmax"},calc:e(31371),plot:e(5453),eventData:function(M,k){return M.norm=k.traceCoordinate[6],M},meta:{}}},70600:function(ee,D,e){var M=e(21606),k=e(82196),l=e(12663),T=l.axisHoverFormat,b=l.descriptionOnlyNumbers,d=e(50693),s=e(79952).P,t=e(41940),i=e(1426).extendFlat,r=e(74808),n=r.COMPARISON_OPS2,o=r.INTERVAL_OPS,a=k.line;ee.exports=i({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:i({},M.texttemplate,{}),textfont:i({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:i({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},a.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:i({},a.smoothing,{}),editType:"plot"}},d("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(ee,D,e){var M=e(21081),k=e(90757),l=e(18670),T=e(53572);ee.exports=function(b,d){var s=k(b,d),t=s[0].z;l(d,t);var i,r=d.contours,n=M.extractOpts(d);if(r.coloring==="heatmap"&&n.auto&&d.autocontour===!1){var o=r.start,a=T(r),u=r.size||1,p=Math.floor((a-o)/u)+1;isFinite(u)||(u=1,p=1);var c=o-u/2;i=[c,c+p*u]}else i=t;return M.calc(b,d,{vals:i,cLetter:"z"}),s}},20083:function(ee){ee.exports=function(D,e){var M,k=D[0],l=k.z;switch(e.type){case"levels":var T=Math.min(l[0][0],l[0][1]);for(M=0;M<D.length;M++){var b=D[M];b.prefixBoundary=!b.edgepaths.length&&(T>b.level||b.starts.length&&T===b.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var d=k.x.length,s=k.y.length,t=-1/0,i=1/0;for(M=0;M<s;M++)i=Math.min(i,l[M][0]),i=Math.min(i,l[M][d-1]),t=Math.max(t,l[M][0]),t=Math.max(t,l[M][d-1]);for(M=1;M<d-1;M++)i=Math.min(i,l[0][M]),i=Math.min(i,l[s-1][M]),t=Math.max(t,l[0][M]),t=Math.max(t,l[s-1][M]);var r,n,o=e.value;switch(e._operation){case">":o>t&&(k.prefixBoundary=!0);break;case"<":(o<i||k.starts.length&&o===i)&&(k.prefixBoundary=!0);break;case"[]":r=Math.min(o[0],o[1]),((n=Math.max(o[0],o[1]))<i||r>t||k.starts.length&&n===i)&&(k.prefixBoundary=!0);break;case"][":r=Math.min(o[0],o[1]),n=Math.max(o[0],o[1]),r<i&&n>t&&(k.prefixBoundary=!0)}}}},90654:function(ee,D,e){var M=e(21081),k=e(86068),l=e(53572);ee.exports={min:"zmin",max:"zmax",calc:function(T,b,d){var s=b.contours,t=b.line,i=s.size||1,r=s.coloring,n=k(b,{isColorbar:!0});if(r==="heatmap"){var o=M.extractOpts(b);d._fillgradient=o.reversescale?M.flipScale(o.colorscale):o.colorscale,d._zrange=[o.min,o.max]}else r==="fill"&&(d._fillcolor=n);d._line={color:r==="lines"?n:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},d._levels={start:s.start,end:l(s),size:i}}}},36914:function(ee){ee.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(ee,D,e){var M=e(92770),k=e(14523),l=e(7901),T=l.addOpacity,b=l.opacity,d=e(74808),s=d.CONSTRAINT_REDUCTION,t=d.COMPARISON_OPS2;ee.exports=function(i,r,n,o,a,u){var p,c,x,g=r.contours,h=n("contours.operation");g._operation=s[h],function(y,v){var m;t.indexOf(v.operation)===-1?(y("contours.value",[0,1]),Array.isArray(v.value)?v.value.length>2?v.value=v.value.slice(2):v.length===0?v.value=[0,1]:v.length<2?(m=parseFloat(v.value[0]),v.value=[m,m+1]):v.value=[parseFloat(v.value[0]),parseFloat(v.value[1])]:M(v.value)&&(m=parseFloat(v.value),v.value=[m,m+1])):(y("contours.value",0),M(v.value)||(Array.isArray(v.value)?v.value=parseFloat(v.value[0]):v.value=0))}(n,g),h==="="?p=g.showlines=!0:(p=n("contours.showlines"),x=n("fillcolor",T((i.line||{}).color||a,.5))),p&&(c=n("line.color",x&&b(x)?T(r.fillcolor,1):a),n("line.width",2),n("line.dash")),n("line.smoothing"),k(n,o,c,u)}},64237:function(ee,D,e){var M=e(74808),k=e(92770);function l(d,s){var t,i=Array.isArray(s);function r(n){return k(n)?+n:null}return M.COMPARISON_OPS2.indexOf(d)!==-1?t=r(i?s[0]:s):M.INTERVAL_OPS.indexOf(d)!==-1?t=i?[r(s[0]),r(s[1])]:[r(s),r(s)]:M.SET_OPS.indexOf(d)!==-1&&(t=i?s.map(r):[r(s)]),t}function T(d){return function(s){s=l(d,s);var t=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return{start:t,end:i,size:i-t}}}function b(d){return function(s){return{start:s=l(d,s),end:1/0,size:1/0}}}ee.exports={"[]":T("[]"),"][":T("]["),">":b(">"),"<":b("<"),"=":b("=")}},67217:function(ee){ee.exports=function(D,e,M,k){var l=k("contours.start"),T=k("contours.end"),b=l===!1||T===!1,d=M("contours.size");!(b?e.autocontour=!0:M("autocontour",!1))&&d||M("ncontours")}},84857:function(ee,D,e){var M=e(71828);function k(l){return M.extendFlat({},l,{edgepaths:M.extendDeep([],l.edgepaths),paths:M.extendDeep([],l.paths),starts:M.extendDeep([],l.starts)})}ee.exports=function(l,T){var b,d,s,t=function(n){return n.reverse()},i=function(n){return n};switch(T){case"=":case"<":return l;case">":for(l.length!==1&&M.warn("Contour data invalid for the specified inequality operation."),d=l[0],b=0;b<d.edgepaths.length;b++)d.edgepaths[b]=t(d.edgepaths[b]);for(b=0;b<d.paths.length;b++)d.paths[b]=t(d.paths[b]);for(b=0;b<d.starts.length;b++)d.starts[b]=t(d.starts[b]);return l;case"][":var r=t;t=i,i=r;case"[]":for(l.length!==2&&M.warn("Contour data invalid for the specified inequality range operation."),d=k(l[0]),s=k(l[1]),b=0;b<d.edgepaths.length;b++)d.edgepaths[b]=t(d.edgepaths[b]);for(b=0;b<d.paths.length;b++)d.paths[b]=t(d.paths[b]);for(b=0;b<d.starts.length;b++)d.starts[b]=t(d.starts[b]);for(;s.edgepaths.length;)d.edgepaths.push(i(s.edgepaths.shift()));for(;s.paths.length;)d.paths.push(i(s.paths.shift()));for(;s.starts.length;)d.starts.push(i(s.starts.shift()));return[d]}}},13031:function(ee,D,e){var M=e(71828),k=e(67684),l=e(73927),T=e(83179),b=e(67217),d=e(8724),s=e(58623),t=e(70600);ee.exports=function(i,r,n,o){function a(p,c){return M.coerce(i,r,t,p,c)}if(k(i,r,a,o)){l(i,r,o,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hoverongaps"),a("hovertemplate");var u=a("contours.type")==="constraint";a("connectgaps",M.isArray1D(r.z)),u?T(i,r,a,o,n):(b(i,r,a,function(p){return M.coerce2(i,r,t,p)}),d(i,r,a,o)),r.contours&&r.contours.coloring==="heatmap"&&s(a,o)}else r.visible=!1}},87558:function(ee,D,e){var M=e(71828),k=e(64237),l=e(53572);ee.exports=function(T,b,d){for(var s=T.type==="constraint"?k[T._operation](T.value):T,t=s.size,i=[],r=l(s),n=d.trace._carpetTrace,o=n?{xaxis:n.aaxis,yaxis:n.baxis,x:d.a,y:d.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:d.x,y:d.y},a=s.start;a<r;a+=t)if(i.push(M.extendFlat({level:a,crossings:{},starts:[],edgepaths:[],paths:[],z:d.z,smoothing:d.trace.line.smoothing},o)),i.length>1e3){M.warn("Too many contours, clipping at 1000",T);break}return i}},53572:function(ee){ee.exports=function(D){return D.end+D.size/1e6}},81696:function(ee,D,e){var M=e(71828),k=e(36914);function l(d,s,t,i){return Math.abs(d[0]-s[0])<t&&Math.abs(d[1]-s[1])<i}function T(d,s,t,i,r){var n,o=s.join(","),a=d.crossings[o],u=function(ne,re,ae){var ue=0,pe=0;return ne>20&&re?ne===208||ne===1114?ue=ae[0]===0?1:-1:pe=ae[1]===0?1:-1:k.BOTTOMSTART.indexOf(ne)!==-1?pe=1:k.LEFTSTART.indexOf(ne)!==-1?ue=1:k.TOPSTART.indexOf(ne)!==-1?pe=-1:ue=-1,[ue,pe]}(a,t,s),p=[b(d,s,[-u[0],-u[1]])],c=d.z.length,x=d.z[0].length,g=s.slice(),h=u.slice();for(n=0;n<1e4;n++){if(a>20?(a=k.CHOOSESADDLE[a][(u[0]||u[1])<0?0:1],d.crossings[o]=k.SADDLEREMAINDER[a]):delete d.crossings[o],!(u=k.NEWDELTA[a])){M.log("Found bad marching index:",a,s,d.level);break}p.push(b(d,s,u)),s[0]+=u[0],s[1]+=u[1],o=s.join(","),l(p[p.length-1],p[p.length-2],i,r)&&p.pop();var y=u[0]&&(s[0]<0||s[0]>x-2)||u[1]&&(s[1]<0||s[1]>c-2);if(s[0]===g[0]&&s[1]===g[1]&&u[0]===h[0]&&u[1]===h[1]||t&&y)break;a=d.crossings[o]}n===1e4&&M.log("Infinite loop in contour?");var v,m,_,f,S,w,E,L,C,P,z,G,O,H,N,B=l(p[0],p[p.length-1],i,r),V=0,q=.2*d.smoothing,te=[],K=0;for(n=1;n<p.length;n++)G=p[n],O=p[n-1],H=G[2]-O[2],N=G[3]-O[3],V+=E=Math.sqrt(H*H+N*N),te.push(E);var J=V/te.length*q;function Y(ne){return p[ne%p.length]}for(n=p.length-2;n>=K;n--)if((v=te[n])<J){for(_=0,m=n-1;m>=K&&v+te[m]<J;m--)v+=te[m];if(B&&n===p.length-2)for(_=0;_<m&&v+te[_]<J;_++)v+=te[_];S=n-m+_+1,w=Math.floor((n+m+_+2)/2),f=B||n!==p.length-2?B||m!==-1?S%2?Y(w):[(Y(w)[0]+Y(w+1)[0])/2,(Y(w)[1]+Y(w+1)[1])/2]:p[0]:p[p.length-1],p.splice(m+1,n-m+1,f),n=m+1,_&&(K=_),B&&(n===p.length-2?p[_]=p[p.length-1]:n===0&&(p[p.length-1]=p[0]))}for(p.splice(0,K),n=0;n<p.length;n++)p[n].length=2;if(!(p.length<2))if(B)p.pop(),d.paths.push(p);else{t||M.log("Unclosed interior contour?",d.level,g.join(","),p.join("L"));var W=!1;for(L=0;L<d.edgepaths.length;L++)if(P=d.edgepaths[L],!W&&l(P[0],p[p.length-1],i,r)){p.pop(),W=!0;var Q=!1;for(C=0;C<d.edgepaths.length;C++)if(l((z=d.edgepaths[C])[z.length-1],p[0],i,r)){Q=!0,p.shift(),d.edgepaths.splice(L,1),C===L?d.paths.push(p.concat(z)):(C>L&&C--,d.edgepaths[C]=z.concat(p,P));break}Q||(d.edgepaths[L]=p.concat(P))}for(L=0;L<d.edgepaths.length&&!W;L++)l((P=d.edgepaths[L])[P.length-1],p[0],i,r)&&(p.shift(),d.edgepaths[L]=P.concat(p),W=!0);W||d.edgepaths.push(p)}}function b(d,s,t){var i=s[0]+Math.max(t[0],0),r=s[1]+Math.max(t[1],0),n=d.z[r][i],o=d.xaxis,a=d.yaxis;if(t[1]){var u=(d.level-n)/(d.z[r][i+1]-n),p=(u!==1?(1-u)*o.c2l(d.x[i]):0)+(u!==0?u*o.c2l(d.x[i+1]):0);return[o.c2p(o.l2c(p),!0),a.c2p(d.y[r],!0),i+u,r]}var c=(d.level-n)/(d.z[r+1][i]-n),x=(c!==1?(1-c)*a.c2l(d.y[r]):0)+(c!==0?c*a.c2l(d.y[r+1]):0);return[o.c2p(d.x[i],!0),a.c2p(a.l2c(x),!0),i,r+c]}ee.exports=function(d,s,t){var i,r,n,o;for(s=s||.01,t=t||.01,r=0;r<d.length;r++){for(n=d[r],o=0;o<n.starts.length;o++)T(n,n.starts[o],"edge",s,t);for(i=0;Object.keys(n.crossings).length&&i<1e4;)i++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,s,t);i===1e4&&M.log("Infinite loop in contour?")}}},52421:function(ee,D,e){var M=e(7901),k=e(46248);ee.exports=function(l,T,b,d,s){s||(s={}),s.isContour=!0;var t=k(l,T,b,d,s);return t&&t.forEach(function(i){var r=i.trace;r.contours.type==="constraint"&&(r.fillcolor&&M.opacity(r.fillcolor)?i.color=M.addOpacity(r.fillcolor,1):r.contours.showlines&&M.opacity(r.line.color)&&(i.color=M.addOpacity(r.line.color,1)))}),t}},99442:function(ee,D,e){ee.exports={attributes:e(70600),supplyDefaults:e(13031),calc:e(27529),plot:e(29854).plot,style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"contour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(ee,D,e){var M=e(71828);ee.exports=function(k,l,T,b){if(b||(b={}),k("contours.showlabels")){var d=l.font;M.coerceFont(k,"contours.labelfont",{family:d.family,size:d.size,color:T}),k("contours.labelformat")}b.hasHover!==!1&&k("zhoverformat")}},86068:function(ee,D,e){var M=e(39898),k=e(21081),l=e(53572);ee.exports=function(T){var b=T.contours,d=b.start,s=l(b),t=b.size||1,i=Math.floor((s-d)/t)+1,r=b.coloring==="lines"?0:1,n=k.extractOpts(T);isFinite(t)||(t=1,i=1);var o,a,u=n.reversescale?k.flipScale(n.colorscale):n.colorscale,p=u.length,c=new Array(p),x=new Array(p),g=n.min,h=n.max;if(b.coloring==="heatmap"){for(a=0;a<p;a++)o=u[a],c[a]=o[0]*(h-g)+g,x[a]=o[1];var y=M.extent([g,h,b.start,b.start+t*(i-1)]),v=y[g<h?0:1],m=y[g<h?1:0];v!==g&&(c.splice(0,0,v),x.splice(0,0,x[0])),m!==h&&(c.push(m),x.push(x[x.length-1]))}else{var _=T._input&&typeof T._input.zmin=="number"&&typeof T._input.zmax=="number";for(_&&(d<=g||s>=h)&&(d<=g&&(d=g),s>=h&&(s=h),i=Math.floor((s-d)/t)+1,r=0),a=0;a<p;a++)o=u[a],c[a]=(o[0]*(i+r-1)-r/2)*t+d,x[a]=o[1];(_||T.autocontour)&&(c[0]>g&&(c.unshift(g),x.unshift(x[0])),c[c.length-1]<h&&(c.push(h),x.push(x[x.length-1])))}return k.makeColorScaleFunc({domain:c,range:x},{noNumericCheck:!0})}},87678:function(ee,D,e){var M=e(36914);function k(l,T){var b=(T[0][0]>l?0:1)+(T[0][1]>l?0:2)+(T[1][1]>l?0:4)+(T[1][0]>l?0:8);return b===5||b===10?l>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?b===5?713:1114:b===5?104:208:b===15?0:b}ee.exports=function(l){var T,b,d,s,t,i,r,n,o,a=l[0].z,u=a.length,p=a[0].length,c=u===2||p===2;for(b=0;b<u-1;b++)for(s=[],b===0&&(s=s.concat(M.BOTTOMSTART)),b===u-2&&(s=s.concat(M.TOPSTART)),T=0;T<p-1;T++)for(d=s.slice(),T===0&&(d=d.concat(M.LEFTSTART)),T===p-2&&(d=d.concat(M.RIGHTSTART)),t=T+","+b,i=[[a[b][T],a[b][T+1]],[a[b+1][T],a[b+1][T+1]]],o=0;o<l.length;o++)(r=k((n=l[o]).level,i))&&(n.crossings[t]=r,d.indexOf(r)!==-1&&(n.starts.push([T,b]),c&&d.indexOf(r,d.indexOf(r)+1)!==-1&&n.starts.push([T,b])))}},29854:function(ee,D,e){var M=e(39898),k=e(71828),l=e(91424),T=e(21081),b=e(63893),d=e(89298),s=e(21994),t=e(50347),i=e(87678),r=e(81696),n=e(87558),o=e(84857),a=e(20083),u=e(36914),p=u.LABELOPTIMIZER;function c(h,y){var v,m,_,f,S,w,E,L="",C=0,P=h.edgepaths.map(function(B,V){return V}),z=!0;function G(B){return Math.abs(B[1]-y[2][1])<.01}function O(B){return Math.abs(B[0]-y[0][0])<.01}function H(B){return Math.abs(B[0]-y[2][0])<.01}for(;P.length;){for(w=l.smoothopen(h.edgepaths[C],h.smoothing),L+=z?w:w.replace(/^M/,"L"),P.splice(P.indexOf(C),1),v=h.edgepaths[C][h.edgepaths[C].length-1],f=-1,_=0;_<4;_++){if(!v){k.log("Missing end?",C,h);break}for(E=v,Math.abs(E[1]-y[0][1])<.01&&!H(v)?m=y[1]:O(v)?m=y[0]:G(v)?m=y[3]:H(v)&&(m=y[2]),S=0;S<h.edgepaths.length;S++){var N=h.edgepaths[S][0];Math.abs(v[0]-m[0])<.01?Math.abs(v[0]-N[0])<.01&&(N[1]-v[1])*(m[1]-N[1])>=0&&(m=N,f=S):Math.abs(v[1]-m[1])<.01?Math.abs(v[1]-N[1])<.01&&(N[0]-v[0])*(m[0]-N[0])>=0&&(m=N,f=S):k.log("endpt to newendpt is not vert. or horz.",v,m,N)}if(v=m,f>=0)break;L+="L"+m}if(f===h.edgepaths.length){k.log("unclosed perimeter path");break}C=f,(z=P.indexOf(C)===-1)&&(C=P[0],L+="Z")}for(C=0;C<h.paths.length;C++)L+=l.smoothclosed(h.paths[C],h.smoothing);return L}function x(h,y,v,m){var _=y.width/2,f=y.height/2,S=h.x,w=h.y,E=h.theta,L=Math.cos(E)*_,C=Math.sin(E)*_,P=(S>m.center?m.right-S:S-m.left)/(L+Math.abs(Math.sin(E)*f)),z=(w>m.middle?m.bottom-w:w-m.top)/(Math.abs(C)+Math.cos(E)*f);if(P<1||z<1)return 1/0;var G=p.EDGECOST*(1/(P-1)+1/(z-1));G+=p.ANGLECOST*E*E;for(var O=S-L,H=w-C,N=S+L,B=w+C,V=0;V<v.length;V++){var q=v[V],te=Math.cos(q.theta)*q.width/2,K=Math.sin(q.theta)*q.width/2,J=2*k.segmentDistance(O,H,N,B,q.x-te,q.y-K,q.x+te,q.y+K)/(y.height+q.height),Y=q.level===y.level,W=Y?p.SAMELEVELDISTANCE:1;if(J<=W)return 1/0;G+=p.NEIGHBORCOST*(Y?p.SAMELEVELFACTOR:1)/(J-W)}return G}function g(h){var y,v,m=h.trace._emptypoints,_=[],f=h.z.length,S=h.z[0].length,w=[];for(y=0;y<S;y++)w.push(1);for(y=0;y<f;y++)_.push(w.slice());for(y=0;y<m.length;y++)_[(v=m[y])[0]][v[1]]=0;return h.zmask=_,_}D.plot=function(h,y,v,m){var _=y.xaxis,f=y.yaxis;k.makeTraceGroups(m,v,"contour").each(function(S){var w=M.select(this),E=S[0],L=E.trace,C=E.x,P=E.y,z=L.contours,G=n(z,y,E),O=k.ensureSingle(w,"g","heatmapcoloring"),H=[];z.coloring==="heatmap"&&(H=[S]),t(h,y,H,O),i(G),r(G);var N=_.c2p(C[0],!0),B=_.c2p(C[C.length-1],!0),V=f.c2p(P[0],!0),q=f.c2p(P[P.length-1],!0),te=[[N,q],[B,q],[B,V],[N,V]],K=G;z.type==="constraint"&&(K=o(G,z._operation)),function(J,Y,W){var Q=k.ensureSingle(J,"g","contourbg").selectAll("path").data(W.coloring==="fill"?[0]:[]);Q.enter().append("path"),Q.exit().remove(),Q.attr("d","M"+Y.join("L")+"Z").style("stroke","none")}(w,te,z),function(J,Y,W,Q){var ne=Q.coloring==="fill"||Q.type==="constraint"&&Q._operation!=="=",re="M"+W.join("L")+"Z";ne&&a(Y,Q);var ae=k.ensureSingle(J,"g","contourfill").selectAll("path").data(ne?Y:[]);ae.enter().append("path"),ae.exit().remove(),ae.each(function(ue){var pe=(ue.prefixBoundary?re:"")+c(ue,W);pe?M.select(this).attr("d",pe).style("stroke","none"):M.select(this).remove()})}(w,K,te,z),function(J,Y,W,Q,ne){var re=W._context.staticPlot,ae=k.ensureSingle(J,"g","contourlines"),ue=ne.showlines!==!1,pe=ne.showlabels,ge=ue&&pe,_e=D.createLines(ae,ue||pe,Y,re),me=D.createLineClip(ae,ge,W,Q.trace.uid),ve=J.selectAll("g.contourlabels").data(pe?[0]:[]);if(ve.exit().remove(),ve.enter().append("g").classed("contourlabels",!0),pe){var Oe=[],Me=[];k.clearLocationCache();var Te=D.labelFormatter(W,Q),se=l.tester.append("text").attr("data-notex",1).call(l.font,ne.labelfont),oe=Y[0].xaxis,he=Y[0].yaxis,Ee=oe._length,ke=he._length,be=oe.range,Ie=he.range,Fe=k.aggNums(Math.min,null,Q.x),ce=k.aggNums(Math.max,null,Q.x),we=k.aggNums(Math.min,null,Q.y),ye=k.aggNums(Math.max,null,Q.y),Ce=Math.max(oe.c2p(Fe,!0),0),Re=Math.min(oe.c2p(ce,!0),Ee),ze=Math.max(he.c2p(ye,!0),0),He=Math.min(he.c2p(we,!0),ke),Ge={};be[0]<be[1]?(Ge.left=Ce,Ge.right=Re):(Ge.left=Re,Ge.right=Ce),Ie[0]<Ie[1]?(Ge.top=ze,Ge.bottom=He):(Ge.top=He,Ge.bottom=ze),Ge.middle=(Ge.top+Ge.bottom)/2,Ge.center=(Ge.left+Ge.right)/2,Oe.push([[Ge.left,Ge.top],[Ge.right,Ge.top],[Ge.right,Ge.bottom],[Ge.left,Ge.bottom]]);var Je=Math.sqrt(Ee*Ee+ke*ke),ot=u.LABELDISTANCE*Je/Math.max(1,Y.length/u.LABELINCREASE);_e.each(function(Qe){var vt=D.calcTextOpts(Qe.level,Te,se,W);M.select(this).selectAll("path").each(function(){var xt=k.getVisibleSegment(this,Ge,vt.height/2);if(xt&&!(xt.len<(vt.width+vt.height)*u.LABELMIN))for(var mt=Math.min(Math.ceil(xt.len/ot),u.LABELMAX),rt=0;rt<mt;rt++){var it=D.findBestTextLocation(this,xt,vt,Me,Ge);if(!it)break;D.addLabelData(it,vt,Me,Oe)}})}),se.remove(),D.drawLabels(ve,Me,W,me,ge?Oe:null)}pe&&!ue&&_e.remove()}(w,G,h,E,z),function(J,Y,W,Q,ne){var re=Q.trace,ae=W._fullLayout._clips,ue="clip"+re.uid,pe=ae.selectAll("#"+ue).data(re.connectgaps?[]:[0]);if(pe.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),pe.exit().remove(),re.connectgaps===!1){var ge={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Y.xaxis,yaxis:Y.yaxis,x:Q.x,y:Q.y,z:g(Q),smoothing:0};i([ge]),r([ge]),a([ge],{type:"levels"}),k.ensureSingle(pe,"path","").attr("d",(ge.prefixBoundary?"M"+ne.join("L")+"Z":"")+c(ge,ne))}else ue=null;l.setClipUrl(J,ue,W)}(w,y,h,E,te)})},D.createLines=function(h,y,v,m){var _=v[0].smoothing,f=h.selectAll("g.contourlevel").data(y?v:[]);if(f.exit().remove(),f.enter().append("g").classed("contourlevel",!0),y){var S=f.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return l.smoothopen(E,_)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke");var w=f.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});w.exit().remove(),w.enter().append("path").classed("closedline",!0),w.attr("d",function(E){return l.smoothclosed(E,_)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke")}return f},D.createLineClip=function(h,y,v,m){var _=y?"clipline"+m:null,f=v._fullLayout._clips.selectAll("#"+_).data(y?[0]:[]);return f.exit().remove(),f.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),l.setClipUrl(h,_,v),f},D.labelFormatter=function(h,y){var v=h._fullLayout,m=y.trace,_=m.contours,f={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)f.tickformat=_.labelformat,s(f,v);else{var S=T.extractOpts(m);if(S&&S.colorbar&&S.colorbar._axis)f=S.colorbar._axis;else{if(_.type==="constraint"){var w=_.value;Array.isArray(w)?f.range=[w[0],w[w.length-1]]:f.range=[w,w]}else f.range=[_.start,_.end],f.nticks=(_.end-_.start)/_.size;f.range[0]===f.range[1]&&(f.range[1]+=f.range[0]||1),f.nticks||(f.nticks=1e3),s(f,v),d.prepTicks(f),f._tmin=null,f._tmax=null}}return function(E){return d.tickText(f,E).text}},D.calcTextOpts=function(h,y,v,m){var _=y(h);v.text(_).call(b.convertToTspans,m);var f=v.node(),S=l.bBox(f,!0);return{text:_,width:S.width,height:S.height,fontSize:+f.style["font-size"].replace("px",""),level:h,dy:(S.top+S.bottom)/2}},D.findBestTextLocation=function(h,y,v,m,_){var f,S,w,E,L,C=v.width;y.isClosed?(S=y.len/p.INITIALSEARCHPOINTS,f=y.min+S/2,w=y.max):(S=(y.len-C)/(p.INITIALSEARCHPOINTS+1),f=y.min+S+C/2,w=y.max-(S+C)/2);for(var P=1/0,z=0;z<p.ITERATIONS;z++){for(var G=f;G<w;G+=S){var O=k.getTextLocation(h,y.total,G,C),H=x(O,v,m,_);H<P&&(P=H,L=O,E=G)}if(P>2*p.MAXCOST)break;z&&(S/=2),w=(f=E-S/2)+1.5*S}if(P<=p.MAXCOST)return L},D.addLabelData=function(h,y,v,m){var _=y.fontSize,f=y.width+_/3,S=Math.max(0,y.height-_/3),w=h.x,E=h.y,L=h.theta,C=Math.sin(L),P=Math.cos(L),z=function(O,H){return[w+O*P-H*C,E+O*C+H*P]},G=[z(-f/2,-S/2),z(-f/2,S/2),z(f/2,S/2),z(f/2,-S/2)];v.push({text:y.text,x:w,y:E,dy:y.dy,theta:L,level:y.level,width:f,height:S}),m.push(G)},D.drawLabels=function(h,y,v,m,_){var f=h.selectAll("text").data(y,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(f.exit().remove(),f.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var L=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;M.select(this).text(E.text).attr({x:L,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+L+" "+C+")"}).call(b.convertToTspans,v)}),_){for(var S="",w=0;w<_.length;w++)S+="M"+_[w].join("L")+"Z";k.ensureSingle(m,"path","").attr("d",S)}}},18670:function(ee,D,e){var M=e(89298),k=e(71828);function l(T,b,d){var s={type:"linear",range:[T,b]};return M.autoTicks(s,(b-T)/(d||15)),s}ee.exports=function(T,b){var d=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||s===void 0)&&(s=k.aggNums(Math.min,null,b)),(T.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,b));var i=l(s,t,T.ncontours);d.size=i.dtick,d.start=M.tickFirst(i),i.range.reverse(),d.end=M.tickFirst(i),d.start===s&&(d.start+=d.size),d.end===t&&(d.end-=d.size),d.start>d.end&&(d.start=d.end=(d.start+d.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:d.start,end:d.end,size:d.size}),T._input.autocontour=!0}else if(d.type!=="constraint"){var r,n=d.start,o=d.end,a=T._input.contours;n>o&&(d.start=a.start=o,o=d.end=a.end=n,n=d.start),d.size>0||(r=n===o?1:l(n,o,T.ncontours).dtick,a.size=d.size=r)}}},84426:function(ee,D,e){var M=e(39898),k=e(91424),l=e(70035),T=e(86068);ee.exports=function(b){var d=M.select(b).selectAll("g.contour");d.style("opacity",function(s){return s[0].trace.opacity}),d.each(function(s){var t=M.select(this),i=s[0].trace,r=i.contours,n=i.line,o=r.size||1,a=r.start,u=r.type==="constraint",p=!u&&r.coloring==="lines",c=!u&&r.coloring==="fill",x=p||c?T(i):null;t.selectAll("g.contourlevel").each(function(y){M.select(this).selectAll("path").call(k.lineGroupStyle,n.width,p?x(y.level):n.color,n.dash)});var g=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(y){k.font(M.select(this),{family:g.family,size:g.size,color:g.color||(p?x(y.level):n.color)})}),u)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(c){var h;t.selectAll("g.contourfill path").style("fill",function(y){return h===void 0&&(h=y.level),x(y.level+.5*o)}),h===void 0&&(h=a),t.selectAll("g.contourbg path").style("fill",x(h-.5*o))}}),l(b)}},8724:function(ee,D,e){var M=e(1586),k=e(14523);ee.exports=function(l,T,b,d,s){var t,i=b("contours.coloring"),r="";i==="fill"&&(t=b("contours.showlines")),t!==!1&&(i!=="lines"&&(r=b("line.color","#000")),b("line.width",.5),b("line.dash")),i!=="none"&&(l.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,M(l,T,d,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),k(b,d,r,s)}},88085:function(ee,D,e){var M=e(21606),k=e(70600),l=e(50693),T=e(1426).extendFlat,b=k.contours;ee.exports=T({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},59885:function(ee,D,e){var M=e(78803),k=e(71828),l=e(68296),T=e(4742),b=e(824),d=e(43907),s=e(70769),t=e(75005),i=e(22882),r=e(18670);ee.exports=function(n,o){var a=o._carpetTrace=i(n,o);if(a&&a.visible&&a.visible!=="legendonly"){if(!o.a||!o.b){var u=n.data[a.index],p=n.data[o.index];p.a||(p.a=u.a),p.b||(p.b=u.b),t(p,o,o._defaultColor,n._fullLayout)}var c=function(x,g){var h,y,v,m,_,f,S,w=g._carpetTrace,E=w.aaxis,L=w.baxis;E._minDtick=0,L._minDtick=0,k.isArray1D(g.z)&&l(g,E,L,"a","b",["z"]),h=g._a=g._a||g.a,m=g._b=g._b||g.b,h=h?E.makeCalcdata(g,"_a"):[],m=m?L.makeCalcdata(g,"_b"):[],y=g.a0||0,v=g.da||1,_=g.b0||0,f=g.db||1,S=g._z=T(g._z||g.z,g.transpose),g._emptypoints=d(S),b(S,g._emptypoints);var C=k.maxRowLength(S),P=g.xtype==="scaled"?"":h,z=s(g,P,y,v,C,E),G=g.ytype==="scaled"?"":m,O={a:z,b:s(g,G,_,f,S.length,L),z:S};return g.contours.type==="levels"&&g.contours.coloring!=="none"&&M(x,g,{vals:S,containerStr:"",cLetter:"z"}),[O]}(n,o);return r(o,o._z),c}}},75005:function(ee,D,e){var M=e(71828),k=e(67684),l=e(88085),T=e(83179),b=e(67217),d=e(8724);ee.exports=function(s,t,i,r){function n(o,a){return M.coerce(s,t,l,o,a)}if(n("carpet"),s.a&&s.b){if(!k(s,t,n,r,"a","b"))return void(t.visible=!1);n("text"),n("contours.type")==="constraint"?T(s,t,n,r,i,{hasHover:!1}):(b(s,t,n,function(o){return M.coerce2(s,t,l,o)}),d(s,t,n,r,{hasHover:!1}))}else t._defaultColor=i,t._length=null}},93740:function(ee,D,e){ee.exports={attributes:e(88085),supplyDefaults:e(75005),colorbar:e(90654),calc:e(59885),plot:e(51048),style:e(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(ee,D,e){var M=e(39898),k=e(27669),l=e(67961),T=e(91424),b=e(71828),d=e(87678),s=e(81696),t=e(29854),i=e(36914),r=e(84857),n=e(87558),o=e(20083),a=e(22882),u=e(4536);function p(g,h,y){var v=g.getPointAtLength(h),m=g.getPointAtLength(y),_=m.x-v.x,f=m.y-v.y,S=Math.sqrt(_*_+f*f);return[_/S,f/S]}function c(g){var h=Math.sqrt(g[0]*g[0]+g[1]*g[1]);return[g[0]/h,g[1]/h]}function x(g,h){var y=Math.abs(g[0]*h[0]+g[1]*h[1]);return Math.sqrt(1-y*y)/y}ee.exports=function(g,h,y,v){var m=h.xaxis,_=h.yaxis;b.makeTraceGroups(v,y,"contour").each(function(f){var S=M.select(this),w=f[0],E=w.trace,L=E._carpetTrace=a(g,E),C=g.calcdata[L.index][0];if(L.visible&&L.visible!=="legendonly"){var P=w.a,z=w.b,G=E.contours,O=n(G,h,w),H=G.type==="constraint",N=G._operation,B=H?N==="="?"lines":"fill":G.coloring,V=[[P[0],z[z.length-1]],[P[P.length-1],z[z.length-1]],[P[P.length-1],z[0]],[P[0],z[0]]];d(O);var q=1e-8*(P[P.length-1]-P[0]),te=1e-8*(z[z.length-1]-z[0]);s(O,q,te);var K,J,Y,W,Q=O;G.type==="constraint"&&(Q=r(O,N)),function(ue,pe){var ge,_e,me,ve,Oe,Me,Te,se,oe;for(ge=0;ge<ue.length;ge++){for(Oe=(ve=ue[ge]).pedgepaths=[],Me=ve.ppaths=[],_e=0;_e<ve.edgepaths.length;_e++){for(oe=ve.edgepaths[_e],Te=[],me=0;me<oe.length;me++)Te[me]=pe(oe[me]);Oe.push(Te)}for(_e=0;_e<ve.paths.length;_e++){for(oe=ve.paths[_e],se=[],me=0;me<oe.length;me++)se[me]=pe(oe[me]);Me.push(se)}}}(O,ae);var ne=[];for(W=C.clipsegments.length-1;W>=0;W--)K=C.clipsegments[W],J=k([],K.x,m.c2p),Y=k([],K.y,_.c2p),J.reverse(),Y.reverse(),ne.push(l(J,Y,K.bicubic));var re="M"+ne.join("L")+"Z";(function(ue,pe,ge,_e,me,ve){var Oe,Me,Te,se,oe=b.ensureSingle(ue,"g","contourbg").selectAll("path").data(ve!=="fill"||me?[]:[0]);oe.enter().append("path"),oe.exit().remove();var he=[];for(se=0;se<pe.length;se++)Oe=pe[se],Me=k([],Oe.x,ge.c2p),Te=k([],Oe.y,_e.c2p),he.push(l(Me,Te,Oe.bicubic));oe.attr("d","M"+he.join("L")+"Z").style("stroke","none")})(S,C.clipsegments,m,_,H,B),function(ue,pe,ge,_e,me,ve,Oe,Me,Te,se,oe){var he=se==="fill";he&&o(me,ue.contours);var Ee=b.ensureSingle(pe,"g","contourfill").selectAll("path").data(he?me:[]);Ee.enter().append("path"),Ee.exit().remove(),Ee.each(function(ke){var be=(ke.prefixBoundary?oe:"")+function(Ie,Fe,ce,we,ye,Ce,Re,ze){var He,Ge,Je,ot,Qe,vt,xt,mt="",rt=Fe.edgepaths.map(function(et,De){return De}),it=!0,Tt=1e-4*Math.abs(ce[0][0]-ce[2][0]),Mt=1e-4*Math.abs(ce[0][1]-ce[2][1]);function Pt(et){return Math.abs(et[1]-ce[0][1])<Mt}function kt(et){return Math.abs(et[1]-ce[2][1])<Mt}function Ze(et){return Math.abs(et[0]-ce[0][0])<Tt}function Xe(et){return Math.abs(et[0]-ce[2][0])<Tt}function Ve(et,De){var Be,nt,tt,dt,ht="";for(Pt(et)&&!Xe(et)||kt(et)&&!Ze(et)?(dt=ye.aaxis,tt=u(ye,Ce,[et[0],De[0]],.5*(et[1]+De[1]))):(dt=ye.baxis,tt=u(ye,Ce,.5*(et[0]+De[0]),[et[1],De[1]])),Be=1;Be<tt.length;Be++)for(ht+=dt.smoothing?"C":"L",nt=0;nt<tt[Be].length;nt++){var gt=tt[Be][nt];ht+=[Re.c2p(gt[0]),ze.c2p(gt[1])]+" "}return ht}for(He=0,Ge=null;rt.length;){var We=Fe.edgepaths[He][0];for(Ge&&(mt+=Ve(Ge,We)),xt=T.smoothopen(Fe.edgepaths[He].map(we),Fe.smoothing),mt+=it?xt:xt.replace(/^M/,"L"),rt.splice(rt.indexOf(He),1),Ge=Fe.edgepaths[He][Fe.edgepaths[He].length-1],Qe=-1,ot=0;ot<4;ot++){if(!Ge){b.log("Missing end?",He,Fe);break}for(Pt(Ge)&&!Xe(Ge)?Je=ce[1]:Ze(Ge)?Je=ce[0]:kt(Ge)?Je=ce[3]:Xe(Ge)&&(Je=ce[2]),vt=0;vt<Fe.edgepaths.length;vt++){var at=Fe.edgepaths[vt][0];Math.abs(Ge[0]-Je[0])<Tt?Math.abs(Ge[0]-at[0])<Tt&&(at[1]-Ge[1])*(Je[1]-at[1])>=0&&(Je=at,Qe=vt):Math.abs(Ge[1]-Je[1])<Mt?Math.abs(Ge[1]-at[1])<Mt&&(at[0]-Ge[0])*(Je[0]-at[0])>=0&&(Je=at,Qe=vt):b.log("endpt to newendpt is not vert. or horz.",Ge,Je,at)}if(Qe>=0)break;mt+=Ve(Ge,Je),Ge=Je}if(Qe===Fe.edgepaths.length){b.log("unclosed perimeter path");break}He=Qe,(it=rt.indexOf(He)===-1)&&(He=rt[0],mt+=Ve(Ge,Je)+"Z",Ge=null)}for(He=0;He<Fe.paths.length;He++)mt+=T.smoothclosed(Fe.paths[He].map(we),Fe.smoothing);return mt}(0,ke,ve,Oe,Me,Te,ge,_e);be?M.select(this).attr("d",be).style("stroke","none"):M.select(this).remove()})}(E,S,m,_,Q,V,ae,L,C,B,re),function(ue,pe,ge,_e,me,ve,Oe){var Me=ge._context.staticPlot,Te=b.ensureSingle(ue,"g","contourlines"),se=me.showlines!==!1,oe=me.showlabels,he=se&&oe,Ee=t.createLines(Te,se||oe,pe,Me),ke=t.createLineClip(Te,he,ge,_e.trace.uid),be=ue.selectAll("g.contourlabels").data(oe?[0]:[]);if(be.exit().remove(),be.enter().append("g").classed("contourlabels",!0),oe){var Ie=ve.xaxis,Fe=ve.yaxis,ce=Ie._length,we=Fe._length,ye=[[[0,0],[ce,0],[ce,we],[0,we]]],Ce=[];b.clearLocationCache();var Re=t.labelFormatter(ge,_e),ze=T.tester.append("text").attr("data-notex",1).call(T.font,me.labelfont),He={left:0,right:ce,center:ce/2,top:0,bottom:we,middle:we/2},Ge=Math.sqrt(ce*ce+we*we),Je=i.LABELDISTANCE*Ge/Math.max(1,pe.length/i.LABELINCREASE);Ee.each(function(ot){var Qe=t.calcTextOpts(ot.level,Re,ze,ge);M.select(this).selectAll("path").each(function(vt){var xt=this,mt=b.getVisibleSegment(xt,He,Qe.height/2);if(mt&&(function(Mt,Pt,kt,Ze,Xe,Ve){for(var We,at=0;at<kt.pedgepaths.length;at++)Pt===kt.pedgepaths[at]&&(We=kt.edgepaths[at]);if(We){var et=Xe.a[0],De=Xe.a[Xe.a.length-1],Be=Xe.b[0],nt=Xe.b[Xe.b.length-1],tt=p(Mt,0,1),dt=p(Mt,Ze.total,Ze.total-1),ht=ut(We[0],tt),gt=Ze.total-ut(We[We.length-1],dt);Ze.min<ht&&(Ze.min=ht),Ze.max>gt&&(Ze.max=gt),Ze.len=Ze.max-Ze.min}function ut(wt,ct){var ft,bt=0,It=.1;return(Math.abs(wt[0]-et)<It||Math.abs(wt[0]-De)<It)&&(ft=c(Xe.dxydb_rough(wt[0],wt[1],It)),bt=Math.max(bt,Ve*x(ct,ft)/2)),(Math.abs(wt[1]-Be)<It||Math.abs(wt[1]-nt)<It)&&(ft=c(Xe.dxyda_rough(wt[0],wt[1],It)),bt=Math.max(bt,Ve*x(ct,ft)/2)),bt}}(xt,vt,ot,mt,Oe,Qe.height),!(mt.len<(Qe.width+Qe.height)*i.LABELMIN)))for(var rt=Math.min(Math.ceil(mt.len/Je),i.LABELMAX),it=0;it<rt;it++){var Tt=t.findBestTextLocation(xt,mt,Qe,Ce,He);if(!Tt)break;t.addLabelData(Tt,Qe,Ce,ye)}})}),ze.remove(),t.drawLabels(be,Ce,ge,ke,he?ye:null)}oe&&!se&&Ee.remove()}(S,O,g,w,G,h,L),T.setClipUrl(S,L._clipPathId,g)}function ae(ue){var pe=L.ab2xy(ue[0],ue[1],!0);return[m.c2p(pe[0]),_.c2p(pe[1])]}})}},64096:function(ee,D,e){var M=e(50693),k=e(5386).fF,l=e(9012),T=e(99181),b=e(1426).extendFlat;ee.exports=b({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:b({},l.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:b({},l.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(ee,D,e){var M=e(92770),k=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(78803),b=e(71828)._;ee.exports=function(d,s){for(var t=s._length,i=new Array(t),r=s.z,n=k(r)&&r.length,o=0;o<t;o++){var a=i[o]={},u=s.lon[o],p=s.lat[o];if(a.lonlat=M(u)&&M(p)?[+u,+p]:[l,l],n){var c=r[o];a.z=M(c)?c:l}}return T(d,s,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:b(d,"lat:")+" ",lon:b(d,"lon:")+" "}}),i}},52414:function(ee,D,e){var M=e(92770),k=e(71828),l=e(7901),T=e(21081),b=e(50606).BADNUM,d=e(18214).makeBlank;ee.exports=function(s){var t=s[0].trace,i=t.visible===!0&&t._length!==0,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:d()};if(!i)return r;var n,o=[],a=t.z,u=t.radius,p=k.isArrayOrTypedArray(a)&&a.length,c=k.isArrayOrTypedArray(u);for(n=0;n<s.length;n++){var x=s[n],g=x.lonlat;if(g[0]!==b){var h={};if(p){var y=x.z;h.z=y!==b?y:0}c&&(h.r=M(u[n])&&u[n]>0?+u[n]:0),o.push({type:"Feature",geometry:{type:"Point",coordinates:g},properties:h})}}var v=T.extractOpts(t),m=v.reversescale?T.flipScale(v.colorscale):v.colorscale,_=m[0][1],f=["interpolate",["linear"],["heatmap-density"],0,l.opacity(_)<1?_:l.addOpacity(_,0)];for(n=1;n<m.length;n++)f.push(m[n][0],m[n][1]);var S=["interpolate",["linear"],["get","z"],v.min,0,v.max,1];return k.extendFlat(r.heatmap.paint,{"heatmap-weight":p?S:1/(v.max-v.min),"heatmap-color":f,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:o},r.heatmap.layout.visibility="visible",r}},79429:function(ee,D,e){var M=e(71828),k=e(1586),l=e(64096);ee.exports=function(T,b,d,s){function t(o,a){return M.coerce(T,b,l,o,a)}var i=t("lon")||[],r=t("lat")||[],n=Math.min(i.length,r.length);n?(b._length=n,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,b,s,t,{prefix:"",cLetter:"z"})):b.visible=!1}},62474:function(ee){ee.exports=function(D,e){return D.lon=e.lon,D.lat=e.lat,D.z=e.z,D}},84684:function(ee,D,e){var M=e(89298),k=e(28178).hoverPoints,l=e(28178).getExtraText;ee.exports=function(T,b,d){var s=k(T,b,d);if(s){var t=s[0],i=t.cd,r=i[0].trace,n=i[t.index];if(delete t.color,"z"in n){var o=t.subplot.mockAxis;t.z=n.z,t.zLabel=M.tickText(o,o.c2l(n.z),"hover").text}return t.extraText=l(r,n,i[0].t.labels),[t]}}},93814:function(ee,D,e){ee.exports={attributes:e(64096),supplyDefaults:e(79429),colorbar:e(61243),formatLabels:e(15636),calc:e(85070),plot:e(7336),hoverPoints:e(84684),eventData:e(62474),getBelow:function(M,k){for(var l=k.getMapLayers(),T=0;T<l.length;T++){var b=l[T],d=b.id;if(b.type==="symbol"&&typeof d=="string"&&d.indexOf("plotly-")===-1)return d}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(ee,D,e){var M=e(52414),k=e(77734).traceLayerPrefix;function l(b,d){this.type="densitymapbox",this.subplot=b,this.uid=d,this.sourceId="source-"+d,this.layerList=[["heatmap",k+d+"-heatmap"]],this.below=null}var T=l.prototype;T.update=function(b){var d=this.subplot,s=this.layerList,t=M(b),i=d.belowLookup["trace-"+this.uid];d.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var r=0;r<s.length;r++){var n=s[r],o=n[0],a=n[1],u=t[o];d.setOptions(a,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&d.setOptions(a,"setPaintProperty",u.paint)}},T._addLayers=function(b,d){for(var s=this.subplot,t=this.layerList,i=this.sourceId,r=0;r<t.length;r++){var n=t[r],o=n[0],a=b[o];s.addLayer({type:o,id:n[1],source:i,layout:a.layout,paint:a.paint},d)}},T._removeLayers=function(){for(var b=this.subplot.map,d=this.layerList,s=d.length-1;s>=0;s--)b.removeLayer(d[s][1])},T.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},ee.exports=function(b,d){var s=d[0].trace,t=new l(b,s.uid),i=t.sourceId,r=M(d),n=t.below=b.belowLookup["trace-"+s.uid];return b.map.addSource(i,{type:"geojson",data:r.geojson}),t._addLayers(r,n),t}},49789:function(ee,D,e){var M=e(71828);ee.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(l.text,k,"tx"),M.mergeArray(l.hovertext,k,"htx");var b=l.marker;if(b){M.mergeArray(b.opacity,k,"mo"),M.mergeArray(b.color,k,"mc");var d=b.line;d&&(M.mergeArray(d.color,k,"mlc"),M.mergeArrayCastPositive(d.width,k,"mlw"))}}},1285:function(ee,D,e){var M,k=e(1486),l=e(82196).line,T=e(9012),b=e(12663).axisHoverFormat,d=e(5386).fF,s=e(5386).si,t=e(18517),i=e(1426).extendFlat,r=e(7901);ee.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:k.hovertext,hovertemplate:d({},{keys:t.eventDataKeys}),hoverinfo:i({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:i({},k.insidetextanchor,{dflt:"middle"}),textangle:i({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:i({},k.orientation,{}),offset:i({},k.offset,{arrayOk:!1}),width:i({},k.width,{arrayOk:!1}),marker:(M=i({},k.marker),delete M.pattern,M),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},l.color,{dflt:r.defaultLine}),width:i({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},9532:function(ee,D,e){var M=e(89298),k=e(42973),l=e(49789),T=e(66279),b=e(50606).BADNUM;function d(s){return s===b?0:s}ee.exports=function(s,t){var i,r,n,o,a,u,p,c,x=M.getFromId(s,t.xaxis||"x"),g=M.getFromId(s,t.yaxis||"y");t.orientation==="h"?(i=x.makeCalcdata(t,"x"),n=g.makeCalcdata(t,"y"),o=k(t,g,"y",n),a=!!t.yperiodalignment,u="y"):(i=g.makeCalcdata(t,"y"),n=x.makeCalcdata(t,"x"),o=k(t,x,"x",n),a=!!t.xperiodalignment,u="x"),r=o.vals;var h,y=Math.min(r.length,i.length),v=new Array(y);for(t._base=[],p=0;p<y;p++){i[p]<0&&(i[p]=b);var m=!1;i[p]!==b&&p+1<y&&i[p+1]!==b&&(m=!0),c=v[p]={p:r[p],s:i[p],cNext:m},t._base[p]=-.5*c.s,a&&(v[p].orig_p=n[p],v[p][u+"End"]=o.ends[p],v[p][u+"Start"]=o.starts[p]),t.ids&&(c.id=String(t.ids[p])),p===0&&(v[0].vTotal=0),v[0].vTotal+=d(c.s),c.begR=d(c.s)/d(v[0].s)}for(p=0;p<y;p++)(c=v[p]).s!==b&&(c.sumR=c.s/v[0].vTotal,c.difR=h!==void 0?c.s/h:1,h=c.s);return l(v,t),T(v,t),v}},18517:function(ee){ee.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(ee,D,e){var M=e(11661).setGroupPositions;ee.exports=function(k,l){var T,b,d=k._fullLayout,s=k._fullData,t=k.calcdata,i=l.xaxis,r=l.yaxis,n=[],o=[],a=[];for(b=0;b<s.length;b++){var u=s[b],p=u.orientation==="h";u.visible===!0&&u.xaxis===i._id&&u.yaxis===r._id&&u.type==="funnel"&&(T=t[b],p?a.push(T):o.push(T),n.push(T))}var c={mode:d.funnelmode,norm:d.funnelnorm,gap:d.funnelgap,groupgap:d.funnelgroupgap};for(M(k,i,r,o,c),M(k,r,i,a,c),b=0;b<n.length;b++){T=n[b];for(var x=0;x<T.length;x++)x+1<T.length&&(T[x].nextP0=T[x+1].p0,T[x].nextS0=T[x+1].s0,T[x].nextP1=T[x+1].p1,T[x].nextS1=T[x+1].s1)}}},26199:function(ee,D,e){var M=e(71828),k=e(26125),l=e(90769).handleText,T=e(67513),b=e(73927),d=e(1285),s=e(7901);ee.exports={supplyDefaults:function(t,i,r,n){function o(c,x){return M.coerce(t,i,d,c,x)}if(T(t,i,n,o)){b(t,i,n,o),o("xhoverformat"),o("yhoverformat"),o("orientation",i.y&&!i.x?"v":"h"),o("offset"),o("width");var a=o("text");o("hovertext"),o("hovertemplate");var u=o("textposition");l(t,i,n,o,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||o("textinfo",Array.isArray(a)?"text+value":"value");var p=o("marker.color",r);o("marker.line.color",s.defaultLine),o("marker.line.width"),o("connector.visible")&&(o("connector.fillcolor",function(c){var x=M.isArrayOrTypedArray(c)?"#000":c;return s.addOpacity(x,.5*s.opacity(x))}(p)),o("connector.line.width")&&(o("connector.line.color"),o("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(t,i){var r,n;function o(u){return M.coerce(n._input,n,d,u)}if(i.funnelmode==="group")for(var a=0;a<t.length;a++)r=(n=t[a])._input,k(r,n,i,o)}}},34598:function(ee){ee.exports=function(D,e){return D.x="xVal"in e?e.xVal:e.x,D.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(D.percentInitial=e.percentInitial),"percentPrevious"in e&&(D.percentPrevious=e.percentPrevious),"percentTotal"in e&&(D.percentTotal=e.percentTotal),e.xa&&(D.xaxis=e.xa),e.ya&&(D.yaxis=e.ya),D}},63341:function(ee,D,e){var M=e(7901).opacity,k=e(95423).hoverOnBars,l=e(71828).formatPercent;ee.exports=function(T,b,d,s,t){var i=k(T,b,d,s,t);if(i){var r=i.cd,n=r[0].trace,o=n.orientation==="h",a=r[i.index];i[(o?"x":"y")+"LabelVal"]=a.s,i.percentInitial=a.begR,i.percentInitialLabel=l(a.begR,1),i.percentPrevious=a.difR,i.percentPreviousLabel=l(a.difR,1),i.percentTotal=a.sumR,i.percentTotalLabel=l(a.sumR,1);var u=a.hi||n.hoverinfo,p=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",x=u.split("+"),g=function(h){return c||x.indexOf(h)!==-1};g("percent initial")&&p.push(i.percentInitialLabel+" of initial"),g("percent previous")&&p.push(i.percentPreviousLabel+" of previous"),g("percent total")&&p.push(i.percentTotalLabel+" of total")}return i.extraText=p.join("<br>"),i.color=function(h,y){var v=h.marker,m=y.mc||v.color,_=y.mlc||v.line.color,f=y.mlw||v.line.width;return M(m)?m:M(_)&&f?_:void 0}(n,a),[i]}}},51759:function(ee,D,e){ee.exports={attributes:e(1285),layoutAttributes:e(10440),supplyDefaults:e(26199).supplyDefaults,crossTraceDefaults:e(26199).crossTraceDefaults,supplyLayoutDefaults:e(93138),calc:e(9532),crossTraceCalc:e(8984),plot:e(80461),style:e(68266).style,hoverPoints:e(63341),eventData:e(34598),selectPoints:e(81974),moduleType:"trace",name:"funnel",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(ee){ee.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(ee,D,e){var M=e(71828),k=e(10440);ee.exports=function(l,T,b){var d=!1;function s(r,n){return M.coerce(l,T,k,r,n)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="funnel"){d=!0;break}}d&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},80461:function(ee,D,e){var M=e(39898),k=e(71828),l=e(91424),T=e(50606).BADNUM,b=e(17295),d=e(72597).clearMinTextSize;function s(t,i,r,n){var o=[],a=[],u=n?i:r,p=n?r:i;return o[0]=u.c2p(t.s0,!0),a[0]=p.c2p(t.p0,!0),o[1]=u.c2p(t.s1,!0),a[1]=p.c2p(t.p1,!0),o[2]=u.c2p(t.nextS0,!0),a[2]=p.c2p(t.nextP0,!0),o[3]=u.c2p(t.nextS1,!0),a[3]=p.c2p(t.nextP1,!0),n?[o,a]:[a,o]}ee.exports=function(t,i,r,n){var o=t._fullLayout;d("funnel",o),function(a,u,p,c){var x=u.xaxis,g=u.yaxis;k.makeTraceGroups(c,p,"trace bars").each(function(h){var y=M.select(this),v=h[0].trace,m=k.ensureSingle(y,"g","regions");if(v.connector&&v.connector.visible){var _=v.orientation==="h",f=m.selectAll("g.region").data(k.identity);f.enter().append("g").classed("region",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var L=s(w,x,g,_),C=L[0],P=L[1],z="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&C[2]!==T&&P[2]!==T&&C[3]!==T&&P[3]!==T&&(z+=_?"M"+C[0]+","+P[1]+"L"+C[2]+","+P[2]+"H"+C[3]+"L"+C[1]+","+P[1]+"Z":"M"+C[1]+","+P[1]+"L"+C[2]+","+P[3]+"V"+P[2]+"L"+C[1]+","+P[0]+"Z"),z===""&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(l.setClipUrl,u.layerClipId,a)}})}else m.remove()})}(t,i,r,n),function(a,u,p,c){var x=u.xaxis,g=u.yaxis;k.makeTraceGroups(c,p,"trace bars").each(function(h){var y=M.select(this),v=h[0].trace,m=k.ensureSingle(y,"g","lines");if(v.connector&&v.connector.visible&&v.connector.line.width){var _=v.orientation==="h",f=m.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var L=s(w,x,g,_),C=L[0],P=L[1],z="";C[3]!==void 0&&P[3]!==void 0&&(_?(z+="M"+C[0]+","+P[1]+"L"+C[2]+","+P[2],z+="M"+C[1]+","+P[1]+"L"+C[3]+","+P[2]):(z+="M"+C[1]+","+P[1]+"L"+C[2]+","+P[3],z+="M"+C[1]+","+P[0]+"L"+C[2]+","+P[2])),z===""&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(l.setClipUrl,u.layerClipId,a)}})}else m.remove()})}(t,i,r,n),b.plot(t,i,r,n,{mode:o.funnelmode,norm:o.funnelmode,gap:o.funnelgap,groupgap:o.funnelgroupgap})}},68266:function(ee,D,e){var M=e(39898),k=e(91424),l=e(7901),T=e(37822).DESELECTDIM,b=e(16688),d=e(72597).resizeText,s=b.styleTextPoints;ee.exports={style:function(t,i,r){var n=r||M.select(t).selectAll("g.funnellayer").selectAll("g.trace");d(t,n,"funnel"),n.style("opacity",function(o){return o[0].trace.opacity}),n.each(function(o){var a=M.select(this),u=o[0].trace;a.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u.marker;M.select(this).call(l.fill,p.mc||c.color).call(l.stroke,p.mlc||c.line.color).call(k.dashLine,c.line.dash,p.mlw||c.line.width).style("opacity",u.selectedpoints&&!p.selected?T:1)}}),s(a,u,t),a.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(l.fill,u.connector.fillcolor)}),a.selectAll(".lines").each(function(){var p=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},86807:function(ee,D,e){var M=e(34e3),k=e(9012),l=e(27670).Y,T=e(5386).fF,b=e(5386).si,d=e(1426).extendFlat;ee.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:d({},M.marker.line.color,{dflt:null}),width:d({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:d({},M.scalegroup,{}),textinfo:d({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:d({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:d({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:d({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:l({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(ee,D,e){var M=e(74875);D.name="funnelarea",D.plot=function(k,l,T,b){M.plotBasePlot(D.name,k,l,T,b)},D.clean=function(k,l,T,b){M.cleanBasePlot(D.name,k,l,T,b)}},89574:function(ee,D,e){var M=e(32354);ee.exports={calc:function(k,l){return M.calc(k,l)},crossTraceCalc:function(k){M.crossTraceCalc(k,{type:"funnelarea"})}}},86282:function(ee,D,e){var M=e(71828),k=e(86807),l=e(27670).c,T=e(90769).handleText,b=e(37434).handleLabelsAndValues,d=e(37434).handleMarkerDefaults;ee.exports=function(s,t,i,r){function n(y,v){return M.coerce(s,t,k,y,v)}var o=n("labels"),a=n("values"),u=b(o,a),p=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),p){t._length=p,d(s,t,r,n),n("scalegroup");var c,x=n("text"),g=n("texttemplate");if(g||(c=n("textinfo",Array.isArray(x)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),g||c&&c!=="none"){var h=n("textposition");T(s,t,r,n,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}l(t,r,n),n("title.text")&&(n("title.position"),M.coerceFont(n,"title.font",r.font)),n("aspectratio"),n("baseratio")}else t.visible=!1}},10421:function(ee,D,e){ee.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(6452),categories:["pie-like","funnelarea","showLegend"],attributes:e(86807),layoutAttributes:e(80097),supplyDefaults:e(86282),supplyLayoutDefaults:e(57402),calc:e(89574).calc,crossTraceCalc:e(89574).crossTraceCalc,plot:e(79187),style:e(71858),styleOne:e(63463),meta:{}}},80097:function(ee,D,e){var M=e(92774).hiddenlabels;ee.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(ee,D,e){var M=e(71828),k=e(80097);ee.exports=function(l,T){function b(d,s){return M.coerce(l,T,k,d,s)}b("hiddenlabels"),b("funnelareacolorway",T.colorway),b("extendfunnelareacolors")}},79187:function(ee,D,e){var M=e(39898),k=e(91424),l=e(71828),T=l.strScale,b=l.strTranslate,d=e(63893),s=e(17295).toMoveInsideBar,t=e(72597),i=t.recordMinTextSize,r=t.clearMinTextSize,n=e(53581),o=e(14575),a=o.attachFxHandlers,u=o.determineInsideTextFont,p=o.layoutAreas,c=o.prerenderTitles,x=o.positionTitleOutside,g=o.formatSliceLabel;function h(y,v){return"l"+(v[0]-y[0])+","+(v[1]-y[1])}ee.exports=function(y,v){var m=y._context.staticPlot,_=y._fullLayout;r("funnelarea",_),c(v,y),p(v,_._size),l.makeTraceGroups(_._funnelarealayer,v,"trace").each(function(f){var S=M.select(this),w=f[0],E=w.trace;(function(L){if(L.length){var C=L[0],P=C.trace,z=P.aspectratio,G=P.baseratio;G>.999&&(G=.999);var O,H,N,B=Math.pow(G,2),V=C.vTotal,q=V,te=V*B/(1-B)/V,K=[];for(K.push(Te()),H=L.length-1;H>-1;H--)if(!(N=L[H]).hidden){var J=N.v/q;te+=J,K.push(Te())}var Y=1/0,W=-1/0;for(H=0;H<K.length;H++)O=K[H],Y=Math.min(Y,O[1]),W=Math.max(W,O[1]);for(H=0;H<K.length;H++)K[H][1]-=(W+Y)/2;var Q=K[K.length-1][0],ne=C.r,re=(W-Y)/2,ae=ne/Q,ue=ne/re*z;for(C.r=ue*re,H=0;H<K.length;H++)K[H][0]*=ae,K[H][1]*=ue;var pe,ge,_e=[-(O=K[0])[0],O[1]],me=[O[0],O[1]],ve=0;for(H=L.length-1;H>-1;H--)if(!(N=L[H]).hidden){var Oe=K[ve+=1][0],Me=K[ve][1];N.TL=[-Oe,Me],N.TR=[Oe,Me],N.BL=_e,N.BR=me,N.pxmid=(pe=N.TR,ge=N.BR,[.5*(pe[0]+ge[0]),.5*(pe[1]+ge[1])]),_e=N.TL,me=N.TR}}function Te(){var se,oe={x:se=Math.sqrt(te),y:-se};return[oe.x,oe.y]}})(f),S.each(function(){var L=M.select(this).selectAll("g.slice").data(f);L.enter().append("g").classed("slice",!0),L.exit().remove(),L.each(function(P,z){if(P.hidden)M.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var G=w.cx,O=w.cy,H=M.select(this),N=H.selectAll("path.surface").data([P]);N.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),H.call(a,y,f);var B="M"+(G+P.TR[0])+","+(O+P.TR[1])+h(P.TR,P.BR)+h(P.BR,P.BL)+h(P.BL,P.TL)+"Z";N.attr("d",B),g(y,P,w);var V=n.castOption(E.textposition,P.pts),q=H.selectAll("g.slicetext").data(P.text&&V!=="none"?[0]:[]);q.enter().append("g").classed("slicetext",!0),q.exit().remove(),q.each(function(){var te=l.ensureSingle(M.select(this),"text","",function(ae){ae.attr("data-notex",1)}),K=l.ensureUniformFontSize(y,u(E,P,_.font));te.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,K).call(d.convertToTspans,y);var J,Y,W,Q=k.bBox(te.node()),ne=Math.min(P.BL[1],P.BR[1])+O,re=Math.max(P.TL[1],P.TR[1])+O;Y=Math.max(P.TL[0],P.BL[0])+G,W=Math.min(P.TR[0],P.BR[0])+G,(J=s(Y,W,ne,re,Q,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=K.size,i(E.type,J,_),f[z].transform=J,l.setTransormAndDisplay(te,J)})}});var C=M.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var P=l.ensureSingle(M.select(this),"text","",function(O){O.attr("data-notex",1)}),z=E.title.text;E._meta&&(z=l.templateString(z,E._meta)),P.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(d.convertToTspans,y);var G=x(w,_._size);P.attr("transform",b(G.x,G.y)+T(Math.min(1,G.scale))+b(G.tx,G.ty))})})})}},71858:function(ee,D,e){var M=e(39898),k=e(63463),l=e(72597).resizeText;ee.exports=function(T){var b=T._fullLayout._funnelarealayer.selectAll(".trace");l(T,b,"funnelarea"),b.each(function(d){var s=d[0].trace,t=M.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,s,T)})})}},21606:function(ee,D,e){var M=e(82196),k=e(9012),l=e(41940),T=e(12663).axisHoverFormat,b=e(5386).fF,d=e(5386).si,s=e(50693),t=e(1426).extendFlat;ee.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},M.x,{impliedEdits:{xtype:"array"}}),x0:t({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},M.y,{impliedEdits:{ytype:"array"}}),y0:t({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:b(),texttemplate:d({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:l({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},90757:function(ee,D,e){var M=e(73972),k=e(71828),l=e(89298),T=e(42973),b=e(17562),d=e(78803),s=e(68296),t=e(4742),i=e(824),r=e(43907),n=e(70769),o=e(50606).BADNUM;function a(u){for(var p=[],c=u.length,x=0;x<c;x++){var g=u[x];g!==o&&p.push(g)}return p}ee.exports=function(u,p){var c,x,g,h,y,v,m,_,f,S,w,E=l.getFromId(u,p.xaxis||"x"),L=l.getFromId(u,p.yaxis||"y"),C=M.traceIs(p,"contour"),P=M.traceIs(p,"histogram"),z=M.traceIs(p,"gl2d"),G=C?"best":p.zsmooth;if(E._minDtick=0,L._minDtick=0,P)h=(w=b(u,p)).orig_x,c=w.x,x=w.x0,g=w.dx,_=w.orig_y,y=w.y,v=w.y0,m=w.dy,f=w.z;else{var O=p.z;k.isArray1D(O)?(s(p,E,L,"x","y",["z"]),c=p._x,y=p._y,O=p._z):(h=p.x?E.makeCalcdata(p,"x"):[],_=p.y?L.makeCalcdata(p,"y"):[],c=T(p,E,"x",h).vals,y=T(p,L,"y",_).vals,p._x=c,p._y=y),x=p.x0,g=p.dx,v=p.y0,m=p.dy,f=t(O,p,E,L)}function H(W){G=p._input.zsmooth=p.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+W)}function N(W){if(W.length>1){var Q=(W[W.length-1]-W[0])/(W.length-1),ne=Math.abs(Q/100);for(S=0;S<W.length-1;S++)if(Math.abs(W[S+1]-W[S]-Q)>ne)return!1}return!0}(E.rangebreaks||L.rangebreaks)&&(f=function(W,Q,ne){for(var re=[],ae=-1,ue=0;ue<ne.length;ue++)if(Q[ue]!==o){re[++ae]=[];for(var pe=0;pe<ne[ue].length;pe++)W[pe]!==o&&re[ae].push(ne[ue][pe])}return re}(c,y,f),P||(c=a(c),y=a(y),p._x=c,p._y=y)),P||!C&&!p.connectgaps||(p._emptypoints=r(f),i(f,p._emptypoints)),p._islinear=!1,E.type==="log"||L.type==="log"?G==="fast"&&H("log axis found"):N(c)?N(y)?p._islinear=!0:G==="fast"&&H("y scale is not linear"):G==="fast"&&H("x scale is not linear");var B=k.maxRowLength(f),V=p.xtype==="scaled"?"":c,q=n(p,V,x,g,B,E),te=p.ytype==="scaled"?"":y,K=n(p,te,v,m,f.length,L);z||(p._extremes[E._id]=l.findExtremes(E,q),p._extremes[L._id]=l.findExtremes(L,K));var J={x:q,y:K,z:f,text:p._text||p.text,hovertext:p._hovertext||p.hovertext};if(p.xperiodalignment&&h&&(J.orig_x=h),p.yperiodalignment&&_&&(J.orig_y=_),V&&V.length===q.length-1&&(J.xCenter=V),te&&te.length===K.length-1&&(J.yCenter=te),P&&(J.xRanges=w.xRanges,J.yRanges=w.yRanges,J.pts=w.pts),C||d(u,p,{vals:f,cLetter:"z"}),C&&p.contours&&p.contours.coloring==="heatmap"){var Y={type:p.type==="contour"?"heatmap":"histogram2d",xcalendar:p.xcalendar,ycalendar:p.ycalendar};J.xfill=n(Y,V,x,g,B,E),J.yfill=n(Y,te,v,m,f.length,L)}return[J]}},4742:function(ee,D,e){var M=e(92770),k=e(71828),l=e(50606).BADNUM;ee.exports=function(T,b,d,s){var t,i,r,n,o,a;function u(y){if(M(y))return+y}if(b&&b.transpose){for(t=0,o=0;o<T.length;o++)t=Math.max(t,T[o].length);if(t===0)return!1;r=function(y){return y.length},n=function(y,v,m){return(y[m]||[])[v]}}else t=T.length,r=function(y,v){return y[v].length},n=function(y,v,m){return(y[v]||[])[m]};var p=function(y,v,m){return v===l||m===l?l:n(y,v,m)};function c(y){if(b&&b.type!=="carpet"&&b.type!=="contourcarpet"&&y&&y.type==="category"&&b["_"+y._id.charAt(0)].length){var v=y._id.charAt(0),m={},_=b["_"+v+"CategoryMap"]||b[v];for(o=0;o<_.length;o++)m[_[o]]=o;return function(f){var S=m[y._categories[f]];return S+1?S:l}}return k.identity}var x=c(d),g=c(s);s&&s.type==="category"&&(t=s._categories.length);var h=new Array(t);for(o=0;o<t;o++)for(i=d&&d.type==="category"?d._categories.length:r(T,o),h[o]=new Array(i),a=0;a<i;a++)h[o][a]=u(p(T,g(o),x(a)));return h}},61243:function(ee){ee.exports={min:"zmin",max:"zmax"}},68296:function(ee,D,e){var M=e(71828),k=e(50606).BADNUM,l=e(42973);ee.exports=function(T,b,d,s,t,i){var r=T._length,n=b.makeCalcdata(T,s),o=d.makeCalcdata(T,t);n=l(T,b,s,n).vals,o=l(T,d,t,o).vals;var a,u,p,c,x=T.text,g=x!==void 0&&M.isArray1D(x),h=T.hovertext,y=h!==void 0&&M.isArray1D(h),v=M.distinctVals(n),m=v.vals,_=M.distinctVals(o),f=_.vals,S=[],w=f.length,E=m.length;for(a=0;a<i.length;a++)S[a]=M.init2dArray(w,E);g&&(p=M.init2dArray(w,E)),y&&(c=M.init2dArray(w,E));var L=M.init2dArray(w,E);for(a=0;a<r;a++)if(n[a]!==k&&o[a]!==k){var C=M.findBin(n[a]+v.minDiff/2,m),P=M.findBin(o[a]+_.minDiff/2,f);for(u=0;u<i.length;u++){var z=T[i[u]];S[u][P][C]=z[a],L[P][C]=a}g&&(p[P][C]=x[a]),y&&(c[P][C]=h[a])}for(T["_"+s]=m,T["_"+t]=f,u=0;u<i.length;u++)T["_"+i[u]]=S[u];g&&(T._text=p),y&&(T._hovertext=c),b&&b.type==="category"&&(T["_"+s+"CategoryMap"]=m.map(function(G){return b._categories[G]})),d&&d.type==="category"&&(T["_"+t+"CategoryMap"]=f.map(function(G){return d._categories[G]})),T._after2before=L}},76382:function(ee,D,e){var M=e(71828),k=e(67684),l=e(58623),T=e(73927),b=e(49901),d=e(1586),s=e(21606);ee.exports=function(t,i,r,n){function o(a,u){return M.coerce(t,i,s,a,u)}k(t,i,o,n)?(T(t,i,n,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hovertemplate"),l(o,n),b(t,i,o,n),o("hoverongaps"),o("connectgaps",M.isArray1D(i.z)&&i.zsmooth!==!1),d(t,i,n,o,{prefix:"",cLetter:"z"})):i.visible=!1}},43907:function(ee,D,e){var M=e(71828).maxRowLength;ee.exports=function(k){var l,T,b,d,s,t,i,r,n=[],o={},a=[],u=k[0],p=[],c=[0,0,0],x=M(k);for(T=0;T<k.length;T++)for(l=p,p=u,u=k[T+1]||[],b=0;b<x;b++)p[b]===void 0&&((t=(p[b-1]!==void 0?1:0)+(p[b+1]!==void 0?1:0)+(l[b]!==void 0?1:0)+(u[b]!==void 0?1:0))?(T===0&&t++,b===0&&t++,T===k.length-1&&t++,b===p.length-1&&t++,t<4&&(o[[T,b]]=[T,b,t]),n.push([T,b,t])):a.push([T,b]));for(;a.length;){for(i={},r=!1,s=a.length-1;s>=0;s--)(t=((o[[(T=(d=a[s])[0])-1,b=d[1]]]||c)[2]+(o[[T+1,b]]||c)[2]+(o[[T,b-1]]||c)[2]+(o[[T,b+1]]||c)[2])/20)&&(i[d]=[T,b,t],a.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(d in i)o[d]=i[d],n.push(i[d])}return n.sort(function(g,h){return h[2]-g[2]})}},46248:function(ee,D,e){var M=e(30211),k=e(71828),l=e(89298),T=e(21081).extractOpts;ee.exports=function(b,d,s,t,i){i||(i={});var r,n,o,a,u=i.isContour,p=b.cd[0],c=p.trace,x=b.xa,g=b.ya,h=p.x,y=p.y,v=p.z,m=p.xCenter,_=p.yCenter,f=p.zmask,S=c.zhoverformat,w=h,E=y;if(b.index!==!1){try{o=Math.round(b.index[1]),a=Math.round(b.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",b.index)}if(o<0||o>=v[0].length||a<0||a>v.length)return}else{if(M.inbox(d-h[0],d-h[h.length-1],0)>0||M.inbox(s-y[0],s-y[y.length-1],0)>0)return;if(u){var L;for(w=[2*h[0]-h[1]],L=1;L<h.length;L++)w.push((h[L]+h[L-1])/2);for(w.push([2*h[h.length-1]-h[h.length-2]]),E=[2*y[0]-y[1]],L=1;L<y.length;L++)E.push((y[L]+y[L-1])/2);E.push([2*y[y.length-1]-y[y.length-2]])}o=Math.max(0,Math.min(w.length-2,k.findBin(d,w))),a=Math.max(0,Math.min(E.length-2,k.findBin(s,E)))}var C,P,z=x.c2p(h[o]),G=x.c2p(h[o+1]),O=g.c2p(y[a]),H=g.c2p(y[a+1]);u?(C=p.orig_x||h,P=p.orig_y||y,G=z,r=C[o],H=O,n=P[a]):(C=p.orig_x||m||h,P=p.orig_y||_||y,r=m?C[o]:(C[o]+C[o+1])/2,n=_?P[a]:(P[a]+P[a+1])/2,x&&x.type==="category"&&(r=h[o]),g&&g.type==="category"&&(n=y[a]),c.zsmooth&&(z=G=x.c2p(r),O=H=g.c2p(n)));var N=v[a][o];if(f&&!f[a][o]&&(N=void 0),N!==void 0||c.hoverongaps){var B;Array.isArray(p.hovertext)&&Array.isArray(p.hovertext[a])?B=p.hovertext[a][o]:Array.isArray(p.text)&&Array.isArray(p.text[a])&&(B=p.text[a][o]);var V=T(c),q={type:"linear",range:[V.min,V.max],hoverformat:S,_separators:x._separators,_numFormat:x._numFormat},te=l.tickText(q,N,"hover").text;return[k.extendFlat(b,{index:c._after2before?c._after2before[a][o]:[a,o],distance:b.maxHoverDistance,spikeDistance:b.maxSpikeDistance,x0:z,x1:G,y0:O,y1:H,xLabelVal:r,yLabelVal:n,zLabelVal:N,zLabel:te,text:B})]}}},92165:function(ee,D,e){ee.exports={attributes:e(21606),supplyDefaults:e(76382),calc:e(90757),plot:e(50347),colorbar:e(61243),style:e(70035),hoverPoints:e(46248),moduleType:"trace",name:"heatmap",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(ee,D,e){var M=e(71828),k=[[-1,0],[1,0],[0,-1],[0,1]];function l(b){return .5-.25*Math.min(1,.5*b)}function T(b,d,s){var t,i,r,n,o,a,u,p,c,x,g,h,y,v=0;for(n=0;n<d.length;n++){for(i=(t=d[n])[0],r=t[1],g=b[i][r],x=0,c=0,o=0;o<4;o++)(u=b[i+(a=k[o])[0]])&&(p=u[r+a[1]])!==void 0&&(x===0?h=y=p:(h=Math.min(h,p),y=Math.max(y,p)),c++,x+=p);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";b[i][r]=x/c,g===void 0?c<4&&(v=1):(b[i][r]=(1+s)*b[i][r]-s*g,y>h&&(v=Math.max(v,Math.abs(b[i][r]-g)/(y-h))))}return v}ee.exports=function(b,d){var s,t=1;for(T(b,d),s=0;s<d.length&&!(d[s][2]<4);s++);for(d=d.slice(s),s=0;s<100&&t>.01;s++)t=T(b,d,l(t));return t>.01&&M.log("interp2d didn't converge quickly",t),b}},58623:function(ee,D,e){var M=e(71828);ee.exports=function(k,l){k("texttemplate");var T=M.extendFlat({},l.font,{color:"auto",size:"auto"});M.coerceFont(k,"textfont",T)}},70769:function(ee,D,e){var M=e(73972),k=e(71828).isArrayOrTypedArray;ee.exports=function(l,T,b,d,s,t){var i,r,n,o=[],a=M.traceIs(l,"contour"),u=M.traceIs(l,"histogram"),p=M.traceIs(l,"gl2d");if(k(T)&&T.length>1&&!u&&t.type!=="category"){var c=T.length;if(!(c<=s))return a?T.slice(0,s):T.slice(0,s+1);if(a||p)o=T.slice(0,s);else if(s===1)o=[T[0]-.5,T[0]+.5];else{for(o=[1.5*T[0]-.5*T[1]],n=1;n<c;n++)o.push(.5*(T[n-1]+T[n]));o.push(1.5*T[c-1]-.5*T[c-2])}if(c<s){var x=o[o.length-1],g=x-o[o.length-2];for(n=c;n<s;n++)x+=g,o.push(x)}}else{var h=l[t._id.charAt(0)+"calendar"];for(i=u?t.r2c(b,0,h):k(T)&&T.length===1?T[0]:b===void 0?0:(t.type==="log"?t.d2c:t.r2c)(b,0,h),r=d||1,n=a||p?0:-.5;n<s;n++)o.push(i+r*n)}return o}},50347:function(ee,D,e){var M=e(39898),k=e(84267),l=e(73972),T=e(91424),b=e(89298),d=e(71828),s=e(63893),t=e(8225),i=e(7901),r=e(21081).extractOpts,n=e(21081).makeColorScaleFuncFromTrace,o=e(77922),a=e(18783).LINE_SPACING,u=e(3883),p=e(32396).STYLE,c="heatmap-label";function x(m){return m.selectAll("g."+c)}function g(m){x(m).remove()}function h(m,_){var f=_.length-2,S=d.constrain(d.findBin(m,_),0,f),w=_[S],E=_[S+1],L=d.constrain(S+(m-w)/(E-w)-.5,0,f),C=Math.round(L),P=Math.abs(L-C);return L&&L!==f&&P?{bin0:C,frac:P,bin1:Math.round(C+P/(L-C))}:{bin0:C,bin1:C,frac:0}}function y(m,_){var f=_.length-1,S=d.constrain(d.findBin(m,_),0,f),w=_[S],E=(m-w)/(_[S+1]-w)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function v(m,_,f){m[_]=f[0],m[_+1]=f[1],m[_+2]=f[2],m[_+3]=Math.round(255*f[3])}ee.exports=function(m,_,f,S){var w=_.xaxis,E=_.yaxis;d.makeTraceGroups(S,f,"hm").each(function(L){var C,P,z,G,O,H,N,B,V=M.select(this),q=L[0],te=q.trace,K=te.xgap||0,J=te.ygap||0,Y=q.z,W=q.x,Q=q.y,ne=q.xCenter,re=q.yCenter,ae=l.traceIs(te,"contour"),ue=ae?"best":te.zsmooth,pe=Y.length,ge=d.maxRowLength(Y),_e=!1,me=!1;for(H=0;C===void 0&&H<W.length-1;)C=w.c2p(W[H]),H++;for(H=W.length-1;P===void 0&&H>0;)P=w.c2p(W[H]),H--;for(P<C&&(z=P,P=C,C=z,_e=!0),H=0;G===void 0&&H<Q.length-1;)G=E.c2p(Q[H]),H++;for(H=Q.length-1;O===void 0&&H>0;)O=E.c2p(Q[H]),H--;O<G&&(z=G,G=O,O=z,me=!0),ae&&(ne=W,re=Q,W=q.xfill,Q=q.yfill);var ve="default";if(ue?ve=ue==="best"?"smooth":"fast":te._islinear&&K===0&&J===0&&u()&&(ve="fast"),ve!=="fast"){var Oe=ue==="best"?0:.5;C=Math.max(-Oe*w._length,C),P=Math.min((1+Oe)*w._length,P),G=Math.max(-Oe*E._length,G),O=Math.min((1+Oe)*E._length,O)}var Me,Te,se=Math.round(P-C),oe=Math.round(O-G);if(C>=w._length||P<=0||G>=E._length||O<=0)return V.selectAll("image").data([]).exit().remove(),void g(V);ve==="fast"?(Me=ge,Te=pe):(Me=se,Te=oe);var he=document.createElement("canvas");he.width=Me,he.height=Te;var Ee,ke,be=he.getContext("2d",{willReadFrequently:!0}),Ie=n(te,{noNumericCheck:!0,returnArray:!0});ve==="fast"?(Ee=_e?function(Rt){return ge-1-Rt}:d.identity,ke=me?function(Rt){return pe-1-Rt}:d.identity):(Ee=function(Rt){return d.constrain(Math.round(w.c2p(W[Rt])-C),0,se)},ke=function(Rt){return d.constrain(Math.round(E.c2p(Q[Rt])-G),0,oe)});var Fe,ce,we,ye,Ce=ke(0),Re=[Ce,Ce],ze=_e?0:1,He=me?0:1,Ge=0,Je=0,ot=0,Qe=0;function vt(Rt,$t){if(Rt!==void 0){var an=Ie(Rt);return an[0]=Math.round(an[0]),an[1]=Math.round(an[1]),an[2]=Math.round(an[2]),Ge+=$t,Je+=an[0]*$t,ot+=an[1]*$t,Qe+=an[2]*$t,an}return[0,0,0,0]}function xt(Rt,$t,an,fn){var wn=Rt[an.bin0];if(wn===void 0)return vt(void 0,1);var Bn,Ln=Rt[an.bin1],In=$t[an.bin0],Wn=$t[an.bin1],Vt=Ln-wn||0,_n=In-wn||0;return Bn=Ln===void 0?Wn===void 0?0:In===void 0?2*(Wn-wn):2*(2*Wn-In-wn)/3:Wn===void 0?In===void 0?0:2*(2*wn-Ln-In)/3:In===void 0?2*(2*Wn-Ln-wn)/3:Wn+wn-Ln-In,vt(wn+an.frac*Vt+fn.frac*(_n+an.frac*Bn))}if(ve!=="default"){var mt,rt=0;try{mt=new Uint8Array(Me*Te*4)}catch{mt=new Array(Me*Te*4)}if(ve==="smooth"){var it,Tt,Mt,Pt=ne||W,kt=re||Q,Ze=new Array(Pt.length),Xe=new Array(kt.length),Ve=new Array(se),We=ne?y:h,at=re?y:h;for(H=0;H<Pt.length;H++)Ze[H]=Math.round(w.c2p(Pt[H])-C);for(H=0;H<kt.length;H++)Xe[H]=Math.round(E.c2p(kt[H])-G);for(H=0;H<se;H++)Ve[H]=We(H,Ze);for(N=0;N<oe;N++)for(Tt=Y[(it=at(N,Xe)).bin0],Mt=Y[it.bin1],H=0;H<se;H++,rt+=4)v(mt,rt,ye=xt(Tt,Mt,Ve[H],it))}else for(N=0;N<pe;N++)for(we=Y[N],Re=ke(N),H=0;H<ge;H++)ye=vt(we[H],1),v(mt,rt=4*(Re*ge+Ee(H)),ye);var et=be.createImageData(Me,Te);try{et.data.set(mt)}catch{var De=et.data,Be=De.length;for(N=0;N<Be;N++)De[N]=mt[N]}be.putImageData(et,0,0)}else{var nt=Math.floor(K/2),tt=Math.floor(J/2);for(N=0;N<pe;N++)if(we=Y[N],Re.reverse(),Re[He]=ke(N+1),Re[0]!==Re[1]&&Re[0]!==void 0&&Re[1]!==void 0)for(Fe=[ce=Ee(0),ce],H=0;H<ge;H++)Fe.reverse(),Fe[ze]=Ee(H+1),Fe[0]!==Fe[1]&&Fe[0]!==void 0&&Fe[1]!==void 0&&(ye=vt(we[H],(Fe[1]-Fe[0])*(Re[1]-Re[0])),be.fillStyle="rgba("+ye.join(",")+")",be.fillRect(Fe[0]+nt,Re[0]+tt,Fe[1]-Fe[0]-K,Re[1]-Re[0]-J))}Je=Math.round(Je/Ge),ot=Math.round(ot/Ge),Qe=Math.round(Qe/Ge);var dt=k("rgb("+Je+","+ot+","+Qe+")");m._hmpixcount=(m._hmpixcount||0)+Ge,m._hmlumcount=(m._hmlumcount||0)+Ge*dt.getLuminance();var ht=V.selectAll("image").data(L);ht.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),ht.attr({height:oe,width:se,x:C,y:G,"xlink:href":he.toDataURL("image/png")}),ve!=="fast"||ue||ht.attr("style",p),g(V);var gt=te.texttemplate;if(gt){var ut=r(te),wt={type:"linear",range:[ut.min,ut.max],_separators:w._separators,_numFormat:w._numFormat},ct=te.type==="histogram2dcontour",ft=te.type==="contour",bt=ft?pe-1:pe,It=ft?1:0,Dt=ft?ge-1:ge,Nt=[];for(H=ft?1:0;H<bt;H++){var Qt;if(ft)Qt=q.y[H];else if(ct){if(H===0||H===pe-1)continue;Qt=q.y[H]}else if(q.yCenter)Qt=q.yCenter[H];else{if(H+1===pe&&q.y[H+1]===void 0)continue;Qt=(q.y[H]+q.y[H+1])/2}var jt=Math.round(E.c2p(Qt));if(!(0>jt||jt>E._length))for(N=It;N<Dt;N++){var Ut;if(ft)Ut=q.x[N];else if(ct){if(N===0||N===ge-1)continue;Ut=q.x[N]}else if(q.xCenter)Ut=q.xCenter[N];else{if(N+1===ge&&q.x[N+1]===void 0)continue;Ut=(q.x[N]+q.x[N+1])/2}var Xt=Math.round(w.c2p(Ut));if(!(0>Xt||Xt>w._length)){var gn=t({x:Ut,y:Qt},te,m._fullLayout);gn.x=Ut,gn.y=Qt;var Mn=q.z[H][N];Mn===void 0?(gn.z="",gn.zLabel=""):(gn.z=Mn,gn.zLabel=b.tickText(wt,Mn,"hover").text);var cn=q.text&&q.text[H]&&q.text[H][N];cn!==void 0&&cn!==!1||(cn=""),gn.text=cn;var qt=d.texttemplateString(gt,gn,m._fullLayout._d3locale,gn,te._meta||{});if(qt){var nn=qt.split("<br>"),Kt=nn.length,sn=0;for(B=0;B<Kt;B++)sn=Math.max(sn,nn[B].length);Nt.push({l:Kt,c:sn,t:qt,x:Xt,y:jt,z:Mn})}}}}var hn=te.textfont,bn=hn.family,yn=hn.size,Sn=m._fullLayout.font.size;if(!yn||yn==="auto"){var pn=1/0,Cn=1/0,Hn=0,Qn=0;for(B=0;B<Nt.length;B++){var nr=Nt[B];if(Hn=Math.max(Hn,nr.l),Qn=Math.max(Qn,nr.c),B<Nt.length-1){var Jn=Nt[B+1],Gn=Math.abs(Jn.x-nr.x),lr=Math.abs(Jn.y-nr.y);Gn&&(pn=Math.min(pn,Gn)),lr&&(Cn=Math.min(Cn,lr))}}isFinite(pn)&&isFinite(Cn)?(pn-=K,Cn-=J,pn/=Qn,Cn/=Hn,pn/=a/2,Cn/=a,yn=Math.min(Math.floor(pn),Math.floor(Cn),Sn)):yn=Sn}if(yn<=0||!isFinite(yn))return;x(V).data(Nt).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(Rt){var $t=M.select(this),an=hn.color;an&&an!=="auto"||(an=i.contrast("rgba("+Ie(Rt.z).join()+")")),$t.attr("data-notex",1).call(s.positionText,function(fn){return fn.x}(Rt),function(fn){return fn.y-yn*(fn.l*a/2-1)}(Rt)).call(T.font,bn,yn,an).text(Rt.t).call(s.convertToTspans,m)})}})}},70035:function(ee,D,e){var M=e(39898);ee.exports=function(k){M.select(k).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},49901:function(ee){ee.exports=function(D,e,M){M("zsmooth")===!1&&(M("xgap"),M("ygap")),M("zhoverformat")}},67684:function(ee,D,e){var M=e(92770),k=e(71828),l=e(73972);function T(b,d){var s=d(b);return(s?d(b+"type","array"):"scaled")==="scaled"&&(d(b+"0"),d("d"+b)),s}ee.exports=function(b,d,s,t,i,r){var n,o,a=s("z");if(i=i||"x",r=r||"y",a===void 0||!a.length)return 0;if(k.isArray1D(b.z)){n=s(i),o=s(r);var u=k.minRowLength(n),p=k.minRowLength(o);if(u===0||p===0)return 0;d._length=Math.min(u,p,a.length)}else{if(n=T(i,s),o=T(r,s),!function(c){for(var x,g=!0,h=!1,y=!1,v=0;v<c.length;v++){if(x=c[v],!k.isArrayOrTypedArray(x)){g=!1;break}x.length>0&&(h=!0);for(var m=0;m<x.length;m++)if(M(x[m])){y=!0;break}}return g&&h&&y}(a))return 0;s("transpose"),d._length=null}return b.type==="heatmapgl"||l.getComponentMethod("calendars","handleTraceDefaults")(b,d,[i,r],t),!0}},16063:function(ee,D,e){for(var M=e(21606),k=e(50693),l=e(1426).extendFlat,T=e(30962).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],d={},s=0;s<b.length;s++){var t=b[s];d[t]=M[t]}d.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},l(d,k("",{cLetter:"z",autoColorDflt:!1})),ee.exports=T(d,"calc","nested")},59560:function(ee,D,e){var M=e(9330).gl_heatmap2d,k=e(89298),l=e(78614);function T(d,s){this.scene=d,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(d.glplot,this.options),this.heatmap._trace=this}var b=T.prototype;b.handlePick=function(d){var s=this.options,t=s.shape,i=d.pointId,r=i%t[0],n=Math.floor(i/t[0]),o=i;return{trace:this,dataCoord:d.dataCoord,traceCoord:[s.x[r],s.y[n],s.z[o]],textLabel:this.textLabels[i],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},b.update=function(d,s){var t=s[0];this.index=d.index,this.name=d.name,this.hoverinfo=d.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i);var r=i[0].length,n=i.length;this.options.shape=[r,n],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=d.zsmooth;var o=function(x){for(var g=x.colorscale,h=x.zmin,y=x.zmax,v=g.length,m=new Array(v),_=new Array(4*v),f=0;f<v;f++){var S=g[f],w=l(S[1]);m[f]=h+S[0]*(y-h);for(var E=0;E<4;E++)_[4*f+E]=w[E]}return{colorLevels:m,colorValues:_}}(d);this.options.colorLevels=o.colorLevels,this.options.colorValues=o.colorValues,this.textLabels=[].concat.apply([],d.text),this.heatmap.update(this.options);var a,u,p=this.scene.xaxis,c=this.scene.yaxis;d.zsmooth===!1&&(a={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),d._extremes[p._id]=k.findExtremes(p,t.x,a),d._extremes[c._id]=k.findExtremes(c,t.y,u)},b.dispose=function(){this.heatmap.dispose()},ee.exports=function(d,s,t){var i=new T(d,s.uid);return i.update(s,t),i}},19600:function(ee,D,e){var M=e(71828),k=e(67684),l=e(1586),T=e(16063);ee.exports=function(b,d,s,t){function i(r,n){return M.coerce(b,d,T,r,n)}k(b,d,i,t)?(i("text"),i("zsmooth"),l(b,d,t,i,{prefix:"",cLetter:"z"})):d.visible=!1}},3325:function(ee,D,e){ee.exports={attributes:e(16063),supplyDefaults:e(19600),colorbar:e(61243),calc:e(90757),plot:e(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:e(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(ee,D,e){var M=e(1486),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(5386).si,b=e(41940),d=e(17656),s=e(72406),t=e(1426).extendFlat;ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},M.text,{}),hovertext:t({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:d("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:d("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},M.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir}}},42174:function(ee){ee.exports=function(D,e){for(var M=D.length,k=0,l=0;l<M;l++)e[l]?(D[l]/=e[l],k+=D[l]):D[l]=null;return k}},17656:function(ee){ee.exports=function(D,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(ee,D,e){var M=e(92770);ee.exports={count:function(k,l,T){return T[k]++,1},sum:function(k,l,T,b){var d=b[l];return M(d)?(d=Number(d),T[k]+=d,d):0},avg:function(k,l,T,b,d){var s=b[l];return M(s)&&(s=Number(s),T[k]+=s,d[k]++),0},min:function(k,l,T,b){var d=b[l];if(M(d)){if(d=Number(d),!M(T[k]))return T[k]=d,d;if(T[k]>d){var s=d-T[k];return T[k]=d,s}}return 0},max:function(k,l,T,b){var d=b[l];if(M(d)){if(d=Number(d),!M(T[k]))return T[k]=d,d;if(T[k]<d){var s=d-T[k];return T[k]=d,s}}return 0}}},40965:function(ee,D,e){var M=e(50606),k=M.ONEAVGYEAR,l=M.ONEAVGMONTH,T=M.ONEDAY,b=M.ONEHOUR,d=M.ONEMIN,s=M.ONESEC,t=e(89298).tickIncrement;function i(a,u,p,c){if(a*u<=0)return 1/0;for(var x=Math.abs(u-a),g=p.type==="date",h=r(x,g),y=0;y<10;y++){var v=r(80*h,g);if(h===v||!n(v,a,u,g,p,c))break;h=v}return h}function r(a,u){return u&&a>s?a>T?a>1.1*k?k:a>1.1*l?l:T:a>b?b:a>d?d:s:Math.pow(10,Math.floor(Math.log(a)/Math.LN10))}function n(a,u,p,c,x,g){if(c&&a>T){var h=o(u,x,g),y=o(p,x,g),v=a===k?0:1;return h[v]!==y[v]}return Math.floor(p/a)-Math.floor(u/a)>.1}function o(a,u,p){var c=u.c2d(a,k,p).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}ee.exports=function(a,u,p,c,x){var g,h,y=-1.1*u,v=-.1*u,m=a-v,_=p[0],f=p[1],S=Math.min(i(_+v,_+m,c,x),i(f+v,f+m,c,x)),w=Math.min(i(_+y,_+v,c,x),i(f+y,f+v,c,x));if(S>w&&w<Math.abs(f-_)/4e3?(g=S,h=!1):(g=Math.min(S,w),h=!0),c.type==="date"&&g>T){var E=g===k?1:6,L=g===k?"M12":"M1";return function(C,P){var z=c.c2d(C,k,x),G=z.indexOf("-",E);G>0&&(z=z.substr(0,G));var O=c.d2c(z,0,x);if(O<C){var H=t(O,L,!1,x);(O+H)/2<C+a&&(O=H)}return P&&h?t(O,L,!0,x):O}}return function(C,P){var z=g*Math.round(C/g);return z+g/10<C&&z+.9*g<C+a&&(z+=g),P&&h&&(z-=g),z}}},72138:function(ee,D,e){var M=e(92770),k=e(71828),l=e(73972),T=e(89298),b=e(75341),d=e(59575),s=e(36362),t=e(42174),i=e(40965);function r(n,o,a,u,p){var c,x,g,h,y,v,m,_=u+"bins",f=n._fullLayout,S=o["_"+u+"bingroup"],w=f._histogramBinOpts[S],E=f.barmode==="overlay",L=function(me){return a.r2c(me,0,h)},C=function(me){return a.c2r(me,0,h)},P=a.type==="date"?function(me){return me||me===0?k.cleanDate(me,null,h):null}:function(me){return M(me)?Number(me):null};function z(me,ve,Oe){ve[me+"Found"]?(ve[me]=P(ve[me]),ve[me]===null&&(ve[me]=Oe[me])):(v[me]=ve[me]=Oe[me],k.nestedProperty(x[0],_+"."+me).set(Oe[me]))}if(o["_"+u+"autoBinFinished"])delete o["_"+u+"autoBinFinished"];else{x=w.traces;var G=[],O=!0,H=!1,N=!1;for(c=0;c<x.length;c++)if((g=x[c]).visible){var B=w.dirs[c];y=g["_"+B+"pos0"]=a.makeCalcdata(g,B),G=k.concat(G,y),delete g["_"+u+"autoBinFinished"],o.visible===!0&&(O?O=!1:(delete g._autoBin,g["_"+u+"autoBinFinished"]=1),l.traceIs(g,"2dMap")&&(H=!0),g.type==="histogram2dcontour"&&(N=!0))}h=x[0][u+"calendar"];var V=T.autoBin(G,a,w.nbins,H,h,w.sizeFound&&w.size),q=x[0]._autoBin={};if(v=q[w.dirs[0]]={},N&&(w.size||(V.start=C(T.tickIncrement(L(V.start),V.size,!0,h))),w.end===void 0&&(V.end=C(T.tickIncrement(L(V.end),V.size,!1,h)))),E&&!l.traceIs(o,"2dMap")&&V._dataSpan===0&&a.type!=="category"&&a.type!=="multicategory"&&o.bingroup===""&&o.xbins===void 0){if(p)return[V,y,!0];V=function(me,ve,Oe,Me,Te){var se,oe,he,Ee=me._fullLayout,ke=function(Je,ot){for(var Qe=ot.xaxis,vt=ot.yaxis,xt=ot.orientation,mt=[],rt=Je._fullData,it=0;it<rt.length;it++){var Tt=rt[it];Tt.type==="histogram"&&Tt.visible===!0&&Tt.orientation===xt&&Tt.xaxis===Qe&&Tt.yaxis===vt&&mt.push(Tt)}return mt}(me,ve),be=!1,Ie=1/0,Fe=[ve];for(se=0;se<ke.length;se++)if((oe=ke[se])===ve)be=!0;else if(be){var ce=r(me,oe,Oe,Me,!0),we=ce[0],ye=ce[2];oe["_"+Me+"autoBinFinished"]=1,oe["_"+Me+"pos0"]=ce[1],ye?Fe.push(oe):Ie=Math.min(Ie,we.size)}else he=Ee._histogramBinOpts[oe["_"+Me+"bingroup"]],Ie=Math.min(Ie,he.size||oe[Te].size);var Ce=new Array(Fe.length);for(se=0;se<Fe.length;se++)for(var Re=Fe[se]["_"+Me+"pos0"],ze=0;ze<Re.length;ze++)if(Re[ze]!==void 0){Ce[se]=Re[ze];break}for(isFinite(Ie)||(Ie=k.distinctVals(Ce).minDiff),se=0;se<Fe.length;se++){var He=(oe=Fe[se])[Me+"calendar"],Ge={start:Oe.c2r(Ce[se]-Ie/2,0,He),end:Oe.c2r(Ce[se]+Ie/2,0,He),size:Ie};oe._input[Te]=oe[Te]=Ge,(he=Ee._histogramBinOpts[oe["_"+Me+"bingroup"]])&&k.extendFlat(he,Ge)}return ve[Te]}(n,o,a,u,_)}(m=g.cumulative||{}).enabled&&m.currentbin!=="include"&&(m.direction==="decreasing"?V.start=C(T.tickIncrement(L(V.start),V.size,!0,h)):V.end=C(T.tickIncrement(L(V.end),V.size,!1,h))),w.size=V.size,w.sizeFound||(v.size=V.size,k.nestedProperty(x[0],_+".size").set(V.size)),z("start",w,V),z("end",w,V)}y=o["_"+u+"pos0"],delete o["_"+u+"pos0"];var te=o._input[_]||{},K=k.extendFlat({},w),J=w.start,Y=a.r2l(te.start),W=Y!==void 0;if((w.startFound||W)&&Y!==a.r2l(J)){var Q=W?Y:k.aggNums(Math.min,null,y),ne={type:a.type==="category"||a.type==="multicategory"?"linear":a.type,r2l:a.r2l,dtick:w.size,tick0:J,calendar:h,range:[Q,T.tickIncrement(Q,w.size,!1,h)].map(a.l2r)},re=T.tickFirst(ne);re>a.r2l(Q)&&(re=T.tickIncrement(re,w.size,!0,h)),K.start=a.l2r(re),W||k.nestedProperty(o,_+".start").set(K.start)}var ae=w.end,ue=a.r2l(te.end),pe=ue!==void 0;if((w.endFound||pe)&&ue!==a.r2l(ae)){var ge=pe?ue:k.aggNums(Math.max,null,y);K.end=a.l2r(ge),pe||k.nestedProperty(o,_+".start").set(K.end)}var _e="autobin"+u;return o._input[_e]===!1&&(o._input[_]=k.extendFlat({},o[_]||{}),delete o._input[_e],delete o[_e]),[K,y]}ee.exports={calc:function(n,o){var a,u,p,c,x=[],g=[],h=o.orientation==="h",y=T.getFromId(n,h?o.yaxis:o.xaxis),v=h?"y":"x",m={x:"y",y:"x"}[v],_=o[v+"calendar"],f=o.cumulative,S=r(n,o,y,v),w=S[0],E=S[1],L=typeof w.size=="string",C=[],P=L?C:w,z=[],G=[],O=[],H=0,N=o.histnorm,B=o.histfunc,V=N.indexOf("density")!==-1;f.enabled&&V&&(N=N.replace(/ ?density$/,""),V=!1);var q,te=B==="max"||B==="min"?null:0,K=d.count,J=s[N],Y=!1,W=function(oe){return y.r2c(oe,0,_)};for(k.isArrayOrTypedArray(o[m])&&B!=="count"&&(q=o[m],Y=B==="avg",K=d[B]),a=W(w.start),p=W(w.end)+(a-T.tickIncrement(a,w.size,!1,_))/1e6;a<p&&x.length<1e6&&(u=T.tickIncrement(a,w.size,!1,_),x.push((a+u)/2),g.push(te),O.push([]),C.push(a),V&&z.push(1/(u-a)),Y&&G.push(0),!(u<=a));)a=u;C.push(a),L||y.type!=="date"||(P={start:W(P.start),end:W(P.end),size:P.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var Q=o["_"+v+"bingroup"],ne={leftGap:1/0,rightGap:1/0};Q&&(n._fullLayout._roundFnOpts[Q]||(n._fullLayout._roundFnOpts[Q]=ne),ne=n._fullLayout._roundFnOpts[Q]);var re,ae=g.length,ue=!0,pe=ne.leftGap,ge=ne.rightGap,_e={};for(a=0;a<E.length;a++){var me=E[a];(c=k.findBin(me,P))>=0&&c<ae&&(H+=K(c,a,g,q,G),ue&&O[c].length&&me!==E[O[c][0]]&&(ue=!1),O[c].push(a),_e[a]=c,pe=Math.min(pe,me-C[c]),ge=Math.min(ge,C[c+1]-me))}ne.leftGap=pe,ne.rightGap=ge,ue||(re=function(oe,he){return function(){var Ee=n._fullLayout._roundFnOpts[Q];return i(Ee.leftGap,Ee.rightGap,C,y,_)(oe,he)}}),Y&&(H=t(g,G)),J&&J(g,H,z),f.enabled&&function(oe,he,Ee){var ke,be,Ie;function Fe(we){Ie=oe[we],oe[we]/=2}function ce(we){be=oe[we],oe[we]=Ie+be/2,Ie+=be}if(Ee==="half")if(he==="increasing")for(Fe(0),ke=1;ke<oe.length;ke++)ce(ke);else for(Fe(oe.length-1),ke=oe.length-2;ke>=0;ke--)ce(ke);else if(he==="increasing"){for(ke=1;ke<oe.length;ke++)oe[ke]+=oe[ke-1];Ee==="exclude"&&(oe.unshift(0),oe.pop())}else{for(ke=oe.length-2;ke>=0;ke--)oe[ke]+=oe[ke+1];Ee==="exclude"&&(oe.push(0),oe.shift())}}(g,f.direction,f.currentbin);var ve=Math.min(x.length,g.length),Oe=[],Me=0,Te=ve-1;for(a=0;a<ve;a++)if(g[a]){Me=a;break}for(a=ve-1;a>=Me;a--)if(g[a]){Te=a;break}for(a=Me;a<=Te;a++)if(M(x[a])&&M(g[a])){var se={p:x[a],s:g[a],b:0};f.enabled||(se.pts=O[a],ue?se.ph0=se.ph1=O[a].length?E[O[a][0]]:x[a]:(o._computePh=!0,se.ph0=re(C[a]),se.ph1=re(C[a+1],!0))),Oe.push(se)}return Oe.length===1&&(Oe[0].width1=T.tickIncrement(Oe[0].p,w.size,!1,_)-Oe[0].p),b(Oe,o),k.isArrayOrTypedArray(o.selectedpoints)&&k.tagSelected(Oe,o,_e),Oe},calcAllAutoBins:r}},72406:function(ee){ee.exports={eventDataKeys:["binNumber"]}},82222:function(ee,D,e){var M=e(71828),k=e(41675),l=e(73972).traceIs,T=e(26125),b=M.nestedProperty,d=e(99082).getAxisGroup,s=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];ee.exports=function(i,r){var n,o,a,u,p,c,x,g=r._histogramBinOpts={},h=[],y={},v=[];function m(V,q){return M.coerce(n._input,n,n._module.attributes,V,q)}function _(V){return V.orientation==="v"?"x":"y"}function f(V,q,te){var K=V.uid+"__"+te;q||(q=K);var J=function(ne,re){return k.getFromTrace({_fullLayout:r},ne,re).type}(V,te),Y=V[te+"calendar"]||"",W=g[q],Q=!0;W&&(J===W.axType&&Y===W.calendar?(Q=!1,W.traces.push(V),W.dirs.push(te)):(q=K,J!==W.axType&&M.warn(["Attempted to group the bins of trace",V.index,"set on a","type:"+J,"axis","with bins on","type:"+W.axType,"axis."].join(" ")),Y!==W.calendar&&M.warn(["Attempted to group the bins of trace",V.index,"set with a",Y,"calendar","with bins",W.calendar?"on a "+W.calendar+" calendar":"w/o a set calendar"].join(" ")))),Q&&(g[q]={traces:[V],dirs:[te],axType:J,calendar:V[te+"calendar"]||""}),V["_"+te+"bingroup"]=q}for(p=0;p<i.length;p++)n=i[p],l(n,"histogram")&&(h.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,l(n,"2dMap")||T(n._input,n,r,m));var S=r._alignmentOpts||{};for(p=0;p<h.length;p++){if(n=h[p],a="",!l(n,"2dMap")){if(u=_(n),r.barmode==="group"&&n.alignmentgroup){var w=n[u+"axis"],E=d(r,w)+n.orientation;(S[E]||{})[n.alignmentgroup]&&(a=E)}a||r.barmode==="overlay"||(a=d(r,n.xaxis)+d(r,n.yaxis)+_(n))}a?(y[a]||(y[a]=[]),y[a].push(n)):v.push(n)}for(a in y)if((o=y[a]).length!==1){var L=!1;for(o.length&&(n=o[0],L=m("bingroup")),a=L||a,p=0;p<o.length;p++){var C=(n=o[p])._input.bingroup;C&&C!==a&&M.warn(["Trace",n.index,"must match","within bingroup",a+".","Ignoring its bingroup:",C,"setting."].join(" ")),n.bingroup=a,f(n,a,_(n))}}else v.push(o[0]);for(p=0;p<v.length;p++){n=v[p];var P=m("bingroup");if(l(n,"2dMap"))for(x=0;x<2;x++){var z=m((u=t[x])+"bingroup",P?P+"__"+u:null);f(n,z,u)}else f(n,P,_(n))}for(a in g){var G=g[a];for(o=G.traces,c=0;c<s.length;c++){var O,H,N=s[c],B=N.name;if(B!=="nbins"||!G.sizeFound){for(p=0;p<o.length;p++){if(n=o[p],u=G.dirs[p],O=N.aStr[u],b(n._input,O).get()!==void 0){G[B]=m(O),G[B+"Found"]=!0;break}(H=(n._autoBin||{})[u]||{})[B]&&b(n,O).set(H[B])}if(B==="start"||B==="end")for(;p<o.length;p++)(n=o[p])["_"+u+"bingroup"]&&m(O,(H=(n._autoBin||{})[u]||{})[B]);B!=="nbins"||G.sizeFound||G.nbinsFound||(n=o[0],G[B]=m(O))}}}}},11385:function(ee,D,e){var M=e(73972),k=e(71828),l=e(7901),T=e(90769).handleText,b=e(98340),d=e(7745);ee.exports=function(s,t,i,r){function n(v,m){return k.coerce(s,t,d,v,m)}var o=n("x"),a=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var u=n("textposition");T(s,t,r,n,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var p=n("orientation",a&&!o?"h":"v"),c=p==="v"?"x":"y",x=p==="v"?"y":"x",g=o&&a?Math.min(k.minRowLength(o)&&k.minRowLength(a)):k.minRowLength(t[c]||[]);if(g){t._length=g,M.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],r),t[x]&&n("histfunc"),n("histnorm"),n("autobin"+c),b(s,t,n,i,r),k.coerceSelectionMarkerOpacity(t,n);var h=(t.marker.line||{}).color,y=M.getComponentMethod("errorbars","supplyDefaults");y(s,t,h||l.defaultLine,{axis:"y"}),y(s,t,h||l.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},84402:function(ee){ee.exports=function(D,e,M,k,l){if(D.x="xVal"in e?e.xVal:e.x,D.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(D.z=e.zLabelVal),e.xa&&(D.xaxis=e.xa),e.ya&&(D.yaxis=e.ya),!(M.cumulative||{}).enabled){var T,b=Array.isArray(l)?k[0].pts[l[0]][l[1]]:k[l].pts;if(D.pointNumbers=b,D.binNumber=D.pointNumber,delete D.pointNumber,delete D.pointIndex,M._indexToPoints){T=[];for(var d=0;d<b.length;d++)T=T.concat(M._indexToPoints[b[d]])}else T=b;D.pointIndices=T}return D}},76440:function(ee,D,e){var M=e(95423).hoverPoints,k=e(89298).hoverLabelText;ee.exports=function(l,T,b,d,s){var t=M(l,T,b,d,s);if(t){var i=(l=t[0]).cd[l.index],r=l.cd[0].trace;if(!r.cumulative.enabled){var n=r.orientation==="h"?"y":"x";l[n+"Label"]=k(l[n+"a"],[i.ph0,i.ph1],r[n+"hoverformat"])}return t}}},36071:function(ee,D,e){ee.exports={attributes:e(7745),layoutAttributes:e(43641),supplyDefaults:e(11385),crossTraceDefaults:e(82222),supplyLayoutDefaults:e(13957),calc:e(72138).calc,crossTraceCalc:e(11661).crossTraceCalc,plot:e(17295).plot,layerName:"barlayer",style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,colorbar:e(4898),hoverPoints:e(76440),selectPoints:e(81974),eventData:e(84402),moduleType:"trace",name:"histogram",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(ee){ee.exports={percent:function(D,e){for(var M=D.length,k=100/e,l=0;l<M;l++)D[l]*=k},probability:function(D,e){for(var M=D.length,k=0;k<M;k++)D[k]/=e},density:function(D,e,M,k){var l=D.length;k=k||1;for(var T=0;T<l;T++)D[T]*=M[T]*k},"probability density":function(D,e,M,k){var l=D.length;k&&(e/=k);for(var T=0;T<l;T++)D[T]*=M[T]/e}}},35361:function(ee,D,e){var M=e(7745),k=e(17656),l=e(21606),T=e(9012),b=e(12663).axisHoverFormat,d=e(5386).fF,s=e(5386).si,t=e(50693),i=e(1426).extendFlat;ee.exports=i({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:k("x"),nbinsy:M.nbinsy,ybins:k("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:i({},M.bingroup,{}),xbingroup:i({},M.bingroup,{}),ybingroup:i({},M.bingroup,{}),xgap:l.xgap,ygap:l.ygap,zsmooth:l.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:d({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:l.textfont,showlegend:i({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},17562:function(ee,D,e){var M=e(71828),k=e(89298),l=e(59575),T=e(36362),b=e(42174),d=e(40965),s=e(72138).calcAllAutoBins;function t(n,o,a,u){var p,c=new Array(n);if(u)for(p=0;p<n;p++)c[p]=1/(o[p+1]-o[p]);else{var x=1/a;for(p=0;p<n;p++)c[p]=x}return c}function i(n,o){return{start:n(o.start),end:n(o.end),size:o.size}}function r(n,o,a,u,p,c){var x,g=n.length-1,h=new Array(g),y=d(a,u,n,p,c);for(x=0;x<g;x++){var v=(o||[])[x];h[x]=v===void 0?[y(n[x]),y(n[x+1],!0)]:[v,v]}return h}ee.exports=function(n,o){var a,u,p,c,x=k.getFromId(n,o.xaxis),g=k.getFromId(n,o.yaxis),h=o.xcalendar,y=o.ycalendar,v=function(vt){return x.r2c(vt,0,h)},m=function(vt){return g.r2c(vt,0,y)},_=s(n,o,x,"x"),f=_[0],S=_[1],w=s(n,o,g,"y"),E=w[0],L=w[1],C=o._length;S.length>C&&S.splice(C,S.length-C),L.length>C&&L.splice(C,L.length-C);var P=[],z=[],G=[],O=typeof f.size=="string",H=typeof E.size=="string",N=[],B=[],V=O?N:f,q=H?B:E,te=0,K=[],J=[],Y=o.histnorm,W=o.histfunc,Q=Y.indexOf("density")!==-1,ne=W==="max"||W==="min"?null:0,re=l.count,ae=T[Y],ue=!1,pe=[],ge=[],_e="z"in o?o.z:"marker"in o&&Array.isArray(o.marker.color)?o.marker.color:"";_e&&W!=="count"&&(ue=W==="avg",re=l[W]);var me=f.size,ve=v(f.start),Oe=v(f.end)+(ve-k.tickIncrement(ve,me,!1,h))/1e6;for(a=ve;a<Oe;a=k.tickIncrement(a,me,!1,h))z.push(ne),N.push(a),ue&&G.push(0);N.push(a);var Me,Te=z.length,se=(a-ve)/Te,oe=(Me=ve+se/2,x.c2r(Me,0,h)),he=E.size,Ee=m(E.start),ke=m(E.end)+(Ee-k.tickIncrement(Ee,he,!1,y))/1e6;for(a=Ee;a<ke;a=k.tickIncrement(a,he,!1,y)){P.push(z.slice()),B.push(a);var be=new Array(Te);for(u=0;u<Te;u++)be[u]=[];J.push(be),ue&&K.push(G.slice())}B.push(a);var Ie=P.length,Fe=(a-Ee)/Ie,ce=function(vt){return g.c2r(vt,0,y)}(Ee+Fe/2);Q&&(pe=t(z.length,V,se,O),ge=t(P.length,q,Fe,H)),O||x.type!=="date"||(V=i(v,V)),H||g.type!=="date"||(q=i(m,q));var we=!0,ye=!0,Ce=new Array(Te),Re=new Array(Ie),ze=1/0,He=1/0,Ge=1/0,Je=1/0;for(a=0;a<C;a++){var ot=S[a],Qe=L[a];p=M.findBin(ot,V),c=M.findBin(Qe,q),p>=0&&p<Te&&c>=0&&c<Ie&&(te+=re(p,a,P[c],_e,K[c]),J[c][p].push(a),we&&(Ce[p]===void 0?Ce[p]=ot:Ce[p]!==ot&&(we=!1)),ye&&(Re[c]===void 0?Re[c]=Qe:Re[c]!==Qe&&(ye=!1)),ze=Math.min(ze,ot-N[p]),He=Math.min(He,N[p+1]-ot),Ge=Math.min(Ge,Qe-B[c]),Je=Math.min(Je,B[c+1]-Qe))}if(ue)for(c=0;c<Ie;c++)te+=b(P[c],K[c]);if(ae)for(c=0;c<Ie;c++)ae(P[c],te,pe,ge[c]);return{x:S,xRanges:r(N,we&&Ce,ze,He,x,h),x0:oe,dx:se,y:L,yRanges:r(B,ye&&Re,Ge,Je,g,y),y0:ce,dy:Fe,z:P,pts:J}}},93888:function(ee,D,e){var M=e(71828),k=e(75238),l=e(49901),T=e(1586),b=e(58623),d=e(35361);ee.exports=function(s,t,i,r){function n(o,a){return M.coerce(s,t,d,o,a)}k(s,t,n,r),t.visible!==!1&&(l(s,t,n,r),T(s,t,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),b(n,r),n("xhoverformat"),n("yhoverformat"))}},76128:function(ee,D,e){var M=e(46248),k=e(89298).hoverLabelText;ee.exports=function(l,T,b,d,s){var t=M(l,T,b,d,s);if(t){var i=(l=t[0]).index,r=i[0],n=i[1],o=l.cd[0],a=o.trace,u=o.xRanges[n],p=o.yRanges[r];return l.xLabel=k(l.xa,[u[0],u[1]],a.xhoverformat),l.yLabel=k(l.ya,[p[0],p[1]],a.yhoverformat),t}}},43905:function(ee,D,e){ee.exports={attributes:e(35361),supplyDefaults:e(93888),crossTraceDefaults:e(82222),calc:e(90757),plot:e(50347),layerName:"heatmaplayer",colorbar:e(61243),style:e(70035),hoverPoints:e(76128),eventData:e(84402),moduleType:"trace",name:"histogram2d",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(ee,D,e){var M=e(73972),k=e(71828);ee.exports=function(l,T,b,d){var s=b("x"),t=b("y"),i=k.minRowLength(s),r=k.minRowLength(t);i&&r?(T._length=Math.min(i,r),M.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],d),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):T.visible=!1}},99066:function(ee,D,e){var M=e(35361),k=e(70600),l=e(50693),T=e(12663).axisHoverFormat,b=e(1426).extendFlat;ee.exports=b({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:b({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},l("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(ee,D,e){var M=e(71828),k=e(75238),l=e(67217),T=e(8724),b=e(58623),d=e(99066);ee.exports=function(s,t,i,r){function n(o,a){return M.coerce(s,t,d,o,a)}k(s,t,n,r),t.visible!==!1&&(l(s,t,n,function(o){return M.coerce2(s,t,d,o)}),T(s,t,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&b(n,r))}},35902:function(ee,D,e){ee.exports={attributes:e(99066),supplyDefaults:e(62654),crossTraceDefaults:e(82222),calc:e(27529),plot:e(29854).plot,layerName:"contourlayer",style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(ee,D,e){var M=e(5386).fF,k=e(5386).si,l=e(50693),T=e(27670).Y,b=e(34e3),d=e(57564),s=e(45802),t=e(43473),i=e(1426).extendFlat,r=e(79952).u;ee.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:d.marker.colors,line:d.marker.line,pattern:r,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:d.leaf,pathbar:s.pathbar,text:b.text,textinfo:d.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:d.hoverinfo,hovertemplate:M({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:b.sort,root:d.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},96346:function(ee,D,e){var M=e(74875);D.name="icicle",D.plot=function(k,l,T,b){M.plotBasePlot(D.name,k,l,T,b)},D.clean=function(k,l,T,b){M.cleanBasePlot(D.name,k,l,T,b)}},46584:function(ee,D,e){var M=e(52147);D.y=function(k,l){return M.calc(k,l)},D.T=function(k){return M._runCrossTraceCalc("icicle",k)}},56524:function(ee,D,e){var M=e(71828),k=e(46291),l=e(7901),T=e(27670).c,b=e(90769).handleText,d=e(97313).TEXTPAD,s=e(37434).handleMarkerDefaults,t=e(21081),i=t.hasColorscale,r=t.handleDefaults;ee.exports=function(n,o,a,u){function p(m,_){return M.coerce(n,o,k,m,_)}var c=p("labels"),x=p("parents");if(c&&c.length&&x&&x.length){var g=p("values");g&&g.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var h=p("text");p("texttemplate"),o.texttemplate||p("textinfo",Array.isArray(h)?"text+label":"label"),p("hovertext"),p("hovertemplate");var y=p("pathbar.visible");b(n,o,u,p,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition"),s(n,o,u,p);var v=o._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis;v&&r(n,o,u,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",v?1:.7),o._hovered={marker:{line:{width:2,color:l.contrast(u.paper_bgcolor)}}},y&&(p("pathbar.thickness",o.pathbar.textfont.size+2*d),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),T(o,u,p),o._length=null}else o.visible=!1}},90666:function(ee,D,e){var M=e(39898),k=e(71828),l=e(91424),T=e(63893),b=e(21538),d=e(82454).styleOne,s=e(43473),t=e(2791),i=e(83523),r=e(24714).formatSliceLabel,n=!1;ee.exports=function(o,a,u,p,c){var x=c.width,g=c.height,h=c.viewX,y=c.viewY,v=c.pathSlice,m=c.toMoveInsideSlice,_=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,L=c.prevEntry,C=o._context.staticPlot,P=o._fullLayout,z=a[0].trace,G=z.textposition.indexOf("left")!==-1,O=z.textposition.indexOf("right")!==-1,H=z.textposition.indexOf("bottom")!==-1,N=b(u,[x,g],{flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,orientation:z.tiling.orientation,pad:{inner:z.tiling.pad},maxDepth:z._maxDepth}).descendants(),B=1/0,V=-1/0;N.forEach(function(Y){var W=Y.depth;W>=z._maxDepth?(Y.x0=Y.x1=(Y.x0+Y.x1)/2,Y.y0=Y.y1=(Y.y0+Y.y1)/2):(B=Math.min(B,W),V=Math.max(V,W))}),p=p.data(N,t.getPtId),z._maxVisibleLayers=isFinite(V)?V-B+1:0,p.enter().append("g").classed("slice",!0),S(p,n,{},[x,g],v),p.order();var q=null;if(f&&L){var te=t.getPtId(L);p.each(function(Y){q===null&&t.getPtId(Y)===te&&(q={x0:Y.x0,x1:Y.x1,y0:Y.y0,y1:Y.y1})})}var K=function(){return q||{x0:0,x1:x,y0:0,y1:g}},J=p;return f&&(J=J.transition().each("end",function(){var Y=M.select(this);t.setSliceCursor(Y,o,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),J.each(function(Y){Y._x0=h(Y.x0),Y._x1=h(Y.x1),Y._y0=y(Y.y0),Y._y1=y(Y.y1),Y._hoverX=h(Y.x1-z.tiling.pad),Y._hoverY=y(H?Y.y1-z.tiling.pad/2:Y.y0+z.tiling.pad/2);var W=M.select(this),Q=k.ensureSingle(W,"path","surface",function(ue){ue.style("pointer-events",C?"none":"all")});f?Q.transition().attrTween("d",function(ue){var pe=w(ue,n,K(),[x,g],{orientation:z.tiling.orientation,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1});return function(ge){return v(pe(ge))}}):Q.attr("d",v),W.call(i,u,o,a,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,o,{isTransitioning:o._transitioning}),Q.call(d,Y,z,o,{hovered:!1}),Y.x0===Y.x1||Y.y0===Y.y1?Y._text="":Y._text=r(Y,u,z,a,P)||"";var ne=k.ensureSingle(W,"g","slicetext"),re=k.ensureSingle(ne,"text","",function(ue){ue.attr("data-notex",1)}),ae=k.ensureUniformFontSize(o,t.determineTextFont(z,Y,P.font));re.text(Y._text||" ").classed("slicetext",!0).attr("text-anchor",O?"end":G?"start":"middle").call(l.font,ae).call(T.convertToTspans,o),Y.textBB=l.bBox(re.node()),Y.transform=m(Y,{fontSize:ae.size}),Y.transform.fontSize=ae.size,f?re.transition().attrTween("transform",function(ue){var pe=E(ue,n,K(),[x,g]);return function(ge){return _(pe(ge))}}):re.attr("transform",_(Y))}),q}},69816:function(ee,D,e){ee.exports={moduleType:"trace",name:"icicle",basePlotModule:e(96346),categories:[],animatable:!0,attributes:e(46291),layoutAttributes:e(92894),supplyDefaults:e(56524),supplyLayoutDefaults:e(21070),calc:e(46584).y,crossTraceCalc:e(46584).T,plot:e(85596),style:e(82454).style,colorbar:e(4898),meta:{}}},92894:function(ee){ee.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(ee,D,e){var M=e(71828),k=e(92894);ee.exports=function(l,T){function b(d,s){return M.coerce(l,T,k,d,s)}b("iciclecolorway",T.colorway),b("extendiciclecolors")}},21538:function(ee,D,e){var M=e(674),k=e(14102);ee.exports=function(l,T,b){var d=b.flipX,s=b.flipY,t=b.orientation==="h",i=b.maxDepth,r=T[0],n=T[1];i&&(r=(l.height+1)*T[0]/Math.min(l.height+1,i),n=(l.height+1)*T[1]/Math.min(l.height+1,i));var o=M.partition().padding(b.pad.inner).size(t?[T[1],r]:[T[0],n])(l);return(t||d||s)&&k(o,T,{swapXY:t,flipX:d,flipY:s}),o}},85596:function(ee,D,e){var M=e(80694),k=e(90666);ee.exports=function(l,T,b,d){return M(l,T,b,d,{type:"icicle",drawDescendants:k})}},82454:function(ee,D,e){var M=e(39898),k=e(7901),l=e(71828),T=e(72597).resizeText,b=e(43467);function d(s,t,i,r){var n=t.data.data,o=!t.children,a=n.i,u=l.castOption(i,a,"marker.line.color")||k.defaultLine,p=l.castOption(i,a,"marker.line.width")||0;s.call(b,t,i,r).style("stroke-width",p).call(k.stroke,u).style("opacity",o?i.leaf.opacity:null)}ee.exports={style:function(s){var t=s._fullLayout._iciclelayer.selectAll(".trace");T(s,t,"icicle"),t.each(function(i){var r=M.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(o){M.select(this).call(d,o,n,s)})})},styleOne:d}},17230:function(ee,D,e){for(var M=e(9012),k=e(5386).fF,l=e(1426).extendFlat,T=e(51877).colormodel,b=["rgb","rgba","rgba256","hsl","hsla"],d=[],s=[],t=0;t<b.length;t++){var i=T[b[t]];d.push("For the `"+b[t]+"` colormodel, it is ["+(i.zminDflt||i.min).join(", ")+"]."),s.push("For the `"+b[t]+"` colormodel, it is ["+(i.zmaxDflt||i.max).join(", ")+"].")}ee.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:b,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:k({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(ee,D,e){var M=e(71828),k=e(51877),l=e(92770),T=e(89298),b=e(71828).maxRowLength,d=e(67395).A;function s(i,r,n,o){return function(a){return M.constrain((a-i)*r,n,o)}}function t(i,r){return function(n){return M.constrain(n,i,r)}}ee.exports=function(i,r){var n,o;if(r._hasZ)n=r.z.length,o=b(r.z);else if(r._hasSource){var a=d(r.source);n=a.height,o=a.width}var u,p=T.getFromId(i,r.xaxis||"x"),c=T.getFromId(i,r.yaxis||"y"),x=p.d2c(r.x0)-r.dx/2,g=c.d2c(r.y0)-r.dy/2,h=[x,x+o*r.dx],y=[g,g+n*r.dy];if(p&&p.type==="log")for(u=0;u<o;u++)h.push(x+u*r.dx);if(c&&c.type==="log")for(u=0;u<n;u++)y.push(g+u*r.dy);return r._extremes[p._id]=T.findExtremes(p,h),r._extremes[c._id]=T.findExtremes(c,y),r._scaler=function(v){var m=k.colormodel[v.colormodel],_=(m.colormodel||v.colormodel).length;v._sArray=[];for(var f=0;f<_;f++)m.min[f]!==v.zmin[f]||m.max[f]!==v.zmax[f]?v._sArray.push(s(v.zmin[f],(m.max[f]-m.min[f])/(v.zmax[f]-v.zmin[f]),m.min[f],m.max[f])):v._sArray.push(t(m.min[f],m.max[f]));return function(S){for(var w=S.slice(0,_),E=0;E<_;E++){var L=w[E];if(!l(L))return!1;w[E]=v._sArray[E](L)}return w}}(r),[{x0:x,y0:g,z:r.z,w:o,h:n}]}},51877:function(ee){ee.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(D){return D.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(D){return D.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(D){return D.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(D){var e=D.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(D){var e=D.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}}}},13245:function(ee,D,e){var M=e(71828),k=e(17230),l=e(51877),T=e(25095).IMAGE_URL_PREFIX;ee.exports=function(b,d){function s(r,n){return M.coerce(b,d,k,r,n)}s("source"),d.source&&!d.source.match(T)&&delete d.source,d._hasSource=!!d.source;var t,i=s("z");d._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),d._hasZ||d._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),d._hasZ?(s("colormodel","rgb"),s("zmin",(t=l.colormodel[d.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):d._hasSource&&(d.colormodel="rgba256",t=l.colormodel[d.colormodel],d.zmin=t.zminDflt,d.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),d._length=null):d.visible=!1}},30835:function(ee){ee.exports=function(D,e){return"xVal"in e&&(D.x=e.xVal),"yVal"in e&&(D.y=e.yVal),e.xa&&(D.xaxis=e.xa),e.ya&&(D.yaxis=e.ya),D.color=e.color,D.colormodel=e.trace.colormodel,D.z||(D.z=e.color),D}},67395:function(ee,D,e){var M=e(33575),k=e(25095).IMAGE_URL_PREFIX,l=e(12856).Buffer;D.A=function(T){var b=T.replace(k,""),d=new l(b,"base64");return M(d)}},28749:function(ee,D,e){var M=e(30211),k=e(71828),l=e(51877);ee.exports=function(T,b,d){var s=T.cd[0],t=s.trace,i=T.xa,r=T.ya;if(!(M.inbox(b-s.x0,b-(s.x0+s.w*t.dx),0)>0||M.inbox(d-s.y0,d-(s.y0+s.h*t.dy),0)>0)){var n,o=Math.floor((b-s.x0)/t.dx),a=Math.floor(Math.abs(d-s.y0)/t.dy);if(t._hasZ?n=s.z[a][o]:t._hasSource&&(n=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(o,a,1,1).data),n){var u,p=s.hi||t.hoverinfo;if(p){var c=p.split("+");c.indexOf("all")!==-1&&(c=["color"]),c.indexOf("color")!==-1&&(u=!0)}var x,g=l.colormodel[t.colormodel],h=g.colormodel||t.colormodel,y=h.length,v=t._scaler(n),m=g.suffix,_=[];(t.hovertemplate||u)&&(_.push("["+[v[0]+m[0],v[1]+m[1],v[2]+m[2]].join(", ")),y===4&&_.push(", "+v[3]+m[3]),_.push("]"),_=_.join(""),T.extraText=h.toUpperCase()+": "+_),Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[a])?x=t.hovertext[a][o]:Array.isArray(t.text)&&Array.isArray(t.text[a])&&(x=t.text[a][o]);var f=r.c2p(s.y0+(a+.5)*t.dy),S=s.x0+(o+.5)*t.dx,w=s.y0+(a+.5)*t.dy,E="["+n.slice(0,t.colormodel.length).join(", ")+"]";return[k.extendFlat(T,{index:[a,o],x0:i.c2p(s.x0+o*t.dx),x1:i.c2p(s.x0+(o+1)*t.dx),y0:f,y1:f,color:v,xVal:S,xLabelVal:S,yVal:w,yLabelVal:w,zLabelVal:E,text:x,hovertemplateLabels:{zLabel:E,colorLabel:_,"color[0]Label":v[0]+m[0],"color[1]Label":v[1]+m[1],"color[2]Label":v[2]+m[2],"color[3]Label":v[3]+m[3]}})]}}}},94507:function(ee,D,e){ee.exports={attributes:e(17230),supplyDefaults:e(13245),calc:e(71113),plot:e(60775),style:e(12826),hoverPoints:e(28749),eventData:e(30835),moduleType:"trace",name:"image",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(ee,D,e){var M=e(39898),k=e(71828),l=k.strTranslate,T=e(77922),b=e(51877),d=e(3883),s=e(32396).STYLE;ee.exports=function(t,i,r,n){var o=i.xaxis,a=i.yaxis,u=!t._context._exportedPlot&&d();k.makeTraceGroups(n,r,"im").each(function(p){var c=M.select(this),x=p[0],g=x.trace,h=(g.zsmooth==="fast"||g.zsmooth===!1&&u)&&!g._hasZ&&g._hasSource&&o.type==="linear"&&a.type==="linear";g._realImage=h;var y,v,m,_,f,S,w=x.z,E=x.x0,L=x.y0,C=x.w,P=x.h,z=g.dx,G=g.dy;for(S=0;y===void 0&&S<C;)y=o.c2p(E+S*z),S++;for(S=C;v===void 0&&S>0;)v=o.c2p(E+S*z),S--;for(S=0;_===void 0&&S<P;)_=a.c2p(L+S*G),S++;for(S=P;f===void 0&&S>0;)f=a.c2p(L+S*G),S--;v<y&&(m=v,v=y,y=m),f<_&&(m=_,_=f,f=m),h||(y=Math.max(-.5*o._length,y),v=Math.min(1.5*o._length,v),_=Math.max(-.5*a._length,_),f=Math.min(1.5*a._length,f));var O=Math.round(v-y),H=Math.round(f-_);if(O<=0||H<=0)c.selectAll("image").data([]).exit().remove();else{var N=c.selectAll("image").data([p]);N.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),N.exit().remove();var B=g.zsmooth===!1?s:"";if(h){var V=k.simpleMap(o.range,o.r2l),q=k.simpleMap(a.range,a.r2l),te=V[1]<V[0],K=q[1]>q[0];if(te||K){var J=y+O/2,Y=_+H/2;B+="transform:"+l(J+"px",Y+"px")+"scale("+(te?-1:1)+","+(K?-1:1)+")"+l(-J+"px",-Y+"px")+";"}}N.attr("style",B);var W=new Promise(function(ne){if(g._hasZ)ne();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===C&&g._canvas.el.height===P&&g._canvas.source===g.source)ne();else{var re=document.createElement("canvas");re.width=C,re.height=P;var ae=re.getContext("2d",{willReadFrequently:!0});g._image=g._image||new Image;var ue=g._image;ue.onload=function(){ae.drawImage(ue,0,0),g._canvas={el:re,source:g.source},ne()},ue.setAttribute("src",g.source)}}).then(function(){var ne,re;if(g._hasZ)re=Q(function(ue,pe){return w[pe][ue]}),ne=re.toDataURL("image/png");else if(g._hasSource)if(h)ne=g.source;else{var ae=g._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,C,P).data;re=Q(function(ue,pe){var ge=4*(pe*C+ue);return[ae[ge],ae[ge+1],ae[ge+2],ae[ge+3]]}),ne=re.toDataURL("image/png")}N.attr({"xlink:href":ne,height:H,width:O,x:y,y:_})});t._promises.push(W)}function Q(ne){var re=document.createElement("canvas");re.width=O,re.height=H;var ae,ue=re.getContext("2d",{willReadFrequently:!0}),pe=function(he){return k.constrain(Math.round(o.c2p(E+he*z)-y),0,O)},ge=function(he){return k.constrain(Math.round(a.c2p(L+he*G)-_),0,H)},_e=b.colormodel[g.colormodel],me=_e.colormodel||g.colormodel,ve=_e.fmt;for(S=0;S<x.w;S++){var Oe=pe(S),Me=pe(S+1);if(Me!==Oe&&!isNaN(Me)&&!isNaN(Oe))for(var Te=0;Te<x.h;Te++){var se=ge(Te),oe=ge(Te+1);oe===se||isNaN(oe)||isNaN(se)||!ne(S,Te)||(ae=g._scaler(ne(S,Te)),ue.fillStyle=ae?me+"("+ve(ae).join(",")+")":"rgba(0,0,0,0)",ue.fillRect(Oe,se,Me-Oe,oe-se))}}return re}})}},12826:function(ee,D,e){var M=e(39898);ee.exports=function(k){M.select(k).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},54846:function(ee,D,e){var M=e(1426).extendFlat,k=e(1426).extendDeep,l=e(30962).overrideAll,T=e(41940),b=e(22399),d=e(27670).Y,s=e(13838),t=e(44467).templatedArray,i=e(22372),r=e(12663).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},a={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",k({},o,{range:a}));ee.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:d({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:l({range:a,visible:M({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:M({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:M({},o.line.color,{}),width:M({},o.line.width,{dflt:1}),editType:"plot"},thickness:M({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(ee,D,e){var M=e(74875);D.name="indicator",D.plot=function(k,l,T,b){M.plotBasePlot(D.name,k,l,T,b)},D.clean=function(k,l,T,b){M.cleanBasePlot(D.name,k,l,T,b)}},24667:function(ee){ee.exports={calc:function(D,e){var M=[],k=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var l=e._lastValue,T=l;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),M[0]={y:k,lastY:l,delta:k-T,relativeDelta:(k-T)/T},M}}},84577:function(ee){ee.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(ee,D,e){var M=e(71828),k=e(54846),l=e(27670).c,T=e(44467),b=e(85501),d=e(84577),s=e(26218),t=e(38701),i=e(96115),r=e(89426);function n(o,a){function u(p,c){return M.coerce(o,a,k.gauge.steps,p,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}ee.exports={supplyDefaults:function(o,a,u,p){function c(L,C){return M.coerce(o,a,k,L,C)}l(a,p,c),c("mode"),a._hasNumber=a.mode.indexOf("number")!==-1,a._hasDelta=a.mode.indexOf("delta")!==-1,a._hasGauge=a.mode.indexOf("gauge")!==-1;var x=c("value");a._range=[0,typeof x=="number"?1.5*x:1];var g,h,y,v,m,_,f=new Array(2);function S(L,C){return M.coerce(y,v,k.gauge,L,C)}function w(L,C){return M.coerce(m,_,k.gauge.axis,L,C)}if(a._hasNumber&&(c("number.valueformat"),c("number.font.color",p.font.color),c("number.font.family",p.font.family),c("number.font.size"),a.number.font.size===void 0&&(a.number.font.size=d.defaultNumberFontSize,f[0]=!0),c("number.prefix"),c("number.suffix"),g=a.number.font.size),a._hasDelta&&(c("delta.font.color",p.font.color),c("delta.font.family",p.font.family),c("delta.font.size"),a.delta.font.size===void 0&&(a.delta.font.size=(a._hasNumber?.5:1)*(g||d.defaultNumberFontSize),f[1]=!0),c("delta.reference",a.value),c("delta.relative"),c("delta.valueformat",a.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),h=a.delta.font.size),a._scaleNumbers=(!a._hasNumber||f[0])&&(!a._hasDelta||f[1])||!1,c("title.font.color",p.font.color),c("title.font.family",p.font.family),c("title.font.size",.25*(g||h||d.defaultNumberFontSize)),c("title.text"),a._hasGauge){(y=o.gauge)||(y={}),v=T.newContainer(a,"gauge"),S("shape"),(a._isBullet=a.gauge.shape==="bullet")||c("title.align","center"),(a._isAngular=a.gauge.shape==="angular")||c("align","center"),S("bgcolor",p.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width"),S("bar.thickness",d.valueThickness*(a.gauge.shape==="bullet"?.5:1)),b(y,v,{name:"steps",handleItemDefaults:n}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),m={},y&&(m=y.axis||{}),_=T.newContainer(v,"axis"),w("visible"),a._range=w("range",a._range);var E={outerTicks:!0};s(m,_,w,"linear"),r(m,_,w,"linear",E),i(m,_,w,"linear",E),t(m,_,w,E)}else c("title.align","center"),c("align","center"),a._isAngular=a._isBullet=!1;a._length=null}}},15154:function(ee,D,e){ee.exports={moduleType:"trace",name:"indicator",basePlotModule:e(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(54846),supplyDefaults:e(94425).supplyDefaults,calc:e(24667).calc,plot:e(75634),meta:{}}},75634:function(ee,D,e){var M=e(39898),k=e(81684).sX,l=e(81684).k4,T=e(71828),b=T.strScale,d=T.strTranslate,s=T.rad2deg,t=e(18783).MID_SHIFT,i=e(91424),r=e(84577),n=e(63893),o=e(89298),a=e(71453),u=e(52830),p=e(13838),c=e(7901),x={left:"start",center:"middle",right:"end"},g={left:0,center:.5,right:1},h=/[yzafpnmkMGTPEZY]/;function y(w){return w&&w.duration>0}function v(w){w.each(function(E){c.stroke(M.select(this),E.line.color)}).each(function(E){c.fill(M.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(w,E,L){var C=w._fullLayout,P=T.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},E),z={type:"linear",_id:"x"+E._id},G={letter:"x",font:C.font,noHover:!0,noTickson:!0};function O(H,N){return T.coerce(P,z,p,H,N)}return a(P,z,O,G,C),u(P,z,O,G),z}function _(w,E,L){return[Math.min(E/w.width,L/w.height),w,E+"x"+L]}function f(w,E,L,C){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),z=M.select(P);return z.text(w).attr("x",0).attr("y",0).attr("text-anchor",L).attr("data-unformatted",w).call(n.convertToTspans,C).call(i.font,E),i.bBox(z.node())}function S(w,E,L,C,P,z){var G="_cache"+E;w[G]&&w[G].key===P||(w[G]={key:P,value:L});var O=T.aggNums(z,null,[w[G].value,C],2);return w[G].value=O,O}ee.exports=function(w,E,L,C){var P,z=w._fullLayout;y(L)&&C&&(P=C()),T.makeTraceGroups(z._indicatorlayer,E,"trace").each(function(G){var O,H,N,B,V,q=G[0].trace,te=M.select(this),K=q._hasGauge,J=q._isAngular,Y=q._isBullet,W=q.domain,Q={w:z._size.w*(W.x[1]-W.x[0]),h:z._size.h*(W.y[1]-W.y[0]),l:z._size.l+z._size.w*W.x[0],r:z._size.r+z._size.w*(1-W.x[1]),t:z._size.t+z._size.h*(1-W.y[1]),b:z._size.b+z._size.h*W.y[0]},ne=Q.l+Q.w/2,re=Q.t+Q.h/2,ae=Math.min(Q.w/2,Q.h),ue=r.innerRadius*ae,pe=q.align||"center";if(H=re,K){if(J&&(O=ne,H=re+ae/2,N=function(se){return function(oe,he){return[he/Math.sqrt(oe.width/2*(oe.width/2)+oe.height*oe.height),oe,he]}(se,.9*ue)}),Y){var ge=r.bulletPadding,_e=1-r.bulletNumberDomainSize+ge;O=Q.l+(_e+(1-_e)*g[pe])*Q.w,N=function(se){return _(se,(r.bulletNumberDomainSize-ge)*Q.w,Q.h)}}}else O=Q.l+g[pe]*Q.w,N=function(se){return _(se,Q.w,Q.h)};(function(se,oe,he,Ee){var ke,be,Ie,Fe=he[0].trace,ce=Ee.numbersX,we=Ee.numbersY,ye=Fe.align||"center",Ce=x[ye],Re=Ee.transitionOpts,ze=Ee.onComplete,He=T.ensureSingle(oe,"g","numbers"),Ge=[];Fe._hasNumber&&Ge.push("number"),Fe._hasDelta&&(Ge.push("delta"),Fe.delta.position==="left"&&Ge.reverse());var Je=He.selectAll("text").data(Ge);function ot(Mt,Pt,kt,Ze){if(!Mt.match("s")||kt>=0==Ze>=0||Pt(kt).slice(-1).match(h)||Pt(Ze).slice(-1).match(h))return Pt;var Xe=Mt.slice().replace("s","f").replace(/\d+/,function(We){return parseInt(We)-1}),Ve=m(se,{tickformat:Xe});return function(We){return Math.abs(We)<1?o.tickText(Ve,We).text:Pt(We)}}Je.enter().append("text"),Je.attr("text-anchor",function(){return Ce}).attr("class",function(Mt){return Mt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Je.exit().remove();var Qe,vt=Fe.mode+Fe.align;if(Fe._hasDelta&&(Qe=function(){var Mt=m(se,{tickformat:Fe.delta.valueformat},Fe._range);Mt.setScale(),o.prepTicks(Mt);var Pt=function(De){return o.tickText(Mt,De).text},kt=Fe.delta.suffix,Ze=Fe.delta.prefix,Xe=function(De){return Fe.delta.relative?De.relativeDelta:De.delta},Ve=function(De,Be){return De===0||typeof De!="number"||isNaN(De)?"-":(De>0?Fe.delta.increasing.symbol:Fe.delta.decreasing.symbol)+Ze+Be(De)+kt},We=function(De){return De.delta>=0?Fe.delta.increasing.color:Fe.delta.decreasing.color};Fe._deltaLastValue===void 0&&(Fe._deltaLastValue=Xe(he[0]));var at=He.select("text.delta");function et(){at.text(Ve(Xe(he[0]),Pt)).call(c.fill,We(he[0])).call(n.convertToTspans,se)}return at.call(i.font,Fe.delta.font).call(c.fill,We({delta:Fe._deltaLastValue})),y(Re)?at.transition().duration(Re.duration).ease(Re.easing).tween("text",function(){var De=M.select(this),Be=Xe(he[0]),nt=Fe._deltaLastValue,tt=ot(Fe.delta.valueformat,Pt,nt,Be),dt=l(nt,Be);return Fe._deltaLastValue=Be,function(ht){De.text(Ve(dt(ht),tt)),De.call(c.fill,We({delta:dt(ht)}))}}).each("end",function(){et(),ze&&ze()}).each("interrupt",function(){et(),ze&&ze()}):et(),be=f(Ve(Xe(he[0]),Pt),Fe.delta.font,Ce,se),at}(),vt+=Fe.delta.position+Fe.delta.font.size+Fe.delta.font.family+Fe.delta.valueformat,vt+=Fe.delta.increasing.symbol+Fe.delta.decreasing.symbol,Ie=be),Fe._hasNumber&&(function(){var Mt=m(se,{tickformat:Fe.number.valueformat},Fe._range);Mt.setScale(),o.prepTicks(Mt);var Pt=function(We){return o.tickText(Mt,We).text},kt=Fe.number.suffix,Ze=Fe.number.prefix,Xe=He.select("text.number");function Ve(){var We=typeof he[0].y=="number"?Ze+Pt(he[0].y)+kt:"-";Xe.text(We).call(i.font,Fe.number.font).call(n.convertToTspans,se)}y(Re)?Xe.transition().duration(Re.duration).ease(Re.easing).each("end",function(){Ve(),ze&&ze()}).each("interrupt",function(){Ve(),ze&&ze()}).attrTween("text",function(){var We=M.select(this),at=l(he[0].lastY,he[0].y);Fe._lastValue=he[0].y;var et=ot(Fe.number.valueformat,Pt,he[0].lastY,he[0].y);return function(De){We.text(Ze+et(at(De))+kt)}}):Ve(),ke=f(Ze+Pt(he[0].y)+kt,Fe.number.font,Ce,se)}(),vt+=Fe.number.font.size+Fe.number.font.family+Fe.number.valueformat+Fe.number.suffix+Fe.number.prefix,Ie=ke),Fe._hasDelta&&Fe._hasNumber){var xt,mt,rt=[(ke.left+ke.right)/2,(ke.top+ke.bottom)/2],it=[(be.left+be.right)/2,(be.top+be.bottom)/2],Tt=.75*Fe.delta.font.size;Fe.delta.position==="left"&&(xt=S(Fe,"deltaPos",0,-1*(ke.width*g[Fe.align]+be.width*(1-g[Fe.align])+Tt),vt,Math.min),mt=rt[1]-it[1],Ie={width:ke.width+be.width+Tt,height:Math.max(ke.height,be.height),left:be.left+xt,right:ke.right,top:Math.min(ke.top,be.top+mt),bottom:Math.max(ke.bottom,be.bottom+mt)}),Fe.delta.position==="right"&&(xt=S(Fe,"deltaPos",0,ke.width*(1-g[Fe.align])+be.width*g[Fe.align]+Tt,vt,Math.max),mt=rt[1]-it[1],Ie={width:ke.width+be.width+Tt,height:Math.max(ke.height,be.height),left:ke.left,right:be.right+xt,top:Math.min(ke.top,be.top+mt),bottom:Math.max(ke.bottom,be.bottom+mt)}),Fe.delta.position==="bottom"&&(xt=null,mt=be.height,Ie={width:Math.max(ke.width,be.width),height:ke.height+be.height,left:Math.min(ke.left,be.left),right:Math.max(ke.right,be.right),top:ke.bottom-ke.height,bottom:ke.bottom+be.height}),Fe.delta.position==="top"&&(xt=null,mt=ke.top,Ie={width:Math.max(ke.width,be.width),height:ke.height+be.height,left:Math.min(ke.left,be.left),right:Math.max(ke.right,be.right),top:ke.bottom-ke.height-be.height,bottom:ke.bottom}),Qe.attr({dx:xt,dy:mt})}(Fe._hasNumber||Fe._hasDelta)&&He.attr("transform",function(){var Mt=Ee.numbersScaler(Ie);vt+=Mt[2];var Pt,kt=S(Fe,"numbersScale",1,Mt[0],vt,Math.min);Fe._scaleNumbers||(kt=1),Pt=Fe._isAngular?we-kt*Ie.bottom:we-kt*(Ie.top+Ie.bottom)/2,Fe._numbersTop=kt*Ie.top+Pt;var Ze=Ie[ye];ye==="center"&&(Ze=(Ie.left+Ie.right)/2);var Xe=ce-kt*Ze;return Xe=S(Fe,"numbersTranslate",0,Xe,vt,Math.max),d(Xe,Pt)+b(kt)})})(w,te,G,{numbersX:O,numbersY:H,numbersScaler:N,transitionOpts:L,onComplete:P}),K&&(B={range:q.gauge.axis.range,color:q.gauge.bgcolor,line:{color:q.gauge.bordercolor,width:0},thickness:1},V={range:q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:q.gauge.bordercolor,width:q.gauge.borderwidth},thickness:1});var me=te.selectAll("g.angular").data(J?G:[]);me.exit().remove();var ve=te.selectAll("g.angularaxis").data(J?G:[]);ve.exit().remove(),J&&function(se,oe,he,Ee){var ke,be,Ie,Fe,ce=he[0].trace,we=Ee.size,ye=Ee.radius,Ce=Ee.innerRadius,Re=Ee.gaugeBg,ze=Ee.gaugeOutline,He=[we.l+we.w/2,we.t+we.h/2+ye/2],Ge=Ee.gauge,Je=Ee.layer,ot=Ee.transitionOpts,Qe=Ee.onComplete,vt=Math.PI/2;function xt(ht){var gt=ce.gauge.axis.range[0],ut=(ht-gt)/(ce.gauge.axis.range[1]-gt)*Math.PI-vt;return ut<-vt?-vt:ut>vt?vt:ut}function mt(ht){return M.svg.arc().innerRadius((Ce+ye)/2-ht/2*(ye-Ce)).outerRadius((Ce+ye)/2+ht/2*(ye-Ce)).startAngle(-vt)}function rt(ht){ht.attr("d",function(gt){return mt(gt.thickness).startAngle(xt(gt.range[0])).endAngle(xt(gt.range[1]))()})}Ge.enter().append("g").classed("angular",!0),Ge.attr("transform",d(He[0],He[1])),Je.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Je.selectAll("g.xangularaxistick,path,text").remove(),(ke=m(se,ce.gauge.axis)).type="linear",ke.range=ce.gauge.axis.range,ke._id="xangularaxis",ke.ticklabeloverflow="allow",ke.setScale();var it=function(ht){return(ke.range[0]-ht.x)/(ke.range[1]-ke.range[0])*Math.PI+Math.PI},Tt={},Mt=o.makeLabelFns(ke,0).labelStandoff;Tt.xFn=function(ht){var gt=it(ht);return Math.cos(gt)*Mt},Tt.yFn=function(ht){var gt=it(ht),ut=Math.sin(gt)>0?.2:1;return-Math.sin(gt)*(Mt+ht.fontSize*ut)+Math.abs(Math.cos(gt))*(ht.fontSize*t)},Tt.anchorFn=function(ht){var gt=it(ht),ut=Math.cos(gt);return Math.abs(ut)<.1?"middle":ut>0?"start":"end"},Tt.heightFn=function(ht,gt,ut){var wt=it(ht);return-.5*(1+Math.sin(wt))*ut};var Pt=function(ht){return d(He[0]+ye*Math.cos(ht),He[1]-ye*Math.sin(ht))};if(Ie=function(ht){return Pt(it(ht))},be=o.calcTicks(ke),Fe=o.getTickSigns(ke)[2],ke.visible){Fe=ke.ticks==="inside"?-1:1;var kt=(ke.linewidth||1)/2;o.drawTicks(se,ke,{vals:be,layer:Je,path:"M"+Fe*kt+",0h"+Fe*ke.ticklen,transFn:function(ht){var gt=it(ht);return Pt(gt)+"rotate("+-s(gt)+")"}}),o.drawLabels(se,ke,{vals:be,layer:Je,transFn:Ie,labelFns:Tt})}var Ze=[Re].concat(ce.gauge.steps),Xe=Ge.selectAll("g.bg-arc").data(Ze);Xe.enter().append("g").classed("bg-arc",!0).append("path"),Xe.select("path").call(rt).call(v),Xe.exit().remove();var Ve=mt(ce.gauge.bar.thickness),We=Ge.selectAll("g.value-arc").data([ce.gauge.bar]);We.enter().append("g").classed("value-arc",!0).append("path");var at,et,De,Be=We.select("path");y(ot)?(Be.transition().duration(ot.duration).ease(ot.easing).each("end",function(){Qe&&Qe()}).each("interrupt",function(){Qe&&Qe()}).attrTween("d",(at=Ve,et=xt(he[0].lastY),De=xt(he[0].y),function(){var ht=k(et,De);return function(gt){return at.endAngle(ht(gt))()}})),ce._lastValue=he[0].y):Be.attr("d",typeof he[0].y=="number"?Ve.endAngle(xt(he[0].y)):"M0,0Z"),Be.call(v),We.exit().remove(),Ze=[];var nt=ce.gauge.threshold.value;(nt||nt===0)&&Ze.push({range:[nt,nt],color:ce.gauge.threshold.color,line:{color:ce.gauge.threshold.line.color,width:ce.gauge.threshold.line.width},thickness:ce.gauge.threshold.thickness});var tt=Ge.selectAll("g.threshold-arc").data(Ze);tt.enter().append("g").classed("threshold-arc",!0).append("path"),tt.select("path").call(rt).call(v),tt.exit().remove();var dt=Ge.selectAll("g.gauge-outline").data([ze]);dt.enter().append("g").classed("gauge-outline",!0).append("path"),dt.select("path").call(rt).call(v),dt.exit().remove()}(w,0,G,{radius:ae,innerRadius:ue,gauge:me,layer:ve,size:Q,gaugeBg:B,gaugeOutline:V,transitionOpts:L,onComplete:P});var Oe=te.selectAll("g.bullet").data(Y?G:[]);Oe.exit().remove();var Me=te.selectAll("g.bulletaxis").data(Y?G:[]);Me.exit().remove(),Y&&function(se,oe,he,Ee){var ke,be,Ie,Fe,ce,we=he[0].trace,ye=Ee.gauge,Ce=Ee.layer,Re=Ee.gaugeBg,ze=Ee.gaugeOutline,He=Ee.size,Ge=we.domain,Je=Ee.transitionOpts,ot=Ee.onComplete;ye.enter().append("g").classed("bullet",!0),ye.attr("transform",d(He.l,He.t)),Ce.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ce.selectAll("g.xbulletaxistick,path,text").remove();var Qe=He.h,vt=we.gauge.bar.thickness*Qe,xt=Ge.x[0],mt=Ge.x[0]+(Ge.x[1]-Ge.x[0])*(we._hasNumber||we._hasDelta?1-r.bulletNumberDomainSize:1);function rt(Xe){Xe.attr("width",function(Ve){return Math.max(0,ke.c2p(Ve.range[1])-ke.c2p(Ve.range[0]))}).attr("x",function(Ve){return ke.c2p(Ve.range[0])}).attr("y",function(Ve){return .5*(1-Ve.thickness)*Qe}).attr("height",function(Ve){return Ve.thickness*Qe})}(ke=m(se,we.gauge.axis))._id="xbulletaxis",ke.domain=[xt,mt],ke.setScale(),be=o.calcTicks(ke),Ie=o.makeTransTickFn(ke),Fe=o.getTickSigns(ke)[2],ce=He.t+He.h,ke.visible&&(o.drawTicks(se,ke,{vals:ke.ticks==="inside"?o.clipEnds(ke,be):be,layer:Ce,path:o.makeTickPath(ke,ce,Fe),transFn:Ie}),o.drawLabels(se,ke,{vals:be,layer:Ce,transFn:Ie,labelFns:o.makeLabelFns(ke,ce)}));var it=[Re].concat(we.gauge.steps),Tt=ye.selectAll("g.bg-bullet").data(it);Tt.enter().append("g").classed("bg-bullet",!0).append("rect"),Tt.select("rect").call(rt).call(v),Tt.exit().remove();var Mt=ye.selectAll("g.value-bullet").data([we.gauge.bar]);Mt.enter().append("g").classed("value-bullet",!0).append("rect"),Mt.select("rect").attr("height",vt).attr("y",(Qe-vt)/2).call(v),y(Je)?Mt.select("rect").transition().duration(Je.duration).ease(Je.easing).each("end",function(){ot&&ot()}).each("interrupt",function(){ot&&ot()}).attr("width",Math.max(0,ke.c2p(Math.min(we.gauge.axis.range[1],he[0].y)))):Mt.select("rect").attr("width",typeof he[0].y=="number"?Math.max(0,ke.c2p(Math.min(we.gauge.axis.range[1],he[0].y))):0),Mt.exit().remove();var Pt=he.filter(function(){return we.gauge.threshold.value||we.gauge.threshold.value===0}),kt=ye.selectAll("g.threshold-bullet").data(Pt);kt.enter().append("g").classed("threshold-bullet",!0).append("line"),kt.select("line").attr("x1",ke.c2p(we.gauge.threshold.value)).attr("x2",ke.c2p(we.gauge.threshold.value)).attr("y1",(1-we.gauge.threshold.thickness)/2*Qe).attr("y2",(1-(1-we.gauge.threshold.thickness)/2)*Qe).call(c.stroke,we.gauge.threshold.line.color).style("stroke-width",we.gauge.threshold.line.width),kt.exit().remove();var Ze=ye.selectAll("g.gauge-outline").data([ze]);Ze.enter().append("g").classed("gauge-outline",!0).append("rect"),Ze.select("rect").call(rt).call(v),Ze.exit().remove()}(w,0,G,{gauge:Oe,layer:Me,size:Q,gaugeBg:B,gaugeOutline:V,transitionOpts:L,onComplete:P});var Te=te.selectAll("text.title").data(G);Te.exit().remove(),Te.enter().append("text").classed("title",!0),Te.attr("text-anchor",function(){return Y?x.right:x[q.title.align]}).text(q.title.text).call(i.font,q.title.font).call(n.convertToTspans,w),Te.attr("transform",function(){var se,oe=Q.l+Q.w*g[q.title.align],he=r.titlePadding,Ee=i.bBox(Te.node());return K?(J&&(se=q.gauge.axis.visible?i.bBox(ve.node()).top-he-Ee.bottom:Q.t+Q.h/2-ae/2-Ee.bottom-he),Y&&(se=H-(Ee.top+Ee.bottom)/2,oe=Q.l-r.bulletPadding*Q.w)):se=q._numbersTop-he-Ee.bottom,d(oe,se)})})}},16249:function(ee,D,e){var M=e(50693),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(2418),b=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll,t=ee.exports=s(d({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:d({},b.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:d({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},56959:function(ee,D,e){var M=e(78803),k=e(88489).processGrid,l=e(88489).filter;ee.exports=function(T,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=l(b.x,b._len),b._y=l(b.y,b._len),b._z=l(b.z,b._len),b._value=l(b.value,b._len);var d=k(b);b._gridFill=d.fill,b._Xs=d.Xs,b._Ys=d.Ys,b._Zs=d.Zs,b._len=d.len;for(var s=1/0,t=-1/0,i=0;i<b._len;i++){var r=b._value[i];s=Math.min(s,r),t=Math.max(t,r)}b._minValues=s,b._maxValues=t,b._vMin=b.isomin===void 0||b.isomin===null?s:b.isomin,b._vMax=b.isomax===void 0||b.isomin===null?t:b.isomax,M(T,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},22674:function(ee,D,e){var M=e(9330).gl_mesh3d,k=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,b=e(90060),d=function(n,o){for(var a=o.length-1;a>0;a--){var u=Math.min(o[a],o[a-1]),p=Math.max(o[a],o[a-1]);if(p>u&&u<n&&n<=p)return{id:a,distRatio:(p-n)/(p-u)}}return{id:0,distRatio:0}};function s(n,o,a){this.scene=n,this.uid=a,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var t=s.prototype;t.handlePick=function(n){if(n.object===this.mesh){var o=n.data.index,a=this.data._meshX[o],u=this.data._meshY[o],p=this.data._meshZ[o],c=this.data._Ys.length,x=this.data._Zs.length,g=d(a,this.data._Xs).id,h=d(u,this.data._Ys).id,y=d(p,this.data._Zs).id,v=n.index=y+x*h+x*c*g;n.traceCoordinate=[this.data._meshX[v],this.data._meshY[v],this.data._meshZ[v],this.data._value[v]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&m[v]!==void 0?n.textLabel=m[v]:m&&(n.textLabel=m),!0}},t.update=function(n){var o=this.scene,a=o.fullSceneLayout;function u(x,g,h,y){return g.map(function(v){return x.d2l(v,0,y)*h})}this.data=r(n);var p={positions:b(u(a.xaxis,n._meshX,o.dataScale[0],n.xcalendar),u(a.yaxis,n._meshY,o.dataScale[1],n.ycalendar),u(a.zaxis,n._meshZ,o.dataScale[2],n.zcalendar)),cells:b(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,contourEnable:n.contour.show,contourColor:l(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},c=T(n);p.vertexIntensity=n._meshIntensity,p.vertexIntensityBounds=[c.min,c.max],p.colormap=k(n),this.mesh.update(p)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var i=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(n){n._meshI=[],n._meshJ=[],n._meshK=[];var o,a,u,p,c,x,g,h=n.surface.show,y=n.spaceframe.show,v=n.surface.fill,m=n.spaceframe.fill,_=!1,f=!1,S=0,w=n._Xs,E=n._Ys,L=n._Zs,C=w.length,P=E.length,z=L.length,G=i.indexOf(n._gridFill.replace(/-/g,"").replace(/\+/g,"")),O=function(ye,Ce,Re){switch(G){case 5:return Re+z*Ce+z*P*ye;case 4:return Re+z*ye+z*C*Ce;case 3:return Ce+P*Re+P*z*ye;case 2:return Ce+P*ye+P*C*Re;case 1:return ye+C*Re+C*z*Ce;default:return ye+C*Ce+C*P*Re}},H=n._minValues,N=n._maxValues,B=n._vMin,V=n._vMax;function q(ye,Ce,Re){for(var ze=x.length,He=a;He<ze;He++)if(ye===u[He]&&Ce===p[He]&&Re===c[He])return He;return-1}function te(){a=o}function K(){u=[],p=[],c=[],x=[],o=0,te()}function J(ye,Ce,Re,ze){return u.push(ye),p.push(Ce),c.push(Re),x.push(ze),++o-1}function Y(ye,Ce,Re){for(var ze=[],He=0;He<ye.length;He++)ze[He]=ye[He]*(1-Re)+Re*Ce[He];return ze}function W(ye){g=ye}function Q(ye,Ce){return ye==="all"||ye===null||ye.indexOf(Ce)>-1}function ne(ye,Ce){return ye===null?Ce:ye}function re(ye,Ce,Re){te();var ze,He,Ge,Je=[Ce],ot=[Re];if(g>=1)Je=[Ce],ot=[Re];else if(g>0){var Qe=function(kt,Ze){var Xe=kt[0],Ve=kt[1],We=kt[2],at=function(gt,ut,wt){for(var ct=[],ft=0;ft<gt.length;ft++)ct[ft]=(gt[ft]+ut[ft]+wt[ft])/3;return ct}(Xe,Ve,We),et=Math.sqrt(1-g),De=Y(at,Xe,et),Be=Y(at,Ve,et),nt=Y(at,We,et),tt=Ze[0],dt=Ze[1],ht=Ze[2];return{xyzv:[[Xe,Ve,Be],[Be,De,Xe],[Ve,We,nt],[nt,Be,Ve],[We,Xe,De],[De,nt,We]],abc:[[tt,dt,-1],[-1,-1,tt],[dt,ht,-1],[-1,-1,dt],[ht,tt,-1],[-1,-1,ht]]}}(Ce,Re);Je=Qe.xyzv,ot=Qe.abc}for(var vt=0;vt<Je.length;vt++){Ce=Je[vt],Re=ot[vt];for(var xt=[],mt=0;mt<3;mt++){var rt=Ce[mt][0],it=Ce[mt][1],Tt=Ce[mt][2],Mt=Ce[mt][3],Pt=Re[mt]>-1?Re[mt]:q(rt,it,Tt);xt[mt]=Pt>-1?Pt:J(rt,it,Tt,ne(ye,Mt))}ze=xt[0],He=xt[1],Ge=xt[2],n._meshI.push(ze),n._meshJ.push(He),n._meshK.push(Ge),++S}}function ae(ye,Ce,Re,ze){var He=ye[3];He<Re&&(He=Re),He>ze&&(He=ze);for(var Ge=(ye[3]-He)/(ye[3]-Ce[3]+1e-9),Je=[],ot=0;ot<4;ot++)Je[ot]=(1-Ge)*ye[ot]+Ge*Ce[ot];return Je}function ue(ye,Ce,Re){return ye>=Ce&&ye<=Re}function pe(ye){var Ce=.001*(V-B);return ye>=B-Ce&&ye<=V+Ce}function ge(ye){for(var Ce=[],Re=0;Re<4;Re++){var ze=ye[Re];Ce.push([n._x[ze],n._y[ze],n._z[ze],n._value[ze]])}return Ce}var _e=3;function me(ye,Ce,Re,ze,He,Ge){Ge||(Ge=1),Re=[-1,-1,-1];var Je=!1,ot=[ue(Ce[0][3],ze,He),ue(Ce[1][3],ze,He),ue(Ce[2][3],ze,He)];if(!ot[0]&&!ot[1]&&!ot[2])return!1;var Qe=function(xt,mt,rt){return pe(mt[0][3])&&pe(mt[1][3])&&pe(mt[2][3])?(re(xt,mt,rt),!0):Ge<_e&&me(xt,mt,rt,B,V,++Ge)};if(ot[0]&&ot[1]&&ot[2])return Qe(ye,Ce,Re)||Je;var vt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(xt){if(ot[xt[0]]&&ot[xt[1]]&&!ot[xt[2]]){var mt=Ce[xt[0]],rt=Ce[xt[1]],it=Ce[xt[2]],Tt=ae(it,mt,ze,He),Mt=ae(it,rt,ze,He);Je=Qe(ye,[Mt,Tt,mt],[-1,-1,Re[xt[0]]])||Je,Je=Qe(ye,[mt,rt,Mt],[Re[xt[0]],Re[xt[1]],-1])||Je,vt=!0}}),vt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(xt){if(ot[xt[0]]&&!ot[xt[1]]&&!ot[xt[2]]){var mt=Ce[xt[0]],rt=Ce[xt[1]],it=Ce[xt[2]],Tt=ae(rt,mt,ze,He),Mt=ae(it,mt,ze,He);Je=Qe(ye,[Mt,Tt,mt],[-1,-1,Re[xt[0]]])||Je,vt=!0}}),Je}function ve(ye,Ce,Re,ze){var He=!1,Ge=ge(Ce),Je=[ue(Ge[0][3],Re,ze),ue(Ge[1][3],Re,ze),ue(Ge[2][3],Re,ze),ue(Ge[3][3],Re,ze)];if(!(Je[0]||Je[1]||Je[2]||Je[3]))return He;if(Je[0]&&Je[1]&&Je[2]&&Je[3])return f&&(He=function(Qe,vt,xt){var mt=function(rt,it,Tt){re(Qe,[vt[rt],vt[it],vt[Tt]],[xt[rt],xt[it],xt[Tt]])};mt(0,1,2),mt(3,0,1),mt(2,3,0),mt(1,2,3)}(ye,Ge,Ce)||He),He;var ot=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Qe){if(Je[Qe[0]]&&Je[Qe[1]]&&Je[Qe[2]]&&!Je[Qe[3]]){var vt=Ge[Qe[0]],xt=Ge[Qe[1]],mt=Ge[Qe[2]],rt=Ge[Qe[3]];if(f)He=re(ye,[vt,xt,mt],[Ce[Qe[0]],Ce[Qe[1]],Ce[Qe[2]]])||He;else{var it=ae(rt,vt,Re,ze),Tt=ae(rt,xt,Re,ze),Mt=ae(rt,mt,Re,ze);He=re(null,[it,Tt,Mt],[-1,-1,-1])||He}ot=!0}}),ot||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Qe){if(Je[Qe[0]]&&Je[Qe[1]]&&!Je[Qe[2]]&&!Je[Qe[3]]){var vt=Ge[Qe[0]],xt=Ge[Qe[1]],mt=Ge[Qe[2]],rt=Ge[Qe[3]],it=ae(mt,vt,Re,ze),Tt=ae(mt,xt,Re,ze),Mt=ae(rt,xt,Re,ze),Pt=ae(rt,vt,Re,ze);f?(He=re(ye,[vt,Pt,it],[Ce[Qe[0]],-1,-1])||He,He=re(ye,[xt,Tt,Mt],[Ce[Qe[1]],-1,-1])||He):He=function(kt,Ze,Xe){var Ve=function(We,at,et){re(null,[Ze[We],Ze[at],Ze[et]],[Xe[We],Xe[at],Xe[et]])};Ve(0,1,2),Ve(2,3,0)}(0,[it,Tt,Mt,Pt],[-1,-1,-1,-1])||He,ot=!0}}),ot||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Qe){if(Je[Qe[0]]&&!Je[Qe[1]]&&!Je[Qe[2]]&&!Je[Qe[3]]){var vt=Ge[Qe[0]],xt=Ge[Qe[1]],mt=Ge[Qe[2]],rt=Ge[Qe[3]],it=ae(xt,vt,Re,ze),Tt=ae(mt,vt,Re,ze),Mt=ae(rt,vt,Re,ze);f?(He=re(ye,[vt,it,Tt],[Ce[Qe[0]],-1,-1])||He,He=re(ye,[vt,Tt,Mt],[Ce[Qe[0]],-1,-1])||He,He=re(ye,[vt,Mt,it],[Ce[Qe[0]],-1,-1])||He):He=re(null,[it,Tt,Mt],[-1,-1,-1])||He,ot=!0}})),He}function Oe(ye,Ce,Re,ze,He,Ge,Je,ot,Qe,vt,xt){var mt=!1;return _&&(Q(ye,"A")&&(mt=ve(null,[Ce,Re,ze,Ge],vt,xt)||mt),Q(ye,"B")&&(mt=ve(null,[Re,ze,He,Qe],vt,xt)||mt),Q(ye,"C")&&(mt=ve(null,[Re,Ge,Je,Qe],vt,xt)||mt),Q(ye,"D")&&(mt=ve(null,[ze,Ge,ot,Qe],vt,xt)||mt),Q(ye,"E")&&(mt=ve(null,[Re,ze,Ge,Qe],vt,xt)||mt)),f&&(mt=ve(ye,[Re,ze,Ge,Qe],vt,xt)||mt),mt}function Me(ye,Ce,Re,ze,He,Ge,Je,ot){return[ot[0]===!0||me(ye,ge([Ce,Re,ze]),[Ce,Re,ze],Ge,Je),ot[1]===!0||me(ye,ge([ze,He,Ce]),[ze,He,Ce],Ge,Je)]}function Te(ye,Ce,Re,ze,He,Ge,Je,ot,Qe){return ot?Me(ye,Ce,Re,He,ze,Ge,Je,Qe):Me(ye,Re,He,ze,Ce,Ge,Je,Qe)}function se(ye,Ce,Re,ze,He,Ge,Je){var ot,Qe,vt,xt,mt=!1,rt=function(){mt=me(ye,[ot,Qe,vt],[-1,-1,-1],He,Ge)||mt,mt=me(ye,[vt,xt,ot],[-1,-1,-1],He,Ge)||mt},it=Je[0],Tt=Je[1],Mt=Je[2];return it&&(ot=Y(ge([O(Ce,Re-0,ze-0)])[0],ge([O(Ce-1,Re-0,ze-0)])[0],it),Qe=Y(ge([O(Ce,Re-0,ze-1)])[0],ge([O(Ce-1,Re-0,ze-1)])[0],it),vt=Y(ge([O(Ce,Re-1,ze-1)])[0],ge([O(Ce-1,Re-1,ze-1)])[0],it),xt=Y(ge([O(Ce,Re-1,ze-0)])[0],ge([O(Ce-1,Re-1,ze-0)])[0],it),rt()),Tt&&(ot=Y(ge([O(Ce-0,Re,ze-0)])[0],ge([O(Ce-0,Re-1,ze-0)])[0],Tt),Qe=Y(ge([O(Ce-0,Re,ze-1)])[0],ge([O(Ce-0,Re-1,ze-1)])[0],Tt),vt=Y(ge([O(Ce-1,Re,ze-1)])[0],ge([O(Ce-1,Re-1,ze-1)])[0],Tt),xt=Y(ge([O(Ce-1,Re,ze-0)])[0],ge([O(Ce-1,Re-1,ze-0)])[0],Tt),rt()),Mt&&(ot=Y(ge([O(Ce-0,Re-0,ze)])[0],ge([O(Ce-0,Re-0,ze-1)])[0],Mt),Qe=Y(ge([O(Ce-0,Re-1,ze)])[0],ge([O(Ce-0,Re-1,ze-1)])[0],Mt),vt=Y(ge([O(Ce-1,Re-1,ze)])[0],ge([O(Ce-1,Re-1,ze-1)])[0],Mt),xt=Y(ge([O(Ce-1,Re-0,ze)])[0],ge([O(Ce-1,Re-0,ze-1)])[0],Mt),rt()),mt}function oe(ye,Ce,Re,ze,He,Ge,Je,ot,Qe,vt,xt,mt){var rt=ye;return mt?(_&&ye==="even"&&(rt=null),Oe(rt,Ce,Re,ze,He,Ge,Je,ot,Qe,vt,xt)):(_&&ye==="odd"&&(rt=null),Oe(rt,Qe,ot,Je,Ge,He,ze,Re,Ce,vt,xt))}function he(ye,Ce,Re,ze,He){for(var Ge=[],Je=0,ot=0;ot<Ce.length;ot++)for(var Qe=Ce[ot],vt=1;vt<z;vt++)for(var xt=1;xt<P;xt++)Ge.push(Te(ye,O(Qe,xt-1,vt-1),O(Qe,xt-1,vt),O(Qe,xt,vt-1),O(Qe,xt,vt),Re,ze,(Qe+xt+vt)%2,He&&He[Je]?He[Je]:[])),Je++;return Ge}function Ee(ye,Ce,Re,ze,He){for(var Ge=[],Je=0,ot=0;ot<Ce.length;ot++)for(var Qe=Ce[ot],vt=1;vt<C;vt++)for(var xt=1;xt<z;xt++)Ge.push(Te(ye,O(vt-1,Qe,xt-1),O(vt,Qe,xt-1),O(vt-1,Qe,xt),O(vt,Qe,xt),Re,ze,(vt+Qe+xt)%2,He&&He[Je]?He[Je]:[])),Je++;return Ge}function ke(ye,Ce,Re,ze,He){for(var Ge=[],Je=0,ot=0;ot<Ce.length;ot++)for(var Qe=Ce[ot],vt=1;vt<P;vt++)for(var xt=1;xt<C;xt++)Ge.push(Te(ye,O(xt-1,vt-1,Qe),O(xt-1,vt,Qe),O(xt,vt-1,Qe),O(xt,vt,Qe),Re,ze,(xt+vt+Qe)%2,He&&He[Je]?He[Je]:[])),Je++;return Ge}function be(ye,Ce,Re){for(var ze=1;ze<z;ze++)for(var He=1;He<P;He++)for(var Ge=1;Ge<C;Ge++)oe(ye,O(Ge-1,He-1,ze-1),O(Ge-1,He-1,ze),O(Ge-1,He,ze-1),O(Ge-1,He,ze),O(Ge,He-1,ze-1),O(Ge,He-1,ze),O(Ge,He,ze-1),O(Ge,He,ze),Ce,Re,(Ge+He+ze)%2)}function Ie(ye,Ce,Re,ze,He,Ge){for(var Je=[],ot=0,Qe=0;Qe<Ce.length;Qe++)for(var vt=Ce[Qe],xt=1;xt<z;xt++)for(var mt=1;mt<P;mt++)Je.push(se(ye,vt,mt,xt,Re,ze,He[Qe],Ge&&Ge[ot]&&Ge[ot])),ot++;return Je}function Fe(ye,Ce,Re,ze,He,Ge){for(var Je=[],ot=0,Qe=0;Qe<Ce.length;Qe++)for(var vt=Ce[Qe],xt=1;xt<C;xt++)for(var mt=1;mt<z;mt++)Je.push(se(ye,xt,vt,mt,Re,ze,He[Qe],Ge&&Ge[ot]&&Ge[ot])),ot++;return Je}function ce(ye,Ce,Re,ze,He,Ge){for(var Je=[],ot=0,Qe=0;Qe<Ce.length;Qe++)for(var vt=Ce[Qe],xt=1;xt<P;xt++)for(var mt=1;mt<C;mt++)Je.push(se(ye,mt,xt,vt,Re,ze,He[Qe],Ge&&Ge[ot]&&Ge[ot])),ot++;return Je}function we(ye,Ce){for(var Re=[],ze=ye;ze<Ce;ze++)Re.push(ze);return Re}return function(){K(),function(){for(var Qe=0;Qe<C;Qe++)for(var vt=0;vt<P;vt++)for(var xt=0;xt<z;xt++){var mt=O(Qe,vt,xt);J(n._x[mt],n._y[mt],n._z[mt],n._value[mt])}}();var ye=null;if(y&&m&&(W(m),f=!0,be(ye,B,V),f=!1),h&&v){W(v);for(var Ce=n.surface.pattern,Re=n.surface.count,ze=0;ze<Re;ze++){var He=Re===1?.5:ze/(Re-1),Ge=(1-He)*B+He*V,Je=Math.abs(Ge-H)>Math.abs(Ge-N)?[H,Ge]:[Ge,N];_=!0,be(Ce,Je[0],Je[1]),_=!1}}var ot=[[Math.min(B,N),Math.max(B,N)],[Math.min(H,V),Math.max(H,V)]];["x","y","z"].forEach(function(Qe){for(var vt=[],xt=0;xt<ot.length;xt++){var mt=0,rt=ot[xt][0],it=ot[xt][1],Tt=n.slices[Qe];if(Tt.show&&Tt.fill){W(Tt.fill);var Mt=[],Pt=[],kt=[];if(Tt.locations.length)for(var Ze=0;Ze<Tt.locations.length;Ze++){var Xe=d(Tt.locations[Ze],Qe==="x"?w:Qe==="y"?E:L);Xe.distRatio===0?Mt.push(Xe.id):Xe.id>0&&(Pt.push(Xe.id),Qe==="x"?kt.push([Xe.distRatio,0,0]):Qe==="y"?kt.push([0,Xe.distRatio,0]):kt.push([0,0,Xe.distRatio]))}else Mt=we(1,Qe==="x"?C-1:Qe==="y"?P-1:z-1);Pt.length>0&&(vt[mt]=Qe==="x"?Ie(ye,Pt,rt,it,kt,vt[mt]):Qe==="y"?Fe(ye,Pt,rt,it,kt,vt[mt]):ce(ye,Pt,rt,it,kt,vt[mt]),mt++),Mt.length>0&&(vt[mt]=Qe==="x"?he(ye,Mt,rt,it,vt[mt]):Qe==="y"?Ee(ye,Mt,rt,it,vt[mt]):ke(ye,Mt,rt,it,vt[mt]),mt++)}var Ve=n.caps[Qe];Ve.show&&Ve.fill&&(W(Ve.fill),vt[mt]=Qe==="x"?he(ye,[0,C-1],rt,it,vt[mt]):Qe==="y"?Ee(ye,[0,P-1],rt,it,vt[mt]):ke(ye,[0,z-1],rt,it,vt[mt]),mt++)}}),S===0&&K(),n._meshX=u,n._meshY=p,n._meshZ=c,n._meshIntensity=x,n._Xs=w,n._Ys=E,n._Zs=L}(),n}ee.exports={findNearestOnAxis:d,generateIsoMeshes:r,createIsosurfaceTrace:function(n,o){var a=n.glplot.gl,u=M({gl:a}),p=new s(n,u,o.uid);return u._trace=p,p.update(o),n.glplot.add(u),p}}},82738:function(ee,D,e){var M=e(71828),k=e(73972),l=e(16249),T=e(1586);function b(d,s,t,i,r){var n=r("isomin"),o=r("isomax");o!=null&&n!=null&&n>o&&(s.isomin=null,s.isomax=null);var a=r("x"),u=r("y"),p=r("z"),c=r("value");a&&a.length&&u&&u.length&&p&&p.length&&c&&c.length?(k.getComponentMethod("calendars","handleTraceDefaults")(d,s,["x","y","z"],i),r("valuehoverformat"),["x","y","z"].forEach(function(x){r(x+"hoverformat");var g="caps."+x;r(g+".show")&&r(g+".fill");var h="slices."+x;r(h+".show")&&(r(h+".fill"),r(h+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){r(x)}),T(d,s,i,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}ee.exports={supplyDefaults:function(d,s,t,i){b(d,s,0,i,function(r,n){return M.coerce(d,s,l,r,n)})},supplyIsoDefaults:b}},64943:function(ee,D,e){ee.exports={attributes:e(16249),supplyDefaults:e(82738).supplyDefaults,calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(ee,D,e){var M=e(50693),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(54532),b=e(9012),d=e(1426).extendFlat;ee.exports=d({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:d({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:d({},T.lightposition.x,{dflt:1e5}),y:d({},T.lightposition.y,{dflt:1e5}),z:d({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:d({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:d({},b.hoverinfo,{editType:"calc"}),showlegend:d({},b.showlegend,{dflt:!1})})},82932:function(ee,D,e){var M=e(78803);ee.exports=function(k,l){l.intensity&&M(k,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},91134:function(ee,D,e){var M=e(9330).gl_mesh3d,k=e(9330).delaunay_triangulate,l=e(9330).alpha_shape,T=e(9330).convex_hull,b=e(81697).parseColorScale,d=e(78614),s=e(21081).extractOpts,t=e(90060);function i(p,c,x){this.scene=p,this.uid=x,this.mesh=c,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=i.prototype;function n(p){for(var c=[],x=p.length,g=0;g<x;g++)c[g]=d(p[g]);return c}function o(p,c,x,g){for(var h=[],y=c.length,v=0;v<y;v++)h[v]=p.d2l(c[v],0,g)*x;return h}function a(p){for(var c=[],x=p.length,g=0;g<x;g++)c[g]=Math.round(p[g]);return c}function u(p,c){for(var x=p.length,g=0;g<x;g++)if(p[g]<=-.5||p[g]>=c-.5)return!1;return!0}r.handlePick=function(p){if(p.object===this.mesh){var c=p.index=p.data.index;p.data._cellCenter?p.traceCoordinate=p.data.dataCoordinate:p.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[c]!==void 0?p.textLabel=x[c]:x&&(p.textLabel=x),!0}},r.update=function(p){var c=this.scene,x=c.fullSceneLayout;this.data=p;var g,h=p.x.length,y=t(o(x.xaxis,p.x,c.dataScale[0],p.xcalendar),o(x.yaxis,p.y,c.dataScale[1],p.ycalendar),o(x.zaxis,p.z,c.dataScale[2],p.zcalendar));if(p.i&&p.j&&p.k){if(p.i.length!==p.j.length||p.j.length!==p.k.length||!u(p.i,h)||!u(p.j,h)||!u(p.k,h))return;g=t(a(p.i),a(p.j),a(p.k))}else g=p.alphahull===0?T(y):p.alphahull>0?l(p.alphahull,y):function(f,S){for(var w=["x","y","z"].indexOf(f),E=[],L=S.length,C=0;C<L;C++)E[C]=[S[C][(w+1)%3],S[C][(w+2)%3]];return k(E)}(p.delaunayaxis,y);var v={positions:y,cells:g,lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,contourEnable:p.contour.show,contourColor:d(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading};if(p.intensity){var m=s(p);this.color="#fff";var _=p.intensitymode;v[_+"Intensity"]=p.intensity,v[_+"IntensityBounds"]=[m.min,m.max],v.colormap=b(p)}else p.vertexcolor?(this.color=p.vertexcolor[0],v.vertexColors=n(p.vertexcolor)):p.facecolor?(this.color=p.facecolor[0],v.cellColors=n(p.facecolor)):(this.color=p.color,v.meshColor=d(p.color));this.mesh.update(v)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(p,c){var x=p.glplot.gl,g=M({gl:x}),h=new i(p,g,c.uid);return g._trace=h,h.update(c),p.glplot.add(g),h}},58669:function(ee,D,e){var M=e(73972),k=e(71828),l=e(1586),T=e(2418);ee.exports=function(b,d,s,t){function i(n,o){return k.coerce(b,d,T,n,o)}function r(n){var o=n.map(function(a){var u=i(a);return u&&k.isArrayOrTypedArray(u)?u:null});return o.every(function(a){return a&&a.length===o[0].length})&&o}r(["x","y","z"])?(r(["i","j","k"]),(!d.i||d.j&&d.k)&&(!d.j||d.k&&d.i)&&(!d.k||d.i&&d.j)?(M.getComponentMethod("calendars","handleTraceDefaults")(b,d,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){i(n)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in b?(i("intensity"),i("intensitymode"),l(b,d,t,i,{prefix:"",cLetter:"c"})):(d.showscale=!1,"facecolor"in b?i("facecolor"):"vertexcolor"in b?i("vertexcolor"):i("color",s)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),d._length=null):d.visible=!1):d.visible=!1}},21164:function(ee,D,e){ee.exports={attributes:e(2418),supplyDefaults:e(58669),calc:e(82932),colorbar:{min:"cmin",max:"cmax"},plot:e(91134),moduleType:"trace",name:"mesh3d",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(ee,D,e){var M=e(71828).extendFlat,k=e(82196),l=e(12663).axisHoverFormat,T=e(79952).P,b=e(77914),d=e(22372),s=d.INCREASING.COLOR,t=d.DECREASING.COLOR,i=k.line;function r(n){return{line:{color:M({},i.color,{dflt:n}),width:i.width,dash:T,editType:"style"},editType:"style"}}ee.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},i.width,{}),dash:M({},T,{}),editType:"style"},increasing:r(s),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(ee,D,e){var M=e(71828),k=M._,l=e(89298),T=e(42973),b=e(50606).BADNUM;function d(t,i,r,n){return{o:t,h:i,l:r,c:n}}function s(t,i,r,n,o,a){for(var u=o.makeCalcdata(i,"open"),p=o.makeCalcdata(i,"high"),c=o.makeCalcdata(i,"low"),x=o.makeCalcdata(i,"close"),g=Array.isArray(i.text),h=Array.isArray(i.hovertext),y=!0,v=null,m=!!i.xperiodalignment,_=[],f=0;f<n.length;f++){var S=n[f],w=u[f],E=p[f],L=c[f],C=x[f];if(S!==b&&w!==b&&E!==b&&L!==b&&C!==b){C===w?v!==null&&C!==v&&(y=C>v):y=C>w,v=C;var P=a(w,E,L,C);P.pos=S,P.yc=(w+C)/2,P.i=f,P.dir=y?"increasing":"decreasing",P.x=P.pos,P.y=[L,E],m&&(P.orig_p=r[f]),g&&(P.tx=i.text[f]),h&&(P.htx=i.hovertext[f]),_.push(P)}else _.push({pos:S,empty:!0})}return i._extremes[o._id]=l.findExtremes(o,M.concat(c,p),{padded:!0}),_.length&&(_[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),_}ee.exports={calc:function(t,i){var r=l.getFromId(t,i.xaxis),n=l.getFromId(t,i.yaxis),o=function(x,g,h){var y=h._minDiff;if(!y){var v,m=x._fullData,_=[];for(y=1/0,v=0;v<m.length;v++){var f=m[v];if(f.type==="ohlc"&&f.visible===!0&&f.xaxis===g._id){_.push(f);var S=g.makeCalcdata(f,"x");f._origX=S;var w=T(h,g,"x",S).vals;f._xcalc=w;var E=M.distinctVals(w).minDiff;E&&isFinite(E)&&(y=Math.min(y,E))}}for(y===1/0&&(y=1),v=0;v<_.length;v++)_[v]._minDiff=y}return y*h.tickwidth}(t,r,i),a=i._minDiff;i._minDiff=null;var u=i._origX;i._origX=null;var p=i._xcalc;i._xcalc=null;var c=s(t,i,u,p,n,d);return i._extremes[r._id]=l.findExtremes(r,p,{vpad:a/2}),c.length?(M.extendFlat(c[0].t,{wHover:a/2,tickLen:o}),c):[{t:{empty:!0}}]},calcCommon:s}},16169:function(ee,D,e){var M=e(71828),k=e(14555),l=e(73927),T=e(2522);function b(d,s,t,i){t(i+".line.color"),t(i+".line.width",s.line.width),t(i+".line.dash",s.line.dash)}ee.exports=function(d,s,t,i){function r(n,o){return M.coerce(d,s,T,n,o)}k(d,s,r,i)?(l(d,s,i,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),b(0,s,r,"increasing"),b(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),i._requestRangeslider[s.xaxis]=!0):s.visible=!1}},66449:function(ee,D,e){var M=e(89298),k=e(71828),l=e(30211),T=e(7901),b=e(71828).fillText,d=e(22372),s={increasing:d.INCREASING.SYMBOL,decreasing:d.DECREASING.SYMBOL};function t(n,o,a,u){var p,c,x=n.cd,g=n.xa,h=x[0].trace,y=x[0].t,v=h.type,m=v==="ohlc"?"l":"min",_=v==="ohlc"?"h":"max",f=y.bPos||0,S=function(B){return B.pos+f-o},w=y.bdPos||y.tickLen,E=y.wHover,L=Math.min(1,w/Math.abs(g.r2c(g.range[1])-g.r2c(g.range[0])));function C(B){var V=S(B);return l.inbox(V-E,V+E,p)}function P(B){var V=B[m],q=B[_];return V===q||l.inbox(V-a,q-a,p)}function z(B){return(C(B)+P(B))/2}p=n.maxHoverDistance-L,c=n.maxSpikeDistance-L;var G=l.getDistanceFunction(u,C,P,z);if(l.getClosest(x,G,n),n.index===!1)return null;var O=x[n.index];if(O.empty)return null;var H=h[O.dir],N=H.line.color;return T.opacity(N)&&H.line.width?n.color=N:n.color=H.fillcolor,n.x0=g.c2p(O.pos+f-w,!0),n.x1=g.c2p(O.pos+f+w,!0),n.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,n.spikeDistance=z(O)*c/p,n.xSpike=g.c2p(O.pos,!0),n}function i(n,o,a,u){var p=n.cd,c=n.ya,x=p[0].trace,g=p[0].t,h=[],y=t(n,o,a,u);if(!y)return[];var v=p[y.index].hi||x.hoverinfo,m=v.split("+");if(v!=="all"&&m.indexOf("y")===-1)return[];for(var _=["high","open","close","low"],f={},S=0;S<_.length;S++){var w,E=_[S],L=x[E][y.index],C=c.c2p(L,!0);L in f?(w=f[L]).yLabel+="<br>"+g.labels[E]+M.hoverLabelText(c,L,x.yhoverformat):((w=k.extendFlat({},y)).y0=w.y1=C,w.yLabelVal=L,w.yLabel=g.labels[E]+M.hoverLabelText(c,L,x.yhoverformat),w.name="",h.push(w),f[L]=w)}return h}function r(n,o,a,u){var p=n.cd,c=n.ya,x=p[0].trace,g=p[0].t,h=t(n,o,a,u);if(!h)return[];var y=p[h.index],v=h.index=y.i,m=y.dir;function _(P){return g.labels[P]+M.hoverLabelText(c,x[P][v],x.yhoverformat)}var f=y.hi||x.hoverinfo,S=f.split("+"),w=f==="all",E=w||S.indexOf("y")!==-1,L=w||S.indexOf("text")!==-1,C=E?[_("open"),_("high"),_("low"),_("close")+"  "+s[m]]:[];return L&&b(y,x,C),h.extraText=C.join("<br>"),h.y0=h.y1=c.c2p(y.yc,!0),[h]}ee.exports={hoverPoints:function(n,o,a,u){return n.cd[0].trace.hoverlabel.split?i(n,o,a,u):r(n,o,a,u)},hoverSplit:i,hoverOnPoints:r}},54186:function(ee,D,e){ee.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(2522),supplyDefaults:e(16169),calc:e(3485).calc,plot:e(72314),style:e(53101),hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},14555:function(ee,D,e){var M=e(73972),k=e(71828);ee.exports=function(l,T,b,d){var s=b("x"),t=b("open"),i=b("high"),r=b("low"),n=b("close");if(b("hoverlabel.split"),M.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x"],d),t&&i&&r&&n){var o=Math.min(t.length,i.length,r.length,n.length);return s&&(o=Math.min(o,k.minRowLength(s))),T._length=o,o}}},72314:function(ee,D,e){var M=e(39898),k=e(71828);ee.exports=function(l,T,b,d){var s=T.yaxis,t=T.xaxis,i=!!t.rangebreaks;k.makeTraceGroups(d,b,"trace ohlc").each(function(r){var n=M.select(this),o=r[0],a=o.t;if(o.trace.visible!==!0||a.empty)n.remove();else{var u=a.tickLen,p=n.selectAll("path").data(k.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(c){if(c.empty)return"M0,0Z";var x=t.c2p(c.pos-u,!0),g=t.c2p(c.pos+u,!0),h=i?(x+g)/2:t.c2p(c.pos,!0);return"M"+x+","+s.c2p(c.o,!0)+"H"+h+"M"+h+","+s.c2p(c.h,!0)+"V"+s.c2p(c.l,!0)+"M"+g+","+s.c2p(c.c,!0)+"H"+h})}})}},67324:function(ee){ee.exports=function(D,e){var M,k=D.cd,l=D.xaxis,T=D.yaxis,b=[],d=k[0].t.bPos||0;if(e===!1)for(M=0;M<k.length;M++)k[M].selected=0;else for(M=0;M<k.length;M++){var s=k[M];e.contains([l.c2p(s.pos+d),T.c2p(s.yc)],null,s.i,D)?(b.push({pointNumber:s.i,x:l.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return b}},53101:function(ee,D,e){var M=e(39898),k=e(91424),l=e(7901);ee.exports=function(T,b,d){var s=d||M.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=t[0].trace;M.select(this).selectAll("path").each(function(r){if(!r.empty){var n=i[r.dir].line;M.select(this).style("fill","none").call(l.stroke,n.color).call(k.dashLine,n.dash,n.width).style("opacity",i.selectedpoints&&!r.selected?.3:1)}})})}},99506:function(ee,D,e){var M=e(1426).extendFlat,k=e(9012),l=e(41940),T=e(50693),b=e(5386).fF,d=e(27670).Y,s=M({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ee.exports={domain:d({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:l({editType:"calc"}),tickfont:l({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(ee,D,e){var M=e(27659).a0,k=e(45784),l="parcats";D.name=l,D.plot=function(T,b,d,s){var t=M(T.calcdata,l);if(t.length){var i=t[0];k(T,i,d,s)}},D.clean=function(T,b,d,s){var t=s._has&&s._has("parcats"),i=b._has&&b._has("parcats");t&&!i&&s._paperdiv.selectAll(".parcats").remove()}},28699:function(ee,D,e){var M=e(28984).wrap,k=e(52075).hasColorscale,l=e(78803),T=e(75744),b=e(91424),d=e(71828),s=e(92770);function t(n,o,a){n.valueInds.push(o),n.count+=a}function i(n,o,a){return{categoryInds:n,color:o,rawColor:a,valueInds:[],count:0}}function r(n,o,a){n.valueInds.push(o),n.count+=a}ee.exports=function(n,o){var a=d.filterVisible(o.dimensions);if(a.length===0)return[];var u,p,c,x=a.map(function(q){var te;if(q.categoryorder==="trace")te=null;else if(q.categoryorder==="array")te=q.categoryarray;else{te=T(q.values);for(var K=!0,J=0;J<te.length;J++)if(!s(te[J])){K=!1;break}te.sort(K?d.sorterAsc:void 0),q.categoryorder==="category descending"&&(te=te.reverse())}return function(Y,W){W=W==null?[]:W.map(function(_e){return _e});var Q={},ne={},re=[];W.forEach(function(_e,me){Q[_e]=0,ne[_e]=me});for(var ae=0;ae<Y.length;ae++){var ue,pe=Y[ae];Q[pe]===void 0?(Q[pe]=1,ue=W.push(pe)-1,ne[pe]=ue):(Q[pe]++,ue=ne[pe]),re.push(ue)}var ge=W.map(function(_e){return Q[_e]});return{uniqueValues:W,uniqueCounts:ge,inds:re}}(q.values,te)});u=d.isArrayOrTypedArray(o.counts)?o.counts:[o.counts],function(q){var te,K=q.map(function(J){return J.displayindex});if(function(J){for(var Y=new Array(J.length),W=0;W<J.length;W++){if(J[W]<0||J[W]>=J.length||Y[J[W]]!==void 0)return!1;Y[J[W]]=!0}return!0}(K))for(te=0;te<q.length;te++)q[te]._displayindex=q[te].displayindex;else for(te=0;te<q.length;te++)q[te]._displayindex=te}(a),a.forEach(function(q,te){(function(K,J){K._categoryarray=J.uniqueValues,K.ticktext===null||K.ticktext===void 0?K._ticktext=[]:K._ticktext=K.ticktext.slice();for(var Y=K._ticktext.length;Y<J.uniqueValues.length;Y++)K._ticktext.push(J.uniqueValues[Y])})(q,x[te])});var g,h=o.line;h?(k(o,"line")&&l(n,o,{vals:o.line.color,containerStr:"line",cLetter:"c"}),g=b.tryColorscale(h)):g=d.identity;var y,v,m,_,f,S=a[0].values.length,w={},E=x.map(function(q){return q.inds});for(c=0,y=0;y<S;y++){var L=[];for(v=0;v<E.length;v++)L.push(E[v][y]);p=u[y%u.length],c+=p;var C=(m=y,_=void 0,f=void 0,d.isArrayOrTypedArray(h.color)?f=_=h.color[m%h.color.length]:_=h.color,{color:g(_),rawColor:f}),P=L+"-"+C.rawColor;w[P]===void 0&&(w[P]=i(L,C.color,C.rawColor)),r(w[P],y,p)}var z,G=a.map(function(q,te){return function(K,J,Y,W,Q){return{dimensionInd:K,containerInd:J,displayInd:Y,dimensionLabel:W,count:Q,categories:[],dragX:null}}(te,q._index,q._displayindex,q.label,c)});for(y=0;y<S;y++)for(p=u[y%u.length],v=0;v<G.length;v++){var O=G[v].containerInd,H=x[v].inds[y],N=G[v].categories;if(N[H]===void 0){var B=o.dimensions[O]._categoryarray[H],V=o.dimensions[O]._ticktext[H];N[H]={dimensionInd:v,categoryInd:z=H,categoryValue:B,displayInd:z,categoryLabel:V,valueInds:[],count:0,dragY:null}}t(N[H],y,p)}return M(function(q,te,K){var J=q.map(function(Y){return Y.categories.length}).reduce(function(Y,W){return Math.max(Y,W)});return{dimensions:q,paths:te,trace:void 0,maxCats:J,count:K}}(G,w,c))}},14647:function(ee,D,e){var M=e(71828),k=e(52075).hasColorscale,l=e(1586),T=e(27670).c,b=e(85501),d=e(99506),s=e(94397);function t(i,r){function n(g,h){return M.coerce(i,r,d.dimensions,g,h)}var o=n("values"),a=n("visible");if(o&&o.length||(a=r.visible=!1),a){n("label"),n("displayindex",r._index);var u,p=i.categoryarray,c=Array.isArray(p)&&p.length>0;c&&(u="array");var x=n("categoryorder",u);x==="array"?(n("categoryarray"),n("ticktext")):(delete i.categoryarray,delete i.ticktext),c||x!=="array"||(r.categoryorder="trace")}}ee.exports=function(i,r,n,o){function a(g,h){return M.coerce(i,r,d,g,h)}var u=b(i,r,{name:"dimensions",handleItemDefaults:t}),p=function(g,h,y,v,m){m("line.shape"),m("line.hovertemplate");var _=m("line.color",v.colorway[0]);if(k(g,"line")&&M.isArrayOrTypedArray(_)){if(_.length)return m("line.colorscale"),l(g,h,v,m,{prefix:"line.",cLetter:"c"}),_.length;h.line.color=y}return 1/0}(i,r,n,o,a);T(r,o,a),Array.isArray(u)&&u.length||(r.visible=!1),s(r,u,"values",p),a("hoveron"),a("hovertemplate"),a("arrangement"),a("bundlecolors"),a("sortpaths"),a("counts");var c={family:o.font.family,size:Math.round(o.font.size),color:o.font.color};M.coerceFont(a,"labelfont",c);var x={family:o.font.family,size:Math.round(o.font.size/1.2),color:o.font.color};M.coerceFont(a,"tickfont",x)}},94873:function(ee,D,e){ee.exports={attributes:e(99506),supplyDefaults:e(14647),calc:e(28699),plot:e(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(27677),categories:["noOpacity"],meta:{}}},45460:function(ee,D,e){var M=e(39898),k=e(81684).k4,l=e(72391),T=e(30211),b=e(71828),d=b.strTranslate,s=e(91424),t=e(84267),i=e(63893);function r(K,J,Y,W){var Q=J._context.staticPlot,ne=K.map(N.bind(0,J,Y)),re=W.selectAll("g.parcatslayer").data([null]);re.enter().append("g").attr("class","parcatslayer").style("pointer-events",Q?"none":"all");var ae=re.selectAll("g.trace.parcats").data(ne,n),ue=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(se){return d(se.x,se.y)}),ue.append("g").attr("class","paths");var pe=ae.select("g.paths").selectAll("path.path").data(function(se){return se.paths},n);pe.attr("fill",function(se){return se.model.color});var ge=pe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(se){return se.model.color}).attr("fill-opacity",0);h(ge),pe.attr("d",function(se){return se.svgD}),ge.empty()||pe.sort(a),pe.exit().remove(),pe.on("mouseover",u).on("mouseout",p).on("click",g),ue.append("g").attr("class","dimensions");var _e=ae.select("g.dimensions").selectAll("g.dimension").data(function(se){return se.dimensions},n);_e.enter().append("g").attr("class","dimension"),_e.attr("transform",function(se){return d(se.x,0)}),_e.exit().remove();var me=_e.selectAll("g.category").data(function(se){return se.categories},n),ve=me.enter().append("g").attr("class","category");me.attr("transform",function(se){return d(0,se.y)}),ve.append("rect").attr("class","catrect").attr("pointer-events","none"),me.select("rect.catrect").attr("fill","none").attr("width",function(se){return se.width}).attr("height",function(se){return se.height}),v(ve);var Oe=me.selectAll("rect.bandrect").data(function(se){return se.bands},n);Oe.each(function(){b.raiseToTop(this)}),Oe.attr("fill",function(se){return se.color});var Me=Oe.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);Oe.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}).attr("cursor",function(se){return se.parcatsViewModel.arrangement==="fixed"?"default":se.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),m(Me),Oe.exit().remove(),ve.append("text").attr("class","catlabel").attr("pointer-events","none");var Te=J._fullLayout.paper_bgcolor;me.select("text.catlabel").attr("text-anchor",function(se){return o(se)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",i.makeTextShadow(Te)).style("fill","rgb(0, 0, 0)").attr("x",function(se){return o(se)?se.width+5:-5}).attr("y",function(se){return se.height/2}).text(function(se){return se.model.categoryLabel}).each(function(se){s.font(M.select(this),se.parcatsViewModel.categorylabelfont),i.convertToTspans(M.select(this),J)}),ve.append("text").attr("class","dimlabel"),me.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(se){return se.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(se){return se.width/2}).attr("y",-5).text(function(se,oe){return oe===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null}).each(function(se){s.font(M.select(this),se.parcatsViewModel.labelfont)}),me.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",L),me.exit().remove(),_e.call(M.behavior.drag().origin(function(se){return{x:se.x,y:0}}).on("dragstart",C).on("drag",P).on("dragend",z)),ae.each(function(se){se.traceSelection=M.select(this),se.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),se.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}function n(K){return K.key}function o(K){var J=K.parcatsViewModel.dimensions.length,Y=K.parcatsViewModel.dimensions[J-1].model.dimensionInd;return K.model.dimensionInd===Y}function a(K,J){return K.model.rawColor>J.model.rawColor?1:K.model.rawColor<J.model.rawColor?-1:0}function u(K){if(!K.parcatsViewModel.dragDimension&&K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){b.raiseToTop(this),y(M.select(this));var J=c(K),Y=x(K);if(K.parcatsViewModel.graphDiv.emit("plotly_hover",{points:J,event:M.event,constraints:Y}),K.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var W,Q,ne,re=M.mouse(this)[0],ae=K.parcatsViewModel.graphDiv,ue=K.parcatsViewModel.trace,pe=ae._fullLayout,ge=pe._paperdiv.node().getBoundingClientRect(),_e=K.parcatsViewModel.graphDiv.getBoundingClientRect();for(ne=0;ne<K.leftXs.length-1;ne++)if(K.leftXs[ne]+K.dimWidths[ne]-2<=re&&re<=K.leftXs[ne+1]+2){var me=K.parcatsViewModel.dimensions[ne],ve=K.parcatsViewModel.dimensions[ne+1];W=(me.x+me.width+ve.x)/2,Q=(K.topYs[ne]+K.topYs[ne+1]+K.height)/2;break}var Oe=K.parcatsViewModel.x+W,Me=K.parcatsViewModel.y+Q,Te=t.mostReadable(K.model.color,["black","white"]),se=K.model.count,oe=se/K.parcatsViewModel.model.count,he={countLabel:se,probabilityLabel:oe.toFixed(3)},Ee=[];K.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ee.push(["Count:",he.countLabel].join(" ")),K.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ee.push(["P:",he.probabilityLabel].join(" "));var ke=Ee.join("<br>"),be=M.mouse(ae)[0];T.loneHover({trace:ue,x:Oe-ge.left+_e.left,y:Me-ge.top+_e.top,text:ke,color:K.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Te,idealAlign:be<Oe?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:he,eventData:[{data:ue._input,fullData:ue,count:se,probability:oe}]},{container:pe._hoverlayer.node(),outerContainer:pe._paper.node(),gd:ae})}}}function p(K){if(!K.parcatsViewModel.dragDimension&&(h(M.select(this)),T.loneUnhover(K.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),K.parcatsViewModel.pathSelection.sort(a),K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var J=c(K),Y=x(K);K.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:J,event:M.event,constraints:Y})}}function c(K){for(var J=[],Y=G(K.parcatsViewModel),W=0;W<K.model.valueInds.length;W++){var Q=K.model.valueInds[W];J.push({curveNumber:Y,pointNumber:Q})}return J}function x(K){for(var J={},Y=K.parcatsViewModel.model.dimensions,W=0;W<Y.length;W++){var Q=Y[W],ne=Q.categories[K.model.categoryInds[W]];J[Q.containerInd]=ne.categoryValue}return K.model.rawColor!==void 0&&(J.color=K.model.rawColor),J}function g(K){if(K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var J=c(K),Y=x(K);K.parcatsViewModel.graphDiv.emit("plotly_click",{points:J,event:M.event,constraints:Y})}}function h(K){K.attr("fill",function(J){return J.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y(K){K.attr("fill-opacity",.8).attr("stroke",function(J){return t.mostReadable(J.model.color,["black","white"])}).attr("stroke-width",.3)}function v(K){K.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m(K){K.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _(K){var J=K.parcatsViewModel.pathSelection,Y=K.categoryViewModel.model.dimensionInd,W=K.categoryViewModel.model.categoryInd;return J.filter(function(Q){return Q.model.categoryInds[Y]===W&&Q.model.color===K.color})}function f(K,J,Y){var W=M.select(K).datum(),Q=W.categoryViewModel.model,ne=W.parcatsViewModel.graphDiv,re=M.select(K.parentNode).selectAll("rect.bandrect"),ae=[];re.each(function(pe){_(pe).each(function(ge){Array.prototype.push.apply(ae,c(ge))})});var ue={};ue[Q.dimensionInd]=Q.categoryValue,ne.emit(J,{points:ae,event:Y,constraints:ue})}function S(K,J,Y){var W=M.select(K).datum(),Q=W.categoryViewModel.model,ne=W.parcatsViewModel.graphDiv,re=_(W),ae=[];re.each(function(pe){Array.prototype.push.apply(ae,c(pe))});var ue={};ue[Q.dimensionInd]=Q.categoryValue,W.rawColor!==void 0&&(ue.color=W.rawColor),ne.emit(J,{points:ae,event:Y,constraints:ue})}function w(K,J,Y){K._fullLayout._calcInverseTransform(K);var W,Q,ne=K._fullLayout._invScaleX,re=K._fullLayout._invScaleY,ae=M.select(Y.parentNode).select("rect.catrect"),ue=ae.node().getBoundingClientRect(),pe=ae.datum(),ge=pe.parcatsViewModel,_e=ge.model.dimensions[pe.model.dimensionInd],me=ge.trace,ve=ue.top+ue.height/2;ge.dimensions.length>1&&_e.displayInd===ge.dimensions.length-1?(W=ue.left,Q="left"):(W=ue.left+ue.width,Q="right");var Oe=pe.model.count,Me=pe.model.categoryLabel,Te=Oe/pe.parcatsViewModel.model.count,se={countLabel:Oe,categoryLabel:Me,probabilityLabel:Te.toFixed(3)},oe=[];pe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&oe.push(["Count:",se.countLabel].join(" ")),pe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&oe.push(["P("+se.categoryLabel+"):",se.probabilityLabel].join(" "));var he=oe.join("<br>");return{trace:me,x:ne*(W-J.left),y:re*(ve-J.top),text:he,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Q,hovertemplate:me.hovertemplate,hovertemplateLabels:se,eventData:[{data:me._input,fullData:me,count:Oe,category:Me,probability:Te}]}}function E(K){if(!K.parcatsViewModel.dragDimension&&K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(M.mouse(this)[1]<-1)return;var J,Y=K.parcatsViewModel.graphDiv,W=Y._fullLayout,Q=W._paperdiv.node().getBoundingClientRect(),ne=K.parcatsViewModel.hoveron,re=this;ne==="color"?(function(ae){var ue=M.select(ae).datum(),pe=_(ue);y(pe),pe.each(function(){b.raiseToTop(this)}),M.select(ae.parentNode).selectAll("rect.bandrect").filter(function(ge){return ge.color===ue.color}).each(function(){b.raiseToTop(this),M.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(re),S(re,"plotly_hover",M.event)):(function(ae){M.select(ae.parentNode).selectAll("rect.bandrect").each(function(ue){var pe=_(ue);y(pe),pe.each(function(){b.raiseToTop(this)})}),M.select(ae.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(re),f(re,"plotly_hover",M.event)),K.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ne==="category"?J=w(Y,Q,re):ne==="color"?J=function(ae,ue,pe){ae._fullLayout._calcInverseTransform(ae);var ge,_e,me=ae._fullLayout._invScaleX,ve=ae._fullLayout._invScaleY,Oe=pe.getBoundingClientRect(),Me=M.select(pe).datum(),Te=Me.categoryViewModel,se=Te.parcatsViewModel,oe=se.model.dimensions[Te.model.dimensionInd],he=se.trace,Ee=Oe.y+Oe.height/2;se.dimensions.length>1&&oe.displayInd===se.dimensions.length-1?(ge=Oe.left,_e="left"):(ge=Oe.left+Oe.width,_e="right");var ke=Te.model.categoryLabel,be=Me.parcatsViewModel.model.count,Ie=0;Me.categoryViewModel.bands.forEach(function(Je){Je.color===Me.color&&(Ie+=Je.count)});var Fe=Te.model.count,ce=0;se.pathSelection.each(function(Je){Je.model.color===Me.color&&(ce+=Je.model.count)});var we=Ie/be,ye=Ie/ce,Ce=Ie/Fe,Re={countLabel:be,categoryLabel:ke,probabilityLabel:we.toFixed(3)},ze=[];Te.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ze.push(["Count:",Re.countLabel].join(" ")),Te.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(ze.push("P(color  "+ke+"): "+Re.probabilityLabel),ze.push("P("+ke+" | color): "+ye.toFixed(3)),ze.push("P(color | "+ke+"): "+Ce.toFixed(3)));var He=ze.join("<br>"),Ge=t.mostReadable(Me.color,["black","white"]);return{trace:he,x:me*(ge-ue.left),y:ve*(Ee-ue.top),text:He,color:Me.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ge,fontSize:10,idealAlign:_e,hovertemplate:he.hovertemplate,hovertemplateLabels:Re,eventData:[{data:he._input,fullData:he,category:ke,count:be,probability:we,categorycount:Fe,colorcount:ce,bandcolorcount:Ie}]}}(Y,Q,re):ne==="dimension"&&(J=function(ae,ue,pe){var ge=[];return M.select(pe.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ge.push(w(ae,ue,this))}),ge}(Y,Q,re)),J&&T.loneHover(J,{container:W._hoverlayer.node(),outerContainer:W._paper.node(),gd:Y}))}}function L(K){var J=K.parcatsViewModel;J.dragDimension||(h(J.pathSelection),v(J.dimensionSelection.selectAll("g.category")),m(J.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(J.graphDiv._fullLayout._hoverlayer.node()),J.pathSelection.sort(a),J.hoverinfoItems.indexOf("skip")!==-1)||(K.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",M.event):f(this,"plotly_unhover",M.event))}function C(K){K.parcatsViewModel.arrangement!=="fixed"&&(K.dragDimensionDisplayInd=K.model.displayInd,K.initialDragDimensionDisplayInds=K.parcatsViewModel.model.dimensions.map(function(J){return J.displayInd}),K.dragHasMoved=!1,K.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function(J){var Y=M.mouse(this)[0],W=M.mouse(this)[1];-2<=Y&&Y<=J.width+2&&-2<=W&&W<=J.height+2&&(K.dragCategoryDisplayInd=J.model.displayInd,K.initialDragCategoryDisplayInds=K.model.categories.map(function(Q){return Q.displayInd}),J.model.dragY=J.y,b.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(Q){Q.y<W&&W<=Q.y+Q.height&&(K.potentialClickBand=this)}))}),K.parcatsViewModel.dragDimension=K,T.loneUnhover(K.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P(K){if(K.parcatsViewModel.arrangement!=="fixed"&&(K.dragHasMoved=!0,K.dragDimensionDisplayInd!==null)){var J=K.dragDimensionDisplayInd,Y=J-1,W=J+1,Q=K.parcatsViewModel.dimensions[J];if(K.dragCategoryDisplayInd!==null){var ne=Q.categories[K.dragCategoryDisplayInd];ne.model.dragY+=M.event.dy;var re=ne.model.dragY,ae=ne.model.displayInd,ue=Q.categories,pe=ue[ae-1],ge=ue[ae+1];pe!==void 0&&re<pe.y+pe.height/2&&(ne.model.displayInd=pe.model.displayInd,pe.model.displayInd=ae),ge!==void 0&&re+ne.height>ge.y+ge.height/2&&(ne.model.displayInd=ge.model.displayInd,ge.model.displayInd=ae),K.dragCategoryDisplayInd=ne.model.displayInd}if(K.dragCategoryDisplayInd===null||K.parcatsViewModel.arrangement==="freeform"){Q.model.dragX=M.event.x;var _e=K.parcatsViewModel.dimensions[Y],me=K.parcatsViewModel.dimensions[W];_e!==void 0&&Q.model.dragX<_e.x+_e.width&&(Q.model.displayInd=_e.model.displayInd,_e.model.displayInd=J),me!==void 0&&Q.model.dragX+Q.width>me.x&&(Q.model.displayInd=me.model.displayInd,me.model.displayInd=K.dragDimensionDisplayInd),K.dragDimensionDisplayInd=Q.model.displayInd}q(K.parcatsViewModel),V(K.parcatsViewModel),H(K.parcatsViewModel),O(K.parcatsViewModel)}}function z(K){if(K.parcatsViewModel.arrangement!=="fixed"&&K.dragDimensionDisplayInd!==null){M.select(this).selectAll("text").attr("font-weight","normal");var J={},Y=G(K.parcatsViewModel),W=K.parcatsViewModel.model.dimensions.map(function(ge){return ge.displayInd}),Q=K.initialDragDimensionDisplayInds.some(function(ge,_e){return ge!==W[_e]});Q&&W.forEach(function(ge,_e){var me=K.parcatsViewModel.model.dimensions[_e].containerInd;J["dimensions["+me+"].displayindex"]=ge});var ne=!1;if(K.dragCategoryDisplayInd!==null){var re=K.model.categories.map(function(ge){return ge.displayInd});if(ne=K.initialDragCategoryDisplayInds.some(function(ge,_e){return ge!==re[_e]})){var ae=K.model.categories.slice().sort(function(ge,_e){return ge.displayInd-_e.displayInd}),ue=ae.map(function(ge){return ge.categoryValue}),pe=ae.map(function(ge){return ge.categoryLabel});J["dimensions["+K.model.containerInd+"].categoryarray"]=[ue],J["dimensions["+K.model.containerInd+"].ticktext"]=[pe],J["dimensions["+K.model.containerInd+"].categoryorder"]="array"}}K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!K.dragHasMoved&&K.potentialClickBand&&(K.parcatsViewModel.hoveron==="color"?S(K.potentialClickBand,"plotly_click",M.event.sourceEvent):f(K.potentialClickBand,"plotly_click",M.event.sourceEvent)),K.model.dragX=null,K.dragCategoryDisplayInd!==null&&(K.parcatsViewModel.dimensions[K.dragDimensionDisplayInd].categories[K.dragCategoryDisplayInd].model.dragY=null,K.dragCategoryDisplayInd=null),K.dragDimensionDisplayInd=null,K.parcatsViewModel.dragDimension=null,K.dragHasMoved=null,K.potentialClickBand=null,q(K.parcatsViewModel),V(K.parcatsViewModel),M.transition().duration(300).ease("cubic-in-out").each(function(){H(K.parcatsViewModel,!0),O(K.parcatsViewModel,!0)}).each("end",function(){(Q||ne)&&l.restyle(K.parcatsViewModel.graphDiv,J,[Y])})}}function G(K){for(var J,Y=K.graphDiv._fullData,W=0;W<Y.length;W++)if(K.key===Y[W].uid){J=W;break}return J}function O(K,J){var Y;J===void 0&&(J=!1),K.pathSelection.data(function(W){return W.paths},n),(Y=K.pathSelection,J?Y.transition():Y).attr("d",function(W){return W.svgD})}function H(K,J){function Y(re){return J?re.transition():re}J===void 0&&(J=!1),K.dimensionSelection.data(function(re){return re.dimensions},n);var W=K.dimensionSelection.selectAll("g.category").data(function(re){return re.categories},n);Y(K.dimensionSelection).attr("transform",function(re){return d(re.x,0)}),Y(W).attr("transform",function(re){return d(0,re.y)}),W.select(".dimlabel").text(function(re,ae){return ae===0?re.parcatsViewModel.model.dimensions[re.model.dimensionInd].dimensionLabel:null}),W.select(".catlabel").attr("text-anchor",function(re){return o(re)?"start":"end"}).attr("x",function(re){return o(re)?re.width+5:-5}).each(function(re){var ae,ue;o(re)?(ae=re.width+5,ue="start"):(ae=-5,ue="end"),M.select(this).selectAll("tspan").attr("x",ae).attr("text-anchor",ue)});var Q=W.selectAll("rect.bandrect").data(function(re){return re.bands},n),ne=Q.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(re){return re.color}).attr("fill-opacity",0);Q.attr("fill",function(re){return re.color}).attr("width",function(re){return re.width}).attr("height",function(re){return re.height}).attr("y",function(re){return re.y}),m(ne),Q.each(function(){b.raiseToTop(this)}),Q.exit().remove()}function N(K,J,Y){var W,Q=Y[0],ne=J.margin||{l:80,r:80,t:100,b:80},re=Q.trace,ae=re.domain,ue=J.width,pe=J.height,ge=Math.floor(ue*(ae.x[1]-ae.x[0])),_e=Math.floor(pe*(ae.y[1]-ae.y[0])),me=ae.x[0]*ue+ne.l,ve=J.height-ae.y[1]*J.height+ne.t,Oe=re.line.shape;W=re.hoverinfo==="all"?["count","probability"]:(re.hoverinfo||"").split("+");var Me={trace:re,key:re.uid,model:Q,x:me,y:ve,width:ge,height:_e,hoveron:re.hoveron,hoverinfoItems:W,arrangement:re.arrangement,bundlecolors:re.bundlecolors,sortpaths:re.sortpaths,labelfont:re.labelfont,categorylabelfont:re.tickfont,pathShape:Oe,dragDimension:null,margin:ne,paths:[],dimensions:[],graphDiv:K,traceSelection:null,pathSelection:null,dimensionSelection:null};return Q.dimensions&&(q(Me),V(Me)),Me}function B(K,J,Y,W,Q){var ne,re,ae=[],ue=[];for(re=0;re<Y.length-1;re++)ne=k(Y[re]+K[re],K[re+1]),ae.push(ne(Q)),ue.push(ne(1-Q));var pe="M "+K[0]+","+J[0];for(pe+="l"+Y[0]+",0 ",re=1;re<Y.length;re++)pe+="C"+ae[re-1]+","+J[re-1]+" "+ue[re-1]+","+J[re]+" "+K[re]+","+J[re],pe+="l"+Y[re]+",0 ";for(pe+="l0,"+W+" ",pe+="l -"+Y[Y.length-1]+",0 ",re=Y.length-2;re>=0;re--)pe+="C"+ue[re]+","+(J[re+1]+W)+" "+ae[re]+","+(J[re]+W)+" "+(K[re]+Y[re])+","+(J[re]+W),pe+="l-"+Y[re]+",0 ";return pe+"Z"}function V(K){var J=K.dimensions,Y=K.model,W=J.map(function(Re){return Re.categories.map(function(ze){return ze.y})}),Q=K.model.dimensions.map(function(Re){return Re.categories.map(function(ze){return ze.displayInd})}),ne=K.model.dimensions.map(function(Re){return Re.displayInd}),re=K.dimensions.map(function(Re){return Re.model.dimensionInd}),ae=J.map(function(Re){return Re.x}),ue=J.map(function(Re){return Re.width}),pe=[];for(var ge in Y.paths)Y.paths.hasOwnProperty(ge)&&pe.push(Y.paths[ge]);function _e(Re){var ze=Re.categoryInds.map(function(He,Ge){return Q[Ge][He]});return re.map(function(He){return ze[He]})}pe.sort(function(Re,ze){var He=_e(Re),Ge=_e(ze);return K.sortpaths==="backward"&&(He.reverse(),Ge.reverse()),He.push(Re.valueInds[0]),Ge.push(ze.valueInds[0]),K.bundlecolors&&(He.unshift(Re.rawColor),Ge.unshift(ze.rawColor)),He<Ge?-1:He>Ge?1:0});for(var me=new Array(pe.length),ve=J[0].model.count,Oe=J[0].categories.map(function(Re){return Re.height}).reduce(function(Re,ze){return Re+ze}),Me=0;Me<pe.length;Me++){var Te,se=pe[Me];Te=ve>0?Oe*(se.count/ve):0;for(var oe,he=new Array(W.length),Ee=0;Ee<se.categoryInds.length;Ee++){var ke=se.categoryInds[Ee],be=Q[Ee][ke],Ie=ne[Ee];he[Ie]=W[Ie][be],W[Ie][be]+=Te;var Fe=K.dimensions[Ie].categories[be],ce=Fe.bands.length,we=Fe.bands[ce-1];if(we===void 0||se.rawColor!==we.rawColor){var ye=we===void 0?0:we.y+we.height;Fe.bands.push({key:ye,color:se.color,rawColor:se.rawColor,height:Te,width:Fe.width,count:se.count,y:ye,categoryViewModel:Fe,parcatsViewModel:K})}else{var Ce=Fe.bands[ce-1];Ce.height+=Te,Ce.count+=se.count}}oe=K.pathShape==="hspline"?B(ae,he,ue,Te,.5):B(ae,he,ue,Te,0),me[Me]={key:se.valueInds[0],model:se,height:Te,leftXs:ae,topYs:he,dimWidths:ue,svgD:oe,parcatsViewModel:K}}K.paths=me}function q(K){var J=K.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});J.sort(function(re,ae){return re.displayInd-ae.displayInd});var Y=[];for(var W in J){var Q=J[W].dimensionInd,ne=K.model.dimensions[Q];Y.push(te(K,ne))}K.dimensions=Y}function te(K,J){var Y,W=K.model.dimensions.length,Q=J.displayInd;Y=40+(W>1?(K.width-80-16)/(W-1):0)*Q;var ne,re,ae,ue,pe,ge=[],_e=K.model.maxCats,me=J.categories.length,ve=J.count,Oe=K.height-8*(_e-1),Me=8*(_e-me)/2,Te=J.categories.map(function(se){return{displayInd:se.displayInd,categoryInd:se.categoryInd}});for(Te.sort(function(se,oe){return se.displayInd-oe.displayInd}),pe=0;pe<me;pe++)ue=Te[pe].categoryInd,re=J.categories[ue],ne=ve>0?re.count/ve*Oe:0,ae={key:re.valueInds[0],model:re,width:16,height:ne,y:re.dragY!==null?re.dragY:Me,bands:[],parcatsViewModel:K},Me=Me+ne+8,ge.push(ae);return{key:J.dimensionInd,x:J.dragX!==null?J.dragX:Y,y:0,width:16,model:J,categories:ge,parcatsViewModel:K,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ee.exports=function(K,J,Y,W){r(Y,K,W,J)}},45784:function(ee,D,e){var M=e(45460);ee.exports=function(k,l,T,b){var d=k._fullLayout,s=d._paper,t=d._size;M(k,s,l,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,b)}},73362:function(ee,D,e){var M=e(50693),k=e(13838),l=e(41940),T=e(27670).Y,b=e(1426).extendFlat,d=e(44467).templatedArray;ee.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:l({editType:"plot"}),tickfont:l({editType:"plot"}),rangefont:l({editType:"plot"}),dimensions:d("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},k.tickvals,{editType:"plot"}),ticktext:b({},k.ticktext,{editType:"plot"}),tickformat:b({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(ee,D,e){var M=e(25706),k=e(39898),l=e(28984).keyFun,T=e(28984).repeat,b=e(71828).sorterAsc,d=e(71828).strTranslate,s=M.bar.snapRatio;function t(w,E){return w*(1-s)+E*s}var i=M.bar.snapClose;function r(w,E){return w*(1-i)+E*i}function n(w,E,L,C){if(function(te,K){for(var J=0;J<K.length;J++)if(te>=K[J][0]&&te<=K[J][1])return!0;return!1}(L,C))return L;var P=w?-1:1,z=0,G=E.length-1;if(P<0){var O=z;z=G,G=O}for(var H=E[z],N=H,B=z;P*B<P*G;B+=P){var V=B+P,q=E[V];if(P*L<P*r(H,q))return t(H,N);if(P*L<P*q||V===G)return t(q,H);N=H,H=q}}function o(w){w.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function a(w){w.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(w){if(!w.brush.filterSpecified)return"0,"+w.height;for(var E,L,C,P=p(w.brush.filter.getConsolidated(),w.height),z=[0],G=P.length?P[0][0]:null,O=0;O<P.length;O++)L=(E=P[O])[1]-E[0],z.push(G),z.push(L),(C=O+1)<P.length&&(G=P[C][0]-E[1]);return z.push(w.height),z}function p(w,E){return w.map(function(L){return L.map(function(C){return Math.max(0,C*E)}).sort(b)})}function c(){k.select(document.body).style("cursor",null)}function x(w){w.attr("stroke-dasharray",u)}function g(w,E){var L=k.select(w).selectAll(".highlight, .highlight-shadow");x(E?L.transition().duration(M.bar.snapDuration).each("end",E):L)}function h(w,E){var L,C=w.brush,P=NaN,z={};if(C.filterSpecified){var G=w.height,O=C.filter.getConsolidated(),H=p(O,G),N=NaN,B=NaN,V=NaN;for(L=0;L<=H.length;L++){var q=H[L];if(q&&q[0]<=E&&E<=q[1]){N=L;break}if(B=L?L-1:NaN,q&&q[0]>E){V=L;break}}if(P=N,isNaN(P)&&(P=isNaN(B)||isNaN(V)?isNaN(B)?V:B:E-H[B][1]<H[V][0]-E?B:V),!isNaN(P)){var te=H[P],K=function(Q,ne){var re=M.bar.handleHeight;if(!(ne>Q[1]+re||ne<Q[0]-re))return ne>=.9*Q[1]+.1*Q[0]?"n":ne<=.9*Q[0]+.1*Q[1]?"s":"ns"}(te,E);K&&(z.interval=O[P],z.intervalPix=te,z.region=K)}}if(w.ordinal&&!z.region){var J=w.unitTickvals,Y=w.unitToPaddedPx.invert(E);for(L=0;L<J.length;L++){var W=[.25*J[Math.max(L-1,0)]+.75*J[L],.25*J[Math.min(L+1,J.length-1)]+.75*J[L]];if(Y>=W[0]&&Y<=W[1]){z.clickableOrdinalRange=W;break}}}return z}function y(w,E){k.event.sourceEvent.stopPropagation();var L=E.height-k.mouse(w)[1]-2*M.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.grabbingBar?C.newExtent=[L-C.grabPoint,L+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):C.newExtent=[C.startExtent,E.unitToPaddedPx.invert(L)].sort(b),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),g(w.parentNode)}function v(w,E){var L=h(E,E.height-k.mouse(w)[1]-2*M.verticalPadding),C="crosshair";L.clickableOrdinalRange?C="pointer":L.region&&(C=L.region+"-resize"),k.select(document.body).style("cursor",C)}function m(w){w.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||v(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||c()}).call(k.behavior.drag().on("dragstart",function(E){(function(L,C){k.event.sourceEvent.stopPropagation();var P=C.height-k.mouse(L)[1]-2*M.verticalPadding,z=C.unitToPaddedPx.invert(P),G=C.brush,O=h(C,P),H=O.interval,N=G.svgBrush;if(N.wasDragged=!1,N.grabbingBar=O.region==="ns",N.grabbingBar){var B=H.map(C.unitToPaddedPx);N.grabPoint=P-B[0]-M.verticalPadding,N.barLength=B[1]-B[0]}N.clickableOrdinalRange=O.clickableOrdinalRange,N.stayingIntervals=C.multiselect&&G.filterSpecified?G.filter.getConsolidated():[],H&&(N.stayingIntervals=N.stayingIntervals.filter(function(V){return V[0]!==H[0]&&V[1]!==H[1]})),N.startExtent=O.region?H[O.region==="s"?1:0]:z,C.parent.inBrushDrag=!0,N.brushStartCallback()})(this,E)}).on("drag",function(E){y(this,E)}).on("dragend",function(E){(function(L,C){var P=C.brush,z=P.filter,G=P.svgBrush;G._dragging||(v(L,C),y(L,C),C.brush.svgBrush.wasDragged=!1),G._dragging=!1,k.event.sourceEvent.stopPropagation();var O=G.grabbingBar;if(G.grabbingBar=!1,G.grabLocation=void 0,C.parent.inBrushDrag=!1,c(),!G.wasDragged)return G.wasDragged=void 0,G.clickableOrdinalRange?P.filterSpecified&&C.multiselect?G.extent.push(G.clickableOrdinalRange):(G.extent=[G.clickableOrdinalRange],P.filterSpecified=!0):O?(G.extent=G.stayingIntervals,G.extent.length===0&&f(P)):f(P),G.brushCallback(C),g(L.parentNode),void G.brushEndCallback(P.filterSpecified?z.getConsolidated():[]);var H=function(){z.set(z.getConsolidated())};if(C.ordinal){var N=C.unitTickvals;N[N.length-1]<N[0]&&N.reverse(),G.newExtent=[n(0,N,G.newExtent[0],G.stayingIntervals),n(1,N,G.newExtent[1],G.stayingIntervals)];var B=G.newExtent[1]>G.newExtent[0];G.extent=G.stayingIntervals.concat(B?[G.newExtent]:[]),G.extent.length||f(P),G.brushCallback(C),B?g(L.parentNode,H):(H(),g(L.parentNode))}else H();G.brushEndCallback(P.filterSpecified?z.getConsolidated():[])})(this,E)}))}function _(w,E){return w[0]-E[0]}function f(w){w.filterSpecified=!1,w.svgBrush.extent=[[-1/0,1/0]]}function S(w){for(var E,L=w.slice(),C=[],P=L.shift();P;){for(E=P.slice();(P=L.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);C.push(E)}return C.length===1&&C[0][0]>C[0][1]&&(C=[]),C}ee.exports={makeBrush:function(w,E,L,C,P,z){var G,O=function(){var H,N,B=[];return{set:function(V){(B=V.map(function(q){return q.slice().sort(b)}).sort(_)).length===1&&B[0][0]===-1/0&&B[0][1]===1/0&&(B=[[0,-1]]),H=S(B),N=B.reduce(function(q,te){return[Math.min(q[0],te[0]),Math.max(q[1],te[1])]},[1/0,-1/0])},get:function(){return B.slice()},getConsolidated:function(){return H},getBounds:function(){return N}}}();return O.set(L),{filter:O,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(G=P,function(H){var N=H.brush,B=function(q){return q.svgBrush.extent.map(function(te){return te.slice()})}(N),V=B.slice();N.filter.set(V),G()}),brushEndCallback:z}}},ensureAxisBrush:function(w,E,L){var C=w.selectAll("."+M.cn.axisBrush).data(T,l);C.enter().append("g").classed(M.cn.axisBrush,!0),function(P,z,G){var O=G._context.staticPlot,H=P.selectAll(".background").data(T);H.enter().append("rect").classed("background",!0).call(o).call(a).style("pointer-events",O?"none":"auto").attr("transform",d(0,M.verticalPadding)),H.call(m).attr("height",function(V){return V.height-M.verticalPadding});var N=P.selectAll(".highlight-shadow").data(T);N.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",z).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),N.attr("y1",function(V){return V.height}).call(x);var B=P.selectAll(".highlight").data(T);B.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(V){return V.height}).call(x)}(C,E,L)},cleanRanges:function(w,E){if(Array.isArray(w[0])?(w=w.map(function(C){return C.sort(b)}),w=E.multiselect?S(w.sort(_)):[w[0]]):w=[w.sort(b)],E.tickvals){var L=E.tickvals.slice().sort(b);if(!(w=w.map(function(C){var P=[n(0,L,C[0],[]),n(1,L,C[1],[])];if(P[1]>P[0])return P}).filter(function(C){return C})).length)return}return w.length>1?w:w[0]}}},71791:function(ee,D,e){ee.exports={attributes:e(73362),supplyDefaults:e(3633),calc:e(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(ee,D,e){var M=e(39898),k=e(27659).a0,l=e(21341),T=e(77922);D.name="parcoords",D.plot=function(b){var d=k(b.calcdata,"parcoords")[0];d.length&&l(b,d)},D.clean=function(b,d,s,t){var i=t._has&&t._has("parcoords"),r=d._has&&d._has("parcoords");i&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},D.toSVG=function(b){var d=b._fullLayout._glimages,s=M.select(b).selectAll(".svg-container");s.filter(function(t,i){return i===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");d.append("svg:image").attr({xmlns:T.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(ee,D,e){var M=e(71828).isArrayOrTypedArray,k=e(21081),l=e(28984).wrap;ee.exports=function(T,b){var d,s;return k.hasColorscale(b,"line")&&M(b.line.color)?(d=b.line.color,s=k.extractOpts(b.line).colorscale,k.calc(T,b,{vals:d,containerStr:"line",cLetter:"c"})):(d=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=.5;return i}(b._length),s=[[0,b.line.color],[1,b.line.color]]),l({lineColor:d,cscale:s})}},25706:function(ee){ee.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(ee,D,e){var M=e(71828),k=e(52075).hasColorscale,l=e(1586),T=e(27670).c,b=e(85501),d=e(89298),s=e(73362),t=e(57920),i=e(25706).maxDimensionCount,r=e(94397);function n(o,a,u,p){function c(v,m){return M.coerce(o,a,s.dimensions,v,m)}var x=c("values"),g=c("visible");if(x&&x.length||(g=a.visible=!1),g){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var h=c("range");a._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:h},d.setConvert(a._ax,p.layout),c("multiselect");var y=c("constraintrange");y&&(a.constraintrange=t.cleanRanges(y,a))}}ee.exports=function(o,a,u,p){function c(v,m){return M.coerce(o,a,s,v,m)}var x=o.dimensions;Array.isArray(x)&&x.length>i&&(M.log("parcoords traces support up to "+i+" dimensions at the moment"),x.splice(i));var g=b(o,a,{name:"dimensions",layout:p,handleItemDefaults:n}),h=function(v,m,_,f,S){var w=S("line.color",_);if(k(v,"line")&&M.isArrayOrTypedArray(w)){if(w.length)return S("line.colorscale"),l(v,m,f,S,{prefix:"line.",cLetter:"c"}),w.length;m.line.color=_}return 1/0}(o,a,u,p,c);T(a,p,c),Array.isArray(g)&&g.length||(a.visible=!1),r(a,g,"values",h);var y={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};M.coerceFont(c,"labelfont",y),M.coerceFont(c,"tickfont",y),M.coerceFont(c,"rangefont",y),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},1602:function(ee,D,e){var M=e(71828).isTypedArray;D.convertTypedArray=function(k){return M(k)?Array.prototype.slice.call(k):k},D.isOrdinal=function(k){return!!k.tickvals},D.isVisible=function(k){return k.visible||!("visible"in k)}},67618:function(ee,D,e){var M=e(71791);M.plot=e(21341),ee.exports=M},83398:function(ee,D,e){var M=e(56068),k=M([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),l=M([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=e(25706).maxDimensionCount,b=e(71828),d=1e-6,s=new Uint8Array(4),t=new Uint8Array(4),i={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function r(h,y,v,m,_){var f=h._gl;f.enable(f.SCISSOR_TEST),f.scissor(y,v,m,_),h.clear({color:[0,0,0,0],depth:1})}function n(h,y,v,m,_,f){var S=f.key;v.drawCompleted||(function(w){w.read({x:0,y:0,width:1,height:1,data:s})}(h),v.drawCompleted=!0),function w(E){var L=Math.min(m,_-E*m);E===0&&(window.cancelAnimationFrame(v.currentRafs[S]),delete v.currentRafs[S],r(h,f.scissorX,f.scissorY,f.scissorWidth,f.viewBoxSize[1])),v.clearOnly||(f.count=2*L,f.offset=2*E*m,y(f),E*m+L<_&&(v.currentRafs[S]=window.requestAnimationFrame(function(){w(E+1)})),v.drawCompleted=!1)}(0)}function o(h,y){for(var v=new Array(256),m=0;m<256;m++)v[m]=h(m/255).concat(y);return v}function a(h,y){return(h>>>8*y)%256/255}function u(h,y,v){for(var m=new Array(8*y),_=0,f=0;f<y;f++)for(var S=0;S<2;S++)for(var w=0;w<4;w++){var E=4*h+w,L=v[64*f+E];E===63&&S===0&&(L*=-1),m[_++]=L}return m}function p(h){var y="0"+h;return y.substr(y.length-2)}function c(h){return h<T?"p"+p(h+1)+"_"+p(h+4):"colors"}function x(h,y,v,m,_,f,S,w,E,L,C,P,z,G){for(var O=[[],[]],H=0;H<64;H++)O[0][H]=H===_?1:0,O[1][H]=H===f?1:0;S*=G,w*=G,E*=G,L*=G;var N=h.lines.canvasOverdrag*G,B=h.domain,V=h.canvasWidth*G,q=h.canvasHeight*G,te=h.pad.l*G,K=h.pad.b*G,J=h.layoutHeight*G,Y=h.layoutWidth*G,W=h.deselectedLines.color,Q=h.deselectedLines.opacity;return b.extendFlat({key:C,resolution:[V,q],viewBoxPos:[S+N,w],viewBoxSize:[E,L],i0:_,i1:f,dim0A:O[0].slice(0,16),dim0B:O[0].slice(16,32),dim0C:O[0].slice(32,48),dim0D:O[0].slice(48,64),dim1A:O[1].slice(0,16),dim1B:O[1].slice(16,32),dim1C:O[1].slice(32,48),dim1D:O[1].slice(48,64),drwLayer:P,contextColor:[W[0]/255,W[1]/255,W[2]/255,Q!=="auto"?W[3]*Q:Math.max(.00392156862745098,Math.pow(1/h.lines.color.length,.3333333333333333))],scissorX:(m===y?0:S+N)+(te-N)+Y*B.x[0],scissorWidth:(m===v?V-S+N:E+.5)+(m===y?S+N:0),scissorY:w+K+J*B.y[0],scissorHeight:L,viewportX:te-N+Y*B.x[0],viewportY:K+J*B.y[0],viewportWidth:V,viewportHeight:q},z)}function g(h){var y=2047,v=Math.max(0,Math.floor(h[0]*y),0),m=Math.min(y,Math.ceil(h[1]*y),y);return[Math.min(v,m),Math.max(v,m)]}ee.exports=function(h,y){var v,m,_,f,S,w=y.context,E=y.pick,L=y.regl,C=L._gl,P=C.getParameter(C.ALIASED_LINE_WIDTH_RANGE),z=Math.max(P[0],Math.min(P[1],y.viewModel.plotGlPixelRatio)),G={currentRafs:{},drawCompleted:!0,clearOnly:!1},O=function(q){for(var te={},K=0;K<=T;K+=4)te[c(K)]=q.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return te}(L),H=L.texture(i),N=[];V(y);var B=L({profile:!1,blend:{enable:w,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!w,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:L.prop("scissorX"),y:L.prop("scissorY"),width:L.prop("scissorWidth"),height:L.prop("scissorHeight")}},viewport:{x:L.prop("viewportX"),y:L.prop("viewportY"),width:L.prop("viewportWidth"),height:L.prop("viewportHeight")},dither:!1,vert:k,frag:l,primitive:"lines",lineWidth:z,attributes:O,uniforms:{resolution:L.prop("resolution"),viewBoxPos:L.prop("viewBoxPos"),viewBoxSize:L.prop("viewBoxSize"),dim0A:L.prop("dim0A"),dim1A:L.prop("dim1A"),dim0B:L.prop("dim0B"),dim1B:L.prop("dim1B"),dim0C:L.prop("dim0C"),dim1C:L.prop("dim1C"),dim0D:L.prop("dim0D"),dim1D:L.prop("dim1D"),loA:L.prop("loA"),hiA:L.prop("hiA"),loB:L.prop("loB"),hiB:L.prop("hiB"),loC:L.prop("loC"),hiC:L.prop("hiC"),loD:L.prop("loD"),hiD:L.prop("hiD"),palette:H,contextColor:L.prop("contextColor"),maskTexture:L.prop("maskTexture"),drwLayer:L.prop("drwLayer"),maskHeight:L.prop("maskHeight")},offset:L.prop("offset"),count:L.prop("count")});function V(q){v=q.model,m=q.viewModel,_=m.dimensions.slice(),f=_[0]?_[0].values.length:0;var te=v.lines,K=E?te.color.map(function(Y,W){return W/te.color.length}):te.color,J=function(Y,W,Q){for(var ne,re=new Array(Y*(T+4)),ae=0,ue=0;ue<Y;ue++){for(var pe=0;pe<T;pe++)re[ae++]=pe<W.length?W[pe].paddedUnitValues[ue]:.5;re[ae++]=a(ue,2),re[ae++]=a(ue,1),re[ae++]=a(ue,0),re[ae++]=(ne=Q[ue],Math.max(d,Math.min(.999999,ne)))}return re}(f,_,K);(function(Y,W,Q){for(var ne=0;ne<=T;ne+=4)Y[c(ne)](u(ne/4,W,Q))})(O,f,J),w||E||(H=L.texture(b.extendFlat({data:o(v.unitToColor,255)},i)))}return{render:function(q,te,K){var J,Y,W,Q=q.length,ne=1/0,re=-1/0;for(J=0;J<Q;J++)q[J].dim0.canvasX<ne&&(ne=q[J].dim0.canvasX,Y=J),q[J].dim1.canvasX>re&&(re=q[J].dim1.canvasX,W=J);Q===0&&r(L,0,0,v.canvasWidth,v.canvasHeight);var ae=function(se){var oe,he,Ee,ke=[[],[]];for(Ee=0;Ee<64;Ee++){var be=!se&&Ee<_.length?_[Ee].brush.filter.getBounds():[-1/0,1/0];ke[0][Ee]=be[0],ke[1][Ee]=be[1]}var Ie=new Array(16384);for(oe=0;oe<16384;oe++)Ie[oe]=255;if(!se)for(oe=0;oe<_.length;oe++){var Fe=oe%8,ce=(oe-Fe)/8,we=Math.pow(2,Fe),ye=_[oe].brush.filter.get();if(!(ye.length<2)){var Ce=g(ye[0])[1];for(he=1;he<ye.length;he++){var Re=g(ye[he]);for(Ee=Ce+1;Ee<Re[0];Ee++)Ie[8*Ee+ce]&=~we;Ce=Math.max(Ce,Re[1])}}}var ze={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ie};return S?S(ze):S=L.texture(ze),{maskTexture:S,maskHeight:2048,loA:ke[0].slice(0,16),loB:ke[0].slice(16,32),loC:ke[0].slice(32,48),loD:ke[0].slice(48,64),hiA:ke[1].slice(0,16),hiB:ke[1].slice(16,32),hiC:ke[1].slice(32,48),hiD:ke[1].slice(48,64)}}(w);for(J=0;J<Q;J++){var ue=q[J],pe=ue.dim0.crossfilterDimensionIndex,ge=ue.dim1.crossfilterDimensionIndex,_e=ue.canvasX,me=ue.canvasY,ve=_e+ue.panelSizeX,Oe=ue.plotGlPixelRatio;if(te||!N[pe]||N[pe][0]!==_e||N[pe][1]!==ve){N[pe]=[_e,ve];var Me=x(v,Y,W,J,pe,ge,_e,me,ue.panelSizeX,ue.panelSizeY,ue.dim0.crossfilterDimensionIndex,w?0:E?2:1,ae,Oe);G.clearOnly=K;var Te=te?v.lines.blockLineCount:f;n(L,B,G,Te,f,Me)}}},readPixel:function(q,te){return L.read({x:q,y:te,width:1,height:1,data:t}),t},readPixels:function(q,te,K,J){var Y=new Uint8Array(4*K*J);return L.read({x:q,y:te,width:K,height:J,data:Y}),Y},destroy:function(){for(var q in h.style["pointer-events"]="none",H.destroy(),S&&S.destroy(),O)O[q].destroy()},update:V}}},94397:function(ee){ee.exports=function(D,e,M,k){var l,T;for(k||(k=1/0),l=0;l<e.length;l++)(T=e[l]).visible&&(k=Math.min(k,T[M].length));for(k===1/0&&(k=0),D._length=k,l=0;l<e.length;l++)(T=e[l]).visible&&(T._length=k);return k}},17171:function(ee,D,e){var M=e(39898),k=e(71828),l=k.numberFormat,T=e(36652),b=e(89298),d=k.strRotate,s=k.strTranslate,t=e(63893),i=e(91424),r=e(21081),n=e(28984),o=n.keyFun,a=n.repeat,u=n.unwrap,p=e(1602),c=e(25706),x=e(57920),g=e(83398);function h(H,N,B){return k.aggNums(H,null,N,B)}function y(H,N){return m(h(Math.min,H,N),h(Math.max,H,N))}function v(H){var N=H.range;return N?m(N[0],N[1]):y(H.values,H._length)}function m(H,N){return!isNaN(H)&&isFinite(H)||(H=0),!isNaN(N)&&isFinite(N)||(N=0),H===N&&(H===0?(H-=1,N+=1):(H*=.9,N*=1.1)),[H,N]}function _(H,N,B,V,q){var te,K,J=v(B);return V?M.scale.ordinal().domain(V.map((te=l(B.tickformat),K=q,K?function(Y,W){var Q=K[W];return Q??te(Y)}:te))).range(V.map(function(Y){var W=(Y-J[0])/(J[1]-J[0]);return H-N+W*(2*N-H)})):M.scale.linear().domain(J).range([H-N,N])}function f(H){if(H.tickvals){var N=v(H);return M.scale.ordinal().domain(H.tickvals).range(H.tickvals.map(function(B){return(B-N[0])/(N[1]-N[0])}))}}function S(H){var N=H.map(function(q){return q[0]}),B=H.map(function(q){var te=T(q[1]);return M.rgb("rgb("+te[0]+","+te[1]+","+te[2]+")")}),V="rgb".split("").map(function(q){return M.scale.linear().clamp(!0).domain(N).range(B.map((te=q,function(K){return K[te]})));var te});return function(q){return V.map(function(te){return te(q)})}}function w(H){return H.dimensions.some(function(N){return N.brush.filterSpecified})}function E(H,N,B){var V=u(N),q=V.trace,te=p.convertTypedArray(V.lineColor),K=q.line,J={color:T(q.unselected.line.color),opacity:q.unselected.line.opacity},Y=r.extractOpts(K),W=Y.reversescale?r.flipScale(V.cscale):V.cscale,Q=q.domain,ne=q.dimensions,re=H.width,ae=q.labelangle,ue=q.labelside,pe=q.labelfont,ge=q.tickfont,_e=q.rangefont,me=k.extendDeepNoArrays({},K,{color:te.map(M.scale.linear().domain(v({values:te,range:[Y.min,Y.max],_length:q._length}))),blockLineCount:c.blockLineCount,canvasOverdrag:c.overdrag*c.canvasPixelRatio}),ve=Math.floor(re*(Q.x[1]-Q.x[0])),Oe=Math.floor(H.height*(Q.y[1]-Q.y[0])),Me=H.margin||{l:80,r:80,t:100,b:80},Te=ve,se=Oe;return{key:B,colCount:ne.filter(p.isVisible).length,dimensions:ne,tickDistance:c.tickDistance,unitToColor:S(W),lines:me,deselectedLines:J,labelAngle:ae,labelSide:ue,labelFont:pe,tickFont:ge,rangeFont:_e,layoutWidth:re,layoutHeight:H.height,domain:Q,translateX:Q.x[0]*re,translateY:H.height-Q.y[1]*H.height,pad:Me,canvasWidth:Te*c.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:se*c.canvasPixelRatio,width:Te,height:se,canvasPixelRatio:c.canvasPixelRatio}}function L(H,N,B){var V=B.width,q=B.height,te=B.dimensions,K=B.canvasPixelRatio,J=function(re){return V*re/Math.max(1,B.colCount-1)},Y=c.verticalPadding/q,W=function(re,ae){return M.scale.linear().range([ae,re-ae])}(q,c.verticalPadding),Q={key:B.key,xScale:J,model:B,inBrushDrag:!1},ne={};return Q.dimensions=te.filter(p.isVisible).map(function(re,ae){var ue=function(be,Ie){return M.scale.linear().domain(v(be)).range([Ie,1-Ie])}(re,Y),pe=ne[re.label];ne[re.label]=(pe||0)+1;var ge=re.label+(pe?"__"+pe:""),_e=re.constraintrange,me=_e&&_e.length;me&&!Array.isArray(_e[0])&&(_e=[_e]);var ve=me?_e.map(function(be){return be.map(ue)}):[[-1/0,1/0]],Oe=re.values;Oe.length>re._length&&(Oe=Oe.slice(0,re._length));var Me,Te=re.tickvals;function se(be,Ie){return{val:be,text:Me[Ie]}}function oe(be,Ie){return be.val-Ie.val}if(Array.isArray(Te)&&Te.length){Me=re.ticktext,Array.isArray(Me)&&Me.length?Me.length>Te.length?Me=Me.slice(0,Te.length):Te.length>Me.length&&(Te=Te.slice(0,Me.length)):Me=Te.map(l(re.tickformat));for(var he=1;he<Te.length;he++)if(Te[he]<Te[he-1]){for(var Ee=Te.map(se).sort(oe),ke=0;ke<Te.length;ke++)Te[ke]=Ee[ke].val,Me[ke]=Ee[ke].text;break}}else Te=void 0;return Oe=p.convertTypedArray(Oe),{key:ge,label:re.label,tickFormat:re.tickformat,tickvals:Te,ticktext:Me,ordinal:p.isOrdinal(re),multiselect:re.multiselect,xIndex:ae,crossfilterDimensionIndex:ae,visibleIndex:re._index,height:q,values:Oe,paddedUnitValues:Oe.map(ue),unitTickvals:Te&&Te.map(ue),xScale:J,x:J(ae),canvasX:J(ae)*K,unitToPaddedPx:W,domainScale:_(q,c.verticalPadding,re,Te,Me),ordinalScale:f(re),parent:Q,model:B,brush:x.makeBrush(H,me,ve,function(){H.linePickActive(!1)},function(){var be=Q;be.focusLayer&&be.focusLayer.render(be.panels,!0);var Ie=w(be);!H.contextShown()&&Ie?(be.contextLayer&&be.contextLayer.render(be.panels,!0),H.contextShown(!0)):H.contextShown()&&!Ie&&(be.contextLayer&&be.contextLayer.render(be.panels,!0,!0),H.contextShown(!1))},function(be){if(Q.focusLayer.render(Q.panels,!0),Q.pickLayer&&Q.pickLayer.render(Q.panels,!0),H.linePickActive(!0),N&&N.filterChanged){var Ie=ue.invert,Fe=be.map(function(ce){return ce.map(Ie).sort(k.sorterAsc)}).sort(function(ce,we){return ce[0]-we[0]});N.filterChanged(Q.key,re._index,Fe)}})}}),Q}function C(H){H.classed(c.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function P(H,N){var B=N==="top"?1:-1,V=H*Math.PI/180;return{dir:B,dx:Math.sin(V),dy:Math.cos(V),degrees:H}}function z(H,N,B){for(var V=N.panels||(N.panels=[]),q=H.data(),te=0;te<q.length-1;te++){var K=V[te]||(V[te]={}),J=q[te],Y=q[te+1];K.dim0=J,K.dim1=Y,K.canvasX=J.canvasX,K.panelSizeX=Y.canvasX-J.canvasX,K.panelSizeY=N.model.canvasHeight,K.y=0,K.canvasY=0,K.plotGlPixelRatio=B}}function G(H,N){return b.tickText(H._ax,N,!1).text}function O(H,N){if(H.ordinal)return"";var B=H.domainScale.domain(),V=B[N?B.length-1:0];return G(H.model.dimensions[H.visibleIndex],V)}ee.exports=function(H,N,B,V){var q=H._context.staticPlot,te=H._fullLayout,K=te._toppaper,J=te._glcontainer,Y=H._context.plotGlPixelRatio,W=H._fullLayout.paper_bgcolor;(function(be){for(var Ie=0;Ie<be.length;Ie++)for(var Fe=0;Fe<be[Ie].length;Fe++)for(var ce=be[Ie][Fe].trace,we=ce.dimensions,ye=0;ye<we.length;ye++){var Ce=we[ye].values,Re=we[ye]._ax;Re&&(Re.range?Re.range=m(Re.range[0],Re.range[1]):Re.range=y(Ce,ce._length),Re.dtick||(Re.dtick=.01*(Math.abs(Re.range[1]-Re.range[0])||1)),Re.tickformat=we[ye].tickformat,b.calcTicks(Re),Re.cleanRange())}})(N);var Q,ne,re=(Q=!0,ne=!1,{linePickActive:function(be){return arguments.length?Q=!!be:Q},contextShown:function(be){return arguments.length?ne=!!be:ne}}),ae=N.filter(function(be){return u(be).trace.visible}).map(E.bind(0,B)).map(L.bind(0,re,V));J.each(function(be,Ie){return k.extendFlat(be,ae[Ie])});var ue=J.selectAll(".gl-canvas").each(function(be){be.viewModel=ae[0],be.viewModel.plotGlPixelRatio=Y,be.viewModel.paperColor=W,be.model=be.viewModel?be.viewModel.model:null}),pe=null;ue.filter(function(be){return be.pick}).style("pointer-events",q?"none":"auto").on("mousemove",function(be){if(re.linePickActive()&&be.lineLayer&&V&&V.hover){var Ie=M.event,Fe=this.width,ce=this.height,we=M.mouse(this),ye=we[0],Ce=we[1];if(ye<0||Ce<0||ye>=Fe||Ce>=ce)return;var Re=be.lineLayer.readPixel(ye,ce-1-Ce),ze=Re[3]!==0,He=ze?Re[2]+256*(Re[1]+256*Re[0]):null,Ge={x:ye,y:Ce,clientX:Ie.clientX,clientY:Ie.clientY,dataIndex:be.model.key,curveNumber:He};He!==pe&&(ze?V.hover(Ge):V.unhover&&V.unhover(Ge),pe=He)}}),ue.style("opacity",function(be){return be.pick?0:1}),K.style("background","rgba(255, 255, 255, 0)");var ge=K.selectAll("."+c.cn.parcoords).data(ae,o);ge.exit().remove(),ge.enter().append("g").classed(c.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ge.attr("transform",function(be){return s(be.model.translateX,be.model.translateY)});var _e=ge.selectAll("."+c.cn.parcoordsControlView).data(a,o);_e.enter().append("g").classed(c.cn.parcoordsControlView,!0),_e.attr("transform",function(be){return s(be.model.pad.l,be.model.pad.t)});var me=_e.selectAll("."+c.cn.yAxis).data(function(be){return be.dimensions},o);me.enter().append("g").classed(c.cn.yAxis,!0),_e.each(function(be){z(me,be,Y)}),ue.each(function(be){if(be.viewModel){!be.lineLayer||V?be.lineLayer=g(this,be):be.lineLayer.update(be),(be.key||be.key===0)&&(be.viewModel[be.key]=be.lineLayer);var Ie=!be.context||V;be.lineLayer.render(be.viewModel.panels,Ie)}}),me.attr("transform",function(be){return s(be.xScale(be.xIndex),0)}),me.call(M.behavior.drag().origin(function(be){return be}).on("drag",function(be){var Ie=be.parent;re.linePickActive(!1),be.x=Math.max(-c.overdrag,Math.min(be.model.width+c.overdrag,M.event.x)),be.canvasX=be.x*be.model.canvasPixelRatio,me.sort(function(Fe,ce){return Fe.x-ce.x}).each(function(Fe,ce){Fe.xIndex=ce,Fe.x=be===Fe?Fe.x:Fe.xScale(Fe.xIndex),Fe.canvasX=Fe.x*Fe.model.canvasPixelRatio}),z(me,Ie,Y),me.filter(function(Fe){return Math.abs(be.xIndex-Fe.xIndex)!==0}).attr("transform",function(Fe){return s(Fe.xScale(Fe.xIndex),0)}),M.select(this).attr("transform",s(be.x,0)),me.each(function(Fe,ce,we){we===be.parent.key&&(Ie.dimensions[ce]=Fe)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!w(Ie)),Ie.focusLayer.render&&Ie.focusLayer.render(Ie.panels)}).on("dragend",function(be){var Ie=be.parent;be.x=be.xScale(be.xIndex),be.canvasX=be.x*be.model.canvasPixelRatio,z(me,Ie,Y),M.select(this).attr("transform",function(Fe){return s(Fe.x,0)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!w(Ie)),Ie.focusLayer&&Ie.focusLayer.render(Ie.panels),Ie.pickLayer&&Ie.pickLayer.render(Ie.panels,!0),re.linePickActive(!0),V&&V.axesMoved&&V.axesMoved(Ie.key,Ie.dimensions.map(function(Fe){return Fe.crossfilterDimensionIndex}))})),me.exit().remove();var ve=me.selectAll("."+c.cn.axisOverlays).data(a,o);ve.enter().append("g").classed(c.cn.axisOverlays,!0),ve.selectAll("."+c.cn.axis).remove();var Oe=ve.selectAll("."+c.cn.axis).data(a,o);Oe.enter().append("g").classed(c.cn.axis,!0),Oe.each(function(be){var Ie=be.model.height/be.model.tickDistance,Fe=be.domainScale,ce=Fe.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ie,be.tickFormat).tickValues(be.ordinal?ce:null).tickFormat(function(we){return p.isOrdinal(be)?we:G(be.model.dimensions[be.visibleIndex],we)}).scale(Fe)),i.font(Oe.selectAll("text"),be.model.tickFont)}),Oe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Oe.selectAll("text").style("text-shadow",t.makeTextShadow(W)).style("cursor","default");var Me=ve.selectAll("."+c.cn.axisHeading).data(a,o);Me.enter().append("g").classed(c.cn.axisHeading,!0);var Te=Me.selectAll("."+c.cn.axisTitle).data(a,o);Te.enter().append("text").classed(c.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",q?"none":"auto"),Te.text(function(be){return be.label}).each(function(be){var Ie=M.select(this);i.font(Ie,be.model.labelFont),t.convertToTspans(Ie,H)}).attr("transform",function(be){var Ie=P(be.model.labelAngle,be.model.labelSide),Fe=c.axisTitleOffset;return(Ie.dir>0?"":s(0,2*Fe+be.model.height))+d(Ie.degrees)+s(-Fe*Ie.dx,-Fe*Ie.dy)}).attr("text-anchor",function(be){var Ie=P(be.model.labelAngle,be.model.labelSide);return 2*Math.abs(Ie.dx)>Math.abs(Ie.dy)?Ie.dir*Ie.dx<0?"start":"end":"middle"});var se=ve.selectAll("."+c.cn.axisExtent).data(a,o);se.enter().append("g").classed(c.cn.axisExtent,!0);var oe=se.selectAll("."+c.cn.axisExtentTop).data(a,o);oe.enter().append("g").classed(c.cn.axisExtentTop,!0),oe.attr("transform",s(0,-c.axisExtentOffset));var he=oe.selectAll("."+c.cn.axisExtentTopText).data(a,o);he.enter().append("text").classed(c.cn.axisExtentTopText,!0).call(C),he.text(function(be){return O(be,!0)}).each(function(be){i.font(M.select(this),be.model.rangeFont)});var Ee=se.selectAll("."+c.cn.axisExtentBottom).data(a,o);Ee.enter().append("g").classed(c.cn.axisExtentBottom,!0),Ee.attr("transform",function(be){return s(0,be.model.height+c.axisExtentOffset)});var ke=Ee.selectAll("."+c.cn.axisExtentBottomText).data(a,o);ke.enter().append("text").classed(c.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(C),ke.text(function(be){return O(be,!1)}).each(function(be){i.font(M.select(this),be.model.rangeFont)}),x.ensureAxisBrush(ve,W,H)}},21341:function(ee,D,e){var M=e(17171),k=e(79749),l=e(1602).isVisible,T={};function b(d,s,t){var i=s.indexOf(t),r=d.indexOf(i);return r===-1&&(r+=s.length),r}(ee.exports=function(d,s){var t=d._fullLayout;if(k(d,[],T)){var i={},r={},n={},o={},a=t._size;s.forEach(function(u,p){var c=u[0].trace;n[p]=c.index;var x=o[p]=c._fullInput.index;i[p]=d.data[x].dimensions,r[p]=d.data[x].dimensions.slice()}),M(d,s,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},{filterChanged:function(u,p,c){var x=r[u][p],g=c.map(function(f){return f.slice()}),h="dimensions["+p+"].constraintrange",y=t._tracePreGUI[d._fullData[n[u]]._fullInput.uid];if(y[h]===void 0){var v=x.constraintrange;y[h]=v||null}var m=d._fullData[n[u]].dimensions[p];g.length?(g.length===1&&(g=g[0]),x.constraintrange=g,m.constraintrange=g.slice(),g=[g]):(delete x.constraintrange,delete m.constraintrange,g=null);var _={};_[h]=g,d.emit("plotly_restyle",[_,[o[u]]])},hover:function(u){d.emit("plotly_hover",u)},unhover:function(u){d.emit("plotly_unhover",u)},axesMoved:function(u,p){var c=function(x,g){return function(h,y){return b(x,g,h)-b(x,g,y)}}(p,r[u].filter(l));i[u].sort(c),r[u].filter(function(x){return!l(x)}).sort(function(x){return r[u].indexOf(x)}).forEach(function(x){i[u].splice(i[u].indexOf(x),1),i[u].splice(r[u].indexOf(x),0,x)}),d.emit("plotly_restyle",[{dimensions:[i[u]]},[o[u]]])}})}}).reglPrecompiled=T},34e3:function(ee,D,e){var M=e(9012),k=e(27670).Y,l=e(41940),T=e(22399),b=e(5386).fF,d=e(5386).si,s=e(1426).extendFlat,t=e(79952).u,i=l({editType:"plot",arrayOk:!0,colorEditType:"plot"});ee.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:d({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},i,{}),outsidetextfont:s({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(ee,D,e){var M=e(74875);D.name="pie",D.plot=function(k,l,T,b){M.plotBasePlot(D.name,k,l,T,b)},D.clean=function(k,l,T,b){M.cleanBasePlot(D.name,k,l,T,b)}},32354:function(ee,D,e){var M=e(92770),k=e(84267),l=e(7901),T={};function b(s){return function(t,i){return!!t&&!!(t=k(t)).isValid()&&(t=l.addOpacity(t,t.getAlpha()),s[i]||(s[i]=t),t)}}function d(s,t){var i,r=JSON.stringify(s),n=t[r];if(!n){for(n=s.slice(),i=0;i<s.length;i++)n.push(k(s[i]).lighten(20).toHexString());for(i=0;i<s.length;i++)n.push(k(s[i]).darken(20).toHexString());t[r]=n}return n}ee.exports={calc:function(s,t){var i,r,n=[],o=s._fullLayout,a=o.hiddenlabels||[],u=t.labels,p=t.marker.colors||[],c=t.values,x=t._length,g=t._hasValues&&x;if(t.dlabel)for(u=new Array(x),i=0;i<x;i++)u[i]=String(t.label0+i*t.dlabel);var h={},y=b(o["_"+t.type+"colormap"]),v=0,m=!1;for(i=0;i<x;i++){var _,f,S;if(g){if(_=c[i],!M(_))continue;_=+_}else _=1;(f=u[i])!==void 0&&f!==""||(f=i);var w=h[f=String(f)];w===void 0?(h[f]=n.length,(S=a.indexOf(f)!==-1)||(v+=_),n.push({v:_,label:f,color:y(p[i],f),i,pts:[i],hidden:S})):(m=!0,(r=n[w]).v+=_,r.pts.push(i),r.hidden||(v+=_),r.color===!1&&p[i]&&(r.color=y(p[i],f)))}return n=n.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?m:t.sort)&&n.sort(function(E,L){return L.v-E.v}),n[0]&&(n[0].vTotal=v),n},crossTraceCalc:function(s,t){var i=(t||{}).type;i||(i="pie");var r=s._fullLayout,n=s.calcdata,o=r[i+"colorway"],a=r["_"+i+"colormap"];r["extend"+i+"colors"]&&(o=d(o,T));for(var u=0,p=0;p<n.length;p++){var c=n[p];if(c[0].trace.type===i)for(var x=0;x<c.length;x++){var g=c[x];g.color===!1&&(a[g.label]?g.color=a[g.label]:(a[g.label]=g.color=o[u%o.length],u++))}}},makePullColorFn:b,generateExtendedColors:d}},37434:function(ee,D,e){var M=e(92770),k=e(71828),l=e(34e3),T=e(27670).c,b=e(90769).handleText,d=e(71828).coercePattern;function s(i,r){var n=Array.isArray(i),o=k.isArrayOrTypedArray(r),a=Math.min(n?i.length:1/0,o?r.length:1/0);if(isFinite(a)||(a=0),a&&o){for(var u,p=0;p<a;p++){var c=r[p];if(M(c)&&c>0){u=!0;break}}u||(a=0)}return{hasLabels:n,hasValues:o,len:a}}function t(i,r,n,o,a){o("marker.line.width")&&o("marker.line.color",a?void 0:n.paper_bgcolor);var u=o("marker.colors");d(o,"marker.pattern",u),i.marker&&!r.marker.pattern.fgcolor&&(r.marker.pattern.fgcolor=i.marker.colors),r.marker.pattern.bgcolor||(r.marker.pattern.bgcolor=n.paper_bgcolor)}ee.exports={handleLabelsAndValues:s,handleMarkerDefaults:t,supplyDefaults:function(i,r,n,o){function a(m,_){return k.coerce(i,r,l,m,_)}var u=s(a("labels"),a("values")),p=u.len;if(r._hasLabels=u.hasLabels,r._hasValues=u.hasValues,!r._hasLabels&&r._hasValues&&(a("label0"),a("dlabel")),p){r._length=p,t(i,r,o,a,!0),a("scalegroup");var c,x=a("text"),g=a("texttemplate");if(g||(c=a("textinfo",Array.isArray(x)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),g||c&&c!=="none"){var h=a("textposition");b(i,r,o,a,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(h)||h==="auto"||h==="outside")&&a("automargin"),(h==="inside"||h==="auto"||Array.isArray(h))&&a("insidetextorientation")}T(r,o,a);var y=a("hole");if(a("title.text")){var v=a("title.position",y?"middle center":"top center");y||v!=="middle center"||(r.title.position="top center"),k.coerceFont(a,"title.font",o.font)}a("sort"),a("direction"),a("rotation"),a("pull")}else r.visible=!1}}},20007:function(ee,D,e){var M=e(23469).appendArrayMultiPointValues;ee.exports=function(k,l){var T={curveNumber:l.index,pointNumbers:k.pts,data:l._input,fullData:l,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(T.pointNumber=T.i=k.pts[0]),M(T,l,k.pts),l.type==="funnelarea"&&(delete T.v,delete T.i),T}},22209:function(ee,D,e){var M=e(91424),k=e(7901);ee.exports=function(l,T,b,d){var s=b.marker.pattern;s&&s.shape?M.pointStyle(l,b,d,T):k.fill(l,T.color)}},53581:function(ee,D,e){var M=e(71828);function k(l){return l.indexOf("e")!==-1?l.replace(/[.]?0+e/,"e"):l.indexOf(".")!==-1?l.replace(/[.]?0+$/,""):l}D.formatPiePercent=function(l,T){var b=k((100*l).toPrecision(3));return M.numSeparate(b,T)+"%"},D.formatPieValue=function(l,T){var b=k(l.toPrecision(10));return M.numSeparate(b,T)},D.getFirstFilled=function(l,T){if(Array.isArray(l))for(var b=0;b<T.length;b++){var d=l[T[b]];if(d||d===0||d==="")return d}},D.castOption=function(l,T){return Array.isArray(l)?D.getFirstFilled(l,T):l||void 0},D.getRotationAngle=function(l){return(l==="auto"?0:l)*Math.PI/180}},58810:function(ee,D,e){ee.exports={attributes:e(34e3),supplyDefaults:e(37434).supplyDefaults,supplyLayoutDefaults:e(92097),layoutAttributes:e(92774),calc:e(32354).calc,crossTraceCalc:e(32354).crossTraceCalc,plot:e(14575).plot,style:e(68357),styleOne:e(63463),moduleType:"trace",name:"pie",basePlotModule:e(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(ee){ee.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(ee,D,e){var M=e(71828),k=e(92774);ee.exports=function(l,T){function b(d,s){return M.coerce(l,T,k,d,s)}b("hiddenlabels"),b("piecolorway",T.colorway),b("extendpiecolors")}},14575:function(ee,D,e){var M=e(39898),k=e(74875),l=e(30211),T=e(7901),b=e(91424),d=e(71828),s=d.strScale,t=d.strTranslate,i=e(63893),r=e(72597),n=r.recordMinTextSize,o=r.clearMinTextSize,a=e(97313).TEXTPAD,u=e(53581),p=e(20007),c=e(71828).isValidTextValue;function x(N,B,V){var q=V[0],te=q.cx,K=q.cy,J=q.trace,Y=J.type==="funnelarea";"_hasHoverLabel"in J||(J._hasHoverLabel=!1),"_hasHoverEvent"in J||(J._hasHoverEvent=!1),N.on("mouseover",function(W){var Q=B._fullLayout,ne=B._fullData[J.index];if(!B._dragging&&Q.hovermode!==!1){var re=ne.hoverinfo;if(Array.isArray(re)&&(re=l.castHoverinfo({hoverinfo:[u.castOption(re,W.pts)],_module:J._module},Q,0)),re==="all"&&(re="label+text+value+percent+name"),ne.hovertemplate||re!=="none"&&re!=="skip"&&re){var ae=W.rInscribed||0,ue=te+W.pxmid[0]*(1-ae),pe=K+W.pxmid[1]*(1-ae),ge=Q.separators,_e=[];if(re&&re.indexOf("label")!==-1&&_e.push(W.label),W.text=u.castOption(ne.hovertext||ne.text,W.pts),re&&re.indexOf("text")!==-1){var me=W.text;d.isValidTextValue(me)&&_e.push(me)}W.value=W.v,W.valueLabel=u.formatPieValue(W.v,ge),re&&re.indexOf("value")!==-1&&_e.push(W.valueLabel),W.percent=W.v/q.vTotal,W.percentLabel=u.formatPiePercent(W.percent,ge),re&&re.indexOf("percent")!==-1&&_e.push(W.percentLabel);var ve=ne.hoverlabel,Oe=ve.font,Me=[];l.loneHover({trace:J,x0:ue-ae*q.r,x1:ue+ae*q.r,y:pe,_x0:Y?te+W.TL[0]:ue-ae*q.r,_x1:Y?te+W.TR[0]:ue+ae*q.r,_y0:Y?K+W.TL[1]:pe-ae*q.r,_y1:Y?K+W.BL[1]:pe+ae*q.r,text:_e.join("<br>"),name:ne.hovertemplate||re.indexOf("name")!==-1?ne.name:void 0,idealAlign:W.pxmid[0]<0?"left":"right",color:u.castOption(ve.bgcolor,W.pts)||W.color,borderColor:u.castOption(ve.bordercolor,W.pts),fontFamily:u.castOption(Oe.family,W.pts),fontSize:u.castOption(Oe.size,W.pts),fontColor:u.castOption(Oe.color,W.pts),nameLength:u.castOption(ve.namelength,W.pts),textAlign:u.castOption(ve.align,W.pts),hovertemplate:u.castOption(ne.hovertemplate,W.pts),hovertemplateLabels:W,eventData:[p(W,ne)]},{container:Q._hoverlayer.node(),outerContainer:Q._paper.node(),gd:B,inOut_bbox:Me}),W.bbox=Me[0],J._hasHoverLabel=!0}J._hasHoverEvent=!0,B.emit("plotly_hover",{points:[p(W,ne)],event:M.event})}}),N.on("mouseout",function(W){var Q=B._fullLayout,ne=B._fullData[J.index],re=M.select(this).datum();J._hasHoverEvent&&(W.originalEvent=M.event,B.emit("plotly_unhover",{points:[p(re,ne)],event:M.event}),J._hasHoverEvent=!1),J._hasHoverLabel&&(l.loneUnhover(Q._hoverlayer.node()),J._hasHoverLabel=!1)}),N.on("click",function(W){var Q=B._fullLayout,ne=B._fullData[J.index];B._dragging||Q.hovermode===!1||(B._hoverdata=[p(W,ne)],l.click(B,M.event))})}function g(N,B,V){var q=u.castOption(N.insidetextfont.color,B.pts);!q&&N._input.textfont&&(q=u.castOption(N._input.textfont.color,B.pts));var te=u.castOption(N.insidetextfont.family,B.pts)||u.castOption(N.textfont.family,B.pts)||V.family,K=u.castOption(N.insidetextfont.size,B.pts)||u.castOption(N.textfont.size,B.pts)||V.size;return{color:q||T.contrast(B.color),family:te,size:K}}function h(N,B){for(var V,q,te=0;te<N.length;te++)if((q=(V=N[te][0]).trace).title.text){var K=q.title.text;q._meta&&(K=d.templateString(K,q._meta));var J=b.tester.append("text").attr("data-notex",1).text(K).call(b.font,q.title.font).call(i.convertToTspans,B),Y=b.bBox(J.node(),!0);V.titleBox={width:Y.width,height:Y.height},J.remove()}}function y(N,B,V){var q=V.r||B.rpx1,te=B.rInscribed;if(B.startangle===B.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var K,J=B.ring,Y=J===1&&Math.abs(B.startangle-B.stopangle)===2*Math.PI,W=B.halfangle,Q=B.midangle,ne=V.trace.insidetextorientation,re=ne==="horizontal",ae=ne==="tangential",ue=ne==="radial",pe=ne==="auto",ge=[];if(!pe){var _e,me=function(oe,he){if(function(Ie,Fe){var ce=Ie.startangle,we=Ie.stopangle;return ce>Fe&&Fe>we||ce<Fe&&Fe<we}(B,oe)){var Ee=Math.abs(oe-B.startangle),ke=Math.abs(oe-B.stopangle),be=Ee<ke?Ee:ke;(K=he==="tan"?m(N,q,J,be,0):v(N,q,J,be,Math.PI/2)).textPosAngle=oe,ge.push(K)}};if(re||ae){for(_e=4;_e>=-4;_e-=2)me(Math.PI*_e,"tan");for(_e=4;_e>=-4;_e-=2)me(Math.PI*(_e+1),"tan")}if(re||ue){for(_e=4;_e>=-4;_e-=2)me(Math.PI*(_e+1.5),"rad");for(_e=4;_e>=-4;_e-=2)me(Math.PI*(_e+.5),"rad")}}if(Y||pe||re){var ve=Math.sqrt(N.width*N.width+N.height*N.height);if((K={scale:te*q*2/ve,rCenter:1-te,rotate:0}).textPosAngle=(B.startangle+B.stopangle)/2,K.scale>=1)return K;ge.push(K)}(pe||ue)&&((K=v(N,q,J,W,Q)).textPosAngle=(B.startangle+B.stopangle)/2,ge.push(K)),(pe||ae)&&((K=m(N,q,J,W,Q)).textPosAngle=(B.startangle+B.stopangle)/2,ge.push(K));for(var Oe=0,Me=0,Te=0;Te<ge.length;Te++){var se=ge[Te].scale;if(Me<se&&(Me=se,Oe=Te),!pe&&Me>=1)break}return ge[Oe]}function v(N,B,V,q,te){B=Math.max(0,B-2*a);var K=N.width/N.height,J=S(K,q,B,V);return{scale:2*J/N.height,rCenter:_(K,J/B),rotate:f(te)}}function m(N,B,V,q,te){B=Math.max(0,B-2*a);var K=N.height/N.width,J=S(K,q,B,V);return{scale:2*J/N.width,rCenter:_(K,J/B),rotate:f(te+Math.PI/2)}}function _(N,B){return Math.cos(B)-N*B}function f(N){return(180/Math.PI*N+720)%180-90}function S(N,B,V,q){var te=N+1/(2*Math.tan(B));return V*Math.min(1/(Math.sqrt(te*te+.5)+te),q/(Math.sqrt(N*N+q/2)+N))}function w(N,B){return N.v!==B.vTotal||B.trace.hole?Math.min(1/(1+1/Math.sin(N.halfangle)),N.ring/2):1}function E(N,B){var V=B.pxmid[0],q=B.pxmid[1],te=N.width/2,K=N.height/2;return V<0&&(te*=-1),q<0&&(K*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(K)*(te>0?1:-1)/2,y:K/(1+V*V/(q*q)),outside:!0}}function L(N,B){var V,q,te,K=N.trace,J={x:N.cx,y:N.cy},Y={tx:0,ty:0};Y.ty+=K.title.font.size,te=P(K),K.title.position.indexOf("top")!==-1?(J.y-=(1+te)*N.r,Y.ty-=N.titleBox.height):K.title.position.indexOf("bottom")!==-1&&(J.y+=(1+te)*N.r);var W,Q=N.r/((W=N.trace.aspectratio)===void 0?1:W),ne=B.w*(K.domain.x[1]-K.domain.x[0])/2;return K.title.position.indexOf("left")!==-1?(ne+=Q,J.x-=(1+te)*Q,Y.tx+=N.titleBox.width/2):K.title.position.indexOf("center")!==-1?ne*=2:K.title.position.indexOf("right")!==-1&&(ne+=Q,J.x+=(1+te)*Q,Y.tx-=N.titleBox.width/2),V=ne/N.titleBox.width,q=C(N,B)/N.titleBox.height,{x:J.x,y:J.y,scale:Math.min(V,q),tx:Y.tx,ty:Y.ty}}function C(N,B){var V=N.trace,q=B.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(N.titleBox.height,q/2)}function P(N){var B,V=N.pull;if(!V)return 0;if(Array.isArray(V))for(V=0,B=0;B<N.pull.length;B++)N.pull[B]>V&&(V=N.pull[B]);return V}function z(N,B){for(var V=[],q=0;q<N.length;q++){var te=N[q][0],K=te.trace,J=K.domain,Y=B.w*(J.x[1]-J.x[0]),W=B.h*(J.y[1]-J.y[0]);K.title.text&&K.title.position!=="middle center"&&(W-=C(te,B));var Q=Y/2,ne=W/2;K.type!=="funnelarea"||K.scalegroup||(ne/=K.aspectratio),te.r=Math.min(Q,ne)/(1+P(K)),te.cx=B.l+B.w*(K.domain.x[1]+K.domain.x[0])/2,te.cy=B.t+B.h*(1-K.domain.y[0])-W/2,K.title.text&&K.title.position.indexOf("bottom")!==-1&&(te.cy-=C(te,B)),K.scalegroup&&V.indexOf(K.scalegroup)===-1&&V.push(K.scalegroup)}(function(re,ae){for(var ue,pe,ge,_e=0;_e<ae.length;_e++){var me=1/0,ve=ae[_e];for(pe=0;pe<re.length;pe++)if((ge=(ue=re[pe][0]).trace).scalegroup===ve){var Oe;if(ge.type==="pie")Oe=ue.r*ue.r;else if(ge.type==="funnelarea"){var Me,Te;ge.aspectratio>1?Te=(Me=ue.r)/ge.aspectratio:Me=(Te=ue.r)*ge.aspectratio,Oe=(Me*=(1+ge.baseratio)/2)*Te}me=Math.min(me,Oe/ue.vTotal)}for(pe=0;pe<re.length;pe++)if((ge=(ue=re[pe][0]).trace).scalegroup===ve){var se=me*ue.vTotal;ge.type==="funnelarea"&&(se/=(1+ge.baseratio)/2,se/=ge.aspectratio),ue.r=Math.sqrt(se)}}})(N,V)}function G(N,B){return[N*Math.sin(B),-N*Math.cos(B)]}function O(N,B,V){var q=N._fullLayout,te=V.trace,K=te.texttemplate,J=te.textinfo;if(!K&&J&&J!=="none"){var Y,W=J.split("+"),Q=function(Oe){return W.indexOf(Oe)!==-1},ne=Q("label"),re=Q("text"),ae=Q("value"),ue=Q("percent"),pe=q.separators;if(Y=ne?[B.label]:[],re){var ge=u.getFirstFilled(te.text,B.pts);c(ge)&&Y.push(ge)}ae&&Y.push(u.formatPieValue(B.v,pe)),ue&&Y.push(u.formatPiePercent(B.v/V.vTotal,pe)),B.text=Y.join("<br>")}if(K){var _e=d.castOption(te,B.i,"texttemplate");if(_e){var me=function(Oe){return{label:Oe.label,value:Oe.v,valueLabel:u.formatPieValue(Oe.v,q.separators),percent:Oe.v/V.vTotal,percentLabel:u.formatPiePercent(Oe.v/V.vTotal,q.separators),color:Oe.color,text:Oe.text,customdata:d.castOption(te,Oe.i,"customdata")}}(B),ve=u.getFirstFilled(te.text,B.pts);(c(ve)||ve==="")&&(me.text=ve),B.text=d.texttemplateString(_e,me,N._fullLayout._d3locale,me,te._meta||{})}else B.text=""}}function H(N,B){var V=N.rotate*Math.PI/180,q=Math.cos(V),te=Math.sin(V),K=(B.left+B.right)/2,J=(B.top+B.bottom)/2;N.textX=K*q-J*te,N.textY=K*te+J*q,N.noCenter=!0}ee.exports={plot:function(N,B){var V=N._context.staticPlot,q=N._fullLayout,te=q._size;o("pie",q),h(B,N),z(B,te);var K=d.makeTraceGroups(q._pielayer,B,"trace").each(function(J){var Y=M.select(this),W=J[0],Q=W.trace;(function(ne){var re,ae,ue,pe=ne[0],ge=pe.r,_e=pe.trace,me=u.getRotationAngle(_e.rotation),ve=2*Math.PI/pe.vTotal,Oe="px0",Me="px1";if(_e.direction==="counterclockwise"){for(re=0;re<ne.length&&ne[re].hidden;re++);if(re===ne.length)return;me+=ve*ne[re].v,ve*=-1,Oe="px1",Me="px0"}for(ue=G(ge,me),re=0;re<ne.length;re++)(ae=ne[re]).hidden||(ae[Oe]=ue,ae.startangle=me,me+=ve*ae.v/2,ae.pxmid=G(ge,me),ae.midangle=me,ue=G(ge,me+=ve*ae.v/2),ae.stopangle=me,ae[Me]=ue,ae.largeArc=ae.v>pe.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/pe.vTotal,.5),ae.ring=1-_e.hole,ae.rInscribed=w(ae,pe))})(J),Y.attr("stroke-linejoin","round"),Y.each(function(){var ne=M.select(this).selectAll("g.slice").data(J);ne.enter().append("g").classed("slice",!0),ne.exit().remove();var re=[[[],[]],[[],[]]],ae=!1;ne.each(function(Me,Te){if(Me.hidden)M.select(this).selectAll("path,g").remove();else{Me.pointNumber=Me.i,Me.curveNumber=Q.index,re[Me.pxmid[1]<0?0:1][Me.pxmid[0]<0?0:1].push(Me);var se=W.cx,oe=W.cy,he=M.select(this),Ee=he.selectAll("path.surface").data([Me]);if(Ee.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),he.call(x,N,J),Q.pull){var ke=+u.castOption(Q.pull,Me.pts)||0;ke>0&&(se+=ke*Me.pxmid[0],oe+=ke*Me.pxmid[1])}Me.cxFinal=se,Me.cyFinal=oe;var be=Q.hole;if(Me.v===W.vTotal){var Ie="M"+(se+Me.px0[0])+","+(oe+Me.px0[1])+Ce(Me.px0,Me.pxmid,!0,1)+Ce(Me.pxmid,Me.px0,!0,1)+"Z";be?Ee.attr("d","M"+(se+be*Me.px0[0])+","+(oe+be*Me.px0[1])+Ce(Me.px0,Me.pxmid,!1,be)+Ce(Me.pxmid,Me.px0,!1,be)+"Z"+Ie):Ee.attr("d",Ie)}else{var Fe=Ce(Me.px0,Me.px1,!0,1);if(be){var ce=1-be;Ee.attr("d","M"+(se+be*Me.px1[0])+","+(oe+be*Me.px1[1])+Ce(Me.px1,Me.px0,!1,be)+"l"+ce*Me.px0[0]+","+ce*Me.px0[1]+Fe+"Z")}else Ee.attr("d","M"+se+","+oe+"l"+Me.px0[0]+","+Me.px0[1]+Fe+"Z")}O(N,Me,W);var we=u.castOption(Q.textposition,Me.pts),ye=he.selectAll("g.slicetext").data(Me.text&&we!=="none"?[0]:[]);ye.enter().append("g").classed("slicetext",!0),ye.exit().remove(),ye.each(function(){var Re=d.ensureSingle(M.select(this),"text","",function(xt){xt.attr("data-notex",1)}),ze=d.ensureUniformFontSize(N,we==="outside"?function(xt,mt,rt){return{color:u.castOption(xt.outsidetextfont.color,mt.pts)||u.castOption(xt.textfont.color,mt.pts)||rt.color,family:u.castOption(xt.outsidetextfont.family,mt.pts)||u.castOption(xt.textfont.family,mt.pts)||rt.family,size:u.castOption(xt.outsidetextfont.size,mt.pts)||u.castOption(xt.textfont.size,mt.pts)||rt.size}}(Q,Me,q.font):g(Q,Me,q.font));Re.text(Me.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,ze).call(i.convertToTspans,N);var He,Ge=b.bBox(Re.node());if(we==="outside")He=E(Ge,Me);else if(He=y(Ge,Me,W),we==="auto"&&He.scale<1){var Je=d.ensureUniformFontSize(N,Q.outsidetextfont);Re.call(b.font,Je),He=E(Ge=b.bBox(Re.node()),Me)}var ot=He.textPosAngle,Qe=ot===void 0?Me.pxmid:G(W.r,ot);if(He.targetX=se+Qe[0]*He.rCenter+(He.x||0),He.targetY=oe+Qe[1]*He.rCenter+(He.y||0),H(He,Ge),He.outside){var vt=He.targetY;Me.yLabelMin=vt-Ge.height/2,Me.yLabelMid=vt,Me.yLabelMax=vt+Ge.height/2,Me.labelExtraX=0,Me.labelExtraY=0,ae=!0}He.fontSize=ze.size,n(Q.type,He,q),J[Te].transform=He,d.setTransormAndDisplay(Re,He)})}function Ce(Re,ze,He,Ge){var Je=Ge*(ze[0]-Re[0]),ot=Ge*(ze[1]-Re[1]);return"a"+Ge*W.r+","+Ge*W.r+" 0 "+Me.largeArc+(He?" 1 ":" 0 ")+Je+","+ot}});var ue=M.select(this).selectAll("g.titletext").data(Q.title.text?[0]:[]);if(ue.enter().append("g").classed("titletext",!0),ue.exit().remove(),ue.each(function(){var Me,Te=d.ensureSingle(M.select(this),"text","",function(oe){oe.attr("data-notex",1)}),se=Q.title.text;Q._meta&&(se=d.templateString(se,Q._meta)),Te.text(se).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,Q.title.font).call(i.convertToTspans,N),Me=Q.title.position==="middle center"?function(oe){var he=Math.sqrt(oe.titleBox.width*oe.titleBox.width+oe.titleBox.height*oe.titleBox.height);return{x:oe.cx,y:oe.cy,scale:oe.trace.hole*oe.r*2/he,tx:0,ty:-oe.titleBox.height/2+oe.trace.title.font.size}}(W):L(W,te),Te.attr("transform",t(Me.x,Me.y)+s(Math.min(1,Me.scale))+t(Me.tx,Me.ty))}),ae&&function(Me,Te){var se,oe,he,Ee,ke,be,Ie,Fe,ce,we,ye,Ce,Re;function ze(ot,Qe){return ot.pxmid[1]-Qe.pxmid[1]}function He(ot,Qe){return Qe.pxmid[1]-ot.pxmid[1]}function Ge(ot,Qe){Qe||(Qe={});var vt,xt,mt,rt,it=Qe.labelExtraY+(oe?Qe.yLabelMax:Qe.yLabelMin),Tt=oe?ot.yLabelMin:ot.yLabelMax,Mt=oe?ot.yLabelMax:ot.yLabelMin,Pt=ot.cyFinal+ke(ot.px0[1],ot.px1[1]),kt=it-Tt;if(kt*Ie>0&&(ot.labelExtraY=kt),Array.isArray(Te.pull))for(xt=0;xt<we.length;xt++)(mt=we[xt])===ot||(u.castOption(Te.pull,ot.pts)||0)>=(u.castOption(Te.pull,mt.pts)||0)||((ot.pxmid[1]-mt.pxmid[1])*Ie>0?(kt=mt.cyFinal+ke(mt.px0[1],mt.px1[1])-Tt-ot.labelExtraY)*Ie>0&&(ot.labelExtraY+=kt):(Mt+ot.labelExtraY-Pt)*Ie>0&&(vt=3*be*Math.abs(xt-we.indexOf(ot)),(rt=mt.cxFinal+Ee(mt.px0[0],mt.px1[0])+vt-(ot.cxFinal+ot.pxmid[0])-ot.labelExtraX)*be>0&&(ot.labelExtraX+=rt)))}for(oe=0;oe<2;oe++)for(he=oe?ze:He,ke=oe?Math.max:Math.min,Ie=oe?1:-1,se=0;se<2;se++){for(Ee=se?Math.max:Math.min,be=se?1:-1,(Fe=Me[oe][se]).sort(he),ce=Me[1-oe][se],we=ce.concat(Fe),Ce=[],ye=0;ye<Fe.length;ye++)Fe[ye].yLabelMid!==void 0&&Ce.push(Fe[ye]);for(Re=!1,ye=0;oe&&ye<ce.length;ye++)if(ce[ye].yLabelMid!==void 0){Re=ce[ye];break}for(ye=0;ye<Ce.length;ye++){var Je=ye&&Ce[ye-1];Re&&!ye&&(Je=Re),Ge(Ce[ye],Je)}}}(re,Q),function(Me,Te){Me.each(function(se){var oe=M.select(this);if(se.labelExtraX||se.labelExtraY){var he=oe.select("g.slicetext text");se.transform.targetX+=se.labelExtraX,se.transform.targetY+=se.labelExtraY,d.setTransormAndDisplay(he,se.transform);var Ee=se.cxFinal+se.pxmid[0],ke="M"+Ee+","+(se.cyFinal+se.pxmid[1]),be=(se.yLabelMax-se.yLabelMin)*(se.pxmid[0]<0?-1:1)/4;if(se.labelExtraX){var Ie=se.labelExtraX*se.pxmid[1]/se.pxmid[0],Fe=se.yLabelMid+se.labelExtraY-(se.cyFinal+se.pxmid[1]);Math.abs(Ie)>Math.abs(Fe)?ke+="l"+Fe*se.pxmid[0]/se.pxmid[1]+","+Fe+"H"+(Ee+se.labelExtraX+be):ke+="l"+se.labelExtraX+","+Ie+"v"+(Fe-Ie)+"h"+be}else ke+="V"+(se.yLabelMid+se.labelExtraY)+"h"+be;d.ensureSingle(oe,"path","textline").call(T.stroke,Te.outsidetextfont.color).attr({"stroke-width":Math.min(2,Te.outsidetextfont.size/8),d:ke,fill:"none"})}else oe.select("path.textline").remove()})}(ne,Q),ae&&Q.automargin){var pe=b.bBox(Y.node()),ge=Q.domain,_e=te.w*(ge.x[1]-ge.x[0]),me=te.h*(ge.y[1]-ge.y[0]),ve=(.5*_e-W.r)/te.w,Oe=(.5*me-W.r)/te.h;k.autoMargin(N,"pie."+Q.uid+".automargin",{xl:ge.x[0]-ve,xr:ge.x[1]+ve,yb:ge.y[0]-Oe,yt:ge.y[1]+Oe,l:Math.max(W.cx-W.r-pe.left,0),r:Math.max(pe.right-(W.cx+W.r),0),b:Math.max(pe.bottom-(W.cy+W.r),0),t:Math.max(W.cy-W.r-pe.top,0),pad:5})}})});setTimeout(function(){K.selectAll("tspan").each(function(){var J=M.select(this);J.attr("dy")&&J.attr("dy",J.attr("dy"))})},0)},formatSliceLabel:O,transformInsideText:y,determineInsideTextFont:g,positionTitleOutside:L,prerenderTitles:h,layoutAreas:z,attachFxHandlers:x,computeTransform:H}},68357:function(ee,D,e){var M=e(39898),k=e(63463),l=e(72597).resizeText;ee.exports=function(T){var b=T._fullLayout._pielayer.selectAll(".trace");l(T,b,"pie"),b.each(function(d){var s=d[0].trace,t=M.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,s,T)})})}},63463:function(ee,D,e){var M=e(7901),k=e(53581).castOption,l=e(22209);ee.exports=function(T,b,d,s){var t=d.marker.line,i=k(t.color,b.pts)||M.defaultLine,r=k(t.width,b.pts)||0;T.call(l,b,d,s).style("stroke-width",r).call(M.stroke,i)}},10959:function(ee,D,e){var M=e(82196);ee.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(ee,D,e){var M=e(9330).gl_pointcloud2d,k=e(78614),l=e(71739).findExtremes,T=e(34603);function b(s,t){this.scene=s,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(s.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var d=b.prototype;d.handlePick=function(s){var t=this.idToIndex[s.pointId];return{trace:this,dataCoord:s.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},d.update=function(s){this.index=s.index,this.textLabels=s.text,this.name=s.name,this.hoverinfo=s.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(s),this.color=T(s,{})},d.updateFast=function(s){var t,i,r,n,o,a,u=this.xData=this.pickXData=s.x,p=this.yData=this.pickYData=s.y,c=this.pickXYData=s.xy,x=s.xbounds&&s.ybounds,g=s.indices,h=this.bounds;if(c){if(r=c,t=c.length>>>1,x)h[0]=s.xbounds[0],h[2]=s.xbounds[1],h[1]=s.ybounds[0],h[3]=s.ybounds[1];else for(a=0;a<t;a++)n=r[2*a],o=r[2*a+1],n<h[0]&&(h[0]=n),n>h[2]&&(h[2]=n),o<h[1]&&(h[1]=o),o>h[3]&&(h[3]=o);if(g)i=g;else for(i=new Int32Array(t),a=0;a<t;a++)i[a]=a}else for(t=u.length,r=new Float32Array(2*t),i=new Int32Array(t),a=0;a<t;a++)n=u[a],o=p[a],i[a]=a,r[2*a]=n,r[2*a+1]=o,n<h[0]&&(h[0]=n),n>h[2]&&(h[2]=n),o<h[1]&&(h[1]=o),o>h[3]&&(h[3]=o);this.idToIndex=i,this.pointcloudOptions.idToIndex=i,this.pointcloudOptions.positions=r;var y=k(s.marker.color),v=k(s.marker.border.color),m=s.opacity*s.marker.opacity;y[3]*=m,this.pointcloudOptions.color=y;var _=s.marker.blend;_===null&&(_=u.length<100||p.length<100),this.pointcloudOptions.blend=_,v[3]*=m,this.pointcloudOptions.borderColor=v;var f=s.marker.sizemin,S=Math.max(s.marker.sizemax,s.marker.sizemin);this.pointcloudOptions.sizeMin=f,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=s.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var w=this.scene.xaxis,E=this.scene.yaxis,L=S/2||.5;s._extremes[w._id]=l(w,[h[0],h[2]],{ppad:L}),s._extremes[E._id]=l(E,[h[1],h[3]],{ppad:L})},d.dispose=function(){this.pointcloud.dispose()},ee.exports=function(s,t){var i=new b(s,t.uid);return i.update(t),i}},33876:function(ee,D,e){var M=e(71828),k=e(10959);ee.exports=function(l,T,b){function d(s,t){return M.coerce(l,T,k,s,t)}d("x"),d("y"),d("xbounds"),d("ybounds"),l.xy&&l.xy instanceof Float32Array&&(T.xy=l.xy),l.indices&&l.indices instanceof Int32Array&&(T.indices=l.indices),d("text"),d("marker.color",b),d("marker.opacity"),d("marker.blend"),d("marker.sizemin"),d("marker.sizemax"),d("marker.border.color",b),d("marker.border.arearatio"),T._length=null}},20593:function(ee,D,e){ee.exports={attributes:e(10959),supplyDefaults:e(33876),calc:e(36563),plot:e(42743),moduleType:"trace",name:"pointcloud",basePlotModule:e(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(ee,D,e){var M=e(41940),k=e(9012),l=e(22399),T=e(77914),b=e(27670).Y,d=e(5386).fF,s=e(50693),t=e(44467).templatedArray,i=e(12663).descriptionOnlyNumbers,r=e(1426).extendFlat,n=e(30962).overrideAll;(ee.exports=n({hoverinfo:r({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(ee,D,e){var M=e(30962).overrideAll,k=e(27659).a0,l=e(60436),T=e(528),b=e(6964),d=e(28569),s=e(47322).prepSelect,t=e(71828),i=e(73972),r="sankey";function n(o,a){var u=o._fullData[a],p=o._fullLayout,c=p.dragmode,x=p.dragmode==="pan"?"move":"crosshair",g=u._bgRect;if(g&&c!=="pan"&&c!=="zoom"){b(g,x);var h={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},y={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},v={gd:o,element:g.node(),plotinfo:{id:a,xaxis:h,yaxis:y,fillRangeItems:t.noop},subplot:a,xaxes:[h],yaxes:[y],doneFnCompleted:function(m){var _,f=o._fullData[a],S=f.node.groups.slice(),w=[];function E(z){for(var G=f._sankey.graph.nodes,O=0;O<G.length;O++)if(G[O].pointNumber===z)return G[O]}for(var L=0;L<m.length;L++){var C=E(m[L].pointNumber);if(C)if(C.group){for(var P=0;P<C.childrenNodes.length;P++)w.push(C.childrenNodes[P].pointNumber);S[C.pointNumber-f.node._count]=!1}else w.push(C.pointNumber)}_=S.filter(Boolean).concat([w]),i.call("_guiRestyle",o,{"node.groups":[_]},a)},prepFn:function(m,_,f){s(m,_,f,v,c)}};d.init(v)}}D.name=r,D.baseLayoutAttrOverrides=M({hoverlabel:T.hoverlabel},"plot","nested"),D.plot=function(o){var a=k(o.calcdata,r)[0];l(o,a),D.updateFx(o)},D.clean=function(o,a,u,p){var c=p._has&&p._has(r),x=a._has&&a._has(r);c&&!x&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},D.updateFx=function(o){for(var a=0;a<o._fullData.length;a++)n(o,a)}},92930:function(ee,D,e){var M=e(68664),k=e(71828),l=e(28984).wrap,T=k.isArrayOrTypedArray,b=k.isIndex,d=e(21081);ee.exports=function(s,t){var i=function(r){var n,o=r.node,a=r.link,u=[],p=T(a.color),c=T(a.customdata),x={},g={},h=a.colorscales.length;for(n=0;n<h;n++){var y=a.colorscales[n],v=d.extractScale(y,{cLetter:"c"}),m=d.makeColorScaleFunc(v);g[y.label]=m}var _=0;for(n=0;n<a.value.length;n++)a.source[n]>_&&(_=a.source[n]),a.target[n]>_&&(_=a.target[n]);var f,S=_+1;r.node._count=S;var w=r.node.groups,E={};for(n=0;n<w.length;n++){var L=w[n];for(f=0;f<L.length;f++){var C=L[f],P=S+n;E.hasOwnProperty(C)?k.warn("Node "+C+" is already part of a group."):E[C]=P}}var z={source:[],target:[]};for(n=0;n<a.value.length;n++){var G=a.value[n],O=a.source[n],H=a.target[n];if(G>0&&b(O,S)&&b(H,S)&&(!E.hasOwnProperty(O)||!E.hasOwnProperty(H)||E[O]!==E[H])){E.hasOwnProperty(H)&&(H=E[H]),E.hasOwnProperty(O)&&(O=E[O]),H=+H,x[O=+O]=x[H]=!0;var N="";a.label&&a.label[n]&&(N=a.label[n]);var B=null;N&&g.hasOwnProperty(N)&&(B=g[N]),u.push({pointNumber:n,label:N,color:p?a.color[n]:a.color,customdata:c?a.customdata[n]:a.customdata,concentrationscale:B,source:O,target:H,value:+G}),z.source.push(O),z.target.push(H)}}var V=S+w.length,q=T(o.color),te=T(o.customdata),K=[];for(n=0;n<V;n++)if(x[n]){var J=o.label[n];K.push({group:n>S-1,childrenNodes:[],pointNumber:n,label:J,color:q?o.color[n]:o.color,customdata:te?o.customdata[n]:o.customdata})}var Y=!1;return function(W,Q,ne){for(var re=k.init2dArray(W,0),ae=0;ae<Math.min(Q.length,ne.length);ae++)if(k.isIndex(Q[ae],W)&&k.isIndex(ne[ae],W)){if(Q[ae]===ne[ae])return!0;re[Q[ae]].push(ne[ae])}return M(re).components.some(function(ue){return ue.length>1})}(V,z.source,z.target)&&(Y=!0),{circular:Y,links:u,nodes:K,groups:w,groupLookup:E}}(t);return l({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},85247:function(ee){ee.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(ee,D,e){var M=e(71828),k=e(39953),l=e(7901),T=e(84267),b=e(27670).c,d=e(38048),s=e(44467),t=e(85501);function i(r,n){function o(a,u){return M.coerce(r,n,k.link.colorscales,a,u)}o("label"),o("cmin"),o("cmax"),o("colorscale")}ee.exports=function(r,n,o,a){function u(S,w){return M.coerce(r,n,k,S,w)}var p=M.extendDeep(a.hoverlabel,r.hoverlabel),c=r.node,x=s.newContainer(n,"node");function g(S,w){return M.coerce(c,x,k.node,S,w)}g("label"),g("groups"),g("x"),g("y"),g("pad"),g("thickness"),g("line.color"),g("line.width"),g("hoverinfo",r.hoverinfo),d(c,x,g,p),g("hovertemplate");var h=a.colorway;g("color",x.label.map(function(S,w){return l.addOpacity(function(E){return h[E%h.length]}(w),.8)})),g("customdata");var y=r.link||{},v=s.newContainer(n,"link");function m(S,w){return M.coerce(y,v,k.link,S,w)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",r.hoverinfo),d(y,v,m,p),m("hovertemplate");var _,f=T(a.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";m("color",M.repeat(f,v.value.length)),m("customdata"),t(y,v,{name:"colorscales",handleItemDefaults:i}),b(n,a,u),u("orientation"),u("valueformat"),u("valuesuffix"),x.x.length&&x.y.length&&(_="freeform"),u("arrangement",_),M.coerceFont(u,"textfont",M.extendFlat({},a.font)),n._length=null}},29396:function(ee,D,e){ee.exports={attributes:e(39953),supplyDefaults:e(26857),calc:e(92930),plot:e(60436),moduleType:"trace",name:"sankey",basePlotModule:e(75536),selectPoints:e(84564),categories:["noOpacity"],meta:{}}},60436:function(ee,D,e){var M=e(39898),k=e(71828),l=k.numberFormat,T=e(3393),b=e(30211),d=e(7901),s=e(85247).cn,t=k._;function i(y){return y!==""}function r(y,v){return y.filter(function(m){return m.key===v.traceId})}function n(y,v){M.select(y).select("path").style("fill-opacity",v),M.select(y).select("rect").style("fill-opacity",v)}function o(y){M.select(y).select("text.name").style("fill","black")}function a(y){return function(v){return y.node.sourceLinks.indexOf(v.link)!==-1||y.node.targetLinks.indexOf(v.link)!==-1}}function u(y){return function(v){return v.node.sourceLinks.indexOf(y.link)!==-1||v.node.targetLinks.indexOf(y.link)!==-1}}function p(y,v,m){v&&m&&r(m,v).selectAll("."+s.sankeyLink).filter(a(v)).call(x.bind(0,v,m,!1))}function c(y,v,m){v&&m&&r(m,v).selectAll("."+s.sankeyLink).filter(a(v)).call(g.bind(0,v,m,!1))}function x(y,v,m,_){var f=_.datum().link.label;_.style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),f&&r(v,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===f}).style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),m&&r(v,y).selectAll("."+s.sankeyNode).filter(u(y)).call(p)}function g(y,v,m,_){var f=_.datum().link.label;_.style("fill-opacity",function(S){return S.tinyColorAlpha}),f&&r(v,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===f}).style("fill-opacity",function(S){return S.tinyColorAlpha}),m&&r(v,y).selectAll(s.sankeyNode).filter(u(y)).call(c)}function h(y,v){var m=y.hoverlabel||{},_=k.nestedProperty(m,v).get();return!Array.isArray(_)&&_}ee.exports=function(y,v){for(var m=y._fullLayout,_=m._paper,f=m._size,S=0;S<y._fullData.length;S++)if(y._fullData[S].visible&&y._fullData[S].type===s.sankey&&!y._fullData[S]._viewInitial){var w=y._fullData[S].node;y._fullData[S]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var E=t(y,"source:")+" ",L=t(y,"target:")+" ",C=t(y,"concentration:")+" ",P=t(y,"incoming flow count:")+" ",z=t(y,"outgoing flow count:")+" ";T(y,_,v,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:function(G,O,H){y._fullLayout.hovermode!==!1&&(M.select(G).call(x.bind(0,O,H,!0)),O.link.trace.link.hoverinfo!=="skip"&&(O.link.fullData=O.link.trace,y.emit("plotly_hover",{event:M.event,points:[O.link]})))},follow:function(G,O){if(y._fullLayout.hovermode!==!1){var H=O.link.trace.link;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){for(var N=[],B=0,V=0;V<O.flow.links.length;V++){var q=O.flow.links[V];if(y._fullLayout.hovermode!=="closest"||O.link.pointNumber===q.pointNumber){O.link.pointNumber===q.pointNumber&&(B=V),q.fullData=q.trace,H=O.link.trace.link;var te=J(q),K={valueLabel:l(O.valueFormat)(q.value)+O.valueSuffix};N.push({x:te[0],y:te[1],name:K.valueLabel,text:[q.label||"",E+q.source.label,L+q.target.label,q.concentrationscale?C+l("%0.2f")(q.flow.labelConcentration):""].filter(i).join("<br>"),color:h(H,"bgcolor")||d.addOpacity(q.color,1),borderColor:h(H,"bordercolor"),fontFamily:h(H,"font.family"),fontSize:h(H,"font.size"),fontColor:h(H,"font.color"),nameLength:h(H,"namelength"),textAlign:h(H,"align"),idealAlign:M.event.x<te[0]?"right":"left",hovertemplate:H.hovertemplate,hovertemplateLabels:K,eventData:[q]})}}b.loneHover(N,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y,anchorIndex:B}).each(function(){O.link.concentrationscale||n(this,.65),o(this)})}}function J(Y){var W,Q;Y.circular?(W=(Y.circularPathData.leftInnerExtent+Y.circularPathData.rightInnerExtent)/2,Q=Y.circularPathData.verticalFullExtent):(W=(Y.source.x1+Y.target.x0)/2,Q=(Y.y0+Y.y1)/2);var ne=[W,Q];return Y.trace.orientation==="v"&&ne.reverse(),ne[0]+=O.parent.translateX,ne[1]+=O.parent.translateY,ne}},unhover:function(G,O,H){y._fullLayout.hovermode!==!1&&(M.select(G).call(g.bind(0,O,H,!0)),O.link.trace.link.hoverinfo!=="skip"&&(O.link.fullData=O.link.trace,y.emit("plotly_unhover",{event:M.event,points:[O.link]})),b.loneUnhover(m._hoverlayer.node()))},select:function(G,O){var H=O.link;H.originalEvent=M.event,y._hoverdata=[H],b.click(y,{target:!0})}},nodeEvents:{hover:function(G,O,H){y._fullLayout.hovermode!==!1&&(M.select(G).call(p,O,H),O.node.trace.node.hoverinfo!=="skip"&&(O.node.fullData=O.node.trace,y.emit("plotly_hover",{event:M.event,points:[O.node]})))},follow:function(G,O){if(y._fullLayout.hovermode!==!1){var H=O.node.trace.node;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){var N=M.select(G).select("."+s.nodeRect),B=y._fullLayout._paperdiv.node().getBoundingClientRect(),V=N.node().getBoundingClientRect(),q=V.left-2-B.left,te=V.right+2-B.left,K=V.top+V.height/4-B.top,J={valueLabel:l(O.valueFormat)(O.node.value)+O.valueSuffix};O.node.fullData=O.node.trace,y._fullLayout._calcInverseTransform(y);var Y=y._fullLayout._invScaleX,W=y._fullLayout._invScaleY,Q=b.loneHover({x0:Y*q,x1:Y*te,y:W*K,name:l(O.valueFormat)(O.node.value)+O.valueSuffix,text:[O.node.label,P+O.node.targetLinks.length,z+O.node.sourceLinks.length].filter(i).join("<br>"),color:h(H,"bgcolor")||O.tinyColorHue,borderColor:h(H,"bordercolor"),fontFamily:h(H,"font.family"),fontSize:h(H,"font.size"),fontColor:h(H,"font.color"),nameLength:h(H,"namelength"),textAlign:h(H,"align"),idealAlign:"left",hovertemplate:H.hovertemplate,hovertemplateLabels:J,eventData:[O.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y});n(Q,.85),o(Q)}}},unhover:function(G,O,H){y._fullLayout.hovermode!==!1&&(M.select(G).call(c,O,H),O.node.trace.node.hoverinfo!=="skip"&&(O.node.fullData=O.node.trace,y.emit("plotly_unhover",{event:M.event,points:[O.node]})),b.loneUnhover(m._hoverlayer.node()))},select:function(G,O,H){var N=O.node;N.originalEvent=M.event,y._hoverdata=[N],M.select(G).call(c,O,H),b.click(y,{target:!0})}}})}},3393:function(ee,D,e){var M=e(49887),k=e(81684).k4,l=e(39898),T=e(30838),b=e(86781),d=e(85247),s=e(84267),t=e(7901),i=e(91424),r=e(71828),n=r.strTranslate,o=r.strRotate,a=e(28984),u=a.keyFun,p=a.repeat,c=a.unwrap,x=e(63893),g=e(73972),h=e(18783),y=h.CAP_SHIFT,v=h.LINE_SPACING;function m(V,q,te){var K,J=c(q),Y=J.trace,W=Y.domain,Q=Y.orientation==="h",ne=Y.node.pad,re=Y.node.thickness,ae=V.width*(W.x[1]-W.x[0]),ue=V.height*(W.y[1]-W.y[0]),pe=J._nodes,ge=J._links,_e=J.circular;(K=_e?b.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(d.sankeyIterations).size(Q?[ae,ue]:[ue,ae]).nodeWidth(re).nodePadding(ne).nodeId(function(be){return be.pointNumber}).nodes(pe).links(ge);var me,ve,Oe,Me=K();for(var Te in K.nodePadding()<ne&&r.warn("node.pad was reduced to ",K.nodePadding()," to fit within the figure."),J._groupLookup){var se,oe=parseInt(J._groupLookup[Te]);for(me=0;me<Me.nodes.length;me++)if(Me.nodes[me].pointNumber===oe){se=Me.nodes[me];break}if(se){var he={pointNumber:parseInt(Te),x0:se.x0,x1:se.x1,y0:se.y0,y1:se.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Me.nodes.unshift(he),se.childrenNodes.unshift(he)}}if(function(){for(me=0;me<Me.nodes.length;me++){var be,Ie,Fe=Me.nodes[me],ce={};for(ve=0;ve<Fe.targetLinks.length;ve++)be=(Ie=Fe.targetLinks[ve]).source.pointNumber+":"+Ie.target.pointNumber,ce.hasOwnProperty(be)||(ce[be]=[]),ce[be].push(Ie);var we=Object.keys(ce);for(ve=0;ve<we.length;ve++){var ye=ce[be=we[ve]],Ce=0,Re={};for(Oe=0;Oe<ye.length;Oe++)Re[(Ie=ye[Oe]).label]||(Re[Ie.label]=0),Re[Ie.label]+=Ie.value,Ce+=Ie.value;for(Oe=0;Oe<ye.length;Oe++)(Ie=ye[Oe]).flow={value:Ce,labelConcentration:Re[Ie.label]/Ce,concentration:Ie.value/Ce,links:ye},Ie.concentrationscale&&(Ie.color=s(Ie.concentrationscale(Ie.flow.labelConcentration)))}var ze=0;for(ve=0;ve<Fe.sourceLinks.length;ve++)ze+=Fe.sourceLinks[ve].value;for(ve=0;ve<Fe.sourceLinks.length;ve++)(Ie=Fe.sourceLinks[ve]).concentrationOut=Ie.value/ze;var He=0;for(ve=0;ve<Fe.targetLinks.length;ve++)He+=Fe.targetLinks[ve].value;for(ve=0;ve<Fe.targetLinks.length;ve++)(Ie=Fe.targetLinks[ve]).concenrationIn=Ie.value/He}}(),Y.node.x.length&&Y.node.y.length){for(me=0;me<Math.min(Y.node.x.length,Y.node.y.length,Me.nodes.length);me++)if(Y.node.x[me]&&Y.node.y[me]){var Ee=[Y.node.x[me]*ae,Y.node.y[me]*ue];Me.nodes[me].x0=Ee[0]-re/2,Me.nodes[me].x1=Ee[0]+re/2;var ke=Me.nodes[me].y1-Me.nodes[me].y0;Me.nodes[me].y0=Ee[1]-ke/2,Me.nodes[me].y1=Ee[1]+ke/2}Y.arrangement==="snap"&&function(be){var Ie,Fe,ce=be.map(function(ze,He){return{x0:ze.x0,index:He}}).sort(function(ze,He){return ze.x0-He.x0}),we=[],ye=-1,Ce=-1/0;for(me=0;me<ce.length;me++){var Re=be[ce[me].index];Re.x0>Ce+re&&(ye+=1,Ie=Re.x0),Ce=Re.x0,we[ye]||(we[ye]=[]),we[ye].push(Re),Fe=Ie-Re.x0,Re.x0+=Fe,Re.x1+=Fe}return we}(pe=Me.nodes).forEach(function(be){var Ie,Fe,ce,we=0,ye=be.length;for(be.sort(function(Ce,Re){return Ce.y0-Re.y0}),ce=0;ce<ye;++ce)(Ie=be[ce]).y0>=we||(Fe=we-Ie.y0)>1e-6&&(Ie.y0+=Fe,Ie.y1+=Fe),we=Ie.y1+ne}),K.update(Me)}return{circular:_e,key:te,trace:Y,guid:r.randstr(),horizontal:Q,width:ae,height:ue,nodePad:Y.node.pad,nodeLineColor:Y.node.line.color,nodeLineWidth:Y.node.line.width,linkLineColor:Y.link.line.color,linkLineWidth:Y.link.line.width,linkArrowLength:Y.link.arrowlen,valueFormat:Y.valueformat,valueSuffix:Y.valuesuffix,textFont:Y.textfont,translateX:W.x[0]*V.width+V.margin.l,translateY:V.height-W.y[1]*V.height+V.margin.t,dragParallel:Q?ue:ae,dragPerpendicular:Q?ae:ue,arrangement:Y.arrangement,sankey:K,graph:Me,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(V,q,te){var K=s(q.color),J=q.source.label+"|"+q.target.label+"__"+te;return q.trace=V.trace,q.curveNumber=V.trace.index,{circular:V.circular,key:J,traceId:V.key,pointNumber:q.pointNumber,link:q,tinyColorHue:t.tinyRGB(K),tinyColorAlpha:K.getAlpha(),linkPath:f,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,linkArrowLength:V.linkArrowLength,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:q.flow}}function f(){return function(V){var q=V.linkArrowLength;if(V.link.circular)return function(ve,Oe){var Me=ve.width/2,Te=ve.circularPathData;return ve.circularLinkType==="top"?"M "+(Te.targetX-Oe)+" "+(Te.targetY+Me)+" L"+(Te.rightInnerExtent-Oe)+" "+(Te.targetY+Me)+"A"+(Te.rightLargeArcRadius+Me)+" "+(Te.rightSmallArcRadius+Me)+" 0 0 1 "+(Te.rightFullExtent-Me-Oe)+" "+(Te.targetY-Te.rightSmallArcRadius)+"L"+(Te.rightFullExtent-Me-Oe)+" "+Te.verticalRightInnerExtent+"A"+(Te.rightLargeArcRadius+Me)+" "+(Te.rightLargeArcRadius+Me)+" 0 0 1 "+(Te.rightInnerExtent-Oe)+" "+(Te.verticalFullExtent-Me)+"L"+Te.leftInnerExtent+" "+(Te.verticalFullExtent-Me)+"A"+(Te.leftLargeArcRadius+Me)+" "+(Te.leftLargeArcRadius+Me)+" 0 0 1 "+(Te.leftFullExtent+Me)+" "+Te.verticalLeftInnerExtent+"L"+(Te.leftFullExtent+Me)+" "+(Te.sourceY-Te.leftSmallArcRadius)+"A"+(Te.leftLargeArcRadius+Me)+" "+(Te.leftSmallArcRadius+Me)+" 0 0 1 "+Te.leftInnerExtent+" "+(Te.sourceY+Me)+"L"+Te.sourceX+" "+(Te.sourceY+Me)+"L"+Te.sourceX+" "+(Te.sourceY-Me)+"L"+Te.leftInnerExtent+" "+(Te.sourceY-Me)+"A"+(Te.leftLargeArcRadius-Me)+" "+(Te.leftSmallArcRadius-Me)+" 0 0 0 "+(Te.leftFullExtent-Me)+" "+(Te.sourceY-Te.leftSmallArcRadius)+"L"+(Te.leftFullExtent-Me)+" "+Te.verticalLeftInnerExtent+"A"+(Te.leftLargeArcRadius-Me)+" "+(Te.leftLargeArcRadius-Me)+" 0 0 0 "+Te.leftInnerExtent+" "+(Te.verticalFullExtent+Me)+"L"+(Te.rightInnerExtent-Oe)+" "+(Te.verticalFullExtent+Me)+"A"+(Te.rightLargeArcRadius-Me)+" "+(Te.rightLargeArcRadius-Me)+" 0 0 0 "+(Te.rightFullExtent+Me-Oe)+" "+Te.verticalRightInnerExtent+"L"+(Te.rightFullExtent+Me-Oe)+" "+(Te.targetY-Te.rightSmallArcRadius)+"A"+(Te.rightLargeArcRadius-Me)+" "+(Te.rightSmallArcRadius-Me)+" 0 0 0 "+(Te.rightInnerExtent-Oe)+" "+(Te.targetY-Me)+"L"+(Te.targetX-Oe)+" "+(Te.targetY-Me)+(Oe>0?"L"+Te.targetX+" "+Te.targetY:"")+"Z":"M "+(Te.targetX-Oe)+" "+(Te.targetY-Me)+" L"+(Te.rightInnerExtent-Oe)+" "+(Te.targetY-Me)+"A"+(Te.rightLargeArcRadius+Me)+" "+(Te.rightSmallArcRadius+Me)+" 0 0 0 "+(Te.rightFullExtent-Me-Oe)+" "+(Te.targetY+Te.rightSmallArcRadius)+"L"+(Te.rightFullExtent-Me-Oe)+" "+Te.verticalRightInnerExtent+"A"+(Te.rightLargeArcRadius+Me)+" "+(Te.rightLargeArcRadius+Me)+" 0 0 0 "+(Te.rightInnerExtent-Oe)+" "+(Te.verticalFullExtent+Me)+"L"+Te.leftInnerExtent+" "+(Te.verticalFullExtent+Me)+"A"+(Te.leftLargeArcRadius+Me)+" "+(Te.leftLargeArcRadius+Me)+" 0 0 0 "+(Te.leftFullExtent+Me)+" "+Te.verticalLeftInnerExtent+"L"+(Te.leftFullExtent+Me)+" "+(Te.sourceY+Te.leftSmallArcRadius)+"A"+(Te.leftLargeArcRadius+Me)+" "+(Te.leftSmallArcRadius+Me)+" 0 0 0 "+Te.leftInnerExtent+" "+(Te.sourceY-Me)+"L"+Te.sourceX+" "+(Te.sourceY-Me)+"L"+Te.sourceX+" "+(Te.sourceY+Me)+"L"+Te.leftInnerExtent+" "+(Te.sourceY+Me)+"A"+(Te.leftLargeArcRadius-Me)+" "+(Te.leftSmallArcRadius-Me)+" 0 0 1 "+(Te.leftFullExtent-Me)+" "+(Te.sourceY+Te.leftSmallArcRadius)+"L"+(Te.leftFullExtent-Me)+" "+Te.verticalLeftInnerExtent+"A"+(Te.leftLargeArcRadius-Me)+" "+(Te.leftLargeArcRadius-Me)+" 0 0 1 "+Te.leftInnerExtent+" "+(Te.verticalFullExtent-Me)+"L"+(Te.rightInnerExtent-Oe)+" "+(Te.verticalFullExtent-Me)+"A"+(Te.rightLargeArcRadius-Me)+" "+(Te.rightLargeArcRadius-Me)+" 0 0 1 "+(Te.rightFullExtent+Me-Oe)+" "+Te.verticalRightInnerExtent+"L"+(Te.rightFullExtent+Me-Oe)+" "+(Te.targetY+Te.rightSmallArcRadius)+"A"+(Te.rightLargeArcRadius-Me)+" "+(Te.rightSmallArcRadius-Me)+" 0 0 1 "+(Te.rightInnerExtent-Oe)+" "+(Te.targetY+Me)+"L"+(Te.targetX-Oe)+" "+(Te.targetY+Me)+(Oe>0?"L"+Te.targetX+" "+Te.targetY:"")+"Z"}(V.link,q);var te=Math.abs((V.link.target.x0-V.link.source.x1)/2);q>te&&(q=te);var K=V.link.source.x1,J=V.link.target.x0-q,Y=k(K,J),W=Y(.5),Q=Y(.5),ne=V.link.y0-V.link.width/2,re=V.link.y0+V.link.width/2,ae=V.link.y1-V.link.width/2,ue=V.link.y1+V.link.width/2,pe="M"+K+","+ne,ge="C"+W+","+ne+" "+Q+","+ae+" "+J+","+ae,_e="C"+Q+","+ue+" "+W+","+re+" "+K+","+re,me=q>0?"L"+(J+q)+","+(ae+V.link.width/2):"";return pe+ge+(me+="L"+J+","+ue)+_e+"Z"}}function S(V,q){var te=s(q.color),K=d.nodePadAcross,J=V.nodePad/2;q.dx=q.x1-q.x0,q.dy=q.y1-q.y0;var Y=q.dx,W=Math.max(.5,q.dy),Q="node_"+q.pointNumber;return q.group&&(Q=r.randstr()),q.trace=V.trace,q.curveNumber=V.trace.index,{index:q.pointNumber,key:Q,partOfGroup:q.partOfGroup||!1,group:q.group,traceId:V.key,trace:V.trace,node:q,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil(Y),visibleHeight:W,zoneX:-K,zoneY:-J,zoneWidth:Y+2*K,zoneHeight:W+2*J,labelY:V.horizontal?q.dy/2+1:q.dx/2+1,left:q.originalLayer===1,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:t.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,Q].join("_"),interactionState:V.interactionState,figure:V}}function w(V){V.attr("transform",function(q){return n(q.node.x0.toFixed(3),q.node.y0.toFixed(3))})}function E(V){V.call(w)}function L(V,q){V.call(E),q.attr("d",f())}function C(V){V.attr("width",function(q){return q.node.x1-q.node.x0}).attr("height",function(q){return q.visibleHeight})}function P(V){return V.link.width>1||V.linkLineWidth>0}function z(V){return n(V.translateX,V.translateY)+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function G(V,q,te){V.on(".basic",null).on("mouseover.basic",function(K){K.interactionState.dragInProgress||K.partOfGroup||(te.hover(this,K,q),K.interactionState.hovered=[this,K])}).on("mousemove.basic",function(K){K.interactionState.dragInProgress||K.partOfGroup||(te.follow(this,K),K.interactionState.hovered=[this,K])}).on("mouseout.basic",function(K){K.interactionState.dragInProgress||K.partOfGroup||(te.unhover(this,K,q),K.interactionState.hovered=!1)}).on("click.basic",function(K){K.interactionState.hovered&&(te.unhover(this,K,q),K.interactionState.hovered=!1),K.interactionState.dragInProgress||K.partOfGroup||te.select(this,K,q)})}function O(V,q,te,K){var J=l.behavior.drag().origin(function(Y){return{x:Y.node.x0+Y.visibleWidth/2,y:Y.node.y0+Y.visibleHeight/2}}).on("dragstart",function(Y){if(Y.arrangement!=="fixed"&&(r.ensureSingle(K._fullLayout._infolayer,"g","dragcover",function(Q){K._fullLayout._dragCover=Q}),r.raiseToTop(this),Y.interactionState.dragInProgress=Y.node,N(Y.node),Y.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,Y.interactionState.hovered),Y.interactionState.hovered=!1),Y.arrangement==="snap")){var W=Y.traceId+"|"+Y.key;Y.forceLayouts[W]?Y.forceLayouts[W].alpha(1):function(Q,ne,re,ae){(function(pe){for(var ge=0;ge<pe.length;ge++)pe[ge].y=(pe[ge].y0+pe[ge].y1)/2,pe[ge].x=(pe[ge].x0+pe[ge].x1)/2})(re.graph.nodes);var ue=re.graph.nodes.filter(function(pe){return pe.originalX===re.node.originalX}).filter(function(pe){return!pe.partOfGroup});re.forceLayouts[ne]=M.forceSimulation(ue).alphaDecay(0).force("collide",M.forceCollide().radius(function(pe){return pe.dy/2+re.nodePad/2}).strength(1).iterations(d.forceIterations)).force("constrain",function(pe,ge,_e,me){return function(){for(var ve=0,Oe=0;Oe<_e.length;Oe++){var Me=_e[Oe];Me===me.interactionState.dragInProgress?(Me.x=Me.lastDraggedX,Me.y=Me.lastDraggedY):(Me.vx=(Me.originalX-Me.x)/d.forceTicksPerFrame,Me.y=Math.min(me.size-Me.dy/2,Math.max(Me.dy/2,Me.y))),ve=Math.max(ve,Math.abs(Me.vx),Math.abs(Me.vy))}!me.interactionState.dragInProgress&&ve<.1&&me.forceLayouts[ge].alpha()>0&&me.forceLayouts[ge].alpha(0)}}(0,ne,ue,re)).stop()}(0,W,Y),function(Q,ne,re,ae,ue){window.requestAnimationFrame(function pe(){var ge;for(ge=0;ge<d.forceTicksPerFrame;ge++)re.forceLayouts[ae].tick();if(function(me){for(var ve=0;ve<me.length;ve++)me[ve].y0=me[ve].y-me[ve].dy/2,me[ve].y1=me[ve].y0+me[ve].dy,me[ve].x0=me[ve].x-me[ve].dx/2,me[ve].x1=me[ve].x0+me[ve].dx}(re.graph.nodes),re.sankey.update(re.graph),L(Q.filter(B(re)),ne),re.forceLayouts[ae].alpha()>0)window.requestAnimationFrame(pe);else{var _e=re.node.originalX;re.node.x0=_e-re.visibleWidth/2,re.node.x1=_e+re.visibleWidth/2,H(re,ue)}})}(V,q,Y,W,K)}}).on("drag",function(Y){if(Y.arrangement!=="fixed"){var W=l.event.x,Q=l.event.y;Y.arrangement==="snap"?(Y.node.x0=W-Y.visibleWidth/2,Y.node.x1=W+Y.visibleWidth/2,Y.node.y0=Q-Y.visibleHeight/2,Y.node.y1=Q+Y.visibleHeight/2):(Y.arrangement==="freeform"&&(Y.node.x0=W-Y.visibleWidth/2,Y.node.x1=W+Y.visibleWidth/2),Q=Math.max(0,Math.min(Y.size-Y.visibleHeight/2,Q)),Y.node.y0=Q-Y.visibleHeight/2,Y.node.y1=Q+Y.visibleHeight/2),N(Y.node),Y.arrangement!=="snap"&&(Y.sankey.update(Y.graph),L(V.filter(B(Y)),q))}}).on("dragend",function(Y){if(Y.arrangement!=="fixed"){Y.interactionState.dragInProgress=!1;for(var W=0;W<Y.node.childrenNodes.length;W++)Y.node.childrenNodes[W].x=Y.node.x,Y.node.childrenNodes[W].y=Y.node.y;Y.arrangement!=="snap"&&H(Y,K)}});V.on(".drag",null).call(J)}function H(V,q){for(var te=[],K=[],J=0;J<V.graph.nodes.length;J++){var Y=(V.graph.nodes[J].x0+V.graph.nodes[J].x1)/2,W=(V.graph.nodes[J].y0+V.graph.nodes[J].y1)/2;te.push(Y/V.figure.width),K.push(W/V.figure.height)}g.call("_guiRestyle",q,{"node.x":[te],"node.y":[K]},V.trace.index).then(function(){q._fullLayout._dragCover&&q._fullLayout._dragCover.remove()})}function N(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function B(V){return function(q){return q.node.originalX===V.node.originalX}}ee.exports=function(V,q,te,K,J){var Y=V._context.staticPlot,W=!1;r.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){W=!0});var Q=V._fullLayout._dragCover,ne=te.filter(function(ve){return c(ve).trace.visible}).map(m.bind(null,K)),re=q.selectAll("."+d.cn.sankey).data(ne,u);re.exit().remove(),re.enter().append("g").classed(d.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Y?"none":"auto").attr("transform",z),re.each(function(ve,Oe){V._fullData[Oe]._sankey=ve;var Me="bgsankey-"+ve.trace.uid+"-"+Oe;r.ensureSingle(V._fullLayout._draggers,"rect",Me),V._fullData[Oe]._bgRect=l.select("."+Me),V._fullData[Oe]._bgRect.style("pointer-events",Y?"none":"all").attr("width",ve.width).attr("height",ve.height).attr("x",ve.translateX).attr("y",ve.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),re.transition().ease(d.ease).duration(d.duration).attr("transform",z);var ae=re.selectAll("."+d.cn.sankeyLinks).data(p,u);ae.enter().append("g").classed(d.cn.sankeyLinks,!0).style("fill","none");var ue=ae.selectAll("."+d.cn.sankeyLink).data(function(ve){return ve.graph.links.filter(function(Oe){return Oe.value}).map(_.bind(null,ve))},u);ue.enter().append("path").classed(d.cn.sankeyLink,!0).call(G,re,J.linkEvents),ue.style("stroke",function(ve){return P(ve)?t.tinyRGB(s(ve.linkLineColor)):ve.tinyColorHue}).style("stroke-opacity",function(ve){return P(ve)?t.opacity(ve.linkLineColor):ve.tinyColorAlpha}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}).style("stroke-width",function(ve){return P(ve)?ve.linkLineWidth:1}).attr("d",f()),ue.style("opacity",function(){return V._context.staticPlot||W||Q?1:0}).transition().ease(d.ease).duration(d.duration).style("opacity",1),ue.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var pe=re.selectAll("."+d.cn.sankeyNodeSet).data(p,u);pe.enter().append("g").classed(d.cn.sankeyNodeSet,!0),pe.style("cursor",function(ve){switch(ve.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ge=pe.selectAll("."+d.cn.sankeyNode).data(function(ve){var Oe=ve.graph.nodes;return function(Me){var Te,se=[];for(Te=0;Te<Me.length;Te++)Me[Te].originalX=(Me[Te].x0+Me[Te].x1)/2,Me[Te].originalY=(Me[Te].y0+Me[Te].y1)/2,se.indexOf(Me[Te].originalX)===-1&&se.push(Me[Te].originalX);for(se.sort(function(oe,he){return oe-he}),Te=0;Te<Me.length;Te++)Me[Te].originalLayerIndex=se.indexOf(Me[Te].originalX),Me[Te].originalLayer=Me[Te].originalLayerIndex/(se.length-1)}(Oe),Oe.map(S.bind(null,ve))},u);ge.enter().append("g").classed(d.cn.sankeyNode,!0).call(w).style("opacity",function(ve){return!V._context.staticPlot&&!W||ve.partOfGroup?0:1}),ge.call(G,re,J.nodeEvents).call(O,ue,J,V),ge.transition().ease(d.ease).duration(d.duration).call(w).style("opacity",function(ve){return ve.partOfGroup?0:1}),ge.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var _e=ge.selectAll("."+d.cn.nodeRect).data(p);_e.enter().append("rect").classed(d.cn.nodeRect,!0).call(C),_e.style("stroke-width",function(ve){return ve.nodeLineWidth}).style("stroke",function(ve){return t.tinyRGB(s(ve.nodeLineColor))}).style("stroke-opacity",function(ve){return t.opacity(ve.nodeLineColor)}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}),_e.transition().ease(d.ease).duration(d.duration).call(C);var me=ge.selectAll("."+d.cn.nodeLabel).data(p);me.enter().append("text").classed(d.cn.nodeLabel,!0).style("cursor","default"),me.attr("data-notex",1).text(function(ve){return ve.node.label}).each(function(ve){var Oe=l.select(this);i.font(Oe,ve.textFont),x.convertToTspans(Oe,V)}).style("text-shadow",x.makeTextShadow(V._fullLayout.paper_bgcolor)).attr("text-anchor",function(ve){return ve.horizontal&&ve.left?"end":"start"}).attr("transform",function(ve){var Oe=l.select(this),Me=x.lineCount(Oe),Te=ve.textFont.size*((Me-1)*v-y),se=ve.nodeLineWidth/2+3,oe=((ve.horizontal?ve.visibleHeight:ve.visibleWidth)-Te)/2;ve.horizontal&&(ve.left?se=-se:se+=ve.visibleWidth);var he=ve.horizontal?"":"scale(-1,1)"+o(90);return n(ve.horizontal?se:oe,ve.horizontal?oe:se)+he}),me.transition().ease(d.ease).duration(d.duration)}},84564:function(ee){ee.exports=function(D,e){for(var M=[],k=D.cd[0].trace,l=k._sankey.graph.nodes,T=0;T<l.length;T++){var b=l[T];if(!b.partOfGroup){var d=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];k.orientation==="v"&&d.reverse(),e&&e.contains(d,!1,T,D)&&M.push({pointNumber:b.pointNumber})}}return M}},75225:function(ee,D,e){var M=e(71828);ee.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(l.text,k,"tx"),M.mergeArray(l.texttemplate,k,"txt"),M.mergeArray(l.hovertext,k,"htx"),M.mergeArray(l.customdata,k,"data"),M.mergeArray(l.textposition,k,"tp"),l.textfont&&(M.mergeArrayCastPositive(l.textfont.size,k,"ts"),M.mergeArray(l.textfont.color,k,"tc"),M.mergeArray(l.textfont.family,k,"tf"));var b=l.marker;if(b){M.mergeArrayCastPositive(b.size,k,"ms"),M.mergeArrayCastPositive(b.opacity,k,"mo"),M.mergeArray(b.symbol,k,"mx"),M.mergeArray(b.angle,k,"ma"),M.mergeArray(b.standoff,k,"mf"),M.mergeArray(b.color,k,"mc");var d=b.line;b.line&&(M.mergeArray(d.color,k,"mlc"),M.mergeArrayCastPositive(d.width,k,"mlw"));var s=b.gradient;s&&s.type!=="none"&&(M.mergeArray(s.type,k,"mgt"),M.mergeArray(s.color,k,"mgc"))}}},82196:function(ee,D,e){var M=e(12663).axisHoverFormat,k=e(5386).si,l=e(5386).fF,T=e(50693),b=e(41940),d=e(79952).P,s=e(79952).u,t=e(91424),i=e(47581),r=e(1426).extendFlat;ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},d,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:s,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(ee,D,e){var M=e(92770),k=e(71828),l=e(89298),T=e(42973),b=e(50606).BADNUM,d=e(34098),s=e(36922),t=e(75225),i=e(66279);function r(p,c,x,g,h,y,v){var m=c._length,_=p._fullLayout,f=x._id,S=g._id,w=_._firstScatter[a(c)]===c.uid,E=(u(c,_,x,g)||{}).orientation,L=c.fill;x._minDtick=0,g._minDtick=0;var C={padded:!0},P={padded:!0};v&&(C.ppad=P.ppad=v);var z=m<2||h[0]!==h[m-1]||y[0]!==y[m-1];z&&(L==="tozerox"||L==="tonextx"&&(w||E==="h"))?C.tozero=!0:(c.error_y||{}).visible||L!=="tonexty"&&L!=="tozeroy"&&(d.hasMarkers(c)||d.hasText(c))||(C.padded=!1,C.ppad=0),z&&(L==="tozeroy"||L==="tonexty"&&(w||E==="v"))?P.tozero=!0:L!=="tonextx"&&L!=="tozerox"||(P.padded=!1),f&&(c._extremes[f]=l.findExtremes(x,h,C)),S&&(c._extremes[S]=l.findExtremes(g,y,P))}function n(p,c){if(d.hasMarkers(p)){var x,g=p.marker,h=1.6*(p.marker.sizeref||1);if(x=p.marker.sizemode==="area"?function(f){return Math.max(Math.sqrt((f||0)/h),3)}:function(f){return Math.max((f||0)/h,3)},k.isArrayOrTypedArray(g.size)){var y={type:"linear"};l.setConvert(y);for(var v=y.makeCalcdata(p.marker,"size"),m=new Array(c),_=0;_<c;_++)m[_]=x(v[_]);return m}return x(g.size)}}function o(p,c){var x=a(c),g=p._firstScatter;g[x]||(g[x]=c.uid)}function a(p){var c=p.stackgroup;return p.xaxis+p.yaxis+p.type+(c?"-"+c:"")}function u(p,c,x,g){var h=p.stackgroup;if(h){var y=c._scatterStackOpts[x._id+g._id][h],v=y.orientation==="v"?g:x;return v.type==="linear"||v.type==="log"?y:void 0}}ee.exports={calc:function(p,c){var x,g,h,y,v,m,_=p._fullLayout,f=c._xA=l.getFromId(p,c.xaxis||"x","x"),S=c._yA=l.getFromId(p,c.yaxis||"y","y"),w=f.makeCalcdata(c,"x"),E=S.makeCalcdata(c,"y"),L=T(c,f,"x",w),C=T(c,S,"y",E),P=L.vals,z=C.vals,G=c._length,O=new Array(G),H=c.ids,N=u(c,_,f,S),B=!1;o(_,c);var V,q="x",te="y";N?(k.pushUnique(N.traceIndices,c._expandedIndex),(x=N.orientation==="v")?(te="s",V="x"):(q="s",V="y"),v=N.stackgaps==="interpolate"):r(p,c,f,S,P,z,n(c,G));var K=!!c.xperiodalignment,J=!!c.yperiodalignment;for(g=0;g<G;g++){var Y=O[g]={},W=M(P[g]),Q=M(z[g]);W&&Q?(Y[q]=P[g],Y[te]=z[g],K&&(Y.orig_x=w[g],Y.xEnd=L.ends[g],Y.xStart=L.starts[g]),J&&(Y.orig_y=E[g],Y.yEnd=C.ends[g],Y.yStart=C.starts[g])):N&&(x?W:Q)?(Y[V]=x?P[g]:z[g],Y.gap=!0,v?(Y.s=b,B=!0):Y.s=0):Y[q]=Y[te]=b,H&&(Y.id=String(H[g]))}if(t(O,c),s(p,c),i(O,c),N){for(g=0;g<O.length;)O[g][V]===b?O.splice(g,1):g++;if(k.sort(O,function(ue,pe){return ue[V]-pe[V]||ue.i-pe.i}),B){for(g=0;g<O.length-1&&O[g].gap;)g++;for((m=O[g].s)||(m=O[g].s=0),h=0;h<g;h++)O[h].s=m;for(y=O.length-1;y>g&&O[y].gap;)y--;for(m=O[y].s,h=O.length-1;h>y;h--)O[h].s=m;for(;g<y;)if(O[++g].gap){for(h=g+1;O[h].gap;)h++;for(var ne=O[g-1][V],re=O[g-1].s,ae=(O[h].s-re)/(O[h][V]-ne);g<h;)O[g].s=re+(O[g][V]-ne)*ae,g++}}}return O},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:o,getStackOpts:u}},66279:function(ee,D,e){var M=e(71828);ee.exports=function(k,l){M.isArrayOrTypedArray(l.selectedpoints)&&M.tagSelected(k,l)}},36922:function(ee,D,e){var M=e(52075).hasColorscale,k=e(78803),l=e(34098);ee.exports=function(T,b){l.hasLines(b)&&M(b,"line")&&k(T,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),l.hasMarkers(b)&&(M(b,"marker")&&k(T,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),M(b,"marker.line")&&k(T,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(ee){ee.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(ee,D,e){var M=e(47761),k=e(11661).setGroupPositions;function l(T,b,d,s,t,i,r){t[s]=!0;var n={i:null,gap:!0,s:0};if(n[r]=d,T.splice(b,0,n),b&&d===T[b-1][r]){var o=T[b-1];n.s=o.s,n.i=o.i,n.gap=o.gap}else i&&(n.s=function(a,u,p,c){var x=a[u-1],g=a[u+1];return g?x?x.s+(g.s-x.s)*(p-x[c])/(g[c]-x[c]):g.s:x.s}(T,b,d,r));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}ee.exports=function(T,b){T._fullLayout.scattermode==="group"&&function(V,q){for(var te=q.xaxis,K=q.yaxis,J=V._fullLayout,Y=V._fullData,W=V.calcdata,Q=[],ne=[],re=0;re<Y.length;re++){var ae=Y[re];ae.visible===!0&&ae.type==="scatter"&&ae.xaxis===te._id&&ae.yaxis===K._id&&(ae.orientation==="h"?Q.push(W[re]):ae.orientation==="v"&&ne.push(W[re]))}var ue={mode:J.scattermode,gap:J.scattergap};k(V,te,K,ne,ue),k(V,K,te,Q,ue)}(T,b);var d=b.xaxis,s=b.yaxis,t=d._id+s._id,i=T._fullLayout._scatterStackOpts[t];if(i){var r,n,o,a,u,p,c,x,g,h,y,v,m,_,f,S=T.calcdata;for(var w in i){var E=(h=i[w]).traceIndices;if(E.length){for(y=h.stackgaps==="interpolate",v=h.groupnorm,h.orientation==="v"?(m="x",_="y"):(m="y",_="x"),f=new Array(E.length),r=0;r<f.length;r++)f[r]=!1;p=S[E[0]];var L=new Array(p.length);for(r=0;r<p.length;r++)L[r]=p[r][m];for(r=1;r<E.length;r++){for(u=S[E[r]],n=o=0;n<u.length;n++){for(c=u[n][m];c>L[o]&&o<L.length;o++)l(u,n,L[o],r,f,y,m),n++;if(c!==L[o]){for(a=0;a<r;a++)l(S[E[a]],o,c,a,f,y,m);L.splice(o,0,c)}o++}for(;o<L.length;o++)l(u,n,L[o],r,f,y,m),n++}var C=L.length;for(n=0;n<p.length;n++){for(x=p[n][_]=p[n].s,r=1;r<E.length;r++)(u=S[E[r]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=C,x+=u[n].s,u[n][_]=x;if(v)for(g=(v==="fraction"?x:x/100)||1,r=0;r<E.length;r++){var P=S[E[r]][n];P[_]/=g,P.sNorm=P.s/g}}for(r=0;r<E.length;r++){var z=(u=S[E[r]])[0].trace,G=M.calcMarkerSize(z,z._rawLength),O=Array.isArray(G);if(G&&f[r]||O){var H=G;for(G=new Array(C),n=0;n<C;n++)G[n]=u[n].gap?0:O?H[u[n].i]:H}var N=new Array(C),B=new Array(C);for(n=0;n<C;n++)N[n]=u[n].x,B[n]=u[n].y;M.calcAxisExpansion(T,z,d,s,N,B,G),u[0].t.orientation=h.orientation}}}}}},34936:function(ee,D,e){var M=e(71828),k=e(26125),l=e(82196);ee.exports=function(T,b){var d,s,t;function i(u){return M.coerce(s._input,s,l,u)}if(b.scattermode==="group")for(t=0;t<T.length;t++)(s=T[t]).type==="scatter"&&(d=s._input,k(d,s,b,i));for(t=0;t<T.length;t++){var r=T[t];if(r.type==="scatter"){var n=r.fill;if(n!=="none"&&n!=="toself"&&(r.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var o=t-1;o>=0;o--){var a=T[o];if(a.type==="scatter"&&a.xaxis===r.xaxis&&a.yaxis===r.yaxis){a.opacity=void 0;break}}}}}},17438:function(ee,D,e){var M=e(71828),k=e(73972),l=e(82196),T=e(47581),b=e(34098),d=e(67513),s=e(73927),t=e(565),i=e(49508),r=e(11058),n=e(94039),o=e(82410),a=e(28908),u=e(71828).coercePattern;ee.exports=function(p,c,x,g){function h(E,L){return M.coerce(p,c,l,E,L)}var y=d(p,c,g,h);if(y||(c.visible=!1),c.visible){s(p,c,g,h),h("xhoverformat"),h("yhoverformat");var v=t(p,c,g,h);g.scattermode==="group"&&c.orientation===void 0&&h("orientation","v");var m=!v&&y<T.PTS_LINESONLY?"lines+markers":"lines";h("text"),h("hovertext"),h("mode",m),b.hasLines(c)&&(r(p,c,x,g,h,{backoff:!0}),n(p,c,h),h("connectgaps"),h("line.simplify")),b.hasMarkers(c)&&i(p,c,x,g,h,{gradient:!0}),b.hasText(c)&&(h("texttemplate"),o(p,c,g,h));var _=[];(b.hasMarkers(c)||b.hasText(c))&&(h("cliponaxis"),h("marker.maxdisplayed"),_.push("points")),h("fill",v?v.fillDflt:"none"),c.fill!=="none"&&(a(p,c,x,h),b.hasLines(c)||n(p,c,h),u(h,"fillpattern",c.fillcolor,!1));var f=(c.line||{}).color,S=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||_.push("fills"),h("hoveron",_.join("+")||"points"),c.hoveron!=="fills"&&h("hovertemplate");var w=k.getComponentMethod("errorbars","supplyDefaults");w(p,c,f||S||x,{axis:"y"}),w(p,c,f||S||x,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(c,h)}}},28908:function(ee,D,e){var M=e(7901),k=e(71828).isArrayOrTypedArray;ee.exports=function(l,T,b,d){var s=!1;if(T.marker){var t=T.marker.color,i=(T.marker.line||{}).color;t&&!k(t)?s=t:i&&!k(i)&&(s=i)}d("fillcolor",M.addOpacity((T.line||{}).color||s||b,.5))}},8225:function(ee,D,e){var M=e(89298);ee.exports=function(k,l,T){var b={},d={_fullLayout:T},s=M.getFromTrace(d,l,"x"),t=M.getFromTrace(d,l,"y"),i=k.orig_x;i===void 0&&(i=k.x);var r=k.orig_y;return r===void 0&&(r=k.y),b.xLabel=M.tickText(s,s.c2l(i),!0).text,b.yLabel=M.tickText(t,t.c2l(r),!0).text,b}},34603:function(ee,D,e){var M=e(7901),k=e(34098);ee.exports=function(l,T){var b,d;if(l.mode==="lines")return(b=l.line.color)&&M.opacity(b)?b:l.fillcolor;if(l.mode==="none")return l.fill?l.fillcolor:"";var s=T.mcc||(l.marker||{}).color,t=T.mlcc||((l.marker||{}).line||{}).color;return(d=s&&M.opacity(s)?s:t&&M.opacity(t)&&(T.mlw||((l.marker||{}).line||{}).width)?t:"")?M.opacity(d)<.3?M.addOpacity(d,.3):d:(b=(l.line||{}).color)&&M.opacity(b)&&k.hasLines(l)&&l.line.width?b:l.fillcolor}},26125:function(ee,D,e){var M=e(99082).getAxisGroup;ee.exports=function(k,l,T,b){var d=l.orientation,s=l[{v:"x",h:"y"}[d]+"axis"],t=M(T,s)+d,i=T._alignmentOpts||{},r=b("alignmentgroup"),n=i[t];n||(n=i[t]={});var o=n[r];o?o.traces.push(l):o=n[r]={traces:[l],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var a=b("offsetgroup"),u=o.offsetGroups,p=u[a];a&&(p||(p=u[a]={offsetIndex:Object.keys(u).length}),l._offsetIndex=p.offsetIndex)}},33720:function(ee,D,e){var M=e(71828),k=e(30211),l=e(73972),T=e(34603),b=e(7901),d=M.fillText;ee.exports=function(s,t,i,r){var n=s.cd,o=n[0].trace,a=s.xa,u=s.ya,p=a.c2p(t),c=u.c2p(i),x=[p,c],g=o.hoveron||"",h=o.mode.indexOf("markers")!==-1?3:.5,y=!!o.xperiodalignment,v=!!o.yperiodalignment;if(g.indexOf("points")!==-1){var m=function(ge){var _e=Math.max(h,ge.mrc||0),me=a.c2p(ge.x)-p,ve=u.c2p(ge.y)-c;return Math.max(Math.sqrt(me*me+ve*ve)-_e,1-h/_e)},_=k.getDistanceFunction(r,function(ge){if(y){var _e=a.c2p(ge.xStart),me=a.c2p(ge.xEnd);return p>=Math.min(_e,me)&&p<=Math.max(_e,me)?0:1/0}var ve=Math.max(3,ge.mrc||0),Oe=1-1/ve,Me=Math.abs(a.c2p(ge.x)-p);return Me<ve?Oe*Me/ve:Me-ve+Oe},function(ge){if(v){var _e=u.c2p(ge.yStart),me=u.c2p(ge.yEnd);return c>=Math.min(_e,me)&&c<=Math.max(_e,me)?0:1/0}var ve=Math.max(3,ge.mrc||0),Oe=1-1/ve,Me=Math.abs(u.c2p(ge.y)-c);return Me<ve?Oe*Me/ve:Me-ve+Oe},m);if(k.getClosest(n,_,s),s.index!==!1){var f=n[s.index],S=a.c2p(f.x,!0),w=u.c2p(f.y,!0),E=f.mrc||1;s.index=f.i;var L=n[0].t.orientation,C=L&&(f.sNorm||f.s),P=L==="h"?C:f.orig_x!==void 0?f.orig_x:f.x,z=L==="v"?C:f.orig_y!==void 0?f.orig_y:f.y;return M.extendFlat(s,{color:T(o,f),x0:S-E,x1:S+E,xLabelVal:P,y0:w-E,y1:w+E,yLabelVal:z,spikeDistance:m(f),hovertemplate:o.hovertemplate}),d(f,o,s),l.getComponentMethod("errorbars","hoverInfo")(f,o,s),[s]}}if(g.indexOf("fills")!==-1&&o._polygons){var G,O,H,N,B,V,q,te,K,J=o._polygons,Y=[],W=!1,Q=1/0,ne=-1/0,re=1/0,ae=-1/0;for(G=0;G<J.length;G++)(H=J[G]).contains(x)&&(W=!W,Y.push(H),re=Math.min(re,H.ymin),ae=Math.max(ae,H.ymax));if(W){var ue=((re=Math.max(re,0))+(ae=Math.min(ae,u._length)))/2;for(G=0;G<Y.length;G++)for(N=Y[G].pts,O=1;O<N.length;O++)(te=N[O-1][1])>ue!=(K=N[O][1])>=ue&&(V=N[O-1][0],q=N[O][0],K-te&&(B=V+(q-V)*(ue-te)/(K-te),Q=Math.min(Q,B),ne=Math.max(ne,B)));Q=Math.max(Q,0),ne=Math.min(ne,a._length);var pe=b.defaultLine;return b.opacity(o.fillcolor)?pe=o.fillcolor:b.opacity((o.line||{}).color)&&(pe=o.line.color),M.extendFlat(s,{distance:s.maxHoverDistance,x0:Q,x1:ne,y0:ue,y1:ue,color:pe,hovertemplate:!1}),delete s.index,o.text&&!Array.isArray(o.text)?s.text=String(o.text):s.text=o.name,[s]}}}},67368:function(ee,D,e){var M=e(34098);ee.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:e(82196),layoutAttributes:e(21479),supplyDefaults:e(17438),crossTraceDefaults:e(34936),supplyLayoutDefaults:e(79334),calc:e(47761).calc,crossTraceCalc:e(72626),arraysToCalcdata:e(75225),plot:e(32663),colorbar:e(4898),formatLabels:e(8225),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(33720),selectPoints:e(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(ee){ee.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(ee,D,e){var M=e(71828),k=e(21479);ee.exports=function(l,T){var b,d=T.barmode==="group";T.scattermode==="group"&&(b=d?T.bargap:.2,M.coerce(l,T,k,"scattergap",b))}},11058:function(ee,D,e){var M=e(71828).isArrayOrTypedArray,k=e(52075).hasColorscale,l=e(1586);ee.exports=function(T,b,d,s,t,i){i||(i={});var r=(T.marker||{}).color;t("line.color",d),k(T,"line")?l(T,b,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!M(r)&&r||d),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},34621:function(ee,D,e){var M=e(91424),k=e(50606),l=k.BADNUM,T=k.LOG_CLIP,b=T+.5,d=T-.5,s=e(71828),t=s.segmentsIntersect,i=s.constrain,r=e(47581);ee.exports=function(n,o){var a,u,p,c,x,g,h,y,v,m,_,f,S,w,E,L,C,P,z=o.trace||{},G=o.xaxis,O=o.yaxis,H=G.type==="log",N=O.type==="log",B=G._length,V=O._length,q=o.backoff,te=z.marker,K=o.connectGaps,J=o.baseTolerance,Y=o.shape,W=Y==="linear",Q=z.fill&&z.fill!=="none",ne=[],re=r.minTolerance,ae=n.length,ue=new Array(ae),pe=0;function ge(kt){var Ze=n[kt];if(!Ze)return!1;var Xe=o.linearized?G.l2p(Ze.x):G.c2p(Ze.x),Ve=o.linearized?O.l2p(Ze.y):O.c2p(Ze.y);if(Xe===l){if(H&&(Xe=G.c2p(Ze.x,!0)),Xe===l)return!1;N&&Ve===l&&(Xe*=Math.abs(G._m*V*(G._m>0?b:d)/(O._m*B*(O._m>0?b:d)))),Xe*=1e3}if(Ve===l){if(N&&(Ve=O.c2p(Ze.y,!0)),Ve===l)return!1;Ve*=1e3}return[Xe,Ve]}function _e(kt,Ze,Xe,Ve){var We=Xe-kt,at=Ve-Ze,et=.5-kt,De=.5-Ze,Be=We*We+at*at,nt=We*et+at*De;if(nt>0&&nt<Be){var tt=et*at-De*We;if(tt*tt<Be)return!0}}function me(kt,Ze){var Xe=kt[0]/B,Ve=kt[1]/V,We=Math.max(0,-Xe,Xe-1,-Ve,Ve-1);return We&&C!==void 0&&_e(Xe,Ve,C,P)&&(We=0),We&&Ze&&_e(Xe,Ve,Ze[0]/B,Ze[1]/V)&&(We=0),(1+r.toleranceGrowth*We)*J}function ve(kt,Ze){var Xe=kt[0]-Ze[0],Ve=kt[1]-Ze[1];return Math.sqrt(Xe*Xe+Ve*Ve)}var Oe,Me,Te,se,oe,he,Ee,ke=r.maxScreensAway,be=-B*ke,Ie=B*(1+ke),Fe=-V*ke,ce=V*(1+ke),we=[[be,Fe,Ie,Fe],[Ie,Fe,Ie,ce],[Ie,ce,be,ce],[be,ce,be,Fe]];function ye(kt){if(kt[0]<be||kt[0]>Ie||kt[1]<Fe||kt[1]>ce)return[i(kt[0],be,Ie),i(kt[1],Fe,ce)]}function Ce(kt,Ze){return kt[0]===Ze[0]&&(kt[0]===be||kt[0]===Ie)||kt[1]===Ze[1]&&(kt[1]===Fe||kt[1]===ce)||void 0}function Re(kt,Ze,Xe){return function(Ve,We){var at=ye(Ve),et=ye(We),De=[];if(at&&et&&Ce(at,et))return De;at&&De.push(at),et&&De.push(et);var Be=2*s.constrain((Ve[kt]+We[kt])/2,Ze,Xe)-((at||Ve)[kt]+(et||We)[kt]);return Be&&((at&&et?Be>0==at[kt]>et[kt]?at:et:at||et)[kt]+=Be),De}}function ze(kt){var Ze=kt[0],Xe=kt[1],Ve=Ze===ue[pe-1][0],We=Xe===ue[pe-1][1];if(!Ve||!We)if(pe>1){var at=Ze===ue[pe-2][0],et=Xe===ue[pe-2][1];Ve&&(Ze===be||Ze===Ie)&&at?et?pe--:ue[pe-1]=kt:We&&(Xe===Fe||Xe===ce)&&et?at?pe--:ue[pe-1]=kt:ue[pe++]=kt}else ue[pe++]=kt}function He(kt){ue[pe-1][0]!==kt[0]&&ue[pe-1][1]!==kt[1]&&ze([Te,se]),ze(kt),oe=null,Te=se=0}Y==="linear"||Y==="spline"?Ee=function(kt,Ze){for(var Xe=[],Ve=0,We=0;We<4;We++){var at=we[We],et=t(kt[0],kt[1],Ze[0],Ze[1],at[0],at[1],at[2],at[3]);et&&(!Ve||Math.abs(et.x-Xe[0][0])>1||Math.abs(et.y-Xe[0][1])>1)&&(et=[et.x,et.y],Ve&&ve(et,kt)<ve(Xe[0],kt)?Xe.unshift(et):Xe.push(et),Ve++)}return Xe}:Y==="hv"||Y==="vh"?Ee=function(kt,Ze){var Xe=[],Ve=ye(kt),We=ye(Ze);return Ve&&We&&Ce(Ve,We)||(Ve&&Xe.push(Ve),We&&Xe.push(We)),Xe}:Y==="hvh"?Ee=Re(0,be,Ie):Y==="vhv"&&(Ee=Re(1,Fe,ce));var Ge=s.isArrayOrTypedArray(te);function Je(kt){if(kt&&q&&(kt.i=a,kt.d=n,kt.trace=z,kt.marker=Ge?te[kt.i]:te,kt.backoff=q),C=kt[0]/B,P=kt[1]/V,Oe=kt[0]<be?be:kt[0]>Ie?Ie:0,Me=kt[1]<Fe?Fe:kt[1]>ce?ce:0,Oe||Me){if(pe)if(oe){var Ze=Ee(oe,kt);Ze.length>1&&(He(Ze[0]),ue[pe++]=Ze[1])}else he=Ee(ue[pe-1],kt)[0],ue[pe++]=he;else ue[pe++]=[Oe||kt[0],Me||kt[1]];var Xe=ue[pe-1];Oe&&Me&&(Xe[0]!==Oe||Xe[1]!==Me)?(oe&&(Te!==Oe&&se!==Me?ze(Te&&se?(Ve=oe,at=(We=kt)[0]-Ve[0],et=(We[1]-Ve[1])/at,(Ve[1]*We[0]-We[1]*Ve[0])/at>0?[et>0?be:Ie,ce]:[et>0?Ie:be,Fe]):[Te||Oe,se||Me]):Te&&se&&ze([Te,se])),ze([Oe,Me])):Te-Oe&&se-Me&&ze([Oe||Te,Me||se]),oe=kt,Te=Oe,se=Me}else oe&&He(Ee(oe,kt)[0]),ue[pe++]=kt;var Ve,We,at,et}for(a=0;a<ae;a++)if(u=ge(a)){for(pe=0,oe=null,Je(u),a++;a<ae;a++){if(!(c=ge(a))){if(K)continue;break}if(W&&o.simplify){var ot=ge(a+1);if(m=ve(c,u),Q&&(pe===0||pe===ae-1)||!(m<me(c,ot)*re)){for(y=[(c[0]-u[0])/m,(c[1]-u[1])/m],x=u,_=m,f=w=E=0,h=!1,p=c,a++;a<n.length;a++){if(g=ot,ot=ge(a+1),!g){if(K)continue;break}if(L=(v=[g[0]-u[0],g[1]-u[1]])[0]*y[1]-v[1]*y[0],w=Math.min(w,L),(E=Math.max(E,L))-w>me(g,ot))break;p=g,(S=v[0]*y[0]+v[1]*y[1])>_?(_=S,c=g,h=!1):S<f&&(f=S,x=g,h=!0)}if(h?(Je(c),p!==x&&Je(x)):(x!==u&&Je(x),p!==c&&Je(c)),Je(p),a>=n.length||!g)break;Je(g),u=g}}else Je(c)}oe&&ze([Te||oe[0],se||oe[1]]),ne.push(ue.slice(0,pe))}var Qe=Y.slice(Y.length-1);if(q&&Qe!=="h"&&Qe!=="v"){for(var vt=!1,xt=-1,mt=[],rt=0;rt<ne.length;rt++)for(var it=0;it<ne[rt].length-1;it++){var Tt=ne[rt][it],Mt=ne[rt][it+1],Pt=M.applyBackoff(Mt,Tt);Pt[0]===Mt[0]&&Pt[1]===Mt[1]||(vt=!0),mt[xt+1]||(mt[++xt]=[Tt,[Pt[0],Pt[1]]])}return vt?mt:ne}return ne}},94039:function(ee){ee.exports=function(D,e,M){M("line.shape")==="spline"&&M("line.smoothing")}},68687:function(ee){var D={tonextx:1,tonexty:1,tonext:1};ee.exports=function(e,M,k){var l,T,b,d,s,t={},i=!1,r=-1,n=0,o=-1;for(T=0;T<k.length;T++)(b=(l=k[T][0].trace).stackgroup||"")?b in t?s=t[b]:(s=t[b]=n,n++):l.fill in D&&o>=0?s=o:(s=o=n,n++),s<r&&(i=!0),l._groupIndex=r=s;var a=k.slice();i&&a.sort(function(p,c){var x=p[0].trace,g=c[0].trace;return x._groupIndex-g._groupIndex||x.index-g.index});var u={};for(T=0;T<a.length;T++)b=(l=a[T][0].trace).stackgroup||"",l.visible===!0?(l._nexttrace=null,l.fill in D&&(d=u[b],l._prevtrace=d||null,d&&(d._nexttrace=l)),l._ownfill=l.fill&&(l.fill.substr(0,6)==="tozero"||l.fill==="toself"||l.fill.substr(0,2)==="to"&&!l._prevtrace),u[b]=l):l._prevtrace=l._nexttrace=l._ownfill=null;return a}},39984:function(ee,D,e){var M=e(92770);ee.exports=function(k,l){l||(l=2);var T=k.marker,b=T.sizeref||1,d=T.sizemin||0,s=T.sizemode==="area"?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var i=s(t/l);return M(i)&&i>0?Math.max(i,d):0}}},4898:function(ee){ee.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(ee,D,e){var M=e(7901),k=e(52075).hasColorscale,l=e(1586),T=e(34098);ee.exports=function(b,d,s,t,i,r){var n=T.isBubble(b),o=(b.line||{}).color;r=r||{},o&&(s=o),i("marker.symbol"),i("marker.opacity",n?.7:1),i("marker.size"),r.noAngle||(i("marker.angle"),r.noAngleRef||i("marker.angleref"),r.noStandOff||i("marker.standoff")),i("marker.color",s),k(b,"marker")&&l(b,d,t,i,{prefix:"marker.",cLetter:"c"}),r.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),r.noLine||(i("marker.line.color",o&&!Array.isArray(o)&&d.marker.color!==o?o:n?M.background:M.defaultLine),k(b,"marker.line")&&l(b,d,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",n?1:0)),n&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),r.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},73927:function(ee,D,e){var M=e(71828).dateTick0,k=e(50606).ONEWEEK;function l(T,b){return M(b,T%k==0?1:0)}ee.exports=function(T,b,d,s,t){if(t||(t={x:!0,y:!0}),t.x){var i=s("xperiod");i&&(s("xperiod0",l(i,b.xcalendar)),s("xperiodalignment"))}if(t.y){var r=s("yperiod");r&&(s("yperiod0",l(r,b.ycalendar)),s("yperiodalignment"))}}},32663:function(ee,D,e){var M=e(39898),k=e(73972),l=e(71828),T=l.ensureSingle,b=l.identity,d=e(91424),s=e(34098),t=e(34621),i=e(68687),r=e(61082).tester;function n(o,a,u,p,c,x,g){var h,y=o._context.staticPlot;(function(Ee,ke,be,Ie,Fe){var ce=be.xaxis,we=be.yaxis,ye=M.extent(l.simpleMap(ce.range,ce.r2c)),Ce=M.extent(l.simpleMap(we.range,we.r2c)),Re=Ie[0].trace;if(s.hasMarkers(Re)){var ze=Re.marker.maxdisplayed;if(ze!==0){var He=Ie.filter(function(Qe){return Qe.x>=ye[0]&&Qe.x<=ye[1]&&Qe.y>=Ce[0]&&Qe.y<=Ce[1]}),Ge=Math.ceil(He.length/ze),Je=0;Fe.forEach(function(Qe,vt){var xt=Qe[0].trace;s.hasMarkers(xt)&&xt.marker.maxdisplayed>0&&vt<ke&&Je++});var ot=Math.round(Je*Ge/3+Math.floor(Je/3)*Ge/7.1);Ie.forEach(function(Qe){delete Qe.vis}),He.forEach(function(Qe,vt){Math.round((vt+ot)%Ge)===0&&(Qe.vis=!0)})}}})(0,a,u,p,c);var v=!!g&&g.duration>0;function m(Ee){return v?Ee.transition():Ee}var _=u.xaxis,f=u.yaxis,S=p[0].trace,w=S.line,E=M.select(x),L=T(E,"g","errorbars"),C=T(E,"g","lines"),P=T(E,"g","points"),z=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(o,L,u,g),S.visible===!0){var G,O;m(E).style("opacity",S.opacity);var H=S.fill.charAt(S.fill.length-1);H!=="x"&&H!=="y"&&(H=""),p[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var N,B,V="",q=[],te=S._prevtrace;te&&(V=te._prevRevpath||"",O=te._nextFill,q=te._polygons);var K,J,Y,W,Q,ne,re,ae="",ue="",pe=[],ge=l.noop;if(G=S._ownFill,s.hasLines(S)||S.fill!=="none"){for(O&&O.datum(p),["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1?(K=d.steps(w.shape),J=d.steps(w.shape.split("").reverse().join(""))):K=J=w.shape==="spline"?function(Ee){var ke=Ee[Ee.length-1];return Ee.length>1&&Ee[0][0]===ke[0]&&Ee[0][1]===ke[1]?d.smoothclosed(Ee.slice(1),w.smoothing):d.smoothopen(Ee,w.smoothing)}:function(Ee){return"M"+Ee.join("L")},Y=function(Ee){return J(Ee.reverse())},pe=t(p,{xaxis:_,yaxis:f,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,backoff:w.backoff,simplify:w.simplify,fill:S.fill}),re=S._polygons=new Array(pe.length),h=0;h<pe.length;h++)S._polygons[h]=r(pe[h]);pe.length&&(W=pe[0][0],ne=(Q=pe[pe.length-1])[Q.length-1]),ge=function(Ee){return function(ke){if(N=K(ke),B=Y(ke),ae?H?(ae+="L"+N.substr(1),ue=B+"L"+ue.substr(1)):(ae+="Z"+N,ue=B+"Z"+ue):(ae=N,ue=B),s.hasLines(S)){var be=M.select(this);if(be.datum(p),Ee)m(be.style("opacity",0).attr("d",N).call(d.lineGroupStyle)).style("opacity",1);else{var Ie=m(be);Ie.attr("d",N),d.singleLineStyle(p,Ie)}}}}}var _e=C.selectAll(".js-line").data(pe);m(_e.exit()).style("opacity",0).remove(),_e.each(ge(!1)),_e.enter().append("path").classed("js-line",!0).style("vector-effect",y?"none":"non-scaling-stroke").call(d.lineGroupStyle).each(ge(!0)),d.setClipUrl(_e,u.layerClipId,o),pe.length?(G?(G.datum(p),W&&ne&&(H?(H==="y"?W[1]=ne[1]=f.c2p(0,!0):H==="x"&&(W[0]=ne[0]=_.c2p(0,!0)),m(G).attr("d","M"+ne+"L"+W+"L"+ae.substr(1)).call(d.singleFillStyle,o)):m(G).attr("d",ae+"Z").call(d.singleFillStyle,o))):O&&(S.fill.substr(0,6)==="tonext"&&ae&&V?(S.fill==="tonext"?m(O).attr("d",ae+"Z"+V+"Z").call(d.singleFillStyle,o):m(O).attr("d",ae+"L"+V.substr(1)+"Z").call(d.singleFillStyle,o),S._polygons=S._polygons.concat(q)):(ve(O),S._polygons=null)),S._prevRevpath=ue,S._prevPolygons=re):(G?ve(G):O&&ve(O),S._polygons=S._prevRevpath=S._prevPolygons=null),P.datum(p),z.datum(p),function(Ee,ke,be){var Ie,Fe=be[0].trace,ce=s.hasMarkers(Fe),we=s.hasText(Fe),ye=oe(Fe),Ce=he,Re=he;if(ce||we){var ze=b,He=Fe.stackgroup,Ge=He&&o._fullLayout._scatterStackOpts[_._id+f._id][He].stackgaps==="infer zero";Fe.marker.maxdisplayed||Fe._needsCull?ze=Ge?Me:Oe:He&&!Ge&&(ze=Te),ce&&(Ce=ze),we&&(Re=ze)}var Je,ot=(Ie=Ee.selectAll("path.point").data(Ce,ye)).enter().append("path").classed("point",!0);v&&ot.call(d.pointStyle,Fe,o).call(d.translatePoints,_,f).style("opacity",0).transition().style("opacity",1),Ie.order(),ce&&(Je=d.makePointStyleFns(Fe)),Ie.each(function(Qe){var vt=M.select(this),xt=m(vt);d.translatePoint(Qe,xt,_,f)?(d.singlePointStyle(Qe,xt,Fe,Je,o),u.layerClipId&&d.hideOutsideRangePoint(Qe,xt,_,f,Fe.xcalendar,Fe.ycalendar),Fe.customdata&&vt.classed("plotly-customdata",Qe.data!==null&&Qe.data!==void 0)):xt.remove()}),v?Ie.exit().transition().style("opacity",0).remove():Ie.exit().remove(),(Ie=ke.selectAll("g").data(Re,ye)).enter().append("g").classed("textpoint",!0).append("text"),Ie.order(),Ie.each(function(Qe){var vt=M.select(this),xt=m(vt.select("text"));d.translatePoint(Qe,xt,_,f)?u.layerClipId&&d.hideOutsideRangePoint(Qe,vt,_,f,Fe.xcalendar,Fe.ycalendar):vt.remove()}),Ie.selectAll("text").call(d.textPointStyle,Fe,o).each(function(Qe){var vt=_.c2p(Qe.x),xt=f.c2p(Qe.y);M.select(this).selectAll("tspan.line").each(function(){m(M.select(this)).attr({x:vt,y:xt})})}),Ie.exit().remove()}(P,z,p);var me=S.cliponaxis===!1?null:u.layerClipId;d.setClipUrl(P,me,o),d.setClipUrl(z,me,o)}function ve(Ee){m(Ee).attr("d","M0,0Z")}function Oe(Ee){return Ee.filter(function(ke){return!ke.gap&&ke.vis})}function Me(Ee){return Ee.filter(function(ke){return ke.vis})}function Te(Ee){return Ee.filter(function(ke){return!ke.gap})}function se(Ee){return Ee.id}function oe(Ee){if(Ee.ids)return se}function he(){return!1}}ee.exports=function(o,a,u,p,c,x){var g,h,y=!c,v=!!c&&c.duration>0,m=i(o,a,u);(g=p.selectAll("g.trace").data(m,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),g.order(),function(_,f,S){f.each(function(w){var E=T(M.select(this),"g","fills");d.setClipUrl(E,S.layerClipId,_);var L=w[0].trace,C=[];L._ownfill&&C.push("_ownFill"),L._nexttrace&&C.push("_nextFill");var P=E.selectAll("g").data(C,b);P.enter().append("g"),P.exit().each(function(z){L[z]=null}).remove(),P.order().each(function(z){L[z]=T(M.select(this),"path","js-fill")})})}(o,g,a),v?(x&&(h=x()),M.transition().duration(c.duration).ease(c.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).each(function(){p.selectAll("g.trace").each(function(_,f){n(o,f,a,_,m,this,c)})})):g.each(function(_,f){n(o,f,a,_,m,this,c)}),y&&g.exit().remove(),p.selectAll("path:not([d])").remove()}},98002:function(ee,D,e){var M=e(34098);ee.exports=function(k,l){var T,b,d,s,t=k.cd,i=k.xaxis,r=k.yaxis,n=[],o=t[0].trace;if(!M.hasMarkers(o)&&!M.hasText(o))return[];if(l===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)b=t[T],d=i.c2p(b.x),s=r.c2p(b.y),b.i!==null&&l.contains([d,s],!1,T,k)?(n.push({pointNumber:b.i,x:i.c2d(b.x),y:r.c2d(b.y)}),b.selected=1):b.selected=0;return n}},565:function(ee){var D=["orientation","groupnorm","stackgaps"];ee.exports=function(e,M,k,l){var T=k._scatterStackOpts,b=l("stackgroup");if(b){var d=M.xaxis+M.yaxis,s=T[d];s||(s=T[d]={});var t=s[b],i=!1;t?t.traces.push(M):(t=s[b]={traceIndices:[],traces:[M]},i=!0);for(var r={orientation:M.x&&!M.y?"h":"v"},n=0;n<D.length;n++){var o=D[n],a=o+"Found";if(!t[a]){var u=e[o]!==void 0,p=o==="orientation";if((u||i)&&(t[o]=l(o,r[o]),p&&(t.fillDflt=t[o]==="h"?"tonextx":"tonexty"),u&&(t[a]=!0,!i&&(delete t.traces[0][o],p))))for(var c=0;c<t.traces.length-1;c++){var x=t.traces[c];x._input.fill!==x.fill&&(x.fill=t.fillDflt)}}}return t}}},16296:function(ee,D,e){var M=e(39898),k=e(91424),l=e(73972);function T(d,s,t){k.pointStyle(d.selectAll("path.point"),s,t)}function b(d,s,t){k.textPointStyle(d.selectAll("text"),s,t)}ee.exports={style:function(d){var s=M.select(d).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(M.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.text").each(function(t){b(M.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,d),l.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:b,styleOnSelect:function(d,s,t){var i=s[0].trace;i.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),i),k.selectedTextStyle(t.selectAll("text"),i)):(T(t,i,d),b(t,i,d))}}},34098:function(ee,D,e){var M=e(71828);ee.exports={hasLines:function(k){return k.visible&&k.mode&&k.mode.indexOf("lines")!==-1},hasMarkers:function(k){return k.visible&&(k.mode&&k.mode.indexOf("markers")!==-1||k.type==="splom")},hasText:function(k){return k.visible&&k.mode&&k.mode.indexOf("text")!==-1},isBubble:function(k){return M.isPlainObject(k.marker)&&M.isArrayOrTypedArray(k.marker.size)}}},82410:function(ee,D,e){var M=e(71828);ee.exports=function(k,l,T,b,d){d=d||{},b("textposition"),M.coerceFont(b,"textfont",d.font||T.font),d.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},67513:function(ee,D,e){var M=e(71828),k=e(73972);ee.exports=function(l,T,b,d){var s,t=d("x"),i=d("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],b),t){var r=M.minRowLength(t);i?s=Math.min(r,M.minRowLength(i)):(s=r,d("y0"),d("dy"))}else{if(!i)return 0;s=M.minRowLength(i),d("x0"),d("dx")}return T._length=s,s}},44542:function(ee,D,e){var M=e(82196),k=e(50693),l=e(12663).axisHoverFormat,T=e(5386).fF,b=e(5386).si,d=e(9012),s=e(29659),t=e(87381),i=e(1426).extendFlat,r=e(30962).overrideAll,n=e(78607),o=M.line,a=M.marker,u=a.line,p=i({width:o.width,dash:{valType:"enumerated",values:n(s),dflt:"solid"}},k("line")),c=ee.exports=r({x:M.x,y:M.y,z:{valType:"data_array"},text:i({},M.text,{}),texttemplate:b({},{}),hovertext:i({},M.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),mode:i({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:M.connectgaps,line:p,marker:i({symbol:{valType:"enumerated",values:n(t),dflt:"circle",arrayOk:!0},size:i({},a.size,{dflt:8}),sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:i({},a.opacity,{arrayOk:!1}),colorbar:a.colorbar,line:i({width:i({},u.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:i({},M.textposition,{dflt:"top center"}),textfont:{color:M.textfont.color,size:M.textfont.size,family:i({},M.textfont.family,{arrayOk:!1})},opacity:d.opacity,hoverinfo:i({},d.hoverinfo)},"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes"},36563:function(ee,D,e){var M=e(75225),k=e(36922);ee.exports=function(l,T){var b=[{x:!1,y:!1,trace:T,t:{}}];return M(b,T),k(l,T),b}},67336:function(ee,D,e){var M=e(73972);function k(l,T,b,d){if(!T||!T.visible)return null;for(var s=M.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(l.length),i=0;i<l.length;i++){var r=s(+l[i],i);if(d.type==="log"){var n=d.c2l(l[i]),o=l[i]-r[0],a=l[i]+r[1];if(t[i]=[(d.c2l(o,!0)-n)*b,(d.c2l(a,!0)-n)*b],o>0){var u=d.c2l(o);d._lowerLogErrorBound||(d._lowerLogErrorBound=u),d._lowerErrorBound=Math.min(d._lowerLogErrorBound,u)}}else t[i]=[-r[0]*b,r[1]*b]}return t}ee.exports=function(l,T,b){var d=[k(l.x,l.error_x,T[0],b.xaxis),k(l.y,l.error_y,T[1],b.yaxis),k(l.z,l.error_z,T[2],b.zaxis)],s=function(a){for(var u=0;u<a.length;u++)if(a[u])return a[u].length;return 0}(d);if(s===0)return null;for(var t=new Array(s),i=0;i<s;i++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(d[n])for(var o=0;o<2;o++)r[o][n]=d[n][i][o];t[i]=r}return t}},58925:function(ee,D,e){var M=e(9330).gl_line3d,k=e(9330).gl_scatter3d,l=e(9330).gl_error3d,T=e(9330).gl_mesh3d,b=e(9330).delaunay_triangulate,d=e(71828),s=e(78614),t=e(81697).formatColor,i=e(39984),r=e(29659),n=e(87381),o=e(89298),a=e(23469).appendArrayPointValue,u=e(67336);function p(f,S){this.scene=f,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=p.prototype;function x(f){return f==null?0:f.indexOf("left")>-1?-1:f.indexOf("right")>-1?1:0}function g(f){return f==null?0:f.indexOf("top")>-1?-1:f.indexOf("bottom")>-1?1:0}function h(f,S){return S(4*f)}function y(f){return n[f]}function v(f,S,w,E,L){var C=null;if(d.isArrayOrTypedArray(f)){C=[];for(var P=0;P<S;P++)f[P]===void 0?C[P]=E:C[P]=w(f[P],L)}else C=w(f,d.identity);return C}function m(f){if(d.isArrayOrTypedArray(f)){var S=f[0];return d.isArrayOrTypedArray(S)&&(f=S),"rgb("+f.slice(0,3).map(function(w){return Math.round(255*w)})+")"}return null}function _(f){return d.isArrayOrTypedArray(f)?f.length===4&&typeof f[0]=="number"?m(f):f.map(m):null}c.handlePick=function(f){if(f.object&&(f.object===this.linePlot||f.object===this.delaunayMesh||f.object===this.textMarkers||f.object===this.scatterPlot)){var S=f.index=f.data.index;return f.object.highlight&&f.object.highlight(null),this.scatterPlot&&(f.object=this.scatterPlot,this.scatterPlot.highlight(f.data)),f.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(f.textLabel=this.textLabels[S]):f.textLabel=this.textLabels),f.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},c.update=function(f){var S,w,E,L,C=this.scene.glplot.gl,P=r.solid;this.data=f;var z=function(H,N){var B,V,q,te,K,J,Y=[],W=H.fullSceneLayout,Q=H.dataScale,ne=W.xaxis,re=W.yaxis,ae=W.zaxis,ue=N.marker,pe=N.line,ge=N.x||[],_e=N.y||[],me=N.z||[],ve=ge.length,Oe=N.xcalendar,Me=N.ycalendar,Te=N.zcalendar;for(K=0;K<ve;K++)B=ne.d2l(ge[K],0,Oe)*Q[0],V=re.d2l(_e[K],0,Me)*Q[1],q=ae.d2l(me[K],0,Te)*Q[2],Y[K]=[B,V,q];if(Array.isArray(N.text))J=N.text;else if(N.text!==void 0)for(J=new Array(ve),K=0;K<ve;K++)J[K]=N.text;function se(He,Ge){var Je=W[He];return o.tickText(Je,Je.d2l(Ge),!0).text}var oe=N.texttemplate;if(oe){var he=H.fullLayout._d3locale,Ee=Array.isArray(oe),ke=Ee?Math.min(oe.length,ve):ve,be=Ee?function(He){return oe[He]}:function(){return oe};for(J=new Array(ke),K=0;K<ke;K++){var Ie={x:ge[K],y:_e[K],z:me[K]},Fe={xLabel:se("xaxis",ge[K]),yLabel:se("yaxis",_e[K]),zLabel:se("zaxis",me[K])},ce={};a(ce,N,K);var we=N._meta||{};J[K]=d.texttemplateString(be(K),Fe,he,ce,Ie,we)}}if(te={position:Y,mode:N.mode,text:J},"line"in N&&(te.lineColor=t(pe,1,ve),te.lineWidth=pe.width,te.lineDashes=pe.dash),"marker"in N){var ye=i(N);te.scatterColor=t(ue,1,ve),te.scatterSize=v(ue.size,ve,h,20,ye),te.scatterMarker=v(ue.symbol,ve,y,""),te.scatterLineWidth=ue.line.width,te.scatterLineColor=t(ue.line,1,ve),te.scatterAngle=0}"textposition"in N&&(te.textOffset=function(He){var Ge=[0,0];if(Array.isArray(He))for(var Je=0;Je<He.length;Je++)Ge[Je]=[0,0],He[Je]&&(Ge[Je][0]=x(He[Je]),Ge[Je][1]=g(He[Je]));else Ge[0]=x(He),Ge[1]=g(He);return Ge}(N.textposition),te.textColor=t(N.textfont,1,ve),te.textSize=v(N.textfont.size,ve,d.identity,12),te.textFont=N.textfont.family,te.textAngle=0);var Ce=["x","y","z"];for(te.project=[!1,!1,!1],te.projectScale=[1,1,1],te.projectOpacity=[1,1,1],K=0;K<3;++K){var Re=N.projection[Ce[K]];(te.project[K]=Re.show)&&(te.projectOpacity[K]=Re.opacity,te.projectScale[K]=Re.scale)}te.errorBounds=u(N,Q,W);var ze=function(He){for(var Ge=[0,0,0],Je=[[0,0,0],[0,0,0],[0,0,0]],ot=[1,1,1],Qe=0;Qe<3;Qe++){var vt=He[Qe];vt&&vt.copy_zstyle!==!1&&He[2].visible!==!1&&(vt=He[2]),vt&&vt.visible&&(Ge[Qe]=vt.width/2,Je[Qe]=s(vt.color),ot[Qe]=vt.thickness)}return{capSize:Ge,color:Je,lineWidth:ot}}([N.error_x,N.error_y,N.error_z]);return te.errorColor=ze.color,te.errorLineWidth=ze.lineWidth,te.errorCapSize=ze.capSize,te.delaunayAxis=N.surfaceaxis,te.delaunayColor=s(N.surfacecolor),te}(this.scene,f);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in r&&(P=r[z.lineDashes]),this.color=_(z.scatterColor)||_(z.lineColor),this.dataPoints=z.position,S={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:f.opacity,connectGaps:f.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=M(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var G=f.opacity;if(f.marker&&f.marker.opacity!==void 0&&(G*=f.marker.opacity),w={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:G,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(w):(this.scatterPlot=k(w),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:f.opacity},this.textLabels=f.hovertext||f.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=k(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:f.opacity},this.errorBars?z.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=l(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var O=function(H,N,B){var V,q=(B+1)%3,te=(B+2)%3,K=[],J=[];for(V=0;V<H.length;++V){var Y=H[V];!isNaN(Y[q])&&isFinite(Y[q])&&!isNaN(Y[te])&&isFinite(Y[te])&&(K.push([Y[q],Y[te]]),J.push(V))}var W=b(K);for(V=0;V<W.length;++V)for(var Q=W[V],ne=0;ne<Q.length;++ne)Q[ne]=J[Q[ne]];return{positions:H,cells:W,meshColor:N}}(z.position,z.delaunayColor,z.delaunayAxis);O.opacity=f.opacity,this.delaunayMesh?this.delaunayMesh.update(O):(O.gl=C,this.delaunayMesh=T(O),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ee.exports=function(f,S){var w=new p(f,S.uid);return w.update(S),w}},21428:function(ee,D,e){var M=e(73972),k=e(71828),l=e(34098),T=e(49508),b=e(11058),d=e(82410),s=e(44542);ee.exports=function(t,i,r,n){function o(y,v){return k.coerce(t,i,s,y,v)}var a=function(y,v,m,_){var f=0,S=m("x"),w=m("y"),E=m("z");return M.getComponentMethod("calendars","handleTraceDefaults")(y,v,["x","y","z"],_),S&&w&&E&&(f=Math.min(S.length,w.length,E.length),v._length=v._xlength=v._ylength=v._zlength=f),f}(t,i,o,n);if(a){o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),o("mode"),l.hasLines(i)&&(o("connectgaps"),b(t,i,r,n,o)),l.hasMarkers(i)&&T(t,i,r,n,o,{noSelect:!0,noAngle:!0}),l.hasText(i)&&(o("texttemplate"),d(t,i,n,o,{noSelect:!0}));var u=(i.line||{}).color,p=(i.marker||{}).color;o("surfaceaxis")>=0&&o("surfacecolor",u||p);for(var c=["x","y","z"],x=0;x<3;++x){var g="projection."+c[x];o(g+".show")&&(o(g+".opacity"),o(g+".scale"))}var h=M.getComponentMethod("errorbars","supplyDefaults");h(t,i,u||p||r,{axis:"z"}),h(t,i,u||p||r,{axis:"y",inherit:"z"}),h(t,i,u||p||r,{axis:"x",inherit:"z"})}else i.visible=!1}},13551:function(ee,D,e){ee.exports={plot:e(58925),attributes:e(44542),markerSymbols:e(87381),supplyDefaults:e(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(36563),moduleType:"trace",name:"scatter3d",basePlotModule:e(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(ee,D,e){var M=e(82196),k=e(9012),l=e(5386).fF,T=e(5386).si,b=e(50693),d=e(1426).extendFlat,s=M.marker,t=M.line,i=s.line;ee.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:d({},M.mode,{dflt:"markers"}),text:d({},M.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:d({},M.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:d({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:M.connectgaps,fill:d({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:d({symbol:s.symbol,opacity:s.opacity,maxdisplayed:s.maxdisplayed,angle:s.angle,angleref:s.angleref,standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,line:d({width:i.width,editType:"calc"},b("marker.line")),gradient:s.gradient,editType:"calc"},b("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:d({},k.hoverinfo,{flags:["a","b","text","name"]}),hoveron:M.hoveron,hovertemplate:l()}},34618:function(ee,D,e){var M=e(92770),k=e(36922),l=e(75225),T=e(66279),b=e(47761).calcMarkerSize,d=e(22882);ee.exports=function(s,t){var i=t._carpetTrace=d(s,t);if(i&&i.visible&&i.visible!=="legendonly"){var r;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var n,o,a=t._length,u=new Array(a),p=!1;for(r=0;r<a;r++)if(n=t.a[r],o=t.b[r],M(n)&&M(o)){var c=i.ab2xy(+n,+o,!0),x=i.isVisible(+n,+o);x||(p=!0),u[r]={x:c[0],y:c[1],a:n,b:o,vis:x}}else u[r]={x:!1,y:!1};return t._needsCull=p,u[0].carpet=i,u[0].trace=t,b(t,a),k(s,t),l(u,t),T(u,t),u}}},98965:function(ee,D,e){var M=e(71828),k=e(47581),l=e(34098),T=e(49508),b=e(11058),d=e(94039),s=e(82410),t=e(28908),i=e(97001);ee.exports=function(r,n,o,a){function u(h,y){return M.coerce(r,n,i,h,y)}u("carpet"),n.xaxis="x",n.yaxis="y";var p=u("a"),c=u("b"),x=Math.min(p.length,c.length);if(x){n._length=x,u("text"),u("texttemplate"),u("hovertext"),u("mode",x<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(b(r,n,o,a,u,{backoff:!0}),d(r,n,u),u("connectgaps")),l.hasMarkers(n)&&T(r,n,o,a,u,{gradient:!0}),l.hasText(n)&&s(r,n,a,u);var g=[];(l.hasMarkers(n)||l.hasText(n))&&(u("marker.maxdisplayed"),g.push("points")),u("fill"),n.fill!=="none"&&(t(r,n,o,u),l.hasLines(n)||d(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||g.push("fills"),u("hoveron",g.join("+")||"points")!=="fills"&&u("hovertemplate"),M.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},16165:function(ee){ee.exports=function(D,e,M,k,l){var T=k[l];return D.a=T.a,D.b=T.b,D.y=T.y,D}},48953:function(ee){ee.exports=function(D,e){var M={},k=e._carpet,l=k.ab2ij([D.a,D.b]),T=Math.floor(l[0]),b=l[0]-T,d=Math.floor(l[1]),s=l[1]-d,t=k.evalxy([],T,d,b,s);return M.yLabel=t[1].toFixed(3),M}},22931:function(ee,D,e){var M=e(33720),k=e(71828).fillText;ee.exports=function(l,T,b,d){var s=M(l,T,b,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var i=1-t.y0/l.ya._length,r=l.xa._length,n=r*i/2,o=r-n;return t.x0=Math.max(Math.min(t.x0,o),n),t.x1=Math.max(Math.min(t.x1,o),n),s}var a=t.cd[t.index];t.a=a.a,t.b=a.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,p=u._carpet,c=u._module.formatLabels(a,u);t.yLabel=c.yLabel,delete t.text;var x=[];if(!u.hovertemplate){var g=(a.hi||u.hoverinfo).split("+");g.indexOf("all")!==-1&&(g=["a","b","text"]),g.indexOf("a")!==-1&&h(p.aaxis,a.a),g.indexOf("b")!==-1&&h(p.baxis,a.b),x.push("y: "+t.yLabel),g.indexOf("text")!==-1&&k(a,u,x),t.extraText=x.join("<br>")}return s}function h(y,v){var m;m=y.labelprefix&&y.labelprefix.length>0?y.labelprefix.replace(/ = $/,""):y._hovertitle,x.push(m+": "+v.toFixed(3)+y.labelsuffix)}}},46858:function(ee,D,e){ee.exports={attributes:e(97001),supplyDefaults:e(98965),colorbar:e(4898),formatLabels:e(48953),calc:e(34618),plot:e(1913),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(22931),selectPoints:e(98002),eventData:e(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:e(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(ee,D,e){var M=e(32663),k=e(89298),l=e(91424);ee.exports=function(T,b,d,s){var t,i,r,n=d[0][0].carpet,o=k.getFromId(T,n.xaxis||"x"),a=k.getFromId(T,n.yaxis||"y"),u={xaxis:o,yaxis:a,plot:b.plot};for(t=0;t<d.length;t++)(i=d[t][0].trace)._xA=o,i._yA=a;for(M(T,u,d,s),t=0;t<d.length;t++)i=d[t][0].trace,r=s.selectAll("g.trace"+i.uid+" .js-line"),l.setClipUrl(r,d[t][0].carpet._clipPathId,T)}},19316:function(ee,D,e){var M=e(5386).fF,k=e(5386).si,l=e(82196),T=e(9012),b=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=e(30962).overrideAll,i=l.marker,r=l.line,n=i.line;ee.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:s({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:r.color,width:r.width,dash:d},connectgaps:l.connectgaps,marker:s({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:s({},i.angleref,{values:["previous","up","north"]}),standoff:i.standoff,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,colorbar:i.colorbar,line:s({width:n.width},b("marker.line")),gradient:i.gradient},b("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l.fillcolor,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},84622:function(ee,D,e){var M=e(92770),k=e(50606).BADNUM,l=e(36922),T=e(75225),b=e(66279),d=e(71828)._;function s(t){return t&&typeof t=="string"}ee.exports=function(t,i){var r,n=Array.isArray(i.locations),o=n?i.locations.length:i._length,a=new Array(o);r=i.geojson?function(h){return s(h)||M(h)}:s;for(var u=0;u<o;u++){var p=a[u]={};if(n){var c=i.locations[u];p.loc=r(c)?c:null}else{var x=i.lon[u],g=i.lat[u];M(x)&&M(g)?p.lonlat=[+x,+g]:p.lonlat=[k,k]}}return T(a,i),l(t,i),b(a,i),o&&(a[0].t={labels:{lat:d(t,"lat:")+" ",lon:d(t,"lon:")+" "}}),a}},10659:function(ee,D,e){var M=e(71828),k=e(34098),l=e(49508),T=e(11058),b=e(82410),d=e(28908),s=e(19316);ee.exports=function(t,i,r,n){function o(h,y){return M.coerce(t,i,s,h,y)}var a,u=o("locations");if(u&&u.length){var p,c=o("geojson");(typeof c=="string"&&c!==""||M.isPlainObject(c))&&(p="geojson-id"),o("locationmode",p)==="geojson-id"&&o("featureidkey"),a=u.length}else{var x=o("lon")||[],g=o("lat")||[];a=Math.min(x.length,g.length)}a?(i._length=a,o("text"),o("hovertext"),o("hovertemplate"),o("mode"),k.hasLines(i)&&(T(t,i,r,n,o),o("connectgaps")),k.hasMarkers(i)&&l(t,i,r,n,o,{gradient:!0}),k.hasText(i)&&(o("texttemplate"),b(t,i,n,o)),o("fill"),i.fill!=="none"&&d(t,i,r,o),M.coerceSelectionMarkerOpacity(i,o)):i.visible=!1}},84084:function(ee){ee.exports=function(D,e,M,k,l){D.lon=e.lon,D.lat=e.lat,D.location=e.loc?e.loc:null;var T=k[l];return T.fIn&&T.fIn.properties&&(D.properties=T.fIn.properties),D}},82719:function(ee,D,e){var M=e(89298);ee.exports=function(k,l,T){var b={},d=T[l.geo]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=M.tickText(d,d.c2l(s[0]),!0).text,b.latLabel=M.tickText(d,d.c2l(s[1]),!0).text,b}},14977:function(ee,D,e){var M=e(30211),k=e(50606).BADNUM,l=e(34603),T=e(71828).fillText,b=e(19316);ee.exports=function(d,s,t){var i=d.cd,r=i[0].trace,n=d.xa,o=d.ya,a=d.subplot,u=a.projection.isLonLatOverEdges,p=a.project;if(M.getClosest(i,function(m){var _=m.lonlat;if(_[0]===k||u(_))return 1/0;var f=p(_),S=p([s,t]),w=Math.abs(f[0]-S[0]),E=Math.abs(f[1]-S[1]),L=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(w*w+E*E)-L,1-3/L)},d),d.index!==!1){var c=i[d.index],x=c.lonlat,g=[n.c2p(x),o.c2p(x)],h=c.mrc||1;d.x0=g[0]-h,d.x1=g[0]+h,d.y0=g[1]-h,d.y1=g[1]+h,d.loc=c.loc,d.lon=x[0],d.lat=x[1];var y={};y[r.geo]={_subplot:a};var v=r._module.formatLabels(c,r,y);return d.lonLabel=v.lonLabel,d.latLabel=v.latLabel,d.color=l(r,c),d.extraText=function(m,_,f,S){if(!m.hovertemplate){var w=_.hi||m.hoverinfo,E=w==="all"?b.hoverinfo.flags:w.split("+"),L=E.indexOf("location")!==-1&&Array.isArray(m.locations),C=E.indexOf("lon")!==-1,P=E.indexOf("lat")!==-1,z=E.indexOf("text")!==-1,G=[];return L?G.push(_.loc):C&&P?G.push("("+O(f.latLabel)+", "+O(f.lonLabel)+")"):C?G.push(S.lon+O(f.lonLabel)):P&&G.push(S.lat+O(f.latLabel)),z&&T(_,m,G),G.join("<br>")}function O(H){return H+""}}(r,c,d,i[0].t.labels),d.hovertemplate=r.hovertemplate,[d]}}},17988:function(ee,D,e){ee.exports={attributes:e(19316),supplyDefaults:e(10659),colorbar:e(4898),formatLabels:e(82719),calc:e(84622),calcGeoJSON:e(89171).calcGeoJSON,plot:e(89171).plot,style:e(33095),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(14977),eventData:e(84084),selectPoints:e(20548),moduleType:"trace",name:"scattergeo",basePlotModule:e(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(ee,D,e){var M=e(39898),k=e(71828),l=e(90973).getTopojsonFeatures,T=e(18214),b=e(41327),d=e(71739).findExtremes,s=e(50606).BADNUM,t=e(47761).calcMarkerSize,i=e(34098),r=e(33095);ee.exports={calcGeoJSON:function(n,o){var a,u,p=n[0].trace,c=o[p.geo],x=c._subplot,g=p._length;if(Array.isArray(p.locations)){var h=p.locationmode,y=h==="geojson-id"?b.extractTraceFeature(n):l(p,x.topojson);for(a=0;a<g;a++){u=n[a];var v=h==="geojson-id"?u.fOut:b.locationToFeature(h,u.loc,y);u.lonlat=v?v.properties.ct:[s,s]}}var m,_,f={padded:!0};if(c.fitbounds==="geojson"&&p.locationmode==="geojson-id"){var S=b.computeBbox(b.getTraceGeojson(p));m=[S[0],S[2]],_=[S[1],S[3]]}else{for(m=new Array(g),_=new Array(g),a=0;a<g;a++)u=n[a],m[a]=u.lonlat[0],_[a]=u.lonlat[1];f.ppad=t(p,g)}p._extremes.lon=d(c.lonaxis._ax,m,f),p._extremes.lat=d(c.lataxis._ax,_,f)},plot:function(n,o,a){var u=o.layers.frontplot.select(".scatterlayer"),p=k.makeTraceGroups(u,a,"trace scattergeo");function c(x,g){x.lonlat[0]===s&&M.select(g).remove()}p.selectAll("*").remove(),p.each(function(x){var g=M.select(this),h=x[0].trace;if(i.hasLines(h)||h.fill!=="none"){var y=T.calcTraceToLineCoords(x),v=h.fill!=="none"?T.makePolygon(y):T.makeLine(y);g.selectAll("path.js-line").data([{geojson:v,trace:h}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(h)&&g.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(m){c(m,this)}),i.hasText(h)&&g.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(m){c(m,this)}),r(n,x)})}}},20548:function(ee,D,e){var M=e(34098),k=e(50606).BADNUM;ee.exports=function(l,T){var b,d,s,t,i,r=l.cd,n=l.xaxis,o=l.yaxis,a=[],u=r[0].trace;if(!M.hasMarkers(u)&&!M.hasText(u))return[];if(T===!1)for(i=0;i<r.length;i++)r[i].selected=0;else for(i=0;i<r.length;i++)(d=(b=r[i]).lonlat)[0]!==k&&(s=n.c2p(d),t=o.c2p(d),T.contains([s,t],null,i,l)?(a.push({pointNumber:i,lon:d[0],lat:d[1]}),b.selected=1):b.selected=0);return a}},33095:function(ee,D,e){var M=e(39898),k=e(91424),l=e(7901),T=e(16296),b=T.stylePoints,d=T.styleText;ee.exports=function(s,t){t&&function(i,r){var n=r[0].trace,o=r[0].node3;o.style("opacity",r[0].trace.opacity),b(o,n,i),d(o,n,i),o.selectAll("path.js-line").style("fill","none").each(function(a){var u=M.select(this),p=a.trace,c=p.line||{};u.call(l.stroke,c.color).call(k.dashLine,c.dash||"",c.width||0),p.fill!=="none"&&u.call(l.fill,p.fillcolor)})}(s,t)}},42341:function(ee,D,e){var M=e(9012),k=e(82196),l=e(12663).axisHoverFormat,T=e(50693),b=e(78607),d=e(1426).extendFlat,s=e(30962).overrideAll,t=e(78232).DASHES,i=k.line,r=k.marker,n=r.line,o=ee.exports=s({x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:k.text,hovertext:k.hovertext,textposition:k.textposition,textfont:k.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:i.color,width:i.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:b(t),dflt:"solid"}},marker:d({},T("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:d({},T("marker.line"),{width:n.width})}),connectgaps:k.connectgaps,fill:d({},k.fill,{dflt:"none"}),fillcolor:k.fillcolor,selected:{marker:k.selected.marker,textfont:k.selected.textfont},unselected:{marker:k.unselected.marker,textfont:k.unselected.textfont},opacity:M.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=k.hovertemplate,o.texttemplate=k.texttemplate},72156:function(ee,D,e){var M=e(20794);ee.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(42341),supplyDefaults:e(47148),crossTraceDefaults:e(34936),colorbar:e(4898),formatLabels:e(68101),calc:e(45032),hoverPoints:M.hoverPoints,selectPoints:e(58147),meta:{}}},45032:function(ee,D,e){var M=e(88294),k=e(71828),l=e(41675),T=e(71739).findExtremes,b=e(42973),d=e(47761),s=d.calcMarkerSize,t=d.calcAxisExpansion,i=d.setFirstScatter,r=e(36922),n=e(19635),o=e(38967),a=e(50606).BADNUM,u=e(78232).TOO_MANY_POINTS;function p(c,x,g){var h=c._extremes[x._id],y=T(x,g._bnds,{padded:!0});h.min=h.min.concat(y.min),h.max=h.max.concat(y.max)}ee.exports=function(c,x){var g,h=c._fullLayout,y=x._xA=l.getFromId(c,x.xaxis,"x"),v=x._yA=l.getFromId(c,x.yaxis,"y"),m=h._plots[x.xaxis+x.yaxis],_=x._length,f=_>=u,S=2*_,w={},E=y.makeCalcdata(x,"x"),L=v.makeCalcdata(x,"y"),C=b(x,y,"x",E),P=b(x,v,"y",L),z=C.vals,G=P.vals;x._x=z,x._y=G,x.xperiodalignment&&(x._origX=E,x._xStarts=C.starts,x._xEnds=C.ends),x.yperiodalignment&&(x._origY=L,x._yStarts=P.starts,x._yEnds=P.ends);var O=new Array(S),H=new Array(_);for(g=0;g<_;g++)O[2*g]=z[g]===a?NaN:z[g],O[2*g+1]=G[g]===a?NaN:G[g],H[g]=g;if(y.type==="log")for(g=0;g<S;g+=2)O[g]=y.c2l(O[g]);if(v.type==="log")for(g=1;g<S;g+=2)O[g]=v.c2l(O[g]);f&&y.type!=="log"&&v.type!=="log"?w.tree=M(O):w.ids=H,r(c,x);var N,B=function(q,te,K,J,Y,W){var Q=n.style(q,K);if(Q.marker&&(Q.marker.positions=J),Q.line&&J.length>1&&k.extendFlat(Q.line,n.linePositions(q,K,J)),Q.errorX||Q.errorY){var ne=n.errorBarPositions(q,K,J,Y,W);Q.errorX&&k.extendFlat(Q.errorX,ne.x),Q.errorY&&k.extendFlat(Q.errorY,ne.y)}return Q.text&&(k.extendFlat(Q.text,{positions:J},n.textPosition(q,K,Q.text,Q.marker)),k.extendFlat(Q.textSel,{positions:J},n.textPosition(q,K,Q.text,Q.markerSel)),k.extendFlat(Q.textUnsel,{positions:J},n.textPosition(q,K,Q.text,Q.markerUnsel))),Q}(c,0,x,O,z,G),V=o(c,m);return i(h,x),f?B.marker&&(N=B.marker.sizeAvg||Math.max(B.marker.size,3)):N=s(x,_),t(c,x,y,v,z,G,N),B.errorX&&p(x,y,B.errorX),B.errorY&&p(x,v,B.errorY),B.fill&&!V.fill2d&&(V.fill2d=!0),B.marker&&!V.scatter2d&&(V.scatter2d=!0),B.line&&!V.line2d&&(V.line2d=!0),!B.errorX&&!B.errorY||V.error2d||(V.error2d=!0),B.text&&!V.glText&&(V.glText=!0),B.marker&&(B.marker.snap=_),V.lineOptions.push(B.line),V.errorXOptions.push(B.errorX),V.errorYOptions.push(B.errorY),V.fillOptions.push(B.fill),V.markerOptions.push(B.marker),V.markerSelectedOptions.push(B.markerSel),V.markerUnselectedOptions.push(B.markerUnsel),V.textOptions.push(B.text),V.textSelectedOptions.push(B.textSel),V.textUnselectedOptions.push(B.textUnsel),V.selectBatch.push([]),V.unselectBatch.push([]),w._scene=V,w.index=V.count,w.x=z,w.y=G,w.positions=O,V.count++,[{x:!1,y:!1,t:w,trace:x}]}},78232:function(ee){ee.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(ee,D,e){var M=e(92770),k=e(82019),l=e(25075),T=e(73972),b=e(71828),d=e(91424),s=e(41675),t=e(81697).formatColor,i=e(34098),r=e(39984),n=e(68645),o=e(78232),a=e(37822).DESELECTDIM,u={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},p=e(23469).appendArrayPointValue;function c(E,L){var C,P=E._fullLayout,z=L._length,G=L.textfont,O=L.textposition,H=Array.isArray(O)?O:[O],N=G.color,B=G.size,V=G.family,q={},te=E._context.plotGlPixelRatio,K=L.texttemplate;if(K){q.text=[];var J=P._d3locale,Y=Array.isArray(K),W=Y?Math.min(K.length,z):z,Q=Y?function(_e){return K[_e]}:function(){return K};for(C=0;C<W;C++){var ne={i:C},re=L._module.formatLabels(ne,L,P),ae={};p(ae,L,C);var ue=L._meta||{};q.text.push(b.texttemplateString(Q(C),re,J,ae,ne,ue))}}else Array.isArray(L.text)&&L.text.length<z?q.text=L.text.slice():q.text=L.text;if(Array.isArray(q.text))for(C=q.text.length;C<z;C++)q.text[C]="";for(q.opacity=L.opacity,q.font={},q.align=[],q.baseline=[],C=0;C<H.length;C++){var pe=H[C].split(/\s+/);switch(pe[1]){case"left":q.align.push("right");break;case"right":q.align.push("left");break;default:q.align.push(pe[1])}switch(pe[0]){case"top":q.baseline.push("bottom");break;case"bottom":q.baseline.push("top");break;default:q.baseline.push(pe[0])}}if(Array.isArray(N))for(q.color=new Array(z),C=0;C<z;C++)q.color[C]=N[C];else q.color=N;if(b.isArrayOrTypedArray(B)||Array.isArray(V))for(q.font=new Array(z),C=0;C<z;C++){var ge=q.font[C]={};ge.size=(b.isTypedArray(B)?B[C]:Array.isArray(B)?M(B[C])?B[C]:0:B)*te,ge.family=Array.isArray(V)?V[C]:V}else q.font={size:B*te,family:V};return q}function x(E,L){var C,P,z=L._length,G=L.marker,O={},H=b.isArrayOrTypedArray(G.symbol),N=b.isArrayOrTypedArray(G.angle),B=b.isArrayOrTypedArray(G.color),V=b.isArrayOrTypedArray(G.line.color),q=b.isArrayOrTypedArray(G.opacity),te=b.isArrayOrTypedArray(G.size),K=b.isArrayOrTypedArray(G.line.width);if(H||(P=n.isOpenSymbol(G.symbol)),H||B||V||q||N){O.symbols=new Array(z),O.angles=new Array(z),O.colors=new Array(z),O.borderColors=new Array(z);var J=G.symbol,Y=G.angle,W=t(G,G.opacity,z),Q=t(G.line,G.opacity,z);if(!Array.isArray(Q[0])){var ne=Q;for(Q=Array(z),C=0;C<z;C++)Q[C]=ne}if(!Array.isArray(W[0])){var re=W;for(W=Array(z),C=0;C<z;C++)W[C]=re}if(!Array.isArray(J)){var ae=J;for(J=Array(z),C=0;C<z;C++)J[C]=ae}if(!Array.isArray(Y)){var ue=Y;for(Y=Array(z),C=0;C<z;C++)Y[C]=ue}for(O.symbols=J,O.angles=Y,O.colors=W,O.borderColors=Q,C=0;C<z;C++)H&&(P=n.isOpenSymbol(G.symbol[C])),P&&(Q[C]=W[C].slice(),W[C]=W[C].slice(),W[C][3]=0);for(O.opacity=L.opacity,O.markers=new Array(z),C=0;C<z;C++)O.markers[C]=w({mx:O.symbols[C],ma:O.angles[C]},L)}else P?(O.color=l(G.color,"uint8"),O.color[3]=0,O.borderColor=l(G.color,"uint8")):(O.color=l(G.color,"uint8"),O.borderColor=l(G.line.color,"uint8")),O.opacity=L.opacity*G.opacity,O.marker=w({mx:G.symbol,ma:G.angle},L);var pe,ge=r(L,1);if(te||K){var _e,me=O.sizes=new Array(z),ve=O.borderSizes=new Array(z),Oe=0;if(te){for(C=0;C<z;C++)me[C]=ge(G.size[C]),Oe+=me[C];_e=Oe/z}else for(pe=ge(G.size),C=0;C<z;C++)me[C]=pe;if(K)for(C=0;C<z;C++)ve[C]=G.line.width[C];else for(pe=G.line.width,C=0;C<z;C++)ve[C]=pe;O.sizeAvg=_e}else O.size=ge(G&&G.size||10),O.borderSizes=ge(G.line.width);return O}function g(E,L,C){var P=L.marker,z={};return C&&(C.marker&&C.marker.symbol?z=x(0,b.extendFlat({},P,C.marker)):C.marker&&(C.marker.size&&(z.size=C.marker.size),C.marker.color&&(z.colors=C.marker.color),C.marker.opacity!==void 0&&(z.opacity=C.marker.opacity))),z}function h(E,L,C){var P={};if(!C)return P;if(C.textfont){var z={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:b.extendFlat({},L.textfont)};C.textfont&&b.extendFlat(z.textfont,C.textfont),P=c(E,z)}return P}function y(E,L,C){var P={capSize:2*L.width*C,lineWidth:L.thickness*C,color:L.color};return L.copy_ystyle&&(P=E.error_y),P}var v=o.SYMBOL_SDF_SIZE,m=o.SYMBOL_SIZE,_=o.SYMBOL_STROKE,f={},S=d.symbolFuncs[0](.05*m);function w(E,L){var C,P,z=E.mx;if(z==="circle")return null;var G=d.symbolNumber(z),O=d.symbolFuncs[G%100],H=!!d.symbolNoDot[G%100],N=!!d.symbolNoFill[G%100],B=n.isDotSymbol(z);if(E.ma&&(z+="_"+E.ma),f[z])return f[z];var V=d.getMarkerAngle(E,L);return C=B&&!H?O(1.1*m,V)+S:O(m,V),P=k(C,{w:v,h:v,viewBox:[-m,-m,m,m],stroke:N?_:-_}),f[z]=P,P||null}ee.exports={style:function(E,L){var C,P={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=E._context.plotGlPixelRatio;if(L.visible!==!0)return P;if(i.hasText(L)&&(P.text=c(E,L),P.textSel=h(E,L,L.selected),P.textUnsel=h(E,L,L.unselected)),i.hasMarkers(L)&&(P.marker=x(0,L),P.markerSel=g(0,L,L.selected),P.markerUnsel=g(0,L,L.unselected),!L.unselected&&b.isArrayOrTypedArray(L.marker.opacity))){var G=L.marker.opacity;for(P.markerUnsel.opacity=new Array(G.length),C=0;C<G.length;C++)P.markerUnsel.opacity[C]=a*G[C]}if(i.hasLines(L)){P.line={overlay:!0,thickness:L.line.width*z,color:L.line.color,opacity:L.opacity};var O=(o.DASHES[L.line.dash]||[1]).slice();for(C=0;C<O.length;++C)O[C]*=L.line.width*z;P.line.dashes=O}return L.error_x&&L.error_x.visible&&(P.errorX=y(L,L.error_x,z)),L.error_y&&L.error_y.visible&&(P.errorY=y(L,L.error_y,z)),L.fill&&L.fill!=="none"&&(P.fill={closed:!0,fill:L.fillcolor,thickness:0}),P},markerStyle:x,markerSelection:g,linePositions:function(E,L,C){var P,z,G=C.length,O=G/2;if(i.hasLines(L)&&O)if(L.line.shape==="hv"){for(P=[],z=0;z<O-1;z++)isNaN(C[2*z])||isNaN(C[2*z+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*z],C[2*z+1]),isNaN(C[2*z+2])||isNaN(C[2*z+3])?P.push(NaN,NaN):P.push(C[2*z+2],C[2*z+1]));P.push(C[G-2],C[G-1])}else if(L.line.shape==="hvh"){for(P=[],z=0;z<O-1;z++)if(isNaN(C[2*z])||isNaN(C[2*z+1])||isNaN(C[2*z+2])||isNaN(C[2*z+3]))isNaN(C[2*z])||isNaN(C[2*z+1])?P.push(NaN,NaN):P.push(C[2*z],C[2*z+1]),P.push(NaN,NaN);else{var H=(C[2*z]+C[2*z+2])/2;P.push(C[2*z],C[2*z+1],H,C[2*z+1],H,C[2*z+3])}P.push(C[G-2],C[G-1])}else if(L.line.shape==="vhv"){for(P=[],z=0;z<O-1;z++)if(isNaN(C[2*z])||isNaN(C[2*z+1])||isNaN(C[2*z+2])||isNaN(C[2*z+3]))isNaN(C[2*z])||isNaN(C[2*z+1])?P.push(NaN,NaN):P.push(C[2*z],C[2*z+1]),P.push(NaN,NaN);else{var N=(C[2*z+1]+C[2*z+3])/2;P.push(C[2*z],C[2*z+1],C[2*z],N,C[2*z+2],N)}P.push(C[G-2],C[G-1])}else if(L.line.shape==="vh"){for(P=[],z=0;z<O-1;z++)isNaN(C[2*z])||isNaN(C[2*z+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*z],C[2*z+1]),isNaN(C[2*z+2])||isNaN(C[2*z+3])?P.push(NaN,NaN):P.push(C[2*z],C[2*z+3]));P.push(C[G-2],C[G-1])}else P=C;var B=!1;for(z=0;z<P.length;z++)if(isNaN(P[z])){B=!0;break}var V=B||P.length>o.TOO_MANY_POINTS||i.hasMarkers(L)?"rect":"round";if(B&&L.connectgaps){var q=P[0],te=P[1];for(z=0;z<P.length;z+=2)isNaN(P[z])||isNaN(P[z+1])?(P[z]=q,P[z+1]=te):(q=P[z],te=P[z+1])}return{join:V,positions:P}},errorBarPositions:function(E,L,C,P,z){var G=T.getComponentMethod("errorbars","makeComputeError"),O=s.getFromId(E,L.xaxis,"x"),H=s.getFromId(E,L.yaxis,"y"),N=C.length/2,B={};function V(q,te){var K=te._id.charAt(0),J=L["error_"+K];if(J&&J.visible&&(te.type==="linear"||te.type==="log")){for(var Y=G(J),W={x:0,y:1}[K],Q={x:[0,1,2,3],y:[2,3,0,1]}[K],ne=new Float64Array(4*N),re=1/0,ae=-1/0,ue=0,pe=0;ue<N;ue++,pe+=4){var ge=q[ue];if(M(ge)){var _e=C[2*ue+W],me=Y(ge,ue),ve=me[0],Oe=me[1];if(M(ve)&&M(Oe)){var Me=ge-ve,Te=ge+Oe;ne[pe+Q[0]]=_e-te.c2l(Me),ne[pe+Q[1]]=te.c2l(Te)-_e,ne[pe+Q[2]]=0,ne[pe+Q[3]]=0,re=Math.min(re,ge-ve),ae=Math.max(ae,ge+Oe)}}}B[K]={positions:C,errors:ne,_bnds:[re,ae]}}}return V(P,O),V(z,H),B},textPosition:function(E,L,C,P){var z,G=L._length,O={};if(i.hasMarkers(L)){var H=C.font,N=C.align,B=C.baseline;for(O.offset=new Array(G),z=0;z<G;z++){var V=P.sizes?P.sizes[z]:P.size,q=Array.isArray(H)?H[z].size:H.size,te=Array.isArray(N)?N.length>1?N[z]:N[0]:N,K=Array.isArray(B)?B.length>1?B[z]:B[0]:B,J=u[te],Y=u[K],W=V?V/.8+1:0,Q=-Y*W-.5*Y;O.offset[z]=[J*W/q,Q/q]}}return O}}},47148:function(ee,D,e){var M=e(71828),k=e(73972),l=e(68645),T=e(42341),b=e(47581),d=e(34098),s=e(67513),t=e(73927),i=e(49508),r=e(11058),n=e(28908),o=e(82410);ee.exports=function(a,u,p,c){function x(S,w){return M.coerce(a,u,T,S,w)}var g=!!a.marker&&l.isOpenSymbol(a.marker.symbol),h=d.isBubble(a),y=s(a,u,c,x);if(y){t(a,u,c,x),x("xhoverformat"),x("yhoverformat");var v=y<b.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",v),d.hasLines(u)&&(x("connectgaps"),r(a,u,p,c,x),x("line.shape")),d.hasMarkers(u)&&(i(a,u,p,c,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",g||h?1:0)),d.hasText(u)&&(x("texttemplate"),o(a,u,c,x));var m=(u.line||{}).color,_=(u.marker||{}).color;x("fill"),u.fill!=="none"&&n(a,u,p,x);var f=k.getComponentMethod("errorbars","supplyDefaults");f(a,u,m||_||p,{axis:"y"}),f(a,u,m||_||p,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1}},5345:function(ee,D,e){var M=e(71828),k=e(7901),l=e(37822).DESELECTDIM;ee.exports={styleTextSelection:function(T){var b,d,s=T[0],t=s.trace,i=s.t,r=i._scene,n=i.index,o=r.selectBatch[n],a=r.unselectBatch[n],u=r.textOptions[n],p=r.textSelectedOptions[n]||{},c=r.textUnselectedOptions[n]||{},x=M.extendFlat({},u);if(o.length||a.length){var g=p.color,h=c.color,y=u.color,v=Array.isArray(y);for(x.color=new Array(t._length),b=0;b<o.length;b++)d=o[b],x.color[d]=g||(v?y[d]:y);for(b=0;b<a.length;b++){d=a[b];var m=v?y[d]:y;x.color[d]=h||(g?m:k.addOpacity(m,l))}}r.glText[n].update(x)}}},68101:function(ee,D,e){var M=e(8225);ee.exports=function(k,l,T){var b=k.i;return"x"in k||(k.x=l._x[b]),"y"in k||(k.y=l._y[b]),M(k,l,T)}},68645:function(ee,D,e){var M=e(78232);D.isOpenSymbol=function(k){return typeof k=="string"?M.OPEN_RE.test(k):k%200>100},D.isDotSymbol=function(k){return typeof k=="string"?M.DOT_RE.test(k):k>200}},20794:function(ee,D,e){var M=e(73972),k=e(71828),l=e(34603);function T(b,d,s,t){var i=b.xa,r=b.ya,n=b.distance,o=b.dxy,a=b.index,u={pointNumber:a,x:d[a],y:s[a]};u.tx=Array.isArray(t.text)?t.text[a]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[a]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[a]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[a]:t.textposition;var p=t.textfont;p&&(u.ts=k.isArrayOrTypedArray(p.size)?p.size[a]:p.size,u.tc=Array.isArray(p.color)?p.color[a]:p.color,u.tf=Array.isArray(p.family)?p.family[a]:p.family);var c=t.marker;c&&(u.ms=k.isArrayOrTypedArray(c.size)?c.size[a]:c.size,u.mo=k.isArrayOrTypedArray(c.opacity)?c.opacity[a]:c.opacity,u.mx=k.isArrayOrTypedArray(c.symbol)?c.symbol[a]:c.symbol,u.ma=k.isArrayOrTypedArray(c.angle)?c.angle[a]:c.angle,u.mc=k.isArrayOrTypedArray(c.color)?c.color[a]:c.color);var x=c&&c.line;x&&(u.mlc=Array.isArray(x.color)?x.color[a]:x.color,u.mlw=k.isArrayOrTypedArray(x.width)?x.width[a]:x.width);var g=c&&c.gradient;g&&g.type!=="none"&&(u.mgt=Array.isArray(g.type)?g.type[a]:g.type,u.mgc=Array.isArray(g.color)?g.color[a]:g.color);var h=i.c2p(u.x,!0),y=r.c2p(u.y,!0),v=u.mrc||1,m=t.hoverlabel;m&&(u.hbg=Array.isArray(m.bgcolor)?m.bgcolor[a]:m.bgcolor,u.hbc=Array.isArray(m.bordercolor)?m.bordercolor[a]:m.bordercolor,u.hts=k.isArrayOrTypedArray(m.font.size)?m.font.size[a]:m.font.size,u.htc=Array.isArray(m.font.color)?m.font.color[a]:m.font.color,u.htf=Array.isArray(m.font.family)?m.font.family[a]:m.font.family,u.hnl=k.isArrayOrTypedArray(m.namelength)?m.namelength[a]:m.namelength);var _=t.hoverinfo;_&&(u.hi=Array.isArray(_)?_[a]:_);var f=t.hovertemplate;f&&(u.ht=Array.isArray(f)?f[a]:f);var S={};S[b.index]=u;var w=t._origX,E=t._origY,L=k.extendFlat({},b,{color:l(t,u),x0:h-v,x1:h+v,xLabelVal:w?w[a]:u.x,y0:y-v,y1:y+v,yLabelVal:E?E[a]:u.y,cd:S,distance:n,spikeDistance:o,hovertemplate:u.ht});return u.htx?L.text=u.htx:u.tx?L.text=u.tx:t.text&&(L.text=t.text),k.fillText(u,t,L),M.getComponentMethod("errorbars","hoverInfo")(u,t,L),L}ee.exports={hoverPoints:function(b,d,s,t){var i,r,n,o,a,u,p,c,x,g,h=b.cd,y=h[0].t,v=h[0].trace,m=b.xa,_=b.ya,f=y.x,S=y.y,w=m.c2p(d),E=_.c2p(s),L=b.distance;if(y.tree){var C=m.p2c(w-L),P=m.p2c(w+L),z=_.p2c(E-L),G=_.p2c(E+L);i=t==="x"?y.tree.range(Math.min(C,P),Math.min(_._rl[0],_._rl[1]),Math.max(C,P),Math.max(_._rl[0],_._rl[1])):y.tree.range(Math.min(C,P),Math.min(z,G),Math.max(C,P),Math.max(z,G))}else i=y.ids;var O=L;if(t==="x"){var H=!!v.xperiodalignment,N=!!v.yperiodalignment;for(u=0;u<i.length;u++){if(o=f[r=i[u]],p=Math.abs(m.c2p(o)-w),H){var B=m.c2p(v._xStarts[r]),V=m.c2p(v._xEnds[r]);p=w>=Math.min(B,V)&&w<=Math.max(B,V)?0:1/0}if(p<O){if(O=p,a=S[r],c=_.c2p(a)-E,N){var q=_.c2p(v._yStarts[r]),te=_.c2p(v._yEnds[r]);c=E>=Math.min(q,te)&&E<=Math.max(q,te)?0:1/0}g=Math.sqrt(p*p+c*c),n=i[u]}}}else for(u=i.length-1;u>-1;u--)o=f[r=i[u]],a=S[r],p=m.c2p(o)-w,c=_.c2p(a)-E,(x=Math.sqrt(p*p+c*c))<O&&(O=g=x,n=r);return b.index=n,b.distance=O,b.dxy=g,n===void 0?[b]:[T(b,f,S,v)]},calcHover:T}},68868:function(ee,D,e){var M=e(72156);M.plot=e(26787),ee.exports=M},26787:function(ee,D,e){var M=e(11870),k=e(46075),l=e(3593),T=e(42505),b=e(71828),d=e(64505).selectMode,s=e(79749),t=e(34098),i=e(68687),r=e(5345).styleTextSelection,n={};function o(a,u,p,c){var x=a._size,g=a.width*c,h=a.height*c,y=x.l*c,v=x.b*c,m=x.r*c,_=x.t*c,f=x.w*c,S=x.h*c;return[y+u.domain[0]*f,v+p.domain[0]*S,g-m-(1-u.domain[1])*f,h-_-(1-p.domain[1])*S]}(ee.exports=function(a,u,p){if(p.length){var c,x,g=a._fullLayout,h=u._scene,y=u.xaxis,v=u.yaxis;if(h)if(s(a,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var m=h.count,_=g._glcanvas.data()[0].regl;if(i(a,u,p),h.dirty){if(h.error2d===!0&&(h.error2d=l(_)),h.line2d===!0&&(h.line2d=k(_)),h.scatter2d===!0&&(h.scatter2d=M(_)),h.fill2d===!0&&(h.fill2d=k(_)),h.glText===!0)for(h.glText=new Array(m),c=0;c<m;c++)h.glText[c]=new T(_);if(h.glText){if(m>h.glText.length){var f=m-h.glText.length;for(c=0;c<f;c++)h.glText.push(new T(_))}else if(m<h.glText.length){var S=h.glText.length-m;h.glText.splice(m,S).forEach(function(ne){ne.destroy()})}for(c=0;c<m;c++)h.glText[c].update(h.textOptions[c])}if(h.line2d&&(h.line2d.update(h.lineOptions),h.lineOptions=h.lineOptions.map(function(ne){if(ne&&ne.positions){for(var re=ne.positions,ae=0;ae<re.length&&(isNaN(re[ae])||isNaN(re[ae+1]));)ae+=2;for(var ue=re.length-2;ue>ae&&(isNaN(re[ue])||isNaN(re[ue+1]));)ue-=2;ne.positions=re.slice(ae,ue+2)}return ne}),h.line2d.update(h.lineOptions)),h.error2d){var w=(h.errorXOptions||[]).concat(h.errorYOptions||[]);h.error2d.update(w)}h.scatter2d&&h.scatter2d.update(h.markerOptions),h.fillOrder=b.repeat(null,m),h.fill2d&&(h.fillOptions=h.fillOptions.map(function(ne,re){var ae=p[re];if(ne&&ae&&ae[0]&&ae[0].trace){var ue,pe,ge=ae[0],_e=ge.trace,me=ge.t,ve=h.lineOptions[re],Oe=[];_e._ownfill&&Oe.push(re),_e._nexttrace&&Oe.push(re+1),Oe.length&&(h.fillOrder[re]=Oe);var Me,Te,se=[],oe=ve&&ve.positions||me.positions;if(_e.fill==="tozeroy"){for(Me=0;Me<oe.length&&isNaN(oe[Me+1]);)Me+=2;for(Te=oe.length-2;Te>Me&&isNaN(oe[Te+1]);)Te-=2;oe[Me+1]!==0&&(se=[oe[Me],0]),se=se.concat(oe.slice(Me,Te+2)),oe[Te+1]!==0&&(se=se.concat([oe[Te],0]))}else if(_e.fill==="tozerox"){for(Me=0;Me<oe.length&&isNaN(oe[Me]);)Me+=2;for(Te=oe.length-2;Te>Me&&isNaN(oe[Te]);)Te-=2;oe[Me]!==0&&(se=[0,oe[Me+1]]),se=se.concat(oe.slice(Me,Te+2)),oe[Te]!==0&&(se=se.concat([0,oe[Te+1]]))}else if(_e.fill==="toself"||_e.fill==="tonext"){for(se=[],ue=0,ne.splitNull=!0,pe=0;pe<oe.length;pe+=2)(isNaN(oe[pe])||isNaN(oe[pe+1]))&&((se=se.concat(oe.slice(ue,pe))).push(oe[ue],oe[ue+1]),se.push(null,null),ue=pe+2);se=se.concat(oe.slice(ue)),ue&&se.push(oe[ue],oe[ue+1])}else{var he=_e._nexttrace;if(he){var Ee=h.lineOptions[re+1];if(Ee){var ke=Ee.positions;if(_e.fill==="tonexty"){for(se=oe.slice(),re=Math.floor(ke.length/2);re--;){var be=ke[2*re],Ie=ke[2*re+1];isNaN(be)||isNaN(Ie)||se.push(be,Ie)}ne.fill=he.fillcolor}}}}if(_e._prevtrace&&_e._prevtrace.fill==="tonext"){var Fe=h.lineOptions[re-1].positions,ce=se.length/2,we=[ue=ce];for(pe=0;pe<Fe.length;pe+=2)(isNaN(Fe[pe])||isNaN(Fe[pe+1]))&&(we.push(pe/2+ce+1),ue=pe+2);se=se.concat(Fe),ne.hole=we}return ne.fillmode=_e.fill,ne.opacity=_e.opacity,ne.positions=se,ne}}),h.fill2d.update(h.fillOptions))}var E=g.dragmode,L=d(E),C=g.clickmode.indexOf("select")>-1;for(c=0;c<m;c++){var P=p[c][0],z=P.trace,G=P.t,O=G.index,H=z._length,N=G.x,B=G.y;if(z.selectedpoints||L||C){if(L||(L=!0),z.selectedpoints){var V=h.selectBatch[O]=b.selIndices2selPoints(z),q={};for(x=0;x<V.length;x++)q[V[x]]=1;var te=[];for(x=0;x<H;x++)q[x]||te.push(x);h.unselectBatch[O]=te}var K=G.xpx=new Array(H),J=G.ypx=new Array(H);for(x=0;x<H;x++)K[x]=y.c2p(N[x]),J[x]=v.c2p(B[x])}else G.xpx=G.ypx=null}if(L){if(h.select2d||(h.select2d=M(g._glcanvas.data()[1].regl)),h.scatter2d){var Y=new Array(m);for(c=0;c<m;c++)Y[c]=h.selectBatch[c].length||h.unselectBatch[c].length?h.markerUnselectedOptions[c]:{};h.scatter2d.update(Y)}h.select2d&&(h.select2d.update(h.markerOptions),h.select2d.update(h.markerSelectedOptions)),h.glText&&p.forEach(function(ne){var re=((ne||[])[0]||{}).trace||{};t.hasText(re)&&r(ne)})}else h.scatter2d&&h.scatter2d.update(h.markerOptions);var W={viewport:o(g,y,v,a._context.plotGlPixelRatio),range:[(y._rl||y.range)[0],(v._rl||v.range)[0],(y._rl||y.range)[1],(v._rl||v.range)[1]]},Q=b.repeat(W,h.count);h.fill2d&&h.fill2d.update(Q),h.line2d&&h.line2d.update(Q),h.error2d&&h.error2d.update(Q.concat(Q)),h.scatter2d&&h.scatter2d.update(Q),h.select2d&&h.select2d.update(Q),h.glText&&h.glText.forEach(function(ne){ne.update(W)})}else h.init()}}).reglPrecompiled=n},38967:function(ee,D,e){var M=e(71828);ee.exports=function(k,l){var T=l._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},d={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return l._scene||((T=l._scene={}).init=function(){M.extendFlat(T,d,b)},T.init(),T.update=function(s){var t=M.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var i=0;i<T.count;i++)T.glText[i].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,i=T.error2d,r=T.line2d,n=T.scatter2d,o=T.glText,a=T.select2d,u=T.selectBatch,p=T.unselectBatch,c=0;c<s;c++){if(t&&T.fillOrder[c]&&t.draw(T.fillOrder[c]),r&&T.lineOptions[c]&&r.draw(c),i&&(T.errorXOptions[c]&&i.draw(c),T.errorYOptions[c]&&i.draw(c+s)),n&&T.markerOptions[c])if(p[c].length){var x=M.repeat([],T.count);x[c]=p[c],n.draw(x)}else u[c].length||n.draw(c);o[c]&&T.textOptions[c]&&o[c].render()}a&&a.draw(u),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,l._scene=null}),T.dirty||M.extendFlat(T,b),T}},58147:function(ee,D,e){var M=e(34098),k=e(5345).styleTextSelection;ee.exports=function(l,T){var b=l.cd,d=l.xaxis,s=l.yaxis,t=[],i=b[0].trace,r=b[0].t,n=i._length,o=r.x,a=r.y,u=r._scene,p=r.index;if(!u)return t;var c=M.hasText(i),x=M.hasMarkers(i),g=!x&&!c;if(i.visible!==!0||g)return t;var h=[],y=[];if(T!==!1&&!T.degenerate)for(var v=0;v<n;v++)T.contains([r.xpx[v],r.ypx[v]],!1,v,l)?(h.push(v),t.push({pointNumber:v,x:d.c2d(o[v]),y:s.c2d(a[v])})):y.push(v);if(x){var m=u.scatter2d;if(h.length||y.length){if(!u.selectBatch[p].length&&!u.unselectBatch[p].length){var _=new Array(u.count);_[p]=u.markerUnselectedOptions[p],m.update.apply(m,_)}}else{var f=new Array(u.count);f[p]=u.markerOptions[p],m.update.apply(m,f)}}return u.selectBatch[p]=h,u.unselectBatch[p]=y,c&&k(b),t}},99181:function(ee,D,e){var M=e(5386).fF,k=e(5386).si,l=e(19316),T=e(82196),b=e(23585),d=e(9012),s=e(50693),t=e(1426).extendFlat,i=e(30962).overrideAll,r=e(23585),n=l.line,o=l.marker;ee.exports=i({lon:l.lon,lat:l.lat,cluster:{enabled:{valType:"boolean"},maxzoom:t({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:t({},o.opacity,{dflt:1})},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:T.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},s("marker")),fill:l.fill,fillcolor:T.fillcolor,textfont:b.layers.symbol.textfont,textposition:b.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:t({},d.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},15790:function(ee,D,e){var M=e(92770),k=e(71828),l=e(50606).BADNUM,T=e(18214),b=e(21081),d=e(91424),s=e(39984),t=e(34098),i=e(13056),r=e(23469).appendArrayPointValue,n=e(63893).NEWLINES,o=e(63893).BR_TAG_ALL;function a(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function u(g,h){return k.isArrayOrTypedArray(g)?h?function(y){return M(g[y])?+g[y]:0}:function(y){return g[y]}:g?function(){return g}:p}function p(){return""}function c(g){return g[0]===l}function x(g,h){var y;if(k.isArrayOrTypedArray(g)&&k.isArrayOrTypedArray(h)){y=["step",["get","point_count"],g[0]];for(var v=1;v<g.length;v++)y.push(h[v-1],g[v])}else y=g;return y}ee.exports=function(g,h){var y,v=h[0].trace,m=v.visible===!0&&v._length!==0,_=v.fill!=="none",f=t.hasLines(v),S=t.hasMarkers(v),w=t.hasText(v),E=S&&v.marker.symbol==="circle",L=S&&v.marker.symbol!=="circle",C=v.cluster&&v.cluster.enabled,P=a("fill"),z=a("line"),G=a("circle"),O=a("symbol"),H={fill:P,line:z,circle:G,symbol:O};if(!m)return H;if((_||f)&&(y=T.calcTraceToLineCoords(h)),_&&(P.geojson=T.makePolygon(y),P.layout.visibility="visible",k.extendFlat(P.paint,{"fill-color":v.fillcolor})),f&&(z.geojson=T.makeLine(y),z.layout.visibility="visible",k.extendFlat(z.paint,{"line-width":v.line.width,"line-color":v.line.color,"line-opacity":v.opacity})),E){var N=function(q){var te,K,J,Y,W=q[0].trace,Q=W.marker,ne=W.selectedpoints,re=k.isArrayOrTypedArray(Q.color),ae=k.isArrayOrTypedArray(Q.size),ue=k.isArrayOrTypedArray(Q.opacity);function pe(se){return W.opacity*se}re&&(K=b.hasColorscale(W,"marker")?b.makeColorScaleFuncFromTrace(Q):k.identity),ae&&(J=s(W)),ue&&(Y=function(se){return pe(M(se)?+k.constrain(se,0,1):0)});var ge,_e,me=[];for(te=0;te<q.length;te++){var ve=q[te],Oe=ve.lonlat;if(!c(Oe)){var Me={};K&&(Me.mcc=ve.mcc=K(ve.mc)),J&&(Me.mrc=ve.mrc=J(ve.ms)),Y&&(Me.mo=Y(ve.mo)),ne&&(Me.selected=ve.selected||0),me.push({type:"Feature",id:te+1,geometry:{type:"Point",coordinates:Oe},properties:Me})}}if(ne)for(ge=d.makeSelectedPointStyleFns(W),te=0;te<me.length;te++){var Te=me[te].properties;ge.selectedOpacityFn&&(Te.mo=pe(ge.selectedOpacityFn(Te))),ge.selectedColorFn&&(Te.mcc=ge.selectedColorFn(Te)),ge.selectedSizeFn&&(Te.mrc=ge.selectedSizeFn(Te))}return{geojson:{type:"FeatureCollection",features:me},mcc:re||ge&&ge.selectedColorFn?{type:"identity",property:"mcc"}:Q.color,mrc:ae||ge&&ge.selectedSizeFn?{type:"identity",property:"mrc"}:(_e=Q.size,_e/2),mo:ue||ge&&ge.selectedOpacityFn?{type:"identity",property:"mo"}:pe(Q.opacity)}}(h);G.geojson=N.geojson,G.layout.visibility="visible",C&&(G.filter=["!",["has","point_count"]],H.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(v.cluster.color,v.cluster.step),"circle-radius":x(v.cluster.size,v.cluster.step),"circle-opacity":x(v.cluster.opacity,v.cluster.step)}},H.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),k.extendFlat(G.paint,{"circle-color":N.mcc,"circle-radius":N.mrc,"circle-opacity":N.mo})}if(E&&C&&(G.filter=["!",["has","point_count"]]),(L||w)&&(O.geojson=function(q,te){for(var K=te._fullLayout,J=q[0].trace,Y=J.marker||{},W=Y.symbol,Q=Y.angle,ne=W!=="circle"?u(W):p,re=Q!=="auto"?u(Q,!0):p,ae=t.hasText(J)?u(J.text):p,ue=[],pe=0;pe<q.length;pe++){var ge=q[pe];if(!c(ge.lonlat)){var _e,me=J.texttemplate;if(me){var ve=Array.isArray(me)?me[pe]||"":me,Oe=J._module.formatLabels(ge,J,K),Me={};r(Me,J,ge.i);var Te=J._meta||{};_e=k.texttemplateString(ve,Oe,K._d3locale,Me,ge,Te)}else _e=ae(pe);_e&&(_e=_e.replace(n,"").replace(o,`
`)),ue.push({type:"Feature",geometry:{type:"Point",coordinates:ge.lonlat},properties:{symbol:ne(pe),angle:re(pe),text:_e}})}}return{type:"FeatureCollection",features:ue}}(h,g),k.extendFlat(O.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(k.extendFlat(O.layout,{"icon-size":v.marker.size/10}),"angle"in v.marker&&v.marker.angle!=="auto"&&k.extendFlat(O.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),O.layout["icon-allow-overlap"]=v.marker.allowoverlap,k.extendFlat(O.paint,{"icon-opacity":v.opacity*v.marker.opacity,"icon-color":v.marker.color})),w)){var B=(v.marker||{}).size,V=i(v.textposition,B);k.extendFlat(O.layout,{"text-size":v.textfont.size,"text-anchor":V.anchor,"text-offset":V.offset,"text-font":v.textfont.family.split(", ")}),k.extendFlat(O.paint,{"text-color":v.textfont.color,"text-opacity":v.opacity})}return H}},76645:function(ee,D,e){var M=e(71828),k=e(34098),l=e(49508),T=e(11058),b=e(82410),d=e(28908),s=e(99181),t=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];ee.exports=function(i,r,n,o){function a(m,_){return M.coerce(i,r,s,m,_)}function u(m,_){return M.coerce2(i,r,s,m,_)}var p=function(m,_,f){var S=f("lon")||[],w=f("lat")||[],E=Math.min(S.length,w.length);return _._length=E,E}(0,r,a);if(p){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),k.hasLines(r)&&(T(i,r,n,o,a,{noDash:!0}),a("connectgaps")),k.hasMarkers(r)){l(i,r,n,o,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var c=r.marker;c.symbol!=="circle"&&(M.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),M.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}var x=u("cluster.maxzoom"),g=u("cluster.step"),h=u("cluster.color",r.marker&&r.marker.color||n),y=u("cluster.size"),v=u("cluster.opacity");a("cluster.enabled",x!==!1||g!==!1||h!==!1||y!==!1||v!==!1),k.hasText(r)&&b(i,r,o,a,{noSelect:!0,font:{family:t.indexOf(o.font.family)!==-1?o.font.family:"Open Sans Regular",size:o.font.size,color:o.font.color}}),a("fill"),r.fill!=="none"&&d(i,r,n,a),M.coerceSelectionMarkerOpacity(r,a)}else r.visible=!1}},53353:function(ee){ee.exports=function(D,e){return D.lon=e.lon,D.lat=e.lat,D}},15636:function(ee,D,e){var M=e(89298);ee.exports=function(k,l,T){var b={},d=T[l.subplot]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=M.tickText(d,d.c2l(s[0]),!0).text,b.latLabel=M.tickText(d,d.c2l(s[1]),!0).text,b}},28178:function(ee,D,e){var M=e(30211),k=e(71828),l=e(34603),T=k.fillText,b=e(50606).BADNUM,d=e(77734).traceLayerPrefix;function s(t,i,r){if(!t.hovertemplate){var n=(i.hi||t.hoverinfo).split("+"),o=n.indexOf("all")!==-1,a=n.indexOf("lon")!==-1,u=n.indexOf("lat")!==-1,p=i.lonlat,c=[];return o||a&&u?c.push("("+x(p[1])+", "+x(p[0])+")"):a?c.push(r.lon+x(p[0])):u&&c.push(r.lat+x(p[1])),(o||n.indexOf("text")!==-1)&&T(i,t,c),c.join("<br>")}function x(g){return g+""}}ee.exports={hoverPoints:function(t,i,r){var n=t.cd,o=n[0].trace,a=t.xa,u=t.ya,p=t.subplot,c=[],x=d+o.uid+"-circle",g=o.cluster&&o.cluster.enabled;if(g){var h=p.map.queryRenderedFeatures(null,{layers:[x]});c=h.map(function(P){return P.id})}var y=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),v=i-y;if(M.getClosest(n,function(P){var z=P.lonlat;if(z[0]===b||g&&c.indexOf(P.i+1)===-1)return 1/0;var G=k.modHalf(z[0],360),O=z[1],H=p.project([G,O]),N=H.x-a.c2p([v,O]),B=H.y-u.c2p([G,r]),V=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(N*N+B*B)-V,1-3/V)},t),t.index!==!1){var m=n[t.index],_=m.lonlat,f=[k.modHalf(_[0],360)+y,_[1]],S=a.c2p(f),w=u.c2p(f),E=m.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=w-E,t.y1=w+E;var L={};L[o.subplot]={_subplot:p};var C=o._module.formatLabels(m,o,L);return t.lonLabel=C.lonLabel,t.latLabel=C.latLabel,t.color=l(o,m),t.extraText=s(o,m,n[0].t.labels),t.hovertemplate=o.hovertemplate,[t]}},getExtraText:s}},20467:function(ee,D,e){ee.exports={attributes:e(99181),supplyDefaults:e(76645),colorbar:e(4898),formatLabels:e(15636),calc:e(84622),plot:e(86951),hoverPoints:e(28178).hoverPoints,eventData:e(53353),selectPoints:e(86387),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(ee,D,e){var M=e(71828),k=e(15790),l=e(77734).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(s,t,i,r){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=i,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:l+t+"-fill",line:l+t+"-line",circle:l+t+"-circle",symbol:l+t+"-symbol",cluster:l+t+"-cluster",clusterCount:l+t+"-cluster-count"},this.below=null}var d=b.prototype;d.addSource=function(s,t,i){var r={type:"geojson",data:t.geojson};i&&i.enabled&&M.extendFlat(r,{cluster:!0,clusterMaxZoom:i.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[s]);n?n.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[s],r)},d.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},d.addLayer=function(s,t,i){var r={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter);for(var n,o=this.layerIds[s],a=this.subplot.getMapLayers(),u=0;u<a.length;u++)if(a[u].id===o){n=!0;break}n?(this.subplot.setOptions(o,"setLayoutProperty",r.layout),r.layout.visibility==="visible"&&this.subplot.setOptions(o,"setPaintProperty",r.paint)):this.subplot.addLayer(r,i)},d.update=function(s){var t=s[0].trace,i=this.subplot,r=i.map,n=k(i.gd,s),o=i.belowLookup["trace-"+this.uid],a=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,p=this;function c(v){u?function(m){for(var _=T.cluster,f=_.length-1;f>=0;f--){var S=_[f];r.removeLayer(p.layerIds[S])}m||r.removeSource(p.sourceIds.circle)}(v):function(m){for(var _=T.nonCluster,f=_.length-1;f>=0;f--){var S=_[f];r.removeLayer(p.layerIds[S]),m||r.removeSource(p.sourceIds[S])}}(v)}function x(v){a?function(m){m||p.addSource("circle",n.circle,t.cluster);for(var _=T.cluster,f=0;f<_.length;f++){var S=_[f],w=n[S];p.addLayer(S,w,o)}}(v):function(m){for(var _=T.nonCluster,f=0;f<_.length;f++){var S=_[f],w=n[S];m||p.addSource(S,w),p.addLayer(S,w,o)}}(v)}function g(){for(var v=a?T.cluster:T.nonCluster,m=0;m<v.length;m++){var _=v[m],f=n[_];f&&(i.setOptions(p.layerIds[_],"setLayoutProperty",f.layout),f.layout.visibility==="visible"&&(_!=="cluster"&&p.setSourceData(_,f),i.setOptions(p.layerIds[_],"setPaintProperty",f.paint)))}}var h=this.isHidden,y=t.visible!==!0;y?h||c():h?y||x():u!==a?(c(),x()):(this.below!==o&&(c(!0),x(!0)),g()),this.clusterEnabled=a,this.isHidden=y,this.below=o,s[0].trace._glTrace=this},d.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,i=t.length-1;i>=0;i--){var r=t[i];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},ee.exports=function(s,t){var i,r,n,o=t[0].trace,a=o.cluster&&o.cluster.enabled,u=o.visible!==!0,p=new b(s,o.uid,a,u),c=k(s.gd,t),x=p.below=s.belowLookup["trace-"+o.uid];if(a)for(p.addSource("circle",c.circle,o.cluster),i=0;i<T.cluster.length;i++)n=c[r=T.cluster[i]],p.addLayer(r,n,x);else for(i=0;i<T.nonCluster.length;i++)n=c[r=T.nonCluster[i]],p.addSource(r,n,o.cluster),p.addLayer(r,n,x);return t[0].trace._glTrace=p,p}},86387:function(ee,D,e){var M=e(71828),k=e(34098),l=e(50606).BADNUM;ee.exports=function(T,b){var d,s=T.cd,t=T.xaxis,i=T.yaxis,r=[],n=s[0].trace;if(!k.hasMarkers(n))return[];if(b===!1)for(d=0;d<s.length;d++)s[d].selected=0;else for(d=0;d<s.length;d++){var o=s[d],a=o.lonlat;if(a[0]!==l){var u=[M.modHalf(a[0],360),a[1]],p=[t.c2p(u),i.c2p(u)];b.contains(p,null,d,T)?(r.push({pointNumber:d,lon:a[0],lat:a[1]}),o.selected=1):o.selected=0}}return r}},81245:function(ee,D,e){var M=e(5386).fF,k=e(5386).si,l=e(1426).extendFlat,T=e(82196),b=e(9012),d=T.line;ee.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},26442:function(ee,D,e){var M=e(92770),k=e(50606).BADNUM,l=e(89298),T=e(36922),b=e(75225),d=e(66279),s=e(47761).calcMarkerSize;ee.exports=function(t,i){for(var r=t._fullLayout,n=i.subplot,o=r[n].radialaxis,a=r[n].angularaxis,u=o.makeCalcdata(i,"r"),p=a.makeCalcdata(i,"theta"),c=i._length,x=new Array(c),g=0;g<c;g++){var h=u[g],y=p[g],v=x[g]={};M(h)&&M(y)?(v.r=h,v.theta=y):v.r=k}var m=s(i,c);return i._extremes.x=l.findExtremes(o,u,{ppad:m}),T(t,i),b(x,i),d(x,i),x}},22184:function(ee,D,e){var M=e(71828),k=e(34098),l=e(49508),T=e(11058),b=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,i=e(81245);function r(n,o,a,u){var p,c=u("r"),x=u("theta");if(c)x?p=Math.min(c.length,x.length):(p=c.length,u("theta0"),u("dtheta"));else{if(!x)return 0;p=o.theta.length,u("r0"),u("dr")}return o._length=p,p}ee.exports={handleRThetaDefaults:r,supplyDefaults:function(n,o,a,u){function p(g,h){return M.coerce(n,o,i,g,h)}var c=r(0,o,0,p);if(c){p("thetaunit"),p("mode",c<t?"lines+markers":"lines"),p("text"),p("hovertext"),o.hoveron!=="fills"&&p("hovertemplate"),k.hasLines(o)&&(T(n,o,a,u,p,{backoff:!0}),b(n,o,p),p("connectgaps")),k.hasMarkers(o)&&l(n,o,a,u,p,{gradient:!0}),k.hasText(o)&&(p("texttemplate"),d(n,o,u,p));var x=[];(k.hasMarkers(o)||k.hasText(o))&&(p("cliponaxis"),p("marker.maxdisplayed"),x.push("points")),p("fill"),o.fill!=="none"&&(s(n,o,a,p),k.hasLines(o)||b(n,o,p)),o.fill!=="tonext"&&o.fill!=="toself"||x.push("fills"),p("hoveron",x.join("+")||"points"),M.coerceSelectionMarkerOpacity(o,p)}else o.visible=!1}}},98608:function(ee,D,e){var M=e(71828),k=e(89298);ee.exports=function(l,T,b){var d,s,t={},i=b[T.subplot]._subplot;i?(d=i.radialAxis,s=i.angularAxis):(d=(i=b[T.subplot]).radialaxis,s=i.angularaxis);var r=d.c2l(l.r);t.rLabel=k.tickText(d,r,!0).text;var n=s.thetaunit==="degrees"?M.rad2deg(l.theta):l.theta;return t.thetaLabel=k.tickText(s,n,!0).text,t}},59150:function(ee,D,e){var M=e(33720);function k(l,T,b,d){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="r",t._hovertitle="";var i={};i[T.subplot]={_subplot:b};var r=T._module.formatLabels(l,T,i);d.rLabel=r.rLabel,d.thetaLabel=r.thetaLabel;var n=l.hi||T.hoverinfo,o=[];function a(p,c){o.push(p._hovertitle+": "+c)}if(!T.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&a(s,d.rLabel),u.indexOf("theta")!==-1&&a(t,d.thetaLabel),u.indexOf("text")!==-1&&d.text&&(o.push(d.text),delete d.text),d.extraText=o.join("<br>")}}ee.exports={hoverPoints:function(l,T,b,d){var s=M(l,T,b,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=l.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},91271:function(ee,D,e){ee.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(81245),supplyDefaults:e(22184).supplyDefaults,colorbar:e(4898),formatLabels:e(98608),calc:e(26442),plot:e(45162),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(59150).hoverPoints,selectPoints:e(98002),meta:{}}},45162:function(ee,D,e){var M=e(32663),k=e(50606).BADNUM;ee.exports=function(l,T,b){for(var d=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,i={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,o=0;o<b.length;o++)for(var a=b[o],u=0;u<a.length;u++){u===0&&(a[0].trace._xA=s,a[0].trace._yA=t);var p=a[u],c=p.r;if(c===k)p.x=p.y=k;else{var x=r.c2g(c),g=n.c2g(p.theta);p.x=x*Math.cos(g),p.y=x*Math.sin(g)}}M(l,i,b,d)}},53286:function(ee,D,e){var M=e(81245),k=e(42341),l=e(5386).si;ee.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:k.line,connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},65746:function(ee,D,e){ee.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(53286),supplyDefaults:e(75485),colorbar:e(4898),formatLabels:e(46255),calc:e(37499),hoverPoints:e(29347).hoverPoints,selectPoints:e(58147),meta:{}}},37499:function(ee,D,e){var M=e(36922),k=e(47761).calcMarkerSize,l=e(19635),T=e(89298),b=e(78232).TOO_MANY_POINTS;ee.exports=function(d,s){var t=d._fullLayout,i=s.subplot,r=t[i].radialaxis,n=t[i].angularaxis,o=s._r=r.makeCalcdata(s,"r"),a=s._theta=n.makeCalcdata(s,"theta"),u=s._length,p={};u<o.length&&(o=o.slice(0,u)),u<a.length&&(a=a.slice(0,u)),p.r=o,p.theta=a,M(d,s);var c,x=p.opts=l.style(d,s);return u<b?c=k(s,u):x.marker&&(c=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),s._extremes.x=T.findExtremes(r,o,{ppad:c}),[{x:!1,y:!1,t:p,trace:s}]}},75485:function(ee,D,e){var M=e(71828),k=e(34098),l=e(22184).handleRThetaDefaults,T=e(49508),b=e(11058),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,i=e(53286);ee.exports=function(r,n,o,a){function u(c,x){return M.coerce(r,n,i,c,x)}var p=l(r,n,a,u);p?(u("thetaunit"),u("mode",p<t?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),k.hasLines(n)&&(b(r,n,o,a,u),u("connectgaps")),k.hasMarkers(n)&&T(r,n,o,a,u,{noAngleRef:!0,noStandOff:!0}),k.hasText(n)&&(u("texttemplate"),d(r,n,a,u)),u("fill"),n.fill!=="none"&&s(r,n,o,u),M.coerceSelectionMarkerOpacity(n,u)):n.visible=!1}},46255:function(ee,D,e){var M=e(98608);ee.exports=function(k,l,T){var b=k.i;return"r"in k||(k.r=l._r[b]),"theta"in k||(k.theta=l._theta[b]),M(k,l,T)}},29347:function(ee,D,e){var M=e(20794),k=e(59150).makeHoverPointText;ee.exports={hoverPoints:function(l,T,b,d){var s=l.cd[0].t,t=s.r,i=s.theta,r=M.hoverPoints(l,T,b,d);if(r&&r[0].index!==!1){var n=r[0];if(n.index===void 0)return r;var o=l.subplot,a=n.cd[n.index],u=n.trace;if(a.r=t[n.index],a.theta=i[n.index],o.isPtInside(a))return n.xLabelVal=void 0,n.yLabelVal=void 0,k(a,u,o,n),r}}}},21461:function(ee,D,e){var M=e(65746);M.plot=e(49741),ee.exports=M},49741:function(ee,D,e){var M=e(88294),k=e(92770),l=e(26787),T=e(38967),b=e(19635),d=e(71828),s=e(78232).TOO_MANY_POINTS;ee.exports=function(t,i,r){if(r.length){var n=i.radialAxis,o=i.angularAxis,a=T(t,i);return r.forEach(function(u){if(u&&u[0]&&u[0].trace){var p,c=u[0],x=c.trace,g=c.t,h=x._length,y=g.r,v=g.theta,m=g.opts,_=y.slice(),f=v.slice();for(p=0;p<y.length;p++)i.isPtInside({r:y[p],theta:v[p]})||(_[p]=NaN,f[p]=NaN);var S=new Array(2*h),w=Array(h),E=Array(h);for(p=0;p<h;p++){var L,C,P=_[p];if(k(P)){var z=n.c2g(P),G=o.c2g(f[p],x.thetaunit);L=z*Math.cos(G),C=z*Math.sin(G)}else L=C=NaN;w[p]=S[2*p]=L,E[p]=S[2*p+1]=C}g.tree=M(S),m.marker&&h>=s&&(m.marker.cluster=g.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=S),m.line&&S.length>1&&d.extendFlat(m.line,b.linePositions(t,x,S)),m.text&&(d.extendFlat(m.text,{positions:S},b.textPosition(t,x,m.text,m.marker)),d.extendFlat(m.textSel,{positions:S},b.textPosition(t,x,m.text,m.markerSel)),d.extendFlat(m.textUnsel,{positions:S},b.textPosition(t,x,m.text,m.markerUnsel))),m.fill&&!a.fill2d&&(a.fill2d=!0),m.marker&&!a.scatter2d&&(a.scatter2d=!0),m.line&&!a.line2d&&(a.line2d=!0),m.text&&!a.glText&&(a.glText=!0),a.lineOptions.push(m.line),a.fillOptions.push(m.fill),a.markerOptions.push(m.marker),a.markerSelectedOptions.push(m.markerSel),a.markerUnselectedOptions.push(m.markerUnsel),a.textOptions.push(m.text),a.textSelectedOptions.push(m.textSel),a.textUnselectedOptions.push(m.textUnsel),a.selectBatch.push([]),a.unselectBatch.push([]),g.x=w,g.y=E,g.rawx=w,g.rawy=E,g.r=y,g.theta=v,g.positions=S,g._scene=a,g.index=a.count,a.count++}}),l(t,i,r)}},ee.exports.reglPrecompiled={}},48300:function(ee,D,e){var M=e(5386).fF,k=e(5386).si,l=e(1426).extendFlat,T=e(82196),b=e(9012),d=T.line;ee.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},b.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},30621:function(ee,D,e){var M=e(92770),k=e(50606).BADNUM,l=e(36922),T=e(75225),b=e(66279),d=e(47761).calcMarkerSize;ee.exports=function(s,t){for(var i=s._fullLayout,r=t.subplot,n=i[r].realaxis,o=i[r].imaginaryaxis,a=n.makeCalcdata(t,"real"),u=o.makeCalcdata(t,"imag"),p=t._length,c=new Array(p),x=0;x<p;x++){var g=a[x],h=u[x],y=c[x]={};M(g)&&M(h)?(y.real=g,y.imag=h):y.real=k}return d(t,p),l(s,t),T(c,t),b(c,t),c}},65269:function(ee,D,e){var M=e(71828),k=e(34098),l=e(49508),T=e(11058),b=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,i=e(48300);ee.exports=function(r,n,o,a){function u(x,g){return M.coerce(r,n,i,x,g)}var p=function(x,g,h,y){var v,m=y("real"),_=y("imag");return m&&_&&(v=Math.min(m.length,_.length)),g._length=v,v}(0,n,0,u);if(p){u("mode",p<t?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),k.hasLines(n)&&(T(r,n,o,a,u,{backoff:!0}),b(r,n,u),u("connectgaps")),k.hasMarkers(n)&&l(r,n,o,a,u,{gradient:!0}),k.hasText(n)&&(u("texttemplate"),d(r,n,a,u));var c=[];(k.hasMarkers(n)||k.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),n.fill!=="none"&&(s(r,n,o,u),k.hasLines(n)||b(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||c.push("fills"),u("hoveron",c.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},62047:function(ee,D,e){var M=e(89298);ee.exports=function(k,l,T){var b={},d=T[l.subplot]._subplot;return b.realLabel=M.tickText(d.radialAxis,k.real,!0).text,b.imagLabel=M.tickText(d.angularAxis,k.imag,!0).text,b}},11350:function(ee,D,e){var M=e(33720);function k(l,T,b,d){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="real",t._hovertitle="imag";var i={};i[T.subplot]={_subplot:b};var r=T._module.formatLabels(l,T,i);d.realLabel=r.realLabel,d.imagLabel=r.imagLabel;var n=l.hi||T.hoverinfo,o=[];function a(p,c){o.push(p._hovertitle+": "+c)}if(!T.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&a(s,d.realLabel),u.indexOf("imag")!==-1&&a(t,d.imagLabel),u.indexOf("text")!==-1&&d.text&&(o.push(d.text),delete d.text),d.extraText=o.join("<br>")}}ee.exports={hoverPoints:function(l,T,b,d){var s=M(l,T,b,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=l.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},85956:function(ee,D,e){ee.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(48300),supplyDefaults:e(65269),colorbar:e(4898),formatLabels:e(62047),calc:e(30621),plot:e(12480),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(11350).hoverPoints,selectPoints:e(98002),meta:{}}},12480:function(ee,D,e){var M=e(32663),k=e(50606).BADNUM,l=e(23893).smith;ee.exports=function(T,b,d){for(var s=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,i=b.yaxis,r={xaxis:t,yaxis:i,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},n=0;n<d.length;n++)for(var o=d[n],a=0;a<o.length;a++){a===0&&(o[0].trace._xA=t,o[0].trace._yA=i);var u=o[a],p=u.real;if(p===k)u.x=u.y=k;else{var c=l([p,u.imag]);u.x=c[0],u.y=c[1]}}M(T,r,d,s)}},50413:function(ee,D,e){var M=e(5386).fF,k=e(5386).si,l=e(82196),T=e(9012),b=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=l.marker,i=l.line,r=t.line;ee.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:s({},l.hovertext,{}),line:{color:i.color,width:i.width,dash:d,backoff:i.backoff,shape:s({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:s({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:s({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:t.angleref,standoff:t.standoff,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:r.width,editType:"calc"},b("marker.line")),gradient:t.gradient,editType:"calc"},b("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:M()}},54337:function(ee,D,e){var M=e(92770),k=e(36922),l=e(75225),T=e(66279),b=e(47761).calcMarkerSize,d=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};ee.exports=function(t,i){var r,n,o,a,u,p,c=t._fullLayout[i.subplot].sum,x=i.sum||c,g={a:i.a,b:i.b,c:i.c};for(r=0;r<d.length;r++)if(!g[o=d[r]]){for(u=g[s[o][0]],p=g[s[o][1]],a=new Array(u.length),n=0;n<u.length;n++)a[n]=x-u[n]-p[n];g[o]=a}var h,y,v,m,_,f,S=i._length,w=new Array(S);for(r=0;r<S;r++)h=g.a[r],y=g.b[r],v=g.c[r],M(h)&&M(y)&&M(v)?((m=c/((h=+h)+(y=+y)+(v=+v)))!=1&&(h*=m,y*=m,v*=m),f=h,_=v-y,w[r]={x:_,y:f,a:h,b:y,c:v}):w[r]={x:!1,y:!1};return b(i,S),k(t,i),l(w,i),T(w,i),w}},46008:function(ee,D,e){var M=e(71828),k=e(47581),l=e(34098),T=e(49508),b=e(11058),d=e(94039),s=e(82410),t=e(28908),i=e(50413);ee.exports=function(r,n,o,a){function u(y,v){return M.coerce(r,n,i,y,v)}var p,c=u("a"),x=u("b"),g=u("c");if(c?(p=c.length,x?(p=Math.min(p,x.length),g&&(p=Math.min(p,g.length))):p=g?Math.min(p,g.length):0):x&&g&&(p=Math.min(x.length,g.length)),p){n._length=p,u("sum"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),u("mode",p<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(b(r,n,o,a,u,{backoff:!0}),d(r,n,u),u("connectgaps")),l.hasMarkers(n)&&T(r,n,o,a,u,{gradient:!0}),l.hasText(n)&&(u("texttemplate"),s(r,n,a,u));var h=[];(l.hasMarkers(n)||l.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),h.push("points")),u("fill"),n.fill!=="none"&&(t(r,n,o,u),l.hasLines(n)||d(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||h.push("fills"),u("hoveron",h.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},4524:function(ee){ee.exports=function(D,e,M,k,l){if(e.xa&&(D.xaxis=e.xa),e.ya&&(D.yaxis=e.ya),k[l]){var T=k[l];D.a=T.a,D.b=T.b,D.c=T.c}else D.a=e.a,D.b=e.b,D.c=e.c;return D}},93645:function(ee,D,e){var M=e(89298);ee.exports=function(k,l,T){var b={},d=T[l.subplot]._subplot;return b.aLabel=M.tickText(d.aaxis,k.a,!0).text,b.bLabel=M.tickText(d.baxis,k.b,!0).text,b.cLabel=M.tickText(d.caxis,k.c,!0).text,b}},47250:function(ee,D,e){var M=e(33720);ee.exports=function(k,l,T,b){var d=M(k,l,T,b);if(d&&d[0].index!==!1){var s=d[0];if(s.index===void 0){var t=1-s.y0/k.ya._length,i=k.xa._length,r=i*t/2,n=i-r;return s.x0=Math.max(Math.min(s.x0,n),r),s.x1=Math.max(Math.min(s.x1,n),r),d}var o=s.cd[s.index],a=s.trace,u=s.subplot;s.a=o.a,s.b=o.b,s.c=o.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var p={};p[a.subplot]={_subplot:u};var c=a._module.formatLabels(o,a,p);s.aLabel=c.aLabel,s.bLabel=c.bLabel,s.cLabel=c.cLabel;var x=o.hi||a.hoverinfo,g=[];if(!a.hovertemplate){var h=x.split("+");h.indexOf("all")!==-1&&(h=["a","b","c"]),h.indexOf("a")!==-1&&y(u.aaxis,s.aLabel),h.indexOf("b")!==-1&&y(u.baxis,s.bLabel),h.indexOf("c")!==-1&&y(u.caxis,s.cLabel)}return s.extraText=g.join("<br>"),s.hovertemplate=a.hovertemplate,d}function y(v,m){g.push(v._hovertitle+": "+m)}}},52979:function(ee,D,e){ee.exports={attributes:e(50413),supplyDefaults:e(46008),colorbar:e(4898),formatLabels:e(93645),calc:e(54337),plot:e(7507),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(47250),selectPoints:e(98002),eventData:e(4524),moduleType:"trace",name:"scatterternary",basePlotModule:e(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(ee,D,e){var M=e(32663);ee.exports=function(k,l,T){var b=l.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var d=l.xaxis,s=l.yaxis,t={xaxis:d,yaxis:s,plot:b,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null},i=l.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=d,n[0].trace._yA=s)}M(k,t,T,i)}},46880:function(ee,D,e){var M=e(82196),k=e(50693),l=e(12663).axisHoverFormat,T=e(5386).fF,b=e(42341),d=e(85555).idRegex,s=e(44467).templatedArray,t=e(1426).extendFlat,i=M.marker,r=i.line,n=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),o=t(k("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:n,editType:"calc"});function a(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:d[u],editType:"plot"}}}o.color.editType=o.cmin.editType=o.cmax.editType="style",ee.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),marker:o,xaxes:a("x"),yaxes:a("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},65017:function(ee,D,e){var M=e(73972),k=e(83312);ee.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(46880),supplyDefaults:e(25784),colorbar:e(4898),calc:e(87625),plot:e(79410),hoverPoints:e(8567).hoverPoints,selectPoints:e(8689),editStyle:e(28801),meta:{}},M.register(k)},16947:function(ee,D,e){var M=e(46075),k=e(73972),l=e(79749),T=e(27659).a0,b=e(93612),d=e(41675).getFromId,s=e(89298).shouldShowZeroLine,t="splom",i={};function r(o,a,u){for(var p=u.matrixOptions.data.length,c=a._visibleDims,x=u.viewOpts.ranges=new Array(p),g=0;g<c.length;g++){var h=c[g],y=x[g]=new Array(4),v=d(o,a._diag[h][0]);v&&(y[0]=v.r2l(v.range[0]),y[2]=v.r2l(v.range[1]));var m=d(o,a._diag[h][1]);m&&(y[1]=m.r2l(m.range[0]),y[3]=m.r2l(m.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:x},{ranges:x}):u.matrix.update({ranges:x})}function n(o){var a=o._fullLayout,u=a._glcanvas.data()[0].regl,p=a._splomGrid;p||(p=a._splomGrid=M(u)),p.update(function(c){var x,g=c._context.plotGlPixelRatio,h=c._fullLayout,y=h._size,v=[0,0,h.width*g,h.height*g],m={};function _(q,te,K,J,Y,W){K*=g,J*=g,Y*=g,W*=g;var Q=te[q+"color"],ne=te[q+"width"],re=String(Q+ne);re in m?m[re].data.push(NaN,NaN,K,J,Y,W):m[re]={data:[K,J,Y,W],join:"rect",thickness:ne*g,color:Q,viewport:v,range:v,overlay:!1}}for(x in h._splomSubplots){var f,S,w=h._plots[x],E=w.xaxis,L=w.yaxis,C=E._gridVals,P=L._gridVals,z=E._offset,G=E._length,O=L._length,H=y.b+L.domain[0]*y.h,N=-L._m,B=-N*L.r2l(L.range[0],L.calendar);if(E.showgrid)for(x=0;x<C.length;x++)f=z+E.l2p(C[x].x),_("grid",E,f,H,f,H+O);if(L.showgrid)for(x=0;x<P.length;x++)_("grid",L,z,S=H+B+N*P[x].x,z+G,S);s(c,E,L)&&(f=z+E.l2p(0),_("zeroline",E,f,H,f,H+O)),s(c,L,E)&&_("zeroline",L,z,S=H+B+0,z+G,S)}var V=[];for(x in m)V.push(m[x]);return V}(o))}ee.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(o){var a=o._fullLayout,u=k.getModule(t),p=T(o.calcdata,u)[0];l(o,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(a._hasOnlyLargeSploms&&n(o),u.plot(o,{},p))},drag:function(o){var a=o.calcdata,u=o._fullLayout;u._hasOnlyLargeSploms&&n(o);for(var p=0;p<a.length;p++){var c=a[p][0].trace,x=u._splomScenes[c.uid];c.type==="splom"&&x&&x.matrix&&r(o,c,x)}},updateGrid:n,clean:function(o,a,u,p){var c,x={};if(p._splomScenes){for(c=0;c<o.length;c++){var g=o[c];g.type==="splom"&&(x[g.uid]=1)}for(c=0;c<u.length;c++){var h=u[c];if(!x[h.uid]){var y=p._splomScenes[h.uid];y&&y.destroy&&y.destroy(),p._splomScenes[h.uid]=null,delete p._splomScenes[h.uid]}}}Object.keys(p._splomScenes||{}).length===0&&delete p._splomScenes,p._splomGrid&&!a._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),b.clean(o,a,u,p)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:i}},87625:function(ee,D,e){var M=e(71828),k=e(41675),l=e(47761).calcMarkerSize,T=e(47761).calcAxisExpansion,b=e(36922),d=e(19635).markerSelection,s=e(19635).markerStyle,t=e(10164),i=e(50606).BADNUM,r=e(78232).TOO_MANY_POINTS;ee.exports=function(n,o){var a,u,p,c,x,g,h=o.dimensions,y=o._length,v={},m=v.cdata=[],_=v.data=[],f=o._visibleDims=[];function S(E,L){for(var C=E.makeCalcdata({v:L.values,vcalendar:o.calendar},"v"),P=0;P<C.length;P++)C[P]=C[P]===i?NaN:C[P];m.push(C),_.push(E.type==="log"?M.simpleMap(C,E.c2l):C)}for(a=0;a<h.length;a++)if((p=h[a]).visible){if(c=k.getFromId(n,o._diag[a][0]),x=k.getFromId(n,o._diag[a][1]),c&&x&&c.type!==x.type){M.log("Skipping splom dimension "+a+" with conflicting axis types");continue}c?(S(c,p),x&&x.type==="category"&&(x._categories=c._categories.slice())):S(x,p),f.push(a)}for(b(n,o),M.extendFlat(v,s(n,o)),g=m.length*y>r?v.sizeAvg||Math.max(v.size,3):l(o,y),u=0;u<f.length;u++)p=h[a=f[u]],c=k.getFromId(n,o._diag[a][0])||{},x=k.getFromId(n,o._diag[a][1])||{},T(n,o,c,x,m[u],m[u],g);var w=t(n,o);return w.matrix||(w.matrix=!0),w.matrixOptions=v,w.selectedOptions=d(n,o,o.selected),w.unselectedOptions=d(n,o,o.unselected),[{x:!1,y:!1,t:{},trace:o}]}},25784:function(ee,D,e){var M=e(71828),k=e(85501),l=e(46880),T=e(34098),b=e(49508),d=e(94397),s=e(68645).isOpenSymbol;function t(i,r){function n(a,u){return M.coerce(i,r,l.dimensions,a,u)}n("label");var o=n("values");o&&o.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}ee.exports=function(i,r,n,o){function a(y,v){return M.coerce(i,r,l,y,v)}var u=k(i,r,{name:"dimensions",handleItemDefaults:t}),p=a("diagonal.visible"),c=a("showupperhalf"),x=a("showlowerhalf");if(d(r,u,"values")&&(p||c||x)){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),b(i,r,n,o,a,{noAngleRef:!0,noStandOff:!0});var g=s(r.marker.symbol),h=T.isBubble(r);a("marker.line.width",g||h?1:0),function(y,v,m,_){var f,S,w=v.dimensions,E=w.length,L=v.showupperhalf,C=v.showlowerhalf,P=v.diagonal.visible,z=new Array(E),G=new Array(E);for(f=0;f<E;f++){var O=f?f+1:"";z[f]="x"+O,G[f]="y"+O}var H=_("xaxes",z),N=_("yaxes",G),B=v._diag=new Array(E);v._xaxes={},v._yaxes={};var V=[],q=[];function te(ue,pe,ge,_e){if(ue){var me=ue.charAt(0),ve=m._splomAxes[me];if(v["_"+me+"axes"][ue]=1,_e.push(ue),!(ue in ve)){var Oe=ve[ue]={};ge&&(Oe.label=ge.label||"",ge.visible&&ge.axis&&(ge.axis.type&&(Oe.type=ge.axis.type),ge.axis.matches&&(Oe.matches=pe)))}}}var K=!P&&!C,J=!P&&!L;for(v._axesDim={},f=0;f<E;f++){var Y=w[f],W=f===0,Q=f===E-1,ne=W&&K||Q&&J?void 0:H[f],re=W&&J||Q&&K?void 0:N[f];te(ne,re,Y,V),te(re,ne,Y,q),B[f]=[ne,re],v._axesDim[ne]=f,v._axesDim[re]=f}for(f=0;f<V.length;f++)for(S=0;S<q.length;S++){var ae=V[f]+q[S];f>S&&L||f<S&&C?m._splomSubplots[ae]=1:f!==S||!P&&C&&L||(m._splomSubplots[ae]=1)}(!C||!P&&L&&C)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,r,o,a),M.coerceSelectionMarkerOpacity(r,a)}else r.visible=!1}},28801:function(ee,D,e){var M=e(71828),k=e(36922),l=e(19635).markerStyle;ee.exports=function(T,b){var d=b.trace,s=T._fullLayout._splomScenes[d.uid];if(s){k(T,d),M.extendFlat(s.matrixOptions,l(T,d));var t=M.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},35948:function(ee,D){D.getDimIndex=function(e,M){for(var k=M._id,l={x:0,y:1}[k.charAt(0)],T=e._visibleDims,b=0;b<T.length;b++){var d=T[b];if(e._diag[d][l]===k)return b}return!1}},8567:function(ee,D,e){var M=e(35948),k=e(20794).calcHover;ee.exports={hoverPoints:function(l,T,b){var d=l.cd[0].trace,s=l.scene.matrixOptions.cdata,t=l.xa,i=l.ya,r=t.c2p(T),n=i.c2p(b),o=l.distance,a=M.getDimIndex(d,t),u=M.getDimIndex(d,i);if(a===!1||u===!1)return[l];for(var p,c,x=s[a],g=s[u],h=o,y=0;y<x.length;y++){var v=x[y],m=g[y],_=t.c2p(v)-r,f=i.c2p(m)-n,S=Math.sqrt(_*_+f*f);S<h&&(h=c=S,p=y)}return l.index=p,l.distance=h,l.dxy=c,p===void 0?[l]:[k(l,x,g,d)]}}},6419:function(ee,D,e){var M=e(65017);M.basePlotModule=e(16947),ee.exports=M},79410:function(ee,D,e){var M=e(60487),k=e(71828),l=e(41675),T=e(64505).selectMode;function b(d,s){var t,i,r,n,o,a=d._fullLayout,u=a._size,p=s.trace,c=s.t,x=a._splomScenes[p.uid],g=x.matrixOptions,h=g.cdata,y=a._glcanvas.data()[0].regl,v=a.dragmode;if(h.length!==0){g.lower=p.showupperhalf,g.upper=p.showlowerhalf,g.diagonal=p.diagonal.visible;var m=p._visibleDims,_=h.length,f=x.viewOpts={};for(f.ranges=new Array(_),f.domains=new Array(_),o=0;o<m.length;o++){r=m[o];var S=f.ranges[o]=new Array(4),w=f.domains[o]=new Array(4);(t=l.getFromId(d,p._diag[r][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],w[0]=t.domain[0],w[2]=t.domain[1]),(i=l.getFromId(d,p._diag[r][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],w[1]=i.domain[0],w[3]=i.domain[1])}var E=d._context.plotGlPixelRatio,L=u.l*E,C=u.b*E,P=u.w*E,z=u.h*E;f.viewport=[L,C,P+L,z+C],x.matrix===!0&&(x.matrix=M(y));var G=a.clickmode.indexOf("select")>-1,O=!0;if(T(v)||p.selectedpoints||G){var H=p._length;if(p.selectedpoints){x.selectBatch=p.selectedpoints;var N=p.selectedpoints,B={};for(r=0;r<N.length;r++)B[N[r]]=!0;var V=[];for(r=0;r<H;r++)B[r]||V.push(r);x.unselectBatch=V}var q=c.xpx=new Array(_),te=c.ypx=new Array(_);for(o=0;o<m.length;o++){if(r=m[o],t=l.getFromId(d,p._diag[r][0]))for(q[o]=new Array(H),n=0;n<H;n++)q[o][n]=t.c2p(h[o][n]);if(i=l.getFromId(d,p._diag[r][1]))for(te[o]=new Array(H),n=0;n<H;n++)te[o][n]=i.c2p(h[o][n])}if(x.selectBatch.length||x.unselectBatch.length){var K=k.extendFlat({},g,x.unselectedOptions,f),J=k.extendFlat({},g,x.selectedOptions,f);x.matrix.update(K,J),O=!1}}else c.xpx=c.ypx=null;if(O){var Y=k.extendFlat({},g,f);x.matrix.update(Y,null)}}}ee.exports=function(d,s,t){if(t.length)for(var i=0;i<t.length;i++)b(d,t[i][0])}},10164:function(ee,D,e){var M=e(71828);ee.exports=function(k,l){var T=k._fullLayout,b=l.uid,d=T._splomScenes;d||(d=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=d[l.uid];return t||((t=d[b]=M.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||M.extendFlat(t,s),t}},8689:function(ee,D,e){var M=e(71828),k=M.pushUnique,l=e(34098),T=e(35948);ee.exports=function(b,d){var s=b.cd,t=s[0].trace,i=s[0].t,r=b.scene,n=r.matrixOptions.cdata,o=b.xaxis,a=b.yaxis,u=[];if(!r)return u;var p=!l.hasMarkers(t)&&!l.hasText(t);if(t.visible!==!0||p)return u;var c=T.getDimIndex(t,o),x=T.getDimIndex(t,a);if(c===!1||x===!1)return u;var g=i.xpx[c],h=i.ypx[x],y=n[c],v=n[x],m=(b.scene.selectBatch||[]).slice(),_=[];if(d!==!1&&!d.degenerate)for(var f=0;f<y.length;f++)d.contains([g[f],h[f]],null,f,b)?(u.push({pointNumber:f,x:y[f],y:v[f]}),k(m,f)):m.indexOf(f)!==-1?k(m,f):_.push(f);var S=r.matrixOptions;return m.length||_.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,M.extendFlat({},S,r.selectedOptions,r.viewOpts)):r.matrix.update(S,null),r.selectBatch=m,r.unselectBatch=_,u}},21850:function(ee,D,e){var M=e(50693),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(2418),b=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:d({},b.showlegend,{dflt:!1})};d(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,ee.exports=s},88489:function(ee,D,e){var M=e(71828),k=e(78803);function l(d){var s,t,i,r,n,o,a,u,p,c,x,g,h=d._x,y=d._y,v=d._z,m=d._len,_=-1/0,f=1/0,S=-1/0,w=1/0,E=-1/0,L=1/0,C="";for(m&&(a=h[0],p=y[0],x=v[0]),m>1&&(u=h[m-1],c=y[m-1],g=v[m-1]),s=0;s<m;s++)_=Math.max(_,h[s]),f=Math.min(f,h[s]),S=Math.max(S,y[s]),w=Math.min(w,y[s]),E=Math.max(E,v[s]),L=Math.min(L,v[s]),r||h[s]===a||(r=!0,C+="x"),n||y[s]===p||(n=!0,C+="y"),o||v[s]===x||(o=!0,C+="z");r||(C+="x"),n||(C+="y"),o||(C+="z");var P=T(d._x),z=T(d._y),G=T(d._z);C=(C=(C=C.replace("x",(a>u?"-":"+")+"x")).replace("y",(p>c?"-":"+")+"y")).replace("z",(x>g?"-":"+")+"z");var O=function(){m=0,P=[],z=[],G=[]};(!m||m<P.length*z.length*G.length)&&O();var H=function(me){return me==="x"?h:me==="y"?y:v},N=function(me){return me==="x"?P:me==="y"?z:G},B=function(me){return me[m-1]<me[0]?-1:1},V=H(C[1]),q=H(C[3]),te=H(C[5]),K=N(C[1]).length,J=N(C[3]).length,Y=N(C[5]).length,W=!1,Q=function(me,ve,Oe){return K*(J*me+ve)+Oe},ne=B(H(C[1])),re=B(H(C[3])),ae=B(H(C[5]));for(s=0;s<Y-1;s++){for(t=0;t<J-1;t++){for(i=0;i<K-1;i++){var ue=Q(s,t,i),pe=Q(s,t,i+1),ge=Q(s,t+1,i),_e=Q(s+1,t,i);if(V[ue]*ne<V[pe]*ne&&q[ue]*re<q[ge]*re&&te[ue]*ae<te[_e]*ae||(W=!0),W)break}if(W)break}if(W)break}return W&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:f,yMin:w,zMin:L,xMax:_,yMax:S,zMax:E,Xs:P,Ys:z,Zs:G,len:m,fill:C}}function T(d){return M.distinctVals(d).vals}function b(d,s){if(s===void 0&&(s=d.length),M.isTypedArray(d))return d.subarray(0,s);for(var t=[],i=0;i<s;i++)t[i]=+d[i];return t}ee.exports={calc:function(d,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=b(s.u,s._len),s._v=b(s.v,s._len),s._w=b(s.w,s._len),s._x=b(s.x,s._len),s._y=b(s.y,s._len),s._z=b(s.z,s._len);var t=l(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var i,r,n,o=0;s.starts&&(i=b(s.starts.x||[]),r=b(s.starts.y||[]),n=b(s.starts.z||[]),o=Math.min(i.length,r.length,n.length)),s._startsX=i||[],s._startsY=r||[],s._startsZ=n||[];var a,u=0,p=1/0;for(a=0;a<s._len;a++){var c=s._u[a],x=s._v[a],g=s._w[a],h=Math.sqrt(c*c+x*x+g*g);u=Math.max(u,h),p=Math.min(p,h)}for(k(d,s,{vals:[p,u],containerStr:"",cLetter:"c"}),a=0;a<o;a++){var y=i[a];t.xMax=Math.max(t.xMax,y),t.xMin=Math.min(t.xMin,y);var v=r[a];t.yMax=Math.max(t.yMax,v),t.yMin=Math.min(t.yMin,v);var m=n[a];t.zMax=Math.max(t.zMax,m),t.zMin=Math.min(t.zMin,m)}s._slen=o,s._normMax=u,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:l}},90154:function(ee,D,e){var M=e(9330).gl_streamtube3d,k=M.createTubeMesh,l=e(71828),T=e(81697).parseColorScale,b=e(21081).extractOpts,d=e(90060),s={xaxis:0,yaxis:1,zaxis:2};function t(a,u){this.scene=a,this.uid=u,this.mesh=null,this.data=null}var i=t.prototype;function r(a){var u=a.length;return u>2?a.slice(1,u-1):u===2?[(a[0]+a[1])/2]:a}function n(a){var u=a.length;return u===1?[.5,.5]:[a[1]-a[0],a[u-1]-a[u-2]]}function o(a,u){var p=a.fullSceneLayout,c=a.dataScale,x=u._len,g={};function h(K,J){var Y=p[J],W=c[s[J]];return l.simpleMap(K,function(Q){return Y.d2l(Q)*W})}if(g.vectors=d(h(u._u,"xaxis"),h(u._v,"yaxis"),h(u._w,"zaxis"),x),!x)return{positions:[],cells:[]};var y=h(u._Xs,"xaxis"),v=h(u._Ys,"yaxis"),m=h(u._Zs,"zaxis");if(g.meshgrid=[y,v,m],g.gridFill=u._gridFill,u._slen)g.startingPositions=d(h(u._startsX,"xaxis"),h(u._startsY,"yaxis"),h(u._startsZ,"zaxis"));else{for(var _=v[0],f=r(y),S=r(m),w=new Array(f.length*S.length),E=0,L=0;L<f.length;L++)for(var C=0;C<S.length;C++)w[E++]=[f[L],_,S[C]];g.startingPositions=w}g.colormap=T(u),g.tubeSize=u.sizeref,g.maxLength=u.maxdisplayed;var P=h(u._xbnds,"xaxis"),z=h(u._ybnds,"yaxis"),G=h(u._zbnds,"zaxis"),O=n(y),H=n(v),N=n(m),B=[[P[0]-O[0],z[0]-H[0],G[0]-N[0]],[P[1]+O[1],z[1]+H[1],G[1]+N[1]]],V=M(g,B),q=b(u);V.vertexIntensityBounds=[q.min/u._normMax,q.max/u._normMax];var te=u.lightposition;return V.lightPosition=[te.x,te.y,te.z],V.ambient=u.lighting.ambient,V.diffuse=u.lighting.diffuse,V.specular=u.lighting.specular,V.roughness=u.lighting.roughness,V.fresnel=u.lighting.fresnel,V.opacity=u.opacity,u._pad=V.tubeScale*u.sizeref*2,V}i.handlePick=function(a){var u=this.scene.fullSceneLayout,p=this.scene.dataScale;function c(h,y){var v=u[y],m=p[s[y]];return v.l2c(h)/m}if(a.object===this.mesh){var x=a.data.position,g=a.data.velocity;return a.traceCoordinate=[c(x[0],"xaxis"),c(x[1],"yaxis"),c(x[2],"zaxis"),c(g[0],"xaxis"),c(g[1],"yaxis"),c(g[2],"zaxis"),a.data.intensity*this.data._normMax,a.data.divergence],a.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(a){this.data=a;var u=o(this.scene,a);this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(a,u){var p=a.glplot.gl,c=o(a,u),x=k(p,c),g=new t(a,u.uid);return g.mesh=x,g.data=u,x._trace=g,a.glplot.add(x),g}},22459:function(ee,D,e){var M=e(71828),k=e(1586),l=e(21850);ee.exports=function(T,b,d,s){function t(p,c){return M.coerce(T,b,l,p,c)}var i=t("u"),r=t("v"),n=t("w"),o=t("x"),a=t("y"),u=t("z");i&&i.length&&r&&r.length&&n&&n.length&&o&&o.length&&a&&a.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},61510:function(ee,D,e){ee.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(21850),supplyDefaults:e(22459),colorbar:{min:"cmin",max:"cmax"},calc:e(88489).calc,plot:e(90154),eventData:function(M,k){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=k.traceCoordinate[3],M.tubev=k.traceCoordinate[4],M.tubew=k.traceCoordinate[5],M.norm=k.traceCoordinate[6],M.divergence=k.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},57564:function(ee,D,e){var M=e(9012),k=e(5386).fF,l=e(5386).si,T=e(50693),b=e(27670).Y,d=e(34e3),s=e(7055),t=e(1426).extendFlat,i=e(79952).u;ee.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},d.marker.line.color,{dflt:null}),width:t({},d.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:d.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:d.hovertext,hoverinfo:t({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:d.textfont,insidetextorientation:d.insidetextorientation,insidetextfont:d.insidetextfont,outsidetextfont:t({},d.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:d.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(ee,D,e){var M=e(74875);D.name="sunburst",D.plot=function(k,l,T,b){M.plotBasePlot(D.name,k,l,T,b)},D.clean=function(k,l,T,b){M.cleanBasePlot(D.name,k,l,T,b)}},52147:function(ee,D,e){var M=e(674),k=e(92770),l=e(71828),T=e(21081).makeColorScaleFuncFromTrace,b=e(32354).makePullColorFn,d=e(32354).generateExtendedColors,s=e(21081).calc,t=e(50606).ALMOST_EQUAL,i={},r={},n={};function o(a,u,p){var c=0,x=a.children;if(x){for(var g=x.length,h=0;h<g;h++)c+=o(x[h],u,p);p.branches&&c++}else p.leaves&&c++;return a.value=a.data.data.value=c,u._values||(u._values=[]),u._values[a.data.data.i]=c,c}D.calc=function(a,u){var p,c,x,g,h,y,v=a._fullLayout,m=u.ids,_=l.isArrayOrTypedArray(m),f=u.labels,S=u.parents,w=u.values,E=l.isArrayOrTypedArray(w),L=[],C={},P={},z=function(ae){return ae||typeof ae=="number"},G=function(ae){return!E||k(w[ae])&&w[ae]>=0};_?(p=Math.min(m.length,S.length),c=function(ae){return z(m[ae])&&G(ae)},x=function(ae){return String(m[ae])}):(p=Math.min(f.length,S.length),c=function(ae){return z(f[ae])&&G(ae)},x=function(ae){return String(f[ae])}),E&&(p=Math.min(p,w.length));for(var O=0;O<p;O++)if(c(O)){var H=x(O),N=z(S[O])?String(S[O]):"",B={i:O,id:H,pid:N,label:z(f[O])?String(f[O]):""};E&&(B.v=+w[O]),L.push(B),h=H,C[g=N]?C[g].push(h):C[g]=[h],P[h]=1}if(C[""]){if(C[""].length>1){for(var V=l.randstr(),q=0;q<L.length;q++)L[q].pid===""&&(L[q].pid=V);L.unshift({hasMultipleRoots:!0,id:V,pid:"",label:""})}}else{var te,K=[];for(te in C)P[te]||K.push(te);if(K.length!==1)return l.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",K.join(", ")].join(" "));te=K[0],L.unshift({hasImpliedRoot:!0,id:te,pid:"",label:te})}try{y=M.stratify().id(function(ae){return ae.id}).parentId(function(ae){return ae.pid})(L)}catch(ae){return l.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",ae.message].join(" "))}var J=M.hierarchy(y),Y=!1;if(E)switch(u.branchvalues){case"remainder":J.sum(function(ae){return ae.data.v});break;case"total":J.each(function(ae){var ue=ae.data.data,pe=ue.v;if(ae.children){var ge=ae.children.reduce(function(_e,me){return _e+me.data.data.v},0);if((ue.hasImpliedRoot||ue.hasMultipleRoots)&&(pe=ge),pe<ge*t)return Y=!0,l.warn(["Total value for node",ae.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,pe,`
children sum =`,ge].join(" "))}ae.value=pe})}else o(J,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!Y){var W,Q;u.sort&&J.sort(function(ae,ue){return ue.value-ae.value});var ne=u.marker.colors||[],re=!!ne.length;return u._hasColorscale?(re||(ne=E?u.values:u._values),s(a,u,{vals:ne,containerStr:"marker",cLetter:"c"}),Q=T(u.marker)):W=b(v["_"+u.type+"colormap"]),J.each(function(ae){var ue=ae.data.data;ue.color=u._hasColorscale?Q(ne[ue.i]):W(ne[ue.i],ue.id)}),L[0].hierarchy=J,L}},D._runCrossTraceCalc=function(a,u){var p=u._fullLayout,c=u.calcdata,x=p[a+"colorway"],g=p["_"+a+"colormap"];p["extend"+a+"colors"]&&(x=d(x,a==="icicle"?n:a==="treemap"?r:i));var h,y=0;function v(f){var S=f.data.data,w=S.id;S.color===!1&&(g[w]?S.color=g[w]:f.parent?f.parent.parent?S.color=f.parent.data.data.color:(g[w]=S.color=x[y%x.length],y++):S.color=h)}for(var m=0;m<c.length;m++){var _=c[m][0];_.trace.type===a&&_.hierarchy&&(h=_.trace.root.color,_.hierarchy.each(v))}},D.crossTraceCalc=function(a){return D._runCrossTraceCalc("sunburst",a)}},7055:function(ee){ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(ee,D,e){var M=e(71828),k=e(57564),l=e(27670).c,T=e(90769).handleText,b=e(37434).handleMarkerDefaults,d=e(21081),s=d.hasColorscale,t=d.handleDefaults;ee.exports=function(i,r,n,o){function a(h,y){return M.coerce(i,r,k,h,y)}var u=a("labels"),p=a("parents");if(u&&u.length&&p&&p.length){var c=a("values");c&&c.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),b(i,r,o,a);var x=r._hasColorscale=s(i,"marker","colors")||(i.marker||{}).coloraxis;x&&t(i,r,o,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",x?1:.7);var g=a("text");a("texttemplate"),r.texttemplate||a("textinfo",Array.isArray(g)?"text+label":"label"),a("hovertext"),a("hovertemplate"),T(i,r,o,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),l(r,o,a),r._length=null}else r.visible=!1}},43467:function(ee,D,e){var M=e(91424),k=e(7901);ee.exports=function(l,T,b,d,s){var t=T.data.data,i=t.i,r=s||t.color;if(i>=0){T.i=t.i;var n=b.marker;n.pattern&&n.colors&&n.pattern.shape||(n.color=r,T.color=r),M.pointStyle(l,b,d,T)}else k.fill(l,r)}},83523:function(ee,D,e){var M=e(39898),k=e(73972),l=e(23469).appendArrayPointValue,T=e(30211),b=e(71828),d=e(11086),s=e(2791),t=e(53581).formatPieValue;function i(r,n,o){for(var a=r.data.data,u={curveNumber:n.index,pointNumber:a.i,data:n._input,fullData:n},p=0;p<o.length;p++){var c=o[p];c in r&&(u[c]=r[c])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(u.parent=r.parentString),l(u,n,a.i),u}ee.exports=function(r,n,o,a,u){var p=a[0],c=p.trace,x=p.hierarchy,g=c.type==="sunburst",h=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),r.on("mouseover",function(y){var v=o._fullLayout;if(!o._dragging&&v.hovermode!==!1){var m,_=o._fullData[c.index],f=y.data.data,S=f.i,w=s.isHierarchyRoot(y),E=s.getParent(x,y),L=s.getValue(y),C=function(ne){return b.castOption(_,S,ne)},P=C("hovertemplate"),z=T.castHoverinfo(_,v,S),G=v.separators;if(P||z&&z!=="none"&&z!=="skip"){var O,H;g&&(O=p.cx+y.pxmid[0]*(1-y.rInscribed),H=p.cy+y.pxmid[1]*(1-y.rInscribed)),h&&(O=y._hoverX,H=y._hoverY);var N,B={},V=[],q=[],te=function(ne){return V.indexOf(ne)!==-1};z&&(V=z==="all"?_._module.attributes.hoverinfo.flags:z.split("+")),B.label=f.label,te("label")&&B.label&&q.push(B.label),f.hasOwnProperty("v")&&(B.value=f.v,B.valueLabel=t(B.value,G),te("value")&&q.push(B.valueLabel)),B.currentPath=y.currentPath=s.getPath(y.data),te("current path")&&!w&&q.push(B.currentPath);var K=[],J=function(){K.indexOf(N)===-1&&(q.push(N),K.push(N))};B.percentParent=y.percentParent=L/s.getValue(E),B.parent=y.parentString=s.getPtLabel(E),te("percent parent")&&(N=s.formatPercent(B.percentParent,G)+" of "+B.parent,J()),B.percentEntry=y.percentEntry=L/s.getValue(n),B.entry=y.entry=s.getPtLabel(n),!te("percent entry")||w||y.onPathbar||(N=s.formatPercent(B.percentEntry,G)+" of "+B.entry,J()),B.percentRoot=y.percentRoot=L/s.getValue(x),B.root=y.root=s.getPtLabel(x),te("percent root")&&!w&&(N=s.formatPercent(B.percentRoot,G)+" of "+B.root,J()),B.text=C("hovertext")||C("text"),te("text")&&(N=B.text,b.isValidTextValue(N)&&q.push(N)),m=[i(y,_,u.eventDataKeys)];var Y={trace:_,y:H,_x0:y._x0,_x1:y._x1,_y0:y._y0,_y1:y._y1,text:q.join("<br>"),name:P||te("name")?_.name:void 0,color:C("hoverlabel.bgcolor")||f.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:B,eventData:m};g&&(Y.x0=O-y.rInscribed*y.rpx1,Y.x1=O+y.rInscribed*y.rpx1,Y.idealAlign=y.pxmid[0]<0?"left":"right"),h&&(Y.x=O,Y.idealAlign=O<0?"left":"right");var W=[];T.loneHover(Y,{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:o,inOut_bbox:W}),m[0].bbox=W[0],c._hasHoverLabel=!0}if(h){var Q=r.select("path.surface");u.styleOne(Q,y,_,o,{hovered:!0})}c._hasHoverEvent=!0,o.emit("plotly_hover",{points:m||[i(y,_,u.eventDataKeys)],event:M.event})}}),r.on("mouseout",function(y){var v=o._fullLayout,m=o._fullData[c.index],_=M.select(this).datum();if(c._hasHoverEvent&&(y.originalEvent=M.event,o.emit("plotly_unhover",{points:[i(_,m,u.eventDataKeys)],event:M.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(T.loneUnhover(v._hoverlayer.node()),c._hasHoverLabel=!1),h){var f=r.select("path.surface");u.styleOne(f,_,m,o,{hovered:!1})}}),r.on("click",function(y){var v=o._fullLayout,m=o._fullData[c.index],_=g&&(s.isHierarchyRoot(y)||s.isLeaf(y)),f=s.getPtId(y),S=s.isEntry(y)?s.findEntryWithChild(x,f):s.findEntryWithLevel(x,f),w=s.getPtId(S),E={points:[i(y,m,u.eventDataKeys)],event:M.event};_||(E.nextLevel=w);var L=d.triggerHandler(o,"plotly_"+c.type+"click",E);if(L!==!1&&v.hovermode&&(o._hoverdata=[i(y,m,u.eventDataKeys)],T.click(o,M.event)),!_&&L!==!1&&!o._dragging&&!o._transitioning){k.call("_storeDirectGUIEdit",m,v._tracePreGUI[m.uid],{level:m.level});var C={data:[{level:w}],traces:[c.index]},P={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(v._hoverlayer.node()),k.call("animate",o,C,P)}})}},2791:function(ee,D,e){var M=e(71828),k=e(7901),l=e(6964),T=e(53581);function b(d){return d.data.data.pid}D.findEntryWithLevel=function(d,s){var t;return s&&d.eachAfter(function(i){if(D.getPtId(i)===s)return t=i.copy()}),t||d},D.findEntryWithChild=function(d,s){var t;return d.eachAfter(function(i){for(var r=i.children||[],n=0;n<r.length;n++){var o=r[n];if(D.getPtId(o)===s)return t=i.copy()}}),t||d},D.isEntry=function(d){return!d.parent},D.isLeaf=function(d){return!d.children},D.getPtId=function(d){return d.data.data.id},D.getPtLabel=function(d){return d.data.data.label},D.getValue=function(d){return d.value},D.isHierarchyRoot=function(d){return b(d)===""},D.setSliceCursor=function(d,s,t){var i=t.isTransitioning;if(!i){var r=d.datum();i=t.hideOnRoot&&D.isHierarchyRoot(r)||t.hideOnLeaves&&D.isLeaf(r)}l(d,i?null:"pointer")},D.getInsideTextFontKey=function(d,s,t,i,r){var n=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",o=t.data.data.i;return M.castOption(s,o,n+"."+d)||M.castOption(s,o,"textfont."+d)||i.size},D.getOutsideTextFontKey=function(d,s,t,i){var r=t.data.data.i;return M.castOption(s,r,"outsidetextfont."+d)||M.castOption(s,r,"textfont."+d)||i.size},D.isOutsideText=function(d,s){return!d._hasColorscale&&D.isHierarchyRoot(s)},D.determineTextFont=function(d,s,t,i){return D.isOutsideText(d,s)?function(r,n,o){return{color:D.getOutsideTextFontKey("color",r,n,o),family:D.getOutsideTextFontKey("family",r,n,o),size:D.getOutsideTextFontKey("size",r,n,o)}}(d,s,t):function(r,n,o,a){var u=(a||{}).onPathbar,p=n.data.data,c=p.i,x=M.castOption(r,c,(u?"pathbar.textfont":"insidetextfont")+".color");return!x&&r._input.textfont&&(x=M.castOption(r._input,c,"textfont.color")),{color:x||k.contrast(p.color),family:D.getInsideTextFontKey("family",r,n,o,a),size:D.getInsideTextFontKey("size",r,n,o,a)}}(d,s,t,i)},D.hasTransition=function(d){return!!(d&&d.duration>0)},D.getMaxDepth=function(d){return d.maxdepth>=0?d.maxdepth:1/0},D.isHeader=function(d,s){return!(D.isLeaf(d)||d.depth===s._maxDepth-1)},D.getParent=function(d,s){return D.findEntryWithLevel(d,b(s))},D.listPath=function(d,s){var t=d.parent;if(!t)return[];var i=s?[t.data[s]]:[t];return D.listPath(t,s).concat(i)},D.getPath=function(d){return D.listPath(d,"label").join("/")+"/"},D.formatValue=T.formatPieValue,D.formatPercent=function(d,s){var t=M.formatPercent(d,0);return t==="0%"&&(t=T.formatPiePercent(d,s)),t}},87619:function(ee,D,e){ee.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(66888),categories:[],animatable:!0,attributes:e(57564),layoutAttributes:e(2654),supplyDefaults:e(17094),supplyLayoutDefaults:e(57034),calc:e(52147).calc,crossTraceCalc:e(52147).crossTraceCalc,plot:e(24714).plot,style:e(29969).style,colorbar:e(4898),meta:{}}},2654:function(ee){ee.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(ee,D,e){var M=e(71828),k=e(2654);ee.exports=function(l,T){function b(d,s){return M.coerce(l,T,k,d,s)}b("sunburstcolorway",T.colorway),b("extendsunburstcolors")}},24714:function(ee,D,e){var M=e(39898),k=e(674),l=e(81684).sX,T=e(91424),b=e(71828),d=e(63893),s=e(72597),t=s.recordMinTextSize,i=s.clearMinTextSize,r=e(14575),n=e(53581).getRotationAngle,o=r.computeTransform,a=r.transformInsideText,u=e(29969).styleOne,p=e(16688).resizeText,c=e(83523),x=e(7055),g=e(2791);function h(v,m,_,f){var S=v._context.staticPlot,w=v._fullLayout,E=!w.uniformtext.mode&&g.hasTransition(f),L=M.select(_).selectAll("g.slice"),C=m[0],P=C.trace,z=C.hierarchy,G=g.findEntryWithLevel(z,P.level),O=g.getMaxDepth(P),H=w._size,N=P.domain,B=H.w*(N.x[1]-N.x[0]),V=H.h*(N.y[1]-N.y[0]),q=.5*Math.min(B,V),te=C.cx=H.l+H.w*(N.x[1]+N.x[0])/2,K=C.cy=H.t+H.h*(1-N.y[0])-V/2;if(!G)return L.remove();var J=null,Y={};E&&L.each(function(oe){Y[g.getPtId(oe)]={rpx0:oe.rpx0,rpx1:oe.rpx1,x0:oe.x0,x1:oe.x1,transform:oe.transform},!J&&g.isEntry(oe)&&(J=oe)});var W=function(oe){return k.partition().size([2*Math.PI,oe.height+1])(oe)}(G).descendants(),Q=G.height+1,ne=0,re=O;C.hasMultipleRoots&&g.isHierarchyRoot(G)&&(W=W.slice(1),Q-=1,ne=1,re+=1),W=W.filter(function(oe){return oe.y1<=re});var ae=n(P.rotation);ae&&W.forEach(function(oe){oe.x0+=ae,oe.x1+=ae});var ue=Math.min(Q,O),pe=function(oe){return(oe-ne)/ue*q},ge=function(oe,he){return[oe*Math.cos(he),-oe*Math.sin(he)]},_e=function(oe){return b.pathAnnulus(oe.rpx0,oe.rpx1,oe.x0,oe.x1,te,K)},me=function(oe){return te+y(oe)[0]*(oe.transform.rCenter||0)+(oe.transform.x||0)},ve=function(oe){return K+y(oe)[1]*(oe.transform.rCenter||0)+(oe.transform.y||0)};(L=L.data(W,g.getPtId)).enter().append("g").classed("slice",!0),E?L.exit().transition().each(function(){var oe=M.select(this);oe.select("path.surface").transition().attrTween("d",function(he){var Ee=function(ke){var be,Ie=g.getPtId(ke),Fe=Y[Ie],ce=Y[g.getPtId(G)];if(ce){var we=(ke.x1>ce.x1?2*Math.PI:0)+ae;be=ke.rpx1<ce.rpx1?{x0:ke.x0,x1:ke.x1,rpx0:0,rpx1:0}:{x0:we,x1:we,rpx0:ke.rpx0,rpx1:ke.rpx1}}else{var ye,Ce=g.getPtId(ke.parent);L.each(function(Je){if(g.getPtId(Je)===Ce)return ye=Je});var Re,ze=ye.children;ze.forEach(function(Je,ot){if(g.getPtId(Je)===Ie)return Re=ot});var He=ze.length,Ge=l(ye.x0,ye.x1);be={rpx0:q,rpx1:q,x0:Ge(Re/He),x1:Ge((Re+1)/He)}}return l(Fe,be)}(he);return function(ke){return _e(Ee(ke))}}),oe.select("g.slicetext").attr("opacity",0)}).remove():L.exit().remove(),L.order();var Oe=null;if(E&&J){var Me=g.getPtId(J);L.each(function(oe){Oe===null&&g.getPtId(oe)===Me&&(Oe=oe.x1)})}var Te=L;function se(oe){var he=oe.parent,Ee=Y[g.getPtId(he)],ke={};if(Ee){var be=he.children,Ie=be.indexOf(oe),Fe=be.length,ce=l(Ee.x0,Ee.x1);ke.x0=ce(Ie/Fe),ke.x1=ce(Ie/Fe)}else ke.x0=ke.x1=0;return ke}E&&(Te=Te.transition().each("end",function(){var oe=M.select(this);g.setSliceCursor(oe,v,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Te.each(function(oe){var he=M.select(this),Ee=b.ensureSingle(he,"path","surface",function(we){we.style("pointer-events",S?"none":"all")});oe.rpx0=pe(oe.y0),oe.rpx1=pe(oe.y1),oe.xmid=(oe.x0+oe.x1)/2,oe.pxmid=ge(oe.rpx1,oe.xmid),oe.midangle=-(oe.xmid-Math.PI/2),oe.startangle=-(oe.x0-Math.PI/2),oe.stopangle=-(oe.x1-Math.PI/2),oe.halfangle=.5*Math.min(b.angleDelta(oe.x0,oe.x1)||Math.PI,Math.PI),oe.ring=1-oe.rpx0/oe.rpx1,oe.rInscribed=function(we){return we.rpx0===0&&b.isFullCircle([we.x0,we.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(we.halfangle)),we.ring/2))}(oe),E?Ee.transition().attrTween("d",function(we){var ye=function(Ce){var Re,ze=Y[g.getPtId(Ce)],He={x0:Ce.x0,x1:Ce.x1,rpx0:Ce.rpx0,rpx1:Ce.rpx1};if(ze)Re=ze;else if(J)if(Ce.parent)if(Oe){var Ge=(Ce.x1>Oe?2*Math.PI:0)+ae;Re={x0:Ge,x1:Ge}}else Re={rpx0:q,rpx1:q},b.extendFlat(Re,se(Ce));else Re={rpx0:0,rpx1:0};else Re={x0:ae,x1:ae};return l(Re,He)}(we);return function(Ce){return _e(ye(Ce))}}):Ee.attr("d",_e),he.call(c,G,v,m,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(g.setSliceCursor,v,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:v._transitioning}),Ee.call(u,oe,P,v);var ke=b.ensureSingle(he,"g","slicetext"),be=b.ensureSingle(ke,"text","",function(we){we.attr("data-notex",1)}),Ie=b.ensureUniformFontSize(v,g.determineTextFont(P,oe,w.font));be.text(D.formatSliceLabel(oe,G,P,m,w)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Ie).call(d.convertToTspans,v);var Fe=T.bBox(be.node());oe.transform=a(Fe,oe,C),oe.transform.targetX=me(oe),oe.transform.targetY=ve(oe);var ce=function(we,ye){var Ce=we.transform;return o(Ce,ye),Ce.fontSize=Ie.size,t(P.type,Ce,w),b.getTextTransform(Ce)};E?be.transition().attrTween("transform",function(we){var ye=function(Ce){var Re,ze=Y[g.getPtId(Ce)],He=Ce.transform;if(ze)Re=ze;else if(Re={rpx1:Ce.rpx1,transform:{textPosAngle:He.textPosAngle,scale:0,rotate:He.rotate,rCenter:He.rCenter,x:He.x,y:He.y}},J)if(Ce.parent)if(Oe){var Ge=Ce.x1>Oe?2*Math.PI:0;Re.x0=Re.x1=Ge}else b.extendFlat(Re,se(Ce));else Re.x0=Re.x1=ae;else Re.x0=Re.x1=ae;var Je=l(Re.transform.textPosAngle,Ce.transform.textPosAngle),ot=l(Re.rpx1,Ce.rpx1),Qe=l(Re.x0,Ce.x0),vt=l(Re.x1,Ce.x1),xt=l(Re.transform.scale,He.scale),mt=l(Re.transform.rotate,He.rotate),rt=He.rCenter===0?3:Re.transform.rCenter===0?1/3:1,it=l(Re.transform.rCenter,He.rCenter);return function(Tt){var Mt=ot(Tt),Pt=Qe(Tt),kt=vt(Tt),Ze=function(Ve){return it(Math.pow(Ve,rt))}(Tt),Xe={pxmid:ge(Mt,(Pt+kt)/2),rpx1:Mt,transform:{textPosAngle:Je(Tt),rCenter:Ze,x:He.x,y:He.y}};return t(P.type,He,w),{transform:{targetX:me(Xe),targetY:ve(Xe),scale:xt(Tt),rotate:mt(Tt),rCenter:Ze}}}}(we);return function(Ce){return ce(ye(Ce),Fe)}}):be.attr("transform",ce(oe,Fe))})}function y(v){return m=v.rpx1,_=v.transform.textPosAngle,[m*Math.sin(_),-m*Math.cos(_)];var m,_}D.plot=function(v,m,_,f){var S,w,E=v._fullLayout,L=E._sunburstlayer,C=!_,P=!E.uniformtext.mode&&g.hasTransition(_);i("sunburst",E),(S=L.selectAll("g.trace.sunburst").data(m,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),P?(f&&(w=f()),M.transition().duration(_.duration).ease(_.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){L.selectAll("g.trace").each(function(z){h(v,z,this,_)})})):(S.each(function(z){h(v,z,this,_)}),E.uniformtext.mode&&p(v,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&S.exit().remove()},D.formatSliceLabel=function(v,m,_,f,S){var w=_.texttemplate,E=_.textinfo;if(!(w||E&&E!=="none"))return"";var L=S.separators,C=f[0],P=v.data.data,z=C.hierarchy,G=g.isHierarchyRoot(v),O=g.getParent(z,v),H=g.getValue(v);if(!w){var N,B=E.split("+"),V=function(re){return B.indexOf(re)!==-1},q=[];if(V("label")&&P.label&&q.push(P.label),P.hasOwnProperty("v")&&V("value")&&q.push(g.formatValue(P.v,L)),!G){V("current path")&&q.push(g.getPath(v.data));var te=0;V("percent parent")&&te++,V("percent entry")&&te++,V("percent root")&&te++;var K=te>1;if(te){var J,Y=function(re){N=g.formatPercent(J,L),K&&(N+=" of "+re),q.push(N)};V("percent parent")&&!G&&(J=H/g.getValue(O),Y("parent")),V("percent entry")&&(J=H/g.getValue(m),Y("entry")),V("percent root")&&(J=H/g.getValue(z),Y("root"))}}return V("text")&&(N=b.castOption(_,P.i,"text"),b.isValidTextValue(N)&&q.push(N)),q.join("<br>")}var W=b.castOption(_,P.i,"texttemplate");if(!W)return"";var Q={};P.label&&(Q.label=P.label),P.hasOwnProperty("v")&&(Q.value=P.v,Q.valueLabel=g.formatValue(P.v,L)),Q.currentPath=g.getPath(v.data),G||(Q.percentParent=H/g.getValue(O),Q.percentParentLabel=g.formatPercent(Q.percentParent,L),Q.parent=g.getPtLabel(O)),Q.percentEntry=H/g.getValue(m),Q.percentEntryLabel=g.formatPercent(Q.percentEntry,L),Q.entry=g.getPtLabel(m),Q.percentRoot=H/g.getValue(z),Q.percentRootLabel=g.formatPercent(Q.percentRoot,L),Q.root=g.getPtLabel(z),P.hasOwnProperty("color")&&(Q.color=P.color);var ne=b.castOption(_,P.i,"text");return(b.isValidTextValue(ne)||ne==="")&&(Q.text=ne),Q.customdata=b.castOption(_,P.i,"customdata"),b.texttemplateString(W,Q,S._d3locale,Q,_._meta||{})}},29969:function(ee,D,e){var M=e(39898),k=e(7901),l=e(71828),T=e(72597).resizeText,b=e(43467);function d(s,t,i,r){var n=t.data.data,o=!t.children,a=n.i,u=l.castOption(i,a,"marker.line.color")||k.defaultLine,p=l.castOption(i,a,"marker.line.width")||0;s.call(b,t,i,r).style("stroke-width",p).call(k.stroke,u).style("opacity",o?i.leaf.opacity:null)}ee.exports={style:function(s){var t=s._fullLayout._sunburstlayer.selectAll(".trace");T(s,t,"sunburst"),t.each(function(i){var r=M.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(o){M.select(this).call(d,o,n,s)})})},styleOne:d}},54532:function(ee,D,e){var M=e(7901),k=e(50693),l=e(12663).axisHoverFormat,T=e(5386).fF,b=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=ee.exports=s(d({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:d({},k.zauto,{}),zmin:d({},k.zmin,{}),zmax:d({},k.zmax,{})},hoverinfo:d({},b.hoverinfo),showlegend:d({},b.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},18396:function(ee,D,e){var M=e(78803);ee.exports=function(k,l){l.surfacecolor?M(k,l,{vals:l.surfacecolor,containerStr:"",cLetter:"c"}):M(k,l,{vals:l.z,containerStr:"",cLetter:"c"})}},43768:function(ee,D,e){var M=e(9330).gl_surface3d,k=e(9330).ndarray,l=e(9330).ndarray_linear_interpolate.d2,T=e(824),b=e(43907),d=e(71828).isArrayOrTypedArray,s=e(81697).parseColorScale,t=e(78614),i=e(21081).extractOpts;function r(_,f,S){this.scene=_,this.uid=S,this.surface=f,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(_,f,S,w){var E=d(this.data.x)?d(this.data.x[0])?this.data.x[f][_]:this.data.x[_]:_;return S===void 0?E:w.d2l(E,0,S)},n.getYat=function(_,f,S,w){var E=d(this.data.y)?d(this.data.y[0])?this.data.y[f][_]:this.data.y[f]:f;return S===void 0?E:w.d2l(E,0,S)},n.getZat=function(_,f,S,w){var E=this.data.z[f][_];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[f][_]),S===void 0?E:w.d2l(E,0,S)},n.handlePick=function(_){if(_.object===this.surface){var f=(_.data.index[0]-1)/this.dataScaleX-1,S=(_.data.index[1]-1)/this.dataScaleY-1,w=Math.max(Math.min(Math.round(f),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);_.index=[w,E],_.traceCoordinate=[this.getXat(w,E),this.getYat(w,E),this.getZat(w,E)],_.dataCoordinate=[this.getXat(w,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var L=0;L<3;L++)_.dataCoordinate[L]!=null&&(_.dataCoordinate[L]*=this.scene.dataScale[L]);var C=this.data.hovertext||this.data.text;return Array.isArray(C)&&C[E]&&C[E][w]!==void 0?_.textLabel=C[E][w]:_.textLabel=C||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var o=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function a(_,f){if(_<f)return 0;for(var S=0;Math.floor(_%f)===0;)_/=f,S++;return S}function u(_){for(var f=[],S=0;S<o.length;S++){var w=o[S];f.push(a(_,w))}return f}function p(_){for(var f=u(_),S=_,w=0;w<o.length;w++)if(f[w]>0){S=o[w];break}return S}function c(_,f){if(!(_<1||f<1)){for(var S=u(_),w=u(f),E=1,L=0;L<o.length;L++)E*=Math.pow(o[L],Math.max(S[L],w[L]));return E}}n.calcXnums=function(_){var f,S=[];for(f=1;f<_;f++){var w=this.getXat(f-1,0),E=this.getXat(f,0);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var L=0;for(f=1;f<_;f++)L+=S[f-1];for(f=1;f<_;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(L/S[f-1]);return S},n.calcYnums=function(_){var f,S=[];for(f=1;f<_;f++){var w=this.getYat(0,f-1),E=this.getYat(0,f);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var L=0;for(f=1;f<_;f++)L+=S[f-1];for(f=1;f<_;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(L/S[f-1]);return S};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],g=x[9],h=x[13];function y(_,f,S){var w=S[8]+S[2]*f[0]+S[5]*f[1];return _[0]=(S[6]+S[0]*f[0]+S[3]*f[1])/w,_[1]=(S[7]+S[1]*f[0]+S[4]*f[1])/w,_}function v(_,f,S){return function(w,E,L,C){for(var P=[0,0],z=w.shape[0],G=w.shape[1],O=0;O<z;O++)for(var H=0;H<G;H++)L(P,[O,H],C),w.set(O,H,l(E,P[0],P[1]))}(_,f,y,S),_}function m(_,f){for(var S=!1,w=0;w<_.length;w++)if(f===_[w]){S=!0;break}S===!1&&_.push(f)}n.estimateScale=function(_,f){for(var S=1+function(E){if(E.length!==0){for(var L=1,C=0;C<E.length;C++)L=c(L,E[C]);return L}}(f===0?this.calcXnums(_):this.calcYnums(_));S<g;)S*=2;for(;S>h;)S--,S/=p(S),++S<g&&(S=h);var w=Math.round(S/_);return w>1?w:1},n.refineCoords=function(_){for(var f=this.dataScaleX,S=this.dataScaleY,w=_[0].shape[0],E=_[0].shape[1],L=0|Math.floor(_[0].shape[0]*f+1),C=0|Math.floor(_[0].shape[1]*S+1),P=1+w+1,z=1+E+1,G=k(new Float32Array(P*z),[P,z]),O=[1/f,0,0,0,1/S,0,0,0,1],H=0;H<_.length;++H){this.surface.padField(G,_[H]);var N=k(new Float32Array(L*C),[L,C]);v(N,G,O),_[H]=N}},n.setContourLevels=function(){var _,f,S,w=[[],[],[]],E=[!1,!1,!1],L=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(L=!0,this.contourSize[_]>0&&this.contourStart[_]!==null&&this.contourEnd[_]!==null&&this.contourEnd[_]>this.contourStart[_]))for(E[_]=!0,f=this.contourStart[_];f<this.contourEnd[_];f+=this.contourSize[_])S=f*this.scene.dataScale[_],m(w[_],S);if(L){var C=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(C[_]=E[_]?w[_]:this.scene.contourLevels[_]);this.surface.update({levels:C})}},n.update=function(_){var f,S,w,E,L=this.scene,C=L.fullSceneLayout,P=this.surface,z=s(_),G=L.dataScale,O=_.z[0].length,H=_._ylength,N=L.contourLevels;this.data=_;var B=[];for(f=0;f<3;f++)for(B[f]=[],S=0;S<O;S++)B[f][S]=[];for(S=0;S<O;S++)for(w=0;w<H;w++)B[0][S][w]=this.getXat(S,w,_.xcalendar,C.xaxis),B[1][S][w]=this.getYat(S,w,_.ycalendar,C.yaxis),B[2][S][w]=this.getZat(S,w,_.zcalendar,C.zaxis);if(_.connectgaps)for(_._emptypoints=b(B[2]),T(B[2],_._emptypoints),_._interpolatedZ=[],S=0;S<O;S++)for(_._interpolatedZ[S]=[],w=0;w<H;w++)_._interpolatedZ[S][w]=B[2][S][w];for(f=0;f<3;f++)for(S=0;S<O;S++)for(w=0;w<H;w++)(E=B[f][S][w])==null?B[f][S][w]=NaN:E=B[f][S][w]*=G[f];for(f=0;f<3;f++)for(S=0;S<O;S++)for(w=0;w<H;w++)(E=B[f][S][w])!=null&&(this.minValues[f]>E&&(this.minValues[f]=E),this.maxValues[f]<E&&(this.maxValues[f]=E));for(f=0;f<3;f++)this.objectOffset[f]=.5*(this.minValues[f]+this.maxValues[f]);for(f=0;f<3;f++)for(S=0;S<O;S++)for(w=0;w<H;w++)(E=B[f][S][w])!=null&&(B[f][S][w]-=this.objectOffset[f]);var V=[k(new Float32Array(O*H),[O,H]),k(new Float32Array(O*H),[O,H]),k(new Float32Array(O*H),[O,H])];for(f=0;f<3;f++)for(S=0;S<O;S++)for(w=0;w<H;w++)V[f].set(S,w,B[f][S][w]);B=[];var q={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},te=i(_);if(q.intensityBounds=[te.min,te.max],_.surfacecolor){var K=k(new Float32Array(O*H),[O,H]);for(S=0;S<O;S++)for(w=0;w<H;w++)K.set(S,w,_.surfacecolor[w][S]);V.push(K)}else q.intensityBounds[0]*=G[2],q.intensityBounds[1]*=G[2];(h<V[0].shape[0]||h<V[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(V[0].shape[0],0),this.dataScaleY=this.estimateScale(V[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(V)),_.surfacecolor&&(q.intensity=V.pop());var J=[!0,!0,!0],Y=["x","y","z"];for(f=0;f<3;++f){var W=_.contours[Y[f]];J[f]=W.highlight,q.showContour[f]=W.show||W.highlight,q.showContour[f]&&(q.contourProject[f]=[W.project.x,W.project.y,W.project.z],W.show?(this.showContour[f]=!0,q.levels[f]=N[f],P.highlightColor[f]=q.contourColor[f]=t(W.color),W.usecolormap?P.highlightTint[f]=q.contourTint[f]=0:P.highlightTint[f]=q.contourTint[f]=1,q.contourWidth[f]=W.width,this.contourStart[f]=W.start,this.contourEnd[f]=W.end,this.contourSize[f]=W.size):(this.showContour[f]=!1,this.contourStart[f]=null,this.contourEnd[f]=null,this.contourSize[f]=0),W.highlight&&(q.dynamicColor[f]=t(W.highlightcolor),q.dynamicWidth[f]=W.highlightwidth))}(function(Q){var ne=Q[0].rgb,re=Q[Q.length-1].rgb;return ne[0]===re[0]&&ne[1]===re[1]&&ne[2]===re[2]&&ne[3]===re[3]})(z)&&(q.vertexColor=!0),q.objectOffset=this.objectOffset,q.coords=V,P.update(q),P.visible=_.visible,P.enableDynamic=J,P.enableHighlight=J,P.snapToData=!0,"lighting"in _&&(P.ambientLight=_.lighting.ambient,P.diffuseLight=_.lighting.diffuse,P.specularLight=_.lighting.specular,P.roughness=_.lighting.roughness,P.fresnel=_.lighting.fresnel),"lightposition"in _&&(P.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ee.exports=function(_,f){var S=_.glplot.gl,w=M({gl:S}),E=new r(_,w,f.uid);return w._trace=E,E.update(f),_.glplot.add(w),E}},91831:function(ee,D,e){var M=e(73972),k=e(71828),l=e(1586),T=e(54532);function b(s,t,i,r){var n=r("opacityscale");n==="max"?t.opacityscale=[[0,.1],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,.1]]:n==="extremes"?t.opacityscale=function(o,a){for(var u=[],p=0;p<32;p++){var c=p/31,x=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,x))])}return u}():function(o){var a=0;if(!Array.isArray(o)||o.length<2||!o[0]||!o[o.length-1]||+o[0][0]!=0||+o[o.length-1][0]!=1)return!1;for(var u=0;u<o.length;u++){var p=o[u];if(p.length!==2||+p[0]<a)return!1;a=+p[0]}return!0}(n)||(t.opacityscale=void 0)}function d(s,t,i){t in s&&!(i in s)&&(s[i]=s[t])}ee.exports={supplyDefaults:function(s,t,i,r){var n,o;function a(m,_){return k.coerce(s,t,T,m,_)}var u=a("x"),p=a("y"),c=a("z");if(!c||!c.length||u&&u.length<1||p&&p.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&k.isArrayOrTypedArray(u[0])?c.length:c[0].length,t._ylength=c.length,M.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],r),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){a(m)});var x=a("surfacecolor"),g=["x","y","z"];for(n=0;n<3;++n){var h="contours."+g[n],y=a(h+".show"),v=a(h+".highlight");if(y||v)for(o=0;o<3;++o)a(h+".project."+g[o]);y&&(a(h+".color"),a(h+".width"),a(h+".usecolormap")),v&&(a(h+".highlightcolor"),a(h+".highlightwidth")),a(h+".start"),a(h+".end"),a(h+".size")}x||(d(s,"zmin","cmin"),d(s,"zmax","cmax"),d(s,"zauto","cauto")),l(s,t,r,a,{prefix:"",cLetter:"c"}),b(0,t,0,a),t._length=null}},opacityscaleDefaults:b}},93601:function(ee,D,e){ee.exports={attributes:e(54532),supplyDefaults:e(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(18396),plot:e(43768),moduleType:"trace",name:"surface",basePlotModule:e(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(ee,D,e){var M=e(50215),k=e(1426).extendFlat,l=e(30962).overrideAll,T=e(41940),b=e(27670).Y,d=e(12663).descriptionOnlyNumbers;(ee.exports=l({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(ee,D,e){var M=e(27659).a0,k=e(36736),l="table";D.name=l,D.plot=function(T){var b=M(T.calcdata,l)[0];b.length&&k(T,b)},D.clean=function(T,b,d,s){var t=s._has&&s._has(l),i=b._has&&b._has(l);t&&!i&&s._paperdiv.selectAll(".table").remove()}},76333:function(ee,D,e){var M=e(28984).wrap;ee.exports=function(){return M({})}},49850:function(ee){ee.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(ee,D,e){var M=e(49850),k=e(1426).extendFlat,l=e(92770);function T(n){if(Array.isArray(n)){for(var o=0,a=0;a<n.length;a++)o=Math.max(o,T(n[a]));return o}return n}function b(n,o){return n+o}function d(n){var o,a=n.slice(),u=1/0,p=0;for(o=0;o<a.length;o++)Array.isArray(a[o])||(a[o]=[a[o]]),u=Math.min(u,a[o].length),p=Math.max(p,a[o].length);if(u!==p)for(o=0;o<a.length;o++){var c=p-a[o].length;c&&(a[o]=a[o].concat(s(c)))}return a}function s(n){for(var o=new Array(n),a=0;a<n;a++)o[a]="";return o}function t(n){return n.calcdata.columns.reduce(function(o,a){return a.xIndex<n.xIndex?o+a.columnWidth:o},0)}function i(n,o){return Object.keys(n).map(function(a){return k({},n[a],{auxiliaryBlocks:o})})}function r(n,o){for(var a,u={},p=0,c=0,x={firstRowIndex:null,lastRowIndex:null,rows:[]},g=0,h=0,y=0;y<n.length;y++)a=n[y],x.rows.push({rowIndex:y,rowHeight:a}),((c+=a)>=o||y===n.length-1)&&(u[p]=x,x.key=h++,x.firstRowIndex=g,x.lastRowIndex=y,x={firstRowIndex:null,lastRowIndex:null,rows:[]},p+=c,g=y+1,c=0);return u}ee.exports=function(n,o){var a=d(o.cells.values),u=function(G){return G.slice(o.header.values.length,G.length)},p=d(o.header.values);p.length&&!p[0].length&&(p[0]=[""],p=d(p));var c=p.concat(u(a).map(function(){return s((p[0]||[""]).length)})),x=o.domain,g=Math.floor(n._fullLayout._size.w*(x.x[1]-x.x[0])),h=Math.floor(n._fullLayout._size.h*(x.y[1]-x.y[0])),y=o.header.values.length?c[0].map(function(){return o.header.height}):[M.emptyHeaderHeight],v=a.length?a[0].map(function(){return o.cells.height}):[],m=y.reduce(b,0),_=r(v,h-m+M.uplift),f=i(r(y,m),[]),S=i(_,f),w={},E=o._fullInput.columnorder.concat(u(a.map(function(G,O){return O}))),L=c.map(function(G,O){var H=Array.isArray(o.columnwidth)?o.columnwidth[Math.min(O,o.columnwidth.length-1)]:o.columnwidth;return l(H)?Number(H):1}),C=L.reduce(b,0);L=L.map(function(G){return G/C*g});var P=Math.max(T(o.header.line.width),T(o.cells.line.width)),z={key:o.uid+n._context.staticPlot,translateX:x.x[0]*n._fullLayout._size.w,translateY:n._fullLayout._size.h*(1-x.y[1]),size:n._fullLayout._size,width:g,maxLineWidth:P,height:h,columnOrder:E,groupHeight:h,rowBlocks:S,headerRowBlocks:f,scrollY:0,cells:k({},o.cells,{values:a}),headerCells:k({},o.header,{values:c}),gdColumns:c.map(function(G){return G[0]}),gdColumnsOriginalOrder:c.map(function(G){return G[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:c.map(function(G,O){var H=w[G];return w[G]=(H||0)+1,{key:G+"__"+w[G],label:G,specIndex:O,xIndex:E[O],xScale:t,x:void 0,calcdata:void 0,columnWidth:L[O]}})};return z.columns.forEach(function(G){G.calcdata=z,G.x=t(G)}),z}},56269:function(ee,D,e){var M=e(1426).extendFlat;D.splitToPanels=function(k){var l=[0,0],T=M({},k,{key:"header",type:"header",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:M({},k.calcdata,{cells:k.calcdata.headerCells})});return[M({},k,{key:"cells1",type:"cells",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),M({},k,{key:"cells2",type:"cells",page:1,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},D.splitToCells=function(k){var l=function(T){var b=T.rowBlocks[T.page],d=b?b.rows[0].rowIndex:0;return[d,b?d+b.rows.length:0]}(k);return(k.values||[]).slice(l[0],l[1]).map(function(T,b){return{keyWithinBlock:b+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:l[0]+b,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},39754:function(ee,D,e){var M=e(71828),k=e(44464),l=e(27670).c;ee.exports=function(T,b,d,s){function t(i,r){return M.coerce(T,b,k,i,r)}l(b,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),M.coerceFont(t,"header.font",M.extendFlat({},s.font)),function(i,r){for(var n=i.columnorder||[],o=i.header.values.length,a=n.slice(0,o),u=a.slice().sort(function(x,g){return x-g}),p=a.map(function(x){return u.indexOf(x)}),c=p.length;c<o;c++)p.push(c);r("columnorder",p)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),M.coerceFont(t,"cells.font",M.extendFlat({},s.font)),b._length=null}},96595:function(ee,D,e){ee.exports={attributes:e(44464),supplyDefaults:e(39754),calc:e(76333),plot:e(36736),moduleType:"trace",name:"table",basePlotModule:e(99469),categories:["noOpacity"],meta:{}}},36736:function(ee,D,e){var M=e(49850),k=e(39898),l=e(71828).numberFormat,T=e(28984),b=e(91424),d=e(63893),s=e(71828).raiseToTop,t=e(71828).strTranslate,i=e(71828).cancelTransition,r=e(51018),n=e(56269),o=e(7901);function a(V){return Math.ceil(V.calcdata.maxLineWidth/2)}function u(V,q){return"clip"+V._fullLayout._uid+"_scrollAreaBottomClip_"+q.key}function p(V,q){return"clip"+V._fullLayout._uid+"_columnBoundaryClippath_"+q.calcdata.key+"_"+q.specIndex}function c(V){return[].concat.apply([],V.map(function(q){return q})).map(function(q){return q.__data__})}function x(V,q,te){var K=V.selectAll("."+M.cn.scrollbarKit).data(T.repeat,T.keyFun);K.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),K.each(function(ne){var re=ne.scrollbarState;re.totalHeight=function(ae){var ue=ae.rowBlocks;return O(ue,ue.length-1)+(ue.length?H(ue[ue.length-1],1/0):1)}(ne),re.scrollableAreaHeight=ne.groupHeight-S(ne),re.currentlyVisibleHeight=Math.min(re.totalHeight,re.scrollableAreaHeight),re.ratio=re.currentlyVisibleHeight/re.totalHeight,re.barLength=Math.max(re.ratio*re.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),re.barWiggleRoom=re.currentlyVisibleHeight-re.barLength,re.wiggleRoom=Math.max(0,re.totalHeight-re.scrollableAreaHeight),re.topY=re.barWiggleRoom===0?0:ne.scrollY/re.wiggleRoom*re.barWiggleRoom,re.bottomY=re.topY+re.barLength,re.dragMultiplier=re.wiggleRoom/re.barWiggleRoom}).attr("transform",function(ne){var re=ne.width+M.scrollbarWidth/2+M.scrollbarOffset;return t(re,S(ne))});var J=K.selectAll("."+M.cn.scrollbar).data(T.repeat,T.keyFun);J.enter().append("g").classed(M.cn.scrollbar,!0);var Y=J.selectAll("."+M.cn.scrollbarSlider).data(T.repeat,T.keyFun);Y.enter().append("g").classed(M.cn.scrollbarSlider,!0),Y.attr("transform",function(ne){return t(0,ne.scrollbarState.topY||0)});var W=Y.selectAll("."+M.cn.scrollbarGlyph).data(T.repeat,T.keyFun);W.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),W.attr("y2",function(ne){return ne.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(ne){return ne.columnDragInProgress||!ne.scrollbarState.barWiggleRoom||te?0:.4}),W.transition().delay(0).duration(0),W.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var Q=J.selectAll("."+M.cn.scrollbarCaptureZone).data(T.repeat,T.keyFun);Q.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ne){var re=k.event.y,ae=this.getBoundingClientRect(),ue=ne.scrollbarState,pe=re-ae.top,ge=k.scale.linear().domain([0,ue.scrollableAreaHeight]).range([0,ue.totalHeight]).clamp(!0);ue.topY<=pe&&pe<=ue.bottomY||E(q,V,null,ge(pe-ue.barLength/2))(ne)}).call(k.behavior.drag().origin(function(ne){return k.event.stopPropagation(),ne.scrollbarState.scrollbarScrollInProgress=!0,ne}).on("drag",E(q,V)).on("dragend",function(){})),Q.attr("y2",function(ne){return ne.scrollbarState.scrollableAreaHeight}),q._context.staticPlot&&(W.remove(),Q.remove())}function g(V,q,te,K){var J=function(re){var ae=re.selectAll("."+M.cn.columnCells).data(T.repeat,T.keyFun);return ae.enter().append("g").classed(M.cn.columnCells,!0),ae.exit().remove(),ae}(te),Y=function(re){var ae=re.selectAll("."+M.cn.columnCell).data(n.splitToCells,function(ue){return ue.keyWithinBlock});return ae.enter().append("g").classed(M.cn.columnCell,!0),ae.exit().remove(),ae}(J);(function(re){re.each(function(ae,ue){var pe=ae.calcdata.cells.font,ge=ae.column.specIndex,_e={size:v(pe.size,ge,ue),color:v(pe.color,ge,ue),family:v(pe.family,ge,ue)};ae.rowNumber=ae.key,ae.align=v(ae.calcdata.cells.align,ge,ue),ae.cellBorderWidth=v(ae.calcdata.cells.line.width,ge,ue),ae.font=_e})})(Y);var W=function(re){var ae=re.selectAll("."+M.cn.cellRect).data(T.repeat,function(ue){return ue.keyWithinBlock});return ae.enter().append("rect").classed(M.cn.cellRect,!0),ae}(Y);(function(re){re.attr("width",function(ae){return ae.column.columnWidth}).attr("stroke-width",function(ae){return ae.cellBorderWidth}).each(function(ae){var ue=k.select(this);o.stroke(ue,v(ae.calcdata.cells.line.color,ae.column.specIndex,ae.rowNumber)),o.fill(ue,v(ae.calcdata.cells.fill.color,ae.column.specIndex,ae.rowNumber))})})(W);var Q=function(re){var ae=re.selectAll("."+M.cn.cellTextHolder).data(T.repeat,function(ue){return ue.keyWithinBlock});return ae.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ae}(Y),ne=function(re){var ae=re.selectAll("."+M.cn.cellText).data(T.repeat,function(ue){return ue.keyWithinBlock});return ae.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ae}(Q);(function(re){re.each(function(ae){b.font(k.select(this),ae.font)})})(ne),h(ne,q,K,V),G(Y)}function h(V,q,te,K){V.text(function(J){var Y=J.column.specIndex,W=J.rowNumber,Q=J.value,ne=typeof Q=="string",re=ne&&Q.match(/<br>/i),ae=!ne||re;J.mayHaveMarkup=ne&&Q.match(/[<&>]/);var ue,pe=typeof(ue=Q)=="string"&&ue.match(M.latexCheck);J.latex=pe;var ge,_e,me=pe?"":v(J.calcdata.cells.prefix,Y,W)||"",ve=pe?"":v(J.calcdata.cells.suffix,Y,W)||"",Oe=pe?null:v(J.calcdata.cells.format,Y,W)||null,Me=me+(Oe?l(Oe)(J.value):J.value)+ve;if(J.wrappingNeeded=!J.wrapped&&!ae&&!pe&&(ge=y(Me)),J.cellHeightMayIncrease=re||pe||J.mayHaveMarkup||(ge===void 0?y(Me):ge),J.needsConvertToTspans=J.mayHaveMarkup||J.wrappingNeeded||J.latex,J.wrappingNeeded){var Te=(M.wrapSplitCharacter===" "?Me.replace(/<a href=/gi,"<a_href="):Me).split(M.wrapSplitCharacter),se=M.wrapSplitCharacter===" "?Te.map(function(oe){return oe.replace(/<a_href=/gi,"<a href=")}):Te;J.fragments=se.map(function(oe){return{text:oe,width:null}}),J.fragments.push({fragment:M.wrapSpacer,width:null}),_e=se.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete J.fragments,_e=Me;return _e}).attr("dy",function(J){return J.needsConvertToTspans?0:"0.75em"}).each(function(J){var Y=this,W=k.select(Y),Q=J.wrappingNeeded?C:P;J.needsConvertToTspans?d.convertToTspans(W,K,Q(te,Y,q,K,J)):k.select(Y.parentNode).attr("transform",function(ne){return t(z(ne),M.cellPad)}).attr("text-anchor",function(ne){return{left:"start",center:"middle",right:"end"}[ne.align]})})}function y(V){return V.indexOf(M.wrapSplitCharacter)!==-1}function v(V,q,te){if(Array.isArray(V)){var K=V[Math.min(q,V.length-1)];return Array.isArray(K)?K[Math.min(te,K.length-1)]:K}return V}function m(V,q,te){V.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",t(q.x,te))}function _(V){return V.type==="cells"}function f(V){return V.type==="header"}function S(V){return(V.rowBlocks.length?V.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(q,te){return q+H(te,1/0)},0)}function w(V,q,te){var K=c(q)[0];if(K!==void 0){var J=K.rowBlocks,Y=K.calcdata,W=O(J,J.length),Q=K.calcdata.groupHeight-S(K),ne=Y.scrollY=Math.max(0,Math.min(W-Q,Y.scrollY)),re=function(ae,ue,pe){for(var ge=[],_e=0,me=0;me<ae.length;me++){for(var ve=ae[me],Oe=ve.rows,Me=0,Te=0;Te<Oe.length;Te++)Me+=Oe[Te].rowHeight;ve.allRowsHeight=Me,ue<_e+Me&&ue+pe>_e&&ge.push(me),_e+=Me}return ge}(J,ne,Q);re.length===1&&(re[0]===J.length-1?re.unshift(re[0]-1):re.push(re[0]+1)),re[0]%2&&re.reverse(),q.each(function(ae,ue){ae.page=re[ue],ae.scrollY=ne}),q.attr("transform",function(ae){var ue=O(ae.rowBlocks,ae.page)-ae.scrollY;return t(0,ue)}),V&&(L(V,te,q,re,K.prevPages,K,0),L(V,te,q,re,K.prevPages,K,1),x(te,V))}}function E(V,q,te,K){return function(J){var Y=J.calcdata?J.calcdata:J,W=q.filter(function(ae){return Y.key===ae.key}),Q=te||Y.scrollbarState.dragMultiplier,ne=Y.scrollY;Y.scrollY=K===void 0?Y.scrollY+Q*k.event.dy:K;var re=W.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(_);return w(V,re,W),Y.scrollY===ne}}function L(V,q,te,K,J,Y,W){K[W]!==J[W]&&(clearTimeout(Y.currentRepaint[W]),Y.currentRepaint[W]=setTimeout(function(){var Q=te.filter(function(ne,re){return re===W&&K[re]!==J[re]});g(V,q,Q,te),J[W]=K[W]}))}function C(V,q,te,K){return function(){var J=k.select(q.parentNode);J.each(function(Y){var W=Y.fragments;J.selectAll("tspan.line").each(function(_e,me){W[me].width=this.getComputedTextLength()});var Q,ne,re=W[W.length-1].width,ae=W.slice(0,-1),ue=[],pe=0,ge=Y.column.columnWidth-2*M.cellPad;for(Y.value="";ae.length;)pe+(ne=(Q=ae.shift()).width+re)>ge&&(Y.value+=ue.join(M.wrapSpacer)+M.lineBreaker,ue=[],pe=0),ue.push(Q.text),pe+=ne;pe&&(Y.value+=ue.join(M.wrapSpacer)),Y.wrapped=!0}),J.selectAll("tspan.line").remove(),h(J.select("."+M.cn.cellText),te,V,K),k.select(q.parentNode.parentNode).call(G)}}function P(V,q,te,K,J){return function(){if(!J.settledY){var Y=k.select(q.parentNode),W=B(J),Q=J.key-W.firstRowIndex,ne=W.rows[Q].rowHeight,re=J.cellHeightMayIncrease?q.parentNode.getBoundingClientRect().height+2*M.cellPad:ne,ae=Math.max(re,ne);ae-W.rows[Q].rowHeight&&(W.rows[Q].rowHeight=ae,V.selectAll("."+M.cn.columnCell).call(G),w(null,V.filter(_),0),x(te,K,!0)),Y.attr("transform",function(){var ue=this,pe=ue.parentNode.getBoundingClientRect(),ge=k.select(ue.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),_e=ue.transform.baseVal.consolidate(),me=ge.top-pe.top+(_e?_e.matrix.f:M.cellPad);return t(z(J,k.select(ue.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),me)}),J.settledY=!0}}}function z(V,q){switch(V.align){case"left":default:return M.cellPad;case"right":return V.column.columnWidth-(q||0)-M.cellPad;case"center":return(V.column.columnWidth-(q||0))/2}}function G(V){V.attr("transform",function(q){var te=q.rowBlocks[0].auxiliaryBlocks.reduce(function(J,Y){return J+H(Y,1/0)},0),K=H(B(q),q.key);return t(0,K+te)}).selectAll("."+M.cn.cellRect).attr("height",function(q){return(te=B(q),K=q.key,te.rows[K-te.firstRowIndex]).rowHeight;var te,K})}function O(V,q){for(var te=0,K=q-1;K>=0;K--)te+=N(V[K]);return te}function H(V,q){for(var te=0,K=0;K<V.rows.length&&V.rows[K].rowIndex<q;K++)te+=V.rows[K].rowHeight;return te}function N(V){var q=V.allRowsHeight;if(q!==void 0)return q;for(var te=0,K=0;K<V.rows.length;K++)te+=V.rows[K].rowHeight;return V.allRowsHeight=te,te}function B(V){return V.rowBlocks[V.page]}ee.exports=function(V,q){var te=!V._context.staticPlot,K=V._fullLayout._paper.selectAll("."+M.cn.table).data(q.map(function(ve){var Oe=T.unwrap(ve).trace;return r(V,Oe)}),T.keyFun);K.exit().remove(),K.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),K.attr("width",function(ve){return ve.width+ve.size.l+ve.size.r}).attr("height",function(ve){return ve.height+ve.size.t+ve.size.b}).attr("transform",function(ve){return t(ve.translateX,ve.translateY)});var J=K.selectAll("."+M.cn.tableControlView).data(T.repeat,T.keyFun),Y=J.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(te){var W="onwheel"in document?"wheel":"mousewheel";Y.on("mousemove",function(ve){J.filter(function(Oe){return ve===Oe}).call(x,V)}).on(W,function(ve){if(!ve.scrollbarState.wheeling){ve.scrollbarState.wheeling=!0;var Oe=ve.scrollY+k.event.deltaY;E(V,J,null,Oe)(ve)||(k.event.stopPropagation(),k.event.preventDefault()),ve.scrollbarState.wheeling=!1}}).call(x,V,!0)}J.attr("transform",function(ve){return t(ve.size.l,ve.size.t)});var Q=J.selectAll("."+M.cn.scrollBackground).data(T.repeat,T.keyFun);Q.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),Q.attr("width",function(ve){return ve.width}).attr("height",function(ve){return ve.height}),J.each(function(ve){b.setClipUrl(k.select(this),u(V,ve),V)});var ne=J.selectAll("."+M.cn.yColumn).data(function(ve){return ve.columns},T.keyFun);ne.enter().append("g").classed(M.cn.yColumn,!0),ne.exit().remove(),ne.attr("transform",function(ve){return t(ve.x,0)}),te&&ne.call(k.behavior.drag().origin(function(ve){return m(k.select(this),ve,-M.uplift),s(this),ve.calcdata.columnDragInProgress=!0,x(J.filter(function(Oe){return ve.calcdata.key===Oe.key}),V),ve}).on("drag",function(ve){var Oe=k.select(this),Me=function(Te){return(ve===Te?k.event.x:Te.x)+Te.columnWidth/2};ve.x=Math.max(-M.overdrag,Math.min(ve.calcdata.width+M.overdrag-ve.columnWidth,k.event.x)),c(ne).filter(function(Te){return Te.calcdata.key===ve.calcdata.key}).sort(function(Te,se){return Me(Te)-Me(se)}).forEach(function(Te,se){Te.xIndex=se,Te.x=ve===Te?Te.x:Te.xScale(Te)}),ne.filter(function(Te){return ve!==Te}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(Te){return t(Te.x,0)}),Oe.call(i).attr("transform",t(ve.x,-M.uplift))}).on("dragend",function(ve){var Oe=k.select(this),Me=ve.calcdata;ve.x=ve.xScale(ve),ve.calcdata.columnDragInProgress=!1,m(Oe,ve,0),function(Te,se,oe){var he=se.gdColumnsOriginalOrder;se.gdColumns.sort(function(Ee,ke){return oe[he.indexOf(Ee)]-oe[he.indexOf(ke)]}),se.columnorder=oe,Te.emit("plotly_restyle")}(V,Me,Me.columns.map(function(Te){return Te.xIndex}))})),ne.each(function(ve){b.setClipUrl(k.select(this),p(V,ve),V)});var re=ne.selectAll("."+M.cn.columnBlock).data(n.splitToPanels,T.keyFun);re.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(ve){return ve.key}),re.style("cursor",function(ve){return ve.dragHandle?"ew-resize":ve.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ae=re.filter(f),ue=re.filter(_);te&&ue.call(k.behavior.drag().origin(function(ve){return k.event.stopPropagation(),ve}).on("drag",E(V,J,-1)).on("dragend",function(){})),g(V,J,ae,re),g(V,J,ue,re);var pe=J.selectAll("."+M.cn.scrollAreaClip).data(T.repeat,T.keyFun);pe.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(ve){return u(V,ve)});var ge=pe.selectAll("."+M.cn.scrollAreaClipRect).data(T.repeat,T.keyFun);ge.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),ge.attr("width",function(ve){return ve.width+2*M.overdrag}).attr("height",function(ve){return ve.height+M.uplift}),ne.selectAll("."+M.cn.columnBoundary).data(T.repeat,T.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var _e=ne.selectAll("."+M.cn.columnBoundaryClippath).data(T.repeat,T.keyFun);_e.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),_e.attr("id",function(ve){return p(V,ve)});var me=_e.selectAll("."+M.cn.columnBoundaryRect).data(T.repeat,T.keyFun);me.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),me.attr("width",function(ve){return ve.columnWidth+2*a(ve)}).attr("height",function(ve){return ve.calcdata.height+2*a(ve)+M.uplift}).attr("x",function(ve){return-a(ve)}).attr("y",function(ve){return-a(ve)}),w(null,ue,J)}},45802:function(ee,D,e){var M=e(5386).fF,k=e(5386).si,l=e(50693),T=e(27670).Y,b=e(34e3),d=e(57564),s=e(43473),t=e(1426).extendFlat,i=e(79952).u;ee.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:d.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:d.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:d.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:d.hoverinfo,hovertemplate:M({},{keys:s.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:d.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},78018:function(ee,D,e){var M=e(74875);D.name="treemap",D.plot=function(k,l,T,b){M.plotBasePlot(D.name,k,l,T,b)},D.clean=function(k,l,T,b){M.cleanBasePlot(D.name,k,l,T,b)}},65039:function(ee,D,e){var M=e(52147);D.y=function(k,l){return M.calc(k,l)},D.T=function(k){return M._runCrossTraceCalc("treemap",k)}},43473:function(ee){ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(ee,D,e){var M=e(71828),k=e(45802),l=e(7901),T=e(27670).c,b=e(90769).handleText,d=e(97313).TEXTPAD,s=e(37434).handleMarkerDefaults,t=e(21081),i=t.hasColorscale,r=t.handleDefaults;ee.exports=function(n,o,a,u){function p(_,f){return M.coerce(n,o,k,_,f)}var c=p("labels"),x=p("parents");if(c&&c.length&&x&&x.length){var g=p("values");g&&g.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.packing")==="squarify"&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var h=p("text");p("texttemplate"),o.texttemplate||p("textinfo",Array.isArray(h)?"text+label":"label"),p("hovertext"),p("hovertemplate");var y=p("pathbar.visible");b(n,o,u,p,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var v=o.textposition.indexOf("bottom")!==-1;s(n,o,u,p),(o._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis)?r(n,o,u,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(o.marker.colors||[]).length);var m=2*o.textfont.size;p("marker.pad.t",v?m/4:m),p("marker.pad.l",m/4),p("marker.pad.r",m/4),p("marker.pad.b",v?m:m/4),p("marker.cornerradius"),o._hovered={marker:{line:{width:2,color:l.contrast(u.paper_bgcolor)}}},y&&(p("pathbar.thickness",o.pathbar.textfont.size+2*d),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),T(o,u,p),o._length=null}else o.visible=!1}},80694:function(ee,D,e){var M=e(39898),k=e(2791),l=e(72597).clearMinTextSize,T=e(16688).resizeText,b=e(46650);ee.exports=function(d,s,t,i,r){var n,o,a=r.type,u=r.drawDescendants,p=d._fullLayout,c=p["_"+a+"layer"],x=!t;l(a,p),(n=c.selectAll("g.trace."+a).data(s,function(g){return g[0].trace.uid})).enter().append("g").classed("trace",!0).classed(a,!0),n.order(),!p.uniformtext.mode&&k.hasTransition(t)?(i&&(o=i()),M.transition().duration(t.duration).ease(t.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()}).each(function(){c.selectAll("g.trace").each(function(g){b(d,g,this,t,u)})})):(n.each(function(g){b(d,g,this,t,u)}),p.uniformtext.mode&&T(d,c.selectAll(".trace"),a)),x&&n.exit().remove()}},66209:function(ee,D,e){var M=e(39898),k=e(71828),l=e(91424),T=e(63893),b=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),i=e(83523),r=!0;ee.exports=function(n,o,a,u,p){var c=p.barDifY,x=p.width,g=p.height,h=p.viewX,y=p.viewY,v=p.pathSlice,m=p.toMoveInsideSlice,_=p.strTransform,f=p.hasTransition,S=p.handleSlicesExit,w=p.makeUpdateSliceInterpolator,E=p.makeUpdateTextInterpolator,L={},C=n._context.staticPlot,P=n._fullLayout,z=o[0],G=z.trace,O=z.hierarchy,H=x/G._entryDepth,N=t.listPath(a.data,"id"),B=b(O.copy(),[x,g],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(B=B.filter(function(q){var te=N.indexOf(q.data.id);return te!==-1&&(q.x0=H*te,q.x1=H*(te+1),q.y0=c,q.y1=c+g,q.onPathbar=!0,!0)})).reverse(),(u=u.data(B,t.getPtId)).enter().append("g").classed("pathbar",!0),S(u,r,L,[x,g],v),u.order();var V=u;f&&(V=V.transition().each("end",function(){var q=M.select(this);t.setSliceCursor(q,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(q){q._x0=h(q.x0),q._x1=h(q.x1),q._y0=y(q.y0),q._y1=y(q.y1),q._hoverX=h(q.x1-Math.min(x,g)/2),q._hoverY=y(q.y1-g/2);var te=M.select(this),K=k.ensureSingle(te,"path","surface",function(Q){Q.style("pointer-events",C?"none":"all")});f?K.transition().attrTween("d",function(Q){var ne=w(Q,r,L,[x,g]);return function(re){return v(ne(re))}}):K.attr("d",v),te.call(i,a,n,o,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),K.call(d,q,G,n,{hovered:!1}),q._text=(t.getPtLabel(q)||"").split("<br>").join(" ")||"";var J=k.ensureSingle(te,"g","slicetext"),Y=k.ensureSingle(J,"text","",function(Q){Q.attr("data-notex",1)}),W=k.ensureUniformFontSize(n,t.determineTextFont(G,q,P.font,{onPathbar:!0}));Y.text(q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,W).call(T.convertToTspans,n),q.textBB=l.bBox(Y.node()),q.transform=m(q,{fontSize:W.size,onPathbar:!0}),q.transform.fontSize=W.size,f?Y.transition().attrTween("transform",function(Q){var ne=E(Q,r,L,[x,g]);return function(re){return _(ne(re))}}):Y.attr("transform",_(q))})}},52583:function(ee,D,e){var M=e(39898),k=e(71828),l=e(91424),T=e(63893),b=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),i=e(83523),r=e(24714).formatSliceLabel,n=!1;ee.exports=function(o,a,u,p,c){var x=c.width,g=c.height,h=c.viewX,y=c.viewY,v=c.pathSlice,m=c.toMoveInsideSlice,_=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,L=c.prevEntry,C=o._context.staticPlot,P=o._fullLayout,z=a[0].trace,G=z.textposition.indexOf("left")!==-1,O=z.textposition.indexOf("right")!==-1,H=z.textposition.indexOf("bottom")!==-1,N=!H&&!z.marker.pad.t||H&&!z.marker.pad.b,B=b(u,[x,g],{packing:z.tiling.packing,squarifyratio:z.tiling.squarifyratio,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,pad:{inner:z.tiling.pad,top:z.marker.pad.t,left:z.marker.pad.l,right:z.marker.pad.r,bottom:z.marker.pad.b}}).descendants(),V=1/0,q=-1/0;B.forEach(function(W){var Q=W.depth;Q>=z._maxDepth?(W.x0=W.x1=(W.x0+W.x1)/2,W.y0=W.y1=(W.y0+W.y1)/2):(V=Math.min(V,Q),q=Math.max(q,Q))}),p=p.data(B,t.getPtId),z._maxVisibleLayers=isFinite(q)?q-V+1:0,p.enter().append("g").classed("slice",!0),S(p,n,{},[x,g],v),p.order();var te=null;if(f&&L){var K=t.getPtId(L);p.each(function(W){te===null&&t.getPtId(W)===K&&(te={x0:W.x0,x1:W.x1,y0:W.y0,y1:W.y1})})}var J=function(){return te||{x0:0,x1:x,y0:0,y1:g}},Y=p;return f&&(Y=Y.transition().each("end",function(){var W=M.select(this);t.setSliceCursor(W,o,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Y.each(function(W){var Q=t.isHeader(W,z);W._x0=h(W.x0),W._x1=h(W.x1),W._y0=y(W.y0),W._y1=y(W.y1),W._hoverX=h(W.x1-z.marker.pad.r),W._hoverY=y(H?W.y1-z.marker.pad.b/2:W.y0+z.marker.pad.t/2);var ne=M.select(this),re=k.ensureSingle(ne,"path","surface",function(ge){ge.style("pointer-events",C?"none":"all")});f?re.transition().attrTween("d",function(ge){var _e=w(ge,n,J(),[x,g]);return function(me){return v(_e(me))}}):re.attr("d",v),ne.call(i,u,o,a,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,o,{isTransitioning:o._transitioning}),re.call(d,W,z,o,{hovered:!1}),W.x0===W.x1||W.y0===W.y1?W._text="":W._text=Q?N?"":t.getPtLabel(W)||"":r(W,u,z,a,P)||"";var ae=k.ensureSingle(ne,"g","slicetext"),ue=k.ensureSingle(ae,"text","",function(ge){ge.attr("data-notex",1)}),pe=k.ensureUniformFontSize(o,t.determineTextFont(z,W,P.font));ue.text(W._text||" ").classed("slicetext",!0).attr("text-anchor",O?"end":G||Q?"start":"middle").call(l.font,pe).call(T.convertToTspans,o),W.textBB=l.bBox(ue.node()),W.transform=m(W,{fontSize:pe.size,isHeader:Q}),W.transform.fontSize=pe.size,f?ue.transition().attrTween("transform",function(ge){var _e=E(ge,n,J(),[x,g]);return function(me){return _(_e(me))}}):ue.attr("transform",_(W))}),te}},14102:function(ee){ee.exports=function D(e,M,k){var l;k.swapXY&&(l=e.x0,e.x0=e.y0,e.y0=l,l=e.x1,e.x1=e.y1,e.y1=l),k.flipX&&(l=e.x0,e.x0=M[0]-e.x1,e.x1=M[0]-l),k.flipY&&(l=e.y0,e.y0=M[1]-e.y1,e.y1=M[1]-l);var T=e.children;if(T)for(var b=0;b<T.length;b++)D(T[b],M,k)}},70954:function(ee,D,e){ee.exports={moduleType:"trace",name:"treemap",basePlotModule:e(78018),categories:[],animatable:!0,attributes:e(45802),layoutAttributes:e(55479),supplyDefaults:e(91174),supplyLayoutDefaults:e(77182),calc:e(65039).y,crossTraceCalc:e(65039).T,plot:e(5893),style:e(96362).style,colorbar:e(4898),meta:{}}},55479:function(ee){ee.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(ee,D,e){var M=e(71828),k=e(55479);ee.exports=function(l,T){function b(d,s){return M.coerce(l,T,k,d,s)}b("treemapcolorway",T.colorway),b("extendtreemapcolors")}},37210:function(ee,D,e){var M=e(674),k=e(14102);ee.exports=function(l,T,b){var d,s=b.flipX,t=b.flipY,i=b.packing==="dice-slice",r=b.pad[t?"bottom":"top"],n=b.pad[s?"right":"left"],o=b.pad[s?"left":"right"],a=b.pad[t?"top":"bottom"];i&&(d=n,n=r,r=d,d=o,o=a,a=d);var u=M.treemap().tile(function(p,c){switch(p){case"squarify":return M.treemapSquarify.ratio(c);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(n).paddingRight(o).paddingTop(r).paddingBottom(a).size(i?[T[1],T[0]]:T)(l);return(i||s||t)&&k(u,T,{swapXY:i,flipX:s,flipY:t}),u}},5893:function(ee,D,e){var M=e(80694),k=e(52583);ee.exports=function(l,T,b,d){return M(l,T,b,d,{type:"treemap",drawDescendants:k})}},46650:function(ee,D,e){var M=e(39898),k=e(81684).sX,l=e(2791),T=e(71828),b=e(97313).TEXTPAD,d=e(17295).toMoveInsideBar,s=e(72597).recordMinTextSize,t=e(43473),i=e(66209);function r(n){return l.isHierarchyRoot(n)?"":l.getPtId(n)}ee.exports=function(n,o,a,u,p){var c=n._fullLayout,x=o[0],g=x.trace,h=g.type==="icicle",y=x.hierarchy,v=l.findEntryWithLevel(y,g.level),m=M.select(a),_=m.selectAll("g.pathbar"),f=m.selectAll("g.slice");if(!v)return _.remove(),void f.remove();var S=l.isHierarchyRoot(v),w=!c.uniformtext.mode&&l.hasTransition(u),E=l.getMaxDepth(g),L=c._size,C=g.domain,P=L.w*(C.x[1]-C.x[0]),z=L.h*(C.y[1]-C.y[0]),G=P,O=g.pathbar.thickness,H=g.marker.line.width+t.gapWithPathbar,N=g.pathbar.visible?g.pathbar.side.indexOf("bottom")>-1?z+H:-(O+H):0,B={x0:G,x1:G,y0:N,y1:N+O},V=function(ye,Ce,Re){var ze=g.tiling.pad,He=function(Qe){return Qe-ze<=Ce.x0},Ge=function(Qe){return Qe+ze>=Ce.x1},Je=function(Qe){return Qe-ze<=Ce.y0},ot=function(Qe){return Qe+ze>=Ce.y1};return ye.x0===Ce.x0&&ye.x1===Ce.x1&&ye.y0===Ce.y0&&ye.y1===Ce.y1?{x0:ye.x0,x1:ye.x1,y0:ye.y0,y1:ye.y1}:{x0:He(ye.x0-ze)?0:Ge(ye.x0-ze)?Re[0]:ye.x0,x1:He(ye.x1+ze)?0:Ge(ye.x1+ze)?Re[0]:ye.x1,y0:Je(ye.y0-ze)?0:ot(ye.y0-ze)?Re[1]:ye.y0,y1:Je(ye.y1+ze)?0:ot(ye.y1+ze)?Re[1]:ye.y1}},q=null,te={},K={},J=null,Y=function(ye,Ce){return Ce?te[r(ye)]:K[r(ye)]};x.hasMultipleRoots&&S&&E++,g._maxDepth=E,g._backgroundColor=c.paper_bgcolor,g._entryDepth=v.data.depth,g._atRootLevel=S;var W=-P/2+L.l+L.w*(C.x[1]+C.x[0])/2,Q=-z/2+L.t+L.h*(1-(C.y[1]+C.y[0])/2),ne=function(ye){return W+ye},re=function(ye){return Q+ye},ae=re(0),ue=ne(0),pe=function(ye){return ue+ye},ge=function(ye){return ae+ye};function _e(ye,Ce){return ye+","+Ce}var me=pe(0),ve=function(ye){ye.x=Math.max(me,ye.x)},Oe=g.pathbar.edgeshape,Me=g[h?"tiling":"marker"].pad,Te=function(ye){return g.textposition.indexOf(ye)!==-1},se=Te("top"),oe=Te("left"),he=Te("right"),Ee=Te("bottom"),ke=function(ye,Ce){var Re=ye.x0,ze=ye.x1,He=ye.y0,Ge=ye.y1,Je=ye.textBB,ot=se||Ce.isHeader&&!Ee?"start":Ee?"end":"middle",Qe=Te("right"),vt=Te("left")||Ce.onPathbar?-1:Qe?1:0;if(Ce.isHeader){if((Re+=(h?Me:Me.l)-b)>=(ze-=(h?Me:Me.r)-b)){var xt=(Re+ze)/2;Re=xt,ze=xt}var mt;Ee?He<(mt=Ge-(h?Me:Me.b))&&mt<Ge&&(He=mt):He<(mt=He+(h?Me:Me.t))&&mt<Ge&&(Ge=mt)}var rt=d(Re,ze,He,Ge,Je,{isHorizontal:!1,constrained:!0,angle:0,anchor:ot,leftToRight:vt});return rt.fontSize=Ce.fontSize,rt.targetX=ne(rt.targetX),rt.targetY=re(rt.targetY),isNaN(rt.targetX)||isNaN(rt.targetY)?{}:(Re!==ze&&He!==Ge&&s(g.type,rt,c),{scale:rt.scale,rotate:rt.rotate,textX:rt.textX,textY:rt.textY,anchorX:rt.anchorX,anchorY:rt.anchorY,targetX:rt.targetX,targetY:rt.targetY})},be=function(ye,Ce){for(var Re,ze=0,He=ye;!Re&&ze<E;)ze++,(He=He.parent)?Re=Y(He,Ce):ze=E;return Re||{}},Ie=function(ye,Ce,Re,ze,He){var Ge,Je=Y(ye,Ce);if(Je)Ge=Je;else if(Ce)Ge=B;else if(q)if(ye.parent){var ot=J||Re;ot&&!Ce?Ge=V(ye,ot,ze):(Ge={},T.extendFlat(Ge,be(ye,Ce)))}else Ge=T.extendFlat({},ye),h&&(He.orientation==="h"?He.flipX?Ge.x0=ye.x1:Ge.x1=0:He.flipY?Ge.y0=ye.y1:Ge.y1=0);else Ge={};return k(Ge,{x0:ye.x0,x1:ye.x1,y0:ye.y0,y1:ye.y1})},Fe=function(ye,Ce,Re,ze){var He=Y(ye,Ce),Ge={},Je=function(Qe,vt,xt,mt){if(vt)return te[r(y)]||B;var rt=K[g.level]||xt;return function(it){return it.data.depth-v.data.depth<E}(Qe)?V(Qe,rt,mt):{}}(ye,Ce,Re,ze);T.extendFlat(Ge,{transform:ke({x0:Je.x0,x1:Je.x1,y0:Je.y0,y1:Je.y1,textBB:ye.textBB,_text:ye._text},{isHeader:l.isHeader(ye,g)})}),He?Ge=He:ye.parent&&T.extendFlat(Ge,be(ye,Ce));var ot=ye.transform;return ye.x0!==ye.x1&&ye.y0!==ye.y1&&s(g.type,ot,c),k(Ge,{transform:{scale:ot.scale,rotate:ot.rotate,textX:ot.textX,textY:ot.textY,anchorX:ot.anchorX,anchorY:ot.anchorY,targetX:ot.targetX,targetY:ot.targetY}})},ce=function(ye,Ce,Re,ze,He){var Ge=ze[0],Je=ze[1];w?ye.exit().transition().each(function(){var ot=M.select(this);ot.select("path.surface").transition().attrTween("d",function(Qe){var vt=function(xt,mt,rt,it){var Tt,Mt=Y(xt,mt);if(mt)Tt=B;else{var Pt=Y(v,mt);Tt=Pt?V(xt,Pt,it):{}}return k(Mt,Tt)}(Qe,Ce,0,[Ge,Je]);return function(xt){return He(vt(xt))}}),ot.select("g.slicetext").attr("opacity",0)}).remove():ye.exit().remove()},we=function(ye){var Ce=ye.transform;return ye.x0!==ye.x1&&ye.y0!==ye.y1&&s(g.type,Ce,c),T.getTextTransform({textX:Ce.textX,textY:Ce.textY,anchorX:Ce.anchorX,anchorY:Ce.anchorY,targetX:Ce.targetX,targetY:Ce.targetY,scale:Ce.scale,rotate:Ce.rotate})};w&&(_.each(function(ye){te[r(ye)]={x0:ye.x0,x1:ye.x1,y0:ye.y0,y1:ye.y1},ye.transform&&(te[r(ye)].transform={textX:ye.transform.textX,textY:ye.transform.textY,anchorX:ye.transform.anchorX,anchorY:ye.transform.anchorY,targetX:ye.transform.targetX,targetY:ye.transform.targetY,scale:ye.transform.scale,rotate:ye.transform.rotate})}),f.each(function(ye){K[r(ye)]={x0:ye.x0,x1:ye.x1,y0:ye.y0,y1:ye.y1},ye.transform&&(K[r(ye)].transform={textX:ye.transform.textX,textY:ye.transform.textY,anchorX:ye.transform.anchorX,anchorY:ye.transform.anchorY,targetX:ye.transform.targetX,targetY:ye.transform.targetY,scale:ye.transform.scale,rotate:ye.transform.rotate}),!q&&l.isEntry(ye)&&(q=ye)})),J=p(n,o,v,f,{width:P,height:z,viewX:ne,viewY:re,pathSlice:function(ye){var Ce=ne(ye.x0),Re=ne(ye.x1),ze=re(ye.y0),He=re(ye.y1),Ge=Re-Ce,Je=He-ze;if(!Ge||!Je)return"";var ot=g.marker.cornerradius||0,Qe=Math.min(ot,Ge/2,Je/2);Qe&&ye.data&&ye.data.data&&ye.data.data.label&&(se&&(Qe=Math.min(Qe,Me.t)),oe&&(Qe=Math.min(Qe,Me.l)),he&&(Qe=Math.min(Qe,Me.r)),Ee&&(Qe=Math.min(Qe,Me.b)));var vt=function(xt,mt){return Qe?"a"+_e(Qe,Qe)+" 0 0 1 "+_e(xt,mt):""};return"M"+_e(Ce,ze+Qe)+vt(Qe,-Qe)+"L"+_e(Re-Qe,ze)+vt(Qe,Qe)+"L"+_e(Re,He-Qe)+vt(-Qe,Qe)+"L"+_e(Ce+Qe,He)+vt(-Qe,-Qe)+"Z"},toMoveInsideSlice:ke,prevEntry:q,makeUpdateSliceInterpolator:Ie,makeUpdateTextInterpolator:Fe,handleSlicesExit:ce,hasTransition:w,strTransform:we}),g.pathbar.visible?i(n,o,v,_,{barDifY:N,width:G,height:O,viewX:pe,viewY:ge,pathSlice:function(ye){var Ce=pe(Math.max(Math.min(ye.x0,ye.x0),0)),Re=pe(Math.min(Math.max(ye.x1,ye.x1),G)),ze=ge(ye.y0),He=ge(ye.y1),Ge=O/2,Je={},ot={};Je.x=Ce,ot.x=Re,Je.y=ot.y=(ze+He)/2;var Qe={x:Ce,y:ze},vt={x:Re,y:ze},xt={x:Re,y:He},mt={x:Ce,y:He};return Oe===">"?(Qe.x-=Ge,vt.x-=Ge,xt.x-=Ge,mt.x-=Ge):Oe==="/"?(xt.x-=Ge,mt.x-=Ge,Je.x-=Ge/2,ot.x-=Ge/2):Oe==="\\"?(Qe.x-=Ge,vt.x-=Ge,Je.x-=Ge/2,ot.x-=Ge/2):Oe==="<"&&(Je.x-=Ge,ot.x-=Ge),ve(Qe),ve(mt),ve(Je),ve(vt),ve(xt),ve(ot),"M"+_e(Qe.x,Qe.y)+"L"+_e(vt.x,vt.y)+"L"+_e(ot.x,ot.y)+"L"+_e(xt.x,xt.y)+"L"+_e(mt.x,mt.y)+"L"+_e(Je.x,Je.y)+"Z"},toMoveInsideSlice:ke,makeUpdateSliceInterpolator:Ie,makeUpdateTextInterpolator:Fe,handleSlicesExit:ce,hasTransition:w,strTransform:we}):_.remove()}},96362:function(ee,D,e){var M=e(39898),k=e(7901),l=e(71828),T=e(2791),b=e(72597).resizeText,d=e(43467);function s(t,i,r,n,o){var a,u,p=(o||{}).hovered,c=i.data.data,x=c.i,g=c.color,h=T.isHierarchyRoot(i),y=1;if(p)a=r._hovered.marker.line.color,u=r._hovered.marker.line.width;else if(h&&g===r.root.color)y=100,a="rgba(0,0,0,0)",u=0;else if(a=l.castOption(r,x,"marker.line.color")||k.defaultLine,u=l.castOption(r,x,"marker.line.width")||0,!r._hasColorscale&&!i.onPathbar){var v=r.marker.depthfade;if(v){var m,_=k.combine(k.addOpacity(r._backgroundColor,.75),g);if(v===!0){var f=T.getMaxDepth(r);m=isFinite(f)?T.isLeaf(i)?0:r._maxVisibleLayers-(i.data.depth-r._entryDepth):i.data.height+1}else m=i.data.depth-r._entryDepth,r._atRootLevel||m++;if(m>0)for(var S=0;S<m;S++){var w=.5*S/m;g=k.combine(k.addOpacity(_,w),g)}}}t.call(d,i,r,n,g).style("stroke-width",u).call(k.stroke,a).style("opacity",y)}ee.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");b(t,i,"treemap"),i.each(function(r){var n=M.select(this),o=r[0].trace;n.style("opacity",o.opacity),n.selectAll("path.surface").each(function(a){M.select(this).call(s,a,o,t,{hovered:!1})})})},styleOne:s}},68875:function(ee,D,e){var M=e(53522),k=e(1426).extendFlat,l=e(12663).axisHoverFormat;ee.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:l("x"),yhoverformat:l("y"),name:k({},M.name,{}),orientation:k({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:k({},M.boxpoints,{}),jitter:k({},M.jitter,{}),pointpos:k({},M.pointpos,{}),width:k({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(ee,D,e){var M=e(71828),k=e(89298),l=e(48518),T=e(60168),b=e(50606).BADNUM;function d(t,i,r){var n=i.max-i.min;if(!n)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,n/1e4);var o=r.length,a=M.stdev(r,o-1,i.mean);return Math.max(function(u,p,c){return 1.059*Math.min(p,c/1.349)*Math.pow(u,-.2)}(o,a,i.q3-i.q1),n/100)}function s(t,i,r,n){var o,a=t.spanmode,u=t.span||[],p=[i.min,i.max],c=[i.min-2*n,i.max+2*n];function x(h){var y=u[h],v=r.type==="multicategory"?r.r2c(y):r.d2c(y,0,t[i.valLetter+"calendar"]);return v===b?c[h]:v}var g={type:"linear",range:o=a==="soft"?c:a==="hard"?p:[x(0),x(1)]};return k.setConvert(g),g.cleanRange(),o}ee.exports=function(t,i){var r=l(t,i);if(r[0].t.empty)return r;for(var n=t._fullLayout,o=k.getFromId(t,i[i.orientation==="h"?"xaxis":"yaxis"]),a=1/0,u=-1/0,p=0,c=0,x=0;x<r.length;x++){var g=r[x],h=g.pts.map(T.extractVal),y=g.bandwidth=d(i,g,h),v=g.span=s(i,g,o,y);if(g.min===g.max&&y===0)v=g.span=[g.min,g.max],g.density=[{v:1,t:v[0]}],g.bandwidth=y,p=Math.max(p,1);else{var m=v[1]-v[0],_=Math.ceil(m/(y/3)),f=m/_;if(!isFinite(f)||!isFinite(_))return M.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var S=T.makeKDE(g,i,h);g.density=new Array(_);for(var w=0,E=v[0];E<v[1]+f/2;w++,E+=f){var L=S(E);g.density[w]={v:L,t:E},p=Math.max(p,L)}}c=Math.max(c,h.length),a=Math.min(a,v[0]),u=Math.max(u,v[1])}var C=k.findExtremes(o,[a,u],{padded:!0});if(i._extremes[o._id]=C,i.width)r[0].t.maxKDE=p;else{var P=n._violinScaleGroupStats,z=i.scalegroup,G=P[z];G?(G.maxKDE=Math.max(G.maxKDE,p),G.maxCount=Math.max(G.maxCount,c)):P[z]={maxKDE:p,maxCount:c}}return r[0].t.labels.kde=M._(t,"kde:"),r}},86403:function(ee,D,e){var M=e(37188).setPositionOffset,k=["v","h"];ee.exports=function(l,T){for(var b=l.calcdata,d=T.xaxis,s=T.yaxis,t=0;t<k.length;t++){for(var i=k[t],r=i==="h"?s:d,n=[],o=0;o<b.length;o++){var a=b[o],u=a[0].t,p=a[0].trace;p.visible!==!0||p.type!=="violin"||u.empty||p.orientation!==i||p.xaxis!==d._id||p.yaxis!==s._id||n.push(o)}M("violin",l,n,r)}}},15899:function(ee,D,e){var M=e(71828),k=e(7901),l=e(36411),T=e(68875);ee.exports=function(b,d,s,t){function i(m,_){return M.coerce(b,d,T,m,_)}function r(m,_){return M.coerce2(b,d,T,m,_)}if(l.handleSampleDefaults(b,d,i,t),d.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",d.name),i("scalemode"));var n,o=i("span");Array.isArray(o)&&(n="manual"),i("spanmode",n);var a=i("line.color",(b.marker||{}).color||s),u=i("line.width"),p=i("fillcolor",k.addOpacity(d.line.color,.5));l.handlePointsDefaults(b,d,i,{prefix:""});var c=r("box.width"),x=r("box.fillcolor",p),g=r("box.line.color",a),h=r("box.line.width",u);i("box.visible",!!(c||x||g||h))||(d.box={visible:!1});var y=r("meanline.color",a),v=r("meanline.width",u);i("meanline.visible",!!(y||v))||(d.meanline={visible:!1}),i("quartilemethod")}}},60168:function(ee,D,e){var M=e(71828),k=function(l){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*l*l)};D.makeKDE=function(l,T,b){var d=b.length,s=k,t=l.bandwidth,i=1/(d*t);return function(r){for(var n=0,o=0;o<d;o++)n+=s((r-b[o])/t);return i*n}},D.getPositionOnKdePath=function(l,T,b){var d,s;T.orientation==="h"?(d="y",s="x"):(d="x",s="y");var t=M.findPointOnPath(l.path,b,s,{pathLength:l.pathLength}),i=l.posCenterPx,r=t[d];return[r,T.side==="both"?2*i-r:i]},D.getKdeValue=function(l,T,b){var d=l.pts.map(D.extractVal);return D.makeKDE(l,T,d)(b)/l.posDensityScale},D.extractVal=function(l){return l.v}},57634:function(ee,D,e){var M=e(7901),k=e(71828),l=e(89298),T=e(41868),b=e(60168);ee.exports=function(d,s,t,i,r){r||(r={});var n,o,a=r.hoverLayer,u=d.cd,p=u[0].trace,c=p.hoveron,x=c.indexOf("violins")!==-1,g=c.indexOf("kde")!==-1,h=[];if(x||g){var y=T.hoverOnBoxes(d,s,t,i);if(g&&y.length>0){var v,m,_,f,S,w=d.xa,E=d.ya;p.orientation==="h"?(S=s,v="y",_=E,m="x",f=w):(S=t,v="x",_=w,m="y",f=E);var L=u[d.index];if(S>=L.span[0]&&S<=L.span[1]){var C=k.extendFlat({},d),P=f.c2p(S,!0),z=b.getKdeValue(L,p,S),G=b.getPositionOnKdePath(L,p,P),O=_._offset,H=_._length;C[v+"0"]=G[0],C[v+"1"]=G[1],C[m+"0"]=C[m+"1"]=P,C[m+"Label"]=m+": "+l.hoverLabelText(f,S,p[m+"hoverformat"])+", "+u[0].t.labels.kde+" "+z.toFixed(3);for(var N=0,B=0;B<y.length;B++)if(y[B].attr==="med"){N=B;break}C.spikeDistance=y[N].spikeDistance;var V=v+"Spike";C[V]=y[N][V],y[N].spikeDistance=void 0,y[N][V]=void 0,C.hovertemplate=!1,h.push(C),(o={})[v+"1"]=k.constrain(O+G[0],O,O+H),o[v+"2"]=k.constrain(O+G[1],O,O+H),o[m+"1"]=o[m+"2"]=f._offset+P}}x&&(h=h.concat(y))}c.indexOf("points")!==-1&&(n=T.hoverOnPoints(d,s,t));var q=a.selectAll(".violinline-"+p.uid).data(o?[0]:[]);return q.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),q.exit().remove(),q.attr(o).call(M.stroke,d.color),i==="closest"?n?[n]:h:(n&&h.push(n),h)}},47462:function(ee,D,e){ee.exports={attributes:e(68875),layoutAttributes:e(9228),supplyDefaults:e(15899),crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(33598),calc:e(38603),crossTraceCalc:e(86403),plot:e(28443),style:e(31847),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(57634),selectPoints:e(24626),moduleType:"trace",name:"violin",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(ee,D,e){var M=e(40094),k=e(71828).extendFlat;ee.exports={violinmode:k({},M.boxmode,{}),violingap:k({},M.boxgap,{}),violingroupgap:k({},M.boxgroupgap,{})}},33598:function(ee,D,e){var M=e(71828),k=e(9228),l=e(4199);ee.exports=function(T,b,d){l._supply(T,b,d,function(s,t){return M.coerce(T,b,k,s,t)},"violin")}},28443:function(ee,D,e){var M=e(39898),k=e(71828),l=e(91424),T=e(86047),b=e(34621),d=e(60168);ee.exports=function(s,t,i,r){var n=s._context.staticPlot,o=s._fullLayout,a=t.xaxis,u=t.yaxis;function p(c,x){var g=b(c,{xaxis:a,yaxis:u,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(g[0],1)}k.makeTraceGroups(r,i,"trace violins").each(function(c){var x=M.select(this),g=c[0],h=g.t,y=g.trace;if(y.visible!==!0||h.empty)x.remove();else{var v=h.bPos,m=h.bdPos,_=t[h.valLetter+"axis"],f=t[h.posLetter+"axis"],S=y.side==="both",w=S||y.side==="positive",E=S||y.side==="negative",L=x.selectAll("path.violin").data(k.identity);L.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),L.exit().remove(),L.each(function(B){var V,q,te,K,J,Y,W,Q,ne=M.select(this),re=B.density,ae=re.length,ue=f.c2l(B.pos+v,!0),pe=f.l2p(ue);if(y.width)V=h.maxKDE/m;else{var ge=o._violinScaleGroupStats[y.scalegroup];V=y.scalemode==="count"?ge.maxKDE/m*(ge.maxCount/B.pts.length):ge.maxKDE/m}if(w){for(W=new Array(ae),J=0;J<ae;J++)(Q=W[J]={})[h.posLetter]=ue+re[J].v/V,Q[h.valLetter]=_.c2l(re[J].t,!0);q=p(W,y)}if(E){for(W=new Array(ae),Y=0,J=ae-1;Y<ae;Y++,J--)(Q=W[Y]={})[h.posLetter]=ue-re[J].v/V,Q[h.valLetter]=_.c2l(re[J].t,!0);te=p(W,y)}if(S)K=q+"L"+te.substr(1)+"Z";else{var _e=[pe,_.c2p(re[0].t)],me=[pe,_.c2p(re[ae-1].t)];y.orientation==="h"&&(_e.reverse(),me.reverse()),K=w?"M"+_e+"L"+q.substr(1)+"L"+me:"M"+me+"L"+te.substr(1)+"L"+_e}ne.attr("d",K),B.posCenterPx=pe,B.posDensityScale=V*m,B.path=ne.node(),B.pathLength=B.path.getTotalLength()/(S?2:1)});var C,P,z,G=y.box,O=G.width,H=(G.line||{}).width;S?(C=m*O,P=0):w?(C=[0,m*O/2],P=H*{x:1,y:-1}[h.posLetter]):(C=[m*O/2,0],P=H*{x:-1,y:1}[h.posLetter]),T.plotBoxAndWhiskers(x,{pos:f,val:_},y,{bPos:v,bdPos:C,bPosPxOffset:P}),T.plotBoxMean(x,{pos:f,val:_},y,{bPos:v,bdPos:C,bPosPxOffset:P}),!y.box.visible&&y.meanline.visible&&(z=k.identity);var N=x.selectAll("path.meanline").data(z||[]);N.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),N.exit().remove(),N.each(function(B){var V=_.c2p(B.mean,!0),q=d.getPositionOnKdePath(B,y,V);M.select(this).attr("d",y.orientation==="h"?"M"+V+","+q[0]+"V"+q[1]:"M"+q[0]+","+V+"H"+q[1])}),T.plotPoints(x,{x:a,y:u},y,h)}})}},31847:function(ee,D,e){var M=e(39898),k=e(7901),l=e(16296).stylePoints;ee.exports=function(T){var b=M.select(T).selectAll("g.trace.violins");b.style("opacity",function(d){return d[0].trace.opacity}),b.each(function(d){var s=d[0].trace,t=M.select(this),i=s.box||{},r=i.line||{},n=s.meanline||{},o=n.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(k.stroke,r.color).call(k.fill,i.fillcolor);var a={"stroke-width":o+"px","stroke-dasharray":2*o+"px,"+o+"px"};t.selectAll("path.mean").style(a).call(k.stroke,n.color),t.selectAll("path.meanline").style(a).call(k.stroke,n.color),l(t,s,T)})}},16336:function(ee,D,e){var M=e(50693),k=e(16249),l=e(54532),T=e(9012),b=e(1426).extendFlat,d=e(30962).overrideAll,s=ee.exports=d(b({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:l.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:b({},T.hoverinfo),showlegend:b({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},64809:function(ee,D,e){var M=e(9330).gl_mesh3d,k=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,b=e(90060),d=e(22674).findNearestOnAxis,s=e(22674).generateIsoMeshes;function t(r,n,o){this.scene=r,this.uid=o,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,o=this.data._meshX[n],a=this.data._meshY[n],u=this.data._meshZ[n],p=this.data._Ys.length,c=this.data._Zs.length,x=d(o,this.data._Xs).id,g=d(a,this.data._Ys).id,h=d(u,this.data._Zs).id,y=r.index=h+c*g+c*p*x;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var v=this.data.hovertext||this.data.text;return Array.isArray(v)&&v[y]!==void 0?r.textLabel=v[y]:v&&(r.textLabel=v),!0}},i.update=function(r){var n=this.scene,o=n.fullSceneLayout;function a(c,x,g,h){return x.map(function(y){return c.d2l(y,0,h)*g})}this.data=s(r);var u={positions:b(a(o.xaxis,r._meshX,n.dataScale[0],r.xcalendar),a(o.yaxis,r._meshY,n.dataScale[1],r.ycalendar),a(o.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:b(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},p=T(r);u.vertexIntensity=r._meshIntensity,u.vertexIntensityBounds=[p.min,p.max],u.colormap=k(r),this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(r,n){var o=r.glplot.gl,a=M({gl:o}),u=new t(r,a,n.uid);return a._trace=u,u.update(n),r.glplot.add(a),u}},47651:function(ee,D,e){var M=e(71828),k=e(16336),l=e(82738).supplyIsoDefaults,T=e(91831).opacityscaleDefaults;ee.exports=function(b,d,s,t){function i(r,n){return M.coerce(b,d,k,r,n)}l(b,d,s,t,i),T(b,d,t,i)}},17659:function(ee,D,e){ee.exports={attributes:e(16336),supplyDefaults:e(47651),calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(64809),moduleType:"trace",name:"volume",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(ee,D,e){var M=e(1486),k=e(82196).line,l=e(9012),T=e(12663).axisHoverFormat,b=e(5386).fF,d=e(5386).si,s=e(48334),t=e(1426).extendFlat,i=e(7901);function r(n){return{marker:{color:t({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ee.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:M.hovertext,hovertemplate:b({},{keys:s.eventDataKeys}),hoverinfo:t({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:d({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},k.color,{dflt:i.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup}},52752:function(ee,D,e){var M=e(89298),k=e(42973),l=e(71828).mergeArray,T=e(66279),b=e(50606).BADNUM;function d(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}ee.exports=function(t,i){var r,n,o,a,u,p,c=M.getFromId(t,i.xaxis||"x"),x=M.getFromId(t,i.yaxis||"y");i.orientation==="h"?(r=c.makeCalcdata(i,"x"),o=x.makeCalcdata(i,"y"),a=k(i,x,"y",o),u=!!i.yperiodalignment,p="y"):(r=x.makeCalcdata(i,"y"),o=c.makeCalcdata(i,"x"),a=k(i,c,"x",o),u=!!i.xperiodalignment,p="x"),n=a.vals;for(var g,h=Math.min(n.length,r.length),y=new Array(h),v=0,m=!1,_=0;_<h;_++){var f=r[_]||0,S=!1;(r[_]!==b||s(i.measure[_])||d(i.measure[_]))&&_+1<h&&(r[_+1]!==b||s(i.measure[_+1])||d(i.measure[_+1]))&&(S=!0);var w=y[_]={i:_,p:n[_],s:f,rawS:f,cNext:S};d(i.measure[_])?(v=w.s,w.isSum=!0,w.dir="totals",w.s=v):s(i.measure[_])?(w.isSum=!0,w.dir="totals",w.s=v):(w.isSum=!1,w.dir=w.rawS<0?"decreasing":"increasing",g=w.s,w.s=v+g,v+=g),w.dir==="totals"&&(m=!0),u&&(y[_].orig_p=o[_],y[_][p+"End"]=a.ends[_],y[_][p+"Start"]=a.starts[_]),i.ids&&(w.id=String(i.ids[_])),w.v=(i.base||0)+v}return y.length&&(y[0].hasTotals=m),l(i.text,y,"tx"),l(i.hovertext,y,"htx"),T(y,i),y}},48334:function(ee){ee.exports={eventDataKeys:["initial","delta","final"]}},70766:function(ee,D,e){var M=e(11661).setGroupPositions;ee.exports=function(k,l){var T,b,d=k._fullLayout,s=k._fullData,t=k.calcdata,i=l.xaxis,r=l.yaxis,n=[],o=[],a=[];for(b=0;b<s.length;b++){var u=s[b];u.visible===!0&&u.xaxis===i._id&&u.yaxis===r._id&&u.type==="waterfall"&&(T=t[b],u.orientation==="h"?a.push(T):o.push(T),n.push(T))}var p={mode:d.waterfallmode,norm:d.waterfallnorm,gap:d.waterfallgap,groupgap:d.waterfallgroupgap};for(M(k,i,r,o,p),M(k,r,i,a,p),b=0;b<n.length;b++){T=n[b];for(var c=0;c<T.length;c++){var x=T[c];x.isSum===!1&&(x.s0+=c===0?0:T[c-1].s),c+1<T.length&&(T[c].nextP0=T[c+1].p0,T[c].nextS0=T[c+1].s0)}}}},83266:function(ee,D,e){var M=e(71828),k=e(26125),l=e(90769).handleText,T=e(67513),b=e(73927),d=e(43037),s=e(7901),t=e(22372),i=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function n(o,a,u){o(a+".marker.color",u),o(a+".marker.line.color",s.defaultLine),o(a+".marker.line.width")}ee.exports={supplyDefaults:function(o,a,u,p){function c(g,h){return M.coerce(o,a,d,g,h)}if(T(o,a,p,c)){b(o,a,p,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",a.x&&!a.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var x=c("textposition");l(o,a,p,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a.textposition!=="none"&&(c("texttemplate"),a.texttemplate||c("textinfo")),n(c,"increasing",i),n(c,"decreasing",r),n(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else a.visible=!1},crossTraceDefaults:function(o,a){var u,p;function c(g){return M.coerce(p._input,p,d,g)}if(a.waterfallmode==="group")for(var x=0;x<o.length;x++)u=(p=o[x])._input,k(u,p,a,c)}}},58593:function(ee){ee.exports=function(D,e){return D.x="xVal"in e?e.xVal:e.x,D.y="yVal"in e?e.yVal:e.y,"initial"in e&&(D.initial=e.initial),"delta"in e&&(D.delta=e.delta),"final"in e&&(D.final=e.final),e.xa&&(D.xaxis=e.xa),e.ya&&(D.yaxis=e.ya),D}},61326:function(ee,D,e){var M=e(89298).hoverLabelText,k=e(7901).opacity,l=e(95423).hoverOnBars,T=e(22372),b=T.INCREASING.SYMBOL,d=T.DECREASING.SYMBOL;ee.exports=function(s,t,i,r,n){var o=l(s,t,i,r,n);if(o){var a=o.cd,u=a[0].trace,p=u.orientation==="h",c=p?"x":"y",x=p?s.xa:s.ya,g=a[o.index],h=g.isSum?g.b+g.s:g.rawS;o.initial=g.b+g.s-h,o.delta=h,o.final=o.initial+o.delta;var y=w(Math.abs(o.delta));o.deltaLabel=h<0?"("+y+")":y,o.finalLabel=w(o.final),o.initialLabel=w(o.initial);var v=g.hi||u.hoverinfo,m=[];if(v&&v!=="none"&&v!=="skip"){var _=v==="all",f=v.split("+"),S=function(E){return _||f.indexOf(E)!==-1};g.isSum||(!S("final")||S(p?"x":"y")||m.push(o.finalLabel),S("delta")&&(h<0?m.push(o.deltaLabel+" "+d):m.push(o.deltaLabel+" "+b)),S("initial")&&m.push("Initial: "+o.initialLabel))}return m.length&&(o.extraText=m.join("<br>")),o.color=function(E,L){var C=E[L.dir].marker,P=C.color,z=C.line.color,G=C.line.width;return k(P)?P:k(z)&&G?z:void 0}(u,g),[o]}function w(E){return M(x,E,u[c+"hoverformat"])}}},19990:function(ee,D,e){ee.exports={attributes:e(43037),layoutAttributes:e(13494),supplyDefaults:e(83266).supplyDefaults,crossTraceDefaults:e(83266).crossTraceDefaults,supplyLayoutDefaults:e(5176),calc:e(52752),crossTraceCalc:e(70766),plot:e(30436),style:e(55750).style,hoverPoints:e(61326),eventData:e(58593),selectPoints:e(81974),moduleType:"trace",name:"waterfall",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(ee){ee.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(ee,D,e){var M=e(71828),k=e(13494);ee.exports=function(l,T,b){var d=!1;function s(r,n){return M.coerce(l,T,k,r,n)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="waterfall"){d=!0;break}}d&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},30436:function(ee,D,e){var M=e(39898),k=e(71828),l=e(91424),T=e(50606).BADNUM,b=e(17295),d=e(72597).clearMinTextSize;ee.exports=function(s,t,i,r){var n=s._fullLayout;d("waterfall",n),b.plot(s,t,i,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),function(o,a,u,p){var c=a.xaxis,x=a.yaxis;k.makeTraceGroups(p,u,"trace bars").each(function(g){var h=M.select(this),y=g[0].trace,v=k.ensureSingle(h,"g","lines");if(y.connector&&y.connector.visible){var m=y.orientation==="h",_=y.connector.mode,f=v.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var L=function(G,O,H,N){var B=[],V=[],q=N?O:H,te=N?H:O;return B[0]=q.c2p(G.s0,!0),V[0]=te.c2p(G.p0,!0),B[1]=q.c2p(G.s1,!0),V[1]=te.c2p(G.p1,!0),B[2]=q.c2p(G.nextS0,!0),V[2]=te.c2p(G.nextP0,!0),N?[B,V]:[V,B]}(w,c,x,m),C=L[0],P=L[1],z="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&(_==="spanning"&&!w.isSum&&E>0&&(z+=m?"M"+C[0]+","+P[1]+"V"+P[0]:"M"+C[1]+","+P[0]+"H"+C[0]),_!=="between"&&(w.isSum||E<S-1)&&(z+=m?"M"+C[1]+","+P[0]+"V"+P[1]:"M"+C[0]+","+P[1]+"H"+C[1]),C[2]!==T&&P[2]!==T&&(z+=m?"M"+C[1]+","+P[1]+"V"+P[2]:"M"+C[1]+","+P[1]+"H"+C[2])),z===""&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(l.setClipUrl,a.layerClipId,o)}})}else v.remove()})}(s,t,i,r)}},55750:function(ee,D,e){var M=e(39898),k=e(91424),l=e(7901),T=e(37822).DESELECTDIM,b=e(16688),d=e(72597).resizeText,s=b.styleTextPoints;ee.exports={style:function(t,i,r){var n=r||M.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");d(t,n,"waterfall"),n.style("opacity",function(o){return o[0].trace.opacity}),n.each(function(o){var a=M.select(this),u=o[0].trace;a.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u[p.dir].marker;M.select(this).call(l.fill,c.color).call(l.stroke,c.line.color).call(k.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!p.selected?T:1)}}),s(a,u,t),a.selectAll(".lines").each(function(){var p=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},82887:function(ee,D,e){var M=e(89298),k=e(71828),l=e(86281),T=e(79344).p,b=e(50606).BADNUM;D.moduleType="transform",D.name="aggregate";var d=D.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=d.aggregations;function t(o,a,u,p){if(p.enabled){for(var c=p.target,x=k.nestedProperty(a,c),g=x.get(),h=function(m,_){var f=m.func,S=_.d2c,w=_.c2d;switch(f){case"count":return i;case"first":return r;case"last":return n;case"sum":return function(E,L){for(var C=0,P=0;P<L.length;P++){var z=S(E[L[P]]);z!==b&&(C+=z)}return w(C)};case"avg":return function(E,L){for(var C=0,P=0,z=0;z<L.length;z++){var G=S(E[L[z]]);G!==b&&(C+=G,P++)}return P?w(C/P):b};case"min":return function(E,L){for(var C=1/0,P=0;P<L.length;P++){var z=S(E[L[P]]);z!==b&&(C=Math.min(C,z))}return C===1/0?b:w(C)};case"max":return function(E,L){for(var C=-1/0,P=0;P<L.length;P++){var z=S(E[L[P]]);z!==b&&(C=Math.max(C,z))}return C===-1/0?b:w(C)};case"range":return function(E,L){for(var C=1/0,P=-1/0,z=0;z<L.length;z++){var G=S(E[L[z]]);G!==b&&(C=Math.min(C,G),P=Math.max(P,G))}return P===-1/0||C===1/0?b:w(P-C)};case"change":return function(E,L){var C=S(E[L[0]]),P=S(E[L[L.length-1]]);return C===b||P===b?b:w(P-C)};case"median":return function(E,L){for(var C=[],P=0;P<L.length;P++){var z=S(E[L[P]]);z!==b&&C.push(z)}if(!C.length)return b;C.sort(k.sorterAsc);var G=(C.length-1)/2;return w((C[Math.floor(G)]+C[Math.ceil(G)])/2)};case"mode":return function(E,L){for(var C={},P=0,z=b,G=0;G<L.length;G++){var O=S(E[L[G]]);if(O!==b){var H=C[O]=(C[O]||0)+1;H>P&&(P=H,z=O)}}return P?w(z):b};case"rms":return function(E,L){for(var C=0,P=0,z=0;z<L.length;z++){var G=S(E[L[z]]);G!==b&&(C+=G*G,P++)}return P?w(Math.sqrt(C/P)):b};case"stddev":return function(E,L){var C,P=0,z=0,G=1,O=b;for(C=0;C<L.length&&O===b;C++)O=S(E[L[C]]);if(O===b)return b;for(;C<L.length;C++){var H=S(E[L[C]]);if(H!==b){var N=H-O;P+=N,z+=N*N,G++}}var B=m.funcmode==="sample"?G-1:G;return B?Math.sqrt((z-P*P/G)/B):0}}}(p,M.getDataConversions(o,a,c,g)),y=new Array(u.length),v=0;v<u.length;v++)y[v]=h(g,u[v]);x.set(y),p.func==="count"&&k.pushUnique(a._arrayAttrs,c)}}function i(o,a){return a.length}function r(o,a){return o[a[0]]}function n(o,a){return o[a[a.length-1]]}D.supplyDefaults=function(o,a){var u,p={};function c(w,E){return k.coerce(o,p,d,w,E)}if(!c("enabled"))return p;var x=l.findArrayAttributes(a),g={};for(u=0;u<x.length;u++)g[x[u]]=1;var h=c("groups");if(!Array.isArray(h)){if(!g[h])return p.enabled=!1,p;g[h]=0}var y,v=o.aggregations||[],m=p.aggregations=new Array(v.length);function _(w,E){return k.coerce(v[u],y,s,w,E)}for(u=0;u<v.length;u++){y={_index:u};var f=_("target"),S=_("func");_("enabled")&&f&&(g[f]||S==="count"&&g[f]===void 0)?(S==="stddev"&&_("funcmode"),g[f]=0,m[u]=y):m[u]={enabled:!1,_index:u}}for(u=0;u<x.length;u++)g[x[u]]&&m.push({target:x[u],func:s.func.dflt,enabled:!0,_index:-1});return p},D.calcTransform=function(o,a,u){if(u.enabled){var p=u.groups,c=k.getTargetArray(a,{target:p});if(c){var x,g,h,y,v={},m={},_=[],f=T(a.transforms,u),S=c.length;for(a._length&&(S=Math.min(S,a._length)),x=0;x<S;x++)(h=v[g=c[x]])===void 0?(v[g]=_.length,y=[x],_.push(y),m[v[g]]=f(x)):(_[h].push(x),m[v[g]]=(m[v[g]]||[]).concat(f(x)));u._indexToPoints=m;var w=u.aggregations;for(x=0;x<w.length;x++)t(o,a,_,w[x]);typeof p=="string"&&t(o,a,_,{target:p,func:"first",enabled:!0}),a._length=_.length}}}},14382:function(ee,D,e){var M=e(71828),k=e(73972),l=e(89298),T=e(79344).p,b=e(74808),d=b.COMPARISON_OPS,s=b.INTERVAL_OPS,t=b.SET_OPS;D.moduleType="transform",D.name="filter",D.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(d).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},D.supplyDefaults=function(i){var r={};function n(u,p){return M.coerce(i,r,D.attributes,u,p)}if(n("enabled")){var o=n("target");if(M.isArrayOrTypedArray(o)&&o.length===0)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var a=k.getComponentMethod("calendars","handleDefaults");a(i,r,"valuecalendar",null),a(i,r,"targetcalendar",null)}return r},D.calcTransform=function(i,r,n){if(n.enabled){var o=M.getTargetArray(r,n);if(o){var a=n.target,u=o.length;r._length&&(u=Math.min(u,r._length));var p=n.targetcalendar,c=r._arrayAttrs,x=n.preservegaps;if(typeof a=="string"){var g=M.nestedProperty(r,a+"calendar").get();g&&(p=g)}var h,y,v=function(L,C,P){var z=L.operation,G=L.value,O=Array.isArray(G);function H(q){return q.indexOf(z)!==-1}var N,B=function(q){return C(q,0,L.valuecalendar)},V=function(q){return C(q,0,P)};switch(H(d)?N=B(O?G[0]:G):H(s)?N=O?[B(G[0]),B(G[1])]:[B(G),B(G)]:H(t)&&(N=O?G.map(B):[B(G)]),z){case"=":return function(q){return V(q)===N};case"!=":return function(q){return V(q)!==N};case"<":return function(q){return V(q)<N};case"<=":return function(q){return V(q)<=N};case">":return function(q){return V(q)>N};case">=":return function(q){return V(q)>=N};case"[]":return function(q){var te=V(q);return te>=N[0]&&te<=N[1]};case"()":return function(q){var te=V(q);return te>N[0]&&te<N[1]};case"[)":return function(q){var te=V(q);return te>=N[0]&&te<N[1]};case"(]":return function(q){var te=V(q);return te>N[0]&&te<=N[1]};case"][":return function(q){var te=V(q);return te<=N[0]||te>=N[1]};case")(":return function(q){var te=V(q);return te<N[0]||te>N[1]};case"](":return function(q){var te=V(q);return te<=N[0]||te>N[1]};case")[":return function(q){var te=V(q);return te<N[0]||te>=N[1]};case"{}":return function(q){return N.indexOf(V(q))!==-1};case"}{":return function(q){return N.indexOf(V(q))===-1}}}(n,l.getDataToCoordFunc(i,r,a,o),p),m={},_={},f=0;x?(h=function(L){m[L.astr]=M.extendDeep([],L.get()),L.set(new Array(u))},y=function(L,C){var P=m[L.astr][C];L.get()[C]=P}):(h=function(L){m[L.astr]=M.extendDeep([],L.get()),L.set([])},y=function(L,C){var P=m[L.astr][C];L.get().push(P)}),E(h);for(var S=T(r.transforms,n),w=0;w<u;w++)v(o[w])?(E(y,w),_[f++]=S(w)):x&&f++;n._indexToPoints=_,r._length=f}}function E(L,C){for(var P=0;P<c.length;P++)L(M.nestedProperty(r,c[P]),C)}}},43102:function(ee,D,e){var M=e(71828),k=e(86281),l=e(74875),T=e(79344).p;function b(d,s){var t,i,r,n,o,a,u,p,c,x,g=s.transform,h=s.transformIndex,y=d.transforms[h].groups,v=T(d.transforms,g);if(!M.isArrayOrTypedArray(y)||y.length===0)return[d];var m=M.filterUnique(y),_=new Array(m.length),f=y.length,S=k.findArrayAttributes(d),w=g.styles||[],E={};for(t=0;t<w.length;t++)E[w[t].target]=w[t].value;g.styles&&(x=M.keyedContainer(g,"styles","target","value.name"));var L={},C={};for(t=0;t<m.length;t++){L[a=m[t]]=t,C[a]=0,(u=_[t]=M.extendDeepNoArrays({},d))._group=a,u.transforms[h]._indexToPoints={};var P=null;for(x&&(P=x.get(a)),u.name=P||P===""?P:M.templateString(g.nameformat,{trace:d.name,group:a}),p=u.transforms,u.transforms=[],i=0;i<p.length;i++)u.transforms[i]=M.extendDeepNoArrays({},p[i]);for(i=0;i<S.length;i++)M.nestedProperty(u,S[i]).set([])}for(r=0;r<S.length;r++){for(n=S[r],i=0,c=[];i<m.length;i++)c[i]=M.nestedProperty(_[i],n).get();for(o=M.nestedProperty(d,n).get(),i=0;i<f;i++)c[L[y[i]]].push(o[i])}for(i=0;i<f;i++)(u=_[L[y[i]]]).transforms[h]._indexToPoints[C[y[i]]]=v(i),C[y[i]]++;for(t=0;t<m.length;t++)a=m[t],u=_[t],l.clearExpandedTraceDefaultColors(u),u=M.extendDeepNoArrays(u,E[a]||{});return _}D.moduleType="transform",D.name="groupby",D.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},D.supplyDefaults=function(d,s,t){var i,r={};function n(c,x){return M.coerce(d,r,D.attributes,c,x)}if(!n("enabled"))return r;n("groups"),n("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var o=d.styles,a=r.styles=[];if(o)for(i=0;i<o.length;i++){var u=a[i]={};M.coerce(o[i],a[i],D.attributes.styles,"target");var p=M.coerce(o[i],a[i],D.attributes.styles,"value");M.isPlainObject(p)?u.value=M.extendDeep({},p):p&&delete u.value}return r},D.transform=function(d,s){var t,i,r,n=[];for(i=0;i<d.length;i++)for(t=b(d[i],s),r=0;r<t.length;r++)n.push(t[r]);return n}},79344:function(ee,D){D.p=function(e,M){for(var k,l,T=0;T<e.length&&(k=e[T])!==M;T++)k._indexToPoints&&k.enabled!==!1&&(l=k._indexToPoints);var b=l?function(d){return l[d]}:function(d){return[d]};return b}},32275:function(ee,D,e){var M=e(71828),k=e(89298),l=e(79344).p,T=e(50606).BADNUM;D.moduleType="transform",D.name="sort",D.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},D.supplyDefaults=function(b){var d={};function s(t,i){return M.coerce(b,d,D.attributes,t,i)}return s("enabled")&&(s("target"),s("order")),d},D.calcTransform=function(b,d,s){if(s.enabled){var t=M.getTargetArray(d,s);if(t){var i=s.target,r=t.length;d._length&&(r=Math.min(r,d._length));var n,o,a=d._arrayAttrs,u=function(y,v,m,_){var f,S=new Array(_),w=new Array(_);for(f=0;f<_;f++)S[f]={v:v[f],i:f};for(S.sort(function(E,L){switch(E.order){case"ascending":return function(C,P){var z=L(C.v),G=L(P.v);return z===T?1:G===T?-1:z-G};case"descending":return function(C,P){var z=L(C.v),G=L(P.v);return z===T?1:G===T?-1:G-z}}}(y,m)),f=0;f<_;f++)w[f]=S[f].i;return w}(s,t,k.getDataToCoordFunc(b,d,i,t),r),p=l(d.transforms,s),c={};for(n=0;n<a.length;n++){var x=M.nestedProperty(d,a[n]),g=x.get(),h=new Array(r);for(o=0;o<r;o++)h[o]=g[u[o]];x.set(h)}for(o=0;o<r;o++)c[o]=p(u[o]);s._indexToPoints=c,d._length=r}}}},11506:function(ee,D){D.version="2.27.0"},9330:function(ee,D,e){var M,k=e(90386);M=function(){return function(){var l={7386:function(d,s,t){d.exports={alpha_shape:t(2350),convex_hull:t(5537),delaunay_triangulate:t(4419),gl_cone3d:t(1140),gl_error3d:t(3110),gl_heatmap2d:t(6386),gl_line3d:t(6086),gl_mesh3d:t(8116),gl_plot2d:t(2117),gl_plot3d:t(1059),gl_pointcloud2d:t(8271),gl_scatter3d:t(2182),gl_select_box:t(6623),gl_spikes2d:t(3050),gl_streamtube3d:t(7307),gl_surface3d:t(3754),ndarray:t(5050),ndarray_linear_interpolate:t(3581)}},2146:function(d,s,t){function i(ce,we){for(var ye=0;ye<we.length;ye++){var Ce=we[ye];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(ce,Ce.key,Ce)}}function r(ce,we){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ye,Ce){return ye.__proto__=Ce,ye},r(ce,we)}function n(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function o(ce){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(we){return we.__proto__||Object.getPrototypeOf(we)},o(ce)}function a(ce){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},a(ce)}var u=t(3910),p=t(3187),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=h,s.h2=50;var x=2147483647;function g(ce){if(ce>x)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var we=new Uint8Array(ce);return Object.setPrototypeOf(we,h.prototype),we}function h(ce,we,ye){if(typeof ce=="number"){if(typeof we=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(ce)}return y(ce,we,ye)}function y(ce,we,ye){if(typeof ce=="string")return function(ze,He){if(typeof He=="string"&&He!==""||(He="utf8"),!h.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var Ge=0|w(ze,He),Je=g(Ge),ot=Je.write(ze,He);return ot!==Ge&&(Je=Je.slice(0,ot)),Je}(ce,we);if(ArrayBuffer.isView(ce))return function(ze){if(Ee(ze,Uint8Array)){var He=new Uint8Array(ze);return f(He.buffer,He.byteOffset,He.byteLength)}return _(ze)}(ce);if(ce==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(ce));if(Ee(ce,ArrayBuffer)||ce&&Ee(ce.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ee(ce,SharedArrayBuffer)||ce&&Ee(ce.buffer,SharedArrayBuffer)))return f(ce,we,ye);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ce=ce.valueOf&&ce.valueOf();if(Ce!=null&&Ce!==ce)return h.from(Ce,we,ye);var Re=function(ze){if(h.isBuffer(ze)){var He=0|S(ze.length),Ge=g(He);return Ge.length===0||ze.copy(Ge,0,0,He),Ge}return ze.length!==void 0?typeof ze.length!="number"||ke(ze.length)?g(0):_(ze):ze.type==="Buffer"&&Array.isArray(ze.data)?_(ze.data):void 0}(ce);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return h.from(ce[Symbol.toPrimitive]("string"),we,ye);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(ce))}function v(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function m(ce){return v(ce),g(ce<0?0:0|S(ce))}function _(ce){for(var we=ce.length<0?0:0|S(ce.length),ye=g(we),Ce=0;Ce<we;Ce+=1)ye[Ce]=255&ce[Ce];return ye}function f(ce,we,ye){if(we<0||ce.byteLength<we)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<we+(ye||0))throw new RangeError('"length" is outside of buffer bounds');var Ce;return Ce=we===void 0&&ye===void 0?new Uint8Array(ce):ye===void 0?new Uint8Array(ce,we):new Uint8Array(ce,we,ye),Object.setPrototypeOf(Ce,h.prototype),Ce}function S(ce){if(ce>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return 0|ce}function w(ce,we){if(h.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||Ee(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+a(ce));var ye=ce.length,Ce=arguments.length>2&&arguments[2]===!0;if(!Ce&&ye===0)return 0;for(var Re=!1;;)switch(we){case"ascii":case"latin1":case"binary":return ye;case"utf8":case"utf-8":return se(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ye;case"hex":return ye>>>1;case"base64":return oe(ce).length;default:if(Re)return Ce?-1:se(ce).length;we=(""+we).toLowerCase(),Re=!0}}function E(ce,we,ye){var Ce=!1;if((we===void 0||we<0)&&(we=0),we>this.length||((ye===void 0||ye>this.length)&&(ye=this.length),ye<=0)||(ye>>>=0)<=(we>>>=0))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return J(this,we,ye);case"utf8":case"utf-8":return V(this,we,ye);case"ascii":return te(this,we,ye);case"latin1":case"binary":return K(this,we,ye);case"base64":return B(this,we,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,we,ye);default:if(Ce)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),Ce=!0}}function L(ce,we,ye){var Ce=ce[we];ce[we]=ce[ye],ce[ye]=Ce}function C(ce,we,ye,Ce,Re){if(ce.length===0)return-1;if(typeof ye=="string"?(Ce=ye,ye=0):ye>2147483647?ye=2147483647:ye<-2147483648&&(ye=-2147483648),ke(ye=+ye)&&(ye=Re?0:ce.length-1),ye<0&&(ye=ce.length+ye),ye>=ce.length){if(Re)return-1;ye=ce.length-1}else if(ye<0){if(!Re)return-1;ye=0}if(typeof we=="string"&&(we=h.from(we,Ce)),h.isBuffer(we))return we.length===0?-1:P(ce,we,ye,Ce,Re);if(typeof we=="number")return we&=255,typeof Uint8Array.prototype.indexOf=="function"?Re?Uint8Array.prototype.indexOf.call(ce,we,ye):Uint8Array.prototype.lastIndexOf.call(ce,we,ye):P(ce,[we],ye,Ce,Re);throw new TypeError("val must be string, number or Buffer")}function P(ce,we,ye,Ce,Re){var ze,He=1,Ge=ce.length,Je=we.length;if(Ce!==void 0&&((Ce=String(Ce).toLowerCase())==="ucs2"||Ce==="ucs-2"||Ce==="utf16le"||Ce==="utf-16le")){if(ce.length<2||we.length<2)return-1;He=2,Ge/=2,Je/=2,ye/=2}function ot(mt,rt){return He===1?mt[rt]:mt.readUInt16BE(rt*He)}if(Re){var Qe=-1;for(ze=ye;ze<Ge;ze++)if(ot(ce,ze)===ot(we,Qe===-1?0:ze-Qe)){if(Qe===-1&&(Qe=ze),ze-Qe+1===Je)return Qe*He}else Qe!==-1&&(ze-=ze-Qe),Qe=-1}else for(ye+Je>Ge&&(ye=Ge-Je),ze=ye;ze>=0;ze--){for(var vt=!0,xt=0;xt<Je;xt++)if(ot(ce,ze+xt)!==ot(we,xt)){vt=!1;break}if(vt)return ze}return-1}function z(ce,we,ye,Ce){ye=Number(ye)||0;var Re=ce.length-ye;Ce?(Ce=Number(Ce))>Re&&(Ce=Re):Ce=Re;var ze,He=we.length;for(Ce>He/2&&(Ce=He/2),ze=0;ze<Ce;++ze){var Ge=parseInt(we.substr(2*ze,2),16);if(ke(Ge))return ze;ce[ye+ze]=Ge}return ze}function G(ce,we,ye,Ce){return he(se(we,ce.length-ye),ce,ye,Ce)}function O(ce,we,ye,Ce){return he(function(Re){for(var ze=[],He=0;He<Re.length;++He)ze.push(255&Re.charCodeAt(He));return ze}(we),ce,ye,Ce)}function H(ce,we,ye,Ce){return he(oe(we),ce,ye,Ce)}function N(ce,we,ye,Ce){return he(function(Re,ze){for(var He,Ge,Je,ot=[],Qe=0;Qe<Re.length&&!((ze-=2)<0);++Qe)Ge=(He=Re.charCodeAt(Qe))>>8,Je=He%256,ot.push(Je),ot.push(Ge);return ot}(we,ce.length-ye),ce,ye,Ce)}function B(ce,we,ye){return we===0&&ye===ce.length?u.fromByteArray(ce):u.fromByteArray(ce.slice(we,ye))}function V(ce,we,ye){ye=Math.min(ce.length,ye);for(var Ce=[],Re=we;Re<ye;){var ze=ce[Re],He=null,Ge=ze>239?4:ze>223?3:ze>191?2:1;if(Re+Ge<=ye){var Je=void 0,ot=void 0,Qe=void 0,vt=void 0;switch(Ge){case 1:ze<128&&(He=ze);break;case 2:(192&(Je=ce[Re+1]))==128&&(vt=(31&ze)<<6|63&Je)>127&&(He=vt);break;case 3:Je=ce[Re+1],ot=ce[Re+2],(192&Je)==128&&(192&ot)==128&&(vt=(15&ze)<<12|(63&Je)<<6|63&ot)>2047&&(vt<55296||vt>57343)&&(He=vt);break;case 4:Je=ce[Re+1],ot=ce[Re+2],Qe=ce[Re+3],(192&Je)==128&&(192&ot)==128&&(192&Qe)==128&&(vt=(15&ze)<<18|(63&Je)<<12|(63&ot)<<6|63&Qe)>65535&&vt<1114112&&(He=vt)}}He===null?(He=65533,Ge=1):He>65535&&(He-=65536,Ce.push(He>>>10&1023|55296),He=56320|1023&He),Ce.push(He),Re+=Ge}return function(xt){var mt=xt.length;if(mt<=q)return String.fromCharCode.apply(String,xt);for(var rt="",it=0;it<mt;)rt+=String.fromCharCode.apply(String,xt.slice(it,it+=q));return rt}(Ce)}h.TYPED_ARRAY_SUPPORT=function(){try{var ce=new Uint8Array(1),we={foo:function(){return 42}};return Object.setPrototypeOf(we,Uint8Array.prototype),Object.setPrototypeOf(ce,we),ce.foo()===42}catch{return!1}}(),h.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(ce,we,ye){return y(ce,we,ye)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(ce,we,ye){return function(Ce,Re,ze){return v(Ce),Ce<=0?g(Ce):Re!==void 0?typeof ze=="string"?g(Ce).fill(Re,ze):g(Ce).fill(Re):g(Ce)}(ce,we,ye)},h.allocUnsafe=function(ce){return m(ce)},h.allocUnsafeSlow=function(ce){return m(ce)},h.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==h.prototype},h.compare=function(ce,we){if(Ee(ce,Uint8Array)&&(ce=h.from(ce,ce.offset,ce.byteLength)),Ee(we,Uint8Array)&&(we=h.from(we,we.offset,we.byteLength)),!h.isBuffer(ce)||!h.isBuffer(we))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===we)return 0;for(var ye=ce.length,Ce=we.length,Re=0,ze=Math.min(ye,Ce);Re<ze;++Re)if(ce[Re]!==we[Re]){ye=ce[Re],Ce=we[Re];break}return ye<Ce?-1:Ce<ye?1:0},h.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(ce,we){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return h.alloc(0);var ye;if(we===void 0)for(we=0,ye=0;ye<ce.length;++ye)we+=ce[ye].length;var Ce=h.allocUnsafe(we),Re=0;for(ye=0;ye<ce.length;++ye){var ze=ce[ye];if(Ee(ze,Uint8Array))Re+ze.length>Ce.length?(h.isBuffer(ze)||(ze=h.from(ze)),ze.copy(Ce,Re)):Uint8Array.prototype.set.call(Ce,ze,Re);else{if(!h.isBuffer(ze))throw new TypeError('"list" argument must be an Array of Buffers');ze.copy(Ce,Re)}Re+=ze.length}return Ce},h.byteLength=w,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var ce=this.length;if(ce%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var we=0;we<ce;we+=2)L(this,we,we+1);return this},h.prototype.swap32=function(){var ce=this.length;if(ce%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var we=0;we<ce;we+=4)L(this,we,we+3),L(this,we+1,we+2);return this},h.prototype.swap64=function(){var ce=this.length;if(ce%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var we=0;we<ce;we+=8)L(this,we,we+7),L(this,we+1,we+6),L(this,we+2,we+5),L(this,we+3,we+4);return this},h.prototype.toString=function(){var ce=this.length;return ce===0?"":arguments.length===0?V(this,0,ce):E.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(ce){if(!h.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce||h.compare(this,ce)===0},h.prototype.inspect=function(){var ce="",we=s.h2;return ce=this.toString("hex",0,we).replace(/(.{2})/g,"$1 ").trim(),this.length>we&&(ce+=" ... "),"<Buffer "+ce+">"},c&&(h.prototype[c]=h.prototype.inspect),h.prototype.compare=function(ce,we,ye,Ce,Re){if(Ee(ce,Uint8Array)&&(ce=h.from(ce,ce.offset,ce.byteLength)),!h.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+a(ce));if(we===void 0&&(we=0),ye===void 0&&(ye=ce?ce.length:0),Ce===void 0&&(Ce=0),Re===void 0&&(Re=this.length),we<0||ye>ce.length||Ce<0||Re>this.length)throw new RangeError("out of range index");if(Ce>=Re&&we>=ye)return 0;if(Ce>=Re)return-1;if(we>=ye)return 1;if(this===ce)return 0;for(var ze=(Re>>>=0)-(Ce>>>=0),He=(ye>>>=0)-(we>>>=0),Ge=Math.min(ze,He),Je=this.slice(Ce,Re),ot=ce.slice(we,ye),Qe=0;Qe<Ge;++Qe)if(Je[Qe]!==ot[Qe]){ze=Je[Qe],He=ot[Qe];break}return ze<He?-1:He<ze?1:0},h.prototype.includes=function(ce,we,ye){return this.indexOf(ce,we,ye)!==-1},h.prototype.indexOf=function(ce,we,ye){return C(this,ce,we,ye,!0)},h.prototype.lastIndexOf=function(ce,we,ye){return C(this,ce,we,ye,!1)},h.prototype.write=function(ce,we,ye,Ce){if(we===void 0)Ce="utf8",ye=this.length,we=0;else if(ye===void 0&&typeof we=="string")Ce=we,ye=this.length,we=0;else{if(!isFinite(we))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");we>>>=0,isFinite(ye)?(ye>>>=0,Ce===void 0&&(Ce="utf8")):(Ce=ye,ye=void 0)}var Re=this.length-we;if((ye===void 0||ye>Re)&&(ye=Re),ce.length>0&&(ye<0||we<0)||we>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ce||(Ce="utf8");for(var ze=!1;;)switch(Ce){case"hex":return z(this,ce,we,ye);case"utf8":case"utf-8":return G(this,ce,we,ye);case"ascii":case"latin1":case"binary":return O(this,ce,we,ye);case"base64":return H(this,ce,we,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,ce,we,ye);default:if(ze)throw new TypeError("Unknown encoding: "+Ce);Ce=(""+Ce).toLowerCase(),ze=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var q=4096;function te(ce,we,ye){var Ce="";ye=Math.min(ce.length,ye);for(var Re=we;Re<ye;++Re)Ce+=String.fromCharCode(127&ce[Re]);return Ce}function K(ce,we,ye){var Ce="";ye=Math.min(ce.length,ye);for(var Re=we;Re<ye;++Re)Ce+=String.fromCharCode(ce[Re]);return Ce}function J(ce,we,ye){var Ce=ce.length;(!we||we<0)&&(we=0),(!ye||ye<0||ye>Ce)&&(ye=Ce);for(var Re="",ze=we;ze<ye;++ze)Re+=be[ce[ze]];return Re}function Y(ce,we,ye){for(var Ce=ce.slice(we,ye),Re="",ze=0;ze<Ce.length-1;ze+=2)Re+=String.fromCharCode(Ce[ze]+256*Ce[ze+1]);return Re}function W(ce,we,ye){if(ce%1!=0||ce<0)throw new RangeError("offset is not uint");if(ce+we>ye)throw new RangeError("Trying to access beyond buffer length")}function Q(ce,we,ye,Ce,Re,ze){if(!h.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(we>Re||we<ze)throw new RangeError('"value" argument is out of bounds');if(ye+Ce>ce.length)throw new RangeError("Index out of range")}function ne(ce,we,ye,Ce,Re){ve(we,Ce,Re,ce,ye,7);var ze=Number(we&BigInt(4294967295));ce[ye++]=ze,ze>>=8,ce[ye++]=ze,ze>>=8,ce[ye++]=ze,ze>>=8,ce[ye++]=ze;var He=Number(we>>BigInt(32)&BigInt(4294967295));return ce[ye++]=He,He>>=8,ce[ye++]=He,He>>=8,ce[ye++]=He,He>>=8,ce[ye++]=He,ye}function re(ce,we,ye,Ce,Re){ve(we,Ce,Re,ce,ye,7);var ze=Number(we&BigInt(4294967295));ce[ye+7]=ze,ze>>=8,ce[ye+6]=ze,ze>>=8,ce[ye+5]=ze,ze>>=8,ce[ye+4]=ze;var He=Number(we>>BigInt(32)&BigInt(4294967295));return ce[ye+3]=He,He>>=8,ce[ye+2]=He,He>>=8,ce[ye+1]=He,He>>=8,ce[ye]=He,ye+8}function ae(ce,we,ye,Ce,Re,ze){if(ye+Ce>ce.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("Index out of range")}function ue(ce,we,ye,Ce,Re){return we=+we,ye>>>=0,Re||ae(ce,0,ye,4),p.write(ce,we,ye,Ce,23,4),ye+4}function pe(ce,we,ye,Ce,Re){return we=+we,ye>>>=0,Re||ae(ce,0,ye,8),p.write(ce,we,ye,Ce,52,8),ye+8}h.prototype.slice=function(ce,we){var ye=this.length;(ce=~~ce)<0?(ce+=ye)<0&&(ce=0):ce>ye&&(ce=ye),(we=we===void 0?ye:~~we)<0?(we+=ye)<0&&(we=0):we>ye&&(we=ye),we<ce&&(we=ce);var Ce=this.subarray(ce,we);return Object.setPrototypeOf(Ce,h.prototype),Ce},h.prototype.readUintLE=h.prototype.readUIntLE=function(ce,we,ye){ce>>>=0,we>>>=0,ye||W(ce,we,this.length);for(var Ce=this[ce],Re=1,ze=0;++ze<we&&(Re*=256);)Ce+=this[ce+ze]*Re;return Ce},h.prototype.readUintBE=h.prototype.readUIntBE=function(ce,we,ye){ce>>>=0,we>>>=0,ye||W(ce,we,this.length);for(var Ce=this[ce+--we],Re=1;we>0&&(Re*=256);)Ce+=this[ce+--we]*Re;return Ce},h.prototype.readUint8=h.prototype.readUInt8=function(ce,we){return ce>>>=0,we||W(ce,1,this.length),this[ce]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(ce,we){return ce>>>=0,we||W(ce,2,this.length),this[ce]|this[ce+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(ce,we){return ce>>>=0,we||W(ce,2,this.length),this[ce]<<8|this[ce+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(ce,we){return ce>>>=0,we||W(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+16777216*this[ce+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(ce,we){return ce>>>=0,we||W(ce,4,this.length),16777216*this[ce]+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},h.prototype.readBigUInt64LE=Ie(function(ce){Oe(ce>>>=0,"offset");var we=this[ce],ye=this[ce+7];we!==void 0&&ye!==void 0||Me(ce,this.length-8);var Ce=we+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24),Re=this[++ce]+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+ye*Math.pow(2,24);return BigInt(Ce)+(BigInt(Re)<<BigInt(32))}),h.prototype.readBigUInt64BE=Ie(function(ce){Oe(ce>>>=0,"offset");var we=this[ce],ye=this[ce+7];we!==void 0&&ye!==void 0||Me(ce,this.length-8);var Ce=we*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce],Re=this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+ye;return(BigInt(Ce)<<BigInt(32))+BigInt(Re)}),h.prototype.readIntLE=function(ce,we,ye){ce>>>=0,we>>>=0,ye||W(ce,we,this.length);for(var Ce=this[ce],Re=1,ze=0;++ze<we&&(Re*=256);)Ce+=this[ce+ze]*Re;return Ce>=(Re*=128)&&(Ce-=Math.pow(2,8*we)),Ce},h.prototype.readIntBE=function(ce,we,ye){ce>>>=0,we>>>=0,ye||W(ce,we,this.length);for(var Ce=we,Re=1,ze=this[ce+--Ce];Ce>0&&(Re*=256);)ze+=this[ce+--Ce]*Re;return ze>=(Re*=128)&&(ze-=Math.pow(2,8*we)),ze},h.prototype.readInt8=function(ce,we){return ce>>>=0,we||W(ce,1,this.length),128&this[ce]?-1*(255-this[ce]+1):this[ce]},h.prototype.readInt16LE=function(ce,we){ce>>>=0,we||W(ce,2,this.length);var ye=this[ce]|this[ce+1]<<8;return 32768&ye?4294901760|ye:ye},h.prototype.readInt16BE=function(ce,we){ce>>>=0,we||W(ce,2,this.length);var ye=this[ce+1]|this[ce]<<8;return 32768&ye?4294901760|ye:ye},h.prototype.readInt32LE=function(ce,we){return ce>>>=0,we||W(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},h.prototype.readInt32BE=function(ce,we){return ce>>>=0,we||W(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},h.prototype.readBigInt64LE=Ie(function(ce){Oe(ce>>>=0,"offset");var we=this[ce],ye=this[ce+7];we!==void 0&&ye!==void 0||Me(ce,this.length-8);var Ce=this[ce+4]+this[ce+5]*Math.pow(2,8)+this[ce+6]*Math.pow(2,16)+(ye<<24);return(BigInt(Ce)<<BigInt(32))+BigInt(we+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24))}),h.prototype.readBigInt64BE=Ie(function(ce){Oe(ce>>>=0,"offset");var we=this[ce],ye=this[ce+7];we!==void 0&&ye!==void 0||Me(ce,this.length-8);var Ce=(we<<24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce];return(BigInt(Ce)<<BigInt(32))+BigInt(this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+ye)}),h.prototype.readFloatLE=function(ce,we){return ce>>>=0,we||W(ce,4,this.length),p.read(this,ce,!0,23,4)},h.prototype.readFloatBE=function(ce,we){return ce>>>=0,we||W(ce,4,this.length),p.read(this,ce,!1,23,4)},h.prototype.readDoubleLE=function(ce,we){return ce>>>=0,we||W(ce,8,this.length),p.read(this,ce,!0,52,8)},h.prototype.readDoubleBE=function(ce,we){return ce>>>=0,we||W(ce,8,this.length),p.read(this,ce,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(ce,we,ye,Ce){ce=+ce,we>>>=0,ye>>>=0,Ce||Q(this,ce,we,ye,Math.pow(2,8*ye)-1,0);var Re=1,ze=0;for(this[we]=255&ce;++ze<ye&&(Re*=256);)this[we+ze]=ce/Re&255;return we+ye},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(ce,we,ye,Ce){ce=+ce,we>>>=0,ye>>>=0,Ce||Q(this,ce,we,ye,Math.pow(2,8*ye)-1,0);var Re=ye-1,ze=1;for(this[we+Re]=255&ce;--Re>=0&&(ze*=256);)this[we+Re]=ce/ze&255;return we+ye},h.prototype.writeUint8=h.prototype.writeUInt8=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,1,255,0),this[we]=255&ce,we+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,2,65535,0),this[we]=255&ce,this[we+1]=ce>>>8,we+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,2,65535,0),this[we]=ce>>>8,this[we+1]=255&ce,we+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,4,4294967295,0),this[we+3]=ce>>>24,this[we+2]=ce>>>16,this[we+1]=ce>>>8,this[we]=255&ce,we+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,4,4294967295,0),this[we]=ce>>>24,this[we+1]=ce>>>16,this[we+2]=ce>>>8,this[we+3]=255&ce,we+4},h.prototype.writeBigUInt64LE=Ie(function(ce){return ne(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Ie(function(ce){return re(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(ce,we,ye,Ce){if(ce=+ce,we>>>=0,!Ce){var Re=Math.pow(2,8*ye-1);Q(this,ce,we,ye,Re-1,-Re)}var ze=0,He=1,Ge=0;for(this[we]=255&ce;++ze<ye&&(He*=256);)ce<0&&Ge===0&&this[we+ze-1]!==0&&(Ge=1),this[we+ze]=(ce/He>>0)-Ge&255;return we+ye},h.prototype.writeIntBE=function(ce,we,ye,Ce){if(ce=+ce,we>>>=0,!Ce){var Re=Math.pow(2,8*ye-1);Q(this,ce,we,ye,Re-1,-Re)}var ze=ye-1,He=1,Ge=0;for(this[we+ze]=255&ce;--ze>=0&&(He*=256);)ce<0&&Ge===0&&this[we+ze+1]!==0&&(Ge=1),this[we+ze]=(ce/He>>0)-Ge&255;return we+ye},h.prototype.writeInt8=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,1,127,-128),ce<0&&(ce=255+ce+1),this[we]=255&ce,we+1},h.prototype.writeInt16LE=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,2,32767,-32768),this[we]=255&ce,this[we+1]=ce>>>8,we+2},h.prototype.writeInt16BE=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,2,32767,-32768),this[we]=ce>>>8,this[we+1]=255&ce,we+2},h.prototype.writeInt32LE=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,4,2147483647,-2147483648),this[we]=255&ce,this[we+1]=ce>>>8,this[we+2]=ce>>>16,this[we+3]=ce>>>24,we+4},h.prototype.writeInt32BE=function(ce,we,ye){return ce=+ce,we>>>=0,ye||Q(this,ce,we,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[we]=ce>>>24,this[we+1]=ce>>>16,this[we+2]=ce>>>8,this[we+3]=255&ce,we+4},h.prototype.writeBigInt64LE=Ie(function(ce){return ne(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Ie(function(ce){return re(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(ce,we,ye){return ue(this,ce,we,!0,ye)},h.prototype.writeFloatBE=function(ce,we,ye){return ue(this,ce,we,!1,ye)},h.prototype.writeDoubleLE=function(ce,we,ye){return pe(this,ce,we,!0,ye)},h.prototype.writeDoubleBE=function(ce,we,ye){return pe(this,ce,we,!1,ye)},h.prototype.copy=function(ce,we,ye,Ce){if(!h.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),Ce||Ce===0||(Ce=this.length),we>=ce.length&&(we=ce.length),we||(we=0),Ce>0&&Ce<ye&&(Ce=ye),Ce===ye||ce.length===0||this.length===0)return 0;if(we<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(Ce<0)throw new RangeError("sourceEnd out of bounds");Ce>this.length&&(Ce=this.length),ce.length-we<Ce-ye&&(Ce=ce.length-we+ye);var Re=Ce-ye;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(we,ye,Ce):Uint8Array.prototype.set.call(ce,this.subarray(ye,Ce),we),Re},h.prototype.fill=function(ce,we,ye,Ce){if(typeof ce=="string"){if(typeof we=="string"?(Ce=we,we=0,ye=this.length):typeof ye=="string"&&(Ce=ye,ye=this.length),Ce!==void 0&&typeof Ce!="string")throw new TypeError("encoding must be a string");if(typeof Ce=="string"&&!h.isEncoding(Ce))throw new TypeError("Unknown encoding: "+Ce);if(ce.length===1){var Re=ce.charCodeAt(0);(Ce==="utf8"&&Re<128||Ce==="latin1")&&(ce=Re)}}else typeof ce=="number"?ce&=255:typeof ce=="boolean"&&(ce=Number(ce));if(we<0||this.length<we||this.length<ye)throw new RangeError("Out of range index");if(ye<=we)return this;var ze;if(we>>>=0,ye=ye===void 0?this.length:ye>>>0,ce||(ce=0),typeof ce=="number")for(ze=we;ze<ye;++ze)this[ze]=ce;else{var He=h.isBuffer(ce)?ce:h.from(ce,Ce),Ge=He.length;if(Ge===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(ze=0;ze<ye-we;++ze)this[ze+we]=He[ze%Ge]}return this};var ge={};function _e(ce,we,ye){ge[ce]=function(Ce){(function(Qe,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Super expression must either be null or a function");Qe.prototype=Object.create(vt&&vt.prototype,{constructor:{value:Qe,writable:!0,configurable:!0}}),Object.defineProperty(Qe,"prototype",{writable:!1}),vt&&r(Qe,vt)})(ot,Ce);var Re,ze,He,Ge,Je=(He=ot,Ge=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Qe,vt=o(He);if(Ge){var xt=o(this).constructor;Qe=Reflect.construct(vt,arguments,xt)}else Qe=vt.apply(this,arguments);return function(mt,rt){if(rt&&(a(rt)==="object"||typeof rt=="function"))return rt;if(rt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(mt)}(this,Qe)});function ot(){var Qe;return function(vt,xt){if(!(vt instanceof xt))throw new TypeError("Cannot call a class as a function")}(this,ot),Qe=Je.call(this),Object.defineProperty(n(Qe),"message",{value:we.apply(n(Qe),arguments),writable:!0,configurable:!0}),Qe.name="".concat(Qe.name," [").concat(ce,"]"),Qe.stack,delete Qe.name,Qe}return Re=ot,(ze=[{key:"code",get:function(){return ce},set:function(Qe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Qe,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ce,"]: ").concat(this.message)}}])&&i(Re.prototype,ze),Object.defineProperty(Re,"prototype",{writable:!1}),ot}(ye)}function me(ce){for(var we="",ye=ce.length,Ce=ce[0]==="-"?1:0;ye>=Ce+4;ye-=3)we="_".concat(ce.slice(ye-3,ye)).concat(we);return"".concat(ce.slice(0,ye)).concat(we)}function ve(ce,we,ye,Ce,Re,ze){if(ce>ye||ce<we){var He,Ge=typeof we=="bigint"?"n":"";throw He=ze>3?we===0||we===BigInt(0)?">= 0".concat(Ge," and < 2").concat(Ge," ** ").concat(8*(ze+1)).concat(Ge):">= -(2".concat(Ge," ** ").concat(8*(ze+1)-1).concat(Ge,") and < 2 ** ")+"".concat(8*(ze+1)-1).concat(Ge):">= ".concat(we).concat(Ge," and <= ").concat(ye).concat(Ge),new ge.ERR_OUT_OF_RANGE("value",He,ce)}(function(Je,ot,Qe){Oe(ot,"offset"),Je[ot]!==void 0&&Je[ot+Qe]!==void 0||Me(ot,Je.length-(Qe+1))})(Ce,Re,ze)}function Oe(ce,we){if(typeof ce!="number")throw new ge.ERR_INVALID_ARG_TYPE(we,"number",ce)}function Me(ce,we,ye){throw Math.floor(ce)!==ce?(Oe(ce,ye),new ge.ERR_OUT_OF_RANGE(ye||"offset","an integer",ce)):we<0?new ge.ERR_BUFFER_OUT_OF_BOUNDS:new ge.ERR_OUT_OF_RANGE(ye||"offset",">= ".concat(ye?1:0," and <= ").concat(we),ce)}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(ce){return ce?"".concat(ce," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(ce,we){return'The "'.concat(ce,'" argument must be of type number. Received type ').concat(a(we))},TypeError),_e("ERR_OUT_OF_RANGE",function(ce,we,ye){var Ce='The value of "'.concat(ce,'" is out of range.'),Re=ye;return Number.isInteger(ye)&&Math.abs(ye)>Math.pow(2,32)?Re=me(String(ye)):typeof ye=="bigint"&&(Re=String(ye),(ye>Math.pow(BigInt(2),BigInt(32))||ye<-Math.pow(BigInt(2),BigInt(32)))&&(Re=me(Re)),Re+="n"),Ce+" It must be ".concat(we,". Received ").concat(Re)},RangeError);var Te=/[^+/0-9A-Za-z-_]/g;function se(ce,we){var ye;we=we||1/0;for(var Ce=ce.length,Re=null,ze=[],He=0;He<Ce;++He){if((ye=ce.charCodeAt(He))>55295&&ye<57344){if(!Re){if(ye>56319){(we-=3)>-1&&ze.push(239,191,189);continue}if(He+1===Ce){(we-=3)>-1&&ze.push(239,191,189);continue}Re=ye;continue}if(ye<56320){(we-=3)>-1&&ze.push(239,191,189),Re=ye;continue}ye=65536+(Re-55296<<10|ye-56320)}else Re&&(we-=3)>-1&&ze.push(239,191,189);if(Re=null,ye<128){if((we-=1)<0)break;ze.push(ye)}else if(ye<2048){if((we-=2)<0)break;ze.push(ye>>6|192,63&ye|128)}else if(ye<65536){if((we-=3)<0)break;ze.push(ye>>12|224,ye>>6&63|128,63&ye|128)}else{if(!(ye<1114112))throw new Error("Invalid code point");if((we-=4)<0)break;ze.push(ye>>18|240,ye>>12&63|128,ye>>6&63|128,63&ye|128)}}return ze}function oe(ce){return u.toByteArray(function(we){if((we=(we=we.split("=")[0]).trim().replace(Te,"")).length<2)return"";for(;we.length%4!=0;)we+="=";return we}(ce))}function he(ce,we,ye,Ce){var Re;for(Re=0;Re<Ce&&!(Re+ye>=we.length||Re>=ce.length);++Re)we[Re+ye]=ce[Re];return Re}function Ee(ce,we){return ce instanceof we||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===we.name}function ke(ce){return ce!=ce}var be=function(){for(var ce="0123456789abcdef",we=new Array(256),ye=0;ye<16;++ye)for(var Ce=16*ye,Re=0;Re<16;++Re)we[Ce+Re]=ce[ye]+ce[Re];return we}();function Ie(ce){return typeof BigInt>"u"?Fe:ce}function Fe(){throw new Error("BigInt not supported")}},2321:function(d){d.exports=r,d.exports.isMobile=r,d.exports.default=r;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function r(n){n||(n={});var o=n.ua;if(o||typeof navigator>"u"||(o=navigator.userAgent),o&&o.headers&&typeof o.headers["user-agent"]=="string"&&(o=o.headers["user-agent"]),typeof o!="string")return!1;var a=s.test(o)&&!t.test(o)||!!n.tablet&&i.test(o);return!a&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&o.indexOf("Macintosh")!==-1&&o.indexOf("Safari")!==-1&&(a=!0),a}},3910:function(d,s){s.byteLength=function(p){var c=a(p),x=c[0],g=c[1];return 3*(x+g)/4-g},s.toByteArray=function(p){var c,x,g=a(p),h=g[0],y=g[1],v=new r(function(f,S,w){return 3*(S+w)/4-w}(0,h,y)),m=0,_=y>0?h-4:h;for(x=0;x<_;x+=4)c=i[p.charCodeAt(x)]<<18|i[p.charCodeAt(x+1)]<<12|i[p.charCodeAt(x+2)]<<6|i[p.charCodeAt(x+3)],v[m++]=c>>16&255,v[m++]=c>>8&255,v[m++]=255&c;return y===2&&(c=i[p.charCodeAt(x)]<<2|i[p.charCodeAt(x+1)]>>4,v[m++]=255&c),y===1&&(c=i[p.charCodeAt(x)]<<10|i[p.charCodeAt(x+1)]<<4|i[p.charCodeAt(x+2)]>>2,v[m++]=c>>8&255,v[m++]=255&c),v},s.fromByteArray=function(p){for(var c,x=p.length,g=x%3,h=[],y=16383,v=0,m=x-g;v<m;v+=y)h.push(u(p,v,v+y>m?m:v+y));return g===1?(c=p[x-1],h.push(t[c>>2]+t[c<<4&63]+"==")):g===2&&(c=(p[x-2]<<8)+p[x-1],h.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),h.join("")};for(var t=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)t[o]=n[o],i[n.charCodeAt(o)]=o;function a(p){var c=p.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=p.indexOf("=");return x===-1&&(x=c),[x,x===c?0:4-x%4]}function u(p,c,x){for(var g,h,y=[],v=c;v<x;v+=3)g=(p[v]<<16&16711680)+(p[v+1]<<8&65280)+(255&p[v+2]),y.push(t[(h=g)>>18&63]+t[h>>12&63]+t[h>>6&63]+t[63&h]);return y.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3187:function(d,s){s.read=function(t,i,r,n,o){var a,u,p=8*o-n-1,c=(1<<p)-1,x=c>>1,g=-7,h=r?o-1:0,y=r?-1:1,v=t[i+h];for(h+=y,a=v&(1<<-g)-1,v>>=-g,g+=p;g>0;a=256*a+t[i+h],h+=y,g-=8);for(u=a&(1<<-g)-1,a>>=-g,g+=n;g>0;u=256*u+t[i+h],h+=y,g-=8);if(a===0)a=1-x;else{if(a===c)return u?NaN:1/0*(v?-1:1);u+=Math.pow(2,n),a-=x}return(v?-1:1)*u*Math.pow(2,a-n)},s.write=function(t,i,r,n,o,a){var u,p,c,x=8*a-o-1,g=(1<<x)-1,h=g>>1,y=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:a-1,m=n?1:-1,_=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(p=isNaN(i)?1:0,u=g):(u=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-u))<1&&(u--,c*=2),(i+=u+h>=1?y/c:y*Math.pow(2,1-h))*c>=2&&(u++,c/=2),u+h>=g?(p=0,u=g):u+h>=1?(p=(i*c-1)*Math.pow(2,o),u+=h):(p=i*Math.pow(2,h-1)*Math.pow(2,o),u=0));o>=8;t[r+v]=255&p,v+=m,p/=256,o-=8);for(u=u<<o|p,x+=o;x>0;t[r+v]=255&u,v+=m,u/=256,x-=8);t[r+v-m]|=128*_}},1152:function(d,s,t){d.exports=function(u){var p=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],x=u.up||[0,1,0],g=u.distanceLimits||[0,1/0],h=u.mode||"turntable",y=i(),v=r(),m=n();return y.setDistanceLimits(g[0],g[1]),y.lookAt(0,p,c,x),v.setDistanceLimits(g[0],g[1]),v.lookAt(0,p,c,x),m.setDistanceLimits(g[0],g[1]),m.lookAt(0,p,c,x),new o({turntable:y,orbit:v,matrix:m},h)};var i=t(3440),r=t(7774),n=t(9298);function o(u,p){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=p,this._active=u[p],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var a=o.prototype;a.flush=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].flush(u)},a.idle=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].idle(u)},a.lookAt=function(u,p,c,x){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].lookAt(u,p,c,x)},a.rotate=function(u,p,c,x){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].rotate(u,p,c,x)},a.pan=function(u,p,c,x){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].pan(u,p,c,x)},a.translate=function(u,p,c,x){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].translate(u,p,c,x)},a.setMatrix=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setMatrix(u,p)},a.setDistanceLimits=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistanceLimits(u,p)},a.setDistance=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistance(u,p)},a.recalcMatrix=function(u){this._active.recalcMatrix(u)},a.getDistance=function(u){return this._active.getDistance(u)},a.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},a.lastT=function(){return this._active.lastT()},a.setMode=function(u){if(u!==this._mode){var p=this._controllerNames.indexOf(u);if(!(p<0)){var c=this._active,x=this._controllerList[p],g=Math.max(c.lastT(),x.lastT());c.recalcMatrix(g),x.setMatrix(g,c.computedMatrix),this._active=x,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},a.getMode=function(){return this._mode}},8126:function(d,s,t){var i=typeof WeakMap>"u"?t(5346):WeakMap,r=t(5827),n=t(2944),o=new i;d.exports=function(a){var u=o.get(a),p=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!p||!a.isBuffer(p)){var c=r(a,new Float32Array([-1,-1,-1,4,4,-1]));(u=n(a,[{buffer:c,type:a.FLOAT,size:2}]))._triangleBuffer=c,o.set(a,u)}u.bind(),a.drawArrays(a.TRIANGLES,0,3),u.unbind()}},8008:function(d,s,t){var i=t(4930);d.exports=function(r,n,o){n=typeof n=="number"?n:1,o=o||": ";var a=r.split(/\r?\n/),u=String(a.length+n-1).length;return a.map(function(p,c){var x=c+n,g=String(x).length;return i(x,u-g)+o+p}).join(`
`)}},2153:function(d,s,t){d.exports=function(n){var o=n.length;if(o===0)return[];if(o===1)return[0];for(var a=n[0].length,u=[n[0]],p=[0],c=1;c<o;++c)if(u.push(n[c]),r(u,a)){if(p.push(c),p.length===a+1)return p}else u.pop();return p};var i=t(417);function r(n,o){for(var a=new Array(o+1),u=0;u<n.length;++u)a[u]=n[u];for(u=0;u<=n.length;++u){for(var p=n.length;p<=o;++p){for(var c=new Array(o),x=0;x<o;++x)c[x]=Math.pow(p+1-u,x);a[p]=c}if(i.apply(void 0,a))return!0}return!1}},4653:function(d,s,t){d.exports=function(n,o){return i(o).filter(function(a){for(var u=new Array(a.length),p=0;p<a.length;++p)u[p]=o[a[p]];return r(u)*n<1})};var i=t(4419),r=t(1778)},2350:function(d,s,t){d.exports=function(n,o){return r(i(n,o))};var i=t(4653),r=t(8691)},7896:function(d){d.exports=function(s){return atob(s)}},957:function(d,s,t){d.exports=function(n,o){for(var a=o.length,u=new Array(a+1),p=0;p<a;++p){for(var c=new Array(a+1),x=0;x<=a;++x)c[x]=n[x][p];u[p]=c}for(u[a]=new Array(a+1),p=0;p<=a;++p)u[a][p]=1;var g=new Array(a+1);for(p=0;p<a;++p)g[p]=o[p];g[a]=1;var h=i(u,g),y=r(h[a+1]);y===0&&(y=1);var v=new Array(a+1);for(p=0;p<=a;++p)v[p]=r(h[p])/y;return v};var i=t(6606);function r(n){for(var o=0,a=0;a<n.length;++a)o+=n[a];return o}},1539:function(d,s,t){var i=t(8524);d.exports=function(r,n){return i(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},8846:function(d){d.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},9189:function(d,s,t){var i=t(8524);d.exports=function(r,n){return i(r[0].mul(n[1]),r[1].mul(n[0]))}},5125:function(d,s,t){var i=t(234),r=t(3218),n=t(5514),o=t(2813),a=t(8524),u=t(9189);d.exports=function p(c,x){if(i(c))return x?u(c,p(x)):[c[0].clone(),c[1].clone()];var g,h,y=0;if(r(c))g=c.clone();else if(typeof c=="string")g=o(c);else{if(c===0)return[n(0),n(1)];if(c===Math.floor(c))g=n(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),y-=256;g=n(c)}}if(i(x))g.mul(x[1]),h=x[0].clone();else if(r(x))h=x.clone();else if(typeof x=="string")h=o(x);else if(x)if(x===Math.floor(x))h=n(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),y+=256;h=n(x)}else h=n(1);return y>0?g=g.ushln(y):y<0&&(h=h.ushln(-y)),a(g,h)}},234:function(d,s,t){var i=t(3218);d.exports=function(r){return Array.isArray(r)&&r.length===2&&i(r[0])&&i(r[1])}},4275:function(d,s,t){var i=t(1928);d.exports=function(r){return r.cmp(new i(0))}},9958:function(d,s,t){var i=t(4275);d.exports=function(r){var n=r.length,o=r.words,a=0;if(n===1)a=o[0];else if(n===2)a=o[0]+67108864*o[1];else for(var u=0;u<n;u++)a+=o[u]*Math.pow(67108864,u);return i(r)*a}},1112:function(d,s,t){var i=t(8362),r=t(2288).countTrailingZeros;d.exports=function(n){var o=r(i.lo(n));if(o<32)return o;var a=r(i.hi(n));return a>20?52:a+32}},3218:function(d,s,t){t(1928),d.exports=function(i){return i&&typeof i=="object"&&!!i.words}},5514:function(d,s,t){var i=t(1928),r=t(8362);d.exports=function(n){var o=r.exponent(n);return o<52?new i(n):new i(n*Math.pow(2,52-o)).ushln(o-52)}},8524:function(d,s,t){var i=t(5514),r=t(4275);d.exports=function(n,o){var a=r(n),u=r(o);if(a===0)return[i(0),i(1)];if(u===0)return[i(0),i(0)];u<0&&(n=n.neg(),o=o.neg());var p=n.gcd(o);return p.cmpn(1)?[n.div(p),o.div(p)]:[n,o]}},2813:function(d,s,t){var i=t(1928);d.exports=function(r){return new i(r)}},3962:function(d,s,t){var i=t(8524);d.exports=function(r,n){return i(r[0].mul(n[0]),r[1].mul(n[1]))}},4951:function(d,s,t){var i=t(4275);d.exports=function(r){return i(r[0])*i(r[1])}},4354:function(d,s,t){var i=t(8524);d.exports=function(r,n){return i(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},7999:function(d,s,t){var i=t(9958),r=t(1112);d.exports=function(n){var o=n[0],a=n[1];if(o.cmpn(0)===0)return 0;var u=o.abs().divmod(a.abs()),p=u.div,c=i(p),x=u.mod,g=o.negative!==a.negative?-1:1;if(x.cmpn(0)===0)return g*c;if(c){var h=r(c)+4;return g*(c+(v=i(x.ushln(h).divRound(a)))*Math.pow(2,-h))}var y=a.bitLength()-x.bitLength()+53,v=i(x.ushln(y).divRound(a));return y<1023?g*v*Math.pow(2,-y):g*(v*=Math.pow(2,-1023))*Math.pow(2,1023-y)}},5070:function(d){function s(a,u,p,c,x){for(var g=x+1;c<=x;){var h=c+x>>>1,y=a[h];(p!==void 0?p(y,u):y-u)>=0?(g=h,x=h-1):c=h+1}return g}function t(a,u,p,c,x){for(var g=x+1;c<=x;){var h=c+x>>>1,y=a[h];(p!==void 0?p(y,u):y-u)>0?(g=h,x=h-1):c=h+1}return g}function i(a,u,p,c,x){for(var g=c-1;c<=x;){var h=c+x>>>1,y=a[h];(p!==void 0?p(y,u):y-u)<0?(g=h,c=h+1):x=h-1}return g}function r(a,u,p,c,x){for(var g=c-1;c<=x;){var h=c+x>>>1,y=a[h];(p!==void 0?p(y,u):y-u)<=0?(g=h,c=h+1):x=h-1}return g}function n(a,u,p,c,x){for(;c<=x;){var g=c+x>>>1,h=a[g],y=p!==void 0?p(h,u):h-u;if(y===0)return g;y<=0?c=g+1:x=g-1}return-1}function o(a,u,p,c,x,g){return typeof p=="function"?g(a,u,p,c===void 0?0:0|c,x===void 0?a.length-1:0|x):g(a,u,void 0,p===void 0?0:0|p,c===void 0?a.length-1:0|c)}d.exports={ge:function(a,u,p,c,x){return o(a,u,p,c,x,s)},gt:function(a,u,p,c,x){return o(a,u,p,c,x,t)},lt:function(a,u,p,c,x){return o(a,u,p,c,x,i)},le:function(a,u,p,c,x){return o(a,u,p,c,x,r)},eq:function(a,u,p,c,x){return o(a,u,p,c,x,n)}}},2288:function(d,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,o;return n=(r>65535)<<4,n|=o=((r>>>=n)>255)<<3,n|=o=((r>>>=o)>15)<<2,(n|=o=((r>>>=o)>3)<<1)|(r>>>=o)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var o=n,a=n,u=7;for(o>>>=1;o;o>>>=1)a<<=1,a|=1&o,--u;r[n]=a<<u&255}})(i),s.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,o){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},1928:function(d,s,t){(function(i,r){function n(O,H){if(!O)throw new Error(H||"Assertion failed")}function o(O,H){O.super_=H;var N=function(){};N.prototype=H.prototype,O.prototype=new N,O.prototype.constructor=O}function a(O,H,N){if(a.isBN(O))return O;this.negative=0,this.words=null,this.length=0,this.red=null,O!==null&&(H!=="le"&&H!=="be"||(N=H,H=10),this._init(O||0,H||10,N||"be"))}var u;typeof i=="object"?i.exports=a:r.BN=a,a.BN=a,a.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(6601).Buffer}catch{}function p(O,H){var N=O.charCodeAt(H);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function c(O,H,N){var B=p(O,N);return N-1>=H&&(B|=p(O,N-1)<<4),B}function x(O,H,N,B){for(var V=0,q=Math.min(O.length,N),te=H;te<q;te++){var K=O.charCodeAt(te)-48;V*=B,V+=K>=49?K-49+10:K>=17?K-17+10:K}return V}a.isBN=function(O){return O instanceof a||O!==null&&typeof O=="object"&&O.constructor.wordSize===a.wordSize&&Array.isArray(O.words)},a.max=function(O,H){return O.cmp(H)>0?O:H},a.min=function(O,H){return O.cmp(H)<0?O:H},a.prototype._init=function(O,H,N){if(typeof O=="number")return this._initNumber(O,H,N);if(typeof O=="object")return this._initArray(O,H,N);H==="hex"&&(H=16),n(H===(0|H)&&H>=2&&H<=36);var B=0;(O=O.toString().replace(/\s+/g,""))[0]==="-"&&(B++,this.negative=1),B<O.length&&(H===16?this._parseHex(O,B,N):(this._parseBase(O,H,B),N==="le"&&this._initArray(this.toArray(),H,N)))},a.prototype._initNumber=function(O,H,N){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[67108863&O],this.length=1):O<4503599627370496?(this.words=[67108863&O,O/67108864&67108863],this.length=2):(n(O<9007199254740992),this.words=[67108863&O,O/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),H,N)},a.prototype._initArray=function(O,H,N){if(n(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var V,q,te=0;if(N==="be")for(B=O.length-1,V=0;B>=0;B-=3)q=O[B]|O[B-1]<<8|O[B-2]<<16,this.words[V]|=q<<te&67108863,this.words[V+1]=q>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);else if(N==="le")for(B=0,V=0;B<O.length;B+=3)q=O[B]|O[B+1]<<8|O[B+2]<<16,this.words[V]|=q<<te&67108863,this.words[V+1]=q>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);return this.strip()},a.prototype._parseHex=function(O,H,N){this.length=Math.ceil((O.length-H)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var V,q=0,te=0;if(N==="be")for(B=O.length-1;B>=H;B-=2)V=c(O,H,B)<<q,this.words[te]|=67108863&V,q>=18?(q-=18,te+=1,this.words[te]|=V>>>26):q+=8;else for(B=(O.length-H)%2==0?H+1:H;B<O.length;B+=2)V=c(O,H,B)<<q,this.words[te]|=67108863&V,q>=18?(q-=18,te+=1,this.words[te]|=V>>>26):q+=8;this.strip()},a.prototype._parseBase=function(O,H,N){this.words=[0],this.length=1;for(var B=0,V=1;V<=67108863;V*=H)B++;B--,V=V/H|0;for(var q=O.length-N,te=q%B,K=Math.min(q,q-te)+N,J=0,Y=N;Y<K;Y+=B)J=x(O,Y,Y+B,H),this.imuln(V),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J);if(te!==0){var W=1;for(J=x(O,Y,O.length,H),Y=0;Y<te;Y++)W*=H;this.imuln(W),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J)}this.strip()},a.prototype.copy=function(O){O.words=new Array(this.length);for(var H=0;H<this.length;H++)O.words[H]=this.words[H];O.length=this.length,O.negative=this.negative,O.red=this.red},a.prototype.clone=function(){var O=new a(null);return this.copy(O),O},a.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function v(O,H,N){N.negative=H.negative^O.negative;var B=O.length+H.length|0;N.length=B,B=B-1|0;var V=0|O.words[0],q=0|H.words[0],te=V*q,K=67108863&te,J=te/67108864|0;N.words[0]=K;for(var Y=1;Y<B;Y++){for(var W=J>>>26,Q=67108863&J,ne=Math.min(Y,H.length-1),re=Math.max(0,Y-O.length+1);re<=ne;re++){var ae=Y-re|0;W+=(te=(V=0|O.words[ae])*(q=0|H.words[re])+Q)/67108864|0,Q=67108863&te}N.words[Y]=0|Q,J=0|W}return J!==0?N.words[Y]=0|J:N.length--,N.strip()}a.prototype.toString=function(O,H){var N;if(H=0|H||1,(O=O||10)===16||O==="hex"){N="";for(var B=0,V=0,q=0;q<this.length;q++){var te=this.words[q],K=(16777215&(te<<B|V)).toString(16);N=(V=te>>>24-B&16777215)!=0||q!==this.length-1?g[6-K.length]+K+N:K+N,(B+=2)>=26&&(B-=26,q--)}for(V!==0&&(N=V.toString(16)+N);N.length%H!=0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(O===(0|O)&&O>=2&&O<=36){var J=h[O],Y=y[O];N="";var W=this.clone();for(W.negative=0;!W.isZero();){var Q=W.modn(Y).toString(O);N=(W=W.idivn(Y)).isZero()?Q+N:g[J-Q.length]+Q+N}for(this.isZero()&&(N="0"+N);N.length%H!=0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=67108864*this.words[1]:this.length===3&&this.words[2]===1?O+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(O,H){return n(u!==void 0),this.toArrayLike(u,O,H)},a.prototype.toArray=function(O,H){return this.toArrayLike(Array,O,H)},a.prototype.toArrayLike=function(O,H,N){var B=this.byteLength(),V=N||Math.max(1,B);n(B<=V,"byte array longer than desired length"),n(V>0,"Requested array length <= 0"),this.strip();var q,te,K=H==="le",J=new O(V),Y=this.clone();if(K){for(te=0;!Y.isZero();te++)q=Y.andln(255),Y.iushrn(8),J[te]=q;for(;te<V;te++)J[te]=0}else{for(te=0;te<V-B;te++)J[te]=0;for(te=0;!Y.isZero();te++)q=Y.andln(255),Y.iushrn(8),J[V-te-1]=q}return J},Math.clz32?a.prototype._countBits=function(O){return 32-Math.clz32(O)}:a.prototype._countBits=function(O){var H=O,N=0;return H>=4096&&(N+=13,H>>>=13),H>=64&&(N+=7,H>>>=7),H>=8&&(N+=4,H>>>=4),H>=2&&(N+=2,H>>>=2),N+H},a.prototype._zeroBits=function(O){if(O===0)return 26;var H=O,N=0;return!(8191&H)&&(N+=13,H>>>=13),!(127&H)&&(N+=7,H>>>=7),!(15&H)&&(N+=4,H>>>=4),!(3&H)&&(N+=2,H>>>=2),!(1&H)&&N++,N},a.prototype.bitLength=function(){var O=this.words[this.length-1],H=this._countBits(O);return 26*(this.length-1)+H},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,H=0;H<this.length;H++){var N=this._zeroBits(this.words[H]);if(O+=N,N!==26)break}return O},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},a.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var H=0;H<O.length;H++)this.words[H]=this.words[H]|O.words[H];return this.strip()},a.prototype.ior=function(O){return n((this.negative|O.negative)==0),this.iuor(O)},a.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},a.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},a.prototype.iuand=function(O){var H;H=this.length>O.length?O:this;for(var N=0;N<H.length;N++)this.words[N]=this.words[N]&O.words[N];return this.length=H.length,this.strip()},a.prototype.iand=function(O){return n((this.negative|O.negative)==0),this.iuand(O)},a.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},a.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},a.prototype.iuxor=function(O){var H,N;this.length>O.length?(H=this,N=O):(H=O,N=this);for(var B=0;B<N.length;B++)this.words[B]=H.words[B]^N.words[B];if(this!==H)for(;B<H.length;B++)this.words[B]=H.words[B];return this.length=H.length,this.strip()},a.prototype.ixor=function(O){return n((this.negative|O.negative)==0),this.iuxor(O)},a.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},a.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},a.prototype.inotn=function(O){n(typeof O=="number"&&O>=0);var H=0|Math.ceil(O/26),N=O%26;this._expand(H),N>0&&H--;for(var B=0;B<H;B++)this.words[B]=67108863&~this.words[B];return N>0&&(this.words[B]=~this.words[B]&67108863>>26-N),this.strip()},a.prototype.notn=function(O){return this.clone().inotn(O)},a.prototype.setn=function(O,H){n(typeof O=="number"&&O>=0);var N=O/26|0,B=O%26;return this._expand(N+1),this.words[N]=H?this.words[N]|1<<B:this.words[N]&~(1<<B),this.strip()},a.prototype.iadd=function(O){var H,N,B;if(this.negative!==0&&O.negative===0)return this.negative=0,H=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,H=this.isub(O),O.negative=1,H._normSign();this.length>O.length?(N=this,B=O):(N=O,B=this);for(var V=0,q=0;q<B.length;q++)H=(0|N.words[q])+(0|B.words[q])+V,this.words[q]=67108863&H,V=H>>>26;for(;V!==0&&q<N.length;q++)H=(0|N.words[q])+V,this.words[q]=67108863&H,V=H>>>26;if(this.length=N.length,V!==0)this.words[this.length]=V,this.length++;else if(N!==this)for(;q<N.length;q++)this.words[q]=N.words[q];return this},a.prototype.add=function(O){var H;return O.negative!==0&&this.negative===0?(O.negative=0,H=this.sub(O),O.negative^=1,H):O.negative===0&&this.negative!==0?(this.negative=0,H=O.sub(this),this.negative=1,H):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},a.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var H=this.iadd(O);return O.negative=1,H._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var N,B,V=this.cmp(O);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;V>0?(N=this,B=O):(N=O,B=this);for(var q=0,te=0;te<B.length;te++)q=(H=(0|N.words[te])-(0|B.words[te])+q)>>26,this.words[te]=67108863&H;for(;q!==0&&te<N.length;te++)q=(H=(0|N.words[te])+q)>>26,this.words[te]=67108863&H;if(q===0&&te<N.length&&N!==this)for(;te<N.length;te++)this.words[te]=N.words[te];return this.length=Math.max(this.length,te),N!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(O){return this.clone().isub(O)};var m=function(O,H,N){var B,V,q,te=O.words,K=H.words,J=N.words,Y=0,W=0|te[0],Q=8191&W,ne=W>>>13,re=0|te[1],ae=8191&re,ue=re>>>13,pe=0|te[2],ge=8191&pe,_e=pe>>>13,me=0|te[3],ve=8191&me,Oe=me>>>13,Me=0|te[4],Te=8191&Me,se=Me>>>13,oe=0|te[5],he=8191&oe,Ee=oe>>>13,ke=0|te[6],be=8191&ke,Ie=ke>>>13,Fe=0|te[7],ce=8191&Fe,we=Fe>>>13,ye=0|te[8],Ce=8191&ye,Re=ye>>>13,ze=0|te[9],He=8191&ze,Ge=ze>>>13,Je=0|K[0],ot=8191&Je,Qe=Je>>>13,vt=0|K[1],xt=8191&vt,mt=vt>>>13,rt=0|K[2],it=8191&rt,Tt=rt>>>13,Mt=0|K[3],Pt=8191&Mt,kt=Mt>>>13,Ze=0|K[4],Xe=8191&Ze,Ve=Ze>>>13,We=0|K[5],at=8191&We,et=We>>>13,De=0|K[6],Be=8191&De,nt=De>>>13,tt=0|K[7],dt=8191&tt,ht=tt>>>13,gt=0|K[8],ut=8191&gt,wt=gt>>>13,ct=0|K[9],ft=8191&ct,bt=ct>>>13;N.negative=O.negative^H.negative,N.length=19;var It=(Y+(B=Math.imul(Q,ot))|0)+((8191&(V=(V=Math.imul(Q,Qe))+Math.imul(ne,ot)|0))<<13)|0;Y=((q=Math.imul(ne,Qe))+(V>>>13)|0)+(It>>>26)|0,It&=67108863,B=Math.imul(ae,ot),V=(V=Math.imul(ae,Qe))+Math.imul(ue,ot)|0,q=Math.imul(ue,Qe);var Dt=(Y+(B=B+Math.imul(Q,xt)|0)|0)+((8191&(V=(V=V+Math.imul(Q,mt)|0)+Math.imul(ne,xt)|0))<<13)|0;Y=((q=q+Math.imul(ne,mt)|0)+(V>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,B=Math.imul(ge,ot),V=(V=Math.imul(ge,Qe))+Math.imul(_e,ot)|0,q=Math.imul(_e,Qe),B=B+Math.imul(ae,xt)|0,V=(V=V+Math.imul(ae,mt)|0)+Math.imul(ue,xt)|0,q=q+Math.imul(ue,mt)|0;var Nt=(Y+(B=B+Math.imul(Q,it)|0)|0)+((8191&(V=(V=V+Math.imul(Q,Tt)|0)+Math.imul(ne,it)|0))<<13)|0;Y=((q=q+Math.imul(ne,Tt)|0)+(V>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,B=Math.imul(ve,ot),V=(V=Math.imul(ve,Qe))+Math.imul(Oe,ot)|0,q=Math.imul(Oe,Qe),B=B+Math.imul(ge,xt)|0,V=(V=V+Math.imul(ge,mt)|0)+Math.imul(_e,xt)|0,q=q+Math.imul(_e,mt)|0,B=B+Math.imul(ae,it)|0,V=(V=V+Math.imul(ae,Tt)|0)+Math.imul(ue,it)|0,q=q+Math.imul(ue,Tt)|0;var Qt=(Y+(B=B+Math.imul(Q,Pt)|0)|0)+((8191&(V=(V=V+Math.imul(Q,kt)|0)+Math.imul(ne,Pt)|0))<<13)|0;Y=((q=q+Math.imul(ne,kt)|0)+(V>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,B=Math.imul(Te,ot),V=(V=Math.imul(Te,Qe))+Math.imul(se,ot)|0,q=Math.imul(se,Qe),B=B+Math.imul(ve,xt)|0,V=(V=V+Math.imul(ve,mt)|0)+Math.imul(Oe,xt)|0,q=q+Math.imul(Oe,mt)|0,B=B+Math.imul(ge,it)|0,V=(V=V+Math.imul(ge,Tt)|0)+Math.imul(_e,it)|0,q=q+Math.imul(_e,Tt)|0,B=B+Math.imul(ae,Pt)|0,V=(V=V+Math.imul(ae,kt)|0)+Math.imul(ue,Pt)|0,q=q+Math.imul(ue,kt)|0;var jt=(Y+(B=B+Math.imul(Q,Xe)|0)|0)+((8191&(V=(V=V+Math.imul(Q,Ve)|0)+Math.imul(ne,Xe)|0))<<13)|0;Y=((q=q+Math.imul(ne,Ve)|0)+(V>>>13)|0)+(jt>>>26)|0,jt&=67108863,B=Math.imul(he,ot),V=(V=Math.imul(he,Qe))+Math.imul(Ee,ot)|0,q=Math.imul(Ee,Qe),B=B+Math.imul(Te,xt)|0,V=(V=V+Math.imul(Te,mt)|0)+Math.imul(se,xt)|0,q=q+Math.imul(se,mt)|0,B=B+Math.imul(ve,it)|0,V=(V=V+Math.imul(ve,Tt)|0)+Math.imul(Oe,it)|0,q=q+Math.imul(Oe,Tt)|0,B=B+Math.imul(ge,Pt)|0,V=(V=V+Math.imul(ge,kt)|0)+Math.imul(_e,Pt)|0,q=q+Math.imul(_e,kt)|0,B=B+Math.imul(ae,Xe)|0,V=(V=V+Math.imul(ae,Ve)|0)+Math.imul(ue,Xe)|0,q=q+Math.imul(ue,Ve)|0;var Ut=(Y+(B=B+Math.imul(Q,at)|0)|0)+((8191&(V=(V=V+Math.imul(Q,et)|0)+Math.imul(ne,at)|0))<<13)|0;Y=((q=q+Math.imul(ne,et)|0)+(V>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,B=Math.imul(be,ot),V=(V=Math.imul(be,Qe))+Math.imul(Ie,ot)|0,q=Math.imul(Ie,Qe),B=B+Math.imul(he,xt)|0,V=(V=V+Math.imul(he,mt)|0)+Math.imul(Ee,xt)|0,q=q+Math.imul(Ee,mt)|0,B=B+Math.imul(Te,it)|0,V=(V=V+Math.imul(Te,Tt)|0)+Math.imul(se,it)|0,q=q+Math.imul(se,Tt)|0,B=B+Math.imul(ve,Pt)|0,V=(V=V+Math.imul(ve,kt)|0)+Math.imul(Oe,Pt)|0,q=q+Math.imul(Oe,kt)|0,B=B+Math.imul(ge,Xe)|0,V=(V=V+Math.imul(ge,Ve)|0)+Math.imul(_e,Xe)|0,q=q+Math.imul(_e,Ve)|0,B=B+Math.imul(ae,at)|0,V=(V=V+Math.imul(ae,et)|0)+Math.imul(ue,at)|0,q=q+Math.imul(ue,et)|0;var Xt=(Y+(B=B+Math.imul(Q,Be)|0)|0)+((8191&(V=(V=V+Math.imul(Q,nt)|0)+Math.imul(ne,Be)|0))<<13)|0;Y=((q=q+Math.imul(ne,nt)|0)+(V>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,B=Math.imul(ce,ot),V=(V=Math.imul(ce,Qe))+Math.imul(we,ot)|0,q=Math.imul(we,Qe),B=B+Math.imul(be,xt)|0,V=(V=V+Math.imul(be,mt)|0)+Math.imul(Ie,xt)|0,q=q+Math.imul(Ie,mt)|0,B=B+Math.imul(he,it)|0,V=(V=V+Math.imul(he,Tt)|0)+Math.imul(Ee,it)|0,q=q+Math.imul(Ee,Tt)|0,B=B+Math.imul(Te,Pt)|0,V=(V=V+Math.imul(Te,kt)|0)+Math.imul(se,Pt)|0,q=q+Math.imul(se,kt)|0,B=B+Math.imul(ve,Xe)|0,V=(V=V+Math.imul(ve,Ve)|0)+Math.imul(Oe,Xe)|0,q=q+Math.imul(Oe,Ve)|0,B=B+Math.imul(ge,at)|0,V=(V=V+Math.imul(ge,et)|0)+Math.imul(_e,at)|0,q=q+Math.imul(_e,et)|0,B=B+Math.imul(ae,Be)|0,V=(V=V+Math.imul(ae,nt)|0)+Math.imul(ue,Be)|0,q=q+Math.imul(ue,nt)|0;var gn=(Y+(B=B+Math.imul(Q,dt)|0)|0)+((8191&(V=(V=V+Math.imul(Q,ht)|0)+Math.imul(ne,dt)|0))<<13)|0;Y=((q=q+Math.imul(ne,ht)|0)+(V>>>13)|0)+(gn>>>26)|0,gn&=67108863,B=Math.imul(Ce,ot),V=(V=Math.imul(Ce,Qe))+Math.imul(Re,ot)|0,q=Math.imul(Re,Qe),B=B+Math.imul(ce,xt)|0,V=(V=V+Math.imul(ce,mt)|0)+Math.imul(we,xt)|0,q=q+Math.imul(we,mt)|0,B=B+Math.imul(be,it)|0,V=(V=V+Math.imul(be,Tt)|0)+Math.imul(Ie,it)|0,q=q+Math.imul(Ie,Tt)|0,B=B+Math.imul(he,Pt)|0,V=(V=V+Math.imul(he,kt)|0)+Math.imul(Ee,Pt)|0,q=q+Math.imul(Ee,kt)|0,B=B+Math.imul(Te,Xe)|0,V=(V=V+Math.imul(Te,Ve)|0)+Math.imul(se,Xe)|0,q=q+Math.imul(se,Ve)|0,B=B+Math.imul(ve,at)|0,V=(V=V+Math.imul(ve,et)|0)+Math.imul(Oe,at)|0,q=q+Math.imul(Oe,et)|0,B=B+Math.imul(ge,Be)|0,V=(V=V+Math.imul(ge,nt)|0)+Math.imul(_e,Be)|0,q=q+Math.imul(_e,nt)|0,B=B+Math.imul(ae,dt)|0,V=(V=V+Math.imul(ae,ht)|0)+Math.imul(ue,dt)|0,q=q+Math.imul(ue,ht)|0;var Mn=(Y+(B=B+Math.imul(Q,ut)|0)|0)+((8191&(V=(V=V+Math.imul(Q,wt)|0)+Math.imul(ne,ut)|0))<<13)|0;Y=((q=q+Math.imul(ne,wt)|0)+(V>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,B=Math.imul(He,ot),V=(V=Math.imul(He,Qe))+Math.imul(Ge,ot)|0,q=Math.imul(Ge,Qe),B=B+Math.imul(Ce,xt)|0,V=(V=V+Math.imul(Ce,mt)|0)+Math.imul(Re,xt)|0,q=q+Math.imul(Re,mt)|0,B=B+Math.imul(ce,it)|0,V=(V=V+Math.imul(ce,Tt)|0)+Math.imul(we,it)|0,q=q+Math.imul(we,Tt)|0,B=B+Math.imul(be,Pt)|0,V=(V=V+Math.imul(be,kt)|0)+Math.imul(Ie,Pt)|0,q=q+Math.imul(Ie,kt)|0,B=B+Math.imul(he,Xe)|0,V=(V=V+Math.imul(he,Ve)|0)+Math.imul(Ee,Xe)|0,q=q+Math.imul(Ee,Ve)|0,B=B+Math.imul(Te,at)|0,V=(V=V+Math.imul(Te,et)|0)+Math.imul(se,at)|0,q=q+Math.imul(se,et)|0,B=B+Math.imul(ve,Be)|0,V=(V=V+Math.imul(ve,nt)|0)+Math.imul(Oe,Be)|0,q=q+Math.imul(Oe,nt)|0,B=B+Math.imul(ge,dt)|0,V=(V=V+Math.imul(ge,ht)|0)+Math.imul(_e,dt)|0,q=q+Math.imul(_e,ht)|0,B=B+Math.imul(ae,ut)|0,V=(V=V+Math.imul(ae,wt)|0)+Math.imul(ue,ut)|0,q=q+Math.imul(ue,wt)|0;var cn=(Y+(B=B+Math.imul(Q,ft)|0)|0)+((8191&(V=(V=V+Math.imul(Q,bt)|0)+Math.imul(ne,ft)|0))<<13)|0;Y=((q=q+Math.imul(ne,bt)|0)+(V>>>13)|0)+(cn>>>26)|0,cn&=67108863,B=Math.imul(He,xt),V=(V=Math.imul(He,mt))+Math.imul(Ge,xt)|0,q=Math.imul(Ge,mt),B=B+Math.imul(Ce,it)|0,V=(V=V+Math.imul(Ce,Tt)|0)+Math.imul(Re,it)|0,q=q+Math.imul(Re,Tt)|0,B=B+Math.imul(ce,Pt)|0,V=(V=V+Math.imul(ce,kt)|0)+Math.imul(we,Pt)|0,q=q+Math.imul(we,kt)|0,B=B+Math.imul(be,Xe)|0,V=(V=V+Math.imul(be,Ve)|0)+Math.imul(Ie,Xe)|0,q=q+Math.imul(Ie,Ve)|0,B=B+Math.imul(he,at)|0,V=(V=V+Math.imul(he,et)|0)+Math.imul(Ee,at)|0,q=q+Math.imul(Ee,et)|0,B=B+Math.imul(Te,Be)|0,V=(V=V+Math.imul(Te,nt)|0)+Math.imul(se,Be)|0,q=q+Math.imul(se,nt)|0,B=B+Math.imul(ve,dt)|0,V=(V=V+Math.imul(ve,ht)|0)+Math.imul(Oe,dt)|0,q=q+Math.imul(Oe,ht)|0,B=B+Math.imul(ge,ut)|0,V=(V=V+Math.imul(ge,wt)|0)+Math.imul(_e,ut)|0,q=q+Math.imul(_e,wt)|0;var qt=(Y+(B=B+Math.imul(ae,ft)|0)|0)+((8191&(V=(V=V+Math.imul(ae,bt)|0)+Math.imul(ue,ft)|0))<<13)|0;Y=((q=q+Math.imul(ue,bt)|0)+(V>>>13)|0)+(qt>>>26)|0,qt&=67108863,B=Math.imul(He,it),V=(V=Math.imul(He,Tt))+Math.imul(Ge,it)|0,q=Math.imul(Ge,Tt),B=B+Math.imul(Ce,Pt)|0,V=(V=V+Math.imul(Ce,kt)|0)+Math.imul(Re,Pt)|0,q=q+Math.imul(Re,kt)|0,B=B+Math.imul(ce,Xe)|0,V=(V=V+Math.imul(ce,Ve)|0)+Math.imul(we,Xe)|0,q=q+Math.imul(we,Ve)|0,B=B+Math.imul(be,at)|0,V=(V=V+Math.imul(be,et)|0)+Math.imul(Ie,at)|0,q=q+Math.imul(Ie,et)|0,B=B+Math.imul(he,Be)|0,V=(V=V+Math.imul(he,nt)|0)+Math.imul(Ee,Be)|0,q=q+Math.imul(Ee,nt)|0,B=B+Math.imul(Te,dt)|0,V=(V=V+Math.imul(Te,ht)|0)+Math.imul(se,dt)|0,q=q+Math.imul(se,ht)|0,B=B+Math.imul(ve,ut)|0,V=(V=V+Math.imul(ve,wt)|0)+Math.imul(Oe,ut)|0,q=q+Math.imul(Oe,wt)|0;var nn=(Y+(B=B+Math.imul(ge,ft)|0)|0)+((8191&(V=(V=V+Math.imul(ge,bt)|0)+Math.imul(_e,ft)|0))<<13)|0;Y=((q=q+Math.imul(_e,bt)|0)+(V>>>13)|0)+(nn>>>26)|0,nn&=67108863,B=Math.imul(He,Pt),V=(V=Math.imul(He,kt))+Math.imul(Ge,Pt)|0,q=Math.imul(Ge,kt),B=B+Math.imul(Ce,Xe)|0,V=(V=V+Math.imul(Ce,Ve)|0)+Math.imul(Re,Xe)|0,q=q+Math.imul(Re,Ve)|0,B=B+Math.imul(ce,at)|0,V=(V=V+Math.imul(ce,et)|0)+Math.imul(we,at)|0,q=q+Math.imul(we,et)|0,B=B+Math.imul(be,Be)|0,V=(V=V+Math.imul(be,nt)|0)+Math.imul(Ie,Be)|0,q=q+Math.imul(Ie,nt)|0,B=B+Math.imul(he,dt)|0,V=(V=V+Math.imul(he,ht)|0)+Math.imul(Ee,dt)|0,q=q+Math.imul(Ee,ht)|0,B=B+Math.imul(Te,ut)|0,V=(V=V+Math.imul(Te,wt)|0)+Math.imul(se,ut)|0,q=q+Math.imul(se,wt)|0;var Kt=(Y+(B=B+Math.imul(ve,ft)|0)|0)+((8191&(V=(V=V+Math.imul(ve,bt)|0)+Math.imul(Oe,ft)|0))<<13)|0;Y=((q=q+Math.imul(Oe,bt)|0)+(V>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,B=Math.imul(He,Xe),V=(V=Math.imul(He,Ve))+Math.imul(Ge,Xe)|0,q=Math.imul(Ge,Ve),B=B+Math.imul(Ce,at)|0,V=(V=V+Math.imul(Ce,et)|0)+Math.imul(Re,at)|0,q=q+Math.imul(Re,et)|0,B=B+Math.imul(ce,Be)|0,V=(V=V+Math.imul(ce,nt)|0)+Math.imul(we,Be)|0,q=q+Math.imul(we,nt)|0,B=B+Math.imul(be,dt)|0,V=(V=V+Math.imul(be,ht)|0)+Math.imul(Ie,dt)|0,q=q+Math.imul(Ie,ht)|0,B=B+Math.imul(he,ut)|0,V=(V=V+Math.imul(he,wt)|0)+Math.imul(Ee,ut)|0,q=q+Math.imul(Ee,wt)|0;var sn=(Y+(B=B+Math.imul(Te,ft)|0)|0)+((8191&(V=(V=V+Math.imul(Te,bt)|0)+Math.imul(se,ft)|0))<<13)|0;Y=((q=q+Math.imul(se,bt)|0)+(V>>>13)|0)+(sn>>>26)|0,sn&=67108863,B=Math.imul(He,at),V=(V=Math.imul(He,et))+Math.imul(Ge,at)|0,q=Math.imul(Ge,et),B=B+Math.imul(Ce,Be)|0,V=(V=V+Math.imul(Ce,nt)|0)+Math.imul(Re,Be)|0,q=q+Math.imul(Re,nt)|0,B=B+Math.imul(ce,dt)|0,V=(V=V+Math.imul(ce,ht)|0)+Math.imul(we,dt)|0,q=q+Math.imul(we,ht)|0,B=B+Math.imul(be,ut)|0,V=(V=V+Math.imul(be,wt)|0)+Math.imul(Ie,ut)|0,q=q+Math.imul(Ie,wt)|0;var hn=(Y+(B=B+Math.imul(he,ft)|0)|0)+((8191&(V=(V=V+Math.imul(he,bt)|0)+Math.imul(Ee,ft)|0))<<13)|0;Y=((q=q+Math.imul(Ee,bt)|0)+(V>>>13)|0)+(hn>>>26)|0,hn&=67108863,B=Math.imul(He,Be),V=(V=Math.imul(He,nt))+Math.imul(Ge,Be)|0,q=Math.imul(Ge,nt),B=B+Math.imul(Ce,dt)|0,V=(V=V+Math.imul(Ce,ht)|0)+Math.imul(Re,dt)|0,q=q+Math.imul(Re,ht)|0,B=B+Math.imul(ce,ut)|0,V=(V=V+Math.imul(ce,wt)|0)+Math.imul(we,ut)|0,q=q+Math.imul(we,wt)|0;var bn=(Y+(B=B+Math.imul(be,ft)|0)|0)+((8191&(V=(V=V+Math.imul(be,bt)|0)+Math.imul(Ie,ft)|0))<<13)|0;Y=((q=q+Math.imul(Ie,bt)|0)+(V>>>13)|0)+(bn>>>26)|0,bn&=67108863,B=Math.imul(He,dt),V=(V=Math.imul(He,ht))+Math.imul(Ge,dt)|0,q=Math.imul(Ge,ht),B=B+Math.imul(Ce,ut)|0,V=(V=V+Math.imul(Ce,wt)|0)+Math.imul(Re,ut)|0,q=q+Math.imul(Re,wt)|0;var yn=(Y+(B=B+Math.imul(ce,ft)|0)|0)+((8191&(V=(V=V+Math.imul(ce,bt)|0)+Math.imul(we,ft)|0))<<13)|0;Y=((q=q+Math.imul(we,bt)|0)+(V>>>13)|0)+(yn>>>26)|0,yn&=67108863,B=Math.imul(He,ut),V=(V=Math.imul(He,wt))+Math.imul(Ge,ut)|0,q=Math.imul(Ge,wt);var Sn=(Y+(B=B+Math.imul(Ce,ft)|0)|0)+((8191&(V=(V=V+Math.imul(Ce,bt)|0)+Math.imul(Re,ft)|0))<<13)|0;Y=((q=q+Math.imul(Re,bt)|0)+(V>>>13)|0)+(Sn>>>26)|0,Sn&=67108863;var pn=(Y+(B=Math.imul(He,ft))|0)+((8191&(V=(V=Math.imul(He,bt))+Math.imul(Ge,ft)|0))<<13)|0;return Y=((q=Math.imul(Ge,bt))+(V>>>13)|0)+(pn>>>26)|0,pn&=67108863,J[0]=It,J[1]=Dt,J[2]=Nt,J[3]=Qt,J[4]=jt,J[5]=Ut,J[6]=Xt,J[7]=gn,J[8]=Mn,J[9]=cn,J[10]=qt,J[11]=nn,J[12]=Kt,J[13]=sn,J[14]=hn,J[15]=bn,J[16]=yn,J[17]=Sn,J[18]=pn,Y!==0&&(J[19]=Y,N.length++),N};function _(O,H,N){return new f().mulp(O,H,N)}function f(O,H){this.x=O,this.y=H}Math.imul||(m=v),a.prototype.mulTo=function(O,H){var N,B=this.length+O.length;return N=this.length===10&&O.length===10?m(this,O,H):B<63?v(this,O,H):B<1024?function(V,q,te){te.negative=q.negative^V.negative,te.length=V.length+q.length;for(var K=0,J=0,Y=0;Y<te.length-1;Y++){var W=J;J=0;for(var Q=67108863&K,ne=Math.min(Y,q.length-1),re=Math.max(0,Y-V.length+1);re<=ne;re++){var ae=Y-re,ue=(0|V.words[ae])*(0|q.words[re]),pe=67108863&ue;Q=67108863&(pe=pe+Q|0),J+=(W=(W=W+(ue/67108864|0)|0)+(pe>>>26)|0)>>>26,W&=67108863}te.words[Y]=Q,K=W,W=J}return K!==0?te.words[Y]=K:te.length--,te.strip()}(this,O,H):_(this,O,H),N},f.prototype.makeRBT=function(O){for(var H=new Array(O),N=a.prototype._countBits(O)-1,B=0;B<O;B++)H[B]=this.revBin(B,N,O);return H},f.prototype.revBin=function(O,H,N){if(O===0||O===N-1)return O;for(var B=0,V=0;V<H;V++)B|=(1&O)<<H-V-1,O>>=1;return B},f.prototype.permute=function(O,H,N,B,V,q){for(var te=0;te<q;te++)B[te]=H[O[te]],V[te]=N[O[te]]},f.prototype.transform=function(O,H,N,B,V,q){this.permute(q,O,H,N,B,V);for(var te=1;te<V;te<<=1)for(var K=te<<1,J=Math.cos(2*Math.PI/K),Y=Math.sin(2*Math.PI/K),W=0;W<V;W+=K)for(var Q=J,ne=Y,re=0;re<te;re++){var ae=N[W+re],ue=B[W+re],pe=N[W+re+te],ge=B[W+re+te],_e=Q*pe-ne*ge;ge=Q*ge+ne*pe,pe=_e,N[W+re]=ae+pe,B[W+re]=ue+ge,N[W+re+te]=ae-pe,B[W+re+te]=ue-ge,re!==K&&(_e=J*Q-Y*ne,ne=J*ne+Y*Q,Q=_e)}},f.prototype.guessLen13b=function(O,H){var N=1|Math.max(H,O),B=1&N,V=0;for(N=N/2|0;N;N>>>=1)V++;return 1<<V+1+B},f.prototype.conjugate=function(O,H,N){if(!(N<=1))for(var B=0;B<N/2;B++){var V=O[B];O[B]=O[N-B-1],O[N-B-1]=V,V=H[B],H[B]=-H[N-B-1],H[N-B-1]=-V}},f.prototype.normalize13b=function(O,H){for(var N=0,B=0;B<H/2;B++){var V=8192*Math.round(O[2*B+1]/H)+Math.round(O[2*B]/H)+N;O[B]=67108863&V,N=V<67108864?0:V/67108864|0}return O},f.prototype.convert13b=function(O,H,N,B){for(var V=0,q=0;q<H;q++)V+=0|O[q],N[2*q]=8191&V,V>>>=13,N[2*q+1]=8191&V,V>>>=13;for(q=2*H;q<B;++q)N[q]=0;n(V===0),n((-8192&V)==0)},f.prototype.stub=function(O){for(var H=new Array(O),N=0;N<O;N++)H[N]=0;return H},f.prototype.mulp=function(O,H,N){var B=2*this.guessLen13b(O.length,H.length),V=this.makeRBT(B),q=this.stub(B),te=new Array(B),K=new Array(B),J=new Array(B),Y=new Array(B),W=new Array(B),Q=new Array(B),ne=N.words;ne.length=B,this.convert13b(O.words,O.length,te,B),this.convert13b(H.words,H.length,Y,B),this.transform(te,q,K,J,B,V),this.transform(Y,q,W,Q,B,V);for(var re=0;re<B;re++){var ae=K[re]*W[re]-J[re]*Q[re];J[re]=K[re]*Q[re]+J[re]*W[re],K[re]=ae}return this.conjugate(K,J,B),this.transform(K,J,ne,q,B,V),this.conjugate(ne,q,B),this.normalize13b(ne,B),N.negative=O.negative^H.negative,N.length=O.length+H.length,N.strip()},a.prototype.mul=function(O){var H=new a(null);return H.words=new Array(this.length+O.length),this.mulTo(O,H)},a.prototype.mulf=function(O){var H=new a(null);return H.words=new Array(this.length+O.length),_(this,O,H)},a.prototype.imul=function(O){return this.clone().mulTo(O,this)},a.prototype.imuln=function(O){n(typeof O=="number"),n(O<67108864);for(var H=0,N=0;N<this.length;N++){var B=(0|this.words[N])*O,V=(67108863&B)+(67108863&H);H>>=26,H+=B/67108864|0,H+=V>>>26,this.words[N]=67108863&V}return H!==0&&(this.words[N]=H,this.length++),this},a.prototype.muln=function(O){return this.clone().imuln(O)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(O){var H=function(q){for(var te=new Array(q.bitLength()),K=0;K<te.length;K++){var J=K/26|0,Y=K%26;te[K]=(q.words[J]&1<<Y)>>>Y}return te}(O);if(H.length===0)return new a(1);for(var N=this,B=0;B<H.length&&H[B]===0;B++,N=N.sqr());if(++B<H.length)for(var V=N.sqr();B<H.length;B++,V=V.sqr())H[B]!==0&&(N=N.mul(V));return N},a.prototype.iushln=function(O){n(typeof O=="number"&&O>=0);var H,N=O%26,B=(O-N)/26,V=67108863>>>26-N<<26-N;if(N!==0){var q=0;for(H=0;H<this.length;H++){var te=this.words[H]&V,K=(0|this.words[H])-te<<N;this.words[H]=K|q,q=te>>>26-N}q&&(this.words[H]=q,this.length++)}if(B!==0){for(H=this.length-1;H>=0;H--)this.words[H+B]=this.words[H];for(H=0;H<B;H++)this.words[H]=0;this.length+=B}return this.strip()},a.prototype.ishln=function(O){return n(this.negative===0),this.iushln(O)},a.prototype.iushrn=function(O,H,N){var B;n(typeof O=="number"&&O>=0),B=H?(H-H%26)/26:0;var V=O%26,q=Math.min((O-V)/26,this.length),te=67108863^67108863>>>V<<V,K=N;if(B-=q,B=Math.max(0,B),K){for(var J=0;J<q;J++)K.words[J]=this.words[J];K.length=q}if(q!==0)if(this.length>q)for(this.length-=q,J=0;J<this.length;J++)this.words[J]=this.words[J+q];else this.words[0]=0,this.length=1;var Y=0;for(J=this.length-1;J>=0&&(Y!==0||J>=B);J--){var W=0|this.words[J];this.words[J]=Y<<26-V|W>>>V,Y=W&te}return K&&Y!==0&&(K.words[K.length++]=Y),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(O,H,N){return n(this.negative===0),this.iushrn(O,H,N)},a.prototype.shln=function(O){return this.clone().ishln(O)},a.prototype.ushln=function(O){return this.clone().iushln(O)},a.prototype.shrn=function(O){return this.clone().ishrn(O)},a.prototype.ushrn=function(O){return this.clone().iushrn(O)},a.prototype.testn=function(O){n(typeof O=="number"&&O>=0);var H=O%26,N=(O-H)/26,B=1<<H;return!(this.length<=N||!(this.words[N]&B))},a.prototype.imaskn=function(O){n(typeof O=="number"&&O>=0);var H=O%26,N=(O-H)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(H!==0&&N++,this.length=Math.min(N,this.length),H!==0){var B=67108863^67108863>>>H<<H;this.words[this.length-1]&=B}return this.strip()},a.prototype.maskn=function(O){return this.clone().imaskn(O)},a.prototype.iaddn=function(O){return n(typeof O=="number"),n(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(0|this.words[0])<O?(this.words[0]=O-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},a.prototype._iaddn=function(O){this.words[0]+=O;for(var H=0;H<this.length&&this.words[H]>=67108864;H++)this.words[H]-=67108864,H===this.length-1?this.words[H+1]=1:this.words[H+1]++;return this.length=Math.max(this.length,H+1),this},a.prototype.isubn=function(O){if(n(typeof O=="number"),n(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var H=0;H<this.length&&this.words[H]<0;H++)this.words[H]+=67108864,this.words[H+1]-=1;return this.strip()},a.prototype.addn=function(O){return this.clone().iaddn(O)},a.prototype.subn=function(O){return this.clone().isubn(O)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(O,H,N){var B,V,q=O.length+N;this._expand(q);var te=0;for(B=0;B<O.length;B++){V=(0|this.words[B+N])+te;var K=(0|O.words[B])*H;te=((V-=67108863&K)>>26)-(K/67108864|0),this.words[B+N]=67108863&V}for(;B<this.length-N;B++)te=(V=(0|this.words[B+N])+te)>>26,this.words[B+N]=67108863&V;if(te===0)return this.strip();for(n(te===-1),te=0,B=0;B<this.length;B++)te=(V=-(0|this.words[B])+te)>>26,this.words[B]=67108863&V;return this.negative=1,this.strip()},a.prototype._wordDiv=function(O,H){var N=(this.length,O.length),B=this.clone(),V=O,q=0|V.words[V.length-1];(N=26-this._countBits(q))!=0&&(V=V.ushln(N),B.iushln(N),q=0|V.words[V.length-1]);var te,K=B.length-V.length;if(H!=="mod"){(te=new a(null)).length=K+1,te.words=new Array(te.length);for(var J=0;J<te.length;J++)te.words[J]=0}var Y=B.clone()._ishlnsubmul(V,1,K);Y.negative===0&&(B=Y,te&&(te.words[K]=1));for(var W=K-1;W>=0;W--){var Q=67108864*(0|B.words[V.length+W])+(0|B.words[V.length+W-1]);for(Q=Math.min(Q/q|0,67108863),B._ishlnsubmul(V,Q,W);B.negative!==0;)Q--,B.negative=0,B._ishlnsubmul(V,1,W),B.isZero()||(B.negative^=1);te&&(te.words[W]=Q)}return te&&te.strip(),B.strip(),H!=="div"&&N!==0&&B.iushrn(N),{div:te||null,mod:B}},a.prototype.divmod=function(O,H,N){return n(!O.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&O.negative===0?(q=this.neg().divmod(O,H),H!=="mod"&&(B=q.div.neg()),H!=="div"&&(V=q.mod.neg(),N&&V.negative!==0&&V.iadd(O)),{div:B,mod:V}):this.negative===0&&O.negative!==0?(q=this.divmod(O.neg(),H),H!=="mod"&&(B=q.div.neg()),{div:B,mod:q.mod}):this.negative&O.negative?(q=this.neg().divmod(O.neg(),H),H!=="div"&&(V=q.mod.neg(),N&&V.negative!==0&&V.isub(O)),{div:q.div,mod:V}):O.length>this.length||this.cmp(O)<0?{div:new a(0),mod:this}:O.length===1?H==="div"?{div:this.divn(O.words[0]),mod:null}:H==="mod"?{div:null,mod:new a(this.modn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new a(this.modn(O.words[0]))}:this._wordDiv(O,H);var B,V,q},a.prototype.div=function(O){return this.divmod(O,"div",!1).div},a.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},a.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},a.prototype.divRound=function(O){var H=this.divmod(O);if(H.mod.isZero())return H.div;var N=H.div.negative!==0?H.mod.isub(O):H.mod,B=O.ushrn(1),V=O.andln(1),q=N.cmp(B);return q<0||V===1&&q===0?H.div:H.div.negative!==0?H.div.isubn(1):H.div.iaddn(1)},a.prototype.modn=function(O){n(O<=67108863);for(var H=67108864%O,N=0,B=this.length-1;B>=0;B--)N=(H*N+(0|this.words[B]))%O;return N},a.prototype.idivn=function(O){n(O<=67108863);for(var H=0,N=this.length-1;N>=0;N--){var B=(0|this.words[N])+67108864*H;this.words[N]=B/O|0,H=B%O}return this.strip()},a.prototype.divn=function(O){return this.clone().idivn(O)},a.prototype.egcd=function(O){n(O.negative===0),n(!O.isZero());var H=this,N=O.clone();H=H.negative!==0?H.umod(O):H.clone();for(var B=new a(1),V=new a(0),q=new a(0),te=new a(1),K=0;H.isEven()&&N.isEven();)H.iushrn(1),N.iushrn(1),++K;for(var J=N.clone(),Y=H.clone();!H.isZero();){for(var W=0,Q=1;!(H.words[0]&Q)&&W<26;++W,Q<<=1);if(W>0)for(H.iushrn(W);W-- >0;)(B.isOdd()||V.isOdd())&&(B.iadd(J),V.isub(Y)),B.iushrn(1),V.iushrn(1);for(var ne=0,re=1;!(N.words[0]&re)&&ne<26;++ne,re<<=1);if(ne>0)for(N.iushrn(ne);ne-- >0;)(q.isOdd()||te.isOdd())&&(q.iadd(J),te.isub(Y)),q.iushrn(1),te.iushrn(1);H.cmp(N)>=0?(H.isub(N),B.isub(q),V.isub(te)):(N.isub(H),q.isub(B),te.isub(V))}return{a:q,b:te,gcd:N.iushln(K)}},a.prototype._invmp=function(O){n(O.negative===0),n(!O.isZero());var H=this,N=O.clone();H=H.negative!==0?H.umod(O):H.clone();for(var B,V=new a(1),q=new a(0),te=N.clone();H.cmpn(1)>0&&N.cmpn(1)>0;){for(var K=0,J=1;!(H.words[0]&J)&&K<26;++K,J<<=1);if(K>0)for(H.iushrn(K);K-- >0;)V.isOdd()&&V.iadd(te),V.iushrn(1);for(var Y=0,W=1;!(N.words[0]&W)&&Y<26;++Y,W<<=1);if(Y>0)for(N.iushrn(Y);Y-- >0;)q.isOdd()&&q.iadd(te),q.iushrn(1);H.cmp(N)>=0?(H.isub(N),V.isub(q)):(N.isub(H),q.isub(V))}return(B=H.cmpn(1)===0?V:q).cmpn(0)<0&&B.iadd(O),B},a.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var H=this.clone(),N=O.clone();H.negative=0,N.negative=0;for(var B=0;H.isEven()&&N.isEven();B++)H.iushrn(1),N.iushrn(1);for(;;){for(;H.isEven();)H.iushrn(1);for(;N.isEven();)N.iushrn(1);var V=H.cmp(N);if(V<0){var q=H;H=N,N=q}else if(V===0||N.cmpn(1)===0)break;H.isub(N)}return N.iushln(B)},a.prototype.invm=function(O){return this.egcd(O).a.umod(O)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(O){return this.words[0]&O},a.prototype.bincn=function(O){n(typeof O=="number");var H=O%26,N=(O-H)/26,B=1<<H;if(this.length<=N)return this._expand(N+1),this.words[N]|=B,this;for(var V=B,q=N;V!==0&&q<this.length;q++){var te=0|this.words[q];V=(te+=V)>>>26,te&=67108863,this.words[q]=te}return V!==0&&(this.words[q]=V,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(O){var H,N=O<0;if(this.negative!==0&&!N)return-1;if(this.negative===0&&N)return 1;if(this.strip(),this.length>1)H=1;else{N&&(O=-O),n(O<=67108863,"Number is too big");var B=0|this.words[0];H=B===O?0:B<O?-1:1}return this.negative!==0?0|-H:H},a.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var H=this.ucmp(O);return this.negative!==0?0|-H:H},a.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var H=0,N=this.length-1;N>=0;N--){var B=0|this.words[N],V=0|O.words[N];if(B!==V){B<V?H=-1:B>V&&(H=1);break}}return H},a.prototype.gtn=function(O){return this.cmpn(O)===1},a.prototype.gt=function(O){return this.cmp(O)===1},a.prototype.gten=function(O){return this.cmpn(O)>=0},a.prototype.gte=function(O){return this.cmp(O)>=0},a.prototype.ltn=function(O){return this.cmpn(O)===-1},a.prototype.lt=function(O){return this.cmp(O)===-1},a.prototype.lten=function(O){return this.cmpn(O)<=0},a.prototype.lte=function(O){return this.cmp(O)<=0},a.prototype.eqn=function(O){return this.cmpn(O)===0},a.prototype.eq=function(O){return this.cmp(O)===0},a.red=function(O){return new z(O)},a.prototype.toRed=function(O){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(O){return this.red=O,this},a.prototype.forceRed=function(O){return n(!this.red,"Already a number in reduction context"),this._forceRed(O)},a.prototype.redAdd=function(O){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},a.prototype.redIAdd=function(O){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},a.prototype.redSub=function(O){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},a.prototype.redISub=function(O){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},a.prototype.redShl=function(O){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},a.prototype.redMul=function(O){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},a.prototype.redIMul=function(O){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(O){return n(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var S={k256:null,p224:null,p192:null,p25519:null};function w(O,H){this.name=O,this.p=new a(H,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(O){if(typeof O=="string"){var H=a._prime(O);this.m=H.p,this.prime=H}else n(O.gtn(1),"modulus must be greater than 1"),this.m=O,this.prime=null}function G(O){z.call(this,O),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var O=new a(null);return O.words=new Array(Math.ceil(this.n/13)),O},w.prototype.ireduce=function(O){var H,N=O;do this.split(N,this.tmp),H=(N=(N=this.imulK(N)).iadd(this.tmp)).bitLength();while(H>this.n);var B=H<this.n?-1:N.ucmp(this.p);return B===0?(N.words[0]=0,N.length=1):B>0?N.isub(this.p):N.strip!==void 0?N.strip():N._strip(),N},w.prototype.split=function(O,H){O.iushrn(this.n,0,H)},w.prototype.imulK=function(O){return O.imul(this.k)},o(E,w),E.prototype.split=function(O,H){for(var N=4194303,B=Math.min(O.length,9),V=0;V<B;V++)H.words[V]=O.words[V];if(H.length=B,O.length<=9)return O.words[0]=0,void(O.length=1);var q=O.words[9];for(H.words[H.length++]=q&N,V=10;V<O.length;V++){var te=0|O.words[V];O.words[V-10]=(te&N)<<4|q>>>22,q=te}q>>>=22,O.words[V-10]=q,q===0&&O.length>10?O.length-=10:O.length-=9},E.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var H=0,N=0;N<O.length;N++){var B=0|O.words[N];H+=977*B,O.words[N]=67108863&H,H=64*B+(H/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O},o(L,w),o(C,w),o(P,w),P.prototype.imulK=function(O){for(var H=0,N=0;N<O.length;N++){var B=19*(0|O.words[N])+H,V=67108863&B;B>>>=26,O.words[N]=V,H=B}return H!==0&&(O.words[O.length++]=H),O},a._prime=function(O){if(S[O])return S[O];var H;if(O==="k256")H=new E;else if(O==="p224")H=new L;else if(O==="p192")H=new C;else{if(O!=="p25519")throw new Error("Unknown prime "+O);H=new P}return S[O]=H,H},z.prototype._verify1=function(O){n(O.negative===0,"red works only with positives"),n(O.red,"red works only with red numbers")},z.prototype._verify2=function(O,H){n((O.negative|H.negative)==0,"red works only with positives"),n(O.red&&O.red===H.red,"red works only with red numbers")},z.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):O.umod(this.m)._forceRed(this)},z.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},z.prototype.add=function(O,H){this._verify2(O,H);var N=O.add(H);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},z.prototype.iadd=function(O,H){this._verify2(O,H);var N=O.iadd(H);return N.cmp(this.m)>=0&&N.isub(this.m),N},z.prototype.sub=function(O,H){this._verify2(O,H);var N=O.sub(H);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},z.prototype.isub=function(O,H){this._verify2(O,H);var N=O.isub(H);return N.cmpn(0)<0&&N.iadd(this.m),N},z.prototype.shl=function(O,H){return this._verify1(O),this.imod(O.ushln(H))},z.prototype.imul=function(O,H){return this._verify2(O,H),this.imod(O.imul(H))},z.prototype.mul=function(O,H){return this._verify2(O,H),this.imod(O.mul(H))},z.prototype.isqr=function(O){return this.imul(O,O.clone())},z.prototype.sqr=function(O){return this.mul(O,O)},z.prototype.sqrt=function(O){if(O.isZero())return O.clone();var H=this.m.andln(3);if(n(H%2==1),H===3){var N=this.m.add(new a(1)).iushrn(2);return this.pow(O,N)}for(var B=this.m.subn(1),V=0;!B.isZero()&&B.andln(1)===0;)V++,B.iushrn(1);n(!B.isZero());var q=new a(1).toRed(this),te=q.redNeg(),K=this.m.subn(1).iushrn(1),J=this.m.bitLength();for(J=new a(2*J*J).toRed(this);this.pow(J,K).cmp(te)!==0;)J.redIAdd(te);for(var Y=this.pow(J,B),W=this.pow(O,B.addn(1).iushrn(1)),Q=this.pow(O,B),ne=V;Q.cmp(q)!==0;){for(var re=Q,ae=0;re.cmp(q)!==0;ae++)re=re.redSqr();n(ae<ne);var ue=this.pow(Y,new a(1).iushln(ne-ae-1));W=W.redMul(ue),Y=ue.redSqr(),Q=Q.redMul(Y),ne=ae}return W},z.prototype.invm=function(O){var H=O._invmp(this.m);return H.negative!==0?(H.negative=0,this.imod(H).redNeg()):this.imod(H)},z.prototype.pow=function(O,H){if(H.isZero())return new a(1).toRed(this);if(H.cmpn(1)===0)return O.clone();var N=new Array(16);N[0]=new a(1).toRed(this),N[1]=O;for(var B=2;B<N.length;B++)N[B]=this.mul(N[B-1],O);var V=N[0],q=0,te=0,K=H.bitLength()%26;for(K===0&&(K=26),B=H.length-1;B>=0;B--){for(var J=H.words[B],Y=K-1;Y>=0;Y--){var W=J>>Y&1;V!==N[0]&&(V=this.sqr(V)),W!==0||q!==0?(q<<=1,q|=W,(++te==4||B===0&&Y===0)&&(V=this.mul(V,N[q]),te=0,q=0)):te=0}K=26}return V},z.prototype.convertTo=function(O){var H=O.umod(this.m);return H===O?H.clone():H},z.prototype.convertFrom=function(O){var H=O.clone();return H.red=null,H},a.mont=function(O){return new G(O)},o(G,z),G.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},G.prototype.convertFrom=function(O){var H=this.imod(O.mul(this.rinv));return H.red=null,H},G.prototype.imul=function(O,H){if(O.isZero()||H.isZero())return O.words[0]=0,O.length=1,O;var N=O.imul(H),B=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=N.isub(B).iushrn(this.shift),q=V;return V.cmp(this.m)>=0?q=V.isub(this.m):V.cmpn(0)<0&&(q=V.iadd(this.m)),q._forceRed(this)},G.prototype.mul=function(O,H){if(O.isZero()||H.isZero())return new a(0)._forceRed(this);var N=O.mul(H),B=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=N.isub(B).iushrn(this.shift),q=V;return V.cmp(this.m)>=0?q=V.isub(this.m):V.cmpn(0)<0&&(q=V.iadd(this.m)),q._forceRed(this)},G.prototype.invm=function(O){return this.imod(O._invmp(this.m).mul(this.r2))._forceRed(this)}})(d=t.nmd(d),this)},2692:function(d){d.exports=function(s){var t,i,r,n=s.length,o=0;for(t=0;t<n;++t)o+=s[t].length;var a=new Array(o),u=0;for(t=0;t<n;++t){var p=s[t],c=p.length;for(i=0;i<c;++i){var x=a[u++]=new Array(c-1),g=0;for(r=0;r<c;++r)r!==i&&(x[g++]=p[r]);if(1&i){var h=x[1];x[1]=x[0],x[0]=h}}}return a}},2569:function(d,s,t){d.exports=function(x,g,h){switch(arguments.length){case 1:return i=[],p(y=x,y,c,!0),i;case 2:return typeof g=="function"?p(x,x,g,!0):function(v,m){return i=[],p(v,m,c,!1),i}(x,g);case 3:return p(x,g,h,!1);default:throw new Error("box-intersect: Invalid arguments")}var y};var i,r=t(5306),n=t(1390),o=t(2337);function a(x,g){for(var h=0;h<x;++h)if(!(g[h]<=g[h+x]))return!0;return!1}function u(x,g,h,y){for(var v=0,m=0,_=0,f=x.length;_<f;++_){var S=x[_];if(!a(g,S)){for(var w=0;w<2*g;++w)h[v++]=S[w];y[m++]=_}}return m}function p(x,g,h,y){var v=x.length,m=g.length;if(!(v<=0||m<=0)){var _=x[0].length>>>1;if(!(_<=0)){var f,S=r.mallocDouble(2*_*v),w=r.mallocInt32(v);if((v=u(x,_,S,w))>0){if(_===1&&y)n.init(v),f=n.sweepComplete(_,h,0,v,S,w,0,v,S,w);else{var E=r.mallocDouble(2*_*m),L=r.mallocInt32(m);(m=u(g,_,E,L))>0&&(n.init(v+m),f=_===1?n.sweepBipartite(_,h,0,v,S,w,0,m,E,L):o(_,h,y,v,S,w,m,E,L),r.free(E),r.free(L))}r.free(S),r.free(w)}return f}}}function c(x,g){i.push([x,g])}},7333:function(d,s){function t(i){return i?function(r,n,o,a,u,p,c,x,g,h,y){return u-a>g-x?function(v,m,_,f,S,w,E,L,C,P,z){for(var G=2*v,O=f,H=G*f;O<S;++O,H+=G){var N=w[m+H],B=w[m+H+v],V=E[O];e:for(var q=L,te=G*L;q<C;++q,te+=G){var K=P[m+te],J=P[m+te+v],Y=z[q];if(!(J<N||B<K)){for(var W=m+1;W<v;++W){var Q=w[W+H],ne=w[W+v+H],re=P[W+te],ae=P[W+v+te];if(ne<re||ae<Q)continue e}var ue=_(V,Y);if(ue!==void 0)return ue}}}}(r,n,o,a,u,p,c,x,g,h,y):function(v,m,_,f,S,w,E,L,C,P,z){for(var G=2*v,O=L,H=G*L;O<C;++O,H+=G){var N=P[m+H],B=P[m+H+v],V=z[O];e:for(var q=f,te=G*f;q<S;++q,te+=G){var K=w[m+te],J=w[m+te+v],Y=E[q];if(!(B<K||J<N)){for(var W=m+1;W<v;++W){var Q=w[W+te],ne=w[W+v+te],re=P[W+H],ae=P[W+v+H];if(ne<re||ae<Q)continue e}var ue=_(Y,V);if(ue!==void 0)return ue}}}}(r,n,o,a,u,p,c,x,g,h,y)}:function(r,n,o,a,u,p,c,x,g,h,y,v){return p-u>h-g?a?function(m,_,f,S,w,E,L,C,P,z,G){for(var O=2*m,H=S,N=O*S;H<w;++H,N+=O){var B=E[_+N],V=E[_+N+m],q=L[H];e:for(var te=C,K=O*C;te<P;++te,K+=O){var J=z[_+K],Y=G[te];if(!(J<=B||V<J)){for(var W=_+1;W<m;++W){var Q=E[W+N],ne=E[W+m+N],re=z[W+K],ae=z[W+m+K];if(ne<re||ae<Q)continue e}var ue=f(Y,q);if(ue!==void 0)return ue}}}}(r,n,o,u,p,c,x,g,h,y,v):function(m,_,f,S,w,E,L,C,P,z,G){for(var O=2*m,H=S,N=O*S;H<w;++H,N+=O){var B=E[_+N],V=E[_+N+m],q=L[H];e:for(var te=C,K=O*C;te<P;++te,K+=O){var J=z[_+K],Y=G[te];if(!(J<B||V<J)){for(var W=_+1;W<m;++W){var Q=E[W+N],ne=E[W+m+N],re=z[W+K],ae=z[W+m+K];if(ne<re||ae<Q)continue e}var ue=f(q,Y);if(ue!==void 0)return ue}}}}(r,n,o,u,p,c,x,g,h,y,v):a?function(m,_,f,S,w,E,L,C,P,z,G){for(var O=2*m,H=C,N=O*C;H<P;++H,N+=O){var B=z[_+N],V=G[H];e:for(var q=S,te=O*S;q<w;++q,te+=O){var K=E[_+te],J=E[_+te+m],Y=L[q];if(!(B<=K||J<B)){for(var W=_+1;W<m;++W){var Q=E[W+te],ne=E[W+m+te],re=z[W+N],ae=z[W+m+N];if(ne<re||ae<Q)continue e}var ue=f(V,Y);if(ue!==void 0)return ue}}}}(r,n,o,u,p,c,x,g,h,y,v):function(m,_,f,S,w,E,L,C,P,z,G){for(var O=2*m,H=C,N=O*C;H<P;++H,N+=O){var B=z[_+N],V=G[H];e:for(var q=S,te=O*S;q<w;++q,te+=O){var K=E[_+te],J=E[_+te+m],Y=L[q];if(!(B<K||J<B)){for(var W=_+1;W<m;++W){var Q=E[W+te],ne=E[W+m+te],re=z[W+N],ae=z[W+m+N];if(ne<re||ae<Q)continue e}var ue=f(Y,V);if(ue!==void 0)return ue}}}}(r,n,o,u,p,c,x,g,h,y,v)}}s.partial=t(!1),s.full=t(!0)},2337:function(d,s,t){d.exports=function(O,H,N,B,V,q,te,K,J){(function(Re,ze){var He=8*r.log2(ze+1)*(Re+1)|0,Ge=r.nextPow2(w*He);L.length<Ge&&(i.free(L),L=i.mallocInt32(Ge));var Je=r.nextPow2(E*He);C.length<Je&&(i.free(C),C=i.mallocDouble(Je))})(O,B+te);var Y,W=0,Q=2*O;for(P(W++,0,0,B,0,te,N?16:0,-1/0,1/0),N||P(W++,0,0,te,0,B,1,-1/0,1/0);W>0;){var ne=(W-=1)*w,re=L[ne],ae=L[ne+1],ue=L[ne+2],pe=L[ne+3],ge=L[ne+4],_e=L[ne+5],me=W*E,ve=C[me],Oe=C[me+1],Me=1&_e,Te=!!(16&_e),se=V,oe=q,he=K,Ee=J;if(Me&&(se=K,oe=J,he=V,Ee=q),!(2&_e&&ae>=(ue=m(O,re,ae,ue,se,oe,Oe))||4&_e&&(ae=_(O,re,ae,ue,se,oe,ve))>=ue)){var ke=ue-ae,be=ge-pe;if(Te){if(O*ke*(ke+be)<h){if((Y=u.scanComplete(O,re,H,ae,ue,se,oe,pe,ge,he,Ee))!==void 0)return Y;continue}}else{if(O*Math.min(ke,be)<x){if((Y=o(O,re,H,Me,ae,ue,se,oe,pe,ge,he,Ee))!==void 0)return Y;continue}if(O*ke*be<g){if((Y=u.scanBipartite(O,re,H,Me,ae,ue,se,oe,pe,ge,he,Ee))!==void 0)return Y;continue}}var Ie=y(O,re,ae,ue,se,oe,ve,Oe);if(ae<Ie)if(O*(Ie-ae)<x){if((Y=a(O,re+1,H,ae,Ie,se,oe,pe,ge,he,Ee))!==void 0)return Y}else if(re===O-2){if((Y=Me?u.sweepBipartite(O,H,pe,ge,he,Ee,ae,Ie,se,oe):u.sweepBipartite(O,H,ae,Ie,se,oe,pe,ge,he,Ee))!==void 0)return Y}else P(W++,re+1,ae,Ie,pe,ge,Me,-1/0,1/0),P(W++,re+1,pe,ge,ae,Ie,1^Me,-1/0,1/0);if(Ie<ue){var Fe=p(O,re,pe,ge,he,Ee),ce=he[Q*Fe+re],we=v(O,re,Fe,ge,he,Ee,ce);if(we<ge&&P(W++,re,Ie,ue,we,ge,(4|Me)+(Te?16:0),ce,Oe),pe<Fe&&P(W++,re,Ie,ue,pe,Fe,(2|Me)+(Te?16:0),ve,ce),Fe+1===we){if((Y=Te?G(O,re,H,Ie,ue,se,oe,Fe,he,Ee[Fe]):z(O,re,H,Me,Ie,ue,se,oe,Fe,he,Ee[Fe]))!==void 0)return Y}else if(Fe<we){var ye;if(Te){if(Ie<(ye=f(O,re,Ie,ue,se,oe,ce))){var Ce=v(O,re,Ie,ye,se,oe,ce);if(re===O-2){if(Ie<Ce&&(Y=u.sweepComplete(O,H,Ie,Ce,se,oe,Fe,we,he,Ee))!==void 0||Ce<ye&&(Y=u.sweepBipartite(O,H,Ce,ye,se,oe,Fe,we,he,Ee))!==void 0)return Y}else Ie<Ce&&P(W++,re+1,Ie,Ce,Fe,we,16,-1/0,1/0),Ce<ye&&(P(W++,re+1,Ce,ye,Fe,we,0,-1/0,1/0),P(W++,re+1,Fe,we,Ce,ye,1,-1/0,1/0))}}else Ie<(ye=Me?S(O,re,Ie,ue,se,oe,ce):f(O,re,Ie,ue,se,oe,ce))&&(re===O-2?Y=Me?u.sweepBipartite(O,H,Fe,we,he,Ee,Ie,ye,se,oe):u.sweepBipartite(O,H,Ie,ye,se,oe,Fe,we,he,Ee):(P(W++,re+1,Ie,ye,Fe,we,Me,-1/0,1/0),P(W++,re+1,Fe,we,Ie,ye,1^Me,-1/0,1/0)))}}}}};var i=t(5306),r=t(2288),n=t(7333),o=n.partial,a=n.full,u=t(1390),p=t(2464),c=t(122),x=128,g=1<<22,h=1<<22,y=c("!(lo>=p0)&&!(p1>=hi)"),v=c("lo===p0"),m=c("lo<p0"),_=c("hi<=p0"),f=c("lo<=p0&&p0<=hi"),S=c("lo<p0&&p0<=hi"),w=6,E=2,L=i.mallocInt32(1024),C=i.mallocDouble(1024);function P(O,H,N,B,V,q,te,K,J){var Y=w*O;L[Y]=H,L[Y+1]=N,L[Y+2]=B,L[Y+3]=V,L[Y+4]=q,L[Y+5]=te;var W=E*O;C[W]=K,C[W+1]=J}function z(O,H,N,B,V,q,te,K,J,Y,W){var Q=2*O,ne=J*Q,re=Y[ne+H];e:for(var ae=V,ue=V*Q;ae<q;++ae,ue+=Q){var pe=te[ue+H],ge=te[ue+H+O];if(!(re<pe||ge<re||B&&re===pe)){for(var _e,me=K[ae],ve=H+1;ve<O;++ve){pe=te[ue+ve],ge=te[ue+ve+O];var Oe=Y[ne+ve],Me=Y[ne+ve+O];if(ge<Oe||Me<pe)continue e}if((_e=B?N(W,me):N(me,W))!==void 0)return _e}}}function G(O,H,N,B,V,q,te,K,J,Y){var W=2*O,Q=K*W,ne=J[Q+H];e:for(var re=B,ae=B*W;re<V;++re,ae+=W){var ue=te[re];if(ue!==Y){var pe=q[ae+H],ge=q[ae+H+O];if(!(ne<pe||ge<ne)){for(var _e=H+1;_e<O;++_e){pe=q[ae+_e],ge=q[ae+_e+O];var me=J[Q+_e],ve=J[Q+_e+O];if(ge<me||ve<pe)continue e}var Oe=N(ue,Y);if(Oe!==void 0)return Oe}}}}},2464:function(d,s,t){d.exports=function(o,a,u,p,c,x){if(p<=u+1)return u;for(var g=u,h=p,y=p+u>>>1,v=2*o,m=y,_=c[v*y+a];g<h;){if(h-g<r){n(o,a,g,h,c,x),_=c[v*y+a];break}var f=h-g,S=Math.random()*f+g|0,w=c[v*S+a],E=Math.random()*f+g|0,L=c[v*E+a],C=Math.random()*f+g|0,P=c[v*C+a];w<=L?P>=L?(m=E,_=L):w>=P?(m=S,_=w):(m=C,_=P):L>=P?(m=E,_=L):P>=w?(m=S,_=w):(m=C,_=P);for(var z=v*(h-1),G=v*m,O=0;O<v;++O,++z,++G){var H=c[z];c[z]=c[G],c[G]=H}var N=x[h-1];for(x[h-1]=x[m],x[m]=N,z=v*(h-1),G=v*(m=i(o,a,g,h-1,c,x,_)),O=0;O<v;++O,++z,++G)H=c[z],c[z]=c[G],c[G]=H;if(N=x[h-1],x[h-1]=x[m],x[m]=N,y<m){for(h=m-1;g<h&&c[v*(h-1)+a]===_;)h-=1;h+=1}else{if(!(m<y))break;for(g=m+1;g<h&&c[v*g+a]===_;)g+=1}}return i(o,a,u,y,c,x,c[v*y+a])};var i=t(122)("lo<p0"),r=8;function n(o,a,u,p,c,x){for(var g=2*o,h=g*(u+1)+a,y=u+1;y<p;++y,h+=g)for(var v=c[h],m=y,_=g*(y-1);m>u&&c[_+a]>v;--m,_-=g){for(var f=_,S=_+g,w=0;w<g;++w,++f,++S){var E=c[f];c[f]=c[S],c[S]=E}var L=x[m];x[m]=x[m-1],x[m-1]=L}}},122:function(d){d.exports=function(t){return s[t]};var s={"lo===p0":function(t,i,r,n,o,a,u){for(var p=2*t,c=p*r,x=c,g=r,h=i,y=r;n>y;++y,c+=p)if(o[c+h]===u)if(g===y)g+=1,x+=p;else{for(var v=0;p>v;++v){var m=o[c+v];o[c+v]=o[x],o[x++]=m}var _=a[y];a[y]=a[g],a[g++]=_}return g},"lo<p0":function(t,i,r,n,o,a,u){for(var p=2*t,c=p*r,x=c,g=r,h=i,y=r;n>y;++y,c+=p)if(o[c+h]<u)if(g===y)g+=1,x+=p;else{for(var v=0;p>v;++v){var m=o[c+v];o[c+v]=o[x],o[x++]=m}var _=a[y];a[y]=a[g],a[g++]=_}return g},"lo<=p0":function(t,i,r,n,o,a,u){for(var p=2*t,c=p*r,x=c,g=r,h=t+i,y=r;n>y;++y,c+=p)if(o[c+h]<=u)if(g===y)g+=1,x+=p;else{for(var v=0;p>v;++v){var m=o[c+v];o[c+v]=o[x],o[x++]=m}var _=a[y];a[y]=a[g],a[g++]=_}return g},"hi<=p0":function(t,i,r,n,o,a,u){for(var p=2*t,c=p*r,x=c,g=r,h=t+i,y=r;n>y;++y,c+=p)if(o[c+h]<=u)if(g===y)g+=1,x+=p;else{for(var v=0;p>v;++v){var m=o[c+v];o[c+v]=o[x],o[x++]=m}var _=a[y];a[y]=a[g],a[g++]=_}return g},"lo<p0&&p0<=hi":function(t,i,r,n,o,a,u){for(var p=2*t,c=p*r,x=c,g=r,h=i,y=t+i,v=r;n>v;++v,c+=p){var m=o[c+h],_=o[c+y];if(m<u&&u<=_)if(g===v)g+=1,x+=p;else{for(var f=0;p>f;++f){var S=o[c+f];o[c+f]=o[x],o[x++]=S}var w=a[v];a[v]=a[g],a[g++]=w}}return g},"lo<=p0&&p0<=hi":function(t,i,r,n,o,a,u){for(var p=2*t,c=p*r,x=c,g=r,h=i,y=t+i,v=r;n>v;++v,c+=p){var m=o[c+h],_=o[c+y];if(m<=u&&u<=_)if(g===v)g+=1,x+=p;else{for(var f=0;p>f;++f){var S=o[c+f];o[c+f]=o[x],o[x++]=S}var w=a[v];a[v]=a[g],a[g++]=w}}return g},"!(lo>=p0)&&!(p1>=hi)":function(t,i,r,n,o,a,u,p){for(var c=2*t,x=c*r,g=x,h=r,y=i,v=t+i,m=r;n>m;++m,x+=c){var _=o[x+y],f=o[x+v];if(!(_>=u||p>=f))if(h===m)h+=1,g+=c;else{for(var S=0;c>S;++S){var w=o[x+S];o[x+S]=o[g],o[g++]=w}var E=a[m];a[m]=a[h],a[h++]=E}}return h}}},309:function(d){d.exports=function(c,x){x<=4*s?t(0,x-1,c):p(0,x-1,c)};var s=32;function t(c,x,g){for(var h=2*(c+1),y=c+1;y<=x;++y){for(var v=g[h++],m=g[h++],_=y,f=h-2;_-- >c;){var S=g[f-2],w=g[f-1];if(S<v||S===v&&w<m)break;g[f]=S,g[f+1]=w,f-=2}g[f]=v,g[f+1]=m}}function i(c,x,g){x*=2;var h=g[c*=2],y=g[c+1];g[c]=g[x],g[c+1]=g[x+1],g[x]=h,g[x+1]=y}function r(c,x,g){x*=2,g[c*=2]=g[x],g[c+1]=g[x+1]}function n(c,x,g,h){x*=2,g*=2;var y=h[c*=2],v=h[c+1];h[c]=h[x],h[c+1]=h[x+1],h[x]=h[g],h[x+1]=h[g+1],h[g]=y,h[g+1]=v}function o(c,x,g,h,y){x*=2,y[c*=2]=y[x],y[x]=g,y[c+1]=y[x+1],y[x+1]=h}function a(c,x,g){x*=2;var h=g[c*=2],y=g[x];return!(h<y)&&(h!==y||g[c+1]>g[x+1])}function u(c,x,g,h){var y=h[c*=2];return y<x||y===x&&h[c+1]<g}function p(c,x,g){var h=(x-c+1)/6|0,y=c+h,v=x-h,m=c+x>>1,_=m-h,f=m+h,S=y,w=_,E=m,L=f,C=v,P=c+1,z=x-1,G=0;a(S,w,g)&&(G=S,S=w,w=G),a(L,C,g)&&(G=L,L=C,C=G),a(S,E,g)&&(G=S,S=E,E=G),a(w,E,g)&&(G=w,w=E,E=G),a(S,L,g)&&(G=S,S=L,L=G),a(E,L,g)&&(G=E,E=L,L=G),a(w,C,g)&&(G=w,w=C,C=G),a(w,E,g)&&(G=w,w=E,E=G),a(L,C,g)&&(G=L,L=C,C=G);for(var O=g[2*w],H=g[2*w+1],N=g[2*L],B=g[2*L+1],V=2*S,q=2*E,te=2*C,K=2*y,J=2*m,Y=2*v,W=0;W<2;++W){var Q=g[V+W],ne=g[q+W],re=g[te+W];g[K+W]=Q,g[J+W]=ne,g[Y+W]=re}r(_,c,g),r(f,x,g);for(var ae=P;ae<=z;++ae)if(u(ae,O,H,g))ae!==P&&i(ae,P,g),++P;else if(!u(ae,N,B,g))for(;;){if(u(z,N,B,g)){u(z,O,H,g)?(n(ae,P,z,g),++P,--z):(i(ae,z,g),--z);break}if(--z<ae)break}o(c,P-1,O,H,g),o(x,z+1,N,B,g),P-2-c<=s?t(c,P-2,g):p(c,P-2,g),x-(z+2)<=s?t(z+2,x,g):p(z+2,x,g),z-P<=s?t(P,z,g):p(P,z,g)}},1390:function(d,s,t){d.exports={init:function(_){var f=r.nextPow2(_);u.length<f&&(i.free(u),u=i.mallocInt32(f)),p.length<f&&(i.free(p),p=i.mallocInt32(f)),c.length<f&&(i.free(c),c=i.mallocInt32(f)),x.length<f&&(i.free(x),x=i.mallocInt32(f)),g.length<f&&(i.free(g),g=i.mallocInt32(f)),h.length<f&&(i.free(h),h=i.mallocInt32(f));var S=8*f;y.length<S&&(i.free(y),y=i.mallocDouble(S))},sweepBipartite:function(_,f,S,w,E,L,C,P,z,G){for(var O=0,H=2*_,N=_-1,B=H-1,V=S;V<w;++V){var q=L[V],te=H*V;y[O++]=E[te+N],y[O++]=-(q+1),y[O++]=E[te+B],y[O++]=q}for(V=C;V<P;++V){q=G[V]+o;var K=H*V;y[O++]=z[K+N],y[O++]=-q,y[O++]=z[K+B],y[O++]=q}var J=O>>>1;n(y,J);var Y=0,W=0;for(V=0;V<J;++V){var Q=0|y[2*V+1];if(Q>=o)v(c,x,W--,Q=Q-o|0);else if(Q>=0)v(u,p,Y--,Q);else if(Q<=-o){Q=-Q-o|0;for(var ne=0;ne<Y;++ne)if((re=f(u[ne],Q))!==void 0)return re;m(c,x,W++,Q)}else{for(Q=-Q-1|0,ne=0;ne<W;++ne){var re;if((re=f(Q,c[ne]))!==void 0)return re}m(u,p,Y++,Q)}}},sweepComplete:function(_,f,S,w,E,L,C,P,z,G){for(var O=0,H=2*_,N=_-1,B=H-1,V=S;V<w;++V){var q=L[V]+1<<1,te=H*V;y[O++]=E[te+N],y[O++]=-q,y[O++]=E[te+B],y[O++]=q}for(V=C;V<P;++V){q=G[V]+1<<1;var K=H*V;y[O++]=z[K+N],y[O++]=1|-q,y[O++]=z[K+B],y[O++]=1|q}var J=O>>>1;n(y,J);var Y=0,W=0,Q=0;for(V=0;V<J;++V){var ne=0|y[2*V+1],re=1&ne;if(V<J-1&&ne>>1==y[2*V+3]>>1&&(re=2,V+=1),ne<0){for(var ae=-(ne>>1)-1,ue=0;ue<Q;++ue)if((pe=f(g[ue],ae))!==void 0)return pe;if(re!==0){for(ue=0;ue<Y;++ue)if((pe=f(u[ue],ae))!==void 0)return pe}if(re!==1)for(ue=0;ue<W;++ue){var pe;if((pe=f(c[ue],ae))!==void 0)return pe}re===0?m(u,p,Y++,ae):re===1?m(c,x,W++,ae):re===2&&m(g,h,Q++,ae)}else ae=(ne>>1)-1,re===0?v(u,p,Y--,ae):re===1?v(c,x,W--,ae):re===2&&v(g,h,Q--,ae)}},scanBipartite:function(_,f,S,w,E,L,C,P,z,G,O,H){var N=0,B=2*_,V=f,q=f+_,te=1,K=1;w?K=o:te=o;for(var J=E;J<L;++J){var Y=J+te,W=B*J;y[N++]=C[W+V],y[N++]=-Y,y[N++]=C[W+q],y[N++]=Y}for(J=z;J<G;++J){Y=J+K;var Q=B*J;y[N++]=O[Q+V],y[N++]=-Y}var ne=N>>>1;n(y,ne);var re=0;for(J=0;J<ne;++J){var ae=0|y[2*J+1];if(ae<0){var ue=!1;if((Y=-ae)>=o?(ue=!w,Y-=o):(ue=!!w,Y-=1),ue)m(u,p,re++,Y);else{var pe=H[Y],ge=B*Y,_e=O[ge+f+1],me=O[ge+f+1+_];e:for(var ve=0;ve<re;++ve){var Oe=u[ve],Me=B*Oe;if(!(me<C[Me+f+1]||C[Me+f+1+_]<_e)){for(var Te=f+2;Te<_;++Te)if(O[ge+Te+_]<C[Me+Te]||C[Me+Te+_]<O[ge+Te])continue e;var se,oe=P[Oe];if((se=w?S(pe,oe):S(oe,pe))!==void 0)return se}}}}else v(u,p,re--,ae-te)}},scanComplete:function(_,f,S,w,E,L,C,P,z,G,O){for(var H=0,N=2*_,B=f,V=f+_,q=w;q<E;++q){var te=q+o,K=N*q;y[H++]=L[K+B],y[H++]=-te,y[H++]=L[K+V],y[H++]=te}for(q=P;q<z;++q){te=q+1;var J=N*q;y[H++]=G[J+B],y[H++]=-te}var Y=H>>>1;n(y,Y);var W=0;for(q=0;q<Y;++q){var Q=0|y[2*q+1];if(Q<0)if((te=-Q)>=o)u[W++]=te-o;else{var ne=O[te-=1],re=N*te,ae=G[re+f+1],ue=G[re+f+1+_];e:for(var pe=0;pe<W;++pe){var ge=u[pe],_e=C[ge];if(_e===ne)break;var me=N*ge;if(!(ue<L[me+f+1]||L[me+f+1+_]<ae)){for(var ve=f+2;ve<_;++ve)if(G[re+ve+_]<L[me+ve]||L[me+ve+_]<G[re+ve])continue e;var Oe=S(_e,ne);if(Oe!==void 0)return Oe}}}else{for(te=Q-o,pe=W-1;pe>=0;--pe)if(u[pe]===te){for(ve=pe+1;ve<W;++ve)u[ve-1]=u[ve];break}--W}}}};var i=t(5306),r=t(2288),n=t(309),o=1<<28,a=1024,u=i.mallocInt32(a),p=i.mallocInt32(a),c=i.mallocInt32(a),x=i.mallocInt32(a),g=i.mallocInt32(a),h=i.mallocInt32(a),y=i.mallocDouble(8192);function v(_,f,S,w){var E=f[w],L=_[S-1];_[E]=L,f[L]=E}function m(_,f,S,w){_[S]=w,f[w]=S}},7761:function(d,s,t){var i=t(9971),r=t(743),n=t(2161),o=t(7098);function a(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,x){return c[0]-x[0]||c[1]-x[1]}function p(c,x,g){return x in c?c[x]:g}d.exports=function(c,x,g){Array.isArray(x)?(g=g||{},x=x||[]):(g=x||{},x=[]);var h=!!p(g,"delaunay",!0),y=!!p(g,"interior",!0),v=!!p(g,"exterior",!0),m=!!p(g,"infinity",!1);if(!y&&!v||c.length===0)return[];var _=i(c,x);if(h||y!==v||m){for(var f=r(c.length,function(E){return E.map(a).sort(u)}(x)),S=0;S<_.length;++S){var w=_[S];f.addTriangle(w[0],w[1],w[2])}return h&&n(c,f),v?y?m?o(f,0,m):f.cells():o(f,1,m):o(f,-1)}return _}},2161:function(d,s,t){var i=t(2227)[4];function r(n,o,a,u,p,c){var x=o.opposite(u,p);if(!(x<0)){if(p<u){var g=u;u=p,p=g,g=c,c=x,x=g}o.isConstraint(u,p)||i(n[u],n[p],n[c],n[x])<0&&a.push(u,p)}}t(5070),d.exports=function(n,o){for(var a=[],u=n.length,p=o.stars,c=0;c<u;++c)for(var x=p[c],g=1;g<x.length;g+=2)if(!((m=x[g])<c||o.isConstraint(c,m))){for(var h=x[g-1],y=-1,v=1;v<x.length;v+=2)if(x[v-1]===m){y=x[v];break}y<0||i(n[c],n[m],n[h],n[y])<0&&a.push(c,m)}for(;a.length>0;){for(var m=a.pop(),_=(h=-1,y=-1,x=p[c=a.pop()],1);_<x.length;_+=2){var f=x[_-1],S=x[_];f===m?y=S:S===m&&(h=f)}h<0||y<0||i(n[c],n[m],n[h],n[y])>=0||(o.flip(c,m),r(n,o,a,h,c,y),r(n,o,a,c,y,h),r(n,o,a,y,m,h),r(n,o,a,m,h,y))}}},7098:function(d,s,t){var i,r=t(5070);function n(a,u,p,c,x,g,h){this.cells=a,this.neighbor=u,this.flags=c,this.constraint=p,this.active=x,this.next=g,this.boundary=h}function o(a,u){return a[0]-u[0]||a[1]-u[1]||a[2]-u[2]}d.exports=function(a,u,p){var c=function(C,P){for(var z=C.cells(),G=z.length,O=0;O<G;++O){var H=(Q=z[O])[0],N=Q[1],B=Q[2];N<B?N<H&&(Q[0]=N,Q[1]=B,Q[2]=H):B<H&&(Q[0]=B,Q[1]=H,Q[2]=N)}z.sort(o);var V=new Array(G);for(O=0;O<V.length;++O)V[O]=0;var q=[],te=[],K=new Array(3*G),J=new Array(3*G),Y=null;P&&(Y=[]);var W=new n(z,K,J,V,q,te,Y);for(O=0;O<G;++O)for(var Q=z[O],ne=0;ne<3;++ne){H=Q[ne],N=Q[(ne+1)%3];var re=K[3*O+ne]=W.locate(N,H,C.opposite(N,H)),ae=J[3*O+ne]=C.isConstraint(H,N);re<0&&(ae?te.push(O):(q.push(O),V[O]=1),P&&Y.push([N,H,-1]))}return W}(a,p);if(u===0)return p?c.cells.concat(c.boundary):c.cells;for(var x=1,g=c.active,h=c.next,y=c.flags,v=c.cells,m=c.constraint,_=c.neighbor;g.length>0||h.length>0;){for(;g.length>0;){var f=g.pop();if(y[f]!==-x){y[f]=x,v[f];for(var S=0;S<3;++S){var w=_[3*f+S];w>=0&&y[w]===0&&(m[3*f+S]?h.push(w):(g.push(w),y[w]=x))}}}var E=h;h=g,g=E,h.length=0,x=-x}var L=function(C,P,z){for(var G=0,O=0;O<C.length;++O)P[O]===z&&(C[G++]=C[O]);return C.length=G,C}(v,y,u);return p?L.concat(c.boundary):L},n.prototype.locate=(i=[0,0,0],function(a,u,p){var c=a,x=u,g=p;return u<p?u<a&&(c=u,x=p,g=a):p<a&&(c=p,x=a,g=u),c<0?-1:(i[0]=c,i[1]=x,i[2]=g,r.eq(this.cells,i,o))})},9971:function(d,s,t){var i=t(5070),r=t(417)[3];function n(h,y,v,m,_){this.a=h,this.b=y,this.idx=v,this.lowerIds=m,this.upperIds=_}function o(h,y,v,m){this.a=h,this.b=y,this.type=v,this.idx=m}function a(h,y){var v=h.a[0]-y.a[0]||h.a[1]-y.a[1]||h.type-y.type;return v||(h.type!==0&&(v=r(h.a,h.b,y.b))?v:h.idx-y.idx)}function u(h,y){return r(h.a,h.b,y)}function p(h,y,v,m,_){for(var f=i.lt(y,m,u),S=i.gt(y,m,u),w=f;w<S;++w){for(var E=y[w],L=E.lowerIds,C=L.length;C>1&&r(v[L[C-2]],v[L[C-1]],m)>0;)h.push([L[C-1],L[C-2],_]),C-=1;L.length=C,L.push(_);var P=E.upperIds;for(C=P.length;C>1&&r(v[P[C-2]],v[P[C-1]],m)<0;)h.push([P[C-2],P[C-1],_]),C-=1;P.length=C,P.push(_)}}function c(h,y){var v;return(v=h.a[0]<y.a[0]?r(h.a,h.b,y.a):r(y.b,y.a,h.a))?v:(v=y.b[0]<h.b[0]?r(h.a,h.b,y.b):r(y.b,y.a,h.b))||h.idx-y.idx}function x(h,y,v){var m=i.le(h,v,c),_=h[m],f=_.upperIds,S=f[f.length-1];_.upperIds=[S],h.splice(m+1,0,new n(v.a,v.b,v.idx,[S],f))}function g(h,y,v){var m=v.a;v.a=v.b,v.b=m;var _=i.eq(h,v,c),f=h[_];h[_-1].upperIds=f.upperIds,h.splice(_,1)}d.exports=function(h,y){for(var v=h.length,m=y.length,_=[],f=0;f<v;++f)_.push(new o(h[f],null,0,f));for(f=0;f<m;++f){var S=y[f],w=h[S[0]],E=h[S[1]];w[0]<E[0]?_.push(new o(w,E,2,f),new o(E,w,1,f)):w[0]>E[0]&&_.push(new o(E,w,2,f),new o(w,E,1,f))}_.sort(a);for(var L=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),C=[new n([L,1],[L,0],-1,[],[])],P=[],z=(f=0,_.length);f<z;++f){var G=_[f],O=G.type;O===0?p(P,C,h,G.a,G.idx):O===2?x(C,0,G):g(C,0,G)}return P}},743:function(d,s,t){var i=t(5070);function r(a,u){this.stars=a,this.edges=u}d.exports=function(a,u){for(var p=new Array(a),c=0;c<a;++c)p[c]=[];return new r(p,u)};var n=r.prototype;function o(a,u,p){for(var c=1,x=a.length;c<x;c+=2)if(a[c-1]===u&&a[c]===p)return a[c-1]=a[x-2],a[c]=a[x-1],void(a.length=x-2)}n.isConstraint=function(){var a=[0,0];function u(p,c){return p[0]-c[0]||p[1]-c[1]}return function(p,c){return a[0]=Math.min(p,c),a[1]=Math.max(p,c),i.eq(this.edges,a,u)>=0}}(),n.removeTriangle=function(a,u,p){var c=this.stars;o(c[a],u,p),o(c[u],p,a),o(c[p],a,u)},n.addTriangle=function(a,u,p){var c=this.stars;c[a].push(u,p),c[u].push(p,a),c[p].push(a,u)},n.opposite=function(a,u){for(var p=this.stars[u],c=1,x=p.length;c<x;c+=2)if(p[c]===a)return p[c-1];return-1},n.flip=function(a,u){var p=this.opposite(a,u),c=this.opposite(u,a);this.removeTriangle(a,u,p),this.removeTriangle(u,a,c),this.addTriangle(a,c,p),this.addTriangle(u,p,c)},n.edges=function(){for(var a=this.stars,u=[],p=0,c=a.length;p<c;++p)for(var x=a[p],g=0,h=x.length;g<h;g+=2)u.push([x[g],x[g+1]]);return u},n.cells=function(){for(var a=this.stars,u=[],p=0,c=a.length;p<c;++p)for(var x=a[p],g=0,h=x.length;g<h;g+=2){var y=x[g],v=x[g+1];p<Math.min(y,v)&&u.push([p,y,v])}return u}},9887:function(d){d.exports=function(s){for(var t=1,i=1;i<s.length;++i)for(var r=0;r<i;++r)if(s[i]<s[r])t=-t;else if(s[r]===s[i])return 0;return t}},9243:function(d,s,t){var i=t(3094),r=t(6606);function n(u,p){for(var c=0,x=u.length,g=0;g<x;++g)c+=u[g]*p[g];return c}function o(u){var p=u.length;if(p===0)return[];u[0].length;var c=i([u.length+1,u.length+1],1),x=i([u.length+1],1);c[p][p]=0;for(var g=0;g<p;++g){for(var h=0;h<=g;++h)c[h][g]=c[g][h]=2*n(u[g],u[h]);x[g]=n(u[g],u[g])}var y=r(c,x),v=0,m=y[p+1];for(g=0;g<m.length;++g)v+=m[g];var _=new Array(p);for(g=0;g<p;++g){m=y[g];var f=0;for(h=0;h<m.length;++h)f+=m[h];_[g]=f/v}return _}function a(u){if(u.length===0)return[];for(var p=u[0].length,c=i([p]),x=o(u),g=0;g<u.length;++g)for(var h=0;h<p;++h)c[h]+=u[g][h]*x[g];return c}a.barycenetric=o,d.exports=a},1778:function(d,s,t){d.exports=function(r){for(var n=i(r),o=0,a=0;a<r.length;++a)for(var u=r[a],p=0;p<n.length;++p)o+=Math.pow(u[p]-n[p],2);return Math.sqrt(o/r.length)};var i=t(9243)},197:function(d,s,t){d.exports=function(S,w,E){var L;if(E){L=w;for(var C=new Array(w.length),P=0;P<w.length;++P){var z=w[P];C[P]=[z[0],z[1],E[P]]}w=C}for(var G=function(O,H,N){var B=y(O,[],h(O));return _(H,B,N),!!B}(S,w,!!E);f(S,w,!!E);)G=!0;if(E&&G)for(L.length=0,E.length=0,P=0;P<w.length;++P)z=w[P],L.push([z[0],z[1]]),E.push(z[2]);return G};var i=t(1731),r=t(2569),n=t(4434),o=t(5125),a=t(8846),u=t(7999),p=t(2826),c=t(8551),x=t(5528);function g(S){var w=u(S);return[c(w,-1/0),c(w,1/0)]}function h(S){for(var w=new Array(S.length),E=0;E<S.length;++E){var L=S[E];w[E]=[c(L[0],-1/0),c(L[1],-1/0),c(L[0],1/0),c(L[1],1/0)]}return w}function y(S,w,E){for(var L=w.length,C=new i(L),P=[],z=0;z<w.length;++z){var G=w[z],O=g(G[0]),H=g(G[1]);P.push([c(O[0],-1/0),c(H[0],-1/0),c(O[1],1/0),c(H[1],1/0)])}r(P,function(te,K){C.link(te,K)});var N=!0,B=new Array(L);for(z=0;z<L;++z)(q=C.find(z))!==z&&(N=!1,S[q]=[Math.min(S[z][0],S[q][0]),Math.min(S[z][1],S[q][1])]);if(N)return null;var V=0;for(z=0;z<L;++z){var q;(q=C.find(z))===z?(B[z]=V,S[V++]=S[z]):B[z]=-1}for(S.length=V,z=0;z<L;++z)B[z]<0&&(B[z]=B[C.find(z)]);return B}function v(S,w){return S[0]-w[0]||S[1]-w[1]}function m(S,w){return S[0]-w[0]||S[1]-w[1]||(S[2]<w[2]?-1:S[2]>w[2]?1:0)}function _(S,w,E){if(S.length!==0){if(w)for(var L=0;L<S.length;++L){var C=w[(z=S[L])[0]],P=w[z[1]];z[0]=Math.min(C,P),z[1]=Math.max(C,P)}else for(L=0;L<S.length;++L){var z;C=(z=S[L])[0],P=z[1],z[0]=Math.min(C,P),z[1]=Math.max(C,P)}E?S.sort(m):S.sort(v);var G=1;for(L=1;L<S.length;++L){var O=S[L-1],H=S[L];(H[0]!==O[0]||H[1]!==O[1]||E&&H[2]!==O[2])&&(S[G++]=H)}S.length=G}}function f(S,w,E){var L=function(O,H){for(var N=new Array(H.length),B=0;B<H.length;++B){var V=H[B],q=O[V[0]],te=O[V[1]];N[B]=[c(Math.min(q[0],te[0]),-1/0),c(Math.min(q[1],te[1]),-1/0),c(Math.max(q[0],te[0]),1/0),c(Math.max(q[1],te[1]),1/0)]}return N}(S,w),C=function(O,H,N){var B=[];return r(N,function(V,q){var te=H[V],K=H[q];if(te[0]!==K[0]&&te[0]!==K[1]&&te[1]!==K[0]&&te[1]!==K[1]){var J=O[te[0]],Y=O[te[1]],W=O[K[0]],Q=O[K[1]];n(J,Y,W,Q)&&B.push([V,q])}}),B}(S,w,L),P=function(O,H,N,B){var V=[];return r(N,B,function(q,te){var K=H[q];if(K[0]!==te&&K[1]!==te){var J=O[te],Y=O[K[0]],W=O[K[1]];n(Y,W,J,J)&&V.push([q,te])}}),V}(S,w,L,h(S)),z=function(O,H,N,B,V){var q,te,K=O.map(function(se){return[o(se[0]),o(se[1])]});for(q=0;q<N.length;++q){var J=N[q];te=J[0];var Y=J[1],W=H[te],Q=H[Y],ne=x(p(O[W[0]]),p(O[W[1]]),p(O[Q[0]]),p(O[Q[1]]));if(ne){var re=O.length;O.push([u(ne[0]),u(ne[1])]),K.push(ne),B.push([te,re],[Y,re])}}for(B.sort(function(se,oe){if(se[0]!==oe[0])return se[0]-oe[0];var he=K[se[1]],Ee=K[oe[1]];return a(he[0],Ee[0])||a(he[1],Ee[1])}),q=B.length-1;q>=0;--q){var ae=H[te=(Me=B[q])[0]],ue=ae[0],pe=ae[1],ge=O[ue],_e=O[pe];if((ge[0]-_e[0]||ge[1]-_e[1])<0){var me=ue;ue=pe,pe=me}ae[0]=ue;var ve,Oe=ae[1]=Me[1];for(V&&(ve=ae[2]);q>0&&B[q-1][0]===te;){var Me,Te=(Me=B[--q])[1];V?H.push([Oe,Te,ve]):H.push([Oe,Te]),Oe=Te}V?H.push([Oe,pe,ve]):H.push([Oe,pe])}return K}(S,w,C,P,E),G=y(S,z);return _(w,G,E),!!G||C.length>0||P.length>0}},5528:function(d,s,t){d.exports=function(x,g,h,y){var v=a(g,x),m=a(y,h),_=c(v,m);if(o(_)===0)return null;var f=c(m,a(x,h)),S=r(f,_),w=p(v,S);return u(x,w)};var i=t(3962),r=t(9189),n=t(4354),o=t(4951),a=t(6695),u=t(7584),p=t(4469);function c(x,g){return n(i(x[0],g[1]),i(x[1],g[0]))}},5692:function(d){d.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(d,s,t){var i=t(5692),r=t(3578);function n(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function o(u){for(var p,c="#",x=0;x<3;++x)c+=("00"+(p=(p=u[x]).toString(16))).substr(p.length);return c}function a(u){return"rgba("+u.join(",")+")"}d.exports=function(u){var p,c,x,g,h,y,v,m,_,f;if(u||(u={}),m=(u.nshades||72)-1,v=u.format||"hex",(y=u.colormap)||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!i[y])throw Error(y+" not a supported colorscale");h=i[y]}else{if(!Array.isArray(y))throw Error("unsupported colormap option",y);h=y.slice()}if(h.length>m+1)throw new Error(y+" map requires nshades to be at least size "+h.length);_=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],p=h.map(function(C){return Math.round(C.index*m)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var S=h.map(function(C,P){var z=h[P].index,G=h[P].rgb.slice();return G.length===4&&G[3]>=0&&G[3]<=1||(G[3]=_[0]+(_[1]-_[0])*z),G}),w=[];for(f=0;f<p.length-1;++f){g=p[f+1]-p[f],c=S[f],x=S[f+1];for(var E=0;E<g;E++){var L=E/g;w.push([Math.round(r(c[0],x[0],L)),Math.round(r(c[1],x[1],L)),Math.round(r(c[2],x[2],L)),r(c[3],x[3],L)])}}return w.push(h[h.length-1].rgb.concat(_[1])),v==="hex"?w=w.map(o):v==="rgbaString"?w=w.map(a):v==="float"&&(w=w.map(n)),w}},9398:function(d,s,t){d.exports=function(p,c,x,g){var h=i(c,x,g);if(h===0){var y=r(i(p,c,x)),v=r(i(p,c,g));if(y===v){if(y===0){var m=u(p,c,x);return m===u(p,c,g)?0:m?1:-1}return 0}return v===0?y>0||u(p,c,g)?-1:1:y===0?v>0||u(p,c,x)?1:-1:r(v-y)}var _=i(p,c,x);return _>0?h>0&&i(p,c,g)>0?1:-1:_<0?h>0||i(p,c,g)>0?1:-1:i(p,c,g)>0||u(p,c,x)?1:-1};var i=t(417),r=t(7538),n=t(87),o=t(2019),a=t(9662);function u(p,c,x){var g=n(p[0],-c[0]),h=n(p[1],-c[1]),y=n(x[0],-c[0]),v=n(x[1],-c[1]),m=a(o(g,y),o(h,v));return m[m.length-1]>=0}},7538:function(d){d.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(d){d.exports=function(i,r){var n=i.length,o=i.length-r.length;if(o)return o;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return i[0]+i[1]-r[0]-r[1]||s(i[0],i[1])-s(r[0],r[1]);case 3:var a=i[0]+i[1],u=r[0]+r[1];if(o=a+i[2]-(u+r[2]))return o;var p=s(i[0],i[1]),c=s(r[0],r[1]);return s(p,i[2])-s(c,r[2])||s(p+i[2],a)-s(c+r[2],u);case 4:var x=i[0],g=i[1],h=i[2],y=i[3],v=r[0],m=r[1],_=r[2],f=r[3];return x+g+h+y-(v+m+_+f)||s(x,g,h,y)-s(v,m,_,f,v)||s(x+g,x+h,x+y,g+h,g+y,h+y)-s(v+m,v+_,v+f,m+_,m+f,_+f)||s(x+g+h,x+g+y,x+h+y,g+h+y)-s(v+m+_,v+m+f,v+_+f,m+_+f);default:for(var S=i.slice().sort(t),w=r.slice().sort(t),E=0;E<n;++E)if(o=S[E]-w[E])return o;return 0}};var s=Math.min;function t(i,r){return i-r}},1284:function(d,s,t){var i=t(9209),r=t(9887);d.exports=function(n,o){return i(n,o)||r(n)-r(o)}},5537:function(d,s,t){var i=t(8950),r=t(8722),n=t(3332);d.exports=function(o){var a=o.length;if(a===0)return[];if(a===1)return[[0]];var u=o[0].length;return u===0?[]:u===1?i(o):u===2?r(o):n(o,u)}},8950:function(d){d.exports=function(s){for(var t=0,i=0,r=1;r<s.length;++r)s[r][0]<s[t][0]&&(t=r),s[r][0]>s[i][0]&&(i=r);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},8722:function(d,s,t){d.exports=function(r){var n=i(r),o=n.length;if(o<=2)return[];for(var a=new Array(o),u=n[o-1],p=0;p<o;++p){var c=n[p];a[p]=[u,c],u=c}return a};var i=t(3266)},3332:function(d,s,t){d.exports=function(n,o){try{return i(n,!0)}catch{var a=r(n);if(a.length<=o)return[];var u=function(c,x){for(var g=c.length,h=new Array(g),y=0;y<x.length;++y)h[y]=c[x[y]];var v=x.length;for(y=0;y<g;++y)x.indexOf(y)<0&&(h[v++]=c[y]);return h}(n,a);return function(c,x){for(var g=c.length,h=x.length,y=0;y<g;++y)for(var v=c[y],m=0;m<v.length;++m){var _=v[m];if(_<h)v[m]=x[_];else{_-=h;for(var f=0;f<h;++f)_>=x[f]&&(_+=1);v[m]=_}}return c}(i(u,!0),a)}};var i=t(2183),r=t(2153)},9680:function(d){d.exports=function(s,t,i,r,n,o){var a=n-1,u=n*n,p=a*a,c=(1+2*n)*p,x=n*p,g=u*(3-2*n),h=u*a;if(s.length){o||(o=new Array(s.length));for(var y=s.length-1;y>=0;--y)o[y]=c*s[y]+x*t[y]+g*i[y]+h*r[y];return o}return c*s+x*t+g*i+h*r},d.exports.derivative=function(s,t,i,r,n,o){var a=6*n*n-6*n,u=3*n*n-4*n+1,p=-6*n*n+6*n,c=3*n*n-2*n;if(s.length){o||(o=new Array(s.length));for(var x=s.length-1;x>=0;--x)o[x]=a*s[x]+u*t[x]+p*i[x]+c*r[x];return o}return a*s+u*t+p*i[x]+c*r}},4419:function(d,s,t){var i=t(2183),r=t(1215);function n(a,u){this.point=a,this.index=u}function o(a,u){for(var p=a.point,c=u.point,x=p.length,g=0;g<x;++g){var h=c[g]-p[g];if(h)return h}return 0}d.exports=function(a,u){var p=a.length;if(p===0)return[];var c=a[0].length;if(c<1)return[];if(c===1)return function(z,G,O){if(z===1)return O?[[-1,0]]:[];var H=G.map(function(te,K){return[te[0],K]});H.sort(function(te,K){return te[0]-K[0]});for(var N=new Array(z-1),B=1;B<z;++B){var V=H[B-1],q=H[B];N[B-1]=[V[1],q[1]]}return O&&N.push([-1,N[0][1]],[N[z-1][1],-1]),N}(p,a,u);for(var x=new Array(p),g=1,h=0;h<p;++h){for(var y=a[h],v=new Array(c+1),m=0,_=0;_<c;++_){var f=y[_];v[_]=f,m+=f*f}v[c]=m,x[h]=new n(v,h),g=Math.max(m,g)}r(x,o),p=x.length;var S=new Array(p+c+1),w=new Array(p+c+1),E=(c+1)*(c+1)*g,L=new Array(c+1);for(h=0;h<=c;++h)L[h]=0;for(L[c]=E,S[0]=L.slice(),w[0]=-1,h=0;h<=c;++h)(v=L.slice())[h]=1,S[h+1]=v,w[h+1]=-1;for(h=0;h<p;++h){var C=x[h];S[h+c+1]=C.point,w[h+c+1]=C.index}var P=i(S,!1);if(P=u?P.filter(function(z){for(var G=0,O=0;O<=c;++O){var H=w[z[O]];if(H<0&&++G>=2)return!1;z[O]=H}return!0}):P.filter(function(z){for(var G=0;G<=c;++G){var O=w[z[G]];if(O<0)return!1;z[G]=O}return!0}),1&c)for(h=0;h<P.length;++h)v=(C=P[h])[0],C[0]=C[1],C[1]=v;return P}},8362:function(d){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,s=!0,i[1]===1072693248?(d.exports=function(n){return t[0]=n,[i[0],i[1]]},d.exports.pack=function(n,o){return i[0]=n,i[1]=o,t[0]},d.exports.lo=function(n){return t[0]=n,i[0]},d.exports.hi=function(n){return t[0]=n,i[1]}):i[0]===1072693248?(d.exports=function(n){return t[0]=n,[i[1],i[0]]},d.exports.pack=function(n,o){return i[1]=n,i[0]=o,t[0]},d.exports.lo=function(n){return t[0]=n,i[1]},d.exports.hi=function(n){return t[0]=n,i[0]}):s=!1}if(!s){var r=new Buffer(8);d.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},d.exports.pack=function(n,o){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(o,4,!0),r.readDoubleLE(0,!0)},d.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},d.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}d.exports.sign=function(n){return d.exports.hi(n)>>>31},d.exports.exponent=function(n){return(d.exports.hi(n)<<1>>>21)-1023},d.exports.fraction=function(n){var o=d.exports.lo(n),a=d.exports.hi(n),u=1048575&a;return 2146435072&a&&(u+=1048576),[o,u]},d.exports.denormalized=function(n){return!(2146435072&d.exports.hi(n))}},3094:function(d){function s(t,i,r){var n=0|t[r];if(n<=0)return[];var o,a=new Array(n);if(r===t.length-1)for(o=0;o<n;++o)a[o]=i;else for(o=0;o<n;++o)a[o]=s(t,i,r+1);return a}d.exports=function(t,i){switch(i===void 0&&(i=0),typeof t){case"number":if(t>0)return function(r,n){var o,a;for(o=new Array(r),a=0;a<r;++a)o[a]=n;return o}(0|t,i);break;case"object":if(typeof t.length=="number")return s(t,i,0)}return[]}},8348:function(d,s,t){d.exports=function(r,n){var o=r.length;if(typeof n!="number"){n=0;for(var a=0;a<o;++a){var u=r[a];n=Math.max(n,u[0],u[1])}n=1+(0|n)}n|=0;var p=new Array(n);for(a=0;a<n;++a)p[a]=[];for(a=0;a<o;++a)p[(u=r[a])[0]].push(u[1]),p[u[1]].push(u[0]);for(var c=0;c<n;++c)i(p[c],function(x,g){return x-g});return p};var i=t(1215)},5795:function(d){d.exports=function(s,t,i){var r=t||0,n=i||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[n*s[12]-s[8],n*s[13]-s[9],n*s[14]-s[10],n*s[15]-s[11]]]}},8444:function(d,s,t){d.exports=function(p,c,x){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return typeof p=="number"?new o(g=u(p),g,0):new o(p,u(p.length),0);case 2:var g;if(typeof c=="number")return new o(p,g=u(p.length),+c);x=0;case 3:if(p.length!==c.length)throw new Error("state and velocity lengths must match");return new o(p,c,x)}};var i=t(9680),r=t(5070);function n(p,c,x){return Math.min(c,Math.max(p,x))}function o(p,c,x){this.dimension=p.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var g=0;g<this.dimension;++g)this.bounds[0][g]=-1/0,this.bounds[1][g]=1/0;this._state=p.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[x],this._scratch=[p.slice(),p.slice(),p.slice(),p.slice(),p.slice()]}var a=o.prototype;function u(p){for(var c=new Array(p),x=0;x<p;++x)c[x]=0;return c}a.flush=function(p){var c=r.gt(this._time,p)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},a.curve=function(p){var c=this._time,x=c.length,g=r.le(c,p),h=this._scratch[0],y=this._state,v=this._velocity,m=this.dimension,_=this.bounds;if(g<0)for(var f=m-1,S=0;S<m;++S,--f)h[S]=y[f];else if(g>=x-1){f=y.length-1;var w=p-c[x-1];for(S=0;S<m;++S,--f)h[S]=y[f]+w*v[f]}else{f=m*(g+1)-1;var E=c[g],L=c[g+1]-E||1,C=this._scratch[1],P=this._scratch[2],z=this._scratch[3],G=this._scratch[4],O=!0;for(S=0;S<m;++S,--f)C[S]=y[f],z[S]=v[f]*L,P[S]=y[f+m],G[S]=v[f+m]*L,O=O&&C[S]===P[S]&&z[S]===G[S]&&z[S]===0;if(O)for(S=0;S<m;++S)h[S]=C[S];else i(C,z,P,G,(p-E)/L,h)}var H=_[0],N=_[1];for(S=0;S<m;++S)h[S]=n(H[S],N[S],h[S]);return h},a.dcurve=function(p){var c=this._time,x=c.length,g=r.le(c,p),h=this._scratch[0],y=this._state,v=this._velocity,m=this.dimension;if(g>=x-1)for(var _=y.length-1,f=(c[x-1],0);f<m;++f,--_)h[f]=v[_];else{_=m*(g+1)-1;var S=c[g],w=c[g+1]-S||1,E=this._scratch[1],L=this._scratch[2],C=this._scratch[3],P=this._scratch[4],z=!0;for(f=0;f<m;++f,--_)E[f]=y[_],C[f]=v[_]*w,L[f]=y[_+m],P[f]=v[_+m]*w,z=z&&E[f]===L[f]&&C[f]===P[f]&&C[f]===0;if(z)for(f=0;f<m;++f)h[f]=0;else for(i.derivative(E,C,L,P,(p-S)/w,h),f=0;f<m;++f)h[f]/=w}return h},a.lastT=function(){var p=this._time;return p[p.length-1]},a.stable=function(){for(var p=this._velocity,c=p.length,x=this.dimension-1;x>=0;--x)if(p[--c])return!1;return!0},a.jump=function(p){var c=this.lastT(),x=this.dimension;if(!(p<c||arguments.length!==x+1)){var g=this._state,h=this._velocity,y=g.length-this.dimension,v=this.bounds,m=v[0],_=v[1];this._time.push(c,p);for(var f=0;f<2;++f)for(var S=0;S<x;++S)g.push(g[y++]),h.push(0);for(this._time.push(p),S=x;S>0;--S)g.push(n(m[S-1],_[S-1],arguments[S])),h.push(0)}},a.push=function(p){var c=this.lastT(),x=this.dimension;if(!(p<c||arguments.length!==x+1)){var g=this._state,h=this._velocity,y=g.length-this.dimension,v=p-c,m=this.bounds,_=m[0],f=m[1],S=v>1e-6?1/v:0;this._time.push(p);for(var w=x;w>0;--w){var E=n(_[w-1],f[w-1],arguments[w]);g.push(E),h.push((E-g[y++])*S)}}},a.set=function(p){var c=this.dimension;if(!(p<this.lastT()||arguments.length!==c+1)){var x=this._state,g=this._velocity,h=this.bounds,y=h[0],v=h[1];this._time.push(p);for(var m=c;m>0;--m)x.push(n(y[m-1],v[m-1],arguments[m])),g.push(0)}},a.move=function(p){var c=this.lastT(),x=this.dimension;if(!(p<=c||arguments.length!==x+1)){var g=this._state,h=this._velocity,y=g.length-this.dimension,v=this.bounds,m=v[0],_=v[1],f=p-c,S=f>1e-6?1/f:0;this._time.push(p);for(var w=x;w>0;--w){var E=arguments[w];g.push(n(m[w-1],_[w-1],g[y++]+E)),h.push(E*S)}}},a.idle=function(p){var c=this.lastT();if(!(p<c)){var x=this.dimension,g=this._state,h=this._velocity,y=g.length-x,v=this.bounds,m=v[0],_=v[1],f=p-c;this._time.push(p);for(var S=x-1;S>=0;--S)g.push(n(m[S],_[S],g[y]+f*h[y])),h.push(0),y+=1}}},7080:function(d){function s(y,v,m,_,f,S){this._color=y,this.key=v,this.value=m,this.left=_,this.right=f,this._count=S}function t(y){return new s(y._color,y.key,y.value,y.left,y.right,y._count)}function i(y,v){return new s(y,v.key,v.value,v.left,v.right,v._count)}function r(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function n(y,v){this._compare=y,this.root=v}d.exports=function(y){return new n(y||h,null)};var o=n.prototype;function a(y,v){var m;return v.left&&(m=a(y,v.left))?m:(m=y(v.key,v.value))||(v.right?a(y,v.right):void 0)}function u(y,v,m,_){if(v(y,_.key)<=0){var f;if(_.left&&(f=u(y,v,m,_.left))||(f=m(_.key,_.value)))return f}if(_.right)return u(y,v,m,_.right)}function p(y,v,m,_,f){var S,w=m(y,f.key),E=m(v,f.key);if(w<=0&&(f.left&&(S=p(y,v,m,_,f.left))||E>0&&(S=_(f.key,f.value))))return S;if(E>0&&f.right)return p(y,v,m,_,f.right)}function c(y,v){this.tree=y,this._stack=v}Object.defineProperty(o,"keys",{get:function(){var y=[];return this.forEach(function(v,m){y.push(v)}),y}}),Object.defineProperty(o,"values",{get:function(){var y=[];return this.forEach(function(v,m){y.push(m)}),y}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(y,v){for(var m=this._compare,_=this.root,f=[],S=[];_;){var w=m(y,_.key);f.push(_),S.push(w),_=w<=0?_.left:_.right}f.push(new s(0,y,v,null,null,1));for(var E=f.length-2;E>=0;--E)_=f[E],S[E]<=0?f[E]=new s(_._color,_.key,_.value,f[E+1],_.right,_._count+1):f[E]=new s(_._color,_.key,_.value,_.left,f[E+1],_._count+1);for(E=f.length-1;E>1;--E){var L=f[E-1];if(_=f[E],L._color===1||_._color===1)break;var C=f[E-2];if(C.left===L)if(L.left===_){if(!(P=C.right)||P._color!==0){C._color=0,C.left=L.right,L._color=1,L.right=C,f[E-2]=L,f[E-1]=_,r(C),r(L),E>=3&&((z=f[E-3]).left===C?z.left=L:z.right=L);break}L._color=1,C.right=i(1,P),C._color=0,E-=1}else{if(!(P=C.right)||P._color!==0){L.right=_.left,C._color=0,C.left=_.right,_._color=1,_.left=L,_.right=C,f[E-2]=_,f[E-1]=L,r(C),r(L),r(_),E>=3&&((z=f[E-3]).left===C?z.left=_:z.right=_);break}L._color=1,C.right=i(1,P),C._color=0,E-=1}else if(L.right===_){if(!(P=C.left)||P._color!==0){C._color=0,C.right=L.left,L._color=1,L.left=C,f[E-2]=L,f[E-1]=_,r(C),r(L),E>=3&&((z=f[E-3]).right===C?z.right=L:z.left=L);break}L._color=1,C.left=i(1,P),C._color=0,E-=1}else{var P;if(!(P=C.left)||P._color!==0){var z;L.left=_.right,C._color=0,C.right=_.left,_._color=1,_.right=L,_.left=C,f[E-2]=_,f[E-1]=L,r(C),r(L),r(_),E>=3&&((z=f[E-3]).right===C?z.right=_:z.left=_);break}L._color=1,C.left=i(1,P),C._color=0,E-=1}}return f[0]._color=1,new n(m,f[0])},o.forEach=function(y,v,m){if(this.root)switch(arguments.length){case 1:return a(y,this.root);case 2:return u(v,this._compare,y,this.root);case 3:return this._compare(v,m)>=0?void 0:p(v,m,this._compare,y,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var y=[],v=this.root;v;)y.push(v),v=v.left;return new c(this,y)}}),Object.defineProperty(o,"end",{get:function(){for(var y=[],v=this.root;v;)y.push(v),v=v.right;return new c(this,y)}}),o.at=function(y){if(y<0)return new c(this,[]);for(var v=this.root,m=[];;){if(m.push(v),v.left){if(y<v.left._count){v=v.left;continue}y-=v.left._count}if(!y)return new c(this,m);if(y-=1,!v.right||y>=v.right._count)break;v=v.right}return new c(this,[])},o.ge=function(y){for(var v=this._compare,m=this.root,_=[],f=0;m;){var S=v(y,m.key);_.push(m),S<=0&&(f=_.length),m=S<=0?m.left:m.right}return _.length=f,new c(this,_)},o.gt=function(y){for(var v=this._compare,m=this.root,_=[],f=0;m;){var S=v(y,m.key);_.push(m),S<0&&(f=_.length),m=S<0?m.left:m.right}return _.length=f,new c(this,_)},o.lt=function(y){for(var v=this._compare,m=this.root,_=[],f=0;m;){var S=v(y,m.key);_.push(m),S>0&&(f=_.length),m=S<=0?m.left:m.right}return _.length=f,new c(this,_)},o.le=function(y){for(var v=this._compare,m=this.root,_=[],f=0;m;){var S=v(y,m.key);_.push(m),S>=0&&(f=_.length),m=S<0?m.left:m.right}return _.length=f,new c(this,_)},o.find=function(y){for(var v=this._compare,m=this.root,_=[];m;){var f=v(y,m.key);if(_.push(m),f===0)return new c(this,_);m=f<=0?m.left:m.right}return new c(this,[])},o.remove=function(y){var v=this.find(y);return v?v.remove():this},o.get=function(y){for(var v=this._compare,m=this.root;m;){var _=v(y,m.key);if(_===0)return m.value;m=_<=0?m.left:m.right}};var x=c.prototype;function g(y,v){y.key=v.key,y.value=v.value,y.left=v.left,y.right=v.right,y._color=v._color,y._count=v._count}function h(y,v){return y<v?-1:y>v?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new c(this.tree,this._stack.slice())},x.remove=function(){var y=this._stack;if(y.length===0)return this.tree;var v=new Array(y.length),m=y[y.length-1];v[v.length-1]=new s(m._color,m.key,m.value,m.left,m.right,m._count);for(var _=y.length-2;_>=0;--_)(m=y[_]).left===y[_+1]?v[_]=new s(m._color,m.key,m.value,v[_+1],m.right,m._count):v[_]=new s(m._color,m.key,m.value,m.left,v[_+1],m._count);if((m=v[v.length-1]).left&&m.right){var f=v.length;for(m=m.left;m.right;)v.push(m),m=m.right;var S=v[f-1];for(v.push(new s(m._color,S.key,S.value,m.left,m.right,m._count)),v[f-1].key=m.key,v[f-1].value=m.value,_=v.length-2;_>=f;--_)m=v[_],v[_]=new s(m._color,m.key,m.value,m.left,v[_+1],m._count);v[f-1].left=v[f]}if((m=v[v.length-1])._color===0){var w=v[v.length-2];for(w.left===m?w.left=null:w.right===m&&(w.right=null),v.pop(),_=0;_<v.length;++_)v[_]._count--;return new n(this.tree._compare,v[0])}if(m.left||m.right){for(m.left?g(m,m.left):m.right&&g(m,m.right),m._color=1,_=0;_<v.length-1;++_)v[_]._count--;return new n(this.tree._compare,v[0])}if(v.length===1)return new n(this.tree._compare,null);for(_=0;_<v.length;++_)v[_]._count--;var E=v[v.length-2];return function(L){for(var C,P,z,G,O=L.length-1;O>=0;--O){if(C=L[O],O===0)return void(C._color=1);if((P=L[O-1]).left===C){if((z=P.right).right&&z.right._color===0)return G=(z=P.right=t(z)).right=t(z.right),P.right=z.left,z.left=P,z.right=G,z._color=P._color,C._color=1,P._color=1,G._color=1,r(P),r(z),O>1&&((H=L[O-2]).left===P?H.left=z:H.right=z),void(L[O-1]=z);if(z.left&&z.left._color===0)return G=(z=P.right=t(z)).left=t(z.left),P.right=G.left,z.left=G.right,G.left=P,G.right=z,G._color=P._color,P._color=1,z._color=1,C._color=1,r(P),r(z),r(G),O>1&&((H=L[O-2]).left===P?H.left=G:H.right=G),void(L[O-1]=G);if(z._color===1){if(P._color===0)return P._color=1,void(P.right=i(0,z));P.right=i(0,z);continue}z=t(z),P.right=z.left,z.left=P,z._color=P._color,P._color=0,r(P),r(z),O>1&&((H=L[O-2]).left===P?H.left=z:H.right=z),L[O-1]=z,L[O]=P,O+1<L.length?L[O+1]=C:L.push(C),O+=2}else{if((z=P.left).left&&z.left._color===0)return G=(z=P.left=t(z)).left=t(z.left),P.left=z.right,z.right=P,z.left=G,z._color=P._color,C._color=1,P._color=1,G._color=1,r(P),r(z),O>1&&((H=L[O-2]).right===P?H.right=z:H.left=z),void(L[O-1]=z);if(z.right&&z.right._color===0)return G=(z=P.left=t(z)).right=t(z.right),P.left=G.right,z.right=G.left,G.right=P,G.left=z,G._color=P._color,P._color=1,z._color=1,C._color=1,r(P),r(z),r(G),O>1&&((H=L[O-2]).right===P?H.right=G:H.left=G),void(L[O-1]=G);if(z._color===1){if(P._color===0)return P._color=1,void(P.left=i(0,z));P.left=i(0,z);continue}var H;z=t(z),P.left=z.right,z.right=P,z._color=P._color,P._color=0,r(P),r(z),O>1&&((H=L[O-2]).right===P?H.right=z:H.left=z),L[O-1]=z,L[O]=P,O+1<L.length?L[O+1]=C:L.push(C),O+=2}}}(v),E.left===m?E.left=null:E.right=null,new n(this.tree._compare,v[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var y=0,v=this._stack;if(v.length===0){var m=this.tree.root;return m?m._count:0}v[v.length-1].left&&(y=v[v.length-1].left._count);for(var _=v.length-2;_>=0;--_)v[_+1]===v[_].right&&(++y,v[_].left&&(y+=v[_].left._count));return y},enumerable:!0}),x.next=function(){var y=this._stack;if(y.length!==0){var v=y[y.length-1];if(v.right)for(v=v.right;v;)y.push(v),v=v.left;else for(y.pop();y.length>0&&y[y.length-1].right===v;)v=y[y.length-1],y.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].right)return!0;for(var v=y.length-1;v>0;--v)if(y[v-1].left===y[v])return!0;return!1}}),x.update=function(y){var v=this._stack;if(v.length===0)throw new Error("Can't update empty node!");var m=new Array(v.length),_=v[v.length-1];m[m.length-1]=new s(_._color,_.key,y,_.left,_.right,_._count);for(var f=v.length-2;f>=0;--f)(_=v[f]).left===v[f+1]?m[f]=new s(_._color,_.key,_.value,m[f+1],_.right,_._count):m[f]=new s(_._color,_.key,_.value,_.left,m[f+1],_._count);return new n(this.tree._compare,m[0])},x.prev=function(){var y=this._stack;if(y.length!==0){var v=y[y.length-1];if(v.left)for(v=v.left;v;)y.push(v),v=v.right;else for(y.pop();y.length>0&&y[y.length-1].left===v;)v=y[y.length-1],y.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].left)return!0;for(var v=y.length-1;v>0;--v)if(y[v-1].right===y[v])return!0;return!1}})},7453:function(d,s,t){d.exports=function(w,E){var L=new c(w);return L.update(E),L};var i=t(9557),r=t(1681),n=t(1011),o=t(2864),a=t(8468),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function p(w,E){return w[0]=E[0],w[1]=E[1],w[2]=E[2],w}function c(w){this.gl=w,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(w)}var x=c.prototype;function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}x.update=function(w){function E(te,K,J){if(J in w){var Y,W=w[J],Q=this[J];(te?Array.isArray(W)&&Array.isArray(W[0]):Array.isArray(W))?this[J]=Y=[K(W[0]),K(W[1]),K(W[2])]:this[J]=Y=[K(W),K(W),K(W)];for(var ne=0;ne<3;++ne)if(Y[ne]!==Q[ne])return!0}return!1}w=w||{};var L,C=E.bind(this,!1,Number),P=E.bind(this,!1,Boolean),z=E.bind(this,!1,String),G=E.bind(this,!0,function(te){if(Array.isArray(te)){if(te.length===3)return[+te[0],+te[1],+te[2],1];if(te.length===4)return[+te[0],+te[1],+te[2],+te[3]]}return[0,0,0,1]}),O=!1,H=!1;if("bounds"in w)for(var N=w.bounds,B=0;B<2;++B)for(var V=0;V<3;++V)N[B][V]!==this.bounds[B][V]&&(H=!0),this.bounds[B][V]=N[B][V];if("ticks"in w)for(L=w.ticks,O=!0,this.autoTicks=!1,B=0;B<3;++B)this.tickSpacing[B]=0;else C("tickSpacing")&&(this.autoTicks=!0,H=!0);if(this._firstInit&&("ticks"in w||"tickSpacing"in w||(this.autoTicks=!0),H=!0,O=!0,this._firstInit=!1),H&&this.autoTicks&&(L=a.create(this.bounds,this.tickSpacing),O=!0),O){for(B=0;B<3;++B)L[B].sort(function(te,K){return te.x-K.x});a.equal(L,this.ticks)?O=!1:this.ticks=L}P("tickEnable"),z("tickFont")&&(O=!0),C("tickSize"),C("tickAngle"),C("tickPad"),G("tickColor");var q=z("labels");z("labelFont")&&(q=!0),P("labelEnable"),C("labelSize"),C("labelPad"),G("labelColor"),P("lineEnable"),P("lineMirror"),C("lineWidth"),G("lineColor"),P("lineTickEnable"),P("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),G("lineTickColor"),P("gridEnable"),C("gridWidth"),G("gridColor"),P("zeroEnable"),G("zeroLineColor"),C("zeroLineWidth"),P("backgroundEnable"),G("backgroundColor"),this._text?this._text&&(q||O)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&O&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var h=[new g,new g,new g];function y(w,E,L,C,P){for(var z=w.primalOffset,G=w.primalMinor,O=w.mirrorOffset,H=w.mirrorMinor,N=C[E],B=0;B<3;++B)if(E!==B){var V=z,q=O,te=G,K=H;N&1<<B&&(V=O,q=z,te=H,K=G),V[B]=L[0][B],q[B]=L[1][B],P[B]>0?(te[B]=-1,K[B]=0):(te[B]=0,K[B]=1)}}var v=[0,0,0],m={model:u,view:u,projection:u,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(w){};var _=[0,0,0],f=[0,0,0],S=[0,0,0];x.draw=function(w){w=w||m;for(var E=this.gl,L=w.model||u,C=w.view||u,P=w.projection||u,z=this.bounds,G=w._ortho||!1,O=o(L,C,P,z,G),H=O.cubeEdges,N=O.axis,B=C[12],V=C[13],q=C[14],te=C[15],K=(G?2:1)*this.pixelRatio*(P[3]*B+P[7]*V+P[11]*q+P[15]*te)/E.drawingBufferHeight,J=0;J<3;++J)this.lastCubeProps.cubeEdges[J]=H[J],this.lastCubeProps.axis[J]=N[J];var Y=h;for(J=0;J<3;++J)y(h[J],J,this.bounds,H,N);E=this.gl;var W,Q,ne,re=v;for(J=0;J<3;++J)this.backgroundEnable[J]?re[J]=N[J]:re[J]=0;for(this._background.draw(L,C,P,z,re,this.backgroundColor),this._lines.bind(L,C,P,this),J=0;J<3;++J){var ae=[0,0,0];N[J]>0?ae[J]=z[1][J]:ae[J]=z[0][J];for(var ue=0;ue<2;++ue){var pe=(J+1+ue)%3,ge=(J+1+(1^ue))%3;this.gridEnable[pe]&&this._lines.drawGrid(pe,ge,this.bounds,ae,this.gridColor[pe],this.gridWidth[pe]*this.pixelRatio)}for(ue=0;ue<2;++ue)pe=(J+1+ue)%3,ge=(J+1+(1^ue))%3,this.zeroEnable[ge]&&Math.min(z[0][ge],z[1][ge])<=0&&Math.max(z[0][ge],z[1][ge])>=0&&this._lines.drawZero(pe,ge,this.bounds,ae,this.zeroLineColor[ge],this.zeroLineWidth[ge]*this.pixelRatio)}for(J=0;J<3;++J){this.lineEnable[J]&&this._lines.drawAxisLine(J,this.bounds,Y[J].primalOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio),this.lineMirror[J]&&this._lines.drawAxisLine(J,this.bounds,Y[J].mirrorOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio);var _e=p(_,Y[J].primalMinor),me=p(f,Y[J].mirrorMinor),ve=this.lineTickLength;for(ue=0;ue<3;++ue){var Oe=K/L[5*ue];_e[ue]*=ve[ue]*Oe,me[ue]*=ve[ue]*Oe}this.lineTickEnable[J]&&this._lines.drawAxisTicks(J,Y[J].primalOffset,_e,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio),this.lineTickMirror[J]&&this._lines.drawAxisTicks(J,Y[J].mirrorOffset,me,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio)}function Me(ke){(ne=[0,0,0])[ke]=1}function Te(ke,be,Ie){var Fe=(ke+1)%3,ce=(ke+2)%3,we=be[Fe],ye=be[ce],Ce=Ie[Fe],Re=Ie[ce];we>0&&Re>0||we>0&&Re<0||we<0&&Re>0||we<0&&Re<0?Me(Fe):(ye>0&&Ce>0||ye>0&&Ce<0||ye<0&&Ce>0||ye<0&&Ce<0)&&Me(ce)}for(this._lines.unbind(),this._text.bind(L,C,P,this.pixelRatio),J=0;J<3;++J){var se=Y[J].primalMinor,oe=Y[J].mirrorMinor,he=p(S,Y[J].primalOffset);for(ue=0;ue<3;++ue)this.lineTickEnable[J]&&(he[ue]+=K*se[ue]*Math.max(this.lineTickLength[ue],0)/L[5*ue]);var Ee=[0,0,0];if(Ee[J]=1,this.tickEnable[J]){for(this.tickAngle[J]===-3600?(this.tickAngle[J]=0,this.tickAlign[J]="auto"):this.tickAlign[J]=-1,Q=1,(W=[this.tickAlign[J],.5,Q])[0]==="auto"?W[0]=0:W[0]=parseInt(""+W[0]),ne=[0,0,0],Te(J,se,oe),ue=0;ue<3;++ue)he[ue]+=K*se[ue]*this.tickPad[ue]/L[5*ue];this._text.drawTicks(J,this.tickSize[J],this.tickAngle[J],he,this.tickColor[J],Ee,ne,W)}if(this.labelEnable[J]){for(Q=0,ne=[0,0,0],this.labels[J].length>4&&(Me(J),Q=1),(W=[this.labelAlign[J],.5,Q])[0]==="auto"?W[0]=0:W[0]=parseInt(""+W[0]),ue=0;ue<3;++ue)he[ue]+=K*se[ue]*this.labelPad[ue]/L[5*ue];he[J]+=.5*(z[0][J]+z[1][J]),this._text.drawLabel(J,this.labelSize[J],this.labelAngle[J],he,this.labelColor[J],[0,0,0],ne,W)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(d,s,t){d.exports=function(u){for(var p=[],c=[],x=0,g=0;g<3;++g)for(var h=(g+1)%3,y=(g+2)%3,v=[0,0,0],m=[0,0,0],_=-1;_<=1;_+=2){c.push(x,x+2,x+1,x+1,x+2,x+3),v[g]=_,m[g]=_;for(var f=-1;f<=1;f+=2){v[h]=f;for(var S=-1;S<=1;S+=2)v[y]=S,p.push(v[0],v[1],v[2],m[0],m[1],m[2]),x+=1}var w=h;h=y,y=w}var E=i(u,new Float32Array(p)),L=i(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),C=r(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],L),P=n(u);return P.attributes.position.location=0,P.attributes.normal.location=1,new o(u,E,C,P)};var i=t(5827),r=t(2944),n=t(1943).bg;function o(u,p,c,x){this.gl=u,this.buffer=p,this.vao=c,this.shader=x}var a=o.prototype;a.draw=function(u,p,c,x,g,h){for(var y=!1,v=0;v<3;++v)y=y||g[v];if(y){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:p,projection:c,bounds:x,enable:g,colors:h},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},a.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(d,s,t){d.exports=function(f,S,w,E,L){r(a,S,f),r(a,w,a);for(var C=0,P=0;P<2;++P){c[2]=E[P][2];for(var z=0;z<2;++z){c[1]=E[z][1];for(var G=0;G<2;++G)c[0]=E[G][0],g(u[C],c,a),C+=1}}var O=-1;for(P=0;P<8;++P){for(var H=u[P][3],N=0;N<3;++N)p[P][N]=u[P][N]/H;L&&(p[P][2]*=-1),H<0&&(O<0||p[P][2]<p[O][2])&&(O=P)}if(O<0){O=0;for(var B=0;B<3;++B){for(var V=(B+2)%3,q=(B+1)%3,te=-1,K=-1,J=0;J<2;++J){var Y=(Q=J<<B)+(J<<V)+(1-J<<q),W=Q+(1-J<<V)+(J<<q);o(p[Q],p[Y],p[W],x)<0||(J?te=1:K=1)}if(te<0||K<0)K>te&&(O|=1<<B);else{for(J=0;J<2;++J){Y=(Q=J<<B)+(J<<V)+(1-J<<q),W=Q+(1-J<<V)+(J<<q);var Q,ne=y([u[Q],u[Y],u[W],u[Q+(1<<V)+(1<<q)]]);J?te=ne:K=ne}K>te&&(O|=1<<B)}}}var re=7^O,ae=-1;for(P=0;P<8;++P)P!==O&&P!==re&&(ae<0||p[ae][1]>p[P][1])&&(ae=P);var ue=-1;for(P=0;P<3;++P)(ge=ae^1<<P)!==O&&ge!==re&&(ue<0&&(ue=ge),(q=p[ge])[0]<p[ue][0]&&(ue=ge));var pe=-1;for(P=0;P<3;++P){var ge;(ge=ae^1<<P)!==O&&ge!==re&&ge!==ue&&(pe<0&&(pe=ge),(q=p[ge])[0]>p[pe][0]&&(pe=ge))}var _e=v;_e[0]=_e[1]=_e[2]=0,_e[i.log2(ue^ae)]=ae&ue,_e[i.log2(ae^pe)]=ae&pe;var me=7^pe;me===O||me===re?(me=7^ue,_e[i.log2(pe^me)]=me&pe):_e[i.log2(ue^me)]=me&ue;var ve=m,Oe=O;for(B=0;B<3;++B)ve[B]=Oe&1<<B?-1:1;return _};var i=t(2288),r=t(104),n=t(4670),o=t(417),a=new Array(16),u=new Array(8),p=new Array(8),c=new Array(3),x=[0,0,0];function g(f,S,w){for(var E=0;E<4;++E){f[E]=w[12+E];for(var L=0;L<3;++L)f[E]+=S[L]*w[4*L+E]}}(function(){for(var f=0;f<8;++f)u[f]=[1,1,1,1],p[f]=[1,1,1]})();var h=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function y(f){for(var S=0;S<h.length;++S)if((f=n.positive(f,h[S])).length<3)return 0;var w=f[0],E=w[0]/w[3],L=w[1]/w[3],C=0;for(S=1;S+1<f.length;++S){var P=f[S],z=f[S+1],G=P[0]/P[3]-E,O=P[1]/P[3]-L,H=z[0]/z[3]-E,N=z[1]/z[3]-L;C+=Math.abs(G*N-O*H)}return C}var v=[1,1,1],m=[0,0,0],_={cubeEdges:v,axis:m}},1681:function(d,s,t){d.exports=function(v,m,_){var f=[],S=[0,0,0],w=[0,0,0],E=[0,0,0],L=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var P=f.length/3|0,z=0;z<_[C].length;++z){var G=+_[C][z].x;f.push(G,0,1,G,1,1,G,0,-1,G,0,-1,G,1,1,G,1,-1)}var O=f.length/3|0;S[C]=P,w[C]=O-P,P=f.length/3|0;for(var H=0;H<_[C].length;++H)G=+_[C][H].x,f.push(G,0,1,G,1,1,G,0,-1,G,0,-1,G,1,1,G,1,-1);O=f.length/3|0,E[C]=P,L[C]=O-P}var N=i(v,new Float32Array(f)),B=r(v,[{buffer:N,type:v.FLOAT,size:3,stride:0,offset:0}]),V=n(v);return V.attributes.position.location=0,new h(v,N,B,V,w,S,L,E)};var i=t(5827),r=t(2944),n=t(1943).j,o=[0,0,0],a=[0,0,0],u=[0,0,0],p=[0,0,0],c=[1,1];function x(v){return v[0]=v[1]=v[2]=0,v}function g(v,m){return v[0]=m[0],v[1]=m[1],v[2]=m[2],v}function h(v,m,_,f,S,w,E,L){this.gl=v,this.vertBuffer=m,this.vao=_,this.shader=f,this.tickCount=S,this.tickOffset=w,this.gridCount=E,this.gridOffset=L}var y=h.prototype;y.bind=function(v,m,_){this.shader.bind(),this.shader.uniforms.model=v,this.shader.uniforms.view=m,this.shader.uniforms.projection=_,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},y.unbind=function(){this.vao.unbind()},y.drawAxisLine=function(v,m,_,f,S){var w=x(a);this.shader.uniforms.majorAxis=a,w[v]=m[1][v]-m[0][v],this.shader.uniforms.minorAxis=w;var E,L=g(p,_);L[v]+=m[0][v],this.shader.uniforms.offset=L,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=f,(E=x(u))[(v+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(u))[(v+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},y.drawAxisTicks=function(v,m,_,f,S){if(this.tickCount[v]){var w=x(o);w[v]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=S;var E=x(u);E[v]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v])}},y.drawGrid=function(v,m,_,f,S,w){if(this.gridCount[v]){var E=x(a);E[m]=_[1][m]-_[0][m],this.shader.uniforms.minorAxis=E;var L=g(p,f);L[m]+=_[0][m],this.shader.uniforms.offset=L;var C=x(o);C[v]=1,this.shader.uniforms.majorAxis=C;var P=x(u);P[v]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[v],this.gridOffset[v])}},y.drawZero=function(v,m,_,f,S,w){var E=x(a);this.shader.uniforms.majorAxis=E,E[v]=_[1][v]-_[0][v],this.shader.uniforms.minorAxis=E;var L=g(p,f);L[v]+=_[0][v],this.shader.uniforms.offset=L;var C=x(u);C[m]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},y.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(d,s,t){var i=t(6832),r=t(5158),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),o=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.j=function(x){return r(x,n,o,null,[{name:"position",type:"vec3"}])};var a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.f=function(x){return r(x,a,u,null,[{name:"position",type:"vec3"}])};var p=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(x){return r(x,p,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(d,s,t){d.exports=function(g,h,y,v,m,_){var f=i(g),S=r(g,[{buffer:f,size:3}]),w=o(g);w.attributes.position.location=0;var E=new p(g,w,f,S);return E.update(h,y,v,m,_),E};var i=t(5827),r=t(2944),n=t(875),o=t(1943).f,a=window||k.global||{},u=a.__TEXT_CACHE||{};function p(g,h,y,v){this.gl=g,this.shader=h,this.buffer=y,this.vao=v,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}a.__TEXT_CACHE={};var c=p.prototype,x=[0,0];c.bind=function(g,h,y,v){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=g,m.view=h,m.projection=y,m.pixelScale=v,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},c.unbind=function(){this.vao.unbind()},c.update=function(g,h,y,v,m){var _=[];function f(G,O,H,N,B,V){var q=u[H];q||(q=u[H]={});var te=q[O];te||(te=q[O]=function(ue,pe){try{return n(ue,pe)}catch(ge){return console.warn('error vectorizing text:"'+ue+'" error:',ge),{cells:[],positions:[]}}}(O,{triangles:!0,font:H,textAlign:"center",textBaseline:"middle",lineSpacing:B,styletags:V}));for(var K=(N||12)/12,J=te.positions,Y=te.cells,W=0,Q=Y.length;W<Q;++W)for(var ne=Y[W],re=2;re>=0;--re){var ae=J[ne[re]];_.push(K*ae[0],-K*ae[1],G)}}for(var S=[0,0,0],w=[0,0,0],E=[0,0,0],L=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=_.length/3|0,f(.5*(g[0][P]+g[1][P]),h[P],y[P],12,1.25,C),L[P]=(_.length/3|0)-E[P],S[P]=_.length/3|0;for(var z=0;z<v[P].length;++z)v[P][z].text&&f(v[P][z].x,v[P][z].text,v[P][z].font||m,v[P][z].fontSize||12,1.25,C);w[P]=(_.length/3|0)-S[P]}this.buffer.update(_),this.tickOffset=S,this.tickCount=w,this.labelOffset=E,this.labelCount=L},c.drawTicks=function(g,h,y,v,m,_,f,S){this.tickCount[g]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=h,this.shader.uniforms.offset=v,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g]))},c.drawLabel=function(g,h,y,v,m,_,f,S){this.labelCount[g]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=h,this.shader.uniforms.offset=v,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[g],this.labelOffset[g]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(d,s){function t(i,r){var n=i+"",o=n.indexOf("."),a=0;o>=0&&(a=n.length-o-1);var u=Math.pow(10,a),p=Math.round(i*r*u),c=p+"";if(c.indexOf("e")>=0)return c;var x=p/u,g=p%u;p<0?(x=0|-Math.ceil(x),g=0|-g):(x=0|Math.floor(x),g|=0);var h=""+x;if(p<0&&(h="-"+h),a){for(var y=""+g;y.length<a;)y="0"+y;return h+"."+y}return h}s.create=function(i,r){for(var n=[],o=0;o<3;++o){for(var a=[],u=(i[0][o],i[1][o],0);u*r[o]<=i[1][o];++u)a.push({x:u*r[o],text:t(r[o],u)});for(u=-1;u*r[o]>=i[0][o];--u)a.push({x:u*r[o],text:t(r[o],u)});n.push(a)}return n},s.equal=function(i,r){for(var n=0;n<3;++n){if(i[n].length!==r[n].length)return!1;for(var o=0;o<i[n].length;++o){var a=i[n][o],u=r[n][o];if(a.x!==u.x||a.text!==u.text||a.font!==u.font||a.fontColor!==u.fontColor||a.fontSize!==u.fontSize||a.dx!==u.dx||a.dy!==u.dy)return!1}}return!0}},2771:function(d,s,t){d.exports=function(_,f,S,w,E){var L=f.model||p,C=f.view||p,P=f.projection||p,z=f._ortho||!1,G=_.bounds,O=(E=E||n(L,C,P,G,z)).axis;o(c,C,L),o(c,P,c);for(var H=v,N=0;N<3;++N)H[N].lo=1/0,H[N].hi=-1/0,H[N].pixelsPerDataUnit=1/0;var B=i(a(c,c));a(c,c);for(var V=0;V<3;++V){var q=(V+1)%3,te=(V+2)%3,K=m;e:for(N=0;N<2;++N){var J=[];if(O[V]<0!=!!N){K[V]=G[N][V];for(var Y=0;Y<2;++Y){K[q]=G[Y^N][q];for(var W=0;W<2;++W)K[te]=G[W^Y^N][te],J.push(K.slice())}var Q=z?5:4;for(Y=Q;Y===Q;++Y){if(J.length===0)continue e;J=r.positive(J,B[Y])}for(Y=0;Y<J.length;++Y){te=J[Y];var ne=y(m,c,te,S,w);for(W=0;W<3;++W)H[W].lo=Math.min(H[W].lo,te[W]),H[W].hi=Math.max(H[W].hi,te[W]),W!==V&&(H[W].pixelsPerDataUnit=Math.min(H[W].pixelsPerDataUnit,Math.abs(ne[W])))}}}}return H};var i=t(5795),r=t(4670),n=t(2864),o=t(104),a=t(2142),u=t(6342),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function x(_,f,S){this.lo=_,this.hi=f,this.pixelsPerDataUnit=S}var g=[0,0,0,1],h=[0,0,0,1];function y(_,f,S,w,E){for(var L=0;L<3;++L){for(var C=g,P=h,z=0;z<3;++z)P[z]=C[z]=S[z];P[3]=C[3]=1,P[L]+=1,u(P,P,f),P[3]<0&&(_[L]=1/0),C[L]-=1,u(C,C,f),C[3]<0&&(_[L]=1/0);var G=(C[0]/C[3]-P[0]/P[3])*w,O=(C[1]/C[3]-P[1]/P[3])*E;_[L]=.25*Math.sqrt(G*G+O*O)}return _}var v=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],m=[0,0,0]},5827:function(d,s,t){var i=t(5306),r=t(7498),n=t(5050),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function a(x,g,h,y,v){this.gl=x,this.type=g,this.handle=h,this.length=y,this.usage=v}var u=a.prototype;function p(x,g,h,y,v,m){var _=v.length*v.BYTES_PER_ELEMENT;if(m<0)return x.bufferData(g,v,y),_;if(_+m>h)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(g,m,v),h}function c(x,g){for(var h=i.malloc(x.length,g),y=x.length,v=0;v<y;++v)h[v]=x[v];return h}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(x,g){if(typeof g!="number"&&(g=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var h=x.dtype;if(o.indexOf(h)<0&&(h="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(h=gl.getExtension("OES_element_index_uint")&&h!=="uint16"?"uint32":"uint16"),h===x.dtype&&function(_,f){for(var S=1,w=f.length-1;w>=0;--w){if(f[w]!==S)return!1;S*=_[w]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=p(this.gl,this.type,this.length,this.usage,x.data,g):this.length=p(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),g);else{var y=i.malloc(x.size,h),v=n(y,x.shape);r.assign(v,x),this.length=p(this.gl,this.type,this.length,this.usage,g<0?y:y.subarray(0,x.size),g),i.free(y)}}else if(Array.isArray(x)){var m;m=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(x,"uint16"):c(x,"float32"),this.length=p(this.gl,this.type,this.length,this.usage,g<0?m:m.subarray(0,x.length),g),i.free(m)}else if(typeof x=="object"&&typeof x.length=="number")this.length=p(this.gl,this.type,this.length,this.usage,x,g);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(g>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},d.exports=function(x,g,h,y){if(h=h||x.ARRAY_BUFFER,y=y||x.DYNAMIC_DRAW,h!==x.ARRAY_BUFFER&&h!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==x.DYNAMIC_DRAW&&y!==x.STATIC_DRAW&&y!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var v=x.createBuffer(),m=new a(x,h,v,0,y);return m.update(g),m}},1140:function(d,s,t){var i=t(2858);d.exports=function(n,o){var a=n.positions,u=n.vectors,p={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return o&&(o[0]=[0,0,0],o[1]=[0,0,0]),p;for(var c=0,x=1/0,g=-1/0,h=1/0,y=-1/0,v=1/0,m=-1/0,_=null,f=null,S=[],w=1/0,E=!1,L=0;L<a.length;L++){var C=a[L];x=Math.min(C[0],x),g=Math.max(C[0],g),h=Math.min(C[1],h),y=Math.max(C[1],y),v=Math.min(C[2],v),m=Math.max(C[2],m);var P=u[L];if(i.length(P)>c&&(c=i.length(P)),L){var z=2*i.distance(_,C)/(i.length(f)+i.length(P));z?(w=Math.min(w,z),E=!1):E=!0}E||(_=C,f=P),S.push(P)}var G=[x,h,v],O=[g,y,m];o&&(o[0]=G,o[1]=O),c===0&&(c=1);var H=1/c;isFinite(w)||(w=1),p.vectorScale=w;var N=n.coneSize||.5;n.absoluteConeSize&&(N=n.absoluteConeSize*H),p.coneScale=N,L=0;for(var B=0;L<a.length;L++)for(var V=(C=a[L])[0],q=C[1],te=C[2],K=S[L],J=i.length(K)*H,Y=0;Y<8;Y++){p.positions.push([V,q,te,B++]),p.positions.push([V,q,te,B++]),p.positions.push([V,q,te,B++]),p.positions.push([V,q,te,B++]),p.positions.push([V,q,te,B++]),p.positions.push([V,q,te,B++]),p.vectors.push(K),p.vectors.push(K),p.vectors.push(K),p.vectors.push(K),p.vectors.push(K),p.vectors.push(K),p.vertexIntensity.push(J,J,J),p.vertexIntensity.push(J,J,J);var W=p.positions.length;p.cells.push([W-6,W-5,W-4],[W-3,W-2,W-1])}return p};var r=t(7234);d.exports.createMesh=t(5028),d.exports.createConeMesh=function(n,o){return d.exports.createMesh(n,o,{shaders:r,traceType:"cone"})}},5028:function(d,s,t){var i=t(5158),r=t(5827),n=t(2944),o=t(8931),a=t(104),u=t(7437),p=t(5050),c=t(9156),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(y,v,m,_,f,S,w,E,L,C,P){this.gl=y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=v,this.dirty=!0,this.triShader=m,this.pickShader=_,this.trianglePositions=f,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=L,this.triangleIds=w,this.triangleVAO=C,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var h=g.prototype;h.isOpaque=function(){return this.opacity>=1},h.isTransparent=function(){return this.opacity<1},h.pickSlots=1,h.setPickBase=function(y){this.pickId=y},h.update=function(y){y=y||{};var v=this.gl;this.dirty=!0,"lightPosition"in y&&(this.lightPosition=y.lightPosition),"opacity"in y&&(this.opacity=y.opacity),"ambient"in y&&(this.ambientLight=y.ambient),"diffuse"in y&&(this.diffuseLight=y.diffuse),"specular"in y&&(this.specularLight=y.specular),"roughness"in y&&(this.roughness=y.roughness),"fresnel"in y&&(this.fresnel=y.fresnel),y.tubeScale!==void 0&&(this.tubeScale=y.tubeScale),y.vectorScale!==void 0&&(this.vectorScale=y.vectorScale),y.coneScale!==void 0&&(this.coneScale=y.coneScale),y.coneOffset!==void 0&&(this.coneOffset=y.coneOffset),y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=v.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=v.LINEAR,this.texture.setPixels(function(ne){for(var re=c({colormap:ne,nshades:256,format:"rgba"}),ae=new Uint8Array(1024),ue=0;ue<256;++ue){for(var pe=re[ue],ge=0;ge<3;++ge)ae[4*ue+ge]=pe[ge];ae[4*ue+3]=255*pe[3]}return p(ae,[256,256,4],[4,0,1])}(y.colormap)),this.texture.generateMipmap());var m=y.cells,_=y.positions,f=y.vectors;if(_&&m&&f){var S=[],w=[],E=[],L=[],C=[];this.cells=m,this.positions=_,this.vectors=f;var P=y.meshColor||[1,1,1,1],z=y.vertexIntensity,G=1/0,O=-1/0;if(z)if(y.vertexIntensityBounds)G=+y.vertexIntensityBounds[0],O=+y.vertexIntensityBounds[1];else for(var H=0;H<z.length;++H){var N=z[H];G=Math.min(G,N),O=Math.max(O,N)}else for(H=0;H<_.length;++H)N=_[H][2],G=Math.min(G,N),O=Math.max(O,N);for(this.intensity=z||function(ne){for(var re=ne.length,ae=new Array(re),ue=0;ue<re;++ue)ae[ue]=ne[ue][2];return ae}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],H=0;H<_.length;++H)for(var B=_[H],V=0;V<3;++V)!isNaN(B[V])&&isFinite(B[V])&&(this.bounds[0][V]=Math.min(this.bounds[0][V],B[V]),this.bounds[1][V]=Math.max(this.bounds[1][V],B[V]));var q=0;e:for(H=0;H<m.length;++H){var te=m[H];if(te.length===3){for(V=0;V<3;++V){B=_[J=te[V]];for(var K=0;K<3;++K)if(isNaN(B[K])||!isFinite(B[K]))continue e}for(V=0;V<3;++V){var J;B=_[J=te[2-V]],S.push(B[0],B[1],B[2],B[3]);var Y=f[J];w.push(Y[0],Y[1],Y[2],Y[3]||0);var W,Q=P;Q.length===3?E.push(Q[0],Q[1],Q[2],1):E.push(Q[0],Q[1],Q[2],Q[3]),W=z?[(z[J]-G)/(O-G),0]:[(B[2]-G)/(O-G),0],L.push(W[0],W[1]),C.push(H)}q+=1}}this.triangleCount=q,this.trianglePositions.update(S),this.triangleVectors.update(w),this.triangleColors.update(E),this.triangleUVs.update(L),this.triangleIds.update(new Uint32Array(C))}},h.drawTransparent=h.draw=function(y){y=y||{};for(var v=this.gl,m=y.model||x,_=y.view||x,f=y.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);var E={model:m,view:_,projection:f,inverseModel:x.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),v.disable(v.CULL_FACE),this.texture.bind(0);var L=new Array(16);for(a(L,E.view,E.model),a(L,E.projection,L),u(L,L),w=0;w<3;++w)E.eyePosition[w]=L[12+w]/L[15];var C=L[15];for(w=0;w<3;++w)C+=this.lightPosition[w]*L[4*w+3];for(w=0;w<3;++w){for(var P=L[12+w],z=0;z<3;++z)P+=L[4*z+w]*this.lightPosition[z];E.lightPosition[w]=P/C}if(this.triangleCount>0){var G=this.triShader;G.bind(),G.uniforms=E,this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},h.drawPick=function(y){y=y||{};for(var v=this.gl,m=y.model||x,_=y.view||x,f=y.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);this._model=[].slice.call(m),this._view=[].slice.call(_),this._projection=[].slice.call(f),this._resolution=[v.drawingBufferWidth,v.drawingBufferHeight];var E={model:m,view:_,projection:f,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},L=this.pickShader;L.bind(),L.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},h.pick=function(y){if(!y||y.id!==this.pickId)return null;var v=y.value[0]+256*y.value[1]+65536*y.value[2],m=this.cells[v],_=this.positions[m[1]].slice(0,3),f={position:_,dataCoordinate:_,index:Math.floor(m[1]/48)};return this.traceType==="cone"?f.index=Math.floor(m[1]/48):this.traceType==="streamtube"&&(f.intensity=this.intensity[m[1]],f.velocity=this.vectors[m[1]].slice(0,3),f.divergence=this.vectors[m[1]][3],f.index=v),f},h.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},d.exports=function(y,v,m){var _=m.shaders;arguments.length===1&&(y=(v=y).gl);var f=function(O,H){var N=i(O,H.meshShader.vertex,H.meshShader.fragment,null,H.meshShader.attributes);return N.attributes.position.location=0,N.attributes.color.location=2,N.attributes.uv.location=3,N.attributes.vector.location=4,N}(y,_),S=function(O,H){var N=i(O,H.pickShader.vertex,H.pickShader.fragment,null,H.pickShader.attributes);return N.attributes.position.location=0,N.attributes.id.location=1,N.attributes.vector.location=4,N}(y,_),w=o(y,p(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=y.LINEAR_MIPMAP_LINEAR,w.magFilter=y.LINEAR;var E=r(y),L=r(y),C=r(y),P=r(y),z=r(y),G=new g(y,w,f,S,E,L,z,C,P,n(y,[{buffer:E,type:y.FLOAT,size:4},{buffer:z,type:y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:y.FLOAT,size:4},{buffer:P,type:y.FLOAT,size:2},{buffer:L,type:y.FLOAT,size:4}]),m.traceType||"cone");return G.update(v),G}},7234:function(d,s,t){var i=t(6832),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),o=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(d){d.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(d,s,t){var i=t(1950);d.exports=function(r){return i[r]}},3110:function(d,s,t){d.exports=function(g){var h=g.gl,y=i(h),v=r(h,[{buffer:y,type:h.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:h.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:h.FLOAT,size:3,offset:28,stride:40}]),m=n(h);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var _=new a(h,y,v,m);return _.update(g),_};var i=t(5827),r=t(2944),n=t(7667),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function a(g,h,y,v){this.gl=g,this.shader=v,this.buffer=h,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=a.prototype;function p(g,h){for(var y=0;y<3;++y)g[0][y]=Math.min(g[0][y],h[y]),g[1][y]=Math.max(g[1][y],h[y])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(g){var h=this.gl,y=this.shader.uniforms;this.shader.bind();var v=y.view=g.view||o,m=y.projection=g.projection||o;y.model=g.model||o,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var _=v[12],f=v[13],S=v[14],w=v[15],E=(g._ortho?2:1)*this.pixelRatio*(m[3]*_+m[7]*f+m[11]*S+m[15]*w)/h.drawingBufferHeight;this.vao.bind();for(var L=0;L<3;++L)h.lineWidth(this.lineWidth[L]*this.pixelRatio),y.capSize=this.capSize[L]*E,this.lineCount[L]&&h.drawArrays(h.LINES,this.lineOffset[L],this.lineCount[L]);this.vao.unbind()};var c=function(){for(var g=new Array(3),h=0;h<3;++h){for(var y=[],v=1;v<=2;++v)for(var m=-1;m<=1;m+=2){var _=[0,0,0];_[(v+h)%3]=m,y.push(_)}g[h]=y}return g}();function x(g,h,y,v){for(var m=c[v],_=0;_<m.length;++_){var f=m[_];g.push(h[0],h[1],h[2],y[0],y[1],y[2],y[3],f[0],f[1],f[2])}return m.length}u.update=function(g){"lineWidth"in(g=g||{})&&(this.lineWidth=g.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in g&&(this.capSize=g.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var h=g.color||[[0,0,0],[0,0,0],[0,0,0]],y=g.position,v=g.error;if(Array.isArray(h[0])||(h=[h,h,h]),y&&v){var m=[],_=y.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=f;e:for(var w=0;w<_;++w){for(var E=y[w],L=0;L<3;++L)if(isNaN(E[L])||!isFinite(E[L]))continue e;var C,P=v[w],z=h[S];Array.isArray(z[0])&&(z=h[w]),z.length===3?z=[z[0],z[1],z[2],1]:z.length===4&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)),isNaN(P[0][S])||isNaN(P[1][S])||(P[0][S]<0&&((C=E.slice())[S]+=P[0][S],m.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,C[0],C[1],C[2],z[0],z[1],z[2],z[3],0,0,0),p(this.bounds,C),f+=2+x(m,C,z,S)),P[1][S]>0&&((C=E.slice())[S]+=P[1][S],m.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,C[0],C[1],C[2],z[0],z[1],z[2],z[3],0,0,0),p(this.bounds,C),f+=2+x(m,C,z,S)))}this.lineCount[S]=f-this.lineOffset[S]}this.buffer.update(m)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(d,s,t){var i=t(6832),r=t(5158),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),o=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);d.exports=function(a){return r(a,n,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(d,s,t){var i=t(8931);d.exports=function(_,f,S,w){r||(r=_.FRAMEBUFFER_UNSUPPORTED,n=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,a=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=_.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(H,N){var B=H.getParameter(N.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(B+1);for(var V=0;V<=B;++V){for(var q=new Array(B),te=0;te<V;++te)q[te]=H.COLOR_ATTACHMENT0+te;for(te=V;te<B;++te)q[te]=H.NONE;u[V]=q}}(_,E),Array.isArray(f)&&(w=S,S=0|f[1],f=0|f[0]),typeof f!="number")throw new Error("gl-fbo: Missing shape parameter");var L=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(f<0||f>L||S<0||S>L)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(w=w||{})){if((C=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>_.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var P=_.UNSIGNED_BYTE,z=_.getExtension("OES_texture_float");if(w.float&&C>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");P=_.FLOAT}else w.preferFloat&&C>0&&z&&(P=_.FLOAT);var G=!0;"depth"in w&&(G=!!w.depth);var O=!1;return"stencil"in w&&(O=!!w.stencil),new y(_,f,S,P,C,G,O,E)};var r,n,o,a,u=null;function p(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function c(_,f){_.bindFramebuffer(_.FRAMEBUFFER,f[0]),_.bindRenderbuffer(_.RENDERBUFFER,f[1]),_.bindTexture(_.TEXTURE_2D,f[2])}function x(_){switch(_){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case a:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function g(_,f,S,w,E,L){if(!w)return null;var C=i(_,f,S,E,w);return C.magFilter=_.NEAREST,C.minFilter=_.NEAREST,C.mipSamples=1,C.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,L,_.TEXTURE_2D,C.handle,0),C}function h(_,f,S,w,E){var L=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,L),_.renderbufferStorage(_.RENDERBUFFER,w,f,S),_.framebufferRenderbuffer(_.FRAMEBUFFER,E,_.RENDERBUFFER,L),L}function y(_,f,S,w,E,L,C,P){this.gl=_,this._shape=[0|f,0|S],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var z=0;z<E;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=L,this._useStencil=C;var G=this,O=[0|f,0|S];Object.defineProperties(O,{0:{get:function(){return G._shape[0]},set:function(H){return G.width=H}},1:{get:function(){return G._shape[1]},set:function(H){return G.height=H}}}),this._shapeVector=O,function(H){var N=p(H.gl),B=H.gl,V=H.handle=B.createFramebuffer(),q=H._shape[0],te=H._shape[1],K=H.color.length,J=H._ext,Y=H._useStencil,W=H._useDepth,Q=H._colorType;B.bindFramebuffer(B.FRAMEBUFFER,V);for(var ne=0;ne<K;++ne)H.color[ne]=g(B,q,te,Q,B.RGBA,B.COLOR_ATTACHMENT0+ne);K===0?(H._color_rb=h(B,q,te,B.RGBA4,B.COLOR_ATTACHMENT0),J&&J.drawBuffersWEBGL(u[0])):K>1&&J.drawBuffersWEBGL(u[K]);var re=B.getExtension("WEBGL_depth_texture");re?Y?H.depth=g(B,q,te,re.UNSIGNED_INT_24_8_WEBGL,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):W&&(H.depth=g(B,q,te,B.UNSIGNED_SHORT,B.DEPTH_COMPONENT,B.DEPTH_ATTACHMENT)):W&&Y?H._depth_rb=h(B,q,te,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):W?H._depth_rb=h(B,q,te,B.DEPTH_COMPONENT16,B.DEPTH_ATTACHMENT):Y&&(H._depth_rb=h(B,q,te,B.STENCIL_INDEX,B.STENCIL_ATTACHMENT));var ae=B.checkFramebufferStatus(B.FRAMEBUFFER);if(ae!==B.FRAMEBUFFER_COMPLETE){for(H._destroyed=!0,B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(H.handle),H.handle=null,H.depth&&(H.depth.dispose(),H.depth=null),H._depth_rb&&(B.deleteRenderbuffer(H._depth_rb),H._depth_rb=null),ne=0;ne<H.color.length;++ne)H.color[ne].dispose(),H.color[ne]=null;H._color_rb&&(B.deleteRenderbuffer(H._color_rb),H._color_rb=null),c(B,N),x(ae)}c(B,N)}(this)}var v=y.prototype;function m(_,f,S){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==f||_._shape[1]!==S){var w=_.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=f,_._shape[1]=S;for(var L=p(w),C=0;C<_.color.length;++C)_.color[C].shape=_._shape;_._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,_._shape[0],_._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,_.handle);var P=w.checkFramebufferStatus(w.FRAMEBUFFER);P!==w.FRAMEBUFFER_COMPLETE&&(_.dispose(),c(w,L),x(P)),c(w,L)}}Object.defineProperties(v,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|_[0],S=0|_[1];return m(this,f,S),[f,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return m(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _|=0,m(this,this._shape[0],_),_},enumerable:!1}}),v.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},v.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(d,s,t){var i=t(8974).sprintf,r=t(6603),n=t(9365),o=t(8008);d.exports=function(a,u,p){var c=n(u)||"of unknown name (see npm glsl-shader-name)",x="unknown type";p!==void 0&&(x=p===r.FRAGMENT_SHADER?"fragment":"vertex");for(var g=i(`Error compiling %s shader %s:
`,x,c),h=i("%s%s",g,a),y=a.split(`
`),v={},m=0;m<y.length;m++){var _=y[m];if(_!==""&&_!=="\0"){var f=parseInt(_.split(":")[2]);if(isNaN(f))throw new Error(i("Could not parse error: %s",_));v[f]=_}}var S=o(u).split(`
`);for(m=0;m<S.length;m++)if((v[m+3]||v[m+2]||v[m+1])&&(g+=S[m]+`
`,v[m+1])){var w=v[m+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),g+=i(`^^^ %s

`,w)}return{long:g.trim(),short:h.trim()}}},6386:function(d,s,t){d.exports=function(h,y){var v=h.gl,m=new p(h,o(v,u.vertex,u.fragment),o(v,u.pickVertex,u.pickFragment),a(v),a(v),a(v),a(v));return m.update(y),h.addObject(m),m};var i=t(5070),r=t(9560),n=t(5306),o=t(5158),a=t(5827),u=t(1292);function p(h,y,v,m,_,f,S){this.plot=h,this.shader=y,this.pickShader=v,this.positionBuffer=m,this.weightBuffer=_,this.colorBuffer=f,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,x=p.prototype,g=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var h=this.plot,y=this.shader,v=this.bounds,m=this.numVertices;if(!(m<=0)){var _=h.gl,f=h.dataBox,S=v[2]-v[0],w=v[3]-v[1],E=f[2]-f[0],L=f[3]-f[1];c[0]=2*S/E,c[4]=2*w/L,c[6]=2*(v[0]-f[0])/E-1,c[7]=2*(v[1]-f[1])/L-1,y.bind();var C=y.uniforms;C.viewTransform=c,C.shape=this.shape;var P=y.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,m)}}),x.drawPick=function(){var h=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0];return function(v){var m=this.plot,_=this.pickShader,f=this.bounds,S=this.numVertices;if(!(S<=0)){var w=m.gl,E=m.dataBox,L=f[2]-f[0],C=f[3]-f[1],P=E[2]-E[0],z=E[3]-E[1];h[0]=2*L/P,h[4]=2*C/z,h[6]=2*(f[0]-E[0])/P-1,h[7]=2*(f[1]-E[1])/z-1;for(var G=0;G<4;++G)y[G]=v>>8*G&255;this.pickOffset=v,_.bind();var O=_.uniforms;O.viewTransform=h,O.pickOffset=y,O.shape=this.shape;var H=_.attributes;return this.positionBuffer.bind(),H.position.pointer(),this.weightBuffer.bind(),H.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),H.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,S),v+this.shape[0]*this.shape[1]}}}(),x.pick=function(h,y,v){var m=this.pickOffset,_=this.shape[0]*this.shape[1];if(v<m||v>=m+_)return null;var f=v-m,S=this.xData,w=this.yData;return{object:this,pointId:f,dataCoord:[S[f%this.shape[0]],w[f/this.shape[0]|0]]}},x.update=function(h){var y=(h=h||{}).shape||[0,0],v=h.x||r(y[0]),m=h.y||r(y[1]),_=h.z||new Float32Array(y[0]*y[1]),f=h.zsmooth!==!1;this.xData=v,this.yData=m;var S,w,E,L,C=h.colorLevels||[0],P=h.colorValues||[0,0,0,1],z=C.length,G=this.bounds;f?(S=G[0]=v[0],w=G[1]=m[0],E=G[2]=v[v.length-1],L=G[3]=m[m.length-1]):(S=G[0]=v[0]+(v[1]-v[0])/2,w=G[1]=m[0]+(m[1]-m[0])/2,E=G[2]=v[v.length-1]+(v[v.length-1]-v[v.length-2])/2,L=G[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var O=1/(E-S),H=1/(L-w),N=y[0],B=y[1];this.shape=[N,B];var V=(f?(N-1)*(B-1):N*B)*(g.length>>>1);this.numVertices=V;for(var q=n.mallocUint8(4*V),te=n.mallocFloat32(2*V),K=n.mallocUint8(2*V),J=n.mallocUint32(V),Y=0,W=f?N-1:N,Q=f?B-1:B,ne=0;ne<Q;++ne){var re,ae;f?(re=H*(m[ne]-w),ae=H*(m[ne+1]-w)):(re=ne<B-1?H*(m[ne]-(m[ne+1]-m[ne])/2-w):H*(m[ne]-(m[ne]-m[ne-1])/2-w),ae=ne<B-1?H*(m[ne]+(m[ne+1]-m[ne])/2-w):H*(m[ne]+(m[ne]-m[ne-1])/2-w));for(var ue=0;ue<W;++ue){var pe,ge;f?(pe=O*(v[ue]-S),ge=O*(v[ue+1]-S)):(pe=ue<N-1?O*(v[ue]-(v[ue+1]-v[ue])/2-S):O*(v[ue]-(v[ue]-v[ue-1])/2-S),ge=ue<N-1?O*(v[ue]+(v[ue+1]-v[ue])/2-S):O*(v[ue]+(v[ue]-v[ue-1])/2-S));for(var _e=0;_e<g.length;_e+=2){var me,ve,Oe,Me,Te=g[_e],se=g[_e+1],oe=_[f?(ne+se)*N+(ue+Te):ne*N+ue],he=i.le(C,oe);if(he<0)me=P[0],ve=P[1],Oe=P[2],Me=P[3];else if(he===z-1)me=P[4*z-4],ve=P[4*z-3],Oe=P[4*z-2],Me=P[4*z-1];else{var Ee=(oe-C[he])/(C[he+1]-C[he]),ke=1-Ee,be=4*he,Ie=4*(he+1);me=ke*P[be]+Ee*P[Ie],ve=ke*P[be+1]+Ee*P[Ie+1],Oe=ke*P[be+2]+Ee*P[Ie+2],Me=ke*P[be+3]+Ee*P[Ie+3]}q[4*Y]=255*me,q[4*Y+1]=255*ve,q[4*Y+2]=255*Oe,q[4*Y+3]=255*Me,te[2*Y]=.5*pe+.5*ge,te[2*Y+1]=.5*re+.5*ae,K[2*Y]=Te,K[2*Y+1]=se,J[Y]=ne*N+ue,Y+=1}}}this.positionBuffer.update(te),this.weightBuffer.update(K),this.colorBuffer.update(q),this.idBuffer.update(J),n.free(te),n.free(q),n.free(K),n.free(J)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(d,s,t){var i=t(6832);d.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(d,s,t){var i=t(6832),r=t(5158),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),o=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(p){return r(p,n,o,null,u)},s.createPickShader=function(p){return r(p,n,a,null,u)}},6086:function(d,s,t){d.exports=function(S){var w=S.gl||S.scene&&S.scene.gl,E=x(w);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var L=g(w);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var C=i(w),P=r(w,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),z=p(new Array(1024),[256,1,4]),G=0;G<1024;++G)z.data[G]=255;var O=n(w,z);O.wrap=w.REPEAT;var H=new _(w,E,L,C,P,O);return H.update(S),H};var i=t(5827),r=t(2944),n=t(8931),o=new Uint8Array(4),a=new Float32Array(o.buffer),u=t(5070),p=t(5050),c=t(248),x=c.createShader,g=c.createPickShader,h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(S,w){for(var E=0,L=0;L<3;++L){var C=S[L]-w[L];E+=C*C}return Math.sqrt(E)}function v(S){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)w[0][E]=Math.max(S[0][E],w[0][E]),w[1][E]=Math.min(S[1][E],w[1][E]);return w}function m(S,w,E,L){this.arcLength=S,this.position=w,this.index=E,this.dataCoordinate=L}function _(S,w,E,L,C,P){this.gl=S,this.shader=w,this.pickShader=E,this.buffer=L,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=_.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(S){this.pickId=S},f.drawTransparent=f.draw=function(S){if(this.vertexCount){var w=this.gl,E=this.shader,L=this.vao;E.bind(),E.uniforms={model:S.model||h,view:S.view||h,projection:S.projection||h,clipBounds:v(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},f.drawPick=function(S){if(this.vertexCount){var w=this.gl,E=this.pickShader,L=this.vao;E.bind(),E.uniforms={model:S.model||h,view:S.view||h,projection:S.projection||h,pickId:this.pickId,clipBounds:v(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},f.update=function(S){var w,E;this.dirty=!0;var L=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],P=[],z=[],G=0,O=0,H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=S.position||S.positions;if(N){var B=S.color||S.colors||[0,0,0,1],V=S.lineWidth||1,q=!1;e:for(w=1;w<N.length;++w){var te,K,J,Y=N[w-1],W=N[w];for(P.push(G),z.push(Y.slice()),E=0;E<3;++E){if(isNaN(Y[E])||isNaN(W[E])||!isFinite(Y[E])||!isFinite(W[E])){if(!L&&C.length>0){for(var Q=0;Q<24;++Q)C.push(C[C.length-12]);O+=2,q=!0}continue e}H[0][E]=Math.min(H[0][E],Y[E],W[E]),H[1][E]=Math.max(H[1][E],Y[E],W[E])}Array.isArray(B[0])?(te=B.length>w-1?B[w-1]:B.length>0?B[B.length-1]:[0,0,0,1],K=B.length>w?B[w]:B.length>0?B[B.length-1]:[0,0,0,1]):te=K=B,te.length===3&&(te=[te[0],te[1],te[2],1]),K.length===3&&(K=[K[0],K[1],K[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),J=Array.isArray(V)?V.length>w-1?V[w-1]:V.length>0?V[V.length-1]:[0,0,0,1]:V;var ne=G;if(G+=y(Y,W),q){for(E=0;E<2;++E)C.push(Y[0],Y[1],Y[2],W[0],W[1],W[2],ne,J,te[0],te[1],te[2],te[3]);O+=2,q=!1}C.push(Y[0],Y[1],Y[2],W[0],W[1],W[2],ne,J,te[0],te[1],te[2],te[3],Y[0],Y[1],Y[2],W[0],W[1],W[2],ne,-J,te[0],te[1],te[2],te[3],W[0],W[1],W[2],Y[0],Y[1],Y[2],G,-J,K[0],K[1],K[2],K[3],W[0],W[1],W[2],Y[0],Y[1],Y[2],G,J,K[0],K[1],K[2],K[3]),O+=4}}if(this.buffer.update(C),P.push(G),z.push(N[N.length-1].slice()),this.bounds=H,this.vertexCount=O,this.points=z,this.arcLength=P,"dashes"in S){var re=S.dashes.slice();for(re.unshift(0),w=1;w<re.length;++w)re[w]=re[w-1]+re[w];var ae=p(new Array(1024),[256,1,4]);for(w=0;w<256;++w){for(E=0;E<4;++E)ae.set(w,0,E,0);1&u.le(re,re[re.length-1]*w/255)?ae.set(w,0,0,0):ae.set(w,0,0,255)}this.texture.setPixels(ae)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(S){if(!S||S.id!==this.pickId)return null;var w=function(N,B,V,q){return o[0]=0,o[1]=V,o[2]=B,o[3]=N,a[0]}(S.value[0],S.value[1],S.value[2]),E=u.le(this.arcLength,w);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var L=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],P=(w-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),z=1-P,G=[0,0,0],O=0;O<3;++O)G[O]=z*L[O]+P*C[O];var H=Math.min(P<.5?E:E+1,this.points.length-1);return new m(w,G,H,this.points[H])}},7332:function(d){d.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},9823:function(d){d.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(d){d.exports=function(s){var t=s[0],i=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],p=s[7],c=s[8],x=s[9],g=s[10],h=s[11],y=s[12],v=s[13],m=s[14],_=s[15];return(t*a-i*o)*(g*_-h*m)-(t*u-r*o)*(x*_-h*v)+(t*p-n*o)*(x*m-g*v)+(i*u-r*a)*(c*_-h*y)-(i*p-n*a)*(c*m-g*y)+(r*p-n*u)*(c*v-x*y)}},5950:function(d){d.exports=function(s,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=i+i,u=r+r,p=n+n,c=i*a,x=r*a,g=r*u,h=n*a,y=n*u,v=n*p,m=o*a,_=o*u,f=o*p;return s[0]=1-g-v,s[1]=x+f,s[2]=h-_,s[3]=0,s[4]=x-f,s[5]=1-c-v,s[6]=y+m,s[7]=0,s[8]=h+_,s[9]=y-m,s[10]=1-c-g,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(d){d.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],a=t[3],u=r+r,p=n+n,c=o+o,x=r*u,g=r*p,h=r*c,y=n*p,v=n*c,m=o*c,_=a*u,f=a*p,S=a*c;return s[0]=1-(y+m),s[1]=g+S,s[2]=h-f,s[3]=0,s[4]=g-S,s[5]=1-(x+m),s[6]=v+_,s[7]=0,s[8]=h+f,s[9]=v-_,s[10]=1-(x+y),s[11]=0,s[12]=i[0],s[13]=i[1],s[14]=i[2],s[15]=1,s}},9947:function(d){d.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(d){d.exports=function(s,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],u=t[5],p=t[6],c=t[7],x=t[8],g=t[9],h=t[10],y=t[11],v=t[12],m=t[13],_=t[14],f=t[15],S=i*u-r*a,w=i*p-n*a,E=i*c-o*a,L=r*p-n*u,C=r*c-o*u,P=n*c-o*p,z=x*m-g*v,G=x*_-h*v,O=x*f-y*v,H=g*_-h*m,N=g*f-y*m,B=h*f-y*_,V=S*B-w*N+E*H+L*O-C*G+P*z;return V?(V=1/V,s[0]=(u*B-p*N+c*H)*V,s[1]=(n*N-r*B-o*H)*V,s[2]=(m*P-_*C+f*L)*V,s[3]=(h*C-g*P-y*L)*V,s[4]=(p*O-a*B-c*G)*V,s[5]=(i*B-n*O+o*G)*V,s[6]=(_*E-v*P-f*w)*V,s[7]=(x*P-h*E+y*w)*V,s[8]=(a*N-u*O+c*z)*V,s[9]=(r*O-i*N-o*z)*V,s[10]=(v*C-m*E+f*S)*V,s[11]=(g*E-x*C-y*S)*V,s[12]=(u*G-a*H-p*z)*V,s[13]=(i*H-r*G+n*z)*V,s[14]=(m*w-v*L-_*S)*V,s[15]=(x*L-g*w+h*S)*V,s):null}},3012:function(d,s,t){var i=t(9947);d.exports=function(r,n,o,a){var u,p,c,x,g,h,y,v,m,_,f=n[0],S=n[1],w=n[2],E=a[0],L=a[1],C=a[2],P=o[0],z=o[1],G=o[2];return Math.abs(f-P)<1e-6&&Math.abs(S-z)<1e-6&&Math.abs(w-G)<1e-6?i(r):(y=f-P,v=S-z,m=w-G,u=L*(m*=_=1/Math.sqrt(y*y+v*v+m*m))-C*(v*=_),p=C*(y*=_)-E*m,c=E*v-L*y,(_=Math.sqrt(u*u+p*p+c*c))?(u*=_=1/_,p*=_,c*=_):(u=0,p=0,c=0),x=v*c-m*p,g=m*u-y*c,h=y*p-v*u,(_=Math.sqrt(x*x+g*g+h*h))?(x*=_=1/_,g*=_,h*=_):(x=0,g=0,h=0),r[0]=u,r[1]=x,r[2]=y,r[3]=0,r[4]=p,r[5]=g,r[6]=v,r[7]=0,r[8]=c,r[9]=h,r[10]=m,r[11]=0,r[12]=-(u*f+p*S+c*w),r[13]=-(x*f+g*S+h*w),r[14]=-(y*f+v*S+m*w),r[15]=1,r)}},104:function(d){d.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],a=t[3],u=t[4],p=t[5],c=t[6],x=t[7],g=t[8],h=t[9],y=t[10],v=t[11],m=t[12],_=t[13],f=t[14],S=t[15],w=i[0],E=i[1],L=i[2],C=i[3];return s[0]=w*r+E*u+L*g+C*m,s[1]=w*n+E*p+L*h+C*_,s[2]=w*o+E*c+L*y+C*f,s[3]=w*a+E*x+L*v+C*S,w=i[4],E=i[5],L=i[6],C=i[7],s[4]=w*r+E*u+L*g+C*m,s[5]=w*n+E*p+L*h+C*_,s[6]=w*o+E*c+L*y+C*f,s[7]=w*a+E*x+L*v+C*S,w=i[8],E=i[9],L=i[10],C=i[11],s[8]=w*r+E*u+L*g+C*m,s[9]=w*n+E*p+L*h+C*_,s[10]=w*o+E*c+L*y+C*f,s[11]=w*a+E*x+L*v+C*S,w=i[12],E=i[13],L=i[14],C=i[15],s[12]=w*r+E*u+L*g+C*m,s[13]=w*n+E*p+L*h+C*_,s[14]=w*o+E*c+L*y+C*f,s[15]=w*a+E*x+L*v+C*S,s}},5268:function(d){d.exports=function(s,t,i,r,n,o,a){var u=1/(t-i),p=1/(r-n),c=1/(o-a);return s[0]=-2*u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*p,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(t+i)*u,s[13]=(n+r)*p,s[14]=(a+o)*c,s[15]=1,s}},1120:function(d){d.exports=function(s,t,i,r,n){var o=1/Math.tan(t/2),a=1/(r-n);return s[0]=o/i,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(n+r)*a,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*n*r*a,s[15]=0,s}},4422:function(d){d.exports=function(s,t,i,r){var n,o,a,u,p,c,x,g,h,y,v,m,_,f,S,w,E,L,C,P,z,G,O,H,N=r[0],B=r[1],V=r[2],q=Math.sqrt(N*N+B*B+V*V);return Math.abs(q)<1e-6?null:(N*=q=1/q,B*=q,V*=q,n=Math.sin(i),a=1-(o=Math.cos(i)),u=t[0],p=t[1],c=t[2],x=t[3],g=t[4],h=t[5],y=t[6],v=t[7],m=t[8],_=t[9],f=t[10],S=t[11],w=N*N*a+o,E=B*N*a+V*n,L=V*N*a-B*n,C=N*B*a-V*n,P=B*B*a+o,z=V*B*a+N*n,G=N*V*a+B*n,O=B*V*a-N*n,H=V*V*a+o,s[0]=u*w+g*E+m*L,s[1]=p*w+h*E+_*L,s[2]=c*w+y*E+f*L,s[3]=x*w+v*E+S*L,s[4]=u*C+g*P+m*z,s[5]=p*C+h*P+_*z,s[6]=c*C+y*P+f*z,s[7]=x*C+v*P+S*z,s[8]=u*G+g*O+m*H,s[9]=p*G+h*O+_*H,s[10]=c*G+y*O+f*H,s[11]=x*G+v*O+S*H,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},6109:function(d){d.exports=function(s,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[4],a=t[5],u=t[6],p=t[7],c=t[8],x=t[9],g=t[10],h=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=o*n+c*r,s[5]=a*n+x*r,s[6]=u*n+g*r,s[7]=p*n+h*r,s[8]=c*n-o*r,s[9]=x*n-a*r,s[10]=g*n-u*r,s[11]=h*n-p*r,s}},7115:function(d){d.exports=function(s,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[0],a=t[1],u=t[2],p=t[3],c=t[8],x=t[9],g=t[10],h=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=o*n-c*r,s[1]=a*n-x*r,s[2]=u*n-g*r,s[3]=p*n-h*r,s[8]=o*r+c*n,s[9]=a*r+x*n,s[10]=u*r+g*n,s[11]=p*r+h*n,s}},5240:function(d){d.exports=function(s,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[0],a=t[1],u=t[2],p=t[3],c=t[4],x=t[5],g=t[6],h=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=o*n+c*r,s[1]=a*n+x*r,s[2]=u*n+g*r,s[3]=p*n+h*r,s[4]=c*n-o*r,s[5]=x*n-a*r,s[6]=g*n-u*r,s[7]=h*n-p*r,s}},3668:function(d){d.exports=function(s,t,i){var r=i[0],n=i[1],o=i[2];return s[0]=t[0]*r,s[1]=t[1]*r,s[2]=t[2]*r,s[3]=t[3]*r,s[4]=t[4]*n,s[5]=t[5]*n,s[6]=t[6]*n,s[7]=t[7]*n,s[8]=t[8]*o,s[9]=t[9]*o,s[10]=t[10]*o,s[11]=t[11]*o,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},998:function(d){d.exports=function(s,t,i){var r,n,o,a,u,p,c,x,g,h,y,v,m=i[0],_=i[1],f=i[2];return t===s?(s[12]=t[0]*m+t[4]*_+t[8]*f+t[12],s[13]=t[1]*m+t[5]*_+t[9]*f+t[13],s[14]=t[2]*m+t[6]*_+t[10]*f+t[14],s[15]=t[3]*m+t[7]*_+t[11]*f+t[15]):(r=t[0],n=t[1],o=t[2],a=t[3],u=t[4],p=t[5],c=t[6],x=t[7],g=t[8],h=t[9],y=t[10],v=t[11],s[0]=r,s[1]=n,s[2]=o,s[3]=a,s[4]=u,s[5]=p,s[6]=c,s[7]=x,s[8]=g,s[9]=h,s[10]=y,s[11]=v,s[12]=r*m+u*_+g*f+t[12],s[13]=n*m+p*_+h*f+t[13],s[14]=o*m+c*_+y*f+t[14],s[15]=a*m+x*_+v*f+t[15]),s}},2142:function(d){d.exports=function(s,t){if(s===t){var i=t[1],r=t[2],n=t[3],o=t[6],a=t[7],u=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=i,s[6]=t[9],s[7]=t[13],s[8]=r,s[9]=o,s[11]=t[14],s[12]=n,s[13]=a,s[14]=u}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},4340:function(d,s,t){var i=t(957),r=t(7309);function n(u,p){for(var c=[0,0,0,0],x=0;x<4;++x)for(var g=0;g<4;++g)c[g]+=u[4*x+g]*p[x];return c}function o(u,p,c,x,g){for(var h=n(x,n(c,n(p,[u[0],u[1],u[2],1]))),y=0;y<3;++y)h[y]/=h[3];return[.5*g[0]*(1+h[0]),.5*g[1]*(1-h[1])]}function a(u,p){for(var c=[0,0,0],x=0;x<u.length;++x)for(var g=u[x],h=p[x],y=0;y<3;++y)c[y]+=h*g[y];return c}d.exports=function(u,p,c,x,g,h){if(u.length===1)return[0,u[0].slice()];for(var y=new Array(u.length),v=0;v<u.length;++v)y[v]=o(u[v],c,x,g,h);var m=0,_=1/0;for(v=0;v<y.length;++v){for(var f=0,S=0;S<2;++S)f+=Math.pow(y[v][S]-p[S],2);f<_&&(_=f,m=v)}var w=function(L,C){if(L.length===2){for(var P=0,z=0,G=0;G<2;++G)P+=Math.pow(C[G]-L[0][G],2),z+=Math.pow(C[G]-L[1][G],2);return(P=Math.sqrt(P))+(z=Math.sqrt(z))<1e-6?[1,0]:[z/(P+z),P/(z+P)]}if(L.length===3){var O=[0,0];return r(L[0],L[1],L[2],C,O),i(L,O)}return[]}(y,p),E=0;for(v=0;v<3;++v){if(w[v]<-.001||w[v]>1.0001)return null;E+=w[v]}return Math.abs(E-1)>.001?null:[m,a(u,w),w]}},2056:function(d,s,t){var i=t(6832),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),o=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),p=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),x=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),h=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),y=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:u,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:c,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:g,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:h,fragment:y,attributes:[{name:"position",type:"vec3"}]}},8116:function(d,s,t){var i=t(5158),r=t(5827),n=t(2944),o=t(8931),a=t(115),u=t(104),p=t(7437),c=t(5050),x=t(9156),g=t(7212),h=t(5306),y=t(2056),v=t(4340),m=y.meshShader,_=y.wireShader,f=y.pointShader,S=y.pickShader,w=y.pointPickShader,E=y.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(B,V,q,te,K,J,Y,W,Q,ne,re,ae,ue,pe,ge,_e,me,ve,Oe,Me,Te,se,oe,he,Ee,ke,be){this.gl=B,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=V,this.dirty=!0,this.triShader=q,this.lineShader=te,this.pointShader=K,this.pickShader=J,this.pointPickShader=Y,this.contourShader=W,this.trianglePositions=Q,this.triangleColors=re,this.triangleNormals=ue,this.triangleUVs=ae,this.triangleIds=ne,this.triangleVAO=pe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ge,this.edgeColors=me,this.edgeUVs=ve,this.edgeIds=_e,this.edgeVAO=Oe,this.edgeCount=0,this.pointPositions=Me,this.pointColors=se,this.pointUVs=oe,this.pointSizes=he,this.pointIds=Te,this.pointVAO=Ee,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ke,this.contourVAO=be,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var P=C.prototype;function z(B,V){if(!V||!V.length)return 1;for(var q=0;q<V.length;++q){if(V.length<2)return 1;if(V[q][0]===B)return V[q][1];if(V[q][0]>B&&q>0){var te=(V[q][0]-B)/(V[q][0]-V[q-1][0]);return V[q][1]*(1-te)+te*V[q-1][1]}}return 1}function G(B){var V=i(B,f.vertex,f.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V.attributes.pointSize.location=4,V}function O(B){var V=i(B,S.vertex,S.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V}function H(B){var V=i(B,w.vertex,w.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V.attributes.pointSize.location=4,V}function N(B){var V=i(B,E.vertex,E.fragment);return V.attributes.position.location=0,V}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(B){this.pickId=B},P.highlight=function(B){if(B&&this.contourEnable){for(var V=g(this.cells,this.intensity,B.intensity),q=V.cells,te=V.vertexIds,K=V.vertexWeights,J=q.length,Y=h.mallocFloat32(6*J),W=0,Q=0;Q<J;++Q)for(var ne=q[Q],re=0;re<2;++re){var ae=ne[0];ne.length===2&&(ae=ne[re]);for(var ue=te[ae][0],pe=te[ae][1],ge=K[ae],_e=1-ge,me=this.positions[ue],ve=this.positions[pe],Oe=0;Oe<3;++Oe)Y[W++]=ge*me[Oe]+_e*ve[Oe]}this.contourCount=W/3|0,this.contourPositions.update(Y.subarray(0,W)),h.free(Y)}else this.contourCount=0},P.update=function(B){B=B||{};var V=this.gl;this.dirty=!0,"contourEnable"in B&&(this.contourEnable=B.contourEnable),"contourColor"in B&&(this.contourColor=B.contourColor),"lineWidth"in B&&(this.lineWidth=B.lineWidth),"lightPosition"in B&&(this.lightPosition=B.lightPosition),this.hasAlpha=!1,"opacity"in B&&(this.opacity=B.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in B&&(this.opacityscale=B.opacityscale,this.hasAlpha=!0),"ambient"in B&&(this.ambientLight=B.ambient),"diffuse"in B&&(this.diffuseLight=B.diffuse),"specular"in B&&(this.specularLight=B.specular),"roughness"in B&&(this.roughness=B.roughness),"fresnel"in B&&(this.fresnel=B.fresnel),B.texture?(this.texture.dispose(),this.texture=o(V,B.texture)):B.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=V.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=V.LINEAR,this.texture.setPixels(function(Mt,Pt){for(var kt=x({colormap:Mt,nshades:256,format:"rgba"}),Ze=new Uint8Array(1024),Xe=0;Xe<256;++Xe){for(var Ve=kt[Xe],We=0;We<3;++We)Ze[4*Xe+We]=Ve[We];Ze[4*Xe+3]=Pt?255*z(Xe/255,Pt):255*Ve[3]}return c(Ze,[256,256,4],[4,0,1])}(B.colormap,this.opacityscale)),this.texture.generateMipmap());var q=B.cells,te=B.positions;if(te&&q){var K=[],J=[],Y=[],W=[],Q=[],ne=[],re=[],ae=[],ue=[],pe=[],ge=[],_e=[],me=[],ve=[];this.cells=q,this.positions=te;var Oe=B.vertexNormals,Me=B.cellNormals,Te=B.vertexNormalsEpsilon===void 0?1e-6:B.vertexNormalsEpsilon,se=B.faceNormalsEpsilon===void 0?1e-6:B.faceNormalsEpsilon;B.useFacetNormals&&!Me&&(Me=a.faceNormals(q,te,se)),Me||Oe||(Oe=a.vertexNormals(q,te,Te));var oe=B.vertexColors,he=B.cellColors,Ee=B.meshColor||[1,1,1,1],ke=B.vertexUVs,be=B.vertexIntensity,Ie=B.cellUVs,Fe=B.cellIntensity,ce=1/0,we=-1/0;if(!ke&&!Ie)if(be)if(B.vertexIntensityBounds)ce=+B.vertexIntensityBounds[0],we=+B.vertexIntensityBounds[1];else for(var ye=0;ye<be.length;++ye){var Ce=be[ye];ce=Math.min(ce,Ce),we=Math.max(we,Ce)}else if(Fe)if(B.cellIntensityBounds)ce=+B.cellIntensityBounds[0],we=+B.cellIntensityBounds[1];else for(ye=0;ye<Fe.length;++ye)Ce=Fe[ye],ce=Math.min(ce,Ce),we=Math.max(we,Ce);else for(ye=0;ye<te.length;++ye)Ce=te[ye][2],ce=Math.min(ce,Ce),we=Math.max(we,Ce);this.intensity=be||Fe||function(Mt){for(var Pt=Mt.length,kt=new Array(Pt),Ze=0;Ze<Pt;++Ze)kt[Ze]=Mt[Ze][2];return kt}(te),this.pickVertex=!(Fe||he);var Re=B.pointSizes,ze=B.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ye=0;ye<te.length;++ye)for(var He=te[ye],Ge=0;Ge<3;++Ge)!isNaN(He[Ge])&&isFinite(He[Ge])&&(this.bounds[0][Ge]=Math.min(this.bounds[0][Ge],He[Ge]),this.bounds[1][Ge]=Math.max(this.bounds[1][Ge],He[Ge]));var Je=0,ot=0,Qe=0;e:for(ye=0;ye<q.length;++ye){var vt=q[ye];switch(vt.length){case 1:for(He=te[mt=vt[0]],Ge=0;Ge<3;++Ge)if(isNaN(He[Ge])||!isFinite(He[Ge]))continue e;pe.push(He[0],He[1],He[2]),rt=oe?oe[mt]:he?he[ye]:Ee,this.opacityscale&&be?J.push(rt[0],rt[1],rt[2],this.opacity*z((be[mt]-ce)/(we-ce),this.opacityscale)):rt.length===3?ge.push(rt[0],rt[1],rt[2],this.opacity):(ge.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),it=ke?ke[mt]:be?[(be[mt]-ce)/(we-ce),0]:Ie?Ie[ye]:Fe?[(Fe[ye]-ce)/(we-ce),0]:[(He[2]-ce)/(we-ce),0],_e.push(it[0],it[1]),Re?me.push(Re[mt]):me.push(ze),ve.push(ye),Qe+=1;break;case 2:for(Ge=0;Ge<2;++Ge){He=te[mt=vt[Ge]];for(var xt=0;xt<3;++xt)if(isNaN(He[xt])||!isFinite(He[xt]))continue e}for(Ge=0;Ge<2;++Ge)He=te[mt=vt[Ge]],ne.push(He[0],He[1],He[2]),rt=oe?oe[mt]:he?he[ye]:Ee,this.opacityscale&&be?J.push(rt[0],rt[1],rt[2],this.opacity*z((be[mt]-ce)/(we-ce),this.opacityscale)):rt.length===3?re.push(rt[0],rt[1],rt[2],this.opacity):(re.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),it=ke?ke[mt]:be?[(be[mt]-ce)/(we-ce),0]:Ie?Ie[ye]:Fe?[(Fe[ye]-ce)/(we-ce),0]:[(He[2]-ce)/(we-ce),0],ae.push(it[0],it[1]),ue.push(ye);ot+=1;break;case 3:for(Ge=0;Ge<3;++Ge)for(He=te[mt=vt[Ge]],xt=0;xt<3;++xt)if(isNaN(He[xt])||!isFinite(He[xt]))continue e;for(Ge=0;Ge<3;++Ge){var mt,rt,it,Tt;He=te[mt=vt[2-Ge]],K.push(He[0],He[1],He[2]),(rt=oe?oe[mt]:he?he[ye]:Ee)?this.opacityscale&&be?J.push(rt[0],rt[1],rt[2],this.opacity*z((be[mt]-ce)/(we-ce),this.opacityscale)):rt.length===3?J.push(rt[0],rt[1],rt[2],this.opacity):(J.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),it=ke?ke[mt]:be?[(be[mt]-ce)/(we-ce),0]:Ie?Ie[ye]:Fe?[(Fe[ye]-ce)/(we-ce),0]:[(He[2]-ce)/(we-ce),0],W.push(it[0],it[1]),Tt=Oe?Oe[mt]:Me[ye],Y.push(Tt[0],Tt[1],Tt[2]),Q.push(ye)}Je+=1}}this.pointCount=Qe,this.edgeCount=ot,this.triangleCount=Je,this.pointPositions.update(pe),this.pointColors.update(ge),this.pointUVs.update(_e),this.pointSizes.update(me),this.pointIds.update(new Uint32Array(ve)),this.edgePositions.update(ne),this.edgeColors.update(re),this.edgeUVs.update(ae),this.edgeIds.update(new Uint32Array(ue)),this.trianglePositions.update(K),this.triangleColors.update(J),this.triangleUVs.update(W),this.triangleNormals.update(Y),this.triangleIds.update(new Uint32Array(Q))}},P.drawTransparent=P.draw=function(B){B=B||{};for(var V=this.gl,q=B.model||L,te=B.view||L,K=B.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)J[0][Y]=Math.max(J[0][Y],this.clipBounds[0][Y]),J[1][Y]=Math.min(J[1][Y],this.clipBounds[1][Y]);var W={model:q,view:te,projection:K,inverseModel:L.slice(),clipBounds:J,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};W.inverseModel=p(W.inverseModel,W.model),V.disable(V.CULL_FACE),this.texture.bind(0);var Q=new Array(16);for(u(Q,W.view,W.model),u(Q,W.projection,Q),p(Q,Q),Y=0;Y<3;++Y)W.eyePosition[Y]=Q[12+Y]/Q[15];var ne,re=Q[15];for(Y=0;Y<3;++Y)re+=this.lightPosition[Y]*Q[4*Y+3];for(Y=0;Y<3;++Y){for(var ae=Q[12+Y],ue=0;ue<3;++ue)ae+=Q[4*ue+Y]*this.lightPosition[ue];W.lightPosition[Y]=ae/re}this.triangleCount>0&&((ne=this.triShader).bind(),ne.uniforms=W,this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ne=this.lineShader).bind(),ne.uniforms=W,this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ne=this.pointShader).bind(),ne.uniforms=W,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ne=this.contourShader).bind(),ne.uniforms=W,this.contourVAO.bind(),V.drawArrays(V.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(B){B=B||{};for(var V=this.gl,q=B.model||L,te=B.view||L,K=B.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)J[0][Y]=Math.max(J[0][Y],this.clipBounds[0][Y]),J[1][Y]=Math.min(J[1][Y],this.clipBounds[1][Y]);this._model=[].slice.call(q),this._view=[].slice.call(te),this._projection=[].slice.call(K),this._resolution=[V.drawingBufferWidth,V.drawingBufferHeight];var W,Q={model:q,view:te,projection:K,clipBounds:J,pickId:this.pickId/255};(W=this.pickShader).bind(),W.uniforms=Q,this.triangleCount>0&&(this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((W=this.pointPickShader).bind(),W.uniforms=Q,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(B){if(!B||B.id!==this.pickId)return null;for(var V=B.value[0]+256*B.value[1]+65536*B.value[2],q=this.cells[V],te=this.positions,K=new Array(q.length),J=0;J<q.length;++J)K[J]=te[q[J]];var Y=B.coord[0],W=B.coord[1];if(!this.pickVertex){var Q=this.positions[q[0]],ne=this.positions[q[1]],re=this.positions[q[2]],ae=[(Q[0]+ne[0]+re[0])/3,(Q[1]+ne[1]+re[1])/3,(Q[2]+ne[2]+re[2])/3];return{_cellCenter:!0,position:[Y,W],index:V,cell:q,cellId:V,intensity:this.intensity[V],dataCoordinate:ae}}var ue=v(K,[Y*this.pixelRatio,this._resolution[1]-W*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ue)return null;var pe=ue[2],ge=0;for(J=0;J<q.length;++J)ge+=pe[J]*this.intensity[q[J]];return{position:ue[1],index:q[ue[0]],cell:q,cellId:V,intensity:ge,dataCoordinate:this.positions[q[ue[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},d.exports=function(B,V){if(arguments.length===1&&(B=(V=B).gl),!(B.getExtension("OES_standard_derivatives")||B.getExtension("MOZ_OES_standard_derivatives")||B.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var q=function(Fe){var ce=i(Fe,m.vertex,m.fragment);return ce.attributes.position.location=0,ce.attributes.color.location=2,ce.attributes.uv.location=3,ce.attributes.normal.location=4,ce}(B),te=function(Fe){var ce=i(Fe,_.vertex,_.fragment);return ce.attributes.position.location=0,ce.attributes.color.location=2,ce.attributes.uv.location=3,ce}(B),K=G(B),J=O(B),Y=H(B),W=N(B),Q=o(B,c(new Uint8Array([255,255,255,255]),[1,1,4]));Q.generateMipmap(),Q.minFilter=B.LINEAR_MIPMAP_LINEAR,Q.magFilter=B.LINEAR;var ne=r(B),re=r(B),ae=r(B),ue=r(B),pe=r(B),ge=n(B,[{buffer:ne,type:B.FLOAT,size:3},{buffer:pe,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:re,type:B.FLOAT,size:4},{buffer:ae,type:B.FLOAT,size:2},{buffer:ue,type:B.FLOAT,size:3}]),_e=r(B),me=r(B),ve=r(B),Oe=r(B),Me=n(B,[{buffer:_e,type:B.FLOAT,size:3},{buffer:Oe,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:me,type:B.FLOAT,size:4},{buffer:ve,type:B.FLOAT,size:2}]),Te=r(B),se=r(B),oe=r(B),he=r(B),Ee=r(B),ke=n(B,[{buffer:Te,type:B.FLOAT,size:3},{buffer:Ee,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:B.FLOAT,size:4},{buffer:oe,type:B.FLOAT,size:2},{buffer:he,type:B.FLOAT,size:1}]),be=r(B),Ie=new C(B,Q,q,te,K,J,Y,W,ne,pe,re,ae,ue,ge,_e,Oe,me,ve,Me,Te,Ee,se,oe,he,ke,be,n(B,[{buffer:be,type:B.FLOAT,size:3}]));return Ie.update(V),Ie}},4554:function(d,s,t){d.exports=function(c){var x=c.gl;return new o(c,i(x,[0,0,0,1,1,0,1,1]),r(x,n.boxVert,n.lineFrag))};var i=t(5827),r=t(5158),n=t(2709);function o(c,x,g){this.plot=c,this.vbo=x,this.shader=g}var a,u,p=o.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawBox=(a=[0,0],u=[0,0],function(c,x,g,h,y){var v=this.plot,m=this.shader,_=v.gl;a[0]=c,a[1]=x,u[0]=g,u[1]=h,m.uniforms.lo=a,m.uniforms.hi=u,m.uniforms.color=y,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(d,s,t){d.exports=function(v){var m=v.gl;return new a(v,i(m),r(m,o.gridVert,o.gridFrag),r(m,o.tickVert,o.gridFrag))};var i=t(5827),r=t(5158),n=t(5070),o=t(2709);function a(v,m,_,f){this.plot=v,this.vbo=m,this.shader=_,this.tickShader=f,this.ticks=[[],[]]}function u(v,m){return v-m}var p,c,x,g,h,y=a.prototype;y.draw=(p=[0,0],c=[0,0],x=[0,0],function(){for(var v=this.plot,m=this.vbo,_=this.shader,f=this.ticks,S=v.gl,w=v._tickBounds,E=v.dataBox,L=v.viewBox,C=v.gridLineWidth,P=v.gridLineColor,z=v.gridLineEnable,G=v.pixelRatio,O=0;O<2;++O){var H=w[O],N=w[O+2]-H,B=.5*(E[O+2]+E[O]),V=E[O+2]-E[O];c[O]=2*N/V,p[O]=2*(H-B)/V}_.bind(),m.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=p,_.uniforms.dataScale=c;var q=0;for(O=0;O<2;++O){x[0]=x[1]=0,x[O]=1,_.uniforms.dataAxis=x,_.uniforms.lineWidth=C[O]/(L[O+2]-L[O])*G,_.uniforms.color=P[O];var te=6*f[O].length;z[O]&&te&&S.drawArrays(S.TRIANGLES,q,te),q+=te}}),y.drawTickMarks=function(){var v=[0,0],m=[0,0],_=[1,0],f=[0,1],S=[0,0],w=[0,0];return function(){for(var E=this.plot,L=this.vbo,C=this.tickShader,P=this.ticks,z=E.gl,G=E._tickBounds,O=E.dataBox,H=E.viewBox,N=E.pixelRatio,B=E.screenBox,V=B[2]-B[0],q=B[3]-B[1],te=H[2]-H[0],K=H[3]-H[1],J=0;J<2;++J){var Y=G[J],W=G[J+2]-Y,Q=.5*(O[J+2]+O[J]),ne=O[J+2]-O[J];m[J]=2*W/ne,v[J]=2*(Y-Q)/ne}m[0]*=te/V,v[0]*=te/V,m[1]*=K/q,v[1]*=K/q,C.bind(),L.bind(),C.attributes.dataCoord.pointer();var re=C.uniforms;re.dataShift=v,re.dataScale=m;var ae=E.tickMarkLength,ue=E.tickMarkWidth,pe=E.tickMarkColor,ge=6*P[0].length,_e=Math.min(n.ge(P[0],(O[0]-G[0])/(G[2]-G[0]),u),P[0].length),me=Math.min(n.gt(P[0],(O[2]-G[0])/(G[2]-G[0]),u),P[0].length),ve=0+6*_e,Oe=6*Math.max(0,me-_e),Me=Math.min(n.ge(P[1],(O[1]-G[1])/(G[3]-G[1]),u),P[1].length),Te=Math.min(n.gt(P[1],(O[3]-G[1])/(G[3]-G[1]),u),P[1].length),se=ge+6*Me,oe=6*Math.max(0,Te-Me);S[0]=2*(H[0]-ae[1])/V-1,S[1]=(H[3]+H[1])/q-1,w[0]=ae[1]*N/V,w[1]=ue[1]*N/q,oe&&(re.color=pe[1],re.tickScale=w,re.dataAxis=f,re.screenOffset=S,z.drawArrays(z.TRIANGLES,se,oe)),S[0]=(H[2]+H[0])/V-1,S[1]=2*(H[1]-ae[0])/q-1,w[0]=ue[0]*N/V,w[1]=ae[0]*N/q,Oe&&(re.color=pe[0],re.tickScale=w,re.dataAxis=_,re.screenOffset=S,z.drawArrays(z.TRIANGLES,ve,Oe)),S[0]=2*(H[2]+ae[3])/V-1,S[1]=(H[3]+H[1])/q-1,w[0]=ae[3]*N/V,w[1]=ue[3]*N/q,oe&&(re.color=pe[3],re.tickScale=w,re.dataAxis=f,re.screenOffset=S,z.drawArrays(z.TRIANGLES,se,oe)),S[0]=(H[2]+H[0])/V-1,S[1]=2*(H[3]+ae[2])/q-1,w[0]=ue[2]*N/V,w[1]=ae[2]*N/q,Oe&&(re.color=pe[2],re.tickScale=w,re.dataAxis=_,re.screenOffset=S,z.drawArrays(z.TRIANGLES,ve,Oe))}}(),y.update=(g=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1],function(v){for(var m=v.ticks,_=v.bounds,f=new Float32Array(18*(m[0].length+m[1].length)),S=(this.plot.zeroLineEnable,0),w=[[],[]],E=0;E<2;++E)for(var L=w[E],C=m[E],P=_[E],z=_[E+2],G=0;G<C.length;++G){var O=(C[G].x-P)/(z-P);L.push(O);for(var H=0;H<6;++H)f[S++]=O,f[S++]=g[H],f[S++]=h[H]}this.ticks=w,this.vbo.update(f)}),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(d,s,t){d.exports=function(c){var x=c.gl;return new o(c,i(x,[-1,-1,-1,1,1,-1,1,1]),r(x,n.lineVert,n.lineFrag))};var i=t(5827),r=t(5158),n=t(2709);function o(c,x,g){this.plot=c,this.vbo=x,this.shader=g}var a,u,p=o.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawLine=(a=[0,0],u=[0,0],function(c,x,g,h,y,v){var m=this.plot,_=this.shader,f=m.gl;a[0]=c,a[1]=x,u[0]=g,u[1]=h,_.uniforms.start=a,_.uniforms.end=u,_.uniforms.width=y*m.pixelRatio,_.uniforms.color=v,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(d,s,t){var i=t(6832),r=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);d.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(d,s,t){d.exports=function(m){var _=m.gl;return new u(m,i(_),r(_,a.textVert,a.textFrag))};var i=t(5827),r=t(5158),n=t(6946),o=t(5070),a=t(2709);function u(m,_,f){this.plot=m,this.vbo=_,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var p,c,x,g,h,y,v=u.prototype;v.drawTicks=(p=[0,0],c=[0,0],x=[0,0],function(m){var _=this.plot,f=this.shader,S=this.tickX[m],w=this.tickOffset[m],E=_.gl,L=_.viewBox,C=_.dataBox,P=_.screenBox,z=_.pixelRatio,G=_.tickEnable,O=_.tickPad,H=_.tickColor,N=_.tickAngle,B=_.labelEnable,V=_.labelPad,q=_.labelColor,te=_.labelAngle,K=this.labelOffset[m],J=this.labelCount[m],Y=o.lt(S,C[m]),W=o.le(S,C[m+2]);p[0]=p[1]=0,p[m]=1,c[m]=(L[2+m]+L[m])/(P[2+m]-P[m])-1;var Q=2/P[2+(1^m)]-P[1^m];c[1^m]=Q*L[1^m]-1,G[m]&&(c[1^m]-=Q*z*O[m],Y<W&&w[W]>w[Y]&&(f.uniforms.dataAxis=p,f.uniforms.screenOffset=c,f.uniforms.color=H[m],f.uniforms.angle=N[m],E.drawArrays(E.TRIANGLES,w[Y],w[W]-w[Y]))),B[m]&&J&&(c[1^m]-=Q*z*V[m],f.uniforms.dataAxis=x,f.uniforms.screenOffset=c,f.uniforms.color=q[m],f.uniforms.angle=te[m],E.drawArrays(E.TRIANGLES,K,J)),c[1^m]=Q*L[2+(1^m)]-1,G[m+2]&&(c[1^m]+=Q*z*O[m+2],Y<W&&w[W]>w[Y]&&(f.uniforms.dataAxis=p,f.uniforms.screenOffset=c,f.uniforms.color=H[m+2],f.uniforms.angle=N[m+2],E.drawArrays(E.TRIANGLES,w[Y],w[W]-w[Y]))),B[m+2]&&J&&(c[1^m]+=Q*z*V[m+2],f.uniforms.dataAxis=x,f.uniforms.screenOffset=c,f.uniforms.color=q[m+2],f.uniforms.angle=te[m+2],E.drawArrays(E.TRIANGLES,K,J))}),v.drawTitle=function(){var m=[0,0],_=[0,0];return function(){var f=this.plot,S=this.shader,w=f.gl,E=f.screenBox,L=f.titleCenter,C=f.titleAngle,P=f.titleColor,z=f.pixelRatio;if(this.titleCount){for(var G=0;G<2;++G)_[G]=2*(L[G]*z-E[G])/(E[2+G]-E[G])-1;S.bind(),S.uniforms.dataAxis=m,S.uniforms.screenOffset=_,S.uniforms.angle=C,S.uniforms.color=P,w.drawArrays(w.TRIANGLES,this.titleOffset,this.titleCount)}}}(),v.bind=(g=[0,0],h=[0,0],y=[0,0],function(){var m=this.plot,_=this.shader,f=m._tickBounds,S=m.dataBox,w=m.screenBox,E=m.viewBox;_.bind();for(var L=0;L<2;++L){var C=f[L],P=f[L+2]-C,z=.5*(S[L+2]+S[L]),G=S[L+2]-S[L],O=E[L],H=E[L+2]-O,N=w[L],B=w[L+2]-N;h[L]=2*P/G*H/B,g[L]=2*(C-z)/G*H/B}y[1]=2*m.pixelRatio/(w[3]-w[1]),y[0]=y[1]*(w[3]-w[1])/(w[2]-w[0]),_.uniforms.dataScale=h,_.uniforms.dataShift=g,_.uniforms.textScale=y,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),v.update=function(m){var _,f,S,w,E,L=[],C=m.ticks,P=m.bounds;for(E=0;E<2;++E){var z=[Math.floor(L.length/3)],G=[-1/0],O=C[E];for(_=0;_<O.length;++_){var H=O[_],N=H.x,B=H.text,V=H.font||"sans-serif";w=H.fontSize||12;for(var q=1/(P[E+2]-P[E]),te=P[E],K=B.split(`
`),J=0;J<K.length;J++)for(S=n(V,K[J]).data,f=0;f<S.length;f+=2)L.push(S[f]*w,-S[f+1]*w-J*w*1.2,(N-te)*q);z.push(Math.floor(L.length/3)),G.push(N)}this.tickOffset[E]=z,this.tickX[E]=G}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(L.length/3),S=n(m.labelFont[E],m.labels[E],{textAlign:"center"}).data,w=m.labelSize[E],_=0;_<S.length;_+=2)L.push(S[_]*w,-S[_+1]*w,0);this.labelCount[E]=Math.floor(L.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(L.length/3),S=n(m.titleFont,m.title).data,w=m.titleSize,_=0;_<S.length;_+=2)L.push(S[_]*w,-S[_+1]*w,0);this.titleCount=Math.floor(L.length/3)-this.titleOffset,this.vbo.update(L)},v.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(d,s,t){d.exports=function(g){var h=g.gl,y=new u(h,i(h,[h.drawingBufferWidth,h.drawingBufferHeight]));return y.grid=r(y),y.text=n(y),y.line=o(y),y.box=a(y),y.update(g),y};var i=t(2611),r=t(3016),n=t(5613),o=t(1154),a=t(4554);function u(g,h){this.gl=g,this.pickBuffer=h,this.screenBox=[0,0,g.drawingBufferWidth,g.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var p=u.prototype;function c(g){for(var h=g.slice(),y=0;y<h.length;++y)h[y]=h[y].slice();return h}function x(g,h){return g.x-h.x}p.setDirty=function(){this.dirty=this.pickDirty=!0},p.setOverlayDirty=function(){this.dirty=!0},p.nextDepthValue=function(){return this._depthCounter++/65536},p.draw=function(){var g=this.gl,h=this.screenBox,y=this.viewBox,v=this.dataBox,m=this.pixelRatio,_=this.grid,f=this.line,S=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,g.bindFramebuffer(g.FRAMEBUFFER,null),g.enable(g.SCISSOR_TEST),g.disable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.depthMask(!1),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD,g.FUNC_ADD),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),this.borderColor){g.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]);var E=this.borderColor;g.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT)}g.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),g.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var L=this.backgroundColor;g.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),g.clear(g.COLOR_BUFFER_BIT),_.draw();var C=this.zeroLineEnable,P=this.zeroLineColor,z=this.zeroLineWidth;if(C[0]||C[1]){f.bind();for(var G=0;G<2;++G)if(C[G]&&v[G]<=0&&v[G+2]>=0){var O=h[G]-v[G]*(h[G+2]-h[G])/(v[G+2]-v[G]);G===0?f.drawLine(O,h[1],O,h[3],z[G],P[G]):f.drawLine(h[0],O,h[2],O,z[G],P[G])}}for(G=0;G<w.length;++G)w[G].draw();g.viewport(h[0],h[1],h[2]-h[0],h[3]-h[1]),g.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]),this.grid.drawTickMarks(),f.bind();var H=this.borderLineEnable,N=this.borderLineWidth,B=this.borderLineColor;for(H[1]&&f.drawLine(y[0],y[1]-.5*N[1]*m,y[0],y[3]+.5*N[3]*m,N[1],B[1]),H[0]&&f.drawLine(y[0]-.5*N[0]*m,y[1],y[2]+.5*N[2]*m,y[1],N[0],B[0]),H[3]&&f.drawLine(y[2],y[1]-.5*N[1]*m,y[2],y[3]+.5*N[3]*m,N[3],B[3]),H[2]&&f.drawLine(y[0]-.5*N[0]*m,y[3],y[2]+.5*N[2]*m,y[3],N[2],B[2]),S.bind(),G=0;G<2;++G)S.drawTicks(G);this.titleEnable&&S.drawTitle();var V=this.overlays;for(G=0;G<V.length;++G)V[G].draw();g.disable(g.SCISSOR_TEST),g.disable(g.BLEND),g.depthMask(!0)}},p.drawPick=function(){if(!this.static){var g=this.pickBuffer;this.gl,this._pickTimeout=null,g.begin();for(var h=1,y=this.objects,v=0;v<y.length;++v)h=y[v].drawPick(h);g.end()}},p.pick=function(g,h){if(!this.static){var y=this.pixelRatio,v=this.pickPixelRatio,m=this.viewBox,_=0|Math.round((g-m[0]/y)*v),f=0|Math.round((h-m[1]/y)*v),S=this.pickBuffer.query(_,f,this.pickRadius);if(!S)return null;for(var w=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,L=0;L<E.length;++L){var C=E[L].pick(_,f,w);if(C)return C}return null}},p.setScreenBox=function(g){var h=this.screenBox,y=this.pixelRatio;h[0]=0|Math.round(g[0]*y),h[1]=0|Math.round(g[1]*y),h[2]=0|Math.round(g[2]*y),h[3]=0|Math.round(g[3]*y),this.setDirty()},p.setDataBox=function(g){var h=this.dataBox;(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3])&&(h[0]=g[0],h[1]=g[1],h[2]=g[2],h[3]=g[3],this.setDirty())},p.setViewBox=function(g){var h=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(g[0]*h),y[1]=0|Math.round(g[1]*h),y[2]=0|Math.round(g[2]*h),y[3]=0|Math.round(g[3]*h);var v=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((g[2]-g[0])*v),0|Math.round((g[3]-g[1])*v)],this.setDirty()},p.update=function(g){g=g||{};var h=this.gl;this.pixelRatio=g.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(g.screenBox||[0,0,h.drawingBufferWidth/y,h.drawingBufferHeight/y]),this.screenBox,this.setViewBox(g.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var v=this.viewBox,m=(v[2]-v[0])/(v[3]-v[1]);this.setDataBox(g.dataBox||[-10,-10/m,10,10/m]),this.borderColor=g.borderColor!==!1&&(g.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(g.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(g.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(g.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(g.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(g.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(g.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(g.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(g.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(g.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(g.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(g.titleCenter||[.5*(v[0]+v[2])/y,(v[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in g)||!!g.titleEnable,this.titleAngle=g.titleAngle||0,this.titleColor=(g.titleColor||[0,0,0,1]).slice(),this.labelPad=(g.labelPad||[15,15,15,15]).slice(),this.labelAngle=(g.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(g.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(g.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(g.tickPad||[15,15,15,15]).slice(),this.tickAngle=(g.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(g.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(g.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(g.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(g.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(g.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=g.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var S=0;S<2;++S){var w=_[S].slice(0);w.length!==0&&(w.sort(x),f[S]=Math.min(f[S],w[0].x),f[S+2]=Math.max(f[S+2],w[w.length-1].x))}this.grid.update({bounds:f,ticks:_}),this.text.update({bounds:f,ticks:_,labels:g.labels||["x","y"],labelSize:g.labelSize||[12,12],labelFont:g.labelFont||["sans-serif","sans-serif"],title:g.title||"",titleSize:g.titleSize||18,titleFont:g.titleFont||"sans-serif"}),this.static=!!g.static,this.setDirty()},p.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var g=this.objects.length-1;g>=0;--g)this.objects[g].dispose();for(this.objects.length=0,g=this.overlays.length-1;g>=0;--g)this.overlays[g].dispose();this.overlays.length=0,this.gl=null},p.addObject=function(g){this.objects.indexOf(g)<0&&(this.objects.push(g),this.setDirty())},p.removeObject=function(g){for(var h=this.objects,y=0;y<h.length;++y)if(h[y]===g){h.splice(y,1),this.setDirty();break}},p.addOverlay=function(g){this.overlays.indexOf(g)<0&&(this.overlays.push(g),this.setOverlayDirty())},p.removeOverlay=function(g){for(var h=this.overlays,y=0;y<h.length;++y)if(h[y]===g){h.splice(y,1),this.setOverlayDirty();break}}},4296:function(d,s,t){d.exports=function(p,c){p=p||document.body;var x=[.01,1/0];"distanceLimits"in(c=c||{})&&(x[0]=c.distanceLimits[0],x[1]=c.distanceLimits[1]),"zoomMin"in c&&(x[0]=c.zoomMin),"zoomMax"in c&&(x[1]=c.zoomMax);var g=r({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:x}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,v=p.clientWidth,m=p.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:g,element:p,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:g.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var f=i(),S=this.delay,w=f-2*S;g.idle(f-S),g.recalcMatrix(w),g.flush(f-(100+2*S));for(var E=!0,L=g.computedMatrix,C=0;C<16;++C)E=E&&h[C]===L[C],h[C]=L[C];var P=p.clientWidth===v&&p.clientHeight===m;return v=p.clientWidth,m=p.clientHeight,E?!P:(y=Math.exp(g.computedRadius[0]),!0)},lookAt:function(f,S,w){g.lookAt(g.lastT(),f,S,w)},rotate:function(f,S,w){g.rotate(g.lastT(),f,S,w)},pan:function(f,S,w){g.pan(g.lastT(),f,S,w)},translate:function(f,S,w){g.translate(g.lastT(),f,S,w)}};return Object.defineProperties(_,{matrix:{get:function(){return g.computedMatrix},set:function(f){return g.setMatrix(g.lastT(),f),g.computedMatrix},enumerable:!0},mode:{get:function(){return g.getMode()},set:function(f){var S=g.computedUp.slice(),w=g.computedEye.slice(),E=g.computedCenter.slice();if(g.setMode(f),f==="turntable"){var L=i();g._active.lookAt(L,w,E,S),g._active.lookAt(L+500,w,E,[0,0,1]),g._active.flush(L)}return g.getMode()},enumerable:!0},center:{get:function(){return g.computedCenter},set:function(f){return g.lookAt(g.lastT(),null,f),g.computedCenter},enumerable:!0},eye:{get:function(){return g.computedEye},set:function(f){return g.lookAt(g.lastT(),f),g.computedEye},enumerable:!0},up:{get:function(){return g.computedUp},set:function(f){return g.lookAt(g.lastT(),null,null,f),g.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(f){return g.setDistance(g.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return g.getDistanceLimits(x)},set:function(f){return g.setDistanceLimits(f),f},enumerable:!0}}),p.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function f(S,w,E,L){var C=_.keyBindingMode;if(C!==!1){var P=C==="rotate",z=C==="pan",G=C==="zoom",O=!!L.control,H=!!L.alt,N=!!L.shift,B=!!(1&S),V=!!(2&S),q=!!(4&S),te=1/p.clientHeight,K=te*(w-_._lastX),J=te*(E-_._lastY),Y=_.flipX?1:-1,W=_.flipY?1:-1,Q=Math.PI*_.rotateSpeed,ne=i();if(_._lastX!==-1&&_._lastY!==-1&&((P&&B&&!O&&!H&&!N||B&&!O&&!H&&N)&&g.rotate(ne,Y*Q*K,-W*Q*J,0),(z&&B&&!O&&!H&&!N||V||B&&O&&!H&&!N)&&g.pan(ne,-_.translateSpeed*K*y,_.translateSpeed*J*y,0),G&&B&&!O&&!H&&!N||q||B&&!O&&H&&!N)){var re=-_.zoomSpeed*J/window.innerHeight*(ne-g.lastT())*100;g.pan(ne,0,0,y*(Math.exp(re)-1))}return _._lastX=w,_._lastY=E,_._lastMods=L,!0}}_.mouseListener=n(p,f),p.addEventListener("touchstart",function(S){var w=a(S.changedTouches[0],p);f(0,w[0],w[1],_._lastMods),f(1,w[0],w[1],_._lastMods)},!!u&&{passive:!0}),p.addEventListener("touchmove",function(S){var w=a(S.changedTouches[0],p);f(1,w[0],w[1],_._lastMods),S.preventDefault()},!!u&&{passive:!1}),p.addEventListener("touchend",function(S){f(0,_._lastX,_._lastY,_._lastMods)},!!u&&{passive:!0}),_.wheelListener=o(p,function(S,w){if(_.keyBindingMode!==!1&&_.enableWheel){var E=_.flipX?1:-1,L=_.flipY?1:-1,C=i();if(Math.abs(S)>Math.abs(w))g.rotate(C,0,0,-S*E*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var P=-_.zoomSpeed*L*w/window.innerHeight*(C-g.lastT())/20;g.pan(C,0,0,y*(Math.exp(P)-1))}}},!0)},_.enableMouseListeners(),_};var i=t(8161),r=t(1152),n=t(6145),o=t(6475),a=t(2565),u=t(5233)},8245:function(d,s,t){var i=t(6832),r=t(5158),n=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),o=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);d.exports=function(a){return r(a,n,o,null,[{name:"position",type:"vec2"}])}},1059:function(d,s,t){var i=t(4296),r=t(7453),n=t(2771),o=t(6496),a=t(2611),u=t(4234),p=t(8126),c=t(6145),x=t(1120),g=t(5268),h=t(8245),y=t(2321)({tablet:!0,featureDetect:!0});function v(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(f){var S=Math.round(Math.log(Math.abs(f))/Math.log(10));if(S<0){var w=Math.round(Math.pow(10,-S));return Math.ceil(f*w)/w}return S>0?(w=Math.round(Math.pow(10,S)),Math.ceil(f/w)*w):Math.ceil(f)}function _(f){return typeof f!="boolean"||f}d.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var S=f.canvas;S||(S=document.createElement("canvas"),f.container?f.container.appendChild(S):document.body.appendChild(S));var w=f.gl;if(w||(f.glOptions&&(y=!!f.glOptions.preserveDrawingBuffer),w=function(Oe,Me){var Te=null;try{(Te=Oe.getContext("webgl",Me))||(Te=Oe.getContext("experimental-webgl",Me))}catch{return null}return Te}(S,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:y})),!w)throw new Error("webgl not supported");var E=f.bounds||[[-10,-10,-10],[10,10,10]],L=new v,C=u(w,w.drawingBufferWidth,w.drawingBufferHeight,{preferFloat:!y}),P=h(w),z=f.cameraObject&&f.cameraObject._ortho===!0||f.camera.projection&&f.camera.projection.type==="orthographic"||!1,G={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:z},O=f.axes||{},H=r(w,O);H.enable=!O.disable;var N=f.spikes||{},B=o(w,N),V=[],q=[],te=[],K=[],J=!0,Y=!0,W={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Q=(Y=!0,[w.drawingBufferWidth,w.drawingBufferHeight]),ne=f.cameraObject||i(S,G),re={gl:w,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:S,selection:L,camera:ne,axes:H,axesPixels:null,spikes:B,bounds:E,objects:V,shape:Q,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:_(f.autoResize),autoBounds:_(f.autoBounds),autoScale:!!f.autoScale,autoCenter:_(f.autoCenter),clipToBounds:_(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:W,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Oe){this.aspect[0]=Oe.x,this.aspect[1]=Oe.y,this.aspect[2]=Oe.z,Y=!0},setBounds:function(Oe,Me){this.bounds[0][Oe]=Me.min,this.bounds[1][Oe]=Me.max},setClearColor:function(Oe){this.clearColor=Oe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ae=[w.drawingBufferWidth/re.pixelRatio|0,w.drawingBufferHeight/re.pixelRatio|0];function ue(){if(!re._stopped&&re.autoResize){var Oe=S.parentNode,Me=1,Te=1;Oe&&Oe!==document.body?(Me=Oe.clientWidth,Te=Oe.clientHeight):(Me=window.innerWidth,Te=window.innerHeight);var se=0|Math.ceil(Me*re.pixelRatio),oe=0|Math.ceil(Te*re.pixelRatio);if(se!==S.width||oe!==S.height){S.width=se,S.height=oe;var he=S.style;he.position=he.position||"absolute",he.left="0px",he.top="0px",he.width=Me+"px",he.height=Te+"px",J=!0}}}function pe(){for(var Oe=V.length,Me=K.length,Te=0;Te<Me;++Te)te[Te]=0;e:for(Te=0;Te<Oe;++Te){var se=V[Te],oe=se.pickSlots;if(oe){for(var he=0;he<Me;++he)if(te[he]+oe<255){q[Te]=he,se.setPickBase(te[he]+1),te[he]+=oe;continue e}var Ee=a(w,Q);q[Te]=Me,K.push(Ee),te.push(oe),se.setPickBase(1),Me+=1}else q[Te]=-1}for(;Me>0&&te[Me-1]===0;)te.pop(),K.pop().dispose()}function ge(){if(re.contextLost)return!0;w.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}re.autoResize&&ue(),window.addEventListener("resize",ue),re.update=function(Oe){re._stopped||(J=!0,Y=!0)},re.add=function(Oe){re._stopped||(Oe.axes=H,V.push(Oe),q.push(-1),J=!0,Y=!0,pe())},re.remove=function(Oe){if(!re._stopped){var Me=V.indexOf(Oe);Me<0||(V.splice(Me,1),q.pop(),J=!0,Y=!0,pe())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",ue),S.removeEventListener("webglcontextlost",ge),re.mouseListener.enabled=!1,!re.contextLost)){H.dispose(),B.dispose();for(var Oe=0;Oe<V.length;++Oe)V[Oe].dispose();for(C.dispose(),Oe=0;Oe<K.length;++Oe)K[Oe].dispose();P.dispose(),w=null,H=null,B=null,V=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=c(S,function(Oe,Me,Te){if(!re._stopped){var se=K.length,oe=V.length,he=L.object;L.distance=1/0,L.mouse[0]=Me,L.mouse[1]=Te,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var Ee=!1;if(Oe&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(Y=!0),re._mouseRotating=!1;for(var ke=0;ke<se;++ke){var be=K[ke].query(Me,ae[1]-Te-1,re.pickRadius);if(be){if(be.distance>L.distance)continue;for(var Ie=0;Ie<oe;++Ie){var Fe=V[Ie];if(q[Ie]===ke){var ce=Fe.pick(be);ce&&(L.buttons=Oe,L.screen=be.coord,L.distance=be.distance,L.object=Fe,L.index=ce.distance,L.dataPosition=ce.position,L.dataCoordinate=ce.dataCoordinate,L.data=ce,Ee=!0)}}}}}he&&he!==L.object&&(he.highlight&&he.highlight(null),J=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),J=!0),(Ee=Ee||L.object!==he)&&re.onselect&&re.onselect(L),1&Oe&&!(1&re._prevButtons)&&re.onclick&&re.onclick(L),re._prevButtons=Oe}})},S.addEventListener("webglcontextlost",ge);var _e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],me=[_e[0].slice(),_e[1].slice()];function ve(){if(!ge()){ue();var Oe=re.camera.tick();W.view=re.camera.matrix,J=J||Oe,Y=Y||Oe,H.pixelRatio=re.pixelRatio,B.pixelRatio=re.pixelRatio;var Me=V.length,Te=_e[0],se=_e[1];Te[0]=Te[1]=Te[2]=1/0,se[0]=se[1]=se[2]=-1/0;for(var oe=0;oe<Me;++oe){(ze=V[oe]).pixelRatio=re.pixelRatio,ze.axes=re.axes,J=J||!!ze.dirty,Y=Y||!!ze.dirty;var he=ze.bounds;if(he)for(var Ee=he[0],ke=he[1],be=0;be<3;++be)Te[be]=Math.min(Te[be],Ee[be]),se[be]=Math.max(se[be],ke[be])}var Ie=re.bounds;if(re.autoBounds)for(be=0;be<3;++be){if(se[be]<Te[be])Te[be]=-1,se[be]=1;else{Te[be]===se[be]&&(Te[be]-=1,se[be]+=1);var Fe=.05*(se[be]-Te[be]);Te[be]=Te[be]-Fe,se[be]=se[be]+Fe}Ie[0][be]=Te[be],Ie[1][be]=se[be]}var ce=!1;for(be=0;be<3;++be)ce=ce||me[0][be]!==Ie[0][be]||me[1][be]!==Ie[1][be],me[0][be]=Ie[0][be],me[1][be]=Ie[1][be];if(Y=Y||ce,J=J||ce){if(ce){var we=[0,0,0];for(oe=0;oe<3;++oe)we[oe]=m((Ie[1][oe]-Ie[0][oe])/10);H.autoTicks?H.update({bounds:Ie,tickSpacing:we}):H.update({bounds:Ie})}var ye=w.drawingBufferWidth,Ce=w.drawingBufferHeight;for(Q[0]=ye,Q[1]=Ce,ae[0]=0|Math.max(ye/re.pixelRatio,1),ae[1]=0|Math.max(Ce/re.pixelRatio,1),function(He,Ge){var Je=He.bounds,ot=He.cameraParams,Qe=ot.projection,vt=ot.model,xt=He.gl.drawingBufferWidth,mt=He.gl.drawingBufferHeight,rt=He.zNear,it=He.zFar,Tt=He.fovy,Mt=xt/mt;Ge?(g(Qe,-Mt,Mt,-1,1,rt,it),ot._ortho=!0):(x(Qe,Tt,Mt,rt,it),ot._ortho=!1);for(var Pt=0;Pt<16;++Pt)vt[Pt]=0;vt[15]=1;var kt=0;for(Pt=0;Pt<3;++Pt)kt=Math.max(kt,Je[1][Pt]-Je[0][Pt]);for(Pt=0;Pt<3;++Pt)He.autoScale?vt[5*Pt]=He.aspect[Pt]/(Je[1][Pt]-Je[0][Pt]):vt[5*Pt]=1/kt,He.autoCenter&&(vt[12+Pt]=.5*-vt[5*Pt]*(Je[0][Pt]+Je[1][Pt]))}(re,z),oe=0;oe<Me;++oe)(ze=V[oe]).axesBounds=Ie,re.clipToBounds&&(ze.clipBounds=Ie);L.object&&(re.snapToData?B.position=L.dataCoordinate:B.position=L.dataPosition,B.bounds=Ie),Y&&(Y=!1,function(){if(!ge()){w.colorMask(!0,!0,!0,!0),w.depthMask(!0),w.disable(w.BLEND),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL);for(var He=V.length,Ge=K.length,Je=0;Je<Ge;++Je){var ot=K[Je];ot.shape=ae,ot.begin();for(var Qe=0;Qe<He;++Qe)if(q[Qe]===Je){var vt=V[Qe];vt.drawPick&&(vt.pixelRatio=1,vt.drawPick(W))}ot.end()}}}()),re.axesPixels=n(re.axes,W,ye,Ce),re.onrender&&re.onrender(),w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,ye,Ce),re.clearRGBA(),w.depthMask(!0),w.colorMask(!0,!0,!0,!0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.disable(w.BLEND),w.disable(w.CULL_FACE);var Re=!1;for(H.enable&&(Re=Re||H.isTransparent(),H.draw(W)),B.axes=H,L.object&&B.draw(W),w.disable(w.CULL_FACE),oe=0;oe<Me;++oe)(ze=V[oe]).axes=H,ze.pixelRatio=re.pixelRatio,ze.isOpaque&&ze.isOpaque()&&ze.draw(W),ze.isTransparent&&ze.isTransparent()&&(Re=!0);if(Re){for(C.shape=Q,C.bind(),w.clear(w.DEPTH_BUFFER_BIT),w.colorMask(!1,!1,!1,!1),w.depthMask(!0),w.depthFunc(w.LESS),H.enable&&H.isTransparent()&&H.drawTransparent(W),oe=0;oe<Me;++oe)(ze=V[oe]).isOpaque&&ze.isOpaque()&&ze.draw(W);for(w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.colorMask(!0,!0,!0,!0),w.depthMask(!1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),H.isTransparent()&&H.drawTransparent(W),oe=0;oe<Me;++oe){var ze;(ze=V[oe]).isTransparent&&ze.isTransparent()&&ze.drawTransparent(W)}w.bindFramebuffer(w.FRAMEBUFFER,null),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.disable(w.DEPTH_TEST),P.bind(),C.color[0].bind(0),P.uniforms.accumBuffer=0,p(w),w.disable(w.BLEND)}for(J=!1,oe=0;oe<Me;++oe)V[oe].dirty=!1}}}return re.enableMouseListeners(),function Oe(){re._stopped||re.contextLost||(ve(),requestAnimationFrame(Oe))}(),re.redraw=function(){re._stopped||(J=!0,ve())},re},createCamera:i}},8023:function(d,s,t){var i=t(6832);s.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(d,s,t){var i=t(5158),r=t(5827),n=t(5306),o=t(8023);function a(x,g,h,y,v){this.plot=x,this.offsetBuffer=g,this.pickBuffer=h,this.shader=y,this.pickShader=v,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}d.exports=function(x,g){var h=x.gl,y=new a(x,r(h),r(h),i(h,o.pointVertex,o.pointFragment),i(h,o.pickVertex,o.pickFragment));return y.update(g),x.addObject(y),y};var u,p,c=a.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(x){var g;function h(w,E){return w in x?x[w]:E}x=x||{},this.sizeMin=h("sizeMin",.5),this.sizeMax=h("sizeMax",20),this.color=h("color",[1,0,0,1]).slice(),this.areaRatio=h("areaRatio",1),this.borderColor=h("borderColor",[0,0,0,1]).slice(),this.blend=h("blend",!1);var y=x.positions.length>>>1,v=x.positions instanceof Float32Array,m=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=y,_=x.positions,f=v?_:n.mallocFloat32(_.length),S=m?x.idToIndex:n.mallocInt32(y);if(v||f.set(_),!m)for(f.set(_),g=0;g<y;g++)S[g]=g;this.points=_,this.offsetBuffer.update(f),this.pickBuffer.update(S),v||n.free(f),m||n.free(S),this.pointCount=y,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(x){var g=x!==void 0,h=g?this.pickShader:this.shader,y=this.plot.gl,v=this.plot.dataBox;if(this.pointCount===0)return x;var m=v[2]-v[0],_=v[3]-v[1],f=function(L,C){var P,z=0,G=L.length>>>1;for(P=0;P<G;P++){var O=L[2*P],H=L[2*P+1];O>=C[0]&&O<=C[2]&&H>=C[1]&&H<=C[3]&&z++}return z}(this.points,v),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));u[0]=2/m,u[4]=2/_,u[6]=-2*v[0]/m-1,u[7]=-2*v[1]/_-1,this.offsetBuffer.bind(),h.bind(),h.attributes.position.pointer(),h.uniforms.matrix=u,h.uniforms.color=this.color,h.uniforms.borderColor=this.borderColor,h.uniforms.pointCloud=S<5,h.uniforms.pointSize=S,h.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),g&&(p[0]=255&x,p[1]=x>>8&255,p[2]=x>>16&255,p[3]=x>>24&255,this.pickBuffer.bind(),h.attributes.pickId.pointer(y.UNSIGNED_BYTE),h.uniforms.pickOffset=p,this.pickOffset=x);var w=y.getParameter(y.BLEND),E=y.getParameter(y.DITHER);return w&&!this.blend&&y.disable(y.BLEND),E&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),w&&!this.blend&&y.enable(y.BLEND),E&&y.enable(y.DITHER),x+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(x,g,h){var y=this.pickOffset,v=this.pointCount;if(h<y||h>=y+v)return null;var m=h-y,_=this.points;return{object:this,pointId:m,dataCoord:[_[2*m],_[2*m+1]]}}},6093:function(d){d.exports=function(s,t,i,r){var n,o,a,u,p,c=t[0],x=t[1],g=t[2],h=t[3],y=i[0],v=i[1],m=i[2],_=i[3];return(o=c*y+x*v+g*m+h*_)<0&&(o=-o,y=-y,v=-v,m=-m,_=-_),1-o>1e-6?(n=Math.acos(o),a=Math.sin(n),u=Math.sin((1-r)*n)/a,p=Math.sin(r*n)/a):(u=1-r,p=r),s[0]=u*c+p*y,s[1]=u*x+p*v,s[2]=u*g+p*m,s[3]=u*h+p*_,s}},8240:function(d){d.exports=function(s){return s||s===0?s.toString():""}},4123:function(d,s,t){var i=t(875);d.exports=function(n,o,a){var u=r[o];if(u||(u=r[o]={}),n in u)return u[n];var p={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},c=i(n,p);p.triangles=!1;var x,g,h=i(n,p);if(a&&a!==1){for(x=0;x<c.positions.length;++x)for(g=0;g<c.positions[x].length;++g)c.positions[x][g]/=a;for(x=0;x<h.positions.length;++x)for(g=0;g<h.positions[x].length;++g)h.positions[x][g]/=a}var y=[[1/0,1/0],[-1/0,-1/0]],v=h.positions.length;for(x=0;x<v;++x){var m=h.positions[x];for(g=0;g<2;++g)y[0][g]=Math.min(y[0][g],m[g]),y[1][g]=Math.max(y[1][g],m[g])}return u[n]=[c,h,y]};var r={}},9282:function(d,s,t){var i=t(5158),r=t(6832),n=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),o=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),p=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:n,fragment:u,attributes:c},g={vertex:o,fragment:u,attributes:c},h={vertex:a,fragment:u,attributes:c},y={vertex:n,fragment:p,attributes:c},v={vertex:o,fragment:p,attributes:c},m={vertex:a,fragment:p,attributes:c};function _(f,S){var w=i(f,S),E=w.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,w}s.createPerspective=function(f){return _(f,x)},s.createOrtho=function(f){return _(f,g)},s.createProject=function(f){return _(f,h)},s.createPickPerspective=function(f){return _(f,y)},s.createPickOrtho=function(f){return _(f,v)},s.createPickProject=function(f){return _(f,m)}},2182:function(d,s,t){var i=t(3596),r=t(5827),n=t(2944),o=t(5306),a=t(104),u=t(9282),p=t(4123),c=t(8240),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(q,te){var K=q[0],J=q[1],Y=q[2],W=q[3];return q[0]=te[0]*K+te[4]*J+te[8]*Y+te[12]*W,q[1]=te[1]*K+te[5]*J+te[9]*Y+te[13]*W,q[2]=te[2]*K+te[6]*J+te[10]*Y+te[14]*W,q[3]=te[3]*K+te[7]*J+te[11]*Y+te[15]*W,q}function h(q,te,K,J){return g(J,J),g(J,J),g(J,J)}function y(q,te){this.index=q,this.dataCoordinate=this.position=te}function v(q){return q===!0||q>1?1:q}function m(q,te,K,J,Y,W,Q,ne,re,ae,ue,pe){this.gl=q,this.pixelRatio=1,this.shader=te,this.orthoShader=K,this.projectShader=J,this.pointBuffer=Y,this.colorBuffer=W,this.glyphBuffer=Q,this.idBuffer=ne,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ae,this.pickOrthoShader=ue,this.pickProjectShader=pe,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}d.exports=function(q){var te=q.gl,K=u.createPerspective(te),J=u.createOrtho(te),Y=u.createProject(te),W=u.createPickPerspective(te),Q=u.createPickOrtho(te),ne=u.createPickProject(te),re=r(te),ae=r(te),ue=r(te),pe=r(te),ge=new m(te,K,J,Y,re,ae,ue,pe,n(te,[{buffer:re,size:3,type:te.FLOAT},{buffer:ae,size:4,type:te.FLOAT},{buffer:ue,size:2,type:te.FLOAT},{buffer:pe,size:4,type:te.UNSIGNED_BYTE,normalized:!0}]),W,Q,ne);return ge.update(q),ge};var _=m.prototype;_.pickSlots=1,_.setPickBase=function(q){this.pickId=q},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&!this.projectHasAlpha)return!0;return!1};var f=[0,0],S=[0,0,0],w=[0,0,0],E=[0,0,0,1],L=[0,0,0,1],C=x.slice(),P=[0,0,0],z=[[0,0,0],[0,0,0]];function G(q){return q[0]=q[1]=q[2]=0,q}function O(q,te){return q[0]=te[0],q[1]=te[1],q[2]=te[2],q[3]=1,q}function H(q,te,K,J){return q[0]=te[0],q[1]=te[1],q[2]=te[2],q[K]=J,q}var N=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function B(q,te,K,J,Y,W,Q){var ne=K.gl;if((W===K.projectHasAlpha||Q)&&function(ae,ue,pe,ge){var _e,me=ue.axesProject,ve=ue.gl,Oe=ae.uniforms,Me=pe.model||x,Te=pe.view||x,se=pe.projection||x,oe=ue.axesBounds,he=function(Je){for(var ot=z,Qe=0;Qe<2;++Qe)for(var vt=0;vt<3;++vt)ot[Qe][vt]=Math.max(Math.min(Je[Qe][vt],1e8),-1e8);return ot}(ue.clipBounds);_e=ue.axes&&ue.axes.lastCubeProps?ue.axes.lastCubeProps.axis:[1,1,1],f[0]=2/ve.drawingBufferWidth,f[1]=2/ve.drawingBufferHeight,ae.bind(),Oe.view=Te,Oe.projection=se,Oe.screenSize=f,Oe.highlightId=ue.highlightId,Oe.highlightScale=ue.highlightScale,Oe.clipBounds=he,Oe.pickGroup=ue.pickId/255,Oe.pixelRatio=ge;for(var Ee=0;Ee<3;++Ee)if(me[Ee]){Oe.scale=ue.projectScale[Ee],Oe.opacity=ue.projectOpacity[Ee];for(var ke=C,be=0;be<16;++be)ke[be]=0;for(be=0;be<4;++be)ke[5*be]=1;ke[5*Ee]=0,_e[Ee]<0?ke[12+Ee]=oe[0][Ee]:ke[12+Ee]=oe[1][Ee],a(ke,Me,ke),Oe.model=ke;var Ie=(Ee+1)%3,Fe=(Ee+2)%3,ce=G(S),we=G(w);ce[Ie]=1,we[Fe]=1;var ye=h(0,0,0,O(E,ce)),Ce=h(0,0,0,O(L,we));if(Math.abs(ye[1])>Math.abs(Ce[1])){var Re=ye;ye=Ce,Ce=Re,Re=ce,ce=we,we=Re;var ze=Ie;Ie=Fe,Fe=ze}ye[0]<0&&(ce[Ie]=-1),Ce[1]>0&&(we[Fe]=-1);var He=0,Ge=0;for(be=0;be<4;++be)He+=Math.pow(Me[4*Ie+be],2),Ge+=Math.pow(Me[4*Fe+be],2);ce[Ie]/=Math.sqrt(He),we[Fe]/=Math.sqrt(Ge),Oe.axes[0]=ce,Oe.axes[1]=we,Oe.fragClipBounds[0]=H(P,he[0],Ee,-1e8),Oe.fragClipBounds[1]=H(P,he[1],Ee,1e8),ue.vao.bind(),ue.vao.draw(ve.TRIANGLES,ue.vertexCount),ue.lineWidth>0&&(ve.lineWidth(ue.lineWidth*ge),ue.vao.draw(ve.LINES,ue.lineVertexCount,ue.vertexCount)),ue.vao.unbind()}}(te,K,J,Y),W===K.hasAlpha||Q){q.bind();var re=q.uniforms;re.model=J.model||x,re.view=J.view||x,re.projection=J.projection||x,f[0]=2/ne.drawingBufferWidth,f[1]=2/ne.drawingBufferHeight,re.screenSize=f,re.highlightId=K.highlightId,re.highlightScale=K.highlightScale,re.fragClipBounds=N,re.clipBounds=K.axes.bounds,re.opacity=K.opacity,re.pickGroup=K.pickId/255,re.pixelRatio=Y,K.vao.bind(),K.vao.draw(ne.TRIANGLES,K.vertexCount),K.lineWidth>0&&(ne.lineWidth(K.lineWidth*Y),K.vao.draw(ne.LINES,K.lineVertexCount,K.vertexCount)),K.vao.unbind()}}function V(q,te,K,J){var Y;Y=Array.isArray(q)?te<q.length?q[te]:void 0:q,Y=c(Y);var W=!0;i(Y)&&(Y="",W=!1);var Q=p(Y,K,J);return{mesh:Q[0],lines:Q[1],bounds:Q[2],visible:W}}_.draw=function(q){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,q,this.pixelRatio,!1,!1)},_.drawTransparent=function(q){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,q,this.pixelRatio,!0,!1)},_.drawPick=function(q){B(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,q,1,!0,!0)},_.pick=function(q){if(!q||q.id!==this.pickId)return null;var te=q.value[2]+(q.value[1]<<8)+(q.value[0]<<16);if(te>=this.pointCount||te<0)return null;var K=this.points[te],J=this._selectResult;J.index=te;for(var Y=0;Y<3;++Y)J.position[Y]=J.dataCoordinate[Y]=K[Y];return J},_.highlight=function(q){if(q){var te=q.index,K=255&te,J=te>>8&255,Y=te>>16&255;this.highlightId=[K/255,J/255,Y/255,0]}else this.highlightId=[1,1,1,1]},_.update=function(q){if("perspective"in(q=q||{})&&(this.useOrtho=!q.perspective),"orthographic"in q&&(this.useOrtho=!!q.orthographic),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"project"in q)if(Array.isArray(q.project))this.axesProject=q.project;else{var te=!!q.project;this.axesProject=[te,te,te]}if("projectScale"in q)if(Array.isArray(q.projectScale))this.projectScale=q.projectScale.slice();else{var K=+q.projectScale;this.projectScale=[K,K,K]}if(this.projectHasAlpha=!1,"projectOpacity"in q){Array.isArray(q.projectOpacity)?this.projectOpacity=q.projectOpacity.slice():(K=+q.projectOpacity,this.projectOpacity=[K,K,K]);for(var J=0;J<3;++J)this.projectOpacity[J]=v(this.projectOpacity[J]),this.projectOpacity[J]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in q&&(this.opacity=v(q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Y,W,Q=q.position,ne=q.font||"normal",re=q.alignment||[0,0];if(re.length===2)Y=re[0],W=re[1];else for(Y=[],W=[],J=0;J<re.length;++J)Y[J]=re[J][0],W[J]=re[J][1];var ae=[1/0,1/0,1/0],ue=[-1/0,-1/0,-1/0],pe=q.glyph,ge=q.color,_e=q.size,me=q.angle,ve=q.lineColor,Oe=-1,Me=0,Te=0,se=0;if(Q.length){se=Q.length;e:for(J=0;J<se;++J){for(var oe=Q[J],he=0;he<3;++he)if(isNaN(oe[he])||!isFinite(oe[he]))continue e;var Ee=(ot=V(pe,J,ne,this.pixelRatio)).mesh,ke=ot.lines,be=ot.bounds;Me+=3*Ee.cells.length,Te+=2*ke.edges.length}}var Ie=Me+Te,Fe=o.mallocFloat(3*Ie),ce=o.mallocFloat(4*Ie),we=o.mallocFloat(2*Ie),ye=o.mallocUint32(Ie);if(Ie>0){var Ce=0,Re=Me,ze=[0,0,0,1],He=[0,0,0,1],Ge=Array.isArray(ge)&&Array.isArray(ge[0]),Je=Array.isArray(ve)&&Array.isArray(ve[0]);e:for(J=0;J<se;++J){for(Oe+=1,oe=Q[J],he=0;he<3;++he){if(isNaN(oe[he])||!isFinite(oe[he]))continue e;ue[he]=Math.max(ue[he],oe[he]),ae[he]=Math.min(ae[he],oe[he])}Ee=(ot=V(pe,J,ne,this.pixelRatio)).mesh,ke=ot.lines,be=ot.bounds;var ot,Qe=ot.visible;if(Qe)if(Array.isArray(ge)){if((vt=Ge?J<ge.length?ge[J]:[0,0,0,0]:ge).length===3){for(he=0;he<3;++he)ze[he]=vt[he];ze[3]=1}else if(vt.length===4){for(he=0;he<4;++he)ze[he]=vt[he];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else ze[0]=ze[1]=ze[2]=0,ze[3]=1;else ze=[1,1,1,0];if(Qe)if(Array.isArray(ve)){var vt;if((vt=Je?J<ve.length?ve[J]:[0,0,0,0]:ve).length===3){for(he=0;he<3;++he)He[he]=vt[he];He[he]=1}else if(vt.length===4){for(he=0;he<4;++he)He[he]=vt[he];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];var xt=.5;Qe?Array.isArray(_e)?xt=J<_e.length?+_e[J]:12:_e?xt=+_e:this.useOrtho&&(xt=12):xt=0;var mt=0;Array.isArray(me)?mt=J<me.length?+me[J]:0:me&&(mt=+me);var rt=Math.cos(mt),it=Math.sin(mt);for(oe=Q[J],he=0;he<3;++he)ue[he]=Math.max(ue[he],oe[he]),ae[he]=Math.min(ae[he],oe[he]);var Tt=Y,Mt=W;Tt=0,Array.isArray(Y)?Tt=J<Y.length?Y[J]:0:Y&&(Tt=Y),Mt=0,Array.isArray(W)?Mt=J<W.length?W[J]:0:W&&(Mt=W);var Pt=[Tt*=Tt>0?1-be[0][0]:Tt<0?1+be[1][0]:1,Mt*=Mt>0?1-be[0][1]:Mt<0?1+be[1][1]:1],kt=Ee.cells||[],Ze=Ee.positions||[];for(he=0;he<kt.length;++he)for(var Xe=kt[he],Ve=0;Ve<3;++Ve){for(var We=0;We<3;++We)Fe[3*Ce+We]=oe[We];for(We=0;We<4;++We)ce[4*Ce+We]=ze[We];ye[Ce]=Oe;var at=Ze[Xe[Ve]];we[2*Ce]=xt*(rt*at[0]-it*at[1]+Pt[0]),we[2*Ce+1]=xt*(it*at[0]+rt*at[1]+Pt[1]),Ce+=1}for(kt=ke.edges,Ze=ke.positions,he=0;he<kt.length;++he)for(Xe=kt[he],Ve=0;Ve<2;++Ve){for(We=0;We<3;++We)Fe[3*Re+We]=oe[We];for(We=0;We<4;++We)ce[4*Re+We]=He[We];ye[Re]=Oe,at=Ze[Xe[Ve]],we[2*Re]=xt*(rt*at[0]-it*at[1]+Pt[0]),we[2*Re+1]=xt*(it*at[0]+rt*at[1]+Pt[1]),Re+=1}}}this.bounds=[ae,ue],this.points=Q,this.pointCount=Q.length,this.vertexCount=Me,this.lineVertexCount=Te,this.pointBuffer.update(Fe),this.colorBuffer.update(ce),this.glyphBuffer.update(we),this.idBuffer.update(ye),o.free(Fe),o.free(ce),o.free(we),o.free(ye)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(d,s,t){var i=t(6832);s.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(d,s,t){var i=t(5158),r=t(5827),n=t(1884);function o(u,p,c){this.plot=u,this.boxBuffer=p,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}d.exports=function(u,p){var c=u.gl,x=new o(u,r(c,[0,0,0,1,1,0,1,1]),i(c,n.boxVertex,n.boxFragment));return x.update(p),u.addOverlay(x),x};var a=o.prototype;a.draw=function(){if(this.enabled){var u=this.plot,p=this.selectBox,c=this.borderWidth,x=(this.innerFill,this.innerColor),g=(this.outerFill,this.outerColor),h=this.borderColor,y=u.box,v=u.screenBox,m=u.dataBox,_=u.viewBox,f=u.pixelRatio,S=(p[0]-m[0])*(_[2]-_[0])/(m[2]-m[0])+_[0],w=(p[1]-m[1])*(_[3]-_[1])/(m[3]-m[1])+_[1],E=(p[2]-m[0])*(_[2]-_[0])/(m[2]-m[0])+_[0],L=(p[3]-m[1])*(_[3]-_[1])/(m[3]-m[1])+_[1];if(S=Math.max(S,_[0]),w=Math.max(w,_[1]),E=Math.min(E,_[2]),L=Math.min(L,_[3]),!(E<S||L<w)){y.bind();var C=v[2]-v[0],P=v[3]-v[1];if(this.outerFill&&(y.drawBox(0,0,C,w,g),y.drawBox(0,w,S,L,g),y.drawBox(0,L,C,P,g),y.drawBox(E,w,C,L,g)),this.innerFill&&y.drawBox(S,w,E,L,x),c>0){var z=c*f;y.drawBox(S-z,w-z,E+z,w+z,h),y.drawBox(S-z,L-z,E+z,L+z,h),y.drawBox(S-z,w-z,S+z,L+z,h),y.drawBox(E-z,w-z,E+z,L+z,h)}}}},a.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},a.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(d,s,t){d.exports=function(c,x){var g=x[0],h=x[1];return new u(c,i(c,g,h,{}),r.mallocUint8(g*h*4))};var i=t(4234),r=t(5306),n=t(5050),o=t(2288).nextPow2;function a(c,x,g,h,y){this.coord=[c,x],this.id=g,this.value=h,this.distance=y}function u(c,x,g){this.gl=c,this.fbo=x,this.buffer=g,this._readTimeout=null;var h=this;this._readCallback=function(){h.gl&&(x.bind(),c.readPixels(0,0,x.shape[0],x.shape[1],c.RGBA,c.UNSIGNED_BYTE,h.buffer),h._readTimeout=null)}}var p=u.prototype;Object.defineProperty(p,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var x=this.fbo.shape[0],g=this.fbo.shape[1];if(g*x*4>this.buffer.length){r.free(this.buffer);for(var h=this.buffer=r.mallocUint8(o(g*x*4)),y=0;y<g*x*4;++y)h[y]=255}return c}}}),p.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},p.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},p.query=function(c,x,g){if(!this.gl)return null;var h=this.fbo.shape.slice();c|=0,x|=0,typeof g!="number"&&(g=1);var y=0|Math.min(Math.max(c-g,0),h[0]),v=0|Math.min(Math.max(c+g,0),h[0]),m=0|Math.min(Math.max(x-g,0),h[1]),_=0|Math.min(Math.max(x+g,0),h[1]);if(v<=y||_<=m)return null;var f=[v-y,_-m],S=n(this.buffer,[f[0],f[1],4],[4,4*h[0],1],4*(y+h[0]*m)),w=function(C,P,z){for(var G=1e8,O=-1,H=-1,N=C.shape[0],B=C.shape[1],V=0;V<N;V++)for(var q=0;q<B;q++){var te=C.get(V,q,0),K=C.get(V,q,1),J=C.get(V,q,2),Y=C.get(V,q,3);if(te<255||K<255||J<255||Y<255){var W=P-V,Q=z-q,ne=W*W+Q*Q;ne<G&&(G=ne,O=V,H=q)}}return[O,H,G]}(S.hi(f[0],f[1],1),g,g),E=w[0],L=w[1];return E<0||Math.pow(this.radius,2)<w[2]?null:new a(E+y|0,L+m|0,S.get(E,L,0),[S.get(E,L,1),S.get(E,L,2),S.get(E,L,3)],Math.sqrt(w[2]))},p.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(d,s,t){var i=t(9016),r=t(4280),n=t(3984),o=t(1628),a=t(2631),u=t(9068);function p(g){this.gl=g,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=p.prototype;function x(g,h){return g.name<h.name?-1:1}c.bind=function(){var g;this.program||this._relink();var h=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(h>y)for(g=y;g<h;g++)this.gl.enableVertexAttribArray(g);else if(y>h)for(g=h;g<y;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=h,this.gl.useProgram(this.program)},c.dispose=function(){for(var g=this.gl.lastAttribCount,h=0;h<g;h++)this.gl.disableVertexAttribArray(h);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(g,h,y,v){if(!h||arguments.length===1){var m=g;g=m.vertex,h=m.fragment,y=m.uniforms,v=m.attributes}var _=this,f=_.gl,S=_._vref;_._vref=o.shader(f,f.VERTEX_SHADER,g),S&&S.dispose(),_.vertShader=_._vref.shader;var w=this._fref;if(_._fref=o.shader(f,f.FRAGMENT_SHADER,h),w&&w.dispose(),_.fragShader=_._fref.shader,!y||!v){var E=f.createProgram();if(f.attachShader(E,_.fragShader),f.attachShader(E,_.vertShader),f.linkProgram(E),!f.getProgramParameter(E,f.LINK_STATUS)){var L=f.getProgramInfoLog(E);throw new u(L,"Error linking program:"+L)}y=y||a.uniforms(f,E),v=v||a.attributes(f,E),f.deleteProgram(E)}(v=v.slice()).sort(x);var C,P=[],z=[],G=[];for(C=0;C<v.length;++C){var O=v[C];if(O.type.indexOf("mat")>=0){for(var H=0|O.type.charAt(O.type.length-1),N=new Array(H),B=0;B<H;++B)N[B]=G.length,z.push(O.name+"["+B+"]"),typeof O.location=="number"?G.push(O.location+B):Array.isArray(O.location)&&O.location.length===H&&typeof O.location[B]=="number"?G.push(0|O.location[B]):G.push(-1);P.push({name:O.name,type:O.type,locations:N})}else P.push({name:O.name,type:O.type,locations:[G.length]}),z.push(O.name),typeof O.location=="number"?G.push(0|O.location):G.push(-1)}var V=0;for(C=0;C<G.length;++C)if(G[C]<0){for(;G.indexOf(V)>=0;)V+=1;G[C]=V}var q=new Array(y.length);function te(){_.program=o.program(f,_._vref,_._fref,z,G);for(var K=0;K<y.length;++K)q[K]=f.getUniformLocation(_.program,y[K].name)}te(),_._relink=te,_.types={uniforms:n(y),attributes:n(v)},_.attributes=r(f,_,P,G),Object.defineProperty(_,"uniforms",i(f,_,y,q))},d.exports=function(g,h,y,v,m){var _=new p(g);return _.update(h,y,v,m),_}},9068:function(d){function s(t,i,r){this.shortMessage=i||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(r?`
`+r:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,d.exports=s},4280:function(d,s,t){d.exports=function(p,c,x,g){for(var h={},y=0,v=x.length;y<v;++y){var m=x[y],_=m.name,f=m.type,S=m.locations;switch(f){case"bool":case"int":case"float":a(p,c,S[0],g,1,h,_);break;default:if(f.indexOf("vec")>=0){if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+f);a(p,c,S[0],g,w,h,_)}else{if(!(f.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+_+": "+f);var w;if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+f);u(p,c,S,g,w,h,_)}}}return h};var i=t(9068);function r(p,c,x,g,h,y){this._gl=p,this._wrapper=c,this._index=x,this._locations=g,this._dimension=h,this._constFunc=y}var n=r.prototype;n.pointer=function(p,c,x,g){var h=this,y=h._gl,v=h._locations[h._index];y.vertexAttribPointer(v,h._dimension,p||y.FLOAT,!!c,x||0,g||0),y.enableVertexAttribArray(v)},n.set=function(p,c,x,g){return this._constFunc(this._locations[this._index],p,c,x,g)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(p){return p!==this._locations[this._index]&&(this._locations[this._index]=0|p,this._wrapper.program=null),0|p}});var o=[function(p,c,x){return x.length===void 0?p.vertexAttrib1f(c,x):p.vertexAttrib1fv(c,x)},function(p,c,x,g){return x.length===void 0?p.vertexAttrib2f(c,x,g):p.vertexAttrib2fv(c,x)},function(p,c,x,g,h){return x.length===void 0?p.vertexAttrib3f(c,x,g,h):p.vertexAttrib3fv(c,x)},function(p,c,x,g,h,y){return x.length===void 0?p.vertexAttrib4f(c,x,g,h,y):p.vertexAttrib4fv(c,x)}];function a(p,c,x,g,h,y,v){var m=o[h],_=new r(p,c,x,g,h,m);Object.defineProperty(y,v,{set:function(f){return p.disableVertexAttribArray(g[x]),m(p,g[x],f),f},get:function(){return _},enumerable:!0})}function u(p,c,x,g,h,y,v){for(var m=new Array(h),_=new Array(h),f=0;f<h;++f)a(p,c,x[f],g,h,m,f),_[f]=m[f];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var L=0;L<h;++L)_[L].location=E[L];else for(L=0;L<h;++L)_[L].location=E+L;return E},get:function(){for(var E=new Array(h),L=0;L<h;++L)E[L]=g[x[L]];return E},enumerable:!0}),m.pointer=function(E,L,C,P){E=E||p.FLOAT,L=!!L,C=C||h*h,P=P||0;for(var z=0;z<h;++z){var G=g[x[z]];p.vertexAttribPointer(G,h,E,L,C,P+z*h),p.enableVertexAttribArray(G)}};var S=new Array(h),w=p["vertexAttrib"+h+"fv"];Object.defineProperty(y,v,{set:function(E){for(var L=0;L<h;++L){var C=g[x[L]];if(p.disableVertexAttribArray(C),Array.isArray(E[0]))w.call(p,C,E[L]);else{for(var P=0;P<h;++P)S[P]=E[h*L+P];w.call(p,C,S)}}return E},get:function(){return m},enumerable:!0})}},9016:function(d,s,t){var i=t(3984),r=t(9068);function n(a){return function(){return a}}function o(a,u){for(var p=new Array(a),c=0;c<a;++c)p[c]=u;return p}d.exports=function(a,u,p,c){function x(m){return function(_){for(var f=g("",m),S=0;S<f.length;++S){var w=f[S],E=w[0],L=w[1];if(c[L]){var C=_;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var P=E;if(E.indexOf(".")===0&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var z=P.indexOf("["),G=P.slice(0,z),O=P.slice(z+1,P.length-1);C=G?_[G][O]:_[O]}else C=_[P]}var H,N=p[L].type;switch(N){case"bool":case"int":case"sampler2D":case"samplerCube":a.uniform1i(c[L],C);break;case"float":a.uniform1f(c[L],C);break;default:var B=N.indexOf("vec");if(!(0<=B&&B<=1&&N.length===4+B)){if(N.indexOf("mat")===0&&N.length===4){if((H=N.charCodeAt(N.length-1)-48)<2||H>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+N);a["uniformMatrix"+H+"fv"](c[L],!1,C);break}throw new r("","Unknown uniform data type for "+name+": "+N)}if((H=N.charCodeAt(N.length-1)-48)<2||H>4)throw new r("","Invalid data type");switch(N.charAt(0)){case"b":case"i":a["uniform"+H+"iv"](c[L],C);break;case"v":a["uniform"+H+"fv"](c[L],C);break;default:throw new r("","Unrecognized data type for vector "+name+": "+N)}}}}}}function g(m,_){if(typeof _!="object")return[[m,_]];var f=[];for(var S in _){var w=_[S],E=m;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof w=="object"?f.push.apply(f,g(E,w)):f.push([E,w])}return f}function h(m,_,f){if(typeof f=="object"){var S=y(f);Object.defineProperty(m,_,{get:n(S),set:x(f),enumerable:!0,configurable:!1})}else c[f]?Object.defineProperty(m,_,{get:(w=f,function(E,L,C){return E.getUniform(L.program,C[w])}),set:x(f),enumerable:!0,configurable:!1}):m[_]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var L=E.indexOf("vec");if(0<=L&&L<=1&&E.length===4+L){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid data type");return E.charAt(0)==="b"?o(C,!1):o(C,0)}if(E.indexOf("mat")===0&&E.length===4){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return o(C*C,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(p[f].type);var w}function y(m){var _;if(Array.isArray(m)){_=new Array(m.length);for(var f=0;f<m.length;++f)h(_,f,m[f])}else for(var S in _={},m)h(_,S,m[S]);return _}var v=i(p,!0);return{get:n(y(v)),set:x(v),enumerable:!0,configurable:!0}}},3984:function(d){d.exports=function(s,t){for(var i={},r=0;r<s.length;++r)for(var n=s[r].name.split("."),o=i,a=0;a<n.length;++a){var u=n[a].split("[");if(u.length>1){u[0]in o||(o[u[0]]=[]),o=o[u[0]];for(var p=1;p<u.length;++p){var c=parseInt(u[p]);p<u.length-1||a<n.length-1?(c in o||(p<u.length-1?o[c]=[]:o[c]={}),o=o[c]):o[c]=t?r:s[r].type}}else a<n.length-1?(u[0]in o||(o[u[0]]={}),o=o[u[0]]):o[u[0]]=t?r:s[r].type}return i}},2631:function(d,s){s.uniforms=function(n,o){for(var a=n.getProgramParameter(o,n.ACTIVE_UNIFORMS),u=[],p=0;p<a;++p){var c=n.getActiveUniform(o,p);if(c){var x=r(n,c.type);if(c.size>1)for(var g=0;g<c.size;++g)u.push({name:c.name.replace("[0]","["+g+"]"),type:x});else u.push({name:c.name,type:x})}}return u},s.attributes=function(n,o){for(var a=n.getProgramParameter(o,n.ACTIVE_ATTRIBUTES),u=[],p=0;p<a;++p){var c=n.getActiveAttrib(o,p);c&&u.push({name:c.name,type:r(n,c.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function r(n,o){if(!i){var a=Object.keys(t);i={};for(var u=0;u<a.length;++u){var p=a[u];i[n[p]]=t[p]}}return i[o]}},1628:function(d,s,t){s.shader=function(x,g,h){return c(x).getShaderReference(g,h)},s.program=function(x,g,h,y,v){return c(x).getProgram(g,h,y,v)};var i=t(9068),r=t(3530),n=new(typeof WeakMap>"u"?t(4037):WeakMap),o=0;function a(x,g,h,y,v,m,_){this.id=x,this.src=g,this.type=h,this.shader=y,this.count=m,this.programs=[],this.cache=_}function u(x){this.gl=x,this.shaders=[{},{}],this.programs={}}a.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,g=x.gl,h=this.programs,y=0,v=h.length;y<v;++y){var m=x.programs[h[y]];m&&(delete x.programs[y],g.deleteProgram(m))}g.deleteShader(this.shader),delete x.shaders[this.type===g.FRAGMENT_SHADER|0][this.src]}};var p=u.prototype;function c(x){var g=n.get(x);return g||(g=new u(x),n.set(x,g)),g}p.getShaderReference=function(x,g){var h=this.gl,y=this.shaders[x===h.FRAGMENT_SHADER|0],v=y[g];if(v&&h.isShader(v.shader))v.count+=1;else{var m=function(_,f,S){var w=_.createShader(f);if(_.shaderSource(w,S),_.compileShader(w),!_.getShaderParameter(w,_.COMPILE_STATUS)){var E=_.getShaderInfoLog(w);try{var L=r(E,S,f)}catch(C){throw console.warn("Failed to format compiler error: "+C),new i(E,`Error compiling shader:
`+E)}throw new i(E,L.short,L.long)}return w}(h,x,g);v=y[g]=new a(o++,g,x,m,[],1,this)}return v},p.getProgram=function(x,g,h,y){var v=[x.id,g.id,h.join(":"),y.join(":")].join("@"),m=this.programs[v];return m&&this.gl.isProgram(m)||(this.programs[v]=m=function(_,f,S,w,E){var L=_.createProgram();_.attachShader(L,f),_.attachShader(L,S);for(var C=0;C<w.length;++C)_.bindAttribLocation(L,E[C],w[C]);if(_.linkProgram(L),!_.getProgramParameter(L,_.LINK_STATUS)){var P=_.getProgramInfoLog(L);throw new i(P,"Error linking program: "+P)}return L}(this.gl,x.shader,g.shader,h,y),x.programs.push(v),g.programs.push(v)),m}},3050:function(d){function s(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}d.exports=function(i,r){var n=new s(i);return n.update(r),i.addOverlay(n),n};var t=s.prototype;t.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,r=this.width,n=this.color,o=this.center,a=this.plot,u=a.line,p=a.dataBox,c=a.viewBox;if(u.bind(),p[0]<=o[0]&&o[0]<=p[2]&&p[1]<=o[1]&&o[1]<=p[3]){var x=c[0]+(o[0]-p[0])/(p[2]-p[0])*(c[2]-c[0]),g=c[1]+(o[1]-p[1])/(p[3]-p[1])*(c[3]-c[1]);i[0]&&u.drawLine(x,g,c[0],g,r[0],n[0]),i[1]&&u.drawLine(x,g,x,c[1],r[1],n[1]),i[2]&&u.drawLine(x,g,c[2],g,r[2],n[2]),i[3]&&u.drawLine(x,g,x,c[3],r[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},3540:function(d,s,t){var i=t(6832),r=t(5158),n=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),o=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);d.exports=function(a){return r(a,n,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(d,s,t){var i=t(5827),r=t(2944),n=t(3540);d.exports=function(g,h){var y=[];function v(w,E,L,C,P,z){var G=[w,E,L,0,0,0,1];G[C+3]=1,G[C]=P,y.push.apply(y,G),G[6]=-1,y.push.apply(y,G),G[C]=z,y.push.apply(y,G),y.push.apply(y,G),G[6]=1,y.push.apply(y,G),G[C]=P,y.push.apply(y,G)}v(0,0,0,0,0,1),v(0,0,0,1,0,1),v(0,0,0,2,0,1),v(1,0,0,1,-1,1),v(1,0,0,2,-1,1),v(0,1,0,0,-1,1),v(0,1,0,2,-1,1),v(0,0,1,0,-1,1),v(0,0,1,1,-1,1);var m=i(g,y),_=r(g,[{type:g.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:g.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:g.FLOAT,buffer:m,size:1,offset:24,stride:28}]),f=n(g);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var S=new a(g,m,_,f);return S.update(h),S};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function a(g,h,y,v){this.gl=g,this.buffer=h,this.vao=y,this.shader=v,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=a.prototype,p=[0,0,0],c=[0,0,0],x=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(g){},u.draw=function(g){var h=this.gl,y=this.vao,v=this.shader;y.bind(),v.bind();var m,_=g.model||o,f=g.view||o,S=g.projection||o;this.axes&&(m=this.axes.lastCubeProps.axis);for(var w=p,E=c,L=0;L<3;++L)m&&m[L]<0?(w[L]=this.bounds[0][L],E[L]=this.bounds[1][L]):(w[L]=this.bounds[1][L],E[L]=this.bounds[0][L]);for(x[0]=h.drawingBufferWidth,x[1]=h.drawingBufferHeight,v.uniforms.model=_,v.uniforms.view=f,v.uniforms.projection=S,v.uniforms.coordinates=[this.position,w,E],v.uniforms.colors=this.colors,v.uniforms.screenShape=x,L=0;L<3;++L)v.uniforms.lineWidth=this.lineWidth[L]*this.pixelRatio,this.enabled[L]&&(y.draw(h.TRIANGLES,6,6*L),this.drawSides[L]&&y.draw(h.TRIANGLES,12,18+12*L));y.unbind()},u.update=function(g){g&&("bounds"in g&&(this.bounds=g.bounds),"position"in g&&(this.position=g.position),"lineWidth"in g&&(this.lineWidth=g.lineWidth),"colors"in g&&(this.colors=g.colors),"enabled"in g&&(this.enabled=g.enabled),"drawSides"in g&&(this.drawSides=g.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(d,s,t){var i=t(6832),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),o=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(d,s,t){var i=t(2858),r=t(4020),n=["xyz","xzy","yxz","yzx","zxy","zyx"],o=function(x,g){var h,y=x.length;for(h=0;h<y;h++){var v=x[h];if(v===g)return h;if(v>g)return h-1}return h},a=function(x,g,h){return x<g?g:x>h?h:x},u=function(x){var g=1/0;x.sort(function(m,_){return m-_});for(var h=x.length,y=1;y<h;y++){var v=Math.abs(x[y]-x[y-1]);v<g&&(g=v)}return g};d.exports=function(x,g){var h=x.startingPositions,y=x.maxLength||1e3,v=x.tubeSize||1,m=x.absoluteTubeSize,_=x.gridFill||"+x+y+z",f={};_.indexOf("-x")!==-1&&(f.reversedX=!0),_.indexOf("-y")!==-1&&(f.reversedY=!0),_.indexOf("-z")!==-1&&(f.reversedZ=!0),f.filled=n.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var S=x.getVelocity||function(ve){return function(Oe,Me,Te){var se=Me.vectors,oe=Me.meshgrid,he=Oe[0],Ee=Oe[1],ke=Oe[2],be=oe[0].length,Ie=oe[1].length,Fe=oe[2].length,ce=o(oe[0],he),we=o(oe[1],Ee),ye=o(oe[2],ke),Ce=ce+1,Re=we+1,ze=ye+1;if(ce=a(ce,0,be-1),Ce=a(Ce,0,be-1),we=a(we,0,Ie-1),Re=a(Re,0,Ie-1),ye=a(ye,0,Fe-1),ze=a(ze,0,Fe-1),ce<0||we<0||ye<0||Ce>be-1||Re>Ie-1||ze>Fe-1)return i.create();var He,Ge,Je,ot,Qe,vt,xt=oe[0][ce],mt=oe[0][Ce],rt=oe[1][we],it=oe[1][Re],Tt=oe[2][ye],Mt=(he-xt)/(mt-xt),Pt=(Ee-rt)/(it-rt),kt=(ke-Tt)/(oe[2][ze]-Tt);switch(isFinite(Mt)||(Mt=.5),isFinite(Pt)||(Pt=.5),isFinite(kt)||(kt=.5),Te.reversedX&&(ce=be-1-ce,Ce=be-1-Ce),Te.reversedY&&(we=Ie-1-we,Re=Ie-1-Re),Te.reversedZ&&(ye=Fe-1-ye,ze=Fe-1-ze),Te.filled){case 5:Qe=ye,vt=ze,Je=we*Fe,ot=Re*Fe,He=ce*Fe*Ie,Ge=Ce*Fe*Ie;break;case 4:Qe=ye,vt=ze,He=ce*Fe,Ge=Ce*Fe,Je=we*Fe*be,ot=Re*Fe*be;break;case 3:Je=we,ot=Re,Qe=ye*Ie,vt=ze*Ie,He=ce*Ie*Fe,Ge=Ce*Ie*Fe;break;case 2:Je=we,ot=Re,He=ce*Ie,Ge=Ce*Ie,Qe=ye*Ie*be,vt=ze*Ie*be;break;case 1:He=ce,Ge=Ce,Qe=ye*be,vt=ze*be,Je=we*be*Fe,ot=Re*be*Fe;break;default:He=ce,Ge=Ce,Je=we*be,ot=Re*be,Qe=ye*be*Ie,vt=ze*be*Ie}var Ze=se[He+Je+Qe],Xe=se[He+Je+vt],Ve=se[He+ot+Qe],We=se[He+ot+vt],at=se[Ge+Je+Qe],et=se[Ge+Je+vt],De=se[Ge+ot+Qe],Be=se[Ge+ot+vt],nt=i.create(),tt=i.create(),dt=i.create(),ht=i.create();i.lerp(nt,Ze,at,Mt),i.lerp(tt,Xe,et,Mt),i.lerp(dt,Ve,De,Mt),i.lerp(ht,We,Be,Mt);var gt=i.create(),ut=i.create();i.lerp(gt,nt,dt,Pt),i.lerp(ut,tt,ht,Pt);var wt=i.create();return i.lerp(wt,gt,ut,kt),wt}(ve,x,f)},w=x.getDivergence||function(ve,Oe){var Me=i.create(),Te=1e-4;i.add(Me,ve,[Te,0,0]);var se=S(Me);i.subtract(se,se,Oe),i.scale(se,se,1/Te),i.add(Me,ve,[0,Te,0]);var oe=S(Me);i.subtract(oe,oe,Oe),i.scale(oe,oe,1/Te),i.add(Me,ve,[0,0,Te]);var he=S(Me);return i.subtract(he,he,Oe),i.scale(he,he,1/Te),i.add(Me,se,oe),i.add(Me,Me,he),Me},E=[],L=g[0][0],C=g[0][1],P=g[0][2],z=g[1][0],G=g[1][1],O=g[1][2],H=function(ve){var Oe=ve[0],Me=ve[1],Te=ve[2];return!(Oe<L||Oe>z||Me<C||Me>G||Te<P||Te>O)},N=10*i.distance(g[0],g[1])/y,B=N*N,V=1,q=0,te=h.length;te>1&&(V=function(ve){for(var Oe=[],Me=[],Te=[],se={},oe={},he={},Ee=ve.length,ke=0;ke<Ee;ke++){var be=ve[ke],Ie=be[0],Fe=be[1],ce=be[2];se[Ie]||(Oe.push(Ie),se[Ie]=!0),oe[Fe]||(Me.push(Fe),oe[Fe]=!0),he[ce]||(Te.push(ce),he[ce]=!0)}var we=u(Oe),ye=u(Me),Ce=u(Te),Re=Math.min(we,ye,Ce);return isFinite(Re)?Re:1}(h));for(var K=0;K<te;K++){var J=i.create();i.copy(J,h[K]);var Y=[J],W=[],Q=S(J),ne=J;W.push(Q);var re=[],ae=w(J,Q),ue=i.length(ae);isFinite(ue)&&ue>q&&(q=ue),re.push(ue),E.push({points:Y,velocities:W,divergences:re});for(var pe=0;pe<100*y&&Y.length<y&&H(J);){pe++;var ge=i.clone(Q),_e=i.squaredLength(ge);if(_e===0)break;_e>B&&i.scale(ge,ge,N/Math.sqrt(_e)),i.add(ge,ge,J),Q=S(ge),i.squaredDistance(ne,ge)-B>-1e-4*B&&(Y.push(ge),ne=ge,W.push(Q),ae=w(ge,Q),ue=i.length(ae),isFinite(ue)&&ue>q&&(q=ue),re.push(ue)),J=ge}}var me=function(ve,Oe,Me,Te){for(var se=0,oe=0;oe<ve.length;oe++)for(var he=ve[oe].velocities,Ee=0;Ee<he.length;Ee++)se=Math.max(se,i.length(he[Ee]));var ke=ve.map(function(He){return function(Ge,Je,ot,Qe){for(var vt=Ge.points,xt=Ge.velocities,mt=Ge.divergences,rt=[],it=[],Tt=[],Mt=[],Pt=[],kt=[],Ze=0,Xe=0,Ve=r.create(),We=r.create(),at=0;at<vt.length;at++){var et=vt[at],De=xt[at],Be=mt[at];Je===0&&(Be=.05*ot),Xe=i.length(De)/Qe,Ve=r.create(),i.copy(Ve,De),Ve[3]=Be;for(var nt=0;nt<8;nt++)Pt[nt]=[et[0],et[1],et[2],nt];if(Mt.length>0)for(nt=0;nt<8;nt++){var tt=(nt+1)%8;rt.push(Mt[nt],Pt[nt],Pt[tt],Pt[tt],Mt[tt],Mt[nt]),Tt.push(We,Ve,Ve,Ve,We,We),kt.push(Ze,Xe,Xe,Xe,Ze,Ze);var dt=rt.length;it.push([dt-6,dt-5,dt-4],[dt-3,dt-2,dt-1])}var ht=Mt;Mt=Pt,Pt=ht;var gt=We;We=Ve,Ve=gt;var ut=Ze;Ze=Xe,Xe=ut}return{positions:rt,cells:it,vectors:Tt,vertexIntensity:kt}}(He,Me,Te,se)}),be=[],Ie=[],Fe=[],ce=[];for(oe=0;oe<ke.length;oe++){var we=ke[oe],ye=be.length;for(be=be.concat(we.positions),Fe=Fe.concat(we.vectors),ce=ce.concat(we.vertexIntensity),Ee=0;Ee<we.cells.length;Ee++){var Ce=we.cells[Ee],Re=[];Ie.push(Re);for(var ze=0;ze<Ce.length;ze++)Re.push(Ce[ze]+ye)}}return{positions:be,cells:Ie,vectors:Fe,vertexIntensity:ce,colormap:Oe}}(E,x.colormap,q,V);return m?me.tubeScale=m:(q===0&&(q=1),me.tubeScale=.5*v*V/q),me};var p=t(9578),c=t(1140).createMesh;d.exports.createTubeMesh=function(x,g){return c(x,g,{shaders:p,traceType:"streamtube"})}},9054:function(d,s,t){var i=t(5158),r=t(6832),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),o=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(p){var c=i(p,n,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createPickShader=function(p){var c=i(p,n,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createContourShader=function(p){var c=i(p,a,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},s.createPickContourShader=function(p){var c=i(p,a,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},3754:function(d,s,t){d.exports=function(ae){var ue=ae.gl,pe=f(ue),ge=w(ue),_e=S(ue),me=E(ue),ve=r(ue),Oe=n(ue,[{buffer:ve,size:4,stride:L,offset:0},{buffer:ve,size:3,stride:L,offset:16},{buffer:ve,size:3,stride:L,offset:28}]),Me=r(ue),Te=n(ue,[{buffer:Me,size:4,stride:20,offset:0},{buffer:Me,size:1,stride:20,offset:16}]),se=r(ue),oe=n(ue,[{buffer:se,size:2,type:ue.FLOAT}]),he=o(ue,1,O,ue.RGBA,ue.UNSIGNED_BYTE);he.minFilter=ue.LINEAR,he.magFilter=ue.LINEAR;var Ee=new H(ue,[0,0],[[0,0,0],[0,0,0]],pe,ge,ve,Oe,he,_e,me,Me,Te,se,oe,[0,0,0]),ke={levels:[[],[],[]]};for(var be in ae)ke[be]=ae[be];return ke.colormap=ke.colormap||"jet",Ee.update(ke),Ee};var i=t(2288),r=t(5827),n=t(2944),o=t(8931),a=t(5306),u=t(9156),p=t(7498),c=t(7382),x=t(5050),g=t(4162),h=t(104),y=t(7437),v=t(5070),m=t(9144),_=t(9054),f=_.createShader,S=_.createContourShader,w=_.createPickShader,E=_.createPickContourShader,L=40,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],z=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function G(ae,ue,pe,ge,_e){this.position=ae,this.index=ue,this.uv=pe,this.level=ge,this.dataCoordinate=_e}(function(){for(var ae=0;ae<3;++ae){var ue=z[ae],pe=(ae+2)%3;ue[(ae+1)%3+0]=1,ue[pe+3]=1,ue[ae+6]=1}})();var O=256;function H(ae,ue,pe,ge,_e,me,ve,Oe,Me,Te,se,oe,he,Ee,ke){this.gl=ae,this.shape=ue,this.bounds=pe,this.objectOffset=ke,this.intensityBounds=[],this._shader=ge,this._pickShader=_e,this._coordinateBuffer=me,this._vao=ve,this._colorMap=Oe,this._contourShader=Me,this._contourPickShader=Te,this._contourBuffer=se,this._contourVAO=oe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new G([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=he,this._dynamicVAO=Ee,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(a.mallocFloat(1024),[0,0]),x(a.mallocFloat(1024),[0,0]),x(a.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var N=H.prototype;N.genColormap=function(ae,ue){var pe=!1,ge=c([u({colormap:ae,nshades:O,format:"rgba"}).map(function(_e,me){var ve=ue?function(Oe,Me){if(!Me||!Me.length)return 1;for(var Te=0;Te<Me.length;++Te){if(Me.length<2)return 1;if(Me[Te][0]===Oe)return Me[Te][1];if(Me[Te][0]>Oe&&Te>0){var se=(Me[Te][0]-Oe)/(Me[Te][0]-Me[Te-1][0]);return Me[Te][1]*(1-se)+se*Me[Te-1][1]}}return 1}(me/255,ue):_e[3];return ve<1&&(pe=!0),[_e[0],_e[1],_e[2],255*ve]})]);return p.divseq(ge,255),this.hasAlphaScale=pe,ge},N.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},N.isOpaque=function(){return!this.isTransparent()},N.pickSlots=1,N.setPickBase=function(ae){this.pickId=ae};var B=[0,0,0],V={showSurface:!1,showContour:!1,projections:[C.slice(),C.slice(),C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function q(ae,ue){var pe,ge,_e,me=ue.axes&&ue.axes.lastCubeProps.axis||B,ve=ue.showSurface,Oe=ue.showContour;for(pe=0;pe<3;++pe)for(ve=ve||ue.surfaceProject[pe],ge=0;ge<3;++ge)Oe=Oe||ue.contourProject[pe][ge];for(pe=0;pe<3;++pe){var Me=V.projections[pe];for(ge=0;ge<16;++ge)Me[ge]=0;for(ge=0;ge<4;++ge)Me[5*ge]=1;Me[5*pe]=0,Me[12+pe]=ue.axesBounds[+(me[pe]>0)][pe],h(Me,ae.model,Me);var Te=V.clipBounds[pe];for(_e=0;_e<2;++_e)for(ge=0;ge<3;++ge)Te[_e][ge]=ae.clipBounds[_e][ge];Te[0][pe]=-1e8,Te[1][pe]=1e8}return V.showSurface=ve,V.showContour=Oe,V}var te={model:C,view:C,projection:C,inverseModel:C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},K=C.slice(),J=[1,0,0,0,1,0,0,0,1];function Y(ae,ue){ae=ae||{};var pe=this.gl;pe.disable(pe.CULL_FACE),this._colorMap.bind(0);var ge=te;ge.model=ae.model||C,ge.view=ae.view||C,ge.projection=ae.projection||C,ge.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ge.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ge.objectOffset=this.objectOffset,ge.contourColor=this.contourColor[0],ge.inverseModel=y(ge.inverseModel,ge.model);for(var _e=0;_e<2;++_e)for(var me=ge.clipBounds[_e],ve=0;ve<3;++ve)me[ve]=Math.min(Math.max(this.clipBounds[_e][ve],-1e8),1e8);ge.kambient=this.ambientLight,ge.kdiffuse=this.diffuseLight,ge.kspecular=this.specularLight,ge.roughness=this.roughness,ge.fresnel=this.fresnel,ge.opacity=this.opacity,ge.height=0,ge.permutation=J,ge.vertexColor=this.vertexColor;var Oe=K;for(h(Oe,ge.view,ge.model),h(Oe,ge.projection,Oe),y(Oe,Oe),_e=0;_e<3;++_e)ge.eyePosition[_e]=Oe[12+_e]/Oe[15];var Me=Oe[15];for(_e=0;_e<3;++_e)Me+=this.lightPosition[_e]*Oe[4*_e+3];for(_e=0;_e<3;++_e){var Te=Oe[12+_e];for(ve=0;ve<3;++ve)Te+=Oe[4*ve+_e]*this.lightPosition[ve];ge.lightPosition[_e]=Te/Me}var se=q(ge,this);if(se.showSurface){for(this._shader.bind(),this._shader.uniforms=ge,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(pe.TRIANGLES,this._vertexCount),_e=0;_e<3;++_e)this.surfaceProject[_e]&&this.vertexCount&&(this._shader.uniforms.model=se.projections[_e],this._shader.uniforms.clipBounds=se.clipBounds[_e],this._vao.draw(pe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(se.showContour){var oe=this._contourShader;ge.kambient=1,ge.kdiffuse=0,ge.kspecular=0,ge.opacity=1,oe.bind(),oe.uniforms=ge;var he=this._contourVAO;for(he.bind(),_e=0;_e<3;++_e)for(oe.uniforms.permutation=z[_e],pe.lineWidth(this.contourWidth[_e]*this.pixelRatio),ve=0;ve<this.contourLevels[_e].length;++ve)ve===this.highlightLevel[_e]?(oe.uniforms.contourColor=this.highlightColor[_e],oe.uniforms.contourTint=this.highlightTint[_e]):ve!==0&&ve-1!==this.highlightLevel[_e]||(oe.uniforms.contourColor=this.contourColor[_e],oe.uniforms.contourTint=this.contourTint[_e]),this._contourCounts[_e][ve]&&(oe.uniforms.height=this.contourLevels[_e][ve],he.draw(pe.LINES,this._contourCounts[_e][ve],this._contourOffsets[_e][ve]));for(_e=0;_e<3;++_e)for(oe.uniforms.model=se.projections[_e],oe.uniforms.clipBounds=se.clipBounds[_e],ve=0;ve<3;++ve)if(this.contourProject[_e][ve]){oe.uniforms.permutation=z[ve],pe.lineWidth(this.contourWidth[ve]*this.pixelRatio);for(var Ee=0;Ee<this.contourLevels[ve].length;++Ee)Ee===this.highlightLevel[ve]?(oe.uniforms.contourColor=this.highlightColor[ve],oe.uniforms.contourTint=this.highlightTint[ve]):Ee!==0&&Ee-1!==this.highlightLevel[ve]||(oe.uniforms.contourColor=this.contourColor[ve],oe.uniforms.contourTint=this.contourTint[ve]),this._contourCounts[ve][Ee]&&(oe.uniforms.height=this.contourLevels[ve][Ee],he.draw(pe.LINES,this._contourCounts[ve][Ee],this._contourOffsets[ve][Ee]))}for(he.unbind(),(he=this._dynamicVAO).bind(),_e=0;_e<3;++_e)if(this._dynamicCounts[_e]!==0)for(oe.uniforms.model=ge.model,oe.uniforms.clipBounds=ge.clipBounds,oe.uniforms.permutation=z[_e],pe.lineWidth(this.dynamicWidth[_e]*this.pixelRatio),oe.uniforms.contourColor=this.dynamicColor[_e],oe.uniforms.contourTint=this.dynamicTint[_e],oe.uniforms.height=this.dynamicLevel[_e],he.draw(pe.LINES,this._dynamicCounts[_e],this._dynamicOffsets[_e]),ve=0;ve<3;++ve)this.contourProject[ve][_e]&&(oe.uniforms.model=se.projections[ve],oe.uniforms.clipBounds=se.clipBounds[ve],he.draw(pe.LINES,this._dynamicCounts[_e],this._dynamicOffsets[_e]));he.unbind()}}N.draw=function(ae){return Y.call(this,ae,!1)},N.drawTransparent=function(ae){return Y.call(this,ae,!0)};var W={model:C,view:C,projection:C,inverseModel:C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Q(ae,ue){return Array.isArray(ae)?[ue(ae[0]),ue(ae[1]),ue(ae[2])]:[ue(ae),ue(ae),ue(ae)]}function ne(ae){return Array.isArray(ae)?ae.length===3?[ae[0],ae[1],ae[2],1]:[ae[0],ae[1],ae[2],ae[3]]:[0,0,0,1]}function re(ae){if(Array.isArray(ae)){if(Array.isArray(ae))return[ne(ae[0]),ne(ae[1]),ne(ae[2])];var ue=ne(ae);return[ue.slice(),ue.slice(),ue.slice()]}}N.drawPick=function(ae){ae=ae||{};var ue=this.gl;ue.disable(ue.CULL_FACE);var pe=W;pe.model=ae.model||C,pe.view=ae.view||C,pe.projection=ae.projection||C,pe.shape=this._field[2].shape,pe.pickId=this.pickId/255,pe.lowerBound=this.bounds[0],pe.upperBound=this.bounds[1],pe.objectOffset=this.objectOffset,pe.permutation=J;for(var ge=0;ge<2;++ge)for(var _e=pe.clipBounds[ge],me=0;me<3;++me)_e[me]=Math.min(Math.max(this.clipBounds[ge][me],-1e8),1e8);var ve=q(pe,this);if(ve.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=pe,this._vao.bind(),this._vao.draw(ue.TRIANGLES,this._vertexCount),ge=0;ge<3;++ge)this.surfaceProject[ge]&&(this._pickShader.uniforms.model=ve.projections[ge],this._pickShader.uniforms.clipBounds=ve.clipBounds[ge],this._vao.draw(ue.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ve.showContour){var Oe=this._contourPickShader;Oe.bind(),Oe.uniforms=pe;var Me=this._contourVAO;for(Me.bind(),me=0;me<3;++me)for(ue.lineWidth(this.contourWidth[me]*this.pixelRatio),Oe.uniforms.permutation=z[me],ge=0;ge<this.contourLevels[me].length;++ge)this._contourCounts[me][ge]&&(Oe.uniforms.height=this.contourLevels[me][ge],Me.draw(ue.LINES,this._contourCounts[me][ge],this._contourOffsets[me][ge]));for(ge=0;ge<3;++ge)for(Oe.uniforms.model=ve.projections[ge],Oe.uniforms.clipBounds=ve.clipBounds[ge],me=0;me<3;++me)if(this.contourProject[ge][me]){Oe.uniforms.permutation=z[me],ue.lineWidth(this.contourWidth[me]*this.pixelRatio);for(var Te=0;Te<this.contourLevels[me].length;++Te)this._contourCounts[me][Te]&&(Oe.uniforms.height=this.contourLevels[me][Te],Me.draw(ue.LINES,this._contourCounts[me][Te],this._contourOffsets[me][Te]))}Me.unbind()}},N.pick=function(ae){if(!ae||ae.id!==this.pickId)return null;var ue=this._field[2].shape,pe=this._pickResult,ge=ue[0]*(ae.value[0]+(ae.value[2]>>4)/16)/255,_e=Math.floor(ge),me=ge-_e,ve=ue[1]*(ae.value[1]+(15&ae.value[2])/16)/255,Oe=Math.floor(ve),Me=ve-Oe;_e+=1,Oe+=1;var Te=pe.position;Te[0]=Te[1]=Te[2]=0;for(var se=0;se<2;++se)for(var oe=se?me:1-me,he=0;he<2;++he)for(var Ee=_e+se,ke=Oe+he,be=oe*(he?Me:1-Me),Ie=0;Ie<3;++Ie)Te[Ie]+=this._field[Ie].get(Ee,ke)*be;for(var Fe=this._pickResult.level,ce=0;ce<3;++ce)if(Fe[ce]=v.le(this.contourLevels[ce],Te[ce]),Fe[ce]<0)this.contourLevels[ce].length>0&&(Fe[ce]=0);else if(Fe[ce]<this.contourLevels[ce].length-1){var we=this.contourLevels[ce][Fe[ce]],ye=this.contourLevels[ce][Fe[ce]+1];Math.abs(we-Te[ce])>Math.abs(ye-Te[ce])&&(Fe[ce]+=1)}for(pe.index[0]=me<.5?_e:_e+1,pe.index[1]=Me<.5?Oe:Oe+1,pe.uv[0]=ge/ue[0],pe.uv[1]=ve/ue[1],Ie=0;Ie<3;++Ie)pe.dataCoordinate[Ie]=this._field[Ie].get(pe.index[0],pe.index[1]);return pe},N.padField=function(ae,ue){var pe=ue.shape.slice(),ge=ae.shape.slice();p.assign(ae.lo(1,1).hi(pe[0],pe[1]),ue),p.assign(ae.lo(1).hi(pe[0],1),ue.hi(pe[0],1)),p.assign(ae.lo(1,ge[1]-1).hi(pe[0],1),ue.lo(0,pe[1]-1).hi(pe[0],1)),p.assign(ae.lo(0,1).hi(1,pe[1]),ue.hi(1)),p.assign(ae.lo(ge[0]-1,1).hi(1,pe[1]),ue.lo(pe[0]-1)),ae.set(0,0,ue.get(0,0)),ae.set(0,ge[1]-1,ue.get(0,pe[1]-1)),ae.set(ge[0]-1,0,ue.get(pe[0]-1,0)),ae.set(ge[0]-1,ge[1]-1,ue.get(pe[0]-1,pe[1]-1))},N.update=function(ae){ae=ae||{},this.objectOffset=ae.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ae&&(this.contourWidth=Q(ae.contourWidth,Number)),"showContour"in ae&&(this.showContour=Q(ae.showContour,Boolean)),"showSurface"in ae&&(this.showSurface=!!ae.showSurface),"contourTint"in ae&&(this.contourTint=Q(ae.contourTint,Boolean)),"contourColor"in ae&&(this.contourColor=re(ae.contourColor)),"contourProject"in ae&&(this.contourProject=Q(ae.contourProject,function(nn){return Q(nn,Boolean)})),"surfaceProject"in ae&&(this.surfaceProject=ae.surfaceProject),"dynamicColor"in ae&&(this.dynamicColor=re(ae.dynamicColor)),"dynamicTint"in ae&&(this.dynamicTint=Q(ae.dynamicTint,Number)),"dynamicWidth"in ae&&(this.dynamicWidth=Q(ae.dynamicWidth,Number)),"opacity"in ae&&(this.opacity=ae.opacity),"opacityscale"in ae&&(this.opacityscale=ae.opacityscale),"colorBounds"in ae&&(this.colorBounds=ae.colorBounds),"vertexColor"in ae&&(this.vertexColor=ae.vertexColor?1:0),"colormap"in ae&&this._colorMap.setPixels(this.genColormap(ae.colormap,this.opacityscale));var ue=ae.field||ae.coords&&ae.coords[2]||null,pe=!1;if(ue||(ue=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ae||"coords"in ae){var ge=(ue.shape[0]+2)*(ue.shape[1]+2);ge>this._field[2].data.length&&(a.freeFloat(this._field[2].data),this._field[2].data=a.mallocFloat(i.nextPow2(ge))),this._field[2]=x(this._field[2].data,[ue.shape[0]+2,ue.shape[1]+2]),this.padField(this._field[2],ue),this.shape=ue.shape.slice();for(var _e=this.shape,me=0;me<2;++me)this._field[2].size>this._field[me].data.length&&(a.freeFloat(this._field[me].data),this._field[me].data=a.mallocFloat(this._field[2].size)),this._field[me]=x(this._field[me].data,[_e[0]+2,_e[1]+2]);if(ae.coords){var ve=ae.coords;if(!Array.isArray(ve)||ve.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(me=0;me<2;++me){var Oe=ve[me];for(he=0;he<2;++he)if(Oe.shape[he]!==_e[he])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[me],Oe)}}else if(ae.ticks){var Me=ae.ticks;if(!Array.isArray(Me)||Me.length!==2)throw new Error("gl-surface: invalid ticks");for(me=0;me<2;++me){var Te=Me[me];if((Array.isArray(Te)||Te.length)&&(Te=x(Te)),Te.shape[0]!==_e[me])throw new Error("gl-surface: invalid tick length");var se=x(Te.data,_e);se.stride[me]=Te.stride[0],se.stride[1^me]=0,this.padField(this._field[me],se)}}else{for(me=0;me<2;++me){var oe=[0,0];oe[me]=1,this._field[me]=x(this._field[me].data,[_e[0]+2,_e[1]+2],oe,0)}this._field[0].set(0,0,0);for(var he=0;he<_e[0];++he)this._field[0].set(he+1,0,he);for(this._field[0].set(_e[0]+1,0,_e[0]-1),this._field[1].set(0,0,0),he=0;he<_e[1];++he)this._field[1].set(0,he+1,he);this._field[1].set(0,_e[1]+1,_e[1]-1)}var Ee=this._field,ke=x(a.mallocFloat(3*Ee[2].size*2),[3,_e[0]+2,_e[1]+2,2]);for(me=0;me<3;++me)m(ke.pick(me),Ee[me],"mirror");var be=x(a.mallocFloat(3*Ee[2].size),[_e[0]+2,_e[1]+2,3]);for(me=0;me<_e[0]+2;++me)for(he=0;he<_e[1]+2;++he){var Ie=ke.get(0,me,he,0),Fe=ke.get(0,me,he,1),ce=ke.get(1,me,he,0),we=ke.get(1,me,he,1),ye=ke.get(2,me,he,0),Ce=ke.get(2,me,he,1),Re=ce*Ce-we*ye,ze=ye*Fe-Ce*Ie,He=Ie*we-Fe*ce,Ge=Math.sqrt(Re*Re+ze*ze+He*He);Ge<1e-8?(Ge=Math.max(Math.abs(Re),Math.abs(ze),Math.abs(He)))<1e-8?(He=1,ze=Re=0,Ge=1):Ge=1/Ge:Ge=1/Math.sqrt(Ge),be.set(me,he,0,Re*Ge),be.set(me,he,1,ze*Ge),be.set(me,he,2,He*Ge)}a.free(ke.data);var Je=[1/0,1/0,1/0],ot=[-1/0,-1/0,-1/0],Qe=1/0,vt=-1/0,xt=(_e[0]-1)*(_e[1]-1)*6,mt=a.mallocFloat(i.nextPow2(10*xt)),rt=0,it=0;for(me=0;me<_e[0]-1;++me)e:for(he=0;he<_e[1]-1;++he){for(var Tt=0;Tt<2;++Tt)for(var Mt=0;Mt<2;++Mt)for(var Pt=0;Pt<3;++Pt){var kt=this._field[Pt].get(1+me+Tt,1+he+Mt);if(isNaN(kt)||!isFinite(kt))continue e}for(Pt=0;Pt<6;++Pt){var Ze=me+P[Pt][0],Xe=he+P[Pt][1],Ve=this._field[0].get(Ze+1,Xe+1),We=this._field[1].get(Ze+1,Xe+1);kt=this._field[2].get(Ze+1,Xe+1),Re=be.get(Ze+1,Xe+1,0),ze=be.get(Ze+1,Xe+1,1),He=be.get(Ze+1,Xe+1,2),ae.intensity&&(at=ae.intensity.get(Ze,Xe));var at=ae.intensity?ae.intensity.get(Ze,Xe):kt+this.objectOffset[2];mt[rt++]=Ze,mt[rt++]=Xe,mt[rt++]=Ve,mt[rt++]=We,mt[rt++]=kt,mt[rt++]=0,mt[rt++]=at,mt[rt++]=Re,mt[rt++]=ze,mt[rt++]=He,Je[0]=Math.min(Je[0],Ve+this.objectOffset[0]),Je[1]=Math.min(Je[1],We+this.objectOffset[1]),Je[2]=Math.min(Je[2],kt+this.objectOffset[2]),Qe=Math.min(Qe,at),ot[0]=Math.max(ot[0],Ve+this.objectOffset[0]),ot[1]=Math.max(ot[1],We+this.objectOffset[1]),ot[2]=Math.max(ot[2],kt+this.objectOffset[2]),vt=Math.max(vt,at),it+=1}}for(ae.intensityBounds&&(Qe=+ae.intensityBounds[0],vt=+ae.intensityBounds[1]),me=6;me<rt;me+=10)mt[me]=(mt[me]-Qe)/(vt-Qe);this._vertexCount=it,this._coordinateBuffer.update(mt.subarray(0,rt)),a.freeFloat(mt),a.free(be.data),this.bounds=[Je,ot],this.intensity=ae.intensity||this._field[2],this.intensityBounds[0]===Qe&&this.intensityBounds[1]===vt||(pe=!0),this.intensityBounds=[Qe,vt]}if("levels"in ae){var et=ae.levels;for(et=Array.isArray(et[0])?et.slice():[[],[],et],me=0;me<3;++me)et[me]=et[me].slice(),et[me].sort(function(nn,Kt){return nn-Kt});for(me=0;me<3;++me)for(he=0;he<et[me].length;++he)et[me][he]-=this.objectOffset[me];e:for(me=0;me<3;++me){if(et[me].length!==this.contourLevels[me].length){pe=!0;break}for(he=0;he<et[me].length;++he)if(et[me][he]!==this.contourLevels[me][he]){pe=!0;break e}}this.contourLevels=et}if(pe){Ee=this._field,_e=this.shape;for(var De=[],Be=0;Be<3;++Be){var nt=this.contourLevels[Be],tt=[],dt=[],ht=[0,0,0];for(me=0;me<nt.length;++me){var gt=g(this._field[Be],nt[me]);tt.push(De.length/5|0),it=0;e:for(he=0;he<gt.cells.length;++he){var ut=gt.cells[he];for(Pt=0;Pt<2;++Pt){var wt=gt.positions[ut[Pt]],ct=wt[0],ft=0|Math.floor(ct),bt=ct-ft,It=wt[1],Dt=0|Math.floor(It),Nt=It-Dt,Qt=!1;t:for(var jt=0;jt<3;++jt){ht[jt]=0;var Ut=(Be+jt+1)%3;for(Tt=0;Tt<2;++Tt){var Xt=Tt?bt:1-bt;for(Ze=0|Math.min(Math.max(ft+Tt,0),_e[0]),Mt=0;Mt<2;++Mt){var gn=Mt?Nt:1-Nt;if(Xe=0|Math.min(Math.max(Dt+Mt,0),_e[1]),kt=jt<2?this._field[Ut].get(Ze,Xe):(this.intensity.get(Ze,Xe)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(kt)||isNaN(kt)){Qt=!0;break t}var Mn=Xt*gn;ht[jt]+=Mn*kt}}}if(Qt){if(Pt>0){for(var cn=0;cn<5;++cn)De.pop();it-=1}continue e}De.push(ht[0],ht[1],wt[0],wt[1],ht[2]),it+=1}}dt.push(it)}this._contourOffsets[Be]=tt,this._contourCounts[Be]=dt}var qt=a.mallocFloat(De.length);for(me=0;me<De.length;++me)qt[me]=De[me];this._contourBuffer.update(qt),a.freeFloat(qt)}},N.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ae=0;ae<3;++ae)a.freeFloat(this._field[ae].data)},N.highlight=function(ae){var ue,pe;if(!ae)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ue=0;ue<3;++ue)this.enableHighlight[ue]?this.highlightLevel[ue]=ae.level[ue]:this.highlightLevel[ue]=-1;for(pe=this.snapToData?ae.dataCoordinate:ae.position,ue=0;ue<3;++ue)pe[ue]-=this.objectOffset[ue];if(this.enableDynamic[0]&&pe[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&pe[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&pe[2]!==this.dynamicLevel[2]){for(var ge=0,_e=this.shape,me=a.mallocFloat(12*_e[0]*_e[1]),ve=0;ve<3;++ve)if(this.enableDynamic[ve]){this.dynamicLevel[ve]=pe[ve];var Oe=(ve+1)%3,Me=(ve+2)%3,Te=this._field[ve],se=this._field[Oe],oe=this._field[Me],he=g(Te,pe[ve]),Ee=he.cells,ke=he.positions;for(this._dynamicOffsets[ve]=ge,ue=0;ue<Ee.length;++ue)for(var be=Ee[ue],Ie=0;Ie<2;++Ie){var Fe=ke[be[Ie]],ce=+Fe[0],we=0|ce,ye=0|Math.min(we+1,_e[0]),Ce=ce-we,Re=1-Ce,ze=+Fe[1],He=0|ze,Ge=0|Math.min(He+1,_e[1]),Je=ze-He,ot=1-Je,Qe=Re*ot,vt=Re*Je,xt=Ce*ot,mt=Ce*Je,rt=Qe*se.get(we,He)+vt*se.get(we,Ge)+xt*se.get(ye,He)+mt*se.get(ye,Ge),it=Qe*oe.get(we,He)+vt*oe.get(we,Ge)+xt*oe.get(ye,He)+mt*oe.get(ye,Ge);if(isNaN(rt)||isNaN(it)){Ie&&(ge-=1);break}me[2*ge+0]=rt,me[2*ge+1]=it,ge+=1}this._dynamicCounts[ve]=ge-this._dynamicOffsets[ve]}else this.dynamicLevel[ve]=NaN,this._dynamicCounts[ve]=0;this._dynamicBuffer.update(me.subarray(0,2*ge)),a.freeFloat(me)}}},8931:function(d,s,t){var i=t(5050),r=t(7498),n=t(5306);d.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(o||function(w){o=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],a=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],u=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}(_),typeof arguments[1]=="number")return m(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var f=arguments[1],S=p(f)?f:f.raw;if(S)return function(w,E,L,C,P,z){var G=v(w);return w.texImage2D(w.TEXTURE_2D,0,P,P,z,E),new g(w,G,L,C,P,z)}(_,S,0|f.width,0|f.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(f.shape&&f.data&&f.stride)return function(w,E){var L=E.dtype,C=E.shape.slice(),P=w.getParameter(w.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>P||C[1]<0||C[1]>P)throw new Error("gl-texture2d: Invalid texture size");var z=y(C,E.stride.slice()),G=0;L==="float32"?G=w.FLOAT:L==="float64"?(G=w.FLOAT,z=!1,L="float32"):L==="uint8"?G=w.UNSIGNED_BYTE:(G=w.UNSIGNED_BYTE,z=!1,L="uint8");var O,H,N=0;if(C.length===2)N=w.LUMINANCE,C=[C[0],C[1],1],E=i(E.data,C,[E.stride[0],E.stride[1],1],E.offset);else{if(C.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(C[2]===1)N=w.ALPHA;else if(C[2]===2)N=w.LUMINANCE_ALPHA;else if(C[2]===3)N=w.RGB;else{if(C[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");N=w.RGBA}}G!==w.FLOAT||w.getExtension("OES_texture_float")||(G=w.UNSIGNED_BYTE,z=!1);var B=E.size;if(z)O=E.offset===0&&E.data.length===B?E.data:E.data.subarray(E.offset,E.offset+B);else{var V=[C[2],C[2]*C[0],1];H=n.malloc(B,L);var q=i(H,C,V,0);L!=="float32"&&L!=="float64"||G!==w.UNSIGNED_BYTE?r.assign(q,E):c(q,E),O=H.subarray(0,B)}var te=v(w);return w.texImage2D(w.TEXTURE_2D,0,N,C[0],C[1],0,N,G,O),z||n.free(H),new g(w,te,C[0],C[1],N,G)}(_,f)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,a=null,u=null;function p(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var c=function(_,f){r.muls(_,f,255)};function x(_,f,S){var w=_.gl,E=w.getParameter(w.MAX_TEXTURE_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[f,S],_.bind(),w.texImage2D(w.TEXTURE_2D,0,_.format,f,S,0,_.format,_.type,null),_._mipLevels=[0],_}function g(_,f,S,w,E,L){this.gl=_,this.handle=f,this.format=E,this.type=L,this._shape=[S,w],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var C=this,P=[this._wrapS,this._wrapT];Object.defineProperties(P,[{get:function(){return C._wrapS},set:function(G){return C.wrapS=G}},{get:function(){return C._wrapT},set:function(G){return C.wrapT=G}}]),this._wrapVector=P;var z=[this._shape[0],this._shape[1]];Object.defineProperties(z,[{get:function(){return C._shape[0]},set:function(G){return C.width=G}},{get:function(){return C._shape[1]},set:function(G){return C.height=G}}]),this._shapeVector=z}var h=g.prototype;function y(_,f){return _.length===3?f[2]===1&&f[1]===_[0]*_[2]&&f[0]===_[2]:f[0]===1&&f[1]===_[0]}function v(_){var f=_.createTexture();return _.bindTexture(_.TEXTURE_2D,f),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),f}function m(_,f,S,w,E){var L=_.getParameter(_.MAX_TEXTURE_SIZE);if(f<0||f>L||S<0||S>L)throw new Error("gl-texture2d: Invalid texture shape");if(E===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var C=v(_);return _.texImage2D(_.TEXTURE_2D,0,w,f,S,0,w,E,null),new g(_,C,f,S,w,E)}Object.defineProperties(h,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&o.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),a.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&o.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),a.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var f=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),f!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var f=0;f<2;++f)if(u.indexOf(_[f])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return x(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return x(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,x(this,this._shape[0],_),_}}}),h.bind=function(_){var f=this.gl;return _!==void 0&&f.activeTexture(f.TEXTURE0+(0|_)),f.bindTexture(f.TEXTURE_2D,this.handle),_!==void 0?0|_:f.getParameter(f.ACTIVE_TEXTURE)-f.TEXTURE0},h.dispose=function(){this.gl.deleteTexture(this.handle)},h.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),f=0;_>0;++f,_>>>=1)this._mipLevels.indexOf(f)<0&&this._mipLevels.push(f)},h.setPixels=function(_,f,S,w){var E=this.gl;this.bind(),Array.isArray(f)?(w=S,S=0|f[1],f=0|f[0]):(f=f||0,S=S||0),w=w||0;var L=p(_)?_:_.raw;if(L)this._mipLevels.indexOf(w)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,L),this._mipLevels.push(w)):E.texSubImage2D(E.TEXTURE_2D,w,f,S,this.format,this.type,L);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||f+_.shape[1]>this._shape[1]>>>w||S+_.shape[0]>this._shape[0]>>>w||f<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(C,P,z,G,O,H,N,B){var V=B.dtype,q=B.shape.slice();if(q.length<2||q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var te=0,K=0,J=y(q,B.stride.slice());if(V==="float32"?te=C.FLOAT:V==="float64"?(te=C.FLOAT,J=!1,V="float32"):V==="uint8"?te=C.UNSIGNED_BYTE:(te=C.UNSIGNED_BYTE,J=!1,V="uint8"),q.length===2)K=C.LUMINANCE,q=[q[0],q[1],1],B=i(B.data,q,[B.stride[0],B.stride[1],1],B.offset);else{if(q.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(q[2]===1)K=C.ALPHA;else if(q[2]===2)K=C.LUMINANCE_ALPHA;else if(q[2]===3)K=C.RGB;else{if(q[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");K=C.RGBA}q[2]}if(K!==C.LUMINANCE&&K!==C.ALPHA||O!==C.LUMINANCE&&O!==C.ALPHA||(K=O),K!==O)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Y=B.size,W=N.indexOf(G)<0;if(W&&N.push(G),te===H&&J)B.offset===0&&B.data.length===Y?W?C.texImage2D(C.TEXTURE_2D,G,O,q[0],q[1],0,O,H,B.data):C.texSubImage2D(C.TEXTURE_2D,G,P,z,q[0],q[1],O,H,B.data):W?C.texImage2D(C.TEXTURE_2D,G,O,q[0],q[1],0,O,H,B.data.subarray(B.offset,B.offset+Y)):C.texSubImage2D(C.TEXTURE_2D,G,P,z,q[0],q[1],O,H,B.data.subarray(B.offset,B.offset+Y));else{var Q;Q=H===C.FLOAT?n.mallocFloat32(Y):n.mallocUint8(Y);var ne=i(Q,q,[q[2],q[2]*q[0],1]);te===C.FLOAT&&H===C.UNSIGNED_BYTE?c(ne,B):r.assign(ne,B),W?C.texImage2D(C.TEXTURE_2D,G,O,q[0],q[1],0,O,H,Q.subarray(0,Y)):C.texSubImage2D(C.TEXTURE_2D,G,P,z,q[0],q[1],O,H,Q.subarray(0,Y)),H===C.FLOAT?n.freeFloat32(Q):n.freeUint8(Q)}})(E,f,S,w,this.format,this.type,this._mipLevels,_)}}},3056:function(d){d.exports=function(s,t,i){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(i){if(i.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<i.length;++n){var o=i[n];if(o.buffer){var a=o.buffer,u=o.size||4,p=o.type||s.FLOAT,c=!!o.normalized,x=o.stride||0,g=o.offset||0;a.bind(),s.enableVertexAttribArray(n),s.vertexAttribPointer(n,u,p,c,x,g)}else{if(typeof o=="number")s.vertexAttrib1f(n,o);else if(o.length===1)s.vertexAttrib1f(n,o[0]);else if(o.length===2)s.vertexAttrib2f(n,o[0],o[1]);else if(o.length===3)s.vertexAttrib3f(n,o[0],o[1],o[2]);else{if(o.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(n,o[0],o[1],o[2],o[3])}s.disableVertexAttribArray(n)}}for(;n<r;++n)s.disableVertexAttribArray(n)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),n=0;n<r;++n)s.disableVertexAttribArray(n)}},7220:function(d,s,t){var i=t(3056);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,o,a){this._elements=o,this._attributes=n,this._elementsType=a||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,o,a){a=a||0;var u=this.gl;this._elements?u.drawElements(n,o,this._elementsType,a):u.drawArrays(n,a,o)},d.exports=function(n){return new r(n)}},3778:function(d,s,t){var i=t(3056);function r(o,a,u,p,c,x){this.location=o,this.dimension=a,this.a=u,this.b=p,this.c=c,this.d=x}function n(o,a,u){this.gl=o,this._ext=a,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=o.UNSIGNED_SHORT}r.prototype.bind=function(o){switch(this.dimension){case 1:o.vertexAttrib1f(this.location,this.a);break;case 2:o.vertexAttrib2f(this.location,this.a,this.b);break;case 3:o.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:o.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var o=0;o<this._attribs.length;++o)this._attribs[o].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(o,a,u){if(this.bind(),i(this.gl,a,o),this.unbind(),this._attribs.length=0,o)for(var p=0;p<o.length;++p){var c=o[p];typeof c=="number"?this._attribs.push(new r(p,1,c)):Array.isArray(c)&&this._attribs.push(new r(p,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!a,this._elementsType=u||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(o,a,u){u=u||0;var p=this.gl;this._useElements?p.drawElements(o,a,this._elementsType,u):p.drawArrays(o,u,a)},d.exports=function(o,a){return new n(o,a,a.createVertexArrayOES())}},2944:function(d,s,t){var i=t(3778),r=t(7220);function n(o){this.bindVertexArrayOES=o.bindVertexArray.bind(o),this.createVertexArrayOES=o.createVertexArray.bind(o),this.deleteVertexArrayOES=o.deleteVertexArray.bind(o)}d.exports=function(o,a,u,p){var c,x=o.createVertexArray?new n(o):o.getExtension("OES_vertex_array_object");return(c=x?i(o,x):r(o)).update(a,u,p),c}},2598:function(d){d.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s}},5879:function(d,s,t){d.exports=function(o,a){var u=i(o[0],o[1],o[2]),p=i(a[0],a[1],a[2]);r(u,u),r(p,p);var c=n(u,p);return c>1?0:Math.acos(c)};var i=t(5415),r=t(899),n=t(9305)},8827:function(d){d.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},7622:function(d){d.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},8782:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},8501:function(d){d.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(d){d.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],a=i[0],u=i[1],p=i[2];return s[0]=n*p-o*u,s[1]=o*a-r*p,s[2]=r*u-n*a,s}},5981:function(d,s,t){d.exports=t(8288)},8288:function(d){d.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return Math.sqrt(i*i+r*r+n*n)}},8629:function(d,s,t){d.exports=t(7979)},7979:function(d){d.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s}},9305:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},154:function(d){d.exports=1e-6},4932:function(d,s,t){d.exports=function(r,n){var o=r[0],a=r[1],u=r[2],p=n[0],c=n[1],x=n[2];return Math.abs(o-p)<=i*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-c)<=i*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-x)<=i*Math.max(1,Math.abs(u),Math.abs(x))};var i=t(154)},5777:function(d){d.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},3306:function(d){d.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},7447:function(d,s,t){d.exports=function(r,n,o,a,u,p){var c,x;for(n||(n=3),o||(o=0),x=a?Math.min(a*n+o,r.length):r.length,c=o;c<x;c+=n)i[0]=r[c],i[1]=r[c+1],i[2]=r[c+2],u(i,i,p),r[c]=i[0],r[c+1]=i[1],r[c+2]=i[2];return r};var i=t(8501)()},5415:function(d){d.exports=function(s,t,i){var r=new Float32Array(3);return r[0]=s,r[1]=t,r[2]=i,r}},2858:function(d,s,t){d.exports={EPSILON:t(154),create:t(8501),clone:t(7622),angle:t(5879),fromValues:t(5415),copy:t(8782),set:t(831),equals:t(4932),exactEquals:t(5777),add:t(2598),subtract:t(911),sub:t(8921),multiply:t(105),mul:t(5733),divide:t(7979),div:t(8629),min:t(3605),max:t(1716),floor:t(3306),ceil:t(8827),round:t(1624),scale:t(5685),scaleAndAdd:t(6722),distance:t(8288),dist:t(5981),squaredDistance:t(6403),sqrDist:t(5294),length:t(4693),len:t(1468),squaredLength:t(4337),sqrLen:t(3303),negate:t(435),inverse:t(2073),normalize:t(899),dot:t(9305),cross:t(903),lerp:t(1868),random:t(6660),transformMat4:t(3255),transformMat3:t(9908),transformQuat:t(6568),rotateX:t(392),rotateY:t(3222),rotateZ:t(3388),forEach:t(7447)}},2073:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},1468:function(d,s,t){d.exports=t(4693)},4693:function(d){d.exports=function(s){var t=s[0],i=s[1],r=s[2];return Math.sqrt(t*t+i*i+r*r)}},1868:function(d){d.exports=function(s,t,i,r){var n=t[0],o=t[1],a=t[2];return s[0]=n+r*(i[0]-n),s[1]=o+r*(i[1]-o),s[2]=a+r*(i[2]-a),s}},1716:function(d){d.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s}},3605:function(d){d.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s}},5733:function(d,s,t){d.exports=t(105)},105:function(d){d.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s}},435:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},899:function(d){d.exports=function(s,t){var i=t[0],r=t[1],n=t[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o),s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o),s}},6660:function(d){d.exports=function(s,t){t=t||1;var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return s[0]=Math.cos(i)*n,s[1]=Math.sin(i)*n,s[2]=r*t,s}},392:function(d){d.exports=function(s,t,i,r){var n=i[1],o=i[2],a=t[1]-n,u=t[2]-o,p=Math.sin(r),c=Math.cos(r);return s[0]=t[0],s[1]=n+a*c-u*p,s[2]=o+a*p+u*c,s}},3222:function(d){d.exports=function(s,t,i,r){var n=i[0],o=i[2],a=t[0]-n,u=t[2]-o,p=Math.sin(r),c=Math.cos(r);return s[0]=n+u*p+a*c,s[1]=t[1],s[2]=o+u*c-a*p,s}},3388:function(d){d.exports=function(s,t,i,r){var n=i[0],o=i[1],a=t[0]-n,u=t[1]-o,p=Math.sin(r),c=Math.cos(r);return s[0]=n+a*c-u*p,s[1]=o+a*p+u*c,s[2]=t[2],s}},1624:function(d){d.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},5685:function(d){d.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s}},6722:function(d){d.exports=function(s,t,i,r){return s[0]=t[0]+i[0]*r,s[1]=t[1]+i[1]*r,s[2]=t[2]+i[2]*r,s}},831:function(d){d.exports=function(s,t,i,r){return s[0]=t,s[1]=i,s[2]=r,s}},5294:function(d,s,t){d.exports=t(6403)},3303:function(d,s,t){d.exports=t(4337)},6403:function(d){d.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return i*i+r*r+n*n}},4337:function(d){d.exports=function(s){var t=s[0],i=s[1],r=s[2];return t*t+i*i+r*r}},8921:function(d,s,t){d.exports=t(911)},911:function(d){d.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s}},9908:function(d){d.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2];return s[0]=r*i[0]+n*i[3]+o*i[6],s[1]=r*i[1]+n*i[4]+o*i[7],s[2]=r*i[2]+n*i[5]+o*i[8],s}},3255:function(d){d.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],a=i[3]*r+i[7]*n+i[11]*o+i[15];return a=a||1,s[0]=(i[0]*r+i[4]*n+i[8]*o+i[12])/a,s[1]=(i[1]*r+i[5]*n+i[9]*o+i[13])/a,s[2]=(i[2]*r+i[6]*n+i[10]*o+i[14])/a,s}},6568:function(d){d.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],a=i[0],u=i[1],p=i[2],c=i[3],x=c*r+u*o-p*n,g=c*n+p*r-a*o,h=c*o+a*n-u*r,y=-a*r-u*n-p*o;return s[0]=x*c+y*-a+g*-p-h*-u,s[1]=g*c+y*-u+h*-a-x*-p,s[2]=h*c+y*-p+x*-u-g*-a,s}},3433:function(d){d.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s[3]=t[3]+i[3],s}},1413:function(d){d.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},3470:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},5313:function(d){d.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(d){d.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],o=t[3]-s[3];return Math.sqrt(i*i+r*r+n*n+o*o)}},205:function(d){d.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s[3]=t[3]/i[3],s}},4242:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},5680:function(d){d.exports=function(s,t,i,r){var n=new Float32Array(4);return n[0]=s,n[1]=t,n[2]=i,n[3]=r,n}},4020:function(d,s,t){d.exports={create:t(5313),clone:t(1413),fromValues:t(5680),copy:t(3470),set:t(6453),add:t(3433),subtract:t(2705),multiply:t(746),divide:t(205),min:t(2170),max:t(3030),scale:t(5510),scaleAndAdd:t(4224),distance:t(5446),squaredDistance:t(1542),length:t(8177),squaredLength:t(9037),negate:t(6459),inverse:t(8057),normalize:t(381),dot:t(4242),lerp:t(8746),random:t(3770),transformMat4:t(6342),transformQuat:t(5022)}},8057:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},8177:function(d){d.exports=function(s){var t=s[0],i=s[1],r=s[2],n=s[3];return Math.sqrt(t*t+i*i+r*r+n*n)}},8746:function(d){d.exports=function(s,t,i,r){var n=t[0],o=t[1],a=t[2],u=t[3];return s[0]=n+r*(i[0]-n),s[1]=o+r*(i[1]-o),s[2]=a+r*(i[2]-a),s[3]=u+r*(i[3]-u),s}},3030:function(d){d.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s[3]=Math.max(t[3],i[3]),s}},2170:function(d){d.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s[3]=Math.min(t[3],i[3]),s}},746:function(d){d.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s[3]=t[3]*i[3],s}},6459:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},381:function(d){d.exports=function(s,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=i*i+r*r+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),s[0]=i*a,s[1]=r*a,s[2]=n*a,s[3]=o*a),s}},3770:function(d,s,t){var i=t(381),r=t(5510);d.exports=function(n,o){return o=o||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),i(n,n),r(n,n,o),n}},5510:function(d){d.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s[3]=t[3]*i,s}},4224:function(d){d.exports=function(s,t,i,r){return s[0]=t[0]+i[0]*r,s[1]=t[1]+i[1]*r,s[2]=t[2]+i[2]*r,s[3]=t[3]+i[3]*r,s}},6453:function(d){d.exports=function(s,t,i,r,n){return s[0]=t,s[1]=i,s[2]=r,s[3]=n,s}},1542:function(d){d.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],o=t[3]-s[3];return i*i+r*r+n*n+o*o}},9037:function(d){d.exports=function(s){var t=s[0],i=s[1],r=s[2],n=s[3];return t*t+i*i+r*r+n*n}},2705:function(d){d.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s[3]=t[3]-i[3],s}},6342:function(d){d.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],a=t[3];return s[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,s[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,s[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,s[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,s}},5022:function(d){d.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],a=i[0],u=i[1],p=i[2],c=i[3],x=c*r+u*o-p*n,g=c*n+p*r-a*o,h=c*o+a*n-u*r,y=-a*r-u*n-p*o;return s[0]=x*c+y*-a+g*-p-h*-u,s[1]=g*c+y*-u+h*-a-x*-p,s[2]=h*c+y*-p+x*-u-g*-a,s[3]=t[3],s}},9365:function(d,s,t){var i=t(8096),r=t(7896);d.exports=function(n){for(var o=Array.isArray(n)?n:i(n),a=0;a<o.length;a++){var u=o[a];if(u.type==="preprocessor"){var p=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(p&&p[2]){var c=p[1],x=p[2];return(c?r(x):x).trim()}}}}},3193:function(d,s,t){d.exports=function(C){var P,z,G,O=0,H=0,N=u,B=[],V=[],q=1,te=0,K=0,J=!1,Y=!1,W="",Q=n,ne=i;(C=C||{}).version==="300 es"&&(Q=a,ne=o);var re={},ae={};for(O=0;O<Q.length;O++)re[Q[O]]=!0;for(O=0;O<ne.length;O++)ae[ne[O]]=!0;return function(he){return V=[],he!==null?function(Ee){var ke;for(O=0,Ee.toString&&(Ee=Ee.toString()),W+=Ee.replace(/\r\n/g,`
`),G=W.length;P=W[O],O<G;){switch(ke=O,N){case c:O=me();break;case x:case g:O=_e();break;case h:O=ve();break;case y:O=Te();break;case E:O=Me();break;case v:O=se();break;case p:O=oe();break;case S:O=ge();break;case u:O=pe()}ke!==O&&(W[ke]===`
`?(te=0,++q):++te)}return H+=O,W=W.slice(O),V}(he):(B.length&&ue(B.join("")),N=w,ue("(eof)"),V)};function ue(he){he.length&&V.push({type:L[N],data:he,position:K,line:q,column:te})}function pe(){return B=B.length?[]:B,z==="/"&&P==="*"?(K=H+O-1,N=c,z=P,O+1):z==="/"&&P==="/"?(K=H+O-1,N=x,z=P,O+1):P==="#"?(N=g,K=H+O,O):/\s/.test(P)?(N=S,K=H+O,O):(J=/\d/.test(P),Y=/[^\w_]/.test(P),K=H+O,N=J?y:Y?h:p,O)}function ge(){return/[^\s]/g.test(P)?(ue(B.join("")),N=u,O):(B.push(P),z=P,O+1)}function _e(){return P!=="\r"&&P!==`
`||z==="\\"?(B.push(P),z=P,O+1):(ue(B.join("")),N=u,O)}function me(){return P==="/"&&z==="*"?(B.push(P),ue(B.join("")),N=u,O+1):(B.push(P),z=P,O+1)}function ve(){if(z==="."&&/\d/.test(P))return N=v,O;if(z==="/"&&P==="*")return N=c,O;if(z==="/"&&P==="/")return N=x,O;if(P==="."&&B.length){for(;Oe(B););return N=v,O}if(P===";"||P===")"||P==="("){if(B.length)for(;Oe(B););return ue(P),N=u,O+1}var he=B.length===2&&P!=="=";if(/[\w_\d\s]/.test(P)||he){for(;Oe(B););return N=u,O}return B.push(P),z=P,O+1}function Oe(he){for(var Ee,ke,be=0;;){if(Ee=r.indexOf(he.slice(0,he.length+be).join("")),ke=r[Ee],Ee===-1){if(be--+he.length>0)continue;ke=he.slice(0,1).join("")}return ue(ke),K+=ke.length,(B=B.slice(ke.length)).length}}function Me(){return/[^a-fA-F0-9]/.test(P)?(ue(B.join("")),N=u,O):(B.push(P),z=P,O+1)}function Te(){return P==="."||/[eE]/.test(P)?(B.push(P),N=v,z=P,O+1):P==="x"&&B.length===1&&B[0]==="0"?(N=E,B.push(P),z=P,O+1):/[^\d]/.test(P)?(ue(B.join("")),N=u,O):(B.push(P),z=P,O+1)}function se(){return P==="f"&&(B.push(P),z=P,O+=1),/[eE]/.test(P)?(B.push(P),z=P,O+1):(P!=="-"&&P!=="+"||!/[eE]/.test(z))&&/[^\d]/.test(P)?(ue(B.join("")),N=u,O):(B.push(P),z=P,O+1)}function oe(){if(/[^\d\w_]/.test(P)){var he=B.join("");return N=ae[he]?f:re[he]?_:m,ue(B.join("")),N=u,O}return B.push(P),z=P,O+1}};var i=t(399),r=t(9746),n=t(9525),o=t(9458),a=t(3585),u=999,p=9999,c=0,x=1,g=2,h=3,y=4,v=5,m=6,_=7,f=8,S=9,w=10,E=11,L=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(d,s,t){var i=t(9525);i=i.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),d.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(d){d.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(d,s,t){var i=t(399);d.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(d){d.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(d){d.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(d,s,t){var i=t(3193);d.exports=function(r,n){var o=i(n),a=[];return(a=a.concat(o(r))).concat(o(null))}},6832:function(d){d.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),i=[],r=0;r<s.length-1;r++)i.push(s[r],t[r]||"");return i.push(s[r]),i.join("")}},5233:function(d,s,t){var i=t(4846);d.exports=i&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},2183:function(d,s,t){d.exports=function(x,g){var h=x.length;if(h===0)throw new Error("Must have at least d+1 points");var y=x[0].length;if(h<=y)throw new Error("Must input at least d+1 points");var v=x.slice(0,y+1),m=i.apply(void 0,v);if(m===0)throw new Error("Input not in general position");for(var _=new Array(y+1),f=0;f<=y;++f)_[f]=f;m<0&&(_[0]=1,_[1]=0);var S=new n(_,new Array(y+1),!1),w=S.adjacent,E=new Array(y+2);for(f=0;f<=y;++f){for(var L=_.slice(),C=0;C<=y;++C)C===f&&(L[C]=-1);var P=L[0];L[0]=L[1],L[1]=P;var z=new n(L,new Array(y+1),!0);w[f]=z,E[f]=z}for(E[y+1]=S,f=0;f<=y;++f){L=w[f].vertices;var G=w[f].adjacent;for(C=0;C<=y;++C){var O=L[C];if(O<0)G[C]=S;else for(var H=0;H<=y;++H)w[H].vertices.indexOf(O)<0&&(G[C]=w[H])}}var N=new p(y,v,E),B=!!g;for(f=y+1;f<h;++f)N.insert(x[f],B);return N.boundary()};var i=t(417),r=t(8211).H;function n(x,g,h){this.vertices=x,this.adjacent=g,this.boundary=h,this.lastVisited=-1}function o(x,g,h){this.vertices=x,this.cell=g,this.index=h}function a(x,g){return r(x.vertices,g.vertices)}n.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var g=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=g};var u=[];function p(x,g,h){this.dimension=x,this.vertices=g,this.simplices=h,this.interior=h.filter(function(_){return!_.boundary}),this.tuple=new Array(x+1);for(var y=0;y<=x;++y)this.tuple[y]=this.vertices[y];var v,m=u[x];m||(m=u[x]=((v=i[x+1])||(v=i),function(_){return function(){var f=this.tuple;return _.apply(this,f)}}(v))),this.orient=m}var c=p.prototype;c.handleBoundaryDegeneracy=function(x,g){var h=this.dimension,y=this.vertices.length-1,v=this.tuple,m=this.vertices,_=[x];for(x.lastVisited=-y;_.length>0;)for(var f=(x=_.pop()).adjacent,S=0;S<=h;++S){var w=f[S];if(w.boundary&&!(w.lastVisited<=-y)){for(var E=w.vertices,L=0;L<=h;++L){var C=E[L];v[L]=C<0?g:m[C]}var P=this.orient();if(P>0)return w;w.lastVisited=-y,P===0&&_.push(w)}}return null},c.walk=function(x,g){var h=this.vertices.length-1,y=this.dimension,v=this.vertices,m=this.tuple,_=g?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[_];e:for(;!f.boundary;){for(var S=f.vertices,w=f.adjacent,E=0;E<=y;++E)m[E]=v[S[E]];for(f.lastVisited=h,E=0;E<=y;++E){var L=w[E];if(!(L.lastVisited>=h)){var C=m[E];m[E]=x;var P=this.orient();if(m[E]=C,P<0){f=L;continue e}L.boundary?L.lastVisited=-h:L.lastVisited=h}}return}return f},c.addPeaks=function(x,g){var h=this.vertices.length-1,y=this.dimension,v=this.vertices,m=this.tuple,_=this.interior,f=this.simplices,S=[g];g.lastVisited=h,g.vertices[g.vertices.indexOf(-1)]=h,g.boundary=!1,_.push(g);for(var w=[];S.length>0;){var E=(g=S.pop()).vertices,L=g.adjacent,C=E.indexOf(h);if(!(C<0)){for(var P=0;P<=y;++P)if(P!==C){var z=L[P];if(z.boundary&&!(z.lastVisited>=h)){var G=z.vertices;if(z.lastVisited!==-h){for(var O=0,H=0;H<=y;++H)G[H]<0?(O=H,m[H]=x):m[H]=v[G[H]];if(this.orient()>0){G[O]=h,z.boundary=!1,_.push(z),S.push(z),z.lastVisited=h;continue}z.lastVisited=-h}var N=z.adjacent,B=E.slice(),V=L.slice(),q=new n(B,V,!0);f.push(q);var te=N.indexOf(g);if(!(te<0))for(N[te]=q,V[C]=z,B[P]=-1,V[P]=g,L[P]=q,q.flip(),H=0;H<=y;++H){var K=B[H];if(!(K<0||K===h)){for(var J=new Array(y-1),Y=0,W=0;W<=y;++W){var Q=B[W];Q<0||W===H||(J[Y++]=Q)}w.push(new o(J,q,H))}}}}}}for(w.sort(a),P=0;P+1<w.length;P+=2){var ne=w[P],re=w[P+1],ae=ne.index,ue=re.index;ae<0||ue<0||(ne.cell.adjacent[ne.index]=re.cell,re.cell.adjacent[re.index]=ne.cell)}},c.insert=function(x,g){var h=this.vertices;h.push(x);var y=this.walk(x,g);if(y){for(var v=this.dimension,m=this.tuple,_=0;_<=v;++_){var f=y.vertices[_];m[_]=f<0?x:h[f]}var S=this.orient(m);S<0||(S!==0||(y=this.handleBoundaryDegeneracy(y,x)))&&this.addPeaks(x,y)}},c.boundary=function(){for(var x=this.dimension,g=[],h=this.simplices,y=h.length,v=0;v<y;++v){var m=h[v];if(m.boundary){for(var _=new Array(x),f=m.vertices,S=0,w=0,E=0;E<=x;++E)f[E]>=0?_[S++]=f[E]:w=1&E;if(w===(1&x)){var L=_[0];_[0]=_[1],_[1]=L}g.push(_)}}return g}},9014:function(d,s,t){var i=t(5070);function r(S,w,E,L,C){this.mid=S,this.left=w,this.right=E,this.leftPoints=L,this.rightPoints=C,this.count=(w?w.count:0)+(E?E.count:0)+L.length}d.exports=function(S){return S&&S.length!==0?new _(m(S)):new _(null)};var n=r.prototype;function o(S,w){S.mid=w.mid,S.left=w.left,S.right=w.right,S.leftPoints=w.leftPoints,S.rightPoints=w.rightPoints,S.count=w.count}function a(S,w){var E=m(w);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function u(S,w){var E=S.intervals([]);E.push(w),a(S,E)}function p(S,w){var E=S.intervals([]),L=E.indexOf(w);return L<0?0:(E.splice(L,1),a(S,E),1)}function c(S,w,E){for(var L=0;L<S.length&&S[L][0]<=w;++L){var C=E(S[L]);if(C)return C}}function x(S,w,E){for(var L=S.length-1;L>=0&&S[L][1]>=w;--L){var C=E(S[L]);if(C)return C}}function g(S,w){for(var E=0;E<S.length;++E){var L=w(S[E]);if(L)return L}}function h(S,w){return S-w}function y(S,w){return S[0]-w[0]||S[1]-w[1]}function v(S,w){return S[1]-w[1]||S[0]-w[0]}function m(S){if(S.length===0)return null;for(var w=[],E=0;E<S.length;++E)w.push(S[E][0],S[E][1]);w.sort(h);var L=w[w.length>>1],C=[],P=[],z=[];for(E=0;E<S.length;++E){var G=S[E];G[1]<L?C.push(G):L<G[0]?P.push(G):z.push(G)}var O=z,H=z.slice();return O.sort(y),H.sort(v),new r(L,m(C),m(P),O,H)}function _(S){this.root=S}n.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},n.insert=function(S){var w=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(w+1)?u(this,S):this.left.insert(S):this.left=m([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(w+1)?u(this,S):this.right.insert(S):this.right=m([S]);else{var E=i.ge(this.leftPoints,S,y),L=i.ge(this.rightPoints,S,v);this.leftPoints.splice(E,0,S),this.rightPoints.splice(L,0,S)}},n.remove=function(S){var w=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(w-1)?p(this,S):(P=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(w-1)?p(this,S):(P=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,L=this.left;L.right;)E=L,L=L.right;if(E===this)L.right=this.right;else{var C=this.left,P=this.right;E.count-=L.count,E.right=L.left,L.left=C,L.right=P}o(this,L),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?o(this,this.left):o(this,this.right);return 1}for(C=i.ge(this.leftPoints,S,y);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S){for(this.count-=1,this.leftPoints.splice(C,1),P=i.ge(this.rightPoints,S,v);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),1}return 0},n.queryPoint=function(S,w){return S<this.mid?this.left&&(E=this.left.queryPoint(S,w))?E:c(this.leftPoints,S,w):S>this.mid?this.right&&(E=this.right.queryPoint(S,w))?E:x(this.rightPoints,S,w):g(this.leftPoints,w);var E},n.queryInterval=function(S,w,E){var L;return S<this.mid&&this.left&&(L=this.left.queryInterval(S,w,E))||w>this.mid&&this.right&&(L=this.right.queryInterval(S,w,E))?L:w<this.mid?c(this.leftPoints,w,E):S>this.mid?x(this.rightPoints,S,E):g(this.leftPoints,E)};var f=_.prototype;f.insert=function(S){this.root?this.root.insert(S):this.root=new r(S[0],null,null,[S],[S])},f.remove=function(S){if(this.root){var w=this.root.remove(S);return w===2&&(this.root=null),w!==0}return!1},f.queryPoint=function(S,w){if(this.root)return this.root.queryPoint(S,w)},f.queryInterval=function(S,w,E){if(S<=w&&this.root)return this.root.queryInterval(S,w,E)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(d){d.exports=function(s){for(var t=new Array(s),i=0;i<s;++i)t[i]=i;return t}},4846:function(d){d.exports=!0},4780:function(d){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}d.exports=function(t){return t!=null&&(s(t)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&s(i.slice(0,0))}(t)||!!t._isBuffer)}},3596:function(d){d.exports=function(s){for(var t,i=s.length,r=0;r<i;r++)if(((t=s.charCodeAt(r))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},3578:function(d){d.exports=function(s,t,i){return s*(1-i)+t*i}},7191:function(d,s,t){var i=t(4690),r=t(9823),n=t(7332),o=t(7787),a=t(7437),u=t(2142),p={length:t(4693),normalize:t(899),dot:t(9305),cross:t(903)},c=r(),x=r(),g=[0,0,0,0],h=[[0,0,0],[0,0,0],[0,0,0]],y=[0,0,0];function v(m,_,f,S,w){m[0]=_[0]*S+f[0]*w,m[1]=_[1]*S+f[1]*w,m[2]=_[2]*S+f[2]*w}d.exports=function(m,_,f,S,w,E){if(_||(_=[0,0,0]),f||(f=[0,0,0]),S||(S=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!i(c,m)||(n(x,c),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(o(x)<1e-8)))return!1;var L,C,P,z,G,O,H,N=c[3],B=c[7],V=c[11],q=c[12],te=c[13],K=c[14],J=c[15];if(N!==0||B!==0||V!==0){if(g[0]=N,g[1]=B,g[2]=V,g[3]=J,!a(x,x))return!1;u(x,x),L=w,P=x,z=(C=g)[0],G=C[1],O=C[2],H=C[3],L[0]=P[0]*z+P[4]*G+P[8]*O+P[12]*H,L[1]=P[1]*z+P[5]*G+P[9]*O+P[13]*H,L[2]=P[2]*z+P[6]*G+P[10]*O+P[14]*H,L[3]=P[3]*z+P[7]*G+P[11]*O+P[15]*H}else w[0]=w[1]=w[2]=0,w[3]=1;if(_[0]=q,_[1]=te,_[2]=K,function(W,Q){W[0][0]=Q[0],W[0][1]=Q[1],W[0][2]=Q[2],W[1][0]=Q[4],W[1][1]=Q[5],W[1][2]=Q[6],W[2][0]=Q[8],W[2][1]=Q[9],W[2][2]=Q[10]}(h,c),f[0]=p.length(h[0]),p.normalize(h[0],h[0]),S[0]=p.dot(h[0],h[1]),v(h[1],h[1],h[0],1,-S[0]),f[1]=p.length(h[1]),p.normalize(h[1],h[1]),S[0]/=f[1],S[1]=p.dot(h[0],h[2]),v(h[2],h[2],h[0],1,-S[1]),S[2]=p.dot(h[1],h[2]),v(h[2],h[2],h[1],1,-S[2]),f[2]=p.length(h[2]),p.normalize(h[2],h[2]),S[1]/=f[2],S[2]/=f[2],p.cross(y,h[1],h[2]),p.dot(h[0],y)<0)for(var Y=0;Y<3;Y++)f[Y]*=-1,h[Y][0]*=-1,h[Y][1]*=-1,h[Y][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0)),h[2][1]>h[1][2]&&(E[0]=-E[0]),h[0][2]>h[2][0]&&(E[1]=-E[1]),h[1][0]>h[0][1]&&(E[2]=-E[2]),!0}},4690:function(d){d.exports=function(s,t){var i=t[15];if(i===0)return!1;for(var r=1/i,n=0;n<16;n++)s[n]=t[n]*r;return!0}},7649:function(d,s,t){var i=t(1868),r=t(1102),n=t(7191),o=t(7787),a=t(1116),u=x(),p=x(),c=x();function x(){return{translate:g(),scale:g(1),skew:g(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function g(h){return[h||0,h||0,h||0]}d.exports=function(h,y,v,m){if(o(y)===0||o(v)===0)return!1;var _=n(y,u.translate,u.scale,u.skew,u.perspective,u.quaternion),f=n(v,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!(!_||!f||(i(c.translate,u.translate,p.translate,m),i(c.skew,u.skew,p.skew,m),i(c.scale,u.scale,p.scale,m),i(c.perspective,u.perspective,p.perspective,m),a(c.quaternion,u.quaternion,p.quaternion,m),r(h,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},1102:function(d,s,t){var i={identity:t(9947),translate:t(998),multiply:t(104),create:t(9823),scale:t(3668),fromRotationTranslation:t(7280)},r=(i.create(),i.create());d.exports=function(n,o,a,u,p,c){return i.identity(n),i.fromRotationTranslation(n,c,o),n[3]=p[0],n[7]=p[1],n[11]=p[2],n[15]=p[3],i.identity(r),u[2]!==0&&(r[9]=u[2],i.multiply(n,n,r)),u[1]!==0&&(r[9]=0,r[8]=u[1],i.multiply(n,n,r)),u[0]!==0&&(r[8]=0,r[4]=u[0],i.multiply(n,n,r)),i.scale(n,n,a),n}},9298:function(d,s,t){var i=t(5070),r=t(7649),n=t(7437),o=t(6109),a=t(7115),u=t(5240),p=t(3012),c=t(998),x=(t(3668),t(899)),g=[0,0,0];function h(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}d.exports=function(m){return new h((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var y=h.prototype;y.recalcMatrix=function(m){var _=this._time,f=i.le(_,m),S=this.computedMatrix;if(!(f<0)){var w=this._components;if(f===_.length-1)for(var E=16*f,L=0;L<16;++L)S[L]=w[E++];else{var C=_[f+1]-_[f],P=(E=16*f,this.prevMatrix),z=!0;for(L=0;L<16;++L)P[L]=w[E++];var G=this.nextMatrix;for(L=0;L<16;++L)G[L]=w[E++],z=z&&P[L]===G[L];if(C<1e-6||z)for(L=0;L<16;++L)S[L]=P[L];else r(S,P,G,(m-_[f])/C)}var O=this.computedUp;O[0]=S[1],O[1]=S[5],O[2]=S[9],x(O,O);var H=this.computedInverse;n(H,S);var N=this.computedEye,B=H[15];N[0]=H[12]/B,N[1]=H[13]/B,N[2]=H[14]/B;var V=this.computedCenter,q=Math.exp(this.computedRadius[0]);for(L=0;L<3;++L)V[L]=N[L]-S[2+4*L]*q}},y.idle=function(m){if(!(m<this.lastT())){for(var _=this._components,f=_.length-16,S=0;S<16;++S)_.push(_[f++]);this._time.push(m)}},y.flush=function(m){var _=i.gt(this._time,m)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},y.lastT=function(){return this._time[this._time.length-1]},y.lookAt=function(m,_,f,S){this.recalcMatrix(m),_=_||this.computedEye,f=f||g,S=S||this.computedUp,this.setMatrix(m,p(this.computedMatrix,_,f,S));for(var w=0,E=0;E<3;++E)w+=Math.pow(f[E]-_[E],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},y.rotate=function(m,_,f,S){this.recalcMatrix(m);var w=this.computedInverse;_&&a(w,w,_),f&&o(w,w,f),S&&u(w,w,S),this.setMatrix(m,n(this.computedMatrix,w))};var v=[0,0,0];y.pan=function(m,_,f,S){v[0]=-(_||0),v[1]=-(f||0),v[2]=-(S||0),this.recalcMatrix(m);var w=this.computedInverse;c(w,w,v),this.setMatrix(m,n(w,w))},y.translate=function(m,_,f,S){v[0]=_||0,v[1]=f||0,v[2]=S||0,this.recalcMatrix(m);var w=this.computedMatrix;c(w,w,v),this.setMatrix(m,w)},y.setMatrix=function(m,_){if(!(m<this.lastT())){this._time.push(m);for(var f=0;f<16;++f)this._components.push(_[f])}},y.setDistance=function(m,_){this.computedRadius[0]=_},y.setDistanceLimits=function(m,_){var f=this._limits;f[0]=m,f[1]=_},y.getDistanceLimits=function(m){var _=this._limits;return m?(m[0]=_[0],m[1]=_[1],m):_}},3266:function(d,s,t){d.exports=function(r){var n=r.length;if(n<3){for(var o=new Array(n),a=0;a<n;++a)o[a]=a;return n===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:o}var u=new Array(n);for(a=0;a<n;++a)u[a]=a;u.sort(function(_,f){return r[_][0]-r[f][0]||r[_][1]-r[f][1]});var p=[u[0],u[1]],c=[u[0],u[1]];for(a=2;a<n;++a){for(var x=u[a],g=r[x],h=p.length;h>1&&i(r[p[h-2]],r[p[h-1]],g)<=0;)h-=1,p.pop();for(p.push(x),h=c.length;h>1&&i(r[c[h-2]],r[c[h-1]],g)>=0;)h-=1,c.pop();c.push(x)}o=new Array(c.length+p.length-2);for(var y=0,v=(a=0,p.length);a<v;++a)o[y++]=p[a];for(var m=c.length-2;m>0;--m)o[y++]=c[m];return o};var i=t(417)[3]},6145:function(d,s,t){d.exports=function(r,n){n||(n=r,r=window);var o=0,a=0,u=0,p={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function x(E){var L=!1;return"altKey"in E&&(L=L||E.altKey!==p.alt,p.alt=!!E.altKey),"shiftKey"in E&&(L=L||E.shiftKey!==p.shift,p.shift=!!E.shiftKey),"ctrlKey"in E&&(L=L||E.ctrlKey!==p.control,p.control=!!E.ctrlKey),"metaKey"in E&&(L=L||E.metaKey!==p.meta,p.meta=!!E.metaKey),L}function g(E,L){var C=i.x(L),P=i.y(L);"buttons"in L&&(E=0|L.buttons),(E!==o||C!==a||P!==u||x(L))&&(o=0|E,a=C||0,u=P||0,n&&n(o,a,u,p))}function h(E){g(0,E)}function y(){(o||a||u||p.shift||p.alt||p.meta||p.control)&&(a=u=0,o=0,p.shift=p.alt=p.control=p.meta=!1,n&&n(0,0,0,p))}function v(E){x(E)&&n&&n(o,a,u,p)}function m(E){i.buttons(E)===0?g(0,E):g(o,E)}function _(E){g(o|i.buttons(E),E)}function f(E){g(o&~i.buttons(E),E)}function S(){c||(c=!0,r.addEventListener("mousemove",m),r.addEventListener("mousedown",_),r.addEventListener("mouseup",f),r.addEventListener("mouseleave",h),r.addEventListener("mouseenter",h),r.addEventListener("mouseout",h),r.addEventListener("mouseover",h),r.addEventListener("blur",y),r.addEventListener("keyup",v),r.addEventListener("keydown",v),r.addEventListener("keypress",v),r!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",v),window.addEventListener("keydown",v),window.addEventListener("keypress",v)))}S();var w={element:r};return Object.defineProperties(w,{enabled:{get:function(){return c},set:function(E){E?S():c&&(c=!1,r.removeEventListener("mousemove",m),r.removeEventListener("mousedown",_),r.removeEventListener("mouseup",f),r.removeEventListener("mouseleave",h),r.removeEventListener("mouseenter",h),r.removeEventListener("mouseout",h),r.removeEventListener("mouseover",h),r.removeEventListener("blur",y),r.removeEventListener("keyup",v),r.removeEventListener("keydown",v),r.removeEventListener("keypress",v),r!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",v),window.removeEventListener("keydown",v),window.removeEventListener("keypress",v)))},enumerable:!0},buttons:{get:function(){return o},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),w};var i=t(4110)},2565:function(d){var s={left:0,top:0};d.exports=function(t,i,r){i=i||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,o=t.clientX||0,a=t.clientY||0,u=(n=i)===window||n===document||n===document.body?s:n.getBoundingClientRect();return r[0]=o-u.left,r[1]=a-u.top,r}},4110:function(d,s){function t(i){return i.target||i.srcElement||window}s.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((r=i.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in i){var r;if((r=i.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},s.element=t,s.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var r=t(i).getBoundingClientRect();return i.clientX-r.left}return 0},s.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var r=t(i).getBoundingClientRect();return i.clientY-r.top}return 0}},6475:function(d,s,t){var i=t(14);d.exports=function(r,n,o){typeof r=="function"&&(o=!!n,n=r,r=window);var a=i("ex",r),u=function(p){o&&p.preventDefault();var c=p.deltaX||0,x=p.deltaY||0,g=p.deltaZ||0,h=1;switch(p.deltaMode){case 1:h=a;break;case 2:h=window.innerHeight}if(x*=h,g*=h,(c*=h)||x||g)return n(c,x,g,p)};return r.addEventListener("wheel",u),u}},9284:function(d,s,t){var i=t(5306);d.exports=function(n){function o(g){throw new Error("ndarray-extract-contour: "+g)}typeof n!="object"&&o("Must specify arguments");var a=n.order;Array.isArray(a)||o("Must specify order");var u=n.arrayArguments||1;u<1&&o("Must have at least one array argument"),(n.scalarArguments||0)<0&&o("Scalar arg count must be > 0"),typeof n.vertex!="function"&&o("Must specify vertex creation function"),typeof n.cell!="function"&&o("Must specify cell creation function"),typeof n.phase!="function"&&o("Must specify phase function");for(var p=n.getters||[],c=new Array(u),x=0;x<u;++x)p.indexOf(x)>=0?c[x]=!0:c[x]=!1;return function(g,h,y,v,m,_){var f=[_,m].join(",");return(0,r[f])(g,h,y,i.mallocUint32,i.freeUint32)}(n.vertex,n.cell,n.phase,0,a,c)};var r={"false,0,1":function(n,o,a,u,p){return function(c,x,g,h){var y,v=0|c.shape[0],m=0|c.shape[1],_=c.data,f=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=f,L=0|-S,C=0,P=0|-w,z=0,G=-S-w|0,O=0,H=0|S,N=w-S*v|0,B=0,V=0,q=0,te=2*v|0,K=u(te),J=u(te),Y=0,W=0,Q=-1,ne=-1,re=0,ae=0|-v,ue=0|v,pe=0,ge=-v-1|0,_e=v-1|0,me=0,ve=0,Oe=0;for(B=0;B<v;++B)K[Y++]=a(_[E],x,g,h),E+=H;if(E+=N,m>0){if(V=1,K[Y++]=a(_[E],x,g,h),E+=H,v>0)for(B=1,y=_[E],W=K[Y]=a(y,x,g,h),re=K[Y+Q],pe=K[Y+ae],me=K[Y+ge],W===re&&W===pe&&W===me||(C=_[E+L],z=_[E+P],O=_[E+G],n(B,V,y,C,z,O,W,re,pe,me,x,g,h),ve=J[Y]=q++),Y+=1,E+=H,B=2;B<v;++B)y=_[E],W=K[Y]=a(y,x,g,h),re=K[Y+Q],pe=K[Y+ae],me=K[Y+ge],W===re&&W===pe&&W===me||(C=_[E+L],z=_[E+P],O=_[E+G],n(B,V,y,C,z,O,W,re,pe,me,x,g,h),ve=J[Y]=q++,me!==re&&o(J[Y+Q],ve,O,C,me,re,x,g,h)),Y+=1,E+=H;for(E+=N,Y=0,Oe=Q,Q=ne,ne=Oe,Oe=ae,ae=ue,ue=Oe,Oe=ge,ge=_e,_e=Oe,V=2;V<m;++V){if(K[Y++]=a(_[E],x,g,h),E+=H,v>0)for(B=1,y=_[E],W=K[Y]=a(y,x,g,h),re=K[Y+Q],pe=K[Y+ae],me=K[Y+ge],W===re&&W===pe&&W===me||(C=_[E+L],z=_[E+P],O=_[E+G],n(B,V,y,C,z,O,W,re,pe,me,x,g,h),ve=J[Y]=q++,me!==pe&&o(J[Y+ae],ve,z,O,pe,me,x,g,h)),Y+=1,E+=H,B=2;B<v;++B)y=_[E],W=K[Y]=a(y,x,g,h),re=K[Y+Q],pe=K[Y+ae],me=K[Y+ge],W===re&&W===pe&&W===me||(C=_[E+L],z=_[E+P],O=_[E+G],n(B,V,y,C,z,O,W,re,pe,me,x,g,h),ve=J[Y]=q++,me!==pe&&o(J[Y+ae],ve,z,O,pe,me,x,g,h),me!==re&&o(J[Y+Q],ve,O,C,me,re,x,g,h)),Y+=1,E+=H;1&V&&(Y=0),Oe=Q,Q=ne,ne=Oe,Oe=ae,ae=ue,ue=Oe,Oe=ge,ge=_e,_e=Oe,E+=N}}p(J),p(K)}},"false,1,0":function(n,o,a,u,p){return function(c,x,g,h){var y,v=0|c.shape[0],m=0|c.shape[1],_=c.data,f=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=f,L=0|-S,C=0,P=0|-w,z=0,G=-S-w|0,O=0,H=0|w,N=S-w*m|0,B=0,V=0,q=0,te=2*m|0,K=u(te),J=u(te),Y=0,W=0,Q=-1,ne=-1,re=0,ae=0|-m,ue=0|m,pe=0,ge=-m-1|0,_e=m-1|0,me=0,ve=0,Oe=0;for(V=0;V<m;++V)K[Y++]=a(_[E],x,g,h),E+=H;if(E+=N,v>0){if(B=1,K[Y++]=a(_[E],x,g,h),E+=H,m>0)for(V=1,y=_[E],W=K[Y]=a(y,x,g,h),pe=K[Y+ae],re=K[Y+Q],me=K[Y+ge],W===pe&&W===re&&W===me||(C=_[E+L],z=_[E+P],O=_[E+G],n(B,V,y,C,z,O,W,pe,re,me,x,g,h),ve=J[Y]=q++),Y+=1,E+=H,V=2;V<m;++V)y=_[E],W=K[Y]=a(y,x,g,h),pe=K[Y+ae],re=K[Y+Q],me=K[Y+ge],W===pe&&W===re&&W===me||(C=_[E+L],z=_[E+P],O=_[E+G],n(B,V,y,C,z,O,W,pe,re,me,x,g,h),ve=J[Y]=q++,me!==re&&o(J[Y+Q],ve,z,O,re,me,x,g,h)),Y+=1,E+=H;for(E+=N,Y=0,Oe=ae,ae=ue,ue=Oe,Oe=Q,Q=ne,ne=Oe,Oe=ge,ge=_e,_e=Oe,B=2;B<v;++B){if(K[Y++]=a(_[E],x,g,h),E+=H,m>0)for(V=1,y=_[E],W=K[Y]=a(y,x,g,h),pe=K[Y+ae],re=K[Y+Q],me=K[Y+ge],W===pe&&W===re&&W===me||(C=_[E+L],z=_[E+P],O=_[E+G],n(B,V,y,C,z,O,W,pe,re,me,x,g,h),ve=J[Y]=q++,me!==pe&&o(J[Y+ae],ve,O,C,me,pe,x,g,h)),Y+=1,E+=H,V=2;V<m;++V)y=_[E],W=K[Y]=a(y,x,g,h),pe=K[Y+ae],re=K[Y+Q],me=K[Y+ge],W===pe&&W===re&&W===me||(C=_[E+L],z=_[E+P],O=_[E+G],n(B,V,y,C,z,O,W,pe,re,me,x,g,h),ve=J[Y]=q++,me!==re&&o(J[Y+Q],ve,z,O,re,me,x,g,h),me!==pe&&o(J[Y+ae],ve,O,C,me,pe,x,g,h)),Y+=1,E+=H;1&B&&(Y=0),Oe=ae,ae=ue,ue=Oe,Oe=Q,Q=ne,ne=Oe,Oe=ge,ge=_e,_e=Oe,E+=N}}p(J),p(K)}}}},9144:function(d,s,t){var i=t(3094),r={zero:function(v,m,_,f){var S=v[0];f|=0;var w=0,E=_[0];for(w=0;w<S;++w)m[f]=0,f+=E},fdTemplate1:function(v,m,_,f,S,w,E){var L=v[0],C=_[0],P=-1*C,z=C;f|=0,E|=0;var G=0,O=C,H=w[0];for(G=0;G<L;++G)S[E]=.5*(m[f+P]-m[f+z]),f+=O,E+=H},fdTemplate2:function(v,m,_,f,S,w,E,L,C,P){var z=v[0],G=v[1],O=_[0],H=_[1],N=w[0],B=w[1],V=C[0],q=C[1],te=-1*O,K=O,J=-1*H,Y=H;f|=0,E|=0,P|=0;var W=0,Q=0,ne=H,re=O-G*H,ae=B,ue=N-G*B,pe=q,ge=V-G*q;for(Q=0;Q<z;++Q){for(W=0;W<G;++W)S[E]=.5*(m[f+te]-m[f+K]),L[P]=.5*(m[f+J]-m[f+Y]),f+=ne,E+=ae,P+=pe;f+=re,E+=ue,P+=ge}}},n={cdiff:function(v){var m={};return function(_,f,S){var w=_.dtype,E=_.order,L=f.dtype,C=f.order,P=S.dtype,z=S.order,G=[w,E.join(),L,C.join(),P,z.join()].join(),O=m[G];return O||(m[G]=O=v([w,E,L,C,P,z])),O(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}},zero:function(v){var m={};return function(_){var f=_.dtype,S=_.order,w=[f,S.join()].join(),E=m[w];return E||(m[w]=E=v([f,S])),E(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(v){var m={};return function(_,f){var S=_.dtype,w=_.order,E=f.dtype,L=f.order,C=[S,w.join(),E,L.join()].join(),P=m[C];return P||(m[C]=P=v([S,w,E,L])),P(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(v){var m={};return function(_,f,S){var w=_.dtype,E=_.order,L=f.dtype,C=f.order,P=S.dtype,z=S.order,G=[w,E.join(),L,C.join(),P,z.join()].join(),O=m[G];return O||(m[G]=O=v([w,E,L,C,P,z])),O(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}}};function o(v){return(0,n[v.funcName])(a.bind(void 0,v))}function a(v){return r[v.funcName]}function u(v){return o({funcName:v.funcName})}var p={},c={},x=u({funcName:"cdiff"}),g=u({funcName:"zero"});function h(v){return v in p?p[v]:p[v]=u({funcName:"fdTemplate"+v})}function y(v,m,_,f){return function(S,w){var E=w.shape.slice();return E[0]>2&&E[1]>2&&f(w.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(_(w.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),m(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(_(w.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(_(w.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),m(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(_(w.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}d.exports=function(v,m,_){return Array.isArray(_)||(_=i(m.dimension,typeof _=="string"?_:"clamp")),m.size===0?v:m.dimension===0?(v.set(0),v):function(f){var S=f.join();if(C=c[S])return C;for(var w=f.length,E=[x,g],L=1;L<=w;++L)E.push(h(L));var C=y.apply(void 0,E);return c[S]=C,C}(_)(v,m)}},3581:function(d){function s(n,o){var a=Math.floor(o),u=o-a,p=0<=a&&a<n.shape[0],c=0<=a+1&&a+1<n.shape[0];return(1-u)*(p?+n.get(a):0)+u*(c?+n.get(a+1):0)}function t(n,o,a){var u=Math.floor(o),p=o-u,c=0<=u&&u<n.shape[0],x=0<=u+1&&u+1<n.shape[0],g=Math.floor(a),h=a-g,y=0<=g&&g<n.shape[1],v=0<=g+1&&g+1<n.shape[1],m=c&&y?n.get(u,g):0,_=c&&v?n.get(u,g+1):0;return(1-h)*((1-p)*m+p*(x&&y?n.get(u+1,g):0))+h*((1-p)*_+p*(x&&v?n.get(u+1,g+1):0))}function i(n,o,a,u){var p=Math.floor(o),c=o-p,x=0<=p&&p<n.shape[0],g=0<=p+1&&p+1<n.shape[0],h=Math.floor(a),y=a-h,v=0<=h&&h<n.shape[1],m=0<=h+1&&h+1<n.shape[1],_=Math.floor(u),f=u-_,S=0<=_&&_<n.shape[2],w=0<=_+1&&_+1<n.shape[2],E=x&&v&&S?n.get(p,h,_):0,L=x&&m&&S?n.get(p,h+1,_):0,C=g&&v&&S?n.get(p+1,h,_):0,P=g&&m&&S?n.get(p+1,h+1,_):0,z=x&&v&&w?n.get(p,h,_+1):0,G=x&&m&&w?n.get(p,h+1,_+1):0;return(1-f)*((1-y)*((1-c)*E+c*C)+y*((1-c)*L+c*P))+f*((1-y)*((1-c)*z+c*(g&&v&&w?n.get(p+1,h,_+1):0))+y*((1-c)*G+c*(g&&m&&w?n.get(p+1,h+1,_+1):0)))}function r(n){var o,a,u=0|n.shape.length,p=new Array(u),c=new Array(u),x=new Array(u),g=new Array(u);for(o=0;o<u;++o)a=+arguments[o+1],p[o]=Math.floor(a),c[o]=a-p[o],x[o]=0<=p[o]&&p[o]<n.shape[o],g[o]=0<=p[o]+1&&p[o]+1<n.shape[o];var h,y,v,m=0;e:for(o=0;o<1<<u;++o){for(y=1,v=n.offset,h=0;h<u;++h)if(o&1<<h){if(!g[h])continue e;y*=c[h],v+=n.stride[h]*(p[h]+1)}else{if(!x[h])continue e;y*=1-c[h],v+=n.stride[h]*p[h]}m+=y*n.data[v]}return m}d.exports=function(n,o,a,u){switch(n.shape.length){case 0:return 0;case 1:return s(n,o);case 2:return t(n,o,a);case 3:return i(n,o,a,u);default:return r.apply(void 0,arguments)}},d.exports.d1=s,d.exports.d2=t,d.exports.d3=i},7498:function(d,s){var t={"float64,2,1,0":function(){return function(a,u,p,c,x){var g=a[0],h=a[1],y=a[2],v=p[0],m=p[1],_=p[2];c|=0;var f=0,S=0,w=0,E=_,L=m-y*_,C=v-h*m;for(w=0;w<g;++w){for(S=0;S<h;++S){for(f=0;f<y;++f)u[c]/=x,c+=E;c+=L}c+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(a,u,p,c,x,g,h,y){for(var v=a[0],m=a[1],_=a[2],f=p[0],S=p[1],w=p[2],E=g[0],L=g[1],C=g[2],P=c|=0,z=h|=0,G=0|a[0];G>0;){G<64?(v=G,G=0):(v=64,G-=64);for(var O=0|a[1];O>0;){O<64?(m=O,O=0):(m=64,O-=64),c=P+G*f+O*S,h=z+G*E+O*L;var H=0,N=0,B=0,V=w,q=f-_*w,te=S-v*f,K=C,J=E-_*C,Y=L-v*E;for(B=0;B<m;++B){for(N=0;N<v;++N){for(H=0;H<_;++H)u[c]=x[h]*y,c+=V,h+=K;c+=q,h+=J}c+=te,h+=Y}}}}},"float32,1,0,float32,1,0":function(){return function(a,u,p,c,x,g,h){var y=a[0],v=a[1],m=p[0],_=p[1],f=g[0],S=g[1];c|=0,h|=0;var w=0,E=0,L=_,C=m-v*_,P=S,z=f-v*S;for(E=0;E<y;++E){for(w=0;w<v;++w)u[c]=x[h],c+=L,h+=P;c+=C,h+=z}}},"float32,1,0,float32,0,1":function(){return function(a,u,p,c,x,g,h){for(var y=a[0],v=a[1],m=p[0],_=p[1],f=g[0],S=g[1],w=c|=0,E=h|=0,L=0|a[1];L>0;){L<64?(v=L,L=0):(v=64,L-=64);for(var C=0|a[0];C>0;){C<64?(y=C,C=0):(y=64,C-=64),c=w+L*_+C*m,h=E+L*S+C*f;var P=0,z=0,G=_,O=m-v*_,H=S,N=f-v*S;for(z=0;z<y;++z){for(P=0;P<v;++P)u[c]=x[h],c+=G,h+=H;c+=O,h+=N}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(a,u,p,c,x,g,h){for(var y=a[0],v=a[1],m=a[2],_=p[0],f=p[1],S=p[2],w=g[0],E=g[1],L=g[2],C=c|=0,P=h|=0,z=0|a[2];z>0;){z<64?(m=z,z=0):(m=64,z-=64);for(var G=0|a[0];G>0;){G<64?(y=G,G=0):(y=64,G-=64);for(var O=0|a[1];O>0;){O<64?(v=O,O=0):(v=64,O-=64),c=C+z*S+G*_+O*f,h=P+z*L+G*w+O*E;var H=0,N=0,B=0,V=S,q=_-m*S,te=f-y*_,K=L,J=w-m*L,Y=E-y*w;for(B=0;B<v;++B){for(N=0;N<y;++N){for(H=0;H<m;++H)u[c]=x[h],c+=V,h+=K;c+=q,h+=J}c+=te,h+=Y}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(a,u,p,c,x,g,h){var y=a[0],v=a[1],m=a[2],_=p[0],f=p[1],S=p[2],w=g[0],E=g[1],L=g[2];c|=0,h|=0;var C=0,P=0,z=0,G=S,O=_-m*S,H=f-y*_,N=L,B=w-m*L,V=E-y*w;for(z=0;z<v;++z){for(P=0;P<y;++P){for(C=0;C<m;++C)u[c]=x[h],c+=G,h+=N;c+=O,h+=B}c+=H,h+=V}}}},i=function(a,u){var p=u.join(",");return(0,t[p])()},r={mul:function(a){var u={};return function(p,c,x){var g=p.dtype,h=p.order,y=c.dtype,v=c.order,m=x.dtype,_=x.order,f=[g,h.join(),y,v.join(),m,_.join()].join(),S=u[f];return S||(u[f]=S=a([g,h,y,v,m,_])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},muls:function(a){var u={};return function(p,c,x){var g=p.dtype,h=p.order,y=c.dtype,v=c.order,m=[g,h.join(),y,v.join()].join(),_=u[m];return _||(u[m]=_=a([g,h,y,v])),_(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x)}},mulseq:function(a){var u={};return function(p,c){var x=p.dtype,g=p.order,h=[x,g.join()].join(),y=u[h];return y||(u[h]=y=a([x,g])),y(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},div:function(a){var u={};return function(p,c,x){var g=p.dtype,h=p.order,y=c.dtype,v=c.order,m=x.dtype,_=x.order,f=[g,h.join(),y,v.join(),m,_.join()].join(),S=u[f];return S||(u[f]=S=a([g,h,y,v,m,_])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},divs:function(a){var u={};return function(p,c,x){var g=p.dtype,h=p.order,y=c.dtype,v=c.order,m=[g,h.join(),y,v.join()].join(),_=u[m];return _||(u[m]=_=a([g,h,y,v])),_(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x)}},divseq:function(a){var u={};return function(p,c){var x=p.dtype,g=p.order,h=[x,g.join()].join(),y=u[h];return y||(u[h]=y=a([x,g])),y(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},assign:function(a){var u={};return function(p,c){var x=p.dtype,g=p.order,h=c.dtype,y=c.order,v=[x,g.join(),h,y.join()].join(),m=u[v];return m||(u[v]=m=a([x,g,h,y])),m(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset)}}};function n(a){return u={funcName:a.funcName},(0,r[u.funcName])(i.bind(void 0,u));var u}var o={mul:"*",div:"/"};(function(){for(var a in o)s[a]=n({funcName:a}),s[a+"s"]=n({funcName:a+"s"}),s[a+"seq"]=n({funcName:a+"seq"})})(),s.assign=n({funcName:"assign"})},7382:function(d,s,t){var i=t(5050),r=t(9262);d.exports=function(n,o){for(var a=[],u=n,p=1;Array.isArray(u);)a.push(u.length),p*=u.length,u=u[0];return a.length===0?i():(o||(o=i(new Float64Array(p),a)),r(o,n),o)}},9262:function(d){d.exports=function(s){var t={};return function(i,r){var n=i.dtype,o=i.order,a=[n,o.join()].join(),u=t[a];return u||(t[a]=u=s([n,o])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,r)}}((function(){return function(s,t,i,r,n){var o=s[0],a=s[1],u=s[2],p=i[0],c=i[1],x=i[2],g=[0,0,0];r|=0;var h=0,y=0,v=0,m=x,_=c-u*x,f=p-a*c;for(v=0;v<o;++v){for(y=0;y<a;++y){for(h=0;h<u;++h){var S,w=n;for(S=0;S<g.length-1;++S)w=w[g[S]];t[r]=w[g[g.length-1]],r+=m,++g[2]}r+=_,g[2]-=u,++g[1]}r+=f,g[1]-=a,++g[0]}}}).bind(void 0,{funcName:"convert"}))},8139:function(d,s,t){var i=t(5306);function r(u){return u==="uint32"?[i.mallocUint32,i.freeUint32]:null}var n={"uint32,1,0":function(u,p){return function(c,x,g,h,y,v,m,_,f,S,w){var E,L,C,P,z,G,O,H,N=c*y+h,B=u(_);for(E=c+1;E<=x;++E){for(L=E,C=N+=y,z=0,G=N,P=0;P<_;++P)B[z++]=g[G],G+=f;e:for(;L-- >c;){z=0,G=C-y;t:for(P=0;P<_;++P){if((O=g[G])<(H=B[z]))break e;if(O>H)break t;G+=S,z+=w}for(z=C,G=C-y,P=0;P<_;++P)g[z]=g[G],z+=f,G+=f;C-=y}for(z=C,G=0,P=0;P<_;++P)g[z]=B[G++],z+=f}p(B)}}},o={"uint32,1,0":function(u,p,c){return function x(g,h,y,v,m,_,f,S,w,E,L){var C,P,z,G,O,H,N,B,V,q,te,K,J,Y,W,Q,ne,re,ae,ue,pe,ge,_e,me,ve,Oe=(h-g+1)/6|0,Me=g+Oe,Te=h-Oe,se=g+h>>1,oe=se-Oe,he=se+Oe,Ee=Me,ke=oe,be=se,Ie=he,Fe=Te,ce=g+1,we=h-1,ye=!0,Ce=0,Re=0,ze=0,He=S,Ge=p(He),Je=p(He);te=m*Ee,K=m*ke,ve=v;e:for(q=0;q<S;++q){if(B=K+ve,(ze=y[N=te+ve]-y[B])>0){P=Ee,Ee=ke,ke=P;break e}if(ze<0)break e;ve+=E}te=m*Ie,K=m*Fe,ve=v;e:for(q=0;q<S;++q){if(B=K+ve,(ze=y[N=te+ve]-y[B])>0){P=Ie,Ie=Fe,Fe=P;break e}if(ze<0)break e;ve+=E}te=m*Ee,K=m*be,ve=v;e:for(q=0;q<S;++q){if(B=K+ve,(ze=y[N=te+ve]-y[B])>0){P=Ee,Ee=be,be=P;break e}if(ze<0)break e;ve+=E}te=m*ke,K=m*be,ve=v;e:for(q=0;q<S;++q){if(B=K+ve,(ze=y[N=te+ve]-y[B])>0){P=ke,ke=be,be=P;break e}if(ze<0)break e;ve+=E}te=m*Ee,K=m*Ie,ve=v;e:for(q=0;q<S;++q){if(B=K+ve,(ze=y[N=te+ve]-y[B])>0){P=Ee,Ee=Ie,Ie=P;break e}if(ze<0)break e;ve+=E}te=m*be,K=m*Ie,ve=v;e:for(q=0;q<S;++q){if(B=K+ve,(ze=y[N=te+ve]-y[B])>0){P=be,be=Ie,Ie=P;break e}if(ze<0)break e;ve+=E}te=m*ke,K=m*Fe,ve=v;e:for(q=0;q<S;++q){if(B=K+ve,(ze=y[N=te+ve]-y[B])>0){P=ke,ke=Fe,Fe=P;break e}if(ze<0)break e;ve+=E}te=m*ke,K=m*be,ve=v;e:for(q=0;q<S;++q){if(B=K+ve,(ze=y[N=te+ve]-y[B])>0){P=ke,ke=be,be=P;break e}if(ze<0)break e;ve+=E}te=m*Ie,K=m*Fe,ve=v;e:for(q=0;q<S;++q){if(B=K+ve,(ze=y[N=te+ve]-y[B])>0){P=Ie,Ie=Fe,Fe=P;break e}if(ze<0)break e;ve+=E}for(te=m*Ee,K=m*ke,J=m*be,Y=m*Ie,W=m*Fe,Q=m*Me,ne=m*se,re=m*Te,me=0,ve=v,q=0;q<S;++q)N=te+ve,B=K+ve,V=J+ve,ae=Y+ve,ue=W+ve,pe=Q+ve,ge=ne+ve,_e=re+ve,Ge[me]=y[B],Je[me]=y[ae],ye=ye&&Ge[me]===Je[me],z=y[N],G=y[V],O=y[ue],y[pe]=z,y[ge]=G,y[_e]=O,++me,ve+=w;for(te=m*oe,K=m*g,ve=v,q=0;q<S;++q)B=K+ve,y[N=te+ve]=y[B],ve+=w;for(te=m*he,K=m*h,ve=v,q=0;q<S;++q)B=K+ve,y[N=te+ve]=y[B],ve+=w;if(ye)for(H=ce;H<=we;++H){for(N=v+H*m,me=0,q=0;q<S&&(ze=y[N]-Ge[me])==0;++q)me+=L,N+=E;if(ze!==0)if(ze<0){if(H!==ce)for(te=m*H,K=m*ce,ve=v,q=0;q<S;++q)B=K+ve,C=y[N=te+ve],y[N]=y[B],y[B]=C,ve+=w;++ce}else for(;;){for(N=v+we*m,me=0,q=0;q<S&&(ze=y[N]-Ge[me])==0;++q)me+=L,N+=E;if(!(ze>0)){if(ze<0){for(te=m*H,K=m*ce,J=m*we,ve=v,q=0;q<S;++q)B=K+ve,V=J+ve,C=y[N=te+ve],y[N]=y[B],y[B]=y[V],y[V]=C,ve+=w;++ce,--we;break}for(te=m*H,K=m*we,ve=v,q=0;q<S;++q)B=K+ve,C=y[N=te+ve],y[N]=y[B],y[B]=C,ve+=w;--we;break}we--}}else for(H=ce;H<=we;++H){for(N=v+H*m,me=0,q=0;q<S&&(Ce=y[N]-Ge[me])==0;++q)me+=L,N+=E;if(Ce<0){if(H!==ce)for(te=m*H,K=m*ce,ve=v,q=0;q<S;++q)B=K+ve,C=y[N=te+ve],y[N]=y[B],y[B]=C,ve+=w;++ce}else{for(N=v+H*m,me=0,q=0;q<S&&(Re=y[N]-Je[me])==0;++q)me+=L,N+=E;if(Re>0)for(;;){for(N=v+we*m,me=0,q=0;q<S&&(ze=y[N]-Je[me])==0;++q)me+=L,N+=E;if(!(ze>0)){for(N=v+we*m,me=0,q=0;q<S&&(ze=y[N]-Ge[me])==0;++q)me+=L,N+=E;if(ze<0){for(te=m*H,K=m*ce,J=m*we,ve=v,q=0;q<S;++q)B=K+ve,V=J+ve,C=y[N=te+ve],y[N]=y[B],y[B]=y[V],y[V]=C,ve+=w;++ce,--we}else{for(te=m*H,K=m*we,ve=v,q=0;q<S;++q)B=K+ve,C=y[N=te+ve],y[N]=y[B],y[B]=C,ve+=w;--we}break}if(--we<H)break}}}for(te=m*g,K=m*(ce-1),me=0,ve=v,q=0;q<S;++q)B=K+ve,y[N=te+ve]=y[B],y[B]=Ge[me],++me,ve+=w;for(te=m*h,K=m*(we+1),me=0,ve=v,q=0;q<S;++q)B=K+ve,y[N=te+ve]=y[B],y[B]=Je[me],++me,ve+=w;if(ce-2-g<=32?u(g,ce-2,y,v,m,_,f,S,w,E,L):x(g,ce-2,y,v,m,_,f,S,w,E,L),h-(we+2)<=32?u(we+2,h,y,v,m,_,f,S,w,E,L):x(we+2,h,y,v,m,_,f,S,w,E,L),ye)return c(Ge),void c(Je);if(ce<Me&&we>Te){e:for(;;){for(N=v+ce*m,me=0,ve=v,q=0;q<S;++q){if(y[N]!==Ge[me])break e;++me,N+=w}++ce}e:for(;;){for(N=v+we*m,me=0,ve=v,q=0;q<S;++q){if(y[N]!==Je[me])break e;++me,N+=w}--we}for(H=ce;H<=we;++H){for(N=v+H*m,me=0,q=0;q<S&&(Ce=y[N]-Ge[me])==0;++q)me+=L,N+=E;if(Ce===0){if(H!==ce)for(te=m*H,K=m*ce,ve=v,q=0;q<S;++q)B=K+ve,C=y[N=te+ve],y[N]=y[B],y[B]=C,ve+=w;++ce}else{for(N=v+H*m,me=0,q=0;q<S&&(Re=y[N]-Je[me])==0;++q)me+=L,N+=E;if(Re===0)for(;;){for(N=v+we*m,me=0,q=0;q<S&&(ze=y[N]-Je[me])==0;++q)me+=L,N+=E;if(ze!==0){for(N=v+we*m,me=0,q=0;q<S&&(ze=y[N]-Ge[me])==0;++q)me+=L,N+=E;if(ze<0){for(te=m*H,K=m*ce,J=m*we,ve=v,q=0;q<S;++q)B=K+ve,V=J+ve,C=y[N=te+ve],y[N]=y[B],y[B]=y[V],y[V]=C,ve+=w;++ce,--we}else{for(te=m*H,K=m*we,ve=v,q=0;q<S;++q)B=K+ve,C=y[N=te+ve],y[N]=y[B],y[B]=C,ve+=w;--we}break}if(--we<H)break}}}}c(Ge),c(Je),we-ce<=32?u(ce,we,y,v,m,_,f,S,w,E,L):x(ce,we,y,v,m,_,f,S,w,E,L)}}},a={"uint32,1,0":function(u,p){return function(c){var x=c.data,g=0|c.offset,h=c.shape,y=c.stride,v=0|y[0],m=0|h[0],_=0|y[1],f=0|h[1],S=_,w=_;m<=32?u(0,m-1,x,g,v,_,m,f,S,w,1):p(0,m-1,x,g,v,_,m,f,S,w,1)}}};d.exports=function(u,p){var c=[p,u].join(","),x=a[c],g=function(y,v){var m=r(v),_=[v,y].join(","),f=n[_];return m?f(m[0],m[1]):f()}(u,p),h=function(y,v,m){var _=r(v),f=[v,y].join(","),S=o[f];return y.length>1&&_?S(m,_[0],_[1]):S(m)}(u,p,g);return x(g,h)}},8729:function(d,s,t){var i=t(8139),r={};d.exports=function(n){var o=n.order,a=n.dtype,u=[o,a].join(":"),p=r[u];return p||(r[u]=p=i(o,a)),p(n),n}},5050:function(d,s,t){var i=t(4780),r=typeof Float64Array<"u";function n(c,x){return c[0]-x[0]}function o(){var c,x=this.stride,g=new Array(x.length);for(c=0;c<g.length;++c)g[c]=[Math.abs(x[c]),c];g.sort(n);var h=new Array(g.length);for(c=0;c<h.length;++c)h[c]=g[c][1];return h}var a={T:function(c){function x(h){this.data=h}var g=x.prototype;return g.dtype=c,g.index=function(){return-1},g.size=0,g.dimension=-1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new x(this.data)},g.get=g.set=function(){},g.pick=function(){return null},function(h){return new x(h)}},0:function(c,x){function g(y,v){this.data=y,this.offset=v}var h=g.prototype;return h.dtype=c,h.index=function(){return this.offset},h.dimension=0,h.size=1,h.shape=h.stride=h.order=[],h.lo=h.hi=h.transpose=h.step=function(){return new g(this.data,this.offset)},h.pick=function(){return x(this.data)},h.valueOf=h.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},h.set=function(y){return c==="generic"?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,v,m,_){return new g(y,_)}},1:function(c,x,g){function h(v,m,_,f){this.data=v,this.shape=[m],this.stride=[_],this.offset=0|f}var y=h.prototype;return y.dtype=c,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(v,m){return c==="generic"?this.data.set(this.offset+this.stride[0]*v,m):this.data[this.offset+this.stride[0]*v]=m},y.get=function(v){return c==="generic"?this.data.get(this.offset+this.stride[0]*v):this.data[this.offset+this.stride[0]*v]},y.index=function(v){return this.offset+this.stride[0]*v},y.hi=function(v){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,this.stride[0],this.offset)},y.lo=function(v){var m=this.offset,_=0,f=this.shape[0],S=this.stride[0];return typeof v=="number"&&v>=0&&(m+=S*(_=0|v),f-=_),new h(this.data,f,S,m)},y.step=function(v){var m=this.shape[0],_=this.stride[0],f=this.offset,S=0,w=Math.ceil;return typeof v=="number"&&((S=0|v)<0?(f+=_*(m-1),m=w(-m/S)):m=w(m/S),_*=S),new h(this.data,m,_,f)},y.transpose=function(v){v=v===void 0?0:0|v;var m=this.shape,_=this.stride;return new h(this.data,m[v],_[v],this.offset)},y.pick=function(v){var m=[],_=[],f=this.offset;return typeof v=="number"&&v>=0?f=f+this.stride[0]*v|0:(m.push(this.shape[0]),_.push(this.stride[0])),(0,x[m.length+1])(this.data,m,_,f)},function(v,m,_,f){return new h(v,m[0],_[0],f)}},2:function(c,x,g){function h(v,m,_,f,S,w){this.data=v,this.shape=[m,_],this.stride=[f,S],this.offset=0|w}var y=h.prototype;return y.dtype=c,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(v,m,_){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*m,_):this.data[this.offset+this.stride[0]*v+this.stride[1]*m]=_},y.get=function(v,m){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*m):this.data[this.offset+this.stride[0]*v+this.stride[1]*m]},y.index=function(v,m){return this.offset+this.stride[0]*v+this.stride[1]*m},y.hi=function(v,m){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof m!="number"||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},y.lo=function(v,m){var _=this.offset,f=0,S=this.shape[0],w=this.shape[1],E=this.stride[0],L=this.stride[1];return typeof v=="number"&&v>=0&&(_+=E*(f=0|v),S-=f),typeof m=="number"&&m>=0&&(_+=L*(f=0|m),w-=f),new h(this.data,S,w,E,L,_)},y.step=function(v,m){var _=this.shape[0],f=this.shape[1],S=this.stride[0],w=this.stride[1],E=this.offset,L=0,C=Math.ceil;return typeof v=="number"&&((L=0|v)<0?(E+=S*(_-1),_=C(-_/L)):_=C(_/L),S*=L),typeof m=="number"&&((L=0|m)<0?(E+=w*(f-1),f=C(-f/L)):f=C(f/L),w*=L),new h(this.data,_,f,S,w,E)},y.transpose=function(v,m){v=v===void 0?0:0|v,m=m===void 0?1:0|m;var _=this.shape,f=this.stride;return new h(this.data,_[v],_[m],f[v],f[m],this.offset)},y.pick=function(v,m){var _=[],f=[],S=this.offset;return typeof v=="number"&&v>=0?S=S+this.stride[0]*v|0:(_.push(this.shape[0]),f.push(this.stride[0])),typeof m=="number"&&m>=0?S=S+this.stride[1]*m|0:(_.push(this.shape[1]),f.push(this.stride[1])),(0,x[_.length+1])(this.data,_,f,S)},function(v,m,_,f){return new h(v,m[0],m[1],_[0],_[1],f)}},3:function(c,x,g){function h(v,m,_,f,S,w,E,L){this.data=v,this.shape=[m,_,f],this.stride=[S,w,E],this.offset=0|L}var y=h.prototype;return y.dtype=c,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var v=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return v>m?m>_?[2,1,0]:v>_?[1,2,0]:[1,0,2]:v>_?[2,0,1]:_>m?[0,1,2]:[0,2,1]}}),y.set=function(v,m,_,f){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_,f):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_]=f},y.get=function(v,m,_){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_]},y.index=function(v,m,_){return this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_},y.hi=function(v,m,_){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(v,m,_){var f=this.offset,S=0,w=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.stride[0],P=this.stride[1],z=this.stride[2];return typeof v=="number"&&v>=0&&(f+=C*(S=0|v),w-=S),typeof m=="number"&&m>=0&&(f+=P*(S=0|m),E-=S),typeof _=="number"&&_>=0&&(f+=z*(S=0|_),L-=S),new h(this.data,w,E,L,C,P,z,f)},y.step=function(v,m,_){var f=this.shape[0],S=this.shape[1],w=this.shape[2],E=this.stride[0],L=this.stride[1],C=this.stride[2],P=this.offset,z=0,G=Math.ceil;return typeof v=="number"&&((z=0|v)<0?(P+=E*(f-1),f=G(-f/z)):f=G(f/z),E*=z),typeof m=="number"&&((z=0|m)<0?(P+=L*(S-1),S=G(-S/z)):S=G(S/z),L*=z),typeof _=="number"&&((z=0|_)<0?(P+=C*(w-1),w=G(-w/z)):w=G(w/z),C*=z),new h(this.data,f,S,w,E,L,C,P)},y.transpose=function(v,m,_){v=v===void 0?0:0|v,m=m===void 0?1:0|m,_=_===void 0?2:0|_;var f=this.shape,S=this.stride;return new h(this.data,f[v],f[m],f[_],S[v],S[m],S[_],this.offset)},y.pick=function(v,m,_){var f=[],S=[],w=this.offset;return typeof v=="number"&&v>=0?w=w+this.stride[0]*v|0:(f.push(this.shape[0]),S.push(this.stride[0])),typeof m=="number"&&m>=0?w=w+this.stride[1]*m|0:(f.push(this.shape[1]),S.push(this.stride[1])),typeof _=="number"&&_>=0?w=w+this.stride[2]*_|0:(f.push(this.shape[2]),S.push(this.stride[2])),(0,x[f.length+1])(this.data,f,S,w)},function(v,m,_,f){return new h(v,m[0],m[1],m[2],_[0],_[1],_[2],f)}},4:function(c,x,g){function h(v,m,_,f,S,w,E,L,C,P){this.data=v,this.shape=[m,_,f,S],this.stride=[w,E,L,C],this.offset=0|P}var y=h.prototype;return y.dtype=c,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:g}),y.set=function(v,m,_,f,S){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f,S):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f]=S},y.get=function(v,m,_,f){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f]},y.index=function(v,m,_,f){return this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f},y.hi=function(v,m,_,f){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,typeof f!="number"||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(v,m,_,f){var S=this.offset,w=0,E=this.shape[0],L=this.shape[1],C=this.shape[2],P=this.shape[3],z=this.stride[0],G=this.stride[1],O=this.stride[2],H=this.stride[3];return typeof v=="number"&&v>=0&&(S+=z*(w=0|v),E-=w),typeof m=="number"&&m>=0&&(S+=G*(w=0|m),L-=w),typeof _=="number"&&_>=0&&(S+=O*(w=0|_),C-=w),typeof f=="number"&&f>=0&&(S+=H*(w=0|f),P-=w),new h(this.data,E,L,C,P,z,G,O,H,S)},y.step=function(v,m,_,f){var S=this.shape[0],w=this.shape[1],E=this.shape[2],L=this.shape[3],C=this.stride[0],P=this.stride[1],z=this.stride[2],G=this.stride[3],O=this.offset,H=0,N=Math.ceil;return typeof v=="number"&&((H=0|v)<0?(O+=C*(S-1),S=N(-S/H)):S=N(S/H),C*=H),typeof m=="number"&&((H=0|m)<0?(O+=P*(w-1),w=N(-w/H)):w=N(w/H),P*=H),typeof _=="number"&&((H=0|_)<0?(O+=z*(E-1),E=N(-E/H)):E=N(E/H),z*=H),typeof f=="number"&&((H=0|f)<0?(O+=G*(L-1),L=N(-L/H)):L=N(L/H),G*=H),new h(this.data,S,w,E,L,C,P,z,G,O)},y.transpose=function(v,m,_,f){v=v===void 0?0:0|v,m=m===void 0?1:0|m,_=_===void 0?2:0|_,f=f===void 0?3:0|f;var S=this.shape,w=this.stride;return new h(this.data,S[v],S[m],S[_],S[f],w[v],w[m],w[_],w[f],this.offset)},y.pick=function(v,m,_,f){var S=[],w=[],E=this.offset;return typeof v=="number"&&v>=0?E=E+this.stride[0]*v|0:(S.push(this.shape[0]),w.push(this.stride[0])),typeof m=="number"&&m>=0?E=E+this.stride[1]*m|0:(S.push(this.shape[1]),w.push(this.stride[1])),typeof _=="number"&&_>=0?E=E+this.stride[2]*_|0:(S.push(this.shape[2]),w.push(this.stride[2])),typeof f=="number"&&f>=0?E=E+this.stride[3]*f|0:(S.push(this.shape[3]),w.push(this.stride[3])),(0,x[S.length+1])(this.data,S,w,E)},function(v,m,_,f){return new h(v,m[0],m[1],m[2],m[3],_[0],_[1],_[2],_[3],f)}},5:function(c,x,g){function h(v,m,_,f,S,w,E,L,C,P,z,G){this.data=v,this.shape=[m,_,f,S,w],this.stride=[E,L,C,P,z],this.offset=0|G}var y=h.prototype;return y.dtype=c,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:g}),y.set=function(v,m,_,f,S,w){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S,w):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S]=w},y.get=function(v,m,_,f,S){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S]},y.index=function(v,m,_,f,S){return this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S},y.hi=function(v,m,_,f,S){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,typeof f!="number"||f<0?this.shape[3]:0|f,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(v,m,_,f,S){var w=this.offset,E=0,L=this.shape[0],C=this.shape[1],P=this.shape[2],z=this.shape[3],G=this.shape[4],O=this.stride[0],H=this.stride[1],N=this.stride[2],B=this.stride[3],V=this.stride[4];return typeof v=="number"&&v>=0&&(w+=O*(E=0|v),L-=E),typeof m=="number"&&m>=0&&(w+=H*(E=0|m),C-=E),typeof _=="number"&&_>=0&&(w+=N*(E=0|_),P-=E),typeof f=="number"&&f>=0&&(w+=B*(E=0|f),z-=E),typeof S=="number"&&S>=0&&(w+=V*(E=0|S),G-=E),new h(this.data,L,C,P,z,G,O,H,N,B,V,w)},y.step=function(v,m,_,f,S){var w=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.shape[3],P=this.shape[4],z=this.stride[0],G=this.stride[1],O=this.stride[2],H=this.stride[3],N=this.stride[4],B=this.offset,V=0,q=Math.ceil;return typeof v=="number"&&((V=0|v)<0?(B+=z*(w-1),w=q(-w/V)):w=q(w/V),z*=V),typeof m=="number"&&((V=0|m)<0?(B+=G*(E-1),E=q(-E/V)):E=q(E/V),G*=V),typeof _=="number"&&((V=0|_)<0?(B+=O*(L-1),L=q(-L/V)):L=q(L/V),O*=V),typeof f=="number"&&((V=0|f)<0?(B+=H*(C-1),C=q(-C/V)):C=q(C/V),H*=V),typeof S=="number"&&((V=0|S)<0?(B+=N*(P-1),P=q(-P/V)):P=q(P/V),N*=V),new h(this.data,w,E,L,C,P,z,G,O,H,N,B)},y.transpose=function(v,m,_,f,S){v=v===void 0?0:0|v,m=m===void 0?1:0|m,_=_===void 0?2:0|_,f=f===void 0?3:0|f,S=S===void 0?4:0|S;var w=this.shape,E=this.stride;return new h(this.data,w[v],w[m],w[_],w[f],w[S],E[v],E[m],E[_],E[f],E[S],this.offset)},y.pick=function(v,m,_,f,S){var w=[],E=[],L=this.offset;return typeof v=="number"&&v>=0?L=L+this.stride[0]*v|0:(w.push(this.shape[0]),E.push(this.stride[0])),typeof m=="number"&&m>=0?L=L+this.stride[1]*m|0:(w.push(this.shape[1]),E.push(this.stride[1])),typeof _=="number"&&_>=0?L=L+this.stride[2]*_|0:(w.push(this.shape[2]),E.push(this.stride[2])),typeof f=="number"&&f>=0?L=L+this.stride[3]*f|0:(w.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?L=L+this.stride[4]*S|0:(w.push(this.shape[4]),E.push(this.stride[4])),(0,x[w.length+1])(this.data,w,E,L)},function(v,m,_,f){return new h(v,m[0],m[1],m[2],m[3],m[4],_[0],_[1],_[2],_[3],_[4],f)}}};function u(c,x){var g=x===-1?"T":String(x),h=a[g];return x===-1?h(c):x===0?h(c,p[c][0]):h(c,p[c],o)}var p={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};d.exports=function(c,x,g,h){if(c===void 0)return(0,p.array[0])([]);typeof c=="number"&&(c=[c]),x===void 0&&(x=[c.length]);var y=x.length;if(g===void 0){g=new Array(y);for(var v=y-1,m=1;v>=0;--v)g[v]=m,m*=x[v]}if(h===void 0)for(h=0,v=0;v<y;++v)g[v]<0&&(h-=(x[v]-1)*g[v]);for(var _=function(S){if(i(S))return"buffer";if(r)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(c),f=p[_];f.length<=y+1;)f.push(u(_,f.length-1));return(0,f[y+1])(c,x,g,h)}},8551:function(d,s,t){var i=t(8362),r=Math.pow(2,-1074),n=-1>>>0;d.exports=function(o,a){if(isNaN(o)||isNaN(a))return NaN;if(o===a)return o;if(o===0)return a<0?-r:r;var u=i.hi(o),p=i.lo(o);return a>o==o>0?p===n?(u+=1,p=0):p+=1:p===0?(p=n,u-=1):p-=1,i.pack(p,u)}},115:function(d,s){s.vertexNormals=function(t,i,r){for(var n=i.length,o=new Array(n),a=r===void 0?1e-6:r,u=0;u<n;++u)o[u]=[0,0,0];for(u=0;u<t.length;++u)for(var p=t[u],c=0,x=p[p.length-1],g=p[0],h=0;h<p.length;++h){c=x,x=g,g=p[(h+1)%p.length];for(var y=i[c],v=i[x],m=i[g],_=new Array(3),f=0,S=new Array(3),w=0,E=0;E<3;++E)_[E]=y[E]-v[E],f+=_[E]*_[E],S[E]=m[E]-v[E],w+=S[E]*S[E];if(f*w>a){var L=o[x],C=1/Math.sqrt(f*w);for(E=0;E<3;++E){var P=(E+1)%3,z=(E+2)%3;L[E]+=C*(S[P]*_[z]-S[z]*_[P])}}}for(u=0;u<n;++u){L=o[u];var G=0;for(E=0;E<3;++E)G+=L[E]*L[E];if(G>a)for(C=1/Math.sqrt(G),E=0;E<3;++E)L[E]*=C;else for(E=0;E<3;++E)L[E]=0}return o},s.faceNormals=function(t,i,r){for(var n=t.length,o=new Array(n),a=r===void 0?1e-6:r,u=0;u<n;++u){for(var p=t[u],c=new Array(3),x=0;x<3;++x)c[x]=i[p[x]];var g=new Array(3),h=new Array(3);for(x=0;x<3;++x)g[x]=c[1][x]-c[0][x],h[x]=c[2][x]-c[0][x];var y=new Array(3),v=0;for(x=0;x<3;++x){var m=(x+1)%3,_=(x+2)%3;y[x]=g[m]*h[_]-g[_]*h[m],v+=y[x]*y[x]}for(v=v>a?1/Math.sqrt(v):0,x=0;x<3;++x)y[x]*=v;o[u]=y}return o}},567:function(d){d.exports=function(s,t,i,r,n,o,a,u,p,c){var x=t+o+c;if(g>0){var g=Math.sqrt(x+1);s[0]=.5*(a-p)/g,s[1]=.5*(u-r)/g,s[2]=.5*(i-o)/g,s[3]=.5*g}else{var h=Math.max(t,o,c);g=Math.sqrt(2*h-x+1),t>=h?(s[0]=.5*g,s[1]=.5*(n+i)/g,s[2]=.5*(u+r)/g,s[3]=.5*(a-p)/g):o>=h?(s[0]=.5*(i+n)/g,s[1]=.5*g,s[2]=.5*(p+a)/g,s[3]=.5*(u-r)/g):(s[0]=.5*(r+u)/g,s[1]=.5*(a+p)/g,s[2]=.5*g,s[3]=.5*(i-n)/g)}return s}},7774:function(d,s,t){d.exports=function(h){var y=(h=h||{}).center||[0,0,0],v=h.rotation||[0,0,0,1],m=h.radius||1;y=[].slice.call(y,0,3),c(v=[].slice.call(v,0,4),v);var _=new x(v,y,Math.log(m));return _.setDistanceLimits(h.zoomMin,h.zoomMax),("eye"in h||"up"in h)&&_.lookAt(0,h.eye,h.center,h.up),_};var i=t(8444),r=t(3012),n=t(5950),o=t(7437),a=t(567);function u(h,y,v){return Math.sqrt(Math.pow(h,2)+Math.pow(y,2)+Math.pow(v,2))}function p(h,y,v,m){return Math.sqrt(Math.pow(h,2)+Math.pow(y,2)+Math.pow(v,2)+Math.pow(m,2))}function c(h,y){var v=y[0],m=y[1],_=y[2],f=y[3],S=p(v,m,_,f);S>1e-6?(h[0]=v/S,h[1]=m/S,h[2]=_/S,h[3]=f/S):(h[0]=h[1]=h[2]=0,h[3]=1)}function x(h,y,v){this.radius=i([v]),this.center=i(y),this.rotation=i(h),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=x.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(h){this.radius.curve(h),this.center.curve(h),this.rotation.curve(h);var y=this.computedRotation;c(y,y);var v=this.computedMatrix;n(v,y);var m=this.computedCenter,_=this.computedEye,f=this.computedUp,S=Math.exp(this.computedRadius[0]);_[0]=m[0]+S*v[2],_[1]=m[1]+S*v[6],_[2]=m[2]+S*v[10],f[0]=v[1],f[1]=v[5],f[2]=v[9];for(var w=0;w<3;++w){for(var E=0,L=0;L<3;++L)E+=v[w+4*L]*_[L];v[12+w]=-E}},g.getMatrix=function(h,y){this.recalcMatrix(h);var v=this.computedMatrix;if(y){for(var m=0;m<16;++m)y[m]=v[m];return y}return v},g.idle=function(h){this.center.idle(h),this.radius.idle(h),this.rotation.idle(h)},g.flush=function(h){this.center.flush(h),this.radius.flush(h),this.rotation.flush(h)},g.pan=function(h,y,v,m){y=y||0,v=v||0,m=m||0,this.recalcMatrix(h);var _=this.computedMatrix,f=_[1],S=_[5],w=_[9],E=u(f,S,w);f/=E,S/=E,w/=E;var L=_[0],C=_[4],P=_[8],z=L*f+C*S+P*w,G=u(L-=f*z,C-=S*z,P-=w*z);L/=G,C/=G,P/=G,_[2],_[6],_[10];var O=L*y+f*v,H=C*y+S*v,N=P*y+w*v;this.center.move(h,O,H,N);var B=Math.exp(this.computedRadius[0]);B=Math.max(1e-4,B+m),this.radius.set(h,Math.log(B))},g.rotate=function(h,y,v,m){this.recalcMatrix(h),y=y||0,v=v||0;var _=this.computedMatrix,f=_[0],S=_[4],w=_[8],E=_[1],L=_[5],C=_[9],P=_[2],z=_[6],G=_[10],O=y*f+v*E,H=y*S+v*L,N=y*w+v*C,B=-(z*N-G*H),V=-(G*O-P*N),q=-(P*H-z*O),te=Math.sqrt(Math.max(0,1-Math.pow(B,2)-Math.pow(V,2)-Math.pow(q,2))),K=p(B,V,q,te);K>1e-6?(B/=K,V/=K,q/=K,te/=K):(B=V=q=0,te=1);var J=this.computedRotation,Y=J[0],W=J[1],Q=J[2],ne=J[3],re=Y*te+ne*B+W*q-Q*V,ae=W*te+ne*V+Q*B-Y*q,ue=Q*te+ne*q+Y*V-W*B,pe=ne*te-Y*B-W*V-Q*q;if(m){B=P,V=z,q=G;var ge=Math.sin(m)/u(B,V,q);B*=ge,V*=ge,q*=ge,pe=pe*(te=Math.cos(y))-(re=re*te+pe*B+ae*q-ue*V)*B-(ae=ae*te+pe*V+ue*B-re*q)*V-(ue=ue*te+pe*q+re*V-ae*B)*q}var _e=p(re,ae,ue,pe);_e>1e-6?(re/=_e,ae/=_e,ue/=_e,pe/=_e):(re=ae=ue=0,pe=1),this.rotation.set(h,re,ae,ue,pe)},g.lookAt=function(h,y,v,m){this.recalcMatrix(h),v=v||this.computedCenter,y=y||this.computedEye,m=m||this.computedUp;var _=this.computedMatrix;r(_,y,v,m);var f=this.computedRotation;a(f,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),c(f,f),this.rotation.set(h,f[0],f[1],f[2],f[3]);for(var S=0,w=0;w<3;++w)S+=Math.pow(v[w]-y[w],2);this.radius.set(h,.5*Math.log(Math.max(S,1e-6))),this.center.set(h,v[0],v[1],v[2])},g.translate=function(h,y,v,m){this.center.move(h,y||0,v||0,m||0)},g.setMatrix=function(h,y){var v=this.computedRotation;a(v,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),c(v,v),this.rotation.set(h,v[0],v[1],v[2],v[3]);var m=this.computedMatrix;o(m,y);var _=m[15];if(Math.abs(_)>1e-6){var f=m[12]/_,S=m[13]/_,w=m[14]/_;this.recalcMatrix(h);var E=Math.exp(this.computedRadius[0]);this.center.set(h,f-m[2]*E,S-m[6]*E,w-m[10]*E),this.radius.idle(h)}else this.center.idle(h),this.radius.idle(h)},g.setDistance=function(h,y){y>0&&this.radius.set(h,Math.log(y))},g.setDistanceLimits=function(h,y){h=h>0?Math.log(h):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,h),this.radius.bounds[0][0]=h,this.radius.bounds[1][0]=y},g.getDistanceLimits=function(h){var y=this.radius.bounds;return h?(h[0]=Math.exp(y[0][0]),h[1]=Math.exp(y[1][0]),h):[Math.exp(y[0][0]),Math.exp(y[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(h){var y=this.lastT(),v=h.center;v&&this.center.set(y,v[0],v[1],v[2]);var m=h.rotation;m&&this.rotation.set(y,m[0],m[1],m[2],m[3]);var _=h.distance;_&&_>0&&this.radius.set(y,Math.log(_)),this.setDistanceLimits(h.zoomMin,h.zoomMax)}},4930:function(d,s,t){var i=t(6184);d.exports=function(r,n,o){return i(o=o!==void 0?o+"":" ",n)+r}},4405:function(d){d.exports=function(s,t){t||(t=[0,""]),s=String(s);var i=parseFloat(s,10);return t[0]=i,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(d,s,t){d.exports=function(r,n){for(var o=0|n.length,a=r.length,u=[new Array(o),new Array(o)],p=0;p<o;++p)u[0][p]=[],u[1][p]=[];for(p=0;p<a;++p){var c=r[p];u[0][c[0]].push(c),u[1][c[1]].push(c)}var x=[];for(p=0;p<o;++p)u[0][p].length+u[1][p].length===0&&x.push([p]);function g(S,w){var E=u[w][S[w]];E.splice(E.indexOf(S),1)}function h(S,w,E){for(var L,C,P,z=0;z<2;++z)if(u[z][w].length>0){L=u[z][w][0],P=z;break}C=L[1^P];for(var G=0;G<2;++G)for(var O=u[G][w],H=0;H<O.length;++H){var N=O[H],B=N[1^G];i(n[S],n[w],n[C],n[B])>0&&(L=N,C=B,P=G)}return E||L&&g(L,P),C}function y(S,w){var E=u[w][S][0],L=[S];g(E,w);for(var C=E[1^w];;){for(;C!==S;)L.push(C),C=h(L[L.length-2],C,!1);if(u[0][S].length+u[1][S].length===0)break;var P=L[L.length-1],z=S,G=L[1],O=h(P,z,!0);if(i(n[P],n[z],n[G],n[O])<0)break;L.push(S),C=h(P,z)}return L}function v(S,w){return w[1]===w[w.length-1]}for(p=0;p<o;++p)for(var m=0;m<2;++m){for(var _=[];u[m][p].length>0;){u[0][p].length;var f=y(p,m);v(0,f)?_.push.apply(_,f):(_.length>0&&x.push(_),_=f)}_.length>0&&x.push(_)}return x};var i=t(9398)},3959:function(d,s,t){d.exports=function(r,n){for(var o=i(r,n.length),a=new Array(n.length),u=new Array(n.length),p=[],c=0;c<n.length;++c){var x=o[c].length;u[c]=x,a[c]=!0,x<=1&&p.push(c)}for(;p.length>0;){a[m=p.pop()]=!1;var g=o[m];for(c=0;c<g.length;++c){var h=g[c];--u[h]==0&&p.push(h)}}var y=new Array(n.length),v=[];for(c=0;c<n.length;++c)if(a[c]){var m=v.length;y[c]=m,v.push(n[c])}else y[c]=-1;var _=[];for(c=0;c<r.length;++c){var f=r[c];a[f[0]]&&a[f[1]]&&_.push([y[f[0]],y[f[1]]])}return[_,v]};var i=t(8348)},8040:function(d,s,t){d.exports=function(x,g){var h=p(x,g);x=h[0];for(var y=(g=h[1]).length,v=(x.length,i(x,g.length)),m=0;m<y;++m)if(v[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=r(x,g),f=(_=_.filter(function(Oe){for(var Me=Oe.length,Te=[0],se=0;se<Me;++se){var oe=g[Oe[se]],he=g[Oe[(se+1)%Me]],Ee=o(-oe[0],oe[1]),ke=o(-oe[0],he[1]),be=o(he[0],oe[1]),Ie=o(he[0],he[1]);Te=a(Te,a(a(Ee,ke),a(be,Ie)))}return Te[Te.length-1]>0})).length,S=new Array(f),w=new Array(f);for(m=0;m<f;++m){S[m]=m;var E=new Array(f),L=_[m].map(function(Oe){return g[Oe]}),C=n([L]),P=0;e:for(var z=0;z<f;++z)if(E[z]=0,m!==z){for(var G=(me=_[z]).length,O=0;O<G;++O){var H=C(g[me[O]]);if(H!==0){H<0&&(E[z]=1,P+=1);continue e}}E[z]=1,P+=1}w[m]=[P,m,E]}for(w.sort(function(Oe,Me){return Me[0]-Oe[0]}),m=0;m<f;++m){var N=(E=w[m])[1],B=E[2];for(z=0;z<f;++z)B[z]&&(S[z]=N)}var V=function(Oe){for(var Me=new Array(Oe),Te=0;Te<Oe;++Te)Me[Te]=[];return Me}(f);for(m=0;m<f;++m)V[m].push(S[m]),V[S[m]].push(m);var q={},te=c(y,!1);for(m=0;m<f;++m)for(G=(me=_[m]).length,z=0;z<G;++z){var K=me[z],J=me[(z+1)%G],Y=Math.min(K,J)+":"+Math.max(K,J);if(Y in q){var W=q[Y];V[W].push(m),V[m].push(W),te[K]=te[J]=!0}else q[Y]=m}function Q(Oe){for(var Me=Oe.length,Te=0;Te<Me;++Te)if(!te[Oe[Te]])return!1;return!0}var ne=[],re=c(f,-1);for(m=0;m<f;++m)S[m]!==m||Q(_[m])?re[m]=-1:(ne.push(m),re[m]=0);for(h=[];ne.length>0;){var ae=ne.pop(),ue=V[ae];u(ue,function(Oe,Me){return Oe-Me});var pe,ge=ue.length,_e=re[ae];for(_e===0&&(pe=[me=_[ae]]),m=0;m<ge;++m){var me,ve=ue[m];re[ve]>=0||(re[ve]=1^_e,ne.push(ve),_e===0&&(Q(me=_[ve])||(me.reverse(),pe.push(me))))}_e===0&&h.push(pe)}return h};var i=t(8348),r=t(4166),n=t(211),o=t(9660),a=t(9662),u=t(1215),p=t(3959);function c(x,g){for(var h=new Array(x),y=0;y<x;++y)h[y]=g;return h}},211:function(d,s,t){d.exports=function(c){for(var x=c.length,g=[],h=[],y=0;y<x;++y)for(var v=c[y],m=v.length,_=m-1,f=0;f<m;_=f++){var S=v[_],w=v[f];S[0]===w[0]?h.push([S,w]):g.push([S,w])}if(g.length===0)return h.length===0?p:(E=u(h),function(P){return E(P[0],P[1])?0:1});var E,L=r(g),C=function(P,z){return function(G){var O=o.le(z,G[0]);if(O<0)return 1;var H=P[O];if(!H){if(!(O>0&&z[O]===G[0]))return 1;H=P[O-1]}for(var N=1;H;){var B=H.key,V=i(G,B[0],B[1]);if(B[0][0]<B[1][0])if(V<0)H=H.left;else{if(!(V>0))return 0;N=-1,H=H.right}else if(V>0)H=H.left;else{if(!(V<0))return 0;N=1,H=H.right}}return N}}(L.slabs,L.coordinates);return h.length===0?C:function(P,z){return function(G){return P(G[0],G[1])?0:z(G)}}(u(h),C)};var i=t(417)[3],r=t(4385),n=t(9014),o=t(5070);function a(){return!0}function u(c){for(var x={},g=0;g<c.length;++g){var h=c[g],y=h[0][0],v=h[0][1],m=h[1][1],_=[Math.min(v,m),Math.max(v,m)];y in x?x[y].push(_):x[y]=[_]}var f={},S=Object.keys(x);for(g=0;g<S.length;++g){var w=x[S[g]];f[S[g]]=n(w)}return function(E){return function(L,C){var P=E[L];return!!P&&!!P.queryPoint(C,a)}}(f)}function p(c){return 1}},7309:function(d){var s=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);d.exports=function(r,n,o,a,u){s.length<a.length&&(s=new Float64Array(a.length),t=new Float64Array(a.length),i=new Float64Array(a.length));for(var p=0;p<a.length;++p)s[p]=r[p]-a[p],t[p]=n[p]-r[p],i[p]=o[p]-r[p];var c=0,x=0,g=0,h=0,y=0,v=0;for(p=0;p<a.length;++p){var m=t[p],_=i[p],f=s[p];c+=m*m,x+=m*_,g+=_*_,h+=f*m,y+=f*_,v+=f*f}var S,w,E,L,C,P=Math.abs(c*g-x*x),z=x*y-g*h,G=x*h-c*y;if(z+G<=P)if(z<0)G<0&&h<0?(G=0,-h>=c?(z=1,S=c+2*h+v):S=h*(z=-h/c)+v):(z=0,y>=0?(G=0,S=v):-y>=g?(G=1,S=g+2*y+v):S=y*(G=-y/g)+v);else if(G<0)G=0,h>=0?(z=0,S=v):-h>=c?(z=1,S=c+2*h+v):S=h*(z=-h/c)+v;else{var O=1/P;S=(z*=O)*(c*z+x*(G*=O)+2*h)+G*(x*z+g*G+2*y)+v}else z<0?(E=g+y)>(w=x+h)?(L=E-w)>=(C=c-2*x+g)?(z=1,G=0,S=c+2*h+v):S=(z=L/C)*(c*z+x*(G=1-z)+2*h)+G*(x*z+g*G+2*y)+v:(z=0,E<=0?(G=1,S=g+2*y+v):y>=0?(G=0,S=v):S=y*(G=-y/g)+v):G<0?(E=c+h)>(w=x+y)?(L=E-w)>=(C=c-2*x+g)?(G=1,z=0,S=g+2*y+v):S=(z=1-(G=L/C))*(c*z+x*G+2*h)+G*(x*z+g*G+2*y)+v:(G=0,E<=0?(z=1,S=c+2*h+v):h>=0?(z=0,S=v):S=h*(z=-h/c)+v):(L=g+y-x-h)<=0?(z=0,G=1,S=g+2*y+v):L>=(C=c-2*x+g)?(z=1,G=0,S=c+2*h+v):S=(z=L/C)*(c*z+x*(G=1-z)+2*h)+G*(x*z+g*G+2*y)+v;var H=1-z-G;for(p=0;p<a.length;++p)u[p]=H*r[p]+z*n[p]+G*o[p];return S<0?0:S}},1116:function(d,s,t){d.exports=t(6093)},7584:function(d,s,t){var i=t(1539);d.exports=function(r,n){for(var o=r.length,a=new Array(o),u=0;u<o;++u)a[u]=i(r[u],n[u]);return a}},2826:function(d,s,t){d.exports=function(r){for(var n=new Array(r.length),o=0;o<r.length;++o)n[o]=i(r[o]);return n};var i=t(5125)},4469:function(d,s,t){var i=t(5125),r=t(3962);d.exports=function(n,o){for(var a=i(o),u=n.length,p=new Array(u),c=0;c<u;++c)p[c]=r(n[c],a);return p}},6695:function(d,s,t){var i=t(4354);d.exports=function(r,n){for(var o=r.length,a=new Array(o),u=0;u<o;++u)a[u]=i(r[u],n[u]);return a}},7037:function(d,s,t){var i=t(9209),r=t(1284),n=t(9887);d.exports=function(o){o.sort(r);for(var a=o.length,u=0,p=0;p<a;++p){var c=o[p],x=n(c);if(x!==0){if(u>0){var g=o[u-1];if(i(c,g)===0&&n(g)!==x){u-=1;continue}}o[u++]=c}}return o.length=u,o}},6184:function(d){var s,t="";d.exports=function(i,r){if(typeof i!="string")throw new TypeError("expected a string");if(r===1)return i;if(r===2)return i+i;var n=i.length*r;if(s!==i||s===void 0)s=i,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&r>1;)1&r&&(t+=i),r>>=1,i+=i;return t=(t+=i).substr(0,n)}},8161:function(d,s,t){d.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(d){d.exports=function(s){for(var t=s.length,i=s[s.length-1],r=t,n=t-2;n>=0;--n){var o=i;(p=(u=s[n])-((i=o+u)-o))&&(s[--r]=i,i=p)}var a=0;for(n=r;n<t;++n){var u,p;(p=(u=i)-((i=(o=s[n])+u)-o))&&(s[a++]=p)}return s[a++]=i,s.length=a,s}},8167:function(d,s,t){var i=t(9660),r=t(9662),n=t(8289),o=t(402);function a(y,v,m,_){return function(f){return _(y(m(f[0][0],f[1][1]),m(-f[0][1],f[1][0])))}}function u(y,v,m,_){return function(f){return _(y(v(y(m(f[1][1],f[2][2]),m(-f[1][2],f[2][1])),f[0][0]),y(v(y(m(f[1][0],f[2][2]),m(-f[1][2],f[2][0])),-f[0][1]),v(y(m(f[1][0],f[2][1]),m(-f[1][1],f[2][0])),f[0][2]))))}}function p(y,v,m,_){return function(f){return _(y(y(v(y(v(y(m(f[2][2],f[3][3]),m(-f[2][3],f[3][2])),f[1][1]),y(v(y(m(f[2][1],f[3][3]),m(-f[2][3],f[3][1])),-f[1][2]),v(y(m(f[2][1],f[3][2]),m(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),v(y(v(y(m(f[2][2],f[3][3]),m(-f[2][3],f[3][2])),f[1][0]),y(v(y(m(f[2][0],f[3][3]),m(-f[2][3],f[3][0])),-f[1][2]),v(y(m(f[2][0],f[3][2]),m(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),y(v(y(v(y(m(f[2][1],f[3][3]),m(-f[2][3],f[3][1])),f[1][0]),y(v(y(m(f[2][0],f[3][3]),m(-f[2][3],f[3][0])),-f[1][1]),v(y(m(f[2][0],f[3][1]),m(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),v(y(v(y(m(f[2][1],f[3][2]),m(-f[2][2],f[3][1])),f[1][0]),y(v(y(m(f[2][0],f[3][2]),m(-f[2][2],f[3][0])),-f[1][1]),v(y(m(f[2][0],f[3][1]),m(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function c(y,v,m,_){return function(f){return _(y(y(v(y(y(v(y(v(y(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][2]),y(v(y(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),-f[2][3]),v(y(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),v(y(v(y(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][1]),y(v(y(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][3]),v(y(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),y(v(y(v(y(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][1]),y(v(y(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][2]),v(y(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),v(y(v(y(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][1]),y(v(y(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),-f[2][2]),v(y(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),v(y(y(v(y(v(y(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][2]),y(v(y(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),-f[2][3]),v(y(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),v(y(v(y(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][0]),y(v(y(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][3]),v(y(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),y(v(y(v(y(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][0]),y(v(y(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][2]),v(y(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),v(y(v(y(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][0]),y(v(y(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][2]),v(y(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),y(v(y(y(v(y(v(y(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][1]),y(v(y(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][3]),v(y(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),v(y(v(y(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][0]),y(v(y(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][3]),v(y(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),y(v(y(v(y(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),f[2][0]),y(v(y(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][1]),v(y(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),v(y(v(y(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][0]),y(v(y(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][1]),v(y(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),y(v(y(y(v(y(v(y(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][1]),y(v(y(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][2]),v(y(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),v(y(v(y(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][0]),y(v(y(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][2]),v(y(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),y(v(y(v(y(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),f[2][0]),y(v(y(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][1]),v(y(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),v(y(v(y(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][0]),y(v(y(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),-f[2][1]),v(y(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),v(y(y(v(y(v(y(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][1]),y(v(y(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),-f[2][2]),v(y(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),v(y(v(y(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][0]),y(v(y(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][2]),v(y(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),y(v(y(v(y(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][0]),y(v(y(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][1]),v(y(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),v(y(v(y(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][0]),y(v(y(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),-f[2][1]),v(y(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function x(y){return(y===2?a:y===3?u:y===4?p:y===5?c:void 0)(r,n,i,o)}var g=[function(){return[0]},function(y){return[y[0][0]]}];function h(y,v,m,_,f,S,w,E){return function(L){switch(L.length){case 0:return y(L);case 1:return v(L);case 2:return m(L);case 3:return _(L);case 4:return f(L);case 5:return S(L)}var C=w[L.length];return C||(C=w[L.length]=E(L.length)),C(L)}}(function(){for(;g.length<6;)g.push(x(g.length));d.exports=h.apply(void 0,g.concat([g,x]));for(var y=0;y<g.length;++y)d.exports[y]=g[y]})()},9130:function(d,s,t){var i=t(9660),r=t(9662);d.exports=function(n,o){for(var a=i(n[0],o[0]),u=1;u<n.length;++u)a=r(a,i(n[u],o[u]));return a}},2227:function(d,s,t){var i=t(9660),r=t(9662),n=t(4078),o=t(8289);function a(v){return(v===3?u:v===4?p:v===5?c:x)(r,n,i,o)}function u(v,m,_,f){return function(S,w,E){var L=_(S[0],S[0]),C=f(L,w[0]),P=f(L,E[0]),z=_(w[0],w[0]),G=f(z,S[0]),O=f(z,E[0]),H=_(E[0],E[0]),N=f(H,S[0]),B=f(H,w[0]),V=v(m(B,O),m(G,C)),q=m(N,P),te=m(V,q);return te[te.length-1]}}function p(v,m,_,f){return function(S,w,E,L){var C=v(_(S[0],S[0]),_(S[1],S[1])),P=f(C,w[0]),z=f(C,E[0]),G=f(C,L[0]),O=v(_(w[0],w[0]),_(w[1],w[1])),H=f(O,S[0]),N=f(O,E[0]),B=f(O,L[0]),V=v(_(E[0],E[0]),_(E[1],E[1])),q=f(V,S[0]),te=f(V,w[0]),K=f(V,L[0]),J=v(_(L[0],L[0]),_(L[1],L[1])),Y=f(J,S[0]),W=f(J,w[0]),Q=f(J,E[0]),ne=v(v(f(m(Q,K),w[1]),v(f(m(W,B),-E[1]),f(m(te,N),L[1]))),v(f(m(W,B),S[1]),v(f(m(Y,G),-w[1]),f(m(H,P),L[1])))),re=v(v(f(m(Q,K),S[1]),v(f(m(Y,G),-E[1]),f(m(q,z),L[1]))),v(f(m(te,N),S[1]),v(f(m(q,z),-w[1]),f(m(H,P),E[1])))),ae=m(ne,re);return ae[ae.length-1]}}function c(v,m,_,f){return function(S,w,E,L,C){var P=v(_(S[0],S[0]),v(_(S[1],S[1]),_(S[2],S[2]))),z=f(P,w[0]),G=f(P,E[0]),O=f(P,L[0]),H=f(P,C[0]),N=v(_(w[0],w[0]),v(_(w[1],w[1]),_(w[2],w[2]))),B=f(N,S[0]),V=f(N,E[0]),q=f(N,L[0]),te=f(N,C[0]),K=v(_(E[0],E[0]),v(_(E[1],E[1]),_(E[2],E[2]))),J=f(K,S[0]),Y=f(K,w[0]),W=f(K,L[0]),Q=f(K,C[0]),ne=v(_(L[0],L[0]),v(_(L[1],L[1]),_(L[2],L[2]))),re=f(ne,S[0]),ae=f(ne,w[0]),ue=f(ne,E[0]),pe=f(ne,C[0]),ge=v(_(C[0],C[0]),v(_(C[1],C[1]),_(C[2],C[2]))),_e=f(ge,S[0]),me=f(ge,w[0]),ve=f(ge,E[0]),Oe=f(ge,L[0]),Me=v(v(v(f(v(f(m(Oe,pe),E[1]),v(f(m(ve,Q),-L[1]),f(m(ue,W),C[1]))),w[2]),v(f(v(f(m(Oe,pe),w[1]),v(f(m(me,te),-L[1]),f(m(ae,q),C[1]))),-E[2]),f(v(f(m(ve,Q),w[1]),v(f(m(me,te),-E[1]),f(m(Y,V),C[1]))),L[2]))),v(f(v(f(m(ue,W),w[1]),v(f(m(ae,q),-E[1]),f(m(Y,V),L[1]))),-C[2]),v(f(v(f(m(Oe,pe),w[1]),v(f(m(me,te),-L[1]),f(m(ae,q),C[1]))),S[2]),f(v(f(m(Oe,pe),S[1]),v(f(m(_e,H),-L[1]),f(m(re,O),C[1]))),-w[2])))),v(v(f(v(f(m(me,te),S[1]),v(f(m(_e,H),-w[1]),f(m(B,z),C[1]))),L[2]),v(f(v(f(m(ae,q),S[1]),v(f(m(re,O),-w[1]),f(m(B,z),L[1]))),-C[2]),f(v(f(m(ue,W),w[1]),v(f(m(ae,q),-E[1]),f(m(Y,V),L[1]))),S[2]))),v(f(v(f(m(ue,W),S[1]),v(f(m(re,O),-E[1]),f(m(J,G),L[1]))),-w[2]),v(f(v(f(m(ae,q),S[1]),v(f(m(re,O),-w[1]),f(m(B,z),L[1]))),E[2]),f(v(f(m(Y,V),S[1]),v(f(m(J,G),-w[1]),f(m(B,z),E[1]))),-L[2]))))),Te=v(v(v(f(v(f(m(Oe,pe),E[1]),v(f(m(ve,Q),-L[1]),f(m(ue,W),C[1]))),S[2]),f(v(f(m(Oe,pe),S[1]),v(f(m(_e,H),-L[1]),f(m(re,O),C[1]))),-E[2])),v(f(v(f(m(ve,Q),S[1]),v(f(m(_e,H),-E[1]),f(m(J,G),C[1]))),L[2]),f(v(f(m(ue,W),S[1]),v(f(m(re,O),-E[1]),f(m(J,G),L[1]))),-C[2]))),v(v(f(v(f(m(ve,Q),w[1]),v(f(m(me,te),-E[1]),f(m(Y,V),C[1]))),S[2]),f(v(f(m(ve,Q),S[1]),v(f(m(_e,H),-E[1]),f(m(J,G),C[1]))),-w[2])),v(f(v(f(m(me,te),S[1]),v(f(m(_e,H),-w[1]),f(m(B,z),C[1]))),E[2]),f(v(f(m(Y,V),S[1]),v(f(m(J,G),-w[1]),f(m(B,z),E[1]))),-C[2])))),se=m(Me,Te);return se[se.length-1]}}function x(v,m,_,f){return function(S,w,E,L,C,P){var z=v(v(_(S[0],S[0]),_(S[1],S[1])),v(_(S[2],S[2]),_(S[3],S[3]))),G=f(z,w[0]),O=f(z,E[0]),H=f(z,L[0]),N=f(z,C[0]),B=f(z,P[0]),V=v(v(_(w[0],w[0]),_(w[1],w[1])),v(_(w[2],w[2]),_(w[3],w[3]))),q=f(V,S[0]),te=f(V,E[0]),K=f(V,L[0]),J=f(V,C[0]),Y=f(V,P[0]),W=v(v(_(E[0],E[0]),_(E[1],E[1])),v(_(E[2],E[2]),_(E[3],E[3]))),Q=f(W,S[0]),ne=f(W,w[0]),re=f(W,L[0]),ae=f(W,C[0]),ue=f(W,P[0]),pe=v(v(_(L[0],L[0]),_(L[1],L[1])),v(_(L[2],L[2]),_(L[3],L[3]))),ge=f(pe,S[0]),_e=f(pe,w[0]),me=f(pe,E[0]),ve=f(pe,C[0]),Oe=f(pe,P[0]),Me=v(v(_(C[0],C[0]),_(C[1],C[1])),v(_(C[2],C[2]),_(C[3],C[3]))),Te=f(Me,S[0]),se=f(Me,w[0]),oe=f(Me,E[0]),he=f(Me,L[0]),Ee=f(Me,P[0]),ke=v(v(_(P[0],P[0]),_(P[1],P[1])),v(_(P[2],P[2]),_(P[3],P[3]))),be=f(ke,S[0]),Ie=f(ke,w[0]),Fe=f(ke,E[0]),ce=f(ke,L[0]),we=f(ke,C[0]),ye=v(v(v(f(v(v(f(v(f(m(we,Ee),L[1]),v(f(m(ce,Oe),-C[1]),f(m(he,ve),P[1]))),E[2]),f(v(f(m(we,Ee),E[1]),v(f(m(Fe,ue),-C[1]),f(m(oe,ae),P[1]))),-L[2])),v(f(v(f(m(ce,Oe),E[1]),v(f(m(Fe,ue),-L[1]),f(m(me,re),P[1]))),C[2]),f(v(f(m(he,ve),E[1]),v(f(m(oe,ae),-L[1]),f(m(me,re),C[1]))),-P[2]))),w[3]),v(f(v(v(f(v(f(m(we,Ee),L[1]),v(f(m(ce,Oe),-C[1]),f(m(he,ve),P[1]))),w[2]),f(v(f(m(we,Ee),w[1]),v(f(m(Ie,Y),-C[1]),f(m(se,J),P[1]))),-L[2])),v(f(v(f(m(ce,Oe),w[1]),v(f(m(Ie,Y),-L[1]),f(m(_e,K),P[1]))),C[2]),f(v(f(m(he,ve),w[1]),v(f(m(se,J),-L[1]),f(m(_e,K),C[1]))),-P[2]))),-E[3]),f(v(v(f(v(f(m(we,Ee),E[1]),v(f(m(Fe,ue),-C[1]),f(m(oe,ae),P[1]))),w[2]),f(v(f(m(we,Ee),w[1]),v(f(m(Ie,Y),-C[1]),f(m(se,J),P[1]))),-E[2])),v(f(v(f(m(Fe,ue),w[1]),v(f(m(Ie,Y),-E[1]),f(m(ne,te),P[1]))),C[2]),f(v(f(m(oe,ae),w[1]),v(f(m(se,J),-E[1]),f(m(ne,te),C[1]))),-P[2]))),L[3]))),v(v(f(v(v(f(v(f(m(ce,Oe),E[1]),v(f(m(Fe,ue),-L[1]),f(m(me,re),P[1]))),w[2]),f(v(f(m(ce,Oe),w[1]),v(f(m(Ie,Y),-L[1]),f(m(_e,K),P[1]))),-E[2])),v(f(v(f(m(Fe,ue),w[1]),v(f(m(Ie,Y),-E[1]),f(m(ne,te),P[1]))),L[2]),f(v(f(m(me,re),w[1]),v(f(m(_e,K),-E[1]),f(m(ne,te),L[1]))),-P[2]))),-C[3]),f(v(v(f(v(f(m(he,ve),E[1]),v(f(m(oe,ae),-L[1]),f(m(me,re),C[1]))),w[2]),f(v(f(m(he,ve),w[1]),v(f(m(se,J),-L[1]),f(m(_e,K),C[1]))),-E[2])),v(f(v(f(m(oe,ae),w[1]),v(f(m(se,J),-E[1]),f(m(ne,te),C[1]))),L[2]),f(v(f(m(me,re),w[1]),v(f(m(_e,K),-E[1]),f(m(ne,te),L[1]))),-C[2]))),P[3])),v(f(v(v(f(v(f(m(we,Ee),L[1]),v(f(m(ce,Oe),-C[1]),f(m(he,ve),P[1]))),w[2]),f(v(f(m(we,Ee),w[1]),v(f(m(Ie,Y),-C[1]),f(m(se,J),P[1]))),-L[2])),v(f(v(f(m(ce,Oe),w[1]),v(f(m(Ie,Y),-L[1]),f(m(_e,K),P[1]))),C[2]),f(v(f(m(he,ve),w[1]),v(f(m(se,J),-L[1]),f(m(_e,K),C[1]))),-P[2]))),S[3]),f(v(v(f(v(f(m(we,Ee),L[1]),v(f(m(ce,Oe),-C[1]),f(m(he,ve),P[1]))),S[2]),f(v(f(m(we,Ee),S[1]),v(f(m(be,B),-C[1]),f(m(Te,N),P[1]))),-L[2])),v(f(v(f(m(ce,Oe),S[1]),v(f(m(be,B),-L[1]),f(m(ge,H),P[1]))),C[2]),f(v(f(m(he,ve),S[1]),v(f(m(Te,N),-L[1]),f(m(ge,H),C[1]))),-P[2]))),-w[3])))),v(v(v(f(v(v(f(v(f(m(we,Ee),w[1]),v(f(m(Ie,Y),-C[1]),f(m(se,J),P[1]))),S[2]),f(v(f(m(we,Ee),S[1]),v(f(m(be,B),-C[1]),f(m(Te,N),P[1]))),-w[2])),v(f(v(f(m(Ie,Y),S[1]),v(f(m(be,B),-w[1]),f(m(q,G),P[1]))),C[2]),f(v(f(m(se,J),S[1]),v(f(m(Te,N),-w[1]),f(m(q,G),C[1]))),-P[2]))),L[3]),f(v(v(f(v(f(m(ce,Oe),w[1]),v(f(m(Ie,Y),-L[1]),f(m(_e,K),P[1]))),S[2]),f(v(f(m(ce,Oe),S[1]),v(f(m(be,B),-L[1]),f(m(ge,H),P[1]))),-w[2])),v(f(v(f(m(Ie,Y),S[1]),v(f(m(be,B),-w[1]),f(m(q,G),P[1]))),L[2]),f(v(f(m(_e,K),S[1]),v(f(m(ge,H),-w[1]),f(m(q,G),L[1]))),-P[2]))),-C[3])),v(f(v(v(f(v(f(m(he,ve),w[1]),v(f(m(se,J),-L[1]),f(m(_e,K),C[1]))),S[2]),f(v(f(m(he,ve),S[1]),v(f(m(Te,N),-L[1]),f(m(ge,H),C[1]))),-w[2])),v(f(v(f(m(se,J),S[1]),v(f(m(Te,N),-w[1]),f(m(q,G),C[1]))),L[2]),f(v(f(m(_e,K),S[1]),v(f(m(ge,H),-w[1]),f(m(q,G),L[1]))),-C[2]))),P[3]),f(v(v(f(v(f(m(ce,Oe),E[1]),v(f(m(Fe,ue),-L[1]),f(m(me,re),P[1]))),w[2]),f(v(f(m(ce,Oe),w[1]),v(f(m(Ie,Y),-L[1]),f(m(_e,K),P[1]))),-E[2])),v(f(v(f(m(Fe,ue),w[1]),v(f(m(Ie,Y),-E[1]),f(m(ne,te),P[1]))),L[2]),f(v(f(m(me,re),w[1]),v(f(m(_e,K),-E[1]),f(m(ne,te),L[1]))),-P[2]))),S[3]))),v(v(f(v(v(f(v(f(m(ce,Oe),E[1]),v(f(m(Fe,ue),-L[1]),f(m(me,re),P[1]))),S[2]),f(v(f(m(ce,Oe),S[1]),v(f(m(be,B),-L[1]),f(m(ge,H),P[1]))),-E[2])),v(f(v(f(m(Fe,ue),S[1]),v(f(m(be,B),-E[1]),f(m(Q,O),P[1]))),L[2]),f(v(f(m(me,re),S[1]),v(f(m(ge,H),-E[1]),f(m(Q,O),L[1]))),-P[2]))),-w[3]),f(v(v(f(v(f(m(ce,Oe),w[1]),v(f(m(Ie,Y),-L[1]),f(m(_e,K),P[1]))),S[2]),f(v(f(m(ce,Oe),S[1]),v(f(m(be,B),-L[1]),f(m(ge,H),P[1]))),-w[2])),v(f(v(f(m(Ie,Y),S[1]),v(f(m(be,B),-w[1]),f(m(q,G),P[1]))),L[2]),f(v(f(m(_e,K),S[1]),v(f(m(ge,H),-w[1]),f(m(q,G),L[1]))),-P[2]))),E[3])),v(f(v(v(f(v(f(m(Fe,ue),w[1]),v(f(m(Ie,Y),-E[1]),f(m(ne,te),P[1]))),S[2]),f(v(f(m(Fe,ue),S[1]),v(f(m(be,B),-E[1]),f(m(Q,O),P[1]))),-w[2])),v(f(v(f(m(Ie,Y),S[1]),v(f(m(be,B),-w[1]),f(m(q,G),P[1]))),E[2]),f(v(f(m(ne,te),S[1]),v(f(m(Q,O),-w[1]),f(m(q,G),E[1]))),-P[2]))),-L[3]),f(v(v(f(v(f(m(me,re),w[1]),v(f(m(_e,K),-E[1]),f(m(ne,te),L[1]))),S[2]),f(v(f(m(me,re),S[1]),v(f(m(ge,H),-E[1]),f(m(Q,O),L[1]))),-w[2])),v(f(v(f(m(_e,K),S[1]),v(f(m(ge,H),-w[1]),f(m(q,G),L[1]))),E[2]),f(v(f(m(ne,te),S[1]),v(f(m(Q,O),-w[1]),f(m(q,G),E[1]))),-L[2]))),P[3]))))),Ce=v(v(v(f(v(v(f(v(f(m(we,Ee),L[1]),v(f(m(ce,Oe),-C[1]),f(m(he,ve),P[1]))),E[2]),f(v(f(m(we,Ee),E[1]),v(f(m(Fe,ue),-C[1]),f(m(oe,ae),P[1]))),-L[2])),v(f(v(f(m(ce,Oe),E[1]),v(f(m(Fe,ue),-L[1]),f(m(me,re),P[1]))),C[2]),f(v(f(m(he,ve),E[1]),v(f(m(oe,ae),-L[1]),f(m(me,re),C[1]))),-P[2]))),S[3]),v(f(v(v(f(v(f(m(we,Ee),L[1]),v(f(m(ce,Oe),-C[1]),f(m(he,ve),P[1]))),S[2]),f(v(f(m(we,Ee),S[1]),v(f(m(be,B),-C[1]),f(m(Te,N),P[1]))),-L[2])),v(f(v(f(m(ce,Oe),S[1]),v(f(m(be,B),-L[1]),f(m(ge,H),P[1]))),C[2]),f(v(f(m(he,ve),S[1]),v(f(m(Te,N),-L[1]),f(m(ge,H),C[1]))),-P[2]))),-E[3]),f(v(v(f(v(f(m(we,Ee),E[1]),v(f(m(Fe,ue),-C[1]),f(m(oe,ae),P[1]))),S[2]),f(v(f(m(we,Ee),S[1]),v(f(m(be,B),-C[1]),f(m(Te,N),P[1]))),-E[2])),v(f(v(f(m(Fe,ue),S[1]),v(f(m(be,B),-E[1]),f(m(Q,O),P[1]))),C[2]),f(v(f(m(oe,ae),S[1]),v(f(m(Te,N),-E[1]),f(m(Q,O),C[1]))),-P[2]))),L[3]))),v(v(f(v(v(f(v(f(m(ce,Oe),E[1]),v(f(m(Fe,ue),-L[1]),f(m(me,re),P[1]))),S[2]),f(v(f(m(ce,Oe),S[1]),v(f(m(be,B),-L[1]),f(m(ge,H),P[1]))),-E[2])),v(f(v(f(m(Fe,ue),S[1]),v(f(m(be,B),-E[1]),f(m(Q,O),P[1]))),L[2]),f(v(f(m(me,re),S[1]),v(f(m(ge,H),-E[1]),f(m(Q,O),L[1]))),-P[2]))),-C[3]),f(v(v(f(v(f(m(he,ve),E[1]),v(f(m(oe,ae),-L[1]),f(m(me,re),C[1]))),S[2]),f(v(f(m(he,ve),S[1]),v(f(m(Te,N),-L[1]),f(m(ge,H),C[1]))),-E[2])),v(f(v(f(m(oe,ae),S[1]),v(f(m(Te,N),-E[1]),f(m(Q,O),C[1]))),L[2]),f(v(f(m(me,re),S[1]),v(f(m(ge,H),-E[1]),f(m(Q,O),L[1]))),-C[2]))),P[3])),v(f(v(v(f(v(f(m(we,Ee),E[1]),v(f(m(Fe,ue),-C[1]),f(m(oe,ae),P[1]))),w[2]),f(v(f(m(we,Ee),w[1]),v(f(m(Ie,Y),-C[1]),f(m(se,J),P[1]))),-E[2])),v(f(v(f(m(Fe,ue),w[1]),v(f(m(Ie,Y),-E[1]),f(m(ne,te),P[1]))),C[2]),f(v(f(m(oe,ae),w[1]),v(f(m(se,J),-E[1]),f(m(ne,te),C[1]))),-P[2]))),S[3]),f(v(v(f(v(f(m(we,Ee),E[1]),v(f(m(Fe,ue),-C[1]),f(m(oe,ae),P[1]))),S[2]),f(v(f(m(we,Ee),S[1]),v(f(m(be,B),-C[1]),f(m(Te,N),P[1]))),-E[2])),v(f(v(f(m(Fe,ue),S[1]),v(f(m(be,B),-E[1]),f(m(Q,O),P[1]))),C[2]),f(v(f(m(oe,ae),S[1]),v(f(m(Te,N),-E[1]),f(m(Q,O),C[1]))),-P[2]))),-w[3])))),v(v(v(f(v(v(f(v(f(m(we,Ee),w[1]),v(f(m(Ie,Y),-C[1]),f(m(se,J),P[1]))),S[2]),f(v(f(m(we,Ee),S[1]),v(f(m(be,B),-C[1]),f(m(Te,N),P[1]))),-w[2])),v(f(v(f(m(Ie,Y),S[1]),v(f(m(be,B),-w[1]),f(m(q,G),P[1]))),C[2]),f(v(f(m(se,J),S[1]),v(f(m(Te,N),-w[1]),f(m(q,G),C[1]))),-P[2]))),E[3]),f(v(v(f(v(f(m(Fe,ue),w[1]),v(f(m(Ie,Y),-E[1]),f(m(ne,te),P[1]))),S[2]),f(v(f(m(Fe,ue),S[1]),v(f(m(be,B),-E[1]),f(m(Q,O),P[1]))),-w[2])),v(f(v(f(m(Ie,Y),S[1]),v(f(m(be,B),-w[1]),f(m(q,G),P[1]))),E[2]),f(v(f(m(ne,te),S[1]),v(f(m(Q,O),-w[1]),f(m(q,G),E[1]))),-P[2]))),-C[3])),v(f(v(v(f(v(f(m(oe,ae),w[1]),v(f(m(se,J),-E[1]),f(m(ne,te),C[1]))),S[2]),f(v(f(m(oe,ae),S[1]),v(f(m(Te,N),-E[1]),f(m(Q,O),C[1]))),-w[2])),v(f(v(f(m(se,J),S[1]),v(f(m(Te,N),-w[1]),f(m(q,G),C[1]))),E[2]),f(v(f(m(ne,te),S[1]),v(f(m(Q,O),-w[1]),f(m(q,G),E[1]))),-C[2]))),P[3]),f(v(v(f(v(f(m(he,ve),E[1]),v(f(m(oe,ae),-L[1]),f(m(me,re),C[1]))),w[2]),f(v(f(m(he,ve),w[1]),v(f(m(se,J),-L[1]),f(m(_e,K),C[1]))),-E[2])),v(f(v(f(m(oe,ae),w[1]),v(f(m(se,J),-E[1]),f(m(ne,te),C[1]))),L[2]),f(v(f(m(me,re),w[1]),v(f(m(_e,K),-E[1]),f(m(ne,te),L[1]))),-C[2]))),S[3]))),v(v(f(v(v(f(v(f(m(he,ve),E[1]),v(f(m(oe,ae),-L[1]),f(m(me,re),C[1]))),S[2]),f(v(f(m(he,ve),S[1]),v(f(m(Te,N),-L[1]),f(m(ge,H),C[1]))),-E[2])),v(f(v(f(m(oe,ae),S[1]),v(f(m(Te,N),-E[1]),f(m(Q,O),C[1]))),L[2]),f(v(f(m(me,re),S[1]),v(f(m(ge,H),-E[1]),f(m(Q,O),L[1]))),-C[2]))),-w[3]),f(v(v(f(v(f(m(he,ve),w[1]),v(f(m(se,J),-L[1]),f(m(_e,K),C[1]))),S[2]),f(v(f(m(he,ve),S[1]),v(f(m(Te,N),-L[1]),f(m(ge,H),C[1]))),-w[2])),v(f(v(f(m(se,J),S[1]),v(f(m(Te,N),-w[1]),f(m(q,G),C[1]))),L[2]),f(v(f(m(_e,K),S[1]),v(f(m(ge,H),-w[1]),f(m(q,G),L[1]))),-C[2]))),E[3])),v(f(v(v(f(v(f(m(oe,ae),w[1]),v(f(m(se,J),-E[1]),f(m(ne,te),C[1]))),S[2]),f(v(f(m(oe,ae),S[1]),v(f(m(Te,N),-E[1]),f(m(Q,O),C[1]))),-w[2])),v(f(v(f(m(se,J),S[1]),v(f(m(Te,N),-w[1]),f(m(q,G),C[1]))),E[2]),f(v(f(m(ne,te),S[1]),v(f(m(Q,O),-w[1]),f(m(q,G),E[1]))),-C[2]))),-L[3]),f(v(v(f(v(f(m(me,re),w[1]),v(f(m(_e,K),-E[1]),f(m(ne,te),L[1]))),S[2]),f(v(f(m(me,re),S[1]),v(f(m(ge,H),-E[1]),f(m(Q,O),L[1]))),-w[2])),v(f(v(f(m(_e,K),S[1]),v(f(m(ge,H),-w[1]),f(m(q,G),L[1]))),E[2]),f(v(f(m(ne,te),S[1]),v(f(m(Q,O),-w[1]),f(m(q,G),E[1]))),-L[2]))),C[3]))))),Re=m(ye,Ce);return Re[Re.length-1]}}var g=[function(){return 0},function(){return 0},function(){return 0}];function h(v){var m=g[v.length];return m||(m=g[v.length]=a(v.length)),m.apply(void 0,v)}function y(v,m,_,f,S,w,E,L){return function(C,P,z,G,O,H){switch(arguments.length){case 0:case 1:return 0;case 2:return f(C,P);case 3:return S(C,P,z);case 4:return w(C,P,z,G);case 5:return E(C,P,z,G,O);case 6:return L(C,P,z,G,O,H)}for(var N=new Array(arguments.length),B=0;B<arguments.length;++B)N[B]=arguments[B];return v(N)}}(function(){for(;g.length<=6;)g.push(a(g.length));d.exports=y.apply(void 0,[h].concat(g));for(var v=0;v<=6;++v)d.exports[v]=g[v]})()},6606:function(d,s,t){var i=t(8167);function r(g){return(g===2?n:g===3?o:g===4?a:g===5?u:p)(g<6?i[g]:i)}function n(g){return function(h,y){return[g([[+y[0],+h[0][1]],[+y[1],+h[1][1]]]),g([[+h[0][0],+y[0]],[+h[1][0],+y[1]]]),g(h)]}}function o(g){return function(h,y){return[g([[+y[0],+h[0][1],+h[0][2]],[+y[1],+h[1][1],+h[1][2]],[+y[2],+h[2][1],+h[2][2]]]),g([[+h[0][0],+y[0],+h[0][2]],[+h[1][0],+y[1],+h[1][2]],[+h[2][0],+y[2],+h[2][2]]]),g([[+h[0][0],+h[0][1],+y[0]],[+h[1][0],+h[1][1],+y[1]],[+h[2][0],+h[2][1],+y[2]]]),g(h)]}}function a(g){return function(h,y){return[g([[+y[0],+h[0][1],+h[0][2],+h[0][3]],[+y[1],+h[1][1],+h[1][2],+h[1][3]],[+y[2],+h[2][1],+h[2][2],+h[2][3]],[+y[3],+h[3][1],+h[3][2],+h[3][3]]]),g([[+h[0][0],+y[0],+h[0][2],+h[0][3]],[+h[1][0],+y[1],+h[1][2],+h[1][3]],[+h[2][0],+y[2],+h[2][2],+h[2][3]],[+h[3][0],+y[3],+h[3][2],+h[3][3]]]),g([[+h[0][0],+h[0][1],+y[0],+h[0][3]],[+h[1][0],+h[1][1],+y[1],+h[1][3]],[+h[2][0],+h[2][1],+y[2],+h[2][3]],[+h[3][0],+h[3][1],+y[3],+h[3][3]]]),g([[+h[0][0],+h[0][1],+h[0][2],+y[0]],[+h[1][0],+h[1][1],+h[1][2],+y[1]],[+h[2][0],+h[2][1],+h[2][2],+y[2]],[+h[3][0],+h[3][1],+h[3][2],+y[3]]]),g(h)]}}function u(g){return function(h,y){return[g([[+y[0],+h[0][1],+h[0][2],+h[0][3],+h[0][4]],[+y[1],+h[1][1],+h[1][2],+h[1][3],+h[1][4]],[+y[2],+h[2][1],+h[2][2],+h[2][3],+h[2][4]],[+y[3],+h[3][1],+h[3][2],+h[3][3],+h[3][4]],[+y[4],+h[4][1],+h[4][2],+h[4][3],+h[4][4]]]),g([[+h[0][0],+y[0],+h[0][2],+h[0][3],+h[0][4]],[+h[1][0],+y[1],+h[1][2],+h[1][3],+h[1][4]],[+h[2][0],+y[2],+h[2][2],+h[2][3],+h[2][4]],[+h[3][0],+y[3],+h[3][2],+h[3][3],+h[3][4]],[+h[4][0],+y[4],+h[4][2],+h[4][3],+h[4][4]]]),g([[+h[0][0],+h[0][1],+y[0],+h[0][3],+h[0][4]],[+h[1][0],+h[1][1],+y[1],+h[1][3],+h[1][4]],[+h[2][0],+h[2][1],+y[2],+h[2][3],+h[2][4]],[+h[3][0],+h[3][1],+y[3],+h[3][3],+h[3][4]],[+h[4][0],+h[4][1],+y[4],+h[4][3],+h[4][4]]]),g([[+h[0][0],+h[0][1],+h[0][2],+y[0],+h[0][4]],[+h[1][0],+h[1][1],+h[1][2],+y[1],+h[1][4]],[+h[2][0],+h[2][1],+h[2][2],+y[2],+h[2][4]],[+h[3][0],+h[3][1],+h[3][2],+y[3],+h[3][4]],[+h[4][0],+h[4][1],+h[4][2],+y[4],+h[4][4]]]),g([[+h[0][0],+h[0][1],+h[0][2],+h[0][3],+y[0]],[+h[1][0],+h[1][1],+h[1][2],+h[1][3],+y[1]],[+h[2][0],+h[2][1],+h[2][2],+h[2][3],+y[2]],[+h[3][0],+h[3][1],+h[3][2],+h[3][3],+y[3]],[+h[4][0],+h[4][1],+h[4][2],+h[4][3],+y[4]]]),g(h)]}}function p(g){return function(h,y){return[g([[+y[0],+h[0][1],+h[0][2],+h[0][3],+h[0][4],+h[0][5]],[+y[1],+h[1][1],+h[1][2],+h[1][3],+h[1][4],+h[1][5]],[+y[2],+h[2][1],+h[2][2],+h[2][3],+h[2][4],+h[2][5]],[+y[3],+h[3][1],+h[3][2],+h[3][3],+h[3][4],+h[3][5]],[+y[4],+h[4][1],+h[4][2],+h[4][3],+h[4][4],+h[4][5]],[+y[5],+h[5][1],+h[5][2],+h[5][3],+h[5][4],+h[5][5]]]),g([[+h[0][0],+y[0],+h[0][2],+h[0][3],+h[0][4],+h[0][5]],[+h[1][0],+y[1],+h[1][2],+h[1][3],+h[1][4],+h[1][5]],[+h[2][0],+y[2],+h[2][2],+h[2][3],+h[2][4],+h[2][5]],[+h[3][0],+y[3],+h[3][2],+h[3][3],+h[3][4],+h[3][5]],[+h[4][0],+y[4],+h[4][2],+h[4][3],+h[4][4],+h[4][5]],[+h[5][0],+y[5],+h[5][2],+h[5][3],+h[5][4],+h[5][5]]]),g([[+h[0][0],+h[0][1],+y[0],+h[0][3],+h[0][4],+h[0][5]],[+h[1][0],+h[1][1],+y[1],+h[1][3],+h[1][4],+h[1][5]],[+h[2][0],+h[2][1],+y[2],+h[2][3],+h[2][4],+h[2][5]],[+h[3][0],+h[3][1],+y[3],+h[3][3],+h[3][4],+h[3][5]],[+h[4][0],+h[4][1],+y[4],+h[4][3],+h[4][4],+h[4][5]],[+h[5][0],+h[5][1],+y[5],+h[5][3],+h[5][4],+h[5][5]]]),g([[+h[0][0],+h[0][1],+h[0][2],+y[0],+h[0][4],+h[0][5]],[+h[1][0],+h[1][1],+h[1][2],+y[1],+h[1][4],+h[1][5]],[+h[2][0],+h[2][1],+h[2][2],+y[2],+h[2][4],+h[2][5]],[+h[3][0],+h[3][1],+h[3][2],+y[3],+h[3][4],+h[3][5]],[+h[4][0],+h[4][1],+h[4][2],+y[4],+h[4][4],+h[4][5]],[+h[5][0],+h[5][1],+h[5][2],+y[5],+h[5][4],+h[5][5]]]),g([[+h[0][0],+h[0][1],+h[0][2],+h[0][3],+y[0],+h[0][5]],[+h[1][0],+h[1][1],+h[1][2],+h[1][3],+y[1],+h[1][5]],[+h[2][0],+h[2][1],+h[2][2],+h[2][3],+y[2],+h[2][5]],[+h[3][0],+h[3][1],+h[3][2],+h[3][3],+y[3],+h[3][5]],[+h[4][0],+h[4][1],+h[4][2],+h[4][3],+y[4],+h[4][5]],[+h[5][0],+h[5][1],+h[5][2],+h[5][3],+y[5],+h[5][5]]]),g([[+h[0][0],+h[0][1],+h[0][2],+h[0][3],+h[0][4],+y[0]],[+h[1][0],+h[1][1],+h[1][2],+h[1][3],+h[1][4],+y[1]],[+h[2][0],+h[2][1],+h[2][2],+h[2][3],+h[2][4],+y[2]],[+h[3][0],+h[3][1],+h[3][2],+h[3][3],+h[3][4],+y[3]],[+h[4][0],+h[4][1],+h[4][2],+h[4][3],+h[4][4],+y[4]],[+h[5][0],+h[5][1],+h[5][2],+h[5][3],+h[5][4],+y[5]]]),g(h)]}}var c=[function(){return[[0]]},function(g,h){return[[h[0]],[g[0][0]]]}];function x(g,h,y,v,m,_,f,S){return function(w,E){switch(w.length){case 0:return g(w,E);case 1:return h(w,E);case 2:return y(w,E);case 3:return v(w,E);case 4:return m(w,E);case 5:return _(w,E)}var L=f[w.length];return L||(L=f[w.length]=S(w.length)),L(w,E)}}(function(){for(;c.length<6;)c.push(r(c.length));d.exports=x.apply(void 0,c.concat([c,r]));for(var g=0;g<6;++g)d.exports[g]=c[g]})()},417:function(d,s,t){var i=t(9660),r=t(9662),n=t(8289),o=t(4078);function a(m,_,f,S){return function(w,E,L){var C=m(m(_(E[1],L[0]),_(-L[1],E[0])),m(_(w[1],E[0]),_(-E[1],w[0]))),P=m(_(w[1],L[0]),_(-L[1],w[0])),z=S(C,P);return z[z.length-1]}}function u(m,_,f,S){return function(w,E,L,C){var P=m(m(f(m(_(L[1],C[0]),_(-C[1],L[0])),E[2]),m(f(m(_(E[1],C[0]),_(-C[1],E[0])),-L[2]),f(m(_(E[1],L[0]),_(-L[1],E[0])),C[2]))),m(f(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),C[2])))),z=m(m(f(m(_(L[1],C[0]),_(-C[1],L[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-L[2]),f(m(_(w[1],L[0]),_(-L[1],w[0])),C[2]))),m(f(m(_(E[1],L[0]),_(-L[1],E[0])),w[2]),m(f(m(_(w[1],L[0]),_(-L[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),L[2])))),G=S(P,z);return G[G.length-1]}}function p(m,_,f,S){return function(w,E,L,C,P){var z=m(m(m(f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),L[2]),m(f(m(_(L[1],P[0]),_(-P[1],L[0])),-C[2]),f(m(_(L[1],C[0]),_(-C[1],L[0])),P[2]))),E[3]),m(f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),E[2]),m(f(m(_(E[1],P[0]),_(-P[1],E[0])),-C[2]),f(m(_(E[1],C[0]),_(-C[1],E[0])),P[2]))),-L[3]),f(m(f(m(_(L[1],P[0]),_(-P[1],L[0])),E[2]),m(f(m(_(E[1],P[0]),_(-P[1],E[0])),-L[2]),f(m(_(E[1],L[0]),_(-L[1],E[0])),P[2]))),C[3]))),m(f(m(f(m(_(L[1],C[0]),_(-C[1],L[0])),E[2]),m(f(m(_(E[1],C[0]),_(-C[1],E[0])),-L[2]),f(m(_(E[1],L[0]),_(-L[1],E[0])),C[2]))),-P[3]),m(f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),E[2]),m(f(m(_(E[1],P[0]),_(-P[1],E[0])),-C[2]),f(m(_(E[1],C[0]),_(-C[1],E[0])),P[2]))),w[3]),f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-C[2]),f(m(_(w[1],C[0]),_(-C[1],w[0])),P[2]))),-E[3])))),m(m(f(m(f(m(_(E[1],P[0]),_(-P[1],E[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),C[3]),m(f(m(f(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),-P[3]),f(m(f(m(_(L[1],C[0]),_(-C[1],L[0])),E[2]),m(f(m(_(E[1],C[0]),_(-C[1],E[0])),-L[2]),f(m(_(E[1],L[0]),_(-L[1],E[0])),C[2]))),w[3]))),m(f(m(f(m(_(L[1],C[0]),_(-C[1],L[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-L[2]),f(m(_(w[1],L[0]),_(-L[1],w[0])),C[2]))),-E[3]),m(f(m(f(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),L[3]),f(m(f(m(_(E[1],L[0]),_(-L[1],E[0])),w[2]),m(f(m(_(w[1],L[0]),_(-L[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),L[2]))),-C[3]))))),G=m(m(m(f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),L[2]),m(f(m(_(L[1],P[0]),_(-P[1],L[0])),-C[2]),f(m(_(L[1],C[0]),_(-C[1],L[0])),P[2]))),w[3]),f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-C[2]),f(m(_(w[1],C[0]),_(-C[1],w[0])),P[2]))),-L[3])),m(f(m(f(m(_(L[1],P[0]),_(-P[1],L[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-L[2]),f(m(_(w[1],L[0]),_(-L[1],w[0])),P[2]))),C[3]),f(m(f(m(_(L[1],C[0]),_(-C[1],L[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-L[2]),f(m(_(w[1],L[0]),_(-L[1],w[0])),C[2]))),-P[3]))),m(m(f(m(f(m(_(L[1],P[0]),_(-P[1],L[0])),E[2]),m(f(m(_(E[1],P[0]),_(-P[1],E[0])),-L[2]),f(m(_(E[1],L[0]),_(-L[1],E[0])),P[2]))),w[3]),f(m(f(m(_(L[1],P[0]),_(-P[1],L[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-L[2]),f(m(_(w[1],L[0]),_(-L[1],w[0])),P[2]))),-E[3])),m(f(m(f(m(_(E[1],P[0]),_(-P[1],E[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),L[3]),f(m(f(m(_(E[1],L[0]),_(-L[1],E[0])),w[2]),m(f(m(_(w[1],L[0]),_(-L[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),L[2]))),-P[3])))),O=S(z,G);return O[O.length-1]}}function c(m){return(m===3?a:m===4?u:p)(r,i,n,o)}var x=c(3),g=c(4),h=[function(){return 0},function(){return 0},function(m,_){return _[0]-m[0]},function(m,_,f){var S,w=(m[1]-f[1])*(_[0]-f[0]),E=(m[0]-f[0])*(_[1]-f[1]),L=w-E;if(w>0){if(E<=0)return L;S=w+E}else{if(!(w<0)||E>=0)return L;S=-(w+E)}var C=33306690738754716e-32*S;return L>=C||L<=-C?L:x(m,_,f)},function(m,_,f,S){var w=m[0]-S[0],E=_[0]-S[0],L=f[0]-S[0],C=m[1]-S[1],P=_[1]-S[1],z=f[1]-S[1],G=m[2]-S[2],O=_[2]-S[2],H=f[2]-S[2],N=E*z,B=L*P,V=L*C,q=w*z,te=w*P,K=E*C,J=G*(N-B)+O*(V-q)+H*(te-K),Y=7771561172376103e-31*((Math.abs(N)+Math.abs(B))*Math.abs(G)+(Math.abs(V)+Math.abs(q))*Math.abs(O)+(Math.abs(te)+Math.abs(K))*Math.abs(H));return J>Y||-J>Y?J:g(m,_,f,S)}];function y(m){var _=h[m.length];return _||(_=h[m.length]=c(m.length)),_.apply(void 0,m)}function v(m,_,f,S,w,E,L){return function(C,P,z,G,O){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,P);case 3:return w(C,P,z);case 4:return E(C,P,z,G);case 5:return L(C,P,z,G,O)}for(var H=new Array(arguments.length),N=0;N<arguments.length;++N)H[N]=arguments[N];return m(H)}}(function(){for(;h.length<=5;)h.push(c(h.length));d.exports=v.apply(void 0,[y].concat(h));for(var m=0;m<=5;++m)d.exports[m]=h[m]})()},2019:function(d,s,t){var i=t(9662),r=t(8289);d.exports=function(n,o){if(n.length===1)return r(o,n[0]);if(o.length===1)return r(n,o[0]);if(n.length===0||o.length===0)return[0];var a=[0];if(n.length<o.length)for(var u=0;u<n.length;++u)a=i(a,r(o,n[u]));else for(u=0;u<o.length;++u)a=i(a,r(n,o[u]));return a}},8289:function(d,s,t){var i=t(9660),r=t(87);d.exports=function(n,o){var a=n.length;if(a===1){var u=i(n[0],o);return u[0]?u:[u[1]]}var p=new Array(2*a),c=[.1,.1],x=[.1,.1],g=0;i(n[0],o,c),c[0]&&(p[g++]=c[0]);for(var h=1;h<a;++h){i(n[h],o,x);var y=c[1];r(y,x[0],c),c[0]&&(p[g++]=c[0]);var v=x[1],m=c[1],_=v+m,f=m-(_-v);c[1]=_,f&&(p[g++]=f)}return c[1]&&(p[g++]=c[1]),g===0&&(p[g++]=0),p.length=g,p}},4434:function(d,s,t){d.exports=function(r,n,o,a){var u=i(r,o,a),p=i(n,o,a);if(u>0&&p>0||u<0&&p<0)return!1;var c=i(o,r,n),x=i(a,r,n);return!(c>0&&x>0||c<0&&x<0)&&(u!==0||p!==0||c!==0||x!==0||function(g,h,y,v){for(var m=0;m<2;++m){var _=g[m],f=h[m],S=Math.min(_,f),w=Math.max(_,f),E=y[m],L=v[m],C=Math.min(E,L);if(Math.max(E,L)<S||w<C)return!1}return!0}(r,n,o,a))};var i=t(417)[3]},4078:function(d){d.exports=function(s,t){var i=0|s.length,r=0|t.length;if(i===1&&r===1)return function(C,P){var z=C+P,G=z-C,O=C-(z-G)+(P-G);return O?[O,z]:[z]}(s[0],-t[0]);var n,o,a=new Array(i+r),u=0,p=0,c=0,x=Math.abs,g=s[p],h=x(g),y=-t[c],v=x(y);h<v?(o=g,(p+=1)<i&&(h=x(g=s[p]))):(o=y,(c+=1)<r&&(v=x(y=-t[c]))),p<i&&h<v||c>=r?(n=g,(p+=1)<i&&(h=x(g=s[p]))):(n=y,(c+=1)<r&&(v=x(y=-t[c])));for(var m,_,f=n+o,S=f-n,w=o-S,E=w,L=f;p<i&&c<r;)h<v?(n=g,(p+=1)<i&&(h=x(g=s[p]))):(n=y,(c+=1)<r&&(v=x(y=-t[c]))),(w=(o=E)-(S=(f=n+o)-n))&&(a[u++]=w),E=L-((m=L+f)-(_=m-L))+(f-_),L=m;for(;p<i;)(w=(o=E)-(S=(f=(n=g)+o)-n))&&(a[u++]=w),E=L-((m=L+f)-(_=m-L))+(f-_),L=m,(p+=1)<i&&(g=s[p]);for(;c<r;)(w=(o=E)-(S=(f=(n=y)+o)-n))&&(a[u++]=w),E=L-((m=L+f)-(_=m-L))+(f-_),L=m,(c+=1)<r&&(y=-t[c]);return E&&(a[u++]=E),L&&(a[u++]=L),u||(a[u++]=0),a.length=u,a}},9662:function(d){d.exports=function(s,t){var i=0|s.length,r=0|t.length;if(i===1&&r===1)return function(C,P){var z=C+P,G=z-C,O=C-(z-G)+(P-G);return O?[O,z]:[z]}(s[0],t[0]);var n,o,a=new Array(i+r),u=0,p=0,c=0,x=Math.abs,g=s[p],h=x(g),y=t[c],v=x(y);h<v?(o=g,(p+=1)<i&&(h=x(g=s[p]))):(o=y,(c+=1)<r&&(v=x(y=t[c]))),p<i&&h<v||c>=r?(n=g,(p+=1)<i&&(h=x(g=s[p]))):(n=y,(c+=1)<r&&(v=x(y=t[c])));for(var m,_,f=n+o,S=f-n,w=o-S,E=w,L=f;p<i&&c<r;)h<v?(n=g,(p+=1)<i&&(h=x(g=s[p]))):(n=y,(c+=1)<r&&(v=x(y=t[c]))),(w=(o=E)-(S=(f=n+o)-n))&&(a[u++]=w),E=L-((m=L+f)-(_=m-L))+(f-_),L=m;for(;p<i;)(w=(o=E)-(S=(f=(n=g)+o)-n))&&(a[u++]=w),E=L-((m=L+f)-(_=m-L))+(f-_),L=m,(p+=1)<i&&(g=s[p]);for(;c<r;)(w=(o=E)-(S=(f=(n=y)+o)-n))&&(a[u++]=w),E=L-((m=L+f)-(_=m-L))+(f-_),L=m,(c+=1)<r&&(y=t[c]);return E&&(a[u++]=E),L&&(a[u++]=L),u||(a[u++]=0),a.length=u,a}},8691:function(d,s,t){d.exports=function(n){return r(i(n))};var i=t(2692),r=t(7037)},7212:function(d,s,t){d.exports=function(a,u,p,c){if(p=p||0,c===void 0&&(c=function(f){for(var S=f.length,w=0,E=0;E<S;++E)w=0|Math.max(w,f[E].length);return w-1}(a)),a.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(f,S){for(var w=f.length,E=r.mallocUint8(w),L=0;L<w;++L)E[L]=f[L]<S|0;return E}(u,+p),g=function(f,S){for(var w=f.length,E=S*(S+1)/2*w|0,L=r.mallocUint32(2*E),C=0,P=0;P<w;++P)for(var z=f[P],G=(S=z.length,0);G<S;++G)for(var O=0;O<G;++O){var H=z[O],N=z[G];L[C++]=0|Math.min(H,N),L[C++]=0|Math.max(H,N)}n(i(L,[C/2|0,2]));var B=2;for(P=2;P<C;P+=2)L[P-2]===L[P]&&L[P-1]===L[P+1]||(L[B++]=L[P],L[B++]=L[P+1]);return i(L,[B/2|0,2])}(a,c),h=function(f,S,w,E){for(var L=f.data,C=f.shape[0],P=r.mallocDouble(C),z=0,G=0;G<C;++G){var O=L[2*G],H=L[2*G+1];if(w[O]!==w[H]){var N=S[O],B=S[H];L[2*z]=O,L[2*z+1]=H,P[z++]=(B-E)/(B-N)}}return f.shape[0]=z,i(P,[z])}(g,u,x,+p),y=function(f,S){var w=r.mallocInt32(2*S),E=f.shape[0],L=f.data;w[0]=0;for(var C=0,P=0;P<E;++P){var z=L[2*P];if(z!==C){for(w[2*C+1]=P;++C<z;)w[2*C]=P,w[2*C+1]=P;w[2*C]=P}}for(w[2*C+1]=E;++C<S;)w[2*C]=w[2*C+1]=E;return w}(g,0|u.length),v=o(c)(a,g.data,y,x),m=function(f){for(var S=0|f.shape[0],w=f.data,E=new Array(S),L=0;L<S;++L)E[L]=[w[2*L],w[2*L+1]];return E}(g),_=[].slice.call(h.data,0,h.shape[0]);return r.free(x),r.free(g.data),r.free(h.data),r.free(y),{cells:v,vertexIds:m,vertexWeights:_}};var i=t(5050),r=t(5306),n=t(8729),o=t(1168)},1168:function(d){d.exports=function(t){return s[t]()};var s=[function(){return function(t,i,r,n){for(var o=t.length,a=0;a<o;++a)t[a].length;return[]}},function(){function t(i,r,n,o){for(var a=0|Math.min(n,o),u=0|Math.max(n,o),p=i[2*a],c=i[2*a+1];p<c;){var x=p+c>>1,g=r[2*x+1];if(g===u)return x;u<g?c=x:p=x+1}return p}return function(i,r,n,o){for(var a=i.length,u=[],p=0;p<a;++p){var c=i[p];if(c.length===2){var x=(o[c[0]]<<0)+(o[c[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:u.push([t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0])])}}}return u}},function(){function t(i,r,n,o){for(var a=0|Math.min(n,o),u=0|Math.max(n,o),p=i[2*a],c=i[2*a+1];p<c;){var x=p+c>>1,g=r[2*x+1];if(g===u)return x;u<g?c=x:p=x+1}return p}return function(i,r,n,o){for(var a=i.length,u=[],p=0;p<a;++p){var c=i[p],x=c.length;if(x===3){if((g=(o[c[0]]<<0)+(o[c[1]]<<1)+(o[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([t(n,r,c[0],c[2]),t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0]),t(n,r,c[1],c[2])]);break;case 3:u.push([t(n,r,c[0],c[2]),t(n,r,c[1],c[2])]);break;case 4:u.push([t(n,r,c[2],c[1]),t(n,r,c[2],c[0])]);break;case 5:u.push([t(n,r,c[2],c[1]),t(n,r,c[0],c[1])]);break;case 6:u.push([t(n,r,c[1],c[0]),t(n,r,c[2],c[0])])}}else if(x===2){var g;if((g=(o[c[0]]<<0)+(o[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0])])}}}return u}},function(){function t(i,r,n,o){for(var a=0|Math.min(n,o),u=0|Math.max(n,o),p=i[2*a],c=i[2*a+1];p<c;){var x=p+c>>1,g=r[2*x+1];if(g===u)return x;u<g?c=x:p=x+1}return p}return function(i,r,n,o){for(var a=i.length,u=[],p=0;p<a;++p){var c=i[p],x=c.length;if(x===4){if((g=(o[c[0]]<<0)+(o[c[1]]<<1)+(o[c[2]]<<2)+(o[c[3]]<<3))==0||g===15)continue;switch(g){case 0:case 15:break;case 1:u.push([t(n,r,c[0],c[1]),t(n,r,c[0],c[2]),t(n,r,c[0],c[3])]);break;case 2:u.push([t(n,r,c[1],c[2]),t(n,r,c[1],c[0]),t(n,r,c[1],c[3])]);break;case 3:u.push([t(n,r,c[1],c[2]),t(n,r,c[0],c[2]),t(n,r,c[0],c[3])],[t(n,r,c[1],c[3]),t(n,r,c[1],c[2]),t(n,r,c[0],c[3])]);break;case 4:u.push([t(n,r,c[2],c[0]),t(n,r,c[2],c[1]),t(n,r,c[2],c[3])]);break;case 5:u.push([t(n,r,c[0],c[1]),t(n,r,c[2],c[1]),t(n,r,c[0],c[3])],[t(n,r,c[2],c[1]),t(n,r,c[2],c[3]),t(n,r,c[0],c[3])]);break;case 6:u.push([t(n,r,c[2],c[0]),t(n,r,c[1],c[0]),t(n,r,c[1],c[3])],[t(n,r,c[2],c[3]),t(n,r,c[2],c[0]),t(n,r,c[1],c[3])]);break;case 7:u.push([t(n,r,c[0],c[3]),t(n,r,c[1],c[3]),t(n,r,c[2],c[3])]);break;case 8:u.push([t(n,r,c[3],c[1]),t(n,r,c[3],c[0]),t(n,r,c[3],c[2])]);break;case 9:u.push([t(n,r,c[3],c[1]),t(n,r,c[0],c[1]),t(n,r,c[0],c[2])],[t(n,r,c[3],c[2]),t(n,r,c[3],c[1]),t(n,r,c[0],c[2])]);break;case 10:u.push([t(n,r,c[1],c[0]),t(n,r,c[3],c[0]),t(n,r,c[1],c[2])],[t(n,r,c[3],c[0]),t(n,r,c[3],c[2]),t(n,r,c[1],c[2])]);break;case 11:u.push([t(n,r,c[1],c[2]),t(n,r,c[0],c[2]),t(n,r,c[3],c[2])]);break;case 12:u.push([t(n,r,c[3],c[0]),t(n,r,c[2],c[0]),t(n,r,c[2],c[1])],[t(n,r,c[3],c[1]),t(n,r,c[3],c[0]),t(n,r,c[2],c[1])]);break;case 13:u.push([t(n,r,c[0],c[1]),t(n,r,c[2],c[1]),t(n,r,c[3],c[1])]);break;case 14:u.push([t(n,r,c[2],c[0]),t(n,r,c[1],c[0]),t(n,r,c[3],c[0])])}}else if(x===3){if((g=(o[c[0]]<<0)+(o[c[1]]<<1)+(o[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([t(n,r,c[0],c[2]),t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0]),t(n,r,c[1],c[2])]);break;case 3:u.push([t(n,r,c[0],c[2]),t(n,r,c[1],c[2])]);break;case 4:u.push([t(n,r,c[2],c[1]),t(n,r,c[2],c[0])]);break;case 5:u.push([t(n,r,c[2],c[1]),t(n,r,c[0],c[1])]);break;case 6:u.push([t(n,r,c[1],c[0]),t(n,r,c[2],c[0])])}}else if(x===2){var g;if((g=(o[c[0]]<<0)+(o[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0])])}}}return u}}]},8211:function(d,s,t){t(2288),t(1731),s.H=function(i,r){var n=i.length,o=i.length-r.length,a=Math.min;if(o)return o;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return(c=i[0]+i[1]-r[0]-r[1])||a(i[0],i[1])-a(r[0],r[1]);case 3:var u=i[0]+i[1],p=r[0]+r[1];if(c=u+i[2]-(p+r[2]))return c;var c,x=a(i[0],i[1]),g=a(r[0],r[1]);return(c=a(x,i[2])-a(g,r[2]))||a(x+i[2],u)-a(g+r[2],p);default:var h=i.slice(0);h.sort();var y=r.slice(0);y.sort();for(var v=0;v<n;++v)if(o=h[v]-y[v])return o;return 0}}},9392:function(d,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,o;return n=(r>65535)<<4,n|=o=((r>>>=n)>255)<<3,n|=o=((r>>>=o)>15)<<2,(n|=o=((r>>>=o)>3)<<1)|(r>>>=o)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var o=n,a=n,u=7;for(o>>>=1;o;o>>>=1)a<<=1,a|=1&o,--u;r[n]=a<<u&255}})(i),s.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,o){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},6656:function(d,s,t){var i=t(9392),r=t(9521);function n(g,h){var y=g.length,v=g.length-h.length,m=Math.min;if(v)return v;switch(y){case 0:return 0;case 1:return g[0]-h[0];case 2:return(S=g[0]+g[1]-h[0]-h[1])||m(g[0],g[1])-m(h[0],h[1]);case 3:var _=g[0]+g[1],f=h[0]+h[1];if(S=_+g[2]-(f+h[2]))return S;var S,w=m(g[0],g[1]),E=m(h[0],h[1]);return(S=m(w,g[2])-m(E,h[2]))||m(w+g[2],_)-m(E+h[2],f);default:var L=g.slice(0);L.sort();var C=h.slice(0);C.sort();for(var P=0;P<y;++P)if(v=L[P]-C[P])return v;return 0}}function o(g,h){return n(g[0],h[0])}function a(g,h){if(h){for(var y=g.length,v=new Array(y),m=0;m<y;++m)v[m]=[g[m],h[m]];for(v.sort(o),m=0;m<y;++m)g[m]=v[m][0],h[m]=v[m][1];return g}return g.sort(n),g}function u(g){if(g.length===0)return[];for(var h=1,y=g.length,v=1;v<y;++v){var m=g[v];if(n(m,g[v-1])){if(v===h){h++;continue}g[h++]=m}}return g.length=h,g}function p(g,h){for(var y=0,v=g.length-1,m=-1;y<=v;){var _=y+v>>1,f=n(g[_],h);f<=0?(f===0&&(m=_),y=_+1):f>0&&(v=_-1)}return m}function c(g,h){for(var y=new Array(g.length),v=0,m=y.length;v<m;++v)y[v]=[];for(var _=[],f=(v=0,h.length);v<f;++v)for(var S=h[v],w=S.length,E=1,L=1<<w;E<L;++E){_.length=i.popCount(E);for(var C=0,P=0;P<w;++P)E&1<<P&&(_[C++]=S[P]);var z=p(g,_);if(!(z<0))for(;y[z++].push(v),!(z>=g.length||n(g[z],_)!==0););}return y}function x(g,h){if(h<0)return[];for(var y=[],v=(1<<h+1)-1,m=0;m<g.length;++m)for(var _=g[m],f=v;f<1<<_.length;f=i.nextCombination(f)){for(var S=new Array(h+1),w=0,E=0;E<_.length;++E)f&1<<E&&(S[w++]=_[E]);y.push(S)}return a(y)}s.dimension=function(g){for(var h=0,y=Math.max,v=0,m=g.length;v<m;++v)h=y(h,g[v].length);return h-1},s.countVertices=function(g){for(var h=-1,y=Math.max,v=0,m=g.length;v<m;++v)for(var _=g[v],f=0,S=_.length;f<S;++f)h=y(h,_[f]);return h+1},s.cloneCells=function(g){for(var h=new Array(g.length),y=0,v=g.length;y<v;++y)h[y]=g[y].slice(0);return h},s.compareCells=n,s.normalize=a,s.unique=u,s.findCell=p,s.incidence=c,s.dual=function(g,h){if(!h)return c(u(x(g,0)),g);for(var y=new Array(h),v=0;v<h;++v)y[v]=[];v=0;for(var m=g.length;v<m;++v)for(var _=g[v],f=0,S=_.length;f<S;++f)y[_[f]].push(v);return y},s.explode=function(g){for(var h=[],y=0,v=g.length;y<v;++y)for(var m=g[y],_=0|m.length,f=1,S=1<<_;f<S;++f){for(var w=[],E=0;E<_;++E)f>>>E&1&&w.push(m[E]);h.push(w)}return a(h)},s.skeleton=x,s.boundary=function(g){for(var h=[],y=0,v=g.length;y<v;++y)for(var m=g[y],_=0,f=m.length;_<f;++_){for(var S=new Array(m.length-1),w=0,E=0;w<f;++w)w!==_&&(S[E++]=m[w]);h.push(S)}return a(h)},s.connectedComponents=function(g,h){return h?function(y,v){for(var m=new r(v),_=0;_<y.length;++_)for(var f=y[_],S=0;S<f.length;++S)for(var w=S+1;w<f.length;++w)m.link(f[S],f[w]);var E=[],L=m.ranks;for(_=0;_<L.length;++_)L[_]=-1;for(_=0;_<y.length;++_){var C=m.find(y[_][0]);L[C]<0?(L[C]=E.length,E.push([y[_].slice(0)])):E[L[C]].push(y[_].slice(0))}return E}(g,h):function(y){for(var v=u(a(x(y,0))),m=new r(v.length),_=0;_<y.length;++_)for(var f=y[_],S=0;S<f.length;++S)for(var w=p(v,[f[S]]),E=S+1;E<f.length;++E)m.link(w,p(v,[f[E]]));var L=[],C=m.ranks;for(_=0;_<C.length;++_)C[_]=-1;for(_=0;_<y.length;++_){var P=m.find(p(v,[y[_][0]]));C[P]<0?(C[P]=L.length,L.push([y[_].slice(0)])):L[C[P]].push(y[_].slice(0))}return L}(g)}},9521:function(d){function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}d.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var r=i[t];i[t]=i[r],t=r}return t},s.prototype.link=function(t,i){var r=this.find(t),n=this.find(i);if(r!==n){var o=this.ranks,a=this.roots,u=o[r],p=o[n];u<p?a[r]=n:p<u?a[n]=r:(a[n]=r,++o[r])}}},8243:function(d,s,t){d.exports=function(n,o,a){for(var u=o.length,p=n.length,c=new Array(u),x=new Array(u),g=new Array(u),h=new Array(u),y=0;y<u;++y)c[y]=x[y]=-1,g[y]=1/0,h[y]=!1;for(y=0;y<p;++y){var v=n[y];if(v.length!==2)throw new Error("Input must be a graph");var m=v[1],_=v[0];x[_]!==-1?x[_]=-2:x[_]=m,c[m]!==-1?c[m]=-2:c[m]=_}function f(K){if(h[K])return 1/0;var J,Y,W,Q=c[K],ne=x[K];return Q<0||ne<0?1/0:(J=o[K],Y=o[Q],W=o[ne],Math.abs(i(J,Y,W))/Math.sqrt(Math.pow(Y[0]-W[0],2)+Math.pow(Y[1]-W[1],2)))}function S(K,J){var Y=O[K],W=O[J];O[K]=W,O[J]=Y,H[Y]=J,H[W]=K}function w(K){return g[O[K]]}function E(K){return 1&K?K-1>>1:(K>>1)-1}function L(K){for(var J=w(K);;){var Y=J,W=2*K+1,Q=2*(K+1),ne=K;if(W<N){var re=w(W);re<Y&&(ne=W,Y=re)}if(Q<N&&w(Q)<Y&&(ne=Q),ne===K)return K;S(K,ne),K=ne}}function C(K){for(var J=w(K);K>0;){var Y=E(K);if(!(Y>=0&&J<w(Y)))return K;S(K,Y),K=Y}}function P(){if(N>0){var K=O[0];return S(0,N-1),N-=1,L(0),K}return-1}function z(K,J){var Y=O[K];return g[Y]===J?K:(g[Y]=-1/0,C(K),P(),g[Y]=J,C((N+=1)-1))}function G(K){if(!h[K]){h[K]=!0;var J=c[K],Y=x[K];c[Y]>=0&&(c[Y]=J),x[J]>=0&&(x[J]=Y),H[J]>=0&&z(H[J],f(J)),H[Y]>=0&&z(H[Y],f(Y))}}var O=[],H=new Array(u);for(y=0;y<u;++y)(g[y]=f(y))<1/0?(H[y]=O.length,O.push(y)):H[y]=-1;var N=O.length;for(y=N>>1;y>=0;--y)L(y);for(;;){var B=P();if(B<0||g[B]>a)break;G(B)}var V=[];for(y=0;y<u;++y)h[y]||(H[y]=V.length,V.push(o[y].slice()));function q(K,J){if(K[J]<0)return J;var Y=J,W=J;do{var Q=K[W];if(!h[W]||Q<0||Q===W||(Q=K[W=Q],!h[W]||Q<0||Q===W))break;W=Q,Y=K[Y]}while(Y!==W);for(var ne=J;ne!==W;ne=K[ne])K[ne]=W;return W}V.length;var te=[];return n.forEach(function(K){var J=q(c,K[0]),Y=q(x,K[1]);if(J>=0&&Y>=0&&J!==Y){var W=H[J],Q=H[Y];W!==Q&&te.push([W,Q])}}),r.unique(r.normalize(te)),{positions:V,edges:te}};var i=t(417),r=t(6656)},6638:function(d,s,t){d.exports=function(n,o){var a,u,p,c;if(o[0][0]<o[1][0])a=o[0],u=o[1];else{if(!(o[0][0]>o[1][0]))return r(o,n);a=o[1],u=o[0]}if(n[0][0]<n[1][0])p=n[0],c=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,o);p=n[1],c=n[0]}var x=i(a,u,c),g=i(a,u,p);if(x<0){if(g<=0)return x}else if(x>0){if(g>=0)return x}else if(g)return g;if(x=i(c,p,u),g=i(c,p,a),x<0){if(g<=0)return x}else if(x>0){if(g>=0)return x}else if(g)return g;return u[0]-c[0]};var i=t(417);function r(n,o){var a,u,p,c;if(o[0][0]<o[1][0])a=o[0],u=o[1];else{if(!(o[0][0]>o[1][0])){var x=Math.min(n[0][1],n[1][1]),g=Math.max(n[0][1],n[1][1]),h=Math.min(o[0][1],o[1][1]),y=Math.max(o[0][1],o[1][1]);return g<h?g-h:x>y?x-y:g-y}a=o[1],u=o[0]}n[0][1]<n[1][1]?(p=n[0],c=n[1]):(p=n[1],c=n[0]);var v=i(u,a,p);return v||(v=i(u,a,c))||c-u}},4385:function(d,s,t){d.exports=function(g){for(var h=g.length,y=2*h,v=new Array(y),m=0;m<h;++m){var _=g[m],f=_[0][0]<_[1][0];v[2*m]=new x(_[0][0],_,f,m),v[2*m+1]=new x(_[1][0],_,!f,m)}v.sort(function(G,O){var H=G.x-O.x;return H||(H=G.create-O.create)||Math.min(G.segment[0][1],G.segment[1][1])-Math.min(O.segment[0][1],O.segment[1][1])});var S=r(o),w=[],E=[],L=[];for(m=0;m<y;){for(var C=v[m].x,P=[];m<y;){var z=v[m];if(z.x!==C)break;m+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(P.push(new c(z.segment[0][1],z.index,!0,!0)),P.push(new c(z.segment[1][1],z.index,!1,!1))):(P.push(new c(z.segment[1][1],z.index,!0,!1)),P.push(new c(z.segment[0][1],z.index,!1,!0)))):S=z.create?S.insert(z.segment,z.index):S.remove(z.segment)}w.push(S.root),E.push(C),L.push(P)}return new a(w,E,L)};var i=t(5070),r=t(7080),n=t(417),o=t(6638);function a(g,h,y){this.slabs=g,this.coordinates=h,this.horizontal=y}function u(g,h){return g.y-h}function p(g,h){for(var y=null;g;){var v,m,_=g.key;_[0][0]<_[1][0]?(v=_[0],m=_[1]):(v=_[1],m=_[0]);var f=n(v,m,h);if(f<0)g=g.left;else if(f>0)if(h[0]!==_[1][0])y=g,g=g.right;else{if(S=p(g.right,h))return S;g=g.left}else{if(h[0]!==_[1][0])return g;var S;if(S=p(g.right,h))return S;g=g.left}}return y}function c(g,h,y,v){this.y=g,this.index=h,this.start=y,this.closed=v}function x(g,h,y,v){this.x=g,this.segment=h,this.create=y,this.index=v}a.prototype.castUp=function(g){var h=i.le(this.coordinates,g[0]);if(h<0)return-1;this.slabs[h];var y=p(this.slabs[h],g),v=-1;if(y&&(v=y.value),this.coordinates[h]===g[0]){var m=null;if(y&&(m=y.key),h>0){var _=p(this.slabs[h-1],g);_&&(m?o(_.key,m)>0&&(m=_.key,v=_.value):(v=_.value,m=_.key))}var f=this.horizontal[h];if(f.length>0){var S=i.ge(f,g[1],u);if(S<f.length){var w=f[S];if(g[1]===w.y){if(w.closed)return w.index;for(;S<f.length-1&&f[S+1].y===g[1];)if((w=f[S+=1]).closed)return w.index;if(w.y===g[1]&&!w.start){if((S+=1)>=f.length)return v;w=f[S]}}if(w.start)if(m){var E=n(m[0],m[1],[g[0],w.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(v=w.index)}else v=w.index;else w.y!==g[1]&&(v=w.index)}}}return v}},4670:function(d,s,t){var i=t(9130),r=t(9662);function n(a,u){var p=r(i(a,u),[u[u.length-1]]);return p[p.length-1]}function o(a,u,p,c){var x=-u/(c-u);x<0?x=0:x>1&&(x=1);for(var g=1-x,h=a.length,y=new Array(h),v=0;v<h;++v)y[v]=x*a[v]+g*p[v];return y}d.exports=function(a,u){for(var p=[],c=[],x=n(a[a.length-1],u),g=a[a.length-1],h=a[0],y=0;y<a.length;++y,g=h){var v=n(h=a[y],u);if(x<0&&v>0||x>0&&v<0){var m=o(g,v,h,x);p.push(m),c.push(m.slice())}v<0?c.push(h.slice()):v>0?p.push(h.slice()):(p.push(h.slice()),c.push(h.slice())),x=v}return{positive:p,negative:c}},d.exports.positive=function(a,u){for(var p=[],c=n(a[a.length-1],u),x=a[a.length-1],g=a[0],h=0;h<a.length;++h,x=g){var y=n(g=a[h],u);(c<0&&y>0||c>0&&y<0)&&p.push(o(x,y,g,c)),y>=0&&p.push(g.slice()),c=y}return p},d.exports.negative=function(a,u){for(var p=[],c=n(a[a.length-1],u),x=a[a.length-1],g=a[0],h=0;h<a.length;++h,x=g){var y=n(g=a[h],u);(c<0&&y>0||c>0&&y<0)&&p.push(o(x,y,g,c)),y<=0&&p.push(g.slice()),c=y}return p}},8974:function(d,s,t){var i;(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(u){return function(p,c){var x,g,h,y,v,m,_,f,S,w=1,E=p.length,L="";for(g=0;g<E;g++)if(typeof p[g]=="string")L+=p[g];else if(typeof p[g]=="object"){if((y=p[g]).keys)for(x=c[w],h=0;h<y.keys.length;h++){if(x==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[h],y.keys[h-1]));x=x[y.keys[h]]}else x=y.param_no?c[y.param_no]:c[w++];if(r.not_type.test(y.type)&&r.not_primitive.test(y.type)&&x instanceof Function&&(x=x()),r.numeric_arg.test(y.type)&&typeof x!="number"&&isNaN(x))throw new TypeError(n("[sprintf] expecting number but found %T",x));switch(r.number.test(y.type)&&(f=x>=0),y.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,y.width?parseInt(y.width):0);break;case"e":x=y.precision?parseFloat(x).toExponential(y.precision):parseFloat(x).toExponential();break;case"f":x=y.precision?parseFloat(x).toFixed(y.precision):parseFloat(x);break;case"g":x=y.precision?String(Number(x.toPrecision(y.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=y.precision?x.substring(0,y.precision):x;break;case"t":x=String(!!x),x=y.precision?x.substring(0,y.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=y.precision?x.substring(0,y.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=y.precision?x.substring(0,y.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}r.json.test(y.type)?L+=x:(!r.number.test(y.type)||f&&!y.sign?S="":(S=f?"+":"-",x=x.toString().replace(r.sign,"")),m=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",_=y.width-(S+x).length,v=y.width&&_>0?m.repeat(_):"",L+=y.align?S+x+v:m==="0"?S+v+x:v+S+x)}return L}(function(p){if(a[p])return a[p];for(var c,x=p,g=[],h=0;x;){if((c=r.text.exec(x))!==null)g.push(c[0]);else if((c=r.modulo.exec(x))!==null)g.push("%");else{if((c=r.placeholder.exec(x))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){h|=1;var y=[],v=c[2],m=[];if((m=r.key.exec(v))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(y.push(m[1]);(v=v.substring(m[0].length))!=="";)if((m=r.key_access.exec(v))!==null)y.push(m[1]);else{if((m=r.index_access.exec(v))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");y.push(m[1])}c[2]=y}else h|=2;if(h===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}x=x.substring(c[0].length)}return a[p]=g}(u),arguments)}function o(u,p){return n.apply(null,[u].concat(p||[]))}var a=Object.create(null);s.sprintf=n,s.vsprintf=o,typeof window<"u"&&(window.sprintf=n,window.vsprintf=o,(i=(function(){return{sprintf:n,vsprintf:o}}).call(s,t,s,d))===void 0||(d.exports=i))})()},4162:function(d,s,t){d.exports=function(a,u){if(a.dimension<=0)return{positions:[],cells:[]};if(a.dimension===1)return function(x,g){for(var h=r(x,g),y=h.length,v=new Array(y),m=new Array(y),_=0;_<y;++_)v[_]=[h[_]],m[_]=[_];return{positions:v,cells:m}}(a,u);var p=a.order.join()+"-"+a.dtype,c=o[p];return u=+u||0,c||(c=o[p]=function(x,g){var h=x.length+"d",y=n[h];if(y)return y(i,x,g)}(a.order,a.dtype)),c(a,u)};var i=t(9284),r=t(9584),n={"2d":function(a,u,p){var c=a({order:u,scalarArguments:3,getters:p==="generic"?[0]:void 0,phase:function(x,g,h,y){return x>y|0},vertex:function(x,g,h,y,v,m,_,f,S,w,E,L,C){var P=(_<<0)+(f<<1)+(S<<2)+(w<<3)|0;if(P!==0&&P!==15)switch(P){case 0:case 15:E.push([x-.5,g-.5]);break;case 1:E.push([x-.25-.25*(y+h-2*C)/(h-y),g-.25-.25*(v+h-2*C)/(h-v)]);break;case 2:E.push([x-.75-.25*(-y-h+2*C)/(y-h),g-.25-.25*(m+y-2*C)/(y-m)]);break;case 3:E.push([x-.5,g-.5-.5*(v+h+m+y-4*C)/(h-v+y-m)]);break;case 4:E.push([x-.25-.25*(m+v-2*C)/(v-m),g-.75-.25*(-v-h+2*C)/(v-h)]);break;case 5:E.push([x-.5-.5*(y+h+m+v-4*C)/(h-y+v-m),g-.5]);break;case 6:E.push([x-.5-.25*(-y-h+m+v)/(y-h+v-m),g-.5-.25*(-v-h+m+y)/(v-h+y-m)]);break;case 7:E.push([x-.75-.25*(m+v-2*C)/(v-m),g-.75-.25*(m+y-2*C)/(y-m)]);break;case 8:E.push([x-.75-.25*(-m-v+2*C)/(m-v),g-.75-.25*(-m-y+2*C)/(m-y)]);break;case 9:E.push([x-.5-.25*(y+h+-m-v)/(h-y+m-v),g-.5-.25*(v+h+-m-y)/(h-v+m-y)]);break;case 10:E.push([x-.5-.5*(-y-h-m-v+4*C)/(y-h+m-v),g-.5]);break;case 11:E.push([x-.25-.25*(-m-v+2*C)/(m-v),g-.75-.25*(v+h-2*C)/(h-v)]);break;case 12:E.push([x-.5,g-.5-.5*(-v-h-m-y+4*C)/(v-h+m-y)]);break;case 13:E.push([x-.75-.25*(y+h-2*C)/(h-y),g-.25-.25*(-m-y+2*C)/(m-y)]);break;case 14:E.push([x-.25-.25*(-y-h+2*C)/(y-h),g-.25-.25*(-v-h+2*C)/(v-h)])}},cell:function(x,g,h,y,v,m,_,f,S){v?f.push([x,g]):f.push([g,x])}});return function(x,g){var h=[],y=[];return c(x,h,y,g),{positions:h,cells:y}}}},o={}},6946:function(d,s,t){d.exports=function o(a,u,p){p=p||{};var c=n[a];c||(c=n[a]={" ":{data:new Float32Array(0),shape:.2}});var x=c[u];if(!x)if(u.length<=1||!/\d/.test(u))x=c[u]=function(L){for(var C=L.cells,P=L.positions,z=new Float32Array(6*C.length),G=0,O=0,H=0;H<C.length;++H)for(var N=C[H],B=0;B<3;++B){var V=P[N[B]];z[G++]=V[0],z[G++]=V[1]+1.4,O=Math.max(V[0],O)}return{data:z,shape:O}}(i(u,{triangles:!0,font:a,textAlign:p.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var g=u.split(/(\d|\s)/),h=new Array(g.length),y=0,v=0,m=0;m<g.length;++m)h[m]=o(a,g[m]),y+=h[m].data.length,v+=h[m].shape,m>0&&(v+=.02);var _=new Float32Array(y),f=0,S=-.5*v;for(m=0;m<h.length;++m){for(var w=h[m].data,E=0;E<w.length;E+=2)_[f++]=w[E]+S,_[f++]=w[E+1];S+=h[m].shape+.02}x=c[u]={data:_,shape:v}}return x};var i=t(875),r=window||k.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},14:function(d,s,t){var i=t(4405);d.exports=o;var r=96;function n(a,u){var p=i(getComputedStyle(a).getPropertyValue(u));return p[0]*o(p[1],a)}function o(a,u){switch(u=u||document.body,a=(a||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),a){case"%":return u.clientHeight/100;case"ch":case"ex":return function(p,c){var x=document.createElement("div");x.style["font-size"]="128"+p,c.appendChild(x);var g=n(x,"font-size")/128;return c.removeChild(x),g}(a,u);case"em":return n(u,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},3440:function(d,s,t){d.exports=function(v){var m=(v=v||{}).center||[0,0,0],_=v.up||[0,1,0],f=v.right||x(_),S=v.radius||1,w=v.theta||0,E=v.phi||0;if(m=[].slice.call(m,0,3),_=[].slice.call(_,0,3),a(_,_),f=[].slice.call(f,0,3),a(f,f),"eye"in v){var L=v.eye,C=[L[0]-m[0],L[1]-m[1],L[2]-m[2]];o(f,C,_),p(f[0],f[1],f[2])<1e-6?f=x(_):a(f,f),S=p(C[0],C[1],C[2]);var P=u(_,C)/S,z=u(f,C)/S;E=Math.acos(P),w=Math.acos(z)}return S=Math.log(S),new g(v.zoomMin,v.zoomMax,m,_,f,S,w,E)};var i=t(8444),r=t(7437),n=t(4422),o=t(903),a=t(899),u=t(9305);function p(v,m,_){return Math.sqrt(Math.pow(v,2)+Math.pow(m,2)+Math.pow(_,2))}function c(v){return Math.min(1,Math.max(-1,v))}function x(v){var m=Math.abs(v[0]),_=Math.abs(v[1]),f=Math.abs(v[2]),S=[0,0,0];m>Math.max(_,f)?S[2]=1:_>Math.max(m,f)?S[0]=1:S[1]=1;for(var w=0,E=0,L=0;L<3;++L)w+=v[L]*v[L],E+=S[L]*v[L];for(L=0;L<3;++L)S[L]-=E/w*v[L];return a(S,S),S}function g(v,m,_,f,S,w,E,L){this.center=i(_),this.up=i(f),this.right=i(S),this.radius=i([w]),this.angle=i([E,L]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(v,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var h=g.prototype;h.setDistanceLimits=function(v,m){v=v>0?Math.log(v):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=m},h.getDistanceLimits=function(v){var m=this.radius.bounds[0];return v?(v[0]=Math.exp(m[0][0]),v[1]=Math.exp(m[1][0]),v):[Math.exp(m[0][0]),Math.exp(m[1][0])]},h.recalcMatrix=function(v){this.center.curve(v),this.up.curve(v),this.right.curve(v),this.radius.curve(v),this.angle.curve(v);for(var m=this.computedUp,_=this.computedRight,f=0,S=0,w=0;w<3;++w)S+=m[w]*_[w],f+=m[w]*m[w];var E=Math.sqrt(f),L=0;for(w=0;w<3;++w)_[w]-=m[w]*S/f,L+=_[w]*_[w],m[w]/=E;var C=Math.sqrt(L);for(w=0;w<3;++w)_[w]/=C;var P=this.computedToward;o(P,m,_),a(P,P);var z=Math.exp(this.computedRadius[0]),G=this.computedAngle[0],O=this.computedAngle[1],H=Math.cos(G),N=Math.sin(G),B=Math.cos(O),V=Math.sin(O),q=this.computedCenter,te=H*B,K=N*B,J=V,Y=-H*V,W=-N*V,Q=B,ne=this.computedEye,re=this.computedMatrix;for(w=0;w<3;++w){var ae=te*_[w]+K*P[w]+J*m[w];re[4*w+1]=Y*_[w]+W*P[w]+Q*m[w],re[4*w+2]=ae,re[4*w+3]=0}var ue=re[1],pe=re[5],ge=re[9],_e=re[2],me=re[6],ve=re[10],Oe=pe*ve-ge*me,Me=ge*_e-ue*ve,Te=ue*me-pe*_e,se=p(Oe,Me,Te);for(Oe/=se,Me/=se,Te/=se,re[0]=Oe,re[4]=Me,re[8]=Te,w=0;w<3;++w)ne[w]=q[w]+re[2+4*w]*z;for(w=0;w<3;++w){L=0;for(var oe=0;oe<3;++oe)L+=re[w+4*oe]*ne[oe];re[12+w]=-L}re[15]=1},h.getMatrix=function(v,m){this.recalcMatrix(v);var _=this.computedMatrix;if(m){for(var f=0;f<16;++f)m[f]=_[f];return m}return _};var y=[0,0,0];h.rotate=function(v,m,_,f){if(this.angle.move(v,m,_),f){this.recalcMatrix(v);var S=this.computedMatrix;y[0]=S[2],y[1]=S[6],y[2]=S[10];for(var w=this.computedUp,E=this.computedRight,L=this.computedToward,C=0;C<3;++C)S[4*C]=w[C],S[4*C+1]=E[C],S[4*C+2]=L[C];for(n(S,S,f,y),C=0;C<3;++C)w[C]=S[4*C],E[C]=S[4*C+1];this.up.set(v,w[0],w[1],w[2]),this.right.set(v,E[0],E[1],E[2])}},h.pan=function(v,m,_,f){m=m||0,_=_||0,f=f||0,this.recalcMatrix(v);var S=this.computedMatrix,w=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],L=S[9],C=p(w,E,L);w/=C,E/=C,L/=C;var P=S[0],z=S[4],G=S[8],O=P*w+z*E+G*L,H=p(P-=w*O,z-=E*O,G-=L*O),N=(P/=H)*m+w*_,B=(z/=H)*m+E*_,V=(G/=H)*m+L*_;this.center.move(v,N,B,V);var q=Math.exp(this.computedRadius[0]);q=Math.max(1e-4,q+f),this.radius.set(v,Math.log(q))},h.translate=function(v,m,_,f){this.center.move(v,m||0,_||0,f||0)},h.setMatrix=function(v,m,_,f){var S=1;typeof _=="number"&&(S=0|_),(S<0||S>3)&&(S=1);var w=(S+2)%3;m||(this.recalcMatrix(v),m=this.computedMatrix);var E=m[S],L=m[S+4],C=m[S+8];if(f){var P=Math.abs(E),z=Math.abs(L),G=Math.abs(C),O=Math.max(P,z,G);P===O?(E=E<0?-1:1,L=C=0):G===O?(C=C<0?-1:1,E=L=0):(L=L<0?-1:1,E=C=0)}else{var H=p(E,L,C);E/=H,L/=H,C/=H}var N,B,V=m[w],q=m[w+4],te=m[w+8],K=V*E+q*L+te*C,J=p(V-=E*K,q-=L*K,te-=C*K),Y=L*(te/=J)-C*(q/=J),W=C*(V/=J)-E*te,Q=E*q-L*V,ne=p(Y,W,Q);if(Y/=ne,W/=ne,Q/=ne,this.center.jump(v,be,Ie,Fe),this.radius.idle(v),this.up.jump(v,E,L,C),this.right.jump(v,V,q,te),S===2){var re=m[1],ae=m[5],ue=m[9],pe=re*V+ae*q+ue*te,ge=re*Y+ae*W+ue*Q;N=Oe<0?-Math.PI/2:Math.PI/2,B=Math.atan2(ge,pe)}else{var _e=m[2],me=m[6],ve=m[10],Oe=_e*E+me*L+ve*C,Me=_e*V+me*q+ve*te,Te=_e*Y+me*W+ve*Q;N=Math.asin(c(Oe)),B=Math.atan2(Te,Me)}this.angle.jump(v,B,N),this.recalcMatrix(v);var se=m[2],oe=m[6],he=m[10],Ee=this.computedMatrix;r(Ee,m);var ke=Ee[15],be=Ee[12]/ke,Ie=Ee[13]/ke,Fe=Ee[14]/ke,ce=Math.exp(this.computedRadius[0]);this.center.jump(v,be-se*ce,Ie-oe*ce,Fe-he*ce)},h.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},h.idle=function(v){this.center.idle(v),this.up.idle(v),this.right.idle(v),this.radius.idle(v),this.angle.idle(v)},h.flush=function(v){this.center.flush(v),this.up.flush(v),this.right.flush(v),this.radius.flush(v),this.angle.flush(v)},h.setDistance=function(v,m){m>0&&this.radius.set(v,Math.log(m))},h.lookAt=function(v,m,_,f){this.recalcMatrix(v),m=m||this.computedEye,_=_||this.computedCenter;var S=(f=f||this.computedUp)[0],w=f[1],E=f[2],L=p(S,w,E);if(!(L<1e-6)){S/=L,w/=L,E/=L;var C=m[0]-_[0],P=m[1]-_[1],z=m[2]-_[2],G=p(C,P,z);if(!(G<1e-6)){C/=G,P/=G,z/=G;var O=this.computedRight,H=O[0],N=O[1],B=O[2],V=S*H+w*N+E*B,q=p(H-=V*S,N-=V*w,B-=V*E);if(!(q<.01&&(q=p(H=w*z-E*P,N=E*C-S*z,B=S*P-w*C))<1e-6)){H/=q,N/=q,B/=q,this.up.set(v,S,w,E),this.right.set(v,H,N,B),this.center.set(v,_[0],_[1],_[2]),this.radius.set(v,Math.log(G));var te=w*B-E*N,K=E*H-S*B,J=S*N-w*H,Y=p(te,K,J),W=S*C+w*P+E*z,Q=H*C+N*P+B*z,ne=(te/=Y)*C+(K/=Y)*P+(J/=Y)*z,re=Math.asin(c(W)),ae=Math.atan2(ne,Q),ue=this.angle._state,pe=ue[ue.length-1],ge=ue[ue.length-2];pe%=2*Math.PI;var _e=Math.abs(pe+2*Math.PI-ae),me=Math.abs(pe-ae),ve=Math.abs(pe-2*Math.PI-ae);_e<me&&(pe+=2*Math.PI),ve<me&&(pe-=2*Math.PI),this.angle.jump(this.angle.lastT(),pe,ge),this.angle.set(v,ae,re)}}}}},9660:function(d){d.exports=function(t,i,r){var n=t*i,o=s*t,a=o-(o-t),u=t-a,p=s*i,c=p-(p-i),x=i-c,g=u*x-(n-a*c-u*c-a*x);return r?(r[0]=g,r[1]=n,r):[g,n]};var s=+(Math.pow(2,27)+1)},87:function(d){d.exports=function(s,t,i){var r=s+t,n=r-s,o=t-n,a=s-(r-n);return i?(i[0]=a+o,i[1]=r,i):[a+o,r]}},5306:function(d,s,t){var i=t(2288),r=t(3094),n=t(2146).lW;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var o=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",p=t.g.__TYPEDARRAY_POOL;p.UINT8C||(p.UINT8C=r([32,0])),p.BIGUINT64||(p.BIGUINT64=r([32,0])),p.BIGINT64||(p.BIGINT64=r([32,0])),p.BUFFER||(p.BUFFER=r([32,0]));var c=p.DATA,x=p.BUFFER;function g(O){if(O){var H=O.length||O.byteLength,N=i.log2(H);c[N].push(O)}}function h(O){O=i.nextPow2(O);var H=i.log2(O),N=c[H];return N.length>0?N.pop():new ArrayBuffer(O)}function y(O){return new Uint8Array(h(O),0,O)}function v(O){return new Uint16Array(h(2*O),0,O)}function m(O){return new Uint32Array(h(4*O),0,O)}function _(O){return new Int8Array(h(O),0,O)}function f(O){return new Int16Array(h(2*O),0,O)}function S(O){return new Int32Array(h(4*O),0,O)}function w(O){return new Float32Array(h(4*O),0,O)}function E(O){return new Float64Array(h(8*O),0,O)}function L(O){return o?new Uint8ClampedArray(h(O),0,O):y(O)}function C(O){return a?new BigUint64Array(h(8*O),0,O):null}function P(O){return u?new BigInt64Array(h(8*O),0,O):null}function z(O){return new DataView(h(O),0,O)}function G(O){O=i.nextPow2(O);var H=i.log2(O),N=x[H];return N.length>0?N.pop():new n(O)}s.free=function(O){if(n.isBuffer(O))x[i.log2(O.length)].push(O);else{if(Object.prototype.toString.call(O)!=="[object ArrayBuffer]"&&(O=O.buffer),!O)return;var H=O.length||O.byteLength,N=0|i.log2(H);c[N].push(O)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(O){g(O.buffer)},s.freeArrayBuffer=g,s.freeBuffer=function(O){x[i.log2(O.length)].push(O)},s.malloc=function(O,H){if(H===void 0||H==="arraybuffer")return h(O);switch(H){case"uint8":return y(O);case"uint16":return v(O);case"uint32":return m(O);case"int8":return _(O);case"int16":return f(O);case"int32":return S(O);case"float":case"float32":return w(O);case"double":case"float64":return E(O);case"uint8_clamped":return L(O);case"bigint64":return P(O);case"biguint64":return C(O);case"buffer":return G(O);case"data":case"dataview":return z(O);default:return null}return null},s.mallocArrayBuffer=h,s.mallocUint8=y,s.mallocUint16=v,s.mallocUint32=m,s.mallocInt8=_,s.mallocInt16=f,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=w,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=L,s.mallocBigUint64=C,s.mallocBigInt64=P,s.mallocDataView=z,s.mallocBuffer=G,s.clearCache=function(){for(var O=0;O<32;++O)p.UINT8[O].length=0,p.UINT16[O].length=0,p.UINT32[O].length=0,p.INT8[O].length=0,p.INT16[O].length=0,p.INT32[O].length=0,p.FLOAT[O].length=0,p.DOUBLE[O].length=0,p.BIGUINT64[O].length=0,p.BIGINT64[O].length=0,p.UINT8C[O].length=0,c[O].length=0,x[O].length=0}},1731:function(d){function s(i){this.roots=new Array(i),this.ranks=new Array(i);for(var r=0;r<i;++r)this.roots[r]=r,this.ranks[r]=0}d.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var r=i,n=this.roots;n[i]!==i;)i=n[i];for(;n[r]!==i;){var o=n[r];n[r]=i,r=o}return i},t.link=function(i,r){var n=this.find(i),o=this.find(r);if(n!==o){var a=this.ranks,u=this.roots,p=a[n],c=a[o];p<c?u[n]=o:c<p?u[o]=n:(u[o]=n,++a[n])}}},1215:function(d){d.exports=function(s,t,i){return s.length===0?s:t?(i||s.sort(t),function(r,n){for(var o=1,a=r.length,u=r[0],p=r[0],c=1;c<a;++c)if(p=u,n(u=r[c],p)){if(c===o){o++;continue}r[o++]=u}return r.length=o,r}(s,t)):(i||s.sort(),function(r){for(var n=1,o=r.length,a=r[0],u=r[0],p=1;p<o;++p,u=a)if(u=a,(a=r[p])!==u){if(p===n){n++;continue}r[n++]=a}return r.length=n,r}(s))}},875:function(d,s,t){d.exports=function(o,a){return typeof a=="object"&&a!==null||(a={}),i(o,a.canvas||r,a.context||n,a)};var i=t(712),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},712:function(d,s,t){d.exports=function(C,P,z,G){var O=64,H=1.25,N={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return G&&(G.size&&G.size>0&&(O=G.size),G.lineSpacing&&G.lineSpacing>0&&(H=G.lineSpacing),G.styletags&&G.styletags.breaklines&&(N.breaklines=!!G.styletags.breaklines),G.styletags&&G.styletags.bolds&&(N.bolds=!!G.styletags.bolds),G.styletags&&G.styletags.italics&&(N.italics=!!G.styletags.italics),G.styletags&&G.styletags.subscripts&&(N.subscripts=!!G.styletags.subscripts),G.styletags&&G.styletags.superscripts&&(N.superscripts=!!G.styletags.superscripts)),z.font=[G.fontStyle,G.fontVariant,G.fontWeight,O+"px",G.font].filter(function(B){return B}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr",L(function(B,V,q,te,K,J){q=q.replace(/\n/g,""),q=J.breaklines===!0?q.replace(/\<br\>/g,`
`):q.replace(/\<br\>/g," ");var Y="",W=[];for(ae=0;ae<q.length;++ae)W[ae]=Y;J.bolds===!0&&(W=S(p,c,q,W)),J.italics===!0&&(W=S(x,g,q,W)),J.superscripts===!0&&(W=S(h,v,q,W)),J.subscripts===!0&&(W=S(m,f,q,W));var Q=[],ne="";for(ae=0;ae<q.length;++ae)W[ae]!==null&&(ne+=q[ae],Q.push(W[ae]));var re,ae,ue,pe,ge,_e=ne.split(`
`),me=_e.length,ve=Math.round(K*te),Oe=te,Me=2*te,Te=0,se=me*ve+Me;B.height<se&&(B.height=se),V.fillStyle="#000",V.fillRect(0,0,B.width,B.height),V.fillStyle="#fff";var oe=0,he="";function Ee(){if(he!==""){var Ce=V.measureText(he).width;V.fillText(he,Oe+ue,Me+pe),ue+=Ce}}function ke(){return Math.round(ge)+"px "}function be(Ce,Re){var ze=""+V.font;if(J.subscripts===!0){var He=Ce.indexOf(_),Ge=Re.indexOf(_),Je=He>-1?parseInt(Ce[1+He]):0,ot=Ge>-1?parseInt(Re[1+Ge]):0;Je!==ot&&(ze=ze.replace(ke(),"?px "),ge*=Math.pow(.75,ot-Je),ze=ze.replace("?px ",ke())),pe+=.25*ve*(ot-Je)}if(J.superscripts===!0){var Qe=Ce.indexOf(y),vt=Re.indexOf(y),xt=Qe>-1?parseInt(Ce[1+Qe]):0,mt=vt>-1?parseInt(Re[1+vt]):0;xt!==mt&&(ze=ze.replace(ke(),"?px "),ge*=Math.pow(.75,mt-xt),ze=ze.replace("?px ",ke())),pe-=.25*ve*(mt-xt)}if(J.bolds===!0){var rt=Ce.indexOf(c)>-1,it=Re.indexOf(c)>-1;!rt&&it&&(ze=Tt?ze.replace("italic ","italic bold "):"bold "+ze),rt&&!it&&(ze=ze.replace("bold ",""))}if(J.italics===!0){var Tt=Ce.indexOf(g)>-1,Mt=Re.indexOf(g)>-1;!Tt&&Mt&&(ze="italic "+ze),Tt&&!Mt&&(ze=ze.replace("italic ",""))}V.font=ze}for(re=0;re<me;++re){var Ie=_e[re]+`
`;for(ue=0,pe=re*ve,ge=te,he="",ae=0;ae<Ie.length;++ae){var Fe=ae+oe<Q.length?Q[ae+oe]:Q[Q.length-1];Y===Fe?he+=Ie[ae]:(Ee(),he=Ie[ae],Fe!==void 0&&(be(Y,Fe),Y=Fe))}Ee(),oe+=Ie.length;var ce=0|Math.round(ue+2*Oe);Te<ce&&(Te=ce)}var we=Te,ye=Me+ve*me;return r(V.getImageData(0,0,we,ye).data,[ye,we,4]).pick(-1,-1,0).transpose(1,0)}(P,z,C,O,H,N),G,O)},d.exports.processPixels=L;var i=t(4162),r=t(5050),n=t(8243),o=t(197),a=t(7761),u=t(8040),p="b",c="b|",x="i",g="i|",h="sup",y="+",v="+1",m="sub",_="-",f="-1";function S(C,P,z,G){for(var O="<"+C+">",H="</"+C+">",N=O.length,B=H.length,V=P[0]===y||P[0]===_,q=0,te=-B;q>-1&&(q=z.indexOf(O,q))!==-1&&(te=z.indexOf(H,q+N))!==-1&&!(te<=q);){for(var K=q;K<te+B;++K)if(K<q+N||K>=te)G[K]=null,z=z.substr(0,K)+" "+z.substr(K+1);else if(G[K]!==null){var J=G[K].indexOf(P[0]);J===-1?G[K]+=P:V&&(G[K]=G[K].substr(0,J+1)+(1+parseInt(G[K][J+1]))+G[K].substr(J+2))}var Y=q+N,W=z.substr(Y,te-Y).indexOf(O);q=W!==-1?W:te+B}return G}function w(C,P){var z=i(C,128);return P?n(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function E(C,P,z,G){var O=w(C,G),H=function(re,ae,ue){for(var pe=ae.textAlign||"start",ge=ae.textBaseline||"alphabetic",_e=[1<<30,1<<30],me=[0,0],ve=re.length,Oe=0;Oe<ve;++Oe)for(var Me=re[Oe],Te=0;Te<2;++Te)_e[Te]=0|Math.min(_e[Te],Me[Te]),me[Te]=0|Math.max(me[Te],Me[Te]);var se=0;switch(pe){case"center":se=-.5*(_e[0]+me[0]);break;case"right":case"end":se=-me[0];break;case"left":case"start":se=-_e[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+pe+"'")}var oe=0;switch(ge){case"hanging":case"top":oe=-_e[1];break;case"middle":oe=-.5*(_e[1]+me[1]);break;case"alphabetic":case"ideographic":oe=-3*ue;break;case"bottom":oe=-me[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+ge+"'")}var he=1/ue;return"lineHeight"in ae?he*=+ae.lineHeight:"width"in ae?he=ae.width/(me[0]-_e[0]):"height"in ae&&(he=ae.height/(me[1]-_e[1])),re.map(function(Ee){return[he*(Ee[0]+se),he*(Ee[1]+oe)]})}(O.positions,P,z),N=O.edges,B=P.orientation==="ccw";if(o(H,N),P.polygons||P.polygon||P.polyline){for(var V=u(N,H),q=new Array(V.length),te=0;te<V.length;++te){for(var K=V[te],J=new Array(K.length),Y=0;Y<K.length;++Y){for(var W=K[Y],Q=new Array(W.length),ne=0;ne<W.length;++ne)Q[ne]=H[W[ne]].slice();B&&Q.reverse(),J[Y]=Q}q[te]=J}return q}return P.triangles||P.triangulate||P.triangle?{cells:a(H,N,{delaunay:!1,exterior:!1,interior:!0}),positions:H}:{edges:N,positions:H}}function L(C,P,z){try{return E(C,P,z,!0)}catch{}try{return E(C,P,z,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(d){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new t,r=Object.freeze({});if(i.set(r,1),i.get(r)===1)return void(d.exports=WeakMap);s=!0}}var n=Object.getOwnPropertyNames,o=Object.defineProperty,a=Object.isExtensible,u="weakmap:",p=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),x=new Uint8Array(c);crypto.getRandomValues(x),p=u+"rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(_)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(E){return g(E).filter(_)}})}(function(){var E=Object.freeze;o(Object,"freeze",{value:function(P){return f(P),E(P)}});var L=Object.seal;o(Object,"seal",{value:function(P){return f(P),L(P)}});var C=Object.preventExtensions;o(Object,"preventExtensions",{value:function(P){return f(P),C(P)}})})();var h=!1,y=0,v=function(){this instanceof v||w();var E=[],L=[],C=y++;return Object.create(v.prototype,{get___:{value:S(function(P,z){var G,O=f(P);return O?C in O?O[C]:z:(G=E.indexOf(P))>=0?L[G]:z})},has___:{value:S(function(P){var z=f(P);return z?C in z:E.indexOf(P)>=0})},set___:{value:S(function(P,z){var G,O=f(P);return O?O[C]=z:(G=E.indexOf(P))>=0?L[G]=z:(G=E.length,L[G]=z,E[G]=P),this})},delete___:{value:S(function(P){var z,G,O=f(P);return O?C in O&&delete O[C]:!((z=E.indexOf(P))<0||(G=E.length-1,E[z]=void 0,L[z]=L[G],E[z]=E[G],E.length=G,L.length=G,0))})}})};v.prototype=Object.create(Object.prototype,{get:{value:function(E,L){return this.get___(E,L)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,L){return this.set___(E,L)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof v||w();var L,C=new t,P=void 0,z=!1;return L=s?function(G,O){return C.set(G,O),C.has(G)||(P||(P=new v),P.set(G,O)),this}:function(G,O){if(z)try{C.set(G,O)}catch{P||(P=new v),P.set___(G,O)}else C.set(G,O);return this},Object.create(v.prototype,{get___:{value:S(function(G,O){return P?C.has(G)?C.get(G):P.get___(G,O):C.get(G,O)})},has___:{value:S(function(G){return C.has(G)||!!P&&P.has___(G)})},set___:{value:S(L)},delete___:{value:S(function(G){var O=!!C.delete(G);return P&&P.delete___(G)||O})},permitHostObjects___:{value:S(function(G){if(G!==m)throw new Error("bogus call to permitHostObjects___");z=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=v.prototype,d.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),d.exports=v)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function _(E){return!(E.substr(0,8)==u&&E.substr(E.length-3)==="___")}function f(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var L=E[p];if(L&&L.key===E)return L;if(a(E)){L={key:E};try{return o(E,p,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function w(){h||typeof console>"u"||(h=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(d,s,t){var i=t(7178);d.exports=function(){var r={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var o=n.valueOf(r);return o&&o.identity===r?o:i(n,r)}}},7178:function(d){d.exports=function(s,t){var i={identity:t},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(n){return n!==t?r.apply(this,arguments):i},writable:!0}),i}},4037:function(d,s,t){var i=t(9222);d.exports=function(){var r=i();return{get:function(n,o){var a=r(n);return a.hasOwnProperty("value")?a.value:o},set:function(n,o){return r(n).value=o,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},6183:function(d){d.exports=function(s){var t={};return function(i,r,n){var o=i.dtype,a=i.order,u=[o,a.join()].join(),p=t[u];return p||(t[u]=p=s([o,a])),p(i.shape.slice(0),i.data,i.stride,0|i.offset,r,n)}}((function(){return function(s,t,i,r,n,o){var a=s[0],u=i[0],p=[0],c=u;r|=0;var x=0,g=u;for(x=0;x<a;++x){var h=t[r]-o,y=t[r+c]-o;h>=0!=y>=0&&n.push(p[0]+.5+.5*(h+y)/(h-y)),r+=g,++p[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},9584:function(d,s,t){d.exports=function(r,n){var o=[];return n=+n||0,i(r.hi(r.shape[0]-1),o,n),o};var i=t(6183)},6601:function(){}},T={};function b(d){var s=T[d];if(s!==void 0)return s.exports;var t=T[d]={id:d,loaded:!1,exports:{}};return l[d].call(t.exports,t,t.exports,b),t.loaded=!0,t.exports}return b.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),b.nmd=function(d){return d.paths=[],d.children||(d.children=[]),d},b(7386)}()},ee.exports=M()},12856:function(ee,D,e){function M(se,oe){for(var he=0;he<oe.length;he++){var Ee=oe[he];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(se,(ke=function(be,Ie){if(b(be)!=="object"||be===null)return be;var Fe=be[Symbol.toPrimitive];if(Fe!==void 0){var ce=Fe.call(be,"string");if(b(ce)!=="object")return ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(be)}(Ee.key),b(ke)==="symbol"?ke:String(ke)),Ee)}var ke}function k(se,oe){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,Ee){return he.__proto__=Ee,he},k(se,oe)}function l(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function T(se){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},T(se)}function b(se){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},b(se)}var d=e(95341),s=e(95280),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;D.Buffer=n,D.SlowBuffer=function(se){return+se!=se&&(se=0),n.alloc(+se)},D.INSPECT_MAX_BYTES=50;var i=2147483647;function r(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');var oe=new Uint8Array(se);return Object.setPrototypeOf(oe,n.prototype),oe}function n(se,oe,he){if(typeof se=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(se)}return o(se,oe,he)}function o(se,oe,he){if(typeof se=="string")return function(be,Ie){if(typeof Ie=="string"&&Ie!==""||(Ie="utf8"),!n.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);var Fe=0|g(be,Ie),ce=r(Fe),we=ce.write(be,Ie);return we!==Fe&&(ce=ce.slice(0,we)),ce}(se,oe);if(ArrayBuffer.isView(se))return function(be){if(me(be,Uint8Array)){var Ie=new Uint8Array(be);return c(Ie.buffer,Ie.byteOffset,Ie.byteLength)}return p(be)}(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(se));if(me(se,ArrayBuffer)||se&&me(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(se,SharedArrayBuffer)||se&&me(se.buffer,SharedArrayBuffer)))return c(se,oe,he);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ee=se.valueOf&&se.valueOf();if(Ee!=null&&Ee!==se)return n.from(Ee,oe,he);var ke=function(be){if(n.isBuffer(be)){var Ie=0|x(be.length),Fe=r(Ie);return Fe.length===0||be.copy(Fe,0,0,Ie),Fe}return be.length!==void 0?typeof be.length!="number"||ve(be.length)?r(0):p(be):be.type==="Buffer"&&Array.isArray(be.data)?p(be.data):void 0}(se);if(ke)return ke;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return n.from(se[Symbol.toPrimitive]("string"),oe,he);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(se))}function a(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function u(se){return a(se),r(se<0?0:0|x(se))}function p(se){for(var oe=se.length<0?0:0|x(se.length),he=r(oe),Ee=0;Ee<oe;Ee+=1)he[Ee]=255&se[Ee];return he}function c(se,oe,he){if(oe<0||se.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<oe+(he||0))throw new RangeError('"length" is outside of buffer bounds');var Ee;return Ee=oe===void 0&&he===void 0?new Uint8Array(se):he===void 0?new Uint8Array(se,oe):new Uint8Array(se,oe,he),Object.setPrototypeOf(Ee,n.prototype),Ee}function x(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|se}function g(se,oe){if(n.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||me(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+b(se));var he=se.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&he===0)return 0;for(var ke=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return he;case"utf8":case"utf-8":return pe(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*he;case"hex":return he>>>1;case"base64":return ge(se).length;default:if(ke)return Ee?-1:pe(se).length;oe=(""+oe).toLowerCase(),ke=!0}}function h(se,oe,he){var Ee=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((he===void 0||he>this.length)&&(he=this.length),he<=0)||(he>>>=0)<=(oe>>>=0))return"";for(se||(se="utf8");;)switch(se){case"hex":return O(this,oe,he);case"utf8":case"utf-8":return C(this,oe,he);case"ascii":return z(this,oe,he);case"latin1":case"binary":return G(this,oe,he);case"base64":return L(this,oe,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,oe,he);default:if(Ee)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),Ee=!0}}function y(se,oe,he){var Ee=se[oe];se[oe]=se[he],se[he]=Ee}function v(se,oe,he,Ee,ke){if(se.length===0)return-1;if(typeof he=="string"?(Ee=he,he=0):he>2147483647?he=2147483647:he<-2147483648&&(he=-2147483648),ve(he=+he)&&(he=ke?0:se.length-1),he<0&&(he=se.length+he),he>=se.length){if(ke)return-1;he=se.length-1}else if(he<0){if(!ke)return-1;he=0}if(typeof oe=="string"&&(oe=n.from(oe,Ee)),n.isBuffer(oe))return oe.length===0?-1:m(se,oe,he,Ee,ke);if(typeof oe=="number")return oe&=255,typeof Uint8Array.prototype.indexOf=="function"?ke?Uint8Array.prototype.indexOf.call(se,oe,he):Uint8Array.prototype.lastIndexOf.call(se,oe,he):m(se,[oe],he,Ee,ke);throw new TypeError("val must be string, number or Buffer")}function m(se,oe,he,Ee,ke){var be,Ie=1,Fe=se.length,ce=oe.length;if(Ee!==void 0&&((Ee=String(Ee).toLowerCase())==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(se.length<2||oe.length<2)return-1;Ie=2,Fe/=2,ce/=2,he/=2}function we(ze,He){return Ie===1?ze[He]:ze.readUInt16BE(He*Ie)}if(ke){var ye=-1;for(be=he;be<Fe;be++)if(we(se,be)===we(oe,ye===-1?0:be-ye)){if(ye===-1&&(ye=be),be-ye+1===ce)return ye*Ie}else ye!==-1&&(be-=be-ye),ye=-1}else for(he+ce>Fe&&(he=Fe-ce),be=he;be>=0;be--){for(var Ce=!0,Re=0;Re<ce;Re++)if(we(se,be+Re)!==we(oe,Re)){Ce=!1;break}if(Ce)return be}return-1}function _(se,oe,he,Ee){he=Number(he)||0;var ke=se.length-he;Ee?(Ee=Number(Ee))>ke&&(Ee=ke):Ee=ke;var be,Ie=oe.length;for(Ee>Ie/2&&(Ee=Ie/2),be=0;be<Ee;++be){var Fe=parseInt(oe.substr(2*be,2),16);if(ve(Fe))return be;se[he+be]=Fe}return be}function f(se,oe,he,Ee){return _e(pe(oe,se.length-he),se,he,Ee)}function S(se,oe,he,Ee){return _e(function(ke){for(var be=[],Ie=0;Ie<ke.length;++Ie)be.push(255&ke.charCodeAt(Ie));return be}(oe),se,he,Ee)}function w(se,oe,he,Ee){return _e(ge(oe),se,he,Ee)}function E(se,oe,he,Ee){return _e(function(ke,be){for(var Ie,Fe,ce,we=[],ye=0;ye<ke.length&&!((be-=2)<0);++ye)Fe=(Ie=ke.charCodeAt(ye))>>8,ce=Ie%256,we.push(ce),we.push(Fe);return we}(oe,se.length-he),se,he,Ee)}function L(se,oe,he){return oe===0&&he===se.length?d.fromByteArray(se):d.fromByteArray(se.slice(oe,he))}function C(se,oe,he){he=Math.min(se.length,he);for(var Ee=[],ke=oe;ke<he;){var be=se[ke],Ie=null,Fe=be>239?4:be>223?3:be>191?2:1;if(ke+Fe<=he){var ce=void 0,we=void 0,ye=void 0,Ce=void 0;switch(Fe){case 1:be<128&&(Ie=be);break;case 2:(192&(ce=se[ke+1]))==128&&(Ce=(31&be)<<6|63&ce)>127&&(Ie=Ce);break;case 3:ce=se[ke+1],we=se[ke+2],(192&ce)==128&&(192&we)==128&&(Ce=(15&be)<<12|(63&ce)<<6|63&we)>2047&&(Ce<55296||Ce>57343)&&(Ie=Ce);break;case 4:ce=se[ke+1],we=se[ke+2],ye=se[ke+3],(192&ce)==128&&(192&we)==128&&(192&ye)==128&&(Ce=(15&be)<<18|(63&ce)<<12|(63&we)<<6|63&ye)>65535&&Ce<1114112&&(Ie=Ce)}}Ie===null?(Ie=65533,Fe=1):Ie>65535&&(Ie-=65536,Ee.push(Ie>>>10&1023|55296),Ie=56320|1023&Ie),Ee.push(Ie),ke+=Fe}return function(Re){var ze=Re.length;if(ze<=P)return String.fromCharCode.apply(String,Re);for(var He="",Ge=0;Ge<ze;)He+=String.fromCharCode.apply(String,Re.slice(Ge,Ge+=P));return He}(Ee)}D.kMaxLength=i,n.TYPED_ARRAY_SUPPORT=function(){try{var se=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf(se,oe),se.foo()===42}catch{return!1}}(),n.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(se,oe,he){return o(se,oe,he)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(se,oe,he){return function(Ee,ke,be){return a(Ee),Ee<=0?r(Ee):ke!==void 0?typeof be=="string"?r(Ee).fill(ke,be):r(Ee).fill(ke):r(Ee)}(se,oe,he)},n.allocUnsafe=function(se){return u(se)},n.allocUnsafeSlow=function(se){return u(se)},n.isBuffer=function(se){return se!=null&&se._isBuffer===!0&&se!==n.prototype},n.compare=function(se,oe){if(me(se,Uint8Array)&&(se=n.from(se,se.offset,se.byteLength)),me(oe,Uint8Array)&&(oe=n.from(oe,oe.offset,oe.byteLength)),!n.isBuffer(se)||!n.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(se===oe)return 0;for(var he=se.length,Ee=oe.length,ke=0,be=Math.min(he,Ee);ke<be;++ke)if(se[ke]!==oe[ke]){he=se[ke],Ee=oe[ke];break}return he<Ee?-1:Ee<he?1:0},n.isEncoding=function(se){switch(String(se).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(se,oe){if(!Array.isArray(se))throw new TypeError('"list" argument must be an Array of Buffers');if(se.length===0)return n.alloc(0);var he;if(oe===void 0)for(oe=0,he=0;he<se.length;++he)oe+=se[he].length;var Ee=n.allocUnsafe(oe),ke=0;for(he=0;he<se.length;++he){var be=se[he];if(me(be,Uint8Array))ke+be.length>Ee.length?(n.isBuffer(be)||(be=n.from(be)),be.copy(Ee,ke)):Uint8Array.prototype.set.call(Ee,be,ke);else{if(!n.isBuffer(be))throw new TypeError('"list" argument must be an Array of Buffers');be.copy(Ee,ke)}ke+=be.length}return Ee},n.byteLength=g,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var se=this.length;if(se%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<se;oe+=2)y(this,oe,oe+1);return this},n.prototype.swap32=function(){var se=this.length;if(se%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<se;oe+=4)y(this,oe,oe+3),y(this,oe+1,oe+2);return this},n.prototype.swap64=function(){var se=this.length;if(se%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<se;oe+=8)y(this,oe,oe+7),y(this,oe+1,oe+6),y(this,oe+2,oe+5),y(this,oe+3,oe+4);return this},n.prototype.toString=function(){var se=this.length;return se===0?"":arguments.length===0?C(this,0,se):h.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(se){if(!n.isBuffer(se))throw new TypeError("Argument must be a Buffer");return this===se||n.compare(this,se)===0},n.prototype.inspect=function(){var se="",oe=D.INSPECT_MAX_BYTES;return se=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&(se+=" ... "),"<Buffer "+se+">"},t&&(n.prototype[t]=n.prototype.inspect),n.prototype.compare=function(se,oe,he,Ee,ke){if(me(se,Uint8Array)&&(se=n.from(se,se.offset,se.byteLength)),!n.isBuffer(se))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+b(se));if(oe===void 0&&(oe=0),he===void 0&&(he=se?se.length:0),Ee===void 0&&(Ee=0),ke===void 0&&(ke=this.length),oe<0||he>se.length||Ee<0||ke>this.length)throw new RangeError("out of range index");if(Ee>=ke&&oe>=he)return 0;if(Ee>=ke)return-1;if(oe>=he)return 1;if(this===se)return 0;for(var be=(ke>>>=0)-(Ee>>>=0),Ie=(he>>>=0)-(oe>>>=0),Fe=Math.min(be,Ie),ce=this.slice(Ee,ke),we=se.slice(oe,he),ye=0;ye<Fe;++ye)if(ce[ye]!==we[ye]){be=ce[ye],Ie=we[ye];break}return be<Ie?-1:Ie<be?1:0},n.prototype.includes=function(se,oe,he){return this.indexOf(se,oe,he)!==-1},n.prototype.indexOf=function(se,oe,he){return v(this,se,oe,he,!0)},n.prototype.lastIndexOf=function(se,oe,he){return v(this,se,oe,he,!1)},n.prototype.write=function(se,oe,he,Ee){if(oe===void 0)Ee="utf8",he=this.length,oe=0;else if(he===void 0&&typeof oe=="string")Ee=oe,he=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe>>>=0,isFinite(he)?(he>>>=0,Ee===void 0&&(Ee="utf8")):(Ee=he,he=void 0)}var ke=this.length-oe;if((he===void 0||he>ke)&&(he=ke),se.length>0&&(he<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ee||(Ee="utf8");for(var be=!1;;)switch(Ee){case"hex":return _(this,se,oe,he);case"utf8":case"utf-8":return f(this,se,oe,he);case"ascii":case"latin1":case"binary":return S(this,se,oe,he);case"base64":return w(this,se,oe,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,se,oe,he);default:if(be)throw new TypeError("Unknown encoding: "+Ee);Ee=(""+Ee).toLowerCase(),be=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function z(se,oe,he){var Ee="";he=Math.min(se.length,he);for(var ke=oe;ke<he;++ke)Ee+=String.fromCharCode(127&se[ke]);return Ee}function G(se,oe,he){var Ee="";he=Math.min(se.length,he);for(var ke=oe;ke<he;++ke)Ee+=String.fromCharCode(se[ke]);return Ee}function O(se,oe,he){var Ee=se.length;(!oe||oe<0)&&(oe=0),(!he||he<0||he>Ee)&&(he=Ee);for(var ke="",be=oe;be<he;++be)ke+=Oe[se[be]];return ke}function H(se,oe,he){for(var Ee=se.slice(oe,he),ke="",be=0;be<Ee.length-1;be+=2)ke+=String.fromCharCode(Ee[be]+256*Ee[be+1]);return ke}function N(se,oe,he){if(se%1!=0||se<0)throw new RangeError("offset is not uint");if(se+oe>he)throw new RangeError("Trying to access beyond buffer length")}function B(se,oe,he,Ee,ke,be){if(!n.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>ke||oe<be)throw new RangeError('"value" argument is out of bounds');if(he+Ee>se.length)throw new RangeError("Index out of range")}function V(se,oe,he,Ee,ke){ne(oe,Ee,ke,se,he,7);var be=Number(oe&BigInt(4294967295));se[he++]=be,be>>=8,se[he++]=be,be>>=8,se[he++]=be,be>>=8,se[he++]=be;var Ie=Number(oe>>BigInt(32)&BigInt(4294967295));return se[he++]=Ie,Ie>>=8,se[he++]=Ie,Ie>>=8,se[he++]=Ie,Ie>>=8,se[he++]=Ie,he}function q(se,oe,he,Ee,ke){ne(oe,Ee,ke,se,he,7);var be=Number(oe&BigInt(4294967295));se[he+7]=be,be>>=8,se[he+6]=be,be>>=8,se[he+5]=be,be>>=8,se[he+4]=be;var Ie=Number(oe>>BigInt(32)&BigInt(4294967295));return se[he+3]=Ie,Ie>>=8,se[he+2]=Ie,Ie>>=8,se[he+1]=Ie,Ie>>=8,se[he]=Ie,he+8}function te(se,oe,he,Ee,ke,be){if(he+Ee>se.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("Index out of range")}function K(se,oe,he,Ee,ke){return oe=+oe,he>>>=0,ke||te(se,0,he,4),s.write(se,oe,he,Ee,23,4),he+4}function J(se,oe,he,Ee,ke){return oe=+oe,he>>>=0,ke||te(se,0,he,8),s.write(se,oe,he,Ee,52,8),he+8}n.prototype.slice=function(se,oe){var he=this.length;(se=~~se)<0?(se+=he)<0&&(se=0):se>he&&(se=he),(oe=oe===void 0?he:~~oe)<0?(oe+=he)<0&&(oe=0):oe>he&&(oe=he),oe<se&&(oe=se);var Ee=this.subarray(se,oe);return Object.setPrototypeOf(Ee,n.prototype),Ee},n.prototype.readUintLE=n.prototype.readUIntLE=function(se,oe,he){se>>>=0,oe>>>=0,he||N(se,oe,this.length);for(var Ee=this[se],ke=1,be=0;++be<oe&&(ke*=256);)Ee+=this[se+be]*ke;return Ee},n.prototype.readUintBE=n.prototype.readUIntBE=function(se,oe,he){se>>>=0,oe>>>=0,he||N(se,oe,this.length);for(var Ee=this[se+--oe],ke=1;oe>0&&(ke*=256);)Ee+=this[se+--oe]*ke;return Ee},n.prototype.readUint8=n.prototype.readUInt8=function(se,oe){return se>>>=0,oe||N(se,1,this.length),this[se]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(se,oe){return se>>>=0,oe||N(se,2,this.length),this[se]|this[se+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(se,oe){return se>>>=0,oe||N(se,2,this.length),this[se]<<8|this[se+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),(this[se]|this[se+1]<<8|this[se+2]<<16)+16777216*this[se+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),16777216*this[se]+(this[se+1]<<16|this[se+2]<<8|this[se+3])},n.prototype.readBigUInt64LE=Me(function(se){re(se>>>=0,"offset");var oe=this[se],he=this[se+7];oe!==void 0&&he!==void 0||ae(se,this.length-8);var Ee=oe+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,24),ke=this[++se]+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+he*Math.pow(2,24);return BigInt(Ee)+(BigInt(ke)<<BigInt(32))}),n.prototype.readBigUInt64BE=Me(function(se){re(se>>>=0,"offset");var oe=this[se],he=this[se+7];oe!==void 0&&he!==void 0||ae(se,this.length-8);var Ee=oe*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+this[++se],ke=this[++se]*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+he;return(BigInt(Ee)<<BigInt(32))+BigInt(ke)}),n.prototype.readIntLE=function(se,oe,he){se>>>=0,oe>>>=0,he||N(se,oe,this.length);for(var Ee=this[se],ke=1,be=0;++be<oe&&(ke*=256);)Ee+=this[se+be]*ke;return Ee>=(ke*=128)&&(Ee-=Math.pow(2,8*oe)),Ee},n.prototype.readIntBE=function(se,oe,he){se>>>=0,oe>>>=0,he||N(se,oe,this.length);for(var Ee=oe,ke=1,be=this[se+--Ee];Ee>0&&(ke*=256);)be+=this[se+--Ee]*ke;return be>=(ke*=128)&&(be-=Math.pow(2,8*oe)),be},n.prototype.readInt8=function(se,oe){return se>>>=0,oe||N(se,1,this.length),128&this[se]?-1*(255-this[se]+1):this[se]},n.prototype.readInt16LE=function(se,oe){se>>>=0,oe||N(se,2,this.length);var he=this[se]|this[se+1]<<8;return 32768&he?4294901760|he:he},n.prototype.readInt16BE=function(se,oe){se>>>=0,oe||N(se,2,this.length);var he=this[se+1]|this[se]<<8;return 32768&he?4294901760|he:he},n.prototype.readInt32LE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),this[se]|this[se+1]<<8|this[se+2]<<16|this[se+3]<<24},n.prototype.readInt32BE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),this[se]<<24|this[se+1]<<16|this[se+2]<<8|this[se+3]},n.prototype.readBigInt64LE=Me(function(se){re(se>>>=0,"offset");var oe=this[se],he=this[se+7];oe!==void 0&&he!==void 0||ae(se,this.length-8);var Ee=this[se+4]+this[se+5]*Math.pow(2,8)+this[se+6]*Math.pow(2,16)+(he<<24);return(BigInt(Ee)<<BigInt(32))+BigInt(oe+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,24))}),n.prototype.readBigInt64BE=Me(function(se){re(se>>>=0,"offset");var oe=this[se],he=this[se+7];oe!==void 0&&he!==void 0||ae(se,this.length-8);var Ee=(oe<<24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+this[++se];return(BigInt(Ee)<<BigInt(32))+BigInt(this[++se]*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+he)}),n.prototype.readFloatLE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),s.read(this,se,!0,23,4)},n.prototype.readFloatBE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),s.read(this,se,!1,23,4)},n.prototype.readDoubleLE=function(se,oe){return se>>>=0,oe||N(se,8,this.length),s.read(this,se,!0,52,8)},n.prototype.readDoubleBE=function(se,oe){return se>>>=0,oe||N(se,8,this.length),s.read(this,se,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(se,oe,he,Ee){se=+se,oe>>>=0,he>>>=0,Ee||B(this,se,oe,he,Math.pow(2,8*he)-1,0);var ke=1,be=0;for(this[oe]=255&se;++be<he&&(ke*=256);)this[oe+be]=se/ke&255;return oe+he},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(se,oe,he,Ee){se=+se,oe>>>=0,he>>>=0,Ee||B(this,se,oe,he,Math.pow(2,8*he)-1,0);var ke=he-1,be=1;for(this[oe+ke]=255&se;--ke>=0&&(be*=256);)this[oe+ke]=se/be&255;return oe+he},n.prototype.writeUint8=n.prototype.writeUInt8=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,1,255,0),this[oe]=255&se,oe+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,2,65535,0),this[oe]=255&se,this[oe+1]=se>>>8,oe+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,2,65535,0),this[oe]=se>>>8,this[oe+1]=255&se,oe+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,4,4294967295,0),this[oe+3]=se>>>24,this[oe+2]=se>>>16,this[oe+1]=se>>>8,this[oe]=255&se,oe+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,4,4294967295,0),this[oe]=se>>>24,this[oe+1]=se>>>16,this[oe+2]=se>>>8,this[oe+3]=255&se,oe+4},n.prototype.writeBigUInt64LE=Me(function(se){return V(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=Me(function(se){return q(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(se,oe,he,Ee){if(se=+se,oe>>>=0,!Ee){var ke=Math.pow(2,8*he-1);B(this,se,oe,he,ke-1,-ke)}var be=0,Ie=1,Fe=0;for(this[oe]=255&se;++be<he&&(Ie*=256);)se<0&&Fe===0&&this[oe+be-1]!==0&&(Fe=1),this[oe+be]=(se/Ie>>0)-Fe&255;return oe+he},n.prototype.writeIntBE=function(se,oe,he,Ee){if(se=+se,oe>>>=0,!Ee){var ke=Math.pow(2,8*he-1);B(this,se,oe,he,ke-1,-ke)}var be=he-1,Ie=1,Fe=0;for(this[oe+be]=255&se;--be>=0&&(Ie*=256);)se<0&&Fe===0&&this[oe+be+1]!==0&&(Fe=1),this[oe+be]=(se/Ie>>0)-Fe&255;return oe+he},n.prototype.writeInt8=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,1,127,-128),se<0&&(se=255+se+1),this[oe]=255&se,oe+1},n.prototype.writeInt16LE=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,2,32767,-32768),this[oe]=255&se,this[oe+1]=se>>>8,oe+2},n.prototype.writeInt16BE=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,2,32767,-32768),this[oe]=se>>>8,this[oe+1]=255&se,oe+2},n.prototype.writeInt32LE=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,4,2147483647,-2147483648),this[oe]=255&se,this[oe+1]=se>>>8,this[oe+2]=se>>>16,this[oe+3]=se>>>24,oe+4},n.prototype.writeInt32BE=function(se,oe,he){return se=+se,oe>>>=0,he||B(this,se,oe,4,2147483647,-2147483648),se<0&&(se=4294967295+se+1),this[oe]=se>>>24,this[oe+1]=se>>>16,this[oe+2]=se>>>8,this[oe+3]=255&se,oe+4},n.prototype.writeBigInt64LE=Me(function(se){return V(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=Me(function(se){return q(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(se,oe,he){return K(this,se,oe,!0,he)},n.prototype.writeFloatBE=function(se,oe,he){return K(this,se,oe,!1,he)},n.prototype.writeDoubleLE=function(se,oe,he){return J(this,se,oe,!0,he)},n.prototype.writeDoubleBE=function(se,oe,he){return J(this,se,oe,!1,he)},n.prototype.copy=function(se,oe,he,Ee){if(!n.isBuffer(se))throw new TypeError("argument should be a Buffer");if(he||(he=0),Ee||Ee===0||(Ee=this.length),oe>=se.length&&(oe=se.length),oe||(oe=0),Ee>0&&Ee<he&&(Ee=he),Ee===he||se.length===0||this.length===0)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("sourceEnd out of bounds");Ee>this.length&&(Ee=this.length),se.length-oe<Ee-he&&(Ee=se.length-oe+he);var ke=Ee-he;return this===se&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(oe,he,Ee):Uint8Array.prototype.set.call(se,this.subarray(he,Ee),oe),ke},n.prototype.fill=function(se,oe,he,Ee){if(typeof se=="string"){if(typeof oe=="string"?(Ee=oe,oe=0,he=this.length):typeof he=="string"&&(Ee=he,he=this.length),Ee!==void 0&&typeof Ee!="string")throw new TypeError("encoding must be a string");if(typeof Ee=="string"&&!n.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);if(se.length===1){var ke=se.charCodeAt(0);(Ee==="utf8"&&ke<128||Ee==="latin1")&&(se=ke)}}else typeof se=="number"?se&=255:typeof se=="boolean"&&(se=Number(se));if(oe<0||this.length<oe||this.length<he)throw new RangeError("Out of range index");if(he<=oe)return this;var be;if(oe>>>=0,he=he===void 0?this.length:he>>>0,se||(se=0),typeof se=="number")for(be=oe;be<he;++be)this[be]=se;else{var Ie=n.isBuffer(se)?se:n.from(se,Ee),Fe=Ie.length;if(Fe===0)throw new TypeError('The value "'+se+'" is invalid for argument "value"');for(be=0;be<he-oe;++be)this[be+oe]=Ie[be%Fe]}return this};var Y={};function W(se,oe,he){Y[se]=function(Ee){(function(ye,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Super expression must either be null or a function");ye.prototype=Object.create(Ce&&Ce.prototype,{constructor:{value:ye,writable:!0,configurable:!0}}),Object.defineProperty(ye,"prototype",{writable:!1}),Ce&&k(ye,Ce)})(we,Ee);var ke,be,Ie,Fe,ce=(Ie=we,Fe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ye,Ce=T(Ie);if(Fe){var Re=T(this).constructor;ye=Reflect.construct(Ce,arguments,Re)}else ye=Ce.apply(this,arguments);return function(ze,He){if(He&&(b(He)==="object"||typeof He=="function"))return He;if(He!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(ze)}(this,ye)});function we(){var ye;return function(Ce,Re){if(!(Ce instanceof Re))throw new TypeError("Cannot call a class as a function")}(this,we),ye=ce.call(this),Object.defineProperty(l(ye),"message",{value:oe.apply(l(ye),arguments),writable:!0,configurable:!0}),ye.name="".concat(ye.name," [").concat(se,"]"),ye.stack,delete ye.name,ye}return ke=we,(be=[{key:"code",get:function(){return se},set:function(ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ye,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(se,"]: ").concat(this.message)}}])&&M(ke.prototype,be),Object.defineProperty(ke,"prototype",{writable:!1}),we}(he)}function Q(se){for(var oe="",he=se.length,Ee=se[0]==="-"?1:0;he>=Ee+4;he-=3)oe="_".concat(se.slice(he-3,he)).concat(oe);return"".concat(se.slice(0,he)).concat(oe)}function ne(se,oe,he,Ee,ke,be){if(se>he||se<oe){var Ie,Fe=typeof oe=="bigint"?"n":"";throw Ie=be>3?oe===0||oe===BigInt(0)?">= 0".concat(Fe," and < 2").concat(Fe," ** ").concat(8*(be+1)).concat(Fe):">= -(2".concat(Fe," ** ").concat(8*(be+1)-1).concat(Fe,") and < 2 ** ")+"".concat(8*(be+1)-1).concat(Fe):">= ".concat(oe).concat(Fe," and <= ").concat(he).concat(Fe),new Y.ERR_OUT_OF_RANGE("value",Ie,se)}(function(ce,we,ye){re(we,"offset"),ce[we]!==void 0&&ce[we+ye]!==void 0||ae(we,ce.length-(ye+1))})(Ee,ke,be)}function re(se,oe){if(typeof se!="number")throw new Y.ERR_INVALID_ARG_TYPE(oe,"number",se)}function ae(se,oe,he){throw Math.floor(se)!==se?(re(se,he),new Y.ERR_OUT_OF_RANGE(he||"offset","an integer",se)):oe<0?new Y.ERR_BUFFER_OUT_OF_BOUNDS:new Y.ERR_OUT_OF_RANGE(he||"offset",">= ".concat(he?1:0," and <= ").concat(oe),se)}W("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?"".concat(se," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(se,oe){return'The "'.concat(se,'" argument must be of type number. Received type ').concat(b(oe))},TypeError),W("ERR_OUT_OF_RANGE",function(se,oe,he){var Ee='The value of "'.concat(se,'" is out of range.'),ke=he;return Number.isInteger(he)&&Math.abs(he)>Math.pow(2,32)?ke=Q(String(he)):typeof he=="bigint"&&(ke=String(he),(he>Math.pow(BigInt(2),BigInt(32))||he<-Math.pow(BigInt(2),BigInt(32)))&&(ke=Q(ke)),ke+="n"),Ee+" It must be ".concat(oe,". Received ").concat(ke)},RangeError);var ue=/[^+/0-9A-Za-z-_]/g;function pe(se,oe){var he;oe=oe||1/0;for(var Ee=se.length,ke=null,be=[],Ie=0;Ie<Ee;++Ie){if((he=se.charCodeAt(Ie))>55295&&he<57344){if(!ke){if(he>56319){(oe-=3)>-1&&be.push(239,191,189);continue}if(Ie+1===Ee){(oe-=3)>-1&&be.push(239,191,189);continue}ke=he;continue}if(he<56320){(oe-=3)>-1&&be.push(239,191,189),ke=he;continue}he=65536+(ke-55296<<10|he-56320)}else ke&&(oe-=3)>-1&&be.push(239,191,189);if(ke=null,he<128){if((oe-=1)<0)break;be.push(he)}else if(he<2048){if((oe-=2)<0)break;be.push(he>>6|192,63&he|128)}else if(he<65536){if((oe-=3)<0)break;be.push(he>>12|224,he>>6&63|128,63&he|128)}else{if(!(he<1114112))throw new Error("Invalid code point");if((oe-=4)<0)break;be.push(he>>18|240,he>>12&63|128,he>>6&63|128,63&he|128)}}return be}function ge(se){return d.toByteArray(function(oe){if((oe=(oe=oe.split("=")[0]).trim().replace(ue,"")).length<2)return"";for(;oe.length%4!=0;)oe+="=";return oe}(se))}function _e(se,oe,he,Ee){var ke;for(ke=0;ke<Ee&&!(ke+he>=oe.length||ke>=se.length);++ke)oe[ke+he]=se[ke];return ke}function me(se,oe){return se instanceof oe||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===oe.name}function ve(se){return se!=se}var Oe=function(){for(var se="0123456789abcdef",oe=new Array(256),he=0;he<16;++he)for(var Ee=16*he,ke=0;ke<16;++ke)oe[Ee+ke]=se[he]+se[ke];return oe}();function Me(se){return typeof BigInt>"u"?Te:se}function Te(){throw new Error("BigInt not supported")}},35791:function(ee){ee.exports=k,ee.exports.isMobile=k,ee.exports.default=k;var D=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,M=/android|ipad|playbook|silk/i;function k(l){l||(l={});var T=l.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var b=D.test(T)&&!e.test(T)||!!l.tablet&&M.test(T);return!b&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(b=!0),b}},86781:function(ee,D,e){e.r(D),e.d(D,{sankeyCenter:function(){return r},sankeyCircular:function(){return L},sankeyJustify:function(){return i},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var M=e(33064),k=e(15140),l=e(45879),T=e(2502),b=e.n(T);function d(_e){return _e.target.depth}function s(_e){return _e.depth}function t(_e,me){return me-1-_e.height}function i(_e,me){return _e.sourceLinks.length?_e.depth:me-1}function r(_e){return _e.targetLinks.length?_e.depth:_e.sourceLinks.length?(0,M.VV)(_e.sourceLinks,d)-1:0}function n(_e){return function(){return _e}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e};function a(_e,me){return p(_e.source,me.source)||_e.index-me.index}function u(_e,me){return p(_e.target,me.target)||_e.index-me.index}function p(_e,me){return _e.partOfCycle===me.partOfCycle?_e.y0-me.y0:_e.circularLinkType==="top"||me.circularLinkType==="bottom"?-1:1}function c(_e){return _e.value}function x(_e){return(_e.y0+_e.y1)/2}function g(_e){return x(_e.source)}function h(_e){return x(_e.target)}function y(_e){return _e.index}function v(_e){return _e.nodes}function m(_e){return _e.links}function _(_e,me){var ve=_e.get(me);if(!ve)throw new Error("missing: "+me);return ve}function f(_e,me){return me(_e)}var S=25,w=10,E=.3;function L(){var _e,me,ve=0,Oe=0,Me=1,Te=1,se=24,oe=y,he=i,Ee=v,ke=m,be=32,Ie=2,Fe=null;function ce(){var ye={nodes:Ee.apply(null,arguments),links:ke.apply(null,arguments)};(function(Re){Re.nodes.forEach(function(He,Ge){He.index=Ge,He.sourceLinks=[],He.targetLinks=[]});var ze=(0,k.UI)(Re.nodes,oe);Re.links.forEach(function(He,Ge){He.index=Ge;var Je=He.source,ot=He.target;(Je===void 0?"undefined":o(Je))!=="object"&&(Je=He.source=_(ze,Je)),(ot===void 0?"undefined":o(ot))!=="object"&&(ot=He.target=_(ze,ot)),Je.sourceLinks.push(He),ot.targetLinks.push(He)})})(ye),function(Re,ze,He){var Ge=0;if(He===null){for(var Je=[],ot=0;ot<Re.links.length;ot++){var Qe=Re.links[ot],vt=Qe.source.index,xt=Qe.target.index;Je[vt]||(Je[vt]=[]),Je[xt]||(Je[xt]=[]),Je[vt].indexOf(xt)===-1&&Je[vt].push(xt)}var mt=b()(Je);mt.sort(function(Tt,Mt){return Tt.length-Mt.length});var rt={};for(ot=0;ot<mt.length;ot++){var it=mt[ot].slice(-2);rt[it[0]]||(rt[it[0]]={}),rt[it[0]][it[1]]=!0}Re.links.forEach(function(Tt){var Mt=Tt.target.index,Pt=Tt.source.index;Mt===Pt||rt[Pt]&&rt[Pt][Mt]?(Tt.circular=!0,Tt.circularLinkID=Ge,Ge+=1):Tt.circular=!1})}else Re.links.forEach(function(Tt){Tt.source[He]<Tt.target[He]?Tt.circular=!1:(Tt.circular=!0,Tt.circularLinkID=Ge,Ge+=1)})}(ye,0,Fe),function(Re){Re.nodes.forEach(function(ze){ze.partOfCycle=!1,ze.value=Math.max((0,M.Sm)(ze.sourceLinks,c),(0,M.Sm)(ze.targetLinks,c)),ze.sourceLinks.forEach(function(He){He.circular&&(ze.partOfCycle=!0,ze.circularLinkType=He.circularLinkType)}),ze.targetLinks.forEach(function(He){He.circular&&(ze.partOfCycle=!0,ze.circularLinkType=He.circularLinkType)})})}(ye),function(Re){var ze,He,Ge;for(ze=Re.nodes,He=[],Ge=0;ze.length;++Ge,ze=He,He=[])ze.forEach(function(Je){Je.depth=Ge,Je.sourceLinks.forEach(function(ot){He.indexOf(ot.target)<0&&!ot.circular&&He.push(ot.target)})});for(ze=Re.nodes,He=[],Ge=0;ze.length;++Ge,ze=He,He=[])ze.forEach(function(Je){Je.height=Ge,Je.targetLinks.forEach(function(ot){He.indexOf(ot.source)<0&&!ot.circular&&He.push(ot.source)})});Re.nodes.forEach(function(Je){Je.column=Math.floor(he.call(null,Je,Ge))})}(ye),C(ye,oe),function(Re,ze,He){var Ge=(0,k.b1)().key(function(xt){return xt.column}).sortKeys(M.j2).entries(Re.nodes).map(function(xt){return xt.values});(function(xt){if(me){var mt=1/0;Ge.forEach(function(Mt){var Pt=Te*me/(Mt.length+1);mt=Pt<mt?Pt:mt}),_e=mt}var rt=(0,M.VV)(Ge,function(Mt){return(Te-Oe-(Mt.length-1)*_e)/(0,M.Sm)(Mt,c)});rt*=E,Re.links.forEach(function(Mt){Mt.width=Mt.value*rt});var it=function(Mt){var Pt=0,kt=0,Ze=0,Xe=0,Ve=(0,M.Fp)(Mt.nodes,function(We){return We.column});return Mt.links.forEach(function(We){We.circular&&(We.circularLinkType=="top"?Pt+=We.width:kt+=We.width,We.target.column==0&&(Xe+=We.width),We.source.column==Ve&&(Ze+=We.width))}),{top:Pt=Pt>0?Pt+S+w:Pt,bottom:kt=kt>0?kt+S+w:kt,left:Xe=Xe>0?Xe+S+w:Xe,right:Ze=Ze>0?Ze+S+w:Ze}}(Re),Tt=function(Mt,Pt){var kt=(0,M.Fp)(Mt.nodes,function(at){return at.column}),Ze=Me-ve,Xe=Te-Oe,Ve=Ze/(Ze+Pt.right+Pt.left),We=Xe/(Xe+Pt.top+Pt.bottom);return ve=ve*Ve+Pt.left,Me=Pt.right==0?Me:Me*Ve,Oe=Oe*We+Pt.top,Te*=We,Mt.nodes.forEach(function(at){at.x0=ve+at.column*((Me-ve-se)/kt),at.x1=at.x0+se}),We}(Re,it);rt*=Tt,Re.links.forEach(function(Mt){Mt.width=Mt.value*rt}),Ge.forEach(function(Mt){var Pt=Mt.length;Mt.forEach(function(kt,Ze){kt.depth==Ge.length-1&&Pt==1||kt.depth==0&&Pt==1?(kt.y0=Te/2-kt.value*rt,kt.y1=kt.y0+kt.value*rt):kt.partOfCycle?z(kt,xt)==0?(kt.y0=Te/2+Ze,kt.y1=kt.y0+kt.value*rt):kt.circularLinkType=="top"?(kt.y0=Oe+Ze,kt.y1=kt.y0+kt.value*rt):(kt.y0=Te-kt.value*rt-Ze,kt.y1=kt.y0+kt.value*rt):it.top==0||it.bottom==0?(kt.y0=(Te-Oe)/Pt*Ze,kt.y1=kt.y0+kt.value*rt):(kt.y0=(Te-Oe)/2-Pt/2+Ze,kt.y1=kt.y0+kt.value*rt)})})})(He),vt();for(var Je=1,ot=ze;ot>0;--ot)Qe(Je*=.99,He),vt();function Qe(xt,mt){var rt=Ge.length;Ge.forEach(function(it){var Tt=it.length,Mt=it[0].depth;it.forEach(function(Pt){var kt;if((Pt.sourceLinks.length||Pt.targetLinks.length)&&!(Pt.partOfCycle&&z(Pt,mt)>0))if(Mt==0&&Tt==1)kt=Pt.y1-Pt.y0,Pt.y0=Te/2-kt/2,Pt.y1=Te/2+kt/2;else if(Mt==rt-1&&Tt==1)kt=Pt.y1-Pt.y0,Pt.y0=Te/2-kt/2,Pt.y1=Te/2+kt/2;else{var Ze=(0,M.J6)(Pt.sourceLinks,h),Xe=(0,M.J6)(Pt.targetLinks,g),Ve=((Ze&&Xe?(Ze+Xe)/2:Ze||Xe)-x(Pt))*xt;Pt.y0+=Ve,Pt.y1+=Ve}})})}function vt(){Ge.forEach(function(xt){var mt,rt,it,Tt=Oe,Mt=xt.length;for(xt.sort(p),it=0;it<Mt;++it)(rt=Tt-(mt=xt[it]).y0)>0&&(mt.y0+=rt,mt.y1+=rt),Tt=mt.y1+_e;if((rt=Tt-_e-Te)>0)for(Tt=mt.y0-=rt,mt.y1-=rt,it=Mt-2;it>=0;--it)(rt=(mt=xt[it]).y1+_e-Tt)>0&&(mt.y0-=rt,mt.y1-=rt),Tt=mt.y0})}}(ye,be,oe),we(ye);for(var Ce=0;Ce<4;Ce++)re(ye,Te,oe),ae(ye,0,oe),Q(ye,Oe,Te,oe),re(ye,Te,oe),ae(ye,0,oe);return function(Re,ze,He){var Ge=Re.nodes,Je=Re.links,ot=!1,Qe=!1;if(Je.forEach(function(mt){mt.circularLinkType=="top"?ot=!0:mt.circularLinkType=="bottom"&&(Qe=!0)}),ot==0||Qe==0){var vt=(0,M.VV)(Ge,function(mt){return mt.y0}),xt=(He-ze)/((0,M.Fp)(Ge,function(mt){return mt.y1})-vt);Ge.forEach(function(mt){var rt=(mt.y1-mt.y0)*xt;mt.y0=(mt.y0-vt)*xt,mt.y1=mt.y0+rt}),Je.forEach(function(mt){mt.y0=(mt.y0-vt)*xt,mt.y1=(mt.y1-vt)*xt,mt.width=mt.width*xt})}}(ye,Oe,Te),H(ye,Ie,Te,oe),ye}function we(ye){ye.nodes.forEach(function(Ce){Ce.sourceLinks.sort(u),Ce.targetLinks.sort(a)}),ye.nodes.forEach(function(Ce){var Re=Ce.y0,ze=Re,He=Ce.y1,Ge=He;Ce.sourceLinks.forEach(function(Je){Je.circular?(Je.y0=He-Je.width/2,He-=Je.width):(Je.y0=Re+Je.width/2,Re+=Je.width)}),Ce.targetLinks.forEach(function(Je){Je.circular?(Je.y1=Ge-Je.width/2,Ge-=Je.width):(Je.y1=ze+Je.width/2,ze+=Je.width)})})}return ce.nodeId=function(ye){return arguments.length?(oe=typeof ye=="function"?ye:n(ye),ce):oe},ce.nodeAlign=function(ye){return arguments.length?(he=typeof ye=="function"?ye:n(ye),ce):he},ce.nodeWidth=function(ye){return arguments.length?(se=+ye,ce):se},ce.nodePadding=function(ye){return arguments.length?(_e=+ye,ce):_e},ce.nodes=function(ye){return arguments.length?(Ee=typeof ye=="function"?ye:n(ye),ce):Ee},ce.links=function(ye){return arguments.length?(ke=typeof ye=="function"?ye:n(ye),ce):ke},ce.size=function(ye){return arguments.length?(ve=Oe=0,Me=+ye[0],Te=+ye[1],ce):[Me-ve,Te-Oe]},ce.extent=function(ye){return arguments.length?(ve=+ye[0][0],Me=+ye[1][0],Oe=+ye[0][1],Te=+ye[1][1],ce):[[ve,Oe],[Me,Te]]},ce.iterations=function(ye){return arguments.length?(be=+ye,ce):be},ce.circularLinkGap=function(ye){return arguments.length?(Ie=+ye,ce):Ie},ce.nodePaddingRatio=function(ye){return arguments.length?(me=+ye,ce):me},ce.sortNodes=function(ye){return arguments.length?(Fe=ye,ce):Fe},ce.update=function(ye){return C(ye,oe),we(ye),ye.links.forEach(function(Ce){Ce.circular&&(Ce.circularLinkType=Ce.y0+Ce.y1<Te?"top":"bottom",Ce.source.circularLinkType=Ce.circularLinkType,Ce.target.circularLinkType=Ce.circularLinkType)}),re(ye,Te,oe,!1),ae(ye,0,oe),H(ye,Ie,Te,oe),ye},ce}function C(_e,me){var ve=0,Oe=0;_e.links.forEach(function(Me){Me.circular&&(Me.source.circularLinkType||Me.target.circularLinkType?Me.circularLinkType=Me.source.circularLinkType?Me.source.circularLinkType:Me.target.circularLinkType:Me.circularLinkType=ve<Oe?"top":"bottom",Me.circularLinkType=="top"?ve+=1:Oe+=1,_e.nodes.forEach(function(Te){f(Te,me)!=f(Me.source,me)&&f(Te,me)!=f(Me.target,me)||(Te.circularLinkType=Me.circularLinkType)}))}),_e.links.forEach(function(Me){Me.circular&&(Me.source.circularLinkType==Me.target.circularLinkType&&(Me.circularLinkType=Me.source.circularLinkType),ge(Me,me)&&(Me.circularLinkType=Me.source.circularLinkType))})}function P(_e){var me=Math.abs(_e.y1-_e.y0),ve=Math.abs(_e.target.x0-_e.source.x1);return Math.atan(ve/me)}function z(_e,me){var ve=0;_e.sourceLinks.forEach(function(Me){ve=Me.circular&&!ge(Me,me)?ve+1:ve});var Oe=0;return _e.targetLinks.forEach(function(Me){Oe=Me.circular&&!ge(Me,me)?Oe+1:Oe}),ve+Oe}function G(_e){var me=_e.source.sourceLinks,ve=0;me.forEach(function(Te){ve=Te.circular?ve+1:ve});var Oe=_e.target.targetLinks,Me=0;return Oe.forEach(function(Te){Me=Te.circular?Me+1:Me}),!(ve>1||Me>1)}function O(_e,me,ve){return _e.sort(N),_e.forEach(function(Oe,Me){var Te,se,oe=0;if(ge(Oe,ve)&&G(Oe))Oe.circularPathData.verticalBuffer=oe+Oe.width/2;else{for(var he=0;he<Me;he++)if(Te=_e[Me],se=_e[he],!(Te.source.column<se.target.column||Te.target.column>se.source.column)){var Ee=_e[he].circularPathData.verticalBuffer+_e[he].width/2+me;oe=Ee>oe?Ee:oe}Oe.circularPathData.verticalBuffer=oe+Oe.width/2}}),_e}function H(_e,me,ve,Oe){var Me=(0,M.VV)(_e.links,function(Te){return Te.source.y0});_e.links.forEach(function(Te){Te.circular&&(Te.circularPathData={})}),O(_e.links.filter(function(Te){return Te.circularLinkType=="top"}),me,Oe),O(_e.links.filter(function(Te){return Te.circularLinkType=="bottom"}),me,Oe),_e.links.forEach(function(Te){if(Te.circular){if(Te.circularPathData.arcRadius=Te.width+w,Te.circularPathData.leftNodeBuffer=5,Te.circularPathData.rightNodeBuffer=5,Te.circularPathData.sourceWidth=Te.source.x1-Te.source.x0,Te.circularPathData.sourceX=Te.source.x0+Te.circularPathData.sourceWidth,Te.circularPathData.targetX=Te.target.x0,Te.circularPathData.sourceY=Te.y0,Te.circularPathData.targetY=Te.y1,ge(Te,Oe)&&G(Te))Te.circularPathData.leftSmallArcRadius=w+Te.width/2,Te.circularPathData.leftLargeArcRadius=w+Te.width/2,Te.circularPathData.rightSmallArcRadius=w+Te.width/2,Te.circularPathData.rightLargeArcRadius=w+Te.width/2,Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Te.source.y1+S+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=Te.source.y0-S-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius);else{var se=Te.source.column,oe=Te.circularLinkType,he=_e.links.filter(function(be){return be.source.column==se&&be.circularLinkType==oe});Te.circularLinkType=="bottom"?he.sort(V):he.sort(B);var Ee=0;he.forEach(function(be,Ie){be.circularLinkID==Te.circularLinkID&&(Te.circularPathData.leftSmallArcRadius=w+Te.width/2+Ee,Te.circularPathData.leftLargeArcRadius=w+Te.width/2+Ie*me+Ee),Ee+=be.width}),se=Te.target.column,he=_e.links.filter(function(be){return be.target.column==se&&be.circularLinkType==oe}),Te.circularLinkType=="bottom"?he.sort(te):he.sort(q),Ee=0,he.forEach(function(be,Ie){be.circularLinkID==Te.circularLinkID&&(Te.circularPathData.rightSmallArcRadius=w+Te.width/2+Ee,Te.circularPathData.rightLargeArcRadius=w+Te.width/2+Ie*me+Ee),Ee+=be.width}),Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Math.max(ve,Te.source.y1,Te.target.y1)+S+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=Me-S-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius)}Te.circularPathData.leftInnerExtent=Te.circularPathData.sourceX+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightInnerExtent=Te.circularPathData.targetX-Te.circularPathData.rightNodeBuffer,Te.circularPathData.leftFullExtent=Te.circularPathData.sourceX+Te.circularPathData.leftLargeArcRadius+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightFullExtent=Te.circularPathData.targetX-Te.circularPathData.rightLargeArcRadius-Te.circularPathData.rightNodeBuffer}if(Te.circular)Te.path=function(be){return be.circularLinkType=="top"?"M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 0 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY-be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 0 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 0 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY-be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 0 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY:"M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 1 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY+be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 1 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 1 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY+be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 1 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY}(Te);else{var ke=(0,l.h5)().source(function(be){return[be.source.x0+(be.source.x1-be.source.x0),be.y0]}).target(function(be){return[be.target.x0,be.y1]});Te.path=ke(Te)}})}function N(_e,me){return K(_e)==K(me)?_e.circularLinkType=="bottom"?V(_e,me):B(_e,me):K(me)-K(_e)}function B(_e,me){return _e.y0-me.y0}function V(_e,me){return me.y0-_e.y0}function q(_e,me){return _e.y1-me.y1}function te(_e,me){return me.y1-_e.y1}function K(_e){return _e.target.column-_e.source.column}function J(_e){return _e.target.x0-_e.source.x1}function Y(_e,me){var ve=P(_e),Oe=J(me)/Math.tan(ve);return pe(_e)=="up"?_e.y1+Oe:_e.y1-Oe}function W(_e,me){var ve=P(_e),Oe=J(me)/Math.tan(ve);return pe(_e)=="up"?_e.y1-Oe:_e.y1+Oe}function Q(_e,me,ve,Oe){_e.links.forEach(function(Me){if(!Me.circular&&Me.target.column-Me.source.column>1){var Te=Me.source.column+1,se=Me.target.column-1,oe=1,he=se-Te+1;for(oe=1;Te<=se;Te++,oe++)_e.nodes.forEach(function(Ee){if(Ee.column==Te){var ke,be=oe/(he+1),Ie=Math.pow(1-be,3),Fe=3*be*Math.pow(1-be,2),ce=3*Math.pow(be,2)*(1-be),we=Math.pow(be,3),ye=Ie*Me.y0+Fe*Me.y0+ce*Me.y1+we*Me.y1,Ce=ye-Me.width/2,Re=ye+Me.width/2;Ce>Ee.y0&&Ce<Ee.y1?(ke=Ee.y1-Ce+10,ke=Ee.circularLinkType=="bottom"?ke:-ke,Ee=ne(Ee,ke,me,ve),_e.nodes.forEach(function(ze){var He,Ge;f(ze,Oe)!=f(Ee,Oe)&&ze.column==Ee.column&&(Ge=ze,(He=Ee).y0>Ge.y0&&He.y0<Ge.y1||He.y1>Ge.y0&&He.y1<Ge.y1||He.y0<Ge.y0&&He.y1>Ge.y1)&&ne(ze,ke,me,ve)})):(Re>Ee.y0&&Re<Ee.y1||Ce<Ee.y0&&Re>Ee.y1)&&(ke=Re-Ee.y0+10,Ee=ne(Ee,ke,me,ve),_e.nodes.forEach(function(ze){f(ze,Oe)!=f(Ee,Oe)&&ze.column==Ee.column&&ze.y0<Ee.y1&&ze.y1>Ee.y1&&ne(ze,ke,me,ve)}))}})}})}function ne(_e,me,ve,Oe){return _e.y0+me>=ve&&_e.y1+me<=Oe&&(_e.y0=_e.y0+me,_e.y1=_e.y1+me,_e.targetLinks.forEach(function(Me){Me.y1=Me.y1+me}),_e.sourceLinks.forEach(function(Me){Me.y0=Me.y0+me})),_e}function re(_e,me,ve,Oe){_e.nodes.forEach(function(Me){Oe&&Me.y+(Me.y1-Me.y0)>me&&(Me.y=Me.y-(Me.y+(Me.y1-Me.y0)-me));var Te=_e.links.filter(function(he){return f(he.source,ve)==f(Me,ve)}),se=Te.length;se>1&&Te.sort(function(he,Ee){if(!he.circular&&!Ee.circular){if(he.target.column==Ee.target.column||!ue(he,Ee))return he.y1-Ee.y1;if(he.target.column>Ee.target.column){var ke=W(Ee,he);return he.y1-ke}if(Ee.target.column>he.target.column)return W(he,Ee)-Ee.y1}return he.circular&&!Ee.circular?he.circularLinkType=="top"?-1:1:Ee.circular&&!he.circular?Ee.circularLinkType=="top"?1:-1:he.circular&&Ee.circular?he.circularLinkType===Ee.circularLinkType&&he.circularLinkType=="top"?he.target.column===Ee.target.column?he.target.y1-Ee.target.y1:Ee.target.column-he.target.column:he.circularLinkType===Ee.circularLinkType&&he.circularLinkType=="bottom"?he.target.column===Ee.target.column?Ee.target.y1-he.target.y1:he.target.column-Ee.target.column:he.circularLinkType=="top"?-1:1:void 0});var oe=Me.y0;Te.forEach(function(he){he.y0=oe+he.width/2,oe+=he.width}),Te.forEach(function(he,Ee){if(he.circularLinkType=="bottom"){for(var ke=Ee+1,be=0;ke<se;ke++)be+=Te[ke].width;he.y0=Me.y1-be-he.width/2}})})}function ae(_e,me,ve){_e.nodes.forEach(function(Oe){var Me=_e.links.filter(function(oe){return f(oe.target,ve)==f(Oe,ve)}),Te=Me.length;Te>1&&Me.sort(function(oe,he){if(!oe.circular&&!he.circular){if(oe.source.column==he.source.column||!ue(oe,he))return oe.y0-he.y0;if(he.source.column<oe.source.column){var Ee=Y(he,oe);return oe.y0-Ee}if(oe.source.column<he.source.column)return Y(oe,he)-he.y0}return oe.circular&&!he.circular?oe.circularLinkType=="top"?-1:1:he.circular&&!oe.circular?he.circularLinkType=="top"?1:-1:oe.circular&&he.circular?oe.circularLinkType===he.circularLinkType&&oe.circularLinkType=="top"?oe.source.column===he.source.column?oe.source.y1-he.source.y1:oe.source.column-he.source.column:oe.circularLinkType===he.circularLinkType&&oe.circularLinkType=="bottom"?oe.source.column===he.source.column?oe.source.y1-he.source.y1:he.source.column-oe.source.column:oe.circularLinkType=="top"?-1:1:void 0});var se=Oe.y0;Me.forEach(function(oe){oe.y1=se+oe.width/2,se+=oe.width}),Me.forEach(function(oe,he){if(oe.circularLinkType=="bottom"){for(var Ee=he+1,ke=0;Ee<Te;Ee++)ke+=Me[Ee].width;oe.y1=Oe.y1-ke-oe.width/2}})})}function ue(_e,me){return pe(_e)==pe(me)}function pe(_e){return _e.y0-_e.y1>0?"up":"down"}function ge(_e,me){return f(_e.source,me)==f(_e.target,me)}},30838:function(ee,D,e){e.r(D),e.d(D,{sankey:function(){return y},sankeyCenter:function(){return s},sankeyJustify:function(){return d},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return f},sankeyRight:function(){return b}});var M=e(33064),k=e(15140);function l(S){return S.target.depth}function T(S){return S.depth}function b(S,w){return w-1-S.height}function d(S,w){return S.sourceLinks.length?S.depth:w-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,M.VV)(S.sourceLinks,l)-1:0}function t(S){return function(){return S}}function i(S,w){return n(S.source,w.source)||S.index-w.index}function r(S,w){return n(S.target,w.target)||S.index-w.index}function n(S,w){return S.y0-w.y0}function o(S){return S.value}function a(S){return(S.y0+S.y1)/2}function u(S){return a(S.source)*S.value}function p(S){return a(S.target)*S.value}function c(S){return S.index}function x(S){return S.nodes}function g(S){return S.links}function h(S,w){var E=S.get(w);if(!E)throw new Error("missing: "+w);return E}function y(){var S=0,w=0,E=1,L=1,C=24,P=8,z=c,G=d,O=x,H=g,N=32;function B(){var q={nodes:O.apply(null,arguments),links:H.apply(null,arguments)};return function(te){te.nodes.forEach(function(J,Y){J.index=Y,J.sourceLinks=[],J.targetLinks=[]});var K=(0,k.UI)(te.nodes,z);te.links.forEach(function(J,Y){J.index=Y;var W=J.source,Q=J.target;typeof W!="object"&&(W=J.source=h(K,W)),typeof Q!="object"&&(Q=J.target=h(K,Q)),W.sourceLinks.push(J),Q.targetLinks.push(J)})}(q),function(te){te.nodes.forEach(function(K){K.value=Math.max((0,M.Sm)(K.sourceLinks,o),(0,M.Sm)(K.targetLinks,o))})}(q),function(te){var K,J,Y;for(K=te.nodes,J=[],Y=0;K.length;++Y,K=J,J=[])K.forEach(function(Q){Q.depth=Y,Q.sourceLinks.forEach(function(ne){J.indexOf(ne.target)<0&&J.push(ne.target)})});for(K=te.nodes,J=[],Y=0;K.length;++Y,K=J,J=[])K.forEach(function(Q){Q.height=Y,Q.targetLinks.forEach(function(ne){J.indexOf(ne.source)<0&&J.push(ne.source)})});var W=(E-S-C)/(Y-1);te.nodes.forEach(function(Q){Q.x1=(Q.x0=S+Math.max(0,Math.min(Y-1,Math.floor(G.call(null,Q,Y))))*W)+C})}(q),function(te){var K=(0,k.b1)().key(function(re){return re.x0}).sortKeys(M.j2).entries(te.nodes).map(function(re){return re.values});(function(){var re=(0,M.Fp)(K,function(pe){return pe.length}),ae=.6666666666666666*(L-w)/(re-1);P>ae&&(P=ae);var ue=(0,M.VV)(K,function(pe){return(L-w-(pe.length-1)*P)/(0,M.Sm)(pe,o)});K.forEach(function(pe){pe.forEach(function(ge,_e){ge.y1=(ge.y0=_e)+ge.value*ue})}),te.links.forEach(function(pe){pe.width=pe.value*ue})})(),ne();for(var J=1,Y=N;Y>0;--Y)Q(J*=.99),ne(),W(J),ne();function W(re){K.forEach(function(ae){ae.forEach(function(ue){if(ue.targetLinks.length){var pe=((0,M.Sm)(ue.targetLinks,u)/(0,M.Sm)(ue.targetLinks,o)-a(ue))*re;ue.y0+=pe,ue.y1+=pe}})})}function Q(re){K.slice().reverse().forEach(function(ae){ae.forEach(function(ue){if(ue.sourceLinks.length){var pe=((0,M.Sm)(ue.sourceLinks,p)/(0,M.Sm)(ue.sourceLinks,o)-a(ue))*re;ue.y0+=pe,ue.y1+=pe}})})}function ne(){K.forEach(function(re){var ae,ue,pe,ge=w,_e=re.length;for(re.sort(n),pe=0;pe<_e;++pe)(ue=ge-(ae=re[pe]).y0)>0&&(ae.y0+=ue,ae.y1+=ue),ge=ae.y1+P;if((ue=ge-P-L)>0)for(ge=ae.y0-=ue,ae.y1-=ue,pe=_e-2;pe>=0;--pe)(ue=(ae=re[pe]).y1+P-ge)>0&&(ae.y0-=ue,ae.y1-=ue),ge=ae.y0})}}(q),V(q),q}function V(q){q.nodes.forEach(function(te){te.sourceLinks.sort(r),te.targetLinks.sort(i)}),q.nodes.forEach(function(te){var K=te.y0,J=K;te.sourceLinks.forEach(function(Y){Y.y0=K+Y.width/2,K+=Y.width}),te.targetLinks.forEach(function(Y){Y.y1=J+Y.width/2,J+=Y.width})})}return B.update=function(q){return V(q),q},B.nodeId=function(q){return arguments.length?(z=typeof q=="function"?q:t(q),B):z},B.nodeAlign=function(q){return arguments.length?(G=typeof q=="function"?q:t(q),B):G},B.nodeWidth=function(q){return arguments.length?(C=+q,B):C},B.nodePadding=function(q){return arguments.length?(P=+q,B):P},B.nodes=function(q){return arguments.length?(O=typeof q=="function"?q:t(q),B):O},B.links=function(q){return arguments.length?(H=typeof q=="function"?q:t(q),B):H},B.size=function(q){return arguments.length?(S=w=0,E=+q[0],L=+q[1],B):[E-S,L-w]},B.extent=function(q){return arguments.length?(S=+q[0][0],E=+q[1][0],w=+q[0][1],L=+q[1][1],B):[[S,w],[E,L]]},B.iterations=function(q){return arguments.length?(N=+q,B):N},B}var v=e(45879);function m(S){return[S.source.x1,S.y0]}function _(S){return[S.target.x0,S.y1]}function f(){return(0,v.h5)().source(m).target(_)}},39898:function(ee,D,e){var M,k;(function(){var l={version:"3.8.0"},T=[].slice,b=function(F){return T.call(F)},d=self.document;function s(F){return F&&(F.ownerDocument||F.document||F).documentElement}function t(F){return F&&(F.ownerDocument&&F.ownerDocument.defaultView||F.document&&F||F.defaultView)}if(d)try{b(d.documentElement.childNodes)[0].nodeType}catch{b=function($){for(var ie=$.length,de=new Array(ie);ie--;)de[ie]=$[ie];return de}}if(Date.now||(Date.now=function(){return+new Date}),d)try{d.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,r=i.setAttribute,n=i.setAttributeNS,o=this.CSSStyleDeclaration.prototype,a=o.setProperty;i.setAttribute=function($,ie){r.call(this,$,ie+"")},i.setAttributeNS=function($,ie,de){n.call(this,$,ie,de+"")},o.setProperty=function($,ie,de){a.call(this,$,ie+"",de)}}function u(F,$){return F<$?-1:F>$?1:F>=$?0:NaN}function p(F){return F===null?NaN:+F}function c(F){return!isNaN(F)}function x(F){return{left:function($,ie,de,xe){for(arguments.length<3&&(de=0),arguments.length<4&&(xe=$.length);de<xe;){var Le=de+xe>>>1;F($[Le],ie)<0?de=Le+1:xe=Le}return de},right:function($,ie,de,xe){for(arguments.length<3&&(de=0),arguments.length<4&&(xe=$.length);de<xe;){var Le=de+xe>>>1;F($[Le],ie)>0?xe=Le:de=Le+1}return de}}}l.ascending=u,l.descending=function(F,$){return $<F?-1:$>F?1:$>=F?0:NaN},l.min=function(F,$){var ie,de,xe=-1,Le=F.length;if(arguments.length===1){for(;++xe<Le;)if((de=F[xe])!=null&&de>=de){ie=de;break}for(;++xe<Le;)(de=F[xe])!=null&&ie>de&&(ie=de)}else{for(;++xe<Le;)if((de=$.call(F,F[xe],xe))!=null&&de>=de){ie=de;break}for(;++xe<Le;)(de=$.call(F,F[xe],xe))!=null&&ie>de&&(ie=de)}return ie},l.max=function(F,$){var ie,de,xe=-1,Le=F.length;if(arguments.length===1){for(;++xe<Le;)if((de=F[xe])!=null&&de>=de){ie=de;break}for(;++xe<Le;)(de=F[xe])!=null&&de>ie&&(ie=de)}else{for(;++xe<Le;)if((de=$.call(F,F[xe],xe))!=null&&de>=de){ie=de;break}for(;++xe<Le;)(de=$.call(F,F[xe],xe))!=null&&de>ie&&(ie=de)}return ie},l.extent=function(F,$){var ie,de,xe,Le=-1,Ne=F.length;if(arguments.length===1){for(;++Le<Ne;)if((de=F[Le])!=null&&de>=de){ie=xe=de;break}for(;++Le<Ne;)(de=F[Le])!=null&&(ie>de&&(ie=de),xe<de&&(xe=de))}else{for(;++Le<Ne;)if((de=$.call(F,F[Le],Le))!=null&&de>=de){ie=xe=de;break}for(;++Le<Ne;)(de=$.call(F,F[Le],Le))!=null&&(ie>de&&(ie=de),xe<de&&(xe=de))}return[ie,xe]},l.sum=function(F,$){var ie,de=0,xe=F.length,Le=-1;if(arguments.length===1)for(;++Le<xe;)c(ie=+F[Le])&&(de+=ie);else for(;++Le<xe;)c(ie=+$.call(F,F[Le],Le))&&(de+=ie);return de},l.mean=function(F,$){var ie,de=0,xe=F.length,Le=-1,Ne=xe;if(arguments.length===1)for(;++Le<xe;)c(ie=p(F[Le]))?de+=ie:--Ne;else for(;++Le<xe;)c(ie=p($.call(F,F[Le],Le)))?de+=ie:--Ne;if(Ne)return de/Ne},l.quantile=function(F,$){var ie=(F.length-1)*$+1,de=Math.floor(ie),xe=+F[de-1],Le=ie-de;return Le?xe+Le*(F[de]-xe):xe},l.median=function(F,$){var ie,de=[],xe=F.length,Le=-1;if(arguments.length===1)for(;++Le<xe;)c(ie=p(F[Le]))&&de.push(ie);else for(;++Le<xe;)c(ie=p($.call(F,F[Le],Le)))&&de.push(ie);if(de.length)return l.quantile(de.sort(u),.5)},l.variance=function(F,$){var ie,de,xe=F.length,Le=0,Ne=0,Ue=-1,qe=0;if(arguments.length===1)for(;++Ue<xe;)c(ie=p(F[Ue]))&&(Ne+=(de=ie-Le)*(ie-(Le+=de/++qe)));else for(;++Ue<xe;)c(ie=p($.call(F,F[Ue],Ue)))&&(Ne+=(de=ie-Le)*(ie-(Le+=de/++qe)));if(qe>1)return Ne/(qe-1)},l.deviation=function(){var F=l.variance.apply(this,arguments);return F&&Math.sqrt(F)};var g=x(u);function h(F){return F.length}l.bisectLeft=g.left,l.bisect=l.bisectRight=g.right,l.bisector=function(F){return x(F.length===1?function($,ie){return u(F($),ie)}:F)},l.shuffle=function(F,$,ie){(Le=arguments.length)<3&&(ie=F.length,Le<2&&($=0));for(var de,xe,Le=ie-$;Le;)xe=Math.random()*Le--|0,de=F[Le+$],F[Le+$]=F[xe+$],F[xe+$]=de;return F},l.permute=function(F,$){for(var ie=$.length,de=new Array(ie);ie--;)de[ie]=F[$[ie]];return de},l.pairs=function(F){for(var $=0,ie=F.length-1,de=F[0],xe=new Array(ie<0?0:ie);$<ie;)xe[$]=[de,de=F[++$]];return xe},l.transpose=function(F){if(!(xe=F.length))return[];for(var $=-1,ie=l.min(F,h),de=new Array(ie);++$<ie;)for(var xe,Le=-1,Ne=de[$]=new Array(xe);++Le<xe;)Ne[Le]=F[Le][$];return de},l.zip=function(){return l.transpose(arguments)},l.keys=function(F){var $=[];for(var ie in F)$.push(ie);return $},l.values=function(F){var $=[];for(var ie in F)$.push(F[ie]);return $},l.entries=function(F){var $=[];for(var ie in F)$.push({key:ie,value:F[ie]});return $},l.merge=function(F){for(var $,ie,de,xe=F.length,Le=-1,Ne=0;++Le<xe;)Ne+=F[Le].length;for(ie=new Array(Ne);--xe>=0;)for($=(de=F[xe]).length;--$>=0;)ie[--Ne]=de[$];return ie};var y=Math.abs;function v(F,$){for(var ie in $)Object.defineProperty(F.prototype,ie,{value:$[ie],enumerable:!1})}function m(){this._=Object.create(null)}l.range=function(F,$,ie){if(arguments.length<3&&(ie=1,arguments.length<2&&($=F,F=0)),($-F)/ie==1/0)throw new Error("infinite range");var de,xe=[],Le=function(Ue){for(var qe=1;Ue*qe%1;)qe*=10;return qe}(y(ie)),Ne=-1;if(F*=Le,$*=Le,(ie*=Le)<0)for(;(de=F+ie*++Ne)>$;)xe.push(de/Le);else for(;(de=F+ie*++Ne)<$;)xe.push(de/Le);return xe},l.map=function(F,$){var ie=new m;if(F instanceof m)F.forEach(function(Ue,qe){ie.set(Ue,qe)});else if(Array.isArray(F)){var de,xe=-1,Le=F.length;if(arguments.length===1)for(;++xe<Le;)ie.set(xe,F[xe]);else for(;++xe<Le;)ie.set($.call(F,de=F[xe],xe),de)}else for(var Ne in F)ie.set(Ne,F[Ne]);return ie};var _="__proto__",f="\0";function S(F){return(F+="")===_||F[0]===f?f+F:F}function w(F){return(F+="")[0]===f?F.slice(1):F}function E(F){return S(F)in this._}function L(F){return(F=S(F))in this._&&delete this._[F]}function C(){var F=[];for(var $ in this._)F.push(w($));return F}function P(){var F=0;for(var $ in this._)++F;return F}function z(){for(var F in this._)return!1;return!0}function G(){this._=Object.create(null)}function O(F){return F}function H(F,$,ie){return function(){var de=ie.apply($,arguments);return de===$?F:de}}function N(F,$){if($ in F)return $;$=$.charAt(0).toUpperCase()+$.slice(1);for(var ie=0,de=B.length;ie<de;++ie){var xe=B[ie]+$;if(xe in F)return xe}}v(m,{has:E,get:function(F){return this._[S(F)]},set:function(F,$){return this._[S(F)]=$},remove:L,keys:C,values:function(){var F=[];for(var $ in this._)F.push(this._[$]);return F},entries:function(){var F=[];for(var $ in this._)F.push({key:w($),value:this._[$]});return F},size:P,empty:z,forEach:function(F){for(var $ in this._)F.call(this,w($),this._[$])}}),l.nest=function(){var F,$,ie={},de=[],xe=[];function Le(Ue,qe,Ye){if(Ye>=de.length)return $?$.call(ie,qe):F?qe.sort(F):qe;for(var $e,lt,pt,Et,Ct=-1,St=qe.length,Ft=de[Ye++],Lt=new m;++Ct<St;)(Et=Lt.get($e=Ft(lt=qe[Ct])))?Et.push(lt):Lt.set($e,[lt]);return Ue?(lt=Ue(),pt=function(tn,Zt){lt.set(tn,Le(Ue,Zt,Ye))}):(lt={},pt=function(tn,Zt){lt[tn]=Le(Ue,Zt,Ye)}),Lt.forEach(pt),lt}function Ne(Ue,qe){if(qe>=de.length)return Ue;var Ye=[],$e=xe[qe++];return Ue.forEach(function(lt,pt){Ye.push({key:lt,values:Ne(pt,qe)})}),$e?Ye.sort(function(lt,pt){return $e(lt.key,pt.key)}):Ye}return ie.map=function(Ue,qe){return Le(qe,Ue,0)},ie.entries=function(Ue){return Ne(Le(l.map,Ue,0),0)},ie.key=function(Ue){return de.push(Ue),ie},ie.sortKeys=function(Ue){return xe[de.length-1]=Ue,ie},ie.sortValues=function(Ue){return F=Ue,ie},ie.rollup=function(Ue){return $=Ue,ie},ie},l.set=function(F){var $=new G;if(F)for(var ie=0,de=F.length;ie<de;++ie)$.add(F[ie]);return $},v(G,{has:E,add:function(F){return this._[S(F+="")]=!0,F},remove:L,values:C,size:P,empty:z,forEach:function(F){for(var $ in this._)F.call(this,w($))}}),l.behavior={},l.rebind=function(F,$){for(var ie,de=1,xe=arguments.length;++de<xe;)F[ie=arguments[de]]=H(F,$,$[ie]);return F};var B=["webkit","ms","moz","Moz","o","O"];function V(){}function q(){}function te(F){var $=[],ie=new m;function de(){for(var xe,Le=$,Ne=-1,Ue=Le.length;++Ne<Ue;)(xe=Le[Ne].on)&&xe.apply(this,arguments);return F}return de.on=function(xe,Le){var Ne,Ue=ie.get(xe);return arguments.length<2?Ue&&Ue.on:(Ue&&(Ue.on=null,$=$.slice(0,Ne=$.indexOf(Ue)).concat($.slice(Ne+1)),ie.remove(xe)),Le&&$.push(ie.set(xe,{on:Le})),F)},de}function K(){l.event.preventDefault()}function J(){for(var F,$=l.event;F=$.sourceEvent;)$=F;return $}function Y(F){for(var $=new q,ie=0,de=arguments.length;++ie<de;)$[arguments[ie]]=te($);return $.of=function(xe,Le){return function(Ne){try{var Ue=Ne.sourceEvent=l.event;Ne.target=F,l.event=Ne,$[Ne.type].apply(xe,Le)}finally{l.event=Ue}}},$}l.dispatch=function(){for(var F=new q,$=-1,ie=arguments.length;++$<ie;)F[arguments[$]]=te(F);return F},q.prototype.on=function(F,$){var ie=F.indexOf("."),de="";if(ie>=0&&(de=F.slice(ie+1),F=F.slice(0,ie)),F)return arguments.length<2?this[F].on(de):this[F].on(de,$);if(arguments.length===2){if($==null)for(F in this)this.hasOwnProperty(F)&&this[F].on(de,null);return this}},l.event=null,l.requote=function(F){return F.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Q={}.__proto__?function(F,$){F.__proto__=$}:function(F,$){for(var ie in $)F[ie]=$[ie]};function ne(F){return Q(F,pe),F}var re=function(F,$){return $.querySelector(F)},ae=function(F,$){return $.querySelectorAll(F)},ue=function(F,$){var ie=F.matches||F[N(F,"matchesSelector")];return ue=function(de,xe){return ie.call(de,xe)},ue(F,$)};typeof Sizzle=="function"&&(re=function(F,$){return Sizzle(F,$)[0]||null},ae=Sizzle,ue=Sizzle.matchesSelector),l.selection=function(){return l.select(d.documentElement)};var pe=l.selection.prototype=[];function ge(F){return typeof F=="function"?F:function(){return re(F,this)}}function _e(F){return typeof F=="function"?F:function(){return ae(F,this)}}pe.select=function(F){var $,ie,de,xe,Le=[];F=ge(F);for(var Ne=-1,Ue=this.length;++Ne<Ue;){Le.push($=[]),$.parentNode=(de=this[Ne]).parentNode;for(var qe=-1,Ye=de.length;++qe<Ye;)(xe=de[qe])?($.push(ie=F.call(xe,xe.__data__,qe,Ne)),ie&&"__data__"in xe&&(ie.__data__=xe.__data__)):$.push(null)}return ne(Le)},pe.selectAll=function(F){var $,ie,de=[];F=_e(F);for(var xe=-1,Le=this.length;++xe<Le;)for(var Ne=this[xe],Ue=-1,qe=Ne.length;++Ue<qe;)(ie=Ne[Ue])&&(de.push($=b(F.call(ie,ie.__data__,Ue,xe))),$.parentNode=ie);return ne(de)};var me="http://www.w3.org/1999/xhtml",ve={svg:"http://www.w3.org/2000/svg",xhtml:me,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oe(F,$){return F=l.ns.qualify(F),$==null?F.local?function(){this.removeAttributeNS(F.space,F.local)}:function(){this.removeAttribute(F)}:typeof $=="function"?F.local?function(){var ie=$.apply(this,arguments);ie==null?this.removeAttributeNS(F.space,F.local):this.setAttributeNS(F.space,F.local,ie)}:function(){var ie=$.apply(this,arguments);ie==null?this.removeAttribute(F):this.setAttribute(F,ie)}:F.local?function(){this.setAttributeNS(F.space,F.local,$)}:function(){this.setAttribute(F,$)}}function Me(F){return F.trim().replace(/\s+/g," ")}function Te(F){return new RegExp("(?:^|\\s+)"+l.requote(F)+"(?:\\s+|$)","g")}function se(F){return(F+"").trim().split(/^|\s+/)}function oe(F,$){var ie=(F=se(F).map(he)).length;return typeof $=="function"?function(){for(var de=-1,xe=$.apply(this,arguments);++de<ie;)F[de](this,xe)}:function(){for(var de=-1;++de<ie;)F[de](this,$)}}function he(F){var $=Te(F);return function(ie,de){if(xe=ie.classList)return de?xe.add(F):xe.remove(F);var xe=ie.getAttribute("class")||"";de?($.lastIndex=0,$.test(xe)||ie.setAttribute("class",Me(xe+" "+F))):ie.setAttribute("class",Me(xe.replace($," ")))}}function Ee(F,$,ie){return $==null?function(){this.style.removeProperty(F)}:typeof $=="function"?function(){var de=$.apply(this,arguments);de==null?this.style.removeProperty(F):this.style.setProperty(F,de,ie)}:function(){this.style.setProperty(F,$,ie)}}function ke(F,$){return $==null?function(){delete this[F]}:typeof $=="function"?function(){var ie=$.apply(this,arguments);ie==null?delete this[F]:this[F]=ie}:function(){this[F]=$}}function be(F){return typeof F=="function"?F:(F=l.ns.qualify(F)).local?function(){return this.ownerDocument.createElementNS(F.space,F.local)}:function(){var $=this.ownerDocument,ie=this.namespaceURI;return ie===me&&$.documentElement.namespaceURI===me?$.createElement(F):$.createElementNS(ie,F)}}function Ie(){var F=this.parentNode;F&&F.removeChild(this)}function Fe(F){return{__data__:F}}function ce(F){return function(){return ue(this,F)}}function we(F){return arguments.length||(F=u),function($,ie){return $&&ie?F($.__data__,ie.__data__):!$-!ie}}function ye(F,$){for(var ie=0,de=F.length;ie<de;ie++)for(var xe,Le=F[ie],Ne=0,Ue=Le.length;Ne<Ue;Ne++)(xe=Le[Ne])&&$(xe,Ne,ie);return F}function Ce(F){return Q(F,Re),F}l.ns={prefix:ve,qualify:function(F){var $=F.indexOf(":"),ie=F;return $>=0&&(ie=F.slice(0,$))!=="xmlns"&&(F=F.slice($+1)),ve.hasOwnProperty(ie)?{space:ve[ie],local:F}:F}},pe.attr=function(F,$){if(arguments.length<2){if(typeof F=="string"){var ie=this.node();return(F=l.ns.qualify(F)).local?ie.getAttributeNS(F.space,F.local):ie.getAttribute(F)}for($ in F)this.each(Oe($,F[$]));return this}return this.each(Oe(F,$))},pe.classed=function(F,$){if(arguments.length<2){if(typeof F=="string"){var ie=this.node(),de=(F=se(F)).length,xe=-1;if($=ie.classList){for(;++xe<de;)if(!$.contains(F[xe]))return!1}else for($=ie.getAttribute("class");++xe<de;)if(!Te(F[xe]).test($))return!1;return!0}for($ in F)this.each(oe($,F[$]));return this}return this.each(oe(F,$))},pe.style=function(F,$,ie){var de=arguments.length;if(de<3){if(typeof F!="string"){for(ie in de<2&&($=""),F)this.each(Ee(ie,F[ie],$));return this}if(de<2){var xe=this.node();return t(xe).getComputedStyle(xe,null).getPropertyValue(F)}ie=""}return this.each(Ee(F,$,ie))},pe.property=function(F,$){if(arguments.length<2){if(typeof F=="string")return this.node()[F];for($ in F)this.each(ke($,F[$]));return this}return this.each(ke(F,$))},pe.text=function(F){return arguments.length?this.each(typeof F=="function"?function(){var $=F.apply(this,arguments);this.textContent=$??""}:F==null?function(){this.textContent=""}:function(){this.textContent=F}):this.node().textContent},pe.html=function(F){return arguments.length?this.each(typeof F=="function"?function(){var $=F.apply(this,arguments);this.innerHTML=$??""}:F==null?function(){this.innerHTML=""}:function(){this.innerHTML=F}):this.node().innerHTML},pe.append=function(F){return F=be(F),this.select(function(){return this.appendChild(F.apply(this,arguments))})},pe.insert=function(F,$){return F=be(F),$=ge($),this.select(function(){return this.insertBefore(F.apply(this,arguments),$.apply(this,arguments)||null)})},pe.remove=function(){return this.each(Ie)},pe.data=function(F,$){var ie,de,xe=-1,Le=this.length;if(!arguments.length){for(F=new Array(Le=(ie=this[0]).length);++xe<Le;)(de=ie[xe])&&(F[xe]=de.__data__);return F}function Ne($e,lt){var pt,Et,Ct,St=$e.length,Ft=lt.length,Lt=Math.min(St,Ft),tn=new Array(Ft),Zt=new Array(Ft),Ht=new Array(St);if($){var dn,vn=new m,zn=new Array(St);for(pt=-1;++pt<St;)(Et=$e[pt])&&(vn.has(dn=$.call(Et,Et.__data__,pt))?Ht[pt]=Et:vn.set(dn,Et),zn[pt]=dn);for(pt=-1;++pt<Ft;)(Et=vn.get(dn=$.call(lt,Ct=lt[pt],pt)))?Et!==!0&&(tn[pt]=Et,Et.__data__=Ct):Zt[pt]=Fe(Ct),vn.set(dn,!0);for(pt=-1;++pt<St;)pt in zn&&vn.get(zn[pt])!==!0&&(Ht[pt]=$e[pt])}else{for(pt=-1;++pt<Lt;)Et=$e[pt],Ct=lt[pt],Et?(Et.__data__=Ct,tn[pt]=Et):Zt[pt]=Fe(Ct);for(;pt<Ft;++pt)Zt[pt]=Fe(lt[pt]);for(;pt<St;++pt)Ht[pt]=$e[pt]}Zt.update=tn,Zt.parentNode=tn.parentNode=Ht.parentNode=$e.parentNode,Ue.push(Zt),qe.push(tn),Ye.push(Ht)}var Ue=Ce([]),qe=ne([]),Ye=ne([]);if(typeof F=="function")for(;++xe<Le;)Ne(ie=this[xe],F.call(ie,ie.parentNode.__data__,xe));else for(;++xe<Le;)Ne(ie=this[xe],F);return qe.enter=function(){return Ue},qe.exit=function(){return Ye},qe},pe.datum=function(F){return arguments.length?this.property("__data__",F):this.property("__data__")},pe.filter=function(F){var $,ie,de,xe=[];typeof F!="function"&&(F=ce(F));for(var Le=0,Ne=this.length;Le<Ne;Le++){xe.push($=[]),$.parentNode=(ie=this[Le]).parentNode;for(var Ue=0,qe=ie.length;Ue<qe;Ue++)(de=ie[Ue])&&F.call(de,de.__data__,Ue,Le)&&$.push(de)}return ne(xe)},pe.order=function(){for(var F=-1,$=this.length;++F<$;)for(var ie,de=this[F],xe=de.length-1,Le=de[xe];--xe>=0;)(ie=de[xe])&&(Le&&Le!==ie.nextSibling&&Le.parentNode.insertBefore(ie,Le),Le=ie);return this},pe.sort=function(F){F=we.apply(this,arguments);for(var $=-1,ie=this.length;++$<ie;)this[$].sort(F);return this.order()},pe.each=function(F){return ye(this,function($,ie,de){F.call($,$.__data__,ie,de)})},pe.call=function(F){var $=b(arguments);return F.apply($[0]=this,$),this},pe.empty=function(){return!this.node()},pe.node=function(){for(var F=0,$=this.length;F<$;F++)for(var ie=this[F],de=0,xe=ie.length;de<xe;de++){var Le=ie[de];if(Le)return Le}return null},pe.size=function(){var F=0;return ye(this,function(){++F}),F};var Re=[];function ze(F,$,ie){var de="__on"+F,xe=F.indexOf("."),Le=Ge;xe>0&&(F=F.slice(0,xe));var Ne=He.get(F);function Ue(){var qe=this[de];qe&&(this.removeEventListener(F,qe,qe.$),delete this[de])}return Ne&&(F=Ne,Le=Je),xe?$?function(){var qe=Le($,b(arguments));Ue.call(this),this.addEventListener(F,this[de]=qe,qe.$=ie),qe._=$}:Ue:$?V:function(){var qe,Ye=new RegExp("^__on([^.]+)"+l.requote(F)+"$");for(var $e in this)if(qe=$e.match(Ye)){var lt=this[$e];this.removeEventListener(qe[1],lt,lt.$),delete this[$e]}}}l.selection.enter=Ce,l.selection.enter.prototype=Re,Re.append=pe.append,Re.empty=pe.empty,Re.node=pe.node,Re.call=pe.call,Re.size=pe.size,Re.select=function(F){for(var $,ie,de,xe,Le,Ne=[],Ue=-1,qe=this.length;++Ue<qe;){de=(xe=this[Ue]).update,Ne.push($=[]),$.parentNode=xe.parentNode;for(var Ye=-1,$e=xe.length;++Ye<$e;)(Le=xe[Ye])?($.push(de[Ye]=ie=F.call(xe.parentNode,Le.__data__,Ye,Ue)),ie.__data__=Le.__data__):$.push(null)}return ne(Ne)},Re.insert=function(F,$){var ie,de,xe;return arguments.length<2&&(ie=this,$=function(Le,Ne,Ue){var qe,Ye=ie[Ue].update,$e=Ye.length;for(Ue!=xe&&(xe=Ue,de=0),Ne>=de&&(de=Ne+1);!(qe=Ye[de])&&++de<$e;);return qe}),pe.insert.call(this,F,$)},l.select=function(F){var $;return typeof F=="string"?($=[re(F,d)]).parentNode=d.documentElement:($=[F]).parentNode=s(F),ne([$])},l.selectAll=function(F){var $;return typeof F=="string"?($=b(ae(F,d))).parentNode=d.documentElement:($=b(F)).parentNode=null,ne([$])},pe.on=function(F,$,ie){var de=arguments.length;if(de<3){if(typeof F!="string"){for(ie in de<2&&($=!1),F)this.each(ze(ie,F[ie],$));return this}if(de<2)return(de=this.node()["__on"+F])&&de._;ie=!1}return this.each(ze(F,$,ie))};var He=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ge(F,$){return function(ie){var de=l.event;l.event=ie,$[0]=this.__data__;try{F.apply(this,$)}finally{l.event=de}}}function Je(F,$){var ie=Ge(F,$);return function(de){var xe=this,Le=de.relatedTarget;Le&&(Le===xe||8&Le.compareDocumentPosition(xe))||ie.call(xe,de)}}d&&He.forEach(function(F){"on"+F in d&&He.remove(F)});var ot,Qe=0;function vt(F){var $=".dragsuppress-"+ ++Qe,ie="click"+$,de=l.select(t(F)).on("touchmove"+$,K).on("dragstart"+$,K).on("selectstart"+$,K);if(ot==null&&(ot=!("onselectstart"in F)&&N(F.style,"userSelect")),ot){var xe=s(F).style,Le=xe[ot];xe[ot]="none"}return function(Ne){if(de.on($,null),ot&&(xe[ot]=Le),Ne){var Ue=function(){de.on(ie,null)};de.on(ie,function(){K(),Ue()},!0),setTimeout(Ue,0)}}}l.mouse=function(F){return mt(F,J())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function mt(F,$){$.changedTouches&&($=$.changedTouches[0]);var ie=F.ownerSVGElement||F;if(ie.createSVGPoint){var de=ie.createSVGPoint();if(xt<0){var xe=t(F);if(xe.scrollX||xe.scrollY){var Le=(ie=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(Le.f||Le.e),ie.remove()}}return xt?(de.x=$.pageX,de.y=$.pageY):(de.x=$.clientX,de.y=$.clientY),[(de=de.matrixTransform(F.getScreenCTM().inverse())).x,de.y]}var Ne=F.getBoundingClientRect();return[$.clientX-Ne.left-F.clientLeft,$.clientY-Ne.top-F.clientTop]}function rt(){return l.event.changedTouches[0].identifier}l.touch=function(F,$,ie){if(arguments.length<3&&(ie=$,$=J().changedTouches),$){for(var de,xe=0,Le=$.length;xe<Le;++xe)if((de=$[xe]).identifier===ie)return mt(F,de)}},l.behavior.drag=function(){var F=Y(xe,"drag","dragstart","dragend"),$=null,ie=Le(V,l.mouse,t,"mousemove","mouseup"),de=Le(rt,l.touch,O,"touchmove","touchend");function xe(){this.on("mousedown.drag",ie).on("touchstart.drag",de)}function Le(Ne,Ue,qe,Ye,$e){return function(){var lt,pt=this,Et=l.event.target.correspondingElement||l.event.target,Ct=pt.parentNode,St=F.of(pt,arguments),Ft=0,Lt=Ne(),tn=".drag"+(Lt==null?"":"-"+Lt),Zt=l.select(qe(Et)).on(Ye+tn,function(){var vn,zn,Rn=Ue(Ct,Lt);Rn&&(vn=Rn[0]-dn[0],zn=Rn[1]-dn[1],Ft|=vn|zn,dn=Rn,St({type:"drag",x:Rn[0]+lt[0],y:Rn[1]+lt[1],dx:vn,dy:zn}))}).on($e+tn,function(){Ue(Ct,Lt)&&(Zt.on(Ye+tn,null).on($e+tn,null),Ht(Ft),St({type:"dragend"}))}),Ht=vt(Et),dn=Ue(Ct,Lt);lt=$?[(lt=$.apply(pt,arguments)).x-dn[0],lt.y-dn[1]]:[0,0],St({type:"dragstart"})}}return xe.origin=function(Ne){return arguments.length?($=Ne,xe):$},l.rebind(xe,F,"on")},l.touches=function(F,$){return arguments.length<2&&($=J().touches),$?b($).map(function(ie){var de=mt(F,ie);return de.identifier=ie.identifier,de}):[]};var it=1e-6,Tt=it*it,Mt=Math.PI,Pt=2*Mt,kt=Pt-it,Ze=Mt/2,Xe=Mt/180,Ve=180/Mt;function We(F){return F>1?Ze:F<-1?-Ze:Math.asin(F)}function at(F){return((F=Math.exp(F))+1/F)/2}var et=Math.SQRT2;l.interpolateZoom=function(F,$){var ie,de,xe=F[0],Le=F[1],Ne=F[2],Ue=$[0],qe=$[1],Ye=$[2],$e=Ue-xe,lt=qe-Le,pt=$e*$e+lt*lt;if(pt<Tt)de=Math.log(Ye/Ne)/et,ie=function(tn){return[xe+tn*$e,Le+tn*lt,Ne*Math.exp(et*tn*de)]};else{var Et=Math.sqrt(pt),Ct=(Ye*Ye-Ne*Ne+4*pt)/(2*Ne*2*Et),St=(Ye*Ye-Ne*Ne-4*pt)/(2*Ye*2*Et),Ft=Math.log(Math.sqrt(Ct*Ct+1)-Ct),Lt=Math.log(Math.sqrt(St*St+1)-St);de=(Lt-Ft)/et,ie=function(tn){var Zt,Ht=tn*de,dn=at(Ft),vn=Ne/(2*Et)*(dn*(Zt=et*Ht+Ft,((Zt=Math.exp(2*Zt))-1)/(Zt+1))-function(zn){return((zn=Math.exp(zn))-1/zn)/2}(Ft));return[xe+vn*$e,Le+vn*lt,Ne*dn/at(et*Ht+Ft)]}}return ie.duration=1e3*de,ie},l.behavior.zoom=function(){var F,$,ie,de,xe,Le,Ne,Ue,qe,Ye={x:0,y:0,k:1},$e=[960,500],lt=nt,pt=250,Et=0,Ct="mousedown.zoom",St="mousemove.zoom",Ft="mouseup.zoom",Lt="touchstart.zoom",tn=Y(Zt,"zoomstart","zoom","zoomend");function Zt(Nn){Nn.on(Ct,ar).on(Be+".zoom",mr).on("dblclick.zoom",Lr).on(Lt,fr)}function Ht(Nn){return[(Nn[0]-Ye.x)/Ye.k,(Nn[1]-Ye.y)/Ye.k]}function dn(Nn){Ye.k=Math.max(lt[0],Math.min(lt[1],Nn))}function vn(Nn,ir){ir=function(hr){return[hr[0]*Ye.k+Ye.x,hr[1]*Ye.k+Ye.y]}(ir),Ye.x+=Nn[0]-ir[0],Ye.y+=Nn[1]-ir[1]}function zn(Nn,ir,hr,yr){Nn.__chart__={x:Ye.x,y:Ye.y,k:Ye.k},dn(Math.pow(2,yr)),vn($=ir,hr),Nn=l.select(Nn),pt>0&&(Nn=Nn.transition().duration(pt)),Nn.call(Zt.event)}function Rn(){Ne&&Ne.domain(Le.range().map(function(Nn){return(Nn-Ye.x)/Ye.k}).map(Le.invert)),qe&&qe.domain(Ue.range().map(function(Nn){return(Nn-Ye.y)/Ye.k}).map(Ue.invert))}function Vn(Nn){Et++||Nn({type:"zoomstart"})}function Xn(Nn){Rn(),Nn({type:"zoom",scale:Ye.k,translate:[Ye.x,Ye.y]})}function or(Nn){--Et||(Nn({type:"zoomend"}),$=null)}function ar(){var Nn=this,ir=tn.of(Nn,arguments),hr=0,yr=l.select(t(Nn)).on(St,function(){hr=1,vn(l.mouse(Nn),Mr),Xn(ir)}).on(Ft,function(){yr.on(St,null).on(Ft,null),Ir(hr),or(ir)}),Mr=Ht(l.mouse(Nn)),Ir=vt(Nn);Wi.call(Nn),Vn(ir)}function fr(){var Nn,ir=this,hr=tn.of(ir,arguments),yr={},Mr=0,Ir=".zoom-"+l.event.changedTouches[0].identifier,Br="touchmove"+Ir,Zr="touchend"+Ir,oi=[],si=l.select(ir),Yr=vt(ir);function wi(){var Ur=l.touches(ir);return Nn=Ye.k,Ur.forEach(function(Fr){Fr.identifier in yr&&(yr[Fr.identifier]=Ht(Fr))}),Ur}function Hi(){var Ur=l.event.target;l.select(Ur).on(Br,Li).on(Zr,Ri),oi.push(Ur);for(var Fr=l.event.changedTouches,li=0,ti=Fr.length;li<ti;++li)yr[Fr[li].identifier]=null;var fi=wi(),sa=Date.now();if(fi.length===1){if(sa-xe<500){var mi=fi[0];zn(ir,mi,yr[mi.identifier],Math.floor(Math.log(Ye.k)/Math.LN2)+1),K()}xe=sa}else if(fi.length>1){mi=fi[0];var Wr=fi[1],es=mi[0]-Wr[0],ga=mi[1]-Wr[1];Mr=es*es+ga*ga}}function Li(){var Ur,Fr,li,ti,fi=l.touches(ir);Wi.call(ir);for(var sa=0,mi=fi.length;sa<mi;++sa,ti=null)if(li=fi[sa],ti=yr[li.identifier]){if(Fr)break;Ur=li,Fr=ti}if(ti){var Wr=(Wr=li[0]-Ur[0])*Wr+(Wr=li[1]-Ur[1])*Wr,es=Mr&&Math.sqrt(Wr/Mr);Ur=[(Ur[0]+li[0])/2,(Ur[1]+li[1])/2],Fr=[(Fr[0]+ti[0])/2,(Fr[1]+ti[1])/2],dn(es*Nn)}xe=null,vn(Ur,Fr),Xn(hr)}function Ri(){if(l.event.touches.length){for(var Ur=l.event.changedTouches,Fr=0,li=Ur.length;Fr<li;++Fr)delete yr[Ur[Fr].identifier];for(var ti in yr)return void wi()}l.selectAll(oi).on(Ir,null),si.on(Ct,ar).on(Lt,fr),Yr(),or(hr)}Hi(),Vn(hr),si.on(Ct,null).on(Lt,Hi)}function mr(){var Nn=tn.of(this,arguments);de?clearTimeout(de):(Wi.call(this),F=Ht($=ie||l.mouse(this)),Vn(Nn)),de=setTimeout(function(){de=null,or(Nn)},50),K(),dn(Math.pow(2,.002*De())*Ye.k),vn($,F),Xn(Nn)}function Lr(){var Nn=l.mouse(this),ir=Math.log(Ye.k)/Math.LN2;zn(this,Nn,Ht(Nn),l.event.shiftKey?Math.ceil(ir)-1:Math.floor(ir)+1)}return Be||(Be="onwheel"in d?(De=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d?(De=function(){return l.event.wheelDelta},"mousewheel"):(De=function(){return-l.event.detail},"MozMousePixelScroll")),Zt.event=function(Nn){Nn.each(function(){var ir=tn.of(this,arguments),hr=Ye;Oo?l.select(this).transition().each("start.zoom",function(){Ye=this.__chart__||{x:0,y:0,k:1},Vn(ir)}).tween("zoom:zoom",function(){var yr=$e[0],Mr=$e[1],Ir=$?$[0]:yr/2,Br=$?$[1]:Mr/2,Zr=l.interpolateZoom([(Ir-Ye.x)/Ye.k,(Br-Ye.y)/Ye.k,yr/Ye.k],[(Ir-hr.x)/hr.k,(Br-hr.y)/hr.k,yr/hr.k]);return function(oi){var si=Zr(oi),Yr=yr/si[2];this.__chart__=Ye={x:Ir-si[0]*Yr,y:Br-si[1]*Yr,k:Yr},Xn(ir)}}).each("interrupt.zoom",function(){or(ir)}).each("end.zoom",function(){or(ir)}):(this.__chart__=Ye,Vn(ir),Xn(ir),or(ir))})},Zt.translate=function(Nn){return arguments.length?(Ye={x:+Nn[0],y:+Nn[1],k:Ye.k},Rn(),Zt):[Ye.x,Ye.y]},Zt.scale=function(Nn){return arguments.length?(Ye={x:Ye.x,y:Ye.y,k:null},dn(+Nn),Rn(),Zt):Ye.k},Zt.scaleExtent=function(Nn){return arguments.length?(lt=Nn==null?nt:[+Nn[0],+Nn[1]],Zt):lt},Zt.center=function(Nn){return arguments.length?(ie=Nn&&[+Nn[0],+Nn[1]],Zt):ie},Zt.size=function(Nn){return arguments.length?($e=Nn&&[+Nn[0],+Nn[1]],Zt):$e},Zt.duration=function(Nn){return arguments.length?(pt=+Nn,Zt):pt},Zt.x=function(Nn){return arguments.length?(Ne=Nn,Le=Nn.copy(),Ye={x:0,y:0,k:1},Zt):Ne},Zt.y=function(Nn){return arguments.length?(qe=Nn,Ue=Nn.copy(),Ye={x:0,y:0,k:1},Zt):qe},l.rebind(Zt,tn,"on")};var De,Be,nt=[0,1/0];function tt(){}function dt(F,$,ie){return this instanceof dt?(this.h=+F,this.s=+$,void(this.l=+ie)):arguments.length<2?F instanceof dt?new dt(F.h,F.s,F.l):sn(""+F,hn,dt):new dt(F,$,ie)}l.color=tt,tt.prototype.toString=function(){return this.rgb()+""},l.hsl=dt;var ht=dt.prototype=new tt;function gt(F,$,ie){var de,xe;function Le(Ne){return Math.round(255*function(Ue){return Ue>360?Ue-=360:Ue<0&&(Ue+=360),Ue<60?de+(xe-de)*Ue/60:Ue<180?xe:Ue<240?de+(xe-de)*(240-Ue)/60:de}(Ne))}return F=isNaN(F)?0:(F%=360)<0?F+360:F,$=isNaN($)||$<0?0:$>1?1:$,de=2*(ie=ie<0?0:ie>1?1:ie)-(xe=ie<=.5?ie*(1+$):ie+$-ie*$),new Mn(Le(F+120),Le(F),Le(F-120))}function ut(F,$,ie){return this instanceof ut?(this.h=+F,this.c=+$,void(this.l=+ie)):arguments.length<2?F instanceof ut?new ut(F.h,F.c,F.l):function(de,xe,Le){return de>0?new ut(Math.atan2(Le,xe)*Ve,Math.sqrt(xe*xe+Le*Le),de):new ut(NaN,NaN,de)}(F instanceof ft?F.l:(F=bn((F=l.rgb(F)).r,F.g,F.b)).l,F.a,F.b):new ut(F,$,ie)}ht.brighter=function(F){return F=Math.pow(.7,arguments.length?F:1),new dt(this.h,this.s,this.l/F)},ht.darker=function(F){return F=Math.pow(.7,arguments.length?F:1),new dt(this.h,this.s,F*this.l)},ht.rgb=function(){return gt(this.h,this.s,this.l)},l.hcl=ut;var wt=ut.prototype=new tt;function ct(F,$,ie){return isNaN(F)&&(F=0),isNaN($)&&($=0),new ft(ie,Math.cos(F*=Xe)*$,Math.sin(F)*$)}function ft(F,$,ie){return this instanceof ft?(this.l=+F,this.a=+$,void(this.b=+ie)):arguments.length<2?F instanceof ft?new ft(F.l,F.a,F.b):F instanceof ut?ct(F.h,F.c,F.l):bn((F=Mn(F)).r,F.g,F.b):new ft(F,$,ie)}wt.brighter=function(F){return new ut(this.h,this.c,Math.min(100,this.l+bt*(arguments.length?F:1)))},wt.darker=function(F){return new ut(this.h,this.c,Math.max(0,this.l-bt*(arguments.length?F:1)))},wt.rgb=function(){return ct(this.h,this.c,this.l).rgb()},l.lab=ft;var bt=18,It=.95047,Dt=1,Nt=1.08883,Qt=ft.prototype=new tt;function jt(F,$,ie){var de=(F+16)/116,xe=de+$/500,Le=de-ie/200;return new Mn(gn(3.2404542*(xe=Ut(xe)*It)-1.5371385*(de=Ut(de)*Dt)-.4985314*(Le=Ut(Le)*Nt)),gn(-.969266*xe+1.8760108*de+.041556*Le),gn(.0556434*xe-.2040259*de+1.0572252*Le))}function Ut(F){return F>.206893034?F*F*F:(F-.13793103448275862)/7.787037}function Xt(F){return F>.008856?Math.pow(F,.3333333333333333):7.787037*F+.13793103448275862}function gn(F){return Math.round(255*(F<=.00304?12.92*F:1.055*Math.pow(F,.4166666666666667)-.055))}function Mn(F,$,ie){return this instanceof Mn?(this.r=~~F,this.g=~~$,void(this.b=~~ie)):arguments.length<2?F instanceof Mn?new Mn(F.r,F.g,F.b):sn(""+F,Mn,gt):new Mn(F,$,ie)}function cn(F){return new Mn(F>>16,F>>8&255,255&F)}function qt(F){return cn(F)+""}Qt.brighter=function(F){return new ft(Math.min(100,this.l+bt*(arguments.length?F:1)),this.a,this.b)},Qt.darker=function(F){return new ft(Math.max(0,this.l-bt*(arguments.length?F:1)),this.a,this.b)},Qt.rgb=function(){return jt(this.l,this.a,this.b)},l.rgb=Mn;var nn=Mn.prototype=new tt;function Kt(F){return F<16?"0"+Math.max(0,F).toString(16):Math.min(255,F).toString(16)}function sn(F,$,ie){var de,xe,Le,Ne=0,Ue=0,qe=0;if(de=/([a-z]+)\((.*)\)/.exec(F=F.toLowerCase()))switch(xe=de[2].split(","),de[1]){case"hsl":return ie(parseFloat(xe[0]),parseFloat(xe[1])/100,parseFloat(xe[2])/100);case"rgb":return $(Sn(xe[0]),Sn(xe[1]),Sn(xe[2]))}return(Le=pn.get(F))?$(Le.r,Le.g,Le.b):(F==null||F.charAt(0)!=="#"||isNaN(Le=parseInt(F.slice(1),16))||(F.length===4?(Ne=(3840&Le)>>4,Ne|=Ne>>4,Ue=240&Le,Ue|=Ue>>4,qe=15&Le,qe|=qe<<4):F.length===7&&(Ne=(16711680&Le)>>16,Ue=(65280&Le)>>8,qe=255&Le)),$(Ne,Ue,qe))}function hn(F,$,ie){var de,xe,Le=Math.min(F/=255,$/=255,ie/=255),Ne=Math.max(F,$,ie),Ue=Ne-Le,qe=(Ne+Le)/2;return Ue?(xe=qe<.5?Ue/(Ne+Le):Ue/(2-Ne-Le),de=F==Ne?($-ie)/Ue+($<ie?6:0):$==Ne?(ie-F)/Ue+2:(F-$)/Ue+4,de*=60):(de=NaN,xe=qe>0&&qe<1?0:de),new dt(de,xe,qe)}function bn(F,$,ie){var de=Xt((.4124564*(F=yn(F))+.3575761*($=yn($))+.1804375*(ie=yn(ie)))/It),xe=Xt((.2126729*F+.7151522*$+.072175*ie)/Dt);return ft(116*xe-16,500*(de-xe),200*(xe-Xt((.0193339*F+.119192*$+.9503041*ie)/Nt)))}function yn(F){return(F/=255)<=.04045?F/12.92:Math.pow((F+.055)/1.055,2.4)}function Sn(F){var $=parseFloat(F);return F.charAt(F.length-1)==="%"?Math.round(2.55*$):$}nn.brighter=function(F){F=Math.pow(.7,arguments.length?F:1);var $=this.r,ie=this.g,de=this.b,xe=30;return $||ie||de?($&&$<xe&&($=xe),ie&&ie<xe&&(ie=xe),de&&de<xe&&(de=xe),new Mn(Math.min(255,$/F),Math.min(255,ie/F),Math.min(255,de/F))):new Mn(xe,xe,xe)},nn.darker=function(F){return new Mn((F=Math.pow(.7,arguments.length?F:1))*this.r,F*this.g,F*this.b)},nn.hsl=function(){return hn(this.r,this.g,this.b)},nn.toString=function(){return"#"+Kt(this.r)+Kt(this.g)+Kt(this.b)};var pn=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Cn(F){return typeof F=="function"?F:function(){return F}}function Hn(F){return function($,ie,de){return arguments.length===2&&typeof ie=="function"&&(de=ie,ie=null),Qn($,ie,F,de)}}function Qn(F,$,ie,de){var xe={},Le=l.dispatch("beforesend","progress","load","error"),Ne={},Ue=new XMLHttpRequest,qe=null;function Ye(){var $e,lt=Ue.status;if(!lt&&function(pt){var Et=pt.responseType;return Et&&Et!=="text"?pt.response:pt.responseText}(Ue)||lt>=200&&lt<300||lt===304){try{$e=ie.call(xe,Ue)}catch(pt){return void Le.error.call(xe,pt)}Le.load.call(xe,$e)}else Le.error.call(xe,Ue)}return self.XDomainRequest&&!("withCredentials"in Ue)&&/^(http(s)?:)?\/\//.test(F)&&(Ue=new XDomainRequest),"onload"in Ue?Ue.onload=Ue.onerror=Ye:Ue.onreadystatechange=function(){Ue.readyState>3&&Ye()},Ue.onprogress=function($e){var lt=l.event;l.event=$e;try{Le.progress.call(xe,Ue)}finally{l.event=lt}},xe.header=function($e,lt){return $e=($e+"").toLowerCase(),arguments.length<2?Ne[$e]:(lt==null?delete Ne[$e]:Ne[$e]=lt+"",xe)},xe.mimeType=function($e){return arguments.length?($=$e==null?null:$e+"",xe):$},xe.responseType=function($e){return arguments.length?(qe=$e,xe):qe},xe.response=function($e){return ie=$e,xe},["get","post"].forEach(function($e){xe[$e]=function(){return xe.send.apply(xe,[$e].concat(b(arguments)))}}),xe.send=function($e,lt,pt){if(arguments.length===2&&typeof lt=="function"&&(pt=lt,lt=null),Ue.open($e,F,!0),$==null||"accept"in Ne||(Ne.accept=$+",*/*"),Ue.setRequestHeader)for(var Et in Ne)Ue.setRequestHeader(Et,Ne[Et]);return $!=null&&Ue.overrideMimeType&&Ue.overrideMimeType($),qe!=null&&(Ue.responseType=qe),pt!=null&&xe.on("error",pt).on("load",function(Ct){pt(null,Ct)}),Le.beforesend.call(xe,Ue),Ue.send(lt??null),xe},xe.abort=function(){return Ue.abort(),xe},l.rebind(xe,Le,"on"),de==null?xe:xe.get(function($e){return $e.length===1?function(lt,pt){$e(lt==null?pt:null)}:$e}(de))}pn.forEach(function(F,$){pn.set(F,cn($))}),l.functor=Cn,l.xhr=Hn(O),l.dsv=function(F,$){var ie=new RegExp('["'+F+`
]`),de=F.charCodeAt(0);function xe(Ye,$e,lt){arguments.length<3&&(lt=$e,$e=null);var pt=Qn(Ye,$,$e==null?Le:Ne($e),lt);return pt.row=function(Et){return arguments.length?pt.response(($e=Et)==null?Le:Ne(Et)):$e},pt}function Le(Ye){return xe.parse(Ye.responseText)}function Ne(Ye){return function($e){return xe.parse($e.responseText,Ye)}}function Ue(Ye){return Ye.map(qe).join(F)}function qe(Ye){return ie.test(Ye)?'"'+Ye.replace(/\"/g,'""')+'"':Ye}return xe.parse=function(Ye,$e){var lt;return xe.parseRows(Ye,function(pt,Et){if(lt)return lt(pt,Et-1);var Ct=function(St){for(var Ft={},Lt=pt.length,tn=0;tn<Lt;++tn)Ft[pt[tn]]=St[tn];return Ft};lt=$e?function(St,Ft){return $e(Ct(St),Ft)}:Ct})},xe.parseRows=function(Ye,$e){var lt,pt,Et={},Ct={},St=[],Ft=Ye.length,Lt=0,tn=0;function Zt(){if(Lt>=Ft)return Ct;if(pt)return pt=!1,Et;var dn=Lt;if(Ye.charCodeAt(dn)===34){for(var vn=dn;vn++<Ft;)if(Ye.charCodeAt(vn)===34){if(Ye.charCodeAt(vn+1)!==34)break;++vn}return Lt=vn+2,(zn=Ye.charCodeAt(vn+1))===13?(pt=!0,Ye.charCodeAt(vn+2)===10&&++Lt):zn===10&&(pt=!0),Ye.slice(dn+1,vn).replace(/""/g,'"')}for(;Lt<Ft;){var zn,Rn=1;if((zn=Ye.charCodeAt(Lt++))===10)pt=!0;else if(zn===13)pt=!0,Ye.charCodeAt(Lt)===10&&(++Lt,++Rn);else if(zn!==de)continue;return Ye.slice(dn,Lt-Rn)}return Ye.slice(dn)}for(;(lt=Zt())!==Ct;){for(var Ht=[];lt!==Et&&lt!==Ct;)Ht.push(lt),lt=Zt();$e&&(Ht=$e(Ht,tn++))==null||St.push(Ht)}return St},xe.format=function(Ye){if(Array.isArray(Ye[0]))return xe.formatRows(Ye);var $e=new G,lt=[];return Ye.forEach(function(pt){for(var Et in pt)$e.has(Et)||lt.push($e.add(Et))}),[lt.map(qe).join(F)].concat(Ye.map(function(pt){return lt.map(function(Et){return qe(pt[Et])}).join(F)})).join(`
`)},xe.formatRows=function(Ye){return Ye.map(Ue).join(`
`)},xe},l.csv=l.dsv(",","text/csv"),l.tsv=l.dsv("	","text/tab-separated-values");var nr,Jn,Gn,lr,Rt=this[N(this,"requestAnimationFrame")]||function(F){setTimeout(F,17)};function $t(F,$,ie){var de=arguments.length;de<2&&($=0),de<3&&(ie=Date.now());var xe={c:F,t:ie+$,n:null};return Jn?Jn.n=xe:nr=xe,Jn=xe,Gn||(lr=clearTimeout(lr),Gn=1,Rt(an)),xe}function an(){var F=fn(),$=wn()-F;$>24?(isFinite($)&&(clearTimeout(lr),lr=setTimeout(an,$)),Gn=0):(Gn=1,Rt(an))}function fn(){for(var F=Date.now(),$=nr;$;)F>=$.t&&$.c(F-$.t)&&($.c=null),$=$.n;return F}function wn(){for(var F,$=nr,ie=1/0;$;)$.c?($.t<ie&&(ie=$.t),$=(F=$).n):$=F?F.n=$.n:nr=$.n;return Jn=F,ie}function Bn(F){return F[0]}function Ln(F){return F[1]}function In(F){for(var $,ie,de,xe=F.length,Le=[0,1],Ne=2,Ue=2;Ue<xe;Ue++){for(;Ne>1&&($=F[Le[Ne-2]],ie=F[Le[Ne-1]],de=F[Ue],(ie[0]-$[0])*(de[1]-$[1])-(ie[1]-$[1])*(de[0]-$[0])<=0);)--Ne;Le[Ne++]=Ue}return Le.slice(0,Ne)}function Wn(F,$){return F[0]-$[0]||F[1]-$[1]}l.timer=function(){$t.apply(this,arguments)},l.timer.flush=function(){fn(),wn()},l.round=function(F,$){return $?Math.round(F*($=Math.pow(10,$)))/$:Math.round(F)},l.geom={},l.geom.hull=function(F){var $=Bn,ie=Ln;if(arguments.length)return de(F);function de(xe){if(xe.length<3)return[];var Le,Ne=Cn($),Ue=Cn(ie),qe=xe.length,Ye=[],$e=[];for(Le=0;Le<qe;Le++)Ye.push([+Ne.call(this,xe[Le],Le),+Ue.call(this,xe[Le],Le),Le]);for(Ye.sort(Wn),Le=0;Le<qe;Le++)$e.push([Ye[Le][0],-Ye[Le][1]]);var lt=In(Ye),pt=In($e),Et=pt[0]===lt[0],Ct=pt[pt.length-1]===lt[lt.length-1],St=[];for(Le=lt.length-1;Le>=0;--Le)St.push(xe[Ye[lt[Le]][2]]);for(Le=+Et;Le<pt.length-Ct;++Le)St.push(xe[Ye[pt[Le]][2]]);return St}return de.x=function(xe){return arguments.length?($=xe,de):$},de.y=function(xe){return arguments.length?(ie=xe,de):ie},de},l.geom.polygon=function(F){return Q(F,Vt),F};var Vt=l.geom.polygon.prototype=[];function _n(F,$,ie){return(ie[0]-$[0])*(F[1]-$[1])<(ie[1]-$[1])*(F[0]-$[0])}function At(F,$,ie,de){var xe=F[0],Le=ie[0],Ne=$[0]-xe,Ue=de[0]-Le,qe=F[1],Ye=ie[1],$e=$[1]-qe,lt=de[1]-Ye,pt=(Ue*(qe-Ye)-lt*(xe-Le))/(lt*Ne-Ue*$e);return[xe+pt*Ne,qe+pt*$e]}function Gt(F){var $=F[0],ie=F[F.length-1];return!($[0]-ie[0]||$[1]-ie[1])}Vt.area=function(){for(var F,$=-1,ie=this.length,de=this[ie-1],xe=0;++$<ie;)F=de,de=this[$],xe+=F[1]*de[0]-F[0]*de[1];return .5*xe},Vt.centroid=function(F){var $,ie,de=-1,xe=this.length,Le=0,Ne=0,Ue=this[xe-1];for(arguments.length||(F=-1/(6*this.area()));++de<xe;)$=Ue,Ue=this[de],ie=$[0]*Ue[1]-Ue[0]*$[1],Le+=($[0]+Ue[0])*ie,Ne+=($[1]+Ue[1])*ie;return[Le*F,Ne*F]},Vt.clip=function(F){for(var $,ie,de,xe,Le,Ne,Ue=Gt(F),qe=-1,Ye=this.length-Gt(this),$e=this[Ye-1];++qe<Ye;){for($=F.slice(),F.length=0,xe=this[qe],Le=$[(de=$.length-Ue)-1],ie=-1;++ie<de;)_n(Ne=$[ie],$e,xe)?(_n(Le,$e,xe)||F.push(At(Le,Ne,$e,xe)),F.push(Ne)):_n(Le,$e,xe)&&F.push(At(Le,Ne,$e,xe)),Le=Ne;Ue&&F.push(F[0]),$e=xe}return F};var Jt,mn,xn,An,ln,Yt=[],Wt=[];function on(){ai(this),this.edge=this.site=this.circle=null}function un(F){var $=Yt.pop()||new on;return $.site=F,$}function En(F){ur(F),xn.remove(F),Yt.push(F),ai(F)}function Pn(F){var $=F.circle,ie=$.x,de=$.cy,xe={x:ie,y:de},Le=F.P,Ne=F.N,Ue=[F];En(F);for(var qe=Le;qe.circle&&y(ie-qe.circle.x)<it&&y(de-qe.circle.cy)<it;)Le=qe.P,Ue.unshift(qe),En(qe),qe=Le;Ue.unshift(qe),ur(qe);for(var Ye=Ne;Ye.circle&&y(ie-Ye.circle.x)<it&&y(de-Ye.circle.cy)<it;)Ne=Ye.N,Ue.push(Ye),En(Ye),Ye=Ne;Ue.push(Ye),ur(Ye);var $e,lt=Ue.length;for($e=1;$e<lt;++$e)Ye=Ue[$e],qe=Ue[$e-1],dr(Ye.edge,qe.site,Ye.site,xe);qe=Ue[0],(Ye=Ue[lt-1]).edge=Yn(qe.site,Ye.site,null,xe),tr(qe),tr(Ye)}function Un(F){for(var $,ie,de,xe,Le=F.x,Ne=F.y,Ue=xn._;Ue;)if((de=Fn(Ue,Ne)-Le)>it)Ue=Ue.L;else{if(!((xe=Le-Kn(Ue,Ne))>it)){de>-it?($=Ue.P,ie=Ue):xe>-it?($=Ue,ie=Ue.N):$=ie=Ue;break}if(!Ue.R){$=Ue;break}Ue=Ue.R}var qe=un(F);if(xn.insert($,qe),$||ie){if($===ie)return ur($),ie=un($.site),xn.insert(qe,ie),qe.edge=ie.edge=Yn($.site,qe.site),tr($),void tr(ie);if(ie){ur($),ur(ie);var Ye=$.site,$e=Ye.x,lt=Ye.y,pt=F.x-$e,Et=F.y-lt,Ct=ie.site,St=Ct.x-$e,Ft=Ct.y-lt,Lt=2*(pt*Ft-Et*St),tn=pt*pt+Et*Et,Zt=St*St+Ft*Ft,Ht={x:(Ft*tn-Et*Zt)/Lt+$e,y:(pt*Zt-St*tn)/Lt+lt};dr(ie.edge,Ye,Ct,Ht),qe.edge=Yn(Ye,F,null,Ht),ie.edge=Yn(F,Ct,null,Ht),tr($),tr(ie)}else qe.edge=Yn($.site,qe.site)}}function Fn(F,$){var ie=F.site,de=ie.x,xe=ie.y,Le=xe-$;if(!Le)return de;var Ne=F.P;if(!Ne)return-1/0;var Ue=(ie=Ne.site).x,qe=ie.y,Ye=qe-$;if(!Ye)return Ue;var $e=Ue-de,lt=1/Le-1/Ye,pt=$e/Ye;return lt?(-pt+Math.sqrt(pt*pt-2*lt*($e*$e/(-2*Ye)-qe+Ye/2+xe-Le/2)))/lt+de:(de+Ue)/2}function Kn(F,$){var ie=F.N;if(ie)return Fn(ie,$);var de=F.site;return de.y===$?de.x:1/0}function qn(F){this.site=F,this.edges=[]}function rr(F,$){return $.angle-F.angle}function er(){ai(this),this.x=this.y=this.arc=this.site=this.cy=null}function tr(F){var $=F.P,ie=F.N;if($&&ie){var de=$.site,xe=F.site,Le=ie.site;if(de!==Le){var Ne=xe.x,Ue=xe.y,qe=de.x-Ne,Ye=de.y-Ue,$e=Le.x-Ne,lt=2*(qe*(Ft=Le.y-Ue)-Ye*$e);if(!(lt>=-Tt)){var pt=qe*qe+Ye*Ye,Et=$e*$e+Ft*Ft,Ct=(Ft*pt-Ye*Et)/lt,St=(qe*Et-$e*pt)/lt,Ft=St+Ue,Lt=Wt.pop()||new er;Lt.arc=F,Lt.site=xe,Lt.x=Ct+Ne,Lt.y=Ft+Math.sqrt(Ct*Ct+St*St),Lt.cy=Ft,F.circle=Lt;for(var tn=null,Zt=ln._;Zt;)if(Lt.y<Zt.y||Lt.y===Zt.y&&Lt.x<=Zt.x){if(!Zt.L){tn=Zt.P;break}Zt=Zt.L}else{if(!Zt.R){tn=Zt;break}Zt=Zt.R}ln.insert(tn,Lt),tn||(An=Lt)}}}}function ur(F){var $=F.circle;$&&($.P||(An=$.N),ln.remove($),Wt.push($),ai($),F.circle=null)}function cr(F,$){var ie=F.b;if(ie)return!0;var de,xe,Le=F.a,Ne=$[0][0],Ue=$[1][0],qe=$[0][1],Ye=$[1][1],$e=F.l,lt=F.r,pt=$e.x,Et=$e.y,Ct=lt.x,St=lt.y,Ft=(pt+Ct)/2,Lt=(Et+St)/2;if(St===Et){if(Ft<Ne||Ft>=Ue)return;if(pt>Ct){if(Le){if(Le.y>=Ye)return}else Le={x:Ft,y:qe};ie={x:Ft,y:Ye}}else{if(Le){if(Le.y<qe)return}else Le={x:Ft,y:Ye};ie={x:Ft,y:qe}}}else if(xe=Lt-(de=(pt-Ct)/(St-Et))*Ft,de<-1||de>1)if(pt>Ct){if(Le){if(Le.y>=Ye)return}else Le={x:(qe-xe)/de,y:qe};ie={x:(Ye-xe)/de,y:Ye}}else{if(Le){if(Le.y<qe)return}else Le={x:(Ye-xe)/de,y:Ye};ie={x:(qe-xe)/de,y:qe}}else if(Et<St){if(Le){if(Le.x>=Ue)return}else Le={x:Ne,y:de*Ne+xe};ie={x:Ue,y:de*Ue+xe}}else{if(Le){if(Le.x<Ne)return}else Le={x:Ue,y:de*Ue+xe};ie={x:Ne,y:de*Ne+xe}}return F.a=Le,F.b=ie,!0}function br(F,$){this.l=F,this.r=$,this.a=this.b=null}function Yn(F,$,ie,de){var xe=new br(F,$);return Jt.push(xe),ie&&dr(xe,F,$,ie),de&&dr(xe,$,F,de),mn[F.i].edges.push(new Sr(xe,F,$)),mn[$.i].edges.push(new Sr(xe,$,F)),xe}function dr(F,$,ie,de){F.a||F.b?F.l===ie?F.b=de:F.a=de:(F.a=de,F.l=$,F.r=ie)}function Sr(F,$,ie){var de=F.a,xe=F.b;this.edge=F,this.site=$,this.angle=ie?Math.atan2(ie.y-$.y,ie.x-$.x):F.l===$?Math.atan2(xe.x-de.x,de.y-xe.y):Math.atan2(de.x-xe.x,xe.y-de.y)}function Gr(){this._=null}function ai(F){F.U=F.C=F.L=F.R=F.P=F.N=null}function ni(F,$){var ie=$,de=$.R,xe=ie.U;xe?xe.L===ie?xe.L=de:xe.R=de:F._=de,de.U=xe,ie.U=de,ie.R=de.L,ie.R&&(ie.R.U=ie),de.L=ie}function ci(F,$){var ie=$,de=$.L,xe=ie.U;xe?xe.L===ie?xe.L=de:xe.R=de:F._=de,de.U=xe,ie.U=de,ie.L=de.R,ie.L&&(ie.L.U=ie),de.R=ie}function Kr(F){for(;F.L;)F=F.L;return F}function bi(F,$){var ie,de,xe,Le=F.sort(qa).pop();for(Jt=[],mn=new Array(F.length),xn=new Gr,ln=new Gr;;)if(xe=An,Le&&(!xe||Le.y<xe.y||Le.y===xe.y&&Le.x<xe.x))Le.x===ie&&Le.y===de||(mn[Le.i]=new qn(Le),Un(Le),ie=Le.x,de=Le.y),Le=F.pop();else{if(!xe)break;Pn(xe.arc)}$&&(function(Ue){for(var qe,Ye,$e,lt,pt,Et=Jt,Ct=(Ye=Ue[0][0],$e=Ue[0][1],lt=Ue[1][0],pt=Ue[1][1],function(Ft){var Lt,tn=Ft.a,Zt=Ft.b,Ht=tn.x,dn=tn.y,vn=0,zn=1,Rn=Zt.x-Ht,Vn=Zt.y-dn;if(Lt=Ye-Ht,Rn||!(Lt>0)){if(Lt/=Rn,Rn<0){if(Lt<vn)return;Lt<zn&&(zn=Lt)}else if(Rn>0){if(Lt>zn)return;Lt>vn&&(vn=Lt)}if(Lt=lt-Ht,Rn||!(Lt<0)){if(Lt/=Rn,Rn<0){if(Lt>zn)return;Lt>vn&&(vn=Lt)}else if(Rn>0){if(Lt<vn)return;Lt<zn&&(zn=Lt)}if(Lt=$e-dn,Vn||!(Lt>0)){if(Lt/=Vn,Vn<0){if(Lt<vn)return;Lt<zn&&(zn=Lt)}else if(Vn>0){if(Lt>zn)return;Lt>vn&&(vn=Lt)}if(Lt=pt-dn,Vn||!(Lt<0)){if(Lt/=Vn,Vn<0){if(Lt>zn)return;Lt>vn&&(vn=Lt)}else if(Vn>0){if(Lt<vn)return;Lt<zn&&(zn=Lt)}return vn>0&&(Ft.a={x:Ht+vn*Rn,y:dn+vn*Vn}),zn<1&&(Ft.b={x:Ht+zn*Rn,y:dn+zn*Vn}),Ft}}}}}),St=Et.length;St--;)(!cr(qe=Et[St],Ue)||!Ct(qe)||y(qe.a.x-qe.b.x)<it&&y(qe.a.y-qe.b.y)<it)&&(qe.a=qe.b=null,Et.splice(St,1))}($),function(Ue){for(var qe,Ye,$e,lt,pt,Et,Ct,St,Ft,Lt,tn=Ue[0][0],Zt=Ue[1][0],Ht=Ue[0][1],dn=Ue[1][1],vn=mn,zn=vn.length;zn--;)if((pt=vn[zn])&&pt.prepare())for(St=(Ct=pt.edges).length,Et=0;Et<St;)$e=(Lt=Ct[Et].end()).x,lt=Lt.y,qe=(Ft=Ct[++Et%St].start()).x,Ye=Ft.y,(y($e-qe)>it||y(lt-Ye)>it)&&(Ct.splice(Et,0,new Sr((Rn=pt.site,Vn=Lt,Xn=y($e-tn)<it&&dn-lt>it?{x:tn,y:y(qe-tn)<it?Ye:dn}:y(lt-dn)<it&&Zt-$e>it?{x:y(Ye-dn)<it?qe:Zt,y:dn}:y($e-Zt)<it&&lt-Ht>it?{x:Zt,y:y(qe-Zt)<it?Ye:Ht}:y(lt-Ht)<it&&$e-tn>it?{x:y(Ye-Ht)<it?qe:tn,y:Ht}:null,or=void 0,(or=new br(Rn,null)).a=Vn,or.b=Xn,Jt.push(or),or),pt.site,null)),++St);var Rn,Vn,Xn,or}($));var Ne={cells:mn,edges:Jt};return xn=ln=Jt=mn=null,Ne}function qa(F,$){return $.y-F.y||$.x-F.x}qn.prototype.prepare=function(){for(var F,$=this.edges,ie=$.length;ie--;)(F=$[ie].edge).b&&F.a||$.splice(ie,1);return $.sort(rr),$.length},Sr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Gr.prototype={insert:function(F,$){var ie,de,xe;if(F){if($.P=F,$.N=F.N,F.N&&(F.N.P=$),F.N=$,F.R){for(F=F.R;F.L;)F=F.L;F.L=$}else F.R=$;ie=F}else this._?(F=Kr(this._),$.P=null,$.N=F,F.P=F.L=$,ie=F):($.P=$.N=null,this._=$,ie=null);for($.L=$.R=null,$.U=ie,$.C=!0,F=$;ie&&ie.C;)ie===(de=ie.U).L?(xe=de.R)&&xe.C?(ie.C=xe.C=!1,de.C=!0,F=de):(F===ie.R&&(ni(this,ie),ie=(F=ie).U),ie.C=!1,de.C=!0,ci(this,de)):(xe=de.L)&&xe.C?(ie.C=xe.C=!1,de.C=!0,F=de):(F===ie.L&&(ci(this,ie),ie=(F=ie).U),ie.C=!1,de.C=!0,ni(this,de)),ie=F.U;this._.C=!1},remove:function(F){F.N&&(F.N.P=F.P),F.P&&(F.P.N=F.N),F.N=F.P=null;var $,ie,de,xe=F.U,Le=F.L,Ne=F.R;if(ie=Le?Ne?Kr(Ne):Le:Ne,xe?xe.L===F?xe.L=ie:xe.R=ie:this._=ie,Le&&Ne?(de=ie.C,ie.C=F.C,ie.L=Le,Le.U=ie,ie!==Ne?(xe=ie.U,ie.U=F.U,F=ie.R,xe.L=F,ie.R=Ne,Ne.U=ie):(ie.U=xe,xe=ie,F=ie.R)):(de=F.C,F=ie),F&&(F.U=xe),!de)if(F&&F.C)F.C=!1;else{do{if(F===this._)break;if(F===xe.L){if(($=xe.R).C&&($.C=!1,xe.C=!0,ni(this,xe),$=xe.R),$.L&&$.L.C||$.R&&$.R.C){$.R&&$.R.C||($.L.C=!1,$.C=!0,ci(this,$),$=xe.R),$.C=xe.C,xe.C=$.R.C=!1,ni(this,xe),F=this._;break}}else if(($=xe.L).C&&($.C=!1,xe.C=!0,ci(this,xe),$=xe.L),$.L&&$.L.C||$.R&&$.R.C){$.L&&$.L.C||($.R.C=!1,$.C=!0,ni(this,$),$=xe.L),$.C=xe.C,xe.C=$.L.C=!1,ci(this,xe),F=this._;break}$.C=!0,F=xe,xe=xe.U}while(!F.C);F&&(F.C=!1)}}},l.geom.voronoi=function(F){var $=Bn,ie=Ln,de=$,xe=ie,Le=ha;if(F)return Ne(F);function Ne(qe){var Ye=new Array(qe.length),$e=Le[0][0],lt=Le[0][1],pt=Le[1][0],Et=Le[1][1];return bi(Ue(qe),Le).cells.forEach(function(Ct,St){var Ft=Ct.edges,Lt=Ct.site;(Ye[St]=Ft.length?Ft.map(function(tn){var Zt=tn.start();return[Zt.x,Zt.y]}):Lt.x>=$e&&Lt.x<=pt&&Lt.y>=lt&&Lt.y<=Et?[[$e,Et],[pt,Et],[pt,lt],[$e,lt]]:[]).point=qe[St]}),Ye}function Ue(qe){return qe.map(function(Ye,$e){return{x:Math.round(de(Ye,$e)/it)*it,y:Math.round(xe(Ye,$e)/it)*it,i:$e}})}return Ne.links=function(qe){return bi(Ue(qe)).edges.filter(function(Ye){return Ye.l&&Ye.r}).map(function(Ye){return{source:qe[Ye.l.i],target:qe[Ye.r.i]}})},Ne.triangles=function(qe){var Ye=[];return bi(Ue(qe)).cells.forEach(function($e,lt){for(var pt,Et,Ct,St,Ft=$e.site,Lt=$e.edges.sort(rr),tn=-1,Zt=Lt.length,Ht=Lt[Zt-1].edge,dn=Ht.l===Ft?Ht.r:Ht.l;++tn<Zt;)pt=dn,dn=(Ht=Lt[tn].edge).l===Ft?Ht.r:Ht.l,lt<pt.i&&lt<dn.i&&(Ct=pt,St=dn,((Et=Ft).x-St.x)*(Ct.y-Et.y)-(Et.x-Ct.x)*(St.y-Et.y)<0)&&Ye.push([qe[lt],qe[pt.i],qe[dn.i]])}),Ye},Ne.x=function(qe){return arguments.length?(de=Cn($=qe),Ne):$},Ne.y=function(qe){return arguments.length?(xe=Cn(ie=qe),Ne):ie},Ne.clipExtent=function(qe){return arguments.length?(Le=qe??ha,Ne):Le===ha?null:Le},Ne.size=function(qe){return arguments.length?Ne.clipExtent(qe&&[[0,0],qe]):Le===ha?null:Le&&Le[1]},Ne};var ha=[[-1e6,-1e6],[1e6,1e6]];function to(F){return F.x}function Hs(F){return F.y}function Fo(F,$,ie,de,xe,Le){if(!F($,ie,de,xe,Le)){var Ne=.5*(ie+xe),Ue=.5*(de+Le),qe=$.nodes;qe[0]&&Fo(F,qe[0],ie,de,Ne,Ue),qe[1]&&Fo(F,qe[1],Ne,de,xe,Ue),qe[2]&&Fo(F,qe[2],ie,Ue,Ne,Le),qe[3]&&Fo(F,qe[3],Ne,Ue,xe,Le)}}function ps(F,$){F=l.rgb(F),$=l.rgb($);var ie=F.r,de=F.g,xe=F.b,Le=$.r-ie,Ne=$.g-de,Ue=$.b-xe;return function(qe){return"#"+Kt(Math.round(ie+Le*qe))+Kt(Math.round(de+Ne*qe))+Kt(Math.round(xe+Ue*qe))}}function qs(F,$){var ie,de={},xe={};for(ie in F)ie in $?de[ie]=Za(F[ie],$[ie]):xe[ie]=F[ie];for(ie in $)ie in F||(xe[ie]=$[ie]);return function(Le){for(ie in de)xe[ie]=de[ie](Le);return xe}}function Ga(F,$){return F=+F,$=+$,function(ie){return F*(1-ie)+$*ie}}function rl(F,$){var ie,de,xe,Le=Bo.lastIndex=No.lastIndex=0,Ne=-1,Ue=[],qe=[];for(F+="",$+="";(ie=Bo.exec(F))&&(de=No.exec($));)(xe=de.index)>Le&&(xe=$.slice(Le,xe),Ue[Ne]?Ue[Ne]+=xe:Ue[++Ne]=xe),(ie=ie[0])===(de=de[0])?Ue[Ne]?Ue[Ne]+=de:Ue[++Ne]=de:(Ue[++Ne]=null,qe.push({i:Ne,x:Ga(ie,de)})),Le=No.lastIndex;return Le<$.length&&(xe=$.slice(Le),Ue[Ne]?Ue[Ne]+=xe:Ue[++Ne]=xe),Ue.length<2?qe[0]?($=qe[0].x,function(Ye){return $(Ye)+""}):function(){return $}:($=qe.length,function(Ye){for(var $e,lt=0;lt<$;++lt)Ue[($e=qe[lt]).i]=$e.x(Ye);return Ue.join("")})}l.geom.delaunay=function(F){return l.geom.voronoi().triangles(F)},l.geom.quadtree=function(F,$,ie,de,xe){var Le,Ne=Bn,Ue=Ln;if(Le=arguments.length)return Ne=to,Ue=Hs,Le===3&&(xe=ie,de=$,ie=$=0),qe(F);function qe(Ye){var $e,lt,pt,Et,Ct,St,Ft,Lt,tn,Zt=Cn(Ne),Ht=Cn(Ue);if($!=null)St=$,Ft=ie,Lt=de,tn=xe;else if(Lt=tn=-(St=Ft=1/0),lt=[],pt=[],Ct=Ye.length,Le)for(Et=0;Et<Ct;++Et)($e=Ye[Et]).x<St&&(St=$e.x),$e.y<Ft&&(Ft=$e.y),$e.x>Lt&&(Lt=$e.x),$e.y>tn&&(tn=$e.y),lt.push($e.x),pt.push($e.y);else for(Et=0;Et<Ct;++Et){var dn=+Zt($e=Ye[Et],Et),vn=+Ht($e,Et);dn<St&&(St=dn),vn<Ft&&(Ft=vn),dn>Lt&&(Lt=dn),vn>tn&&(tn=vn),lt.push(dn),pt.push(vn)}var zn=Lt-St,Rn=tn-Ft;function Vn(ar,fr,mr,Lr,Nn,ir,hr,yr){if(!isNaN(mr)&&!isNaN(Lr))if(ar.leaf){var Mr=ar.x,Ir=ar.y;if(Mr!=null)if(y(Mr-mr)+y(Ir-Lr)<.01)Xn(ar,fr,mr,Lr,Nn,ir,hr,yr);else{var Br=ar.point;ar.x=ar.y=ar.point=null,Xn(ar,Br,Mr,Ir,Nn,ir,hr,yr),Xn(ar,fr,mr,Lr,Nn,ir,hr,yr)}else ar.x=mr,ar.y=Lr,ar.point=fr}else Xn(ar,fr,mr,Lr,Nn,ir,hr,yr)}function Xn(ar,fr,mr,Lr,Nn,ir,hr,yr){var Mr=.5*(Nn+hr),Ir=.5*(ir+yr),Br=mr>=Mr,Zr=Lr>=Ir,oi=Zr<<1|Br;ar.leaf=!1,Br?Nn=Mr:hr=Mr,Zr?ir=Ir:yr=Ir,Vn(ar=ar.nodes[oi]||(ar.nodes[oi]={leaf:!0,nodes:[],point:null,x:null,y:null}),fr,mr,Lr,Nn,ir,hr,yr)}zn>Rn?tn=Ft+zn:Lt=St+Rn;var or={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(ar){Vn(or,ar,+Zt(ar,++Et),+Ht(ar,Et),St,Ft,Lt,tn)}};if(or.visit=function(ar){Fo(ar,or,St,Ft,Lt,tn)},or.find=function(ar){return function(fr,mr,Lr,Nn,ir,hr,yr){var Mr,Ir=1/0;return function Br(Zr,oi,si,Yr,wi){if(!(oi>hr||si>yr||Yr<Nn||wi<ir)){if(Hi=Zr.point){var Hi,Li=mr-Zr.x,Ri=Lr-Zr.y,Ur=Li*Li+Ri*Ri;if(Ur<Ir){var Fr=Math.sqrt(Ir=Ur);Nn=mr-Fr,ir=Lr-Fr,hr=mr+Fr,yr=Lr+Fr,Mr=Hi}}for(var li=Zr.nodes,ti=.5*(oi+Yr),fi=.5*(si+wi),sa=(Lr>=fi)<<1|mr>=ti,mi=sa+4;sa<mi;++sa)if(Zr=li[3&sa])switch(3&sa){case 0:Br(Zr,oi,si,ti,fi);break;case 1:Br(Zr,ti,si,Yr,fi);break;case 2:Br(Zr,oi,fi,ti,wi);break;case 3:Br(Zr,ti,fi,Yr,wi)}}}(fr,Nn,ir,hr,yr),Mr}(or,ar[0],ar[1],St,Ft,Lt,tn)},Et=-1,$==null){for(;++Et<Ct;)Vn(or,Ye[Et],lt[Et],pt[Et],St,Ft,Lt,tn);--Et}else Ye.forEach(or.add);return lt=pt=Ye=$e=null,or}return qe.x=function(Ye){return arguments.length?(Ne=Ye,qe):Ne},qe.y=function(Ye){return arguments.length?(Ue=Ye,qe):Ue},qe.extent=function(Ye){return arguments.length?(Ye==null?$=ie=de=xe=null:($=+Ye[0][0],ie=+Ye[0][1],de=+Ye[1][0],xe=+Ye[1][1]),qe):$==null?null:[[$,ie],[de,xe]]},qe.size=function(Ye){return arguments.length?(Ye==null?$=ie=de=xe=null:($=ie=0,de=+Ye[0],xe=+Ye[1]),qe):$==null?null:[de-$,xe-ie]},qe},l.interpolateRgb=ps,l.interpolateObject=qs,l.interpolateNumber=Ga,l.interpolateString=rl;var Bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,No=new RegExp(Bo.source,"g");function Za(F,$){for(var ie,de=l.interpolators.length;--de>=0&&!(ie=l.interpolators[de](F,$)););return ie}function Si(F,$){var ie,de=[],xe=[],Le=F.length,Ne=$.length,Ue=Math.min(F.length,$.length);for(ie=0;ie<Ue;++ie)de.push(Za(F[ie],$[ie]));for(;ie<Le;++ie)xe[ie]=F[ie];for(;ie<Ne;++ie)xe[ie]=$[ie];return function(qe){for(ie=0;ie<Ue;++ie)xe[ie]=de[ie](qe);return xe}}l.interpolate=Za,l.interpolators=[function(F,$){var ie=typeof $;return(ie==="string"?pn.has($.toLowerCase())||/^(#|rgb\(|hsl\()/i.test($)?ps:rl:$ instanceof tt?ps:Array.isArray($)?Si:ie==="object"&&isNaN($)?qs:Ga)(F,$)}],l.interpolateArray=Si;var ds=function(){return O},Vr=l.map({linear:ds,poly:function(F){return function($){return Math.pow($,F)}},quad:function(){return Ia},cubic:function(){return yo},sin:function(){return io},exp:function(){return Ps},circle:function(){return il},elastic:function(F,$){var ie;return arguments.length<2&&($=.45),arguments.length?ie=$/Pt*Math.asin(1/F):(F=1,ie=$/4),function(de){return 1+F*Math.pow(2,-10*de)*Math.sin((de-ie)*Pt/$)}},back:function(F){return F||(F=1.70158),function($){return $*$*((F+1)*$-F)}},bounce:function(){return xo}}),Ya=l.map({in:O,out:ba,"in-out":no,"out-in":function(F){return no(ba(F))}});function ba(F){return function($){return 1-F(1-$)}}function no(F){return function($){return .5*($<.5?F(2*$):2-F(2-2*$))}}function Ia(F){return F*F}function yo(F){return F*F*F}function ro(F){if(F<=0)return 0;if(F>=1)return 1;var $=F*F,ie=$*F;return 4*(F<.5?ie:3*(F-$)+ie-.75)}function io(F){return 1-Math.cos(F*Ze)}function Ps(F){return Math.pow(2,10*(F-1))}function il(F){return 1-Math.sqrt(1-F*F)}function xo(F){return F<.36363636363636365?7.5625*F*F:F<.7272727272727273?7.5625*(F-=.5454545454545454)*F+.75:F<.9090909090909091?7.5625*(F-=.8181818181818182)*F+.9375:7.5625*(F-=.9545454545454546)*F+.984375}function al(F,$){return $-=F,function(ie){return Math.round(F+$*ie)}}function Gs(F){var $,ie,de,xe=[F.a,F.b],Le=[F.c,F.d],Ne=Zs(xe),Ue=ol(xe,Le),qe=Zs((($=Le)[0]+=(de=-Ue)*(ie=xe)[0],$[1]+=de*ie[1],$))||0;xe[0]*Le[1]<Le[0]*xe[1]&&(xe[0]*=-1,xe[1]*=-1,Ne*=-1,Ue*=-1),this.rotate=(Ne?Math.atan2(xe[1],xe[0]):Math.atan2(-Le[0],Le[1]))*Ve,this.translate=[F.e,F.f],this.scale=[Ne,qe],this.skew=qe?Math.atan2(Ue,qe)*Ve:0}function ol(F,$){return F[0]*$[0]+F[1]*$[1]}function Zs(F){var $=Math.sqrt(ol(F,F));return $&&(F[0]/=$,F[1]/=$),$}l.ease=function(F){var $,ie=F.indexOf("-"),de=ie>=0?F.slice(0,ie):F,xe=ie>=0?F.slice(ie+1):"in";return de=Vr.get(de)||ds,xe=Ya.get(xe)||O,$=xe(de.apply(null,T.call(arguments,1))),function(Le){return Le<=0?0:Le>=1?1:$(Le)}},l.interpolateHcl=function(F,$){F=l.hcl(F),$=l.hcl($);var ie=F.h,de=F.c,xe=F.l,Le=$.h-ie,Ne=$.c-de,Ue=$.l-xe;return isNaN(Ne)&&(Ne=0,de=isNaN(de)?$.c:de),isNaN(Le)?(Le=0,ie=isNaN(ie)?$.h:ie):Le>180?Le-=360:Le<-180&&(Le+=360),function(qe){return ct(ie+Le*qe,de+Ne*qe,xe+Ue*qe)+""}},l.interpolateHsl=function(F,$){F=l.hsl(F),$=l.hsl($);var ie=F.h,de=F.s,xe=F.l,Le=$.h-ie,Ne=$.s-de,Ue=$.l-xe;return isNaN(Ne)&&(Ne=0,de=isNaN(de)?$.s:de),isNaN(Le)?(Le=0,ie=isNaN(ie)?$.h:ie):Le>180?Le-=360:Le<-180&&(Le+=360),function(qe){return gt(ie+Le*qe,de+Ne*qe,xe+Ue*qe)+""}},l.interpolateLab=function(F,$){F=l.lab(F),$=l.lab($);var ie=F.l,de=F.a,xe=F.b,Le=$.l-ie,Ne=$.a-de,Ue=$.b-xe;return function(qe){return jt(ie+Le*qe,de+Ne*qe,xe+Ue*qe)+""}},l.interpolateRound=al,l.transform=function(F){var $=d.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(ie){if(ie!=null){$.setAttribute("transform",ie);var de=$.transform.baseVal.consolidate()}return new Gs(de?de.matrix:sl)})(F)},Gs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sl={a:1,b:0,c:0,d:1,e:0,f:0};function ts(F){return F.length?F.pop()+",":""}function bo(F,$){var ie=[],de=[];return F=l.transform(F),$=l.transform($),function(xe,Le,Ne,Ue){if(xe[0]!==Le[0]||xe[1]!==Le[1]){var qe=Ne.push("translate(",null,",",null,")");Ue.push({i:qe-4,x:Ga(xe[0],Le[0])},{i:qe-2,x:Ga(xe[1],Le[1])})}else(Le[0]||Le[1])&&Ne.push("translate("+Le+")")}(F.translate,$.translate,ie,de),function(xe,Le,Ne,Ue){xe!==Le?(xe-Le>180?Le+=360:Le-xe>180&&(xe+=360),Ue.push({i:Ne.push(ts(Ne)+"rotate(",null,")")-2,x:Ga(xe,Le)})):Le&&Ne.push(ts(Ne)+"rotate("+Le+")")}(F.rotate,$.rotate,ie,de),function(xe,Le,Ne,Ue){xe!==Le?Ue.push({i:Ne.push(ts(Ne)+"skewX(",null,")")-2,x:Ga(xe,Le)}):Le&&Ne.push(ts(Ne)+"skewX("+Le+")")}(F.skew,$.skew,ie,de),function(xe,Le,Ne,Ue){if(xe[0]!==Le[0]||xe[1]!==Le[1]){var qe=Ne.push(ts(Ne)+"scale(",null,",",null,")");Ue.push({i:qe-4,x:Ga(xe[0],Le[0])},{i:qe-2,x:Ga(xe[1],Le[1])})}else Le[0]===1&&Le[1]===1||Ne.push(ts(Ne)+"scale("+Le+")")}(F.scale,$.scale,ie,de),F=$=null,function(xe){for(var Le,Ne=-1,Ue=de.length;++Ne<Ue;)ie[(Le=de[Ne]).i]=Le.x(xe);return ie.join("")}}function jo(F,$){return $=($-=F=+F)||1/$,function(ie){return(ie-F)/$}}function ns(F,$){return $=($-=F=+F)||1/$,function(ie){return Math.max(0,Math.min(1,(ie-F)/$))}}function Os(F){for(var $=F.source,ie=F.target,de=function(Ne,Ue){if(Ne===Ue)return Ne;for(var qe=Ys(Ne),Ye=Ys(Ue),$e=qe.pop(),lt=Ye.pop(),pt=null;$e===lt;)pt=$e,$e=qe.pop(),lt=Ye.pop();return pt}($,ie),xe=[$];$!==de;)$=$.parent,xe.push($);for(var Le=xe.length;ie!==de;)xe.splice(Le,0,ie),ie=ie.parent;return xe}function Ys(F){for(var $=[],ie=F.parent;ie!=null;)$.push(F),F=ie,ie=ie.parent;return $.push(F),$}function Ws(F){F.fixed|=2}function Aa(F){F.fixed&=-7}function Uo(F){F.fixed|=4,F.px=F.x,F.py=F.y}function Wa(F){F.fixed&=-5}function ao(F,$,ie){var de=0,xe=0;if(F.charge=0,!F.leaf)for(var Le,Ne=F.nodes,Ue=Ne.length,qe=-1;++qe<Ue;)(Le=Ne[qe])!=null&&(ao(Le,$,ie),F.charge+=Le.charge,de+=Le.charge*Le.cx,xe+=Le.charge*Le.cy);if(F.point){F.leaf||(F.point.x+=Math.random()-.5,F.point.y+=Math.random()-.5);var Ye=$*ie[F.point.index];F.charge+=F.pointCharge=Ye,de+=Ye*F.point.x,xe+=Ye*F.point.y}F.cx=de/F.charge,F.cy=xe/F.charge}l.interpolateTransform=bo,l.layout={},l.layout.bundle=function(){return function(F){for(var $=[],ie=-1,de=F.length;++ie<de;)$.push(Os(F[ie]));return $}},l.layout.chord=function(){var F,$,ie,de,xe,Le,Ne,Ue={},qe=0;function Ye(){var lt,pt,Et,Ct,St,Ft={},Lt=[],tn=l.range(de),Zt=[];for(F=[],$=[],lt=0,Ct=-1;++Ct<de;){for(pt=0,St=-1;++St<de;)pt+=ie[Ct][St];Lt.push(pt),Zt.push(l.range(de)),lt+=pt}for(xe&&tn.sort(function(or,ar){return xe(Lt[or],Lt[ar])}),Le&&Zt.forEach(function(or,ar){or.sort(function(fr,mr){return Le(ie[ar][fr],ie[ar][mr])})}),lt=(Pt-qe*de)/lt,pt=0,Ct=-1;++Ct<de;){for(Et=pt,St=-1;++St<de;){var Ht=tn[Ct],dn=Zt[Ht][St],vn=ie[Ht][dn],zn=pt,Rn=pt+=vn*lt;Ft[Ht+"-"+dn]={index:Ht,subindex:dn,startAngle:zn,endAngle:Rn,value:vn}}$[Ht]={index:Ht,startAngle:Et,endAngle:pt,value:Lt[Ht]},pt+=qe}for(Ct=-1;++Ct<de;)for(St=Ct-1;++St<de;){var Vn=Ft[Ct+"-"+St],Xn=Ft[St+"-"+Ct];(Vn.value||Xn.value)&&F.push(Vn.value<Xn.value?{source:Xn,target:Vn}:{source:Vn,target:Xn})}Ne&&$e()}function $e(){F.sort(function(lt,pt){return Ne((lt.source.value+lt.target.value)/2,(pt.source.value+pt.target.value)/2)})}return Ue.matrix=function(lt){return arguments.length?(de=(ie=lt)&&ie.length,F=$=null,Ue):ie},Ue.padding=function(lt){return arguments.length?(qe=lt,F=$=null,Ue):qe},Ue.sortGroups=function(lt){return arguments.length?(xe=lt,F=$=null,Ue):xe},Ue.sortSubgroups=function(lt){return arguments.length?(Le=lt,F=null,Ue):Le},Ue.sortChords=function(lt){return arguments.length?(Ne=lt,F&&$e(),Ue):Ne},Ue.chords=function(){return F||Ye(),F},Ue.groups=function(){return $||Ye(),$},Ue},l.layout.force=function(){var F,$,ie,de,xe,Le,Ne={},Ue=l.dispatch("start","tick","end"),qe=[1,1],Ye=.9,$e=ll,lt=_o,pt=-30,Et=$r,Ct=.1,St=.64,Ft=[],Lt=[];function tn(Ht){return function(dn,vn,zn,Rn){if(dn.point!==Ht){var Vn=dn.cx-Ht.x,Xn=dn.cy-Ht.y,or=Rn-vn,ar=Vn*Vn+Xn*Xn;if(or*or/St<ar){if(ar<Et){var fr=dn.charge/ar;Ht.px-=Vn*fr,Ht.py-=Xn*fr}return!0}dn.point&&ar&&ar<Et&&(fr=dn.pointCharge/ar,Ht.px-=Vn*fr,Ht.py-=Xn*fr)}return!dn.charge}}function Zt(Ht){Ht.px=l.event.x,Ht.py=l.event.y,Ne.resume()}return Ne.tick=function(){if((ie*=.99)<.005)return F=null,Ue.end({type:"end",alpha:ie=0}),!0;var Ht,dn,vn,zn,Rn,Vn,Xn,or,ar,fr=Ft.length,mr=Lt.length;for(dn=0;dn<mr;++dn)zn=(vn=Lt[dn]).source,(Vn=(or=(Rn=vn.target).x-zn.x)*or+(ar=Rn.y-zn.y)*ar)&&(or*=Vn=ie*xe[dn]*((Vn=Math.sqrt(Vn))-de[dn])/Vn,ar*=Vn,Rn.x-=or*(Xn=zn.weight+Rn.weight?zn.weight/(zn.weight+Rn.weight):.5),Rn.y-=ar*Xn,zn.x+=or*(Xn=1-Xn),zn.y+=ar*Xn);if((Xn=ie*Ct)&&(or=qe[0]/2,ar=qe[1]/2,dn=-1,Xn))for(;++dn<fr;)(vn=Ft[dn]).x+=(or-vn.x)*Xn,vn.y+=(ar-vn.y)*Xn;if(pt)for(ao(Ht=l.geom.quadtree(Ft),ie,Le),dn=-1;++dn<fr;)(vn=Ft[dn]).fixed||Ht.visit(tn(vn));for(dn=-1;++dn<fr;)(vn=Ft[dn]).fixed?(vn.x=vn.px,vn.y=vn.py):(vn.x-=(vn.px-(vn.px=vn.x))*Ye,vn.y-=(vn.py-(vn.py=vn.y))*Ye);Ue.tick({type:"tick",alpha:ie})},Ne.nodes=function(Ht){return arguments.length?(Ft=Ht,Ne):Ft},Ne.links=function(Ht){return arguments.length?(Lt=Ht,Ne):Lt},Ne.size=function(Ht){return arguments.length?(qe=Ht,Ne):qe},Ne.linkDistance=function(Ht){return arguments.length?($e=typeof Ht=="function"?Ht:+Ht,Ne):$e},Ne.distance=Ne.linkDistance,Ne.linkStrength=function(Ht){return arguments.length?(lt=typeof Ht=="function"?Ht:+Ht,Ne):lt},Ne.friction=function(Ht){return arguments.length?(Ye=+Ht,Ne):Ye},Ne.charge=function(Ht){return arguments.length?(pt=typeof Ht=="function"?Ht:+Ht,Ne):pt},Ne.chargeDistance=function(Ht){return arguments.length?(Et=Ht*Ht,Ne):Math.sqrt(Et)},Ne.gravity=function(Ht){return arguments.length?(Ct=+Ht,Ne):Ct},Ne.theta=function(Ht){return arguments.length?(St=Ht*Ht,Ne):Math.sqrt(St)},Ne.alpha=function(Ht){return arguments.length?(Ht=+Ht,ie?Ht>0?ie=Ht:(F.c=null,F.t=NaN,F=null,Ue.end({type:"end",alpha:ie=0})):Ht>0&&(Ue.start({type:"start",alpha:ie=Ht}),F=$t(Ne.tick)),Ne):ie},Ne.start=function(){var Ht,dn,vn,zn=Ft.length,Rn=Lt.length,Vn=qe[0],Xn=qe[1];for(Ht=0;Ht<zn;++Ht)(vn=Ft[Ht]).index=Ht,vn.weight=0;for(Ht=0;Ht<Rn;++Ht)typeof(vn=Lt[Ht]).source=="number"&&(vn.source=Ft[vn.source]),typeof vn.target=="number"&&(vn.target=Ft[vn.target]),++vn.source.weight,++vn.target.weight;for(Ht=0;Ht<zn;++Ht)vn=Ft[Ht],isNaN(vn.x)&&(vn.x=or("x",Vn)),isNaN(vn.y)&&(vn.y=or("y",Xn)),isNaN(vn.px)&&(vn.px=vn.x),isNaN(vn.py)&&(vn.py=vn.y);if(de=[],typeof $e=="function")for(Ht=0;Ht<Rn;++Ht)de[Ht]=+$e.call(this,Lt[Ht],Ht);else for(Ht=0;Ht<Rn;++Ht)de[Ht]=$e;if(xe=[],typeof lt=="function")for(Ht=0;Ht<Rn;++Ht)xe[Ht]=+lt.call(this,Lt[Ht],Ht);else for(Ht=0;Ht<Rn;++Ht)xe[Ht]=lt;if(Le=[],typeof pt=="function")for(Ht=0;Ht<zn;++Ht)Le[Ht]=+pt.call(this,Ft[Ht],Ht);else for(Ht=0;Ht<zn;++Ht)Le[Ht]=pt;function or(ar,fr){if(!dn){for(dn=new Array(zn),ir=0;ir<zn;++ir)dn[ir]=[];for(ir=0;ir<Rn;++ir){var mr=Lt[ir];dn[mr.source.index].push(mr.target),dn[mr.target.index].push(mr.source)}}for(var Lr,Nn=dn[Ht],ir=-1,hr=Nn.length;++ir<hr;)if(!isNaN(Lr=Nn[ir][ar]))return Lr;return Math.random()*fr}return Ne.resume()},Ne.resume=function(){return Ne.alpha(.1)},Ne.stop=function(){return Ne.alpha(0)},Ne.drag=function(){if($||($=l.behavior.drag().origin(O).on("dragstart.force",Ws).on("drag.force",Zt).on("dragend.force",Aa)),!arguments.length)return $;this.on("mouseover.force",Uo).on("mouseout.force",Wa).call($)},l.rebind(Ne,Ue,"on")};var ll=20,_o=1,$r=1/0;function Da(F,$){return l.rebind(F,$,"sort","children","value"),F.nodes=F,F.links=ul,F}function gs(F,$){for(var ie=[F];(F=ie.pop())!=null;)if($(F),(xe=F.children)&&(de=xe.length))for(var de,xe;--de>=0;)ie.push(xe[de])}function Ma(F,$){for(var ie=[F],de=[];(F=ie.pop())!=null;)if(de.push(F),(Le=F.children)&&(xe=Le.length))for(var xe,Le,Ne=-1;++Ne<xe;)ie.push(Le[Ne]);for(;(F=de.pop())!=null;)$(F)}function Vo(F){return F.children}function xl(F){return F.value}function Is(F,$){return $.value-F.value}function ul(F){return l.merge(F.map(function($){return($.children||[]).map(function(ie){return{source:$,target:ie}})}))}l.layout.hierarchy=function(){var F=Is,$=Vo,ie=xl;function de(xe){var Le,Ne=[xe],Ue=[];for(xe.depth=0;(Le=Ne.pop())!=null;)if(Ue.push(Le),(Ye=$.call(de,Le,Le.depth))&&(qe=Ye.length)){for(var qe,Ye,$e;--qe>=0;)Ne.push($e=Ye[qe]),$e.parent=Le,$e.depth=Le.depth+1;ie&&(Le.value=0),Le.children=Ye}else ie&&(Le.value=+ie.call(de,Le,Le.depth)||0),delete Le.children;return Ma(xe,function(lt){var pt,Et;F&&(pt=lt.children)&&pt.sort(F),ie&&(Et=lt.parent)&&(Et.value+=lt.value)}),Ue}return de.sort=function(xe){return arguments.length?(F=xe,de):F},de.children=function(xe){return arguments.length?($=xe,de):$},de.value=function(xe){return arguments.length?(ie=xe,de):ie},de.revalue=function(xe){return ie&&(gs(xe,function(Le){Le.children&&(Le.value=0)}),Ma(xe,function(Le){var Ne;Le.children||(Le.value=+ie.call(de,Le,Le.depth)||0),(Ne=Le.parent)&&(Ne.value+=Le.value)})),xe},de},l.layout.partition=function(){var F=l.layout.hierarchy(),$=[1,1];function ie(Le,Ne,Ue,qe){var Ye=Le.children;if(Le.x=Ne,Le.y=Le.depth*qe,Le.dx=Ue,Le.dy=qe,Ye&&($e=Ye.length)){var $e,lt,pt,Et=-1;for(Ue=Le.value?Ue/Le.value:0;++Et<$e;)ie(lt=Ye[Et],Ne,pt=lt.value*Ue,qe),Ne+=pt}}function de(Le){var Ne=Le.children,Ue=0;if(Ne&&(qe=Ne.length))for(var qe,Ye=-1;++Ye<qe;)Ue=Math.max(Ue,de(Ne[Ye]));return 1+Ue}function xe(Le,Ne){var Ue=F.call(this,Le,Ne);return ie(Ue[0],0,$[0],$[1]/de(Ue[0])),Ue}return xe.size=function(Le){return arguments.length?($=Le,xe):$},Da(xe,F)},l.layout.pie=function(){var F=Number,$=cl,ie=0,de=Pt,xe=0;function Le(Ne){var Ue,qe=Ne.length,Ye=Ne.map(function(tn,Zt){return+F.call(Le,tn,Zt)}),$e=+(typeof ie=="function"?ie.apply(this,arguments):ie),lt=(typeof de=="function"?de.apply(this,arguments):de)-$e,pt=Math.min(Math.abs(lt)/qe,+(typeof xe=="function"?xe.apply(this,arguments):xe)),Et=pt*(lt<0?-1:1),Ct=l.sum(Ye),St=Ct?(lt-qe*Et)/Ct:0,Ft=l.range(qe),Lt=[];return $!=null&&Ft.sort($===cl?function(tn,Zt){return Ye[Zt]-Ye[tn]}:function(tn,Zt){return $(Ne[tn],Ne[Zt])}),Ft.forEach(function(tn){Lt[tn]={data:Ne[tn],value:Ue=Ye[tn],startAngle:$e,endAngle:$e+=Ue*St+Et,padAngle:pt}}),Lt}return Le.value=function(Ne){return arguments.length?(F=Ne,Le):F},Le.sort=function(Ne){return arguments.length?($=Ne,Le):$},Le.startAngle=function(Ne){return arguments.length?(ie=Ne,Le):ie},Le.endAngle=function(Ne){return arguments.length?(de=Ne,Le):de},Le.padAngle=function(Ne){return arguments.length?(xe=Ne,Le):xe},Le};var cl={};function vs(F){return F.x}function rs(F){return F.y}function ms(F,$,ie){F.y0=$,F.y=ie}l.layout.stack=function(){var F=O,$=To,ie=so,de=ms,xe=vs,Le=rs;function Ne(Ue,qe){if(!(pt=Ue.length))return Ue;var Ye=Ue.map(function(tn,Zt){return F.call(Ne,tn,Zt)}),$e=Ye.map(function(tn){return tn.map(function(Zt,Ht){return[xe.call(Ne,Zt,Ht),Le.call(Ne,Zt,Ht)]})}),lt=$.call(Ne,$e,qe);Ye=l.permute(Ye,lt),$e=l.permute($e,lt);var pt,Et,Ct,St,Ft=ie.call(Ne,$e,qe),Lt=Ye[0].length;for(Ct=0;Ct<Lt;++Ct)for(de.call(Ne,Ye[0][Ct],St=Ft[Ct],$e[0][Ct][1]),Et=1;Et<pt;++Et)de.call(Ne,Ye[Et][Ct],St+=$e[Et-1][Ct][1],$e[Et][Ct][1]);return Ue}return Ne.values=function(Ue){return arguments.length?(F=Ue,Ne):F},Ne.order=function(Ue){return arguments.length?($=typeof Ue=="function"?Ue:wo.get(Ue)||To,Ne):$},Ne.offset=function(Ue){return arguments.length?(ie=typeof Ue=="function"?Ue:oo.get(Ue)||so,Ne):ie},Ne.x=function(Ue){return arguments.length?(xe=Ue,Ne):xe},Ne.y=function(Ue){return arguments.length?(Le=Ue,Ne):Le},Ne.out=function(Ue){return arguments.length?(de=Ue,Ne):de},Ne};var wo=l.map({"inside-out":function(F){var $,ie,de=F.length,xe=F.map(Ds),Le=F.map(za),Ne=l.range(de).sort(function(lt,pt){return xe[lt]-xe[pt]}),Ue=0,qe=0,Ye=[],$e=[];for($=0;$<de;++$)ie=Ne[$],Ue<qe?(Ue+=Le[ie],Ye.push(ie)):(qe+=Le[ie],$e.push(ie));return $e.reverse().concat(Ye)},reverse:function(F){return l.range(F.length).reverse()},default:To}),oo=l.map({silhouette:function(F){var $,ie,de,xe=F.length,Le=F[0].length,Ne=[],Ue=0,qe=[];for(ie=0;ie<Le;++ie){for($=0,de=0;$<xe;$++)de+=F[$][ie][1];de>Ue&&(Ue=de),Ne.push(de)}for(ie=0;ie<Le;++ie)qe[ie]=(Ue-Ne[ie])/2;return qe},wiggle:function(F){var $,ie,de,xe,Le,Ne,Ue,qe,Ye,$e=F.length,lt=F[0],pt=lt.length,Et=[];for(Et[0]=qe=Ye=0,ie=1;ie<pt;++ie){for($=0,xe=0;$<$e;++$)xe+=F[$][ie][1];for($=0,Le=0,Ue=lt[ie][0]-lt[ie-1][0];$<$e;++$){for(de=0,Ne=(F[$][ie][1]-F[$][ie-1][1])/(2*Ue);de<$;++de)Ne+=(F[de][ie][1]-F[de][ie-1][1])/Ue;Le+=Ne*F[$][ie][1]}Et[ie]=qe-=xe?Le/xe*Ue:0,qe<Ye&&(Ye=qe)}for(ie=0;ie<pt;++ie)Et[ie]-=Ye;return Et},expand:function(F){var $,ie,de,xe=F.length,Le=F[0].length,Ne=1/xe,Ue=[];for(ie=0;ie<Le;++ie){for($=0,de=0;$<xe;$++)de+=F[$][ie][1];if(de)for($=0;$<xe;$++)F[$][ie][1]/=de;else for($=0;$<xe;$++)F[$][ie][1]=Ne}for(ie=0;ie<Le;++ie)Ue[ie]=0;return Ue},zero:so});function To(F){return l.range(F.length)}function so(F){for(var $=-1,ie=F[0].length,de=[];++$<ie;)de[$]=0;return de}function Ds(F){for(var $,ie=1,de=0,xe=F[0][1],Le=F.length;ie<Le;++ie)($=F[ie][1])>xe&&(de=ie,xe=$);return de}function za(F){return F.reduce(fl,0)}function fl(F,$){return F+$[1]}function hl(F,$){return zs(F,Math.ceil(Math.log($.length)/Math.LN2+1))}function zs(F,$){for(var ie=-1,de=+F[0],xe=(F[1]-de)/$,Le=[];++ie<=$;)Le[ie]=xe*ie+de;return Le}function ko(F){return[l.min(F),l.max(F)]}function Rs(F,$){return F.value-$.value}function Ho(F,$){var ie=F._pack_next;F._pack_next=$,$._pack_prev=F,$._pack_next=ie,ie._pack_prev=$}function Xs(F,$){F._pack_next=$,$._pack_prev=F}function is(F,$){var ie=$.x-F.x,de=$.y-F.y,xe=F.r+$.r;return .999*xe*xe>ie*ie+de*de}function qo(F){if(($=F.children)&&(qe=$.length)){var $,ie,de,xe,Le,Ne,Ue,qe,Ye=1/0,$e=-1/0,lt=1/0,pt=-1/0;if($.forEach(ys),(ie=$[0]).x=-ie.r,ie.y=0,Zt(ie),qe>1&&((de=$[1]).x=de.r,de.y=0,Zt(de),qe>2))for(Ao(ie,de,xe=$[2]),Zt(xe),Ho(ie,xe),ie._pack_prev=xe,Ho(xe,de),de=ie._pack_next,Le=3;Le<qe;Le++){Ao(ie,de,xe=$[Le]);var Et=0,Ct=1,St=1;for(Ne=de._pack_next;Ne!==de;Ne=Ne._pack_next,Ct++)if(is(Ne,xe)){Et=1;break}if(Et==1)for(Ue=ie._pack_prev;Ue!==Ne._pack_prev&&!is(Ue,xe);Ue=Ue._pack_prev,St++);Et?(Ct<St||Ct==St&&de.r<ie.r?Xs(ie,de=Ne):Xs(ie=Ue,de),Le--):(Ho(ie,xe),de=xe,Zt(xe))}var Ft=(Ye+$e)/2,Lt=(lt+pt)/2,tn=0;for(Le=0;Le<qe;Le++)(xe=$[Le]).x-=Ft,xe.y-=Lt,tn=Math.max(tn,xe.r+Math.sqrt(xe.x*xe.x+xe.y*xe.y));F.r=tn,$.forEach(as)}function Zt(Ht){Ye=Math.min(Ht.x-Ht.r,Ye),$e=Math.max(Ht.x+Ht.r,$e),lt=Math.min(Ht.y-Ht.r,lt),pt=Math.max(Ht.y+Ht.r,pt)}}function ys(F){F._pack_next=F._pack_prev=F}function as(F){delete F._pack_next,delete F._pack_prev}function Qr(F,$,ie,de){var xe=F.children;if(F.x=$+=de*F.x,F.y=ie+=de*F.y,F.r*=de,xe)for(var Le=-1,Ne=xe.length;++Le<Ne;)Qr(xe[Le],$,ie,de)}function Ao(F,$,ie){var de=F.r+ie.r,xe=$.x-F.x,Le=$.y-F.y;if(de&&(xe||Le)){var Ne=$.r+ie.r,Ue=xe*xe+Le*Le,qe=.5+((de*=de)-(Ne*=Ne))/(2*Ue),Ye=Math.sqrt(Math.max(0,2*Ne*(de+Ue)-(de-=Ue)*de-Ne*Ne))/(2*Ue);ie.x=F.x+qe*xe+Ye*Le,ie.y=F.y+qe*Le-Ye*xe}else ie.x=F.x+de,ie.y=F.y}function lo(F,$){return F.parent==$.parent?1:2}function Ni(F){var $=F.children;return $.length?$[0]:F.t}function Nr(F){var $,ie=F.children;return($=ie.length)?ie[$-1]:F.t}function Hr(F,$,ie){var de=ie/($.i-F.i);$.c-=de,$.s+=ie,F.c+=de,$.z+=ie,$.m+=ie}function Mo(F,$,ie){return F.a.parent===$.parent?F.a:ie}function uo(F){var $=F.children;return $&&$.length?uo($[0]):F}function Js(F){var $,ie=F.children;return ie&&($=ie.length)?Js(ie[$-1]):F}function xs(F){return{x:F.x,y:F.y,dx:F.dx,dy:F.dy}}function So(F,$){var ie=F.x+$[3],de=F.y+$[0],xe=F.dx-$[1]-$[3],Le=F.dy-$[0]-$[2];return xe<0&&(ie+=xe/2,xe=0),Le<0&&(de+=Le/2,Le=0),{x:ie,y:de,dx:xe,dy:Le}}function bs(F){var $=F[0],ie=F[F.length-1];return $<ie?[$,ie]:[ie,$]}function co(F){return F.rangeExtent?F.rangeExtent():bs(F.range())}function Go(F,$,ie,de){var xe=ie(F[0],F[1]),Le=de($[0],$[1]);return function(Ne){return Le(xe(Ne))}}function Eo(F,$){var ie,de=0,xe=F.length-1,Le=F[de],Ne=F[xe];return Ne<Le&&(ie=de,de=xe,xe=ie,ie=Le,Le=Ne,Ne=ie),F[de]=$.floor(Le),F[xe]=$.ceil(Ne),F}function di(F){return F?{floor:function($){return Math.floor($/F)*F},ceil:function($){return Math.ceil($/F)*F}}:Zo}l.layout.histogram=function(){var F=!0,$=Number,ie=ko,de=hl;function xe(Le,Ne){for(var Ue,qe,Ye=[],$e=Le.map($,this),lt=ie.call(this,$e,Ne),pt=de.call(this,lt,$e,Ne),Et=(Ne=-1,$e.length),Ct=pt.length-1,St=F?1:1/Et;++Ne<Ct;)(Ue=Ye[Ne]=[]).dx=pt[Ne+1]-(Ue.x=pt[Ne]),Ue.y=0;if(Ct>0)for(Ne=-1;++Ne<Et;)(qe=$e[Ne])>=lt[0]&&qe<=lt[1]&&((Ue=Ye[l.bisect(pt,qe,1,Ct)-1]).y+=St,Ue.push(Le[Ne]));return Ye}return xe.value=function(Le){return arguments.length?($=Le,xe):$},xe.range=function(Le){return arguments.length?(ie=Cn(Le),xe):ie},xe.bins=function(Le){return arguments.length?(de=typeof Le=="number"?function(Ne){return zs(Ne,Le)}:Cn(Le),xe):de},xe.frequency=function(Le){return arguments.length?(F=!!Le,xe):F},xe},l.layout.pack=function(){var F,$=l.layout.hierarchy().sort(Rs),ie=0,de=[1,1];function xe(Le,Ne){var Ue=$.call(this,Le,Ne),qe=Ue[0],Ye=de[0],$e=de[1],lt=F==null?Math.sqrt:typeof F=="function"?F:function(){return F};if(qe.x=qe.y=0,Ma(qe,function(Et){Et.r=+lt(Et.value)}),Ma(qe,qo),ie){var pt=ie*(F?1:Math.max(2*qe.r/Ye,2*qe.r/$e))/2;Ma(qe,function(Et){Et.r+=pt}),Ma(qe,qo),Ma(qe,function(Et){Et.r-=pt})}return Qr(qe,Ye/2,$e/2,F?1:1/Math.max(2*qe.r/Ye,2*qe.r/$e)),Ue}return xe.size=function(Le){return arguments.length?(de=Le,xe):de},xe.radius=function(Le){return arguments.length?(F=Le==null||typeof Le=="function"?Le:+Le,xe):F},xe.padding=function(Le){return arguments.length?(ie=+Le,xe):ie},Da(xe,$)},l.layout.tree=function(){var F=l.layout.hierarchy().sort(null).value(null),$=lo,ie=[1,1],de=null;function xe(qe,Ye){var $e=F.call(this,qe,Ye),lt=$e[0],pt=function(Zt){for(var Ht,dn={A:null,children:[Zt]},vn=[dn];(Ht=vn.pop())!=null;)for(var zn,Rn=Ht.children,Vn=0,Xn=Rn.length;Vn<Xn;++Vn)vn.push((Rn[Vn]=zn={_:Rn[Vn],parent:Ht,children:(zn=Rn[Vn].children)&&zn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Vn}).a=zn);return dn.children[0]}(lt);if(Ma(pt,Le),pt.parent.m=-pt.z,gs(pt,Ne),de)gs(lt,Ue);else{var Et=lt,Ct=lt,St=lt;gs(lt,function(Zt){Zt.x<Et.x&&(Et=Zt),Zt.x>Ct.x&&(Ct=Zt),Zt.depth>St.depth&&(St=Zt)});var Ft=$(Et,Ct)/2-Et.x,Lt=ie[0]/(Ct.x+$(Ct,Et)/2+Ft),tn=ie[1]/(St.depth||1);gs(lt,function(Zt){Zt.x=(Zt.x+Ft)*Lt,Zt.y=Zt.depth*tn})}return $e}function Le(qe){var Ye=qe.children,$e=qe.parent.children,lt=qe.i?$e[qe.i-1]:null;if(Ye.length){(function(Et){for(var Ct,St=0,Ft=0,Lt=Et.children,tn=Lt.length;--tn>=0;)(Ct=Lt[tn]).z+=St,Ct.m+=St,St+=Ct.s+(Ft+=Ct.c)})(qe);var pt=(Ye[0].z+Ye[Ye.length-1].z)/2;lt?(qe.z=lt.z+$(qe._,lt._),qe.m=qe.z-pt):qe.z=pt}else lt&&(qe.z=lt.z+$(qe._,lt._));qe.parent.A=function(Et,Ct,St){if(Ct){for(var Ft,Lt=Et,tn=Et,Zt=Ct,Ht=Lt.parent.children[0],dn=Lt.m,vn=tn.m,zn=Zt.m,Rn=Ht.m;Zt=Nr(Zt),Lt=Ni(Lt),Zt&&Lt;)Ht=Ni(Ht),(tn=Nr(tn)).a=Et,(Ft=Zt.z+zn-Lt.z-dn+$(Zt._,Lt._))>0&&(Hr(Mo(Zt,Et,St),Et,Ft),dn+=Ft,vn+=Ft),zn+=Zt.m,dn+=Lt.m,Rn+=Ht.m,vn+=tn.m;Zt&&!Nr(tn)&&(tn.t=Zt,tn.m+=zn-vn),Lt&&!Ni(Ht)&&(Ht.t=Lt,Ht.m+=dn-Rn,St=Et)}return St}(qe,lt,qe.parent.A||$e[0])}function Ne(qe){qe._.x=qe.z+qe.parent.m,qe.m+=qe.parent.m}function Ue(qe){qe.x*=ie[0],qe.y=qe.depth*ie[1]}return xe.separation=function(qe){return arguments.length?($=qe,xe):$},xe.size=function(qe){return arguments.length?(de=(ie=qe)==null?Ue:null,xe):de?null:ie},xe.nodeSize=function(qe){return arguments.length?(de=(ie=qe)==null?null:Ue,xe):de?ie:null},Da(xe,F)},l.layout.cluster=function(){var F=l.layout.hierarchy().sort(null).value(null),$=lo,ie=[1,1],de=!1;function xe(Le,Ne){var Ue,qe=F.call(this,Le,Ne),Ye=qe[0],$e=0;Ma(Ye,function(St){var Ft=St.children;Ft&&Ft.length?(St.x=function(Lt){return Lt.reduce(function(tn,Zt){return tn+Zt.x},0)/Lt.length}(Ft),St.y=function(Lt){return 1+l.max(Lt,function(tn){return tn.y})}(Ft)):(St.x=Ue?$e+=$(St,Ue):0,St.y=0,Ue=St)});var lt=uo(Ye),pt=Js(Ye),Et=lt.x-$(lt,pt)/2,Ct=pt.x+$(pt,lt)/2;return Ma(Ye,de?function(St){St.x=(St.x-Ye.x)*ie[0],St.y=(Ye.y-St.y)*ie[1]}:function(St){St.x=(St.x-Et)/(Ct-Et)*ie[0],St.y=(1-(Ye.y?St.y/Ye.y:1))*ie[1]}),qe}return xe.separation=function(Le){return arguments.length?($=Le,xe):$},xe.size=function(Le){return arguments.length?(de=(ie=Le)==null,xe):de?null:ie},xe.nodeSize=function(Le){return arguments.length?(de=(ie=Le)!=null,xe):de?ie:null},Da(xe,F)},l.layout.treemap=function(){var F,$=l.layout.hierarchy(),ie=Math.round,de=[1,1],xe=null,Le=xs,Ne=!1,Ue="squarify",qe=.5*(1+Math.sqrt(5));function Ye(St,Ft){for(var Lt,tn,Zt=-1,Ht=St.length;++Zt<Ht;)tn=(Lt=St[Zt]).value*(Ft<0?0:Ft),Lt.area=isNaN(tn)||tn<=0?0:tn}function $e(St){var Ft=St.children;if(Ft&&Ft.length){var Lt,tn,Zt,Ht=Le(St),dn=[],vn=Ft.slice(),zn=1/0,Rn=Ue==="slice"?Ht.dx:Ue==="dice"?Ht.dy:Ue==="slice-dice"?1&St.depth?Ht.dy:Ht.dx:Math.min(Ht.dx,Ht.dy);for(Ye(vn,Ht.dx*Ht.dy/St.value),dn.area=0;(Zt=vn.length)>0;)dn.push(Lt=vn[Zt-1]),dn.area+=Lt.area,Ue!=="squarify"||(tn=pt(dn,Rn))<=zn?(vn.pop(),zn=tn):(dn.area-=dn.pop().area,Et(dn,Rn,Ht,!1),Rn=Math.min(Ht.dx,Ht.dy),dn.length=dn.area=0,zn=1/0);dn.length&&(Et(dn,Rn,Ht,!0),dn.length=dn.area=0),Ft.forEach($e)}}function lt(St){var Ft=St.children;if(Ft&&Ft.length){var Lt,tn=Le(St),Zt=Ft.slice(),Ht=[];for(Ye(Zt,tn.dx*tn.dy/St.value),Ht.area=0;Lt=Zt.pop();)Ht.push(Lt),Ht.area+=Lt.area,Lt.z!=null&&(Et(Ht,Lt.z?tn.dx:tn.dy,tn,!Zt.length),Ht.length=Ht.area=0);Ft.forEach(lt)}}function pt(St,Ft){for(var Lt,tn=St.area,Zt=0,Ht=1/0,dn=-1,vn=St.length;++dn<vn;)(Lt=St[dn].area)&&(Lt<Ht&&(Ht=Lt),Lt>Zt&&(Zt=Lt));return Ft*=Ft,(tn*=tn)?Math.max(Ft*Zt*qe/tn,tn/(Ft*Ht*qe)):1/0}function Et(St,Ft,Lt,tn){var Zt,Ht=-1,dn=St.length,vn=Lt.x,zn=Lt.y,Rn=Ft?ie(St.area/Ft):0;if(Ft==Lt.dx){for((tn||Rn>Lt.dy)&&(Rn=Lt.dy);++Ht<dn;)(Zt=St[Ht]).x=vn,Zt.y=zn,Zt.dy=Rn,vn+=Zt.dx=Math.min(Lt.x+Lt.dx-vn,Rn?ie(Zt.area/Rn):0);Zt.z=!0,Zt.dx+=Lt.x+Lt.dx-vn,Lt.y+=Rn,Lt.dy-=Rn}else{for((tn||Rn>Lt.dx)&&(Rn=Lt.dx);++Ht<dn;)(Zt=St[Ht]).x=vn,Zt.y=zn,Zt.dx=Rn,zn+=Zt.dy=Math.min(Lt.y+Lt.dy-zn,Rn?ie(Zt.area/Rn):0);Zt.z=!1,Zt.dy+=Lt.y+Lt.dy-zn,Lt.x+=Rn,Lt.dx-=Rn}}function Ct(St){var Ft=F||$(St),Lt=Ft[0];return Lt.x=Lt.y=0,Lt.value?(Lt.dx=de[0],Lt.dy=de[1]):Lt.dx=Lt.dy=0,F&&$.revalue(Lt),Ye([Lt],Lt.dx*Lt.dy/Lt.value),(F?lt:$e)(Lt),Ne&&(F=Ft),Ft}return Ct.size=function(St){return arguments.length?(de=St,Ct):de},Ct.padding=function(St){if(!arguments.length)return xe;function Ft(tn){return So(tn,St)}var Lt;return Le=(xe=St)==null?xs:(Lt=typeof St)=="function"?function(tn){var Zt=St.call(Ct,tn,tn.depth);return Zt==null?xs(tn):So(tn,typeof Zt=="number"?[Zt,Zt,Zt,Zt]:Zt)}:(Lt==="number"&&(St=[St,St,St,St]),Ft),Ct},Ct.round=function(St){return arguments.length?(ie=St?Math.round:Number,Ct):ie!=Number},Ct.sticky=function(St){return arguments.length?(Ne=St,F=null,Ct):Ne},Ct.ratio=function(St){return arguments.length?(qe=St,Ct):qe},Ct.mode=function(St){return arguments.length?(Ue=St+"",Ct):Ue},Da(Ct,$)},l.random={normal:function(F,$){var ie=arguments.length;return ie<2&&($=1),ie<1&&(F=0),function(){var de,xe,Le;do Le=(de=2*Math.random()-1)*de+(xe=2*Math.random()-1)*xe;while(!Le||Le>1);return F+$*de*Math.sqrt(-2*Math.log(Le)/Le)}},logNormal:function(){var F=l.random.normal.apply(l,arguments);return function(){return Math.exp(F())}},bates:function(F){var $=l.random.irwinHall(F);return function(){return $()/F}},irwinHall:function(F){return function(){for(var $=0,ie=0;ie<F;ie++)$+=Math.random();return $}}},l.scale={};var Zo={floor:O,ceil:O};function Yo(F,$,ie,de){var xe=[],Le=[],Ne=0,Ue=Math.min(F.length,$.length)-1;for(F[Ue]<F[0]&&(F=F.slice().reverse(),$=$.slice().reverse());++Ne<=Ue;)xe.push(ie(F[Ne-1],F[Ne])),Le.push(de($[Ne-1],$[Ne]));return function(qe){var Ye=l.bisect(F,qe,1,Ue)-1;return Le[Ye](xe[Ye](qe))}}function Pi(F,$,ie,de){var xe,Le;function Ne(){var qe=Math.min(F.length,$.length)>2?Yo:Go,Ye=de?ns:jo;return xe=qe(F,$,Ye,ie),Le=qe($,F,Ye,Za),Ue}function Ue(qe){return xe(qe)}return Ue.invert=function(qe){return Le(qe)},Ue.domain=function(qe){return arguments.length?(F=qe.map(Number),Ne()):F},Ue.range=function(qe){return arguments.length?($=qe,Ne()):$},Ue.rangeRound=function(qe){return Ue.range(qe).interpolate(al)},Ue.clamp=function(qe){return arguments.length?(de=qe,Ne()):de},Ue.interpolate=function(qe){return arguments.length?(ie=qe,Ne()):ie},Ue.ticks=function(qe){return ra(F,qe)},Ue.tickFormat=function(qe,Ye){return d3_scale_linearTickFormat(F,qe,Ye)},Ue.nice=function(qe){return Zi(F,qe),Ne()},Ue.copy=function(){return Pi(F,$,ie,de)},Ne()}function Ji(F,$){return l.rebind(F,$,"range","rangeRound","interpolate","clamp")}function Zi(F,$){return Eo(F,di(Oi(F,$)[2])),Eo(F,di(Oi(F,$)[2])),F}function Oi(F,$){$==null&&($=10);var ie=bs(F),de=ie[1]-ie[0],xe=Math.pow(10,Math.floor(Math.log(de/$)/Math.LN10)),Le=$/de*xe;return Le<=.15?xe*=10:Le<=.35?xe*=5:Le<=.75&&(xe*=2),ie[0]=Math.ceil(ie[0]/xe)*xe,ie[1]=Math.floor(ie[1]/xe)*xe+.5*xe,ie[2]=xe,ie}function ra(F,$){return l.range.apply(l,Oi(F,$))}function Lo(F,$,ie,de){function xe(Ue){return(ie?Math.log(Ue<0?0:Ue):-Math.log(Ue>0?0:-Ue))/Math.log($)}function Le(Ue){return ie?Math.pow($,Ue):-Math.pow($,-Ue)}function Ne(Ue){return F(xe(Ue))}return Ne.invert=function(Ue){return Le(F.invert(Ue))},Ne.domain=function(Ue){return arguments.length?(ie=Ue[0]>=0,F.domain((de=Ue.map(Number)).map(xe)),Ne):de},Ne.base=function(Ue){return arguments.length?($=+Ue,F.domain(de.map(xe)),Ne):$},Ne.nice=function(){var Ue=Eo(de.map(xe),ie?Math:Ra);return F.domain(Ue),de=Ue.map(Le),Ne},Ne.ticks=function(){var Ue=bs(de),qe=[],Ye=Ue[0],$e=Ue[1],lt=Math.floor(xe(Ye)),pt=Math.ceil(xe($e)),Et=$%1?2:$;if(isFinite(pt-lt)){if(ie){for(;lt<pt;lt++)for(var Ct=1;Ct<Et;Ct++)qe.push(Le(lt)*Ct);qe.push(Le(lt))}else for(qe.push(Le(lt));lt++<pt;)for(Ct=Et-1;Ct>0;Ct--)qe.push(Le(lt)*Ct);for(lt=0;qe[lt]<Ye;lt++);for(pt=qe.length;qe[pt-1]>$e;pt--);qe=qe.slice(lt,pt)}return qe},Ne.copy=function(){return Lo(F.copy(),$,ie,de)},Ji(Ne,F)}l.scale.linear=function(){return Pi([0,1],[0,1],Za,!1)},l.scale.log=function(){return Lo(l.scale.linear().domain([0,1]),10,!0,[1,10])};var Ra={floor:function(F){return-Math.ceil(-F)},ceil:function(F){return-Math.floor(-F)}};function ji(F,$,ie){var de=_a($),xe=_a(1/$);function Le(Ne){return F(de(Ne))}return Le.invert=function(Ne){return xe(F.invert(Ne))},Le.domain=function(Ne){return arguments.length?(F.domain((ie=Ne.map(Number)).map(de)),Le):ie},Le.ticks=function(Ne){return ra(ie,Ne)},Le.tickFormat=function(Ne,Ue){return d3_scale_linearTickFormat(ie,Ne,Ue)},Le.nice=function(Ne){return Le.domain(Zi(ie,Ne))},Le.exponent=function(Ne){return arguments.length?(de=_a($=Ne),xe=_a(1/$),F.domain(ie.map(de)),Le):$},Le.copy=function(){return ji(F.copy(),$,ie)},Ji(Le,F)}function _a(F){return function($){return $<0?-Math.pow(-$,F):Math.pow($,F)}}function Sa(F,$){var ie,de,xe;function Le(Ue){return de[((ie.get(Ue)||($.t==="range"?ie.set(Ue,F.push(Ue)):NaN))-1)%de.length]}function Ne(Ue,qe){return l.range(F.length).map(function(Ye){return Ue+qe*Ye})}return Le.domain=function(Ue){if(!arguments.length)return F;F=[],ie=new m;for(var qe,Ye=-1,$e=Ue.length;++Ye<$e;)ie.has(qe=Ue[Ye])||ie.set(qe,F.push(qe));return Le[$.t].apply(Le,$.a)},Le.range=function(Ue){return arguments.length?(de=Ue,xe=0,$={t:"range",a:arguments},Le):de},Le.rangePoints=function(Ue,qe){arguments.length<2&&(qe=0);var Ye=Ue[0],$e=Ue[1],lt=F.length<2?(Ye=(Ye+$e)/2,0):($e-Ye)/(F.length-1+qe);return de=Ne(Ye+lt*qe/2,lt),xe=0,$={t:"rangePoints",a:arguments},Le},Le.rangeRoundPoints=function(Ue,qe){arguments.length<2&&(qe=0);var Ye=Ue[0],$e=Ue[1],lt=F.length<2?(Ye=$e=Math.round((Ye+$e)/2),0):($e-Ye)/(F.length-1+qe)|0;return de=Ne(Ye+Math.round(lt*qe/2+($e-Ye-(F.length-1+qe)*lt)/2),lt),xe=0,$={t:"rangeRoundPoints",a:arguments},Le},Le.rangeBands=function(Ue,qe,Ye){arguments.length<2&&(qe=0),arguments.length<3&&(Ye=qe);var $e=Ue[1]<Ue[0],lt=Ue[$e-0],pt=(Ue[1-$e]-lt)/(F.length-qe+2*Ye);return de=Ne(lt+pt*Ye,pt),$e&&de.reverse(),xe=pt*(1-qe),$={t:"rangeBands",a:arguments},Le},Le.rangeRoundBands=function(Ue,qe,Ye){arguments.length<2&&(qe=0),arguments.length<3&&(Ye=qe);var $e=Ue[1]<Ue[0],lt=Ue[$e-0],pt=Ue[1-$e],Et=Math.floor((pt-lt)/(F.length-qe+2*Ye));return de=Ne(lt+Math.round((pt-lt-(F.length-qe)*Et)/2),Et),$e&&de.reverse(),xe=Math.round(Et*(1-qe)),$={t:"rangeRoundBands",a:arguments},Le},Le.rangeBand=function(){return xe},Le.rangeExtent=function(){return bs($.a[0])},Le.copy=function(){return Sa(F,$)},Le.domain(F)}l.scale.pow=function(){return ji(l.scale.linear(),1,[0,1])},l.scale.sqrt=function(){return l.scale.pow().exponent(.5)},l.scale.ordinal=function(){return Sa([],{t:"range",a:[[]]})},l.scale.category10=function(){return l.scale.ordinal().range(Fs)},l.scale.category20=function(){return l.scale.ordinal().range(Ea)},l.scale.category20b=function(){return l.scale.ordinal().range(Ui)},l.scale.category20c=function(){return l.scale.ordinal().range(xr)};var Fs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(qt),Ea=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(qt),Ui=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(qt),xr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(qt);function Ki(F,$){var ie;function de(){var Le=0,Ne=$.length;for(ie=[];++Le<Ne;)ie[Le-1]=l.quantile(F,Le/Ne);return xe}function xe(Le){if(!isNaN(Le=+Le))return $[l.bisect(ie,Le)]}return xe.domain=function(Le){return arguments.length?(F=Le.map(p).filter(c).sort(u),de()):F},xe.range=function(Le){return arguments.length?($=Le,de()):$},xe.quantiles=function(){return ie},xe.invertExtent=function(Le){return(Le=$.indexOf(Le))<0?[NaN,NaN]:[Le>0?ie[Le-1]:F[0],Le<ie.length?ie[Le]:F[F.length-1]]},xe.copy=function(){return Ki(F,$)},de()}function _s(F,$,ie){var de,xe;function Le(Ue){return ie[Math.max(0,Math.min(xe,Math.floor(de*(Ue-F))))]}function Ne(){return de=ie.length/($-F),xe=ie.length-1,Le}return Le.domain=function(Ue){return arguments.length?(F=+Ue[0],$=+Ue[Ue.length-1],Ne()):[F,$]},Le.range=function(Ue){return arguments.length?(ie=Ue,Ne()):ie},Le.invertExtent=function(Ue){return[Ue=(Ue=ie.indexOf(Ue))<0?NaN:Ue/de+F,Ue+1/de]},Le.copy=function(){return _s(F,$,ie)},Ne()}function Bs(F,$){function ie(de){if(de<=de)return $[l.bisect(F,de)]}return ie.domain=function(de){return arguments.length?(F=de,ie):F},ie.range=function(de){return arguments.length?($=de,ie):$},ie.invertExtent=function(de){return de=$.indexOf(de),[F[de-1],F[de]]},ie.copy=function(){return Bs(F,$)},ie}function Wo(F){function $(ie){return+ie}return $.invert=$,$.domain=$.range=function(ie){return arguments.length?(F=ie.map($),$):F},$.ticks=function(ie){return ra(F,ie)},$.tickFormat=function(ie,de){return d3_scale_linearTickFormat(F,ie,de)},$.copy=function(){return Wo(F)},$}function Xo(){return 0}l.scale.quantile=function(){return Ki([],[])},l.scale.quantize=function(){return _s(0,1,[0,1])},l.scale.threshold=function(){return Bs([.5],[0,1])},l.scale.identity=function(){return Wo([0,1])},l.svg={},l.svg.arc=function(){var F=vr,$=Fa,ie=Xo,de=fo,xe=os,Le=ws,Ne=$i;function Ue(){var Ye=Math.max(0,+F.apply(this,arguments)),$e=Math.max(0,+$.apply(this,arguments)),lt=xe.apply(this,arguments)-Ze,pt=Le.apply(this,arguments)-Ze,Et=Math.abs(pt-lt),Ct=lt>pt?0:1;if($e<Ye&&(St=$e,$e=Ye,Ye=St),Et>=kt)return qe($e,Ct)+(Ye?qe(Ye,1-Ct):"")+"Z";var St,Ft,Lt,tn,Zt,Ht,dn,vn,zn,Rn,Vn,Xn,or=0,ar=0,fr=[];if((tn=(+Ne.apply(this,arguments)||0)/2)&&(Lt=de===fo?Math.sqrt(Ye*Ye+$e*$e):+de.apply(this,arguments),Ct||(ar*=-1),$e&&(ar=We(Lt/$e*Math.sin(tn))),Ye&&(or=We(Lt/Ye*Math.sin(tn)))),$e){Zt=$e*Math.cos(lt+ar),Ht=$e*Math.sin(lt+ar),dn=$e*Math.cos(pt-ar),vn=$e*Math.sin(pt-ar);var mr=Math.abs(pt-lt-2*ar)<=Mt?0:1;if(ar&&Ba(Zt,Ht,dn,vn)===Ct^mr){var Lr=(lt+pt)/2;Zt=$e*Math.cos(Lr),Ht=$e*Math.sin(Lr),dn=vn=null}}else Zt=Ht=0;if(Ye){zn=Ye*Math.cos(pt-or),Rn=Ye*Math.sin(pt-or),Vn=Ye*Math.cos(lt+or),Xn=Ye*Math.sin(lt+or);var Nn=Math.abs(lt-pt+2*or)<=Mt?0:1;if(or&&Ba(zn,Rn,Vn,Xn)===1-Ct^Nn){var ir=(lt+pt)/2;zn=Ye*Math.cos(ir),Rn=Ye*Math.sin(ir),Vn=Xn=null}}else zn=Rn=0;if(Et>it&&(St=Math.min(Math.abs($e-Ye)/2,+ie.apply(this,arguments)))>.001){Ft=Ye<$e^Ct?0:1;var hr=St,yr=St;if(Et<Mt){var Mr=Vn==null?[zn,Rn]:dn==null?[Zt,Ht]:At([Zt,Ht],[Vn,Xn],[dn,vn],[zn,Rn]),Ir=Zt-Mr[0],Br=Ht-Mr[1],Zr=dn-Mr[0],oi=vn-Mr[1],si=1/Math.sin(Math.acos((Ir*Zr+Br*oi)/(Math.sqrt(Ir*Ir+Br*Br)*Math.sqrt(Zr*Zr+oi*oi)))/2),Yr=Math.sqrt(Mr[0]*Mr[0]+Mr[1]*Mr[1]);yr=Math.min(St,(Ye-Yr)/(si-1)),hr=Math.min(St,($e-Yr)/(si+1))}if(dn!=null){var wi=La(Vn==null?[zn,Rn]:[Vn,Xn],[Zt,Ht],$e,hr,Ct),Hi=La([dn,vn],[zn,Rn],$e,hr,Ct);St===hr?fr.push("M",wi[0],"A",hr,",",hr," 0 0,",Ft," ",wi[1],"A",$e,",",$e," 0 ",1-Ct^Ba(wi[1][0],wi[1][1],Hi[1][0],Hi[1][1]),",",Ct," ",Hi[1],"A",hr,",",hr," 0 0,",Ft," ",Hi[0]):fr.push("M",wi[0],"A",hr,",",hr," 0 1,",Ft," ",Hi[0])}else fr.push("M",Zt,",",Ht);if(Vn!=null){var Li=La([Zt,Ht],[Vn,Xn],Ye,-yr,Ct),Ri=La([zn,Rn],dn==null?[Zt,Ht]:[dn,vn],Ye,-yr,Ct);St===yr?fr.push("L",Ri[0],"A",yr,",",yr," 0 0,",Ft," ",Ri[1],"A",Ye,",",Ye," 0 ",Ct^Ba(Ri[1][0],Ri[1][1],Li[1][0],Li[1][1]),",",1-Ct," ",Li[1],"A",yr,",",yr," 0 0,",Ft," ",Li[0]):fr.push("L",Ri[0],"A",yr,",",yr," 0 0,",Ft," ",Li[0])}else fr.push("L",zn,",",Rn)}else fr.push("M",Zt,",",Ht),dn!=null&&fr.push("A",$e,",",$e," 0 ",mr,",",Ct," ",dn,",",vn),fr.push("L",zn,",",Rn),Vn!=null&&fr.push("A",Ye,",",Ye," 0 ",Nn,",",1-Ct," ",Vn,",",Xn);return fr.push("Z"),fr.join("")}function qe(Ye,$e){return"M0,"+Ye+"A"+Ye+","+Ye+" 0 1,"+$e+" 0,"+-Ye+"A"+Ye+","+Ye+" 0 1,"+$e+" 0,"+Ye}return Ue.innerRadius=function(Ye){return arguments.length?(F=Cn(Ye),Ue):F},Ue.outerRadius=function(Ye){return arguments.length?($=Cn(Ye),Ue):$},Ue.cornerRadius=function(Ye){return arguments.length?(ie=Cn(Ye),Ue):ie},Ue.padRadius=function(Ye){return arguments.length?(de=Ye==fo?fo:Cn(Ye),Ue):de},Ue.startAngle=function(Ye){return arguments.length?(xe=Cn(Ye),Ue):xe},Ue.endAngle=function(Ye){return arguments.length?(Le=Cn(Ye),Ue):Le},Ue.padAngle=function(Ye){return arguments.length?(Ne=Cn(Ye),Ue):Ne},Ue.centroid=function(){var Ye=(+F.apply(this,arguments)+ +$.apply(this,arguments))/2,$e=(+xe.apply(this,arguments)+ +Le.apply(this,arguments))/2-Ze;return[Math.cos($e)*Ye,Math.sin($e)*Ye]},Ue};var fo="auto";function vr(F){return F.innerRadius}function Fa(F){return F.outerRadius}function os(F){return F.startAngle}function ws(F){return F.endAngle}function $i(F){return F&&F.padAngle}function Ba(F,$,ie,de){return(F-ie)*$-($-de)*F>0?0:1}function La(F,$,ie,de,xe){var Le=F[0]-$[0],Ne=F[1]-$[1],Ue=(xe?de:-de)/Math.sqrt(Le*Le+Ne*Ne),qe=Ue*Ne,Ye=-Ue*Le,$e=F[0]+qe,lt=F[1]+Ye,pt=$[0]+qe,Et=$[1]+Ye,Ct=($e+pt)/2,St=(lt+Et)/2,Ft=pt-$e,Lt=Et-lt,tn=Ft*Ft+Lt*Lt,Zt=ie-de,Ht=$e*Et-pt*lt,dn=(Lt<0?-1:1)*Math.sqrt(Math.max(0,Zt*Zt*tn-Ht*Ht)),vn=(Ht*Lt-Ft*dn)/tn,zn=(-Ht*Ft-Lt*dn)/tn,Rn=(Ht*Lt+Ft*dn)/tn,Vn=(-Ht*Ft+Lt*dn)/tn,Xn=vn-Ct,or=zn-St,ar=Rn-Ct,fr=Vn-St;return Xn*Xn+or*or>ar*ar+fr*fr&&(vn=Rn,zn=Vn),[[vn-qe,zn-Ye],[vn*ie/Zt,zn*ie/Zt]]}function wa(){return!0}function Xa(F){var $=Bn,ie=Ln,de=wa,xe=Ii,Le=xe.key,Ne=.7;function Ue(qe){var Ye,$e=[],lt=[],pt=-1,Et=qe.length,Ct=Cn($),St=Cn(ie);function Ft(){$e.push("M",xe(F(lt),Ne))}for(;++pt<Et;)de.call(this,Ye=qe[pt],pt)?lt.push([+Ct.call(this,Ye,pt),+St.call(this,Ye,pt)]):lt.length&&(Ft(),lt=[]);return lt.length&&Ft(),$e.length?$e.join(""):null}return Ue.x=function(qe){return arguments.length?($=qe,Ue):$},Ue.y=function(qe){return arguments.length?(ie=qe,Ue):ie},Ue.defined=function(qe){return arguments.length?(de=qe,Ue):de},Ue.interpolate=function(qe){return arguments.length?(Le=typeof qe=="function"?xe=qe:(xe=ho.get(qe)||Ii).key,Ue):Le},Ue.tension=function(qe){return arguments.length?(Ne=qe,Ue):Ne},Ue}l.svg.line=function(){return Xa(O)};var ho=l.map({linear:Ii,"linear-closed":Jo,step:function(F){for(var $=0,ie=F.length,de=F[0],xe=[de[0],",",de[1]];++$<ie;)xe.push("H",(de[0]+(de=F[$])[0])/2,"V",de[1]);return ie>1&&xe.push("H",de[0]),xe.join("")},"step-before":ss,"step-after":Vi,basis:pa,"basis-open":function(F){if(F.length<4)return Ii(F);for(var $,ie=[],de=-1,xe=F.length,Le=[0],Ne=[0];++de<3;)$=F[de],Le.push($[0]),Ne.push($[1]);for(ie.push(Di(_i,Le)+","+Di(_i,Ne)),--de;++de<xe;)$=F[de],Le.shift(),Le.push($[0]),Ne.shift(),Ne.push($[1]),Xr(ie,Le,Ne);return ie.join("")},"basis-closed":function(F){for(var $,ie,de=-1,xe=F.length,Le=xe+4,Ne=[],Ue=[];++de<4;)ie=F[de%xe],Ne.push(ie[0]),Ue.push(ie[1]);for($=[Di(_i,Ne),",",Di(_i,Ue)],--de;++de<Le;)ie=F[de%xe],Ne.shift(),Ne.push(ie[0]),Ue.shift(),Ue.push(ie[1]),Xr($,Ne,Ue);return $.join("")},bundle:function(F,$){var ie=F.length-1;if(ie)for(var de,xe,Le=F[0][0],Ne=F[0][1],Ue=F[ie][0]-Le,qe=F[ie][1]-Ne,Ye=-1;++Ye<=ie;)xe=Ye/ie,(de=F[Ye])[0]=$*de[0]+(1-$)*(Le+xe*Ue),de[1]=$*de[1]+(1-$)*(Ne+xe*qe);return pa(F)},cardinal:function(F,$){return F.length<3?Ii(F):F[0]+ei(F,Ts(F,$))},"cardinal-open":function(F,$){return F.length<4?Ii(F):F[1]+ei(F.slice(1,-1),Ts(F,$))},"cardinal-closed":function(F,$){return F.length<3?Jo(F):F[0]+ei((F.push(F[0]),F),Ts([F[F.length-2]].concat(F,[F[1]]),$))},monotone:function(F){return F.length<3?Ii(F):F[0]+ei(F,function($){for(var ie,de,xe,Le,Ne=[],Ue=function($e){for(var lt=0,pt=$e.length-1,Et=[],Ct=$e[0],St=$e[1],Ft=Et[0]=Ta(Ct,St);++lt<pt;)Et[lt]=(Ft+(Ft=Ta(Ct=St,St=$e[lt+1])))/2;return Et[lt]=Ft,Et}($),qe=-1,Ye=$.length-1;++qe<Ye;)ie=Ta($[qe],$[qe+1]),y(ie)<it?Ue[qe]=Ue[qe+1]=0:(Le=(de=Ue[qe]/ie)*de+(xe=Ue[qe+1]/ie)*xe)>9&&(Le=3*ie/Math.sqrt(Le),Ue[qe]=Le*de,Ue[qe+1]=Le*xe);for(qe=-1;++qe<=Ye;)Le=($[Math.min(Ye,qe+1)][0]-$[Math.max(0,qe-1)][0])/(6*(1+Ue[qe]*Ue[qe])),Ne.push([Le||0,Ue[qe]*Le||0]);return Ne}(F))}});function Ii(F){return F.length>1?F.join("L"):F+"Z"}function Jo(F){return F.join("L")+"Z"}function ss(F){for(var $=0,ie=F.length,de=F[0],xe=[de[0],",",de[1]];++$<ie;)xe.push("V",(de=F[$])[1],"H",de[0]);return xe.join("")}function Vi(F){for(var $=0,ie=F.length,de=F[0],xe=[de[0],",",de[1]];++$<ie;)xe.push("H",(de=F[$])[0],"V",de[1]);return xe.join("")}function ei(F,$){if($.length<1||F.length!=$.length&&F.length!=$.length+2)return Ii(F);var ie=F.length!=$.length,de="",xe=F[0],Le=F[1],Ne=$[0],Ue=Ne,qe=1;if(ie&&(de+="Q"+(Le[0]-2*Ne[0]/3)+","+(Le[1]-2*Ne[1]/3)+","+Le[0]+","+Le[1],xe=F[1],qe=2),$.length>1){Ue=$[1],Le=F[qe],qe++,de+="C"+(xe[0]+Ne[0])+","+(xe[1]+Ne[1])+","+(Le[0]-Ue[0])+","+(Le[1]-Ue[1])+","+Le[0]+","+Le[1];for(var Ye=2;Ye<$.length;Ye++,qe++)Le=F[qe],Ue=$[Ye],de+="S"+(Le[0]-Ue[0])+","+(Le[1]-Ue[1])+","+Le[0]+","+Le[1]}if(ie){var $e=F[qe];de+="Q"+(Le[0]+2*Ue[0]/3)+","+(Le[1]+2*Ue[1]/3)+","+$e[0]+","+$e[1]}return de}function Ts(F,$){for(var ie,de=[],xe=(1-$)/2,Le=F[0],Ne=F[1],Ue=1,qe=F.length;++Ue<qe;)ie=Le,Le=Ne,Ne=F[Ue],de.push([xe*(Ne[0]-ie[0]),xe*(Ne[1]-ie[1])]);return de}function pa(F){if(F.length<3)return Ii(F);var $=1,ie=F.length,de=F[0],xe=de[0],Le=de[1],Ne=[xe,xe,xe,(de=F[1])[0]],Ue=[Le,Le,Le,de[1]],qe=[xe,",",Le,"L",Di(_i,Ne),",",Di(_i,Ue)];for(F.push(F[ie-1]);++$<=ie;)de=F[$],Ne.shift(),Ne.push(de[0]),Ue.shift(),Ue.push(de[1]),Xr(qe,Ne,Ue);return F.pop(),qe.push("L",de),qe.join("")}function Di(F,$){return F[0]*$[0]+F[1]*$[1]+F[2]*$[2]+F[3]*$[3]}ho.forEach(function(F,$){$.key=F,$.closed=/-closed$/.test(F)});var Ja=[0,2/3,1/3,0],Ks=[0,1/3,2/3,0],_i=[0,1/6,2/3,1/6];function Xr(F,$,ie){F.push("C",Di(Ja,$),",",Di(Ja,ie),",",Di(Ks,$),",",Di(Ks,ie),",",Di(_i,$),",",Di(_i,ie))}function Ta(F,$){return($[1]-F[1])/($[0]-F[0])}function Ka(F){for(var $,ie,de,xe=-1,Le=F.length;++xe<Le;)ie=($=F[xe])[0],de=$[1]-Ze,$[0]=ie*Math.cos(de),$[1]=ie*Math.sin(de);return F}function Na(F){var $=Bn,ie=Bn,de=0,xe=Ln,Le=wa,Ne=Ii,Ue=Ne.key,qe=Ne,Ye="L",$e=.7;function lt(pt){var Et,Ct,St,Ft=[],Lt=[],tn=[],Zt=-1,Ht=pt.length,dn=Cn($),vn=Cn(de),zn=$===ie?function(){return Ct}:Cn(ie),Rn=de===xe?function(){return St}:Cn(xe);function Vn(){Ft.push("M",Ne(F(tn),$e),Ye,qe(F(Lt.reverse()),$e),"Z")}for(;++Zt<Ht;)Le.call(this,Et=pt[Zt],Zt)?(Lt.push([Ct=+dn.call(this,Et,Zt),St=+vn.call(this,Et,Zt)]),tn.push([+zn.call(this,Et,Zt),+Rn.call(this,Et,Zt)])):Lt.length&&(Vn(),Lt=[],tn=[]);return Lt.length&&Vn(),Ft.length?Ft.join(""):null}return lt.x=function(pt){return arguments.length?($=ie=pt,lt):ie},lt.x0=function(pt){return arguments.length?($=pt,lt):$},lt.x1=function(pt){return arguments.length?(ie=pt,lt):ie},lt.y=function(pt){return arguments.length?(de=xe=pt,lt):xe},lt.y0=function(pt){return arguments.length?(de=pt,lt):de},lt.y1=function(pt){return arguments.length?(xe=pt,lt):xe},lt.defined=function(pt){return arguments.length?(Le=pt,lt):Le},lt.interpolate=function(pt){return arguments.length?(Ue=typeof pt=="function"?Ne=pt:(Ne=ho.get(pt)||Ii).key,qe=Ne.reverse||Ne,Ye=Ne.closed?"M":"L",lt):Ue},lt.tension=function(pt){return arguments.length?($e=pt,lt):$e},lt}function Ns(F){return F.source}function Co(F){return F.target}function Ko(F){return F.radius}function Ei(F){return[F.x,F.y]}function Yi(){return 64}function Tr(){return"circle"}function Ar(F){var $=Math.sqrt(F/Mt);return"M0,"+$+"A"+$+","+$+" 0 1,1 0,"+-$+"A"+$+","+$+" 0 1,1 0,"+$+"Z"}l.svg.line.radial=function(){var F=Xa(Ka);return F.radius=F.x,delete F.x,F.angle=F.y,delete F.y,F},ss.reverse=Vi,Vi.reverse=ss,l.svg.area=function(){return Na(O)},l.svg.area.radial=function(){var F=Na(Ka);return F.radius=F.x,delete F.x,F.innerRadius=F.x0,delete F.x0,F.outerRadius=F.x1,delete F.x1,F.angle=F.y,delete F.y,F.startAngle=F.y0,delete F.y0,F.endAngle=F.y1,delete F.y1,F},l.svg.chord=function(){var F=Ns,$=Co,ie=Ko,de=os,xe=ws;function Le(Ye,$e){var lt,pt,Et=Ne(this,F,Ye,$e),Ct=Ne(this,$,Ye,$e);return"M"+Et.p0+Ue(Et.r,Et.p1,Et.a1-Et.a0)+(pt=Ct,((lt=Et).a0==pt.a0&&lt.a1==pt.a1?qe(Et.r,Et.p1,Et.r,Et.p0):qe(Et.r,Et.p1,Ct.r,Ct.p0)+Ue(Ct.r,Ct.p1,Ct.a1-Ct.a0)+qe(Ct.r,Ct.p1,Et.r,Et.p0))+"Z")}function Ne(Ye,$e,lt,pt){var Et=$e.call(Ye,lt,pt),Ct=ie.call(Ye,Et,pt),St=de.call(Ye,Et,pt)-Ze,Ft=xe.call(Ye,Et,pt)-Ze;return{r:Ct,a0:St,a1:Ft,p0:[Ct*Math.cos(St),Ct*Math.sin(St)],p1:[Ct*Math.cos(Ft),Ct*Math.sin(Ft)]}}function Ue(Ye,$e,lt){return"A"+Ye+","+Ye+" 0 "+ +(lt>Mt)+",1 "+$e}function qe(Ye,$e,lt,pt){return"Q 0,0 "+pt}return Le.radius=function(Ye){return arguments.length?(ie=Cn(Ye),Le):ie},Le.source=function(Ye){return arguments.length?(F=Cn(Ye),Le):F},Le.target=function(Ye){return arguments.length?($=Cn(Ye),Le):$},Le.startAngle=function(Ye){return arguments.length?(de=Cn(Ye),Le):de},Le.endAngle=function(Ye){return arguments.length?(xe=Cn(Ye),Le):xe},Le},l.svg.diagonal=function(){var F=Ns,$=Co,ie=Ei;function de(xe,Le){var Ne=F.call(this,xe,Le),Ue=$.call(this,xe,Le),qe=(Ne.y+Ue.y)/2,Ye=[Ne,{x:Ne.x,y:qe},{x:Ue.x,y:qe},Ue];return"M"+(Ye=Ye.map(ie))[0]+"C"+Ye[1]+" "+Ye[2]+" "+Ye[3]}return de.source=function(xe){return arguments.length?(F=Cn(xe),de):F},de.target=function(xe){return arguments.length?($=Cn(xe),de):$},de.projection=function(xe){return arguments.length?(ie=xe,de):ie},de},l.svg.diagonal.radial=function(){var F=l.svg.diagonal(),$=Ei,ie=F.projection;return F.projection=function(de){return arguments.length?ie(function(xe){return function(){var Le=xe.apply(this,arguments),Ne=Le[0],Ue=Le[1]-Ze;return[Ne*Math.cos(Ue),Ne*Math.sin(Ue)]}}($=de)):$},F},l.svg.symbol=function(){var F=Tr,$=Yi;function ie(de,xe){return(ls.get(F.call(this,de,xe))||Ar)($.call(this,de,xe))}return ie.type=function(de){return arguments.length?(F=Cn(de),ie):F},ie.size=function(de){return arguments.length?($=Cn(de),ie):$},ie};var ls=l.map({circle:Ar,cross:function(F){var $=Math.sqrt(F/5)/2;return"M"+-3*$+","+-$+"H"+-$+"V"+-3*$+"H"+$+"V"+-$+"H"+3*$+"V"+$+"H"+$+"V"+3*$+"H"+-$+"V"+$+"H"+-3*$+"Z"},diamond:function(F){var $=Math.sqrt(F/(2*Po)),ie=$*Po;return"M0,"+-$+"L"+ie+",0 0,"+$+" "+-ie+",0Z"},square:function(F){var $=Math.sqrt(F)/2;return"M"+-$+","+-$+"L"+$+","+-$+" "+$+","+$+" "+-$+","+$+"Z"},"triangle-down":function(F){var $=Math.sqrt(F/ia),ie=$*ia/2;return"M0,"+ie+"L"+$+","+-ie+" "+-$+","+-ie+"Z"},"triangle-up":function(F){var $=Math.sqrt(F/ia),ie=$*ia/2;return"M0,"+-ie+"L"+$+","+ie+" "+-$+","+ie+"Z"}});l.svg.symbolTypes=ls.keys();var ia=Math.sqrt(3),Po=Math.tan(30*Xe);pe.transition=function(F){for(var $,ie,de=Oo||++zi,xe=$o(F),Le=[],Ne=Io||{time:Date.now(),ease:ro,delay:0,duration:250},Ue=-1,qe=this.length;++Ue<qe;){Le.push($=[]);for(var Ye=this[Ue],$e=-1,lt=Ye.length;++$e<lt;)(ie=Ye[$e])&&cs(ie,$e,xe,de,Ne),$.push(ie)}return Xi(Le,xe,de)},pe.interrupt=function(F){return this.each(F==null?Wi:us($o(F)))};var Wi=us($o());function us(F){return function(){var $,ie,de;($=this[F])&&(de=$[ie=$.active])&&(de.timer.c=null,de.timer.t=NaN,--$.count?delete $[ie]:delete this[F],$.active+=.5,de.event&&de.event.interrupt.call(this,this.__data__,de.index))}}function Xi(F,$,ie){return Q(F,Cr),F.namespace=$,F.id=ie,F}var Oo,Io,Cr=[],zi=0;function $a(F,$,ie,de){var xe=F.id,Le=F.namespace;return ye(F,typeof ie=="function"?function(Ne,Ue,qe){Ne[Le][xe].tween.set($,de(ie.call(Ne,Ne.__data__,Ue,qe)))}:(ie=de(ie),function(Ne){Ne[Le][xe].tween.set($,ie)}))}function da(F){return F==null&&(F=""),function(){this.textContent=F}}function $o(F){return F==null?"__transition__":"__transition_"+F+"__"}function cs(F,$,ie,de,xe){var Le,Ne,Ue,qe,Ye,$e=F[ie]||(F[ie]={active:0,count:0}),lt=$e[de];function pt(Ct){var St=$e.active,Ft=$e[St];for(var Lt in Ft&&(Ft.timer.c=null,Ft.timer.t=NaN,--$e.count,delete $e[St],Ft.event&&Ft.event.interrupt.call(F,F.__data__,Ft.index)),$e)if(+Lt<de){var tn=$e[Lt];tn.timer.c=null,tn.timer.t=NaN,--$e.count,delete $e[Lt]}Ne.c=Et,$t(function(){return Ne.c&&Et(Ct||1)&&(Ne.c=null,Ne.t=NaN),1},0,Le),$e.active=de,lt.event&&lt.event.start.call(F,F.__data__,$),Ye=[],lt.tween.forEach(function(Zt,Ht){(Ht=Ht.call(F,F.__data__,$))&&Ye.push(Ht)}),qe=lt.ease,Ue=lt.duration}function Et(Ct){for(var St=Ct/Ue,Ft=qe(St),Lt=Ye.length;Lt>0;)Ye[--Lt].call(F,Ft);if(St>=1)return lt.event&&lt.event.end.call(F,F.__data__,$),--$e.count?delete $e[de]:delete F[ie],1}lt||(Le=xe.time,Ne=$t(function(Ct){var St=lt.delay;if(Ne.t=St+Le,St<=Ct)return pt(Ct-St);Ne.c=pt},0,Le),lt=$e[de]={tween:new m,time:Le,timer:Ne,delay:xe.delay,duration:xe.duration,ease:xe.ease,index:$},xe=null,++$e.count)}Cr.call=pe.call,Cr.empty=pe.empty,Cr.node=pe.node,Cr.size=pe.size,l.transition=function(F,$){return F&&F.transition?Oo?F.transition($):F:l.selection().transition(F)},l.transition.prototype=Cr,Cr.select=function(F){var $,ie,de,xe=this.id,Le=this.namespace,Ne=[];F=ge(F);for(var Ue=-1,qe=this.length;++Ue<qe;){Ne.push($=[]);for(var Ye=this[Ue],$e=-1,lt=Ye.length;++$e<lt;)(de=Ye[$e])&&(ie=F.call(de,de.__data__,$e,Ue))?("__data__"in de&&(ie.__data__=de.__data__),cs(ie,$e,Le,xe,de[Le][xe]),$.push(ie)):$.push(null)}return Xi(Ne,Le,xe)},Cr.selectAll=function(F){var $,ie,de,xe,Le,Ne=this.id,Ue=this.namespace,qe=[];F=_e(F);for(var Ye=-1,$e=this.length;++Ye<$e;)for(var lt=this[Ye],pt=-1,Et=lt.length;++pt<Et;)if(de=lt[pt]){Le=de[Ue][Ne],ie=F.call(de,de.__data__,pt,Ye),qe.push($=[]);for(var Ct=-1,St=ie.length;++Ct<St;)(xe=ie[Ct])&&cs(xe,Ct,Ue,Ne,Le),$.push(xe)}return Xi(qe,Ue,Ne)},Cr.filter=function(F){var $,ie,de=[];typeof F!="function"&&(F=ce(F));for(var xe=0,Le=this.length;xe<Le;xe++){de.push($=[]);for(var Ne,Ue=0,qe=(Ne=this[xe]).length;Ue<qe;Ue++)(ie=Ne[Ue])&&F.call(ie,ie.__data__,Ue,xe)&&$.push(ie)}return Xi(de,this.namespace,this.id)},Cr.tween=function(F,$){var ie=this.id,de=this.namespace;return arguments.length<2?this.node()[de][ie].tween.get(F):ye(this,$==null?function(xe){xe[de][ie].tween.remove(F)}:function(xe){xe[de][ie].tween.set(F,$)})},Cr.attr=function(F,$){if(arguments.length<2){for($ in F)this.attr($,F[$]);return this}var ie=F=="transform"?bo:Za,de=l.ns.qualify(F);function xe(){this.removeAttribute(de)}function Le(){this.removeAttributeNS(de.space,de.local)}return $a(this,"attr."+F,$,de.local?function(Ne){return Ne==null?Le:(Ne+="",function(){var Ue,qe=this.getAttributeNS(de.space,de.local);return qe!==Ne&&(Ue=ie(qe,Ne),function(Ye){this.setAttributeNS(de.space,de.local,Ue(Ye))})})}:function(Ne){return Ne==null?xe:(Ne+="",function(){var Ue,qe=this.getAttribute(de);return qe!==Ne&&(Ue=ie(qe,Ne),function(Ye){this.setAttribute(de,Ue(Ye))})})})},Cr.attrTween=function(F,$){var ie=l.ns.qualify(F);return this.tween("attr."+F,ie.local?function(de,xe){var Le=$.call(this,de,xe,this.getAttributeNS(ie.space,ie.local));return Le&&function(Ne){this.setAttributeNS(ie.space,ie.local,Le(Ne))}}:function(de,xe){var Le=$.call(this,de,xe,this.getAttribute(ie));return Le&&function(Ne){this.setAttribute(ie,Le(Ne))}})},Cr.style=function(F,$,ie){var de=arguments.length;if(de<3){if(typeof F!="string"){for(ie in de<2&&($=""),F)this.style(ie,F[ie],$);return this}ie=""}function xe(){this.style.removeProperty(F)}return $a(this,"style."+F,$,function(Le){return Le==null?xe:(Le+="",function(){var Ne,Ue=t(this).getComputedStyle(this,null).getPropertyValue(F);return Ue!==Le&&(Ne=Za(Ue,Le),function(qe){this.style.setProperty(F,Ne(qe),ie)})})})},Cr.styleTween=function(F,$,ie){return arguments.length<3&&(ie=""),this.tween("style."+F,function(de,xe){var Le=$.call(this,de,xe,t(this).getComputedStyle(this,null).getPropertyValue(F));return Le&&function(Ne){this.style.setProperty(F,Le(Ne),ie)}})},Cr.text=function(F){return $a(this,"text",F,da)},Cr.remove=function(){var F=this.namespace;return this.each("end.transition",function(){var $;this[F].count<2&&($=this.parentNode)&&$.removeChild(this)})},Cr.ease=function(F){var $=this.id,ie=this.namespace;return arguments.length<1?this.node()[ie][$].ease:(typeof F!="function"&&(F=l.ease.apply(l,arguments)),ye(this,function(de){de[ie][$].ease=F}))},Cr.delay=function(F){var $=this.id,ie=this.namespace;return arguments.length<1?this.node()[ie][$].delay:ye(this,typeof F=="function"?function(de,xe,Le){de[ie][$].delay=+F.call(de,de.__data__,xe,Le)}:(F=+F,function(de){de[ie][$].delay=F}))},Cr.duration=function(F){var $=this.id,ie=this.namespace;return arguments.length<1?this.node()[ie][$].duration:ye(this,typeof F=="function"?function(de,xe,Le){de[ie][$].duration=Math.max(1,F.call(de,de.__data__,xe,Le))}:(F=Math.max(1,F),function(de){de[ie][$].duration=F}))},Cr.each=function(F,$){var ie=this.id,de=this.namespace;if(arguments.length<2){var xe=Io,Le=Oo;try{Oo=ie,ye(this,function(Ne,Ue,qe){Io=Ne[de][ie],F.call(Ne,Ne.__data__,Ue,qe)})}finally{Io=xe,Oo=Le}}else ye(this,function(Ne){var Ue=Ne[de][ie];(Ue.event||(Ue.event=l.dispatch("start","end","interrupt"))).on(F,$)});return this},Cr.transition=function(){for(var F,$,ie,de=this.id,xe=++zi,Le=this.namespace,Ne=[],Ue=0,qe=this.length;Ue<qe;Ue++){Ne.push(F=[]);for(var Ye,$e=0,lt=(Ye=this[Ue]).length;$e<lt;$e++)($=Ye[$e])&&cs($,$e,Le,xe,{time:(ie=$[Le][de]).time,ease:ie.ease,delay:ie.delay+ie.duration,duration:ie.duration}),F.push($)}return Xi(Ne,Le,xe)},l.svg.axis=function(){var F,$=l.scale.linear(),ie=Qo,de=6,xe=6,Le=3,Ne=[10],Ue=null;function qe(Ye){Ye.each(function(){var $e,lt=l.select(this),pt=this.__chart__||$,Et=this.__chart__=$.copy(),Ct=Ue??(Et.ticks?Et.ticks.apply(Et,Ne):Et.domain()),St=F??(Et.tickFormat?Et.tickFormat.apply(Et,Ne):O),Ft=lt.selectAll(".tick").data(Ct,Et),Lt=Ft.enter().insert("g",".domain").attr("class","tick").style("opacity",it),tn=l.transition(Ft.exit()).style("opacity",it).remove(),Zt=l.transition(Ft.order()).style("opacity",1),Ht=Math.max(de,0)+Le,dn=co(Et),vn=lt.selectAll(".domain").data([0]),zn=(vn.enter().append("path").attr("class","domain"),l.transition(vn));Lt.append("line"),Lt.append("text");var Rn,Vn,Xn,or,ar=Lt.select("line"),fr=Zt.select("line"),mr=Ft.select("text").text(St),Lr=Lt.select("text"),Nn=Zt.select("text"),ir=ie==="top"||ie==="left"?-1:1;if(ie==="bottom"||ie==="top"?($e=R,Rn="x",Xn="y",Vn="x2",or="y2",mr.attr("dy",ir<0?"0em":".71em").style("text-anchor","middle"),zn.attr("d","M"+dn[0]+","+ir*xe+"V0H"+dn[1]+"V"+ir*xe)):($e=U,Rn="y",Xn="x",Vn="y2",or="x2",mr.attr("dy",".32em").style("text-anchor",ir<0?"end":"start"),zn.attr("d","M"+ir*xe+","+dn[0]+"H0V"+dn[1]+"H"+ir*xe)),ar.attr(or,ir*de),Lr.attr(Xn,ir*Ht),fr.attr(Vn,0).attr(or,ir*de),Nn.attr(Rn,0).attr(Xn,ir*Ht),Et.rangeBand){var hr=Et,yr=hr.rangeBand()/2;pt=Et=function(Mr){return hr(Mr)+yr}}else pt.rangeBand?pt=Et:tn.call($e,Et,pt);Lt.call($e,pt,Et),Zt.call($e,Et,Et)})}return qe.scale=function(Ye){return arguments.length?($=Ye,qe):$},qe.orient=function(Ye){return arguments.length?(ie=Ye in po?Ye+"":Qo,qe):ie},qe.ticks=function(){return arguments.length?(Ne=b(arguments),qe):Ne},qe.tickValues=function(Ye){return arguments.length?(Ue=Ye,qe):Ue},qe.tickFormat=function(Ye){return arguments.length?(F=Ye,qe):F},qe.tickSize=function(Ye){var $e=arguments.length;return $e?(de=+Ye,xe=+arguments[$e-1],qe):de},qe.innerTickSize=function(Ye){return arguments.length?(de=+Ye,qe):de},qe.outerTickSize=function(Ye){return arguments.length?(xe=+Ye,qe):xe},qe.tickPadding=function(Ye){return arguments.length?(Le=+Ye,qe):Le},qe.tickSubdivide=function(){return arguments.length&&qe},qe};var Qo="bottom",po={top:1,right:1,bottom:1,left:1};function R(F,$,ie){F.attr("transform",function(de){var xe=$(de);return"translate("+(isFinite(xe)?xe:ie(de))+",0)"})}function U(F,$,ie){F.attr("transform",function(de){var xe=$(de);return"translate(0,"+(isFinite(xe)?xe:ie(de))+")"})}l.svg.brush=function(){var F,$,ie=Y($e,"brushstart","brush","brushend"),de=null,xe=null,Le=[0,0],Ne=[0,0],Ue=!0,qe=!0,Ye=X[0];function $e(St){St.each(function(){var Ft=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ct).on("touchstart.brush",Ct),Lt=Ft.selectAll(".background").data([0]);Lt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ft.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var tn=Ft.selectAll(".resize").data(Ye,O);tn.exit().remove(),tn.enter().append("g").attr("class",function(vn){return"resize "+vn}).style("cursor",function(vn){return j[vn]}).append("rect").attr("x",function(vn){return/[ew]$/.test(vn)?-3:null}).attr("y",function(vn){return/^[ns]/.test(vn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),tn.style("display",$e.empty()?"none":null);var Zt,Ht=l.transition(Ft),dn=l.transition(Lt);de&&(Zt=co(de),dn.attr("x",Zt[0]).attr("width",Zt[1]-Zt[0]),pt(Ht)),xe&&(Zt=co(xe),dn.attr("y",Zt[0]).attr("height",Zt[1]-Zt[0]),Et(Ht)),lt(Ht)})}function lt(St){St.selectAll(".resize").attr("transform",function(Ft){return"translate("+Le[+/e$/.test(Ft)]+","+Ne[+/^s/.test(Ft)]+")"})}function pt(St){St.select(".extent").attr("x",Le[0]),St.selectAll(".extent,.n>rect,.s>rect").attr("width",Le[1]-Le[0])}function Et(St){St.select(".extent").attr("y",Ne[0]),St.selectAll(".extent,.e>rect,.w>rect").attr("height",Ne[1]-Ne[0])}function Ct(){var St,Ft,Lt=this,tn=l.select(l.event.target),Zt=ie.of(Lt,arguments),Ht=l.select(Lt),dn=tn.datum(),vn=!/^(n|s)$/.test(dn)&&de,zn=!/^(e|w)$/.test(dn)&&xe,Rn=tn.classed("extent"),Vn=vt(Lt),Xn=l.mouse(Lt),or=l.select(t(Lt)).on("keydown.brush",function(){l.event.keyCode==32&&(Rn||(St=null,Xn[0]-=Le[1],Xn[1]-=Ne[1],Rn=2),K())}).on("keyup.brush",function(){l.event.keyCode==32&&Rn==2&&(Xn[0]+=Le[1],Xn[1]+=Ne[1],Rn=0,K())});if(l.event.changedTouches?or.on("touchmove.brush",mr).on("touchend.brush",Nn):or.on("mousemove.brush",mr).on("mouseup.brush",Nn),Ht.interrupt().selectAll("*").interrupt(),Rn)Xn[0]=Le[0]-Xn[0],Xn[1]=Ne[0]-Xn[1];else if(dn){var ar=+/w$/.test(dn),fr=+/^n/.test(dn);Ft=[Le[1-ar]-Xn[0],Ne[1-fr]-Xn[1]],Xn[0]=Le[ar],Xn[1]=Ne[fr]}else l.event.altKey&&(St=Xn.slice());function mr(){var ir=l.mouse(Lt),hr=!1;Ft&&(ir[0]+=Ft[0],ir[1]+=Ft[1]),Rn||(l.event.altKey?(St||(St=[(Le[0]+Le[1])/2,(Ne[0]+Ne[1])/2]),Xn[0]=Le[+(ir[0]<St[0])],Xn[1]=Ne[+(ir[1]<St[1])]):St=null),vn&&Lr(ir,de,0)&&(pt(Ht),hr=!0),zn&&Lr(ir,xe,1)&&(Et(Ht),hr=!0),hr&&(lt(Ht),Zt({type:"brush",mode:Rn?"move":"resize"}))}function Lr(ir,hr,yr){var Mr,Ir,Br=co(hr),Zr=Br[0],oi=Br[1],si=Xn[yr],Yr=yr?Ne:Le,wi=Yr[1]-Yr[0];if(Rn&&(Zr-=si,oi-=wi+si),Mr=(yr?qe:Ue)?Math.max(Zr,Math.min(oi,ir[yr])):ir[yr],Rn?Ir=(Mr+=si)+wi:(St&&(si=Math.max(Zr,Math.min(oi,2*St[yr]-Mr))),si<Mr?(Ir=Mr,Mr=si):Ir=si),Yr[0]!=Mr||Yr[1]!=Ir)return yr?$=null:F=null,Yr[0]=Mr,Yr[1]=Ir,!0}function Nn(){mr(),Ht.style("pointer-events","all").selectAll(".resize").style("display",$e.empty()?"none":null),l.select("body").style("cursor",null),or.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Vn(),Zt({type:"brushend"})}Ht.style("pointer-events","none").selectAll(".resize").style("display",null),l.select("body").style("cursor",tn.style("cursor")),Zt({type:"brushstart"}),mr()}return $e.event=function(St){St.each(function(){var Ft=ie.of(this,arguments),Lt={x:Le,y:Ne,i:F,j:$},tn=this.__chart__||Lt;this.__chart__=Lt,Oo?l.select(this).transition().each("start.brush",function(){F=tn.i,$=tn.j,Le=tn.x,Ne=tn.y,Ft({type:"brushstart"})}).tween("brush:brush",function(){var Zt=Si(Le,Lt.x),Ht=Si(Ne,Lt.y);return F=$=null,function(dn){Le=Lt.x=Zt(dn),Ne=Lt.y=Ht(dn),Ft({type:"brush",mode:"resize"})}}).each("end.brush",function(){F=Lt.i,$=Lt.j,Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"})}):(Ft({type:"brushstart"}),Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"}))})},$e.x=function(St){return arguments.length?(Ye=X[!(de=St)<<1|!xe],$e):de},$e.y=function(St){return arguments.length?(Ye=X[!de<<1|!(xe=St)],$e):xe},$e.clamp=function(St){return arguments.length?(de&&xe?(Ue=!!St[0],qe=!!St[1]):de?Ue=!!St:xe&&(qe=!!St),$e):de&&xe?[Ue,qe]:de?Ue:xe?qe:null},$e.extent=function(St){var Ft,Lt,tn,Zt,Ht;return arguments.length?(de&&(Ft=St[0],Lt=St[1],xe&&(Ft=Ft[0],Lt=Lt[0]),F=[Ft,Lt],de.invert&&(Ft=de(Ft),Lt=de(Lt)),Lt<Ft&&(Ht=Ft,Ft=Lt,Lt=Ht),Ft==Le[0]&&Lt==Le[1]||(Le=[Ft,Lt])),xe&&(tn=St[0],Zt=St[1],de&&(tn=tn[1],Zt=Zt[1]),$=[tn,Zt],xe.invert&&(tn=xe(tn),Zt=xe(Zt)),Zt<tn&&(Ht=tn,tn=Zt,Zt=Ht),tn==Ne[0]&&Zt==Ne[1]||(Ne=[tn,Zt])),$e):(de&&(F?(Ft=F[0],Lt=F[1]):(Ft=Le[0],Lt=Le[1],de.invert&&(Ft=de.invert(Ft),Lt=de.invert(Lt)),Lt<Ft&&(Ht=Ft,Ft=Lt,Lt=Ht))),xe&&($?(tn=$[0],Zt=$[1]):(tn=Ne[0],Zt=Ne[1],xe.invert&&(tn=xe.invert(tn),Zt=xe.invert(Zt)),Zt<tn&&(Ht=tn,tn=Zt,Zt=Ht))),de&&xe?[[Ft,tn],[Lt,Zt]]:de?[Ft,Lt]:xe&&[tn,Zt])},$e.clear=function(){return $e.empty()||(Le=[0,0],Ne=[0,0],F=$=null),$e},$e.empty=function(){return!!de&&Le[0]==Le[1]||!!xe&&Ne[0]==Ne[1]},l.rebind($e,ie,"on")};var j={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},X=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function fe(F){return JSON.parse(F.responseText)}function Ae(F){var $=d.createRange();return $.selectNode(d.body),$.createContextualFragment(F.responseText)}l.text=Hn(function(F){return F.responseText}),l.json=function(F,$){return Qn(F,"application/json",fe,$)},l.html=function(F,$){return Qn(F,"text/html",Ae,$)},l.xml=Hn(function(F){return F.responseXML}),(k=typeof(M=l)=="function"?M.call(D,e,D,ee):M)===void 0||(ee.exports=k)}).apply(self)},88294:function(ee,D,e){ee.exports=e(62849)},62849:function(ee,D,e){var M=e(91358),k=e(53435),l=e(18863),T=e(21527),b=e(71299),d=e(46775),s=e(30120),t=e(64941),i=e(90660),r=e(27084);function n(o,a){for(var u=a[0],p=a[1],c=1/(a[2]-u),x=1/(a[3]-p),g=new Array(o.length),h=0,y=o.length/2;h<y;h++)g[2*h]=k((o[2*h]-u)*c,0,1),g[2*h+1]=k((o[2*h+1]-p)*x,0,1);return g}ee.exports=function(o,a){a||(a={}),o=s(o,"float64"),a=b(a,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=d(a.maxDepth,255),p=d(a.bounds,T(o,2));p[0]===p[2]&&p[2]++,p[1]===p[3]&&p[3]++;var c,x=n(o,p),g=o.length>>>1;a.dtype||(a.dtype="array"),typeof a.dtype=="string"?c=new(i(a.dtype))(g):a.dtype&&(c=a.dtype,Array.isArray(c)&&(c.length=g));for(var h=0;h<g;++h)c[h]=h;var y=[],v=[],m=[],_=[];(function z(G,O,H,N,B,V){if(!N.length)return null;var q=y[B]||(y[B]=[]),te=m[B]||(m[B]=[]),K=v[B]||(v[B]=[]),J=q.length;if(++B>u||V>1073741824){for(var Y=0;Y<N.length;Y++)q.push(N[Y]),te.push(V),K.push(null,null,null,null);return J}if(q.push(N[0]),te.push(V),N.length<=1)return K.push(null,null,null,null),J;for(var W=.5*H,Q=G+W,ne=O+W,re=[],ae=[],ue=[],pe=[],ge=1,_e=N.length;ge<_e;ge++){var me=N[ge],ve=x[2*me],Oe=x[2*me+1];ve<Q?Oe<ne?re.push(me):ae.push(me):Oe<ne?ue.push(me):pe.push(me)}return V<<=2,K.push(z(G,O,W,re,B,V),z(G,ne,W,ae,B,V+1),z(Q,O,W,ue,B,V+2),z(Q,ne,W,pe,B,V+3)),J})(0,0,1,c,0,1);for(var f=0,S=0;S<y.length;S++){var w=y[S];if(c.set)c.set(w,f);else for(var E=0,L=w.length;E<L;E++)c[E+f]=w[E];var C=f+y[S].length;_[S]=[f,C],f=C}return c.range=function(){for(var z,G=[],O=arguments.length;O--;)G[O]=arguments[O];if(t(G[G.length-1])){var H=G.pop();G.length||H.x==null&&H.l==null&&H.left==null||(G=[H],z={}),z=b(H,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};G.length||(G=p);var N,B=l.apply(void 0,G),V=[Math.min(B.x,B.x+B.width),Math.min(B.y,B.y+B.height),Math.max(B.x,B.x+B.width),Math.max(B.y,B.y+B.height)],q=V[0],te=V[1],K=V[2],J=V[3],Y=n([q,te,K,J],p),W=Y[0],Q=Y[1],ne=Y[2],re=Y[3],ae=d(z.level,y.length);if(z.d!=null&&(typeof z.d=="number"?N=[z.d,z.d]:z.d.length&&(N=z.d),ae=Math.min(Math.max(Math.ceil(-r(Math.abs(N[0])/(p[2]-p[0]))),Math.ceil(-r(Math.abs(N[1])/(p[3]-p[1])))),ae)),ae=Math.min(ae,y.length),z.lod)return function(pe,ge,_e,me,ve){for(var Oe=[],Me=0;Me<ve;Me++){var Te=m[Me],se=_[Me][0],oe=P(pe,ge,Me),he=P(_e,me,Me),Ee=M.ge(Te,oe),ke=M.gt(Te,he,Ee,Te.length-1);Oe[Me]=[Ee+se,ke+se]}return Oe}(W,Q,ne,re,ae);var ue=[];return function pe(ge,_e,me,ve,Oe,Me){if(Oe!==null&&Me!==null&&!(W>ge+me||Q>_e+me||ne<ge||re<_e||ve>=ae||Oe===Me)){var Te=y[ve];Me===void 0&&(Me=Te.length);for(var se=Oe;se<Me;se++){var oe=Te[se],he=o[2*oe],Ee=o[2*oe+1];he>=q&&he<=K&&Ee>=te&&Ee<=J&&ue.push(oe)}var ke=v[ve],be=ke[4*Oe+0],Ie=ke[4*Oe+1],Fe=ke[4*Oe+2],ce=ke[4*Oe+3],we=function(Re,ze){for(var He=null,Ge=0;He===null;)if(He=Re[4*ze+Ge],++Ge>Re.length)return null;return He}(ke,Oe+1),ye=.5*me,Ce=ve+1;pe(ge,_e,ye,Ce,be,Ie||Fe||ce||we),pe(ge,_e+ye,ye,Ce,Ie,Fe||ce||we),pe(ge+ye,_e,ye,Ce,Fe,ce||we),pe(ge+ye,_e+ye,ye,Ce,ce,we)}}(0,0,1,0,0,1),ue},c;function P(z,G,O){for(var H=1,N=.5,B=.5,V=.5,q=0;q<O;q++)H<<=2,H+=z<N?G<B?0:1:G<B?2:3,V*=.5,N+=z<N?-V:V,B+=G<B?-V:V;return H}}},30774:function(ee,D,e){Object.defineProperty(D,"__esModule",{value:!0});var M=e(60302),k=6378137;function l(d){var s=0;if(d&&d.length>0){s+=Math.abs(T(d[0]));for(var t=1;t<d.length;t++)s-=Math.abs(T(d[t]))}return s}function T(d){var s,t,i,r,n,o,a=0,u=d.length;if(u>2){for(o=0;o<u;o++)o===u-2?(i=u-2,r=u-1,n=0):o===u-1?(i=u-1,r=0,n=1):(i=o,r=o+1,n=o+2),s=d[i],t=d[r],a+=(b(d[n][0])-b(s[0]))*Math.sin(b(t[1]));a=a*k*k/2}return a}function b(d){return d*Math.PI/180}D.default=function(d){return M.geomReduce(d,function(s,t){return s+function(i){var r,n=0;switch(i.type){case"Polygon":return l(i.coordinates);case"MultiPolygon":for(r=0;r<i.coordinates.length;r++)n+=l(i.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},23132:function(ee,D){function e(o,a,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=a||{},p.geometry=o,p}function M(o,a,u){if(u===void 0&&(u={}),!o)throw new Error("coordinates is required");if(!Array.isArray(o))throw new Error("coordinates must be an Array");if(o.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(o[0])||!n(o[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:o},a,u)}function k(o,a,u){u===void 0&&(u={});for(var p=0,c=o;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:o},a,u)}function l(o,a,u){if(u===void 0&&(u={}),o.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:o},a,u)}function T(o,a){a===void 0&&(a={});var u={type:"FeatureCollection"};return a.id&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.features=o,u}function b(o,a,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:o},a,u)}function d(o,a,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:o},a,u)}function s(o,a,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:o},a,u)}function t(o,a){a===void 0&&(a="kilometers");var u=D.factors[a];if(!u)throw new Error(a+" units is invalid");return o*u}function i(o,a){a===void 0&&(a="kilometers");var u=D.factors[a];if(!u)throw new Error(a+" units is invalid");return o/u}function r(o){return o%(2*Math.PI)*180/Math.PI}function n(o){return!isNaN(o)&&o!==null&&!Array.isArray(o)}Object.defineProperty(D,"__esModule",{value:!0}),D.earthRadius=63710088e-1,D.factors={centimeters:100*D.earthRadius,centimetres:100*D.earthRadius,degrees:D.earthRadius/111325,feet:3.28084*D.earthRadius,inches:39.37*D.earthRadius,kilometers:D.earthRadius/1e3,kilometres:D.earthRadius/1e3,meters:D.earthRadius,metres:D.earthRadius,miles:D.earthRadius/1609.344,millimeters:1e3*D.earthRadius,millimetres:1e3*D.earthRadius,nauticalmiles:D.earthRadius/1852,radians:1,yards:1.0936*D.earthRadius},D.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/D.earthRadius,yards:1.0936133},D.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},D.feature=e,D.geometry=function(o,a,u){switch(o){case"Point":return M(a).geometry;case"LineString":return l(a).geometry;case"Polygon":return k(a).geometry;case"MultiPoint":return d(a).geometry;case"MultiLineString":return b(a).geometry;case"MultiPolygon":return s(a).geometry;default:throw new Error(o+" is invalid")}},D.point=M,D.points=function(o,a,u){return u===void 0&&(u={}),T(o.map(function(p){return M(p,a)}),u)},D.polygon=k,D.polygons=function(o,a,u){return u===void 0&&(u={}),T(o.map(function(p){return k(p,a)}),u)},D.lineString=l,D.lineStrings=function(o,a,u){return u===void 0&&(u={}),T(o.map(function(p){return l(p,a)}),u)},D.featureCollection=T,D.multiLineString=b,D.multiPoint=d,D.multiPolygon=s,D.geometryCollection=function(o,a,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:o},a,u)},D.round=function(o,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,a||0);return Math.round(o*u)/u},D.radiansToLength=t,D.lengthToRadians=i,D.lengthToDegrees=function(o,a){return r(i(o,a))},D.bearingToAzimuth=function(o){var a=o%360;return a<0&&(a+=360),a},D.radiansToDegrees=r,D.degreesToRadians=function(o){return o%360*Math.PI/180},D.convertLength=function(o,a,u){if(a===void 0&&(a="kilometers"),u===void 0&&(u="kilometers"),!(o>=0))throw new Error("length must be a positive number");return t(i(o,a),u)},D.convertArea=function(o,a,u){if(a===void 0&&(a="meters"),u===void 0&&(u="kilometers"),!(o>=0))throw new Error("area must be a positive number");var p=D.areaFactors[a];if(!p)throw new Error("invalid original units");var c=D.areaFactors[u];if(!c)throw new Error("invalid final units");return o/p*c},D.isNumber=n,D.isObject=function(o){return!!o&&o.constructor===Object},D.validateBBox=function(o){if(!o)throw new Error("bbox is required");if(!Array.isArray(o))throw new Error("bbox must be an Array");if(o.length!==4&&o.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");o.forEach(function(a){if(!n(a))throw new Error("bbox must only contain numbers")})},D.validateId=function(o){if(!o)throw new Error("id is required");if(["string","number"].indexOf(typeof o)===-1)throw new Error("id must be a number or a string")}},60302:function(ee,D,e){Object.defineProperty(D,"__esModule",{value:!0});var M=e(23132);function k(i,r,n){if(i!==null)for(var o,a,u,p,c,x,g,h,y=0,v=0,m=i.type,_=m==="FeatureCollection",f=m==="Feature",S=_?i.features.length:1,w=0;w<S;w++){c=(h=!!(g=_?i.features[w].geometry:f?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var L=0,C=0;if((p=h?g.geometries[E]:g)!==null){x=p.coordinates;var P=p.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(x,v,w,L,C)===!1)return!1;v++,L++;break;case"LineString":case"MultiPoint":for(o=0;o<x.length;o++){if(r(x[o],v,w,L,C)===!1)return!1;v++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(o=0;o<x.length;o++){for(a=0;a<x[o].length-y;a++){if(r(x[o][a],v,w,L,C)===!1)return!1;v++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(o=0;o<x.length;o++){for(C=0,a=0;a<x[o].length;a++){for(u=0;u<x[o][a].length-y;u++){if(r(x[o][a][u],v,w,L,C)===!1)return!1;v++}C++}L++}break;case"GeometryCollection":for(o=0;o<p.geometries.length;o++)if(k(p.geometries[o],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function b(i,r){var n,o,a,u,p,c,x,g,h,y,v=0,m=i.type==="FeatureCollection",_=i.type==="Feature",f=m?i.features.length:1;for(n=0;n<f;n++){for(c=m?i.features[n].geometry:_?i.geometry:i,g=m?i.features[n].properties:_?i.properties:{},h=m?i.features[n].bbox:_?i.bbox:void 0,y=m?i.features[n].id:_?i.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,a=0;a<p;a++)if((u=x?c.geometries[a]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,v,g,h,y)===!1)return!1;break;case"GeometryCollection":for(o=0;o<u.geometries.length;o++)if(r(u.geometries[o],v,g,h,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,v,g,h,y)===!1)return!1;v++}}function d(i,r){b(i,function(n,o,a,u,p){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(M.feature(n,a,{bbox:u,id:p}),o,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<n.coordinates.length;g++){var h={type:c,coordinates:n.coordinates[g]};if(r(M.feature(h,a),o,g)===!1)return!1}})}function s(i,r){d(i,function(n,o,a){var u=0;if(n.geometry){var p=n.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,g=0,h=0;return k(n,function(y,v,m,_,f){if(c===void 0||o>x||_>g||f>h)return c=y,x=o,g=_,h=f,void(u=0);var S=M.lineString([c,y],n.properties);if(r(S,o,a,f,u)===!1)return!1;u++,c=y})!==!1&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");d(i,function(n,o,a){if(n.geometry!==null){var u=n.geometry.type,p=n.geometry.coordinates;switch(u){case"LineString":if(r(n,o,a,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(r(M.lineString(p[c],n.properties),o,a,c)===!1)return!1}}})}D.coordEach=k,D.coordReduce=function(i,r,n,o){var a=n;return k(i,function(u,p,c,x,g){a=p===0&&n===void 0?u:r(a,u,p,c,x,g)},o),a},D.propEach=l,D.propReduce=function(i,r,n){var o=n;return l(i,function(a,u){o=u===0&&n===void 0?a:r(o,a,u)}),o},D.featureEach=T,D.featureReduce=function(i,r,n){var o=n;return T(i,function(a,u){o=u===0&&n===void 0?a:r(o,a,u)}),o},D.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},D.geomEach=b,D.geomReduce=function(i,r,n){var o=n;return b(i,function(a,u,p,c,x){o=u===0&&n===void 0?a:r(o,a,u,p,c,x)}),o},D.flattenEach=d,D.flattenReduce=function(i,r,n){var o=n;return d(i,function(a,u,p){o=u===0&&p===0&&n===void 0?a:r(o,a,u,p)}),o},D.segmentEach=s,D.segmentReduce=function(i,r,n){var o=n,a=!1;return s(i,function(u,p,c,x,g){o=a===!1&&n===void 0?u:r(o,u,p,c,x,g),a=!0}),o},D.lineEach=t,D.lineReduce=function(i,r,n){var o=n;return t(i,function(a,u,p,c){o=u===0&&n===void 0?a:r(o,a,u,p,c)}),o},D.findSegment=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),c=c||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),M.lineString([x[p],x[p+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),M.lineString([x[u][p],x[u][p+1]],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p-1),M.lineString([x[a][p],x[a][p+1]],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p-1),M.lineString([x[a][u][p],x[a][u][p+1]],c,r)}throw new Error("geojson is invalid")},D.findPoint=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),c=c||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return M.point(x,c,r);case"MultiPoint":return a<0&&(a=x.length+a),M.point(x[a],c,r);case"LineString":return p<0&&(p=x.length+p),M.point(x[p],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),M.point(x[u][p],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p),M.point(x[a][p],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p),M.point(x[a][u][p],c,r)}throw new Error("geojson is invalid")}},85268:function(ee,D,e){Object.defineProperty(D,"__esModule",{value:!0});var M=e(27138);function k(l){var T=[1/0,1/0,-1/0,-1/0];return M.coordEach(l,function(b){T[0]>b[0]&&(T[0]=b[0]),T[1]>b[1]&&(T[1]=b[1]),T[2]<b[0]&&(T[2]=b[0]),T[3]<b[1]&&(T[3]=b[1])}),T}k.default=k,D.default=k},94228:function(ee,D){function e(o,a,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=a||{},p.geometry=o,p}function M(o,a,u){if(u===void 0&&(u={}),!o)throw new Error("coordinates is required");if(!Array.isArray(o))throw new Error("coordinates must be an Array");if(o.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(o[0])||!n(o[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:o},a,u)}function k(o,a,u){u===void 0&&(u={});for(var p=0,c=o;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:o},a,u)}function l(o,a,u){if(u===void 0&&(u={}),o.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:o},a,u)}function T(o,a){a===void 0&&(a={});var u={type:"FeatureCollection"};return a.id&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.features=o,u}function b(o,a,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:o},a,u)}function d(o,a,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:o},a,u)}function s(o,a,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:o},a,u)}function t(o,a){a===void 0&&(a="kilometers");var u=D.factors[a];if(!u)throw new Error(a+" units is invalid");return o*u}function i(o,a){a===void 0&&(a="kilometers");var u=D.factors[a];if(!u)throw new Error(a+" units is invalid");return o/u}function r(o){return o%(2*Math.PI)*180/Math.PI}function n(o){return!isNaN(o)&&o!==null&&!Array.isArray(o)}Object.defineProperty(D,"__esModule",{value:!0}),D.earthRadius=63710088e-1,D.factors={centimeters:100*D.earthRadius,centimetres:100*D.earthRadius,degrees:D.earthRadius/111325,feet:3.28084*D.earthRadius,inches:39.37*D.earthRadius,kilometers:D.earthRadius/1e3,kilometres:D.earthRadius/1e3,meters:D.earthRadius,metres:D.earthRadius,miles:D.earthRadius/1609.344,millimeters:1e3*D.earthRadius,millimetres:1e3*D.earthRadius,nauticalmiles:D.earthRadius/1852,radians:1,yards:1.0936*D.earthRadius},D.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/D.earthRadius,yards:1.0936133},D.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},D.feature=e,D.geometry=function(o,a,u){switch(o){case"Point":return M(a).geometry;case"LineString":return l(a).geometry;case"Polygon":return k(a).geometry;case"MultiPoint":return d(a).geometry;case"MultiLineString":return b(a).geometry;case"MultiPolygon":return s(a).geometry;default:throw new Error(o+" is invalid")}},D.point=M,D.points=function(o,a,u){return u===void 0&&(u={}),T(o.map(function(p){return M(p,a)}),u)},D.polygon=k,D.polygons=function(o,a,u){return u===void 0&&(u={}),T(o.map(function(p){return k(p,a)}),u)},D.lineString=l,D.lineStrings=function(o,a,u){return u===void 0&&(u={}),T(o.map(function(p){return l(p,a)}),u)},D.featureCollection=T,D.multiLineString=b,D.multiPoint=d,D.multiPolygon=s,D.geometryCollection=function(o,a,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:o},a,u)},D.round=function(o,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,a||0);return Math.round(o*u)/u},D.radiansToLength=t,D.lengthToRadians=i,D.lengthToDegrees=function(o,a){return r(i(o,a))},D.bearingToAzimuth=function(o){var a=o%360;return a<0&&(a+=360),a},D.radiansToDegrees=r,D.degreesToRadians=function(o){return o%360*Math.PI/180},D.convertLength=function(o,a,u){if(a===void 0&&(a="kilometers"),u===void 0&&(u="kilometers"),!(o>=0))throw new Error("length must be a positive number");return t(i(o,a),u)},D.convertArea=function(o,a,u){if(a===void 0&&(a="meters"),u===void 0&&(u="kilometers"),!(o>=0))throw new Error("area must be a positive number");var p=D.areaFactors[a];if(!p)throw new Error("invalid original units");var c=D.areaFactors[u];if(!c)throw new Error("invalid final units");return o/p*c},D.isNumber=n,D.isObject=function(o){return!!o&&o.constructor===Object},D.validateBBox=function(o){if(!o)throw new Error("bbox is required");if(!Array.isArray(o))throw new Error("bbox must be an Array");if(o.length!==4&&o.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");o.forEach(function(a){if(!n(a))throw new Error("bbox must only contain numbers")})},D.validateId=function(o){if(!o)throw new Error("id is required");if(["string","number"].indexOf(typeof o)===-1)throw new Error("id must be a number or a string")}},27138:function(ee,D,e){Object.defineProperty(D,"__esModule",{value:!0});var M=e(94228);function k(i,r,n){if(i!==null)for(var o,a,u,p,c,x,g,h,y=0,v=0,m=i.type,_=m==="FeatureCollection",f=m==="Feature",S=_?i.features.length:1,w=0;w<S;w++){c=(h=!!(g=_?i.features[w].geometry:f?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var L=0,C=0;if((p=h?g.geometries[E]:g)!==null){x=p.coordinates;var P=p.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(x,v,w,L,C)===!1)return!1;v++,L++;break;case"LineString":case"MultiPoint":for(o=0;o<x.length;o++){if(r(x[o],v,w,L,C)===!1)return!1;v++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(o=0;o<x.length;o++){for(a=0;a<x[o].length-y;a++){if(r(x[o][a],v,w,L,C)===!1)return!1;v++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(o=0;o<x.length;o++){for(C=0,a=0;a<x[o].length;a++){for(u=0;u<x[o][a].length-y;u++){if(r(x[o][a][u],v,w,L,C)===!1)return!1;v++}C++}L++}break;case"GeometryCollection":for(o=0;o<p.geometries.length;o++)if(k(p.geometries[o],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function b(i,r){var n,o,a,u,p,c,x,g,h,y,v=0,m=i.type==="FeatureCollection",_=i.type==="Feature",f=m?i.features.length:1;for(n=0;n<f;n++){for(c=m?i.features[n].geometry:_?i.geometry:i,g=m?i.features[n].properties:_?i.properties:{},h=m?i.features[n].bbox:_?i.bbox:void 0,y=m?i.features[n].id:_?i.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,a=0;a<p;a++)if((u=x?c.geometries[a]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,v,g,h,y)===!1)return!1;break;case"GeometryCollection":for(o=0;o<u.geometries.length;o++)if(r(u.geometries[o],v,g,h,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,v,g,h,y)===!1)return!1;v++}}function d(i,r){b(i,function(n,o,a,u,p){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(M.feature(n,a,{bbox:u,id:p}),o,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<n.coordinates.length;g++){var h={type:c,coordinates:n.coordinates[g]};if(r(M.feature(h,a),o,g)===!1)return!1}})}function s(i,r){d(i,function(n,o,a){var u=0;if(n.geometry){var p=n.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,g=0,h=0;return k(n,function(y,v,m,_,f){if(c===void 0||o>x||_>g||f>h)return c=y,x=o,g=_,h=f,void(u=0);var S=M.lineString([c,y],n.properties);if(r(S,o,a,f,u)===!1)return!1;u++,c=y})!==!1&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");d(i,function(n,o,a){if(n.geometry!==null){var u=n.geometry.type,p=n.geometry.coordinates;switch(u){case"LineString":if(r(n,o,a,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(r(M.lineString(p[c],n.properties),o,a,c)===!1)return!1}}})}D.coordEach=k,D.coordReduce=function(i,r,n,o){var a=n;return k(i,function(u,p,c,x,g){a=p===0&&n===void 0?u:r(a,u,p,c,x,g)},o),a},D.propEach=l,D.propReduce=function(i,r,n){var o=n;return l(i,function(a,u){o=u===0&&n===void 0?a:r(o,a,u)}),o},D.featureEach=T,D.featureReduce=function(i,r,n){var o=n;return T(i,function(a,u){o=u===0&&n===void 0?a:r(o,a,u)}),o},D.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},D.geomEach=b,D.geomReduce=function(i,r,n){var o=n;return b(i,function(a,u,p,c,x){o=u===0&&n===void 0?a:r(o,a,u,p,c,x)}),o},D.flattenEach=d,D.flattenReduce=function(i,r,n){var o=n;return d(i,function(a,u,p){o=u===0&&p===0&&n===void 0?a:r(o,a,u,p)}),o},D.segmentEach=s,D.segmentReduce=function(i,r,n){var o=n,a=!1;return s(i,function(u,p,c,x,g){o=a===!1&&n===void 0?u:r(o,u,p,c,x,g),a=!0}),o},D.lineEach=t,D.lineReduce=function(i,r,n){var o=n;return t(i,function(a,u,p,c){o=u===0&&n===void 0?a:r(o,a,u,p,c)}),o},D.findSegment=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),c=c||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),M.lineString([x[p],x[p+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),M.lineString([x[u][p],x[u][p+1]],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p-1),M.lineString([x[a][p],x[a][p+1]],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p-1),M.lineString([x[a][u][p],x[a][u][p+1]],c,r)}throw new Error("geojson is invalid")},D.findPoint=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),c=c||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return M.point(x,c,r);case"MultiPoint":return a<0&&(a=x.length+a),M.point(x[a],c,r);case"LineString":return p<0&&(p=x.length+p),M.point(x[p],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),M.point(x[u][p],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p),M.point(x[a][p],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p),M.point(x[a][u][p],c,r)}throw new Error("geojson is invalid")}},29261:function(ee,D,e){Object.defineProperty(D,"__esModule",{value:!0});var M=e(88553),k=e(64182);D.default=function(l,T){T===void 0&&(T={});var b=0,d=0,s=0;return M.coordEach(l,function(t){b+=t[0],d+=t[1],s++}),k.point([b/s,d/s],T.properties)}},64182:function(ee,D){function e(o,a,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=a||{},p.geometry=o,p}function M(o,a,u){return u===void 0&&(u={}),e({type:"Point",coordinates:o},a,u)}function k(o,a,u){u===void 0&&(u={});for(var p=0,c=o;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:o},a,u)}function l(o,a,u){if(u===void 0&&(u={}),o.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:o},a,u)}function T(o,a){a===void 0&&(a={});var u={type:"FeatureCollection"};return a.id&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.features=o,u}function b(o,a,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:o},a,u)}function d(o,a,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:o},a,u)}function s(o,a,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:o},a,u)}function t(o,a){a===void 0&&(a="kilometers");var u=D.factors[a];if(!u)throw new Error(a+" units is invalid");return o*u}function i(o,a){a===void 0&&(a="kilometers");var u=D.factors[a];if(!u)throw new Error(a+" units is invalid");return o/u}function r(o){return o%(2*Math.PI)*180/Math.PI}function n(o){return!isNaN(o)&&o!==null&&!Array.isArray(o)&&!/^\s*$/.test(o)}Object.defineProperty(D,"__esModule",{value:!0}),D.earthRadius=63710088e-1,D.factors={centimeters:100*D.earthRadius,centimetres:100*D.earthRadius,degrees:D.earthRadius/111325,feet:3.28084*D.earthRadius,inches:39.37*D.earthRadius,kilometers:D.earthRadius/1e3,kilometres:D.earthRadius/1e3,meters:D.earthRadius,metres:D.earthRadius,miles:D.earthRadius/1609.344,millimeters:1e3*D.earthRadius,millimetres:1e3*D.earthRadius,nauticalmiles:D.earthRadius/1852,radians:1,yards:D.earthRadius/1.0936},D.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/D.earthRadius,yards:.91441111923921},D.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},D.feature=e,D.geometry=function(o,a,u){switch(o){case"Point":return M(a).geometry;case"LineString":return l(a).geometry;case"Polygon":return k(a).geometry;case"MultiPoint":return d(a).geometry;case"MultiLineString":return b(a).geometry;case"MultiPolygon":return s(a).geometry;default:throw new Error(o+" is invalid")}},D.point=M,D.points=function(o,a,u){return u===void 0&&(u={}),T(o.map(function(p){return M(p,a)}),u)},D.polygon=k,D.polygons=function(o,a,u){return u===void 0&&(u={}),T(o.map(function(p){return k(p,a)}),u)},D.lineString=l,D.lineStrings=function(o,a,u){return u===void 0&&(u={}),T(o.map(function(p){return l(p,a)}),u)},D.featureCollection=T,D.multiLineString=b,D.multiPoint=d,D.multiPolygon=s,D.geometryCollection=function(o,a,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:o},a,u)},D.round=function(o,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,a||0);return Math.round(o*u)/u},D.radiansToLength=t,D.lengthToRadians=i,D.lengthToDegrees=function(o,a){return r(i(o,a))},D.bearingToAzimuth=function(o){var a=o%360;return a<0&&(a+=360),a},D.radiansToDegrees=r,D.degreesToRadians=function(o){return o%360*Math.PI/180},D.convertLength=function(o,a,u){if(a===void 0&&(a="kilometers"),u===void 0&&(u="kilometers"),!(o>=0))throw new Error("length must be a positive number");return t(i(o,a),u)},D.convertArea=function(o,a,u){if(a===void 0&&(a="meters"),u===void 0&&(u="kilometers"),!(o>=0))throw new Error("area must be a positive number");var p=D.areaFactors[a];if(!p)throw new Error("invalid original units");var c=D.areaFactors[u];if(!c)throw new Error("invalid final units");return o/p*c},D.isNumber=n,D.isObject=function(o){return!!o&&o.constructor===Object},D.validateBBox=function(o){if(!o)throw new Error("bbox is required");if(!Array.isArray(o))throw new Error("bbox must be an Array");if(o.length!==4&&o.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");o.forEach(function(a){if(!n(a))throw new Error("bbox must only contain numbers")})},D.validateId=function(o){if(!o)throw new Error("id is required");if(["string","number"].indexOf(typeof o)===-1)throw new Error("id must be a number or a string")},D.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},D.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},D.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},D.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},D.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},D.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},D.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function(ee,D,e){Object.defineProperty(D,"__esModule",{value:!0});var M=e(64182);function k(i,r,n){if(i!==null)for(var o,a,u,p,c,x,g,h,y=0,v=0,m=i.type,_=m==="FeatureCollection",f=m==="Feature",S=_?i.features.length:1,w=0;w<S;w++){c=(h=!!(g=_?i.features[w].geometry:f?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var L=0,C=0;if((p=h?g.geometries[E]:g)!==null){x=p.coordinates;var P=p.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(x,v,w,L,C)===!1)return!1;v++,L++;break;case"LineString":case"MultiPoint":for(o=0;o<x.length;o++){if(r(x[o],v,w,L,C)===!1)return!1;v++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(o=0;o<x.length;o++){for(a=0;a<x[o].length-y;a++){if(r(x[o][a],v,w,L,C)===!1)return!1;v++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(o=0;o<x.length;o++){for(C=0,a=0;a<x[o].length;a++){for(u=0;u<x[o][a].length-y;u++){if(r(x[o][a][u],v,w,L,C)===!1)return!1;v++}C++}L++}break;case"GeometryCollection":for(o=0;o<p.geometries.length;o++)if(k(p.geometries[o],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function b(i,r){var n,o,a,u,p,c,x,g,h,y,v=0,m=i.type==="FeatureCollection",_=i.type==="Feature",f=m?i.features.length:1;for(n=0;n<f;n++){for(c=m?i.features[n].geometry:_?i.geometry:i,g=m?i.features[n].properties:_?i.properties:{},h=m?i.features[n].bbox:_?i.bbox:void 0,y=m?i.features[n].id:_?i.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,a=0;a<p;a++)if((u=x?c.geometries[a]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,v,g,h,y)===!1)return!1;break;case"GeometryCollection":for(o=0;o<u.geometries.length;o++)if(r(u.geometries[o],v,g,h,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,v,g,h,y)===!1)return!1;v++}}function d(i,r){b(i,function(n,o,a,u,p){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(M.feature(n,a,{bbox:u,id:p}),o,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<n.coordinates.length;g++){var h={type:c,coordinates:n.coordinates[g]};if(r(M.feature(h,a),o,g)===!1)return!1}})}function s(i,r){d(i,function(n,o,a){var u=0;if(n.geometry){var p=n.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,g=0,h=0;return k(n,function(y,v,m,_,f){if(c===void 0||o>x||_>g||f>h)return c=y,x=o,g=_,h=f,void(u=0);var S=M.lineString([c,y],n.properties);if(r(S,o,a,f,u)===!1)return!1;u++,c=y})!==!1&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");d(i,function(n,o,a){if(n.geometry!==null){var u=n.geometry.type,p=n.geometry.coordinates;switch(u){case"LineString":if(r(n,o,a,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(r(M.lineString(p[c],n.properties),o,a,c)===!1)return!1}}})}D.coordEach=k,D.coordReduce=function(i,r,n,o){var a=n;return k(i,function(u,p,c,x,g){a=p===0&&n===void 0?u:r(a,u,p,c,x,g)},o),a},D.propEach=l,D.propReduce=function(i,r,n){var o=n;return l(i,function(a,u){o=u===0&&n===void 0?a:r(o,a,u)}),o},D.featureEach=T,D.featureReduce=function(i,r,n){var o=n;return T(i,function(a,u){o=u===0&&n===void 0?a:r(o,a,u)}),o},D.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},D.geomEach=b,D.geomReduce=function(i,r,n){var o=n;return b(i,function(a,u,p,c,x){o=u===0&&n===void 0?a:r(o,a,u,p,c,x)}),o},D.flattenEach=d,D.flattenReduce=function(i,r,n){var o=n;return d(i,function(a,u,p){o=u===0&&p===0&&n===void 0?a:r(o,a,u,p)}),o},D.segmentEach=s,D.segmentReduce=function(i,r,n){var o=n,a=!1;return s(i,function(u,p,c,x,g){o=a===!1&&n===void 0?u:r(o,u,p,c,x,g),a=!0}),o},D.lineEach=t,D.lineReduce=function(i,r,n){var o=n;return t(i,function(a,u,p,c){o=u===0&&n===void 0?a:r(o,a,u,p,c)}),o},D.findSegment=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),c=c||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),M.lineString([x[p],x[p+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),M.lineString([x[u][p],x[u][p+1]],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p-1),M.lineString([x[a][p],x[a][p+1]],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p-1),M.lineString([x[a][u][p],x[a][u][p+1]],c,r)}throw new Error("geojson is invalid")},D.findPoint=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),c=c||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return M.point(x,c,r);case"MultiPoint":return a<0&&(a=x.length+a),M.point(x[a],c,r);case"LineString":return p<0&&(p=x.length+p),M.point(x[p],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),M.point(x[u][p],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p),M.point(x[a][p],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p),M.point(x[a][u][p],c,r)}throw new Error("geojson is invalid")}},65185:function(ee){ee.exports=function(D){var e=0,M=0,k=0,l=0;return D.map(function(T){var b=(T=T.slice())[0],d=b.toUpperCase();if(b!=d)switch(T[0]=d,b){case"a":T[6]+=k,T[7]+=l;break;case"v":T[1]+=l;break;case"h":T[1]+=k;break;default:for(var s=1;s<T.length;)T[s++]+=k,T[s++]+=l}switch(d){case"Z":k=e,l=M;break;case"H":k=T[1];break;case"V":l=T[1];break;case"M":k=e=T[1],l=M=T[2];break;default:k=T[T.length-2],l=T[T.length-1]}return T})}},21527:function(ee){ee.exports=function(D,e){if(!D||D.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var M=Array(2*e),k=0;k<e;k++){for(var l=-1/0,T=1/0,b=k,d=D.length;b<d;b+=e)D[b]>l&&(l=D[b]),D[b]<T&&(T=D[b]);M[k]=T,M[e+k]=l}return M}},6851:function(ee){ee.exports=function(D,e,M){if(typeof Array.prototype.findIndex=="function")return D.findIndex(e,M);if(typeof e!="function")throw new TypeError("predicate must be a function");var k=Object(D),l=k.length;if(l===0)return-1;for(var T=0;T<l;T++)if(e.call(M,k[T],T,k))return T;return-1}},54:function(ee,D,e){var M=e(21527);ee.exports=function(k,l,T){if(!k||k.length==null)throw Error("Argument should be an array");l==null&&(l=1),T==null&&(T=M(k,l));for(var b=0;b<l;b++){var d=T[l+b],s=T[b],t=b,i=k.length;if(d===1/0&&s===-1/0)for(t=b;t<i;t+=l)k[t]=k[t]===d?1:k[t]===s?0:.5;else if(d===1/0)for(t=b;t<i;t+=l)k[t]=k[t]===d?1:0;else if(s===-1/0)for(t=b;t<i;t+=l)k[t]=k[t]===s?0:1;else{var r=d-s;for(t=b;t<i;t+=l)isNaN(k[t])||(k[t]=r===0?.5:(k[t]-s)/r)}}return k}},57471:function(ee){ee.exports=function(D,e){var M=typeof D=="number",k=typeof e=="number";M&&!k?(e=D,D=0):M||k||(D=0,e=0);var l=(e|=0)-(D|=0);if(l<0)throw new Error("array length must be positive");for(var T=new Array(l),b=0,d=D;b<l;b++,d++)T[b]=d;return T}},32791:function(ee,D,e){var M=e(90386);function k(O){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},k(O)}var l,T,b=e(79616).codes,d=b.ERR_AMBIGUOUS_ARGUMENT,s=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,i=b.ERR_INVALID_RETURN_VALUE,r=b.ERR_MISSING_ARGS,n=e(73894),o=e(43827).inspect,a=e(43827).types,u=a.isPromise,p=a.isRegExp,c=Object.assign?Object.assign:e(73523).assign,x=Object.is?Object.is:e(64003);function g(){var O=e(74061);l=O.isDeepEqual,T=O.isDeepStrictEqual}var h=!1,y=ee.exports=f,v={};function m(O){throw O.message instanceof Error?O.message:new n(O)}function _(O,H,N,B){if(!N){var V=!1;if(H===0)V=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var q=new n({actual:N,expected:!0,message:B,operator:"==",stackStartFn:O});throw q.generatedMessage=V,q}}function f(){for(var O=arguments.length,H=new Array(O),N=0;N<O;N++)H[N]=arguments[N];_.apply(void 0,[f,H.length].concat(H))}y.fail=function O(H,N,B,V,q){var te,K=arguments.length;if(K===0?te="Failed":K===1?(B=H,H=void 0):(h===!1&&(h=!0,(M.emitWarning?M.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),K===2&&(V="!=")),B instanceof Error)throw B;var J={actual:H,expected:N,operator:V===void 0?"fail":V,stackStartFn:q||O};B!==void 0&&(J.message=B);var Y=new n(J);throw te&&(Y.message=te,Y.generatedMessage=!0),Y},y.AssertionError=n,y.ok=f,y.equal=function O(H,N,B){if(arguments.length<2)throw new r("actual","expected");H!=N&&m({actual:H,expected:N,message:B,operator:"==",stackStartFn:O})},y.notEqual=function O(H,N,B){if(arguments.length<2)throw new r("actual","expected");H==N&&m({actual:H,expected:N,message:B,operator:"!=",stackStartFn:O})},y.deepEqual=function O(H,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),l(H,N)||m({actual:H,expected:N,message:B,operator:"deepEqual",stackStartFn:O})},y.notDeepEqual=function O(H,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),l(H,N)&&m({actual:H,expected:N,message:B,operator:"notDeepEqual",stackStartFn:O})},y.deepStrictEqual=function O(H,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),T(H,N)||m({actual:H,expected:N,message:B,operator:"deepStrictEqual",stackStartFn:O})},y.notDeepStrictEqual=function O(H,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),T(H,N)&&m({actual:H,expected:N,message:B,operator:"notDeepStrictEqual",stackStartFn:O})},y.strictEqual=function O(H,N,B){if(arguments.length<2)throw new r("actual","expected");x(H,N)||m({actual:H,expected:N,message:B,operator:"strictEqual",stackStartFn:O})},y.notStrictEqual=function O(H,N,B){if(arguments.length<2)throw new r("actual","expected");x(H,N)&&m({actual:H,expected:N,message:B,operator:"notStrictEqual",stackStartFn:O})};var S=function O(H,N,B){var V=this;(function(q,te){if(!(q instanceof te))throw new TypeError("Cannot call a class as a function")})(this,O),N.forEach(function(q){q in H&&(B!==void 0&&typeof B[q]=="string"&&p(H[q])&&H[q].test(B[q])?V[q]=B[q]:V[q]=H[q])})};function w(O,H,N,B){if(typeof H!="function"){if(p(H))return H.test(O);if(arguments.length===2)throw new s("expected",["Function","RegExp"],H);if(k(O)!=="object"||O===null){var V=new n({actual:O,expected:H,message:N,operator:"deepStrictEqual",stackStartFn:B});throw V.operator=B.name,V}var q=Object.keys(H);if(H instanceof Error)q.push("name","message");else if(q.length===0)throw new t("error",H,"may not be an empty object");return l===void 0&&g(),q.forEach(function(te){typeof O[te]=="string"&&p(H[te])&&H[te].test(O[te])||function(K,J,Y,W,Q,ne){if(!(Y in K)||!T(K[Y],J[Y])){if(!W){var re=new S(K,Q),ae=new S(J,Q,K),ue=new n({actual:re,expected:ae,operator:"deepStrictEqual",stackStartFn:ne});throw ue.actual=K,ue.expected=J,ue.operator=ne.name,ue}m({actual:K,expected:J,message:W,operator:ne.name,stackStartFn:ne})}}(O,H,te,N,q,B)}),!0}return H.prototype!==void 0&&O instanceof H||!Error.isPrototypeOf(H)&&H.call({},O)===!0}function E(O){if(typeof O!="function")throw new s("fn","Function",O);try{O()}catch(H){return H}return v}function L(O){return u(O)||O!==null&&k(O)==="object"&&typeof O.then=="function"&&typeof O.catch=="function"}function C(O){return Promise.resolve().then(function(){var H;if(typeof O=="function"){if(!L(H=O()))throw new i("instance of Promise","promiseFn",H)}else{if(!L(O))throw new s("promiseFn",["Function","Promise"],O);H=O}return Promise.resolve().then(function(){return H}).then(function(){return v}).catch(function(N){return N})})}function P(O,H,N,B){if(typeof N=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],N);if(k(H)==="object"&&H!==null){if(H.message===N)throw new d("error/message",'The error message "'.concat(H.message,'" is identical to the message.'))}else if(H===N)throw new d("error/message",'The error "'.concat(H,'" is identical to the message.'));B=N,N=void 0}else if(N!=null&&k(N)!=="object"&&typeof N!="function")throw new s("error",["Object","Error","Function","RegExp"],N);if(H===v){var V="";N&&N.name&&(V+=" (".concat(N.name,")")),V+=B?": ".concat(B):".";var q=O.name==="rejects"?"rejection":"exception";m({actual:void 0,expected:N,operator:O.name,message:"Missing expected ".concat(q).concat(V),stackStartFn:O})}if(N&&!w(H,N,B,O))throw H}function z(O,H,N,B){if(H!==v){if(typeof N=="string"&&(B=N,N=void 0),!N||w(H,N)){var V=B?": ".concat(B):".",q=O.name==="doesNotReject"?"rejection":"exception";m({actual:H,expected:N,operator:O.name,message:"Got unwanted ".concat(q).concat(V,`
`)+'Actual message: "'.concat(H&&H.message,'"'),stackStartFn:O})}throw H}}function G(){for(var O=arguments.length,H=new Array(O),N=0;N<O;N++)H[N]=arguments[N];_.apply(void 0,[G,H.length].concat(H))}y.throws=function O(H){for(var N=arguments.length,B=new Array(N>1?N-1:0),V=1;V<N;V++)B[V-1]=arguments[V];P.apply(void 0,[O,E(H)].concat(B))},y.rejects=function O(H){for(var N=arguments.length,B=new Array(N>1?N-1:0),V=1;V<N;V++)B[V-1]=arguments[V];return C(H).then(function(q){return P.apply(void 0,[O,q].concat(B))})},y.doesNotThrow=function O(H){for(var N=arguments.length,B=new Array(N>1?N-1:0),V=1;V<N;V++)B[V-1]=arguments[V];z.apply(void 0,[O,E(H)].concat(B))},y.doesNotReject=function O(H){for(var N=arguments.length,B=new Array(N>1?N-1:0),V=1;V<N;V++)B[V-1]=arguments[V];return C(H).then(function(q){return z.apply(void 0,[O,q].concat(B))})},y.ifError=function O(H){if(H!=null){var N="ifError got unwanted exception: ";k(H)==="object"&&typeof H.message=="string"?H.message.length===0&&H.constructor?N+=H.constructor.name:N+=H.message:N+=o(H);var B=new n({actual:H,expected:null,operator:"ifError",message:N,stackStartFn:O}),V=H.stack;if(typeof V=="string"){var q=V.split(`
`);q.shift();for(var te=B.stack.split(`
`),K=0;K<q.length;K++){var J=te.indexOf(q[K]);if(J!==-1){te=te.slice(0,J);break}}B.stack="".concat(te.join(`
`),`
`).concat(q.join(`
`))}throw B}},y.strict=c(G,y,{equal:y.strictEqual,deepEqual:y.deepStrictEqual,notEqual:y.notStrictEqual,notDeepEqual:y.notDeepStrictEqual}),y.strict.strict=y.strict},73894:function(ee,D,e){var M=e(90386);function k(m,_,f){return _ in m?Object.defineProperty(m,_,{value:f,enumerable:!0,configurable:!0,writable:!0}):m[_]=f,m}function l(m,_){for(var f=0;f<_.length;f++){var S=_[f];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}function T(m,_){return!_||r(_)!=="object"&&typeof _!="function"?b(m):_}function b(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function d(m){var _=typeof Map=="function"?new Map:void 0;return d=function(f){if(f===null||(S=f,Function.toString.call(S).indexOf("[native code]")===-1))return f;var S;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(_!==void 0){if(_.has(f))return _.get(f);_.set(f,w)}function w(){return s(f,arguments,i(this).constructor)}return w.prototype=Object.create(f.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),t(w,f)},d(m)}function s(m,_,f){return s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,w,E){var L=[null];L.push.apply(L,w);var C=new(Function.bind.apply(S,L));return E&&t(C,E.prototype),C},s.apply(null,arguments)}function t(m,_){return t=Object.setPrototypeOf||function(f,S){return f.__proto__=S,f},t(m,_)}function i(m){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},i(m)}function r(m){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},r(m)}var n=e(43827).inspect,o=e(79616).codes.ERR_INVALID_ARG_TYPE;function a(m,_,f){return(f===void 0||f>m.length)&&(f=m.length),m.substring(f-_.length,f)===_}var u="",p="",c="",x="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function h(m){var _=Object.keys(m),f=Object.create(Object.getPrototypeOf(m));return _.forEach(function(S){f[S]=m[S]}),Object.defineProperty(f,"message",{value:m.message}),f}function y(m){return n(m,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var v=function(m){function _(w){var E;if(function(te,K){if(!(te instanceof K))throw new TypeError("Cannot call a class as a function")}(this,_),r(w)!=="object"||w===null)throw new o("options","Object",w);var L=w.message,C=w.operator,P=w.stackStartFn,z=w.actual,G=w.expected,O=Error.stackTraceLimit;if(Error.stackTraceLimit=0,L!=null)E=T(this,i(_).call(this,String(L)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&M.stderr.getColorDepth()!==1?(u="\x1B[34m",p="\x1B[32m",x="\x1B[39m",c="\x1B[31m"):(u="",p="",x="",c="")),r(z)==="object"&&z!==null&&r(G)==="object"&&G!==null&&"stack"in z&&z instanceof Error&&"stack"in G&&G instanceof Error&&(z=h(z),G=h(G)),C==="deepStrictEqual"||C==="strictEqual")E=T(this,i(_).call(this,function(te,K,J){var Y="",W="",Q=0,ne="",re=!1,ae=y(te),ue=ae.split(`
`),pe=y(K).split(`
`),ge=0,_e="";if(J==="strictEqual"&&r(te)==="object"&&r(K)==="object"&&te!==null&&K!==null&&(J="strictEqualObject"),ue.length===1&&pe.length===1&&ue[0]!==pe[0]){var me=ue[0].length+pe[0].length;if(me<=10){if(!(r(te)==="object"&&te!==null||r(K)==="object"&&K!==null||te===0&&K===0))return"".concat(g[J],`

`)+"".concat(ue[0]," !== ").concat(pe[0],`
`)}else if(J!=="strictEqualObject"&&me<(M.stderr&&M.stderr.isTTY?M.stderr.columns:80)){for(;ue[0][ge]===pe[0][ge];)ge++;ge>2&&(_e=`
  `.concat(function(Fe,ce){if(ce=Math.floor(ce),Fe.length==0||ce==0)return"";var we=Fe.length*ce;for(ce=Math.floor(Math.log(ce)/Math.log(2));ce;)Fe+=Fe,ce--;return Fe+Fe.substring(0,we-Fe.length)}(" ",ge),"^"),ge=0)}}for(var ve=ue[ue.length-1],Oe=pe[pe.length-1];ve===Oe&&(ge++<2?ne=`
  `.concat(ve).concat(ne):Y=ve,ue.pop(),pe.pop(),ue.length!==0&&pe.length!==0);)ve=ue[ue.length-1],Oe=pe[pe.length-1];var Me=Math.max(ue.length,pe.length);if(Me===0){var Te=ae.split(`
`);if(Te.length>30)for(Te[26]="".concat(u,"...").concat(x);Te.length>27;)Te.pop();return"".concat(g.notIdentical,`

`).concat(Te.join(`
`),`
`)}ge>3&&(ne=`
`.concat(u,"...").concat(x).concat(ne),re=!0),Y!==""&&(ne=`
  `.concat(Y).concat(ne),Y="");var se=0,oe=g[J]+`
`.concat(p,"+ actual").concat(x," ").concat(c,"- expected").concat(x),he=" ".concat(u,"...").concat(x," Lines skipped");for(ge=0;ge<Me;ge++){var Ee=ge-Q;if(ue.length<ge+1)Ee>1&&ge>2&&(Ee>4?(W+=`
`.concat(u,"...").concat(x),re=!0):Ee>3&&(W+=`
  `.concat(pe[ge-2]),se++),W+=`
  `.concat(pe[ge-1]),se++),Q=ge,Y+=`
`.concat(c,"-").concat(x," ").concat(pe[ge]),se++;else if(pe.length<ge+1)Ee>1&&ge>2&&(Ee>4?(W+=`
`.concat(u,"...").concat(x),re=!0):Ee>3&&(W+=`
  `.concat(ue[ge-2]),se++),W+=`
  `.concat(ue[ge-1]),se++),Q=ge,W+=`
`.concat(p,"+").concat(x," ").concat(ue[ge]),se++;else{var ke=pe[ge],be=ue[ge],Ie=be!==ke&&(!a(be,",")||be.slice(0,-1)!==ke);Ie&&a(ke,",")&&ke.slice(0,-1)===be&&(Ie=!1,be+=","),Ie?(Ee>1&&ge>2&&(Ee>4?(W+=`
`.concat(u,"...").concat(x),re=!0):Ee>3&&(W+=`
  `.concat(ue[ge-2]),se++),W+=`
  `.concat(ue[ge-1]),se++),Q=ge,W+=`
`.concat(p,"+").concat(x," ").concat(be),Y+=`
`.concat(c,"-").concat(x," ").concat(ke),se+=2):(W+=Y,Y="",Ee!==1&&ge!==0||(W+=`
  `.concat(be),se++))}if(se>20&&ge<Me-2)return"".concat(oe).concat(he,`
`).concat(W,`
`).concat(u,"...").concat(x).concat(Y,`
`)+"".concat(u,"...").concat(x)}return"".concat(oe).concat(re?he:"",`
`).concat(W).concat(Y).concat(ne).concat(_e)}(z,G,C)));else if(C==="notDeepStrictEqual"||C==="notStrictEqual"){var H=g[C],N=y(z).split(`
`);if(C==="notStrictEqual"&&r(z)==="object"&&z!==null&&(H=g.notStrictEqualObject),N.length>30)for(N[26]="".concat(u,"...").concat(x);N.length>27;)N.pop();E=N.length===1?T(this,i(_).call(this,"".concat(H," ").concat(N[0]))):T(this,i(_).call(this,"".concat(H,`

`).concat(N.join(`
`),`
`)))}else{var B=y(z),V="",q=g[C];C==="notDeepEqual"||C==="notEqual"?(B="".concat(g[C],`

`).concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):(V="".concat(y(G)),B.length>512&&(B="".concat(B.slice(0,509),"...")),V.length>512&&(V="".concat(V.slice(0,509),"...")),C==="deepEqual"||C==="equal"?B="".concat(q,`

`).concat(B,`

should equal

`):V=" ".concat(C," ").concat(V)),E=T(this,i(_).call(this,"".concat(B).concat(V)))}return Error.stackTraceLimit=O,E.generatedMessage=!L,Object.defineProperty(b(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=z,E.expected=G,E.operator=C,Error.captureStackTrace&&Error.captureStackTrace(b(E),P),E.stack,E.name="AssertionError",T(E)}var f,S;return function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),E&&t(w,E)}(_,m),f=_,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:n.custom,value:function(w,E){return n(this,function(L){for(var C=1;C<arguments.length;C++){var P=arguments[C]!=null?arguments[C]:{},z=Object.keys(P);typeof Object.getOwnPropertySymbols=="function"&&(z=z.concat(Object.getOwnPropertySymbols(P).filter(function(G){return Object.getOwnPropertyDescriptor(P,G).enumerable}))),z.forEach(function(G){k(L,G,P[G])})}return L}({},E,{customInspect:!1,depth:0}))}}],S&&l(f.prototype,S),_}(d(Error));ee.exports=v},79616:function(ee,D,e){function M(i){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},M(i)}function k(i){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},k(i)}function l(i,r){return l=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},l(i,r)}var T,b,d={};function s(i,r,n){n||(n=Error);var o=function(a){function u(p,c,x){var g;return function(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}(this,u),g=function(h,y){return!y||M(y)!=="object"&&typeof y!="function"?function(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}(h):y}(this,k(u).call(this,function(h,y,v){return typeof r=="string"?r:r(h,y,v)}(p,c,x))),g.code=i,g}return function(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(c&&c.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),c&&l(p,c)}(u,a),u}(n);d[i]=o}function t(i,r){if(Array.isArray(i)){var n=i.length;return i=i.map(function(o){return String(o)}),n>2?"one of ".concat(r," ").concat(i.slice(0,n-1).join(", "),", or ")+i[n-1]:n===2?"one of ".concat(r," ").concat(i[0]," or ").concat(i[1]):"of ".concat(r," ").concat(i[0])}return"of ".concat(r," ").concat(String(i))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(i,r,n){var o,a,u,p,c;if(T===void 0&&(T=e(32791)),T(typeof i=="string","'name' must be a string"),typeof r=="string"&&(a="not ",r.substr(0,4)===a)?(o="must not be",r=r.replace(/^not /,"")):o="must be",function(g,h,y){return(y===void 0||y>g.length)&&(y=g.length),g.substring(y-9,y)===h}(i," argument"))u="The ".concat(i," ").concat(o," ").concat(t(r,"type"));else{var x=(typeof c!="number"&&(c=0),c+1>(p=i).length||p.indexOf(".",c)===-1?"argument":"property");u='The "'.concat(i,'" ').concat(x," ").concat(o," ").concat(t(r,"type"))}return u+". Received type ".concat(M(n))},TypeError),s("ERR_INVALID_ARG_VALUE",function(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";b===void 0&&(b=e(43827));var o=b.inspect(r);return o.length>128&&(o="".concat(o.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(n,". Received ").concat(o)},TypeError),s("ERR_INVALID_RETURN_VALUE",function(i,r,n){var o;return o=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(M(n)),"Expected ".concat(i,' to be returned from the "').concat(r,'"')+" function but got ".concat(o,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];T===void 0&&(T=e(32791)),T(r.length>0,"At least one arg needs to be specified");var o="The ",a=r.length;switch(r=r.map(function(u){return'"'.concat(u,'"')}),a){case 1:o+="".concat(r[0]," argument");break;case 2:o+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:o+=r.slice(0,a-1).join(", "),o+=", and ".concat(r[a-1]," arguments")}return"".concat(o," must be specified")},TypeError),ee.exports.codes=d},74061:function(ee,D,e){function M(Q,ne){return function(re){if(Array.isArray(re))return re}(Q)||function(re,ae){var ue=[],pe=!0,ge=!1,_e=void 0;try{for(var me,ve=re[Symbol.iterator]();!(pe=(me=ve.next()).done)&&(ue.push(me.value),!ae||ue.length!==ae);pe=!0);}catch(Oe){ge=!0,_e=Oe}finally{try{pe||ve.return==null||ve.return()}finally{if(ge)throw _e}}return ue}(Q,ne)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(Q){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},k(Q)}var l=/a/g.flags!==void 0,T=function(Q){var ne=[];return Q.forEach(function(re){return ne.push(re)}),ne},b=function(Q){var ne=[];return Q.forEach(function(re,ae){return ne.push([ae,re])}),ne},d=Object.is?Object.is:e(64003),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(15567);function i(Q){return Q.call.bind(Q)}var r=i(Object.prototype.hasOwnProperty),n=i(Object.prototype.propertyIsEnumerable),o=i(Object.prototype.toString),a=e(43827).types,u=a.isAnyArrayBuffer,p=a.isArrayBufferView,c=a.isDate,x=a.isMap,g=a.isRegExp,h=a.isSet,y=a.isNativeError,v=a.isBoxedPrimitive,m=a.isNumberObject,_=a.isStringObject,f=a.isBooleanObject,S=a.isBigIntObject,w=a.isSymbolObject,E=a.isFloat32Array,L=a.isFloat64Array;function C(Q){if(Q.length===0||Q.length>10)return!0;for(var ne=0;ne<Q.length;ne++){var re=Q.charCodeAt(ne);if(re<48||re>57)return!0}return Q.length===10&&Q>=Math.pow(2,32)}function P(Q){return Object.keys(Q).filter(C).concat(s(Q).filter(Object.prototype.propertyIsEnumerable.bind(Q)))}function z(Q,ne){if(Q===ne)return 0;for(var re=Q.length,ae=ne.length,ue=0,pe=Math.min(re,ae);ue<pe;++ue)if(Q[ue]!==ne[ue]){re=Q[ue],ae=ne[ue];break}return re<ae?-1:ae<re?1:0}var G=0,O=1,H=2,N=3;function B(Q,ne,re,ae){if(Q===ne)return Q!==0||!re||d(Q,ne);if(re){if(k(Q)!=="object")return typeof Q=="number"&&t(Q)&&t(ne);if(k(ne)!=="object"||Q===null||ne===null||Object.getPrototypeOf(Q)!==Object.getPrototypeOf(ne))return!1}else{if(Q===null||k(Q)!=="object")return(ne===null||k(ne)!=="object")&&Q==ne;if(ne===null||k(ne)!=="object")return!1}var ue,pe,ge,_e,me=o(Q);if(me!==o(ne))return!1;if(Array.isArray(Q)){if(Q.length!==ne.length)return!1;var ve=P(Q),Oe=P(ne);return ve.length===Oe.length&&q(Q,ne,re,ae,O,ve)}if(me==="[object Object]"&&(!x(Q)&&x(ne)||!h(Q)&&h(ne)))return!1;if(c(Q)){if(!c(ne)||Date.prototype.getTime.call(Q)!==Date.prototype.getTime.call(ne))return!1}else if(g(Q)){if(!g(ne)||(ge=Q,_e=ne,!(l?ge.source===_e.source&&ge.flags===_e.flags:RegExp.prototype.toString.call(ge)===RegExp.prototype.toString.call(_e))))return!1}else if(y(Q)||Q instanceof Error){if(Q.message!==ne.message||Q.name!==ne.name)return!1}else{if(p(Q)){if(re||!E(Q)&&!L(Q)){if(!function(se,oe){return se.byteLength===oe.byteLength&&z(new Uint8Array(se.buffer,se.byteOffset,se.byteLength),new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength))===0}(Q,ne))return!1}else if(!function(se,oe){if(se.byteLength!==oe.byteLength)return!1;for(var he=0;he<se.byteLength;he++)if(se[he]!==oe[he])return!1;return!0}(Q,ne))return!1;var Me=P(Q),Te=P(ne);return Me.length===Te.length&&q(Q,ne,re,ae,G,Me)}if(h(Q))return!(!h(ne)||Q.size!==ne.size)&&q(Q,ne,re,ae,H);if(x(Q))return!(!x(ne)||Q.size!==ne.size)&&q(Q,ne,re,ae,N);if(u(Q)){if(pe=ne,(ue=Q).byteLength!==pe.byteLength||z(new Uint8Array(ue),new Uint8Array(pe))!==0)return!1}else if(v(Q)&&!function(se,oe){return m(se)?m(oe)&&d(Number.prototype.valueOf.call(se),Number.prototype.valueOf.call(oe)):_(se)?_(oe)&&String.prototype.valueOf.call(se)===String.prototype.valueOf.call(oe):f(se)?f(oe)&&Boolean.prototype.valueOf.call(se)===Boolean.prototype.valueOf.call(oe):S(se)?S(oe)&&BigInt.prototype.valueOf.call(se)===BigInt.prototype.valueOf.call(oe):w(oe)&&Symbol.prototype.valueOf.call(se)===Symbol.prototype.valueOf.call(oe)}(Q,ne))return!1}return q(Q,ne,re,ae,G)}function V(Q,ne){return ne.filter(function(re){return n(Q,re)})}function q(Q,ne,re,ae,ue,pe){if(arguments.length===5){pe=Object.keys(Q);var ge=Object.keys(ne);if(pe.length!==ge.length)return!1}for(var _e=0;_e<pe.length;_e++)if(!r(ne,pe[_e]))return!1;if(re&&arguments.length===5){var me=s(Q);if(me.length!==0){var ve=0;for(_e=0;_e<me.length;_e++){var Oe=me[_e];if(n(Q,Oe)){if(!n(ne,Oe))return!1;pe.push(Oe),ve++}else if(n(ne,Oe))return!1}var Me=s(ne);if(me.length!==Me.length&&V(ne,Me).length!==ve)return!1}else{var Te=s(ne);if(Te.length!==0&&V(ne,Te).length!==0)return!1}}if(pe.length===0&&(ue===G||ue===O&&Q.length===0||Q.size===0))return!0;if(ae===void 0)ae={val1:new Map,val2:new Map,position:0};else{var se=ae.val1.get(Q);if(se!==void 0){var oe=ae.val2.get(ne);if(oe!==void 0)return se===oe}ae.position++}ae.val1.set(Q,ae.position),ae.val2.set(ne,ae.position);var he=function(Ee,ke,be,Ie,Fe,ce){var we=0;if(ce===H){if(!function(ze,He,Ge,Je){for(var ot=null,Qe=T(ze),vt=0;vt<Qe.length;vt++){var xt=Qe[vt];if(k(xt)==="object"&&xt!==null)ot===null&&(ot=new Set),ot.add(xt);else if(!He.has(xt)){if(Ge||!J(ze,He,xt))return!1;ot===null&&(ot=new Set),ot.add(xt)}}if(ot!==null){for(var mt=T(He),rt=0;rt<mt.length;rt++){var it=mt[rt];if(k(it)==="object"&&it!==null){if(!te(ot,it,Ge,Je))return!1}else if(!Ge&&!ze.has(it)&&!te(ot,it,Ge,Je))return!1}return ot.size===0}return!0}(Ee,ke,be,Fe))return!1}else if(ce===N){if(!function(ze,He,Ge,Je){for(var ot=null,Qe=b(ze),vt=0;vt<Qe.length;vt++){var xt=M(Qe[vt],2),mt=xt[0],rt=xt[1];if(k(mt)==="object"&&mt!==null)ot===null&&(ot=new Set),ot.add(mt);else{var it=He.get(mt);if(it===void 0&&!He.has(mt)||!B(rt,it,Ge,Je)){if(Ge||!Y(ze,He,mt,rt,Je))return!1;ot===null&&(ot=new Set),ot.add(mt)}}}if(ot!==null){for(var Tt=b(He),Mt=0;Mt<Tt.length;Mt++){var Pt=M(Tt[Mt],2),kt=(mt=Pt[0],Pt[1]);if(k(mt)==="object"&&mt!==null){if(!W(ot,ze,mt,kt,Ge,Je))return!1}else if(!(Ge||ze.has(mt)&&B(ze.get(mt),kt,!1,Je)||W(ot,ze,mt,kt,!1,Je)))return!1}return ot.size===0}return!0}(Ee,ke,be,Fe))return!1}else if(ce===O)for(;we<Ee.length;we++){if(!r(Ee,we)){if(r(ke,we))return!1;for(var ye=Object.keys(Ee);we<ye.length;we++){var Ce=ye[we];if(!r(ke,Ce)||!B(Ee[Ce],ke[Ce],be,Fe))return!1}return ye.length===Object.keys(ke).length}if(!r(ke,we)||!B(Ee[we],ke[we],be,Fe))return!1}for(we=0;we<Ie.length;we++){var Re=Ie[we];if(!B(Ee[Re],ke[Re],be,Fe))return!1}return!0}(Q,ne,re,pe,ae,ue);return ae.val1.delete(Q),ae.val2.delete(ne),he}function te(Q,ne,re,ae){for(var ue=T(Q),pe=0;pe<ue.length;pe++){var ge=ue[pe];if(B(ne,ge,re,ae))return Q.delete(ge),!0}return!1}function K(Q){switch(k(Q)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":Q=+Q;case"number":if(t(Q))return!1}return!0}function J(Q,ne,re){var ae=K(re);return ae??(ne.has(ae)&&!Q.has(ae))}function Y(Q,ne,re,ae,ue){var pe=K(re);if(pe!=null)return pe;var ge=ne.get(pe);return!(ge===void 0&&!ne.has(pe)||!B(ae,ge,!1,ue))&&!Q.has(pe)&&B(ae,ge,!1,ue)}function W(Q,ne,re,ae,ue,pe){for(var ge=T(Q),_e=0;_e<ge.length;_e++){var me=ge[_e];if(B(re,me,ue,pe)&&B(ae,ne.get(me),ue,pe))return Q.delete(me),!0}return!1}ee.exports={isDeepEqual:function(Q,ne){return B(Q,ne,!1)},isDeepStrictEqual:function(Q,ne){return B(Q,ne,!0)}}},95341:function(ee,D){D.byteLength=function(s){var t=b(s),i=t[0],r=t[1];return 3*(i+r)/4-r},D.toByteArray=function(s){var t,i,r=b(s),n=r[0],o=r[1],a=new k(function(c,x,g){return 3*(x+g)/4-g}(0,n,o)),u=0,p=o>0?n-4:n;for(i=0;i<p;i+=4)t=M[s.charCodeAt(i)]<<18|M[s.charCodeAt(i+1)]<<12|M[s.charCodeAt(i+2)]<<6|M[s.charCodeAt(i+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;return o===2&&(t=M[s.charCodeAt(i)]<<2|M[s.charCodeAt(i+1)]>>4,a[u++]=255&t),o===1&&(t=M[s.charCodeAt(i)]<<10|M[s.charCodeAt(i+1)]<<4|M[s.charCodeAt(i+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t),a},D.fromByteArray=function(s){for(var t,i=s.length,r=i%3,n=[],o=16383,a=0,u=i-r;a<u;a+=o)n.push(d(s,a,a+o>u?u:a+o));return r===1?(t=s[i-1],n.push(e[t>>2]+e[t<<4&63]+"==")):r===2&&(t=(s[i-2]<<8)+s[i-1],n.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),n.join("")};for(var e=[],M=[],k=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)e[T]=l[T],M[l.charCodeAt(T)]=T;function b(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=s.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function d(s,t,i){for(var r,n,o=[],a=t;a<i;a+=3)r=(s[a]<<16&16711680)+(s[a+1]<<8&65280)+(255&s[a+2]),o.push(e[(n=r)>>18&63]+e[n>>12&63]+e[n>>6&63]+e[63&n]);return o.join("")}M["-".charCodeAt(0)]=62,M["_".charCodeAt(0)]=63},91358:function(ee){function D(b,d,s,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,o=b[n];(s!==void 0?s(o,d):o-d)>=0?(r=n,i=n-1):t=n+1}return r}function e(b,d,s,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,o=b[n];(s!==void 0?s(o,d):o-d)>0?(r=n,i=n-1):t=n+1}return r}function M(b,d,s,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,o=b[n];(s!==void 0?s(o,d):o-d)<0?(r=n,t=n+1):i=n-1}return r}function k(b,d,s,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,o=b[n];(s!==void 0?s(o,d):o-d)<=0?(r=n,t=n+1):i=n-1}return r}function l(b,d,s,t,i){for(;t<=i;){var r=t+i>>>1,n=b[r],o=s!==void 0?s(n,d):n-d;if(o===0)return r;o<=0?t=r+1:i=r-1}return-1}function T(b,d,s,t,i,r){return typeof s=="function"?r(b,d,s,t===void 0?0:0|t,i===void 0?b.length-1:0|i):r(b,d,void 0,s===void 0?0:0|s,t===void 0?b.length-1:0|t)}ee.exports={ge:function(b,d,s,t,i){return T(b,d,s,t,i,D)},gt:function(b,d,s,t,i){return T(b,d,s,t,i,e)},lt:function(b,d,s,t,i){return T(b,d,s,t,i,M)},le:function(b,d,s,t,i){return T(b,d,s,t,i,k)},eq:function(b,d,s,t,i){return T(b,d,s,t,i,l)}}},13547:function(ee,D){function e(k){var l=32;return(k&=-k)&&l--,65535&k&&(l-=16),16711935&k&&(l-=8),252645135&k&&(l-=4),858993459&k&&(l-=2),1431655765&k&&(l-=1),l}D.INT_BITS=32,D.INT_MAX=2147483647,D.INT_MIN=-2147483648,D.sign=function(k){return(k>0)-(k<0)},D.abs=function(k){var l=k>>31;return(k^l)-l},D.min=function(k,l){return l^(k^l)&-(k<l)},D.max=function(k,l){return k^(k^l)&-(k<l)},D.isPow2=function(k){return!(k&k-1||!k)},D.log2=function(k){var l,T;return l=(k>65535)<<4,l|=T=((k>>>=l)>255)<<3,l|=T=((k>>>=T)>15)<<2,(l|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},D.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},D.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},D.countTrailingZeros=e,D.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},D.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},D.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var M=new Array(256);(function(k){for(var l=0;l<256;++l){var T=l,b=l,d=7;for(T>>>=1;T;T>>>=1)b<<=1,b|=1&T,--d;k[l]=b<<d&255}})(M),D.reverse=function(k){return M[255&k]<<24|M[k>>>8&255]<<16|M[k>>>16&255]<<8|M[k>>>24&255]},D.interleave2=function(k,l){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},D.deinterleave2=function(k,l){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>l&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},D.interleave3=function(k,l,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},D.deinterleave3=function(k,l){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>l&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},D.nextCombination=function(k){var l=k|k-1;return l+1|(~l&-~l)-1>>>e(k)+1}},44781:function(ee,D,e){var M=e(53435);ee.exports=function(b,d){d||(d={});var s,t,i,r,n,o,a,u,p,c,x,g=d.cutoff==null?.25:d.cutoff,h=d.radius==null?8:d.radius,y=d.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!d.width||!d.height)throw Error("For raw data width and height should be provided by options");s=d.width,t=d.height,r=b,o=d.stride?d.stride:Math.floor(b.length/s/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(a=(u=b).getContext("2d"),s=u.width,t=u.height,r=(p=a.getImageData(0,0,s,t)).data,o=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(a=b,s=(u=b.canvas).width,t=u.height,r=(p=a.getImageData(0,0,s,t)).data,o=4):window.ImageData&&b instanceof window.ImageData&&(p=b,s=b.width,t=b.height,r=p.data,o=4);if(i=Math.max(s,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(s*t),c=0,x=n.length;c<x;c++)r[c]=n[c*o+y]/255;else if(o!==1)throw Error("Raw data can have only 1 value per pixel");var v=Array(s*t),m=Array(s*t),_=Array(i),f=Array(i),S=Array(i+1),w=Array(i);for(c=0,x=s*t;c<x;c++){var E=r[c];v[c]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),m[c]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}l(v,s,t,_,f,w,S),l(m,s,t,_,f,w,S);var L=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(c=0,x=s*t;c<x;c++)L[c]=M(1-((v[c]-m[c])/h+g),0,1);return L};var k=1e20;function l(b,d,s,t,i,r,n){for(var o=0;o<d;o++){for(var a=0;a<s;a++)t[a]=b[a*d+o];for(T(t,i,r,n,s),a=0;a<s;a++)b[a*d+o]=i[a]}for(a=0;a<s;a++){for(o=0;o<d;o++)t[o]=b[a*d+o];for(T(t,i,r,n,d),o=0;o<d;o++)b[a*d+o]=Math.sqrt(i[o])}}function T(b,d,s,t,i){s[0]=0,t[0]=-k,t[1]=+k;for(var r=1,n=0;r<i;r++){for(var o=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);o<=t[n];)n--,o=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);s[++n]=r,t[n]=o,t[n+1]=+k}for(r=0,n=0;r<i;r++){for(;t[n+1]<r;)n++;d[r]=(r-s[n])*(r-s[n])+b[s[n]]}}},6614:function(ee,D,e){var M=e(68318),k=e(68222),l=k(M("String.prototype.indexOf"));ee.exports=function(T,b){var d=M(T,!!b);return typeof d=="function"&&l(T,".prototype.")>-1?k(d):d}},68222:function(ee,D,e){var M=e(77575),k=e(68318),l=k("%Function.prototype.apply%"),T=k("%Function.prototype.call%"),b=k("%Reflect.apply%",!0)||M.call(T,l),d=k("%Object.getOwnPropertyDescriptor%",!0),s=k("%Object.defineProperty%",!0),t=k("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}ee.exports=function(r){var n=b(M,T,arguments);return d&&s&&d(n,"length").configurable&&s(n,"length",{value:1+t(0,r.length-(arguments.length-1))}),n};var i=function(){return b(M,l,arguments)};s?s(ee.exports,"apply",{value:i}):ee.exports.apply=i},53435:function(ee){ee.exports=function(D,e,M){return e<M?D<e?e:D>M?M:D:D<M?M:D>e?e:D}},6475:function(ee,D,e){var M=e(53435);function k(l,T){T==null&&(T=!0);var b=l[0],d=l[1],s=l[2],t=l[3];return t==null&&(t=T?1:255),T&&(b*=255,d*=255,s*=255,t*=255),16777216*(b=255&M(b,0,255))+((d=255&M(d,0,255))<<16)+((s=255&M(s,0,255))<<8)+(255&M(t,0,255))}ee.exports=k,ee.exports.to=k,ee.exports.from=function(l,T){var b=(l=+l)>>>24,d=(16711680&l)>>>16,s=(65280&l)>>>8,t=255&l;return T===!1?[b,d,s,t]:[b/255,d/255,s/255,t/255]}},76857:function(ee){ee.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(ee,D,e){var M=e(36652),k=e(53435),l=e(90660);ee.exports=function(T,b){b!=="float"&&b||(b="array"),b==="uint"&&(b="uint8"),b==="uint_clamped"&&(b="uint8_clamped");var d=new(l(b))(4),s=b!=="uint8"&&b!=="uint8_clamped";return T.length&&typeof T!="string"||((T=M(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:255,s&&(d[0]/=255,d[1]/=255,d[2]/=255,d[3]/=255),d):(s?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:1):(d[0]=k(Math.floor(255*T[0]),0,255),d[1]=k(Math.floor(255*T[1]),0,255),d[2]=k(Math.floor(255*T[2]),0,255),d[3]=T[3]==null?255:k(Math.floor(255*T[3]),0,255)),d)}},90736:function(ee,D,e){var M=e(76857),k=e(10973),l=e(46775);ee.exports=function(b){var d,s,t=[],i=1;if(typeof b=="string")if(M[b])t=M[b].slice(),s="rgb";else if(b==="transparent")i=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(b)){var r=b.slice(1);i=1,(a=r.length)<=4?(t=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],a===4&&(i=parseInt(r[3]+r[3],16)/255)):(t=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],a===8&&(i=parseInt(r[6]+r[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(d=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(b)){var n=d[1],o=n==="rgb";s=r=n.replace(/a$/,"");var a=r==="cmyk"?4:r==="gray"?1:3;t=d[2].trim().split(/\s*,\s*/).map(function(p,c){if(/%$/.test(p))return c===a?parseFloat(p)/100:r==="rgb"?255*parseFloat(p)/100:parseFloat(p);if(r[c]==="h"){if(/deg$/.test(p))return parseFloat(p);if(T[p]!==void 0)return T[p]}return parseFloat(p)}),n===r&&t.push(1),i=o||t[a]===void 0?1:t[a],t=t.slice(0,a)}else b.length>10&&/[0-9](?:\s|\/)/.test(b)&&(t=b.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),s=b.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(b))if(k(b)){var u=l(b.r,b.red,b.R,null);u!==null?(s="rgb",t=[u,l(b.g,b.green,b.G),l(b.b,b.blue,b.B)]):(s="hsl",t=[l(b.h,b.hue,b.H),l(b.s,b.saturation,b.S),l(b.l,b.lightness,b.L,b.b,b.brightness)]),i=l(b.a,b.alpha,b.opacity,1),b.opacity!=null&&(i/=100)}else(Array.isArray(b)||e.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(b))&&(t=[b[0],b[1],b[2]],s="rgb",i=b.length===4?b[3]:1);else s="rgb",t=[b>>>16,(65280&b)>>>8,255&b];return{space:s,values:t,alpha:i}};var T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(ee,D,e){var M=e(90736),k=e(80009),l=e(53435);ee.exports=function(T){var b,d=M(T);return d.space?((b=Array(3))[0]=l(d.values[0],0,255),b[1]=l(d.values[1],0,255),b[2]=l(d.values[2],0,255),d.space[0]==="h"&&(b=k.rgb(b)),b.push(l(d.alpha,0,1)),b):[]}},80009:function(ee,D,e){var M=e(6866);ee.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var l,T,b,d,s,t=k[0]/360,i=k[1]/100,r=k[2]/100;if(i===0)return[s=255*r,s,s];l=2*r-(T=r<.5?r*(1+i):r+i-r*i),d=[0,0,0];for(var n=0;n<3;n++)(b=t+.3333333333333333*-(n-1))<0?b++:b>1&&b--,s=6*b<1?l+6*(T-l)*b:2*b<1?T:3*b<2?l+(T-l)*(.6666666666666666-b)*6:l,d[n]=255*s;return d}},M.hsl=function(k){var l,T,b=k[0]/255,d=k[1]/255,s=k[2]/255,t=Math.min(b,d,s),i=Math.max(b,d,s),r=i-t;return i===t?l=0:b===i?l=(d-s)/r:d===i?l=2+(s-b)/r:s===i&&(l=4+(b-d)/r),(l=Math.min(60*l,360))<0&&(l+=360),T=(t+i)/2,[l,100*(i===t?0:T<=.5?r/(i+t):r/(2-i-t)),100*T]}},6866:function(ee){ee.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(ee){ee.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(ee,D,e){ee.exports={parse:e(41004),stringify:e(53313)}},63625:function(ee,D,e){var M=e(40402);ee.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||M.indexOf(k)!==-1}}},41004:function(ee,D,e){var M=e(90448),k=e(38732),l=e(41901),T=e(15659),b=e(96209),d=e(83794),s=e(99011),t=e(63625).isSize;ee.exports=r;var i=r.cache={};function r(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(i[o])return i[o];if(o==="")throw new Error("Cannot parse an empty string.");if(l.indexOf(o)!==-1)return i[o]={system:o};for(var a,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=s(o,/\s+/);a=p.shift();){if(k.indexOf(a)!==-1)return["style","variant","weight","stretch"].forEach(function(x){u[x]=a}),i[o]=u;if(b.indexOf(a)===-1)if(a!=="normal"&&a!=="small-caps")if(d.indexOf(a)===-1){if(T.indexOf(a)===-1){if(t(a)){var c=s(a,"/");if(u.size=c[0],c[1]!=null?u.lineHeight=n(c[1]):p[0]==="/"&&(p.shift(),u.lineHeight=n(p.shift())),!p.length)throw new Error("Missing required font-family.");return u.family=s(p.join(" "),/\s*,\s*/).map(M),i[o]=u}throw new Error("Unknown or unsupported font token: "+a)}u.weight=a}else u.stretch=a;else u.variant=a;else u.style=a}throw new Error("Missing required font-size.")}function n(o){var a=parseFloat(o);return a.toString()===o?a:o}},53313:function(ee,D,e){var M=e(71299),k=e(63625).isSize,l=o(e(38732)),T=o(e(41901)),b=o(e(15659)),d=o(e(96209)),s=o(e(83794)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(a,u){if(a&&!u[a]&&!l[a])throw Error("Unknown keyword `"+a+"`");return a}function o(a){for(var u={},p=0;p<a.length;p++)u[a[p]]=1;return u}ee.exports=function(a){if((a=M(a,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return a.system&&n(a.system,T),a.system;if(n(a.style,d),n(a.variant,t),n(a.weight,b),n(a.stretch,s),a.size==null&&(a.size="1rem"),typeof a.size=="number"&&(a.size+="px"),!k)throw Error("Bad size value `"+a.size+"`");a.family||(a.family=r),Array.isArray(a.family)&&(a.family.length||(a.family=[r]),a.family=a.family.map(function(p){return i[p]?p:'"'+p+'"'}).join(", "));var u=[];return u.push(a.style),a.variant!==a.style&&u.push(a.variant),a.weight!==a.variant&&a.weight!==a.style&&u.push(a.weight),a.stretch!==a.weight&&a.stretch!==a.variant&&a.stretch!==a.style&&u.push(a.stretch),u.push(a.size+(a.lineHeight==null||a.lineHeight==="normal"||a.lineHeight+""=="1"?"":"/"+a.lineHeight)),u.push(a.family),u.filter(Boolean).join(" ")}},55174:function(ee,D,e){var M,k=e(24582),l=e(10424),T=e(82527),b=e(19012),d=e(21780),s=e(16906),t=Function.prototype.bind,i=Object.defineProperty,r=Object.prototype.hasOwnProperty;M=function(n,o,a){var u,p=l(o)&&T(o.value);return delete(u=b(o)).writable,delete u.value,u.get=function(){return!a.overwriteDefinition&&r.call(this,n)?p:(o.value=t.call(p,a.resolveContext?a.resolveContext(this):this),i(this,n,o),this[n])},u},ee.exports=function(n){var o=d(arguments[1]);return k(o.resolveContext)&&T(o.resolveContext),s(n,function(a,u){return M(u,a,o)})}},62072:function(ee,D,e){var M=e(24582),k=e(84985),l=e(95879),T=e(21780),b=e(66741),d=ee.exports=function(s,t){var i,r,n,o,a;return arguments.length<2||typeof s!="string"?(o=t,t=s,s=null):o=arguments[2],M(s)?(i=b.call(s,"c"),r=b.call(s,"e"),n=b.call(s,"w")):(i=n=!0,r=!1),a={value:t,configurable:i,enumerable:r,writable:n},o?l(T(o),a):a};d.gs=function(s,t,i){var r,n,o,a;return typeof s!="string"?(o=i,i=t,t=s,s=null):o=arguments[3],M(t)?k(t)?M(i)?k(i)||(o=i,i=void 0):i=void 0:(o=t,t=i=void 0):t=void 0,M(s)?(r=b.call(s,"c"),n=b.call(s,"e")):(r=!0,n=!1),a={get:t,set:i,configurable:r,enumerable:n},o?l(T(o),a):a}},33064:function(ee,D,e){function M(n,o){return n<o?-1:n>o?1:n>=o?0:NaN}e.d(D,{j2:function(){return M},Fp:function(){return T},J6:function(){return d},TS:function(){return s},VV:function(){return t},w6:function(){return i},Sm:function(){return r}}),(k=M).length===1&&(l=k,k=function(n,o){return M(l(n),o)});var k,l;function T(n,o){var a,u,p=n.length,c=-1;if(o==null){for(;++c<p;)if((a=n[c])!=null&&a>=a)for(u=a;++c<p;)(a=n[c])!=null&&a>u&&(u=a)}else for(;++c<p;)if((a=o(n[c],c,n))!=null&&a>=a)for(u=a;++c<p;)(a=o(n[c],c,n))!=null&&a>u&&(u=a);return u}function b(n){return n===null?NaN:+n}function d(n,o){var a,u=n.length,p=u,c=-1,x=0;if(o==null)for(;++c<u;)isNaN(a=b(n[c]))?--p:x+=a;else for(;++c<u;)isNaN(a=b(o(n[c],c,n)))?--p:x+=a;if(p)return x/p}function s(n){for(var o,a,u,p=n.length,c=-1,x=0;++c<p;)x+=n[c].length;for(a=new Array(x);--p>=0;)for(o=(u=n[p]).length;--o>=0;)a[--x]=u[o];return a}function t(n,o){var a,u,p=n.length,c=-1;if(o==null){for(;++c<p;)if((a=n[c])!=null&&a>=a)for(u=a;++c<p;)(a=n[c])!=null&&u>a&&(u=a)}else for(;++c<p;)if((a=o(n[c],c,n))!=null&&a>=a)for(u=a;++c<p;)(a=o(n[c],c,n))!=null&&u>a&&(u=a);return u}function i(n,o,a){n=+n,o=+o,a=(p=arguments.length)<2?(o=n,n=0,1):p<3?1:+a;for(var u=-1,p=0|Math.max(0,Math.ceil((o-n)/a)),c=new Array(p);++u<p;)c[u]=n+u*a;return c}function r(n,o){var a,u=n.length,p=-1,c=0;if(o==null)for(;++p<u;)(a=+n[p])&&(c+=a);else for(;++p<u;)(a=+o(n[p],p,n))&&(c+=a);return c}},15140:function(ee,D,e){e.d(D,{UI:function(){return T},b1:function(){return b}});var M="$";function k(){}function l(o,a){var u=new k;if(o instanceof k)o.each(function(h,y){u.set(y,h)});else if(Array.isArray(o)){var p,c=-1,x=o.length;if(a==null)for(;++c<x;)u.set(c,o[c]);else for(;++c<x;)u.set(a(p=o[c],c,o),p)}else if(o)for(var g in o)u.set(g,o[g]);return u}k.prototype=l.prototype={constructor:k,has:function(o){return M+o in this},get:function(o){return this[M+o]},set:function(o,a){return this[M+o]=a,this},remove:function(o){var a=M+o;return a in this&&delete this[a]},clear:function(){for(var o in this)o[0]===M&&delete this[o]},keys:function(){var o=[];for(var a in this)a[0]===M&&o.push(a.slice(1));return o},values:function(){var o=[];for(var a in this)a[0]===M&&o.push(this[a]);return o},entries:function(){var o=[];for(var a in this)a[0]===M&&o.push({key:a.slice(1),value:this[a]});return o},size:function(){var o=0;for(var a in this)a[0]===M&&++o;return o},empty:function(){for(var o in this)if(o[0]===M)return!1;return!0},each:function(o){for(var a in this)a[0]===M&&o(this[a],a.slice(1),this)}};var T=l;function b(){var o,a,u,p=[],c=[];function x(h,y,v,m){if(y>=p.length)return o!=null&&h.sort(o),a!=null?a(h):h;for(var _,f,S,w=-1,E=h.length,L=p[y++],C=T(),P=v();++w<E;)(S=C.get(_=L(f=h[w])+""))?S.push(f):C.set(_,[f]);return C.each(function(z,G){m(P,G,x(z,y,v,m))}),P}function g(h,y){if(++y>p.length)return h;var v,m=c[y-1];return a!=null&&y>=p.length?v=h.entries():(v=[],h.each(function(_,f){v.push({key:f,values:g(_,y)})})),m!=null?v.sort(function(_,f){return m(_.key,f.key)}):v}return u={object:function(h){return x(h,0,d,s)},map:function(h){return x(h,0,t,i)},entries:function(h){return g(x(h,0,t,i),0)},key:function(h){return p.push(h),u},sortKeys:function(h){return c[p.length-1]=h,u},sortValues:function(h){return o=h,u},rollup:function(h){return a=h,u}}}function d(){return{}}function s(o,a,u){o[a]=u}function t(){return T()}function i(o,a,u){o.set(a,u)}function r(){}var n=T.prototype;r.prototype={constructor:r,has:n.has,add:function(o){return this[M+(o+="")]=o,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49887:function(ee,D,e){function M(me,ve){var Oe;function Me(){var Te,se,oe=Oe.length,he=0,Ee=0;for(Te=0;Te<oe;++Te)he+=(se=Oe[Te]).x,Ee+=se.y;for(he=he/oe-me,Ee=Ee/oe-ve,Te=0;Te<oe;++Te)(se=Oe[Te]).x-=he,se.y-=Ee}return me==null&&(me=0),ve==null&&(ve=0),Me.initialize=function(Te){Oe=Te},Me.x=function(Te){return arguments.length?(me=+Te,Me):me},Me.y=function(Te){return arguments.length?(ve=+Te,Me):ve},Me}function k(me){return function(){return me}}function l(){return 1e-6*(Math.random()-.5)}function T(me,ve,Oe,Me){if(isNaN(ve)||isNaN(Oe))return me;var Te,se,oe,he,Ee,ke,be,Ie,Fe,ce=me._root,we={data:Me},ye=me._x0,Ce=me._y0,Re=me._x1,ze=me._y1;if(!ce)return me._root=we,me;for(;ce.length;)if((ke=ve>=(se=(ye+Re)/2))?ye=se:Re=se,(be=Oe>=(oe=(Ce+ze)/2))?Ce=oe:ze=oe,Te=ce,!(ce=ce[Ie=be<<1|ke]))return Te[Ie]=we,me;if(he=+me._x.call(null,ce.data),Ee=+me._y.call(null,ce.data),ve===he&&Oe===Ee)return we.next=ce,Te?Te[Ie]=we:me._root=we,me;do Te=Te?Te[Ie]=new Array(4):me._root=new Array(4),(ke=ve>=(se=(ye+Re)/2))?ye=se:Re=se,(be=Oe>=(oe=(Ce+ze)/2))?Ce=oe:ze=oe;while((Ie=be<<1|ke)==(Fe=(Ee>=oe)<<1|he>=se));return Te[Fe]=ce,Te[Ie]=we,me}function b(me,ve,Oe,Me,Te){this.node=me,this.x0=ve,this.y0=Oe,this.x1=Me,this.y1=Te}function d(me){return me[0]}function s(me){return me[1]}function t(me,ve,Oe){var Me=new i(ve??d,Oe??s,NaN,NaN,NaN,NaN);return me==null?Me:Me.addAll(me)}function i(me,ve,Oe,Me,Te,se){this._x=me,this._y=ve,this._x0=Oe,this._y0=Me,this._x1=Te,this._y1=se,this._root=void 0}function r(me){for(var ve={data:me.data},Oe=ve;me=me.next;)Oe=Oe.next={data:me.data};return ve}e.r(D),e.d(D,{forceCenter:function(){return M},forceCollide:function(){return u},forceLink:function(){return g},forceManyBody:function(){return ue},forceRadial:function(){return pe},forceSimulation:function(){return ae},forceX:function(){return ge},forceY:function(){return _e}});var n=t.prototype=i.prototype;function o(me){return me.x+me.vx}function a(me){return me.y+me.vy}function u(me){var ve,Oe,Me=1,Te=1;function se(){for(var Ee,ke,be,Ie,Fe,ce,we,ye=ve.length,Ce=0;Ce<Te;++Ce)for(ke=t(ve,o,a).visitAfter(oe),Ee=0;Ee<ye;++Ee)be=ve[Ee],ce=Oe[be.index],we=ce*ce,Ie=be.x+be.vx,Fe=be.y+be.vy,ke.visit(Re);function Re(ze,He,Ge,Je,ot){var Qe=ze.data,vt=ze.r,xt=ce+vt;if(!Qe)return He>Ie+xt||Je<Ie-xt||Ge>Fe+xt||ot<Fe-xt;if(Qe.index>be.index){var mt=Ie-Qe.x-Qe.vx,rt=Fe-Qe.y-Qe.vy,it=mt*mt+rt*rt;it<xt*xt&&(mt===0&&(it+=(mt=l())*mt),rt===0&&(it+=(rt=l())*rt),it=(xt-(it=Math.sqrt(it)))/it*Me,be.vx+=(mt*=it)*(xt=(vt*=vt)/(we+vt)),be.vy+=(rt*=it)*xt,Qe.vx-=mt*(xt=1-xt),Qe.vy-=rt*xt)}}}function oe(Ee){if(Ee.data)return Ee.r=Oe[Ee.data.index];for(var ke=Ee.r=0;ke<4;++ke)Ee[ke]&&Ee[ke].r>Ee.r&&(Ee.r=Ee[ke].r)}function he(){if(ve){var Ee,ke,be=ve.length;for(Oe=new Array(be),Ee=0;Ee<be;++Ee)ke=ve[Ee],Oe[ke.index]=+me(ke,Ee,ve)}}return typeof me!="function"&&(me=k(me==null?1:+me)),se.initialize=function(Ee){ve=Ee,he()},se.iterations=function(Ee){return arguments.length?(Te=+Ee,se):Te},se.strength=function(Ee){return arguments.length?(Me=+Ee,se):Me},se.radius=function(Ee){return arguments.length?(me=typeof Ee=="function"?Ee:k(+Ee),he(),se):me},se}n.copy=function(){var me,ve,Oe=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Me=this._root;if(!Me)return Oe;if(!Me.length)return Oe._root=r(Me),Oe;for(me=[{source:Me,target:Oe._root=new Array(4)}];Me=me.pop();)for(var Te=0;Te<4;++Te)(ve=Me.source[Te])&&(ve.length?me.push({source:ve,target:Me.target[Te]=new Array(4)}):Me.target[Te]=r(ve));return Oe},n.add=function(me){var ve=+this._x.call(null,me),Oe=+this._y.call(null,me);return T(this.cover(ve,Oe),ve,Oe,me)},n.addAll=function(me){var ve,Oe,Me,Te,se=me.length,oe=new Array(se),he=new Array(se),Ee=1/0,ke=1/0,be=-1/0,Ie=-1/0;for(Oe=0;Oe<se;++Oe)isNaN(Me=+this._x.call(null,ve=me[Oe]))||isNaN(Te=+this._y.call(null,ve))||(oe[Oe]=Me,he[Oe]=Te,Me<Ee&&(Ee=Me),Me>be&&(be=Me),Te<ke&&(ke=Te),Te>Ie&&(Ie=Te));if(Ee>be||ke>Ie)return this;for(this.cover(Ee,ke).cover(be,Ie),Oe=0;Oe<se;++Oe)T(this,oe[Oe],he[Oe],me[Oe]);return this},n.cover=function(me,ve){if(isNaN(me=+me)||isNaN(ve=+ve))return this;var Oe=this._x0,Me=this._y0,Te=this._x1,se=this._y1;if(isNaN(Oe))Te=(Oe=Math.floor(me))+1,se=(Me=Math.floor(ve))+1;else{for(var oe,he,Ee=Te-Oe,ke=this._root;Oe>me||me>=Te||Me>ve||ve>=se;)switch(he=(ve<Me)<<1|me<Oe,(oe=new Array(4))[he]=ke,ke=oe,Ee*=2,he){case 0:Te=Oe+Ee,se=Me+Ee;break;case 1:Oe=Te-Ee,se=Me+Ee;break;case 2:Te=Oe+Ee,Me=se-Ee;break;case 3:Oe=Te-Ee,Me=se-Ee}this._root&&this._root.length&&(this._root=ke)}return this._x0=Oe,this._y0=Me,this._x1=Te,this._y1=se,this},n.data=function(){var me=[];return this.visit(function(ve){if(!ve.length)do me.push(ve.data);while(ve=ve.next)}),me},n.extent=function(me){return arguments.length?this.cover(+me[0][0],+me[0][1]).cover(+me[1][0],+me[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(me,ve,Oe){var Me,Te,se,oe,he,Ee,ke,be=this._x0,Ie=this._y0,Fe=this._x1,ce=this._y1,we=[],ye=this._root;for(ye&&we.push(new b(ye,be,Ie,Fe,ce)),Oe==null?Oe=1/0:(be=me-Oe,Ie=ve-Oe,Fe=me+Oe,ce=ve+Oe,Oe*=Oe);Ee=we.pop();)if(!(!(ye=Ee.node)||(Te=Ee.x0)>Fe||(se=Ee.y0)>ce||(oe=Ee.x1)<be||(he=Ee.y1)<Ie))if(ye.length){var Ce=(Te+oe)/2,Re=(se+he)/2;we.push(new b(ye[3],Ce,Re,oe,he),new b(ye[2],Te,Re,Ce,he),new b(ye[1],Ce,se,oe,Re),new b(ye[0],Te,se,Ce,Re)),(ke=(ve>=Re)<<1|me>=Ce)&&(Ee=we[we.length-1],we[we.length-1]=we[we.length-1-ke],we[we.length-1-ke]=Ee)}else{var ze=me-+this._x.call(null,ye.data),He=ve-+this._y.call(null,ye.data),Ge=ze*ze+He*He;if(Ge<Oe){var Je=Math.sqrt(Oe=Ge);be=me-Je,Ie=ve-Je,Fe=me+Je,ce=ve+Je,Me=ye.data}}return Me},n.remove=function(me){if(isNaN(se=+this._x.call(null,me))||isNaN(oe=+this._y.call(null,me)))return this;var ve,Oe,Me,Te,se,oe,he,Ee,ke,be,Ie,Fe,ce=this._root,we=this._x0,ye=this._y0,Ce=this._x1,Re=this._y1;if(!ce)return this;if(ce.length)for(;;){if((ke=se>=(he=(we+Ce)/2))?we=he:Ce=he,(be=oe>=(Ee=(ye+Re)/2))?ye=Ee:Re=Ee,ve=ce,!(ce=ce[Ie=be<<1|ke]))return this;if(!ce.length)break;(ve[Ie+1&3]||ve[Ie+2&3]||ve[Ie+3&3])&&(Oe=ve,Fe=Ie)}for(;ce.data!==me;)if(Me=ce,!(ce=ce.next))return this;return(Te=ce.next)&&delete ce.next,Me?(Te?Me.next=Te:delete Me.next,this):ve?(Te?ve[Ie]=Te:delete ve[Ie],(ce=ve[0]||ve[1]||ve[2]||ve[3])&&ce===(ve[3]||ve[2]||ve[1]||ve[0])&&!ce.length&&(Oe?Oe[Fe]=ce:this._root=ce),this):(this._root=Te,this)},n.removeAll=function(me){for(var ve=0,Oe=me.length;ve<Oe;++ve)this.remove(me[ve]);return this},n.root=function(){return this._root},n.size=function(){var me=0;return this.visit(function(ve){if(!ve.length)do++me;while(ve=ve.next)}),me},n.visit=function(me){var ve,Oe,Me,Te,se,oe,he=[],Ee=this._root;for(Ee&&he.push(new b(Ee,this._x0,this._y0,this._x1,this._y1));ve=he.pop();)if(!me(Ee=ve.node,Me=ve.x0,Te=ve.y0,se=ve.x1,oe=ve.y1)&&Ee.length){var ke=(Me+se)/2,be=(Te+oe)/2;(Oe=Ee[3])&&he.push(new b(Oe,ke,be,se,oe)),(Oe=Ee[2])&&he.push(new b(Oe,Me,be,ke,oe)),(Oe=Ee[1])&&he.push(new b(Oe,ke,Te,se,be)),(Oe=Ee[0])&&he.push(new b(Oe,Me,Te,ke,be))}return this},n.visitAfter=function(me){var ve,Oe=[],Me=[];for(this._root&&Oe.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));ve=Oe.pop();){var Te=ve.node;if(Te.length){var se,oe=ve.x0,he=ve.y0,Ee=ve.x1,ke=ve.y1,be=(oe+Ee)/2,Ie=(he+ke)/2;(se=Te[0])&&Oe.push(new b(se,oe,he,be,Ie)),(se=Te[1])&&Oe.push(new b(se,be,he,Ee,Ie)),(se=Te[2])&&Oe.push(new b(se,oe,Ie,be,ke)),(se=Te[3])&&Oe.push(new b(se,be,Ie,Ee,ke))}Me.push(ve)}for(;ve=Me.pop();)me(ve.node,ve.x0,ve.y0,ve.x1,ve.y1);return this},n.x=function(me){return arguments.length?(this._x=me,this):this._x},n.y=function(me){return arguments.length?(this._y=me,this):this._y};var p=e(15140);function c(me){return me.index}function x(me,ve){var Oe=me.get(ve);if(!Oe)throw new Error("missing: "+ve);return Oe}function g(me){var ve,Oe,Me,Te,se,oe=c,he=function(we){return 1/Math.min(Te[we.source.index],Te[we.target.index])},Ee=k(30),ke=1;function be(we){for(var ye=0,Ce=me.length;ye<ke;++ye)for(var Re,ze,He,Ge,Je,ot,Qe,vt=0;vt<Ce;++vt)ze=(Re=me[vt]).source,Ge=(He=Re.target).x+He.vx-ze.x-ze.vx||l(),Je=He.y+He.vy-ze.y-ze.vy||l(),Ge*=ot=((ot=Math.sqrt(Ge*Ge+Je*Je))-Oe[vt])/ot*we*ve[vt],Je*=ot,He.vx-=Ge*(Qe=se[vt]),He.vy-=Je*Qe,ze.vx+=Ge*(Qe=1-Qe),ze.vy+=Je*Qe}function Ie(){if(Me){var we,ye,Ce=Me.length,Re=me.length,ze=(0,p.UI)(Me,oe);for(we=0,Te=new Array(Ce);we<Re;++we)(ye=me[we]).index=we,typeof ye.source!="object"&&(ye.source=x(ze,ye.source)),typeof ye.target!="object"&&(ye.target=x(ze,ye.target)),Te[ye.source.index]=(Te[ye.source.index]||0)+1,Te[ye.target.index]=(Te[ye.target.index]||0)+1;for(we=0,se=new Array(Re);we<Re;++we)ye=me[we],se[we]=Te[ye.source.index]/(Te[ye.source.index]+Te[ye.target.index]);ve=new Array(Re),Fe(),Oe=new Array(Re),ce()}}function Fe(){if(Me)for(var we=0,ye=me.length;we<ye;++we)ve[we]=+he(me[we],we,me)}function ce(){if(Me)for(var we=0,ye=me.length;we<ye;++we)Oe[we]=+Ee(me[we],we,me)}return me==null&&(me=[]),be.initialize=function(we){Me=we,Ie()},be.links=function(we){return arguments.length?(me=we,Ie(),be):me},be.id=function(we){return arguments.length?(oe=we,be):oe},be.iterations=function(we){return arguments.length?(ke=+we,be):ke},be.strength=function(we){return arguments.length?(he=typeof we=="function"?we:k(+we),Fe(),be):he},be.distance=function(we){return arguments.length?(Ee=typeof we=="function"?we:k(+we),ce(),be):Ee},be}var h={value:function(){}};function y(){for(var me,ve=0,Oe=arguments.length,Me={};ve<Oe;++ve){if(!(me=arguments[ve]+"")||me in Me||/[\s.]/.test(me))throw new Error("illegal type: "+me);Me[me]=[]}return new v(Me)}function v(me){this._=me}function m(me,ve){for(var Oe,Me=0,Te=me.length;Me<Te;++Me)if((Oe=me[Me]).name===ve)return Oe.value}function _(me,ve,Oe){for(var Me=0,Te=me.length;Me<Te;++Me)if(me[Me].name===ve){me[Me]=h,me=me.slice(0,Me).concat(me.slice(Me+1));break}return Oe!=null&&me.push({name:ve,value:Oe}),me}v.prototype=y.prototype={constructor:v,on:function(me,ve){var Oe,Me,Te=this._,se=(Me=Te,(me+"").trim().split(/^|\s+/).map(function(Ee){var ke="",be=Ee.indexOf(".");if(be>=0&&(ke=Ee.slice(be+1),Ee=Ee.slice(0,be)),Ee&&!Me.hasOwnProperty(Ee))throw new Error("unknown type: "+Ee);return{type:Ee,name:ke}})),oe=-1,he=se.length;if(!(arguments.length<2)){if(ve!=null&&typeof ve!="function")throw new Error("invalid callback: "+ve);for(;++oe<he;)if(Oe=(me=se[oe]).type)Te[Oe]=_(Te[Oe],me.name,ve);else if(ve==null)for(Oe in Te)Te[Oe]=_(Te[Oe],me.name,null);return this}for(;++oe<he;)if((Oe=(me=se[oe]).type)&&(Oe=m(Te[Oe],me.name)))return Oe},copy:function(){var me={},ve=this._;for(var Oe in ve)me[Oe]=ve[Oe].slice();return new v(me)},call:function(me,ve){if((Oe=arguments.length-2)>0)for(var Oe,Me,Te=new Array(Oe),se=0;se<Oe;++se)Te[se]=arguments[se+2];if(!this._.hasOwnProperty(me))throw new Error("unknown type: "+me);for(se=0,Oe=(Me=this._[me]).length;se<Oe;++se)Me[se].value.apply(ve,Te)},apply:function(me,ve,Oe){if(!this._.hasOwnProperty(me))throw new Error("unknown type: "+me);for(var Me=this._[me],Te=0,se=Me.length;Te<se;++Te)Me[Te].value.apply(ve,Oe)}};var f,S,w=y,E=0,L=0,C=0,P=1e3,z=0,G=0,O=0,H=typeof performance=="object"&&performance.now?performance:Date,N=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(me){setTimeout(me,17)};function B(){return G||(N(V),G=H.now()+O)}function V(){G=0}function q(){this._call=this._time=this._next=null}function te(me,ve,Oe){var Me=new q;return Me.restart(me,ve,Oe),Me}function K(){G=(z=H.now())+O,E=L=0;try{(function(){B(),++E;for(var me,ve=f;ve;)(me=G-ve._time)>=0&&ve._call.call(null,me),ve=ve._next;--E})()}finally{E=0,function(){for(var me,ve,Oe=f,Me=1/0;Oe;)Oe._call?(Me>Oe._time&&(Me=Oe._time),me=Oe,Oe=Oe._next):(ve=Oe._next,Oe._next=null,Oe=me?me._next=ve:f=ve);S=me,Y(Me)}(),G=0}}function J(){var me=H.now(),ve=me-z;ve>P&&(O-=ve,z=me)}function Y(me){E||(L&&(L=clearTimeout(L)),me-G>24?(me<1/0&&(L=setTimeout(K,me-H.now()-O)),C&&(C=clearInterval(C))):(C||(z=H.now(),C=setInterval(J,P)),E=1,N(K)))}function W(me){return me.x}function Q(me){return me.y}q.prototype=te.prototype={constructor:q,restart:function(me,ve,Oe){if(typeof me!="function")throw new TypeError("callback is not a function");Oe=(Oe==null?B():+Oe)+(ve==null?0:+ve),this._next||S===this||(S?S._next=this:f=this,S=this),this._call=me,this._time=Oe,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}};var ne=10,re=Math.PI*(3-Math.sqrt(5));function ae(me){var ve,Oe=1,Me=.001,Te=1-Math.pow(Me,1/300),se=0,oe=.6,he=(0,p.UI)(),Ee=te(be),ke=w("tick","end");function be(){Ie(),ke.call("tick",ve),Oe<Me&&(Ee.stop(),ke.call("end",ve))}function Ie(we){var ye,Ce,Re=me.length;we===void 0&&(we=1);for(var ze=0;ze<we;++ze)for(Oe+=(se-Oe)*Te,he.each(function(He){He(Oe)}),ye=0;ye<Re;++ye)(Ce=me[ye]).fx==null?Ce.x+=Ce.vx*=oe:(Ce.x=Ce.fx,Ce.vx=0),Ce.fy==null?Ce.y+=Ce.vy*=oe:(Ce.y=Ce.fy,Ce.vy=0);return ve}function Fe(){for(var we,ye=0,Ce=me.length;ye<Ce;++ye){if((we=me[ye]).index=ye,we.fx!=null&&(we.x=we.fx),we.fy!=null&&(we.y=we.fy),isNaN(we.x)||isNaN(we.y)){var Re=ne*Math.sqrt(ye),ze=ye*re;we.x=Re*Math.cos(ze),we.y=Re*Math.sin(ze)}(isNaN(we.vx)||isNaN(we.vy))&&(we.vx=we.vy=0)}}function ce(we){return we.initialize&&we.initialize(me),we}return me==null&&(me=[]),Fe(),ve={tick:Ie,restart:function(){return Ee.restart(be),ve},stop:function(){return Ee.stop(),ve},nodes:function(we){return arguments.length?(me=we,Fe(),he.each(ce),ve):me},alpha:function(we){return arguments.length?(Oe=+we,ve):Oe},alphaMin:function(we){return arguments.length?(Me=+we,ve):Me},alphaDecay:function(we){return arguments.length?(Te=+we,ve):+Te},alphaTarget:function(we){return arguments.length?(se=+we,ve):se},velocityDecay:function(we){return arguments.length?(oe=1-we,ve):1-oe},force:function(we,ye){return arguments.length>1?(ye==null?he.remove(we):he.set(we,ce(ye)),ve):he.get(we)},find:function(we,ye,Ce){var Re,ze,He,Ge,Je,ot=0,Qe=me.length;for(Ce==null?Ce=1/0:Ce*=Ce,ot=0;ot<Qe;++ot)(He=(Re=we-(Ge=me[ot]).x)*Re+(ze=ye-Ge.y)*ze)<Ce&&(Je=Ge,Ce=He);return Je},on:function(we,ye){return arguments.length>1?(ke.on(we,ye),ve):ke.on(we)}}}function ue(){var me,ve,Oe,Me,Te=k(-30),se=1,oe=1/0,he=.81;function Ee(Fe){var ce,we=me.length,ye=t(me,W,Q).visitAfter(be);for(Oe=Fe,ce=0;ce<we;++ce)ve=me[ce],ye.visit(Ie)}function ke(){if(me){var Fe,ce,we=me.length;for(Me=new Array(we),Fe=0;Fe<we;++Fe)ce=me[Fe],Me[ce.index]=+Te(ce,Fe,me)}}function be(Fe){var ce,we,ye,Ce,Re,ze=0,He=0;if(Fe.length){for(ye=Ce=Re=0;Re<4;++Re)(ce=Fe[Re])&&(we=Math.abs(ce.value))&&(ze+=ce.value,He+=we,ye+=we*ce.x,Ce+=we*ce.y);Fe.x=ye/He,Fe.y=Ce/He}else{(ce=Fe).x=ce.data.x,ce.y=ce.data.y;do ze+=Me[ce.data.index];while(ce=ce.next)}Fe.value=ze}function Ie(Fe,ce,we,ye){if(!Fe.value)return!0;var Ce=Fe.x-ve.x,Re=Fe.y-ve.y,ze=ye-ce,He=Ce*Ce+Re*Re;if(ze*ze/he<He)return He<oe&&(Ce===0&&(He+=(Ce=l())*Ce),Re===0&&(He+=(Re=l())*Re),He<se&&(He=Math.sqrt(se*He)),ve.vx+=Ce*Fe.value*Oe/He,ve.vy+=Re*Fe.value*Oe/He),!0;if(!(Fe.length||He>=oe)){(Fe.data!==ve||Fe.next)&&(Ce===0&&(He+=(Ce=l())*Ce),Re===0&&(He+=(Re=l())*Re),He<se&&(He=Math.sqrt(se*He)));do Fe.data!==ve&&(ze=Me[Fe.data.index]*Oe/He,ve.vx+=Ce*ze,ve.vy+=Re*ze);while(Fe=Fe.next)}}return Ee.initialize=function(Fe){me=Fe,ke()},Ee.strength=function(Fe){return arguments.length?(Te=typeof Fe=="function"?Fe:k(+Fe),ke(),Ee):Te},Ee.distanceMin=function(Fe){return arguments.length?(se=Fe*Fe,Ee):Math.sqrt(se)},Ee.distanceMax=function(Fe){return arguments.length?(oe=Fe*Fe,Ee):Math.sqrt(oe)},Ee.theta=function(Fe){return arguments.length?(he=Fe*Fe,Ee):Math.sqrt(he)},Ee}function pe(me,ve,Oe){var Me,Te,se,oe=k(.1);function he(ke){for(var be=0,Ie=Me.length;be<Ie;++be){var Fe=Me[be],ce=Fe.x-ve||1e-6,we=Fe.y-Oe||1e-6,ye=Math.sqrt(ce*ce+we*we),Ce=(se[be]-ye)*Te[be]*ke/ye;Fe.vx+=ce*Ce,Fe.vy+=we*Ce}}function Ee(){if(Me){var ke,be=Me.length;for(Te=new Array(be),se=new Array(be),ke=0;ke<be;++ke)se[ke]=+me(Me[ke],ke,Me),Te[ke]=isNaN(se[ke])?0:+oe(Me[ke],ke,Me)}}return typeof me!="function"&&(me=k(+me)),ve==null&&(ve=0),Oe==null&&(Oe=0),he.initialize=function(ke){Me=ke,Ee()},he.strength=function(ke){return arguments.length?(oe=typeof ke=="function"?ke:k(+ke),Ee(),he):oe},he.radius=function(ke){return arguments.length?(me=typeof ke=="function"?ke:k(+ke),Ee(),he):me},he.x=function(ke){return arguments.length?(ve=+ke,he):ve},he.y=function(ke){return arguments.length?(Oe=+ke,he):Oe},he}function ge(me){var ve,Oe,Me,Te=k(.1);function se(he){for(var Ee,ke=0,be=ve.length;ke<be;++ke)(Ee=ve[ke]).vx+=(Me[ke]-Ee.x)*Oe[ke]*he}function oe(){if(ve){var he,Ee=ve.length;for(Oe=new Array(Ee),Me=new Array(Ee),he=0;he<Ee;++he)Oe[he]=isNaN(Me[he]=+me(ve[he],he,ve))?0:+Te(ve[he],he,ve)}}return typeof me!="function"&&(me=k(me==null?0:+me)),se.initialize=function(he){ve=he,oe()},se.strength=function(he){return arguments.length?(Te=typeof he=="function"?he:k(+he),oe(),se):Te},se.x=function(he){return arguments.length?(me=typeof he=="function"?he:k(+he),oe(),se):me},se}function _e(me){var ve,Oe,Me,Te=k(.1);function se(he){for(var Ee,ke=0,be=ve.length;ke<be;++ke)(Ee=ve[ke]).vy+=(Me[ke]-Ee.y)*Oe[ke]*he}function oe(){if(ve){var he,Ee=ve.length;for(Oe=new Array(Ee),Me=new Array(Ee),he=0;he<Ee;++he)Oe[he]=isNaN(Me[he]=+me(ve[he],he,ve))?0:+Te(ve[he],he,ve)}}return typeof me!="function"&&(me=k(me==null?0:+me)),se.initialize=function(he){ve=he,oe()},se.strength=function(he){return arguments.length?(Te=typeof he=="function"?he:k(+he),oe(),se):Te},se.y=function(he){return arguments.length?(me=typeof he=="function"?he:k(+he),oe(),se):me},se}},60721:function(ee,D,e){function M(u,p){if((c=(u=p?u.toExponential(p-1):u.toExponential()).indexOf("e"))<0)return null;var c,x=u.slice(0,c);return[x.length>1?x[0]+x.slice(2):x,+u.slice(c+1)]}e.d(D,{WU:function(){return r},FF:function(){return a}});var k,l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(u){if(!(p=l.exec(u)))throw new Error("invalid format: "+u);var p;return new b({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function b(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function d(u,p){var c=M(u,p);if(!c)return u+"";var x=c[0],g=c[1];return g<0?"0."+new Array(-g).join("0")+x:x.length>g+1?x.slice(0,g+1)+"."+x.slice(g+1):x+new Array(g-x.length+2).join("0")}T.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(u,p){return(100*u).toFixed(p)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,p){return u.toExponential(p)},f:function(u,p){return u.toFixed(p)},g:function(u,p){return u.toPrecision(p)},o:function(u){return Math.round(u).toString(8)},p:function(u,p){return d(100*u,p)},r:d,s:function(u,p){var c=M(u,p);if(!c)return u+"";var x=c[0],g=c[1],h=g-(k=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,y=x.length;return h===y?x:h>y?x+new Array(h-y+1).join("0"):h>0?x.slice(0,h)+"."+x.slice(h):"0."+new Array(1-h).join("0")+M(u,Math.max(0,p+h-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var i,r,n=Array.prototype.map,o=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function a(u){var p,c,x=u.grouping===void 0||u.thousands===void 0?t:(p=n.call(u.grouping,Number),c=u.thousands+"",function(w,E){for(var L=w.length,C=[],P=0,z=p[0],G=0;L>0&&z>0&&(G+z+1>E&&(z=Math.max(1,E-G)),C.push(w.substring(L-=z,L+z)),!((G+=z+1)>E));)z=p[P=(P+1)%p.length];return C.reverse().join(c)}),g=u.currency===void 0?"":u.currency[0]+"",h=u.currency===void 0?"":u.currency[1]+"",y=u.decimal===void 0?".":u.decimal+"",v=u.numerals===void 0?t:function(w){return function(E){return E.replace(/[0-9]/g,function(L){return w[+L]})}}(n.call(u.numerals,String)),m=u.percent===void 0?"%":u.percent+"",_=u.minus===void 0?"-":u.minus+"",f=u.nan===void 0?"NaN":u.nan+"";function S(w){var E=(w=T(w)).fill,L=w.align,C=w.sign,P=w.symbol,z=w.zero,G=w.width,O=w.comma,H=w.precision,N=w.trim,B=w.type;B==="n"?(O=!0,B="g"):s[B]||(H===void 0&&(H=12),N=!0,B="g"),(z||E==="0"&&L==="=")&&(z=!0,E="0",L="=");var V=P==="$"?g:P==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",q=P==="$"?h:/[%p]/.test(B)?m:"",te=s[B],K=/[defgprs%]/.test(B);function J(Y){var W,Q,ne,re=V,ae=q;if(B==="c")ae=te(Y)+ae,Y="";else{var ue=(Y=+Y)<0||1/Y<0;if(Y=isNaN(Y)?f:te(Math.abs(Y),H),N&&(Y=function(_e){e:for(var me,ve=_e.length,Oe=1,Me=-1;Oe<ve;++Oe)switch(_e[Oe]){case".":Me=me=Oe;break;case"0":Me===0&&(Me=Oe),me=Oe;break;default:if(!+_e[Oe])break e;Me>0&&(Me=0)}return Me>0?_e.slice(0,Me)+_e.slice(me+1):_e}(Y)),ue&&+Y==0&&C!=="+"&&(ue=!1),re=(ue?C==="("?C:_:C==="-"||C==="("?"":C)+re,ae=(B==="s"?o[8+k/3]:"")+ae+(ue&&C==="("?")":""),K){for(W=-1,Q=Y.length;++W<Q;)if(48>(ne=Y.charCodeAt(W))||ne>57){ae=(ne===46?y+Y.slice(W+1):Y.slice(W))+ae,Y=Y.slice(0,W);break}}}O&&!z&&(Y=x(Y,1/0));var pe=re.length+Y.length+ae.length,ge=pe<G?new Array(G-pe+1).join(E):"";switch(O&&z&&(Y=x(ge+Y,ge.length?G-ae.length:1/0),ge=""),L){case"<":Y=re+Y+ae+ge;break;case"=":Y=re+ge+Y+ae;break;case"^":Y=ge.slice(0,pe=ge.length>>1)+re+Y+ae+ge.slice(pe);break;default:Y=ge+re+Y+ae}return v(Y)}return H=H===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H)),J.toString=function(){return w+""},J}return{format:S,formatPrefix:function(w,E){var L,C=S(((w=T(w)).type="f",w)),P=3*Math.max(-8,Math.min(8,Math.floor((L=E,((L=M(Math.abs(L)))?L[1]:NaN)/3)))),z=Math.pow(10,-P),G=o[8+P/3];return function(O){return C(z*O)+G}}}}i=a({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=i.format,i.formatPrefix},65704:function(ee,D,e){e.r(D),e.d(D,{geoAiry:function(){return O},geoAiryRaw:function(){return G},geoAitoff:function(){return N},geoAitoffRaw:function(){return H},geoArmadillo:function(){return V},geoArmadilloRaw:function(){return B},geoAugust:function(){return te},geoAugustRaw:function(){return q},geoBaker:function(){return W},geoBakerRaw:function(){return Y},geoBerghaus:function(){return re},geoBerghausRaw:function(){return ne},geoBertin1953:function(){return Oe},geoBertin1953Raw:function(){return ve},geoBoggs:function(){return be},geoBoggsRaw:function(){return ke},geoBonne:function(){return ye},geoBonneRaw:function(){return we},geoBottomley:function(){return Re},geoBottomleyRaw:function(){return Ce},geoBromley:function(){return He},geoBromleyRaw:function(){return ze},geoChamberlin:function(){return it},geoChamberlinAfrica:function(){return rt},geoChamberlinRaw:function(){return xt},geoCollignon:function(){return Mt},geoCollignonRaw:function(){return Tt},geoCraig:function(){return kt},geoCraigRaw:function(){return Pt},geoCraster:function(){return Ve},geoCrasterRaw:function(){return Xe},geoCylindricalEqualArea:function(){return at},geoCylindricalEqualAreaRaw:function(){return We},geoCylindricalStereographic:function(){return De},geoCylindricalStereographicRaw:function(){return et},geoEckert1:function(){return nt},geoEckert1Raw:function(){return Be},geoEckert2:function(){return dt},geoEckert2Raw:function(){return tt},geoEckert3:function(){return gt},geoEckert3Raw:function(){return ht},geoEckert4:function(){return wt},geoEckert4Raw:function(){return ut},geoEckert5:function(){return ft},geoEckert5Raw:function(){return ct},geoEckert6:function(){return It},geoEckert6Raw:function(){return bt},geoEisenlohr:function(){return Qt},geoEisenlohrRaw:function(){return Nt},geoFahey:function(){return Xt},geoFaheyRaw:function(){return Ut},geoFoucaut:function(){return Mn},geoFoucautRaw:function(){return gn},geoFoucautSinusoidal:function(){return qt},geoFoucautSinusoidalRaw:function(){return cn},geoGilbert:function(){return bn},geoGingery:function(){return Cn},geoGingeryRaw:function(){return yn},geoGinzburg4:function(){return nr},geoGinzburg4Raw:function(){return Qn},geoGinzburg5:function(){return Gn},geoGinzburg5Raw:function(){return Jn},geoGinzburg6:function(){return Rt},geoGinzburg6Raw:function(){return lr},geoGinzburg8:function(){return an},geoGinzburg8Raw:function(){return $t},geoGinzburg9:function(){return wn},geoGinzburg9Raw:function(){return fn},geoGringorten:function(){return In},geoGringortenQuincuncial:function(){return Sa},geoGringortenRaw:function(){return Ln},geoGuyou:function(){return At},geoGuyouRaw:function(){return _n},geoHammer:function(){return ge},geoHammerRaw:function(){return ue},geoHammerRetroazimuthal:function(){return xn},geoHammerRetroazimuthalRaw:function(){return Jt},geoHealpix:function(){return Un},geoHealpixRaw:function(){return on},geoHill:function(){return Kn},geoHillRaw:function(){return Fn},geoHomolosine:function(){return cr},geoHomolosineRaw:function(){return ur},geoHufnagel:function(){return Yn},geoHufnagelRaw:function(){return br},geoHyperelliptical:function(){return ai},geoHyperellipticalRaw:function(){return Gr},geoInterrupt:function(){return Kr},geoInterruptedBoggs:function(){return qa},geoInterruptedHomolosine:function(){return to},geoInterruptedMollweide:function(){return Fo},geoInterruptedMollweideHemispheres:function(){return qs},geoInterruptedQuarticAuthalic:function(){return vs},geoInterruptedSinuMollweide:function(){return rl},geoInterruptedSinusoidal:function(){return No},geoKavrayskiy7:function(){return Si},geoKavrayskiy7Raw:function(){return Za},geoLagrange:function(){return Vr},geoLagrangeRaw:function(){return ds},geoLarrivee:function(){return no},geoLarriveeRaw:function(){return ba},geoLaskowski:function(){return yo},geoLaskowskiRaw:function(){return Ia},geoLittrow:function(){return io},geoLittrowRaw:function(){return ro},geoLoximuthal:function(){return il},geoLoximuthalRaw:function(){return Ps},geoMiller:function(){return al},geoMillerRaw:function(){return xo},geoModifiedStereographic:function(){return Aa},geoModifiedStereographicAlaska:function(){return jo},geoModifiedStereographicGs48:function(){return ns},geoModifiedStereographicGs50:function(){return Os},geoModifiedStereographicLee:function(){return Ws},geoModifiedStereographicMiller:function(){return Ys},geoModifiedStereographicRaw:function(){return Gs},geoMollweide:function(){return oe},geoMollweideRaw:function(){return se},geoMtFlatPolarParabolic:function(){return ll},geoMtFlatPolarParabolicRaw:function(){return ao},geoMtFlatPolarQuartic:function(){return $r},geoMtFlatPolarQuarticRaw:function(){return _o},geoMtFlatPolarSinusoidal:function(){return gs},geoMtFlatPolarSinusoidalRaw:function(){return Da},geoNaturalEarth:function(){return Ma.Z},geoNaturalEarth2:function(){return xl},geoNaturalEarth2Raw:function(){return Vo},geoNaturalEarthRaw:function(){return Ma.K},geoNellHammer:function(){return ul},geoNellHammerRaw:function(){return Is},geoNicolosi:function(){return ms},geoNicolosiRaw:function(){return rs},geoPatterson:function(){return Rs},geoPattersonRaw:function(){return ko},geoPeirceQuincuncial:function(){return Fs},geoPierceQuincuncial:function(){return Fs},geoPolyconic:function(){return Xs},geoPolyconicRaw:function(){return Ho},geoPolyhedral:function(){return Ao},geoPolyhedralButterfly:function(){return Js},geoPolyhedralCollignon:function(){return bs},geoPolyhedralWaterman:function(){return co},geoProject:function(){return Yo},geoQuantize:function(){return Ea},geoQuincuncial:function(){return _a},geoRectangularPolyconic:function(){return xr},geoRectangularPolyconicRaw:function(){return Ui},geoRobinson:function(){return Bs},geoRobinsonRaw:function(){return _s},geoSatellite:function(){return Xo},geoSatelliteRaw:function(){return Wo},geoSinuMollweide:function(){return tr},geoSinuMollweideRaw:function(){return er},geoSinusoidal:function(){return ce},geoSinusoidalRaw:function(){return Fe},geoStitch:function(){return Di},geoTimes:function(){return Ks},geoTimesRaw:function(){return Ja},geoTwoPointAzimuthal:function(){return Ka},geoTwoPointAzimuthalRaw:function(){return Xr},geoTwoPointAzimuthalUsa:function(){return Ta},geoTwoPointEquidistant:function(){return Co},geoTwoPointEquidistantRaw:function(){return Na},geoTwoPointEquidistantUsa:function(){return Ns},geoVanDerGrinten:function(){return Ei},geoVanDerGrinten2:function(){return Tr},geoVanDerGrinten2Raw:function(){return Yi},geoVanDerGrinten3:function(){return ls},geoVanDerGrinten3Raw:function(){return Ar},geoVanDerGrinten4:function(){return Po},geoVanDerGrinten4Raw:function(){return ia},geoVanDerGrintenRaw:function(){return Ko},geoWagner:function(){return us},geoWagner4:function(){return zi},geoWagner4Raw:function(){return Cr},geoWagner6:function(){return da},geoWagner6Raw:function(){return $a},geoWagner7:function(){return Xi},geoWagnerRaw:function(){return Wi},geoWiechel:function(){return cs},geoWiechelRaw:function(){return $o},geoWinkel3:function(){return po},geoWinkel3Raw:function(){return Qo}});var M=e(15002),k=Math.abs,l=Math.atan,T=Math.atan2,b=Math.cos,d=Math.exp,s=Math.floor,t=Math.log,i=Math.max,r=Math.min,n=Math.pow,o=Math.round,a=Math.sign||function(R){return R>0?1:R<0?-1:0},u=Math.sin,p=Math.tan,c=1e-6,x=1e-12,g=Math.PI,h=g/2,y=g/4,v=Math.SQRT1_2,m=C(2),_=C(g),f=2*g,S=180/g,w=g/180;function E(R){return R>1?h:R<-1?-h:Math.asin(R)}function L(R){return R>1?0:R<-1?g:Math.acos(R)}function C(R){return R>0?Math.sqrt(R):0}function P(R){return(d(R)-d(-R))/2}function z(R){return(d(R)+d(-R))/2}function G(R){var U=p(R/2),j=2*t(b(R/2))/(U*U);function X(fe,Ae){var F=b(fe),$=b(Ae),ie=u(Ae),de=$*F,xe=-((1-de?t((1+de)/2)/(1-de):-.5)+j/(1+de));return[xe*$*u(fe),xe*ie]}return X.invert=function(fe,Ae){var F,$=C(fe*fe+Ae*Ae),ie=-R/2,de=50;if(!$)return[0,0];do{var xe=ie/2,Le=b(xe),Ne=u(xe),Ue=Ne/Le,qe=-t(k(Le));ie-=F=(2/Ue*qe-j*Ue-$)/(-qe/(Ne*Ne)+1-j/(2*Le*Le))*(Le<0?.7:1)}while(k(F)>c&&--de>0);var Ye=u(ie);return[T(fe*Ye,$*b(ie)),E(Ae*Ye/$)]},X}function O(){var R=h,U=(0,M.r)(G),j=U(R);return j.radius=function(X){return arguments.length?U(R=X*w):R*S},j.scale(179.976).clipAngle(147)}function H(R,U){var j=b(U),X=function(fe){return fe?fe/Math.sin(fe):1}(L(j*b(R/=2)));return[2*j*u(R)*X,u(U)*X]}function N(){return(0,M.Z)(H).scale(152.63)}function B(R){var U=u(R),j=b(R),X=R>=0?1:-1,fe=p(X*R),Ae=(1+U-j)/2;function F($,ie){var de=b(ie),xe=b($/=2);return[(1+de)*u($),(X*ie>-T(xe,fe)-.001?0:10*-X)+Ae+u(ie)*j-(1+de)*U*xe]}return F.invert=function($,ie){var de=0,xe=0,Le=50;do{var Ne=b(de),Ue=u(de),qe=b(xe),Ye=u(xe),$e=1+qe,lt=$e*Ue-$,pt=Ae+Ye*j-$e*U*Ne-ie,Et=$e*Ne/2,Ct=-Ue*Ye,St=U*$e*Ue/2,Ft=j*qe+U*Ne*Ye,Lt=Ct*St-Ft*Et,tn=(pt*Ct-lt*Ft)/Lt/2,Zt=(lt*St-pt*Et)/Lt;k(Zt)>2&&(Zt/=2),de-=tn,xe-=Zt}while((k(tn)>c||k(Zt)>c)&&--Le>0);return X*xe>-T(b(de),fe)-.001?[2*de,xe]:null},F}function V(){var R=20*w,U=R>=0?1:-1,j=p(U*R),X=(0,M.r)(B),fe=X(R),Ae=fe.stream;return fe.parallel=function(F){return arguments.length?(j=p((U=(R=F*w)>=0?1:-1)*R),X(R)):R*S},fe.stream=function(F){var $=fe.rotate(),ie=Ae(F),de=(fe.rotate([0,0]),Ae(F)),xe=fe.precision();return fe.rotate($),ie.sphere=function(){de.polygonStart(),de.lineStart();for(var Le=-180*U;U*Le<180;Le+=90*U)de.point(Le,90*U);if(R)for(;U*(Le-=3*U*xe)>=-180;)de.point(Le,U*-T(b(Le*w/2),j)*S);de.lineEnd(),de.polygonEnd()},ie},fe.scale(218.695).center([0,28.0974])}function q(R,U){var j=p(U/2),X=C(1-j*j),fe=1+X*b(R/=2),Ae=u(R)*X/fe,F=j/fe,$=Ae*Ae,ie=F*F;return[1.3333333333333333*Ae*(3+$-3*ie),1.3333333333333333*F*(3+3*$-ie)]}function te(){return(0,M.Z)(q).scale(66.1603)}H.invert=function(R,U){if(!(R*R+4*U*U>g*g+c)){var j=R,X=U,fe=25;do{var Ae,F=u(j),$=u(j/2),ie=b(j/2),de=u(X),xe=b(X),Le=u(2*X),Ne=de*de,Ue=xe*xe,qe=$*$,Ye=1-Ue*ie*ie,$e=Ye?L(xe*ie)*C(Ae=1/Ye):Ae=0,lt=2*$e*xe*$-R,pt=$e*de-U,Et=Ae*(Ue*qe+$e*xe*ie*Ne),Ct=Ae*(.5*F*Le-2*$e*de*$),St=.25*Ae*(Le*$-$e*de*Ue*F),Ft=Ae*(Ne*ie+$e*qe*xe),Lt=Ct*St-Ft*Et;if(!Lt)break;var tn=(pt*Ct-lt*Ft)/Lt,Zt=(lt*St-pt*Et)/Lt;j-=tn,X-=Zt}while((k(tn)>c||k(Zt)>c)&&--fe>0);return[j,X]}},q.invert=function(R,U){if(U*=.375,!(R*=.375)&&k(U)>1)return null;var j=1+R*R+U*U,X=C((j-C(j*j-4*U*U))/2),fe=E(X)/3,Ae=X?function(de){return t(de+C(de*de-1))}(k(U/X))/3:function(de){return t(de+C(de*de+1))}(k(R))/3,F=b(fe),$=z(Ae),ie=$*$-F*F;return[2*a(R)*T(P(Ae)*F,.25-ie),2*a(U)*T($*u(fe),.25+ie)]};var K=C(8),J=t(1+m);function Y(R,U){var j=k(U);return j<y?[R,t(p(y+U/2))]:[R*b(j)*(2*m-1/u(j)),a(U)*(2*m*(j-y)-t(p(j/2)))]}function W(){return(0,M.Z)(Y).scale(112.314)}Y.invert=function(R,U){if((X=k(U))<J)return[R,2*l(d(U))-h];var j,X,fe=y,Ae=25;do{var F=b(fe/2),$=p(fe/2);fe-=j=(K*(fe-y)-t($)-X)/(K-F*F/(2*$))}while(k(j)>x&&--Ae>0);return[R/(b(fe)*(K-1/u(fe))),a(U)*fe]};var Q=e(17889);function ne(R){var U=2*g/R;function j(X,fe){var Ae=(0,Q.N)(X,fe);if(k(X)>h){var F=T(Ae[1],Ae[0]),$=C(Ae[0]*Ae[0]+Ae[1]*Ae[1]),ie=U*o((F-h)/U)+h,de=T(u(F-=ie),2-b(F));F=ie+E(g/$*u(de))-de,Ae[0]=$*b(F),Ae[1]=$*u(F)}return Ae}return j.invert=function(X,fe){var Ae=C(X*X+fe*fe);if(Ae>h){var F=T(fe,X),$=U*o((F-h)/U)+h,ie=F>$?-1:1,de=Ae*b($-F),xe=1/p(ie*L((de-g)/C(g*(g-2*de)+Ae*Ae)));F=$+2*l((xe+ie*C(xe*xe-3))/3),X=Ae*b(F),fe=Ae*u(F)}return Q.N.invert(X,fe)},j}function re(){var R=5,U=(0,M.r)(ne),j=U(R),X=j.stream,fe=.01,Ae=-b(fe*w),F=u(fe*w);return j.lobes=function($){return arguments.length?U(R=+$):R},j.stream=function($){var ie=j.rotate(),de=X($),xe=(j.rotate([0,0]),X($));return j.rotate(ie),de.sphere=function(){xe.polygonStart(),xe.lineStart();for(var Le=0,Ne=360/R,Ue=2*g/R,qe=90-180/R,Ye=h;Le<R;++Le,qe-=Ne,Ye-=Ue)xe.point(T(F*b(Ye),Ae)*S,E(F*u(Ye))*S),qe<-90?(xe.point(-90,-180-qe-fe),xe.point(-90,-180-qe+fe)):(xe.point(90,qe+fe),xe.point(90,qe-fe));xe.lineEnd(),xe.polygonEnd()},de},j.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ae=e(12956);function ue(R,U){if(arguments.length<2&&(U=R),U===1)return ae.l;if(U===1/0)return pe;function j(X,fe){var Ae=(0,ae.l)(X/U,fe);return Ae[0]*=R,Ae}return j.invert=function(X,fe){var Ae=ae.l.invert(X/R,fe);return Ae[0]*=U,Ae},j}function pe(R,U){return[R*b(U)/b(U/=2),2*u(U)]}function ge(){var R=2,U=(0,M.r)(ue),j=U(R);return j.coefficient=function(X){return arguments.length?U(R=+X):R},j.scale(169.529)}function _e(R,U,j){var X,fe,Ae,F=100;j=j===void 0?0:+j,U=+U;do(fe=R(j))===(Ae=R(j+c))&&(Ae=fe+c),j-=X=-1*c*(fe-U)/(fe-Ae);while(F-- >0&&k(X)>c);return F<0?NaN:j}function me(R,U,j){return U===void 0&&(U=40),j===void 0&&(j=x),function(X,fe,Ae,F){var $,ie,de;Ae=Ae===void 0?0:+Ae,F=F===void 0?0:+F;for(var xe=0;xe<U;xe++){var Le=R(Ae,F),Ne=Le[0]-X,Ue=Le[1]-fe;if(k(Ne)<j&&k(Ue)<j)break;var qe=Ne*Ne+Ue*Ue;if(qe>$)Ae-=ie/=2,F-=de/=2;else{$=qe;var Ye=(Ae>0?-1:1)*j,$e=(F>0?-1:1)*j,lt=R(Ae+Ye,F),pt=R(Ae,F+$e),Et=(lt[0]-Le[0])/Ye,Ct=(lt[1]-Le[1])/Ye,St=(pt[0]-Le[0])/$e,Ft=(pt[1]-Le[1])/$e,Lt=Ft*Et-Ct*St,tn=(k(Lt)<.5?.5:1)/Lt;if(Ae+=ie=(Ue*St-Ne*Ft)*tn,F+=de=(Ne*Ct-Ue*Et)*tn,k(ie)<j&&k(de)<j)break}}return[Ae,F]}}function ve(){var R=ue(1.68,2);function U(j,X){if(j+X<-1.4){var fe=(j-X+1.6)*(j+X+1.4)/8;j+=fe,X-=.8*fe*u(X+g/2)}var Ae=R(j,X),F=(1-b(j*X))/12;return Ae[1]<0&&(Ae[0]*=1+F),Ae[1]>0&&(Ae[1]*=1+F/1.5*Ae[0]*Ae[0]),Ae}return U.invert=me(U),U}function Oe(){return(0,M.Z)(ve()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Me(R,U){var j,X=R*u(U),fe=30;do U-=j=(U+u(U)-X)/(1+b(U));while(k(j)>c&&--fe>0);return U/2}function Te(R,U,j){function X(fe,Ae){return[R*fe*b(Ae=Me(j,Ae)),U*u(Ae)]}return X.invert=function(fe,Ae){return Ae=E(Ae/U),[fe/(R*b(Ae)),E((2*Ae+u(2*Ae))/j)]},X}pe.invert=function(R,U){var j=2*E(U/2);return[R*b(j/2)/b(j),j]};var se=Te(m/h,m,g);function oe(){return(0,M.Z)(se).scale(169.529)}var he=2.00276,Ee=1.11072;function ke(R,U){var j=Me(g,U);return[he*R/(1/b(U)+Ee/b(j)),(U+m*u(j))/he]}function be(){return(0,M.Z)(ke).scale(160.857)}function Ie(R){var U=0,j=(0,M.r)(R),X=j(U);return X.parallel=function(fe){return arguments.length?j(U=fe*w):U*S},X}function Fe(R,U){return[R*b(U),U]}function ce(){return(0,M.Z)(Fe).scale(152.63)}function we(R){if(!R)return Fe;var U=1/p(R);function j(X,fe){var Ae=U+R-fe,F=Ae&&X*b(fe)/Ae;return[Ae*u(F),U-Ae*b(F)]}return j.invert=function(X,fe){var Ae=C(X*X+(fe=U-fe)*fe),F=U+R-Ae;return[Ae/b(F)*T(X,fe),F]},j}function ye(){return Ie(we).scale(123.082).center([0,26.1441]).parallel(45)}function Ce(R){function U(j,X){var fe=h-X,Ae=fe&&j*R*u(fe)/fe;return[fe*u(Ae)/R,h-fe*b(Ae)]}return U.invert=function(j,X){var fe=j*R,Ae=h-X,F=C(fe*fe+Ae*Ae),$=T(fe,Ae);return[(F?F/u(F):1)*$/R,h-F]},U}function Re(){var R=.5,U=(0,M.r)(Ce),j=U(R);return j.fraction=function(X){return arguments.length?U(R=+X):R},j.scale(158.837)}ke.invert=function(R,U){var j,X,fe=he*U,Ae=U<0?-y:y,F=25;do X=fe-m*u(Ae),Ae-=j=(u(2*Ae)+2*Ae-g*u(X))/(2*b(2*Ae)+2+g*b(X)*m*b(Ae));while(k(j)>c&&--F>0);return X=fe-m*u(Ae),[R*(1/b(X)+Ee/b(Ae))/he,X]},Fe.invert=function(R,U){return[R/b(U),U]};var ze=Te(1,4/g,g);function He(){return(0,M.Z)(ze).scale(152.63)}var Ge=e(66624),Je=e(49386);function ot(R,U,j,X,fe,Ae){var F,$=b(Ae);if(k(R)>1||k(Ae)>1)F=L(j*fe+U*X*$);else{var ie=u(R/2),de=u(Ae/2);F=2*E(C(ie*ie+U*X*de*de))}return k(F)>c?[F,T(X*u(Ae),U*fe-j*X*$)]:[0,0]}function Qe(R,U,j){return L((R*R+U*U-j*j)/(2*R*U))}function vt(R){return R-2*g*s((R+g)/(2*g))}function xt(R,U,j){for(var X,fe=[[R[0],R[1],u(R[1]),b(R[1])],[U[0],U[1],u(U[1]),b(U[1])],[j[0],j[1],u(j[1]),b(j[1])]],Ae=fe[2],F=0;F<3;++F,Ae=X)X=fe[F],Ae.v=ot(X[1]-Ae[1],Ae[3],Ae[2],X[3],X[2],X[0]-Ae[0]),Ae.point=[0,0];var $=Qe(fe[0].v[0],fe[2].v[0],fe[1].v[0]),ie=Qe(fe[0].v[0],fe[1].v[0],fe[2].v[0]),de=g-$;fe[2].point[1]=0,fe[0].point[0]=-(fe[1].point[0]=fe[0].v[0]/2);var xe=[fe[2].point[0]=fe[0].point[0]+fe[2].v[0]*b($),2*(fe[0].point[1]=fe[1].point[1]=fe[2].v[0]*u($))];return function(Le,Ne){var Ue,qe=u(Ne),Ye=b(Ne),$e=new Array(3);for(Ue=0;Ue<3;++Ue){var lt=fe[Ue];if($e[Ue]=ot(Ne-lt[1],lt[3],lt[2],Ye,qe,Le-lt[0]),!$e[Ue][0])return lt.point;$e[Ue][1]=vt($e[Ue][1]-lt.v[1])}var pt=xe.slice();for(Ue=0;Ue<3;++Ue){var Et=Ue==2?0:Ue+1,Ct=Qe(fe[Ue].v[0],$e[Ue][0],$e[Et][0]);$e[Ue][1]<0&&(Ct=-Ct),Ue?Ue==1?(Ct=ie-Ct,pt[0]-=$e[Ue][0]*b(Ct),pt[1]-=$e[Ue][0]*u(Ct)):(Ct=de-Ct,pt[0]+=$e[Ue][0]*b(Ct),pt[1]+=$e[Ue][0]*u(Ct)):(pt[0]+=$e[Ue][0]*b(Ct),pt[1]-=$e[Ue][0]*u(Ct))}return pt[0]/=3,pt[1]/=3,pt}}function mt(R){return R[0]*=w,R[1]*=w,R}function rt(){return it([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function it(R,U,j){var X=(0,Ge.Z)({type:"MultiPoint",coordinates:[R,U,j]}),fe=[-X[0],-X[1]],Ae=(0,Je.Z)(fe),F=xt(mt(Ae(R)),mt(Ae(U)),mt(Ae(j)));F.invert=me(F);var $=(0,M.Z)(F).rotate(fe),ie=$.center;return delete $.rotate,$.center=function(de){return arguments.length?ie(Ae(de)):Ae.invert(ie())},$.clipAngle(90)}function Tt(R,U){var j=C(1-u(U));return[2/_*R*j,_*(1-j)]}function Mt(){return(0,M.Z)(Tt).scale(95.6464).center([0,30])}function Pt(R){var U=p(R);function j(X,fe){return[X,(X?X/u(X):1)*(u(fe)*b(X)-U*b(fe))]}return j.invert=U?function(X,fe){X&&(fe*=u(X)/X);var Ae=b(X);return[X,2*T(C(Ae*Ae+U*U-fe*fe)-Ae,U-fe)]}:function(X,fe){return[X,E(X?fe*p(X)/X:fe)]},j}function kt(){return Ie(Pt).scale(249.828).clipAngle(90)}Tt.invert=function(R,U){var j=(j=U/_-1)*j;return[j>0?R*C(g/j)/2:0,E(1-j)]};var Ze=C(3);function Xe(R,U){return[Ze*R*(2*b(2*U/3)-1)/_,Ze*_*u(U/3)]}function Ve(){return(0,M.Z)(Xe).scale(156.19)}function We(R){var U=b(R);function j(X,fe){return[X*U,u(fe)/U]}return j.invert=function(X,fe){return[X/U,E(fe*U)]},j}function at(){return Ie(We).parallel(38.58).scale(195.044)}function et(R){var U=b(R);function j(X,fe){return[X*U,(1+U)*p(fe/2)]}return j.invert=function(X,fe){return[X/U,2*l(fe/(1+U))]},j}function De(){return Ie(et).scale(124.75)}function Be(R,U){var j=C(8/(3*g));return[j*R*(1-k(U)/g),j*U]}function nt(){return(0,M.Z)(Be).scale(165.664)}function tt(R,U){var j=C(4-3*u(k(U)));return[2/C(6*g)*R*j,a(U)*C(2*g/3)*(2-j)]}function dt(){return(0,M.Z)(tt).scale(165.664)}function ht(R,U){var j=C(g*(4+g));return[2/j*R*(1+C(1-4*U*U/(g*g))),4/j*U]}function gt(){return(0,M.Z)(ht).scale(180.739)}function ut(R,U){var j=(2+h)*u(U);U/=2;for(var X=0,fe=1/0;X<10&&k(fe)>c;X++){var Ae=b(U);U-=fe=(U+u(U)*(Ae+2)-j)/(2*Ae*(1+Ae))}return[2/C(g*(4+g))*R*(1+b(U)),2*C(g/(4+g))*u(U)]}function wt(){return(0,M.Z)(ut).scale(180.739)}function ct(R,U){return[R*(1+b(U))/C(2+g),2*U/C(2+g)]}function ft(){return(0,M.Z)(ct).scale(173.044)}function bt(R,U){for(var j=(1+h)*u(U),X=0,fe=1/0;X<10&&k(fe)>c;X++)U-=fe=(U+u(U)-j)/(1+b(U));return j=C(2+g),[R*(1+b(U))/j,2*U/j]}function It(){return(0,M.Z)(bt).scale(173.044)}Xe.invert=function(R,U){var j=3*E(U/(Ze*_));return[_*R/(Ze*(2*b(2*j/3)-1)),j]},Be.invert=function(R,U){var j=C(8/(3*g)),X=U/j;return[R/(j*(1-k(X)/g)),X]},tt.invert=function(R,U){var j=2-k(U)/C(2*g/3);return[R*C(6*g)/(2*j),a(U)*E((4-j*j)/3)]},ht.invert=function(R,U){var j=C(g*(4+g))/2;return[R*j/(1+C(1-U*U*(4+g)/(4*g))),U*j/2]},ut.invert=function(R,U){var j=U*C((4+g)/g)/2,X=E(j),fe=b(X);return[R/(2/C(g*(4+g))*(1+fe)),E((X+j*(fe+2))/(2+h))]},ct.invert=function(R,U){var j=C(2+g),X=U*j/2;return[j*R/(1+b(X)),X]},bt.invert=function(R,U){var j=1+h,X=C(j/2);return[2*R*X/(1+b(U*=X)),E((U+u(U))/j)]};var Dt=3+2*m;function Nt(R,U){var j=u(R/=2),X=b(R),fe=C(b(U)),Ae=b(U/=2),F=u(U)/(Ae+m*X*fe),$=C(2/(1+F*F)),ie=C((m*Ae+(X+j)*fe)/(m*Ae+(X-j)*fe));return[Dt*($*(ie-1/ie)-2*t(ie)),Dt*($*F*(ie+1/ie)-2*l(F))]}function Qt(){return(0,M.Z)(Nt).scale(62.5271)}Nt.invert=function(R,U){if(!(j=q.invert(R/1.2,1.065*U)))return null;var j,X=j[0],fe=j[1],Ae=20;R/=Dt,U/=Dt;do{var F=X/2,$=fe/2,ie=u(F),de=b(F),xe=u($),Le=b($),Ne=b(fe),Ue=C(Ne),qe=xe/(Le+m*de*Ue),Ye=qe*qe,$e=C(2/(1+Ye)),lt=(m*Le+(de+ie)*Ue)/(m*Le+(de-ie)*Ue),pt=C(lt),Et=pt-1/pt,Ct=pt+1/pt,St=$e*Et-2*t(pt)-R,Ft=$e*qe*Ct-2*l(qe)-U,Lt=xe&&v*Ue*ie*Ye/xe,tn=(m*de*Le+Ue)/(2*(Le+m*de*Ue)*(Le+m*de*Ue)*Ue),Zt=-.5*qe*$e*$e*$e,Ht=Zt*Lt,dn=Zt*tn,vn=(vn=2*Le+m*Ue*(de-ie))*vn*pt,zn=(m*de*Le*Ue+Ne)/vn,Rn=-m*ie*xe/(Ue*vn),Vn=Et*Ht-2*zn/pt+$e*(zn+zn/lt),Xn=Et*dn-2*Rn/pt+$e*(Rn+Rn/lt),or=qe*Ct*Ht-2*Lt/(1+Ye)+$e*Ct*Lt+$e*qe*(zn-zn/lt),ar=qe*Ct*dn-2*tn/(1+Ye)+$e*Ct*tn+$e*qe*(Rn-Rn/lt),fr=Xn*or-ar*Vn;if(!fr)break;var mr=(Ft*Xn-St*ar)/fr,Lr=(St*or-Ft*Vn)/fr;X-=mr,fe=i(-h,r(h,fe-Lr))}while((k(mr)>c||k(Lr)>c)&&--Ae>0);return k(k(fe)-h)<c?[0,fe]:Ae&&[X,fe]};var jt=b(35*w);function Ut(R,U){var j=p(U/2);return[R*jt*C(1-j*j),(1+jt)*j]}function Xt(){return(0,M.Z)(Ut).scale(137.152)}function gn(R,U){var j=U/2,X=b(j);return[2*R/_*b(U)*X*X,_*p(j)]}function Mn(){return(0,M.Z)(gn).scale(135.264)}function cn(R){var U=1-R,j=fe(g,0)[0]-fe(-g,0)[0],X=C(2*(fe(0,h)[1]-fe(0,-h)[1])/j);function fe($,ie){var de=b(ie),xe=u(ie);return[de/(U+R*de)*$,U*ie+R*xe]}function Ae($,ie){var de=fe($,ie);return[de[0]*X,de[1]/X]}function F($){return Ae(0,$)[1]}return Ae.invert=function($,ie){var de=_e(F,ie);return[$/X*(R+U/b(de)),de]},Ae}function qt(){var R=.5,U=(0,M.r)(cn),j=U(R);return j.alpha=function(X){return arguments.length?U(R=+X):R},j.scale(168.725)}Ut.invert=function(R,U){var j=U/(1+jt);return[R&&R/(jt*C(1-j*j)),2*l(j)]},gn.invert=function(R,U){var j=l(U/_),X=b(j),fe=2*j;return[R*_/2/(b(fe)*X*X),fe]};var nn=e(57962),Kt=e(97492);function sn(R){return[R[0]/2,E(p(R[1]/2*w))*S]}function hn(R){return[2*R[0],2*l(u(R[1]*w))*S]}function bn(R){R==null&&(R=nn.Z);var U=R(),j=(0,Kt.Z)().scale(S).precision(0).clipAngle(null).translate([0,0]);function X(Ae){return U(sn(Ae))}function fe(Ae){X[Ae]=function(){return arguments.length?(U[Ae].apply(U,arguments),X):U[Ae]()}}return U.invert&&(X.invert=function(Ae){return hn(U.invert(Ae))}),X.stream=function(Ae){var F=U.stream(Ae),$=j.stream({point:function(ie,de){F.point(ie/2,E(p(-de/2*w))*S)},lineStart:function(){F.lineStart()},lineEnd:function(){F.lineEnd()},polygonStart:function(){F.polygonStart()},polygonEnd:function(){F.polygonEnd()}});return $.sphere=F.sphere,$},X.rotate=function(Ae){return arguments.length?(j.rotate(Ae),X):j.rotate()},X.center=function(Ae){return arguments.length?(U.center(sn(Ae)),X):hn(U.center())},fe("angle"),fe("clipAngle"),fe("clipExtent"),fe("fitExtent"),fe("fitHeight"),fe("fitSize"),fe("fitWidth"),fe("scale"),fe("translate"),fe("precision"),X.scale(249.5)}function yn(R,U){var j=2*g/U,X=R*R;function fe(Ae,F){var $=(0,Q.N)(Ae,F),ie=$[0],de=$[1],xe=ie*ie+de*de;if(xe>X){var Le=C(xe),Ne=T(de,ie),Ue=j*o(Ne/j),qe=Ne-Ue,Ye=R*b(qe),$e=(R*u(qe)-qe*u(Ye))/(h-Ye),lt=Sn(qe,$e),pt=(g-R)/pn(lt,Ye,g);ie=Le;var Et,Ct=50;do ie-=Et=(R+pn(lt,Ye,ie)*pt-Le)/(lt(ie)*pt);while(k(Et)>c&&--Ct>0);de=qe*u(ie),ie<h&&(de-=$e*(ie-h));var St=u(Ue),Ft=b(Ue);$[0]=ie*Ft-de*St,$[1]=ie*St+de*Ft}return $}return fe.invert=function(Ae,F){var $=Ae*Ae+F*F;if($>X){var ie=C($),de=T(F,Ae),xe=j*o(de/j),Le=de-xe;Ae=ie*b(Le),F=ie*u(Le);for(var Ne=Ae-h,Ue=u(Ae),qe=F/Ue,Ye=Ae<h?1/0:0,$e=10;;){var lt=R*u(qe),pt=R*b(qe),Et=u(pt),Ct=h-pt,St=(lt-qe*Et)/Ct,Ft=Sn(qe,St);if(k(Ye)<x||!--$e)break;qe-=Ye=(qe*Ue-St*Ne-F)/(Ue-2*Ne*(Ct*(pt+qe*lt*b(pt)-Et)-lt*(lt-qe*Et))/(Ct*Ct))}Ae=(ie=R+pn(Ft,pt,Ae)*(g-R)/pn(Ft,pt,g))*b(de=xe+qe),F=ie*u(de)}return Q.N.invert(Ae,F)},fe}function Sn(R,U){return function(j){var X=R*b(j);return j<h&&(X-=U),C(1+X*X)}}function pn(R,U,j){for(var X=(j-U)/50,fe=R(U)+R(j),Ae=1,F=U;Ae<50;++Ae)fe+=2*R(F+=X);return .5*fe*X}function Cn(){var R=6,U=30*w,j=b(U),X=u(U),fe=(0,M.r)(yn),Ae=fe(U,R),F=Ae.stream,$=-b(.01*w),ie=u(.01*w);return Ae.radius=function(de){return arguments.length?(j=b(U=de*w),X=u(U),fe(U,R)):U*S},Ae.lobes=function(de){return arguments.length?fe(U,R=+de):R},Ae.stream=function(de){var xe=Ae.rotate(),Le=F(de),Ne=(Ae.rotate([0,0]),F(de));return Ae.rotate(xe),Le.sphere=function(){Ne.polygonStart(),Ne.lineStart();for(var Ue=0,qe=2*g/R,Ye=0;Ue<R;++Ue,Ye-=qe)Ne.point(T(ie*b(Ye),$)*S,E(ie*u(Ye))*S),Ne.point(T(X*b(Ye-qe/2),j)*S,E(X*u(Ye-qe/2))*S);Ne.lineEnd(),Ne.polygonEnd()},Le},Ae.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Hn(R,U,j,X,fe,Ae,F,$){function ie(de,xe){if(!xe)return[R*de/g,0];var Le=xe*xe,Ne=R+Le*(U+Le*(j+Le*X)),Ue=xe*(fe-1+Le*(Ae-$+Le*F)),qe=(Ne*Ne+Ue*Ue)/(2*Ue),Ye=de*E(Ne/qe)/g;return[qe*u(Ye),xe*(1+Le*$)+qe*(1-b(Ye))]}return arguments.length<8&&($=0),ie.invert=function(de,xe){var Le,Ne,Ue=g*de/R,qe=xe,Ye=50;do{var $e=qe*qe,lt=R+$e*(U+$e*(j+$e*X)),pt=qe*(fe-1+$e*(Ae-$+$e*F)),Et=lt*lt+pt*pt,Ct=2*pt,St=Et/Ct,Ft=St*St,Lt=E(lt/St)/g,tn=Ue*Lt,Zt=lt*lt,Ht=(2*U+$e*(4*j+6*$e*X))*qe,dn=fe+$e*(3*Ae+5*$e*F),vn=(2*(lt*Ht+pt*(dn-1))*Ct-Et*(2*(dn-1)))/(Ct*Ct),zn=b(tn),Rn=u(tn),Vn=St*zn,Xn=St*Rn,or=Ue/g*(1/C(1-Zt/Ft))*(Ht*St-lt*vn)/Ft,ar=Xn-de,fr=qe*(1+$e*$)+St-Vn-xe,mr=vn*Rn+Vn*or,Lr=Vn*Lt,Nn=1+vn-(vn*zn-Xn*or),ir=Xn*Lt,hr=mr*ir-Nn*Lr;if(!hr)break;Ue-=Le=(fr*mr-ar*Nn)/hr,qe-=Ne=(ar*ir-fr*Lr)/hr}while((k(Le)>c||k(Ne)>c)&&--Ye>0);return[Ue,qe]},ie}var Qn=Hn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function nr(){return(0,M.Z)(Qn).scale(149.995)}var Jn=Hn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Gn(){return(0,M.Z)(Jn).scale(153.93)}var lr=Hn(5/6*g,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Rt(){return(0,M.Z)(lr).scale(130.945)}function $t(R,U){var j=R*R,X=U*U;return[R*(1-.162388*X)*(.87-952426e-9*j*j),U*(1+X/12)]}function an(){return(0,M.Z)($t).scale(131.747)}$t.invert=function(R,U){var j,X=R,fe=U,Ae=50;do{var F=fe*fe;fe-=j=(fe*(1+F/12)-U)/(1+F/4)}while(k(j)>c&&--Ae>0);Ae=50,R/=1-.162388*F;do{var $=($=X*X)*$;X-=j=(X*(.87-952426e-9*$)-R)/(.87-.00476213*$)}while(k(j)>c&&--Ae>0);return[X,fe]};var fn=Hn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function wn(){return(0,M.Z)(fn).scale(131.087)}function Bn(R){var U=R(h,0)[0]-R(-h,0)[0];function j(X,fe){var Ae=X>0?-.5:.5,F=R(X+Ae*g,fe);return F[0]-=Ae*U,F}return R.invert&&(j.invert=function(X,fe){var Ae=X>0?-.5:.5,F=R.invert(X+Ae*U,fe),$=F[0]-Ae*g;return $<-g?$+=2*g:$>g&&($-=2*g),F[0]=$,F}),j}function Ln(R,U){var j=a(R),X=a(U),fe=b(U),Ae=b(R)*fe,F=u(R)*fe,$=u(X*U);R=k(T(F,$)),U=E(Ae),k(R-h)>c&&(R%=h);var ie=function(de,xe){if(xe===h)return[0,0];var Le,Ne,Ue=u(xe),qe=Ue*Ue,Ye=qe*qe,$e=1+Ye,lt=1+3*Ye,pt=1-Ye,Et=E(1/C($e)),Ct=pt+qe*$e*Et,St=(1-Ue)/Ct,Ft=C(St),Lt=St*$e,tn=C(Lt),Zt=Ft*pt;if(de===0)return[0,-(Zt+qe*tn)];var Ht,dn=b(xe),vn=1/dn,zn=2*Ue*dn,Rn=(-Ct*dn-(1-Ue)*((-3*qe+Et*lt)*zn))/(Ct*Ct),Vn=-vn*zn,Xn=-vn*(qe*$e*Rn+St*lt*zn),or=-2*vn*(pt*(.5*Rn/Ft)-2*qe*Ft*zn),ar=4*de/g;if(de>.222*g||xe<g/4&&de>.175*g){if(Le=(Zt+qe*C(Lt*(1+Ye)-Zt*Zt))/(1+Ye),de>g/4)return[Le,Le];var fr=Le,mr=.5*Le;Le=.5*(mr+fr),Ne=50;do{var Lr=Le*(or+Vn*C(Lt-Le*Le))+Xn*E(Le/tn)-ar;if(!Lr)break;Lr<0?mr=Le:fr=Le,Le=.5*(mr+fr)}while(k(fr-mr)>c&&--Ne>0)}else{Le=c,Ne=25;do{var Nn=Le*Le,ir=C(Lt-Nn),hr=or+Vn*ir,yr=Le*hr+Xn*E(Le/tn)-ar;Le-=Ht=ir?yr/(hr+(Xn-Vn*Nn)/ir):0}while(k(Ht)>c&&--Ne>0)}return[Le,-Zt-qe*C(Lt-Le*Le)]}(R>g/4?h-R:R,U);return R>g/4&&($=ie[0],ie[0]=-ie[1],ie[1]=-$),ie[0]*=j,ie[1]*=-X,ie}function In(){return(0,M.Z)(Bn(Ln)).scale(239.75)}function Wn(R,U){var j,X,fe,Ae,F,$;if(U<c)return[(Ae=u(R))-(j=U*(R-Ae*(X=b(R)))/4)*X,X+j*Ae,1-U*Ae*Ae/2,R-j];if(U>=1-c)return j=(1-U)/4,fe=1/(X=z(R)),[(Ae=(($=d(2*($=R)))-1)/($+1))+j*((F=X*P(R))-R)/(X*X),fe-j*Ae*fe*(F-R),fe+j*Ae*fe*(F+R),2*l(d(R))-h+j*(F-R)/X];var ie=[1,0,0,0,0,0,0,0,0],de=[C(U),0,0,0,0,0,0,0,0],xe=0;for(X=C(1-U),F=1;k(de[xe]/ie[xe])>c&&xe<8;)j=ie[xe++],de[xe]=(j-X)/2,ie[xe]=(j+X)/2,X=C(j*X),F*=2;fe=F*ie[xe]*R;do fe=(E(Ae=de[xe]*u(X=fe)/ie[xe])+fe)/2;while(--xe);return[u(fe),Ae=b(fe),Ae/b(fe-X),fe]}function Vt(R,U){if(!U)return R;if(U===1)return t(p(R/2+y));for(var j=1,X=C(1-U),fe=C(U),Ae=0;k(fe)>c;Ae++){if(R%g){var F=l(X*p(R)/j);F<0&&(F+=g),R+=F+~~(R/g)*g}else R+=R;fe=(j+X)/2,X=C(j*X),fe=((j=fe)-X)/2}return R/(n(2,Ae)*j)}function _n(R,U){var j=(m-1)/(m+1),X=C(1-j*j),fe=Vt(h,X*X),Ae=t(p(g/4+k(U)/2)),F=d(-1*Ae)/C(j),$=function(de,xe){var Le=de*de,Ne=xe+1,Ue=1-Le-xe*xe;return[.5*((de>=0?h:-h)-T(Ue,2*de)),-.25*t(Ue*Ue+4*Le)+.5*t(Ne*Ne+Le)]}(F*b(-1*R),F*u(-1*R)),ie=function(de,xe,Le){var Ne=k(de),Ue=P(k(xe));if(Ne){var qe=1/u(Ne),Ye=1/(p(Ne)*p(Ne)),$e=-(Ye+Le*(Ue*Ue*qe*qe)-1+Le),lt=(-$e+C($e*$e-(Le-1)*Ye*4))/2;return[Vt(l(1/C(lt)),Le)*a(de),Vt(l(C((lt/Ye-1)/Le)),1-Le)*a(xe)]}return[0,Vt(l(Ue),1-Le)*a(xe)]}($[0],$[1],X*X);return[-ie[1],(U>=0?1:-1)*(.5*fe-ie[0])]}function At(){return(0,M.Z)(Bn(_n)).scale(151.496)}Ln.invert=function(R,U){k(R)>1&&(R=2*a(R)-R),k(U)>1&&(U=2*a(U)-U);var j=a(R),X=a(U),fe=-j*R,Ae=-X*U,F=Ae/fe<1,$=function(Le,Ne){for(var Ue=0,qe=1,Ye=.5,$e=50;;){var lt=Ye*Ye,pt=C(Ye),Et=E(1/C(1+lt)),Ct=1-lt+Ye*(1+lt)*Et,St=(1-pt)/Ct,Ft=C(St),Lt=St*(1+lt),tn=Ft*(1-lt),Zt=C(Lt-Le*Le),Ht=Ne+tn+Ye*Zt;if(k(qe-Ue)<x||--$e==0||Ht===0)break;Ht>0?Ue=Ye:qe=Ye,Ye=.5*(Ue+qe)}if(!$e)return null;var dn=E(pt),vn=b(dn),zn=1/vn,Rn=2*pt*vn,Vn=(-Ct*vn-(-3*Ye+Et*(1+3*lt))*Rn*(1-pt))/(Ct*Ct);return[g/4*(Le*(-2*zn*((1-lt)*(.5*Vn/Ft)-2*Ye*Ft*Rn)+-zn*Rn*Zt)+-zn*(Ye*(1+lt)*Vn+St*(1+3*lt)*Rn)*E(Le/C(Lt))),dn]}(F?Ae:fe,F?fe:Ae),ie=$[0],de=$[1],xe=b(de);return F&&(ie=-h-ie),[j*(T(u(ie)*xe,-u(de))+g),X*E(b(ie)*xe)]},_n.invert=function(R,U){var j,X,fe,Ae,F,$,ie=(m-1)/(m+1),de=C(1-ie*ie),xe=(X=-R,fe=de*de,(j=.5*Vt(h,de*de)-U)?(Ae=Wn(j,fe),X?($=(F=Wn(X,1-fe))[1]*F[1]+fe*Ae[0]*Ae[0]*F[0]*F[0],[[Ae[0]*F[2]/$,Ae[1]*Ae[2]*F[0]*F[1]/$],[Ae[1]*F[1]/$,-Ae[0]*Ae[2]*F[0]*F[2]/$],[Ae[2]*F[1]*F[2]/$,-fe*Ae[0]*Ae[1]*F[0]/$]]):[[Ae[0],0],[Ae[1],0],[Ae[2],0]]):[[0,(F=Wn(X,1-fe))[0]/F[1]],[1/F[1],0],[F[2]/F[1],0]]),Le=function(Ne,Ue){var qe=Ue[0]*Ue[0]+Ue[1]*Ue[1];return[(Ne[0]*Ue[0]+Ne[1]*Ue[1])/qe,(Ne[1]*Ue[0]-Ne[0]*Ue[1])/qe]}(xe[0],xe[1]);return[T(Le[1],Le[0])/-1,2*l(d(-.5*t(ie*Le[0]*Le[0]+ie*Le[1]*Le[1])))-h]};var Gt=e(7613);function Jt(R){var U=u(R),j=b(R),X=mn(R);function fe(Ae,F){var $=X(Ae,F);Ae=$[0],F=$[1];var ie=u(F),de=b(F),xe=b(Ae),Le=L(U*ie+j*de*xe),Ne=u(Le),Ue=k(Ne)>c?Le/Ne:1;return[Ue*j*u(Ae),(k(Ae)>h?Ue:-Ue)*(U*de-j*ie*xe)]}return X.invert=mn(-R),fe.invert=function(Ae,F){var $=C(Ae*Ae+F*F),ie=-u($),de=b($),xe=$*de,Le=-F*ie,Ne=$*U,Ue=C(xe*xe+Le*Le-Ne*Ne),qe=T(xe*Ne+Le*Ue,Le*Ne-xe*Ue),Ye=($>h?-1:1)*T(Ae*ie,$*b(qe)*de+F*u(qe)*ie);return X.invert(Ye,qe)},fe}function mn(R){var U=u(R),j=b(R);return function(X,fe){var Ae=b(fe),F=b(X)*Ae,$=u(X)*Ae,ie=u(fe);return[T($,F*j-ie*U),E(ie*j+F*U)]}}function xn(){var R=0,U=(0,M.r)(Jt),j=U(R),X=j.rotate,fe=j.stream,Ae=(0,Gt.Z)();return j.parallel=function(F){if(!arguments.length)return R*S;var $=j.rotate();return U(R=F*w).rotate($)},j.rotate=function(F){return arguments.length?(X.call(j,[F[0],F[1]-R*S]),Ae.center([-F[0],-F[1]]),j):((F=X.call(j))[1]+=R*S,F)},j.stream=function(F){return(F=fe(F)).sphere=function(){F.polygonStart();var $,ie=Ae.radius(89.99)().coordinates[0],de=ie.length-1,xe=-1;for(F.lineStart();++xe<de;)F.point(($=ie[xe])[0],$[1]);for(F.lineEnd(),de=(ie=Ae.radius(90.01)().coordinates[0]).length-1,F.lineStart();--xe>=0;)F.point(($=ie[xe])[0],$[1]);F.lineEnd(),F.polygonEnd()},F},j.scale(79.4187).parallel(45).clipAngle(179.999)}var An=e(33064),ln=e(72736),Yt=E(1-1/3)*S,Wt=We(0);function on(R){var U=Yt*w,j=Tt(g,U)[0]-Tt(-g,U)[0],X=Wt(0,U)[1],fe=Tt(0,U)[1],Ae=_-fe,F=f/R,$=4/f,ie=X+Ae*Ae*4/f;function de(xe,Le){var Ne,Ue=k(Le);if(Ue>U){var qe=r(R-1,i(0,s((xe+g)/F)));(Ne=Tt(xe+=g*(R-1)/R-qe*F,Ue))[0]=Ne[0]*f/j-f*(R-1)/(2*R)+qe*f/R,Ne[1]=X+4*(Ne[1]-fe)*Ae/f,Le<0&&(Ne[1]=-Ne[1])}else Ne=Wt(xe,Le);return Ne[0]*=$,Ne[1]/=ie,Ne}return de.invert=function(xe,Le){xe/=$;var Ne=k(Le*=ie);if(Ne>X){var Ue=r(R-1,i(0,s((xe+g)/F)));xe=(xe+g*(R-1)/R-Ue*F)*j/f;var qe=Tt.invert(xe,.25*(Ne-X)*f/Ae+fe);return qe[0]-=g*(R-1)/R-Ue*F,Le<0&&(qe[1]=-qe[1]),qe}return Wt.invert(xe,Le)},de}function un(R,U){return[R,1&U?90-c:Yt]}function En(R,U){return[R,1&U?-90+c:-Yt]}function Pn(R){return[R[0]*(1-c),R[1]]}function Un(){var R=4,U=(0,M.r)(on),j=U(R),X=j.stream;return j.lobes=function(fe){return arguments.length?U(R=+fe):R},j.stream=function(fe){var Ae=j.rotate(),F=X(fe),$=(j.rotate([0,0]),X(fe));return j.rotate(Ae),F.sphere=function(){var ie,de;(0,ln.Z)((ie=180/R,de=[].concat((0,An.w6)(-180,180+ie/2,ie).map(un),(0,An.w6)(180,-180-ie/2,-ie).map(En)),{type:"Polygon",coordinates:[ie===180?de.map(Pn):de]}),$)},F},j.scale(239.75)}function Fn(R){var U,j=1+R,X=E(u(1/j)),fe=2*C(g/(U=g+4*X*j)),Ae=.5*fe*(j+C(R*(2+R))),F=R*R,$=j*j;function ie(de,xe){var Le,Ne,Ue=1-u(xe);if(Ue&&Ue<2){var qe,Ye=h-xe,$e=25;do{var lt=u(Ye),pt=b(Ye),Et=X+T(lt,j-pt),Ct=1+$-2*j*pt;Ye-=qe=(Ye-F*X-j*lt+Ct*Et-.5*Ue*U)/(2*j*lt*Et)}while(k(qe)>x&&--$e>0);Le=fe*C(Ct),Ne=de*Et/g}else Le=fe*(R+Ue),Ne=de*X/g;return[Le*u(Ne),Ae-Le*b(Ne)]}return ie.invert=function(de,xe){var Le=de*de+(xe-=Ae)*xe,Ne=(1+$-Le/(fe*fe))/(2*j),Ue=L(Ne),qe=u(Ue),Ye=X+T(qe,j-Ne);return[E(de/C(Le))*g/Ye,E(1-2*(Ue-F*X-j*qe+(1+$-2*j*Ne)*Ye)/U)]},ie}function Kn(){var R=1,U=(0,M.r)(Fn),j=U(R);return j.ratio=function(X){return arguments.length?U(R=+X):R},j.scale(167.774).center([0,18.67])}var qn=.7109889596207567,rr=.0528035274542;function er(R,U){return U>-qn?((R=se(R,U))[1]+=rr,R):Fe(R,U)}function tr(){return(0,M.Z)(er).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function ur(R,U){return k(U)>qn?((R=se(R,U))[1]-=U>0?rr:-rr,R):Fe(R,U)}function cr(){return(0,M.Z)(ur).scale(152.63)}function br(R,U,j,X){var fe=C(4*g/(2*j+(1+R-U/2)*u(2*j)+(R+U)/2*u(4*j)+U/2*u(6*j))),Ae=C(X*u(j)*C((1+R*b(2*j)+U*b(4*j))/(1+R+U))),F=j*ie(1);function $(Le){return C(1+R*b(2*Le)+U*b(4*Le))}function ie(Le){var Ne=Le*j;return(2*Ne+(1+R-U/2)*u(2*Ne)+(R+U)/2*u(4*Ne)+U/2*u(6*Ne))/j}function de(Le){return $(Le)*u(Le)}var xe=function(Le,Ne){var Ue=j*_e(ie,F*u(Ne)/j,Ne/g);isNaN(Ue)&&(Ue=j*a(Ne));var qe=fe*$(Ue);return[qe*Ae*Le/g*b(Ue),qe/Ae*u(Ue)]};return xe.invert=function(Le,Ne){var Ue=_e(de,Ne*Ae/fe);return[Le*g/(b(Ue)*fe*Ae*$(Ue)),E(j*ie(Ue/j)/F)]},j===0&&(fe=C(X/g),(xe=function(Le,Ne){return[Le*fe,u(Ne)/fe]}).invert=function(Le,Ne){return[Le/fe,E(Ne*fe)]}),xe}function Yn(){var R=1,U=0,j=45*w,X=2,fe=(0,M.r)(br),Ae=fe(R,U,j,X);return Ae.a=function(F){return arguments.length?fe(R=+F,U,j,X):R},Ae.b=function(F){return arguments.length?fe(R,U=+F,j,X):U},Ae.psiMax=function(F){return arguments.length?fe(R,U,j=+F*w,X):j*S},Ae.ratio=function(F){return arguments.length?fe(R,U,j,X=+F):X},Ae.scale(180.739)}function dr(R,U,j,X,fe,Ae,F,$,ie,de,xe){if(xe.nanEncountered)return NaN;var Le,Ne,Ue,qe,Ye,$e,lt,pt,Et,Ct;if(Ne=R(U+.25*(Le=j-U)),Ue=R(j-.25*Le),isNaN(Ne))xe.nanEncountered=!0;else{if(!isNaN(Ue))return Ct=(($e=(qe=Le*(X+4*Ne+fe)/12)+(Ye=Le*(fe+4*Ue+Ae)/12))-F)/15,de>ie?(xe.maxDepthCount++,$e+Ct):Math.abs(Ct)<$?$e+Ct:(pt=dr(R,U,lt=U+.5*Le,X,Ne,fe,qe,.5*$,ie,de+1,xe),isNaN(pt)?(xe.nanEncountered=!0,NaN):(Et=dr(R,lt,j,fe,Ue,Ae,Ye,.5*$,ie,de+1,xe),isNaN(Et)?(xe.nanEncountered=!0,NaN):pt+Et));xe.nanEncountered=!0}}function Sr(R,U,j,X,fe){X===void 0&&(X=1e-8),fe===void 0&&(fe=20);var Ae=R(U),F=R(.5*(U+j)),$=R(j);return dr(R,U,j,Ae,F,$,(Ae+4*F+$)*(j-U)/6,X,fe,1,{maxDepthCount:0,nanEncountered:!1})}function Gr(R,U,j){function X(Ue){return R+(1-R)*n(1-n(Ue,U),1/U)}function fe(Ue){return Sr(X,0,Ue,1e-4)}for(var Ae=1/fe(1),F=1e3,$=1.00000001*Ae,ie=[],de=0;de<=F;de++)ie.push(fe(de/F)*$);function xe(Ue){var qe=0,Ye=F,$e=500;do ie[$e]>Ue?Ye=$e:qe=$e,$e=qe+Ye>>1;while($e>qe);var lt=ie[$e+1]-ie[$e];return lt&&(lt=(Ue-ie[$e+1])/lt),($e+1+lt)/F}var Le=2*xe(1)/g*Ae/j,Ne=function(Ue,qe){var Ye=xe(k(u(qe))),$e=X(Ye)*Ue;return Ye/=Le,[$e,qe>=0?Ye:-Ye]};return Ne.invert=function(Ue,qe){var Ye;return k(qe*=Le)<1&&(Ye=a(qe)*E(fe(k(qe))*Ae)),[Ue/X(k(qe)),Ye]},Ne}function ai(){var R=0,U=2.5,j=1.183136,X=(0,M.r)(Gr),fe=X(R,U,j);return fe.alpha=function(Ae){return arguments.length?X(R=+Ae,U,j):R},fe.k=function(Ae){return arguments.length?X(R,U=+Ae,j):U},fe.gamma=function(Ae){return arguments.length?X(R,U,j=+Ae):j},fe.scale(152.63)}function ni(R,U){return k(R[0]-U[0])<c&&k(R[1]-U[1])<c}function ci(R,U){for(var j,X,fe,Ae=-1,F=R.length,$=R[0],ie=[];++Ae<F;){X=((j=R[Ae])[0]-$[0])/U,fe=(j[1]-$[1])/U;for(var de=0;de<U;++de)ie.push([$[0]+de*X,$[1]+de*fe]);$=j}return ie.push(j),ie}function Kr(R,U,j){var X,fe;function Ae(ie,de){for(var xe=de<0?-1:1,Le=U[+(de<0)],Ne=0,Ue=Le.length-1;Ne<Ue&&ie>Le[Ne][2][0];++Ne);var qe=R(ie-Le[Ne][1][0],de);return qe[0]+=R(Le[Ne][1][0],xe*de>xe*Le[Ne][0][1]?Le[Ne][0][1]:de)[0],qe}j?Ae.invert=j(Ae):R.invert&&(Ae.invert=function(ie,de){for(var xe=fe[+(de<0)],Le=U[+(de<0)],Ne=0,Ue=xe.length;Ne<Ue;++Ne){var qe=xe[Ne];if(qe[0][0]<=ie&&ie<qe[1][0]&&qe[0][1]<=de&&de<qe[1][1]){var Ye=R.invert(ie-R(Le[Ne][1][0],0)[0],de);return Ye[0]+=Le[Ne][1][0],ni(Ae(Ye[0],Ye[1]),[ie,de])?Ye:null}}});var F=(0,M.Z)(Ae),$=F.stream;return F.stream=function(ie){var de=F.rotate(),xe=$(ie),Le=(F.rotate([0,0]),$(ie));return F.rotate(de),xe.sphere=function(){(0,ln.Z)(X,Le)},xe},F.lobes=function(ie){return arguments.length?(X=function(de){var xe,Le,Ne,Ue,qe,Ye,$e,lt=[],pt=de[0].length;for($e=0;$e<pt;++$e)Le=(xe=de[0][$e])[0][0],Ne=xe[0][1],Ue=xe[1][1],qe=xe[2][0],Ye=xe[2][1],lt.push(ci([[Le+c,Ne+c],[Le+c,Ue-c],[qe-c,Ue-c],[qe-c,Ye+c]],30));for($e=de[1].length-1;$e>=0;--$e)Le=(xe=de[1][$e])[0][0],Ne=xe[0][1],Ue=xe[1][1],qe=xe[2][0],Ye=xe[2][1],lt.push(ci([[qe-c,Ye-c],[qe-c,Ue+c],[Le+c,Ue+c],[Le+c,Ne-c]],30));return{type:"Polygon",coordinates:[(0,An.TS)(lt)]}}(ie),U=ie.map(function(de){return de.map(function(xe){return[[xe[0][0]*w,xe[0][1]*w],[xe[1][0]*w,xe[1][1]*w],[xe[2][0]*w,xe[2][1]*w]]})}),fe=U.map(function(de){return de.map(function(xe){var Le,Ne=R(xe[0][0],xe[0][1])[0],Ue=R(xe[2][0],xe[2][1])[0],qe=R(xe[1][0],xe[0][1])[1],Ye=R(xe[1][0],xe[1][1])[1];return qe>Ye&&(Le=qe,qe=Ye,Ye=Le),[[Ne,qe],[Ue,Ye]]})}),F):U.map(function(de){return de.map(function(xe){return[[xe[0][0]*S,xe[0][1]*S],[xe[1][0]*S,xe[1][1]*S],[xe[2][0]*S,xe[2][1]*S]]})})},U!=null&&F.lobes(U),F}er.invert=function(R,U){return U>-qn?se.invert(R,U-rr):Fe.invert(R,U)},ur.invert=function(R,U){return k(U)>qn?se.invert(R,U+(U>0?rr:-rr)):Fe.invert(R,U)};var bi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function qa(){return Kr(ke,bi).scale(160.857)}var ha=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function to(){return Kr(ur,ha).scale(152.63)}var Hs=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Fo(){return Kr(se,Hs).scale(169.529)}var ps=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function qs(){return Kr(se,ps).scale(169.529).rotate([20,0])}var Ga=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function rl(){return Kr(er,Ga,me).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Bo=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function No(){return Kr(Fe,Bo).scale(152.63).rotate([-20,0])}function Za(R,U){return[3/f*R*C(g*g/3-U*U),U]}function Si(){return(0,M.Z)(Za).scale(158.837)}function ds(R){function U(j,X){if(k(k(X)-h)<c)return[0,X<0?-2:2];var fe=u(X),Ae=n((1+fe)/(1-fe),R/2),F=.5*(Ae+1/Ae)+b(j*=R);return[2*u(j)/F,(Ae-1/Ae)/F]}return U.invert=function(j,X){var fe=k(X);if(k(fe-2)<c)return j?null:[0,a(X)*h];if(fe>2)return null;var Ae=(j/=2)*j,F=(X/=2)*X,$=2*X/(1+Ae+F);return $=n((1+$)/(1-$),1/R),[T(2*j,1-Ae-F)/R,E(($-1)/($+1))]},U}function Vr(){var R=.5,U=(0,M.r)(ds),j=U(R);return j.spacing=function(X){return arguments.length?U(R=+X):R},j.scale(124.75)}Za.invert=function(R,U){return[f/3*R/C(g*g/3-U*U),U]};var Ya=g/m;function ba(R,U){return[R*(1+C(b(U)))/2,U/(b(U/2)*b(R/6))]}function no(){return(0,M.Z)(ba).scale(97.2672)}function Ia(R,U){var j=R*R,X=U*U;return[R*(.975534+X*(-.0143059*j-.119161+-.0547009*X)),U*(1.00384+j*(.0802894+-.02855*X+199025e-9*j)+X*(.0998909+-.0491032*X))]}function yo(){return(0,M.Z)(Ia).scale(139.98)}function ro(R,U){return[u(R)/b(U),p(U)*b(R)]}function io(){return(0,M.Z)(ro).scale(144.049).clipAngle(89.999)}function Ps(R){var U=b(R),j=p(y+R/2);function X(fe,Ae){var F=Ae-R,$=k(F)<c?fe*U:k($=y+Ae/2)<c||k(k($)-h)<c?0:fe*F/t(p($)/j);return[$,F]}return X.invert=function(fe,Ae){var F,$=Ae+R;return[k(Ae)<c?fe/U:k(F=y+$/2)<c||k(k(F)-h)<c?0:fe*t(p(F)/j)/Ae,$]},X}function il(){return Ie(Ps).parallel(40).scale(158.837)}function xo(R,U){return[R,1.25*t(p(y+.4*U))]}function al(){return(0,M.Z)(xo).scale(108.318)}function Gs(R){var U=R.length-1;function j(X,fe){for(var Ae,F=b(fe),$=2/(1+F*b(X)),ie=$*F*u(X),de=$*u(fe),xe=U,Le=R[xe],Ne=Le[0],Ue=Le[1];--xe>=0;)Ne=(Le=R[xe])[0]+ie*(Ae=Ne)-de*Ue,Ue=Le[1]+ie*Ue+de*Ae;return[Ne=ie*(Ae=Ne)-de*Ue,Ue=ie*Ue+de*Ae]}return j.invert=function(X,fe){var Ae=20,F=X,$=fe;do{for(var ie,de=U,xe=R[de],Le=xe[0],Ne=xe[1],Ue=0,qe=0;--de>=0;)Ue=Le+F*(ie=Ue)-$*qe,qe=Ne+F*qe+$*ie,Le=(xe=R[de])[0]+F*(ie=Le)-$*Ne,Ne=xe[1]+F*Ne+$*ie;var Ye,$e,lt=(Ue=Le+F*(ie=Ue)-$*qe)*Ue+(qe=Ne+F*qe+$*ie)*qe;F-=Ye=((Le=F*(ie=Le)-$*Ne-X)*Ue+(Ne=F*Ne+$*ie-fe)*qe)/lt,$-=$e=(Ne*Ue-Le*qe)/lt}while(k(Ye)+k($e)>c*c&&--Ae>0);if(Ae){var pt=C(F*F+$*$),Et=2*l(.5*pt),Ct=u(Et);return[T(F*Ct,pt*b(Et)),pt?E($*Ct/pt):0]}},j}ba.invert=function(R,U){var j=k(R),X=k(U),fe=c,Ae=h;X<Ya?Ae*=X/Ya:fe+=6*L(Ya/X);for(var F=0;F<25;F++){var $=u(Ae),ie=C(b(Ae)),de=u(Ae/2),xe=b(Ae/2),Le=u(fe/6),Ne=b(fe/6),Ue=.5*fe*(1+ie)-j,qe=Ae/(xe*Ne)-X,Ye=ie?-.25*fe*$/ie:0,$e=.5*(1+ie),lt=(1+.5*Ae*de/xe)/(xe*Ne),pt=Ae/xe*(Le/6)/(Ne*Ne),Et=Ye*pt-lt*$e,Ct=(Ue*pt-qe*$e)/Et,St=(qe*Ye-Ue*lt)/Et;if(Ae-=Ct,fe-=St,k(Ct)<c&&k(St)<c)break}return[R<0?-fe:fe,U<0?-Ae:Ae]},Ia.invert=function(R,U){var j=a(R)*g,X=U/2,fe=50;do{var Ae=j*j,F=X*X,$=j*X,ie=j*(.975534+F*(-.0143059*Ae-.119161+-.0547009*F))-R,de=X*(1.00384+Ae*(.0802894+-.02855*F+199025e-9*Ae)+F*(.0998909+-.0491032*F))-U,xe=.975534-F*(.119161+3*Ae*.0143059+.0547009*F),Le=-$*(.238322+.2188036*F+.0286118*Ae),Ne=$*(.1605788+7961e-7*Ae+-.0571*F),Ue=1.00384+Ae*(.0802894+199025e-9*Ae)+F*(3*(.0998909-.02855*Ae)-.245516*F),qe=Le*Ne-Ue*xe,Ye=(de*Le-ie*Ue)/qe,$e=(ie*Ne-de*xe)/qe;j-=Ye,X-=$e}while((k(Ye)>c||k($e)>c)&&--fe>0);return fe&&[j,X]},ro.invert=function(R,U){var j=R*R,X=U*U+1,fe=j+X,Ae=R?v*C((fe-C(fe*fe-4*j))/j):1/C(X);return[E(R*Ae),a(U)*L(Ae)]},xo.invert=function(R,U){return[R,2.5*l(d(.8*U))-.625*g]};var ol=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Zs=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],sl=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ts=[[.9245,0],[0,0],[.01943,0]],bo=[[.721316,0],[0,0],[-.00881625,-.00617325]];function jo(){return Aa(ol,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function ns(){return Aa(Zs,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Os(){return Aa(sl,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Ys(){return Aa(ts,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Ws(){return Aa(bo,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Aa(R,U){var j=(0,M.Z)(Gs(R)).rotate(U).clipAngle(90),X=(0,Je.Z)(U),fe=j.center;return delete j.rotate,j.center=function(Ae){return arguments.length?fe(X(Ae)):X.invert(fe())},j}var Uo=C(6),Wa=C(7);function ao(R,U){var j=E(7*u(U)/(3*Uo));return[Uo*R*(2*b(2*j/3)-1)/Wa,9*u(j/3)/Wa]}function ll(){return(0,M.Z)(ao).scale(164.859)}function _o(R,U){for(var j,X=(1+v)*u(U),fe=U,Ae=0;Ae<25&&(fe-=j=(u(fe/2)+u(fe)-X)/(.5*b(fe/2)+b(fe)),!(k(j)<c));Ae++);return[R*(1+2*b(fe)/b(fe/2))/(3*m),2*C(3)*u(fe/2)/C(2+m)]}function $r(){return(0,M.Z)(_o).scale(188.209)}function Da(R,U){for(var j,X=C(6/(4+g)),fe=(1+g/4)*u(U),Ae=U/2,F=0;F<25&&(Ae-=j=(Ae/2+u(Ae)-fe)/(.5+b(Ae)),!(k(j)<c));F++);return[X*(.5+b(Ae))*R/1.5,X*Ae]}function gs(){return(0,M.Z)(Da).scale(166.518)}ao.invert=function(R,U){var j=3*E(U*Wa/9);return[R*Wa/(Uo*(2*b(2*j/3)-1)),E(3*u(j)*Uo/7)]},_o.invert=function(R,U){var j=U*C(2+m)/(2*C(3)),X=2*E(j);return[3*m*R/(1+2*b(X)/b(X/2)),E((j+u(X))/(1+v))]},Da.invert=function(R,U){var j=C(6/(4+g)),X=U/j;return k(k(X)-h)<c&&(X=X<0?-h:h),[1.5*R/(j*(.5+b(X))),E((X/2+u(X))/(1+g/4))]};var Ma=e(26867);function Vo(R,U){var j=U*U,X=j*j,fe=j*X;return[R*(.84719-.13063*j+fe*fe*(.05494*j-.04515-.02326*X+.00331*fe)),U*(1.01183+X*X*(.01926*j-.02625-.00396*X))]}function xl(){return(0,M.Z)(Vo).scale(175.295)}function Is(R,U){return[R*(1+b(U))/2,2*(U-p(U/2))]}function ul(){return(0,M.Z)(Is).scale(152.63)}Vo.invert=function(R,U){var j,X,fe,Ae,F=U,$=25;do F-=j=(F*(1.01183+(fe=(X=F*F)*X)*fe*(.01926*X-.02625-.00396*fe))-U)/(1.01183+fe*fe*(.21186*X-.23625+-.05148*fe));while(k(j)>x&&--$>0);return[R/(.84719-.13063*(X=F*F)+(Ae=X*(fe=X*X))*Ae*(.05494*X-.04515-.02326*fe+.00331*Ae)),F]},Is.invert=function(R,U){for(var j=U/2,X=0,fe=1/0;X<10&&k(fe)>c;++X){var Ae=b(U/2);U-=fe=(U-p(U/2)-j)/(1-.5/(Ae*Ae))}return[2*R/(1+b(U)),U]};var cl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function vs(){return Kr(ue(1/0),cl).rotate([20,0]).scale(152.63)}function rs(R,U){var j=u(U),X=b(U),fe=a(R);if(R===0||k(U)===h)return[0,U];if(U===0)return[R,0];if(k(R)===h)return[R*X,h*j];var Ae=g/(2*R)-2*R/g,F=2*U/g,$=(1-F*F)/(j-F),ie=Ae*Ae,de=$*$,xe=1+ie/de,Le=1+de/ie,Ne=(Ae*j/$-Ae/2)/xe,Ue=(de*j/ie+$/2)/Le,qe=Ue*Ue-(de*j*j/ie+$*j-1)/Le;return[h*(Ne+C(Ne*Ne+X*X/xe)*fe),h*(Ue+C(qe<0?0:qe)*a(-U*Ae)*fe)]}function ms(){return(0,M.Z)(rs).scale(127.267)}rs.invert=function(R,U){var j=(R/=h)*R,X=j+(U/=h)*U,fe=g*g;return[R?(X-1+C((1-X)*(1-X)+4*j))/(2*R)*h:0,_e(function(Ae){return X*(g*u(Ae)-2*Ae)*g+4*Ae*Ae*(U-u(Ae))+2*g*Ae-fe*U},0)]};var wo=1.0148,oo=.23185,To=-.14499,so=.02406,Ds=wo,za=5*oo,fl=7*To,hl=9*so,zs=1.790857183;function ko(R,U){var j=U*U;return[R,U*(wo+j*j*(oo+j*(To+so*j)))]}function Rs(){return(0,M.Z)(ko).scale(139.319)}function Ho(R,U){if(k(U)<c)return[R,0];var j=p(U),X=R*u(U);return[u(X)/j,U+(1-b(X))/j]}function Xs(){return(0,M.Z)(Ho).scale(103.74)}ko.invert=function(R,U){U>zs?U=zs:U<-1.790857183&&(U=-1.790857183);var j,X=U;do{var fe=X*X;X-=j=(X*(wo+fe*fe*(oo+fe*(To+so*fe)))-U)/(Ds+fe*fe*(za+fe*(fl+hl*fe)))}while(k(j)>c);return[R,X]},Ho.invert=function(R,U){if(k(U)<c)return[R,0];var j,X=R*R+U*U,fe=.5*U,Ae=10;do{var F=p(fe),$=1/b(fe),ie=X-2*U*fe+fe*fe;fe-=j=(F*ie+2*(fe-U))/(2+ie*$*$+2*(fe-U)*F)}while(k(j)>c&&--Ae>0);return F=p(fe),[(k(U)<k(fe+1/F)?E(R*F):a(U)*a(R)*(L(k(R*F))+h))/u(fe),fe]};var is=e(77338),qo=e(83074);function ys(R,U){return[R[0]*U[0]+R[1]*U[3],R[0]*U[1]+R[1]*U[4],R[0]*U[2]+R[1]*U[5]+R[2],R[3]*U[0]+R[4]*U[3],R[3]*U[1]+R[4]*U[4],R[3]*U[2]+R[4]*U[5]+R[5]]}function as(R,U){return[R[0]-U[0],R[1]-U[1]]}function Qr(R){return C(R[0]*R[0]+R[1]*R[1])}function Ao(R,U,j){function X($,ie){var de,xe=U($,ie),Le=xe.project([$*S,ie*S]);return(de=xe.transform)?[de[0]*Le[0]+de[1]*Le[1]+de[2],-(de[3]*Le[0]+de[4]*Le[1]+de[5])]:(Le[1]=-Le[1],Le)}function fe($,ie){var de=$.project.invert,xe=$.transform,Le=ie;if(xe&&(xe=function($e){var lt=1/($e[0]*$e[4]-$e[1]*$e[3]);return[lt*$e[4],-lt*$e[1],lt*($e[1]*$e[5]-$e[2]*$e[4]),-lt*$e[3],lt*$e[0],lt*($e[2]*$e[3]-$e[0]*$e[5])]}(xe),Le=[xe[0]*Le[0]+xe[1]*Le[1]+xe[2],xe[3]*Le[0]+xe[4]*Le[1]+xe[5]]),de&&$===function($e){return U($e[0]*w,$e[1]*w)}(Ne=de(Le)))return Ne;for(var Ne,Ue=$.children,qe=0,Ye=Ue&&Ue.length;qe<Ye;++qe)if(Ne=fe(Ue[qe],ie))return Ne}(function $(ie,de){if(ie.edges=function(St){for(var Ft=St.length,Lt=[],tn=St[Ft-1],Zt=0;Zt<Ft;++Zt)Lt.push([tn,tn=St[Zt]]);return Lt}(ie.face),de.face){var xe=ie.shared=function(St,Ft){for(var Lt,tn,Zt=St.length,Ht=null,dn=0;dn<Zt;++dn){Lt=St[dn];for(var vn=Ft.length;--vn>=0;)if(tn=Ft[vn],Lt[0]===tn[0]&&Lt[1]===tn[1]){if(Ht)return[Ht,Lt];Ht=Lt}}}(ie.face,de.face),Le=(Ye=xe.map(de.project),$e=xe.map(ie.project),lt=as(Ye[1],Ye[0]),pt=as($e[1],$e[0]),Et=function(St,Ft){return T(St[0]*Ft[1]-St[1]*Ft[0],St[0]*Ft[0]+St[1]*Ft[1])}(lt,pt),Ct=Qr(lt)/Qr(pt),ys([1,0,Ye[0][0],0,1,Ye[0][1]],ys([Ct,0,0,0,Ct,0],ys([b(Et),u(Et),0,-u(Et),b(Et),0],[1,0,-$e[0][0],0,1,-$e[0][1]]))));ie.transform=de.transform?ys(de.transform,Le):Le;for(var Ne=de.edges,Ue=0,qe=Ne.length;Ue<qe;++Ue)Ni(xe[0],Ne[Ue][1])&&Ni(xe[1],Ne[Ue][0])&&(Ne[Ue]=ie),Ni(xe[0],Ne[Ue][0])&&Ni(xe[1],Ne[Ue][1])&&(Ne[Ue]=ie);for(Ue=0,qe=(Ne=ie.edges).length;Ue<qe;++Ue)Ni(xe[0],Ne[Ue][0])&&Ni(xe[1],Ne[Ue][1])&&(Ne[Ue]=de),Ni(xe[0],Ne[Ue][1])&&Ni(xe[1],Ne[Ue][0])&&(Ne[Ue]=de)}else ie.transform=de.transform;var Ye,$e,lt,pt,Et,Ct;return ie.children&&ie.children.forEach(function(St){$(St,ie)}),ie})(R,{transform:null}),Nr(R)&&(X.invert=function($,ie){var de=fe(R,[$,-ie]);return de&&(de[0]*=w,de[1]*=w,de)});var Ae=(0,M.Z)(X),F=Ae.stream;return Ae.stream=function($){var ie=Ae.rotate(),de=F($),xe=(Ae.rotate([0,0]),F($));return Ae.rotate(ie),de.sphere=function(){xe.polygonStart(),xe.lineStart(),lo(xe,R),xe.lineEnd(),xe.polygonEnd()},de},Ae.angle(j==null?-30:j*S)}function lo(R,U,j){var X,fe,Ae=U.edges,F=Ae.length,$={type:"MultiPoint",coordinates:U.face},ie=U.face.filter(function(Ye){return k(Ye[1])!==90}),de=(0,is.Z)({type:"MultiPoint",coordinates:ie}),xe=!1,Le=-1,Ne=de[1][0]-de[0][0],Ue=Ne===180||Ne===360?[(de[0][0]+de[1][0])/2,(de[0][1]+de[1][1])/2]:(0,Ge.Z)($);if(j)for(;++Le<F&&Ae[Le]!==j;);++Le;for(var qe=0;qe<F;++qe)fe=Ae[(qe+Le)%F],Array.isArray(fe)?(xe||(R.point((X=(0,qo.Z)(fe[0],Ue)(c))[0],X[1]),xe=!0),R.point((X=(0,qo.Z)(fe[1],Ue)(c))[0],X[1])):(xe=!1,fe!==j&&lo(R,fe,U))}function Ni(R,U){return R&&U&&R[0]===U[0]&&R[1]===U[1]}function Nr(R){return R.project.invert||R.children&&R.children.some(Nr)}var Hr=e(98936),Mo=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],uo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(R){return R.map(function(U){return Mo[U]})});function Js(R){R=R||function(j){var X=(0,Ge.Z)({type:"MultiPoint",coordinates:j});return(0,Hr.Z)().scale(1).translate([0,0]).rotate([-X[0],-X[1]])};var U=uo.map(function(j){return{face:j,project:R(j)}});return[-1,0,0,1,0,1,4,5].forEach(function(j,X){var fe=U[j];fe&&(fe.children||(fe.children=[])).push(U[X])}),Ao(U[0],function(j,X){return U[j<-g/2?X<0?6:4:j<0?X<0?2:0:j<g/2?X<0?3:1:X<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var xs=2/C(3);function So(R,U){var j=Tt(R,U);return[j[0]*xs,j[1]]}function bs(R){R=R||function(j){var X=(0,Ge.Z)({type:"MultiPoint",coordinates:j});return(0,M.Z)(So).translate([0,0]).scale(1).rotate(X[1]>0?[-X[0],0]:[180-X[0],180])};var U=uo.map(function(j){return{face:j,project:R(j)}});return[-1,0,0,1,0,1,4,5].forEach(function(j,X){var fe=U[j];fe&&(fe.children||(fe.children=[])).push(U[X])}),Ao(U[0],function(j,X){return U[j<-g/2?X<0?6:4:j<0?X<0?2:0:j<g/2?X<0?3:1:X<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function co(R){R=R||function(Ae){var F=Ae.length===6?(0,Ge.Z)({type:"MultiPoint",coordinates:Ae}):Ae[0];return(0,Hr.Z)().scale(1).translate([0,0]).rotate([-F[0],-F[1]])};var U=uo.map(function(Ae){for(var F,$=Ae.map(di),ie=$.length,de=$[ie-1],xe=[],Le=0;Le<ie;++Le)F=$[Le],xe.push(Eo([.9486832980505138*de[0]+.31622776601683794*F[0],.9486832980505138*de[1]+.31622776601683794*F[1],.9486832980505138*de[2]+.31622776601683794*F[2]]),Eo([.9486832980505138*F[0]+.31622776601683794*de[0],.9486832980505138*F[1]+.31622776601683794*de[1],.9486832980505138*F[2]+.31622776601683794*de[2]])),de=F;return xe}),j=[],X=[-1,0,0,1,0,1,4,5];U.forEach(function(Ae,F){for(var $,ie,de=uo[F],xe=de.length,Le=j[F]=[],Ne=0;Ne<xe;++Ne)U.push([de[Ne],Ae[(2*Ne+2)%(2*xe)],Ae[(2*Ne+1)%(2*xe)]]),X.push(F),Le.push(($=di(Ae[(2*Ne+2)%(2*xe)]),ie=di(Ae[(2*Ne+1)%(2*xe)]),[$[1]*ie[2]-$[2]*ie[1],$[2]*ie[0]-$[0]*ie[2],$[0]*ie[1]-$[1]*ie[0]]))});var fe=U.map(function(Ae){return{project:R(Ae),face:Ae}});return X.forEach(function(Ae,F){var $=fe[Ae];$&&($.children||($.children=[])).push(fe[F])}),Ao(fe[0],function(Ae,F){var $=b(F),ie=[$*b(Ae),$*u(Ae),u(F)],de=Ae<-g/2?F<0?6:4:Ae<0?F<0?2:0:Ae<g/2?F<0?3:1:F<0?7:5,xe=j[de];return fe[Go(xe[0],ie)<0?8+3*de:Go(xe[1],ie)<0?8+3*de+1:Go(xe[2],ie)<0?8+3*de+2:de]}).angle(-30).scale(110.625).center([0,45])}function Go(R,U){for(var j=0,X=R.length,fe=0;j<X;++j)fe+=R[j]*U[j];return fe}function Eo(R){return[T(R[1],R[0])*S,E(i(-1,r(1,R[2])))*S]}function di(R){var U=R[0]*w,j=R[1]*w,X=b(j);return[X*b(U),X*u(U),u(j)]}function Zo(){}function Yo(R,U){var j,X=U.stream;if(!X)throw new Error("invalid projection");switch(R&&R.type){case"Feature":j=Ji;break;case"FeatureCollection":j=Pi;break;default:j=Zi}return j(R,X)}function Pi(R,U){return{type:"FeatureCollection",features:R.features.map(function(j){return Ji(j,U)})}}function Ji(R,U){return{type:"Feature",id:R.id,properties:R.properties,geometry:Zi(R.geometry,U)}}function Zi(R,U){if(!R)return null;if(R.type==="GeometryCollection")return function(X,fe){return{type:"GeometryCollection",geometries:X.geometries.map(function(Ae){return Zi(Ae,fe)})}}(R,U);var j;switch(R.type){case"Point":case"MultiPoint":j=Lo;break;case"LineString":case"MultiLineString":j=Ra;break;case"Polygon":case"MultiPolygon":case"Sphere":j=ji;break;default:return null}return(0,ln.Z)(R,U(j)),j.result()}So.invert=function(R,U){return Tt.invert(R/xs,U)};var Oi=[],ra=[],Lo={point:function(R,U){Oi.push([R,U])},result:function(){var R=Oi.length?Oi.length<2?{type:"Point",coordinates:Oi[0]}:{type:"MultiPoint",coordinates:Oi}:null;return Oi=[],R}},Ra={lineStart:Zo,point:function(R,U){Oi.push([R,U])},lineEnd:function(){Oi.length&&(ra.push(Oi),Oi=[])},result:function(){var R=ra.length?ra.length<2?{type:"LineString",coordinates:ra[0]}:{type:"MultiLineString",coordinates:ra}:null;return ra=[],R}},ji={polygonStart:Zo,lineStart:Zo,point:function(R,U){Oi.push([R,U])},lineEnd:function(){var R=Oi.length;if(R){do Oi.push(Oi[0].slice());while(++R<4);ra.push(Oi),Oi=[]}},polygonEnd:Zo,result:function(){if(!ra.length)return null;var R=[],U=[];return ra.forEach(function(j){(function(X){if((fe=X.length)<4)return!1;for(var fe,Ae=0,F=X[fe-1][1]*X[0][0]-X[fe-1][0]*X[0][1];++Ae<fe;)F+=X[Ae-1][1]*X[Ae][0]-X[Ae-1][0]*X[Ae][1];return F<=0})(j)?R.push([j]):U.push(j)}),U.forEach(function(j){var X=j[0];R.some(function(fe){if(function(Ae,F){for(var $=F[0],ie=F[1],de=!1,xe=0,Le=Ae.length,Ne=Le-1;xe<Le;Ne=xe++){var Ue=Ae[xe],qe=Ue[0],Ye=Ue[1],$e=Ae[Ne],lt=$e[0],pt=$e[1];Ye>ie^pt>ie&&$<(lt-qe)*(ie-Ye)/(pt-Ye)+qe&&(de=!de)}return de}(fe[0],X))return fe.push(j),!0})||R.push([j])}),ra=[],R.length?R.length>1?{type:"MultiPolygon",coordinates:R}:{type:"Polygon",coordinates:R[0]}:null}};function _a(R){var U=R(h,0)[0]-R(-h,0)[0];function j(X,fe){var Ae=k(X)<h,F=R(Ae?X:X>0?X-g:X+g,fe),$=(F[0]-F[1])*v,ie=(F[0]+F[1])*v;if(Ae)return[$,ie];var de=U*v,xe=$>0^ie>0?-1:1;return[xe*$-a(ie)*de,xe*ie-a($)*de]}return R.invert&&(j.invert=function(X,fe){var Ae=(X+fe)*v,F=(fe-X)*v,$=k(Ae)<.5*U&&k(F)<.5*U;if(!$){var ie=U*v,de=Ae>0^F>0?-1:1,xe=-de*X+(F>0?1:-1)*ie,Le=-de*fe+(Ae>0?1:-1)*ie;Ae=(-xe-Le)*v,F=(xe-Le)*v}var Ne=R.invert(Ae,F);return $||(Ne[0]+=Ae>0?g:-g),Ne}),(0,M.Z)(j).rotate([-90,-90,45]).clipAngle(179.999)}function Sa(){return _a(Ln).scale(176.423)}function Fs(){return _a(_n).scale(111.48)}function Ea(R,U){if(!(0<=(U=+U)&&U<=20))throw new Error("invalid digits");function j(de){var xe=de.length,Le=2,Ne=new Array(xe);for(Ne[0]=+de[0].toFixed(U),Ne[1]=+de[1].toFixed(U);Le<xe;)Ne[Le]=de[Le],++Le;return Ne}function X(de){return de.map(j)}function fe(de){for(var xe=j(de[0]),Le=[xe],Ne=1;Ne<de.length;Ne++){var Ue=j(de[Ne]);(Ue.length>2||Ue[0]!=xe[0]||Ue[1]!=xe[1])&&(Le.push(Ue),xe=Ue)}return Le.length===1&&de.length>1&&Le.push(j(de[de.length-1])),Le}function Ae(de){return de.map(fe)}function F(de){if(de==null)return de;var xe;switch(de.type){case"GeometryCollection":xe={type:"GeometryCollection",geometries:de.geometries.map(F)};break;case"Point":xe={type:"Point",coordinates:j(de.coordinates)};break;case"MultiPoint":xe={type:de.type,coordinates:X(de.coordinates)};break;case"LineString":xe={type:de.type,coordinates:fe(de.coordinates)};break;case"MultiLineString":case"Polygon":xe={type:de.type,coordinates:Ae(de.coordinates)};break;case"MultiPolygon":xe={type:"MultiPolygon",coordinates:de.coordinates.map(Ae)};break;default:return de}return de.bbox!=null&&(xe.bbox=de.bbox),xe}function $(de){var xe={type:"Feature",properties:de.properties,geometry:F(de.geometry)};return de.id!=null&&(xe.id=de.id),de.bbox!=null&&(xe.bbox=de.bbox),xe}if(R!=null)switch(R.type){case"Feature":return $(R);case"FeatureCollection":var ie={type:"FeatureCollection",features:R.features.map($)};return R.bbox!=null&&(ie.bbox=R.bbox),ie;default:return F(R)}return R}function Ui(R){var U=u(R);function j(X,fe){var Ae=U?p(X*U/2)/U:X/2;if(!fe)return[2*Ae,-R];var F=2*l(Ae*u(fe)),$=1/p(fe);return[u(F)*$,fe+(1-b(F))*$-R]}return j.invert=function(X,fe){if(k(fe+=R)<c)return[U?2*l(U*X/2)/U:X,0];var Ae,F=X*X+fe*fe,$=0,ie=10;do{var de=p($),xe=1/b($),Le=F-2*fe*$+$*$;$-=Ae=(de*Le+2*($-fe))/(2+Le*xe*xe+2*($-fe)*de)}while(k(Ae)>c&&--ie>0);var Ne=X*(de=p($)),Ue=p(k(fe)<k($+1/de)?.5*E(Ne):.5*L(Ne)+g/4)/u($);return[U?2*l(U*Ue)/U:2*Ue,$]},j}function xr(){return Ie(Ui).scale(131.215)}var Ki=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function _s(R,U){var j,X=r(18,36*k(U)/g),fe=s(X),Ae=X-fe,F=(j=Ki[fe])[0],$=j[1],ie=(j=Ki[++fe])[0],de=j[1],xe=(j=Ki[r(19,++fe)])[0],Le=j[1];return[R*(ie+Ae*(xe-F)/2+Ae*Ae*(xe-2*ie+F)/2),(U>0?h:-h)*(de+Ae*(Le-$)/2+Ae*Ae*(Le-2*de+$)/2)]}function Bs(){return(0,M.Z)(_s).scale(152.63)}function Wo(R,U){var j=function(F){function $(ie,de){var xe=b(de),Le=(F-1)/(F-xe*b(ie));return[Le*xe*u(ie),Le*u(de)]}return $.invert=function(ie,de){var xe=ie*ie+de*de,Le=C(xe),Ne=(F-C(1-xe*(F+1)/(F-1)))/((F-1)/Le+Le/(F-1));return[T(ie*Ne,Le*C(1-Ne*Ne)),Le?E(de*Ne/Le):0]},$}(R);if(!U)return j;var X=b(U),fe=u(U);function Ae(F,$){var ie=j(F,$),de=ie[1],xe=de*fe/(R-1)+X;return[ie[0]*X/xe,de/xe]}return Ae.invert=function(F,$){var ie=(R-1)/(R-1-$*fe);return j.invert(ie*F,ie*$*X)},Ae}function Xo(){var R=2,U=0,j=(0,M.r)(Wo),X=j(R,U);return X.distance=function(fe){return arguments.length?j(R=+fe,U):R},X.tilt=function(fe){return arguments.length?j(R,U=fe*w):U*S},X.scale(432.147).clipAngle(L(1/R)*S-1e-6)}Ki.forEach(function(R){R[1]*=1.0144}),_s.invert=function(R,U){var j=U/h,X=90*j,fe=r(18,k(X/5)),Ae=i(0,s(fe));do{var F=Ki[Ae][1],$=Ki[Ae+1][1],ie=Ki[r(19,Ae+2)][1],de=ie-F,xe=ie-2*$+F,Le=2*(k(j)-$)/de,Ne=xe/de,Ue=Le*(1-Ne*Le*(1-2*Ne*Le));if(Ue>=0||Ae===1){X=(U>=0?5:-5)*(Ue+fe);var qe,Ye=50;do Ue=(fe=r(18,k(X)/5))-(Ae=s(fe)),F=Ki[Ae][1],$=Ki[Ae+1][1],ie=Ki[r(19,Ae+2)][1],X-=(qe=(U>=0?h:-h)*($+Ue*(ie-F)/2+Ue*Ue*(ie-2*$+F)/2)-U)*S;while(k(qe)>x&&--Ye>0);break}}while(--Ae>=0);var $e=Ki[Ae][0],lt=Ki[Ae+1][0],pt=Ki[r(19,Ae+2)][0];return[R/(lt+Ue*(pt-$e)/2+Ue*Ue*(pt-2*lt+$e)/2),X*w]};var fo=1e-4,vr=1e4,Fa=-180,os=Fa+fo,ws=180,$i=ws-fo,Ba=-90,La=Ba+fo,wa=90,Xa=wa-fo;function ho(R){return R.length>0}function Ii(R){return R===Ba||R===wa?[0,R]:[Fa,(U=R,Math.floor(U*vr)/vr)];var U}function Jo(R){var U=R[0],j=R[1],X=!1;return U<=os?(U=Fa,X=!0):U>=$i&&(U=ws,X=!0),j<=La?(j=Ba,X=!0):j>=Xa&&(j=wa,X=!0),X?[U,j]:R}function ss(R){return R.map(Jo)}function Vi(R,U,j){for(var X=0,fe=R.length;X<fe;++X){var Ae=R[X].slice();j.push({index:-1,polygon:U,ring:Ae});for(var F=0,$=Ae.length;F<$;++F){var ie=Ae[F],de=ie[0],xe=ie[1];if(de<=os||de>=$i||xe<=La||xe>=Xa){Ae[F]=Jo(ie);for(var Le=F+1;Le<$;++Le){var Ne=Ae[Le],Ue=Ne[0],qe=Ne[1];if(Ue>os&&Ue<$i&&qe>La&&qe<Xa)break}if(Le===F+1)continue;if(F){var Ye={index:-1,polygon:U,ring:Ae.slice(0,F+1)};Ye.ring[Ye.ring.length-1]=Ii(xe),j[j.length-1]=Ye}else j.pop();if(Le>=$)break;j.push({index:-1,polygon:U,ring:Ae=Ae.slice(Le-1)}),Ae[0]=Ii(Ae[0][1]),F=-1,$=Ae.length}}}}function ei(R){var U,j,X,fe,Ae,F,$=R.length,ie={},de={};for(U=0;U<$;++U)X=(j=R[U]).ring[0],Ae=j.ring[j.ring.length-1],X[0]!==Ae[0]||X[1]!==Ae[1]?(j.index=U,ie[X]=de[Ae]=j):(j.polygon.push(j.ring),R[U]=null);for(U=0;U<$;++U)if(j=R[U]){if(X=j.ring[0],Ae=j.ring[j.ring.length-1],fe=de[X],F=ie[Ae],delete ie[X],delete de[Ae],X[0]===Ae[0]&&X[1]===Ae[1]){j.polygon.push(j.ring);continue}fe?(delete de[X],delete ie[fe.ring[0]],fe.ring.pop(),R[fe.index]=null,j={index:-1,polygon:fe.polygon,ring:fe.ring.concat(j.ring)},fe===F?j.polygon.push(j.ring):(j.index=$++,R.push(ie[j.ring[0]]=de[j.ring[j.ring.length-1]]=j))):F?(delete ie[Ae],delete de[F.ring[F.ring.length-1]],j.ring.pop(),j={index:$++,polygon:F.polygon,ring:j.ring.concat(F.ring)},R[F.index]=null,R.push(ie[j.ring[0]]=de[j.ring[j.ring.length-1]]=j)):(j.ring.push(j.ring[0]),j.polygon.push(j.ring))}}function Ts(R){var U={type:"Feature",geometry:pa(R.geometry)};return R.id!=null&&(U.id=R.id),R.bbox!=null&&(U.bbox=R.bbox),R.properties!=null&&(U.properties=R.properties),U}function pa(R){if(R==null)return R;var U,j,X,fe;switch(R.type){case"GeometryCollection":U={type:"GeometryCollection",geometries:R.geometries.map(pa)};break;case"Point":U={type:"Point",coordinates:Jo(R.coordinates)};break;case"MultiPoint":case"LineString":U={type:R.type,coordinates:ss(R.coordinates)};break;case"MultiLineString":U={type:"MultiLineString",coordinates:R.coordinates.map(ss)};break;case"Polygon":var Ae=[];Vi(R.coordinates,Ae,j=[]),ei(j),U={type:"Polygon",coordinates:Ae};break;case"MultiPolygon":j=[],X=-1,fe=R.coordinates.length;for(var F=new Array(fe);++X<fe;)Vi(R.coordinates[X],F[X]=[],j);ei(j),U={type:"MultiPolygon",coordinates:F.filter(ho)};break;default:return R}return R.bbox!=null&&(U.bbox=R.bbox),U}function Di(R){if(R==null)return R;switch(R.type){case"Feature":return Ts(R);case"FeatureCollection":var U={type:"FeatureCollection",features:R.features.map(Ts)};return R.bbox!=null&&(U.bbox=R.bbox),U;default:return pa(R)}}function Ja(R,U){var j=p(U/2),X=u(y*j);return[R*(.74482-.34588*X*X),1.70711*j]}function Ks(){return(0,M.Z)(Ja).scale(146.153)}function _i(R,U,j){var X=(0,qo.Z)(U,j),fe=X(.5),Ae=(0,Je.Z)([-fe[0],-fe[1]])(U),F=X.distance/2,$=-E(u(Ae[1]*w)/u(F)),ie=[-fe[0],-fe[1],-(Ae[0]>0?g-$:$)*S],de=(0,M.Z)(R(F)).rotate(ie),xe=(0,Je.Z)(ie),Le=de.center;return delete de.rotate,de.center=function(Ne){return arguments.length?Le(xe(Ne)):xe.invert(Le())},de.clipAngle(90)}function Xr(R){var U=b(R);function j(X,fe){var Ae=(0,Hr.M)(X,fe);return Ae[0]*=U,Ae}return j.invert=function(X,fe){return Hr.M.invert(X/U,fe)},j}function Ta(){return Ka([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ka(R,U){return _i(Xr,R,U)}function Na(R){if(!(R*=2))return Q.N;var U=-R/2,j=-U,X=R*R,fe=p(j),Ae=.5/u(j);function F($,ie){var de=L(b(ie)*b($-U)),xe=L(b(ie)*b($-j));return[((de*=de)-(xe*=xe))/(2*R),(ie<0?-1:1)*C(4*X*xe-(X-de+xe)*(X-de+xe))/(2*R)]}return F.invert=function($,ie){var de,xe,Le=ie*ie,Ne=b(C(Le+(de=$+U)*de)),Ue=b(C(Le+(de=$+j)*de));return[T(xe=Ne-Ue,de=(Ne+Ue)*fe),(ie<0?-1:1)*L(C(de*de+xe*xe)*Ae)]},F}function Ns(){return Co([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Co(R,U){return _i(Na,R,U)}function Ko(R,U){if(k(U)<c)return[R,0];var j=k(U/h),X=E(j);if(k(R)<c||k(k(U)-h)<c)return[0,a(U)*g*p(X/2)];var fe=b(X),Ae=k(g/R-R/g)/2,F=Ae*Ae,$=fe/(j+fe-1),ie=$*(2/j-1),de=ie*ie,xe=de+F,Le=$-de,Ne=F+$;return[a(R)*g*(Ae*Le+C(F*Le*Le-xe*($*$-de)))/xe,a(U)*g*(ie*Ne-Ae*C((F+1)*xe-Ne*Ne))/xe]}function Ei(){return(0,M.Z)(Ko).scale(79.4183)}function Yi(R,U){if(k(U)<c)return[R,0];var j=k(U/h),X=E(j);if(k(R)<c||k(k(U)-h)<c)return[0,a(U)*g*p(X/2)];var fe=b(X),Ae=k(g/R-R/g)/2,F=Ae*Ae,$=fe*(C(1+F)-Ae*fe)/(1+F*j*j);return[a(R)*g*$,a(U)*g*C(1-$*(2*Ae+$))]}function Tr(){return(0,M.Z)(Yi).scale(79.4183)}function Ar(R,U){if(k(U)<c)return[R,0];var j=U/h,X=E(j);if(k(R)<c||k(k(U)-h)<c)return[0,g*p(X/2)];var fe=(g/R-R/g)/2,Ae=j/(1+b(X));return[g*(a(R)*C(fe*fe+1-Ae*Ae)-fe),g*Ae]}function ls(){return(0,M.Z)(Ar).scale(79.4183)}function ia(R,U){if(!U)return[R,0];var j=k(U);if(!R||j===h)return[0,U];var X=j/h,fe=X*X,Ae=(8*X-fe*(fe+2)-5)/(2*fe*(X-1)),F=Ae*Ae,$=X*Ae,ie=fe+F+2*$,de=X+3*Ae,xe=R/h,Le=xe+1/xe,Ne=a(k(R)-h)*C(Le*Le-4),Ue=Ne*Ne,qe=(Ne*(ie+F-1)+2*C(ie*(fe+F*Ue-1)+(1-fe)*(fe*(de*de+4*F)+12*$*F+4*F*F)))/(4*ie+Ue);return[a(R)*h*qe,a(U)*h*C(1+Ne*k(qe)-qe*qe)]}function Po(){return(0,M.Z)(ia).scale(127.16)}function Wi(R,U,j,X){var fe=g/3;R=i(R,c),U=i(U,c),R=r(R,h),U=r(U,g-c),j=i(j,0),j=r(j,100-c);var Ae=(X=i(X,c))/100,F=L((j/100+1)*b(fe))/fe,$=u(R)/u(F*h),ie=U/g,de=C(Ae*u(R/2)/u(U/2));return function(xe,Le,Ne,Ue,qe){function Ye($e,lt){var pt=Ne*u(Ue*lt),Et=C(1-pt*pt),Ct=C(2/(1+Et*b($e*=qe)));return[xe*Et*Ct*u($e),Le*pt*Ct]}return Ye.invert=function($e,lt){var pt=$e/xe,Et=lt/Le,Ct=C(pt*pt+Et*Et),St=2*E(Ct/2);return[T($e*p(St),xe*Ct)/qe,Ct&&E(lt*u(St)/(Le*Ne*Ct))/Ue]},Ye}(de/C(ie*$*F),1/(de*C(ie*$*F)),$,F,ie)}function us(){var R=65*w,U=60*w,j=20,X=200,fe=(0,M.r)(Wi),Ae=fe(R,U,j,X);return Ae.poleline=function(F){return arguments.length?fe(R=+F*w,U,j,X):R*S},Ae.parallels=function(F){return arguments.length?fe(R,U=+F*w,j,X):U*S},Ae.inflation=function(F){return arguments.length?fe(R,U,j=+F,X):j},Ae.ratio=function(F){return arguments.length?fe(R,U,j,X=+F):X},Ae.scale(163.775)}function Xi(){return us().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}Ja.invert=function(R,U){var j=U/1.70711,X=u(y*j);return[R/(.74482-.34588*X*X),2*l(j)]},Ko.invert=function(R,U){if(k(U)<c)return[R,0];if(k(R)<c)return[0,h*u(2*l(U/g))];var j=(R/=g)*R,X=(U/=g)*U,fe=j+X,Ae=fe*fe,F=-k(U)*(1+fe),$=F-2*X+j,ie=-2*F+1+2*X+Ae,de=X/ie+(2*$*$*$/(ie*ie*ie)-9*F*$/(ie*ie))/27,xe=(F-$*$/(3*ie))/ie,Le=2*C(-xe/3),Ne=L(3*de/(xe*Le))/3;return[g*(fe-1+C(1+2*(j-X)+Ae))/(2*R),a(U)*g*(-Le*b(Ne+g/3)-$/(3*ie))]},Yi.invert=function(R,U){if(!R)return[0,h*u(2*l(U/g))];var j=k(R/g),X=(1-j*j-(U/=g)*U)/(2*j),fe=C(X*X+1);return[a(R)*g*(fe-X),a(U)*h*u(2*T(C((1-2*X*j)*(X+fe)-j),C(fe+X+j)))]},Ar.invert=function(R,U){if(!U)return[R,0];var j=U/g,X=(g*g*(1-j*j)-R*R)/(2*g*R);return[R?g*(a(R)*C(X*X+1)-X):0,h*u(2*l(j))]},ia.invert=function(R,U){var j;if(!R||!U)return[R,U];U/=g;var X=a(R)*R/h,fe=(X*X-1+4*U*U)/k(X),Ae=fe*fe,F=2*U,$=50;do{var ie=F*F,de=(8*F-ie*(ie+2)-5)/(2*ie*(F-1)),xe=(3*F-ie*F-10)/(2*ie*F),Le=de*de,Ne=F*de,Ue=F+de,qe=Ue*Ue,Ye=F+3*de,$e=-2*Ue*(4*Ne*Le+(1-4*ie+3*ie*ie)*(1+xe)+Le*(14*ie-6-Ae+(8*ie-8-2*Ae)*xe)+Ne*(12*ie-8+(10*ie-10-Ae)*xe)),lt=C(qe*(ie+Le*Ae-1)+(1-ie)*(ie*(Ye*Ye+4*Le)+Le*(12*Ne+4*Le)));F-=j=(fe*(qe+Le-1)+2*lt-X*(4*qe+Ae))/(fe*(2*de*xe+2*Ue*(1+xe))+$e/lt-8*Ue*(fe*(-1+Le+qe)+2*lt)*(1+xe)/(Ae+4*qe))}while(j>c&&--$>0);return[a(R)*(C(fe*fe+4)+fe)*g/4,h*F]};var Oo=4*g+3*C(3),Io=2*C(2*g*C(3)/Oo),Cr=Te(Io*C(3)/g,Io,Oo/6);function zi(){return(0,M.Z)(Cr).scale(176.84)}function $a(R,U){return[R*C(1-3*U*U/(g*g)),U]}function da(){return(0,M.Z)($a).scale(152.63)}function $o(R,U){var j=b(U),X=b(R)*j,fe=1-X,Ae=b(R=T(u(R)*j,-u(U))),F=u(R);return[F*(j=C(1-X*X))-Ae*fe,-Ae*j-F*fe]}function cs(){return(0,M.Z)($o).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function Qo(R,U){var j=H(R,U);return[(j[0]+R/h)/2,(j[1]+U)/2]}function po(){return(0,M.Z)(Qo).scale(158.837)}$a.invert=function(R,U){return[R/C(1-3*U*U/(g*g)),U]},$o.invert=function(R,U){var j=(R*R+U*U)/-2,X=C(-j*(2+j)),fe=U*j+R*X,Ae=R*j-U*X,F=C(Ae*Ae+fe*fe);return[T(X*fe,F*(1+j)),F?-E(X*Ae/F):0]},Qo.invert=function(R,U){var j=R,X=U,fe=25;do{var Ae,F=b(X),$=u(X),ie=u(2*X),de=$*$,xe=F*F,Le=u(j),Ne=b(j/2),Ue=u(j/2),qe=Ue*Ue,Ye=1-xe*Ne*Ne,$e=Ye?L(F*Ne)*C(Ae=1/Ye):Ae=0,lt=.5*(2*$e*F*Ue+j/h)-R,pt=.5*($e*$+X)-U,Et=.5*Ae*(xe*qe+$e*F*Ne*de)+.5/h,Ct=Ae*(Le*ie/4-$e*$*Ue),St=.125*Ae*(ie*Ue-$e*$*xe*Le),Ft=.5*Ae*(de*Ne+$e*qe*F)+.5,Lt=Ct*St-Ft*Et,tn=(pt*Ct-lt*Ft)/Lt,Zt=(lt*St-pt*Et)/Lt;j-=tn,X-=Zt}while((k(tn)>c||k(Zt)>c)&&--fe>0);return[j,X]}},33940:function(ee,D,e){function M(){return new k}function k(){this.reset()}e.d(D,{Z:function(){return M}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(b){T(l,b,this.t),T(this,l.s,this.s),this.s?this.t+=l.t:this.s=l.t},valueOf:function(){return this.s}};var l=new k;function T(b,d,s){var t=b.s=d+s,i=t-d,r=t-i;b.t=d-r+(s-i)}},97860:function(ee,D,e){e.d(D,{L9:function(){return r},ZP:function(){return x},gL:function(){return o}});var M,k,l,T,b,d=e(33940),s=e(39695),t=e(73182),i=e(72736),r=(0,d.Z)(),n=(0,d.Z)(),o={point:t.Z,lineStart:t.Z,lineEnd:t.Z,polygonStart:function(){r.reset(),o.lineStart=a,o.lineEnd=u},polygonEnd:function(){var g=+r;n.add(g<0?s.BZ+g:g),this.lineStart=this.lineEnd=this.point=t.Z},sphere:function(){n.add(s.BZ)}};function a(){o.point=p}function u(){c(M,k)}function p(g,h){o.point=c,M=g,k=h,g*=s.uR,h*=s.uR,l=g,T=(0,s.mC)(h=h/2+s.pu),b=(0,s.O$)(h)}function c(g,h){g*=s.uR,h=(h*=s.uR)/2+s.pu;var y=g-l,v=y>=0?1:-1,m=v*y,_=(0,s.mC)(h),f=(0,s.O$)(h),S=b*f,w=T*_+S*(0,s.mC)(m),E=S*v*(0,s.O$)(m);r.add((0,s.fv)(E,w)),l=g,T=_,b=f}function x(g){return n.reset(),(0,i.Z)(g,o),2*n}},77338:function(ee,D,e){e.d(D,{Z:function(){return L}});var M,k,l,T,b,d,s,t,i,r,n=e(33940),o=e(97860),a=e(7620),u=e(39695),p=e(72736),c=(0,n.Z)(),x={point:g,lineStart:y,lineEnd:v,polygonStart:function(){x.point=m,x.lineStart=_,x.lineEnd=f,c.reset(),o.gL.polygonStart()},polygonEnd:function(){o.gL.polygonEnd(),x.point=g,x.lineStart=y,x.lineEnd=v,o.L9<0?(M=-(l=180),k=-(T=90)):c>u.Ho?T=90:c<-u.Ho&&(k=-90),r[0]=M,r[1]=l},sphere:function(){M=-(l=180),k=-(T=90)}};function g(C,P){i.push(r=[M=C,l=C]),P<k&&(k=P),P>T&&(T=P)}function h(C,P){var z=(0,a.Og)([C*u.uR,P*u.uR]);if(t){var G=(0,a.T5)(t,z),O=[G[1],-G[0],0],H=(0,a.T5)(O,G);(0,a.iJ)(H),H=(0,a.Y1)(H);var N,B=C-b,V=B>0?1:-1,q=H[0]*u.RW*V,te=(0,u.Wn)(B)>180;te^(V*b<q&&q<V*C)?(N=H[1]*u.RW)>T&&(T=N):te^(V*b<(q=(q+360)%360-180)&&q<V*C)?(N=-H[1]*u.RW)<k&&(k=N):(P<k&&(k=P),P>T&&(T=P)),te?C<b?S(M,C)>S(M,l)&&(l=C):S(C,l)>S(M,l)&&(M=C):l>=M?(C<M&&(M=C),C>l&&(l=C)):C>b?S(M,C)>S(M,l)&&(l=C):S(C,l)>S(M,l)&&(M=C)}else i.push(r=[M=C,l=C]);P<k&&(k=P),P>T&&(T=P),t=z,b=C}function y(){x.point=h}function v(){r[0]=M,r[1]=l,x.point=g,t=null}function m(C,P){if(t){var z=C-b;c.add((0,u.Wn)(z)>180?z+(z>0?360:-360):z)}else d=C,s=P;o.gL.point(C,P),h(C,P)}function _(){o.gL.lineStart()}function f(){m(d,s),o.gL.lineEnd(),(0,u.Wn)(c)>u.Ho&&(M=-(l=180)),r[0]=M,r[1]=l,t=null}function S(C,P){return(P-=C)<0?P+360:P}function w(C,P){return C[0]-P[0]}function E(C,P){return C[0]<=C[1]?C[0]<=P&&P<=C[1]:P<C[0]||C[1]<P}function L(C){var P,z,G,O,H,N,B;if(T=l=-(M=k=1/0),i=[],(0,p.Z)(C,x),z=i.length){for(i.sort(w),P=1,H=[G=i[0]];P<z;++P)E(G,(O=i[P])[0])||E(G,O[1])?(S(G[0],O[1])>S(G[0],G[1])&&(G[1]=O[1]),S(O[0],G[1])>S(G[0],G[1])&&(G[0]=O[0])):H.push(G=O);for(N=-1/0,P=0,G=H[z=H.length-1];P<=z;G=O,++P)O=H[P],(B=S(G[1],O[0]))>N&&(N=B,M=O[0],l=G[1])}return i=r=null,M===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[M,k],[l,T]]}},7620:function(ee,D,e){e.d(D,{Og:function(){return l},T:function(){return s},T5:function(){return b},Y1:function(){return k},iJ:function(){return t},j9:function(){return T},s0:function(){return d}});var M=e(39695);function k(i){return[(0,M.fv)(i[1],i[0]),(0,M.ZR)(i[2])]}function l(i){var r=i[0],n=i[1],o=(0,M.mC)(n);return[o*(0,M.mC)(r),o*(0,M.O$)(r),(0,M.O$)(n)]}function T(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]}function b(i,r){return[i[1]*r[2]-i[2]*r[1],i[2]*r[0]-i[0]*r[2],i[0]*r[1]-i[1]*r[0]]}function d(i,r){i[0]+=r[0],i[1]+=r[1],i[2]+=r[2]}function s(i,r){return[i[0]*r,i[1]*r,i[2]*r]}function t(i){var r=(0,M._b)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=r,i[1]/=r,i[2]/=r}},66624:function(ee,D,e){e.d(D,{Z:function(){return z}});var M,k,l,T,b,d,s,t,i,r,n,o,a,u,p,c,x=e(39695),g=e(73182),h=e(72736),y={sphere:g.Z,point:v,lineStart:_,lineEnd:w,polygonStart:function(){y.lineStart=E,y.lineEnd=L},polygonEnd:function(){y.lineStart=_,y.lineEnd=w}};function v(G,O){G*=x.uR,O*=x.uR;var H=(0,x.mC)(O);m(H*(0,x.mC)(G),H*(0,x.O$)(G),(0,x.O$)(O))}function m(G,O,H){++M,l+=(G-l)/M,T+=(O-T)/M,b+=(H-b)/M}function _(){y.point=f}function f(G,O){G*=x.uR,O*=x.uR;var H=(0,x.mC)(O);u=H*(0,x.mC)(G),p=H*(0,x.O$)(G),c=(0,x.O$)(O),y.point=S,m(u,p,c)}function S(G,O){G*=x.uR,O*=x.uR;var H=(0,x.mC)(O),N=H*(0,x.mC)(G),B=H*(0,x.O$)(G),V=(0,x.O$)(O),q=(0,x.fv)((0,x._b)((q=p*V-c*B)*q+(q=c*N-u*V)*q+(q=u*B-p*N)*q),u*N+p*B+c*V);k+=q,d+=q*(u+(u=N)),s+=q*(p+(p=B)),t+=q*(c+(c=V)),m(u,p,c)}function w(){y.point=v}function E(){y.point=C}function L(){P(o,a),y.point=v}function C(G,O){o=G,a=O,G*=x.uR,O*=x.uR,y.point=P;var H=(0,x.mC)(O);u=H*(0,x.mC)(G),p=H*(0,x.O$)(G),c=(0,x.O$)(O),m(u,p,c)}function P(G,O){G*=x.uR,O*=x.uR;var H=(0,x.mC)(O),N=H*(0,x.mC)(G),B=H*(0,x.O$)(G),V=(0,x.O$)(O),q=p*V-c*B,te=c*N-u*V,K=u*B-p*N,J=(0,x._b)(q*q+te*te+K*K),Y=(0,x.ZR)(J),W=J&&-Y/J;i+=W*q,r+=W*te,n+=W*K,k+=Y,d+=Y*(u+(u=N)),s+=Y*(p+(p=B)),t+=Y*(c+(c=V)),m(u,p,c)}function z(G){M=k=l=T=b=d=s=t=i=r=n=0,(0,h.Z)(G,y);var O=i,H=r,N=n,B=O*O+H*H+N*N;return B<x.aW&&(O=d,H=s,N=t,k<x.Ho&&(O=l,H=T,N=b),(B=O*O+H*H+N*N)<x.aW)?[NaN,NaN]:[(0,x.fv)(H,O)*x.RW,(0,x.ZR)(N/(0,x._b)(B))*x.RW]}},7613:function(ee,D,e){e.d(D,{m:function(){return b},Z:function(){return s}});var M=e(7620);function k(t){return function(){return t}}var l=e(39695),T=e(49386);function b(t,i,r,n,o,a){if(r){var u=(0,l.mC)(i),p=(0,l.O$)(i),c=n*r;o==null?(o=i+n*l.BZ,a=i-c/2):(o=d(u,o),a=d(u,a),(n>0?o<a:o>a)&&(o+=n*l.BZ));for(var x,g=o;n>0?g>a:g<a;g-=c)x=(0,M.Y1)([u,-p*(0,l.mC)(g),-p*(0,l.O$)(g)]),t.point(x[0],x[1])}}function d(t,i){(i=(0,M.Og)(i))[0]-=t,(0,M.iJ)(i);var r=(0,l.Kh)(-i[1]);return((-i[2]<0?-r:r)+l.BZ-l.Ho)%l.BZ}function s(){var t,i,r=k([0,0]),n=k(90),o=k(6),a={point:function(p,c){t.push(p=i(p,c)),p[0]*=l.RW,p[1]*=l.RW}};function u(){var p=r.apply(this,arguments),c=n.apply(this,arguments)*l.uR,x=o.apply(this,arguments)*l.uR;return t=[],i=(0,T.I)(-p[0]*l.uR,-p[1]*l.uR,0).invert,b(a,c,x,1),p={type:"Polygon",coordinates:[t]},t=i=null,p}return u.center=function(p){return arguments.length?(r=typeof p=="function"?p:k([+p[0],+p[1]]),u):r},u.radius=function(p){return arguments.length?(n=typeof p=="function"?p:k(+p),u):n},u.precision=function(p){return arguments.length?(o=typeof p=="function"?p:k(+p),u):o},u}},87070:function(ee,D,e){var M=e(97023),k=e(39695);D.Z=(0,M.Z)(function(){return!0},function(l){var T,b=NaN,d=NaN,s=NaN;return{lineStart:function(){l.lineStart(),T=1},point:function(t,i){var r=t>0?k.pi:-k.pi,n=(0,k.Wn)(t-b);(0,k.Wn)(n-k.pi)<k.Ho?(l.point(b,d=(d+i)/2>0?k.ou:-k.ou),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),l.point(t,d),T=0):s!==r&&n>=k.pi&&((0,k.Wn)(b-s)<k.Ho&&(b-=s*k.Ho),(0,k.Wn)(t-r)<k.Ho&&(t-=r*k.Ho),d=function(o,a,u,p){var c,x,g=(0,k.O$)(o-u);return(0,k.Wn)(g)>k.Ho?(0,k.z4)(((0,k.O$)(a)*(x=(0,k.mC)(p))*(0,k.O$)(u)-(0,k.O$)(p)*(c=(0,k.mC)(a))*(0,k.O$)(o))/(c*x*g)):(a+p)/2}(b,d,t,i),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),T=0),l.point(b=t,d=i),s=r},lineEnd:function(){l.lineEnd(),b=d=NaN},clean:function(){return 2-T}}},function(l,T,b,d){var s;if(l==null)s=b*k.ou,d.point(-k.pi,s),d.point(0,s),d.point(k.pi,s),d.point(k.pi,0),d.point(k.pi,-s),d.point(0,-s),d.point(-k.pi,-s),d.point(-k.pi,0),d.point(-k.pi,s);else if((0,k.Wn)(l[0]-T[0])>k.Ho){var t=l[0]<T[0]?k.pi:-k.pi;s=b*t/2,d.point(-t,s),d.point(0,s),d.point(t,s)}else d.point(T[0],T[1])},[-k.pi,-k.ou])},85272:function(ee,D,e){e.d(D,{Z:function(){return k}});var M=e(73182);function k(){var l,T=[];return{point:function(b,d,s){l.push([b,d,s])},lineStart:function(){T.push(l=[])},lineEnd:M.Z,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var b=T;return T=[],l=null,b}}}},1457:function(ee,D,e){e.d(D,{Z:function(){return d}});var M=e(7620),k=e(7613),l=e(39695),T=e(67108),b=e(97023);function d(s){var t=(0,l.mC)(s),i=6*l.uR,r=t>0,n=(0,l.Wn)(t)>l.Ho;function o(p,c){return(0,l.mC)(p)*(0,l.mC)(c)>t}function a(p,c,x){var g=(0,M.Og)(p),h=(0,M.Og)(c),y=[1,0,0],v=(0,M.T5)(g,h),m=(0,M.j9)(v,v),_=v[0],f=m-_*_;if(!f)return!x&&p;var S=t*m/f,w=-t*_/f,E=(0,M.T5)(y,v),L=(0,M.T)(y,S),C=(0,M.T)(v,w);(0,M.s0)(L,C);var P=E,z=(0,M.j9)(L,P),G=(0,M.j9)(P,P),O=z*z-G*((0,M.j9)(L,L)-1);if(!(O<0)){var H=(0,l._b)(O),N=(0,M.T)(P,(-z-H)/G);if((0,M.s0)(N,L),N=(0,M.Y1)(N),!x)return N;var B,V=p[0],q=c[0],te=p[1],K=c[1];q<V&&(B=V,V=q,q=B);var J=q-V,Y=(0,l.Wn)(J-l.pi)<l.Ho;if(!Y&&K<te&&(B=te,te=K,K=B),Y||J<l.Ho?Y?te+K>0^N[1]<((0,l.Wn)(N[0]-V)<l.Ho?te:K):te<=N[1]&&N[1]<=K:J>l.pi^(V<=N[0]&&N[0]<=q)){var W=(0,M.T)(P,(-z+H)/G);return(0,M.s0)(W,L),[N,(0,M.Y1)(W)]}}}function u(p,c){var x=r?s:l.pi-s,g=0;return p<-x?g|=1:p>x&&(g|=2),c<-x?g|=4:c>x&&(g|=8),g}return(0,b.Z)(o,function(p){var c,x,g,h,y;return{lineStart:function(){h=g=!1,y=1},point:function(v,m){var _,f=[v,m],S=o(v,m),w=r?S?0:u(v,m):S?u(v+(v<0?l.pi:-l.pi),m):0;if(!c&&(h=g=S)&&p.lineStart(),S!==g&&(!(_=a(c,f))||(0,T.Z)(c,_)||(0,T.Z)(f,_))&&(f[2]=1),S!==g)y=0,S?(p.lineStart(),_=a(f,c),p.point(_[0],_[1])):(_=a(c,f),p.point(_[0],_[1],2),p.lineEnd()),c=_;else if(n&&c&&r^S){var E;w&x||!(E=a(f,c,!0))||(y=0,r?(p.lineStart(),p.point(E[0][0],E[0][1]),p.point(E[1][0],E[1][1]),p.lineEnd()):(p.point(E[1][0],E[1][1]),p.lineEnd(),p.lineStart(),p.point(E[0][0],E[0][1],3)))}!S||c&&(0,T.Z)(c,f)||p.point(f[0],f[1]),c=f,g=S,x=w},lineEnd:function(){g&&p.lineEnd(),c=null},clean:function(){return y|(h&&g)<<1}}},function(p,c,x,g){(0,k.m)(g,s,i,x,p,c)},r?[0,-s]:[-l.pi,s-l.pi])}},97023:function(ee,D,e){e.d(D,{Z:function(){return d}});var M=e(85272),k=e(46225),l=e(39695),T=e(23071),b=e(33064);function d(i,r,n,o){return function(a){var u,p,c,x=r(a),g=(0,M.Z)(),h=r(g),y=!1,v={point:m,lineStart:f,lineEnd:S,polygonStart:function(){v.point=w,v.lineStart=E,v.lineEnd=L,p=[],u=[]},polygonEnd:function(){v.point=m,v.lineStart=f,v.lineEnd=S,p=(0,b.TS)(p);var C=(0,T.Z)(u,o);p.length?(y||(a.polygonStart(),y=!0),(0,k.Z)(p,t,C,n,a)):C&&(y||(a.polygonStart(),y=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),y&&(a.polygonEnd(),y=!1),p=u=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function m(C,P){i(C,P)&&a.point(C,P)}function _(C,P){x.point(C,P)}function f(){v.point=_,x.lineStart()}function S(){v.point=m,x.lineEnd()}function w(C,P){c.push([C,P]),h.point(C,P)}function E(){h.lineStart(),c=[]}function L(){w(c[0][0],c[0][1]),h.lineEnd();var C,P,z,G,O=h.clean(),H=g.result(),N=H.length;if(c.pop(),u.push(c),c=null,N)if(1&O){if((P=(z=H[0]).length-1)>0){for(y||(a.polygonStart(),y=!0),a.lineStart(),C=0;C<P;++C)a.point((G=z[C])[0],G[1]);a.lineEnd()}}else N>1&&2&O&&H.push(H.pop().concat(H.shift())),p.push(H.filter(s))}return v}}function s(i){return i.length>1}function t(i,r){return((i=i.x)[0]<0?i[1]-l.ou-l.Ho:l.ou-i[1])-((r=r.x)[0]<0?r[1]-l.ou-l.Ho:l.ou-r[1])}},87605:function(ee,D,e){e.d(D,{Z:function(){return s}});var M=e(39695),k=e(85272),l=e(46225),T=e(33064),b=1e9,d=-b;function s(t,i,r,n){function o(x,g){return t<=x&&x<=r&&i<=g&&g<=n}function a(x,g,h,y){var v=0,m=0;if(x==null||(v=u(x,h))!==(m=u(g,h))||c(x,g)<0^h>0)do y.point(v===0||v===3?t:r,v>1?n:i);while((v=(v+h+4)%4)!==m);else y.point(g[0],g[1])}function u(x,g){return(0,M.Wn)(x[0]-t)<M.Ho?g>0?0:3:(0,M.Wn)(x[0]-r)<M.Ho?g>0?2:1:(0,M.Wn)(x[1]-i)<M.Ho?g>0?1:0:g>0?3:2}function p(x,g){return c(x.x,g.x)}function c(x,g){var h=u(x,1),y=u(g,1);return h!==y?h-y:h===0?g[1]-x[1]:h===1?x[0]-g[0]:h===2?x[1]-g[1]:g[0]-x[0]}return function(x){var g,h,y,v,m,_,f,S,w,E,L,C=x,P=(0,k.Z)(),z={point:G,lineStart:function(){z.point=O,h&&h.push(y=[]),E=!0,w=!1,f=S=NaN},lineEnd:function(){g&&(O(v,m),_&&w&&P.rejoin(),g.push(P.result())),z.point=G,w&&C.lineEnd()},polygonStart:function(){C=P,g=[],h=[],L=!0},polygonEnd:function(){var H=function(){for(var V=0,q=0,te=h.length;q<te;++q)for(var K,J,Y=h[q],W=1,Q=Y.length,ne=Y[0],re=ne[0],ae=ne[1];W<Q;++W)K=re,J=ae,re=(ne=Y[W])[0],ae=ne[1],J<=n?ae>n&&(re-K)*(n-J)>(ae-J)*(t-K)&&++V:ae<=n&&(re-K)*(n-J)<(ae-J)*(t-K)&&--V;return V}(),N=L&&H,B=(g=(0,T.TS)(g)).length;(N||B)&&(x.polygonStart(),N&&(x.lineStart(),a(null,null,1,x),x.lineEnd()),B&&(0,l.Z)(g,p,H,a,x),x.polygonEnd()),C=x,g=h=y=null}};function G(H,N){o(H,N)&&C.point(H,N)}function O(H,N){var B=o(H,N);if(h&&y.push([H,N]),E)v=H,m=N,_=B,E=!1,B&&(C.lineStart(),C.point(H,N));else if(B&&w)C.point(H,N);else{var V=[f=Math.max(d,Math.min(b,f)),S=Math.max(d,Math.min(b,S))],q=[H=Math.max(d,Math.min(b,H)),N=Math.max(d,Math.min(b,N))];(function(te,K,J,Y,W,Q){var ne,re=te[0],ae=te[1],ue=0,pe=1,ge=K[0]-re,_e=K[1]-ae;if(ne=J-re,ge||!(ne>0)){if(ne/=ge,ge<0){if(ne<ue)return;ne<pe&&(pe=ne)}else if(ge>0){if(ne>pe)return;ne>ue&&(ue=ne)}if(ne=W-re,ge||!(ne<0)){if(ne/=ge,ge<0){if(ne>pe)return;ne>ue&&(ue=ne)}else if(ge>0){if(ne<ue)return;ne<pe&&(pe=ne)}if(ne=Y-ae,_e||!(ne>0)){if(ne/=_e,_e<0){if(ne<ue)return;ne<pe&&(pe=ne)}else if(_e>0){if(ne>pe)return;ne>ue&&(ue=ne)}if(ne=Q-ae,_e||!(ne<0)){if(ne/=_e,_e<0){if(ne>pe)return;ne>ue&&(ue=ne)}else if(_e>0){if(ne<ue)return;ne<pe&&(pe=ne)}return ue>0&&(te[0]=re+ue*ge,te[1]=ae+ue*_e),pe<1&&(K[0]=re+pe*ge,K[1]=ae+pe*_e),!0}}}}})(V,q,t,i,r,n)?(w||(C.lineStart(),C.point(V[0],V[1])),C.point(q[0],q[1]),B||C.lineEnd(),L=!1):B&&(C.lineStart(),C.point(H,N),L=!1)}f=H,S=N,w=B}return z}}},46225:function(ee,D,e){e.d(D,{Z:function(){return T}});var M=e(67108),k=e(39695);function l(d,s,t,i){this.x=d,this.z=s,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function T(d,s,t,i,r){var n,o,a=[],u=[];if(d.forEach(function(y){if(!((v=y.length-1)<=0)){var v,m,_=y[0],f=y[v];if((0,M.Z)(_,f)){if(!_[2]&&!f[2]){for(r.lineStart(),n=0;n<v;++n)r.point((_=y[n])[0],_[1]);return void r.lineEnd()}f[0]+=2*k.Ho}a.push(m=new l(_,y,null,!0)),u.push(m.o=new l(_,null,m,!1)),a.push(m=new l(f,y,null,!1)),u.push(m.o=new l(f,null,m,!0))}}),a.length){for(u.sort(s),b(a),b(u),n=0,o=u.length;n<o;++n)u[n].e=t=!t;for(var p,c,x=a[0];;){for(var g=x,h=!0;g.v;)if((g=g.n)===x)return;p=g.z,r.lineStart();do{if(g.v=g.o.v=!0,g.e){if(h)for(n=0,o=p.length;n<o;++n)r.point((c=p[n])[0],c[1]);else i(g.x,g.n.x,1,r);g=g.n}else{if(h)for(p=g.p.z,n=p.length-1;n>=0;--n)r.point((c=p[n])[0],c[1]);else i(g.x,g.p.x,-1,r);g=g.p}p=(g=g.o).z,h=!h}while(!g.v);r.lineEnd()}}}function b(d){if(s=d.length){for(var s,t,i=0,r=d[0];++i<s;)r.n=t=d[i],t.p=r,r=t;r.n=t=d[0],t.p=r}}},96059:function(ee,D,e){function M(k,l){function T(b,d){return b=k(b,d),l(b[0],b[1])}return k.invert&&l.invert&&(T.invert=function(b,d){return(b=l.invert(b,d))&&k.invert(b[0],b[1])}),T}e.d(D,{Z:function(){return M}})},8593:function(ee,D,e){function M(k){return k}e.d(D,{Z:function(){return M}})},27362:function(ee,D,e){e.r(D),e.d(D,{geoAlbers:function(){return gt},geoAlbersUsa:function(){return wt},geoArea:function(){return M.ZP},geoAzimuthalEqualArea:function(){return ct.Z},geoAzimuthalEqualAreaRaw:function(){return ct.l},geoAzimuthalEquidistant:function(){return ft.Z},geoAzimuthalEquidistantRaw:function(){return ft.N},geoBounds:function(){return k.Z},geoCentroid:function(){return l.Z},geoCircle:function(){return T.Z},geoClipAntimeridian:function(){return b.Z},geoClipCircle:function(){return d.Z},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.Z},geoConicConformal:function(){return Ut},geoConicConformalRaw:function(){return jt},geoConicEqualArea:function(){return ht},geoConicEqualAreaRaw:function(){return dt},geoConicEquidistant:function(){return Mn},geoConicEquidistantRaw:function(){return gn},geoContains:function(){return H},geoDistance:function(){return S},geoEqualEarth:function(){return bn},geoEqualEarthRaw:function(){return hn},geoEquirectangular:function(){return Xt.Z},geoEquirectangularRaw:function(){return Xt.k},geoGnomonic:function(){return yn.Z},geoGnomonicRaw:function(){return yn.M},geoGraticule:function(){return q},geoGraticule10:function(){return te},geoIdentity:function(){return pn},geoInterpolate:function(){return Q.Z},geoLength:function(){return m},geoMercator:function(){return Dt},geoMercatorRaw:function(){return It},geoNaturalEarth1:function(){return Cn.Z},geoNaturalEarth1Raw:function(){return Cn.K},geoOrthographic:function(){return Hn.Z},geoOrthographicRaw:function(){return Hn.I},geoPath:function(){return Be},geoProjection:function(){return nt.Z},geoProjectionMutator:function(){return nt.r},geoRotation:function(){return bt.Z},geoStereographic:function(){return Jn},geoStereographicRaw:function(){return nr},geoStream:function(){return c.Z},geoTransform:function(){return Sn.Z},geoTransverseMercator:function(){return lr},geoTransverseMercatorRaw:function(){return Gn}});var M=e(97860),k=e(77338),l=e(66624),T=e(7613),b=e(87070),d=e(1457),s=e(87605);function t(){var Rt,$t,an,fn=0,wn=0,Bn=960,Ln=500;return an={stream:function(In){return Rt&&$t===In?Rt:Rt=(0,s.Z)(fn,wn,Bn,Ln)($t=In)},extent:function(In){return arguments.length?(fn=+In[0][0],wn=+In[0][1],Bn=+In[1][0],Ln=+In[1][1],Rt=$t=null,an):[[fn,wn],[Bn,Ln]]}}}var i,r,n,o=e(23071),a=e(33940),u=e(39695),p=e(73182),c=e(72736),x=(0,a.Z)(),g={sphere:p.Z,point:p.Z,lineStart:function(){g.point=y,g.lineEnd=h},lineEnd:p.Z,polygonStart:p.Z,polygonEnd:p.Z};function h(){g.point=g.lineEnd=p.Z}function y(Rt,$t){Rt*=u.uR,$t*=u.uR,i=Rt,r=(0,u.O$)($t),n=(0,u.mC)($t),g.point=v}function v(Rt,$t){Rt*=u.uR,$t*=u.uR;var an=(0,u.O$)($t),fn=(0,u.mC)($t),wn=(0,u.Wn)(Rt-i),Bn=(0,u.mC)(wn),Ln=fn*(0,u.O$)(wn),In=n*an-r*fn*Bn,Wn=r*an+n*fn*Bn;x.add((0,u.fv)((0,u._b)(Ln*Ln+In*In),Wn)),i=Rt,r=an,n=fn}function m(Rt){return x.reset(),(0,c.Z)(Rt,g),+x}var _=[null,null],f={type:"LineString",coordinates:_};function S(Rt,$t){return _[0]=Rt,_[1]=$t,m(f)}var w={Feature:function(Rt,$t){return L(Rt.geometry,$t)},FeatureCollection:function(Rt,$t){for(var an=Rt.features,fn=-1,wn=an.length;++fn<wn;)if(L(an[fn].geometry,$t))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Rt,$t){return C(Rt.coordinates,$t)},MultiPoint:function(Rt,$t){for(var an=Rt.coordinates,fn=-1,wn=an.length;++fn<wn;)if(C(an[fn],$t))return!0;return!1},LineString:function(Rt,$t){return P(Rt.coordinates,$t)},MultiLineString:function(Rt,$t){for(var an=Rt.coordinates,fn=-1,wn=an.length;++fn<wn;)if(P(an[fn],$t))return!0;return!1},Polygon:function(Rt,$t){return z(Rt.coordinates,$t)},MultiPolygon:function(Rt,$t){for(var an=Rt.coordinates,fn=-1,wn=an.length;++fn<wn;)if(z(an[fn],$t))return!0;return!1},GeometryCollection:function(Rt,$t){for(var an=Rt.geometries,fn=-1,wn=an.length;++fn<wn;)if(L(an[fn],$t))return!0;return!1}};function L(Rt,$t){return!(!Rt||!E.hasOwnProperty(Rt.type))&&E[Rt.type](Rt,$t)}function C(Rt,$t){return S(Rt,$t)===0}function P(Rt,$t){for(var an,fn,wn,Bn=0,Ln=Rt.length;Bn<Ln;Bn++){if((fn=S(Rt[Bn],$t))===0||Bn>0&&(wn=S(Rt[Bn],Rt[Bn-1]))>0&&an<=wn&&fn<=wn&&(an+fn-wn)*(1-Math.pow((an-fn)/wn,2))<u.aW*wn)return!0;an=fn}return!1}function z(Rt,$t){return!!(0,o.Z)(Rt.map(G),O($t))}function G(Rt){return(Rt=Rt.map(O)).pop(),Rt}function O(Rt){return[Rt[0]*u.uR,Rt[1]*u.uR]}function H(Rt,$t){return(Rt&&w.hasOwnProperty(Rt.type)?w[Rt.type]:L)(Rt,$t)}var N=e(33064);function B(Rt,$t,an){var fn=(0,N.w6)(Rt,$t-u.Ho,an).concat($t);return function(wn){return fn.map(function(Bn){return[wn,Bn]})}}function V(Rt,$t,an){var fn=(0,N.w6)(Rt,$t-u.Ho,an).concat($t);return function(wn){return fn.map(function(Bn){return[Bn,wn]})}}function q(){var Rt,$t,an,fn,wn,Bn,Ln,In,Wn,Vt,_n,At,Gt=10,Jt=Gt,mn=90,xn=360,An=2.5;function ln(){return{type:"MultiLineString",coordinates:Yt()}}function Yt(){return(0,N.w6)((0,u.mD)(fn/mn)*mn,an,mn).map(_n).concat((0,N.w6)((0,u.mD)(In/xn)*xn,Ln,xn).map(At)).concat((0,N.w6)((0,u.mD)($t/Gt)*Gt,Rt,Gt).filter(function(Wt){return(0,u.Wn)(Wt%mn)>u.Ho}).map(Wn)).concat((0,N.w6)((0,u.mD)(Bn/Jt)*Jt,wn,Jt).filter(function(Wt){return(0,u.Wn)(Wt%xn)>u.Ho}).map(Vt))}return ln.lines=function(){return Yt().map(function(Wt){return{type:"LineString",coordinates:Wt}})},ln.outline=function(){return{type:"Polygon",coordinates:[_n(fn).concat(At(Ln).slice(1),_n(an).reverse().slice(1),At(In).reverse().slice(1))]}},ln.extent=function(Wt){return arguments.length?ln.extentMajor(Wt).extentMinor(Wt):ln.extentMinor()},ln.extentMajor=function(Wt){return arguments.length?(fn=+Wt[0][0],an=+Wt[1][0],In=+Wt[0][1],Ln=+Wt[1][1],fn>an&&(Wt=fn,fn=an,an=Wt),In>Ln&&(Wt=In,In=Ln,Ln=Wt),ln.precision(An)):[[fn,In],[an,Ln]]},ln.extentMinor=function(Wt){return arguments.length?($t=+Wt[0][0],Rt=+Wt[1][0],Bn=+Wt[0][1],wn=+Wt[1][1],$t>Rt&&(Wt=$t,$t=Rt,Rt=Wt),Bn>wn&&(Wt=Bn,Bn=wn,wn=Wt),ln.precision(An)):[[$t,Bn],[Rt,wn]]},ln.step=function(Wt){return arguments.length?ln.stepMajor(Wt).stepMinor(Wt):ln.stepMinor()},ln.stepMajor=function(Wt){return arguments.length?(mn=+Wt[0],xn=+Wt[1],ln):[mn,xn]},ln.stepMinor=function(Wt){return arguments.length?(Gt=+Wt[0],Jt=+Wt[1],ln):[Gt,Jt]},ln.precision=function(Wt){return arguments.length?(An=+Wt,Wn=B(Bn,wn,90),Vt=V($t,Rt,An),_n=B(In,Ln,90),At=V(fn,an,An),ln):An},ln.extentMajor([[-180,-90+u.Ho],[180,90-u.Ho]]).extentMinor([[-180,-80-u.Ho],[180,80+u.Ho]])}function te(){return q()()}var K,J,Y,W,Q=e(83074),ne=e(8593),re=(0,a.Z)(),ae=(0,a.Z)(),ue={point:p.Z,lineStart:p.Z,lineEnd:p.Z,polygonStart:function(){ue.lineStart=pe,ue.lineEnd=me},polygonEnd:function(){ue.lineStart=ue.lineEnd=ue.point=p.Z,re.add((0,u.Wn)(ae)),ae.reset()},result:function(){var Rt=re/2;return re.reset(),Rt}};function pe(){ue.point=ge}function ge(Rt,$t){ue.point=_e,K=Y=Rt,J=W=$t}function _e(Rt,$t){ae.add(W*Rt-Y*$t),Y=Rt,W=$t}function me(){_e(K,J)}var ve,Oe,Me,Te,se=ue,oe=e(3559),he=0,Ee=0,ke=0,be=0,Ie=0,Fe=0,ce=0,we=0,ye=0,Ce={point:Re,lineStart:ze,lineEnd:Je,polygonStart:function(){Ce.lineStart=ot,Ce.lineEnd=Qe},polygonEnd:function(){Ce.point=Re,Ce.lineStart=ze,Ce.lineEnd=Je},result:function(){var Rt=ye?[ce/ye,we/ye]:Fe?[be/Fe,Ie/Fe]:ke?[he/ke,Ee/ke]:[NaN,NaN];return he=Ee=ke=be=Ie=Fe=ce=we=ye=0,Rt}};function Re(Rt,$t){he+=Rt,Ee+=$t,++ke}function ze(){Ce.point=He}function He(Rt,$t){Ce.point=Ge,Re(Me=Rt,Te=$t)}function Ge(Rt,$t){var an=Rt-Me,fn=$t-Te,wn=(0,u._b)(an*an+fn*fn);be+=wn*(Me+Rt)/2,Ie+=wn*(Te+$t)/2,Fe+=wn,Re(Me=Rt,Te=$t)}function Je(){Ce.point=Re}function ot(){Ce.point=vt}function Qe(){xt(ve,Oe)}function vt(Rt,$t){Ce.point=xt,Re(ve=Me=Rt,Oe=Te=$t)}function xt(Rt,$t){var an=Rt-Me,fn=$t-Te,wn=(0,u._b)(an*an+fn*fn);be+=wn*(Me+Rt)/2,Ie+=wn*(Te+$t)/2,Fe+=wn,ce+=(wn=Te*Rt-Me*$t)*(Me+Rt),we+=wn*(Te+$t),ye+=3*wn,Re(Me=Rt,Te=$t)}var mt=Ce;function rt(Rt){this._context=Rt}rt.prototype={_radius:4.5,pointRadius:function(Rt){return this._radius=Rt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Rt,$t){switch(this._point){case 0:this._context.moveTo(Rt,$t),this._point=1;break;case 1:this._context.lineTo(Rt,$t);break;default:this._context.moveTo(Rt+this._radius,$t),this._context.arc(Rt,$t,this._radius,0,u.BZ)}},result:p.Z};var it,Tt,Mt,Pt,kt,Ze=(0,a.Z)(),Xe={point:p.Z,lineStart:function(){Xe.point=Ve},lineEnd:function(){it&&We(Tt,Mt),Xe.point=p.Z},polygonStart:function(){it=!0},polygonEnd:function(){it=null},result:function(){var Rt=+Ze;return Ze.reset(),Rt}};function Ve(Rt,$t){Xe.point=We,Tt=Pt=Rt,Mt=kt=$t}function We(Rt,$t){Pt-=Rt,kt-=$t,Ze.add((0,u._b)(Pt*Pt+kt*kt)),Pt=Rt,kt=$t}var at=Xe;function et(){this._string=[]}function De(Rt){return"m0,"+Rt+"a"+Rt+","+Rt+" 0 1,1 0,"+-2*Rt+"a"+Rt+","+Rt+" 0 1,1 0,"+2*Rt+"z"}function Be(Rt,$t){var an,fn,wn=4.5;function Bn(Ln){return Ln&&(typeof wn=="function"&&fn.pointRadius(+wn.apply(this,arguments)),(0,c.Z)(Ln,an(fn))),fn.result()}return Bn.area=function(Ln){return(0,c.Z)(Ln,an(se)),se.result()},Bn.measure=function(Ln){return(0,c.Z)(Ln,an(at)),at.result()},Bn.bounds=function(Ln){return(0,c.Z)(Ln,an(oe.Z)),oe.Z.result()},Bn.centroid=function(Ln){return(0,c.Z)(Ln,an(mt)),mt.result()},Bn.projection=function(Ln){return arguments.length?(an=Ln==null?(Rt=null,ne.Z):(Rt=Ln).stream,Bn):Rt},Bn.context=function(Ln){return arguments.length?(fn=Ln==null?($t=null,new et):new rt($t=Ln),typeof wn!="function"&&fn.pointRadius(wn),Bn):$t},Bn.pointRadius=function(Ln){return arguments.length?(wn=typeof Ln=="function"?Ln:(fn.pointRadius(+Ln),+Ln),Bn):wn},Bn.projection(Rt).context($t)}et.prototype={_radius:4.5,_circle:De(4.5),pointRadius:function(Rt){return(Rt=+Rt)!==this._radius&&(this._radius=Rt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Rt,$t){switch(this._point){case 0:this._string.push("M",Rt,",",$t),this._point=1;break;case 1:this._string.push("L",Rt,",",$t);break;default:this._circle==null&&(this._circle=De(this._radius)),this._string.push("M",Rt,",",$t,this._circle)}},result:function(){if(this._string.length){var Rt=this._string.join("");return this._string=[],Rt}return null}};var nt=e(15002);function tt(Rt){var $t=0,an=u.pi/3,fn=(0,nt.r)(Rt),wn=fn($t,an);return wn.parallels=function(Bn){return arguments.length?fn($t=Bn[0]*u.uR,an=Bn[1]*u.uR):[$t*u.RW,an*u.RW]},wn}function dt(Rt,$t){var an=(0,u.O$)(Rt),fn=(an+(0,u.O$)($t))/2;if((0,u.Wn)(fn)<u.Ho)return function(In){var Wn=(0,u.mC)(In);function Vt(_n,At){return[_n*Wn,(0,u.O$)(At)/Wn]}return Vt.invert=function(_n,At){return[_n/Wn,(0,u.ZR)(At*Wn)]},Vt}(Rt);var wn=1+an*(2*fn-an),Bn=(0,u._b)(wn)/fn;function Ln(In,Wn){var Vt=(0,u._b)(wn-2*fn*(0,u.O$)(Wn))/fn;return[Vt*(0,u.O$)(In*=fn),Bn-Vt*(0,u.mC)(In)]}return Ln.invert=function(In,Wn){var Vt=Bn-Wn,_n=(0,u.fv)(In,(0,u.Wn)(Vt))*(0,u.Xx)(Vt);return Vt*fn<0&&(_n-=u.pi*(0,u.Xx)(In)*(0,u.Xx)(Vt)),[_n/fn,(0,u.ZR)((wn-(In*In+Vt*Vt)*fn*fn)/(2*fn))]},Ln}function ht(){return tt(dt).scale(155.424).center([0,33.6442])}function gt(){return ht().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ut=e(47589);function wt(){var Rt,$t,an,fn,wn,Bn,Ln=gt(),In=ht().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Wn=ht().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Vt={point:function(Gt,Jt){Bn=[Gt,Jt]}};function _n(Gt){var Jt=Gt[0],mn=Gt[1];return Bn=null,an.point(Jt,mn),Bn||(fn.point(Jt,mn),Bn)||(wn.point(Jt,mn),Bn)}function At(){return Rt=$t=null,_n}return _n.invert=function(Gt){var Jt=Ln.scale(),mn=Ln.translate(),xn=(Gt[0]-mn[0])/Jt,An=(Gt[1]-mn[1])/Jt;return(An>=.12&&An<.234&&xn>=-.425&&xn<-.214?In:An>=.166&&An<.234&&xn>=-.214&&xn<-.115?Wn:Ln).invert(Gt)},_n.stream=function(Gt){return Rt&&$t===Gt?Rt:(Jt=[Ln.stream($t=Gt),In.stream(Gt),Wn.stream(Gt)],mn=Jt.length,Rt={point:function(xn,An){for(var ln=-1;++ln<mn;)Jt[ln].point(xn,An)},sphere:function(){for(var xn=-1;++xn<mn;)Jt[xn].sphere()},lineStart:function(){for(var xn=-1;++xn<mn;)Jt[xn].lineStart()},lineEnd:function(){for(var xn=-1;++xn<mn;)Jt[xn].lineEnd()},polygonStart:function(){for(var xn=-1;++xn<mn;)Jt[xn].polygonStart()},polygonEnd:function(){for(var xn=-1;++xn<mn;)Jt[xn].polygonEnd()}});var Jt,mn},_n.precision=function(Gt){return arguments.length?(Ln.precision(Gt),In.precision(Gt),Wn.precision(Gt),At()):Ln.precision()},_n.scale=function(Gt){return arguments.length?(Ln.scale(Gt),In.scale(.35*Gt),Wn.scale(Gt),_n.translate(Ln.translate())):Ln.scale()},_n.translate=function(Gt){if(!arguments.length)return Ln.translate();var Jt=Ln.scale(),mn=+Gt[0],xn=+Gt[1];return an=Ln.translate(Gt).clipExtent([[mn-.455*Jt,xn-.238*Jt],[mn+.455*Jt,xn+.238*Jt]]).stream(Vt),fn=In.translate([mn-.307*Jt,xn+.201*Jt]).clipExtent([[mn-.425*Jt+u.Ho,xn+.12*Jt+u.Ho],[mn-.214*Jt-u.Ho,xn+.234*Jt-u.Ho]]).stream(Vt),wn=Wn.translate([mn-.205*Jt,xn+.212*Jt]).clipExtent([[mn-.214*Jt+u.Ho,xn+.166*Jt+u.Ho],[mn-.115*Jt-u.Ho,xn+.234*Jt-u.Ho]]).stream(Vt),At()},_n.fitExtent=function(Gt,Jt){return(0,ut.qg)(_n,Gt,Jt)},_n.fitSize=function(Gt,Jt){return(0,ut.mF)(_n,Gt,Jt)},_n.fitWidth=function(Gt,Jt){return(0,ut.V6)(_n,Gt,Jt)},_n.fitHeight=function(Gt,Jt){return(0,ut.rf)(_n,Gt,Jt)},_n.scale(1070)}var ct=e(12956),ft=e(17889),bt=e(49386);function It(Rt,$t){return[Rt,(0,u.cM)((0,u.OR)((u.ou+$t)/2))]}function Dt(){return Nt(It).scale(961/u.BZ)}function Nt(Rt){var $t,an,fn,wn=(0,nt.Z)(Rt),Bn=wn.center,Ln=wn.scale,In=wn.translate,Wn=wn.clipExtent,Vt=null;function _n(){var At=u.pi*Ln(),Gt=wn((0,bt.Z)(wn.rotate()).invert([0,0]));return Wn(Vt==null?[[Gt[0]-At,Gt[1]-At],[Gt[0]+At,Gt[1]+At]]:Rt===It?[[Math.max(Gt[0]-At,Vt),$t],[Math.min(Gt[0]+At,an),fn]]:[[Vt,Math.max(Gt[1]-At,$t)],[an,Math.min(Gt[1]+At,fn)]])}return wn.scale=function(At){return arguments.length?(Ln(At),_n()):Ln()},wn.translate=function(At){return arguments.length?(In(At),_n()):In()},wn.center=function(At){return arguments.length?(Bn(At),_n()):Bn()},wn.clipExtent=function(At){return arguments.length?(At==null?Vt=$t=an=fn=null:(Vt=+At[0][0],$t=+At[0][1],an=+At[1][0],fn=+At[1][1]),_n()):Vt==null?null:[[Vt,$t],[an,fn]]},_n()}function Qt(Rt){return(0,u.OR)((u.ou+Rt)/2)}function jt(Rt,$t){var an=(0,u.mC)(Rt),fn=Rt===$t?(0,u.O$)(Rt):(0,u.cM)(an/(0,u.mC)($t))/(0,u.cM)(Qt($t)/Qt(Rt)),wn=an*(0,u.sQ)(Qt(Rt),fn)/fn;if(!fn)return It;function Bn(Ln,In){wn>0?In<-u.ou+u.Ho&&(In=-u.ou+u.Ho):In>u.ou-u.Ho&&(In=u.ou-u.Ho);var Wn=wn/(0,u.sQ)(Qt(In),fn);return[Wn*(0,u.O$)(fn*Ln),wn-Wn*(0,u.mC)(fn*Ln)]}return Bn.invert=function(Ln,In){var Wn=wn-In,Vt=(0,u.Xx)(fn)*(0,u._b)(Ln*Ln+Wn*Wn),_n=(0,u.fv)(Ln,(0,u.Wn)(Wn))*(0,u.Xx)(Wn);return Wn*fn<0&&(_n-=u.pi*(0,u.Xx)(Ln)*(0,u.Xx)(Wn)),[_n/fn,2*(0,u.z4)((0,u.sQ)(wn/Vt,1/fn))-u.ou]},Bn}function Ut(){return tt(jt).scale(109.5).parallels([30,30])}It.invert=function(Rt,$t){return[Rt,2*(0,u.z4)((0,u.Qq)($t))-u.ou]};var Xt=e(97492);function gn(Rt,$t){var an=(0,u.mC)(Rt),fn=Rt===$t?(0,u.O$)(Rt):(an-(0,u.mC)($t))/($t-Rt),wn=an/fn+Rt;if((0,u.Wn)(fn)<u.Ho)return Xt.k;function Bn(Ln,In){var Wn=wn-In,Vt=fn*Ln;return[Wn*(0,u.O$)(Vt),wn-Wn*(0,u.mC)(Vt)]}return Bn.invert=function(Ln,In){var Wn=wn-In,Vt=(0,u.fv)(Ln,(0,u.Wn)(Wn))*(0,u.Xx)(Wn);return Wn*fn<0&&(Vt-=u.pi*(0,u.Xx)(Ln)*(0,u.Xx)(Wn)),[Vt/fn,wn-(0,u.Xx)(fn)*(0,u._b)(Ln*Ln+Wn*Wn)]},Bn}function Mn(){return tt(gn).scale(131.154).center([0,13.9389])}var cn=1.340264,qt=-.081106,nn=893e-6,Kt=.003796,sn=(0,u._b)(3)/2;function hn(Rt,$t){var an=(0,u.ZR)(sn*(0,u.O$)($t)),fn=an*an,wn=fn*fn*fn;return[Rt*(0,u.mC)(an)/(sn*(cn+3*qt*fn+wn*(7*nn+9*Kt*fn))),an*(cn+qt*fn+wn*(nn+Kt*fn))]}function bn(){return(0,nt.Z)(hn).scale(177.158)}hn.invert=function(Rt,$t){for(var an,fn=$t,wn=fn*fn,Bn=wn*wn*wn,Ln=0;Ln<12&&(Bn=(wn=(fn-=an=(fn*(cn+qt*wn+Bn*(nn+Kt*wn))-$t)/(cn+3*qt*wn+Bn*(7*nn+9*Kt*wn)))*fn)*wn*wn,!((0,u.Wn)(an)<u.aW));++Ln);return[sn*Rt*(cn+3*qt*wn+Bn*(7*nn+9*Kt*wn))/(0,u.mC)(fn),(0,u.ZR)((0,u.O$)(fn)/sn)]};var yn=e(98936),Sn=e(64684);function pn(){var Rt,$t,an,fn,wn,Bn,Ln,In=1,Wn=0,Vt=0,_n=1,At=1,Gt=0,Jt=null,mn=1,xn=1,An=(0,Sn.l)({point:function(on,un){var En=Wt([on,un]);this.stream.point(En[0],En[1])}}),ln=ne.Z;function Yt(){return mn=In*_n,xn=In*At,Bn=Ln=null,Wt}function Wt(on){var un=on[0]*mn,En=on[1]*xn;if(Gt){var Pn=En*Rt-un*$t;un=un*Rt+En*$t,En=Pn}return[un+Wn,En+Vt]}return Wt.invert=function(on){var un=on[0]-Wn,En=on[1]-Vt;if(Gt){var Pn=En*Rt+un*$t;un=un*Rt-En*$t,En=Pn}return[un/mn,En/xn]},Wt.stream=function(on){return Bn&&Ln===on?Bn:Bn=An(ln(Ln=on))},Wt.postclip=function(on){return arguments.length?(ln=on,Jt=an=fn=wn=null,Yt()):ln},Wt.clipExtent=function(on){return arguments.length?(ln=on==null?(Jt=an=fn=wn=null,ne.Z):(0,s.Z)(Jt=+on[0][0],an=+on[0][1],fn=+on[1][0],wn=+on[1][1]),Yt()):Jt==null?null:[[Jt,an],[fn,wn]]},Wt.scale=function(on){return arguments.length?(In=+on,Yt()):In},Wt.translate=function(on){return arguments.length?(Wn=+on[0],Vt=+on[1],Yt()):[Wn,Vt]},Wt.angle=function(on){return arguments.length?(Gt=on%360*u.uR,$t=(0,u.O$)(Gt),Rt=(0,u.mC)(Gt),Yt()):Gt*u.RW},Wt.reflectX=function(on){return arguments.length?(_n=on?-1:1,Yt()):_n<0},Wt.reflectY=function(on){return arguments.length?(At=on?-1:1,Yt()):At<0},Wt.fitExtent=function(on,un){return(0,ut.qg)(Wt,on,un)},Wt.fitSize=function(on,un){return(0,ut.mF)(Wt,on,un)},Wt.fitWidth=function(on,un){return(0,ut.V6)(Wt,on,un)},Wt.fitHeight=function(on,un){return(0,ut.rf)(Wt,on,un)},Wt}var Cn=e(26867),Hn=e(57962),Qn=e(25382);function nr(Rt,$t){var an=(0,u.mC)($t),fn=1+(0,u.mC)(Rt)*an;return[an*(0,u.O$)(Rt)/fn,(0,u.O$)($t)/fn]}function Jn(){return(0,nt.Z)(nr).scale(250).clipAngle(142)}function Gn(Rt,$t){return[(0,u.cM)((0,u.OR)((u.ou+$t)/2)),-Rt]}function lr(){var Rt=Nt(Gn),$t=Rt.center,an=Rt.rotate;return Rt.center=function(fn){return arguments.length?$t([-fn[1],fn[0]]):[(fn=$t())[1],-fn[0]]},Rt.rotate=function(fn){return arguments.length?an([fn[0],fn[1],fn.length>2?fn[2]+90:90]):[(fn=an())[0],fn[1],fn[2]-90]},an([0,0,90]).scale(159.155)}nr.invert=(0,Qn.O)(function(Rt){return 2*(0,u.z4)(Rt)}),Gn.invert=function(Rt,$t){return[-$t,2*(0,u.z4)((0,u.Qq)(Rt))-u.ou]}},83074:function(ee,D,e){e.d(D,{Z:function(){return k}});var M=e(39695);function k(l,T){var b=l[0]*M.uR,d=l[1]*M.uR,s=T[0]*M.uR,t=T[1]*M.uR,i=(0,M.mC)(d),r=(0,M.O$)(d),n=(0,M.mC)(t),o=(0,M.O$)(t),a=i*(0,M.mC)(b),u=i*(0,M.O$)(b),p=n*(0,M.mC)(s),c=n*(0,M.O$)(s),x=2*(0,M.ZR)((0,M._b)((0,M.Jy)(t-d)+i*n*(0,M.Jy)(s-b))),g=(0,M.O$)(x),h=x?function(y){var v=(0,M.O$)(y*=x)/g,m=(0,M.O$)(x-y)/g,_=m*a+v*p,f=m*u+v*c,S=m*r+v*o;return[(0,M.fv)(f,_)*M.RW,(0,M.fv)(S,(0,M._b)(_*_+f*f))*M.RW]}:function(){return[b*M.RW,d*M.RW]};return h.distance=x,h}},39695:function(ee,D,e){e.d(D,{BZ:function(){return d},Ho:function(){return M},Jy:function(){return _},Kh:function(){return v},O$:function(){return x},OR:function(){return y},Qq:function(){return u},RW:function(){return s},Wn:function(){return i},Xx:function(){return g},ZR:function(){return m},_b:function(){return h},aW:function(){return k},cM:function(){return p},fv:function(){return n},mC:function(){return o},mD:function(){return a},ou:function(){return T},pi:function(){return l},pu:function(){return b},sQ:function(){return c},uR:function(){return t},z4:function(){return r}});var M=1e-6,k=1e-12,l=Math.PI,T=l/2,b=l/4,d=2*l,s=180/l,t=l/180,i=Math.abs,r=Math.atan,n=Math.atan2,o=Math.cos,a=Math.ceil,u=Math.exp,p=Math.log,c=Math.pow,x=Math.sin,g=Math.sign||function(f){return f>0?1:f<0?-1:0},h=Math.sqrt,y=Math.tan;function v(f){return f>1?0:f<-1?l:Math.acos(f)}function m(f){return f>1?T:f<-1?-T:Math.asin(f)}function _(f){return(f=x(f/2))*f}},73182:function(ee,D,e){function M(){}e.d(D,{Z:function(){return M}})},3559:function(ee,D,e){var M=e(73182),k=1/0,l=k,T=-k,b=T,d={point:function(s,t){s<k&&(k=s),s>T&&(T=s),t<l&&(l=t),t>b&&(b=t)},lineStart:M.Z,lineEnd:M.Z,polygonStart:M.Z,polygonEnd:M.Z,result:function(){var s=[[k,l],[T,b]];return T=b=-(l=k=1/0),s}};D.Z=d},67108:function(ee,D,e){e.d(D,{Z:function(){return k}});var M=e(39695);function k(l,T){return(0,M.Wn)(l[0]-T[0])<M.Ho&&(0,M.Wn)(l[1]-T[1])<M.Ho}},23071:function(ee,D,e){e.d(D,{Z:function(){return d}});var M=e(33940),k=e(7620),l=e(39695),T=(0,M.Z)();function b(s){return(0,l.Wn)(s[0])<=l.pi?s[0]:(0,l.Xx)(s[0])*(((0,l.Wn)(s[0])+l.pi)%l.BZ-l.pi)}function d(s,t){var i=b(t),r=t[1],n=(0,l.O$)(r),o=[(0,l.O$)(i),-(0,l.mC)(i),0],a=0,u=0;T.reset(),n===1?r=l.ou+l.Ho:n===-1&&(r=-l.ou-l.Ho);for(var p=0,c=s.length;p<c;++p)if(g=(x=s[p]).length)for(var x,g,h=x[g-1],y=b(h),v=h[1]/2+l.pu,m=(0,l.O$)(v),_=(0,l.mC)(v),f=0;f<g;++f,y=w,m=L,_=C,h=S){var S=x[f],w=b(S),E=S[1]/2+l.pu,L=(0,l.O$)(E),C=(0,l.mC)(E),P=w-y,z=P>=0?1:-1,G=z*P,O=G>l.pi,H=m*L;if(T.add((0,l.fv)(H*z*(0,l.O$)(G),_*C+H*(0,l.mC)(G))),a+=O?P+z*l.BZ:P,O^y>=i^w>=i){var N=(0,k.T5)((0,k.Og)(h),(0,k.Og)(S));(0,k.iJ)(N);var B=(0,k.T5)(o,N);(0,k.iJ)(B);var V=(O^P>=0?-1:1)*(0,l.ZR)(B[2]);(r>V||r===V&&(N[0]||N[1]))&&(u+=O^P>=0?1:-1)}}return(a<-l.Ho||a<l.Ho&&T<-l.Ho)^1&u}},25382:function(ee,D,e){e.d(D,{O:function(){return l},W:function(){return k}});var M=e(39695);function k(T){return function(b,d){var s=(0,M.mC)(b),t=(0,M.mC)(d),i=T(s*t);return[i*t*(0,M.O$)(b),i*(0,M.O$)(d)]}}function l(T){return function(b,d){var s=(0,M._b)(b*b+d*d),t=T(s),i=(0,M.O$)(t),r=(0,M.mC)(t);return[(0,M.fv)(b*i,s*r),(0,M.ZR)(s&&d*i/s)]}}},12956:function(ee,D,e){e.d(D,{Z:function(){return b},l:function(){return T}});var M=e(39695),k=e(25382),l=e(15002),T=(0,k.W)(function(d){return(0,M._b)(2/(1+d))});function b(){return(0,l.Z)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.O)(function(d){return 2*(0,M.ZR)(d/2)})},17889:function(ee,D,e){e.d(D,{N:function(){return T},Z:function(){return b}});var M=e(39695),k=e(25382),l=e(15002),T=(0,k.W)(function(d){return(d=(0,M.Kh)(d))&&d/(0,M.O$)(d)});function b(){return(0,l.Z)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.O)(function(d){return d})},97492:function(ee,D,e){e.d(D,{Z:function(){return l},k:function(){return k}});var M=e(15002);function k(T,b){return[T,b]}function l(){return(0,M.Z)(k).scale(152.63)}k.invert=k},47589:function(ee,D,e){e.d(D,{V6:function(){return d},mF:function(){return b},qg:function(){return T},rf:function(){return s}});var M=e(72736),k=e(3559);function l(t,i,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),(0,M.Z)(r,t.stream(k.Z)),i(k.Z.result()),n!=null&&t.clipExtent(n),t}function T(t,i,r){return l(t,function(n){var o=i[1][0]-i[0][0],a=i[1][1]-i[0][1],u=Math.min(o/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),p=+i[0][0]+(o-u*(n[1][0]+n[0][0]))/2,c=+i[0][1]+(a-u*(n[1][1]+n[0][1]))/2;t.scale(150*u).translate([p,c])},r)}function b(t,i,r){return T(t,[[0,0],i],r)}function d(t,i,r){return l(t,function(n){var o=+i,a=o/(n[1][0]-n[0][0]),u=(o-a*(n[1][0]+n[0][0]))/2,p=-a*n[0][1];t.scale(150*a).translate([u,p])},r)}function s(t,i,r){return l(t,function(n){var o=+i,a=o/(n[1][1]-n[0][1]),u=-a*n[0][0],p=(o-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([u,p])},r)}},98936:function(ee,D,e){e.d(D,{M:function(){return T},Z:function(){return b}});var M=e(39695),k=e(25382),l=e(15002);function T(d,s){var t=(0,M.mC)(s),i=(0,M.mC)(d)*t;return[t*(0,M.O$)(d)/i,(0,M.O$)(s)/i]}function b(){return(0,l.Z)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.O)(M.z4)},15002:function(ee,D,e){e.d(D,{Z:function(){return x},r:function(){return g}});var M=e(87070),k=e(1457),l=e(87605),T=e(96059),b=e(8593),d=e(39695),s=e(49386),t=e(64684),i=e(47589),r=e(7620),n=16,o=(0,d.mC)(30*d.uR);function a(h,y){return+y?function(v,m){function _(f,S,w,E,L,C,P,z,G,O,H,N,B,V){var q=P-f,te=z-S,K=q*q+te*te;if(K>4*m&&B--){var J=E+O,Y=L+H,W=C+N,Q=(0,d._b)(J*J+Y*Y+W*W),ne=(0,d.ZR)(W/=Q),re=(0,d.Wn)((0,d.Wn)(W)-1)<d.Ho||(0,d.Wn)(w-G)<d.Ho?(w+G)/2:(0,d.fv)(Y,J),ae=v(re,ne),ue=ae[0],pe=ae[1],ge=ue-f,_e=pe-S,me=te*ge-q*_e;(me*me/K>m||(0,d.Wn)((q*ge+te*_e)/K-.5)>.3||E*O+L*H+C*N<o)&&(_(f,S,w,E,L,C,ue,pe,re,J/=Q,Y/=Q,W,B,V),V.point(ue,pe),_(ue,pe,re,J,Y,W,P,z,G,O,H,N,B,V))}}return function(f){var S,w,E,L,C,P,z,G,O,H,N,B,V={point:q,lineStart:te,lineEnd:J,polygonStart:function(){f.polygonStart(),V.lineStart=Y},polygonEnd:function(){f.polygonEnd(),V.lineStart=te}};function q(ne,re){ne=v(ne,re),f.point(ne[0],ne[1])}function te(){G=NaN,V.point=K,f.lineStart()}function K(ne,re){var ae=(0,r.Og)([ne,re]),ue=v(ne,re);_(G,O,z,H,N,B,G=ue[0],O=ue[1],z=ne,H=ae[0],N=ae[1],B=ae[2],n,f),f.point(G,O)}function J(){V.point=q,f.lineEnd()}function Y(){te(),V.point=W,V.lineEnd=Q}function W(ne,re){K(S=ne,re),w=G,E=O,L=H,C=N,P=B,V.point=K}function Q(){_(G,O,z,H,N,B,w,E,S,L,C,P,n,f),V.lineEnd=J,J()}return V}}(h,y):function(v){return(0,t.l)({point:function(m,_){m=v(m,_),this.stream.point(m[0],m[1])}})}(h)}var u=(0,t.l)({point:function(h,y){this.stream.point(h*d.uR,y*d.uR)}});function p(h,y,v,m,_){function f(S,w){return[y+h*(S*=m),v-h*(w*=_)]}return f.invert=function(S,w){return[(S-y)/h*m,(v-w)/h*_]},f}function c(h,y,v,m,_,f){var S=(0,d.mC)(f),w=(0,d.O$)(f),E=S*h,L=w*h,C=S/h,P=w/h,z=(w*v-S*y)/h,G=(w*y+S*v)/h;function O(H,N){return[E*(H*=m)-L*(N*=_)+y,v-L*H-E*N]}return O.invert=function(H,N){return[m*(C*H-P*N+z),_*(G-P*H-C*N)]},O}function x(h){return g(function(){return h})()}function g(h){var y,v,m,_,f,S,w,E,L,C,P=150,z=480,G=250,O=0,H=0,N=0,B=0,V=0,q=0,te=1,K=1,J=null,Y=M.Z,W=null,Q=b.Z,ne=.5;function re(ge){return E(ge[0]*d.uR,ge[1]*d.uR)}function ae(ge){return(ge=E.invert(ge[0],ge[1]))&&[ge[0]*d.RW,ge[1]*d.RW]}function ue(){var ge=c(P,0,0,te,K,q).apply(null,y(O,H)),_e=(q?c:p)(P,z-ge[0],G-ge[1],te,K,q);return v=(0,s.I)(N,B,V),w=(0,T.Z)(y,_e),E=(0,T.Z)(v,w),S=a(w,ne),pe()}function pe(){return L=C=null,re}return re.stream=function(ge){return L&&C===ge?L:L=u(function(_e){return(0,t.l)({point:function(me,ve){var Oe=_e(me,ve);return this.stream.point(Oe[0],Oe[1])}})}(v)(Y(S(Q(C=ge)))))},re.preclip=function(ge){return arguments.length?(Y=ge,J=void 0,pe()):Y},re.postclip=function(ge){return arguments.length?(Q=ge,W=m=_=f=null,pe()):Q},re.clipAngle=function(ge){return arguments.length?(Y=+ge?(0,k.Z)(J=ge*d.uR):(J=null,M.Z),pe()):J*d.RW},re.clipExtent=function(ge){return arguments.length?(Q=ge==null?(W=m=_=f=null,b.Z):(0,l.Z)(W=+ge[0][0],m=+ge[0][1],_=+ge[1][0],f=+ge[1][1]),pe()):W==null?null:[[W,m],[_,f]]},re.scale=function(ge){return arguments.length?(P=+ge,ue()):P},re.translate=function(ge){return arguments.length?(z=+ge[0],G=+ge[1],ue()):[z,G]},re.center=function(ge){return arguments.length?(O=ge[0]%360*d.uR,H=ge[1]%360*d.uR,ue()):[O*d.RW,H*d.RW]},re.rotate=function(ge){return arguments.length?(N=ge[0]%360*d.uR,B=ge[1]%360*d.uR,V=ge.length>2?ge[2]%360*d.uR:0,ue()):[N*d.RW,B*d.RW,V*d.RW]},re.angle=function(ge){return arguments.length?(q=ge%360*d.uR,ue()):q*d.RW},re.reflectX=function(ge){return arguments.length?(te=ge?-1:1,ue()):te<0},re.reflectY=function(ge){return arguments.length?(K=ge?-1:1,ue()):K<0},re.precision=function(ge){return arguments.length?(S=a(w,ne=ge*ge),pe()):(0,d._b)(ne)},re.fitExtent=function(ge,_e){return(0,i.qg)(re,ge,_e)},re.fitSize=function(ge,_e){return(0,i.mF)(re,ge,_e)},re.fitWidth=function(ge,_e){return(0,i.V6)(re,ge,_e)},re.fitHeight=function(ge,_e){return(0,i.rf)(re,ge,_e)},function(){return y=h.apply(this,arguments),re.invert=y.invert&&ae,ue()}}},26867:function(ee,D,e){e.d(D,{K:function(){return l},Z:function(){return T}});var M=e(15002),k=e(39695);function l(b,d){var s=d*d,t=s*s;return[b*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),d*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,M.Z)(l).scale(175.295)}l.invert=function(b,d){var s,t=d,i=25;do{var r=t*t,n=r*r;t-=s=(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-d)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,k.Wn)(s)>k.Ho&&--i>0);return[b/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},57962:function(ee,D,e){e.d(D,{I:function(){return T},Z:function(){return b}});var M=e(39695),k=e(25382),l=e(15002);function T(d,s){return[(0,M.mC)(s)*(0,M.O$)(d),(0,M.O$)(s)]}function b(){return(0,l.Z)(T).scale(249.5).clipAngle(90+M.Ho)}T.invert=(0,k.O)(M.ZR)},49386:function(ee,D,e){e.d(D,{I:function(){return T},Z:function(){return t}});var M=e(96059),k=e(39695);function l(i,r){return[(0,k.Wn)(i)>k.pi?i+Math.round(-i/k.BZ)*k.BZ:i,r]}function T(i,r,n){return(i%=k.BZ)?r||n?(0,M.Z)(d(i),s(r,n)):d(i):r||n?s(r,n):l}function b(i){return function(r,n){return[(r+=i)>k.pi?r-k.BZ:r<-k.pi?r+k.BZ:r,n]}}function d(i){var r=b(i);return r.invert=b(-i),r}function s(i,r){var n=(0,k.mC)(i),o=(0,k.O$)(i),a=(0,k.mC)(r),u=(0,k.O$)(r);function p(c,x){var g=(0,k.mC)(x),h=(0,k.mC)(c)*g,y=(0,k.O$)(c)*g,v=(0,k.O$)(x),m=v*n+h*o;return[(0,k.fv)(y*a-m*u,h*n-v*o),(0,k.ZR)(m*a+y*u)]}return p.invert=function(c,x){var g=(0,k.mC)(x),h=(0,k.mC)(c)*g,y=(0,k.O$)(c)*g,v=(0,k.O$)(x),m=v*a-y*u;return[(0,k.fv)(y*a+v*u,h*n+m*o),(0,k.ZR)(m*n-h*o)]},p}function t(i){function r(n){return(n=i(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n}return i=T(i[0]*k.uR,i[1]*k.uR,i.length>2?i[2]*k.uR:0),r.invert=function(n){return(n=i.invert(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n},r}l.invert=l},72736:function(ee,D,e){function M(s,t){s&&l.hasOwnProperty(s.type)&&l[s.type](s,t)}e.d(D,{Z:function(){return d}});var k={Feature:function(s,t){M(s.geometry,t)},FeatureCollection:function(s,t){for(var i=s.features,r=-1,n=i.length;++r<n;)M(i[r].geometry,t)}},l={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)s=i[r],t.point(s[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)T(i[r],t,0)},Polygon:function(s,t){b(s.coordinates,t)},MultiPolygon:function(s,t){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)b(i[r],t)},GeometryCollection:function(s,t){for(var i=s.geometries,r=-1,n=i.length;++r<n;)M(i[r],t)}};function T(s,t,i){var r,n=-1,o=s.length-i;for(t.lineStart();++n<o;)r=s[n],t.point(r[0],r[1],r[2]);t.lineEnd()}function b(s,t){var i=-1,r=s.length;for(t.polygonStart();++i<r;)T(s[i],t,1);t.polygonEnd()}function d(s,t){s&&k.hasOwnProperty(s.type)?k[s.type](s,t):M(s,t)}},64684:function(ee,D,e){function M(T){return{stream:k(T)}}function k(T){return function(b){var d=new l;for(var s in T)d[s]=T[s];return d.stream=b,d}}function l(){}e.d(D,{Z:function(){return M},l:function(){return k}}),l.prototype={constructor:l,point:function(T,b){this.stream.point(T,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(ee,D,e){function M(oe,he){return oe.parent===he.parent?1:2}function k(oe,he){return oe+he.x}function l(oe,he){return Math.max(oe,he.y)}function T(){var oe=M,he=1,Ee=1,ke=!1;function be(Ie){var Fe,ce=0;Ie.eachAfter(function(ze){var He=ze.children;He?(ze.x=function(Ge){return Ge.reduce(k,0)/Ge.length}(He),ze.y=function(Ge){return 1+Ge.reduce(l,0)}(He)):(ze.x=Fe?ce+=oe(ze,Fe):0,ze.y=0,Fe=ze)});var we=function(ze){for(var He;He=ze.children;)ze=He[0];return ze}(Ie),ye=function(ze){for(var He;He=ze.children;)ze=He[He.length-1];return ze}(Ie),Ce=we.x-oe(we,ye)/2,Re=ye.x+oe(ye,we)/2;return Ie.eachAfter(ke?function(ze){ze.x=(ze.x-Ie.x)*he,ze.y=(Ie.y-ze.y)*Ee}:function(ze){ze.x=(ze.x-Ce)/(Re-Ce)*he,ze.y=(1-(Ie.y?ze.y/Ie.y:1))*Ee})}return be.separation=function(Ie){return arguments.length?(oe=Ie,be):oe},be.size=function(Ie){return arguments.length?(ke=!1,he=+Ie[0],Ee=+Ie[1],be):ke?null:[he,Ee]},be.nodeSize=function(Ie){return arguments.length?(ke=!0,he=+Ie[0],Ee=+Ie[1],be):ke?[he,Ee]:null},be}function b(oe){var he=0,Ee=oe.children,ke=Ee&&Ee.length;if(ke)for(;--ke>=0;)he+=Ee[ke].value;else he=1;oe.value=he}function d(oe,he){var Ee,ke,be,Ie,Fe,ce=new r(oe),we=+oe.value&&(ce.value=oe.value),ye=[ce];for(he==null&&(he=s);Ee=ye.pop();)if(we&&(Ee.value=+Ee.data.value),(be=he(Ee.data))&&(Fe=be.length))for(Ee.children=new Array(Fe),Ie=Fe-1;Ie>=0;--Ie)ye.push(ke=Ee.children[Ie]=new r(be[Ie])),ke.parent=Ee,ke.depth=Ee.depth+1;return ce.eachBefore(i)}function s(oe){return oe.children}function t(oe){oe.data=oe.data.data}function i(oe){var he=0;do oe.height=he;while((oe=oe.parent)&&oe.height<++he)}function r(oe){this.data=oe,this.depth=this.height=0,this.parent=null}e.r(D),e.d(D,{cluster:function(){return T},hierarchy:function(){return d},pack:function(){return P},packEnclose:function(){return o},packSiblings:function(){return S},partition:function(){return B},stratify:function(){return Y},tree:function(){return pe},treemap:function(){return Oe},treemapBinary:function(){return Me},treemapDice:function(){return N},treemapResquarify:function(){return se},treemapSlice:function(){return ge},treemapSliceDice:function(){return Te},treemapSquarify:function(){return ve}}),r.prototype=d.prototype={constructor:r,count:function(){return this.eachAfter(b)},each:function(oe){var he,Ee,ke,be,Ie=this,Fe=[Ie];do for(he=Fe.reverse(),Fe=[];Ie=he.pop();)if(oe(Ie),Ee=Ie.children)for(ke=0,be=Ee.length;ke<be;++ke)Fe.push(Ee[ke]);while(Fe.length);return this},eachAfter:function(oe){for(var he,Ee,ke,be=this,Ie=[be],Fe=[];be=Ie.pop();)if(Fe.push(be),he=be.children)for(Ee=0,ke=he.length;Ee<ke;++Ee)Ie.push(he[Ee]);for(;be=Fe.pop();)oe(be);return this},eachBefore:function(oe){for(var he,Ee,ke=this,be=[ke];ke=be.pop();)if(oe(ke),he=ke.children)for(Ee=he.length-1;Ee>=0;--Ee)be.push(he[Ee]);return this},sum:function(oe){return this.eachAfter(function(he){for(var Ee=+oe(he.data)||0,ke=he.children,be=ke&&ke.length;--be>=0;)Ee+=ke[be].value;he.value=Ee})},sort:function(oe){return this.eachBefore(function(he){he.children&&he.children.sort(oe)})},path:function(oe){for(var he=this,Ee=function(Ie,Fe){if(Ie===Fe)return Ie;var ce=Ie.ancestors(),we=Fe.ancestors(),ye=null;for(Ie=ce.pop(),Fe=we.pop();Ie===Fe;)ye=Ie,Ie=ce.pop(),Fe=we.pop();return ye}(he,oe),ke=[he];he!==Ee;)he=he.parent,ke.push(he);for(var be=ke.length;oe!==Ee;)ke.splice(be,0,oe),oe=oe.parent;return ke},ancestors:function(){for(var oe=this,he=[oe];oe=oe.parent;)he.push(oe);return he},descendants:function(){var oe=[];return this.each(function(he){oe.push(he)}),oe},leaves:function(){var oe=[];return this.eachBefore(function(he){he.children||oe.push(he)}),oe},links:function(){var oe=this,he=[];return oe.each(function(Ee){Ee!==oe&&he.push({source:Ee.parent,target:Ee})}),he},copy:function(){return d(this).eachBefore(t)}};var n=Array.prototype.slice;function o(oe){for(var he,Ee,ke=0,be=(oe=function(Fe){for(var ce,we,ye=Fe.length;ye;)we=Math.random()*ye--|0,ce=Fe[ye],Fe[ye]=Fe[we],Fe[we]=ce;return Fe}(n.call(oe))).length,Ie=[];ke<be;)he=oe[ke],Ee&&p(Ee,he)?++ke:(Ee=x(Ie=a(Ie,he)),ke=0);return Ee}function a(oe,he){var Ee,ke;if(c(he,oe))return[he];for(Ee=0;Ee<oe.length;++Ee)if(u(he,oe[Ee])&&c(g(oe[Ee],he),oe))return[oe[Ee],he];for(Ee=0;Ee<oe.length-1;++Ee)for(ke=Ee+1;ke<oe.length;++ke)if(u(g(oe[Ee],oe[ke]),he)&&u(g(oe[Ee],he),oe[ke])&&u(g(oe[ke],he),oe[Ee])&&c(h(oe[Ee],oe[ke],he),oe))return[oe[Ee],oe[ke],he];throw new Error}function u(oe,he){var Ee=oe.r-he.r,ke=he.x-oe.x,be=he.y-oe.y;return Ee<0||Ee*Ee<ke*ke+be*be}function p(oe,he){var Ee=oe.r-he.r+1e-6,ke=he.x-oe.x,be=he.y-oe.y;return Ee>0&&Ee*Ee>ke*ke+be*be}function c(oe,he){for(var Ee=0;Ee<he.length;++Ee)if(!p(oe,he[Ee]))return!1;return!0}function x(oe){switch(oe.length){case 1:return{x:(he=oe[0]).x,y:he.y,r:he.r};case 2:return g(oe[0],oe[1]);case 3:return h(oe[0],oe[1],oe[2])}var he}function g(oe,he){var Ee=oe.x,ke=oe.y,be=oe.r,Ie=he.x,Fe=he.y,ce=he.r,we=Ie-Ee,ye=Fe-ke,Ce=ce-be,Re=Math.sqrt(we*we+ye*ye);return{x:(Ee+Ie+we/Re*Ce)/2,y:(ke+Fe+ye/Re*Ce)/2,r:(Re+be+ce)/2}}function h(oe,he,Ee){var ke=oe.x,be=oe.y,Ie=oe.r,Fe=he.x,ce=he.y,we=he.r,ye=Ee.x,Ce=Ee.y,Re=Ee.r,ze=ke-Fe,He=ke-ye,Ge=be-ce,Je=be-Ce,ot=we-Ie,Qe=Re-Ie,vt=ke*ke+be*be-Ie*Ie,xt=vt-Fe*Fe-ce*ce+we*we,mt=vt-ye*ye-Ce*Ce+Re*Re,rt=He*Ge-ze*Je,it=(Ge*mt-Je*xt)/(2*rt)-ke,Tt=(Je*ot-Ge*Qe)/rt,Mt=(He*xt-ze*mt)/(2*rt)-be,Pt=(ze*Qe-He*ot)/rt,kt=Tt*Tt+Pt*Pt-1,Ze=2*(Ie+it*Tt+Mt*Pt),Xe=it*it+Mt*Mt-Ie*Ie,Ve=-(kt?(Ze+Math.sqrt(Ze*Ze-4*kt*Xe))/(2*kt):Xe/Ze);return{x:ke+it+Tt*Ve,y:be+Mt+Pt*Ve,r:Ve}}function y(oe,he,Ee){var ke,be,Ie,Fe,ce=oe.x-he.x,we=oe.y-he.y,ye=ce*ce+we*we;ye?(be=he.r+Ee.r,be*=be,Fe=oe.r+Ee.r,be>(Fe*=Fe)?(ke=(ye+Fe-be)/(2*ye),Ie=Math.sqrt(Math.max(0,Fe/ye-ke*ke)),Ee.x=oe.x-ke*ce-Ie*we,Ee.y=oe.y-ke*we+Ie*ce):(ke=(ye+be-Fe)/(2*ye),Ie=Math.sqrt(Math.max(0,be/ye-ke*ke)),Ee.x=he.x+ke*ce-Ie*we,Ee.y=he.y+ke*we+Ie*ce)):(Ee.x=he.x+Ee.r,Ee.y=he.y)}function v(oe,he){var Ee=oe.r+he.r-1e-6,ke=he.x-oe.x,be=he.y-oe.y;return Ee>0&&Ee*Ee>ke*ke+be*be}function m(oe){var he=oe._,Ee=oe.next._,ke=he.r+Ee.r,be=(he.x*Ee.r+Ee.x*he.r)/ke,Ie=(he.y*Ee.r+Ee.y*he.r)/ke;return be*be+Ie*Ie}function _(oe){this._=oe,this.next=null,this.previous=null}function f(oe){if(!(be=oe.length))return 0;var he,Ee,ke,be,Ie,Fe,ce,we,ye,Ce,Re;if((he=oe[0]).x=0,he.y=0,!(be>1))return he.r;if(Ee=oe[1],he.x=-Ee.r,Ee.x=he.r,Ee.y=0,!(be>2))return he.r+Ee.r;y(Ee,he,ke=oe[2]),he=new _(he),Ee=new _(Ee),ke=new _(ke),he.next=ke.previous=Ee,Ee.next=he.previous=ke,ke.next=Ee.previous=he;e:for(ce=3;ce<be;++ce){y(he._,Ee._,ke=oe[ce]),ke=new _(ke),we=Ee.next,ye=he.previous,Ce=Ee._.r,Re=he._.r;do if(Ce<=Re){if(v(we._,ke._)){Ee=we,he.next=Ee,Ee.previous=he,--ce;continue e}Ce+=we._.r,we=we.next}else{if(v(ye._,ke._)){(he=ye).next=Ee,Ee.previous=he,--ce;continue e}Re+=ye._.r,ye=ye.previous}while(we!==ye.next);for(ke.previous=he,ke.next=Ee,he.next=Ee.previous=Ee=ke,Ie=m(he);(ke=ke.next)!==Ee;)(Fe=m(ke))<Ie&&(he=ke,Ie=Fe);Ee=he.next}for(he=[Ee._],ke=Ee;(ke=ke.next)!==Ee;)he.push(ke._);for(ke=o(he),ce=0;ce<be;++ce)(he=oe[ce]).x-=ke.x,he.y-=ke.y;return ke.r}function S(oe){return f(oe),oe}function w(oe){if(typeof oe!="function")throw new Error;return oe}function E(){return 0}function L(oe){return function(){return oe}}function C(oe){return Math.sqrt(oe.value)}function P(){var oe=null,he=1,Ee=1,ke=E;function be(Ie){return Ie.x=he/2,Ie.y=Ee/2,oe?Ie.eachBefore(z(oe)).eachAfter(G(ke,.5)).eachBefore(O(1)):Ie.eachBefore(z(C)).eachAfter(G(E,1)).eachAfter(G(ke,Ie.r/Math.min(he,Ee))).eachBefore(O(Math.min(he,Ee)/(2*Ie.r))),Ie}return be.radius=function(Ie){return arguments.length?(oe=(Fe=Ie)==null?null:w(Fe),be):oe;var Fe},be.size=function(Ie){return arguments.length?(he=+Ie[0],Ee=+Ie[1],be):[he,Ee]},be.padding=function(Ie){return arguments.length?(ke=typeof Ie=="function"?Ie:L(+Ie),be):ke},be}function z(oe){return function(he){he.children||(he.r=Math.max(0,+oe(he)||0))}}function G(oe,he){return function(Ee){if(ke=Ee.children){var ke,be,Ie,Fe=ke.length,ce=oe(Ee)*he||0;if(ce)for(be=0;be<Fe;++be)ke[be].r+=ce;if(Ie=f(ke),ce)for(be=0;be<Fe;++be)ke[be].r-=ce;Ee.r=Ie+ce}}}function O(oe){return function(he){var Ee=he.parent;he.r*=oe,Ee&&(he.x=Ee.x+oe*he.x,he.y=Ee.y+oe*he.y)}}function H(oe){oe.x0=Math.round(oe.x0),oe.y0=Math.round(oe.y0),oe.x1=Math.round(oe.x1),oe.y1=Math.round(oe.y1)}function N(oe,he,Ee,ke,be){for(var Ie,Fe=oe.children,ce=-1,we=Fe.length,ye=oe.value&&(ke-he)/oe.value;++ce<we;)(Ie=Fe[ce]).y0=Ee,Ie.y1=be,Ie.x0=he,Ie.x1=he+=Ie.value*ye}function B(){var oe=1,he=1,Ee=0,ke=!1;function be(Ie){var Fe=Ie.height+1;return Ie.x0=Ie.y0=Ee,Ie.x1=oe,Ie.y1=he/Fe,Ie.eachBefore(function(ce,we){return function(ye){ye.children&&N(ye,ye.x0,ce*(ye.depth+1)/we,ye.x1,ce*(ye.depth+2)/we);var Ce=ye.x0,Re=ye.y0,ze=ye.x1-Ee,He=ye.y1-Ee;ze<Ce&&(Ce=ze=(Ce+ze)/2),He<Re&&(Re=He=(Re+He)/2),ye.x0=Ce,ye.y0=Re,ye.x1=ze,ye.y1=He}}(he,Fe)),ke&&Ie.eachBefore(H),Ie}return be.round=function(Ie){return arguments.length?(ke=!!Ie,be):ke},be.size=function(Ie){return arguments.length?(oe=+Ie[0],he=+Ie[1],be):[oe,he]},be.padding=function(Ie){return arguments.length?(Ee=+Ie,be):Ee},be}var V="$",q={depth:-1},te={};function K(oe){return oe.id}function J(oe){return oe.parentId}function Y(){var oe=K,he=J;function Ee(ke){var be,Ie,Fe,ce,we,ye,Ce,Re=ke.length,ze=new Array(Re),He={};for(Ie=0;Ie<Re;++Ie)be=ke[Ie],we=ze[Ie]=new r(be),(ye=oe(be,Ie,ke))!=null&&(ye+="")&&(He[Ce=V+(we.id=ye)]=Ce in He?te:we);for(Ie=0;Ie<Re;++Ie)if(we=ze[Ie],(ye=he(ke[Ie],Ie,ke))!=null&&(ye+="")){if(!(ce=He[V+ye]))throw new Error("missing: "+ye);if(ce===te)throw new Error("ambiguous: "+ye);ce.children?ce.children.push(we):ce.children=[we],we.parent=ce}else{if(Fe)throw new Error("multiple roots");Fe=we}if(!Fe)throw new Error("no root");if(Fe.parent=q,Fe.eachBefore(function(Ge){Ge.depth=Ge.parent.depth+1,--Re}).eachBefore(i),Fe.parent=null,Re>0)throw new Error("cycle");return Fe}return Ee.id=function(ke){return arguments.length?(oe=w(ke),Ee):oe},Ee.parentId=function(ke){return arguments.length?(he=w(ke),Ee):he},Ee}function W(oe,he){return oe.parent===he.parent?1:2}function Q(oe){var he=oe.children;return he?he[0]:oe.t}function ne(oe){var he=oe.children;return he?he[he.length-1]:oe.t}function re(oe,he,Ee){var ke=Ee/(he.i-oe.i);he.c-=ke,he.s+=Ee,oe.c+=ke,he.z+=Ee,he.m+=Ee}function ae(oe,he,Ee){return oe.a.parent===he.parent?oe.a:Ee}function ue(oe,he){this._=oe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=he}function pe(){var oe=W,he=1,Ee=1,ke=null;function be(we){var ye=function(Qe){for(var vt,xt,mt,rt,it,Tt=new ue(Qe,0),Mt=[Tt];vt=Mt.pop();)if(mt=vt._.children)for(vt.children=new Array(it=mt.length),rt=it-1;rt>=0;--rt)Mt.push(xt=vt.children[rt]=new ue(mt[rt],rt)),xt.parent=vt;return(Tt.parent=new ue(null,0)).children=[Tt],Tt}(we);if(ye.eachAfter(Ie),ye.parent.m=-ye.z,ye.eachBefore(Fe),ke)we.eachBefore(ce);else{var Ce=we,Re=we,ze=we;we.eachBefore(function(Qe){Qe.x<Ce.x&&(Ce=Qe),Qe.x>Re.x&&(Re=Qe),Qe.depth>ze.depth&&(ze=Qe)});var He=Ce===Re?1:oe(Ce,Re)/2,Ge=He-Ce.x,Je=he/(Re.x+He+Ge),ot=Ee/(ze.depth||1);we.eachBefore(function(Qe){Qe.x=(Qe.x+Ge)*Je,Qe.y=Qe.depth*ot})}return we}function Ie(we){var ye=we.children,Ce=we.parent.children,Re=we.i?Ce[we.i-1]:null;if(ye){(function(He){for(var Ge,Je=0,ot=0,Qe=He.children,vt=Qe.length;--vt>=0;)(Ge=Qe[vt]).z+=Je,Ge.m+=Je,Je+=Ge.s+(ot+=Ge.c)})(we);var ze=(ye[0].z+ye[ye.length-1].z)/2;Re?(we.z=Re.z+oe(we._,Re._),we.m=we.z-ze):we.z=ze}else Re&&(we.z=Re.z+oe(we._,Re._));we.parent.A=function(He,Ge,Je){if(Ge){for(var ot,Qe=He,vt=He,xt=Ge,mt=Qe.parent.children[0],rt=Qe.m,it=vt.m,Tt=xt.m,Mt=mt.m;xt=ne(xt),Qe=Q(Qe),xt&&Qe;)mt=Q(mt),(vt=ne(vt)).a=He,(ot=xt.z+Tt-Qe.z-rt+oe(xt._,Qe._))>0&&(re(ae(xt,He,Je),He,ot),rt+=ot,it+=ot),Tt+=xt.m,rt+=Qe.m,Mt+=mt.m,it+=vt.m;xt&&!ne(vt)&&(vt.t=xt,vt.m+=Tt-it),Qe&&!Q(mt)&&(mt.t=Qe,mt.m+=rt-Mt,Je=He)}return Je}(we,Re,we.parent.A||Ce[0])}function Fe(we){we._.x=we.z+we.parent.m,we.m+=we.parent.m}function ce(we){we.x*=he,we.y=we.depth*Ee}return be.separation=function(we){return arguments.length?(oe=we,be):oe},be.size=function(we){return arguments.length?(ke=!1,he=+we[0],Ee=+we[1],be):ke?null:[he,Ee]},be.nodeSize=function(we){return arguments.length?(ke=!0,he=+we[0],Ee=+we[1],be):ke?[he,Ee]:null},be}function ge(oe,he,Ee,ke,be){for(var Ie,Fe=oe.children,ce=-1,we=Fe.length,ye=oe.value&&(be-Ee)/oe.value;++ce<we;)(Ie=Fe[ce]).x0=he,Ie.x1=ke,Ie.y0=Ee,Ie.y1=Ee+=Ie.value*ye}ue.prototype=Object.create(r.prototype);var _e=(1+Math.sqrt(5))/2;function me(oe,he,Ee,ke,be,Ie){for(var Fe,ce,we,ye,Ce,Re,ze,He,Ge,Je,ot,Qe=[],vt=he.children,xt=0,mt=0,rt=vt.length,it=he.value;xt<rt;){we=be-Ee,ye=Ie-ke;do Ce=vt[mt++].value;while(!Ce&&mt<rt);for(Re=ze=Ce,ot=Ce*Ce*(Je=Math.max(ye/we,we/ye)/(it*oe)),Ge=Math.max(ze/ot,ot/Re);mt<rt;++mt){if(Ce+=ce=vt[mt].value,ce<Re&&(Re=ce),ce>ze&&(ze=ce),ot=Ce*Ce*Je,(He=Math.max(ze/ot,ot/Re))>Ge){Ce-=ce;break}Ge=He}Qe.push(Fe={value:Ce,dice:we<ye,children:vt.slice(xt,mt)}),Fe.dice?N(Fe,Ee,ke,be,it?ke+=ye*Ce/it:Ie):ge(Fe,Ee,ke,it?Ee+=we*Ce/it:be,Ie),it-=Ce,xt=mt}return Qe}var ve=function oe(he){function Ee(ke,be,Ie,Fe,ce){me(he,ke,be,Ie,Fe,ce)}return Ee.ratio=function(ke){return oe((ke=+ke)>1?ke:1)},Ee}(_e);function Oe(){var oe=ve,he=!1,Ee=1,ke=1,be=[0],Ie=E,Fe=E,ce=E,we=E,ye=E;function Ce(ze){return ze.x0=ze.y0=0,ze.x1=Ee,ze.y1=ke,ze.eachBefore(Re),be=[0],he&&ze.eachBefore(H),ze}function Re(ze){var He=be[ze.depth],Ge=ze.x0+He,Je=ze.y0+He,ot=ze.x1-He,Qe=ze.y1-He;ot<Ge&&(Ge=ot=(Ge+ot)/2),Qe<Je&&(Je=Qe=(Je+Qe)/2),ze.x0=Ge,ze.y0=Je,ze.x1=ot,ze.y1=Qe,ze.children&&(He=be[ze.depth+1]=Ie(ze)/2,Ge+=ye(ze)-He,Je+=Fe(ze)-He,(ot-=ce(ze)-He)<Ge&&(Ge=ot=(Ge+ot)/2),(Qe-=we(ze)-He)<Je&&(Je=Qe=(Je+Qe)/2),oe(ze,Ge,Je,ot,Qe))}return Ce.round=function(ze){return arguments.length?(he=!!ze,Ce):he},Ce.size=function(ze){return arguments.length?(Ee=+ze[0],ke=+ze[1],Ce):[Ee,ke]},Ce.tile=function(ze){return arguments.length?(oe=w(ze),Ce):oe},Ce.padding=function(ze){return arguments.length?Ce.paddingInner(ze).paddingOuter(ze):Ce.paddingInner()},Ce.paddingInner=function(ze){return arguments.length?(Ie=typeof ze=="function"?ze:L(+ze),Ce):Ie},Ce.paddingOuter=function(ze){return arguments.length?Ce.paddingTop(ze).paddingRight(ze).paddingBottom(ze).paddingLeft(ze):Ce.paddingTop()},Ce.paddingTop=function(ze){return arguments.length?(Fe=typeof ze=="function"?ze:L(+ze),Ce):Fe},Ce.paddingRight=function(ze){return arguments.length?(ce=typeof ze=="function"?ze:L(+ze),Ce):ce},Ce.paddingBottom=function(ze){return arguments.length?(we=typeof ze=="function"?ze:L(+ze),Ce):we},Ce.paddingLeft=function(ze){return arguments.length?(ye=typeof ze=="function"?ze:L(+ze),Ce):ye},Ce}function Me(oe,he,Ee,ke,be){var Ie,Fe,ce=oe.children,we=ce.length,ye=new Array(we+1);for(ye[0]=Fe=Ie=0;Ie<we;++Ie)ye[Ie+1]=Fe+=ce[Ie].value;(function Ce(Re,ze,He,Ge,Je,ot,Qe){if(Re>=ze-1){var vt=ce[Re];return vt.x0=Ge,vt.y0=Je,vt.x1=ot,void(vt.y1=Qe)}for(var xt=ye[Re],mt=He/2+xt,rt=Re+1,it=ze-1;rt<it;){var Tt=rt+it>>>1;ye[Tt]<mt?rt=Tt+1:it=Tt}mt-ye[rt-1]<ye[rt]-mt&&Re+1<rt&&--rt;var Mt=ye[rt]-xt,Pt=He-Mt;if(ot-Ge>Qe-Je){var kt=(Ge*Pt+ot*Mt)/He;Ce(Re,rt,Mt,Ge,Je,kt,Qe),Ce(rt,ze,Pt,kt,Je,ot,Qe)}else{var Ze=(Je*Pt+Qe*Mt)/He;Ce(Re,rt,Mt,Ge,Je,ot,Ze),Ce(rt,ze,Pt,Ge,Ze,ot,Qe)}})(0,we,oe.value,he,Ee,ke,be)}function Te(oe,he,Ee,ke,be){(1&oe.depth?ge:N)(oe,he,Ee,ke,be)}var se=function oe(he){function Ee(ke,be,Ie,Fe,ce){if((we=ke._squarify)&&we.ratio===he)for(var we,ye,Ce,Re,ze,He=-1,Ge=we.length,Je=ke.value;++He<Ge;){for(Ce=(ye=we[He]).children,Re=ye.value=0,ze=Ce.length;Re<ze;++Re)ye.value+=Ce[Re].value;ye.dice?N(ye,be,Ie,Fe,Ie+=(ce-Ie)*ye.value/Je):ge(ye,be,Ie,be+=(Fe-be)*ye.value/Je,ce),Je-=ye.value}else ke._squarify=we=me(he,ke,be,Ie,Fe,ce),we.ratio=he}return Ee.ratio=function(ke){return oe((ke=+ke)>1?ke:1)},Ee}(_e)},45879:function(ee,D,e){e.d(D,{h5:function(){return p}});var M=Math.PI,k=2*M,l=1e-6,T=k-l;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function d(){return new b}b.prototype=d.prototype={constructor:b,moveTo:function(c,x){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,x){this._+="L"+(this._x1=+c)+","+(this._y1=+x)},quadraticCurveTo:function(c,x,g,h){this._+="Q"+ +c+","+ +x+","+(this._x1=+g)+","+(this._y1=+h)},bezierCurveTo:function(c,x,g,h,y,v){this._+="C"+ +c+","+ +x+","+ +g+","+ +h+","+(this._x1=+y)+","+(this._y1=+v)},arcTo:function(c,x,g,h,y){c=+c,x=+x,g=+g,h=+h,y=+y;var v=this._x1,m=this._y1,_=g-c,f=h-x,S=v-c,w=m-x,E=S*S+w*w;if(y<0)throw new Error("negative radius: "+y);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=x);else if(E>l)if(Math.abs(w*_-f*S)>l&&y){var L=g-v,C=h-m,P=_*_+f*f,z=L*L+C*C,G=Math.sqrt(P),O=Math.sqrt(E),H=y*Math.tan((M-Math.acos((P+E-z)/(2*G*O)))/2),N=H/O,B=H/G;Math.abs(N-1)>l&&(this._+="L"+(c+N*S)+","+(x+N*w)),this._+="A"+y+","+y+",0,0,"+ +(w*L>S*C)+","+(this._x1=c+B*_)+","+(this._y1=x+B*f)}else this._+="L"+(this._x1=c)+","+(this._y1=x)},arc:function(c,x,g,h,y,v){c=+c,x=+x,v=!!v;var m=(g=+g)*Math.cos(h),_=g*Math.sin(h),f=c+m,S=x+_,w=1^v,E=v?h-y:y-h;if(g<0)throw new Error("negative radius: "+g);this._x1===null?this._+="M"+f+","+S:(Math.abs(this._x1-f)>l||Math.abs(this._y1-S)>l)&&(this._+="L"+f+","+S),g&&(E<0&&(E=E%k+k),E>T?this._+="A"+g+","+g+",0,1,"+w+","+(c-m)+","+(x-_)+"A"+g+","+g+",0,1,"+w+","+(this._x1=f)+","+(this._y1=S):E>l&&(this._+="A"+g+","+g+",0,"+ +(E>=M)+","+w+","+(this._x1=c+g*Math.cos(y))+","+(this._y1=x+g*Math.sin(y))))},rect:function(c,x,g,h){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)+"h"+ +g+"v"+ +h+"h"+-g+"Z"},toString:function(){return this._}};var s=d,t=Array.prototype.slice;function i(c){return function(){return c}}function r(c){return c[0]}function n(c){return c[1]}function o(c){return c.source}function a(c){return c.target}function u(c,x,g,h,y){c.moveTo(x,g),c.bezierCurveTo(x=(x+h)/2,g,x,y,h,y)}function p(){return function(c){var x=o,g=a,h=r,y=n,v=null;function m(){var _,f=t.call(arguments),S=x.apply(this,f),w=g.apply(this,f);if(v||(v=_=s()),c(v,+h.apply(this,(f[0]=S,f)),+y.apply(this,f),+h.apply(this,(f[0]=w,f)),+y.apply(this,f)),_)return v=null,_+""||null}return m.source=function(_){return arguments.length?(x=_,m):x},m.target=function(_){return arguments.length?(g=_,m):g},m.x=function(_){return arguments.length?(h=typeof _=="function"?_:i(+_),m):h},m.y=function(_){return arguments.length?(y=typeof _=="function"?_:i(+_),m):y},m.context=function(_){return arguments.length?(v=_??null,m):v},m}(u)}},84096:function(ee,D,e){e.d(D,{i$:function(){return o},Dq:function(){return r},g0:function(){return a}});var M=e(58176),k=e(48480),l=e(59879),T=e(82301),b=e(34823),d=e(79791);function s(rt){if(0<=rt.y&&rt.y<100){var it=new Date(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L);return it.setFullYear(rt.y),it}return new Date(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L)}function t(rt){if(0<=rt.y&&rt.y<100){var it=new Date(Date.UTC(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L));return it.setUTCFullYear(rt.y),it}return new Date(Date.UTC(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L))}function i(rt,it,Tt){return{y:rt,m:it,d:Tt,H:0,M:0,S:0,L:0}}function r(rt){var it=rt.dateTime,Tt=rt.date,Mt=rt.time,Pt=rt.periods,kt=rt.days,Ze=rt.shortDays,Xe=rt.months,Ve=rt.shortMonths,We=y(Pt),at=v(Pt),et=y(kt),De=v(kt),Be=y(Ze),nt=v(Ze),tt=y(Xe),dt=v(Xe),ht=y(Ve),gt=v(Ve),ut={a:function(Dt){return Ze[Dt.getDay()]},A:function(Dt){return kt[Dt.getDay()]},b:function(Dt){return Ve[Dt.getMonth()]},B:function(Dt){return Xe[Dt.getMonth()]},c:null,d:Y,e:Y,f:ae,H:W,I:Q,j:ne,L:re,m:ue,M:pe,p:function(Dt){return Pt[+(Dt.getHours()>=12)]},q:function(Dt){return 1+~~(Dt.getMonth()/3)},Q:xt,s:mt,S:ge,u:_e,U:me,V:ve,w:Oe,W:Me,x:null,X:null,y:Te,Y:se,Z:oe,"%":vt},wt={a:function(Dt){return Ze[Dt.getUTCDay()]},A:function(Dt){return kt[Dt.getUTCDay()]},b:function(Dt){return Ve[Dt.getUTCMonth()]},B:function(Dt){return Xe[Dt.getUTCMonth()]},c:null,d:he,e:he,f:Fe,H:Ee,I:ke,j:be,L:Ie,m:ce,M:we,p:function(Dt){return Pt[+(Dt.getUTCHours()>=12)]},q:function(Dt){return 1+~~(Dt.getUTCMonth()/3)},Q:xt,s:mt,S:ye,u:Ce,U:Re,V:ze,w:He,W:Ge,x:null,X:null,y:Je,Y:ot,Z:Qe,"%":vt},ct={a:function(Dt,Nt,Qt){var jt=Be.exec(Nt.slice(Qt));return jt?(Dt.w=nt[jt[0].toLowerCase()],Qt+jt[0].length):-1},A:function(Dt,Nt,Qt){var jt=et.exec(Nt.slice(Qt));return jt?(Dt.w=De[jt[0].toLowerCase()],Qt+jt[0].length):-1},b:function(Dt,Nt,Qt){var jt=ht.exec(Nt.slice(Qt));return jt?(Dt.m=gt[jt[0].toLowerCase()],Qt+jt[0].length):-1},B:function(Dt,Nt,Qt){var jt=tt.exec(Nt.slice(Qt));return jt?(Dt.m=dt[jt[0].toLowerCase()],Qt+jt[0].length):-1},c:function(Dt,Nt,Qt){return It(Dt,it,Nt,Qt)},d:G,e:G,f:q,H,I:H,j:O,L:V,m:z,M:N,p:function(Dt,Nt,Qt){var jt=We.exec(Nt.slice(Qt));return jt?(Dt.p=at[jt[0].toLowerCase()],Qt+jt[0].length):-1},q:P,Q:K,s:J,S:B,u:_,U:f,V:S,w:m,W:w,x:function(Dt,Nt,Qt){return It(Dt,Tt,Nt,Qt)},X:function(Dt,Nt,Qt){return It(Dt,Mt,Nt,Qt)},y:L,Y:E,Z:C,"%":te};function ft(Dt,Nt){return function(Qt){var jt,Ut,Xt,gn=[],Mn=-1,cn=0,qt=Dt.length;for(Qt instanceof Date||(Qt=new Date(+Qt));++Mn<qt;)Dt.charCodeAt(Mn)===37&&(gn.push(Dt.slice(cn,Mn)),(Ut=u[jt=Dt.charAt(++Mn)])!=null?jt=Dt.charAt(++Mn):Ut=jt==="e"?" ":"0",(Xt=Nt[jt])&&(jt=Xt(Qt,Ut)),gn.push(jt),cn=Mn+1);return gn.push(Dt.slice(cn,Mn)),gn.join("")}}function bt(Dt,Nt){return function(Qt){var jt,Ut,Xt=i(1900,void 0,1);if(It(Xt,Dt,Qt+="",0)!=Qt.length)return null;if("Q"in Xt)return new Date(Xt.Q);if("s"in Xt)return new Date(1e3*Xt.s+("L"in Xt?Xt.L:0));if(Nt&&!("Z"in Xt)&&(Xt.Z=0),"p"in Xt&&(Xt.H=Xt.H%12+12*Xt.p),Xt.m===void 0&&(Xt.m="q"in Xt?Xt.q:0),"V"in Xt){if(Xt.V<1||Xt.V>53)return null;"w"in Xt||(Xt.w=1),"Z"in Xt?(Ut=(jt=t(i(Xt.y,0,1))).getUTCDay(),jt=Ut>4||Ut===0?M.l6.ceil(jt):(0,M.l6)(jt),jt=k.Z.offset(jt,7*(Xt.V-1)),Xt.y=jt.getUTCFullYear(),Xt.m=jt.getUTCMonth(),Xt.d=jt.getUTCDate()+(Xt.w+6)%7):(Ut=(jt=s(i(Xt.y,0,1))).getDay(),jt=Ut>4||Ut===0?l.wA.ceil(jt):(0,l.wA)(jt),jt=T.Z.offset(jt,7*(Xt.V-1)),Xt.y=jt.getFullYear(),Xt.m=jt.getMonth(),Xt.d=jt.getDate()+(Xt.w+6)%7)}else("W"in Xt||"U"in Xt)&&("w"in Xt||(Xt.w="u"in Xt?Xt.u%7:"W"in Xt?1:0),Ut="Z"in Xt?t(i(Xt.y,0,1)).getUTCDay():s(i(Xt.y,0,1)).getDay(),Xt.m=0,Xt.d="W"in Xt?(Xt.w+6)%7+7*Xt.W-(Ut+5)%7:Xt.w+7*Xt.U-(Ut+6)%7);return"Z"in Xt?(Xt.H+=Xt.Z/100|0,Xt.M+=Xt.Z%100,t(Xt)):s(Xt)}}function It(Dt,Nt,Qt,jt){for(var Ut,Xt,gn=0,Mn=Nt.length,cn=Qt.length;gn<Mn;){if(jt>=cn)return-1;if((Ut=Nt.charCodeAt(gn++))===37){if(Ut=Nt.charAt(gn++),!(Xt=ct[Ut in u?Nt.charAt(gn++):Ut])||(jt=Xt(Dt,Qt,jt))<0)return-1}else if(Ut!=Qt.charCodeAt(jt++))return-1}return jt}return ut.x=ft(Tt,ut),ut.X=ft(Mt,ut),ut.c=ft(it,ut),wt.x=ft(Tt,wt),wt.X=ft(Mt,wt),wt.c=ft(it,wt),{format:function(Dt){var Nt=ft(Dt+="",ut);return Nt.toString=function(){return Dt},Nt},parse:function(Dt){var Nt=bt(Dt+="",!1);return Nt.toString=function(){return Dt},Nt},utcFormat:function(Dt){var Nt=ft(Dt+="",wt);return Nt.toString=function(){return Dt},Nt},utcParse:function(Dt){var Nt=bt(Dt+="",!0);return Nt.toString=function(){return Dt},Nt}}}var n,o,a,u={"-":"",_:" ",0:"0"},p=/^\s*\d+/,c=/^%/,x=/[\\^$*+?|[\]().{}]/g;function g(rt,it,Tt){var Mt=rt<0?"-":"",Pt=(Mt?-rt:rt)+"",kt=Pt.length;return Mt+(kt<Tt?new Array(Tt-kt+1).join(it)+Pt:Pt)}function h(rt){return rt.replace(x,"\\$&")}function y(rt){return new RegExp("^(?:"+rt.map(h).join("|")+")","i")}function v(rt){for(var it={},Tt=-1,Mt=rt.length;++Tt<Mt;)it[rt[Tt].toLowerCase()]=Tt;return it}function m(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+1));return Mt?(rt.w=+Mt[0],Tt+Mt[0].length):-1}function _(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+1));return Mt?(rt.u=+Mt[0],Tt+Mt[0].length):-1}function f(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+2));return Mt?(rt.U=+Mt[0],Tt+Mt[0].length):-1}function S(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+2));return Mt?(rt.V=+Mt[0],Tt+Mt[0].length):-1}function w(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+2));return Mt?(rt.W=+Mt[0],Tt+Mt[0].length):-1}function E(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+4));return Mt?(rt.y=+Mt[0],Tt+Mt[0].length):-1}function L(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+2));return Mt?(rt.y=+Mt[0]+(+Mt[0]>68?1900:2e3),Tt+Mt[0].length):-1}function C(rt,it,Tt){var Mt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(it.slice(Tt,Tt+6));return Mt?(rt.Z=Mt[1]?0:-(Mt[2]+(Mt[3]||"00")),Tt+Mt[0].length):-1}function P(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+1));return Mt?(rt.q=3*Mt[0]-3,Tt+Mt[0].length):-1}function z(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+2));return Mt?(rt.m=Mt[0]-1,Tt+Mt[0].length):-1}function G(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+2));return Mt?(rt.d=+Mt[0],Tt+Mt[0].length):-1}function O(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+3));return Mt?(rt.m=0,rt.d=+Mt[0],Tt+Mt[0].length):-1}function H(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+2));return Mt?(rt.H=+Mt[0],Tt+Mt[0].length):-1}function N(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+2));return Mt?(rt.M=+Mt[0],Tt+Mt[0].length):-1}function B(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+2));return Mt?(rt.S=+Mt[0],Tt+Mt[0].length):-1}function V(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+3));return Mt?(rt.L=+Mt[0],Tt+Mt[0].length):-1}function q(rt,it,Tt){var Mt=p.exec(it.slice(Tt,Tt+6));return Mt?(rt.L=Math.floor(Mt[0]/1e3),Tt+Mt[0].length):-1}function te(rt,it,Tt){var Mt=c.exec(it.slice(Tt,Tt+1));return Mt?Tt+Mt[0].length:-1}function K(rt,it,Tt){var Mt=p.exec(it.slice(Tt));return Mt?(rt.Q=+Mt[0],Tt+Mt[0].length):-1}function J(rt,it,Tt){var Mt=p.exec(it.slice(Tt));return Mt?(rt.s=+Mt[0],Tt+Mt[0].length):-1}function Y(rt,it){return g(rt.getDate(),it,2)}function W(rt,it){return g(rt.getHours(),it,2)}function Q(rt,it){return g(rt.getHours()%12||12,it,2)}function ne(rt,it){return g(1+T.Z.count((0,b.Z)(rt),rt),it,3)}function re(rt,it){return g(rt.getMilliseconds(),it,3)}function ae(rt,it){return re(rt,it)+"000"}function ue(rt,it){return g(rt.getMonth()+1,it,2)}function pe(rt,it){return g(rt.getMinutes(),it,2)}function ge(rt,it){return g(rt.getSeconds(),it,2)}function _e(rt){var it=rt.getDay();return it===0?7:it}function me(rt,it){return g(l.OM.count((0,b.Z)(rt)-1,rt),it,2)}function ve(rt,it){var Tt=rt.getDay();return rt=Tt>=4||Tt===0?(0,l.bL)(rt):l.bL.ceil(rt),g(l.bL.count((0,b.Z)(rt),rt)+((0,b.Z)(rt).getDay()===4),it,2)}function Oe(rt){return rt.getDay()}function Me(rt,it){return g(l.wA.count((0,b.Z)(rt)-1,rt),it,2)}function Te(rt,it){return g(rt.getFullYear()%100,it,2)}function se(rt,it){return g(rt.getFullYear()%1e4,it,4)}function oe(rt){var it=rt.getTimezoneOffset();return(it>0?"-":(it*=-1,"+"))+g(it/60|0,"0",2)+g(it%60,"0",2)}function he(rt,it){return g(rt.getUTCDate(),it,2)}function Ee(rt,it){return g(rt.getUTCHours(),it,2)}function ke(rt,it){return g(rt.getUTCHours()%12||12,it,2)}function be(rt,it){return g(1+k.Z.count((0,d.Z)(rt),rt),it,3)}function Ie(rt,it){return g(rt.getUTCMilliseconds(),it,3)}function Fe(rt,it){return Ie(rt,it)+"000"}function ce(rt,it){return g(rt.getUTCMonth()+1,it,2)}function we(rt,it){return g(rt.getUTCMinutes(),it,2)}function ye(rt,it){return g(rt.getUTCSeconds(),it,2)}function Ce(rt){var it=rt.getUTCDay();return it===0?7:it}function Re(rt,it){return g(M.Ox.count((0,d.Z)(rt)-1,rt),it,2)}function ze(rt,it){var Tt=rt.getUTCDay();return rt=Tt>=4||Tt===0?(0,M.hB)(rt):M.hB.ceil(rt),g(M.hB.count((0,d.Z)(rt),rt)+((0,d.Z)(rt).getUTCDay()===4),it,2)}function He(rt){return rt.getUTCDay()}function Ge(rt,it){return g(M.l6.count((0,d.Z)(rt)-1,rt),it,2)}function Je(rt,it){return g(rt.getUTCFullYear()%100,it,2)}function ot(rt,it){return g(rt.getUTCFullYear()%1e4,it,4)}function Qe(){return"+0000"}function vt(){return"%"}function xt(rt){return+rt}function mt(rt){return Math.floor(+rt/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),o=n.format,n.parse,a=n.utcFormat,n.utcParse},82301:function(ee,D,e){e.d(D,{a:function(){return T}});var M=e(30052),k=e(54263),l=(0,M.Z)(function(b){b.setHours(0,0,0,0)},function(b,d){b.setDate(b.getDate()+d)},function(b,d){return(d-b-(d.getTimezoneOffset()-b.getTimezoneOffset())*k.yB)/k.UD},function(b){return b.getDate()-1});D.Z=l;var T=l.range},54263:function(ee,D,e){e.d(D,{UD:function(){return T},Y2:function(){return l},Ym:function(){return M},iM:function(){return b},yB:function(){return k}});var M=1e3,k=6e4,l=36e5,T=864e5,b=6048e5},81041:function(ee,D,e){e.r(D),e.d(D,{timeDay:function(){return p.Z},timeDays:function(){return p.a},timeFriday:function(){return c.mC},timeFridays:function(){return c.b$},timeHour:function(){return a},timeHours:function(){return u},timeInterval:function(){return M.Z},timeMillisecond:function(){return l},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return c.wA},timeMondays:function(){return c.bJ},timeMonth:function(){return g},timeMonths:function(){return h},timeSaturday:function(){return c.EY},timeSaturdays:function(){return c.Ff},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return c.OM},timeSundays:function(){return c.vm},timeThursday:function(){return c.bL},timeThursdays:function(){return c.$t},timeTuesday:function(){return c.sy},timeTuesdays:function(){return c.aU},timeWednesday:function(){return c.zg},timeWednesdays:function(){return c.Ld},timeWeek:function(){return c.OM},timeWeeks:function(){return c.vm},timeYear:function(){return y.Z},timeYears:function(){return y.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return L.QQ},utcFridays:function(){return L.fz},utcHour:function(){return S},utcHours:function(){return w},utcMillisecond:function(){return l},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return _},utcMonday:function(){return L.l6},utcMondays:function(){return L.$3},utcMonth:function(){return P},utcMonths:function(){return z},utcSaturday:function(){return L.g4},utcSaturdays:function(){return L.Q_},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return L.Ox},utcSundays:function(){return L.SU},utcThursday:function(){return L.hB},utcThursdays:function(){return L.xj},utcTuesday:function(){return L.J1},utcTuesdays:function(){return L.DK},utcWednesday:function(){return L.b3},utcWednesdays:function(){return L.uy},utcWeek:function(){return L.Ox},utcWeeks:function(){return L.SU},utcYear:function(){return G.Z},utcYears:function(){return G.D}});var M=e(30052),k=(0,M.Z)(function(){},function(O,H){O.setTime(+O+H)},function(O,H){return H-O});k.every=function(O){return O=Math.floor(O),isFinite(O)&&O>0?O>1?(0,M.Z)(function(H){H.setTime(Math.floor(H/O)*O)},function(H,N){H.setTime(+H+N*O)},function(H,N){return(N-H)/O}):k:null};var l=k,T=k.range,b=e(54263),d=(0,M.Z)(function(O){O.setTime(O-O.getMilliseconds())},function(O,H){O.setTime(+O+H*b.Ym)},function(O,H){return(H-O)/b.Ym},function(O){return O.getUTCSeconds()}),s=d,t=d.range,i=(0,M.Z)(function(O){O.setTime(O-O.getMilliseconds()-O.getSeconds()*b.Ym)},function(O,H){O.setTime(+O+H*b.yB)},function(O,H){return(H-O)/b.yB},function(O){return O.getMinutes()}),r=i,n=i.range,o=(0,M.Z)(function(O){O.setTime(O-O.getMilliseconds()-O.getSeconds()*b.Ym-O.getMinutes()*b.yB)},function(O,H){O.setTime(+O+H*b.Y2)},function(O,H){return(H-O)/b.Y2},function(O){return O.getHours()}),a=o,u=o.range,p=e(82301),c=e(59879),x=(0,M.Z)(function(O){O.setDate(1),O.setHours(0,0,0,0)},function(O,H){O.setMonth(O.getMonth()+H)},function(O,H){return H.getMonth()-O.getMonth()+12*(H.getFullYear()-O.getFullYear())},function(O){return O.getMonth()}),g=x,h=x.range,y=e(34823),v=(0,M.Z)(function(O){O.setUTCSeconds(0,0)},function(O,H){O.setTime(+O+H*b.yB)},function(O,H){return(H-O)/b.yB},function(O){return O.getUTCMinutes()}),m=v,_=v.range,f=(0,M.Z)(function(O){O.setUTCMinutes(0,0,0)},function(O,H){O.setTime(+O+H*b.Y2)},function(O,H){return(H-O)/b.Y2},function(O){return O.getUTCHours()}),S=f,w=f.range,E=e(48480),L=e(58176),C=(0,M.Z)(function(O){O.setUTCDate(1),O.setUTCHours(0,0,0,0)},function(O,H){O.setUTCMonth(O.getUTCMonth()+H)},function(O,H){return H.getUTCMonth()-O.getUTCMonth()+12*(H.getUTCFullYear()-O.getUTCFullYear())},function(O){return O.getUTCMonth()}),P=C,z=C.range,G=e(79791)},30052:function(ee,D,e){e.d(D,{Z:function(){return l}});var M=new Date,k=new Date;function l(T,b,d,s){function t(i){return T(i=arguments.length===0?new Date:new Date(+i)),i}return t.floor=function(i){return T(i=new Date(+i)),i},t.ceil=function(i){return T(i=new Date(i-1)),b(i,1),T(i),i},t.round=function(i){var r=t(i),n=t.ceil(i);return i-r<n-i?r:n},t.offset=function(i,r){return b(i=new Date(+i),r==null?1:Math.floor(r)),i},t.range=function(i,r,n){var o,a=[];if(i=t.ceil(i),n=n==null?1:Math.floor(n),!(i<r&&n>0))return a;do a.push(o=new Date(+i)),b(i,n),T(i);while(o<i&&i<r);return a},t.filter=function(i){return l(function(r){if(r>=r)for(;T(r),!i(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;b(r,-1),!i(r););else for(;--n>=0;)for(;b(r,1),!i(r););})},d&&(t.count=function(i,r){return M.setTime(+i),k.setTime(+r),T(M),T(k),Math.floor(d(M,k))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(s?function(r){return s(r)%i==0}:function(r){return t.count(0,r)%i==0}):t:null}),t}},48480:function(ee,D,e){e.d(D,{y:function(){return T}});var M=e(30052),k=e(54263),l=(0,M.Z)(function(b){b.setUTCHours(0,0,0,0)},function(b,d){b.setUTCDate(b.getUTCDate()+d)},function(b,d){return(d-b)/k.UD},function(b){return b.getUTCDate()-1});D.Z=l;var T=l.range},58176:function(ee,D,e){e.d(D,{$3:function(){return o},DK:function(){return a},J1:function(){return d},Ox:function(){return T},QQ:function(){return i},Q_:function(){return x},SU:function(){return n},b3:function(){return s},fz:function(){return c},g4:function(){return r},hB:function(){return t},l6:function(){return b},uy:function(){return u},xj:function(){return p}});var M=e(30052),k=e(54263);function l(g){return(0,M.Z)(function(h){h.setUTCDate(h.getUTCDate()-(h.getUTCDay()+7-g)%7),h.setUTCHours(0,0,0,0)},function(h,y){h.setUTCDate(h.getUTCDate()+7*y)},function(h,y){return(y-h)/k.iM})}var T=l(0),b=l(1),d=l(2),s=l(3),t=l(4),i=l(5),r=l(6),n=T.range,o=b.range,a=d.range,u=s.range,p=t.range,c=i.range,x=r.range},79791:function(ee,D,e){e.d(D,{D:function(){return l}});var M=e(30052),k=(0,M.Z)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,b){T.setUTCFullYear(T.getUTCFullYear()+b)},function(T,b){return b.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.Z)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/T)*T),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,d){b.setUTCFullYear(b.getUTCFullYear()+d*T)}):null},D.Z=k;var l=k.range},59879:function(ee,D,e){e.d(D,{$t:function(){return p},EY:function(){return r},Ff:function(){return x},Ld:function(){return u},OM:function(){return T},aU:function(){return a},b$:function(){return c},bJ:function(){return o},bL:function(){return t},mC:function(){return i},sy:function(){return d},vm:function(){return n},wA:function(){return b},zg:function(){return s}});var M=e(30052),k=e(54263);function l(g){return(0,M.Z)(function(h){h.setDate(h.getDate()-(h.getDay()+7-g)%7),h.setHours(0,0,0,0)},function(h,y){h.setDate(h.getDate()+7*y)},function(h,y){return(y-h-(y.getTimezoneOffset()-h.getTimezoneOffset())*k.yB)/k.iM})}var T=l(0),b=l(1),d=l(2),s=l(3),t=l(4),i=l(5),r=l(6),n=T.range,o=b.range,a=d.range,u=s.range,p=t.range,c=i.range,x=r.range},34823:function(ee,D,e){e.d(D,{g:function(){return l}});var M=e(30052),k=(0,M.Z)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,b){T.setFullYear(T.getFullYear()+b)},function(T,b){return b.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.Z)(function(b){b.setFullYear(Math.floor(b.getFullYear()/T)*T),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,d){b.setFullYear(b.getFullYear()+d*T)}):null},D.Z=k;var l=k.range},17045:function(ee,D,e){var M=e(8709),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",l=Object.prototype.toString,T=Array.prototype.concat,b=Object.defineProperty,d=e(55622)(),s=b&&d,t=function(r,n,o,a){if(n in r){if(a===!0){if(r[n]===o)return}else if(typeof(u=a)!="function"||l.call(u)!=="[object Function]"||!a())return}var u;s?b(r,n,{configurable:!0,enumerable:!1,value:o,writable:!0}):r[n]=o},i=function(r,n){var o=arguments.length>2?arguments[2]:{},a=M(n);k&&(a=T.call(a,Object.getOwnPropertySymbols(n)));for(var u=0;u<a.length;u+=1)t(r,a[u],n[a[u]],o[a[u]])};i.supportsDescriptors=!!s,ee.exports=i},46775:function(ee){ee.exports=function(){for(var D=0;D<arguments.length;D++)if(arguments[D]!==void 0)return arguments[D]}},53545:function(ee){ee.exports=M;var D=(M.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function M(l,T){Array.isArray(l)&&(l=l.join(", "));var b,d={},s=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?b=k(T):Array.isArray(T)?b=T:(T.o?b=k(T.o):T.pairs&&(b=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(t=T.threshold))),b||(b=e),D.font=s+"px "+l;for(var i=0;i<b.length;i++){var r=b[i],n=D.measureText(r[0]).width+D.measureText(r[1]).width,o=D.measureText(r).width;if(Math.abs(n-o)>s*t){var a=(o-n)/s;d[r]=1e3*a}}return d}function k(l){for(var T=[],b=l[0];b<=l[1];b++)for(var d=String.fromCharCode(b),s=l[0];s<l[1];s++){var t=d+String.fromCharCode(s);T.push(t)}return T}M.createPairs=k,M.ascii=e},31457:function(ee,D,e){var M=e(65185),k=e(18625),l={M:"moveTo",C:"bezierCurveTo"};ee.exports=function(T,b){T.beginPath(),k(M(b)).forEach(function(d){var s=d[0],t=d.slice(1);T[l[s]].apply(T,t)}),T.closePath()}},90660:function(ee){ee.exports=function(D){switch(D){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(ee){function D(e,M,k){var l=0|e[k];if(l<=0)return[];var T,b=new Array(l);if(k===e.length-1)for(T=0;T<l;++T)b[T]=M;else for(T=0;T<l;++T)b[T]=D(e,M,k+1);return b}ee.exports=function(e,M){switch(M===void 0&&(M=0),typeof e){case"number":if(e>0)return function(k,l){var T,b;for(T=new Array(k),b=0;b<k;++b)T[b]=l;return T}(0|e,M);break;case"object":if(typeof e.length=="number")return D(e,M,0)}return[]}},11474:function(ee){function D(S,w,E){E=E||2;var L,C,P,z,G,O,H,N=w&&w.length,B=N?w[0]*E:S.length,V=e(S,0,B,E,!0),q=[];if(!V||V.next===V.prev)return q;if(N&&(V=function(K,J,Y,W){var Q,ne,re,ae=[];for(Q=0,ne=J.length;Q<ne;Q++)(re=e(K,J[Q]*W,Q<ne-1?J[Q+1]*W:K.length,W,!1))===re.next&&(re.steiner=!0),ae.push(n(re));for(ae.sort(s),Q=0;Q<ae.length;Q++)t(ae[Q],Y),Y=M(Y,Y.next);return Y}(S,w,V,E)),S.length>80*E){L=P=S[0],C=z=S[1];for(var te=E;te<B;te+=E)(G=S[te])<L&&(L=G),(O=S[te+1])<C&&(C=O),G>P&&(P=G),O>z&&(z=O);H=(H=Math.max(P-L,z-C))!==0?1/H:0}return k(V,q,E,L,C,H),q}function e(S,w,E,L,C){var P,z;if(C===f(S,w,E,L)>0)for(P=w;P<E;P+=L)z=v(P,S[P],S[P+1],z);else for(P=E-L;P>=w;P-=L)z=v(P,S[P],S[P+1],z);return z&&p(z,z.next)&&(m(z),z=z.next),z}function M(S,w){if(!S)return S;w||(w=S);var E,L=S;do if(E=!1,L.steiner||!p(L,L.next)&&u(L.prev,L,L.next)!==0)L=L.next;else{if(m(L),(L=w=L.prev)===L.next)break;E=!0}while(E||L!==w);return w}function k(S,w,E,L,C,P,z){if(S){!z&&P&&function(N,B,V,q){var te=N;do te.z===null&&(te.z=r(te.x,te.y,B,V,q)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==N);te.prevZ.nextZ=null,te.prevZ=null,function(K){var J,Y,W,Q,ne,re,ae,ue,pe=1;do{for(Y=K,K=null,ne=null,re=0;Y;){for(re++,W=Y,ae=0,J=0;J<pe&&(ae++,W=W.nextZ);J++);for(ue=pe;ae>0||ue>0&&W;)ae!==0&&(ue===0||!W||Y.z<=W.z)?(Q=Y,Y=Y.nextZ,ae--):(Q=W,W=W.nextZ,ue--),ne?ne.nextZ=Q:K=Q,Q.prevZ=ne,ne=Q;Y=W}ne.nextZ=null,pe*=2}while(re>1)}(te)}(S,L,C,P);for(var G,O,H=S;S.prev!==S.next;)if(G=S.prev,O=S.next,P?T(S,L,C,P):l(S))w.push(G.i/E),w.push(S.i/E),w.push(O.i/E),m(S),S=O.next,H=O.next;else if((S=O)===H){z?z===1?k(S=b(M(S),w,E),w,E,L,C,P,2):z===2&&d(S,w,E,L,C,P):k(M(S),w,E,L,C,P,1);break}}}function l(S){var w=S.prev,E=S,L=S.next;if(u(w,E,L)>=0)return!1;for(var C=S.next.next;C!==S.prev;){if(o(w.x,w.y,E.x,E.y,L.x,L.y,C.x,C.y)&&u(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(S,w,E,L){var C=S.prev,P=S,z=S.next;if(u(C,P,z)>=0)return!1;for(var G=C.x<P.x?C.x<z.x?C.x:z.x:P.x<z.x?P.x:z.x,O=C.y<P.y?C.y<z.y?C.y:z.y:P.y<z.y?P.y:z.y,H=C.x>P.x?C.x>z.x?C.x:z.x:P.x>z.x?P.x:z.x,N=C.y>P.y?C.y>z.y?C.y:z.y:P.y>z.y?P.y:z.y,B=r(G,O,w,E,L),V=r(H,N,w,E,L),q=S.prevZ,te=S.nextZ;q&&q.z>=B&&te&&te.z<=V;){if(q!==S.prev&&q!==S.next&&o(C.x,C.y,P.x,P.y,z.x,z.y,q.x,q.y)&&u(q.prev,q,q.next)>=0||(q=q.prevZ,te!==S.prev&&te!==S.next&&o(C.x,C.y,P.x,P.y,z.x,z.y,te.x,te.y)&&u(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;q&&q.z>=B;){if(q!==S.prev&&q!==S.next&&o(C.x,C.y,P.x,P.y,z.x,z.y,q.x,q.y)&&u(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;te&&te.z<=V;){if(te!==S.prev&&te!==S.next&&o(C.x,C.y,P.x,P.y,z.x,z.y,te.x,te.y)&&u(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function b(S,w,E){var L=S;do{var C=L.prev,P=L.next.next;!p(C,P)&&c(C,L,L.next,P)&&h(C,P)&&h(P,C)&&(w.push(C.i/E),w.push(L.i/E),w.push(P.i/E),m(L),m(L.next),L=S=P),L=L.next}while(L!==S);return M(L)}function d(S,w,E,L,C,P){var z=S;do{for(var G=z.next.next;G!==z.prev;){if(z.i!==G.i&&a(z,G)){var O=y(z,G);return z=M(z,z.next),O=M(O,O.next),k(z,w,E,L,C,P),void k(O,w,E,L,C,P)}G=G.next}z=z.next}while(z!==S)}function s(S,w){return S.x-w.x}function t(S,w){if(w=function(L,C){var P,z=C,G=L.x,O=L.y,H=-1/0;do{if(O<=z.y&&O>=z.next.y&&z.next.y!==z.y){var N=z.x+(O-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(N<=G&&N>H){if(H=N,N===G){if(O===z.y)return z;if(O===z.next.y)return z.next}P=z.x<z.next.x?z:z.next}}z=z.next}while(z!==C);if(!P)return null;if(G===H)return P;var B,V=P,q=P.x,te=P.y,K=1/0;z=P;do G>=z.x&&z.x>=q&&G!==z.x&&o(O<te?G:H,O,q,te,O<te?H:G,O,z.x,z.y)&&(B=Math.abs(O-z.y)/(G-z.x),h(z,L)&&(B<K||B===K&&(z.x>P.x||z.x===P.x&&i(P,z)))&&(P=z,K=B)),z=z.next;while(z!==V);return P}(S,w),w){var E=y(w,S);M(w,w.next),M(E,E.next)}}function i(S,w){return u(S.prev,S,w.prev)<0&&u(w.next,S,S.next)<0}function r(S,w,E,L,C){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*C)|S<<8))|S<<4))|S<<2))|S<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-L)*C)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function n(S){var w=S,E=S;do(w.x<E.x||w.x===E.x&&w.y<E.y)&&(E=w),w=w.next;while(w!==S);return E}function o(S,w,E,L,C,P,z,G){return(C-z)*(w-G)-(S-z)*(P-G)>=0&&(S-z)*(L-G)-(E-z)*(w-G)>=0&&(E-z)*(P-G)-(C-z)*(L-G)>=0}function a(S,w){return S.next.i!==w.i&&S.prev.i!==w.i&&!function(E,L){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==L.i&&C.next.i!==L.i&&c(C,C.next,E,L))return!0;C=C.next}while(C!==E);return!1}(S,w)&&(h(S,w)&&h(w,S)&&function(E,L){var C=E,P=!1,z=(E.x+L.x)/2,G=(E.y+L.y)/2;do C.y>G!=C.next.y>G&&C.next.y!==C.y&&z<(C.next.x-C.x)*(G-C.y)/(C.next.y-C.y)+C.x&&(P=!P),C=C.next;while(C!==E);return P}(S,w)&&(u(S.prev,S,w.prev)||u(S,w.prev,w))||p(S,w)&&u(S.prev,S,S.next)>0&&u(w.prev,w,w.next)>0)}function u(S,w,E){return(w.y-S.y)*(E.x-w.x)-(w.x-S.x)*(E.y-w.y)}function p(S,w){return S.x===w.x&&S.y===w.y}function c(S,w,E,L){var C=g(u(S,w,E)),P=g(u(S,w,L)),z=g(u(E,L,S)),G=g(u(E,L,w));return C!==P&&z!==G||!(C!==0||!x(S,E,w))||!(P!==0||!x(S,L,w))||!(z!==0||!x(E,S,L))||!(G!==0||!x(E,w,L))}function x(S,w,E){return w.x<=Math.max(S.x,E.x)&&w.x>=Math.min(S.x,E.x)&&w.y<=Math.max(S.y,E.y)&&w.y>=Math.min(S.y,E.y)}function g(S){return S>0?1:S<0?-1:0}function h(S,w){return u(S.prev,S,S.next)<0?u(S,w,S.next)>=0&&u(S,S.prev,w)>=0:u(S,w,S.prev)<0||u(S,S.next,w)<0}function y(S,w){var E=new _(S.i,S.x,S.y),L=new _(w.i,w.x,w.y),C=S.next,P=w.prev;return S.next=w,w.prev=S,E.next=C,C.prev=E,L.next=E,E.prev=L,P.next=L,L.prev=P,L}function v(S,w,E,L){var C=new _(S,w,E);return L?(C.next=L.next,C.prev=L,L.next.prev=C,L.next=C):(C.prev=C,C.next=C),C}function m(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function _(S,w,E){this.i=S,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function f(S,w,E,L){for(var C=0,P=w,z=E-L;P<E;P+=L)C+=(S[z]-S[P])*(S[P+1]+S[z+1]),z=P;return C}ee.exports=D,ee.exports.default=D,D.deviation=function(S,w,E,L){var C=w&&w.length,P=C?w[0]*E:S.length,z=Math.abs(f(S,0,P,E));if(C)for(var G=0,O=w.length;G<O;G++){var H=w[G]*E,N=G<O-1?w[G+1]*E:S.length;z-=Math.abs(f(S,H,N,E))}var B=0;for(G=0;G<L.length;G+=3){var V=L[G]*E,q=L[G+1]*E,te=L[G+2]*E;B+=Math.abs((S[V]-S[te])*(S[q+1]-S[V+1])-(S[V]-S[q])*(S[te+1]-S[V+1]))}return z===0&&B===0?0:Math.abs((B-z)/z)},D.flatten=function(S){for(var w=S[0][0].length,E={vertices:[],holes:[],dimensions:w},L=0,C=0;C<S.length;C++){for(var P=0;P<S[C].length;P++)for(var z=0;z<w;z++)E.vertices.push(S[C][P][z]);C>0&&(L+=S[C-1].length,E.holes.push(L))}return E}},2502:function(ee,D,e){var M=e(68664);ee.exports=function(k,l){var T,b=[],d=[],s=[],t={},i=[];function r(h){s[h]=!1,t.hasOwnProperty(h)&&Object.keys(t[h]).forEach(function(y){delete t[h][y],s[y]&&r(y)})}function n(h){var y,v,m=!1;for(d.push(h),s[h]=!0,y=0;y<i[h].length;y++)(v=i[h][y])===T?(o(T,d),m=!0):s[v]||(m=n(v));if(m)r(h);else for(y=0;y<i[h].length;y++){v=i[h][y];var _=t[v];_||(_={},t[v]=_),_[v]=!0}return d.pop(),m}function o(h,y){var v=[].concat(y).concat(h);l?l(n):b.push(v)}function a(h){(function(E){for(var L=0;L<k.length;L++)L<E&&(k[L]=[]),k[L]=k[L].filter(function(C){return C>=E})})(h);for(var y,v=M(k).components.filter(function(E){return E.length>1}),m=1/0,_=0;_<v.length;_++)for(var f=0;f<v[_].length;f++)v[_][f]<m&&(m=v[_][f],y=_);var S=v[y];if(!S)return!1;var w=k.map(function(E,L){return S.indexOf(L)===-1?[]:E.filter(function(C){return S.indexOf(C)!==-1})});return{leastVertex:m,adjList:w}}T=0;for(var u=k.length;T<u;){var p=a(T);if(T=p.leastVertex,i=p.adjList){for(var c=0;c<i.length;c++)for(var x=0;x<i[c].length;x++){var g=i[c][x];s[+g]=!1,t[g]={}}n(T),T+=1}else T=u}return l?void 0:b}},16134:function(ee,D,e){var M=e(36672);ee.exports=function(){return M(this).length=0,this}},4892:function(ee,D,e){ee.exports=e(64404)()?Array.from:e(49441)},64404:function(ee){ee.exports=function(){var D,e,M=Array.from;return typeof M=="function"&&(e=M(D=["raz","dwa"]),!!(e&&e!==D&&e[1]==="dwa"))}},49441:function(ee,D,e){var M=e(8260).iterator,k=e(73051),l=e(33717),T=e(35976),b=e(78513),d=e(36672),s=e(95296),t=e(87963),i=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;ee.exports=function(a){var u,p,c,x,g,h,y,v,m,_,f=arguments[1],S=arguments[2];if(a=Object(d(a)),s(f)&&b(f),this&&this!==Array&&l(this))u=this;else{if(!f){if(k(a))return(g=a.length)!==1?Array.apply(null,a):((x=new Array(1))[0]=a[0],x);if(i(a)){for(x=new Array(g=a.length),p=0;p<g;++p)x[p]=a[p];return x}}x=[]}if(!i(a)){if((m=a[M])!==void 0){for(y=b(m).call(a),u&&(x=new u),v=y.next(),p=0;!v.done;)_=f?r.call(f,S,v.value,p):v.value,u?(n.value=_,o(x,p,n)):x[p]=_,v=y.next(),++p;g=p}else if(t(a)){for(g=a.length,u&&(x=new u),p=0,c=0;p<g;++p)_=a[p],p+1<g&&(h=_.charCodeAt(0))>=55296&&h<=56319&&(_+=a[++p]),_=f?r.call(f,S,_,c):_,u?(n.value=_,o(x,c,n)):x[c]=_,++c;g=c}}if(g===void 0)for(g=T(a.length),u&&(x=new u(g)),p=0;p<g;++p)_=f?r.call(f,S,a[p],p):a[p],u?(n.value=_,o(x,p,n)):x[p]=_;return u&&(n.value=null,x.length=g),x}},73051:function(ee){var D=Object.prototype.toString,e=D.call(function(){return arguments}());ee.exports=function(M){return D.call(M)===e}},33717:function(ee){var D=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ee.exports=function(M){return typeof M=="function"&&e(D.call(M))}},52345:function(ee){ee.exports=function(){}},9953:function(ee,D,e){ee.exports=e(90436)()?Math.sign:e(6069)},90436:function(ee){ee.exports=function(){var D=Math.sign;return typeof D=="function"&&D(10)===1&&D(-20)===-1}},6069:function(ee){ee.exports=function(D){return D=Number(D),isNaN(D)||D===0?D:D>0?1:-1}},56247:function(ee,D,e){var M=e(9953),k=Math.abs,l=Math.floor;ee.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?M(T)*l(k(T)):T}},35976:function(ee,D,e){var M=e(56247),k=Math.max;ee.exports=function(l){return k(0,M(l))}},67260:function(ee,D,e){var M=e(78513),k=e(36672),l=Function.prototype.bind,T=Function.prototype.call,b=Object.keys,d=Object.prototype.propertyIsEnumerable;ee.exports=function(s,t){return function(i,r){var n,o=arguments[2],a=arguments[3];return i=Object(k(i)),M(r),n=b(i),a&&n.sort(typeof a=="function"?l.call(a,i):void 0),typeof s!="function"&&(s=n[s]),T.call(s,n,function(u,p){return d.call(i,u)?T.call(r,o,i[u],u,i,p):t})}}},95879:function(ee,D,e){ee.exports=e(73583)()?Object.assign:e(34205)},73583:function(ee){ee.exports=function(){var D,e=Object.assign;return typeof e=="function"&&(e(D={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),D.foo+D.bar+D.trzy==="razdwatrzy")}},34205:function(ee,D,e){var M=e(68700),k=e(36672),l=Math.max;ee.exports=function(T,b){var d,s,t,i=l(arguments.length,2);for(T=Object(k(T)),t=function(r){try{T[r]=b[r]}catch(n){d||(d=n)}},s=1;s<i;++s)M(b=arguments[s]).forEach(t);if(d!==void 0)throw d;return T}},19012:function(ee,D,e){var M=e(4892),k=e(95879),l=e(36672);ee.exports=function(T){var b=Object(l(T)),d=arguments[1],s=Object(arguments[2]);if(b!==T&&!d)return b;var t={};return d?M(d,function(i){(s.ensure||i in T)&&(t[i]=T[i])}):k(t,T),t}},52818:function(ee,D,e){var M,k,l,T,b=Object.create;e(33247)()||(M=e(51882)),ee.exports=M?M.level!==1?b:(k={},l={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(d){l[d]=d!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,l),Object.defineProperty(M,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(d,s){return b(d===null?k:d,s)}):b},96437:function(ee,D,e){ee.exports=e(67260)("forEach")},99611:function(ee,D,e){var M=e(95296),k={function:!0,object:!0};ee.exports=function(l){return M(l)&&k[typeof l]||!1}},95296:function(ee,D,e){var M=e(52345)();ee.exports=function(k){return k!==M&&k!==null}},68700:function(ee,D,e){ee.exports=e(13895)()?Object.keys:e(25217)},13895:function(ee){ee.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function(ee,D,e){var M=e(95296),k=Object.keys;ee.exports=function(l){return k(M(l)?Object(l):l)}},16906:function(ee,D,e){var M=e(78513),k=e(96437),l=Function.prototype.call;ee.exports=function(T,b){var d={},s=arguments[2];return M(b),k(T,function(t,i,r,n){d[i]=l.call(b,s,t,i,r,n)}),d}},21780:function(ee,D,e){var M=e(95296),k=Array.prototype.forEach,l=Object.create;ee.exports=function(T){var b=l(null);return k.call(arguments,function(d){M(d)&&function(s,t){var i;for(i in s)t[i]=s[i]}(Object(d),b)}),b}},1496:function(ee,D,e){ee.exports=e(33247)()?Object.setPrototypeOf:e(51882)},33247:function(ee){var D=Object.create,e=Object.getPrototypeOf,M={};ee.exports=function(){var k=Object.setPrototypeOf;return typeof k=="function"&&e(k((arguments[0]||D)(null),M))===M}},51882:function(ee,D,e){var M,k,l,T,b=e(99611),d=e(36672),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};M=function(r,n){if(d(r),n===null||b(n))return r;throw new TypeError("Prototype must be null or an object")},ee.exports=(k=function(){var r,n=Object.create(null),o={},a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(a){try{(r=a.set).call(n,o)}catch{}if(Object.getPrototypeOf(n)===o)return{set:r,level:2}}return n.__proto__=o,Object.getPrototypeOf(n)===o?{level:2}:((n={}).__proto__=o,Object.getPrototypeOf(n)===o&&{level:1})}(),k?(k.level===2?k.set?(T=k.set,l=function(r,n){return T.call(M(r,n),n),r}):l=function(r,n){return M(r,n).__proto__=n,r}:l=function r(n,o){var a;return M(n,o),(a=s.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,o===null&&(o=r.nullPolyfill),n.__proto__=o,a&&t(r.nullPolyfill,"__proto__",i),n},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),e(52818)},78513:function(ee){ee.exports=function(D){if(typeof D!="function")throw new TypeError(D+" is not a function");return D}},98976:function(ee,D,e){var M=e(99611);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not an Object");return k}},36672:function(ee,D,e){var M=e(95296);ee.exports=function(k){if(!M(k))throw new TypeError("Cannot use null or undefined");return k}},66741:function(ee,D,e){ee.exports=e(17557)()?String.prototype.contains:e(60381)},17557:function(ee){var D="razdwatrzy";ee.exports=function(){return typeof D.contains=="function"&&D.contains("dwa")===!0&&D.contains("foo")===!1}},60381:function(ee){var D=String.prototype.indexOf;ee.exports=function(e){return D.call(this,e,arguments[1])>-1}},87963:function(ee){var D=Object.prototype.toString,e=D.call("");ee.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||D.call(M)===e)||!1}},43043:function(ee){var D=Object.create(null),e=Math.random;ee.exports=function(){var M;do M=e().toString(36).slice(2);while(D[M]);return M}},32411:function(ee,D,e){var M,k=e(1496),l=e(66741),T=e(62072),b=e(8260),d=e(95426),s=Object.defineProperty;M=ee.exports=function(t,i){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");d.call(this,t),i=i?l.call(i,"key+value")?"key+value":l.call(i,"key")?"key":"value":"value",s(this,"__kind__",T("",i))},k&&k(M,d),delete M.prototype.constructor,M.prototype=Object.create(d.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(M.prototype,b.toStringTag,T("c","Array Iterator"))},27515:function(ee,D,e){var M=e(73051),k=e(78513),l=e(87963),T=e(66661),b=Array.isArray,d=Function.prototype.call,s=Array.prototype.some;ee.exports=function(t,i){var r,n,o,a,u,p,c,x,g=arguments[2];if(b(t)||M(t)?r="array":l(t)?r="string":t=T(t),k(i),o=function(){a=!0},r!=="array")if(r!=="string")for(n=t.next();!n.done;){if(d.call(i,g,n.value,o),a)return;n=t.next()}else for(p=t.length,u=0;u<p&&(c=t[u],u+1<p&&(x=c.charCodeAt(0))>=55296&&x<=56319&&(c+=t[++u]),d.call(i,g,c,o),!a);++u);else s.call(t,function(h){return d.call(i,g,h,o),a})}},66661:function(ee,D,e){var M=e(73051),k=e(87963),l=e(32411),T=e(259),b=e(58095),d=e(8260).iterator;ee.exports=function(s){return typeof b(s)[d]=="function"?s[d]():M(s)?new l(s):k(s)?new T(s):new l(s)}},95426:function(ee,D,e){var M,k=e(16134),l=e(95879),T=e(78513),b=e(36672),d=e(62072),s=e(55174),t=e(8260),i=Object.defineProperty,r=Object.defineProperties;ee.exports=M=function(n,o){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");r(this,{__list__:d("w",b(n)),__context__:d("w",o),__nextIndex__:d("w",0)}),o&&(T(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete M.prototype.constructor,r(M.prototype,l({_next:d(function(){var n;if(this.__list__)return this.__redo__&&(n=this.__redo__.shift())!==void 0?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:d(function(n){return this.__list__[n]}),_unBind:d(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:d(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(o,a){o>=n&&(this.__redo__[a]=++o)},this),this.__redo__.push(n)):i(this,"__redo__",d("c",[n])))}),_onDelete:d(function(n){var o;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((o=this.__redo__.indexOf(n))!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(a,u){a>n&&(this.__redo__[u]=--a)},this)))}),_onClear:d(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),i(M.prototype,t.iterator,d(function(){return this}))},35940:function(ee,D,e){var M=e(73051),k=e(95296),l=e(87963),T=e(8260).iterator,b=Array.isArray;ee.exports=function(d){return!(!k(d)||!b(d)&&!l(d)&&!M(d)&&typeof d[T]!="function")}},259:function(ee,D,e){var M,k=e(1496),l=e(62072),T=e(8260),b=e(95426),d=Object.defineProperty;M=ee.exports=function(s){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");s=String(s),b.call(this,s),d(this,"__length__",l("",s.length))},k&&k(M,b),delete M.prototype.constructor,M.prototype=Object.create(b.prototype,{_next:l(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:l(function(s){var t,i=this.__list__[s];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),d(M.prototype,T.toStringTag,l("c","String Iterator"))},58095:function(ee,D,e){var M=e(35940);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not iterable");return k}},73523:function(ee){function D(e,M){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),l=1;l<arguments.length;l++){var T=arguments[l];if(T!=null)for(var b=Object.keys(Object(T)),d=0,s=b.length;d<s;d++){var t=b[d],i=Object.getOwnPropertyDescriptor(T,t);i!==void 0&&i.enumerable&&(k[t]=T[t])}}return k}ee.exports={assign:D,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:D})}}},8260:function(ee,D,e){ee.exports=e(69711)()?e(94908).Symbol:e(18415)},69711:function(ee,D,e){var M=e(94908),k={object:!0,symbol:!0};ee.exports=function(){var l,T=M.Symbol;if(typeof T!="function")return!1;l=T("test symbol");try{String(l)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},82276:function(ee){ee.exports=function(D){return!!D&&(typeof D=="symbol"||!!D.constructor&&D.constructor.name==="Symbol"&&D[D.constructor.toStringTag]==="Symbol")}},29366:function(ee,D,e){var M=e(62072),k=Object.create,l=Object.defineProperty,T=Object.prototype,b=k(null);ee.exports=function(d){for(var s,t,i=0;b[d+(i||"")];)++i;return b[d+=i||""]=!0,l(T,s="@@"+d,M.gs(null,function(r){t||(t=!0,l(this,s,M(r)),t=!1)})),s}},92842:function(ee,D,e){var M=e(62072),k=e(94908).Symbol;ee.exports=function(l){return Object.defineProperties(l,{hasInstance:M("",k&&k.hasInstance||l("hasInstance")),isConcatSpreadable:M("",k&&k.isConcatSpreadable||l("isConcatSpreadable")),iterator:M("",k&&k.iterator||l("iterator")),match:M("",k&&k.match||l("match")),replace:M("",k&&k.replace||l("replace")),search:M("",k&&k.search||l("search")),species:M("",k&&k.species||l("species")),split:M("",k&&k.split||l("split")),toPrimitive:M("",k&&k.toPrimitive||l("toPrimitive")),toStringTag:M("",k&&k.toStringTag||l("toStringTag")),unscopables:M("",k&&k.unscopables||l("unscopables"))})}},13304:function(ee,D,e){var M=e(62072),k=e(53308),l=Object.create(null);ee.exports=function(T){return Object.defineProperties(T,{for:M(function(b){return l[b]?l[b]:l[b]=T(String(b))}),keyFor:M(function(b){var d;for(d in k(b),l)if(l[d]===b)return d})})}},18415:function(ee,D,e){var M,k,l,T=e(62072),b=e(53308),d=e(94908).Symbol,s=e(29366),t=e(92842),i=e(13304),r=Object.create,n=Object.defineProperties,o=Object.defineProperty;if(typeof d=="function")try{String(d()),l=!0}catch{}else d=null;k=function(a){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return M(a)},ee.exports=M=function a(u){var p;if(this instanceof a)throw new TypeError("Symbol is not a constructor");return l?d(u):(p=r(k.prototype),u=u===void 0?"":String(u),n(p,{__description__:T("",u),__name__:T("",s(u))}))},t(M),i(M),n(k.prototype,{constructor:T(M),toString:T("",function(){return this.__name__})}),n(M.prototype,{toString:T(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:T(function(){return b(this)})}),o(M.prototype,M.toPrimitive,T("",function(){var a=b(this);return typeof a=="symbol"?a:a.toString()})),o(M.prototype,M.toStringTag,T("c","Symbol")),o(k.prototype,M.toStringTag,T("c",M.prototype[M.toStringTag])),o(k.prototype,M.toPrimitive,T("c",M.prototype[M.toPrimitive]))},53308:function(ee,D,e){var M=e(82276);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not a symbol");return k}},83522:function(ee,D,e){ee.exports=e(96402)()?WeakMap:e(329)},96402:function(ee){ee.exports=function(){var D,e;if(typeof WeakMap!="function")return!1;try{D=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(D)==="[object WeakMap]"&&typeof D.set=="function"&&D.set({},1)===D&&typeof D.delete=="function"&&typeof D.has=="function"&&D.get(e)==="one"}},96416:function(ee){ee.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},329:function(ee,D,e){var M,k=e(95296),l=e(1496),T=e(98976),b=e(36672),d=e(43043),s=e(62072),t=e(66661),i=e(27515),r=e(8260).toStringTag,n=e(96416),o=Array.isArray,a=Object.defineProperty,u=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf;ee.exports=M=function(){var c,x=arguments[0];if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");return c=n&&l&&WeakMap!==M?l(new WeakMap,p(this)):this,k(x)&&(o(x)||(x=t(x))),a(c,"__weakMapData__",s("c","$weakMap$"+d())),x&&i(x,function(g){b(g),c.set(g[0],g[1])}),c},n&&(l&&l(M,WeakMap),M.prototype=Object.create(WeakMap.prototype,{constructor:s(M)})),Object.defineProperties(M.prototype,{delete:s(function(c){return!!u.call(T(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:s(function(c){if(u.call(T(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:s(function(c){return u.call(T(c),this.__weakMapData__)}),set:s(function(c,x){return a(T(c),this.__weakMapData__,s("c",x)),this}),toString:s(function(){return"[object WeakMap]"})}),a(M.prototype,r,s("c","WeakMap"))},15398:function(ee){var D,e=typeof Reflect=="object"?Reflect:null,M=e&&typeof e.apply=="function"?e.apply:function(u,p,c){return Function.prototype.apply.call(u,p,c)};D=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var k=Number.isNaN||function(u){return u!=u};function l(){l.init.call(this)}ee.exports=l,ee.exports.once=function(u,p){return new Promise(function(c,x){function g(y){u.removeListener(p,h),x(y)}function h(){typeof u.removeListener=="function"&&u.removeListener("error",g),c([].slice.call(arguments))}a(u,p,h,{once:!0}),p!=="error"&&function(y,v,m){typeof y.on=="function"&&a(y,"error",v,{once:!0})}(u,g)})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var T=10;function b(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function d(u){return u._maxListeners===void 0?l.defaultMaxListeners:u._maxListeners}function s(u,p,c,x){var g,h,y,v;if(b(c),(h=u._events)===void 0?(h=u._events=Object.create(null),u._eventsCount=0):(h.newListener!==void 0&&(u.emit("newListener",p,c.listener?c.listener:c),h=u._events),y=h[p]),y===void 0)y=h[p]=c,++u._eventsCount;else if(typeof y=="function"?y=h[p]=x?[c,y]:[y,c]:x?y.unshift(c):y.push(c),(g=d(u))>0&&y.length>g&&!y.warned){y.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=u,m.type=p,m.count=y.length,v=m,console&&console.warn&&console.warn(v)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(u,p,c){var x={fired:!1,wrapFn:void 0,target:u,type:p,listener:c},g=t.bind(x);return g.listener=c,x.wrapFn=g,g}function r(u,p,c){var x=u._events;if(x===void 0)return[];var g=x[p];return g===void 0?[]:typeof g=="function"?c?[g.listener||g]:[g]:c?function(h){for(var y=new Array(h.length),v=0;v<y.length;++v)y[v]=h[v].listener||h[v];return y}(g):o(g,g.length)}function n(u){var p=this._events;if(p!==void 0){var c=p[u];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function o(u,p){for(var c=new Array(p),x=0;x<p;++x)c[x]=u[x];return c}function a(u,p,c,x){if(typeof u.on=="function")x.once?u.once(p,c):u.on(p,c);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(p,function g(h){x.once&&u.removeEventListener(p,g),c(h)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");T=u}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(u){for(var p=[],c=1;c<arguments.length;c++)p.push(arguments[c]);var x=u==="error",g=this._events;if(g!==void 0)x=x&&g.error===void 0;else if(!x)return!1;if(x){var h;if(p.length>0&&(h=p[0]),h instanceof Error)throw h;var y=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw y.context=h,y}var v=g[u];if(v===void 0)return!1;if(typeof v=="function")M(v,this,p);else{var m=v.length,_=o(v,m);for(c=0;c<m;++c)M(_[c],this,p)}return!0},l.prototype.addListener=function(u,p){return s(this,u,p,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(u,p){return s(this,u,p,!0)},l.prototype.once=function(u,p){return b(p),this.on(u,i(this,u,p)),this},l.prototype.prependOnceListener=function(u,p){return b(p),this.prependListener(u,i(this,u,p)),this},l.prototype.removeListener=function(u,p){var c,x,g,h,y;if(b(p),(x=this._events)===void 0)return this;if((c=x[u])===void 0)return this;if(c===p||c.listener===p)--this._eventsCount==0?this._events=Object.create(null):(delete x[u],x.removeListener&&this.emit("removeListener",u,c.listener||p));else if(typeof c!="function"){for(g=-1,h=c.length-1;h>=0;h--)if(c[h]===p||c[h].listener===p){y=c[h].listener,g=h;break}if(g<0)return this;g===0?c.shift():function(v,m){for(;m+1<v.length;m++)v[m]=v[m+1];v.pop()}(c,g),c.length===1&&(x[u]=c[0]),x.removeListener!==void 0&&this.emit("removeListener",u,y||p)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(u){var p,c,x;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[u]),this;if(arguments.length===0){var g,h=Object.keys(c);for(x=0;x<h.length;++x)(g=h[x])!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(p=c[u])=="function")this.removeListener(u,p);else if(p!==void 0)for(x=p.length-1;x>=0;x--)this.removeListener(u,p[x]);return this},l.prototype.listeners=function(u){return r(this,u,!0)},l.prototype.rawListeners=function(u){return r(this,u,!1)},l.listenerCount=function(u,p){return typeof u.listenerCount=="function"?u.listenerCount(p):n.call(u,p)},l.prototype.listenerCount=n,l.prototype.eventNames=function(){return this._eventsCount>0?D(this._events):[]}},60774:function(ee){var D=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};ee.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return D()}try{return __global__||D()}finally{delete Object.prototype.__global__}}()},94908:function(ee,D,e){ee.exports=e(51152)()?globalThis:e(60774)},51152:function(ee){ee.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},92770:function(ee,D,e){var M=e(18546);ee.exports=function(k){var l=typeof k;if(l==="string"){var T=k;if((k=+k)==0&&M(T))return!1}else if(l!=="number")return!1;return k-k<1}},30120:function(ee,D,e){var M=e(90660);ee.exports=function(k,l,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var b,d,s,t,i=k[0].length,r=k.length*i;l&&typeof l!="string"||(l=new(M(l||"float32"))(r+T));var n=l.length-T;if(r!==n)throw new Error("source length "+r+" ("+i+"x"+k.length+") does not match destination length "+n);for(b=0,s=T;b<k.length;b++)for(d=0;d<i;d++)l[s++]=k[b][d]===null?NaN:k[b][d]}else if(l&&typeof l!="string")l.set(k,T);else{var o=M(l||"float32");if(Array.isArray(k)||l==="array")for(b=0,s=T,t=(l=new o(k.length+T)).length;s<t;s++,b++)l[s]=k[b]===null?NaN:k[b];else T===0?l=new o(k):(l=new o(k.length+T)).set(k,T)}return l}},68016:function(ee,D,e){var M=e(53313),k=[32,126];ee.exports=function(l){var T=(l=l||{}).shape?l.shape:l.canvas?[l.canvas.width,l.canvas.height]:[512,512],b=l.canvas||document.createElement("canvas"),d=l.font,s=typeof l.step=="number"?[l.step,l.step]:l.step||[32,32],t=l.chars||k;if(d&&typeof d!="string"&&(d=M(d)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var i=[],r=t[0],n=0;r<=t[1];r++)i[n++]=String.fromCharCode(r);t=i}}else t=String(t).split("");T=T.slice(),b.width=T[0],b.height=T[1];var o=b.getContext("2d");o.fillStyle="#000",o.fillRect(0,0,b.width,b.height),o.font=d,o.textAlign="center",o.textBaseline="middle",o.fillStyle="#fff";var a=s[0]/2,u=s[1]/2;for(r=0;r<t.length;r++)o.fillText(t[r],a,u),(a+=s[0])>T[0]-s[0]/2&&(a=s[0]/2,u+=s[1]);return b}},32879:function(ee){function D(l,T){T||(T={}),(typeof l=="string"||Array.isArray(l))&&(T.family=l);var b=Array.isArray(T.family)?T.family.join(", "):T.family;if(!b)throw Error("`family` must be defined");var d=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",t=(l=[T.style||T.fontStyle||"",s,d].join(" ")+"px "+b,T.origin||"top");if(D.cache[b]&&d<=D.cache[b].em)return e(D.cache[b],t);var i=T.canvas||D.canvas,r=i.getContext("2d"),n={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},o=Math.ceil(1.5*d);i.height=o,i.width=.5*o,r.font=l;var a="H",u={top:0};r.clearRect(0,0,o,o),r.textBaseline="top",r.fillStyle="black",r.fillText(a,0,0);var p=M(r.getImageData(0,0,o,o));r.clearRect(0,0,o,o),r.textBaseline="bottom",r.fillText(a,0,o);var c=M(r.getImageData(0,0,o,o));u.lineHeight=u.bottom=o-c+p,r.clearRect(0,0,o,o),r.textBaseline="alphabetic",r.fillText(a,0,o);var x=o-M(r.getImageData(0,0,o,o))-1+p;u.baseline=u.alphabetic=x,r.clearRect(0,0,o,o),r.textBaseline="middle",r.fillText(a,0,.5*o);var g=M(r.getImageData(0,0,o,o));u.median=u.middle=o-g-1+p-.5*o,r.clearRect(0,0,o,o),r.textBaseline="hanging",r.fillText(a,0,.5*o);var h=M(r.getImageData(0,0,o,o));u.hanging=o-h-1+p-.5*o,r.clearRect(0,0,o,o),r.textBaseline="ideographic",r.fillText(a,0,o);var y=M(r.getImageData(0,0,o,o));if(u.ideographic=o-y-1+p,n.upper&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.upper,0,0),u.upper=M(r.getImageData(0,0,o,o)),u.capHeight=u.baseline-u.upper),n.lower&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.lower,0,0),u.lower=M(r.getImageData(0,0,o,o)),u.xHeight=u.baseline-u.lower),n.tittle&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.tittle,0,0),u.tittle=M(r.getImageData(0,0,o,o))),n.ascent&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.ascent,0,0),u.ascent=M(r.getImageData(0,0,o,o))),n.descent&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.descent,0,0),u.descent=k(r.getImageData(0,0,o,o))),n.overshoot){r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.overshoot,0,0);var v=k(r.getImageData(0,0,o,o));u.overshoot=v-x}for(var m in u)u[m]/=d;return u.em=d,D.cache[b]=u,e(u,t)}function e(l,T){var b={};for(var d in typeof T=="string"&&(T=l[T]),l)d!=="em"&&(b[d]=l[d]-T);return b}function M(l){for(var T=l.height,b=l.data,d=3;d<b.length;d+=4)if(b[d]!==0)return Math.floor(.25*(d-3)/T)}function k(l){for(var T=l.height,b=l.data,d=b.length-1;d>0;d-=4)if(b[d]!==0)return Math.floor(.25*(d-3)/T)}ee.exports=D,D.canvas=document.createElement("canvas"),D.cache={}},31353:function(ee,D,e){var M=e(85395),k=Object.prototype.toString,l=Object.prototype.hasOwnProperty;ee.exports=function(T,b,d){if(!M(b))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=d),k.call(T)==="[object Array]"?function(t,i,r){for(var n=0,o=t.length;n<o;n++)l.call(t,n)&&(r==null?i(t[n],n,t):i.call(r,t[n],n,t))}(T,b,s):typeof T=="string"?function(t,i,r){for(var n=0,o=t.length;n<o;n++)r==null?i(t.charAt(n),n,t):i.call(r,t.charAt(n),n,t)}(T,b,s):function(t,i,r){for(var n in t)l.call(t,n)&&(r==null?i(t[n],n,t):i.call(r,t[n],n,t))}(T,b,s)}},73047:function(ee){var D=Array.prototype.slice,e=Object.prototype.toString;ee.exports=function(M){var k=this;if(typeof k!="function"||e.call(k)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+k);for(var l,T=D.call(arguments,1),b=Math.max(0,k.length-T.length),d=[],s=0;s<b;s++)d.push("$"+s);if(l=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof l){var i=k.apply(this,T.concat(D.call(arguments)));return Object(i)===i?i:this}return k.apply(M,T.concat(D.call(arguments)))}),k.prototype){var t=function(){};t.prototype=k.prototype,l.prototype=new t,t.prototype=null}return l}},77575:function(ee,D,e){var M=e(73047);ee.exports=Function.prototype.bind||M},86249:function(ee){ee.exports=function(D,e){if(typeof D!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var M=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(M.width=e.width),typeof e.height=="number"&&(M.height=e.height);var k,l=e;try{var T=[D];D.indexOf("webgl")===0&&T.push("experimental-"+D);for(var b=0;b<T.length;b++)if(k=M.getContext(T[b],l))return k}catch{k=null}return k||null}},68318:function(ee,D,e){var M,k=SyntaxError,l=Function,T=TypeError,b=function(E){try{return l('"use strict"; return ('+E+").constructor;")()}catch{}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch{d=null}var s=function(){throw new T},t=d?function(){try{return s}catch{try{return d(arguments,"callee").get}catch{return s}}}():s,i=e(57877)(),r=Object.getPrototypeOf||function(E){return E.__proto__},n={},o=typeof Uint8Array>"u"?M:r(Uint8Array),a={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":i?r([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":n,"%AsyncGenerator%":n,"%AsyncGeneratorFunction%":n,"%AsyncIteratorPrototype%":n,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":n,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i?r(r([][Symbol.iterator]())):M,"%JSON%":typeof JSON=="object"?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i?r(new Map()[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i?r(new Set()[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i?r(""[Symbol.iterator]()):M,"%Symbol%":i?Symbol:M,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":o,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};try{null.error}catch(E){var u=r(r(E));a["%Error.prototype%"]=u}var p=function E(L){var C;if(L==="%AsyncFunction%")C=b("async function () {}");else if(L==="%GeneratorFunction%")C=b("function* () {}");else if(L==="%AsyncGeneratorFunction%")C=b("async function* () {}");else if(L==="%AsyncGenerator%"){var P=E("%AsyncGeneratorFunction%");P&&(C=P.prototype)}else if(L==="%AsyncIteratorPrototype%"){var z=E("%AsyncGenerator%");z&&(C=r(z.prototype))}return a[L]=C,C},c={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=e(77575),g=e(35065),h=x.call(Function.call,Array.prototype.concat),y=x.call(Function.apply,Array.prototype.splice),v=x.call(Function.call,String.prototype.replace),m=x.call(Function.call,String.prototype.slice),_=x.call(Function.call,RegExp.prototype.exec),f=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,w=function(E,L){var C,P=E;if(g(c,P)&&(P="%"+(C=c[P])[0]+"%"),g(a,P)){var z=a[P];if(z===n&&(z=p(P)),z===void 0&&!L)throw new T("intrinsic "+E+" exists, but is not available. Please file an issue!");return{alias:C,name:P,value:z}}throw new k("intrinsic "+E+" does not exist!")};ee.exports=function(E,L){if(typeof E!="string"||E.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new T('"allowMissing" argument must be a boolean');if(_(/^%?[^%]*%?$/,E)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var C=function(Y){var W=m(Y,0,1),Q=m(Y,-1);if(W==="%"&&Q!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(Q==="%"&&W!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var ne=[];return v(Y,f,function(re,ae,ue,pe){ne[ne.length]=ue?v(pe,S,"$1"):ae||re}),ne}(E),P=C.length>0?C[0]:"",z=w("%"+P+"%",L),G=z.name,O=z.value,H=!1,N=z.alias;N&&(P=N[0],y(C,h([0,1],N)));for(var B=1,V=!0;B<C.length;B+=1){var q=C[B],te=m(q,0,1),K=m(q,-1);if((te==='"'||te==="'"||te==="`"||K==='"'||K==="'"||K==="`")&&te!==K)throw new k("property names with quotes must have matching quotes");if(q!=="constructor"&&V||(H=!0),g(a,G="%"+(P+="."+q)+"%"))O=a[G];else if(O!=null){if(!(q in O)){if(!L)throw new T("base intrinsic for "+E+" exists, but the property is not available.");return}if(d&&B+1>=C.length){var J=d(O,q);O=(V=!!J)&&"get"in J&&!("originalValue"in J.get)?J.get:O[q]}else V=g(O,q),O=O[q];V&&!H&&(a[G]=O)}}return O}},85400:function(ee){ee.exports=function(D,e){var M=e[0],k=e[1],l=e[2],T=e[3],b=e[4],d=e[5],s=e[6],t=e[7],i=e[8],r=e[9],n=e[10],o=e[11],a=e[12],u=e[13],p=e[14],c=e[15];return D[0]=d*(n*c-o*p)-r*(s*c-t*p)+u*(s*o-t*n),D[1]=-(k*(n*c-o*p)-r*(l*c-T*p)+u*(l*o-T*n)),D[2]=k*(s*c-t*p)-d*(l*c-T*p)+u*(l*t-T*s),D[3]=-(k*(s*o-t*n)-d*(l*o-T*n)+r*(l*t-T*s)),D[4]=-(b*(n*c-o*p)-i*(s*c-t*p)+a*(s*o-t*n)),D[5]=M*(n*c-o*p)-i*(l*c-T*p)+a*(l*o-T*n),D[6]=-(M*(s*c-t*p)-b*(l*c-T*p)+a*(l*t-T*s)),D[7]=M*(s*o-t*n)-b*(l*o-T*n)+i*(l*t-T*s),D[8]=b*(r*c-o*u)-i*(d*c-t*u)+a*(d*o-t*r),D[9]=-(M*(r*c-o*u)-i*(k*c-T*u)+a*(k*o-T*r)),D[10]=M*(d*c-t*u)-b*(k*c-T*u)+a*(k*t-T*d),D[11]=-(M*(d*o-t*r)-b*(k*o-T*r)+i*(k*t-T*d)),D[12]=-(b*(r*p-n*u)-i*(d*p-s*u)+a*(d*n-s*r)),D[13]=M*(r*p-n*u)-i*(k*p-l*u)+a*(k*n-l*r),D[14]=-(M*(d*p-s*u)-b*(k*p-l*u)+a*(k*s-l*d)),D[15]=M*(d*n-s*r)-b*(k*n-l*r)+i*(k*s-l*d),D}},42331:function(ee){ee.exports=function(D){var e=new Float32Array(16);return e[0]=D[0],e[1]=D[1],e[2]=D[2],e[3]=D[3],e[4]=D[4],e[5]=D[5],e[6]=D[6],e[7]=D[7],e[8]=D[8],e[9]=D[9],e[10]=D[10],e[11]=D[11],e[12]=D[12],e[13]=D[13],e[14]=D[14],e[15]=D[15],e}},31042:function(ee){ee.exports=function(D,e){return D[0]=e[0],D[1]=e[1],D[2]=e[2],D[3]=e[3],D[4]=e[4],D[5]=e[5],D[6]=e[6],D[7]=e[7],D[8]=e[8],D[9]=e[9],D[10]=e[10],D[11]=e[11],D[12]=e[12],D[13]=e[13],D[14]=e[14],D[15]=e[15],D}},11902:function(ee){ee.exports=function(){var D=new Float32Array(16);return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}},89887:function(ee){ee.exports=function(D){var e=D[0],M=D[1],k=D[2],l=D[3],T=D[4],b=D[5],d=D[6],s=D[7],t=D[8],i=D[9],r=D[10],n=D[11],o=D[12],a=D[13],u=D[14],p=D[15];return(e*b-M*T)*(r*p-n*u)-(e*d-k*T)*(i*p-n*a)+(e*s-l*T)*(i*u-r*a)+(M*d-k*b)*(t*p-n*o)-(M*s-l*b)*(t*u-r*o)+(k*s-l*d)*(t*a-i*o)}},27812:function(ee){ee.exports=function(D,e){var M=e[0],k=e[1],l=e[2],T=e[3],b=M+M,d=k+k,s=l+l,t=M*b,i=k*b,r=k*d,n=l*b,o=l*d,a=l*s,u=T*b,p=T*d,c=T*s;return D[0]=1-r-a,D[1]=i+c,D[2]=n-p,D[3]=0,D[4]=i-c,D[5]=1-t-a,D[6]=o+u,D[7]=0,D[8]=n+p,D[9]=o-u,D[10]=1-t-r,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}},34045:function(ee){ee.exports=function(D,e,M){var k,l,T,b=M[0],d=M[1],s=M[2],t=Math.sqrt(b*b+d*d+s*s);return Math.abs(t)<1e-6?null:(b*=t=1/t,d*=t,s*=t,k=Math.sin(e),T=1-(l=Math.cos(e)),D[0]=b*b*T+l,D[1]=d*b*T+s*k,D[2]=s*b*T-d*k,D[3]=0,D[4]=b*d*T-s*k,D[5]=d*d*T+l,D[6]=s*d*T+b*k,D[7]=0,D[8]=b*s*T+d*k,D[9]=d*s*T-b*k,D[10]=s*s*T+l,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D)}},45973:function(ee){ee.exports=function(D,e,M){var k=e[0],l=e[1],T=e[2],b=e[3],d=k+k,s=l+l,t=T+T,i=k*d,r=k*s,n=k*t,o=l*s,a=l*t,u=T*t,p=b*d,c=b*s,x=b*t;return D[0]=1-(o+u),D[1]=r+x,D[2]=n-c,D[3]=0,D[4]=r-x,D[5]=1-(i+u),D[6]=a+p,D[7]=0,D[8]=n+c,D[9]=a-p,D[10]=1-(i+o),D[11]=0,D[12]=M[0],D[13]=M[1],D[14]=M[2],D[15]=1,D}},81472:function(ee){ee.exports=function(D,e){return D[0]=e[0],D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=e[1],D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=e[2],D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}},14669:function(ee){ee.exports=function(D,e){return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=e[0],D[13]=e[1],D[14]=e[2],D[15]=1,D}},75262:function(ee){ee.exports=function(D,e){var M=Math.sin(e),k=Math.cos(e);return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=k,D[6]=M,D[7]=0,D[8]=0,D[9]=-M,D[10]=k,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}},331:function(ee){ee.exports=function(D,e){var M=Math.sin(e),k=Math.cos(e);return D[0]=k,D[1]=0,D[2]=-M,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=M,D[9]=0,D[10]=k,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}},11049:function(ee){ee.exports=function(D,e){var M=Math.sin(e),k=Math.cos(e);return D[0]=k,D[1]=M,D[2]=0,D[3]=0,D[4]=-M,D[5]=k,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}},75195:function(ee){ee.exports=function(D,e,M,k,l,T,b){var d=1/(M-e),s=1/(l-k),t=1/(T-b);return D[0]=2*T*d,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=2*T*s,D[6]=0,D[7]=0,D[8]=(M+e)*d,D[9]=(l+k)*s,D[10]=(b+T)*t,D[11]=-1,D[12]=0,D[13]=0,D[14]=b*T*2*t,D[15]=0,D}},71551:function(ee){ee.exports=function(D){return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}},79576:function(ee,D,e){ee.exports={create:e(11902),clone:e(42331),copy:e(31042),identity:e(71551),transpose:e(88654),invert:e(95874),adjoint:e(85400),determinant:e(89887),multiply:e(91362),translate:e(31283),scale:e(10789),rotate:e(65074),rotateX:e(35545),rotateY:e(94918),rotateZ:e(15692),fromRotation:e(34045),fromRotationTranslation:e(45973),fromScaling:e(81472),fromTranslation:e(14669),fromXRotation:e(75262),fromYRotation:e(331),fromZRotation:e(11049),fromQuat:e(27812),frustum:e(75195),perspective:e(7864),perspectiveFromFieldOfView:e(35279),ortho:e(60378),lookAt:e(65551),str:e(6726)}},95874:function(ee){ee.exports=function(D,e){var M=e[0],k=e[1],l=e[2],T=e[3],b=e[4],d=e[5],s=e[6],t=e[7],i=e[8],r=e[9],n=e[10],o=e[11],a=e[12],u=e[13],p=e[14],c=e[15],x=M*d-k*b,g=M*s-l*b,h=M*t-T*b,y=k*s-l*d,v=k*t-T*d,m=l*t-T*s,_=i*u-r*a,f=i*p-n*a,S=i*c-o*a,w=r*p-n*u,E=r*c-o*u,L=n*c-o*p,C=x*L-g*E+h*w+y*S-v*f+m*_;return C?(C=1/C,D[0]=(d*L-s*E+t*w)*C,D[1]=(l*E-k*L-T*w)*C,D[2]=(u*m-p*v+c*y)*C,D[3]=(n*v-r*m-o*y)*C,D[4]=(s*S-b*L-t*f)*C,D[5]=(M*L-l*S+T*f)*C,D[6]=(p*h-a*m-c*g)*C,D[7]=(i*m-n*h+o*g)*C,D[8]=(b*E-d*S+t*_)*C,D[9]=(k*S-M*E-T*_)*C,D[10]=(a*v-u*h+c*x)*C,D[11]=(r*h-i*v-o*x)*C,D[12]=(d*f-b*w-s*_)*C,D[13]=(M*w-k*f+l*_)*C,D[14]=(u*g-a*y-p*x)*C,D[15]=(i*y-r*g+n*x)*C,D):null}},65551:function(ee,D,e){var M=e(71551);ee.exports=function(k,l,T,b){var d,s,t,i,r,n,o,a,u,p,c=l[0],x=l[1],g=l[2],h=b[0],y=b[1],v=b[2],m=T[0],_=T[1],f=T[2];return Math.abs(c-m)<1e-6&&Math.abs(x-_)<1e-6&&Math.abs(g-f)<1e-6?M(k):(o=c-m,a=x-_,u=g-f,d=y*(u*=p=1/Math.sqrt(o*o+a*a+u*u))-v*(a*=p),s=v*(o*=p)-h*u,t=h*a-y*o,(p=Math.sqrt(d*d+s*s+t*t))?(d*=p=1/p,s*=p,t*=p):(d=0,s=0,t=0),i=a*t-u*s,r=u*d-o*t,n=o*s-a*d,(p=Math.sqrt(i*i+r*r+n*n))?(i*=p=1/p,r*=p,n*=p):(i=0,r=0,n=0),k[0]=d,k[1]=i,k[2]=o,k[3]=0,k[4]=s,k[5]=r,k[6]=a,k[7]=0,k[8]=t,k[9]=n,k[10]=u,k[11]=0,k[12]=-(d*c+s*x+t*g),k[13]=-(i*c+r*x+n*g),k[14]=-(o*c+a*x+u*g),k[15]=1,k)}},91362:function(ee){ee.exports=function(D,e,M){var k=e[0],l=e[1],T=e[2],b=e[3],d=e[4],s=e[5],t=e[6],i=e[7],r=e[8],n=e[9],o=e[10],a=e[11],u=e[12],p=e[13],c=e[14],x=e[15],g=M[0],h=M[1],y=M[2],v=M[3];return D[0]=g*k+h*d+y*r+v*u,D[1]=g*l+h*s+y*n+v*p,D[2]=g*T+h*t+y*o+v*c,D[3]=g*b+h*i+y*a+v*x,g=M[4],h=M[5],y=M[6],v=M[7],D[4]=g*k+h*d+y*r+v*u,D[5]=g*l+h*s+y*n+v*p,D[6]=g*T+h*t+y*o+v*c,D[7]=g*b+h*i+y*a+v*x,g=M[8],h=M[9],y=M[10],v=M[11],D[8]=g*k+h*d+y*r+v*u,D[9]=g*l+h*s+y*n+v*p,D[10]=g*T+h*t+y*o+v*c,D[11]=g*b+h*i+y*a+v*x,g=M[12],h=M[13],y=M[14],v=M[15],D[12]=g*k+h*d+y*r+v*u,D[13]=g*l+h*s+y*n+v*p,D[14]=g*T+h*t+y*o+v*c,D[15]=g*b+h*i+y*a+v*x,D}},60378:function(ee){ee.exports=function(D,e,M,k,l,T,b){var d=1/(e-M),s=1/(k-l),t=1/(T-b);return D[0]=-2*d,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=-2*s,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=2*t,D[11]=0,D[12]=(e+M)*d,D[13]=(l+k)*s,D[14]=(b+T)*t,D[15]=1,D}},7864:function(ee){ee.exports=function(D,e,M,k,l){var T=1/Math.tan(e/2),b=1/(k-l);return D[0]=T/M,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=T,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=(l+k)*b,D[11]=-1,D[12]=0,D[13]=0,D[14]=2*l*k*b,D[15]=0,D}},35279:function(ee){ee.exports=function(D,e,M,k){var l=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),d=Math.tan(e.rightDegrees*Math.PI/180),s=2/(b+d),t=2/(l+T);return D[0]=s,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=t,D[6]=0,D[7]=0,D[8]=-(b-d)*s*.5,D[9]=(l-T)*t*.5,D[10]=k/(M-k),D[11]=-1,D[12]=0,D[13]=0,D[14]=k*M/(M-k),D[15]=0,D}},65074:function(ee){ee.exports=function(D,e,M,k){var l,T,b,d,s,t,i,r,n,o,a,u,p,c,x,g,h,y,v,m,_,f,S,w,E=k[0],L=k[1],C=k[2],P=Math.sqrt(E*E+L*L+C*C);return Math.abs(P)<1e-6?null:(E*=P=1/P,L*=P,C*=P,l=Math.sin(M),b=1-(T=Math.cos(M)),d=e[0],s=e[1],t=e[2],i=e[3],r=e[4],n=e[5],o=e[6],a=e[7],u=e[8],p=e[9],c=e[10],x=e[11],g=E*E*b+T,h=L*E*b+C*l,y=C*E*b-L*l,v=E*L*b-C*l,m=L*L*b+T,_=C*L*b+E*l,f=E*C*b+L*l,S=L*C*b-E*l,w=C*C*b+T,D[0]=d*g+r*h+u*y,D[1]=s*g+n*h+p*y,D[2]=t*g+o*h+c*y,D[3]=i*g+a*h+x*y,D[4]=d*v+r*m+u*_,D[5]=s*v+n*m+p*_,D[6]=t*v+o*m+c*_,D[7]=i*v+a*m+x*_,D[8]=d*f+r*S+u*w,D[9]=s*f+n*S+p*w,D[10]=t*f+o*S+c*w,D[11]=i*f+a*S+x*w,e!==D&&(D[12]=e[12],D[13]=e[13],D[14]=e[14],D[15]=e[15]),D)}},35545:function(ee){ee.exports=function(D,e,M){var k=Math.sin(M),l=Math.cos(M),T=e[4],b=e[5],d=e[6],s=e[7],t=e[8],i=e[9],r=e[10],n=e[11];return e!==D&&(D[0]=e[0],D[1]=e[1],D[2]=e[2],D[3]=e[3],D[12]=e[12],D[13]=e[13],D[14]=e[14],D[15]=e[15]),D[4]=T*l+t*k,D[5]=b*l+i*k,D[6]=d*l+r*k,D[7]=s*l+n*k,D[8]=t*l-T*k,D[9]=i*l-b*k,D[10]=r*l-d*k,D[11]=n*l-s*k,D}},94918:function(ee){ee.exports=function(D,e,M){var k=Math.sin(M),l=Math.cos(M),T=e[0],b=e[1],d=e[2],s=e[3],t=e[8],i=e[9],r=e[10],n=e[11];return e!==D&&(D[4]=e[4],D[5]=e[5],D[6]=e[6],D[7]=e[7],D[12]=e[12],D[13]=e[13],D[14]=e[14],D[15]=e[15]),D[0]=T*l-t*k,D[1]=b*l-i*k,D[2]=d*l-r*k,D[3]=s*l-n*k,D[8]=T*k+t*l,D[9]=b*k+i*l,D[10]=d*k+r*l,D[11]=s*k+n*l,D}},15692:function(ee){ee.exports=function(D,e,M){var k=Math.sin(M),l=Math.cos(M),T=e[0],b=e[1],d=e[2],s=e[3],t=e[4],i=e[5],r=e[6],n=e[7];return e!==D&&(D[8]=e[8],D[9]=e[9],D[10]=e[10],D[11]=e[11],D[12]=e[12],D[13]=e[13],D[14]=e[14],D[15]=e[15]),D[0]=T*l+t*k,D[1]=b*l+i*k,D[2]=d*l+r*k,D[3]=s*l+n*k,D[4]=t*l-T*k,D[5]=i*l-b*k,D[6]=r*l-d*k,D[7]=n*l-s*k,D}},10789:function(ee){ee.exports=function(D,e,M){var k=M[0],l=M[1],T=M[2];return D[0]=e[0]*k,D[1]=e[1]*k,D[2]=e[2]*k,D[3]=e[3]*k,D[4]=e[4]*l,D[5]=e[5]*l,D[6]=e[6]*l,D[7]=e[7]*l,D[8]=e[8]*T,D[9]=e[9]*T,D[10]=e[10]*T,D[11]=e[11]*T,D[12]=e[12],D[13]=e[13],D[14]=e[14],D[15]=e[15],D}},6726:function(ee){ee.exports=function(D){return"mat4("+D[0]+", "+D[1]+", "+D[2]+", "+D[3]+", "+D[4]+", "+D[5]+", "+D[6]+", "+D[7]+", "+D[8]+", "+D[9]+", "+D[10]+", "+D[11]+", "+D[12]+", "+D[13]+", "+D[14]+", "+D[15]+")"}},31283:function(ee){ee.exports=function(D,e,M){var k,l,T,b,d,s,t,i,r,n,o,a,u=M[0],p=M[1],c=M[2];return e===D?(D[12]=e[0]*u+e[4]*p+e[8]*c+e[12],D[13]=e[1]*u+e[5]*p+e[9]*c+e[13],D[14]=e[2]*u+e[6]*p+e[10]*c+e[14],D[15]=e[3]*u+e[7]*p+e[11]*c+e[15]):(k=e[0],l=e[1],T=e[2],b=e[3],d=e[4],s=e[5],t=e[6],i=e[7],r=e[8],n=e[9],o=e[10],a=e[11],D[0]=k,D[1]=l,D[2]=T,D[3]=b,D[4]=d,D[5]=s,D[6]=t,D[7]=i,D[8]=r,D[9]=n,D[10]=o,D[11]=a,D[12]=k*u+d*p+r*c+e[12],D[13]=l*u+s*p+n*c+e[13],D[14]=T*u+t*p+o*c+e[14],D[15]=b*u+i*p+a*c+e[15]),D}},88654:function(ee){ee.exports=function(D,e){if(D===e){var M=e[1],k=e[2],l=e[3],T=e[6],b=e[7],d=e[11];D[1]=e[4],D[2]=e[8],D[3]=e[12],D[4]=M,D[6]=e[9],D[7]=e[13],D[8]=k,D[9]=T,D[11]=e[14],D[12]=l,D[13]=b,D[14]=d}else D[0]=e[0],D[1]=e[4],D[2]=e[8],D[3]=e[12],D[4]=e[1],D[5]=e[5],D[6]=e[9],D[7]=e[13],D[8]=e[2],D[9]=e[6],D[10]=e[10],D[11]=e[14],D[12]=e[3],D[13]=e[7],D[14]=e[11],D[15]=e[15];return D}},42505:function(ee,D,e){var M=e(72791),k=e(71299),l=e(98580),T=e(12018),b=e(83522),d=e(25075),s=e(68016),t=e(58404),i=e(18863),r=e(10973),n=e(25677),o=e(75686),a=e(53545),u=e(56131),p=e(32879),c=e(30120),x=e(13547).nextPow2,g=new b,h=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(h=!0),document.body.removeChild(y)}var v=function(m){(function(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer})(m)?(m={regl:m},this.gl=m.regl._gl):this.gl=T(m),this.shader=g.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=m.regl||l({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),g.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(m)?m:{})};v.prototype.createShader=function(){var m=this.regl,_=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(f,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(f,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(f,S){return S.atlas.texture},charStep:function(f,S){return S.atlas.step},em:function(f,S){return S.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:m,draw:_,atlas:{}}},v.prototype.update=function(m){var _=this;if(typeof m=="string")m={text:m};else if(!m)return;(m=k(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(m.opacity)?this.opacity=m.opacity.map(function(he){return parseFloat(he)}):this.opacity=parseFloat(m.opacity)),m.viewport!=null&&(this.viewport=i(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),m.kerning!=null&&(this.kerning=m.kerning),m.offset!=null&&(typeof m.offset=="number"&&(m.offset=[m.offset,0]),this.positionOffset=c(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=v.baseFontSize+"px sans-serif");var f,S=!1,w=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function(he,Ee){if(typeof he=="string")try{he=M.parse(he)}catch{he=M.parse(v.baseFontSize+"px "+he)}else he=M.parse(M.stringify(he));var ke=M.stringify({size:v.baseFontSize,family:he.family,stretch:h?he.stretch:void 0,variant:he.variant,weight:he.weight,style:he.style}),be=n(he.size),Ie=Math.round(be[0]*o(be[1]));if(Ie!==_.fontSize[Ee]&&(w=!0,_.fontSize[Ee]=Ie),!(_.font[Ee]&&ke==_.font[Ee].baseString||(S=!0,_.font[Ee]=v.fonts[ke],_.font[Ee]))){var Fe=he.family.join(", "),ce=[he.style];he.style!=he.variant&&ce.push(he.variant),he.variant!=he.weight&&ce.push(he.weight),h&&he.weight!=he.stretch&&ce.push(he.stretch),_.font[Ee]={baseString:ke,family:Fe,weight:he.weight,stretch:he.stretch,style:he.style,variant:he.variant,width:{},kerning:{},metrics:p(Fe,{origin:"top",fontSize:v.baseFontSize,fontStyle:ce.join(" ")})},v.fonts[ke]=_.font[Ee]}}),(S||w)&&this.font.forEach(function(he,Ee){var ke=M.stringify({size:_.fontSize[Ee],family:he.family,stretch:h?he.stretch:void 0,variant:he.variant,weight:he.weight,style:he.style});if(_.fontAtlas[Ee]=_.shader.atlas[ke],!_.fontAtlas[Ee]){var be=he.metrics;_.shader.atlas[ke]=_.fontAtlas[Ee]={fontString:ke,step:2*Math.ceil(_.fontSize[Ee]*be.bottom*.5),em:_.fontSize[Ee],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}}m.text==null&&(m.text=_.text)}),typeof m.text=="string"&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),L=0;L<E.length;L++)E[L]=m.text;m.text=E}if(m.text!=null||S){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var C=1;C<m.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+m.text[C-1].length,this.count+=m.text[C].length,this.counts.push(m.text[C].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];f=[],this.font.forEach(function(he,Ee){v.atlasContext.font=he.baseString;for(var ke=_.fontAtlas[Ee],be=0;be<_.text.length;be++){var Ie=_.text.charAt(be);if(ke.ids[Ie]==null&&(ke.ids[Ie]=ke.chars.length,ke.chars.push(Ie),f.push(Ie)),he.width[Ie]==null&&(he.width[Ie]=v.atlasContext.measureText(Ie).width/v.baseFontSize,_.kerning)){var Fe=[];for(var ce in he.width)Fe.push(ce+Ie,Ie+ce);u(he.kerning,a(he.family,{pairs:Fe}))}}})}if(m.position)if(m.position.length>2){for(var P=!m.position[0].length,z=t.mallocFloat(2*this.count),G=0,O=0;G<this.counts.length;G++){var H=this.counts[G];if(P)for(var N=0;N<H;N++)z[O++]=m.position[2*G],z[O++]=m.position[2*G+1];else for(var B=0;B<H;B++)z[O++]=m.position[G][0],z[O++]=m.position[G][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),t.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||S){var V=t.mallocUint8(this.count),q=t.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,K=0;te<this.counts.length;te++){for(var J=this.counts[te],Y=this.font[te]||this.font[0],W=this.fontAtlas[te]||this.fontAtlas[0],Q=0;Q<J;Q++){var ne=this.text.charAt(K),re=this.text.charAt(K-1);if(V[K]=W.ids[ne],q[2*K]=Y.width[ne],Q){var ae=q[2*K-2],ue=q[2*K],pe=q[2*K-1]+.5*ae+.5*ue;if(this.kerning){var ge=Y.kerning[re+ne];ge&&(pe+=.001*ge)}q[2*K+1]=pe}else q[2*K+1]=.5*q[2*K];K++}this.textWidth.push(q.length?.5*q[2*K-2]+q[2*K-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:V,type:"uint8",usage:"stream"}),this.sizeBuffer({data:q,type:"float",usage:"stream"}),t.freeUint8(V),t.freeFloat(q),f.length&&this.font.forEach(function(he,Ee){var ke=_.fontAtlas[Ee],be=ke.step,Ie=Math.floor(v.maxAtlasSize/be),Fe=Math.min(Ie,ke.chars.length),ce=Math.ceil(ke.chars.length/Fe),we=x(Fe*be),ye=x(ce*be);ke.width=we,ke.height=ye,ke.rows=ce,ke.cols=Fe,ke.em&&ke.texture({data:s({canvas:v.atlasCanvas,font:ke.fontString,chars:ke.chars,shape:[we,ye],step:[be,be]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function(he,Ee){var ke=Array.isArray(_.align)?_.align.length>1?_.align[Ee]:_.align[0]:_.align;if(typeof ke=="number")return ke;switch(ke){case"right":case"end":return-he;case"center":case"centre":case"middle":return .5*-he}return 0})),this.baseline==null&&m.baseline==null&&(m.baseline=0),m.baseline!=null&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(he,Ee){var ke=(_.font[Ee]||_.font[0]).metrics,be=0;return be+=.5*ke.bottom,-1*(be+=typeof he=="number"?he-ke.baseline:-ke[he])})),m.color!=null)if(m.color||(m.color="transparent"),typeof m.color!="string"&&isNaN(m.color)){var _e;if(typeof m.color[0]=="number"&&m.color.length>this.counts.length){var me=m.color.length;_e=t.mallocUint8(me);for(var ve=(m.color.subarray||m.color.slice).bind(m.color),Oe=0;Oe<me;Oe+=4)_e.set(d(ve(Oe,Oe+4),"uint8"),Oe)}else{var Me=m.color.length;_e=t.mallocUint8(4*Me);for(var Te=0;Te<Me;Te++)_e.set(d(m.color[Te]||0,"uint8"),4*Te)}this.color=_e}else this.color=d(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var se=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(se);for(var oe=0;oe<this.batch.length;oe++)this.batch[oe]={count:this.counts.length>1?this.counts[oe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[oe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*oe,4*oe+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[oe]:this.opacity,baseline:this.baselineOffset[oe]!=null?this.baselineOffset[oe]:this.baselineOffset[0],align:this.align?this.alignOffset[oe]!=null?this.alignOffset[oe]:this.alignOffset[0]:0,atlas:this.fontAtlas[oe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*oe,2*oe+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},v.prototype.destroy=function(){},v.prototype.kerning=!0,v.prototype.position={constant:new Float32Array(2)},v.prototype.translate=null,v.prototype.scale=null,v.prototype.font=null,v.prototype.text="",v.prototype.positionOffset=[0,0],v.prototype.opacity=1,v.prototype.color=new Uint8Array([0,0,0,255]),v.prototype.alignOffset=[0,0],v.maxAtlasSize=1024,v.atlasCanvas=document.createElement("canvas"),v.atlasContext=v.atlasCanvas.getContext("2d",{alpha:!1}),v.baseFontSize=64,v.fonts={},ee.exports=v},12018:function(ee,D,e){var M=e(71299);function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var d=b.container.getBoundingClientRect();b.canvas.width=b.width||d.right-d.left,b.canvas.height=b.height||d.bottom-d.top}}function l(b){return typeof b.getContext=="function"&&"width"in b&&"height"in b}function T(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}ee.exports=function(b){var d;if(b?typeof b=="string"&&(b={container:b}):b={},(b=l(b)||typeof(d=b).nodeName=="string"&&typeof d.appendChild=="function"&&typeof d.getBoundingClientRect=="function"?{container:b}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(b)?{gl:b}:M(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if(typeof b.container=="string"){var s=document.querySelector(b.container);if(!s)throw Error("Element "+b.container+" is not found");b.container=s}l(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=T(),b.container.appendChild(b.canvas),k(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=T(),b.container.appendChild(b.canvas),k(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch{}return b.gl}),b.gl}},56068:function(ee){ee.exports=function(D){typeof D=="string"&&(D=[D]);for(var e=[].slice.call(arguments,1),M=[],k=0;k<D.length-1;k++)M.push(D[k],e[k]||"");return M.push(D[k]),M.join("")}},40383:function(ee,D,e){var M=e(68318)("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch{M=null}ee.exports=M},57035:function(ee,D,e){var M,k=e(54404);M=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:k,ee.exports=M},38520:function(ee,D,e){var M=e(54404);ee.exports=M&&function(){var k=!1;try{var l=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{k=!1}return k}()},55622:function(ee,D,e){var M=e(68318)("%Object.defineProperty%",!0),k=function(){if(M)try{return M({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return M([],"length",{value:1}).length!==1}catch{return!0}},ee.exports=k},57877:function(ee,D,e){var M=typeof Symbol<"u"&&Symbol,k=e(35638);ee.exports=function(){return typeof M=="function"&&typeof Symbol=="function"&&typeof M("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},35638:function(ee){ee.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var D={},e=Symbol("test"),M=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(M)!=="[object Symbol]")return!1;for(e in D[e]=42,D)return!1;if(typeof Object.keys=="function"&&Object.keys(D).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(D).length!==0)return!1;var k=Object.getOwnPropertySymbols(D);if(k.length!==1||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(D,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(D,e);if(l.value!==42||l.enumerable!==!0)return!1}return!0}},84543:function(ee,D,e){var M=e(35638);ee.exports=function(){return M()&&!!Symbol.toStringTag}},35065:function(ee,D,e){var M=e(77575);ee.exports=M.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(ee,D){D.read=function(e,M,k,l,T){var b,d,s=8*T-l-1,t=(1<<s)-1,i=t>>1,r=-7,n=k?T-1:0,o=k?-1:1,a=e[M+n];for(n+=o,b=a&(1<<-r)-1,a>>=-r,r+=s;r>0;b=256*b+e[M+n],n+=o,r-=8);for(d=b&(1<<-r)-1,b>>=-r,r+=l;r>0;d=256*d+e[M+n],n+=o,r-=8);if(b===0)b=1-i;else{if(b===t)return d?NaN:1/0*(a?-1:1);d+=Math.pow(2,l),b-=i}return(a?-1:1)*d*Math.pow(2,b-l)},D.write=function(e,M,k,l,T,b){var d,s,t,i=8*b-T-1,r=(1<<i)-1,n=r>>1,o=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,a=l?0:b-1,u=l?1:-1,p=M<0||M===0&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(s=isNaN(M)?1:0,d=r):(d=Math.floor(Math.log(M)/Math.LN2),M*(t=Math.pow(2,-d))<1&&(d--,t*=2),(M+=d+n>=1?o/t:o*Math.pow(2,1-n))*t>=2&&(d++,t/=2),d+n>=r?(s=0,d=r):d+n>=1?(s=(M*t-1)*Math.pow(2,T),d+=n):(s=M*Math.pow(2,n-1)*Math.pow(2,T),d=0));T>=8;e[k+a]=255&s,a+=u,s/=256,T-=8);for(d=d<<T|s,i+=T;i>0;e[k+a]=255&d,a+=u,d/=256,i-=8);e[k+a-u]|=128*p}},42018:function(ee){typeof Object.create=="function"?ee.exports=function(D,e){e&&(D.super_=e,D.prototype=Object.create(e.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}))}:ee.exports=function(D,e){if(e){D.super_=e;var M=function(){};M.prototype=e.prototype,D.prototype=new M,D.prototype.constructor=D}}},47216:function(ee,D,e){var M=e(84543)(),k=e(6614)("Object.prototype.toString"),l=function(d){return!(M&&d&&typeof d=="object"&&Symbol.toStringTag in d)&&k(d)==="[object Arguments]"},T=function(d){return!!l(d)||d!==null&&typeof d=="object"&&typeof d.length=="number"&&d.length>=0&&k(d)!=="[object Array]"&&k(d.callee)==="[object Function]"},b=function(){return l(arguments)}();l.isLegacyArguments=T,ee.exports=b?l:T},54404:function(ee){ee.exports=!0},85395:function(ee){var D,e,M=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{D=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,D)}catch(n){n!==e&&(k=null)}else k=null;var l=/^\s*class\b/,T=function(n){try{var o=M.call(n);return l.test(o)}catch{return!1}},b=function(n){try{return!T(n)&&(M.call(n),!0)}catch{return!1}},d=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var r=document.all;d.call(r)===d.call(document.all)&&(i=function(n){if((t||!n)&&(n===void 0||typeof n=="object"))try{var o=d.call(n);return(o==="[object HTMLAllCollection]"||o==="[object HTML document.all class]"||o==="[object HTMLCollection]"||o==="[object Object]")&&n("")==null}catch{}return!1})}ee.exports=k?function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{k(n,null,D)}catch(o){if(o!==e)return!1}return!T(n)&&b(n)}:function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(s)return b(n);if(T(n))return!1;var o=d.call(n);return!(o!=="[object Function]"&&o!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(o))&&b(n)}},65481:function(ee,D,e){var M,k=Object.prototype.toString,l=Function.prototype.toString,T=/^\s*(?:function)?\*/,b=e(84543)(),d=Object.getPrototypeOf;ee.exports=function(s){if(typeof s!="function")return!1;if(T.test(l.call(s)))return!0;if(!b)return k.call(s)==="[object GeneratorFunction]";if(!d)return!1;if(M===void 0){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();M=!!t&&d(t)}return d(s)===M}},62683:function(ee){ee.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(ee){ee.exports=function(D){return D!=D}},15567:function(ee,D,e){var M=e(68222),k=e(17045),l=e(64274),T=e(14922),b=e(22442),d=M(T(),Number);k(d,{getPolyfill:T,implementation:l,shim:b}),ee.exports=d},14922:function(ee,D,e){var M=e(64274);ee.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},22442:function(ee,D,e){var M=e(17045),k=e(14922);ee.exports=function(){var l=k();return M(Number,{isNaN:l},{isNaN:function(){return Number.isNaN!==l}}),l}},64941:function(ee){ee.exports=function(D){var e=typeof D;return D!==null&&(e==="object"||e==="function")}},10973:function(ee){var D=Object.prototype.toString;ee.exports=function(e){var M;return D.call(e)==="[object Object]"&&((M=Object.getPrototypeOf(e))===null||M===Object.getPrototypeOf({}))}},18546:function(ee){ee.exports=function(D){for(var e,M=D.length,k=0;k<M;k++)if(((e=D.charCodeAt(k))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},89546:function(ee){ee.exports=function(D){return typeof D=="string"&&(D=D.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(D)&&/[\dz]$/i.test(D)&&D.length>4))}},9187:function(ee,D,e){var M=e(31353),k=e(72077),l=e(6614),T=l("Object.prototype.toString"),b=e(84543)(),d=e(40383),s=typeof globalThis>"u"?e.g:globalThis,t=k(),i=l("Array.prototype.indexOf",!0)||function(a,u){for(var p=0;p<a.length;p+=1)if(a[p]===u)return p;return-1},r=l("String.prototype.slice"),n={},o=Object.getPrototypeOf;b&&d&&o&&M(t,function(a){var u=new s[a];if(Symbol.toStringTag in u){var p=o(u),c=d(p,Symbol.toStringTag);if(!c){var x=o(p);c=d(x,Symbol.toStringTag)}n[a]=c.get}}),ee.exports=function(a){if(!a||typeof a!="object")return!1;if(!b||!(Symbol.toStringTag in a)){var u=r(T(a),8,-1);return i(t,u)>-1}return!!d&&function(p){var c=!1;return M(n,function(x,g){if(!c)try{c=x.call(p)===g}catch{}}),c}(a)}},44517:function(ee){ee.exports=function(){var D,e,M;function k(l,T){if(D)if(e){var b="var sharedChunk = {}; ("+D+")(sharedChunk); ("+e+")(sharedChunk);",d={};D(d),(M=T(d)).workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))}else e=T;else D=T}return k(0,function(l){function T(A,I){return A(I={exports:{}},I.exports),I.exports}var b="1.10.1",d=s;function s(A,I,Z,le){this.cx=3*A,this.bx=3*(Z-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*I,this.by=3*(le-I)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=le,this.p2x=Z,this.p2y=le}s.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},s.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},s.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},s.prototype.solveCurveX=function(A,I){var Z,le,Se,Pe,je;for(I===void 0&&(I=1e-6),Se=A,je=0;je<8;je++){if(Pe=this.sampleCurveX(Se)-A,Math.abs(Pe)<I)return Se;var Ke=this.sampleCurveDerivativeX(Se);if(Math.abs(Ke)<1e-6)break;Se-=Pe/Ke}if((Se=A)<(Z=0))return Z;if(Se>(le=1))return le;for(;Z<le;){if(Pe=this.sampleCurveX(Se),Math.abs(Pe-A)<I)return Se;A>Pe?Z=Se:le=Se,Se=.5*(le-Z)+Z}return Se},s.prototype.solve=function(A,I){return this.sampleCurveY(this.solveCurveX(A,I))};var t=i;function i(A,I){this.x=A,this.y=I}function r(A,I,Z,le){var Se=new d(A,I,Z,le);return function(Pe){return Se.solve(Pe)}}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,I){return this.clone()._rotateAround(A,I)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var I=A.x-this.x,Z=A.y-this.y;return I*I+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,I){return Math.atan2(this.x*I-this.y*A,this.x*A+this.y*I)},_matMult:function(A){var I=A[0]*this.x+A[1]*this.y,Z=A[2]*this.x+A[3]*this.y;return this.x=I,this.y=Z,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var I=Math.cos(A),Z=Math.sin(A),le=I*this.x-Z*this.y,Se=Z*this.x+I*this.y;return this.x=le,this.y=Se,this},_rotateAround:function(A,I){var Z=Math.cos(A),le=Math.sin(A),Se=I.x+Z*(this.x-I.x)-le*(this.y-I.y),Pe=I.y+le*(this.x-I.x)+Z*(this.y-I.y);return this.x=Se,this.y=Pe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(A){return A instanceof i?A:Array.isArray(A)?new i(A[0],A[1]):A};var n=r(.25,.1,.25,1);function o(A,I,Z){return Math.min(Z,Math.max(I,A))}function a(A,I,Z){var le=Z-I,Se=((A-I)%le+le)%le+I;return Se===I?Z:Se}function u(A){for(var I=[],Z=arguments.length-1;Z-- >0;)I[Z]=arguments[Z+1];for(var le=0,Se=I;le<Se.length;le+=1){var Pe=Se[le];for(var je in Pe)A[je]=Pe[je]}return A}var p=1;function c(){return p++}function x(){return function A(I){return I?(I^16*Math.random()>>I/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function g(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function h(A,I){A.forEach(function(Z){I[Z]&&(I[Z]=I[Z].bind(I))})}function y(A,I){return A.indexOf(I,A.length-I.length)!==-1}function v(A,I,Z){var le={};for(var Se in A)le[Se]=I.call(Z||this,A[Se],Se,A);return le}function m(A,I,Z){var le={};for(var Se in A)I.call(Z||this,A[Se],Se,A)&&(le[Se]=A[Se]);return le}function _(A){return Array.isArray(A)?A.map(_):typeof A=="object"&&A?v(A,_):A}var f={};function S(A){f[A]||(typeof console<"u"&&console.warn(A),f[A]=!0)}function w(A,I,Z){return(Z.y-A.y)*(I.x-A.x)>(I.y-A.y)*(Z.x-A.x)}function E(A){for(var I=0,Z=0,le=A.length,Se=le-1,Pe=void 0,je=void 0;Z<le;Se=Z++)Pe=A[Z],I+=((je=A[Se]).x-Pe.x)*(Pe.y+je.y);return I}function L(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function C(A){var I={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(le,Se,Pe,je){var Ke=Pe||je;return I[Se]=!Ke||Ke.toLowerCase(),""}),I["max-age"]){var Z=parseInt(I["max-age"],10);isNaN(Z)?delete I["max-age"]:I["max-age"]=Z}return I}var P=null;function z(A){if(P==null){var I=A.navigator?A.navigator.userAgent:null;P=!!A.safari||!(!I||!(/\b(iPad|iPhone|iPod)\b/.test(I)||I.match("Safari")&&!I.match("Chrome")))}return P}function G(A){try{var I=self[A];return I.setItem("_mapbox_test_",1),I.removeItem("_mapbox_test_"),!0}catch{return!1}}var O,H,N,B,V=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),q=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,te=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,K={now:V,frame:function(A){var I=q(A);return{cancel:function(){return te(I)}}},getImageData:function(A,I){I===void 0&&(I=0);var Z=self.document.createElement("canvas"),le=Z.getContext("2d");if(!le)throw new Error("failed to create canvas 2d context");return Z.width=A.width,Z.height=A.height,le.drawImage(A,0,0,A.width,A.height),le.getImageData(-I,-I,A.width+2*I,A.height+2*I)},resolveURL:function(A){return O||(O=self.document.createElement("a")),O.href=A,O.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(H==null&&(H=self.matchMedia("(prefers-reduced-motion: reduce)")),H.matches)}},J={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Y={supported:!1,testSupport:function(A){!W&&B&&(Q?ne(A):N=A)}},W=!1,Q=!1;function ne(A){var I=A.createTexture();A.bindTexture(A.TEXTURE_2D,I);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,B),A.isContextLost())return;Y.supported=!0}catch{}A.deleteTexture(I),W=!0}self.document&&((B=self.document.createElement("img")).onload=function(){N&&ne(N),N=null,Q=!0},B.onerror=function(){W=!0,N=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ae=function(A,I){this._transformRequestFn=A,this._customAccessToken=I,this._createSkuToken()};function ue(A){return A.indexOf("mapbox:")===0}ae.prototype._createSkuToken=function(){var A=function(){for(var I="",Z=0;Z<10;Z++)I+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,I].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},ae.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ae.prototype.transformRequest=function(A,I){return this._transformRequestFn&&this._transformRequestFn(A,I)||{url:A}},ae.prototype.normalizeStyleURL=function(A,I){if(!ue(A))return A;var Z=me(A);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||I)},ae.prototype.normalizeGlyphsURL=function(A,I){if(!ue(A))return A;var Z=me(A);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||I)},ae.prototype.normalizeSourceURL=function(A,I){if(!ue(A))return A;var Z=me(A);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||I)},ae.prototype.normalizeSpriteURL=function(A,I,Z,le){var Se=me(A);return ue(A)?(Se.path="/styles/v1"+Se.path+"/sprite"+I+Z,this._makeAPIURL(Se,this._customAccessToken||le)):(Se.path+=""+I+Z,ve(Se))},ae.prototype.normalizeTileURL=function(A,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!ue(A))return A;var Z=me(A),le=K.devicePixelRatio>=2||I===512?"@2x":"",Se=Y.supported?".webp":"$1";Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+le+Se),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var Pe=this._customAccessToken||function(je){for(var Ke=0,st=je;Ke<st.length;Ke+=1){var yt=st[Ke].match(/^access_token=(.*)$/);if(yt)return yt[1]}return null}(Z.params)||J.ACCESS_TOKEN;return J.REQUIRE_ACCESS_TOKEN&&Pe&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,Pe)},ae.prototype.canonicalizeTileURL=function(A,I){var Z=me(A);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return A;var le="mapbox://tiles/";le+=Z.path.replace("/v4/","");var Se=Z.params;return I&&(Se=Se.filter(function(Pe){return!Pe.match(/^access_token=/)})),Se.length&&(le+="?"+Se.join("&")),le},ae.prototype.canonicalizeTileset=function(A,I){for(var Z=!!I&&ue(I),le=[],Se=0,Pe=A.tiles||[];Se<Pe.length;Se+=1){var je=Pe[Se];ge(je)?le.push(this.canonicalizeTileURL(je,Z)):le.push(je)}return le},ae.prototype._makeAPIURL=function(A,I){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",le=me(J.API_URL);if(A.protocol=le.protocol,A.authority=le.authority,le.path!=="/"&&(A.path=""+le.path+A.path),!J.REQUIRE_ACCESS_TOKEN)return ve(A);if(!(I=I||J.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if(I[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return A.params=A.params.filter(function(Se){return Se.indexOf("access_token")===-1}),A.params.push("access_token="+I),ve(A)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ge(A){return pe.test(A)}var _e=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function me(A){var I=A.match(_e);if(!I)throw new Error("Unable to parse URL object");return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}function ve(A){var I=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+I}var Oe="mapbox.eventData";function Me(A){if(!A)return null;var I,Z=A.split(".");if(!Z||Z.length!==3)return null;try{return JSON.parse((I=Z[1],decodeURIComponent(self.atob(I).split("").map(function(le){return"%"+("00"+le.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var Te=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Te.prototype.getStorageKey=function(A){var I,Z,le=Me(J.ACCESS_TOKEN);return I=le&&le.u?(Z=le.u,self.btoa(encodeURIComponent(Z).replace(/%([0-9A-F]{2})/g,function(Se,Pe){return String.fromCharCode(+("0x"+Pe))}))):J.ACCESS_TOKEN||"",A?Oe+"."+A+":"+I:Oe+":"+I},Te.prototype.fetchEventData=function(){var A=G("localStorage"),I=this.getStorageKey(),Z=this.getStorageKey("uuid");if(A)try{var le=self.localStorage.getItem(I);le&&(this.eventData=JSON.parse(le));var Se=self.localStorage.getItem(Z);Se&&(this.anonId=Se)}catch{S("Unable to read from LocalStorage")}},Te.prototype.saveEventData=function(){var A=G("localStorage"),I=this.getStorageKey(),Z=this.getStorageKey("uuid");if(A)try{self.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(I,JSON.stringify(this.eventData))}catch{S("Unable to write to LocalStorage")}},Te.prototype.processRequests=function(A){},Te.prototype.postEvent=function(A,I,Z,le){var Se=this;if(J.EVENTS_URL){var Pe=me(J.EVENTS_URL);Pe.params.push("access_token="+(le||J.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:re,userId:this.anonId},Ke=I?u(je,I):je,st={url:ve(Pe),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ke])};this.pendingRequest=Mt(st,function(yt){Se.pendingRequest=null,Z(yt),Se.saveEventData(),Se.processRequests(le)})}},Te.prototype.queueRequest=function(A,I){this.queue.push(A),this.processRequests(I)};var se,oe,he=function(A){function I(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.postMapLoadEvent=function(Z,le,Se,Pe){this.skuToken=Se,(J.EVENTS_URL&&Pe||J.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(je){return ue(je)||ge(je)}))&&this.queueRequest({id:le,timestamp:Date.now()},Pe)},I.prototype.processRequests=function(Z){var le=this;if(!this.pendingRequest&&this.queue.length!==0){var Se=this.queue.shift(),Pe=Se.id,je=Se.timestamp;Pe&&this.success[Pe]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=x()),this.postEvent(je,{skuToken:this.skuToken},function(Ke){Ke||Pe&&(le.success[Pe]=!0)},Z))}},I}(Te),Ee=function(A){function I(Z){A.call(this,"appUserTurnstile"),this._customAccessToken=Z}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.postTurnstileEvent=function(Z,le){J.EVENTS_URL&&J.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(Se){return ue(Se)||ge(Se)})&&this.queueRequest(Date.now(),le)},I.prototype.processRequests=function(Z){var le=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Se=Me(J.ACCESS_TOKEN),Pe=Se?Se.u:J.ACCESS_TOKEN,je=Pe!==this.eventData.tokenU;g(this.anonId)||(this.anonId=x(),je=!0);var Ke=this.queue.shift();if(this.eventData.lastSuccess){var st=new Date(this.eventData.lastSuccess),yt=new Date(Ke),_t=(Ke-this.eventData.lastSuccess)/864e5;je=je||_t>=1||_t<-1||st.getDate()!==yt.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent(Ke,{"enabled.telemetry":!1},function(Ot){Ot||(le.eventData.lastSuccess=Ke,le.eventData.tokenU=Pe)},Z)}},I}(Te),ke=new Ee,be=ke.postTurnstileEvent.bind(ke),Ie=new he,Fe=Ie.postMapLoadEvent.bind(Ie),ce="mapbox-tiles",we=500,ye=50,Ce=42e4;function Re(){self.caches&&!se&&(se=self.caches.open(ce))}function ze(A,I,Z){if(Re(),se){var le={status:I.status,statusText:I.statusText,headers:new self.Headers};I.headers.forEach(function(Pe,je){return le.headers.set(je,Pe)});var Se=C(I.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&le.headers.set("Expires",new Date(Z+1e3*Se["max-age"]).toUTCString()),new Date(le.headers.get("Expires")).getTime()-Z<Ce||function(Pe,je){if(oe===void 0)try{new Response(new ReadableStream),oe=!0}catch{oe=!1}oe?je(Pe.body):Pe.blob().then(je)}(I,function(Pe){var je=new self.Response(Pe,le);Re(),se&&se.then(function(Ke){return Ke.put(He(A.url),je)}).catch(function(Ke){return S(Ke.message)})}))}}function He(A){var I=A.indexOf("?");return I<0?A:A.slice(0,I)}function Ge(A,I){if(Re(),!se)return I(null);var Z=He(A.url);se.then(function(le){le.match(Z).then(function(Se){var Pe=function(je){if(!je)return!1;var Ke=new Date(je.headers.get("Expires")||0),st=C(je.headers.get("Cache-Control")||"");return Ke>Date.now()&&!st["no-cache"]}(Se);le.delete(Z),Pe&&le.put(Z,Se.clone()),I(null,Se,Pe)}).catch(I)}).catch(I)}var Je,ot=1/0;function Qe(){return Je==null&&(Je=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Je}var vt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(vt);var xt=function(A){function I(Z,le,Se){le===401&&ge(Se)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,Z),this.status=le,this.url=Se,this.name=this.constructor.name,this.message=Z}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},I}(Error),mt=L()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function rt(A,I){var Z,le=new self.AbortController,Se=new self.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:mt(),signal:le.signal}),Pe=!1,je=!1,Ke=(Z=Se.url).indexOf("sku=")>0&&ge(Z);A.type==="json"&&Se.headers.set("Accept","application/json");var st=function(_t,Ot,Bt){if(!je){if(_t&&_t.message!=="SecurityError"&&S(_t),Ot&&Bt)return yt(Ot);var zt=Date.now();self.fetch(Se).then(function(en){if(en.ok){var rn=Ke?en.clone():null;return yt(en,rn,zt)}return I(new xt(en.statusText,en.status,A.url))}).catch(function(en){en.code!==20&&I(new Error(en.message))})}},yt=function(_t,Ot,Bt){(A.type==="arrayBuffer"?_t.arrayBuffer():A.type==="json"?_t.json():_t.text()).then(function(zt){je||(Ot&&Bt&&ze(Se,Ot,Bt),Pe=!0,I(null,zt,_t.headers.get("Cache-Control"),_t.headers.get("Expires")))}).catch(function(zt){je||I(new Error(zt.message))})};return Ke?Ge(Se,st):st(null,null),{cancel:function(){je=!0,Pe||le.abort()}}}var it=function(A,I){if(Z=A.url,!(/^file:/.test(Z)||/^file:/.test(mt())&&!/^\w+:/.test(Z))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return rt(A,I);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,I,void 0,!0)}var Z;return function(le,Se){var Pe=new self.XMLHttpRequest;for(var je in Pe.open(le.method||"GET",le.url,!0),le.type==="arrayBuffer"&&(Pe.responseType="arraybuffer"),le.headers)Pe.setRequestHeader(je,le.headers[je]);return le.type==="json"&&(Pe.responseType="text",Pe.setRequestHeader("Accept","application/json")),Pe.withCredentials=le.credentials==="include",Pe.onerror=function(){Se(new Error(Pe.statusText))},Pe.onload=function(){if((Pe.status>=200&&Pe.status<300||Pe.status===0)&&Pe.response!==null){var Ke=Pe.response;if(le.type==="json")try{Ke=JSON.parse(Pe.response)}catch(st){return Se(st)}Se(null,Ke,Pe.getResponseHeader("Cache-Control"),Pe.getResponseHeader("Expires"))}else Se(new xt(Pe.statusText,Pe.status,le.url))},Pe.send(le.body),{cancel:function(){return Pe.abort()}}}(A,I)},Tt=function(A,I){return it(u(A,{type:"arrayBuffer"}),I)},Mt=function(A,I){return it(u(A,{method:"POST"}),I)},Pt,kt;Pt=[],kt=0;var Ze=function(A,I){if(Y.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),kt>=J.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:A,callback:I,cancelled:!1,cancel:function(){this.cancelled=!0}};return Pt.push(Z),Z}kt++;var le=!1,Se=function(){if(!le)for(le=!0,kt--;Pt.length&&kt<J.MAX_PARALLEL_IMAGE_REQUESTS;){var je=Pt.shift(),Ke=je.requestParameters,st=je.callback;je.cancelled||(je.cancel=Ze(Ke,st).cancel)}},Pe=Tt(A,function(je,Ke,st,yt){Se(),je?I(je):Ke&&(Qe()?function(_t,Ot){var Bt=new self.Blob([new Uint8Array(_t)],{type:"image/png"});self.createImageBitmap(Bt).then(function(zt){Ot(null,zt)}).catch(function(zt){Ot(new Error("Could not load image because of "+zt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ke,I):function(_t,Ot,Bt,zt){var en=new self.Image,rn=self.URL;en.onload=function(){Ot(null,en),rn.revokeObjectURL(en.src)},en.onerror=function(){return Ot(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var kn=new self.Blob([new Uint8Array(_t)],{type:"image/png"});en.cacheControl=Bt,en.expires=zt,en.src=_t.byteLength?rn.createObjectURL(kn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ke,I,st,yt))});return{cancel:function(){Pe.cancel(),Se()}}};function Xe(A,I,Z){Z[A]&&Z[A].indexOf(I)!==-1||(Z[A]=Z[A]||[],Z[A].push(I))}function Ve(A,I,Z){if(Z&&Z[A]){var le=Z[A].indexOf(I);le!==-1&&Z[A].splice(le,1)}}var We=function(A,I){I===void 0&&(I={}),u(this,I),this.type=A},at=function(A){function I(Z,le){le===void 0&&(le={}),A.call(this,"error",u({error:Z},le))}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(We),et=function(){};et.prototype.on=function(A,I){return this._listeners=this._listeners||{},Xe(A,I,this._listeners),this},et.prototype.off=function(A,I){return Ve(A,I,this._listeners),Ve(A,I,this._oneTimeListeners),this},et.prototype.once=function(A,I){return this._oneTimeListeners=this._oneTimeListeners||{},Xe(A,I,this._oneTimeListeners),this},et.prototype.fire=function(A,I){typeof A=="string"&&(A=new We(A,I||{}));var Z=A.type;if(this.listens(Z)){A.target=this;for(var le=0,Se=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];le<Se.length;le+=1)Se[le].call(this,A);for(var Pe=0,je=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];Pe<je.length;Pe+=1){var Ke=je[Pe];Ve(Z,Ke,this._oneTimeListeners),Ke.call(this,A)}var st=this._eventedParent;st&&(u(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),st.fire(A))}else A instanceof at&&console.error(A.error);return this},et.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},et.prototype.setEventedParent=function(A,I){return this._eventedParent=A,this._eventedParentData=I,this};var De={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Be=function(A,I,Z,le){this.message=(A?A+": ":"")+Z,le&&(this.identifier=le),I!=null&&I.__line__&&(this.line=I.__line__)};function nt(A){var I=A.key,Z=A.value;return Z?[new Be(I,Z,"constants have been deprecated as of v8")]:[]}function tt(A){for(var I=[],Z=arguments.length-1;Z-- >0;)I[Z]=arguments[Z+1];for(var le=0,Se=I;le<Se.length;le+=1){var Pe=Se[le];for(var je in Pe)A[je]=Pe[je]}return A}function dt(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function ht(A){if(Array.isArray(A))return A.map(ht);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var I={};for(var Z in A)I[Z]=ht(A[Z]);return I}return dt(A)}var gt=function(A){function I(Z,le){A.call(this,le),this.message=le,this.key=Z}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Error),ut=function(A,I){I===void 0&&(I=[]),this.parent=A,this.bindings={};for(var Z=0,le=I;Z<le.length;Z+=1){var Se=le[Z],Pe=Se[0],je=Se[1];this.bindings[Pe]=je}};ut.prototype.concat=function(A){return new ut(this,A)},ut.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},ut.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var wt={kind:"null"},ct={kind:"number"},ft={kind:"string"},bt={kind:"boolean"},It={kind:"color"},Dt={kind:"object"},Nt={kind:"value"},Qt={kind:"collator"},jt={kind:"formatted"},Ut={kind:"resolvedImage"};function Xt(A,I){return{kind:"array",itemType:A,N:I}}function gn(A){if(A.kind==="array"){var I=gn(A.itemType);return typeof A.N=="number"?"array<"+I+", "+A.N+">":A.itemType.kind==="value"?"array":"array<"+I+">"}return A.kind}var Mn=[wt,ct,ft,bt,It,jt,Dt,Xt(Nt),Ut];function cn(A,I){if(I.kind==="error")return null;if(A.kind==="array"){if(I.kind==="array"&&(I.N===0&&I.itemType.kind==="value"||!cn(A.itemType,I.itemType))&&(typeof A.N!="number"||A.N===I.N))return null}else{if(A.kind===I.kind)return null;if(A.kind==="value"){for(var Z=0,le=Mn;Z<le.length;Z+=1)if(!cn(le[Z],I))return null}}return"Expected "+gn(A)+" but found "+gn(I)+" instead."}function qt(A,I){return I.some(function(Z){return Z.kind===A.kind})}function nn(A,I){return I.some(function(Z){return Z==="null"?A===null:Z==="array"?Array.isArray(A):Z==="object"?A&&!Array.isArray(A)&&typeof A=="object":Z===typeof A})}var Kt=T(function(A,I){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(st){return(st=Math.round(st))<0?0:st>255?255:st}function Se(st){return st<0?0:st>1?1:st}function Pe(st){return st[st.length-1]==="%"?le(parseFloat(st)/100*255):le(parseInt(st))}function je(st){return st[st.length-1]==="%"?Se(parseFloat(st)/100):Se(parseFloat(st))}function Ke(st,yt,_t){return _t<0?_t+=1:_t>1&&(_t-=1),6*_t<1?st+(yt-st)*_t*6:2*_t<1?yt:3*_t<2?st+(yt-st)*(2/3-_t)*6:st}try{I.parseCSSColor=function(st){var yt,_t=st.replace(/ /g,"").toLowerCase();if(_t in Z)return Z[_t].slice();if(_t[0]==="#")return _t.length===4?(yt=parseInt(_t.substr(1),16))>=0&&yt<=4095?[(3840&yt)>>4|(3840&yt)>>8,240&yt|(240&yt)>>4,15&yt|(15&yt)<<4,1]:null:_t.length===7&&(yt=parseInt(_t.substr(1),16))>=0&&yt<=16777215?[(16711680&yt)>>16,(65280&yt)>>8,255&yt,1]:null;var Ot=_t.indexOf("("),Bt=_t.indexOf(")");if(Ot!==-1&&Bt+1===_t.length){var zt=_t.substr(0,Ot),en=_t.substr(Ot+1,Bt-(Ot+1)).split(","),rn=1;switch(zt){case"rgba":if(en.length!==4)return null;rn=je(en.pop());case"rgb":return en.length!==3?null:[Pe(en[0]),Pe(en[1]),Pe(en[2]),rn];case"hsla":if(en.length!==4)return null;rn=je(en.pop());case"hsl":if(en.length!==3)return null;var kn=(parseFloat(en[0])%360+360)%360/360,Tn=je(en[1]),On=je(en[2]),Dn=On<=.5?On*(Tn+1):On+Tn-On*Tn,jn=2*On-Dn;return[le(255*Ke(jn,Dn,kn+1/3)),le(255*Ke(jn,Dn,kn)),le(255*Ke(jn,Dn,kn-1/3)),rn];default:return null}}return null}}catch{}}),sn=Kt.parseCSSColor,hn=function(A,I,Z,le){le===void 0&&(le=1),this.r=A,this.g=I,this.b=Z,this.a=le};hn.parse=function(A){if(A){if(A instanceof hn)return A;if(typeof A=="string"){var I=sn(A);if(I)return new hn(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3])}}},hn.prototype.toString=function(){var A=this.toArray(),I=A[0],Z=A[1],le=A[2],Se=A[3];return"rgba("+Math.round(I)+","+Math.round(Z)+","+Math.round(le)+","+Se+")"},hn.prototype.toArray=function(){var A=this,I=A.r,Z=A.g,le=A.b,Se=A.a;return Se===0?[0,0,0,0]:[255*I/Se,255*Z/Se,255*le/Se,Se]},hn.black=new hn(0,0,0,1),hn.white=new hn(1,1,1,1),hn.transparent=new hn(0,0,0,0),hn.red=new hn(1,0,0,1);var bn=function(A,I,Z){this.sensitivity=A?I?"variant":"case":I?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};bn.prototype.compare=function(A,I){return this.collator.compare(A,I)},bn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var yn=function(A,I,Z,le,Se){this.text=A,this.image=I,this.scale=Z,this.fontStack=le,this.textColor=Se},Sn=function(A){this.sections=A};Sn.fromString=function(A){return new Sn([new yn(A,null,null,null,null)])},Sn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(A){return A.text.length!==0||A.image&&A.image.name.length!==0})},Sn.factory=function(A){return A instanceof Sn?A:Sn.fromString(A)},Sn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(A){return A.text}).join("")},Sn.prototype.serialize=function(){for(var A=["format"],I=0,Z=this.sections;I<Z.length;I+=1){var le=Z[I];if(le.image)A.push(["image",le.image.name]);else{A.push(le.text);var Se={};le.fontStack&&(Se["text-font"]=["literal",le.fontStack.split(",")]),le.scale&&(Se["font-scale"]=le.scale),le.textColor&&(Se["text-color"]=["rgba"].concat(le.textColor.toArray())),A.push(Se)}}return A};var pn=function(A){this.name=A.name,this.available=A.available};function Cn(A,I,Z,le){return typeof A=="number"&&A>=0&&A<=255&&typeof I=="number"&&I>=0&&I<=255&&typeof Z=="number"&&Z>=0&&Z<=255?le===void 0||typeof le=="number"&&le>=0&&le<=1?null:"Invalid rgba value ["+[A,I,Z,le].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof le=="number"?[A,I,Z,le]:[A,I,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Hn(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof hn||A instanceof bn||A instanceof Sn||A instanceof pn)return!0;if(Array.isArray(A)){for(var I=0,Z=A;I<Z.length;I+=1)if(!Hn(Z[I]))return!1;return!0}if(typeof A=="object"){for(var le in A)if(!Hn(A[le]))return!1;return!0}return!1}function Qn(A){if(A===null)return wt;if(typeof A=="string")return ft;if(typeof A=="boolean")return bt;if(typeof A=="number")return ct;if(A instanceof hn)return It;if(A instanceof bn)return Qt;if(A instanceof Sn)return jt;if(A instanceof pn)return Ut;if(Array.isArray(A)){for(var I,Z=A.length,le=0,Se=A;le<Se.length;le+=1){var Pe=Qn(Se[le]);if(I){if(I===Pe)continue;I=Nt;break}I=Pe}return Xt(I||Nt,Z)}return Dt}function nr(A){var I=typeof A;return A===null?"":I==="string"||I==="number"||I==="boolean"?String(A):A instanceof hn||A instanceof Sn||A instanceof pn?A.toString():JSON.stringify(A)}pn.prototype.toString=function(){return this.name},pn.fromString=function(A){return A?new pn({name:A,available:!1}):null},pn.prototype.serialize=function(){return["image",this.name]};var Jn=function(A,I){this.type=A,this.value=I};Jn.parse=function(A,I){if(A.length!==2)return I.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!Hn(A[1]))return I.error("invalid value");var Z=A[1],le=Qn(Z),Se=I.expectedType;return le.kind!=="array"||le.N!==0||!Se||Se.kind!=="array"||typeof Se.N=="number"&&Se.N!==0||(le=Se),new Jn(le,Z)},Jn.prototype.evaluate=function(){return this.value},Jn.prototype.eachChild=function(){},Jn.prototype.outputDefined=function(){return!0},Jn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof hn?["rgba"].concat(this.value.toArray()):this.value instanceof Sn?this.value.serialize():this.value};var Gn=function(A){this.name="ExpressionEvaluationError",this.message=A};Gn.prototype.toJSON=function(){return this.message};var lr={string:ft,number:ct,boolean:bt,object:Dt},Rt=function(A,I){this.type=A,this.args=I};Rt.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Z,le=1,Se=A[0];if(Se==="array"){var Pe,je;if(A.length>2){var Ke=A[1];if(typeof Ke!="string"||!(Ke in lr)||Ke==="object")return I.error('The item type argument of "array" must be one of string, number, boolean',1);Pe=lr[Ke],le++}else Pe=Nt;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return I.error('The length argument to "array" must be a positive integer literal',2);je=A[2],le++}Z=Xt(Pe,je)}else Z=lr[Se];for(var st=[];le<A.length;le++){var yt=I.parse(A[le],le,Nt);if(!yt)return null;st.push(yt)}return new Rt(Z,st)},Rt.prototype.evaluate=function(A){for(var I=0;I<this.args.length;I++){var Z=this.args[I].evaluate(A);if(!cn(this.type,Qn(Z)))return Z;if(I===this.args.length-1)throw new Gn("Expected value to be of type "+gn(this.type)+", but found "+gn(Qn(Z))+" instead.")}return null},Rt.prototype.eachChild=function(A){this.args.forEach(A)},Rt.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Rt.prototype.serialize=function(){var A=this.type,I=[A.kind];if(A.kind==="array"){var Z=A.itemType;if(Z.kind==="string"||Z.kind==="number"||Z.kind==="boolean"){I.push(Z.kind);var le=A.N;(typeof le=="number"||this.args.length>1)&&I.push(le)}}return I.concat(this.args.map(function(Se){return Se.serialize()}))};var $t=function(A){this.type=jt,this.sections=A};$t.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Z=A[1];if(!Array.isArray(Z)&&typeof Z=="object")return I.error("First argument must be an image or text section.");for(var le=[],Se=!1,Pe=1;Pe<=A.length-1;++Pe){var je=A[Pe];if(Se&&typeof je=="object"&&!Array.isArray(je)){Se=!1;var Ke=null;if(je["font-scale"]&&!(Ke=I.parse(je["font-scale"],1,ct)))return null;var st=null;if(je["text-font"]&&!(st=I.parse(je["text-font"],1,Xt(ft))))return null;var yt=null;if(je["text-color"]&&!(yt=I.parse(je["text-color"],1,It)))return null;var _t=le[le.length-1];_t.scale=Ke,_t.font=st,_t.textColor=yt}else{var Ot=I.parse(A[Pe],1,Nt);if(!Ot)return null;var Bt=Ot.type.kind;if(Bt!=="string"&&Bt!=="value"&&Bt!=="null"&&Bt!=="resolvedImage")return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Se=!0,le.push({content:Ot,scale:null,font:null,textColor:null})}}return new $t(le)},$t.prototype.evaluate=function(A){return new Sn(this.sections.map(function(I){var Z=I.content.evaluate(A);return Qn(Z)===Ut?new yn("",Z,null,null,null):new yn(nr(Z),null,I.scale?I.scale.evaluate(A):null,I.font?I.font.evaluate(A).join(","):null,I.textColor?I.textColor.evaluate(A):null)}))},$t.prototype.eachChild=function(A){for(var I=0,Z=this.sections;I<Z.length;I+=1){var le=Z[I];A(le.content),le.scale&&A(le.scale),le.font&&A(le.font),le.textColor&&A(le.textColor)}},$t.prototype.outputDefined=function(){return!1},$t.prototype.serialize=function(){for(var A=["format"],I=0,Z=this.sections;I<Z.length;I+=1){var le=Z[I];A.push(le.content.serialize());var Se={};le.scale&&(Se["font-scale"]=le.scale.serialize()),le.font&&(Se["text-font"]=le.font.serialize()),le.textColor&&(Se["text-color"]=le.textColor.serialize()),A.push(Se)}return A};var an=function(A){this.type=Ut,this.input=A};an.parse=function(A,I){if(A.length!==2)return I.error("Expected two arguments.");var Z=I.parse(A[1],1,ft);return Z?new an(Z):I.error("No image name provided.")},an.prototype.evaluate=function(A){var I=this.input.evaluate(A),Z=pn.fromString(I);return Z&&A.availableImages&&(Z.available=A.availableImages.indexOf(I)>-1),Z},an.prototype.eachChild=function(A){A(this.input)},an.prototype.outputDefined=function(){return!1},an.prototype.serialize=function(){return["image",this.input.serialize()]};var fn={"to-boolean":bt,"to-color":It,"to-number":ct,"to-string":ft},wn=function(A,I){this.type=A,this.args=I};wn.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Z=A[0];if((Z==="to-boolean"||Z==="to-string")&&A.length!==2)return I.error("Expected one argument.");for(var le=fn[Z],Se=[],Pe=1;Pe<A.length;Pe++){var je=I.parse(A[Pe],Pe,Nt);if(!je)return null;Se.push(je)}return new wn(le,Se)},wn.prototype.evaluate=function(A){if(this.type.kind==="boolean")return!!this.args[0].evaluate(A);if(this.type.kind==="color"){for(var I,Z,le=0,Se=this.args;le<Se.length;le+=1){if(Z=null,(I=Se[le].evaluate(A))instanceof hn)return I;if(typeof I=="string"){var Pe=A.parseColor(I);if(Pe)return Pe}else if(Array.isArray(I)&&!(Z=I.length<3||I.length>4?"Invalid rbga value "+JSON.stringify(I)+": expected an array containing either three or four numeric values.":Cn(I[0],I[1],I[2],I[3])))return new hn(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new Gn(Z||"Could not parse color from value '"+(typeof I=="string"?I:String(JSON.stringify(I)))+"'")}if(this.type.kind==="number"){for(var je=null,Ke=0,st=this.args;Ke<st.length;Ke+=1){if((je=st[Ke].evaluate(A))===null)return 0;var yt=Number(je);if(!isNaN(yt))return yt}throw new Gn("Could not convert "+JSON.stringify(je)+" to number.")}return this.type.kind==="formatted"?Sn.fromString(nr(this.args[0].evaluate(A))):this.type.kind==="resolvedImage"?pn.fromString(nr(this.args[0].evaluate(A))):nr(this.args[0].evaluate(A))},wn.prototype.eachChild=function(A){this.args.forEach(A)},wn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},wn.prototype.serialize=function(){if(this.type.kind==="formatted")return new $t([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new an(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(I){A.push(I.serialize())}),A};var Bn=["Unknown","Point","LineString","Polygon"],Ln=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ln.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ln.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Bn[this.feature.type]:this.feature.type:null},Ln.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ln.prototype.canonicalID=function(){return this.canonical},Ln.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ln.prototype.parseColor=function(A){var I=this._parseColorCache[A];return I||(I=this._parseColorCache[A]=hn.parse(A)),I};var In=function(A,I,Z,le){this.name=A,this.type=I,this._evaluate=Z,this.args=le};In.prototype.evaluate=function(A){return this._evaluate(A,this.args)},In.prototype.eachChild=function(A){this.args.forEach(A)},In.prototype.outputDefined=function(){return!1},In.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},In.parse=function(A,I){var Z,le=A[0],Se=In.definitions[le];if(!Se)return I.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Pe=Array.isArray(Se)?Se[0]:Se.type,je=Array.isArray(Se)?[[Se[1],Se[2]]]:Se.overloads,Ke=je.filter(function(Dr){var kr=Dr[0];return!Array.isArray(kr)||kr.length===A.length-1}),st=null,yt=0,_t=Ke;yt<_t.length;yt+=1){var Ot=_t[yt],Bt=Ot[0],zt=Ot[1];st=new tr(I.registry,I.path,null,I.scope);for(var en=[],rn=!1,kn=1;kn<A.length;kn++){var Tn=A[kn],On=Array.isArray(Bt)?Bt[kn-1]:Bt.type,Dn=st.parse(Tn,1+en.length,On);if(!Dn){rn=!0;break}en.push(Dn)}if(!rn)if(Array.isArray(Bt)&&Bt.length!==en.length)st.error("Expected "+Bt.length+" arguments, but found "+en.length+" instead.");else{for(var jn=0;jn<en.length;jn++){var Zn=Array.isArray(Bt)?Bt[jn]:Bt.type,$n=en[jn];st.concat(jn+1).checkSubtype(Zn,$n.type)}if(st.errors.length===0)return new In(le,Pe,zt,en)}}if(Ke.length===1)(Z=I.errors).push.apply(Z,st.errors);else{for(var pr=(Ke.length?Ke:je).map(function(Dr){return kr=Dr[0],Array.isArray(kr)?"("+kr.map(gn).join(", ")+")":"("+gn(kr.type)+"...)";var kr}).join(" | "),sr=[],gr=1;gr<A.length;gr++){var _r=I.parse(A[gr],1+sr.length);if(!_r)return null;sr.push(gn(_r.type))}I.error("Expected arguments of type "+pr+", but found ("+sr.join(", ")+") instead.")}return null},In.register=function(A,I){for(var Z in In.definitions=I,I)A[Z]=In};var Wn=function(A,I,Z){this.type=Qt,this.locale=Z,this.caseSensitive=A,this.diacriticSensitive=I};Wn.parse=function(A,I){if(A.length!==2)return I.error("Expected one argument.");var Z=A[1];if(typeof Z!="object"||Array.isArray(Z))return I.error("Collator options argument must be an object.");var le=I.parse(Z["case-sensitive"]!==void 0&&Z["case-sensitive"],1,bt);if(!le)return null;var Se=I.parse(Z["diacritic-sensitive"]!==void 0&&Z["diacritic-sensitive"],1,bt);if(!Se)return null;var Pe=null;return Z.locale&&!(Pe=I.parse(Z.locale,1,ft))?null:new Wn(le,Se,Pe)},Wn.prototype.evaluate=function(A){return new bn(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},Wn.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},Wn.prototype.outputDefined=function(){return!1},Wn.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Vt=8192;function _n(A,I){A[0]=Math.min(A[0],I[0]),A[1]=Math.min(A[1],I[1]),A[2]=Math.max(A[2],I[0]),A[3]=Math.max(A[3],I[1])}function At(A,I){return!(A[0]<=I[0]||A[2]>=I[2]||A[1]<=I[1]||A[3]>=I[3])}function Gt(A,I){var Z,le=(180+A[0])/360,Se=(Z=A[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Z*Math.PI/360)))/360),Pe=Math.pow(2,I.z);return[Math.round(le*Pe*Vt),Math.round(Se*Pe*Vt)]}function Jt(A,I,Z){return I[1]>A[1]!=Z[1]>A[1]&&A[0]<(Z[0]-I[0])*(A[1]-I[1])/(Z[1]-I[1])+I[0]}function mn(A,I){for(var Z=!1,le=0,Se=I.length;le<Se;le++)for(var Pe=I[le],je=0,Ke=Pe.length;je<Ke-1;je++){if(st=A,yt=Pe[je],_t=Pe[je+1],Ot=void 0,Bt=void 0,zt=void 0,en=void 0,Ot=st[0]-yt[0],Bt=st[1]-yt[1],zt=st[0]-_t[0],en=st[1]-_t[1],Ot*en-zt*Bt==0&&Ot*zt<=0&&Bt*en<=0)return!1;Jt(A,Pe[je],Pe[je+1])&&(Z=!Z)}var st,yt,_t,Ot,Bt,zt,en;return Z}function xn(A,I){for(var Z=0;Z<I.length;Z++)if(mn(A,I[Z]))return!0;return!1}function An(A,I,Z,le){var Se=A[0]-Z[0],Pe=A[1]-Z[1],je=I[0]-Z[0],Ke=I[1]-Z[1],st=le[0]-Z[0],yt=le[1]-Z[1],_t=Se*yt-st*Pe,Ot=je*yt-st*Ke;return _t>0&&Ot<0||_t<0&&Ot>0}function ln(A,I,Z){for(var le=0,Se=Z;le<Se.length;le+=1)for(var Pe=Se[le],je=0;je<Pe.length-1;++je)if(Ke=A,st=I,yt=Pe[je],_t=Pe[je+1],Ot=void 0,Bt=void 0,zt=void 0,zt=[st[0]-Ke[0],st[1]-Ke[1]],Ot=[_t[0]-yt[0],_t[1]-yt[1]],Bt=zt,Ot[0]*Bt[1]-Ot[1]*Bt[0]!=0&&An(Ke,st,yt,_t)&&An(yt,_t,Ke,st))return!0;var Ke,st,yt,_t,Ot,Bt,zt;return!1}function Yt(A,I){for(var Z=0;Z<A.length;++Z)if(!mn(A[Z],I))return!1;for(var le=0;le<A.length-1;++le)if(ln(A[le],A[le+1],I))return!1;return!0}function Wt(A,I){for(var Z=0;Z<I.length;Z++)if(Yt(A,I[Z]))return!0;return!1}function on(A,I,Z){for(var le=[],Se=0;Se<A.length;Se++){for(var Pe=[],je=0;je<A[Se].length;je++){var Ke=Gt(A[Se][je],Z);_n(I,Ke),Pe.push(Ke)}le.push(Pe)}return le}function un(A,I,Z){for(var le=[],Se=0;Se<A.length;Se++){var Pe=on(A[Se],I,Z);le.push(Pe)}return le}function En(A,I,Z,le){if(A[0]<Z[0]||A[0]>Z[2]){var Se=.5*le,Pe=A[0]-Z[0]>Se?-le:Z[0]-A[0]>Se?le:0;Pe===0&&(Pe=A[0]-Z[2]>Se?-le:Z[2]-A[0]>Se?le:0),A[0]+=Pe}_n(I,A)}function Pn(A,I,Z,le){for(var Se=Math.pow(2,le.z)*Vt,Pe=[le.x*Vt,le.y*Vt],je=[],Ke=0,st=A;Ke<st.length;Ke+=1)for(var yt=0,_t=st[Ke];yt<_t.length;yt+=1){var Ot=_t[yt],Bt=[Ot.x+Pe[0],Ot.y+Pe[1]];En(Bt,I,Z,Se),je.push(Bt)}return je}function Un(A,I,Z,le){for(var Se=Math.pow(2,le.z)*Vt,Pe=[le.x*Vt,le.y*Vt],je=[],Ke=0,st=A;Ke<st.length;Ke+=1){for(var yt=[],_t=0,Ot=st[Ke];_t<Ot.length;_t+=1){var Bt=Ot[_t],zt=[Bt.x+Pe[0],Bt.y+Pe[1]];_n(I,zt),yt.push(zt)}je.push(yt)}if(I[2]-I[0]<=Se/2){(On=I)[0]=On[1]=1/0,On[2]=On[3]=-1/0;for(var en=0,rn=je;en<rn.length;en+=1)for(var kn=0,Tn=rn[en];kn<Tn.length;kn+=1)En(Tn[kn],I,Z,Se)}var On;return je}var Fn=function(A,I){this.type=bt,this.geojson=A,this.geometries=I};function Kn(A){if(A instanceof In&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof Fn)return!1;var I=!0;return A.eachChild(function(Z){I&&!Kn(Z)&&(I=!1)}),I}function qn(A){if(A instanceof In&&A.name==="feature-state")return!1;var I=!0;return A.eachChild(function(Z){I&&!qn(Z)&&(I=!1)}),I}function rr(A,I){if(A instanceof In&&I.indexOf(A.name)>=0)return!1;var Z=!0;return A.eachChild(function(le){Z&&!rr(le,I)&&(Z=!1)}),Z}Fn.parse=function(A,I){if(A.length!==2)return I.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(Hn(A[1])){var Z=A[1];if(Z.type==="FeatureCollection")for(var le=0;le<Z.features.length;++le){var Se=Z.features[le].geometry.type;if(Se==="Polygon"||Se==="MultiPolygon")return new Fn(Z,Z.features[le].geometry)}else if(Z.type==="Feature"){var Pe=Z.geometry.type;if(Pe==="Polygon"||Pe==="MultiPolygon")return new Fn(Z,Z.geometry)}else if(Z.type==="Polygon"||Z.type==="MultiPolygon")return new Fn(Z,Z)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Fn.prototype.evaluate=function(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(I,Z){var le=[1/0,1/0,-1/0,-1/0],Se=[1/0,1/0,-1/0,-1/0],Pe=I.canonicalID();if(Z.type==="Polygon"){var je=on(Z.coordinates,Se,Pe),Ke=Pn(I.geometry(),le,Se,Pe);if(!At(le,Se))return!1;for(var st=0,yt=Ke;st<yt.length;st+=1)if(!mn(yt[st],je))return!1}if(Z.type==="MultiPolygon"){var _t=un(Z.coordinates,Se,Pe),Ot=Pn(I.geometry(),le,Se,Pe);if(!At(le,Se))return!1;for(var Bt=0,zt=Ot;Bt<zt.length;Bt+=1)if(!xn(zt[Bt],_t))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(I,Z){var le=[1/0,1/0,-1/0,-1/0],Se=[1/0,1/0,-1/0,-1/0],Pe=I.canonicalID();if(Z.type==="Polygon"){var je=on(Z.coordinates,Se,Pe),Ke=Un(I.geometry(),le,Se,Pe);if(!At(le,Se))return!1;for(var st=0,yt=Ke;st<yt.length;st+=1)if(!Yt(yt[st],je))return!1}if(Z.type==="MultiPolygon"){var _t=un(Z.coordinates,Se,Pe),Ot=Un(I.geometry(),le,Se,Pe);if(!At(le,Se))return!1;for(var Bt=0,zt=Ot;Bt<zt.length;Bt+=1)if(!Wt(zt[Bt],_t))return!1}return!0}(A,this.geometries)}return!1},Fn.prototype.eachChild=function(){},Fn.prototype.outputDefined=function(){return!0},Fn.prototype.serialize=function(){return["within",this.geojson]};var er=function(A,I){this.type=I.type,this.name=A,this.boundExpression=I};er.parse=function(A,I){if(A.length!==2||typeof A[1]!="string")return I.error("'var' expression requires exactly one string literal argument.");var Z=A[1];return I.scope.has(Z)?new er(Z,I.scope.get(Z)):I.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},er.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!1},er.prototype.serialize=function(){return["var",this.name]};var tr=function(A,I,Z,le,Se){I===void 0&&(I=[]),le===void 0&&(le=new ut),Se===void 0&&(Se=[]),this.registry=A,this.path=I,this.key=I.map(function(Pe){return"["+Pe+"]"}).join(""),this.scope=le,this.errors=Se,this.expectedType=Z};function ur(A){if(A instanceof er)return ur(A.boundExpression);if(A instanceof In&&A.name==="error"||A instanceof Wn||A instanceof Fn)return!1;var I=A instanceof wn||A instanceof Rt,Z=!0;return A.eachChild(function(le){Z=I?Z&&ur(le):Z&&le instanceof Jn}),!!Z&&Kn(A)&&rr(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function cr(A,I){for(var Z,le,Se=A.length-1,Pe=0,je=Se,Ke=0;Pe<=je;)if(Z=A[Ke=Math.floor((Pe+je)/2)],le=A[Ke+1],Z<=I){if(Ke===Se||I<le)return Ke;Pe=Ke+1}else{if(!(Z>I))throw new Gn("Input is not a number.");je=Ke-1}return 0}tr.prototype.parse=function(A,I,Z,le,Se){return Se===void 0&&(Se={}),I?this.concat(I,Z,le)._parse(A,Se):this._parse(A,Se)},tr.prototype._parse=function(A,I){function Z(yt,_t,Ot){return Ot==="assert"?new Rt(_t,[yt]):Ot==="coerce"?new wn(_t,[yt]):yt}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var le=A[0];if(typeof le!="string")return this.error("Expression name must be a string, but found "+typeof le+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Se=this.registry[le];if(Se){var Pe=Se.parse(A,this);if(!Pe)return null;if(this.expectedType){var je=this.expectedType,Ke=Pe.type;if(je.kind!=="string"&&je.kind!=="number"&&je.kind!=="boolean"&&je.kind!=="object"&&je.kind!=="array"||Ke.kind!=="value")if(je.kind!=="color"&&je.kind!=="formatted"&&je.kind!=="resolvedImage"||Ke.kind!=="value"&&Ke.kind!=="string"){if(this.checkSubtype(je,Ke))return null}else Pe=Z(Pe,je,I.typeAnnotation||"coerce");else Pe=Z(Pe,je,I.typeAnnotation||"assert")}if(!(Pe instanceof Jn)&&Pe.type.kind!=="resolvedImage"&&ur(Pe)){var st=new Ln;try{Pe=new Jn(Pe.type,Pe.evaluate(st))}catch(yt){return this.error(yt.message),null}}return Pe}return this.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0)}return A===void 0?this.error("'undefined' value invalid. Use null instead."):typeof A=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof A+" instead.")},tr.prototype.concat=function(A,I,Z){var le=typeof A=="number"?this.path.concat(A):this.path,Se=Z?this.scope.concat(Z):this.scope;return new tr(this.registry,le,I||null,Se,this.errors)},tr.prototype.error=function(A){for(var I=[],Z=arguments.length-1;Z-- >0;)I[Z]=arguments[Z+1];var le=""+this.key+I.map(function(Se){return"["+Se+"]"}).join("");this.errors.push(new gt(le,A))},tr.prototype.checkSubtype=function(A,I){var Z=cn(A,I);return Z&&this.error(Z),Z};var br=function(A,I,Z){this.type=A,this.input=I,this.labels=[],this.outputs=[];for(var le=0,Se=Z;le<Se.length;le+=1){var Pe=Se[le],je=Pe[0],Ke=Pe[1];this.labels.push(je),this.outputs.push(Ke)}};function Yn(A,I,Z){return A*(1-Z)+I*Z}br.parse=function(A,I){if(A.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return I.error("Expected an even number of arguments.");var Z=I.parse(A[1],1,ct);if(!Z)return null;var le=[],Se=null;I.expectedType&&I.expectedType.kind!=="value"&&(Se=I.expectedType);for(var Pe=1;Pe<A.length;Pe+=2){var je=Pe===1?-1/0:A[Pe],Ke=A[Pe+1],st=Pe,yt=Pe+1;if(typeof je!="number")return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(le.length&&le[le.length-1][0]>=je)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);var _t=I.parse(Ke,yt,Se);if(!_t)return null;Se=Se||_t.type,le.push([je,_t])}return new br(Se,Z,le)},br.prototype.evaluate=function(A){var I=this.labels,Z=this.outputs;if(I.length===1)return Z[0].evaluate(A);var le=this.input.evaluate(A);if(le<=I[0])return Z[0].evaluate(A);var Se=I.length;return le>=I[Se-1]?Z[Se-1].evaluate(A):Z[cr(I,le)].evaluate(A)},br.prototype.eachChild=function(A){A(this.input);for(var I=0,Z=this.outputs;I<Z.length;I+=1)A(Z[I])},br.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},br.prototype.serialize=function(){for(var A=["step",this.input.serialize()],I=0;I<this.labels.length;I++)I>0&&A.push(this.labels[I]),A.push(this.outputs[I].serialize());return A};var dr=Object.freeze({__proto__:null,number:Yn,color:function(A,I,Z){return new hn(Yn(A.r,I.r,Z),Yn(A.g,I.g,Z),Yn(A.b,I.b,Z),Yn(A.a,I.a,Z))},array:function(A,I,Z){return A.map(function(le,Se){return Yn(le,I[Se],Z)})}}),Sr=.95047,Gr=1,ai=1.08883,ni=4/29,ci=6/29,Kr=3*ci*ci,bi=ci*ci*ci,qa=Math.PI/180,ha=180/Math.PI;function to(A){return A>bi?Math.pow(A,.3333333333333333):A/Kr+ni}function Hs(A){return A>ci?A*A*A:Kr*(A-ni)}function Fo(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,.4166666666666667)-.055)}function ps(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function qs(A){var I=ps(A.r),Z=ps(A.g),le=ps(A.b),Se=to((.4124564*I+.3575761*Z+.1804375*le)/Sr),Pe=to((.2126729*I+.7151522*Z+.072175*le)/Gr);return{l:116*Pe-16,a:500*(Se-Pe),b:200*(Pe-to((.0193339*I+.119192*Z+.9503041*le)/ai)),alpha:A.a}}function Ga(A){var I=(A.l+16)/116,Z=isNaN(A.a)?I:I+A.a/500,le=isNaN(A.b)?I:I-A.b/200;return I=Gr*Hs(I),Z=Sr*Hs(Z),le=ai*Hs(le),new hn(Fo(3.2404542*Z-1.5371385*I-.4985314*le),Fo(-.969266*Z+1.8760108*I+.041556*le),Fo(.0556434*Z-.2040259*I+1.0572252*le),A.alpha)}function rl(A,I,Z){var le=I-A;return A+Z*(le>180||le<-180?le-360*Math.round(le/360):le)}var Bo={forward:qs,reverse:Ga,interpolate:function(A,I,Z){return{l:Yn(A.l,I.l,Z),a:Yn(A.a,I.a,Z),b:Yn(A.b,I.b,Z),alpha:Yn(A.alpha,I.alpha,Z)}}},No={forward:function(A){var I=qs(A),Z=I.l,le=I.a,Se=I.b,Pe=Math.atan2(Se,le)*ha;return{h:Pe<0?Pe+360:Pe,c:Math.sqrt(le*le+Se*Se),l:Z,alpha:A.a}},reverse:function(A){var I=A.h*qa,Z=A.c;return Ga({l:A.l,a:Math.cos(I)*Z,b:Math.sin(I)*Z,alpha:A.alpha})},interpolate:function(A,I,Z){return{h:rl(A.h,I.h,Z),c:Yn(A.c,I.c,Z),l:Yn(A.l,I.l,Z),alpha:Yn(A.alpha,I.alpha,Z)}}},Za=Object.freeze({__proto__:null,lab:Bo,hcl:No}),Si=function(A,I,Z,le,Se){this.type=A,this.operator=I,this.interpolation=Z,this.input=le,this.labels=[],this.outputs=[];for(var Pe=0,je=Se;Pe<je.length;Pe+=1){var Ke=je[Pe],st=Ke[0],yt=Ke[1];this.labels.push(st),this.outputs.push(yt)}};function ds(A,I,Z,le){var Se=le-Z,Pe=A-Z;return Se===0?0:I===1?Pe/Se:(Math.pow(I,Pe)-1)/(Math.pow(I,Se)-1)}Si.interpolationFactor=function(A,I,Z,le){var Se=0;if(A.name==="exponential")Se=ds(I,A.base,Z,le);else if(A.name==="linear")Se=ds(I,1,Z,le);else if(A.name==="cubic-bezier"){var Pe=A.controlPoints;Se=new d(Pe[0],Pe[1],Pe[2],Pe[3]).solve(ds(I,1,Z,le))}return Se},Si.parse=function(A,I){var Z=A[0],le=A[1],Se=A[2],Pe=A.slice(3);if(!Array.isArray(le)||le.length===0)return I.error("Expected an interpolation type expression.",1);if(le[0]==="linear")le={name:"linear"};else if(le[0]==="exponential"){var je=le[1];if(typeof je!="number")return I.error("Exponential interpolation requires a numeric base.",1,1);le={name:"exponential",base:je}}else{if(le[0]!=="cubic-bezier")return I.error("Unknown interpolation type "+String(le[0]),1,0);var Ke=le.slice(1);if(Ke.length!==4||Ke.some(function(kn){return typeof kn!="number"||kn<0||kn>1}))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);le={name:"cubic-bezier",controlPoints:Ke}}if(A.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(!(Se=I.parse(Se,2,ct)))return null;var st=[],yt=null;Z==="interpolate-hcl"||Z==="interpolate-lab"?yt=It:I.expectedType&&I.expectedType.kind!=="value"&&(yt=I.expectedType);for(var _t=0;_t<Pe.length;_t+=2){var Ot=Pe[_t],Bt=Pe[_t+1],zt=_t+3,en=_t+4;if(typeof Ot!="number")return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',zt);if(st.length&&st[st.length-1][0]>=Ot)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',zt);var rn=I.parse(Bt,en,yt);if(!rn)return null;yt=yt||rn.type,st.push([Ot,rn])}return yt.kind==="number"||yt.kind==="color"||yt.kind==="array"&&yt.itemType.kind==="number"&&typeof yt.N=="number"?new Si(yt,Z,le,Se,st):I.error("Type "+gn(yt)+" is not interpolatable.")},Si.prototype.evaluate=function(A){var I=this.labels,Z=this.outputs;if(I.length===1)return Z[0].evaluate(A);var le=this.input.evaluate(A);if(le<=I[0])return Z[0].evaluate(A);var Se=I.length;if(le>=I[Se-1])return Z[Se-1].evaluate(A);var Pe=cr(I,le),je=I[Pe],Ke=I[Pe+1],st=Si.interpolationFactor(this.interpolation,le,je,Ke),yt=Z[Pe].evaluate(A),_t=Z[Pe+1].evaluate(A);return this.operator==="interpolate"?dr[this.type.kind.toLowerCase()](yt,_t,st):this.operator==="interpolate-hcl"?No.reverse(No.interpolate(No.forward(yt),No.forward(_t),st)):Bo.reverse(Bo.interpolate(Bo.forward(yt),Bo.forward(_t),st))},Si.prototype.eachChild=function(A){A(this.input);for(var I=0,Z=this.outputs;I<Z.length;I+=1)A(Z[I])},Si.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Si.prototype.serialize=function(){var A;A=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var I=[this.operator,A,this.input.serialize()],Z=0;Z<this.labels.length;Z++)I.push(this.labels[Z],this.outputs[Z].serialize());return I};var Vr=function(A,I){this.type=A,this.args=I};Vr.parse=function(A,I){if(A.length<2)return I.error("Expectected at least one argument.");var Z=null,le=I.expectedType;le&&le.kind!=="value"&&(Z=le);for(var Se=[],Pe=0,je=A.slice(1);Pe<je.length;Pe+=1){var Ke=je[Pe],st=I.parse(Ke,1+Se.length,Z,void 0,{typeAnnotation:"omit"});if(!st)return null;Z=Z||st.type,Se.push(st)}var yt=le&&Se.some(function(_t){return cn(le,_t.type)});return new Vr(yt?Nt:Z,Se)},Vr.prototype.evaluate=function(A){for(var I,Z=null,le=0,Se=0,Pe=this.args;Se<Pe.length&&(le++,(Z=Pe[Se].evaluate(A))&&Z instanceof pn&&!Z.available&&(I||(I=Z.name),Z=null,le===this.args.length&&(Z=I)),Z===null);Se+=1);return Z},Vr.prototype.eachChild=function(A){this.args.forEach(A)},Vr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Vr.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(I){A.push(I.serialize())}),A};var Ya=function(A,I){this.type=I.type,this.bindings=[].concat(A),this.result=I};Ya.prototype.evaluate=function(A){return this.result.evaluate(A)},Ya.prototype.eachChild=function(A){for(var I=0,Z=this.bindings;I<Z.length;I+=1)A(Z[I][1]);A(this.result)},Ya.parse=function(A,I){if(A.length<4)return I.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var Z=[],le=1;le<A.length-1;le+=2){var Se=A[le];if(typeof Se!="string")return I.error("Expected string, but found "+typeof Se+" instead.",le);if(/[^a-zA-Z0-9_]/.test(Se))return I.error("Variable names must contain only alphanumeric characters or '_'.",le);var Pe=I.parse(A[le+1],le+1);if(!Pe)return null;Z.push([Se,Pe])}var je=I.parse(A[A.length-1],A.length-1,I.expectedType,Z);return je?new Ya(Z,je):null},Ya.prototype.outputDefined=function(){return this.result.outputDefined()},Ya.prototype.serialize=function(){for(var A=["let"],I=0,Z=this.bindings;I<Z.length;I+=1){var le=Z[I],Se=le[0],Pe=le[1];A.push(Se,Pe.serialize())}return A.push(this.result.serialize()),A};var ba=function(A,I,Z){this.type=A,this.index=I,this.input=Z};ba.parse=function(A,I){if(A.length!==3)return I.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Z=I.parse(A[1],1,ct),le=I.parse(A[2],2,Xt(I.expectedType||Nt));if(!Z||!le)return null;var Se=le.type;return new ba(Se.itemType,Z,le)},ba.prototype.evaluate=function(A){var I=this.index.evaluate(A),Z=this.input.evaluate(A);if(I<0)throw new Gn("Array index out of bounds: "+I+" < 0.");if(I>=Z.length)throw new Gn("Array index out of bounds: "+I+" > "+(Z.length-1)+".");if(I!==Math.floor(I))throw new Gn("Array index must be an integer, but found "+I+" instead.");return Z[I]},ba.prototype.eachChild=function(A){A(this.index),A(this.input)},ba.prototype.outputDefined=function(){return!1},ba.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var no=function(A,I){this.type=bt,this.needle=A,this.haystack=I};no.parse=function(A,I){if(A.length!==3)return I.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Z=I.parse(A[1],1,Nt),le=I.parse(A[2],2,Nt);return Z&&le?qt(Z.type,[bt,ft,ct,wt,Nt])?new no(Z,le):I.error("Expected first argument to be of type boolean, string, number or null, but found "+gn(Z.type)+" instead"):null},no.prototype.evaluate=function(A){var I=this.needle.evaluate(A),Z=this.haystack.evaluate(A);if(!Z)return!1;if(!nn(I,["boolean","string","number","null"]))throw new Gn("Expected first argument to be of type boolean, string, number or null, but found "+gn(Qn(I))+" instead.");if(!nn(Z,["string","array"]))throw new Gn("Expected second argument to be of type array or string, but found "+gn(Qn(Z))+" instead.");return Z.indexOf(I)>=0},no.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},no.prototype.outputDefined=function(){return!0},no.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ia=function(A,I,Z){this.type=ct,this.needle=A,this.haystack=I,this.fromIndex=Z};Ia.parse=function(A,I){if(A.length<=2||A.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Z=I.parse(A[1],1,Nt),le=I.parse(A[2],2,Nt);if(!Z||!le)return null;if(!qt(Z.type,[bt,ft,ct,wt,Nt]))return I.error("Expected first argument to be of type boolean, string, number or null, but found "+gn(Z.type)+" instead");if(A.length===4){var Se=I.parse(A[3],3,ct);return Se?new Ia(Z,le,Se):null}return new Ia(Z,le)},Ia.prototype.evaluate=function(A){var I=this.needle.evaluate(A),Z=this.haystack.evaluate(A);if(!nn(I,["boolean","string","number","null"]))throw new Gn("Expected first argument to be of type boolean, string, number or null, but found "+gn(Qn(I))+" instead.");if(!nn(Z,["string","array"]))throw new Gn("Expected second argument to be of type array or string, but found "+gn(Qn(Z))+" instead.");if(this.fromIndex){var le=this.fromIndex.evaluate(A);return Z.indexOf(I,le)}return Z.indexOf(I)},Ia.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},Ia.prototype.outputDefined=function(){return!1},Ia.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var yo=function(A,I,Z,le,Se,Pe){this.inputType=A,this.type=I,this.input=Z,this.cases=le,this.outputs=Se,this.otherwise=Pe};yo.parse=function(A,I){if(A.length<5)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return I.error("Expected an even number of arguments.");var Z,le;I.expectedType&&I.expectedType.kind!=="value"&&(le=I.expectedType);for(var Se={},Pe=[],je=2;je<A.length-1;je+=2){var Ke=A[je],st=A[je+1];Array.isArray(Ke)||(Ke=[Ke]);var yt=I.concat(je);if(Ke.length===0)return yt.error("Expected at least one branch label.");for(var _t=0,Ot=Ke;_t<Ot.length;_t+=1){var Bt=Ot[_t];if(typeof Bt!="number"&&typeof Bt!="string")return yt.error("Branch labels must be numbers or strings.");if(typeof Bt=="number"&&Math.abs(Bt)>Number.MAX_SAFE_INTEGER)return yt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Bt=="number"&&Math.floor(Bt)!==Bt)return yt.error("Numeric branch labels must be integer values.");if(Z){if(yt.checkSubtype(Z,Qn(Bt)))return null}else Z=Qn(Bt);if(Se[String(Bt)]!==void 0)return yt.error("Branch labels must be unique.");Se[String(Bt)]=Pe.length}var zt=I.parse(st,je,le);if(!zt)return null;le=le||zt.type,Pe.push(zt)}var en=I.parse(A[1],1,Nt);if(!en)return null;var rn=I.parse(A[A.length-1],A.length-1,le);return rn?en.type.kind!=="value"&&I.concat(1).checkSubtype(Z,en.type)?null:new yo(Z,le,en,Se,Pe,rn):null},yo.prototype.evaluate=function(A){var I=this.input.evaluate(A);return(Qn(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(A)},yo.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},yo.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},yo.prototype.serialize=function(){for(var A=this,I=["match",this.input.serialize()],Z=[],le={},Se=0,Pe=Object.keys(this.cases).sort();Se<Pe.length;Se+=1){var je=Pe[Se];(Ot=le[this.cases[je]])===void 0?(le[this.cases[je]]=Z.length,Z.push([this.cases[je],[je]])):Z[Ot][1].push(je)}for(var Ke=function(zt){return A.inputType.kind==="number"?Number(zt):zt},st=0,yt=Z;st<yt.length;st+=1){var _t=yt[st],Ot=_t[0],Bt=_t[1];Bt.length===1?I.push(Ke(Bt[0])):I.push(Bt.map(Ke)),I.push(this.outputs[outputIndex$1].serialize())}return I.push(this.otherwise.serialize()),I};var ro=function(A,I,Z){this.type=A,this.branches=I,this.otherwise=Z};ro.parse=function(A,I){if(A.length<4)return I.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return I.error("Expected an odd number of arguments.");var Z;I.expectedType&&I.expectedType.kind!=="value"&&(Z=I.expectedType);for(var le=[],Se=1;Se<A.length-1;Se+=2){var Pe=I.parse(A[Se],Se,bt);if(!Pe)return null;var je=I.parse(A[Se+1],Se+1,Z);if(!je)return null;le.push([Pe,je]),Z=Z||je.type}var Ke=I.parse(A[A.length-1],A.length-1,Z);return Ke?new ro(Z,le,Ke):null},ro.prototype.evaluate=function(A){for(var I=0,Z=this.branches;I<Z.length;I+=1){var le=Z[I],Se=le[0],Pe=le[1];if(Se.evaluate(A))return Pe.evaluate(A)}return this.otherwise.evaluate(A)},ro.prototype.eachChild=function(A){for(var I=0,Z=this.branches;I<Z.length;I+=1){var le=Z[I],Se=le[0],Pe=le[1];A(Se),A(Pe)}A(this.otherwise)},ro.prototype.outputDefined=function(){return this.branches.every(function(A){return A[0],A[1].outputDefined()})&&this.otherwise.outputDefined()},ro.prototype.serialize=function(){var A=["case"];return this.eachChild(function(I){A.push(I.serialize())}),A};var io=function(A,I,Z,le){this.type=A,this.input=I,this.beginIndex=Z,this.endIndex=le};function Ps(A,I){return A==="=="||A==="!="?I.kind==="boolean"||I.kind==="string"||I.kind==="number"||I.kind==="null"||I.kind==="value":I.kind==="string"||I.kind==="number"||I.kind==="value"}function il(A,I,Z,le){return le.compare(I,Z)===0}function xo(A,I,Z){var le=A!=="=="&&A!=="!=";return function(){function Se(Pe,je,Ke){this.type=bt,this.lhs=Pe,this.rhs=je,this.collator=Ke,this.hasUntypedArgument=Pe.type.kind==="value"||je.type.kind==="value"}return Se.parse=function(Pe,je){if(Pe.length!==3&&Pe.length!==4)return je.error("Expected two or three arguments.");var Ke=Pe[0],st=je.parse(Pe[1],1,Nt);if(!st)return null;if(!Ps(Ke,st.type))return je.concat(1).error('"'+Ke+`" comparisons are not supported for type '`+gn(st.type)+"'.");var yt=je.parse(Pe[2],2,Nt);if(!yt)return null;if(!Ps(Ke,yt.type))return je.concat(2).error('"'+Ke+`" comparisons are not supported for type '`+gn(yt.type)+"'.");if(st.type.kind!==yt.type.kind&&st.type.kind!=="value"&&yt.type.kind!=="value")return je.error("Cannot compare types '"+gn(st.type)+"' and '"+gn(yt.type)+"'.");le&&(st.type.kind==="value"&&yt.type.kind!=="value"?st=new Rt(yt.type,[st]):st.type.kind!=="value"&&yt.type.kind==="value"&&(yt=new Rt(st.type,[yt])));var _t=null;if(Pe.length===4){if(st.type.kind!=="string"&&yt.type.kind!=="string"&&st.type.kind!=="value"&&yt.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(!(_t=je.parse(Pe[3],3,Qt)))return null}return new Se(st,yt,_t)},Se.prototype.evaluate=function(Pe){var je=this.lhs.evaluate(Pe),Ke=this.rhs.evaluate(Pe);if(le&&this.hasUntypedArgument){var st=Qn(je),yt=Qn(Ke);if(st.kind!==yt.kind||st.kind!=="string"&&st.kind!=="number")throw new Gn('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+st.kind+", "+yt.kind+") instead.")}if(this.collator&&!le&&this.hasUntypedArgument){var _t=Qn(je),Ot=Qn(Ke);if(_t.kind!=="string"||Ot.kind!=="string")return I(Pe,je,Ke)}return this.collator?Z(Pe,je,Ke,this.collator.evaluate(Pe)):I(Pe,je,Ke)},Se.prototype.eachChild=function(Pe){Pe(this.lhs),Pe(this.rhs),this.collator&&Pe(this.collator)},Se.prototype.outputDefined=function(){return!0},Se.prototype.serialize=function(){var Pe=[A];return this.eachChild(function(je){Pe.push(je.serialize())}),Pe},Se}()}io.parse=function(A,I){if(A.length<=2||A.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Z=I.parse(A[1],1,Nt),le=I.parse(A[2],2,ct);if(!Z||!le)return null;if(!qt(Z.type,[Xt(Nt),ft,Nt]))return I.error("Expected first argument to be of type array or string, but found "+gn(Z.type)+" instead");if(A.length===4){var Se=I.parse(A[3],3,ct);return Se?new io(Z.type,Z,le,Se):null}return new io(Z.type,Z,le)},io.prototype.evaluate=function(A){var I=this.input.evaluate(A),Z=this.beginIndex.evaluate(A);if(!nn(I,["string","array"]))throw new Gn("Expected first argument to be of type array or string, but found "+gn(Qn(I))+" instead.");if(this.endIndex){var le=this.endIndex.evaluate(A);return I.slice(Z,le)}return I.slice(Z)},io.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},io.prototype.outputDefined=function(){return!1},io.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var al=xo("==",function(A,I,Z){return I===Z},il),Gs=xo("!=",function(A,I,Z){return I!==Z},function(A,I,Z,le){return!il(0,I,Z,le)}),ol=xo("<",function(A,I,Z){return I<Z},function(A,I,Z,le){return le.compare(I,Z)<0}),Zs=xo(">",function(A,I,Z){return I>Z},function(A,I,Z,le){return le.compare(I,Z)>0}),sl=xo("<=",function(A,I,Z){return I<=Z},function(A,I,Z,le){return le.compare(I,Z)<=0}),ts=xo(">=",function(A,I,Z){return I>=Z},function(A,I,Z,le){return le.compare(I,Z)>=0}),bo=function(A,I,Z,le,Se){this.type=ft,this.number=A,this.locale=I,this.currency=Z,this.minFractionDigits=le,this.maxFractionDigits=Se};bo.parse=function(A,I){if(A.length!==3)return I.error("Expected two arguments.");var Z=I.parse(A[1],1,ct);if(!Z)return null;var le=A[2];if(typeof le!="object"||Array.isArray(le))return I.error("NumberFormat options argument must be an object.");var Se=null;if(le.locale&&!(Se=I.parse(le.locale,1,ft)))return null;var Pe=null;if(le.currency&&!(Pe=I.parse(le.currency,1,ft)))return null;var je=null;if(le["min-fraction-digits"]&&!(je=I.parse(le["min-fraction-digits"],1,ct)))return null;var Ke=null;return le["max-fraction-digits"]&&!(Ke=I.parse(le["max-fraction-digits"],1,ct))?null:new bo(Z,Se,Pe,je,Ke)},bo.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},bo.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},bo.prototype.outputDefined=function(){return!1},bo.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var jo=function(A){this.type=ct,this.input=A};jo.parse=function(A,I){if(A.length!==2)return I.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var Z=I.parse(A[1],1);return Z?Z.type.kind!=="array"&&Z.type.kind!=="string"&&Z.type.kind!=="value"?I.error("Expected argument of type string or array, but found "+gn(Z.type)+" instead."):new jo(Z):null},jo.prototype.evaluate=function(A){var I=this.input.evaluate(A);if(typeof I=="string"||Array.isArray(I))return I.length;throw new Gn("Expected value to be of type string or array, but found "+gn(Qn(I))+" instead.")},jo.prototype.eachChild=function(A){A(this.input)},jo.prototype.outputDefined=function(){return!1},jo.prototype.serialize=function(){var A=["length"];return this.eachChild(function(I){A.push(I.serialize())}),A};var ns={"==":al,"!=":Gs,">":Zs,"<":ol,">=":ts,"<=":sl,array:Rt,at:ba,boolean:Rt,case:ro,coalesce:Vr,collator:Wn,format:$t,image:an,in:no,"index-of":Ia,interpolate:Si,"interpolate-hcl":Si,"interpolate-lab":Si,length:jo,let:Ya,literal:Jn,match:yo,number:Rt,"number-format":bo,object:Rt,slice:io,step:br,string:Rt,"to-boolean":wn,"to-color":wn,"to-number":wn,"to-string":wn,var:er,within:Fn};function Os(A,I){var Z=I[0],le=I[1],Se=I[2],Pe=I[3];Z=Z.evaluate(A),le=le.evaluate(A),Se=Se.evaluate(A);var je=Pe?Pe.evaluate(A):1,Ke=Cn(Z,le,Se,je);if(Ke)throw new Gn(Ke);return new hn(Z/255*je,le/255*je,Se/255*je,je)}function Ys(A,I){return A in I}function Ws(A,I){var Z=I[A];return Z===void 0?null:Z}function Aa(A){return{type:A}}function Uo(A){return{result:"success",value:A}}function Wa(A){return{result:"error",value:A}}function ao(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function ll(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function _o(A){return!!A.expression&&A.expression.interpolated}function $r(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function Da(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function gs(A){return A}function Ma(A,I){var Z,le,Se,Pe=I.type==="color",je=A.stops&&typeof A.stops[0][0]=="object",Ke=je||A.property!==void 0,st=je||!Ke,yt=A.type||(_o(I)?"exponential":"interval");if(Pe&&((A=tt({},A)).stops&&(A.stops=A.stops.map(function(sr){return[sr[0],hn.parse(sr[1])]})),A.default?A.default=hn.parse(A.default):A.default=hn.parse(I.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!Za[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(yt==="exponential")Z=ul;else if(yt==="interval")Z=Is;else if(yt==="categorical"){Z=xl,le=Object.create(null);for(var _t=0,Ot=A.stops;_t<Ot.length;_t+=1){var Bt=Ot[_t];le[Bt[0]]=Bt[1]}Se=typeof A.stops[0][0]}else{if(yt!=="identity")throw new Error('Unknown function type "'+yt+'"');Z=cl}if(je){for(var zt={},en=[],rn=0;rn<A.stops.length;rn++){var kn=A.stops[rn],Tn=kn[0].zoom;zt[Tn]===void 0&&(zt[Tn]={zoom:Tn,type:A.type,property:A.property,default:A.default,stops:[]},en.push(Tn)),zt[Tn].stops.push([kn[0].value,kn[1]])}for(var On=[],Dn=0,jn=en;Dn<jn.length;Dn+=1){var Zn=jn[Dn];On.push([zt[Zn].zoom,Ma(zt[Zn],I)])}var $n={name:"linear"};return{kind:"composite",interpolationType:$n,interpolationFactor:Si.interpolationFactor.bind(void 0,$n),zoomStops:On.map(function(sr){return sr[0]}),evaluate:function(sr,gr){var _r=sr.zoom;return ul({stops:On,base:A.base},I,_r).evaluate(_r,gr)}}}if(st){var pr=yt==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:pr,interpolationFactor:Si.interpolationFactor.bind(void 0,pr),zoomStops:A.stops.map(function(sr){return sr[0]}),evaluate:function(sr){var gr=sr.zoom;return Z(A,I,gr,le,Se)}}}return{kind:"source",evaluate:function(sr,gr){var _r=gr&&gr.properties?gr.properties[A.property]:void 0;return _r===void 0?Vo(A.default,I.default):Z(A,I,_r,le,Se)}}}function Vo(A,I,Z){return A!==void 0?A:I!==void 0?I:Z!==void 0?Z:void 0}function xl(A,I,Z,le,Se){return Vo(typeof Z===Se?le[Z]:void 0,A.default,I.default)}function Is(A,I,Z){if($r(Z)!=="number")return Vo(A.default,I.default);var le=A.stops.length;if(le===1||Z<=A.stops[0][0])return A.stops[0][1];if(Z>=A.stops[le-1][0])return A.stops[le-1][1];var Se=cr(A.stops.map(function(Pe){return Pe[0]}),Z);return A.stops[Se][1]}function ul(A,I,Z){var le=A.base!==void 0?A.base:1;if($r(Z)!=="number")return Vo(A.default,I.default);var Se=A.stops.length;if(Se===1||Z<=A.stops[0][0])return A.stops[0][1];if(Z>=A.stops[Se-1][0])return A.stops[Se-1][1];var Pe=cr(A.stops.map(function(Ot){return Ot[0]}),Z),je=function(Ot,Bt,zt,en){var rn=en-zt,kn=Ot-zt;return rn===0?0:Bt===1?kn/rn:(Math.pow(Bt,kn)-1)/(Math.pow(Bt,rn)-1)}(Z,le,A.stops[Pe][0],A.stops[Pe+1][0]),Ke=A.stops[Pe][1],st=A.stops[Pe+1][1],yt=dr[I.type]||gs;if(A.colorSpace&&A.colorSpace!=="rgb"){var _t=Za[A.colorSpace];yt=function(Ot,Bt){return _t.reverse(_t.interpolate(_t.forward(Ot),_t.forward(Bt),je))}}return typeof Ke.evaluate=="function"?{evaluate:function(){for(var Ot=[],Bt=arguments.length;Bt--;)Ot[Bt]=arguments[Bt];var zt=Ke.evaluate.apply(void 0,Ot),en=st.evaluate.apply(void 0,Ot);if(zt!==void 0&&en!==void 0)return yt(zt,en,je)}}:yt(Ke,st,je)}function cl(A,I,Z){return I.type==="color"?Z=hn.parse(Z):I.type==="formatted"?Z=Sn.fromString(Z.toString()):I.type==="resolvedImage"?Z=pn.fromString(Z.toString()):$r(Z)===I.type||I.type==="enum"&&I.values[Z]||(Z=void 0),Vo(Z,A.default,I.default)}In.register(ns,{error:[{kind:"error"},[ft],function(A,I){var Z=I[0];throw new Gn(Z.evaluate(A))}],typeof:[ft,[Nt],function(A,I){return gn(Qn(I[0].evaluate(A)))}],"to-rgba":[Xt(ct,4),[It],function(A,I){return I[0].evaluate(A).toArray()}],rgb:[It,[ct,ct,ct],Os],rgba:[It,[ct,ct,ct,ct],Os],has:{type:bt,overloads:[[[ft],function(A,I){return Ys(I[0].evaluate(A),A.properties())}],[[ft,Dt],function(A,I){var Z=I[0],le=I[1];return Ys(Z.evaluate(A),le.evaluate(A))}]]},get:{type:Nt,overloads:[[[ft],function(A,I){return Ws(I[0].evaluate(A),A.properties())}],[[ft,Dt],function(A,I){var Z=I[0],le=I[1];return Ws(Z.evaluate(A),le.evaluate(A))}]]},"feature-state":[Nt,[ft],function(A,I){return Ws(I[0].evaluate(A),A.featureState||{})}],properties:[Dt,[],function(A){return A.properties()}],"geometry-type":[ft,[],function(A){return A.geometryType()}],id:[Nt,[],function(A){return A.id()}],zoom:[ct,[],function(A){return A.globals.zoom}],"heatmap-density":[ct,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[ct,[],function(A){return A.globals.lineProgress||0}],accumulated:[Nt,[],function(A){return A.globals.accumulated===void 0?null:A.globals.accumulated}],"+":[ct,Aa(ct),function(A,I){for(var Z=0,le=0,Se=I;le<Se.length;le+=1)Z+=Se[le].evaluate(A);return Z}],"*":[ct,Aa(ct),function(A,I){for(var Z=1,le=0,Se=I;le<Se.length;le+=1)Z*=Se[le].evaluate(A);return Z}],"-":{type:ct,overloads:[[[ct,ct],function(A,I){var Z=I[0],le=I[1];return Z.evaluate(A)-le.evaluate(A)}],[[ct],function(A,I){return-I[0].evaluate(A)}]]},"/":[ct,[ct,ct],function(A,I){var Z=I[0],le=I[1];return Z.evaluate(A)/le.evaluate(A)}],"%":[ct,[ct,ct],function(A,I){var Z=I[0],le=I[1];return Z.evaluate(A)%le.evaluate(A)}],ln2:[ct,[],function(){return Math.LN2}],pi:[ct,[],function(){return Math.PI}],e:[ct,[],function(){return Math.E}],"^":[ct,[ct,ct],function(A,I){var Z=I[0],le=I[1];return Math.pow(Z.evaluate(A),le.evaluate(A))}],sqrt:[ct,[ct],function(A,I){var Z=I[0];return Math.sqrt(Z.evaluate(A))}],log10:[ct,[ct],function(A,I){var Z=I[0];return Math.log(Z.evaluate(A))/Math.LN10}],ln:[ct,[ct],function(A,I){var Z=I[0];return Math.log(Z.evaluate(A))}],log2:[ct,[ct],function(A,I){var Z=I[0];return Math.log(Z.evaluate(A))/Math.LN2}],sin:[ct,[ct],function(A,I){var Z=I[0];return Math.sin(Z.evaluate(A))}],cos:[ct,[ct],function(A,I){var Z=I[0];return Math.cos(Z.evaluate(A))}],tan:[ct,[ct],function(A,I){var Z=I[0];return Math.tan(Z.evaluate(A))}],asin:[ct,[ct],function(A,I){var Z=I[0];return Math.asin(Z.evaluate(A))}],acos:[ct,[ct],function(A,I){var Z=I[0];return Math.acos(Z.evaluate(A))}],atan:[ct,[ct],function(A,I){var Z=I[0];return Math.atan(Z.evaluate(A))}],min:[ct,Aa(ct),function(A,I){return Math.min.apply(Math,I.map(function(Z){return Z.evaluate(A)}))}],max:[ct,Aa(ct),function(A,I){return Math.max.apply(Math,I.map(function(Z){return Z.evaluate(A)}))}],abs:[ct,[ct],function(A,I){var Z=I[0];return Math.abs(Z.evaluate(A))}],round:[ct,[ct],function(A,I){var Z=I[0].evaluate(A);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[ct,[ct],function(A,I){var Z=I[0];return Math.floor(Z.evaluate(A))}],ceil:[ct,[ct],function(A,I){var Z=I[0];return Math.ceil(Z.evaluate(A))}],"filter-==":[bt,[ft,Nt],function(A,I){var Z=I[0],le=I[1];return A.properties()[Z.value]===le.value}],"filter-id-==":[bt,[Nt],function(A,I){var Z=I[0];return A.id()===Z.value}],"filter-type-==":[bt,[ft],function(A,I){var Z=I[0];return A.geometryType()===Z.value}],"filter-<":[bt,[ft,Nt],function(A,I){var Z=I[0],le=I[1],Se=A.properties()[Z.value],Pe=le.value;return typeof Se==typeof Pe&&Se<Pe}],"filter-id-<":[bt,[Nt],function(A,I){var Z=I[0],le=A.id(),Se=Z.value;return typeof le==typeof Se&&le<Se}],"filter->":[bt,[ft,Nt],function(A,I){var Z=I[0],le=I[1],Se=A.properties()[Z.value],Pe=le.value;return typeof Se==typeof Pe&&Se>Pe}],"filter-id->":[bt,[Nt],function(A,I){var Z=I[0],le=A.id(),Se=Z.value;return typeof le==typeof Se&&le>Se}],"filter-<=":[bt,[ft,Nt],function(A,I){var Z=I[0],le=I[1],Se=A.properties()[Z.value],Pe=le.value;return typeof Se==typeof Pe&&Se<=Pe}],"filter-id-<=":[bt,[Nt],function(A,I){var Z=I[0],le=A.id(),Se=Z.value;return typeof le==typeof Se&&le<=Se}],"filter->=":[bt,[ft,Nt],function(A,I){var Z=I[0],le=I[1],Se=A.properties()[Z.value],Pe=le.value;return typeof Se==typeof Pe&&Se>=Pe}],"filter-id->=":[bt,[Nt],function(A,I){var Z=I[0],le=A.id(),Se=Z.value;return typeof le==typeof Se&&le>=Se}],"filter-has":[bt,[Nt],function(A,I){return I[0].value in A.properties()}],"filter-has-id":[bt,[],function(A){return A.id()!==null&&A.id()!==void 0}],"filter-type-in":[bt,[Xt(ft)],function(A,I){return I[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[bt,[Xt(Nt)],function(A,I){return I[0].value.indexOf(A.id())>=0}],"filter-in-small":[bt,[ft,Xt(Nt)],function(A,I){var Z=I[0];return I[1].value.indexOf(A.properties()[Z.value])>=0}],"filter-in-large":[bt,[ft,Xt(Nt)],function(A,I){var Z=I[0],le=I[1];return function(Se,Pe,je,Ke){for(;je<=Ke;){var st=je+Ke>>1;if(Pe[st]===Se)return!0;Pe[st]>Se?Ke=st-1:je=st+1}return!1}(A.properties()[Z.value],le.value,0,le.value.length-1)}],all:{type:bt,overloads:[[[bt,bt],function(A,I){var Z=I[0],le=I[1];return Z.evaluate(A)&&le.evaluate(A)}],[Aa(bt),function(A,I){for(var Z=0,le=I;Z<le.length;Z+=1)if(!le[Z].evaluate(A))return!1;return!0}]]},any:{type:bt,overloads:[[[bt,bt],function(A,I){var Z=I[0],le=I[1];return Z.evaluate(A)||le.evaluate(A)}],[Aa(bt),function(A,I){for(var Z=0,le=I;Z<le.length;Z+=1)if(le[Z].evaluate(A))return!0;return!1}]]},"!":[bt,[bt],function(A,I){return!I[0].evaluate(A)}],"is-supported-script":[bt,[ft],function(A,I){var Z=I[0],le=A.globals&&A.globals.isSupportedScript;return!le||le(Z.evaluate(A))}],upcase:[ft,[ft],function(A,I){return I[0].evaluate(A).toUpperCase()}],downcase:[ft,[ft],function(A,I){return I[0].evaluate(A).toLowerCase()}],concat:[ft,Aa(Nt),function(A,I){return I.map(function(Z){return nr(Z.evaluate(A))}).join("")}],"resolved-locale":[ft,[Qt],function(A,I){return I[0].evaluate(A).resolvedLocale()}]});var vs=function(A,I){this.expression=A,this._warningHistory={},this._evaluator=new Ln,this._defaultValue=I?function(Z){return Z.type==="color"&&Da(Z.default)?new hn(0,0,0,0):Z.type==="color"?hn.parse(Z.default)||null:Z.default===void 0?null:Z.default}(I):null,this._enumValues=I&&I.type==="enum"?I.values:null};function rs(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in ns}function ms(A,I){var Z=new tr(ns,[],I?function(Se){var Pe={color:It,string:ft,number:ct,enum:ft,boolean:bt,formatted:jt,resolvedImage:Ut};return Se.type==="array"?Xt(Pe[Se.value]||Nt,Se.length):Pe[Se.type]}(I):void 0),le=Z.parse(A,void 0,void 0,void 0,I&&I.type==="string"?{typeAnnotation:"coerce"}:void 0);return le?Uo(new vs(le,I)):Wa(Z.errors)}vs.prototype.evaluateWithoutErrorHandling=function(A,I,Z,le,Se,Pe){return this._evaluator.globals=A,this._evaluator.feature=I,this._evaluator.featureState=Z,this._evaluator.canonical=le,this._evaluator.availableImages=Se||null,this._evaluator.formattedSection=Pe,this.expression.evaluate(this._evaluator)},vs.prototype.evaluate=function(A,I,Z,le,Se,Pe){this._evaluator.globals=A,this._evaluator.feature=I||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=le,this._evaluator.availableImages=Se||null,this._evaluator.formattedSection=Pe||null;try{var je=this.expression.evaluate(this._evaluator);if(je==null||typeof je=="number"&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new Gn("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ke){return JSON.stringify(Ke)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch(Ke){return this._warningHistory[Ke.message]||(this._warningHistory[Ke.message]=!0,typeof console<"u"&&console.warn(Ke.message)),this._defaultValue}};var wo=function(A,I){this.kind=A,this._styleExpression=I,this.isStateDependent=A!=="constant"&&!qn(I.expression)};wo.prototype.evaluateWithoutErrorHandling=function(A,I,Z,le,Se,Pe){return this._styleExpression.evaluateWithoutErrorHandling(A,I,Z,le,Se,Pe)},wo.prototype.evaluate=function(A,I,Z,le,Se,Pe){return this._styleExpression.evaluate(A,I,Z,le,Se,Pe)};var oo=function(A,I,Z,le){this.kind=A,this.zoomStops=Z,this._styleExpression=I,this.isStateDependent=A!=="camera"&&!qn(I.expression),this.interpolationType=le};function To(A,I){if((A=ms(A,I)).result==="error")return A;var Z=A.value.expression,le=Kn(Z);if(!le&&!ao(I))return Wa([new gt("","data expressions not supported")]);var Se=rr(Z,["zoom"]);if(!Se&&!ll(I))return Wa([new gt("","zoom expressions not supported")]);var Pe=Ds(Z);if(!Pe&&!Se)return Wa([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Pe instanceof gt)return Wa([Pe]);if(Pe instanceof Si&&!_o(I))return Wa([new gt("",'"interpolate" expressions cannot be used with this property')]);if(!Pe)return Uo(new wo(le?"constant":"source",A.value));var je=Pe instanceof Si?Pe.interpolation:void 0;return Uo(new oo(le?"camera":"composite",A.value,Pe.labels,je))}oo.prototype.evaluateWithoutErrorHandling=function(A,I,Z,le,Se,Pe){return this._styleExpression.evaluateWithoutErrorHandling(A,I,Z,le,Se,Pe)},oo.prototype.evaluate=function(A,I,Z,le,Se,Pe){return this._styleExpression.evaluate(A,I,Z,le,Se,Pe)},oo.prototype.interpolationFactor=function(A,I,Z){return this.interpolationType?Si.interpolationFactor(this.interpolationType,A,I,Z):0};var so=function(A,I){this._parameters=A,this._specification=I,tt(this,Ma(this._parameters,this._specification))};function Ds(A){var I=null;if(A instanceof Ya)I=Ds(A.result);else if(A instanceof Vr)for(var Z=0,le=A.args;Z<le.length;Z+=1){var Se=le[Z];if(I=Ds(Se))break}else(A instanceof br||A instanceof Si)&&A.input instanceof In&&A.input.name==="zoom"&&(I=A);return I instanceof gt||A.eachChild(function(Pe){var je=Ds(Pe);je instanceof gt?I=je:!I&&je?I=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):I&&je&&I!==je&&(I=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),I}function za(A){var I=A.key,Z=A.value,le=A.valueSpec||{},Se=A.objectElementValidators||{},Pe=A.style,je=A.styleSpec,Ke=[],st=$r(Z);if(st!=="object")return[new Be(I,Z,"object expected, "+st+" found")];for(var yt in Z){var _t=yt.split(".")[0],Ot=le[_t]||le["*"],Bt=void 0;if(Se[_t])Bt=Se[_t];else if(le[_t])Bt=di;else if(Se["*"])Bt=Se["*"];else{if(!le["*"]){Ke.push(new Be(I,Z[yt],'unknown property "'+yt+'"'));continue}Bt=di}Ke=Ke.concat(Bt({key:(I&&I+".")+yt,value:Z[yt],valueSpec:Ot,style:Pe,styleSpec:je,object:Z,objectKey:yt},Z))}for(var zt in le)Se[zt]||le[zt].required&&le[zt].default===void 0&&Z[zt]===void 0&&Ke.push(new Be(I,Z,'missing required property "'+zt+'"'));return Ke}function fl(A){var I=A.value,Z=A.valueSpec,le=A.style,Se=A.styleSpec,Pe=A.key,je=A.arrayElementValidator||di;if($r(I)!=="array")return[new Be(Pe,I,"array expected, "+$r(I)+" found")];if(Z.length&&I.length!==Z.length)return[new Be(Pe,I,"array length "+Z.length+" expected, length "+I.length+" found")];if(Z["min-length"]&&I.length<Z["min-length"])return[new Be(Pe,I,"array length at least "+Z["min-length"]+" expected, length "+I.length+" found")];var Ke={type:Z.value,values:Z.values};Se.$version<7&&(Ke.function=Z.function),$r(Z.value)==="object"&&(Ke=Z.value);for(var st=[],yt=0;yt<I.length;yt++)st=st.concat(je({array:I,arrayIndex:yt,value:I[yt],valueSpec:Ke,style:le,styleSpec:Se,key:Pe+"["+yt+"]"}));return st}function hl(A){var I=A.key,Z=A.value,le=A.valueSpec,Se=$r(Z);return Se==="number"&&Z!=Z&&(Se="NaN"),Se!=="number"?[new Be(I,Z,"number expected, "+Se+" found")]:"minimum"in le&&Z<le.minimum?[new Be(I,Z,Z+" is less than the minimum value "+le.minimum)]:"maximum"in le&&Z>le.maximum?[new Be(I,Z,Z+" is greater than the maximum value "+le.maximum)]:[]}function zs(A){var I,Z,le,Se=A.valueSpec,Pe=dt(A.value.type),je={},Ke=Pe!=="categorical"&&A.value.property===void 0,st=!Ke,yt=$r(A.value.stops)==="array"&&$r(A.value.stops[0])==="array"&&$r(A.value.stops[0][0])==="object",_t=za({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(zt){if(Pe==="identity")return[new Be(zt.key,zt.value,'identity function may not have a "stops" property')];var en=[],rn=zt.value;return en=en.concat(fl({key:zt.key,value:rn,valueSpec:zt.valueSpec,style:zt.style,styleSpec:zt.styleSpec,arrayElementValidator:Ot})),$r(rn)==="array"&&rn.length===0&&en.push(new Be(zt.key,rn,"array must have at least one stop")),en},default:function(zt){return di({key:zt.key,value:zt.value,valueSpec:Se,style:zt.style,styleSpec:zt.styleSpec})}}});return Pe==="identity"&&Ke&&_t.push(new Be(A.key,A.value,'missing required property "property"')),Pe==="identity"||A.value.stops||_t.push(new Be(A.key,A.value,'missing required property "stops"')),Pe==="exponential"&&A.valueSpec.expression&&!_o(A.valueSpec)&&_t.push(new Be(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(st&&!ao(A.valueSpec)?_t.push(new Be(A.key,A.value,"property functions not supported")):Ke&&!ll(A.valueSpec)&&_t.push(new Be(A.key,A.value,"zoom functions not supported"))),Pe!=="categorical"&&!yt||A.value.property!==void 0||_t.push(new Be(A.key,A.value,'"property" property is required')),_t;function Ot(zt){var en=[],rn=zt.value,kn=zt.key;if($r(rn)!=="array")return[new Be(kn,rn,"array expected, "+$r(rn)+" found")];if(rn.length!==2)return[new Be(kn,rn,"array length 2 expected, length "+rn.length+" found")];if(yt){if($r(rn[0])!=="object")return[new Be(kn,rn,"object expected, "+$r(rn[0])+" found")];if(rn[0].zoom===void 0)return[new Be(kn,rn,"object stop key must have zoom")];if(rn[0].value===void 0)return[new Be(kn,rn,"object stop key must have value")];if(le&&le>dt(rn[0].zoom))return[new Be(kn,rn[0].zoom,"stop zoom values must appear in ascending order")];dt(rn[0].zoom)!==le&&(le=dt(rn[0].zoom),Z=void 0,je={}),en=en.concat(za({key:kn+"[0]",value:rn[0],valueSpec:{zoom:{}},style:zt.style,styleSpec:zt.styleSpec,objectElementValidators:{zoom:hl,value:Bt}}))}else en=en.concat(Bt({key:kn+"[0]",value:rn[0],valueSpec:{},style:zt.style,styleSpec:zt.styleSpec},rn));return rs(ht(rn[1]))?en.concat([new Be(kn+"[1]",rn[1],"expressions are not allowed in function stops.")]):en.concat(di({key:kn+"[1]",value:rn[1],valueSpec:Se,style:zt.style,styleSpec:zt.styleSpec}))}function Bt(zt,en){var rn=$r(zt.value),kn=dt(zt.value),Tn=zt.value!==null?zt.value:en;if(I){if(rn!==I)return[new Be(zt.key,Tn,rn+" stop domain type must match previous stop domain type "+I)]}else I=rn;if(rn!=="number"&&rn!=="string"&&rn!=="boolean")return[new Be(zt.key,Tn,"stop domain value must be a number, string, or boolean")];if(rn!=="number"&&Pe!=="categorical"){var On="number expected, "+rn+" found";return ao(Se)&&Pe===void 0&&(On+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Be(zt.key,Tn,On)]}return Pe!=="categorical"||rn!=="number"||isFinite(kn)&&Math.floor(kn)===kn?Pe!=="categorical"&&rn==="number"&&Z!==void 0&&kn<Z?[new Be(zt.key,Tn,"stop domain values must appear in ascending order")]:(Z=kn,Pe==="categorical"&&kn in je?[new Be(zt.key,Tn,"stop domain values must be unique")]:(je[kn]=!0,[])):[new Be(zt.key,Tn,"integer expected, found "+kn)]}}function ko(A){var I=(A.expressionContext==="property"?To:ms)(ht(A.value),A.valueSpec);if(I.result==="error")return I.value.map(function(le){return new Be(""+A.key+le.key,A.value,le.message)});var Z=I.value.expression||I.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!Z.outputDefined())return[new Be(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!qn(Z))return[new Be(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!qn(Z))return[new Be(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!rr(Z,["zoom","feature-state"]))return[new Be(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!Kn(Z))return[new Be(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Rs(A){var I=A.key,Z=A.value,le=A.valueSpec,Se=[];return Array.isArray(le.values)?le.values.indexOf(dt(Z))===-1&&Se.push(new Be(I,Z,"expected one of ["+le.values.join(", ")+"], "+JSON.stringify(Z)+" found")):Object.keys(le.values).indexOf(dt(Z))===-1&&Se.push(new Be(I,Z,"expected one of ["+Object.keys(le.values).join(", ")+"], "+JSON.stringify(Z)+" found")),Se}function Ho(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var I=0,Z=A.slice(1);I<Z.length;I+=1){var le=Z[I];if(!Ho(le)&&typeof le!="boolean")return!1}return!0;default:return!0}}so.deserialize=function(A){return new so(A._parameters,A._specification)},so.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var Xs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function is(A){if(A==null)return{filter:function(){return!0},needGeometry:!1};Ho(A)||(A=as(A));var I=ms(A,Xs);if(I.result==="error")throw new Error(I.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,le,Se){return I.value.evaluate(Z,le,{},Se)},needGeometry:ys(A)}}function qo(A,I){return A<I?-1:A>I?1:0}function ys(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var I=1;I<A.length;I++)if(ys(A[I]))return!0;return!1}function as(A){if(!A)return!0;var I,Z=A[0];return A.length<=1?Z!=="any":Z==="=="?Qr(A[1],A[2],"=="):Z==="!="?Ni(Qr(A[1],A[2],"==")):Z==="<"||Z===">"||Z==="<="||Z===">="?Qr(A[1],A[2],Z):Z==="any"?(I=A.slice(1),["any"].concat(I.map(as))):Z==="all"?["all"].concat(A.slice(1).map(as)):Z==="none"?["all"].concat(A.slice(1).map(as).map(Ni)):Z==="in"?Ao(A[1],A.slice(2)):Z==="!in"?Ni(Ao(A[1],A.slice(2))):Z==="has"?lo(A[1]):Z==="!has"?Ni(lo(A[1])):Z!=="within"||A}function Qr(A,I,Z){switch(A){case"$type":return["filter-type-"+Z,I];case"$id":return["filter-id-"+Z,I];default:return["filter-"+Z,A,I]}}function Ao(A,I){if(I.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",I]];case"$id":return["filter-id-in",["literal",I]];default:return I.length>200&&!I.some(function(Z){return typeof Z!=typeof I[0]})?["filter-in-large",A,["literal",I.sort(qo)]]:["filter-in-small",A,["literal",I]]}}function lo(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Ni(A){return["!",A]}function Nr(A){return Ho(ht(A.value))?ko(tt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Hr(A)}function Hr(A){var I=A.value,Z=A.key;if($r(I)!=="array")return[new Be(Z,I,"array expected, "+$r(I)+" found")];var le,Se=A.styleSpec,Pe=[];if(I.length<1)return[new Be(Z,I,"filter array must have at least 1 element")];switch(Pe=Pe.concat(Rs({key:Z+"[0]",value:I[0],valueSpec:Se.filter_operator,style:A.style,styleSpec:A.styleSpec})),dt(I[0])){case"<":case"<=":case">":case">=":I.length>=2&&dt(I[1])==="$type"&&Pe.push(new Be(Z,I,'"$type" cannot be use with operator "'+I[0]+'"'));case"==":case"!=":I.length!==3&&Pe.push(new Be(Z,I,'filter array for operator "'+I[0]+'" must have 3 elements'));case"in":case"!in":I.length>=2&&(le=$r(I[1]))!=="string"&&Pe.push(new Be(Z+"[1]",I[1],"string expected, "+le+" found"));for(var je=2;je<I.length;je++)le=$r(I[je]),dt(I[1])==="$type"?Pe=Pe.concat(Rs({key:Z+"["+je+"]",value:I[je],valueSpec:Se.geometry_type,style:A.style,styleSpec:A.styleSpec})):le!=="string"&&le!=="number"&&le!=="boolean"&&Pe.push(new Be(Z+"["+je+"]",I[je],"string, number, or boolean expected, "+le+" found"));break;case"any":case"all":case"none":for(var Ke=1;Ke<I.length;Ke++)Pe=Pe.concat(Hr({key:Z+"["+Ke+"]",value:I[Ke],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":le=$r(I[1]),I.length!==2?Pe.push(new Be(Z,I,'filter array for "'+I[0]+'" operator must have 2 elements')):le!=="string"&&Pe.push(new Be(Z+"[1]",I[1],"string expected, "+le+" found"));break;case"within":le=$r(I[1]),I.length!==2?Pe.push(new Be(Z,I,'filter array for "'+I[0]+'" operator must have 2 elements')):le!=="object"&&Pe.push(new Be(Z+"[1]",I[1],"object expected, "+le+" found"))}return Pe}function Mo(A,I){var Z=A.key,le=A.style,Se=A.styleSpec,Pe=A.value,je=A.objectKey,Ke=Se[I+"_"+A.layerType];if(!Ke)return[];var st=je.match(/^(.*)-transition$/);if(I==="paint"&&st&&Ke[st[1]]&&Ke[st[1]].transition)return di({key:Z,value:Pe,valueSpec:Se.transition,style:le,styleSpec:Se});var yt,_t=A.valueSpec||Ke[je];if(!_t)return[new Be(Z,Pe,'unknown property "'+je+'"')];if($r(Pe)==="string"&&ao(_t)&&!_t.tokens&&(yt=/^{([^}]+)}$/.exec(Pe)))return[new Be(Z,Pe,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(yt[1])+" }`.")];var Ot=[];return A.layerType==="symbol"&&(je==="text-field"&&le&&!le.glyphs&&Ot.push(new Be(Z,Pe,'use of "text-field" requires a style "glyphs" property')),je==="text-font"&&Da(ht(Pe))&&dt(Pe.type)==="identity"&&Ot.push(new Be(Z,Pe,'"text-font" does not support identity functions'))),Ot.concat(di({key:A.key,value:Pe,valueSpec:_t,style:le,styleSpec:Se,expressionContext:"property",propertyType:I,propertyKey:je}))}function uo(A){return Mo(A,"paint")}function Js(A){return Mo(A,"layout")}function xs(A){var I=[],Z=A.value,le=A.key,Se=A.style,Pe=A.styleSpec;Z.type||Z.ref||I.push(new Be(le,Z,'either "type" or "ref" is required'));var je,Ke=dt(Z.type),st=dt(Z.ref);if(Z.id)for(var yt=dt(Z.id),_t=0;_t<A.arrayIndex;_t++){var Ot=Se.layers[_t];dt(Ot.id)===yt&&I.push(new Be(le,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+Ot.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(en){en in Z&&I.push(new Be(le,Z[en],'"'+en+'" is prohibited for ref layers'))}),Se.layers.forEach(function(en){dt(en.id)===st&&(je=en)}),je?je.ref?I.push(new Be(le,Z.ref,"ref cannot reference another ref layer")):Ke=dt(je.type):I.push(new Be(le,Z.ref,'ref layer "'+st+'" not found'));else if(Ke!=="background")if(Z.source){var Bt=Se.sources&&Se.sources[Z.source],zt=Bt&&dt(Bt.type);Bt?zt==="vector"&&Ke==="raster"?I.push(new Be(le,Z.source,'layer "'+Z.id+'" requires a raster source')):zt==="raster"&&Ke!=="raster"?I.push(new Be(le,Z.source,'layer "'+Z.id+'" requires a vector source')):zt!=="vector"||Z["source-layer"]?zt==="raster-dem"&&Ke!=="hillshade"?I.push(new Be(le,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ke!=="line"||!Z.paint||!Z.paint["line-gradient"]||zt==="geojson"&&Bt.lineMetrics||I.push(new Be(le,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):I.push(new Be(le,Z,'layer "'+Z.id+'" must specify a "source-layer"')):I.push(new Be(le,Z.source,'source "'+Z.source+'" not found'))}else I.push(new Be(le,Z,'missing required property "source"'));return I=I.concat(za({key:le,value:Z,valueSpec:Pe.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return di({key:le+".type",value:Z.type,valueSpec:Pe.layer.type,style:A.style,styleSpec:A.styleSpec,object:Z,objectKey:"type"})},filter:Nr,layout:function(en){return za({layer:Z,key:en.key,value:en.value,style:en.style,styleSpec:en.styleSpec,objectElementValidators:{"*":function(rn){return Js(tt({layerType:Ke},rn))}}})},paint:function(en){return za({layer:Z,key:en.key,value:en.value,style:en.style,styleSpec:en.styleSpec,objectElementValidators:{"*":function(rn){return uo(tt({layerType:Ke},rn))}}})}}})),I}function So(A){var I=A.value,Z=A.key,le=$r(I);return le!=="string"?[new Be(Z,I,"string expected, "+le+" found")]:[]}var bs={promoteId:function(A){var I=A.key,Z=A.value;if($r(Z)==="string")return So({key:I,value:Z});var le=[];for(var Se in Z)le.push.apply(le,So({key:I+"."+Se,value:Z[Se]}));return le}};function co(A){var I=A.value,Z=A.key,le=A.styleSpec,Se=A.style;if(!I.type)return[new Be(Z,I,'"type" is required')];var Pe,je=dt(I.type);switch(je){case"vector":case"raster":case"raster-dem":return za({key:Z,value:I,valueSpec:le["source_"+je.replace("-","_")],style:A.style,styleSpec:le,objectElementValidators:bs});case"geojson":if(Pe=za({key:Z,value:I,valueSpec:le.source_geojson,style:Se,styleSpec:le,objectElementValidators:bs}),I.cluster)for(var Ke in I.clusterProperties){var st=I.clusterProperties[Ke],yt=st[0],_t=st[1],Ot=typeof yt=="string"?[yt,["accumulated"],["get",Ke]]:yt;Pe.push.apply(Pe,ko({key:Z+"."+Ke+".map",value:_t,expressionContext:"cluster-map"})),Pe.push.apply(Pe,ko({key:Z+"."+Ke+".reduce",value:Ot,expressionContext:"cluster-reduce"}))}return Pe;case"video":return za({key:Z,value:I,valueSpec:le.source_video,style:Se,styleSpec:le});case"image":return za({key:Z,value:I,valueSpec:le.source_image,style:Se,styleSpec:le});case"canvas":return[new Be(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Rs({key:Z+".type",value:I.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Se,styleSpec:le})}}function Go(A){var I=A.value,Z=A.styleSpec,le=Z.light,Se=A.style,Pe=[],je=$r(I);if(I===void 0)return Pe;if(je!=="object")return Pe.concat([new Be("light",I,"object expected, "+je+" found")]);for(var Ke in I){var st=Ke.match(/^(.*)-transition$/);Pe=st&&le[st[1]]&&le[st[1]].transition?Pe.concat(di({key:Ke,value:I[Ke],valueSpec:Z.transition,style:Se,styleSpec:Z})):le[Ke]?Pe.concat(di({key:Ke,value:I[Ke],valueSpec:le[Ke],style:Se,styleSpec:Z})):Pe.concat([new Be(Ke,I[Ke],'unknown property "'+Ke+'"')])}return Pe}var Eo={"*":function(){return[]},array:fl,boolean:function(A){var I=A.value,Z=A.key,le=$r(I);return le!=="boolean"?[new Be(Z,I,"boolean expected, "+le+" found")]:[]},number:hl,color:function(A){var I=A.key,Z=A.value,le=$r(Z);return le!=="string"?[new Be(I,Z,"color expected, "+le+" found")]:sn(Z)===null?[new Be(I,Z,'color expected, "'+Z+'" found')]:[]},constants:nt,enum:Rs,filter:Nr,function:zs,layer:xs,object:za,source:co,light:Go,string:So,formatted:function(A){return So(A).length===0?[]:ko(A)},resolvedImage:function(A){return So(A).length===0?[]:ko(A)}};function di(A){var I=A.value,Z=A.valueSpec,le=A.styleSpec;return Z.expression&&Da(dt(I))?zs(A):Z.expression&&rs(ht(I))?ko(A):Z.type&&Eo[Z.type]?Eo[Z.type](A):za(tt({},A,{valueSpec:Z.type?le[Z.type]:Z}))}function Zo(A){var I=A.value,Z=A.key,le=So(A);return le.length||(I.indexOf("{fontstack}")===-1&&le.push(new Be(Z,I,'"glyphs" url must include a "{fontstack}" token')),I.indexOf("{range}")===-1&&le.push(new Be(Z,I,'"glyphs" url must include a "{range}" token'))),le}function Yo(A,I){I===void 0&&(I=De);var Z=[];return Z=Z.concat(di({key:"",value:A,valueSpec:I.$root,styleSpec:I,style:A,objectElementValidators:{glyphs:Zo,"*":function(){return[]}}})),A.constants&&(Z=Z.concat(nt({key:"constants",value:A.constants,style:A,styleSpec:I}))),Pi(Z)}function Pi(A){return[].concat(A).sort(function(I,Z){return I.line-Z.line})}function Ji(A){return function(){for(var I=[],Z=arguments.length;Z--;)I[Z]=arguments[Z];return Pi(A.apply(this,I))}}Yo.source=Ji(co),Yo.light=Ji(Go),Yo.layer=Ji(xs),Yo.filter=Ji(Nr),Yo.paintProperty=Ji(uo),Yo.layoutProperty=Ji(Js);var Zi=Yo,Oi=Zi.light,ra=Zi.paintProperty,Lo=Zi.layoutProperty;function Ra(A,I){var Z=!1;if(I&&I.length)for(var le=0,Se=I;le<Se.length;le+=1){var Pe=Se[le];A.fire(new at(new Error(Pe.message))),Z=!0}return Z}var ji=Sa,_a=3;function Sa(A,I,Z){var le=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var Se=new Int32Array(this.arrayBuffer);A=Se[0],I=Se[1],Z=Se[2],this.d=I+2*Z;for(var Pe=0;Pe<this.d*this.d;Pe++){var je=Se[_a+Pe],Ke=Se[_a+Pe+1];le.push(je===Ke?null:Se.subarray(je,Ke))}var st=Se[_a+le.length],yt=Se[_a+le.length+1];this.keys=Se.subarray(st,yt),this.bboxes=Se.subarray(yt),this.insert=this._insertReadonly}else{this.d=I+2*Z;for(var _t=0;_t<this.d*this.d;_t++)le.push([]);this.keys=[],this.bboxes=[]}this.n=I,this.extent=A,this.padding=Z,this.scale=I/A,this.uid=0;var Ot=Z/I*A;this.min=-Ot,this.max=A+Ot}Sa.prototype.insert=function(A,I,Z,le,Se){this._forEachCell(I,Z,le,Se,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(I),this.bboxes.push(Z),this.bboxes.push(le),this.bboxes.push(Se)},Sa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Sa.prototype._insertCell=function(A,I,Z,le,Se,Pe){this.cells[Se].push(Pe)},Sa.prototype.query=function(A,I,Z,le,Se){var Pe=this.min,je=this.max;if(A<=Pe&&I<=Pe&&je<=Z&&je<=le&&!Se)return Array.prototype.slice.call(this.keys);var Ke=[];return this._forEachCell(A,I,Z,le,this._queryCell,Ke,{},Se),Ke},Sa.prototype._queryCell=function(A,I,Z,le,Se,Pe,je,Ke){var st=this.cells[Se];if(st!==null)for(var yt=this.keys,_t=this.bboxes,Ot=0;Ot<st.length;Ot++){var Bt=st[Ot];if(je[Bt]===void 0){var zt=4*Bt;(Ke?Ke(_t[zt+0],_t[zt+1],_t[zt+2],_t[zt+3]):A<=_t[zt+2]&&I<=_t[zt+3]&&Z>=_t[zt+0]&&le>=_t[zt+1])?(je[Bt]=!0,Pe.push(yt[Bt])):je[Bt]=!1}}},Sa.prototype._forEachCell=function(A,I,Z,le,Se,Pe,je,Ke){for(var st=this._convertToCellCoord(A),yt=this._convertToCellCoord(I),_t=this._convertToCellCoord(Z),Ot=this._convertToCellCoord(le),Bt=st;Bt<=_t;Bt++)for(var zt=yt;zt<=Ot;zt++){var en=this.d*zt+Bt;if((!Ke||Ke(this._convertFromCellCoord(Bt),this._convertFromCellCoord(zt),this._convertFromCellCoord(Bt+1),this._convertFromCellCoord(zt+1)))&&Se.call(this,A,I,Z,le,en,Pe,je,Ke))return}},Sa.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},Sa.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},Sa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,I=_a+this.cells.length+1+1,Z=0,le=0;le<this.cells.length;le++)Z+=this.cells[le].length;var Se=new Int32Array(I+Z+this.keys.length+this.bboxes.length);Se[0]=this.extent,Se[1]=this.n,Se[2]=this.padding;for(var Pe=I,je=0;je<A.length;je++){var Ke=A[je];Se[_a+je]=Pe,Se.set(Ke,Pe),Pe+=Ke.length}return Se[_a+A.length]=Pe,Se.set(this.keys,Pe),Pe+=this.keys.length,Se[_a+A.length+1]=Pe,Se.set(this.bboxes,Pe),Pe+=this.bboxes.length,Se.buffer};var Fs=self.ImageData,Ea=self.ImageBitmap,Ui={};function xr(A,I,Z){Z===void 0&&(Z={}),Object.defineProperty(I,"_classRegistryKey",{value:A,writeable:!1}),Ui[A]={klass:I,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var Ki in xr("Object",Object),ji.serialize=function(A,I){var Z=A.toArrayBuffer();return I&&I.push(Z),{buffer:Z}},ji.deserialize=function(A){return new ji(A.buffer)},xr("Grid",ji),xr("Color",hn),xr("Error",Error),xr("ResolvedImage",pn),xr("StylePropertyFunction",so),xr("StyleExpression",vs,{omit:["_evaluator"]}),xr("ZoomDependentExpression",oo),xr("ZoomConstantExpression",wo),xr("CompoundExpression",In,{omit:["_evaluate"]}),ns)ns[Ki]._classRegistryKey||xr("Expression_"+Ki,ns[Ki]);function _s(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Bs(A){return Ea&&A instanceof Ea}function Wo(A,I){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(_s(A)||Bs(A))return I&&I.push(A),A;if(ArrayBuffer.isView(A)){var Z=A;return I&&I.push(Z.buffer),Z}if(A instanceof Fs)return I&&I.push(A.data.buffer),A;if(Array.isArray(A)){for(var le=[],Se=0,Pe=A;Se<Pe.length;Se+=1){var je=Pe[Se];le.push(Wo(je,I))}return le}if(typeof A=="object"){var Ke=A.constructor,st=Ke._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var yt=Ke.serialize?Ke.serialize(A,I):{};if(!Ke.serialize){for(var _t in A)if(A.hasOwnProperty(_t)&&!(Ui[st].omit.indexOf(_t)>=0)){var Ot=A[_t];yt[_t]=Ui[st].shallow.indexOf(_t)>=0?Ot:Wo(Ot,I)}A instanceof Error&&(yt.message=A.message)}if(yt.$name)throw new Error("$name property is reserved for worker serialization logic.");return st!=="Object"&&(yt.$name=st),yt}throw new Error("can't serialize object of type "+typeof A)}function Xo(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||_s(A)||Bs(A)||ArrayBuffer.isView(A)||A instanceof Fs)return A;if(Array.isArray(A))return A.map(Xo);if(typeof A=="object"){var I=A.$name||"Object",Z=Ui[I].klass;if(!Z)throw new Error("can't deserialize unregistered class "+I);if(Z.deserialize)return Z.deserialize(A);for(var le=Object.create(Z.prototype),Se=0,Pe=Object.keys(A);Se<Pe.length;Se+=1){var je=Pe[Se];if(je!=="$name"){var Ke=A[je];le[je]=Ui[I].shallow.indexOf(je)>=0?Ke:Xo(Ke)}}return le}throw new Error("can't deserialize object of type "+typeof A)}var fo=function(){this.first=!0};fo.prototype.update=function(A,I){var Z=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=I),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=Z,!0))};var vr={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function Fa(A){for(var I=0,Z=A;I<Z.length;I+=1)if(os(Z[I].charCodeAt(0)))return!0;return!1}function os(A){return!(A!==746&&A!==747&&(A<4352||!(vr["Bopomofo Extended"](A)||vr.Bopomofo(A)||vr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||vr["CJK Compatibility Ideographs"](A)||vr["CJK Compatibility"](A)||vr["CJK Radicals Supplement"](A)||vr["CJK Strokes"](A)||!(!vr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||vr["CJK Unified Ideographs Extension A"](A)||vr["CJK Unified Ideographs"](A)||vr["Enclosed CJK Letters and Months"](A)||vr["Hangul Compatibility Jamo"](A)||vr["Hangul Jamo Extended-A"](A)||vr["Hangul Jamo Extended-B"](A)||vr["Hangul Jamo"](A)||vr["Hangul Syllables"](A)||vr.Hiragana(A)||vr["Ideographic Description Characters"](A)||vr.Kanbun(A)||vr["Kangxi Radicals"](A)||vr["Katakana Phonetic Extensions"](A)||vr.Katakana(A)&&A!==12540||!(!vr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!vr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||vr["Unified Canadian Aboriginal Syllabics"](A)||vr["Unified Canadian Aboriginal Syllabics Extended"](A)||vr["Vertical Forms"](A)||vr["Yijing Hexagram Symbols"](A)||vr["Yi Syllables"](A)||vr["Yi Radicals"](A))))}function ws(A){return!(os(A)||function(I){return!!(vr["Latin-1 Supplement"](I)&&(I===167||I===169||I===174||I===177||I===188||I===189||I===190||I===215||I===247)||vr["General Punctuation"](I)&&(I===8214||I===8224||I===8225||I===8240||I===8241||I===8251||I===8252||I===8258||I===8263||I===8264||I===8265||I===8273)||vr["Letterlike Symbols"](I)||vr["Number Forms"](I)||vr["Miscellaneous Technical"](I)&&(I>=8960&&I<=8967||I>=8972&&I<=8991||I>=8996&&I<=9e3||I===9003||I>=9085&&I<=9114||I>=9150&&I<=9165||I===9167||I>=9169&&I<=9179||I>=9186&&I<=9215)||vr["Control Pictures"](I)&&I!==9251||vr["Optical Character Recognition"](I)||vr["Enclosed Alphanumerics"](I)||vr["Geometric Shapes"](I)||vr["Miscellaneous Symbols"](I)&&!(I>=9754&&I<=9759)||vr["Miscellaneous Symbols and Arrows"](I)&&(I>=11026&&I<=11055||I>=11088&&I<=11097||I>=11192&&I<=11243)||vr["CJK Symbols and Punctuation"](I)||vr.Katakana(I)||vr["Private Use Area"](I)||vr["CJK Compatibility Forms"](I)||vr["Small Form Variants"](I)||vr["Halfwidth and Fullwidth Forms"](I)||I===8734||I===8756||I===8757||I>=9984&&I<=10087||I>=10102&&I<=10131||I===65532||I===65533)}(A))}function $i(A){return vr.Arabic(A)||vr["Arabic Supplement"](A)||vr["Arabic Extended-A"](A)||vr["Arabic Presentation Forms-A"](A)||vr["Arabic Presentation Forms-B"](A)}function Ba(A){return A>=1424&&A<=2303||vr["Arabic Presentation Forms-A"](A)||vr["Arabic Presentation Forms-B"](A)}function La(A,I){return!(!I&&Ba(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||vr.Khmer(A))}function wa(A){for(var I=0,Z=A;I<Z.length;I+=1)if(Ba(Z[I].charCodeAt(0)))return!0;return!1}var Xa="deferred",ho="loading",Ii="loaded",Jo="error",ss=null,Vi="unavailable",ei=null,Ts=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(Vi=Jo),ss&&ss(A)};function pa(){Di.fire(new We("pluginStateChange",{pluginStatus:Vi,pluginURL:ei}))}var Di=new et,Ja=function(){return Vi},Ks=function(){if(Vi!==Xa||!ei)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Vi=ho,pa(),ei&&Tt({url:ei},function(A){A?Ts(A):(Vi=Ii,pa())})},_i={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Vi===Ii||_i.applyArabicShaping!=null},isLoading:function(){return Vi===ho},setState:function(A){Vi=A.pluginStatus,ei=A.pluginURL},isParsed:function(){return _i.applyArabicShaping!=null&&_i.processBidirectionalText!=null&&_i.processStyledBidirectionalText!=null},getPluginURL:function(){return ei}},Xr=function(A,I){this.zoom=A,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new fo,this.transition={})};Xr.prototype.isSupportedScript=function(A){return function(I,Z){for(var le=0,Se=I;le<Se.length;le+=1)if(!La(Se[le].charCodeAt(0),Z))return!1;return!0}(A,_i.isLoaded())},Xr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Xr.prototype.getCrossfadeParameters=function(){var A=this.zoom,I=A-Math.floor(A),Z=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*I}};var Ta=function(A,I){this.property=A,this.value=I,this.expression=function(Z,le){if(Da(Z))return new so(Z,le);if(rs(Z)){var Se=To(Z,le);if(Se.result==="error")throw new Error(Se.value.map(function(je){return je.key+": "+je.message}).join(", "));return Se.value}var Pe=Z;return typeof Z=="string"&&le.type==="color"&&(Pe=hn.parse(Z)),{kind:"constant",evaluate:function(){return Pe}}}(I===void 0?A.specification.default:I,A.specification)};Ta.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ta.prototype.possiblyEvaluate=function(A,I,Z){return this.property.possiblyEvaluate(this,A,I,Z)};var Ka=function(A){this.property=A,this.value=new Ta(A,void 0)};Ka.prototype.transitioned=function(A,I){return new Ns(this.property,this.value,I,u({},A.transition,this.transition),A.now)},Ka.prototype.untransitioned=function(){return new Ns(this.property,this.value,null,{},0)};var Na=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};Na.prototype.getValue=function(A){return _(this._values[A].value.value)},Na.prototype.setValue=function(A,I){this._values.hasOwnProperty(A)||(this._values[A]=new Ka(this._values[A].property)),this._values[A].value=new Ta(this._values[A].property,I===null?void 0:_(I))},Na.prototype.getTransition=function(A){return _(this._values[A].transition)},Na.prototype.setTransition=function(A,I){this._values.hasOwnProperty(A)||(this._values[A]=new Ka(this._values[A].property)),this._values[A].transition=_(I)||void 0},Na.prototype.serialize=function(){for(var A={},I=0,Z=Object.keys(this._values);I<Z.length;I+=1){var le=Z[I],Se=this.getValue(le);Se!==void 0&&(A[le]=Se);var Pe=this.getTransition(le);Pe!==void 0&&(A[le+"-transition"]=Pe)}return A},Na.prototype.transitioned=function(A,I){for(var Z=new Co(this._properties),le=0,Se=Object.keys(this._values);le<Se.length;le+=1){var Pe=Se[le];Z._values[Pe]=this._values[Pe].transitioned(A,I._values[Pe])}return Z},Na.prototype.untransitioned=function(){for(var A=new Co(this._properties),I=0,Z=Object.keys(this._values);I<Z.length;I+=1){var le=Z[I];A._values[le]=this._values[le].untransitioned()}return A};var Ns=function(A,I,Z,le,Se){this.property=A,this.value=I,this.begin=Se+le.delay||0,this.end=this.begin+le.duration||0,A.specification.transition&&(le.delay||le.duration)&&(this.prior=Z)};Ns.prototype.possiblyEvaluate=function(A,I,Z){var le=A.now||0,Se=this.value.possiblyEvaluate(A,I,Z),Pe=this.prior;if(Pe){if(le>this.end)return this.prior=null,Se;if(this.value.isDataDriven())return this.prior=null,Se;if(le<this.begin)return Pe.possiblyEvaluate(A,I,Z);var je=(le-this.begin)/(this.end-this.begin);return this.property.interpolate(Pe.possiblyEvaluate(A,I,Z),Se,function(Ke){if(Ke<=0)return 0;if(Ke>=1)return 1;var st=Ke*Ke,yt=st*Ke;return 4*(Ke<.5?yt:3*(Ke-st)+yt-.75)}(je))}return Se};var Co=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};Co.prototype.possiblyEvaluate=function(A,I,Z){for(var le=new Yi(this._properties),Se=0,Pe=Object.keys(this._values);Se<Pe.length;Se+=1){var je=Pe[Se];le._values[je]=this._values[je].possiblyEvaluate(A,I,Z)}return le},Co.prototype.hasTransition=function(){for(var A=0,I=Object.keys(this._values);A<I.length;A+=1){var Z=I[A];if(this._values[Z].prior)return!0}return!1};var Ko=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};Ko.prototype.getValue=function(A){return _(this._values[A].value)},Ko.prototype.setValue=function(A,I){this._values[A]=new Ta(this._values[A].property,I===null?void 0:_(I))},Ko.prototype.serialize=function(){for(var A={},I=0,Z=Object.keys(this._values);I<Z.length;I+=1){var le=Z[I],Se=this.getValue(le);Se!==void 0&&(A[le]=Se)}return A},Ko.prototype.possiblyEvaluate=function(A,I,Z){for(var le=new Yi(this._properties),Se=0,Pe=Object.keys(this._values);Se<Pe.length;Se+=1){var je=Pe[Se];le._values[je]=this._values[je].possiblyEvaluate(A,I,Z)}return le};var Ei=function(A,I,Z){this.property=A,this.value=I,this.parameters=Z};Ei.prototype.isConstant=function(){return this.value.kind==="constant"},Ei.prototype.constantOr=function(A){return this.value.kind==="constant"?this.value.value:A},Ei.prototype.evaluate=function(A,I,Z,le){return this.property.evaluate(this.value,this.parameters,A,I,Z,le)};var Yi=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};Yi.prototype.get=function(A){return this._values[A]};var Tr=function(A){this.specification=A};Tr.prototype.possiblyEvaluate=function(A,I){return A.expression.evaluate(I)},Tr.prototype.interpolate=function(A,I,Z){var le=dr[this.specification.type];return le?le(A,I,Z):A};var Ar=function(A,I){this.specification=A,this.overrides=I};Ar.prototype.possiblyEvaluate=function(A,I,Z,le){return A.expression.kind==="constant"||A.expression.kind==="camera"?new Ei(this,{kind:"constant",value:A.expression.evaluate(I,null,{},Z,le)},I):new Ei(this,A.expression,I)},Ar.prototype.interpolate=function(A,I,Z){if(A.value.kind!=="constant"||I.value.kind!=="constant")return A;if(A.value.value===void 0||I.value.value===void 0)return new Ei(this,{kind:"constant",value:void 0},A.parameters);var le=dr[this.specification.type];return le?new Ei(this,{kind:"constant",value:le(A.value.value,I.value.value,Z)},A.parameters):A},Ar.prototype.evaluate=function(A,I,Z,le,Se,Pe){return A.kind==="constant"?A.value:A.evaluate(I,Z,le,Se,Pe)};var ls=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.possiblyEvaluate=function(Z,le,Se,Pe){if(Z.value===void 0)return new Ei(this,{kind:"constant",value:void 0},le);if(Z.expression.kind==="constant"){var je=Z.expression.evaluate(le,null,{},Se,Pe),Ke=Z.property.specification.type==="resolvedImage"&&typeof je!="string"?je.name:je,st=this._calculate(Ke,Ke,Ke,le);return new Ei(this,{kind:"constant",value:st},le)}if(Z.expression.kind==="camera"){var yt=this._calculate(Z.expression.evaluate({zoom:le.zoom-1}),Z.expression.evaluate({zoom:le.zoom}),Z.expression.evaluate({zoom:le.zoom+1}),le);return new Ei(this,{kind:"constant",value:yt},le)}return new Ei(this,Z.expression,le)},I.prototype.evaluate=function(Z,le,Se,Pe,je,Ke){if(Z.kind==="source"){var st=Z.evaluate(le,Se,Pe,je,Ke);return this._calculate(st,st,st,le)}return Z.kind==="composite"?this._calculate(Z.evaluate({zoom:Math.floor(le.zoom)-1},Se,Pe),Z.evaluate({zoom:Math.floor(le.zoom)},Se,Pe),Z.evaluate({zoom:Math.floor(le.zoom)+1},Se,Pe),le):Z.value},I.prototype._calculate=function(Z,le,Se,Pe){return Pe.zoom>Pe.zoomHistory.lastIntegerZoom?{from:Z,to:le}:{from:Se,to:le}},I.prototype.interpolate=function(Z){return Z},I}(Ar),ia=function(A){this.specification=A};ia.prototype.possiblyEvaluate=function(A,I,Z,le){if(A.value!==void 0){if(A.expression.kind==="constant"){var Se=A.expression.evaluate(I,null,{},Z,le);return this._calculate(Se,Se,Se,I)}return this._calculate(A.expression.evaluate(new Xr(Math.floor(I.zoom-1),I)),A.expression.evaluate(new Xr(Math.floor(I.zoom),I)),A.expression.evaluate(new Xr(Math.floor(I.zoom+1),I)),I)}},ia.prototype._calculate=function(A,I,Z,le){return le.zoom>le.zoomHistory.lastIntegerZoom?{from:A,to:I}:{from:Z,to:I}},ia.prototype.interpolate=function(A){return A};var Po=function(A){this.specification=A};Po.prototype.possiblyEvaluate=function(A,I,Z,le){return!!A.expression.evaluate(I,null,{},Z,le)},Po.prototype.interpolate=function(){return!1};var Wi=function(A){for(var I in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var Z=A[I];Z.specification.overridable&&this.overridableProperties.push(I);var le=this.defaultPropertyValues[I]=new Ta(Z,void 0),Se=this.defaultTransitionablePropertyValues[I]=new Ka(Z);this.defaultTransitioningPropertyValues[I]=Se.untransitioned(),this.defaultPossiblyEvaluatedValues[I]=le.possiblyEvaluate({})}};xr("DataDrivenProperty",Ar),xr("DataConstantProperty",Tr),xr("CrossFadedDataDrivenProperty",ls),xr("CrossFadedProperty",ia),xr("ColorRampProperty",Po);var us="-transition",Xi=function(A){function I(Z,le){if(A.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Z.type!=="custom"&&(this.metadata=Z.metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,Z.type!=="background"&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),le.layout&&(this._unevaluatedLayout=new Ko(le.layout)),le.paint)){for(var Se in this._transitionablePaint=new Na(le.paint),Z.paint)this.setPaintProperty(Se,Z.paint[Se],{validate:!1});for(var Pe in Z.layout)this.setLayoutProperty(Pe,Z.layout[Pe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yi(le.paint)}}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},I.prototype.getLayoutProperty=function(Z){return Z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Z)},I.prototype.setLayoutProperty=function(Z,le,Se){if(Se===void 0&&(Se={}),le!=null){var Pe="layers."+this.id+".layout."+Z;if(this._validate(Lo,Pe,Z,le,Se))return}Z!=="visibility"?this._unevaluatedLayout.setValue(Z,le):this.visibility=le},I.prototype.getPaintProperty=function(Z){return y(Z,us)?this._transitionablePaint.getTransition(Z.slice(0,-11)):this._transitionablePaint.getValue(Z)},I.prototype.setPaintProperty=function(Z,le,Se){if(Se===void 0&&(Se={}),le!=null){var Pe="layers."+this.id+".paint."+Z;if(this._validate(ra,Pe,Z,le,Se))return!1}if(y(Z,us))return this._transitionablePaint.setTransition(Z.slice(0,-11),le||void 0),!1;var je=this._transitionablePaint._values[Z],Ke=je.property.specification["property-type"]==="cross-faded-data-driven",st=je.value.isDataDriven(),yt=je.value;this._transitionablePaint.setValue(Z,le),this._handleSpecialPaintPropertyUpdate(Z);var _t=this._transitionablePaint._values[Z].value;return _t.isDataDriven()||st||Ke||this._handleOverridablePaintPropertyUpdate(Z,yt,_t)},I.prototype._handleSpecialPaintPropertyUpdate=function(Z){},I.prototype._handleOverridablePaintPropertyUpdate=function(Z,le,Se){return!1},I.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||this.visibility==="none"},I.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},I.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},I.prototype.recalculate=function(Z,le){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,le)},I.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),m(Z,function(le,Se){return!(le===void 0||Se==="layout"&&!Object.keys(le).length||Se==="paint"&&!Object.keys(le).length)})},I.prototype._validate=function(Z,le,Se,Pe,je){return je===void 0&&(je={}),(!je||je.validate!==!1)&&Ra(this,Z.call(Zi,{key:le,layerType:this.type,objectKey:Se,value:Pe,styleSpec:De,style:{glyphs:!0,sprite:!0}}))},I.prototype.is3D=function(){return!1},I.prototype.isTileClipped=function(){return!1},I.prototype.hasOffscreenPass=function(){return!1},I.prototype.resize=function(){},I.prototype.isStateDependent=function(){for(var Z in this.paint._values){var le=this.paint.get(Z);if(le instanceof Ei&&ao(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1},I}(et),Oo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Io=function(A,I){this._structArray=A,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Cr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function zi(A,I){I===void 0&&(I=1);var Z=0,le=0;return{members:A.map(function(Se){var Pe,je=(Pe=Se.type,Oo[Pe].BYTES_PER_ELEMENT),Ke=Z=$a(Z,Math.max(I,je)),st=Se.components||1;return le=Math.max(le,je),Z+=je*st,{name:Se.name,type:Se.type,components:st,offset:Ke}}),size:$a(Z,Math.max(le,I)),alignment:I}}function $a(A,I){return Math.ceil(A/I)*I}Cr.serialize=function(A,I){return A._trim(),I&&(A.isTransferred=!0,I.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},Cr.deserialize=function(A){var I=Object.create(this.prototype);return I.arrayBuffer=A.arrayBuffer,I.length=A.length,I.capacity=A.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I},Cr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Cr.prototype.clear=function(){this.length=0},Cr.prototype.resize=function(A){this.reserve(A),this.length=A},Cr.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}},Cr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var da=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Z,le)},I.prototype.emplace=function(Z,le,Se){var Pe=2*Z;return this.int16[Pe+0]=le,this.int16[Pe+1]=Se,Z},I}(Cr);da.prototype.bytesPerElement=4,xr("StructArrayLayout2i4",da);var $o=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Se,Pe)},I.prototype.emplace=function(Z,le,Se,Pe,je){var Ke=4*Z;return this.int16[Ke+0]=le,this.int16[Ke+1]=Se,this.int16[Ke+2]=Pe,this.int16[Ke+3]=je,Z},I}(Cr);$o.prototype.bytesPerElement=8,xr("StructArrayLayout4i8",$o);var cs=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Z,le,Se,Pe,je,Ke)},I.prototype.emplace=function(Z,le,Se,Pe,je,Ke,st){var yt=6*Z;return this.int16[yt+0]=le,this.int16[yt+1]=Se,this.int16[yt+2]=Pe,this.int16[yt+3]=je,this.int16[yt+4]=Ke,this.int16[yt+5]=st,Z},I}(Cr);cs.prototype.bytesPerElement=12,xr("StructArrayLayout2i4i12",cs);var Qo=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Z,le,Se,Pe,je,Ke)},I.prototype.emplace=function(Z,le,Se,Pe,je,Ke,st){var yt=4*Z,_t=8*Z;return this.int16[yt+0]=le,this.int16[yt+1]=Se,this.uint8[_t+4]=Pe,this.uint8[_t+5]=je,this.uint8[_t+6]=Ke,this.uint8[_t+7]=st,Z},I}(Cr);Qo.prototype.bytesPerElement=8,xr("StructArrayLayout2i4ub8",Qo);var po=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe,je,Ke,st,yt,_t,Ot){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,Z,le,Se,Pe,je,Ke,st,yt,_t,Ot)},I.prototype.emplace=function(Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt){var zt=9*Z,en=18*Z;return this.uint16[zt+0]=le,this.uint16[zt+1]=Se,this.uint16[zt+2]=Pe,this.uint16[zt+3]=je,this.uint16[zt+4]=Ke,this.uint16[zt+5]=st,this.uint16[zt+6]=yt,this.uint16[zt+7]=_t,this.uint8[en+16]=Ot,this.uint8[en+17]=Bt,Z},I}(Cr);po.prototype.bytesPerElement=18,xr("StructArrayLayout8ui2ub18",po);var R=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt){var en=this.length;return this.resize(en+1),this.emplace(en,Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt)},I.prototype.emplace=function(Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en){var rn=12*Z;return this.int16[rn+0]=le,this.int16[rn+1]=Se,this.int16[rn+2]=Pe,this.int16[rn+3]=je,this.uint16[rn+4]=Ke,this.uint16[rn+5]=st,this.uint16[rn+6]=yt,this.uint16[rn+7]=_t,this.int16[rn+8]=Ot,this.int16[rn+9]=Bt,this.int16[rn+10]=zt,this.int16[rn+11]=en,Z},I}(Cr);R.prototype.bytesPerElement=24,xr("StructArrayLayout4i4ui4i24",R);var U=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Z,le,Se)},I.prototype.emplace=function(Z,le,Se,Pe){var je=3*Z;return this.float32[je+0]=le,this.float32[je+1]=Se,this.float32[je+2]=Pe,Z},I}(Cr);U.prototype.bytesPerElement=12,xr("StructArrayLayout3f12",U);var j=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},I.prototype.emplace=function(Z,le){var Se=1*Z;return this.uint32[Se+0]=le,Z},I}(Cr);j.prototype.bytesPerElement=4,xr("StructArrayLayout1ul4",j);var X=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe,je,Ke,st,yt,_t){var Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,Z,le,Se,Pe,je,Ke,st,yt,_t)},I.prototype.emplace=function(Z,le,Se,Pe,je,Ke,st,yt,_t,Ot){var Bt=10*Z,zt=5*Z;return this.int16[Bt+0]=le,this.int16[Bt+1]=Se,this.int16[Bt+2]=Pe,this.int16[Bt+3]=je,this.int16[Bt+4]=Ke,this.int16[Bt+5]=st,this.uint32[zt+3]=yt,this.uint16[Bt+8]=_t,this.uint16[Bt+9]=Ot,Z},I}(Cr);X.prototype.bytesPerElement=20,xr("StructArrayLayout6i1ul2ui20",X);var fe=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Z,le,Se,Pe,je,Ke)},I.prototype.emplace=function(Z,le,Se,Pe,je,Ke,st){var yt=6*Z;return this.int16[yt+0]=le,this.int16[yt+1]=Se,this.int16[yt+2]=Pe,this.int16[yt+3]=je,this.int16[yt+4]=Ke,this.int16[yt+5]=st,Z},I}(Cr);fe.prototype.bytesPerElement=12,xr("StructArrayLayout2i2i2i12",fe);var Ae=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe,je){var Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,Z,le,Se,Pe,je)},I.prototype.emplace=function(Z,le,Se,Pe,je,Ke){var st=4*Z,yt=8*Z;return this.float32[st+0]=le,this.float32[st+1]=Se,this.float32[st+2]=Pe,this.int16[yt+6]=je,this.int16[yt+7]=Ke,Z},I}(Cr);Ae.prototype.bytesPerElement=16,xr("StructArrayLayout2f1f2i16",Ae);var F=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Se,Pe)},I.prototype.emplace=function(Z,le,Se,Pe,je){var Ke=12*Z,st=3*Z;return this.uint8[Ke+0]=le,this.uint8[Ke+1]=Se,this.float32[st+1]=Pe,this.float32[st+2]=je,Z},I}(Cr);F.prototype.bytesPerElement=12,xr("StructArrayLayout2ub2f12",F);var $=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Z,le,Se)},I.prototype.emplace=function(Z,le,Se,Pe){var je=3*Z;return this.uint16[je+0]=le,this.uint16[je+1]=Se,this.uint16[je+2]=Pe,Z},I}(Cr);$.prototype.bytesPerElement=6,xr("StructArrayLayout3ui6",$);var ie=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en,rn,kn,Tn,On){var Dn=this.length;return this.resize(Dn+1),this.emplace(Dn,Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en,rn,kn,Tn,On)},I.prototype.emplace=function(Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en,rn,kn,Tn,On,Dn){var jn=24*Z,Zn=12*Z,$n=48*Z;return this.int16[jn+0]=le,this.int16[jn+1]=Se,this.uint16[jn+2]=Pe,this.uint16[jn+3]=je,this.uint32[Zn+2]=Ke,this.uint32[Zn+3]=st,this.uint32[Zn+4]=yt,this.uint16[jn+10]=_t,this.uint16[jn+11]=Ot,this.uint16[jn+12]=Bt,this.float32[Zn+7]=zt,this.float32[Zn+8]=en,this.uint8[$n+36]=rn,this.uint8[$n+37]=kn,this.uint8[$n+38]=Tn,this.uint32[Zn+10]=On,this.int16[jn+22]=Dn,Z},I}(Cr);ie.prototype.bytesPerElement=48,xr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ie);var de=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en,rn,kn,Tn,On,Dn,jn,Zn,$n,pr,sr,gr,_r,Dr,kr,Or){var Er=this.length;return this.resize(Er+1),this.emplace(Er,Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en,rn,kn,Tn,On,Dn,jn,Zn,$n,pr,sr,gr,_r,Dr,kr,Or)},I.prototype.emplace=function(Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en,rn,kn,Tn,On,Dn,jn,Zn,$n,pr,sr,gr,_r,Dr,kr,Or,Er){var wr=34*Z,jr=17*Z;return this.int16[wr+0]=le,this.int16[wr+1]=Se,this.int16[wr+2]=Pe,this.int16[wr+3]=je,this.int16[wr+4]=Ke,this.int16[wr+5]=st,this.int16[wr+6]=yt,this.int16[wr+7]=_t,this.uint16[wr+8]=Ot,this.uint16[wr+9]=Bt,this.uint16[wr+10]=zt,this.uint16[wr+11]=en,this.uint16[wr+12]=rn,this.uint16[wr+13]=kn,this.uint16[wr+14]=Tn,this.uint16[wr+15]=On,this.uint16[wr+16]=Dn,this.uint16[wr+17]=jn,this.uint16[wr+18]=Zn,this.uint16[wr+19]=$n,this.uint16[wr+20]=pr,this.uint16[wr+21]=sr,this.uint16[wr+22]=gr,this.uint32[jr+12]=_r,this.float32[jr+13]=Dr,this.float32[jr+14]=kr,this.float32[jr+15]=Or,this.float32[jr+16]=Er,Z},I}(Cr);de.prototype.bytesPerElement=68,xr("StructArrayLayout8i15ui1ul4f68",de);var xe=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},I.prototype.emplace=function(Z,le){var Se=1*Z;return this.float32[Se+0]=le,Z},I}(Cr);xe.prototype.bytesPerElement=4,xr("StructArrayLayout1f4",xe);var Le=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Z,le,Se)},I.prototype.emplace=function(Z,le,Se,Pe){var je=3*Z;return this.int16[je+0]=le,this.int16[je+1]=Se,this.int16[je+2]=Pe,Z},I}(Cr);Le.prototype.bytesPerElement=6,xr("StructArrayLayout3i6",Le);var Ne=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Z,le,Se)},I.prototype.emplace=function(Z,le,Se,Pe){var je=2*Z,Ke=4*Z;return this.uint32[je+0]=le,this.uint16[Ke+2]=Se,this.uint16[Ke+3]=Pe,Z},I}(Cr);Ne.prototype.bytesPerElement=8,xr("StructArrayLayout1ul2ui8",Ne);var Ue=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Z,le)},I.prototype.emplace=function(Z,le,Se){var Pe=2*Z;return this.uint16[Pe+0]=le,this.uint16[Pe+1]=Se,Z},I}(Cr);Ue.prototype.bytesPerElement=4,xr("StructArrayLayout2ui4",Ue);var qe=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},I.prototype.emplace=function(Z,le){var Se=1*Z;return this.uint16[Se+0]=le,Z},I}(Cr);qe.prototype.bytesPerElement=2,xr("StructArrayLayout1ui2",qe);var Ye=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Z,le)},I.prototype.emplace=function(Z,le,Se){var Pe=2*Z;return this.float32[Pe+0]=le,this.float32[Pe+1]=Se,Z},I}(Cr);Ye.prototype.bytesPerElement=8,xr("StructArrayLayout2f8",Ye);var $e=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Z,le,Se,Pe){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Se,Pe)},I.prototype.emplace=function(Z,le,Se,Pe,je){var Ke=4*Z;return this.float32[Ke+0]=le,this.float32[Ke+1]=Se,this.float32[Ke+2]=Pe,this.float32[Ke+3]=je,Z},I}(Cr);$e.prototype.bytesPerElement=16,xr("StructArrayLayout4f16",$e);var lt=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(I.prototype,Z),I}(Io);lt.prototype.size=20;var pt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Z){return new lt(this,Z)},I}(X);xr("CollisionBoxArray",pt);var Et=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(le){this._structArray.uint8[this._pos1+37]=le},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(le){this._structArray.uint8[this._pos1+38]=le},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(le){this._structArray.uint32[this._pos4+10]=le},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(I.prototype,Z),I}(Io);Et.prototype.size=48;var Ct=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Z){return new Et(this,Z)},I}(ie);xr("PlacedSymbolArray",Ct);var St=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(le){this._structArray.uint32[this._pos4+12]=le},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(I.prototype,Z),I}(Io);St.prototype.size=68;var Ft=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Z){return new St(this,Z)},I}(de);xr("SymbolInstanceArray",Ft);var Lt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},I}(xe);xr("GlyphOffsetArray",Lt);var tn=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.getx=function(Z){return this.int16[3*Z+0]},I.prototype.gety=function(Z){return this.int16[3*Z+1]},I.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},I}(Le);xr("SymbolLineVertexArray",tn);var Zt=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(I.prototype,Z),I}(Io);Zt.prototype.size=8;var Ht=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Z){return new Zt(this,Z)},I}(Ne);xr("FeatureIndexArray",Ht);var dn=zi([{name:"a_pos",components:2,type:"Int16"}],4).members,vn=function(A){A===void 0&&(A=[]),this.segments=A};function zn(A,I){return 256*(A=o(Math.floor(A),0,255))+o(Math.floor(I),0,255)}vn.prototype.prepareSegment=function(A,I,Z,le){var Se=this.segments[this.segments.length-1];return A>vn.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+vn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!Se||Se.vertexLength+A>vn.MAX_VERTEX_ARRAY_LENGTH||Se.sortKey!==le)&&(Se={vertexOffset:I.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},le!==void 0&&(Se.sortKey=le),this.segments.push(Se)),Se},vn.prototype.get=function(){return this.segments},vn.prototype.destroy=function(){for(var A=0,I=this.segments;A<I.length;A+=1){var Z=I[A];for(var le in Z.vaos)Z.vaos[le].destroy()}},vn.simpleSegment=function(A,I,Z,le){return new vn([{vertexOffset:A,primitiveOffset:I,vertexLength:Z,primitiveLength:le,vaos:{},sortKey:0}])},vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xr("SegmentVector",vn);var Rn=zi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Vn=T(function(A){A.exports=function(I,Z){var le,Se,Pe,je,Ke,st,yt,_t;for(le=3&I.length,Se=I.length-le,Pe=Z,Ke=3432918353,st=461845907,_t=0;_t<Se;)yt=255&I.charCodeAt(_t)|(255&I.charCodeAt(++_t))<<8|(255&I.charCodeAt(++_t))<<16|(255&I.charCodeAt(++_t))<<24,++_t,Pe=27492+(65535&(je=5*(65535&(Pe=(Pe^=yt=(65535&(yt=(yt=(65535&yt)*Ke+(((yt>>>16)*Ke&65535)<<16)&4294967295)<<15|yt>>>17))*st+(((yt>>>16)*st&65535)<<16)&4294967295)<<13|Pe>>>19))+((5*(Pe>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(yt=0,le){case 3:yt^=(255&I.charCodeAt(_t+2))<<16;case 2:yt^=(255&I.charCodeAt(_t+1))<<8;case 1:Pe^=yt=(65535&(yt=(yt=(65535&(yt^=255&I.charCodeAt(_t)))*Ke+(((yt>>>16)*Ke&65535)<<16)&4294967295)<<15|yt>>>17))*st+(((yt>>>16)*st&65535)<<16)&4294967295}return Pe^=I.length,Pe=2246822507*(65535&(Pe^=Pe>>>16))+((2246822507*(Pe>>>16)&65535)<<16)&4294967295,Pe=3266489909*(65535&(Pe^=Pe>>>13))+((3266489909*(Pe>>>16)&65535)<<16)&4294967295,(Pe^=Pe>>>16)>>>0}}),Xn=T(function(A){A.exports=function(I,Z){for(var le,Se=I.length,Pe=Z^Se,je=0;Se>=4;)le=1540483477*(65535&(le=255&I.charCodeAt(je)|(255&I.charCodeAt(++je))<<8|(255&I.charCodeAt(++je))<<16|(255&I.charCodeAt(++je))<<24))+((1540483477*(le>>>16)&65535)<<16),Pe=1540483477*(65535&Pe)+((1540483477*(Pe>>>16)&65535)<<16)^(le=1540483477*(65535&(le^=le>>>24))+((1540483477*(le>>>16)&65535)<<16)),Se-=4,++je;switch(Se){case 3:Pe^=(255&I.charCodeAt(je+2))<<16;case 2:Pe^=(255&I.charCodeAt(je+1))<<8;case 1:Pe=1540483477*(65535&(Pe^=255&I.charCodeAt(je)))+((1540483477*(Pe>>>16)&65535)<<16)}return Pe=1540483477*(65535&(Pe^=Pe>>>13))+((1540483477*(Pe>>>16)&65535)<<16),(Pe^=Pe>>>15)>>>0}}),or=Vn,ar=Vn,fr=Xn;or.murmur3=ar,or.murmur2=fr;var mr=function(){this.ids=[],this.positions=[],this.indexed=!1};mr.prototype.add=function(A,I,Z,le){this.ids.push(Nn(A)),this.positions.push(I,Z,le)},mr.prototype.getPositions=function(A){for(var I=Nn(A),Z=0,le=this.ids.length-1;Z<le;){var Se=Z+le>>1;this.ids[Se]>=I?le=Se:Z=Se+1}for(var Pe=[];this.ids[Z]===I;){var je=this.positions[3*Z],Ke=this.positions[3*Z+1],st=this.positions[3*Z+2];Pe.push({index:je,start:Ke,end:st}),Z++}return Pe},mr.serialize=function(A,I){var Z=new Float64Array(A.ids),le=new Uint32Array(A.positions);return ir(Z,le,0,Z.length-1),I&&I.push(Z.buffer,le.buffer),{ids:Z,positions:le}},mr.deserialize=function(A){var I=new mr;return I.ids=A.ids,I.positions=A.positions,I.indexed=!0,I};var Lr=Math.pow(2,53)-1;function Nn(A){var I=+A;return!isNaN(I)&&I<=Lr?I:or(String(A))}function ir(A,I,Z,le){for(;Z<le;){for(var Se=A[Z+le>>1],Pe=Z-1,je=le+1;;){do Pe++;while(A[Pe]<Se);do je--;while(A[je]>Se);if(Pe>=je)break;hr(A,Pe,je),hr(I,3*Pe,3*je),hr(I,3*Pe+1,3*je+1),hr(I,3*Pe+2,3*je+2)}je-Z<le-je?(ir(A,I,Z,je),Z=je+1):(ir(A,I,je+1,le),le=je)}}function hr(A,I,Z){var le=A[I];A[I]=A[Z],A[Z]=le}xr("FeaturePositionMap",mr);var yr=function(A,I){this.gl=A.gl,this.location=I},Mr=function(A){function I(Z,le){A.call(this,Z,le),this.current=0}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},I}(yr),Ir=function(A){function I(Z,le){A.call(this,Z,le),this.current=0}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},I}(yr),Br=function(A){function I(Z,le){A.call(this,Z,le),this.current=[0,0]}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},I}(yr),Zr=function(A){function I(Z,le){A.call(this,Z,le),this.current=[0,0,0]}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},I}(yr),oi=function(A){function I(Z,le){A.call(this,Z,le),this.current=[0,0,0,0]}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},I}(yr),si=function(A){function I(Z,le){A.call(this,Z,le),this.current=hn.transparent}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},I}(yr),Yr=new Float32Array(16),wi=function(A){function I(Z,le){A.call(this,Z,le),this.current=Yr}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var le=1;le<16;le++)if(Z[le]!==this.current[le]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},I}(yr);function Hi(A){return[zn(255*A.r,255*A.g),zn(255*A.b,255*A.a)]}var Li=function(A,I,Z){this.value=A,this.uniformNames=I.map(function(le){return"u_"+le}),this.type=Z};Li.prototype.setUniform=function(A,I,Z){A.set(Z.constantOr(this.value))},Li.prototype.getBinding=function(A,I,Z){return this.type==="color"?new si(A,I):new Ir(A,I)};var Ri=function(A,I){this.uniformNames=I.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ri.prototype.setConstantPatternPositions=function(A,I){this.pixelRatioFrom=I.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=I.tlbr,this.patternTo=A.tlbr},Ri.prototype.setUniform=function(A,I,Z,le){var Se=le==="u_pattern_to"?this.patternTo:le==="u_pattern_from"?this.patternFrom:le==="u_pixel_ratio_to"?this.pixelRatioTo:le==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Se&&A.set(Se)},Ri.prototype.getBinding=function(A,I,Z){return Z.substr(0,9)==="u_pattern"?new oi(A,I):new Ir(A,I)};var Ur=function(A,I,Z,le){this.expression=A,this.type=Z,this.maxValue=0,this.paintVertexAttributes=I.map(function(Se){return{name:"a_"+Se,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new le};Ur.prototype.populatePaintArray=function(A,I,Z,le,Se){var Pe=this.paintVertexArray.length,je=this.expression.evaluate(new Xr(0),I,{},le,[],Se);this.paintVertexArray.resize(A),this._setPaintValue(Pe,A,je)},Ur.prototype.updatePaintArray=function(A,I,Z,le){var Se=this.expression.evaluate({zoom:0},Z,le);this._setPaintValue(A,I,Se)},Ur.prototype._setPaintValue=function(A,I,Z){if(this.type==="color")for(var le=Hi(Z),Se=A;Se<I;Se++)this.paintVertexArray.emplace(Se,le[0],le[1]);else{for(var Pe=A;Pe<I;Pe++)this.paintVertexArray.emplace(Pe,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},Ur.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ur.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Fr=function(A,I,Z,le,Se,Pe){this.expression=A,this.uniformNames=I.map(function(je){return"u_"+je+"_t"}),this.type=Z,this.useIntegerZoom=le,this.zoom=Se,this.maxValue=0,this.paintVertexAttributes=I.map(function(je){return{name:"a_"+je,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new Pe};Fr.prototype.populatePaintArray=function(A,I,Z,le,Se){var Pe=this.expression.evaluate(new Xr(this.zoom),I,{},le,[],Se),je=this.expression.evaluate(new Xr(this.zoom+1),I,{},le,[],Se),Ke=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Ke,A,Pe,je)},Fr.prototype.updatePaintArray=function(A,I,Z,le){var Se=this.expression.evaluate({zoom:this.zoom},Z,le),Pe=this.expression.evaluate({zoom:this.zoom+1},Z,le);this._setPaintValue(A,I,Se,Pe)},Fr.prototype._setPaintValue=function(A,I,Z,le){if(this.type==="color")for(var Se=Hi(Z),Pe=Hi(le),je=A;je<I;je++)this.paintVertexArray.emplace(je,Se[0],Se[1],Pe[0],Pe[1]);else{for(var Ke=A;Ke<I;Ke++)this.paintVertexArray.emplace(Ke,Z,le);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(le))}},Fr.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Fr.prototype.setUniform=function(A,I){var Z=this.useIntegerZoom?Math.floor(I.zoom):I.zoom,le=o(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);A.set(le)},Fr.prototype.getBinding=function(A,I,Z){return new Ir(A,I)};var li=function(A,I,Z,le,Se,Pe){this.expression=A,this.type=I,this.useIntegerZoom=Z,this.zoom=le,this.layerId=Pe,this.zoomInPaintVertexArray=new Se,this.zoomOutPaintVertexArray=new Se};li.prototype.populatePaintArray=function(A,I,Z){var le=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(le,A,I.patterns&&I.patterns[this.layerId],Z)},li.prototype.updatePaintArray=function(A,I,Z,le,Se){this._setPaintValues(A,I,Z.patterns&&Z.patterns[this.layerId],Se)},li.prototype._setPaintValues=function(A,I,Z,le){if(le&&Z){var Se=Z.min,Pe=Z.mid,je=Z.max,Ke=le[Se],st=le[Pe],yt=le[je];if(Ke&&st&&yt)for(var _t=A;_t<I;_t++)this.zoomInPaintVertexArray.emplace(_t,st.tl[0],st.tl[1],st.br[0],st.br[1],Ke.tl[0],Ke.tl[1],Ke.br[0],Ke.br[1],st.pixelRatio,Ke.pixelRatio),this.zoomOutPaintVertexArray.emplace(_t,st.tl[0],st.tl[1],st.br[0],st.br[1],yt.tl[0],yt.tl[1],yt.br[0],yt.br[1],st.pixelRatio,yt.pixelRatio)}},li.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,Rn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,Rn.members,this.expression.isStateDependent))},li.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ti=function(A,I,Z,le){this.binders={},this.layoutAttributes=le,this._buffers=[];var Se=[];for(var Pe in A.paint._values)if(Z(Pe)){var je=A.paint.get(Pe);if(je instanceof Ei&&ao(je.property.specification)){var Ke=sa(Pe,A.type),st=je.value,yt=je.property.specification.type,_t=je.property.useIntegerZoom,Ot=je.property.specification["property-type"],Bt=Ot==="cross-faded"||Ot==="cross-faded-data-driven";if(st.kind==="constant")this.binders[Pe]=Bt?new Ri(st.value,Ke):new Li(st.value,Ke,yt),Se.push("/u_"+Pe);else if(st.kind==="source"||Bt){var zt=mi(Pe,yt,"source");this.binders[Pe]=Bt?new li(st,yt,_t,I,zt,A.id):new Ur(st,Ke,yt,zt),Se.push("/a_"+Pe)}else{var en=mi(Pe,yt,"composite");this.binders[Pe]=new Fr(st,Ke,yt,_t,I,en),Se.push("/z_"+Pe)}}}this.cacheKey=Se.sort().join("")};ti.prototype.getMaxValue=function(A){var I=this.binders[A];return I instanceof Ur||I instanceof Fr?I.maxValue:0},ti.prototype.populatePaintArrays=function(A,I,Z,le,Se){for(var Pe in this.binders){var je=this.binders[Pe];(je instanceof Ur||je instanceof Fr||je instanceof li)&&je.populatePaintArray(A,I,Z,le,Se)}},ti.prototype.setConstantPatternPositions=function(A,I){for(var Z in this.binders){var le=this.binders[Z];le instanceof Ri&&le.setConstantPatternPositions(A,I)}},ti.prototype.updatePaintArrays=function(A,I,Z,le,Se){var Pe=!1;for(var je in A)for(var Ke=0,st=I.getPositions(je);Ke<st.length;Ke+=1){var yt=st[Ke],_t=Z.feature(yt.index);for(var Ot in this.binders){var Bt=this.binders[Ot];if((Bt instanceof Ur||Bt instanceof Fr||Bt instanceof li)&&Bt.expression.isStateDependent===!0){var zt=le.paint.get(Ot);Bt.expression=zt.value,Bt.updatePaintArray(yt.start,yt.end,_t,A[je],Se),Pe=!0}}}return Pe},ti.prototype.defines=function(){var A=[];for(var I in this.binders){var Z=this.binders[I];(Z instanceof Li||Z instanceof Ri)&&A.push.apply(A,Z.uniformNames.map(function(le){return"#define HAS_UNIFORM_"+le}))}return A},ti.prototype.getPaintVertexBuffers=function(){return this._buffers},ti.prototype.getUniforms=function(A,I){var Z=[];for(var le in this.binders){var Se=this.binders[le];if(Se instanceof Li||Se instanceof Ri||Se instanceof Fr)for(var Pe=0,je=Se.uniformNames;Pe<je.length;Pe+=1){var Ke=je[Pe];if(I[Ke]){var st=Se.getBinding(A,I[Ke],Ke);Z.push({name:Ke,property:le,binding:st})}}}return Z},ti.prototype.setUniforms=function(A,I,Z,le){for(var Se=0,Pe=I;Se<Pe.length;Se+=1){var je=Pe[Se],Ke=je.name,st=je.property,yt=je.binding;this.binders[st].setUniform(yt,le,Z.get(st),Ke)}},ti.prototype.updatePaintBuffers=function(A){for(var I in this._buffers=[],this.binders){var Z=this.binders[I];if(A&&Z instanceof li){var le=A.fromScale===2?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;le&&this._buffers.push(le)}else(Z instanceof Ur||Z instanceof Fr)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},ti.prototype.upload=function(A){for(var I in this.binders){var Z=this.binders[I];(Z instanceof Ur||Z instanceof Fr||Z instanceof li)&&Z.upload(A)}this.updatePaintBuffers()},ti.prototype.destroy=function(){for(var A in this.binders){var I=this.binders[A];(I instanceof Ur||I instanceof Fr||I instanceof li)&&I.destroy()}};var fi=function(A,I,Z,le){le===void 0&&(le=function(){return!0}),this.programConfigurations={};for(var Se=0,Pe=I;Se<Pe.length;Se+=1){var je=Pe[Se];this.programConfigurations[je.id]=new ti(je,Z,le,A)}this.needsUpload=!1,this._featureMap=new mr,this._bufferOffset=0};function sa(A,I){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(I+"-","").replace(/-/g,"_")]}function mi(A,I,Z){var le={color:{source:Ye,composite:$e},number:{source:xe,composite:Ye}},Se=function(Pe){return{"line-pattern":{source:po,composite:po},"fill-pattern":{source:po,composite:po},"fill-extrusion-pattern":{source:po,composite:po}}[Pe]}(A);return Se&&Se[Z]||le[I][Z]}fi.prototype.populatePaintArrays=function(A,I,Z,le,Se,Pe){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(A,I,le,Se,Pe);I.id!==void 0&&this._featureMap.add(I.id,Z,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},fi.prototype.updatePaintArrays=function(A,I,Z,le){for(var Se=0,Pe=Z;Se<Pe.length;Se+=1){var je=Pe[Se];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(A,this._featureMap,I,je,le)||this.needsUpload}},fi.prototype.get=function(A){return this.programConfigurations[A]},fi.prototype.upload=function(A){if(this.needsUpload){for(var I in this.programConfigurations)this.programConfigurations[I].upload(A);this.needsUpload=!1}},fi.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},xr("ConstantBinder",Li),xr("CrossFadedConstantBinder",Ri),xr("SourceExpressionBinder",Ur),xr("CrossFadedCompositeBinder",li),xr("CompositeExpressionBinder",Fr),xr("ProgramConfiguration",ti,{omit:["_buffers"]}),xr("ProgramConfigurationSet",fi);var Wr=8192,es,ga=(es=15,{min:-1*Math.pow(2,es-1),max:Math.pow(2,es-1)-1});function Ca(A){for(var I=Wr/A.extent,Z=A.loadGeometry(),le=0;le<Z.length;le++)for(var Se=Z[le],Pe=0;Pe<Se.length;Pe++){var je=Se[Pe];je.x=Math.round(je.x*I),je.y=Math.round(je.y*I),(je.x<ga.min||je.x>ga.max||je.y<ga.min||je.y>ga.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),je.x=o(je.x,ga.min,ga.max),je.y=o(je.y,ga.min,ga.max))}return Z}function Ai(A,I,Z,le,Se){A.emplaceBack(2*I+(le+1)/2,2*Z+(Se+1)/2)}var qi=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new da,this.indexArray=new $,this.segments=new vn,this.programConfigurations=new fi(dn,A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function ja(A,I){for(var Z=0;Z<A.length;Z++)if(pl(I,A[Z]))return!0;for(var le=0;le<I.length;le++)if(pl(A,I[le]))return!0;return!!ru(A,I)}function Ol(A,I,Z){return!!pl(A,I)||!!iu(I,A,Z)}function Iu(A,I){if(A.length===1)return Du(I,A[0]);for(var Z=0;Z<I.length;Z++)for(var le=I[Z],Se=0;Se<le.length;Se++)if(pl(A,le[Se]))return!0;for(var Pe=0;Pe<A.length;Pe++)if(Du(I,A[Pe]))return!0;for(var je=0;je<I.length;je++)if(ru(A,I[je]))return!0;return!1}function xc(A,I,Z){if(A.length>1){if(ru(A,I))return!0;for(var le=0;le<I.length;le++)if(iu(I[le],A,Z))return!0}for(var Se=0;Se<A.length;Se++)if(iu(A[Se],I,Z))return!0;return!1}function ru(A,I){if(A.length===0||I.length===0)return!1;for(var Z=0;Z<A.length-1;Z++)for(var le=A[Z],Se=A[Z+1],Pe=0;Pe<I.length-1;Pe++)if(Il(le,Se,I[Pe],I[Pe+1]))return!0;return!1}function Il(A,I,Z,le){return w(A,Z,le)!==w(I,Z,le)&&w(A,I,Z)!==w(A,I,le)}function iu(A,I,Z){var le=Z*Z;if(I.length===1)return A.distSqr(I[0])<le;for(var Se=1;Se<I.length;Se++)if(bl(A,I[Se-1],I[Se])<le)return!0;return!1}function bl(A,I,Z){var le=I.distSqr(Z);if(le===0)return A.distSqr(I);var Se=((A.x-I.x)*(Z.x-I.x)+(A.y-I.y)*(Z.y-I.y))/le;return Se<0?A.distSqr(I):Se>1?A.distSqr(Z):A.distSqr(Z.sub(I)._mult(Se)._add(I))}function Du(A,I){for(var Z,le,Se,Pe=!1,je=0;je<A.length;je++)for(var Ke=0,st=(Z=A[je]).length-1;Ke<Z.length;st=Ke++)le=Z[Ke],Se=Z[st],le.y>I.y!=Se.y>I.y&&I.x<(Se.x-le.x)*(I.y-le.y)/(Se.y-le.y)+le.x&&(Pe=!Pe);return Pe}function pl(A,I){for(var Z=!1,le=0,Se=A.length-1;le<A.length;Se=le++){var Pe=A[le],je=A[Se];Pe.y>I.y!=je.y>I.y&&I.x<(je.x-Pe.x)*(I.y-Pe.y)/(je.y-Pe.y)+Pe.x&&(Z=!Z)}return Z}function au(A,I,Z){var le=Z[0],Se=Z[2];if(A.x<le.x&&I.x<le.x||A.x>Se.x&&I.x>Se.x||A.y<le.y&&I.y<le.y||A.y>Se.y&&I.y>Se.y)return!1;var Pe=w(A,I,Z[0]);return Pe!==w(A,I,Z[1])||Pe!==w(A,I,Z[2])||Pe!==w(A,I,Z[3])}function ou(A,I,Z){var le=I.paint.get(A).value;return le.kind==="constant"?le.value:Z.programConfigurations.get(I.id).getMaxValue(A)}function zu(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Ru(A,I,Z,le,Se){if(!I[0]&&!I[1])return A;var Pe=t.convert(I)._mult(Se);Z==="viewport"&&Pe._rotate(-le);for(var je=[],Ke=0;Ke<A.length;Ke++){var st=A[Ke];je.push(st.sub(Pe))}return je}qi.prototype.populate=function(A,I,Z){var le=this.layers[0],Se=[],Pe=null;le.type==="circle"&&(Pe=le.layout.get("circle-sort-key"));for(var je=0,Ke=A;je<Ke.length;je+=1){var st=Ke[je],yt=st.feature,_t=st.id,Ot=st.index,Bt=st.sourceLayerIndex,zt=this.layers[0]._featureFilter.needGeometry,en={type:yt.type,id:_t,properties:yt.properties,geometry:zt?Ca(yt):[]};if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),en,Z)){zt||(en.geometry=Ca(yt));var rn=Pe?Pe.evaluate(en,{},Z):void 0,kn={id:_t,properties:yt.properties,type:yt.type,sourceLayerIndex:Bt,index:Ot,geometry:en.geometry,patterns:{},sortKey:rn};Se.push(kn)}}Pe&&Se.sort(function(gr,_r){return gr.sortKey-_r.sortKey});for(var Tn=0,On=Se;Tn<On.length;Tn+=1){var Dn=On[Tn],jn=Dn,Zn=jn.geometry,$n=jn.index,pr=jn.sourceLayerIndex,sr=A[$n].feature;this.addFeature(Dn,Zn,$n,Z),I.featureIndex.insert(sr,Zn,$n,pr,this.index)}},qi.prototype.update=function(A,I,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Z)},qi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},qi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qi.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,dn),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},qi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qi.prototype.addFeature=function(A,I,Z,le){for(var Se=0,Pe=I;Se<Pe.length;Se+=1)for(var je=0,Ke=Pe[Se];je<Ke.length;je+=1){var st=Ke[je],yt=st.x,_t=st.y;if(!(yt<0||yt>=Wr||_t<0||_t>=Wr)){var Ot=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),Bt=Ot.vertexLength;Ai(this.layoutVertexArray,yt,_t,-1,-1),Ai(this.layoutVertexArray,yt,_t,1,-1),Ai(this.layoutVertexArray,yt,_t,1,1),Ai(this.layoutVertexArray,yt,_t,-1,1),this.indexArray.emplaceBack(Bt,Bt+1,Bt+2),this.indexArray.emplaceBack(Bt,Bt+3,Bt+2),Ot.vertexLength+=4,Ot.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,{},le)},xr("CircleBucket",qi,{omit:["layers"]});var Hh=new Wi({"circle-sort-key":new Ar(De.layout_circle["circle-sort-key"])}),qh={paint:new Wi({"circle-radius":new Ar(De.paint_circle["circle-radius"]),"circle-color":new Ar(De.paint_circle["circle-color"]),"circle-blur":new Ar(De.paint_circle["circle-blur"]),"circle-opacity":new Ar(De.paint_circle["circle-opacity"]),"circle-translate":new Tr(De.paint_circle["circle-translate"]),"circle-translate-anchor":new Tr(De.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tr(De.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tr(De.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ar(De.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ar(De.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ar(De.paint_circle["circle-stroke-opacity"])}),layout:Hh},Do=typeof Float32Array<"u"?Float32Array:Array;function bc(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function of(A,I,Z){var le=I[0],Se=I[1],Pe=I[2],je=I[3],Ke=I[4],st=I[5],yt=I[6],_t=I[7],Ot=I[8],Bt=I[9],zt=I[10],en=I[11],rn=I[12],kn=I[13],Tn=I[14],On=I[15],Dn=Z[0],jn=Z[1],Zn=Z[2],$n=Z[3];return A[0]=Dn*le+jn*Ke+Zn*Ot+$n*rn,A[1]=Dn*Se+jn*st+Zn*Bt+$n*kn,A[2]=Dn*Pe+jn*yt+Zn*zt+$n*Tn,A[3]=Dn*je+jn*_t+Zn*en+$n*On,Dn=Z[4],jn=Z[5],Zn=Z[6],$n=Z[7],A[4]=Dn*le+jn*Ke+Zn*Ot+$n*rn,A[5]=Dn*Se+jn*st+Zn*Bt+$n*kn,A[6]=Dn*Pe+jn*yt+Zn*zt+$n*Tn,A[7]=Dn*je+jn*_t+Zn*en+$n*On,Dn=Z[8],jn=Z[9],Zn=Z[10],$n=Z[11],A[8]=Dn*le+jn*Ke+Zn*Ot+$n*rn,A[9]=Dn*Se+jn*st+Zn*Bt+$n*kn,A[10]=Dn*Pe+jn*yt+Zn*zt+$n*Tn,A[11]=Dn*je+jn*_t+Zn*en+$n*On,Dn=Z[12],jn=Z[13],Zn=Z[14],$n=Z[15],A[12]=Dn*le+jn*Ke+Zn*Ot+$n*rn,A[13]=Dn*Se+jn*st+Zn*Bt+$n*kn,A[14]=Dn*Pe+jn*yt+Zn*zt+$n*Tn,A[15]=Dn*je+jn*_t+Zn*en+$n*On,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,I=0,Z=arguments.length;Z--;)I+=A[Z]*A[Z];return Math.sqrt(I)});var Gh=of,Fu,Zh=function(A,I,Z){return A[0]=I[0]-Z[0],A[1]=I[1]-Z[1],A[2]=I[2]-Z[2],A};function Bu(A,I,Z){var le=I[0],Se=I[1],Pe=I[2],je=I[3];return A[0]=Z[0]*le+Z[4]*Se+Z[8]*Pe+Z[12]*je,A[1]=Z[1]*le+Z[5]*Se+Z[9]*Pe+Z[13]*je,A[2]=Z[2]*le+Z[6]*Se+Z[10]*Pe+Z[14]*je,A[3]=Z[3]*le+Z[7]*Se+Z[11]*Pe+Z[15]*je,A}Fu=new Do(3),Do!=Float32Array&&(Fu[0]=0,Fu[1]=0,Fu[2]=0),function(){var A=new Do(4);Do!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0)}();var Yh=function(A){var I=A[0],Z=A[1];return I*I+Z*Z},Wh=(function(){var A=new Do(2);Do!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function I(Z){A.call(this,Z,qh)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(Z){return new qi(Z)},I.prototype.queryRadius=function(Z){var le=Z;return ou("circle-radius",this,le)+ou("circle-stroke-width",this,le)+zu(this.paint.get("circle-translate"))},I.prototype.queryIntersectsFeature=function(Z,le,Se,Pe,je,Ke,st,yt){for(var _t=Ru(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ke.angle,st),Ot=this.paint.get("circle-radius").evaluate(le,Se)+this.paint.get("circle-stroke-width").evaluate(le,Se),Bt=this.paint.get("circle-pitch-alignment")==="map",zt=Bt?_t:function(pr,sr){return pr.map(function(gr){return sf(gr,sr)})}(_t,yt),en=Bt?Ot*st:Ot,rn=0,kn=Pe;rn<kn.length;rn+=1)for(var Tn=0,On=kn[rn];Tn<On.length;Tn+=1){var Dn=On[Tn],jn=Bt?Dn:sf(Dn,yt),Zn=en,$n=Bu([],[Dn.x,Dn.y,0,1],yt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Zn*=$n[3]/Ke.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Zn*=Ke.cameraToCenterDistance/$n[3]),Ol(zt,jn,Zn))return!0}return!1},I}(Xi));function sf(A,I){var Z=Bu([],[A.x,A.y,0,1],I);return new t(Z[0]/Z[3],Z[1]/Z[3])}var lf=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(qi);function _c(A,I,Z,le){var Se=I.width,Pe=I.height;if(le){if(le instanceof Uint8ClampedArray)le=new Uint8Array(le.buffer);else if(le.length!==Se*Pe*Z)throw new RangeError("mismatched image size")}else le=new Uint8Array(Se*Pe*Z);return A.width=Se,A.height=Pe,A.data=le,A}function uf(A,I,Z){var le=I.width,Se=I.height;if(le!==A.width||Se!==A.height){var Pe=_c({},{width:le,height:Se},Z);wc(A,Pe,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,le),height:Math.min(A.height,Se)},Z),A.width=le,A.height=Se,A.data=Pe.data}}function wc(A,I,Z,le,Se,Pe){if(Se.width===0||Se.height===0)return I;if(Se.width>A.width||Se.height>A.height||Z.x>A.width-Se.width||Z.y>A.height-Se.height)throw new RangeError("out of range source coordinates for image copy");if(Se.width>I.width||Se.height>I.height||le.x>I.width-Se.width||le.y>I.height-Se.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=A.data,Ke=I.data,st=0;st<Se.height;st++)for(var yt=((Z.y+st)*A.width+Z.x)*Pe,_t=((le.y+st)*I.width+le.x)*Pe,Ot=0;Ot<Se.width*Pe;Ot++)Ke[_t+Ot]=je[yt+Ot];return I}xr("HeatmapBucket",lf,{omit:["layers"]});var _l=function(A,I){_c(this,A,1,I)};_l.prototype.resize=function(A){uf(this,A,1)},_l.prototype.clone=function(){return new _l({width:this.width,height:this.height},new Uint8Array(this.data))},_l.copy=function(A,I,Z,le,Se){wc(A,I,Z,le,Se,1)};var Qa=function(A,I){_c(this,A,4,I)};Qa.prototype.resize=function(A){uf(this,A,4)},Qa.prototype.replace=function(A,I){I?this.data.set(A):A instanceof Uint8ClampedArray?this.data=new Uint8Array(A.buffer):this.data=A},Qa.prototype.clone=function(){return new Qa({width:this.width,height:this.height},new Uint8Array(this.data))},Qa.copy=function(A,I,Z,le,Se){wc(A,I,Z,le,Se,4)},xr("AlphaImage",_l),xr("RGBAImage",Qa);var Xh={paint:new Wi({"heatmap-radius":new Ar(De.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ar(De.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tr(De.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Po(De.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tr(De.paint_heatmap["heatmap-opacity"])})};function cf(A,I){for(var Z=new Uint8Array(1024),le={},Se=0,Pe=0;Se<256;Se++,Pe+=4){le[I]=Se/255;var je=A.evaluate(le);Z[Pe+0]=Math.floor(255*je.r/je.a),Z[Pe+1]=Math.floor(255*je.g/je.a),Z[Pe+2]=Math.floor(255*je.b/je.a),Z[Pe+3]=Math.floor(255*je.a)}return new Qa({width:256,height:1},Z)}var Jh=function(A){function I(Z){A.call(this,Z,Xh),this._updateColorRamp()}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(Z){return new lf(Z)},I.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="heatmap-color"&&this._updateColorRamp()},I.prototype._updateColorRamp=function(){var Z=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=cf(Z,"heatmapDensity"),this.colorRampTexture=null},I.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},I}(Xi),Kh={paint:new Wi({"hillshade-illumination-direction":new Tr(De.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Tr(De.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tr(De.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tr(De.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tr(De.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tr(De.paint_hillshade["hillshade-accent-color"])})},$h=function(A){function I(Z){A.call(this,Z,Kh)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},I}(Xi),ff=zi([{name:"a_pos",components:2,type:"Int16"}],4).members,Tc=Nu,Qh=Nu;function Nu(A,I,Z){Z=Z||2;var le,Se,Pe,je,Ke,st,yt,_t=I&&I.length,Ot=_t?I[0]*Z:A.length,Bt=hf(A,0,Ot,Z,!0),zt=[];if(!Bt||Bt.next===Bt.prev)return zt;if(_t&&(Bt=function(rn,kn,Tn,On){var Dn,jn,Zn,$n=[];for(Dn=0,jn=kn.length;Dn<jn;Dn++)(Zn=hf(rn,kn[Dn]*On,Dn<jn-1?kn[Dn+1]*On:rn.length,On,!1))===Zn.next&&(Zn.steiner=!0),$n.push(sp(Zn));for($n.sort(ip),Dn=0;Dn<$n.length;Dn++)ap($n[Dn],Tn),Tn=dl(Tn,Tn.next);return Tn}(A,I,Bt,Z)),A.length>80*Z){le=Pe=A[0],Se=je=A[1];for(var en=Z;en<Ot;en+=Z)(Ke=A[en])<le&&(le=Ke),(st=A[en+1])<Se&&(Se=st),Ke>Pe&&(Pe=Ke),st>je&&(je=st);yt=(yt=Math.max(Pe-le,je-Se))!==0?1/yt:0}return su(Bt,zt,Z,le,Se,yt),zt}function hf(A,I,Z,le,Se){var Pe,je;if(Se===Mc(A,I,Z,le)>0)for(Pe=I;Pe<Z;Pe+=le)je=gf(Pe,A[Pe],A[Pe+1],je);else for(Pe=Z-le;Pe>=I;Pe-=le)je=gf(Pe,A[Pe],A[Pe+1],je);return je&&ju(je,je.next)&&(uu(je),je=je.next),je}function dl(A,I){if(!A)return A;I||(I=A);var Z,le=A;do if(Z=!1,le.steiner||!ju(le,le.next)&&Qi(le.prev,le,le.next)!==0)le=le.next;else{if(uu(le),(le=I=le.prev)===le.next)break;Z=!0}while(Z||le!==I);return I}function su(A,I,Z,le,Se,Pe,je){if(A){!je&&Pe&&function(_t,Ot,Bt,zt){var en=_t;do en.z===null&&(en.z=kc(en.x,en.y,Ot,Bt,zt)),en.prevZ=en.prev,en.nextZ=en.next,en=en.next;while(en!==_t);en.prevZ.nextZ=null,en.prevZ=null,function(rn){var kn,Tn,On,Dn,jn,Zn,$n,pr,sr=1;do{for(Tn=rn,rn=null,jn=null,Zn=0;Tn;){for(Zn++,On=Tn,$n=0,kn=0;kn<sr&&($n++,On=On.nextZ);kn++);for(pr=sr;$n>0||pr>0&&On;)$n!==0&&(pr===0||!On||Tn.z<=On.z)?(Dn=Tn,Tn=Tn.nextZ,$n--):(Dn=On,On=On.nextZ,pr--),jn?jn.nextZ=Dn:rn=Dn,Dn.prevZ=jn,jn=Dn;Tn=On}jn.nextZ=null,sr*=2}while(Zn>1)}(en)}(A,le,Se,Pe);for(var Ke,st,yt=A;A.prev!==A.next;)if(Ke=A.prev,st=A.next,Pe?tp(A,le,Se,Pe):ep(A))I.push(Ke.i/Z),I.push(A.i/Z),I.push(st.i/Z),uu(A),A=st.next,yt=st.next;else if((A=st)===yt){je?je===1?su(A=np(dl(A),I,Z),I,Z,le,Se,Pe,2):je===2&&rp(A,I,Z,le,Se,Pe):su(dl(A),I,Z,le,Se,Pe,1);break}}}function ep(A){var I=A.prev,Z=A,le=A.next;if(Qi(I,Z,le)>=0)return!1;for(var Se=A.next.next;Se!==A.prev;){if(Dl(I.x,I.y,Z.x,Z.y,le.x,le.y,Se.x,Se.y)&&Qi(Se.prev,Se,Se.next)>=0)return!1;Se=Se.next}return!0}function tp(A,I,Z,le){var Se=A.prev,Pe=A,je=A.next;if(Qi(Se,Pe,je)>=0)return!1;for(var Ke=Se.x<Pe.x?Se.x<je.x?Se.x:je.x:Pe.x<je.x?Pe.x:je.x,st=Se.y<Pe.y?Se.y<je.y?Se.y:je.y:Pe.y<je.y?Pe.y:je.y,yt=Se.x>Pe.x?Se.x>je.x?Se.x:je.x:Pe.x>je.x?Pe.x:je.x,_t=Se.y>Pe.y?Se.y>je.y?Se.y:je.y:Pe.y>je.y?Pe.y:je.y,Ot=kc(Ke,st,I,Z,le),Bt=kc(yt,_t,I,Z,le),zt=A.prevZ,en=A.nextZ;zt&&zt.z>=Ot&&en&&en.z<=Bt;){if(zt!==A.prev&&zt!==A.next&&Dl(Se.x,Se.y,Pe.x,Pe.y,je.x,je.y,zt.x,zt.y)&&Qi(zt.prev,zt,zt.next)>=0||(zt=zt.prevZ,en!==A.prev&&en!==A.next&&Dl(Se.x,Se.y,Pe.x,Pe.y,je.x,je.y,en.x,en.y)&&Qi(en.prev,en,en.next)>=0))return!1;en=en.nextZ}for(;zt&&zt.z>=Ot;){if(zt!==A.prev&&zt!==A.next&&Dl(Se.x,Se.y,Pe.x,Pe.y,je.x,je.y,zt.x,zt.y)&&Qi(zt.prev,zt,zt.next)>=0)return!1;zt=zt.prevZ}for(;en&&en.z<=Bt;){if(en!==A.prev&&en!==A.next&&Dl(Se.x,Se.y,Pe.x,Pe.y,je.x,je.y,en.x,en.y)&&Qi(en.prev,en,en.next)>=0)return!1;en=en.nextZ}return!0}function np(A,I,Z){var le=A;do{var Se=le.prev,Pe=le.next.next;!ju(Se,Pe)&&pf(Se,le,le.next,Pe)&&lu(Se,Pe)&&lu(Pe,Se)&&(I.push(Se.i/Z),I.push(le.i/Z),I.push(Pe.i/Z),uu(le),uu(le.next),le=A=Pe),le=le.next}while(le!==A);return dl(le)}function rp(A,I,Z,le,Se,Pe){var je=A;do{for(var Ke=je.next.next;Ke!==je.prev;){if(je.i!==Ke.i&&lp(je,Ke)){var st=df(je,Ke);return je=dl(je,je.next),st=dl(st,st.next),su(je,I,Z,le,Se,Pe),void su(st,I,Z,le,Se,Pe)}Ke=Ke.next}je=je.next}while(je!==A)}function ip(A,I){return A.x-I.x}function ap(A,I){if(I=function(le,Se){var Pe,je=Se,Ke=le.x,st=le.y,yt=-1/0;do{if(st<=je.y&&st>=je.next.y&&je.next.y!==je.y){var _t=je.x+(st-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(_t<=Ke&&_t>yt){if(yt=_t,_t===Ke){if(st===je.y)return je;if(st===je.next.y)return je.next}Pe=je.x<je.next.x?je:je.next}}je=je.next}while(je!==Se);if(!Pe)return null;if(Ke===yt)return Pe;var Ot,Bt=Pe,zt=Pe.x,en=Pe.y,rn=1/0;je=Pe;do Ke>=je.x&&je.x>=zt&&Ke!==je.x&&Dl(st<en?Ke:yt,st,zt,en,st<en?yt:Ke,st,je.x,je.y)&&(Ot=Math.abs(st-je.y)/(Ke-je.x),lu(je,le)&&(Ot<rn||Ot===rn&&(je.x>Pe.x||je.x===Pe.x&&op(Pe,je)))&&(Pe=je,rn=Ot)),je=je.next;while(je!==Bt);return Pe}(A,I)){var Z=df(I,A);dl(I,I.next),dl(Z,Z.next)}}function op(A,I){return Qi(A.prev,A,I.prev)<0&&Qi(I.next,A,A.next)<0}function kc(A,I,Z,le,Se){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-Z)*Se)|A<<8))|A<<4))|A<<2))|A<<1))|(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-le)*Se)|I<<8))|I<<4))|I<<2))|I<<1))<<1}function sp(A){var I=A,Z=A;do(I.x<Z.x||I.x===Z.x&&I.y<Z.y)&&(Z=I),I=I.next;while(I!==A);return Z}function Dl(A,I,Z,le,Se,Pe,je,Ke){return(Se-je)*(I-Ke)-(A-je)*(Pe-Ke)>=0&&(A-je)*(le-Ke)-(Z-je)*(I-Ke)>=0&&(Z-je)*(Pe-Ke)-(Se-je)*(le-Ke)>=0}function lp(A,I){return A.next.i!==I.i&&A.prev.i!==I.i&&!function(Z,le){var Se=Z;do{if(Se.i!==Z.i&&Se.next.i!==Z.i&&Se.i!==le.i&&Se.next.i!==le.i&&pf(Se,Se.next,Z,le))return!0;Se=Se.next}while(Se!==Z);return!1}(A,I)&&(lu(A,I)&&lu(I,A)&&function(Z,le){var Se=Z,Pe=!1,je=(Z.x+le.x)/2,Ke=(Z.y+le.y)/2;do Se.y>Ke!=Se.next.y>Ke&&Se.next.y!==Se.y&&je<(Se.next.x-Se.x)*(Ke-Se.y)/(Se.next.y-Se.y)+Se.x&&(Pe=!Pe),Se=Se.next;while(Se!==Z);return Pe}(A,I)&&(Qi(A.prev,A,I.prev)||Qi(A,I.prev,I))||ju(A,I)&&Qi(A.prev,A,A.next)>0&&Qi(I.prev,I,I.next)>0)}function Qi(A,I,Z){return(I.y-A.y)*(Z.x-I.x)-(I.x-A.x)*(Z.y-I.y)}function ju(A,I){return A.x===I.x&&A.y===I.y}function pf(A,I,Z,le){var Se=Vu(Qi(A,I,Z)),Pe=Vu(Qi(A,I,le)),je=Vu(Qi(Z,le,A)),Ke=Vu(Qi(Z,le,I));return Se!==Pe&&je!==Ke||!(Se!==0||!Uu(A,Z,I))||!(Pe!==0||!Uu(A,le,I))||!(je!==0||!Uu(Z,A,le))||!(Ke!==0||!Uu(Z,I,le))}function Uu(A,I,Z){return I.x<=Math.max(A.x,Z.x)&&I.x>=Math.min(A.x,Z.x)&&I.y<=Math.max(A.y,Z.y)&&I.y>=Math.min(A.y,Z.y)}function Vu(A){return A>0?1:A<0?-1:0}function lu(A,I){return Qi(A.prev,A,A.next)<0?Qi(A,I,A.next)>=0&&Qi(A,A.prev,I)>=0:Qi(A,I,A.prev)<0||Qi(A,A.next,I)<0}function df(A,I){var Z=new Ac(A.i,A.x,A.y),le=new Ac(I.i,I.x,I.y),Se=A.next,Pe=I.prev;return A.next=I,I.prev=A,Z.next=Se,Se.prev=Z,le.next=Z,Z.prev=le,Pe.next=le,le.prev=Pe,le}function gf(A,I,Z,le){var Se=new Ac(A,I,Z);return le?(Se.next=le.next,Se.prev=le,le.next.prev=Se,le.next=Se):(Se.prev=Se,Se.next=Se),Se}function uu(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Ac(A,I,Z){this.i=A,this.x=I,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mc(A,I,Z,le){for(var Se=0,Pe=I,je=Z-le;Pe<Z;Pe+=le)Se+=(A[je]-A[Pe])*(A[Pe+1]+A[je+1]),je=Pe;return Se}function up(A,I,Z,le,Se){vf(A,I,Z||0,le||A.length-1,Se||cp)}function vf(A,I,Z,le,Se){for(;le>Z;){if(le-Z>600){var Pe=le-Z+1,je=I-Z+1,Ke=Math.log(Pe),st=.5*Math.exp(2*Ke/3),yt=.5*Math.sqrt(Ke*st*(Pe-st)/Pe)*(je-Pe/2<0?-1:1);vf(A,I,Math.max(Z,Math.floor(I-je*st/Pe+yt)),Math.min(le,Math.floor(I+(Pe-je)*st/Pe+yt)),Se)}var _t=A[I],Ot=Z,Bt=le;for(cu(A,Z,I),Se(A[le],_t)>0&&cu(A,Z,le);Ot<Bt;){for(cu(A,Ot,Bt),Ot++,Bt--;Se(A[Ot],_t)<0;)Ot++;for(;Se(A[Bt],_t)>0;)Bt--}Se(A[Z],_t)===0?cu(A,Z,Bt):cu(A,++Bt,le),Bt<=I&&(Z=Bt+1),I<=Bt&&(le=Bt-1)}}function cu(A,I,Z){var le=A[I];A[I]=A[Z],A[Z]=le}function cp(A,I){return A<I?-1:A>I?1:0}function Sc(A,I){var Z=A.length;if(Z<=1)return[A];for(var le,Se,Pe=[],je=0;je<Z;je++){var Ke=E(A[je]);Ke!==0&&(A[je].area=Math.abs(Ke),Se===void 0&&(Se=Ke<0),Se===Ke<0?(le&&Pe.push(le),le=[A[je]]):le.push(A[je]))}if(le&&Pe.push(le),I>1)for(var st=0;st<Pe.length;st++)Pe[st].length<=I||(up(Pe[st],I,1,Pe[st].length-1,fp),Pe[st]=Pe[st].slice(0,I));return Pe}function fp(A,I){return I.area-A.area}function Ec(A,I,Z){for(var le=Z.patternDependencies,Se=!1,Pe=0,je=I;Pe<je.length;Pe+=1){var Ke=je[Pe].paint.get(A+"-pattern");Ke.isConstant()||(Se=!0);var st=Ke.constantOr(null);st&&(Se=!0,le[st.to]=!0,le[st.from]=!0)}return Se}function Lc(A,I,Z,le,Se){for(var Pe=Se.patternDependencies,je=0,Ke=I;je<Ke.length;je+=1){var st=Ke[je],yt=st.paint.get(A+"-pattern").value;if(yt.kind!=="constant"){var _t=yt.evaluate({zoom:le-1},Z,{},Se.availableImages),Ot=yt.evaluate({zoom:le},Z,{},Se.availableImages),Bt=yt.evaluate({zoom:le+1},Z,{},Se.availableImages);_t=_t&&_t.name?_t.name:_t,Ot=Ot&&Ot.name?Ot.name:Ot,Bt=Bt&&Bt.name?Bt.name:Bt,Pe[_t]=!0,Pe[Ot]=!0,Pe[Bt]=!0,Z.patterns[st.id]={min:_t,mid:Ot,max:Bt}}}return Z}Nu.deviation=function(A,I,Z,le){var Se=I&&I.length,Pe=Se?I[0]*Z:A.length,je=Math.abs(Mc(A,0,Pe,Z));if(Se)for(var Ke=0,st=I.length;Ke<st;Ke++){var yt=I[Ke]*Z,_t=Ke<st-1?I[Ke+1]*Z:A.length;je-=Math.abs(Mc(A,yt,_t,Z))}var Ot=0;for(Ke=0;Ke<le.length;Ke+=3){var Bt=le[Ke]*Z,zt=le[Ke+1]*Z,en=le[Ke+2]*Z;Ot+=Math.abs((A[Bt]-A[en])*(A[zt+1]-A[Bt+1])-(A[Bt]-A[zt])*(A[en+1]-A[Bt+1]))}return je===0&&Ot===0?0:Math.abs((Ot-je)/je)},Nu.flatten=function(A){for(var I=A[0][0].length,Z={vertices:[],holes:[],dimensions:I},le=0,Se=0;Se<A.length;Se++){for(var Pe=0;Pe<A[Se].length;Pe++)for(var je=0;je<I;je++)Z.vertices.push(A[Se][Pe][je]);Se>0&&(le+=A[Se-1].length,Z.holes.push(le))}return Z},Tc.default=Qh;var ks=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new da,this.indexArray=new $,this.indexArray2=new Ue,this.programConfigurations=new fi(ff,A.layers,A.zoom),this.segments=new vn,this.segments2=new vn,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};ks.prototype.populate=function(A,I,Z){this.hasPattern=Ec("fill",this.layers,I);for(var le=this.layers[0].layout.get("fill-sort-key"),Se=[],Pe=0,je=A;Pe<je.length;Pe+=1){var Ke=je[Pe],st=Ke.feature,yt=Ke.id,_t=Ke.index,Ot=Ke.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,zt={type:st.type,id:yt,properties:st.properties,geometry:Bt?Ca(st):[]};if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),zt,Z)){Bt||(zt.geometry=Ca(st));var en=le?le.evaluate(zt,{},Z,I.availableImages):void 0,rn={id:yt,properties:st.properties,type:st.type,sourceLayerIndex:Ot,index:_t,geometry:zt.geometry,patterns:{},sortKey:en};Se.push(rn)}}le&&Se.sort(function(gr,_r){return gr.sortKey-_r.sortKey});for(var kn=0,Tn=Se;kn<Tn.length;kn+=1){var On=Tn[kn],Dn=On,jn=Dn.geometry,Zn=Dn.index,$n=Dn.sourceLayerIndex;if(this.hasPattern){var pr=Lc("fill",this.layers,On,this.zoom,I);this.patternFeatures.push(pr)}else this.addFeature(On,jn,Zn,Z,{});var sr=A[Zn].feature;I.featureIndex.insert(sr,jn,Zn,$n,this.index)}},ks.prototype.update=function(A,I,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Z)},ks.prototype.addFeatures=function(A,I,Z){for(var le=0,Se=this.patternFeatures;le<Se.length;le+=1){var Pe=Se[le];this.addFeature(Pe,Pe.geometry,Pe.index,I,Z)}},ks.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ks.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ks.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,ff),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},ks.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ks.prototype.addFeature=function(A,I,Z,le,Se){for(var Pe=0,je=Sc(I,500);Pe<je.length;Pe+=1){for(var Ke=je[Pe],st=0,yt=0,_t=Ke;yt<_t.length;yt+=1)st+=_t[yt].length;for(var Ot=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray),Bt=Ot.vertexLength,zt=[],en=[],rn=0,kn=Ke;rn<kn.length;rn+=1){var Tn=kn[rn];if(Tn.length!==0){Tn!==Ke[0]&&en.push(zt.length/2);var On=this.segments2.prepareSegment(Tn.length,this.layoutVertexArray,this.indexArray2),Dn=On.vertexLength;this.layoutVertexArray.emplaceBack(Tn[0].x,Tn[0].y),this.indexArray2.emplaceBack(Dn+Tn.length-1,Dn),zt.push(Tn[0].x),zt.push(Tn[0].y);for(var jn=1;jn<Tn.length;jn++)this.layoutVertexArray.emplaceBack(Tn[jn].x,Tn[jn].y),this.indexArray2.emplaceBack(Dn+jn-1,Dn+jn),zt.push(Tn[jn].x),zt.push(Tn[jn].y);On.vertexLength+=Tn.length,On.primitiveLength+=Tn.length}}for(var Zn=Tc(zt,en),$n=0;$n<Zn.length;$n+=3)this.indexArray.emplaceBack(Bt+Zn[$n],Bt+Zn[$n+1],Bt+Zn[$n+2]);Ot.vertexLength+=st,Ot.primitiveLength+=Zn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,Se,le)},xr("FillBucket",ks,{omit:["layers","patternFeatures"]});var hp=new Wi({"fill-sort-key":new Ar(De.layout_fill["fill-sort-key"])}),pp={paint:new Wi({"fill-antialias":new Tr(De.paint_fill["fill-antialias"]),"fill-opacity":new Ar(De.paint_fill["fill-opacity"]),"fill-color":new Ar(De.paint_fill["fill-color"]),"fill-outline-color":new Ar(De.paint_fill["fill-outline-color"]),"fill-translate":new Tr(De.paint_fill["fill-translate"]),"fill-translate-anchor":new Tr(De.paint_fill["fill-translate-anchor"]),"fill-pattern":new ls(De.paint_fill["fill-pattern"])}),layout:hp},dp=function(A){function I(Z){A.call(this,Z,pp)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.recalculate=function(Z,le){A.prototype.recalculate.call(this,Z,le);var Se=this.paint._values["fill-outline-color"];Se.value.kind==="constant"&&Se.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},I.prototype.createBucket=function(Z){return new ks(Z)},I.prototype.queryRadius=function(){return zu(this.paint.get("fill-translate"))},I.prototype.queryIntersectsFeature=function(Z,le,Se,Pe,je,Ke,st){return Iu(Ru(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ke.angle,st),Pe)},I.prototype.isTileClipped=function(){return!0},I}(Xi),mf=zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,yf=zl;function zl(A,I,Z,le,Se){this.properties={},this.extent=Z,this.type=0,this._pbf=A,this._geometry=-1,this._keys=le,this._values=Se,A.readFields(gp,this,I)}function gp(A,I,Z){A==1?I.id=Z.readVarint():A==2?function(le,Se){for(var Pe=le.readVarint()+le.pos;le.pos<Pe;){var je=Se._keys[le.readVarint()],Ke=Se._values[le.readVarint()];Se.properties[je]=Ke}}(Z,I):A==3?I.type=Z.readVarint():A==4&&(I._geometry=Z.pos)}function vp(A){for(var I,Z,le=0,Se=0,Pe=A.length,je=Pe-1;Se<Pe;je=Se++)I=A[Se],le+=((Z=A[je]).x-I.x)*(I.y+Z.y);return le}zl.types=["Unknown","Point","LineString","Polygon"],zl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var I,Z=A.readVarint()+A.pos,le=1,Se=0,Pe=0,je=0,Ke=[];A.pos<Z;){if(Se<=0){var st=A.readVarint();le=7&st,Se=st>>3}if(Se--,le===1||le===2)Pe+=A.readSVarint(),je+=A.readSVarint(),le===1&&(I&&Ke.push(I),I=[]),I.push(new t(Pe,je));else{if(le!==7)throw new Error("unknown command "+le);I&&I.push(I[0].clone())}}return I&&Ke.push(I),Ke},zl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var I=A.readVarint()+A.pos,Z=1,le=0,Se=0,Pe=0,je=1/0,Ke=-1/0,st=1/0,yt=-1/0;A.pos<I;){if(le<=0){var _t=A.readVarint();Z=7&_t,le=_t>>3}if(le--,Z===1||Z===2)(Se+=A.readSVarint())<je&&(je=Se),Se>Ke&&(Ke=Se),(Pe+=A.readSVarint())<st&&(st=Pe),Pe>yt&&(yt=Pe);else if(Z!==7)throw new Error("unknown command "+Z)}return[je,st,Ke,yt]},zl.prototype.toGeoJSON=function(A,I,Z){var le,Se,Pe=this.extent*Math.pow(2,Z),je=this.extent*A,Ke=this.extent*I,st=this.loadGeometry(),yt=zl.types[this.type];function _t(zt){for(var en=0;en<zt.length;en++){var rn=zt[en],kn=180-360*(rn.y+Ke)/Pe;zt[en]=[360*(rn.x+je)/Pe-180,360/Math.PI*Math.atan(Math.exp(kn*Math.PI/180))-90]}}switch(this.type){case 1:var Ot=[];for(le=0;le<st.length;le++)Ot[le]=st[le][0];_t(st=Ot);break;case 2:for(le=0;le<st.length;le++)_t(st[le]);break;case 3:for(st=function(zt){var en=zt.length;if(en<=1)return[zt];for(var rn,kn,Tn=[],On=0;On<en;On++){var Dn=vp(zt[On]);Dn!==0&&(kn===void 0&&(kn=Dn<0),kn===Dn<0?(rn&&Tn.push(rn),rn=[zt[On]]):rn.push(zt[On]))}return rn&&Tn.push(rn),Tn}(st),le=0;le<st.length;le++)for(Se=0;Se<st[le].length;Se++)_t(st[le][Se])}st.length===1?st=st[0]:yt="Multi"+yt;var Bt={type:"Feature",geometry:{type:yt,coordinates:st},properties:this.properties};return"id"in this&&(Bt.id=this.id),Bt};var xf=bf;function bf(A,I){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(mp,this,I),this.length=this._features.length}function mp(A,I,Z){A===15?I.version=Z.readVarint():A===1?I.name=Z.readString():A===5?I.extent=Z.readVarint():A===2?I._features.push(Z.pos):A===3?I._keys.push(Z.readString()):A===4&&I._values.push(function(le){for(var Se=null,Pe=le.readVarint()+le.pos;le.pos<Pe;){var je=le.readVarint()>>3;Se=je===1?le.readString():je===2?le.readFloat():je===3?le.readDouble():je===4?le.readVarint64():je===5?le.readVarint():je===6?le.readSVarint():je===7?le.readBoolean():null}return Se}(Z))}function yp(A,I,Z){if(A===3){var le=new xf(Z,Z.readVarint()+Z.pos);le.length&&(I[le.name]=le)}}bf.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var I=this._pbf.readVarint()+this._pbf.pos;return new yf(this._pbf,I,this.extent,this._keys,this._values)};var Rl={VectorTile:function(A,I){this.layers=A.readFields(yp,{},I)},VectorTileFeature:yf,VectorTileLayer:xf},xp=Rl.VectorTileFeature.types,Cc=Math.pow(2,13);function fu(A,I,Z,le,Se,Pe,je,Ke){A.emplaceBack(I,Z,2*Math.floor(le*Cc)+je,Se*Cc*2,Pe*Cc*2,Math.round(Ke))}var As=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new cs,this.indexArray=new $,this.programConfigurations=new fi(mf,A.layers,A.zoom),this.segments=new vn,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function bp(A,I){return A.x===I.x&&(A.x<0||A.x>Wr)||A.y===I.y&&(A.y<0||A.y>Wr)}As.prototype.populate=function(A,I,Z){this.features=[],this.hasPattern=Ec("fill-extrusion",this.layers,I);for(var le=0,Se=A;le<Se.length;le+=1){var Pe=Se[le],je=Pe.feature,Ke=Pe.id,st=Pe.index,yt=Pe.sourceLayerIndex,_t=this.layers[0]._featureFilter.needGeometry,Ot={type:je.type,id:Ke,properties:je.properties,geometry:_t?Ca(je):[]};if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),Ot,Z)){var Bt={id:Ke,sourceLayerIndex:yt,index:st,geometry:_t?Ot.geometry:Ca(je),properties:je.properties,type:je.type,patterns:{}};je.id!==void 0&&(Bt.id=je.id),this.hasPattern?this.features.push(Lc("fill-extrusion",this.layers,Bt,this.zoom,I)):this.addFeature(Bt,Bt.geometry,st,Z,{}),I.featureIndex.insert(je,Bt.geometry,st,yt,this.index,!0)}}},As.prototype.addFeatures=function(A,I,Z){for(var le=0,Se=this.features;le<Se.length;le+=1){var Pe=Se[le],je=Pe.geometry;this.addFeature(Pe,je,Pe.index,I,Z)}},As.prototype.update=function(A,I,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Z)},As.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},As.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},As.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,mf),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},As.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},As.prototype.addFeature=function(A,I,Z,le,Se){for(var Pe=0,je=Sc(I,500);Pe<je.length;Pe+=1){for(var Ke=je[Pe],st=0,yt=0,_t=Ke;yt<_t.length;yt+=1)st+=_t[yt].length;for(var Ot=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Bt=0,zt=Ke;Bt<zt.length;Bt+=1){var en=zt[Bt];if(en.length!==0&&!((jr=en).every(function(zr){return zr.x<0})||jr.every(function(zr){return zr.x>Wr})||jr.every(function(zr){return zr.y<0})||jr.every(function(zr){return zr.y>Wr})))for(var rn=0,kn=0;kn<en.length;kn++){var Tn=en[kn];if(kn>=1){var On=en[kn-1];if(!bp(Tn,On)){Ot.vertexLength+4>vn.MAX_VERTEX_ARRAY_LENGTH&&(Ot=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Dn=Tn.sub(On)._perp()._unit(),jn=On.dist(Tn);rn+jn>32768&&(rn=0),fu(this.layoutVertexArray,Tn.x,Tn.y,Dn.x,Dn.y,0,0,rn),fu(this.layoutVertexArray,Tn.x,Tn.y,Dn.x,Dn.y,0,1,rn),rn+=jn,fu(this.layoutVertexArray,On.x,On.y,Dn.x,Dn.y,0,0,rn),fu(this.layoutVertexArray,On.x,On.y,Dn.x,Dn.y,0,1,rn);var Zn=Ot.vertexLength;this.indexArray.emplaceBack(Zn,Zn+2,Zn+1),this.indexArray.emplaceBack(Zn+1,Zn+2,Zn+3),Ot.vertexLength+=4,Ot.primitiveLength+=2}}}}if(Ot.vertexLength+st>vn.MAX_VERTEX_ARRAY_LENGTH&&(Ot=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray)),xp[A.type]==="Polygon"){for(var $n=[],pr=[],sr=Ot.vertexLength,gr=0,_r=Ke;gr<_r.length;gr+=1){var Dr=_r[gr];if(Dr.length!==0){Dr!==Ke[0]&&pr.push($n.length/2);for(var kr=0;kr<Dr.length;kr++){var Or=Dr[kr];fu(this.layoutVertexArray,Or.x,Or.y,0,0,1,1,0),$n.push(Or.x),$n.push(Or.y)}}}for(var Er=Tc($n,pr),wr=0;wr<Er.length;wr+=3)this.indexArray.emplaceBack(sr+Er[wr],sr+Er[wr+2],sr+Er[wr+1]);Ot.primitiveLength+=Er.length/3,Ot.vertexLength+=st}}var jr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,Se,le)},xr("FillExtrusionBucket",As,{omit:["layers","features"]});var _p={paint:new Wi({"fill-extrusion-opacity":new Tr(De["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ar(De["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tr(De["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tr(De["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ls(De["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ar(De["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ar(De["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tr(De["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},wp=function(A){function I(Z){A.call(this,Z,_p)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(Z){return new As(Z)},I.prototype.queryRadius=function(){return zu(this.paint.get("fill-extrusion-translate"))},I.prototype.is3D=function(){return!0},I.prototype.queryIntersectsFeature=function(Z,le,Se,Pe,je,Ke,st,yt){var _t=Ru(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ke.angle,st),Ot=this.paint.get("fill-extrusion-height").evaluate(le,Se),Bt=this.paint.get("fill-extrusion-base").evaluate(le,Se),zt=function(rn,kn,Tn,On){for(var Dn=[],jn=0,Zn=rn;jn<Zn.length;jn+=1){var $n=Zn[jn],pr=[$n.x,$n.y,On,1];Bu(pr,pr,kn),Dn.push(new t(pr[0]/pr[3],pr[1]/pr[3]))}return Dn}(_t,yt,0,0),en=function(rn,kn,Tn,On){for(var Dn=[],jn=[],Zn=On[8]*kn,$n=On[9]*kn,pr=On[10]*kn,sr=On[11]*kn,gr=On[8]*Tn,_r=On[9]*Tn,Dr=On[10]*Tn,kr=On[11]*Tn,Or=0,Er=rn;Or<Er.length;Or+=1){for(var wr=[],jr=[],zr=0,hi=Er[Or];zr<hi.length;zr+=1){var Pr=hi[zr],ii=Pr.x,vi=Pr.y,yi=On[0]*ii+On[4]*vi+On[12],xi=On[1]*ii+On[5]*vi+On[13],pi=On[2]*ii+On[6]*vi+On[14],na=On[3]*ii+On[7]*vi+On[15],Mi=pi+pr,ua=na+sr,ka=yi+gr,ma=xi+_r,Ua=pi+Dr,ya=na+kr,aa=new t((yi+Zn)/ua,(xi+$n)/ua);aa.z=Mi/ua,wr.push(aa);var xa=new t(ka/ya,ma/ya);xa.z=Ua/ya,jr.push(xa)}Dn.push(wr),jn.push(jr)}return[Dn,jn]}(Pe,Bt,Ot,yt);return function(rn,kn,Tn){var On=1/0;Iu(Tn,kn)&&(On=_f(Tn,kn[0]));for(var Dn=0;Dn<kn.length;Dn++)for(var jn=kn[Dn],Zn=rn[Dn],$n=0;$n<jn.length-1;$n++){var pr=jn[$n],sr=jn[$n+1],gr=Zn[$n],_r=[pr,sr,Zn[$n+1],gr,pr];ja(Tn,_r)&&(On=Math.min(On,_f(Tn,_r)))}return On!==1/0&&On}(en[0],en[1],zt)},I}(Xi);function hu(A,I){return A.x*I.x+A.y*I.y}function _f(A,I){if(A.length===1){for(var Z,le=0,Se=I[le++];!Z||Se.equals(Z);)if(!(Z=I[le++]))return 1/0;for(;le<I.length;le++){var Pe=I[le],je=A[0],Ke=Z.sub(Se),st=Pe.sub(Se),yt=je.sub(Se),_t=hu(Ke,Ke),Ot=hu(Ke,st),Bt=hu(st,st),zt=hu(yt,Ke),en=hu(yt,st),rn=_t*Bt-Ot*Ot,kn=(Bt*zt-Ot*en)/rn,Tn=(_t*en-Ot*zt)/rn,On=1-kn-Tn,Dn=Se.z*On+Z.z*kn+Pe.z*Tn;if(isFinite(Dn))return Dn}return 1/0}for(var jn=1/0,Zn=0,$n=I;Zn<$n.length;Zn+=1){var pr=$n[Zn];jn=Math.min(jn,pr.z)}return jn}var wf=zi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Tp=Rl.VectorTileFeature.types,kp=Math.cos(Math.PI/180*37.5),Tf=Math.pow(2,14)/.5,eo=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qo,this.indexArray=new $,this.programConfigurations=new fi(wf,A.layers,A.zoom),this.segments=new vn,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};eo.prototype.populate=function(A,I,Z){this.hasPattern=Ec("line",this.layers,I);for(var le=this.layers[0].layout.get("line-sort-key"),Se=[],Pe=0,je=A;Pe<je.length;Pe+=1){var Ke=je[Pe],st=Ke.feature,yt=Ke.id,_t=Ke.index,Ot=Ke.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,zt={type:st.type,id:yt,properties:st.properties,geometry:Bt?Ca(st):[]};if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),zt,Z)){Bt||(zt.geometry=Ca(st));var en=le?le.evaluate(zt,{},Z):void 0,rn={id:yt,properties:st.properties,type:st.type,sourceLayerIndex:Ot,index:_t,geometry:zt.geometry,patterns:{},sortKey:en};Se.push(rn)}}le&&Se.sort(function(gr,_r){return gr.sortKey-_r.sortKey});for(var kn=0,Tn=Se;kn<Tn.length;kn+=1){var On=Tn[kn],Dn=On,jn=Dn.geometry,Zn=Dn.index,$n=Dn.sourceLayerIndex;if(this.hasPattern){var pr=Lc("line",this.layers,On,this.zoom,I);this.patternFeatures.push(pr)}else this.addFeature(On,jn,Zn,Z,{});var sr=A[Zn].feature;I.featureIndex.insert(sr,jn,Zn,$n,this.index)}},eo.prototype.update=function(A,I,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Z)},eo.prototype.addFeatures=function(A,I,Z){for(var le=0,Se=this.patternFeatures;le<Se.length;le+=1){var Pe=Se[le];this.addFeature(Pe,Pe.geometry,Pe.index,I,Z)}},eo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},eo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},eo.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,wf),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},eo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},eo.prototype.addFeature=function(A,I,Z,le,Se){for(var Pe=this.layers[0].layout,je=Pe.get("line-join").evaluate(A,{}),Ke=Pe.get("line-cap"),st=Pe.get("line-miter-limit"),yt=Pe.get("line-round-limit"),_t=0,Ot=I;_t<Ot.length;_t+=1){var Bt=Ot[_t];this.addLine(Bt,A,je,Ke,st,yt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,Se,le)},eo.prototype.addLine=function(A,I,Z,le,Se,Pe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,I.properties&&I.properties.hasOwnProperty("mapbox_clip_start")&&I.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+I.properties.mapbox_clip_start,this.clipEnd=+I.properties.mapbox_clip_end;for(var je=0;je<A.length-1;je++)this.totalDistance+=A[je].dist(A[je+1]);this.updateScaledDistance()}for(var Ke=Tp[I.type]==="Polygon",st=A.length;st>=2&&A[st-1].equals(A[st-2]);)st--;for(var yt=0;yt<st-1&&A[yt].equals(A[yt+1]);)yt++;if(!(st<(Ke?3:2))){Z==="bevel"&&(Se=1.05);var _t,Ot=this.overscaling<=16?15*Wr/(512*this.overscaling):0,Bt=this.segments.prepareSegment(10*st,this.layoutVertexArray,this.indexArray),zt=void 0,en=void 0,rn=void 0,kn=void 0;this.e1=this.e2=-1,Ke&&(_t=A[st-2],kn=A[yt].sub(_t)._unit()._perp());for(var Tn=yt;Tn<st;Tn++)if(!(en=Tn===st-1?Ke?A[yt+1]:void 0:A[Tn+1])||!A[Tn].equals(en)){kn&&(rn=kn),_t&&(zt=_t),_t=A[Tn],kn=en?en.sub(_t)._unit()._perp():rn;var On=(rn=rn||kn).add(kn);On.x===0&&On.y===0||On._unit();var Dn=rn.x*kn.x+rn.y*kn.y,jn=On.x*kn.x+On.y*kn.y,Zn=jn!==0?1/jn:1/0,$n=2*Math.sqrt(2-2*jn),pr=jn<kp&&zt&&en,sr=rn.x*kn.y-rn.y*kn.x>0;if(pr&&Tn>yt){var gr=_t.dist(zt);if(gr>2*Ot){var _r=_t.sub(_t.sub(zt)._mult(Ot/gr)._round());this.updateDistance(zt,_r),this.addCurrentVertex(_r,rn,0,0,Bt),zt=_r}}var Dr=zt&&en,kr=Dr?Z:Ke?"butt":le;if(Dr&&kr==="round"&&(Zn<Pe?kr="miter":Zn<=2&&(kr="fakeround")),kr==="miter"&&Zn>Se&&(kr="bevel"),kr==="bevel"&&(Zn>2&&(kr="flipbevel"),Zn<Se&&(kr="miter")),zt&&this.updateDistance(zt,_t),kr==="miter")On._mult(Zn),this.addCurrentVertex(_t,On,0,0,Bt);else if(kr==="flipbevel"){if(Zn>100)On=kn.mult(-1);else{var Or=Zn*rn.add(kn).mag()/rn.sub(kn).mag();On._perp()._mult(Or*(sr?-1:1))}this.addCurrentVertex(_t,On,0,0,Bt),this.addCurrentVertex(_t,On.mult(-1),0,0,Bt)}else if(kr==="bevel"||kr==="fakeround"){var Er=-Math.sqrt(Zn*Zn-1),wr=sr?Er:0,jr=sr?0:Er;if(zt&&this.addCurrentVertex(_t,rn,wr,jr,Bt),kr==="fakeround")for(var zr=Math.round(180*$n/Math.PI/20),hi=1;hi<zr;hi++){var Pr=hi/zr;if(Pr!==.5){var ii=Pr-.5;Pr+=Pr*ii*(Pr-1)*((1.0904+Dn*(Dn*(3.55645-1.43519*Dn)-3.2452))*ii*ii+(.848013+Dn*(.215638*Dn-1.06021)))}var vi=kn.sub(rn)._mult(Pr)._add(rn)._unit()._mult(sr?-1:1);this.addHalfVertex(_t,vi.x,vi.y,!1,sr,0,Bt)}en&&this.addCurrentVertex(_t,kn,-wr,-jr,Bt)}else if(kr==="butt")this.addCurrentVertex(_t,On,0,0,Bt);else if(kr==="square"){var yi=zt?1:-1;this.addCurrentVertex(_t,On,yi,yi,Bt)}else kr==="round"&&(zt&&(this.addCurrentVertex(_t,rn,0,0,Bt),this.addCurrentVertex(_t,rn,1,1,Bt,!0)),en&&(this.addCurrentVertex(_t,kn,-1,-1,Bt,!0),this.addCurrentVertex(_t,kn,0,0,Bt)));if(pr&&Tn<st-1){var xi=_t.dist(en);if(xi>2*Ot){var pi=_t.add(en.sub(_t)._mult(Ot/xi)._round());this.updateDistance(_t,pi),this.addCurrentVertex(pi,kn,0,0,Bt),_t=pi}}}}},eo.prototype.addCurrentVertex=function(A,I,Z,le,Se,Pe){Pe===void 0&&(Pe=!1);var je=I.x+I.y*Z,Ke=I.y-I.x*Z,st=-I.x+I.y*le,yt=-I.y-I.x*le;this.addHalfVertex(A,je,Ke,Pe,!1,Z,Se),this.addHalfVertex(A,st,yt,Pe,!0,-le,Se),this.distance>Tf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(A,I,Z,le,Se,Pe))},eo.prototype.addHalfVertex=function(A,I,Z,le,Se,Pe,je){var Ke=A.x,st=A.y,yt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((Ke<<1)+(le?1:0),(st<<1)+(Se?1:0),Math.round(63*I)+128,Math.round(63*Z)+128,1+(Pe===0?0:Pe<0?-1:1)|(63&yt)<<2,yt>>6);var _t=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_t),je.primitiveLength++),Se?this.e2=_t:this.e1=_t},eo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Tf-1):this.distance},eo.prototype.updateDistance=function(A,I){this.distance+=A.dist(I),this.updateScaledDistance()},xr("LineBucket",eo,{omit:["layers","patternFeatures"]});var Ap=new Wi({"line-cap":new Tr(De.layout_line["line-cap"]),"line-join":new Ar(De.layout_line["line-join"]),"line-miter-limit":new Tr(De.layout_line["line-miter-limit"]),"line-round-limit":new Tr(De.layout_line["line-round-limit"]),"line-sort-key":new Ar(De.layout_line["line-sort-key"])}),kf={paint:new Wi({"line-opacity":new Ar(De.paint_line["line-opacity"]),"line-color":new Ar(De.paint_line["line-color"]),"line-translate":new Tr(De.paint_line["line-translate"]),"line-translate-anchor":new Tr(De.paint_line["line-translate-anchor"]),"line-width":new Ar(De.paint_line["line-width"]),"line-gap-width":new Ar(De.paint_line["line-gap-width"]),"line-offset":new Ar(De.paint_line["line-offset"]),"line-blur":new Ar(De.paint_line["line-blur"]),"line-dasharray":new ia(De.paint_line["line-dasharray"]),"line-pattern":new ls(De.paint_line["line-pattern"]),"line-gradient":new Po(De.paint_line["line-gradient"])}),layout:Ap},Mp=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.possiblyEvaluate=function(Z,le){return le=new Xr(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),A.prototype.possiblyEvaluate.call(this,Z,le)},I.prototype.evaluate=function(Z,le,Se,Pe){return le=u({},le,{zoom:Math.floor(le.zoom)}),A.prototype.evaluate.call(this,Z,le,Se,Pe)},I}(Ar),Af=new Mp(kf.paint.properties["line-width"].specification);Af.useIntegerZoom=!0;var Sp=function(A){function I(Z){A.call(this,Z,kf)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="line-gradient"&&this._updateGradient()},I.prototype._updateGradient=function(){var Z=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=cf(Z,"lineProgress"),this.gradientTexture=null},I.prototype.recalculate=function(Z,le){A.prototype.recalculate.call(this,Z,le),this.paint._values["line-floorwidth"]=Af.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},I.prototype.createBucket=function(Z){return new eo(Z)},I.prototype.queryRadius=function(Z){var le=Z,Se=Mf(ou("line-width",this,le),ou("line-gap-width",this,le)),Pe=ou("line-offset",this,le);return Se/2+Math.abs(Pe)+zu(this.paint.get("line-translate"))},I.prototype.queryIntersectsFeature=function(Z,le,Se,Pe,je,Ke,st){var yt=Ru(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ke.angle,st),_t=st/2*Mf(this.paint.get("line-width").evaluate(le,Se),this.paint.get("line-gap-width").evaluate(le,Se)),Ot=this.paint.get("line-offset").evaluate(le,Se);return Ot&&(Pe=function(Bt,zt){for(var en=[],rn=new t(0,0),kn=0;kn<Bt.length;kn++){for(var Tn=Bt[kn],On=[],Dn=0;Dn<Tn.length;Dn++){var jn=Tn[Dn-1],Zn=Tn[Dn],$n=Tn[Dn+1],pr=Dn===0?rn:Zn.sub(jn)._unit()._perp(),sr=Dn===Tn.length-1?rn:$n.sub(Zn)._unit()._perp(),gr=pr._add(sr)._unit(),_r=gr.x*sr.x+gr.y*sr.y;gr._mult(1/_r),On.push(gr._mult(zt)._add(Zn))}en.push(On)}return en}(Pe,Ot*st)),function(Bt,zt,en){for(var rn=0;rn<zt.length;rn++){var kn=zt[rn];if(Bt.length>=3){for(var Tn=0;Tn<kn.length;Tn++)if(pl(Bt,kn[Tn]))return!0}if(xc(Bt,kn,en))return!0}return!1}(yt,Pe,_t)},I.prototype.isTileClipped=function(){return!0},I}(Xi);function Mf(A,I){return I>0?I+2*A:A}var Pc=zi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ep=zi([{name:"a_projected_pos",components:3,type:"Float32"}],4),Lp=(zi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),zi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Sf=(zi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Cp=zi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Pp(A,I,Z){return A.sections.forEach(function(le){le.text=function(Se,Pe,je){var Ke=Pe.layout.get("text-transform").evaluate(je,{});return Ke==="uppercase"?Se=Se.toLocaleUpperCase():Ke==="lowercase"&&(Se=Se.toLocaleLowerCase()),_i.applyArabicShaping&&(Se=_i.applyArabicShaping(Se)),Se}(le.text,I,Z)}),A}zi([{name:"triangle",components:3,type:"Uint16"}]),zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),zi([{type:"Float32",name:"offsetX"}]),zi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var pu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},va=24,Ef=function(A,I,Z,le,Se){var Pe,je,Ke=8*Se-le-1,st=(1<<Ke)-1,yt=st>>1,_t=-7,Ot=Z?Se-1:0,Bt=Z?-1:1,zt=A[I+Ot];for(Ot+=Bt,Pe=zt&(1<<-_t)-1,zt>>=-_t,_t+=Ke;_t>0;Pe=256*Pe+A[I+Ot],Ot+=Bt,_t-=8);for(je=Pe&(1<<-_t)-1,Pe>>=-_t,_t+=le;_t>0;je=256*je+A[I+Ot],Ot+=Bt,_t-=8);if(Pe===0)Pe=1-yt;else{if(Pe===st)return je?NaN:1/0*(zt?-1:1);je+=Math.pow(2,le),Pe-=yt}return(zt?-1:1)*je*Math.pow(2,Pe-le)},Lf=function(A,I,Z,le,Se,Pe){var je,Ke,st,yt=8*Pe-Se-1,_t=(1<<yt)-1,Ot=_t>>1,Bt=Se===23?Math.pow(2,-24)-Math.pow(2,-77):0,zt=le?0:Pe-1,en=le?1:-1,rn=I<0||I===0&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(Ke=isNaN(I)?1:0,je=_t):(je=Math.floor(Math.log(I)/Math.LN2),I*(st=Math.pow(2,-je))<1&&(je--,st*=2),(I+=je+Ot>=1?Bt/st:Bt*Math.pow(2,1-Ot))*st>=2&&(je++,st/=2),je+Ot>=_t?(Ke=0,je=_t):je+Ot>=1?(Ke=(I*st-1)*Math.pow(2,Se),je+=Ot):(Ke=I*Math.pow(2,Ot-1)*Math.pow(2,Se),je=0));Se>=8;A[Z+zt]=255&Ke,zt+=en,Ke/=256,Se-=8);for(je=je<<Se|Ke,yt+=Se;yt>0;A[Z+zt]=255&je,zt+=en,je/=256,yt-=8);A[Z+zt-en]|=128*rn},Hu=gi;function gi(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}gi.Varint=0,gi.Fixed64=1,gi.Bytes=2,gi.Fixed32=5;var Oc=4294967296,Cf=1/Oc,Pf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $s(A){return A.type===gi.Bytes?A.readVarint()+A.pos:A.pos+1}function Fl(A,I,Z){return Z?4294967296*I+(A>>>0):4294967296*(I>>>0)+(A>>>0)}function Of(A,I,Z){var le=I<=16383?1:I<=2097151?2:I<=268435455?3:Math.floor(Math.log(I)/(7*Math.LN2));Z.realloc(le);for(var Se=Z.pos-1;Se>=A;Se--)Z.buf[Se+le]=Z.buf[Se]}function Op(A,I){for(var Z=0;Z<A.length;Z++)I.writeVarint(A[Z])}function Ip(A,I){for(var Z=0;Z<A.length;Z++)I.writeSVarint(A[Z])}function Dp(A,I){for(var Z=0;Z<A.length;Z++)I.writeFloat(A[Z])}function zp(A,I){for(var Z=0;Z<A.length;Z++)I.writeDouble(A[Z])}function Rp(A,I){for(var Z=0;Z<A.length;Z++)I.writeBoolean(A[Z])}function Fp(A,I){for(var Z=0;Z<A.length;Z++)I.writeFixed32(A[Z])}function Bp(A,I){for(var Z=0;Z<A.length;Z++)I.writeSFixed32(A[Z])}function Np(A,I){for(var Z=0;Z<A.length;Z++)I.writeFixed64(A[Z])}function jp(A,I){for(var Z=0;Z<A.length;Z++)I.writeSFixed64(A[Z])}function qu(A,I){return(A[I]|A[I+1]<<8|A[I+2]<<16)+16777216*A[I+3]}function Bl(A,I,Z){A[Z]=I,A[Z+1]=I>>>8,A[Z+2]=I>>>16,A[Z+3]=I>>>24}function If(A,I){return(A[I]|A[I+1]<<8|A[I+2]<<16)+(A[I+3]<<24)}gi.prototype={destroy:function(){this.buf=null},readFields:function(A,I,Z){for(Z=Z||this.length;this.pos<Z;){var le=this.readVarint(),Se=le>>3,Pe=this.pos;this.type=7&le,A(Se,I,this),this.pos===Pe&&this.skip(le)}return I},readMessage:function(A,I){return this.readFields(A,I,this.readVarint()+this.pos)},readFixed32:function(){var A=qu(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=If(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=qu(this.buf,this.pos)+qu(this.buf,this.pos+4)*Oc;return this.pos+=8,A},readSFixed64:function(){var A=qu(this.buf,this.pos)+If(this.buf,this.pos+4)*Oc;return this.pos+=8,A},readFloat:function(){var A=Ef(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Ef(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var I,Z,le=this.buf;return I=127&(Z=le[this.pos++]),Z<128?I:(I|=(127&(Z=le[this.pos++]))<<7,Z<128?I:(I|=(127&(Z=le[this.pos++]))<<14,Z<128?I:(I|=(127&(Z=le[this.pos++]))<<21,Z<128?I:function(Se,Pe,je){var Ke,st,yt=je.buf;if(Ke=(112&(st=yt[je.pos++]))>>4,st<128||(Ke|=(127&(st=yt[je.pos++]))<<3,st<128)||(Ke|=(127&(st=yt[je.pos++]))<<10,st<128)||(Ke|=(127&(st=yt[je.pos++]))<<17,st<128)||(Ke|=(127&(st=yt[je.pos++]))<<24,st<128)||(Ke|=(1&(st=yt[je.pos++]))<<31,st<128))return Fl(Se,Ke,Pe);throw new Error("Expected varint not more than 10 bytes")}(I|=(15&(Z=le[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,I=this.pos;return this.pos=A,A-I>=12&&Pf?function(Z,le,Se){return Pf.decode(Z.subarray(le,Se))}(this.buf,I,A):function(Z,le,Se){for(var Pe="",je=le;je<Se;){var Ke,st,yt,_t=Z[je],Ot=null,Bt=_t>239?4:_t>223?3:_t>191?2:1;if(je+Bt>Se)break;Bt===1?_t<128&&(Ot=_t):Bt===2?(192&(Ke=Z[je+1]))==128&&(Ot=(31&_t)<<6|63&Ke)<=127&&(Ot=null):Bt===3?(Ke=Z[je+1],st=Z[je+2],(192&Ke)==128&&(192&st)==128&&((Ot=(15&_t)<<12|(63&Ke)<<6|63&st)<=2047||Ot>=55296&&Ot<=57343)&&(Ot=null)):Bt===4&&(Ke=Z[je+1],st=Z[je+2],yt=Z[je+3],(192&Ke)==128&&(192&st)==128&&(192&yt)==128&&((Ot=(15&_t)<<18|(63&Ke)<<12|(63&st)<<6|63&yt)<=65535||Ot>=1114112)&&(Ot=null)),Ot===null?(Ot=65533,Bt=1):Ot>65535&&(Ot-=65536,Pe+=String.fromCharCode(Ot>>>10&1023|55296),Ot=56320|1023&Ot),Pe+=String.fromCharCode(Ot),je+=Bt}return Pe}(this.buf,I,A)},readBytes:function(){var A=this.readVarint()+this.pos,I=this.buf.subarray(this.pos,A);return this.pos=A,I},readPackedVarint:function(A,I){if(this.type!==gi.Bytes)return A.push(this.readVarint(I));var Z=$s(this);for(A=A||[];this.pos<Z;)A.push(this.readVarint(I));return A},readPackedSVarint:function(A){if(this.type!==gi.Bytes)return A.push(this.readSVarint());var I=$s(this);for(A=A||[];this.pos<I;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==gi.Bytes)return A.push(this.readBoolean());var I=$s(this);for(A=A||[];this.pos<I;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==gi.Bytes)return A.push(this.readFloat());var I=$s(this);for(A=A||[];this.pos<I;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==gi.Bytes)return A.push(this.readDouble());var I=$s(this);for(A=A||[];this.pos<I;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==gi.Bytes)return A.push(this.readFixed32());var I=$s(this);for(A=A||[];this.pos<I;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==gi.Bytes)return A.push(this.readSFixed32());var I=$s(this);for(A=A||[];this.pos<I;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==gi.Bytes)return A.push(this.readFixed64());var I=$s(this);for(A=A||[];this.pos<I;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==gi.Bytes)return A.push(this.readSFixed64());var I=$s(this);for(A=A||[];this.pos<I;)A.push(this.readSFixed64());return A},skip:function(A){var I=7&A;if(I===gi.Varint)for(;this.buf[this.pos++]>127;);else if(I===gi.Bytes)this.pos=this.readVarint()+this.pos;else if(I===gi.Fixed32)this.pos+=4;else{if(I!==gi.Fixed64)throw new Error("Unimplemented type: "+I);this.pos+=8}},writeTag:function(A,I){this.writeVarint(A<<3|I)},realloc:function(A){for(var I=this.length||16;I<this.pos+A;)I*=2;if(I!==this.length){var Z=new Uint8Array(I);Z.set(this.buf),this.buf=Z,this.length=I}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Bl(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Bl(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Bl(this.buf,-1&A,this.pos),Bl(this.buf,Math.floor(A*Cf),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Bl(this.buf,-1&A,this.pos),Bl(this.buf,Math.floor(A*Cf),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(I,Z){var le,Se;if(I>=0?(le=I%4294967296|0,Se=I/4294967296|0):(Se=~(-I/4294967296),4294967295^(le=~(-I%4294967296))?le=le+1|0:(le=0,Se=Se+1|0)),I>=18446744073709552e3||I<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(Pe,je,Ke){Ke.buf[Ke.pos++]=127&Pe|128,Pe>>>=7,Ke.buf[Ke.pos++]=127&Pe|128,Pe>>>=7,Ke.buf[Ke.pos++]=127&Pe|128,Pe>>>=7,Ke.buf[Ke.pos++]=127&Pe|128,Pe>>>=7,Ke.buf[Ke.pos]=127&Pe}(le,0,Z),function(Pe,je){var Ke=(7&Pe)<<4;je.buf[je.pos++]|=Ke|((Pe>>>=3)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe)))))}(Se,Z)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var I=this.pos;this.pos=function(le,Se,Pe){for(var je,Ke,st=0;st<Se.length;st++){if((je=Se.charCodeAt(st))>55295&&je<57344){if(!Ke){je>56319||st+1===Se.length?(le[Pe++]=239,le[Pe++]=191,le[Pe++]=189):Ke=je;continue}if(je<56320){le[Pe++]=239,le[Pe++]=191,le[Pe++]=189,Ke=je;continue}je=Ke-55296<<10|je-56320|65536,Ke=null}else Ke&&(le[Pe++]=239,le[Pe++]=191,le[Pe++]=189,Ke=null);je<128?le[Pe++]=je:(je<2048?le[Pe++]=je>>6|192:(je<65536?le[Pe++]=je>>12|224:(le[Pe++]=je>>18|240,le[Pe++]=je>>12&63|128),le[Pe++]=je>>6&63|128),le[Pe++]=63&je|128)}return Pe}(this.buf,A,this.pos);var Z=this.pos-I;Z>=128&&Of(I,Z,this),this.pos=I-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(A){this.realloc(4),Lf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),Lf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var I=A.length;this.writeVarint(I),this.realloc(I);for(var Z=0;Z<I;Z++)this.buf[this.pos++]=A[Z]},writeRawMessage:function(A,I){this.pos++;var Z=this.pos;A(I,this);var le=this.pos-Z;le>=128&&Of(Z,le,this),this.pos=Z-1,this.writeVarint(le),this.pos+=le},writeMessage:function(A,I,Z){this.writeTag(A,gi.Bytes),this.writeRawMessage(I,Z)},writePackedVarint:function(A,I){I.length&&this.writeMessage(A,Op,I)},writePackedSVarint:function(A,I){I.length&&this.writeMessage(A,Ip,I)},writePackedBoolean:function(A,I){I.length&&this.writeMessage(A,Rp,I)},writePackedFloat:function(A,I){I.length&&this.writeMessage(A,Dp,I)},writePackedDouble:function(A,I){I.length&&this.writeMessage(A,zp,I)},writePackedFixed32:function(A,I){I.length&&this.writeMessage(A,Fp,I)},writePackedSFixed32:function(A,I){I.length&&this.writeMessage(A,Bp,I)},writePackedFixed64:function(A,I){I.length&&this.writeMessage(A,Np,I)},writePackedSFixed64:function(A,I){I.length&&this.writeMessage(A,jp,I)},writeBytesField:function(A,I){this.writeTag(A,gi.Bytes),this.writeBytes(I)},writeFixed32Field:function(A,I){this.writeTag(A,gi.Fixed32),this.writeFixed32(I)},writeSFixed32Field:function(A,I){this.writeTag(A,gi.Fixed32),this.writeSFixed32(I)},writeFixed64Field:function(A,I){this.writeTag(A,gi.Fixed64),this.writeFixed64(I)},writeSFixed64Field:function(A,I){this.writeTag(A,gi.Fixed64),this.writeSFixed64(I)},writeVarintField:function(A,I){this.writeTag(A,gi.Varint),this.writeVarint(I)},writeSVarintField:function(A,I){this.writeTag(A,gi.Varint),this.writeSVarint(I)},writeStringField:function(A,I){this.writeTag(A,gi.Bytes),this.writeString(I)},writeFloatField:function(A,I){this.writeTag(A,gi.Fixed32),this.writeFloat(I)},writeDoubleField:function(A,I){this.writeTag(A,gi.Fixed64),this.writeDouble(I)},writeBooleanField:function(A,I){this.writeVarintField(A,!!I)}};var Ic=3;function Up(A,I,Z){A===1&&Z.readMessage(Vp,I)}function Vp(A,I,Z){if(A===3){var le=Z.readMessage(Hp,{}),Se=le.id,Pe=le.bitmap,je=le.width,Ke=le.height,st=le.left,yt=le.top,_t=le.advance;I.push({id:Se,bitmap:new _l({width:je+2*Ic,height:Ke+2*Ic},Pe),metrics:{width:je,height:Ke,left:st,top:yt,advance:_t}})}}function Hp(A,I,Z){A===1?I.id=Z.readVarint():A===2?I.bitmap=Z.readBytes():A===3?I.width=Z.readVarint():A===4?I.height=Z.readVarint():A===5?I.left=Z.readSVarint():A===6?I.top=Z.readSVarint():A===7&&(I.advance=Z.readVarint())}var Df=Ic;function zf(A){for(var I=0,Z=0,le=0,Se=A;le<Se.length;le+=1){var Pe=Se[le];I+=Pe.w*Pe.h,Z=Math.max(Z,Pe.w)}A.sort(function(rn,kn){return kn.h-rn.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(I/.95)),Z),h:1/0}],Ke=0,st=0,yt=0,_t=A;yt<_t.length;yt+=1)for(var Ot=_t[yt],Bt=je.length-1;Bt>=0;Bt--){var zt=je[Bt];if(!(Ot.w>zt.w||Ot.h>zt.h)){if(Ot.x=zt.x,Ot.y=zt.y,st=Math.max(st,Ot.y+Ot.h),Ke=Math.max(Ke,Ot.x+Ot.w),Ot.w===zt.w&&Ot.h===zt.h){var en=je.pop();Bt<je.length&&(je[Bt]=en)}else Ot.h===zt.h?(zt.x+=Ot.w,zt.w-=Ot.w):Ot.w===zt.w?(zt.y+=Ot.h,zt.h-=Ot.h):(je.push({x:zt.x+Ot.w,y:zt.y,w:zt.w-Ot.w,h:Ot.h}),zt.y+=Ot.h,zt.h-=Ot.h);break}}return{w:Ke,h:st,fill:I/(Ke*st)||0}}var go=1,Gu=function(A,I){var Z=I.pixelRatio,le=I.version,Se=I.stretchX,Pe=I.stretchY,je=I.content;this.paddedRect=A,this.pixelRatio=Z,this.stretchX=Se,this.stretchY=Pe,this.content=je,this.version=le},du={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};du.tl.get=function(){return[this.paddedRect.x+go,this.paddedRect.y+go]},du.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-go,this.paddedRect.y+this.paddedRect.h-go]},du.tlbr.get=function(){return this.tl.concat(this.br)},du.displaySize.get=function(){return[(this.paddedRect.w-2*go)/this.pixelRatio,(this.paddedRect.h-2*go)/this.pixelRatio]},Object.defineProperties(Gu.prototype,du);var gu=function(A,I){var Z={},le={};this.haveRenderCallbacks=[];var Se=[];this.addImages(A,Z,Se),this.addImages(I,le,Se);var Pe=zf(Se),je=Pe.w,Ke=Pe.h,st=new Qa({width:je||1,height:Ke||1});for(var yt in A){var _t=A[yt],Ot=Z[yt].paddedRect;Qa.copy(_t.data,st,{x:0,y:0},{x:Ot.x+go,y:Ot.y+go},_t.data)}for(var Bt in I){var zt=I[Bt],en=le[Bt].paddedRect,rn=en.x+go,kn=en.y+go,Tn=zt.data.width,On=zt.data.height;Qa.copy(zt.data,st,{x:0,y:0},{x:rn,y:kn},zt.data),Qa.copy(zt.data,st,{x:0,y:On-1},{x:rn,y:kn-1},{width:Tn,height:1}),Qa.copy(zt.data,st,{x:0,y:0},{x:rn,y:kn+On},{width:Tn,height:1}),Qa.copy(zt.data,st,{x:Tn-1,y:0},{x:rn-1,y:kn},{width:1,height:On}),Qa.copy(zt.data,st,{x:0,y:0},{x:rn+Tn,y:kn},{width:1,height:On})}this.image=st,this.iconPositions=Z,this.patternPositions=le};gu.prototype.addImages=function(A,I,Z){for(var le in A){var Se=A[le],Pe={x:0,y:0,w:Se.data.width+2*go,h:Se.data.height+2*go};Z.push(Pe),I[le]=new Gu(Pe,Se),Se.hasRenderCallback&&this.haveRenderCallbacks.push(le)}},gu.prototype.patchUpdatedImages=function(A,I){for(var Z in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],A.getImage(Z),I),this.patchUpdatedImage(this.patternPositions[Z],A.getImage(Z),I)},gu.prototype.patchUpdatedImage=function(A,I,Z){if(A&&I&&A.version!==I.version){A.version=I.version;var le=A.tl,Se=le[0],Pe=le[1];Z.update(I.data,void 0,{x:Se,y:Pe})}},xr("ImagePosition",Gu),xr("ImageAtlas",gu);var zo={horizontal:1,vertical:2,horizontalOnly:3},vu=-17,Nl=function(){this.scale=1,this.fontStack="",this.imageName=null};Nl.forText=function(A,I){var Z=new Nl;return Z.scale=A||1,Z.fontStack=I,Z},Nl.forImage=function(A){var I=new Nl;return I.imageName=A,I};var Pa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Zu(A,I,Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en,rn){var kn,Tn=Pa.fromFeature(A,Se);Ot===zo.vertical&&Tn.verticalizePunctuation();var On=_i.processBidirectionalText,Dn=_i.processStyledBidirectionalText;if(On&&Tn.sections.length===1){kn=[];for(var jn=0,Zn=On(Tn.toString(),Dc(Tn,yt,Pe,I,le,zt,en));jn<Zn.length;jn+=1){var $n=Zn[jn],pr=new Pa;pr.text=$n,pr.sections=Tn.sections;for(var sr=0;sr<$n.length;sr++)pr.sectionIndex.push(0);kn.push(pr)}}else if(Dn){kn=[];for(var gr=0,_r=Dn(Tn.text,Tn.sectionIndex,Dc(Tn,yt,Pe,I,le,zt,en));gr<_r.length;gr+=1){var Dr=_r[gr],kr=new Pa;kr.text=Dr[0],kr.sectionIndex=Dr[1],kr.sections=Tn.sections,kn.push(kr)}}else kn=function(wr,jr){for(var zr=[],hi=wr.text,Pr=0,ii=0,vi=jr;ii<vi.length;ii+=1){var yi=vi[ii];zr.push(wr.substring(Pr,yi)),Pr=yi}return Pr<hi.length&&zr.push(wr.substring(Pr,hi.length)),zr}(Tn,Dc(Tn,yt,Pe,I,le,zt,en));var Or=[],Er={positionedLines:Or,text:Tn.toString(),top:_t[1],bottom:_t[1],left:_t[0],right:_t[0],writingMode:Ot,iconsInText:!1,verticalizable:!1};return function(wr,jr,zr,hi,Pr,ii,vi,yi,xi,pi,na,Mi){for(var ua=0,ka=vu,ma=0,Ua=0,ya=yi==="right"?1:yi==="left"?0:.5,aa=0,xa=0,ca=Pr;xa<ca.length;xa+=1){var oa=ca[xa];oa.trim();var Rr=oa.getMaxScale(),qr=(Rr-1)*va,Fi={positionedGlyphs:[],lineOffset:0};wr.positionedLines[aa]=Fi;var ui=Fi.positionedGlyphs,Ci=0;if(oa.length()){for(var ki=0;ki<oa.length();ki++){var Jr=oa.getSection(ki),Bi=oa.getSectionIndex(ki),Va=oa.getCharCode(ki),mo=0,Oa=null,Ss=null,tl=null,fa=va,Es=!(xi===zo.horizontal||!na&&!os(Va)||na&&(Yu[Va]||$i(Va)));if(Jr.imageName){var fs=hi[Jr.imageName];if(!fs)continue;tl=Jr.imageName,wr.iconsInText=wr.iconsInText||!0,Ss=fs.paddedRect;var hs=fs.displaySize;Jr.scale=Jr.scale*va/Mi,Oa={width:hs[0],height:hs[1],left:go,top:-Df,advance:Es?hs[1]:hs[0]},mo=qr+(va-hs[1]*Jr.scale),fa=Oa.advance;var Al=Es?hs[0]*Jr.scale-va*Rr:hs[1]*Jr.scale-va*Rr;Al>0&&Al>Ci&&(Ci=Al)}else{var nc=zr[Jr.fontStack],Ml=nc&&nc[Va];if(Ml&&Ml.rect)Ss=Ml.rect,Oa=Ml.metrics;else{var rc=jr[Jr.fontStack],bu=rc&&rc[Va];if(!bu)continue;Oa=bu.metrics}mo=(Rr-Jr.scale)*va}Es?(wr.verticalizable=!0,ui.push({glyph:Va,imageName:tl,x:ua,y:ka+mo,vertical:Es,scale:Jr.scale,fontStack:Jr.fontStack,sectionIndex:Bi,metrics:Oa,rect:Ss}),ua+=fa*Jr.scale+pi):(ui.push({glyph:Va,imageName:tl,x:ua,y:ka+mo,vertical:Es,scale:Jr.scale,fontStack:Jr.fontStack,sectionIndex:Bi,metrics:Oa,rect:Ss}),ua+=Oa.advance*Jr.scale+pi)}if(ui.length!==0){var qc=ua-pi;ma=Math.max(qc,ma),Gp(ui,0,ui.length-1,ya,Ci)}ua=0;var ic=ii*Rr+Ci;Fi.lineOffset=Math.max(Ci,qr),ka+=ic,Ua=Math.max(ic,Ua),++aa}else ka+=ii,++aa}var Xl=ka-vu,ac=zc(vi),oc=ac.horizontalAlign,_u=ac.verticalAlign;(function(Gc,wu,Sl,Jl,sc,lc,Kl,uc,cc){var Tu=(wu-Sl)*sc,ku=0;ku=lc!==Kl?-uc*Jl-vu:(-Jl*cc+.5)*Kl;for(var El=0,Au=Gc;El<Au.length;El+=1)for(var Ll=0,Mu=Au[El].positionedGlyphs;Ll<Mu.length;Ll+=1){var Su=Mu[Ll];Su.x+=Tu,Su.y+=ku}})(wr.positionedLines,ya,oc,_u,ma,Ua,ii,Xl,Pr.length),wr.top+=-_u*Xl,wr.bottom=wr.top+Xl,wr.left+=-oc*ma,wr.right=wr.left+ma}(Er,I,Z,le,kn,je,Ke,st,Ot,yt,Bt,rn),!function(wr){for(var jr=0,zr=wr;jr<zr.length;jr+=1)if(zr[jr].positionedGlyphs.length!==0)return!1;return!0}(Or)&&Er}Pa.fromFeature=function(A,I){for(var Z=new Pa,le=0;le<A.sections.length;le++){var Se=A.sections[le];Se.image?Z.addImageSection(Se):Z.addTextSection(Se,I)}return Z},Pa.prototype.length=function(){return this.text.length},Pa.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},Pa.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},Pa.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},Pa.prototype.verticalizePunctuation=function(){this.text=function(A){for(var I="",Z=0;Z<A.length;Z++){var le=A.charCodeAt(Z+1)||null,Se=A.charCodeAt(Z-1)||null;le&&ws(le)&&!pu[A[Z+1]]||Se&&ws(Se)&&!pu[A[Z-1]]||!pu[A[Z]]?I+=A[Z]:I+=pu[A[Z]]}return I}(this.text)},Pa.prototype.trim=function(){for(var A=0,I=0;I<this.text.length&&Yu[this.text.charCodeAt(I)];I++)A++;for(var Z=this.text.length,le=this.text.length-1;le>=0&&le>=A&&Yu[this.text.charCodeAt(le)];le--)Z--;this.text=this.text.substring(A,Z),this.sectionIndex=this.sectionIndex.slice(A,Z)},Pa.prototype.substring=function(A,I){var Z=new Pa;return Z.text=this.text.substring(A,I),Z.sectionIndex=this.sectionIndex.slice(A,I),Z.sections=this.sections,Z},Pa.prototype.toString=function(){return this.text},Pa.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(I,Z){return Math.max(I,A.sections[Z].scale)},0)},Pa.prototype.addTextSection=function(A,I){this.text+=A.text,this.sections.push(Nl.forText(A.scale,A.fontStack||I));for(var Z=this.sections.length-1,le=0;le<A.text.length;++le)this.sectionIndex.push(Z)},Pa.prototype.addImageSection=function(A){var I=A.image?A.image.name:"";if(I.length!==0){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(Nl.forImage(I)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},Pa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Yu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},vo={};function Rf(A,I,Z,le,Se,Pe){if(I.imageName){var je=le[I.imageName];return je?je.displaySize[0]*I.scale*va/Pe+Se:0}var Ke=Z[I.fontStack],st=Ke&&Ke[A];return st?st.metrics.advance*I.scale+Se:0}function Ff(A,I,Z,le){var Se=Math.pow(A-I,2);return le?A<I?Se/2:2*Se:Se+Math.abs(Z)*Z}function qp(A,I,Z){var le=0;return A===10&&(le-=1e4),Z&&(le+=150),A!==40&&A!==65288||(le+=50),I!==41&&I!==65289||(le+=50),le}function Bf(A,I,Z,le,Se,Pe){for(var je=null,Ke=Ff(I,Z,Se,Pe),st=0,yt=le;st<yt.length;st+=1){var _t=yt[st],Ot=Ff(I-_t.x,Z,Se,Pe)+_t.badness;Ot<=Ke&&(je=_t,Ke=Ot)}return{index:A,x:I,priorBreak:je,badness:Ke}}function Nf(A){return A?Nf(A.priorBreak).concat(A.index):[]}function Dc(A,I,Z,le,Se,Pe,je){if(Pe!=="point")return[];if(!A)return[];for(var Ke=[],st=function(kn,Tn,On,Dn,jn,Zn){for(var $n=0,pr=0;pr<kn.length();pr++){var sr=kn.getSection(pr);$n+=Rf(kn.getCharCode(pr),sr,Dn,jn,Tn,Zn)}return $n/Math.max(1,Math.ceil($n/On))}(A,I,Z,le,Se,je),yt=A.text.indexOf("")>=0,_t=0,Ot=0;Ot<A.length();Ot++){var Bt=A.getSection(Ot),zt=A.getCharCode(Ot);if(Yu[zt]||(_t+=Rf(zt,Bt,le,Se,I,je)),Ot<A.length()-1){var en=!((rn=zt)<11904||!(vr["Bopomofo Extended"](rn)||vr.Bopomofo(rn)||vr["CJK Compatibility Forms"](rn)||vr["CJK Compatibility Ideographs"](rn)||vr["CJK Compatibility"](rn)||vr["CJK Radicals Supplement"](rn)||vr["CJK Strokes"](rn)||vr["CJK Symbols and Punctuation"](rn)||vr["CJK Unified Ideographs Extension A"](rn)||vr["CJK Unified Ideographs"](rn)||vr["Enclosed CJK Letters and Months"](rn)||vr["Halfwidth and Fullwidth Forms"](rn)||vr.Hiragana(rn)||vr["Ideographic Description Characters"](rn)||vr["Kangxi Radicals"](rn)||vr["Katakana Phonetic Extensions"](rn)||vr.Katakana(rn)||vr["Vertical Forms"](rn)||vr["Yi Radicals"](rn)||vr["Yi Syllables"](rn)));(vo[zt]||en||Bt.imageName)&&Ke.push(Bf(Ot+1,_t,st,Ke,qp(zt,A.getCharCode(Ot+1),en&&yt),!1))}}var rn;return Nf(Bf(A.length(),_t,st,Ke,0,!0))}function zc(A){var I=.5,Z=.5;switch(A){case"right":case"top-right":case"bottom-right":I=1;break;case"left":case"top-left":case"bottom-left":I=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:I,verticalAlign:Z}}function Gp(A,I,Z,le,Se){if(le||Se)for(var Pe=A[Z],je=Pe.metrics.advance*Pe.scale,Ke=(A[Z].x+je)*le,st=I;st<=Z;st++)A[st].x-=Ke,A[st].y+=Se}function jf(A,I,Z,le,Se,Pe){var je,Ke=A.image;if(Ke.content){var st=Ke.content,yt=Ke.pixelRatio||1;je=[st[0]/yt,st[1]/yt,Ke.displaySize[0]-st[2]/yt,Ke.displaySize[1]-st[3]/yt]}var _t,Ot,Bt,zt,en=I.left*Pe,rn=I.right*Pe;Z==="width"||Z==="both"?(zt=Se[0]+en-le[3],Ot=Se[0]+rn+le[1]):Ot=(zt=Se[0]+(en+rn-Ke.displaySize[0])/2)+Ke.displaySize[0];var kn=I.top*Pe,Tn=I.bottom*Pe;return Z==="height"||Z==="both"?(_t=Se[1]+kn-le[0],Bt=Se[1]+Tn+le[2]):Bt=(_t=Se[1]+(kn+Tn-Ke.displaySize[1])/2)+Ke.displaySize[1],{image:Ke,top:_t,right:Ot,bottom:Bt,left:zt,collisionPadding:je}}vo[10]=!0,vo[32]=!0,vo[38]=!0,vo[40]=!0,vo[41]=!0,vo[43]=!0,vo[45]=!0,vo[47]=!0,vo[173]=!0,vo[183]=!0,vo[8203]=!0,vo[8208]=!0,vo[8211]=!0,vo[8231]=!0;var jl=function(A){function I(Z,le,Se,Pe){A.call(this,Z,le),this.angle=Se,Pe!==void 0&&(this.segment=Pe)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.clone=function(){return new I(this.x,this.y,this.angle,this.segment)},I}(t);xr("Anchor",jl);var Ms=128;function Rc(A,I){var Z=I.expression;if(Z.kind==="constant")return{kind:"constant",layoutSize:Z.evaluate(new Xr(A+1))};if(Z.kind==="source")return{kind:"source"};for(var le=Z.zoomStops,Se=Z.interpolationType,Pe=0;Pe<le.length&&le[Pe]<=A;)Pe++;for(var je=Pe=Math.max(0,Pe-1);je<le.length&&le[je]<A+1;)je++;je=Math.min(le.length-1,je);var Ke=le[Pe],st=le[je];return Z.kind==="composite"?{kind:"composite",minZoom:Ke,maxZoom:st,interpolationType:Se}:{kind:"camera",minZoom:Ke,maxZoom:st,minSize:Z.evaluate(new Xr(Ke)),maxSize:Z.evaluate(new Xr(st)),interpolationType:Se}}function Uf(A,I,Z){var le=I.uSize,Se=I.uSizeT,Pe=Z.lowerSize,je=Z.upperSize;return A.kind==="source"?Pe/Ms:A.kind==="composite"?Yn(Pe/Ms,je/Ms,Se):le}function Vf(A,I){var Z=0,le=0;if(A.kind==="constant")le=A.layoutSize;else if(A.kind!=="source"){var Se=A.interpolationType,Pe=A.minZoom,je=A.maxZoom,Ke=Se?o(Si.interpolationFactor(Se,I,Pe,je),0,1):0;A.kind==="camera"?le=Yn(A.minSize,A.maxSize,Ke):Z=Ke}return{uSizeT:Z,uSize:le}}var Zp=Object.freeze({__proto__:null,getSizeData:Rc,evaluateSizeForFeature:Uf,evaluateSizeForZoom:Vf,SIZE_PACK_FACTOR:Ms});function Hf(A,I,Z,le,Se){if(I.segment===void 0)return!0;for(var Pe=I,je=I.segment+1,Ke=0;Ke>-Z/2;){if(--je<0)return!1;Ke-=A[je].dist(Pe),Pe=A[je]}Ke+=A[je].dist(A[je+1]),je++;for(var st=[],yt=0;Ke<Z/2;){var _t=A[je-1],Ot=A[je],Bt=A[je+1];if(!Bt)return!1;var zt=_t.angleTo(Ot)-Ot.angleTo(Bt);for(zt=Math.abs((zt+3*Math.PI)%(2*Math.PI)-Math.PI),st.push({distance:Ke,angleDelta:zt}),yt+=zt;Ke-st[0].distance>le;)yt-=st.shift().angleDelta;if(yt>Se)return!1;je++,Ke+=Ot.dist(Bt)}return!0}function qf(A){for(var I=0,Z=0;Z<A.length-1;Z++)I+=A[Z].dist(A[Z+1]);return I}function Gf(A,I,Z){return A?.6*I*Z:0}function Zf(A,I){return Math.max(A?A.right-A.left:0,I?I.right-I.left:0)}function Yp(A,I,Z,le,Se,Pe){for(var je=Gf(Z,Se,Pe),Ke=Zf(Z,le)*Pe,st=0,yt=qf(A)/2,_t=0;_t<A.length-1;_t++){var Ot=A[_t],Bt=A[_t+1],zt=Ot.dist(Bt);if(st+zt>yt){var en=(yt-st)/zt,rn=Yn(Ot.x,Bt.x,en),kn=Yn(Ot.y,Bt.y,en),Tn=new jl(rn,kn,Bt.angleTo(Ot),_t);return Tn._round(),!je||Hf(A,Tn,Ke,je,I)?Tn:void 0}st+=zt}}function Wp(A,I,Z,le,Se,Pe,je,Ke,st){var yt=Gf(le,Pe,je),_t=Zf(le,Se),Ot=_t*je,Bt=A[0].x===0||A[0].x===st||A[0].y===0||A[0].y===st;return I-Ot<I/4&&(I=Ot+I/4),Yf(A,Bt?I/2*Ke%I:(_t/2+2*Pe)*je*Ke%I,I,yt,Z,Ot,Bt,!1,st)}function Yf(A,I,Z,le,Se,Pe,je,Ke,st){for(var yt=Pe/2,_t=qf(A),Ot=0,Bt=I-Z,zt=[],en=0;en<A.length-1;en++){for(var rn=A[en],kn=A[en+1],Tn=rn.dist(kn),On=kn.angleTo(rn);Bt+Z<Ot+Tn;){var Dn=((Bt+=Z)-Ot)/Tn,jn=Yn(rn.x,kn.x,Dn),Zn=Yn(rn.y,kn.y,Dn);if(jn>=0&&jn<st&&Zn>=0&&Zn<st&&Bt-yt>=0&&Bt+yt<=_t){var $n=new jl(jn,Zn,On,en);$n._round(),le&&!Hf(A,$n,Pe,le,Se)||zt.push($n)}}Ot+=Tn}return Ke||zt.length||je||(zt=Yf(A,Ot/2,Z,le,Se,Pe,je,!0,st)),zt}function Wf(A,I,Z,le,Se){for(var Pe=[],je=0;je<A.length;je++)for(var Ke=A[je],st=void 0,yt=0;yt<Ke.length-1;yt++){var _t=Ke[yt],Ot=Ke[yt+1];_t.x<I&&Ot.x<I||(_t.x<I?_t=new t(I,_t.y+(Ot.y-_t.y)*((I-_t.x)/(Ot.x-_t.x)))._round():Ot.x<I&&(Ot=new t(I,_t.y+(Ot.y-_t.y)*((I-_t.x)/(Ot.x-_t.x)))._round()),_t.y<Z&&Ot.y<Z||(_t.y<Z?_t=new t(_t.x+(Ot.x-_t.x)*((Z-_t.y)/(Ot.y-_t.y)),Z)._round():Ot.y<Z&&(Ot=new t(_t.x+(Ot.x-_t.x)*((Z-_t.y)/(Ot.y-_t.y)),Z)._round()),_t.x>=le&&Ot.x>=le||(_t.x>=le?_t=new t(le,_t.y+(Ot.y-_t.y)*((le-_t.x)/(Ot.x-_t.x)))._round():Ot.x>=le&&(Ot=new t(le,_t.y+(Ot.y-_t.y)*((le-_t.x)/(Ot.x-_t.x)))._round()),_t.y>=Se&&Ot.y>=Se||(_t.y>=Se?_t=new t(_t.x+(Ot.x-_t.x)*((Se-_t.y)/(Ot.y-_t.y)),Se)._round():Ot.y>=Se&&(Ot=new t(_t.x+(Ot.x-_t.x)*((Se-_t.y)/(Ot.y-_t.y)),Se)._round()),st&&_t.equals(st[st.length-1])||(st=[_t],Pe.push(st)),st.push(Ot)))))}return Pe}var Ul=go;function Xf(A,I,Z,le){var Se=[],Pe=A.image,je=Pe.pixelRatio,Ke=Pe.paddedRect.w-2*Ul,st=Pe.paddedRect.h-2*Ul,yt=A.right-A.left,_t=A.bottom-A.top,Ot=Pe.stretchX||[[0,Ke]],Bt=Pe.stretchY||[[0,st]],zt=function(ii,vi){return ii+vi[1]-vi[0]},en=Ot.reduce(zt,0),rn=Bt.reduce(zt,0),kn=Ke-en,Tn=st-rn,On=0,Dn=en,jn=0,Zn=rn,$n=0,pr=kn,sr=0,gr=Tn;if(Pe.content&&le){var _r=Pe.content;On=Wu(Ot,0,_r[0]),jn=Wu(Bt,0,_r[1]),Dn=Wu(Ot,_r[0],_r[2]),Zn=Wu(Bt,_r[1],_r[3]),$n=_r[0]-On,sr=_r[1]-jn,pr=_r[2]-_r[0]-Dn,gr=_r[3]-_r[1]-Zn}var Dr=function(ii,vi,yi,xi){var pi=Xu(ii.stretch-On,Dn,yt,A.left),na=Ju(ii.fixed-$n,pr,ii.stretch,en),Mi=Xu(vi.stretch-jn,Zn,_t,A.top),ua=Ju(vi.fixed-sr,gr,vi.stretch,rn),ka=Xu(yi.stretch-On,Dn,yt,A.left),ma=Ju(yi.fixed-$n,pr,yi.stretch,en),Ua=Xu(xi.stretch-jn,Zn,_t,A.top),ya=Ju(xi.fixed-sr,gr,xi.stretch,rn),aa=new t(pi,Mi),xa=new t(ka,Mi),ca=new t(ka,Ua),oa=new t(pi,Ua),Rr=new t(na/je,ua/je),qr=new t(ma/je,ya/je),Fi=I*Math.PI/180;if(Fi){var ui=Math.sin(Fi),Ci=Math.cos(Fi),ki=[Ci,-ui,ui,Ci];aa._matMult(ki),xa._matMult(ki),oa._matMult(ki),ca._matMult(ki)}var Jr=ii.stretch+ii.fixed,Bi=yi.stretch+yi.fixed,Va=vi.stretch+vi.fixed,mo=xi.stretch+xi.fixed;return{tl:aa,tr:xa,bl:oa,br:ca,tex:{x:Pe.paddedRect.x+Ul+Jr,y:Pe.paddedRect.y+Ul+Va,w:Bi-Jr,h:mo-Va},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Rr,pixelOffsetBR:qr,minFontScaleX:pr/je/yt,minFontScaleY:gr/je/_t,isSDF:Z}};if(le&&(Pe.stretchX||Pe.stretchY))for(var kr=Jf(Ot,kn,en),Or=Jf(Bt,Tn,rn),Er=0;Er<kr.length-1;Er++)for(var wr=kr[Er],jr=kr[Er+1],zr=0;zr<Or.length-1;zr++){var hi=Or[zr],Pr=Or[zr+1];Se.push(Dr(wr,hi,jr,Pr))}else Se.push(Dr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ke+1},{fixed:0,stretch:st+1}));return Se}function Wu(A,I,Z){for(var le=0,Se=0,Pe=A;Se<Pe.length;Se+=1){var je=Pe[Se];le+=Math.max(I,Math.min(Z,je[1]))-Math.max(I,Math.min(Z,je[0]))}return le}function Jf(A,I,Z){for(var le=[{fixed:-Ul,stretch:0}],Se=0,Pe=A;Se<Pe.length;Se+=1){var je=Pe[Se],Ke=je[0],st=je[1],yt=le[le.length-1];le.push({fixed:Ke-yt.stretch,stretch:yt.stretch}),le.push({fixed:Ke-yt.stretch,stretch:yt.stretch+(st-Ke)})}return le.push({fixed:I+Ul,stretch:Z}),le}function Xu(A,I,Z,le){return A/I*Z+le}function Ju(A,I,Z,le){return A-I*Z/le}var Ku=function(A,I,Z,le,Se,Pe,je,Ke,st,yt){if(this.boxStartIndex=A.length,st){var _t=Pe.top,Ot=Pe.bottom,Bt=Pe.collisionPadding;Bt&&(_t-=Bt[1],Ot+=Bt[3]);var zt=Ot-_t;zt>0&&(zt=Math.max(10,zt),this.circleDiameter=zt)}else{var en=Pe.top*je-Ke,rn=Pe.bottom*je+Ke,kn=Pe.left*je-Ke,Tn=Pe.right*je+Ke,On=Pe.collisionPadding;if(On&&(kn-=On[0]*je,en-=On[1]*je,Tn+=On[2]*je,rn+=On[3]*je),yt){var Dn=new t(kn,en),jn=new t(Tn,en),Zn=new t(kn,rn),$n=new t(Tn,rn),pr=yt*Math.PI/180;Dn._rotate(pr),jn._rotate(pr),Zn._rotate(pr),$n._rotate(pr),kn=Math.min(Dn.x,jn.x,Zn.x,$n.x),Tn=Math.max(Dn.x,jn.x,Zn.x,$n.x),en=Math.min(Dn.y,jn.y,Zn.y,$n.y),rn=Math.max(Dn.y,jn.y,Zn.y,$n.y)}A.emplaceBack(I.x,I.y,kn,en,Tn,rn,Z,le,Se)}this.boxEndIndex=A.length},Vl=function(A,I){if(A===void 0&&(A=[]),I===void 0&&(I=Xp),this.data=A,this.length=this.data.length,this.compare=I,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function Xp(A,I){return A<I?-1:A>I?1:0}function Jp(A,I,Z){I===void 0&&(I=1),Z===void 0&&(Z=!1);for(var le=1/0,Se=1/0,Pe=-1/0,je=-1/0,Ke=A[0],st=0;st<Ke.length;st++){var yt=Ke[st];(!st||yt.x<le)&&(le=yt.x),(!st||yt.y<Se)&&(Se=yt.y),(!st||yt.x>Pe)&&(Pe=yt.x),(!st||yt.y>je)&&(je=yt.y)}var _t=Pe-le,Ot=je-Se,Bt=Math.min(_t,Ot),zt=Bt/2,en=new Vl([],Kp);if(Bt===0)return new t(le,Se);for(var rn=le;rn<Pe;rn+=Bt)for(var kn=Se;kn<je;kn+=Bt)en.push(new Hl(rn+zt,kn+zt,zt,A));for(var Tn=function(jn){for(var Zn=0,$n=0,pr=0,sr=jn[0],gr=0,_r=sr.length,Dr=_r-1;gr<_r;Dr=gr++){var kr=sr[gr],Or=sr[Dr],Er=kr.x*Or.y-Or.x*kr.y;$n+=(kr.x+Or.x)*Er,pr+=(kr.y+Or.y)*Er,Zn+=3*Er}return new Hl($n/Zn,pr/Zn,0,jn)}(A),On=en.length;en.length;){var Dn=en.pop();(Dn.d>Tn.d||!Tn.d)&&(Tn=Dn,Z&&console.log("found best %d after %d probes",Math.round(1e4*Dn.d)/1e4,On)),Dn.max-Tn.d<=I||(zt=Dn.h/2,en.push(new Hl(Dn.p.x-zt,Dn.p.y-zt,zt,A)),en.push(new Hl(Dn.p.x+zt,Dn.p.y-zt,zt,A)),en.push(new Hl(Dn.p.x-zt,Dn.p.y+zt,zt,A)),en.push(new Hl(Dn.p.x+zt,Dn.p.y+zt,zt,A)),On+=4)}return Z&&(console.log("num probes: "+On),console.log("best distance: "+Tn.d)),Tn.p}function Kp(A,I){return I.max-A.max}function Hl(A,I,Z,le){this.p=new t(A,I),this.h=Z,this.d=function(Se,Pe){for(var je=!1,Ke=1/0,st=0;st<Pe.length;st++)for(var yt=Pe[st],_t=0,Ot=yt.length,Bt=Ot-1;_t<Ot;Bt=_t++){var zt=yt[_t],en=yt[Bt];zt.y>Se.y!=en.y>Se.y&&Se.x<(en.x-zt.x)*(Se.y-zt.y)/(en.y-zt.y)+zt.x&&(je=!je),Ke=Math.min(Ke,bl(Se,zt,en))}return(je?1:-1)*Math.sqrt(Ke)}(this.p,le),this.max=this.d+this.h*Math.SQRT2}Vl.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Vl.prototype.pop=function(){if(this.length!==0){var A=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),A}},Vl.prototype.peek=function(){return this.data[0]},Vl.prototype._up=function(A){for(var I=this.data,Z=this.compare,le=I[A];A>0;){var Se=A-1>>1,Pe=I[Se];if(Z(le,Pe)>=0)break;I[A]=Pe,A=Se}I[A]=le},Vl.prototype._down=function(A){for(var I=this.data,Z=this.compare,le=this.length>>1,Se=I[A];A<le;){var Pe=1+(A<<1),je=I[Pe],Ke=Pe+1;if(Ke<this.length&&Z(I[Ke],je)<0&&(Pe=Ke,je=I[Ke]),Z(je,Se)>=0)break;I[A]=je,A=Pe}I[A]=Se};var ql=7,Fc=Number.POSITIVE_INFINITY;function Kf(A,I){return I[1]!==Fc?function(Z,le,Se){var Pe=0,je=0;switch(le=Math.abs(le),Se=Math.abs(Se),Z){case"top-right":case"top-left":case"top":je=Se-ql;break;case"bottom-right":case"bottom-left":case"bottom":je=-Se+ql}switch(Z){case"top-right":case"bottom-right":case"right":Pe=-le;break;case"top-left":case"bottom-left":case"left":Pe=le}return[Pe,je]}(A,I[0],I[1]):function(Z,le){var Se=0,Pe=0;le<0&&(le=0);var je=le/Math.sqrt(2);switch(Z){case"top-right":case"top-left":Pe=je-ql;break;case"bottom-right":case"bottom-left":Pe=-je+ql;break;case"bottom":Pe=-le+ql;break;case"top":Pe=le-ql}switch(Z){case"top-right":case"bottom-right":Se=-je;break;case"top-left":case"bottom-left":Se=je;break;case"left":Se=le;break;case"right":Se=-le}return[Se,Pe]}(A,I[0])}function Bc(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var mu=255,vl=mu*Ms;function $f(A,I,Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en){var rn=function(jn,Zn,$n,pr,sr,gr,_r,Dr){for(var kr=pr.layout.get("text-rotate").evaluate(gr,{})*Math.PI/180,Or=[],Er=0,wr=Zn.positionedLines;Er<wr.length;Er+=1)for(var jr=wr[Er],zr=0,hi=jr.positionedGlyphs;zr<hi.length;zr+=1){var Pr=hi[zr];if(Pr.rect){var ii=Pr.rect||{},vi=Df+1,yi=!0,xi=1,pi=0,na=(sr||Dr)&&Pr.vertical,Mi=Pr.metrics.advance*Pr.scale/2;if(Dr&&Zn.verticalizable){var ua=(Pr.scale-1)*va,ka=(va-Pr.metrics.width*Pr.scale)/2;pi=jr.lineOffset/2-(Pr.imageName?-ka:ua)}if(Pr.imageName){var ma=_r[Pr.imageName];yi=ma.sdf,xi=ma.pixelRatio,vi=go/xi}var Ua=sr?[Pr.x+Mi,Pr.y]:[0,0],ya=sr?[0,0]:[Pr.x+Mi+$n[0],Pr.y+$n[1]-pi],aa=[0,0];na&&(aa=ya,ya=[0,0]);var xa=(Pr.metrics.left-vi)*Pr.scale-Mi+ya[0],ca=(-Pr.metrics.top-vi)*Pr.scale+ya[1],oa=xa+ii.w*Pr.scale/xi,Rr=ca+ii.h*Pr.scale/xi,qr=new t(xa,ca),Fi=new t(oa,ca),ui=new t(xa,Rr),Ci=new t(oa,Rr);if(na){var ki=new t(-Mi,Mi-vu),Jr=-Math.PI/2,Bi=va/2-Mi,Va=Pr.imageName?Bi:0,mo=new t(5-vu-Bi,-Va),Oa=new(Function.prototype.bind.apply(t,[null].concat(aa)));qr._rotateAround(Jr,ki)._add(mo)._add(Oa),Fi._rotateAround(Jr,ki)._add(mo)._add(Oa),ui._rotateAround(Jr,ki)._add(mo)._add(Oa),Ci._rotateAround(Jr,ki)._add(mo)._add(Oa)}if(kr){var Ss=Math.sin(kr),tl=Math.cos(kr),fa=[tl,-Ss,Ss,tl];qr._matMult(fa),Fi._matMult(fa),ui._matMult(fa),Ci._matMult(fa)}var Es=new t(0,0),fs=new t(0,0);Or.push({tl:qr,tr:Fi,bl:ui,br:Ci,tex:ii,writingMode:Zn.writingMode,glyphOffset:Ua,sectionIndex:Pr.sectionIndex,isSDF:yi,pixelOffsetTL:Es,pixelOffsetBR:fs,minFontScaleX:0,minFontScaleY:0})}}return Or}(0,Z,Ke,Se,Pe,je,le,A.allowVerticalPlacement),kn=A.textSizeData,Tn=null;kn.kind==="source"?(Tn=[Ms*Se.layout.get("text-size").evaluate(je,{})])[0]>vl&&S(A.layerIds[0]+': Value for "text-size" is >= '+mu+'. Reduce your "text-size".'):kn.kind==="composite"&&((Tn=[Ms*zt.compositeTextSizes[0].evaluate(je,{},en),Ms*zt.compositeTextSizes[1].evaluate(je,{},en)])[0]>vl||Tn[1]>vl)&&S(A.layerIds[0]+': Value for "text-size" is >= '+mu+'. Reduce your "text-size".'),A.addSymbols(A.text,rn,Tn,Ke,Pe,je,yt,I,st.lineStartIndex,st.lineLength,Bt,en);for(var On=0,Dn=_t;On<Dn.length;On+=1)Ot[Dn[On]]=A.text.placedSymbolArray.length-1;return 4*rn.length}function Qf(A){for(var I in A)return A[I];return null}function $p(A,I,Z,le){var Se=A.compareText;if(I in Se){for(var Pe=Se[I],je=Pe.length-1;je>=0;je--)if(le.dist(Pe[je])<Z)return!0}else Se[I]=[];return Se[I].push(le),!1}var Qp=Rl.VectorTileFeature.types,ed=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $u(A,I,Z,le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt){var zt=Ke?Math.min(vl,Math.round(Ke[0])):0,en=Ke?Math.min(vl,Math.round(Ke[1])):0;A.emplaceBack(I,Z,Math.round(32*le),Math.round(32*Se),Pe,je,(zt<<1)+(st?1:0),en,16*yt,16*_t,256*Ot,256*Bt)}function Nc(A,I,Z){A.emplaceBack(I.x,I.y,Z),A.emplaceBack(I.x,I.y,Z),A.emplaceBack(I.x,I.y,Z),A.emplaceBack(I.x,I.y,Z)}function td(A){for(var I=0,Z=A.sections;I<Z.length;I+=1)if(wa(Z[I].text))return!0;return!1}var Gl=function(A){this.layoutVertexArray=new R,this.indexArray=new $,this.programConfigurations=A,this.segments=new vn,this.dynamicLayoutVertexArray=new U,this.opacityVertexArray=new j,this.placedSymbolArray=new Ct};Gl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Gl.prototype.upload=function(A,I,Z,le){this.isEmpty()||(Z&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Pc.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,Ep.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,ed,!0),this.opacityVertexBuffer.itemSize=1),(Z||le)&&this.programConfigurations.upload(A))},Gl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},xr("SymbolBuffers",Gl);var yu=function(A,I,Z){this.layoutVertexArray=new A,this.layoutAttributes=I,this.indexArray=new Z,this.segments=new vn,this.collisionVertexArray=new F};yu.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,Lp.members,!0)},yu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},xr("CollisionBuffers",yu);var ri=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=bc([]),this.placementViewportMatrix=bc([]);var I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rc(this.zoom,I["text-size"]),this.iconSizeData=Rc(this.zoom,I["icon-size"]);var Z=this.layers[0].layout,le=Z.get("symbol-sort-key"),Se=Z.get("symbol-z-order");this.sortFeaturesByKey=Se!=="viewport-y"&&le.constantOr(1)!==void 0;var Pe=Se==="viewport-y"||Se==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Pe&&(Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement")),Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(je){return zo[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=A.sourceID};ri.prototype.createArrays=function(){this.text=new Gl(new fi(Pc.members,this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Gl(new fi(Pc.members,this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new Lt,this.lineVertexArray=new tn,this.symbolInstances=new Ft},ri.prototype.calculateGlyphDependencies=function(A,I,Z,le,Se){for(var Pe=0;Pe<A.length;Pe++)if(I[A.charCodeAt(Pe)]=!0,(Z||le)&&Se){var je=pu[A.charAt(Pe)];je&&(I[je.charCodeAt(0)]=!0)}},ri.prototype.populate=function(A,I,Z){var le=this.layers[0],Se=le.layout,Pe=Se.get("text-font"),je=Se.get("text-field"),Ke=Se.get("icon-image"),st=(je.value.kind!=="constant"||je.value.value instanceof Sn&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&(Pe.value.kind!=="constant"||Pe.value.value.length>0),yt=Ke.value.kind!=="constant"||!!Ke.value.value||Object.keys(Ke.parameters).length>0,_t=Se.get("symbol-sort-key");if(this.features=[],st||yt){for(var Ot=I.iconDependencies,Bt=I.glyphDependencies,zt=I.availableImages,en=new Xr(this.zoom),rn=0,kn=A;rn<kn.length;rn+=1){var Tn=kn[rn],On=Tn.feature,Dn=Tn.id,jn=Tn.index,Zn=Tn.sourceLayerIndex,$n=le._featureFilter.needGeometry,pr={type:On.type,id:Dn,properties:On.properties,geometry:$n?Ca(On):[]};if(le._featureFilter.filter(en,pr,Z)){$n||(pr.geometry=Ca(On));var sr=void 0;if(st){var gr=le.getValueAndResolveTokens("text-field",pr,Z,zt),_r=Sn.factory(gr);td(_r)&&(this.hasRTLText=!0),(!this.hasRTLText||Ja()==="unavailable"||this.hasRTLText&&_i.isParsed())&&(sr=Pp(_r,le,pr))}var Dr=void 0;if(yt){var kr=le.getValueAndResolveTokens("icon-image",pr,Z,zt);Dr=kr instanceof pn?kr:pn.fromString(kr)}if(sr||Dr){var Or=this.sortFeaturesByKey?_t.evaluate(pr,{},Z):void 0,Er={id:Dn,text:sr,icon:Dr,index:jn,sourceLayerIndex:Zn,geometry:Ca(On),properties:On.properties,type:Qp[On.type],sortKey:Or};if(this.features.push(Er),Dr&&(Ot[Dr.name]=!0),sr){var wr=Pe.evaluate(pr,{},Z).join(","),jr=Se.get("text-rotation-alignment")==="map"&&Se.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(zo.vertical)>=0;for(var zr=0,hi=sr.sections;zr<hi.length;zr+=1){var Pr=hi[zr];if(Pr.image)Ot[Pr.image.name]=!0;else{var ii=Fa(sr.toString()),vi=Pr.fontStack||wr,yi=Bt[vi]=Bt[vi]||{};this.calculateGlyphDependencies(Pr.text,yi,jr,this.allowVerticalPlacement,ii)}}}}}}Se.get("symbol-placement")==="line"&&(this.features=function(xi){var pi={},na={},Mi=[],ua=0;function ka(Ci){Mi.push(xi[Ci]),ua++}function ma(Ci,ki,Jr){var Bi=na[Ci];return delete na[Ci],na[ki]=Bi,Mi[Bi].geometry[0].pop(),Mi[Bi].geometry[0]=Mi[Bi].geometry[0].concat(Jr[0]),Bi}function Ua(Ci,ki,Jr){var Bi=pi[ki];return delete pi[ki],pi[Ci]=Bi,Mi[Bi].geometry[0].shift(),Mi[Bi].geometry[0]=Jr[0].concat(Mi[Bi].geometry[0]),Bi}function ya(Ci,ki,Jr){var Bi=Jr?ki[0][ki[0].length-1]:ki[0][0];return Ci+":"+Bi.x+":"+Bi.y}for(var aa=0;aa<xi.length;aa++){var xa=xi[aa],ca=xa.geometry,oa=xa.text?xa.text.toString():null;if(oa){var Rr=ya(oa,ca),qr=ya(oa,ca,!0);if(Rr in na&&qr in pi&&na[Rr]!==pi[qr]){var Fi=Ua(Rr,qr,ca),ui=ma(Rr,qr,Mi[Fi].geometry);delete pi[Rr],delete na[qr],na[ya(oa,Mi[ui].geometry,!0)]=ui,Mi[Fi].geometry=null}else Rr in na?ma(Rr,qr,ca):qr in pi?Ua(Rr,qr,ca):(ka(aa),pi[Rr]=ua-1,na[qr]=ua-1)}else ka(aa)}return Mi.filter(function(Ci){return Ci.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(xi,pi){return xi.sortKey-pi.sortKey})}},ri.prototype.update=function(A,I,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,I,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(A,I,this.layers,Z))},ri.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ri.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ri.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ri.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ri.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ri.prototype.addToLineVertexArray=function(A,I){var Z=this.lineVertexArray.length;if(A.segment!==void 0){for(var le=A.dist(I[A.segment+1]),Se=A.dist(I[A.segment]),Pe={},je=A.segment+1;je<I.length;je++)Pe[je]={x:I[je].x,y:I[je].y,tileUnitDistanceFromAnchor:le},je<I.length-1&&(le+=I[je+1].dist(I[je]));for(var Ke=A.segment||0;Ke>=0;Ke--)Pe[Ke]={x:I[Ke].x,y:I[Ke].y,tileUnitDistanceFromAnchor:Se},Ke>0&&(Se+=I[Ke-1].dist(I[Ke]));for(var st=0;st<I.length;st++){var yt=Pe[st];this.lineVertexArray.emplaceBack(yt.x,yt.y,yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},ri.prototype.addSymbols=function(A,I,Z,le,Se,Pe,je,Ke,st,yt,_t,Ot){for(var Bt=A.indexArray,zt=A.layoutVertexArray,en=A.segments.prepareSegment(4*I.length,zt,Bt,Pe.sortKey),rn=this.glyphOffsetArray.length,kn=en.vertexLength,Tn=this.allowVerticalPlacement&&je===zo.vertical?Math.PI/2:0,On=Pe.text&&Pe.text.sections,Dn=0;Dn<I.length;Dn++){var jn=I[Dn],Zn=jn.tl,$n=jn.tr,pr=jn.bl,sr=jn.br,gr=jn.tex,_r=jn.pixelOffsetTL,Dr=jn.pixelOffsetBR,kr=jn.minFontScaleX,Or=jn.minFontScaleY,Er=jn.glyphOffset,wr=jn.isSDF,jr=jn.sectionIndex,zr=en.vertexLength,hi=Er[1];$u(zt,Ke.x,Ke.y,Zn.x,hi+Zn.y,gr.x,gr.y,Z,wr,_r.x,_r.y,kr,Or),$u(zt,Ke.x,Ke.y,$n.x,hi+$n.y,gr.x+gr.w,gr.y,Z,wr,Dr.x,_r.y,kr,Or),$u(zt,Ke.x,Ke.y,pr.x,hi+pr.y,gr.x,gr.y+gr.h,Z,wr,_r.x,Dr.y,kr,Or),$u(zt,Ke.x,Ke.y,sr.x,hi+sr.y,gr.x+gr.w,gr.y+gr.h,Z,wr,Dr.x,Dr.y,kr,Or),Nc(A.dynamicLayoutVertexArray,Ke,Tn),Bt.emplaceBack(zr,zr+1,zr+2),Bt.emplaceBack(zr+1,zr+2,zr+3),en.vertexLength+=4,en.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Er[0]),Dn!==I.length-1&&jr===I[Dn+1].sectionIndex||A.programConfigurations.populatePaintArrays(zt.length,Pe,Pe.index,{},Ot,On&&On[jr])}A.placedSymbolArray.emplaceBack(Ke.x,Ke.y,rn,this.glyphOffsetArray.length-rn,kn,st,yt,Ke.segment,Z?Z[0]:0,Z?Z[1]:0,le[0],le[1],je,0,!1,0,_t)},ri.prototype._addCollisionDebugVertex=function(A,I,Z,le,Se,Pe){return I.emplaceBack(0,0),A.emplaceBack(Z.x,Z.y,le,Se,Math.round(Pe.x),Math.round(Pe.y))},ri.prototype.addCollisionDebugVertices=function(A,I,Z,le,Se,Pe,je){var Ke=Se.segments.prepareSegment(4,Se.layoutVertexArray,Se.indexArray),st=Ke.vertexLength,yt=Se.layoutVertexArray,_t=Se.collisionVertexArray,Ot=je.anchorX,Bt=je.anchorY;this._addCollisionDebugVertex(yt,_t,Pe,Ot,Bt,new t(A,I)),this._addCollisionDebugVertex(yt,_t,Pe,Ot,Bt,new t(Z,I)),this._addCollisionDebugVertex(yt,_t,Pe,Ot,Bt,new t(Z,le)),this._addCollisionDebugVertex(yt,_t,Pe,Ot,Bt,new t(A,le)),Ke.vertexLength+=4;var zt=Se.indexArray;zt.emplaceBack(st,st+1),zt.emplaceBack(st+1,st+2),zt.emplaceBack(st+2,st+3),zt.emplaceBack(st+3,st),Ke.primitiveLength+=4},ri.prototype.addDebugCollisionBoxes=function(A,I,Z,le){for(var Se=A;Se<I;Se++){var Pe=this.collisionBoxArray.get(Se),je=Pe.x1,Ke=Pe.y1,st=Pe.x2,yt=Pe.y2;this.addCollisionDebugVertices(je,Ke,st,yt,le?this.textCollisionBox:this.iconCollisionBox,Pe.anchorPoint,Z)}},ri.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new yu(fe,Sf.members,Ue),this.iconCollisionBox=new yu(fe,Sf.members,Ue);for(var A=0;A<this.symbolInstances.length;A++){var I=this.symbolInstances.get(A);this.addDebugCollisionBoxes(I.textBoxStartIndex,I.textBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.iconBoxStartIndex,I.iconBoxEndIndex,I,!1),this.addDebugCollisionBoxes(I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I,!1)}},ri.prototype._deserializeCollisionBoxesForSymbol=function(A,I,Z,le,Se,Pe,je,Ke,st){for(var yt={},_t=I;_t<Z;_t++){var Ot=A.get(_t);yt.textBox={x1:Ot.x1,y1:Ot.y1,x2:Ot.x2,y2:Ot.y2,anchorPointX:Ot.anchorPointX,anchorPointY:Ot.anchorPointY},yt.textFeatureIndex=Ot.featureIndex;break}for(var Bt=le;Bt<Se;Bt++){var zt=A.get(Bt);yt.verticalTextBox={x1:zt.x1,y1:zt.y1,x2:zt.x2,y2:zt.y2,anchorPointX:zt.anchorPointX,anchorPointY:zt.anchorPointY},yt.verticalTextFeatureIndex=zt.featureIndex;break}for(var en=Pe;en<je;en++){var rn=A.get(en);yt.iconBox={x1:rn.x1,y1:rn.y1,x2:rn.x2,y2:rn.y2,anchorPointX:rn.anchorPointX,anchorPointY:rn.anchorPointY},yt.iconFeatureIndex=rn.featureIndex;break}for(var kn=Ke;kn<st;kn++){var Tn=A.get(kn);yt.verticalIconBox={x1:Tn.x1,y1:Tn.y1,x2:Tn.x2,y2:Tn.y2,anchorPointX:Tn.anchorPointX,anchorPointY:Tn.anchorPointY},yt.verticalIconFeatureIndex=Tn.featureIndex;break}return yt},ri.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var I=0;I<this.symbolInstances.length;I++){var Z=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},ri.prototype.hasTextData=function(){return this.text.segments.get().length>0},ri.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ri.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ri.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ri.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ri.prototype.addIndicesForPlacedSymbol=function(A,I){for(var Z=A.placedSymbolArray.get(I),le=Z.vertexStartIndex+4*Z.numGlyphs,Se=Z.vertexStartIndex;Se<le;Se+=4)A.indexArray.emplaceBack(Se,Se+1,Se+2),A.indexArray.emplaceBack(Se+1,Se+2,Se+3)},ri.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var I=Math.sin(A),Z=Math.cos(A),le=[],Se=[],Pe=[],je=0;je<this.symbolInstances.length;++je){Pe.push(je);var Ke=this.symbolInstances.get(je);le.push(0|Math.round(I*Ke.anchorX+Z*Ke.anchorY)),Se.push(Ke.featureIndex)}return Pe.sort(function(st,yt){return le[st]-le[yt]||Se[yt]-Se[st]}),Pe},ri.prototype.addToSortKeyRanges=function(A,I){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===I?Z.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:A,symbolInstanceEnd:A+1})},ri.prototype.sortFeatures=function(A){var I=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,le=this.symbolInstanceIndexes;Z<le.length;Z+=1){var Se=le[Z],Pe=this.symbolInstances.get(Se);this.featureSortOrder.push(Pe.featureIndex),[Pe.rightJustifiedTextSymbolIndex,Pe.centerJustifiedTextSymbolIndex,Pe.leftJustifiedTextSymbolIndex].forEach(function(je,Ke,st){je>=0&&st.indexOf(je)===Ke&&I.addIndicesForPlacedSymbol(I.text,je)}),Pe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Pe.verticalPlacedTextSymbolIndex),Pe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.placedIconSymbolIndex),Pe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},xr("SymbolBucket",ri,{omit:["layers","collisionBoxArray","features","compareText"]}),ri.MAX_GLYPHS=65535,ri.addDynamicAttributes=Nc;var nd=new Wi({"symbol-placement":new Tr(De.layout_symbol["symbol-placement"]),"symbol-spacing":new Tr(De.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tr(De.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ar(De.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Tr(De.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Tr(De.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Tr(De.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tr(De.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tr(De.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ar(De.layout_symbol["icon-size"]),"icon-text-fit":new Tr(De.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Tr(De.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ar(De.layout_symbol["icon-image"]),"icon-rotate":new Ar(De.layout_symbol["icon-rotate"]),"icon-padding":new Tr(De.layout_symbol["icon-padding"]),"icon-keep-upright":new Tr(De.layout_symbol["icon-keep-upright"]),"icon-offset":new Ar(De.layout_symbol["icon-offset"]),"icon-anchor":new Ar(De.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tr(De.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tr(De.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tr(De.layout_symbol["text-rotation-alignment"]),"text-field":new Ar(De.layout_symbol["text-field"]),"text-font":new Ar(De.layout_symbol["text-font"]),"text-size":new Ar(De.layout_symbol["text-size"]),"text-max-width":new Ar(De.layout_symbol["text-max-width"]),"text-line-height":new Tr(De.layout_symbol["text-line-height"]),"text-letter-spacing":new Ar(De.layout_symbol["text-letter-spacing"]),"text-justify":new Ar(De.layout_symbol["text-justify"]),"text-radial-offset":new Ar(De.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Tr(De.layout_symbol["text-variable-anchor"]),"text-anchor":new Ar(De.layout_symbol["text-anchor"]),"text-max-angle":new Tr(De.layout_symbol["text-max-angle"]),"text-writing-mode":new Tr(De.layout_symbol["text-writing-mode"]),"text-rotate":new Ar(De.layout_symbol["text-rotate"]),"text-padding":new Tr(De.layout_symbol["text-padding"]),"text-keep-upright":new Tr(De.layout_symbol["text-keep-upright"]),"text-transform":new Ar(De.layout_symbol["text-transform"]),"text-offset":new Ar(De.layout_symbol["text-offset"]),"text-allow-overlap":new Tr(De.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Tr(De.layout_symbol["text-ignore-placement"]),"text-optional":new Tr(De.layout_symbol["text-optional"])}),jc={paint:new Wi({"icon-opacity":new Ar(De.paint_symbol["icon-opacity"]),"icon-color":new Ar(De.paint_symbol["icon-color"]),"icon-halo-color":new Ar(De.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ar(De.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ar(De.paint_symbol["icon-halo-blur"]),"icon-translate":new Tr(De.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tr(De.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ar(De.paint_symbol["text-opacity"]),"text-color":new Ar(De.paint_symbol["text-color"],{runtimeType:It,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Ar(De.paint_symbol["text-halo-color"]),"text-halo-width":new Ar(De.paint_symbol["text-halo-width"]),"text-halo-blur":new Ar(De.paint_symbol["text-halo-blur"]),"text-translate":new Tr(De.paint_symbol["text-translate"]),"text-translate-anchor":new Tr(De.paint_symbol["text-translate-anchor"])}),layout:nd},Zl=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:wt,this.defaultValue=A};Zl.prototype.evaluate=function(A){if(A.formattedSection){var I=this.defaultValue.property.overrides;if(I&&I.hasOverride(A.formattedSection))return I.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Zl.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Zl.prototype.outputDefined=function(){return!1},Zl.prototype.serialize=function(){return null},xr("FormatSectionOverride",Zl,{omit:["defaultValue"]});var rd=function(A){function I(Z){A.call(this,Z,jc)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.recalculate=function(Z,le){if(A.prototype.recalculate.call(this,Z,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Se=this.layout.get("text-writing-mode");if(Se){for(var Pe=[],je=0,Ke=Se;je<Ke.length;je+=1){var st=Ke[je];Pe.indexOf(st)<0&&Pe.push(st)}this.layout._values["text-writing-mode"]=Pe}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},I.prototype.getValueAndResolveTokens=function(Z,le,Se,Pe){var je=this.layout.get(Z).evaluate(le,{},Se,Pe),Ke=this._unevaluatedLayout._values[Z];return Ke.isDataDriven()||rs(Ke.value)||!je?je:function(st,yt){return yt.replace(/{([^{}]+)}/g,function(_t,Ot){return Ot in st?String(st[Ot]):""})}(le.properties,je)},I.prototype.createBucket=function(Z){return new ri(Z)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype._setPaintOverrides=function(){for(var Z=0,le=jc.paint.overridableProperties;Z<le.length;Z+=1){var Se=le[Z];if(I.hasPaintOverride(this.layout,Se)){var Pe,je=this.paint.get(Se),Ke=new Zl(je),st=new vs(Ke,je.property.specification);Pe=je.value.kind==="constant"||je.value.kind==="source"?new wo("source",st):new oo("composite",st,je.value.zoomStops,je.value._interpolationType),this.paint._values[Se]=new Ei(je.property,Pe,je.parameters)}}},I.prototype._handleOverridablePaintPropertyUpdate=function(Z,le,Se){return!(!this.layout||le.isDataDriven()||Se.isDataDriven())&&I.hasPaintOverride(this.layout,Z)},I.hasPaintOverride=function(Z,le){var Se=Z.get("text-field"),Pe=jc.paint.properties[le],je=!1,Ke=function(_t){for(var Ot=0,Bt=_t;Ot<Bt.length;Ot+=1){var zt=Bt[Ot];if(Pe.overrides&&Pe.overrides.hasOverride(zt))return void(je=!0)}};if(Se.value.kind==="constant"&&Se.value.value instanceof Sn)Ke(Se.value.value.sections);else if(Se.value.kind==="source"){var st=function(_t){if(!je)if(_t instanceof Jn&&Qn(_t.value)===jt){var Ot=_t.value;Ke(Ot.sections)}else _t instanceof $t?Ke(_t.sections):_t.eachChild(st)},yt=Se.value;yt._styleExpression&&st(yt._styleExpression.expression)}return je},I}(Xi),id={paint:new Wi({"background-color":new Tr(De.paint_background["background-color"]),"background-pattern":new ia(De.paint_background["background-pattern"]),"background-opacity":new Tr(De.paint_background["background-opacity"])})},ad=function(A){function I(Z){A.call(this,Z,id)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Xi),od={paint:new Wi({"raster-opacity":new Tr(De.paint_raster["raster-opacity"]),"raster-hue-rotate":new Tr(De.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tr(De.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tr(De.paint_raster["raster-brightness-max"]),"raster-saturation":new Tr(De.paint_raster["raster-saturation"]),"raster-contrast":new Tr(De.paint_raster["raster-contrast"]),"raster-resampling":new Tr(De.paint_raster["raster-resampling"]),"raster-fade-duration":new Tr(De.paint_raster["raster-fade-duration"])})},sd=function(A){function I(Z){A.call(this,Z,od)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Xi),ld=function(A){function I(Z){A.call(this,Z,{}),this.implementation=Z}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},I.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},I.prototype.recalculate=function(){},I.prototype.updateTransitions=function(){},I.prototype.hasTransition=function(){},I.prototype.serialize=function(){},I.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},I.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},I}(Xi),ud={circle:Wh,heatmap:Jh,hillshade:$h,fill:dp,"fill-extrusion":wp,line:Sp,symbol:rd,background:ad,raster:sd},eh=self.HTMLImageElement,th=self.HTMLCanvasElement,nh=self.HTMLVideoElement,rh=self.ImageData,Qu=self.ImageBitmap,wl=function(A,I,Z,le){this.context=A,this.format=Z,this.texture=A.gl.createTexture(),this.update(I,le)};wl.prototype.update=function(A,I,Z){var le=A.width,Se=A.height,Pe=!(this.size&&this.size[0]===le&&this.size[1]===Se||Z),je=this.context,Ke=je.gl;if(this.useMipmap=!!(I&&I.useMipmap),Ke.bindTexture(Ke.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ke.RGBA&&(!I||I.premultiply!==!1)),Pe)this.size=[le,Se],A instanceof eh||A instanceof th||A instanceof nh||A instanceof rh||Qu&&A instanceof Qu?Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,this.format,Ke.UNSIGNED_BYTE,A):Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,le,Se,0,this.format,Ke.UNSIGNED_BYTE,A.data);else{var st=Z||{x:0,y:0},yt=st.x,_t=st.y;A instanceof eh||A instanceof th||A instanceof nh||A instanceof rh||Qu&&A instanceof Qu?Ke.texSubImage2D(Ke.TEXTURE_2D,0,yt,_t,Ke.RGBA,Ke.UNSIGNED_BYTE,A):Ke.texSubImage2D(Ke.TEXTURE_2D,0,yt,_t,le,Se,Ke.RGBA,Ke.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ke.generateMipmap(Ke.TEXTURE_2D)},wl.prototype.bind=function(A,I,Z){var le=this.context.gl;le.bindTexture(le.TEXTURE_2D,this.texture),Z!==le.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=le.LINEAR),A!==this.filter&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,A),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,Z||A),this.filter=A),I!==this.wrap&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,I),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,I),this.wrap=I)},wl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},wl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Uc=function(A){var I=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){I._triggered=!1,I._callback()})};Uc.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},Uc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Yl=function(A,I,Z){this.target=A,this.parent=I,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},h(["receive","process"],this),this.invoker=new Uc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?A:self};function ih(A,I,Z){var le=2*Math.PI*6378137/256/Math.pow(2,Z);return[A*le-2*Math.PI*6378137/2,I*le-2*Math.PI*6378137/2]}Yl.prototype.send=function(A,I,Z,le,Se){var Pe=this;Se===void 0&&(Se=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[je]=Z);var Ke=z(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:A,hasCallback:!!Z,targetMapId:le,mustQueue:Se,sourceMapId:this.mapId,data:Wo(I,Ke)},Ke),{cancel:function(){Z&&delete Pe.callbacks[je],Pe.target.postMessage({id:je,type:"<cancel>",targetMapId:le,sourceMapId:Pe.mapId})}}},Yl.prototype.receive=function(A){var I=A.data,Z=I.id;if(Z&&(!I.targetMapId||this.mapId===I.targetMapId))if(I.type==="<cancel>"){delete this.tasks[Z];var le=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],le&&le()}else L()||I.mustQueue?(this.tasks[Z]=I,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,I)},Yl.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),I=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),I&&this.processTask(A,I)}},Yl.prototype.processTask=function(A,I){var Z=this;if(I.type==="<response>"){var le=this.callbacks[A];delete this.callbacks[A],le&&(I.error?le(Xo(I.error)):le(null,Xo(I.data)))}else{var Se=!1,Pe=z(this.globalScope)?void 0:[],je=I.hasCallback?function(_t,Ot){Se=!0,delete Z.cancelCallbacks[A],Z.target.postMessage({id:A,type:"<response>",sourceMapId:Z.mapId,error:_t?Wo(_t):null,data:Wo(Ot,Pe)},Pe)}:function(_t){Se=!0},Ke=null,st=Xo(I.data);if(this.parent[I.type])Ke=this.parent[I.type](I.sourceMapId,st,je);else if(this.parent.getWorkerSource){var yt=I.type.split(".");Ke=this.parent.getWorkerSource(I.sourceMapId,yt[0],st.source)[yt[1]](st,je)}else je(new Error("Could not find function "+I.type));!Se&&Ke&&Ke.cancel&&(this.cancelCallbacks[A]=Ke.cancel)}},Yl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ea=function(A,I){A&&(I?this.setSouthWest(A).setNorthEast(I):A.length===4?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};ea.prototype.setNorthEast=function(A){return this._ne=A instanceof Ti?new Ti(A.lng,A.lat):Ti.convert(A),this},ea.prototype.setSouthWest=function(A){return this._sw=A instanceof Ti?new Ti(A.lng,A.lat):Ti.convert(A),this},ea.prototype.extend=function(A){var I,Z,le=this._sw,Se=this._ne;if(A instanceof Ti)I=A,Z=A;else{if(!(A instanceof ea)){if(Array.isArray(A)){if(A.length===4||A.every(Array.isArray)){var Pe=A;return this.extend(ea.convert(Pe))}var je=A;return this.extend(Ti.convert(je))}return this}if(I=A._sw,Z=A._ne,!I||!Z)return this}return le||Se?(le.lng=Math.min(I.lng,le.lng),le.lat=Math.min(I.lat,le.lat),Se.lng=Math.max(Z.lng,Se.lng),Se.lat=Math.max(Z.lat,Se.lat)):(this._sw=new Ti(I.lng,I.lat),this._ne=new Ti(Z.lng,Z.lat)),this},ea.prototype.getCenter=function(){return new Ti((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ea.prototype.getSouthWest=function(){return this._sw},ea.prototype.getNorthEast=function(){return this._ne},ea.prototype.getNorthWest=function(){return new Ti(this.getWest(),this.getNorth())},ea.prototype.getSouthEast=function(){return new Ti(this.getEast(),this.getSouth())},ea.prototype.getWest=function(){return this._sw.lng},ea.prototype.getSouth=function(){return this._sw.lat},ea.prototype.getEast=function(){return this._ne.lng},ea.prototype.getNorth=function(){return this._ne.lat},ea.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ea.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ea.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ea.prototype.contains=function(A){var I=Ti.convert(A),Z=I.lng,le=I.lat,Se=this._sw.lat<=le&&le<=this._ne.lat,Pe=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Pe=this._sw.lng>=Z&&Z>=this._ne.lng),Se&&Pe},ea.convert=function(A){return!A||A instanceof ea?A:new ea(A)};var ah=63710088e-1,Ti=function(A,I){if(isNaN(A)||isNaN(I))throw new Error("Invalid LngLat object: ("+A+", "+I+")");if(this.lng=+A,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ti.prototype.wrap=function(){return new Ti(a(this.lng,-180,180),this.lat)},Ti.prototype.toArray=function(){return[this.lng,this.lat]},Ti.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ti.prototype.distanceTo=function(A){var I=Math.PI/180,Z=this.lat*I,le=A.lat*I,Se=Math.sin(Z)*Math.sin(le)+Math.cos(Z)*Math.cos(le)*Math.cos((A.lng-this.lng)*I);return ah*Math.acos(Math.min(Se,1))},Ti.prototype.toBounds=function(A){A===void 0&&(A=0);var I=360*A/40075017,Z=I/Math.cos(Math.PI/180*this.lat);return new ea(new Ti(this.lng-Z,this.lat-I),new Ti(this.lng+Z,this.lat+I))},Ti.convert=function(A){if(A instanceof Ti)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Ti(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Ti(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var oh=2*Math.PI*ah;function sh(A){return oh*Math.cos(A*Math.PI/180)}function lh(A){return(180+A)/360}function uh(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function ch(A,I){return A/sh(I)}function Vc(A){var I=180-360*A;return 360/Math.PI*Math.atan(Math.exp(I*Math.PI/180))-90}var Tl=function(A,I,Z){Z===void 0&&(Z=0),this.x=+A,this.y=+I,this.z=+Z};Tl.fromLngLat=function(A,I){I===void 0&&(I=0);var Z=Ti.convert(A);return new Tl(lh(Z.lng),uh(Z.lat),ch(I,Z.lat))},Tl.prototype.toLngLat=function(){return new Ti(360*this.x-180,Vc(this.y))},Tl.prototype.toAltitude=function(){return A=this.z,I=this.y,A*sh(Vc(I));var A,I},Tl.prototype.meterInMercatorCoordinateUnits=function(){return 1/oh*(A=Vc(this.y),1/Math.cos(A*Math.PI/180));var A};var kl=function(A,I,Z){this.z=A,this.x=I,this.y=Z,this.key=xu(0,A,A,I,Z)};kl.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},kl.prototype.url=function(A,I){var Z,le,Se,Pe,je,Ke=(Z=this.x,le=this.y,Se=this.z,Pe=ih(256*Z,256*(le=Math.pow(2,Se)-le-1),Se),je=ih(256*(Z+1),256*(le+1),Se),Pe[0]+","+Pe[1]+","+je[0]+","+je[1]),st=function(yt,_t,Ot){for(var Bt,zt="",en=yt;en>0;en--)zt+=(_t&(Bt=1<<en-1)?1:0)+(Ot&Bt?2:0);return zt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(I==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",Ke)},kl.prototype.getTilePoint=function(A){var I=Math.pow(2,this.z);return new t((A.x*I-this.x)*Wr,(A.y*I-this.y)*Wr)},kl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var fh=function(A,I){this.wrap=A,this.canonical=I,this.key=xu(A,I.z,I.z,I.x,I.y)},ta=function(A,I,Z,le,Se){this.overscaledZ=A,this.wrap=I,this.canonical=new kl(Z,+le,+Se),this.key=xu(I,A,Z,le,Se)};function xu(A,I,Z,le,Se){(A*=2)<0&&(A=-1*A-1);var Pe=1<<Z;return(Pe*Pe*A+Pe*Se+le).toString(36)+Z.toString(36)+I.toString(36)}ta.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},ta.prototype.scaledTo=function(A){var I=this.canonical.z-A;return A>this.canonical.z?new ta(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ta(A,this.wrap,A,this.canonical.x>>I,this.canonical.y>>I)},ta.prototype.calculateScaledKey=function(A,I){var Z=this.canonical.z-A;return A>this.canonical.z?xu(this.wrap*+I,A,this.canonical.z,this.canonical.x,this.canonical.y):xu(this.wrap*+I,A,A,this.canonical.x>>Z,this.canonical.y>>Z)},ta.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var I=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>I&&A.canonical.y===this.canonical.y>>I},ta.prototype.children=function(A){if(this.overscaledZ>=A)return[new ta(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var I=this.canonical.z+1,Z=2*this.canonical.x,le=2*this.canonical.y;return[new ta(I,this.wrap,I,Z,le),new ta(I,this.wrap,I,Z+1,le),new ta(I,this.wrap,I,Z,le+1),new ta(I,this.wrap,I,Z+1,le+1)]},ta.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},ta.prototype.wrapped=function(){return new ta(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ta.prototype.unwrapTo=function(A){return new ta(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},ta.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ta.prototype.toUnwrapped=function(){return new fh(this.wrap,this.canonical)},ta.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ta.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new Tl(A.x-this.wrap,A.y))},xr("CanonicalTileID",kl),xr("OverscaledTileID",ta,{omit:["posMatrix"]});var Qs=function(A,I,Z){if(this.uid=A,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return S('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=I.height;var le=this.dim=I.height-2;this.data=new Uint32Array(I.data.buffer),this.encoding=Z||"mapbox";for(var Se=0;Se<le;Se++)this.data[this._idx(-1,Se)]=this.data[this._idx(0,Se)],this.data[this._idx(le,Se)]=this.data[this._idx(le-1,Se)],this.data[this._idx(Se,-1)]=this.data[this._idx(Se,0)],this.data[this._idx(Se,le)]=this.data[this._idx(Se,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)]};Qs.prototype.get=function(A,I){var Z=new Uint8Array(this.data.buffer),le=4*this._idx(A,I);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Z[le],Z[le+1],Z[le+2])},Qs.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},Qs.prototype._idx=function(A,I){if(A<-1||A>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(A+1)},Qs.prototype._unpackMapbox=function(A,I,Z){return(256*A*256+256*I+Z)/10-1e4},Qs.prototype._unpackTerrarium=function(A,I,Z){return 256*A+I+Z/256-32768},Qs.prototype.getPixels=function(){return new Qa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Qs.prototype.backfillBorder=function(A,I,Z){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var le=I*this.dim,Se=I*this.dim+this.dim,Pe=Z*this.dim,je=Z*this.dim+this.dim;switch(I){case-1:le=Se-1;break;case 1:Se=le+1}switch(Z){case-1:Pe=je-1;break;case 1:je=Pe+1}for(var Ke=-I*this.dim,st=-Z*this.dim,yt=Pe;yt<je;yt++)for(var _t=le;_t<Se;_t++)this.data[this._idx(_t,yt)]=A.data[this._idx(_t+Ke,yt+st)]},xr("DEMData",Qs);var ec=function(A){this._stringToNumber={},this._numberToString=[];for(var I=0;I<A.length;I++){var Z=A[I];this._stringToNumber[Z]=I,this._numberToString[I]=Z}};ec.prototype.encode=function(A){return this._stringToNumber[A]},ec.prototype.decode=function(A){return this._numberToString[A]};var tc=function(A,I,Z,le,Se){this.type="Feature",this._vectorTileFeature=A,A._z=I,A._x=Z,A._y=le,this.properties=A.properties,this.id=Se},Hc={geometry:{configurable:!0}};Hc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Hc.geometry.set=function(A){this._geometry=A},tc.prototype.toJSON=function(){var A={geometry:this.geometry};for(var I in this)I!=="_geometry"&&I!=="_vectorTileFeature"&&(A[I]=this[I]);return A},Object.defineProperties(tc.prototype,Hc);var Wl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Wl.prototype.updateState=function(A,I,Z){var le=String(I);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][le]=this.stateChanges[A][le]||{},u(this.stateChanges[A][le],Z),this.deletedStates[A]===null)for(var Se in this.deletedStates[A]={},this.state[A])Se!==le&&(this.deletedStates[A][Se]=null);else if(this.deletedStates[A]&&this.deletedStates[A][le]===null)for(var Pe in this.deletedStates[A][le]={},this.state[A][le])Z[Pe]||(this.deletedStates[A][le][Pe]=null);else for(var je in Z)this.deletedStates[A]&&this.deletedStates[A][le]&&this.deletedStates[A][le][je]===null&&delete this.deletedStates[A][le][je]},Wl.prototype.removeFeatureState=function(A,I,Z){if(this.deletedStates[A]!==null){var le=String(I);if(this.deletedStates[A]=this.deletedStates[A]||{},Z&&I!==void 0)this.deletedStates[A][le]!==null&&(this.deletedStates[A][le]=this.deletedStates[A][le]||{},this.deletedStates[A][le][Z]=null);else if(I!==void 0)if(this.stateChanges[A]&&this.stateChanges[A][le])for(Z in this.deletedStates[A][le]={},this.stateChanges[A][le])this.deletedStates[A][le][Z]=null;else this.deletedStates[A][le]=null;else this.deletedStates[A]=null}},Wl.prototype.getState=function(A,I){var Z=String(I),le=this.state[A]||{},Se=this.stateChanges[A]||{},Pe=u({},le[Z],Se[Z]);if(this.deletedStates[A]===null)return{};if(this.deletedStates[A]){var je=this.deletedStates[A][I];if(je===null)return{};for(var Ke in je)delete Pe[Ke]}return Pe},Wl.prototype.initializeTileState=function(A,I){A.setFeatureState(this.state,I)},Wl.prototype.coalesceChanges=function(A,I){var Z={};for(var le in this.stateChanges){this.state[le]=this.state[le]||{};var Se={};for(var Pe in this.stateChanges[le])this.state[le][Pe]||(this.state[le][Pe]={}),u(this.state[le][Pe],this.stateChanges[le][Pe]),Se[Pe]=this.state[le][Pe];Z[le]=Se}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var Ke={};if(this.deletedStates[je]===null)for(var st in this.state[je])Ke[st]={},this.state[je][st]={};else for(var yt in this.deletedStates[je]){if(this.deletedStates[je][yt]===null)this.state[je][yt]={};else for(var _t=0,Ot=Object.keys(this.deletedStates[je][yt]);_t<Ot.length;_t+=1){var Bt=Ot[_t];delete this.state[je][yt][Bt]}Ke[yt]=this.state[je][yt]}Z[je]=Z[je]||{},u(Z[je],Ke)}if(this.stateChanges={},this.deletedStates={},Object.keys(Z).length!==0)for(var zt in A)A[zt].setFeatureState(Z,I)};var el=function(A,I){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new ji(Wr,16,0),this.grid3D=new ji(Wr,16,0),this.featureIndexArray=new Ht,this.promoteId=I};function hh(A,I,Z,le,Se){return v(A,function(Pe,je){var Ke=I instanceof Yi?I.get(je):null;return Ke&&Ke.evaluate?Ke.evaluate(Z,le,Se):Ke})}function ph(A){for(var I=1/0,Z=1/0,le=-1/0,Se=-1/0,Pe=0,je=A;Pe<je.length;Pe+=1){var Ke=je[Pe];I=Math.min(I,Ke.x),Z=Math.min(Z,Ke.y),le=Math.max(le,Ke.x),Se=Math.max(Se,Ke.y)}return{minX:I,minY:Z,maxX:le,maxY:Se}}function cd(A,I){return I-A}el.prototype.insert=function(A,I,Z,le,Se,Pe){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,le,Se);for(var Ke=Pe?this.grid3D:this.grid,st=0;st<I.length;st++){for(var yt=I[st],_t=[1/0,1/0,-1/0,-1/0],Ot=0;Ot<yt.length;Ot++){var Bt=yt[Ot];_t[0]=Math.min(_t[0],Bt.x),_t[1]=Math.min(_t[1],Bt.y),_t[2]=Math.max(_t[2],Bt.x),_t[3]=Math.max(_t[3],Bt.y)}_t[0]<Wr&&_t[1]<Wr&&_t[2]>=0&&_t[3]>=0&&Ke.insert(je,_t[0],_t[1],_t[2],_t[3])}},el.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Rl.VectorTile(new Hu(this.rawTileData)).layers,this.sourceLayerCoder=new ec(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},el.prototype.query=function(A,I,Z,le){var Se=this;this.loadVTLayers();for(var Pe=A.params||{},je=Wr/A.tileSize/A.scale,Ke=is(Pe.filter),st=A.queryGeometry,yt=A.queryPadding*je,_t=ph(st),Ot=this.grid.query(_t.minX-yt,_t.minY-yt,_t.maxX+yt,_t.maxY+yt),Bt=ph(A.cameraQueryGeometry),zt=0,en=this.grid3D.query(Bt.minX-yt,Bt.minY-yt,Bt.maxX+yt,Bt.maxY+yt,function(jn,Zn,$n,pr){return function(sr,gr,_r,Dr,kr){for(var Or=0,Er=sr;Or<Er.length;Or+=1){var wr=Er[Or];if(gr<=wr.x&&_r<=wr.y&&Dr>=wr.x&&kr>=wr.y)return!0}var jr=[new t(gr,_r),new t(gr,kr),new t(Dr,kr),new t(Dr,_r)];if(sr.length>2){for(var zr=0,hi=jr;zr<hi.length;zr+=1)if(pl(sr,hi[zr]))return!0}for(var Pr=0;Pr<sr.length-1;Pr++)if(au(sr[Pr],sr[Pr+1],jr))return!0;return!1}(A.cameraQueryGeometry,jn-yt,Zn-yt,$n+yt,pr+yt)});zt<en.length;zt+=1){var rn=en[zt];Ot.push(rn)}Ot.sort(cd);for(var kn,Tn={},On=function(jn){var Zn=Ot[jn];if(Zn!==kn){kn=Zn;var $n=Se.featureIndexArray.get(Zn),pr=null;Se.loadMatchingFeature(Tn,$n.bucketIndex,$n.sourceLayerIndex,$n.featureIndex,Ke,Pe.layers,Pe.availableImages,I,Z,le,function(sr,gr,_r){return pr||(pr=Ca(sr)),gr.queryIntersectsFeature(st,sr,_r,pr,Se.z,A.transform,je,A.pixelPosMatrix)})}},Dn=0;Dn<Ot.length;Dn++)On(Dn);return Tn},el.prototype.loadMatchingFeature=function(A,I,Z,le,Se,Pe,je,Ke,st,yt,_t){var Ot=this.bucketLayerIDs[I];if(!Pe||function(pr,sr){for(var gr=0;gr<pr.length;gr++)if(sr.indexOf(pr[gr])>=0)return!0;return!1}(Pe,Ot)){var Bt=this.sourceLayerCoder.decode(Z),zt=this.vtLayers[Bt].feature(le);if(Se.filter(new Xr(this.tileID.overscaledZ),zt))for(var en=this.getId(zt,Bt),rn=0;rn<Ot.length;rn++){var kn=Ot[rn];if(!(Pe&&Pe.indexOf(kn)<0)){var Tn=Ke[kn];if(Tn){var On={};en!==void 0&&yt&&(On=yt.getState(Tn.sourceLayer||"_geojsonTileLayer",en));var Dn=st[kn];Dn.paint=hh(Dn.paint,Tn.paint,zt,On,je),Dn.layout=hh(Dn.layout,Tn.layout,zt,On,je);var jn=!_t||_t(zt,Tn,On);if(jn){var Zn=new tc(zt,this.z,this.x,this.y,en);Zn.layer=Dn;var $n=A[kn];$n===void 0&&($n=A[kn]=[]),$n.push({featureIndex:le,feature:Zn,intersectionZ:jn})}}}}}},el.prototype.lookupSymbolFeatures=function(A,I,Z,le,Se,Pe,je,Ke){var st={};this.loadVTLayers();for(var yt=is(Se),_t=0,Ot=A;_t<Ot.length;_t+=1){var Bt=Ot[_t];this.loadMatchingFeature(st,Z,le,Bt,yt,Pe,je,Ke,I)}return st},el.prototype.hasLayer=function(A){for(var I=0,Z=this.bucketLayerIDs;I<Z.length;I+=1)for(var le=0,Se=Z[I];le<Se.length;le+=1)if(A===Se[le])return!0;return!1},el.prototype.getId=function(A,I){var Z=A.id;if(this.promoteId){var le=typeof this.promoteId=="string"?this.promoteId:this.promoteId[I];typeof(Z=A.properties[le])=="boolean"&&(Z=Number(Z))}return Z},xr("FeatureIndex",el,{omit:["rawTileData","sourceLayerCoder"]});var la=function(A,I){this.tileID=A,this.uid=c(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};la.prototype.registerFadeDuration=function(A){var I=A+this.timeAdded;I<K.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)},la.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},la.prototype.loadVectorData=function(A,I,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var le in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(yt,_t){var Ot={};if(!_t)return Ot;for(var Bt=function(){var rn=en[zt],kn=rn.layerIds.map(function(jn){return _t.getLayer(jn)}).filter(Boolean);if(kn.length!==0){rn.layers=kn,rn.stateDependentLayerIds&&(rn.stateDependentLayers=rn.stateDependentLayerIds.map(function(jn){return kn.filter(function(Zn){return Zn.id===jn})[0]}));for(var Tn=0,On=kn;Tn<On.length;Tn+=1){var Dn=On[Tn];Ot[Dn.id]=rn}}},zt=0,en=yt;zt<en.length;zt+=1)Bt();return Ot}(A.buckets,I.style),this.hasSymbolBuckets=!1,this.buckets){var Se=this.buckets[le];if(Se instanceof ri){if(this.hasSymbolBuckets=!0,!Z)break;Se.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Pe in this.buckets){var je=this.buckets[Pe];if(je instanceof ri&&je.hasRTLText){this.hasRTLText=!0,_i.isLoading()||_i.isLoaded()||Ja()!=="deferred"||Ks();break}}for(var Ke in this.queryPadding=0,this.buckets){var st=this.buckets[Ke];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(Ke).queryRadius(st))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new pt},la.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},la.prototype.getBucket=function(A){return this.buckets[A.id]},la.prototype.upload=function(A){for(var I in this.buckets){var Z=this.buckets[I];Z.uploadPending()&&Z.upload(A)}var le=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new wl(A,this.imageAtlas.image,le.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new wl(A,this.glyphAtlasImage,le.ALPHA),this.glyphAtlasImage=null)},la.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},la.prototype.queryRenderedFeatures=function(A,I,Z,le,Se,Pe,je,Ke,st,yt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:le,cameraQueryGeometry:Se,scale:Pe,tileSize:this.tileSize,pixelPosMatrix:yt,transform:Ke,params:je,queryPadding:this.queryPadding*st},A,I,Z):{}},la.prototype.querySourceFeatures=function(A,I){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var le=Z.loadVTLayers(),Se=I?I.sourceLayer:"",Pe=le._geojsonTileLayer||le[Se];if(Pe)for(var je=is(I&&I.filter),Ke=this.tileID.canonical,st=Ke.z,yt=Ke.x,_t=Ke.y,Ot={z:st,x:yt,y:_t},Bt=0;Bt<Pe.length;Bt++){var zt=Pe.feature(Bt);if(je.filter(new Xr(this.tileID.overscaledZ),zt)){var en=Z.getId(zt,Se),rn=new tc(zt,st,yt,_t,en);rn.tile=Ot,A.push(rn)}}}},la.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},la.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},la.prototype.setExpiryData=function(A){var I=this.expirationTime;if(A.cacheControl){var Z=C(A.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var le=Date.now(),Se=!1;if(this.expirationTime>le)Se=!1;else if(I)if(this.expirationTime<I)Se=!0;else{var Pe=this.expirationTime-I;Pe?this.expirationTime=le+Math.max(Pe,3e4):Se=!0}else Se=!0;Se?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},la.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},la.prototype.setFeatureState=function(A,I){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(A).length!==0){var Z=this.latestFeatureIndex.loadVTLayers();for(var le in this.buckets)if(I.style.hasLayer(le)){var Se=this.buckets[le],Pe=Se.layers[0].sourceLayer||"_geojsonTileLayer",je=Z[Pe],Ke=A[Pe];if(je&&Ke&&Object.keys(Ke).length!==0){Se.update(Ke,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var st=I&&I.style&&I.style.getLayer(le);st&&(this.queryPadding=Math.max(this.queryPadding,st.queryRadius(Se)))}}}},la.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},la.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<K.now()},la.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},la.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=K.now()+A},la.prototype.setDependencies=function(A,I){for(var Z={},le=0,Se=I;le<Se.length;le+=1)Z[Se[le]]=!0;this.dependencies[A]=Z},la.prototype.hasDependency=function(A,I){for(var Z=0,le=A;Z<le.length;Z+=1){var Se=le[Z],Pe=this.dependencies[Se];if(Pe){for(var je=0,Ke=I;je<Ke.length;je+=1)if(Pe[Ke[je]])return!0}}return!1};var ml=self.performance,dh=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},ml.mark(this._marks.start)};dh.prototype.finish=function(){ml.mark(this._marks.end);var A=ml.getEntriesByName(this._marks.measure);return A.length===0&&(ml.measure(this._marks.measure,this._marks.start,this._marks.end),A=ml.getEntriesByName(this._marks.measure),ml.clearMarks(this._marks.start),ml.clearMarks(this._marks.end),ml.clearMeasures(this._marks.measure)),A},l.Actor=Yl,l.AlphaImage=_l,l.CanonicalTileID=kl,l.CollisionBoxArray=pt,l.Color=hn,l.DEMData=Qs,l.DataConstantProperty=Tr,l.DictionaryCoder=ec,l.EXTENT=Wr,l.ErrorEvent=at,l.EvaluationParameters=Xr,l.Event=We,l.Evented=et,l.FeatureIndex=el,l.FillBucket=ks,l.FillExtrusionBucket=As,l.ImageAtlas=gu,l.ImagePosition=Gu,l.LineBucket=eo,l.LngLat=Ti,l.LngLatBounds=ea,l.MercatorCoordinate=Tl,l.ONE_EM=va,l.OverscaledTileID=ta,l.Point=t,l.Point$1=t,l.Properties=Wi,l.Protobuf=Hu,l.RGBAImage=Qa,l.RequestManager=ae,l.RequestPerformance=dh,l.ResourceType=vt,l.SegmentVector=vn,l.SourceFeatureState=Wl,l.StructArrayLayout1ui2=qe,l.StructArrayLayout2f1f2i16=Ae,l.StructArrayLayout2i4=da,l.StructArrayLayout3ui6=$,l.StructArrayLayout4i8=$o,l.SymbolBucket=ri,l.Texture=wl,l.Tile=la,l.Transitionable=Na,l.Uniform1f=Ir,l.Uniform1i=Mr,l.Uniform2f=Br,l.Uniform3f=Zr,l.Uniform4f=oi,l.UniformColor=si,l.UniformMatrix4f=wi,l.UnwrappedTileID=fh,l.ValidationError=Be,l.WritingMode=zo,l.ZoomHistory=fo,l.add=function(A,I,Z){return A[0]=I[0]+Z[0],A[1]=I[1]+Z[1],A[2]=I[2]+Z[2],A},l.addDynamicAttributes=Nc,l.asyncAll=function(A,I,Z){if(!A.length)return Z(null,[]);var le=A.length,Se=new Array(A.length),Pe=null;A.forEach(function(je,Ke){I(je,function(st,yt){st&&(Pe=st),Se[Ke]=yt,--le==0&&Z(Pe,Se)})})},l.bezier=r,l.bindAll=h,l.browser=K,l.cacheEntryPossiblyAdded=function(A){++ot>ye&&(A.getActor().send("enforceCacheSizeLimit",we),ot=0)},l.clamp=o,l.clearTileCache=function(A){var I=self.caches.delete(ce);A&&I.catch(A).then(function(){return A()})},l.clipLine=Wf,l.clone=function(A){var I=new Do(16);return I[0]=A[0],I[1]=A[1],I[2]=A[2],I[3]=A[3],I[4]=A[4],I[5]=A[5],I[6]=A[6],I[7]=A[7],I[8]=A[8],I[9]=A[9],I[10]=A[10],I[11]=A[11],I[12]=A[12],I[13]=A[13],I[14]=A[14],I[15]=A[15],I},l.clone$1=_,l.clone$2=function(A){var I=new Do(3);return I[0]=A[0],I[1]=A[1],I[2]=A[2],I},l.collisionCircleLayout=Cp,l.config=J,l.create=function(){var A=new Do(16);return Do!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},l.create$1=function(){var A=new Do(9);return Do!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},l.create$2=function(){var A=new Do(4);return Do!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},l.createCommonjsModule=T,l.createExpression=ms,l.createLayout=zi,l.createStyleLayer=function(A){return A.type==="custom"?new ld(A):new ud[A.type](A)},l.cross=function(A,I,Z){var le=I[0],Se=I[1],Pe=I[2],je=Z[0],Ke=Z[1],st=Z[2];return A[0]=Se*st-Pe*Ke,A[1]=Pe*je-le*st,A[2]=le*Ke-Se*je,A},l.deepEqual=function A(I,Z){if(Array.isArray(I)){if(!Array.isArray(Z)||I.length!==Z.length)return!1;for(var le=0;le<I.length;le++)if(!A(I[le],Z[le]))return!1;return!0}if(typeof I=="object"&&I!==null&&Z!==null){if(typeof Z!="object"||Object.keys(I).length!==Object.keys(Z).length)return!1;for(var Se in I)if(!A(I[Se],Z[Se]))return!1;return!0}return I===Z},l.dot=function(A,I){return A[0]*I[0]+A[1]*I[1]+A[2]*I[2]},l.dot$1=function(A,I){return A[0]*I[0]+A[1]*I[1]+A[2]*I[2]+A[3]*I[3]},l.ease=n,l.emitValidationErrors=Ra,l.endsWith=y,l.enforceCacheSizeLimit=function(A){Re(),se&&se.then(function(I){I.keys().then(function(Z){for(var le=0;le<Z.length-A;le++)I.delete(Z[le])})})},l.evaluateSizeForFeature=Uf,l.evaluateSizeForZoom=Vf,l.evaluateVariableOffset=Kf,l.evented=Di,l.extend=u,l.featureFilter=is,l.filterObject=m,l.fromRotation=function(A,I){var Z=Math.sin(I),le=Math.cos(I);return A[0]=le,A[1]=Z,A[2]=0,A[3]=-Z,A[4]=le,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},l.getAnchorAlignment=zc,l.getAnchorJustification=Bc,l.getArrayBuffer=Tt,l.getImage=Ze,l.getJSON=function(A,I){return it(u(A,{type:"json"}),I)},l.getRTLTextPluginStatus=Ja,l.getReferrer=mt,l.getVideo=function(A,I){var Z,le,Se=self.document.createElement("video");Se.muted=!0,Se.onloadstart=function(){I(null,Se)};for(var Pe=0;Pe<A.length;Pe++){var je=self.document.createElement("source");Z=A[Pe],le=void 0,(le=self.document.createElement("a")).href=Z,le.protocol===self.document.location.protocol&&le.host===self.document.location.host||(Se.crossOrigin="Anonymous"),je.src=A[Pe],Se.appendChild(je)}return{cancel:function(){}}},l.identity=bc,l.invert=function(A,I){var Z=I[0],le=I[1],Se=I[2],Pe=I[3],je=I[4],Ke=I[5],st=I[6],yt=I[7],_t=I[8],Ot=I[9],Bt=I[10],zt=I[11],en=I[12],rn=I[13],kn=I[14],Tn=I[15],On=Z*Ke-le*je,Dn=Z*st-Se*je,jn=Z*yt-Pe*je,Zn=le*st-Se*Ke,$n=le*yt-Pe*Ke,pr=Se*yt-Pe*st,sr=_t*rn-Ot*en,gr=_t*kn-Bt*en,_r=_t*Tn-zt*en,Dr=Ot*kn-Bt*rn,kr=Ot*Tn-zt*rn,Or=Bt*Tn-zt*kn,Er=On*Or-Dn*kr+jn*Dr+Zn*_r-$n*gr+pr*sr;return Er?(Er=1/Er,A[0]=(Ke*Or-st*kr+yt*Dr)*Er,A[1]=(Se*kr-le*Or-Pe*Dr)*Er,A[2]=(rn*pr-kn*$n+Tn*Zn)*Er,A[3]=(Bt*$n-Ot*pr-zt*Zn)*Er,A[4]=(st*_r-je*Or-yt*gr)*Er,A[5]=(Z*Or-Se*_r+Pe*gr)*Er,A[6]=(kn*jn-en*pr-Tn*Dn)*Er,A[7]=(_t*pr-Bt*jn+zt*Dn)*Er,A[8]=(je*kr-Ke*_r+yt*sr)*Er,A[9]=(le*_r-Z*kr-Pe*sr)*Er,A[10]=(en*$n-rn*jn+Tn*On)*Er,A[11]=(Ot*jn-_t*$n-zt*On)*Er,A[12]=(Ke*gr-je*Dr-st*sr)*Er,A[13]=(Z*Dr-le*gr+Se*sr)*Er,A[14]=(rn*Dn-en*Zn-kn*On)*Er,A[15]=(_t*Zn-Ot*Dn+Bt*On)*Er,A):null},l.isChar=vr,l.isMapboxURL=ue,l.keysDifference=function(A,I){var Z=[];for(var le in A)le in I||Z.push(le);return Z},l.makeRequest=it,l.mapObject=v,l.mercatorXfromLng=lh,l.mercatorYfromLat=uh,l.mercatorZfromAltitude=ch,l.mul=Gh,l.multiply=of,l.mvt=Rl,l.normalize=function(A,I){var Z=I[0],le=I[1],Se=I[2],Pe=Z*Z+le*le+Se*Se;return Pe>0&&(Pe=1/Math.sqrt(Pe)),A[0]=I[0]*Pe,A[1]=I[1]*Pe,A[2]=I[2]*Pe,A},l.number=Yn,l.offscreenCanvasSupported=Qe,l.ortho=function(A,I,Z,le,Se,Pe,je){var Ke=1/(I-Z),st=1/(le-Se),yt=1/(Pe-je);return A[0]=-2*Ke,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*st,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*yt,A[11]=0,A[12]=(I+Z)*Ke,A[13]=(Se+le)*st,A[14]=(je+Pe)*yt,A[15]=1,A},l.parseGlyphPBF=function(A){return new Hu(A).readFields(Up,[])},l.pbf=Hu,l.performSymbolLayout=function(A,I,Z,le,Se,Pe,je){A.createArrays();var Ke=512*A.overscaling;A.tilePixelRatio=Wr/Ke,A.compareText={},A.iconsNeedLinear=!1;var st=A.layers[0].layout,yt=A.layers[0]._unevaluatedLayout._values,_t={};if(A.textSizeData.kind==="composite"){var Ot=A.textSizeData,Bt=Ot.minZoom,zt=Ot.maxZoom;_t.compositeTextSizes=[yt["text-size"].possiblyEvaluate(new Xr(Bt),je),yt["text-size"].possiblyEvaluate(new Xr(zt),je)]}if(A.iconSizeData.kind==="composite"){var en=A.iconSizeData,rn=en.minZoom,kn=en.maxZoom;_t.compositeIconSizes=[yt["icon-size"].possiblyEvaluate(new Xr(rn),je),yt["icon-size"].possiblyEvaluate(new Xr(kn),je)]}_t.layoutTextSize=yt["text-size"].possiblyEvaluate(new Xr(A.zoom+1),je),_t.layoutIconSize=yt["icon-size"].possiblyEvaluate(new Xr(A.zoom+1),je),_t.textMaxSize=yt["text-size"].possiblyEvaluate(new Xr(18));for(var Tn=st.get("text-line-height")*va,On=st.get("text-rotation-alignment")==="map"&&st.get("symbol-placement")!=="point",Dn=st.get("text-keep-upright"),jn=st.get("text-size"),Zn=function(){var sr=pr[$n],gr=st.get("text-font").evaluate(sr,{},je).join(","),_r=jn.evaluate(sr,{},je),Dr=_t.layoutTextSize.evaluate(sr,{},je),kr=_t.layoutIconSize.evaluate(sr,{},je),Or={horizontal:{},vertical:void 0},Er=sr.text,wr=[0,0];if(Er){var jr=Er.toString(),zr=st.get("text-letter-spacing").evaluate(sr,{},je)*va,hi=function(Rr){for(var qr=0,Fi=Rr;qr<Fi.length;qr+=1)if(ui=Fi[qr].charCodeAt(0),vr.Arabic(ui)||vr["Arabic Supplement"](ui)||vr["Arabic Extended-A"](ui)||vr["Arabic Presentation Forms-A"](ui)||vr["Arabic Presentation Forms-B"](ui))return!1;var ui;return!0}(jr)?zr:0,Pr=st.get("text-anchor").evaluate(sr,{},je),ii=st.get("text-variable-anchor");if(!ii){var vi=st.get("text-radial-offset").evaluate(sr,{},je);wr=vi?Kf(Pr,[vi*va,Fc]):st.get("text-offset").evaluate(sr,{},je).map(function(Rr){return Rr*va})}var yi=On?"center":st.get("text-justify").evaluate(sr,{},je),xi=st.get("symbol-placement"),pi=xi==="point"?st.get("text-max-width").evaluate(sr,{},je)*va:0,na=function(){A.allowVerticalPlacement&&Fa(jr)&&(Or.vertical=Zu(Er,I,Z,Se,gr,pi,Tn,Pr,"left",hi,wr,zo.vertical,!0,xi,Dr,_r))};if(!On&&ii){for(var Mi=yi==="auto"?ii.map(function(Rr){return Bc(Rr)}):[yi],ua=!1,ka=0;ka<Mi.length;ka++){var ma=Mi[ka];if(!Or.horizontal[ma])if(ua)Or.horizontal[ma]=Or.horizontal[0];else{var Ua=Zu(Er,I,Z,Se,gr,pi,Tn,"center",ma,hi,wr,zo.horizontal,!1,xi,Dr,_r);Ua&&(Or.horizontal[ma]=Ua,ua=Ua.positionedLines.length===1)}}na()}else{yi==="auto"&&(yi=Bc(Pr));var ya=Zu(Er,I,Z,Se,gr,pi,Tn,Pr,yi,hi,wr,zo.horizontal,!1,xi,Dr,_r);ya&&(Or.horizontal[yi]=ya),na(),Fa(jr)&&On&&Dn&&(Or.vertical=Zu(Er,I,Z,Se,gr,pi,Tn,Pr,yi,hi,wr,zo.vertical,!1,xi,Dr,_r))}}var aa=void 0,xa=!1;if(sr.icon&&sr.icon.name){var ca=le[sr.icon.name];ca&&(aa=function(Rr,qr,Fi){var ui=zc(Fi),Ci=ui.horizontalAlign,ki=ui.verticalAlign,Jr=qr[0],Bi=qr[1],Va=Jr-Rr.displaySize[0]*Ci,mo=Va+Rr.displaySize[0],Oa=Bi-Rr.displaySize[1]*ki;return{image:Rr,top:Oa,bottom:Oa+Rr.displaySize[1],left:Va,right:mo}}(Se[sr.icon.name],st.get("icon-offset").evaluate(sr,{},je),st.get("icon-anchor").evaluate(sr,{},je)),xa=ca.sdf,A.sdfIcons===void 0?A.sdfIcons=ca.sdf:A.sdfIcons!==ca.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ca.pixelRatio!==A.pixelRatio||st.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}var oa=Qf(Or.horizontal)||Or.vertical;A.iconsInText=!!oa&&oa.iconsInText,(oa||aa)&&function(Rr,qr,Fi,ui,Ci,ki,Jr,Bi,Va,mo,Oa){var Ss=ki.textMaxSize.evaluate(qr,{});Ss===void 0&&(Ss=Jr);var tl,fa=Rr.layers[0].layout,Es=fa.get("icon-offset").evaluate(qr,{},Oa),fs=Qf(Fi.horizontal),hs=24,Al=Jr/hs,nc=Rr.tilePixelRatio*Al,Ml=Rr.tilePixelRatio*Ss/hs,rc=Rr.tilePixelRatio*Bi,bu=Rr.tilePixelRatio*fa.get("symbol-spacing"),qc=fa.get("text-padding")*Rr.tilePixelRatio,ic=fa.get("icon-padding")*Rr.tilePixelRatio,Xl=fa.get("text-max-angle")/180*Math.PI,ac=fa.get("text-rotation-alignment")==="map"&&fa.get("symbol-placement")!=="point",oc=fa.get("icon-rotation-alignment")==="map"&&fa.get("symbol-placement")!=="point",_u=fa.get("symbol-placement"),Gc=bu/2,wu=fa.get("icon-text-fit");ui&&wu!=="none"&&(Rr.allowVerticalPlacement&&Fi.vertical&&(tl=jf(ui,Fi.vertical,wu,fa.get("icon-text-fit-padding"),Es,Al)),fs&&(ui=jf(ui,fs,wu,fa.get("icon-text-fit-padding"),Es,Al)));var Sl=function(fd,Eu){Eu.x<0||Eu.x>=Wr||Eu.y<0||Eu.y>=Wr||function(Gi,Ls,hd,yl,Kc,xh,fc,js,hc,Lu,pc,dc,$c,bh,Cu,_h,wh,Th,kh,Ah,Ro,gc,Mh,Us,pd){var Sh,Cl,$l,Ql,eu,tu=Gi.addToLineVertexArray(Ls,hd),Eh=0,Lh=0,Ch=0,Ph=0,Qc=-1,ef=-1,nl={},Oh=or(""),tf=0,nf=0;if(js._unevaluatedLayout.getValue("text-radial-offset")===void 0?(tf=(Sh=js.layout.get("text-offset").evaluate(Ro,{},Us).map(function(Ou){return Ou*va}))[0],nf=Sh[1]):(tf=js.layout.get("text-radial-offset").evaluate(Ro,{},Us)*va,nf=Fc),Gi.allowVerticalPlacement&&yl.vertical){var Ih=js.layout.get("text-rotate").evaluate(Ro,{},Us)+90,dd=yl.vertical;Ql=new Ku(hc,Ls,Lu,pc,dc,dd,$c,bh,Cu,Ih),fc&&(eu=new Ku(hc,Ls,Lu,pc,dc,fc,wh,Th,Cu,Ih))}if(Kc){var rf=js.layout.get("icon-rotate").evaluate(Ro,{}),Dh=js.layout.get("icon-text-fit")!=="none",zh=Xf(Kc,rf,Mh,Dh),af=fc?Xf(fc,rf,Mh,Dh):void 0;$l=new Ku(hc,Ls,Lu,pc,dc,Kc,wh,Th,!1,rf),Eh=4*zh.length;var Rh=Gi.iconSizeData,Pu=null;Rh.kind==="source"?(Pu=[Ms*js.layout.get("icon-size").evaluate(Ro,{})])[0]>vl&&S(Gi.layerIds[0]+': Value for "icon-size" is >= '+mu+'. Reduce your "icon-size".'):Rh.kind==="composite"&&((Pu=[Ms*gc.compositeIconSizes[0].evaluate(Ro,{},Us),Ms*gc.compositeIconSizes[1].evaluate(Ro,{},Us)])[0]>vl||Pu[1]>vl)&&S(Gi.layerIds[0]+': Value for "icon-size" is >= '+mu+'. Reduce your "icon-size".'),Gi.addSymbols(Gi.icon,zh,Pu,Ah,kh,Ro,!1,Ls,tu.lineStartIndex,tu.lineLength,-1,Us),Qc=Gi.icon.placedSymbolArray.length-1,af&&(Lh=4*af.length,Gi.addSymbols(Gi.icon,af,Pu,Ah,kh,Ro,zo.vertical,Ls,tu.lineStartIndex,tu.lineLength,-1,Us),ef=Gi.icon.placedSymbolArray.length-1)}for(var Fh in yl.horizontal){var vc=yl.horizontal[Fh];if(!Cl){Oh=or(vc.text);var gd=js.layout.get("text-rotate").evaluate(Ro,{},Us);Cl=new Ku(hc,Ls,Lu,pc,dc,vc,$c,bh,Cu,gd)}var Bh=vc.positionedLines.length===1;if(Ch+=$f(Gi,Ls,vc,xh,js,Cu,Ro,_h,tu,yl.vertical?zo.horizontal:zo.horizontalOnly,Bh?Object.keys(yl.horizontal):[Fh],nl,Qc,gc,Us),Bh)break}yl.vertical&&(Ph+=$f(Gi,Ls,yl.vertical,xh,js,Cu,Ro,_h,tu,zo.vertical,["vertical"],nl,ef,gc,Us));var vd=Cl?Cl.boxStartIndex:Gi.collisionBoxArray.length,md=Cl?Cl.boxEndIndex:Gi.collisionBoxArray.length,yd=Ql?Ql.boxStartIndex:Gi.collisionBoxArray.length,xd=Ql?Ql.boxEndIndex:Gi.collisionBoxArray.length,bd=$l?$l.boxStartIndex:Gi.collisionBoxArray.length,_d=$l?$l.boxEndIndex:Gi.collisionBoxArray.length,wd=eu?eu.boxStartIndex:Gi.collisionBoxArray.length,Td=eu?eu.boxEndIndex:Gi.collisionBoxArray.length,Vs=-1,mc=function(Ou,jh){return Ou&&Ou.circleDiameter?Math.max(Ou.circleDiameter,jh):jh};Vs=mc(Cl,Vs),Vs=mc(Ql,Vs),Vs=mc($l,Vs);var Nh=(Vs=mc(eu,Vs))>-1?1:0;Nh&&(Vs*=pd/va),Gi.glyphOffsetArray.length>=ri.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ro.sortKey!==void 0&&Gi.addToSortKeyRanges(Gi.symbolInstances.length,Ro.sortKey),Gi.symbolInstances.emplaceBack(Ls.x,Ls.y,nl.right>=0?nl.right:-1,nl.center>=0?nl.center:-1,nl.left>=0?nl.left:-1,nl.vertical||-1,Qc,ef,Oh,vd,md,yd,xd,bd,_d,wd,Td,Lu,Ch,Ph,Eh,Lh,Nh,0,$c,tf,nf,Vs)}(Rr,Eu,fd,Fi,ui,Ci,tl,Rr.layers[0],Rr.collisionBoxArray,qr.index,qr.sourceLayerIndex,Rr.index,nc,qc,ac,Va,rc,ic,oc,Es,qr,ki,mo,Oa,Jr)};if(_u==="line")for(var Jl=0,sc=Wf(qr.geometry,0,0,Wr,Wr);Jl<sc.length;Jl+=1)for(var lc=sc[Jl],Kl=0,uc=Wp(lc,bu,Xl,Fi.vertical||fs,ui,hs,Ml,Rr.overscaling,Wr);Kl<uc.length;Kl+=1){var cc=uc[Kl];fs&&$p(Rr,fs.text,Gc,cc)||Sl(lc,cc)}else if(_u==="line-center")for(var Tu=0,ku=qr.geometry;Tu<ku.length;Tu+=1){var El=ku[Tu];if(El.length>1){var Au=Yp(El,Xl,Fi.vertical||fs,ui,hs,Ml);Au&&Sl(El,Au)}}else if(qr.type==="Polygon")for(var Ll=0,Mu=Sc(qr.geometry,0);Ll<Mu.length;Ll+=1){var Su=Mu[Ll],gh=Jp(Su,16);Sl(Su[0],new jl(gh.x,gh.y,0))}else if(qr.type==="LineString")for(var Zc=0,vh=qr.geometry;Zc<vh.length;Zc+=1){var Yc=vh[Zc];Sl(Yc,new jl(Yc[0].x,Yc[0].y,0))}else if(qr.type==="Point")for(var Wc=0,mh=qr.geometry;Wc<mh.length;Wc+=1)for(var Xc=0,yh=mh[Wc];Xc<yh.length;Xc+=1){var Jc=yh[Xc];Sl([Jc],new jl(Jc.x,Jc.y,0))}}(A,sr,Or,aa,le,_t,Dr,kr,wr,xa,je)},$n=0,pr=A.features;$n<pr.length;$n+=1)Zn();Pe&&A.generateCollisionDebugBuffers()},l.perspective=function(A,I,Z,le,Se){var Pe,je=1/Math.tan(I/2);return A[0]=je/Z,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=je,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,Se!=null&&Se!==1/0?(Pe=1/(le-Se),A[10]=(Se+le)*Pe,A[14]=2*Se*le*Pe):(A[10]=-1,A[14]=-2*le),A},l.pick=function(A,I){for(var Z={},le=0;le<I.length;le++){var Se=I[le];Se in A&&(Z[Se]=A[Se])}return Z},l.plugin=_i,l.polygonIntersectsPolygon=ja,l.postMapLoadEvent=Fe,l.postTurnstileEvent=be,l.potpack=zf,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=xr,l.registerForPluginStateChange=function(A){return A({pluginStatus:Vi,pluginURL:ei}),Di.on("pluginStateChange",A),A},l.rotate=function(A,I,Z){var le=I[0],Se=I[1],Pe=I[2],je=I[3],Ke=Math.sin(Z),st=Math.cos(Z);return A[0]=le*st+Pe*Ke,A[1]=Se*st+je*Ke,A[2]=le*-Ke+Pe*st,A[3]=Se*-Ke+je*st,A},l.rotateX=function(A,I,Z){var le=Math.sin(Z),Se=Math.cos(Z),Pe=I[4],je=I[5],Ke=I[6],st=I[7],yt=I[8],_t=I[9],Ot=I[10],Bt=I[11];return I!==A&&(A[0]=I[0],A[1]=I[1],A[2]=I[2],A[3]=I[3],A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15]),A[4]=Pe*Se+yt*le,A[5]=je*Se+_t*le,A[6]=Ke*Se+Ot*le,A[7]=st*Se+Bt*le,A[8]=yt*Se-Pe*le,A[9]=_t*Se-je*le,A[10]=Ot*Se-Ke*le,A[11]=Bt*Se-st*le,A},l.rotateZ=function(A,I,Z){var le=Math.sin(Z),Se=Math.cos(Z),Pe=I[0],je=I[1],Ke=I[2],st=I[3],yt=I[4],_t=I[5],Ot=I[6],Bt=I[7];return I!==A&&(A[8]=I[8],A[9]=I[9],A[10]=I[10],A[11]=I[11],A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15]),A[0]=Pe*Se+yt*le,A[1]=je*Se+_t*le,A[2]=Ke*Se+Ot*le,A[3]=st*Se+Bt*le,A[4]=yt*Se-Pe*le,A[5]=_t*Se-je*le,A[6]=Ot*Se-Ke*le,A[7]=Bt*Se-st*le,A},l.scale=function(A,I,Z){var le=Z[0],Se=Z[1],Pe=Z[2];return A[0]=I[0]*le,A[1]=I[1]*le,A[2]=I[2]*le,A[3]=I[3]*le,A[4]=I[4]*Se,A[5]=I[5]*Se,A[6]=I[6]*Se,A[7]=I[7]*Se,A[8]=I[8]*Pe,A[9]=I[9]*Pe,A[10]=I[10]*Pe,A[11]=I[11]*Pe,A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15],A},l.scale$1=function(A,I,Z){return A[0]=I[0]*Z,A[1]=I[1]*Z,A[2]=I[2]*Z,A[3]=I[3]*Z,A},l.scale$2=function(A,I,Z){return A[0]=I[0]*Z,A[1]=I[1]*Z,A[2]=I[2]*Z,A},l.setCacheLimits=function(A,I){we=A,ye=I},l.setRTLTextPlugin=function(A,I,Z){if(Z===void 0&&(Z=!1),Vi===Xa||Vi===ho||Vi===Ii)throw new Error("setRTLTextPlugin cannot be called multiple times.");ei=K.resolveURL(A),Vi=Xa,ss=I,pa(),Z||Ks()},l.sphericalToCartesian=function(A){var I=A[0],Z=A[1],le=A[2];return Z+=90,Z*=Math.PI/180,le*=Math.PI/180,{x:I*Math.cos(Z)*Math.sin(le),y:I*Math.sin(Z)*Math.sin(le),z:I*Math.cos(le)}},l.sqrLen=Yh,l.styleSpec=De,l.sub=Zh,l.symbolSize=Zp,l.transformMat3=function(A,I,Z){var le=I[0],Se=I[1],Pe=I[2];return A[0]=le*Z[0]+Se*Z[3]+Pe*Z[6],A[1]=le*Z[1]+Se*Z[4]+Pe*Z[7],A[2]=le*Z[2]+Se*Z[5]+Pe*Z[8],A},l.transformMat4=Bu,l.translate=function(A,I,Z){var le,Se,Pe,je,Ke,st,yt,_t,Ot,Bt,zt,en,rn=Z[0],kn=Z[1],Tn=Z[2];return I===A?(A[12]=I[0]*rn+I[4]*kn+I[8]*Tn+I[12],A[13]=I[1]*rn+I[5]*kn+I[9]*Tn+I[13],A[14]=I[2]*rn+I[6]*kn+I[10]*Tn+I[14],A[15]=I[3]*rn+I[7]*kn+I[11]*Tn+I[15]):(le=I[0],Se=I[1],Pe=I[2],je=I[3],Ke=I[4],st=I[5],yt=I[6],_t=I[7],Ot=I[8],Bt=I[9],zt=I[10],en=I[11],A[0]=le,A[1]=Se,A[2]=Pe,A[3]=je,A[4]=Ke,A[5]=st,A[6]=yt,A[7]=_t,A[8]=Ot,A[9]=Bt,A[10]=zt,A[11]=en,A[12]=le*rn+Ke*kn+Ot*Tn+I[12],A[13]=Se*rn+st*kn+Bt*Tn+I[13],A[14]=Pe*rn+yt*kn+zt*Tn+I[14],A[15]=je*rn+_t*kn+en*Tn+I[15]),A},l.triggerPluginCompletionEvent=Ts,l.uniqueId=c,l.validateCustomStyleLayer=function(A){var I=[],Z=A.id;return Z===void 0&&I.push({message:"layers."+Z+': missing required property "id"'}),A.render===void 0&&I.push({message:"layers."+Z+': missing required method "render"'}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&I.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),I},l.validateLight=Oi,l.validateStyle=Zi,l.values=function(A){var I=[];for(var Z in A)I.push(A[Z]);return I},l.vectorTile=Rl,l.version=b,l.warnOnce=S,l.webpSupported=Y,l.window=self,l.wrap=a}),k(0,function(l){function T(Ze){var Xe=typeof Ze;if(Xe==="number"||Xe==="boolean"||Xe==="string"||Ze==null)return JSON.stringify(Ze);if(Array.isArray(Ze)){for(var Ve="[",We=0,at=Ze;We<at.length;We+=1)Ve+=T(at[We])+",";return Ve+"]"}for(var et=Object.keys(Ze).sort(),De="{",Be=0;Be<et.length;Be++)De+=JSON.stringify(et[Be])+":"+T(Ze[et[Be]])+",";return De+"}"}function b(Ze){for(var Xe="",Ve=0,We=l.refProperties;Ve<We.length;Ve+=1)Xe+="/"+T(Ze[We[Ve]]);return Xe}var d=function(Ze){this.keyCache={},Ze&&this.replace(Ze)};d.prototype.replace=function(Ze){this._layerConfigs={},this._layers={},this.update(Ze,[])},d.prototype.update=function(Ze,Xe){for(var Ve=this,We=0,at=Ze;We<at.length;We+=1){var et=at[We];this._layerConfigs[et.id]=et;var De=this._layers[et.id]=l.createStyleLayer(et);De._featureFilter=l.featureFilter(De.filter),this.keyCache[et.id]&&delete this.keyCache[et.id]}for(var Be=0,nt=Xe;Be<nt.length;Be+=1){var tt=nt[Be];delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt]}this.familiesBySource={};for(var dt=0,ht=function(It,Dt){for(var Nt={},Qt=0;Qt<It.length;Qt++){var jt=Dt&&Dt[It[Qt].id]||b(It[Qt]);Dt&&(Dt[It[Qt].id]=jt);var Ut=Nt[jt];Ut||(Ut=Nt[jt]=[]),Ut.push(It[Qt])}var Xt=[];for(var gn in Nt)Xt.push(Nt[gn]);return Xt}(l.values(this._layerConfigs),this.keyCache);dt<ht.length;dt+=1){var gt=ht[dt].map(function(It){return Ve._layers[It.id]}),ut=gt[0];if(ut.visibility!=="none"){var wt=ut.source||"",ct=this.familiesBySource[wt];ct||(ct=this.familiesBySource[wt]={});var ft=ut.sourceLayer||"_geojsonTileLayer",bt=ct[ft];bt||(bt=ct[ft]=[]),bt.push(gt)}}};var s=function(Ze){var Xe={},Ve=[];for(var We in Ze){var at=Ze[We],et=Xe[We]={};for(var De in at){var Be=at[+De];if(Be&&Be.bitmap.width!==0&&Be.bitmap.height!==0){var nt={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};Ve.push(nt),et[De]={rect:nt,metrics:Be.metrics}}}}var tt=l.potpack(Ve),dt=tt.w,ht=tt.h,gt=new l.AlphaImage({width:dt||1,height:ht||1});for(var ut in Ze){var wt=Ze[ut];for(var ct in wt){var ft=wt[+ct];if(ft&&ft.bitmap.width!==0&&ft.bitmap.height!==0){var bt=Xe[ut][ct].rect;l.AlphaImage.copy(ft.bitmap,gt,{x:0,y:0},{x:bt.x+1,y:bt.y+1},ft.bitmap)}}}this.image=gt,this.positions=Xe};l.register("GlyphAtlas",s);var t=function(Ze){this.tileID=new l.OverscaledTileID(Ze.tileID.overscaledZ,Ze.tileID.wrap,Ze.tileID.canonical.z,Ze.tileID.canonical.x,Ze.tileID.canonical.y),this.uid=Ze.uid,this.zoom=Ze.zoom,this.pixelRatio=Ze.pixelRatio,this.tileSize=Ze.tileSize,this.source=Ze.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ze.showCollisionBoxes,this.collectResourceTiming=!!Ze.collectResourceTiming,this.returnDependencies=!!Ze.returnDependencies,this.promoteId=Ze.promoteId};function i(Ze,Xe,Ve){for(var We=new l.EvaluationParameters(Xe),at=0,et=Ze;at<et.length;at+=1)et[at].recalculate(We,Ve)}function r(Ze,Xe){var Ve=l.getArrayBuffer(Ze.request,function(We,at,et,De){We?Xe(We):at&&Xe(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(at)),rawData:at,cacheControl:et,expires:De})});return function(){Ve.cancel(),Xe()}}t.prototype.parse=function(Ze,Xe,Ve,We,at){var et=this;this.status="parsing",this.data=Ze,this.collisionBoxArray=new l.CollisionBoxArray;var De=new l.DictionaryCoder(Object.keys(Ze.layers).sort()),Be=new l.FeatureIndex(this.tileID,this.promoteId);Be.bucketLayerIDs=[];var nt,tt,dt,ht,gt={},ut={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},wt=Xe.familiesBySource[this.source];for(var ct in wt){var ft=Ze.layers[ct];if(ft){ft.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+ct+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var bt=De.encode(ct),It=[],Dt=0;Dt<ft.length;Dt++){var Nt=ft.feature(Dt),Qt=Be.getId(Nt,ct);It.push({feature:Nt,id:Qt,index:Dt,sourceLayerIndex:bt})}for(var jt=0,Ut=wt[ct];jt<Ut.length;jt+=1){var Xt=Ut[jt],gn=Xt[0];gn.minzoom&&this.zoom<Math.floor(gn.minzoom)||gn.maxzoom&&this.zoom>=gn.maxzoom||gn.visibility!=="none"&&(i(Xt,this.zoom,Ve),(gt[gn.id]=gn.createBucket({index:Be.bucketLayerIDs.length,layers:Xt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:bt,sourceID:this.source})).populate(It,ut,this.tileID.canonical),Be.bucketLayerIDs.push(Xt.map(function(Kt){return Kt.id})))}}}var Mn=l.mapObject(ut.glyphDependencies,function(Kt){return Object.keys(Kt).map(Number)});Object.keys(Mn).length?We.send("getGlyphs",{uid:this.uid,stacks:Mn},function(Kt,sn){nt||(nt=Kt,tt=sn,nn.call(et))}):tt={};var cn=Object.keys(ut.iconDependencies);cn.length?We.send("getImages",{icons:cn,source:this.source,tileID:this.tileID,type:"icons"},function(Kt,sn){nt||(nt=Kt,dt=sn,nn.call(et))}):dt={};var qt=Object.keys(ut.patternDependencies);function nn(){if(nt)return at(nt);if(tt&&dt&&ht){var Kt=new s(tt),sn=new l.ImageAtlas(dt,ht);for(var hn in gt){var bn=gt[hn];bn instanceof l.SymbolBucket?(i(bn.layers,this.zoom,Ve),l.performSymbolLayout(bn,tt,Kt.positions,dt,sn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):bn.hasPattern&&(bn instanceof l.LineBucket||bn instanceof l.FillBucket||bn instanceof l.FillExtrusionBucket)&&(i(bn.layers,this.zoom,Ve),bn.addFeatures(ut,this.tileID.canonical,sn.patternPositions))}this.status="done",at(null,{buckets:l.values(gt).filter(function(yn){return!yn.isEmpty()}),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Kt.image,imageAtlas:sn,glyphMap:this.returnDependencies?tt:null,iconMap:this.returnDependencies?dt:null,glyphPositions:this.returnDependencies?Kt.positions:null})}}qt.length?We.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"patterns"},function(Kt,sn){nt||(nt=Kt,ht=sn,nn.call(et))}):ht={},nn.call(this)};var n=function(Ze,Xe,Ve,We){this.actor=Ze,this.layerIndex=Xe,this.availableImages=Ve,this.loadVectorData=We||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Ze,Xe){var Ve=this,We=Ze.uid;this.loading||(this.loading={});var at=!!(Ze&&Ze.request&&Ze.request.collectResourceTiming)&&new l.RequestPerformance(Ze.request),et=this.loading[We]=new t(Ze);et.abort=this.loadVectorData(Ze,function(De,Be){if(delete Ve.loading[We],De||!Be)return et.status="done",Ve.loaded[We]=et,Xe(De);var nt=Be.rawData,tt={};Be.expires&&(tt.expires=Be.expires),Be.cacheControl&&(tt.cacheControl=Be.cacheControl);var dt={};if(at){var ht=at.finish();ht&&(dt.resourceTiming=JSON.parse(JSON.stringify(ht)))}et.vectorTile=Be.vectorTile,et.parse(Be.vectorTile,Ve.layerIndex,Ve.availableImages,Ve.actor,function(gt,ut){if(gt||!ut)return Xe(gt);Xe(null,l.extend({rawTileData:nt.slice(0)},ut,tt,dt))}),Ve.loaded=Ve.loaded||{},Ve.loaded[We]=et})},n.prototype.reloadTile=function(Ze,Xe){var Ve=this,We=this.loaded,at=Ze.uid,et=this;if(We&&We[at]){var De=We[at];De.showCollisionBoxes=Ze.showCollisionBoxes;var Be=function(nt,tt){var dt=De.reloadCallback;dt&&(delete De.reloadCallback,De.parse(De.vectorTile,et.layerIndex,Ve.availableImages,et.actor,dt)),Xe(nt,tt)};De.status==="parsing"?De.reloadCallback=Be:De.status==="done"&&(De.vectorTile?De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,Be):Be())}},n.prototype.abortTile=function(Ze,Xe){var Ve=this.loading,We=Ze.uid;Ve&&Ve[We]&&Ve[We].abort&&(Ve[We].abort(),delete Ve[We]),Xe()},n.prototype.removeTile=function(Ze,Xe){var Ve=this.loaded,We=Ze.uid;Ve&&Ve[We]&&delete Ve[We],Xe()};var o=l.window.ImageBitmap,a=function(){this.loaded={}};a.prototype.loadTile=function(Ze,Xe){var Ve=Ze.uid,We=Ze.encoding,at=Ze.rawImageData,et=o&&at instanceof o?this.getImageData(at):at,De=new l.DEMData(Ve,et,We);this.loaded=this.loaded||{},this.loaded[Ve]=De,Xe(null,De)},a.prototype.getImageData=function(Ze){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ze.width,Ze.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ze.width,this.offscreenCanvas.height=Ze.height,this.offscreenCanvasContext.drawImage(Ze,0,0,Ze.width,Ze.height);var Xe=this.offscreenCanvasContext.getImageData(-1,-1,Ze.width+2,Ze.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:Xe.width,height:Xe.height},Xe.data)},a.prototype.removeTile=function(Ze){var Xe=this.loaded,Ve=Ze.uid;Xe&&Xe[Ve]&&delete Xe[Ve]};var u=function Ze(Xe,Ve){var We,at=Xe&&Xe.type;if(at==="FeatureCollection")for(We=0;We<Xe.features.length;We++)Ze(Xe.features[We],Ve);else if(at==="GeometryCollection")for(We=0;We<Xe.geometries.length;We++)Ze(Xe.geometries[We],Ve);else if(at==="Feature")Ze(Xe.geometry,Ve);else if(at==="Polygon")p(Xe.coordinates,Ve);else if(at==="MultiPolygon")for(We=0;We<Xe.coordinates.length;We++)p(Xe.coordinates[We],Ve);return Xe};function p(Ze,Xe){if(Ze.length!==0){c(Ze[0],Xe);for(var Ve=1;Ve<Ze.length;Ve++)c(Ze[Ve],!Xe)}}function c(Ze,Xe){for(var Ve=0,We=0,at=Ze.length,et=at-1;We<at;et=We++)Ve+=(Ze[We][0]-Ze[et][0])*(Ze[et][1]+Ze[We][1]);Ve>=0!=!!Xe&&Ze.reverse()}var x=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(Ze){this._feature=Ze,this.extent=l.EXTENT,this.type=Ze.type,this.properties=Ze.tags,"id"in Ze&&!isNaN(Ze.id)&&(this.id=parseInt(Ze.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ze=[],Xe=0,Ve=this._feature.geometry;Xe<Ve.length;Xe+=1){var We=Ve[Xe];Ze.push([new l.Point$1(We[0],We[1])])}return Ze}for(var at=[],et=0,De=this._feature.geometry;et<De.length;et+=1){for(var Be=[],nt=0,tt=De[et];nt<tt.length;nt+=1){var dt=tt[nt];Be.push(new l.Point$1(dt[0],dt[1]))}at.push(Be)}return at},g.prototype.toGeoJSON=function(Ze,Xe,Ve){return x.call(this,Ze,Xe,Ve)};var h=function(Ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Ze.length,this._features=Ze};h.prototype.feature=function(Ze){return new g(this._features[Ze])};var y=l.vectorTile.VectorTileFeature,v=m;function m(Ze,Xe){this.options=Xe||{},this.features=Ze,this.length=Ze.length}function _(Ze,Xe){this.id=typeof Ze.id=="number"?Ze.id:void 0,this.type=Ze.type,this.rawGeometry=Ze.type===1?[Ze.geometry]:Ze.geometry,this.properties=Ze.tags,this.extent=Xe||4096}m.prototype.feature=function(Ze){return new _(this.features[Ze],this.options.extent)},_.prototype.loadGeometry=function(){var Ze=this.rawGeometry;this.geometry=[];for(var Xe=0;Xe<Ze.length;Xe++){for(var Ve=Ze[Xe],We=[],at=0;at<Ve.length;at++)We.push(new l.Point$1(Ve[at][0],Ve[at][1]));this.geometry.push(We)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ze=this.geometry,Xe=1/0,Ve=-1/0,We=1/0,at=-1/0,et=0;et<Ze.length;et++)for(var De=Ze[et],Be=0;Be<De.length;Be++){var nt=De[Be];Xe=Math.min(Xe,nt.x),Ve=Math.max(Ve,nt.x),We=Math.min(We,nt.y),at=Math.max(at,nt.y)}return[Xe,We,Ve,at]},_.prototype.toGeoJSON=y.prototype.toGeoJSON;var f=L,S=L,w=function(Ze,Xe){Xe=Xe||{};var Ve={};for(var We in Ze)Ve[We]=new v(Ze[We].features,Xe),Ve[We].name=We,Ve[We].version=Xe.version,Ve[We].extent=Xe.extent;return L({layers:Ve})},E=v;function L(Ze){var Xe=new l.pbf;return function(Ve,We){for(var at in Ve.layers)We.writeMessage(3,C,Ve.layers[at])}(Ze,Xe),Xe.finish()}function C(Ze,Xe){var Ve;Xe.writeVarintField(15,Ze.version||1),Xe.writeStringField(1,Ze.name||""),Xe.writeVarintField(5,Ze.extent||4096);var We={keys:[],values:[],keycache:{},valuecache:{}};for(Ve=0;Ve<Ze.length;Ve++)We.feature=Ze.feature(Ve),Xe.writeMessage(2,P,We);var at=We.keys;for(Ve=0;Ve<at.length;Ve++)Xe.writeStringField(3,at[Ve]);var et=We.values;for(Ve=0;Ve<et.length;Ve++)Xe.writeMessage(4,N,et[Ve])}function P(Ze,Xe){var Ve=Ze.feature;Ve.id!==void 0&&Xe.writeVarintField(1,Ve.id),Xe.writeMessage(2,z,Ze),Xe.writeVarintField(3,Ve.type),Xe.writeMessage(4,H,Ve)}function z(Ze,Xe){var Ve=Ze.feature,We=Ze.keys,at=Ze.values,et=Ze.keycache,De=Ze.valuecache;for(var Be in Ve.properties){var nt=et[Be];nt===void 0&&(We.push(Be),nt=We.length-1,et[Be]=nt),Xe.writeVarint(nt);var tt=Ve.properties[Be],dt=typeof tt;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(tt=JSON.stringify(tt));var ht=dt+":"+tt,gt=De[ht];gt===void 0&&(at.push(tt),gt=at.length-1,De[ht]=gt),Xe.writeVarint(gt)}}function G(Ze,Xe){return(Xe<<3)+(7&Ze)}function O(Ze){return Ze<<1^Ze>>31}function H(Ze,Xe){for(var Ve=Ze.loadGeometry(),We=Ze.type,at=0,et=0,De=Ve.length,Be=0;Be<De;Be++){var nt=Ve[Be],tt=1;We===1&&(tt=nt.length),Xe.writeVarint(G(1,tt));for(var dt=We===3?nt.length-1:nt.length,ht=0;ht<dt;ht++){ht===1&&We!==1&&Xe.writeVarint(G(2,dt-1));var gt=nt[ht].x-at,ut=nt[ht].y-et;Xe.writeVarint(O(gt)),Xe.writeVarint(O(ut)),at+=gt,et+=ut}We===3&&Xe.writeVarint(G(7,1))}}function N(Ze,Xe){var Ve=typeof Ze;Ve==="string"?Xe.writeStringField(1,Ze):Ve==="boolean"?Xe.writeBooleanField(7,Ze):Ve==="number"&&(Ze%1!=0?Xe.writeDoubleField(3,Ze):Ze<0?Xe.writeSVarintField(6,Ze):Xe.writeVarintField(5,Ze))}function B(Ze,Xe,Ve,We,at,et){if(!(at-We<=Ve)){var De=We+at>>1;V(Ze,Xe,De,We,at,et%2),B(Ze,Xe,Ve,We,De-1,et+1),B(Ze,Xe,Ve,De+1,at,et+1)}}function V(Ze,Xe,Ve,We,at,et){for(;at>We;){if(at-We>600){var De=at-We+1,Be=Ve-We+1,nt=Math.log(De),tt=.5*Math.exp(2*nt/3),dt=.5*Math.sqrt(nt*tt*(De-tt)/De)*(Be-De/2<0?-1:1);V(Ze,Xe,Ve,Math.max(We,Math.floor(Ve-Be*tt/De+dt)),Math.min(at,Math.floor(Ve+(De-Be)*tt/De+dt)),et)}var ht=Xe[2*Ve+et],gt=We,ut=at;for(q(Ze,Xe,We,Ve),Xe[2*at+et]>ht&&q(Ze,Xe,We,at);gt<ut;){for(q(Ze,Xe,gt,ut),gt++,ut--;Xe[2*gt+et]<ht;)gt++;for(;Xe[2*ut+et]>ht;)ut--}Xe[2*We+et]===ht?q(Ze,Xe,We,ut):q(Ze,Xe,++ut,at),ut<=Ve&&(We=ut+1),Ve<=ut&&(at=ut-1)}}function q(Ze,Xe,Ve,We){te(Ze,Ve,We),te(Xe,2*Ve,2*We),te(Xe,2*Ve+1,2*We+1)}function te(Ze,Xe,Ve){var We=Ze[Xe];Ze[Xe]=Ze[Ve],Ze[Ve]=We}function K(Ze,Xe,Ve,We){var at=Ze-Ve,et=Xe-We;return at*at+et*et}f.fromVectorTileJs=S,f.fromGeojsonVt=w,f.GeoJSONWrapper=E;var J=function(Ze){return Ze[0]},Y=function(Ze){return Ze[1]},W=function(Ze,Xe,Ve,We,at){Xe===void 0&&(Xe=J),Ve===void 0&&(Ve=Y),We===void 0&&(We=64),at===void 0&&(at=Float64Array),this.nodeSize=We,this.points=Ze;for(var et=Ze.length<65536?Uint16Array:Uint32Array,De=this.ids=new et(Ze.length),Be=this.coords=new at(2*Ze.length),nt=0;nt<Ze.length;nt++)De[nt]=nt,Be[2*nt]=Xe(Ze[nt]),Be[2*nt+1]=Ve(Ze[nt]);B(De,Be,We,0,De.length-1,0)};W.prototype.range=function(Ze,Xe,Ve,We){return function(at,et,De,Be,nt,tt,dt){for(var ht,gt,ut=[0,at.length-1,0],wt=[];ut.length;){var ct=ut.pop(),ft=ut.pop(),bt=ut.pop();if(ft-bt<=dt)for(var It=bt;It<=ft;It++)ht=et[2*It],gt=et[2*It+1],ht>=De&&ht<=nt&&gt>=Be&&gt<=tt&&wt.push(at[It]);else{var Dt=Math.floor((bt+ft)/2);ht=et[2*Dt],gt=et[2*Dt+1],ht>=De&&ht<=nt&&gt>=Be&&gt<=tt&&wt.push(at[Dt]);var Nt=(ct+1)%2;(ct===0?De<=ht:Be<=gt)&&(ut.push(bt),ut.push(Dt-1),ut.push(Nt)),(ct===0?nt>=ht:tt>=gt)&&(ut.push(Dt+1),ut.push(ft),ut.push(Nt))}}return wt}(this.ids,this.coords,Ze,Xe,Ve,We,this.nodeSize)},W.prototype.within=function(Ze,Xe,Ve){return function(We,at,et,De,Be,nt){for(var tt=[0,We.length-1,0],dt=[],ht=Be*Be;tt.length;){var gt=tt.pop(),ut=tt.pop(),wt=tt.pop();if(ut-wt<=nt)for(var ct=wt;ct<=ut;ct++)K(at[2*ct],at[2*ct+1],et,De)<=ht&&dt.push(We[ct]);else{var ft=Math.floor((wt+ut)/2),bt=at[2*ft],It=at[2*ft+1];K(bt,It,et,De)<=ht&&dt.push(We[ft]);var Dt=(gt+1)%2;(gt===0?et-Be<=bt:De-Be<=It)&&(tt.push(wt),tt.push(ft-1),tt.push(Dt)),(gt===0?et+Be>=bt:De+Be>=It)&&(tt.push(ft+1),tt.push(ut),tt.push(Dt))}}return dt}(this.ids,this.coords,Ze,Xe,Ve,this.nodeSize)};var Q={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ze){return Ze}},ne=function(Ze){this.options=me(Object.create(Q),Ze),this.trees=new Array(this.options.maxZoom+1)};function re(Ze,Xe,Ve,We,at){return{x:Ze,y:Xe,zoom:1/0,id:Ve,parentId:-1,numPoints:We,properties:at}}function ae(Ze,Xe){var Ve=Ze.geometry.coordinates,We=Ve[0],at=Ve[1];return{x:ge(We),y:_e(at),zoom:1/0,index:Xe,parentId:-1}}function ue(Ze){return{type:"Feature",id:Ze.id,properties:pe(Ze),geometry:{type:"Point",coordinates:[(We=Ze.x,360*(We-.5)),(Xe=Ze.y,Ve=(180-360*Xe)*Math.PI/180,360*Math.atan(Math.exp(Ve))/Math.PI-90)]}};var Xe,Ve,We}function pe(Ze){var Xe=Ze.numPoints,Ve=Xe>=1e4?Math.round(Xe/1e3)+"k":Xe>=1e3?Math.round(Xe/100)/10+"k":Xe;return me(me({},Ze.properties),{cluster:!0,cluster_id:Ze.id,point_count:Xe,point_count_abbreviated:Ve})}function ge(Ze){return Ze/360+.5}function _e(Ze){var Xe=Math.sin(Ze*Math.PI/180),Ve=.5-.25*Math.log((1+Xe)/(1-Xe))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function me(Ze,Xe){for(var Ve in Xe)Ze[Ve]=Xe[Ve];return Ze}function ve(Ze){return Ze.x}function Oe(Ze){return Ze.y}function Me(Ze,Xe,Ve,We){for(var at,et=We,De=Ve-Xe>>1,Be=Ve-Xe,nt=Ze[Xe],tt=Ze[Xe+1],dt=Ze[Ve],ht=Ze[Ve+1],gt=Xe+3;gt<Ve;gt+=3){var ut=Te(Ze[gt],Ze[gt+1],nt,tt,dt,ht);if(ut>et)at=gt,et=ut;else if(ut===et){var wt=Math.abs(gt-De);wt<Be&&(at=gt,Be=wt)}}et>We&&(at-Xe>3&&Me(Ze,Xe,at,We),Ze[at+2]=et,Ve-at>3&&Me(Ze,at,Ve,We))}function Te(Ze,Xe,Ve,We,at,et){var De=at-Ve,Be=et-We;if(De!==0||Be!==0){var nt=((Ze-Ve)*De+(Xe-We)*Be)/(De*De+Be*Be);nt>1?(Ve=at,We=et):nt>0&&(Ve+=De*nt,We+=Be*nt)}return(De=Ze-Ve)*De+(Be=Xe-We)*Be}function se(Ze,Xe,Ve,We){var at={id:Ze===void 0?null:Ze,type:Xe,geometry:Ve,tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(et){var De=et.geometry,Be=et.type;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")oe(et,De);else if(Be==="Polygon"||Be==="MultiLineString")for(var nt=0;nt<De.length;nt++)oe(et,De[nt]);else if(Be==="MultiPolygon")for(nt=0;nt<De.length;nt++)for(var tt=0;tt<De[nt].length;tt++)oe(et,De[nt][tt])}(at),at}function oe(Ze,Xe){for(var Ve=0;Ve<Xe.length;Ve+=3)Ze.minX=Math.min(Ze.minX,Xe[Ve]),Ze.minY=Math.min(Ze.minY,Xe[Ve+1]),Ze.maxX=Math.max(Ze.maxX,Xe[Ve]),Ze.maxY=Math.max(Ze.maxY,Xe[Ve+1])}function he(Ze,Xe,Ve,We){if(Xe.geometry){var at=Xe.geometry.coordinates,et=Xe.geometry.type,De=Math.pow(Ve.tolerance/((1<<Ve.maxZoom)*Ve.extent),2),Be=[],nt=Xe.id;if(Ve.promoteId?nt=Xe.properties[Ve.promoteId]:Ve.generateId&&(nt=We||0),et==="Point")Ee(at,Be);else if(et==="MultiPoint")for(var tt=0;tt<at.length;tt++)Ee(at[tt],Be);else if(et==="LineString")ke(at,Be,De,!1);else if(et==="MultiLineString"){if(Ve.lineMetrics){for(tt=0;tt<at.length;tt++)Be=[],ke(at[tt],Be,De,!1),Ze.push(se(nt,"LineString",Be,Xe.properties));return}be(at,Be,De,!1)}else if(et==="Polygon")be(at,Be,De,!0);else{if(et!=="MultiPolygon"){if(et==="GeometryCollection"){for(tt=0;tt<Xe.geometry.geometries.length;tt++)he(Ze,{id:nt,geometry:Xe.geometry.geometries[tt],properties:Xe.properties},Ve,We);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<at.length;tt++){var dt=[];be(at[tt],dt,De,!0),Be.push(dt)}}Ze.push(se(nt,et,Be,Xe.properties))}}function Ee(Ze,Xe){Xe.push(Ie(Ze[0])),Xe.push(Fe(Ze[1])),Xe.push(0)}function ke(Ze,Xe,Ve,We){for(var at,et,De=0,Be=0;Be<Ze.length;Be++){var nt=Ie(Ze[Be][0]),tt=Fe(Ze[Be][1]);Xe.push(nt),Xe.push(tt),Xe.push(0),Be>0&&(De+=We?(at*tt-nt*et)/2:Math.sqrt(Math.pow(nt-at,2)+Math.pow(tt-et,2))),at=nt,et=tt}var dt=Xe.length-3;Xe[2]=1,Me(Xe,0,dt,Ve),Xe[dt+2]=1,Xe.size=Math.abs(De),Xe.start=0,Xe.end=Xe.size}function be(Ze,Xe,Ve,We){for(var at=0;at<Ze.length;at++){var et=[];ke(Ze[at],et,Ve,We),Xe.push(et)}}function Ie(Ze){return Ze/360+.5}function Fe(Ze){var Xe=Math.sin(Ze*Math.PI/180),Ve=.5-.25*Math.log((1+Xe)/(1-Xe))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function ce(Ze,Xe,Ve,We,at,et,De,Be){if(We/=Xe,et>=(Ve/=Xe)&&De<We)return Ze;if(De<Ve||et>=We)return null;for(var nt=[],tt=0;tt<Ze.length;tt++){var dt=Ze[tt],ht=dt.geometry,gt=dt.type,ut=at===0?dt.minX:dt.minY,wt=at===0?dt.maxX:dt.maxY;if(ut>=Ve&&wt<We)nt.push(dt);else if(!(wt<Ve||ut>=We)){var ct=[];if(gt==="Point"||gt==="MultiPoint")we(ht,ct,Ve,We,at);else if(gt==="LineString")ye(ht,ct,Ve,We,at,!1,Be.lineMetrics);else if(gt==="MultiLineString")Re(ht,ct,Ve,We,at,!1);else if(gt==="Polygon")Re(ht,ct,Ve,We,at,!0);else if(gt==="MultiPolygon")for(var ft=0;ft<ht.length;ft++){var bt=[];Re(ht[ft],bt,Ve,We,at,!0),bt.length&&ct.push(bt)}if(ct.length){if(Be.lineMetrics&&gt==="LineString"){for(ft=0;ft<ct.length;ft++)nt.push(se(dt.id,gt,ct[ft],dt.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(ct.length===1?(gt="LineString",ct=ct[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=ct.length===3?"Point":"MultiPoint"),nt.push(se(dt.id,gt,ct,dt.tags))}}}return nt.length?nt:null}function we(Ze,Xe,Ve,We,at){for(var et=0;et<Ze.length;et+=3){var De=Ze[et+at];De>=Ve&&De<=We&&(Xe.push(Ze[et]),Xe.push(Ze[et+1]),Xe.push(Ze[et+2]))}}function ye(Ze,Xe,Ve,We,at,et,De){for(var Be,nt,tt=Ce(Ze),dt=at===0?He:Ge,ht=Ze.start,gt=0;gt<Ze.length-3;gt+=3){var ut=Ze[gt],wt=Ze[gt+1],ct=Ze[gt+2],ft=Ze[gt+3],bt=Ze[gt+4],It=at===0?ut:wt,Dt=at===0?ft:bt,Nt=!1;De&&(Be=Math.sqrt(Math.pow(ut-ft,2)+Math.pow(wt-bt,2))),It<Ve?Dt>Ve&&(nt=dt(tt,ut,wt,ft,bt,Ve),De&&(tt.start=ht+Be*nt)):It>We?Dt<We&&(nt=dt(tt,ut,wt,ft,bt,We),De&&(tt.start=ht+Be*nt)):ze(tt,ut,wt,ct),Dt<Ve&&It>=Ve&&(nt=dt(tt,ut,wt,ft,bt,Ve),Nt=!0),Dt>We&&It<=We&&(nt=dt(tt,ut,wt,ft,bt,We),Nt=!0),!et&&Nt&&(De&&(tt.end=ht+Be*nt),Xe.push(tt),tt=Ce(Ze)),De&&(ht+=Be)}var Qt=Ze.length-3;ut=Ze[Qt],wt=Ze[Qt+1],ct=Ze[Qt+2],(It=at===0?ut:wt)>=Ve&&It<=We&&ze(tt,ut,wt,ct),Qt=tt.length-3,et&&Qt>=3&&(tt[Qt]!==tt[0]||tt[Qt+1]!==tt[1])&&ze(tt,tt[0],tt[1],tt[2]),tt.length&&Xe.push(tt)}function Ce(Ze){var Xe=[];return Xe.size=Ze.size,Xe.start=Ze.start,Xe.end=Ze.end,Xe}function Re(Ze,Xe,Ve,We,at,et){for(var De=0;De<Ze.length;De++)ye(Ze[De],Xe,Ve,We,at,et,!1)}function ze(Ze,Xe,Ve,We){Ze.push(Xe),Ze.push(Ve),Ze.push(We)}function He(Ze,Xe,Ve,We,at,et){var De=(et-Xe)/(We-Xe);return Ze.push(et),Ze.push(Ve+(at-Ve)*De),Ze.push(1),De}function Ge(Ze,Xe,Ve,We,at,et){var De=(et-Ve)/(at-Ve);return Ze.push(Xe+(We-Xe)*De),Ze.push(et),Ze.push(1),De}function Je(Ze,Xe){for(var Ve=[],We=0;We<Ze.length;We++){var at,et=Ze[We],De=et.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")at=ot(et.geometry,Xe);else if(De==="MultiLineString"||De==="Polygon"){at=[];for(var Be=0;Be<et.geometry.length;Be++)at.push(ot(et.geometry[Be],Xe))}else if(De==="MultiPolygon")for(at=[],Be=0;Be<et.geometry.length;Be++){for(var nt=[],tt=0;tt<et.geometry[Be].length;tt++)nt.push(ot(et.geometry[Be][tt],Xe));at.push(nt)}Ve.push(se(et.id,De,at,et.tags))}return Ve}function ot(Ze,Xe){var Ve=[];Ve.size=Ze.size,Ze.start!==void 0&&(Ve.start=Ze.start,Ve.end=Ze.end);for(var We=0;We<Ze.length;We+=3)Ve.push(Ze[We]+Xe,Ze[We+1],Ze[We+2]);return Ve}function Qe(Ze,Xe){if(Ze.transformed)return Ze;var Ve,We,at,et=1<<Ze.z,De=Ze.x,Be=Ze.y;for(Ve=0;Ve<Ze.features.length;Ve++){var nt=Ze.features[Ve],tt=nt.geometry,dt=nt.type;if(nt.geometry=[],dt===1)for(We=0;We<tt.length;We+=2)nt.geometry.push(vt(tt[We],tt[We+1],Xe,et,De,Be));else for(We=0;We<tt.length;We++){var ht=[];for(at=0;at<tt[We].length;at+=2)ht.push(vt(tt[We][at],tt[We][at+1],Xe,et,De,Be));nt.geometry.push(ht)}}return Ze.transformed=!0,Ze}function vt(Ze,Xe,Ve,We,at,et){return[Math.round(Ve*(Ze*We-at)),Math.round(Ve*(Xe*We-et))]}function xt(Ze,Xe,Ve,We,at){for(var et=Xe===at.maxZoom?0:at.tolerance/((1<<Xe)*at.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ve,y:We,z:Xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Be=0;Be<Ze.length;Be++){De.numFeatures++,mt(De,Ze[Be],et,at);var nt=Ze[Be].minX,tt=Ze[Be].minY,dt=Ze[Be].maxX,ht=Ze[Be].maxY;nt<De.minX&&(De.minX=nt),tt<De.minY&&(De.minY=tt),dt>De.maxX&&(De.maxX=dt),ht>De.maxY&&(De.maxY=ht)}return De}function mt(Ze,Xe,Ve,We){var at=Xe.geometry,et=Xe.type,De=[];if(et==="Point"||et==="MultiPoint")for(var Be=0;Be<at.length;Be+=3)De.push(at[Be]),De.push(at[Be+1]),Ze.numPoints++,Ze.numSimplified++;else if(et==="LineString")rt(De,at,Ze,Ve,!1,!1);else if(et==="MultiLineString"||et==="Polygon")for(Be=0;Be<at.length;Be++)rt(De,at[Be],Ze,Ve,et==="Polygon",Be===0);else if(et==="MultiPolygon")for(var nt=0;nt<at.length;nt++){var tt=at[nt];for(Be=0;Be<tt.length;Be++)rt(De,tt[Be],Ze,Ve,!0,Be===0)}if(De.length){var dt=Xe.tags||null;if(et==="LineString"&&We.lineMetrics){for(var ht in dt={},Xe.tags)dt[ht]=Xe.tags[ht];dt.mapbox_clip_start=at.start/at.size,dt.mapbox_clip_end=at.end/at.size}var gt={geometry:De,type:et==="Polygon"||et==="MultiPolygon"?3:et==="LineString"||et==="MultiLineString"?2:1,tags:dt};Xe.id!==null&&(gt.id=Xe.id),Ze.features.push(gt)}}function rt(Ze,Xe,Ve,We,at,et){var De=We*We;if(We>0&&Xe.size<(at?De:We))Ve.numPoints+=Xe.length/3;else{for(var Be=[],nt=0;nt<Xe.length;nt+=3)(We===0||Xe[nt+2]>De)&&(Ve.numSimplified++,Be.push(Xe[nt]),Be.push(Xe[nt+1])),Ve.numPoints++;at&&function(tt,dt){for(var ht=0,gt=0,ut=tt.length,wt=ut-2;gt<ut;wt=gt,gt+=2)ht+=(tt[gt]-tt[wt])*(tt[gt+1]+tt[wt+1]);if(ht>0===dt)for(gt=0,ut=tt.length;gt<ut/2;gt+=2){var ct=tt[gt],ft=tt[gt+1];tt[gt]=tt[ut-2-gt],tt[gt+1]=tt[ut-1-gt],tt[ut-2-gt]=ct,tt[ut-1-gt]=ft}}(Be,et),Ze.push(Be)}}function it(Ze,Xe){var Ve=(Xe=this.options=function(at,et){for(var De in et)at[De]=et[De];return at}(Object.create(this.options),Xe)).debug;if(Ve&&console.time("preprocess data"),Xe.maxZoom<0||Xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Xe.promoteId&&Xe.generateId)throw new Error("promoteId and generateId cannot be used together.");var We=function(at,et){var De=[];if(at.type==="FeatureCollection")for(var Be=0;Be<at.features.length;Be++)he(De,at.features[Be],et,Be);else at.type==="Feature"?he(De,at,et):he(De,{geometry:at},et);return De}(Ze,Xe);this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Xe.indexMaxZoom,Xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(We=function(at,et){var De=et.buffer/et.extent,Be=at,nt=ce(at,1,-1-De,De,0,-1,2,et),tt=ce(at,1,1-De,2+De,0,-1,2,et);return(nt||tt)&&(Be=ce(at,1,-De,1+De,0,-1,2,et)||[],nt&&(Be=Je(nt,1).concat(Be)),tt&&(Be=Be.concat(Je(tt,-1)))),Be}(We,Xe)).length&&this.splitTile(We,0,0,0),Ve&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tt(Ze,Xe,Ve){return 32*((1<<Ze)*Ve+Xe)+Ze}function Mt(Ze,Xe){var Ve=Ze.tileID.canonical;if(!this._geoJSONIndex)return Xe(null,null);var We=this._geoJSONIndex.getTile(Ve.z,Ve.x,Ve.y);if(!We)return Xe(null,null);var at=new h(We.features),et=f(at);et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),Xe(null,{vectorTile:at,rawData:et.buffer})}ne.prototype.load=function(Ze){var Xe=this.options,Ve=Xe.log,We=Xe.minZoom,at=Xe.maxZoom,et=Xe.nodeSize;Ve&&console.time("total time");var De="prepare "+Ze.length+" points";Ve&&console.time(De),this.points=Ze;for(var Be=[],nt=0;nt<Ze.length;nt++)Ze[nt].geometry&&Be.push(ae(Ze[nt],nt));this.trees[at+1]=new W(Be,ve,Oe,et,Float32Array),Ve&&console.timeEnd(De);for(var tt=at;tt>=We;tt--){var dt=+Date.now();Be=this._cluster(Be,tt),this.trees[tt]=new W(Be,ve,Oe,et,Float32Array),Ve&&console.log("z%d: %d clusters in %dms",tt,Be.length,+Date.now()-dt)}return Ve&&console.timeEnd("total time"),this},ne.prototype.getClusters=function(Ze,Xe){var Ve=((Ze[0]+180)%360+360)%360-180,We=Math.max(-90,Math.min(90,Ze[1])),at=Ze[2]===180?180:((Ze[2]+180)%360+360)%360-180,et=Math.max(-90,Math.min(90,Ze[3]));if(Ze[2]-Ze[0]>=360)Ve=-180,at=180;else if(Ve>at){var De=this.getClusters([Ve,We,180,et],Xe),Be=this.getClusters([-180,We,at,et],Xe);return De.concat(Be)}for(var nt=this.trees[this._limitZoom(Xe)],tt=[],dt=0,ht=nt.range(ge(Ve),_e(et),ge(at),_e(We));dt<ht.length;dt+=1){var gt=ht[dt],ut=nt.points[gt];tt.push(ut.numPoints?ue(ut):this.points[ut.index])}return tt},ne.prototype.getChildren=function(Ze){var Xe=this._getOriginId(Ze),Ve=this._getOriginZoom(Ze),We="No cluster with the specified id.",at=this.trees[Ve];if(!at)throw new Error(We);var et=at.points[Xe];if(!et)throw new Error(We);for(var De=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),Be=[],nt=0,tt=at.within(et.x,et.y,De);nt<tt.length;nt+=1){var dt=tt[nt],ht=at.points[dt];ht.parentId===Ze&&Be.push(ht.numPoints?ue(ht):this.points[ht.index])}if(Be.length===0)throw new Error(We);return Be},ne.prototype.getLeaves=function(Ze,Xe,Ve){Xe=Xe||10,Ve=Ve||0;var We=[];return this._appendLeaves(We,Ze,Xe,Ve,0),We},ne.prototype.getTile=function(Ze,Xe,Ve){var We=this.trees[this._limitZoom(Ze)],at=Math.pow(2,Ze),et=this.options,De=et.extent,Be=et.radius/De,nt=(Ve-Be)/at,tt=(Ve+1+Be)/at,dt={features:[]};return this._addTileFeatures(We.range((Xe-Be)/at,nt,(Xe+1+Be)/at,tt),We.points,Xe,Ve,at,dt),Xe===0&&this._addTileFeatures(We.range(1-Be/at,nt,1,tt),We.points,at,Ve,at,dt),Xe===at-1&&this._addTileFeatures(We.range(0,nt,Be/at,tt),We.points,-1,Ve,at,dt),dt.features.length?dt:null},ne.prototype.getClusterExpansionZoom=function(Ze){for(var Xe=this._getOriginZoom(Ze)-1;Xe<=this.options.maxZoom;){var Ve=this.getChildren(Ze);if(Xe++,Ve.length!==1)break;Ze=Ve[0].properties.cluster_id}return Xe},ne.prototype._appendLeaves=function(Ze,Xe,Ve,We,at){for(var et=0,De=this.getChildren(Xe);et<De.length;et+=1){var Be=De[et],nt=Be.properties;if(nt&&nt.cluster?at+nt.point_count<=We?at+=nt.point_count:at=this._appendLeaves(Ze,nt.cluster_id,Ve,We,at):at<We?at++:Ze.push(Be),Ze.length===Ve)break}return at},ne.prototype._addTileFeatures=function(Ze,Xe,Ve,We,at,et){for(var De=0,Be=Ze;De<Be.length;De+=1){var nt=Xe[Be[De]],tt=nt.numPoints,dt={type:1,geometry:[[Math.round(this.options.extent*(nt.x*at-Ve)),Math.round(this.options.extent*(nt.y*at-We))]],tags:tt?pe(nt):this.points[nt.index].properties},ht=void 0;tt?ht=nt.id:this.options.generateId?ht=nt.index:this.points[nt.index].id&&(ht=this.points[nt.index].id),ht!==void 0&&(dt.id=ht),et.features.push(dt)}},ne.prototype._limitZoom=function(Ze){return Math.max(this.options.minZoom,Math.min(Ze,this.options.maxZoom+1))},ne.prototype._cluster=function(Ze,Xe){for(var Ve=[],We=this.options,at=We.radius,et=We.extent,De=We.reduce,Be=at/(et*Math.pow(2,Xe)),nt=0;nt<Ze.length;nt++){var tt=Ze[nt];if(!(tt.zoom<=Xe)){tt.zoom=Xe;for(var dt=this.trees[Xe+1],ht=dt.within(tt.x,tt.y,Be),gt=tt.numPoints||1,ut=tt.x*gt,wt=tt.y*gt,ct=De&&gt>1?this._map(tt,!0):null,ft=(nt<<5)+(Xe+1)+this.points.length,bt=0,It=ht;bt<It.length;bt+=1){var Dt=It[bt],Nt=dt.points[Dt];if(!(Nt.zoom<=Xe)){Nt.zoom=Xe;var Qt=Nt.numPoints||1;ut+=Nt.x*Qt,wt+=Nt.y*Qt,gt+=Qt,Nt.parentId=ft,De&&(ct||(ct=this._map(tt,!0)),De(ct,this._map(Nt)))}}gt===1?Ve.push(tt):(tt.parentId=ft,Ve.push(re(ut/gt,wt/gt,ft,gt,ct)))}}return Ve},ne.prototype._getOriginId=function(Ze){return Ze-this.points.length>>5},ne.prototype._getOriginZoom=function(Ze){return(Ze-this.points.length)%32},ne.prototype._map=function(Ze,Xe){if(Ze.numPoints)return Xe?me({},Ze.properties):Ze.properties;var Ve=this.points[Ze.index].properties,We=this.options.map(Ve);return Xe&&We===Ve?me({},We):We},it.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},it.prototype.splitTile=function(Ze,Xe,Ve,We,at,et,De){for(var Be=[Ze,Xe,Ve,We],nt=this.options,tt=nt.debug;Be.length;){We=Be.pop(),Ve=Be.pop(),Xe=Be.pop(),Ze=Be.pop();var dt=1<<Xe,ht=Tt(Xe,Ve,We),gt=this.tiles[ht];if(!gt&&(tt>1&&console.time("creation"),gt=this.tiles[ht]=xt(Ze,Xe,Ve,We,nt),this.tileCoords.push({z:Xe,x:Ve,y:We}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Xe,Ve,We,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));var ut="z"+Xe;this.stats[ut]=(this.stats[ut]||0)+1,this.total++}if(gt.source=Ze,at){if(Xe===nt.maxZoom||Xe===at)continue;var wt=1<<at-Xe;if(Ve!==Math.floor(et/wt)||We!==Math.floor(De/wt))continue}else if(Xe===nt.indexMaxZoom||gt.numPoints<=nt.indexMaxPoints)continue;if(gt.source=null,Ze.length!==0){tt>1&&console.time("clipping");var ct,ft,bt,It,Dt,Nt,Qt=.5*nt.buffer/nt.extent,jt=.5-Qt,Ut=.5+Qt,Xt=1+Qt;ct=ft=bt=It=null,Dt=ce(Ze,dt,Ve-Qt,Ve+Ut,0,gt.minX,gt.maxX,nt),Nt=ce(Ze,dt,Ve+jt,Ve+Xt,0,gt.minX,gt.maxX,nt),Ze=null,Dt&&(ct=ce(Dt,dt,We-Qt,We+Ut,1,gt.minY,gt.maxY,nt),ft=ce(Dt,dt,We+jt,We+Xt,1,gt.minY,gt.maxY,nt),Dt=null),Nt&&(bt=ce(Nt,dt,We-Qt,We+Ut,1,gt.minY,gt.maxY,nt),It=ce(Nt,dt,We+jt,We+Xt,1,gt.minY,gt.maxY,nt),Nt=null),tt>1&&console.timeEnd("clipping"),Be.push(ct||[],Xe+1,2*Ve,2*We),Be.push(ft||[],Xe+1,2*Ve,2*We+1),Be.push(bt||[],Xe+1,2*Ve+1,2*We),Be.push(It||[],Xe+1,2*Ve+1,2*We+1)}}},it.prototype.getTile=function(Ze,Xe,Ve){var We=this.options,at=We.extent,et=We.debug;if(Ze<0||Ze>24)return null;var De=1<<Ze,Be=Tt(Ze,Xe=(Xe%De+De)%De,Ve);if(this.tiles[Be])return Qe(this.tiles[Be],at);et>1&&console.log("drilling down to z%d-%d-%d",Ze,Xe,Ve);for(var nt,tt=Ze,dt=Xe,ht=Ve;!nt&&tt>0;)tt--,dt=Math.floor(dt/2),ht=Math.floor(ht/2),nt=this.tiles[Tt(tt,dt,ht)];return nt&&nt.source?(et>1&&console.log("found parent tile z%d-%d-%d",tt,dt,ht),et>1&&console.time("drilling down"),this.splitTile(nt.source,tt,dt,ht,Ze,Xe,Ve),et>1&&console.timeEnd("drilling down"),this.tiles[Be]?Qe(this.tiles[Be],at):null):null};var Pt=function(Ze){function Xe(Ve,We,at,et){Ze.call(this,Ve,We,at,Mt),et&&(this.loadGeoJSON=et)}return Ze&&(Xe.__proto__=Ze),Xe.prototype=Object.create(Ze&&Ze.prototype),Xe.prototype.constructor=Xe,Xe.prototype.loadData=function(Ve,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=We,this._pendingLoadDataParams=Ve,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Xe.prototype._loadData=function(){var Ve=this;if(this._pendingCallback&&this._pendingLoadDataParams){var We=this._pendingCallback,at=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var et=!!(at&&at.request&&at.request.collectResourceTiming)&&new l.RequestPerformance(at.request);this.loadGeoJSON(at,function(De,Be){if(De||!Be)return We(De);if(typeof Be!="object")return We(new Error("Input data given to '"+at.source+"' is not a valid GeoJSON object."));u(Be,!0);try{Ve._geoJSONIndex=at.cluster?new ne(function(dt){var ht=dt.superclusterOptions,gt=dt.clusterProperties;if(!gt||!ht)return ht;for(var ut={},wt={},ct={accumulated:null,zoom:0},ft={properties:null},bt=Object.keys(gt),It=0,Dt=bt;It<Dt.length;It+=1){var Nt=Dt[It],Qt=gt[Nt],jt=Qt[0],Ut=Qt[1],Xt=l.createExpression(Ut),gn=l.createExpression(typeof jt=="string"?[jt,["accumulated"],["get",Nt]]:jt);ut[Nt]=Xt.value,wt[Nt]=gn.value}return ht.map=function(Mn){ft.properties=Mn;for(var cn={},qt=0,nn=bt;qt<nn.length;qt+=1){var Kt=nn[qt];cn[Kt]=ut[Kt].evaluate(ct,ft)}return cn},ht.reduce=function(Mn,cn){ft.properties=cn;for(var qt=0,nn=bt;qt<nn.length;qt+=1){var Kt=nn[qt];ct.accumulated=Mn[Kt],Mn[Kt]=wt[Kt].evaluate(ct,ft)}},ht}(at)).load(Be.features):function(dt,ht){return new it(dt,ht)}(Be,at.geojsonVtOptions)}catch(dt){return We(dt)}Ve.loaded={};var nt={};if(et){var tt=et.finish();tt&&(nt.resourceTiming={},nt.resourceTiming[at.source]=JSON.parse(JSON.stringify(tt)))}We(null,nt)})}},Xe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Xe.prototype.reloadTile=function(Ve,We){var at=this.loaded,et=Ve.uid;return at&&at[et]?Ze.prototype.reloadTile.call(this,Ve,We):this.loadTile(Ve,We)},Xe.prototype.loadGeoJSON=function(Ve,We){if(Ve.request)l.getJSON(Ve.request,We);else{if(typeof Ve.data!="string")return We(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."));try{return We(null,JSON.parse(Ve.data))}catch{return We(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."))}}},Xe.prototype.removeSource=function(Ve,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),We()},Xe.prototype.getClusterExpansionZoom=function(Ve,We){try{We(null,this._geoJSONIndex.getClusterExpansionZoom(Ve.clusterId))}catch(at){We(at)}},Xe.prototype.getClusterChildren=function(Ve,We){try{We(null,this._geoJSONIndex.getChildren(Ve.clusterId))}catch(at){We(at)}},Xe.prototype.getClusterLeaves=function(Ve,We){try{We(null,this._geoJSONIndex.getLeaves(Ve.clusterId,Ve.limit,Ve.offset))}catch(at){We(at)}},Xe}(n),kt=function(Ze){var Xe=this;this.self=Ze,this.actor=new l.Actor(Ze,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ve,We){if(Xe.workerSourceTypes[Ve])throw new Error('Worker source with name "'+Ve+'" already registered.');Xe.workerSourceTypes[Ve]=We},this.self.registerRTLTextPlugin=function(Ve){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Ve.applyArabicShaping,l.plugin.processBidirectionalText=Ve.processBidirectionalText,l.plugin.processStyledBidirectionalText=Ve.processStyledBidirectionalText}};return kt.prototype.setReferrer=function(Ze,Xe){this.referrer=Xe},kt.prototype.setImages=function(Ze,Xe,Ve){for(var We in this.availableImages[Ze]=Xe,this.workerSources[Ze]){var at=this.workerSources[Ze][We];for(var et in at)at[et].availableImages=Xe}Ve()},kt.prototype.setLayers=function(Ze,Xe,Ve){this.getLayerIndex(Ze).replace(Xe),Ve()},kt.prototype.updateLayers=function(Ze,Xe,Ve){this.getLayerIndex(Ze).update(Xe.layers,Xe.removedIds),Ve()},kt.prototype.loadTile=function(Ze,Xe,Ve){this.getWorkerSource(Ze,Xe.type,Xe.source).loadTile(Xe,Ve)},kt.prototype.loadDEMTile=function(Ze,Xe,Ve){this.getDEMWorkerSource(Ze,Xe.source).loadTile(Xe,Ve)},kt.prototype.reloadTile=function(Ze,Xe,Ve){this.getWorkerSource(Ze,Xe.type,Xe.source).reloadTile(Xe,Ve)},kt.prototype.abortTile=function(Ze,Xe,Ve){this.getWorkerSource(Ze,Xe.type,Xe.source).abortTile(Xe,Ve)},kt.prototype.removeTile=function(Ze,Xe,Ve){this.getWorkerSource(Ze,Xe.type,Xe.source).removeTile(Xe,Ve)},kt.prototype.removeDEMTile=function(Ze,Xe){this.getDEMWorkerSource(Ze,Xe.source).removeTile(Xe)},kt.prototype.removeSource=function(Ze,Xe,Ve){if(this.workerSources[Ze]&&this.workerSources[Ze][Xe.type]&&this.workerSources[Ze][Xe.type][Xe.source]){var We=this.workerSources[Ze][Xe.type][Xe.source];delete this.workerSources[Ze][Xe.type][Xe.source],We.removeSource!==void 0?We.removeSource(Xe,Ve):Ve()}},kt.prototype.loadWorkerSource=function(Ze,Xe,Ve){try{this.self.importScripts(Xe.url),Ve()}catch(We){Ve(We.toString())}},kt.prototype.syncRTLPluginState=function(Ze,Xe,Ve){try{l.plugin.setState(Xe);var We=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&We!=null){this.self.importScripts(We);var at=l.plugin.isParsed();Ve(at?void 0:new Error("RTL Text Plugin failed to import scripts from "+We),at)}}catch(et){Ve(et.toString())}},kt.prototype.getAvailableImages=function(Ze){var Xe=this.availableImages[Ze];return Xe||(Xe=[]),Xe},kt.prototype.getLayerIndex=function(Ze){var Xe=this.layerIndexes[Ze];return Xe||(Xe=this.layerIndexes[Ze]=new d),Xe},kt.prototype.getWorkerSource=function(Ze,Xe,Ve){var We=this;if(this.workerSources[Ze]||(this.workerSources[Ze]={}),this.workerSources[Ze][Xe]||(this.workerSources[Ze][Xe]={}),!this.workerSources[Ze][Xe][Ve]){var at={send:function(et,De,Be){We.actor.send(et,De,Be,Ze)}};this.workerSources[Ze][Xe][Ve]=new this.workerSourceTypes[Xe](at,this.getLayerIndex(Ze),this.getAvailableImages(Ze))}return this.workerSources[Ze][Xe][Ve]},kt.prototype.getDEMWorkerSource=function(Ze,Xe){return this.demWorkerSources[Ze]||(this.demWorkerSources[Ze]={}),this.demWorkerSources[Ze][Xe]||(this.demWorkerSources[Ze][Xe]=new a),this.demWorkerSources[Ze][Xe]},kt.prototype.enforceCacheSizeLimit=function(Ze,Xe){l.enforceCacheSizeLimit(Xe)},typeof WorkerGlobalScope<"u"&&l.window!==void 0&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new kt(l.window)),kt}),k(0,function(l){var T=l.createCommonjsModule(function(R){function U(fe){return!j(fe)}function j(fe){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var F,$,ie=new Blob([""],{type:"text/javascript"}),de=URL.createObjectURL(ie);try{$=new Worker(de),F=!0}catch{F=!1}return $&&$.terminate(),URL.revokeObjectURL(de),F}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var F=document.createElement("canvas");F.width=F.height=1;var $=F.getContext("2d");if(!$)return!1;var ie=$.getImageData(0,0,1,1);return ie&&ie.width===F.width}()?(Ae=fe&&fe.failIfMajorPerformanceCaveat,X[Ae]===void 0&&(X[Ae]=function(F){var $=function(de){var xe=document.createElement("canvas"),Le=Object.create(U.webGLContextAttributes);return Le.failIfMajorPerformanceCaveat=de,xe.probablySupportsContext?xe.probablySupportsContext("webgl",Le)||xe.probablySupportsContext("experimental-webgl",Le):xe.supportsContext?xe.supportsContext("webgl",Le)||xe.supportsContext("experimental-webgl",Le):xe.getContext("webgl",Le)||xe.getContext("experimental-webgl",Le)}(F);if(!$)return!1;var ie=$.createShader($.VERTEX_SHADER);return!(!ie||$.isContextLost())&&($.shaderSource(ie,"void main() {}"),$.compileShader(ie),$.getShaderParameter(ie,$.COMPILE_STATUS)===!0)}(Ae)),X[Ae]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Ae}R.exports?R.exports=U:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=U,window.mapboxgl.notSupportedReason=j);var X={};U.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(R,U,j){var X=l.window.document.createElement(R);return U!==void 0&&(X.className=U),j&&j.appendChild(X),X},createNS:function(R,U){return l.window.document.createElementNS(R,U)}},d=l.window.document.documentElement.style;function s(R){if(!d)return R[0];for(var U=0;U<R.length;U++)if(R[U]in d)return R[U];return R[0]}var t,i=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){d&&i&&(t=d[i],d[i]="none")},b.enableDrag=function(){d&&i&&(d[i]=t)};var r=s(["transform","WebkitTransform"]);b.setTransform=function(R,U){R.style[r]=U};var n=!1;try{var o=Object.defineProperty({},"passive",{get:function(){n=!0}});l.window.addEventListener("test",o,o),l.window.removeEventListener("test",o,o)}catch{n=!1}b.addEventListener=function(R,U,j,X){X===void 0&&(X={}),"passive"in X&&n?R.addEventListener(U,j,X):R.addEventListener(U,j,X.capture)},b.removeEventListener=function(R,U,j,X){X===void 0&&(X={}),"passive"in X&&n?R.removeEventListener(U,j,X):R.removeEventListener(U,j,X.capture)};var a=function(R){R.preventDefault(),R.stopPropagation(),l.window.removeEventListener("click",a,!0)};function u(R){var U=R.userImage;return!!(U&&U.render&&U.render())&&(R.data.replace(new Uint8Array(U.data.buffer)),!0)}b.suppressClick=function(){l.window.addEventListener("click",a,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",a,!0)},0)},b.mousePos=function(R,U){var j=R.getBoundingClientRect();return new l.Point(U.clientX-j.left-R.clientLeft,U.clientY-j.top-R.clientTop)},b.touchPos=function(R,U){for(var j=R.getBoundingClientRect(),X=[],fe=0;fe<U.length;fe++)X.push(new l.Point(U[fe].clientX-j.left-R.clientLeft,U[fe].clientY-j.top-R.clientTop));return X},b.mouseButton=function(R){return l.window.InstallTrigger!==void 0&&R.button===2&&R.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:R.button},b.remove=function(R){R.parentNode&&R.parentNode.removeChild(R)};var p=function(R){function U(){R.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.isLoaded=function(){return this.loaded},U.prototype.setLoaded=function(j){if(this.loaded!==j&&(this.loaded=j,j)){for(var X=0,fe=this.requestors;X<fe.length;X+=1){var Ae=fe[X],F=Ae.ids,$=Ae.callback;this._notify(F,$)}this.requestors=[]}},U.prototype.getImage=function(j){return this.images[j]},U.prototype.addImage=function(j,X){this._validate(j,X)&&(this.images[j]=X)},U.prototype._validate=function(j,X){var fe=!0;return this._validateStretch(X.stretchX,X.data&&X.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchX" value'))),fe=!1),this._validateStretch(X.stretchY,X.data&&X.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchY" value'))),fe=!1),this._validateContent(X.content,X)||(this.fire(new l.ErrorEvent(new Error('Image "'+j+'" has invalid "content" value'))),fe=!1),fe},U.prototype._validateStretch=function(j,X){if(!j)return!0;for(var fe=0,Ae=0,F=j;Ae<F.length;Ae+=1){var $=F[Ae];if($[0]<fe||$[1]<$[0]||X<$[1])return!1;fe=$[1]}return!0},U.prototype._validateContent=function(j,X){return!(j&&(j.length!==4||j[0]<0||X.data.width<j[0]||j[1]<0||X.data.height<j[1]||j[2]<0||X.data.width<j[2]||j[3]<0||X.data.height<j[3]||j[2]<j[0]||j[3]<j[1]))},U.prototype.updateImage=function(j,X){var fe=this.images[j];X.version=fe.version+1,this.images[j]=X,this.updatedImages[j]=!0},U.prototype.removeImage=function(j){var X=this.images[j];delete this.images[j],delete this.patterns[j],X.userImage&&X.userImage.onRemove&&X.userImage.onRemove()},U.prototype.listImages=function(){return Object.keys(this.images)},U.prototype.getImages=function(j,X){var fe=!0;if(!this.isLoaded())for(var Ae=0,F=j;Ae<F.length;Ae+=1){var $=F[Ae];this.images[$]||(fe=!1)}this.isLoaded()||fe?this._notify(j,X):this.requestors.push({ids:j,callback:X})},U.prototype._notify=function(j,X){for(var fe={},Ae=0,F=j;Ae<F.length;Ae+=1){var $=F[Ae];this.images[$]||this.fire(new l.Event("styleimagemissing",{id:$}));var ie=this.images[$];ie?fe[$]={data:ie.data.clone(),pixelRatio:ie.pixelRatio,sdf:ie.sdf,version:ie.version,stretchX:ie.stretchX,stretchY:ie.stretchY,content:ie.content,hasRenderCallback:!!(ie.userImage&&ie.userImage.render)}:l.warnOnce('Image "'+$+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}X(null,fe)},U.prototype.getPixelSize=function(){var j=this.atlasImage;return{width:j.width,height:j.height}},U.prototype.getPattern=function(j){var X=this.patterns[j],fe=this.getImage(j);if(!fe)return null;if(X&&X.position.version===fe.version)return X.position;if(X)X.position.version=fe.version;else{var Ae={w:fe.data.width+2,h:fe.data.height+2,x:0,y:0},F=new l.ImagePosition(Ae,fe);this.patterns[j]={bin:Ae,position:F}}return this._updatePatternAtlas(),this.patterns[j].position},U.prototype.bind=function(j){var X=j.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(j,this.atlasImage,X.RGBA),this.atlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE)},U.prototype._updatePatternAtlas=function(){var j=[];for(var X in this.patterns)j.push(this.patterns[X].bin);var fe=l.potpack(j),Ae=fe.w,F=fe.h,$=this.atlasImage;for(var ie in $.resize({width:Ae||1,height:F||1}),this.patterns){var de=this.patterns[ie].bin,xe=de.x+1,Le=de.y+1,Ne=this.images[ie].data,Ue=Ne.width,qe=Ne.height;l.RGBAImage.copy(Ne,$,{x:0,y:0},{x:xe,y:Le},{width:Ue,height:qe}),l.RGBAImage.copy(Ne,$,{x:0,y:qe-1},{x:xe,y:Le-1},{width:Ue,height:1}),l.RGBAImage.copy(Ne,$,{x:0,y:0},{x:xe,y:Le+qe},{width:Ue,height:1}),l.RGBAImage.copy(Ne,$,{x:Ue-1,y:0},{x:xe-1,y:Le},{width:1,height:qe}),l.RGBAImage.copy(Ne,$,{x:0,y:0},{x:xe+Ue,y:Le},{width:1,height:qe})}this.dirty=!0},U.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},U.prototype.dispatchRenderCallbacks=function(j){for(var X=0,fe=j;X<fe.length;X+=1){var Ae=fe[X];if(!this.callbackDispatchedThisFrame[Ae]){this.callbackDispatchedThisFrame[Ae]=!0;var F=this.images[Ae];u(F)&&this.updateImage(Ae,F)}}},U}(l.Evented),c=h,x=h,g=1e20;function h(R,U,j,X,fe,Ae){this.fontSize=R||24,this.buffer=U===void 0?3:U,this.cutoff=X||.25,this.fontFamily=fe||"sans-serif",this.fontWeight=Ae||"normal",this.radius=j||8;var F=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=F,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(F*F),this.gridInner=new Float64Array(F*F),this.f=new Float64Array(F),this.d=new Float64Array(F),this.z=new Float64Array(F+1),this.v=new Int16Array(F),this.middle=Math.round(F/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(R,U,j,X,fe,Ae,F){for(var $=0;$<U;$++){for(var ie=0;ie<j;ie++)X[ie]=R[ie*U+$];for(v(X,fe,Ae,F,j),ie=0;ie<j;ie++)R[ie*U+$]=fe[ie]}for(ie=0;ie<j;ie++){for($=0;$<U;$++)X[$]=R[ie*U+$];for(v(X,fe,Ae,F,U),$=0;$<U;$++)R[ie*U+$]=Math.sqrt(fe[$])}}function v(R,U,j,X,fe){j[0]=0,X[0]=-g,X[1]=+g;for(var Ae=1,F=0;Ae<fe;Ae++){for(var $=(R[Ae]+Ae*Ae-(R[j[F]]+j[F]*j[F]))/(2*Ae-2*j[F]);$<=X[F];)F--,$=(R[Ae]+Ae*Ae-(R[j[F]]+j[F]*j[F]))/(2*Ae-2*j[F]);j[++F]=Ae,X[F]=$,X[F+1]=+g}for(Ae=0,F=0;Ae<fe;Ae++){for(;X[F+1]<Ae;)F++;U[Ae]=(Ae-j[F])*(Ae-j[F])+R[j[F]]}}h.prototype.draw=function(R){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(R,this.buffer,this.middle);for(var U=this.ctx.getImageData(0,0,this.size,this.size),j=new Uint8ClampedArray(this.size*this.size),X=0;X<this.size*this.size;X++){var fe=U.data[4*X+3]/255;this.gridOuter[X]=fe===1?0:fe===0?g:Math.pow(Math.max(0,.5-fe),2),this.gridInner[X]=fe===1?g:fe===0?0:Math.pow(Math.max(0,fe-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),X=0;X<this.size*this.size;X++){var Ae=this.gridOuter[X]-this.gridInner[X];j[X]=Math.max(0,Math.min(255,Math.round(255-255*(Ae/this.radius+this.cutoff))))}return j},c.default=x;var m=function(R,U){this.requestManager=R,this.localIdeographFontFamily=U,this.entries={}};m.prototype.setURL=function(R){this.url=R},m.prototype.getGlyphs=function(R,U){var j=this,X=[];for(var fe in R)for(var Ae=0,F=R[fe];Ae<F.length;Ae+=1){var $=F[Ae];X.push({stack:fe,id:$})}l.asyncAll(X,function(ie,de){var xe=ie.stack,Le=ie.id,Ne=j.entries[xe];Ne||(Ne=j.entries[xe]={glyphs:{},requests:{},ranges:{}});var Ue=Ne.glyphs[Le];if(Ue===void 0){if(Ue=j._tinySDF(Ne,xe,Le))return Ne.glyphs[Le]=Ue,void de(null,{stack:xe,id:Le,glyph:Ue});var qe=Math.floor(Le/256);if(256*qe>65535)de(new Error("glyphs > 65535 not supported"));else if(Ne.ranges[qe])de(null,{stack:xe,id:Le,glyph:Ue});else{var Ye=Ne.requests[qe];Ye||(Ye=Ne.requests[qe]=[],m.loadGlyphRange(xe,qe,j.url,j.requestManager,function($e,lt){if(lt){for(var pt in lt)j._doesCharSupportLocalGlyph(+pt)||(Ne.glyphs[+pt]=lt[+pt]);Ne.ranges[qe]=!0}for(var Et=0,Ct=Ye;Et<Ct.length;Et+=1)(0,Ct[Et])($e,lt);delete Ne.requests[qe]})),Ye.push(function($e,lt){$e?de($e):lt&&de(null,{stack:xe,id:Le,glyph:lt[Le]||null})})}}else de(null,{stack:xe,id:Le,glyph:Ue})},function(ie,de){if(ie)U(ie);else if(de){for(var xe={},Le=0,Ne=de;Le<Ne.length;Le+=1){var Ue=Ne[Le],qe=Ue.stack,Ye=Ue.id,$e=Ue.glyph;(xe[qe]||(xe[qe]={}))[Ye]=$e&&{id:$e.id,bitmap:$e.bitmap.clone(),metrics:$e.metrics}}U(null,xe)}})},m.prototype._doesCharSupportLocalGlyph=function(R){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](R)||l.isChar["Hangul Syllables"](R)||l.isChar.Hiragana(R)||l.isChar.Katakana(R))},m.prototype._tinySDF=function(R,U,j){var X=this.localIdeographFontFamily;if(X&&this._doesCharSupportLocalGlyph(j)){var fe=R.tinySDF;if(!fe){var Ae="400";/bold/i.test(U)?Ae="900":/medium/i.test(U)?Ae="500":/light/i.test(U)&&(Ae="200"),fe=R.tinySDF=new m.TinySDF(24,3,8,.25,X,Ae)}return{id:j,bitmap:new l.AlphaImage({width:30,height:30},fe.draw(String.fromCharCode(j))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(R,U,j,X,fe){var Ae=256*U,F=Ae+255,$=X.transformRequest(X.normalizeGlyphsURL(j).replace("{fontstack}",R).replace("{range}",Ae+"-"+F),l.ResourceType.Glyphs);l.getArrayBuffer($,function(ie,de){if(ie)fe(ie);else if(de){for(var xe={},Le=0,Ne=l.parseGlyphPBF(de);Le<Ne.length;Le+=1){var Ue=Ne[Le];xe[Ue.id]=Ue}fe(null,xe)}})},m.TinySDF=c;var _=function(){this.specification=l.styleSpec.light.position};_.prototype.possiblyEvaluate=function(R,U){return l.sphericalToCartesian(R.expression.evaluate(U))},_.prototype.interpolate=function(R,U,j){return{x:l.number(R.x,U.x,j),y:l.number(R.y,U.y,j),z:l.number(R.z,U.z,j)}};var f=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new _,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),S="-transition",w=function(R){function U(j){R.call(this),this._transitionable=new l.Transitionable(f),this.setLight(j),this._transitioning=this._transitionable.untransitioned()}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getLight=function(){return this._transitionable.serialize()},U.prototype.setLight=function(j,X){if(X===void 0&&(X={}),!this._validate(l.validateLight,j,X))for(var fe in j){var Ae=j[fe];l.endsWith(fe,S)?this._transitionable.setTransition(fe.slice(0,-11),Ae):this._transitionable.setValue(fe,Ae)}},U.prototype.updateTransitions=function(j){this._transitioning=this._transitionable.transitioned(j,this._transitioning)},U.prototype.hasTransition=function(){return this._transitioning.hasTransition()},U.prototype.recalculate=function(j){this.properties=this._transitioning.possiblyEvaluate(j)},U.prototype._validate=function(j,X,fe){return(!fe||fe.validate!==!1)&&l.emitValidationErrors(this,j.call(l.validateStyle,l.extend({value:X,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},U}(l.Evented),E=function(R,U){this.width=R,this.height=U,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(R,U){var j=R.join(",")+String(U);return this.dashEntry[j]||(this.dashEntry[j]=this.addDash(R,U)),this.dashEntry[j]},E.prototype.getDashRanges=function(R,U,j){var X=[],fe=R.length%2==1?-R[R.length-1]*j:0,Ae=R[0]*j,F=!0;X.push({left:fe,right:Ae,isDash:F,zeroLength:R[0]===0});for(var $=R[0],ie=1;ie<R.length;ie++){F=!F;var de=R[ie];fe=$*j,Ae=($+=de)*j,X.push({left:fe,right:Ae,isDash:F,zeroLength:de===0})}return X},E.prototype.addRoundDash=function(R,U,j){for(var X=U/2,fe=-j;fe<=j;fe++)for(var Ae=this.nextRow+j+fe,F=this.width*Ae,$=0,ie=R[$],de=0;de<this.width;de++){de/ie.right>1&&(ie=R[++$]);var xe=Math.abs(de-ie.left),Le=Math.abs(de-ie.right),Ne=Math.min(xe,Le),Ue=void 0,qe=fe/j*(X+1);if(ie.isDash){var Ye=X-Math.abs(qe);Ue=Math.sqrt(Ne*Ne+Ye*Ye)}else Ue=X-Math.sqrt(Ne*Ne+qe*qe);this.data[F+de]=Math.max(0,Math.min(255,Ue+128))}},E.prototype.addRegularDash=function(R){for(var U=R.length-1;U>=0;--U){var j=R[U],X=R[U+1];j.zeroLength?R.splice(U,1):X&&X.isDash===j.isDash&&(X.left=j.left,R.splice(U,1))}var fe=R[0],Ae=R[R.length-1];fe.isDash===Ae.isDash&&(fe.left=Ae.left-this.width,Ae.right=fe.right+this.width);for(var F=this.width*this.nextRow,$=0,ie=R[$],de=0;de<this.width;de++){de/ie.right>1&&(ie=R[++$]);var xe=Math.abs(de-ie.left),Le=Math.abs(de-ie.right),Ne=Math.min(xe,Le),Ue=ie.isDash?Ne:-Ne;this.data[F+de]=Math.max(0,Math.min(255,Ue+128))}},E.prototype.addDash=function(R,U){var j=U?7:0,X=2*j+1;if(this.nextRow+X>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var fe=0,Ae=0;Ae<R.length;Ae++)fe+=R[Ae];if(fe!==0){var F=this.width/fe,$=this.getDashRanges(R,this.width,F);U?this.addRoundDash($,F,j):this.addRegularDash($)}var ie={y:(this.nextRow+j+.5)/this.height,height:2*j/this.height,width:fe};return this.nextRow+=X,this.dirty=!0,ie},E.prototype.bind=function(R){var U=R.gl;this.texture?(U.bindTexture(U.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,U.texSubImage2D(U.TEXTURE_2D,0,0,0,this.width,this.height,U.ALPHA,U.UNSIGNED_BYTE,this.data))):(this.texture=U.createTexture(),U.bindTexture(U.TEXTURE_2D,this.texture),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,U.REPEAT),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,U.REPEAT),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.LINEAR),U.texImage2D(U.TEXTURE_2D,0,U.ALPHA,this.width,this.height,0,U.ALPHA,U.UNSIGNED_BYTE,this.data))};var L=function R(U,j){this.workerPool=U,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var X=this.workerPool.acquire(this.id),fe=0;fe<X.length;fe++){var Ae=X[fe],F=new R.Actor(Ae,j,this.id);F.name="Worker "+fe,this.actors.push(F)}};function C(R,U,j){var X=function(fe,Ae){if(fe)return j(fe);if(Ae){var F=l.pick(l.extend(Ae,R),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ae.vector_layers&&(F.vectorLayers=Ae.vector_layers,F.vectorLayerIds=F.vectorLayers.map(function($){return $.id})),F.tiles=U.canonicalizeTileset(F,R.url),j(null,F)}};return R.url?l.getJSON(U.transformRequest(U.normalizeSourceURL(R.url),l.ResourceType.Source),X):l.browser.frame(function(){return X(null,R)})}L.prototype.broadcast=function(R,U,j){j=j||function(){},l.asyncAll(this.actors,function(X,fe){X.send(R,U,fe)},j)},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(R){R.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=l.Actor;var P=function(R,U,j){this.bounds=l.LngLatBounds.convert(this.validateBounds(R)),this.minzoom=U||0,this.maxzoom=j||24};P.prototype.validateBounds=function(R){return Array.isArray(R)&&R.length===4?[Math.max(-180,R[0]),Math.max(-90,R[1]),Math.min(180,R[2]),Math.min(90,R[3])]:[-180,-90,180,90]},P.prototype.contains=function(R){var U=Math.pow(2,R.z),j=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*U),X=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*U),fe=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*U),Ae=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*U);return R.x>=j&&R.x<fe&&R.y>=X&&R.y<Ae};var z=function(R){function U(j,X,fe,Ae){if(R.call(this),this.id=j,this.dispatcher=fe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(X,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},X),this._collectResourceTiming=X.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ae)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(X,fe){j._tileJSONRequest=null,j._loaded=!0,X?j.fire(new l.ErrorEvent(X)):fe&&(l.extend(j,fe),fe.bounds&&(j.tileBounds=new P(fe.bounds,j.minzoom,j.maxzoom)),l.postTurnstileEvent(fe.tiles,j.map._requestManager._customAccessToken),l.postMapLoadEvent(fe.tiles,j.map._getMapId(),j.map._requestManager._skuToken,j.map._requestManager._customAccessToken),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},U.prototype.loaded=function(){return this._loaded},U.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},U.prototype.serialize=function(){return l.extend({},this._options)},U.prototype.loadTile=function(j,X){var fe=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme)),Ae={request:this.map._requestManager.transformRequest(fe,l.ResourceType.Tile),uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,tileSize:this.tileSize*j.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function F($,ie){return delete j.request,j.aborted?X(null):$&&$.status!==404?X($):(ie&&ie.resourceTiming&&(j.resourceTiming=ie.resourceTiming),this.map._refreshExpiredTiles&&ie&&j.setExpiryData(ie),j.loadVectorData(ie,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),X(null),void(j.reloadCallback&&(this.loadTile(j,j.reloadCallback),j.reloadCallback=null)))}Ae.request.collectResourceTiming=this._collectResourceTiming,j.actor&&j.state!=="expired"?j.state==="loading"?j.reloadCallback=X:j.request=j.actor.send("reloadTile",Ae,F.bind(this)):(j.actor=this.dispatcher.getActor(),j.request=j.actor.send("loadTile",Ae,F.bind(this)))},U.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.actor&&j.actor.send("abortTile",{uid:j.uid,type:this.type,source:this.id},void 0)},U.prototype.unloadTile=function(j){j.unloadVectorData(),j.actor&&j.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id},void 0)},U.prototype.hasTransition=function(){return!1},U}(l.Evented),G=function(R){function U(j,X,fe,Ae){R.call(this),this.id=j,this.dispatcher=fe,this.setEventedParent(Ae),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},X),l.extend(this,l.pick(X,["url","scheme","tileSize"]))}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(X,fe){j._tileJSONRequest=null,j._loaded=!0,X?j.fire(new l.ErrorEvent(X)):fe&&(l.extend(j,fe),fe.bounds&&(j.tileBounds=new P(fe.bounds,j.minzoom,j.maxzoom)),l.postTurnstileEvent(fe.tiles),l.postMapLoadEvent(fe.tiles,j.map._getMapId(),j.map._requestManager._skuToken),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},U.prototype.loaded=function(){return this._loaded},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},U.prototype.serialize=function(){return l.extend({},this._options)},U.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},U.prototype.loadTile=function(j,X){var fe=this,Ae=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);j.request=l.getImage(this.map._requestManager.transformRequest(Ae,l.ResourceType.Tile),function(F,$){if(delete j.request,j.aborted)j.state="unloaded",X(null);else if(F)j.state="errored",X(F);else if($){fe.map._refreshExpiredTiles&&j.setExpiryData($),delete $.cacheControl,delete $.expires;var ie=fe.map.painter.context,de=ie.gl;j.texture=fe.map.painter.getTileTexture($.width),j.texture?j.texture.update($,{useMipmap:!0}):(j.texture=new l.Texture(ie,$,de.RGBA,{useMipmap:!0}),j.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE,de.LINEAR_MIPMAP_NEAREST),ie.extTextureFilterAnisotropic&&de.texParameterf(de.TEXTURE_2D,ie.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ie.extTextureFilterAnisotropicMax)),j.state="loaded",l.cacheEntryPossiblyAdded(fe.dispatcher),X(null)}})},U.prototype.abortTile=function(j,X){j.request&&(j.request.cancel(),delete j.request),X()},U.prototype.unloadTile=function(j,X){j.texture&&this.map.painter.saveTileTexture(j.texture),X()},U.prototype.hasTransition=function(){return!1},U}(l.Evented),O=function(R){function U(j,X,fe,Ae){R.call(this,j,X,fe,Ae),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},X),this.encoding=X.encoding||"mapbox"}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},U.prototype.loadTile=function(j,X){var fe=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Ae(F,$){F&&(j.state="errored",X(F)),$&&(j.dem=$,j.needsHillshadePrepare=!0,j.state="loaded",X(null))}j.request=l.getImage(this.map._requestManager.transformRequest(fe,l.ResourceType.Tile),(function(F,$){if(delete j.request,j.aborted)j.state="unloaded",X(null);else if(F)j.state="errored",X(F);else if($){this.map._refreshExpiredTiles&&j.setExpiryData($),delete $.cacheControl,delete $.expires;var ie=l.window.ImageBitmap&&$ instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?$:l.browser.getImageData($,1),de={uid:j.uid,coord:j.tileID,source:this.id,rawImageData:ie,encoding:this.encoding};j.actor&&j.state!=="expired"||(j.actor=this.dispatcher.getActor(),j.actor.send("loadDEMTile",de,Ae.bind(this)))}}).bind(this)),j.neighboringTiles=this._getNeighboringTiles(j.tileID)},U.prototype._getNeighboringTiles=function(j){var X=j.canonical,fe=Math.pow(2,X.z),Ae=(X.x-1+fe)%fe,F=X.x===0?j.wrap-1:j.wrap,$=(X.x+1+fe)%fe,ie=X.x+1===fe?j.wrap+1:j.wrap,de={};return de[new l.OverscaledTileID(j.overscaledZ,F,X.z,Ae,X.y).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,ie,X.z,$,X.y).key]={backfilled:!1},X.y>0&&(de[new l.OverscaledTileID(j.overscaledZ,F,X.z,Ae,X.y-1).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,j.wrap,X.z,X.x,X.y-1).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,ie,X.z,$,X.y-1).key]={backfilled:!1}),X.y+1<fe&&(de[new l.OverscaledTileID(j.overscaledZ,F,X.z,Ae,X.y+1).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,j.wrap,X.z,X.x,X.y+1).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,ie,X.z,$,X.y+1).key]={backfilled:!1}),de},U.prototype.unloadTile=function(j){j.demTexture&&this.map.painter.saveTileTexture(j.demTexture),j.fbo&&(j.fbo.destroy(),delete j.fbo),j.dem&&delete j.dem,delete j.neighboringTiles,j.state="unloaded",j.actor&&j.actor.send("removeDEMTile",{uid:j.uid,source:this.id})},U}(G),H=function(R){function U(j,X,fe,Ae){R.call(this),this.id=j,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=fe.getActor(),this.setEventedParent(Ae),this._data=X.data,this._options=l.extend({},X),this._collectResourceTiming=X.collectResourceTiming,this._resourceTiming=[],X.maxzoom!==void 0&&(this.maxzoom=X.maxzoom),X.type&&(this.type=X.type),X.attribution&&(this.attribution=X.attribution),this.promoteId=X.promoteId;var F=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:X.cluster||!1,geojsonVtOptions:{buffer:(X.buffer!==void 0?X.buffer:128)*F,tolerance:(X.tolerance!==void 0?X.tolerance:.375)*F,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:X.lineMetrics||!1,generateId:X.generateId||!1},superclusterOptions:{maxZoom:X.clusterMaxZoom!==void 0?Math.min(X.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(X.clusterRadius||50)*F,log:!1,generateId:X.generateId||!1},clusterProperties:X.clusterProperties},X.workerOptions)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(X){if(X)j.fire(new l.ErrorEvent(X));else{var fe={dataType:"source",sourceDataType:"metadata"};j._collectResourceTiming&&j._resourceTiming&&j._resourceTiming.length>0&&(fe.resourceTiming=j._resourceTiming,j._resourceTiming=[]),j.fire(new l.Event("data",fe))}})},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.setData=function(j){var X=this;return this._data=j,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(fe){if(fe)X.fire(new l.ErrorEvent(fe));else{var Ae={dataType:"source",sourceDataType:"content"};X._collectResourceTiming&&X._resourceTiming&&X._resourceTiming.length>0&&(Ae.resourceTiming=X._resourceTiming,X._resourceTiming=[]),X.fire(new l.Event("data",Ae))}}),this},U.prototype.getClusterExpansionZoom=function(j,X){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:j,source:this.id},X),this},U.prototype.getClusterChildren=function(j,X){return this.actor.send("geojson.getClusterChildren",{clusterId:j,source:this.id},X),this},U.prototype.getClusterLeaves=function(j,X,fe,Ae){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:j,limit:X,offset:fe},Ae),this},U.prototype._updateWorkerData=function(j){var X=this;this._loaded=!1;var fe=l.extend({},this.workerOptions),Ae=this._data;typeof Ae=="string"?(fe.request=this.map._requestManager.transformRequest(l.browser.resolveURL(Ae),l.ResourceType.Source),fe.request.collectResourceTiming=this._collectResourceTiming):fe.data=JSON.stringify(Ae),this.actor.send(this.type+".loadData",fe,function(F,$){X._removed||$&&$.abandoned||(X._loaded=!0,$&&$.resourceTiming&&$.resourceTiming[X.id]&&(X._resourceTiming=$.resourceTiming[X.id].slice(0)),X.actor.send(X.type+".coalesce",{source:fe.source},null),j(F))})},U.prototype.loaded=function(){return this._loaded},U.prototype.loadTile=function(j,X){var fe=this,Ae=j.actor?"reloadTile":"loadTile";j.actor=this.actor;var F={type:this.type,uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};j.request=this.actor.send(Ae,F,function($,ie){return delete j.request,j.unloadVectorData(),j.aborted?X(null):$?X($):(j.loadVectorData(ie,fe.map.painter,Ae==="reloadTile"),X(null))})},U.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.aborted=!0},U.prototype.unloadTile=function(j){j.unloadVectorData(),this.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id})},U.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},U.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},U.prototype.hasTransition=function(){return!1},U}(l.Evented),N=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),B=function(R){function U(j,X,fe,Ae){R.call(this),this.id=j,this.dispatcher=fe,this.coordinates=X.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ae),this.options=X}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(j,X){var fe=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(Ae,F){fe._loaded=!0,Ae?fe.fire(new l.ErrorEvent(Ae)):F&&(fe.image=F,j&&(fe.coordinates=j),X&&X(),fe._finishLoading())})},U.prototype.loaded=function(){return this._loaded},U.prototype.updateImage=function(j){var X=this;return this.image&&j.url?(this.options.url=j.url,this.load(j.coordinates,function(){X.texture=null}),this):this},U.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.setCoordinates=function(j){var X=this;this.coordinates=j;var fe=j.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(F){for(var $=1/0,ie=1/0,de=-1/0,xe=-1/0,Le=0,Ne=F;Le<Ne.length;Le+=1){var Ue=Ne[Le];$=Math.min($,Ue.x),ie=Math.min(ie,Ue.y),de=Math.max(de,Ue.x),xe=Math.max(xe,Ue.y)}var qe=de-$,Ye=xe-ie,$e=Math.max(qe,Ye),lt=Math.max(0,Math.floor(-Math.log($e)/Math.LN2)),pt=Math.pow(2,lt);return new l.CanonicalTileID(lt,Math.floor(($+de)/2*pt),Math.floor((ie+xe)/2*pt))}(fe),this.minzoom=this.maxzoom=this.tileID.z;var Ae=fe.map(function(F){return X.tileID.getTilePoint(F)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ae[0].x,Ae[0].y,0,0),this._boundsArray.emplaceBack(Ae[1].x,Ae[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(Ae[3].x,Ae[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(Ae[2].x,Ae[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},U.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var j=this.map.painter.context,X=j.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(j,this.image,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var Ae=this.tiles[fe];Ae.state!=="loaded"&&(Ae.state="loaded",Ae.texture=this.texture)}}},U.prototype.loadTile=function(j,X){this.tileID&&this.tileID.equals(j.tileID.canonical)?(this.tiles[String(j.tileID.wrap)]=j,j.buckets={},X(null)):(j.state="errored",X(null))},U.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},U.prototype.hasTransition=function(){return!1},U}(l.Evented),V=function(R){function U(j,X,fe,Ae){R.call(this,j,X,fe,Ae),this.roundZoom=!0,this.type="video",this.options=X}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this._loaded=!1;var X=this.options;this.urls=[];for(var fe=0,Ae=X.urls;fe<Ae.length;fe+=1){var F=Ae[fe];this.urls.push(this.map._requestManager.transformRequest(F,l.ResourceType.Source).url)}l.getVideo(this.urls,function($,ie){j._loaded=!0,$?j.fire(new l.ErrorEvent($)):ie&&(j.video=ie,j.video.loop=!0,j.video.addEventListener("playing",function(){j.map.triggerRepaint()}),j.map&&j.video.play(),j._finishLoading())})},U.prototype.pause=function(){this.video&&this.video.pause()},U.prototype.play=function(){this.video&&this.video.play()},U.prototype.seek=function(j){if(this.video){var X=this.video.seekable;j<X.start(0)||j>X.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+X.start(0)+" and "+X.end(0)+"-second mark."))):this.video.currentTime=j}},U.prototype.getVideo=function(){return this.video},U.prototype.onAdd=function(j){this.map||(this.map=j,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},U.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var j=this.map.painter.context,X=j.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE),X.texSubImage2D(X.TEXTURE_2D,0,0,0,X.RGBA,X.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(j,this.video,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var Ae=this.tiles[fe];Ae.state!=="loaded"&&(Ae.state="loaded",Ae.texture=this.texture)}}},U.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},U.prototype.hasTransition=function(){return this.video&&!this.video.paused},U}(B),q=function(R){function U(j,X,fe,Ae){R.call(this,j,X,fe,Ae),X.coordinates?Array.isArray(X.coordinates)&&X.coordinates.length===4&&!X.coordinates.some(function(F){return!Array.isArray(F)||F.length!==2||F.some(function($){return typeof $!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'missing required property "coordinates"'))),X.animate&&typeof X.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'optional "animate" property must be a boolean value'))),X.canvas?typeof X.canvas=="string"||X.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'missing required property "canvas"'))),this.options=X,this.animate=X.animate===void 0||X.animate}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},U.prototype.getCanvas=function(){return this.canvas},U.prototype.onAdd=function(j){this.map=j,this.load(),this.canvas&&this.animate&&this.play()},U.prototype.onRemove=function(){this.pause()},U.prototype.prepare=function(){var j=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,j=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,j=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var X=this.map.painter.context,fe=X.gl;for(var Ae in this.boundsBuffer||(this.boundsBuffer=X.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(j||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(X,this.canvas,fe.RGBA,{premultiply:!0}),this.tiles){var F=this.tiles[Ae];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},U.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},U.prototype.hasTransition=function(){return this._playing},U.prototype._hasInvalidDimensions=function(){for(var j=0,X=[this.canvas.width,this.canvas.height];j<X.length;j+=1){var fe=X[j];if(isNaN(fe)||fe<=0)return!0}return!1},U}(B),te={vector:z,raster:G,"raster-dem":O,geojson:H,video:V,image:B,canvas:q};function K(R,U){var j=l.identity([]);return l.translate(j,j,[1,1,0]),l.scale(j,j,[.5*R.width,.5*R.height,1]),l.multiply(j,j,R.calculatePosMatrix(U.toUnwrapped()))}function J(R,U,j,X,fe,Ae){var F=function(Ye,$e,lt){if(Ye)for(var pt=0,Et=Ye;pt<Et.length;pt+=1){var Ct=$e[Et[pt]];if(Ct&&Ct.source===lt&&Ct.type==="fill-extrusion")return!0}else for(var St in $e){var Ft=$e[St];if(Ft.source===lt&&Ft.type==="fill-extrusion")return!0}return!1}(fe&&fe.layers,U,R.id),$=Ae.maxPitchScaleFactor(),ie=R.tilesIn(X,$,F);ie.sort(Y);for(var de=[],xe=0,Le=ie;xe<Le.length;xe+=1){var Ne=Le[xe];de.push({wrappedTileID:Ne.tileID.wrapped().key,queryResults:Ne.tile.queryRenderedFeatures(U,j,R._state,Ne.queryGeometry,Ne.cameraQueryGeometry,Ne.scale,fe,Ae,$,K(R.transform,Ne.tileID))})}var Ue=function(Ye){for(var $e={},lt={},pt=0,Et=Ye;pt<Et.length;pt+=1){var Ct=Et[pt],St=Ct.queryResults,Ft=Ct.wrappedTileID,Lt=lt[Ft]=lt[Ft]||{};for(var tn in St)for(var Zt=St[tn],Ht=Lt[tn]=Lt[tn]||{},dn=$e[tn]=$e[tn]||[],vn=0,zn=Zt;vn<zn.length;vn+=1){var Rn=zn[vn];Ht[Rn.featureIndex]||(Ht[Rn.featureIndex]=!0,dn.push(Rn))}}return $e}(de);for(var qe in Ue)Ue[qe].forEach(function(Ye){var $e=Ye.feature,lt=R.getFeatureState($e.layer["source-layer"],$e.id);$e.source=$e.layer.source,$e.layer["source-layer"]&&($e.sourceLayer=$e.layer["source-layer"]),$e.state=lt});return Ue}function Y(R,U){var j=R.tileID,X=U.tileID;return j.overscaledZ-X.overscaledZ||j.canonical.y-X.canonical.y||j.wrap-X.wrap||j.canonical.x-X.canonical.x}var W=function(R,U){this.max=R,this.onRemove=U,this.reset()};W.prototype.reset=function(){for(var R in this.data)for(var U=0,j=this.data[R];U<j.length;U+=1){var X=j[U];X.timeout&&clearTimeout(X.timeout),this.onRemove(X.value)}return this.data={},this.order=[],this},W.prototype.add=function(R,U,j){var X=this,fe=R.wrapped().key;this.data[fe]===void 0&&(this.data[fe]=[]);var Ae={value:U,timeout:void 0};if(j!==void 0&&(Ae.timeout=setTimeout(function(){X.remove(R,Ae)},j)),this.data[fe].push(Ae),this.order.push(fe),this.order.length>this.max){var F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this},W.prototype.has=function(R){return R.wrapped().key in this.data},W.prototype.getAndRemove=function(R){return this.has(R)?this._getAndRemoveByKey(R.wrapped().key):null},W.prototype._getAndRemoveByKey=function(R){var U=this.data[R].shift();return U.timeout&&clearTimeout(U.timeout),this.data[R].length===0&&delete this.data[R],this.order.splice(this.order.indexOf(R),1),U.value},W.prototype.getByKey=function(R){var U=this.data[R];return U?U[0].value:null},W.prototype.get=function(R){return this.has(R)?this.data[R.wrapped().key][0].value:null},W.prototype.remove=function(R,U){if(!this.has(R))return this;var j=R.wrapped().key,X=U===void 0?0:this.data[j].indexOf(U),fe=this.data[j][X];return this.data[j].splice(X,1),fe.timeout&&clearTimeout(fe.timeout),this.data[j].length===0&&delete this.data[j],this.onRemove(fe.value),this.order.splice(this.order.indexOf(j),1),this},W.prototype.setMaxSize=function(R){for(this.max=R;this.order.length>this.max;){var U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this},W.prototype.filter=function(R){var U=[];for(var j in this.data)for(var X=0,fe=this.data[j];X<fe.length;X+=1){var Ae=fe[X];R(Ae.value)||U.push(Ae)}for(var F=0,$=U;F<$.length;F+=1){var ie=$[F];this.remove(ie.value.tileID,ie)}};var Q=function(R,U,j){this.context=R;var X=R.gl;this.buffer=X.createBuffer(),this.dynamicDraw=!!j,this.context.unbindVAO(),R.bindElementBuffer.set(this.buffer),X.bufferData(X.ELEMENT_ARRAY_BUFFER,U.arrayBuffer,this.dynamicDraw?X.DYNAMIC_DRAW:X.STATIC_DRAW),this.dynamicDraw||delete U.arrayBuffer};Q.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Q.prototype.updateData=function(R){var U=this.context.gl;this.context.unbindVAO(),this.bind(),U.bufferSubData(U.ELEMENT_ARRAY_BUFFER,0,R.arrayBuffer)},Q.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var ne={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(R,U,j,X){this.length=U.length,this.attributes=j,this.itemSize=U.bytesPerElement,this.dynamicDraw=X,this.context=R;var fe=R.gl;this.buffer=fe.createBuffer(),R.bindVertexBuffer.set(this.buffer),fe.bufferData(fe.ARRAY_BUFFER,U.arrayBuffer,this.dynamicDraw?fe.DYNAMIC_DRAW:fe.STATIC_DRAW),this.dynamicDraw||delete U.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(R){var U=this.context.gl;this.bind(),U.bufferSubData(U.ARRAY_BUFFER,0,R.arrayBuffer)},re.prototype.enableAttributes=function(R,U){for(var j=0;j<this.attributes.length;j++){var X=this.attributes[j],fe=U.attributes[X.name];fe!==void 0&&R.enableVertexAttribArray(fe)}},re.prototype.setVertexAttribPointers=function(R,U,j){for(var X=0;X<this.attributes.length;X++){var fe=this.attributes[X],Ae=U.attributes[fe.name];Ae!==void 0&&R.vertexAttribPointer(Ae,fe.components,R[ne[fe.type]],!1,this.itemSize,fe.offset+this.itemSize*(j||0))}},re.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(R){this.gl=R.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(R){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var ue=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return l.Color.transparent},U.prototype.set=function(j){var X=this.current;(j.r!==X.r||j.g!==X.g||j.b!==X.b||j.a!==X.a||this.dirty)&&(this.gl.clearColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},U}(ae),pe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 1},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.clearDepth(j),this.current=j,this.dirty=!1)},U}(ae),ge=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 0},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.clearStencil(j),this.current=j,this.dirty=!1)},U}(ae),_e=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return[!0,!0,!0,!0]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||j[2]!==X[2]||j[3]!==X[3]||this.dirty)&&(this.gl.colorMask(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},U}(ae),me=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!0},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.depthMask(j),this.current=j,this.dirty=!1)},U}(ae),ve=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 255},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.stencilMask(j),this.current=j,this.dirty=!1)},U}(ae),Oe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},U.prototype.set=function(j){var X=this.current;(j.func!==X.func||j.ref!==X.ref||j.mask!==X.mask||this.dirty)&&(this.gl.stencilFunc(j.func,j.ref,j.mask),this.current=j,this.dirty=!1)},U}(ae),Me=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){var j=this.gl;return[j.KEEP,j.KEEP,j.KEEP]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||j[2]!==X[2]||this.dirty)&&(this.gl.stencilOp(j[0],j[1],j[2]),this.current=j,this.dirty=!1)},U}(ae),Te=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;j?X.enable(X.STENCIL_TEST):X.disable(X.STENCIL_TEST),this.current=j,this.dirty=!1}},U}(ae),se=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return[0,1]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||this.dirty)&&(this.gl.depthRange(j[0],j[1]),this.current=j,this.dirty=!1)},U}(ae),oe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;j?X.enable(X.DEPTH_TEST):X.disable(X.DEPTH_TEST),this.current=j,this.dirty=!1}},U}(ae),he=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.LESS},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.depthFunc(j),this.current=j,this.dirty=!1)},U}(ae),Ee=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;j?X.enable(X.BLEND):X.disable(X.BLEND),this.current=j,this.dirty=!1}},U}(ae),ke=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){var j=this.gl;return[j.ONE,j.ZERO]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||this.dirty)&&(this.gl.blendFunc(j[0],j[1]),this.current=j,this.dirty=!1)},U}(ae),be=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return l.Color.transparent},U.prototype.set=function(j){var X=this.current;(j.r!==X.r||j.g!==X.g||j.b!==X.b||j.a!==X.a||this.dirty)&&(this.gl.blendColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},U}(ae),Ie=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.FUNC_ADD},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.blendEquation(j),this.current=j,this.dirty=!1)},U}(ae),Fe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;j?X.enable(X.CULL_FACE):X.disable(X.CULL_FACE),this.current=j,this.dirty=!1}},U}(ae),ce=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.BACK},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.cullFace(j),this.current=j,this.dirty=!1)},U}(ae),we=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.CCW},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.frontFace(j),this.current=j,this.dirty=!1)},U}(ae),ye=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.useProgram(j),this.current=j,this.dirty=!1)},U}(ae),Ce=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.TEXTURE0},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.activeTexture(j),this.current=j,this.dirty=!1)},U}(ae),Re=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){var j=this.gl;return[0,0,j.drawingBufferWidth,j.drawingBufferHeight]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||j[2]!==X[2]||j[3]!==X[3]||this.dirty)&&(this.gl.viewport(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},U}(ae),ze=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,j),this.current=j,this.dirty=!1}},U}(ae),He=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.bindRenderbuffer(X.RENDERBUFFER,j),this.current=j,this.dirty=!1}},U}(ae),Ge=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.bindTexture(X.TEXTURE_2D,j),this.current=j,this.dirty=!1}},U}(ae),Je=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.bindBuffer(X.ARRAY_BUFFER,j),this.current=j,this.dirty=!1}},U}(ae),ot=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){var X=this.gl;X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,j),this.current=j,this.dirty=!1},U}(ae),Qe=function(R){function U(j){R.call(this,j),this.vao=j.extVertexArrayObject}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){this.vao&&(j!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(j),this.current=j,this.dirty=!1)},U}(ae),vt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 4},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_ALIGNMENT,j),this.current=j,this.dirty=!1}},U}(ae),xt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j),this.current=j,this.dirty=!1}},U}(ae),mt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,j),this.current=j,this.dirty=!1}},U}(ae),rt=function(R){function U(j,X){R.call(this,j),this.context=j,this.parent=X}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U}(ae),it=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.setDirty=function(){this.dirty=!0},U.prototype.set=function(j){if(j!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,j,0),this.current=j,this.dirty=!1}},U}(rt),Tt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.set=function(j){if(j!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferRenderbuffer(X.FRAMEBUFFER,X.DEPTH_ATTACHMENT,X.RENDERBUFFER,j),this.current=j,this.dirty=!1}},U}(rt),Mt=function(R,U,j,X){this.context=R,this.width=U,this.height=j;var fe=R.gl,Ae=this.framebuffer=fe.createFramebuffer();this.colorAttachment=new it(R,Ae),X&&(this.depthAttachment=new Tt(R,Ae))};Mt.prototype.destroy=function(){var R=this.context.gl,U=this.colorAttachment.get();if(U&&R.deleteTexture(U),this.depthAttachment){var j=this.depthAttachment.get();j&&R.deleteRenderbuffer(j)}R.deleteFramebuffer(this.framebuffer)};var Pt=function(R,U,j){this.func=R,this.mask=U,this.range=j};Pt.ReadOnly=!1,Pt.ReadWrite=!0,Pt.disabled=new Pt(519,Pt.ReadOnly,[0,1]);var kt=7680,Ze=function(R,U,j,X,fe,Ae){this.test=R,this.ref=U,this.mask=j,this.fail=X,this.depthFail=fe,this.pass=Ae};Ze.disabled=new Ze({func:519,mask:0},0,0,kt,kt,kt);var Xe=function(R,U,j){this.blendFunction=R,this.blendColor=U,this.mask=j};Xe.Replace=[1,0],Xe.disabled=new Xe(Xe.Replace,l.Color.transparent,[!1,!1,!1,!1]),Xe.unblended=new Xe(Xe.Replace,l.Color.transparent,[!0,!0,!0,!0]),Xe.alphaBlended=new Xe([1,771],l.Color.transparent,[!0,!0,!0,!0]);var Ve=function(R,U,j){this.enable=R,this.mode=U,this.frontFace=j};Ve.disabled=new Ve(!1,1029,2305),Ve.backCCW=new Ve(!0,1029,2305);var We=function(R){this.gl=R,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ue(this),this.clearDepth=new pe(this),this.clearStencil=new ge(this),this.colorMask=new _e(this),this.depthMask=new me(this),this.stencilMask=new ve(this),this.stencilFunc=new Oe(this),this.stencilOp=new Me(this),this.stencilTest=new Te(this),this.depthRange=new se(this),this.depthTest=new oe(this),this.depthFunc=new he(this),this.blend=new Ee(this),this.blendFunc=new ke(this),this.blendColor=new be(this),this.blendEquation=new Ie(this),this.cullFace=new Fe(this),this.cullFaceSide=new ce(this),this.frontFace=new we(this),this.program=new ye(this),this.activeTexture=new Ce(this),this.viewport=new Re(this),this.bindFramebuffer=new ze(this),this.bindRenderbuffer=new He(this),this.bindTexture=new Ge(this),this.bindVertexBuffer=new Je(this),this.bindElementBuffer=new ot(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Qe(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new xt(this),this.pixelStoreUnpackFlipY=new mt(this),this.extTextureFilterAnisotropic=R.getExtension("EXT_texture_filter_anisotropic")||R.getExtension("MOZ_EXT_texture_filter_anisotropic")||R.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=R.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=R.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(R.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=R.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=R.getExtension("EXT_disjoint_timer_query")};We.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},We.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},We.prototype.createIndexBuffer=function(R,U){return new Q(this,R,U)},We.prototype.createVertexBuffer=function(R,U,j){return new re(this,R,U,j)},We.prototype.createRenderbuffer=function(R,U,j){var X=this.gl,fe=X.createRenderbuffer();return this.bindRenderbuffer.set(fe),X.renderbufferStorage(X.RENDERBUFFER,R,U,j),this.bindRenderbuffer.set(null),fe},We.prototype.createFramebuffer=function(R,U,j){return new Mt(this,R,U,j)},We.prototype.clear=function(R){var U=R.color,j=R.depth,X=this.gl,fe=0;U&&(fe|=X.COLOR_BUFFER_BIT,this.clearColor.set(U),this.colorMask.set([!0,!0,!0,!0])),j!==void 0&&(fe|=X.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(j),this.depthMask.set(!0)),X.clear(fe)},We.prototype.setCullFace=function(R){R.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(R.mode),this.frontFace.set(R.frontFace))},We.prototype.setDepthMode=function(R){R.func!==this.gl.ALWAYS||R.mask?(this.depthTest.set(!0),this.depthFunc.set(R.func),this.depthMask.set(R.mask),this.depthRange.set(R.range)):this.depthTest.set(!1)},We.prototype.setStencilMode=function(R){R.test.func!==this.gl.ALWAYS||R.mask?(this.stencilTest.set(!0),this.stencilMask.set(R.mask),this.stencilOp.set([R.fail,R.depthFail,R.pass]),this.stencilFunc.set({func:R.test.func,ref:R.ref,mask:R.test.mask})):this.stencilTest.set(!1)},We.prototype.setColorMode=function(R){l.deepEqual(R.blendFunction,Xe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(R.blendFunction),this.blendColor.set(R.blendColor)),this.colorMask.set(R.mask)},We.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var at=function(R){function U(j,X,fe){var Ae=this;R.call(this),this.id=j,this.dispatcher=fe,this.on("data",function(F){F.dataType==="source"&&F.sourceDataType==="metadata"&&(Ae._sourceLoaded=!0),Ae._sourceLoaded&&!Ae._paused&&F.dataType==="source"&&F.sourceDataType==="content"&&(Ae.reload(),Ae.transform&&Ae.update(Ae.transform))}),this.on("error",function(){Ae._sourceErrored=!0}),this._source=function(F,$,ie,de){var xe=new te[$.type](F,$,ie,de);if(xe.id!==F)throw new Error("Expected Source id to be "+F+" instead of "+xe.id);return l.bindAll(["load","abort","unload","serialize","prepare"],xe),xe}(j,X,fe,this),this._tiles={},this._cache=new W(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.onAdd=function(j){this.map=j,this._maxTileCacheSize=j?j._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(j)},U.prototype.onRemove=function(j){this._source&&this._source.onRemove&&this._source.onRemove(j)},U.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var j in this._tiles){var X=this._tiles[j];if(X.state!=="loaded"&&X.state!=="errored")return!1}return!0},U.prototype.getSource=function(){return this._source},U.prototype.pause=function(){this._paused=!0},U.prototype.resume=function(){if(this._paused){var j=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,j&&this.reload(),this.transform&&this.update(this.transform)}},U.prototype._loadTile=function(j,X){return this._source.loadTile(j,X)},U.prototype._unloadTile=function(j){if(this._source.unloadTile)return this._source.unloadTile(j,function(){})},U.prototype._abortTile=function(j){if(this._source.abortTile)return this._source.abortTile(j,function(){})},U.prototype.serialize=function(){return this._source.serialize()},U.prototype.prepare=function(j){for(var X in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var fe=this._tiles[X];fe.upload(j),fe.prepare(this.map.style.imageManager)}},U.prototype.getIds=function(){return l.values(this._tiles).map(function(j){return j.tileID}).sort(et).map(function(j){return j.key})},U.prototype.getRenderableIds=function(j){var X=this,fe=[];for(var Ae in this._tiles)this._isIdRenderable(Ae,j)&&fe.push(this._tiles[Ae]);return j?fe.sort(function(F,$){var ie=F.tileID,de=$.tileID,xe=new l.Point(ie.canonical.x,ie.canonical.y)._rotate(X.transform.angle),Le=new l.Point(de.canonical.x,de.canonical.y)._rotate(X.transform.angle);return ie.overscaledZ-de.overscaledZ||Le.y-xe.y||Le.x-xe.x}).map(function(F){return F.tileID.key}):fe.map(function(F){return F.tileID}).sort(et).map(function(F){return F.key})},U.prototype.hasRenderableParent=function(j){var X=this.findLoadedParent(j,0);return!!X&&this._isIdRenderable(X.tileID.key)},U.prototype._isIdRenderable=function(j,X){return this._tiles[j]&&this._tiles[j].hasData()&&!this._coveredTiles[j]&&(X||!this._tiles[j].holdingForFade())},U.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var j in this._cache.reset(),this._tiles)this._tiles[j].state!=="errored"&&this._reloadTile(j,"reloading")},U.prototype._reloadTile=function(j,X){var fe=this._tiles[j];fe&&(fe.state!=="loading"&&(fe.state=X),this._loadTile(fe,this._tileLoaded.bind(this,fe,j,X)))},U.prototype._tileLoaded=function(j,X,fe,Ae){if(Ae)return j.state="errored",void(Ae.status!==404?this._source.fire(new l.ErrorEvent(Ae,{tile:j})):this.update(this.transform));j.timeAdded=l.browser.now(),fe==="expired"&&(j.refreshedUponExpiration=!0),this._setTileReloadTimer(X,j),this.getSource().type==="raster-dem"&&j.dem&&this._backfillDEM(j),this._state.initializeTileState(j,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:j,coord:j.tileID}))},U.prototype._backfillDEM=function(j){for(var X=this.getRenderableIds(),fe=0;fe<X.length;fe++){var Ae=X[fe];if(j.neighboringTiles&&j.neighboringTiles[Ae]){var F=this.getTileByID(Ae);$(j,F),$(F,j)}}function $(ie,de){ie.needsHillshadePrepare=!0;var xe=de.tileID.canonical.x-ie.tileID.canonical.x,Le=de.tileID.canonical.y-ie.tileID.canonical.y,Ne=Math.pow(2,ie.tileID.canonical.z),Ue=de.tileID.key;xe===0&&Le===0||Math.abs(Le)>1||(Math.abs(xe)>1&&(Math.abs(xe+Ne)===1?xe+=Ne:Math.abs(xe-Ne)===1&&(xe-=Ne)),de.dem&&ie.dem&&(ie.dem.backfillBorder(de.dem,xe,Le),ie.neighboringTiles&&ie.neighboringTiles[Ue]&&(ie.neighboringTiles[Ue].backfilled=!0)))}},U.prototype.getTile=function(j){return this.getTileByID(j.key)},U.prototype.getTileByID=function(j){return this._tiles[j]},U.prototype._retainLoadedChildren=function(j,X,fe,Ae){for(var F in this._tiles){var $=this._tiles[F];if(!(Ae[F]||!$.hasData()||$.tileID.overscaledZ<=X||$.tileID.overscaledZ>fe)){for(var ie=$.tileID;$&&$.tileID.overscaledZ>X+1;){var de=$.tileID.scaledTo($.tileID.overscaledZ-1);($=this._tiles[de.key])&&$.hasData()&&(ie=de)}for(var xe=ie;xe.overscaledZ>X;)if(j[(xe=xe.scaledTo(xe.overscaledZ-1)).key]){Ae[ie.key]=ie;break}}}},U.prototype.findLoadedParent=function(j,X){if(j.key in this._loadedParentTiles){var fe=this._loadedParentTiles[j.key];return fe&&fe.tileID.overscaledZ>=X?fe:null}for(var Ae=j.overscaledZ-1;Ae>=X;Ae--){var F=j.scaledTo(Ae),$=this._getLoadedTile(F);if($)return $}},U.prototype._getLoadedTile=function(j){var X=this._tiles[j.key];return X&&X.hasData()?X:this._cache.getByKey(j.wrapped().key)},U.prototype.updateCacheSize=function(j){var X=(Math.ceil(j.width/this._source.tileSize)+1)*(Math.ceil(j.height/this._source.tileSize)+1),fe=Math.floor(5*X),Ae=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,fe):fe;this._cache.setMaxSize(Ae)},U.prototype.handleWrapJump=function(j){var X=(j-(this._prevLng===void 0?j:this._prevLng))/360,fe=Math.round(X);if(this._prevLng=j,fe){var Ae={};for(var F in this._tiles){var $=this._tiles[F];$.tileID=$.tileID.unwrapTo($.tileID.wrap+fe),Ae[$.tileID.key]=$}for(var ie in this._tiles=Ae,this._timers)clearTimeout(this._timers[ie]),delete this._timers[ie];for(var de in this._tiles){var xe=this._tiles[de];this._setTileReloadTimer(de,xe)}}},U.prototype.update=function(j){var X=this;if(this.transform=j,this._sourceLoaded&&!this._paused){var fe;this.updateCacheSize(j),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?fe=j.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Lt){return new l.OverscaledTileID(Lt.canonical.z,Lt.wrap,Lt.canonical.z,Lt.canonical.x,Lt.canonical.y)}):(fe=j.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(fe=fe.filter(function(Lt){return X._source.hasTile(Lt)}))):fe=[];var Ae=j.coveringZoomLevel(this._source),F=Math.max(Ae-U.maxOverzooming,this._source.minzoom),$=Math.max(Ae+U.maxUnderzooming,this._source.minzoom),ie=this._updateRetainedTiles(fe,Ae);if(De(this._source.type)){for(var de={},xe={},Le=0,Ne=Object.keys(ie);Le<Ne.length;Le+=1){var Ue=Ne[Le],qe=ie[Ue],Ye=this._tiles[Ue];if(Ye&&!(Ye.fadeEndTime&&Ye.fadeEndTime<=l.browser.now())){var $e=this.findLoadedParent(qe,F);$e&&(this._addTile($e.tileID),de[$e.tileID.key]=$e.tileID),xe[Ue]=qe}}for(var lt in this._retainLoadedChildren(xe,Ae,$,ie),de)ie[lt]||(this._coveredTiles[lt]=!0,ie[lt]=de[lt])}for(var pt in ie)this._tiles[pt].clearFadeHold();for(var Et=0,Ct=l.keysDifference(this._tiles,ie);Et<Ct.length;Et+=1){var St=Ct[Et],Ft=this._tiles[St];Ft.hasSymbolBuckets&&!Ft.holdingForFade()?Ft.setHoldDuration(this.map._fadeDuration):Ft.hasSymbolBuckets&&!Ft.symbolFadeFinished()||this._removeTile(St)}this._updateLoadedParentTileCache()}},U.prototype.releaseSymbolFadeTiles=function(){for(var j in this._tiles)this._tiles[j].holdingForFade()&&this._removeTile(j)},U.prototype._updateRetainedTiles=function(j,X){for(var fe={},Ae={},F=Math.max(X-U.maxOverzooming,this._source.minzoom),$=Math.max(X+U.maxUnderzooming,this._source.minzoom),ie={},de=0,xe=j;de<xe.length;de+=1){var Le=xe[de],Ne=this._addTile(Le);fe[Le.key]=Le,Ne.hasData()||X<this._source.maxzoom&&(ie[Le.key]=Le)}this._retainLoadedChildren(ie,X,$,fe);for(var Ue=0,qe=j;Ue<qe.length;Ue+=1){var Ye=qe[Ue],$e=this._tiles[Ye.key];if(!$e.hasData()){if(X+1>this._source.maxzoom){var lt=Ye.children(this._source.maxzoom)[0],pt=this.getTile(lt);if(pt&&pt.hasData()){fe[lt.key]=lt;continue}}else{var Et=Ye.children(this._source.maxzoom);if(fe[Et[0].key]&&fe[Et[1].key]&&fe[Et[2].key]&&fe[Et[3].key])continue}for(var Ct=$e.wasRequested(),St=Ye.overscaledZ-1;St>=F;--St){var Ft=Ye.scaledTo(St);if(Ae[Ft.key]||(Ae[Ft.key]=!0,!($e=this.getTile(Ft))&&Ct&&($e=this._addTile(Ft)),$e&&(fe[Ft.key]=Ft,Ct=$e.wasRequested(),$e.hasData())))break}}}return fe},U.prototype._updateLoadedParentTileCache=function(){for(var j in this._loadedParentTiles={},this._tiles){for(var X=[],fe=void 0,Ae=this._tiles[j].tileID;Ae.overscaledZ>0;){if(Ae.key in this._loadedParentTiles){fe=this._loadedParentTiles[Ae.key];break}X.push(Ae.key);var F=Ae.scaledTo(Ae.overscaledZ-1);if(fe=this._getLoadedTile(F))break;Ae=F}for(var $=0,ie=X;$<ie.length;$+=1){var de=ie[$];this._loadedParentTiles[de]=fe}}},U.prototype._addTile=function(j){var X=this._tiles[j.key];if(X)return X;(X=this._cache.getAndRemove(j))&&(this._setTileReloadTimer(j.key,X),X.tileID=j,this._state.initializeTileState(X,this.map?this.map.painter:null),this._cacheTimers[j.key]&&(clearTimeout(this._cacheTimers[j.key]),delete this._cacheTimers[j.key],this._setTileReloadTimer(j.key,X)));var fe=!!X;return fe||(X=new l.Tile(j,this._source.tileSize*j.overscaleFactor()),this._loadTile(X,this._tileLoaded.bind(this,X,j.key,X.state))),X?(X.uses++,this._tiles[j.key]=X,fe||this._source.fire(new l.Event("dataloading",{tile:X,coord:X.tileID,dataType:"source"})),X):null},U.prototype._setTileReloadTimer=function(j,X){var fe=this;j in this._timers&&(clearTimeout(this._timers[j]),delete this._timers[j]);var Ae=X.getExpiryTimeout();Ae&&(this._timers[j]=setTimeout(function(){fe._reloadTile(j,"expired"),delete fe._timers[j]},Ae))},U.prototype._removeTile=function(j){var X=this._tiles[j];X&&(X.uses--,delete this._tiles[j],this._timers[j]&&(clearTimeout(this._timers[j]),delete this._timers[j]),X.uses>0||(X.hasData()&&X.state!=="reloading"?this._cache.add(X.tileID,X,X.getExpiryTimeout()):(X.aborted=!0,this._abortTile(X),this._unloadTile(X))))},U.prototype.clearTiles=function(){for(var j in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(j);this._cache.reset()},U.prototype.tilesIn=function(j,X,fe){var Ae=this,F=[],$=this.transform;if(!$)return F;for(var ie=fe?$.getCameraQueryGeometry(j):j,de=j.map(function(St){return $.pointCoordinate(St)}),xe=ie.map(function(St){return $.pointCoordinate(St)}),Le=this.getIds(),Ne=1/0,Ue=1/0,qe=-1/0,Ye=-1/0,$e=0,lt=xe;$e<lt.length;$e+=1){var pt=lt[$e];Ne=Math.min(Ne,pt.x),Ue=Math.min(Ue,pt.y),qe=Math.max(qe,pt.x),Ye=Math.max(Ye,pt.y)}for(var Et=function(St){var Ft=Ae._tiles[Le[St]];if(!Ft.holdingForFade()){var Lt=Ft.tileID,tn=Math.pow(2,$.zoom-Ft.tileID.overscaledZ),Zt=X*Ft.queryPadding*l.EXTENT/Ft.tileSize/tn,Ht=[Lt.getTilePoint(new l.MercatorCoordinate(Ne,Ue)),Lt.getTilePoint(new l.MercatorCoordinate(qe,Ye))];if(Ht[0].x-Zt<l.EXTENT&&Ht[0].y-Zt<l.EXTENT&&Ht[1].x+Zt>=0&&Ht[1].y+Zt>=0){var dn=de.map(function(zn){return Lt.getTilePoint(zn)}),vn=xe.map(function(zn){return Lt.getTilePoint(zn)});F.push({tile:Ft,tileID:Lt,queryGeometry:dn,cameraQueryGeometry:vn,scale:tn})}}},Ct=0;Ct<Le.length;Ct++)Et(Ct);return F},U.prototype.getVisibleCoordinates=function(j){for(var X=this,fe=this.getRenderableIds(j).map(function(ie){return X._tiles[ie].tileID}),Ae=0,F=fe;Ae<F.length;Ae+=1){var $=F[Ae];$.posMatrix=this.transform.calculatePosMatrix($.toUnwrapped())}return fe},U.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(De(this._source.type))for(var j in this._tiles){var X=this._tiles[j];if(X.fadeEndTime!==void 0&&X.fadeEndTime>=l.browser.now())return!0}return!1},U.prototype.setFeatureState=function(j,X,fe){j=j||"_geojsonTileLayer",this._state.updateState(j,X,fe)},U.prototype.removeFeatureState=function(j,X,fe){j=j||"_geojsonTileLayer",this._state.removeFeatureState(j,X,fe)},U.prototype.getFeatureState=function(j,X){return j=j||"_geojsonTileLayer",this._state.getState(j,X)},U.prototype.setDependencies=function(j,X,fe){var Ae=this._tiles[j];Ae&&Ae.setDependencies(X,fe)},U.prototype.reloadTilesForDependencies=function(j,X){for(var fe in this._tiles)this._tiles[fe].hasDependency(j,X)&&this._reloadTile(fe,"reloading");this._cache.filter(function(Ae){return!Ae.hasDependency(j,X)})},U}(l.Evented);function et(R,U){var j=Math.abs(2*R.wrap)-+(R.wrap<0),X=Math.abs(2*U.wrap)-+(U.wrap<0);return R.overscaledZ-U.overscaledZ||X-j||U.canonical.y-R.canonical.y||U.canonical.x-R.canonical.x}function De(R){return R==="raster"||R==="image"||R==="video"}function Be(){return new l.window.Worker(po.workerUrl)}at.maxOverzooming=10,at.maxUnderzooming=3;var nt="mapboxgl_preloaded_worker_pool",tt=function(){this.active={}};tt.prototype.acquire=function(R){if(!this.workers)for(this.workers=[];this.workers.length<tt.workerCount;)this.workers.push(new Be);return this.active[R]=!0,this.workers.slice()},tt.prototype.release=function(R){delete this.active[R],this.numActive()===0&&(this.workers.forEach(function(U){U.terminate()}),this.workers=null)},tt.prototype.isPreloaded=function(){return!!this.active[nt]},tt.prototype.numActive=function(){return Object.keys(this.active).length};var dt,ht=Math.floor(l.browser.hardwareConcurrency/2);function gt(){return dt||(dt=new tt),dt}function ut(R,U){var j={};for(var X in R)X!=="ref"&&(j[X]=R[X]);return l.refProperties.forEach(function(fe){fe in U&&(j[fe]=U[fe])}),j}function wt(R){R=R.slice();for(var U=Object.create(null),j=0;j<R.length;j++)U[R[j].id]=R[j];for(var X=0;X<R.length;X++)"ref"in R[X]&&(R[X]=ut(R[X],U[R[X].ref]));return R}tt.workerCount=Math.max(Math.min(ht,6),1);var ct={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ft(R,U,j){j.push({command:ct.addSource,args:[R,U[R]]})}function bt(R,U,j){U.push({command:ct.removeSource,args:[R]}),j[R]=!0}function It(R,U,j,X){bt(R,j,X),ft(R,U,j)}function Dt(R,U,j){var X;for(X in R[j])if(R[j].hasOwnProperty(X)&&X!=="data"&&!l.deepEqual(R[j][X],U[j][X]))return!1;for(X in U[j])if(U[j].hasOwnProperty(X)&&X!=="data"&&!l.deepEqual(R[j][X],U[j][X]))return!1;return!0}function Nt(R,U,j,X,fe,Ae){var F;for(F in U=U||{},R=R||{})R.hasOwnProperty(F)&&(l.deepEqual(R[F],U[F])||j.push({command:Ae,args:[X,F,U[F],fe]}));for(F in U)U.hasOwnProperty(F)&&!R.hasOwnProperty(F)&&(l.deepEqual(R[F],U[F])||j.push({command:Ae,args:[X,F,U[F],fe]}))}function Qt(R){return R.id}function jt(R,U){return R[U.id]=U,R}function Ut(R,U){if(!R)return[{command:ct.setStyle,args:[U]}];var j=[];try{if(!l.deepEqual(R.version,U.version))return[{command:ct.setStyle,args:[U]}];l.deepEqual(R.center,U.center)||j.push({command:ct.setCenter,args:[U.center]}),l.deepEqual(R.zoom,U.zoom)||j.push({command:ct.setZoom,args:[U.zoom]}),l.deepEqual(R.bearing,U.bearing)||j.push({command:ct.setBearing,args:[U.bearing]}),l.deepEqual(R.pitch,U.pitch)||j.push({command:ct.setPitch,args:[U.pitch]}),l.deepEqual(R.sprite,U.sprite)||j.push({command:ct.setSprite,args:[U.sprite]}),l.deepEqual(R.glyphs,U.glyphs)||j.push({command:ct.setGlyphs,args:[U.glyphs]}),l.deepEqual(R.transition,U.transition)||j.push({command:ct.setTransition,args:[U.transition]}),l.deepEqual(R.light,U.light)||j.push({command:ct.setLight,args:[U.light]});var X={},fe=[];(function(F,$,ie,de){var xe;for(xe in $=$||{},F=F||{})F.hasOwnProperty(xe)&&($.hasOwnProperty(xe)||bt(xe,ie,de));for(xe in $)$.hasOwnProperty(xe)&&(F.hasOwnProperty(xe)?l.deepEqual(F[xe],$[xe])||(F[xe].type==="geojson"&&$[xe].type==="geojson"&&Dt(F,$,xe)?ie.push({command:ct.setGeoJSONSourceData,args:[xe,$[xe].data]}):It(xe,$,ie,de)):ft(xe,$,ie))})(R.sources,U.sources,fe,X);var Ae=[];R.layers&&R.layers.forEach(function(F){X[F.source]?j.push({command:ct.removeLayer,args:[F.id]}):Ae.push(F)}),j=j.concat(fe),function(F,$,ie){$=$||[];var de,xe,Le,Ne,Ue,qe,Ye,$e=(F=F||[]).map(Qt),lt=$.map(Qt),pt=F.reduce(jt,{}),Et=$.reduce(jt,{}),Ct=$e.slice(),St=Object.create(null);for(de=0,xe=0;de<$e.length;de++)Le=$e[de],Et.hasOwnProperty(Le)?xe++:(ie.push({command:ct.removeLayer,args:[Le]}),Ct.splice(Ct.indexOf(Le,xe),1));for(de=0,xe=0;de<lt.length;de++)Le=lt[lt.length-1-de],Ct[Ct.length-1-de]!==Le&&(pt.hasOwnProperty(Le)?(ie.push({command:ct.removeLayer,args:[Le]}),Ct.splice(Ct.lastIndexOf(Le,Ct.length-xe),1)):xe++,qe=Ct[Ct.length-de],ie.push({command:ct.addLayer,args:[Et[Le],qe]}),Ct.splice(Ct.length-de,0,Le),St[Le]=!0);for(de=0;de<lt.length;de++)if(Ne=pt[Le=lt[de]],Ue=Et[Le],!St[Le]&&!l.deepEqual(Ne,Ue))if(l.deepEqual(Ne.source,Ue.source)&&l.deepEqual(Ne["source-layer"],Ue["source-layer"])&&l.deepEqual(Ne.type,Ue.type)){for(Ye in Nt(Ne.layout,Ue.layout,ie,Le,null,ct.setLayoutProperty),Nt(Ne.paint,Ue.paint,ie,Le,null,ct.setPaintProperty),l.deepEqual(Ne.filter,Ue.filter)||ie.push({command:ct.setFilter,args:[Le,Ue.filter]}),l.deepEqual(Ne.minzoom,Ue.minzoom)&&l.deepEqual(Ne.maxzoom,Ue.maxzoom)||ie.push({command:ct.setLayerZoomRange,args:[Le,Ue.minzoom,Ue.maxzoom]}),Ne)Ne.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?Nt(Ne[Ye],Ue[Ye],ie,Le,Ye.slice(6),ct.setPaintProperty):l.deepEqual(Ne[Ye],Ue[Ye])||ie.push({command:ct.setLayerProperty,args:[Le,Ye,Ue[Ye]]}));for(Ye in Ue)Ue.hasOwnProperty(Ye)&&!Ne.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?Nt(Ne[Ye],Ue[Ye],ie,Le,Ye.slice(6),ct.setPaintProperty):l.deepEqual(Ne[Ye],Ue[Ye])||ie.push({command:ct.setLayerProperty,args:[Le,Ye,Ue[Ye]]}))}else ie.push({command:ct.removeLayer,args:[Le]}),qe=Ct[Ct.lastIndexOf(Le)+1],ie.push({command:ct.addLayer,args:[Ue,qe]})}(Ae,U.layers,j)}catch(F){console.warn("Unable to compute style diff:",F),j=[{command:ct.setStyle,args:[U]}]}return j}var Xt=function(R,U){this.reset(R,U)};Xt.prototype.reset=function(R,U){this.points=R||[],this._distances=[0];for(var j=1;j<this.points.length;j++)this._distances[j]=this._distances[j-1]+this.points[j].dist(this.points[j-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(U||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Xt.prototype.lerp=function(R){if(this.points.length===1)return this.points[0];R=l.clamp(R,0,1);for(var U=1,j=this._distances[U],X=R*this.paddedLength+this.padding;j<X&&U<this._distances.length;)j=this._distances[++U];var fe=U-1,Ae=this._distances[fe],F=j-Ae,$=F>0?(X-Ae)/F:0;return this.points[fe].mult(1-$).add(this.points[U].mult($))};var gn=function(R,U,j){var X=this.boxCells=[],fe=this.circleCells=[];this.xCellCount=Math.ceil(R/j),this.yCellCount=Math.ceil(U/j);for(var Ae=0;Ae<this.xCellCount*this.yCellCount;Ae++)X.push([]),fe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=R,this.height=U,this.xScale=this.xCellCount/R,this.yScale=this.yCellCount/U,this.boxUid=0,this.circleUid=0};function Mn(R,U,j,X,fe){var Ae=l.create();return U?(l.scale(Ae,Ae,[1/fe,1/fe,1]),j||l.rotateZ(Ae,Ae,X.angle)):l.multiply(Ae,X.labelPlaneMatrix,R),Ae}function cn(R,U,j,X,fe){if(U){var Ae=l.clone(R);return l.scale(Ae,Ae,[fe,fe,1]),j||l.rotateZ(Ae,Ae,-X.angle),Ae}return X.glCoordMatrix}function qt(R,U){var j=[R.x,R.y,0,1];Qn(j,j,U);var X=j[3];return{point:new l.Point(j[0]/X,j[1]/X),signedDistanceFromCamera:X}}function nn(R,U){return .5+R/U*.5}function Kt(R,U){var j=R[0]/R[3],X=R[1]/R[3];return j>=-U[0]&&j<=U[0]&&X>=-U[1]&&X<=U[1]}function sn(R,U,j,X,fe,Ae,F,$){var ie=X?R.textSizeData:R.iconSizeData,de=l.evaluateSizeForZoom(ie,j.transform.zoom),xe=[256/j.width*2+1,256/j.height*2+1],Le=X?R.text.dynamicLayoutVertexArray:R.icon.dynamicLayoutVertexArray;Le.clear();for(var Ne=R.lineVertexArray,Ue=X?R.text.placedSymbolArray:R.icon.placedSymbolArray,qe=j.transform.width/j.transform.height,Ye=!1,$e=0;$e<Ue.length;$e++){var lt=Ue.get($e);if(lt.hidden||lt.writingMode===l.WritingMode.vertical&&!Ye)Hn(lt.numGlyphs,Le);else{Ye=!1;var pt=[lt.anchorX,lt.anchorY,0,1];if(l.transformMat4(pt,pt,U),Kt(pt,xe)){var Et=pt[3],Ct=nn(j.transform.cameraToCenterDistance,Et),St=l.evaluateSizeForFeature(ie,de,lt),Ft=F?St/Ct:St*Ct,Lt=new l.Point(lt.anchorX,lt.anchorY),tn=qt(Lt,fe).point,Zt={},Ht=yn(lt,Ft,!1,$,U,fe,Ae,R.glyphOffsetArray,Ne,Le,tn,Lt,Zt,qe);Ye=Ht.useVertical,(Ht.notEnoughRoom||Ye||Ht.needsFlipping&&yn(lt,Ft,!0,$,U,fe,Ae,R.glyphOffsetArray,Ne,Le,tn,Lt,Zt,qe).notEnoughRoom)&&Hn(lt.numGlyphs,Le)}else Hn(lt.numGlyphs,Le)}}X?R.text.dynamicLayoutVertexBuffer.updateData(Le):R.icon.dynamicLayoutVertexBuffer.updateData(Le)}function hn(R,U,j,X,fe,Ae,F,$,ie,de,xe){var Le=$.glyphStartIndex+$.numGlyphs,Ne=$.lineStartIndex,Ue=$.lineStartIndex+$.lineLength,qe=U.getoffsetX($.glyphStartIndex),Ye=U.getoffsetX(Le-1),$e=pn(R*qe,j,X,fe,Ae,F,$.segment,Ne,Ue,ie,de,xe);if(!$e)return null;var lt=pn(R*Ye,j,X,fe,Ae,F,$.segment,Ne,Ue,ie,de,xe);return lt?{first:$e,last:lt}:null}function bn(R,U,j,X){return R===l.WritingMode.horizontal&&Math.abs(j.y-U.y)>Math.abs(j.x-U.x)*X?{useVertical:!0}:(R===l.WritingMode.vertical?U.y<j.y:U.x>j.x)?{needsFlipping:!0}:null}function yn(R,U,j,X,fe,Ae,F,$,ie,de,xe,Le,Ne,Ue){var qe,Ye=U/24,$e=R.lineOffsetX*Ye,lt=R.lineOffsetY*Ye;if(R.numGlyphs>1){var pt=R.glyphStartIndex+R.numGlyphs,Et=R.lineStartIndex,Ct=R.lineStartIndex+R.lineLength,St=hn(Ye,$,$e,lt,j,xe,Le,R,ie,Ae,Ne);if(!St)return{notEnoughRoom:!0};var Ft=qt(St.first.point,F).point,Lt=qt(St.last.point,F).point;if(X&&!j){var tn=bn(R.writingMode,Ft,Lt,Ue);if(tn)return tn}qe=[St.first];for(var Zt=R.glyphStartIndex+1;Zt<pt-1;Zt++)qe.push(pn(Ye*$.getoffsetX(Zt),$e,lt,j,xe,Le,R.segment,Et,Ct,ie,Ae,Ne));qe.push(St.last)}else{if(X&&!j){var Ht=qt(Le,fe).point,dn=R.lineStartIndex+R.segment+1,vn=new l.Point(ie.getx(dn),ie.gety(dn)),zn=qt(vn,fe),Rn=zn.signedDistanceFromCamera>0?zn.point:Sn(Le,vn,Ht,1,fe),Vn=bn(R.writingMode,Ht,Rn,Ue);if(Vn)return Vn}var Xn=pn(Ye*$.getoffsetX(R.glyphStartIndex),$e,lt,j,xe,Le,R.segment,R.lineStartIndex,R.lineStartIndex+R.lineLength,ie,Ae,Ne);if(!Xn)return{notEnoughRoom:!0};qe=[Xn]}for(var or=0,ar=qe;or<ar.length;or+=1){var fr=ar[or];l.addDynamicAttributes(de,fr.point,fr.angle)}return{}}function Sn(R,U,j,X,fe){var Ae=qt(R.add(R.sub(U)._unit()),fe).point,F=j.sub(Ae);return j.add(F._mult(X/F.mag()))}function pn(R,U,j,X,fe,Ae,F,$,ie,de,xe,Le){var Ne=X?R-U:R+U,Ue=Ne>0?1:-1,qe=0;X&&(Ue*=-1,qe=Math.PI),Ue<0&&(qe+=Math.PI);for(var Ye=Ue>0?$+F:$+F+1,$e=fe,lt=fe,pt=0,Et=0,Ct=Math.abs(Ne),St=[];pt+Et<=Ct;){if((Ye+=Ue)<$||Ye>=ie)return null;if(lt=$e,St.push($e),($e=Le[Ye])===void 0){var Ft=new l.Point(de.getx(Ye),de.gety(Ye)),Lt=qt(Ft,xe);if(Lt.signedDistanceFromCamera>0)$e=Le[Ye]=Lt.point;else{var tn=Ye-Ue;$e=Sn(pt===0?Ae:new l.Point(de.getx(tn),de.gety(tn)),Ft,lt,Ct-pt+1,xe)}}pt+=Et,Et=lt.dist($e)}var Zt=(Ct-pt)/Et,Ht=$e.sub(lt),dn=Ht.mult(Zt)._add(lt);dn._add(Ht._unit()._perp()._mult(j*Ue));var vn=qe+Math.atan2($e.y-lt.y,$e.x-lt.x);return St.push(dn),{point:dn,angle:vn,path:St}}gn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},gn.prototype.insert=function(R,U,j,X,fe){this._forEachCell(U,j,X,fe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(R),this.bboxes.push(U),this.bboxes.push(j),this.bboxes.push(X),this.bboxes.push(fe)},gn.prototype.insertCircle=function(R,U,j,X){this._forEachCell(U-X,j-X,U+X,j+X,this._insertCircleCell,this.circleUid++),this.circleKeys.push(R),this.circles.push(U),this.circles.push(j),this.circles.push(X)},gn.prototype._insertBoxCell=function(R,U,j,X,fe,Ae){this.boxCells[fe].push(Ae)},gn.prototype._insertCircleCell=function(R,U,j,X,fe,Ae){this.circleCells[fe].push(Ae)},gn.prototype._query=function(R,U,j,X,fe,Ae){if(j<0||R>this.width||X<0||U>this.height)return!fe&&[];var F=[];if(R<=0&&U<=0&&this.width<=j&&this.height<=X){if(fe)return!0;for(var $=0;$<this.boxKeys.length;$++)F.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(var ie=0;ie<this.circleKeys.length;ie++){var de=this.circles[3*ie],xe=this.circles[3*ie+1],Le=this.circles[3*ie+2];F.push({key:this.circleKeys[ie],x1:de-Le,y1:xe-Le,x2:de+Le,y2:xe+Le})}return Ae?F.filter(Ae):F}var Ne={hitTest:fe,seenUids:{box:{},circle:{}}};return this._forEachCell(R,U,j,X,this._queryCell,F,Ne,Ae),fe?F.length>0:F},gn.prototype._queryCircle=function(R,U,j,X,fe){var Ae=R-j,F=R+j,$=U-j,ie=U+j;if(F<0||Ae>this.width||ie<0||$>this.height)return!X&&[];var de=[],xe={hitTest:X,circle:{x:R,y:U,radius:j},seenUids:{box:{},circle:{}}};return this._forEachCell(Ae,$,F,ie,this._queryCellCircle,de,xe,fe),X?de.length>0:de},gn.prototype.query=function(R,U,j,X,fe){return this._query(R,U,j,X,!1,fe)},gn.prototype.hitTest=function(R,U,j,X,fe){return this._query(R,U,j,X,!0,fe)},gn.prototype.hitTestCircle=function(R,U,j,X){return this._queryCircle(R,U,j,!0,X)},gn.prototype._queryCell=function(R,U,j,X,fe,Ae,F,$){var ie=F.seenUids,de=this.boxCells[fe];if(de!==null)for(var xe=this.bboxes,Le=0,Ne=de;Le<Ne.length;Le+=1){var Ue=Ne[Le];if(!ie.box[Ue]){ie.box[Ue]=!0;var qe=4*Ue;if(R<=xe[qe+2]&&U<=xe[qe+3]&&j>=xe[qe+0]&&X>=xe[qe+1]&&(!$||$(this.boxKeys[Ue]))){if(F.hitTest)return Ae.push(!0),!0;Ae.push({key:this.boxKeys[Ue],x1:xe[qe],y1:xe[qe+1],x2:xe[qe+2],y2:xe[qe+3]})}}}var Ye=this.circleCells[fe];if(Ye!==null)for(var $e=this.circles,lt=0,pt=Ye;lt<pt.length;lt+=1){var Et=pt[lt];if(!ie.circle[Et]){ie.circle[Et]=!0;var Ct=3*Et;if(this._circleAndRectCollide($e[Ct],$e[Ct+1],$e[Ct+2],R,U,j,X)&&(!$||$(this.circleKeys[Et]))){if(F.hitTest)return Ae.push(!0),!0;var St=$e[Ct],Ft=$e[Ct+1],Lt=$e[Ct+2];Ae.push({key:this.circleKeys[Et],x1:St-Lt,y1:Ft-Lt,x2:St+Lt,y2:Ft+Lt})}}}},gn.prototype._queryCellCircle=function(R,U,j,X,fe,Ae,F,$){var ie=F.circle,de=F.seenUids,xe=this.boxCells[fe];if(xe!==null)for(var Le=this.bboxes,Ne=0,Ue=xe;Ne<Ue.length;Ne+=1){var qe=Ue[Ne];if(!de.box[qe]){de.box[qe]=!0;var Ye=4*qe;if(this._circleAndRectCollide(ie.x,ie.y,ie.radius,Le[Ye+0],Le[Ye+1],Le[Ye+2],Le[Ye+3])&&(!$||$(this.boxKeys[qe])))return Ae.push(!0),!0}}var $e=this.circleCells[fe];if($e!==null)for(var lt=this.circles,pt=0,Et=$e;pt<Et.length;pt+=1){var Ct=Et[pt];if(!de.circle[Ct]){de.circle[Ct]=!0;var St=3*Ct;if(this._circlesCollide(lt[St],lt[St+1],lt[St+2],ie.x,ie.y,ie.radius)&&(!$||$(this.circleKeys[Ct])))return Ae.push(!0),!0}}},gn.prototype._forEachCell=function(R,U,j,X,fe,Ae,F,$){for(var ie=this._convertToXCellCoord(R),de=this._convertToYCellCoord(U),xe=this._convertToXCellCoord(j),Le=this._convertToYCellCoord(X),Ne=ie;Ne<=xe;Ne++)for(var Ue=de;Ue<=Le;Ue++){var qe=this.xCellCount*Ue+Ne;if(fe.call(this,R,U,j,X,qe,Ae,F,$))return}},gn.prototype._convertToXCellCoord=function(R){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(R*this.xScale)))},gn.prototype._convertToYCellCoord=function(R){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(R*this.yScale)))},gn.prototype._circlesCollide=function(R,U,j,X,fe,Ae){var F=X-R,$=fe-U,ie=j+Ae;return ie*ie>F*F+$*$},gn.prototype._circleAndRectCollide=function(R,U,j,X,fe,Ae,F){var $=(Ae-X)/2,ie=Math.abs(R-(X+$));if(ie>$+j)return!1;var de=(F-fe)/2,xe=Math.abs(U-(fe+de));if(xe>de+j)return!1;if(ie<=$||xe<=de)return!0;var Le=ie-$,Ne=xe-de;return Le*Le+Ne*Ne<=j*j};var Cn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Hn(R,U){for(var j=0;j<R;j++){var X=U.length;U.resize(X+4),U.float32.set(Cn,3*X)}}function Qn(R,U,j){var X=U[0],fe=U[1];return R[0]=j[0]*X+j[4]*fe+j[12],R[1]=j[1]*X+j[5]*fe+j[13],R[3]=j[3]*X+j[7]*fe+j[15],R}var nr=100,Jn=function(R,U,j){U===void 0&&(U=new gn(R.width+200,R.height+200,25)),j===void 0&&(j=new gn(R.width+200,R.height+200,25)),this.transform=R,this.grid=U,this.ignoredGrid=j,this.pitchfactor=Math.cos(R._pitch)*R.cameraToCenterDistance,this.screenRightBoundary=R.width+nr,this.screenBottomBoundary=R.height+nr,this.gridRightBoundary=R.width+200,this.gridBottomBoundary=R.height+200};function Gn(R,U,j){return U*(l.EXTENT/(R.tileSize*Math.pow(2,j-R.tileID.overscaledZ)))}Jn.prototype.placeCollisionBox=function(R,U,j,X,fe){var Ae=this.projectAndGetPerspectiveRatio(X,R.anchorPointX,R.anchorPointY),F=j*Ae.perspectiveRatio,$=R.x1*F+Ae.point.x,ie=R.y1*F+Ae.point.y,de=R.x2*F+Ae.point.x,xe=R.y2*F+Ae.point.y;return!this.isInsideGrid($,ie,de,xe)||!U&&this.grid.hitTest($,ie,de,xe,fe)?{box:[],offscreen:!1}:{box:[$,ie,de,xe],offscreen:this.isOffscreen($,ie,de,xe)}},Jn.prototype.placeCollisionCircles=function(R,U,j,X,fe,Ae,F,$,ie,de,xe,Le,Ne){var Ue=[],qe=new l.Point(U.anchorX,U.anchorY),Ye=qt(qe,Ae),$e=nn(this.transform.cameraToCenterDistance,Ye.signedDistanceFromCamera),lt=(de?fe/$e:fe*$e)/l.ONE_EM,pt=qt(qe,F).point,Et=hn(lt,X,U.lineOffsetX*lt,U.lineOffsetY*lt,!1,pt,qe,U,j,F,{}),Ct=!1,St=!1,Ft=!0;if(Et){for(var Lt=.5*Le*$e+Ne,tn=new l.Point(-100,-100),Zt=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Ht=new Xt,dn=Et.first,vn=Et.last,zn=[],Rn=dn.path.length-1;Rn>=1;Rn--)zn.push(dn.path[Rn]);for(var Vn=1;Vn<vn.path.length;Vn++)zn.push(vn.path[Vn]);var Xn=2.5*Lt;if($){var or=zn.map(function(Li){return qt(Li,$)});zn=or.some(function(Li){return Li.signedDistanceFromCamera<=0})?[]:or.map(function(Li){return Li.point})}var ar=[];if(zn.length>0){for(var fr=zn[0].clone(),mr=zn[0].clone(),Lr=1;Lr<zn.length;Lr++)fr.x=Math.min(fr.x,zn[Lr].x),fr.y=Math.min(fr.y,zn[Lr].y),mr.x=Math.max(mr.x,zn[Lr].x),mr.y=Math.max(mr.y,zn[Lr].y);ar=fr.x>=tn.x&&mr.x<=Zt.x&&fr.y>=tn.y&&mr.y<=Zt.y?[zn]:mr.x<tn.x||fr.x>Zt.x||mr.y<tn.y||fr.y>Zt.y?[]:l.clipLine([zn],tn.x,tn.y,Zt.x,Zt.y)}for(var Nn=0,ir=ar;Nn<ir.length;Nn+=1){var hr=ir[Nn];Ht.reset(hr,.25*Lt);var yr;yr=Ht.length<=.5*Lt?1:Math.ceil(Ht.paddedLength/Xn)+1;for(var Mr=0;Mr<yr;Mr++){var Ir=Mr/Math.max(yr-1,1),Br=Ht.lerp(Ir),Zr=Br.x+nr,oi=Br.y+nr;Ue.push(Zr,oi,Lt,0);var si=Zr-Lt,Yr=oi-Lt,wi=Zr+Lt,Hi=oi+Lt;if(Ft=Ft&&this.isOffscreen(si,Yr,wi,Hi),St=St||this.isInsideGrid(si,Yr,wi,Hi),!R&&this.grid.hitTestCircle(Zr,oi,Lt,xe)&&(Ct=!0,!ie))return{circles:[],offscreen:!1,collisionDetected:Ct}}}}return{circles:!ie&&Ct||!St?[]:Ue,offscreen:Ft,collisionDetected:Ct}},Jn.prototype.queryRenderedSymbols=function(R){if(R.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var U=[],j=1/0,X=1/0,fe=-1/0,Ae=-1/0,F=0,$=R;F<$.length;F+=1){var ie=$[F],de=new l.Point(ie.x+nr,ie.y+nr);j=Math.min(j,de.x),X=Math.min(X,de.y),fe=Math.max(fe,de.x),Ae=Math.max(Ae,de.y),U.push(de)}for(var xe={},Le={},Ne=0,Ue=this.grid.query(j,X,fe,Ae).concat(this.ignoredGrid.query(j,X,fe,Ae));Ne<Ue.length;Ne+=1){var qe=Ue[Ne],Ye=qe.key;if(xe[Ye.bucketInstanceId]===void 0&&(xe[Ye.bucketInstanceId]={}),!xe[Ye.bucketInstanceId][Ye.featureIndex]){var $e=[new l.Point(qe.x1,qe.y1),new l.Point(qe.x2,qe.y1),new l.Point(qe.x2,qe.y2),new l.Point(qe.x1,qe.y2)];l.polygonIntersectsPolygon(U,$e)&&(xe[Ye.bucketInstanceId][Ye.featureIndex]=!0,Le[Ye.bucketInstanceId]===void 0&&(Le[Ye.bucketInstanceId]=[]),Le[Ye.bucketInstanceId].push(Ye.featureIndex))}}return Le},Jn.prototype.insertCollisionBox=function(R,U,j,X,fe){var Ae={bucketInstanceId:j,featureIndex:X,collisionGroupID:fe};(U?this.ignoredGrid:this.grid).insert(Ae,R[0],R[1],R[2],R[3])},Jn.prototype.insertCollisionCircles=function(R,U,j,X,fe){for(var Ae=U?this.ignoredGrid:this.grid,F={bucketInstanceId:j,featureIndex:X,collisionGroupID:fe},$=0;$<R.length;$+=4)Ae.insertCircle(F,R[$],R[$+1],R[$+2])},Jn.prototype.projectAndGetPerspectiveRatio=function(R,U,j){var X=[U,j,0,1];return Qn(X,X,R),{point:new l.Point((X[0]/X[3]+1)/2*this.transform.width+nr,(-X[1]/X[3]+1)/2*this.transform.height+nr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/X[3]*.5}},Jn.prototype.isOffscreen=function(R,U,j,X){return j<nr||R>=this.screenRightBoundary||X<nr||U>this.screenBottomBoundary},Jn.prototype.isInsideGrid=function(R,U,j,X){return j>=0&&R<this.gridRightBoundary&&X>=0&&U<this.gridBottomBoundary},Jn.prototype.getViewportMatrix=function(){var R=l.identity([]);return l.translate(R,R,[-100,-100,0]),R};var lr=function(R,U,j,X){this.opacity=R?Math.max(0,Math.min(1,R.opacity+(R.placed?U:-U))):X&&j?1:0,this.placed=j};lr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Rt=function(R,U,j,X,fe){this.text=new lr(R?R.text:null,U,j,fe),this.icon=new lr(R?R.icon:null,U,X,fe)};Rt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var $t=function(R,U,j){this.text=R,this.icon=U,this.skipFade=j},an=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},fn=function(R,U,j,X,fe){this.bucketInstanceId=R,this.featureIndex=U,this.sourceLayerIndex=j,this.bucketIndex=X,this.tileID=fe},wn=function(R){this.crossSourceCollisions=R,this.maxGroupID=0,this.collisionGroups={}};function Bn(R,U,j,X,fe){var Ae=l.getAnchorAlignment(R),F=-(Ae.horizontalAlign-.5)*U,$=-(Ae.verticalAlign-.5)*j,ie=l.evaluateVariableOffset(R,X);return new l.Point(F+ie[0]*fe,$+ie[1]*fe)}function Ln(R,U,j,X,fe,Ae){var F=R.x1,$=R.x2,ie=R.y1,de=R.y2,xe=R.anchorPointX,Le=R.anchorPointY,Ne=new l.Point(U,j);return X&&Ne._rotate(fe?Ae:-Ae),{x1:F+Ne.x,y1:ie+Ne.y,x2:$+Ne.x,y2:de+Ne.y,anchorPointX:xe,anchorPointY:Le}}wn.prototype.get=function(R){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[R]){var U=++this.maxGroupID;this.collisionGroups[R]={ID:U,predicate:function(j){return j.collisionGroupID===U}}}return this.collisionGroups[R]};var In=function(R,U,j,X){this.transform=R.clone(),this.collisionIndex=new Jn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=U,this.retainedQueryData={},this.collisionGroups=new wn(j),this.collisionCircleArrays={},this.prevPlacement=X,X&&(X.prevPlacement=void 0),this.placedOrientations={}};function Wn(R,U,j,X,fe){R.emplaceBack(U?1:0,j?1:0,X||0,fe||0),R.emplaceBack(U?1:0,j?1:0,X||0,fe||0),R.emplaceBack(U?1:0,j?1:0,X||0,fe||0),R.emplaceBack(U?1:0,j?1:0,X||0,fe||0)}In.prototype.getBucketParts=function(R,U,j,X){var fe=j.getBucket(U),Ae=j.latestFeatureIndex;if(fe&&Ae&&U.id===fe.layerIds[0]){var F=j.collisionBoxArray,$=fe.layers[0].layout,ie=Math.pow(2,this.transform.zoom-j.tileID.overscaledZ),de=j.tileSize/l.EXTENT,xe=this.transform.calculatePosMatrix(j.tileID.toUnwrapped()),Le=$.get("text-pitch-alignment")==="map",Ne=$.get("text-rotation-alignment")==="map",Ue=Gn(j,1,this.transform.zoom),qe=Mn(xe,Le,Ne,this.transform,Ue),Ye=null;if(Le){var $e=cn(xe,Le,Ne,this.transform,Ue);Ye=l.multiply([],this.transform.labelPlaneMatrix,$e)}this.retainedQueryData[fe.bucketInstanceId]=new fn(fe.bucketInstanceId,Ae,fe.sourceLayerIndex,fe.index,j.tileID);var lt={bucket:fe,layout:$,posMatrix:xe,textLabelPlaneMatrix:qe,labelToScreenMatrix:Ye,scale:ie,textPixelRatio:de,holdingForFade:j.holdingForFade(),collisionBoxArray:F,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(fe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(fe.sourceID)};if(X)for(var pt=0,Et=fe.sortKeyRanges;pt<Et.length;pt+=1){var Ct=Et[pt],St=Ct.sortKey,Ft=Ct.symbolInstanceStart,Lt=Ct.symbolInstanceEnd;R.push({sortKey:St,symbolInstanceStart:Ft,symbolInstanceEnd:Lt,parameters:lt})}else R.push({symbolInstanceStart:0,symbolInstanceEnd:fe.symbolInstances.length,parameters:lt})}},In.prototype.attemptAnchorPlacement=function(R,U,j,X,fe,Ae,F,$,ie,de,xe,Le,Ne,Ue,qe){var Ye,$e=[Le.textOffset0,Le.textOffset1],lt=Bn(R,j,X,$e,fe),pt=this.collisionIndex.placeCollisionBox(Ln(U,lt.x,lt.y,Ae,F,this.transform.angle),xe,$,ie,de.predicate);if(!qe||this.collisionIndex.placeCollisionBox(Ln(qe,lt.x,lt.y,Ae,F,this.transform.angle),xe,$,ie,de.predicate).box.length!==0)return pt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Le.crossTileID]&&this.prevPlacement.placements[Le.crossTileID]&&this.prevPlacement.placements[Le.crossTileID].text&&(Ye=this.prevPlacement.variableOffsets[Le.crossTileID].anchor),this.variableOffsets[Le.crossTileID]={textOffset:$e,width:j,height:X,anchor:R,textBoxScale:fe,prevAnchor:Ye},this.markUsedJustification(Ne,R,Le,Ue),Ne.allowVerticalPlacement&&(this.markUsedOrientation(Ne,Ue,Le),this.placedOrientations[Le.crossTileID]=Ue),{shift:lt,placedGlyphBoxes:pt}):void 0},In.prototype.placeLayerBucketPart=function(R,U,j){var X=this,fe=R.parameters,Ae=fe.bucket,F=fe.layout,$=fe.posMatrix,ie=fe.textLabelPlaneMatrix,de=fe.labelToScreenMatrix,xe=fe.textPixelRatio,Le=fe.holdingForFade,Ne=fe.collisionBoxArray,Ue=fe.partiallyEvaluatedTextSize,qe=fe.collisionGroup,Ye=F.get("text-optional"),$e=F.get("icon-optional"),lt=F.get("text-allow-overlap"),pt=F.get("icon-allow-overlap"),Et=F.get("text-rotation-alignment")==="map",Ct=F.get("text-pitch-alignment")==="map",St=F.get("icon-text-fit")!=="none",Ft=F.get("symbol-z-order")==="viewport-y",Lt=lt&&(pt||!Ae.hasIconData()||$e),tn=pt&&(lt||!Ae.hasTextData()||Ye);!Ae.collisionArrays&&Ne&&Ae.deserializeCollisionBoxes(Ne);var Zt=function(Vn,Xn){if(!U[Vn.crossTileID])if(Le)X.placements[Vn.crossTileID]=new $t(!1,!1,!1);else{var or,ar=!1,fr=!1,mr=!0,Lr=null,Nn={box:null,offscreen:null},ir={box:null,offscreen:null},hr=null,yr=null,Mr=0,Ir=0,Br=0;Xn.textFeatureIndex?Mr=Xn.textFeatureIndex:Vn.useRuntimeCollisionCircles&&(Mr=Vn.featureIndex),Xn.verticalTextFeatureIndex&&(Ir=Xn.verticalTextFeatureIndex);var Zr=Xn.textBox;if(Zr){var oi=function(Ai){var qi=l.WritingMode.horizontal;if(Ae.allowVerticalPlacement&&!Ai&&X.prevPlacement){var ja=X.prevPlacement.placedOrientations[Vn.crossTileID];ja&&(X.placedOrientations[Vn.crossTileID]=ja,qi=ja,X.markUsedOrientation(Ae,qi,Vn))}return qi},si=function(Ai,qi){if(Ae.allowVerticalPlacement&&Vn.numVerticalGlyphVertices>0&&Xn.verticalTextBox)for(var ja=0,Ol=Ae.writingModes;ja<Ol.length&&(Ol[ja]===l.WritingMode.vertical?(Nn=qi(),ir=Nn):Nn=Ai(),!(Nn&&Nn.box&&Nn.box.length));ja+=1);else Nn=Ai()};if(F.get("text-variable-anchor")){var Yr=F.get("text-variable-anchor");if(X.prevPlacement&&X.prevPlacement.variableOffsets[Vn.crossTileID]){var wi=X.prevPlacement.variableOffsets[Vn.crossTileID];Yr.indexOf(wi.anchor)>0&&(Yr=Yr.filter(function(Ai){return Ai!==wi.anchor})).unshift(wi.anchor)}var Hi=function(Ai,qi,ja){for(var Ol=Ai.x2-Ai.x1,Iu=Ai.y2-Ai.y1,xc=Vn.textBoxScale,ru=St&&!pt?qi:null,Il={box:[],offscreen:!1},iu=lt?2*Yr.length:Yr.length,bl=0;bl<iu;++bl){var Du=Yr[bl%Yr.length],pl=bl>=Yr.length,au=X.attemptAnchorPlacement(Du,Ai,Ol,Iu,xc,Et,Ct,xe,$,qe,pl,Vn,Ae,ja,ru);if(au&&(Il=au.placedGlyphBoxes)&&Il.box&&Il.box.length){ar=!0,Lr=au.shift;break}}return Il};si(function(){return Hi(Zr,Xn.iconBox,l.WritingMode.horizontal)},function(){var Ai=Xn.verticalTextBox,qi=Nn&&Nn.box&&Nn.box.length;return Ae.allowVerticalPlacement&&!qi&&Vn.numVerticalGlyphVertices>0&&Ai?Hi(Ai,Xn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Nn&&(ar=Nn.box,mr=Nn.offscreen);var Li=oi(Nn&&Nn.box);if(!ar&&X.prevPlacement){var Ri=X.prevPlacement.variableOffsets[Vn.crossTileID];Ri&&(X.variableOffsets[Vn.crossTileID]=Ri,X.markUsedJustification(Ae,Ri.anchor,Vn,Li))}}else{var Ur=function(Ai,qi){var ja=X.collisionIndex.placeCollisionBox(Ai,lt,xe,$,qe.predicate);return ja&&ja.box&&ja.box.length&&(X.markUsedOrientation(Ae,qi,Vn),X.placedOrientations[Vn.crossTileID]=qi),ja};si(function(){return Ur(Zr,l.WritingMode.horizontal)},function(){var Ai=Xn.verticalTextBox;return Ae.allowVerticalPlacement&&Vn.numVerticalGlyphVertices>0&&Ai?Ur(Ai,l.WritingMode.vertical):{box:null,offscreen:null}}),oi(Nn&&Nn.box&&Nn.box.length)}}if(ar=(or=Nn)&&or.box&&or.box.length>0,mr=or&&or.offscreen,Vn.useRuntimeCollisionCircles){var Fr=Ae.text.placedSymbolArray.get(Vn.centerJustifiedTextSymbolIndex),li=l.evaluateSizeForFeature(Ae.textSizeData,Ue,Fr),ti=F.get("text-padding"),fi=Vn.collisionCircleDiameter;hr=X.collisionIndex.placeCollisionCircles(lt,Fr,Ae.lineVertexArray,Ae.glyphOffsetArray,li,$,ie,de,j,Ct,qe.predicate,fi,ti),ar=lt||hr.circles.length>0&&!hr.collisionDetected,mr=mr&&hr.offscreen}if(Xn.iconFeatureIndex&&(Br=Xn.iconFeatureIndex),Xn.iconBox){var sa=function(Ai){var qi=St&&Lr?Ln(Ai,Lr.x,Lr.y,Et,Ct,X.transform.angle):Ai;return X.collisionIndex.placeCollisionBox(qi,pt,xe,$,qe.predicate)};fr=ir&&ir.box&&ir.box.length&&Xn.verticalIconBox?(yr=sa(Xn.verticalIconBox)).box.length>0:(yr=sa(Xn.iconBox)).box.length>0,mr=mr&&yr.offscreen}var mi=Ye||Vn.numHorizontalGlyphVertices===0&&Vn.numVerticalGlyphVertices===0,Wr=$e||Vn.numIconVertices===0;if(mi||Wr?Wr?mi||(fr=fr&&ar):ar=fr&&ar:fr=ar=fr&&ar,ar&&or&&or.box&&(ir&&ir.box&&Ir?X.collisionIndex.insertCollisionBox(or.box,F.get("text-ignore-placement"),Ae.bucketInstanceId,Ir,qe.ID):X.collisionIndex.insertCollisionBox(or.box,F.get("text-ignore-placement"),Ae.bucketInstanceId,Mr,qe.ID)),fr&&yr&&X.collisionIndex.insertCollisionBox(yr.box,F.get("icon-ignore-placement"),Ae.bucketInstanceId,Br,qe.ID),hr&&(ar&&X.collisionIndex.insertCollisionCircles(hr.circles,F.get("text-ignore-placement"),Ae.bucketInstanceId,Mr,qe.ID),j)){var es=Ae.bucketInstanceId,ga=X.collisionCircleArrays[es];ga===void 0&&(ga=X.collisionCircleArrays[es]=new an);for(var Ca=0;Ca<hr.circles.length;Ca+=4)ga.circles.push(hr.circles[Ca+0]),ga.circles.push(hr.circles[Ca+1]),ga.circles.push(hr.circles[Ca+2]),ga.circles.push(hr.collisionDetected?1:0)}X.placements[Vn.crossTileID]=new $t(ar||Lt,fr||tn,mr||Ae.justReloaded),U[Vn.crossTileID]=!0}};if(Ft)for(var Ht=Ae.getSortedSymbolIndexes(this.transform.angle),dn=Ht.length-1;dn>=0;--dn){var vn=Ht[dn];Zt(Ae.symbolInstances.get(vn),Ae.collisionArrays[vn])}else for(var zn=R.symbolInstanceStart;zn<R.symbolInstanceEnd;zn++)Zt(Ae.symbolInstances.get(zn),Ae.collisionArrays[zn]);if(j&&Ae.bucketInstanceId in this.collisionCircleArrays){var Rn=this.collisionCircleArrays[Ae.bucketInstanceId];l.invert(Rn.invProjMatrix,$),Rn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ae.justReloaded=!1},In.prototype.markUsedJustification=function(R,U,j,X){var fe,Ae={left:j.leftJustifiedTextSymbolIndex,center:j.centerJustifiedTextSymbolIndex,right:j.rightJustifiedTextSymbolIndex};fe=X===l.WritingMode.vertical?j.verticalPlacedTextSymbolIndex:Ae[l.getAnchorJustification(U)];for(var F=0,$=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex,j.verticalPlacedTextSymbolIndex];F<$.length;F+=1){var ie=$[F];ie>=0&&(R.text.placedSymbolArray.get(ie).crossTileID=fe>=0&&ie!==fe?0:j.crossTileID)}},In.prototype.markUsedOrientation=function(R,U,j){for(var X=U===l.WritingMode.horizontal||U===l.WritingMode.horizontalOnly?U:0,fe=U===l.WritingMode.vertical?U:0,Ae=0,F=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex];Ae<F.length;Ae+=1){var $=F[Ae];R.text.placedSymbolArray.get($).placedOrientation=X}j.verticalPlacedTextSymbolIndex&&(R.text.placedSymbolArray.get(j.verticalPlacedTextSymbolIndex).placedOrientation=fe)},In.prototype.commit=function(R){this.commitTime=R,this.zoomAtLastRecencyCheck=this.transform.zoom;var U=this.prevPlacement,j=!1;this.prevZoomAdjustment=U?U.zoomAdjustment(this.transform.zoom):0;var X=U?U.symbolFadeChange(R):1,fe=U?U.opacities:{},Ae=U?U.variableOffsets:{},F=U?U.placedOrientations:{};for(var $ in this.placements){var ie=this.placements[$],de=fe[$];de?(this.opacities[$]=new Rt(de,X,ie.text,ie.icon),j=j||ie.text!==de.text.placed||ie.icon!==de.icon.placed):(this.opacities[$]=new Rt(null,X,ie.text,ie.icon,ie.skipFade),j=j||ie.text||ie.icon)}for(var xe in fe){var Le=fe[xe];if(!this.opacities[xe]){var Ne=new Rt(Le,X,!1,!1);Ne.isHidden()||(this.opacities[xe]=Ne,j=j||Le.text.placed||Le.icon.placed)}}for(var Ue in Ae)this.variableOffsets[Ue]||!this.opacities[Ue]||this.opacities[Ue].isHidden()||(this.variableOffsets[Ue]=Ae[Ue]);for(var qe in F)this.placedOrientations[qe]||!this.opacities[qe]||this.opacities[qe].isHidden()||(this.placedOrientations[qe]=F[qe]);j?this.lastPlacementChangeTime=R:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=U?U.lastPlacementChangeTime:R)},In.prototype.updateLayerOpacities=function(R,U){for(var j={},X=0,fe=U;X<fe.length;X+=1){var Ae=fe[X],F=Ae.getBucket(R);F&&Ae.latestFeatureIndex&&R.id===F.layerIds[0]&&this.updateBucketOpacities(F,j,Ae.collisionBoxArray)}},In.prototype.updateBucketOpacities=function(R,U,j){var X=this;R.hasTextData()&&R.text.opacityVertexArray.clear(),R.hasIconData()&&R.icon.opacityVertexArray.clear(),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexArray.clear(),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexArray.clear();var fe=R.layers[0].layout,Ae=new Rt(null,0,!1,!1,!0),F=fe.get("text-allow-overlap"),$=fe.get("icon-allow-overlap"),ie=fe.get("text-variable-anchor"),de=fe.get("text-rotation-alignment")==="map",xe=fe.get("text-pitch-alignment")==="map",Le=fe.get("icon-text-fit")!=="none",Ne=new Rt(null,0,F&&($||!R.hasIconData()||fe.get("icon-optional")),$&&(F||!R.hasTextData()||fe.get("text-optional")),!0);!R.collisionArrays&&j&&(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData())&&R.deserializeCollisionBoxes(j);for(var Ue=function(lt,pt,Et){for(var Ct=0;Ct<pt/4;Ct++)lt.opacityVertexArray.emplaceBack(Et)},qe=function(lt){var pt=R.symbolInstances.get(lt),Et=pt.numHorizontalGlyphVertices,Ct=pt.numVerticalGlyphVertices,St=pt.crossTileID,Ft=U[St],Lt=X.opacities[St];Ft?Lt=Ae:Lt||(Lt=Ne,X.opacities[St]=Lt),U[St]=!0;var tn=Et>0||Ct>0,Zt=pt.numIconVertices>0,Ht=X.placedOrientations[pt.crossTileID],dn=Ht===l.WritingMode.vertical,vn=Ht===l.WritingMode.horizontal||Ht===l.WritingMode.horizontalOnly;if(tn){var zn=An(Lt.text),Rn=dn?ln:zn;Ue(R.text,Et,Rn);var Vn=vn?ln:zn;Ue(R.text,Ct,Vn);var Xn=Lt.text.isHidden();[pt.rightJustifiedTextSymbolIndex,pt.centerJustifiedTextSymbolIndex,pt.leftJustifiedTextSymbolIndex].forEach(function(Br){Br>=0&&(R.text.placedSymbolArray.get(Br).hidden=Xn||dn?1:0)}),pt.verticalPlacedTextSymbolIndex>=0&&(R.text.placedSymbolArray.get(pt.verticalPlacedTextSymbolIndex).hidden=Xn||vn?1:0);var or=X.variableOffsets[pt.crossTileID];or&&X.markUsedJustification(R,or.anchor,pt,Ht);var ar=X.placedOrientations[pt.crossTileID];ar&&(X.markUsedJustification(R,"left",pt,ar),X.markUsedOrientation(R,ar,pt))}if(Zt){var fr=An(Lt.icon),mr=!(Le&&pt.verticalPlacedIconSymbolIndex&&dn);if(pt.placedIconSymbolIndex>=0){var Lr=mr?fr:ln;Ue(R.icon,pt.numIconVertices,Lr),R.icon.placedSymbolArray.get(pt.placedIconSymbolIndex).hidden=Lt.icon.isHidden()}if(pt.verticalPlacedIconSymbolIndex>=0){var Nn=mr?ln:fr;Ue(R.icon,pt.numVerticalIconVertices,Nn),R.icon.placedSymbolArray.get(pt.verticalPlacedIconSymbolIndex).hidden=Lt.icon.isHidden()}}if(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData()){var ir=R.collisionArrays[lt];if(ir){var hr=new l.Point(0,0);if(ir.textBox||ir.verticalTextBox){var yr=!0;if(ie){var Mr=X.variableOffsets[St];Mr?(hr=Bn(Mr.anchor,Mr.width,Mr.height,Mr.textOffset,Mr.textBoxScale),de&&hr._rotate(xe?X.transform.angle:-X.transform.angle)):yr=!1}ir.textBox&&Wn(R.textCollisionBox.collisionVertexArray,Lt.text.placed,!yr||dn,hr.x,hr.y),ir.verticalTextBox&&Wn(R.textCollisionBox.collisionVertexArray,Lt.text.placed,!yr||vn,hr.x,hr.y)}var Ir=!!(!vn&&ir.verticalIconBox);ir.iconBox&&Wn(R.iconCollisionBox.collisionVertexArray,Lt.icon.placed,Ir,Le?hr.x:0,Le?hr.y:0),ir.verticalIconBox&&Wn(R.iconCollisionBox.collisionVertexArray,Lt.icon.placed,!Ir,Le?hr.x:0,Le?hr.y:0)}}},Ye=0;Ye<R.symbolInstances.length;Ye++)qe(Ye);if(R.sortFeatures(this.transform.angle),this.retainedQueryData[R.bucketInstanceId]&&(this.retainedQueryData[R.bucketInstanceId].featureSortOrder=R.featureSortOrder),R.hasTextData()&&R.text.opacityVertexBuffer&&R.text.opacityVertexBuffer.updateData(R.text.opacityVertexArray),R.hasIconData()&&R.icon.opacityVertexBuffer&&R.icon.opacityVertexBuffer.updateData(R.icon.opacityVertexArray),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexBuffer&&R.iconCollisionBox.collisionVertexBuffer.updateData(R.iconCollisionBox.collisionVertexArray),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexBuffer&&R.textCollisionBox.collisionVertexBuffer.updateData(R.textCollisionBox.collisionVertexArray),R.bucketInstanceId in this.collisionCircleArrays){var $e=this.collisionCircleArrays[R.bucketInstanceId];R.placementInvProjMatrix=$e.invProjMatrix,R.placementViewportMatrix=$e.viewportMatrix,R.collisionCircleArray=$e.circles,delete this.collisionCircleArrays[R.bucketInstanceId]}},In.prototype.symbolFadeChange=function(R){return this.fadeDuration===0?1:(R-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},In.prototype.zoomAdjustment=function(R){return Math.max(0,(this.transform.zoom-R)/1.5)},In.prototype.hasTransitions=function(R){return this.stale||R-this.lastPlacementChangeTime<this.fadeDuration},In.prototype.stillRecent=function(R,U){var j=this.zoomAtLastRecencyCheck===U?1-this.zoomAdjustment(U):1;return this.zoomAtLastRecencyCheck=U,this.commitTime+this.fadeDuration*j>R},In.prototype.setStale=function(){this.stale=!0};var Vt=Math.pow(2,25),_n=Math.pow(2,24),At=Math.pow(2,17),Gt=Math.pow(2,16),Jt=Math.pow(2,9),mn=Math.pow(2,8),xn=Math.pow(2,1);function An(R){if(R.opacity===0&&!R.placed)return 0;if(R.opacity===1&&R.placed)return 4294967295;var U=R.placed?1:0,j=Math.floor(127*R.opacity);return j*Vt+U*_n+j*At+U*Gt+j*Jt+U*mn+j*xn+U}var ln=0,Yt=function(R){this._sortAcrossTiles=R.layout.get("symbol-z-order")!=="viewport-y"&&R.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yt.prototype.continuePlacement=function(R,U,j,X,fe){for(var Ae=this._bucketParts;this._currentTileIndex<R.length;){var F=R[this._currentTileIndex];if(U.getBucketParts(Ae,X,F,this._sortAcrossTiles),this._currentTileIndex++,fe())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ae.sort(function(ie,de){return ie.sortKey-de.sortKey}));this._currentPartIndex<Ae.length;){var $=Ae[this._currentPartIndex];if(U.placeLayerBucketPart($,this._seenCrossTileIDs,j),this._currentPartIndex++,fe())return!0}return!1};var Wt=function(R,U,j,X,fe,Ae,F){this.placement=new In(R,fe,Ae,F),this._currentPlacementIndex=U.length-1,this._forceFullPlacement=j,this._showCollisionBoxes=X,this._done=!1};Wt.prototype.isDone=function(){return this._done},Wt.prototype.continuePlacement=function(R,U,j){for(var X=this,fe=l.browser.now(),Ae=function(){var ie=l.browser.now()-fe;return!X._forceFullPlacement&&ie>2};this._currentPlacementIndex>=0;){var F=U[R[this._currentPlacementIndex]],$=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=$)&&(!F.maxzoom||F.maxzoom>$)){if(this._inProgressLayer||(this._inProgressLayer=new Yt(F)),this._inProgressLayer.continuePlacement(j[F.source],this.placement,this._showCollisionBoxes,F,Ae))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Wt.prototype.commit=function(R){return this.placement.commit(R),this.placement};var on=512/l.EXTENT/2,un=function(R,U,j){this.tileID=R,this.indexedSymbolInstances={},this.bucketInstanceId=j;for(var X=0;X<U.length;X++){var fe=U.get(X),Ae=fe.key;this.indexedSymbolInstances[Ae]||(this.indexedSymbolInstances[Ae]=[]),this.indexedSymbolInstances[Ae].push({crossTileID:fe.crossTileID,coord:this.getScaledCoordinates(fe,R)})}};un.prototype.getScaledCoordinates=function(R,U){var j=U.canonical.z-this.tileID.canonical.z,X=on/Math.pow(2,j);return{x:Math.floor((U.canonical.x*l.EXTENT+R.anchorX)*X),y:Math.floor((U.canonical.y*l.EXTENT+R.anchorY)*X)}},un.prototype.findMatches=function(R,U,j){for(var X=this.tileID.canonical.z<U.canonical.z?1:Math.pow(2,this.tileID.canonical.z-U.canonical.z),fe=0;fe<R.length;fe++){var Ae=R.get(fe);if(!Ae.crossTileID){var F=this.indexedSymbolInstances[Ae.key];if(F)for(var $=this.getScaledCoordinates(Ae,U),ie=0,de=F;ie<de.length;ie+=1){var xe=de[ie];if(Math.abs(xe.coord.x-$.x)<=X&&Math.abs(xe.coord.y-$.y)<=X&&!j[xe.crossTileID]){j[xe.crossTileID]=!0,Ae.crossTileID=xe.crossTileID;break}}}}};var En=function(){this.maxCrossTileID=0};En.prototype.generate=function(){return++this.maxCrossTileID};var Pn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Pn.prototype.handleWrapJump=function(R){var U=Math.round((R-this.lng)/360);if(U!==0)for(var j in this.indexes){var X=this.indexes[j],fe={};for(var Ae in X){var F=X[Ae];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+U),fe[F.tileID.key]=F}this.indexes[j]=fe}this.lng=R},Pn.prototype.addBucket=function(R,U,j){if(this.indexes[R.overscaledZ]&&this.indexes[R.overscaledZ][R.key]){if(this.indexes[R.overscaledZ][R.key].bucketInstanceId===U.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(R.overscaledZ,this.indexes[R.overscaledZ][R.key])}for(var X=0;X<U.symbolInstances.length;X++)U.symbolInstances.get(X).crossTileID=0;this.usedCrossTileIDs[R.overscaledZ]||(this.usedCrossTileIDs[R.overscaledZ]={});var fe=this.usedCrossTileIDs[R.overscaledZ];for(var Ae in this.indexes){var F=this.indexes[Ae];if(Number(Ae)>R.overscaledZ)for(var $ in F){var ie=F[$];ie.tileID.isChildOf(R)&&ie.findMatches(U.symbolInstances,R,fe)}else{var de=F[R.scaledTo(Number(Ae)).key];de&&de.findMatches(U.symbolInstances,R,fe)}}for(var xe=0;xe<U.symbolInstances.length;xe++){var Le=U.symbolInstances.get(xe);Le.crossTileID||(Le.crossTileID=j.generate(),fe[Le.crossTileID]=!0)}return this.indexes[R.overscaledZ]===void 0&&(this.indexes[R.overscaledZ]={}),this.indexes[R.overscaledZ][R.key]=new un(R,U.symbolInstances,U.bucketInstanceId),!0},Pn.prototype.removeBucketCrossTileIDs=function(R,U){for(var j in U.indexedSymbolInstances)for(var X=0,fe=U.indexedSymbolInstances[j];X<fe.length;X+=1){var Ae=fe[X];delete this.usedCrossTileIDs[R][Ae.crossTileID]}},Pn.prototype.removeStaleBuckets=function(R){var U=!1;for(var j in this.indexes){var X=this.indexes[j];for(var fe in X)R[X[fe].bucketInstanceId]||(this.removeBucketCrossTileIDs(j,X[fe]),delete X[fe],U=!0)}return U};var Un=function(){this.layerIndexes={},this.crossTileIDs=new En,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Un.prototype.addLayer=function(R,U,j){var X=this.layerIndexes[R.id];X===void 0&&(X=this.layerIndexes[R.id]=new Pn);var fe=!1,Ae={};X.handleWrapJump(j);for(var F=0,$=U;F<$.length;F+=1){var ie=$[F],de=ie.getBucket(R);de&&R.id===de.layerIds[0]&&(de.bucketInstanceId||(de.bucketInstanceId=++this.maxBucketInstanceId),X.addBucket(ie.tileID,de,this.crossTileIDs)&&(fe=!0),Ae[de.bucketInstanceId]=!0)}return X.removeStaleBuckets(Ae)&&(fe=!0),fe},Un.prototype.pruneUnusedLayers=function(R){var U={};for(var j in R.forEach(function(X){U[X]=!0}),this.layerIndexes)U[j]||delete this.layerIndexes[j]};var Fn=function(R,U){return l.emitValidationErrors(R,U&&U.filter(function(j){return j.identifier!=="source.canvas"}))},Kn=l.pick(ct,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),qn=l.pick(ct,["setCenter","setZoom","setBearing","setPitch"]),rr=function(){var R={},U=l.styleSpec.$version;for(var j in l.styleSpec.$root){var X=l.styleSpec.$root[j];if(X.required){var fe;(fe=j==="version"?U:X.type==="array"?[]:{})!=null&&(R[j]=fe)}}return R}(),er=function(R){function U(j,X){var fe=this;X===void 0&&(X={}),R.call(this),this.map=j,this.dispatcher=new L(gt(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new m(j._requestManager,X.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Un,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var Ae=this;this._rtlTextPluginCallback=U.registerForPluginStateChange(function(F){var $={pluginStatus:F.pluginStatus,pluginURL:F.pluginURL};Ae.dispatcher.broadcast("syncRTLPluginState",$,function(ie,de){if(l.triggerPluginCompletionEvent(ie),de&&de.every(function(Le){return Le}))for(var xe in Ae.sourceCaches)Ae.sourceCaches[xe].reload()})}),this.on("data",function(F){if(F.dataType==="source"&&F.sourceDataType==="metadata"){var $=fe.sourceCaches[F.sourceId];if($){var ie=$.getSource();if(ie&&ie.vectorLayerIds)for(var de in fe._layers){var xe=fe._layers[de];xe.source===ie.id&&fe._validateLayer(xe)}}}})}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.loadURL=function(j,X){var fe=this;X===void 0&&(X={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var Ae=typeof X.validate=="boolean"?X.validate:!l.isMapboxURL(j);j=this.map._requestManager.normalizeStyleURL(j,X.accessToken);var F=this.map._requestManager.transformRequest(j,l.ResourceType.Style);this._request=l.getJSON(F,function($,ie){fe._request=null,$?fe.fire(new l.ErrorEvent($)):ie&&fe._load(ie,Ae)})},U.prototype.loadJSON=function(j,X){var fe=this;X===void 0&&(X={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){fe._request=null,fe._load(j,X.validate!==!1)})},U.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(rr,!1)},U.prototype._load=function(j,X){if(!X||!Fn(this,l.validateStyle(j))){for(var fe in this._loaded=!0,this.stylesheet=j,j.sources)this.addSource(fe,j.sources[fe],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs);var Ae=wt(this.stylesheet.layers);this._order=Ae.map(function(de){return de.id}),this._layers={},this._serializedLayers={};for(var F=0,$=Ae;F<$.length;F+=1){var ie=$[F];(ie=l.createStyleLayer(ie)).setEventedParent(this,{layer:{id:ie.id}}),this._layers[ie.id]=ie,this._serializedLayers[ie.id]=ie.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},U.prototype._loadSprite=function(j){var X=this;this._spriteRequest=function(fe,Ae,F){var $,ie,de,xe=l.browser.devicePixelRatio>1?"@2x":"",Le=l.getJSON(Ae.transformRequest(Ae.normalizeSpriteURL(fe,xe,".json"),l.ResourceType.SpriteJSON),function(qe,Ye){Le=null,de||(de=qe,$=Ye,Ue())}),Ne=l.getImage(Ae.transformRequest(Ae.normalizeSpriteURL(fe,xe,".png"),l.ResourceType.SpriteImage),function(qe,Ye){Ne=null,de||(de=qe,ie=Ye,Ue())});function Ue(){if(de)F(de);else if($&&ie){var qe=l.browser.getImageData(ie),Ye={};for(var $e in $){var lt=$[$e],pt=lt.width,Et=lt.height,Ct=lt.x,St=lt.y,Ft=lt.sdf,Lt=lt.pixelRatio,tn=lt.stretchX,Zt=lt.stretchY,Ht=lt.content,dn=new l.RGBAImage({width:pt,height:Et});l.RGBAImage.copy(qe,dn,{x:Ct,y:St},{x:0,y:0},{width:pt,height:Et}),Ye[$e]={data:dn,pixelRatio:Lt,sdf:Ft,stretchX:tn,stretchY:Zt,content:Ht}}F(null,Ye)}}return{cancel:function(){Le&&(Le.cancel(),Le=null),Ne&&(Ne.cancel(),Ne=null)}}}(j,this.map._requestManager,function(fe,Ae){if(X._spriteRequest=null,fe)X.fire(new l.ErrorEvent(fe));else if(Ae)for(var F in Ae)X.imageManager.addImage(F,Ae[F]);X.imageManager.setLoaded(!0),X._availableImages=X.imageManager.listImages(),X.dispatcher.broadcast("setImages",X._availableImages),X.fire(new l.Event("data",{dataType:"style"}))})},U.prototype._validateLayer=function(j){var X=this.sourceCaches[j.source];if(X){var fe=j.sourceLayer;if(fe){var Ae=X.getSource();(Ae.type==="geojson"||Ae.vectorLayerIds&&Ae.vectorLayerIds.indexOf(fe)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+fe+'" does not exist on source "'+Ae.id+'" as specified by style layer "'+j.id+'"')))}}},U.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var j in this.sourceCaches)if(!this.sourceCaches[j].loaded())return!1;return!!this.imageManager.isLoaded()},U.prototype._serializeLayers=function(j){for(var X=[],fe=0,Ae=j;fe<Ae.length;fe+=1){var F=Ae[fe],$=this._layers[F];$.type!=="custom"&&X.push($.serialize())}return X},U.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var j in this.sourceCaches)if(this.sourceCaches[j].hasTransition())return!0;for(var X in this._layers)if(this._layers[X].hasTransition())return!0;return!1},U.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},U.prototype.update=function(j){if(this._loaded){var X=this._changed;if(this._changed){var fe=Object.keys(this._updatedLayers),Ae=Object.keys(this._removedLayers);for(var F in(fe.length||Ae.length)&&this._updateWorkerLayers(fe,Ae),this._updatedSources){var $=this._updatedSources[F];$==="reload"?this._reloadSource(F):$==="clear"&&this._clearSource(F)}for(var ie in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ie].updateTransitions(j);this.light.updateTransitions(j),this._resetUpdates()}for(var de in this.sourceCaches)this.sourceCaches[de].used=!1;for(var xe=0,Le=this._order;xe<Le.length;xe+=1){var Ne=Le[xe],Ue=this._layers[Ne];Ue.recalculate(j,this._availableImages),!Ue.isHidden(j.zoom)&&Ue.source&&(this.sourceCaches[Ue.source].used=!0)}this.light.recalculate(j),this.z=j.zoom,X&&this.fire(new l.Event("data",{dataType:"style"}))}},U.prototype._updateTilesForChangedImages=function(){var j=Object.keys(this._changedImages);if(j.length){for(var X in this.sourceCaches)this.sourceCaches[X].reloadTilesForDependencies(["icons","patterns"],j);this._changedImages={}}},U.prototype._updateWorkerLayers=function(j,X){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(j),removedIds:X})},U.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},U.prototype.setState=function(j){var X=this;if(this._checkLoaded(),Fn(this,l.validateStyle(j)))return!1;(j=l.clone$1(j)).layers=wt(j.layers);var fe=Ut(this.serialize(),j).filter(function(F){return!(F.command in qn)});if(fe.length===0)return!1;var Ae=fe.filter(function(F){return!(F.command in Kn)});if(Ae.length>0)throw new Error("Unimplemented: "+Ae.map(function(F){return F.command}).join(", ")+".");return fe.forEach(function(F){F.command!=="setTransition"&&X[F.command].apply(X,F.args)}),this.stylesheet=j,!0},U.prototype.addImage=function(j,X){if(this.getImage(j))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(j,X),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},U.prototype.updateImage=function(j,X){this.imageManager.updateImage(j,X)},U.prototype.getImage=function(j){return this.imageManager.getImage(j)},U.prototype.removeImage=function(j){if(!this.getImage(j))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(j),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},U.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},U.prototype.addSource=function(j,X,fe){var Ae=this;if(fe===void 0&&(fe={}),this._checkLoaded(),this.sourceCaches[j]!==void 0)throw new Error("There is already a source with this ID");if(!X.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(X).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(X.type)>=0&&this._validate(l.validateStyle.source,"sources."+j,X,null,fe))){this.map&&this.map._collectResourceTiming&&(X.collectResourceTiming=!0);var F=this.sourceCaches[j]=new at(j,X,this.dispatcher);F.style=this,F.setEventedParent(this,function(){return{isSourceLoaded:Ae.loaded(),source:F.serialize(),sourceId:j}}),F.onAdd(this.map),this._changed=!0}},U.prototype.removeSource=function(j){if(this._checkLoaded(),this.sourceCaches[j]===void 0)throw new Error("There is no source with this ID");for(var X in this._layers)if(this._layers[X].source===j)return this.fire(new l.ErrorEvent(new Error('Source "'+j+'" cannot be removed while layer "'+X+'" is using it.')));var fe=this.sourceCaches[j];delete this.sourceCaches[j],delete this._updatedSources[j],fe.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:j})),fe.setEventedParent(null),fe.clearTiles(),fe.onRemove&&fe.onRemove(this.map),this._changed=!0},U.prototype.setGeoJSONSourceData=function(j,X){this._checkLoaded(),this.sourceCaches[j].getSource().setData(X),this._changed=!0},U.prototype.getSource=function(j){return this.sourceCaches[j]&&this.sourceCaches[j].getSource()},U.prototype.addLayer=function(j,X,fe){fe===void 0&&(fe={}),this._checkLoaded();var Ae=j.id;if(this.getLayer(Ae))this.fire(new l.ErrorEvent(new Error('Layer with id "'+Ae+'" already exists on this map')));else{var F;if(j.type==="custom"){if(Fn(this,l.validateCustomStyleLayer(j)))return;F=l.createStyleLayer(j)}else{if(typeof j.source=="object"&&(this.addSource(Ae,j.source),j=l.clone$1(j),j=l.extend(j,{source:Ae})),this._validate(l.validateStyle.layer,"layers."+Ae,j,{arrayIndex:-1},fe))return;F=l.createStyleLayer(j),this._validateLayer(F),F.setEventedParent(this,{layer:{id:Ae}}),this._serializedLayers[F.id]=F.serialize()}var $=X?this._order.indexOf(X):this._order.length;if(X&&$===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.')));else{if(this._order.splice($,0,Ae),this._layerOrderChanged=!0,this._layers[Ae]=F,this._removedLayers[Ae]&&F.source&&F.type!=="custom"){var ie=this._removedLayers[Ae];delete this._removedLayers[Ae],ie.type!==F.type?this._updatedSources[F.source]="clear":(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause())}this._updateLayer(F),F.onAdd&&F.onAdd(this.map)}}},U.prototype.moveLayer=function(j,X){if(this._checkLoaded(),this._changed=!0,this._layers[j]){if(j!==X){var fe=this._order.indexOf(j);this._order.splice(fe,1);var Ae=X?this._order.indexOf(X):this._order.length;X&&Ae===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.'))):(this._order.splice(Ae,0,j),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be moved.")))},U.prototype.removeLayer=function(j){this._checkLoaded();var X=this._layers[j];if(X){X.setEventedParent(null);var fe=this._order.indexOf(j);this._order.splice(fe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[j]=X,delete this._layers[j],delete this._serializedLayers[j],delete this._updatedLayers[j],delete this._updatedPaintProps[j],X.onRemove&&X.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be removed.")))},U.prototype.getLayer=function(j){return this._layers[j]},U.prototype.hasLayer=function(j){return j in this._layers},U.prototype.setLayerZoomRange=function(j,X,fe){this._checkLoaded();var Ae=this.getLayer(j);Ae?Ae.minzoom===X&&Ae.maxzoom===fe||(X!=null&&(Ae.minzoom=X),fe!=null&&(Ae.maxzoom=fe),this._updateLayer(Ae)):this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot have zoom extent.")))},U.prototype.setFilter=function(j,X,fe){fe===void 0&&(fe={}),this._checkLoaded();var Ae=this.getLayer(j);if(Ae){if(!l.deepEqual(Ae.filter,X))return X==null?(Ae.filter=void 0,void this._updateLayer(Ae)):void(this._validate(l.validateStyle.filter,"layers."+Ae.id+".filter",X,null,fe)||(Ae.filter=l.clone$1(X),this._updateLayer(Ae)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be filtered.")))},U.prototype.getFilter=function(j){return l.clone$1(this.getLayer(j).filter)},U.prototype.setLayoutProperty=function(j,X,fe,Ae){Ae===void 0&&(Ae={}),this._checkLoaded();var F=this.getLayer(j);F?l.deepEqual(F.getLayoutProperty(X),fe)||(F.setLayoutProperty(X,fe,Ae),this._updateLayer(F)):this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")))},U.prototype.getLayoutProperty=function(j,X){var fe=this.getLayer(j);if(fe)return fe.getLayoutProperty(X);this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style.")))},U.prototype.setPaintProperty=function(j,X,fe,Ae){Ae===void 0&&(Ae={}),this._checkLoaded();var F=this.getLayer(j);F?l.deepEqual(F.getPaintProperty(X),fe)||(F.setPaintProperty(X,fe,Ae)&&this._updateLayer(F),this._changed=!0,this._updatedPaintProps[j]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")))},U.prototype.getPaintProperty=function(j,X){return this.getLayer(j).getPaintProperty(X)},U.prototype.setFeatureState=function(j,X){this._checkLoaded();var fe=j.source,Ae=j.sourceLayer,F=this.sourceCaches[fe];if(F!==void 0){var $=F.getSource().type;$==="geojson"&&Ae?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):$!=="vector"||Ae?(j.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),F.setFeatureState(Ae,j.id,X)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},U.prototype.removeFeatureState=function(j,X){this._checkLoaded();var fe=j.source,Ae=this.sourceCaches[fe];if(Ae!==void 0){var F=Ae.getSource().type,$=F==="vector"?j.sourceLayer:void 0;F!=="vector"||$?X&&typeof j.id!="string"&&typeof j.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Ae.removeFeatureState($,j.id,X):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},U.prototype.getFeatureState=function(j){this._checkLoaded();var X=j.source,fe=j.sourceLayer,Ae=this.sourceCaches[X];if(Ae!==void 0){if(Ae.getSource().type!=="vector"||fe)return j.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Ae.getFeatureState(fe,j.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+X+"' does not exist in the map's style.")))},U.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},U.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(j){return j.serialize()}),layers:this._serializeLayers(this._order)},function(j){return j!==void 0})},U.prototype._updateLayer=function(j){this._updatedLayers[j.id]=!0,j.source&&!this._updatedSources[j.source]&&this.sourceCaches[j.source].getSource().type!=="raster"&&(this._updatedSources[j.source]="reload",this.sourceCaches[j.source].pause()),this._changed=!0},U.prototype._flattenAndSortRenderedFeatures=function(j){for(var X=this,fe=function(Ht){return X._layers[Ht].type==="fill-extrusion"},Ae={},F=[],$=this._order.length-1;$>=0;$--){var ie=this._order[$];if(fe(ie)){Ae[ie]=$;for(var de=0,xe=j;de<xe.length;de+=1){var Le=xe[de][ie];if(Le)for(var Ne=0,Ue=Le;Ne<Ue.length;Ne+=1){var qe=Ue[Ne];F.push(qe)}}}}F.sort(function(Ht,dn){return dn.intersectionZ-Ht.intersectionZ});for(var Ye=[],$e=this._order.length-1;$e>=0;$e--){var lt=this._order[$e];if(fe(lt))for(var pt=F.length-1;pt>=0;pt--){var Et=F[pt].feature;if(Ae[Et.layer.id]<$e)break;Ye.push(Et),F.pop()}else for(var Ct=0,St=j;Ct<St.length;Ct+=1){var Ft=St[Ct][lt];if(Ft)for(var Lt=0,tn=Ft;Lt<tn.length;Lt+=1){var Zt=tn[Lt];Ye.push(Zt.feature)}}}return Ye},U.prototype.queryRenderedFeatures=function(j,X,fe){X&&X.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",X.filter,null,X);var Ae={};if(X&&X.layers){if(!Array.isArray(X.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var F=0,$=X.layers;F<$.length;F+=1){var ie=$[F],de=this._layers[ie];if(!de)return this.fire(new l.ErrorEvent(new Error("The layer '"+ie+"' does not exist in the map's style and cannot be queried for features."))),[];Ae[de.source]=!0}}var xe=[];for(var Le in X.availableImages=this._availableImages,this.sourceCaches)X.layers&&!Ae[Le]||xe.push(J(this.sourceCaches[Le],this._layers,this._serializedLayers,j,X,fe));return this.placement&&xe.push(function(Ne,Ue,qe,Ye,$e,lt,pt){for(var Et={},Ct=lt.queryRenderedSymbols(Ye),St=[],Ft=0,Lt=Object.keys(Ct).map(Number);Ft<Lt.length;Ft+=1){var tn=Lt[Ft];St.push(pt[tn])}St.sort(Y);for(var Zt=function(){var Rn=dn[Ht],Vn=Rn.featureIndex.lookupSymbolFeatures(Ct[Rn.bucketInstanceId],Ue,Rn.bucketIndex,Rn.sourceLayerIndex,$e.filter,$e.layers,$e.availableImages,Ne);for(var Xn in Vn){var or=Et[Xn]=Et[Xn]||[],ar=Vn[Xn];ar.sort(function(Nn,ir){var hr=Rn.featureSortOrder;if(hr){var yr=hr.indexOf(Nn.featureIndex);return hr.indexOf(ir.featureIndex)-yr}return ir.featureIndex-Nn.featureIndex});for(var fr=0,mr=ar;fr<mr.length;fr+=1){var Lr=mr[fr];or.push(Lr)}}},Ht=0,dn=St;Ht<dn.length;Ht+=1)Zt();var vn=function(Rn){Et[Rn].forEach(function(Vn){var Xn=Vn.feature,or=Ne[Rn],ar=qe[or.source].getFeatureState(Xn.layer["source-layer"],Xn.id);Xn.source=Xn.layer.source,Xn.layer["source-layer"]&&(Xn.sourceLayer=Xn.layer["source-layer"]),Xn.state=ar})};for(var zn in Et)vn(zn);return Et}(this._layers,this._serializedLayers,this.sourceCaches,j,X,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(xe)},U.prototype.querySourceFeatures=function(j,X){X&&X.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",X.filter,null,X);var fe=this.sourceCaches[j];return fe?function(Ae,F){for(var $=Ae.getRenderableIds().map(function(Ue){return Ae.getTileByID(Ue)}),ie=[],de={},xe=0;xe<$.length;xe++){var Le=$[xe],Ne=Le.tileID.canonical.key;de[Ne]||(de[Ne]=!0,Le.querySourceFeatures(ie,F))}return ie}(fe,X):[]},U.prototype.addSourceType=function(j,X,fe){return U.getSourceType(j)?fe(new Error('A source type called "'+j+'" already exists.')):(U.setSourceType(j,X),X.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:j,url:X.workerSourceURL},fe):fe(null,null))},U.prototype.getLight=function(){return this.light.getLight()},U.prototype.setLight=function(j,X){X===void 0&&(X={}),this._checkLoaded();var fe=this.light.getLight(),Ae=!1;for(var F in j)if(!l.deepEqual(j[F],fe[F])){Ae=!0;break}if(Ae){var $={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(j,X),this.light.updateTransitions($)}},U.prototype._validate=function(j,X,fe,Ae,F){return F===void 0&&(F={}),(!F||F.validate!==!1)&&Fn(this,j.call(l.validateStyle,l.extend({key:X,style:this.serialize(),value:fe,styleSpec:l.styleSpec},Ae)))},U.prototype._remove=function(){for(var j in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[j].setEventedParent(null);for(var X in this.sourceCaches)this.sourceCaches[X].clearTiles(),this.sourceCaches[X].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},U.prototype._clearSource=function(j){this.sourceCaches[j].clearTiles()},U.prototype._reloadSource=function(j){this.sourceCaches[j].resume(),this.sourceCaches[j].reload()},U.prototype._updateSources=function(j){for(var X in this.sourceCaches)this.sourceCaches[X].update(j)},U.prototype._generateCollisionBoxes=function(){for(var j in this.sourceCaches)this._reloadSource(j)},U.prototype._updatePlacement=function(j,X,fe,Ae,F){F===void 0&&(F=!1);for(var $=!1,ie=!1,de={},xe=0,Le=this._order;xe<Le.length;xe+=1){var Ne=Le[xe],Ue=this._layers[Ne];if(Ue.type==="symbol"){if(!de[Ue.source]){var qe=this.sourceCaches[Ue.source];de[Ue.source]=qe.getRenderableIds(!0).map(function(Ct){return qe.getTileByID(Ct)}).sort(function(Ct,St){return St.tileID.overscaledZ-Ct.tileID.overscaledZ||(Ct.tileID.isLessThan(St.tileID)?-1:1)})}var Ye=this.crossTileSymbolIndex.addLayer(Ue,de[Ue.source],j.center.lng);$=$||Ye}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((F=F||this._layerOrderChanged||fe===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),j.zoom))&&(this.pauseablePlacement=new Wt(j,this._order,F,X,fe,Ae,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,de),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),ie=!0),$&&this.pauseablePlacement.placement.setStale()),ie||$)for(var $e=0,lt=this._order;$e<lt.length;$e+=1){var pt=lt[$e],Et=this._layers[pt];Et.type==="symbol"&&this.placement.updateLayerOpacities(Et,de[Et.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},U.prototype._releaseSymbolFadeTiles=function(){for(var j in this.sourceCaches)this.sourceCaches[j].releaseSymbolFadeTiles()},U.prototype.getImages=function(j,X,fe){this.imageManager.getImages(X.icons,fe),this._updateTilesForChangedImages();var Ae=this.sourceCaches[X.source];Ae&&Ae.setDependencies(X.tileID.key,X.type,X.icons)},U.prototype.getGlyphs=function(j,X,fe){this.glyphManager.getGlyphs(X.stacks,fe)},U.prototype.getResource=function(j,X,fe){return l.makeRequest(X,fe)},U}(l.Evented);er.getSourceType=function(R){return te[R]},er.setSourceType=function(R,U){te[R]=U},er.registerForPluginStateChange=l.registerForPluginStateChange;var tr=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ur=Vr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),cr=Vr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),br=Vr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Yn=Vr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),dr=Vr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Sr=Vr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Gr=Vr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ai=Vr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ni=Vr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ci=Vr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Kr=Vr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),bi=Vr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),qa=Vr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ha=Vr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),to=Vr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Hs=Vr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Fo=Vr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ps=Vr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),qs=Vr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ga=Vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),rl=Vr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Bo=Vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),No=Vr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Za=Vr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Si=Vr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ds=Vr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Vr(R,U){var j=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,X={};return{fragmentSource:R=R.replace(j,function(fe,Ae,F,$,ie){return X[ie]=!0,Ae==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
varying `+F+" "+$+" "+ie+`;
#else
uniform `+F+" "+$+" u_"+ie+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ie+`
    `+F+" "+$+" "+ie+" = u_"+ie+`;
#endif
`}),vertexSource:U=U.replace(j,function(fe,Ae,F,$,ie){var de=$==="float"?"vec2":"vec4",xe=ie.match(/color/)?"color":de;return X[ie]?Ae==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
uniform lowp float u_`+ie+`_t;
attribute `+F+" "+de+" a_"+ie+`;
varying `+F+" "+$+" "+ie+`;
#else
uniform `+F+" "+$+" u_"+ie+`;
#endif
`:xe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+ie+" = a_"+ie+`;
#else
    `+F+" "+$+" "+ie+" = u_"+ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+ie+" = unpack_mix_"+xe+"(a_"+ie+", u_"+ie+`_t);
#else
    `+F+" "+$+" "+ie+" = u_"+ie+`;
#endif
`:Ae==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
uniform lowp float u_`+ie+`_t;
attribute `+F+" "+de+" a_"+ie+`;
#else
uniform `+F+" "+$+" u_"+ie+`;
#endif
`:xe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+F+" "+$+" "+ie+" = a_"+ie+`;
#else
    `+F+" "+$+" "+ie+" = u_"+ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+F+" "+$+" "+ie+" = unpack_mix_"+xe+"(a_"+ie+", u_"+ie+`_t);
#else
    `+F+" "+$+" "+ie+" = u_"+ie+`;
#endif
`})}}var Ya=Object.freeze({__proto__:null,prelude:ur,background:cr,backgroundPattern:br,circle:Yn,clippingMask:dr,heatmap:Sr,heatmapTexture:Gr,collisionBox:ai,collisionCircle:ni,debug:ci,fill:Kr,fillOutline:bi,fillOutlinePattern:qa,fillPattern:ha,fillExtrusion:to,fillExtrusionPattern:Hs,hillshadePrepare:Fo,hillshade:ps,line:qs,lineGradient:Ga,linePattern:rl,lineSDF:Bo,raster:No,symbolIcon:Za,symbolSDF:Si,symbolTextAndIcon:ds}),ba=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ba.prototype.bind=function(R,U,j,X,fe,Ae,F,$){this.context=R;for(var ie=this.boundPaintVertexBuffers.length!==X.length,de=0;!ie&&de<X.length;de++)this.boundPaintVertexBuffers[de]!==X[de]&&(ie=!0);var xe=!this.vao||this.boundProgram!==U||this.boundLayoutVertexBuffer!==j||ie||this.boundIndexBuffer!==fe||this.boundVertexOffset!==Ae||this.boundDynamicVertexBuffer!==F||this.boundDynamicVertexBuffer2!==$;!R.extVertexArrayObject||xe?this.freshBind(U,j,X,fe,Ae,F,$):(R.bindVertexArrayOES.set(this.vao),F&&F.bind(),fe&&fe.dynamicDraw&&fe.bind(),$&&$.bind())},ba.prototype.freshBind=function(R,U,j,X,fe,Ae,F){var $,ie=R.numAttributes,de=this.context,xe=de.gl;if(de.extVertexArrayObject)this.vao&&this.destroy(),this.vao=de.extVertexArrayObject.createVertexArrayOES(),de.bindVertexArrayOES.set(this.vao),$=0,this.boundProgram=R,this.boundLayoutVertexBuffer=U,this.boundPaintVertexBuffers=j,this.boundIndexBuffer=X,this.boundVertexOffset=fe,this.boundDynamicVertexBuffer=Ae,this.boundDynamicVertexBuffer2=F;else{$=de.currentNumAttributes||0;for(var Le=ie;Le<$;Le++)xe.disableVertexAttribArray(Le)}U.enableAttributes(xe,R);for(var Ne=0,Ue=j;Ne<Ue.length;Ne+=1)Ue[Ne].enableAttributes(xe,R);Ae&&Ae.enableAttributes(xe,R),F&&F.enableAttributes(xe,R),U.bind(),U.setVertexAttribPointers(xe,R,fe);for(var qe=0,Ye=j;qe<Ye.length;qe+=1){var $e=Ye[qe];$e.bind(),$e.setVertexAttribPointers(xe,R,fe)}Ae&&(Ae.bind(),Ae.setVertexAttribPointers(xe,R,fe)),X&&X.bind(),F&&(F.bind(),F.setVertexAttribPointers(xe,R,fe)),de.currentNumAttributes=ie},ba.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var no=function(R,U,j,X,fe){var Ae=R.gl;this.program=Ae.createProgram();var F=j?j.defines():[];fe&&F.push("#define OVERDRAW_INSPECTOR;");var $=F.concat(ur.fragmentSource,U.fragmentSource).join(`
`),ie=F.concat(ur.vertexSource,U.vertexSource).join(`
`),de=Ae.createShader(Ae.FRAGMENT_SHADER);if(Ae.isContextLost())this.failedToCreate=!0;else{Ae.shaderSource(de,$),Ae.compileShader(de),Ae.attachShader(this.program,de);var xe=Ae.createShader(Ae.VERTEX_SHADER);if(Ae.isContextLost())this.failedToCreate=!0;else{Ae.shaderSource(xe,ie),Ae.compileShader(xe),Ae.attachShader(this.program,xe);for(var Le=j?j.layoutAttributes:[],Ne=0;Ne<Le.length;Ne++)Ae.bindAttribLocation(this.program,Ne,Le[Ne].name);Ae.linkProgram(this.program),Ae.deleteShader(xe),Ae.deleteShader(de),this.numAttributes=Ae.getProgramParameter(this.program,Ae.ACTIVE_ATTRIBUTES),this.attributes={};for(var Ue={},qe=0;qe<this.numAttributes;qe++){var Ye=Ae.getActiveAttrib(this.program,qe);Ye&&(this.attributes[Ye.name]=Ae.getAttribLocation(this.program,Ye.name))}for(var $e=Ae.getProgramParameter(this.program,Ae.ACTIVE_UNIFORMS),lt=0;lt<$e;lt++){var pt=Ae.getActiveUniform(this.program,lt);pt&&(Ue[pt.name]=Ae.getUniformLocation(this.program,pt.name))}this.fixedUniforms=X(R,Ue),this.binderUniforms=j?j.getUniforms(R,Ue):[]}}};function Ia(R,U,j){var X=1/Gn(j,1,U.transform.tileZoom),fe=Math.pow(2,j.tileID.overscaledZ),Ae=j.tileSize*Math.pow(2,U.transform.tileZoom)/fe,F=Ae*(j.tileID.canonical.x+j.tileID.wrap*fe),$=Ae*j.tileID.canonical.y;return{u_image:0,u_texsize:j.imageAtlasTexture.size,u_scale:[X,R.fromScale,R.toScale],u_fade:R.t,u_pixel_coord_upper:[F>>16,$>>16],u_pixel_coord_lower:[65535&F,65535&$]}}no.prototype.draw=function(R,U,j,X,fe,Ae,F,$,ie,de,xe,Le,Ne,Ue,qe,Ye){var $e,lt=R.gl;if(!this.failedToCreate){for(var pt in R.program.set(this.program),R.setDepthMode(j),R.setStencilMode(X),R.setColorMode(fe),R.setCullFace(Ae),this.fixedUniforms)this.fixedUniforms[pt].set(F[pt]);Ue&&Ue.setUniforms(R,this.binderUniforms,Le,{zoom:Ne});for(var Et=($e={},$e[lt.LINES]=2,$e[lt.TRIANGLES]=3,$e[lt.LINE_STRIP]=1,$e)[U],Ct=0,St=xe.get();Ct<St.length;Ct+=1){var Ft=St[Ct],Lt=Ft.vaos||(Ft.vaos={});(Lt[$]||(Lt[$]=new ba)).bind(R,this,ie,Ue?Ue.getPaintVertexBuffers():[],de,Ft.vertexOffset,qe,Ye),lt.drawElements(U,Ft.primitiveLength*Et,lt.UNSIGNED_SHORT,Ft.primitiveOffset*Et*2)}}};var yo=function(R,U,j,X){var fe=U.style.light,Ae=fe.properties.get("position"),F=[Ae.x,Ae.y,Ae.z],$=l.create$1();fe.properties.get("anchor")==="viewport"&&l.fromRotation($,-U.transform.angle),l.transformMat3(F,F,$);var ie=fe.properties.get("color");return{u_matrix:R,u_lightpos:F,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[ie.r,ie.g,ie.b],u_vertical_gradient:+j,u_opacity:X}},ro=function(R,U,j,X,fe,Ae,F){return l.extend(yo(R,U,j,X),Ia(Ae,U,F),{u_height_factor:-Math.pow(2,fe.overscaledZ)/F.tileSize/8})},io=function(R){return{u_matrix:R}},Ps=function(R,U,j,X){return l.extend(io(R),Ia(j,U,X))},il=function(R,U){return{u_matrix:R,u_world:U}},xo=function(R,U,j,X,fe){return l.extend(Ps(R,U,j,X),{u_world:fe})},al=function(R,U,j,X){var fe,Ae,F=R.transform;if(X.paint.get("circle-pitch-alignment")==="map"){var $=Gn(j,1,F.zoom);fe=!0,Ae=[$,$]}else fe=!1,Ae=F.pixelsToGLUnits;return{u_camera_to_center_distance:F.cameraToCenterDistance,u_scale_with_map:+(X.paint.get("circle-pitch-scale")==="map"),u_matrix:R.translatePosMatrix(U.posMatrix,j,X.paint.get("circle-translate"),X.paint.get("circle-translate-anchor")),u_pitch_with_map:+fe,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:Ae}},Gs=function(R,U,j){var X=Gn(j,1,U.zoom),fe=Math.pow(2,U.zoom-j.tileID.overscaledZ),Ae=j.tileID.overscaleFactor();return{u_matrix:R,u_camera_to_center_distance:U.cameraToCenterDistance,u_pixels_to_tile_units:X,u_extrude_scale:[U.pixelsToGLUnits[0]/(X*fe),U.pixelsToGLUnits[1]/(X*fe)],u_overscale_factor:Ae}},ol=function(R,U,j){return{u_matrix:R,u_inv_matrix:U,u_camera_to_center_distance:j.cameraToCenterDistance,u_viewport_size:[j.width,j.height]}},Zs=function(R,U,j){return j===void 0&&(j=1),{u_matrix:R,u_color:U,u_overlay:0,u_overlay_scale:j}},sl=function(R){return{u_matrix:R}},ts=function(R,U,j,X){return{u_matrix:R,u_extrude_scale:Gn(U,1,j),u_intensity:X}},bo=function(R,U,j,X){var fe=l.create();l.ortho(fe,0,R.width,R.height,0,0,1);var Ae=R.context.gl;return{u_matrix:fe,u_world:[Ae.drawingBufferWidth,Ae.drawingBufferHeight],u_image:j,u_color_ramp:X,u_opacity:U.paint.get("heatmap-opacity")}},jo=function(R,U,j){var X=j.paint.get("hillshade-shadow-color"),fe=j.paint.get("hillshade-highlight-color"),Ae=j.paint.get("hillshade-accent-color"),F=j.paint.get("hillshade-illumination-direction")*(Math.PI/180);j.paint.get("hillshade-illumination-anchor")==="viewport"&&(F-=R.transform.angle);var $,ie,de,xe=!R.options.moving;return{u_matrix:R.transform.calculatePosMatrix(U.tileID.toUnwrapped(),xe),u_image:0,u_latrange:($=U.tileID,ie=Math.pow(2,$.canonical.z),de=$.canonical.y,[new l.MercatorCoordinate(0,de/ie).toLngLat().lat,new l.MercatorCoordinate(0,(de+1)/ie).toLngLat().lat]),u_light:[j.paint.get("hillshade-exaggeration"),F],u_shadow:X,u_highlight:fe,u_accent:Ae}},ns=function(R,U,j){var X=U.stride,fe=l.create();return l.ortho(fe,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(fe,fe,[0,-l.EXTENT,0]),{u_matrix:fe,u_image:1,u_dimension:[X,X],u_zoom:R.overscaledZ,u_maxzoom:j,u_unpack:U.getUnpackVector()}},Os=function(R,U,j){var X=R.transform;return{u_matrix:Wa(R,U,j),u_ratio:1/Gn(U,1,X.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]]}},Ys=function(R,U,j){return l.extend(Os(R,U,j),{u_image:0})},Ws=function(R,U,j,X){var fe=R.transform,Ae=Uo(U,fe);return{u_matrix:Wa(R,U,j),u_texsize:U.imageAtlasTexture.size,u_ratio:1/Gn(U,1,fe.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[Ae,X.fromScale,X.toScale],u_fade:X.t,u_units_to_pixels:[1/fe.pixelsToGLUnits[0],1/fe.pixelsToGLUnits[1]]}},Aa=function(R,U,j,X,fe){var Ae=R.transform,F=R.lineAtlas,$=Uo(U,Ae),ie=j.layout.get("line-cap")==="round",de=F.getDash(X.from,ie),xe=F.getDash(X.to,ie),Le=de.width*fe.fromScale,Ne=xe.width*fe.toScale;return l.extend(Os(R,U,j),{u_patternscale_a:[$/Le,-de.height/2],u_patternscale_b:[$/Ne,-xe.height/2],u_sdfgamma:F.width/(256*Math.min(Le,Ne)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:de.y,u_tex_y_b:xe.y,u_mix:fe.t})};function Uo(R,U){return 1/Gn(R,1,U.tileZoom)}function Wa(R,U,j){return R.translatePosMatrix(U.tileID.posMatrix,U,j.paint.get("line-translate"),j.paint.get("line-translate-anchor"))}var ao=function(R,U,j,X,fe){return{u_matrix:R,u_tl_parent:U,u_scale_parent:j,u_buffer_scale:1,u_fade_t:X.mix,u_opacity:X.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:(F=fe.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(Ae=fe.paint.get("raster-contrast"),Ae>0?1/(1-Ae):1+Ae),u_spin_weights:ll(fe.paint.get("raster-hue-rotate"))};var Ae,F};function ll(R){R*=Math.PI/180;var U=Math.sin(R),j=Math.cos(R);return[(2*j+1)/3,(-Math.sqrt(3)*U-j+1)/3,(Math.sqrt(3)*U-j+1)/3]}var _o,$r=function(R,U,j,X,fe,Ae,F,$,ie,de){var xe=fe.transform;return{u_is_size_zoom_constant:+(R==="constant"||R==="source"),u_is_size_feature_constant:+(R==="constant"||R==="camera"),u_size_t:U?U.uSizeT:0,u_size:U?U.uSize:0,u_camera_to_center_distance:xe.cameraToCenterDistance,u_pitch:xe.pitch/360*2*Math.PI,u_rotate_symbol:+j,u_aspect_ratio:xe.width/xe.height,u_fade_change:fe.options.fadeDuration?fe.symbolFadeChange:1,u_matrix:Ae,u_label_plane_matrix:F,u_coord_matrix:$,u_is_text:+ie,u_pitch_with_map:+X,u_texsize:de,u_texture:0}},Da=function(R,U,j,X,fe,Ae,F,$,ie,de,xe){var Le=fe.transform;return l.extend($r(R,U,j,X,fe,Ae,F,$,ie,de),{u_gamma_scale:X?Math.cos(Le._pitch)*Le.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+xe})},gs=function(R,U,j,X,fe,Ae,F,$,ie,de){return l.extend(Da(R,U,j,X,fe,Ae,F,$,!0,ie,!0),{u_texsize_icon:de,u_texture_icon:1})},Ma=function(R,U,j){return{u_matrix:R,u_opacity:U,u_color:j}},Vo=function(R,U,j,X,fe,Ae){return l.extend(function(F,$,ie,de){var xe=ie.imageManager.getPattern(F.from.toString()),Le=ie.imageManager.getPattern(F.to.toString()),Ne=ie.imageManager.getPixelSize(),Ue=Ne.width,qe=Ne.height,Ye=Math.pow(2,de.tileID.overscaledZ),$e=de.tileSize*Math.pow(2,ie.transform.tileZoom)/Ye,lt=$e*(de.tileID.canonical.x+de.tileID.wrap*Ye),pt=$e*de.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:xe.tl,u_pattern_br_a:xe.br,u_pattern_tl_b:Le.tl,u_pattern_br_b:Le.br,u_texsize:[Ue,qe],u_mix:$.t,u_pattern_size_a:xe.displaySize,u_pattern_size_b:Le.displaySize,u_scale_a:$.fromScale,u_scale_b:$.toScale,u_tile_units_to_pixels:1/Gn(de,1,ie.transform.tileZoom),u_pixel_coord_upper:[lt>>16,pt>>16],u_pixel_coord_lower:[65535&lt,65535&pt]}}(X,Ae,j,fe),{u_matrix:R,u_opacity:U})},xl={fillExtrusion:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_lightpos:new l.Uniform3f(R,U.u_lightpos),u_lightintensity:new l.Uniform1f(R,U.u_lightintensity),u_lightcolor:new l.Uniform3f(R,U.u_lightcolor),u_vertical_gradient:new l.Uniform1f(R,U.u_vertical_gradient),u_opacity:new l.Uniform1f(R,U.u_opacity)}},fillExtrusionPattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_lightpos:new l.Uniform3f(R,U.u_lightpos),u_lightintensity:new l.Uniform1f(R,U.u_lightintensity),u_lightcolor:new l.Uniform3f(R,U.u_lightcolor),u_vertical_gradient:new l.Uniform1f(R,U.u_vertical_gradient),u_height_factor:new l.Uniform1f(R,U.u_height_factor),u_image:new l.Uniform1i(R,U.u_image),u_texsize:new l.Uniform2f(R,U.u_texsize),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade),u_opacity:new l.Uniform1f(R,U.u_opacity)}},fill:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},fillPattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_image:new l.Uniform1i(R,U.u_image),u_texsize:new l.Uniform2f(R,U.u_texsize),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade)}},fillOutline:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_world:new l.Uniform2f(R,U.u_world)}},fillOutlinePattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_world:new l.Uniform2f(R,U.u_world),u_image:new l.Uniform1i(R,U.u_image),u_texsize:new l.Uniform2f(R,U.u_texsize),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade)}},circle:function(R,U){return{u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(R,U.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(R,U.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},collisionBox:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(R,U.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(R,U.u_extrude_scale),u_overscale_factor:new l.Uniform1f(R,U.u_overscale_factor)}},collisionCircle:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_inv_matrix:new l.UniformMatrix4f(R,U.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(R,U.u_viewport_size)}},debug:function(R,U){return{u_color:new l.UniformColor(R,U.u_color),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_overlay:new l.Uniform1i(R,U.u_overlay),u_overlay_scale:new l.Uniform1f(R,U.u_overlay_scale)}},clippingMask:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},heatmap:function(R,U){return{u_extrude_scale:new l.Uniform1f(R,U.u_extrude_scale),u_intensity:new l.Uniform1f(R,U.u_intensity),u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},heatmapTexture:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_world:new l.Uniform2f(R,U.u_world),u_image:new l.Uniform1i(R,U.u_image),u_color_ramp:new l.Uniform1i(R,U.u_color_ramp),u_opacity:new l.Uniform1f(R,U.u_opacity)}},hillshade:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_image:new l.Uniform1i(R,U.u_image),u_latrange:new l.Uniform2f(R,U.u_latrange),u_light:new l.Uniform2f(R,U.u_light),u_shadow:new l.UniformColor(R,U.u_shadow),u_highlight:new l.UniformColor(R,U.u_highlight),u_accent:new l.UniformColor(R,U.u_accent)}},hillshadePrepare:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_image:new l.Uniform1i(R,U.u_image),u_dimension:new l.Uniform2f(R,U.u_dimension),u_zoom:new l.Uniform1f(R,U.u_zoom),u_maxzoom:new l.Uniform1f(R,U.u_maxzoom),u_unpack:new l.Uniform4f(R,U.u_unpack)}},line:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels)}},lineGradient:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels),u_image:new l.Uniform1i(R,U.u_image)}},linePattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_texsize:new l.Uniform2f(R,U.u_texsize),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_image:new l.Uniform1i(R,U.u_image),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade)}},lineSDF:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(R,U.u_patternscale_a),u_patternscale_b:new l.Uniform2f(R,U.u_patternscale_b),u_sdfgamma:new l.Uniform1f(R,U.u_sdfgamma),u_image:new l.Uniform1i(R,U.u_image),u_tex_y_a:new l.Uniform1f(R,U.u_tex_y_a),u_tex_y_b:new l.Uniform1f(R,U.u_tex_y_b),u_mix:new l.Uniform1f(R,U.u_mix)}},raster:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_tl_parent:new l.Uniform2f(R,U.u_tl_parent),u_scale_parent:new l.Uniform1f(R,U.u_scale_parent),u_buffer_scale:new l.Uniform1f(R,U.u_buffer_scale),u_fade_t:new l.Uniform1f(R,U.u_fade_t),u_opacity:new l.Uniform1f(R,U.u_opacity),u_image0:new l.Uniform1i(R,U.u_image0),u_image1:new l.Uniform1i(R,U.u_image1),u_brightness_low:new l.Uniform1f(R,U.u_brightness_low),u_brightness_high:new l.Uniform1f(R,U.u_brightness_high),u_saturation_factor:new l.Uniform1f(R,U.u_saturation_factor),u_contrast_factor:new l.Uniform1f(R,U.u_contrast_factor),u_spin_weights:new l.Uniform3f(R,U.u_spin_weights)}},symbolIcon:function(R,U){return{u_is_size_zoom_constant:new l.Uniform1i(R,U.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(R,U.u_is_size_feature_constant),u_size_t:new l.Uniform1f(R,U.u_size_t),u_size:new l.Uniform1f(R,U.u_size),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pitch:new l.Uniform1f(R,U.u_pitch),u_rotate_symbol:new l.Uniform1i(R,U.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(R,U.u_aspect_ratio),u_fade_change:new l.Uniform1f(R,U.u_fade_change),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(R,U.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(R,U.u_coord_matrix),u_is_text:new l.Uniform1i(R,U.u_is_text),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_texsize:new l.Uniform2f(R,U.u_texsize),u_texture:new l.Uniform1i(R,U.u_texture)}},symbolSDF:function(R,U){return{u_is_size_zoom_constant:new l.Uniform1i(R,U.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(R,U.u_is_size_feature_constant),u_size_t:new l.Uniform1f(R,U.u_size_t),u_size:new l.Uniform1f(R,U.u_size),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pitch:new l.Uniform1f(R,U.u_pitch),u_rotate_symbol:new l.Uniform1i(R,U.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(R,U.u_aspect_ratio),u_fade_change:new l.Uniform1f(R,U.u_fade_change),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(R,U.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(R,U.u_coord_matrix),u_is_text:new l.Uniform1i(R,U.u_is_text),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_texsize:new l.Uniform2f(R,U.u_texsize),u_texture:new l.Uniform1i(R,U.u_texture),u_gamma_scale:new l.Uniform1f(R,U.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(R,U.u_is_halo)}},symbolTextAndIcon:function(R,U){return{u_is_size_zoom_constant:new l.Uniform1i(R,U.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(R,U.u_is_size_feature_constant),u_size_t:new l.Uniform1f(R,U.u_size_t),u_size:new l.Uniform1f(R,U.u_size),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pitch:new l.Uniform1f(R,U.u_pitch),u_rotate_symbol:new l.Uniform1i(R,U.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(R,U.u_aspect_ratio),u_fade_change:new l.Uniform1f(R,U.u_fade_change),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(R,U.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(R,U.u_coord_matrix),u_is_text:new l.Uniform1i(R,U.u_is_text),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_texsize:new l.Uniform2f(R,U.u_texsize),u_texsize_icon:new l.Uniform2f(R,U.u_texsize_icon),u_texture:new l.Uniform1i(R,U.u_texture),u_texture_icon:new l.Uniform1i(R,U.u_texture_icon),u_gamma_scale:new l.Uniform1f(R,U.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(R,U.u_is_halo)}},background:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_opacity:new l.Uniform1f(R,U.u_opacity),u_color:new l.UniformColor(R,U.u_color)}},backgroundPattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_opacity:new l.Uniform1f(R,U.u_opacity),u_image:new l.Uniform1i(R,U.u_image),u_pattern_tl_a:new l.Uniform2f(R,U.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(R,U.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(R,U.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(R,U.u_pattern_br_b),u_texsize:new l.Uniform2f(R,U.u_texsize),u_mix:new l.Uniform1f(R,U.u_mix),u_pattern_size_a:new l.Uniform2f(R,U.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(R,U.u_pattern_size_b),u_scale_a:new l.Uniform1f(R,U.u_scale_a),u_scale_b:new l.Uniform1f(R,U.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(R,U.u_tile_units_to_pixels)}}};function Is(R,U,j,X,fe,Ae,F){for(var $=R.context,ie=$.gl,de=R.useProgram("collisionBox"),xe=[],Le=0,Ne=0,Ue=0;Ue<X.length;Ue++){var qe=X[Ue],Ye=U.getTile(qe),$e=Ye.getBucket(j);if($e){var lt=qe.posMatrix;fe[0]===0&&fe[1]===0||(lt=R.translatePosMatrix(qe.posMatrix,Ye,fe,Ae));var pt=F?$e.textCollisionBox:$e.iconCollisionBox,Et=$e.collisionCircleArray;if(Et.length>0){var Ct=l.create(),St=lt;l.mul(Ct,$e.placementInvProjMatrix,R.transform.glCoordMatrix),l.mul(Ct,Ct,$e.placementViewportMatrix),xe.push({circleArray:Et,circleOffset:Ne,transform:St,invTransform:Ct}),Ne=Le+=Et.length/4}pt&&de.draw($,ie.LINES,Pt.disabled,Ze.disabled,R.colorModeForRenderPass(),Ve.disabled,Gs(lt,R.transform,Ye),j.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,null,R.transform.zoom,null,null,pt.collisionVertexBuffer)}}if(F&&xe.length){var Ft=R.useProgram("collisionCircle"),Lt=new l.StructArrayLayout2f1f2i16;Lt.resize(4*Le),Lt._trim();for(var tn=0,Zt=0,Ht=xe;Zt<Ht.length;Zt+=1)for(var dn=Ht[Zt],vn=0;vn<dn.circleArray.length/4;vn++){var zn=4*vn,Rn=dn.circleArray[zn+0],Vn=dn.circleArray[zn+1],Xn=dn.circleArray[zn+2],or=dn.circleArray[zn+3];Lt.emplace(tn++,Rn,Vn,Xn,or,0),Lt.emplace(tn++,Rn,Vn,Xn,or,1),Lt.emplace(tn++,Rn,Vn,Xn,or,2),Lt.emplace(tn++,Rn,Vn,Xn,or,3)}(!_o||_o.length<2*Le)&&(_o=function(hr){var yr=2*hr,Mr=new l.StructArrayLayout3ui6;Mr.resize(yr),Mr._trim();for(var Ir=0;Ir<yr;Ir++){var Br=6*Ir;Mr.uint16[Br+0]=4*Ir+0,Mr.uint16[Br+1]=4*Ir+1,Mr.uint16[Br+2]=4*Ir+2,Mr.uint16[Br+3]=4*Ir+2,Mr.uint16[Br+4]=4*Ir+3,Mr.uint16[Br+5]=4*Ir+0}return Mr}(Le));for(var ar=$.createIndexBuffer(_o,!0),fr=$.createVertexBuffer(Lt,l.collisionCircleLayout.members,!0),mr=0,Lr=xe;mr<Lr.length;mr+=1){var Nn=Lr[mr],ir=ol(Nn.transform,Nn.invTransform,R.transform);Ft.draw($,ie.TRIANGLES,Pt.disabled,Ze.disabled,R.colorModeForRenderPass(),Ve.disabled,ir,j.id,fr,ar,l.SegmentVector.simpleSegment(0,2*Nn.circleOffset,Nn.circleArray.length,Nn.circleArray.length/2),null,R.transform.zoom,null,null,null)}fr.destroy(),ar.destroy()}}var ul=l.identity(new Float32Array(16));function cl(R,U,j,X,fe,Ae){var F=l.getAnchorAlignment(R),$=-(F.horizontalAlign-.5)*U,ie=-(F.verticalAlign-.5)*j,de=l.evaluateVariableOffset(R,X);return new l.Point(($/fe+de[0])*Ae,(ie/fe+de[1])*Ae)}function vs(R,U,j,X,fe,Ae,F,$,ie,de,xe){var Le=R.text.placedSymbolArray,Ne=R.text.dynamicLayoutVertexArray,Ue=R.icon.dynamicLayoutVertexArray,qe={};Ne.clear();for(var Ye=0;Ye<Le.length;Ye++){var $e=Le.get(Ye),lt=R.allowVerticalPlacement&&!$e.placedOrientation,pt=$e.hidden||!$e.crossTileID||lt?null:X[$e.crossTileID];if(pt){var Et=new l.Point($e.anchorX,$e.anchorY),Ct=qt(Et,j?$:F),St=nn(Ae.cameraToCenterDistance,Ct.signedDistanceFromCamera),Ft=fe.evaluateSizeForFeature(R.textSizeData,de,$e)*St/l.ONE_EM;j&&(Ft*=R.tilePixelRatio/ie);for(var Lt=pt.width,tn=pt.height,Zt=cl(pt.anchor,Lt,tn,pt.textOffset,pt.textBoxScale,Ft),Ht=j?qt(Et.add(Zt),F).point:Ct.point.add(U?Zt.rotate(-Ae.angle):Zt),dn=R.allowVerticalPlacement&&$e.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,vn=0;vn<$e.numGlyphs;vn++)l.addDynamicAttributes(Ne,Ht,dn);xe&&$e.associatedIconIndex>=0&&(qe[$e.associatedIconIndex]={shiftedAnchor:Ht,angle:dn})}else Hn($e.numGlyphs,Ne)}if(xe){Ue.clear();for(var zn=R.icon.placedSymbolArray,Rn=0;Rn<zn.length;Rn++){var Vn=zn.get(Rn);if(Vn.hidden)Hn(Vn.numGlyphs,Ue);else{var Xn=qe[Rn];if(Xn)for(var or=0;or<Vn.numGlyphs;or++)l.addDynamicAttributes(Ue,Xn.shiftedAnchor,Xn.angle);else Hn(Vn.numGlyphs,Ue)}}R.icon.dynamicLayoutVertexBuffer.updateData(Ue)}R.text.dynamicLayoutVertexBuffer.updateData(Ne)}function rs(R,U,j){return j.iconsInText&&U?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon"}function ms(R,U,j,X,fe,Ae,F,$,ie,de,xe,Le){for(var Ne=R.context,Ue=Ne.gl,qe=R.transform,Ye=$==="map",$e=ie==="map",lt=Ye&&j.layout.get("symbol-placement")!=="point",pt=Ye&&!$e&&!lt,Et=j.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ct=R.depthModeForSublayer(0,Pt.ReadOnly),St=j.layout.get("text-variable-anchor"),Ft=[],Lt=0,tn=X;Lt<tn.length;Lt+=1){var Zt=tn[Lt],Ht=U.getTile(Zt),dn=Ht.getBucket(j);if(dn){var vn=fe?dn.text:dn.icon;if(vn&&vn.segments.get().length){var zn=vn.programConfigurations.get(j.id),Rn=fe||dn.sdfIcons,Vn=fe?dn.textSizeData:dn.iconSizeData,Xn=$e||qe.pitch!==0,or=R.useProgram(rs(Rn,fe,dn),zn),ar=l.evaluateSizeForZoom(Vn,qe.zoom),fr=void 0,mr=[0,0],Lr=void 0,Nn=void 0,ir=null,hr=void 0;if(fe){if(Lr=Ht.glyphAtlasTexture,Nn=Ue.LINEAR,fr=Ht.glyphAtlasTexture.size,dn.iconsInText){mr=Ht.imageAtlasTexture.size,ir=Ht.imageAtlasTexture;var yr=Vn.kind==="composite"||Vn.kind==="camera";hr=Xn||R.options.rotating||R.options.zooming||yr?Ue.LINEAR:Ue.NEAREST}}else{var Mr=j.layout.get("icon-size").constantOr(0)!==1||dn.iconsNeedLinear;Lr=Ht.imageAtlasTexture,Nn=Rn||R.options.rotating||R.options.zooming||Mr||Xn?Ue.LINEAR:Ue.NEAREST,fr=Ht.imageAtlasTexture.size}var Ir=Gn(Ht,1,R.transform.zoom),Br=Mn(Zt.posMatrix,$e,Ye,R.transform,Ir),Zr=cn(Zt.posMatrix,$e,Ye,R.transform,Ir),oi=St&&dn.hasTextData(),si=j.layout.get("icon-text-fit")!=="none"&&oi&&dn.hasIconData();lt&&sn(dn,Zt.posMatrix,R,fe,Br,Zr,$e,de);var Yr=R.translatePosMatrix(Zt.posMatrix,Ht,Ae,F),wi=lt||fe&&St||si?ul:Br,Hi=R.translatePosMatrix(Zr,Ht,Ae,F,!0),Li=Rn&&j.paint.get(fe?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ri={program:or,buffers:vn,uniformValues:Rn?dn.iconsInText?gs(Vn.kind,ar,pt,$e,R,Yr,wi,Hi,fr,mr):Da(Vn.kind,ar,pt,$e,R,Yr,wi,Hi,fe,fr,!0):$r(Vn.kind,ar,pt,$e,R,Yr,wi,Hi,fe,fr),atlasTexture:Lr,atlasTextureIcon:ir,atlasInterpolation:Nn,atlasInterpolationIcon:hr,isSDF:Rn,hasHalo:Li};if(Et)for(var Ur=0,Fr=vn.segments.get();Ur<Fr.length;Ur+=1){var li=Fr[Ur];Ft.push({segments:new l.SegmentVector([li]),sortKey:li.sortKey,state:Ri})}else Ft.push({segments:vn.segments,sortKey:0,state:Ri})}}}Et&&Ft.sort(function(es,ga){return es.sortKey-ga.sortKey});for(var ti=0,fi=Ft;ti<fi.length;ti+=1){var sa=fi[ti],mi=sa.state;if(Ne.activeTexture.set(Ue.TEXTURE0),mi.atlasTexture.bind(mi.atlasInterpolation,Ue.CLAMP_TO_EDGE),mi.atlasTextureIcon&&(Ne.activeTexture.set(Ue.TEXTURE1),mi.atlasTextureIcon&&mi.atlasTextureIcon.bind(mi.atlasInterpolationIcon,Ue.CLAMP_TO_EDGE)),mi.isSDF){var Wr=mi.uniformValues;mi.hasHalo&&(Wr.u_is_halo=1,wo(mi.buffers,sa.segments,j,R,mi.program,Ct,xe,Le,Wr)),Wr.u_is_halo=0}wo(mi.buffers,sa.segments,j,R,mi.program,Ct,xe,Le,mi.uniformValues)}}function wo(R,U,j,X,fe,Ae,F,$,ie){var de=X.context,xe=de.gl;fe.draw(de,xe.TRIANGLES,Ae,F,$,Ve.disabled,ie,j.id,R.layoutVertexBuffer,R.indexBuffer,U,j.paint,X.transform.zoom,R.programConfigurations.get(j.id),R.dynamicLayoutVertexBuffer,R.opacityVertexBuffer)}function oo(R,U,j,X,fe,Ae,F){var $,ie,de,xe,Le,Ne=R.context.gl,Ue=j.paint.get("fill-pattern"),qe=Ue&&Ue.constantOr(1),Ye=j.getCrossfadeParameters();F?(ie=qe&&!j.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$=Ne.LINES):(ie=qe?"fillPattern":"fill",$=Ne.TRIANGLES);for(var $e=0,lt=X;$e<lt.length;$e+=1){var pt=lt[$e],Et=U.getTile(pt);if(!qe||Et.patternsLoaded()){var Ct=Et.getBucket(j);if(Ct){var St=Ct.programConfigurations.get(j.id),Ft=R.useProgram(ie,St);qe&&(R.context.activeTexture.set(Ne.TEXTURE0),Et.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),St.updatePaintBuffers(Ye));var Lt=Ue.constantOr(null);if(Lt&&Et.imageAtlas){var tn=Et.imageAtlas,Zt=tn.patternPositions[Lt.to.toString()],Ht=tn.patternPositions[Lt.from.toString()];Zt&&Ht&&St.setConstantPatternPositions(Zt,Ht)}var dn=R.translatePosMatrix(pt.posMatrix,Et,j.paint.get("fill-translate"),j.paint.get("fill-translate-anchor"));if(F){xe=Ct.indexBuffer2,Le=Ct.segments2;var vn=[Ne.drawingBufferWidth,Ne.drawingBufferHeight];de=ie==="fillOutlinePattern"&&qe?xo(dn,R,Ye,Et,vn):il(dn,vn)}else xe=Ct.indexBuffer,Le=Ct.segments,de=qe?Ps(dn,R,Ye,Et):io(dn);Ft.draw(R.context,$,fe,R.stencilModeForClipping(pt),Ae,Ve.disabled,de,j.id,Ct.layoutVertexBuffer,xe,Le,j.paint,R.transform.zoom,St)}}}}function To(R,U,j,X,fe,Ae,F){for(var $=R.context,ie=$.gl,de=j.paint.get("fill-extrusion-pattern"),xe=de.constantOr(1),Le=j.getCrossfadeParameters(),Ne=j.paint.get("fill-extrusion-opacity"),Ue=0,qe=X;Ue<qe.length;Ue+=1){var Ye=qe[Ue],$e=U.getTile(Ye),lt=$e.getBucket(j);if(lt){var pt=lt.programConfigurations.get(j.id),Et=R.useProgram(xe?"fillExtrusionPattern":"fillExtrusion",pt);xe&&(R.context.activeTexture.set(ie.TEXTURE0),$e.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),pt.updatePaintBuffers(Le));var Ct=de.constantOr(null);if(Ct&&$e.imageAtlas){var St=$e.imageAtlas,Ft=St.patternPositions[Ct.to.toString()],Lt=St.patternPositions[Ct.from.toString()];Ft&&Lt&&pt.setConstantPatternPositions(Ft,Lt)}var tn=R.translatePosMatrix(Ye.posMatrix,$e,j.paint.get("fill-extrusion-translate"),j.paint.get("fill-extrusion-translate-anchor")),Zt=j.paint.get("fill-extrusion-vertical-gradient"),Ht=xe?ro(tn,R,Zt,Ne,Ye,Le,$e):yo(tn,R,Zt,Ne);Et.draw($,$.gl.TRIANGLES,fe,Ae,F,Ve.backCCW,Ht,j.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,j.paint,R.transform.zoom,pt)}}}function so(R,U,j,X,fe,Ae){var F=R.context,$=F.gl,ie=U.fbo;if(ie){var de=R.useProgram("hillshade");F.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,ie.colorAttachment.get());var xe=jo(R,U,j);de.draw(F,$.TRIANGLES,X,fe,Ae,Ve.disabled,xe,j.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}}function Ds(R,U,j,X,fe,Ae,F){var $=R.context,ie=$.gl,de=U.dem;if(de&&de.data){var xe=de.dim,Le=de.stride,Ne=de.getPixels();if($.activeTexture.set(ie.TEXTURE1),$.pixelStoreUnpackPremultiplyAlpha.set(!1),U.demTexture=U.demTexture||R.getTileTexture(Le),U.demTexture){var Ue=U.demTexture;Ue.update(Ne,{premultiply:!1}),Ue.bind(ie.NEAREST,ie.CLAMP_TO_EDGE)}else U.demTexture=new l.Texture($,Ne,ie.RGBA,{premultiply:!1}),U.demTexture.bind(ie.NEAREST,ie.CLAMP_TO_EDGE);$.activeTexture.set(ie.TEXTURE0);var qe=U.fbo;if(!qe){var Ye=new l.Texture($,{width:xe,height:xe,data:null},ie.RGBA);Ye.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),(qe=U.fbo=$.createFramebuffer(xe,xe,!0)).colorAttachment.set(Ye.texture)}$.bindFramebuffer.set(qe.framebuffer),$.viewport.set([0,0,xe,xe]),R.useProgram("hillshadePrepare").draw($,ie.TRIANGLES,fe,Ae,F,Ve.disabled,ns(U.tileID,de,X),j.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments),U.needsHillshadePrepare=!1}}function za(R,U,j,X,fe){var Ae=X.paint.get("raster-fade-duration");if(Ae>0){var F=l.browser.now(),$=(F-R.timeAdded)/Ae,ie=U?(F-U.timeAdded)/Ae:-1,de=j.getSource(),xe=fe.coveringZoomLevel({tileSize:de.tileSize,roundZoom:de.roundZoom}),Le=!U||Math.abs(U.tileID.overscaledZ-xe)>Math.abs(R.tileID.overscaledZ-xe),Ne=Le&&R.refreshedUponExpiration?1:l.clamp(Le?$:1-ie,0,1);return R.refreshedUponExpiration&&$>=1&&(R.refreshedUponExpiration=!1),U?{opacity:1,mix:1-Ne}:{opacity:Ne,mix:0}}return{opacity:1,mix:0}}var fl=new l.Color(1,0,0,1),hl=new l.Color(0,1,0,1),zs=new l.Color(0,0,1,1),ko=new l.Color(1,0,1,1),Rs=new l.Color(0,1,1,1);function Ho(R){var U=R.transform.padding;Xs(R,R.transform.height-(U.top||0),3,fl),Xs(R,U.bottom||0,3,hl),is(R,U.left||0,3,zs),is(R,R.transform.width-(U.right||0),3,ko);var j=R.transform.centerPoint;(function(X,fe,Ae,F){var $=20,ie=2;qo(X,fe-ie/2,Ae-$/2,ie,$,F),qo(X,fe-$/2,Ae-ie/2,$,ie,F)})(R,j.x,R.transform.height-j.y,Rs)}function Xs(R,U,j,X){qo(R,0,U+j/2,R.transform.width,j,X)}function is(R,U,j,X){qo(R,U-j/2,0,j,R.transform.height,X)}function qo(R,U,j,X,fe,Ae){var F=R.context,$=F.gl;$.enable($.SCISSOR_TEST),$.scissor(U*l.browser.devicePixelRatio,j*l.browser.devicePixelRatio,X*l.browser.devicePixelRatio,fe*l.browser.devicePixelRatio),F.clear({color:Ae}),$.disable($.SCISSOR_TEST)}function ys(R,U,j){var X=R.context,fe=X.gl,Ae=j.posMatrix,F=R.useProgram("debug"),$=Pt.disabled,ie=Ze.disabled,de=R.colorModeForRenderPass(),xe="$debug";X.activeTexture.set(fe.TEXTURE0),R.emptyTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),F.draw(X,fe.LINE_STRIP,$,ie,de,Ve.disabled,Zs(Ae,l.Color.red),xe,R.debugBuffer,R.tileBorderIndexBuffer,R.debugSegments);var Le=U.getTileByID(j.key).latestRawTileData,Ne=Le&&Le.byteLength||0,Ue=Math.floor(Ne/1024),qe=U.getTile(j).tileSize,Ye=512/Math.min(qe,512)*(j.overscaledZ/R.transform.zoom)*.5,$e=j.canonical.toString();j.overscaledZ!==j.canonical.z&&($e+=" => "+j.overscaledZ),function(lt,pt){lt.initDebugOverlayCanvas();var Et=lt.debugOverlayCanvas,Ct=lt.context.gl,St=lt.debugOverlayCanvas.getContext("2d");St.clearRect(0,0,Et.width,Et.height),St.shadowColor="white",St.shadowBlur=2,St.lineWidth=1.5,St.strokeStyle="white",St.textBaseline="top",St.font="bold 36px Open Sans, sans-serif",St.fillText(pt,5,5),St.strokeText(pt,5,5),lt.debugOverlayTexture.update(Et),lt.debugOverlayTexture.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE)}(R,$e+" "+Ue+"kb"),F.draw(X,fe.TRIANGLES,$,ie,Xe.alphaBlended,Ve.disabled,Zs(Ae,l.Color.transparent,Ye),xe,R.debugBuffer,R.quadTriangleIndexBuffer,R.debugSegments)}var as={symbol:function(R,U,j,X,fe){if(R.renderPass==="translucent"){var Ae=Ze.disabled,F=R.colorModeForRenderPass();j.layout.get("text-variable-anchor")&&function($,ie,de,xe,Le,Ne,Ue){for(var qe=ie.transform,Ye=Le==="map",$e=Ne==="map",lt=0,pt=$;lt<pt.length;lt+=1){var Et=pt[lt],Ct=xe.getTile(Et),St=Ct.getBucket(de);if(St&&St.text&&St.text.segments.get().length){var Ft=St.textSizeData,Lt=l.evaluateSizeForZoom(Ft,qe.zoom),tn=Gn(Ct,1,ie.transform.zoom),Zt=Mn(Et.posMatrix,$e,Ye,ie.transform,tn),Ht=de.layout.get("icon-text-fit")!=="none"&&St.hasIconData();if(Lt){var dn=Math.pow(2,qe.zoom-Ct.tileID.overscaledZ);vs(St,Ye,$e,Ue,l.symbolSize,qe,Zt,Et.posMatrix,dn,Lt,Ht)}}}}(X,R,j,U,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),fe),j.paint.get("icon-opacity").constantOr(1)!==0&&ms(R,U,j,X,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),Ae,F),j.paint.get("text-opacity").constantOr(1)!==0&&ms(R,U,j,X,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),Ae,F),U.map.showCollisionBoxes&&(Is(R,U,j,X,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),Is(R,U,j,X,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))}},circle:function(R,U,j,X){if(R.renderPass==="translucent"){var fe=j.paint.get("circle-opacity"),Ae=j.paint.get("circle-stroke-width"),F=j.paint.get("circle-stroke-opacity"),$=j.layout.get("circle-sort-key").constantOr(1)!==void 0;if(fe.constantOr(1)!==0||Ae.constantOr(1)!==0&&F.constantOr(1)!==0){for(var ie=R.context,de=ie.gl,xe=R.depthModeForSublayer(0,Pt.ReadOnly),Le=Ze.disabled,Ne=R.colorModeForRenderPass(),Ue=[],qe=0;qe<X.length;qe++){var Ye=X[qe],$e=U.getTile(Ye),lt=$e.getBucket(j);if(lt){var pt=lt.programConfigurations.get(j.id),Et={programConfiguration:pt,program:R.useProgram("circle",pt),layoutVertexBuffer:lt.layoutVertexBuffer,indexBuffer:lt.indexBuffer,uniformValues:al(R,Ye,$e,j)};if($)for(var Ct=0,St=lt.segments.get();Ct<St.length;Ct+=1){var Ft=St[Ct];Ue.push({segments:new l.SegmentVector([Ft]),sortKey:Ft.sortKey,state:Et})}else Ue.push({segments:lt.segments,sortKey:0,state:Et})}}$&&Ue.sort(function(or,ar){return or.sortKey-ar.sortKey});for(var Lt=0,tn=Ue;Lt<tn.length;Lt+=1){var Zt=tn[Lt],Ht=Zt.state,dn=Ht.programConfiguration,vn=Ht.program,zn=Ht.layoutVertexBuffer,Rn=Ht.indexBuffer,Vn=Ht.uniformValues,Xn=Zt.segments;vn.draw(ie,de.TRIANGLES,xe,Le,Ne,Ve.disabled,Vn,j.id,zn,Rn,Xn,j.paint,R.transform.zoom,dn)}}}},heatmap:function(R,U,j,X){if(j.paint.get("heatmap-opacity")!==0)if(R.renderPass==="offscreen"){var fe=R.context,Ae=fe.gl,F=Ze.disabled,$=new Xe([Ae.ONE,Ae.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Ye,$e,lt){var pt=Ye.gl;Ye.activeTexture.set(pt.TEXTURE1),Ye.viewport.set([0,0,$e.width/4,$e.height/4]);var Et=lt.heatmapFbo;if(Et)pt.bindTexture(pt.TEXTURE_2D,Et.colorAttachment.get()),Ye.bindFramebuffer.set(Et.framebuffer);else{var Ct=pt.createTexture();pt.bindTexture(pt.TEXTURE_2D,Ct),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_WRAP_S,pt.CLAMP_TO_EDGE),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_WRAP_T,pt.CLAMP_TO_EDGE),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MIN_FILTER,pt.LINEAR),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MAG_FILTER,pt.LINEAR),Et=lt.heatmapFbo=Ye.createFramebuffer($e.width/4,$e.height/4,!1),function(St,Ft,Lt,tn){var Zt=St.gl,Ht=St.extRenderToTextureHalfFloat?St.extTextureHalfFloat.HALF_FLOAT_OES:Zt.UNSIGNED_BYTE;Zt.texImage2D(Zt.TEXTURE_2D,0,Zt.RGBA,Ft.width/4,Ft.height/4,0,Zt.RGBA,Ht,null),tn.colorAttachment.set(Lt)}(Ye,$e,Ct,Et)}})(fe,R,j),fe.clear({color:l.Color.transparent});for(var ie=0;ie<X.length;ie++){var de=X[ie];if(!U.hasRenderableParent(de)){var xe=U.getTile(de),Le=xe.getBucket(j);if(Le){var Ne=Le.programConfigurations.get(j.id),Ue=R.useProgram("heatmap",Ne),qe=R.transform.zoom;Ue.draw(fe,Ae.TRIANGLES,Pt.disabled,F,$,Ve.disabled,ts(de.posMatrix,xe,qe,j.paint.get("heatmap-intensity")),j.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,j.paint,R.transform.zoom,Ne)}}}fe.viewport.set([0,0,R.width,R.height])}else R.renderPass==="translucent"&&(R.context.setColorMode(R.colorModeForRenderPass()),function(Ye,$e){var lt=Ye.context,pt=lt.gl,Et=$e.heatmapFbo;if(Et){lt.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,Et.colorAttachment.get()),lt.activeTexture.set(pt.TEXTURE1);var Ct=$e.colorRampTexture;Ct||(Ct=$e.colorRampTexture=new l.Texture(lt,$e.colorRamp,pt.RGBA)),Ct.bind(pt.LINEAR,pt.CLAMP_TO_EDGE),Ye.useProgram("heatmapTexture").draw(lt,pt.TRIANGLES,Pt.disabled,Ze.disabled,Ye.colorModeForRenderPass(),Ve.disabled,bo(Ye,$e,0,1),$e.id,Ye.viewportBuffer,Ye.quadTriangleIndexBuffer,Ye.viewportSegments,$e.paint,Ye.transform.zoom)}}(R,j))},line:function(R,U,j,X){if(R.renderPass==="translucent"){var fe=j.paint.get("line-opacity"),Ae=j.paint.get("line-width");if(fe.constantOr(1)!==0&&Ae.constantOr(1)!==0){var F=R.depthModeForSublayer(0,Pt.ReadOnly),$=R.colorModeForRenderPass(),ie=j.paint.get("line-dasharray"),de=j.paint.get("line-pattern"),xe=de.constantOr(1),Le=j.paint.get("line-gradient"),Ne=j.getCrossfadeParameters(),Ue=xe?"linePattern":ie?"lineSDF":Le?"lineGradient":"line",qe=R.context,Ye=qe.gl,$e=!0;if(Le){qe.activeTexture.set(Ye.TEXTURE0);var lt=j.gradientTexture;if(!j.gradient)return;lt||(lt=j.gradientTexture=new l.Texture(qe,j.gradient,Ye.RGBA)),lt.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}for(var pt=0,Et=X;pt<Et.length;pt+=1){var Ct=Et[pt],St=U.getTile(Ct);if(!xe||St.patternsLoaded()){var Ft=St.getBucket(j);if(Ft){var Lt=Ft.programConfigurations.get(j.id),tn=R.context.program.get(),Zt=R.useProgram(Ue,Lt),Ht=$e||Zt.program!==tn,dn=de.constantOr(null);if(dn&&St.imageAtlas){var vn=St.imageAtlas,zn=vn.patternPositions[dn.to.toString()],Rn=vn.patternPositions[dn.from.toString()];zn&&Rn&&Lt.setConstantPatternPositions(zn,Rn)}var Vn=xe?Ws(R,St,j,Ne):ie?Aa(R,St,j,ie,Ne):Le?Ys(R,St,j):Os(R,St,j);xe?(qe.activeTexture.set(Ye.TEXTURE0),St.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Lt.updatePaintBuffers(Ne)):ie&&(Ht||R.lineAtlas.dirty)&&(qe.activeTexture.set(Ye.TEXTURE0),R.lineAtlas.bind(qe)),Zt.draw(qe,Ye.TRIANGLES,F,R.stencilModeForClipping(Ct),$,Ve.disabled,Vn,j.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,j.paint,R.transform.zoom,Lt),$e=!1}}}}}},fill:function(R,U,j,X){var fe=j.paint.get("fill-color"),Ae=j.paint.get("fill-opacity");if(Ae.constantOr(1)!==0){var F=R.colorModeForRenderPass(),$=j.paint.get("fill-pattern"),ie=R.opaquePassEnabledForLayer()&&!$.constantOr(1)&&fe.constantOr(l.Color.transparent).a===1&&Ae.constantOr(0)===1?"opaque":"translucent";if(R.renderPass===ie){var de=R.depthModeForSublayer(1,R.renderPass==="opaque"?Pt.ReadWrite:Pt.ReadOnly);oo(R,U,j,X,de,F,!1)}if(R.renderPass==="translucent"&&j.paint.get("fill-antialias")){var xe=R.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,Pt.ReadOnly);oo(R,U,j,X,xe,F,!0)}}},"fill-extrusion":function(R,U,j,X){var fe=j.paint.get("fill-extrusion-opacity");if(fe!==0&&R.renderPass==="translucent"){var Ae=new Pt(R.context.gl.LEQUAL,Pt.ReadWrite,R.depthRangeFor3D);if(fe!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))To(R,U,j,X,Ae,Ze.disabled,Xe.disabled),To(R,U,j,X,Ae,R.stencilModeFor3D(),R.colorModeForRenderPass());else{var F=R.colorModeForRenderPass();To(R,U,j,X,Ae,Ze.disabled,F)}}},hillshade:function(R,U,j,X){if(R.renderPass==="offscreen"||R.renderPass==="translucent"){for(var fe=R.context,Ae=U.getSource().maxzoom,F=R.depthModeForSublayer(0,Pt.ReadOnly),$=R.colorModeForRenderPass(),ie=R.renderPass==="translucent"?R.stencilConfigForOverlap(X):[{},X],de=ie[0],xe=0,Le=ie[1];xe<Le.length;xe+=1){var Ne=Le[xe],Ue=U.getTile(Ne);Ue.needsHillshadePrepare&&R.renderPass==="offscreen"?Ds(R,Ue,j,Ae,F,Ze.disabled,$):R.renderPass==="translucent"&&so(R,Ue,j,F,de[Ne.overscaledZ],$)}fe.viewport.set([0,0,R.width,R.height])}},raster:function(R,U,j,X){if(R.renderPass==="translucent"&&j.paint.get("raster-opacity")!==0&&X.length)for(var fe=R.context,Ae=fe.gl,F=U.getSource(),$=R.useProgram("raster"),ie=R.colorModeForRenderPass(),de=F instanceof B?[{},X]:R.stencilConfigForOverlap(X),xe=de[0],Le=de[1],Ne=Le[Le.length-1].overscaledZ,Ue=!R.options.moving,qe=0,Ye=Le;qe<Ye.length;qe+=1){var $e=Ye[qe],lt=R.depthModeForSublayer($e.overscaledZ-Ne,j.paint.get("raster-opacity")===1?Pt.ReadWrite:Pt.ReadOnly,Ae.LESS),pt=U.getTile($e),Et=R.transform.calculatePosMatrix($e.toUnwrapped(),Ue);pt.registerFadeDuration(j.paint.get("raster-fade-duration"));var Ct=U.findLoadedParent($e,0),St=za(pt,Ct,U,j,R.transform),Ft=void 0,Lt=void 0,tn=j.paint.get("raster-resampling")==="nearest"?Ae.NEAREST:Ae.LINEAR;fe.activeTexture.set(Ae.TEXTURE0),pt.texture.bind(tn,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST),fe.activeTexture.set(Ae.TEXTURE1),Ct?(Ct.texture.bind(tn,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST),Ft=Math.pow(2,Ct.tileID.overscaledZ-pt.tileID.overscaledZ),Lt=[pt.tileID.canonical.x*Ft%1,pt.tileID.canonical.y*Ft%1]):pt.texture.bind(tn,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST);var Zt=ao(Et,Lt||[0,0],Ft||1,St,j);F instanceof B?$.draw(fe,Ae.TRIANGLES,lt,Ze.disabled,ie,Ve.disabled,Zt,j.id,F.boundsBuffer,R.quadTriangleIndexBuffer,F.boundsSegments):$.draw(fe,Ae.TRIANGLES,lt,xe[$e.overscaledZ],ie,Ve.disabled,Zt,j.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}},background:function(R,U,j){var X=j.paint.get("background-color"),fe=j.paint.get("background-opacity");if(fe!==0){var Ae=R.context,F=Ae.gl,$=R.transform,ie=$.tileSize,de=j.paint.get("background-pattern");if(!R.isPatternMissing(de)){var xe=!de&&X.a===1&&fe===1&&R.opaquePassEnabledForLayer()?"opaque":"translucent";if(R.renderPass===xe){var Le=Ze.disabled,Ne=R.depthModeForSublayer(0,xe==="opaque"?Pt.ReadWrite:Pt.ReadOnly),Ue=R.colorModeForRenderPass(),qe=R.useProgram(de?"backgroundPattern":"background"),Ye=$.coveringTiles({tileSize:ie});de&&(Ae.activeTexture.set(F.TEXTURE0),R.imageManager.bind(R.context));for(var $e=j.getCrossfadeParameters(),lt=0,pt=Ye;lt<pt.length;lt+=1){var Et=pt[lt],Ct=R.transform.calculatePosMatrix(Et.toUnwrapped()),St=de?Vo(Ct,fe,R,de,{tileID:Et,tileSize:ie},$e):Ma(Ct,fe,X);qe.draw(Ae,F.TRIANGLES,Ne,Le,Ue,Ve.disabled,St,j.id,R.tileExtentBuffer,R.quadTriangleIndexBuffer,R.tileExtentSegments)}}}}},debug:function(R,U,j){for(var X=0;X<j.length;X++)ys(R,U,j[X])},custom:function(R,U,j){var X=R.context,fe=j.implementation;if(R.renderPass==="offscreen"){var Ae=fe.prerender;Ae&&(R.setCustomLayerDefaults(),X.setColorMode(R.colorModeForRenderPass()),Ae.call(fe,X.gl,R.transform.customLayerMatrix()),X.setDirty(),R.setBaseState())}else if(R.renderPass==="translucent"){R.setCustomLayerDefaults(),X.setColorMode(R.colorModeForRenderPass()),X.setStencilMode(Ze.disabled);var F=fe.renderingMode==="3d"?new Pt(R.context.gl.LEQUAL,Pt.ReadWrite,R.depthRangeFor3D):R.depthModeForSublayer(0,Pt.ReadOnly);X.setDepthMode(F),fe.render(X.gl,R.transform.customLayerMatrix()),X.setDirty(),R.setBaseState(),X.bindFramebuffer.set(null)}}},Qr=function(R,U){this.context=new We(R),this.transform=U,this._tileTextures={},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Un,this.gpuTimers={}};Qr.prototype.resize=function(R,U){if(this.width=R*l.browser.devicePixelRatio,this.height=U*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var j=0,X=this.style._order;j<X.length;j+=1){var fe=X[j];this.style._layers[fe].resize()}},Qr.prototype.setup=function(){var R=this.context,U=new l.StructArrayLayout2i4;U.emplaceBack(0,0),U.emplaceBack(l.EXTENT,0),U.emplaceBack(0,l.EXTENT),U.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=R.createVertexBuffer(U,tr.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var j=new l.StructArrayLayout2i4;j.emplaceBack(0,0),j.emplaceBack(l.EXTENT,0),j.emplaceBack(0,l.EXTENT),j.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=R.createVertexBuffer(j,tr.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var X=new l.StructArrayLayout4i8;X.emplaceBack(0,0,0,0),X.emplaceBack(l.EXTENT,0,l.EXTENT,0),X.emplaceBack(0,l.EXTENT,0,l.EXTENT),X.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=R.createVertexBuffer(X,N.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var fe=new l.StructArrayLayout2i4;fe.emplaceBack(0,0),fe.emplaceBack(1,0),fe.emplaceBack(0,1),fe.emplaceBack(1,1),this.viewportBuffer=R.createVertexBuffer(fe,tr.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var Ae=new l.StructArrayLayout1ui2;Ae.emplaceBack(0),Ae.emplaceBack(1),Ae.emplaceBack(3),Ae.emplaceBack(2),Ae.emplaceBack(0),this.tileBorderIndexBuffer=R.createIndexBuffer(Ae);var F=new l.StructArrayLayout3ui6;F.emplaceBack(0,1,2),F.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=R.createIndexBuffer(F),this.emptyTexture=new l.Texture(R,{width:1,height:1,data:new Uint8Array([0,0,0,0])},R.gl.RGBA);var $=this.context.gl;this.stencilClearMode=new Ze({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO)},Qr.prototype.clearStencil=function(){var R=this.context,U=R.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var j=l.create();l.ortho(j,0,this.width,this.height,0,0,1),l.scale(j,j,[U.drawingBufferWidth,U.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(R,U.TRIANGLES,Pt.disabled,this.stencilClearMode,Xe.disabled,Ve.disabled,sl(j),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Qr.prototype._renderTileClippingMasks=function(R,U){if(this.currentStencilSource!==R.source&&R.isTileClipped()&&U&&U.length){this.currentStencilSource=R.source;var j=this.context,X=j.gl;this.nextStencilID+U.length>256&&this.clearStencil(),j.setColorMode(Xe.disabled),j.setDepthMode(Pt.disabled);var fe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ae=0,F=U;Ae<F.length;Ae+=1){var $=F[Ae],ie=this._tileClippingMaskIDs[$.key]=this.nextStencilID++;fe.draw(j,X.TRIANGLES,Pt.disabled,new Ze({func:X.ALWAYS,mask:0},ie,255,X.KEEP,X.KEEP,X.REPLACE),Xe.disabled,Ve.disabled,sl($.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Qr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var R=this.nextStencilID++,U=this.context.gl;return new Ze({func:U.NOTEQUAL,mask:255},R,255,U.KEEP,U.KEEP,U.REPLACE)},Qr.prototype.stencilModeForClipping=function(R){var U=this.context.gl;return new Ze({func:U.EQUAL,mask:255},this._tileClippingMaskIDs[R.key],0,U.KEEP,U.KEEP,U.REPLACE)},Qr.prototype.stencilConfigForOverlap=function(R){var U,j=this.context.gl,X=R.sort(function(ie,de){return de.overscaledZ-ie.overscaledZ}),fe=X[X.length-1].overscaledZ,Ae=X[0].overscaledZ-fe+1;if(Ae>1){this.currentStencilSource=void 0,this.nextStencilID+Ae>256&&this.clearStencil();for(var F={},$=0;$<Ae;$++)F[$+fe]=new Ze({func:j.GEQUAL,mask:255},$+this.nextStencilID,255,j.KEEP,j.KEEP,j.REPLACE);return this.nextStencilID+=Ae,[F,X]}return[(U={},U[fe]=Ze.disabled,U),X]},Qr.prototype.colorModeForRenderPass=function(){var R=this.context.gl;if(this._showOverdrawInspector){var U=.125;return new Xe([R.CONSTANT_COLOR,R.ONE],new l.Color(U,U,U,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Xe.unblended:Xe.alphaBlended},Qr.prototype.depthModeForSublayer=function(R,U,j){if(!this.opaquePassEnabledForLayer())return Pt.disabled;var X=1-((1+this.currentLayer)*this.numSublayers+R)*this.depthEpsilon;return new Pt(j||this.context.gl.LEQUAL,U,[X,X])},Qr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Qr.prototype.render=function(R,U){var j=this;this.style=R,this.options=U,this.lineAtlas=R.lineAtlas,this.imageManager=R.imageManager,this.glyphManager=R.glyphManager,this.symbolFadeChange=R.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var X=this.style._order,fe=this.style.sourceCaches;for(var Ae in fe){var F=fe[Ae];F.used&&F.prepare(this.context)}var $,ie,de={},xe={},Le={};for(var Ne in fe){var Ue=fe[Ne];de[Ne]=Ue.getVisibleCoordinates(),xe[Ne]=de[Ne].slice().reverse(),Le[Ne]=Ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var qe=0;qe<X.length;qe++){var Ye=X[qe];if(this.style._layers[Ye].is3D()){this.opaquePassCutoff=qe;break}}this.renderPass="offscreen";for(var $e=0,lt=X;$e<lt.length;$e+=1){var pt=lt[$e],Et=this.style._layers[pt];if(Et.hasOffscreenPass()&&!Et.isHidden(this.transform.zoom)){var Ct=xe[Et.source];(Et.type==="custom"||Ct.length)&&this.renderLayer(this,fe[Et.source],Et,Ct)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:U.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=U.showOverdrawInspector,this.depthRangeFor3D=[0,1-(R._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=X.length-1;this.currentLayer>=0;this.currentLayer--){var St=this.style._layers[X[this.currentLayer]],Ft=fe[St.source],Lt=de[St.source];this._renderTileClippingMasks(St,Lt),this.renderLayer(this,Ft,St,Lt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<X.length;this.currentLayer++){var tn=this.style._layers[X[this.currentLayer]],Zt=fe[tn.source],Ht=(tn.type==="symbol"?Le:xe)[tn.source];this._renderTileClippingMasks(tn,de[tn.source]),this.renderLayer(this,Zt,tn,Ht)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(dn){dn.source&&!dn.isHidden(j.transform.zoom)&&(dn.source!==(ie&&ie.id)&&(ie=j.style.sourceCaches[dn.source]),(!$||$.getSource().maxzoom<ie.getSource().maxzoom)&&($=ie))}),$&&as.debug(this,$,$.getVisibleCoordinates())),this.options.showPadding&&Ho(this),this.context.setDefault()},Qr.prototype.renderLayer=function(R,U,j,X){j.isHidden(this.transform.zoom)||(j.type==="background"||j.type==="custom"||X.length)&&(this.id=j.id,this.gpuTimingStart(j),as[j.type](R,U,j,X,this.style.placement.variableOffsets),this.gpuTimingEnd())},Qr.prototype.gpuTimingStart=function(R){if(this.options.gpuTiming){var U=this.context.extTimerQuery,j=this.gpuTimers[R.id];j||(j=this.gpuTimers[R.id]={calls:0,cpuTime:0,query:U.createQueryEXT()}),j.calls++,U.beginQueryEXT(U.TIME_ELAPSED_EXT,j.query)}},Qr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var R=this.context.extTimerQuery;R.endQueryEXT(R.TIME_ELAPSED_EXT)}},Qr.prototype.collectGpuTimers=function(){var R=this.gpuTimers;return this.gpuTimers={},R},Qr.prototype.queryGpuTimers=function(R){var U={};for(var j in R){var X=R[j],fe=this.context.extTimerQuery,Ae=fe.getQueryObjectEXT(X.query,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(X.query),U[j]=Ae}return U},Qr.prototype.translatePosMatrix=function(R,U,j,X,fe){if(!j[0]&&!j[1])return R;var Ae=fe?X==="map"?this.transform.angle:0:X==="viewport"?-this.transform.angle:0;if(Ae){var F=Math.sin(Ae),$=Math.cos(Ae);j=[j[0]*$-j[1]*F,j[0]*F+j[1]*$]}var ie=[fe?j[0]:Gn(U,j[0],this.transform.zoom),fe?j[1]:Gn(U,j[1],this.transform.zoom),0],de=new Float32Array(16);return l.translate(de,R,ie),de},Qr.prototype.saveTileTexture=function(R){var U=this._tileTextures[R.size[0]];U?U.push(R):this._tileTextures[R.size[0]]=[R]},Qr.prototype.getTileTexture=function(R){var U=this._tileTextures[R];return U&&U.length>0?U.pop():null},Qr.prototype.isPatternMissing=function(R){if(!R)return!1;if(!R.from||!R.to)return!0;var U=this.imageManager.getPattern(R.from.toString()),j=this.imageManager.getPattern(R.to.toString());return!U||!j},Qr.prototype.useProgram=function(R,U){this.cache=this.cache||{};var j=""+R+(U?U.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[j]||(this.cache[j]=new no(this.context,Ya[R],U,xl[R],this._showOverdrawInspector)),this.cache[j]},Qr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Qr.prototype.setBaseState=function(){var R=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(R.FUNC_ADD)},Qr.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var R=this.context.gl;this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,R.RGBA)}},Qr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ao=function(R,U){this.points=R,this.planes=U};Ao.fromInvProjectionMatrix=function(R,U,j){var X=Math.pow(2,j),fe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(F){return l.transformMat4([],F,R)}).map(function(F){return l.scale$1([],F,1/F[3]/U*X)}),Ae=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(F){var $=l.sub([],fe[F[0]],fe[F[1]]),ie=l.sub([],fe[F[2]],fe[F[1]]),de=l.normalize([],l.cross([],$,ie)),xe=-l.dot(de,fe[F[1]]);return de.concat(xe)});return new Ao(fe,Ae)};var lo=function(R,U){this.min=R,this.max=U,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};lo.prototype.quadrant=function(R){for(var U=[R%2==0,R<2],j=l.clone$2(this.min),X=l.clone$2(this.max),fe=0;fe<U.length;fe++)j[fe]=U[fe]?this.min[fe]:this.center[fe],X[fe]=U[fe]?this.center[fe]:this.max[fe];return X[2]=this.max[2],new lo(j,X)},lo.prototype.distanceX=function(R){return Math.max(Math.min(this.max[0],R[0]),this.min[0])-R[0]},lo.prototype.distanceY=function(R){return Math.max(Math.min(this.max[1],R[1]),this.min[1])-R[1]},lo.prototype.intersects=function(R){for(var U=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],j=!0,X=0;X<R.planes.length;X++){for(var fe=R.planes[X],Ae=0,F=0;F<U.length;F++)Ae+=l.dot$1(fe,U[F])>=0;if(Ae===0)return 0;Ae!==U.length&&(j=!1)}if(j)return 2;for(var $=0;$<3;$++){for(var ie=Number.MAX_VALUE,de=-Number.MAX_VALUE,xe=0;xe<R.points.length;xe++){var Le=R.points[xe][$]-this.min[$];ie=Math.min(ie,Le),de=Math.max(de,Le)}if(de<0||ie>this.max[$]-this.min[$])return 0}return 1};var Ni=function(R,U,j,X){if(R===void 0&&(R=0),U===void 0&&(U=0),j===void 0&&(j=0),X===void 0&&(X=0),isNaN(R)||R<0||isNaN(U)||U<0||isNaN(j)||j<0||isNaN(X)||X<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=R,this.bottom=U,this.left=j,this.right=X};Ni.prototype.interpolate=function(R,U,j){return U.top!=null&&R.top!=null&&(this.top=l.number(R.top,U.top,j)),U.bottom!=null&&R.bottom!=null&&(this.bottom=l.number(R.bottom,U.bottom,j)),U.left!=null&&R.left!=null&&(this.left=l.number(R.left,U.left,j)),U.right!=null&&R.right!=null&&(this.right=l.number(R.right,U.right,j)),this},Ni.prototype.getCenter=function(R,U){var j=l.clamp((this.left+R-this.right)/2,0,R),X=l.clamp((this.top+U-this.bottom)/2,0,U);return new l.Point(j,X)},Ni.prototype.equals=function(R){return this.top===R.top&&this.bottom===R.bottom&&this.left===R.left&&this.right===R.right},Ni.prototype.clone=function(){return new Ni(this.top,this.bottom,this.left,this.right)},Ni.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Nr=function(R,U,j,X,fe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=fe===void 0||fe,this._minZoom=R||0,this._maxZoom=U||22,this._minPitch=j??0,this._maxPitch=X??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ni,this._posMatrixCache={},this._alignedPosMatrixCache={}},Hr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Nr.prototype.clone=function(){var R=new Nr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return R.tileSize=this.tileSize,R.latRange=this.latRange,R.width=this.width,R.height=this.height,R._center=this._center,R.zoom=this.zoom,R.angle=this.angle,R._fov=this._fov,R._pitch=this._pitch,R._unmodified=this._unmodified,R._edgeInsets=this._edgeInsets.clone(),R._calcMatrices(),R},Hr.minZoom.get=function(){return this._minZoom},Hr.minZoom.set=function(R){this._minZoom!==R&&(this._minZoom=R,this.zoom=Math.max(this.zoom,R))},Hr.maxZoom.get=function(){return this._maxZoom},Hr.maxZoom.set=function(R){this._maxZoom!==R&&(this._maxZoom=R,this.zoom=Math.min(this.zoom,R))},Hr.minPitch.get=function(){return this._minPitch},Hr.minPitch.set=function(R){this._minPitch!==R&&(this._minPitch=R,this.pitch=Math.max(this.pitch,R))},Hr.maxPitch.get=function(){return this._maxPitch},Hr.maxPitch.set=function(R){this._maxPitch!==R&&(this._maxPitch=R,this.pitch=Math.min(this.pitch,R))},Hr.renderWorldCopies.get=function(){return this._renderWorldCopies},Hr.renderWorldCopies.set=function(R){R===void 0?R=!0:R===null&&(R=!1),this._renderWorldCopies=R},Hr.worldSize.get=function(){return this.tileSize*this.scale},Hr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Hr.size.get=function(){return new l.Point(this.width,this.height)},Hr.bearing.get=function(){return-this.angle/Math.PI*180},Hr.bearing.set=function(R){var U=-l.wrap(R,-180,180)*Math.PI/180;this.angle!==U&&(this._unmodified=!1,this.angle=U,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Hr.pitch.get=function(){return this._pitch/Math.PI*180},Hr.pitch.set=function(R){var U=l.clamp(R,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==U&&(this._unmodified=!1,this._pitch=U,this._calcMatrices())},Hr.fov.get=function(){return this._fov/Math.PI*180},Hr.fov.set=function(R){R=Math.max(.01,Math.min(60,R)),this._fov!==R&&(this._unmodified=!1,this._fov=R/180*Math.PI,this._calcMatrices())},Hr.zoom.get=function(){return this._zoom},Hr.zoom.set=function(R){var U=Math.min(Math.max(R,this.minZoom),this.maxZoom);this._zoom!==U&&(this._unmodified=!1,this._zoom=U,this.scale=this.zoomScale(U),this.tileZoom=Math.floor(U),this.zoomFraction=U-this.tileZoom,this._constrain(),this._calcMatrices())},Hr.center.get=function(){return this._center},Hr.center.set=function(R){R.lat===this._center.lat&&R.lng===this._center.lng||(this._unmodified=!1,this._center=R,this._constrain(),this._calcMatrices())},Hr.padding.get=function(){return this._edgeInsets.toJSON()},Hr.padding.set=function(R){this._edgeInsets.equals(R)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,R,1),this._calcMatrices())},Hr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Nr.prototype.isPaddingEqual=function(R){return this._edgeInsets.equals(R)},Nr.prototype.interpolatePadding=function(R,U,j){this._unmodified=!1,this._edgeInsets.interpolate(R,U,j),this._constrain(),this._calcMatrices()},Nr.prototype.coveringZoomLevel=function(R){var U=(R.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/R.tileSize));return Math.max(0,U)},Nr.prototype.getVisibleUnwrappedCoordinates=function(R){var U=[new l.UnwrappedTileID(0,R)];if(this._renderWorldCopies)for(var j=this.pointCoordinate(new l.Point(0,0)),X=this.pointCoordinate(new l.Point(this.width,0)),fe=this.pointCoordinate(new l.Point(this.width,this.height)),Ae=this.pointCoordinate(new l.Point(0,this.height)),F=Math.floor(Math.min(j.x,X.x,fe.x,Ae.x)),$=Math.floor(Math.max(j.x,X.x,fe.x,Ae.x)),ie=F-1;ie<=$+1;ie++)ie!==0&&U.push(new l.UnwrappedTileID(ie,R));return U},Nr.prototype.coveringTiles=function(R){var U=this.coveringZoomLevel(R),j=U;if(R.minzoom!==void 0&&U<R.minzoom)return[];R.maxzoom!==void 0&&U>R.maxzoom&&(U=R.maxzoom);var X=l.MercatorCoordinate.fromLngLat(this.center),fe=Math.pow(2,U),Ae=[fe*X.x,fe*X.y,0],F=Ao.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,U),$=R.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&($=U);var ie=function(Ht){return{aabb:new lo([Ht*fe,0,0],[(Ht+1)*fe,fe,0]),zoom:0,x:0,y:0,wrap:Ht,fullyVisible:!1}},de=[],xe=[],Le=U,Ne=R.reparseOverscaled?j:U;if(this._renderWorldCopies)for(var Ue=1;Ue<=3;Ue++)de.push(ie(-Ue)),de.push(ie(Ue));for(de.push(ie(0));de.length>0;){var qe=de.pop(),Ye=qe.x,$e=qe.y,lt=qe.fullyVisible;if(!lt){var pt=qe.aabb.intersects(F);if(pt===0)continue;lt=pt===2}var Et=qe.aabb.distanceX(Ae),Ct=qe.aabb.distanceY(Ae),St=Math.max(Math.abs(Et),Math.abs(Ct)),Ft=3+(1<<Le-qe.zoom)-2;if(qe.zoom===Le||St>Ft&&qe.zoom>=$)xe.push({tileID:new l.OverscaledTileID(qe.zoom===Le?Ne:qe.zoom,qe.wrap,qe.zoom,Ye,$e),distanceSq:l.sqrLen([Ae[0]-.5-Ye,Ae[1]-.5-$e])});else for(var Lt=0;Lt<4;Lt++){var tn=(Ye<<1)+Lt%2,Zt=($e<<1)+(Lt>>1);de.push({aabb:qe.aabb.quadrant(Lt),zoom:qe.zoom+1,x:tn,y:Zt,wrap:qe.wrap,fullyVisible:lt})}}return xe.sort(function(Ht,dn){return Ht.distanceSq-dn.distanceSq}).map(function(Ht){return Ht.tileID})},Nr.prototype.resize=function(R,U){this.width=R,this.height=U,this.pixelsToGLUnits=[2/R,-2/U],this._constrain(),this._calcMatrices()},Hr.unmodified.get=function(){return this._unmodified},Nr.prototype.zoomScale=function(R){return Math.pow(2,R)},Nr.prototype.scaleZoom=function(R){return Math.log(R)/Math.LN2},Nr.prototype.project=function(R){var U=l.clamp(R.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(R.lng)*this.worldSize,l.mercatorYfromLat(U)*this.worldSize)},Nr.prototype.unproject=function(R){return new l.MercatorCoordinate(R.x/this.worldSize,R.y/this.worldSize).toLngLat()},Hr.point.get=function(){return this.project(this.center)},Nr.prototype.setLocationAtPoint=function(R,U){var j=this.pointCoordinate(U),X=this.pointCoordinate(this.centerPoint),fe=this.locationCoordinate(R),Ae=new l.MercatorCoordinate(fe.x-(j.x-X.x),fe.y-(j.y-X.y));this.center=this.coordinateLocation(Ae),this._renderWorldCopies&&(this.center=this.center.wrap())},Nr.prototype.locationPoint=function(R){return this.coordinatePoint(this.locationCoordinate(R))},Nr.prototype.pointLocation=function(R){return this.coordinateLocation(this.pointCoordinate(R))},Nr.prototype.locationCoordinate=function(R){return l.MercatorCoordinate.fromLngLat(R)},Nr.prototype.coordinateLocation=function(R){return R.toLngLat()},Nr.prototype.pointCoordinate=function(R){var U=[R.x,R.y,0,1],j=[R.x,R.y,1,1];l.transformMat4(U,U,this.pixelMatrixInverse),l.transformMat4(j,j,this.pixelMatrixInverse);var X=U[3],fe=j[3],Ae=U[0]/X,F=j[0]/fe,$=U[1]/X,ie=j[1]/fe,de=U[2]/X,xe=j[2]/fe,Le=de===xe?0:(0-de)/(xe-de);return new l.MercatorCoordinate(l.number(Ae,F,Le)/this.worldSize,l.number($,ie,Le)/this.worldSize)},Nr.prototype.coordinatePoint=function(R){var U=[R.x*this.worldSize,R.y*this.worldSize,0,1];return l.transformMat4(U,U,this.pixelMatrix),new l.Point(U[0]/U[3],U[1]/U[3])},Nr.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},Nr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Nr.prototype.setMaxBounds=function(R){R?(this.lngRange=[R.getWest(),R.getEast()],this.latRange=[R.getSouth(),R.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Nr.prototype.calculatePosMatrix=function(R,U){U===void 0&&(U=!1);var j=R.key,X=U?this._alignedPosMatrixCache:this._posMatrixCache;if(X[j])return X[j];var fe=R.canonical,Ae=this.worldSize/this.zoomScale(fe.z),F=fe.x+Math.pow(2,fe.z)*R.wrap,$=l.identity(new Float64Array(16));return l.translate($,$,[F*Ae,fe.y*Ae,0]),l.scale($,$,[Ae/l.EXTENT,Ae/l.EXTENT,1]),l.multiply($,U?this.alignedProjMatrix:this.projMatrix,$),X[j]=new Float32Array($),X[j]},Nr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Nr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var R,U,j,X,fe=-90,Ae=90,F=-180,$=180,ie=this.size,de=this._unmodified;if(this.latRange){var xe=this.latRange;fe=l.mercatorYfromLat(xe[1])*this.worldSize,R=(Ae=l.mercatorYfromLat(xe[0])*this.worldSize)-fe<ie.y?ie.y/(Ae-fe):0}if(this.lngRange){var Le=this.lngRange;F=l.mercatorXfromLng(Le[0])*this.worldSize,U=($=l.mercatorXfromLng(Le[1])*this.worldSize)-F<ie.x?ie.x/($-F):0}var Ne=this.point,Ue=Math.max(U||0,R||0);if(Ue)return this.center=this.unproject(new l.Point(U?($+F)/2:Ne.x,R?(Ae+fe)/2:Ne.y)),this.zoom+=this.scaleZoom(Ue),this._unmodified=de,void(this._constraining=!1);if(this.latRange){var qe=Ne.y,Ye=ie.y/2;qe-Ye<fe&&(X=fe+Ye),qe+Ye>Ae&&(X=Ae-Ye)}if(this.lngRange){var $e=Ne.x,lt=ie.x/2;$e-lt<F&&(j=F+lt),$e+lt>$&&(j=$-lt)}j===void 0&&X===void 0||(this.center=this.unproject(new l.Point(j!==void 0?j:Ne.x,X!==void 0?X:Ne.y))),this._unmodified=de,this._constraining=!1}},Nr.prototype._calcMatrices=function(){if(this.height){var R=this._fov/2,U=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(R)*this.height;var j=Math.PI/2+this._pitch,X=this._fov*(.5+U.y/this.height),fe=Math.sin(X)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-j-X,.01,Math.PI-.01)),Ae=this.point,F=Ae.x,$=Ae.y,ie=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+this.cameraToCenterDistance),de=this.height/50,xe=new Float64Array(16);l.perspective(xe,this._fov,this.width/this.height,de,ie),xe[8]=2*-U.x/this.width,xe[9]=2*U.y/this.height,l.scale(xe,xe,[1,-1,1]),l.translate(xe,xe,[0,0,-this.cameraToCenterDistance]),l.rotateX(xe,xe,this._pitch),l.rotateZ(xe,xe,this.angle),l.translate(xe,xe,[-F,-$,0]),this.mercatorMatrix=l.scale([],xe,[this.worldSize,this.worldSize,this.worldSize]),l.scale(xe,xe,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=xe,this.invProjMatrix=l.invert([],this.projMatrix);var Le=this.width%2/2,Ne=this.height%2/2,Ue=Math.cos(this.angle),qe=Math.sin(this.angle),Ye=F-Math.round(F)+Ue*Le+qe*Ne,$e=$-Math.round($)+Ue*Ne+qe*Le,lt=new Float64Array(xe);if(l.translate(lt,lt,[Ye>.5?Ye-1:Ye,$e>.5?$e-1:$e,0]),this.alignedProjMatrix=lt,xe=l.create(),l.scale(xe,xe,[this.width/2,-this.height/2,1]),l.translate(xe,xe,[1,-1,0]),this.labelPlaneMatrix=xe,xe=l.create(),l.scale(xe,xe,[1,-1,1]),l.translate(xe,xe,[-1,-1,0]),l.scale(xe,xe,[2/this.width,2/this.height,1]),this.glCoordMatrix=xe,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(xe=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=xe,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Nr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var R=this.pointCoordinate(new l.Point(0,0)),U=[R.x*this.worldSize,R.y*this.worldSize,0,1];return l.transformMat4(U,U,this.pixelMatrix)[3]/this.cameraToCenterDistance},Nr.prototype.getCameraPoint=function(){var R=this._pitch,U=Math.tan(R)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,U))},Nr.prototype.getCameraQueryGeometry=function(R){var U=this.getCameraPoint();if(R.length===1)return[R[0],U];for(var j=U.x,X=U.y,fe=U.x,Ae=U.y,F=0,$=R;F<$.length;F+=1){var ie=$[F];j=Math.min(j,ie.x),X=Math.min(X,ie.y),fe=Math.max(fe,ie.x),Ae=Math.max(Ae,ie.y)}return[new l.Point(j,X),new l.Point(fe,X),new l.Point(fe,Ae),new l.Point(j,Ae),new l.Point(j,X)]},Object.defineProperties(Nr.prototype,Hr);var Mo=function(R){var U,j,X,fe,Ae;this._hashName=R&&encodeURIComponent(R),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(U=this._updateHashUnthrottled.bind(this),j=300,X=!1,fe=null,Ae=function(){fe=null,X&&(U(),fe=setTimeout(Ae,j),X=!1)},function(){return X=!0,fe||Ae(),fe})};Mo.prototype.addTo=function(R){return this._map=R,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Mo.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Mo.prototype.getHashString=function(R){var U=this._map.getCenter(),j=Math.round(100*this._map.getZoom())/100,X=Math.ceil((j*Math.LN2+Math.log(512/360/.5))/Math.LN10),fe=Math.pow(10,X),Ae=Math.round(U.lng*fe)/fe,F=Math.round(U.lat*fe)/fe,$=this._map.getBearing(),ie=this._map.getPitch(),de="";if(de+=R?"/"+Ae+"/"+F+"/"+j:j+"/"+F+"/"+Ae,($||ie)&&(de+="/"+Math.round(10*$)/10),ie&&(de+="/"+Math.round(ie)),this._hashName){var xe=this._hashName,Le=!1,Ne=l.window.location.hash.slice(1).split("&").map(function(Ue){var qe=Ue.split("=")[0];return qe===xe?(Le=!0,qe+"="+de):Ue}).filter(function(Ue){return Ue});return Le||Ne.push(xe+"="+de),"#"+Ne.join("&")}return"#"+de},Mo.prototype._getCurrentHash=function(){var R,U=this,j=l.window.location.hash.replace("#","");return this._hashName?(j.split("&").map(function(X){return X.split("=")}).forEach(function(X){X[0]===U._hashName&&(R=X)}),(R&&R[1]||"").split("/")):j.split("/")},Mo.prototype._onHashChange=function(){var R=this._getCurrentHash();if(R.length>=3&&!R.some(function(j){return isNaN(j)})){var U=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(R[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+R[2],+R[1]],zoom:+R[0],bearing:U,pitch:+(R[4]||0)}),!0}return!1},Mo.prototype._updateHashUnthrottled=function(){var R=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",R)}catch{}};var uo={linearity:.3,easing:l.bezier(0,0,.3,1)},Js=l.extend({deceleration:2500,maxSpeed:1400},uo),xs=l.extend({deceleration:20,maxSpeed:1400},uo),So=l.extend({deceleration:1e3,maxSpeed:360},uo),bs=l.extend({deceleration:1e3,maxSpeed:90},uo),co=function(R){this._map=R,this.clear()};function Go(R,U){(!R.duration||R.duration<U.duration)&&(R.duration=U.duration,R.easing=U.easing)}function Eo(R,U,j){var X=j.maxSpeed,fe=j.linearity,Ae=j.deceleration,F=l.clamp(R*fe/(U/1e3),-X,X),$=Math.abs(F)/(Ae*fe);return{easing:j.easing,duration:1e3*$,amount:F*($/2)}}co.prototype.clear=function(){this._inertiaBuffer=[]},co.prototype.record=function(R){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:R})},co.prototype._drainInertiaBuffer=function(){for(var R=this._inertiaBuffer,U=l.browser.now();R.length>0&&U-R[0].time>160;)R.shift()},co.prototype._onMoveEnd=function(R){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var U={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},j=0,X=this._inertiaBuffer;j<X.length;j+=1){var fe=X[j].settings;U.zoom+=fe.zoomDelta||0,U.bearing+=fe.bearingDelta||0,U.pitch+=fe.pitchDelta||0,fe.panDelta&&U.pan._add(fe.panDelta),fe.around&&(U.around=fe.around),fe.pinchAround&&(U.pinchAround=fe.pinchAround)}var Ae=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,F={};if(U.pan.mag()){var $=Eo(U.pan.mag(),Ae,l.extend({},Js,R||{}));F.offset=U.pan.mult($.amount/U.pan.mag()),F.center=this._map.transform.center,Go(F,$)}if(U.zoom){var ie=Eo(U.zoom,Ae,xs);F.zoom=this._map.transform.zoom+ie.amount,Go(F,ie)}if(U.bearing){var de=Eo(U.bearing,Ae,So);F.bearing=this._map.transform.bearing+l.clamp(de.amount,-179,179),Go(F,de)}if(U.pitch){var xe=Eo(U.pitch,Ae,bs);F.pitch=this._map.transform.pitch+xe.amount,Go(F,xe)}if(F.zoom||F.bearing){var Le=U.pinchAround===void 0?U.around:U.pinchAround;F.around=Le?this._map.unproject(Le):this._map.getCenter()}return this.clear(),l.extend(F,{noMoveStart:!0})}};var di=function(R){function U(X,fe,Ae,F){F===void 0&&(F={});var $=b.mousePos(fe.getCanvasContainer(),Ae),ie=fe.unproject($);R.call(this,X,l.extend({point:$,lngLat:ie,originalEvent:Ae},F)),this._defaultPrevented=!1,this.target=fe}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={defaultPrevented:{configurable:!0}};return U.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(U.prototype,j),U}(l.Event),Zo=function(R){function U(X,fe,Ae){var F=X==="touchend"?Ae.changedTouches:Ae.touches,$=b.touchPos(fe.getCanvasContainer(),F),ie=$.map(function(Le){return fe.unproject(Le)}),de=$.reduce(function(Le,Ne,Ue,qe){return Le.add(Ne.div(qe.length))},new l.Point(0,0)),xe=fe.unproject(de);R.call(this,X,{points:$,point:de,lngLats:ie,lngLat:xe,originalEvent:Ae}),this._defaultPrevented=!1}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={defaultPrevented:{configurable:!0}};return U.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(U.prototype,j),U}(l.Event),Yo=function(R){function U(X,fe,Ae){R.call(this,X,{originalEvent:Ae}),this._defaultPrevented=!1}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={defaultPrevented:{configurable:!0}};return U.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(U.prototype,j),U}(l.Event),Pi=function(R,U){this._map=R,this._clickTolerance=U.clickTolerance};Pi.prototype.reset=function(){delete this._mousedownPos},Pi.prototype.wheel=function(R){return this._firePreventable(new Yo(R.type,this._map,R))},Pi.prototype.mousedown=function(R,U){return this._mousedownPos=U,this._firePreventable(new di(R.type,this._map,R))},Pi.prototype.mouseup=function(R){this._map.fire(new di(R.type,this._map,R))},Pi.prototype.click=function(R,U){this._mousedownPos&&this._mousedownPos.dist(U)>=this._clickTolerance||this._map.fire(new di(R.type,this._map,R))},Pi.prototype.dblclick=function(R){return this._firePreventable(new di(R.type,this._map,R))},Pi.prototype.mouseover=function(R){this._map.fire(new di(R.type,this._map,R))},Pi.prototype.mouseout=function(R){this._map.fire(new di(R.type,this._map,R))},Pi.prototype.touchstart=function(R){return this._firePreventable(new Zo(R.type,this._map,R))},Pi.prototype.touchmove=function(R){this._map.fire(new Zo(R.type,this._map,R))},Pi.prototype.touchend=function(R){this._map.fire(new Zo(R.type,this._map,R))},Pi.prototype.touchcancel=function(R){this._map.fire(new Zo(R.type,this._map,R))},Pi.prototype._firePreventable=function(R){if(this._map.fire(R),R.defaultPrevented)return{}},Pi.prototype.isEnabled=function(){return!0},Pi.prototype.isActive=function(){return!1},Pi.prototype.enable=function(){},Pi.prototype.disable=function(){};var Ji=function(R){this._map=R};Ji.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ji.prototype.mousemove=function(R){this._map.fire(new di(R.type,this._map,R))},Ji.prototype.mousedown=function(){this._delayContextMenu=!0},Ji.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ji.prototype.contextmenu=function(R){this._delayContextMenu?this._contextMenuEvent=R:this._map.fire(new di(R.type,this._map,R)),this._map.listens("contextmenu")&&R.preventDefault()},Ji.prototype.isEnabled=function(){return!0},Ji.prototype.isActive=function(){return!1},Ji.prototype.enable=function(){},Ji.prototype.disable=function(){};var Zi=function(R,U){this._map=R,this._el=R.getCanvasContainer(),this._container=R.getContainer(),this._clickTolerance=U.clickTolerance||1};function Oi(R,U){for(var j={},X=0;X<R.length;X++)j[R[X].identifier]=U[X];return j}Zi.prototype.isEnabled=function(){return!!this._enabled},Zi.prototype.isActive=function(){return!!this._active},Zi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Zi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Zi.prototype.mousedown=function(R,U){this.isEnabled()&&R.shiftKey&&R.button===0&&(b.disableDrag(),this._startPos=this._lastPos=U,this._active=!0)},Zi.prototype.mousemoveWindow=function(R,U){if(this._active){var j=U;if(!(this._lastPos.equals(j)||!this._box&&j.dist(this._startPos)<this._clickTolerance)){var X=this._startPos;this._lastPos=j,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",R));var fe=Math.min(X.x,j.x),Ae=Math.max(X.x,j.x),F=Math.min(X.y,j.y),$=Math.max(X.y,j.y);b.setTransform(this._box,"translate("+fe+"px,"+F+"px)"),this._box.style.width=Ae-fe+"px",this._box.style.height=$-F+"px"}}},Zi.prototype.mouseupWindow=function(R,U){var j=this;if(this._active&&R.button===0){var X=this._startPos,fe=U;if(this.reset(),b.suppressClick(),X.x!==fe.x||X.y!==fe.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:R})),{cameraAnimation:function(Ae){return Ae.fitScreenCoordinates(X,fe,j._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",R)}},Zi.prototype.keydown=function(R){this._active&&R.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",R))},Zi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},Zi.prototype._fireEvent=function(R,U){return this._map.fire(new l.Event(R,{originalEvent:U}))};var ra=function(R){this.reset(),this.numTouches=R.numTouches};ra.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ra.prototype.touchstart=function(R,U,j){(this.centroid||j.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=R.timeStamp),j.length===this.numTouches&&(this.centroid=function(X){for(var fe=new l.Point(0,0),Ae=0,F=X;Ae<F.length;Ae+=1){var $=F[Ae];fe._add($)}return fe.div(X.length)}(U),this.touches=Oi(j,U)))},ra.prototype.touchmove=function(R,U,j){if(!this.aborted&&this.centroid){var X=Oi(j,U);for(var fe in this.touches){var Ae=this.touches[fe],F=X[fe];(!F||F.dist(Ae)>30)&&(this.aborted=!0)}}},ra.prototype.touchend=function(R,U,j){if((!this.centroid||R.timeStamp-this.startTime>500)&&(this.aborted=!0),j.length===0){var X=!this.aborted&&this.centroid;if(this.reset(),X)return X}};var Lo=function(R){this.singleTap=new ra(R),this.numTaps=R.numTaps,this.reset()};Lo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Lo.prototype.touchstart=function(R,U,j){this.singleTap.touchstart(R,U,j)},Lo.prototype.touchmove=function(R,U,j){this.singleTap.touchmove(R,U,j)},Lo.prototype.touchend=function(R,U,j){var X=this.singleTap.touchend(R,U,j);if(X){var fe=R.timeStamp-this.lastTime<500,Ae=!this.lastTap||this.lastTap.dist(X)<30;if(fe&&Ae||this.reset(),this.count++,this.lastTime=R.timeStamp,this.lastTap=X,this.count===this.numTaps)return this.reset(),X}};var Ra=function(){this._zoomIn=new Lo({numTouches:1,numTaps:2}),this._zoomOut=new Lo({numTouches:2,numTaps:1}),this.reset()};Ra.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ra.prototype.touchstart=function(R,U,j){this._zoomIn.touchstart(R,U,j),this._zoomOut.touchstart(R,U,j)},Ra.prototype.touchmove=function(R,U,j){this._zoomIn.touchmove(R,U,j),this._zoomOut.touchmove(R,U,j)},Ra.prototype.touchend=function(R,U,j){var X=this,fe=this._zoomIn.touchend(R,U,j),Ae=this._zoomOut.touchend(R,U,j);return fe?(this._active=!0,R.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(F){return F.easeTo({duration:300,zoom:F.getZoom()+1,around:F.unproject(fe)},{originalEvent:R})}}):Ae?(this._active=!0,R.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(F){return F.easeTo({duration:300,zoom:F.getZoom()-1,around:F.unproject(Ae)},{originalEvent:R})}}):void 0},Ra.prototype.touchcancel=function(){this.reset()},Ra.prototype.enable=function(){this._enabled=!0},Ra.prototype.disable=function(){this._enabled=!1,this.reset()},Ra.prototype.isEnabled=function(){return this._enabled},Ra.prototype.isActive=function(){return this._active};var ji=function(R){this.reset(),this._clickTolerance=R.clickTolerance||1};ji.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ji.prototype._correctButton=function(R,U){return!1},ji.prototype._move=function(R,U){return{}},ji.prototype.mousedown=function(R,U){if(!this._lastPoint){var j=b.mouseButton(R);this._correctButton(R,j)&&(this._lastPoint=U,this._eventButton=j)}},ji.prototype.mousemoveWindow=function(R,U){var j=this._lastPoint;if(j&&(R.preventDefault(),this._moved||!(U.dist(j)<this._clickTolerance)))return this._moved=!0,this._lastPoint=U,this._move(j,U)},ji.prototype.mouseupWindow=function(R){b.mouseButton(R)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},ji.prototype.enable=function(){this._enabled=!0},ji.prototype.disable=function(){this._enabled=!1,this.reset()},ji.prototype.isEnabled=function(){return this._enabled},ji.prototype.isActive=function(){return this._active};var _a=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.mousedown=function(j,X){R.prototype.mousedown.call(this,j,X),this._lastPoint&&(this._active=!0)},U.prototype._correctButton=function(j,X){return X===0&&!j.ctrlKey},U.prototype._move=function(j,X){return{around:X,panDelta:X.sub(j)}},U}(ji),Sa=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype._correctButton=function(j,X){return X===0&&j.ctrlKey||X===2},U.prototype._move=function(j,X){var fe=.8*(X.x-j.x);if(fe)return this._active=!0,{bearingDelta:fe}},U.prototype.contextmenu=function(j){j.preventDefault()},U}(ji),Fs=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype._correctButton=function(j,X){return X===0&&j.ctrlKey||X===2},U.prototype._move=function(j,X){var fe=-.5*(X.y-j.y);if(fe)return this._active=!0,{pitchDelta:fe}},U.prototype.contextmenu=function(j){j.preventDefault()},U}(ji),Ea=function(R){this._minTouches=1,this._clickTolerance=R.clickTolerance||1,this.reset()};Ea.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},Ea.prototype.touchstart=function(R,U,j){return this._calculateTransform(R,U,j)},Ea.prototype.touchmove=function(R,U,j){if(this._active)return R.preventDefault(),this._calculateTransform(R,U,j)},Ea.prototype.touchend=function(R,U,j){this._calculateTransform(R,U,j),this._active&&j.length<this._minTouches&&this.reset()},Ea.prototype.touchcancel=function(){this.reset()},Ea.prototype._calculateTransform=function(R,U,j){j.length>0&&(this._active=!0);var X=Oi(j,U),fe=new l.Point(0,0),Ae=new l.Point(0,0),F=0;for(var $ in X){var ie=X[$],de=this._touches[$];de&&(fe._add(ie),Ae._add(ie.sub(de)),F++,X[$]=ie)}if(this._touches=X,!(F<this._minTouches)&&Ae.mag()){var xe=Ae.div(F);if(this._sum._add(xe),!(this._sum.mag()<this._clickTolerance))return{around:fe.div(F),panDelta:xe}}},Ea.prototype.enable=function(){this._enabled=!0},Ea.prototype.disable=function(){this._enabled=!1,this.reset()},Ea.prototype.isEnabled=function(){return this._enabled},Ea.prototype.isActive=function(){return this._active};var Ui=function(){this.reset()};function xr(R,U,j){for(var X=0;X<R.length;X++)if(R[X].identifier===j)return U[X]}Ui.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ui.prototype._start=function(R){},Ui.prototype._move=function(R,U,j){return{}},Ui.prototype.touchstart=function(R,U,j){this._firstTwoTouches||j.length<2||(this._firstTwoTouches=[j[0].identifier,j[1].identifier],this._start([U[0],U[1]]))},Ui.prototype.touchmove=function(R,U,j){if(this._firstTwoTouches){R.preventDefault();var X=this._firstTwoTouches,fe=X[0],Ae=X[1],F=xr(j,U,fe),$=xr(j,U,Ae);if(F&&$){var ie=this._aroundCenter?null:F.add($).div(2);return this._move([F,$],ie,R)}}},Ui.prototype.touchend=function(R,U,j){if(this._firstTwoTouches){var X=this._firstTwoTouches,fe=X[0],Ae=X[1],F=xr(j,U,fe),$=xr(j,U,Ae);F&&$||(this._active&&b.suppressClick(),this.reset())}},Ui.prototype.touchcancel=function(){this.reset()},Ui.prototype.enable=function(R){this._enabled=!0,this._aroundCenter=!!R&&R.around==="center"},Ui.prototype.disable=function(){this._enabled=!1,this.reset()},Ui.prototype.isEnabled=function(){return this._enabled},Ui.prototype.isActive=function(){return this._active};function Ki(R,U){return Math.log(R/U)/Math.LN2}var _s=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.reset=function(){R.prototype.reset.call(this),delete this._distance,delete this._startDistance},U.prototype._start=function(j){this._startDistance=this._distance=j[0].dist(j[1])},U.prototype._move=function(j,X){var fe=this._distance;if(this._distance=j[0].dist(j[1]),this._active||!(Math.abs(Ki(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ki(this._distance,fe),pinchAround:X}},U}(Ui);function Bs(R,U){return 180*R.angleWith(U)/Math.PI}var Wo=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.reset=function(){R.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},U.prototype._start=function(j){this._startVector=this._vector=j[0].sub(j[1]),this._minDiameter=j[0].dist(j[1])},U.prototype._move=function(j,X){var fe=this._vector;if(this._vector=j[0].sub(j[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Bs(this._vector,fe),pinchAround:X}},U.prototype._isBelowThreshold=function(j){this._minDiameter=Math.min(this._minDiameter,j.mag());var X=25/(Math.PI*this._minDiameter)*360,fe=Bs(j,this._startVector);return Math.abs(fe)<X},U}(Ui);function Xo(R){return Math.abs(R.y)>Math.abs(R.x)}var fo=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.reset=function(){R.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},U.prototype._start=function(j){this._lastPoints=j,Xo(j[0].sub(j[1]))&&(this._valid=!1)},U.prototype._move=function(j,X,fe){var Ae=j[0].sub(this._lastPoints[0]),F=j[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ae,F,fe.timeStamp),this._valid)return this._lastPoints=j,this._active=!0,{pitchDelta:(Ae.y+F.y)/2*-.5}},U.prototype.gestureBeginsVertically=function(j,X,fe){if(this._valid!==void 0)return this._valid;var Ae=j.mag()>=2,F=X.mag()>=2;if(Ae||F){if(!Ae||!F)return this._firstMove===void 0&&(this._firstMove=fe),fe-this._firstMove<100&&void 0;var $=j.y>0==X.y>0;return Xo(j)&&Xo(X)&&$}},U}(Ui),vr={panStep:100,bearingStep:15,pitchStep:10},Fa=function(){var R=vr;this._panStep=R.panStep,this._bearingStep=R.bearingStep,this._pitchStep=R.pitchStep};function os(R){return R*(2-R)}Fa.prototype.reset=function(){this._active=!1},Fa.prototype.keydown=function(R){var U=this;if(!(R.altKey||R.ctrlKey||R.metaKey)){var j=0,X=0,fe=0,Ae=0,F=0;switch(R.keyCode){case 61:case 107:case 171:case 187:j=1;break;case 189:case 109:case 173:j=-1;break;case 37:R.shiftKey?X=-1:(R.preventDefault(),Ae=-1);break;case 39:R.shiftKey?X=1:(R.preventDefault(),Ae=1);break;case 38:R.shiftKey?fe=1:(R.preventDefault(),F=-1);break;case 40:R.shiftKey?fe=-1:(R.preventDefault(),F=1);break;default:return}return{cameraAnimation:function($){var ie=$.getZoom();$.easeTo({duration:300,easeId:"keyboardHandler",easing:os,zoom:j?Math.round(ie)+j*(R.shiftKey?2:1):ie,bearing:$.getBearing()+X*U._bearingStep,pitch:$.getPitch()+fe*U._pitchStep,offset:[-Ae*U._panStep,-F*U._panStep],center:$.getCenter()},{originalEvent:R})}}}},Fa.prototype.enable=function(){this._enabled=!0},Fa.prototype.disable=function(){this._enabled=!1,this.reset()},Fa.prototype.isEnabled=function(){return this._enabled},Fa.prototype.isActive=function(){return this._active};var ws=4.000244140625,$i=function(R,U){this._map=R,this._el=R.getCanvasContainer(),this._handler=U,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};$i.prototype.setZoomRate=function(R){this._defaultZoomRate=R},$i.prototype.setWheelZoomRate=function(R){this._wheelZoomRate=R},$i.prototype.isEnabled=function(){return!!this._enabled},$i.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},$i.prototype.isZooming=function(){return!!this._zooming},$i.prototype.enable=function(R){this.isEnabled()||(this._enabled=!0,this._aroundCenter=R&&R.around==="center")},$i.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$i.prototype.wheel=function(R){if(this.isEnabled()){var U=R.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*R.deltaY:R.deltaY,j=l.browser.now(),X=j-(this._lastWheelEventTime||0);this._lastWheelEventTime=j,U!==0&&U%ws==0?this._type="wheel":U!==0&&Math.abs(U)<4?this._type="trackpad":X>400?(this._type=null,this._lastValue=U,this._timeout=setTimeout(this._onTimeout,40,R)):this._type||(this._type=Math.abs(X*U)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,U+=this._lastValue)),R.shiftKey&&U&&(U/=4),this._type&&(this._lastWheelEvent=R,this._delta-=U,this._active||this._start(R)),R.preventDefault()}},$i.prototype._onTimeout=function(R){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(R)},$i.prototype._start=function(R){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var U=b.mousePos(this._el,R);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(U)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},$i.prototype.renderFrame=function(){return this._onScrollFrame()},$i.prototype._onScrollFrame=function(){var R=this;if(this._frameId&&(this._frameId=null,this.isActive())){var U=this._map.transform;if(this._delta!==0){var j=this._type==="wheel"&&Math.abs(this._delta)>ws?this._wheelZoomRate:this._defaultZoomRate,X=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&X!==0&&(X=1/X);var fe=typeof this._targetZoom=="number"?U.zoomScale(this._targetZoom):U.scale;this._targetZoom=Math.min(U.maxZoom,Math.max(U.minZoom,U.scaleZoom(fe*X))),this._type==="wheel"&&(this._startZoom=U.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Ae,F=typeof this._targetZoom=="number"?this._targetZoom:U.zoom,$=this._startZoom,ie=this._easing,de=!1;if(this._type==="wheel"&&$&&ie){var xe=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),Le=ie(xe);Ae=l.number($,F,Le),xe<1?this._frameId||(this._frameId=!0):de=!0}else Ae=F,de=!0;return this._active=!0,de&&(this._active=!1,this._finishTimeout=setTimeout(function(){R._zooming=!1,R._handler._triggerRenderFrame(),delete R._targetZoom,delete R._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!de,zoomDelta:Ae-U.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},$i.prototype._smoothOutEasing=function(R){var U=l.ease;if(this._prevEase){var j=this._prevEase,X=(l.browser.now()-j.start)/j.duration,fe=j.easing(X+.01)-j.easing(X),Ae=.27/Math.sqrt(fe*fe+1e-4)*.01,F=Math.sqrt(.0729-Ae*Ae);U=l.bezier(Ae,F,.25,1)}return this._prevEase={start:l.browser.now(),duration:R,easing:U},U},$i.prototype.reset=function(){this._active=!1};var Ba=function(R,U){this._clickZoom=R,this._tapZoom=U};Ba.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ba.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ba.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ba.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var La=function(){this.reset()};La.prototype.reset=function(){this._active=!1},La.prototype.dblclick=function(R,U){return R.preventDefault(),{cameraAnimation:function(j){j.easeTo({duration:300,zoom:j.getZoom()+(R.shiftKey?-1:1),around:j.unproject(U)},{originalEvent:R})}}},La.prototype.enable=function(){this._enabled=!0},La.prototype.disable=function(){this._enabled=!1,this.reset()},La.prototype.isEnabled=function(){return this._enabled},La.prototype.isActive=function(){return this._active};var wa=function(){this._tap=new Lo({numTouches:1,numTaps:1}),this.reset()};wa.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},wa.prototype.touchstart=function(R,U,j){this._swipePoint||(this._tapTime&&R.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?j.length>0&&(this._swipePoint=U[0],this._swipeTouch=j[0].identifier):this._tap.touchstart(R,U,j))},wa.prototype.touchmove=function(R,U,j){if(this._tapTime){if(this._swipePoint){if(j[0].identifier!==this._swipeTouch)return;var X=U[0],fe=X.y-this._swipePoint.y;return this._swipePoint=X,R.preventDefault(),this._active=!0,{zoomDelta:fe/128}}}else this._tap.touchmove(R,U,j)},wa.prototype.touchend=function(R,U,j){this._tapTime?this._swipePoint&&j.length===0&&this.reset():this._tap.touchend(R,U,j)&&(this._tapTime=R.timeStamp)},wa.prototype.touchcancel=function(){this.reset()},wa.prototype.enable=function(){this._enabled=!0},wa.prototype.disable=function(){this._enabled=!1,this.reset()},wa.prototype.isEnabled=function(){return this._enabled},wa.prototype.isActive=function(){return this._active};var Xa=function(R,U,j){this._el=R,this._mousePan=U,this._touchPan=j};Xa.prototype.enable=function(R){this._inertiaOptions=R||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Xa.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Xa.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Xa.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ho=function(R,U,j){this._pitchWithRotate=R.pitchWithRotate,this._mouseRotate=U,this._mousePitch=j};ho.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ho.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ho.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ho.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ii=function(R,U,j,X){this._el=R,this._touchZoom=U,this._touchRotate=j,this._tapDragZoom=X,this._rotationDisabled=!1,this._enabled=!0};Ii.prototype.enable=function(R){this._touchZoom.enable(R),this._rotationDisabled||this._touchRotate.enable(R),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ii.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ii.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ii.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ii.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ii.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Jo=function(R){return R.zoom||R.drag||R.pitch||R.rotate},ss=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U}(l.Event);function Vi(R){return R.panDelta&&R.panDelta.mag()||R.zoomDelta||R.bearingDelta||R.pitchDelta}var ei=function(R,U){this._map=R,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new co(R),this._bearingSnap=U.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(U),l.bindAll(["handleEvent","handleWindowEvent"],this);var j=this._el;this._listeners=[[j,"touchstart",{passive:!1}],[j,"touchmove",{passive:!1}],[j,"touchend",void 0],[j,"touchcancel",void 0],[j,"mousedown",void 0],[j,"mousemove",void 0],[j,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[j,"mouseover",void 0],[j,"mouseout",void 0],[j,"dblclick",void 0],[j,"click",void 0],[j,"keydown",{capture:!1}],[j,"keyup",void 0],[j,"wheel",{passive:!1}],[j,"contextmenu",void 0],[l.window,"blur",void 0]];for(var X=0,fe=this._listeners;X<fe.length;X+=1){var Ae=fe[X],F=Ae[0],$=Ae[1],ie=Ae[2];b.addEventListener(F,$,F===l.window.document?this.handleWindowEvent:this.handleEvent,ie)}};ei.prototype.destroy=function(){for(var R=0,U=this._listeners;R<U.length;R+=1){var j=U[R],X=j[0],fe=j[1],Ae=j[2];b.removeEventListener(X,fe,X===l.window.document?this.handleWindowEvent:this.handleEvent,Ae)}},ei.prototype._addDefaultHandlers=function(R){var U=this._map,j=U.getCanvasContainer();this._add("mapEvent",new Pi(U,R));var X=U.boxZoom=new Zi(U,R);this._add("boxZoom",X);var fe=new Ra,Ae=new La;U.doubleClickZoom=new Ba(Ae,fe),this._add("tapZoom",fe),this._add("clickZoom",Ae);var F=new wa;this._add("tapDragZoom",F);var $=U.touchPitch=new fo;this._add("touchPitch",$);var ie=new Sa(R),de=new Fs(R);U.dragRotate=new ho(R,ie,de),this._add("mouseRotate",ie,["mousePitch"]),this._add("mousePitch",de,["mouseRotate"]);var xe=new _a(R),Le=new Ea(R);U.dragPan=new Xa(j,xe,Le),this._add("mousePan",xe),this._add("touchPan",Le,["touchZoom","touchRotate"]);var Ne=new Wo,Ue=new _s;U.touchZoomRotate=new Ii(j,Ue,Ne,F),this._add("touchRotate",Ne,["touchPan","touchZoom"]),this._add("touchZoom",Ue,["touchPan","touchRotate"]);var qe=U.scrollZoom=new $i(U,this);this._add("scrollZoom",qe,["mousePan"]);var Ye=U.keyboard=new Fa;this._add("keyboard",Ye),this._add("blockableMapEvent",new Ji(U));for(var $e=0,lt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];$e<lt.length;$e+=1){var pt=lt[$e];R.interactive&&R[pt]&&U[pt].enable(R[pt])}},ei.prototype._add=function(R,U,j){this._handlers.push({handlerName:R,handler:U,allowed:j}),this._handlersById[R]=U},ei.prototype.stop=function(){if(!this._updatingCamera){for(var R=0,U=this._handlers;R<U.length;R+=1)U[R].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ei.prototype.isActive=function(){for(var R=0,U=this._handlers;R<U.length;R+=1)if(U[R].handler.isActive())return!0;return!1},ei.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ei.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ei.prototype.isMoving=function(){return!!Jo(this._eventsInProgress)||this.isZooming()},ei.prototype._blockedByActive=function(R,U,j){for(var X in R)if(X!==j&&(!U||U.indexOf(X)<0))return!0;return!1},ei.prototype.handleWindowEvent=function(R){this.handleEvent(R,R.type+"Window")},ei.prototype._getMapTouches=function(R){for(var U=[],j=0,X=R;j<X.length;j+=1){var fe=X[j],Ae=fe.target;this._el.contains(Ae)&&U.push(fe)}return U},ei.prototype.handleEvent=function(R,U){if(R.type!=="blur"){this._updatingCamera=!0;for(var j=R.type==="renderFrame"?void 0:R,X={needsRenderFrame:!1},fe={},Ae={},F=R.touches?this._getMapTouches(R.touches):void 0,$=F?b.touchPos(this._el,F):b.mousePos(this._el,R),ie=0,de=this._handlers;ie<de.length;ie+=1){var xe=de[ie],Le=xe.handlerName,Ne=xe.handler,Ue=xe.allowed;if(Ne.isEnabled()){var qe=void 0;this._blockedByActive(Ae,Ue,Le)?Ne.reset():Ne[U||R.type]&&(qe=Ne[U||R.type](R,$,F),this.mergeHandlerResult(X,fe,qe,Le,j),qe&&qe.needsRenderFrame&&this._triggerRenderFrame()),(qe||Ne.isActive())&&(Ae[Le]=Ne)}}var Ye={};for(var $e in this._previousActiveHandlers)Ae[$e]||(Ye[$e]=j);this._previousActiveHandlers=Ae,(Object.keys(Ye).length||Vi(X))&&(this._changes.push([X,fe,Ye]),this._triggerRenderFrame()),(Object.keys(Ae).length||Vi(X))&&this._map._stop(!0),this._updatingCamera=!1;var lt=X.cameraAnimation;lt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],lt(this._map))}else this.stop()},ei.prototype.mergeHandlerResult=function(R,U,j,X,fe){if(j){l.extend(R,j);var Ae={handlerName:X,originalEvent:j.originalEvent||fe};j.zoomDelta!==void 0&&(U.zoom=Ae),j.panDelta!==void 0&&(U.drag=Ae),j.pitchDelta!==void 0&&(U.pitch=Ae),j.bearingDelta!==void 0&&(U.rotate=Ae)}},ei.prototype._applyChanges=function(){for(var R={},U={},j={},X=0,fe=this._changes;X<fe.length;X+=1){var Ae=fe[X],F=Ae[0],$=Ae[1],ie=Ae[2];F.panDelta&&(R.panDelta=(R.panDelta||new l.Point(0,0))._add(F.panDelta)),F.zoomDelta&&(R.zoomDelta=(R.zoomDelta||0)+F.zoomDelta),F.bearingDelta&&(R.bearingDelta=(R.bearingDelta||0)+F.bearingDelta),F.pitchDelta&&(R.pitchDelta=(R.pitchDelta||0)+F.pitchDelta),F.around!==void 0&&(R.around=F.around),F.pinchAround!==void 0&&(R.pinchAround=F.pinchAround),F.noInertia&&(R.noInertia=F.noInertia),l.extend(U,$),l.extend(j,ie)}this._updateMapTransform(R,U,j),this._changes=[]},ei.prototype._updateMapTransform=function(R,U,j){var X=this._map,fe=X.transform;if(!Vi(R))return this._fireEvents(U,j);var Ae=R.panDelta,F=R.zoomDelta,$=R.bearingDelta,ie=R.pitchDelta,de=R.around,xe=R.pinchAround;xe!==void 0&&(de=xe),X._stop(!0),de=de||X.transform.centerPoint;var Le=fe.pointLocation(Ae?de.sub(Ae):de);$&&(fe.bearing+=$),ie&&(fe.pitch+=ie),F&&(fe.zoom+=F),fe.setLocationAtPoint(Le,de),this._map._update(),R.noInertia||this._inertia.record(R),this._fireEvents(U,j)},ei.prototype._fireEvents=function(R,U){var j=this,X=Jo(this._eventsInProgress),fe=Jo(R),Ae={};for(var F in R){var $=R[F].originalEvent;this._eventsInProgress[F]||(Ae[F+"start"]=$),this._eventsInProgress[F]=R[F]}for(var ie in!X&&fe&&this._fireEvent("movestart",fe.originalEvent),Ae)this._fireEvent(ie,Ae[ie]);for(var de in R.rotate&&(this._bearingChanged=!0),fe&&this._fireEvent("move",fe.originalEvent),R){var xe=R[de].originalEvent;this._fireEvent(de,xe)}var Le,Ne={};for(var Ue in this._eventsInProgress){var qe=this._eventsInProgress[Ue],Ye=qe.handlerName,$e=qe.originalEvent;this._handlersById[Ye].isActive()||(delete this._eventsInProgress[Ue],Le=U[Ye]||$e,Ne[Ue+"end"]=Le)}for(var lt in Ne)this._fireEvent(lt,Ne[lt]);var pt=Jo(this._eventsInProgress);if((X||fe)&&!pt){this._updatingCamera=!0;var Et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ct=function(St){return St!==0&&-j._bearingSnap<St&&St<j._bearingSnap};Et?(Ct(Et.bearing||this._map.getBearing())&&(Et.bearing=0),this._map.easeTo(Et,{originalEvent:Le})):(this._map.fire(new l.Event("moveend",{originalEvent:Le})),Ct(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ei.prototype._fireEvent=function(R,U){this._map.fire(new l.Event(R,U?{originalEvent:U}:{}))},ei.prototype._triggerRenderFrame=function(){var R=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(U){delete R._frameId,R.handleEvent(new ss("renderFrame",{timeStamp:U})),R._applyChanges()}))};var Ts=function(R){function U(j,X){R.call(this),this._moving=!1,this._zooming=!1,this.transform=j,this._bearingSnap=X.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},U.prototype.setCenter=function(j,X){return this.jumpTo({center:j},X)},U.prototype.panBy=function(j,X,fe){return j=l.Point.convert(j).mult(-1),this.panTo(this.transform.center,l.extend({offset:j},X),fe)},U.prototype.panTo=function(j,X,fe){return this.easeTo(l.extend({center:j},X),fe)},U.prototype.getZoom=function(){return this.transform.zoom},U.prototype.setZoom=function(j,X){return this.jumpTo({zoom:j},X),this},U.prototype.zoomTo=function(j,X,fe){return this.easeTo(l.extend({zoom:j},X),fe)},U.prototype.zoomIn=function(j,X){return this.zoomTo(this.getZoom()+1,j,X),this},U.prototype.zoomOut=function(j,X){return this.zoomTo(this.getZoom()-1,j,X),this},U.prototype.getBearing=function(){return this.transform.bearing},U.prototype.setBearing=function(j,X){return this.jumpTo({bearing:j},X),this},U.prototype.getPadding=function(){return this.transform.padding},U.prototype.setPadding=function(j,X){return this.jumpTo({padding:j},X),this},U.prototype.rotateTo=function(j,X,fe){return this.easeTo(l.extend({bearing:j},X),fe)},U.prototype.resetNorth=function(j,X){return this.rotateTo(0,l.extend({duration:1e3},j),X),this},U.prototype.resetNorthPitch=function(j,X){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},j),X),this},U.prototype.snapToNorth=function(j,X){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(j,X):this},U.prototype.getPitch=function(){return this.transform.pitch},U.prototype.setPitch=function(j,X){return this.jumpTo({pitch:j},X),this},U.prototype.cameraForBounds=function(j,X){return j=l.LngLatBounds.convert(j),this._cameraForBoxAndBearing(j.getNorthWest(),j.getSouthEast(),0,X)},U.prototype._cameraForBoxAndBearing=function(j,X,fe,Ae){var F={top:0,bottom:0,right:0,left:0};if(typeof(Ae=l.extend({padding:F,offset:[0,0],maxZoom:this.transform.maxZoom},Ae)).padding=="number"){var $=Ae.padding;Ae.padding={top:$,bottom:$,right:$,left:$}}Ae.padding=l.extend(F,Ae.padding);var ie=this.transform,de=ie.padding,xe=ie.project(l.LngLat.convert(j)),Le=ie.project(l.LngLat.convert(X)),Ne=xe.rotate(-fe*Math.PI/180),Ue=Le.rotate(-fe*Math.PI/180),qe=new l.Point(Math.max(Ne.x,Ue.x),Math.max(Ne.y,Ue.y)),Ye=new l.Point(Math.min(Ne.x,Ue.x),Math.min(Ne.y,Ue.y)),$e=qe.sub(Ye),lt=(ie.width-(de.left+de.right+Ae.padding.left+Ae.padding.right))/$e.x,pt=(ie.height-(de.top+de.bottom+Ae.padding.top+Ae.padding.bottom))/$e.y;if(!(pt<0||lt<0)){var Et=Math.min(ie.scaleZoom(ie.scale*Math.min(lt,pt)),Ae.maxZoom),Ct=l.Point.convert(Ae.offset),St=(Ae.padding.left-Ae.padding.right)/2,Ft=(Ae.padding.top-Ae.padding.bottom)/2,Lt=new l.Point(Ct.x+St,Ct.y+Ft).mult(ie.scale/ie.zoomScale(Et));return{center:ie.unproject(xe.add(Le).div(2).sub(Lt)),zoom:Et,bearing:fe}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},U.prototype.fitBounds=function(j,X,fe){return this._fitInternal(this.cameraForBounds(j,X),X,fe)},U.prototype.fitScreenCoordinates=function(j,X,fe,Ae,F){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(j)),this.transform.pointLocation(l.Point.convert(X)),fe,Ae),Ae,F)},U.prototype._fitInternal=function(j,X,fe){return j?(delete(X=l.extend(j,X)).padding,X.linear?this.easeTo(X,fe):this.flyTo(X,fe)):this},U.prototype.jumpTo=function(j,X){this.stop();var fe=this.transform,Ae=!1,F=!1,$=!1;return"zoom"in j&&fe.zoom!==+j.zoom&&(Ae=!0,fe.zoom=+j.zoom),j.center!==void 0&&(fe.center=l.LngLat.convert(j.center)),"bearing"in j&&fe.bearing!==+j.bearing&&(F=!0,fe.bearing=+j.bearing),"pitch"in j&&fe.pitch!==+j.pitch&&($=!0,fe.pitch=+j.pitch),j.padding==null||fe.isPaddingEqual(j.padding)||(fe.padding=j.padding),this.fire(new l.Event("movestart",X)).fire(new l.Event("move",X)),Ae&&this.fire(new l.Event("zoomstart",X)).fire(new l.Event("zoom",X)).fire(new l.Event("zoomend",X)),F&&this.fire(new l.Event("rotatestart",X)).fire(new l.Event("rotate",X)).fire(new l.Event("rotateend",X)),$&&this.fire(new l.Event("pitchstart",X)).fire(new l.Event("pitch",X)).fire(new l.Event("pitchend",X)),this.fire(new l.Event("moveend",X))},U.prototype.easeTo=function(j,X){var fe=this;this._stop(!1,j.easeId),((j=l.extend({offset:[0,0],duration:500,easing:l.ease},j)).animate===!1||!j.essential&&l.browser.prefersReducedMotion)&&(j.duration=0);var Ae=this.transform,F=this.getZoom(),$=this.getBearing(),ie=this.getPitch(),de=this.getPadding(),xe="zoom"in j?+j.zoom:F,Le="bearing"in j?this._normalizeBearing(j.bearing,$):$,Ne="pitch"in j?+j.pitch:ie,Ue="padding"in j?j.padding:Ae.padding,qe=l.Point.convert(j.offset),Ye=Ae.centerPoint.add(qe),$e=Ae.pointLocation(Ye),lt=l.LngLat.convert(j.center||$e);this._normalizeCenter(lt);var pt,Et,Ct=Ae.project($e),St=Ae.project(lt).sub(Ct),Ft=Ae.zoomScale(xe-F);j.around&&(pt=l.LngLat.convert(j.around),Et=Ae.locationPoint(pt));var Lt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||xe!==F,this._rotating=this._rotating||$!==Le,this._pitching=this._pitching||Ne!==ie,this._padding=!Ae.isPaddingEqual(Ue),this._easeId=j.easeId,this._prepareEase(X,j.noMoveStart,Lt),clearTimeout(this._easeEndTimeoutID),this._ease(function(tn){if(fe._zooming&&(Ae.zoom=l.number(F,xe,tn)),fe._rotating&&(Ae.bearing=l.number($,Le,tn)),fe._pitching&&(Ae.pitch=l.number(ie,Ne,tn)),fe._padding&&(Ae.interpolatePadding(de,Ue,tn),Ye=Ae.centerPoint.add(qe)),pt)Ae.setLocationAtPoint(pt,Et);else{var Zt=Ae.zoomScale(Ae.zoom-F),Ht=xe>F?Math.min(2,Ft):Math.max(.5,Ft),dn=Math.pow(Ht,1-tn),vn=Ae.unproject(Ct.add(St.mult(tn*dn)).mult(Zt));Ae.setLocationAtPoint(Ae.renderWorldCopies?vn.wrap():vn,Ye)}fe._fireMoveEvents(X)},function(tn){fe._afterEase(X,tn)},j),this},U.prototype._prepareEase=function(j,X,fe){fe===void 0&&(fe={}),this._moving=!0,X||fe.moving||this.fire(new l.Event("movestart",j)),this._zooming&&!fe.zooming&&this.fire(new l.Event("zoomstart",j)),this._rotating&&!fe.rotating&&this.fire(new l.Event("rotatestart",j)),this._pitching&&!fe.pitching&&this.fire(new l.Event("pitchstart",j))},U.prototype._fireMoveEvents=function(j){this.fire(new l.Event("move",j)),this._zooming&&this.fire(new l.Event("zoom",j)),this._rotating&&this.fire(new l.Event("rotate",j)),this._pitching&&this.fire(new l.Event("pitch",j))},U.prototype._afterEase=function(j,X){if(!this._easeId||!X||this._easeId!==X){delete this._easeId;var fe=this._zooming,Ae=this._rotating,F=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,fe&&this.fire(new l.Event("zoomend",j)),Ae&&this.fire(new l.Event("rotateend",j)),F&&this.fire(new l.Event("pitchend",j)),this.fire(new l.Event("moveend",j))}},U.prototype.flyTo=function(j,X){var fe=this;if(!j.essential&&l.browser.prefersReducedMotion){var Ae=l.pick(j,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ae,X)}this.stop(),j=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},j);var F=this.transform,$=this.getZoom(),ie=this.getBearing(),de=this.getPitch(),xe=this.getPadding(),Le="zoom"in j?l.clamp(+j.zoom,F.minZoom,F.maxZoom):$,Ne="bearing"in j?this._normalizeBearing(j.bearing,ie):ie,Ue="pitch"in j?+j.pitch:de,qe="padding"in j?j.padding:F.padding,Ye=F.zoomScale(Le-$),$e=l.Point.convert(j.offset),lt=F.centerPoint.add($e),pt=F.pointLocation(lt),Et=l.LngLat.convert(j.center||pt);this._normalizeCenter(Et);var Ct=F.project(pt),St=F.project(Et).sub(Ct),Ft=j.curve,Lt=Math.max(F.width,F.height),tn=Lt/Ye,Zt=St.mag();if("minZoom"in j){var Ht=l.clamp(Math.min(j.minZoom,$,Le),F.minZoom,F.maxZoom),dn=Lt/F.zoomScale(Ht-$);Ft=Math.sqrt(dn/Zt*2)}var vn=Ft*Ft;function zn(Nn){var ir=(tn*tn-Lt*Lt+(Nn?-1:1)*vn*vn*Zt*Zt)/(2*(Nn?tn:Lt)*vn*Zt);return Math.log(Math.sqrt(ir*ir+1)-ir)}function Rn(Nn){return(Math.exp(Nn)-Math.exp(-Nn))/2}function Vn(Nn){return(Math.exp(Nn)+Math.exp(-Nn))/2}var Xn=zn(0),or=function(Nn){return Vn(Xn)/Vn(Xn+Ft*Nn)},ar=function(Nn){return Lt*((Vn(Xn)*(Rn(ir=Xn+Ft*Nn)/Vn(ir))-Rn(Xn))/vn)/Zt;var ir},fr=(zn(1)-Xn)/Ft;if(Math.abs(Zt)<1e-6||!isFinite(fr)){if(Math.abs(Lt-tn)<1e-6)return this.easeTo(j,X);var mr=tn<Lt?-1:1;fr=Math.abs(Math.log(tn/Lt))/Ft,ar=function(){return 0},or=function(Nn){return Math.exp(mr*Ft*Nn)}}if("duration"in j)j.duration=+j.duration;else{var Lr="screenSpeed"in j?+j.screenSpeed/Ft:+j.speed;j.duration=1e3*fr/Lr}return j.maxDuration&&j.duration>j.maxDuration&&(j.duration=0),this._zooming=!0,this._rotating=ie!==Ne,this._pitching=Ue!==de,this._padding=!F.isPaddingEqual(qe),this._prepareEase(X,!1),this._ease(function(Nn){var ir=Nn*fr,hr=1/or(ir);F.zoom=Nn===1?Le:$+F.scaleZoom(hr),fe._rotating&&(F.bearing=l.number(ie,Ne,Nn)),fe._pitching&&(F.pitch=l.number(de,Ue,Nn)),fe._padding&&(F.interpolatePadding(xe,qe,Nn),lt=F.centerPoint.add($e));var yr=Nn===1?Et:F.unproject(Ct.add(St.mult(ar(ir))).mult(hr));F.setLocationAtPoint(F.renderWorldCopies?yr.wrap():yr,lt),fe._fireMoveEvents(X)},function(){return fe._afterEase(X)},j),this},U.prototype.isEasing=function(){return!!this._easeFrameId},U.prototype.stop=function(){return this._stop()},U.prototype._stop=function(j,X){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var fe=this._onEaseEnd;delete this._onEaseEnd,fe.call(this,X)}if(!j){var Ae=this.handlers;Ae&&Ae.stop()}return this},U.prototype._ease=function(j,X,fe){fe.animate===!1||fe.duration===0?(j(1),X()):(this._easeStart=l.browser.now(),this._easeOptions=fe,this._onEaseFrame=j,this._onEaseEnd=X,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},U.prototype._renderFrameCallback=function(){var j=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(j)),j<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},U.prototype._normalizeBearing=function(j,X){j=l.wrap(j,-180,180);var fe=Math.abs(j-X);return Math.abs(j-360-X)<fe&&(j-=360),Math.abs(j+360-X)<fe&&(j+=360),j},U.prototype._normalizeCenter=function(j){var X=this.transform;if(X.renderWorldCopies&&!X.lngRange){var fe=j.lng-X.center.lng;j.lng+=fe>180?-360:fe<-180?360:0}},U}(l.Evented),pa=function(R){R===void 0&&(R={}),this.options=R,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};pa.prototype.getDefaultPosition=function(){return"bottom-right"},pa.prototype.onAdd=function(R){var U=this.options&&this.options.compact;return this._map=R,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),U&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),U===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},pa.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},pa.prototype._updateEditLink=function(){var R=this._editLink;R||(R=this._editLink=this._container.querySelector(".mapbox-improve-map"));var U=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(R){var j=U.reduce(function(X,fe,Ae){return fe.value&&(X+=fe.key+"="+fe.value+(Ae<U.length-1?"&":"")),X},"?");R.href=l.config.FEEDBACK_URL+"/"+j+(this._map._hash?this._map._hash.getHashString(!0):""),R.rel="noopener nofollow"}},pa.prototype._updateData=function(R){!R||R.sourceDataType!=="metadata"&&R.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},pa.prototype._updateAttributions=function(){if(this._map.style){var R=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?R=R.concat(this.options.customAttribution.map(function($){return typeof $!="string"?"":$})):typeof this.options.customAttribution=="string"&&R.push(this.options.customAttribution)),this._map.style.stylesheet){var U=this._map.style.stylesheet;this.styleOwner=U.owner,this.styleId=U.id}var j=this._map.style.sourceCaches;for(var X in j){var fe=j[X];if(fe.used){var Ae=fe.getSource();Ae.attribution&&R.indexOf(Ae.attribution)<0&&R.push(Ae.attribution)}}R.sort(function($,ie){return $.length-ie.length});var F=(R=R.filter(function($,ie){for(var de=ie+1;de<R.length;de++)if(R[de].indexOf($)>=0)return!1;return!0})).join(" | ");F!==this._attribHTML&&(this._attribHTML=F,R.length?(this._innerContainer.innerHTML=F,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},pa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Di=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Di.prototype.onAdd=function(R){this._map=R,this._container=b.create("div","mapboxgl-ctrl");var U=b.create("a","mapboxgl-ctrl-logo");return U.target="_blank",U.rel="noopener nofollow",U.href="https://www.mapbox.com/",U.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),U.setAttribute("rel","noopener nofollow"),this._container.appendChild(U),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Di.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Di.prototype.getDefaultPosition=function(){return"bottom-left"},Di.prototype._updateLogo=function(R){R&&R.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Di.prototype._logoRequired=function(){if(this._map.style){var R=this._map.style.sourceCaches;for(var U in R)if(R[U].getSource().mapbox_logo)return!0;return!1}},Di.prototype._updateCompact=function(){var R=this._container.children;if(R.length){var U=R[0];this._map.getCanvasContainer().offsetWidth<250?U.classList.add("mapboxgl-compact"):U.classList.remove("mapboxgl-compact")}};var Ja=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ja.prototype.add=function(R){var U=++this._id;return this._queue.push({callback:R,id:U,cancelled:!1}),U},Ja.prototype.remove=function(R){for(var U=this._currentlyRunning,j=0,X=U?this._queue.concat(U):this._queue;j<X.length;j+=1){var fe=X[j];if(fe.id===R)return void(fe.cancelled=!0)}},Ja.prototype.run=function(R){R===void 0&&(R=0);var U=this._currentlyRunning=this._queue;this._queue=[];for(var j=0,X=U;j<X.length;j+=1){var fe=X[j];if(!fe.cancelled&&(fe.callback(R),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ja.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ks={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},_i=l.window.HTMLImageElement,Xr=l.window.HTMLElement,Ta=l.window.ImageBitmap,Ka=60,Na={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:Ka,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ns=function(R){function U(X){var fe=this;if((X=l.extend({},Na,X)).minZoom!=null&&X.maxZoom!=null&&X.minZoom>X.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(X.minPitch!=null&&X.maxPitch!=null&&X.minPitch>X.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(X.minPitch!=null&&X.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(X.maxPitch!=null&&X.maxPitch>Ka)throw new Error("maxPitch must be less than or equal to 60");var Ae=new Nr(X.minZoom,X.maxZoom,X.minPitch,X.maxPitch,X.renderWorldCopies);if(R.call(this,Ae,X),this._interactive=X.interactive,this._maxTileCacheSize=X.maxTileCacheSize,this._failIfMajorPerformanceCaveat=X.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=X.preserveDrawingBuffer,this._antialias=X.antialias,this._trackResize=X.trackResize,this._bearingSnap=X.bearingSnap,this._refreshExpiredTiles=X.refreshExpiredTiles,this._fadeDuration=X.fadeDuration,this._crossSourceCollisions=X.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=X.collectResourceTiming,this._renderTaskQueue=new Ja,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Ks,X.locale),this._requestManager=new l.RequestManager(X.transformRequest,X.accessToken),typeof X.container=="string"){if(this._container=l.window.document.getElementById(X.container),!this._container)throw new Error("Container '"+X.container+"' not found.")}else{if(!(X.container instanceof Xr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=X.container}if(X.maxBounds&&this.setMaxBounds(X.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return fe._update(!1)}),this.on("moveend",function(){return fe._update(!1)}),this.on("zoom",function(){return fe._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ei(this,X);var F=typeof X.hash=="string"&&X.hash||void 0;this._hash=X.hash&&new Mo(F).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:X.center,zoom:X.zoom,bearing:X.bearing,pitch:X.pitch}),X.bounds&&(this.resize(),this.fitBounds(X.bounds,l.extend({},X.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=X.localIdeographFontFamily,X.style&&this.setStyle(X.style,{localIdeographFontFamily:X.localIdeographFontFamily}),X.attributionControl&&this.addControl(new pa({customAttribution:X.customAttribution})),this.addControl(new Di,X.logoPosition),this.on("style.load",function(){fe.transform.unmodified&&fe.jumpTo(fe.style.stylesheet)}),this.on("data",function($){fe._update($.dataType==="style"),fe.fire(new l.Event($.dataType+"data",$))}),this.on("dataloading",function($){fe.fire(new l.Event($.dataType+"dataloading",$))})}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return U.prototype._getMapId=function(){return this._mapId},U.prototype.addControl=function(X,fe){if(fe===void 0&&X.getDefaultPosition&&(fe=X.getDefaultPosition()),fe===void 0&&(fe="top-right"),!X||!X.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ae=X.onAdd(this);this._controls.push(X);var F=this._controlPositions[fe];return fe.indexOf("bottom")!==-1?F.insertBefore(Ae,F.firstChild):F.appendChild(Ae),this},U.prototype.removeControl=function(X){if(!X||!X.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=this._controls.indexOf(X);return fe>-1&&this._controls.splice(fe,1),X.onRemove(this),this},U.prototype.resize=function(X){var fe=this._containerDimensions(),Ae=fe[0],F=fe[1];this._resizeCanvas(Ae,F),this.transform.resize(Ae,F),this.painter.resize(Ae,F);var $=!this._moving;return $&&(this.stop(),this.fire(new l.Event("movestart",X)).fire(new l.Event("move",X))),this.fire(new l.Event("resize",X)),$&&this.fire(new l.Event("moveend",X)),this},U.prototype.getBounds=function(){return this.transform.getBounds()},U.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},U.prototype.setMaxBounds=function(X){return this.transform.setMaxBounds(l.LngLatBounds.convert(X)),this._update()},U.prototype.setMinZoom=function(X){if((X=X??-2)>=-2&&X<=this.transform.maxZoom)return this.transform.minZoom=X,this._update(),this.getZoom()<X&&this.setZoom(X),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},U.prototype.getMinZoom=function(){return this.transform.minZoom},U.prototype.setMaxZoom=function(X){if((X=X??22)>=this.transform.minZoom)return this.transform.maxZoom=X,this._update(),this.getZoom()>X&&this.setZoom(X),this;throw new Error("maxZoom must be greater than the current minZoom")},U.prototype.getMaxZoom=function(){return this.transform.maxZoom},U.prototype.setMinPitch=function(X){if((X=X??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(X>=0&&X<=this.transform.maxPitch)return this.transform.minPitch=X,this._update(),this.getPitch()<X&&this.setPitch(X),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},U.prototype.getMinPitch=function(){return this.transform.minPitch},U.prototype.setMaxPitch=function(X){if((X=X??Ka)>Ka)throw new Error("maxPitch must be less than or equal to 60");if(X>=this.transform.minPitch)return this.transform.maxPitch=X,this._update(),this.getPitch()>X&&this.setPitch(X),this;throw new Error("maxPitch must be greater than the current minPitch")},U.prototype.getMaxPitch=function(){return this.transform.maxPitch},U.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},U.prototype.setRenderWorldCopies=function(X){return this.transform.renderWorldCopies=X,this._update()},U.prototype.project=function(X){return this.transform.locationPoint(l.LngLat.convert(X))},U.prototype.unproject=function(X){return this.transform.pointLocation(l.Point.convert(X))},U.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},U.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},U.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},U.prototype._createDelegatedListener=function(X,fe,Ae){var F,$=this;if(X==="mouseenter"||X==="mouseover"){var ie=!1;return{layer:fe,listener:Ae,delegates:{mousemove:function(xe){var Le=$.getLayer(fe)?$.queryRenderedFeatures(xe.point,{layers:[fe]}):[];Le.length?ie||(ie=!0,Ae.call($,new di(X,$,xe.originalEvent,{features:Le}))):ie=!1},mouseout:function(){ie=!1}}}}if(X==="mouseleave"||X==="mouseout"){var de=!1;return{layer:fe,listener:Ae,delegates:{mousemove:function(xe){($.getLayer(fe)?$.queryRenderedFeatures(xe.point,{layers:[fe]}):[]).length?de=!0:de&&(de=!1,Ae.call($,new di(X,$,xe.originalEvent)))},mouseout:function(xe){de&&(de=!1,Ae.call($,new di(X,$,xe.originalEvent)))}}}}return{layer:fe,listener:Ae,delegates:(F={},F[X]=function(xe){var Le=$.getLayer(fe)?$.queryRenderedFeatures(xe.point,{layers:[fe]}):[];Le.length&&(xe.features=Le,Ae.call($,xe),delete xe.features)},F)}},U.prototype.on=function(X,fe,Ae){if(Ae===void 0)return R.prototype.on.call(this,X,fe);var F=this._createDelegatedListener(X,fe,Ae);for(var $ in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[X]=this._delegatedListeners[X]||[],this._delegatedListeners[X].push(F),F.delegates)this.on($,F.delegates[$]);return this},U.prototype.once=function(X,fe,Ae){if(Ae===void 0)return R.prototype.once.call(this,X,fe);var F=this._createDelegatedListener(X,fe,Ae);for(var $ in F.delegates)this.once($,F.delegates[$]);return this},U.prototype.off=function(X,fe,Ae){var F=this;return Ae===void 0?R.prototype.off.call(this,X,fe):(this._delegatedListeners&&this._delegatedListeners[X]&&function($){for(var ie=$[X],de=0;de<ie.length;de++){var xe=ie[de];if(xe.layer===fe&&xe.listener===Ae){for(var Le in xe.delegates)F.off(Le,xe.delegates[Le]);return ie.splice(de,1),F}}}(this._delegatedListeners),this)},U.prototype.queryRenderedFeatures=function(X,fe){if(!this.style)return[];var Ae;if(fe!==void 0||X===void 0||X instanceof l.Point||Array.isArray(X)||(fe=X,X=void 0),fe=fe||{},(X=X||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof X[0]=="number")Ae=[l.Point.convert(X)];else{var F=l.Point.convert(X[0]),$=l.Point.convert(X[1]);Ae=[F,new l.Point($.x,F.y),$,new l.Point(F.x,$.y),F]}return this.style.queryRenderedFeatures(Ae,fe,this.transform)},U.prototype.querySourceFeatures=function(X,fe){return this.style.querySourceFeatures(X,fe)},U.prototype.setStyle=function(X,fe){return(fe=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},fe)).diff!==!1&&fe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&X?(this._diffStyle(X,fe),this):(this._localIdeographFontFamily=fe.localIdeographFontFamily,this._updateStyle(X,fe))},U.prototype._getUIString=function(X){var fe=this._locale[X];if(fe==null)throw new Error("Missing UI string '"+X+"'");return fe},U.prototype._updateStyle=function(X,fe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),X?(this.style=new er(this,fe||{}),this.style.setEventedParent(this,{style:this.style}),typeof X=="string"?this.style.loadURL(X):this.style.loadJSON(X),this):(delete this.style,this)},U.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new er(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},U.prototype._diffStyle=function(X,fe){var Ae=this;if(typeof X=="string"){var F=this._requestManager.normalizeStyleURL(X),$=this._requestManager.transformRequest(F,l.ResourceType.Style);l.getJSON($,function(ie,de){ie?Ae.fire(new l.ErrorEvent(ie)):de&&Ae._updateDiff(de,fe)})}else typeof X=="object"&&this._updateDiff(X,fe)},U.prototype._updateDiff=function(X,fe){try{this.style.setState(X)&&this._update(!0)}catch(Ae){l.warnOnce("Unable to perform style diff: "+(Ae.message||Ae.error||Ae)+".  Rebuilding the style from scratch."),this._updateStyle(X,fe)}},U.prototype.getStyle=function(){if(this.style)return this.style.serialize()},U.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},U.prototype.addSource=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addSource(X,fe),this._update(!0)},U.prototype.isSourceLoaded=function(X){var fe=this.style&&this.style.sourceCaches[X];if(fe!==void 0)return fe.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+X+"'")))},U.prototype.areTilesLoaded=function(){var X=this.style&&this.style.sourceCaches;for(var fe in X){var Ae=X[fe]._tiles;for(var F in Ae){var $=Ae[F];if($.state!=="loaded"&&$.state!=="errored")return!1}}return!0},U.prototype.addSourceType=function(X,fe,Ae){return this._lazyInitEmptyStyle(),this.style.addSourceType(X,fe,Ae)},U.prototype.removeSource=function(X){return this.style.removeSource(X),this._update(!0)},U.prototype.getSource=function(X){return this.style.getSource(X)},U.prototype.addImage=function(X,fe,Ae){Ae===void 0&&(Ae={});var F=Ae.pixelRatio;F===void 0&&(F=1);var $=Ae.sdf;$===void 0&&($=!1);var ie=Ae.stretchX,de=Ae.stretchY,xe=Ae.content;if(this._lazyInitEmptyStyle(),fe instanceof _i||Ta&&fe instanceof Ta){var Le=l.browser.getImageData(fe),Ne=Le.width,Ue=Le.height,qe=Le.data;this.style.addImage(X,{data:new l.RGBAImage({width:Ne,height:Ue},qe),pixelRatio:F,stretchX:ie,stretchY:de,content:xe,sdf:$,version:0})}else{if(fe.width===void 0||fe.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ye=fe.width,$e=fe.height,lt=fe.data,pt=fe;this.style.addImage(X,{data:new l.RGBAImage({width:Ye,height:$e},new Uint8Array(lt)),pixelRatio:F,stretchX:ie,stretchY:de,content:xe,sdf:$,version:0,userImage:pt}),pt.onAdd&&pt.onAdd(this,X)}},U.prototype.updateImage=function(X,fe){var Ae=this.style.getImage(X);if(!Ae)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var F=fe instanceof _i||Ta&&fe instanceof Ta?l.browser.getImageData(fe):fe,$=F.width,ie=F.height,de=F.data;if($===void 0||ie===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if($!==Ae.data.width||ie!==Ae.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var xe=!(fe instanceof _i||Ta&&fe instanceof Ta);Ae.data.replace(de,xe),this.style.updateImage(X,Ae)},U.prototype.hasImage=function(X){return X?!!this.style.getImage(X):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},U.prototype.removeImage=function(X){this.style.removeImage(X)},U.prototype.loadImage=function(X,fe){l.getImage(this._requestManager.transformRequest(X,l.ResourceType.Image),fe)},U.prototype.listImages=function(){return this.style.listImages()},U.prototype.addLayer=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addLayer(X,fe),this._update(!0)},U.prototype.moveLayer=function(X,fe){return this.style.moveLayer(X,fe),this._update(!0)},U.prototype.removeLayer=function(X){return this.style.removeLayer(X),this._update(!0)},U.prototype.getLayer=function(X){return this.style.getLayer(X)},U.prototype.setLayerZoomRange=function(X,fe,Ae){return this.style.setLayerZoomRange(X,fe,Ae),this._update(!0)},U.prototype.setFilter=function(X,fe,Ae){return Ae===void 0&&(Ae={}),this.style.setFilter(X,fe,Ae),this._update(!0)},U.prototype.getFilter=function(X){return this.style.getFilter(X)},U.prototype.setPaintProperty=function(X,fe,Ae,F){return F===void 0&&(F={}),this.style.setPaintProperty(X,fe,Ae,F),this._update(!0)},U.prototype.getPaintProperty=function(X,fe){return this.style.getPaintProperty(X,fe)},U.prototype.setLayoutProperty=function(X,fe,Ae,F){return F===void 0&&(F={}),this.style.setLayoutProperty(X,fe,Ae,F),this._update(!0)},U.prototype.getLayoutProperty=function(X,fe){return this.style.getLayoutProperty(X,fe)},U.prototype.setLight=function(X,fe){return fe===void 0&&(fe={}),this._lazyInitEmptyStyle(),this.style.setLight(X,fe),this._update(!0)},U.prototype.getLight=function(){return this.style.getLight()},U.prototype.setFeatureState=function(X,fe){return this.style.setFeatureState(X,fe),this._update()},U.prototype.removeFeatureState=function(X,fe){return this.style.removeFeatureState(X,fe),this._update()},U.prototype.getFeatureState=function(X){return this.style.getFeatureState(X)},U.prototype.getContainer=function(){return this._container},U.prototype.getCanvasContainer=function(){return this._canvasContainer},U.prototype.getCanvas=function(){return this._canvas},U.prototype._containerDimensions=function(){var X=0,fe=0;return this._container&&(X=this._container.clientWidth||400,fe=this._container.clientHeight||300),[X,fe]},U.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},U.prototype._setupContainer=function(){var X=this._container;X.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",X)).style.visibility="hidden",this._detectMissingCSS();var fe=this._canvasContainer=b.create("div","mapboxgl-canvas-container",X);this._interactive&&fe.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ae=this._containerDimensions();this._resizeCanvas(Ae[0],Ae[1]);var F=this._controlContainer=b.create("div","mapboxgl-control-container",X),$=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ie){$[ie]=b.create("div","mapboxgl-ctrl-"+ie,F)})},U.prototype._resizeCanvas=function(X,fe){var Ae=l.browser.devicePixelRatio||1;this._canvas.width=Ae*X,this._canvas.height=Ae*fe,this._canvas.style.width=X+"px",this._canvas.style.height=fe+"px"},U.prototype._setupPainter=function(){var X=l.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),fe=this._canvas.getContext("webgl",X)||this._canvas.getContext("experimental-webgl",X);fe?(this.painter=new Qr(fe,this.transform),l.webpSupported.testSupport(fe)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},U.prototype._contextLost=function(X){X.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:X}))},U.prototype._contextRestored=function(X){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:X}))},U.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},U.prototype._update=function(X){return this.style?(this._styleDirty=this._styleDirty||X,this._sourcesDirty=!0,this.triggerRepaint(),this):this},U.prototype._requestRenderFrame=function(X){return this._update(),this._renderTaskQueue.add(X)},U.prototype._cancelRenderFrame=function(X){this._renderTaskQueue.remove(X)},U.prototype._render=function(X){var fe,Ae=this,F=0,$=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(fe=$.createQueryEXT(),$.beginQueryEXT($.TIME_ELAPSED_EXT,fe),F=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(X),!this._removed){var ie=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var de=this.transform.zoom,xe=l.browser.now();this.style.zoomHistory.update(de,xe);var Le=new l.EvaluationParameters(de,{now:xe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ne=Le.crossFadingFactor();Ne===1&&Ne===this._crossFadingFactor||(ie=!0,this._crossFadingFactor=Ne),this.style.update(Le)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||ie)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ue=l.browser.now()-F;$.endQueryEXT($.TIME_ELAPSED_EXT,fe),setTimeout(function(){var Ye=$.getQueryObjectEXT(fe,$.QUERY_RESULT_EXT)/1e6;$.deleteQueryEXT(fe),Ae.fire(new l.Event("gpu-timing-frame",{cpuTime:Ue,gpuTime:Ye}))},50)}if(this.listens("gpu-timing-layer")){var qe=this.painter.collectGpuTimers();setTimeout(function(){var Ye=Ae.painter.queryGpuTimers(qe);Ae.fire(new l.Event("gpu-timing-layer",{layerTimes:Ye}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this}},U.prototype.remove=function(){this._hash&&this._hash.remove();for(var X=0,fe=this._controls;X<fe.length;X+=1)fe[X].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var Ae=this.painter.context.gl.getExtension("WEBGL_lose_context");Ae&&Ae.loseContext(),Co(this._canvasContainer),Co(this._controlContainer),Co(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},U.prototype.triggerRepaint=function(){var X=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(fe){X._frame=null,X._render(fe)}))},U.prototype._onWindowOnline=function(){this._update()},U.prototype._onWindowResize=function(X){this._trackResize&&this.resize({originalEvent:X})._update()},j.showTileBoundaries.get=function(){return!!this._showTileBoundaries},j.showTileBoundaries.set=function(X){this._showTileBoundaries!==X&&(this._showTileBoundaries=X,this._update())},j.showPadding.get=function(){return!!this._showPadding},j.showPadding.set=function(X){this._showPadding!==X&&(this._showPadding=X,this._update())},j.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},j.showCollisionBoxes.set=function(X){this._showCollisionBoxes!==X&&(this._showCollisionBoxes=X,X?this.style._generateCollisionBoxes():this._update())},j.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},j.showOverdrawInspector.set=function(X){this._showOverdrawInspector!==X&&(this._showOverdrawInspector=X,this._update())},j.repaint.get=function(){return!!this._repaint},j.repaint.set=function(X){this._repaint!==X&&(this._repaint=X,this.triggerRepaint())},j.vertices.get=function(){return!!this._vertices},j.vertices.set=function(X){this._vertices=X,this._update()},U.prototype._setCacheLimits=function(X,fe){l.setCacheLimits(X,fe)},j.version.get=function(){return l.version},Object.defineProperties(U.prototype,j),U}(Ts);function Co(R){R.parentNode&&R.parentNode.removeChild(R)}var Ko={showCompass:!0,showZoom:!0,visualizePitch:!1},Ei=function(R){var U=this;this.options=l.extend({},Ko,R),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(j){return j.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(j){return U._map.zoomIn({},{originalEvent:j})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(j){return U._map.zoomOut({},{originalEvent:j})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(j){U.options.visualizePitch?U._map.resetNorthPitch({},{originalEvent:j}):U._map.resetNorth({},{originalEvent:j})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ei.prototype._updateZoomButtons=function(){var R=this._map.getZoom();this._zoomInButton.disabled=R===this._map.getMaxZoom(),this._zoomOutButton.disabled=R===this._map.getMinZoom()},Ei.prototype._rotateCompassArrow=function(){var R=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=R},Ei.prototype.onAdd=function(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Yi(this._map,this._compass,this.options.visualizePitch)),this._container},Ei.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ei.prototype._createButton=function(R,U){var j=b.create("button",R,this._container);return j.type="button",j.addEventListener("click",U),j},Ei.prototype._setButtonTitle=function(R,U){var j=this._map._getUIString("NavigationControl."+U);R.title=j,R.setAttribute("aria-label",j)};var Yi=function(R,U,j){j===void 0&&(j=!1),this._clickTolerance=10,this.element=U,this.mouseRotate=new Sa({clickTolerance:R.dragRotate._mouseRotate._clickTolerance}),this.map=R,j&&(this.mousePitch=new Fs({clickTolerance:R.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(U,"mousedown",this.mousedown),b.addEventListener(U,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(U,"touchmove",this.touchmove),b.addEventListener(U,"touchend",this.touchend),b.addEventListener(U,"touchcancel",this.reset)};function Tr(R,U,j){if(R=new l.LngLat(R.lng,R.lat),U){var X=new l.LngLat(R.lng-360,R.lat),fe=new l.LngLat(R.lng+360,R.lat),Ae=j.locationPoint(R).distSqr(U);j.locationPoint(X).distSqr(U)<Ae?R=X:j.locationPoint(fe).distSqr(U)<Ae&&(R=fe)}for(;Math.abs(R.lng-j.center.lng)>180;){var F=j.locationPoint(R);if(F.x>=0&&F.y>=0&&F.x<=j.width&&F.y<=j.height)break;R.lng>j.center.lng?R.lng-=360:R.lng+=360}return R}Yi.prototype.down=function(R,U){this.mouseRotate.mousedown(R,U),this.mousePitch&&this.mousePitch.mousedown(R,U),b.disableDrag()},Yi.prototype.move=function(R,U){var j=this.map,X=this.mouseRotate.mousemoveWindow(R,U);if(X&&X.bearingDelta&&j.setBearing(j.getBearing()+X.bearingDelta),this.mousePitch){var fe=this.mousePitch.mousemoveWindow(R,U);fe&&fe.pitchDelta&&j.setPitch(j.getPitch()+fe.pitchDelta)}},Yi.prototype.off=function(){var R=this.element;b.removeEventListener(R,"mousedown",this.mousedown),b.removeEventListener(R,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(R,"touchmove",this.touchmove),b.removeEventListener(R,"touchend",this.touchend),b.removeEventListener(R,"touchcancel",this.reset),this.offTemp()},Yi.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(l.window,"mousemove",this.mousemove),b.removeEventListener(l.window,"mouseup",this.mouseup)},Yi.prototype.mousedown=function(R){this.down(l.extend({},R,{ctrlKey:!0,preventDefault:function(){return R.preventDefault()}}),b.mousePos(this.element,R)),b.addEventListener(l.window,"mousemove",this.mousemove),b.addEventListener(l.window,"mouseup",this.mouseup)},Yi.prototype.mousemove=function(R){this.move(R,b.mousePos(this.element,R))},Yi.prototype.mouseup=function(R){this.mouseRotate.mouseupWindow(R),this.mousePitch&&this.mousePitch.mouseupWindow(R),this.offTemp()},Yi.prototype.touchstart=function(R){R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,R.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return R.preventDefault()}},this._startPos))},Yi.prototype.touchmove=function(R){R.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,R.targetTouches)[0],this.move({preventDefault:function(){return R.preventDefault()}},this._lastPos))},Yi.prototype.touchend=function(R){R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Yi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ar={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ls(R,U,j){var X=R.classList;for(var fe in Ar)X.remove("mapboxgl-"+j+"-anchor-"+fe);X.add("mapboxgl-"+j+"-anchor-"+U)}var ia,Po=function(R){function U(j,X){var fe=this;if(R.call(this),(j instanceof l.window.HTMLElement||X)&&(j=l.extend({element:j},X)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=j&&j.anchor||"center",this._color=j&&j.color||"#3FB1CE",this._draggable=j&&j.draggable||!1,this._state="inactive",this._rotation=j&&j.rotation||0,this._rotationAlignment=j&&j.rotationAlignment||"auto",this._pitchAlignment=j&&j.pitchAlignment&&j.pitchAlignment!=="auto"?j.pitchAlignment:this._rotationAlignment,j&&j.element)this._element=j.element,this._offset=l.Point.convert(j&&j.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var Ae=b.createNS("http://www.w3.org/2000/svg","svg");Ae.setAttributeNS(null,"display","block"),Ae.setAttributeNS(null,"height","41px"),Ae.setAttributeNS(null,"width","27px"),Ae.setAttributeNS(null,"viewBox","0 0 27 41");var F=b.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"stroke","none"),F.setAttributeNS(null,"stroke-width","1"),F.setAttributeNS(null,"fill","none"),F.setAttributeNS(null,"fill-rule","evenodd");var $=b.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill-rule","nonzero");var ie=b.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ie.setAttributeNS(null,"fill","#000000");for(var de=0,xe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];de<xe.length;de+=1){var Le=xe[de],Ne=b.createNS("http://www.w3.org/2000/svg","ellipse");Ne.setAttributeNS(null,"opacity","0.04"),Ne.setAttributeNS(null,"cx","10.5"),Ne.setAttributeNS(null,"cy","5.80029008"),Ne.setAttributeNS(null,"rx",Le.rx),Ne.setAttributeNS(null,"ry",Le.ry),ie.appendChild(Ne)}var Ue=b.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"fill",this._color);var qe=b.createNS("http://www.w3.org/2000/svg","path");qe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ue.appendChild(qe);var Ye=b.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"opacity","0.25"),Ye.setAttributeNS(null,"fill","#000000");var $e=b.createNS("http://www.w3.org/2000/svg","path");$e.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ye.appendChild($e);var lt=b.createNS("http://www.w3.org/2000/svg","g");lt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),lt.setAttributeNS(null,"fill","#FFFFFF");var pt=b.createNS("http://www.w3.org/2000/svg","g");pt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Et=b.createNS("http://www.w3.org/2000/svg","circle");Et.setAttributeNS(null,"fill","#000000"),Et.setAttributeNS(null,"opacity","0.25"),Et.setAttributeNS(null,"cx","5.5"),Et.setAttributeNS(null,"cy","5.5"),Et.setAttributeNS(null,"r","5.4999962");var Ct=b.createNS("http://www.w3.org/2000/svg","circle");Ct.setAttributeNS(null,"fill","#FFFFFF"),Ct.setAttributeNS(null,"cx","5.5"),Ct.setAttributeNS(null,"cy","5.5"),Ct.setAttributeNS(null,"r","5.4999962"),pt.appendChild(Et),pt.appendChild(Ct),$.appendChild(ie),$.appendChild(Ue),$.appendChild(Ye),$.appendChild(lt),$.appendChild(pt),Ae.appendChild($),this._element.appendChild(Ae),this._offset=l.Point.convert(j&&j.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(St){St.preventDefault()}),this._element.addEventListener("mousedown",function(St){St.preventDefault()}),this._element.addEventListener("focus",function(){var St=fe._map.getContainer();St.scrollTop=0,St.scrollLeft=0}),ls(this._element,this._anchor,"marker"),this._popup=null}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.addTo=function(j){return this.remove(),this._map=j,j.getCanvasContainer().appendChild(this._element),j.on("move",this._update),j.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},U.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},U.prototype.getLngLat=function(){return this._lngLat},U.prototype.setLngLat=function(j){return this._lngLat=l.LngLat.convert(j),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},U.prototype.getElement=function(){return this._element},U.prototype.setPopup=function(j){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),j){if(!("offset"in j.options)){var X=13.5,fe=Math.sqrt(Math.pow(X,2)/2);j.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[fe,-1*(24.6+fe)],"bottom-right":[-fe,-1*(24.6+fe)],left:[X,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=j,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},U.prototype._onKeyPress=function(j){var X=j.code,fe=j.charCode||j.keyCode;X!=="Space"&&X!=="Enter"&&fe!==32&&fe!==13||this.togglePopup()},U.prototype._onMapClick=function(j){var X=j.originalEvent.target,fe=this._element;this._popup&&(X===fe||fe.contains(X))&&this.togglePopup()},U.prototype.getPopup=function(){return this._popup},U.prototype.togglePopup=function(){var j=this._popup;return j?(j.isOpen()?j.remove():j.addTo(this._map),this):this},U.prototype._update=function(j){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Tr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var X="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?X="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(X="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var fe="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?fe="rotateX(0deg)":this._pitchAlignment==="map"&&(fe="rotateX("+this._map.getPitch()+"deg)"),j&&j.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,Ar[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+fe+" "+X)}},U.prototype.getOffset=function(){return this._offset},U.prototype.setOffset=function(j){return this._offset=l.Point.convert(j),this._update(),this},U.prototype._onMove=function(j){this._pos=j.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},U.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},U.prototype._addDragHandler=function(j){this._element.contains(j.originalEvent.target)&&(j.preventDefault(),this._positionDelta=j.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},U.prototype.setDraggable=function(j){return this._draggable=!!j,this._map&&(j?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},U.prototype.isDraggable=function(){return this._draggable},U.prototype.setRotation=function(j){return this._rotation=j||0,this._update(),this},U.prototype.getRotation=function(){return this._rotation},U.prototype.setRotationAlignment=function(j){return this._rotationAlignment=j||"auto",this._update(),this},U.prototype.getRotationAlignment=function(){return this._rotationAlignment},U.prototype.setPitchAlignment=function(j){return this._pitchAlignment=j&&j!=="auto"?j:this._rotationAlignment,this._update(),this},U.prototype.getPitchAlignment=function(){return this._pitchAlignment},U}(l.Evented),Wi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},us=0,Xi=!1,Oo=function(R){function U(j){R.call(this),this.options=l.extend({},Wi,j),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.onAdd=function(j){return this._map=j,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),X=this._setupUI,ia!==void 0?X(ia):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(fe){ia=fe.state!=="denied",X(ia)}):(ia=!!l.window.navigator.geolocation,X(ia)),this._container;var X},U.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,us=0,Xi=!1},U.prototype._isOutOfMapMaxBounds=function(j){var X=this._map.getMaxBounds(),fe=j.coords;return X&&(fe.longitude<X.getWest()||fe.longitude>X.getEast()||fe.latitude<X.getSouth()||fe.latitude>X.getNorth())},U.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},U.prototype._onSuccess=function(j){if(this._map){if(this._isOutOfMapMaxBounds(j))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",j)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=j,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(j),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(j),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",j)),this._finish()}},U.prototype._updateCamera=function(j){var X=new l.LngLat(j.coords.longitude,j.coords.latitude),fe=j.coords.accuracy,Ae=this._map.getBearing(),F=l.extend({bearing:Ae},this.options.fitBoundsOptions);this._map.fitBounds(X.toBounds(fe),F,{geolocateSource:!0})},U.prototype._updateMarker=function(j){if(j){var X=new l.LngLat(j.coords.longitude,j.coords.latitude);this._accuracyCircleMarker.setLngLat(X).addTo(this._map),this._userLocationDotMarker.setLngLat(X).addTo(this._map),this._accuracy=j.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},U.prototype._updateCircleRadius=function(){var j=this._map._container.clientHeight/2,X=this._map.unproject([0,j]),fe=this._map.unproject([1,j]),Ae=X.distanceTo(fe),F=Math.ceil(2*this._accuracy/Ae);this._circleElement.style.width=F+"px",this._circleElement.style.height=F+"px"},U.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},U.prototype._onError=function(j){if(this._map){if(this.options.trackUserLocation)if(j.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var X=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=X,this._geolocateButton.setAttribute("aria-label",X),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(j.code===3&&Xi)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",j)),this._finish()}},U.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},U.prototype._setupUI=function(j){var X=this;if(this._container.addEventListener("contextmenu",function(F){return F.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",j===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var fe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}else{var Ae=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ae,this._geolocateButton.setAttribute("aria-label",Ae)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Po(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Po({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(F){var $=F.originalEvent&&F.originalEvent.type==="resize";F.geolocateSource||X._watchState!=="ACTIVE_LOCK"||$||(X._watchState="BACKGROUND",X._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),X._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),X.fire(new l.Event("trackuserlocationend")))})},U.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":us--,Xi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var j;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++us>1?(j={maximumAge:6e5,timeout:0},Xi=!0):(j=this.options.positionOptions,Xi=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,j)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},U.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},U}(l.Evented),Io={maxWidth:100,unit:"metric"},Cr=function(R){this.options=l.extend({},Io,R),l.bindAll(["_onMove","setUnit"],this)};function zi(R,U,j){var X=j&&j.maxWidth||100,fe=R._container.clientHeight/2,Ae=R.unproject([0,fe]),F=R.unproject([X,fe]),$=Ae.distanceTo(F);if(j&&j.unit==="imperial"){var ie=3.2808*$;ie>5280?$a(U,X,ie/5280,R._getUIString("ScaleControl.Miles")):$a(U,X,ie,R._getUIString("ScaleControl.Feet"))}else j&&j.unit==="nautical"?$a(U,X,$/1852,R._getUIString("ScaleControl.NauticalMiles")):$>=1e3?$a(U,X,$/1e3,R._getUIString("ScaleControl.Kilometers")):$a(U,X,$,R._getUIString("ScaleControl.Meters"))}function $a(R,U,j,X){var fe,Ae,F,$=(fe=j,(Ae=Math.pow(10,(""+Math.floor(fe)).length-1))*((F=fe/Ae)>=10?10:F>=5?5:F>=3?3:F>=2?2:F>=1?1:function(de){var xe=Math.pow(10,Math.ceil(-Math.log(de)/Math.LN10));return Math.round(de*xe)/xe}(F))),ie=$/j;R.style.width=U*ie+"px",R.innerHTML=$+"&nbsp;"+X}Cr.prototype.getDefaultPosition=function(){return"bottom-left"},Cr.prototype._onMove=function(){zi(this._map,this._container,this.options)},Cr.prototype.onAdd=function(R){return this._map=R,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Cr.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Cr.prototype.setUnit=function(R){this.options.unit=R,zi(this._map,this._container,this.options)};var da=function(R){this._fullscreen=!1,R&&R.container&&(R.container instanceof l.window.HTMLElement?this._container=R.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};da.prototype.onAdd=function(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},da.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},da.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},da.prototype._setupUI=function(){var R=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",R).setAttribute("aria-hidden",!0),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},da.prototype._updateTitle=function(){var R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R},da.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},da.prototype._isFullscreen=function(){return this._fullscreen},da.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},da.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var $o={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},cs=function(R){function U(j){R.call(this),this.options=l.extend(Object.create($o),j),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.addTo=function(j){return this._map&&this.remove(),this._map=j,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},U.prototype.isOpen=function(){return!!this._map},U.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},U.prototype.getLngLat=function(){return this._lngLat},U.prototype.setLngLat=function(j){return this._lngLat=l.LngLat.convert(j),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},U.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},U.prototype.getElement=function(){return this._container},U.prototype.setText=function(j){return this.setDOMContent(l.window.document.createTextNode(j))},U.prototype.setHTML=function(j){var X,fe=l.window.document.createDocumentFragment(),Ae=l.window.document.createElement("body");for(Ae.innerHTML=j;X=Ae.firstChild;)fe.appendChild(X);return this.setDOMContent(fe)},U.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},U.prototype.setMaxWidth=function(j){return this.options.maxWidth=j,this._update(),this},U.prototype.setDOMContent=function(j){return this._createContent(),this._content.appendChild(j),this._update(),this},U.prototype.addClassName=function(j){this._container&&this._container.classList.add(j)},U.prototype.removeClassName=function(j){this._container&&this._container.classList.remove(j)},U.prototype.toggleClassName=function(j){if(this._container)return this._container.classList.toggle(j)},U.prototype._createContent=function(){this._content&&b.remove(this._content),this._content=b.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},U.prototype._onMouseUp=function(j){this._update(j.point)},U.prototype._onMouseMove=function(j){this._update(j.point)},U.prototype._onDrag=function(j){this._update(j.point)},U.prototype._update=function(j){var X=this,fe=this._lngLat||this._trackPointer;if(this._map&&fe&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ne){return X._container.classList.add(Ne)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Tr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||j)){var Ae=this._pos=this._trackPointer&&j?j:this._map.project(this._lngLat),F=this.options.anchor,$=Qo(this.options.offset);if(!F){var ie,de=this._container.offsetWidth,xe=this._container.offsetHeight;ie=Ae.y+$.bottom.y<xe?["top"]:Ae.y>this._map.transform.height-xe?["bottom"]:[],Ae.x<de/2?ie.push("left"):Ae.x>this._map.transform.width-de/2&&ie.push("right"),F=ie.length===0?"bottom":ie.join("-")}var Le=Ae.add($[F]).round();b.setTransform(this._container,Ar[F]+" translate("+Le.x+"px,"+Le.y+"px)"),ls(this._container,F,"popup")}},U.prototype._onClose=function(){this.remove()},U}(l.Evented);function Qo(R){if(R){if(typeof R=="number"){var U=Math.round(Math.sqrt(.5*Math.pow(R,2)));return{center:new l.Point(0,0),top:new l.Point(0,R),"top-left":new l.Point(U,U),"top-right":new l.Point(-U,U),bottom:new l.Point(0,-R),"bottom-left":new l.Point(U,-U),"bottom-right":new l.Point(-U,-U),left:new l.Point(R,0),right:new l.Point(-R,0)}}if(R instanceof l.Point||Array.isArray(R)){var j=l.Point.convert(R);return{center:j,top:j,"top-left":j,"top-right":j,bottom:j,"bottom-left":j,"bottom-right":j,left:j,right:j}}return{center:l.Point.convert(R.center||[0,0]),top:l.Point.convert(R.top||[0,0]),"top-left":l.Point.convert(R["top-left"]||[0,0]),"top-right":l.Point.convert(R["top-right"]||[0,0]),bottom:l.Point.convert(R.bottom||[0,0]),"bottom-left":l.Point.convert(R["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(R["bottom-right"]||[0,0]),left:l.Point.convert(R.left||[0,0]),right:l.Point.convert(R.right||[0,0])}}return Qo(new l.Point(0,0))}var po={version:l.version,supported:T,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:Ns,NavigationControl:Ei,GeolocateControl:Oo,AttributionControl:pa,ScaleControl:Cr,FullscreenControl:da,Popup:cs,Marker:Po,Style:er,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){gt().acquire(nt)},clearPrewarmedResources:function(){var R=dt;R&&(R.isPreloaded()&&R.numActive()===1?(R.release(nt),dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(R){l.config.ACCESS_TOKEN=R},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(R){l.config.API_URL=R},get workerCount(){return tt.workerCount},set workerCount(R){tt.workerCount=R},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(R){l.config.MAX_PARALLEL_IMAGE_REQUESTS=R},clearStorage:function(R){l.clearTileCache(R)},workerUrl:""};return po}),M}()},27084:function(ee){ee.exports=Math.log2||function(D){return Math.log(D)*Math.LOG2E}},16825:function(ee,D,e){ee.exports=function(k,l){l||(l=k,k=window);var T=0,b=0,d=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(h){var y=!1;return"altKey"in h&&(y=y||h.altKey!==s.alt,s.alt=!!h.altKey),"shiftKey"in h&&(y=y||h.shiftKey!==s.shift,s.shift=!!h.shiftKey),"ctrlKey"in h&&(y=y||h.ctrlKey!==s.control,s.control=!!h.ctrlKey),"metaKey"in h&&(y=y||h.metaKey!==s.meta,s.meta=!!h.metaKey),y}function r(h,y){var v=M.x(y),m=M.y(y);"buttons"in y&&(h=0|y.buttons),(h!==T||v!==b||m!==d||i(y))&&(T=0|h,b=v||0,d=m||0,l&&l(T,b,d,s))}function n(h){r(0,h)}function o(){(T||b||d||s.shift||s.alt||s.meta||s.control)&&(b=d=0,T=0,s.shift=s.alt=s.control=s.meta=!1,l&&l(0,0,0,s))}function a(h){i(h)&&l&&l(T,b,d,s)}function u(h){M.buttons(h)===0?r(0,h):r(T,h)}function p(h){r(T|M.buttons(h),h)}function c(h){r(T&~M.buttons(h),h)}function x(){t||(t=!0,k.addEventListener("mousemove",u),k.addEventListener("mousedown",p),k.addEventListener("mouseup",c),k.addEventListener("mouseleave",n),k.addEventListener("mouseenter",n),k.addEventListener("mouseout",n),k.addEventListener("mouseover",n),k.addEventListener("blur",o),k.addEventListener("keyup",a),k.addEventListener("keydown",a),k.addEventListener("keypress",a),k!==window&&(window.addEventListener("blur",o),window.addEventListener("keyup",a),window.addEventListener("keydown",a),window.addEventListener("keypress",a)))}x();var g={element:k};return Object.defineProperties(g,{enabled:{get:function(){return t},set:function(h){h?x():t&&(t=!1,k.removeEventListener("mousemove",u),k.removeEventListener("mousedown",p),k.removeEventListener("mouseup",c),k.removeEventListener("mouseleave",n),k.removeEventListener("mouseenter",n),k.removeEventListener("mouseout",n),k.removeEventListener("mouseover",n),k.removeEventListener("blur",o),k.removeEventListener("keyup",a),k.removeEventListener("keydown",a),k.removeEventListener("keypress",a),k!==window&&(window.removeEventListener("blur",o),window.removeEventListener("keyup",a),window.removeEventListener("keydown",a),window.removeEventListener("keypress",a)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),g};var M=e(74311)},48956:function(ee){var D={left:0,top:0};ee.exports=function(e,M,k){M=M||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var l,T=e.clientX||0,b=e.clientY||0,d=(l=M)===window||l===document||l===document.body?D:l.getBoundingClientRect();return k[0]=T-d.left,k[1]=b-d.top,k}},74311:function(ee,D){function e(M){return M.target||M.srcElement||window}D.buttons=function(M){if(typeof M=="object"){if("buttons"in M)return M.buttons;if("which"in M){if((k=M.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in M){var k;if((k=M.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},D.element=e,D.x=function(M){if(typeof M=="object"){if("offsetX"in M)return M.offsetX;var k=e(M).getBoundingClientRect();return M.clientX-k.left}return 0},D.y=function(M){if(typeof M=="object"){if("offsetY"in M)return M.offsetY;var k=e(M).getBoundingClientRect();return M.clientY-k.top}return 0}},1195:function(ee,D,e){var M=e(75686);ee.exports=function(k,l,T){typeof k=="function"&&(T=!!l,l=k,k=window);var b=M("ex",k),d=function(s){T&&s.preventDefault();var t=s.deltaX||0,i=s.deltaY||0,r=s.deltaZ||0,n=1;switch(s.deltaMode){case 1:n=b;break;case 2:n=window.innerHeight}if(i*=n,r*=n,(t*=n)||i||r)return l(t,i,r,s)};return k.addEventListener("wheel",d),d}},7417:function(ee,D,e){var M;(function(k,l,T){l[k]=l[k]||function(){var b,d,s,t=Object.prototype.toString,i=typeof setImmediate<"u"?function(v){return setImmediate(v)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(v,m,_,f){return Object.defineProperty(v,m,{value:_,writable:!0,configurable:f!==!1})}}catch{b=function(m,_,f){return m[_]=f,m}}function r(v,m){s.add(v,m),d||(d=i(s.drain))}function n(v){var m,_=typeof v;return v==null||_!="object"&&_!="function"||(m=v.then),typeof m=="function"&&m}function o(){for(var v=0;v<this.chain.length;v++)a(this,this.state===1?this.chain[v].success:this.chain[v].failure,this.chain[v]);this.chain.length=0}function a(v,m,_){var f,S;try{m===!1?_.reject(v.msg):(f=m===!0?v.msg:m.call(void 0,v.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(S=n(f))?S.call(f,_.resolve,_.reject):_.resolve(f)}catch(w){_.reject(w)}}function u(v){var m,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(m=n(v))?r(function(){var f=new x(_);try{m.call(v,function(){u.apply(f,arguments)},function(){p.apply(f,arguments)})}catch(S){p.call(f,S)}}):(_.msg=v,_.state=1,_.chain.length>0&&r(o,_))}catch(f){p.call(new x(_),f)}}}function p(v){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=v,m.state=2,m.chain.length>0&&r(o,m))}function c(v,m,_,f){for(var S=0;S<m.length;S++)(function(w){v.resolve(m[w]).then(function(E){_(w,E)},f)})(S)}function x(v){this.def=v,this.triggered=!1}function g(v){this.promise=v,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(v){if(typeof v!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var m=new g(this);this.then=function(_,f){var S={success:typeof _!="function"||_,failure:typeof f=="function"&&f};return S.promise=new this.constructor(function(w,E){if(typeof w!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=w,S.reject=E}),m.chain.push(S),m.state!==0&&r(o,m),S.promise},this.catch=function(_){return this.then(void 0,_)};try{v.call(void 0,function(_){u.call(m,_)},function(_){p.call(m,_)})}catch(_){p.call(m,_)}}s=function(){var v,m,_;function f(S,w){this.fn=S,this.self=w,this.next=void 0}return{add:function(S,w){_=new f(S,w),m?m.next=_:v=_,m=_,_=void 0},drain:function(){var S=v;for(v=m=d=void 0;S;)S.fn.call(S.self),S=S.next}}}();var y=b({},"constructor",h,!1);return h.prototype=y,b(y,"__NPO__",0,!1),b(h,"resolve",function(v){return v&&typeof v=="object"&&v.__NPO__===1?v:new this(function(m,_){if(typeof m!="function"||typeof _!="function")throw TypeError("Not a function");m(v)})}),b(h,"reject",function(v){return new this(function(m,_){if(typeof m!="function"||typeof _!="function")throw TypeError("Not a function");_(v)})}),b(h,"all",function(v){var m=this;return t.call(v)!="[object Array]"?m.reject(TypeError("Not an array")):v.length===0?m.resolve([]):new m(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");var S=v.length,w=Array(S),E=0;c(m,v,function(L,C){w[L]=C,++E===S&&_(w)},f)})}),b(h,"race",function(v){var m=this;return t.call(v)!="[object Array]"?m.reject(TypeError("Not an array")):new m(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");c(m,v,function(S,w){_(w)},f)})}),h}(),ee.exports?ee.exports=l[k]:(M=(function(){return l[k]}).call(D,e,D,ee))===void 0||(ee.exports=M)})("Promise",e.g!==void 0?e.g:this)},18625:function(ee){var D=Math.PI,e=b(120);function M(d,s,t,i){return["C",d,s,t,i,t,i]}function k(d,s,t,i,r,n){return["C",d/3+.6666666666666666*t,s/3+.6666666666666666*i,r/3+.6666666666666666*t,n/3+.6666666666666666*i,r,n]}function l(d,s,t,i,r,n,o,a,u,p){if(p)S=p[0],w=p[1],_=p[2],f=p[3];else{var c=T(d,s,-r);d=c.x,s=c.y;var x=(d-(a=(c=T(a,u,-r)).x))/2,g=(s-(u=c.y))/2,h=x*x/(t*t)+g*g/(i*i);h>1&&(t*=h=Math.sqrt(h),i*=h);var y=t*t,v=i*i,m=(n==o?-1:1)*Math.sqrt(Math.abs((y*v-y*g*g-v*x*x)/(y*g*g+v*x*x)));m==1/0&&(m=1);var _=m*t*g/i+(d+a)/2,f=m*-i*x/t+(s+u)/2,S=Math.asin(((s-f)/i).toFixed(9)),w=Math.asin(((u-f)/i).toFixed(9));(S=d<_?D-S:S)<0&&(S=2*D+S),(w=a<_?D-w:w)<0&&(w=2*D+w),o&&S>w&&(S-=2*D),!o&&w>S&&(w-=2*D)}if(Math.abs(w-S)>e){var E=w,L=a,C=u;w=S+e*(o&&w>S?1:-1);var P=l(a=_+t*Math.cos(w),u=f+i*Math.sin(w),t,i,r,0,o,L,C,[w,E,_,f])}var z=Math.tan((w-S)/4),G=4/3*t*z,O=4/3*i*z,H=[2*d-(d+G*Math.sin(S)),2*s-(s-O*Math.cos(S)),a+G*Math.sin(w),u-O*Math.cos(w),a,u];if(p)return H;P&&(H=H.concat(P));for(var N=0;N<H.length;){var B=T(H[N],H[N+1],r);H[N++]=B.x,H[N++]=B.y}return H}function T(d,s,t){return{x:d*Math.cos(t)-s*Math.sin(t),y:d*Math.sin(t)+s*Math.cos(t)}}function b(d){return d*(D/180)}ee.exports=function(d){for(var s,t=[],i=0,r=0,n=0,o=0,a=null,u=null,p=0,c=0,x=0,g=d.length;x<g;x++){var h=d[x],y=h[0];switch(y){case"M":n=h[1],o=h[2];break;case"A":(h=l(p,c,h[1],h[2],b(h[3]),h[4],h[5],h[6],h[7])).unshift("C"),h.length>7&&(t.push(h.splice(0,7)),h.unshift("C"));break;case"S":var v=p,m=c;s!="C"&&s!="S"||(v+=v-i,m+=m-r),h=["C",v,m,h[1],h[2],h[3],h[4]];break;case"T":s=="Q"||s=="T"?(a=2*p-a,u=2*c-u):(a=p,u=c),h=k(p,c,a,u,h[1],h[2]);break;case"Q":a=h[1],u=h[2],h=k(p,c,h[1],h[2],h[3],h[4]);break;case"L":h=M(p,c,h[1],h[2]);break;case"H":h=M(p,c,h[1],c);break;case"V":h=M(p,c,p,h[1]);break;case"Z":h=M(p,c,n,o)}s=y,p=h[h.length-2],c=h[h.length-1],h.length>4?(i=h[h.length-4],r=h[h.length-3]):(i=p,r=c),t.push(h)}return t}},56131:function(ee){var D=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;ee.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de",Object.getOwnPropertyNames(k)[0]==="5")return!1;for(var l={},T=0;T<10;T++)l["_"+String.fromCharCode(T)]=T;if(Object.getOwnPropertyNames(l).map(function(d){return l[d]}).join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(d){b[d]=d}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(k,l){for(var T,b,d=function(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(k),s=1;s<arguments.length;s++){for(var t in T=Object(arguments[s]))e.call(T,t)&&(d[t]=T[t]);if(D){b=D(T);for(var i=0;i<b.length;i++)M.call(T,b[i])&&(d[b[i]]=T[b[i]])}}return d}},65848:function(ee){var D=function(e){return e!=e};ee.exports=function(e,M){return e===0&&M===0?1/e==1/M:e===M||!(!D(e)||!D(M))}},64003:function(ee,D,e){var M=e(17045),k=e(68222),l=e(65848),T=e(27015),b=e(55572),d=k(T(),Object);M(d,{getPolyfill:T,implementation:l,shim:b}),ee.exports=d},27015:function(ee,D,e){var M=e(65848);ee.exports=function(){return typeof Object.is=="function"?Object.is:M}},55572:function(ee,D,e){var M=e(27015),k=e(17045);ee.exports=function(){var l=M();return k(Object,{is:l},{is:function(){return Object.is!==l}}),l}},99019:function(ee,D,e){var M;if(!Object.keys){var k=Object.prototype.hasOwnProperty,l=Object.prototype.toString,T=e(64178),b=Object.prototype.propertyIsEnumerable,d=!b.call({toString:null},"toString"),s=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(o){var a=o.constructor;return a&&a.prototype===o},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var o in window)try{if(!r["$"+o]&&k.call(window,o)&&window[o]!==null&&typeof window[o]=="object")try{i(window[o])}catch{return!0}}catch{return!0}return!1}();M=function(o){var a=o!==null&&typeof o=="object",u=l.call(o)==="[object Function]",p=T(o),c=a&&l.call(o)==="[object String]",x=[];if(!a&&!u&&!p)throw new TypeError("Object.keys called on a non-object");var g=s&&u;if(c&&o.length>0&&!k.call(o,0))for(var h=0;h<o.length;++h)x.push(String(h));if(p&&o.length>0)for(var y=0;y<o.length;++y)x.push(String(y));else for(var v in o)g&&v==="prototype"||!k.call(o,v)||x.push(String(v));if(d)for(var m=function(f){if(typeof window>"u"||!n)return i(f);try{return i(f)}catch{return!1}}(o),_=0;_<t.length;++_)m&&t[_]==="constructor"||!k.call(o,t[_])||x.push(t[_]);return x}}ee.exports=M},8709:function(ee,D,e){var M=Array.prototype.slice,k=e(64178),l=Object.keys,T=l?function(d){return l(d)}:e(99019),b=Object.keys;T.shim=function(){if(Object.keys){var d=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);d||(Object.keys=function(s){return k(s)?b(M.call(s)):b(s)})}else Object.keys=T;return Object.keys||T},ee.exports=T},64178:function(ee){var D=Object.prototype.toString;ee.exports=function(e){var M=D.call(e),k=M==="[object Arguments]";return k||(k=M!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&D.call(e.callee)==="[object Function]"),k}},88641:function(ee){function D(k,l){if(typeof k!="string")return[k];var T=[k];typeof l=="string"||Array.isArray(l)?l={brackets:l}:l||(l={});var b=l.brackets?Array.isArray(l.brackets)?l.brackets:[l.brackets]:["{}","[]","()"],d=l.escape||"___",s=!!l.flat;b.forEach(function(i){var r=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),n=[];function o(a,u,p){var c=T.push(a.slice(i[0].length,-i[1].length))-1;return n.push(c),d+c+d}T.forEach(function(a,u){for(var p,c=0;a!=p;)if(p=a,a=a.replace(r,o),c++>1e4)throw Error("References have circular dependency. Please, check them.");T[u]=a}),n=n.reverse(),T=T.map(function(a){return n.forEach(function(u){a=a.replace(new RegExp("(\\"+d+u+"\\"+d+")","g"),i[0]+"$1"+i[1])}),a})});var t=new RegExp("\\"+d+"([0-9]+)\\"+d);return s?T:function i(r,n,o){for(var a,u=[],p=0;a=t.exec(r);){if(p++>1e4)throw Error("Circular references in parenthesis");u.push(r.slice(0,a.index)),u.push(i(n[a[1]],n)),r=r.slice(a.index+a[0].length)}return u.push(r),u}(T[0],T)}function e(k,l){if(l&&l.flat){var T,b=l&&l.escape||"___",d=k[0];if(!d)return"";for(var s=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;d!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=d,d=d.replace(s,i)}return d}return k.reduce(function r(n,o){return Array.isArray(o)&&(o=o.reduce(r,"")),n+o},"");function i(r,n){if(k[n]==null)throw Error("Reference "+n+"is undefined");return k[n]}}function M(k,l){return Array.isArray(k)?e(k,l):D(k,l)}M.parse=D,M.stringify=e,ee.exports=M},18863:function(ee,D,e){var M=e(71299);ee.exports=function(k){var l;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?l=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(l={x:(k=M(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?l.width=k.right-l.x:l.width=0:l.width=k.width,k.height==null?k.bottom?l.height=k.bottom-l.y:l.height=0:l.height=k.height),l}},95616:function(ee){ee.exports=function(k){var l=[];return k.replace(e,function(T,b,d){var s=b.toLowerCase();for(d=function(t){var i=t.match(M);return i?i.map(Number):[]}(d),s=="m"&&d.length>2&&(l.push([b].concat(d.splice(0,2))),s="l",b=b=="m"?"l":"L");;){if(d.length==D[s])return d.unshift(b),l.push(d);if(d.length<D[s])throw new Error("malformed path data");l.push([b].concat(d.splice(0,D[s])))}}),l};var D={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(ee){ee.exports=function(D,e){e||(e=[0,""]),D=String(D);var M=parseFloat(D,10);return e[0]=M,e[1]=D.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},9748:function(ee,D,e){var M=e(90386);(function(){var k,l,T,b,d,s;typeof performance<"u"&&performance!==null&&performance.now?ee.exports=function(){return performance.now()}:M!=null&&M.hrtime?(ee.exports=function(){return(k()-d)/1e6},l=M.hrtime,b=(k=function(){var t;return 1e9*(t=l())[0]+t[1]})(),s=1e9*M.uptime(),d=b-s):Date.now?(ee.exports=function(){return Date.now()-T},T=Date.now()):(ee.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},71299:function(ee){ee.exports=function(M,k,l){var T,b,d={};if(typeof k=="string"&&(k=e(k)),Array.isArray(k)){var s={};for(b=0;b<k.length;b++)s[k[b]]=!0;k=s}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var i=k[T];if(Array.isArray(i))for(b=0;b<i.length;b++){var r=i[b];if(l&&(t[r]=!0),r in M){if(d[T]=M[r],l)for(var n=b;n<i.length;n++)t[i[n]]=!0;break}}else T in M&&(k[T]&&(d[T]=M[T]),l&&(t[T]=!0))}if(l)for(T in M)t[T]||(d[T]=M[T]);return d};var D={};function e(M){return D[M]?D[M]:(typeof M=="string"&&(M=D[M]=M.split(/\s*,\s*|\s+/)),M)}},38258:function(ee){ee.exports=function(D,e,M,k){var l=D[0],T=D[1],b=!1;M===void 0&&(M=0),k===void 0&&(k=e.length);for(var d=k-M,s=0,t=d-1;s<d;t=s++){var i=e[s+M][0],r=e[s+M][1],n=e[t+M][0],o=e[t+M][1];r>T!=o>T&&l<(n-i)*(T-r)/(o-r)+i&&(b=!b)}return b}},52142:function(ee,D,e){var M,k=e(69444),l=e(29023),T=e(87263),b=e(11328),d=e(55968),s=e(10670),t=!1,i=l();function r(n,o,a){var u=M.segments(n),p=M.segments(o),c=a(M.combine(u,p));return M.polygon(c)}M={buildLog:function(n){return n===!0?t=k():n===!1&&(t=!1),t!==!1&&t.list},epsilon:function(n){return i.epsilon(n)},segments:function(n){var o=T(!0,i,t);return n.regions.forEach(o.addRegion),{segments:o.calculate(n.inverted),inverted:n.inverted}},combine:function(n,o){return{combined:T(!1,i,t).calculate(n.segments,n.inverted,o.segments,o.inverted),inverted1:n.inverted,inverted2:o.inverted}},selectUnion:function(n){return{segments:d.union(n.combined,t),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:d.intersect(n.combined,t),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:d.difference(n.combined,t),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:d.differenceRev(n.combined,t),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:d.xor(n.combined,t),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:b(n.segments,i,t),inverted:n.inverted}},polygonFromGeoJSON:function(n){return s.toPolygon(M,n)},polygonToGeoJSON:function(n){return s.fromPolygon(M,i,n)},union:function(n,o){return r(n,o,M.selectUnion)},intersect:function(n,o){return r(n,o,M.selectIntersect)},difference:function(n,o){return r(n,o,M.selectDifference)},differenceRev:function(n,o){return r(n,o,M.selectDifferenceRev)},xor:function(n,o){return r(n,o,M.selectXor)}},typeof window=="object"&&(window.PolyBool=M),ee.exports=M},69444:function(ee){ee.exports=function(){var D,e=0,M=!1;function k(l,T){return D.list.push({type:l,data:T?JSON.parse(JSON.stringify(T)):void 0}),D}return D={list:[],segmentId:function(){return e++},checkIntersection:function(l,T){return k("check",{seg1:l,seg2:T})},segmentChop:function(l,T){return k("div_seg",{seg:l,pt:T}),k("chop",{seg:l,pt:T})},statusRemove:function(l){return k("pop_seg",{seg:l})},segmentUpdate:function(l){return k("seg_update",{seg:l})},segmentNew:function(l,T){return k("new_seg",{seg:l,primary:T})},segmentRemove:function(l){return k("rem_seg",{seg:l})},tempStatus:function(l,T,b){return k("temp_status",{seg:l,above:T,below:b})},rewind:function(l){return k("rewind",{seg:l})},status:function(l,T,b){return k("status",{seg:l,above:T,below:b})},vert:function(l){return l===M?D:(M=l,k("vert",{x:l}))},log:function(l){return typeof l!="string"&&(l=JSON.stringify(l,!1,"  ")),k("log",{txt:l})},reset:function(){return k("reset")},selected:function(l){return k("selected",{segs:l})},chainStart:function(l){return k("chain_start",{seg:l})},chainRemoveHead:function(l,T){return k("chain_rem_head",{index:l,pt:T})},chainRemoveTail:function(l,T){return k("chain_rem_tail",{index:l,pt:T})},chainNew:function(l,T){return k("chain_new",{pt1:l,pt2:T})},chainMatch:function(l){return k("chain_match",{index:l})},chainClose:function(l){return k("chain_close",{index:l})},chainAddHead:function(l,T){return k("chain_add_head",{index:l,pt:T})},chainAddTail:function(l,T){return k("chain_add_tail",{index:l,pt:T})},chainConnect:function(l,T){return k("chain_con",{index1:l,index2:T})},chainReverse:function(l){return k("chain_rev",{index:l})},chainJoin:function(l,T){return k("chain_join",{index1:l,index2:T})},done:function(){return k("done")}}}},29023:function(ee){ee.exports=function(D){typeof D!="number"&&(D=1e-10);var e={epsilon:function(M){return typeof M=="number"&&(D=M),D},pointAboveOrOnLine:function(M,k,l){var T=k[0],b=k[1],d=l[0],s=l[1],t=M[0];return(d-T)*(M[1]-b)-(s-b)*(t-T)>=-D},pointBetween:function(M,k,l){var T=M[1]-k[1],b=l[0]-k[0],d=M[0]-k[0],s=l[1]-k[1],t=d*b+T*s;return!(t<D||t-(b*b+s*s)>-D)},pointsSameX:function(M,k){return Math.abs(M[0]-k[0])<D},pointsSameY:function(M,k){return Math.abs(M[1]-k[1])<D},pointsSame:function(M,k){return e.pointsSameX(M,k)&&e.pointsSameY(M,k)},pointsCompare:function(M,k){return e.pointsSameX(M,k)?e.pointsSameY(M,k)?0:M[1]<k[1]?-1:1:M[0]<k[0]?-1:1},pointsCollinear:function(M,k,l){var T=M[0]-k[0],b=M[1]-k[1],d=k[0]-l[0],s=k[1]-l[1];return Math.abs(T*s-d*b)<D},linesIntersect:function(M,k,l,T){var b=k[0]-M[0],d=k[1]-M[1],s=T[0]-l[0],t=T[1]-l[1],i=b*t-d*s;if(Math.abs(i)<D)return!1;var r=M[0]-l[0],n=M[1]-l[1],o=(s*n-t*r)/i,a=(b*n-d*r)/i,u={alongA:0,alongB:0,pt:[M[0]+o*b,M[1]+o*d]};return u.alongA=o<=-D?-2:o<D?-1:o-1<=-D?0:o-1<D?1:2,u.alongB=a<=-D?-2:a<D?-1:a-1<=-D?0:a-1<D?1:2,u},pointInsideRegion:function(M,k){for(var l=M[0],T=M[1],b=k[k.length-1][0],d=k[k.length-1][1],s=!1,t=0;t<k.length;t++){var i=k[t][0],r=k[t][1];r-T>D!=d-T>D&&(b-i)*(T-r)/(d-r)+i-l>D&&(s=!s),b=i,d=r}return s}};return e}},10670:function(ee){var D={toPolygon:function(e,M){function k(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function d(i){var r=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[r]})}for(var s=d(b[0]),t=1;t<b.length;t++)s=e.selectDifference(e.combine(s,d(b[t])));return s}if(M.type==="Polygon")return e.polygon(k(M.coordinates));if(M.type==="MultiPolygon"){for(var l=e.segments({inverted:!1,regions:[]}),T=0;T<M.coordinates.length;T++)l=e.selectUnion(e.combine(l,k(M.coordinates[T])));return e.polygon(l)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,M,k){function l(a,u){return M.pointInsideRegion([.5*(a[0][0]+a[1][0]),.5*(a[0][1]+a[1][1])],u)}function T(a){return{region:a,children:[]}}k=e.polygon(e.segments(k));var b=T(null);function d(a,u){for(var p=0;p<a.children.length;p++)if(l(u,(x=a.children[p]).region))return void d(x,u);var c=T(u);for(p=0;p<a.children.length;p++){var x;l((x=a.children[p]).region,u)&&(c.children.push(x),a.children.splice(p,1),p--)}a.children.push(c)}for(var s=0;s<k.regions.length;s++){var t=k.regions[s];t.length<3||d(b,t)}function i(a,u){for(var p=0,c=a[a.length-1][0],x=a[a.length-1][1],g=[],h=0;h<a.length;h++){var y=a[h][0],v=a[h][1];g.push([y,v]),p+=v*c-y*x,c=y,x=v}return p<0!==u&&g.reverse(),g.push([g[0][0],g[0][1]]),g}var r=[];function n(a){var u=[i(a.region,!1)];r.push(u);for(var p=0;p<a.children.length;p++)u.push(o(a.children[p]))}function o(a){for(var u=0;u<a.children.length;u++)n(a.children[u]);return i(a.region,!0)}for(s=0;s<b.children.length;s++)n(b.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};ee.exports=D},87263:function(ee,D,e){var M=e(26859);ee.exports=function(k,l,T){function b(n,o,a){return{id:T?T.segmentId():-1,start:n,end:o,myFill:{above:a.myFill.above,below:a.myFill.below},otherFill:null}}var d=M.create();function s(n,o){d.insertBefore(n,function(a){return u=n.isStart,p=n.pt,c=o,x=a.isStart,g=a.pt,h=a.other.pt,((y=l.pointsCompare(p,g))!==0?y:l.pointsSame(c,h)?0:u!==x?u?1:-1:l.pointAboveOrOnLine(c,x?g:h,x?h:g)?1:-1)<0;var u,p,c,x,g,h,y})}function t(n,o){var a=function(u,p){var c=M.node({isStart:!0,pt:u.start,seg:u,primary:p,other:null,status:null});return s(c,u.end),c}(n,o);return function(u,p,c){var x=M.node({isStart:!1,pt:p.end,seg:p,primary:c,other:u,status:null});u.other=x,s(x,u.pt)}(a,n,o),a}function i(n,o){var a=b(o,n.seg.end,n.seg);return function(u,p){T&&T.segmentChop(u.seg,p),u.other.remove(),u.seg.end=p,u.other.pt=p,s(u.other,u.pt)}(n,o),t(a,n.primary)}function r(n,o){var a=M.create();function u(w){return a.findTransition(function(E){var L,C,P,z,G,O;return L=w,C=E.ev,P=L.seg.start,z=L.seg.end,G=C.seg.start,O=C.seg.end,(l.pointsCollinear(P,G,O)?l.pointsCollinear(z,G,O)||l.pointAboveOrOnLine(z,G,O)?1:-1:l.pointAboveOrOnLine(P,G,O)?1:-1)>0})}function p(w,E){var L=w.seg,C=E.seg,P=L.start,z=L.end,G=C.start,O=C.end;T&&T.checkIntersection(L,C);var H=l.linesIntersect(P,z,G,O);if(H===!1){if(!l.pointsCollinear(P,z,G)||l.pointsSame(P,O)||l.pointsSame(z,G))return!1;var N=l.pointsSame(P,G),B=l.pointsSame(z,O);if(N&&B)return E;var V=!N&&l.pointBetween(P,G,O),q=!B&&l.pointBetween(z,G,O);if(N)return q?i(E,z):i(w,O),E;V&&(B||(q?i(E,z):i(w,O)),i(E,P))}else H.alongA===0&&(H.alongB===-1?i(w,G):H.alongB===0?i(w,H.pt):H.alongB===1&&i(w,O)),H.alongB===0&&(H.alongA===-1?i(E,P):H.alongA===0?i(E,H.pt):H.alongA===1&&i(E,z));return!1}for(var c=[];!d.isEmpty();){var x=d.getHead();if(T&&T.vert(x.pt[0]),x.isStart){let w=function(){if(h){var E=p(x,h);if(E)return E}return!!y&&p(x,y)};T&&T.segmentNew(x.seg,x.primary);var g=u(x),h=g.before?g.before.ev:null,y=g.after?g.after.ev:null;T&&T.tempStatus(x.seg,!!h&&h.seg,!!y&&y.seg);var v,m,_=w();if(_&&(k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=x.seg.myFill,T&&T.segmentUpdate(_.seg),x.other.remove(),x.remove()),d.getHead()!==x){T&&T.rewind(x.seg);continue}k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=y?y.seg.myFill.above:n,x.seg.myFill.above=m?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(v=y?x.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:x.primary?o:n,x.seg.otherFill={above:v,below:v}),T&&T.status(x.seg,!!h&&h.seg,!!y&&y.seg),x.other.status=g.insert(M.node({ev:x}))}else{var f=x.status;if(f===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(a.exists(f.prev)&&a.exists(f.next)&&p(f.prev.ev,f.next.ev),T&&T.statusRemove(f.ev.seg),f.remove(),!x.primary){var S=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=S}c.push(x.seg)}d.getHead().remove()}return T&&T.done(),c}return k?{addRegion:function(n){for(var o,a,u,p=n[n.length-1],c=0;c<n.length;c++){o=p,p=n[c];var x=l.pointsCompare(o,p);x!==0&&t((a=x<0?o:p,u=x<0?p:o,{id:T?T.segmentId():-1,start:a,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,o,a,u){return n.forEach(function(p){t(b(p.start,p.end,p),!0)}),a.forEach(function(p){t(b(p.start,p.end,p),!1)}),r(o,u)}}}},26859:function(ee){ee.exports={create:function(){var D={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==D.root},isEmpty:function(){return D.root.next===null},getHead:function(){return D.root.next},insertBefore:function(e,M){for(var k=D.root,l=D.root.next;l!==null;){if(M(l))return e.prev=l.prev,e.next=l,l.prev.next=e,void(l.prev=e);k=l,l=l.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var M=D.root,k=D.root.next;k!==null&&!e(k);)M=k,k=k.next;return{before:M===D.root?null:M,after:k,insert:function(l){return l.prev=M,l.next=k,M.next=l,k!==null&&(k.prev=l),l}}}};return D},node:function(D){return D.prev=null,D.next=null,D.remove=function(){D.prev.next=D.next,D.next&&(D.next.prev=D.prev),D.prev=null,D.next=null},D}}},11328:function(ee){ee.exports=function(D,e,M){var k=[],l=[];return D.forEach(function(T){var b=T.start,d=T.end;if(e.pointsSame(b,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=s,r=0;r<k.length;r++){var n=(c=k[r])[0],o=(c[1],c[c.length-1]);if(c[c.length-2],e.pointsSame(n,b)){if(f(r,!0,!0))break}else if(e.pointsSame(n,d)){if(f(r,!0,!1))break}else if(e.pointsSame(o,b)){if(f(r,!1,!0))break}else if(e.pointsSame(o,d)&&f(r,!1,!1))break}if(i===s)return k.push([b,d]),void(M&&M.chainNew(b,d));if(i===t){M&&M.chainMatch(s.index);var a=s.index,u=s.matches_pt1?d:b,p=s.matches_head,c=k[a],x=p?c[0]:c[c.length-1],g=p?c[1]:c[c.length-2],h=p?c[c.length-1]:c[0],y=p?c[c.length-2]:c[1];return e.pointsCollinear(g,x,u)&&(p?(M&&M.chainRemoveHead(s.index,u),c.shift()):(M&&M.chainRemoveTail(s.index,u),c.pop()),x=g),e.pointsSame(h,u)?(k.splice(a,1),e.pointsCollinear(y,h,x)&&(p?(M&&M.chainRemoveTail(s.index,x),c.pop()):(M&&M.chainRemoveHead(s.index,x),c.shift())),M&&M.chainClose(s.index),void l.push(c)):void(p?(M&&M.chainAddHead(s.index,u),c.unshift(u)):(M&&M.chainAddTail(s.index,u),c.push(u)))}var v=s.index,m=t.index;M&&M.chainConnect(v,m);var _=k[v].length<k[m].length;s.matches_head?t.matches_head?_?(S(v),w(v,m)):(S(m),w(m,v)):w(m,v):t.matches_head?w(v,m):_?(S(v),w(m,v)):(S(m),w(v,m))}function f(E,L,C){return i.index=E,i.matches_head=L,i.matches_pt1=C,i===s?(i=t,!1):(i=null,!0)}function S(E){M&&M.chainReverse(E),k[E].reverse()}function w(E,L){var C=k[E],P=k[L],z=C[C.length-1],G=C[C.length-2],O=P[0],H=P[1];e.pointsCollinear(G,z,O)&&(M&&M.chainRemoveTail(E,z),C.pop(),z=G),e.pointsCollinear(z,O,H)&&(M&&M.chainRemoveHead(L,O),P.shift()),M&&M.chainJoin(E,L),k[E]=C.concat(P),k.splice(L,1)}}),l}},55968:function(ee){function D(M,k,l){var T=[];return M.forEach(function(b){var d=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);k[d]!==0&&T.push({id:l?l.segmentId():-1,start:b.start,end:b.end,myFill:{above:k[d]===1,below:k[d]===2},otherFill:null})}),l&&l.selected(T),T}var e={union:function(M,k){return D(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(M,k){return D(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(M,k){return D(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(M,k){return D(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(M,k){return D(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};ee.exports=e},14847:function(ee,D,e){var M=e(21630).Transform,k=e(90715);function l(){M.call(this,{readableObjectMode:!0})}function T(b,d,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=b,d&&(this.code=d),s&&(this.statusCode=s)}l.prototype=Object.create(M.prototype),l.prototype.constructor=l,k(l.prototype),D.OF=function(b,d,s){for(var t=d,i=0;i<s.length;)if(b[t++]!==s[i++])return!1;return!0},D.eG=function(b,d){var s=[],t=0;if(d&&d==="hex")for(;t<b.length;)s.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)s.push(255&b.charCodeAt(t));return s},D.mP=function(b,d){return b[d]|b[d+1]<<8},D.n8=function(b,d){return b[d+1]|b[d]<<8},D.nm=function(b,d){return b[d]|b[d+1]<<8|b[d+2]<<16|16777216*b[d+3]},D.Ag=function(b,d){return b[d+3]|b[d+2]<<8|b[d+1]<<16|16777216*b[d]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},71371:function(ee){function D(k,l){var T=new Error(k);return T.code=l,T}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function M(k,l,T){this.input=k.subarray(l,T),this.start=l;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if(b!=="II*\0"&&b!=="MM\0*")throw D("invalid TIFF signature","EBADDATA");this.big_endian=b[0]==="M"}M.prototype.each=function(k){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},M.prototype.read_uint16=function(k){var l=this.input;if(k+2>l.length)throw D("unexpected EOF","EBADDATA");return this.big_endian?256*l[k]+l[k+1]:l[k]+256*l[k+1]},M.prototype.read_uint32=function(k){var l=this.input;if(k+4>l.length)throw D("unexpected EOF","EBADDATA");return this.big_endian?16777216*l[k]+65536*l[k+1]+256*l[k+2]+l[k+3]:l[k]+256*l[k+1]+65536*l[k+2]+16777216*l[k+3]},M.prototype.is_subifd_link=function(k,l){return k===0&&l===34665||k===0&&l===34853||k===34665&&l===40965},M.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(k,l){var T;switch(k){case 1:case 2:return this.input[l];case 6:return(T=this.input[l])|33554430*(128&T);case 3:return this.read_uint16(l);case 8:return(T=this.read_uint16(l))|131070*(32768&T);case 4:return this.read_uint32(l);case 9:return 0|this.read_uint32(l);default:return null}},M.prototype.scan_ifd=function(k,l,T){var b=this.read_uint16(l);l+=2;for(var d=0;d<b;d++){var s=this.read_uint16(l),t=this.read_uint16(l+2),i=this.read_uint32(l+4),r=this.exif_format_length(t),n=i*r,o=n<=4?l+8:this.read_uint32(l+8),a=!1;if(o+n>this.input.length)throw D("unexpected EOF","EBADDATA");for(var u=[],p=o,c=0;c<i;c++,p+=r){var x=this.exif_format_read(t,p);if(x===null){u=null;break}u.push(x)}if(Array.isArray(u)&&t===2&&(u=e(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:s,offset:u[0]}),a=!0),T({is_big_endian:this.big_endian,ifd:k,tag:s,format:t,count:i,entry_offset:l+this.start,data_length:n,data_offset:o+this.start,value:u,is_subifd_link:a})===!1)return void(this.aborted=!0);l+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},ee.exports.ExifParser=M,ee.exports.get_orientation=function(k){var l=0;try{return new M(k,0,k.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return l=T.value[0],!1}),l}catch{return-1}}},76767:function(ee,D,e){var M=e(14847).n8,k=e(14847).Ag;function l(i,r){if(i.length<4+r)return null;var n=k(i,r);return i.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(r+4,r+8)),data:i.slice(r+8,r+n),end:r+n}}function T(i,r){for(var n=0;;){var o=l(i,n);if(!o)break;switch(o.boxtype){case"ispe":r.sizes.push({width:k(o.data,4),height:k(o.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&o.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&o.data[0]})}n=o.end}}function b(i,r,n){for(var o=0,a=0;a<n;a++)o=256*o+(i[r+a]||0);return o}function d(i,r){for(var n=i[4]>>4&15,o=15&i[4],a=i[5]>>4&15,u=M(i,6),p=8,c=0;c<u;c++){var x=M(i,p),g=M(i,p+=2),h=b(i,p+=2,a),y=M(i,p+=a);if(p+=2,g===0&&y===1){var v=b(i,p,n),m=b(i,p+n,o);r.item_loc[x]={length:m,offset:v+h}}p+=y*(n+o)}}function s(i,r){for(var n=M(i,4),o=6,a=0;a<n;a++){var u=l(i,o);if(!u)break;if(u.boxtype==="infe"){for(var p=M(u.data,4),c="",x=8;x<u.data.length&&u.data[x];x++)c+=String.fromCharCode(u.data[x]);r.item_inf[c]=p}o=u.end}}function t(i,r){for(var n=0;;){var o=l(i,n);if(!o)break;o.boxtype==="ipco"&&T(o.data,r),n=o.end}}ee.exports.unbox=l,ee.exports.readSizeFromMeta=function(i){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,g){for(var h=4;;){var y=l(x,h);if(!y)break;y.boxtype==="iprp"&&t(y.data,g),y.boxtype==="iloc"&&d(y.data,g),y.boxtype==="iinf"&&s(y.data,g),h=y.end}}(i,r),r.sizes.length){var n,o,a,u=(o=(n=r.sizes).reduce(function(x,g){return x.width>g.width||x.width===g.width&&x.height>g.height?x:g}),a=n.reduce(function(x,g){return x.height>g.height||x.height===g.height&&x.width>g.width?x:g}),o.width>a.height||o.width===a.height&&o.height>a.width?o:a),p=1;r.transforms.forEach(function(x){var g={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},h={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(p=x.value===0?h[p]:g[p=g[p=h[p]]]),x.type==="irot")for(var y=0;y<x.value;y++)p=g[p]});var c=null;return r.item_inf.Exif&&(c=r.item_loc[r.item_inf.Exif]),{width:u.width,height:u.height,orientation:r.transforms.length?p:null,variants:r.sizes,exif_location:c}}},ee.exports.getMimeType=function(i){var r=String.fromCharCode.apply(null,i.slice(0,4)),n={};n[r]=!0;for(var o=8;o<i.length;o+=4)n[String.fromCharCode.apply(null,i.slice(o,o+4))]=!0;if(n.mif1||n.msf1||n.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(ee,D,e){var M=e(14847).eG,k=e(14847).OF,l=e(14847).Ag,T=e(76767),b=e(71371),d=M("ftyp");ee.exports=function(s){if(k(s,4,d)){var t=T.unbox(s,0);if(t){var i=T.getMimeType(t.data);if(i){for(var r,n=t.end;;){var o=T.unbox(s,n);if(!o)break;if(n=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){r=o.data;break}}if(r){var a=T.readSizeFromMeta(r);if(a){var u={width:a.width,height:a.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(a.variants.length>1&&(u.variants=a.variants),a.orientation&&(u.orientation=a.orientation),a.exif_location&&a.exif_location.offset+a.exif_location.length<=s.length){var p=l(s,a.exif_location.offset),c=s.slice(a.exif_location.offset+p+4,a.exif_location.offset+a.exif_location.length),x=b.get_orientation(c);x>0&&(u.orientation=x)}return u}}}}}}},2504:function(ee,D,e){var M=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=M("BM");ee.exports=function(b){if(!(b.length<26)&&k(b,0,T))return{width:l(b,18),height:l(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(ee,D,e){var M=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=M("GIF87a"),b=M("GIF89a");ee.exports=function(d){if(!(d.length<10)&&(k(d,0,T)||k(d,0,b)))return{width:l(d,6),height:l(d,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(ee,D,e){var M=e(14847).mP;ee.exports=function(k){var l=M(k,0),T=M(k,2),b=M(k,4);if(l===0&&T===1&&b){for(var d=[],s={width:0,height:0},t=0;t<b;t++){var i=k[6+16*t]||256,r=k[6+16*t+1]||256,n={width:i,height:r};d.push(n),(i>s.width||r>s.height)&&(s=n)}return{width:s.width,height:s.height,variants:d,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(ee,D,e){var M=e(14847).n8,k=e(14847).eG,l=e(14847).OF,T=e(71371),b=k("Exif\0\0");ee.exports=function(d){if(!(d.length<2)&&d[0]===255&&d[1]===216&&d[2]===255)for(var s=2;;){for(;;){if(d.length-s<2)return;if(d[s++]===255)break}for(var t,i,r=d[s++];r===255;)r=d[s++];if(208<=r&&r<=217||r===1)t=0;else{if(!(192<=r&&r<=254)||d.length-s<2)return;t=M(d,s)-2,s+=2}if(r===217||r===218)return;if(r===225&&t>=10&&l(d,s,b)&&(i=T.get_orientation(d.slice(s+6,s+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(d.length-s<t)return;var n={width:M(d,s+3),height:M(d,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(n.orientation=i),n}s+=t}}},6303:function(ee,D,e){var M=e(14847).eG,k=e(14847).OF,l=e(14847).Ag,T=M(`PNG\r

`),b=M("IHDR");ee.exports=function(d){if(!(d.length<24)&&k(d,0,T)&&k(d,12,b))return{width:l(d,16),height:l(d,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(ee,D,e){var M=e(14847).eG,k=e(14847).OF,l=e(14847).Ag,T=M("8BPS\0");ee.exports=function(b){if(!(b.length<22)&&k(b,0,T))return{width:l(b,18),height:l(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(ee){function D(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,M=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,l=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function d(s){return b.test(s)?s.match(b)[0]:"px"}ee.exports=function(s){if(function(h){var y,v=0,m=h.length;for(h[0]===239&&h[1]===187&&h[2]===191&&(v=3);v<m&&((y=h[v])===32||y===9||y===13||y===10);)v++;return v!==m&&h[v]===60}(s)){for(var t="",i=0;i<s.length;i++)t+=String.fromCharCode(s[i]);var r=(t.match(e)||[""])[0];if(M.test(r)){var n=function(h){var y=h.match(k),v=h.match(l),m=h.match(T);return{width:y&&(y[1]||y[2]),height:v&&(v[1]||v[2]),viewbox:m&&(m[1]||m[2])}}(r),o=parseFloat(n.width),a=parseFloat(n.height);if(n.width&&n.height)return!D(o)||!D(a)?void 0:{width:o,height:a,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.height)};var u=(n.viewbox||"").split(" "),p={width:u[2],height:u[3]},c=parseFloat(p.width),x=parseFloat(p.height);if(D(c)&&D(x)&&d(p.width)===d(p.height)){var g=c/x;return n.width?D(o)?{width:o,height:o/g,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.width)}:void 0:n.height?D(a)?{width:a*g,height:a,type:"svg",mime:"image/svg+xml",wUnits:d(n.height),hUnits:d(n.height)}:void 0:{width:c,height:x,type:"svg",mime:"image/svg+xml",wUnits:d(p.width),hUnits:d(p.height)}}}}}},66278:function(ee,D,e){var M=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=e(14847).n8,b=e(14847).nm,d=e(14847).Ag,s=M("II*\0"),t=M("MM\0*");function i(o,a,u){return u?T(o,a):l(o,a)}function r(o,a,u){return u?d(o,a):b(o,a)}function n(o,a,u){var p=i(o,a+2,u);return r(o,a+4,u)!==1||p!==3&&p!==4?null:p===3?i(o,a+8,u):r(o,a+8,u)}ee.exports=function(o){if(!(o.length<8)&&(k(o,0,s)||k(o,0,t))){var a=o[0]===77,u=r(o,4,a)-8;if(!(u<0)){var p=u+8;if(!(o.length-p<2)){var c=12*i(o,p+0,a);if(!(c<=0||(p+=2,o.length-p<c))){var x,g,h,y;for(x=0;x<c;x+=12)(y=i(o,p+x,a))===256?g=n(o,p+x,a):y===257&&(h=n(o,p+x,a));return g&&h?{width:g,height:h,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function(ee,D,e){var M=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=e(14847).nm,b=e(71371),d=M("RIFF"),s=M("WEBP");function t(n,o){if(n[o+3]===157&&n[o+4]===1&&n[o+5]===42)return{width:16383&l(n,o+6),height:16383&l(n,o+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(n,o){if(n[o]===47){var a=T(n,o+1);return{width:1+(16383&a),height:1+(a>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,o){return{width:1+(n[o+6]<<16|n[o+5]<<8|n[o+4]),height:1+(n[o+9]<<o|n[o+8]<<8|n[o+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ee.exports=function(n){if(!(n.length<16)&&(k(n,0,d)||k(n,8,s))){var o=12,a=null,u=0,p=T(n,4)+8;if(!(p>n.length)){for(;o+8<p;)if(n[o]!==0){var c=String.fromCharCode.apply(null,n.slice(o,o+4)),x=T(n,o+4);c==="VP8 "&&x>=10?a=a||t(n,o+8):c==="VP8L"&&x>=9?a=a||i(n,o+8):c==="VP8X"&&x>=10?a=a||r(n,o+8):c==="EXIF"&&(u=b.get_orientation(n.slice(o+8,o+8+x)),o=1/0),o+=8+x}else o++;if(a)return u>0&&(a.orientation=u),a}}}},91497:function(ee,D,e){ee.exports={avif:e(24461),bmp:e(2504),gif:e(47342),ico:e(31355),jpeg:e(54261),png:e(6303),psd:e(38689),svg:e(6881),tiff:e(66278),webp:e(90784)}},33575:function(ee,D,e){var M=e(91497);ee.exports=function(k){return function(l){for(var T=Object.keys(M),b=0;b<T.length;b++){var d=M[T[b]](l);if(d)return d}return null}(k)},ee.exports.parsers=M},90386:function(ee){var D,e,M=ee.exports={};function k(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function T(a){if(D===setTimeout)return setTimeout(a,0);if((D===k||!D)&&setTimeout)return D=setTimeout,setTimeout(a,0);try{return D(a,0)}catch{try{return D.call(null,a,0)}catch{return D.call(this,a,0)}}}(function(){try{D=typeof setTimeout=="function"?setTimeout:k}catch{D=k}try{e=typeof clearTimeout=="function"?clearTimeout:l}catch{e=l}})();var b,d=[],s=!1,t=-1;function i(){s&&b&&(s=!1,b.length?d=b.concat(d):t=-1,d.length&&r())}function r(){if(!s){var a=T(i);s=!0;for(var u=d.length;u;){for(b=d,d=[];++t<u;)b&&b[t].run();t=-1,u=d.length}b=null,s=!1,function(p){if(e===clearTimeout)return clearTimeout(p);if((e===l||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(p);try{return e(p)}catch{try{return e.call(null,p)}catch{return e.call(this,p)}}}(a)}}function n(a,u){this.fun=a,this.array=u}function o(){}M.nextTick=function(a){var u=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)u[p-1]=arguments[p];d.push(new n(a,u)),d.length!==1||s||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=o,M.addListener=o,M.once=o,M.off=o,M.removeListener=o,M.removeAllListeners=o,M.emit=o,M.prependListener=o,M.prependOnceListener=o,M.listeners=function(a){return[]},M.binding=function(a){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(a){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},5877:function(ee,D,e){for(var M=e(9748),k=typeof window>"u"?e.g:window,l=["moz","webkit"],T="AnimationFrame",b=k["request"+T],d=k["cancel"+T]||k["cancelRequest"+T],s=0;!b&&s<l.length;s++)b=k[l[s]+"Request"+T],d=k[l[s]+"Cancel"+T]||k[l[s]+"CancelRequest"+T];if(!b||!d){var t=0,i=0,r=[];b=function(n){if(r.length===0){var o=M(),a=Math.max(0,16.666666666666668-(o-t));t=a+o,setTimeout(function(){var u=r.slice(0);r.length=0;for(var p=0;p<u.length;p++)if(!u[p].cancelled)try{u[p].callback(t)}catch(c){setTimeout(function(){throw c},0)}},Math.round(a))}return r.push({handle:++i,callback:n,cancelled:!1}),i},d=function(n){for(var o=0;o<r.length;o++)r[o].handle===n&&(r[o].cancelled=!0)}}ee.exports=function(n){return b.call(k,n)},ee.exports.cancel=function(){d.apply(k,arguments)},ee.exports.polyfill=function(n){n||(n=k),n.requestAnimationFrame=b,n.cancelAnimationFrame=d}},3593:function(ee,D,e){var M=e(21527),k=e(25075),l=e(93447),T=e(71299),b=e(56131),d=e(30120),s=e(57060),t=s.float32,i=s.fract32;ee.exports=function(n,o){if(typeof n=="function"?(o||(o={}),o.regl=n):o=n,o.length&&(o.positions=o),!(n=o.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var a,u,p,c,x,g,h=n._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},v=[];return c=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=n.buffer({usage:"static",type:"float",data:r}),S(o),a=n({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,L){return[L.viewport.x,L.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,L){return 4*L.offset},divisor:1},position:{buffer:u,offset:function(E,L){return 8*L.offset},divisor:1},positionFract:{buffer:p,offset:function(E,L){return 8*L.offset},divisor:1},error:{buffer:x,offset:function(E,L){return 16*L.offset},divisor:1},direction:{buffer:g,stride:24,offset:0},lineOffset:{buffer:g,stride:24,offset:8},capOffset:{buffer:g,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),b(m,{update:S,draw:_,destroy:w,regl:n,gl:h,canvas:h.canvas,groups:v}),m;function m(E){E?S(E):E===null&&w(),_()}function _(E){if(typeof E=="number")return f(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),v.forEach(function(L,C){L&&(E&&(E[C]?L.draw=!0:L.draw=!1),L.draw?f(C):L.draw=!0)})}function f(E){typeof E=="number"&&(E=v[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],a(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var L=0,C=0;if(m.groups=v=E.map(function(B,V){var q=v[V];return B&&(typeof B=="function"?B={after:B}:typeof B[0]=="number"&&(B={positions:B}),B=T(B,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(v[V]=q={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},B=b({},y,B)),l(q,B,[{lineWidth:function(te){return .5*+te},capSize:function(te){return .5*+te},opacity:parseFloat,errors:function(te){return te=d(te),C+=te.length,te},positions:function(te,K){return te=d(te,"float64"),K.count=Math.floor(te.length/2),K.bounds=M(te,2),K.offset=L,L+=K.count,te}},{color:function(te,K){var J=K.count;if(te||(te="transparent"),!Array.isArray(te)||typeof te[0]=="number"){var Y=te;te=Array(J);for(var W=0;W<J;W++)te[W]=Y}if(te.length<J)throw Error("Not enough colors");for(var Q=new Uint8Array(4*J),ne=0;ne<J;ne++){var re=k(te[ne],"uint8");Q.set(re,4*ne)}return Q},range:function(te,K,J){var Y=K.bounds;return te||(te=Y),K.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],K.translate=[-te[0],-te[1]],K.scaleFract=i(K.scale),K.translateFract=i(K.translate),te},viewport:function(te){var K;return Array.isArray(te)?K={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?(K={x:te.x||te.left||0,y:te.y||te.top||0},te.right?K.width=te.right-K.x:K.width=te.w||te.width||0,te.bottom?K.height=te.bottom-K.y:K.height=te.h||te.height||0):K={x:0,y:0,width:h.drawingBufferWidth,height:h.drawingBufferHeight},K}}])),q}),L||C){var P=v.reduce(function(B,V,q){return B+(V?V.count:0)},0),z=new Float64Array(2*P),G=new Uint8Array(4*P),O=new Float32Array(4*P);v.forEach(function(B,V){if(B){var q=B.positions,te=B.count,K=B.offset,J=B.color,Y=B.errors;te&&(G.set(J,4*K),O.set(Y,4*K),z.set(q,2*K))}});var H=t(z);u(H);var N=i(z,H);p(N),c(G),x(O)}}}function w(){u.destroy(),p.destroy(),c.destroy(),x.destroy(),g.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(ee,D,e){var M=e(25075),k=e(21527),l=e(56131),T=e(56068),b=e(71299),d=e(30120),s=e(11474),t=e(54),i=e(57060),r=i.float32,n=i.fract32,o=e(83522),a=e(18863),u=e(6851);function p(c,x){if(!(this instanceof p))return new p(c,x);if(typeof c=="function"?(x||(x={}),x.regl=c):x=c,x.length&&(x.positions=x),!(c=x.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=c._gl,this.regl=c,this.passes=[],this.shaders=p.shaders.has(c)?p.shaders.get(c):p.shaders.set(c,p.createShaders(c)).get(c),this.update(x)}ee.exports=p,p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new o,p.createShaders=function(c){var x,g=c.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),h={primitive:"triangle strip",instances:c.prop("count"),count:4,offset:0,uniforms:{miterMode:function(v,m){return m.join==="round"?2:1},miterLimit:c.prop("miterLimit"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),thickness:c.prop("thickness"),dashTexture:c.prop("dashTexture"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),dashLength:c.prop("dashLength"),viewport:function(v,m){return[m.viewport.x,m.viewport.y,v.viewportWidth,v.viewportHeight]},depth:c.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(v,m){return!m.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport")},y=c(l({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},h));try{x=c(l({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aColor:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:c.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},h))}catch{x=y}return{fill:c({primitive:"triangle",elements:function(v,m){return m.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:c.prop("scale"),color:c.prop("fill"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),viewport:function(v,m){return[m.viewport.x,m.viewport.y,v.viewportWidth,v.viewportHeight]}},attributes:{position:{buffer:c.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8}},blend:h.blend,depth:{enable:!1},scissor:h.scissor,stencil:h.stencil,viewport:h.viewport}),rect:y,miter:x}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var c,x=[],g=arguments.length;g--;)x[g]=arguments[g];x.length&&(c=this).update.apply(c,x),this.draw()},p.prototype.draw=function(){for(var c=this,x=[],g=arguments.length;g--;)x[g]=arguments[g];return(x.length?x:this.passes).forEach(function(h,y){var v;if(h&&Array.isArray(h))return(v=c).draw.apply(v,h);typeof h=="number"&&(h=c.passes[h]),h&&h.count>1&&h.opacity&&(c.regl._refresh(),h.fill&&h.triangles&&h.triangles.length>2&&c.shaders.fill(h),h.thickness&&(h.scale[0]*h.viewport.width>p.precisionThreshold||h.scale[1]*h.viewport.height>p.precisionThreshold||h.join==="rect"||!h.join&&(h.thickness<=2||h.count>=p.maxPoints)?c.shaders.rect(h):c.shaders.miter(h)))}),this},p.prototype.update=function(c){var x=this;if(c){c.length!=null?typeof c[0]=="number"&&(c=[{positions:c}]):Array.isArray(c)||(c=[c]);var g=this.regl,h=this.gl;if(c.forEach(function(f,S){var w=x.passes[S];if(f!==void 0)if(f!==null){if(typeof f[0]=="number"&&(f={positions:f}),f=b(f,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),w||(x.passes[S]=w={id:S,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:g.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:g.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},f=l({},p.defaults,f)),f.thickness!=null&&(w.thickness=parseFloat(f.thickness)),f.opacity!=null&&(w.opacity=parseFloat(f.opacity)),f.miterLimit!=null&&(w.miterLimit=parseFloat(f.miterLimit)),f.overlay!=null&&(w.overlay=!!f.overlay,S<p.maxLines&&(w.depth=2*(p.maxLines-1-S%p.maxLines)/p.maxLines-1)),f.join!=null&&(w.join=f.join),f.hole!=null&&(w.hole=f.hole),f.fill!=null&&(w.fill=f.fill?M(f.fill,"uint8"):null),f.viewport!=null&&(w.viewport=a(f.viewport)),w.viewport||(w.viewport=a([h.drawingBufferWidth,h.drawingBufferHeight])),f.close!=null&&(w.close=f.close),f.positions===null&&(f.positions=[]),f.positions){var E,L;if(f.positions.x&&f.positions.y){var C=f.positions.x,P=f.positions.y;L=w.count=Math.max(C.length,P.length),E=new Float64Array(2*L);for(var z=0;z<L;z++)E[2*z]=C[z],E[2*z+1]=P[z]}else E=d(f.positions,"float64"),L=w.count=Math.floor(E.length/2);var G=w.bounds=k(E,2);if(w.fill){for(var O=[],H={},N=0,B=0,V=0,q=w.count;B<q;B++){var te=E[2*B],K=E[2*B+1];isNaN(te)||isNaN(K)||te==null||K==null?(te=E[2*N],K=E[2*N+1],H[B]=N):N=B,O[V++]=te,O[V++]=K}if(f.splitNull){w.count-1 in H||(H[w.count]=w.count-1);var J=Object.keys(H).map(Number).sort(function(mt,rt){return mt-rt}),Y=[],W=0,Q=w.hole!=null?w.hole[0]:null;if(Q!=null){var ne=u(J,function(mt){return mt>=Q});(J=J.slice(0,ne)).push(Q)}for(var re=function(mt){var rt=O.slice(2*W,2*J[mt]).concat(Q?O.slice(2*Q):[]),it=(w.hole||[]).map(function(Mt){return Mt-Q+(J[mt]-W)}),Tt=s(rt,it);Tt=Tt.map(function(Mt){return Mt+W+(Mt+W<J[mt]?0:Q-J[mt])}),Y.push.apply(Y,Tt),W=J[mt]+1},ae=0;ae<J.length;ae++)re(ae);for(var ue=0,pe=Y.length;ue<pe;ue++)H[Y[ue]]!=null&&(Y[ue]=H[Y[ue]]);w.triangles=Y}else{for(var ge=s(O,w.hole||[]),_e=0,me=ge.length;_e<me;_e++)H[ge[_e]]!=null&&(ge[_e]=H[ge[_e]]);w.triangles=ge}}var ve=new Float64Array(E);t(ve,2,G);var Oe=new Float64Array(2*L+6);w.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Oe[0]=ve[2*L-4],Oe[1]=ve[2*L-3]):(Oe[0]=ve[2*L-2],Oe[1]=ve[2*L-1]):(Oe[0]=ve[0],Oe[1]=ve[1]),Oe.set(ve,2),w.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Oe[2*L+2]=ve[2],Oe[2*L+3]=ve[3],w.count-=1):(Oe[2*L+2]=ve[0],Oe[2*L+3]=ve[1],Oe[2*L+4]=ve[2],Oe[2*L+5]=ve[3]):(Oe[2*L+2]=ve[2*L-2],Oe[2*L+3]=ve[2*L-1],Oe[2*L+4]=ve[2*L-2],Oe[2*L+5]=ve[2*L-1]);var Me=r(Oe);w.positionBuffer(Me);var Te=n(Oe,Me);w.positionFractBuffer(Te)}if(f.range?w.range=f.range:w.range||(w.range=w.bounds),(f.range||f.positions)&&w.count){var se=w.bounds,oe=se[2]-se[0],he=se[3]-se[1],Ee=w.range[2]-w.range[0],ke=w.range[3]-w.range[1];w.scale=[oe/Ee,he/ke],w.translate=[-w.range[0]/Ee+se[0]/Ee||0,-w.range[1]/ke+se[1]/ke||0],w.scaleFract=n(w.scale),w.translateFract=n(w.translate)}if(f.dashes){var be,Ie=0;if(!f.dashes||f.dashes.length<2)Ie=1,be=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ie=0;for(var Fe=0;Fe<f.dashes.length;++Fe)Ie+=f.dashes[Fe];be=new Uint8Array(Ie*p.dashMult);for(var ce=0,we=255,ye=0;ye<2;ye++)for(var Ce=0;Ce<f.dashes.length;++Ce){for(var Re=0,ze=f.dashes[Ce]*p.dashMult*.5;Re<ze;++Re)be[ce++]=we;we^=255}}w.dashLength=Ie,w.dashTexture({channels:1,data:be,width:be.length,height:1,mag:"linear",min:"linear"},0,0)}if(f.color){var He=w.count,Ge=f.color;Ge||(Ge="transparent");var Je=new Uint8Array(4*He+4);if(Array.isArray(Ge)&&typeof Ge[0]!="number"){for(var ot=0;ot<He;ot++){var Qe=M(Ge[ot],"uint8");Je.set(Qe,4*ot)}Je.set(M(Ge[0],"uint8"),4*He)}else for(var vt=M(Ge,"uint8"),xt=0;xt<He+1;xt++)Je.set(vt,4*xt);w.colorBuffer({usage:"dynamic",type:"uint8",data:Je})}}else x.passes[S]=null}),c.length<this.passes.length){for(var y=c.length;y<this.passes.length;y++){var v=this.passes[y];v&&(v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy())}this.passes.length=c.length}for(var m=[],_=0;_<this.passes.length;_++)this.passes[_]!==null&&m.push(this.passes[_]);return this.passes=m,this}},p.prototype.destroy=function(){return this.passes.forEach(function(c){c.colorBuffer.destroy(),c.positionBuffer.destroy(),c.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(ee,D,e){function M(h,y){return function(v){if(Array.isArray(v))return v}(h)||function(v,m){var _=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(_!=null){var f,S,w,E,L=[],C=!0,P=!1;try{if(w=(_=_.call(v)).next,m===0){if(Object(_)!==_)return;C=!1}else for(;!(C=(f=w.call(_)).done)&&(L.push(f.value),L.length!==m);C=!0);}catch(z){P=!0,S=z}finally{try{if(!C&&_.return!=null&&(E=_.return(),Object(E)!==E))return}finally{if(P)throw S}}return L}}(h,y)||k(h,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(h,y){if(h){if(typeof h=="string")return l(h,y);var v=Object.prototype.toString.call(h).slice(8,-1);return v==="Object"&&h.constructor&&(v=h.constructor.name),v==="Map"||v==="Set"?Array.from(h):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?l(h,y):void 0}}function l(h,y){(y==null||y>h.length)&&(y=h.length);for(var v=0,m=new Array(y);v<y;v++)m[v]=h[v];return m}var T=e(25075),b=e(21527),d=e(6475),s=e(88294),t=e(56131),i=e(56068),r=e(71299),n=e(93447),o=e(30120),a=e(62683),u=e(57060),p=e(18863),c=x;function x(h,y){var v=this;if(!(this instanceof x))return new x(h,y);typeof h=="function"?(y||(y={}),y.regl=h):(y=h,h=null),y&&y.length&&(y.positions=y);var m,_=(h=y.regl)._gl,f=[];this.tooManyColors=a,m=h.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:h,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:f,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(y);var S={uniforms:{constPointSize:!!y.constPointSize,opacity:h.prop("opacity"),paletteSize:function(L,C){return[v.tooManyColors?0:255,m.height]},pixelRatio:h.context("pixelRatio"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translate:h.prop("translate"),translateFract:h.prop("translateFract"),markerTexture:h.prop("markerTexture"),paletteTexture:m},attributes:{x:function(L,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(L,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(L,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(L,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(L,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/v.maxSize)]}},borderSize:function(L,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/v.maxSize)]}},colorId:function(L,C){return C.color.length?{buffer:C.colorBuffer,stride:v.tooManyColors?8:4,offset:0}:{constant:v.tooManyColors?f.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(L,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:v.tooManyColors?8:4,offset:v.tooManyColors?4:2}:{constant:v.tooManyColors?f.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(L,C){return C.activation===!0?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:h.prop("elements"),count:h.prop("count"),offset:h.prop("offset"),primitive:"points"},w=t({},S);w.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),w.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=h(w);var E=t({},S);E.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),a&&(E.frag=E.frag.replace("smoothstep","smoothStep"),w.frag=w.frag.replace("smoothstep","smoothStep")),this.drawCircle=h(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var h=this,y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];var _=this.groups;if(v.length===1&&Array.isArray(v[0])&&(v[0][0]===null||Array.isArray(v[0][0]))&&(v=v[0]),this.regl._refresh(),v.length)for(var f=0;f<v.length;f++)this.drawItem(f,v[f]);else _.forEach(function(S,w){h.drawItem(w)});return this},x.prototype.drawItem=function(h,y){var v,m=this.groups,_=m[h];if(typeof y=="number"&&(h=y,_=m[y],y=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,y));for(var f=[],S=1;S<_.activation.length;S++)_.activation[S]&&(_.activation[S]===!0||_.activation[S].data.length)&&f.push.apply(f,function(w){if(Array.isArray(w))return l(w)}(v=this.getMarkerDrawOptions(S,_,y))||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(v)||k(v)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());f.length&&this.drawMarker(f)}},x.prototype.getMarkerDrawOptions=function(h,y,v){var m=y.range,_=y.tree,f=y.viewport,S=y.activation,w=y.selectionBuffer,E=y.count;if(this.regl,!_)return v?[t({},y,{markerTexture:this.markerTextures[h],activation:S[h],count:v.length,elements:v,offset:0})]:[t({},y,{markerTexture:this.markerTextures[h],activation:S[h],offset:0})];var L=[],C=_.range(m,{lod:!0,px:[(m[2]-m[0])/f.width,(m[3]-m[1])/f.height]});if(v){for(var P=S[h].data,z=new Uint8Array(E),G=0;G<v.length;G++){var O=v[G];z[O]=P?P[O]:1}w.subdata(z)}for(var H=C.length;H--;){var N=M(C[H],2),B=N[0],V=N[1];L.push(t({},y,{markerTexture:this.markerTextures[h],activation:v?w:S[h],offset:B,count:V-B}))}return L},x.prototype.update=function(){for(var h=this,y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];if(v.length){v.length===1&&Array.isArray(v[0])&&(v=v[0]);var _=this.groups,f=this.gl,S=this.regl,w=this.maxSize,E=this.maxColors,L=this.palette;this.groups=_=v.map(function(C,P){var z=_[P];if(C===void 0)return z;C===null?C={positions:null}:typeof C=="function"?C={ondraw:C}:typeof C[0]=="number"&&(C={positions:C}),(C=r(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(C.positions=[]),C.tooManyColors!=null&&(h.tooManyColors=C.tooManyColors),z||(_[P]=z={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=t({},x.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=z.marker,delete z.marker),C.marker&&!("positions"in C)&&(C.positions=z.positions,delete z.positions);var G=0,O=0;if(n(z,C,[{snap:!0,size:function(_e,me){return _e==null&&(_e=x.defaults.size),G+=_e&&_e.length?1:0,_e},borderSize:function(_e,me){return _e==null&&(_e=x.defaults.borderSize),G+=_e&&_e.length?1:0,_e},opacity:parseFloat,color:function(_e,me){return _e==null&&(_e=x.defaults.color),_e=h.updateColor(_e),O++,_e},borderColor:function(_e,me){return _e==null&&(_e=x.defaults.borderColor),_e=h.updateColor(_e),O++,_e},bounds:function(_e,me,ve){return"range"in ve||(ve.range=null),_e},positions:function(_e,me,ve){var Oe=me.snap,Me=me.positionBuffer,Te=me.positionFractBuffer,se=me.selectionBuffer;if(_e.x||_e.y)return _e.x.length?me.xAttr={buffer:S.buffer(_e.x),offset:0,stride:4,count:_e.x.length}:me.xAttr={buffer:_e.x.buffer,offset:4*_e.x.offset||0,stride:4*(_e.x.stride||1),count:_e.x.count},_e.y.length?me.yAttr={buffer:S.buffer(_e.y),offset:0,stride:4,count:_e.y.length}:me.yAttr={buffer:_e.y.buffer,offset:4*_e.y.offset||0,stride:4*(_e.y.stride||1),count:_e.y.count},me.count=Math.max(me.xAttr.count,me.yAttr.count),_e;_e=o(_e,"float64");var oe=me.count=Math.floor(_e.length/2),he=me.bounds=oe?b(_e,2):null;if(ve.range||me.range||(delete me.range,ve.range=he),ve.marker||me.marker||(delete me.marker,ve.marker=null),Oe&&(Oe===!0||oe>Oe)?me.tree=s(_e,{bounds:he}):Oe&&Oe.length&&(me.tree=Oe),me.tree){var Ee={primitive:"points",usage:"static",data:me.tree,type:"uint32"};me.elements?me.elements(Ee):me.elements=S.elements(Ee)}var ke=u.float32(_e);return Me({data:ke,usage:"dynamic"}),Te({data:u.fract32(_e,ke),usage:"dynamic"}),se({data:new Uint8Array(oe),type:"uint8",usage:"stream"}),_e}},{marker:function(_e,me,ve){var Oe=me.activation;if(Oe.forEach(function(ke){return ke&&ke.destroy&&ke.destroy()}),Oe.length=0,_e&&typeof _e[0]!="number"){for(var Me=[],Te=0,se=Math.min(_e.length,me.count);Te<se;Te++){var oe=h.addMarker(_e[Te]);Me[oe]||(Me[oe]=new Uint8Array(me.count)),Me[oe][Te]=1}for(var he=0;he<Me.length;he++)if(Me[he]){var Ee={data:Me[he],type:"uint8",usage:"static"};Oe[he]?Oe[he](Ee):Oe[he]=S.buffer(Ee),Oe[he].data=Me[he]}}else Oe[h.addMarker(_e)]=!0;return _e},range:function(_e,me,ve){var Oe=me.bounds;if(Oe)return _e||(_e=Oe),me.scale=[1/(_e[2]-_e[0]),1/(_e[3]-_e[1])],me.translate=[-_e[0],-_e[1]],me.scaleFract=u.fract(me.scale),me.translateFract=u.fract(me.translate),_e},viewport:function(_e){return p(_e||[f.drawingBufferWidth,f.drawingBufferHeight])}}]),G){var H=z,N=H.count,B=H.size,V=H.borderSize,q=H.sizeBuffer,te=new Uint8Array(2*N);if(B.length||V.length)for(var K=0;K<N;K++)te[2*K]=Math.round(255*(B[K]==null?B:B[K])/w),te[2*K+1]=Math.round(255*(V[K]==null?V:V[K])/w);q({data:te,usage:"dynamic"})}if(O){var J,Y=z,W=Y.count,Q=Y.color,ne=Y.borderColor,re=Y.colorBuffer;if(h.tooManyColors){if(Q.length||ne.length){J=new Uint8Array(8*W);for(var ae=0;ae<W;ae++){var ue=Q[ae];J[8*ae]=L[4*ue],J[8*ae+1]=L[4*ue+1],J[8*ae+2]=L[4*ue+2],J[8*ae+3]=L[4*ue+3];var pe=ne[ae];J[8*ae+4]=L[4*pe],J[8*ae+5]=L[4*pe+1],J[8*ae+6]=L[4*pe+2],J[8*ae+7]=L[4*pe+3]}}}else if(Q.length||ne.length){J=new Uint8Array(4*W+2);for(var ge=0;ge<W;ge++)Q[ge]!=null&&(J[4*ge]=Q[ge]%E,J[4*ge+1]=Math.floor(Q[ge]/E)),ne[ge]!=null&&(J[4*ge+2]=ne[ge]%E,J[4*ge+3]=Math.floor(ne[ge]/E))}re({data:J||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},x.prototype.addMarker=function(h){var y,v=this.markerTextures,m=this.regl,_=this.markerCache,f=h==null?0:_.indexOf(h);if(f>=0)return f;if(h instanceof Uint8Array||h instanceof Uint8ClampedArray)y=h;else{y=new Uint8Array(h.length);for(var S=0,w=h.length;S<w;S++)y[S]=255*h[S]}var E=Math.floor(Math.sqrt(y.length));return f=v.length,_.push(h),v.push(m.texture({channels:1,data:y,radius:E,mag:"linear",min:"linear"})),f},x.prototype.updateColor=function(h){var y=this.paletteIds,v=this.palette,m=this.maxColors;Array.isArray(h)||(h=[h]);var _=[];if(typeof h[0]=="number"){var f=[];if(Array.isArray(h))for(var S=0;S<h.length;S+=4)f.push(h.slice(S,S+4));else for(var w=0;w<h.length;w+=4)f.push(h.subarray(w,w+4));h=f}for(var E=0;E<h.length;E++){var L=h[E];L=T(L,"uint8");var C=d(L,!1);if(y[C]==null){var P=v.length;y[C]=Math.floor(P/4),v[P]=L[0],v[P+1]=L[1],v[P+2]=L[2],v[P+3]=L[3]}_[E]=y[C]}return!this.tooManyColors&&v.length>4*m&&(this.tooManyColors=!0),this.updatePalette(v),_.length===1?_[0]:_},x.prototype.updatePalette=function(h){if(!this.tooManyColors){var y=this.maxColors,v=this.paletteTexture,m=Math.ceil(.25*h.length/y);if(m>1)for(var _=.25*(h=h.slice()).length%y;_<m*y;_++)h.push(0,0,0,0);v.height<m&&v.resize(y,m),v.subimage({width:Math.min(.25*h.length,y),height:m,data:h},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(h){h.sizeBuffer.destroy(),h.positionBuffer.destroy(),h.positionFractBuffer.destroy(),h.colorBuffer.destroy(),h.activation.forEach(function(y){return y&&y.destroy&&y.destroy()}),h.selectionBuffer.destroy(),h.elements&&h.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(h){return h&&h.destroy&&h.destroy()}),this};var g=e(56131);ee.exports=function(h,y){var v=new c(h,y),m=v.render.bind(v);return g(m,{render:m,update:v.update.bind(v),draw:v.draw.bind(v),destroy:v.destroy.bind(v),regl:v.regl,gl:v.gl,canvas:v.gl.canvas,groups:v.groups,markers:v.markerCache,palette:v.palette}),m}},60487:function(ee,D,e){var M=e(11870),k=e(71299),l=e(21527),T=e(5877),b=e(57471),d=e(18863),s=e(30120);function t(o,a){if(!(this instanceof t))return new t(o);this.traces=[],this.passes={},this.regl=o,this.scatter=M(o),this.canvas=this.scatter.canvas}function i(o,a,u){return(o.id!=null?o.id:o)<<16|(255&a)<<8|255&u}function r(o,a,u){var p,c,x,g,h=o[a],y=o[u];return h.length>2?(h[0],h[2],p=h[1],c=h[3]):h.length?(p=h[0],c=h[1]):(h.x,p=h.y,h.x,h.width,c=h.y+h.height),y.length>2?(x=y[0],g=y[2],y[1],y[3]):y.length?(x=y[0],g=y[1]):(x=y.x,y.y,g=y.x+y.width,y.y,y.height),[x,p,g,c]}function n(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var a=d(o);return[a.x,a.y,a.x+a.width,a.y+a.height]}ee.exports=t,t.prototype.render=function(){for(var o,a=this,u=[],p=arguments.length;p--;)u[p]=arguments[p];return u.length&&(o=this).update.apply(o,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){a.draw(),a.dirty=!0,a.planned=null})):(this.draw(),this.dirty=!0,T(function(){a.dirty=!1})),this)},t.prototype.update=function(){for(var o,a=[],u=arguments.length;u--;)a[u]=arguments[u];if(a.length){for(var p=0;p<a.length;p++)this.updateItem(p,a[p]);this.traces=this.traces.filter(Boolean);for(var c=[],x=0,g=0;g<this.traces.length;g++){for(var h=this.traces[g],y=this.traces[g].passes,v=0;v<y.length;v++)c.push(this.passes[y[v]]);h.passOffset=x,x+=h.passes.length}return(o=this.scatter).update.apply(o,c),this}},t.prototype.updateItem=function(o,a){var u=this.regl;if(a===null)return this.traces[o]=null,this;if(!a)return this;var p,c=k(a,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[o]||(this.traces[o]={id:o,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:d([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(x.color=c.color),c.size!=null&&(x.size=c.size),c.marker!=null&&(x.marker=c.marker),c.borderColor!=null&&(x.borderColor=c.borderColor),c.borderSize!=null&&(x.borderSize=c.borderSize),c.opacity!=null&&(x.opacity=c.opacity),c.viewport&&(x.viewport=d(c.viewport)),c.diagonal!=null&&(x.diagonal=c.diagonal),c.upper!=null&&(x.upper=c.upper),c.lower!=null&&(x.lower=c.lower),c.data){x.buffer(s(c.data)),x.columns=c.data.length,x.count=c.data[0].length,x.bounds=[];for(var g=0;g<x.columns;g++)x.bounds[g]=l(c.data[g],1)}c.range&&(x.range=c.range,p=x.range&&typeof x.range[0]!="number"),c.domain&&(x.domain=c.domain);var h=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===x.columns&&typeof c.padding[c.padding.length-1]=="number"?(x.padding=c.padding.map(n),h=!0):x.padding=n(c.padding));var y=x.columns,v=x.count,m=x.viewport.width,_=x.viewport.height,f=x.viewport.x,S=x.viewport.y,w=m/y,E=_/y;x.passes=[];for(var L=0;L<y;L++)for(var C=0;C<y;C++)if((x.diagonal||C!==L)&&(x.upper||!(L>C))&&(x.lower||!(L<C))){var P=i(x.id,L,C),z=this.passes[P]||(this.passes[P]={});if(c.data&&(c.transpose?z.positions={x:{buffer:x.buffer,offset:C,count:v,stride:y},y:{buffer:x.buffer,offset:L,count:v,stride:y}}:z.positions={x:{buffer:x.buffer,offset:C*v,count:v},y:{buffer:x.buffer,offset:L*v,count:v}},z.bounds=r(x.bounds,L,C)),c.domain||c.viewport||c.data){var G=h?r(x.padding,L,C):x.padding;if(x.domain){var O=r(x.domain,L,C),H=O[0],N=O[1],B=O[2],V=O[3];z.viewport=[f+H*m+G[0],S+N*_+G[1],f+B*m-G[2],S+V*_-G[3]]}else z.viewport=[f+C*w+w*G[0],S+L*E+E*G[1],f+(C+1)*w-w*G[2],S+(L+1)*E-E*G[3]]}c.color&&(z.color=x.color),c.size&&(z.size=x.size),c.marker&&(z.marker=x.marker),c.borderSize&&(z.borderSize=x.borderSize),c.borderColor&&(z.borderColor=x.borderColor),c.opacity&&(z.opacity=x.opacity),c.range&&(z.range=p?r(x.range,L,C):x.range||z.bounds),x.passes.push(P)}return this},t.prototype.draw=function(){for(var o,a=[],u=arguments.length;u--;)a[u]=arguments[u];if(a.length){for(var p=[],c=0;c<a.length;c++)if(typeof a[c]=="number"){var x=this.traces[a[c]],g=x.passes,h=x.passOffset;p.push.apply(p,b(h,h+g.length))}else if(a[c].length){var y=a[c],v=this.traces[c],m=v.passes,_=v.passOffset;m=m.map(function(f,S){p[_+S]=y})}(o=this.scatter).draw.apply(o,p)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(ee){ee.exports=function(){function D(Ve,We){this.id=ne++,this.type=Ve,this.data=We}function e(Ve){if(Ve.length===0)return[];var We=Ve.charAt(0),at=Ve.charAt(Ve.length-1);if(1<Ve.length&&We===at&&(We==='"'||We==="'"))return['"'+Ve.substr(1,Ve.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(We=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ve))return e(Ve.substr(0,We.index)).concat(e(We[1])).concat(e(Ve.substr(We.index+We[0].length)));if((We=Ve.split(".")).length===1)return['"'+Ve.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ve=[],at=0;at<We.length;++at)Ve=Ve.concat(e(We[at]));return Ve}function M(Ve){return"["+e(Ve).join("][")+"]"}function k(Ve){return typeof Ve=="string"?Ve.split():Ve}function l(Ve){return typeof Ve=="string"?document.querySelector(Ve):Ve}function T(Ve){var We,at,et,De,Be=Ve||{};Ve={};var nt=[],tt=[],dt=typeof window>"u"?1:window.devicePixelRatio,ht=!1,gt={},ut=function(ct){},wt=function(){};if(typeof Be=="string"?We=document.querySelector(Be):typeof Be=="object"&&(typeof Be.nodeName=="string"&&typeof Be.appendChild=="function"&&typeof Be.getBoundingClientRect=="function"?We=Be:typeof Be.drawArrays=="function"||typeof Be.drawElements=="function"?et=(De=Be).canvas:("gl"in Be?De=Be.gl:"canvas"in Be?et=l(Be.canvas):"container"in Be&&(at=l(Be.container)),"attributes"in Be&&(Ve=Be.attributes),"extensions"in Be&&(nt=k(Be.extensions)),"optionalExtensions"in Be&&(tt=k(Be.optionalExtensions)),"onDone"in Be&&(ut=Be.onDone),"profile"in Be&&(ht=!!Be.profile),"pixelRatio"in Be&&(dt=+Be.pixelRatio),"cachedCode"in Be&&(gt=Be.cachedCode))),We&&(We.nodeName.toLowerCase()==="canvas"?et=We:at=We),!De){if(!et){if(!(We=function(ct,ft,bt){function It(){var Qt=window.innerWidth,jt=window.innerHeight;ct!==document.body&&(Qt=(jt=Nt.getBoundingClientRect()).right-jt.left,jt=jt.bottom-jt.top),Nt.width=bt*Qt,Nt.height=bt*jt}var Dt,Nt=document.createElement("canvas");return Q(Nt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),ct.appendChild(Nt),ct===document.body&&(Nt.style.position="absolute",Q(ct.style,{margin:0,padding:0})),ct!==document.body&&typeof ResizeObserver=="function"?(Dt=new ResizeObserver(function(){setTimeout(It)})).observe(ct):window.addEventListener("resize",It,!1),It(),{canvas:Nt,onDestroy:function(){Dt?Dt.disconnect():window.removeEventListener("resize",It),ct.removeChild(Nt)}}}(at||document.body,0,dt)))return null;et=We.canvas,wt=We.onDestroy}Ve.premultipliedAlpha===void 0&&(Ve.premultipliedAlpha=!0),De=function(ct,ft){function bt(It){try{return ct.getContext(It,ft)}catch{return null}}return bt("webgl")||bt("experimental-webgl")||bt("webgl-experimental")}(et,Ve)}return De?{gl:De,canvas:et,container:at,extensions:nt,optionalExtensions:tt,pixelRatio:dt,profile:ht,cachedCode:gt,onDone:ut,onDestroy:wt}:(wt(),ut("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function b(Ve,We){for(var at=Array(Ve),et=0;et<Ve;++et)at[et]=We(et);return at}function d(Ve){var We,at;return We=(65535<Ve)<<4,We|=at=(255<(Ve>>>=We))<<3,(We|=at=(15<(Ve>>>=at))<<2)|(at=(3<(Ve>>>=at))<<1)|Ve>>>at>>1}function s(){function Ve(et){e:{for(var De=16;268435456>=De;De*=16)if(et<=De){et=De;break e}et=0}return 0<(De=at[d(et)>>2]).length?De.pop():new ArrayBuffer(et)}function We(et){at[d(et.byteLength)>>2].push(et)}var at=b(8,function(){return[]});return{alloc:Ve,free:We,allocType:function(et,De){var Be=null;switch(et){case 5120:Be=new Int8Array(Ve(De),0,De);break;case 5121:Be=new Uint8Array(Ve(De),0,De);break;case 5122:Be=new Int16Array(Ve(2*De),0,De);break;case 5123:Be=new Uint16Array(Ve(2*De),0,De);break;case 5124:Be=new Int32Array(Ve(4*De),0,De);break;case 5125:Be=new Uint32Array(Ve(4*De),0,De);break;case 5126:Be=new Float32Array(Ve(4*De),0,De);break;default:return null}return Be.length!==De?Be.subarray(0,De):Be},freeType:function(et){We(et.buffer)}}}function t(Ve){return!!Ve&&typeof Ve=="object"&&Array.isArray(Ve.shape)&&Array.isArray(Ve.stride)&&typeof Ve.offset=="number"&&Ve.shape.length===Ve.stride.length&&(Array.isArray(Ve.data)||_e(Ve.data))}function i(Ve,We,at,et,De,Be){for(var nt=0;nt<We;++nt)for(var tt=Ve[nt],dt=0;dt<at;++dt)for(var ht=tt[dt],gt=0;gt<et;++gt)De[Be++]=ht[gt]}function r(Ve,We,at,et,De){for(var Be=1,nt=at+1;nt<We.length;++nt)Be*=We[nt];var tt=We[at];if(We.length-at==4){var dt=We[at+1],ht=We[at+2];for(We=We[at+3],nt=0;nt<tt;++nt)i(Ve[nt],dt,ht,We,et,De),De+=Be}else for(nt=0;nt<tt;++nt)r(Ve[nt],We,at+1,et,De),De+=Be}function n(Ve){return 0|Oe[Object.prototype.toString.call(Ve)]}function o(Ve,We){for(var at=0;at<We.length;++at)Ve[at]=We[at]}function a(Ve,We,at,et,De,Be,nt){for(var tt=0,dt=0;dt<at;++dt)for(var ht=0;ht<et;++ht)Ve[tt++]=We[De*dt+Be*ht+nt]}function u(Ve,We,at,et){function De(ut){this.id=dt++,this.buffer=Ve.createBuffer(),this.type=ut,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,at.profile&&(this.stats={size:0})}function Be(ut,wt,ct){ut.byteLength=wt.byteLength,Ve.bufferData(ut.type,wt,ct)}function nt(ut,wt,ct,ft,bt,It){if(ut.usage=ct,Array.isArray(wt)){if(ut.dtype=ft||5126,0<wt.length)if(Array.isArray(wt[0])){bt=oe(wt);for(var Dt=ft=1;Dt<bt.length;++Dt)ft*=bt[Dt];ut.dimension=ft,Be(ut,wt=se(wt,bt,ut.dtype),ct),It?ut.persistentData=wt:pe.freeType(wt)}else typeof wt[0]=="number"?(ut.dimension=bt,o(bt=pe.allocType(ut.dtype,wt.length),wt),Be(ut,bt,ct),It?ut.persistentData=bt:pe.freeType(bt)):_e(wt[0])&&(ut.dimension=wt[0].length,ut.dtype=ft||n(wt[0])||5126,Be(ut,wt=se(wt,[wt.length,wt[0].length],ut.dtype),ct),It?ut.persistentData=wt:pe.freeType(wt))}else if(_e(wt))ut.dtype=ft||n(wt),ut.dimension=bt,Be(ut,wt,ct),It&&(ut.persistentData=new Uint8Array(new Uint8Array(wt.buffer)));else if(t(wt)){bt=wt.shape;var Nt=wt.stride,Qt=(Dt=wt.offset,0),jt=0,Ut=0,Xt=0;bt.length===1?(Qt=bt[0],jt=1,Ut=Nt[0],Xt=0):bt.length===2&&(Qt=bt[0],jt=bt[1],Ut=Nt[0],Xt=Nt[1]),ut.dtype=ft||n(wt.data)||5126,ut.dimension=jt,a(bt=pe.allocType(ut.dtype,Qt*jt),wt.data,Qt,jt,Ut,Xt,Dt),Be(ut,bt,ct),It?ut.persistentData=bt:pe.freeType(bt)}else wt instanceof ArrayBuffer&&(ut.dtype=5121,ut.dimension=bt,Be(ut,wt,ct),It&&(ut.persistentData=new Uint8Array(new Uint8Array(wt))))}function tt(ut){We.bufferCount--,et(ut),Ve.deleteBuffer(ut.buffer),ut.buffer=null,delete ht[ut.id]}var dt=0,ht={};De.prototype.bind=function(){Ve.bindBuffer(this.type,this.buffer)},De.prototype.destroy=function(){tt(this)};var gt=[];return at.profile&&(We.getTotalBufferSize=function(){var ut=0;return Object.keys(ht).forEach(function(wt){ut+=ht[wt].stats.size}),ut}),{create:function(ut,wt,ct,ft){function bt(Dt){var Nt=35044,Qt=null,jt=0,Ut=0,Xt=1;return Array.isArray(Dt)||_e(Dt)||t(Dt)||Dt instanceof ArrayBuffer?Qt=Dt:typeof Dt=="number"?jt=0|Dt:Dt&&("data"in Dt&&(Qt=Dt.data),"usage"in Dt&&(Nt=Te[Dt.usage]),"type"in Dt&&(Ut=Me[Dt.type]),"dimension"in Dt&&(Xt=0|Dt.dimension),"length"in Dt&&(jt=0|Dt.length)),It.bind(),Qt?nt(It,Qt,Nt,Ut,Xt,ft):(jt&&Ve.bufferData(It.type,jt,Nt),It.dtype=Ut||5121,It.usage=Nt,It.dimension=Xt,It.byteLength=jt),at.profile&&(It.stats.size=It.byteLength*he[It.dtype]),bt}We.bufferCount++;var It=new De(wt);return ht[It.id]=It,ct||bt(ut),bt._reglType="buffer",bt._buffer=It,bt.subdata=function(Dt,Nt){var Qt,jt=0|(Nt||0);if(It.bind(),_e(Dt)||Dt instanceof ArrayBuffer)Ve.bufferSubData(It.type,jt,Dt);else if(Array.isArray(Dt)){if(0<Dt.length)if(typeof Dt[0]=="number"){var Ut=pe.allocType(It.dtype,Dt.length);o(Ut,Dt),Ve.bufferSubData(It.type,jt,Ut),pe.freeType(Ut)}else(Array.isArray(Dt[0])||_e(Dt[0]))&&(Qt=oe(Dt),Ut=se(Dt,Qt,It.dtype),Ve.bufferSubData(It.type,jt,Ut),pe.freeType(Ut))}else if(t(Dt)){Qt=Dt.shape;var Xt=Dt.stride,gn=Ut=0,Mn=0,cn=0;Qt.length===1?(Ut=Qt[0],gn=1,Mn=Xt[0],cn=0):Qt.length===2&&(Ut=Qt[0],gn=Qt[1],Mn=Xt[0],cn=Xt[1]),Qt=Array.isArray(Dt.data)?It.dtype:n(Dt.data),a(Qt=pe.allocType(Qt,Ut*gn),Dt.data,Ut,gn,Mn,cn,Dt.offset),Ve.bufferSubData(It.type,jt,Qt),pe.freeType(Qt)}return bt},at.profile&&(bt.stats=It.stats),bt.destroy=function(){tt(It)},bt},createStream:function(ut,wt){var ct=gt.pop();return ct||(ct=new De(ut)),ct.bind(),nt(ct,wt,35040,0,1,!1),ct},destroyStream:function(ut){gt.push(ut)},clear:function(){me(ht).forEach(tt),gt.forEach(tt)},getBuffer:function(ut){return ut&&ut._buffer instanceof De?ut._buffer:null},restore:function(){me(ht).forEach(function(ut){ut.buffer=Ve.createBuffer(),Ve.bindBuffer(ut.type,ut.buffer),Ve.bufferData(ut.type,ut.persistentData||ut.byteLength,ut.usage)})},_initBuffer:nt}}function p(Ve,We,at,et){function De(ut){this.id=dt++,tt[this.id]=this,this.buffer=ut,this.primType=4,this.type=this.vertCount=0}function Be(ut,wt,ct,ft,bt,It,Dt){var Nt;if(ut.buffer.bind(),wt?((Nt=Dt)||_e(wt)&&(!t(wt)||_e(wt.data))||(Nt=We.oes_element_index_uint?5125:5123),at._initBuffer(ut.buffer,wt,ct,Nt,3)):(Ve.bufferData(34963,It,ct),ut.buffer.dtype=Nt||5121,ut.buffer.usage=ct,ut.buffer.dimension=3,ut.buffer.byteLength=It),Nt=Dt,!Dt){switch(ut.buffer.dtype){case 5121:case 5120:Nt=5121;break;case 5123:case 5122:Nt=5123;break;case 5125:case 5124:Nt=5125}ut.buffer.dtype=Nt}ut.type=Nt,0>(wt=bt)&&(wt=ut.buffer.byteLength,Nt===5123?wt>>=1:Nt===5125&&(wt>>=2)),ut.vertCount=wt,wt=ft,0>ft&&(wt=4,(ft=ut.buffer.dimension)===1&&(wt=0),ft===2&&(wt=1),ft===3&&(wt=4)),ut.primType=wt}function nt(ut){et.elementsCount--,delete tt[ut.id],ut.buffer.destroy(),ut.buffer=null}var tt={},dt=0,ht={uint8:5121,uint16:5123};We.oes_element_index_uint&&(ht.uint32=5125),De.prototype.bind=function(){this.buffer.bind()};var gt=[];return{create:function(ut,wt){function ct(It){if(It)if(typeof It=="number")ft(It),bt.primType=4,bt.vertCount=0|It,bt.type=5121;else{var Dt=null,Nt=35044,Qt=-1,jt=-1,Ut=0,Xt=0;Array.isArray(It)||_e(It)||t(It)?Dt=It:("data"in It&&(Dt=It.data),"usage"in It&&(Nt=Te[It.usage]),"primitive"in It&&(Qt=Ee[It.primitive]),"count"in It&&(jt=0|It.count),"type"in It&&(Xt=ht[It.type]),"length"in It?Ut=0|It.length:(Ut=jt,Xt===5123||Xt===5122?Ut*=2:Xt!==5125&&Xt!==5124||(Ut*=4))),Be(bt,Dt,Nt,Qt,jt,Ut,Xt)}else ft(),bt.primType=4,bt.vertCount=0,bt.type=5121;return ct}var ft=at.create(null,34963,!0),bt=new De(ft._buffer);return et.elementsCount++,ct(ut),ct._reglType="elements",ct._elements=bt,ct.subdata=function(It,Dt){return ft.subdata(It,Dt),ct},ct.destroy=function(){nt(bt)},ct},createStream:function(ut){var wt=gt.pop();return wt||(wt=new De(at.create(null,34963,!0,!1)._buffer)),Be(wt,ut,35040,-1,-1,0,0),wt},destroyStream:function(ut){gt.push(ut)},getElements:function(ut){return typeof ut=="function"&&ut._elements instanceof De?ut._elements:null},clear:function(){me(tt).forEach(nt)}}}function c(Ve){for(var We=pe.allocType(5123,Ve.length),at=0;at<Ve.length;++at)if(isNaN(Ve[at]))We[at]=65535;else if(Ve[at]===1/0)We[at]=31744;else if(Ve[at]===-1/0)We[at]=64512;else{ke[0]=Ve[at];var et=(Be=be[0])>>>31<<15,De=(Be<<1>>>24)-127,Be=Be>>13&1023;We[at]=-24>De?et:-14>De?et+(Be+1024>>-14-De):15<De?et+31744:et+(De+15<<10)+Be}return We}function x(Ve){return Array.isArray(Ve)||_e(Ve)}function g(Ve){return"[object "+Ve+"]"}function h(Ve){return Array.isArray(Ve)&&(Ve.length===0||typeof Ve[0]=="number")}function y(Ve){return!(!Array.isArray(Ve)||Ve.length===0||!x(Ve[0]))}function v(Ve){return Object.prototype.toString.call(Ve)}function m(Ve){if(!Ve)return!1;var We=v(Ve);return 0<=Ge.indexOf(We)||h(Ve)||y(Ve)||t(Ve)}function _(Ve,We){Ve.type===36193?(Ve.data=c(We),pe.freeType(We)):Ve.data=We}function f(Ve,We,at,et,De,Be){if(Ve=ot[Ve]!==void 0?ot[Ve]:ce[Ve]*Je[We],Be&&(Ve*=6),De){for(et=0;1<=at;)et+=Ve*at*at,at/=2;return et}return Ve*at*et}function S(Ve,We,at,et,De,Be,nt){function tt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function dt(Vt,_n){Vt.internalformat=_n.internalformat,Vt.format=_n.format,Vt.type=_n.type,Vt.compressed=_n.compressed,Vt.premultiplyAlpha=_n.premultiplyAlpha,Vt.flipY=_n.flipY,Vt.unpackAlignment=_n.unpackAlignment,Vt.colorSpace=_n.colorSpace,Vt.width=_n.width,Vt.height=_n.height,Vt.channels=_n.channels}function ht(Vt,_n){if(typeof _n=="object"&&_n){"premultiplyAlpha"in _n&&(Vt.premultiplyAlpha=_n.premultiplyAlpha),"flipY"in _n&&(Vt.flipY=_n.flipY),"alignment"in _n&&(Vt.unpackAlignment=_n.alignment),"colorSpace"in _n&&(Vt.colorSpace=Sn[_n.colorSpace]),"type"in _n&&(Vt.type=pn[_n.type]);var At=Vt.width,Gt=Vt.height,Jt=Vt.channels,mn=!1;"shape"in _n?(At=_n.shape[0],Gt=_n.shape[1],_n.shape.length===3&&(Jt=_n.shape[2],mn=!0)):("radius"in _n&&(At=Gt=_n.radius),"width"in _n&&(At=_n.width),"height"in _n&&(Gt=_n.height),"channels"in _n&&(Jt=_n.channels,mn=!0)),Vt.width=0|At,Vt.height=0|Gt,Vt.channels=0|Jt,At=!1,"format"in _n&&(At=_n.format,Gt=Vt.internalformat=Cn[At],Vt.format=an[Gt],At in pn&&!("type"in _n)&&(Vt.type=pn[At]),At in Hn&&(Vt.compressed=!0),At=!0),!mn&&At?Vt.channels=ce[Vt.format]:mn&&!At&&Vt.channels!==Fe[Vt.format]&&(Vt.format=Vt.internalformat=Fe[Vt.channels])}}function gt(Vt){Ve.pixelStorei(37440,Vt.flipY),Ve.pixelStorei(37441,Vt.premultiplyAlpha),Ve.pixelStorei(37443,Vt.colorSpace),Ve.pixelStorei(3317,Vt.unpackAlignment)}function ut(){tt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function wt(Vt,_n){var At=null;if(m(_n)?At=_n:_n&&(ht(Vt,_n),"x"in _n&&(Vt.xOffset=0|_n.x),"y"in _n&&(Vt.yOffset=0|_n.y),m(_n.data)&&(At=_n.data)),_n.copy){var Gt=De.viewportWidth,Jt=De.viewportHeight;Vt.width=Vt.width||Gt-Vt.xOffset,Vt.height=Vt.height||Jt-Vt.yOffset,Vt.needsCopy=!0}else if(At){if(_e(At))Vt.channels=Vt.channels||4,Vt.data=At,"type"in _n||Vt.type!==5121||(Vt.type=0|Oe[Object.prototype.toString.call(At)]);else if(h(At)){switch(Vt.channels=Vt.channels||4,Jt=(Gt=At).length,Vt.type){case 5121:case 5123:case 5125:case 5126:(Jt=pe.allocType(Vt.type,Jt)).set(Gt),Vt.data=Jt;break;case 36193:Vt.data=c(Gt)}Vt.alignment=1,Vt.needsFree=!0}else if(t(At)){Gt=At.data,Array.isArray(Gt)||Vt.type!==5121||(Vt.type=0|Oe[Object.prototype.toString.call(Gt)]),Jt=At.shape;var mn,xn,An,ln,Yt=At.stride;Jt.length===3?(An=Jt[2],ln=Yt[2]):ln=An=1,mn=Jt[0],xn=Jt[1],Jt=Yt[0],Yt=Yt[1],Vt.alignment=1,Vt.width=mn,Vt.height=xn,Vt.channels=An,Vt.format=Vt.internalformat=Fe[An],Vt.needsFree=!0,mn=ln,At=At.offset,An=Vt.width,ln=Vt.height,xn=Vt.channels;for(var Wt=pe.allocType(Vt.type===36193?5126:Vt.type,An*ln*xn),on=0,un=0;un<ln;++un)for(var En=0;En<An;++En)for(var Pn=0;Pn<xn;++Pn)Wt[on++]=Gt[Jt*En+Yt*un+mn*Pn+At];_(Vt,Wt)}else if(v(At)===we||v(At)===ye||v(At)===Ce)v(At)===we||v(At)===ye?Vt.element=At:Vt.element=At.canvas,Vt.width=Vt.element.width,Vt.height=Vt.element.height,Vt.channels=4;else if(v(At)===Re)Vt.element=At,Vt.width=At.width,Vt.height=At.height,Vt.channels=4;else if(v(At)===ze)Vt.element=At,Vt.width=At.naturalWidth,Vt.height=At.naturalHeight,Vt.channels=4;else if(v(At)===He)Vt.element=At,Vt.width=At.videoWidth,Vt.height=At.videoHeight,Vt.channels=4;else if(y(At)){for(Gt=Vt.width||At[0].length,Jt=Vt.height||At.length,Yt=Vt.channels,Yt=x(At[0][0])?Yt||At[0][0].length:Yt||1,mn=ve.shape(At),An=1,ln=0;ln<mn.length;++ln)An*=mn[ln];An=pe.allocType(Vt.type===36193?5126:Vt.type,An),ve.flatten(At,mn,"",An),_(Vt,An),Vt.alignment=1,Vt.width=Gt,Vt.height=Jt,Vt.channels=Yt,Vt.format=Vt.internalformat=Fe[Yt],Vt.needsFree=!0}}else Vt.width=Vt.width||1,Vt.height=Vt.height||1,Vt.channels=Vt.channels||4}function ct(Vt,_n,At,Gt,Jt){var mn=Vt.element,xn=Vt.data,An=Vt.internalformat,ln=Vt.format,Yt=Vt.type,Wt=Vt.width,on=Vt.height;gt(Vt),mn?Ve.texSubImage2D(_n,Jt,At,Gt,ln,Yt,mn):Vt.compressed?Ve.compressedTexSubImage2D(_n,Jt,At,Gt,An,Wt,on,xn):Vt.needsCopy?(et(),Ve.copyTexSubImage2D(_n,Jt,At,Gt,Vt.xOffset,Vt.yOffset,Wt,on)):Ve.texSubImage2D(_n,Jt,At,Gt,Wt,on,ln,Yt,xn)}function ft(){return fn.pop()||new ut}function bt(Vt){Vt.needsFree&&pe.freeType(Vt.data),ut.call(Vt),fn.push(Vt)}function It(){tt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Dt(Vt,_n,At){var Gt=Vt.images[0]=ft();Vt.mipmask=1,Gt.width=Vt.width=_n,Gt.height=Vt.height=At,Gt.channels=Vt.channels=4}function Nt(Vt,_n){var At=null;if(m(_n))dt(At=Vt.images[0]=ft(),Vt),wt(At,_n),Vt.mipmask=1;else if(ht(Vt,_n),Array.isArray(_n.mipmap))for(var Gt=_n.mipmap,Jt=0;Jt<Gt.length;++Jt)dt(At=Vt.images[Jt]=ft(),Vt),At.width>>=Jt,At.height>>=Jt,wt(At,Gt[Jt]),Vt.mipmask|=1<<Jt;else dt(At=Vt.images[0]=ft(),Vt),wt(At,_n),Vt.mipmask=1;dt(Vt,Vt.images[0])}function Qt(Vt,_n){for(var At=Vt.images,Gt=0;Gt<At.length&&At[Gt];++Gt){var Jt=At[Gt],mn=_n,xn=Gt,An=Jt.element,ln=Jt.data,Yt=Jt.internalformat,Wt=Jt.format,on=Jt.type,un=Jt.width,En=Jt.height;gt(Jt),An?Ve.texImage2D(mn,xn,Wt,Wt,on,An):Jt.compressed?Ve.compressedTexImage2D(mn,xn,Yt,un,En,0,ln):Jt.needsCopy?(et(),Ve.copyTexImage2D(mn,xn,Wt,Jt.xOffset,Jt.yOffset,un,En,0)):Ve.texImage2D(mn,xn,Wt,un,En,0,Wt,on,ln||null)}}function jt(){var Vt=wn.pop()||new It;tt.call(Vt);for(var _n=Vt.mipmask=0;16>_n;++_n)Vt.images[_n]=null;return Vt}function Ut(Vt){for(var _n=Vt.images,At=0;At<_n.length;++At)_n[At]&&bt(_n[At]),_n[At]=null;wn.push(Vt)}function Xt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function gn(Vt,_n){"min"in _n&&(Vt.minFilter=yn[_n.min],0<=Ie.indexOf(Vt.minFilter)&&!("faces"in _n)&&(Vt.genMipmaps=!0)),"mag"in _n&&(Vt.magFilter=bn[_n.mag]);var At=Vt.wrapS,Gt=Vt.wrapT;if("wrap"in _n){var Jt=_n.wrap;typeof Jt=="string"?At=Gt=hn[Jt]:Array.isArray(Jt)&&(At=hn[Jt[0]],Gt=hn[Jt[1]])}else"wrapS"in _n&&(At=hn[_n.wrapS]),"wrapT"in _n&&(Gt=hn[_n.wrapT]);if(Vt.wrapS=At,Vt.wrapT=Gt,"anisotropic"in _n&&(Vt.anisotropic=_n.anisotropic),"mipmap"in _n){switch(At=!1,typeof _n.mipmap){case"string":Vt.mipmapHint=sn[_n.mipmap],At=Vt.genMipmaps=!0;break;case"boolean":At=Vt.genMipmaps=_n.mipmap;break;case"object":Vt.genMipmaps=!1,At=!0}!At||"min"in _n||(Vt.minFilter=9984)}}function Mn(Vt,_n){Ve.texParameteri(_n,10241,Vt.minFilter),Ve.texParameteri(_n,10240,Vt.magFilter),Ve.texParameteri(_n,10242,Vt.wrapS),Ve.texParameteri(_n,10243,Vt.wrapT),We.ext_texture_filter_anisotropic&&Ve.texParameteri(_n,34046,Vt.anisotropic),Vt.genMipmaps&&(Ve.hint(33170,Vt.mipmapHint),Ve.generateMipmap(_n))}function cn(Vt){tt.call(this),this.mipmask=0,this.internalformat=6408,this.id=Bn++,this.refCount=1,this.target=Vt,this.texture=Ve.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Xt,nt.profile&&(this.stats={size:0})}function qt(Vt){Ve.activeTexture(33984),Ve.bindTexture(Vt.target,Vt.texture)}function nn(){var Vt=Wn[0];Vt?Ve.bindTexture(Vt.target,Vt.texture):Ve.bindTexture(3553,null)}function Kt(Vt){var _n=Vt.texture,At=Vt.unit,Gt=Vt.target;0<=At&&(Ve.activeTexture(33984+At),Ve.bindTexture(Gt,null),Wn[At]=null),Ve.deleteTexture(_n),Vt.texture=null,Vt.params=null,Vt.pixels=null,Vt.refCount=0,delete Ln[Vt.id],Be.textureCount--}var sn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},hn={repeat:10497,clamp:33071,mirror:33648},bn={nearest:9728,linear:9729},yn=Q({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},bn),Sn={none:0,browser:37444},pn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Cn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Hn={};We.ext_srgb&&(Cn.srgb=35904,Cn.srgba=35906),We.oes_texture_float&&(pn.float32=pn.float=5126),We.oes_texture_half_float&&(pn.float16=pn["half float"]=36193),We.webgl_depth_texture&&(Q(Cn,{depth:6402,"depth stencil":34041}),Q(pn,{uint16:5123,uint32:5125,"depth stencil":34042})),We.webgl_compressed_texture_s3tc&&Q(Hn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),We.webgl_compressed_texture_atc&&Q(Hn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),We.webgl_compressed_texture_pvrtc&&Q(Hn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),We.webgl_compressed_texture_etc1&&(Hn["rgb etc1"]=36196);var Qn=Array.prototype.slice.call(Ve.getParameter(34467));Object.keys(Hn).forEach(function(Vt){var _n=Hn[Vt];0<=Qn.indexOf(_n)&&(Cn[Vt]=_n)});var nr=Object.keys(Cn);at.textureFormats=nr;var Jn=[];Object.keys(Cn).forEach(function(Vt){Jn[Cn[Vt]]=Vt});var Gn=[];Object.keys(pn).forEach(function(Vt){Gn[pn[Vt]]=Vt});var lr=[];Object.keys(bn).forEach(function(Vt){lr[bn[Vt]]=Vt});var Rt=[];Object.keys(yn).forEach(function(Vt){Rt[yn[Vt]]=Vt});var $t=[];Object.keys(hn).forEach(function(Vt){$t[hn[Vt]]=Vt});var an=nr.reduce(function(Vt,_n){var At=Cn[_n];return At===6409||At===6406||At===6409||At===6410||At===6402||At===34041||We.ext_srgb&&(At===35904||At===35906)?Vt[At]=At:At===32855||0<=_n.indexOf("rgba")?Vt[At]=6408:Vt[At]=6407,Vt},{}),fn=[],wn=[],Bn=0,Ln={},In=at.maxTextureUnits,Wn=Array(In).map(function(){return null});return Q(cn.prototype,{bind:function(){this.bindCount+=1;var Vt=this.unit;if(0>Vt){for(var _n=0;_n<In;++_n){var At=Wn[_n];if(At){if(0<At.bindCount)continue;At.unit=-1}Wn[_n]=this,Vt=_n;break}nt.profile&&Be.maxTextureUnits<Vt+1&&(Be.maxTextureUnits=Vt+1),this.unit=Vt,Ve.activeTexture(33984+Vt),Ve.bindTexture(this.target,this.texture)}return Vt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Kt(this)}}),nt.profile&&(Be.getTotalTextureSize=function(){var Vt=0;return Object.keys(Ln).forEach(function(_n){Vt+=Ln[_n].stats.size}),Vt}),{create2D:function(Vt,_n){function At(Jt,mn){var xn=Gt.texInfo;Xt.call(xn);var An=jt();return typeof Jt=="number"?Dt(An,0|Jt,typeof mn=="number"?0|mn:0|Jt):Jt?(gn(xn,Jt),Nt(An,Jt)):Dt(An,1,1),xn.genMipmaps&&(An.mipmask=(An.width<<1)-1),Gt.mipmask=An.mipmask,dt(Gt,An),Gt.internalformat=An.internalformat,At.width=An.width,At.height=An.height,qt(Gt),Qt(An,3553),Mn(xn,3553),nn(),Ut(An),nt.profile&&(Gt.stats.size=f(Gt.internalformat,Gt.type,An.width,An.height,xn.genMipmaps,!1)),At.format=Jn[Gt.internalformat],At.type=Gn[Gt.type],At.mag=lr[xn.magFilter],At.min=Rt[xn.minFilter],At.wrapS=$t[xn.wrapS],At.wrapT=$t[xn.wrapT],At}var Gt=new cn(3553);return Ln[Gt.id]=Gt,Be.textureCount++,At(Vt,_n),At.subimage=function(Jt,mn,xn,An){mn|=0,xn|=0,An|=0;var ln=ft();return dt(ln,Gt),ln.width=0,ln.height=0,wt(ln,Jt),ln.width=ln.width||(Gt.width>>An)-mn,ln.height=ln.height||(Gt.height>>An)-xn,qt(Gt),ct(ln,3553,mn,xn,An),nn(),bt(ln),At},At.resize=function(Jt,mn){var xn=0|Jt,An=0|mn||xn;if(xn===Gt.width&&An===Gt.height)return At;At.width=Gt.width=xn,At.height=Gt.height=An,qt(Gt);for(var ln=0;Gt.mipmask>>ln;++ln){var Yt=xn>>ln,Wt=An>>ln;if(!Yt||!Wt)break;Ve.texImage2D(3553,ln,Gt.format,Yt,Wt,0,Gt.format,Gt.type,null)}return nn(),nt.profile&&(Gt.stats.size=f(Gt.internalformat,Gt.type,xn,An,!1,!1)),At},At._reglType="texture2d",At._texture=Gt,nt.profile&&(At.stats=Gt.stats),At.destroy=function(){Gt.decRef()},At},createCube:function(Vt,_n,At,Gt,Jt,mn){function xn(Yt,Wt,on,un,En,Pn){var Un,Fn=An.texInfo;for(Xt.call(Fn),Un=0;6>Un;++Un)ln[Un]=jt();if(typeof Yt!="number"&&Yt){if(typeof Yt=="object")if(Wt)Nt(ln[0],Yt),Nt(ln[1],Wt),Nt(ln[2],on),Nt(ln[3],un),Nt(ln[4],En),Nt(ln[5],Pn);else if(gn(Fn,Yt),ht(An,Yt),"faces"in Yt)for(Yt=Yt.faces,Un=0;6>Un;++Un)dt(ln[Un],An),Nt(ln[Un],Yt[Un]);else for(Un=0;6>Un;++Un)Nt(ln[Un],Yt)}else for(Yt=0|Yt||1,Un=0;6>Un;++Un)Dt(ln[Un],Yt,Yt);for(dt(An,ln[0]),An.mipmask=Fn.genMipmaps?(ln[0].width<<1)-1:ln[0].mipmask,An.internalformat=ln[0].internalformat,xn.width=ln[0].width,xn.height=ln[0].height,qt(An),Un=0;6>Un;++Un)Qt(ln[Un],34069+Un);for(Mn(Fn,34067),nn(),nt.profile&&(An.stats.size=f(An.internalformat,An.type,xn.width,xn.height,Fn.genMipmaps,!0)),xn.format=Jn[An.internalformat],xn.type=Gn[An.type],xn.mag=lr[Fn.magFilter],xn.min=Rt[Fn.minFilter],xn.wrapS=$t[Fn.wrapS],xn.wrapT=$t[Fn.wrapT],Un=0;6>Un;++Un)Ut(ln[Un]);return xn}var An=new cn(34067);Ln[An.id]=An,Be.cubeCount++;var ln=Array(6);return xn(Vt,_n,At,Gt,Jt,mn),xn.subimage=function(Yt,Wt,on,un,En){on|=0,un|=0,En|=0;var Pn=ft();return dt(Pn,An),Pn.width=0,Pn.height=0,wt(Pn,Wt),Pn.width=Pn.width||(An.width>>En)-on,Pn.height=Pn.height||(An.height>>En)-un,qt(An),ct(Pn,34069+Yt,on,un,En),nn(),bt(Pn),xn},xn.resize=function(Yt){if((Yt|=0)!==An.width){xn.width=An.width=Yt,xn.height=An.height=Yt,qt(An);for(var Wt=0;6>Wt;++Wt)for(var on=0;An.mipmask>>on;++on)Ve.texImage2D(34069+Wt,on,An.format,Yt>>on,Yt>>on,0,An.format,An.type,null);return nn(),nt.profile&&(An.stats.size=f(An.internalformat,An.type,xn.width,xn.height,!1,!0)),xn}},xn._reglType="textureCube",xn._texture=An,nt.profile&&(xn.stats=An.stats),xn.destroy=function(){An.decRef()},xn},clear:function(){for(var Vt=0;Vt<In;++Vt)Ve.activeTexture(33984+Vt),Ve.bindTexture(3553,null),Wn[Vt]=null;me(Ln).forEach(Kt),Be.cubeCount=0,Be.textureCount=0},getTexture:function(Vt){return null},restore:function(){for(var Vt=0;Vt<In;++Vt){var _n=Wn[Vt];_n&&(_n.bindCount=0,_n.unit=-1,Wn[Vt]=null)}me(Ln).forEach(function(At){At.texture=Ve.createTexture(),Ve.bindTexture(At.target,At.texture);for(var Gt=0;32>Gt;++Gt)if(At.mipmask&1<<Gt)if(At.target===3553)Ve.texImage2D(3553,Gt,At.internalformat,At.width>>Gt,At.height>>Gt,0,At.internalformat,At.type,null);else for(var Jt=0;6>Jt;++Jt)Ve.texImage2D(34069+Jt,Gt,At.internalformat,At.width>>Gt,At.height>>Gt,0,At.internalformat,At.type,null);Mn(At.texInfo,At.target)})},refresh:function(){for(var Vt=0;Vt<In;++Vt){var _n=Wn[Vt];_n&&(_n.bindCount=0,_n.unit=-1,Wn[Vt]=null),Ve.activeTexture(33984+Vt),Ve.bindTexture(3553,null),Ve.bindTexture(34067,null)}}}}function w(Ve,We,at,et,De,Be){function nt(cn,qt,nn){this.target=cn,this.texture=qt,this.renderbuffer=nn;var Kt=cn=0;qt?(cn=qt.width,Kt=qt.height):nn&&(cn=nn.width,Kt=nn.height),this.width=cn,this.height=Kt}function tt(cn){cn&&(cn.texture&&cn.texture._texture.decRef(),cn.renderbuffer&&cn.renderbuffer._renderbuffer.decRef())}function dt(cn,qt,nn){cn&&(cn.texture?cn.texture._texture.refCount+=1:cn.renderbuffer._renderbuffer.refCount+=1)}function ht(cn,qt){qt&&(qt.texture?Ve.framebufferTexture2D(36160,cn,qt.target,qt.texture._texture.texture,0):Ve.framebufferRenderbuffer(36160,cn,36161,qt.renderbuffer._renderbuffer.renderbuffer))}function gt(cn){var qt=3553,nn=null,Kt=null,sn=cn;return typeof cn=="object"&&(sn=cn.data,"target"in cn&&(qt=0|cn.target)),(cn=sn._reglType)==="texture2d"||cn==="textureCube"?nn=sn:cn==="renderbuffer"&&(Kt=sn,qt=36161),new nt(qt,nn,Kt)}function ut(cn,qt,nn,Kt,sn){return nn?((cn=et.create2D({width:cn,height:qt,format:Kt,type:sn}))._texture.refCount=0,new nt(3553,cn,null)):((cn=De.create({width:cn,height:qt,format:Kt}))._renderbuffer.refCount=0,new nt(36161,null,cn))}function wt(cn){return cn&&(cn.texture||cn.renderbuffer)}function ct(cn,qt,nn){cn&&(cn.texture?cn.texture.resize(qt,nn):cn.renderbuffer&&cn.renderbuffer.resize(qt,nn),cn.width=qt,cn.height=nn)}function ft(){this.id=gn++,Mn[this.id]=this,this.framebuffer=Ve.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function bt(cn){cn.colorAttachments.forEach(tt),tt(cn.depthAttachment),tt(cn.stencilAttachment),tt(cn.depthStencilAttachment)}function It(cn){Ve.deleteFramebuffer(cn.framebuffer),cn.framebuffer=null,Be.framebufferCount--,delete Mn[cn.id]}function Dt(cn){var qt;Ve.bindFramebuffer(36160,cn.framebuffer);var nn=cn.colorAttachments;for(qt=0;qt<nn.length;++qt)ht(36064+qt,nn[qt]);for(qt=nn.length;qt<at.maxColorAttachments;++qt)Ve.framebufferTexture2D(36160,36064+qt,3553,null,0);Ve.framebufferTexture2D(36160,33306,3553,null,0),Ve.framebufferTexture2D(36160,36096,3553,null,0),Ve.framebufferTexture2D(36160,36128,3553,null,0),ht(36096,cn.depthAttachment),ht(36128,cn.stencilAttachment),ht(33306,cn.depthStencilAttachment),Ve.checkFramebufferStatus(36160),Ve.isContextLost(),Ve.bindFramebuffer(36160,Qt.next?Qt.next.framebuffer:null),Qt.cur=Qt.next,Ve.getError()}function Nt(cn,qt){function nn(sn,hn){var bn,yn=0,Sn=0,pn=!0,Cn=!0;bn=null;var Hn=!0,Qn="rgba",nr="uint8",Jn=1,Gn=null,lr=null,Rt=null,$t=!1;typeof sn=="number"?(yn=0|sn,Sn=0|hn||yn):sn?("shape"in sn?(yn=(Sn=sn.shape)[0],Sn=Sn[1]):("radius"in sn&&(yn=Sn=sn.radius),"width"in sn&&(yn=sn.width),"height"in sn&&(Sn=sn.height)),("color"in sn||"colors"in sn)&&(bn=sn.color||sn.colors,Array.isArray(bn)),bn||("colorCount"in sn&&(Jn=0|sn.colorCount),"colorTexture"in sn&&(Hn=!!sn.colorTexture,Qn="rgba4"),"colorType"in sn&&(nr=sn.colorType,!Hn)&&(nr==="half float"||nr==="float16"?Qn="rgba16f":nr!=="float"&&nr!=="float32"||(Qn="rgba32f")),"colorFormat"in sn&&(Qn=sn.colorFormat,0<=jt.indexOf(Qn)?Hn=!0:0<=Ut.indexOf(Qn)&&(Hn=!1))),("depthTexture"in sn||"depthStencilTexture"in sn)&&($t=!(!sn.depthTexture&&!sn.depthStencilTexture)),"depth"in sn&&(typeof sn.depth=="boolean"?pn=sn.depth:(Gn=sn.depth,Cn=!1)),"stencil"in sn&&(typeof sn.stencil=="boolean"?Cn=sn.stencil:(lr=sn.stencil,pn=!1)),"depthStencil"in sn&&(typeof sn.depthStencil=="boolean"?pn=Cn=sn.depthStencil:(Rt=sn.depthStencil,Cn=pn=!1))):yn=Sn=1;var an=null,fn=null,wn=null,Bn=null;if(Array.isArray(bn))an=bn.map(gt);else if(bn)an=[gt(bn)];else for(an=Array(Jn),bn=0;bn<Jn;++bn)an[bn]=ut(yn,Sn,Hn,Qn,nr);for(yn=yn||an[0].width,Sn=Sn||an[0].height,Gn?fn=gt(Gn):pn&&!Cn&&(fn=ut(yn,Sn,$t,"depth","uint32")),lr?wn=gt(lr):Cn&&!pn&&(wn=ut(yn,Sn,!1,"stencil","uint8")),Rt?Bn=gt(Rt):!Gn&&!lr&&Cn&&pn&&(Bn=ut(yn,Sn,$t,"depth stencil","depth stencil")),pn=null,bn=0;bn<an.length;++bn)dt(an[bn]),an[bn]&&an[bn].texture&&(Cn=xt[an[bn].texture._texture.format]*mt[an[bn].texture._texture.type],pn===null&&(pn=Cn));return dt(fn),dt(wn),dt(Bn),bt(Kt),Kt.width=yn,Kt.height=Sn,Kt.colorAttachments=an,Kt.depthAttachment=fn,Kt.stencilAttachment=wn,Kt.depthStencilAttachment=Bn,nn.color=an.map(wt),nn.depth=wt(fn),nn.stencil=wt(wn),nn.depthStencil=wt(Bn),nn.width=Kt.width,nn.height=Kt.height,Dt(Kt),nn}var Kt=new ft;return Be.framebufferCount++,nn(cn,qt),Q(nn,{resize:function(sn,hn){var bn=Math.max(0|sn,1),yn=Math.max(0|hn||bn,1);if(bn===Kt.width&&yn===Kt.height)return nn;for(var Sn=Kt.colorAttachments,pn=0;pn<Sn.length;++pn)ct(Sn[pn],bn,yn);return ct(Kt.depthAttachment,bn,yn),ct(Kt.stencilAttachment,bn,yn),ct(Kt.depthStencilAttachment,bn,yn),Kt.width=nn.width=bn,Kt.height=nn.height=yn,Dt(Kt),nn},_reglType:"framebuffer",_framebuffer:Kt,destroy:function(){It(Kt),bt(Kt)},use:function(sn){Qt.setFBO({framebuffer:nn},sn)}})}var Qt={cur:null,next:null,dirty:!1,setFBO:null},jt=["rgba"],Ut=["rgba4","rgb565","rgb5 a1"];We.ext_srgb&&Ut.push("srgba"),We.ext_color_buffer_half_float&&Ut.push("rgba16f","rgb16f"),We.webgl_color_buffer_float&&Ut.push("rgba32f");var Xt=["uint8"];We.oes_texture_half_float&&Xt.push("half float","float16"),We.oes_texture_float&&Xt.push("float","float32");var gn=0,Mn={};return Q(Qt,{getFramebuffer:function(cn){return typeof cn=="function"&&cn._reglType==="framebuffer"&&(cn=cn._framebuffer)instanceof ft?cn:null},create:Nt,createCube:function(cn){function qt(Kt){var sn,hn={color:null},bn=0,yn=null;sn="rgba";var Sn="uint8",pn=1;if(typeof Kt=="number"?bn=0|Kt:Kt?("shape"in Kt?bn=Kt.shape[0]:("radius"in Kt&&(bn=0|Kt.radius),"width"in Kt?bn=0|Kt.width:"height"in Kt&&(bn=0|Kt.height)),("color"in Kt||"colors"in Kt)&&(yn=Kt.color||Kt.colors,Array.isArray(yn)),yn||("colorCount"in Kt&&(pn=0|Kt.colorCount),"colorType"in Kt&&(Sn=Kt.colorType),"colorFormat"in Kt&&(sn=Kt.colorFormat)),"depth"in Kt&&(hn.depth=Kt.depth),"stencil"in Kt&&(hn.stencil=Kt.stencil),"depthStencil"in Kt&&(hn.depthStencil=Kt.depthStencil)):bn=1,yn)if(Array.isArray(yn))for(Kt=[],sn=0;sn<yn.length;++sn)Kt[sn]=yn[sn];else Kt=[yn];else for(Kt=Array(pn),yn={radius:bn,format:sn,type:Sn},sn=0;sn<pn;++sn)Kt[sn]=et.createCube(yn);for(hn.color=Array(Kt.length),sn=0;sn<Kt.length;++sn)pn=Kt[sn],bn=bn||pn.width,hn.color[sn]={target:34069,data:Kt[sn]};for(sn=0;6>sn;++sn){for(pn=0;pn<Kt.length;++pn)hn.color[pn].target=34069+sn;0<sn&&(hn.depth=nn[0].depth,hn.stencil=nn[0].stencil,hn.depthStencil=nn[0].depthStencil),nn[sn]?nn[sn](hn):nn[sn]=Nt(hn)}return Q(qt,{width:bn,height:bn,color:Kt})}var nn=Array(6);return qt(cn),Q(qt,{faces:nn,resize:function(Kt){var sn=0|Kt;if(sn===qt.width)return qt;var hn=qt.color;for(Kt=0;Kt<hn.length;++Kt)hn[Kt].resize(sn);for(Kt=0;6>Kt;++Kt)nn[Kt].resize(sn);return qt.width=qt.height=sn,qt},_reglType:"framebufferCube",destroy:function(){nn.forEach(function(Kt){Kt.destroy()})}})},clear:function(){me(Mn).forEach(It)},restore:function(){Qt.cur=null,Qt.next=null,Qt.dirty=!0,me(Mn).forEach(function(cn){cn.framebuffer=Ve.createFramebuffer(),Dt(cn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function L(Ve,We,at,et,De,Be,nt){function tt(){this.id=++gt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ct=We.oes_vertex_array_object;this.vao=ct?ct.createVertexArrayOES():null,ut[this.id]=this,this.buffers=[]}var dt=at.maxAttributes,ht=Array(dt);for(at=0;at<dt;++at)ht[at]=new E;var gt=0,ut={},wt={Record:E,scope:{},state:ht,currentVAO:null,targetVAO:null,restore:We.oes_vertex_array_object?function(){We.oes_vertex_array_object&&me(ut).forEach(function(ct){ct.refresh()})}:function(){},createVAO:function(ct){function ft(It){var Dt;Array.isArray(It)?(Dt=It,bt.elements&&bt.ownsElements&&bt.elements.destroy(),bt.elements=null,bt.ownsElements=!1,bt.offset=0,bt.count=0,bt.instances=-1,bt.primitive=4):(It.elements?(Dt=It.elements,bt.ownsElements?(typeof Dt=="function"&&Dt._reglType==="elements"?bt.elements.destroy():bt.elements(Dt),bt.ownsElements=!1):Be.getElements(It.elements)?(bt.elements=It.elements,bt.ownsElements=!1):(bt.elements=Be.create(It.elements),bt.ownsElements=!0)):(bt.elements=null,bt.ownsElements=!1),Dt=It.attributes,bt.offset=0,bt.count=-1,bt.instances=-1,bt.primitive=4,bt.elements&&(bt.count=bt.elements._elements.vertCount,bt.primitive=bt.elements._elements.primType),"offset"in It&&(bt.offset=0|It.offset),"count"in It&&(bt.count=0|It.count),"instances"in It&&(bt.instances=0|It.instances),"primitive"in It&&(bt.primitive=Ee[It.primitive])),It={};var Nt=bt.attributes;Nt.length=Dt.length;for(var Qt=0;Qt<Dt.length;++Qt){var jt,Ut=Dt[Qt],Xt=Nt[Qt]=new E,gn=Ut.data||Ut;Array.isArray(gn)||_e(gn)||t(gn)?(bt.buffers[Qt]&&(jt=bt.buffers[Qt],_e(gn)&&jt._buffer.byteLength>=gn.byteLength?jt.subdata(gn):(jt.destroy(),bt.buffers[Qt]=null)),bt.buffers[Qt]||(jt=bt.buffers[Qt]=De.create(Ut,34962,!1,!0)),Xt.buffer=De.getBuffer(jt),Xt.size=0|Xt.buffer.dimension,Xt.normalized=!1,Xt.type=Xt.buffer.dtype,Xt.offset=0,Xt.stride=0,Xt.divisor=0,Xt.state=1,It[Qt]=1):De.getBuffer(Ut)?(Xt.buffer=De.getBuffer(Ut),Xt.size=0|Xt.buffer.dimension,Xt.normalized=!1,Xt.type=Xt.buffer.dtype,Xt.offset=0,Xt.stride=0,Xt.divisor=0,Xt.state=1):De.getBuffer(Ut.buffer)?(Xt.buffer=De.getBuffer(Ut.buffer),Xt.size=0|(+Ut.size||Xt.buffer.dimension),Xt.normalized=!!Ut.normalized||!1,Xt.type="type"in Ut?Me[Ut.type]:Xt.buffer.dtype,Xt.offset=0|(Ut.offset||0),Xt.stride=0|(Ut.stride||0),Xt.divisor=0|(Ut.divisor||0),Xt.state=1):"x"in Ut&&(Xt.x=+Ut.x||0,Xt.y=+Ut.y||0,Xt.z=+Ut.z||0,Xt.w=+Ut.w||0,Xt.state=2)}for(jt=0;jt<bt.buffers.length;++jt)!It[jt]&&bt.buffers[jt]&&(bt.buffers[jt].destroy(),bt.buffers[jt]=null);return bt.refresh(),ft}var bt=new tt;return et.vaoCount+=1,ft.destroy=function(){for(var It=0;It<bt.buffers.length;++It)bt.buffers[It]&&bt.buffers[It].destroy();bt.buffers.length=0,bt.ownsElements&&(bt.elements.destroy(),bt.elements=null,bt.ownsElements=!1),bt.destroy()},ft._vao=bt,ft._reglType="vao",ft(ct)},getVAO:function(ct){return typeof ct=="function"&&ct._vao?ct._vao:null},destroyBuffer:function(ct){for(var ft=0;ft<ht.length;++ft){var bt=ht[ft];bt.buffer===ct&&(Ve.disableVertexAttribArray(ft),bt.buffer=null)}},setVAO:We.oes_vertex_array_object?function(ct){if(ct!==wt.currentVAO){var ft=We.oes_vertex_array_object;ct?ft.bindVertexArrayOES(ct.vao):ft.bindVertexArrayOES(null),wt.currentVAO=ct}}:function(ct){if(ct!==wt.currentVAO){if(ct)ct.bindAttrs();else{for(var ft=We.angle_instanced_arrays,bt=0;bt<ht.length;++bt){var It=ht[bt];It.buffer?(Ve.enableVertexAttribArray(bt),It.buffer.bind(),Ve.vertexAttribPointer(bt,It.size,It.type,It.normalized,It.stride,It.offfset),ft&&It.divisor&&ft.vertexAttribDivisorANGLE(bt,It.divisor)):(Ve.disableVertexAttribArray(bt),Ve.vertexAttrib4f(bt,It.x,It.y,It.z,It.w))}nt.elements?Ve.bindBuffer(34963,nt.elements.buffer.buffer):Ve.bindBuffer(34963,null)}wt.currentVAO=ct}},clear:We.oes_vertex_array_object?function(){me(ut).forEach(function(ct){ct.destroy()})}:function(){}};return tt.prototype.bindAttrs=function(){for(var ct=We.angle_instanced_arrays,ft=this.attributes,bt=0;bt<ft.length;++bt){var It=ft[bt];It.buffer?(Ve.enableVertexAttribArray(bt),Ve.bindBuffer(34962,It.buffer.buffer),Ve.vertexAttribPointer(bt,It.size,It.type,It.normalized,It.stride,It.offset),ct&&It.divisor&&ct.vertexAttribDivisorANGLE(bt,It.divisor)):(Ve.disableVertexAttribArray(bt),Ve.vertexAttrib4f(bt,It.x,It.y,It.z,It.w))}for(ct=ft.length;ct<dt;++ct)Ve.disableVertexAttribArray(ct);(ct=Be.getElements(this.elements))?Ve.bindBuffer(34963,ct.buffer.buffer):Ve.bindBuffer(34963,null)},tt.prototype.refresh=function(){var ct=We.oes_vertex_array_object;ct&&(ct.bindVertexArrayOES(this.vao),this.bindAttrs(),wt.currentVAO=null,ct.bindVertexArrayOES(null))},tt.prototype.destroy=function(){if(this.vao){var ct=We.oes_vertex_array_object;this===wt.currentVAO&&(wt.currentVAO=null,ct.bindVertexArrayOES(null)),ct.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ut[this.id]&&(delete ut[this.id],--et.vaoCount)},wt}function C(Ve,We,at,et){function De(ft,bt,It,Dt){this.name=ft,this.id=bt,this.location=It,this.info=Dt}function Be(ft,bt){for(var It=0;It<ft.length;++It)if(ft[It].id===bt.id)return void(ft[It].location=bt.location);ft.push(bt)}function nt(ft,bt,It){if(!(Nt=(It=ft===35632?ht:gt)[bt])){var Dt=We.str(bt),Nt=Ve.createShader(ft);Ve.shaderSource(Nt,Dt),Ve.compileShader(Nt),It[bt]=Nt}return Nt}function tt(ft,bt){this.id=ct++,this.fragId=ft,this.vertId=bt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,et.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function dt(ft,bt,It){var Dt;Dt=nt(35632,ft.fragId);var Nt=nt(35633,ft.vertId);if(bt=ft.program=Ve.createProgram(),Ve.attachShader(bt,Dt),Ve.attachShader(bt,Nt),It)for(Dt=0;Dt<It.length;++Dt)Nt=It[Dt],Ve.bindAttribLocation(bt,Nt[0],Nt[1]);Ve.linkProgram(bt),Nt=Ve.getProgramParameter(bt,35718),et.profile&&(ft.stats.uniformsCount=Nt);var Qt=ft.uniforms;for(Dt=0;Dt<Nt;++Dt)if(It=Ve.getActiveUniform(bt,Dt))if(1<It.size)for(var jt=0;jt<It.size;++jt){var Ut=It.name.replace("[0]","["+jt+"]");Be(Qt,new De(Ut,We.id(Ut),Ve.getUniformLocation(bt,Ut),It))}else Be(Qt,new De(It.name,We.id(It.name),Ve.getUniformLocation(bt,It.name),It));for(Nt=Ve.getProgramParameter(bt,35721),et.profile&&(ft.stats.attributesCount=Nt),ft=ft.attributes,Dt=0;Dt<Nt;++Dt)(It=Ve.getActiveAttrib(bt,Dt))&&Be(ft,new De(It.name,We.id(It.name),Ve.getAttribLocation(bt,It.name),It))}var ht={},gt={},ut={},wt=[],ct=0;return et.profile&&(at.getMaxUniformsCount=function(){var ft=0;return wt.forEach(function(bt){bt.stats.uniformsCount>ft&&(ft=bt.stats.uniformsCount)}),ft},at.getMaxAttributesCount=function(){var ft=0;return wt.forEach(function(bt){bt.stats.attributesCount>ft&&(ft=bt.stats.attributesCount)}),ft}),{clear:function(){var ft=Ve.deleteShader.bind(Ve);me(ht).forEach(ft),ht={},me(gt).forEach(ft),gt={},wt.forEach(function(bt){Ve.deleteProgram(bt.program)}),wt.length=0,ut={},at.shaderCount=0},program:function(ft,bt,It,Dt){var Nt=ut[bt];Nt||(Nt=ut[bt]={});var Qt=Nt[ft];if(Qt&&(Qt.refCount++,!Dt))return Qt;var jt=new tt(bt,ft);return at.shaderCount++,dt(jt,It,Dt),Qt||(Nt[ft]=jt),wt.push(jt),Q(jt,{destroy:function(){if(jt.refCount--,0>=jt.refCount){Ve.deleteProgram(jt.program);var Ut=wt.indexOf(jt);wt.splice(Ut,1),at.shaderCount--}0>=Nt[jt.vertId].refCount&&(Ve.deleteShader(gt[jt.vertId]),delete gt[jt.vertId],delete ut[jt.fragId][jt.vertId]),Object.keys(ut[jt.fragId]).length||(Ve.deleteShader(ht[jt.fragId]),delete ht[jt.fragId],delete ut[jt.fragId])}})},restore:function(){ht={},gt={};for(var ft=0;ft<wt.length;++ft)dt(wt[ft],null,wt[ft].attributes.map(function(bt){return[bt.location,bt.name]}))},shader:nt,frag:-1,vert:-1}}function P(Ve,We,at,et,De,Be,nt){function tt(dt){var ht;ht=We.next===null?5121:We.next.colorAttachments[0].texture._texture.type;var gt=0,ut=0,wt=et.framebufferWidth,ct=et.framebufferHeight,ft=null;return _e(dt)?ft=dt:dt&&(gt=0|dt.x,ut=0|dt.y,wt=0|(dt.width||et.framebufferWidth-gt),ct=0|(dt.height||et.framebufferHeight-ut),ft=dt.data||null),at(),dt=wt*ct*4,ft||(ht===5121?ft=new Uint8Array(dt):ht===5126&&(ft=ft||new Float32Array(dt))),Ve.pixelStorei(3333,4),Ve.readPixels(gt,ut,wt,ct,6408,ht,ft),ft}return function(dt){return dt&&"framebuffer"in dt?function(ht){var gt;return We.setFBO({framebuffer:ht.framebuffer},function(){gt=tt(ht)}),gt}(dt):tt(dt)}}function z(Ve,We){return Ve>>>We|Ve<<32-We}function G(Ve,We){var at=(65535&Ve)+(65535&We);return(Ve>>16)+(We>>16)+(at>>16)<<16|65535&at}function O(Ve){return Array.prototype.slice.call(Ve)}function H(Ve){return O(Ve).join("")}function N(Ve){function We(){var gt=[],ut=[];return Q(function(){gt.push.apply(gt,O(arguments))},{def:function(){var wt="v"+De++;return ut.push(wt),0<arguments.length&&(gt.push(wt,"="),gt.push.apply(gt,O(arguments)),gt.push(";")),wt},toString:function(){return H([0<ut.length?"var "+ut.join(",")+";":"",H(gt)])}})}function at(){function gt(bt,It){wt(bt,It,"=",ut.def(bt,It),";")}var ut=We(),wt=We(),ct=ut.toString,ft=wt.toString;return Q(function(){ut.apply(ut,O(arguments))},{def:ut.def,entry:ut,exit:wt,save:gt,set:function(bt,It,Dt){gt(bt,It),ut(bt,It,"=",Dt,";")},toString:function(){return ct()+ft()}})}var et=Ve&&Ve.cache,De=0,Be=[],nt=[],tt=[],dt=We(),ht={};return{global:dt,link:function(gt,ut){var wt=ut&&ut.stable;if(!wt){for(var ct=0;ct<nt.length;++ct)if(nt[ct]===gt&&!tt[ct])return Be[ct]}return ct="g"+De++,Be.push(ct),nt.push(gt),tt.push(wt),ct},block:We,proc:function(gt,ut){function wt(){var It="a"+ct.length;return ct.push(It),It}var ct=[];ut=ut||0;for(var ft=0;ft<ut;++ft)wt();var bt=(ft=at()).toString;return ht[gt]=Q(ft,{arg:wt,toString:function(){return H(["function(",ct.join(),"){",bt(),"}"])}})},scope:at,cond:function(){var gt=H(arguments),ut=at(),wt=at(),ct=ut.toString,ft=wt.toString;return Q(ut,{then:function(){return ut.apply(ut,O(arguments)),this},else:function(){return wt.apply(wt,O(arguments)),this},toString:function(){var bt=ft();return bt&&(bt="else{"+bt+"}"),H(["if(",gt,"){",ct(),"}",bt])}})},compile:function(){var gt=['"use strict";',dt,"return {"];Object.keys(ht).forEach(function(ct){gt.push('"',ct,'":',ht[ct].toString(),",")}),gt.push("}");var ut,wt=H(gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return et&&(ut=function(ct){for(var ft,bt="",It=0;It<ct.length;It++)ft=ct.charCodeAt(It),bt+="0123456789abcdef".charAt(ft>>>4&15)+"0123456789abcdef".charAt(15&ft);return bt}(function(ct){for(var ft=Array(ct.length>>2),bt=0;bt<ft.length;bt++)ft[bt]=0;for(bt=0;bt<8*ct.length;bt+=8)ft[bt>>5]|=(255&ct.charCodeAt(bt/8))<<24-bt%32;var It,Dt,Nt,Qt,jt,Ut,Xt,gn,Mn,cn,qt,nn=8*ct.length;for(ct=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],bt=Array(64),ft[nn>>5]|=128<<24-nn%32,ft[15+(nn+64>>9<<4)]=nn,gn=0;gn<ft.length;gn+=16){for(nn=ct[0],It=ct[1],Dt=ct[2],Nt=ct[3],Qt=ct[4],jt=ct[5],Ut=ct[6],Xt=ct[7],Mn=0;64>Mn;Mn++){var Kt;16>Mn?bt[Mn]=ft[Mn+gn]:(cn=Mn,qt=G(qt=z(qt=bt[Mn-2],17)^z(qt,19)^qt>>>10,bt[Mn-7]),Kt=z(Kt=bt[Mn-15],7)^z(Kt,18)^Kt>>>3,bt[cn]=G(G(qt,Kt),bt[Mn-16])),cn=G(G(G(G(Xt,cn=z(cn=Qt,6)^z(cn,11)^z(cn,25)),Qt&jt^~Qt&Ut),rt[Mn]),bt[Mn]),qt=G(Xt=z(Xt=nn,2)^z(Xt,13)^z(Xt,22),nn&It^nn&Dt^It&Dt),Xt=Ut,Ut=jt,jt=Qt,Qt=G(Nt,cn),Nt=Dt,Dt=It,It=nn,nn=G(cn,qt)}ct[0]=G(nn,ct[0]),ct[1]=G(It,ct[1]),ct[2]=G(Dt,ct[2]),ct[3]=G(Nt,ct[3]),ct[4]=G(Qt,ct[4]),ct[5]=G(jt,ct[5]),ct[6]=G(Ut,ct[6]),ct[7]=G(Xt,ct[7])}for(ft="",bt=0;bt<32*ct.length;bt+=8)ft+=String.fromCharCode(ct[bt>>5]>>>24-bt%32&255);return ft}(function(ct){for(var ft,bt,It="",Dt=-1;++Dt<ct.length;)ft=ct.charCodeAt(Dt),bt=Dt+1<ct.length?ct.charCodeAt(Dt+1):0,55296<=ft&&56319>=ft&&56320<=bt&&57343>=bt&&(ft=65536+((1023&ft)<<10)+(1023&bt),Dt++),127>=ft?It+=String.fromCharCode(ft):2047>=ft?It+=String.fromCharCode(192|ft>>>6&31,128|63&ft):65535>=ft?It+=String.fromCharCode(224|ft>>>12&15,128|ft>>>6&63,128|63&ft):2097151>=ft&&(It+=String.fromCharCode(240|ft>>>18&7,128|ft>>>12&63,128|ft>>>6&63,128|63&ft));return It}(wt))),et[ut])?et[ut].apply(null,nt):(wt=Function.apply(null,Be.concat(wt)),et&&(et[ut]=wt),wt.apply(null,nt))}}}function B(Ve){return Array.isArray(Ve)||_e(Ve)||t(Ve)}function V(Ve){return Ve.sort(function(We,at){return We==="viewport"?-1:at==="viewport"?1:We<at?-1:1})}function q(Ve,We,at,et){this.thisDep=Ve,this.contextDep=We,this.propDep=at,this.append=et}function te(Ve){return Ve&&!(Ve.thisDep||Ve.contextDep||Ve.propDep)}function K(Ve){return new q(!1,!1,!1,Ve)}function J(Ve,We){var at=Ve.type;if(at===0)return new q(!0,1<=(at=Ve.data.length),2<=at,We);if(at===4)return new q((at=Ve.data).thisDep,at.contextDep,at.propDep,We);if(at===5)return new q(!1,!1,!1,We);if(at===6){for(var et=at=!1,De=!1,Be=0;Be<Ve.data.length;++Be){var nt=Ve.data[Be];nt.type===1?De=!0:nt.type===2?et=!0:nt.type===3?at=!0:nt.type===0?(at=!0,1<=(nt=nt.data)&&(et=!0),2<=nt&&(De=!0)):nt.type===4&&(at=at||nt.data.thisDep,et=et||nt.data.contextDep,De=De||nt.data.propDep)}return new q(at,et,De,We)}return new q(at===3,at===2,at===1,We)}function Y(Ve,We,at,et,De,Be,nt,tt,dt,ht,gt,ut,wt,ct,ft,bt){function It(At){return At.replace(".","_")}function Dt(At,Gt,Jt){var mn=It(At);Bn.push(At),wn[mn]=fn[mn]=!!Jt,Ln[mn]=Gt}function Nt(At,Gt,Jt){var mn=It(At);Bn.push(At),Array.isArray(Jt)?(fn[mn]=Jt.slice(),wn[mn]=Jt.slice()):fn[mn]=wn[mn]=Jt,In[mn]=Gt}function Qt(){var At=N({cache:ft}),Gt=At.link,Jt=At.global;At.id=_n++,At.batchId="0";var mn=Gt(Wn),xn=At.shared={props:"a0"};Object.keys(Wn).forEach(function(on){xn[on]=Jt.def(mn,".",on)});var An=At.next={},ln=At.current={};Object.keys(In).forEach(function(on){Array.isArray(fn[on])&&(An[on]=Jt.def(xn.next,".",on),ln[on]=Jt.def(xn.current,".",on))});var Yt=At.constants={};Object.keys(Vt).forEach(function(on){Yt[on]=Jt.def(JSON.stringify(Vt[on]))}),At.invoke=function(on,un){switch(un.type){case 0:var En=["this",xn.context,xn.props,At.batchId];return on.def(Gt(un.data),".call(",En.slice(0,Math.max(un.data.length+1,4)),")");case 1:return on.def(xn.props,un.data);case 2:return on.def(xn.context,un.data);case 3:return on.def("this",un.data);case 4:return un.data.append(At,on),un.data.ref;case 5:return un.data.toString();case 6:return un.data.map(function(Pn){return At.invoke(on,Pn)})}},At.attribCache={};var Wt={};return At.scopeAttrib=function(on){if((on=We.id(on))in Wt)return Wt[on];var un=ht.scope[on];return un||(un=ht.scope[on]=new Gn),Wt[on]=Gt(un)},At}function jt(At,Gt){var Jt=At.static,mn=At.dynamic;if("framebuffer"in Jt){var xn=Jt.framebuffer;return xn?(xn=tt.getFramebuffer(xn),K(function(ln,Yt){var Wt=ln.link(xn),on=ln.shared;return Yt.set(on.framebuffer,".next",Wt),on=on.context,Yt.set(on,".framebufferWidth",Wt+".width"),Yt.set(on,".framebufferHeight",Wt+".height"),Wt})):K(function(ln,Yt){var Wt=ln.shared;return Yt.set(Wt.framebuffer,".next","null"),Wt=Wt.context,Yt.set(Wt,".framebufferWidth",Wt+".drawingBufferWidth"),Yt.set(Wt,".framebufferHeight",Wt+".drawingBufferHeight"),"null"})}if("framebuffer"in mn){var An=mn.framebuffer;return J(An,function(ln,Yt){var Wt=ln.invoke(Yt,An),on=ln.shared,un=on.framebuffer;return Wt=Yt.def(un,".getFramebuffer(",Wt,")"),Yt.set(un,".next",Wt),on=on.context,Yt.set(on,".framebufferWidth",Wt+"?"+Wt+".width:"+on+".drawingBufferWidth"),Yt.set(on,".framebufferHeight",Wt+"?"+Wt+".height:"+on+".drawingBufferHeight"),Wt})}return null}function Ut(At,Gt,Jt){function mn(on){if(on in xn){var un=We.id(xn[on]);return(on=K(function(){return un})).id=un,on}if(on in An){var En=An[on];return J(En,function(Pn,Un){var Fn=Pn.invoke(Un,En);return Un.def(Pn.shared.strings,".id(",Fn,")")})}return null}var xn=At.static,An=At.dynamic,ln=mn("frag"),Yt=mn("vert"),Wt=null;return te(ln)&&te(Yt)?(Wt=gt.program(Yt.id,ln.id,null,Jt),At=K(function(on,un){return on.link(Wt)})):At=new q(ln&&ln.thisDep||Yt&&Yt.thisDep,ln&&ln.contextDep||Yt&&Yt.contextDep,ln&&ln.propDep||Yt&&Yt.propDep,function(on,un){var En,Pn,Un=on.shared.shader;return En=ln?ln.append(on,un):un.def(Un,".","frag"),Pn=Yt?Yt.append(on,un):un.def(Un,".","vert"),un.def(Un+".program("+Pn+","+En+")")}),{frag:ln,vert:Yt,progVar:At,program:Wt}}function Xt(At,Gt){function Jt(Fn,Kn){if(Fn in mn){var qn=0|mn[Fn];return Kn?An.offset=qn:An.instances=qn,K(function(er,tr){return Kn&&(er.OFFSET=qn),qn})}if(Fn in xn){var rr=xn[Fn];return J(rr,function(er,tr){var ur=er.invoke(tr,rr);return Kn&&(er.OFFSET=ur),ur})}if(Kn){if(Wt)return K(function(er,tr){return er.OFFSET=0});if(ln)return new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(er,tr){return tr.def(er.shared.vao+".currentVAO?"+er.shared.vao+".currentVAO.offset:0")})}else if(ln)return new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(er,tr){return tr.def(er.shared.vao+".currentVAO?"+er.shared.vao+".currentVAO.instances:-1")});return null}var mn=At.static,xn=At.dynamic,An={},ln=!1,Yt=function(){if("vao"in mn){var Fn=mn.vao;return Fn!==null&&ht.getVAO(Fn)===null&&(Fn=ht.createVAO(Fn)),ln=!0,An.vao=Fn,K(function(qn){var rr=ht.getVAO(Fn);return rr?qn.link(rr):"null"})}if("vao"in xn){ln=!0;var Kn=xn.vao;return J(Kn,function(qn,rr){var er=qn.invoke(rr,Kn);return rr.def(qn.shared.vao+".getVAO("+er+")")})}return null}(),Wt=!1,on=function(){if("elements"in mn){var Fn=mn.elements;if(An.elements=Fn,B(Fn)){var Kn=An.elements=Be.create(Fn,!0);Fn=Be.getElements(Kn),Wt=!0}else Fn&&(Fn=Be.getElements(Fn),Wt=!0);return Kn=K(function(rr,er){if(Fn){var tr=rr.link(Fn);return rr.ELEMENTS=tr}return rr.ELEMENTS=null}),Kn.value=Fn,Kn}if("elements"in xn){Wt=!0;var qn=xn.elements;return J(qn,function(rr,er){var tr=(ur=rr.shared).isBufferArgs,ur=ur.elements,cr=rr.invoke(er,qn),br=er.def("null");return tr=er.def(tr,"(",cr,")"),cr=rr.cond(tr).then(br,"=",ur,".createStream(",cr,");").else(br,"=",ur,".getElements(",cr,");"),er.entry(cr),er.exit(rr.cond(tr).then(ur,".destroyStream(",br,");")),rr.ELEMENTS=br})}return ln?new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(rr,er){return er.def(rr.shared.vao+".currentVAO?"+rr.shared.elements+".getElements("+rr.shared.vao+".currentVAO.elements):null")}):null}(),un=Jt("offset",!0),En=function(){if("primitive"in mn){var Fn=mn.primitive;return An.primitive=Fn,K(function(qn,rr){return Ee[Fn]})}if("primitive"in xn){var Kn=xn.primitive;return J(Kn,function(qn,rr){var er=qn.constants.primTypes,tr=qn.invoke(rr,Kn);return rr.def(er,"[",tr,"]")})}return Wt?te(on)?on.value?K(function(qn,rr){return rr.def(qn.ELEMENTS,".primType")}):K(function(){return 4}):new q(on.thisDep,on.contextDep,on.propDep,function(qn,rr){var er=qn.ELEMENTS;return rr.def(er,"?",er,".primType:",4)}):ln?new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(qn,rr){return rr.def(qn.shared.vao+".currentVAO?"+qn.shared.vao+".currentVAO.primitive:4")}):null}(),Pn=function(){if("count"in mn){var Fn=0|mn.count;return An.count=Fn,K(function(){return Fn})}if("count"in xn){var Kn=xn.count;return J(Kn,function(qn,rr){return qn.invoke(rr,Kn)})}return Wt?te(on)?on?un?new q(un.thisDep,un.contextDep,un.propDep,function(qn,rr){return rr.def(qn.ELEMENTS,".vertCount-",qn.OFFSET)}):K(function(qn,rr){return rr.def(qn.ELEMENTS,".vertCount")}):K(function(){return-1}):new q(on.thisDep||un.thisDep,on.contextDep||un.contextDep,on.propDep||un.propDep,function(qn,rr){var er=qn.ELEMENTS;return qn.OFFSET?rr.def(er,"?",er,".vertCount-",qn.OFFSET,":-1"):rr.def(er,"?",er,".vertCount:-1")}):ln?new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(qn,rr){return rr.def(qn.shared.vao,".currentVAO?",qn.shared.vao,".currentVAO.count:-1")}):null}(),Un=Jt("instances",!1);return{elements:on,primitive:En,count:Pn,instances:Un,offset:un,vao:Yt,vaoActive:ln,elementsActive:Wt,static:An}}function gn(At,Gt){var Jt=At.static,mn=At.dynamic,xn={};return Object.keys(Jt).forEach(function(An){var ln=Jt[An],Yt=We.id(An),Wt=new Gn;if(B(ln))Wt.state=1,Wt.buffer=De.getBuffer(De.create(ln,34962,!1,!0)),Wt.type=0;else if(un=De.getBuffer(ln))Wt.state=1,Wt.buffer=un,Wt.type=0;else if("constant"in ln){var on=ln.constant;Wt.buffer="null",Wt.state=2,typeof on=="number"?Wt.x=on:it.forEach(function(qn,rr){rr<on.length&&(Wt[qn]=on[rr])})}else{var un=B(ln.buffer)?De.getBuffer(De.create(ln.buffer,34962,!1,!0)):De.getBuffer(ln.buffer),En=0|ln.offset,Pn=0|ln.stride,Un=0|ln.size,Fn=!!ln.normalized,Kn=0;"type"in ln&&(Kn=Me[ln.type]),ln=0|ln.divisor,Wt.buffer=un,Wt.state=1,Wt.size=Un,Wt.normalized=Fn,Wt.type=Kn||un.dtype,Wt.offset=En,Wt.stride=Pn,Wt.divisor=ln}xn[An]=K(function(qn,rr){var er=qn.attribCache;if(Yt in er)return er[Yt];var tr={isStream:!1};return Object.keys(Wt).forEach(function(ur){tr[ur]=Wt[ur]}),Wt.buffer&&(tr.buffer=qn.link(Wt.buffer),tr.type=tr.type||tr.buffer+".dtype"),er[Yt]=tr})}),Object.keys(mn).forEach(function(An){var ln=mn[An];xn[An]=J(ln,function(Yt,Wt){function on(er){Wt(Fn[er],"=",un,".",er,"|0;")}var un=Yt.invoke(Wt,ln),En=Yt.shared,Pn=Yt.constants,Un=En.isBufferArgs,Fn=(En=En.buffer,{isStream:Wt.def(!1)}),Kn=new Gn;Kn.state=1,Object.keys(Kn).forEach(function(er){Fn[er]=Wt.def(""+Kn[er])});var qn=Fn.buffer,rr=Fn.type;return Wt("if(",Un,"(",un,")){",Fn.isStream,"=true;",qn,"=",En,".createStream(",34962,",",un,");",rr,"=",qn,".dtype;","}else{",qn,"=",En,".getBuffer(",un,");","if(",qn,"){",rr,"=",qn,".dtype;",'}else if("constant" in ',un,"){",Fn.state,"=",2,";","if(typeof "+un+'.constant === "number"){',Fn[it[0]],"=",un,".constant;",it.slice(1).map(function(er){return Fn[er]}).join("="),"=0;","}else{",it.map(function(er,tr){return Fn[er]+"="+un+".constant.length>"+tr+"?"+un+".constant["+tr+"]:0;"}).join(""),"}}else{","if(",Un,"(",un,".buffer)){",qn,"=",En,".createStream(",34962,",",un,".buffer);","}else{",qn,"=",En,".getBuffer(",un,".buffer);","}",rr,'="type" in ',un,"?",Pn.glTypes,"[",un,".type]:",qn,".dtype;",Fn.normalized,"=!!",un,".normalized;"),on("size"),on("offset"),on("stride"),on("divisor"),Wt("}}"),Wt.exit("if(",Fn.isStream,"){",En,".destroyStream(",qn,");","}"),Fn})}),xn}function Mn(At,Gt,Jt,mn,xn){function An(Kn){var qn=Yt[Kn];qn&&(on[Kn]=qn)}var ln=function(Kn,qn){if(typeof(rr=Kn.static).frag=="string"&&typeof rr.vert=="string"){if(0<Object.keys(qn.dynamic).length)return null;var rr=qn.static,er=Object.keys(rr);if(0<er.length&&typeof rr[er[0]]=="number"){for(var tr=[],ur=0;ur<er.length;++ur)tr.push([0|rr[er[ur]],er[ur]]);return tr}}return null}(At,Gt),Yt=function(Kn,qn,rr){function er(br){if(br in tr){var Yn=tr[br];br=!0;var dr,Sr,Gr=0|Yn.x,ai=0|Yn.y;return"width"in Yn?dr=0|Yn.width:br=!1,"height"in Yn?Sr=0|Yn.height:br=!1,new q(!br&&qn&&qn.thisDep,!br&&qn&&qn.contextDep,!br&&qn&&qn.propDep,function(ci,Kr){var bi=ci.shared.context,qa=dr;"width"in Yn||(qa=Kr.def(bi,".","framebufferWidth","-",Gr));var ha=Sr;return"height"in Yn||(ha=Kr.def(bi,".","framebufferHeight","-",ai)),[Gr,ai,qa,ha]})}if(br in ur){var ni=ur[br];return br=J(ni,function(ci,Kr){var bi=ci.invoke(Kr,ni),qa=ci.shared.context,ha=Kr.def(bi,".x|0"),to=Kr.def(bi,".y|0");return[ha,to,Kr.def('"width" in ',bi,"?",bi,".width|0:","(",qa,".","framebufferWidth","-",ha,")"),bi=Kr.def('"height" in ',bi,"?",bi,".height|0:","(",qa,".","framebufferHeight","-",to,")")]}),qn&&(br.thisDep=br.thisDep||qn.thisDep,br.contextDep=br.contextDep||qn.contextDep,br.propDep=br.propDep||qn.propDep),br}return qn?new q(qn.thisDep,qn.contextDep,qn.propDep,function(ci,Kr){var bi=ci.shared.context;return[0,0,Kr.def(bi,".","framebufferWidth"),Kr.def(bi,".","framebufferHeight")]}):null}var tr=Kn.static,ur=Kn.dynamic;if(Kn=er("viewport")){var cr=Kn;Kn=new q(Kn.thisDep,Kn.contextDep,Kn.propDep,function(br,Yn){var dr=cr.append(br,Yn),Sr=br.shared.context;return Yn.set(Sr,".viewportWidth",dr[2]),Yn.set(Sr,".viewportHeight",dr[3]),dr})}return{viewport:Kn,scissor_box:er("scissor.box")}}(At,En=jt(At)),Wt=Xt(At),on=function(Kn,qn){var rr=Kn.static,er=Kn.dynamic,tr={};return Bn.forEach(function(ur){function cr(Yn,dr){if(ur in rr){var Sr=Yn(rr[ur]);tr[br]=K(function(){return Sr})}else if(ur in er){var Gr=er[ur];tr[br]=J(Gr,function(ai,ni){return dr(ai,ni,ai.invoke(ni,Gr))})}}var br=It(ur);switch(ur){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return cr(function(Yn){return Yn},function(Yn,dr,Sr){return Sr});case"depth.func":return cr(function(Yn){return Pt[Yn]},function(Yn,dr,Sr){return dr.def(Yn.constants.compareFuncs,"[",Sr,"]")});case"depth.range":return cr(function(Yn){return Yn},function(Yn,dr,Sr){return[dr.def("+",Sr,"[0]"),dr=dr.def("+",Sr,"[1]")]});case"blend.func":return cr(function(Yn){return[Mt["srcRGB"in Yn?Yn.srcRGB:Yn.src],Mt["dstRGB"in Yn?Yn.dstRGB:Yn.dst],Mt["srcAlpha"in Yn?Yn.srcAlpha:Yn.src],Mt["dstAlpha"in Yn?Yn.dstAlpha:Yn.dst]]},function(Yn,dr,Sr){function Gr(Kr,bi){return dr.def('"',Kr,bi,'" in ',Sr,"?",Sr,".",Kr,bi,":",Sr,".",Kr)}Yn=Yn.constants.blendFuncs;var ai=Gr("src","RGB"),ni=Gr("dst","RGB"),ci=(ai=dr.def(Yn,"[",ai,"]"),dr.def(Yn,"[",Gr("src","Alpha"),"]"));return[ai,ni=dr.def(Yn,"[",ni,"]"),ci,Yn=dr.def(Yn,"[",Gr("dst","Alpha"),"]")]});case"blend.equation":return cr(function(Yn){return typeof Yn=="string"?[lr[Yn],lr[Yn]]:typeof Yn=="object"?[lr[Yn.rgb],lr[Yn.alpha]]:void 0},function(Yn,dr,Sr){var Gr=Yn.constants.blendEquations,ai=dr.def(),ni=dr.def();return(Yn=Yn.cond("typeof ",Sr,'==="string"')).then(ai,"=",ni,"=",Gr,"[",Sr,"];"),Yn.else(ai,"=",Gr,"[",Sr,".rgb];",ni,"=",Gr,"[",Sr,".alpha];"),dr(Yn),[ai,ni]});case"blend.color":return cr(function(Yn){return b(4,function(dr){return+Yn[dr]})},function(Yn,dr,Sr){return b(4,function(Gr){return dr.def("+",Sr,"[",Gr,"]")})});case"stencil.mask":return cr(function(Yn){return 0|Yn},function(Yn,dr,Sr){return dr.def(Sr,"|0")});case"stencil.func":return cr(function(Yn){return[Pt[Yn.cmp||"keep"],Yn.ref||0,"mask"in Yn?Yn.mask:-1]},function(Yn,dr,Sr){return[Yn=dr.def('"cmp" in ',Sr,"?",Yn.constants.compareFuncs,"[",Sr,".cmp]",":",7680),dr.def(Sr,".ref|0"),dr=dr.def('"mask" in ',Sr,"?",Sr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return cr(function(Yn){return[ur==="stencil.opBack"?1029:1028,kt[Yn.fail||"keep"],kt[Yn.zfail||"keep"],kt[Yn.zpass||"keep"]]},function(Yn,dr,Sr){function Gr(ni){return dr.def('"',ni,'" in ',Sr,"?",ai,"[",Sr,".",ni,"]:",7680)}var ai=Yn.constants.stencilOps;return[ur==="stencil.opBack"?1029:1028,Gr("fail"),Gr("zfail"),Gr("zpass")]});case"polygonOffset.offset":return cr(function(Yn){return[0|Yn.factor,0|Yn.units]},function(Yn,dr,Sr){return[dr.def(Sr,".factor|0"),dr=dr.def(Sr,".units|0")]});case"cull.face":return cr(function(Yn){var dr=0;return Yn==="front"?dr=1028:Yn==="back"&&(dr=1029),dr},function(Yn,dr,Sr){return dr.def(Sr,'==="front"?',1028,":",1029)});case"frontFace":return cr(function(Yn){return Ze[Yn]},function(Yn,dr,Sr){return dr.def(Sr+'==="cw"?2304:2305')});case"colorMask":return cr(function(Yn){return Yn.map(function(dr){return!!dr})},function(Yn,dr,Sr){return b(4,function(Gr){return"!!"+Sr+"["+Gr+"]"})});case"sample.coverage":return cr(function(Yn){return["value"in Yn?Yn.value:1,!!Yn.invert]},function(Yn,dr,Sr){return[dr.def('"value" in ',Sr,"?+",Sr,".value:1"),dr=dr.def("!!",Sr,".invert")]})}}),tr}(At),un=Ut(At,0,ln);An("viewport"),An(It("scissor.box"));var En,Pn=0<Object.keys(on).length;if((En={framebuffer:En,draw:Wt,shader:un,state:on,dirty:Pn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Kn){var qn,rr=Kn.static;if(Kn=Kn.dynamic,"profile"in rr){var er=!!rr.profile;(qn=K(function(ur,cr){return er})).enable=er}else if("profile"in Kn){var tr=Kn.profile;qn=J(tr,function(ur,cr){return ur.invoke(cr,tr)})}return qn}(At),En.uniforms=function(Kn,qn){var rr=Kn.static,er=Kn.dynamic,tr={};return Object.keys(rr).forEach(function(ur){var cr,br=rr[ur];if(typeof br=="number"||typeof br=="boolean")cr=K(function(){return br});else if(typeof br=="function"){var Yn=br._reglType;Yn==="texture2d"||Yn==="textureCube"?cr=K(function(dr){return dr.link(br)}):Yn!=="framebuffer"&&Yn!=="framebufferCube"||(cr=K(function(dr){return dr.link(br.color[0])}))}else x(br)&&(cr=K(function(dr){return dr.global.def("[",b(br.length,function(Sr){return br[Sr]}),"]")}));cr.value=br,tr[ur]=cr}),Object.keys(er).forEach(function(ur){var cr=er[ur];tr[ur]=J(cr,function(br,Yn){return br.invoke(Yn,cr)})}),tr}(Jt),En.drawVAO=En.scopeVAO=Wt.vao,!En.drawVAO&&un.program&&!ln&&at.angle_instanced_arrays&&Wt.static.elements){var Un=!0;if(At=un.program.attributes.map(function(Kn){return Kn=Gt.static[Kn],Un=Un&&!!Kn,Kn}),Un&&0<At.length){var Fn=ht.getVAO(ht.createVAO({attributes:At,elements:Wt.static.elements}));En.drawVAO=new q(null,null,null,function(Kn,qn){return Kn.link(Fn)}),En.useVAO=!0}}return ln?En.useVAO=!0:En.attributes=gn(Gt),En.context=function(Kn){var qn=Kn.static,rr=Kn.dynamic,er={};return Object.keys(qn).forEach(function(tr){var ur=qn[tr];er[tr]=K(function(cr,br){return typeof ur=="number"||typeof ur=="boolean"?""+ur:cr.link(ur)})}),Object.keys(rr).forEach(function(tr){var ur=rr[tr];er[tr]=J(ur,function(cr,br){return cr.invoke(br,ur)})}),er}(mn),En}function cn(At,Gt,Jt){var mn=At.shared.context,xn=At.scope();Object.keys(Jt).forEach(function(An){Gt.save(mn,"."+An);var ln=Jt[An].append(At,Gt);Array.isArray(ln)?xn(mn,".",An,"=[",ln.join(),"];"):xn(mn,".",An,"=",ln,";")}),Gt(xn)}function qt(At,Gt,Jt,mn){var xn,An=(Yt=At.shared).gl,ln=Yt.framebuffer;$t&&(xn=Gt.def(Yt.extensions,".webgl_draw_buffers"));var Yt=(Wt=At.constants).drawBuffer,Wt=Wt.backBuffer;At=Jt?Jt.append(At,Gt):Gt.def(ln,".next"),mn||Gt("if(",At,"!==",ln,".cur){"),Gt("if(",At,"){",An,".bindFramebuffer(",36160,",",At,".framebuffer);"),$t&&Gt(xn,".drawBuffersWEBGL(",Yt,"[",At,".colorAttachments.length]);"),Gt("}else{",An,".bindFramebuffer(",36160,",null);"),$t&&Gt(xn,".drawBuffersWEBGL(",Wt,");"),Gt("}",ln,".cur=",At,";"),mn||Gt("}")}function nn(At,Gt,Jt){var mn=At.shared,xn=mn.gl,An=At.current,ln=At.next,Yt=mn.current,Wt=mn.next,on=At.cond(Yt,".dirty");Bn.forEach(function(un){var En,Pn;if(!((un=It(un))in Jt.state))if(un in ln){En=ln[un],Pn=An[un];var Un=b(fn[un].length,function(Fn){return on.def(En,"[",Fn,"]")});on(At.cond(Un.map(function(Fn,Kn){return Fn+"!=="+Pn+"["+Kn+"]"}).join("||")).then(xn,".",In[un],"(",Un,");",Un.map(function(Fn,Kn){return Pn+"["+Kn+"]="+Fn}).join(";"),";"))}else En=on.def(Wt,".",un),Un=At.cond(En,"!==",Yt,".",un),on(Un),un in Ln?Un(At.cond(En).then(xn,".enable(",Ln[un],");").else(xn,".disable(",Ln[un],");"),Yt,".",un,"=",En,";"):Un(xn,".",In[un],"(",En,");",Yt,".",un,"=",En,";")}),Object.keys(Jt.state).length===0&&on(Yt,".dirty=false;"),Gt(on)}function Kt(At,Gt,Jt,mn){var xn,An=At.shared,ln=At.current,Yt=An.current,Wt=An.gl;V(Object.keys(Jt)).forEach(function(on){var un=Jt[on];if(!mn||mn(un)){var En=un.append(At,Gt);if(Ln[on]){var Pn=Ln[on];te(un)?(xn=At.link(En,{stable:!0}),Gt(At.cond(xn).then(Wt,".enable(",Pn,");").else(Wt,".disable(",Pn,");")),Gt(Yt,".",on,"=",xn,";")):(Gt(At.cond(En).then(Wt,".enable(",Pn,");").else(Wt,".disable(",Pn,");")),Gt(Yt,".",on,"=",En,";"))}else if(x(En)){var Un=ln[on];Gt(Wt,".",In[on],"(",En,");",En.map(function(Fn,Kn){return Un+"["+Kn+"]="+Fn}).join(";"),";")}else te(un)?(xn=At.link(En,{stable:!0}),Gt(Wt,".",In[on],"(",xn,");",Yt,".",on,"=",xn,";")):Gt(Wt,".",In[on],"(",En,");",Yt,".",on,"=",En,";")}})}function sn(At,Gt){Rt&&(At.instancing=Gt.def(At.shared.extensions,".angle_instanced_arrays"))}function hn(At,Gt,Jt,mn,xn){function An(){return typeof performance>"u"?"Date.now()":"performance.now()"}function ln(Kn){Kn(on=Gt.def(),"=",An(),";"),typeof xn=="string"?Kn(Pn,".count+=",xn,";"):Kn(Pn,".count++;"),ct&&(mn?Kn(un=Gt.def(),"=",Fn,".getNumPendingQueries();"):Kn(Fn,".beginQuery(",Pn,");"))}function Yt(Kn){Kn(Pn,".cpuTime+=",An(),"-",on,";"),ct&&(mn?Kn(Fn,".pushScopeStats(",un,",",Fn,".getNumPendingQueries(),",Pn,");"):Kn(Fn,".endQuery();"))}function Wt(Kn){var qn=Gt.def(Un,".profile");Gt(Un,".profile=",Kn,";"),Gt.exit(Un,".profile=",qn,";")}var on,un,En=At.shared,Pn=At.stats,Un=En.current,Fn=En.timer;if(Jt=Jt.profile){if(te(Jt))return void(Jt.enable?(ln(Gt),Yt(Gt.exit),Wt("true")):Wt("false"));Wt(Jt=Jt.append(At,Gt))}else Jt=Gt.def(Un,".profile");ln(En=At.block()),Gt("if(",Jt,"){",En,"}"),Yt(At=At.block()),Gt.exit("if(",Jt,"){",At,"}")}function bn(At,Gt,Jt,mn,xn){function An(Yt,Wt,on){function un(){Gt("if(!",Fn,".buffer){",Pn,".enableVertexAttribArray(",Un,");}");var er,tr=on.type;er=on.size?Gt.def(on.size,"||",Wt):Wt,Gt("if(",Fn,".type!==",tr,"||",Fn,".size!==",er,"||",rr.map(function(ur){return Fn+"."+ur+"!=="+on[ur]}).join("||"),"){",Pn,".bindBuffer(",34962,",",Kn,".buffer);",Pn,".vertexAttribPointer(",[Un,er,tr,on.normalized,on.stride,on.offset],");",Fn,".type=",tr,";",Fn,".size=",er,";",rr.map(function(ur){return Fn+"."+ur+"="+on[ur]+";"}).join(""),"}"),Rt&&(tr=on.divisor,Gt("if(",Fn,".divisor!==",tr,"){",At.instancing,".vertexAttribDivisorANGLE(",[Un,tr],");",Fn,".divisor=",tr,";}"))}function En(){Gt("if(",Fn,".buffer){",Pn,".disableVertexAttribArray(",Un,");",Fn,".buffer=null;","}if(",it.map(function(er,tr){return Fn+"."+er+"!=="+qn[tr]}).join("||"),"){",Pn,".vertexAttrib4f(",Un,",",qn,");",it.map(function(er,tr){return Fn+"."+er+"="+qn[tr]+";"}).join(""),"}")}var Pn=ln.gl,Un=Gt.def(Yt,".location"),Fn=Gt.def(ln.attributes,"[",Un,"]");Yt=on.state;var Kn=on.buffer,qn=[on.x,on.y,on.z,on.w],rr=["buffer","normalized","offset","stride"];Yt===1?un():Yt===2?En():(Gt("if(",Yt,"===",1,"){"),un(),Gt("}else{"),En(),Gt("}"))}var ln=At.shared;mn.forEach(function(Yt){var Wt,on=Yt.name,un=Jt.attributes[on];if(un){if(!xn(un))return;Wt=un.append(At,Gt)}else{if(!xn(Xe))return;var En=At.scopeAttrib(on);Wt={},Object.keys(new Gn).forEach(function(Pn){Wt[Pn]=Gt.def(En,".",Pn)})}An(At.link(Yt),function(Pn){switch(Pn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Yt.info.type),Wt)})}function yn(At,Gt,Jt,mn,xn,An){for(var ln,Yt=At.shared,Wt=Yt.gl,on=0;on<mn.length;++on){var un,En=(Fn=mn[on]).name,Pn=Fn.info.type,Un=Jt.uniforms[En],Fn=At.link(Fn)+".location";if(Un){if(!xn(Un))continue;if(te(Un)){if(En=Un.value,Pn===35678||Pn===35680)Gt(Wt,".uniform1i(",Fn,",",(Pn=At.link(En._texture||En.color[0]._texture))+".bind());"),Gt.exit(Pn,".unbind();");else if(Pn===35674||Pn===35675||Pn===35676)Un=2,Pn===35675?Un=3:Pn===35676&&(Un=4),Gt(Wt,".uniformMatrix",Un,"fv(",Fn,",false,",En=At.global.def("new Float32Array(["+Array.prototype.slice.call(En)+"])"),");");else{switch(Pn){case 5126:ln="1f";break;case 35664:ln="2f";break;case 35665:ln="3f";break;case 35666:ln="4f";break;case 35670:case 5124:ln="1i";break;case 35671:case 35667:ln="2i";break;case 35672:case 35668:ln="3i";break;case 35673:case 35669:ln="4i"}Gt(Wt,".uniform",ln,"(",Fn,",",x(En)?Array.prototype.slice.call(En):En,");")}continue}un=Un.append(At,Gt)}else{if(!xn(Xe))continue;un=Gt.def(Yt.uniforms,"[",We.id(En),"]")}switch(Pn===35678?Gt("if(",un,"&&",un,'._reglType==="framebuffer"){',un,"=",un,".color[0];","}"):Pn===35680&&Gt("if(",un,"&&",un,'._reglType==="framebufferCube"){',un,"=",un,".color[0];","}"),En=1,Pn){case 35678:case 35680:Pn=Gt.def(un,"._texture"),Gt(Wt,".uniform1i(",Fn,",",Pn,".bind());"),Gt.exit(Pn,".unbind();");continue;case 5124:case 35670:ln="1i";break;case 35667:case 35671:ln="2i",En=2;break;case 35668:case 35672:ln="3i",En=3;break;case 35669:case 35673:ln="4i",En=4;break;case 5126:ln="1f";break;case 35664:ln="2f",En=2;break;case 35665:ln="3f",En=3;break;case 35666:ln="4f",En=4;break;case 35674:ln="Matrix2fv";break;case 35675:ln="Matrix3fv";break;case 35676:ln="Matrix4fv"}if(ln.charAt(0)==="M"){Gt(Wt,".uniform",ln,"(",Fn,","),Fn=Math.pow(Pn-35674+2,2);var Kn=At.global.def("new Float32Array(",Fn,")");Array.isArray(un)?Gt("false,(",b(Fn,function(rr){return Kn+"["+rr+"]="+un[rr]}),",",Kn,")"):Gt("false,(Array.isArray(",un,")||",un," instanceof Float32Array)?",un,":(",b(Fn,function(rr){return Kn+"["+rr+"]="+un+"["+rr+"]"}),",",Kn,")"),Gt(");")}else{if(1<En){Pn=[];var qn=[];for(Un=0;Un<En;++Un)Array.isArray(un)?qn.push(un[Un]):qn.push(Gt.def(un+"["+Un+"]")),An&&Pn.push(Gt.def());An&&Gt("if(!",At.batchId,"||",Pn.map(function(rr,er){return rr+"!=="+qn[er]}).join("||"),"){",Pn.map(function(rr,er){return rr+"="+qn[er]+";"}).join("")),Gt(Wt,".uniform",ln,"(",Fn,",",qn.join(","),");")}else An&&(Pn=Gt.def(),Gt("if(!",At.batchId,"||",Pn,"!==",un,"){",Pn,"=",un,";")),Gt(Wt,".uniform",ln,"(",Fn,",",un,");");An&&Gt("}")}}}function Sn(At,Gt,Jt,mn){function xn(tr){var ur=Pn[tr];return ur?ur.contextDep&&mn.contextDynamic||ur.propDep?ur.append(At,Jt):ur.append(At,Gt):Gt.def(En,".",tr)}function An(){function tr(){Jt(Wt,".drawElementsInstancedANGLE(",[Fn,qn,rr,Kn+"<<(("+rr+"-5121)>>1)",Yt],");")}function ur(){Jt(Wt,".drawArraysInstancedANGLE(",[Fn,Kn,qn,Yt],");")}Un&&Un!=="null"?er?tr():(Jt("if(",Un,"){"),tr(),Jt("}else{"),ur(),Jt("}")):ur()}function ln(){function tr(){Jt(un+".drawElements("+[Fn,qn,rr,Kn+"<<(("+rr+"-5121)>>1)"]+");")}function ur(){Jt(un+".drawArrays("+[Fn,Kn,qn]+");")}Un&&Un!=="null"?er?tr():(Jt("if(",Un,"){"),tr(),Jt("}else{"),ur(),Jt("}")):ur()}var Yt,Wt,on=At.shared,un=on.gl,En=on.draw,Pn=mn.draw,Un=function(){var tr=Pn.elements,ur=Gt;return tr?((tr.contextDep&&mn.contextDynamic||tr.propDep)&&(ur=Jt),tr=tr.append(At,ur),Pn.elementsActive&&ur("if("+tr+")"+un+".bindBuffer(34963,"+tr+".buffer.buffer);")):(tr=ur.def(),ur(tr,"=",En,".","elements",";","if(",tr,"){",un,".bindBuffer(",34963,",",tr,".buffer.buffer);}","else if(",on.vao,".currentVAO){",tr,"=",At.shared.elements+".getElements("+on.vao,".currentVAO.elements);",an?"":"if("+tr+")"+un+".bindBuffer(34963,"+tr+".buffer.buffer);","}")),tr}(),Fn=xn("primitive"),Kn=xn("offset"),qn=function(){var tr=Pn.count,ur=Gt;return tr?((tr.contextDep&&mn.contextDynamic||tr.propDep)&&(ur=Jt),tr=tr.append(At,ur)):tr=ur.def(En,".","count"),tr}();if(typeof qn=="number"){if(qn===0)return}else Jt("if(",qn,"){"),Jt.exit("}");Rt&&(Yt=xn("instances"),Wt=At.instancing);var rr=Un+".type",er=Pn.elements&&te(Pn.elements)&&!Pn.vaoActive;Rt&&(typeof Yt!="number"||0<=Yt)?typeof Yt=="string"?(Jt("if(",Yt,">0){"),An(),Jt("}else if(",Yt,"<0){"),ln(),Jt("}")):An():ln()}function pn(At,Gt,Jt,mn,xn){return xn=(Gt=Qt()).proc("body",xn),Rt&&(Gt.instancing=xn.def(Gt.shared.extensions,".angle_instanced_arrays")),At(Gt,xn,Jt,mn),Gt.compile().body}function Cn(At,Gt,Jt,mn){sn(At,Gt),Jt.useVAO?Jt.drawVAO?Gt(At.shared.vao,".setVAO(",Jt.drawVAO.append(At,Gt),");"):Gt(At.shared.vao,".setVAO(",At.shared.vao,".targetVAO);"):(Gt(At.shared.vao,".setVAO(null);"),bn(At,Gt,Jt,mn.attributes,function(){return!0})),yn(At,Gt,Jt,mn.uniforms,function(){return!0},!1),Sn(At,Gt,Gt,Jt)}function Hn(At,Gt,Jt,mn){function xn(){return!0}At.batchId="a1",sn(At,Gt),bn(At,Gt,Jt,mn.attributes,xn),yn(At,Gt,Jt,mn.uniforms,xn,!1),Sn(At,Gt,Gt,Jt)}function Qn(At,Gt,Jt,mn){function xn(En){return En.contextDep&&ln||En.propDep}function An(En){return!xn(En)}sn(At,Gt);var ln=Jt.contextDep,Yt=Gt.def(),Wt=Gt.def();At.shared.props=Wt,At.batchId=Yt;var on=At.scope(),un=At.scope();Gt(on.entry,"for(",Yt,"=0;",Yt,"<","a1",";++",Yt,"){",Wt,"=","a0","[",Yt,"];",un,"}",on.exit),Jt.needsContext&&cn(At,un,Jt.context),Jt.needsFramebuffer&&qt(At,un,Jt.framebuffer),Kt(At,un,Jt.state,xn),Jt.profile&&xn(Jt.profile)&&hn(At,un,Jt,!1,!0),mn?(Jt.useVAO?Jt.drawVAO?xn(Jt.drawVAO)?un(At.shared.vao,".setVAO(",Jt.drawVAO.append(At,un),");"):on(At.shared.vao,".setVAO(",Jt.drawVAO.append(At,on),");"):on(At.shared.vao,".setVAO(",At.shared.vao,".targetVAO);"):(on(At.shared.vao,".setVAO(null);"),bn(At,on,Jt,mn.attributes,An),bn(At,un,Jt,mn.attributes,xn)),yn(At,on,Jt,mn.uniforms,An,!1),yn(At,un,Jt,mn.uniforms,xn,!0),Sn(At,on,un,Jt)):(Gt=At.global.def("{}"),mn=Jt.shader.progVar.append(At,un),Wt=un.def(mn,".id"),on=un.def(Gt,"[",Wt,"]"),un(At.shared.gl,".useProgram(",mn,".program);","if(!",on,"){",on,"=",Gt,"[",Wt,"]=",At.link(function(En){return pn(Hn,At,Jt,En,2)}),"(",mn,");}",on,".call(this,a0[",Yt,"],",Yt,");"))}function nr(At,Gt){function Jt(Yt){var Wt=Gt.shader[Yt];Wt&&(Wt=Wt.append(At,mn),isNaN(Wt)?mn.set(xn.shader,"."+Yt,Wt):mn.set(xn.shader,"."+Yt,At.link(Wt,{stable:!0})))}var mn=At.proc("scope",3);At.batchId="a2";var xn=At.shared,An=xn.current;if(cn(At,mn,Gt.context),Gt.framebuffer&&Gt.framebuffer.append(At,mn),V(Object.keys(Gt.state)).forEach(function(Yt){var Wt=Gt.state[Yt],on=Wt.append(At,mn);x(on)?on.forEach(function(un,En){isNaN(un)?mn.set(At.next[Yt],"["+En+"]",un):mn.set(At.next[Yt],"["+En+"]",At.link(un,{stable:!0}))}):te(Wt)?mn.set(xn.next,"."+Yt,At.link(on,{stable:!0})):mn.set(xn.next,"."+Yt,on)}),hn(At,mn,Gt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Yt){var Wt=Gt.draw[Yt];Wt&&(Wt=Wt.append(At,mn),isNaN(Wt)?mn.set(xn.draw,"."+Yt,Wt):mn.set(xn.draw,"."+Yt,At.link(Wt),{stable:!0}))}),Object.keys(Gt.uniforms).forEach(function(Yt){var Wt=Gt.uniforms[Yt].append(At,mn);Array.isArray(Wt)&&(Wt="["+Wt.map(function(on){return isNaN(on)?on:At.link(on,{stable:!0})})+"]"),mn.set(xn.uniforms,"["+At.link(We.id(Yt),{stable:!0})+"]",Wt)}),Object.keys(Gt.attributes).forEach(function(Yt){var Wt=Gt.attributes[Yt].append(At,mn),on=At.scopeAttrib(Yt);Object.keys(new Gn).forEach(function(un){mn.set(on,"."+un,Wt[un])})}),Gt.scopeVAO){var ln=Gt.scopeVAO.append(At,mn);isNaN(ln)?mn.set(xn.vao,".targetVAO",ln):mn.set(xn.vao,".targetVAO",At.link(ln,{stable:!0}))}Jt("vert"),Jt("frag"),0<Object.keys(Gt.state).length&&(mn(An,".dirty=true;"),mn.exit(An,".dirty=true;")),mn("a1(",At.shared.context,",a0,",At.batchId,");")}function Jn(At,Gt,Jt){var mn=Gt.static[Jt];if(mn&&function(un){if(typeof un=="object"&&!x(un)){for(var En=Object.keys(un),Pn=0;Pn<En.length;++Pn)if(re.isDynamic(un[En[Pn]]))return!0;return!1}}(mn)){var xn=At.global,An=Object.keys(mn),ln=!1,Yt=!1,Wt=!1,on=At.global.def("{}");An.forEach(function(un){var En=mn[un];if(re.isDynamic(En))typeof En=="function"&&(En=mn[un]=re.unbox(En)),un=J(En,null),ln=ln||un.thisDep,Wt=Wt||un.propDep,Yt=Yt||un.contextDep;else{switch(xn(on,".",un,"="),typeof En){case"number":xn(En);break;case"string":xn('"',En,'"');break;case"object":Array.isArray(En)&&xn("[",En.join(),"]");break;default:xn(At.link(En))}xn(";")}}),Gt.dynamic[Jt]=new re.DynamicVariable(4,{thisDep:ln,contextDep:Yt,propDep:Wt,ref:on,append:function(un,En){An.forEach(function(Pn){var Un=mn[Pn];re.isDynamic(Un)&&(Un=un.invoke(En,Un),En(on,".",Pn,"=",Un,";"))})}}),delete Gt.static[Jt]}}var Gn=ht.Record,lr={add:32774,subtract:32778,"reverse subtract":32779};at.ext_blend_minmax&&(lr.min=32775,lr.max=32776);var Rt=at.angle_instanced_arrays,$t=at.webgl_draw_buffers,an=at.oes_vertex_array_object,fn={dirty:!0,profile:bt.profile},wn={},Bn=[],Ln={},In={};Dt("dither",3024),Dt("blend.enable",3042),Nt("blend.color","blendColor",[0,0,0,0]),Nt("blend.equation","blendEquationSeparate",[32774,32774]),Nt("blend.func","blendFuncSeparate",[1,0,1,0]),Dt("depth.enable",2929,!0),Nt("depth.func","depthFunc",513),Nt("depth.range","depthRange",[0,1]),Nt("depth.mask","depthMask",!0),Nt("colorMask","colorMask",[!0,!0,!0,!0]),Dt("cull.enable",2884),Nt("cull.face","cullFace",1029),Nt("frontFace","frontFace",2305),Nt("lineWidth","lineWidth",1),Dt("polygonOffset.enable",32823),Nt("polygonOffset.offset","polygonOffset",[0,0]),Dt("sample.alpha",32926),Dt("sample.enable",32928),Nt("sample.coverage","sampleCoverage",[1,!1]),Dt("stencil.enable",2960),Nt("stencil.mask","stencilMask",-1),Nt("stencil.func","stencilFunc",[519,0,-1]),Nt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Nt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Dt("scissor.enable",3089),Nt("scissor.box","scissor",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]),Nt("viewport","viewport",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]);var Wn={gl:Ve,context:wt,strings:We,next:wn,current:fn,draw:ut,elements:Be,buffer:De,shader:gt,attributes:ht.state,vao:ht,uniforms:dt,framebuffer:tt,extensions:at,timer:ct,isBufferArgs:B},Vt={primTypes:Ee,compareFuncs:Pt,blendFuncs:Mt,blendEquations:lr,stencilOps:kt,glTypes:Me,orientationType:Ze};$t&&(Vt.backBuffer=[1029],Vt.drawBuffer=b(et.maxDrawbuffers,function(At){return At===0?[0]:b(At,function(Gt){return 36064+Gt})}));var _n=0;return{next:wn,current:fn,procs:function(){var At=Qt(),Gt=At.proc("poll"),Jt=At.proc("refresh"),mn=At.block();Gt(mn),Jt(mn);var xn,An=(Wt=At.shared).gl,ln=Wt.next,Yt=Wt.current;mn(Yt,".dirty=false;"),qt(At,Gt),qt(At,Jt,null,!0),Rt&&(xn=At.link(Rt)),at.oes_vertex_array_object&&Jt(At.link(at.oes_vertex_array_object),".bindVertexArrayOES(null);");var Wt=Jt.def(Wt.attributes),on=Jt.def(0),un=At.cond(on,".buffer");un.then(An,".enableVertexAttribArray(i);",An,".bindBuffer(",34962,",",on,".buffer.buffer);",An,".vertexAttribPointer(i,",on,".size,",on,".type,",on,".normalized,",on,".stride,",on,".offset);").else(An,".disableVertexAttribArray(i);",An,".vertexAttrib4f(i,",on,".x,",on,".y,",on,".z,",on,".w);",on,".buffer=null;");var En=At.link(et.maxAttributes,{stable:!0});return Jt("for(var i=0;i<",En,";++i){",on,"=",Wt,"[i];",un,"}"),Rt&&Jt("for(var i=0;i<",En,";++i){",xn,".vertexAttribDivisorANGLE(i,",Wt,"[i].divisor);","}"),Jt(At.shared.vao,".currentVAO=null;",At.shared.vao,".setVAO(",At.shared.vao,".targetVAO);"),Object.keys(Ln).forEach(function(Pn){var Un=Ln[Pn],Fn=mn.def(ln,".",Pn),Kn=At.block();Kn("if(",Fn,"){",An,".enable(",Un,")}else{",An,".disable(",Un,")}",Yt,".",Pn,"=",Fn,";"),Jt(Kn),Gt("if(",Fn,"!==",Yt,".",Pn,"){",Kn,"}")}),Object.keys(In).forEach(function(Pn){var Un,Fn,Kn=In[Pn],qn=fn[Pn],rr=At.block();rr(An,".",Kn,"("),x(qn)?(Kn=qn.length,Un=At.global.def(ln,".",Pn),Fn=At.global.def(Yt,".",Pn),rr(b(Kn,function(er){return Un+"["+er+"]"}),");",b(Kn,function(er){return Fn+"["+er+"]="+Un+"["+er+"];"}).join("")),Gt("if(",b(Kn,function(er){return Un+"["+er+"]!=="+Fn+"["+er+"]"}).join("||"),"){",rr,"}")):(Un=mn.def(ln,".",Pn),Fn=mn.def(Yt,".",Pn),rr(Un,");",Yt,".",Pn,"=",Un,";"),Gt("if(",Un,"!==",Fn,"){",rr,"}")),Jt(rr)}),At.compile()}(),compile:function(At,Gt,Jt,mn,xn){var An=Qt();An.stats=An.link(xn),Object.keys(Gt.static).forEach(function(Yt){Jn(An,Gt,Yt)}),Tt.forEach(function(Yt){Jn(An,At,Yt)});var ln=Mn(At,Gt,Jt,mn);return ln.shader.program&&(ln.shader.program.attributes.sort(function(Yt,Wt){return Yt.name<Wt.name?-1:1}),ln.shader.program.uniforms.sort(function(Yt,Wt){return Yt.name<Wt.name?-1:1})),function(Yt,Wt){var on=Yt.proc("draw",1);sn(Yt,on),cn(Yt,on,Wt.context),qt(Yt,on,Wt.framebuffer),nn(Yt,on,Wt),Kt(Yt,on,Wt.state),hn(Yt,on,Wt,!1,!0);var un=Wt.shader.progVar.append(Yt,on);if(on(Yt.shared.gl,".useProgram(",un,".program);"),Wt.shader.program)Cn(Yt,on,Wt,Wt.shader.program);else{on(Yt.shared.vao,".setVAO(null);");var En=Yt.global.def("{}"),Pn=on.def(un,".id"),Un=on.def(En,"[",Pn,"]");on(Yt.cond(Un).then(Un,".call(this,a0);").else(Un,"=",En,"[",Pn,"]=",Yt.link(function(Fn){return pn(Cn,Yt,Wt,Fn,1)}),"(",un,");",Un,".call(this,a0);"))}0<Object.keys(Wt.state).length&&on(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&on(Yt.shared.vao,".setVAO(null);")}(An,ln),nr(An,ln),function(Yt,Wt){function on(qn){return qn.contextDep&&En||qn.propDep}var un=Yt.proc("batch",2);Yt.batchId="0",sn(Yt,un);var En=!1,Pn=!0;Object.keys(Wt.context).forEach(function(qn){En=En||Wt.context[qn].propDep}),En||(cn(Yt,un,Wt.context),Pn=!1);var Un=!1;if((Fn=Wt.framebuffer)?(Fn.propDep?En=Un=!0:Fn.contextDep&&En&&(Un=!0),Un||qt(Yt,un,Fn)):qt(Yt,un,null),Wt.state.viewport&&Wt.state.viewport.propDep&&(En=!0),nn(Yt,un,Wt),Kt(Yt,un,Wt.state,function(qn){return!on(qn)}),Wt.profile&&on(Wt.profile)||hn(Yt,un,Wt,!1,"a1"),Wt.contextDep=En,Wt.needsContext=Pn,Wt.needsFramebuffer=Un,(Pn=Wt.shader.progVar).contextDep&&En||Pn.propDep)Qn(Yt,un,Wt,null);else if(Pn=Pn.append(Yt,un),un(Yt.shared.gl,".useProgram(",Pn,".program);"),Wt.shader.program)Qn(Yt,un,Wt,Wt.shader.program);else{un(Yt.shared.vao,".setVAO(null);");var Fn=Yt.global.def("{}"),Kn=(Un=un.def(Pn,".id"),un.def(Fn,"[",Un,"]"));un(Yt.cond(Kn).then(Kn,".call(this,a0,a1);").else(Kn,"=",Fn,"[",Un,"]=",Yt.link(function(qn){return pn(Qn,Yt,Wt,qn,2)}),"(",Pn,");",Kn,".call(this,a0,a1);"))}0<Object.keys(Wt.state).length&&un(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&un(Yt.shared.vao,".setVAO(null);")}(An,ln),Q(An.compile(),{destroy:function(){ln.shader.program.destroy()}})}}}function W(Ve,We){for(var at=0;at<Ve.length;++at)if(Ve[at]===We)return at;return-1}var Q=function(Ve,We){for(var at=Object.keys(We),et=0;et<at.length;++et)Ve[at[et]]=We[at[et]];return Ve},ne=0,re={DynamicVariable:D,define:function(Ve,We){return new D(Ve,M(We+""))},isDynamic:function(Ve){return typeof Ve=="function"&&!Ve._reglType||Ve instanceof D},unbox:function Ve(We,at){return typeof We=="function"?new D(0,We):typeof We=="number"||typeof We=="boolean"?new D(5,We):Array.isArray(We)?new D(6,We.map(function(et,De){return Ve(et)})):We instanceof D?We:void 0},accessor:M},ae={next:typeof requestAnimationFrame=="function"?function(Ve){return requestAnimationFrame(Ve)}:function(Ve){return setTimeout(Ve,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ve){return cancelAnimationFrame(Ve)}:clearTimeout},ue=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},pe=s();pe.zero=s();var ge=function(Ve,We){var at=1;We.ext_texture_filter_anisotropic&&(at=Ve.getParameter(34047));var et=1,De=1;We.webgl_draw_buffers&&(et=Ve.getParameter(34852),De=Ve.getParameter(36063));var Be=!!We.oes_texture_float;if(Be){Be=Ve.createTexture(),Ve.bindTexture(3553,Be),Ve.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var nt=Ve.createFramebuffer();if(Ve.bindFramebuffer(36160,nt),Ve.framebufferTexture2D(36160,36064,3553,Be,0),Ve.bindTexture(3553,null),Ve.checkFramebufferStatus(36160)!==36053)Be=!1;else{Ve.viewport(0,0,1,1),Ve.clearColor(1,0,0,1),Ve.clear(16384);var tt=pe.allocType(5126,4);Ve.readPixels(0,0,1,1,6408,5126,tt),Ve.getError()?Be=!1:(Ve.deleteFramebuffer(nt),Ve.deleteTexture(Be),Be=tt[0]===1),pe.freeType(tt)}}return tt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(tt=Ve.createTexture(),nt=pe.allocType(5121,36),Ve.activeTexture(33984),Ve.bindTexture(34067,tt),Ve.texImage2D(34069,0,6408,3,3,0,6408,5121,nt),pe.freeType(nt),Ve.bindTexture(34067,null),Ve.deleteTexture(tt),tt=!Ve.getError()),{colorBits:[Ve.getParameter(3410),Ve.getParameter(3411),Ve.getParameter(3412),Ve.getParameter(3413)],depthBits:Ve.getParameter(3414),stencilBits:Ve.getParameter(3415),subpixelBits:Ve.getParameter(3408),extensions:Object.keys(We).filter(function(dt){return!!We[dt]}),maxAnisotropic:at,maxDrawbuffers:et,maxColorAttachments:De,pointSizeDims:Ve.getParameter(33901),lineWidthDims:Ve.getParameter(33902),maxViewportDims:Ve.getParameter(3386),maxCombinedTextureUnits:Ve.getParameter(35661),maxCubeMapSize:Ve.getParameter(34076),maxRenderbufferSize:Ve.getParameter(34024),maxTextureUnits:Ve.getParameter(34930),maxTextureSize:Ve.getParameter(3379),maxAttributes:Ve.getParameter(34921),maxVertexUniforms:Ve.getParameter(36347),maxVertexTextureUnits:Ve.getParameter(35660),maxVaryingVectors:Ve.getParameter(36348),maxFragmentUniforms:Ve.getParameter(36349),glsl:Ve.getParameter(35724),renderer:Ve.getParameter(7937),vendor:Ve.getParameter(7936),version:Ve.getParameter(7938),readFloat:Be,npotTextureCube:tt}},_e=function(Ve){return Ve instanceof Uint8Array||Ve instanceof Uint16Array||Ve instanceof Uint32Array||Ve instanceof Int8Array||Ve instanceof Int16Array||Ve instanceof Int32Array||Ve instanceof Float32Array||Ve instanceof Float64Array||Ve instanceof Uint8ClampedArray},me=function(Ve){return Object.keys(Ve).map(function(We){return Ve[We]})},ve={shape:function(Ve){for(var We=[];Ve.length;Ve=Ve[0])We.push(Ve.length);return We},flatten:function(Ve,We,at,et){var De=1;if(We.length)for(var Be=0;Be<We.length;++Be)De*=We[Be];else De=0;switch(at=et||pe.allocType(at,De),We.length){case 0:break;case 1:for(et=We[0],We=0;We<et;++We)at[We]=Ve[We];break;case 2:for(et=We[0],We=We[1],Be=De=0;Be<et;++Be)for(var nt=Ve[Be],tt=0;tt<We;++tt)at[De++]=nt[tt];break;case 3:i(Ve,We[0],We[1],We[2],at,0);break;default:r(Ve,We,0,at,0)}return at}},Oe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Me={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Te={dynamic:35048,stream:35040,static:35044},se=ve.flatten,oe=ve.shape,he=[];he[5120]=1,he[5122]=2,he[5124]=4,he[5121]=1,he[5123]=2,he[5125]=4,he[5126]=4;var Ee={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ke=new Float32Array(1),be=new Uint32Array(ke.buffer),Ie=[9984,9986,9985,9987],Fe=[0,6409,6410,6407,6408],ce={};ce[6409]=ce[6406]=ce[6402]=1,ce[34041]=ce[6410]=2,ce[6407]=ce[35904]=3,ce[6408]=ce[35906]=4;var we=g("HTMLCanvasElement"),ye=g("OffscreenCanvas"),Ce=g("CanvasRenderingContext2D"),Re=g("ImageBitmap"),ze=g("HTMLImageElement"),He=g("HTMLVideoElement"),Ge=Object.keys(Oe).concat([we,ye,Ce,Re,ze,He]),Je=[];Je[5121]=1,Je[5126]=4,Je[36193]=2,Je[5123]=2,Je[5125]=4;var ot=[];ot[32854]=2,ot[32855]=2,ot[36194]=2,ot[34041]=4,ot[33776]=.5,ot[33777]=.5,ot[33778]=1,ot[33779]=1,ot[35986]=.5,ot[35987]=1,ot[34798]=1,ot[35840]=.5,ot[35841]=.25,ot[35842]=.5,ot[35843]=.25,ot[36196]=.5;var Qe=[];Qe[32854]=2,Qe[32855]=2,Qe[36194]=2,Qe[33189]=2,Qe[36168]=1,Qe[34041]=4,Qe[35907]=4,Qe[34836]=16,Qe[34842]=8,Qe[34843]=6;var vt=function(Ve,We,at,et,De){function Be(ut){this.id=ht++,this.refCount=1,this.renderbuffer=ut,this.format=32854,this.height=this.width=0,De.profile&&(this.stats={size:0})}function nt(ut){var wt=ut.renderbuffer;Ve.bindRenderbuffer(36161,null),Ve.deleteRenderbuffer(wt),ut.renderbuffer=null,ut.refCount=0,delete gt[ut.id],et.renderbufferCount--}var tt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};We.ext_srgb&&(tt.srgba=35907),We.ext_color_buffer_half_float&&(tt.rgba16f=34842,tt.rgb16f=34843),We.webgl_color_buffer_float&&(tt.rgba32f=34836);var dt=[];Object.keys(tt).forEach(function(ut){dt[tt[ut]]=ut});var ht=0,gt={};return Be.prototype.decRef=function(){0>=--this.refCount&&nt(this)},De.profile&&(et.getTotalRenderbufferSize=function(){var ut=0;return Object.keys(gt).forEach(function(wt){ut+=gt[wt].stats.size}),ut}),{create:function(ut,wt){function ct(bt,It){var Dt=0,Nt=0,Qt=32854;if(typeof bt=="object"&&bt?("shape"in bt?(Dt=0|(Nt=bt.shape)[0],Nt=0|Nt[1]):("radius"in bt&&(Dt=Nt=0|bt.radius),"width"in bt&&(Dt=0|bt.width),"height"in bt&&(Nt=0|bt.height)),"format"in bt&&(Qt=tt[bt.format])):typeof bt=="number"?(Dt=0|bt,Nt=typeof It=="number"?0|It:Dt):bt||(Dt=Nt=1),Dt!==ft.width||Nt!==ft.height||Qt!==ft.format)return ct.width=ft.width=Dt,ct.height=ft.height=Nt,ft.format=Qt,Ve.bindRenderbuffer(36161,ft.renderbuffer),Ve.renderbufferStorage(36161,Qt,Dt,Nt),De.profile&&(ft.stats.size=Qe[ft.format]*ft.width*ft.height),ct.format=dt[ft.format],ct}var ft=new Be(Ve.createRenderbuffer());return gt[ft.id]=ft,et.renderbufferCount++,ct(ut,wt),ct.resize=function(bt,It){var Dt=0|bt,Nt=0|It||Dt;return Dt===ft.width&&Nt===ft.height||(ct.width=ft.width=Dt,ct.height=ft.height=Nt,Ve.bindRenderbuffer(36161,ft.renderbuffer),Ve.renderbufferStorage(36161,ft.format,Dt,Nt),De.profile&&(ft.stats.size=Qe[ft.format]*ft.width*ft.height)),ct},ct._reglType="renderbuffer",ct._renderbuffer=ft,De.profile&&(ct.stats=ft.stats),ct.destroy=function(){ft.decRef()},ct},clear:function(){me(gt).forEach(nt)},restore:function(){me(gt).forEach(function(ut){ut.renderbuffer=Ve.createRenderbuffer(),Ve.bindRenderbuffer(36161,ut.renderbuffer),Ve.renderbufferStorage(36161,ut.format,ut.width,ut.height)}),Ve.bindRenderbuffer(36161,null)}}},xt=[];xt[6408]=4,xt[6407]=3;var mt=[];mt[5121]=1,mt[5126]=4,mt[36193]=2;var rt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],it=["x","y","z","w"],Tt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Mt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Pt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},kt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ze={cw:2304,ccw:2305},Xe=new q(!1,!1,!1,function(){});return function(Ve){function We(){if(Hn.length===0)jt&&jt.update(),Gn=null;else{Gn=ae.next(We),gt();for(var Rt=Hn.length-1;0<=Rt;--Rt){var $t=Hn[Rt];$t&&$t(Mn,null,0)}ct.flush(),jt&&jt.update()}}function at(){!Gn&&0<Hn.length&&(Gn=ae.next(We))}function et(){Gn&&(ae.cancel(We),Gn=null)}function De(Rt){Rt.preventDefault(),et(),Qn.forEach(function($t){$t()})}function Be(Rt){ct.getError(),bt.restore(),sn.restore(),qt.restore(),hn.restore(),bn.restore(),yn.restore(),Kt.restore(),jt&&jt.restore(),Sn.procs.refresh(),at(),nr.forEach(function($t){$t()})}function nt(Rt){function $t(At,Gt){var Jt={},mn={};return Object.keys(At).forEach(function(xn){var An=At[xn];if(re.isDynamic(An))mn[xn]=re.unbox(An,xn);else{if(Gt&&Array.isArray(An)){for(var ln=0;ln<An.length;++ln)if(re.isDynamic(An[ln]))return void(mn[xn]=re.unbox(An,xn))}Jt[xn]=An}}),{dynamic:mn,static:Jt}}var an=$t(Rt.context||{},!0),fn=$t(Rt.uniforms||{},!0),wn=$t(Rt.attributes||{},!1);Rt=$t(function(At){function Gt(mn){if(mn in Jt){var xn=Jt[mn];delete Jt[mn],Object.keys(xn).forEach(function(An){Jt[mn+"."+An]=xn[An]})}}var Jt=Q({},At);return delete Jt.uniforms,delete Jt.attributes,delete Jt.context,delete Jt.vao,"stencil"in Jt&&Jt.stencil.op&&(Jt.stencil.opBack=Jt.stencil.opFront=Jt.stencil.op,delete Jt.stencil.op),Gt("blend"),Gt("depth"),Gt("cull"),Gt("stencil"),Gt("polygonOffset"),Gt("scissor"),Gt("sample"),"vao"in At&&(Jt.vao=At.vao),Jt}(Rt),!1);var Bn={gpuTime:0,cpuTime:0,count:0},Ln=Sn.compile(Rt,wn,fn,an,Bn),In=Ln.draw,Wn=Ln.batch,Vt=Ln.scope,_n=[];return Q(function(At,Gt){var Jt;if(typeof At=="function")return Vt.call(this,null,At,0);if(typeof Gt=="function")if(typeof At=="number")for(Jt=0;Jt<At;++Jt)Vt.call(this,null,Gt,Jt);else{if(!Array.isArray(At))return Vt.call(this,At,Gt,0);for(Jt=0;Jt<At.length;++Jt)Vt.call(this,At[Jt],Gt,Jt)}else if(typeof At=="number"){if(0<At)return Wn.call(this,function(mn){for(;_n.length<mn;)_n.push(null);return _n}(0|At),0|At)}else{if(!Array.isArray(At))return In.call(this,At);if(At.length)return Wn.call(this,At,At.length)}},{stats:Bn,destroy:function(){Ln.destroy()}})}function tt(Rt,$t){var an=0;Sn.procs.poll();var fn=$t.color;fn&&(ct.clearColor(+fn[0]||0,+fn[1]||0,+fn[2]||0,+fn[3]||0),an|=16384),"depth"in $t&&(ct.clearDepth(+$t.depth),an|=256),"stencil"in $t&&(ct.clearStencil(0|$t.stencil),an|=1024),ct.clear(an)}function dt(Rt){return Hn.push(Rt),at(),{cancel:function(){var $t=W(Hn,Rt);Hn[$t]=function an(){var fn=W(Hn,an);Hn[fn]=Hn[Hn.length-1],--Hn.length,0>=Hn.length&&et()}}}}function ht(){var Rt=pn.viewport,$t=pn.scissor_box;Rt[0]=Rt[1]=$t[0]=$t[1]=0,Mn.viewportWidth=Mn.framebufferWidth=Mn.drawingBufferWidth=Rt[2]=$t[2]=ct.drawingBufferWidth,Mn.viewportHeight=Mn.framebufferHeight=Mn.drawingBufferHeight=Rt[3]=$t[3]=ct.drawingBufferHeight}function gt(){Mn.tick+=1,Mn.time=wt(),ht(),Sn.procs.poll()}function ut(){hn.refresh(),ht(),Sn.procs.refresh(),jt&&jt.update()}function wt(){return(ue()-Ut)/1e3}if(!(Ve=T(Ve)))return null;var ct=Ve.gl,ft=ct.getContextAttributes();ct.isContextLost();var bt=function(Rt,$t){function an(Ln){var In;Ln=Ln.toLowerCase();try{In=fn[Ln]=Rt.getExtension(Ln)}catch{}return!!In}for(var fn={},wn=0;wn<$t.extensions.length;++wn){var Bn=$t.extensions[wn];if(!an(Bn))return $t.onDestroy(),$t.onDone('"'+Bn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return $t.optionalExtensions.forEach(an),{extensions:fn,restore:function(){Object.keys(fn).forEach(function(Ln){if(fn[Ln]&&!an(Ln))throw Error("(regl): error restoring extension "+Ln)})}}}(ct,Ve);if(!bt)return null;var It=function(){var Rt={"":0},$t=[""];return{id:function(an){var fn=Rt[an];return fn||(fn=Rt[an]=$t.length,$t.push(an),fn)},str:function(an){return $t[an]}}}(),Dt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Nt=Ve.cachedCode||{},Qt=bt.extensions,jt=function(Rt,$t){function an(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function fn(_n,At,Gt){var Jt=Ln.pop()||new an;Jt.startQueryIndex=_n,Jt.endQueryIndex=At,Jt.sum=0,Jt.stats=Gt,In.push(Jt)}if(!$t.ext_disjoint_timer_query)return null;var wn=[],Bn=[],Ln=[],In=[],Wn=[],Vt=[];return{beginQuery:function(_n){var At=wn.pop()||$t.ext_disjoint_timer_query.createQueryEXT();$t.ext_disjoint_timer_query.beginQueryEXT(35007,At),Bn.push(At),fn(Bn.length-1,Bn.length,_n)},endQuery:function(){$t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:fn,update:function(){var _n,At;if((_n=Bn.length)!==0){Vt.length=Math.max(Vt.length,_n+1),Wn.length=Math.max(Wn.length,_n+1),Wn[0]=0;var Gt=Vt[0]=0;for(At=_n=0;At<Bn.length;++At){var Jt=Bn[At];$t.ext_disjoint_timer_query.getQueryObjectEXT(Jt,34919)?(Gt+=$t.ext_disjoint_timer_query.getQueryObjectEXT(Jt,34918),wn.push(Jt)):Bn[_n++]=Jt,Wn[At+1]=Gt,Vt[At+1]=_n}for(Bn.length=_n,At=_n=0;At<In.length;++At){var mn=(Gt=In[At]).startQueryIndex;Jt=Gt.endQueryIndex,Gt.sum+=Wn[Jt]-Wn[mn],mn=Vt[mn],(Jt=Vt[Jt])===mn?(Gt.stats.gpuTime+=Gt.sum/1e6,Ln.push(Gt)):(Gt.startQueryIndex=mn,Gt.endQueryIndex=Jt,In[_n++]=Gt)}In.length=_n}},getNumPendingQueries:function(){return Bn.length},clear:function(){wn.push.apply(wn,Bn);for(var _n=0;_n<wn.length;_n++)$t.ext_disjoint_timer_query.deleteQueryEXT(wn[_n]);Bn.length=0,wn.length=0},restore:function(){Bn.length=0,wn.length=0}}}(0,Qt),Ut=ue(),Xt=ct.drawingBufferWidth,gn=ct.drawingBufferHeight,Mn={tick:0,time:0,viewportWidth:Xt,viewportHeight:gn,framebufferWidth:Xt,framebufferHeight:gn,drawingBufferWidth:Xt,drawingBufferHeight:gn,pixelRatio:Ve.pixelRatio},cn=(Xt={elements:null,primitive:4,count:-1,offset:0,instances:-1},ge(ct,Qt)),qt=u(ct,Dt,Ve,function(Rt){return Kt.destroyBuffer(Rt)}),nn=p(ct,Qt,qt,Dt),Kt=L(ct,Qt,cn,Dt,qt,nn,Xt),sn=C(ct,It,Dt,Ve),hn=S(ct,Qt,cn,function(){Sn.procs.poll()},Mn,Dt,Ve),bn=vt(ct,Qt,0,Dt,Ve),yn=w(ct,Qt,cn,hn,bn,Dt),Sn=Y(ct,It,Qt,cn,qt,nn,0,yn,{},Kt,sn,Xt,Mn,jt,Nt,Ve),pn=(It=P(ct,yn,Sn.procs.poll,Mn),Sn.next),Cn=ct.canvas,Hn=[],Qn=[],nr=[],Jn=[Ve.onDestroy],Gn=null;Cn&&(Cn.addEventListener("webglcontextlost",De,!1),Cn.addEventListener("webglcontextrestored",Be,!1));var lr=yn.setFBO=nt({framebuffer:re.define.call(null,1,"framebuffer")});return ut(),ft=Q(nt,{clear:function(Rt){if("framebuffer"in Rt)if(Rt.framebuffer&&Rt.framebuffer_reglType==="framebufferCube")for(var $t=0;6>$t;++$t)lr(Q({framebuffer:Rt.framebuffer.faces[$t]},Rt),tt);else lr(Rt,tt);else tt(0,Rt)},prop:re.define.bind(null,1),context:re.define.bind(null,2),this:re.define.bind(null,3),draw:nt({}),buffer:function(Rt){return qt.create(Rt,34962,!1,!1)},elements:function(Rt){return nn.create(Rt,!1)},texture:hn.create2D,cube:hn.createCube,renderbuffer:bn.create,framebuffer:yn.create,framebufferCube:yn.createCube,vao:Kt.createVAO,attributes:ft,frame:dt,on:function(Rt,$t){var an;switch(Rt){case"frame":return dt($t);case"lost":an=Qn;break;case"restore":an=nr;break;case"destroy":an=Jn}return an.push($t),{cancel:function(){for(var fn=0;fn<an.length;++fn)if(an[fn]===$t){an[fn]=an[an.length-1],an.pop();break}}}},limits:cn,hasExtension:function(Rt){return 0<=cn.extensions.indexOf(Rt.toLowerCase())},read:It,destroy:function(){Hn.length=0,et(),Cn&&(Cn.removeEventListener("webglcontextlost",De),Cn.removeEventListener("webglcontextrestored",Be)),sn.clear(),yn.clear(),bn.clear(),Kt.clear(),hn.clear(),nn.clear(),qt.clear(),jt&&jt.clear(),Jn.forEach(function(Rt){Rt()})},_gl:ct,_refresh:ut,poll:function(){gt(),jt&&jt.update()},now:wt,stats:Dt,getCachedCode:function(){return Nt},preloadCachedCode:function(Rt){Object.entries(Rt).forEach(function($t){Nt[$t[0]]=$t[1]})}}),Ve.onDone(null,ft),ft}}()},71665:function(ee,D,e){var M=e(12856),k=M.Buffer;function l(b,d){for(var s in b)d[s]=b[s]}function T(b,d,s){return k(b,d,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?ee.exports=M:(l(M,D),D.Buffer=T),T.prototype=Object.create(k.prototype),l(k,T),T.from=function(b,d,s){if(typeof b=="number")throw new TypeError("Argument must not be a number");return k(b,d,s)},T.alloc=function(b,d,s){if(typeof b!="number")throw new TypeError("Argument must be a number");var t=k(b);return d!==void 0?typeof s=="string"?t.fill(d,s):t.fill(d):t.fill(0),t},T.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return k(b)},T.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return M.SlowBuffer(b)}},21630:function(ee,D,e){ee.exports=k;var M=e(15398).EventEmitter;function k(){M.call(this)}e(42018)(k,M),k.Readable=e(40410),k.Writable=e(37493),k.Duplex=e(37865),k.Transform=e(74308),k.PassThrough=e(66897),k.finished=e(12726),k.pipeline=e(10168),k.Stream=k,k.prototype.pipe=function(l,T){var b=this;function d(a){l.writable&&l.write(a)===!1&&b.pause&&b.pause()}function s(){b.readable&&b.resume&&b.resume()}b.on("data",d),l.on("drain",s),l._isStdio||T&&T.end===!1||(b.on("end",i),b.on("close",r));var t=!1;function i(){t||(t=!0,l.end())}function r(){t||(t=!0,typeof l.destroy=="function"&&l.destroy())}function n(a){if(o(),M.listenerCount(this,"error")===0)throw a}function o(){b.removeListener("data",d),l.removeListener("drain",s),b.removeListener("end",i),b.removeListener("close",r),b.removeListener("error",n),l.removeListener("error",n),b.removeListener("end",o),b.removeListener("close",o),l.removeListener("close",o)}return b.on("error",n),l.on("error",n),b.on("end",o),b.on("close",o),l.on("close",o),l.emit("pipe",b),l}},74322:function(ee){var D={};function e(k,l,T){T||(T=Error);var b=function(d){var s,t;function i(r,n,o){return d.call(this,function(a,u,p){return typeof l=="string"?l:l(a,u,p)}(r,n,o))||this}return t=d,(s=i).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,i}(T);b.prototype.name=T.name,b.prototype.code=k,D[k]=b}function M(k,l){if(Array.isArray(k)){var T=k.length;return k=k.map(function(b){return String(b)}),T>2?"one of ".concat(l," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:T===2?"one of ".concat(l," ").concat(k[0]," or ").concat(k[1]):"of ".concat(l," ").concat(k[0])}return"of ".concat(l," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,l){return'The value "'+l+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,l,T){var b,d,s,t,i;if(typeof l=="string"&&(d="not ",l.substr(0,4)===d)?(b="must not be",l=l.replace(/^not /,"")):b="must be",function(n,o,a){return(a===void 0||a>n.length)&&(a=n.length),n.substring(a-9,a)===o}(k," argument"))s="The ".concat(k," ").concat(b," ").concat(M(l,"type"));else{var r=(typeof i!="number"&&(i=0),i+1>(t=k).length||t.indexOf(".",i)===-1?"argument":"property");s='The "'.concat(k,'" ').concat(r," ").concat(b," ").concat(M(l,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ee.exports.q=D},37865:function(ee,D,e){var M=e(90386),k=Object.keys||function(n){var o=[];for(var a in n)o.push(a);return o};ee.exports=t;var l=e(40410),T=e(37493);e(42018)(t,l);for(var b=k(T.prototype),d=0;d<b.length;d++){var s=b[d];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(n){if(!(this instanceof t))return new t(n);l.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||M.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},66897:function(ee,D,e){ee.exports=k;var M=e(74308);function k(l){if(!(this instanceof k))return new k(l);M.call(this,l)}e(42018)(k,M),k.prototype._transform=function(l,T,b){b(null,l)}},40410:function(ee,D,e){var M,k=e(90386);ee.exports=_,_.ReadableState=m,e(15398).EventEmitter;var l,T=function(K,J){return K.listeners(J).length},b=e(71405),d=e(12856).Buffer,s=e.g.Uint8Array||function(){},t=e(40964);l=t&&t.debuglog?t.debuglog("stream"):function(){};var i,r,n,o=e(31125),a=e(65756),u=e(56306).getHighWaterMark,p=e(74322).q,c=p.ERR_INVALID_ARG_TYPE,x=p.ERR_STREAM_PUSH_AFTER_EOF,g=p.ERR_METHOD_NOT_IMPLEMENTED,h=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(42018)(_,b);var y=a.errorOrDestroy,v=["error","close","destroy","pause","resume"];function m(K,J,Y){M=M||e(37865),K=K||{},typeof Y!="boolean"&&(Y=J instanceof M),this.objectMode=!!K.objectMode,Y&&(this.objectMode=this.objectMode||!!K.readableObjectMode),this.highWaterMark=u(this,K,"readableHighWaterMark",Y),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=K.emitClose!==!1,this.autoDestroy=!!K.autoDestroy,this.destroyed=!1,this.defaultEncoding=K.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,K.encoding&&(i||(i=e(68019).s),this.decoder=new i(K.encoding),this.encoding=K.encoding)}function _(K){if(M=M||e(37865),!(this instanceof _))return new _(K);var J=this instanceof M;this._readableState=new m(K,this,J),this.readable=!0,K&&(typeof K.read=="function"&&(this._read=K.read),typeof K.destroy=="function"&&(this._destroy=K.destroy)),b.call(this)}function f(K,J,Y,W,Q){l("readableAddChunk",J);var ne,re=K._readableState;if(J===null)re.reading=!1,function(ae,ue){if(l("onEofChunk"),!ue.ended){if(ue.decoder){var pe=ue.decoder.end();pe&&pe.length&&(ue.buffer.push(pe),ue.length+=ue.objectMode?1:pe.length)}ue.ended=!0,ue.sync?L(ae):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,C(ae)))}}(K,re);else if(Q||(ne=function(ae,ue){var pe,ge;return ge=ue,d.isBuffer(ge)||ge instanceof s||typeof ue=="string"||ue===void 0||ae.objectMode||(pe=new c("chunk",["string","Buffer","Uint8Array"],ue)),pe}(re,J)),ne)y(K,ne);else if(re.objectMode||J&&J.length>0)if(typeof J=="string"||re.objectMode||Object.getPrototypeOf(J)===d.prototype||(J=function(ae){return d.from(ae)}(J)),W)re.endEmitted?y(K,new h):S(K,re,J,!0);else if(re.ended)y(K,new x);else{if(re.destroyed)return!1;re.reading=!1,re.decoder&&!Y?(J=re.decoder.write(J),re.objectMode||J.length!==0?S(K,re,J,!1):P(K,re)):S(K,re,J,!1)}else W||(re.reading=!1,P(K,re));return!re.ended&&(re.length<re.highWaterMark||re.length===0)}function S(K,J,Y,W){J.flowing&&J.length===0&&!J.sync?(J.awaitDrain=0,K.emit("data",Y)):(J.length+=J.objectMode?1:Y.length,W?J.buffer.unshift(Y):J.buffer.push(Y),J.needReadable&&L(K)),P(K,J)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(K){this._readableState&&(this._readableState.destroyed=K)}}),_.prototype.destroy=a.destroy,_.prototype._undestroy=a.undestroy,_.prototype._destroy=function(K,J){J(K)},_.prototype.push=function(K,J){var Y,W=this._readableState;return W.objectMode?Y=!0:typeof K=="string"&&((J=J||W.defaultEncoding)!==W.encoding&&(K=d.from(K,J),J=""),Y=!0),f(this,K,J,!1,Y)},_.prototype.unshift=function(K){return f(this,K,null,!0,!1)},_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(K){i||(i=e(68019).s);var J=new i(K);this._readableState.decoder=J,this._readableState.encoding=this._readableState.decoder.encoding;for(var Y=this._readableState.buffer.head,W="";Y!==null;)W+=J.write(Y.data),Y=Y.next;return this._readableState.buffer.clear(),W!==""&&this._readableState.buffer.push(W),this._readableState.length=W.length,this};var w=1073741824;function E(K,J){return K<=0||J.length===0&&J.ended?0:J.objectMode?1:K!=K?J.flowing&&J.length?J.buffer.head.data.length:J.length:(K>J.highWaterMark&&(J.highWaterMark=function(Y){return Y>=w?Y=w:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y}(K)),K<=J.length?K:J.ended?J.length:(J.needReadable=!0,0))}function L(K){var J=K._readableState;l("emitReadable",J.needReadable,J.emittedReadable),J.needReadable=!1,J.emittedReadable||(l("emitReadable",J.flowing),J.emittedReadable=!0,k.nextTick(C,K))}function C(K){var J=K._readableState;l("emitReadable_",J.destroyed,J.length,J.ended),J.destroyed||!J.length&&!J.ended||(K.emit("readable"),J.emittedReadable=!1),J.needReadable=!J.flowing&&!J.ended&&J.length<=J.highWaterMark,N(K)}function P(K,J){J.readingMore||(J.readingMore=!0,k.nextTick(z,K,J))}function z(K,J){for(;!J.reading&&!J.ended&&(J.length<J.highWaterMark||J.flowing&&J.length===0);){var Y=J.length;if(l("maybeReadMore read 0"),K.read(0),Y===J.length)break}J.readingMore=!1}function G(K){var J=K._readableState;J.readableListening=K.listenerCount("readable")>0,J.resumeScheduled&&!J.paused?J.flowing=!0:K.listenerCount("data")>0&&K.resume()}function O(K){l("readable nexttick read 0"),K.read(0)}function H(K,J){l("resume",J.reading),J.reading||K.read(0),J.resumeScheduled=!1,K.emit("resume"),N(K),J.flowing&&!J.reading&&K.read(0)}function N(K){var J=K._readableState;for(l("flow",J.flowing);J.flowing&&K.read()!==null;);}function B(K,J){return J.length===0?null:(J.objectMode?Y=J.buffer.shift():!K||K>=J.length?(Y=J.decoder?J.buffer.join(""):J.buffer.length===1?J.buffer.first():J.buffer.concat(J.length),J.buffer.clear()):Y=J.buffer.consume(K,J.decoder),Y);var Y}function V(K){var J=K._readableState;l("endReadable",J.endEmitted),J.endEmitted||(J.ended=!0,k.nextTick(q,J,K))}function q(K,J){if(l("endReadableNT",K.endEmitted,K.length),!K.endEmitted&&K.length===0&&(K.endEmitted=!0,J.readable=!1,J.emit("end"),K.autoDestroy)){var Y=J._writableState;(!Y||Y.autoDestroy&&Y.finished)&&J.destroy()}}function te(K,J){for(var Y=0,W=K.length;Y<W;Y++)if(K[Y]===J)return Y;return-1}_.prototype.read=function(K){l("read",K),K=parseInt(K,10);var J=this._readableState,Y=K;if(K!==0&&(J.emittedReadable=!1),K===0&&J.needReadable&&((J.highWaterMark!==0?J.length>=J.highWaterMark:J.length>0)||J.ended))return l("read: emitReadable",J.length,J.ended),J.length===0&&J.ended?V(this):L(this),null;if((K=E(K,J))===0&&J.ended)return J.length===0&&V(this),null;var W,Q=J.needReadable;return l("need readable",Q),(J.length===0||J.length-K<J.highWaterMark)&&l("length less than watermark",Q=!0),J.ended||J.reading?l("reading or ended",Q=!1):Q&&(l("do read"),J.reading=!0,J.sync=!0,J.length===0&&(J.needReadable=!0),this._read(J.highWaterMark),J.sync=!1,J.reading||(K=E(Y,J))),(W=K>0?B(K,J):null)===null?(J.needReadable=J.length<=J.highWaterMark,K=0):(J.length-=K,J.awaitDrain=0),J.length===0&&(J.ended||(J.needReadable=!0),Y!==K&&J.ended&&V(this)),W!==null&&this.emit("data",W),W},_.prototype._read=function(K){y(this,new g("_read()"))},_.prototype.pipe=function(K,J){var Y=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=K;break;case 1:W.pipes=[W.pipes,K];break;default:W.pipes.push(K)}W.pipesCount+=1,l("pipe count=%d opts=%j",W.pipesCount,J);var Q=J&&J.end===!1||K===k.stdout||K===k.stderr?me:ne;function ne(){l("onend"),K.end()}W.endEmitted?k.nextTick(Q):Y.once("end",Q),K.on("unpipe",function ve(Oe,Me){l("onunpipe"),Oe===Y&&Me&&Me.hasUnpiped===!1&&(Me.hasUnpiped=!0,l("cleanup"),K.removeListener("close",ge),K.removeListener("finish",_e),K.removeListener("drain",re),K.removeListener("error",pe),K.removeListener("unpipe",ve),Y.removeListener("end",ne),Y.removeListener("end",me),Y.removeListener("data",ue),ae=!0,!W.awaitDrain||K._writableState&&!K._writableState.needDrain||re())});var re=function(ve){return function(){var Oe=ve._readableState;l("pipeOnDrain",Oe.awaitDrain),Oe.awaitDrain&&Oe.awaitDrain--,Oe.awaitDrain===0&&T(ve,"data")&&(Oe.flowing=!0,N(ve))}}(Y);K.on("drain",re);var ae=!1;function ue(ve){l("ondata");var Oe=K.write(ve);l("dest.write",Oe),Oe===!1&&((W.pipesCount===1&&W.pipes===K||W.pipesCount>1&&te(W.pipes,K)!==-1)&&!ae&&(l("false write response, pause",W.awaitDrain),W.awaitDrain++),Y.pause())}function pe(ve){l("onerror",ve),me(),K.removeListener("error",pe),T(K,"error")===0&&y(K,ve)}function ge(){K.removeListener("finish",_e),me()}function _e(){l("onfinish"),K.removeListener("close",ge),me()}function me(){l("unpipe"),Y.unpipe(K)}return Y.on("data",ue),function(ve,Oe,Me){if(typeof ve.prependListener=="function")return ve.prependListener(Oe,Me);ve._events&&ve._events[Oe]?Array.isArray(ve._events[Oe])?ve._events[Oe].unshift(Me):ve._events[Oe]=[Me,ve._events[Oe]]:ve.on(Oe,Me)}(K,"error",pe),K.once("close",ge),K.once("finish",_e),K.emit("pipe",Y),W.flowing||(l("pipe resume"),Y.resume()),K},_.prototype.unpipe=function(K){var J=this._readableState,Y={hasUnpiped:!1};if(J.pipesCount===0)return this;if(J.pipesCount===1)return K&&K!==J.pipes||(K||(K=J.pipes),J.pipes=null,J.pipesCount=0,J.flowing=!1,K&&K.emit("unpipe",this,Y)),this;if(!K){var W=J.pipes,Q=J.pipesCount;J.pipes=null,J.pipesCount=0,J.flowing=!1;for(var ne=0;ne<Q;ne++)W[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var re=te(J.pipes,K);return re===-1||(J.pipes.splice(re,1),J.pipesCount-=1,J.pipesCount===1&&(J.pipes=J.pipes[0]),K.emit("unpipe",this,Y)),this},_.prototype.on=function(K,J){var Y=b.prototype.on.call(this,K,J),W=this._readableState;return K==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):K==="readable"&&(W.endEmitted||W.readableListening||(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,l("on readable",W.length,W.reading),W.length?L(this):W.reading||k.nextTick(O,this))),Y},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(K,J){var Y=b.prototype.removeListener.call(this,K,J);return K==="readable"&&k.nextTick(G,this),Y},_.prototype.removeAllListeners=function(K){var J=b.prototype.removeAllListeners.apply(this,arguments);return K!=="readable"&&K!==void 0||k.nextTick(G,this),J},_.prototype.resume=function(){var K=this._readableState;return K.flowing||(l("resume"),K.flowing=!K.readableListening,function(J,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,k.nextTick(H,J,Y))}(this,K)),K.paused=!1,this},_.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(K){var J=this,Y=this._readableState,W=!1;for(var Q in K.on("end",function(){if(l("wrapped end"),Y.decoder&&!Y.ended){var re=Y.decoder.end();re&&re.length&&J.push(re)}J.push(null)}),K.on("data",function(re){l("wrapped data"),Y.decoder&&(re=Y.decoder.write(re)),Y.objectMode&&re==null||(Y.objectMode||re&&re.length)&&(J.push(re)||(W=!0,K.pause()))}),K)this[Q]===void 0&&typeof K[Q]=="function"&&(this[Q]=function(re){return function(){return K[re].apply(K,arguments)}}(Q));for(var ne=0;ne<v.length;ne++)K.on(v[ne],this.emit.bind(this,v[ne]));return this._read=function(re){l("wrapped _read",re),W&&(W=!1,K.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=e(68221)),r(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(K){this._readableState&&(this._readableState.flowing=K)}}),_._fromList=B,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(_.from=function(K,J){return n===void 0&&(n=e(31748)),n(_,K,J)})},74308:function(ee,D,e){ee.exports=t;var M=e(74322).q,k=M.ERR_METHOD_NOT_IMPLEMENTED,l=M.ERR_MULTIPLE_CALLBACK,T=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=M.ERR_TRANSFORM_WITH_LENGTH_0,d=e(37865);function s(n,o){var a=this._transformState;a.transforming=!1;var u=a.writecb;if(u===null)return this.emit("error",new l);a.writechunk=null,a.writecb=null,o!=null&&this.push(o),u(n);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function t(n){if(!(this instanceof t))return new t(n);d.call(this,n),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",i)}function i(){var n=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(o,a){r(n,o,a)})}function r(n,o,a){if(o)return n.emit("error",o);if(a!=null&&n.push(a),n._writableState.length)throw new b;if(n._transformState.transforming)throw new T;return n.push(null)}e(42018)(t,d),t.prototype.push=function(n,o){return this._transformState.needTransform=!1,d.prototype.push.call(this,n,o)},t.prototype._transform=function(n,o,a){a(new k("_transform()"))},t.prototype._write=function(n,o,a){var u=this._transformState;if(u.writecb=a,u.writechunk=n,u.writeencoding=o,!u.transforming){var p=this._readableState;(u.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},t.prototype._read=function(n){var o=this._transformState;o.writechunk===null||o.transforming?o.needTransform=!0:(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform))},t.prototype._destroy=function(n,o){d.prototype._destroy.call(this,n,function(a){o(a)})}},37493:function(ee,D,e){var M,k=e(90386);function l(P){var z=this;this.next=null,this.entry=null,this.finish=function(){(function(G,O,H){var N=G.entry;for(G.entry=null;N;){var B=N.callback;O.pendingcb--,B(void 0),N=N.next}O.corkedRequestsFree.next=G})(z,P)}}ee.exports=_,_.WritableState=m;var T,b={deprecate:e(20588)},d=e(71405),s=e(12856).Buffer,t=e.g.Uint8Array||function(){},i=e(65756),r=e(56306).getHighWaterMark,n=e(74322).q,o=n.ERR_INVALID_ARG_TYPE,a=n.ERR_METHOD_NOT_IMPLEMENTED,u=n.ERR_MULTIPLE_CALLBACK,p=n.ERR_STREAM_CANNOT_PIPE,c=n.ERR_STREAM_DESTROYED,x=n.ERR_STREAM_NULL_VALUES,g=n.ERR_STREAM_WRITE_AFTER_END,h=n.ERR_UNKNOWN_ENCODING,y=i.errorOrDestroy;function v(){}function m(P,z,G){M=M||e(37865),P=P||{},typeof G!="boolean"&&(G=z instanceof M),this.objectMode=!!P.objectMode,G&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=r(this,P,"writableHighWaterMark",G),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var O=P.decodeStrings===!1;this.decodeStrings=!O,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){(function(N,B){var V=N._writableState,q=V.sync,te=V.writecb;if(typeof te!="function")throw new u;if(function(J){J.writing=!1,J.writecb=null,J.length-=J.writelen,J.writelen=0}(V),B)(function(J,Y,W,Q,ne){--Y.pendingcb,W?(k.nextTick(ne,Q),k.nextTick(C,J,Y),J._writableState.errorEmitted=!0,y(J,Q)):(ne(Q),J._writableState.errorEmitted=!0,y(J,Q),C(J,Y))})(N,V,q,B,te);else{var K=E(V)||N.destroyed;K||V.corked||V.bufferProcessing||!V.bufferedRequest||w(N,V),q?k.nextTick(S,N,V,K,te):S(N,V,K,te)}})(z,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function _(P){var z=this instanceof(M=M||e(37865));if(!z&&!T.call(_,this))return new _(P);this._writableState=new m(P,this,z),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),d.call(this)}function f(P,z,G,O,H,N,B){z.writelen=O,z.writecb=B,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new c("write")):G?P._writev(H,z.onwrite):P._write(H,N,z.onwrite),z.sync=!1}function S(P,z,G,O){G||function(H,N){N.length===0&&N.needDrain&&(N.needDrain=!1,H.emit("drain"))}(P,z),z.pendingcb--,O(),C(P,z)}function w(P,z){z.bufferProcessing=!0;var G=z.bufferedRequest;if(P._writev&&G&&G.next){var O=z.bufferedRequestCount,H=new Array(O),N=z.corkedRequestsFree;N.entry=G;for(var B=0,V=!0;G;)H[B]=G,G.isBuf||(V=!1),G=G.next,B+=1;H.allBuffers=V,f(P,z,!0,z.length,H,"",N.finish),z.pendingcb++,z.lastBufferedRequest=null,N.next?(z.corkedRequestsFree=N.next,N.next=null):z.corkedRequestsFree=new l(z),z.bufferedRequestCount=0}else{for(;G;){var q=G.chunk,te=G.encoding,K=G.callback;if(f(P,z,!1,z.objectMode?1:q.length,q,te,K),G=G.next,z.bufferedRequestCount--,z.writing)break}G===null&&(z.lastBufferedRequest=null)}z.bufferedRequest=G,z.bufferProcessing=!1}function E(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function L(P,z){P._final(function(G){z.pendingcb--,G&&y(P,G),z.prefinished=!0,P.emit("prefinish"),C(P,z)})}function C(P,z){var G=E(z);if(G&&(function(H,N){N.prefinished||N.finalCalled||(typeof H._final!="function"||N.destroyed?(N.prefinished=!0,H.emit("prefinish")):(N.pendingcb++,N.finalCalled=!0,k.nextTick(L,H,N)))}(P,z),z.pendingcb===0&&(z.finished=!0,P.emit("finish"),z.autoDestroy))){var O=P._readableState;(!O||O.autoDestroy&&O.endEmitted)&&P.destroy()}return G}e(42018)(_,d),m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,z=[];P;)z.push(P),P=P.next;return z},function(){try{Object.defineProperty(m.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(P){return!!T.call(this,P)||this===_&&P&&P._writableState instanceof m}})):T=function(P){return P instanceof this},_.prototype.pipe=function(){y(this,new p)},_.prototype.write=function(P,z,G){var O,H=this._writableState,N=!1,B=!H.objectMode&&(O=P,s.isBuffer(O)||O instanceof t);return B&&!s.isBuffer(P)&&(P=function(V){return s.from(V)}(P)),typeof z=="function"&&(G=z,z=null),B?z="buffer":z||(z=H.defaultEncoding),typeof G!="function"&&(G=v),H.ending?function(V,q){var te=new g;y(V,te),k.nextTick(q,te)}(this,G):(B||function(V,q,te,K){var J;return te===null?J=new x:typeof te=="string"||q.objectMode||(J=new o("chunk",["string","Buffer"],te)),!J||(y(V,J),k.nextTick(K,J),!1)}(this,H,P,G))&&(H.pendingcb++,N=function(V,q,te,K,J,Y){if(!te){var W=function(ae,ue,pe){return ae.objectMode||ae.decodeStrings===!1||typeof ue!="string"||(ue=s.from(ue,pe)),ue}(q,K,J);K!==W&&(te=!0,J="buffer",K=W)}var Q=q.objectMode?1:K.length;q.length+=Q;var ne=q.length<q.highWaterMark;if(ne||(q.needDrain=!0),q.writing||q.corked){var re=q.lastBufferedRequest;q.lastBufferedRequest={chunk:K,encoding:J,isBuf:te,callback:Y,next:null},re?re.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else f(V,q,!1,Q,K,J,Y);return ne}(this,H,B,P,z,G)),N},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||w(this,P))},_.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new h(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(P,z,G){G(new a("_write()"))},_.prototype._writev=null,_.prototype.end=function(P,z,G){var O=this._writableState;return typeof P=="function"?(G=P,P=null,z=null):typeof z=="function"&&(G=z,z=null),P!=null&&this.write(P,z),O.corked&&(O.corked=1,this.uncork()),O.ending||function(H,N,B){N.ending=!0,C(H,N),B&&(N.finished?k.nextTick(B):H.once("finish",B)),N.ended=!0,H.writable=!1}(this,O,G),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),_.prototype.destroy=i.destroy,_.prototype._undestroy=i.undestroy,_.prototype._destroy=function(P,z){z(P)}},68221:function(ee,D,e){var M,k=e(90386);function l(x,g,h){return g in x?Object.defineProperty(x,g,{value:h,enumerable:!0,configurable:!0,writable:!0}):x[g]=h,x}var T=e(12726),b=Symbol("lastResolve"),d=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function o(x,g){return{value:x,done:g}}function a(x){var g=x[b];if(g!==null){var h=x[n].read();h!==null&&(x[i]=null,x[b]=null,x[d]=null,g(o(h,!1)))}}function u(x){k.nextTick(a,x)}var p=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((l(M={get stream(){return this[n]},next:function(){var x=this,g=this[s];if(g!==null)return Promise.reject(g);if(this[t])return Promise.resolve(o(void 0,!0));if(this[n].destroyed)return new Promise(function(m,_){k.nextTick(function(){x[s]?_(x[s]):m(o(void 0,!0))})});var h,y=this[i];if(y)h=new Promise(function(m,_){return function(f,S){m.then(function(){_[t]?f(o(void 0,!0)):_[r](f,S)},S)}}(y,this));else{var v=this[n].read();if(v!==null)return Promise.resolve(o(v,!1));h=new Promise(this[r])}return this[i]=h,h}},Symbol.asyncIterator,function(){return this}),l(M,"return",function(){var x=this;return new Promise(function(g,h){x[n].destroy(null,function(y){y?h(y):g(o(void 0,!0))})})}),M),p);ee.exports=function(x){var g,h=Object.create(c,(l(g={},n,{value:x,writable:!0}),l(g,b,{value:null,writable:!0}),l(g,d,{value:null,writable:!0}),l(g,s,{value:null,writable:!0}),l(g,t,{value:x._readableState.endEmitted,writable:!0}),l(g,r,{value:function(y,v){var m=h[n].read();m?(h[i]=null,h[b]=null,h[d]=null,y(o(m,!1))):(h[b]=y,h[d]=v)},writable:!0}),g));return h[i]=null,T(x,function(y){if(y&&y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var v=h[d];return v!==null&&(h[i]=null,h[b]=null,h[d]=null,v(y)),void(h[s]=y)}var m=h[b];m!==null&&(h[i]=null,h[b]=null,h[d]=null,m(o(void 0,!0))),h[t]=!0}),x.on("readable",u.bind(null,h)),h}},31125:function(ee,D,e){function M(s,t){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),i.push.apply(i,r)}return i}function k(s,t,i){return t in s?Object.defineProperty(s,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[t]=i,s}function l(s,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var T=e(12856).Buffer,b=e(69862).inspect,d=b&&b.custom||"inspect";ee.exports=function(){function s(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,i;return t=s,i=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o}},{key:"concat",value:function(r){if(this.length===0)return T.alloc(0);for(var n,o,a,u=T.allocUnsafe(r>>>0),p=this.head,c=0;p;)n=p.data,o=u,a=c,T.prototype.copy.call(n,o,a),c+=p.data.length,p=p.next;return u}},{key:"consume",value:function(r,n){var o;return r<this.head.data.length?(o=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):o=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),o}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,o=1,a=n.data;for(r-=a.length;n=n.next;){var u=n.data,p=r>u.length?u.length:r;if(p===u.length?a+=u:a+=u.slice(0,r),(r-=p)==0){p===u.length?(++o,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=u.slice(p));break}++o}return this.length-=o,a}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),o=this.head,a=1;for(o.data.copy(n),r-=o.data.length;o=o.next;){var u=o.data,p=r>u.length?u.length:r;if(u.copy(n,n.length-r,0,p),(r-=p)==0){p===u.length?(++a,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=u.slice(p));break}++a}return this.length-=a,n}},{key:d,value:function(r,n){return b(this,function(o){for(var a=1;a<arguments.length;a++){var u=arguments[a]!=null?arguments[a]:{};a%2?M(Object(u),!0).forEach(function(p){k(o,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(u)):M(Object(u)).forEach(function(p){Object.defineProperty(o,p,Object.getOwnPropertyDescriptor(u,p))})}return o}({},n,{depth:0,customInspect:!1}))}}],i&&l(t.prototype,i),s}()},65756:function(ee,D,e){var M=e(90386);function k(b,d){T(b,d),l(b)}function l(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function T(b,d){b.emit("error",d)}ee.exports={destroy:function(b,d){var s=this,t=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return t||i?(d?d(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(T,this,b)):M.nextTick(T,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(r){!d&&r?s._writableState?s._writableState.errorEmitted?M.nextTick(l,s):(s._writableState.errorEmitted=!0,M.nextTick(k,s,r)):M.nextTick(k,s,r):d?(M.nextTick(l,s),d(r)):M.nextTick(l,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,d){var s=b._readableState,t=b._writableState;s&&s.autoDestroy||t&&t.autoDestroy?b.destroy(d):b.emit("error",d)}}},12726:function(ee,D,e){var M=e(74322).q.ERR_STREAM_PREMATURE_CLOSE;function k(){}ee.exports=function l(T,b,d){if(typeof b=="function")return l(T,null,b);b||(b={}),d=function(x){var g=!1;return function(){if(!g){g=!0;for(var h=arguments.length,y=new Array(h),v=0;v<h;v++)y[v]=arguments[v];x.apply(this,y)}}}(d||k);var s=b.readable||b.readable!==!1&&T.readable,t=b.writable||b.writable!==!1&&T.writable,i=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){t=!1,r=!0,s||d.call(T)},o=T._readableState&&T._readableState.endEmitted,a=function(){s=!1,o=!0,t||d.call(T)},u=function(x){d.call(T,x)},p=function(){var x;return s&&!o?(T._readableState&&T._readableState.ended||(x=new M),d.call(T,x)):t&&!r?(T._writableState&&T._writableState.ended||(x=new M),d.call(T,x)):void 0},c=function(){T.req.on("finish",n)};return function(x){return x.setHeader&&typeof x.abort=="function"}(T)?(T.on("complete",n),T.on("abort",p),T.req?c():T.on("request",c)):t&&!T._writableState&&(T.on("end",i),T.on("close",i)),T.on("end",a),T.on("finish",n),b.error!==!1&&T.on("error",u),T.on("close",p),function(){T.removeListener("complete",n),T.removeListener("abort",p),T.removeListener("request",c),T.req&&T.req.removeListener("finish",n),T.removeListener("end",i),T.removeListener("close",i),T.removeListener("finish",n),T.removeListener("end",a),T.removeListener("error",u),T.removeListener("close",p)}}},31748:function(ee){ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(ee,D,e){var M,k=e(74322).q,l=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function b(t){if(t)throw t}function d(t){t()}function s(t,i){return t.pipe(i)}ee.exports=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var n,o=function(u){return u.length?typeof u[u.length-1]!="function"?b:u.pop():b}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new l("streams");var a=i.map(function(u,p){var c=p<i.length-1;return function(x,g,h,y){y=function(_){var f=!1;return function(){f||(f=!0,_.apply(void 0,arguments))}}(y);var v=!1;x.on("close",function(){v=!0}),M===void 0&&(M=e(12726)),M(x,{readable:g,writable:h},function(_){if(_)return y(_);v=!0,y()});var m=!1;return function(_){if(!v&&!m)return m=!0,function(f){return f.setHeader&&typeof f.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void y(_||new T("pipe"))}}(u,c,p>0,function(x){n||(n=x),x&&a.forEach(d),c||(a.forEach(d),o(n))})});return i.reduce(s)}},56306:function(ee,D,e){var M=e(74322).q.ERR_INVALID_OPT_VALUE;ee.exports={getHighWaterMark:function(k,l,T,b){var d=function(s,t,i){return s.highWaterMark!=null?s.highWaterMark:t?s[i]:null}(l,b,T);if(d!=null){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new M(b?T:"highWaterMark",d);return Math.floor(d)}return k.objectMode?16:16384}}},71405:function(ee,D,e){ee.exports=e(15398).EventEmitter},68019:function(ee,D,e){var M=e(71665).Buffer,k=M.isEncoding||function(o){switch((o=""+o)&&o.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(o){var a;switch(this.encoding=function(u){var p=function(c){if(!c)return"utf8";for(var x;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(x)return;c=(""+c).toLowerCase(),x=!0}}(u);if(typeof p!="string"&&(M.isEncoding===k||!k(u)))throw new Error("Unknown encoding: "+u);return p||u}(o),this.encoding){case"utf16le":this.text=d,this.end=s,a=4;break;case"utf8":this.fillLast=b,a=4;break;case"base64":this.text=t,this.end=i,a=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(a)}function T(o){return o<=127?0:o>>5==6?2:o>>4==14?3:o>>3==30?4:o>>6==2?-1:-2}function b(o){var a=this.lastTotal-this.lastNeed,u=function(p,c,x){if((192&c[0])!=128)return p.lastNeed=0,"";if(p.lastNeed>1&&c.length>1){if((192&c[1])!=128)return p.lastNeed=1,"";if(p.lastNeed>2&&c.length>2&&(192&c[2])!=128)return p.lastNeed=2,""}}(this,o);return u!==void 0?u:this.lastNeed<=o.length?(o.copy(this.lastChar,a,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(o.copy(this.lastChar,a,0,o.length),void(this.lastNeed-=o.length))}function d(o,a){if((o.length-a)%2==0){var u=o.toString("utf16le",a);if(u){var p=u.charCodeAt(u.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=o[o.length-1],o.toString("utf16le",a,o.length-1)}function s(o){var a=o&&o.length?this.write(o):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,u)}return a}function t(o,a){var u=(o.length-a)%3;return u===0?o.toString("base64",a):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=o[o.length-1]:(this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1]),o.toString("base64",a,o.length-u))}function i(o){var a=o&&o.length?this.write(o):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function r(o){return o.toString(this.encoding)}function n(o){return o&&o.length?this.write(o):""}D.s=l,l.prototype.write=function(o){if(o.length===0)return"";var a,u;if(this.lastNeed){if((a=this.fillLast(o))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<o.length?a?a+this.text(o,u):this.text(o,u):a||""},l.prototype.end=function(o){var a=o&&o.length?this.write(o):"";return this.lastNeed?a+"":a},l.prototype.text=function(o,a){var u=function(c,x,g){var h=x.length-1;if(h<g)return 0;var y=T(x[h]);return y>=0?(y>0&&(c.lastNeed=y-1),y):--h<g||y===-2?0:(y=T(x[h]))>=0?(y>0&&(c.lastNeed=y-2),y):--h<g||y===-2?0:(y=T(x[h]))>=0?(y>0&&(y===2?y=0:c.lastNeed=y-3),y):0}(this,o,a);if(!this.lastNeed)return o.toString("utf8",a);this.lastTotal=u;var p=o.length-(u-this.lastNeed);return o.copy(this.lastChar,0,p),o.toString("utf8",a,p)},l.prototype.fillLast=function(o){if(this.lastNeed<=o.length)return o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,o.length),this.lastNeed-=o.length}},90715:function(ee,D,e){var M=e(32791),k=e(41633)("stream-parser");ee.exports=function(c){var x=c&&typeof c._transform=="function",g=c&&typeof c._write=="function";if(!x&&!g)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),c._bytes=t,c._skipBytes=i,x&&(c._passthrough=r),x?c._transform=o:c._write=n};var l=-1,T=0,b=1,d=2;function s(c){k("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=l,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||s(this),k("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=T}function i(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=b}function r(c,x){M(!this._parserCallback,'There is already a "callback" set!'),M(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=d}function n(c,x,g){this._parserInit||s(this),k("write(%o bytes)",c.length),typeof x=="function"&&(g=x),u(this,c,null,g)}function o(c,x,g){this._parserInit||s(this),k("transform(%o bytes)",c.length),typeof x!="function"&&(x=this._parserOutput),u(this,c,x,g)}function a(c,x,g,h){if(c._parserBytesLeft-=x.length,k("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===T?(c._parserBuffers.push(x),c._parserBuffered+=x.length):c._parserState===d&&g(x),c._parserBytesLeft!==0)return h;var y=c._parserCallback;if(y&&c._parserState===T&&c._parserBuffers.length>1&&(x=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==T&&(x=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=l,c._parserBuffers.splice(0),y){var v=[];x&&v.push(x),g&&v.push(g);var m=y.length>v.length;m&&v.push(p(h));var _=y.apply(c,v);if(!m||h===_)return h}}var u=p(function c(x,g,h,y){return x._parserBytesLeft<=0?y(new Error("got data but not currently parsing anything")):g.length<=x._parserBytesLeft?function(){return a(x,g,h,y)}:function(){var v=g.slice(0,x._parserBytesLeft);return a(x,v,h,function(m){return m?y(m):g.length>v.length?function(){return c(x,g.slice(v.length),h,y)}:void 0})}});function p(c){return function(){for(var x=c.apply(this,arguments);typeof x=="function";)x=x();return x}}},41633:function(ee,D,e){var M=e(90386);function k(){var l;try{l=D.storage.debug}catch{}return!l&&M!==void 0&&"env"in M&&(l=M.env.DEBUG),l}(D=ee.exports=e(74469)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},D.formatArgs=function(l){var T=this.useColors;if(l[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+l[0]+(T?"%c ":" ")+"+"+D.humanize(this.diff),T){var b="color: "+this.color;l.splice(1,0,b,"color: inherit");var d=0,s=0;l[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(d++,t==="%c"&&(s=d))}),l.splice(s,0,b)}},D.save=function(l){try{l==null?D.storage.removeItem("debug"):D.storage.debug=l}catch{}},D.load=k,D.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},D.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),D.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],D.formatters.j=function(l){try{return JSON.stringify(l)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},D.enable(k())},74469:function(ee,D,e){var M;function k(l){function T(){if(T.enabled){var b=T,d=+new Date,s=d-(M||d);b.diff=s,b.prev=M,b.curr=d,M=d;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=D.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(n,o){if(n==="%%")return n;r++;var a=D.formatters[o];if(typeof a=="function"){var u=t[r];n=a.call(b,u),t.splice(r,1),r--}return n}),D.formatArgs.call(b,t),(T.log||D.log||console.log.bind(console)).apply(b,t)}}return T.namespace=l,T.enabled=D.enabled(l),T.useColors=D.useColors(),T.color=function(b){var d,s=0;for(d in b)s=(s<<5)-s+b.charCodeAt(d),s|=0;return D.colors[Math.abs(s)%D.colors.length]}(l),typeof D.init=="function"&&D.init(T),T}(D=ee.exports=k.debug=k.default=k).coerce=function(l){return l instanceof Error?l.stack||l.message:l},D.disable=function(){D.enable("")},D.enable=function(l){D.save(l),D.names=[],D.skips=[];for(var T=(typeof l=="string"?l:"").split(/[\s,]+/),b=T.length,d=0;d<b;d++)T[d]&&((l=T[d].replace(/\*/g,".*?"))[0]==="-"?D.skips.push(new RegExp("^"+l.substr(1)+"$")):D.names.push(new RegExp("^"+l+"$")))},D.enabled=function(l){var T,b;for(T=0,b=D.skips.length;T<b;T++)if(D.skips[T].test(l))return!1;for(T=0,b=D.names.length;T<b;T++)if(D.names[T].test(l))return!0;return!1},D.humanize=e(11375),D.names=[],D.skips=[],D.formatters={}},11375:function(ee){var D=1e3,e=60*D,M=60*e,k=24*M;function l(T,b,d){if(!(T<b))return T<1.5*b?Math.floor(T/b)+" "+d:Math.ceil(T/b)+" "+d+"s"}ee.exports=function(T,b){b=b||{};var d,s=typeof T;if(s==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var r=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*M;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*D;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return b.long?l(d=T,k,"day")||l(d,M,"hour")||l(d,e,"minute")||l(d,D,"second")||d+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=M?Math.round(t/M)+"h":t>=e?Math.round(t/e)+"m":t>=D?Math.round(t/D)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},99011:function(ee,D,e){var M=e(88641);ee.exports=function(k,l,T){if(k==null)throw Error("First argument should be a string");if(l==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return n.length===1&&(n+=n),n}));var b=M.parse(k,{flat:!0,brackets:T.ignore}),d=b[0].split(l);if(T.escape){for(var s=[],t=0;t<d.length;t++){var i=d[t],r=d[t+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(s.push(i+l+r),t++):s.push(i)}d=s}for(t=0;t<d.length;t++)b[0]=d[t],d[t]=M.stringify(b,{flat:!0});return d}},68664:function(ee){ee.exports=function(D){for(var e=D.length,M=new Array(e),k=new Array(e),l=new Array(e),T=new Array(e),b=new Array(e),d=new Array(e),s=0;s<e;++s)M[s]=-1,k[s]=0,l[s]=!1,T[s]=0,b[s]=-1,d[s]=[];var t,i=0,r=[],n=[];function o(p){var c=[p],x=[p];for(M[p]=k[p]=i,l[p]=!0,i+=1;x.length>0;){p=x[x.length-1];var g=D[p];if(T[p]<g.length){for(var h=T[p];h<g.length;++h){var y=g[h];if(M[y]<0){M[y]=k[y]=i,l[y]=!0,i+=1,c.push(y),x.push(y);break}l[y]&&(k[p]=0|Math.min(k[p],k[y])),b[y]>=0&&d[p].push(b[y])}T[p]=h}else{if(k[p]===M[p]){var v=[],m=[],_=0;for(h=c.length-1;h>=0;--h){var f=c[h];if(l[f]=!1,v.push(f),m.push(d[f]),_+=d[f].length,b[f]=r.length,f===p){c.length=h;break}}r.push(v);var S=new Array(_);for(h=0;h<m.length;h++)for(var w=0;w<m[h].length;w++)S[--_]=m[h][w];n.push(S)}x.pop()}}}for(s=0;s<e;++s)M[s]<0&&o(s);for(s=0;s<n.length;s++){var a=n[s];if(a.length!==0){a.sort(function(p,c){return p-c}),t=[a[0]];for(var u=1;u<a.length;u++)a[u]!==a[u-1]&&t.push(a[u]);n[s]=t}}return{components:r,adjacencyList:n}}},7095:function(ee,D,e){e.r(D);var M=2*Math.PI,k=function(b,d,s,t,i,r,n){var o=b.x,a=b.y;return{x:t*(o*=d)-i*(a*=s)+r,y:i*o+t*a+n}},l=function(b,d){var s=d===1.5707963267948966?.551915024494:d===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(d/4),t=Math.cos(b),i=Math.sin(b),r=Math.cos(b+d),n=Math.sin(b+d);return[{x:t-i*s,y:i+t*s},{x:r+n*s,y:n-r*s},{x:r,y:n}]},T=function(b,d,s,t){var i=b*s+d*t;return i>1&&(i=1),i<-1&&(i=-1),(b*t-d*s<0?-1:1)*Math.acos(i)};D.default=function(b){var d=b.px,s=b.py,t=b.cx,i=b.cy,r=b.rx,n=b.ry,o=b.xAxisRotation,a=o===void 0?0:o,u=b.largeArcFlag,p=u===void 0?0:u,c=b.sweepFlag,x=c===void 0?0:c,g=[];if(r===0||n===0)return[];var h=Math.sin(a*M/360),y=Math.cos(a*M/360),v=y*(d-t)/2+h*(s-i)/2,m=-h*(d-t)/2+y*(s-i)/2;if(v===0&&m===0)return[];r=Math.abs(r),n=Math.abs(n);var _=Math.pow(v,2)/Math.pow(r,2)+Math.pow(m,2)/Math.pow(n,2);_>1&&(r*=Math.sqrt(_),n*=Math.sqrt(_));var f=function(O,H,N,B,V,q,te,K,J,Y,W,Q){var ne=Math.pow(V,2),re=Math.pow(q,2),ae=Math.pow(W,2),ue=Math.pow(Q,2),pe=ne*re-ne*ue-re*ae;pe<0&&(pe=0),pe/=ne*ue+re*ae;var ge=(pe=Math.sqrt(pe)*(te===K?-1:1))*V/q*Q,_e=pe*-q/V*W,me=Y*ge-J*_e+(O+N)/2,ve=J*ge+Y*_e+(H+B)/2,Oe=(W-ge)/V,Me=(Q-_e)/q,Te=(-W-ge)/V,se=(-Q-_e)/q,oe=T(1,0,Oe,Me),he=T(Oe,Me,Te,se);return K===0&&he>0&&(he-=M),K===1&&he<0&&(he+=M),[me,ve,oe,he]}(d,s,t,i,r,n,p,x,h,y,v,m),S=function(O,H){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return function(N,B){var V=[],q=!0,te=!1,K=void 0;try{for(var J,Y=N[Symbol.iterator]();!(q=(J=Y.next()).done)&&(V.push(J.value),!B||V.length!==B);q=!0);}catch(W){te=!0,K=W}finally{try{!q&&Y.return&&Y.return()}finally{if(te)throw K}}return V}(O,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(f,4),w=S[0],E=S[1],L=S[2],C=S[3],P=Math.abs(C)/(M/4);Math.abs(1-P)<1e-7&&(P=1);var z=Math.max(Math.ceil(P),1);C/=z;for(var G=0;G<z;G++)g.push(l(L,C)),L+=C;return g.map(function(O){var H=k(O[0],r,n,y,h,w,E),N=H.x,B=H.y,V=k(O[1],r,n,y,h,w,E),q=V.x,te=V.y,K=k(O[2],r,n,y,h,w,E);return{x1:N,y1:B,x2:q,y2:te,x:K.x,y:K.y}})}},1750:function(ee,D,e){var M=e(95616),k=e(65185),l=e(29988),T=e(89546),b=e(32791);ee.exports=function(d){if(Array.isArray(d)&&d.length===1&&typeof d[0]=="string"&&(d=d[0]),typeof d=="string"&&(b(T(d),"String is not an SVG path."),d=M(d)),b(Array.isArray(d),"Argument should be a string or an array of path segments."),d=k(d),!(d=l(d)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,i=d.length;t<i;t++)for(var r=d[t].slice(1),n=0;n<r.length;n+=2)r[n+0]<s[0]&&(s[0]=r[n+0]),r[n+1]<s[1]&&(s[1]=r[n+1]),r[n+0]>s[2]&&(s[2]=r[n+0]),r[n+1]>s[3]&&(s[3]=r[n+1]);return s}},29988:function(ee,D,e){ee.exports=function(T){for(var b,d=[],s=0,t=0,i=0,r=0,n=null,o=null,a=0,u=0,p=0,c=T.length;p<c;p++){var x=T[p],g=x[0];switch(g){case"M":i=x[1],r=x[2];break;case"A":var h=M({px:a,py:u,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!h.length)continue;for(var y,v=0;v<h.length;v++)x=["C",(y=h[v]).x1,y.y1,y.x2,y.y2,y.x,y.y],v<h.length-1&&d.push(x);break;case"S":var m=a,_=u;b!="C"&&b!="S"||(m+=m-s,_+=_-t),x=["C",m,_,x[1],x[2],x[3],x[4]];break;case"T":b=="Q"||b=="T"?(n=2*a-n,o=2*u-o):(n=a,o=u),x=l(a,u,n,o,x[1],x[2]);break;case"Q":n=x[1],o=x[2],x=l(a,u,x[1],x[2],x[3],x[4]);break;case"L":x=k(a,u,x[1],x[2]);break;case"H":x=k(a,u,x[1],u);break;case"V":x=k(a,u,a,x[1]);break;case"Z":x=k(a,u,i,r)}b=g,a=x[x.length-2],u=x[x.length-1],x.length>4?(s=x[x.length-4],t=x[x.length-3]):(s=a,t=u),d.push(x)}return d};var M=e(7095);function k(T,b,d,s){return["C",T,b,d,s,d,s]}function l(T,b,d,s,t,i){return["C",T/3+.6666666666666666*d,b/3+.6666666666666666*s,t/3+.6666666666666666*d,i/3+.6666666666666666*s,t,i]}},82019:function(ee,D,e){var M,k=e(1750),l=e(95616),T=e(31457),b=e(89546),d=e(44781),s=document.createElement("canvas"),t=s.getContext("2d");ee.exports=function(i,r){if(!b(i))throw Error("Argument should be valid svg path string");var n,o;r||(r={}),r.shape?(n=r.shape[0],o=r.shape[1]):(n=s.width=r.w||r.width||200,o=s.height=r.h||r.height||200);var a=Math.min(n,o),u=r.stroke||0,p=r.viewbox||r.viewBox||k(i),c=[n/(p[2]-p[0]),o/(p[3]-p[1])],x=Math.min(c[0]||0,c[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,n,o),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*n,.5*o),t.scale(x,x),function(){if(M!=null)return M;var y=document.createElement("canvas").getContext("2d");if(y.canvas.width=y.canvas.height=1,!window.Path2D)return M=!1;var v=new Path2D("M0,0h1v1h-1v-1Z");y.fillStyle="black",y.fill(v);var m=y.getImageData(0,0,1,1);return M=m&&m.data&&m.data[3]===255}()){var g=new Path2D(i);t.fill(g),u&&t.stroke(g)}else{var h=l(i);T(t,h),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),d(t,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*a})}},84267:function(ee,D,e){var M;(function(k){var l=/^\s+/,T=/\s+$/,b=0,d=k.round,s=k.min,t=k.max,i=k.random;function r(W,Q){if(Q=Q||{},(W=W||"")instanceof r)return W;if(!(this instanceof r))return new r(W,Q);var ne=function(re){var ae,ue,pe,ge={r:0,g:0,b:0},_e=1,me=null,ve=null,Oe=null,Me=!1,Te=!1;return typeof re=="string"&&(re=function(se){se=se.replace(l,"").replace(T,"").toLowerCase();var oe,he=!1;if(L[se])se=L[se],he=!0;else if(se=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(oe=J.rgb.exec(se))?{r:oe[1],g:oe[2],b:oe[3]}:(oe=J.rgba.exec(se))?{r:oe[1],g:oe[2],b:oe[3],a:oe[4]}:(oe=J.hsl.exec(se))?{h:oe[1],s:oe[2],l:oe[3]}:(oe=J.hsla.exec(se))?{h:oe[1],s:oe[2],l:oe[3],a:oe[4]}:(oe=J.hsv.exec(se))?{h:oe[1],s:oe[2],v:oe[3]}:(oe=J.hsva.exec(se))?{h:oe[1],s:oe[2],v:oe[3],a:oe[4]}:(oe=J.hex8.exec(se))?{r:O(oe[1]),g:O(oe[2]),b:O(oe[3]),a:V(oe[4]),format:he?"name":"hex8"}:(oe=J.hex6.exec(se))?{r:O(oe[1]),g:O(oe[2]),b:O(oe[3]),format:he?"name":"hex"}:(oe=J.hex4.exec(se))?{r:O(oe[1]+""+oe[1]),g:O(oe[2]+""+oe[2]),b:O(oe[3]+""+oe[3]),a:V(oe[4]+""+oe[4]),format:he?"name":"hex8"}:!!(oe=J.hex3.exec(se))&&{r:O(oe[1]+""+oe[1]),g:O(oe[2]+""+oe[2]),b:O(oe[3]+""+oe[3]),format:he?"name":"hex"}}(re)),typeof re=="object"&&(Y(re.r)&&Y(re.g)&&Y(re.b)?(ae=re.r,ue=re.g,pe=re.b,ge={r:255*z(ae,255),g:255*z(ue,255),b:255*z(pe,255)},Me=!0,Te=String(re.r).substr(-1)==="%"?"prgb":"rgb"):Y(re.h)&&Y(re.s)&&Y(re.v)?(me=N(re.s),ve=N(re.v),ge=function(se,oe,he){se=6*z(se,360),oe=z(oe,100),he=z(he,100);var Ee=k.floor(se),ke=se-Ee,be=he*(1-oe),Ie=he*(1-ke*oe),Fe=he*(1-(1-ke)*oe),ce=Ee%6;return{r:255*[he,Ie,be,be,Fe,he][ce],g:255*[Fe,he,he,Ie,be,be][ce],b:255*[be,be,Fe,he,he,Ie][ce]}}(re.h,me,ve),Me=!0,Te="hsv"):Y(re.h)&&Y(re.s)&&Y(re.l)&&(me=N(re.s),Oe=N(re.l),ge=function(se,oe,he){var Ee,ke,be;function Ie(we,ye,Ce){return Ce<0&&(Ce+=1),Ce>1&&(Ce-=1),Ce<1/6?we+6*(ye-we)*Ce:Ce<.5?ye:Ce<2/3?we+(ye-we)*(2/3-Ce)*6:we}if(se=z(se,360),oe=z(oe,100),he=z(he,100),oe===0)Ee=ke=be=he;else{var Fe=he<.5?he*(1+oe):he+oe-he*oe,ce=2*he-Fe;Ee=Ie(ce,Fe,se+1/3),ke=Ie(ce,Fe,se),be=Ie(ce,Fe,se-1/3)}return{r:255*Ee,g:255*ke,b:255*be}}(re.h,me,Oe),Me=!0,Te="hsl"),re.hasOwnProperty("a")&&(_e=re.a)),_e=P(_e),{ok:Me,format:re.format||Te,r:s(255,t(ge.r,0)),g:s(255,t(ge.g,0)),b:s(255,t(ge.b,0)),a:_e}}(W);this._originalInput=W,this._r=ne.r,this._g=ne.g,this._b=ne.b,this._a=ne.a,this._roundA=d(100*this._a)/100,this._format=Q.format||ne.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=d(this._r)),this._g<1&&(this._g=d(this._g)),this._b<1&&(this._b=d(this._b)),this._ok=ne.ok,this._tc_id=b++}function n(W,Q,ne){W=z(W,255),Q=z(Q,255),ne=z(ne,255);var re,ae,ue=t(W,Q,ne),pe=s(W,Q,ne),ge=(ue+pe)/2;if(ue==pe)re=ae=0;else{var _e=ue-pe;switch(ae=ge>.5?_e/(2-ue-pe):_e/(ue+pe),ue){case W:re=(Q-ne)/_e+(Q<ne?6:0);break;case Q:re=(ne-W)/_e+2;break;case ne:re=(W-Q)/_e+4}re/=6}return{h:re,s:ae,l:ge}}function o(W,Q,ne){W=z(W,255),Q=z(Q,255),ne=z(ne,255);var re,ae,ue=t(W,Q,ne),pe=s(W,Q,ne),ge=ue,_e=ue-pe;if(ae=ue===0?0:_e/ue,ue==pe)re=0;else{switch(ue){case W:re=(Q-ne)/_e+(Q<ne?6:0);break;case Q:re=(ne-W)/_e+2;break;case ne:re=(W-Q)/_e+4}re/=6}return{h:re,s:ae,v:ge}}function a(W,Q,ne,re){var ae=[H(d(W).toString(16)),H(d(Q).toString(16)),H(d(ne).toString(16))];return re&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function u(W,Q,ne,re){return[H(B(re)),H(d(W).toString(16)),H(d(Q).toString(16)),H(d(ne).toString(16))].join("")}function p(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toHsl();return ne.s-=Q/100,ne.s=G(ne.s),r(ne)}function c(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toHsl();return ne.s+=Q/100,ne.s=G(ne.s),r(ne)}function x(W){return r(W).desaturate(100)}function g(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toHsl();return ne.l+=Q/100,ne.l=G(ne.l),r(ne)}function h(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toRgb();return ne.r=t(0,s(255,ne.r-d(-Q/100*255))),ne.g=t(0,s(255,ne.g-d(-Q/100*255))),ne.b=t(0,s(255,ne.b-d(-Q/100*255))),r(ne)}function y(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toHsl();return ne.l-=Q/100,ne.l=G(ne.l),r(ne)}function v(W,Q){var ne=r(W).toHsl(),re=(ne.h+Q)%360;return ne.h=re<0?360+re:re,r(ne)}function m(W){var Q=r(W).toHsl();return Q.h=(Q.h+180)%360,r(Q)}function _(W){var Q=r(W).toHsl(),ne=Q.h;return[r(W),r({h:(ne+120)%360,s:Q.s,l:Q.l}),r({h:(ne+240)%360,s:Q.s,l:Q.l})]}function f(W){var Q=r(W).toHsl(),ne=Q.h;return[r(W),r({h:(ne+90)%360,s:Q.s,l:Q.l}),r({h:(ne+180)%360,s:Q.s,l:Q.l}),r({h:(ne+270)%360,s:Q.s,l:Q.l})]}function S(W){var Q=r(W).toHsl(),ne=Q.h;return[r(W),r({h:(ne+72)%360,s:Q.s,l:Q.l}),r({h:(ne+216)%360,s:Q.s,l:Q.l})]}function w(W,Q,ne){Q=Q||6,ne=ne||30;var re=r(W).toHsl(),ae=360/ne,ue=[r(W)];for(re.h=(re.h-(ae*Q>>1)+720)%360;--Q;)re.h=(re.h+ae)%360,ue.push(r(re));return ue}function E(W,Q){Q=Q||6;for(var ne=r(W).toHsv(),re=ne.h,ae=ne.s,ue=ne.v,pe=[],ge=1/Q;Q--;)pe.push(r({h:re,s:ae,v:ue})),ue=(ue+ge)%1;return pe}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var W=this.toRgb();return(299*W.r+587*W.g+114*W.b)/1e3},getLuminance:function(){var W,Q,ne,re=this.toRgb();return W=re.r/255,Q=re.g/255,ne=re.b/255,.2126*(W<=.03928?W/12.92:k.pow((W+.055)/1.055,2.4))+.7152*(Q<=.03928?Q/12.92:k.pow((Q+.055)/1.055,2.4))+.0722*(ne<=.03928?ne/12.92:k.pow((ne+.055)/1.055,2.4))},setAlpha:function(W){return this._a=P(W),this._roundA=d(100*this._a)/100,this},toHsv:function(){var W=o(this._r,this._g,this._b);return{h:360*W.h,s:W.s,v:W.v,a:this._a}},toHsvString:function(){var W=o(this._r,this._g,this._b),Q=d(360*W.h),ne=d(100*W.s),re=d(100*W.v);return this._a==1?"hsv("+Q+", "+ne+"%, "+re+"%)":"hsva("+Q+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHsl:function(){var W=n(this._r,this._g,this._b);return{h:360*W.h,s:W.s,l:W.l,a:this._a}},toHslString:function(){var W=n(this._r,this._g,this._b),Q=d(360*W.h),ne=d(100*W.s),re=d(100*W.l);return this._a==1?"hsl("+Q+", "+ne+"%, "+re+"%)":"hsla("+Q+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHex:function(W){return a(this._r,this._g,this._b,W)},toHexString:function(W){return"#"+this.toHex(W)},toHex8:function(W){return function(Q,ne,re,ae,ue){var pe=[H(d(Q).toString(16)),H(d(ne).toString(16)),H(d(re).toString(16)),H(B(ae))];return ue&&pe[0].charAt(0)==pe[0].charAt(1)&&pe[1].charAt(0)==pe[1].charAt(1)&&pe[2].charAt(0)==pe[2].charAt(1)&&pe[3].charAt(0)==pe[3].charAt(1)?pe[0].charAt(0)+pe[1].charAt(0)+pe[2].charAt(0)+pe[3].charAt(0):pe.join("")}(this._r,this._g,this._b,this._a,W)},toHex8String:function(W){return"#"+this.toHex8(W)},toRgb:function(){return{r:d(this._r),g:d(this._g),b:d(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+d(this._r)+", "+d(this._g)+", "+d(this._b)+")":"rgba("+d(this._r)+", "+d(this._g)+", "+d(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:d(100*z(this._r,255))+"%",g:d(100*z(this._g,255))+"%",b:d(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+d(100*z(this._r,255))+"%, "+d(100*z(this._g,255))+"%, "+d(100*z(this._b,255))+"%)":"rgba("+d(100*z(this._r,255))+"%, "+d(100*z(this._g,255))+"%, "+d(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[a(this._r,this._g,this._b,!0)]||!1)},toFilter:function(W){var Q="#"+u(this._r,this._g,this._b,this._a),ne=Q,re=this._gradientType?"GradientType = 1, ":"";if(W){var ae=r(W);ne="#"+u(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+re+"startColorstr="+Q+",endColorstr="+ne+")"},toString:function(W){var Q=!!W;W=W||this._format;var ne=!1,re=this._a<1&&this._a>=0;return Q||!re||W!=="hex"&&W!=="hex6"&&W!=="hex3"&&W!=="hex4"&&W!=="hex8"&&W!=="name"?(W==="rgb"&&(ne=this.toRgbString()),W==="prgb"&&(ne=this.toPercentageRgbString()),W!=="hex"&&W!=="hex6"||(ne=this.toHexString()),W==="hex3"&&(ne=this.toHexString(!0)),W==="hex4"&&(ne=this.toHex8String(!0)),W==="hex8"&&(ne=this.toHex8String()),W==="name"&&(ne=this.toName()),W==="hsl"&&(ne=this.toHslString()),W==="hsv"&&(ne=this.toHsvString()),ne||this.toHexString()):W==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(W,Q){var ne=W.apply(null,[this].concat([].slice.call(Q)));return this._r=ne._r,this._g=ne._g,this._b=ne._b,this.setAlpha(ne._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(h,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(W,Q){return W.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(f,arguments)}},r.fromRatio=function(W,Q){if(typeof W=="object"){var ne={};for(var re in W)W.hasOwnProperty(re)&&(ne[re]=re==="a"?W[re]:N(W[re]));W=ne}return r(W,Q)},r.equals=function(W,Q){return!(!W||!Q)&&r(W).toRgbString()==r(Q).toRgbString()},r.random=function(){return r.fromRatio({r:i(),g:i(),b:i()})},r.mix=function(W,Q,ne){ne=ne===0?0:ne||50;var re=r(W).toRgb(),ae=r(Q).toRgb(),ue=ne/100;return r({r:(ae.r-re.r)*ue+re.r,g:(ae.g-re.g)*ue+re.g,b:(ae.b-re.b)*ue+re.b,a:(ae.a-re.a)*ue+re.a})},r.readability=function(W,Q){var ne=r(W),re=r(Q);return(k.max(ne.getLuminance(),re.getLuminance())+.05)/(k.min(ne.getLuminance(),re.getLuminance())+.05)},r.isReadable=function(W,Q,ne){var re,ae,ue,pe,ge,_e=r.readability(W,Q);switch(ae=!1,(ue=ne,(pe=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&pe!=="AAA"&&(pe="AA"),(ge=(ue.size||"small").toLowerCase())!=="small"&&ge!=="large"&&(ge="small"),re={level:pe,size:ge}).level+re.size){case"AAsmall":case"AAAlarge":ae=_e>=4.5;break;case"AAlarge":ae=_e>=3;break;case"AAAsmall":ae=_e>=7}return ae},r.mostReadable=function(W,Q,ne){var re,ae,ue,pe,ge=null,_e=0;ae=(ne=ne||{}).includeFallbackColors,ue=ne.level,pe=ne.size;for(var me=0;me<Q.length;me++)(re=r.readability(W,Q[me]))>_e&&(_e=re,ge=r(Q[me]));return r.isReadable(W,ge,{level:ue,size:pe})||!ae?ge:(ne.includeFallbackColors=!1,r.mostReadable(W,["#fff","#000"],ne))};var L=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=r.hexNames=function(W){var Q={};for(var ne in W)W.hasOwnProperty(ne)&&(Q[W[ne]]=ne);return Q}(L);function P(W){return W=parseFloat(W),(isNaN(W)||W<0||W>1)&&(W=1),W}function z(W,Q){(function(re){return typeof re=="string"&&re.indexOf(".")!=-1&&parseFloat(re)===1})(W)&&(W="100%");var ne=function(re){return typeof re=="string"&&re.indexOf("%")!=-1}(W);return W=s(Q,t(0,parseFloat(W))),ne&&(W=parseInt(W*Q,10)/100),k.abs(W-Q)<1e-6?1:W%Q/parseFloat(Q)}function G(W){return s(1,t(0,W))}function O(W){return parseInt(W,16)}function H(W){return W.length==1?"0"+W:""+W}function N(W){return W<=1&&(W=100*W+"%"),W}function B(W){return k.round(255*parseFloat(W)).toString(16)}function V(W){return O(W)/255}var q,te,K,J=(te="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",K="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+K),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+K),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+K),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Y(W){return!!J.CSS_UNIT.exec(W)}ee.exports?ee.exports=r:(M=(function(){return r}).call(D,e,D,ee))===void 0||(ee.exports=M)})(Math)},57060:function(ee){ee.exports=e,ee.exports.float32=ee.exports.float=e,ee.exports.fract32=ee.exports.fract=function(M,k){if(M.length){if(M instanceof Float32Array)return new Float32Array(M.length);k instanceof Float32Array||(k=e(M));for(var l=0,T=k.length;l<T;l++)k[l]=M[l]-k[l];return k}return e(M-e(M))};var D=new Float32Array(1);function e(M){return M.length?M instanceof Float32Array?M:new Float32Array(M):(D[0]=M,D[0])}},75686:function(ee,D,e){var M=e(25677);ee.exports=T;var k=96;function l(b,d){var s=M(getComputedStyle(b).getPropertyValue(d));return s[0]*T(s[1],b)}function T(b,d){switch(d=d||document.body,b=(b||"px").trim().toLowerCase(),d!==window&&d!==document||(d=document.body),b){case"%":return d.clientHeight/100;case"ch":case"ex":return function(s,t){var i=document.createElement("div");i.style["font-size"]="128"+s,t.appendChild(i);var r=l(i,"font-size")/128;return t.removeChild(i),r}(b,d);case"em":return l(d,"font-size");case"rem":return l(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},96892:function(ee,D,e){function M(T){return T}function k(T,b){return typeof b=="string"&&(b=T.objects[b]),b.type==="GeometryCollection"?{type:"FeatureCollection",features:b.geometries.map(function(d){return l(T,d)})}:l(T,b)}function l(T,b){var d=b.id,s=b.bbox,t=b.properties==null?{}:b.properties,i=function(r,n){var o=function(h){if(h==null)return M;var y,v,m=h.scale[0],_=h.scale[1],f=h.translate[0],S=h.translate[1];return function(w,E){E||(y=v=0);var L=2,C=w.length,P=new Array(C);for(P[0]=(y+=w[0])*m+f,P[1]=(v+=w[1])*_+S;L<C;)P[L]=w[L],++L;return P}}(r.transform),a=r.arcs;function u(h,y){y.length&&y.pop();for(var v=a[h<0?~h:h],m=0,_=v.length;m<_;++m)y.push(o(v[m],m));h<0&&function(f,S){for(var w,E=f.length,L=E-S;L<--E;)w=f[L],f[L++]=f[E],f[E]=w}(y,_)}function p(h){return o(h)}function c(h){for(var y=[],v=0,m=h.length;v<m;++v)u(h[v],y);return y.length<2&&y.push(y[0]),y}function x(h){for(var y=c(h);y.length<4;)y.push(y[0]);return y}function g(h){return h.map(x)}return function h(y){var v,m=y.type;switch(m){case"GeometryCollection":return{type:m,geometries:y.geometries.map(h)};case"Point":v=p(y.coordinates);break;case"MultiPoint":v=y.coordinates.map(p);break;case"LineString":v=c(y.arcs);break;case"MultiLineString":v=y.arcs.map(c);break;case"Polygon":v=g(y.arcs);break;case"MultiPolygon":v=y.arcs.map(g);break;default:return null}return{type:m,coordinates:v}}(n)}(T,b);return d==null&&s==null?{type:"Feature",properties:t,geometry:i}:s==null?{type:"Feature",id:d,properties:t,geometry:i}:{type:"Feature",id:d,bbox:s,properties:t,geometry:i}}e.d(D,{zL:function(){return k}})},73116:function(ee,D,e){var M=e(24511);ee.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!M(k)}},69190:function(ee,D,e){var M=e(24582),k=e(47403),l=e(9234),T=e(6048),b=function(d,s){return d.replace("%v",T(s))};ee.exports=function(d,s,t){if(!k(t))throw new TypeError(b(s,d));if(!M(d)){if("default"in t)return t.default;if(t.isOptional)return null}var i=l(t.errorMessage);throw M(i)||(i=s),new TypeError(b(i,d))}},18497:function(ee){ee.exports=function(D){try{return D.toString()}catch{try{return String(D)}catch{return null}}}},6048:function(ee,D,e){var M=e(18497),k=/[\n\r\u2028\u2029]/g;ee.exports=function(l){var T=M(l);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+""),T=T.replace(k,function(b){switch(b){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function(ee,D,e){var M=e(24582),k={object:!0,function:!0,undefined:!0};ee.exports=function(l){return!!M(l)&&hasOwnProperty.call(k,typeof l)}},82527:function(ee,D,e){var M=e(69190),k=e(84985);ee.exports=function(l){return k(l)?l:M(l,"%v is not a plain function",arguments[1])}},84985:function(ee,D,e){var M=e(73116),k=/^\s*class[\s{/}]/,l=Function.prototype.toString;ee.exports=function(T){return!!M(T)&&!k.test(l.call(T))}},24511:function(ee,D,e){var M=e(47403);ee.exports=function(k){if(!M(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},9234:function(ee,D,e){var M=e(24582),k=e(47403),l=Object.prototype.toString;ee.exports=function(T){if(!M(T))return null;if(k(T)){var b=T.toString;if(typeof b!="function"||b===l)return null}try{return""+T}catch{return null}}},10424:function(ee,D,e){var M=e(69190),k=e(24582);ee.exports=function(l){return k(l)?l:M(l,"Cannot use %v",arguments[1])}},24582:function(ee){ee.exports=function(D){return D!=null}},58404:function(ee,D,e){var M=e(13547),k=e(12129),l=e(12856).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",d=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var t=s.DATA,i=s.BUFFER;function r(S){if(S){var w=S.length||S.byteLength,E=M.log2(w);t[E].push(S)}}function n(S){S=M.nextPow2(S);var w=M.log2(S),E=t[w];return E.length>0?E.pop():new ArrayBuffer(S)}function o(S){return new Uint8Array(n(S),0,S)}function a(S){return new Uint16Array(n(2*S),0,S)}function u(S){return new Uint32Array(n(4*S),0,S)}function p(S){return new Int8Array(n(S),0,S)}function c(S){return new Int16Array(n(2*S),0,S)}function x(S){return new Int32Array(n(4*S),0,S)}function g(S){return new Float32Array(n(4*S),0,S)}function h(S){return new Float64Array(n(8*S),0,S)}function y(S){return T?new Uint8ClampedArray(n(S),0,S):o(S)}function v(S){return b?new BigUint64Array(n(8*S),0,S):null}function m(S){return d?new BigInt64Array(n(8*S),0,S):null}function _(S){return new DataView(n(S),0,S)}function f(S){S=M.nextPow2(S);var w=M.log2(S),E=i[w];return E.length>0?E.pop():new l(S)}D.free=function(S){if(l.isBuffer(S))i[M.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var w=S.length||S.byteLength,E=0|M.log2(w);t[E].push(S)}},D.freeUint8=D.freeUint16=D.freeUint32=D.freeBigUint64=D.freeInt8=D.freeInt16=D.freeInt32=D.freeBigInt64=D.freeFloat32=D.freeFloat=D.freeFloat64=D.freeDouble=D.freeUint8Clamped=D.freeDataView=function(S){r(S.buffer)},D.freeArrayBuffer=r,D.freeBuffer=function(S){i[M.log2(S.length)].push(S)},D.malloc=function(S,w){if(w===void 0||w==="arraybuffer")return n(S);switch(w){case"uint8":return o(S);case"uint16":return a(S);case"uint32":return u(S);case"int8":return p(S);case"int16":return c(S);case"int32":return x(S);case"float":case"float32":return g(S);case"double":case"float64":return h(S);case"uint8_clamped":return y(S);case"bigint64":return m(S);case"biguint64":return v(S);case"buffer":return f(S);case"data":case"dataview":return _(S);default:return null}return null},D.mallocArrayBuffer=n,D.mallocUint8=o,D.mallocUint16=a,D.mallocUint32=u,D.mallocInt8=p,D.mallocInt16=c,D.mallocInt32=x,D.mallocFloat32=D.mallocFloat=g,D.mallocFloat64=D.mallocDouble=h,D.mallocUint8Clamped=y,D.mallocBigUint64=v,D.mallocBigInt64=m,D.mallocDataView=_,D.mallocBuffer=f,D.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,i[S].length=0}},90448:function(ee){var D=/[\'\"]/;ee.exports=function(e){return e?(D.test(e.charAt(0))&&(e=e.substr(1)),D.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},93447:function(ee){ee.exports=function(D,e,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var k=0,l=M.length;k<l;k++){var T=M[k];for(var b in T)if((e[b]===void 0||Array.isArray(e[b])||D[b]!==e[b])&&b in e){var d;if(T[b]===!0)d=e[b];else if(T[b]===!1||typeof T[b]=="function"&&(d=T[b](e[b],D,e))===void 0)continue;D[b]=d}}return D}},20588:function(ee,D,e){function M(k){try{if(!e.g.localStorage)return!1}catch{return!1}var l=e.g.localStorage[k];return l!=null&&String(l).toLowerCase()==="true"}ee.exports=function(k,l){if(M("noDeprecation"))return k;var T=!1;return function(){if(!T){if(M("throwDeprecation"))throw new Error(l);M("traceDeprecation")?console.trace(l):console.warn(l),T=!0}return k.apply(this,arguments)}}},45920:function(ee){ee.exports=function(D){return D&&typeof D=="object"&&typeof D.copy=="function"&&typeof D.fill=="function"&&typeof D.readUInt8=="function"}},4936:function(ee,D,e){var M=e(47216),k=e(65481),l=e(21099),T=e(9187);function b(z){return z.call.bind(z)}var d=typeof BigInt<"u",s=typeof Symbol<"u",t=b(Object.prototype.toString),i=b(Number.prototype.valueOf),r=b(String.prototype.valueOf),n=b(Boolean.prototype.valueOf);if(d)var o=b(BigInt.prototype.valueOf);if(s)var a=b(Symbol.prototype.valueOf);function u(z,G){if(typeof z!="object")return!1;try{return G(z),!0}catch{return!1}}function p(z){return t(z)==="[object Map]"}function c(z){return t(z)==="[object Set]"}function x(z){return t(z)==="[object WeakMap]"}function g(z){return t(z)==="[object WeakSet]"}function h(z){return t(z)==="[object ArrayBuffer]"}function y(z){return typeof ArrayBuffer<"u"&&(h.working?h(z):z instanceof ArrayBuffer)}function v(z){return t(z)==="[object DataView]"}function m(z){return typeof DataView<"u"&&(v.working?v(z):z instanceof DataView)}D.isArgumentsObject=M,D.isGeneratorFunction=k,D.isTypedArray=T,D.isPromise=function(z){return typeof Promise<"u"&&z instanceof Promise||z!==null&&typeof z=="object"&&typeof z.then=="function"&&typeof z.catch=="function"},D.isArrayBufferView=function(z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(z):T(z)||m(z)},D.isUint8Array=function(z){return l(z)==="Uint8Array"},D.isUint8ClampedArray=function(z){return l(z)==="Uint8ClampedArray"},D.isUint16Array=function(z){return l(z)==="Uint16Array"},D.isUint32Array=function(z){return l(z)==="Uint32Array"},D.isInt8Array=function(z){return l(z)==="Int8Array"},D.isInt16Array=function(z){return l(z)==="Int16Array"},D.isInt32Array=function(z){return l(z)==="Int32Array"},D.isFloat32Array=function(z){return l(z)==="Float32Array"},D.isFloat64Array=function(z){return l(z)==="Float64Array"},D.isBigInt64Array=function(z){return l(z)==="BigInt64Array"},D.isBigUint64Array=function(z){return l(z)==="BigUint64Array"},p.working=typeof Map<"u"&&p(new Map),D.isMap=function(z){return typeof Map<"u"&&(p.working?p(z):z instanceof Map)},c.working=typeof Set<"u"&&c(new Set),D.isSet=function(z){return typeof Set<"u"&&(c.working?c(z):z instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),D.isWeakMap=function(z){return typeof WeakMap<"u"&&(x.working?x(z):z instanceof WeakMap)},g.working=typeof WeakSet<"u"&&g(new WeakSet),D.isWeakSet=function(z){return g(z)},h.working=typeof ArrayBuffer<"u"&&h(new ArrayBuffer),D.isArrayBuffer=y,v.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&v(new DataView(new ArrayBuffer(1),0,1)),D.isDataView=m;var _=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function f(z){return t(z)==="[object SharedArrayBuffer]"}function S(z){return _!==void 0&&(f.working===void 0&&(f.working=f(new _)),f.working?f(z):z instanceof _)}function w(z){return u(z,i)}function E(z){return u(z,r)}function L(z){return u(z,n)}function C(z){return d&&u(z,o)}function P(z){return s&&u(z,a)}D.isSharedArrayBuffer=S,D.isAsyncFunction=function(z){return t(z)==="[object AsyncFunction]"},D.isMapIterator=function(z){return t(z)==="[object Map Iterator]"},D.isSetIterator=function(z){return t(z)==="[object Set Iterator]"},D.isGeneratorObject=function(z){return t(z)==="[object Generator]"},D.isWebAssemblyCompiledModule=function(z){return t(z)==="[object WebAssembly.Module]"},D.isNumberObject=w,D.isStringObject=E,D.isBooleanObject=L,D.isBigIntObject=C,D.isSymbolObject=P,D.isBoxedPrimitive=function(z){return w(z)||E(z)||L(z)||C(z)||P(z)},D.isAnyArrayBuffer=function(z){return typeof Uint8Array<"u"&&(y(z)||S(z))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(z){Object.defineProperty(D,z,{enumerable:!1,value:function(){throw new Error(z+" is not supported in userland")}})})},43827:function(ee,D,e){var M=e(90386),k=Object.getOwnPropertyDescriptors||function(P){for(var z=Object.keys(P),G={},O=0;O<z.length;O++)G[z[O]]=Object.getOwnPropertyDescriptor(P,z[O]);return G},l=/%[sdj%]/g;D.format=function(P){if(!x(P)){for(var z=[],G=0;G<arguments.length;G++)z.push(s(arguments[G]));return z.join(" ")}G=1;for(var O=arguments,H=O.length,N=String(P).replace(l,function(V){if(V==="%%")return"%";if(G>=H)return V;switch(V){case"%s":return String(O[G++]);case"%d":return Number(O[G++]);case"%j":try{return JSON.stringify(O[G++])}catch{return"[Circular]"}default:return V}}),B=O[G];G<H;B=O[++G])p(B)||!y(B)?N+=" "+B:N+=" "+s(B);return N},D.deprecate=function(P,z){if(M!==void 0&&M.noDeprecation===!0)return P;if(M===void 0)return function(){return D.deprecate(P,z).apply(this,arguments)};var G=!1;return function(){if(!G){if(M.throwDeprecation)throw new Error(z);M.traceDeprecation?console.trace(z):console.error(z),G=!0}return P.apply(this,arguments)}};var T={},b=/^$/;if(M.env.NODE_DEBUG){var d=M.env.NODE_DEBUG;d=d.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+d+"$","i")}function s(P,z){var G={seen:[],stylize:i};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),u(z)?G.showHidden=z:z&&D._extend(G,z),g(G.showHidden)&&(G.showHidden=!1),g(G.depth)&&(G.depth=2),g(G.colors)&&(G.colors=!1),g(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=t),r(G,P,G.depth)}function t(P,z){var G=s.styles[z];return G?"\x1B["+s.colors[G][0]+"m"+P+"\x1B["+s.colors[G][1]+"m":P}function i(P,z){return P}function r(P,z,G){if(P.customInspect&&z&&_(z.inspect)&&z.inspect!==D.inspect&&(!z.constructor||z.constructor.prototype!==z)){var O=z.inspect(G,P);return x(O)||(O=r(P,O,G)),O}var H=function(Y,W){if(g(W))return Y.stylize("undefined","undefined");if(x(W)){var Q="'"+JSON.stringify(W).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Y.stylize(Q,"string")}return c(W)?Y.stylize(""+W,"number"):u(W)?Y.stylize(""+W,"boolean"):p(W)?Y.stylize("null","null"):void 0}(P,z);if(H)return H;var N=Object.keys(z),B=function(Y){var W={};return Y.forEach(function(Q,ne){W[Q]=!0}),W}(N);if(P.showHidden&&(N=Object.getOwnPropertyNames(z)),m(z)&&(N.indexOf("message")>=0||N.indexOf("description")>=0))return n(z);if(N.length===0){if(_(z)){var V=z.name?": "+z.name:"";return P.stylize("[Function"+V+"]","special")}if(h(z))return P.stylize(RegExp.prototype.toString.call(z),"regexp");if(v(z))return P.stylize(Date.prototype.toString.call(z),"date");if(m(z))return n(z)}var q,te="",K=!1,J=["{","}"];return a(z)&&(K=!0,J=["[","]"]),_(z)&&(te=" [Function"+(z.name?": "+z.name:"")+"]"),h(z)&&(te=" "+RegExp.prototype.toString.call(z)),v(z)&&(te=" "+Date.prototype.toUTCString.call(z)),m(z)&&(te=" "+n(z)),N.length!==0||K&&z.length!=0?G<0?h(z)?P.stylize(RegExp.prototype.toString.call(z),"regexp"):P.stylize("[Object]","special"):(P.seen.push(z),q=K?function(Y,W,Q,ne,re){for(var ae=[],ue=0,pe=W.length;ue<pe;++ue)E(W,String(ue))?ae.push(o(Y,W,Q,ne,String(ue),!0)):ae.push("");return re.forEach(function(ge){ge.match(/^\d+$/)||ae.push(o(Y,W,Q,ne,ge,!0))}),ae}(P,z,G,B,N):N.map(function(Y){return o(P,z,G,B,Y,K)}),P.seen.pop(),function(Y,W,Q){return Y.reduce(function(ne,re){return re.indexOf(`
`),ne+re.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Q[0]+(W===""?"":W+`
 `)+" "+Y.join(`,
  `)+" "+Q[1]:Q[0]+W+" "+Y.join(", ")+" "+Q[1]}(q,te,J)):J[0]+te+J[1]}function n(P){return"["+Error.prototype.toString.call(P)+"]"}function o(P,z,G,O,H,N){var B,V,q;if((q=Object.getOwnPropertyDescriptor(z,H)||{value:z[H]}).get?V=q.set?P.stylize("[Getter/Setter]","special"):P.stylize("[Getter]","special"):q.set&&(V=P.stylize("[Setter]","special")),E(O,H)||(B="["+H+"]"),V||(P.seen.indexOf(q.value)<0?(V=p(G)?r(P,q.value,null):r(P,q.value,G-1)).indexOf(`
`)>-1&&(V=N?V.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):`
`+V.split(`
`).map(function(te){return"   "+te}).join(`
`)):V=P.stylize("[Circular]","special")),g(B)){if(N&&H.match(/^\d+$/))return V;(B=JSON.stringify(""+H)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=P.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=P.stylize(B,"string"))}return B+": "+V}function a(P){return Array.isArray(P)}function u(P){return typeof P=="boolean"}function p(P){return P===null}function c(P){return typeof P=="number"}function x(P){return typeof P=="string"}function g(P){return P===void 0}function h(P){return y(P)&&f(P)==="[object RegExp]"}function y(P){return typeof P=="object"&&P!==null}function v(P){return y(P)&&f(P)==="[object Date]"}function m(P){return y(P)&&(f(P)==="[object Error]"||P instanceof Error)}function _(P){return typeof P=="function"}function f(P){return Object.prototype.toString.call(P)}function S(P){return P<10?"0"+P.toString(10):P.toString(10)}D.debuglog=function(P){if(P=P.toUpperCase(),!T[P])if(b.test(P)){var z=M.pid;T[P]=function(){var G=D.format.apply(D,arguments);console.error("%s %d: %s",P,z,G)}}else T[P]=function(){};return T[P]},D.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},D.types=e(4936),D.isArray=a,D.isBoolean=u,D.isNull=p,D.isNullOrUndefined=function(P){return P==null},D.isNumber=c,D.isString=x,D.isSymbol=function(P){return typeof P=="symbol"},D.isUndefined=g,D.isRegExp=h,D.types.isRegExp=h,D.isObject=y,D.isDate=v,D.types.isDate=v,D.isError=m,D.types.isNativeError=m,D.isFunction=_,D.isPrimitive=function(P){return P===null||typeof P=="boolean"||typeof P=="number"||typeof P=="string"||typeof P=="symbol"||P===void 0},D.isBuffer=e(45920);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(P,z){return Object.prototype.hasOwnProperty.call(P,z)}D.log=function(){var P,z;console.log("%s - %s",(z=[S((P=new Date).getHours()),S(P.getMinutes()),S(P.getSeconds())].join(":"),[P.getDate(),w[P.getMonth()],z].join(" ")),D.format.apply(D,arguments))},D.inherits=e(42018),D._extend=function(P,z){if(!z||!y(z))return P;for(var G=Object.keys(z),O=G.length;O--;)P[G[O]]=z[G[O]];return P};var L=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function C(P,z){if(!P){var G=new Error("Promise was rejected with a falsy value");G.reason=P,P=G}return z(P)}D.promisify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');if(L&&P[L]){var z;if(typeof(z=P[L])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(z,L,{value:z,enumerable:!1,writable:!1,configurable:!0}),z}function z(){for(var G,O,H=new Promise(function(V,q){G=V,O=q}),N=[],B=0;B<arguments.length;B++)N.push(arguments[B]);N.push(function(V,q){V?O(V):G(q)});try{P.apply(this,N)}catch(V){O(V)}return H}return Object.setPrototypeOf(z,Object.getPrototypeOf(P)),L&&Object.defineProperty(z,L,{value:z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(z,k(P))},D.promisify.custom=L,D.callbackify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');function z(){for(var G=[],O=0;O<arguments.length;O++)G.push(arguments[O]);var H=G.pop();if(typeof H!="function")throw new TypeError("The last argument must be of type Function");var N=this,B=function(){return H.apply(N,arguments)};P.apply(this,G).then(function(V){M.nextTick(B.bind(null,null,V))},function(V){M.nextTick(C.bind(null,V,B))})}return Object.setPrototypeOf(z,Object.getPrototypeOf(P)),Object.defineProperties(z,k(P)),z}},40372:function(ee,D,e){var M=e(86249);ee.exports=function(k){return M("webgl",k)}},21099:function(ee,D,e){var M=e(31353),k=e(72077),l=e(6614),T=e(40383),b=l("Object.prototype.toString"),d=e(84543)(),s=typeof globalThis>"u"?e.g:globalThis,t=k(),i=l("String.prototype.slice"),r={},n=Object.getPrototypeOf;d&&T&&n&&M(t,function(a){if(typeof s[a]=="function"){var u=new s[a];if(Symbol.toStringTag in u){var p=n(u),c=T(p,Symbol.toStringTag);if(!c){var x=n(p);c=T(x,Symbol.toStringTag)}r[a]=c.get}}});var o=e(9187);ee.exports=function(a){return!!o(a)&&(d&&Symbol.toStringTag in a?function(u){var p=!1;return M(r,function(c,x){if(!p)try{var g=c.call(u);g===x&&(p=g)}catch{}}),p}(a):i(b(a),8,-1))}},3961:function(ee,D,e){var M=e(63489),k=e(56131),l=M.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,o){if(typeof n=="string"){var a=n.match(d);return a?a[0]:""}var u=this._validateYear(n),p=n.month(),c=""+this.toChineseMonth(u,p);return o&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,p)&&(c+="i"),c},monthNames:function(n){if(typeof n=="string"){var o=n.match(s);return o?o[0]:""}var a=this._validateYear(n),u=n.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(a,u)-1];return this.isIntercalaryMonth(a,u)&&(p=""+p),p},monthNamesShort:function(n){if(typeof n=="string"){var o=n.match(t);return o?o[0]:""}var a=this._validateYear(n),u=n.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(a,u)-1];return this.isIntercalaryMonth(a,u)&&(p=""+p),p},parseMonth:function(n,o){n=this._validateYear(n);var a,u=parseInt(o);if(isNaN(u))o[0]===""&&(a=!0,o=o.substring(1)),o[o.length-1]===""&&(o=o.substring(0,o.length-1)),u=1+["","","","","","","","","","","",""].indexOf(o);else{var p=o[o.length-1];a=p==="i"||p==="I"}return this.toMonthIndex(n,u,a)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,o){if(n.year&&(n=n.year()),typeof n!="number"||n<1888||n>2111)throw o.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,o,a){var u=this.intercalaryMonth(n);if(a&&o!==u||o<1||o>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!a&&o<=u?o-1:o:o-1},toChineseMonth:function(n,o){n.year&&(o=(n=n.year()).month());var a=this.intercalaryMonth(n);if(o<0||o>(a?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return a?o<a?o+1:o:o+1},intercalaryMonth:function(n){return n=this._validateYear(n),i[n-i[0]]>>13},isIntercalaryMonth:function(n,o){n.year&&(o=(n=n.year()).month());var a=this.intercalaryMonth(n);return!!a&&a===o},leapYear:function(n){return this.intercalaryMonth(n)!==0},weekOfYear:function(n,o,a){var u,p=this._validateYear(n,M.local.invalidyear),c=r[p-r[0]],x=c>>9&4095,g=c>>5&15,h=31&c;(u=l.newDate(x,g,h)).add(4-(u.dayOfWeek()||7),"d");var y=this.toJD(n,o,a)-u.toJD();return 1+Math.floor(y/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,o){n.year&&(o=n.month(),n=n.year()),n=this._validateYear(n);var a=i[n-i[0]];if(o>(a>>13?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return a&1<<12-o?30:29},weekDay:function(n,o,a){return(this.dayOfWeek(n,o,a)||7)<6},toJD:function(n,o,a){var u=this._validate(n,c,a,M.local.invalidDate);n=this._validateYear(u.year()),o=u.month(),a=u.day();var p=this.isIntercalaryMonth(n,o),c=this.toChineseMonth(n,o),x=function(g,h,y,v,m){var _,f,S;if(typeof g=="object")f=g,_=h||{};else{var w;if(!(typeof g=="number"&&g>=1888&&g<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof h=="number"&&h>=1&&h<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof y=="number"&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");typeof v=="object"?(w=!1,_=v):(w=!!v,_={}),f={year:g,month:h,day:y,isIntercalary:w}}S=f.day-1;var E,L=i[f.year-i[0]],C=L>>13;E=C&&(f.month>C||f.isIntercalary)?f.month:f.month-1;for(var P=0;P<E;P++)S+=L&1<<12-P?30:29;var z=r[f.year-r[0]],G=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+S);return _.year=G.getFullYear(),_.month=1+G.getMonth(),_.day=G.getDate(),_}(n,c,a,p);return l.toJD(x.year,x.month,x.day)},fromJD:function(n){var o=l.fromJD(n),a=function(p,c,x,g){var h,y;if(typeof p=="object")h=p,y=c||{};else{if(!(typeof p=="number"&&p>=1888&&p<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");h={year:p,month:c,day:x},y={}}var v=r[h.year-r[0]],m=h.year<<9|h.month<<5|h.day;y.year=m>=v?h.year:h.year-1,v=r[y.year-r[0]];var _,f=new Date(v>>9&4095,(v>>5&15)-1,31&v),S=new Date(h.year,h.month-1,h.day);_=Math.round((S-f)/864e5);var w,E=i[y.year-i[0]];for(w=0;w<13;w++){var L=E&1<<12-w?30:29;if(_<L)break;_-=L}var C=E>>13;return!C||w<C?(y.isIntercalary=!1,y.month=1+w):w===C?(y.isIntercalary=!0,y.month=w):(y.isIntercalary=!1,y.month=w),y.day=1+_,y}(o.year(),o.month(),o.day()),u=this.toMonthIndex(a.year,a.month,a.isIntercalary);return this.newDate(a.year,u,a.day)},fromString:function(n){var o=n.match(b),a=this._validateYear(+o[1]),u=+o[2],p=!!o[3],c=this.toMonthIndex(a,u,p),x=+o[4];return this.newDate(a,c,x)},add:function(n,o,a){var u=n.year(),p=n.month(),c=this.isIntercalaryMonth(u,p),x=this.toChineseMonth(u,p),g=Object.getPrototypeOf(T.prototype).add.call(this,n,o,a);if(a==="y"){var h=g.year(),y=g.month(),v=this.isIntercalaryMonth(h,x),m=c&&v?this.toMonthIndex(h,x,!0):this.toMonthIndex(h,x,!1);m!==y&&g.month(m)}return g}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,d=/^\d?\d[iI]?/m,s=/^??[]?/m,t=/^??[]?/m;M.calendars.chinese=T;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(ee,D,e){var M=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new M.baseCalendar,k(l.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((b-Math.floor((b+366)/1461))/365)+1;d<=0&&d--,b=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(d,s,t)}}),M.calendars.coptic=l},86825:function(ee,D,e){var M=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new M.baseCalendar,k(l.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,d,s){return(this._validate(b,d,s,M.local.invalidDate).day()+1)%8},weekDay:function(b,d,s){var t=this.dayOfWeek(b,d,s);return t>=2&&t<=6},extraInfo:function(b,d,s){var t=this._validate(b,d,s,M.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,d,s){var t=this._validate(b,d,s,M.local.invalidDate);return b=t.year()+(t.year()<0?1:0),d=t.month(),(s=t.day())+(d>1?16:0)+(d>2?32*(d-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var d=Math.floor(b/400)+1;b-=400*(d-1),b+=b>15?16:0;var s=Math.floor(b/32)+1,t=b-32*(s-1)+1;return this.newDate(d<=0?d-1:d,s,t)}});var T={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=l},37715:function(ee,D,e){var M=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new M.baseCalendar,k(l.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((b-Math.floor((b+366)/1461))/365)+1;d<=0&&d--,b=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(d,s,t)}}),M.calendars.ethiopian=l},99384:function(ee,D,e){var M=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,d){return b-d*Math.floor(b/d)}l.prototype=new M.baseCalendar,k(l.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(d.year())},_leapYear:function(b){return T(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear).year(),this.toJD(b===-1?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,d){return b.year&&(d=b.month(),b=b.year()),this._validate(b,d,this.minDay,M.local.invalidMonth),d===12&&this.leapYear(b)||d===8&&T(this.daysInYear(b),10)===5?30:d===9&&T(this.daysInYear(b),10)===3?29:this.daysPerMonth[d-1]},weekDay:function(b,d,s){return this.dayOfWeek(b,d,s)!==6},extraInfo:function(b,d,s){var t=this._validate(b,d,s,M.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,d,s){var t=this._validate(b,d,s,M.local.invalidDate);b=t.year(),d=t.month(),s=t.day();var i=b<=0?b+1:b,r=this.jdEpoch+this._delay1(i)+this._delay2(i)+s+1;if(d<7){for(var n=7;n<=this.monthsInYear(b);n++)r+=this.daysInMonth(b,n);for(n=1;n<d;n++)r+=this.daysInMonth(b,n)}else for(n=7;n<d;n++)r+=this.daysInMonth(b,n);return r},_delay1:function(b){var d=Math.floor((235*b-234)/19),s=12084+13753*d,t=29*d+Math.floor(s/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(b){var d=this._delay1(b-1),s=this._delay1(b);return this._delay1(b+1)-s==356?2:s-d==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var d=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(d===-1?1:d+1,7,1);)d++;for(var s=b<this.toJD(d,1,1)?7:1;b>this.toJD(d,s,this.daysInMonth(d,s));)s++;var t=b-this.toJD(d,s,1)+1;return this.newDate(d,s,t)}}),M.calendars.hebrew=l},43805:function(ee,D,e){var M=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new M.baseCalendar,k(l.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===12&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return this.dayOfWeek(T,b,d)!==5},toJD:function(T,b,d){var s=this._validate(T,b,d,M.local.invalidDate);return T=s.year(),b=s.month(),T=T<=0?T+1:T,(d=s.day())+Math.ceil(29.5*(b-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var b=Math.floor((30*(T-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var d=Math.min(12,Math.ceil((T-29-this.toJD(b,1,1))/29.5)+1),s=T-this.toJD(b,d,1)+1;return this.newDate(b,d,s)}}),M.calendars.islamic=l},88874:function(ee,D,e){var M=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new M.baseCalendar,k(l.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,M.local.invalidDate);return T=s.year(),b=s.month(),d=s.day(),T<0&&T++,b<=2&&(T--,b+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(b+1))+d-1524.5},fromJD:function(T){var b=Math.floor(T+.5)+1524,d=Math.floor((b-122.1)/365.25),s=Math.floor(365.25*d),t=Math.floor((b-s)/30.6001),i=t-Math.floor(t<14?1:13),r=d-Math.floor(i>2?4716:4715),n=b-s-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,i,n)}}),M.calendars.julian=l},83290:function(ee,D,e){var M=e(63489),k=e(56131);function l(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}function T(d,s){return d-s*Math.floor(d/s)}function b(d,s){return T(d-1,s)+1}l.prototype=new M.baseCalendar,k(l.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(d){return this._validate(d,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(d){d=this._validate(d,this.minMonth,this.minDay,M.local.invalidYear).year();var s=Math.floor(d/400);return d%=400,d+=d<0?400:0,s+"."+Math.floor(d/20)+"."+d%20},forYear:function(d){if((d=d.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<d.length;t++){var i=parseInt(d[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";s=20*s+i}return s},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(d,s,t){return this._validate(d,s,t,M.local.invalidDate),0},daysInYear:function(d){return this._validate(d,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(d,s){return this._validate(d,s,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(d,s,t){return this._validate(d,s,t,M.local.invalidDate).day()},weekDay:function(d,s,t){return this._validate(d,s,t,M.local.invalidDate),!0},extraInfo:function(d,s,t){var i=this._validate(d,s,t,M.local.invalidDate).toJD(),r=this._toHaab(i),n=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(d){var s=T(8+(d-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(d){return[b(20+(d-=this.jdEpoch),20),b(d+4,13)]},toJD:function(d,s,t){var i=this._validate(d,s,t,M.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(d){d=Math.floor(d)+.5-this.jdEpoch;var s=Math.floor(d/360);d%=360,d+=d<0?360:0;var t=Math.floor(d/20),i=d%20;return this.newDate(s,t,i)}}),M.calendars.mayan=l},29108:function(ee,D,e){var M=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new M.baseCalendar;var T=M.instance("gregorian");k(l.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return T.leapYear(d.year()+(d.year()<1?1:0)+1469)},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var t=this._validate(b,d,s,M.local.invalidMonth);(b=t.year())<0&&b++;for(var i=t.day(),r=1;r<t.month();r++)i+=this.daysPerMonth[r-1];return i+T.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var d=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(d+1,1,1);)d++;for(var s=b-Math.floor(this.toJD(d,1,1)+.5)+1,t=1;s>this.daysInMonth(d,t);)s-=this.daysInMonth(d,t),t++;return this.newDate(d,t,s)}}),M.calendars.nanakshahi=l},55422:function(ee,D,e){var M=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new M.baseCalendar,k(l.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var b=0,d=this.minMonth;d<=12;d++)b+=this.NEPALI_CALENDAR_DATA[T][d];return b},daysInMonth:function(T,b){return T.year&&(b=T.month(),T=T.year()),this._validate(T,b,this.minDay,M.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[T][b]},weekDay:function(T,b,d){return this.dayOfWeek(T,b,d)!==6},toJD:function(T,b,d){var s=this._validate(T,b,d,M.local.invalidDate);T=s.year(),b=s.month(),d=s.day();var t=M.instance(),i=0,r=b,n=T;this._createMissingCalendarData(T);var o=T-(r>9||r===9&&d>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(b!==9&&(i=d,r--);r!==9;)r<=0&&(r=12,n--),i+=this.NEPALI_CALENDAR_DATA[n][r],r--;return b===9?(i+=d-this.NEPALI_CALENDAR_DATA[n][0])<0&&(i+=t.daysInYear(o)):i+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],t.newDate(o,1,1).add(i,"d").toJD()},fromJD:function(T){var b=M.instance().fromJD(T),d=b.year(),s=b.dayOfYear(),t=d+56;this._createMissingCalendarData(t);for(var i=9,r=this.NEPALI_CALENDAR_DATA[t][0],n=this.NEPALI_CALENDAR_DATA[t][i]-r+1;s>n;)++i>12&&(i=1,t++),n+=this.NEPALI_CALENDAR_DATA[t][i];var o=this.NEPALI_CALENDAR_DATA[t][i]-(n-s);return this.newDate(t,i,o)},_createMissingCalendarData:function(T){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var d=T-1;d<T+2;d++)this.NEPALI_CALENDAR_DATA[d]===void 0&&(this.NEPALI_CALENDAR_DATA[d]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=l},94320:function(ee,D,e){var M=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,d){return b-d*Math.floor(b/d)}l.prototype=new M.baseCalendar,k(l.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return 682*((d.year()-(d.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return this.dayOfWeek(b,d,s)!==5},toJD:function(b,d,s){var t=this._validate(b,d,s,M.local.invalidDate);b=t.year(),d=t.month(),s=t.day();var i=b-(b>=0?474:473),r=474+T(i,2820);return s+(d<=7?31*(d-1):30*(d-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(b){var d=(b=Math.floor(b)+.5)-this.toJD(475,1,1),s=Math.floor(d/1029983),t=T(d,1029983),i=2820;if(t!==1029982){var r=Math.floor(t/366),n=T(t,366);i=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var o=i+2820*s+474;o=o<=0?o-1:o;var a=b-this.toJD(o,1,1)+1,u=a<=186?Math.ceil(a/31):Math.ceil((a-6)/30),p=b-this.toJD(o,u,1)+1;return this.newDate(o,u,p)}}),M.calendars.persian=l,M.calendars.jalali=l},31320:function(ee,D,e){var M=e(63489),k=e(56131),l=M.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(d.year()),l.leapYear(b)},weekOfYear:function(b,d,s){var t=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(t.year()),l.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var t=this._validate(b,d,s,M.local.invalidDate);return b=this._t2gYear(t.year()),l.toJD(b,t.month(),t.day())},fromJD:function(b){var d=l.fromJD(b),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),M.calendars.taiwan=T},51367:function(ee,D,e){var M=e(63489),k=e(56131),l=M.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(d.year()),l.leapYear(b)},weekOfYear:function(b,d,s){var t=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(t.year()),l.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var t=this._validate(b,d,s,M.local.invalidDate);return b=this._t2gYear(t.year()),l.toJD(b,t.month(),t.day())},fromJD:function(b){var d=l.fromJD(b),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),M.calendars.thai=T},21457:function(ee,D,e){var M=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new M.baseCalendar,k(l.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return this.daysInYear(d.year())===355},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var d=0,s=1;s<=12;s++)d+=this.daysInMonth(b,s);return d},daysInMonth:function(b,d){for(var s=this._validate(b,d,this.minDay,M.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<T.length;i++){if(T[i]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(b,d,s){return this.dayOfWeek(b,d,s)!==5},toJD:function(b,d,s){var t=this._validate(b,d,s,M.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+T[i-1]-1+24e5-.5},fromJD:function(b){for(var d=b-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>d);t++)s++;var i=s+15292,r=Math.floor((i-1)/12),n=r+1,o=i-12*r,a=d-T[s-1]+1;return this.newDate(n,o,a)},isValid:function(b,d,s){var t=M.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=b.year!=null?b.year:b)>=1276&&b<=1500),t},_validate:function(b,d,s,t){var i=M.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),M.calendars.ummalqura=l;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(ee,D,e){var M=e(56131);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function l(t,i,r,n){if(this._calendar=t,this._year=i,this._month=r,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function d(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}M(k.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase(),i=i||"";var r=this._localCals[t+"-"+i];if(!r&&this.calendars[t]&&(r=new this.calendars[t](i),this._localCals[t+"-"+i]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,i,r,n,o){return(n=(t!=null&&t.year?t.calendar():typeof n=="string"?this.instance(n,o):n)||this.instance()).newDate(t,i,r)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,i){return function(r){for(var n="",o=0;r>0;){var a=r%10;n=(a===0?"":t[a]+i[o])+n,o++,r=Math.floor(r/10)}return n.indexOf(t[1]+i[1])===0&&(n=n.substr(1)),n||t[0]}}}),M(l.prototype,{newDate:function(t,i,r){return this._calendar.newDate(t??this,i,r)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,i,r){if(!this._calendar.isValid(t,i,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),M(b.prototype,{_validateLevel:0,newDate:function(t,i,r){return t==null?this.today():(t.year&&(this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=t.day(),i=t.month(),t=t.year()),new l(this,t,i,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+T(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var r=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,i){var r=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(t,i,r){return this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,i,r){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,r),i,r)},_add:function(t,i,r){if(this._validateLevel++,r==="d"||r==="w"){var n=t.toJD()+i*(r==="w"?this.daysInWeek():1),o=t.calendar().fromJD(n);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var a=t.year()+(r==="y"?i:0),u=t.monthOfYear()+(r==="m"?i:0);o=t.day(),r==="y"?(t.month()!==this.fromMonthOfYear(a,u)&&(u=this.newDate(a,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(a)),o=Math.min(o,this.daysInMonth(a,this.fromMonthOfYear(a,u)))):r==="m"&&(function(c){for(;u<c.minMonth;)a--,u+=c.monthsInYear(a);for(var x=c.monthsInYear(a);u>x-1+c.minMonth;)a++,u-=x,x=c.monthsInYear(a)}(this),o=Math.min(o,this.daysInMonth(a,this.fromMonthOfYear(a,u))));var p=[a,this.fromMonthOfYear(a,u),o];return this._validateLevel--,p}catch(c){throw this._validateLevel--,c}},_correctAdd:function(t,i,r,n){if(!(this.hasYearZero||n!=="y"&&n!=="m"||i[0]!==0&&t.year()>0==i[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],a=r<0?-1:1;i=this._add(t,r*o[0]+a*o[1],o[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,r){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var n=r==="y"?i:t.year(),o=r==="m"?i:t.month(),a=r==="d"?i:t.day();return r!=="y"&&r!=="m"||(a=Math.min(a,this.daysInMonth(n,o))),t.date(n,o,a)},isValid:function(t,i,r){this._validateLevel++;var n=this.hasYearZero||t!==0;if(n){var o=this.newDate(t,i,this.minDay);n=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(o)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(o)}return this._validateLevel--,n},toJSDate:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,i,r,n){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,i,r))throw n.replace(/\{0\}/,this.local.name);var o=this.newDate(t,i,r);return this._validateLevel--,o}catch(a){throw this._validateLevel--,a}}}),d.prototype=new b,M(d.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,r){var n=this.newDate(t,i,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var r=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(t,i,r){return(this.dayOfWeek(t,i,r)||7)<6},toJD:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=n.year(),i=n.month(),r=n.day(),t<0&&t++,i<3&&(i+=12,t--);var o=Math.floor(t/100),a=2-o+Math.floor(o/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+r+a-1524.5},fromJD:function(t){var i=Math.floor(t+.5),r=Math.floor((i-186721625e-2)/36524.25),n=1524+(r=i+1+r-Math.floor(r/4)),o=Math.floor((n-122.1)/365.25),a=Math.floor(365.25*o),u=Math.floor((n-a)/30.6001),p=n-a-Math.floor(30.6001*u),c=u-(u>13.5?13:1),x=o-(c>2.5?4716:4715);return x<=0&&x--,this.newDate(x,c,p)},toJSDate:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),o=new Date(n.year(),n.month()-1,n.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=ee.exports=new k;s.cdate=l,s.baseCalendar=b,s.calendars.gregorian=d},94338:function(ee,D,e){var M=e(56131),k=e(63489);M(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],M(k.cdate.prototype,{formatDate:function(l,T){return typeof l!="string"&&(T=l,l=""),this._calendar.formatDate(l||"",this,T)}}),M(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(l,T,b){if(typeof l!="string"&&(b=T,T=l,l=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;l=l||this.local.dateFormat;for(var d,s,t,i=(b=b||{}).dayNamesShort||this.local.dayNamesShort,r=b.dayNames||this.local.dayNames,n=b.monthNumbers||this.local.monthNumbers,o=b.monthNamesShort||this.local.monthNamesShort,a=b.monthNames||this.local.monthNames,u=(b.calculateWeek||this.local.calculateWeek,function(f,S){for(var w=1;_+w<l.length&&l.charAt(_+w)===f;)w++;return _+=w-1,Math.floor(w/(S||1))>1}),p=function(f,S,w,E){var L=""+S;if(u(f,E))for(;L.length<w;)L="0"+L;return L},c=this,x=function(f){return typeof n=="function"?n.call(c,f,u("m")):y(p("m",f.month(),2))},g=function(f,S){return S?typeof a=="function"?a.call(c,f):a[f.month()-c.minMonth]:typeof o=="function"?o.call(c,f):o[f.month()-c.minMonth]},h=this.local.digits,y=function(f){return b.localNumbers&&h?h(f):f},v="",m=!1,_=0;_<l.length;_++)if(m)l.charAt(_)!=="'"||u("'")?v+=l.charAt(_):m=!1;else switch(l.charAt(_)){case"d":v+=y(p("d",T.day(),2));break;case"D":v+=(d=T.dayOfWeek(),s=i,t=r,u("D")?t[d]:s[d]);break;case"o":v+=p("o",T.dayOfYear(),3);break;case"w":v+=p("w",T.weekOfYear(),2);break;case"m":v+=x(T);break;case"M":v+=g(T,u("M"));break;case"y":v+=u("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":u("Y",2),v+=T.formatYear();break;case"J":v+=T.toJD();break;case"@":v+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":v+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?v+="'":m=!0;break;default:v+=l.charAt(_)}return v},parseDate:function(l,T,b){if(T==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;l=l||this.local.dateFormat;var d=(b=b||{}).shortYearCutoff||this.shortYearCutoff;d=typeof d!="string"?d:this.today().year()%100+parseInt(d,10);for(var s=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,i=b.parseMonth||this.local.parseMonth,r=b.monthNumbers||this.local.monthNumbers,n=b.monthNamesShort||this.local.monthNamesShort,o=b.monthNames||this.local.monthNames,a=-1,u=-1,p=-1,c=-1,x=-1,g=!1,h=!1,y=function(z,G){for(var O=1;L+O<l.length&&l.charAt(L+O)===z;)O++;return L+=O-1,Math.floor(O/(G||1))>1},v=function(z,G){var O=y(z,G),H=[2,3,O?4:2,O?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],N=new RegExp("^-?\\d{1,"+H+"}"),B=T.substring(E).match(N);if(!B)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=B[0].length,parseInt(B[0],10)},m=this,_=function(){if(typeof r=="function"){y("m");var z=r.call(m,T.substring(E));return E+=z.length,z}return v("m")},f=function(z,G,O,H){for(var N=y(z,H)?O:G,B=0;B<N.length;B++)if(T.substr(E,N[B].length).toLowerCase()===N[B].toLowerCase())return E+=N[B].length,B+m.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof o=="function"){var z=y("M")?o.call(m,T.substring(E)):n.call(m,T.substring(E));return E+=z.length,z}return f("M",n,o)},w=function(){if(T.charAt(E)!==l.charAt(L))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,L=0;L<l.length;L++)if(h)l.charAt(L)!=="'"||y("'")?w():h=!1;else switch(l.charAt(L)){case"d":c=v("d");break;case"D":f("D",s,t);break;case"o":x=v("o");break;case"w":v("w");break;case"m":p=_();break;case"M":p=S();break;case"y":var C=L;g=!y("y",2),L=C,u=v("y",2);break;case"Y":u=v("Y",2);break;case"J":a=v("J")+.5,T.charAt(E)==="."&&(E++,v("J"));break;case"@":a=v("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":a=v("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":y("'")?w():h=!0;break;default:w()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&g&&(u+=d===-1?1900:this.today().year()-this.today().year()%100-(u<=d?0:100)),typeof p=="string"&&(p=i.call(this,u,p)),x>-1){p=1,c=x;for(var P=this.daysInMonth(u,p);c>P;P=this.daysInMonth(u,p))p++,c-=P}return a>-1?this.fromJD(a):this.newDate(u,p,c)},determineDate:function(l,T,b,d,s){b&&typeof b!="object"&&(s=d,d=b,b=null),typeof d!="string"&&(s=d,d="");var t=this;return T=T?T.newDate():null,l==null?T:typeof l=="string"?function(i){try{return t.parseDate(d,i,s)}catch{}for(var r=((i=i.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,o=n.exec(i);o;)r.add(parseInt(o[1],10),o[2]||"d"),o=n.exec(i);return r}(l):typeof l=="number"?isNaN(l)||l===1/0||l===-1/0?T:t.today().add(l,"d"):t.newDate(l)}})},69862:function(){},40964:function(){},72077:function(ee,D,e){var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?e.g:globalThis;ee.exports=function(){for(var l=[],T=0;T<M.length;T++)typeof k[M[T]]=="function"&&(l[l.length]=M[T]);return l}},81684:function(ee,D,e){function M(pe,ge,_e){pe.prototype=ge.prototype=_e,_e.constructor=pe}function k(pe,ge){var _e=Object.create(pe.prototype);for(var me in ge)_e[me]=ge[me];return _e}function l(){}e.d(D,{sX:function(){return ue},k4:function(){return K}});var T=.7,b=1/T,d="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(d,",").concat(d,",").concat(d,"\\)$")),n=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),o=new RegExp("^rgba\\(".concat(d,",").concat(d,",").concat(d,",").concat(s,"\\)$")),a=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),u=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),p=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function h(pe){var ge,_e;return pe=(pe+"").trim().toLowerCase(),(ge=i.exec(pe))?(_e=ge[1].length,ge=parseInt(ge[1],16),_e===6?y(ge):_e===3?new _(ge>>8&15|ge>>4&240,ge>>4&15|240&ge,(15&ge)<<4|15&ge,1):_e===8?v(ge>>24&255,ge>>16&255,ge>>8&255,(255&ge)/255):_e===4?v(ge>>12&15|ge>>8&240,ge>>8&15|ge>>4&240,ge>>4&15|240&ge,((15&ge)<<4|15&ge)/255):null):(ge=r.exec(pe))?new _(ge[1],ge[2],ge[3],1):(ge=n.exec(pe))?new _(255*ge[1]/100,255*ge[2]/100,255*ge[3]/100,1):(ge=o.exec(pe))?v(ge[1],ge[2],ge[3],ge[4]):(ge=a.exec(pe))?v(255*ge[1]/100,255*ge[2]/100,255*ge[3]/100,ge[4]):(ge=u.exec(pe))?C(ge[1],ge[2]/100,ge[3]/100,1):(ge=p.exec(pe))?C(ge[1],ge[2]/100,ge[3]/100,ge[4]):c.hasOwnProperty(pe)?y(c[pe]):pe==="transparent"?new _(NaN,NaN,NaN,0):null}function y(pe){return new _(pe>>16&255,pe>>8&255,255&pe,1)}function v(pe,ge,_e,me){return me<=0&&(pe=ge=_e=NaN),new _(pe,ge,_e,me)}function m(pe,ge,_e,me){return arguments.length===1?((ve=pe)instanceof l||(ve=h(ve)),ve?new _((ve=ve.rgb()).r,ve.g,ve.b,ve.opacity):new _):new _(pe,ge,_e,me??1);var ve}function _(pe,ge,_e,me){this.r=+pe,this.g=+ge,this.b=+_e,this.opacity=+me}function f(){return"#".concat(L(this.r)).concat(L(this.g)).concat(L(this.b))}function S(){var pe=w(this.opacity);return"".concat(pe===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(pe===1?")":", ".concat(pe,")"))}function w(pe){return isNaN(pe)?1:Math.max(0,Math.min(1,pe))}function E(pe){return Math.max(0,Math.min(255,Math.round(pe)||0))}function L(pe){return((pe=E(pe))<16?"0":"")+pe.toString(16)}function C(pe,ge,_e,me){return me<=0?pe=ge=_e=NaN:_e<=0||_e>=1?pe=ge=NaN:ge<=0&&(pe=NaN),new z(pe,ge,_e,me)}function P(pe){if(pe instanceof z)return new z(pe.h,pe.s,pe.l,pe.opacity);if(pe instanceof l||(pe=h(pe)),!pe)return new z;if(pe instanceof z)return pe;var ge=(pe=pe.rgb()).r/255,_e=pe.g/255,me=pe.b/255,ve=Math.min(ge,_e,me),Oe=Math.max(ge,_e,me),Me=NaN,Te=Oe-ve,se=(Oe+ve)/2;return Te?(Me=ge===Oe?(_e-me)/Te+6*(_e<me):_e===Oe?(me-ge)/Te+2:(ge-_e)/Te+4,Te/=se<.5?Oe+ve:2-Oe-ve,Me*=60):Te=se>0&&se<1?0:Me,new z(Me,Te,se,pe.opacity)}function z(pe,ge,_e,me){this.h=+pe,this.s=+ge,this.l=+_e,this.opacity=+me}function G(pe){return(pe=(pe||0)%360)<0?pe+360:pe}function O(pe){return Math.max(0,Math.min(1,pe||0))}function H(pe,ge,_e){return 255*(pe<60?ge+(_e-ge)*pe/60:pe<180?_e:pe<240?ge+(_e-ge)*(240-pe)/60:ge)}M(l,h,{copy:function(pe){return Object.assign(new this.constructor,this,pe)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:g,toString:g}),M(_,m,k(l,{brighter:function(pe){return pe=pe==null?b:Math.pow(b,pe),new _(this.r*pe,this.g*pe,this.b*pe,this.opacity)},darker:function(pe){return pe=pe==null?T:Math.pow(T,pe),new _(this.r*pe,this.g*pe,this.b*pe,this.opacity)},rgb:function(){return this},clamp:function(){return new _(E(this.r),E(this.g),E(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f,formatHex:f,formatHex8:function(){return"#".concat(L(this.r)).concat(L(this.g)).concat(L(this.b)).concat(L(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),M(z,function(pe,ge,_e,me){return arguments.length===1?P(pe):new z(pe,ge,_e,me??1)},k(l,{brighter:function(pe){return pe=pe==null?b:Math.pow(b,pe),new z(this.h,this.s,this.l*pe,this.opacity)},darker:function(pe){return pe=pe==null?T:Math.pow(T,pe),new z(this.h,this.s,this.l*pe,this.opacity)},rgb:function(){var pe=this.h%360+360*(this.h<0),ge=isNaN(pe)||isNaN(this.s)?0:this.s,_e=this.l,me=_e+(_e<.5?_e:1-_e)*ge,ve=2*_e-me;return new _(H(pe>=240?pe-240:pe+120,ve,me),H(pe,ve,me),H(pe<120?pe+240:pe-120,ve,me),this.opacity)},clamp:function(){return new z(G(this.h),O(this.s),O(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var pe=w(this.opacity);return"".concat(pe===1?"hsl(":"hsla(").concat(G(this.h),", ").concat(100*O(this.s),"%, ").concat(100*O(this.l),"%").concat(pe===1?")":", ".concat(pe,")"))}}));var N=function(pe){return function(){return pe}};function B(pe,ge){var _e=ge-pe;return _e?function(me,ve){return function(Oe){return me+Oe*ve}}(pe,_e):N(isNaN(pe)?ge:pe)}var V=function pe(ge){var _e=function(ve){return(ve=+ve)==1?B:function(Oe,Me){return Me-Oe?function(Te,se,oe){return Te=Math.pow(Te,oe),se=Math.pow(se,oe)-Te,oe=1/oe,function(he){return Math.pow(Te+he*se,oe)}}(Oe,Me,ve):N(isNaN(Oe)?Me:Oe)}}(ge);function me(ve,Oe){var Me=_e((ve=m(ve)).r,(Oe=m(Oe)).r),Te=_e(ve.g,Oe.g),se=_e(ve.b,Oe.b),oe=B(ve.opacity,Oe.opacity);return function(he){return ve.r=Me(he),ve.g=Te(he),ve.b=se(he),ve.opacity=oe(he),ve+""}}return me.gamma=pe,me}(1);function q(pe,ge){var _e,me=ge?ge.length:0,ve=pe?Math.min(me,pe.length):0,Oe=new Array(ve),Me=new Array(me);for(_e=0;_e<ve;++_e)Oe[_e]=ue(pe[_e],ge[_e]);for(;_e<me;++_e)Me[_e]=ge[_e];return function(Te){for(_e=0;_e<ve;++_e)Me[_e]=Oe[_e](Te);return Me}}function te(pe,ge){var _e=new Date;return pe=+pe,ge=+ge,function(me){return _e.setTime(pe*(1-me)+ge*me),_e}}function K(pe,ge){return pe=+pe,ge=+ge,function(_e){return pe*(1-_e)+ge*_e}}function J(pe){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},J(pe)}function Y(pe,ge){var _e,me={},ve={};for(_e in pe!==null&&J(pe)==="object"||(pe={}),ge!==null&&J(ge)==="object"||(ge={}),ge)_e in pe?me[_e]=ue(pe[_e],ge[_e]):ve[_e]=ge[_e];return function(Oe){for(_e in me)ve[_e]=me[_e](Oe);return ve}}var W=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Q=new RegExp(W.source,"g");function ne(pe,ge){var _e,me,ve,Oe=W.lastIndex=Q.lastIndex=0,Me=-1,Te=[],se=[];for(pe+="",ge+="";(_e=W.exec(pe))&&(me=Q.exec(ge));)(ve=me.index)>Oe&&(ve=ge.slice(Oe,ve),Te[Me]?Te[Me]+=ve:Te[++Me]=ve),(_e=_e[0])===(me=me[0])?Te[Me]?Te[Me]+=me:Te[++Me]=me:(Te[++Me]=null,se.push({i:Me,x:K(_e,me)})),Oe=Q.lastIndex;return Oe<ge.length&&(ve=ge.slice(Oe),Te[Me]?Te[Me]+=ve:Te[++Me]=ve),Te.length<2?se[0]?function(oe){return function(he){return oe(he)+""}}(se[0].x):function(oe){return function(){return oe}}(ge):(ge=se.length,function(oe){for(var he,Ee=0;Ee<ge;++Ee)Te[(he=se[Ee]).i]=he.x(oe);return Te.join("")})}function re(pe,ge){ge||(ge=[]);var _e,me=pe?Math.min(ge.length,pe.length):0,ve=ge.slice();return function(Oe){for(_e=0;_e<me;++_e)ve[_e]=pe[_e]*(1-Oe)+ge[_e]*Oe;return ve}}function ae(pe){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},ae(pe)}function ue(pe,ge){var _e,me,ve=ae(ge);return ge==null||ve==="boolean"?N(ge):(ve==="number"?K:ve==="string"?(_e=h(ge))?(ge=_e,V):ne:ge instanceof h?V:ge instanceof Date?te:(me=ge,!ArrayBuffer.isView(me)||me instanceof DataView?Array.isArray(ge)?q:typeof ge.valueOf!="function"&&typeof ge.toString!="function"||isNaN(ge)?Y:K:re))(pe,ge)}},40402:function(ee){ee.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(ee){ee.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(ee){ee.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(ee){ee.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(ee){ee.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(ee){ee.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Cs={};function Ha(ee){var D=Cs[ee];if(D!==void 0)return D.exports;var e=Cs[ee]={exports:{}};return Pl[ee].call(e.exports,e,e.exports,Ha),e.exports}return Ha.n=function(ee){var D=ee&&ee.__esModule?function(){return ee.default}:function(){return ee};return Ha.d(D,{a:D}),D},Ha.d=function(ee,D){for(var e in D)Ha.o(D,e)&&!Ha.o(ee,e)&&Object.defineProperty(ee,e,{enumerable:!0,get:D[e]})},Ha.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ha.o=function(ee,D){return Object.prototype.hasOwnProperty.call(ee,D)},Ha.r=function(ee){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ee,"__esModule",{value:!0})},Ha(27909)}()})})(Uh);var Vh=Uh.exports;const Md=kd(Vh),Ed=Ad({__proto__:null,default:Md},[Vh]);export{Ed as p};
