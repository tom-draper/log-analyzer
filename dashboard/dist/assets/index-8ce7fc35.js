var Km=Object.defineProperty;var Qm=(re,se,Ae)=>se in re?Km(re,se,{enumerable:!0,configurable:!0,writable:!0,value:Ae}):re[se]=Ae;var $m=(re,se)=>()=>(se||re((se={exports:{}}).exports,se),se.exports);var Np=(re,se,Ae)=>(Qm(re,typeof se!="symbol"?se+"":se,Ae),Ae);var yw=$m((_w,Ih)=>{(function(){const se=document.createElement("link").relList;if(se&&se.supports&&se.supports("modulepreload"))return;for(const Ge of document.querySelectorAll('link[rel="modulepreload"]'))Re(Ge);new MutationObserver(Ge=>{for(const N of Ge)if(N.type==="childList")for(const L of N.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&Re(L)}).observe(document,{childList:!0,subtree:!0});function Ae(Ge){const N={};return Ge.integrity&&(N.integrity=Ge.integrity),Ge.referrerPolicy&&(N.referrerPolicy=Ge.referrerPolicy),Ge.crossOrigin==="use-credentials"?N.credentials="include":Ge.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function Re(Ge){if(Ge.ep)return;Ge.ep=!0;const N=Ae(Ge);fetch(Ge.href,N)}})();function xi(){}function ey(re,se){for(const Ae in se)re[Ae]=se[Ae];return re}function rg(re){return re()}function a1(){return Object.create(null)}function Fl(re){re.forEach(rg)}function lc(re){return typeof re=="function"}function Ra(re,se){return re!=re?se==se:re!==se||re&&typeof re=="object"||typeof re=="function"}function ty(re){return Object.keys(re).length===0}function ig(re,se,Ae,Re){if(re){const Ge=ag(re,se,Ae,Re);return re[0](Ge)}}function ag(re,se,Ae,Re){return re[1]&&Re?ey(Ae.ctx.slice(),re[1](Re(se))):Ae.ctx}function og(re,se,Ae,Re){if(re[2]&&Re){const Ge=re[2](Re(Ae));if(se.dirty===void 0)return Ge;if(typeof Ge=="object"){const N=[],L=Math.max(se.dirty.length,Ge.length);for(let e=0;e<L;e+=1)N[e]=se.dirty[e]|Ge[e];return N}return se.dirty|Ge}return se.dirty}function sg(re,se,Ae,Re,Ge,N){if(Ge){const L=ag(se,Ae,Re,N);re.p(L,Ge)}}function lg(re){if(re.ctx.length>32){const se=[],Ae=re.ctx.length/32;for(let Re=0;Re<Ae;Re++)se[Re]=-1;return se}return-1}function ar(re,se){re.appendChild(se)}function Lr(re,se,Ae){re.insertBefore(se,Ae||null)}function Er(re){re.parentNode&&re.parentNode.removeChild(re)}function iu(re,se){for(let Ae=0;Ae<re.length;Ae+=1)re[Ae]&&re[Ae].d(se)}function br(re){return document.createElement(re)}function li(re){return document.createTextNode(re)}function qr(){return li(" ")}function As(){return li("")}function ji(re,se,Ae,Re){return re.addEventListener(se,Ae,Re),()=>re.removeEventListener(se,Ae,Re)}function xu(re){return function(se){return se.preventDefault(),re.call(this,se)}}function ny(re){return function(se){se.target===this&&re.call(this,se)}}function Un(re,se,Ae){Ae==null?re.removeAttribute(se):re.getAttribute(se)!==Ae&&re.setAttribute(se,Ae)}function ry(re){return Array.from(re.childNodes)}function Pi(re,se){se=""+se,re.data!==se&&(re.data=se)}function Xa(re,se,Ae,Re){Ae==null?re.style.removeProperty(se):re.style.setProperty(se,Ae,Re?"important":"")}function Ms(re,se,Ae){re.classList.toggle(se,!!Ae)}function iy(re,se,{bubbles:Ae=!1,cancelable:Re=!1}={}){return new CustomEvent(re,{detail:se,bubbles:Ae,cancelable:Re})}function fl(re,se){return new re(se)}let Ef;function Mf(re){Ef=re}function ug(){if(!Ef)throw new Error("Function called outside component initialization");return Ef}function Mu(re){ug().$$.on_mount.push(re)}function jh(){const re=ug();return(se,Ae,{cancelable:Re=!1}={})=>{const Ge=re.$$.callbacks[se];if(Ge){const N=iy(se,Ae,{cancelable:Re});return Ge.slice().forEach(L=>{L.call(re,N)}),!N.defaultPrevented}return!0}}const Bc=[],Ja=[];let Uc=[];const Xp=[],ay=Promise.resolve();let Jp=!1;function oy(){Jp||(Jp=!0,ay.then(cg))}function Kp(re){Uc.push(re)}function hc(re){Xp.push(re)}const jp=new Set;let zc=0;function cg(){if(zc!==0)return;const re=Ef;do{try{for(;zc<Bc.length;){const se=Bc[zc];zc++,Mf(se),sy(se.$$)}}catch(se){throw Bc.length=0,zc=0,se}for(Mf(null),Bc.length=0,zc=0;Ja.length;)Ja.pop()();for(let se=0;se<Uc.length;se+=1){const Ae=Uc[se];jp.has(Ae)||(jp.add(Ae),Ae())}Uc.length=0}while(Bc.length);for(;Xp.length;)Xp.pop()();Jp=!1,jp.clear(),Mf(re)}function sy(re){if(re.fragment!==null){re.update(),Fl(re.before_update);const se=re.dirty;re.dirty=[-1],re.fragment&&re.fragment.p(re.ctx,se),re.after_update.forEach(Kp)}}function ly(re){const se=[],Ae=[];Uc.forEach(Re=>re.indexOf(Re)===-1?se.push(Re):Ae.push(Re)),Ae.forEach(Re=>Re()),Uc=se}const Lh=new Set;let uc;function qs(){uc={r:0,c:[],p:uc}}function Ys(){uc.r||Fl(uc.c),uc=uc.p}function Qr(re,se){re&&re.i&&(Lh.delete(re),re.i(se))}function ti(re,se,Ae,Re){if(re&&re.o){if(Lh.has(re))return;Lh.add(re),uc.c.push(()=>{Lh.delete(re),Re&&(Ae&&re.d(1),Re())}),re.o(se)}else Re&&Re()}function no(re){return(re==null?void 0:re.length)!==void 0?re:Array.from(re)}function nu(re,se,Ae){const Re=re.$$.props[se];Re!==void 0&&(re.$$.bound[Re]=Ae,Ae(re.$$.ctx[Re]))}function ta(re){re&&re.c()}function Zi(re,se,Ae){const{fragment:Re,after_update:Ge}=re.$$;Re&&Re.m(se,Ae),Kp(()=>{const N=re.$$.on_mount.map(rg).filter(lc);re.$$.on_destroy?re.$$.on_destroy.push(...N):Fl(N),re.$$.on_mount=[]}),Ge.forEach(Kp)}function Xi(re,se){const Ae=re.$$;Ae.fragment!==null&&(ly(Ae.after_update),Fl(Ae.on_destroy),Ae.fragment&&Ae.fragment.d(se),Ae.on_destroy=Ae.fragment=null,Ae.ctx=[])}function uy(re,se){re.$$.dirty[0]===-1&&(Bc.push(re),oy(),re.$$.dirty.fill(0)),re.$$.dirty[se/31|0]|=1<<se%31}function za(re,se,Ae,Re,Ge,N,L=null,e=[-1]){const T=Ef;Mf(re);const w=re.$$={fragment:null,ctx:[],props:N,update:xi,not_equal:Ge,bound:a1(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(se.context||(T?T.$$.context:[])),callbacks:a1(),dirty:e,skip_bound:!1,root:se.target||T.$$.root};L&&L(w.root);let i=!1;if(w.ctx=Ae?Ae(re,se.props||{},(_,v,...h)=>{const s=h.length?h[0]:v;return w.ctx&&Ge(w.ctx[_],w.ctx[_]=s)&&(!w.skip_bound&&w.bound[_]&&w.bound[_](s),i&&uy(re,_)),v}):[],w.update(),i=!0,Fl(w.before_update),w.fragment=Re?Re(w.ctx):!1,se.target){if(se.hydrate){const _=ry(se.target);w.fragment&&w.fragment.l(_),_.forEach(Er)}else w.fragment&&w.fragment.c();se.intro&&Qr(re.$$.fragment),Zi(re,se.target,se.anchor),cg()}Mf(T)}class Fa{constructor(){Np(this,"$$");Np(this,"$$set")}$destroy(){Xi(this,1),this.$destroy=xi}$on(se,Ae){if(!lc(Ae))return xi;const Re=this.$$.callbacks[se]||(this.$$.callbacks[se]=[]);return Re.push(Ae),()=>{const Ge=Re.indexOf(Ae);Ge!==-1&&Re.splice(Ge,1)}}$set(se){this.$$set&&!ty(se)&&(this.$$.skip_bound=!0,this.$$set(se),this.$$.skip_bound=!1)}}const cy="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(cy);var fy={grad:.9,turn:360,rad:360/(2*Math.PI)},vu=function(re){return typeof re=="string"?re.length>0:typeof re=="number"},xo=function(re,se,Ae){return se===void 0&&(se=0),Ae===void 0&&(Ae=Math.pow(10,se)),Math.round(Ae*re)/Ae+0},cl=function(re,se,Ae){return se===void 0&&(se=0),Ae===void 0&&(Ae=1),re>Ae?Ae:re>se?re:se},fg=function(re){return(re=isFinite(re)?re%360:0)>0?re:re+360},o1=function(re){return{r:cl(re.r,0,255),g:cl(re.g,0,255),b:cl(re.b,0,255),a:cl(re.a)}},Up=function(re){return{r:xo(re.r),g:xo(re.g),b:xo(re.b),a:xo(re.a,3)}},hy=/^#([0-9a-f]{3,8})$/i,Th=function(re){var se=re.toString(16);return se.length<2?"0"+se:se},hg=function(re){var se=re.r,Ae=re.g,Re=re.b,Ge=re.a,N=Math.max(se,Ae,Re),L=N-Math.min(se,Ae,Re),e=L?N===se?(Ae-Re)/L:N===Ae?2+(Re-se)/L:4+(se-Ae)/L:0;return{h:60*(e<0?e+6:e),s:N?L/N*100:0,v:N/255*100,a:Ge}},pg=function(re){var se=re.h,Ae=re.s,Re=re.v,Ge=re.a;se=se/360*6,Ae/=100,Re/=100;var N=Math.floor(se),L=Re*(1-Ae),e=Re*(1-(se-N)*Ae),T=Re*(1-(1-se+N)*Ae),w=N%6;return{r:255*[Re,e,L,L,T,Re][w],g:255*[T,Re,Re,e,L,L][w],b:255*[L,L,T,Re,Re,e][w],a:Ge}},s1=function(re){return{h:fg(re.h),s:cl(re.s,0,100),l:cl(re.l,0,100),a:cl(re.a)}},l1=function(re){return{h:xo(re.h),s:xo(re.s),l:xo(re.l),a:xo(re.a,3)}},u1=function(re){return pg((Ae=(se=re).s,{h:se.h,s:(Ae*=((Re=se.l)<50?Re:100-Re)/100)>0?2*Ae/(Re+Ae)*100:0,v:Re+Ae,a:se.a}));var se,Ae,Re},Af=function(re){return{h:(se=hg(re)).h,s:(Ge=(200-(Ae=se.s))*(Re=se.v)/100)>0&&Ge<200?Ae*Re/100/(Ge<=100?Ge:200-Ge)*100:0,l:Ge/2,a:se.a};var se,Ae,Re,Ge},py=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dy=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gy=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vy=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,c1={string:[[function(re){var se=hy.exec(re);return se?(re=se[1]).length<=4?{r:parseInt(re[0]+re[0],16),g:parseInt(re[1]+re[1],16),b:parseInt(re[2]+re[2],16),a:re.length===4?xo(parseInt(re[3]+re[3],16)/255,2):1}:re.length===6||re.length===8?{r:parseInt(re.substr(0,2),16),g:parseInt(re.substr(2,2),16),b:parseInt(re.substr(4,2),16),a:re.length===8?xo(parseInt(re.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(re){var se=gy.exec(re)||vy.exec(re);return se?se[2]!==se[4]||se[4]!==se[6]?null:o1({r:Number(se[1])/(se[2]?100/255:1),g:Number(se[3])/(se[4]?100/255:1),b:Number(se[5])/(se[6]?100/255:1),a:se[7]===void 0?1:Number(se[7])/(se[8]?100:1)}):null},"rgb"],[function(re){var se=py.exec(re)||dy.exec(re);if(!se)return null;var Ae,Re,Ge=s1({h:(Ae=se[1],Re=se[2],Re===void 0&&(Re="deg"),Number(Ae)*(fy[Re]||1)),s:Number(se[3]),l:Number(se[4]),a:se[5]===void 0?1:Number(se[5])/(se[6]?100:1)});return u1(Ge)},"hsl"]],object:[[function(re){var se=re.r,Ae=re.g,Re=re.b,Ge=re.a,N=Ge===void 0?1:Ge;return vu(se)&&vu(Ae)&&vu(Re)?o1({r:Number(se),g:Number(Ae),b:Number(Re),a:Number(N)}):null},"rgb"],[function(re){var se=re.h,Ae=re.s,Re=re.l,Ge=re.a,N=Ge===void 0?1:Ge;if(!vu(se)||!vu(Ae)||!vu(Re))return null;var L=s1({h:Number(se),s:Number(Ae),l:Number(Re),a:Number(N)});return u1(L)},"hsl"],[function(re){var se=re.h,Ae=re.s,Re=re.v,Ge=re.a,N=Ge===void 0?1:Ge;if(!vu(se)||!vu(Ae)||!vu(Re))return null;var L=function(e){return{h:fg(e.h),s:cl(e.s,0,100),v:cl(e.v,0,100),a:cl(e.a)}}({h:Number(se),s:Number(Ae),v:Number(Re),a:Number(N)});return pg(L)},"hsv"]]},f1=function(re,se){for(var Ae=0;Ae<se.length;Ae++){var Re=se[Ae][0](re);if(Re)return[Re,se[Ae][1]]}return[null,void 0]},my=function(re){return typeof re=="string"?f1(re.trim(),c1.string):typeof re=="object"&&re!==null?f1(re,c1.object):[null,void 0]},Vp=function(re,se){var Ae=Af(re);return{h:Ae.h,s:cl(Ae.s+100*se,0,100),l:Ae.l,a:Ae.a}},Hp=function(re){return(299*re.r+587*re.g+114*re.b)/1e3/255},h1=function(re,se){var Ae=Af(re);return{h:Ae.h,s:Ae.s,l:cl(Ae.l+100*se,0,100),a:Ae.a}},p1=function(){function re(se){this.parsed=my(se)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return re.prototype.isValid=function(){return this.parsed!==null},re.prototype.brightness=function(){return xo(Hp(this.rgba),2)},re.prototype.isDark=function(){return Hp(this.rgba)<.5},re.prototype.isLight=function(){return Hp(this.rgba)>=.5},re.prototype.toHex=function(){return se=Up(this.rgba),Ae=se.r,Re=se.g,Ge=se.b,L=(N=se.a)<1?Th(xo(255*N)):"","#"+Th(Ae)+Th(Re)+Th(Ge)+L;var se,Ae,Re,Ge,N,L},re.prototype.toRgb=function(){return Up(this.rgba)},re.prototype.toRgbString=function(){return se=Up(this.rgba),Ae=se.r,Re=se.g,Ge=se.b,(N=se.a)<1?"rgba("+Ae+", "+Re+", "+Ge+", "+N+")":"rgb("+Ae+", "+Re+", "+Ge+")";var se,Ae,Re,Ge,N},re.prototype.toHsl=function(){return l1(Af(this.rgba))},re.prototype.toHslString=function(){return se=l1(Af(this.rgba)),Ae=se.h,Re=se.s,Ge=se.l,(N=se.a)<1?"hsla("+Ae+", "+Re+"%, "+Ge+"%, "+N+")":"hsl("+Ae+", "+Re+"%, "+Ge+"%)";var se,Ae,Re,Ge,N},re.prototype.toHsv=function(){return se=hg(this.rgba),{h:xo(se.h),s:xo(se.s),v:xo(se.v),a:xo(se.a,3)};var se},re.prototype.invert=function(){return Hs({r:255-(se=this.rgba).r,g:255-se.g,b:255-se.b,a:se.a});var se},re.prototype.saturate=function(se){return se===void 0&&(se=.1),Hs(Vp(this.rgba,se))},re.prototype.desaturate=function(se){return se===void 0&&(se=.1),Hs(Vp(this.rgba,-se))},re.prototype.grayscale=function(){return Hs(Vp(this.rgba,-1))},re.prototype.lighten=function(se){return se===void 0&&(se=.1),Hs(h1(this.rgba,se))},re.prototype.darken=function(se){return se===void 0&&(se=.1),Hs(h1(this.rgba,-se))},re.prototype.rotate=function(se){return se===void 0&&(se=15),this.hue(this.hue()+se)},re.prototype.alpha=function(se){return typeof se=="number"?Hs({r:(Ae=this.rgba).r,g:Ae.g,b:Ae.b,a:se}):xo(this.rgba.a,3);var Ae},re.prototype.hue=function(se){var Ae=Af(this.rgba);return typeof se=="number"?Hs({h:se,s:Ae.s,l:Ae.l,a:Ae.a}):xo(Ae.h)},re.prototype.isEqual=function(se){return this.toHex()===Hs(se).toHex()},re}(),Hs=function(re){return re instanceof p1?re:new p1(re)};function d1(re){let se;return{c(){se=br("input"),Un(se,"type","hidden"),Un(se,"name",re[3]),se.value=re[0]},m(Ae,Re){Lr(Ae,se,Re)},p(Ae,Re){Re&8&&Un(se,"name",Ae[3]),Re&1&&(se.value=Ae[0])},d(Ae){Ae&&Er(se)}}}function yy(re){let se,Ae,Re,Ge,N,L,e,T,w,i=re[3]&&d1(re);return{c(){se=br("div"),Ae=br("div"),Re=qr(),Ge=br("div"),L=qr(),i&&i.c(),e=As(),Un(Ae,"class","track svelte-pjqaqp"),Un(Ge,"class","thumb svelte-pjqaqp"),Un(se,"class","slider svelte-pjqaqp"),Un(se,"role","slider"),Un(se,"aria-orientation",re[4]),Un(se,"aria-valuemax",re[11]),Un(se,"aria-valuemin",re[10]),Un(se,"aria-valuenow",re[0]),Un(se,"aria-valuetext",N=re[2](re[0])),Un(se,"aria-label",re[7]),Un(se,"aria-labelledby",re[8]),Un(se,"aria-controls",re[9]),Un(se,"tabindex","0"),Ms(se,"reverse",re[5]),Xa(se,"--position",re[12])},m(_,v){Lr(_,se,v),ar(se,Ae),ar(se,Re),ar(se,Ge),re[22](se),Lr(_,L,v),i&&i.m(_,v),Lr(_,e,v),T||(w=[ji(window,"mousemove",re[15]),ji(window,"mouseup",re[16]),ji(se,"keydown",re[13]),ji(se,"mousedown",ny(function(){lc(re[6]?void 0:re[14])&&(re[6]?void 0:re[14]).apply(this,arguments)})),ji(se,"touchstart",xu(function(){lc(re[6]?void 0:re[17])&&(re[6]?void 0:re[17]).apply(this,arguments)}),{passive:!1}),ji(se,"touchmove",xu(function(){lc(re[6]?void 0:re[17])&&(re[6]?void 0:re[17]).apply(this,arguments)}),{passive:!1}),ji(se,"touchend",xu(function(){lc(re[6]?void 0:re[17])&&(re[6]?void 0:re[17]).apply(this,arguments)}),{passive:!1})],T=!0)},p(_,[v]){re=_,v&16&&Un(se,"aria-orientation",re[4]),v&2048&&Un(se,"aria-valuemax",re[11]),v&1024&&Un(se,"aria-valuemin",re[10]),v&1&&Un(se,"aria-valuenow",re[0]),v&5&&N!==(N=re[2](re[0]))&&Un(se,"aria-valuetext",N),v&128&&Un(se,"aria-label",re[7]),v&256&&Un(se,"aria-labelledby",re[8]),v&512&&Un(se,"aria-controls",re[9]),v&32&&Ms(se,"reverse",re[5]),v&4096&&Xa(se,"--position",re[12]),re[3]?i?i.p(re,v):(i=d1(re),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:xi,o:xi,d(_){_&&(Er(se),Er(L),Er(e)),re[22](null),i&&i.d(_),T=!1,Fl(w)}}}function xy(re,se,Ae){let Re,Ge,N,L,{min:e=0}=se,{max:T=100}=se,{step:w=1}=se,{value:i=50}=se,{ariaValueText:_=f=>f.toString()}=se,{name:v=void 0}=se,{direction:h="horizontal"}=se,{reverse:s=!1}=se,{keyboardOnly:t=!1}=se,{slider:a=void 0}=se,{ariaLabel:n=void 0}=se,{ariaLabelledBy:r=void 0}=se,{ariaControls:l=void 0}=se,{isDragging:o=!1}=se;const u=jh();function p(f){const S=1/N,M=Math.round(f*S)/S;return Math.max(Re,Math.min(Ge,M))}function c(f){const S=f.shiftKey?N*10:N;f.key==="ArrowUp"||f.key==="ArrowRight"?(Ae(0,i+=S),f.preventDefault()):f.key==="ArrowDown"||f.key==="ArrowLeft"?(Ae(0,i-=S),f.preventDefault()):f.key==="Home"?(Ae(0,i=Re),f.preventDefault()):f.key==="End"?(Ae(0,i=Ge),f.preventDefault()):f.key==="PageUp"?(Ae(0,i+=N*10),f.preventDefault()):f.key==="PageDown"&&(Ae(0,i-=N*10),f.preventDefault()),Ae(0,i=p(i)),u("input",i)}const b={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function g(f){const S=(a==null?void 0:a[b[h].clientSize])||120,M=(a==null?void 0:a.getBoundingClientRect()[b[h].offset])||0;let E=f[b[h].client]-M;h==="vertical"&&(E=-1*E+S),s?Ae(0,i=Ge-E/S*(Ge-Re)):Ae(0,i=E/S*(Ge-Re)+Re),Ae(0,i=p(i)),u("input",i)}function d(f){g(f),Ae(18,o=!0)}function m(f){o&&g(f)}function x(){Ae(18,o=!1)}function y(f){g({clientX:f.changedTouches[0].clientX,clientY:f.changedTouches[0].clientY})}function k(f){Ja[f?"unshift":"push"](()=>{a=f,Ae(1,a)})}return re.$$set=f=>{"min"in f&&Ae(19,e=f.min),"max"in f&&Ae(20,T=f.max),"step"in f&&Ae(21,w=f.step),"value"in f&&Ae(0,i=f.value),"ariaValueText"in f&&Ae(2,_=f.ariaValueText),"name"in f&&Ae(3,v=f.name),"direction"in f&&Ae(4,h=f.direction),"reverse"in f&&Ae(5,s=f.reverse),"keyboardOnly"in f&&Ae(6,t=f.keyboardOnly),"slider"in f&&Ae(1,a=f.slider),"ariaLabel"in f&&Ae(7,n=f.ariaLabel),"ariaLabelledBy"in f&&Ae(8,r=f.ariaLabelledBy),"ariaControls"in f&&Ae(9,l=f.ariaControls),"isDragging"in f&&Ae(18,o=f.isDragging)},re.$$.update=()=>{re.$$.dirty&524288&&Ae(10,Re=typeof e=="string"?parseFloat(e):e),re.$$.dirty&1048576&&Ae(11,Ge=typeof T=="string"?parseFloat(T):T),re.$$.dirty&2097152&&(N=typeof w=="string"?parseFloat(w):w),re.$$.dirty&3073&&Ae(12,L=((i-Re)/(Ge-Re)*1).toFixed(4))},[i,a,_,v,h,s,t,n,r,l,Re,Ge,L,c,d,m,x,y,o,e,T,w,k]}class Dh extends Fa{constructor(se){super(),za(this,se,xy,yy,Ra,{min:19,max:20,step:21,value:0,ariaValueText:2,name:3,direction:4,reverse:5,keyboardOnly:6,slider:1,ariaLabel:7,ariaLabelledBy:8,ariaControls:9,isDragging:18})}}function by(re){let se,Ae,Re,Ge,N,L,e,T,w,i,_,v,h;var s=re[2].pickerIndicator;function t(o,u){return{props:{pos:o[6],isDark:o[3]}}}s&&(Ae=fl(s,t(re)));function a(o){re[13](o)}let n={keyboardOnly:!0,ariaValueText:_y,ariaLabel:"saturation color"};re[0]!==void 0&&(n.value=re[0]),N=new Dh({props:n}),Ja.push(()=>nu(N,"value",a));function r(o){re[14](o)}let l={keyboardOnly:!0,ariaValueText:wy,direction:"vertical",ariaLabel:"brightness color"};return re[1]!==void 0&&(l.value=re[1]),w=new Dh({props:l}),Ja.push(()=>nu(w,"value",r)),{c(){se=br("div"),Ae&&ta(Ae.$$.fragment),Re=qr(),Ge=br("div"),ta(N.$$.fragment),e=qr(),T=br("div"),ta(w.$$.fragment),Un(Ge,"class","s svelte-1x9tz9y"),Xa(Ge,"--pos-y",re[6].y),Un(T,"class","v svelte-1x9tz9y"),Xa(T,"--pos-x",re[6].x),Un(se,"class","picker svelte-1x9tz9y"),Xa(se,"--picker-color-bg",re[5])},m(o,u){Lr(o,se,u),Ae&&Zi(Ae,se,null),ar(se,Re),ar(se,Ge),Zi(N,Ge,null),ar(se,e),ar(se,T),Zi(w,T,null),re[15](se),_=!0,v||(h=[ji(window,"mouseup",re[8]),ji(window,"mousedown",re[10]),ji(window,"mousemove",re[9]),ji(se,"mousedown",xu(re[7])),ji(se,"touchstart",re[11],{passive:!1}),ji(se,"touchmove",xu(re[11]),{passive:!1}),ji(se,"touchend",re[11],{passive:!1})],v=!0)},p(o,[u]){if(u&4&&s!==(s=o[2].pickerIndicator)){if(Ae){qs();const b=Ae;ti(b.$$.fragment,1,0,()=>{Xi(b,1)}),Ys()}s?(Ae=fl(s,t(o)),ta(Ae.$$.fragment),Qr(Ae.$$.fragment,1),Zi(Ae,se,Re)):Ae=null}else if(s){const b={};u&64&&(b.pos=o[6]),u&8&&(b.isDark=o[3]),Ae.$set(b)}const p={};!L&&u&1&&(L=!0,p.value=o[0],hc(()=>L=!1)),N.$set(p),u&64&&Xa(Ge,"--pos-y",o[6].y);const c={};!i&&u&2&&(i=!0,c.value=o[1],hc(()=>i=!1)),w.$set(c),u&64&&Xa(T,"--pos-x",o[6].x),u&32&&Xa(se,"--picker-color-bg",o[5])},i(o){_||(Ae&&Qr(Ae.$$.fragment,o),Qr(N.$$.fragment,o),Qr(w.$$.fragment,o),_=!0)},o(o){Ae&&ti(Ae.$$.fragment,o),ti(N.$$.fragment,o),ti(w.$$.fragment,o),_=!1},d(o){o&&Er(se),Ae&&Xi(Ae),Xi(N),Xi(w),re[15](null),v=!1,Fl(h)}}}function kh(re,se,Ae){return Math.min(Math.max(se,re),Ae)}const _y=re=>`${re}%`,wy=re=>`${re}%`;function Ty(re,se,Ae){const Re=jh();let{components:Ge}=se,{h:N}=se,{s:L}=se,{v:e}=se,{isDark:T}=se,w,i=!1,_,v={x:100,y:0};function h(p){const{width:c,left:b,height:g,top:d}=w.getBoundingClientRect(),m={x:kh(p.clientX-b,0,c),y:kh(p.clientY-d,0,g)};Ae(0,L=kh(m.x/c,0,1)*100),Ae(1,e=kh((g-m.y)/g,0,1)*100)}function s(p){p.button===0&&(i=!0,h(p))}function t(){i=!1}function a(p){i&&h(p)}function n(p){p.target.isSameNode(w)}function r(p){p.preventDefault(),h(p.changedTouches[0])}function l(p){L=p,Ae(0,L)}function o(p){e=p,Ae(1,e)}function u(p){Ja[p?"unshift":"push"](()=>{w=p,Ae(4,w)})}return re.$$set=p=>{"components"in p&&Ae(2,Ge=p.components),"h"in p&&Ae(12,N=p.h),"s"in p&&Ae(0,L=p.s),"v"in p&&Ae(1,e=p.v),"isDark"in p&&Ae(3,T=p.isDark)},re.$$.update=()=>{re.$$.dirty&4096&&typeof N=="number"&&Ae(5,_=Hs({h:N,s:100,v:100,a:1}).toHex()),re.$$.dirty&19&&typeof L=="number"&&typeof e=="number"&&w&&Ae(6,v={x:L,y:100-e}),re.$$.dirty&3&&Re("input",{s:L,v:e})},[L,e,Ge,T,w,_,v,s,t,a,n,r,N,l,o,u]}class ky extends Fa{constructor(se){super(),za(this,se,Ty,by,Ra,{components:2,h:12,s:0,v:1,isDark:3})}}function My(re){let se;return{c(){se=br("div"),Un(se,"class","picker-indicator svelte-i5mg2p"),Ms(se,"is-dark",re[1]),Xa(se,"--pos-x",re[0].x),Xa(se,"--pos-y",re[0].y)},m(Ae,Re){Lr(Ae,se,Re)},p(Ae,[Re]){Re&2&&Ms(se,"is-dark",Ae[1]),Re&1&&Xa(se,"--pos-x",Ae[0].x),Re&1&&Xa(se,"--pos-y",Ae[0].y)},i:xi,o:xi,d(Ae){Ae&&Er(se)}}}function Ay(re,se,Ae){let{pos:Re}=se,{isDark:Ge}=se;return re.$$set=N=>{"pos"in N&&Ae(0,Re=N.pos),"isDark"in N&&Ae(1,Ge=N.isDark)},[Re,Ge]}class Sy extends Fa{constructor(se){super(),za(this,se,Ay,My,Ra,{pos:0,isDark:1})}}function Ey(re){let se,Ae,Re,Ge,N,L,e,T,w,i;return{c(){se=br("input"),Re=qr(),Ge=br("input"),L=qr(),e=br("input"),Un(se,"aria-label",Ae=re[4].label.h),se.value=re[9],Un(se,"type","number"),Un(se,"min","0"),Un(se,"max","360"),Un(se,"class","svelte-1mk8abz"),Un(Ge,"aria-label",N=re[4].label.s),Ge.value=re[8],Un(Ge,"type","number"),Un(Ge,"min","0"),Un(Ge,"max","100"),Un(Ge,"class","svelte-1mk8abz"),Un(e,"aria-label",T=re[4].label.v),e.value=re[7],Un(e,"type","number"),Un(e,"min","0"),Un(e,"max","100"),Un(e,"class","svelte-1mk8abz")},m(_,v){Lr(_,se,v),Lr(_,Re,v),Lr(_,Ge,v),Lr(_,L,v),Lr(_,e,v),w||(i=[ji(se,"input",re[13]("h")),ji(Ge,"input",re[13]("s")),ji(e,"input",re[13]("v"))],w=!0)},p(_,v){v&16&&Ae!==(Ae=_[4].label.h)&&Un(se,"aria-label",Ae),v&512&&se.value!==_[9]&&(se.value=_[9]),v&16&&N!==(N=_[4].label.s)&&Un(Ge,"aria-label",N),v&256&&Ge.value!==_[8]&&(Ge.value=_[8]),v&16&&T!==(T=_[4].label.v)&&Un(e,"aria-label",T),v&128&&e.value!==_[7]&&(e.value=_[7])},d(_){_&&(Er(se),Er(Re),Er(Ge),Er(L),Er(e)),w=!1,Fl(i)}}}function Ly(re){let se,Ae,Re,Ge,N,L,e,T,w,i,_,v,h;return{c(){se=br("input"),Ge=qr(),N=br("input"),T=qr(),w=br("input"),Un(se,"aria-label",Ae=re[4].label.r),se.value=Re=re[0].r,Un(se,"type","number"),Un(se,"min","0"),Un(se,"max","255"),Un(se,"class","svelte-1mk8abz"),Un(N,"aria-label",L=re[4].label.g),N.value=e=re[0].g,Un(N,"type","number"),Un(N,"min","0"),Un(N,"max","255"),Un(N,"class","svelte-1mk8abz"),Un(w,"aria-label",i=re[4].label.b),w.value=_=re[0].b,Un(w,"type","number"),Un(w,"min","0"),Un(w,"max","255"),Un(w,"class","svelte-1mk8abz")},m(s,t){Lr(s,se,t),Lr(s,Ge,t),Lr(s,N,t),Lr(s,T,t),Lr(s,w,t),v||(h=[ji(se,"input",re[12]("r")),ji(N,"input",re[12]("g")),ji(w,"input",re[12]("b"))],v=!0)},p(s,t){t&16&&Ae!==(Ae=s[4].label.r)&&Un(se,"aria-label",Ae),t&1&&Re!==(Re=s[0].r)&&se.value!==Re&&(se.value=Re),t&16&&L!==(L=s[4].label.g)&&Un(N,"aria-label",L),t&1&&e!==(e=s[0].g)&&N.value!==e&&(N.value=e),t&16&&i!==(i=s[4].label.b)&&Un(w,"aria-label",i),t&1&&_!==(_=s[0].b)&&w.value!==_&&(w.value=_)},d(s){s&&(Er(se),Er(Ge),Er(N),Er(T),Er(w)),v=!1,Fl(h)}}}function Cy(re){let se,Ae,Re,Ge;return{c(){se=br("input"),Un(se,"aria-label",Ae=re[4].label.hex),se.value=re[1],Un(se,"class","svelte-1mk8abz"),Xa(se,"flex",3)},m(N,L){Lr(N,se,L),Re||(Ge=ji(se,"input",re[11]),Re=!0)},p(N,L){L&16&&Ae!==(Ae=N[4].label.hex)&&Un(se,"aria-label",Ae),L&2&&se.value!==N[1]&&(se.value=N[1])},d(N){N&&Er(se),Re=!1,Ge()}}}function g1(re){let se,Ae,Re,Ge;return{c(){se=br("input"),Un(se,"aria-label",Ae=re[4].label.a),se.value=re[6],Un(se,"type","number"),Un(se,"min","0"),Un(se,"max","1"),Un(se,"step","0.01"),Un(se,"class","svelte-1mk8abz")},m(N,L){Lr(N,se,L),Re||(Ge=ji(se,"input",function(){lc(re[5]==="hsv"?re[13]("a"):re[12]("a"))&&(re[5]==="hsv"?re[13]("a"):re[12]("a")).apply(this,arguments)}),Re=!0)},p(N,L){re=N,L&16&&Ae!==(Ae=re[4].label.a)&&Un(se,"aria-label",Ae),L&64&&se.value!==re[6]&&(se.value=re[6])},d(N){N&&Er(se),Re=!1,Ge()}}}function Oy(re){let se,Ae=re[4].color[re[5]]+"",Re;return{c(){se=br("div"),Re=li(Ae),Un(se,"class","button-like svelte-1mk8abz")},m(Ge,N){Lr(Ge,se,N),ar(se,Re)},p(Ge,N){N&48&&Ae!==(Ae=Ge[4].color[Ge[5]]+"")&&Pi(Re,Ae)},d(Ge){Ge&&Er(se)}}}function Py(re){let se,Ae,Re=re[4].color[re[5]]+"",Ge,N,L,e=re[4].changeTo+"",T,w,i,_,v;return{c(){se=br("button"),Ae=br("span"),Ge=li(Re),N=qr(),L=br("span"),T=li(e),w=qr(),i=li(re[10]),Un(Ae,"class","disappear svelte-1mk8abz"),Un(Ae,"aria-hidden","true"),Un(L,"class","appear svelte-1mk8abz"),Un(se,"type","button"),Un(se,"class","svelte-1mk8abz")},m(h,s){Lr(h,se,s),ar(se,Ae),ar(Ae,Ge),ar(se,N),ar(se,L),ar(L,T),ar(L,w),ar(L,i),_||(v=ji(se,"click",re[15]),_=!0)},p(h,s){s&48&&Re!==(Re=h[4].color[h[5]]+"")&&Pi(Ge,Re),s&16&&e!==(e=h[4].changeTo+"")&&Pi(T,e),s&1024&&Pi(i,h[10])},d(h){h&&Er(se),_=!1,v()}}}function Iy(re){let se,Ae,Re,Ge;function N(v,h){return v[5]==="hex"?Cy:v[5]==="rgb"?Ly:Ey}let L=N(re),e=L(re),T=re[2]&&g1(re);function w(v,h){return v[3].length>1?Py:Oy}let i=w(re),_=i(re);return{c(){se=br("div"),Ae=br("div"),e.c(),Re=qr(),T&&T.c(),Ge=qr(),_.c(),Un(Ae,"class","input-container svelte-1mk8abz"),Un(se,"class","text-input svelte-1mk8abz")},m(v,h){Lr(v,se,h),ar(se,Ae),e.m(Ae,null),ar(Ae,Re),T&&T.m(Ae,null),ar(se,Ge),_.m(se,null)},p(v,[h]){L===(L=N(v))&&e?e.p(v,h):(e.d(1),e=L(v),e&&(e.c(),e.m(Ae,Re))),v[2]?T?T.p(v,h):(T=g1(v),T.c(),T.m(Ae,null)):T&&(T.d(1),T=null),i===(i=w(v))&&_?_.p(v,h):(_.d(1),_=i(v),_&&(_.c(),_.m(se,null)))},i:xi,o:xi,d(v){v&&Er(se),e.d(),T&&T.d(),_.d()}}}const Dy=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;function Ry(re,se,Ae){let Re,Ge,N,L,e;const T=jh();let{isAlpha:w}=se,{rgb:i}=se,{hsv:_}=se,{hex:v}=se,{textInputModes:h}=se,{texts:s}=se,t=h[0]||"hex";function a(o){const u=o.target;Dy.test(u.value)&&(Ae(1,v=u.value),T("input",{hex:v}))}function n(o){return function(u){Ae(0,i={...i,[o]:parseFloat(u.target.value)}),T("input",{rgb:i})}}function r(o){return function(u){Ae(14,_={..._,[o]:parseFloat(u.target.value)}),T("input",{hsv:_})}}const l=()=>Ae(5,t=Re);return re.$$set=o=>{"isAlpha"in o&&Ae(2,w=o.isAlpha),"rgb"in o&&Ae(0,i=o.rgb),"hsv"in o&&Ae(14,_=o.hsv),"hex"in o&&Ae(1,v=o.hex),"textInputModes"in o&&Ae(3,h=o.textInputModes),"texts"in o&&Ae(4,s=o.texts)},re.$$.update=()=>{re.$$.dirty&40&&Ae(10,Re=h[(h.indexOf(t)+1)%h.length]),re.$$.dirty&16384&&Ae(9,Ge=Math.round(_.h)),re.$$.dirty&16384&&Ae(8,N=Math.round(_.s)),re.$$.dirty&16384&&Ae(7,L=Math.round(_.v)),re.$$.dirty&16384&&Ae(6,e=_.a===void 0?1:Math.round(_.a*100)/100)},[i,v,w,h,s,t,e,L,N,Ge,Re,a,n,r,_,l]}class zy extends Fa{constructor(se){super(),za(this,se,Ry,Iy,Ra,{isAlpha:2,rgb:0,hsv:14,hex:1,textInputModes:3,texts:4})}}function Fy(re){let se,Ae,Re,Ge,N,L,e,T,w,i,_;return{c(){se=br("label"),Ae=br("div"),Re=br("input"),Ge=qr(),N=br("div"),L=qr(),e=br("div"),T=qr(),w=li(re[2]),Un(Re,"type","color"),Un(Re,"name",re[3]),Re.value=re[1],Un(Re,"aria-haspopup","dialog"),Un(Re,"class","svelte-lemcb1"),Un(N,"class","alpha svelte-lemcb1"),Un(e,"class","color svelte-lemcb1"),Xa(e,"background",re[1]),Un(Ae,"class","container svelte-lemcb1"),Un(se,"class","svelte-lemcb1")},m(v,h){Lr(v,se,h),ar(se,Ae),ar(Ae,Re),ar(Ae,Ge),ar(Ae,N),ar(Ae,L),ar(Ae,e),ar(se,T),ar(se,w),re[5](se),i||(_=[ji(Re,"click",xu(Mh)),ji(Re,"mousedown",xu(Mh)),ji(se,"click",xu(Mh)),ji(se,"mousedown",xu(Mh))],i=!0)},p(v,[h]){h&8&&Un(Re,"name",v[3]),h&2&&(Re.value=v[1]),h&2&&Xa(e,"background",v[1]),h&4&&Pi(w,v[2])},i:xi,o:xi,d(v){v&&Er(se),re[5](null),i=!1,Fl(_)}}}function Mh(){}function By(re,se,Ae){let{labelElement:Re}=se,{hex:Ge}=se,{label:N}=se,{name:L=void 0}=se,{isOpen:e}=se;function T(w){Ja[w?"unshift":"push"](()=>{Re=w,Ae(0,Re)})}return re.$$set=w=>{"labelElement"in w&&Ae(0,Re=w.labelElement),"hex"in w&&Ae(1,Ge=w.hex),"label"in w&&Ae(2,N=w.label),"name"in w&&Ae(3,L=w.name),"isOpen"in w&&Ae(4,e=w.isOpen)},[Re,Ge,N,L,e,T]}class Ny extends Fa{constructor(se){super(),za(this,se,By,Fy,Ra,{labelElement:0,hex:1,label:2,name:3,isOpen:4})}}function jy(re){let se,Ae,Re;const Ge=re[4].default,N=ig(Ge,re,re[3],null);return{c(){se=br("div"),N&&N.c(),Un(se,"class","wrapper svelte-h9ar9"),Un(se,"role",Ae=re[2]?"dialog":void 0),Un(se,"aria-label","color picker"),Ms(se,"is-open",re[1])},m(L,e){Lr(L,se,e),N&&N.m(se,null),re[5](se),Re=!0},p(L,[e]){N&&N.p&&(!Re||e&8)&&sg(N,Ge,L,L[3],Re?og(Ge,L[3],e,null):lg(L[3]),null),(!Re||e&4&&Ae!==(Ae=L[2]?"dialog":void 0))&&Un(se,"role",Ae),(!Re||e&2)&&Ms(se,"is-open",L[1])},i(L){Re||(Qr(N,L),Re=!0)},o(L){ti(N,L),Re=!1},d(L){L&&Er(se),N&&N.d(L),re[5](null)}}}function Uy(re,se,Ae){let{$$slots:Re={},$$scope:Ge}=se,{wrapper:N}=se,{isOpen:L}=se,{isDialog:e}=se;function T(w){Ja[w?"unshift":"push"](()=>{N=w,Ae(0,N)})}return re.$$set=w=>{"wrapper"in w&&Ae(0,N=w.wrapper),"isOpen"in w&&Ae(1,L=w.isOpen),"isDialog"in w&&Ae(2,e=w.isDialog),"$$scope"in w&&Ae(3,Ge=w.$$scope)},[N,L,e,Ge,Re,T]}let Vy=class extends Fa{constructor(se){super(),za(this,se,Uy,jy,Ra,{wrapper:0,isOpen:1,isDialog:2})}};const qp={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},dg="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function Hy(re){return function(se){if(se.target===window)return;const Ae=se.target;if(!re.contains(Ae))return;const Re=re.querySelectorAll(dg),Ge=Re[0],N=Re[Re.length-1];function L(T){return T.code==="Tab"&&!T.shiftKey}function e(T){return T.code==="Tab"&&T.shiftKey}L(se)&&se.target===N?(se.preventDefault(),Ge.focus()):e(se)&&se.target===Ge&&(se.preventDefault(),N.focus())}}const qy=re=>{const se=re.querySelector(dg);se&&se.focus();const Ae=Hy(re);return document.addEventListener("keydown",Ae),{destroy(){document.removeEventListener("keydown",Ae)}}};function Yy(re){let se,Ae,Re,Ge,N,L,e=re[1].label.withoutColor+"",T,w,i;return{c(){se=br("label"),Ae=br("div"),Re=br("input"),Ge=qr(),N=br("span"),L=qr(),T=li(e),Un(Re,"type","checkbox"),Un(Re,"class","svelte-oskb5b"),Un(N,"class","svelte-oskb5b"),Un(Ae,"class","svelte-oskb5b"),Un(se,"class","nullability-checkbox svelte-oskb5b")},m(_,v){Lr(_,se,v),ar(se,Ae),ar(Ae,Re),Re.checked=re[0],ar(Ae,Ge),ar(Ae,N),ar(se,L),ar(se,T),w||(i=ji(Re,"change",re[2]),w=!0)},p(_,[v]){v&1&&(Re.checked=_[0]),v&2&&e!==(e=_[1].label.withoutColor+"")&&Pi(T,e)},i:xi,o:xi,d(_){_&&Er(se),w=!1,i()}}}function Gy(re,se,Ae){let{isUndefined:Re}=se,{texts:Ge}=se;function N(){Re=this.checked,Ae(0,Re)}return re.$$set=L=>{"isUndefined"in L&&Ae(0,Re=L.isUndefined),"texts"in L&&Ae(1,Ge=L.texts)},[Re,Ge,N]}class Wy extends Fa{constructor(se){super(),za(this,se,Gy,Yy,Ra,{isUndefined:0,texts:1})}}function Zy(re){let se;return{c(){se=br("input"),Un(se,"type","hidden"),se.value=re[2],Un(se,"name",re[6])},m(Ae,Re){Lr(Ae,se,Re)},p(Ae,Re){Re[0]&4&&(se.value=Ae[2]),Re[0]&64&&Un(se,"name",Ae[6])},i:xi,o:xi,d(Ae){Ae&&Er(se)}}}function Xy(re){let se,Ae,Re,Ge;function N(T){re[33](T)}var L=re[23]().input;function e(T,w){let i={isOpen:!0,hex:T[2],label:T[5],name:T[6]};return T[21]!==void 0&&(i.labelElement=T[21]),{props:i}}return L&&(se=fl(L,e(re)),Ja.push(()=>nu(se,"labelElement",N))),{c(){se&&ta(se.$$.fragment),Re=As()},m(T,w){se&&Zi(se,T,w),Lr(T,Re,w),Ge=!0},p(T,w){if(L!==(L=T[23]().input)){if(se){qs();const i=se;ti(i.$$.fragment,1,0,()=>{Xi(i,1)}),Ys()}L?(se=fl(L,e(T)),Ja.push(()=>nu(se,"labelElement",N)),ta(se.$$.fragment),Qr(se.$$.fragment,1),Zi(se,Re.parentNode,Re)):se=null}else if(L){const i={};w[0]&4&&(i.hex=T[2]),w[0]&32&&(i.label=T[5]),w[0]&64&&(i.name=T[6]),!Ae&&w[0]&2097152&&(Ae=!0,i.labelElement=T[21],hc(()=>Ae=!1)),se.$set(i)}},i(T){Ge||(se&&Qr(se.$$.fragment,T),Ge=!0)},o(T){se&&ti(se.$$.fragment,T),Ge=!1},d(T){T&&Er(Re),se&&Xi(se,T)}}}function v1(re){let se,Ae,Re,Ge;function N(T){re[34](T)}var L=re[23]().nullabilityCheckbox;function e(T,w){let i={texts:T[24]()};return T[16]!==void 0&&(i.isUndefined=T[16]),{props:i}}return L&&(se=fl(L,e(re)),Ja.push(()=>nu(se,"isUndefined",N))),{c(){se&&ta(se.$$.fragment),Re=As()},m(T,w){se&&Zi(se,T,w),Lr(T,Re,w),Ge=!0},p(T,w){if(L!==(L=T[23]().nullabilityCheckbox)){if(se){qs();const i=se;ti(i.$$.fragment,1,0,()=>{Xi(i,1)}),Ys()}L?(se=fl(L,e(T)),Ja.push(()=>nu(se,"isUndefined",N)),ta(se.$$.fragment),Qr(se.$$.fragment,1),Zi(se,Re.parentNode,Re)):se=null}else if(L){const i={};!Ae&&w[0]&65536&&(Ae=!0,i.isUndefined=T[16],hc(()=>Ae=!1)),se.$set(i)}},i(T){Ge||(se&&Qr(se.$$.fragment,T),Ge=!0)},o(T){se&&ti(se.$$.fragment,T),Ge=!1},d(T){T&&Er(Re),se&&Xi(se,T)}}}function m1(re){var Ge;let se,Ae,Re;return Ae=new Dh({props:{min:0,max:1,step:.01,value:((Ge=re[1])==null?void 0:Ge.a)??re[18].a,direction:re[12],reverse:re[12]==="vertical",ariaLabel:re[24]().label.a}}),Ae.$on("input",re[27]("a")),{c(){se=br("div"),ta(Ae.$$.fragment),Un(se,"class","a svelte-1n1d6qa"),Xa(se,"--alphaless-color",(re[2]?re[2]:re[19]).substring(0,7))},m(N,L){Lr(N,se,L),Zi(Ae,se,null),Re=!0},p(N,L){var T;const e={};L[0]&262146&&(e.value=((T=N[1])==null?void 0:T.a)??N[18].a),L[0]&4096&&(e.direction=N[12]),L[0]&4096&&(e.reverse=N[12]==="vertical"),Ae.$set(e),L[0]&524292&&Xa(se,"--alphaless-color",(N[2]?N[2]:N[19]).substring(0,7))},i(N){Re||(Qr(Ae.$$.fragment,N),Re=!0)},o(N){ti(Ae.$$.fragment,N),Re=!1},d(N){N&&Er(se),Xi(Ae)}}}function y1(re){let se,Ae,Re;var Ge=re[23]().textInput;function N(L,e){return{props:{hex:L[2]??L[19],rgb:L[0]??L[17],hsv:L[1]??L[18],isAlpha:L[8],textInputModes:L[11],texts:L[24]()}}}return Ge&&(se=fl(Ge,N(re)),se.$on("input",re[35])),{c(){se&&ta(se.$$.fragment),Ae=As()},m(L,e){se&&Zi(se,L,e),Lr(L,Ae,e),Re=!0},p(L,e){if(Ge!==(Ge=L[23]().textInput)){if(se){qs();const T=se;ti(T.$$.fragment,1,0,()=>{Xi(T,1)}),Ys()}Ge?(se=fl(Ge,N(L)),se.$on("input",L[35]),ta(se.$$.fragment),Qr(se.$$.fragment,1),Zi(se,Ae.parentNode,Ae)):se=null}else if(Ge){const T={};e[0]&524292&&(T.hex=L[2]??L[19]),e[0]&131073&&(T.rgb=L[0]??L[17]),e[0]&262146&&(T.hsv=L[1]??L[18]),e[0]&256&&(T.isAlpha=L[8]),e[0]&2048&&(T.textInputModes=L[11]),se.$set(T)}},i(L){Re||(se&&Qr(se.$$.fragment,L),Re=!0)},o(L){se&&ti(se.$$.fragment,L),Re=!1},d(L){L&&Er(Ae),se&&Xi(se,L)}}}function Jy(re){let se,Ae,Re;var Ge=re[23]().a11yNotice;function N(L,e){return{props:{components:L[23](),a11yColors:L[13],hex:L[2]||"#00000000",a11yTexts:L[15],a11yLevel:L[14]}}}return Ge&&(se=fl(Ge,N(re))),{c(){se&&ta(se.$$.fragment),Ae=As()},m(L,e){se&&Zi(se,L,e),Lr(L,Ae,e),Re=!0},p(L,e){if(Ge!==(Ge=L[23]().a11yNotice)){if(se){qs();const T=se;ti(T.$$.fragment,1,0,()=>{Xi(T,1)}),Ys()}Ge?(se=fl(Ge,N(L)),ta(se.$$.fragment),Qr(se.$$.fragment,1),Zi(se,Ae.parentNode,Ae)):se=null}else if(Ge){const T={};e[0]&8192&&(T.a11yColors=L[13]),e[0]&4&&(T.hex=L[2]||"#00000000"),e[0]&32768&&(T.a11yTexts=L[15]),e[0]&16384&&(T.a11yLevel=L[14]),se.$set(T)}},i(L){Re||(se&&Qr(se.$$.fragment,L),Re=!0)},o(L){se&&ti(se.$$.fragment,L),Re=!1},d(L){L&&Er(Ae),se&&Xi(se,L)}}}function Ky(re){var a,n,r,l;let se,Ae,Re,Ge,N,L,e,T,w=re[23]().a11yNotice,i,_,v=re[7]&&v1(re);Ae=new ky({props:{components:re[23](),h:((a=re[1])==null?void 0:a.h)??re[18].h,s:((n=re[1])==null?void 0:n.s)??re[18].s,v:((r=re[1])==null?void 0:r.v)??re[18].v,isDark:re[3]}}),Ae.$on("input",re[28](["s","v"])),N=new Dh({props:{min:0,max:360,step:1,value:((l=re[1])==null?void 0:l.h)??re[18].h,direction:re[12],reverse:re[12]==="vertical",ariaLabel:re[24]().label.h}}),N.$on("input",re[27]("h"));let h=re[8]&&m1(re),s=re[10]&&y1(re),t=w&&Jy(re);return{c(){v&&v.c(),se=qr(),ta(Ae.$$.fragment),Re=qr(),Ge=br("div"),ta(N.$$.fragment),L=qr(),h&&h.c(),e=qr(),s&&s.c(),T=qr(),t&&t.c(),i=As(),Un(Ge,"class","h svelte-1n1d6qa")},m(o,u){v&&v.m(o,u),Lr(o,se,u),Zi(Ae,o,u),Lr(o,Re,u),Lr(o,Ge,u),Zi(N,Ge,null),Lr(o,L,u),h&&h.m(o,u),Lr(o,e,u),s&&s.m(o,u),Lr(o,T,u),t&&t.m(o,u),Lr(o,i,u),_=!0},p(o,u){var b,g,d,m;o[7]?v?(v.p(o,u),u[0]&128&&Qr(v,1)):(v=v1(o),v.c(),Qr(v,1),v.m(se.parentNode,se)):v&&(qs(),ti(v,1,1,()=>{v=null}),Ys());const p={};u[0]&262146&&(p.h=((b=o[1])==null?void 0:b.h)??o[18].h),u[0]&262146&&(p.s=((g=o[1])==null?void 0:g.s)??o[18].s),u[0]&262146&&(p.v=((d=o[1])==null?void 0:d.v)??o[18].v),u[0]&8&&(p.isDark=o[3]),Ae.$set(p);const c={};u[0]&262146&&(c.value=((m=o[1])==null?void 0:m.h)??o[18].h),u[0]&4096&&(c.direction=o[12]),u[0]&4096&&(c.reverse=o[12]==="vertical"),N.$set(c),o[8]?h?(h.p(o,u),u[0]&256&&Qr(h,1)):(h=m1(o),h.c(),Qr(h,1),h.m(e.parentNode,e)):h&&(qs(),ti(h,1,1,()=>{h=null}),Ys()),o[10]?s?(s.p(o,u),u[0]&1024&&Qr(s,1)):(s=y1(o),s.c(),Qr(s,1),s.m(T.parentNode,T)):s&&(qs(),ti(s,1,1,()=>{s=null}),Ys()),w&&t.p(o,u)},i(o){_||(Qr(v),Qr(Ae.$$.fragment,o),Qr(N.$$.fragment,o),Qr(h),Qr(s),Qr(t),_=!0)},o(o){ti(v),ti(Ae.$$.fragment,o),ti(N.$$.fragment,o),ti(h),ti(s),ti(t),_=!1},d(o){o&&(Er(se),Er(Re),Er(Ge),Er(L),Er(e),Er(T),Er(i)),v&&v.d(o),Xi(Ae,o),Xi(N),h&&h.d(o),s&&s.d(o),t&&t.d(o)}}}function Qy(re){let se,Ae,Re,Ge,N,L,e,T,w,i;const _=[Xy,Zy],v=[];function h(n,r){return n[9]?0:n[6]?1:-1}~(Ae=h(re))&&(Re=v[Ae]=_[Ae](re));function s(n){re[36](n)}var t=re[23]().wrapper;function a(n,r){let l={isOpen:n[4],isDialog:n[9],$$slots:{default:[Ky]},$$scope:{ctx:n}};return n[22]!==void 0&&(l.wrapper=n[22]),{props:l}}return t&&(N=fl(t,a(re)),Ja.push(()=>nu(N,"wrapper",s))),{c(){se=br("span"),Re&&Re.c(),Ge=qr(),N&&ta(N.$$.fragment),Un(se,"class",e="color-picker "+re[12]+" svelte-1n1d6qa")},m(n,r){Lr(n,se,r),~Ae&&v[Ae].m(se,null),ar(se,Ge),N&&Zi(N,se,null),re[37](se),T=!0,w||(i=[ji(window,"mousedown",re[25]),ji(window,"keyup",re[26])],w=!0)},p(n,r){let l=Ae;if(Ae=h(n),Ae===l?~Ae&&v[Ae].p(n,r):(Re&&(qs(),ti(v[l],1,1,()=>{v[l]=null}),Ys()),~Ae?(Re=v[Ae],Re?Re.p(n,r):(Re=v[Ae]=_[Ae](n),Re.c()),Qr(Re,1),Re.m(se,Ge)):Re=null),t!==(t=n[23]().wrapper)){if(N){qs();const o=N;ti(o.$$.fragment,1,0,()=>{Xi(o,1)}),Ys()}t?(N=fl(t,a(n)),Ja.push(()=>nu(N,"wrapper",s)),ta(N.$$.fragment),Qr(N.$$.fragment,1),Zi(N,se,null)):N=null}else if(t){const o={};r[0]&16&&(o.isOpen=n[4]),r[0]&512&&(o.isDialog=n[9]),r[0]&1047951|r[1]&4096&&(o.$$scope={dirty:r,ctx:n}),!L&&r[0]&4194304&&(L=!0,o.wrapper=n[22],hc(()=>L=!1)),N.$set(o)}(!T||r[0]&4096&&e!==(e="color-picker "+n[12]+" svelte-1n1d6qa"))&&Un(se,"class",e)},i(n){T||(Qr(Re),N&&Qr(N.$$.fragment,n),T=!0)},o(n){ti(Re),N&&ti(N.$$.fragment,n),T=!1},d(n){n&&Er(se),~Ae&&v[Ae].d(),N&&Xi(N),re[37](null),w=!1,Fl(i)}}}function $y(re,se,Ae){const Re=jh();let{components:Ge={}}=se,{label:N="Choose a color"}=se,{name:L=void 0}=se,{nullable:e=!1}=se,{rgb:T=e?void 0:{r:255,g:0,b:0,a:1}}=se,{hsv:w=e?void 0:{h:0,s:100,v:100,a:1}}=se,{hex:i=e?void 0:"#ff0000"}=se,{color:_=void 0}=se,{isDark:v=!1}=se,{isAlpha:h=!0}=se,{isDialog:s=!0}=se,{isOpen:t=!s}=se,{isTextInput:a=!0}=se,{textInputModes:n=["hex","rgb","hsv"]}=se,{sliderDirection:r="vertical"}=se,{disableCloseClickOutside:l=!1}=se,{a11yColors:o=[{bgHex:"#ffffff"}]}=se,{a11yLevel:u="AA"}=se,{texts:p=void 0}=se,{a11yTexts:c=void 0}=se,b={r:255,g:0,b:0,a:1},g={h:0,s:100,v:100,a:1},d="#ff0000",m=!1,x=m,y,k,f,S;const M={pickerIndicator:Sy,textInput:zy,input:Ny,nullabilityCheckbox:Wy,wrapper:Vy};function E(){return{...M,...Ge}}function O(){return{label:{...qp.label,...p==null?void 0:p.label},color:{...qp.color,...p==null?void 0:p.color},changeTo:(p==null?void 0:p.changeTo)??qp.changeTo}}function P({target:te}){s&&(k.contains(te)||k.isSameNode(te)?Ae(4,t=!t):t&&!f.contains(te)&&!l&&Ae(4,t=!1))}function I({key:te,target:$}){if(s)te==="Enter"&&k.contains($)?(Ae(4,t=!t),setTimeout(()=>{S=qy(f)})):te==="Escape"&&t&&(Ae(4,t=!1),y.contains($)&&(k==null||k.focus(),S==null||S.destroy()));else return}function z(){if(m&&!x){x=!0,Ae(1,w=Ae(0,T=Ae(2,i=void 0))),Re("input",{color:_,hsv:w,rgb:T,hex:i});return}else if(x&&!m){x=!1,Ae(1,w=g),Ae(0,T=b),Ae(2,i=d),Re("input",{color:_,hsv:w,rgb:T,hex:i});return}if(!w&&!T&&!i){Ae(16,m=!0),x=!0,Re("input",{color:void 0,hsv:w,rgb:T,hex:i});return}w&&T&&w.h===g.h&&w.s===g.s&&w.v===g.v&&w.a===g.a&&T.r===b.r&&T.g===b.g&&T.b===b.b&&T.a===b.a&&i===d||(Ae(16,m=!1),w&&w.a===void 0&&Ae(1,w.a=1,w),g.a===void 0&&Ae(18,g.a=1,g),T&&T.a===void 0&&Ae(0,T.a=1,T),b.a===void 0&&Ae(17,b.a=1,b),(i==null?void 0:i.substring(7))==="ff"&&Ae(2,i=i.substring(0,7)),(i==null?void 0:i.substring(7))==="ff"&&Ae(2,i=i.substring(0,7)),w&&(w.h!==g.h||w.s!==g.s||w.v!==g.v||w.a!==g.a)?(Ae(29,_=Hs(w)),Ae(0,T=_.toRgb()),Ae(2,i=_.toHex())):T&&(T.r!==b.r||T.g!==b.g||T.b!==b.b||T.a!==b.a)?(Ae(29,_=Hs(T)),Ae(2,i=_.toHex()),Ae(1,w=_.toHsv())):i&&i!==d&&(Ae(29,_=Hs(i)),Ae(0,T=_.toRgb()),Ae(1,w=_.toHsv())),_&&Ae(3,v=_.isDark()),i&&(Ae(18,g=Object.assign({},w)),Ae(17,b=Object.assign({},T)),Ae(19,d=i),x=m,Re("input",{color:_,hsv:w,rgb:T,hex:i})))}function U(te){return $=>{w||Ae(1,w={...g}),Ae(1,w[te]=$.detail,w)}}function R(te){return $=>{w||Ae(1,w={...g}),te.forEach(J=>{w&&Ae(1,w[J]=$.detail[J],w)})}}function j(te){k=te,Ae(21,k)}function Z(te){m=te,Ae(16,m)}const F=({detail:te})=>{te.hsv?Ae(1,w=te.hsv):te.rgb?Ae(0,T=te.rgb):te.hex&&Ae(2,i=te.hex)};function V(te){f=te,Ae(22,f)}function H(te){Ja[te?"unshift":"push"](()=>{y=te,Ae(20,y)})}return re.$$set=te=>{"components"in te&&Ae(30,Ge=te.components),"label"in te&&Ae(5,N=te.label),"name"in te&&Ae(6,L=te.name),"nullable"in te&&Ae(7,e=te.nullable),"rgb"in te&&Ae(0,T=te.rgb),"hsv"in te&&Ae(1,w=te.hsv),"hex"in te&&Ae(2,i=te.hex),"color"in te&&Ae(29,_=te.color),"isDark"in te&&Ae(3,v=te.isDark),"isAlpha"in te&&Ae(8,h=te.isAlpha),"isDialog"in te&&Ae(9,s=te.isDialog),"isOpen"in te&&Ae(4,t=te.isOpen),"isTextInput"in te&&Ae(10,a=te.isTextInput),"textInputModes"in te&&Ae(11,n=te.textInputModes),"sliderDirection"in te&&Ae(12,r=te.sliderDirection),"disableCloseClickOutside"in te&&Ae(31,l=te.disableCloseClickOutside),"a11yColors"in te&&Ae(13,o=te.a11yColors),"a11yLevel"in te&&Ae(14,u=te.a11yLevel),"texts"in te&&Ae(32,p=te.texts),"a11yTexts"in te&&Ae(15,c=te.a11yTexts)},re.$$.update=()=>{re.$$.dirty[0]&7&&(w||T||i)&&z(),re.$$.dirty[0]&65536&&z()},[T,w,i,v,t,N,L,e,h,s,a,n,r,o,u,c,m,b,g,d,y,k,f,E,O,P,I,U,R,_,Ge,l,p,j,Z,F,V,H]}class ex extends Fa{constructor(se){super(),za(this,se,$y,Qy,Ra,{components:30,label:5,name:6,nullable:7,rgb:0,hsv:1,hex:2,color:29,isDark:3,isAlpha:8,isDialog:9,isOpen:4,isTextInput:10,textInputModes:11,sliderDirection:12,disableCloseClickOutside:31,a11yColors:13,a11yLevel:14,texts:32,a11yTexts:15},null,[-1,-1])}}function tx(re){let se,Ae,Re;const Ge=re[4].default,N=ig(Ge,re,re[3],null);return{c(){se=br("div"),N&&N.c(),Un(se,"class","wrapper svelte-1le3y9a"),Un(se,"role",Ae=re[2]?"dialog":void 0),Un(se,"aria-label","color picker"),Ms(se,"is-open",re[1])},m(L,e){Lr(L,se,e),N&&N.m(se,null),re[5](se),Re=!0},p(L,[e]){N&&N.p&&(!Re||e&8)&&sg(N,Ge,L,L[3],Re?og(Ge,L[3],e,null):lg(L[3]),null),(!Re||e&4&&Ae!==(Ae=L[2]?"dialog":void 0))&&Un(se,"role",Ae),(!Re||e&2)&&Ms(se,"is-open",L[1])},i(L){Re||(Qr(N,L),Re=!0)},o(L){ti(N,L),Re=!1},d(L){L&&Er(se),N&&N.d(L),re[5](null)}}}function nx(re,se,Ae){let{$$slots:Re={},$$scope:Ge}=se,{wrapper:N}=se,{isOpen:L}=se,{isDialog:e}=se;function T(w){Ja[w?"unshift":"push"](()=>{N=w,Ae(0,N)})}return re.$$set=w=>{"wrapper"in w&&Ae(0,N=w.wrapper),"isOpen"in w&&Ae(1,L=w.isOpen),"isDialog"in w&&Ae(2,e=w.isDialog),"$$scope"in w&&Ae(3,Ge=w.$$scope)},[N,L,e,Ge,Re,T]}class rx extends Fa{constructor(se){super(),za(this,se,nx,tx,Ra,{wrapper:0,isOpen:1,isDialog:2})}}const ix={wrapper:rx};function x1(re){let se,Ae=Object.keys(re[1]).length+"",Re,Ge,N=Object.keys(re[1]).length==1?"warning":"warnings",L,e,T;return{c(){se=br("button"),Re=li(Ae),Ge=qr(),L=li(N),Un(se,"class","warning svelte-abq8jd")},m(w,i){Lr(w,se,i),ar(se,Re),ar(se,Ge),ar(se,L),e||(T=ji(se,"click",gg),e=!0)},p(w,i){i&2&&Ae!==(Ae=Object.keys(w[1]).length+"")&&Pi(Re,Ae),i&2&&N!==(N=Object.keys(w[1]).length==1?"warning":"warnings")&&Pi(L,N)},d(w){w&&Er(se),e=!1,T()}}}function b1(re){let se,Ae=Object.keys(re[2]).length+"",Re,Ge,N=Object.keys(re[2]).length==1?"error":"errors",L,e,T;return{c(){se=br("button"),Re=li(Ae),Ge=qr(),L=li(N),Un(se,"class","error svelte-abq8jd")},m(w,i){Lr(w,se,i),ar(se,Re),ar(se,Ge),ar(se,L),e||(T=ji(se,"click",gg),e=!0)},p(w,i){i&4&&Ae!==(Ae=Object.keys(w[2]).length+"")&&Pi(Re,Ae),i&4&&N!==(N=Object.keys(w[2]).length==1?"error":"errors")&&Pi(L,N)},d(w){w&&Er(se),e=!1,T()}}}function ax(re){let se,Ae,Re,Ge,N,L=re[3].toLocaleString()+"",e,T,w,i,_,v,h,s,t=Object.keys(re[1]).length>=1,a,n=Object.keys(re[2]).length>=1,r;function l(c){re[5](c)}let o={components:ix,sliderDirection:"horizontal",label:""};re[0]!==void 0&&(o.hex=re[0]),v=new ex({props:o}),Ja.push(()=>nu(v,"hex",l)),v.$on("input",re[4]);let u=t&&x1(re),p=n&&b1(re);return{c(){se=br("div"),Ae=br("div"),Re=br("div"),Re.innerHTML='<div class="logo svelte-abq8jd">Log Analyzer</div>',Ge=qr(),N=br("div"),e=li(L),T=li(" lines"),w=qr(),i=br("div"),_=br("div"),ta(v.$$.fragment),s=qr(),u&&u.c(),a=qr(),p&&p.c(),Un(Re,"class","logo-container svelte-abq8jd"),Un(N,"class","line-count svelte-abq8jd"),Un(Ae,"class","title svelte-abq8jd"),Un(_,"class","color-picker svelte-abq8jd"),Un(i,"class","notifications svelte-abq8jd"),Un(se,"class","header svelte-abq8jd")},m(c,b){Lr(c,se,b),ar(se,Ae),ar(Ae,Re),ar(Ae,Ge),ar(Ae,N),ar(N,e),ar(N,T),ar(se,w),ar(se,i),ar(i,_),Zi(v,_,null),ar(i,s),u&&u.m(i,null),ar(i,a),p&&p.m(i,null),r=!0},p(c,[b]){(!r||b&8)&&L!==(L=c[3].toLocaleString()+"")&&Pi(e,L);const g={};!h&&b&1&&(h=!0,g.hex=c[0],hc(()=>h=!1)),v.$set(g),b&2&&(t=Object.keys(c[1]).length>=1),t?u?u.p(c,b):(u=x1(c),u.c(),u.m(i,a)):u&&(u.d(1),u=null),b&4&&(n=Object.keys(c[2]).length>=1),n?p?p.p(c,b):(p=b1(c),p.c(),p.m(i,null)):p&&(p.d(1),p=null)},i(c){r||(Qr(v.$$.fragment,c),r=!0)},o(c){ti(v.$$.fragment,c),r=!1},d(c){c&&Er(se),Xi(v),u&&u.d(),p&&p.d()}}}function gg(){window.scrollTo(0,document.body.scrollHeight)}function ox(re,se,Ae){let Re=null;function Ge(){const i=new Date().getTime();Re!==null&&i-Re<100||(Re=i,document.documentElement.style.setProperty("--highlight",T))}let{multiTypeTokens:N,failedLines:L,lineCount:e,hex:T}=se;function w(i){T=i,Ae(0,T)}return re.$$set=i=>{"multiTypeTokens"in i&&Ae(1,N=i.multiTypeTokens),"failedLines"in i&&Ae(2,L=i.failedLines),"lineCount"in i&&Ae(3,e=i.lineCount),"hex"in i&&Ae(0,T=i.hex)},[T,N,L,e,Ge,w]}class sx extends Fa{constructor(se){super(),za(this,se,ox,ax,Ra,{multiTypeTokens:1,failedLines:2,lineCount:3,hex:0})}}function _1(re,se,Ae){const Re=re.slice();return Re[4]=se[Ae],Re}function w1(re){let se,Ae=no(re[0]),Re=[];for(let Ge=0;Ge<Ae.length;Ge+=1)Re[Ge]=T1(_1(re,Ae,Ge));return{c(){se=br("div");for(let Ge=0;Ge<Re.length;Ge+=1)Re[Ge].c();Un(se,"class","freq-graph svelte-s2d8o8")},m(Ge,N){Lr(Ge,se,N);for(let L=0;L<Re.length;L+=1)Re[L]&&Re[L].m(se,null)},p(Ge,N){if(N&1){Ae=no(Ge[0]);let L;for(L=0;L<Ae.length;L+=1){const e=_1(Ge,Ae,L);Re[L]?Re[L].p(e,N):(Re[L]=T1(e),Re[L].c(),Re[L].m(se,null))}for(;L<Re.length;L+=1)Re[L].d(1);Re.length=Ae.length}},d(Ge){Ge&&Er(se),iu(Re,Ge)}}}function T1(re){let se,Ae,Re=re[4].token+"",Ge,N,L;return{c(){se=br("div"),Ae=br("div"),Ge=li(Re),N=qr(),Un(Ae,"class","bar svelte-s2d8o8"),Xa(Ae,"width",re[4].width+"%"),Un(se,"class","token-frequency svelte-s2d8o8"),Un(se,"title",L=re[4].count.toLocaleString())},m(e,T){Lr(e,se,T),ar(se,Ae),ar(Ae,Ge),ar(se,N)},p(e,T){T&1&&Re!==(Re=e[4].token+"")&&Pi(Ge,Re),T&1&&Xa(Ae,"width",e[4].width+"%"),T&1&&L!==(L=e[4].count.toLocaleString())&&Un(se,"title",L)},d(e){e&&Er(se)}}}function lx(re){let se,Ae=re[0].length>0&&w1(re);return{c(){Ae&&Ae.c(),se=As()},m(Re,Ge){Ae&&Ae.m(Re,Ge),Lr(Re,se,Ge)},p(Re,[Ge]){Re[0].length>0?Ae?Ae.p(Re,Ge):(Ae=w1(Re),Ae.c(),Ae.m(se.parentNode,se)):Ae&&(Ae.d(1),Ae=null)},i:xi,o:xi,d(Re){Re&&Er(se),Ae&&Ae.d(Re)}}}const k1=10;function ux(re){let se=[];for(const[Ge,N]of Object.entries(re))se.push({token:Ge,count:N,width:0});se.sort((Ge,N)=>N.count-Ge.count);let Ae=0;for(let Ge=k1;Ge<se.length;Ge++)Ae+=se[Ge].count;se=se.slice(0,k1),Ae>0&&se.push({token:"Others",count:Ae,width:0});let Re=0;for(let Ge=0;Ge<se.length;Ge++)se[Ge].count>Re&&(Re=se[Ge].count);for(let Ge=0;Ge<se.length;Ge++)se[Ge].width=se[Ge].count/Re*100;return se}function cx(re,se){var Re;const Ae={};for(let Ge=0;Ge<re.extraction.length;Ge++){const N=re.extraction[Ge].params;se in N&&(Ae[Re=N[se].value]||(Ae[Re]=0),Ae[N[se].value]+=1)}return Ae}function fx(re,se,Ae){let Re=[];function Ge(e){Ae(0,Re=ux(e))}Mu(()=>{const e=cx(N,L);Ge(e)});let{data:N,token:L}=se;return re.$$set=e=>{"data"in e&&Ae(1,N=e.data),"token"in e&&Ae(2,L=e.token)},[Re,N,L]}class hx extends Fa{constructor(se){super(),za(this,se,fx,lx,Ra,{data:1,token:2})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var vg;function Br(){return vg.apply(null,arguments)}function px(re){vg=re}function Rl(re){return re instanceof Array||Object.prototype.toString.call(re)==="[object Array]"}function fc(re){return re!=null&&Object.prototype.toString.call(re)==="[object Object]"}function Ui(re,se){return Object.prototype.hasOwnProperty.call(re,se)}function ad(re){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(re).length===0;var se;for(se in re)if(Ui(re,se))return!1;return!0}function ks(re){return re===void 0}function ku(re){return typeof re=="number"||Object.prototype.toString.call(re)==="[object Number]"}function If(re){return re instanceof Date||Object.prototype.toString.call(re)==="[object Date]"}function mg(re,se){var Ae=[],Re,Ge=re.length;for(Re=0;Re<Ge;++Re)Ae.push(se(re[Re],Re));return Ae}function Uu(re,se){for(var Ae in se)Ui(se,Ae)&&(re[Ae]=se[Ae]);return Ui(se,"toString")&&(re.toString=se.toString),Ui(se,"valueOf")&&(re.valueOf=se.valueOf),re}function au(re,se,Ae,Re){return jg(re,se,Ae,Re,!0).utc()}function dx(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function fi(re){return re._pf==null&&(re._pf=dx()),re._pf}var Qp;Array.prototype.some?Qp=Array.prototype.some:Qp=function(re){var se=Object(this),Ae=se.length>>>0,Re;for(Re=0;Re<Ae;Re++)if(Re in se&&re.call(this,se[Re],Re,se))return!0;return!1};function od(re){var se=null,Ae=!1,Re=re._d&&!isNaN(re._d.getTime());if(Re&&(se=fi(re),Ae=Qp.call(se.parsedDateParts,function(Ge){return Ge!=null}),Re=se.overflow<0&&!se.empty&&!se.invalidEra&&!se.invalidMonth&&!se.invalidWeekday&&!se.weekdayMismatch&&!se.nullInput&&!se.invalidFormat&&!se.userInvalidated&&(!se.meridiem||se.meridiem&&Ae),re._strict&&(Re=Re&&se.charsLeftOver===0&&se.unusedTokens.length===0&&se.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(re))re._isValid=Re;else return Re;return re._isValid}function Uh(re){var se=au(NaN);return re!=null?Uu(fi(se),re):fi(se).userInvalidated=!0,se}var M1=Br.momentProperties=[],Yp=!1;function sd(re,se){var Ae,Re,Ge,N=M1.length;if(ks(se._isAMomentObject)||(re._isAMomentObject=se._isAMomentObject),ks(se._i)||(re._i=se._i),ks(se._f)||(re._f=se._f),ks(se._l)||(re._l=se._l),ks(se._strict)||(re._strict=se._strict),ks(se._tzm)||(re._tzm=se._tzm),ks(se._isUTC)||(re._isUTC=se._isUTC),ks(se._offset)||(re._offset=se._offset),ks(se._pf)||(re._pf=fi(se)),ks(se._locale)||(re._locale=se._locale),N>0)for(Ae=0;Ae<N;Ae++)Re=M1[Ae],Ge=se[Re],ks(Ge)||(re[Re]=Ge);return re}function Df(re){sd(this,re),this._d=new Date(re._d!=null?re._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Yp===!1&&(Yp=!0,Br.updateOffset(this),Yp=!1)}function zl(re){return re instanceof Df||re!=null&&re._isAMomentObject!=null}function yg(re){Br.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+re)}function hl(re,se){var Ae=!0;return Uu(function(){if(Br.deprecationHandler!=null&&Br.deprecationHandler(null,re),Ae){var Re=[],Ge,N,L,e=arguments.length;for(N=0;N<e;N++){if(Ge="",typeof arguments[N]=="object"){Ge+=`
[`+N+"] ";for(L in arguments[0])Ui(arguments[0],L)&&(Ge+=L+": "+arguments[0][L]+", ");Ge=Ge.slice(0,-2)}else Ge=arguments[N];Re.push(Ge)}yg(re+`
Arguments: `+Array.prototype.slice.call(Re).join("")+`
`+new Error().stack),Ae=!1}return se.apply(this,arguments)},se)}var A1={};function xg(re,se){Br.deprecationHandler!=null&&Br.deprecationHandler(re,se),A1[re]||(yg(se),A1[re]=!0)}Br.suppressDeprecationWarnings=!1;Br.deprecationHandler=null;function ou(re){return typeof Function<"u"&&re instanceof Function||Object.prototype.toString.call(re)==="[object Function]"}function gx(re){var se,Ae;for(Ae in re)Ui(re,Ae)&&(se=re[Ae],ou(se)?this[Ae]=se:this["_"+Ae]=se);this._config=re,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function $p(re,se){var Ae=Uu({},re),Re;for(Re in se)Ui(se,Re)&&(fc(re[Re])&&fc(se[Re])?(Ae[Re]={},Uu(Ae[Re],re[Re]),Uu(Ae[Re],se[Re])):se[Re]!=null?Ae[Re]=se[Re]:delete Ae[Re]);for(Re in re)Ui(re,Re)&&!Ui(se,Re)&&fc(re[Re])&&(Ae[Re]=Uu({},Ae[Re]));return Ae}function ld(re){re!=null&&this.set(re)}var ed;Object.keys?ed=Object.keys:ed=function(re){var se,Ae=[];for(se in re)Ui(re,se)&&Ae.push(se);return Ae};var vx={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function mx(re,se,Ae){var Re=this._calendar[re]||this._calendar.sameElse;return ou(Re)?Re.call(se,Ae):Re}function ru(re,se,Ae){var Re=""+Math.abs(re),Ge=se-Re.length,N=re>=0;return(N?Ae?"+":"":"-")+Math.pow(10,Math.max(0,Ge)).toString().substr(1)+Re}var ud=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ah=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Gp={},Vc={};function Jr(re,se,Ae,Re){var Ge=Re;typeof Re=="string"&&(Ge=function(){return this[Re]()}),re&&(Vc[re]=Ge),se&&(Vc[se[0]]=function(){return ru(Ge.apply(this,arguments),se[1],se[2])}),Ae&&(Vc[Ae]=function(){return this.localeData().ordinal(Ge.apply(this,arguments),re)})}function yx(re){return re.match(/\[[\s\S]/)?re.replace(/^\[|\]$/g,""):re.replace(/\\/g,"")}function xx(re){var se=re.match(ud),Ae,Re;for(Ae=0,Re=se.length;Ae<Re;Ae++)Vc[se[Ae]]?se[Ae]=Vc[se[Ae]]:se[Ae]=yx(se[Ae]);return function(Ge){var N="",L;for(L=0;L<Re;L++)N+=ou(se[L])?se[L].call(Ge,re):se[L];return N}}function Ch(re,se){return re.isValid()?(se=bg(se,re.localeData()),Gp[se]=Gp[se]||xx(se),Gp[se](re)):re.localeData().invalidDate()}function bg(re,se){var Ae=5;function Re(Ge){return se.longDateFormat(Ge)||Ge}for(Ah.lastIndex=0;Ae>=0&&Ah.test(re);)re=re.replace(Ah,Re),Ah.lastIndex=0,Ae-=1;return re}var bx={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function _x(re){var se=this._longDateFormat[re],Ae=this._longDateFormat[re.toUpperCase()];return se||!Ae?se:(this._longDateFormat[re]=Ae.match(ud).map(function(Re){return Re==="MMMM"||Re==="MM"||Re==="DD"||Re==="dddd"?Re.slice(1):Re}).join(""),this._longDateFormat[re])}var wx="Invalid date";function Tx(){return this._invalidDate}var kx="%d",Mx=/\d{1,2}/;function Ax(re){return this._ordinal.replace("%d",re)}var Sx={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ex(re,se,Ae,Re){var Ge=this._relativeTime[Ae];return ou(Ge)?Ge(re,se,Ae,Re):Ge.replace(/%d/i,re)}function Lx(re,se){var Ae=this._relativeTime[re>0?"future":"past"];return ou(Ae)?Ae(se):Ae.replace(/%s/i,se)}var S1={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function pl(re){return typeof re=="string"?S1[re]||S1[re.toLowerCase()]:void 0}function cd(re){var se={},Ae,Re;for(Re in re)Ui(re,Re)&&(Ae=pl(Re),Ae&&(se[Ae]=re[Re]));return se}var Cx={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Ox(re){var se=[],Ae;for(Ae in re)Ui(re,Ae)&&se.push({unit:Ae,priority:Cx[Ae]});return se.sort(function(Re,Ge){return Re.priority-Ge.priority}),se}var _g=/\d/,Gs=/\d\d/,wg=/\d{3}/,fd=/\d{4}/,Vh=/[+-]?\d{6}/,wa=/\d\d?/,Tg=/\d\d\d\d?/,kg=/\d\d\d\d\d\d?/,Hh=/\d{1,3}/,hd=/\d{1,4}/,qh=/[+-]?\d{1,6}/,Gc=/\d+/,Yh=/[+-]?\d+/,Px=/Z|[+-]\d\d:?\d\d/gi,Gh=/Z|[+-]\d\d(?::?\d\d)?/gi,Ix=/[+-]?\d+(\.\d{1,3})?/,Rf=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Wc=/^[1-9]\d?/,pd=/^([1-9]\d|\d)/,Rh;Rh={};function Vr(re,se,Ae){Rh[re]=ou(se)?se:function(Re,Ge){return Re&&Ae?Ae:se}}function Dx(re,se){return Ui(Rh,re)?Rh[re](se._strict,se._locale):new RegExp(Rx(re))}function Rx(re){return wu(re.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(se,Ae,Re,Ge,N){return Ae||Re||Ge||N}))}function wu(re){return re.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ul(re){return re<0?Math.ceil(re)||0:Math.floor(re)}function Ti(re){var se=+re,Ae=0;return se!==0&&isFinite(se)&&(Ae=ul(se)),Ae}var td={};function sa(re,se){var Ae,Re=se,Ge;for(typeof re=="string"&&(re=[re]),ku(se)&&(Re=function(N,L){L[se]=Ti(N)}),Ge=re.length,Ae=0;Ae<Ge;Ae++)td[re[Ae]]=Re}function zf(re,se){sa(re,function(Ae,Re,Ge,N){Ge._w=Ge._w||{},se(Ae,Ge._w,Ge,N)})}function zx(re,se,Ae){se!=null&&Ui(td,re)&&td[re](se,Ae._a,Ae,re)}function Wh(re){return re%4===0&&re%100!==0||re%400===0}var qo=0,bu=1,tu=2,uo=3,Dl=4,_u=5,cc=6,Fx=7,Bx=8;Jr("Y",0,0,function(){var re=this.year();return re<=9999?ru(re,4):"+"+re});Jr(0,["YY",2],0,function(){return this.year()%100});Jr(0,["YYYY",4],0,"year");Jr(0,["YYYYY",5],0,"year");Jr(0,["YYYYYY",6,!0],0,"year");Vr("Y",Yh);Vr("YY",wa,Gs);Vr("YYYY",hd,fd);Vr("YYYYY",qh,Vh);Vr("YYYYYY",qh,Vh);sa(["YYYYY","YYYYYY"],qo);sa("YYYY",function(re,se){se[qo]=re.length===2?Br.parseTwoDigitYear(re):Ti(re)});sa("YY",function(re,se){se[qo]=Br.parseTwoDigitYear(re)});sa("Y",function(re,se){se[qo]=parseInt(re,10)});function Sf(re){return Wh(re)?366:365}Br.parseTwoDigitYear=function(re){return Ti(re)+(Ti(re)>68?1900:2e3)};var Mg=Zc("FullYear",!0);function Nx(){return Wh(this.year())}function Zc(re,se){return function(Ae){return Ae!=null?(Ag(this,re,Ae),Br.updateOffset(this,se),this):Lf(this,re)}}function Lf(re,se){if(!re.isValid())return NaN;var Ae=re._d,Re=re._isUTC;switch(se){case"Milliseconds":return Re?Ae.getUTCMilliseconds():Ae.getMilliseconds();case"Seconds":return Re?Ae.getUTCSeconds():Ae.getSeconds();case"Minutes":return Re?Ae.getUTCMinutes():Ae.getMinutes();case"Hours":return Re?Ae.getUTCHours():Ae.getHours();case"Date":return Re?Ae.getUTCDate():Ae.getDate();case"Day":return Re?Ae.getUTCDay():Ae.getDay();case"Month":return Re?Ae.getUTCMonth():Ae.getMonth();case"FullYear":return Re?Ae.getUTCFullYear():Ae.getFullYear();default:return NaN}}function Ag(re,se,Ae){var Re,Ge,N,L,e;if(!(!re.isValid()||isNaN(Ae))){switch(Re=re._d,Ge=re._isUTC,se){case"Milliseconds":return void(Ge?Re.setUTCMilliseconds(Ae):Re.setMilliseconds(Ae));case"Seconds":return void(Ge?Re.setUTCSeconds(Ae):Re.setSeconds(Ae));case"Minutes":return void(Ge?Re.setUTCMinutes(Ae):Re.setMinutes(Ae));case"Hours":return void(Ge?Re.setUTCHours(Ae):Re.setHours(Ae));case"Date":return void(Ge?Re.setUTCDate(Ae):Re.setDate(Ae));case"FullYear":break;default:return}N=Ae,L=re.month(),e=re.date(),e=e===29&&L===1&&!Wh(N)?28:e,Ge?Re.setUTCFullYear(N,L,e):Re.setFullYear(N,L,e)}}function jx(re){return re=pl(re),ou(this[re])?this[re]():this}function Ux(re,se){if(typeof re=="object"){re=cd(re);var Ae=Ox(re),Re,Ge=Ae.length;for(Re=0;Re<Ge;Re++)this[Ae[Re].unit](re[Ae[Re].unit])}else if(re=pl(re),ou(this[re]))return this[re](se);return this}function Vx(re,se){return(re%se+se)%se}var Za;Array.prototype.indexOf?Za=Array.prototype.indexOf:Za=function(re){var se;for(se=0;se<this.length;++se)if(this[se]===re)return se;return-1};function dd(re,se){if(isNaN(re)||isNaN(se))return NaN;var Ae=Vx(se,12);return re+=(se-Ae)/12,Ae===1?Wh(re)?29:28:31-Ae%7%2}Jr("M",["MM",2],"Mo",function(){return this.month()+1});Jr("MMM",0,0,function(re){return this.localeData().monthsShort(this,re)});Jr("MMMM",0,0,function(re){return this.localeData().months(this,re)});Vr("M",wa,Wc);Vr("MM",wa,Gs);Vr("MMM",function(re,se){return se.monthsShortRegex(re)});Vr("MMMM",function(re,se){return se.monthsRegex(re)});sa(["M","MM"],function(re,se){se[bu]=Ti(re)-1});sa(["MMM","MMMM"],function(re,se,Ae,Re){var Ge=Ae._locale.monthsParse(re,Re,Ae._strict);Ge!=null?se[bu]=Ge:fi(Ae).invalidMonth=re});var Hx="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Sg="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Eg=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,qx=Rf,Yx=Rf;function Gx(re,se){return re?Rl(this._months)?this._months[re.month()]:this._months[(this._months.isFormat||Eg).test(se)?"format":"standalone"][re.month()]:Rl(this._months)?this._months:this._months.standalone}function Wx(re,se){return re?Rl(this._monthsShort)?this._monthsShort[re.month()]:this._monthsShort[Eg.test(se)?"format":"standalone"][re.month()]:Rl(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Zx(re,se,Ae){var Re,Ge,N,L=re.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],Re=0;Re<12;++Re)N=au([2e3,Re]),this._shortMonthsParse[Re]=this.monthsShort(N,"").toLocaleLowerCase(),this._longMonthsParse[Re]=this.months(N,"").toLocaleLowerCase();return Ae?se==="MMM"?(Ge=Za.call(this._shortMonthsParse,L),Ge!==-1?Ge:null):(Ge=Za.call(this._longMonthsParse,L),Ge!==-1?Ge:null):se==="MMM"?(Ge=Za.call(this._shortMonthsParse,L),Ge!==-1?Ge:(Ge=Za.call(this._longMonthsParse,L),Ge!==-1?Ge:null)):(Ge=Za.call(this._longMonthsParse,L),Ge!==-1?Ge:(Ge=Za.call(this._shortMonthsParse,L),Ge!==-1?Ge:null))}function Xx(re,se,Ae){var Re,Ge,N;if(this._monthsParseExact)return Zx.call(this,re,se,Ae);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),Re=0;Re<12;Re++){if(Ge=au([2e3,Re]),Ae&&!this._longMonthsParse[Re]&&(this._longMonthsParse[Re]=new RegExp("^"+this.months(Ge,"").replace(".","")+"$","i"),this._shortMonthsParse[Re]=new RegExp("^"+this.monthsShort(Ge,"").replace(".","")+"$","i")),!Ae&&!this._monthsParse[Re]&&(N="^"+this.months(Ge,"")+"|^"+this.monthsShort(Ge,""),this._monthsParse[Re]=new RegExp(N.replace(".",""),"i")),Ae&&se==="MMMM"&&this._longMonthsParse[Re].test(re))return Re;if(Ae&&se==="MMM"&&this._shortMonthsParse[Re].test(re))return Re;if(!Ae&&this._monthsParse[Re].test(re))return Re}}function Lg(re,se){if(!re.isValid())return re;if(typeof se=="string"){if(/^\d+$/.test(se))se=Ti(se);else if(se=re.localeData().monthsParse(se),!ku(se))return re}var Ae=se,Re=re.date();return Re=Re<29?Re:Math.min(Re,dd(re.year(),Ae)),re._isUTC?re._d.setUTCMonth(Ae,Re):re._d.setMonth(Ae,Re),re}function Cg(re){return re!=null?(Lg(this,re),Br.updateOffset(this,!0),this):Lf(this,"Month")}function Jx(){return dd(this.year(),this.month())}function Kx(re){return this._monthsParseExact?(Ui(this,"_monthsRegex")||Og.call(this),re?this._monthsShortStrictRegex:this._monthsShortRegex):(Ui(this,"_monthsShortRegex")||(this._monthsShortRegex=qx),this._monthsShortStrictRegex&&re?this._monthsShortStrictRegex:this._monthsShortRegex)}function Qx(re){return this._monthsParseExact?(Ui(this,"_monthsRegex")||Og.call(this),re?this._monthsStrictRegex:this._monthsRegex):(Ui(this,"_monthsRegex")||(this._monthsRegex=Yx),this._monthsStrictRegex&&re?this._monthsStrictRegex:this._monthsRegex)}function Og(){function re(T,w){return w.length-T.length}var se=[],Ae=[],Re=[],Ge,N,L,e;for(Ge=0;Ge<12;Ge++)N=au([2e3,Ge]),L=wu(this.monthsShort(N,"")),e=wu(this.months(N,"")),se.push(L),Ae.push(e),Re.push(e),Re.push(L);se.sort(re),Ae.sort(re),Re.sort(re),this._monthsRegex=new RegExp("^("+Re.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+Ae.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+se.join("|")+")","i")}function $x(re,se,Ae,Re,Ge,N,L){var e;return re<100&&re>=0?(e=new Date(re+400,se,Ae,Re,Ge,N,L),isFinite(e.getFullYear())&&e.setFullYear(re)):e=new Date(re,se,Ae,Re,Ge,N,L),e}function Cf(re){var se,Ae;return re<100&&re>=0?(Ae=Array.prototype.slice.call(arguments),Ae[0]=re+400,se=new Date(Date.UTC.apply(null,Ae)),isFinite(se.getUTCFullYear())&&se.setUTCFullYear(re)):se=new Date(Date.UTC.apply(null,arguments)),se}function zh(re,se,Ae){var Re=7+se-Ae,Ge=(7+Cf(re,0,Re).getUTCDay()-se)%7;return-Ge+Re-1}function Pg(re,se,Ae,Re,Ge){var N=(7+Ae-Re)%7,L=zh(re,Re,Ge),e=1+7*(se-1)+N+L,T,w;return e<=0?(T=re-1,w=Sf(T)+e):e>Sf(re)?(T=re+1,w=e-Sf(re)):(T=re,w=e),{year:T,dayOfYear:w}}function Of(re,se,Ae){var Re=zh(re.year(),se,Ae),Ge=Math.floor((re.dayOfYear()-Re-1)/7)+1,N,L;return Ge<1?(L=re.year()-1,N=Ge+Tu(L,se,Ae)):Ge>Tu(re.year(),se,Ae)?(N=Ge-Tu(re.year(),se,Ae),L=re.year()+1):(L=re.year(),N=Ge),{week:N,year:L}}function Tu(re,se,Ae){var Re=zh(re,se,Ae),Ge=zh(re+1,se,Ae);return(Sf(re)-Re+Ge)/7}Jr("w",["ww",2],"wo","week");Jr("W",["WW",2],"Wo","isoWeek");Vr("w",wa,Wc);Vr("ww",wa,Gs);Vr("W",wa,Wc);Vr("WW",wa,Gs);zf(["w","ww","W","WW"],function(re,se,Ae,Re){se[Re.substr(0,1)]=Ti(re)});function e2(re){return Of(re,this._week.dow,this._week.doy).week}var t2={dow:0,doy:6};function n2(){return this._week.dow}function r2(){return this._week.doy}function i2(re){var se=this.localeData().week(this);return re==null?se:this.add((re-se)*7,"d")}function a2(re){var se=Of(this,1,4).week;return re==null?se:this.add((re-se)*7,"d")}Jr("d",0,"do","day");Jr("dd",0,0,function(re){return this.localeData().weekdaysMin(this,re)});Jr("ddd",0,0,function(re){return this.localeData().weekdaysShort(this,re)});Jr("dddd",0,0,function(re){return this.localeData().weekdays(this,re)});Jr("e",0,0,"weekday");Jr("E",0,0,"isoWeekday");Vr("d",wa);Vr("e",wa);Vr("E",wa);Vr("dd",function(re,se){return se.weekdaysMinRegex(re)});Vr("ddd",function(re,se){return se.weekdaysShortRegex(re)});Vr("dddd",function(re,se){return se.weekdaysRegex(re)});zf(["dd","ddd","dddd"],function(re,se,Ae,Re){var Ge=Ae._locale.weekdaysParse(re,Re,Ae._strict);Ge!=null?se.d=Ge:fi(Ae).invalidWeekday=re});zf(["d","e","E"],function(re,se,Ae,Re){se[Re]=Ti(re)});function o2(re,se){return typeof re!="string"?re:isNaN(re)?(re=se.weekdaysParse(re),typeof re=="number"?re:null):parseInt(re,10)}function s2(re,se){return typeof re=="string"?se.weekdaysParse(re)%7||7:isNaN(re)?null:re}function gd(re,se){return re.slice(se,7).concat(re.slice(0,se))}var l2="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ig="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),u2="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),c2=Rf,f2=Rf,h2=Rf;function p2(re,se){var Ae=Rl(this._weekdays)?this._weekdays:this._weekdays[re&&re!==!0&&this._weekdays.isFormat.test(se)?"format":"standalone"];return re===!0?gd(Ae,this._week.dow):re?Ae[re.day()]:Ae}function d2(re){return re===!0?gd(this._weekdaysShort,this._week.dow):re?this._weekdaysShort[re.day()]:this._weekdaysShort}function g2(re){return re===!0?gd(this._weekdaysMin,this._week.dow):re?this._weekdaysMin[re.day()]:this._weekdaysMin}function v2(re,se,Ae){var Re,Ge,N,L=re.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Re=0;Re<7;++Re)N=au([2e3,1]).day(Re),this._minWeekdaysParse[Re]=this.weekdaysMin(N,"").toLocaleLowerCase(),this._shortWeekdaysParse[Re]=this.weekdaysShort(N,"").toLocaleLowerCase(),this._weekdaysParse[Re]=this.weekdays(N,"").toLocaleLowerCase();return Ae?se==="dddd"?(Ge=Za.call(this._weekdaysParse,L),Ge!==-1?Ge:null):se==="ddd"?(Ge=Za.call(this._shortWeekdaysParse,L),Ge!==-1?Ge:null):(Ge=Za.call(this._minWeekdaysParse,L),Ge!==-1?Ge:null):se==="dddd"?(Ge=Za.call(this._weekdaysParse,L),Ge!==-1||(Ge=Za.call(this._shortWeekdaysParse,L),Ge!==-1)?Ge:(Ge=Za.call(this._minWeekdaysParse,L),Ge!==-1?Ge:null)):se==="ddd"?(Ge=Za.call(this._shortWeekdaysParse,L),Ge!==-1||(Ge=Za.call(this._weekdaysParse,L),Ge!==-1)?Ge:(Ge=Za.call(this._minWeekdaysParse,L),Ge!==-1?Ge:null)):(Ge=Za.call(this._minWeekdaysParse,L),Ge!==-1||(Ge=Za.call(this._weekdaysParse,L),Ge!==-1)?Ge:(Ge=Za.call(this._shortWeekdaysParse,L),Ge!==-1?Ge:null))}function m2(re,se,Ae){var Re,Ge,N;if(this._weekdaysParseExact)return v2.call(this,re,se,Ae);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),Re=0;Re<7;Re++){if(Ge=au([2e3,1]).day(Re),Ae&&!this._fullWeekdaysParse[Re]&&(this._fullWeekdaysParse[Re]=new RegExp("^"+this.weekdays(Ge,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[Re]=new RegExp("^"+this.weekdaysShort(Ge,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[Re]=new RegExp("^"+this.weekdaysMin(Ge,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[Re]||(N="^"+this.weekdays(Ge,"")+"|^"+this.weekdaysShort(Ge,"")+"|^"+this.weekdaysMin(Ge,""),this._weekdaysParse[Re]=new RegExp(N.replace(".",""),"i")),Ae&&se==="dddd"&&this._fullWeekdaysParse[Re].test(re))return Re;if(Ae&&se==="ddd"&&this._shortWeekdaysParse[Re].test(re))return Re;if(Ae&&se==="dd"&&this._minWeekdaysParse[Re].test(re))return Re;if(!Ae&&this._weekdaysParse[Re].test(re))return Re}}function y2(re){if(!this.isValid())return re!=null?this:NaN;var se=Lf(this,"Day");return re!=null?(re=o2(re,this.localeData()),this.add(re-se,"d")):se}function x2(re){if(!this.isValid())return re!=null?this:NaN;var se=(this.day()+7-this.localeData()._week.dow)%7;return re==null?se:this.add(re-se,"d")}function b2(re){if(!this.isValid())return re!=null?this:NaN;if(re!=null){var se=s2(re,this.localeData());return this.day(this.day()%7?se:se-7)}else return this.day()||7}function _2(re){return this._weekdaysParseExact?(Ui(this,"_weekdaysRegex")||vd.call(this),re?this._weekdaysStrictRegex:this._weekdaysRegex):(Ui(this,"_weekdaysRegex")||(this._weekdaysRegex=c2),this._weekdaysStrictRegex&&re?this._weekdaysStrictRegex:this._weekdaysRegex)}function w2(re){return this._weekdaysParseExact?(Ui(this,"_weekdaysRegex")||vd.call(this),re?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ui(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=f2),this._weekdaysShortStrictRegex&&re?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function T2(re){return this._weekdaysParseExact?(Ui(this,"_weekdaysRegex")||vd.call(this),re?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ui(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=h2),this._weekdaysMinStrictRegex&&re?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function vd(){function re(i,_){return _.length-i.length}var se=[],Ae=[],Re=[],Ge=[],N,L,e,T,w;for(N=0;N<7;N++)L=au([2e3,1]).day(N),e=wu(this.weekdaysMin(L,"")),T=wu(this.weekdaysShort(L,"")),w=wu(this.weekdays(L,"")),se.push(e),Ae.push(T),Re.push(w),Ge.push(e),Ge.push(T),Ge.push(w);se.sort(re),Ae.sort(re),Re.sort(re),Ge.sort(re),this._weekdaysRegex=new RegExp("^("+Ge.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+Re.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+Ae.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+se.join("|")+")","i")}function md(){return this.hours()%12||12}function k2(){return this.hours()||24}Jr("H",["HH",2],0,"hour");Jr("h",["hh",2],0,md);Jr("k",["kk",2],0,k2);Jr("hmm",0,0,function(){return""+md.apply(this)+ru(this.minutes(),2)});Jr("hmmss",0,0,function(){return""+md.apply(this)+ru(this.minutes(),2)+ru(this.seconds(),2)});Jr("Hmm",0,0,function(){return""+this.hours()+ru(this.minutes(),2)});Jr("Hmmss",0,0,function(){return""+this.hours()+ru(this.minutes(),2)+ru(this.seconds(),2)});function Dg(re,se){Jr(re,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),se)})}Dg("a",!0);Dg("A",!1);function Rg(re,se){return se._meridiemParse}Vr("a",Rg);Vr("A",Rg);Vr("H",wa,pd);Vr("h",wa,Wc);Vr("k",wa,Wc);Vr("HH",wa,Gs);Vr("hh",wa,Gs);Vr("kk",wa,Gs);Vr("hmm",Tg);Vr("hmmss",kg);Vr("Hmm",Tg);Vr("Hmmss",kg);sa(["H","HH"],uo);sa(["k","kk"],function(re,se,Ae){var Re=Ti(re);se[uo]=Re===24?0:Re});sa(["a","A"],function(re,se,Ae){Ae._isPm=Ae._locale.isPM(re),Ae._meridiem=re});sa(["h","hh"],function(re,se,Ae){se[uo]=Ti(re),fi(Ae).bigHour=!0});sa("hmm",function(re,se,Ae){var Re=re.length-2;se[uo]=Ti(re.substr(0,Re)),se[Dl]=Ti(re.substr(Re)),fi(Ae).bigHour=!0});sa("hmmss",function(re,se,Ae){var Re=re.length-4,Ge=re.length-2;se[uo]=Ti(re.substr(0,Re)),se[Dl]=Ti(re.substr(Re,2)),se[_u]=Ti(re.substr(Ge)),fi(Ae).bigHour=!0});sa("Hmm",function(re,se,Ae){var Re=re.length-2;se[uo]=Ti(re.substr(0,Re)),se[Dl]=Ti(re.substr(Re))});sa("Hmmss",function(re,se,Ae){var Re=re.length-4,Ge=re.length-2;se[uo]=Ti(re.substr(0,Re)),se[Dl]=Ti(re.substr(Re,2)),se[_u]=Ti(re.substr(Ge))});function M2(re){return(re+"").toLowerCase().charAt(0)==="p"}var A2=/[ap]\.?m?\.?/i,S2=Zc("Hours",!0);function E2(re,se,Ae){return re>11?Ae?"pm":"PM":Ae?"am":"AM"}var zg={calendar:vx,longDateFormat:bx,invalidDate:wx,ordinal:kx,dayOfMonthOrdinalParse:Mx,relativeTime:Sx,months:Hx,monthsShort:Sg,week:t2,weekdays:l2,weekdaysMin:u2,weekdaysShort:Ig,meridiemParse:A2},Ta={},Tf={},Pf;function L2(re,se){var Ae,Re=Math.min(re.length,se.length);for(Ae=0;Ae<Re;Ae+=1)if(re[Ae]!==se[Ae])return Ae;return Re}function E1(re){return re&&re.toLowerCase().replace("_","-")}function C2(re){for(var se=0,Ae,Re,Ge,N;se<re.length;){for(N=E1(re[se]).split("-"),Ae=N.length,Re=E1(re[se+1]),Re=Re?Re.split("-"):null;Ae>0;){if(Ge=Zh(N.slice(0,Ae).join("-")),Ge)return Ge;if(Re&&Re.length>=Ae&&L2(N,Re)>=Ae-1)break;Ae--}se++}return Pf}function O2(re){return!!(re&&re.match("^[^/\\\\]*$"))}function Zh(re){var se=null,Ae;if(Ta[re]===void 0&&typeof Ih<"u"&&Ih&&Ih.exports&&O2(re))try{se=Pf._abbr,Ae=require,Ae("./locale/"+re),Hu(se)}catch{Ta[re]=null}return Ta[re]}function Hu(re,se){var Ae;return re&&(ks(se)?Ae=Au(re):Ae=yd(re,se),Ae?Pf=Ae:typeof console<"u"&&console.warn&&console.warn("Locale "+re+" not found. Did you forget to load it?")),Pf._abbr}function yd(re,se){if(se!==null){var Ae,Re=zg;if(se.abbr=re,Ta[re]!=null)xg("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),Re=Ta[re]._config;else if(se.parentLocale!=null)if(Ta[se.parentLocale]!=null)Re=Ta[se.parentLocale]._config;else if(Ae=Zh(se.parentLocale),Ae!=null)Re=Ae._config;else return Tf[se.parentLocale]||(Tf[se.parentLocale]=[]),Tf[se.parentLocale].push({name:re,config:se}),null;return Ta[re]=new ld($p(Re,se)),Tf[re]&&Tf[re].forEach(function(Ge){yd(Ge.name,Ge.config)}),Hu(re),Ta[re]}else return delete Ta[re],null}function P2(re,se){if(se!=null){var Ae,Re,Ge=zg;Ta[re]!=null&&Ta[re].parentLocale!=null?Ta[re].set($p(Ta[re]._config,se)):(Re=Zh(re),Re!=null&&(Ge=Re._config),se=$p(Ge,se),Re==null&&(se.abbr=re),Ae=new ld(se),Ae.parentLocale=Ta[re],Ta[re]=Ae),Hu(re)}else Ta[re]!=null&&(Ta[re].parentLocale!=null?(Ta[re]=Ta[re].parentLocale,re===Hu()&&Hu(re)):Ta[re]!=null&&delete Ta[re]);return Ta[re]}function Au(re){var se;if(re&&re._locale&&re._locale._abbr&&(re=re._locale._abbr),!re)return Pf;if(!Rl(re)){if(se=Zh(re),se)return se;re=[re]}return C2(re)}function I2(){return ed(Ta)}function xd(re){var se,Ae=re._a;return Ae&&fi(re).overflow===-2&&(se=Ae[bu]<0||Ae[bu]>11?bu:Ae[tu]<1||Ae[tu]>dd(Ae[qo],Ae[bu])?tu:Ae[uo]<0||Ae[uo]>24||Ae[uo]===24&&(Ae[Dl]!==0||Ae[_u]!==0||Ae[cc]!==0)?uo:Ae[Dl]<0||Ae[Dl]>59?Dl:Ae[_u]<0||Ae[_u]>59?_u:Ae[cc]<0||Ae[cc]>999?cc:-1,fi(re)._overflowDayOfYear&&(se<qo||se>tu)&&(se=tu),fi(re)._overflowWeeks&&se===-1&&(se=Fx),fi(re)._overflowWeekday&&se===-1&&(se=Bx),fi(re).overflow=se),re}var D2=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,R2=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,z2=/Z|[+-]\d\d(?::?\d\d)?/,Sh=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Wp=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],F2=/^\/?Date\((-?\d+)/i,B2=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,N2={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Fg(re){var se,Ae,Re=re._i,Ge=D2.exec(Re)||R2.exec(Re),N,L,e,T,w=Sh.length,i=Wp.length;if(Ge){for(fi(re).iso=!0,se=0,Ae=w;se<Ae;se++)if(Sh[se][1].exec(Ge[1])){L=Sh[se][0],N=Sh[se][2]!==!1;break}if(L==null){re._isValid=!1;return}if(Ge[3]){for(se=0,Ae=i;se<Ae;se++)if(Wp[se][1].exec(Ge[3])){e=(Ge[2]||" ")+Wp[se][0];break}if(e==null){re._isValid=!1;return}}if(!N&&e!=null){re._isValid=!1;return}if(Ge[4])if(z2.exec(Ge[4]))T="Z";else{re._isValid=!1;return}re._f=L+(e||"")+(T||""),_d(re)}else re._isValid=!1}function j2(re,se,Ae,Re,Ge,N){var L=[U2(re),Sg.indexOf(se),parseInt(Ae,10),parseInt(Re,10),parseInt(Ge,10)];return N&&L.push(parseInt(N,10)),L}function U2(re){var se=parseInt(re,10);return se<=49?2e3+se:se<=999?1900+se:se}function V2(re){return re.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function H2(re,se,Ae){if(re){var Re=Ig.indexOf(re),Ge=new Date(se[0],se[1],se[2]).getDay();if(Re!==Ge)return fi(Ae).weekdayMismatch=!0,Ae._isValid=!1,!1}return!0}function q2(re,se,Ae){if(re)return N2[re];if(se)return 0;var Re=parseInt(Ae,10),Ge=Re%100,N=(Re-Ge)/100;return N*60+Ge}function Bg(re){var se=B2.exec(V2(re._i)),Ae;if(se){if(Ae=j2(se[4],se[3],se[2],se[5],se[6],se[7]),!H2(se[1],Ae,re))return;re._a=Ae,re._tzm=q2(se[8],se[9],se[10]),re._d=Cf.apply(null,re._a),re._d.setUTCMinutes(re._d.getUTCMinutes()-re._tzm),fi(re).rfc2822=!0}else re._isValid=!1}function Y2(re){var se=F2.exec(re._i);if(se!==null){re._d=new Date(+se[1]);return}if(Fg(re),re._isValid===!1)delete re._isValid;else return;if(Bg(re),re._isValid===!1)delete re._isValid;else return;re._strict?re._isValid=!1:Br.createFromInputFallback(re)}Br.createFromInputFallback=hl("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(re){re._d=new Date(re._i+(re._useUTC?" UTC":""))});function Nc(re,se,Ae){return re??se??Ae}function G2(re){var se=new Date(Br.now());return re._useUTC?[se.getUTCFullYear(),se.getUTCMonth(),se.getUTCDate()]:[se.getFullYear(),se.getMonth(),se.getDate()]}function bd(re){var se,Ae,Re=[],Ge,N,L;if(!re._d){for(Ge=G2(re),re._w&&re._a[tu]==null&&re._a[bu]==null&&W2(re),re._dayOfYear!=null&&(L=Nc(re._a[qo],Ge[qo]),(re._dayOfYear>Sf(L)||re._dayOfYear===0)&&(fi(re)._overflowDayOfYear=!0),Ae=Cf(L,0,re._dayOfYear),re._a[bu]=Ae.getUTCMonth(),re._a[tu]=Ae.getUTCDate()),se=0;se<3&&re._a[se]==null;++se)re._a[se]=Re[se]=Ge[se];for(;se<7;se++)re._a[se]=Re[se]=re._a[se]==null?se===2?1:0:re._a[se];re._a[uo]===24&&re._a[Dl]===0&&re._a[_u]===0&&re._a[cc]===0&&(re._nextDay=!0,re._a[uo]=0),re._d=(re._useUTC?Cf:$x).apply(null,Re),N=re._useUTC?re._d.getUTCDay():re._d.getDay(),re._tzm!=null&&re._d.setUTCMinutes(re._d.getUTCMinutes()-re._tzm),re._nextDay&&(re._a[uo]=24),re._w&&typeof re._w.d<"u"&&re._w.d!==N&&(fi(re).weekdayMismatch=!0)}}function W2(re){var se,Ae,Re,Ge,N,L,e,T,w;se=re._w,se.GG!=null||se.W!=null||se.E!=null?(N=1,L=4,Ae=Nc(se.GG,re._a[qo],Of(_a(),1,4).year),Re=Nc(se.W,1),Ge=Nc(se.E,1),(Ge<1||Ge>7)&&(T=!0)):(N=re._locale._week.dow,L=re._locale._week.doy,w=Of(_a(),N,L),Ae=Nc(se.gg,re._a[qo],w.year),Re=Nc(se.w,w.week),se.d!=null?(Ge=se.d,(Ge<0||Ge>6)&&(T=!0)):se.e!=null?(Ge=se.e+N,(se.e<0||se.e>6)&&(T=!0)):Ge=N),Re<1||Re>Tu(Ae,N,L)?fi(re)._overflowWeeks=!0:T!=null?fi(re)._overflowWeekday=!0:(e=Pg(Ae,Re,Ge,N,L),re._a[qo]=e.year,re._dayOfYear=e.dayOfYear)}Br.ISO_8601=function(){};Br.RFC_2822=function(){};function _d(re){if(re._f===Br.ISO_8601){Fg(re);return}if(re._f===Br.RFC_2822){Bg(re);return}re._a=[],fi(re).empty=!0;var se=""+re._i,Ae,Re,Ge,N,L,e=se.length,T=0,w,i;for(Ge=bg(re._f,re._locale).match(ud)||[],i=Ge.length,Ae=0;Ae<i;Ae++)N=Ge[Ae],Re=(se.match(Dx(N,re))||[])[0],Re&&(L=se.substr(0,se.indexOf(Re)),L.length>0&&fi(re).unusedInput.push(L),se=se.slice(se.indexOf(Re)+Re.length),T+=Re.length),Vc[N]?(Re?fi(re).empty=!1:fi(re).unusedTokens.push(N),zx(N,Re,re)):re._strict&&!Re&&fi(re).unusedTokens.push(N);fi(re).charsLeftOver=e-T,se.length>0&&fi(re).unusedInput.push(se),re._a[uo]<=12&&fi(re).bigHour===!0&&re._a[uo]>0&&(fi(re).bigHour=void 0),fi(re).parsedDateParts=re._a.slice(0),fi(re).meridiem=re._meridiem,re._a[uo]=Z2(re._locale,re._a[uo],re._meridiem),w=fi(re).era,w!==null&&(re._a[qo]=re._locale.erasConvertYear(w,re._a[qo])),bd(re),xd(re)}function Z2(re,se,Ae){var Re;return Ae==null?se:re.meridiemHour!=null?re.meridiemHour(se,Ae):(re.isPM!=null&&(Re=re.isPM(Ae),Re&&se<12&&(se+=12),!Re&&se===12&&(se=0)),se)}function X2(re){var se,Ae,Re,Ge,N,L,e=!1,T=re._f.length;if(T===0){fi(re).invalidFormat=!0,re._d=new Date(NaN);return}for(Ge=0;Ge<T;Ge++)N=0,L=!1,se=sd({},re),re._useUTC!=null&&(se._useUTC=re._useUTC),se._f=re._f[Ge],_d(se),od(se)&&(L=!0),N+=fi(se).charsLeftOver,N+=fi(se).unusedTokens.length*10,fi(se).score=N,e?N<Re&&(Re=N,Ae=se):(Re==null||N<Re||L)&&(Re=N,Ae=se,L&&(e=!0));Uu(re,Ae||se)}function J2(re){if(!re._d){var se=cd(re._i),Ae=se.day===void 0?se.date:se.day;re._a=mg([se.year,se.month,Ae,se.hour,se.minute,se.second,se.millisecond],function(Re){return Re&&parseInt(Re,10)}),bd(re)}}function K2(re){var se=new Df(xd(Ng(re)));return se._nextDay&&(se.add(1,"d"),se._nextDay=void 0),se}function Ng(re){var se=re._i,Ae=re._f;return re._locale=re._locale||Au(re._l),se===null||Ae===void 0&&se===""?Uh({nullInput:!0}):(typeof se=="string"&&(re._i=se=re._locale.preparse(se)),zl(se)?new Df(xd(se)):(If(se)?re._d=se:Rl(Ae)?X2(re):Ae?_d(re):Q2(re),od(re)||(re._d=null),re))}function Q2(re){var se=re._i;ks(se)?re._d=new Date(Br.now()):If(se)?re._d=new Date(se.valueOf()):typeof se=="string"?Y2(re):Rl(se)?(re._a=mg(se.slice(0),function(Ae){return parseInt(Ae,10)}),bd(re)):fc(se)?J2(re):ku(se)?re._d=new Date(se):Br.createFromInputFallback(re)}function jg(re,se,Ae,Re,Ge){var N={};return(se===!0||se===!1)&&(Re=se,se=void 0),(Ae===!0||Ae===!1)&&(Re=Ae,Ae=void 0),(fc(re)&&ad(re)||Rl(re)&&re.length===0)&&(re=void 0),N._isAMomentObject=!0,N._useUTC=N._isUTC=Ge,N._l=Ae,N._i=re,N._f=se,N._strict=Re,K2(N)}function _a(re,se,Ae,Re){return jg(re,se,Ae,Re,!1)}var $2=hl("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var re=_a.apply(null,arguments);return this.isValid()&&re.isValid()?re<this?this:re:Uh()}),eb=hl("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var re=_a.apply(null,arguments);return this.isValid()&&re.isValid()?re>this?this:re:Uh()});function Ug(re,se){var Ae,Re;if(se.length===1&&Rl(se[0])&&(se=se[0]),!se.length)return _a();for(Ae=se[0],Re=1;Re<se.length;++Re)(!se[Re].isValid()||se[Re][re](Ae))&&(Ae=se[Re]);return Ae}function tb(){var re=[].slice.call(arguments,0);return Ug("isBefore",re)}function nb(){var re=[].slice.call(arguments,0);return Ug("isAfter",re)}var rb=function(){return Date.now?Date.now():+new Date},kf=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ib(re){var se,Ae=!1,Re,Ge=kf.length;for(se in re)if(Ui(re,se)&&!(Za.call(kf,se)!==-1&&(re[se]==null||!isNaN(re[se]))))return!1;for(Re=0;Re<Ge;++Re)if(re[kf[Re]]){if(Ae)return!1;parseFloat(re[kf[Re]])!==Ti(re[kf[Re]])&&(Ae=!0)}return!0}function ab(){return this._isValid}function ob(){return Bl(NaN)}function Xh(re){var se=cd(re),Ae=se.year||0,Re=se.quarter||0,Ge=se.month||0,N=se.week||se.isoWeek||0,L=se.day||0,e=se.hour||0,T=se.minute||0,w=se.second||0,i=se.millisecond||0;this._isValid=ib(se),this._milliseconds=+i+w*1e3+T*6e4+e*1e3*60*60,this._days=+L+N*7,this._months=+Ge+Re*3+Ae*12,this._data={},this._locale=Au(),this._bubble()}function Oh(re){return re instanceof Xh}function nd(re){return re<0?Math.round(-1*re)*-1:Math.round(re)}function sb(re,se,Ae){var Re=Math.min(re.length,se.length),Ge=Math.abs(re.length-se.length),N=0,L;for(L=0;L<Re;L++)(Ae&&re[L]!==se[L]||!Ae&&Ti(re[L])!==Ti(se[L]))&&N++;return N+Ge}function Vg(re,se){Jr(re,0,0,function(){var Ae=this.utcOffset(),Re="+";return Ae<0&&(Ae=-Ae,Re="-"),Re+ru(~~(Ae/60),2)+se+ru(~~Ae%60,2)})}Vg("Z",":");Vg("ZZ","");Vr("Z",Gh);Vr("ZZ",Gh);sa(["Z","ZZ"],function(re,se,Ae){Ae._useUTC=!0,Ae._tzm=wd(Gh,re)});var lb=/([\+\-]|\d\d)/gi;function wd(re,se){var Ae=(se||"").match(re),Re,Ge,N;return Ae===null?null:(Re=Ae[Ae.length-1]||[],Ge=(Re+"").match(lb)||["-",0,0],N=+(Ge[1]*60)+Ti(Ge[2]),N===0?0:Ge[0]==="+"?N:-N)}function Td(re,se){var Ae,Re;return se._isUTC?(Ae=se.clone(),Re=(zl(re)||If(re)?re.valueOf():_a(re).valueOf())-Ae.valueOf(),Ae._d.setTime(Ae._d.valueOf()+Re),Br.updateOffset(Ae,!1),Ae):_a(re).local()}function rd(re){return-Math.round(re._d.getTimezoneOffset())}Br.updateOffset=function(){};function ub(re,se,Ae){var Re=this._offset||0,Ge;if(!this.isValid())return re!=null?this:NaN;if(re!=null){if(typeof re=="string"){if(re=wd(Gh,re),re===null)return this}else Math.abs(re)<16&&!Ae&&(re=re*60);return!this._isUTC&&se&&(Ge=rd(this)),this._offset=re,this._isUTC=!0,Ge!=null&&this.add(Ge,"m"),Re!==re&&(!se||this._changeInProgress?Yg(this,Bl(re-Re,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Br.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?Re:rd(this)}function cb(re,se){return re!=null?(typeof re!="string"&&(re=-re),this.utcOffset(re,se),this):-this.utcOffset()}function fb(re){return this.utcOffset(0,re)}function hb(re){return this._isUTC&&(this.utcOffset(0,re),this._isUTC=!1,re&&this.subtract(rd(this),"m")),this}function pb(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var re=wd(Px,this._i);re!=null?this.utcOffset(re):this.utcOffset(0,!0)}return this}function db(re){return this.isValid()?(re=re?_a(re).utcOffset():0,(this.utcOffset()-re)%60===0):!1}function gb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function vb(){if(!ks(this._isDSTShifted))return this._isDSTShifted;var re={},se;return sd(re,this),re=Ng(re),re._a?(se=re._isUTC?au(re._a):_a(re._a),this._isDSTShifted=this.isValid()&&sb(re._a,se.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function mb(){return this.isValid()?!this._isUTC:!1}function yb(){return this.isValid()?this._isUTC:!1}function Hg(){return this.isValid()?this._isUTC&&this._offset===0:!1}var xb=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,bb=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bl(re,se){var Ae=re,Re=null,Ge,N,L;return Oh(re)?Ae={ms:re._milliseconds,d:re._days,M:re._months}:ku(re)||!isNaN(+re)?(Ae={},se?Ae[se]=+re:Ae.milliseconds=+re):(Re=xb.exec(re))?(Ge=Re[1]==="-"?-1:1,Ae={y:0,d:Ti(Re[tu])*Ge,h:Ti(Re[uo])*Ge,m:Ti(Re[Dl])*Ge,s:Ti(Re[_u])*Ge,ms:Ti(nd(Re[cc]*1e3))*Ge}):(Re=bb.exec(re))?(Ge=Re[1]==="-"?-1:1,Ae={y:sc(Re[2],Ge),M:sc(Re[3],Ge),w:sc(Re[4],Ge),d:sc(Re[5],Ge),h:sc(Re[6],Ge),m:sc(Re[7],Ge),s:sc(Re[8],Ge)}):Ae==null?Ae={}:typeof Ae=="object"&&("from"in Ae||"to"in Ae)&&(L=_b(_a(Ae.from),_a(Ae.to)),Ae={},Ae.ms=L.milliseconds,Ae.M=L.months),N=new Xh(Ae),Oh(re)&&Ui(re,"_locale")&&(N._locale=re._locale),Oh(re)&&Ui(re,"_isValid")&&(N._isValid=re._isValid),N}Bl.fn=Xh.prototype;Bl.invalid=ob;function sc(re,se){var Ae=re&&parseFloat(re.replace(",","."));return(isNaN(Ae)?0:Ae)*se}function L1(re,se){var Ae={};return Ae.months=se.month()-re.month()+(se.year()-re.year())*12,re.clone().add(Ae.months,"M").isAfter(se)&&--Ae.months,Ae.milliseconds=+se-+re.clone().add(Ae.months,"M"),Ae}function _b(re,se){var Ae;return re.isValid()&&se.isValid()?(se=Td(se,re),re.isBefore(se)?Ae=L1(re,se):(Ae=L1(se,re),Ae.milliseconds=-Ae.milliseconds,Ae.months=-Ae.months),Ae):{milliseconds:0,months:0}}function qg(re,se){return function(Ae,Re){var Ge,N;return Re!==null&&!isNaN(+Re)&&(xg(se,"moment()."+se+"(period, number) is deprecated. Please use moment()."+se+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),N=Ae,Ae=Re,Re=N),Ge=Bl(Ae,Re),Yg(this,Ge,re),this}}function Yg(re,se,Ae,Re){var Ge=se._milliseconds,N=nd(se._days),L=nd(se._months);re.isValid()&&(Re=Re??!0,L&&Lg(re,Lf(re,"Month")+L*Ae),N&&Ag(re,"Date",Lf(re,"Date")+N*Ae),Ge&&re._d.setTime(re._d.valueOf()+Ge*Ae),Re&&Br.updateOffset(re,N||L))}var wb=qg(1,"add"),Tb=qg(-1,"subtract");function Gg(re){return typeof re=="string"||re instanceof String}function kb(re){return zl(re)||If(re)||Gg(re)||ku(re)||Ab(re)||Mb(re)||re===null||re===void 0}function Mb(re){var se=fc(re)&&!ad(re),Ae=!1,Re=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],Ge,N,L=Re.length;for(Ge=0;Ge<L;Ge+=1)N=Re[Ge],Ae=Ae||Ui(re,N);return se&&Ae}function Ab(re){var se=Rl(re),Ae=!1;return se&&(Ae=re.filter(function(Re){return!ku(Re)&&Gg(re)}).length===0),se&&Ae}function Sb(re){var se=fc(re)&&!ad(re),Ae=!1,Re=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],Ge,N;for(Ge=0;Ge<Re.length;Ge+=1)N=Re[Ge],Ae=Ae||Ui(re,N);return se&&Ae}function Eb(re,se){var Ae=re.diff(se,"days",!0);return Ae<-6?"sameElse":Ae<-1?"lastWeek":Ae<0?"lastDay":Ae<1?"sameDay":Ae<2?"nextDay":Ae<7?"nextWeek":"sameElse"}function Lb(re,se){arguments.length===1&&(arguments[0]?kb(arguments[0])?(re=arguments[0],se=void 0):Sb(arguments[0])&&(se=arguments[0],re=void 0):(re=void 0,se=void 0));var Ae=re||_a(),Re=Td(Ae,this).startOf("day"),Ge=Br.calendarFormat(this,Re)||"sameElse",N=se&&(ou(se[Ge])?se[Ge].call(this,Ae):se[Ge]);return this.format(N||this.localeData().calendar(Ge,this,_a(Ae)))}function Cb(){return new Df(this)}function Ob(re,se){var Ae=zl(re)?re:_a(re);return this.isValid()&&Ae.isValid()?(se=pl(se)||"millisecond",se==="millisecond"?this.valueOf()>Ae.valueOf():Ae.valueOf()<this.clone().startOf(se).valueOf()):!1}function Pb(re,se){var Ae=zl(re)?re:_a(re);return this.isValid()&&Ae.isValid()?(se=pl(se)||"millisecond",se==="millisecond"?this.valueOf()<Ae.valueOf():this.clone().endOf(se).valueOf()<Ae.valueOf()):!1}function Ib(re,se,Ae,Re){var Ge=zl(re)?re:_a(re),N=zl(se)?se:_a(se);return this.isValid()&&Ge.isValid()&&N.isValid()?(Re=Re||"()",(Re[0]==="("?this.isAfter(Ge,Ae):!this.isBefore(Ge,Ae))&&(Re[1]===")"?this.isBefore(N,Ae):!this.isAfter(N,Ae))):!1}function Db(re,se){var Ae=zl(re)?re:_a(re),Re;return this.isValid()&&Ae.isValid()?(se=pl(se)||"millisecond",se==="millisecond"?this.valueOf()===Ae.valueOf():(Re=Ae.valueOf(),this.clone().startOf(se).valueOf()<=Re&&Re<=this.clone().endOf(se).valueOf())):!1}function Rb(re,se){return this.isSame(re,se)||this.isAfter(re,se)}function zb(re,se){return this.isSame(re,se)||this.isBefore(re,se)}function Fb(re,se,Ae){var Re,Ge,N;if(!this.isValid())return NaN;if(Re=Td(re,this),!Re.isValid())return NaN;switch(Ge=(Re.utcOffset()-this.utcOffset())*6e4,se=pl(se),se){case"year":N=Ph(this,Re)/12;break;case"month":N=Ph(this,Re);break;case"quarter":N=Ph(this,Re)/3;break;case"second":N=(this-Re)/1e3;break;case"minute":N=(this-Re)/6e4;break;case"hour":N=(this-Re)/36e5;break;case"day":N=(this-Re-Ge)/864e5;break;case"week":N=(this-Re-Ge)/6048e5;break;default:N=this-Re}return Ae?N:ul(N)}function Ph(re,se){if(re.date()<se.date())return-Ph(se,re);var Ae=(se.year()-re.year())*12+(se.month()-re.month()),Re=re.clone().add(Ae,"months"),Ge,N;return se-Re<0?(Ge=re.clone().add(Ae-1,"months"),N=(se-Re)/(Re-Ge)):(Ge=re.clone().add(Ae+1,"months"),N=(se-Re)/(Ge-Re)),-(Ae+N)||0}Br.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Br.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Bb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Nb(re){if(!this.isValid())return null;var se=re!==!0,Ae=se?this.clone().utc():this;return Ae.year()<0||Ae.year()>9999?Ch(Ae,se?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ou(Date.prototype.toISOString)?se?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ch(Ae,"Z")):Ch(Ae,se?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function jb(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var re="moment",se="",Ae,Re,Ge,N;return this.isLocal()||(re=this.utcOffset()===0?"moment.utc":"moment.parseZone",se="Z"),Ae="["+re+'("]',Re=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",Ge="-MM-DD[T]HH:mm:ss.SSS",N=se+'[")]',this.format(Ae+Re+Ge+N)}function Ub(re){re||(re=this.isUtc()?Br.defaultFormatUtc:Br.defaultFormat);var se=Ch(this,re);return this.localeData().postformat(se)}function Vb(re,se){return this.isValid()&&(zl(re)&&re.isValid()||_a(re).isValid())?Bl({to:this,from:re}).locale(this.locale()).humanize(!se):this.localeData().invalidDate()}function Hb(re){return this.from(_a(),re)}function qb(re,se){return this.isValid()&&(zl(re)&&re.isValid()||_a(re).isValid())?Bl({from:this,to:re}).locale(this.locale()).humanize(!se):this.localeData().invalidDate()}function Yb(re){return this.to(_a(),re)}function Wg(re){var se;return re===void 0?this._locale._abbr:(se=Au(re),se!=null&&(this._locale=se),this)}var Zg=hl("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(re){return re===void 0?this.localeData():this.locale(re)});function Xg(){return this._locale}var Fh=1e3,Hc=60*Fh,Bh=60*Hc,Jg=(365*400+97)*24*Bh;function qc(re,se){return(re%se+se)%se}function Kg(re,se,Ae){return re<100&&re>=0?new Date(re+400,se,Ae)-Jg:new Date(re,se,Ae).valueOf()}function Qg(re,se,Ae){return re<100&&re>=0?Date.UTC(re+400,se,Ae)-Jg:Date.UTC(re,se,Ae)}function Gb(re){var se,Ae;if(re=pl(re),re===void 0||re==="millisecond"||!this.isValid())return this;switch(Ae=this._isUTC?Qg:Kg,re){case"year":se=Ae(this.year(),0,1);break;case"quarter":se=Ae(this.year(),this.month()-this.month()%3,1);break;case"month":se=Ae(this.year(),this.month(),1);break;case"week":se=Ae(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":se=Ae(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":se=Ae(this.year(),this.month(),this.date());break;case"hour":se=this._d.valueOf(),se-=qc(se+(this._isUTC?0:this.utcOffset()*Hc),Bh);break;case"minute":se=this._d.valueOf(),se-=qc(se,Hc);break;case"second":se=this._d.valueOf(),se-=qc(se,Fh);break}return this._d.setTime(se),Br.updateOffset(this,!0),this}function Wb(re){var se,Ae;if(re=pl(re),re===void 0||re==="millisecond"||!this.isValid())return this;switch(Ae=this._isUTC?Qg:Kg,re){case"year":se=Ae(this.year()+1,0,1)-1;break;case"quarter":se=Ae(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":se=Ae(this.year(),this.month()+1,1)-1;break;case"week":se=Ae(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":se=Ae(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":se=Ae(this.year(),this.month(),this.date()+1)-1;break;case"hour":se=this._d.valueOf(),se+=Bh-qc(se+(this._isUTC?0:this.utcOffset()*Hc),Bh)-1;break;case"minute":se=this._d.valueOf(),se+=Hc-qc(se,Hc)-1;break;case"second":se=this._d.valueOf(),se+=Fh-qc(se,Fh)-1;break}return this._d.setTime(se),Br.updateOffset(this,!0),this}function Zb(){return this._d.valueOf()-(this._offset||0)*6e4}function Xb(){return Math.floor(this.valueOf()/1e3)}function Jb(){return new Date(this.valueOf())}function Kb(){var re=this;return[re.year(),re.month(),re.date(),re.hour(),re.minute(),re.second(),re.millisecond()]}function Qb(){var re=this;return{years:re.year(),months:re.month(),date:re.date(),hours:re.hours(),minutes:re.minutes(),seconds:re.seconds(),milliseconds:re.milliseconds()}}function $b(){return this.isValid()?this.toISOString():null}function e_(){return od(this)}function t_(){return Uu({},fi(this))}function n_(){return fi(this).overflow}function r_(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Jr("N",0,0,"eraAbbr");Jr("NN",0,0,"eraAbbr");Jr("NNN",0,0,"eraAbbr");Jr("NNNN",0,0,"eraName");Jr("NNNNN",0,0,"eraNarrow");Jr("y",["y",1],"yo","eraYear");Jr("y",["yy",2],0,"eraYear");Jr("y",["yyy",3],0,"eraYear");Jr("y",["yyyy",4],0,"eraYear");Vr("N",kd);Vr("NN",kd);Vr("NNN",kd);Vr("NNNN",d_);Vr("NNNNN",g_);sa(["N","NN","NNN","NNNN","NNNNN"],function(re,se,Ae,Re){var Ge=Ae._locale.erasParse(re,Re,Ae._strict);Ge?fi(Ae).era=Ge:fi(Ae).invalidEra=re});Vr("y",Gc);Vr("yy",Gc);Vr("yyy",Gc);Vr("yyyy",Gc);Vr("yo",v_);sa(["y","yy","yyy","yyyy"],qo);sa(["yo"],function(re,se,Ae,Re){var Ge;Ae._locale._eraYearOrdinalRegex&&(Ge=re.match(Ae._locale._eraYearOrdinalRegex)),Ae._locale.eraYearOrdinalParse?se[qo]=Ae._locale.eraYearOrdinalParse(re,Ge):se[qo]=parseInt(re,10)});function i_(re,se){var Ae,Re,Ge,N=this._eras||Au("en")._eras;for(Ae=0,Re=N.length;Ae<Re;++Ae){switch(typeof N[Ae].since){case"string":Ge=Br(N[Ae].since).startOf("day"),N[Ae].since=Ge.valueOf();break}switch(typeof N[Ae].until){case"undefined":N[Ae].until=1/0;break;case"string":Ge=Br(N[Ae].until).startOf("day").valueOf(),N[Ae].until=Ge.valueOf();break}}return N}function a_(re,se,Ae){var Re,Ge,N=this.eras(),L,e,T;for(re=re.toUpperCase(),Re=0,Ge=N.length;Re<Ge;++Re)if(L=N[Re].name.toUpperCase(),e=N[Re].abbr.toUpperCase(),T=N[Re].narrow.toUpperCase(),Ae)switch(se){case"N":case"NN":case"NNN":if(e===re)return N[Re];break;case"NNNN":if(L===re)return N[Re];break;case"NNNNN":if(T===re)return N[Re];break}else if([L,e,T].indexOf(re)>=0)return N[Re]}function o_(re,se){var Ae=re.since<=re.until?1:-1;return se===void 0?Br(re.since).year():Br(re.since).year()+(se-re.offset)*Ae}function s_(){var re,se,Ae,Re=this.localeData().eras();for(re=0,se=Re.length;re<se;++re)if(Ae=this.clone().startOf("day").valueOf(),Re[re].since<=Ae&&Ae<=Re[re].until||Re[re].until<=Ae&&Ae<=Re[re].since)return Re[re].name;return""}function l_(){var re,se,Ae,Re=this.localeData().eras();for(re=0,se=Re.length;re<se;++re)if(Ae=this.clone().startOf("day").valueOf(),Re[re].since<=Ae&&Ae<=Re[re].until||Re[re].until<=Ae&&Ae<=Re[re].since)return Re[re].narrow;return""}function u_(){var re,se,Ae,Re=this.localeData().eras();for(re=0,se=Re.length;re<se;++re)if(Ae=this.clone().startOf("day").valueOf(),Re[re].since<=Ae&&Ae<=Re[re].until||Re[re].until<=Ae&&Ae<=Re[re].since)return Re[re].abbr;return""}function c_(){var re,se,Ae,Re,Ge=this.localeData().eras();for(re=0,se=Ge.length;re<se;++re)if(Ae=Ge[re].since<=Ge[re].until?1:-1,Re=this.clone().startOf("day").valueOf(),Ge[re].since<=Re&&Re<=Ge[re].until||Ge[re].until<=Re&&Re<=Ge[re].since)return(this.year()-Br(Ge[re].since).year())*Ae+Ge[re].offset;return this.year()}function f_(re){return Ui(this,"_erasNameRegex")||Md.call(this),re?this._erasNameRegex:this._erasRegex}function h_(re){return Ui(this,"_erasAbbrRegex")||Md.call(this),re?this._erasAbbrRegex:this._erasRegex}function p_(re){return Ui(this,"_erasNarrowRegex")||Md.call(this),re?this._erasNarrowRegex:this._erasRegex}function kd(re,se){return se.erasAbbrRegex(re)}function d_(re,se){return se.erasNameRegex(re)}function g_(re,se){return se.erasNarrowRegex(re)}function v_(re,se){return se._eraYearOrdinalRegex||Gc}function Md(){var re=[],se=[],Ae=[],Re=[],Ge,N,L,e,T,w=this.eras();for(Ge=0,N=w.length;Ge<N;++Ge)L=wu(w[Ge].name),e=wu(w[Ge].abbr),T=wu(w[Ge].narrow),se.push(L),re.push(e),Ae.push(T),Re.push(L),Re.push(e),Re.push(T);this._erasRegex=new RegExp("^("+Re.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+se.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+re.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+Ae.join("|")+")","i")}Jr(0,["gg",2],0,function(){return this.weekYear()%100});Jr(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Jh(re,se){Jr(0,[re,re.length],0,se)}Jh("gggg","weekYear");Jh("ggggg","weekYear");Jh("GGGG","isoWeekYear");Jh("GGGGG","isoWeekYear");Vr("G",Yh);Vr("g",Yh);Vr("GG",wa,Gs);Vr("gg",wa,Gs);Vr("GGGG",hd,fd);Vr("gggg",hd,fd);Vr("GGGGG",qh,Vh);Vr("ggggg",qh,Vh);zf(["gggg","ggggg","GGGG","GGGGG"],function(re,se,Ae,Re){se[Re.substr(0,2)]=Ti(re)});zf(["gg","GG"],function(re,se,Ae,Re){se[Re]=Br.parseTwoDigitYear(re)});function m_(re){return $g.call(this,re,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function y_(re){return $g.call(this,re,this.isoWeek(),this.isoWeekday(),1,4)}function x_(){return Tu(this.year(),1,4)}function b_(){return Tu(this.isoWeekYear(),1,4)}function __(){var re=this.localeData()._week;return Tu(this.year(),re.dow,re.doy)}function w_(){var re=this.localeData()._week;return Tu(this.weekYear(),re.dow,re.doy)}function $g(re,se,Ae,Re,Ge){var N;return re==null?Of(this,Re,Ge).year:(N=Tu(re,Re,Ge),se>N&&(se=N),T_.call(this,re,se,Ae,Re,Ge))}function T_(re,se,Ae,Re,Ge){var N=Pg(re,se,Ae,Re,Ge),L=Cf(N.year,0,N.dayOfYear);return this.year(L.getUTCFullYear()),this.month(L.getUTCMonth()),this.date(L.getUTCDate()),this}Jr("Q",0,"Qo","quarter");Vr("Q",_g);sa("Q",function(re,se){se[bu]=(Ti(re)-1)*3});function k_(re){return re==null?Math.ceil((this.month()+1)/3):this.month((re-1)*3+this.month()%3)}Jr("D",["DD",2],"Do","date");Vr("D",wa,Wc);Vr("DD",wa,Gs);Vr("Do",function(re,se){return re?se._dayOfMonthOrdinalParse||se._ordinalParse:se._dayOfMonthOrdinalParseLenient});sa(["D","DD"],tu);sa("Do",function(re,se){se[tu]=Ti(re.match(wa)[0])});var ev=Zc("Date",!0);Jr("DDD",["DDDD",3],"DDDo","dayOfYear");Vr("DDD",Hh);Vr("DDDD",wg);sa(["DDD","DDDD"],function(re,se,Ae){Ae._dayOfYear=Ti(re)});function M_(re){var se=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return re==null?se:this.add(re-se,"d")}Jr("m",["mm",2],0,"minute");Vr("m",wa,pd);Vr("mm",wa,Gs);sa(["m","mm"],Dl);var A_=Zc("Minutes",!1);Jr("s",["ss",2],0,"second");Vr("s",wa,pd);Vr("ss",wa,Gs);sa(["s","ss"],_u);var S_=Zc("Seconds",!1);Jr("S",0,0,function(){return~~(this.millisecond()/100)});Jr(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Jr(0,["SSS",3],0,"millisecond");Jr(0,["SSSS",4],0,function(){return this.millisecond()*10});Jr(0,["SSSSS",5],0,function(){return this.millisecond()*100});Jr(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Jr(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Jr(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Jr(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Vr("S",Hh,_g);Vr("SS",Hh,Gs);Vr("SSS",Hh,wg);var Vu,tv;for(Vu="SSSS";Vu.length<=9;Vu+="S")Vr(Vu,Gc);function E_(re,se){se[cc]=Ti(("0."+re)*1e3)}for(Vu="S";Vu.length<=9;Vu+="S")sa(Vu,E_);tv=Zc("Milliseconds",!1);Jr("z",0,0,"zoneAbbr");Jr("zz",0,0,"zoneName");function L_(){return this._isUTC?"UTC":""}function C_(){return this._isUTC?"Coordinated Universal Time":""}var Mr=Df.prototype;Mr.add=wb;Mr.calendar=Lb;Mr.clone=Cb;Mr.diff=Fb;Mr.endOf=Wb;Mr.format=Ub;Mr.from=Vb;Mr.fromNow=Hb;Mr.to=qb;Mr.toNow=Yb;Mr.get=jx;Mr.invalidAt=n_;Mr.isAfter=Ob;Mr.isBefore=Pb;Mr.isBetween=Ib;Mr.isSame=Db;Mr.isSameOrAfter=Rb;Mr.isSameOrBefore=zb;Mr.isValid=e_;Mr.lang=Zg;Mr.locale=Wg;Mr.localeData=Xg;Mr.max=eb;Mr.min=$2;Mr.parsingFlags=t_;Mr.set=Ux;Mr.startOf=Gb;Mr.subtract=Tb;Mr.toArray=Kb;Mr.toObject=Qb;Mr.toDate=Jb;Mr.toISOString=Nb;Mr.inspect=jb;typeof Symbol<"u"&&Symbol.for!=null&&(Mr[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Mr.toJSON=$b;Mr.toString=Bb;Mr.unix=Xb;Mr.valueOf=Zb;Mr.creationData=r_;Mr.eraName=s_;Mr.eraNarrow=l_;Mr.eraAbbr=u_;Mr.eraYear=c_;Mr.year=Mg;Mr.isLeapYear=Nx;Mr.weekYear=m_;Mr.isoWeekYear=y_;Mr.quarter=Mr.quarters=k_;Mr.month=Cg;Mr.daysInMonth=Jx;Mr.week=Mr.weeks=i2;Mr.isoWeek=Mr.isoWeeks=a2;Mr.weeksInYear=__;Mr.weeksInWeekYear=w_;Mr.isoWeeksInYear=x_;Mr.isoWeeksInISOWeekYear=b_;Mr.date=ev;Mr.day=Mr.days=y2;Mr.weekday=x2;Mr.isoWeekday=b2;Mr.dayOfYear=M_;Mr.hour=Mr.hours=S2;Mr.minute=Mr.minutes=A_;Mr.second=Mr.seconds=S_;Mr.millisecond=Mr.milliseconds=tv;Mr.utcOffset=ub;Mr.utc=fb;Mr.local=hb;Mr.parseZone=pb;Mr.hasAlignedHourOffset=db;Mr.isDST=gb;Mr.isLocal=mb;Mr.isUtcOffset=yb;Mr.isUtc=Hg;Mr.isUTC=Hg;Mr.zoneAbbr=L_;Mr.zoneName=C_;Mr.dates=hl("dates accessor is deprecated. Use date instead.",ev);Mr.months=hl("months accessor is deprecated. Use month instead",Cg);Mr.years=hl("years accessor is deprecated. Use year instead",Mg);Mr.zone=hl("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",cb);Mr.isDSTShifted=hl("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",vb);function O_(re){return _a(re*1e3)}function P_(){return _a.apply(null,arguments).parseZone()}function nv(re){return re}var Vi=ld.prototype;Vi.calendar=mx;Vi.longDateFormat=_x;Vi.invalidDate=Tx;Vi.ordinal=Ax;Vi.preparse=nv;Vi.postformat=nv;Vi.relativeTime=Ex;Vi.pastFuture=Lx;Vi.set=gx;Vi.eras=i_;Vi.erasParse=a_;Vi.erasConvertYear=o_;Vi.erasAbbrRegex=h_;Vi.erasNameRegex=f_;Vi.erasNarrowRegex=p_;Vi.months=Gx;Vi.monthsShort=Wx;Vi.monthsParse=Xx;Vi.monthsRegex=Qx;Vi.monthsShortRegex=Kx;Vi.week=e2;Vi.firstDayOfYear=r2;Vi.firstDayOfWeek=n2;Vi.weekdays=p2;Vi.weekdaysMin=g2;Vi.weekdaysShort=d2;Vi.weekdaysParse=m2;Vi.weekdaysRegex=_2;Vi.weekdaysShortRegex=w2;Vi.weekdaysMinRegex=T2;Vi.isPM=M2;Vi.meridiem=E2;function Nh(re,se,Ae,Re){var Ge=Au(),N=au().set(Re,se);return Ge[Ae](N,re)}function rv(re,se,Ae){if(ku(re)&&(se=re,re=void 0),re=re||"",se!=null)return Nh(re,se,Ae,"month");var Re,Ge=[];for(Re=0;Re<12;Re++)Ge[Re]=Nh(re,Re,Ae,"month");return Ge}function Ad(re,se,Ae,Re){typeof re=="boolean"?(ku(se)&&(Ae=se,se=void 0),se=se||""):(se=re,Ae=se,re=!1,ku(se)&&(Ae=se,se=void 0),se=se||"");var Ge=Au(),N=re?Ge._week.dow:0,L,e=[];if(Ae!=null)return Nh(se,(Ae+N)%7,Re,"day");for(L=0;L<7;L++)e[L]=Nh(se,(L+N)%7,Re,"day");return e}function I_(re,se){return rv(re,se,"months")}function D_(re,se){return rv(re,se,"monthsShort")}function R_(re,se,Ae){return Ad(re,se,Ae,"weekdays")}function z_(re,se,Ae){return Ad(re,se,Ae,"weekdaysShort")}function F_(re,se,Ae){return Ad(re,se,Ae,"weekdaysMin")}Hu("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(re){var se=re%10,Ae=Ti(re%100/10)===1?"th":se===1?"st":se===2?"nd":se===3?"rd":"th";return re+Ae}});Br.lang=hl("moment.lang is deprecated. Use moment.locale instead.",Hu);Br.langData=hl("moment.langData is deprecated. Use moment.localeData instead.",Au);var mu=Math.abs;function B_(){var re=this._data;return this._milliseconds=mu(this._milliseconds),this._days=mu(this._days),this._months=mu(this._months),re.milliseconds=mu(re.milliseconds),re.seconds=mu(re.seconds),re.minutes=mu(re.minutes),re.hours=mu(re.hours),re.months=mu(re.months),re.years=mu(re.years),this}function iv(re,se,Ae,Re){var Ge=Bl(se,Ae);return re._milliseconds+=Re*Ge._milliseconds,re._days+=Re*Ge._days,re._months+=Re*Ge._months,re._bubble()}function N_(re,se){return iv(this,re,se,1)}function j_(re,se){return iv(this,re,se,-1)}function C1(re){return re<0?Math.floor(re):Math.ceil(re)}function U_(){var re=this._milliseconds,se=this._days,Ae=this._months,Re=this._data,Ge,N,L,e,T;return re>=0&&se>=0&&Ae>=0||re<=0&&se<=0&&Ae<=0||(re+=C1(id(Ae)+se)*864e5,se=0,Ae=0),Re.milliseconds=re%1e3,Ge=ul(re/1e3),Re.seconds=Ge%60,N=ul(Ge/60),Re.minutes=N%60,L=ul(N/60),Re.hours=L%24,se+=ul(L/24),T=ul(av(se)),Ae+=T,se-=C1(id(T)),e=ul(Ae/12),Ae%=12,Re.days=se,Re.months=Ae,Re.years=e,this}function av(re){return re*4800/146097}function id(re){return re*146097/4800}function V_(re){if(!this.isValid())return NaN;var se,Ae,Re=this._milliseconds;if(re=pl(re),re==="month"||re==="quarter"||re==="year")switch(se=this._days+Re/864e5,Ae=this._months+av(se),re){case"month":return Ae;case"quarter":return Ae/3;case"year":return Ae/12}else switch(se=this._days+Math.round(id(this._months)),re){case"week":return se/7+Re/6048e5;case"day":return se+Re/864e5;case"hour":return se*24+Re/36e5;case"minute":return se*1440+Re/6e4;case"second":return se*86400+Re/1e3;case"millisecond":return Math.floor(se*864e5)+Re;default:throw new Error("Unknown unit "+re)}}function Su(re){return function(){return this.as(re)}}var ov=Su("ms"),H_=Su("s"),q_=Su("m"),Y_=Su("h"),G_=Su("d"),W_=Su("w"),Z_=Su("M"),X_=Su("Q"),J_=Su("y"),K_=ov;function Q_(){return Bl(this)}function $_(re){return re=pl(re),this.isValid()?this[re+"s"]():NaN}function pc(re){return function(){return this.isValid()?this._data[re]:NaN}}var e3=pc("milliseconds"),t3=pc("seconds"),n3=pc("minutes"),r3=pc("hours"),i3=pc("days"),a3=pc("months"),o3=pc("years");function s3(){return ul(this.days()/7)}var yu=Math.round,jc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function l3(re,se,Ae,Re,Ge){return Ge.relativeTime(se||1,!!Ae,re,Re)}function u3(re,se,Ae,Re){var Ge=Bl(re).abs(),N=yu(Ge.as("s")),L=yu(Ge.as("m")),e=yu(Ge.as("h")),T=yu(Ge.as("d")),w=yu(Ge.as("M")),i=yu(Ge.as("w")),_=yu(Ge.as("y")),v=N<=Ae.ss&&["s",N]||N<Ae.s&&["ss",N]||L<=1&&["m"]||L<Ae.m&&["mm",L]||e<=1&&["h"]||e<Ae.h&&["hh",e]||T<=1&&["d"]||T<Ae.d&&["dd",T];return Ae.w!=null&&(v=v||i<=1&&["w"]||i<Ae.w&&["ww",i]),v=v||w<=1&&["M"]||w<Ae.M&&["MM",w]||_<=1&&["y"]||["yy",_],v[2]=se,v[3]=+re>0,v[4]=Re,l3.apply(null,v)}function c3(re){return re===void 0?yu:typeof re=="function"?(yu=re,!0):!1}function f3(re,se){return jc[re]===void 0?!1:se===void 0?jc[re]:(jc[re]=se,re==="s"&&(jc.ss=se-1),!0)}function h3(re,se){if(!this.isValid())return this.localeData().invalidDate();var Ae=!1,Re=jc,Ge,N;return typeof re=="object"&&(se=re,re=!1),typeof re=="boolean"&&(Ae=re),typeof se=="object"&&(Re=Object.assign({},jc,se),se.s!=null&&se.ss==null&&(Re.ss=se.s-1)),Ge=this.localeData(),N=u3(this,!Ae,Re,Ge),Ae&&(N=Ge.pastFuture(+this,N)),Ge.postformat(N)}var Zp=Math.abs;function Fc(re){return(re>0)-(re<0)||+re}function Kh(){if(!this.isValid())return this.localeData().invalidDate();var re=Zp(this._milliseconds)/1e3,se=Zp(this._days),Ae=Zp(this._months),Re,Ge,N,L,e=this.asSeconds(),T,w,i,_;return e?(Re=ul(re/60),Ge=ul(Re/60),re%=60,Re%=60,N=ul(Ae/12),Ae%=12,L=re?re.toFixed(3).replace(/\.?0+$/,""):"",T=e<0?"-":"",w=Fc(this._months)!==Fc(e)?"-":"",i=Fc(this._days)!==Fc(e)?"-":"",_=Fc(this._milliseconds)!==Fc(e)?"-":"",T+"P"+(N?w+N+"Y":"")+(Ae?w+Ae+"M":"")+(se?i+se+"D":"")+(Ge||Re||re?"T":"")+(Ge?_+Ge+"H":"")+(Re?_+Re+"M":"")+(re?_+L+"S":"")):"P0D"}var Ii=Xh.prototype;Ii.isValid=ab;Ii.abs=B_;Ii.add=N_;Ii.subtract=j_;Ii.as=V_;Ii.asMilliseconds=ov;Ii.asSeconds=H_;Ii.asMinutes=q_;Ii.asHours=Y_;Ii.asDays=G_;Ii.asWeeks=W_;Ii.asMonths=Z_;Ii.asQuarters=X_;Ii.asYears=J_;Ii.valueOf=K_;Ii._bubble=U_;Ii.clone=Q_;Ii.get=$_;Ii.milliseconds=e3;Ii.seconds=t3;Ii.minutes=n3;Ii.hours=r3;Ii.days=i3;Ii.weeks=s3;Ii.months=a3;Ii.years=o3;Ii.humanize=h3;Ii.toISOString=Kh;Ii.toString=Kh;Ii.toJSON=Kh;Ii.locale=Wg;Ii.localeData=Xg;Ii.toIsoString=hl("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kh);Ii.lang=Zg;Jr("X",0,0,"unix");Jr("x",0,0,"valueOf");Vr("x",Yh);Vr("X",Ix);sa("X",function(re,se,Ae){Ae._d=new Date(parseFloat(re)*1e3)});sa("x",function(re,se,Ae){Ae._d=new Date(Ti(re))});//! moment.js
Br.version="2.30.1";px(_a);Br.fn=Mr;Br.min=tb;Br.max=nb;Br.now=rb;Br.utc=au;Br.unix=O_;Br.months=I_;Br.isDate=If;Br.locale=Hu;Br.invalid=Uh;Br.duration=Bl;Br.isMoment=zl;Br.weekdays=R_;Br.parseZone=P_;Br.localeData=Au;Br.isDuration=Oh;Br.monthsShort=D_;Br.weekdaysMin=F_;Br.defineLocale=yd;Br.updateLocale=P2;Br.locales=I2;Br.weekdaysShort=z_;Br.normalizeUnits=pl;Br.relativeTimeRounding=c3;Br.relativeTimeThreshold=f3;Br.calendarFormat=Eb;Br.prototype=Mr;Br.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const p3=Object.freeze(Object.defineProperty({__proto__:null,default:Br},Symbol.toStringTag,{value:"Module"}));var d3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function g3(re){return re&&re.__esModule&&Object.prototype.hasOwnProperty.call(re,"default")?re.default:re}function v3(re){if(re.__esModule)return re;var se=re.default;if(typeof se=="function"){var Ae=function Re(){return this instanceof Re?Reflect.construct(se,arguments,this.constructor):se.apply(this,arguments)};Ae.prototype=se.prototype}else Ae={};return Object.defineProperty(Ae,"__esModule",{value:!0}),Object.keys(re).forEach(function(Re){var Ge=Object.getOwnPropertyDescriptor(re,Re);Object.defineProperty(Ae,Re,Ge.get?Ge:{enumerable:!0,get:function(){return re[Re]}})}),Ae}var sv={exports:{}};const m3=v3(p3);(function(re,se){(function(Ae,Re){re.exports=Re(m3)})(d3,function(Ae){return function(Re){function Ge(L){if(N[L])return N[L].exports;var e=N[L]={i:L,l:!1,exports:{}};return Re[L].call(e.exports,e,e.exports,Ge),e.l=!0,e.exports}var N={};return Ge.m=Re,Ge.c=N,Ge.i=function(L){return L},Ge.d=function(L,e,T){Ge.o(L,e)||Object.defineProperty(L,e,{configurable:!1,enumerable:!0,get:T})},Ge.n=function(L){var e=L&&L.__esModule?function(){return L.default}:function(){return L};return Ge.d(e,"a",e),e},Ge.o=function(L,e){return Object.prototype.hasOwnProperty.call(L,e)},Ge.p="",Ge(Ge.s=3)}([function(Re,Ge,N){var L=N(5)();Re.exports=function(e){return e!==L&&e!==null}},function(Re,Ge,N){Re.exports=N(18)()?Symbol:N(20)},function(Re,Ge){Re.exports=Ae},function(Re,Ge,N){function L(o){return o&&o.__esModule?o:{default:o}}function e(o,u,p){return u in o?Object.defineProperty(o,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):o[u]=p,o}function T(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")}function w(o){return o.range=function(u,p){var c=this;return typeof u=="string"&&r.hasOwnProperty(u)?new l(o(c).startOf(u),o(c).endOf(u)):new l(u,p)},o.rangeFromInterval=function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o();if(o.isMoment(c)||(c=o(c)),!c.isValid())throw new Error("Invalid date.");var b=c.clone().add(p,u),g=[];return g.push(o.min(c,b)),g.push(o.max(c,b)),new l(g)},o.rangeFromISOString=function(u){var p=i(u),c=o.parseZone(p[0]),b=o.parseZone(p[1]);return new l(c,b)},o.parseZoneRange=o.rangeFromISOString,o.fn.range=o.range,o.range.constructor=l,o.isRange=function(u){return u instanceof l},o.fn.within=function(u){return u.contains(this.toDate())},o}function i(o){return o.split("/")}Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.DateRange=void 0;var _=function(){function o(u,p){var c=[],b=!0,g=!1,d=void 0;try{for(var m,x=u[Symbol.iterator]();!(b=(m=x.next()).done)&&(c.push(m.value),!p||c.length!==p);b=!0);}catch(y){g=!0,d=y}finally{try{!b&&x.return&&x.return()}finally{if(g)throw d}}return c}return function(u,p){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return o(u,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},h=function(){function o(u,p){for(var c=0;c<p.length;c++){var b=p[c];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,b.key,b)}}return function(u,p,c){return p&&o(u.prototype,p),c&&o(u,c),u}}();Ge.extendMoment=w;var s=N(2),t=L(s),a=N(1),n=L(a),r={year:!0,quarter:!0,month:!0,week:!0,day:!0,hour:!0,minute:!0,second:!0},l=Ge.DateRange=function(){function o(u,p){T(this,o);var c=u,b=p;if(arguments.length===1||p===void 0){if((u===void 0?"undefined":v(u))==="object"&&u.length===2){var g=_(u,2);c=g[0],b=g[1]}else if(typeof u=="string"){var d=i(u),m=_(d,2);c=m[0],b=m[1]}}this.start=c||c===0?(0,t.default)(c):(0,t.default)(-864e13),this.end=b||b===0?(0,t.default)(b):(0,t.default)(864e13)}return h(o,[{key:"adjacent",value:function(u){var p=this.start.isSame(u.end),c=this.end.isSame(u.start);return p&&u.start.valueOf()<=this.start.valueOf()||c&&u.end.valueOf()>=this.end.valueOf()}},{key:"add",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{adjacent:!1};return this.overlaps(u,p)?new this.constructor(t.default.min(this.start,u.start),t.default.max(this.end,u.end)):null}},{key:"by",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{excludeEnd:!1,step:1},c=this;return e({},n.default.iterator,function(){var b=p.step||1,g=Math.abs(c.start.diff(c.end,u))/b,d=p.excludeEnd||!1,m=0;return p.hasOwnProperty("exclusive")&&(d=p.exclusive),{next:function(){var x=c.start.clone().add(m*b,u),y=d?!(m<g):!(m<=g);return m++,{done:y,value:y?void 0:x}}}})}},{key:"byRange",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{excludeEnd:!1,step:1},c=this,b=p.step||1,g=this.valueOf()/u.valueOf()/b,d=Math.floor(g),m=p.excludeEnd||!1,x=0;return p.hasOwnProperty("exclusive")&&(m=p.exclusive),e({},n.default.iterator,function(){return d===1/0?{done:!0}:{next:function(){var y=(0,t.default)(c.start.valueOf()+u.valueOf()*x*b),k=d===g&&m?!(x<d):!(x<=d);return x++,{done:k,value:k?void 0:y}}}})}},{key:"center",value:function(){var u=this.start.valueOf()+this.diff()/2;return(0,t.default)(u)}},{key:"clone",value:function(){return new this.constructor(this.start.clone(),this.end.clone())}},{key:"contains",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{excludeStart:!1,excludeEnd:!1},c=this.start.valueOf(),b=this.end.valueOf(),g=u.valueOf(),d=u.valueOf(),m=p.excludeStart||!1,x=p.excludeEnd||!1;p.hasOwnProperty("exclusive")&&(m=x=p.exclusive),u instanceof o&&(g=u.start.valueOf(),d=u.end.valueOf());var y=c<g||c<=g&&!m,k=b>d||b>=d&&!x;return y&&k}},{key:"diff",value:function(u,p){return this.end.diff(this.start,u,p)}},{key:"duration",value:function(u,p){return this.diff(u,p)}},{key:"intersect",value:function(u){var p=this.start.valueOf(),c=this.end.valueOf(),b=u.start.valueOf(),g=u.end.valueOf(),d=p==c,m=b==g;if(d){var x=p;if(x==b||x==g)return null;if(x>b&&x<g)return this.clone()}else if(m){var y=b;if(y==p||y==c)return null;if(y>p&&y<c)return new this.constructor(y,y)}return p<=b&&b<c&&c<g?new this.constructor(b,c):b<p&&p<g&&g<=c?new this.constructor(p,g):b<p&&p<=c&&c<g?this.clone():p<=b&&b<=g&&g<=c?new this.constructor(b,g):null}},{key:"isEqual",value:function(u){return this.start.isSame(u.start)&&this.end.isSame(u.end)}},{key:"isSame",value:function(u){return this.isEqual(u)}},{key:"overlaps",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{adjacent:!1},c=this.intersect(u)!==null;return p.adjacent&&!c?this.adjacent(u):c}},{key:"reverseBy",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{excludeStart:!1,step:1},c=this;return e({},n.default.iterator,function(){var b=p.step||1,g=Math.abs(c.start.diff(c.end,u))/b,d=p.excludeStart||!1,m=0;return p.hasOwnProperty("exclusive")&&(d=p.exclusive),{next:function(){var x=c.end.clone().subtract(m*b,u),y=d?!(m<g):!(m<=g);return m++,{done:y,value:y?void 0:x}}}})}},{key:"reverseByRange",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{excludeStart:!1,step:1},c=this,b=p.step||1,g=this.valueOf()/u.valueOf()/b,d=Math.floor(g),m=p.excludeStart||!1,x=0;return p.hasOwnProperty("exclusive")&&(m=p.exclusive),e({},n.default.iterator,function(){return d===1/0?{done:!0}:{next:function(){var y=(0,t.default)(c.end.valueOf()-u.valueOf()*x*b),k=d===g&&m?!(x<d):!(x<=d);return x++,{done:k,value:k?void 0:y}}}})}},{key:"snapTo",value:function(u){var p=this.clone();return p.start.isSame((0,t.default)(-864e13))||(p.start=p.start.startOf(u)),p.end.isSame((0,t.default)(864e13))||(p.end=p.end.endOf(u)),p}},{key:"subtract",value:function(u){var p=this.start.valueOf(),c=this.end.valueOf(),b=u.start.valueOf(),g=u.end.valueOf();return this.intersect(u)===null?[this]:b<=p&&p<c&&c<=g?[]:b<=p&&p<g&&g<c?[new this.constructor(g,c)]:p<b&&b<c&&c<=g?[new this.constructor(p,b)]:p<b&&b<g&&g<c?[new this.constructor(p,b),new this.constructor(g,c)]:p<b&&b<c&&g<c?[new this.constructor(p,b),new this.constructor(b,c)]:[]}},{key:"toDate",value:function(){return[this.start.toDate(),this.end.toDate()]}},{key:"toString",value:function(){return this.start.format()+"/"+this.end.format()}},{key:"valueOf",value:function(){return this.end.valueOf()-this.start.valueOf()}}]),o}()},function(Re,Ge,N){var L,e=N(6),T=N(13),w=N(9),i=N(15);L=Re.exports=function(_,v){var h,s,t,a,n;return arguments.length<2||typeof _!="string"?(a=v,v=_,_=null):a=arguments[2],_==null?(h=t=!0,s=!1):(h=i.call(_,"c"),s=i.call(_,"e"),t=i.call(_,"w")),n={value:v,configurable:h,enumerable:s,writable:t},a?e(T(a),n):n},L.gs=function(_,v,h){var s,t,a,n;return typeof _!="string"?(a=h,h=v,v=_,_=null):a=arguments[3],v==null?v=void 0:w(v)?h==null?h=void 0:w(h)||(a=h,h=void 0):(a=v,v=h=void 0),_==null?(s=!0,t=!1):(s=i.call(_,"c"),t=i.call(_,"e")),n={get:v,set:h,configurable:s,enumerable:t},a?e(T(a),n):n}},function(Re,Ge,N){Re.exports=function(){}},function(Re,Ge,N){Re.exports=N(7)()?Object.assign:N(8)},function(Re,Ge,N){Re.exports=function(){var L,e=Object.assign;return typeof e=="function"&&(L={foo:"raz"},e(L,{bar:"dwa"},{trzy:"trzy"}),L.foo+L.bar+L.trzy==="razdwatrzy")}},function(Re,Ge,N){var L=N(10),e=N(14),T=Math.max;Re.exports=function(w,i){var _,v,h,s=T(arguments.length,2);for(w=Object(e(w)),h=function(t){try{w[t]=i[t]}catch(a){_||(_=a)}},v=1;v<s;++v)i=arguments[v],L(i).forEach(h);if(_!==void 0)throw _;return w}},function(Re,Ge,N){Re.exports=function(L){return typeof L=="function"}},function(Re,Ge,N){Re.exports=N(11)()?Object.keys:N(12)},function(Re,Ge,N){Re.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(Re,Ge,N){var L=N(0),e=Object.keys;Re.exports=function(T){return e(L(T)?Object(T):T)}},function(Re,Ge,N){var L=N(0),e=Array.prototype.forEach,T=Object.create,w=function(i,_){var v;for(v in i)_[v]=i[v]};Re.exports=function(i){var _=T(null);return e.call(arguments,function(v){L(v)&&w(Object(v),_)}),_}},function(Re,Ge,N){var L=N(0);Re.exports=function(e){if(!L(e))throw new TypeError("Cannot use null or undefined");return e}},function(Re,Ge,N){Re.exports=N(16)()?String.prototype.contains:N(17)},function(Re,Ge,N){var L="razdwatrzy";Re.exports=function(){return typeof L.contains=="function"&&L.contains("dwa")===!0&&L.contains("foo")===!1}},function(Re,Ge,N){var L=String.prototype.indexOf;Re.exports=function(e){return L.call(this,e,arguments[1])>-1}},function(Re,Ge,N){var L={object:!0,symbol:!0};Re.exports=function(){var e;if(typeof Symbol!="function")return!1;e=Symbol("test symbol");try{String(e)}catch{return!1}return!!L[typeof Symbol.iterator]&&!!L[typeof Symbol.toPrimitive]&&!!L[typeof Symbol.toStringTag]}},function(Re,Ge,N){Re.exports=function(L){return!!L&&(typeof L=="symbol"||!!L.constructor&&L.constructor.name==="Symbol"&&L[L.constructor.toStringTag]==="Symbol")}},function(Re,Ge,N){var L,e,T,w,i=N(4),_=N(21),v=Object.create,h=Object.defineProperties,s=Object.defineProperty,t=Object.prototype,a=v(null);if(typeof Symbol=="function"){L=Symbol;try{String(L()),w=!0}catch{}}var n=function(){var r=v(null);return function(l){for(var o,u,p=0;r[l+(p||"")];)++p;return l+=p||"",r[l]=!0,o="@@"+l,s(t,o,i.gs(null,function(c){u||(u=!0,s(this,o,i(c)),u=!1)})),o}}();T=function(r){if(this instanceof T)throw new TypeError("Symbol is not a constructor");return e(r)},Re.exports=e=function r(l){var o;if(this instanceof r)throw new TypeError("Symbol is not a constructor");return w?L(l):(o=v(T.prototype),l=l===void 0?"":String(l),h(o,{__description__:i("",l),__name__:i("",n(l))}))},h(e,{for:i(function(r){return a[r]?a[r]:a[r]=e(String(r))}),keyFor:i(function(r){var l;_(r);for(l in a)if(a[l]===r)return l}),hasInstance:i("",L&&L.hasInstance||e("hasInstance")),isConcatSpreadable:i("",L&&L.isConcatSpreadable||e("isConcatSpreadable")),iterator:i("",L&&L.iterator||e("iterator")),match:i("",L&&L.match||e("match")),replace:i("",L&&L.replace||e("replace")),search:i("",L&&L.search||e("search")),species:i("",L&&L.species||e("species")),split:i("",L&&L.split||e("split")),toPrimitive:i("",L&&L.toPrimitive||e("toPrimitive")),toStringTag:i("",L&&L.toStringTag||e("toStringTag")),unscopables:i("",L&&L.unscopables||e("unscopables"))}),h(T.prototype,{constructor:i(e),toString:i("",function(){return this.__name__})}),h(e.prototype,{toString:i(function(){return"Symbol ("+_(this).__description__+")"}),valueOf:i(function(){return _(this)})}),s(e.prototype,e.toPrimitive,i("",function(){var r=_(this);return typeof r=="symbol"?r:r.toString()})),s(e.prototype,e.toStringTag,i("c","Symbol")),s(T.prototype,e.toStringTag,i("c",e.prototype[e.toStringTag])),s(T.prototype,e.toPrimitive,i("c",e.prototype[e.toPrimitive]))},function(Re,Ge,N){var L=N(19);Re.exports=function(e){if(!L(e))throw new TypeError(e+" is not a symbol");return e}}])})})(sv);var lv=sv.exports;function O1(re,se,Ae){const Re=re.slice();return Re[8]=se[Ae],Re}function P1(re,se,Ae){const Re=re.slice();return Re[11]=se[Ae],Re[13]=Ae,Re}function I1(re){let se,Ae,Re,Ge,N=re[3][0].toLocaleString()+"",L,e,T,w=re[3][re[3].length-1].toLocaleString()+"",i,_=no(re[0].slice(0,10)),v=[];for(let h=0;h<_.length;h+=1)v[h]=R1(O1(re,_,h));return{c(){se=br("div");for(let h=0;h<v.length;h+=1)v[h].c();Ae=qr(),Re=br("div"),Ge=br("div"),L=li(N),e=qr(),T=br("div"),i=li(w),Un(se,"class","freq-graph svelte-1mjf5ze"),Un(Ge,"class","time svelte-1mjf5ze"),Un(T,"class","time max-time svelte-1mjf5ze"),Un(Re,"class","time-range svelte-1mjf5ze")},m(h,s){Lr(h,se,s);for(let t=0;t<v.length;t+=1)v[t]&&v[t].m(se,null);Lr(h,Ae,s),Lr(h,Re,s),ar(Re,Ge),ar(Ge,L),ar(Re,e),ar(Re,T),ar(T,i)},p(h,s){if(s&15){_=no(h[0].slice(0,10));let t;for(t=0;t<_.length;t+=1){const a=O1(h,_,t);v[t]?v[t].p(a,s):(v[t]=R1(a),v[t].c(),v[t].m(se,null))}for(;t<v.length;t+=1)v[t].d(1);v.length=_.length}s&8&&N!==(N=h[3][0].toLocaleString()+"")&&Pi(L,N),s&8&&w!==(w=h[3][h[3].length-1].toLocaleString()+"")&&Pi(i,w)},d(h){h&&(Er(se),Er(Ae),Er(Re)),iu(v,h)}}}function D1(re){let se,Ae,Re;return{c(){se=br("div"),Un(se,"class","day svelte-1mjf5ze"),Un(se,"title",Ae=`${re[11].toLocaleString()}
${re[1][re[8].value][re[13]]} occurances`),Un(se,"style",Re=re[1][re[8].value][re[13]]==0?"background: #101010":`opacity: ${re[1][re[8].value][re[13]]/re[2][re[8].value]*100}%`)},m(Ge,N){Lr(Ge,se,N)},p(Ge,N){N&11&&Ae!==(Ae=`${Ge[11].toLocaleString()}
${Ge[1][Ge[8].value][Ge[13]]} occurances`)&&Un(se,"title",Ae),N&7&&Re!==(Re=Ge[1][Ge[8].value][Ge[13]]==0?"background: #101010":`opacity: ${Ge[1][Ge[8].value][Ge[13]]/Ge[2][Ge[8].value]*100}%`)&&Un(se,"style",Re)},d(Ge){Ge&&Er(se)}}}function R1(re){let se,Ae=re[8].value+"",Re,Ge,N,L,e=no(re[3]),T=[];for(let w=0;w<e.length;w+=1)T[w]=D1(P1(re,e,w));return{c(){se=br("div"),Re=li(Ae),Ge=qr(),N=br("div");for(let w=0;w<T.length;w+=1)T[w].c();L=qr(),Un(se,"class","value-name svelte-1mjf5ze"),Un(N,"class","days svelte-1mjf5ze")},m(w,i){Lr(w,se,i),ar(se,Re),Lr(w,Ge,i),Lr(w,N,i);for(let _=0;_<T.length;_+=1)T[_]&&T[_].m(N,null);ar(N,L)},p(w,i){if(i&1&&Ae!==(Ae=w[8].value+"")&&Pi(Re,Ae),i&15){e=no(w[3]);let _;for(_=0;_<e.length;_+=1){const v=P1(w,e,_);T[_]?T[_].p(v,i):(T[_]=D1(v),T[_].c(),T[_].m(N,L))}for(;_<T.length;_+=1)T[_].d(1);T.length=e.length}},d(w){w&&(Er(se),Er(Ge),Er(N)),iu(T,w)}}}function y3(re){let se,Ae=re[2]!=null&&I1(re);return{c(){Ae&&Ae.c(),se=As()},m(Re,Ge){Ae&&Ae.m(Re,Ge),Lr(Re,se,Ge)},p(Re,[Ge]){Re[2]!=null?Ae?Ae.p(Re,Ge):(Ae=I1(Re),Ae.c(),Ae.m(se.parentNode,se)):Ae&&(Ae.d(1),Ae=null)},i:xi,o:xi,d(Re){Re&&Er(se),Ae&&Ae.d(Re)}}}function x3(re,se,Ae,Re){if(Ae===null)return{};const Ge=Re.map(L=>new Date(L).getTime()),N={};for(let L=0;L<re.extraction.length;L++){const e=re.extraction[L].params;if(!(se in e))continue;const T=new Date(e[Ae].value).getTime(),w={index:-1,diff:Number.MAX_VALUE};for(let _=0;_<Ge.length;_++){const v=Math.abs(Ge[_]-T);if(v<w.diff)w.index=_,w.diff=v;else break}const i=e[se].value;N[i]||(N[i]=Array(Re.length).fill(0)),N[i][w.index]+=1}return N}function b3(re){const se=[];for(let[Ae,Re]of Object.entries(re)){const Ge=Re.reduce((N,L)=>N+L,0);se.push({value:Ae,total:Ge})}return se.sort((Ae,Re)=>Re.total-Ae.total),se}function _3(re){const se={};for(const Ae in re)se[Ae]=Math.max(...re[Ae]);return se}function w3(re,se){if(se===null)return[null,null];let Ae=new Date(-864e13),Re=new Date(864e13);for(let Ge=0;Ge<re.extraction.length;Ge++){const N=re.extraction[Ge].params;if(!(se in N))continue;const L=new Date(N[se].value);L>Ae&&(Ae=L),L<Re&&(Re=L)}return[Re,Ae]}function T3(re,se,Ae){const Re=lv.extendMoment(Br);let Ge,N,L,e;Mu(()=>{const[_,v]=w3(T,i);if(_===null||v===null)return;const h=Re.range(_,v);Ae(3,e=Array.from(h.by("minutes",{step:50}))),Ae(1,N=x3(T,w,i,e)),Ae(0,Ge=b3(N)),Ae(2,L=_3(N))});let{data:T,token:w,timestampToken:i}=se;return re.$$set=_=>{"data"in _&&Ae(4,T=_.data),"token"in _&&Ae(5,w=_.token),"timestampToken"in _&&Ae(6,i=_.timestampToken)},[Ge,N,L,e,T,w,i]}class k3 extends Fa{constructor(se){super(),za(this,se,T3,y3,Ra,{data:4,token:5,timestampToken:6})}}function z1(re){let se,Ae,Re,Ge=re[0].lq.toLocaleString()+"",N,L,e,T,w,i,_=re[0].median.toLocaleString()+"",v,h,s,t,a,n,r=re[0].uq.toLocaleString()+"",l,o,u,p,c,b,g=re[0].p95.toLocaleString()+"",d,m,x,y,k,f,S=re[0].p99.toLocaleString()+"",M,E,O;return{c(){se=br("div"),Ae=br("div"),Re=br("div"),N=li(Ge),L=qr(),e=br("div"),e.textContent="LQ",T=qr(),w=br("div"),i=br("div"),v=li(_),h=qr(),s=br("div"),s.textContent="Median",t=qr(),a=br("div"),n=br("div"),l=li(r),o=qr(),u=br("div"),u.textContent="UQ",p=qr(),c=br("div"),b=br("div"),d=li(g),m=qr(),x=br("div"),x.textContent="p95",y=qr(),k=br("div"),f=br("div"),M=li(S),E=qr(),O=br("div"),O.textContent="p99",Un(Re,"class","value svelte-wydon0"),Un(e,"class","label svelte-wydon0"),Un(Ae,"class","statistic svelte-wydon0"),Un(i,"class","value svelte-wydon0"),Un(s,"class","label svelte-wydon0"),Un(w,"class","statistic svelte-wydon0"),Un(n,"class","value svelte-wydon0"),Un(u,"class","label svelte-wydon0"),Un(a,"class","statistic svelte-wydon0"),Un(b,"class","value svelte-wydon0"),Un(x,"class","label svelte-wydon0"),Un(c,"class","statistic svelte-wydon0"),Un(f,"class","value svelte-wydon0"),Un(O,"class","label svelte-wydon0"),Un(k,"class","statistic svelte-wydon0"),Un(se,"class","container svelte-wydon0")},m(P,I){Lr(P,se,I),ar(se,Ae),ar(Ae,Re),ar(Re,N),ar(Ae,L),ar(Ae,e),ar(se,T),ar(se,w),ar(w,i),ar(i,v),ar(w,h),ar(w,s),ar(se,t),ar(se,a),ar(a,n),ar(n,l),ar(a,o),ar(a,u),ar(se,p),ar(se,c),ar(c,b),ar(b,d),ar(c,m),ar(c,x),ar(se,y),ar(se,k),ar(k,f),ar(f,M),ar(k,E),ar(k,O)},p(P,I){I&1&&Ge!==(Ge=P[0].lq.toLocaleString()+"")&&Pi(N,Ge),I&1&&_!==(_=P[0].median.toLocaleString()+"")&&Pi(v,_),I&1&&r!==(r=P[0].uq.toLocaleString()+"")&&Pi(l,r),I&1&&g!==(g=P[0].p95.toLocaleString()+"")&&Pi(d,g),I&1&&S!==(S=P[0].p99.toLocaleString()+"")&&Pi(M,S)},d(P){P&&Er(se)}}}function M3(re){let se,Ae=re[0]&&z1(re);return{c(){Ae&&Ae.c(),se=As()},m(Re,Ge){Ae&&Ae.m(Re,Ge),Lr(Re,se,Ge)},p(Re,[Ge]){Re[0]?Ae?Ae.p(Re,Ge):(Ae=z1(Re),Ae.c(),Ae.m(se.parentNode,se)):Ae&&(Ae.d(1),Ae=null)},i:xi,o:xi,d(Re){Re&&Er(se),Ae&&Ae.d(Re)}}}function A3(re){return re.sort((se,Ae)=>se-Ae)}function Eh(re,se){const Ae=A3(re),Re=(Ae.length-1)*se,Ge=Math.floor(Re),N=Re-Ge;return Ae[Ge+1]!==void 0?Ae[Ge]+N*(Ae[Ge+1]-Ae[Ge]):Ae[Ge]!==void 0?Ae[Ge]:0}function S3(re,se){const Ae=[];for(let Re=0;Re<re.extraction.length;Re++){if(!(se in re.extraction[Re].params))continue;const Ge=re.extraction[Re].params[se].value;typeof Ge=="number"&&Ae.push(Ge)}return Ae}function E3(re,se,Ae){let Re;Mu(()=>{const L=S3(Ge,N);L.sort(),L.length!=0&&Ae(0,Re={median:L[Math.floor(L.length/2)],lq:Eh(L,.25),uq:Eh(L,.75),p95:Eh(L,.95),p99:Eh(L,.99)})});let{data:Ge,token:N}=se;return re.$$set=L=>{"data"in L&&Ae(1,Ge=L.data),"token"in L&&Ae(2,N=L.token)},[Re,Ge,N]}class L3 extends Fa{constructor(se){super(),za(this,se,E3,M3,Ra,{data:1,token:2})}}var uv={exports:{}};(function(re,se){/*! For license information please see plotly.min.js.LICENSE.txt */(function(Ae,Re){re.exports=Re()})(self,function(){return function(){var Ae={98847:function(N,L,e){var T=e(71828),w={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in w){var _=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");T.addStyleRule(_,w[i])}},98222:function(N,L,e){N.exports=e(82887)},27206:function(N,L,e){N.exports=e(60822)},59893:function(N,L,e){N.exports=e(23381)},5224:function(N,L,e){N.exports=e(83832)},59509:function(N,L,e){N.exports=e(72201)},75557:function(N,L,e){N.exports=e(91815)},40338:function(N,L,e){N.exports=e(21462)},35080:function(N,L,e){N.exports=e(51319)},61396:function(N,L,e){N.exports=e(57516)},40549:function(N,L,e){N.exports=e(98128)},49866:function(N,L,e){N.exports=e(99442)},36089:function(N,L,e){N.exports=e(93740)},19548:function(N,L,e){N.exports=e(8729)},35831:function(N,L,e){N.exports=e(93814)},61039:function(N,L,e){N.exports=e(14382)},97040:function(N,L,e){N.exports=e(51759)},77986:function(N,L,e){N.exports=e(10421)},24296:function(N,L,e){N.exports=e(43102)},58872:function(N,L,e){N.exports=e(92165)},29626:function(N,L,e){N.exports=e(3325)},65591:function(N,L,e){N.exports=e(36071)},69738:function(N,L,e){N.exports=e(43905)},92650:function(N,L,e){N.exports=e(35902)},35630:function(N,L,e){N.exports=e(69816)},73434:function(N,L,e){N.exports=e(94507)},27909:function(N,L,e){var T=e(19548);T.register([e(27206),e(5224),e(58872),e(65591),e(69738),e(92650),e(49866),e(25743),e(6197),e(97040),e(85461),e(73434),e(54201),e(81299),e(47645),e(35630),e(77986),e(83043),e(93005),e(96881),e(4534),e(50581),e(40549),e(77900),e(47582),e(35080),e(21641),e(17280),e(5861),e(29626),e(10021),e(65317),e(96268),e(61396),e(35831),e(16122),e(46163),e(40344),e(40338),e(48131),e(36089),e(55334),e(75557),e(19440),e(99488),e(59893),e(97393),e(98222),e(61039),e(24296),e(66398),e(59509)]),N.exports=T},46163:function(N,L,e){N.exports=e(15154)},96881:function(N,L,e){N.exports=e(64943)},50581:function(N,L,e){N.exports=e(21164)},55334:function(N,L,e){N.exports=e(54186)},65317:function(N,L,e){N.exports=e(94873)},10021:function(N,L,e){N.exports=e(67618)},54201:function(N,L,e){N.exports=e(58810)},5861:function(N,L,e){N.exports=e(20593)},16122:function(N,L,e){N.exports=e(29396)},83043:function(N,L,e){N.exports=e(13551)},48131:function(N,L,e){N.exports=e(46858)},47582:function(N,L,e){N.exports=e(17988)},21641:function(N,L,e){N.exports=e(68868)},96268:function(N,L,e){N.exports=e(20467)},19440:function(N,L,e){N.exports=e(91271)},99488:function(N,L,e){N.exports=e(21461)},97393:function(N,L,e){N.exports=e(85956)},25743:function(N,L,e){N.exports=e(52979)},66398:function(N,L,e){N.exports=e(32275)},17280:function(N,L,e){N.exports=e(6419)},77900:function(N,L,e){N.exports=e(61510)},81299:function(N,L,e){N.exports=e(87619)},93005:function(N,L,e){N.exports=e(93601)},40344:function(N,L,e){N.exports=e(96595)},47645:function(N,L,e){N.exports=e(70954)},6197:function(N,L,e){N.exports=e(47462)},4534:function(N,L,e){N.exports=e(17659)},85461:function(N,L,e){N.exports=e(19990)},82884:function(N){N.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(N,L,e){var T=e(82884),w=e(41940),i=e(85555),_=e(44467).templatedArray;e(24695),N.exports=_("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:w({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:w({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(N,L,e){var T=e(71828),w=e(89298),i=e(92605).draw;function _(h){var s=h._fullLayout;T.filterVisible(s.annotations).forEach(function(t){var a=w.getFromId(h,t.xref),n=w.getFromId(h,t.yref),r=w.getRefType(t.xref),l=w.getRefType(t.yref);t._extremes={},r==="range"&&v(t,a),l==="range"&&v(t,n)})}function v(h,s){var t,a=s._id,n=a.charAt(0),r=h[n],l=h["a"+n],o=h[n+"ref"],u=h["a"+n+"ref"],p=h["_"+n+"padplus"],c=h["_"+n+"padminus"],b={x:1,y:-1}[n]*h[n+"shift"],g=3*h.arrowsize*h.arrowwidth||0,d=g+b,m=g-b,x=3*h.startarrowsize*h.arrowwidth||0,y=x+b,k=x-b;if(u===o){var f=w.findExtremes(s,[s.r2c(r)],{ppadplus:d,ppadminus:m}),S=w.findExtremes(s,[s.r2c(l)],{ppadplus:Math.max(p,y),ppadminus:Math.max(c,k)});t={min:[f.min[0],S.min[0]],max:[f.max[0],S.max[0]]}}else y=l?y+l:y,k=l?k-l:k,t=w.findExtremes(s,[s.r2c(r)],{ppadplus:Math.max(p,d,y),ppadminus:Math.max(c,m,k)});h._extremes[a]=t}N.exports=function(h){var s=h._fullLayout;if(T.filterVisible(s.annotations).length&&h._fullData.length)return T.syncOrAsync([i,_],h)}},44317:function(N,L,e){var T=e(71828),w=e(73972),i=e(44467).arrayEditor;function _(h,s){var t,a,n,r,l,o,u,p=h._fullLayout.annotations,c=[],b=[],g=[],d=(s||[]).length;for(t=0;t<p.length;t++)if(r=(n=p[t]).clicktoshow){for(a=0;a<d;a++)if(o=(l=s[a]).xaxis,u=l.yaxis,o._id===n.xref&&u._id===n.yref&&o.d2r(l.x)===v(n._xclick,o)&&u.d2r(l.y)===v(n._yclick,u)){(n.visible?r==="onout"?b:g:c).push(t);break}a===d&&n.visible&&r==="onout"&&b.push(t)}return{on:c,off:b,explicitOff:g}}function v(h,s){return s.type==="log"?s.l2r(h):s.d2r(h)}N.exports={hasClickToShow:function(h,s){var t=_(h,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(h,s){var t,a,n=_(h,s),r=n.on,l=n.off.concat(n.explicitOff),o={},u=h._fullLayout.annotations;if(r.length||l.length){for(t=0;t<r.length;t++)(a=i(h.layout,"annotations",u[r[t]])).modifyItem("visible",!0),T.extendFlat(o,a.getUpdateObj());for(t=0;t<l.length;t++)(a=i(h.layout,"annotations",u[l[t]])).modifyItem("visible",!1),T.extendFlat(o,a.getUpdateObj());return w.call("update",h,{},o)}}}},25625:function(N,L,e){var T=e(71828),w=e(7901);N.exports=function(i,_,v,h){h("opacity");var s=h("bgcolor"),t=h("bordercolor"),a=w.opacity(t);h("borderpad");var n=h("borderwidth"),r=h("showarrow");if(h("text",r?" ":v._dfltTitle.annotation),h("textangle"),T.coerceFont(h,"font",v.font),h("width"),h("align"),h("height")&&h("valign"),r){var l,o,u=h("arrowside");u.indexOf("end")!==-1&&(l=h("arrowhead"),o=h("arrowsize")),u.indexOf("start")!==-1&&(h("startarrowhead",l),h("startarrowsize",o)),h("arrowcolor",a?_.bordercolor:w.defaultLine),h("arrowwidth",2*(a&&n||1)),h("standoff"),h("startstandoff")}var p=h("hovertext"),c=v.hoverlabel||{};if(p){var b=h("hoverlabel.bgcolor",c.bgcolor||(w.opacity(s)?w.rgb(s):w.defaultLine)),g=h("hoverlabel.bordercolor",c.bordercolor||w.contrast(b));T.coerceFont(h,"hoverlabel.font",{family:c.font.family,size:c.font.size,color:c.font.color||g})}h("captureevents",!!p)}},94128:function(N,L,e){var T=e(92770),w=e(58163);N.exports=function(i,_,v,h){_=_||{};var s=v==="log"&&_.type==="linear",t=v==="linear"&&_.type==="log";if(s||t)for(var a,n,r=i._fullLayout.annotations,l=_._id.charAt(0),o=0;o<r.length;o++)a=r[o],n="annotations["+o+"].",a[l+"ref"]===_._id&&u(l),a["a"+l+"ref"]===_._id&&u("a"+l);function u(p){var c=a[p],b=null;b=s?w(c,_.range):Math.pow(10,c),T(b)||(b=null),h(n+p,b)}}},84046:function(N,L,e){var T=e(71828),w=e(89298),i=e(85501),_=e(25625),v=e(50215);function h(s,t,a){function n(S,M){return T.coerce(s,t,v,S,M)}var r=n("visible"),l=n("clicktoshow");if(r||l){_(s,t,a,n);for(var o=t.showarrow,u=["x","y"],p=[-10,-30],c={_fullLayout:a},b=0;b<2;b++){var g=u[b],d=w.coerceRef(s,t,c,g,"","paper");if(d!=="paper"&&w.getFromId(c,d)._annIndices.push(t._index),w.coercePosition(t,c,n,d,g,.5),o){var m="a"+g,x=w.coerceRef(s,t,c,m,"pixel",["pixel","paper"]);x!=="pixel"&&x!==d&&(x=t[m]="pixel");var y=x==="pixel"?p[b]:.4;w.coercePosition(t,c,n,x,m,y)}n(g+"anchor"),n(g+"shift")}if(T.noneOrAll(s,t,["x","y"]),o&&T.noneOrAll(s,t,["ax","ay"]),l){var k=n("xclick"),f=n("yclick");t._xclick=k===void 0?t.x:w.cleanPosition(k,c,t.xref),t._yclick=f===void 0?t.y:w.cleanPosition(f,c,t.yref)}}}N.exports=function(s,t){i(s,t,{name:"annotations",handleItemDefaults:h})}},92605:function(N,L,e){var T=e(39898),w=e(73972),i=e(74875),_=e(71828),v=_.strTranslate,h=e(89298),s=e(7901),t=e(91424),a=e(30211),n=e(63893),r=e(6964),l=e(28569),o=e(44467).arrayEditor,u=e(13011);function p(g,d){var m=g._fullLayout.annotations[d]||{},x=h.getFromId(g,m.xref),y=h.getFromId(g,m.yref);x&&x.setScale(),y&&y.setScale(),b(g,m,d,!1,x,y)}function c(g,d,m,x,y){var k=y[m],f=y[m+"ref"],S=m.indexOf("y")!==-1,M=h.getRefType(f)==="domain",E=S?x.h:x.w;return g?M?k+(S?-d:d)/g._length:g.p2r(g.r2p(k)+d):k+(S?-d:d)/E}function b(g,d,m,x,y,k){var f,S,M=g._fullLayout,E=g._fullLayout._size,O=g._context.edits;x?(f="annotation-"+x,S=x+".annotations"):(f="annotation",S="annotations");var P=o(g.layout,S,d),I=P.modifyBase,z=P.modifyItem,U=P.getUpdateObj;M._infolayer.selectAll("."+f+'[data-index="'+m+'"]').remove();var R="clip"+M._uid+"_ann"+m;if(d._input&&d.visible!==!1){var j={x:{},y:{}},Z=+d.textangle||0,F=M._infolayer.append("g").classed(f,!0).attr("data-index",String(m)).style("opacity",d.opacity),V=F.append("g").classed("annotation-text-g",!0),H=O[d.showarrow?"annotationTail":"annotationPosition"],te=d.captureevents||O.annotationText||H,$=V.append("g").style("pointer-events",te?"all":null).call(r,"pointer").on("click",function(){g._dragging=!1,g.emit("plotly_clickannotation",ve(T.event))});d.hovertext&&$.on("mouseover",function(){var ye=d.hoverlabel,Ce=ye.font,ke=this.getBoundingClientRect(),Te=g.getBoundingClientRect();a.loneHover({x0:ke.left-Te.left,x1:ke.right-Te.left,y:(ke.top+ke.bottom)/2-Te.top,text:d.hovertext,color:ye.bgcolor,borderColor:ye.bordercolor,fontFamily:Ce.family,fontSize:Ce.size,fontColor:Ce.color},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:g})}).on("mouseout",function(){a.loneUnhover(M._hoverlayer.node())});var J=d.borderwidth,X=d.borderpad,K=J+X,ee=$.append("rect").attr("class","bg").style("stroke-width",J+"px").call(s.stroke,d.bordercolor).call(s.fill,d.bgcolor),ie=d.width||d.height,ae=M._topclips.selectAll("#"+R).data(ie?[0]:[]);ae.enter().append("clipPath").classed("annclip",!0).attr("id",R).append("rect"),ae.exit().remove();var oe=d.font,fe=M._meta?_.templateString(d.text,M._meta):d.text,ge=$.append("text").classed("annotation-text",!0).text(fe);O.annotationText?ge.call(n.makeEditable,{delegate:$,gd:g}).call(xe).on("edit",function(ye){d.text=ye,this.call(xe),z("text",ye),y&&y.autorange&&I(y._name+".autorange",!0),k&&k.autorange&&I(k._name+".autorange",!0),w.call("_guiRelayout",g,U())}):ge.call(xe)}else T.selectAll("#"+R).remove();function ve(ye){var Ce={index:m,annotation:d._input,fullAnnotation:d,event:ye};return x&&(Ce.subplotId=x),Ce}function xe(ye){return ye.call(t.font,oe).attr({"text-anchor":{left:"start",right:"end"}[d.align]||"middle"}),n.convertToTspans(ye,g,_e),ye}function _e(){var ye=ge.selectAll("a");ye.size()===1&&ye.text()===ge.text()&&$.insert("a",":first-child").attr({"xlink:xlink:href":ye.attr("xlink:href"),"xlink:xlink:show":ye.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ee.node());var Ce=$.select(".annotation-text-math-group"),ke=!Ce.empty(),Te=t.bBox((ke?Ce:ge).node()),le=Te.width,ue=Te.height,de=d.width||le,Le=d.height||ue,we=Math.round(de+2*K),Ee=Math.round(Le+2*K);function Oe(xt,dt){return dt==="auto"&&(dt=xt<.3333333333333333?"left":xt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[dt]}for(var Fe=!1,pe=["x","y"],be=0;be<pe.length;be++){var Me,De,Ne,Be,Ye,We=pe[be],et=d[We+"ref"]||We,ft=d["a"+We+"ref"],ht={x:y,y:k}[We],mt=(Z+(We==="x"?0:-90))*Math.PI/180,Mt=we*Math.cos(mt),_t=Ee*Math.sin(mt),it=Math.abs(Mt)+Math.abs(_t),st=d[We+"anchor"],St=d[We+"shift"]*(We==="x"?1:-1),zt=j[We],Ft=h.getRefType(et);if(ht&&Ft!=="domain"){var Pt=ht.r2fraction(d[We]);(Pt<0||Pt>1)&&(ft===et?((Pt=ht.r2fraction(d["a"+We]))<0||Pt>1)&&(Fe=!0):Fe=!0),Me=ht._offset+ht.r2p(d[We]),Be=.5}else{var Xe=Ft==="domain";We==="x"?(Ne=d[We],Me=Xe?ht._offset+ht._length*Ne:Me=E.l+E.w*Ne):(Ne=1-d[We],Me=Xe?ht._offset+ht._length*Ne:Me=E.t+E.h*Ne),Be=d.showarrow?.5:Ne}if(d.showarrow){zt.head=Me;var Ke=d["a"+We];if(Ye=Mt*Oe(.5,d.xanchor)-_t*Oe(.5,d.yanchor),ft===et){var He=h.getRefType(ft);He==="domain"?(We==="y"&&(Ke=1-Ke),zt.tail=ht._offset+ht._length*Ke):He==="paper"?We==="y"?(Ke=1-Ke,zt.tail=E.t+E.h*Ke):zt.tail=E.l+E.w*Ke:zt.tail=ht._offset+ht.r2p(Ke),De=Ye}else zt.tail=Me+Ke,De=Ye+Ke;zt.text=zt.tail+Ye;var Je=M[We==="x"?"width":"height"];if(et==="paper"&&(zt.head=_.constrain(zt.head,1,Je-1)),ft==="pixel"){var lt=-Math.max(zt.tail-3,zt.text),ot=Math.min(zt.tail+3,zt.text)-Je;lt>0?(zt.tail+=lt,zt.text+=lt):ot>0&&(zt.tail-=ot,zt.text-=ot)}zt.tail+=St,zt.head+=St}else De=Ye=it*Oe(Be,st),zt.text=Me+Ye;zt.text+=St,Ye+=St,De+=St,d["_"+We+"padplus"]=it/2+De,d["_"+We+"padminus"]=it/2-De,d["_"+We+"size"]=it,d["_"+We+"shift"]=Ye}if(Fe)$.remove();else{var je=0,Ue=0;if(d.align!=="left"&&(je=(de-le)*(d.align==="center"?.5:1)),d.valign!=="top"&&(Ue=(Le-ue)*(d.valign==="middle"?.5:1)),ke)Ce.select("svg").attr({x:K+je-1,y:K+Ue}).call(t.setClipUrl,ie?R:null,g);else{var at=K+Ue-Te.top,$e=K+je-Te.left;ge.call(n.positionText,$e,at).call(t.setClipUrl,ie?R:null,g)}ae.select("rect").call(t.setRect,K,K,de,Le),ee.call(t.setRect,J/2,J/2,we-J,Ee-J),$.call(t.setTranslate,Math.round(j.x.text-we/2),Math.round(j.y.text-Ee/2)),V.attr({transform:"rotate("+Z+","+j.x.text+","+j.y.text+")"});var gt,yt=function(xt,dt){F.selectAll(".annotation-arrow-g").remove();var Lt=j.x.head,Tt=j.y.head,bt=j.x.tail+xt,Ct=j.y.tail+dt,Dt=j.x.text+xt,Bt=j.y.text+dt,Xt=_.rotationXYMatrix(Z,Dt,Bt),an=_.apply2DTransform(Xt),Wt=_.apply2DTransform2(Xt),Vt=+ee.attr("width"),on=+ee.attr("height"),Sn=Dt-.5*Vt,Ln=Sn+Vt,fn=Bt-.5*on,Zt=fn+on,ln=[[Sn,fn,Sn,Zt],[Sn,Zt,Ln,Zt],[Ln,Zt,Ln,fn],[Ln,fn,Sn,fn]].map(Wt);if(!ln.reduce(function(ir,Jn){return ir^!!_.segmentsIntersect(Lt,Tt,Lt+1e6,Tt+1e6,Jn[0],Jn[1],Jn[2],Jn[3])},!1)){ln.forEach(function(ir){var Jn=_.segmentsIntersect(bt,Ct,Lt,Tt,ir[0],ir[1],ir[2],ir[3]);Jn&&(bt=Jn.x,Ct=Jn.y)});var nn=d.arrowwidth,cn=d.arrowcolor,kn=d.arrowside,An=F.append("g").style({opacity:s.opacity(cn)}).classed("annotation-arrow-g",!0),wn=An.append("path").attr("d","M"+bt+","+Ct+"L"+Lt+","+Tt).style("stroke-width",nn+"px").call(s.stroke,s.rgb(cn));if(u(wn,kn,d),O.annotationPosition&&wn.node().parentNode&&!x){var Cn=Lt,_n=Tt;if(d.standoff){var zn=Math.sqrt(Math.pow(Lt-bt,2)+Math.pow(Tt-Ct,2));Cn+=d.standoff*(bt-Lt)/zn,_n+=d.standoff*(Ct-Tt)/zn}var qn,sr,pr=An.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(bt-Cn)+","+(Ct-_n),transform:v(Cn,_n)}).style("stroke-width",nn+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");l.init({element:pr.node(),gd:g,prepFn:function(){var ir=t.getTranslate($);qn=ir.x,sr=ir.y,y&&y.autorange&&I(y._name+".autorange",!0),k&&k.autorange&&I(k._name+".autorange",!0)},moveFn:function(ir,Jn){var mr=an(qn,sr),qt=mr[0]+ir,tn=mr[1]+Jn;$.call(t.setTranslate,qt,tn),z("x",c(y,ir,"x",E,d)),z("y",c(k,Jn,"y",E,d)),d.axref===d.xref&&z("ax",c(y,ir,"ax",E,d)),d.ayref===d.yref&&z("ay",c(k,Jn,"ay",E,d)),An.attr("transform",v(ir,Jn)),V.attr({transform:"rotate("+Z+","+qt+","+tn+")"})},doneFn:function(){w.call("_guiRelayout",g,U());var ir=document.querySelector(".js-notes-box-panel");ir&&ir.redraw(ir.selectedObj)}})}}};d.showarrow&&yt(0,0),H&&l.init({element:$.node(),gd:g,prepFn:function(){gt=V.attr("transform")},moveFn:function(xt,dt){var Lt="pointer";if(d.showarrow)d.axref===d.xref?z("ax",c(y,xt,"ax",E,d)):z("ax",d.ax+xt),d.ayref===d.yref?z("ay",c(k,dt,"ay",E.w,d)):z("ay",d.ay+dt),yt(xt,dt);else{if(x)return;var Tt,bt;if(y)Tt=c(y,xt,"x",E,d);else{var Ct=d._xsize/E.w,Dt=d.x+(d._xshift-d.xshift)/E.w-Ct/2;Tt=l.align(Dt+xt/E.w,Ct,0,1,d.xanchor)}if(k)bt=c(k,dt,"y",E,d);else{var Bt=d._ysize/E.h,Xt=d.y-(d._yshift+d.yshift)/E.h-Bt/2;bt=l.align(Xt-dt/E.h,Bt,0,1,d.yanchor)}z("x",Tt),z("y",bt),y&&k||(Lt=l.getCursor(y?.5:Tt,k?.5:bt,d.xanchor,d.yanchor))}V.attr({transform:v(xt,dt)+gt}),r($,Lt)},clickFn:function(xt,dt){d.captureevents&&g.emit("plotly_clickannotation",ve(dt))},doneFn:function(){r($),w.call("_guiRelayout",g,U());var xt=document.querySelector(".js-notes-box-panel");xt&&xt.redraw(xt.selectedObj)}})}}}N.exports={draw:function(g){var d=g._fullLayout;d._infolayer.selectAll(".annotation").remove();for(var m=0;m<d.annotations.length;m++)d.annotations[m].visible&&p(g,m);return i.previousPromises(g)},drawOne:p,drawRaw:b}},13011:function(N,L,e){var T=e(39898),w=e(7901),i=e(82884),_=e(71828),v=_.strScale,h=_.strRotate,s=_.strTranslate;N.exports=function(t,a,n){var r,l,o,u,p=t.node(),c=i[n.arrowhead||0],b=i[n.startarrowhead||0],g=(n.arrowwidth||1)*(n.arrowsize||1),d=(n.arrowwidth||1)*(n.startarrowsize||1),m=a.indexOf("start")>=0,x=a.indexOf("end")>=0,y=c.backoff*g+n.standoff,k=b.backoff*d+n.startstandoff;if(p.nodeName==="line"){r={x:+t.attr("x1"),y:+t.attr("y1")},l={x:+t.attr("x2"),y:+t.attr("y2")};var f=r.x-l.x,S=r.y-l.y;if(u=(o=Math.atan2(S,f))+Math.PI,y&&k&&y+k>Math.sqrt(f*f+S*S))return void F();if(y){if(y*y>f*f+S*S)return void F();var M=y*Math.cos(o),E=y*Math.sin(o);l.x+=M,l.y+=E,t.attr({x2:l.x,y2:l.y})}if(k){if(k*k>f*f+S*S)return void F();var O=k*Math.cos(o),P=k*Math.sin(o);r.x-=O,r.y-=P,t.attr({x1:r.x,y1:r.y})}}else if(p.nodeName==="path"){var I=p.getTotalLength(),z="";if(I<y+k)return void F();var U=p.getPointAtLength(0),R=p.getPointAtLength(.1);o=Math.atan2(U.y-R.y,U.x-R.x),r=p.getPointAtLength(Math.min(k,I)),z="0px,"+k+"px,";var j=p.getPointAtLength(I),Z=p.getPointAtLength(I-.1);u=Math.atan2(j.y-Z.y,j.x-Z.x),l=p.getPointAtLength(Math.max(0,I-y)),z+=I-(z?k+y:y)+"px,"+I+"px",t.style("stroke-dasharray",z)}function F(){t.style("stroke-dasharray","0px,100px")}function V(H,te,$,J){H.path&&(H.noRotate&&($=0),T.select(p.parentNode).append("path").attr({class:t.attr("class"),d:H.path,transform:s(te.x,te.y)+h(180*$/Math.PI)+v(J)}).style({fill:w.rgb(n.arrowcolor),"stroke-width":0}))}m&&V(b,r,o,d),x&&V(c,l,u,g)}},32745:function(N,L,e){var T=e(92605),w=e(44317);N.exports={moduleType:"component",name:"annotations",layoutAttributes:e(50215),supplyLayoutDefaults:e(84046),includeBasePlot:e(76325)("annotations"),calcAutorange:e(3749),draw:T.draw,drawOne:T.drawOne,drawRaw:T.drawRaw,hasClickToShow:w.hasClickToShow,onClick:w.onClick,convertCoords:e(94128)}},26997:function(N,L,e){var T=e(50215),w=e(30962).overrideAll,i=e(44467).templatedArray;N.exports=w(i("annotation",{visible:T.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:T.xanchor,xshift:T.xshift,yanchor:T.yanchor,yshift:T.yshift,text:T.text,textangle:T.textangle,font:T.font,width:T.width,height:T.height,opacity:T.opacity,align:T.align,valign:T.valign,bgcolor:T.bgcolor,bordercolor:T.bordercolor,borderpad:T.borderpad,borderwidth:T.borderwidth,showarrow:T.showarrow,arrowcolor:T.arrowcolor,arrowhead:T.arrowhead,startarrowhead:T.startarrowhead,arrowside:T.arrowside,arrowsize:T.arrowsize,startarrowsize:T.startarrowsize,arrowwidth:T.arrowwidth,standoff:T.standoff,startstandoff:T.startstandoff,hovertext:T.hovertext,hoverlabel:T.hoverlabel,captureevents:T.captureevents}),"calc","from-root")},5485:function(N,L,e){var T=e(71828),w=e(89298);function i(_,v){var h=v.fullSceneLayout.domain,s=v.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};_._xa={},T.extendFlat(_._xa,t),w.setConvert(_._xa),_._xa._offset=s.l+h.x[0]*s.w,_._xa.l2p=function(){return .5*(1+_._pdata[0]/_._pdata[3])*s.w*(h.x[1]-h.x[0])},_._ya={},T.extendFlat(_._ya,t),w.setConvert(_._ya),_._ya._offset=s.t+(1-h.y[1])*s.h,_._ya.l2p=function(){return .5*(1-_._pdata[1]/_._pdata[3])*s.h*(h.y[1]-h.y[0])}}N.exports=function(_){for(var v=_.fullSceneLayout.annotations,h=0;h<v.length;h++)i(v[h],_);_.fullLayout._infolayer.selectAll(".annotation-"+_.id).remove()}},20226:function(N,L,e){var T=e(71828),w=e(89298),i=e(85501),_=e(25625),v=e(26997);function h(s,t,a,n){function r(o,u){return T.coerce(s,t,v,o,u)}function l(o){var u=o+"axis",p={_fullLayout:{}};return p._fullLayout[u]=a[u],w.coercePosition(t,p,r,o,o,.5)}r("visible")&&(_(s,t,n.fullLayout,r),l("x"),l("y"),l("z"),T.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",r("xanchor"),r("yanchor"),r("xshift"),r("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",r("ax",-10),r("ay",-30),T.noneOrAll(s,t,["ax","ay"])))}N.exports=function(s,t,a){i(s,t,{name:"annotations",handleItemDefaults:h,fullLayout:a.fullLayout})}},82188:function(N,L,e){var T=e(92605).drawRaw,w=e(63538),i=["x","y","z"];N.exports=function(_){for(var v=_.fullSceneLayout,h=_.dataScale,s=v.annotations,t=0;t<s.length;t++){for(var a=s[t],n=!1,r=0;r<3;r++){var l=i[r],o=a[l],u=v[l+"axis"].r2fraction(o);if(u<0||u>1){n=!0;break}}n?_.fullLayout._infolayer.select(".annotation-"+_.id+'[data-index="'+t+'"]').remove():(a._pdata=w(_.glplot.cameraParams,[v.xaxis.r2l(a.x)*h[0],v.yaxis.r2l(a.y)*h[1],v.zaxis.r2l(a.z)*h[2]]),T(_.graphDiv,a,t,_.id,a._xa,a._ya))}}},2468:function(N,L,e){var T=e(73972),w=e(71828);N.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(26997)}}},layoutAttributes:e(26997),handleDefaults:e(20226),includeBasePlot:function(i,_){var v=T.subplotsRegistry.gl3d;if(v)for(var h=v.attrRegex,s=Object.keys(i),t=0;t<s.length;t++){var a=s[t];h.test(a)&&(i[a].annotations||[]).length&&(w.pushUnique(_._basePlotModules,v),w.pushUnique(_._subplots.gl3d,a))}},convert:e(5485),draw:e(82188)}},7561:function(N,L,e){N.exports=e(63489),e(94338),e(3961),e(38751),e(86825),e(37715),e(99384),e(43805),e(88874),e(83290),e(29108),e(55422),e(94320),e(31320),e(51367),e(21457)},72201:function(N,L,e){var T=e(7561),w=e(71828),i=e(50606),_=i.EPOCHJD,v=i.ONEDAY,h={valType:"enumerated",values:w.sortObjectKeys(T.calendars),editType:"calc",dflt:"gregorian"},s=function(g,d,m,x){var y={};return y[m]=h,w.coerce(g,d,y,m,x)},t="##",a={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function r(g){var d=n[g];return d||(n[g]=T.instance(g))}function l(g){return w.extendFlat({},h,{description:g})}function o(g){return"Sets the calendar system to use with `"+g+"` date data."}var u={xcalendar:l(o("x"))},p=w.extendFlat({},u,{ycalendar:l(o("y"))}),c=w.extendFlat({},p,{zcalendar:l(o("z"))}),b=l(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));N.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:c,surface:c,mesh3d:c,scattergl:p,ohlc:u,candlestick:u},layout:{calendar:l(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:h,handleDefaults:s,handleTraceDefaults:function(g,d,m,x){for(var y=0;y<m.length;y++)s(g,d,m[y]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:r,worldCalFmt:function(g,d,m){for(var x,y,k,f,S,M=Math.floor((d+.05)/v)+_,E=r(m).fromJD(M),O=0;(O=g.indexOf("%",O))!==-1;)(x=g.charAt(O+1))==="0"||x==="-"||x==="_"?(k=3,y=g.charAt(O+2),x==="_"&&(x="-")):(y=x,x="0",k=2),(f=a[y])?(S=f===t?t:E.formatDate(f[x]),g=g.substr(0,O)+S+g.substr(O+k),O+=S.length):O+=k;return g}}},22399:function(N,L){L.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],L.defaultLine="#444",L.lightLine="#eee",L.background="#fff",L.borderLine="#BEC8D9",L.lightFraction=90.9090909090909},7901:function(N,L,e){var T=e(84267),w=e(92770),i=e(73627).isTypedArray,_=N.exports={},v=e(22399);_.defaults=v.defaults;var h=_.defaultLine=v.defaultLine;_.lightLine=v.lightLine;var s=_.background=v.background;function t(a){if(w(a)||typeof a!="string")return a;var n=a.trim();if(n.substr(0,3)!=="rgb")return a;var r=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return a;var l=r[1].trim().split(/\s*[\s,]\s*/),o=n.charAt(3)==="a"&&l.length===4;if(!o&&l.length!==3)return a;for(var u=0;u<l.length;u++){if(!l[u].length||(l[u]=Number(l[u]),!(l[u]>=0)))return a;if(u===3)l[u]>1&&(l[u]=1);else if(l[u]>=1)return a}var p=Math.round(255*l[0])+", "+Math.round(255*l[1])+", "+Math.round(255*l[2]);return o?"rgba("+p+", "+l[3]+")":"rgb("+p+")"}_.tinyRGB=function(a){var n=a.toRgb();return"rgb("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+")"},_.rgb=function(a){return _.tinyRGB(T(a))},_.opacity=function(a){return a?T(a).getAlpha():0},_.addOpacity=function(a,n){var r=T(a).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+n+")"},_.combine=function(a,n){var r=T(a).toRgb();if(r.a===1)return T(a).toRgbString();var l=T(n||s).toRgb(),o=l.a===1?l:{r:255*(1-l.a)+l.r*l.a,g:255*(1-l.a)+l.g*l.a,b:255*(1-l.a)+l.b*l.a},u={r:o.r*(1-r.a)+r.r*r.a,g:o.g*(1-r.a)+r.g*r.a,b:o.b*(1-r.a)+r.b*r.a};return T(u).toRgbString()},_.contrast=function(a,n,r){var l=T(a);return l.getAlpha()!==1&&(l=T(_.combine(a,s))),(l.isDark()?n?l.lighten(n):s:r?l.darken(r):h).toString()},_.stroke=function(a,n){var r=T(n);a.style({stroke:_.tinyRGB(r),"stroke-opacity":r.getAlpha()})},_.fill=function(a,n){var r=T(n);a.style({fill:_.tinyRGB(r),"fill-opacity":r.getAlpha()})},_.clean=function(a){if(a&&typeof a=="object"){var n,r,l,o,u=Object.keys(a);for(n=0;n<u.length;n++)if(o=a[l=u[n]],l.substr(l.length-5)==="color")if(Array.isArray(o))for(r=0;r<o.length;r++)o[r]=t(o[r]);else a[l]=t(o);else if(l.substr(l.length-10)==="colorscale"&&Array.isArray(o))for(r=0;r<o.length;r++)Array.isArray(o[r])&&(o[r][1]=t(o[r][1]));else if(Array.isArray(o)){var p=o[0];if(!Array.isArray(p)&&p&&typeof p=="object")for(r=0;r<o.length;r++)_.clean(o[r])}else o&&typeof o=="object"&&!i(o)&&_.clean(o)}}},63583:function(N,L,e){var T=e(13838),w=e(41940),i=e(1426).extendFlat,_=e(30962).overrideAll;N.exports=_({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:T.linecolor,outlinewidth:T.linewidth,bordercolor:T.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:T.minor.tickmode,nticks:T.nticks,tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:i({},T.ticks,{dflt:""}),ticklabeloverflow:i({},T.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,ticklabelstep:T.ticklabelstep,showticklabels:T.showticklabels,labelalias:T.labelalias,tickfont:w({}),tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,tickprefix:T.tickprefix,showtickprefix:T.showtickprefix,ticksuffix:T.ticksuffix,showticksuffix:T.showticksuffix,separatethousands:T.separatethousands,exponentformat:T.exponentformat,minexponent:T.minexponent,showexponent:T.showexponent,title:{text:{valType:"string"},font:w({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:w({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(N){N.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(N,L,e){var T=e(71828),w=e(44467),i=e(26218),_=e(38701),v=e(96115),h=e(89426),s=e(63583);N.exports=function(t,a,n){var r=w.newContainer(a,"colorbar"),l=t.colorbar||{};function o(z,U){return T.coerce(l,r,s,z,U)}var u=n.margin||{t:0,b:0,l:0,r:0},p=n.width-u.l-u.r,c=n.height-u.t-u.b,b=o("orientation")==="v",g=o("thicknessmode");o("thickness",g==="fraction"?30/(b?p:c):30);var d=o("lenmode");o("len",d==="fraction"?1:b?c:p);var m,x,y,k=o("yref")==="paper",f=o("xref")==="paper",S="left";b?(y="middle",S=f?"left":"right",m=f?1.02:1,x=.5):(y=k?"bottom":"top",S="center",m=.5,x=k?1.02:1),T.coerce(l,r,{x:{valType:"number",min:f?-2:0,max:f?3:1,dflt:m}},"x"),T.coerce(l,r,{y:{valType:"number",min:k?-2:0,max:k?3:1,dflt:x}},"y"),o("xanchor",S),o("xpad"),o("yanchor",y),o("ypad"),T.noneOrAll(l,r,["x","y"]),o("outlinecolor"),o("outlinewidth"),o("bordercolor"),o("borderwidth"),o("bgcolor");var M=T.coerce(l,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:b?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");o("ticklabeloverflow",M.indexOf("inside")!==-1?"hide past domain":"hide past div"),i(l,r,o,"linear");var E=n.font,O={outerTicks:!1,font:E};M.indexOf("inside")!==-1&&(O.bgColor="black"),h(l,r,o,"linear",O),v(l,r,o,"linear",O),_(l,r,o,"linear",O),o("title.text",n._dfltTitle.colorbar);var P=r.showticklabels?r.tickfont:E,I=T.extendFlat({},P,{color:E.color,size:T.bigFont(P.size)});T.coerceFont(o,"title.font",I),o("title.side",b?"top":"right")}},98981:function(N,L,e){var T=e(39898),w=e(84267),i=e(74875),_=e(73972),v=e(89298),h=e(28569),s=e(71828),t=s.strTranslate,a=e(1426).extendFlat,n=e(6964),r=e(91424),l=e(7901),o=e(92998),u=e(63893),p=e(52075).flipScale,c=e(71453),b=e(52830),g=e(13838),d=e(18783),m=d.LINE_SPACING,x=d.FROM_TL,y=d.FROM_BR,k=e(30939).cn;N.exports={draw:function(f){var S=f._fullLayout._infolayer.selectAll("g."+k.colorbar).data(function(M){var E,O,P,I,z=M._fullLayout,U=M.calcdata,R=[];function j(ie){return a(ie,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Z(){typeof I.calc=="function"?I.calc(M,P,E):(E._fillgradient=O.reversescale?p(O.colorscale):O.colorscale,E._zrange=[O[I.min],O[I.max]])}for(var F=0;F<U.length;F++){var V=U[F];if((P=V[0].trace)._module){var H=P._module.colorbar;if(P.visible===!0&&H)for(var te=Array.isArray(H),$=te?H:[H],J=0;J<$.length;J++){var X=(I=$[J]).container;(O=X?P[X]:P)&&O.showscale&&((E=j(O.colorbar))._id="cb"+P.uid+(te&&X?"-"+X:""),E._traceIndex=P.index,E._propPrefix=(X?X+".":"")+"colorbar.",E._meta=P._meta,Z(),R.push(E))}}}for(var K in z._colorAxes)if((O=z[K]).showscale){var ee=z._colorAxes[K];(E=j(O.colorbar))._id="cb"+K,E._propPrefix=K+".colorbar.",E._meta=z._meta,I={min:"cmin",max:"cmax"},ee[0]!=="heatmap"&&(P=ee[1],I.calc=P._module.colorbar.calc),Z(),R.push(E)}return R}(f),function(M){return M._id});S.enter().append("g").attr("class",function(M){return M._id}).classed(k.colorbar,!0),S.each(function(M){var E=T.select(this);s.ensureSingle(E,"rect",k.cbbg),s.ensureSingle(E,"g",k.cbfills),s.ensureSingle(E,"g",k.cblines),s.ensureSingle(E,"g",k.cbaxis,function(P){P.classed(k.crisp,!0)}),s.ensureSingle(E,"g",k.cbtitleunshift,function(P){P.append("g").classed(k.cbtitle,!0)}),s.ensureSingle(E,"rect",k.cboutline);var O=function(P,I,z){var U=I.orientation==="v",R=I.len,j=I.lenmode,Z=I.thickness,F=I.thicknessmode,V=I.outlinewidth,H=I.borderwidth,te=I.bgcolor,$=I.xanchor,J=I.yanchor,X=I.xpad,K=I.ypad,ee=I.x,ie=U?I.y:1-I.y,ae=I.yref==="paper",oe=I.xref==="paper",fe=z._fullLayout,ge=fe._size,ve=I._fillcolor,xe=I._line,_e=I.title,ye=_e.side,Ce=I._zrange||T.extent((typeof ve=="function"?ve:xe.color).domain()),ke=typeof xe.color=="function"?xe.color:function(){return xe.color},Te=typeof ve=="function"?ve:function(){return ve},le=I._levels,ue=function(He,Je,lt){var ot,je,Ue=Je._levels,at=[],$e=[],gt=Ue.end+Ue.size/100,yt=Ue.size,xt=1.001*lt[0]-.001*lt[1],dt=1.001*lt[1]-.001*lt[0];for(je=0;je<1e5&&(ot=Ue.start+je*yt,!(yt>0?ot>=gt:ot<=gt));je++)ot>xt&&ot<dt&&at.push(ot);if(Je._fillgradient)$e=[0];else if(typeof Je._fillcolor=="function"){var Lt=Je._filllevels;if(Lt)for(gt=Lt.end+Lt.size/100,yt=Lt.size,je=0;je<1e5&&(ot=Lt.start+je*yt,!(yt>0?ot>=gt:ot<=gt));je++)ot>lt[0]&&ot<lt[1]&&$e.push(ot);else($e=at.map(function(Tt){return Tt-Ue.size/2})).push($e[$e.length-1]+Ue.size)}else Je._fillcolor&&typeof Je._fillcolor=="string"&&($e=[0]);return Ue.size<0&&(at.reverse(),$e.reverse()),{line:at,fill:$e}}(0,I,Ce),de=ue.fill,Le=ue.line,we=Math.round(Z*(F==="fraction"?U?ge.w:ge.h:1)),Ee=we/(U?ge.w:ge.h),Oe=Math.round(R*(j==="fraction"?U?ge.h:ge.w:1)),Fe=Oe/(U?ge.h:ge.w),pe=oe?ge.w:z._fullLayout.width,be=ae?ge.h:z._fullLayout.height,Me=Math.round(U?ee*pe+X:ie*be+K),De={center:.5,right:1}[$]||0,Ne={top:1,middle:.5}[J]||0,Be=U?ee-De*Ee:ie-Ne*Ee,Ye=U?ie-Ne*Fe:ee-De*Fe,We=Math.round(U?be*(1-Ye):pe*Ye);I._lenFrac=Fe,I._thickFrac=Ee,I._uFrac=Be,I._vFrac=Ye;var et=I._axis=function(He,Je,lt){var ot=He._fullLayout,je=Je.orientation==="v",Ue={type:"linear",range:lt,tickmode:Je.tickmode,nticks:Je.nticks,tick0:Je.tick0,dtick:Je.dtick,tickvals:Je.tickvals,ticktext:Je.ticktext,ticks:Je.ticks,ticklen:Je.ticklen,tickwidth:Je.tickwidth,tickcolor:Je.tickcolor,showticklabels:Je.showticklabels,labelalias:Je.labelalias,ticklabelposition:Je.ticklabelposition,ticklabeloverflow:Je.ticklabeloverflow,ticklabelstep:Je.ticklabelstep,tickfont:Je.tickfont,tickangle:Je.tickangle,tickformat:Je.tickformat,exponentformat:Je.exponentformat,minexponent:Je.minexponent,separatethousands:Je.separatethousands,showexponent:Je.showexponent,showtickprefix:Je.showtickprefix,tickprefix:Je.tickprefix,showticksuffix:Je.showticksuffix,ticksuffix:Je.ticksuffix,title:Je.title,showline:!0,anchor:"free",side:je?"right":"bottom",position:1},at=je?"y":"x",$e={type:"linear",_id:at+Je._id},gt={letter:at,font:ot.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:ot.calendar};function yt(xt,dt){return s.coerce(Ue,$e,g,xt,dt)}return c(Ue,$e,yt,gt,ot),b(Ue,$e,yt,gt),$e}(z,I,Ce);et.position=Ee+(U?ee+X/ge.w:ie+K/ge.h);var ft=["top","bottom"].indexOf(ye)!==-1;if(U&&ft&&(et.title.side=ye,et.titlex=ee+X/ge.w,et.titley=Ye+(_e.side==="top"?Fe-K/ge.h:K/ge.h)),U||ft||(et.title.side=ye,et.titley=ie+K/ge.h,et.titlex=Ye+X/ge.w),xe.color&&I.tickmode==="auto"){et.tickmode="linear",et.tick0=le.start;var ht=le.size,mt=s.constrain(Oe/50,4,15)+1,Mt=(Ce[1]-Ce[0])/((I.nticks||mt)*ht);if(Mt>1){var _t=Math.pow(10,Math.floor(Math.log(Mt)/Math.LN10));ht*=_t*s.roundUp(Mt/_t,[2,5,10]),(Math.abs(le.start)/le.size+1e-6)%1<2e-6&&(et.tick0=0)}et.dtick=ht}et.domain=U?[Ye+K/ge.h,Ye+Fe-K/ge.h]:[Ye+X/ge.w,Ye+Fe-X/ge.w],et.setScale(),P.attr("transform",t(Math.round(ge.l),Math.round(ge.t)));var it,st=P.select("."+k.cbtitleunshift).attr("transform",t(-Math.round(ge.l),-Math.round(ge.t))),St=et.ticklabelposition,zt=et.title.font.size,Ft=P.select("."+k.cbaxis),Pt=0,Xe=0;function Ke(He,Je){var lt={propContainer:et,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:fe._dfltTitle.colorbar,containerGroup:P.select("."+k.cbtitle)},ot=He.charAt(0)==="h"?He.substr(1):"h"+He;P.selectAll("."+ot+",."+ot+"-math-group").remove(),o.draw(z,He,a(lt,Je||{}))}return s.syncOrAsync([i.previousPromises,function(){var He,Je;(U&&ft||!U&&!ft)&&(ye==="top"&&(He=X+ge.l+pe*ee,Je=K+ge.t+be*(1-Ye-Fe)+3+.75*zt),ye==="bottom"&&(He=X+ge.l+pe*ee,Je=K+ge.t+be*(1-Ye)-3-.25*zt),ye==="right"&&(Je=K+ge.t+be*ie+3+.75*zt,He=X+ge.l+pe*Ye),Ke(et._id+"title",{attributes:{x:He,y:Je,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!ft||U&&ft){var He,Je=P.select("."+k.cbtitle),lt=Je.select("text"),ot=[-V/2,V/2],je=Je.select(".h"+et._id+"title-math-group").node(),Ue=15.6;if(lt.node()&&(Ue=parseInt(lt.node().style.fontSize,10)*m),je?(He=r.bBox(je),Xe=He.width,(Pt=He.height)>Ue&&(ot[1]-=(Pt-Ue)/2)):lt.node()&&!lt.classed(k.jsPlaceholder)&&(He=r.bBox(lt.node()),Xe=He.width,Pt=He.height),U){if(Pt){if(Pt+=5,ye==="top")et.domain[1]-=Pt/ge.h,ot[1]*=-1;else{et.domain[0]+=Pt/ge.h;var at=u.lineCount(lt);ot[1]+=(1-at)*Ue}Je.attr("transform",t(ot[0],ot[1])),et.setScale()}}else Xe&&(ye==="right"&&(et.domain[0]+=(Xe+zt/2)/ge.w),Je.attr("transform",t(ot[0],ot[1])),et.setScale())}P.selectAll("."+k.cbfills+",."+k.cblines).attr("transform",U?t(0,Math.round(ge.h*(1-et.domain[1]))):t(Math.round(ge.w*et.domain[0]),0)),Ft.attr("transform",U?t(0,Math.round(-ge.t)):t(Math.round(-ge.l),0));var $e=P.select("."+k.cbfills).selectAll("rect."+k.cbfill).attr("style","").data(de);$e.enter().append("rect").classed(k.cbfill,!0).attr("style",""),$e.exit().remove();var gt=Ce.map(et.c2p).map(Math.round).sort(function(Tt,bt){return Tt-bt});$e.each(function(Tt,bt){var Ct=[bt===0?Ce[0]:(de[bt]+de[bt-1])/2,bt===de.length-1?Ce[1]:(de[bt]+de[bt+1])/2].map(et.c2p).map(Math.round);U&&(Ct[1]=s.constrain(Ct[1]+(Ct[1]>Ct[0])?1:-1,gt[0],gt[1]));var Dt=T.select(this).attr(U?"x":"y",Me).attr(U?"y":"x",T.min(Ct)).attr(U?"width":"height",Math.max(we,2)).attr(U?"height":"width",Math.max(T.max(Ct)-T.min(Ct),2));if(I._fillgradient)r.gradient(Dt,z,I._id,U?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var Bt=Te(Tt).replace("e-","");Dt.attr("fill",w(Bt).toHexString())}});var yt=P.select("."+k.cblines).selectAll("path."+k.cbline).data(xe.color&&xe.width?Le:[]);yt.enter().append("path").classed(k.cbline,!0),yt.exit().remove(),yt.each(function(Tt){var bt=Me,Ct=Math.round(et.c2p(Tt))+xe.width/2%1;T.select(this).attr("d","M"+(U?bt+","+Ct:Ct+","+bt)+(U?"h":"v")+we).call(r.lineGroupStyle,xe.width,ke(Tt),xe.dash)}),Ft.selectAll("g."+et._id+"tick,path").remove();var xt=Me+we+(V||0)/2-(I.ticks==="outside"?1:0),dt=v.calcTicks(et),Lt=v.getTickSigns(et)[2];return v.drawTicks(z,et,{vals:et.ticks==="inside"?v.clipEnds(et,dt):dt,layer:Ft,path:v.makeTickPath(et,xt,Lt),transFn:v.makeTransTickFn(et)}),v.drawLabels(z,et,{vals:dt,layer:Ft,transFn:v.makeTransTickLabelFn(et),labelFns:v.makeLabelFns(et,xt)})},function(){if(U&&!ft||!U&&ft){var He,Je,lt=et.position||0,ot=et._offset+et._length/2;if(ye==="right")Je=ot,He=ge.l+pe*lt+10+zt*(et.showticklabels?1:.5);else if(He=ot,ye==="bottom"&&(Je=ge.t+be*lt+10+(St.indexOf("inside")===-1?et.tickfont.size:0)+(et.ticks!=="intside"&&I.ticklen||0)),ye==="top"){var je=_e.text.split("<br>").length;Je=ge.t+be*lt+10-we-m*zt*je}Ke((U?"h":"v")+et._id+"title",{avoid:{selection:T.select(z).selectAll("g."+et._id+"tick"),side:ye,offsetTop:U?0:ge.t,offsetLeft:U?ge.l:0,maxShift:U?fe.width:fe.height},attributes:{x:He,y:Je,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},i.previousPromises,function(){var He,Je=we+V/2;St.indexOf("inside")===-1&&(He=r.bBox(Ft.node()),Je+=U?He.width:He.height),it=st.select("text");var lt=0,ot=U&&ye==="top",je=!U&&ye==="right",Ue=0;if(it.node()&&!it.classed(k.jsPlaceholder)){var at,$e=st.select(".h"+et._id+"title-math-group").node();$e&&(U&&ft||!U&&!ft)?(lt=(He=r.bBox($e)).width,at=He.height):(lt=(He=r.bBox(st.node())).right-ge.l-(U?Me:We),at=He.bottom-ge.t-(U?We:Me),U||ye!=="top"||(Je+=He.height,Ue=He.height)),je&&(it.attr("transform",t(lt/2+zt/2,0)),lt*=2),Je=Math.max(Je,U?lt:at)}var gt=2*(U?X:K)+Je+H+V/2,yt=0;!U&&_e.text&&J==="bottom"&&ie<=0&&(gt+=yt=gt/2,Ue+=yt),fe._hColorbarMoveTitle=yt,fe._hColorbarMoveCBTitle=Ue;var xt=H+V,dt=(U?Me:We)-xt/2-(U?X:0),Lt=(U?We:Me)-(U?Oe:K+Ue-yt);P.select("."+k.cbbg).attr("x",dt).attr("y",Lt).attr(U?"width":"height",Math.max(gt-yt,2)).attr(U?"height":"width",Math.max(Oe+xt,2)).call(l.fill,te).call(l.stroke,I.bordercolor).style("stroke-width",H);var Tt=je?Math.max(lt-10,0):0;P.selectAll("."+k.cboutline).attr("x",(U?Me:We+X)+Tt).attr("y",(U?We+K-Oe:Me)+(ot?Pt:0)).attr(U?"width":"height",Math.max(we,2)).attr(U?"height":"width",Math.max(Oe-(U?2*K+Pt:2*X+Tt),2)).call(l.stroke,I.outlinecolor).style({fill:"none","stroke-width":V});var bt=U?De*gt:0,Ct=U?0:(1-Ne)*gt-Ue;if(bt=oe?ge.l-bt:-bt,Ct=ae?ge.t-Ct:-Ct,P.attr("transform",t(bt,Ct)),!U&&(H||w(te).getAlpha()&&!w.equals(fe.paper_bgcolor,te))){var Dt=Ft.selectAll("text"),Bt=Dt[0].length,Xt=P.select("."+k.cbbg).node(),an=r.bBox(Xt),Wt=r.getTranslate(P);Dt.each(function(kn,An){var wn=Bt-1;if(An===0||An===wn){var Cn,_n=r.bBox(this),zn=r.getTranslate(this);if(An===wn){var qn=_n.right+zn.x;(Cn=an.right+Wt.x+We-H-2+ee-qn)>0&&(Cn=0)}else if(An===0){var sr=_n.left+zn.x;(Cn=an.left+Wt.x+We+H+2-sr)<0&&(Cn=0)}Cn&&(Bt<3?this.setAttribute("transform","translate("+Cn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Vt={},on=x[$],Sn=y[$],Ln=x[J],fn=y[J],Zt=gt-we;U?(j==="pixels"?(Vt.y=ie,Vt.t=Oe*Ln,Vt.b=Oe*fn):(Vt.t=Vt.b=0,Vt.yt=ie+R*Ln,Vt.yb=ie-R*fn),F==="pixels"?(Vt.x=ee,Vt.l=gt*on,Vt.r=gt*Sn):(Vt.l=Zt*on,Vt.r=Zt*Sn,Vt.xl=ee-Z*on,Vt.xr=ee+Z*Sn)):(j==="pixels"?(Vt.x=ee,Vt.l=Oe*on,Vt.r=Oe*Sn):(Vt.l=Vt.r=0,Vt.xl=ee+R*on,Vt.xr=ee-R*Sn),F==="pixels"?(Vt.y=1-ie,Vt.t=gt*Ln,Vt.b=gt*fn):(Vt.t=Zt*Ln,Vt.b=Zt*fn,Vt.yt=ie-Z*Ln,Vt.yb=ie+Z*fn));var ln=I.y<.5?"b":"t",nn=I.x<.5?"l":"r";z._fullLayout._reservedMargin[I._id]={};var cn={r:fe.width-dt-bt,l:dt+Vt.r,b:fe.height-Lt-Ct,t:Lt+Vt.b};oe&&ae?i.autoMargin(z,I._id,Vt):oe?z._fullLayout._reservedMargin[I._id][ln]=cn[ln]:ae||U?z._fullLayout._reservedMargin[I._id][nn]=cn[nn]:z._fullLayout._reservedMargin[I._id][ln]=cn[ln]}],z)}(E,M,f);O&&O.then&&(f._promises||[]).push(O),f._context.edits.colorbarPosition&&function(P,I,z){var U,R,j,Z=I.orientation==="v",F=z._fullLayout._size;h.init({element:P.node(),gd:z,prepFn:function(){U=P.attr("transform"),n(P)},moveFn:function(V,H){P.attr("transform",U+t(V,H)),R=h.align((Z?I._uFrac:I._vFrac)+V/F.w,Z?I._thickFrac:I._lenFrac,0,1,I.xanchor),j=h.align((Z?I._vFrac:1-I._uFrac)-H/F.h,Z?I._lenFrac:I._thickFrac,0,1,I.yanchor);var te=h.getCursor(R,j,I.xanchor,I.yanchor);n(P,te)},doneFn:function(){if(n(P),R!==void 0&&j!==void 0){var V={};V[I._propPrefix+"x"]=R,V[I._propPrefix+"y"]=j,I._traceIndex!==void 0?_.call("_guiRestyle",z,V,I._traceIndex):_.call("_guiRelayout",z,V)}}})}(E,M,f)}),S.exit().each(function(M){i.autoMargin(f,M._id)}).remove(),S.order()}}},76228:function(N,L,e){var T=e(71828);N.exports=function(w){return T.isPlainObject(w.colorbar)}},12311:function(N,L,e){N.exports={moduleType:"component",name:"colorbar",attributes:e(63583),supplyDefaults:e(62499),draw:e(98981).draw,hasColorbar:e(76228)}},50693:function(N,L,e){var T=e(63583),w=e(30587).counter,i=e(78607),_=e(63282).scales;function v(h){return"`"+h+"`"}i(_),N.exports=function(h,s){h=h||"";var t,a=(s=s||{}).cLetter||"c",n=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:h==="marker.line"),r="showScaleDflt"in s?s.showScaleDflt:a==="z",l=typeof s.colorscaleDflt=="string"?_[s.colorscaleDflt]:null,o=s.editTypeOverride||"",u=h?h+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):v(u+(t={z:"z",c:"color"}[a]));var p=a+"auto",c=a+"min",b=a+"max",g=a+"mid",d={};d[c]=d[b]=void 0;var m={};m[p]=!1;var x={};return t==="color"&&(x.color={valType:"color",arrayOk:!0,editType:o||"style"},s.anim&&(x.color.anim=!0)),x[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:d},x[c]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:m},x[b]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:m},x[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:d},x.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}},x.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},x.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(x.showscale={valType:"boolean",dflt:r,editType:"calc"},x.colorbar=T),s.noColorAxis||(x.coloraxis={valType:"subplotid",regex:w("coloraxis"),dflt:null,editType:"calc"}),x}},78803:function(N,L,e){var T=e(92770),w=e(71828),i=e(52075).extractOpts;N.exports=function(_,v,h){var s,t=_._fullLayout,a=h.vals,n=h.containerStr,r=n?w.nestedProperty(v,n).get():v,l=i(r),o=l.auto!==!1,u=l.min,p=l.max,c=l.mid,b=function(){return w.aggNums(Math.min,null,a)},g=function(){return w.aggNums(Math.max,null,a)};u===void 0?u=b():o&&(u=r._colorAx&&T(u)?Math.min(u,b()):b()),p===void 0?p=g():o&&(p=r._colorAx&&T(p)?Math.max(p,g()):g()),o&&c!==void 0&&(p-c>c-u?u=c-(p-c):p-c<c-u&&(p=c+(c-u))),u===p&&(u-=.5,p+=.5),l._sync("min",u),l._sync("max",p),l.autocolorscale&&(s=u*p<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,l._sync("colorscale",s))}},33046:function(N,L,e){var T=e(71828),w=e(52075).hasColorscale,i=e(52075).extractOpts;N.exports=function(_,v){function h(o,u){var p=o["_"+u];p!==void 0&&(o[u]=p)}function s(o,u){var p=u.container?T.nestedProperty(o,u.container).get():o;if(p)if(p.coloraxis)p._colorAx=v[p.coloraxis];else{var c=i(p),b=c.auto;(b||c.min===void 0)&&h(p,u.min),(b||c.max===void 0)&&h(p,u.max),c.autocolorscale&&h(p,"colorscale")}}for(var t=0;t<_.length;t++){var a=_[t],n=a._module.colorbar;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)s(a,n[r]);else s(a,n);w(a,"marker.line")&&s(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(var l in v._colorAxes)s(v[l],{min:"cmin",max:"cmax"})}},1586:function(N,L,e){var T=e(92770),w=e(71828),i=e(76228),_=e(62499),v=e(63282).isValid,h=e(73972).traceIs;function s(t,a){var n=a.slice(0,a.length-1);return a?w.nestedProperty(t,n).get()||{}:t}N.exports=function t(a,n,r,l,o){var u=o.prefix,p=o.cLetter,c="_module"in n,b=s(a,u),g=s(n,u),d=s(n._template||{},u)||{},m=function(){return delete a.coloraxis,delete n.coloraxis,t(a,n,r,l,o)};if(c){var x=r._colorAxes||{},y=l(u+"coloraxis");if(y){var k=h(n,"contour")&&w.nestedProperty(n,"contours.coloring").get()||"heatmap",f=x[y];return void(f?(f[2].push(m),f[0]!==k&&(f[0]=!1,w.warn(["Ignoring coloraxis:",y,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[y]=[k,n,[m]])}}var S=b[p+"min"],M=b[p+"max"],E=T(S)&&T(M)&&S<M;l(u+p+"auto",!E)?l(u+p+"mid"):(l(u+p+"min"),l(u+p+"max"));var O,P,I=b.colorscale,z=d.colorscale;I!==void 0&&(O=!v(I)),z!==void 0&&(O=!v(z)),l(u+"autocolorscale",O),l(u+"colorscale"),l(u+"reversescale"),u!=="marker.line."&&(u&&c&&(P=i(b)),l(u+"showscale",P)&&(u&&d&&(g._template=d),_(b,g,r)))}},52075:function(N,L,e){var T=e(39898),w=e(84267),i=e(92770),_=e(71828),v=e(7901),h=e(63282).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function a(u){var p,c,b,g=u._colorAx,d=g||u,m={};for(c=0;c<s.length;c++)m[b=s[c]]=d[b];if(g)for(p="c",c=0;c<t.length;c++)m[b=t[c]]=d["c"+b];else{var x;for(c=0;c<t.length;c++)((x="c"+(b=t[c]))in d||(x="z"+b)in d)&&(m[b]=d[x]);p=x.charAt(0)}return m._sync=function(y,k){var f=t.indexOf(y)!==-1?p+y:y;d[f]=d["_"+f]=k},m}function n(u){for(var p=a(u),c=p.min,b=p.max,g=p.reversescale?r(p.colorscale):p.colorscale,d=g.length,m=new Array(d),x=new Array(d),y=0;y<d;y++){var k=g[y];m[y]=c+k[0]*(b-c),x[y]=k[1]}return{domain:m,range:x}}function r(u){for(var p=u.length,c=new Array(p),b=p-1,g=0;b>=0;b--,g++){var d=u[b];c[g]=[1-d[0],d[1]]}return c}function l(u,p){p=p||{};for(var c=u.domain,b=u.range,g=b.length,d=new Array(g),m=0;m<g;m++){var x=w(b[m]).toRgb();d[m]=[x.r,x.g,x.b,x.a]}var y,k=T.scale.linear().domain(c).range(d).clamp(!0),f=p.noNumericCheck,S=p.returnArray;return(y=f&&S?k:f?function(M){return o(k(M))}:S?function(M){return i(M)?k(M):w(M).isValid()?M:v.defaultLine}:function(M){return i(M)?o(k(M)):w(M).isValid()?M:v.defaultLine}).domain=k.domain,y.range=function(){return b},y}function o(u){var p={r:u[0],g:u[1],b:u[2],a:u[3]};return w(p).toRgbString()}N.exports={hasColorscale:function(u,p,c){var b=p?_.nestedProperty(u,p).get()||{}:u,g=b[c||"color"];g&&g._inputArray&&(g=g._inputArray);var d=!1;if(_.isArrayOrTypedArray(g)){for(var m=0;m<g.length;m++)if(i(g[m])){d=!0;break}}return _.isPlainObject(b)&&(d||b.showscale===!0||i(b.cmin)&&i(b.cmax)||h(b.colorscale)||_.isPlainObject(b.colorbar))},extractOpts:a,extractScale:n,flipScale:r,makeColorScaleFunc:l,makeColorScaleFuncFromTrace:function(u,p){return l(n(u),p)}}},21081:function(N,L,e){var T=e(63282),w=e(52075);N.exports={moduleType:"component",name:"colorscale",attributes:e(50693),layoutAttributes:e(72673),supplyLayoutDefaults:e(30959),handleDefaults:e(1586),crossTraceDefaults:e(33046),calc:e(78803),scales:T.scales,defaultScale:T.defaultScale,getScale:T.get,isValidScale:T.isValid,hasColorscale:w.hasColorscale,extractOpts:w.extractOpts,extractScale:w.extractScale,flipScale:w.flipScale,makeColorScaleFunc:w.makeColorScaleFunc,makeColorScaleFuncFromTrace:w.makeColorScaleFuncFromTrace}},72673:function(N,L,e){var T=e(1426).extendFlat,w=e(50693),i=e(63282).scales;N.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}},coloraxis:T({_isSubplotObj:!0,editType:"calc"},w("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(N,L,e){var T=e(71828),w=e(44467),i=e(72673),_=e(1586);N.exports=function(v,h){function s(p,c){return T.coerce(v,h,i,p,c)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,a,n=h._colorAxes;function r(p,c){return T.coerce(t,a,i.coloraxis,p,c)}for(var l in n){var o=n[l];if(o[0])t=v[l]||{},(a=w.newContainer(h,l,"coloraxis"))._name=l,_(t,a,h,r,{prefix:"",cLetter:"c"});else{for(var u=0;u<o[2].length;u++)o[2][u]();delete h._colorAxes[l]}}}},63282:function(N,L,e){var T=e(84267),w={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},i=w.RdBu;function _(v){var h=0;if(!Array.isArray(v)||v.length<2||!v[0]||!v[v.length-1]||+v[0][0]!=0||+v[v.length-1][0]!=1)return!1;for(var s=0;s<v.length;s++){var t=v[s];if(t.length!==2||+t[0]<h||!T(t[1]).isValid())return!1;h=+t[0]}return!0}N.exports={scales:w,defaultScale:i,get:function(v,h){if(h||(h=i),!v)return h;function s(){try{v=w[v]||JSON.parse(v)}catch{v=h}}return typeof v=="string"&&(s(),typeof v=="string"&&s()),_(v)?v:h},isValid:function(v){return w[v]!==void 0||_(v)}}},92807:function(N){N.exports=function(L,e,T,w,i){var _=(L-T)/(w-T),v=_+e/(w-T),h=(_+v)/2;return i==="left"||i==="bottom"?_:i==="center"||i==="middle"?h:i==="right"||i==="top"?v:_<.6666666666666666-h?_:v>1.3333333333333333-h?v:h}},70461:function(N,L,e){var T=e(71828),w=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];N.exports=function(i,_,v,h){return i=v==="left"?0:v==="center"?1:v==="right"?2:T.constrain(Math.floor(3*i),0,2),_=h==="bottom"?0:h==="middle"?1:h==="top"?2:T.constrain(Math.floor(3*_),0,2),w[_][i]}},64505:function(N,L){L.selectMode=function(e){return e==="lasso"||e==="select"},L.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},L.openMode=function(e){return e==="drawline"||e==="drawopenpath"},L.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},L.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},L.selectingOrDrawing=function(e){return L.freeMode(e)||L.rectMode(e)}},28569:function(N,L,e){var T=e(48956),w=e(57035),i=e(38520),_=e(71828).removeElement,v=e(85555),h=N.exports={};h.align=e(92807),h.getCursor=e(70461);var s=e(26041);function t(){var n=document.createElement("div");n.className="dragcover";var r=n.style;return r.position="fixed",r.left=0,r.right=0,r.top=0,r.bottom=0,r.zIndex=999999999,r.background="none",document.body.appendChild(n),n}function a(n){return T(n.changedTouches?n.changedTouches[0]:n,document.body)}h.unhover=s.wrapped,h.unhoverRaw=s.raw,h.init=function(n){var r,l,o,u,p,c,b,g,d=n.gd,m=1,x=d._context.doubleClickDelay,y=n.element;d._mouseDownTime||(d._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=f,i?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=f,y.addEventListener("touchstart",f,{passive:!1})):y.ontouchstart=f;var k=n.clampFn||function(E,O,P){return Math.abs(E)<P&&(E=0),Math.abs(O)<P&&(O=0),[E,O]};function f(E){d._dragged=!1,d._dragging=!0;var O=a(E);r=O[0],l=O[1],b=E.target,c=E,g=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=r,E.clientY=l),(o=new Date().getTime())-d._mouseDownTime<x?m+=1:(m=1,d._mouseDownTime=o),n.prepFn&&n.prepFn(E,r,l),w&&!g?(p=t()).style.cursor=window.getComputedStyle(y).cursor:w||(p=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",M),document.addEventListener("touchend",M),n.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var O=a(E),P=n.minDrag||v.MINDRAG,I=k(O[0]-r,O[1]-l,P),z=I[0],U=I[1];(z||U)&&(d._dragged=!0,h.unhover(d,E)),d._dragged&&n.moveFn&&!g&&(d._dragdata={element:y,dx:z,dy:U},n.moveFn(z,U))}function M(E){if(delete d._dragdata,n.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",M),document.removeEventListener("touchend",M),w?_(p):u&&(p.documentElement.style.cursor=u,u=null),d._dragging){if(d._dragging=!1,new Date().getTime()-d._mouseDownTime>x&&(m=Math.max(m-1,1)),d._dragged)n.doneFn&&n.doneFn();else if(n.clickFn&&n.clickFn(m,c),!g){var O;try{O=new MouseEvent("click",E)}catch{var P=a(E);(O=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,P[0],P[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}b.dispatchEvent(O)}d._dragging=!1,d._dragged=!1}else d._dragged=!1}},h.coverSlip=t},26041:function(N,L,e){var T=e(11086),w=e(79990),i=e(24401).getGraphDiv,_=e(26675),v=N.exports={};v.wrapped=function(h,s,t){(h=i(h))._fullLayout&&w.clear(h._fullLayout._uid+_.HOVERID),v.raw(h,s,t)},v.raw=function(h,s){var t=h._fullLayout,a=h._hoverdata;s||(s={}),s.target&&!h._dragged&&T.triggerHandler(h,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),h._hoverdata=void 0,s.target&&a&&h.emit("plotly_unhover",{event:s,points:a}))}},79952:function(N,L){L.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},L.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(N,L,e){var T=e(39898),w=e(71828),i=w.numberFormat,_=e(92770),v=e(84267),h=e(73972),s=e(7901),t=e(21081),a=w.strTranslate,n=e(63893),r=e(77922),l=e(18783).LINE_SPACING,o=e(37822).DESELECTDIM,u=e(34098),p=e(39984),c=e(23469).appendArrayPointValue,b=N.exports={};function g(ke,Te,le){var ue=Te.fillpattern,de=ue&&b.getPatternAttr(ue.shape,0,"");if(de){var Le=b.getPatternAttr(ue.bgcolor,0,null),we=b.getPatternAttr(ue.fgcolor,0,null),Ee=ue.fgopacity,Oe=b.getPatternAttr(ue.size,0,8),Fe=b.getPatternAttr(ue.solidity,0,.3),pe=Te.uid;b.pattern(ke,"point",le,pe,de,Oe,Fe,void 0,ue.fillmode,Le,we,Ee)}else Te.fillcolor&&ke.call(s.fill,Te.fillcolor)}b.font=function(ke,Te,le,ue){w.isPlainObject(Te)&&(ue=Te.color,le=Te.size,Te=Te.family),Te&&ke.style("font-family",Te),le+1&&ke.style("font-size",le+"px"),ue&&ke.call(s.fill,ue)},b.setPosition=function(ke,Te,le){ke.attr("x",Te).attr("y",le)},b.setSize=function(ke,Te,le){ke.attr("width",Te).attr("height",le)},b.setRect=function(ke,Te,le,ue,de){ke.call(b.setPosition,Te,le).call(b.setSize,ue,de)},b.translatePoint=function(ke,Te,le,ue){var de=le.c2p(ke.x),Le=ue.c2p(ke.y);return!!(_(de)&&_(Le)&&Te.node())&&(Te.node().nodeName==="text"?Te.attr("x",de).attr("y",Le):Te.attr("transform",a(de,Le)),!0)},b.translatePoints=function(ke,Te,le){ke.each(function(ue){var de=T.select(this);b.translatePoint(ue,de,Te,le)})},b.hideOutsideRangePoint=function(ke,Te,le,ue,de,Le){Te.attr("display",le.isPtWithinRange(ke,de)&&ue.isPtWithinRange(ke,Le)?null:"none")},b.hideOutsideRangePoints=function(ke,Te){if(Te._hasClipOnAxisFalse){var le=Te.xaxis,ue=Te.yaxis;ke.each(function(de){var Le=de[0].trace,we=Le.xcalendar,Ee=Le.ycalendar,Oe=h.traceIs(Le,"bar-like")?".bartext":".point,.textpoint";ke.selectAll(Oe).each(function(Fe){b.hideOutsideRangePoint(Fe,T.select(this),le,ue,we,Ee)})})}},b.crispRound=function(ke,Te,le){return Te&&_(Te)?ke._context.staticPlot?Te:Te<1?1:Math.round(Te):le||0},b.singleLineStyle=function(ke,Te,le,ue,de){Te.style("fill","none");var Le=(((ke||[])[0]||{}).trace||{}).line||{},we=le||Le.width||0,Ee=de||Le.dash||"";s.stroke(Te,ue||Le.color),b.dashLine(Te,Ee,we)},b.lineGroupStyle=function(ke,Te,le,ue){ke.style("fill","none").each(function(de){var Le=(((de||[])[0]||{}).trace||{}).line||{},we=Te||Le.width||0,Ee=ue||Le.dash||"";T.select(this).call(s.stroke,le||Le.color).call(b.dashLine,Ee,we)})},b.dashLine=function(ke,Te,le){le=+le||0,Te=b.dashStyle(Te,le),ke.style({"stroke-dasharray":Te,"stroke-width":le+"px"})},b.dashStyle=function(ke,Te){Te=+Te||1;var le=Math.max(Te,3);return ke==="solid"?ke="":ke==="dot"?ke=le+"px,"+le+"px":ke==="dash"?ke=3*le+"px,"+3*le+"px":ke==="longdash"?ke=5*le+"px,"+5*le+"px":ke==="dashdot"?ke=3*le+"px,"+le+"px,"+le+"px,"+le+"px":ke==="longdashdot"&&(ke=5*le+"px,"+2*le+"px,"+le+"px,"+2*le+"px"),ke},b.singleFillStyle=function(ke,Te){var le=T.select(ke.node());g(ke,((le.data()[0]||[])[0]||{}).trace||{},Te)},b.fillGroupStyle=function(ke,Te){ke.style("stroke-width",0).each(function(le){var ue=T.select(this);le[0].trace&&g(ue,le[0].trace,Te)})};var d=e(90998);b.symbolNames=[],b.symbolFuncs=[],b.symbolBackOffs=[],b.symbolNeedLines={},b.symbolNoDot={},b.symbolNoFill={},b.symbolList=[],Object.keys(d).forEach(function(ke){var Te=d[ke],le=Te.n;b.symbolList.push(le,String(le),ke,le+100,String(le+100),ke+"-open"),b.symbolNames[le]=ke,b.symbolFuncs[le]=Te.f,b.symbolBackOffs[le]=Te.backoff||0,Te.needLine&&(b.symbolNeedLines[le]=!0),Te.noDot?b.symbolNoDot[le]=!0:b.symbolList.push(le+200,String(le+200),ke+"-dot",le+300,String(le+300),ke+"-open-dot"),Te.noFill&&(b.symbolNoFill[le]=!0)});var m=b.symbolNames.length;function x(ke,Te,le,ue){var de=ke%100;return b.symbolFuncs[de](Te,le,ue)+(ke>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}b.symbolNumber=function(ke){if(_(ke))ke=+ke;else if(typeof ke=="string"){var Te=0;ke.indexOf("-open")>0&&(Te=100,ke=ke.replace("-open","")),ke.indexOf("-dot")>0&&(Te+=200,ke=ke.replace("-dot","")),(ke=b.symbolNames.indexOf(ke))>=0&&(ke+=Te)}return ke%100>=m||ke>=400?0:Math.floor(Math.max(ke,0))};var y={x1:1,x2:0,y1:0,y2:0},k={x1:0,x2:0,y1:1,y2:0},f=i("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:y},horizontalreversed:{node:"linearGradient",attrs:y,reversed:!0},vertical:{node:"linearGradient",attrs:k},verticalreversed:{node:"linearGradient",attrs:k,reversed:!0}};b.gradient=function(ke,Te,le,ue,de,Le){for(var we=de.length,Ee=S[ue],Oe=new Array(we),Fe=0;Fe<we;Fe++)Ee.reversed?Oe[we-1-Fe]=[f(100*(1-de[Fe][0])),de[Fe][1]]:Oe[Fe]=[f(100*de[Fe][0]),de[Fe][1]];var pe=Te._fullLayout,be="g"+pe._uid+"-"+le,Me=pe._defs.select(".gradients").selectAll("#"+be).data([ue+Oe.join(";")],w.identity);Me.exit().remove(),Me.enter().append(Ee.node).each(function(){var De=T.select(this);Ee.attrs&&De.attr(Ee.attrs),De.attr("id",be);var Ne=De.selectAll("stop").data(Oe);Ne.exit().remove(),Ne.enter().append("stop"),Ne.each(function(Be){var Ye=v(Be[1]);T.select(this).attr({offset:Be[0]+"%","stop-color":s.tinyRGB(Ye),"stop-opacity":Ye.getAlpha()})})}),ke.style(Le,$(be,Te)).style(Le+"-opacity",null),ke.classed("gradient_filled",!0)},b.pattern=function(ke,Te,le,ue,de,Le,we,Ee,Oe,Fe,pe,be){var Me=Te==="legend";Ee&&(Oe==="overlay"?(Fe=Ee,pe=s.contrast(Fe)):(Fe=void 0,pe=Ee));var De,Ne,Be,Ye,We,et,ft,ht,mt,Mt=le._fullLayout,_t="p"+Mt._uid+"-"+ue,it={},st=v(pe),St=s.tinyRGB(st),zt=be*st.getAlpha();switch(de){case"/":De=Le*Math.sqrt(2),Ne=Le*Math.sqrt(2),et="path",it={d:Be="M-"+De/4+","+Ne/4+"l"+De/2+",-"+Ne/2+"M0,"+Ne+"L"+De+",0M"+De/4*3+","+Ne/4*5+"l"+De/2+",-"+Ne/2,opacity:zt,stroke:St,"stroke-width":(Ye=we*Le)+"px"};break;case"\\":De=Le*Math.sqrt(2),Ne=Le*Math.sqrt(2),et="path",it={d:Be="M"+De/4*3+",-"+Ne/4+"l"+De/2+","+Ne/2+"M0,0L"+De+","+Ne+"M-"+De/4+","+Ne/4*3+"l"+De/2+","+Ne/2,opacity:zt,stroke:St,"stroke-width":(Ye=we*Le)+"px"};break;case"x":De=Le*Math.sqrt(2),Ne=Le*Math.sqrt(2),Be="M-"+De/4+","+Ne/4+"l"+De/2+",-"+Ne/2+"M0,"+Ne+"L"+De+",0M"+De/4*3+","+Ne/4*5+"l"+De/2+",-"+Ne/2+"M"+De/4*3+",-"+Ne/4+"l"+De/2+","+Ne/2+"M0,0L"+De+","+Ne+"M-"+De/4+","+Ne/4*3+"l"+De/2+","+Ne/2,Ye=Le-Le*Math.sqrt(1-we),et="path",it={d:Be,opacity:zt,stroke:St,"stroke-width":Ye+"px"};break;case"|":et="path",et="path",it={d:Be="M"+(De=Le)/2+",0L"+De/2+","+(Ne=Le),opacity:zt,stroke:St,"stroke-width":(Ye=we*Le)+"px"};break;case"-":et="path",et="path",it={d:Be="M0,"+(Ne=Le)/2+"L"+(De=Le)+","+Ne/2,opacity:zt,stroke:St,"stroke-width":(Ye=we*Le)+"px"};break;case"+":et="path",Be="M"+(De=Le)/2+",0L"+De/2+","+(Ne=Le)+"M0,"+Ne/2+"L"+De+","+Ne/2,Ye=Le-Le*Math.sqrt(1-we),et="path",it={d:Be,opacity:zt,stroke:St,"stroke-width":Ye+"px"};break;case".":De=Le,Ne=Le,we<Math.PI/4?We=Math.sqrt(we*Le*Le/Math.PI):(ft=we,ht=Math.PI/4,We=(mt=Le/2)+(Le/Math.sqrt(2)-mt)*(ft-ht)/(1-ht)),et="circle",it={cx:De/2,cy:Ne/2,r:We,opacity:zt,fill:St}}var Ft=[de||"noSh",Fe||"noBg",pe||"noFg",Le,we].join(";"),Pt=Mt._defs.select(".patterns").selectAll("#"+_t).data([Ft],w.identity);Pt.exit().remove(),Pt.enter().append("pattern").each(function(){var Xe=T.select(this);if(Xe.attr({id:_t,width:De+"px",height:Ne+"px",patternUnits:"userSpaceOnUse",patternTransform:Me?"scale(0.8)":""}),Fe){var Ke=v(Fe),He=s.tinyRGB(Ke),Je=Ke.getAlpha(),lt=Xe.selectAll("rect").data([0]);lt.exit().remove(),lt.enter().append("rect").attr({width:De+"px",height:Ne+"px",fill:He,"fill-opacity":Je})}var ot=Xe.selectAll(et).data([0]);ot.exit().remove(),ot.enter().append(et).attr(it)}),ke.style("fill",$(_t,le)).style("fill-opacity",null),ke.classed("pattern_filled",!0)},b.initGradients=function(ke){var Te=ke._fullLayout;w.ensureSingle(Te._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),T.select(ke).selectAll(".gradient_filled").classed("gradient_filled",!1)},b.initPatterns=function(ke){var Te=ke._fullLayout;w.ensureSingle(Te._defs,"g","patterns").selectAll("pattern").remove(),T.select(ke).selectAll(".pattern_filled").classed("pattern_filled",!1)},b.getPatternAttr=function(ke,Te,le){return ke&&w.isArrayOrTypedArray(ke)?Te<ke.length?ke[Te]:le:ke},b.pointStyle=function(ke,Te,le,ue){if(ke.size()){var de=b.makePointStyleFns(Te);ke.each(function(Le){b.singlePointStyle(Le,T.select(this),Te,de,le,ue)})}},b.singlePointStyle=function(ke,Te,le,ue,de,Le){var we=le.marker,Ee=we.line;if(Le&&Le.i>=0&&ke.i===void 0&&(ke.i=Le.i),Te.style("opacity",ue.selectedOpacityFn?ue.selectedOpacityFn(ke):ke.mo===void 0?we.opacity:ke.mo),ue.ms2mrc){var Oe;Oe=ke.ms==="various"||we.size==="various"?3:ue.ms2mrc(ke.ms),ke.mrc=Oe,ue.selectedSizeFn&&(Oe=ke.mrc=ue.selectedSizeFn(ke));var Fe=b.symbolNumber(ke.mx||we.symbol)||0;ke.om=Fe%200>=100;var pe=Ce(ke,le),be=K(ke,le);Te.attr("d",x(Fe,Oe,pe,be))}var Me,De,Ne,Be=!1;if(ke.so)Ne=Ee.outlierwidth,De=Ee.outliercolor,Me=we.outliercolor;else{var Ye=(Ee||{}).width;Ne=(ke.mlw+1||Ye+1||(ke.trace?(ke.trace.marker.line||{}).width:0)+1)-1||0,De="mlc"in ke?ke.mlcc=ue.lineScale(ke.mlc):w.isArrayOrTypedArray(Ee.color)?s.defaultLine:Ee.color,w.isArrayOrTypedArray(we.color)&&(Me=s.defaultLine,Be=!0),Me="mc"in ke?ke.mcc=ue.markerScale(ke.mc):we.color||we.colors||"rgba(0,0,0,0)",ue.selectedColorFn&&(Me=ue.selectedColorFn(ke))}if(ke.om)Te.call(s.stroke,Me).style({"stroke-width":(Ne||1)+"px",fill:"none"});else{Te.style("stroke-width",(ke.isBlank?0:Ne)+"px");var We=we.gradient,et=ke.mgt;et?Be=!0:et=We&&We.type,w.isArrayOrTypedArray(et)&&(et=et[0],S[et]||(et=0));var ft=we.pattern,ht=ft&&b.getPatternAttr(ft.shape,ke.i,"");if(et&&et!=="none"){var mt=ke.mgc;mt?Be=!0:mt=We.color;var Mt=le.uid;Be&&(Mt+="-"+ke.i),b.gradient(Te,de,Mt,et,[[0,mt],[1,Me]],"fill")}else if(ht){var _t=!1,it=ft.fgcolor;!it&&Le&&Le.color&&(it=Le.color,_t=!0);var st=b.getPatternAttr(it,ke.i,Le&&Le.color||null),St=b.getPatternAttr(ft.bgcolor,ke.i,null),zt=ft.fgopacity,Ft=b.getPatternAttr(ft.size,ke.i,8),Pt=b.getPatternAttr(ft.solidity,ke.i,.3);_t=_t||ke.mcc||w.isArrayOrTypedArray(ft.shape)||w.isArrayOrTypedArray(ft.bgcolor)||w.isArrayOrTypedArray(ft.fgcolor)||w.isArrayOrTypedArray(ft.size)||w.isArrayOrTypedArray(ft.solidity);var Xe=le.uid;_t&&(Xe+="-"+ke.i),b.pattern(Te,"point",de,Xe,ht,Ft,Pt,ke.mcc,ft.fillmode,St,st,zt)}else w.isArrayOrTypedArray(Me)?s.fill(Te,Me[ke.i]):s.fill(Te,Me);Ne&&s.stroke(Te,De)}},b.makePointStyleFns=function(ke){var Te={},le=ke.marker;return Te.markerScale=b.tryColorscale(le,""),Te.lineScale=b.tryColorscale(le,"line"),h.traceIs(ke,"symbols")&&(Te.ms2mrc=u.isBubble(ke)?p(ke):function(){return(le.size||6)/2}),ke.selectedpoints&&w.extendFlat(Te,b.makeSelectedPointStyleFns(ke)),Te},b.makeSelectedPointStyleFns=function(ke){var Te={},le=ke.selected||{},ue=ke.unselected||{},de=ke.marker||{},Le=le.marker||{},we=ue.marker||{},Ee=de.opacity,Oe=Le.opacity,Fe=we.opacity,pe=Oe!==void 0,be=Fe!==void 0;(w.isArrayOrTypedArray(Ee)||pe||be)&&(Te.selectedOpacityFn=function(ht){var mt=ht.mo===void 0?de.opacity:ht.mo;return ht.selected?pe?Oe:mt:be?Fe:o*mt});var Me=de.color,De=Le.color,Ne=we.color;(De||Ne)&&(Te.selectedColorFn=function(ht){var mt=ht.mcc||Me;return ht.selected?De||mt:Ne||mt});var Be=de.size,Ye=Le.size,We=we.size,et=Ye!==void 0,ft=We!==void 0;return h.traceIs(ke,"symbols")&&(et||ft)&&(Te.selectedSizeFn=function(ht){var mt=ht.mrc||Be/2;return ht.selected?et?Ye/2:mt:ft?We/2:mt}),Te},b.makeSelectedTextStyleFns=function(ke){var Te={},le=ke.selected||{},ue=ke.unselected||{},de=ke.textfont||{},Le=le.textfont||{},we=ue.textfont||{},Ee=de.color,Oe=Le.color,Fe=we.color;return Te.selectedTextColorFn=function(pe){var be=pe.tc||Ee;return pe.selected?Oe||be:Fe||(Oe?be:s.addOpacity(be,o))},Te},b.selectedPointStyle=function(ke,Te){if(ke.size()&&Te.selectedpoints){var le=b.makeSelectedPointStyleFns(Te),ue=Te.marker||{},de=[];le.selectedOpacityFn&&de.push(function(Le,we){Le.style("opacity",le.selectedOpacityFn(we))}),le.selectedColorFn&&de.push(function(Le,we){s.fill(Le,le.selectedColorFn(we))}),le.selectedSizeFn&&de.push(function(Le,we){var Ee=we.mx||ue.symbol||0,Oe=le.selectedSizeFn(we);Le.attr("d",x(b.symbolNumber(Ee),Oe,Ce(we,Te),K(we,Te))),we.mrc2=Oe}),de.length&&ke.each(function(Le){for(var we=T.select(this),Ee=0;Ee<de.length;Ee++)de[Ee](we,Le)})}},b.tryColorscale=function(ke,Te){var le=Te?w.nestedProperty(ke,Te).get():ke;if(le){var ue=le.color;if((le.colorscale||le._colorAx)&&w.isArrayOrTypedArray(ue))return t.makeColorScaleFuncFromTrace(le)}return w.identity};var M,E,O={start:1,end:-1,middle:0,bottom:1,top:-1};function P(ke,Te,le,ue,de){var Le=T.select(ke.node().parentNode),we=Te.indexOf("top")!==-1?"top":Te.indexOf("bottom")!==-1?"bottom":"middle",Ee=Te.indexOf("left")!==-1?"end":Te.indexOf("right")!==-1?"start":"middle",Oe=ue?ue/.8+1:0,Fe=(n.lineCount(ke)-1)*l+1,pe=O[Ee]*Oe,be=.75*le+O[we]*Oe+(O[we]-1)*Fe*le/2;ke.attr("text-anchor",Ee),de||Le.attr("transform",a(pe,be))}function I(ke,Te){var le=ke.ts||Te.textfont.size;return _(le)&&le>0?le:0}function z(ke,Te,le){return le&&(ke=V(ke)),Te?R(ke[1]):U(ke[0])}function U(ke){var Te=T.round(ke,2);return M=Te,Te}function R(ke){var Te=T.round(ke,2);return E=Te,Te}function j(ke,Te,le,ue){var de=ke[0]-Te[0],Le=ke[1]-Te[1],we=le[0]-Te[0],Ee=le[1]-Te[1],Oe=Math.pow(de*de+Le*Le,.25),Fe=Math.pow(we*we+Ee*Ee,.25),pe=(Fe*Fe*de-Oe*Oe*we)*ue,be=(Fe*Fe*Le-Oe*Oe*Ee)*ue,Me=3*Fe*(Oe+Fe),De=3*Oe*(Oe+Fe);return[[U(Te[0]+(Me&&pe/Me)),R(Te[1]+(Me&&be/Me))],[U(Te[0]-(De&&pe/De)),R(Te[1]-(De&&be/De))]]}b.textPointStyle=function(ke,Te,le){if(ke.size()){var ue;if(Te.selectedpoints){var de=b.makeSelectedTextStyleFns(Te);ue=de.selectedTextColorFn}var Le=Te.texttemplate,we=le._fullLayout;ke.each(function(Ee){var Oe=T.select(this),Fe=Le?w.extractOption(Ee,Te,"txt","texttemplate"):w.extractOption(Ee,Te,"tx","text");if(Fe||Fe===0){if(Le){var pe=Te._module.formatLabels,be=pe?pe(Ee,Te,we):{},Me={};c(Me,Te,Ee.i);var De=Te._meta||{};Fe=w.texttemplateString(Fe,be,we._d3locale,Me,Ee,De)}var Ne=Ee.tp||Te.textposition,Be=I(Ee,Te),Ye=ue?ue(Ee):Ee.tc||Te.textfont.color;Oe.call(b.font,Ee.tf||Te.textfont.family,Be,Ye).text(Fe).call(n.convertToTspans,le).call(P,Ne,Be,Ee.mrc)}else Oe.remove()})}},b.selectedTextStyle=function(ke,Te){if(ke.size()&&Te.selectedpoints){var le=b.makeSelectedTextStyleFns(Te);ke.each(function(ue){var de=T.select(this),Le=le.selectedTextColorFn(ue),we=ue.tp||Te.textposition,Ee=I(ue,Te);s.fill(de,Le);var Oe=h.traceIs(Te,"bar-like");P(de,we,Ee,ue.mrc2||ue.mrc,Oe)})}},b.smoothopen=function(ke,Te){if(ke.length<3)return"M"+ke.join("L");var le,ue="M"+ke[0],de=[];for(le=1;le<ke.length-1;le++)de.push(j(ke[le-1],ke[le],ke[le+1],Te));for(ue+="Q"+de[0][0]+" "+ke[1],le=2;le<ke.length-1;le++)ue+="C"+de[le-2][1]+" "+de[le-1][0]+" "+ke[le];return ue+"Q"+de[ke.length-3][1]+" "+ke[ke.length-1]},b.smoothclosed=function(ke,Te){if(ke.length<3)return"M"+ke.join("L")+"Z";var le,ue="M"+ke[0],de=ke.length-1,Le=[j(ke[de],ke[0],ke[1],Te)];for(le=1;le<de;le++)Le.push(j(ke[le-1],ke[le],ke[le+1],Te));for(Le.push(j(ke[de-1],ke[de],ke[0],Te)),le=1;le<=de;le++)ue+="C"+Le[le-1][1]+" "+Le[le][0]+" "+ke[le];return ue+"C"+Le[de][1]+" "+Le[0][0]+" "+ke[0]+"Z"};var Z={hv:function(ke,Te,le){return"H"+U(Te[0])+"V"+z(Te,1,le)},vh:function(ke,Te,le){return"V"+R(Te[1])+"H"+z(Te,0,le)},hvh:function(ke,Te,le){return"H"+U((ke[0]+Te[0])/2)+"V"+R(Te[1])+"H"+z(Te,0,le)},vhv:function(ke,Te,le){return"V"+R((ke[1]+Te[1])/2)+"H"+U(Te[0])+"V"+z(Te,1,le)}},F=function(ke,Te,le){return"L"+z(Te,0,le)+","+z(Te,1,le)};function V(ke,Te){var le=ke.backoff,ue=ke.trace,de=ke.d,Le=ke.i;if(le&&ue&&ue.marker&&ue.marker.angle%360==0&&ue.line&&ue.line.shape!=="spline"){var we=w.isArrayOrTypedArray(le),Ee=ke,Oe=Te?Te[0]:M||0,Fe=Te?Te[1]:E||0,pe=Ee[0],be=Ee[1],Me=pe-Oe,De=be-Fe,Ne=Math.atan2(De,Me),Be=we?le[Le]:le;if(Be==="auto"){var Ye=Ee.i;ue.type==="scatter"&&Ye--;var We=Ee.marker,et=We.symbol;w.isArrayOrTypedArray(et)&&(et=et[Ye]);var ft=We.size;w.isArrayOrTypedArray(ft)&&(ft=ft[Ye]),Be=We?b.symbolBackOffs[b.symbolNumber(et)]*ft:0,Be+=b.getMarkerStandoff(de[Ye],ue)||0}var ht=pe-Be*Math.cos(Ne),mt=be-Be*Math.sin(Ne);(ht<=pe&&ht>=Oe||ht>=pe&&ht<=Oe)&&(mt<=be&&mt>=Fe||mt>=be&&mt<=Fe)&&(ke=[ht,mt])}return ke}b.steps=function(ke){var Te=Z[ke]||F;return function(le){for(var ue="M"+U(le[0][0])+","+R(le[0][1]),de=le.length,Le=1;Le<de;Le++)ue+=Te(le[Le-1],le[Le],Le===de-1);return ue}},b.applyBackoff=V,b.makeTester=function(){var ke=w.ensureSingleById(T.select("body"),"svg","js-plotly-tester",function(le){le.attr(r.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Te=w.ensureSingle(ke,"path","js-reference-point",function(le){le.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});b.tester=ke,b.testref=Te},b.savedBBoxes={};var H=0;function te(ke){var Te=ke.getAttribute("data-unformatted");if(Te!==null)return Te+ke.getAttribute("data-math")+ke.getAttribute("text-anchor")+ke.getAttribute("style")}function $(ke,Te){if(!ke)return null;var le=Te._context,ue=le._exportedPlot?"":le._baseUrl||"";return ue?"url('"+ue+"#"+ke+"')":"url(#"+ke+")"}b.bBox=function(ke,Te,le){var ue,de,Le;if(le||(le=te(ke)),le){if(ue=b.savedBBoxes[le])return w.extendFlat({},ue)}else if(ke.childNodes.length===1){var we=ke.childNodes[0];if(le=te(we)){var Ee=+we.getAttribute("x")||0,Oe=+we.getAttribute("y")||0,Fe=we.getAttribute("transform");if(!Fe){var pe=b.bBox(we,!1,le);return Ee&&(pe.left+=Ee,pe.right+=Ee),Oe&&(pe.top+=Oe,pe.bottom+=Oe),pe}if(le+="~"+Ee+"~"+Oe+"~"+Fe,ue=b.savedBBoxes[le])return w.extendFlat({},ue)}}Te?de=ke:(Le=b.tester.node(),de=ke.cloneNode(!0),Le.appendChild(de)),T.select(de).attr("transform",null).call(n.positionText,0,0);var be=de.getBoundingClientRect(),Me=b.testref.node().getBoundingClientRect();Te||Le.removeChild(de);var De={height:be.height,width:be.width,left:be.left-Me.left,top:be.top-Me.top,right:be.right-Me.left,bottom:be.bottom-Me.top};return H>=1e4&&(b.savedBBoxes={},H=0),le&&(b.savedBBoxes[le]=De),H++,w.extendFlat({},De)},b.setClipUrl=function(ke,Te,le){ke.attr("clip-path",$(Te,le))},b.getTranslate=function(ke){var Te=(ke[ke.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(le,ue,de){return[ue,de].join(" ")}).split(" ");return{x:+Te[0]||0,y:+Te[1]||0}},b.setTranslate=function(ke,Te,le){var ue=ke.attr?"attr":"getAttribute",de=ke.attr?"attr":"setAttribute",Le=ke[ue]("transform")||"";return Te=Te||0,le=le||0,Le=Le.replace(/(\btranslate\(.*?\);?)/,"").trim(),Le=(Le+=a(Te,le)).trim(),ke[de]("transform",Le),Le},b.getScale=function(ke){var Te=(ke[ke.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(le,ue,de){return[ue,de].join(" ")}).split(" ");return{x:+Te[0]||1,y:+Te[1]||1}},b.setScale=function(ke,Te,le){var ue=ke.attr?"attr":"getAttribute",de=ke.attr?"attr":"setAttribute",Le=ke[ue]("transform")||"";return Te=Te||1,le=le||1,Le=Le.replace(/(\bscale\(.*?\);?)/,"").trim(),Le=(Le+="scale("+Te+","+le+")").trim(),ke[de]("transform",Le),Le};var J=/\s*sc.*/;b.setPointGroupScale=function(ke,Te,le){if(Te=Te||1,le=le||1,ke){var ue=Te===1&&le===1?"":"scale("+Te+","+le+")";ke.each(function(){var de=(this.getAttribute("transform")||"").replace(J,"");de=(de+=ue).trim(),this.setAttribute("transform",de)})}};var X=/translate\([^)]*\)\s*$/;function K(ke,Te){var le;return ke&&(le=ke.mf),le===void 0&&(le=Te.marker&&Te.marker.standoff||0),Te._geo||Te._xA?le:-le}b.setTextPointsScale=function(ke,Te,le){ke&&ke.each(function(){var ue,de=T.select(this),Le=de.select("text");if(Le.node()){var we=parseFloat(Le.attr("x")||0),Ee=parseFloat(Le.attr("y")||0),Oe=(de.attr("transform")||"").match(X);ue=Te===1&&le===1?[]:[a(we,Ee),"scale("+Te+","+le+")",a(-we,-Ee)],Oe&&ue.push(Oe),de.attr("transform",ue.join(""))}})},b.getMarkerStandoff=K;var ee,ie,ae,oe,fe,ge,ve=Math.atan2,xe=Math.cos,_e=Math.sin;function ye(ke,Te){var le=Te[0],ue=Te[1];return[le*xe(ke)-ue*_e(ke),le*_e(ke)+ue*xe(ke)]}function Ce(ke,Te){var le,ue,de=ke.ma;de===void 0&&((de=Te.marker.angle)&&!w.isArrayOrTypedArray(de)||(de=0));var Le=Te.marker.angleref;if(Le==="previous"||Le==="north"){if(Te._geo){var we=Te._geo.project(ke.lonlat);le=we[0],ue=we[1]}else{var Ee=Te._xA,Oe=Te._yA;if(!Ee||!Oe)return 90;le=Ee.c2p(ke.x),ue=Oe.c2p(ke.y)}if(Te._geo){var Fe,pe=ke.lonlat[0],be=ke.lonlat[1],Me=Te._geo.project([pe,be+1e-5]),De=Te._geo.project([pe+1e-5,be]),Ne=ve(De[1]-ue,De[0]-le),Be=ve(Me[1]-ue,Me[0]-le);if(Le==="north")Fe=de/180*Math.PI;else if(Le==="previous"){var Ye=pe/180*Math.PI,We=be/180*Math.PI,et=ee/180*Math.PI,ft=ie/180*Math.PI,ht=et-Ye,mt=xe(ft)*_e(ht),Mt=_e(ft)*xe(We)-xe(ft)*_e(We)*xe(ht);Fe=-ve(mt,Mt)-Math.PI,ee=pe,ie=be}var _t=ye(Ne,[xe(Fe),0]),it=ye(Be,[_e(Fe),0]);de=ve(_t[1]+it[1],_t[0]+it[0])/Math.PI*180,Le!=="previous"||ge===Te.uid&&ke.i===fe+1||(de=null)}if(Le==="previous"&&!Te._geo)if(ge===Te.uid&&ke.i===fe+1&&_(le)&&_(ue)){var st=le-ae,St=ue-oe,zt=Te.line&&Te.line.shape||"",Ft=zt.slice(zt.length-1);Ft==="h"&&(St=0),Ft==="v"&&(st=0),de+=ve(St,st)/Math.PI*180+90}else de=null}return ae=le,oe=ue,fe=ke.i,ge=Te.uid,de}b.getMarkerAngle=Ce},90998:function(N,L,e){var T,w,i,_,v=e(95616),h=e(39898).round,s="M0,0Z",t=Math.sqrt(2),a=Math.sqrt(3),n=Math.PI,r=Math.cos,l=Math.sin;function o(p){return p===null}function u(p,c,b){if(!(p&&p%360!=0||c))return b;if(i===p&&_===c&&T===b)return w;function g(z,U){var R=r(z),j=l(z),Z=U[0],F=U[1]+(c||0);return[Z*R-F*j,Z*j+F*R]}i=p,_=c,T=b;for(var d=p/180*n,m=0,x=0,y=v(b),k="",f=0;f<y.length;f++){var S=y[f],M=S[0],E=m,O=x;if(M==="M"||M==="L")m=+S[1],x=+S[2];else if(M==="m"||M==="l")m+=+S[1],x+=+S[2];else if(M==="H")m=+S[1];else if(M==="h")m+=+S[1];else if(M==="V")x=+S[1];else if(M==="v")x+=+S[1];else if(M==="A"){m=+S[1],x=+S[2];var P=g(d,[+S[6],+S[7]]);S[6]=P[0],S[7]=P[1],S[3]=+S[3]+p}M!=="H"&&M!=="V"||(M="L"),M!=="h"&&M!=="v"||(M="l"),M!=="m"&&M!=="l"||(m-=E,x-=O);var I=g(d,[m,x]);M!=="H"&&M!=="V"||(M="L"),M!=="M"&&M!=="L"&&M!=="m"&&M!=="l"||(S[1]=I[0],S[2]=I[1]),S[0]=M,k+=S[0]+S.slice(1).join(",")}return w=k,k}N.exports={circle:{n:0,f:function(p,c,b){if(o(c))return s;var g=h(p,2),d="M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z";return b?u(c,b,d):d}},square:{n:1,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")}},diamond:{n:2,f:function(p,c,b){if(o(c))return s;var g=h(1.3*p,2);return u(c,b,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"Z")}},cross:{n:3,f:function(p,c,b){if(o(c))return s;var g=h(.4*p,2),d=h(1.2*p,2);return u(c,b,"M"+d+","+g+"H"+g+"V"+d+"H-"+g+"V"+g+"H-"+d+"V-"+g+"H-"+g+"V-"+d+"H"+g+"V-"+g+"H"+d+"Z")}},x:{n:4,f:function(p,c,b){if(o(c))return s;var g=h(.8*p/t,2),d="l"+g+","+g,m="l"+g+",-"+g,x="l-"+g+",-"+g,y="l-"+g+","+g;return u(c,b,"M0,"+g+d+m+x+m+x+y+x+y+d+y+d+"Z")}},"triangle-up":{n:5,f:function(p,c,b){if(o(c))return s;var g=h(2*p/a,2);return u(c,b,"M-"+g+","+h(p/2,2)+"H"+g+"L0,-"+h(p,2)+"Z")}},"triangle-down":{n:6,f:function(p,c,b){if(o(c))return s;var g=h(2*p/a,2);return u(c,b,"M-"+g+",-"+h(p/2,2)+"H"+g+"L0,"+h(p,2)+"Z")}},"triangle-left":{n:7,f:function(p,c,b){if(o(c))return s;var g=h(2*p/a,2);return u(c,b,"M"+h(p/2,2)+",-"+g+"V"+g+"L-"+h(p,2)+",0Z")}},"triangle-right":{n:8,f:function(p,c,b){if(o(c))return s;var g=h(2*p/a,2);return u(c,b,"M-"+h(p/2,2)+",-"+g+"V"+g+"L"+h(p,2)+",0Z")}},"triangle-ne":{n:9,f:function(p,c,b){if(o(c))return s;var g=h(.6*p,2),d=h(1.2*p,2);return u(c,b,"M-"+d+",-"+g+"H"+g+"V"+d+"Z")}},"triangle-se":{n:10,f:function(p,c,b){if(o(c))return s;var g=h(.6*p,2),d=h(1.2*p,2);return u(c,b,"M"+g+",-"+d+"V"+g+"H-"+d+"Z")}},"triangle-sw":{n:11,f:function(p,c,b){if(o(c))return s;var g=h(.6*p,2),d=h(1.2*p,2);return u(c,b,"M"+d+","+g+"H-"+g+"V-"+d+"Z")}},"triangle-nw":{n:12,f:function(p,c,b){if(o(c))return s;var g=h(.6*p,2),d=h(1.2*p,2);return u(c,b,"M-"+g+","+d+"V-"+g+"H"+d+"Z")}},pentagon:{n:13,f:function(p,c,b){if(o(c))return s;var g=h(.951*p,2),d=h(.588*p,2),m=h(-p,2),x=h(-.309*p,2);return u(c,b,"M"+g+","+x+"L"+d+","+h(.809*p,2)+"H-"+d+"L-"+g+","+x+"L0,"+m+"Z")}},hexagon:{n:14,f:function(p,c,b){if(o(c))return s;var g=h(p,2),d=h(p/2,2),m=h(p*a/2,2);return u(c,b,"M"+m+",-"+d+"V"+d+"L0,"+g+"L-"+m+","+d+"V-"+d+"L0,-"+g+"Z")}},hexagon2:{n:15,f:function(p,c,b){if(o(c))return s;var g=h(p,2),d=h(p/2,2),m=h(p*a/2,2);return u(c,b,"M-"+d+","+m+"H"+d+"L"+g+",0L"+d+",-"+m+"H-"+d+"L-"+g+",0Z")}},octagon:{n:16,f:function(p,c,b){if(o(c))return s;var g=h(.924*p,2),d=h(.383*p,2);return u(c,b,"M-"+d+",-"+g+"H"+d+"L"+g+",-"+d+"V"+d+"L"+d+","+g+"H-"+d+"L-"+g+","+d+"V-"+d+"Z")}},star:{n:17,f:function(p,c,b){if(o(c))return s;var g=1.4*p,d=h(.225*g,2),m=h(.951*g,2),x=h(.363*g,2),y=h(.588*g,2),k=h(-g,2),f=h(-.309*g,2),S=h(.118*g,2),M=h(.809*g,2);return u(c,b,"M"+d+","+f+"H"+m+"L"+x+","+S+"L"+y+","+M+"L0,"+h(.382*g,2)+"L-"+y+","+M+"L-"+x+","+S+"L-"+m+","+f+"H-"+d+"L0,"+k+"Z")}},hexagram:{n:18,f:function(p,c,b){if(o(c))return s;var g=h(.66*p,2),d=h(.38*p,2),m=h(.76*p,2);return u(c,b,"M-"+m+",0l-"+d+",-"+g+"h"+m+"l"+d+",-"+g+"l"+d+","+g+"h"+m+"l-"+d+","+g+"l"+d+","+g+"h-"+m+"l-"+d+","+g+"l-"+d+",-"+g+"h-"+m+"Z")}},"star-triangle-up":{n:19,f:function(p,c,b){if(o(c))return s;var g=h(p*a*.8,2),d=h(.8*p,2),m=h(1.6*p,2),x=h(4*p,2),y="A "+x+","+x+" 0 0 1 ";return u(c,b,"M-"+g+","+d+y+g+","+d+y+"0,-"+m+y+"-"+g+","+d+"Z")}},"star-triangle-down":{n:20,f:function(p,c,b){if(o(c))return s;var g=h(p*a*.8,2),d=h(.8*p,2),m=h(1.6*p,2),x=h(4*p,2),y="A "+x+","+x+" 0 0 1 ";return u(c,b,"M"+g+",-"+d+y+"-"+g+",-"+d+y+"0,"+m+y+g+",-"+d+"Z")}},"star-square":{n:21,f:function(p,c,b){if(o(c))return s;var g=h(1.1*p,2),d=h(2*p,2),m="A "+d+","+d+" 0 0 1 ";return u(c,b,"M-"+g+",-"+g+m+"-"+g+","+g+m+g+","+g+m+g+",-"+g+m+"-"+g+",-"+g+"Z")}},"star-diamond":{n:22,f:function(p,c,b){if(o(c))return s;var g=h(1.4*p,2),d=h(1.9*p,2),m="A "+d+","+d+" 0 0 1 ";return u(c,b,"M-"+g+",0"+m+"0,"+g+m+g+",0"+m+"0,-"+g+m+"-"+g+",0Z")}},"diamond-tall":{n:23,f:function(p,c,b){if(o(c))return s;var g=h(.7*p,2),d=h(1.4*p,2);return u(c,b,"M0,"+d+"L"+g+",0L0,-"+d+"L-"+g+",0Z")}},"diamond-wide":{n:24,f:function(p,c,b){if(o(c))return s;var g=h(1.4*p,2),d=h(.7*p,2);return u(c,b,"M0,"+d+"L"+g+",0L0,-"+d+"L-"+g+",0Z")}},hourglass:{n:25,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M"+g+","+g+"H-"+g+"L"+g+",-"+g+"H-"+g+"Z")},noDot:!0},bowtie:{n:26,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M"+g+","+g+"V-"+g+"L-"+g+","+g+"V-"+g+"Z")},noDot:!0},"circle-cross":{n:27,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(p,c,b){if(o(c))return s;var g=h(p,2),d=h(p/t,2);return u(c,b,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(p,c,b){if(o(c))return s;var g=h(1.3*p,2);return u(c,b,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM0,-"+g+"V"+g+"M-"+g+",0H"+g)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(p,c,b){if(o(c))return s;var g=h(1.3*p,2),d=h(.65*p,2);return u(c,b,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM-"+d+",-"+d+"L"+d+","+d+"M-"+d+","+d+"L"+d+",-"+d)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(p,c,b){if(o(c))return s;var g=h(1.4*p,2);return u(c,b,"M0,"+g+"V-"+g+"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(p,c,b){if(o(c))return s;var g=h(1.2*p,2),d=h(.85*p,2);return u(c,b,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(p,c,b){if(o(c))return s;var g=h(p/2,2),d=h(p,2);return u(c,b,"M"+g+","+d+"V-"+d+"M"+(g-d)+",-"+d+"V"+d+"M"+d+","+g+"H-"+d+"M-"+d+","+(g-d)+"H"+d)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(p,c,b){if(o(c))return s;var g=h(1.2*p,2),d=h(1.6*p,2),m=h(.8*p,2);return u(c,b,"M-"+g+","+m+"L0,0M"+g+","+m+"L0,0M0,-"+d+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(p,c,b){if(o(c))return s;var g=h(1.2*p,2),d=h(1.6*p,2),m=h(.8*p,2);return u(c,b,"M-"+g+",-"+m+"L0,0M"+g+",-"+m+"L0,0M0,"+d+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(p,c,b){if(o(c))return s;var g=h(1.2*p,2),d=h(1.6*p,2),m=h(.8*p,2);return u(c,b,"M"+m+","+g+"L0,0M"+m+",-"+g+"L0,0M-"+d+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(p,c,b){if(o(c))return s;var g=h(1.2*p,2),d=h(1.6*p,2),m=h(.8*p,2);return u(c,b,"M-"+m+","+g+"L0,0M-"+m+",-"+g+"L0,0M"+d+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(p,c,b){if(o(c))return s;var g=h(1.4*p,2);return u(c,b,"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(p,c,b){if(o(c))return s;var g=h(1.4*p,2);return u(c,b,"M0,"+g+"V-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M"+g+","+g+"L-"+g+",-"+g)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M0,0L-"+g+","+h(2*p,2)+"H"+g+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M0,0L-"+g+",-"+h(2*p,2)+"H"+g+"Z")},noDot:!0},"arrow-left":{n:47,f:function(p,c,b){if(o(c))return s;var g=h(2*p,2),d=h(p,2);return u(c,b,"M0,0L"+g+",-"+d+"V"+d+"Z")},noDot:!0},"arrow-right":{n:48,f:function(p,c,b){if(o(c))return s;var g=h(2*p,2),d=h(p,2);return u(c,b,"M0,0L-"+g+",-"+d+"V"+d+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M-"+g+",0H"+g+"M0,0L-"+g+","+h(2*p,2)+"H"+g+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(p,c,b){if(o(c))return s;var g=h(p,2);return u(c,b,"M-"+g+",0H"+g+"M0,0L-"+g+",-"+h(2*p,2)+"H"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(p,c,b){if(o(c))return s;var g=h(2*p,2),d=h(p,2);return u(c,b,"M0,-"+d+"V"+d+"M0,0L"+g+",-"+d+"V"+d+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(p,c,b){if(o(c))return s;var g=h(2*p,2),d=h(p,2);return u(c,b,"M0,-"+d+"V"+d+"M0,0L-"+g+",-"+d+"V"+d+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(p,c,b){if(o(c))return s;var g=n/2.5,d=2*p*r(g),m=2*p*l(g);return u(c,b,"M0,0L"+-d+","+m+"L"+d+","+m+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(p,c,b){if(o(c))return s;var g=n/4,d=2*p*r(g),m=2*p*l(g);return u(c,b,"M0,0L"+-d+","+m+"A "+2*p+","+2*p+" 0 0 1 "+d+","+m+"Z")},backoff:.4,noDot:!0}}},25673:function(N){N.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(N,L,e){var T=e(92770),w=e(73972),i=e(89298),_=e(71828),v=e(45827);function h(s,t,a,n){var r=t["error_"+n]||{},l=[];if(r.visible&&["linear","log"].indexOf(a.type)!==-1){for(var o=v(r),u=0;u<s.length;u++){var p=s[u],c=p.i;if(c===void 0)c=u;else if(c===null)continue;var b=p[n];if(T(a.c2l(b))){var g=o(b,c);if(T(g[0])&&T(g[1])){var d=p[n+"s"]=b-g[0],m=p[n+"h"]=b+g[1];l.push(d,m)}}}var x=a._id,y=t._extremes[x],k=i.findExtremes(a,l,_.extendFlat({tozero:y.opts.tozero},{padded:!0}));y.min=y.min.concat(k.min),y.max=y.max.concat(k.max)}}N.exports=function(s){for(var t=s.calcdata,a=0;a<t.length;a++){var n=t[a],r=n[0].trace;if(r.visible===!0&&w.traceIs(r,"errorBarsOK")){var l=i.getFromId(s,r.xaxis),o=i.getFromId(s,r.yaxis);h(n,r,l,"x"),h(n,r,o,"y")}}}},45827:function(N){function L(e,T){return e==="percent"?function(w){return Math.abs(w*T/100)}:e==="constant"?function(){return Math.abs(T)}:e==="sqrt"?function(w){return Math.sqrt(Math.abs(w))}:void 0}N.exports=function(e){var T=e.type,w=e.symmetric;if(T==="data"){var i=e.array||[];if(w)return function(s,t){var a=+i[t];return[a,a]};var _=e.arrayminus||[];return function(s,t){var a=+i[t],n=+_[t];return isNaN(a)&&isNaN(n)?[NaN,NaN]:[n||0,a||0]}}var v=L(T,e.value),h=L(T,e.valueminus);return w||e.valueminus===void 0?function(s){var t=v(s);return[t,t]}:function(s){return[h(s),v(s)]}}},97587:function(N,L,e){var T=e(92770),w=e(73972),i=e(71828),_=e(44467),v=e(25673);N.exports=function(h,s,t,a){var n="error_"+a.axis,r=_.newContainer(s,n),l=h[n]||{};function o(b,g){return i.coerce(l,r,v,b,g)}if(o("visible",l.array!==void 0||l.value!==void 0||l.type==="sqrt")!==!1){var u=o("type","array"in l?"data":"percent"),p=!0;u!=="sqrt"&&(p=o("symmetric",!((u==="data"?"arrayminus":"valueminus")in l))),u==="data"?(o("array"),o("traceref"),p||(o("arrayminus"),o("tracerefminus"))):u!=="percent"&&u!=="constant"||(o("value"),p||o("valueminus"));var c="copy_"+a.inherit+"style";a.inherit&&(s["error_"+a.inherit]||{}).visible&&o(c,!(l.color||T(l.thickness)||T(l.width))),a.inherit&&r[c]||(o("color",t),o("thickness"),o("width",w.traceIs(s,"gl3d")?0:4))}}},37369:function(N,L,e){var T=e(71828),w=e(30962).overrideAll,i=e(25673),_={error_x:T.extendFlat({},i),error_y:T.extendFlat({},i)};delete _.error_x.copy_zstyle,delete _.error_y.copy_zstyle,delete _.error_y.copy_ystyle;var v={error_x:T.extendFlat({},i),error_y:T.extendFlat({},i),error_z:T.extendFlat({},i)};delete v.error_x.copy_ystyle,delete v.error_y.copy_ystyle,delete v.error_z.copy_ystyle,delete v.error_z.copy_zstyle,N.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:_,bar:_,histogram:_,scatter3d:w(v,"calc","nested"),scattergl:w(_,"calc","nested")}},supplyDefaults:e(97587),calc:e(84532),makeComputeError:e(45827),plot:e(19398),style:e(62662),hoverInfo:function(h,s,t){(s.error_y||{}).visible&&(t.yerr=h.yh-h.y,s.error_y.symmetric||(t.yerrneg=h.y-h.ys)),(s.error_x||{}).visible&&(t.xerr=h.xh-h.x,s.error_x.symmetric||(t.xerrneg=h.x-h.xs))}}},19398:function(N,L,e){var T=e(39898),w=e(92770),i=e(91424),_=e(34098);N.exports=function(v,h,s,t){var a=s.xaxis,n=s.yaxis,r=t&&t.duration>0,l=v._context.staticPlot;h.each(function(o){var u,p=o[0].trace,c=p.error_x||{},b=p.error_y||{};p.ids&&(u=function(x){return x.id});var g=_.hasMarkers(p)&&p.marker.maxdisplayed>0;b.visible||c.visible||(o=[]);var d=T.select(this).selectAll("g.errorbar").data(o,u);if(d.exit().remove(),o.length){c.visible||d.selectAll("path.xerror").remove(),b.visible||d.selectAll("path.yerror").remove(),d.style("opacity",1);var m=d.enter().append("g").classed("errorbar",!0);r&&m.style("opacity",0).transition().duration(t.duration).style("opacity",1),i.setClipUrl(d,s.layerClipId,v),d.each(function(x){var y=T.select(this),k=function(P,I,z){var U={x:I.c2p(P.x),y:z.c2p(P.y)};return P.yh!==void 0&&(U.yh=z.c2p(P.yh),U.ys=z.c2p(P.ys),w(U.ys)||(U.noYS=!0,U.ys=z.c2p(P.ys,!0))),P.xh!==void 0&&(U.xh=I.c2p(P.xh),U.xs=I.c2p(P.xs),w(U.xs)||(U.noXS=!0,U.xs=I.c2p(P.xs,!0))),U}(x,a,n);if(!g||x.vis){var f,S=y.select("path.yerror");if(b.visible&&w(k.x)&&w(k.yh)&&w(k.ys)){var M=b.width;f="M"+(k.x-M)+","+k.yh+"h"+2*M+"m-"+M+",0V"+k.ys,k.noYS||(f+="m-"+M+",0h"+2*M),S.size()?r&&(S=S.transition().duration(t.duration).ease(t.easing)):S=y.append("path").style("vector-effect",l?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",f)}else S.remove();var E=y.select("path.xerror");if(c.visible&&w(k.y)&&w(k.xh)&&w(k.xs)){var O=(c.copy_ystyle?b:c).width;f="M"+k.xh+","+(k.y-O)+"v"+2*O+"m0,-"+O+"H"+k.xs,k.noXS||(f+="m0,-"+O+"v"+2*O),E.size()?r&&(E=E.transition().duration(t.duration).ease(t.easing)):E=y.append("path").style("vector-effect",l?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",f)}else E.remove()}})}})}},62662:function(N,L,e){var T=e(39898),w=e(7901);N.exports=function(i){i.each(function(_){var v=_[0].trace,h=v.error_y||{},s=v.error_x||{},t=T.select(this);t.selectAll("path.yerror").style("stroke-width",h.thickness+"px").call(w.stroke,h.color),s.copy_ystyle&&(s=h),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(w.stroke,s.color)})}},77914:function(N,L,e){var T=e(41940),w=e(528).hoverlabel,i=e(1426).extendFlat;N.exports={hoverlabel:{bgcolor:i({},w.bgcolor,{arrayOk:!0}),bordercolor:i({},w.bordercolor,{arrayOk:!0}),font:T({arrayOk:!0,editType:"none"}),align:i({},w.align,{arrayOk:!0}),namelength:i({},w.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(N,L,e){var T=e(71828),w=e(73972);function i(_,v,h,s){s=s||T.identity,Array.isArray(_)&&(v[0][h]=s(_))}N.exports=function(_){var v=_.calcdata,h=_._fullLayout;function s(l){return function(o){return T.coerceHoverinfo({hoverinfo:o},{_module:l._module},h)}}for(var t=0;t<v.length;t++){var a=v[t],n=a[0].trace;if(!w.traceIs(n,"pie-like")){var r=w.traceIs(n,"2dMap")?i:T.fillArray;r(n.hoverinfo,a,"hi",s(n)),n.hovertemplate&&r(n.hovertemplate,a,"ht"),n.hoverlabel&&(r(n.hoverlabel.bgcolor,a,"hbg"),r(n.hoverlabel.bordercolor,a,"hbc"),r(n.hoverlabel.font.size,a,"hts"),r(n.hoverlabel.font.color,a,"htc"),r(n.hoverlabel.font.family,a,"htf"),r(n.hoverlabel.namelength,a,"hnl"),r(n.hoverlabel.align,a,"hta"))}}}},75914:function(N,L,e){var T=e(73972),w=e(88335).hover;N.exports=function(i,_,v){var h=T.getComponentMethod("annotations","onClick")(i,i._hoverdata);function s(){i.emit("plotly_click",{points:i._hoverdata,event:_})}v!==void 0&&w(i,_,v,!0),i._hoverdata&&_&&_.target&&(h&&h.then?h.then(s):s(),_.stopImmediatePropagation&&_.stopImmediatePropagation())}},26675:function(N){N.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(N,L,e){var T=e(71828),w=e(77914),i=e(38048);N.exports=function(_,v,h,s){var t=T.extendFlat({},s.hoverlabel);v.hovertemplate&&(t.namelength=-1),i(_,v,function(a,n){return T.coerce(_,v,w,a,n)},t)}},23469:function(N,L,e){var T=e(71828);L.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},L.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var a=s.xaxes||[],n=s.yaxes||[],r=0;r<a.length;r++)for(var l=0;l<n.length;l++)if(t.indexOf(a[r]+n[l])!==-1)return!0;return!1}return t.indexOf(L.getSubplot(s))!==-1},L.flat=function(s,t){for(var a=new Array(s.length),n=0;n<s.length;n++)a[n]=t;return a},L.p2c=function(s,t){for(var a=new Array(s.length),n=0;n<s.length;n++)a[n]=s[n].p2c(t);return a},L.getDistanceFunction=function(s,t,a,n){return s==="closest"?n||L.quadrature(t,a):s.charAt(0)==="x"?t:a},L.getClosest=function(s,t,a){if(a.index!==!1)a.index>=0&&a.index<s.length?a.distance=0:a.index=!1;else for(var n=0;n<s.length;n++){var r=t(s[n]);r<=a.distance&&(a.index=n,a.distance=r)}return a},L.inbox=function(s,t,a){return s*t<0||s===0?a:1/0},L.quadrature=function(s,t){return function(a){var n=s(a),r=t(a);return Math.sqrt(n*n+r*r)}},L.makeEventData=function(s,t,a){var n="index"in s?s.index:s.pointNumber,r={data:t._input,fullData:t,curveNumber:t.index,pointNumber:n};if(t._indexToPoints){var l=t._indexToPoints[n];l.length===1?r.pointIndex=l[0]:r.pointIndices=l}else r.pointIndex=n;return t._module.eventData?r=t._module.eventData(r,s,t,a,n):("xVal"in s?r.x=s.xVal:"x"in s&&(r.x=s.x),"yVal"in s?r.y=s.yVal:"y"in s&&(r.y=s.y),s.xa&&(r.xaxis=s.xa),s.ya&&(r.yaxis=s.ya),s.zLabelVal!==void 0&&(r.z=s.zLabelVal)),L.appendArrayPointValue(r,t,n),r},L.appendArrayPointValue=function(s,t,a){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var l=n[r],o=i(l);if(s[o]===void 0){var u=_(T.nestedProperty(t,l).get(),a);u!==void 0&&(s[o]=u)}}},L.appendArrayMultiPointValues=function(s,t,a){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var l=n[r],o=i(l);if(s[o]===void 0){for(var u=T.nestedProperty(t,l).get(),p=new Array(a.length),c=0;c<a.length;c++)p[c]=_(u,a[c]);s[o]=p}}};var w={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function i(s){return w[s]||s}function _(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var v={x:!0,y:!0},h={"x unified":!0,"y unified":!0};L.isUnifiedHover=function(s){return typeof s=="string"&&!!h[s]},L.isXYhover=function(s){return typeof s=="string"&&!!v[s]}},88335:function(N,L,e){var T=e(39898),w=e(92770),i=e(84267),_=e(71828),v=_.strTranslate,h=_.strRotate,s=e(11086),t=e(63893),a=e(39918),n=e(91424),r=e(7901),l=e(28569),o=e(89298),u=e(73972),p=e(23469),c=e(26675),b=e(99017),g=e(43969),d=c.YANGLE,m=Math.PI*d/180,x=1/Math.sin(m),y=Math.cos(m),k=Math.sin(m),f=c.HOVERARROWSIZE,S=c.HOVERTEXTPAD,M={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function O(X){return[X.trace.index,X.index,X.x0,X.y0,X.name,X.attr,X.xa?X.xa._id:"",X.ya?X.ya._id:""].join(",")}L.hover=function(X,K,ee,ie){X=_.getGraphDiv(X);var ae=K.target;_.throttle(X._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){(function(oe,fe,ge,ve,xe){ge||(ge="xy");var _e=Array.isArray(ge)?ge:[ge],ye=oe._fullLayout,Ce=ye._plots||[],ke=Ce[ge],Te=ye._has("cartesian");if(ke){var le=ke.overlays.map(function(qt){return qt.id});_e=_e.concat(le)}for(var ue=_e.length,de=new Array(ue),Le=new Array(ue),we=!1,Ee=0;Ee<ue;Ee++){var Oe=_e[Ee];if(Ce[Oe])we=!0,de[Ee]=Ce[Oe].xaxis,Le[Ee]=Ce[Oe].yaxis;else{if(!ye[Oe]||!ye[Oe]._subplot)return void _.warn("Unrecognized subplot: "+Oe);var Fe=ye[Oe]._subplot;de[Ee]=Fe.xaxis,Le[Ee]=Fe.yaxis}}var pe=fe.hovermode||ye.hovermode;if(pe&&!we&&(pe="closest"),["x","y","closest","x unified","y unified"].indexOf(pe)===-1||!oe.calcdata||oe.querySelector(".zoombox")||oe._dragging)return l.unhoverRaw(oe,fe);var be=ye.hoverdistance;be===-1&&(be=1/0);var Me=ye.spikedistance;Me===-1&&(Me=1/0);var De,Ne,Be,Ye,We,et,ft,ht,mt,Mt,_t,it,st,St=[],zt=[],Ft={hLinePoint:null,vLinePoint:null},Pt=!1;if(Array.isArray(fe))for(pe="array",Be=0;Be<fe.length;Be++)(We=oe.calcdata[fe[Be].curveNumber||0])&&(et=We[0].trace,We[0].trace.hoverinfo!=="skip"&&(zt.push(We),et.orientation==="h"&&(Pt=!0)));else{for(Ye=0;Ye<oe.calcdata.length;Ye++)We=oe.calcdata[Ye],(et=We[0].trace).hoverinfo!=="skip"&&p.isTraceInSubplots(et,_e)&&(zt.push(We),et.orientation==="h"&&(Pt=!0));var Xe,Ke;if(xe){if(s.triggerHandler(oe,"plotly_beforehover",fe)===!1)return;var He=xe.getBoundingClientRect();Xe=fe.clientX-He.left,Ke=fe.clientY-He.top,ye._calcInverseTransform(oe);var Je=_.apply3DTransform(ye._invTransform)(Xe,Ke);if(Xe=Je[0],Ke=Je[1],Xe<0||Xe>de[0]._length||Ke<0||Ke>Le[0]._length)return l.unhoverRaw(oe,fe)}else Xe="xpx"in fe?fe.xpx:de[0]._length/2,Ke="ypx"in fe?fe.ypx:Le[0]._length/2;if(fe.pointerX=Xe+de[0]._offset,fe.pointerY=Ke+Le[0]._offset,De="xval"in fe?p.flat(_e,fe.xval):p.p2c(de,Xe),Ne="yval"in fe?p.flat(_e,fe.yval):p.p2c(Le,Ke),!w(De[0])||!w(Ne[0]))return _.warn("Fx.hover failed",fe,oe),l.unhoverRaw(oe,fe)}var lt=1/0;function ot(qt,tn){for(Ye=0;Ye<zt.length;Ye++)if((We=zt[Ye])&&We[0]&&We[0].trace&&(et=We[0].trace).visible===!0&&et._length!==0&&["carpet","contourcarpet"].indexOf(et._module.name)===-1){if(et.type==="splom"?ft=_e[ht=0]:(ft=p.getSubplot(et),ht=_e.indexOf(ft)),mt=pe,p.isUnifiedHover(mt)&&(mt=mt.charAt(0)),it={cd:We,trace:et,xa:de[ht],ya:Le[ht],maxHoverDistance:be,maxSpikeDistance:Me,index:!1,distance:Math.min(lt,be),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:r.defaultLine,name:et.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ye[ft]&&(it.subplot=ye[ft]._subplot),ye._splomScenes&&ye._splomScenes[et.uid]&&(it.scene=ye._splomScenes[et.uid]),st=St.length,mt==="array"){var dn=fe[Ye];"pointNumber"in dn?(it.index=dn.pointNumber,mt="closest"):(mt="","xval"in dn&&(Mt=dn.xval,mt="x"),"yval"in dn&&(_t=dn.yval,mt=mt?"closest":"y"))}else qt!==void 0&&tn!==void 0?(Mt=qt,_t=tn):(Mt=De[ht],_t=Ne[ht]);if(be!==0)if(et._module&&et._module.hoverPoints){var vn=et._module.hoverPoints(it,Mt,_t,mt,{finiteRange:!0,hoverLayer:ye._hoverlayer});if(vn)for(var On,Hn=0;Hn<vn.length;Hn++)On=vn[Hn],w(On.x0)&&w(On.y0)&&St.push(j(On,pe))}else _.log("Unrecognized trace type in hover:",et);if(pe==="closest"&&St.length>st&&(St.splice(0,st),lt=St[0].distance),Te&&Me!==0&&St.length===0){it.distance=Me,it.index=!1;var Bn=et._module.hoverPoints(it,Mt,_t,"closest",{hoverLayer:ye._hoverlayer});if(Bn&&(Bn=Bn.filter(function(Kt){return Kt.spikeDistance<=Me})),Bn&&Bn.length){var Vn,nr=Bn.filter(function(Kt){return Kt.xa.showspikes&&Kt.xa.spikesnap!=="hovered data"});if(nr.length){var Qt=nr[0];w(Qt.x0)&&w(Qt.y0)&&(Vn=Ue(Qt),(!Ft.vLinePoint||Ft.vLinePoint.spikeDistance>Vn.spikeDistance)&&(Ft.vLinePoint=Vn))}var bn=Bn.filter(function(Kt){return Kt.ya.showspikes&&Kt.ya.spikesnap!=="hovered data"});if(bn.length){var Rt=bn[0];w(Rt.x0)&&w(Rt.y0)&&(Vn=Ue(Rt),(!Ft.hLinePoint||Ft.hLinePoint.spikeDistance>Vn.spikeDistance)&&(Ft.hLinePoint=Vn))}}}}}function je(qt,tn,dn){for(var vn,On=null,Hn=1/0,Bn=0;Bn<qt.length;Bn++)vn=qt[Bn].spikeDistance,dn&&Bn===0&&(vn=-1/0),vn<=Hn&&vn<=tn&&(On=qt[Bn],Hn=vn);return On}function Ue(qt){return qt?{xa:qt.xa,ya:qt.ya,x:qt.xSpike!==void 0?qt.xSpike:(qt.x0+qt.x1)/2,y:qt.ySpike!==void 0?qt.ySpike:(qt.y0+qt.y1)/2,distance:qt.distance,spikeDistance:qt.spikeDistance,curveNumber:qt.trace.index,color:qt.color,pointNumber:qt.index}:null}ot();var at={fullLayout:ye,container:ye._hoverlayer,event:fe},$e=oe._spikepoints,gt={vLinePoint:Ft.vLinePoint,hLinePoint:Ft.hLinePoint};oe._spikepoints=gt;var yt=function(){St.sort(function(qt,tn){return qt.distance-tn.distance}),St=function(qt,tn){for(var dn=tn.charAt(0),vn=[],On=[],Hn=[],Bn=0;Bn<qt.length;Bn++){var Vn=qt[Bn];u.traceIs(Vn.trace,"bar-like")||u.traceIs(Vn.trace,"box-violin")?Hn.push(Vn):Vn.trace[dn+"period"]?On.push(Vn):vn.push(Vn)}return vn.concat(On).concat(Hn)}(St,pe)};yt();var xt=pe.charAt(0),dt=(xt==="x"||xt==="y")&&St[0]&&E[St[0].trace.type];if(Te&&Me!==0&&St.length!==0){var Lt=je(St.filter(function(qt){return qt.ya.showspikes}),Me,dt);Ft.hLinePoint=Ue(Lt);var Tt=je(St.filter(function(qt){return qt.xa.showspikes}),Me,dt);Ft.vLinePoint=Ue(Tt)}if(St.length===0){var bt=l.unhoverRaw(oe,fe);return!Te||Ft.hLinePoint===null&&Ft.vLinePoint===null||F($e)&&Z(oe,Ft,at),bt}if(Te&&F($e)&&Z(oe,Ft,at),p.isXYhover(mt)&&St[0].length!==0&&St[0].trace.type!=="splom"){var Ct=St[0],Dt=(St=M[Ct.trace.type]?St.filter(function(qt){return qt.trace.index===Ct.trace.index}):[Ct]).length;ot(H("x",Ct,ye),H("y",Ct,ye));var Bt,Xt=[],an={},Wt=0,Vt=function(qt){var tn=M[qt.trace.type]?O(qt):qt.trace.index;if(an[tn]){var dn=an[tn]-1,vn=Xt[dn];dn>0&&Math.abs(qt.distance)<Math.abs(vn.distance)&&(Xt[dn]=qt)}else Wt++,an[tn]=Wt,Xt.push(qt)};for(Bt=0;Bt<Dt;Bt++)Vt(St[Bt]);for(Bt=St.length-1;Bt>Dt-1;Bt--)Vt(St[Bt]);St=Xt,yt()}var on=oe._hoverdata,Sn=[],Ln=te(oe),fn=$(oe);for(Be=0;Be<St.length;Be++){var Zt=St[Be],ln=p.makeEventData(Zt,Zt.trace,Zt.cd);if(Zt.hovertemplate!==!1){var nn=!1;Zt.cd[Zt.index]&&Zt.cd[Zt.index].ht&&(nn=Zt.cd[Zt.index].ht),Zt.hovertemplate=nn||Zt.trace.hovertemplate||!1}if(Zt.xa&&Zt.ya){var cn=Zt.x0+Zt.xa._offset,kn=Zt.x1+Zt.xa._offset,An=Zt.y0+Zt.ya._offset,wn=Zt.y1+Zt.ya._offset,Cn=Math.min(cn,kn),_n=Math.max(cn,kn),zn=Math.min(An,wn),qn=Math.max(An,wn);ln.bbox={x0:Cn+fn,x1:_n+fn,y0:zn+Ln,y1:qn+Ln}}Zt.eventData=[ln],Sn.push(ln)}oe._hoverdata=Sn;var sr=pe==="y"&&(zt.length>1||St.length>1)||pe==="closest"&&Pt&&St.length>1,pr=r.combine(ye.plot_bgcolor||r.background,ye.paper_bgcolor),ir=I(St,{gd:oe,hovermode:pe,rotateLabels:sr,bgColor:pr,container:ye._hoverlayer,outerContainer:ye._paper.node(),commonLabelOpts:ye.hoverlabel,hoverdistance:ye.hoverdistance}),Jn=ir.hoverLabels;if(p.isUnifiedHover(pe)||(function(qt,tn,dn,vn){var On,Hn,Bn,Vn,nr,Qt,bn,Rt=tn?"xa":"ya",Kt=tn?"ya":"xa",rn=0,xn=1,Tn=qt.size(),Pn=new Array(Tn),pn=0,$t=vn.minX,en=vn.maxX,hn=vn.minY,gn=vn.maxY,Dn=function(yr){return yr*dn._invScaleX},Fn=function(yr){return yr*dn._invScaleY};function Zn(yr){var Ir=yr[0],lr=yr[yr.length-1];if(Hn=Ir.pmin-Ir.pos-Ir.dp+Ir.size,Bn=lr.pos+lr.dp+lr.size-Ir.pmax,Hn>.01){for(nr=yr.length-1;nr>=0;nr--)yr[nr].dp+=Hn;On=!1}if(!(Bn<.01)){if(Hn<-.01){for(nr=yr.length-1;nr>=0;nr--)yr[nr].dp-=Bn;On=!1}if(On){var kr=0;for(Vn=0;Vn<yr.length;Vn++)(Qt=yr[Vn]).pos+Qt.dp+Qt.size>Ir.pmax&&kr++;for(Vn=yr.length-1;Vn>=0&&!(kr<=0);Vn--)(Qt=yr[Vn]).pos>Ir.pmax-1&&(Qt.del=!0,kr--);for(Vn=0;Vn<yr.length&&!(kr<=0);Vn++)if((Qt=yr[Vn]).pos<Ir.pmin+1)for(Qt.del=!0,kr--,Bn=2*Qt.size,nr=yr.length-1;nr>=0;nr--)yr[nr].dp-=Bn;for(Vn=yr.length-1;Vn>=0&&!(kr<=0);Vn--)(Qt=yr[Vn]).pos+Qt.dp+Qt.size>Ir.pmax&&(Qt.del=!0,kr--)}}}for(qt.each(function(yr){var Ir=yr[Rt],lr=yr[Kt],kr=Ir._id.charAt(0)==="x",Fr=Ir.range;pn===0&&Fr&&Fr[0]>Fr[1]!==kr&&(xn=-1);var Wr=0,ki=kr?dn.width:dn.height;if(dn.hovermode==="x"||dn.hovermode==="y"){var Ai,aa,bi=U(yr,tn),Ji=yr.anchor,Ba=Ji==="end"?-1:1;if(Ji==="middle")aa=(Ai=yr.crossPos+(kr?Fn(bi.y-yr.by/2):Dn(yr.bx/2+yr.tx2width/2)))+(kr?Fn(yr.by):Dn(yr.bx));else if(kr)aa=(Ai=yr.crossPos+Fn(f+bi.y)-Fn(yr.by/2-f))+Fn(yr.by);else{var Na=Dn(Ba*f+bi.x),Ss=Na+Dn(Ba*yr.bx);Ai=yr.crossPos+Math.min(Na,Ss),aa=yr.crossPos+Math.max(Na,Ss)}kr?hn!==void 0&&gn!==void 0&&Math.min(aa,gn)-Math.max(Ai,hn)>1&&(lr.side==="left"?(Wr=lr._mainLinePosition,ki=dn.width):ki=lr._mainLinePosition):$t!==void 0&&en!==void 0&&Math.min(aa,en)-Math.max(Ai,$t)>1&&(lr.side==="top"?(Wr=lr._mainLinePosition,ki=dn.height):ki=lr._mainLinePosition)}Pn[pn++]=[{datum:yr,traceIndex:yr.trace.index,dp:0,pos:yr.pos,posref:yr.posref,size:yr.by*(kr?x:1)/2,pmin:Wr,pmax:ki}]}),Pn.sort(function(yr,Ir){return yr[0].posref-Ir[0].posref||xn*(Ir[0].traceIndex-yr[0].traceIndex)});!On&&rn<=Tn;){for(rn++,On=!0,Vn=0;Vn<Pn.length-1;){var Wn=Pn[Vn],tr=Pn[Vn+1],Qn=Wn[Wn.length-1],or=tr[0];if((Hn=Qn.pos+Qn.dp+Qn.size-or.pos-or.dp+or.size)>.01&&Qn.pmin===or.pmin&&Qn.pmax===or.pmax){for(nr=tr.length-1;nr>=0;nr--)tr[nr].dp+=Hn;for(Wn.push.apply(Wn,tr),Pn.splice(Vn+1,1),bn=0,nr=Wn.length-1;nr>=0;nr--)bn+=Wn[nr].dp;for(Bn=bn/Wn.length,nr=Wn.length-1;nr>=0;nr--)Wn[nr].dp-=Bn;On=!1}else Vn++}Pn.forEach(Zn)}for(Vn=Pn.length-1;Vn>=0;Vn--){var hr=Pn[Vn];for(nr=hr.length-1;nr>=0;nr--){var fr=hr[nr],xr=fr.datum;xr.offset=fr.dp,xr.del=fr.del}}}(Jn,sr,ye,ir.commonLabelBoundingBox),R(Jn,sr,ye._invScaleX,ye._invScaleY)),xe&&xe.tagName){var mr=u.getComponentMethod("annotations","hasClickToShow")(oe,Sn);a(T.select(xe),mr?"pointer":"")}xe&&!ve&&function(qt,tn,dn){if(!dn||dn.length!==qt._hoverdata.length)return!0;for(var vn=dn.length-1;vn>=0;vn--){var On=dn[vn],Hn=qt._hoverdata[vn];if(On.curveNumber!==Hn.curveNumber||String(On.pointNumber)!==String(Hn.pointNumber)||String(On.pointNumbers)!==String(Hn.pointNumbers))return!0}return!1}(oe,0,on)&&(on&&oe.emit("plotly_unhover",{event:fe,points:on}),oe.emit("plotly_hover",{event:fe,points:oe._hoverdata,xaxes:de,yaxes:Le,xvals:De,yvals:Ne}))})(X,K,ee,ie,ae)})},L.loneHover=function(X,K){var ee=!0;Array.isArray(X)||(ee=!1,X=[X]);var ie=K.gd,ae=te(ie),oe=$(ie),fe=I(X.map(function(xe){var _e=xe._x0||xe.x0||xe.x||0,ye=xe._x1||xe.x1||xe.x||0,Ce=xe._y0||xe.y0||xe.y||0,ke=xe._y1||xe.y1||xe.y||0,Te=xe.eventData;if(Te){var le=Math.min(_e,ye),ue=Math.max(_e,ye),de=Math.min(Ce,ke),Le=Math.max(Ce,ke),we=xe.trace;if(u.traceIs(we,"gl3d")){var Ee=ie._fullLayout[we.scene]._scene.container,Oe=Ee.offsetLeft,Fe=Ee.offsetTop;le+=Oe,ue+=Oe,de+=Fe,Le+=Fe}Te.bbox={x0:le+oe,x1:ue+oe,y0:de+ae,y1:Le+ae},K.inOut_bbox&&K.inOut_bbox.push(Te.bbox)}else Te=!1;return{color:xe.color||r.defaultLine,x0:xe.x0||xe.x||0,x1:xe.x1||xe.x||0,y0:xe.y0||xe.y||0,y1:xe.y1||xe.y||0,xLabel:xe.xLabel,yLabel:xe.yLabel,zLabel:xe.zLabel,text:xe.text,name:xe.name,idealAlign:xe.idealAlign,borderColor:xe.borderColor,fontFamily:xe.fontFamily,fontSize:xe.fontSize,fontColor:xe.fontColor,nameLength:xe.nameLength,textAlign:xe.textAlign,trace:xe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:xe.hovertemplate||!1,hovertemplateLabels:xe.hovertemplateLabels||!1,eventData:Te}}),{gd:ie,hovermode:"closest",rotateLabels:!1,bgColor:K.bgColor||r.background,container:T.select(K.container),outerContainer:K.outerContainer||K.container}).hoverLabels,ge=0,ve=0;return fe.sort(function(xe,_e){return xe.y0-_e.y0}).each(function(xe,_e){var ye=xe.y0-xe.by/2;xe.offset=ye-5<ge?ge-ye+5:0,ge=ye+xe.by+xe.offset,_e===K.anchorIndex&&(ve=xe.offset)}).each(function(xe){xe.offset-=ve}),R(fe,!1,ie._fullLayout._invScaleX,ie._fullLayout._invScaleY),ee?fe:fe.node()};var P=/<extra>([\s\S]*)<\/extra>/;function I(X,K){var ee=K.gd,ie=ee._fullLayout,ae=K.hovermode,oe=K.rotateLabels,fe=K.bgColor,ge=K.container,ve=K.outerContainer,xe=K.commonLabelOpts||{};if(X.length===0)return[[]];var _e=K.fontFamily||c.HOVERFONT,ye=K.fontSize||c.HOVERFONTSIZE,Ce=X[0],ke=Ce.xa,Te=Ce.ya,le=ae.charAt(0),ue=le+"Label",de=Ce[ue];if(de===void 0&&ke.type==="multicategory")for(var Le=0;Le<X.length&&(de=X[Le][ue])===void 0;Le++);var we=J(ee,ve),Ee=we.top,Oe=we.width,Fe=we.height,pe=de!==void 0&&Ce.distance<=K.hoverdistance&&(ae==="x"||ae==="y");if(pe){var be,Me,De=!0;for(be=0;be<X.length;be++)if(De&&X[be].zLabel===void 0&&(De=!1),Me=X[be].hoverinfo||X[be].trace.hoverinfo){var Ne=Array.isArray(Me)?Me:Me.split("+");if(Ne.indexOf("all")===-1&&Ne.indexOf(ae)===-1){pe=!1;break}}De&&(pe=!1)}var Be=ge.selectAll("g.axistext").data(pe?[0]:[]);Be.enter().append("g").classed("axistext",!0),Be.exit().remove();var Ye={minX:0,maxX:0,minY:0,maxY:0};if(Be.each(function(){var bt=T.select(this),Ct=_.ensureSingle(bt,"path","",function(zn){zn.style({"stroke-width":"1px"})}),Dt=_.ensureSingle(bt,"text","",function(zn){zn.attr("data-notex",1)}),Bt=xe.bgcolor||r.defaultLine,Xt=xe.bordercolor||r.contrast(Bt),an=r.contrast(Bt),Wt={family:xe.font.family||_e,size:xe.font.size||ye,color:xe.font.color||an};Ct.style({fill:Bt,stroke:Xt}),Dt.text(de).call(n.font,Wt).call(t.positionText,0,0).call(t.convertToTspans,ee),bt.attr("transform","");var Vt,on,Sn=J(ee,Dt.node());if(ae==="x"){var Ln=ke.side==="top"?"-":"";Dt.attr("text-anchor","middle").call(t.positionText,0,ke.side==="top"?Ee-Sn.bottom-f-S:Ee-Sn.top+f+S),Vt=ke._offset+(Ce.x0+Ce.x1)/2,on=Te._offset+(ke.side==="top"?0:Te._length);var fn=Sn.width/2+S;Vt<fn?(Vt=fn,Ct.attr("d","M-"+(fn-f)+",0L-"+(fn-2*f)+","+Ln+f+"H"+fn+"v"+Ln+(2*S+Sn.height)+"H-"+fn+"V"+Ln+f+"Z")):Vt>ie.width-fn?(Vt=ie.width-fn,Ct.attr("d","M"+(fn-f)+",0L"+fn+","+Ln+f+"v"+Ln+(2*S+Sn.height)+"H-"+fn+"V"+Ln+f+"H"+(fn-2*f)+"Z")):Ct.attr("d","M0,0L"+f+","+Ln+f+"H"+fn+"v"+Ln+(2*S+Sn.height)+"H-"+fn+"V"+Ln+f+"H-"+f+"Z"),Ye.minX=Vt-fn,Ye.maxX=Vt+fn,ke.side==="top"?(Ye.minY=on-(2*S+Sn.height),Ye.maxY=on-S):(Ye.minY=on+S,Ye.maxY=on+(2*S+Sn.height))}else{var Zt,ln,nn;Te.side==="right"?(Zt="start",ln=1,nn="",Vt=ke._offset+ke._length):(Zt="end",ln=-1,nn="-",Vt=ke._offset),on=Te._offset+(Ce.y0+Ce.y1)/2,Dt.attr("text-anchor",Zt),Ct.attr("d","M0,0L"+nn+f+","+f+"V"+(S+Sn.height/2)+"h"+nn+(2*S+Sn.width)+"V-"+(S+Sn.height/2)+"H"+nn+f+"V-"+f+"Z"),Ye.minY=on-(S+Sn.height/2),Ye.maxY=on+(S+Sn.height/2),Te.side==="right"?(Ye.minX=Vt+f,Ye.maxX=Vt+f+(2*S+Sn.width)):(Ye.minX=Vt-f-(2*S+Sn.width),Ye.maxX=Vt-f);var cn,kn=Sn.height/2,An=Ee-Sn.top-kn,wn="clip"+ie._uid+"commonlabel"+Te._id;if(Vt<Sn.width+2*S+f){cn="M-"+(f+S)+"-"+kn+"h-"+(Sn.width-S)+"V"+kn+"h"+(Sn.width-S)+"Z";var Cn=Sn.width-Vt+S;t.positionText(Dt,Cn,An),Zt==="end"&&Dt.selectAll("tspan").each(function(){var zn=T.select(this),qn=n.tester.append("text").text(zn.text()).call(n.font,Wt),sr=J(ee,qn.node());Math.round(sr.width)<Math.round(Sn.width)&&zn.attr("x",Cn-sr.width),qn.remove()})}else t.positionText(Dt,ln*(S+f),An),cn=null;var _n=ie._topclips.selectAll("#"+wn).data(cn?[0]:[]);_n.enter().append("clipPath").attr("id",wn).append("path"),_n.exit().remove(),_n.select("path").attr("d",cn),n.setClipUrl(Dt,cn?wn:null,ee)}bt.attr("transform",v(Vt,on))}),p.isUnifiedHover(ae)){ge.selectAll("g.hovertext").remove();var We=X.filter(function(bt){return bt.hoverinfo!=="none"});if(We.length===0)return[];var et=ie.hoverlabel,ft=et.font,ht={showlegend:!0,legend:{title:{text:de,font:ft},font:ft,bgcolor:et.bgcolor,bordercolor:et.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ie.legend?ie.legend.traceorder:void 0,orientation:"v"}},mt={font:ft};b(ht,mt,ee._fullData);var Mt=mt.legend;Mt.entries=[];for(var _t=0;_t<We.length;_t++){var it=We[_t];if(it.hoverinfo!=="none"){var st=z(it,!0,ae,ie,de),St=st[0],zt=st[1];it.name=zt,it.text=zt!==""?zt+" : "+St:St;var Ft=it.cd[it.index];Ft&&(Ft.mc&&(it.mc=Ft.mc),Ft.mcc&&(it.mc=Ft.mcc),Ft.mlc&&(it.mlc=Ft.mlc),Ft.mlcc&&(it.mlc=Ft.mlcc),Ft.mlw&&(it.mlw=Ft.mlw),Ft.mrc&&(it.mrc=Ft.mrc),Ft.dir&&(it.dir=Ft.dir)),it._distinct=!0,Mt.entries.push([it])}}Mt.entries.sort(function(bt,Ct){return bt[0].trace.index-Ct[0].trace.index}),Mt.layer=ge,Mt._inHover=!0,Mt._groupTitleFont=et.grouptitlefont,g(ee,Mt);var Pt,Xe,Ke,He,Je=ge.select("g.legend"),lt=J(ee,Je.node()),ot=lt.width+2*S,je=lt.height+2*S,Ue=We[0],at=(Ue.x0+Ue.x1)/2,$e=(Ue.y0+Ue.y1)/2,gt=!(u.traceIs(Ue.trace,"bar-like")||u.traceIs(Ue.trace,"box-violin"));le==="y"?gt?(Xe=$e-S,Pt=$e+S):(Xe=Math.min.apply(null,We.map(function(bt){return Math.min(bt.y0,bt.y1)})),Pt=Math.max.apply(null,We.map(function(bt){return Math.max(bt.y0,bt.y1)}))):Xe=Pt=_.mean(We.map(function(bt){return(bt.y0+bt.y1)/2}))-je/2,le==="x"?gt?(Ke=at+S,He=at-S):(Ke=Math.max.apply(null,We.map(function(bt){return Math.max(bt.x0,bt.x1)})),He=Math.min.apply(null,We.map(function(bt){return Math.min(bt.x0,bt.x1)}))):Ke=He=_.mean(We.map(function(bt){return(bt.x0+bt.x1)/2}))-ot/2;var yt,xt,dt=ke._offset,Lt=Te._offset;return He+=dt-ot,Xe+=Lt-je,yt=(Ke+=dt)+ot<Oe&&Ke>=0?Ke:He+ot<Oe&&He>=0?He:dt+ot<Oe?dt:Ke-at<at-He+ot?Oe-ot:0,yt+=S,xt=(Pt+=Lt)+je<Fe&&Pt>=0?Pt:Xe+je<Fe&&Xe>=0?Xe:Lt+je<Fe?Lt:Pt-$e<$e-Xe+je?Fe-je:0,xt+=S,Je.attr("transform",v(yt-1,xt-1)),Je}var Tt=ge.selectAll("g.hovertext").data(X,function(bt){return O(bt)});return Tt.enter().append("g").classed("hovertext",!0).each(function(){var bt=T.select(this);bt.append("rect").call(r.fill,r.addOpacity(fe,.8)),bt.append("text").classed("name",!0),bt.append("path").style("stroke-width","1px"),bt.append("text").classed("nums",!0).call(n.font,_e,ye)}),Tt.exit().remove(),Tt.each(function(bt){var Ct=T.select(this).attr("transform",""),Dt=bt.color;Array.isArray(Dt)&&(Dt=Dt[bt.eventData[0].pointNumber]);var Bt=bt.bgcolor||Dt,Xt=r.combine(r.opacity(Bt)?Bt:r.defaultLine,fe),an=r.combine(r.opacity(Dt)?Dt:r.defaultLine,fe),Wt=bt.borderColor||r.contrast(Xt),Vt=z(bt,pe,ae,ie,de,Ct),on=Vt[0],Sn=Vt[1],Ln=Ct.select("text.nums").call(n.font,bt.fontFamily||_e,bt.fontSize||ye,bt.fontColor||Wt).text(on).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,ee),fn=Ct.select("text.name"),Zt=0,ln=0;if(Sn&&Sn!==on){fn.call(n.font,bt.fontFamily||_e,bt.fontSize||ye,an).text(Sn).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,ee);var nn=J(ee,fn.node());Zt=nn.width+2*S,ln=nn.height+2*S}else fn.remove(),Ct.select("rect").remove();Ct.select("path").style({fill:Xt,stroke:Wt});var cn=bt.xa._offset+(bt.x0+bt.x1)/2,kn=bt.ya._offset+(bt.y0+bt.y1)/2,An=Math.abs(bt.x1-bt.x0),wn=Math.abs(bt.y1-bt.y0),Cn=J(ee,Ln.node()),_n=Cn.width/ie._invScaleX,zn=Cn.height/ie._invScaleY;bt.ty0=(Ee-Cn.top)/ie._invScaleY,bt.bx=_n+2*S,bt.by=Math.max(zn+2*S,ln),bt.anchor="start",bt.txwidth=_n,bt.tx2width=Zt,bt.offset=0;var qn,sr,pr=(_n+f+S+Zt)*ie._invScaleX;if(oe)bt.pos=cn,qn=kn+wn/2+pr<=Fe,sr=kn-wn/2-pr>=0,bt.idealAlign!=="top"&&qn||!sr?qn?(kn+=wn/2,bt.anchor="start"):bt.anchor="middle":(kn-=wn/2,bt.anchor="end"),bt.crossPos=kn;else{if(bt.pos=kn,qn=cn+An/2+pr<=Oe,sr=cn-An/2-pr>=0,bt.idealAlign!=="left"&&qn||!sr)if(qn)cn+=An/2,bt.anchor="start";else{bt.anchor="middle";var ir=pr/2,Jn=cn+ir-Oe,mr=cn-ir;Jn>0&&(cn-=Jn),mr<0&&(cn+=-mr)}else cn-=An/2,bt.anchor="end";bt.crossPos=cn}Ln.attr("text-anchor",bt.anchor),Zt&&fn.attr("text-anchor",bt.anchor),Ct.attr("transform",v(cn,kn)+(oe?h(d):""))}),{hoverLabels:Tt,commonLabelBoundingBox:Ye}}function z(X,K,ee,ie,ae,oe){var fe="",ge="";X.nameOverride!==void 0&&(X.name=X.nameOverride),X.name&&(X.trace._meta&&(X.name=_.templateString(X.name,X.trace._meta)),fe=V(X.name,X.nameLength));var ve=ee.charAt(0),xe=ve==="x"?"y":"x";X.zLabel!==void 0?(X.xLabel!==void 0&&(ge+="x: "+X.xLabel+"<br>"),X.yLabel!==void 0&&(ge+="y: "+X.yLabel+"<br>"),X.trace.type!=="choropleth"&&X.trace.type!=="choroplethmapbox"&&(ge+=(ge?"z: ":"")+X.zLabel)):K&&X[ve+"Label"]===ae?ge=X[xe+"Label"]||"":X.xLabel===void 0?X.yLabel!==void 0&&X.trace.type!=="scattercarpet"&&(ge=X.yLabel):ge=X.yLabel===void 0?X.xLabel:"("+X.xLabel+", "+X.yLabel+")",!X.text&&X.text!==0||Array.isArray(X.text)||(ge+=(ge?"<br>":"")+X.text),X.extraText!==void 0&&(ge+=(ge?"<br>":"")+X.extraText),oe&&ge===""&&!X.hovertemplate&&(fe===""&&oe.remove(),ge=fe);var _e=X.hovertemplate||!1;if(_e){var ye=X.hovertemplateLabels||X;X[ve+"Label"]!==ae&&(ye[ve+"other"]=ye[ve+"Val"],ye[ve+"otherLabel"]=ye[ve+"Label"]),ge=(ge=_.hovertemplateString(_e,ye,ie._d3locale,X.eventData[0]||{},X.trace._meta)).replace(P,function(Ce,ke){return fe=V(ke,X.nameLength),""})}return[ge,fe]}function U(X,K){var ee=0,ie=X.offset;return K&&(ie*=-k,ee=X.offset*y),{x:ee,y:ie}}function R(X,K,ee,ie){var ae=function(fe){return fe*ee},oe=function(fe){return fe*ie};X.each(function(fe){var ge=T.select(this);if(fe.del)return ge.remove();var ve,xe,_e,ye,Ce=ge.select("text.nums"),ke=fe.anchor,Te=ke==="end"?-1:1,le=(ye=(_e=(xe={start:1,end:-1,middle:0}[(ve=fe).anchor])*(f+S))+xe*(ve.txwidth+S),ve.anchor==="middle"&&(_e-=ve.tx2width/2,ye+=ve.txwidth/2+S),{alignShift:xe,textShiftX:_e,text2ShiftX:ye}),ue=U(fe,K),de=ue.x,Le=ue.y,we=ke==="middle";ge.select("path").attr("d",we?"M-"+ae(fe.bx/2+fe.tx2width/2)+","+oe(Le-fe.by/2)+"h"+ae(fe.bx)+"v"+oe(fe.by)+"h-"+ae(fe.bx)+"Z":"M0,0L"+ae(Te*f+de)+","+oe(f+Le)+"v"+oe(fe.by/2-f)+"h"+ae(Te*fe.bx)+"v-"+oe(fe.by)+"H"+ae(Te*f+de)+"V"+oe(Le-f)+"Z");var Ee=de+le.textShiftX,Oe=Le+fe.ty0-fe.by/2+S,Fe=fe.textAlign||"auto";Fe!=="auto"&&(Fe==="left"&&ke!=="start"?(Ce.attr("text-anchor","start"),Ee=we?-fe.bx/2-fe.tx2width/2+S:-fe.bx-S):Fe==="right"&&ke!=="end"&&(Ce.attr("text-anchor","end"),Ee=we?fe.bx/2-fe.tx2width/2-S:fe.bx+S)),Ce.call(t.positionText,ae(Ee),oe(Oe)),fe.tx2width&&(ge.select("text.name").call(t.positionText,ae(le.text2ShiftX+le.alignShift*S+de),oe(Le+fe.ty0-fe.by/2+S)),ge.select("rect").call(n.setRect,ae(le.text2ShiftX+(le.alignShift-1)*fe.tx2width/2+de),oe(Le-fe.by/2-1),ae(fe.tx2width),oe(fe.by+2)))})}function j(X,K){var ee=X.index,ie=X.trace||{},ae=X.cd[0],oe=X.cd[ee]||{};function fe(Ce){return Ce||w(Ce)&&Ce===0}var ge=Array.isArray(ee)?function(Ce,ke){var Te=_.castOption(ae,ee,Ce);return fe(Te)?Te:_.extractOption({},ie,"",ke)}:function(Ce,ke){return _.extractOption(oe,ie,Ce,ke)};function ve(Ce,ke,Te){var le=ge(ke,Te);fe(le)&&(X[Ce]=le)}if(ve("hoverinfo","hi","hoverinfo"),ve("bgcolor","hbg","hoverlabel.bgcolor"),ve("borderColor","hbc","hoverlabel.bordercolor"),ve("fontFamily","htf","hoverlabel.font.family"),ve("fontSize","hts","hoverlabel.font.size"),ve("fontColor","htc","hoverlabel.font.color"),ve("nameLength","hnl","hoverlabel.namelength"),ve("textAlign","hta","hoverlabel.align"),X.posref=K==="y"||K==="closest"&&ie.orientation==="h"?X.xa._offset+(X.x0+X.x1)/2:X.ya._offset+(X.y0+X.y1)/2,X.x0=_.constrain(X.x0,0,X.xa._length),X.x1=_.constrain(X.x1,0,X.xa._length),X.y0=_.constrain(X.y0,0,X.ya._length),X.y1=_.constrain(X.y1,0,X.ya._length),X.xLabelVal!==void 0&&(X.xLabel="xLabel"in X?X.xLabel:o.hoverLabelText(X.xa,X.xLabelVal,ie.xhoverformat),X.xVal=X.xa.c2d(X.xLabelVal)),X.yLabelVal!==void 0&&(X.yLabel="yLabel"in X?X.yLabel:o.hoverLabelText(X.ya,X.yLabelVal,ie.yhoverformat),X.yVal=X.ya.c2d(X.yLabelVal)),X.zLabelVal!==void 0&&X.zLabel===void 0&&(X.zLabel=String(X.zLabelVal)),!(isNaN(X.xerr)||X.xa.type==="log"&&X.xerr<=0)){var xe=o.tickText(X.xa,X.xa.c2l(X.xerr),"hover").text;X.xerrneg!==void 0?X.xLabel+=" +"+xe+" / -"+o.tickText(X.xa,X.xa.c2l(X.xerrneg),"hover").text:X.xLabel+="  "+xe,K==="x"&&(X.distance+=1)}if(!(isNaN(X.yerr)||X.ya.type==="log"&&X.yerr<=0)){var _e=o.tickText(X.ya,X.ya.c2l(X.yerr),"hover").text;X.yerrneg!==void 0?X.yLabel+=" +"+_e+" / -"+o.tickText(X.ya,X.ya.c2l(X.yerrneg),"hover").text:X.yLabel+="  "+_e,K==="y"&&(X.distance+=1)}var ye=X.hoverinfo||X.trace.hoverinfo;return ye&&ye!=="all"&&((ye=Array.isArray(ye)?ye:ye.split("+")).indexOf("x")===-1&&(X.xLabel=void 0),ye.indexOf("y")===-1&&(X.yLabel=void 0),ye.indexOf("z")===-1&&(X.zLabel=void 0),ye.indexOf("text")===-1&&(X.text=void 0),ye.indexOf("name")===-1&&(X.name=void 0)),X}function Z(X,K,ee){var ie,ae,oe=ee.container,fe=ee.fullLayout,ge=fe._size,ve=ee.event,xe=!!K.hLinePoint,_e=!!K.vLinePoint;if(oe.selectAll(".spikeline").remove(),_e||xe){var ye=r.combine(fe.plot_bgcolor,fe.paper_bgcolor);if(xe){var Ce,ke,Te=K.hLinePoint;ie=Te&&Te.xa,(ae=Te&&Te.ya).spikesnap==="cursor"?(Ce=ve.pointerX,ke=ve.pointerY):(Ce=ie._offset+Te.x,ke=ae._offset+Te.y);var le,ue,de=i.readability(Te.color,ye)<1.5?r.contrast(ye):Te.color,Le=ae.spikemode,we=ae.spikethickness,Ee=ae.spikecolor||de,Oe=o.getPxPosition(X,ae);if(Le.indexOf("toaxis")!==-1||Le.indexOf("across")!==-1){if(Le.indexOf("toaxis")!==-1&&(le=Oe,ue=Ce),Le.indexOf("across")!==-1){var Fe=ae._counterDomainMin,pe=ae._counterDomainMax;ae.anchor==="free"&&(Fe=Math.min(Fe,ae.position),pe=Math.max(pe,ae.position)),le=ge.l+Fe*ge.w,ue=ge.l+pe*ge.w}oe.insert("line",":first-child").attr({x1:le,x2:ue,y1:ke,y2:ke,"stroke-width":we,stroke:Ee,"stroke-dasharray":n.dashStyle(ae.spikedash,we)}).classed("spikeline",!0).classed("crisp",!0),oe.insert("line",":first-child").attr({x1:le,x2:ue,y1:ke,y2:ke,"stroke-width":we+2,stroke:ye}).classed("spikeline",!0).classed("crisp",!0)}Le.indexOf("marker")!==-1&&oe.insert("circle",":first-child").attr({cx:Oe+(ae.side!=="right"?we:-we),cy:ke,r:we,fill:Ee}).classed("spikeline",!0)}if(_e){var be,Me,De=K.vLinePoint;ie=De&&De.xa,ae=De&&De.ya,ie.spikesnap==="cursor"?(be=ve.pointerX,Me=ve.pointerY):(be=ie._offset+De.x,Me=ae._offset+De.y);var Ne,Be,Ye=i.readability(De.color,ye)<1.5?r.contrast(ye):De.color,We=ie.spikemode,et=ie.spikethickness,ft=ie.spikecolor||Ye,ht=o.getPxPosition(X,ie);if(We.indexOf("toaxis")!==-1||We.indexOf("across")!==-1){if(We.indexOf("toaxis")!==-1&&(Ne=ht,Be=Me),We.indexOf("across")!==-1){var mt=ie._counterDomainMin,Mt=ie._counterDomainMax;ie.anchor==="free"&&(mt=Math.min(mt,ie.position),Mt=Math.max(Mt,ie.position)),Ne=ge.t+(1-Mt)*ge.h,Be=ge.t+(1-mt)*ge.h}oe.insert("line",":first-child").attr({x1:be,x2:be,y1:Ne,y2:Be,"stroke-width":et,stroke:ft,"stroke-dasharray":n.dashStyle(ie.spikedash,et)}).classed("spikeline",!0).classed("crisp",!0),oe.insert("line",":first-child").attr({x1:be,x2:be,y1:Ne,y2:Be,"stroke-width":et+2,stroke:ye}).classed("spikeline",!0).classed("crisp",!0)}We.indexOf("marker")!==-1&&oe.insert("circle",":first-child").attr({cx:be,cy:ht-(ie.side!=="top"?et:-et),r:et,fill:ft}).classed("spikeline",!0)}}}function F(X,K){return!K||K.vLinePoint!==X._spikepoints.vLinePoint||K.hLinePoint!==X._spikepoints.hLinePoint}function V(X,K){return t.plainText(X||"",{len:K,allowedTags:["br","sub","sup","b","i","em"]})}function H(X,K,ee){var ie=K[X+"a"],ae=K[X+"Val"],oe=K.cd[0];if(ie.type==="category"||ie.type==="multicategory")ae=ie._categoriesMap[ae];else if(ie.type==="date"){var fe=K.trace[X+"periodalignment"];if(fe){var ge=K.cd[K.index],ve=ge[X+"Start"];ve===void 0&&(ve=ge[X]);var xe=ge[X+"End"];xe===void 0&&(xe=ge[X]);var _e=xe-ve;fe==="end"?ae+=_e:fe==="middle"&&(ae+=_e/2)}ae=ie.d2c(ae)}return oe&&oe.t&&oe.t.posLetter===ie._id&&(ee.boxmode!=="group"&&ee.violinmode!=="group"||(ae+=oe.t.dPos)),ae}function te(X){return X.offsetTop+X.clientTop}function $(X){return X.offsetLeft+X.clientLeft}function J(X,K){var ee=X._fullLayout,ie=K.getBoundingClientRect(),ae=ie.left,oe=ie.top,fe=ae+ie.width,ge=oe+ie.height,ve=_.apply3DTransform(ee._invTransform)(ae,oe),xe=_.apply3DTransform(ee._invTransform)(fe,ge),_e=ve[0],ye=ve[1],Ce=xe[0],ke=xe[1];return{x:_e,y:ye,width:Ce-_e,height:ke-ye,top:Math.min(ye,ke),left:Math.min(_e,Ce),right:Math.max(_e,Ce),bottom:Math.max(ye,ke)}}},38048:function(N,L,e){var T=e(71828),w=e(7901),i=e(23469).isUnifiedHover;N.exports=function(_,v,h,s){s=s||{};var t=v.legend;function a(n){s.font[n]||(s.font[n]=t?v.legend.font[n]:v.font[n])}v&&i(v.hovermode)&&(s.font||(s.font={}),a("size"),a("family"),a("color"),t?(s.bgcolor||(s.bgcolor=w.combine(v.legend.bgcolor,v.paper_bgcolor)),s.bordercolor||(s.bordercolor=v.legend.bordercolor)):s.bgcolor||(s.bgcolor=v.paper_bgcolor)),h("hoverlabel.bgcolor",s.bgcolor),h("hoverlabel.bordercolor",s.bordercolor),h("hoverlabel.namelength",s.namelength),T.coerceFont(h,"hoverlabel.font",s.font),h("hoverlabel.align",s.align)}},98212:function(N,L,e){var T=e(71828),w=e(528);N.exports=function(i,_){function v(h,s){return _[h]!==void 0?_[h]:T.coerce(i,_,w,h,s)}return v("clickmode"),v("hovermode")}},30211:function(N,L,e){var T=e(39898),w=e(71828),i=e(28569),_=e(23469),v=e(528),h=e(88335);N.exports={moduleType:"component",name:"fx",constants:e(26675),schema:{layout:v},attributes:e(77914),layoutAttributes:v,supplyLayoutGlobalDefaults:e(22774),supplyDefaults:e(54268),supplyLayoutDefaults:e(34938),calc:e(30732),getDistanceFunction:_.getDistanceFunction,getClosest:_.getClosest,inbox:_.inbox,quadrature:_.quadrature,appendArrayPointValue:_.appendArrayPointValue,castHoverOption:function(s,t,a){return w.castOption(s,t,"hoverlabel."+a)},castHoverinfo:function(s,t,a){return w.castOption(s,a,"hoverinfo",function(n){return w.coerceHoverinfo({hoverinfo:n},{_module:s._module},t)})},hover:h.hover,unhover:i.unhover,loneHover:h.loneHover,loneUnhover:function(s){var t=w.isD3Selection(s)?s:T.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(75914)}},528:function(N,L,e){var T=e(26675),w=e(41940),i=w({editType:"none"});i.family.dflt=T.HOVERFONT,i.size.dflt=T.HOVERFONTSIZE,N.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:i,grouptitlefont:w({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(N,L,e){var T=e(71828),w=e(528),i=e(98212),_=e(38048);N.exports=function(v,h){function s(r,l){return T.coerce(v,h,w,r,l)}i(v,h)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=h._has("mapbox"),a=h._has("geo"),n=h._basePlotModules.length;h.dragmode==="zoom"&&((t||a)&&n===1||t&&a&&n===2)&&(h.dragmode="pan"),_(v,h,s),T.coerceFont(s,"hoverlabel.grouptitlefont",h.hoverlabel.font)}},22774:function(N,L,e){var T=e(71828),w=e(38048),i=e(528);N.exports=function(_,v){w(_,v,function(h,s){return T.coerce(_,v,i,h,s)})}},83312:function(N,L,e){var T=e(71828),w=e(30587).counter,i=e(27670).Y,_=e(85555).idRegex,v=e(44467),h={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[w("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(n,r,l){var o=r[l+"axes"],u=Object.keys((n._splomAxes||{})[l]||{});return Array.isArray(o)?o:u.length?u:void 0}function t(n,r,l,o,u,p){var c=r(n+"gap",l),b=r("domain."+n);r(n+"side",o);for(var g=new Array(u),d=b[0],m=(b[1]-d)/(u-c),x=m*(1-c),y=0;y<u;y++){var k=d+m*y;g[p?u-1-y:y]=[k,k+x]}return g}function a(n,r,l,o,u){var p,c=new Array(l);function b(g,d){r.indexOf(d)!==-1&&o[d]===void 0?(c[g]=d,o[d]=g):c[g]=""}if(Array.isArray(n))for(p=0;p<l;p++)b(p,n[p]);else for(b(0,u),p=1;p<l;p++)b(p,u+(p+1));return c}N.exports={moduleType:"component",name:"grid",schema:{layout:{grid:h}},layoutAttributes:h,sizeDefaults:function(n,r){var l=n.grid||{},o=s(r,l,"x"),u=s(r,l,"y");if(n.grid||o||u){var p,c,b=Array.isArray(l.subplots)&&Array.isArray(l.subplots[0]),g=Array.isArray(o),d=Array.isArray(u),m=g&&o!==l.xaxes&&d&&u!==l.yaxes;b?(p=l.subplots.length,c=l.subplots[0].length):(d&&(p=u.length),g&&(c=o.length));var x=v.newContainer(r,"grid"),y=P("rows",p),k=P("columns",c);if(y*k>1){b||g||d||P("pattern")==="independent"&&(b=!0),x._hasSubplotGrid=b;var f,S,M=P("roworder")==="top to bottom",E=b?.2:.1,O=b?.3:.1;m&&r._splomGridDflt&&(f=r._splomGridDflt.xside,S=r._splomGridDflt.yside),x._domains={x:t("x",P,E,f,k),y:t("y",P,O,S,y,M)}}else delete r.grid}function P(I,z){return T.coerce(l,x,h,I,z)}},contentDefaults:function(n,r){var l=r.grid;if(l&&l._domains){var o,u,p,c,b,g,d,m=n.grid||{},x=r._subplots,y=l._hasSubplotGrid,k=l.rows,f=l.columns,S=l.pattern==="independent",M=l._axisMap={};if(y){var E=m.subplots||[];g=l.subplots=new Array(k);var O=1;for(o=0;o<k;o++){var P=g[o]=new Array(f),I=E[o]||[];for(u=0;u<f;u++)if(S?(b=O===1?"xy":"x"+O+"y"+O,O++):b=I[u],P[u]="",x.cartesian.indexOf(b)!==-1){if(d=b.indexOf("y"),p=b.slice(0,d),c=b.slice(d),M[p]!==void 0&&M[p]!==u||M[c]!==void 0&&M[c]!==o)continue;P[u]=b,M[p]=u,M[c]=o}}}else{var z=s(r,m,"x"),U=s(r,m,"y");l.xaxes=a(z,x.xaxis,f,M,"x"),l.yaxes=a(U,x.yaxis,k,M,"y")}var R=l._anchors={},j=l.roworder==="top to bottom";for(var Z in M){var F,V,H,te=Z.charAt(0),$=l[te+"side"];if($.length<8)R[Z]="free";else if(te==="x"){if($.charAt(0)==="t"===j?(F=0,V=1,H=k):(F=k-1,V=-1,H=-1),y){var J=M[Z];for(o=F;o!==H;o+=V)if((b=g[o][J])&&(d=b.indexOf("y"),b.slice(0,d)===Z)){R[Z]=b.slice(d);break}}else for(o=F;o!==H;o+=V)if(c=l.yaxes[o],x.cartesian.indexOf(Z+c)!==-1){R[Z]=c;break}}else if($.charAt(0)==="l"?(F=0,V=1,H=f):(F=f-1,V=-1,H=-1),y){var X=M[Z];for(o=F;o!==H;o+=V)if((b=g[X][o])&&(d=b.indexOf("y"),b.slice(d)===Z)){R[Z]=b.slice(0,d);break}}else for(o=F;o!==H;o+=V)if(p=l.xaxes[o],x.cartesian.indexOf(p+Z)!==-1){R[Z]=p;break}}}}}},69819:function(N,L,e){var T=e(85555),w=e(44467).templatedArray;e(24695),N.exports=w("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",T.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",T.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(N,L,e){var T=e(92770),w=e(58163);N.exports=function(i,_,v,h){_=_||{};var s=v==="log"&&_.type==="linear",t=v==="linear"&&_.type==="log";if(s||t){for(var a,n,r=i._fullLayout.images,l=_._id.charAt(0),o=0;o<r.length;o++)if(n="images["+o+"].",(a=r[o])[l+"ref"]===_._id){var u=a[l],p=a["size"+l],c=null,b=null;if(s){c=w(u,_.range);var g=p/Math.pow(10,c)/2;b=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else b=(c=Math.pow(10,u))*(Math.pow(10,p/2)-Math.pow(10,-p/2));T(c)?T(b)||(b=null):(c=null,b=null),h(n+l,c),h(n+"size"+l,b)}}}},81603:function(N,L,e){var T=e(71828),w=e(89298),i=e(85501),_=e(69819);function v(h,s,t){function a(c,b){return T.coerce(h,s,_,c,b)}var n=a("source");if(!a("visible",!!n))return s;a("layer"),a("xanchor"),a("yanchor"),a("sizex"),a("sizey"),a("sizing"),a("opacity");for(var r={_fullLayout:t},l=["x","y"],o=0;o<2;o++){var u=l[o],p=w.coerceRef(h,s,r,u,"paper",void 0);p!=="paper"&&w.getFromId(r,p)._imgIndices.push(s._index),w.coercePosition(s,r,a,p,u,0)}return s}N.exports=function(h,s){i(h,s,{name:"images",handleItemDefaults:v})}},80750:function(N,L,e){var T=e(39898),w=e(91424),i=e(89298),_=e(41675),v=e(77922);N.exports=function(h){var s,t,a=h._fullLayout,n=[],r={},l=[];for(t=0;t<a.images.length;t++){var o=a.images[t];if(o.visible)if(o.layer==="below"&&o.xref!=="paper"&&o.yref!=="paper"){s=_.ref2id(o.xref)+_.ref2id(o.yref);var u=a._plots[s];if(!u){l.push(o);continue}u.mainplot&&(s=u.mainplot.id),r[s]||(r[s]=[]),r[s].push(o)}else o.layer==="above"?n.push(o):l.push(o)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function b(f){var S=T.select(this);if(this._imgSrc!==f.source)if(S.attr("xmlns",v.svg),f.source&&f.source.slice(0,5)==="data:")S.attr("xlink:href",f.source),this._imgSrc=f.source;else{var M=new Promise((function(E){var O=new Image;function P(){S.remove(),E()}this.img=O,O.setAttribute("crossOrigin","anonymous"),O.onerror=P,O.onload=function(){var I=document.createElement("canvas");I.width=this.width,I.height=this.height,I.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=I.toDataURL("image/png");S.attr("xlink:href",z),E()},S.on("error",P),O.src=f.source,this._imgSrc=f.source}).bind(this));h._promises.push(M)}}function g(f){var S,M,E=T.select(this),O=i.getFromId(h,f.xref),P=i.getFromId(h,f.yref),I=i.getRefType(f.xref)==="domain",z=i.getRefType(f.yref)==="domain",U=a._size;S=O!==void 0?typeof f.xref=="string"&&I?O._length*f.sizex:Math.abs(O.l2p(f.sizex)-O.l2p(0)):f.sizex*U.w,M=P!==void 0?typeof f.yref=="string"&&z?P._length*f.sizey:Math.abs(P.l2p(f.sizey)-P.l2p(0)):f.sizey*U.h;var R,j,Z=S*p[f.xanchor].offset,F=M*c[f.yanchor].offset,V=p[f.xanchor].sizing+c[f.yanchor].sizing;switch(R=O!==void 0?typeof f.xref=="string"&&I?O._length*f.x+O._offset:O.r2p(f.x)+O._offset:f.x*U.w+U.l,R+=Z,j=P!==void 0?typeof f.yref=="string"&&z?P._length*(1-f.y)+P._offset:P.r2p(f.y)+P._offset:U.h-f.y*U.h+U.t,j+=F,f.sizing){case"fill":V+=" slice";break;case"stretch":V="none"}E.attr({x:R,y:j,width:S,height:M,preserveAspectRatio:V,opacity:f.opacity});var H=(O&&i.getRefType(f.xref)!=="domain"?O._id:"")+(P&&i.getRefType(f.yref)!=="domain"?P._id:"");w.setClipUrl(E,H?"clip"+a._uid+H:null,h)}var d=a._imageLowerLayer.selectAll("image").data(l),m=a._imageUpperLayer.selectAll("image").data(n);d.enter().append("image"),m.enter().append("image"),d.exit().remove(),m.exit().remove(),d.each(function(f){b.bind(this)(f),g.bind(this)(f)}),m.each(function(f){b.bind(this)(f),g.bind(this)(f)});var x=Object.keys(a._plots);for(t=0;t<x.length;t++){s=x[t];var y=a._plots[s];if(y.imagelayer){var k=y.imagelayer.selectAll("image").data(r[s]||[]);k.enter().append("image"),k.exit().remove(),k.each(function(f){b.bind(this)(f),g.bind(this)(f)})}}}},68804:function(N,L,e){N.exports={moduleType:"component",name:"images",layoutAttributes:e(69819),supplyLayoutDefaults:e(81603),includeBasePlot:e(76325)("images"),draw:e(80750),convertCoords:e(75378)}},33030:function(N,L,e){var T=e(41940),w=e(22399);N.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:w.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:T({editType:"legend"}),grouptitlefont:T({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:T({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(N){N.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(N,L,e){var T=e(73972),w=e(71828),i=e(44467),_=e(9012),v=e(33030),h=e(10820),s=e(10130);function t(a,n,r,l){var o=n[a]||{},u=i.newContainer(r,a);function p(V,H){return w.coerce(o,u,v,V,H)}var c=w.coerceFont(p,"font",r.font);if(p("bgcolor",r.paper_bgcolor),p("bordercolor"),p("visible")){for(var b,g=function(V,H){var te=b._input,$=b;return w.coerce(te,$,_,V,H)},d=r.font||{},m=w.coerceFont(p,"grouptitlefont",w.extendFlat({},d,{size:Math.round(1.1*d.size)})),x=0,y=!1,k="normal",f=(r.shapes||[]).filter(function(V){return V.showlegend}),S=l.concat(f).filter(function(V){return a===(V.legend||"legend")}),M=0;M<S.length;M++)if((b=S[M]).visible){var E=b._isShape;(b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&b._module.attributes.showlegend.dflt===!1))&&(x++,b.showlegend&&(y=!0,(!E&&T.traceIs(b,"pie-like")||b._input.showlegend===!0)&&x++),w.coerceFont(g,"legendgrouptitle.font",m)),(!E&&T.traceIs(b,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(k=s.isGrouped({traceorder:k})?"grouped+reversed":"reversed"),b.legendgroup!==void 0&&b.legendgroup!==""&&(k=s.isReversed({traceorder:k})?"reversed+grouped":"grouped")}var O=w.coerce(n,r,h,"showlegend",y&&x>(a==="legend"?1:0));if(O===!1&&(r[a]=void 0),(O!==!1||o.uirevision)&&(p("uirevision",r.uirevision),O!==!1)){p("borderwidth");var P,I,z,U=p("orientation")==="h",R=p("yref")==="paper",j=p("xref")==="paper",Z="left";if(U?(P=0,T.getComponentMethod("rangeslider","isVisible")(n.xaxis)?R?(I=1.1,z="bottom"):(I=1,z="top"):R?(I=-.1,z="top"):(I=0,z="bottom")):(I=1,z="auto",j?P=1.02:(P=1,Z="right")),w.coerce(o,u,{x:{valType:"number",editType:"legend",min:j?-2:0,max:j?3:1,dflt:P}},"x"),w.coerce(o,u,{y:{valType:"number",editType:"legend",min:R?-2:0,max:R?3:1,dflt:I}},"y"),p("traceorder",k),s.isGrouped(r[a])&&p("tracegroupgap"),p("entrywidth"),p("entrywidthmode"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("xanchor",Z),p("yanchor",z),p("valign"),w.noneOrAll(o,u,["x","y"]),p("title.text")){p("title.side",U?"left":"top");var F=w.extendFlat({},c,{size:w.bigFont(c.size)});w.coerceFont(p,"title.font",F)}}}}N.exports=function(a,n,r){var l,o=r.slice(),u=n.shapes;if(u)for(l=0;l<u.length;l++){var p=u[l];if(p.showlegend){var c={_input:p._input,visible:p.visible,showlegend:p.showlegend,legend:p.legend};o.push(c)}}var b=["legend"];for(l=0;l<o.length;l++)w.pushUnique(b,o[l].legend);for(n._legends=[],l=0;l<b.length;l++){var g=b[l];t(g,a,n,o),n[g]&&n[g].visible&&(n[g]._id=g),n._legends.push(g)}}},43969:function(N,L,e){var T=e(39898),w=e(71828),i=e(74875),_=e(73972),v=e(11086),h=e(28569),s=e(91424),t=e(7901),a=e(63893),n=e(85167),r=e(14928),l=e(18783),o=l.LINE_SPACING,u=l.FROM_TL,p=l.FROM_BR,c=e(82424),b=e(53630),g=e(10130),d=1,m=/^legend[0-9]*$/;function x(z,U){var R,j,Z=U||{},F=z._fullLayout,V=I(Z),H=Z._inHover;if(H?(j=Z.layer,R="hover"):(j=F._infolayer,R=V),j){var te;if(R+=F._uid,z._legendMouseDownTime||(z._legendMouseDownTime=0),H){if(!Z.entries)return;te=c(Z.entries,Z)}else{for(var $=(z.calcdata||[]).slice(),J=F.shapes,X=0;X<J.length;X++){var K=J[X];if(K.showlegend){var ee={_isShape:!0,_fullInput:K,index:K._index,name:K.name||K.label.text||"shape "+K._index,legend:K.legend,legendgroup:K.legendgroup,legendgrouptitle:K.legendgrouptitle,legendrank:K.legendrank,legendwidth:K.legendwidth,showlegend:K.showlegend,visible:K.visible,opacity:K.opacity,mode:K.type==="line"?"lines":"markers",line:K.line,marker:{line:K.line,color:K.fillcolor,size:12,symbol:K.type==="rect"?"square":K.type==="circle"?"circle":"hexagon2"}};$.push([{trace:ee}])}}te=F.showlegend&&c($,Z,F._legends.length>1)}var ie=F.hiddenlabels||[];if(!(H||F.showlegend&&te.length))return j.selectAll("."+V).remove(),F._topdefs.select("#"+R).remove(),i.autoMargin(z,V);var ae=w.ensureSingle(j,"g",V,function(ke){H||ke.attr("pointer-events","all")}),oe=w.ensureSingleById(F._topdefs,"clipPath",R,function(ke){ke.append("rect")}),fe=w.ensureSingle(ae,"rect","bg",function(ke){ke.attr("shape-rendering","crispEdges")});fe.call(t.stroke,Z.bordercolor).call(t.fill,Z.bgcolor).style("stroke-width",Z.borderwidth+"px");var ge,ve=w.ensureSingle(ae,"g","scrollbox"),xe=Z.title;Z._titleWidth=0,Z._titleHeight=0,xe.text?((ge=w.ensureSingle(ve,"text",V+"titletext")).attr("text-anchor","start").call(s.font,xe.font).text(xe.text),E(ge,ve,z,Z,d)):ve.selectAll("."+V+"titletext").remove();var _e=w.ensureSingle(ae,"rect","scrollbar",function(ke){ke.attr(r.scrollBarEnterAttrs).call(t.fill,r.scrollBarColor)}),ye=ve.selectAll("g.groups").data(te);ye.enter().append("g").attr("class","groups"),ye.exit().remove();var Ce=ye.selectAll("g.traces").data(w.identity);Ce.enter().append("g").attr("class","traces"),Ce.exit().remove(),Ce.style("opacity",function(ke){var Te=ke[0].trace;return _.traceIs(Te,"pie-like")?ie.indexOf(ke[0].label)!==-1?.5:1:Te.visible==="legendonly"?.5:1}).each(function(){T.select(this).call(f,z,Z)}).call(b,z,Z).each(function(){H||T.select(this).call(M,z,V)}),w.syncOrAsync([i.previousPromises,function(){return function(ke,Te,le,ue){var de=ke._fullLayout,Le=I(ue);ue||(ue=de[Le]);var we=de._size,Ee=g.isVertical(ue),Oe=g.isGrouped(ue),Fe=ue.entrywidthmode==="fraction",pe=ue.borderwidth,be=2*pe,Me=r.itemGap,De=ue.itemwidth+2*Me,Ne=2*(pe+Me),Be=P(ue),Ye=ue.y<0||ue.y===0&&Be==="top",We=ue.y>1||ue.y===1&&Be==="bottom",et=ue.tracegroupgap,ft={};ue._maxHeight=Math.max(Ye||We?de.height/2:we.h,30);var ht=0;ue._width=0,ue._height=0;var mt=function(yt){var xt=0,dt=0,Lt=yt.title.side;return Lt&&(Lt.indexOf("left")!==-1&&(xt=yt._titleWidth),Lt.indexOf("top")!==-1&&(dt=yt._titleHeight)),[xt,dt]}(ue);if(Ee)le.each(function(yt){var xt=yt[0].height;s.setTranslate(this,pe+mt[0],pe+mt[1]+ue._height+xt/2+Me),ue._height+=xt,ue._width=Math.max(ue._width,yt[0].width)}),ht=De+ue._width,ue._width+=Me+De+be,ue._height+=Ne,Oe&&(Te.each(function(yt,xt){s.setTranslate(this,0,xt*ue.tracegroupgap)}),ue._height+=(ue._lgroupsLength-1)*ue.tracegroupgap);else{var Mt=O(ue),_t=ue.x<0||ue.x===0&&Mt==="right",it=ue.x>1||ue.x===1&&Mt==="left",st=We||Ye,St=de.width/2;ue._maxWidth=Math.max(_t?st&&Mt==="left"?we.l+we.w:St:it?st&&Mt==="right"?we.r+we.w:St:we.w,2*De);var zt=0,Ft=0;le.each(function(yt){var xt=y(yt,ue,De);zt=Math.max(zt,xt),Ft+=xt}),ht=null;var Pt=0;if(Oe){var Xe=0,Ke=0,He=0;Te.each(function(){var yt=0,xt=0;T.select(this).selectAll("g.traces").each(function(Lt){var Tt=y(Lt,ue,De),bt=Lt[0].height;s.setTranslate(this,mt[0],mt[1]+pe+Me+bt/2+xt),xt+=bt,yt=Math.max(yt,Tt),ft[Lt[0].trace.legendgroup]=yt});var dt=yt+Me;Ke>0&&dt+pe+Ke>ue._maxWidth?(Pt=Math.max(Pt,Ke),Ke=0,He+=Xe+et,Xe=xt):Xe=Math.max(Xe,xt),s.setTranslate(this,Ke,He),Ke+=dt}),ue._width=Math.max(Pt,Ke)+pe,ue._height=He+Xe+Ne}else{var Je=le.size(),lt=Ft+be+(Je-1)*Me<ue._maxWidth,ot=0,je=0,Ue=0,at=0;le.each(function(yt){var xt=yt[0].height,dt=y(yt,ue,De),Lt=lt?dt:zt;Fe||(Lt+=Me),Lt+pe+je-Me>=ue._maxWidth&&(Pt=Math.max(Pt,at),je=0,Ue+=ot,ue._height+=ot,ot=0),s.setTranslate(this,mt[0]+pe+je,mt[1]+pe+Ue+xt/2+Me),at=je+dt+Me,je+=Lt,ot=Math.max(ot,xt)}),lt?(ue._width=je+be,ue._height=ot+Ne):(ue._width=Math.max(Pt,at)+be,ue._height+=ot+Ne)}}ue._width=Math.ceil(Math.max(ue._width+mt[0],ue._titleWidth+2*(pe+r.titlePad))),ue._height=Math.ceil(Math.max(ue._height+mt[1],ue._titleHeight+2*(pe+r.itemGap))),ue._effHeight=Math.min(ue._height,ue._maxHeight);var $e=ke._context.edits,gt=$e.legendText||$e.legendPosition;le.each(function(yt){var xt=T.select(this).select("."+Le+"toggle"),dt=yt[0].height,Lt=yt[0].trace.legendgroup,Tt=y(yt,ue,De);Oe&&Lt!==""&&(Tt=ft[Lt]);var bt=gt?De:ht||Tt;Ee||Fe||(bt+=Me/2),s.setRect(xt,0,-dt/2,bt,dt)})}(z,ye,Ce,Z)},function(){var ke,Te,le,ue,de=F._size,Le=Z.borderwidth,we=Z.xref==="paper",Ee=Z.yref==="paper";if(xe.text&&function(st,St,zt){if(St.title.side==="top center"||St.title.side==="top right"){var Ft=St.title.font.size*o,Pt=0,Xe=st.node(),Ke=s.bBox(Xe).width;St.title.side==="top center"?Pt=.5*(St._width-2*zt-2*r.titlePad-Ke):St.title.side==="top right"&&(Pt=St._width-2*zt-2*r.titlePad-Ke),a.positionText(st,zt+r.titlePad+Pt,zt+Ft)}}(ge,Z,Le),!H){var Oe,Fe;Oe=we?de.l+de.w*Z.x-u[O(Z)]*Z._width:F.width*Z.x-u[O(Z)]*Z._width,Fe=Ee?de.t+de.h*(1-Z.y)-u[P(Z)]*Z._effHeight:F.height*(1-Z.y)-u[P(Z)]*Z._effHeight;var pe=function(st,St,zt,Ft){var Pt=st._fullLayout,Xe=Pt[St],Ke=O(Xe),He=P(Xe),Je=Xe.xref==="paper",lt=Xe.yref==="paper";st._fullLayout._reservedMargin[St]={};var ot=Xe.y<.5?"b":"t",je=Xe.x<.5?"l":"r",Ue={r:Pt.width-zt,l:zt+Xe._width,b:Pt.height-Ft,t:Ft+Xe._effHeight};if(Je&&lt)return i.autoMargin(st,St,{x:Xe.x,y:Xe.y,l:Xe._width*u[Ke],r:Xe._width*p[Ke],b:Xe._effHeight*p[He],t:Xe._effHeight*u[He]});Je?st._fullLayout._reservedMargin[St][ot]=Ue[ot]:lt||Xe.orientation==="v"?st._fullLayout._reservedMargin[St][je]=Ue[je]:st._fullLayout._reservedMargin[St][ot]=Ue[ot]}(z,V,Oe,Fe);if(pe)return;if(F.margin.autoexpand){var be=Oe,Me=Fe;Oe=we?w.constrain(Oe,0,F.width-Z._width):be,Fe=Ee?w.constrain(Fe,0,F.height-Z._effHeight):Me,Oe!==be&&w.log("Constrain "+V+".x to make legend fit inside graph"),Fe!==Me&&w.log("Constrain "+V+".y to make legend fit inside graph")}s.setTranslate(ae,Oe,Fe)}if(_e.on(".drag",null),ae.on("wheel",null),H||Z._height<=Z._maxHeight||z._context.staticPlot){var De=Z._effHeight;H&&(De=Z._height),fe.attr({width:Z._width-Le,height:De-Le,x:Le/2,y:Le/2}),s.setTranslate(ve,0,0),oe.select("rect").attr({width:Z._width-2*Le,height:De-2*Le,x:Le,y:Le}),s.setClipUrl(ve,R,z),s.setRect(_e,0,0,0,0),delete Z._scrollY}else{var Ne,Be,Ye,We=Math.max(r.scrollBarMinHeight,Z._effHeight*Z._effHeight/Z._height),et=Z._effHeight-We-2*r.scrollBarMargin,ft=Z._height-Z._effHeight,ht=et/ft,mt=Math.min(Z._scrollY||0,ft);fe.attr({width:Z._width-2*Le+r.scrollBarWidth+r.scrollBarMargin,height:Z._effHeight-Le,x:Le/2,y:Le/2}),oe.select("rect").attr({width:Z._width-2*Le+r.scrollBarWidth+r.scrollBarMargin,height:Z._effHeight-2*Le,x:Le,y:Le+mt}),s.setClipUrl(ve,R,z),it(mt,We,ht),ae.on("wheel",function(){it(mt=w.constrain(Z._scrollY+T.event.deltaY/et*ft,0,ft),We,ht),mt!==0&&mt!==ft&&T.event.preventDefault()});var Mt=T.behavior.drag().on("dragstart",function(){var st=T.event.sourceEvent;Ne=st.type==="touchstart"?st.changedTouches[0].clientY:st.clientY,Ye=mt}).on("drag",function(){var st=T.event.sourceEvent;st.buttons===2||st.ctrlKey||(Be=st.type==="touchmove"?st.changedTouches[0].clientY:st.clientY,mt=function(St,zt,Ft){var Pt=(Ft-zt)/ht+St;return w.constrain(Pt,0,ft)}(Ye,Ne,Be),it(mt,We,ht))});_e.call(Mt);var _t=T.behavior.drag().on("dragstart",function(){var st=T.event.sourceEvent;st.type==="touchstart"&&(Ne=st.changedTouches[0].clientY,Ye=mt)}).on("drag",function(){var st=T.event.sourceEvent;st.type==="touchmove"&&(Be=st.changedTouches[0].clientY,mt=function(St,zt,Ft){var Pt=(zt-Ft)/ht+St;return w.constrain(Pt,0,ft)}(Ye,Ne,Be),it(mt,We,ht))});ve.call(_t)}function it(st,St,zt){Z._scrollY=z._fullLayout[V]._scrollY=st,s.setTranslate(ve,0,-st),s.setRect(_e,Z._width,r.scrollBarMargin+st*zt,r.scrollBarWidth,St),oe.select("rect").attr("y",Le+st)}z._context.edits.legendPosition&&(ae.classed("cursor-move",!0),h.init({element:ae.node(),gd:z,prepFn:function(){var st=s.getTranslate(ae);le=st.x,ue=st.y},moveFn:function(st,St){var zt=le+st,Ft=ue+St;s.setTranslate(ae,zt,Ft),ke=h.align(zt,Z._width,de.l,de.l+de.w,Z.xanchor),Te=h.align(Ft+Z._height,-Z._height,de.t+de.h,de.t,Z.yanchor)},doneFn:function(){if(ke!==void 0&&Te!==void 0){var st={};st[V+".x"]=ke,st[V+".y"]=Te,_.call("_guiRelayout",z,st)}},clickFn:function(st,St){var zt=j.selectAll("g.traces").filter(function(){var Ft=this.getBoundingClientRect();return St.clientX>=Ft.left&&St.clientX<=Ft.right&&St.clientY>=Ft.top&&St.clientY<=Ft.bottom});zt.size()>0&&k(z,ae,zt,st,St)}}))}],z)}}function y(z,U,R){var j=z[0],Z=j.width,F=U.entrywidthmode,V=j.trace.legendwidth||U.entrywidth;return F==="fraction"?U._maxWidth*V:R+(V||Z)}function k(z,U,R,j,Z){var F=R.data()[0][0].trace,V={event:Z,node:R.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:z.data,layout:z.layout,frames:z._transitionData._frames,config:z._context,fullData:z._fullData,fullLayout:z._fullLayout};F._group&&(V.group=F._group),_.traceIs(F,"pie-like")&&(V.label=R.datum()[0].label);var H=v.triggerHandler(z,"plotly_legendclick",V);if(j===1){if(H===!1)return;U._clickTimeout=setTimeout(function(){z._fullLayout&&n(R,z,j)},z._context.doubleClickDelay)}else j===2&&(U._clickTimeout&&clearTimeout(U._clickTimeout),z._legendMouseDownTime=0,v.triggerHandler(z,"plotly_legenddoubleclick",V)!==!1&&H!==!1&&n(R,z,j))}function f(z,U,R){var j,Z,F=I(R),V=z.data()[0][0],H=V.trace,te=_.traceIs(H,"pie-like"),$=!R._inHover&&U._context.edits.legendText&&!te,J=R._maxNameLength;V.groupTitle?(j=V.groupTitle.text,Z=V.groupTitle.font):(Z=R.font,R.entries?j=V.text:(j=te?V.label:H.name,H._meta&&(j=w.templateString(j,H._meta))));var X=w.ensureSingle(z,"text",F+"text");X.attr("text-anchor","start").call(s.font,Z).text($?S(j,J):j);var K=R.itemwidth+2*r.itemGap;a.positionText(X,K,0),$?X.call(a.makeEditable,{gd:U,text:j}).call(E,z,U,R).on("edit",function(ee){this.text(S(ee,J)).call(E,z,U,R);var ie=V.trace._fullInput||{},ae={};if(_.hasTransform(ie,"groupby")){var oe=_.getTransformIndices(ie,"groupby"),fe=oe[oe.length-1],ge=w.keyedContainer(ie,"transforms["+fe+"].styles","target","value.name");ge.set(V.trace._group,ee),ae=ge.constructUpdate()}else ae.name=ee;return ie._isShape?_.call("_guiRelayout",U,"shapes["+H.index+"].name",ae.name):_.call("_guiRestyle",U,ae,H.index)}):E(X,z,U,R)}function S(z,U){var R=Math.max(4,U);if(z&&z.trim().length>=R/2)return z;for(var j=R-(z=z||"").length;j>0;j--)z+=" ";return z}function M(z,U,R){var j,Z=U._context.doubleClickDelay,F=1,V=w.ensureSingle(z,"rect",R+"toggle",function(H){U._context.staticPlot||H.style("cursor","pointer").attr("pointer-events","all"),H.call(t.fill,"rgba(0,0,0,0)")});U._context.staticPlot||(V.on("mousedown",function(){(j=new Date().getTime())-U._legendMouseDownTime<Z?F+=1:(F=1,U._legendMouseDownTime=j)}),V.on("mouseup",function(){if(!U._dragged&&!U._editing){var H=U._fullLayout[R];new Date().getTime()-U._legendMouseDownTime>Z&&(F=Math.max(F-1,1)),k(U,H,z,F,T.event)}}))}function E(z,U,R,j,Z){j._inHover&&z.attr("data-notex",!0),a.convertToTspans(z,R,function(){(function(F,V,H,te){var $=F.data()[0][0];if(H._inHover||!$||$.trace.showlegend){var J=F.select("g[class*=math-group]"),X=J.node(),K=I(H);H||(H=V._fullLayout[K]);var ee,ie,ae=H.borderwidth,oe=(te===d?H.title.font:$.groupTitle?$.groupTitle.font:H.font).size*o;if(X){var fe=s.bBox(X);ee=fe.height,ie=fe.width,te===d?s.setTranslate(J,ae,ae+.75*ee):s.setTranslate(J,0,.25*ee)}else{var ge="."+K+(te===d?"title":"")+"text",ve=F.select(ge),xe=a.lineCount(ve),_e=ve.node();if(ee=oe*xe,ie=_e?s.bBox(_e).width:0,te===d)H.title.side==="left"&&(ie+=2*r.itemGap),a.positionText(ve,ae+r.titlePad,ae+oe);else{var ye=2*r.itemGap+H.itemwidth;$.groupTitle&&(ye=r.itemGap,ie-=H.itemwidth),a.positionText(ve,ye,-oe*((xe-1)/2-.3))}}te===d?(H._titleWidth=ie,H._titleHeight=ee):($.lineHeight=oe,$.height=Math.max(ee,16)+3,$.width=ie)}else F.remove()})(U,R,j,Z)})}function O(z){return w.isRightAnchor(z)?"right":w.isCenterAnchor(z)?"center":"left"}function P(z){return w.isBottomAnchor(z)?"bottom":w.isMiddleAnchor(z)?"middle":"top"}function I(z){return z._id||"legend"}N.exports=function(z,U){if(U)x(z,U);else{var R=z._fullLayout,j=R._legends;R._infolayer.selectAll('[class^="legend"]').each(function(){var V=T.select(this),H=V.attr("class").split(" ")[0];H.match(m)&&j.indexOf(H)===-1&&V.remove()});for(var Z=0;Z<j.length;Z++){var F=j[Z];x(z,z._fullLayout[F])}}}},82424:function(N,L,e){var T=e(73972),w=e(10130);N.exports=function(i,_,v){var h,s,t=_._inHover,a=w.isGrouped(_),n=w.isReversed(_),r={},l=[],o=!1,u={},p=0,c=0;function b(j,Z,F){if(_.visible!==!1&&(!v||j===_._id))if(Z!==""&&w.isGrouped(_))l.indexOf(Z)===-1?(l.push(Z),o=!0,r[Z]=[F]):r[Z].push(F);else{var V="~~i"+p;l.push(V),r[V]=[F],p++}}for(h=0;h<i.length;h++){var g=i[h],d=g[0],m=d.trace,x=m.legend,y=m.legendgroup;if(t||m.visible&&m.showlegend)if(T.traceIs(m,"pie-like"))for(u[y]||(u[y]={}),s=0;s<g.length;s++){var k=g[s].label;u[y][k]||(b(x,y,{label:k,color:g[s].color,i:g[s].i,trace:m,pts:g[s].pts}),u[y][k]=!0,c=Math.max(c,(k||"").length))}else b(x,y,d),c=Math.max(c,(m.name||"").length)}if(!l.length)return[];var f=!o||!a,S=[];for(h=0;h<l.length;h++){var M=r[l[h]];f?S.push(M[0]):S.push(M)}for(f&&(S=[S]),h=0;h<S.length;h++){var E=1/0;for(s=0;s<S[h].length;s++){var O=S[h][s].trace.legendrank;E>O&&(E=O)}S[h][0]._groupMinRank=E,S[h][0]._preGroupSort=h}var P=function(j,Z){return j.trace.legendrank-Z.trace.legendrank||j._preSort-Z._preSort};for(S.forEach(function(j,Z){j[0]._preGroupSort=Z}),S.sort(function(j,Z){return j[0]._groupMinRank-Z[0]._groupMinRank||j[0]._preGroupSort-Z[0]._preGroupSort}),h=0;h<S.length;h++){S[h].forEach(function(j,Z){j._preSort=Z}),S[h].sort(P);var I=S[h][0].trace,z=null;for(s=0;s<S[h].length;s++){var U=S[h][s].trace.legendgrouptitle;if(U&&U.text){z=U,t&&(U.font=_._groupTitleFont);break}}if(n&&S[h].reverse(),z){var R=!1;for(s=0;s<S[h].length;s++)if(T.traceIs(S[h][s].trace,"pie-like")){R=!0;break}S[h].unshift({i:-1,groupTitle:z,noClick:R,trace:{showlegend:I.showlegend,legendgroup:I.legendgroup,visible:_.groupclick==="toggleitem"||I.visible}})}for(s=0;s<S[h].length;s++)S[h][s]=[S[h][s]]}return _._lgroupsLength=S.length,_._maxNameLength=c,S}},85167:function(N,L,e){var T=e(73972),w=e(71828),i=w.pushUnique,_=!0;N.exports=function(v,h,s){var t=h._fullLayout;if(!h._dragged&&!h._editing){var a,n=t.legend.itemclick,r=t.legend.itemdoubleclick,l=t.legend.groupclick;if(s===1&&n==="toggle"&&r==="toggleothers"&&_&&h.data&&h._context.showTips&&w.notifier(w._(h,"Double-click on legend to isolate one trace"),"long"),_=!1,s===1?a=n:s===2&&(a=r),a){var o=l==="togglegroup",u=t.hiddenlabels?t.hiddenlabels.slice():[],p=v.data()[0][0];if(!p.groupTitle||!p.noClick){var c=h._fullData,b=(t.shapes||[]).filter(function(Te){return Te.showlegend}),g=c.concat(b),d=p.trace;d._isShape&&(d=d._fullInput);var m,x,y,k,f,S=d.legendgroup,M={},E=[],O=[],P=[],I=(t.shapes||[]).map(function(Te){return Te._input}),z=!1,U=d.legend,R=d._fullInput;if(R&&R._isShape||!T.traceIs(d,"pie-like")){var j,Z=S&&S.length,F=[];if(Z)for(m=0;m<g.length;m++)(j=g[m]).visible&&j.legendgroup===S&&F.push(m);if(a==="toggle"){var V;switch(d.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(Z)if(o)for(m=0;m<g.length;m++){var H=g[m];H.visible!==!1&&H.legendgroup===S&&ke(H,V)}else ke(d,V);else ke(d,V)}else if(a==="toggleothers"){var te,$,J,X,K=!0;for(m=0;m<g.length;m++)if(te=(X=g[m])===d,$=X.showlegend!==!0,!(te||$||Z&&X.legendgroup===S||X.legend!==U||X.visible!==!0||T.traceIs(X,"notLegendIsolatable"))){K=!1;break}for(m=0;m<g.length;m++)if((X=g[m]).visible!==!1&&X.legend===U&&!T.traceIs(X,"notLegendIsolatable"))switch(d.visible){case"legendonly":ke(X,!0);break;case!0:J=!!K||"legendonly",te=X===d,$=X.showlegend!==!0&&!X.legendgroup,ke(X,!!(te||Z&&X.legendgroup===S||$)||J)}}for(m=0;m<O.length;m++)if(y=O[m]){var ee=y.constructUpdate(),ie=Object.keys(ee);for(x=0;x<ie.length;x++)k=ie[x],(M[k]=M[k]||[])[P[m]]=ee[k]}for(f=Object.keys(M),m=0;m<f.length;m++)for(k=f[m],x=0;x<E.length;x++)M[k].hasOwnProperty(x)||(M[k][x]=void 0);z?T.call("_guiUpdate",h,M,{shapes:I},E):T.call("_guiRestyle",h,M,E)}else{var ae=p.label,oe=u.indexOf(ae);if(a==="toggle")oe===-1?u.push(ae):u.splice(oe,1);else if(a==="toggleothers"){var fe=oe!==-1,ge=[];for(m=0;m<h.calcdata.length;m++){var ve=h.calcdata[m];for(x=0;x<ve.length;x++){var xe=ve[x].label;U===ve[0].trace.legend&&ae!==xe&&(u.indexOf(xe)===-1&&(fe=!0),i(u,xe),ge.push(xe))}}if(!fe)for(var _e=0;_e<ge.length;_e++){var ye=u.indexOf(ge[_e]);ye!==-1&&u.splice(ye,1)}}T.call("_guiRelayout",h,"hiddenlabels",u)}}}}function Ce(Te,le){var ue=E.indexOf(Te),de=M.visible;return de||(de=M.visible=[]),E.indexOf(Te)===-1&&(E.push(Te),ue=E.length-1),de[ue]=le,ue}function ke(Te,le){if(!p.groupTitle||o){var ue,de=Te._fullInput||Te,Le=de._isShape,we=de.index;if(we===void 0&&(we=de._index),T.hasTransform(de,"groupby")){var Ee=O[we];if(!Ee){var Oe=T.getTransformIndices(de,"groupby"),Fe=Oe[Oe.length-1];Ee=w.keyedContainer(de,"transforms["+Fe+"].styles","target","value.visible"),O[we]=Ee}var pe=Ee.get(Te._group);pe===void 0&&(pe=!0),pe!==!1&&Ee.set(Te._group,le),P[we]=Ce(we,de.visible!==!1)}else{var be=de.visible!==!1&&le;Le?(ue=be,I[we].visible=ue,z=!0):Ce(we,be)}}}}},10130:function(N,L){L.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},L.isVertical=function(e){return e.orientation!=="h"},L.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2199:function(N,L,e){N.exports={moduleType:"component",name:"legend",layoutAttributes:e(33030),supplyLayoutDefaults:e(99017),draw:e(43969),style:e(53630)}},53630:function(N,L,e){var T=e(39898),w=e(73972),i=e(71828),_=i.strTranslate,v=e(91424),h=e(7901),s=e(52075).extractOpts,t=e(34098),a=e(63463),n=e(53581).castOption,r=e(14928);function l(p,c){return(c?"radial":"horizontal")+(p?"":"reversed")}function o(p){var c=p[0].trace,b=c.contours,g=t.hasLines(c),d=t.hasMarkers(c),m=c.visible&&c.fill&&c.fill!=="none",x=!1,y=!1;if(b){var k=b.coloring;k==="lines"?x=!0:g=k==="none"||k==="heatmap"||b.showlines,b.type==="constraint"?m=b._operation!=="=":k!=="fill"&&k!=="heatmap"||(y=!0)}return{showMarker:d,showLine:g,showFill:m,showGradientLine:x,showGradientFill:y,anyLine:g||x,anyFill:m||y}}function u(p,c,b){return p&&i.isArrayOrTypedArray(p)?c:p>b?b:p}N.exports=function(p,c,b){var g=c._fullLayout;b||(b=g.legend);var d=b.itemsizing==="constant",m=b.itemwidth,x=(m+2*r.itemGap)/2,y=_(x,0),k=function(M,E,O,P){var I;if(M+1)I=M;else{if(!(E&&E.width>0))return 0;I=E.width}return d?P:Math.min(I,O)};function f(M,E,O){var P=M[0].trace,I=P.marker||{},z=I.line||{},U=O?P.visible&&P.type===O:w.traceIs(P,"bar"),R=T.select(E).select("g.legendpoints").selectAll("path.legend"+O).data(U?[M]:[]);R.enter().append("path").classed("legend"+O,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),R.exit().remove(),R.each(function(j){var Z=T.select(this),F=j[0],V=k(F.mlw,I.line,5,2);Z.style("stroke-width",V+"px");var H=F.mcc;if(!b._inHover&&"mc"in F){var te=s(I),$=te.mid;$===void 0&&($=(te.max+te.min)/2),H=v.tryColorscale(I,"")($)}var J=H||F.mc||I.color,X=I.pattern,K=X&&v.getPatternAttr(X.shape,0,"");if(K){var ee=v.getPatternAttr(X.bgcolor,0,null),ie=v.getPatternAttr(X.fgcolor,0,null),ae=X.fgopacity,oe=u(X.size,8,10),fe=u(X.solidity,.5,1),ge="legend-"+P.uid;Z.call(v.pattern,"legend",c,ge,K,oe,fe,H,X.fillmode,ee,ie,ae)}else Z.call(h.fill,J);V&&h.stroke(Z,F.mlc||z.color)})}function S(M,E,O){var P=M[0],I=P.trace,z=O?I.visible&&I.type===O:w.traceIs(I,O),U=T.select(E).select("g.legendpoints").selectAll("path.legend"+O).data(z?[M]:[]);if(U.enter().append("path").classed("legend"+O,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),U.exit().remove(),U.size()){var R=I.marker||{},j=k(n(R.line.width,P.pts),R.line,5,2),Z="pieLike",F=i.minExtend(I,{marker:{line:{width:j}}},Z),V=i.minExtend(P,{trace:F},Z);a(U,V,F,c)}}p.each(function(M){var E=T.select(this),O=i.ensureSingle(E,"g","layers");O.style("opacity",M[0].trace.opacity);var P=b.valign,I=M[0].lineHeight,z=M[0].height;if(P!=="middle"&&I&&z){var U={top:1,bottom:-1}[P]*(.5*(I-z+3));O.attr("transform",_(0,U))}else O.attr("transform",null);O.selectAll("g.legendfill").data([M]).enter().append("g").classed("legendfill",!0),O.selectAll("g.legendlines").data([M]).enter().append("g").classed("legendlines",!0);var R=O.selectAll("g.legendsymbols").data([M]);R.enter().append("g").classed("legendsymbols",!0),R.selectAll("g.legendpoints").data([M]).enter().append("g").classed("legendpoints",!0)}).each(function(M){var E,O=M[0].trace,P=[];if(O.visible)switch(O.type){case"histogram2d":case"heatmap":P=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":P=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":P=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":P=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":P=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":P=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":P=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":P=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":P=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var I=T.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(P);I.enter().append("path").classed("legend3dandfriends",!0).attr("transform",y).style("stroke-miterlimit",1),I.exit().remove(),I.each(function(z,U){var R,j=T.select(this),Z=s(O),F=Z.colorscale,V=Z.reversescale;if(F){if(!E){var H=F.length;R=U===0?F[V?H-1:0][1]:U===1?F[V?0:H-1][1]:F[Math.floor((H-1)/2)][1]}}else{var te=O.vertexcolor||O.facecolor||O.color;R=i.isArrayOrTypedArray(te)?te[U]||te[0]:te}j.attr("d",z[0]),R?j.call(h.fill,R):j.call(function($){if($.size()){var J="legendfill-"+O.uid;v.gradient($,c,J,l(V,E==="radial"),F,"fill")}})})}).each(function(M){var E=M[0].trace,O=E.type==="waterfall";if(M[0]._distinct&&O){var P=M[0].trace[M[0].dir].marker;return M[0].mc=P.color,M[0].mlw=P.line.width,M[0].mlc=P.line.color,f(M,this,"waterfall")}var I=[];E.visible&&O&&(I=M[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=T.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(I);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",y).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(U){var R=T.select(this),j=E[U[0]].marker,Z=k(void 0,j.line,5,2);R.attr("d",U[1]).style("stroke-width",Z+"px").call(h.fill,j.color),Z&&R.call(h.stroke,j.line.color)})}).each(function(M){f(M,this,"funnel")}).each(function(M){f(M,this)}).each(function(M){var E=M[0].trace,O=T.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&w.traceIs(E,"box-violin")?[M]:[]);O.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),O.exit().remove(),O.each(function(){var P=T.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||h.opacity(E.fillcolor)!==0||h.opacity((E.line||{}).color)!==0){var I=k(void 0,E.line,5,2);P.style("stroke-width",I+"px").call(h.fill,E.fillcolor),I&&h.stroke(P,E.line.color)}else{var z=i.minExtend(E,{marker:{size:d?12:i.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});O.call(v.pointStyle,z,c)}})}).each(function(M){S(M,this,"funnelarea")}).each(function(M){S(M,this,"pie")}).each(function(M){var E,O,P=o(M),I=P.showFill,z=P.showLine,U=P.showGradientLine,R=P.showGradientFill,j=P.anyFill,Z=P.anyLine,F=M[0],V=F.trace,H=s(V),te=H.colorscale,$=H.reversescale,J=t.hasMarkers(V)||!j?"M5,0":Z?"M5,-2":"M5,-3",X=T.select(this),K=X.select(".legendfill").selectAll("path").data(I||R?[M]:[]);if(K.enter().append("path").classed("js-fill",!0),K.exit().remove(),K.attr("d",J+"h"+m+"v6h-"+m+"z").call(function(ae){if(ae.size())if(I)v.fillGroupStyle(ae,c);else{var oe="legendfill-"+V.uid;v.gradient(ae,c,oe,l($),te,"fill")}}),z||U){var ee=k(void 0,V.line,10,5);O=i.minExtend(V,{line:{width:ee}}),E=[i.minExtend(F,{trace:O})]}var ie=X.select(".legendlines").selectAll("path").data(z||U?[E]:[]);ie.enter().append("path").classed("js-line",!0),ie.exit().remove(),ie.attr("d",J+(U?"l"+m+",0.0001":"h"+m)).call(z?v.lineGroupStyle:function(ae){if(ae.size()){var oe="legendline-"+V.uid;v.lineGroupStyle(ae),v.gradient(ae,c,oe,l($),te,"stroke")}})}).each(function(M){var E,O,P=o(M),I=P.anyFill,z=P.anyLine,U=P.showLine,R=P.showMarker,j=M[0],Z=j.trace,F=!R&&!z&&!I&&t.hasText(Z);function V(ie,ae,oe,fe){var ge=i.nestedProperty(Z,ie).get(),ve=i.isArrayOrTypedArray(ge)&&ae?ae(ge):ge;if(d&&ve&&fe!==void 0&&(ve=fe),oe){if(ve<oe[0])return oe[0];if(ve>oe[1])return oe[1]}return ve}function H(ie){return j._distinct&&j.index&&ie[j.index]?ie[j.index]:ie[0]}if(R||F||U){var te={},$={};if(R){te.mc=V("marker.color",H),te.mx=V("marker.symbol",H),te.mo=V("marker.opacity",i.mean,[.2,1]),te.mlc=V("marker.line.color",H),te.mlw=V("marker.line.width",i.mean,[0,5],2),$.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var J=V("marker.size",i.mean,[2,16],12);te.ms=J,$.marker.size=J}U&&($.line={width:V("line.width",H,[0,10],5)}),F&&(te.tx="Aa",te.tp=V("textposition",H),te.ts=10,te.tc=V("textfont.color",H),te.tf=V("textfont.family",H)),E=[i.minExtend(j,te)],(O=i.minExtend(Z,$)).selectedpoints=null,O.texttemplate=null}var X=T.select(this).select("g.legendpoints"),K=X.selectAll("path.scatterpts").data(R?E:[]);K.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",y),K.exit().remove(),K.call(v.pointStyle,O,c),R&&(E[0].mrc=3);var ee=X.selectAll("g.pointtext").data(F?E:[]);ee.enter().append("g").classed("pointtext",!0).append("text").attr("transform",y),ee.exit().remove(),ee.selectAll("text").call(v.textPointStyle,O,c)}).each(function(M){var E=M[0].trace,O=T.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[M,M]:[]);O.enter().append("path").classed("legendcandle",!0).attr("d",function(P,I){return I?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",y).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(P,I){var z=T.select(this),U=E[I?"increasing":"decreasing"],R=k(void 0,U.line,5,2);z.style("stroke-width",R+"px").call(h.fill,U.fillcolor),R&&h.stroke(z,U.line.color)})}).each(function(M){var E=M[0].trace,O=T.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[M,M]:[]);O.enter().append("path").classed("legendohlc",!0).attr("d",function(P,I){return I?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",y).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(P,I){var z=T.select(this),U=E[I?"increasing":"decreasing"],R=k(void 0,U.line,5,2);z.style("fill","none").call(v.dashLine,U.line.dash,R),R&&h.stroke(z,U.line.color)})})}},42068:function(N,L,e){e(93348),N.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(N,L,e){var T=e(73972),w=e(74875),i=e(41675),_=e(24255),v=e(34031).eraseActiveShape,h=e(71828),s=h._,t=N.exports={};function a(g,d){var m,x,y=d.currentTarget,k=y.getAttribute("data-attr"),f=y.getAttribute("data-val")||!0,S=g._fullLayout,M={},E=i.list(g,null,!0),O=S._cartesianSpikesEnabled;if(k==="zoom"){var P,I=f==="in"?.5:2,z=(1+I)/2,U=(1-I)/2;for(x=0;x<E.length;x++)if(!(m=E[x]).fixedrange)if(P=m._name,f==="auto")M[P+".autorange"]=!0;else if(f==="reset")m._rangeInitial0===void 0&&m._rangeInitial1===void 0?M[P+".autorange"]=!0:m._rangeInitial0===void 0?(M[P+".autorange"]=m._autorangeInitial,M[P+".range"]=[null,m._rangeInitial1]):m._rangeInitial1===void 0?(M[P+".range"]=[m._rangeInitial0,null],M[P+".autorange"]=m._autorangeInitial):M[P+".range"]=[m._rangeInitial0,m._rangeInitial1],m._showSpikeInitial!==void 0&&(M[P+".showspikes"]=m._showSpikeInitial,O!=="on"||m._showSpikeInitial||(O="off"));else{var R=[m.r2l(m.range[0]),m.r2l(m.range[1])],j=[z*R[0]+U*R[1],z*R[1]+U*R[0]];M[P+".range[0]"]=m.l2r(j[0]),M[P+".range[1]"]=m.l2r(j[1])}}else k!=="hovermode"||f!=="x"&&f!=="y"||(f=S._isHoriz?"y":"x",y.setAttribute("data-val",f)),M[k]=f;S._cartesianSpikesEnabled=O,T.call("_guiRelayout",g,M)}function n(g,d){for(var m=d.currentTarget,x=m.getAttribute("data-attr"),y=m.getAttribute("data-val")||!0,k=g._fullLayout._subplots.gl3d||[],f={},S=x.split("."),M=0;M<k.length;M++)f[k[M]+"."+S[1]]=y;var E=y==="pan"?y:"zoom";f.dragmode=E,T.call("_guiRelayout",g,f)}function r(g,d){for(var m=d.currentTarget.getAttribute("data-attr"),x=m==="resetLastSave",y=m==="resetDefault",k=g._fullLayout,f=k._subplots.gl3d||[],S={},M=0;M<f.length;M++){var E,O=f[M],P=O+".camera",I=O+".aspectratio",z=O+".aspectmode",U=k[O]._scene;x?(S[P+".up"]=U.viewInitial.up,S[P+".eye"]=U.viewInitial.eye,S[P+".center"]=U.viewInitial.center,E=!0):y&&(S[P+".up"]=null,S[P+".eye"]=null,S[P+".center"]=null,E=!0),E&&(S[I+".x"]=U.viewInitial.aspectratio.x,S[I+".y"]=U.viewInitial.aspectratio.y,S[I+".z"]=U.viewInitial.aspectratio.z,S[z]=U.viewInitial.aspectmode)}T.call("_guiRelayout",g,S)}function l(g,d){var m=d.currentTarget,x=m._previousVal,y=g._fullLayout,k=y._subplots.gl3d||[],f=["xaxis","yaxis","zaxis"],S={},M={};if(x)M=x,m._previousVal=null;else{for(var E=0;E<k.length;E++){var O=k[E],P=y[O],I=O+".hovermode";S[I]=P.hovermode,M[I]=!1;for(var z=0;z<3;z++){var U=f[z],R=O+"."+U+".showspikes";M[R]=!1,S[R]=P[U].showspikes}}m._previousVal=S}return M}function o(g,d){for(var m=d.currentTarget,x=m.getAttribute("data-attr"),y=m.getAttribute("data-val")||!0,k=g._fullLayout,f=k._subplots.geo||[],S=0;S<f.length;S++){var M=f[S],E=k[M];if(x==="zoom"){var O=E.projection.scale,P=y==="in"?2*O:.5*O;T.call("_guiRelayout",g,M+".projection.scale",P)}}x==="reset"&&b(g,"geo")}function u(g){var d=g._fullLayout;return!d.hovermode&&(d._has("cartesian")?d._isHoriz?"y":"x":"closest")}function p(g){var d=u(g);T.call("_guiRelayout",g,"hovermode",d)}function c(g,d){for(var m=d.currentTarget.getAttribute("data-val"),x=g._fullLayout,y=x._subplots.mapbox||[],k={},f=0;f<y.length;f++){var S=y[f],M=x[S].zoom,E=m==="in"?1.05*M:M/1.05;k[S+".zoom"]=E}T.call("_guiRelayout",g,k)}function b(g,d){for(var m=g._fullLayout,x=m._subplots[d]||[],y={},k=0;k<x.length;k++)for(var f=x[k],S=m[f]._subplot.viewInitial,M=Object.keys(S),E=0;E<M.length;E++){var O=M[E];y[f+"."+O]=S[O]}T.call("_guiRelayout",g,y)}t.toImage={name:"toImage",title:function(g){var d=(g._context.toImageButtonOptions||{}).format||"png";return s(g,d==="png"?"Download plot as a png":"Download plot")},icon:_.camera,click:function(g){var d=g._context.toImageButtonOptions,m={format:d.format||"png"};h.notifier(s(g,"Taking snapshot - this may take a few seconds"),"long"),m.format!=="svg"&&h.isIE()&&(h.notifier(s(g,"IE only supports svg.  Changing format to svg."),"long"),m.format="svg"),["filename","width","height","scale"].forEach(function(x){x in d&&(m[x]=d[x])}),T.call("downloadImage",g,m).then(function(x){h.notifier(s(g,"Snapshot succeeded")+" - "+x,"long")}).catch(function(){h.notifier(s(g,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(g){return s(g,"Edit in Chart Studio")},icon:_.disk,click:function(g){w.sendDataToCloud(g)}},t.editInChartStudio={name:"editInChartStudio",title:function(g){return s(g,"Edit in Chart Studio")},icon:_.pencil,click:function(g){w.sendDataToCloud(g)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(g){return s(g,"Zoom")},attr:"dragmode",val:"zoom",icon:_.zoombox,click:a},t.pan2d={name:"pan2d",_cat:"pan",title:function(g){return s(g,"Pan")},attr:"dragmode",val:"pan",icon:_.pan,click:a},t.select2d={name:"select2d",_cat:"select",title:function(g){return s(g,"Box Select")},attr:"dragmode",val:"select",icon:_.selectbox,click:a},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(g){return s(g,"Lasso Select")},attr:"dragmode",val:"lasso",icon:_.lasso,click:a},t.drawclosedpath={name:"drawclosedpath",title:function(g){return s(g,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:_.drawclosedpath,click:a},t.drawopenpath={name:"drawopenpath",title:function(g){return s(g,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:_.drawopenpath,click:a},t.drawline={name:"drawline",title:function(g){return s(g,"Draw line")},attr:"dragmode",val:"drawline",icon:_.drawline,click:a},t.drawrect={name:"drawrect",title:function(g){return s(g,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:_.drawrect,click:a},t.drawcircle={name:"drawcircle",title:function(g){return s(g,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:_.drawcircle,click:a},t.eraseshape={name:"eraseshape",title:function(g){return s(g,"Erase active shape")},icon:_.eraseshape,click:v},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:a},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:a},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(g){return s(g,"Autoscale")},attr:"zoom",val:"auto",icon:_.autoscale,click:a},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(g){return s(g,"Reset axes")},attr:"zoom",val:"reset",icon:_.home,click:a},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(g){return s(g,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:a},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(g){return s(g,"Compare data on hover")},attr:"hovermode",val:function(g){return g._fullLayout._isHoriz?"y":"x"},icon:_.tooltip_compare,gravity:"ne",click:a},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(g){return s(g,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:_.zoombox,click:n},t.pan3d={name:"pan3d",_cat:"pan",title:function(g){return s(g,"Pan")},attr:"scene.dragmode",val:"pan",icon:_.pan,click:n},t.orbitRotation={name:"orbitRotation",title:function(g){return s(g,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:_["3d_rotate"],click:n},t.tableRotation={name:"tableRotation",title:function(g){return s(g,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:_["z-axis"],click:n},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(g){return s(g,"Reset camera to default")},attr:"resetDefault",icon:_.home,click:r},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(g){return s(g,"Reset camera to last save")},attr:"resetLastSave",icon:_.movie,click:r},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(g,d){var m=l(g,d);T.call("_guiRelayout",g,m)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:o},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:o},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(g){return s(g,"Reset")},attr:"reset",val:null,icon:_.autoscale,click:o},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:p},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:p},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:p},t.resetViewSankey={name:"resetSankeyGroup",title:function(g){return s(g,"Reset view")},icon:_.home,click:function(g){for(var d={"node.groups":[],"node.x":[],"node.y":[]},m=0;m<g._fullData.length;m++){var x=g._fullData[m]._viewInitial;d["node.groups"].push(x.node.groups.slice()),d["node.x"].push(x.node.x.slice()),d["node.y"].push(x.node.y.slice())}T.call("restyle",g,d)}},t.toggleHover={name:"toggleHover",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(g,d){var m=l(g,d);m.hovermode=u(g),T.call("_guiRelayout",g,m)}},t.resetViews={name:"resetViews",title:function(g){return s(g,"Reset views")},icon:_.home,click:function(g,d){var m=d.currentTarget;m.setAttribute("data-attr","zoom"),m.setAttribute("data-val","reset"),a(g,d),m.setAttribute("data-attr","resetLastSave"),r(g,d),b(g,"geo"),b(g,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(g){return s(g,"Toggle Spike Lines")},icon:_.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(g){var d=g._fullLayout,m=d._cartesianSpikesEnabled;d._cartesianSpikesEnabled=m==="on"?"off":"on",T.call("_guiRelayout",g,function(x){for(var y=x._fullLayout._cartesianSpikesEnabled==="on",k=i.list(x,null,!0),f={},S=0;S<k.length;S++){var M=k[S];f[M._name+".showspikes"]=!!y||M._showSpikeInitial}return f}(g))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(g){return s(g,"Reset view")},attr:"reset",icon:_.home,click:function(g){b(g,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:c},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:c}},93348:function(N,L,e){var T=e(26023),w=Object.keys(T),i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],_=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i),v=[];w.forEach(function(h){(function(s){if(_.indexOf(s._cat||s.name)===-1){var t=s.name,a=(s._cat||s.name).toLowerCase();v.indexOf(t)===-1&&v.push(t),v.indexOf(a)===-1&&v.push(a)}})(T[h])}),v.sort(),N.exports={DRAW_MODES:i,backButtons:_,foreButtons:v}},35750:function(N,L,e){var T=e(71828),w=e(7901),i=e(44467),_=e(42068);N.exports=function(v,h){var s=v.modebar||{},t=i.newContainer(h,"modebar");function a(r,l){return T.coerce(s,t,_,r,l)}a("orientation"),a("bgcolor",w.addOpacity(h.paper_bgcolor,.5));var n=w.contrast(w.rgb(h.modebar.bgcolor));a("color",w.addOpacity(n,.3)),a("activecolor",w.addOpacity(n,.7)),a("uirevision",h.uirevision),a("add"),a("remove")}},64168:function(N,L,e){N.exports={moduleType:"component",name:"modebar",layoutAttributes:e(42068),supplyLayoutDefaults:e(35750),manage:e(14192)}},14192:function(N,L,e){var T=e(41675),w=e(34098),i=e(73972),_=e(23469).isUnifiedHover,v=e(37676),h=e(26023),s=e(93348).DRAW_MODES,t=e(71828).extendDeep;N.exports=function(a){var n=a._fullLayout,r=a._context,l=n._modeBar;if(r.displayModeBar||r.watermark){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var o,u=r.modeBarButtons;o=Array.isArray(u)&&u.length?function(p){for(var c=t([],p),b=0;b<c.length;b++)for(var g=c[b],d=0;d<g.length;d++){var m=g[d];if(typeof m=="string"){if(h[m]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[b][d]=h[m]}}return c}(u):!r.displayModeBar&&r.watermark?[]:function(p){var c=p._fullLayout,b=p._fullData,g=p._context;function d(ge,ve){if(typeof ve=="string"){if(ve.toLowerCase()===ge.toLowerCase())return!0}else{var xe=ve.name,_e=ve._cat||ve.name;if(xe===ge||_e===ge.toLowerCase())return!0}return!1}var m=c.modebar.add;typeof m=="string"&&(m=[m]);var x=c.modebar.remove;typeof x=="string"&&(x=[x]);var y=g.modeBarButtonsToAdd.concat(m.filter(function(ge){for(var ve=0;ve<g.modeBarButtonsToRemove.length;ve++)if(d(ge,g.modeBarButtonsToRemove[ve]))return!1;return!0})),k=g.modeBarButtonsToRemove.concat(x.filter(function(ge){for(var ve=0;ve<g.modeBarButtonsToAdd.length;ve++)if(d(ge,g.modeBarButtonsToAdd[ve]))return!1;return!0})),f=c._has("cartesian"),S=c._has("gl3d"),M=c._has("geo"),E=c._has("pie"),O=c._has("funnelarea"),P=c._has("gl2d"),I=c._has("ternary"),z=c._has("mapbox"),U=c._has("polar"),R=c._has("smith"),j=c._has("sankey"),Z=function(ge){for(var ve=T.list({_fullLayout:ge},null,!0),xe=0;xe<ve.length;xe++)if(!ve[xe].fixedrange)return!1;return!0}(c),F=_(c.hovermode),V=[];function H(ge){if(ge.length){for(var ve=[],xe=0;xe<ge.length;xe++){for(var _e=ge[xe],ye=h[_e],Ce=ye.name.toLowerCase(),ke=(ye._cat||ye.name).toLowerCase(),Te=!1,le=0;le<k.length;le++){var ue=k[le].toLowerCase();if(ue===Ce||ue===ke){Te=!0;break}}Te||ve.push(h[_e])}V.push(ve)}}var te=["toImage"];g.showEditInChartStudio?te.push("editInChartStudio"):g.showSendToCloud&&te.push("sendDataToCloud"),H(te);var $=[],J=[],X=[],K=[];(f||P||E||O||I)+M+S+z+U+R>1?(J=["toggleHover"],X=["resetViews"]):M?($=["zoomInGeo","zoomOutGeo"],J=["hoverClosestGeo"],X=["resetGeo"]):S?(J=["hoverClosest3d"],X=["resetCameraDefault3d","resetCameraLastSave3d"]):z?($=["zoomInMapbox","zoomOutMapbox"],J=["toggleHover"],X=["resetViewMapbox"]):P?J=["hoverClosestGl2d"]:E?J=["hoverClosestPie"]:j?(J=["hoverClosestCartesian","hoverCompareCartesian"],X=["resetViewSankey"]):J=["toggleHover"],f&&(J=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ge){for(var ve=0;ve<ge.length;ve++)if(!i.traceIs(ge[ve],"noHover"))return!1;return!0}(b)||F)&&(J=[]),!f&&!P||Z||($=["zoomIn2d","zoomOut2d","autoScale2d"],X[0]!=="resetViews"&&(X=["resetScale2d"])),S?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(f||P)&&!Z||I?K=["zoom2d","pan2d"]:z||M?K=["pan2d"]:U&&(K=["zoom2d"]),function(ge){for(var ve=!1,xe=0;xe<ge.length&&!ve;xe++){var _e=ge[xe];_e._module&&_e._module.selectPoints&&(i.traceIs(_e,"scatter-like")?(w.hasMarkers(_e)||w.hasText(_e))&&(ve=!0):i.traceIs(_e,"box-violin")&&_e.boxpoints!=="all"&&_e.points!=="all"||(ve=!0))}return ve}(b)&&K.push("select2d","lasso2d");var ee=[],ie=function(ge){ee.indexOf(ge)===-1&&J.indexOf(ge)!==-1&&ee.push(ge)};if(Array.isArray(y)){for(var ae=[],oe=0;oe<y.length;oe++){var fe=y[oe];typeof fe=="string"?(fe=fe.toLowerCase(),s.indexOf(fe)!==-1?(c._has("mapbox")||c._has("cartesian"))&&K.push(fe):fe==="togglespikelines"?ie("toggleSpikelines"):fe==="togglehover"?ie("toggleHover"):fe==="hovercompare"?ie("hoverCompareCartesian"):fe==="hoverclosest"?(ie("hoverClosestCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie")):fe==="v1hovermode"&&(ie("toggleHover"),ie("hoverClosestCartesian"),ie("hoverCompareCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie"))):ae.push(fe)}y=ae}return H(K),H($.concat(X)),H(ee),function(ge,ve){if(ve.length)if(Array.isArray(ve[0]))for(var xe=0;xe<ve.length;xe++)ge.push(ve[xe]);else ge.push(ve);return ge}(V,y)}(a),l?l.update(a,o):n._modeBar=v(a,o)}else l&&(l.destroy(),delete n._modeBar)}},37676:function(N,L,e){var T=e(39898),w=e(92770),i=e(71828),_=e(24255),v=e(11506).version,h=new DOMParser;function s(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(a,n){this.graphInfo=a;var r=this.graphInfo._context,l=this.graphInfo._fullLayout,o="modebar-"+l._uid;this.element.setAttribute("id",o),this._uid=o,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),l.modebar.orientation==="v"&&(this.element.className+=" vertical",n=n.reverse());var u=l.modebar,p=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";i.deleteRelatedStyleRule(o),i.addRelatedStyleRule(o,p+"#"+o+" .modebar-group","background-color: "+u.bgcolor),i.addRelatedStyleRule(o,"#"+o+" .modebar-btn .icon path","fill: "+u.color),i.addRelatedStyleRule(o,"#"+o+" .modebar-btn:hover .icon path","fill: "+u.activecolor),i.addRelatedStyleRule(o,"#"+o+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(n),b=this.hasLogo!==r.displaylogo,g=this.locale!==r.locale;if(this.locale=r.locale,(c||b||g)&&(this.removeAllButtons(),this.updateButtons(n),r.watermark||r.displaylogo)){var d=this.getLogo();r.watermark&&(d.className=d.className+" watermark"),l.modebar.orientation==="v"?this.element.insertBefore(d,this.element.childNodes[0]):this.element.appendChild(d),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(a){var n=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var l=n.createGroup();r.forEach(function(o){var u=o.name;if(!u)throw new Error("must provide button 'name' in button config");if(n.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");n.buttonsNames.push(u);var p=n.createButton(o);n.buttonElements.push(p),l.appendChild(p)}),n.element.appendChild(l)})},t.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},t.createButton=function(a){var n=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var l=a.title;l===void 0?l=a.name:typeof l=="function"&&(l=l(this.graphInfo)),(l||l===0)&&r.setAttribute("data-title",l),a.attr!==void 0&&r.setAttribute("data-attr",a.attr);var o=a.val;if(o!==void 0&&(typeof o=="function"&&(o=o(this.graphInfo)),r.setAttribute("data-val",o)),typeof a.click!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(p){a.click(n.graphInfo,p),n.updateActiveButton(p.currentTarget)}),r.setAttribute("data-toggle",a.toggle||!1),a.toggle&&T.select(r).classed("active",!0);var u=a.icon;return typeof u=="function"?r.appendChild(u()):r.appendChild(this.createIcon(u||_.question)),r.setAttribute("data-gravity",a.gravity||"n"),r},t.createIcon=function(a){var n,r=w(a.height)?Number(a.height):a.ascent-a.descent,l="http://www.w3.org/2000/svg";if(a.path){(n=document.createElementNS(l,"svg")).setAttribute("viewBox",[0,0,a.width,r].join(" ")),n.setAttribute("class","icon");var o=document.createElementNS(l,"path");o.setAttribute("d",a.path),a.transform?o.setAttribute("transform",a.transform):a.ascent!==void 0&&o.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),n.appendChild(o)}return a.svg&&(n=h.parseFromString(a.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},t.updateActiveButton=function(a){var n=this.graphInfo._fullLayout,r=a!==void 0?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(l){var o=l.getAttribute("data-val")||!0,u=l.getAttribute("data-attr"),p=l.getAttribute("data-toggle")==="true",c=T.select(l);if(p)u===r&&c.classed("active",!c.classed("active"));else{var b=u===null?u:i.nestedProperty(n,u).get();c.classed("active",b===o)}})},t.hasButtons=function(a){var n=this.buttons;if(!n||a.length!==n.length)return!1;for(var r=0;r<a.length;++r){if(a[r].length!==n[r].length)return!1;for(var l=0;l<a[r].length;l++)if(a[r][l].name!==n[r][l].name)return!1}return!0},t.getLogo=function(){var a=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",i._(this.graphInfo,"Produced with Plotly.js")+" (v"+v+")"),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(_.newplotlylogo)),a.appendChild(n),a},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){i.removeElement(this.container.querySelector(".modebar")),i.deleteRelatedStyleRule(this._uid)},N.exports=function(a,n){var r=a._fullLayout,l=new s({graphInfo:a,container:r._modebardiv.node(),buttons:n});return r._privateplot&&T.select(l.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),l}},37113:function(N,L,e){var T=e(41940),w=e(22399),i=(0,e(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});N.exports={visible:{valType:"boolean",editType:"plot"},buttons:i,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:T({editType:"plot"}),bgcolor:{valType:"color",dflt:w.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:w.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(N){N.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(N,L,e){var T=e(71828),w=e(7901),i=e(44467),_=e(85501),v=e(37113),h=e(89573);function s(t,a,n,r){var l=r.calendar;function o(p,c){return T.coerce(t,a,v.buttons,p,c)}if(o("visible")){var u=o("step");u!=="all"&&(!l||l==="gregorian"||u!=="month"&&u!=="year"?o("stepmode"):a.stepmode="backward",o("count")),o("label")}}N.exports=function(t,a,n,r,l){var o=t.rangeselector||{},u=i.newContainer(a,"rangeselector");function p(g,d){return T.coerce(o,u,v,g,d)}if(p("visible",_(o,u,{name:"buttons",handleItemDefaults:s,calendar:l}).length>0)){var c=function(g,d,m){for(var x=m.filter(function(S){return d[S].anchor===g._id}),y=0,k=0;k<x.length;k++){var f=d[x[k]].domain;f&&(y=Math.max(f[1],y))}return[g.domain[0],y+h.yPad]}(a,n,r);p("x",c[0]),p("y",c[1]),T.noneOrAll(t,a,["x","y"]),p("xanchor"),p("yanchor"),T.coerceFont(p,"font",n.font);var b=p("bgcolor");p("activecolor",w.contrast(b,h.lightAmount,h.darkAmount)),p("bordercolor"),p("borderwidth")}}},21598:function(N,L,e){var T=e(39898),w=e(73972),i=e(74875),_=e(7901),v=e(91424),h=e(71828),s=h.strTranslate,t=e(63893),a=e(41675),n=e(18783),r=n.LINE_SPACING,l=n.FROM_TL,o=n.FROM_BR,u=e(89573),p=e(70565);function c(d){return d._id}function b(d,m,x){var y=h.ensureSingle(d,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});y.attr({rx:u.rx,ry:u.ry}),y.call(_.stroke,m.bordercolor).call(_.fill,function(k,f){return f._isActive||f._isHovered?k.activecolor:k.bgcolor}(m,x)).style("stroke-width",m.borderwidth+"px")}function g(d,m,x,y){var k,f;h.ensureSingle(d,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(v.font,m.font).text((k=x,f=y._fullLayout._meta,k.label?f?h.templateString(k.label,f):k.label:k.step==="all"?"all":k.count+k.step.charAt(0))).call(function(S){t.convertToTspans(S,y)})}N.exports=function(d){var m=d._fullLayout._infolayer.selectAll(".rangeselector").data(function(x){for(var y=a.list(x,"x",!0),k=[],f=0;f<y.length;f++){var S=y[f];S.rangeselector&&S.rangeselector.visible&&k.push(S)}return k}(d),c);m.enter().append("g").classed("rangeselector",!0),m.exit().remove(),m.style({cursor:"pointer","pointer-events":"all"}),m.each(function(x){var y=T.select(this),k=x,f=k.rangeselector,S=y.selectAll("g.button").data(h.filterVisible(f.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(M){var E=T.select(this),O=p(k,M);M._isActive=function(P,I,z){if(I.step==="all")return P.autorange===!0;var U=Object.keys(z);return P.range[0]===z[U[0]]&&P.range[1]===z[U[1]]}(k,M,O),E.call(b,f,M),E.call(g,f,M,d),E.on("click",function(){d._dragged||w.call("_guiRelayout",d,O)}),E.on("mouseover",function(){M._isHovered=!0,E.call(b,f,M)}),E.on("mouseout",function(){M._isHovered=!1,E.call(b,f,M)})}),function(M,E,O,P,I){var z=0,U=0,R=O.borderwidth;E.each(function(){var te=T.select(this).select(".selector-text"),$=O.font.size*r,J=Math.max($*t.lineCount(te),16)+3;U=Math.max(U,J)}),E.each(function(){var te=T.select(this),$=te.select(".selector-rect"),J=te.select(".selector-text"),X=J.node()&&v.bBox(J.node()).width,K=O.font.size*r,ee=t.lineCount(J),ie=Math.max(X+10,u.minButtonWidth);te.attr("transform",s(R+z,R)),$.attr({x:0,y:0,width:ie,height:U}),t.positionText(J,ie/2,U/2-(ee-1)*K/2+3),z+=ie+5});var j=M._fullLayout._size,Z=j.l+j.w*O.x,F=j.t+j.h*(1-O.y),V="left";h.isRightAnchor(O)&&(Z-=z,V="right"),h.isCenterAnchor(O)&&(Z-=z/2,V="center");var H="top";h.isBottomAnchor(O)&&(F-=U,H="bottom"),h.isMiddleAnchor(O)&&(F-=U/2,H="middle"),z=Math.ceil(z),U=Math.ceil(U),Z=Math.round(Z),F=Math.round(F),i.autoMargin(M,P+"-range-selector",{x:O.x,y:O.y,l:z*l[V],r:z*o[V],b:U*o[H],t:U*l[H]}),I.attr("transform",s(Z,F))}(d,S,f,k._name,y)})}},70565:function(N,L,e){var T=e(81041),w=e(71828).titleCase;N.exports=function(i,_){var v=i._name,h={};if(_.step==="all")h[v+".autorange"]=!0;else{var s=function(t,a){var n,r=t.range,l=new Date(t.r2l(r[1])),o=a.step,u=T["utc"+w(o)],p=a.count;switch(a.stepmode){case"backward":n=t.l2r(+u.offset(l,-p));break;case"todate":var c=u.offset(l,-p);n=t.l2r(+u.ceil(c))}return[n,r[1]]}(i,_);h[v+".range[0]"]=s[0],h[v+".range[1]"]=s[1]}return h}},97218:function(N,L,e){N.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(37113)}}},layoutAttributes:e(37113),handleDefaults:e(28674),draw:e(21598)}},75148:function(N,L,e){var T=e(22399);N.exports={bgcolor:{valType:"color",dflt:T.background,editType:"plot"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(N,L,e){var T=e(41675).list,w=e(71739).getAutoRange,i=e(73251);N.exports=function(_){for(var v=T(_,"x",!0),h=0;h<v.length;h++){var s=v[h],t=s[i.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=w(_,s))}}},73251:function(N){N.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(N,L,e){var T=e(71828),w=e(44467),i=e(41675),_=e(75148),v=e(47850);N.exports=function(h,s,t){var a=h[t],n=s[t];if(a.rangeslider||s._requestRangeslider[n._id]){T.isPlainObject(a.rangeslider)||(a.rangeslider={});var r,l,o=a.rangeslider,u=w.newContainer(n,"rangeslider");if(y("visible")){y("bgcolor",s.plot_bgcolor),y("bordercolor"),y("borderwidth"),y("thickness"),y("autorange",!n.isValidRange(o.range)),y("range");var p=s._subplots;if(p)for(var c=p.cartesian.filter(function(f){return f.substr(0,f.indexOf("y"))===i.name2id(t)}).map(function(f){return f.substr(f.indexOf("y"),f.length)}),b=T.simpleMap(c,i.id2name),g=0;g<b.length;g++){var d=b[g];r=o[d]||{},l=w.newContainer(u,d,"yaxis");var m,x=s[d];r.range&&x.isValidRange(r.range)&&(m="fixed"),k("rangemode",m)!=="match"&&k("range",x.range.slice())}u._input=o}}function y(f,S){return T.coerce(o,u,_,f,S)}function k(f,S){return T.coerce(r,l,v,f,S)}}},72413:function(N,L,e){var T=e(39898),w=e(73972),i=e(74875),_=e(71828),v=_.strTranslate,h=e(91424),s=e(7901),t=e(92998),a=e(93612),n=e(41675),r=e(28569),l=e(6964),o=e(73251);function u(x){return typeof x.clientX=="number"?x.clientX:x.touches&&x.touches.length>0?x.touches[0].clientX:0}function p(x,y,k,f){var S=_.ensureSingle(x,"rect",o.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),M=f.borderwidth%2==0?f.borderwidth:f.borderwidth-1,E=-f._offsetShift,O=h.crispRound(y,f.borderwidth);S.attr({width:f._width+M,height:f._height+M,transform:v(E,E),"stroke-width":O}).call(s.stroke,f.bordercolor).call(s.fill,f.bgcolor)}function c(x,y,k,f){var S=y._fullLayout;_.ensureSingleById(S._topdefs,"clipPath",f._clipId,function(M){M.append("rect").attr({x:0,y:0})}).select("rect").attr({width:f._width,height:f._height})}function b(x,y,k,f){var S,M=y.calcdata,E=x.selectAll("g."+o.rangePlotClassName).data(k._subplotsWith,_.identity);E.enter().append("g").attr("class",function(O){return o.rangePlotClassName+" "+O}).call(h.setClipUrl,f._clipId,y),E.order(),E.exit().remove(),E.each(function(O,P){var I=T.select(this),z=P===0,U=n.getFromId(y,O,"y"),R=U._name,j=f[R],Z={data:[],layout:{xaxis:{type:k.type,domain:[0,1],range:f.range.slice(),calendar:k.calendar},width:f._width,height:f._height,margin:{t:0,b:0,l:0,r:0}},_context:y._context};k.rangebreaks&&(Z.layout.xaxis.rangebreaks=k.rangebreaks),Z.layout[R]={type:U.type,domain:[0,1],range:j.rangemode!=="match"?j.range.slice():U.range.slice(),calendar:U.calendar},U.rangebreaks&&(Z.layout[R].rangebreaks=U.rangebreaks),i.supplyDefaults(Z);var F=Z._fullLayout.xaxis,V=Z._fullLayout[R];F.clearCalc(),F.setScale(),V.clearCalc(),V.setScale();var H={id:O,plotgroup:I,xaxis:F,yaxis:V,isRangePlot:!0};z?S=H:(H.mainplot="xy",H.mainplotinfo=S),a.rangePlot(y,H,function(te,$){for(var J=[],X=0;X<te.length;X++){var K=te[X],ee=K[0].trace;ee.xaxis+ee.yaxis===$&&J.push(K)}return J}(M,O))})}function g(x,y,k,f,S){_.ensureSingle(x,"rect",o.maskMinClassName,function(M){M.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,o.maskColor),_.ensureSingle(x,"rect",o.maskMaxClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,o.maskColor),S.rangemode!=="match"&&(_.ensureSingle(x,"rect",o.maskMinOppAxisClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).call(s.fill,o.maskOppAxisColor),_.ensureSingle(x,"rect",o.maskMaxOppAxisClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).style("border-top",o.maskOppBorder).call(s.fill,o.maskOppAxisColor))}function d(x,y,k,f){y._context.staticPlot||_.ensureSingle(x,"rect",o.slideBoxClassName,function(S){S.attr({y:0,cursor:o.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:f._height,fill:o.slideBoxFill})}function m(x,y,k,f){var S=_.ensureSingle(x,"g",o.grabberMinClassName),M=_.ensureSingle(x,"g",o.grabberMaxClassName),E={x:0,width:o.handleWidth,rx:o.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":o.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(f._height/4),height:Math.round(f._height/2)};_.ensureSingle(S,"rect",o.handleMinClassName,function(I){I.attr(E)}).attr(O),_.ensureSingle(M,"rect",o.handleMaxClassName,function(I){I.attr(E)}).attr(O);var P={width:o.grabAreaWidth,x:0,y:0,fill:o.grabAreaFill,cursor:y._context.staticPlot?void 0:o.grabAreaCursor};_.ensureSingle(S,"rect",o.grabAreaMinClassName,function(I){I.attr(P)}).attr("height",f._height),_.ensureSingle(M,"rect",o.grabAreaMaxClassName,function(I){I.attr(P)}).attr("height",f._height)}N.exports=function(x){for(var y=x._fullLayout,k=y._rangeSliderData,f=0;f<k.length;f++){var S=k[f][o.name];S._clipId=S._id+"-"+y._uid}var M=y._infolayer.selectAll("g."+o.containerClassName).data(k,function(E){return E._name});M.exit().each(function(E){var O=E[o.name];y._topdefs.select("#"+O._clipId).remove()}).remove(),k.length!==0&&(M.enter().append("g").classed(o.containerClassName,!0).attr("pointer-events","all"),M.each(function(E){var O=T.select(this),P=E[o.name],I=y[n.id2name(E.anchor)],z=P[n.id2name(E.anchor)];if(P.range){var U,R=_.simpleMap(P.range,E.r2l),j=_.simpleMap(E.range,E.r2l);U=j[0]<j[1]?[Math.min(R[0],j[0]),Math.max(R[1],j[1])]:[Math.max(R[0],j[0]),Math.min(R[1],j[1])],P.range=P._input.range=_.simpleMap(U,E.l2r)}E.cleanRange("rangeslider.range");var Z=y._size,F=E.domain;P._width=Z.w*(F[1]-F[0]);var V=Math.round(Z.l+Z.w*F[0]),H=Math.round(Z.t+Z.h*(1-E._counterDomainMin)+(E.side==="bottom"?E._depth:0)+P._offsetShift+o.extraPad);O.attr("transform",v(V,H)),P._rl=_.simpleMap(P.range,E.r2l);var te=P._rl[0],$=P._rl[1],J=$-te;if(P.p2d=function(ve){return ve/P._width*J+te},P.d2p=function(ve){return(ve-te)/J*P._width},E.rangebreaks){var X=E.locateBreaks(te,$);if(X.length){var K,ee,ie=0;for(K=0;K<X.length;K++)ie+=(ee=X[K]).max-ee.min;var ae=P._width/($-te-ie),oe=[-ae*te];for(K=0;K<X.length;K++)ee=X[K],oe.push(oe[oe.length-1]-ae*(ee.max-ee.min));for(P.d2p=function(ve){for(var xe=oe[0],_e=0;_e<X.length;_e++){var ye=X[_e];if(ve>=ye.max)xe=oe[_e+1];else if(ve<ye.min)break}return xe+ae*ve},K=0;K<X.length;K++)(ee=X[K]).pmin=P.d2p(ee.min),ee.pmax=P.d2p(ee.max);P.p2d=function(ve){for(var xe=oe[0],_e=0;_e<X.length;_e++){var ye=X[_e];if(ve>=ye.pmax)xe=oe[_e+1];else if(ve<ye.pmin)break}return(ve-xe)/ae}}}if(z.rangemode!=="match"){var fe=I.r2l(z.range[0]),ge=I.r2l(z.range[1])-fe;P.d2pOppAxis=function(ve){return(ve-fe)/ge*P._height}}O.call(p,x,E,P).call(c,x,E,P).call(b,x,E,P).call(g,x,E,P,z).call(d,x,E,P).call(m,x,E,P),function(ve,xe,_e,ye){if(!xe._context.staticPlot){var Ce=ve.select("rect."+o.slideBoxClassName).node(),ke=ve.select("rect."+o.grabAreaMinClassName).node(),Te=ve.select("rect."+o.grabAreaMaxClassName).node();ve.on("mousedown",le),ve.on("touchstart",le)}function le(){var ue=T.event,de=ue.target,Le=u(ue),we=Le-ve.node().getBoundingClientRect().left,Ee=ye.d2p(_e._rl[0]),Oe=ye.d2p(_e._rl[1]),Fe=r.coverSlip();function pe(Me){var De,Ne,Be,Ye=+u(Me)-Le;switch(de){case Ce:if(Be="ew-resize",Ee+Ye>_e._length||Oe+Ye<0)return;De=Ee+Ye,Ne=Oe+Ye;break;case ke:if(Be="col-resize",Ee+Ye>_e._length)return;De=Ee+Ye,Ne=Oe;break;case Te:if(Be="col-resize",Oe+Ye<0)return;De=Ee,Ne=Oe+Ye;break;default:Be="ew-resize",De=we,Ne=we+Ye}if(Ne<De){var We=Ne;Ne=De,De=We}ye._pixelMin=De,ye._pixelMax=Ne,l(T.select(Fe),Be),function(et,ft,ht,mt){function Mt(st){return ht.l2r(_.constrain(st,mt._rl[0],mt._rl[1]))}var _t=Mt(mt.p2d(mt._pixelMin)),it=Mt(mt.p2d(mt._pixelMax));window.requestAnimationFrame(function(){w.call("_guiRelayout",ft,ht._name+".range",[_t,it])})}(0,xe,_e,ye)}function be(){Fe.removeEventListener("mousemove",pe),Fe.removeEventListener("mouseup",be),this.removeEventListener("touchmove",pe),this.removeEventListener("touchend",be),_.removeElement(Fe)}this.addEventListener("touchmove",pe),this.addEventListener("touchend",be),Fe.addEventListener("mousemove",pe),Fe.addEventListener("mouseup",be)}}(O,x,E,P),function(ve,xe,_e,ye,Ce,ke){var Te=o.handleWidth/2;function le(Me){return _.constrain(Me,0,ye._width)}function ue(Me){return _.constrain(Me,0,ye._height)}function de(Me){return _.constrain(Me,-Te,ye._width+Te)}var Le=le(ye.d2p(_e._rl[0])),we=le(ye.d2p(_e._rl[1]));if(ve.select("rect."+o.slideBoxClassName).attr("x",Le).attr("width",we-Le),ve.select("rect."+o.maskMinClassName).attr("width",Le),ve.select("rect."+o.maskMaxClassName).attr("x",we).attr("width",ye._width-we),ke.rangemode!=="match"){var Ee=ye._height-ue(ye.d2pOppAxis(Ce._rl[1])),Oe=ye._height-ue(ye.d2pOppAxis(Ce._rl[0]));ve.select("rect."+o.maskMinOppAxisClassName).attr("x",Le).attr("height",Ee).attr("width",we-Le),ve.select("rect."+o.maskMaxOppAxisClassName).attr("x",Le).attr("y",Oe).attr("height",ye._height-Oe).attr("width",we-Le),ve.select("rect."+o.slideBoxClassName).attr("y",Ee).attr("height",Oe-Ee)}var Fe=.5,pe=Math.round(de(Le-Te))-Fe,be=Math.round(de(we-Te))+Fe;ve.select("g."+o.grabberMinClassName).attr("transform",v(pe,Fe)),ve.select("g."+o.grabberMaxClassName).attr("transform",v(be,Fe))}(O,0,E,P,I,z),E.side==="bottom"&&t.draw(x,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:y._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:H+P._height+P._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},549:function(N,L,e){var T=e(41675),w=e(63893),i=e(73251),_=e(18783).LINE_SPACING,v=i.name;function h(s){var t=s&&s[v];return t&&t.visible}L.isVisible=h,L.makeData=function(s){var t=T.list({_fullLayout:s},"x",!0),a=s.margin,n=[];if(!s._has("gl2d"))for(var r=0;r<t.length;r++){var l=t[r];if(h(l)){n.push(l);var o=l[v];o._id=v+l._id,o._height=(s.height-a.b-a.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}s._rangeSliderData=n},L.autoMarginOpts=function(s,t){var a=s._fullLayout,n=t[v],r=t._id.charAt(0),l=0,o=0;return t.side==="bottom"&&(l=t._depth,t.title.text!==a._dfltTitle[r]&&(o=1.5*t.title.font.size+10+n._offsetShift,o+=(t.title.text.match(w.BR_TAG_ALL)||[]).length*t.title.font.size*_)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+l+Math.max(a.margin.b,o),pad:i.extraPad+2*n._offsetShift}}},13137:function(N,L,e){var T=e(71828),w=e(75148),i=e(47850),_=e(549);N.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:T.extendFlat({},w,{yaxis:i})}}},layoutAttributes:e(75148),handleDefaults:e(26377),calcAutorange:e(88443),draw:e(72413),isVisible:_.isVisible,makeData:_.makeData,autoMarginOpts:_.autoMarginOpts}},47850:function(N){N.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(N,L,e){var T=e(50215),w=e(82196).line,i=e(79952).P,_=e(1426).extendFlat,v=e(30962).overrideAll,h=e(44467).templatedArray;e(24695),N.exports=v(h("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:_({},T.xref,{}),yref:_({},T.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:w.color,width:_({},w.width,{min:1,dflt:1}),dash:_({},i,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(N){N.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(N,L,e){var T=e(71828),w=e(89298),i=e(85501),_=e(8389),v=e(30477);function h(s,t,a){function n(E,O){return T.coerce(s,t,_,E,O)}var r=n("path"),l=n("type",r?"path":"rect")!=="path";l&&delete t.path,n("opacity"),n("line.color"),n("line.width"),n("line.dash");for(var o=["x","y"],u=0;u<2;u++){var p,c,b,g=o[u],d={_fullLayout:a},m=w.coerceRef(s,t,d,g);if((p=w.getFromId(d,m))._selectionIndices.push(t._index),b=v.rangeToShapePosition(p),c=v.shapePositionToRange(p),l){var x=g+"0",y=g+"1",k=s[x],f=s[y];s[x]=c(s[x],!0),s[y]=c(s[y],!0),w.coercePosition(t,d,n,m,x),w.coercePosition(t,d,n,m,y);var S=t[x],M=t[y];S!==void 0&&M!==void 0&&(t[x]=b(S),t[y]=b(M),s[x]=k,s[y]=f)}}l&&T.noneOrAll(s,t,["x0","x1","y0","y1"])}N.exports=function(s,t){i(s,t,{name:"selections",handleItemDefaults:h});for(var a=t.selections,n=0;n<a.length;n++){var r=a[n];r&&r.path===void 0&&(r.x0!==void 0&&r.x1!==void 0&&r.y0!==void 0&&r.y1!==void 0||(t.selections[n]=null))}}},32485:function(N,L,e){var T=e(60165).readPaths,w=e(42359),i=e(51873).clearOutlineControllers,_=e(7901),v=e(91424),h=e(44467).arrayEditor,s=e(30477),t=s.getPathString;function a(u){var p=u._fullLayout;for(var c in i(u),p._selectionLayer.selectAll("path").remove(),p._plots){var b=p._plots[c].selectionLayer;b&&b.selectAll("path").remove()}for(var g=0;g<p.selections.length;g++)r(u,g)}function n(u){return u._context.editSelection}function r(u,p){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+p+'"]').remove();var c=s.makeSelectionsOptionsAndPlotinfo(u,p),b=c.options,g=c.plotinfo;b._input&&function(d){var m=t(u,b),x={"data-index":p,"fill-rule":"evenodd",d:m},y=b.opacity,k="rgba(0,0,0,0)",f=b.line.color||_.contrast(u._fullLayout.plot_bgcolor),S=b.line.width,M=b.line.dash;S||(S=5,M="solid");var E=n(u)&&u._fullLayout._activeSelectionIndex===p;E&&(k=u._fullLayout.activeselection.fillcolor,y=u._fullLayout.activeselection.opacity);for(var O=[],P=1;P>=0;P--){var I=d.append("path").attr(x).style("opacity",P?.1:y).call(_.stroke,f).call(_.fill,k).call(v.dashLine,P?"solid":M,P?4+S:S);if(l(I,u,b),E){var z=h(u.layout,"selections",b);I.style({cursor:"move"});var U={element:I.node(),plotinfo:g,gd:u,editHelpers:z,isActiveSelection:!0},R=T(m,u);w(R,I,U)}else I.style("pointer-events",P?"all":"none");O[P]=I}var j=O[0];O[1].node().addEventListener("click",function(){return function(Z,F){if(n(Z)){var V=+F.node().getAttribute("data-index");if(V>=0){if(V===Z._fullLayout._activeSelectionIndex)return void o(Z);Z._fullLayout._activeSelectionIndex=V,Z._fullLayout._deactivateSelection=o,a(Z)}}}(u,j)})}(u._fullLayout._selectionLayer)}function l(u,p,c){var b=c.xref+c.yref;v.setClipUrl(u,"clip"+p._fullLayout._uid+b,p)}function o(u){n(u)&&u._fullLayout._activeSelectionIndex>=0&&(i(u),delete u._fullLayout._activeSelectionIndex,a(u))}N.exports={draw:a,drawOne:r,activateLastSelection:function(u){if(n(u)){var p=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=p,u._fullLayout._deactivateSelection=o,a(u)}}}},53777:function(N,L,e){var T=e(79952).P,w=e(1426).extendFlat;N.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:w({},T,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(N){N.exports=function(L,e,T){T("newselection.mode"),T("newselection.line.width")&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},35855:function(N,L,e){var T=e(64505).selectMode,w=e(51873).clearOutline,i=e(60165),_=i.readPaths,v=i.writePaths,h=i.fixDatesForPaths;N.exports=function(s,t){if(s.length){var a=s[0][0];if(a){var n=a.getAttribute("d"),r=t.gd,l=r._fullLayout.newselection,o=t.plotinfo,u=o.xaxis,p=o.yaxis,c=t.isActiveSelection,b=t.dragmode,g=(r.layout||{}).selections||[];if(!T(b)&&c!==void 0){var d=r._fullLayout._activeSelectionIndex;if(d<g.length)switch(r._fullLayout.selections[d].type){case"rect":b="select";break;case"path":b="lasso"}}var m,x=_(n,r,o,c),y={xref:u._id,yref:p._id,opacity:l.opacity,line:{color:l.line.color,width:l.line.width,dash:l.line.dash}};x.length===1&&(m=x[0]),m&&m.length===5&&b==="select"?(y.type="rect",y.x0=m[0][1],y.y0=m[0][2],y.x1=m[2][1],y.y1=m[2][2]):(y.type="path",u&&p&&h(x,u,p),y.path=v(x),m=null),w(r);for(var k=t.editHelpers,f=(k||{}).modifyItem,S=[],M=0;M<g.length;M++){var E=r._fullLayout.selections[M];if(E){if(S[M]=E._input,c!==void 0&&M===r._fullLayout._activeSelectionIndex){var O=y;switch(E.type){case"rect":f("x0",O.x0),f("x1",O.x1),f("y0",O.y0),f("y1",O.y1);break;case"path":f("path",O.path)}}}else S[M]=E}return c===void 0?(S.push(y),S):k?k.getUpdateObj():{}}}}},75549:function(N,L,e){var T=e(71828).strTranslate;function w(i,_){switch(i.type){case"log":return i.p2d(_);case"date":return i.p2r(_,0,i.calendar);default:return i.p2r(_)}}N.exports={p2r:w,r2p:function(i,_){switch(i.type){case"log":return i.d2p(_);case"date":return i.r2p(_,0,i.calendar);default:return i.r2p(_)}},axValue:function(i){var _=i._id.charAt(0)==="y"?1:0;return function(v){return w(i,v[_])}},getTransform:function(i){return T(i.xaxis._offset,i.yaxis._offset)}}},47322:function(N,L,e){var T=e(32485),w=e(3937);N.exports={moduleType:"component",name:"selections",layoutAttributes:e(8389),supplyLayoutDefaults:e(59402),supplyDrawNewSelectionDefaults:e(90849),includeBasePlot:e(76325)("selections"),draw:T.draw,drawOne:T.drawOne,reselect:w.reselect,prepSelect:w.prepSelect,clearOutline:w.clearOutline,clearSelectionsCache:w.clearSelectionsCache,selectOnClick:w.selectOnClick}},3937:function(N,L,e){var T=e(52142),w=e(38258),i=e(73972),_=e(91424).dashStyle,v=e(7901),h=e(30211),s=e(23469).makeEventData,t=e(64505),a=t.freeMode,n=t.rectMode,r=t.drawMode,l=t.openMode,o=t.selectMode,u=e(30477),p=e(21459),c=e(42359),b=e(51873).clearOutline,g=e(60165),d=g.handleEllipse,m=g.readPaths,x=e(90551).newShapes,y=e(35855),k=e(32485).activateLastSelection,f=e(71828),S=f.sorterAsc,M=e(61082),E=e(79990),O=e(41675).getFromId,P=e(33306),I=e(61549).redrawReglTraces,z=e(34122),U=z.MINSELECT,R=M.filter,j=M.tester,Z=e(75549),F=Z.p2r,V=Z.axValue,H=Z.getTransform;function te(pe){return pe.subplot!==void 0}function $(pe,be,Me,De,Ne,Be,Ye){var We,et,ft,ht,mt,Mt,_t,it,st,St=be._hoverdata,zt=be._fullLayout.clickmode.indexOf("event")>-1,Ft=[];if(function(Je){return Je&&Array.isArray(Je)&&Je[0].hoverOnBox!==!0}(St)){ee(pe,be,Be);var Pt=function(Je,lt){var ot,je,Ue=Je[0],at=-1,$e=[];for(je=0;je<lt.length;je++)if(ot=lt[je],Ue.fullData._expandedIndex===ot.cd[0].trace._expandedIndex){if(Ue.hoverOnBox===!0)break;Ue.pointNumber!==void 0?at=Ue.pointNumber:Ue.binNumber!==void 0&&(at=Ue.binNumber,$e=Ue.pointNumbers);break}return{pointNumber:at,pointNumbers:$e,searchInfo:ot}}(St,We=oe(be,Me,De,Ne));if(Pt.pointNumbers.length>0?function(Je,lt){var ot,je,Ue,at=[];for(Ue=0;Ue<Je.length;Ue++)(ot=Je[Ue]).cd[0].trace.selectedpoints&&ot.cd[0].trace.selectedpoints.length>0&&at.push(ot);if(at.length===1&&at[0]===lt.searchInfo&&(je=lt.searchInfo.cd[0].trace).selectedpoints.length===lt.pointNumbers.length){for(Ue=0;Ue<lt.pointNumbers.length;Ue++)if(je.selectedpoints.indexOf(lt.pointNumbers[Ue])<0)return!1;return!0}return!1}(We,Pt):function(Je){var lt,ot,je=0;for(ot=0;ot<Je.length;ot++)if((lt=Je[ot].cd[0].trace).selectedpoints&&(lt.selectedpoints.length>1||(je+=lt.selectedpoints.length)>1))return!1;return je===1}(We)&&(Mt=ge(Pt))){for(Ye&&Ye.remove(),st=0;st<We.length;st++)(et=We[st])._module.selectPoints(et,!1);ve(be,We),ie(Be),zt&&Fe(be)}else{for(_t=pe.shiftKey&&(Mt!==void 0?Mt:ge(Pt)),ft=function(Je,lt,ot){return{pointNumber:Je,searchInfo:lt,subtract:!!ot}}(Pt.pointNumber,Pt.searchInfo,_t),ht=K(Be.selectionDefs.concat([ft])),st=0;st<We.length;st++)if(mt=_e(We[st]._module.selectPoints(We[st],ht),We[st]),Ft.length)for(var Xe=0;Xe<mt.length;Xe++)Ft.push(mt[Xe]);else Ft=mt;if(ve(be,We,it={points:Ft}),ft&&Be&&Be.selectionDefs.push(ft),Ye){var Ke=Be.mergedPolygons,He=l(Be.dragmode);c(ye(Ke,He),Ye,Be)}zt&&Oe(be,it)}}}function J(pe){return"pointNumber"in pe&&"searchInfo"in pe}function X(pe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(be,Me,De,Ne){var Be=pe.searchInfo.cd[0].trace._expandedIndex;return Ne.cd[0].trace._expandedIndex===Be&&De===pe.pointNumber},isRect:!1,degenerate:!1,subtract:!!pe.subtract}}function K(pe){if(pe.length){for(var be=[],Me=J(pe[0])?0:pe[0][0][0],De=Me,Ne=J(pe[0])?0:pe[0][0][1],Be=Ne,Ye=0;Ye<pe.length;Ye++)if(J(pe[Ye]))be.push(X(pe[Ye]));else{var We=j(pe[Ye]);We.subtract=!!pe[Ye].subtract,be.push(We),Me=Math.min(Me,We.xmin),De=Math.max(De,We.xmax),Ne=Math.min(Ne,We.ymin),Be=Math.max(Be,We.ymax)}return{xmin:Me,xmax:De,ymin:Ne,ymax:Be,pts:[],contains:function(et,ft,ht,mt){for(var Mt=!1,_t=0;_t<be.length;_t++)be[_t].contains(et,ft,ht,mt)&&(Mt=!be[_t].subtract);return Mt},isRect:!1,degenerate:!1}}}function ee(pe,be,Me){var De=be._fullLayout,Ne=Me.plotinfo,Be=Me.dragmode,Ye=De._lastSelectedSubplot&&De._lastSelectedSubplot===Ne.id,We=(pe.shiftKey||pe.altKey)&&!(r(Be)&&l(Be));Ye&&We&&Ne.selection&&Ne.selection.selectionDefs&&!Me.selectionDefs?(Me.selectionDefs=Ne.selection.selectionDefs,Me.mergedPolygons=Ne.selection.mergedPolygons):We&&Ne.selection||ie(Me),Ye||(b(be),De._lastSelectedSubplot=Ne.id)}function ie(pe,be){var Me=pe.dragmode,De=pe.plotinfo,Ne=pe.gd;(function(mt){return mt._fullLayout._activeShapeIndex>=0})(Ne)&&Ne._fullLayout._deactivateShape(Ne),function(mt){return mt._fullLayout._activeSelectionIndex>=0}(Ne)&&Ne._fullLayout._deactivateSelection(Ne);var Be=Ne._fullLayout._zoomlayer,Ye=r(Me),We=o(Me);if(Ye||We){var et,ft,ht=Be.selectAll(".select-outline-"+De.id);ht&&Ne._fullLayout._outlining&&(Ye&&(et=x(ht,pe)),et&&i.call("_guiRelayout",Ne,{shapes:et}),We&&!te(pe)&&(ft=y(ht,pe)),ft&&(Ne._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",Ne,{selections:ft}).then(function(){be&&k(Ne)})),Ne._fullLayout._outlining=!1)}De.selection={},De.selection.selectionDefs=pe.selectionDefs=[],De.selection.mergedPolygons=pe.mergedPolygons=[]}function ae(pe){return pe._id}function oe(pe,be,Me,De){if(!pe.calcdata)return[];var Ne,Be,Ye,We=[],et=be.map(ae),ft=Me.map(ae);for(Ye=0;Ye<pe.calcdata.length;Ye++)if((Be=(Ne=pe.calcdata[Ye])[0].trace).visible===!0&&Be._module&&Be._module.selectPoints)if(!te({subplot:De})||Be.subplot!==De&&Be.geo!==De)if(Be.type==="splom"){if(Be._xaxes[et[0]]&&Be._yaxes[ft[0]]){var ht=fe(Be._module,Ne,be[0],Me[0]);ht.scene=pe._fullLayout._splomScenes[Be.uid],We.push(ht)}}else if(Be.type==="sankey"){var mt=fe(Be._module,Ne,be[0],Me[0]);We.push(mt)}else{if(et.indexOf(Be.xaxis)===-1||ft.indexOf(Be.yaxis)===-1)continue;We.push(fe(Be._module,Ne,O(pe,Be.xaxis),O(pe,Be.yaxis)))}else We.push(fe(Be._module,Ne,be[0],Me[0]));return We}function fe(pe,be,Me,De){return{_module:pe,cd:be,xaxis:Me,yaxis:De}}function ge(pe){var be=pe.searchInfo.cd[0].trace,Me=pe.pointNumber,De=pe.pointNumbers,Ne=De.length>0?De[0]:Me;return!!be.selectedpoints&&be.selectedpoints.indexOf(Ne)>-1}function ve(pe,be,Me){var De,Ne;for(De=0;De<be.length;De++){var Be=be[De].cd[0].trace._fullInput,Ye=pe._fullLayout._tracePreGUI[Be.uid]||{};Ye.selectedpoints===void 0&&(Ye.selectedpoints=Be._input.selectedpoints||null)}if(Me){var We=Me.points||[];for(De=0;De<be.length;De++)(Ne=be[De].cd[0].trace)._input.selectedpoints=Ne._fullInput.selectedpoints=[],Ne._fullInput!==Ne&&(Ne.selectedpoints=[]);for(var et=0;et<We.length;et++){var ft=We[et],ht=ft.data,mt=ft.fullData,Mt=ft.pointIndex,_t=ft.pointIndices;_t?([].push.apply(ht.selectedpoints,_t),Ne._fullInput!==Ne&&[].push.apply(mt.selectedpoints,_t)):(ht.selectedpoints.push(Mt),Ne._fullInput!==Ne&&mt.selectedpoints.push(Mt))}}else for(De=0;De<be.length;De++)delete(Ne=be[De].cd[0].trace).selectedpoints,delete Ne._input.selectedpoints,Ne._fullInput!==Ne&&delete Ne._fullInput.selectedpoints;(function(it,st){for(var St=!1,zt=0;zt<st.length;zt++){var Ft=st[zt],Pt=Ft.cd;i.traceIs(Pt[0].trace,"regl")&&(St=!0);var Xe=Ft._module,Ke=Xe.styleOnSelect||Xe.style;Ke&&(Ke(it,Pt,Pt[0].node3),Pt[0].nodeRangePlot3&&Ke(it,Pt,Pt[0].nodeRangePlot3))}St&&(P(it),I(it))})(pe,be)}function xe(pe,be,Me){for(var De=(Me?T.difference:T.union)({regions:pe},{regions:[be]}).regions.reverse(),Ne=0;Ne<De.length;Ne++){var Be=De[Ne];Be.subtract=de(Be,De.slice(0,Ne))}return De}function _e(pe,be){if(Array.isArray(pe))for(var Me=be.cd,De=be.cd[0].trace,Ne=0;Ne<pe.length;Ne++)pe[Ne]=s(pe[Ne],De,Me);return pe}function ye(pe,be){for(var Me=[],De=0;De<pe.length;De++){Me[De]=[];for(var Ne=0;Ne<pe[De].length;Ne++){Me[De][Ne]=[],Me[De][Ne][0]=Ne?"L":"M";for(var Be=0;Be<pe[De][Ne].length;Be++)Me[De][Ne].push(pe[De][Ne][Be])}be||Me[De].push(["Z",Me[De][0][1],Me[De][0][2]])}return Me}function Ce(pe,be){for(var Me,De,Ne=[],Be=[],Ye=0;Ye<be.length;Ye++){var We=be[Ye];De=We._module.selectPoints(We,pe),Be.push(De),Me=_e(De,We),Ne=Ne.concat(Me)}return Ne}function ke(pe,be,Me,De,Ne){var Be,Ye,We,et=!!De;Ne&&(Be=Ne.plotinfo,Ye=Ne.xaxes[0]._id,We=Ne.yaxes[0]._id);var ft=[],ht=[],mt=ue(pe),Mt=pe._fullLayout;if(Be){var _t=Mt._zoomlayer,it=Mt.dragmode,st=r(it),St=o(it);if(st||St){var zt=O(pe,Ye,"x"),Ft=O(pe,We,"y");if(zt&&Ft){var Pt=_t.selectAll(".select-outline-"+Be.id);if(Pt&&pe._fullLayout._outlining&&Pt.length){for(var Xe=Pt[0][0].getAttribute("d"),Ke=m(Xe,pe,Be),He=[],Je=0;Je<Ke.length;Je++){for(var lt=Ke[Je],ot=[],je=0;je<lt.length;je++)ot.push([Le(zt,lt[je][1]),Le(Ft,lt[je][2])]);ot.xref=Ye,ot.yref=We,ot.subtract=de(ot,He),He.push(ot)}mt=mt.concat(He)}}}}var Ue=Ye&&We?[Ye+We]:Mt._subplots.cartesian;(function(wn){var Cn=wn.calcdata;if(Cn)for(var _n=0;_n<Cn.length;_n++){var zn=Cn[_n][0].trace,qn=wn._fullLayout._splomScenes;if(qn){var sr=qn[zn.uid];sr&&(sr.selectBatch=[])}}})(pe);for(var at={},$e=0;$e<Ue.length;$e++){var gt=Ue[$e],yt=gt.indexOf("y"),xt=gt.slice(0,yt),dt=gt.slice(yt),Lt=Ye&&We?Me:void 0;if(Lt=le(mt,xt,dt,Lt)){var Tt=De;if(!et){var bt=O(pe,xt,"x"),Ct=O(pe,dt,"y");Tt=oe(pe,[bt],[Ct],gt);for(var Dt=0;Dt<Tt.length;Dt++){var Bt=Tt[Dt],Xt=Bt.cd[0],an=Xt.trace;if(Bt._module.name==="scattergl"&&!Xt.t.xpx){var Wt=an.x,Vt=an.y,on=an._length;Xt.t.xpx=[],Xt.t.ypx=[];for(var Sn=0;Sn<on;Sn++)Xt.t.xpx[Sn]=bt.c2p(Wt[Sn]),Xt.t.ypx[Sn]=Ct.c2p(Vt[Sn])}Bt._module.name==="splom"&&(at[an.uid]||(at[an.uid]=!0))}}var Ln=Ce(Lt,Tt);ft=ft.concat(Ln),ht=ht.concat(Tt)}}var fn={points:ft};ve(pe,ht,fn);var Zt=Mt.clickmode.indexOf("event")>-1&&be;if(!Be&&be){var ln=ue(pe,!0);if(ln.length){var nn=ln[0].xref,cn=ln[0].yref;if(nn&&cn){var kn=we(ln);Ee([O(pe,nn,"x"),O(pe,cn,"y")])(fn,kn)}}pe._fullLayout._noEmitSelectedAtStart?pe._fullLayout._noEmitSelectedAtStart=!1:Zt&&Oe(pe,fn),Mt._reselect=!1}if(!Be&&Mt._deselect){var An=Mt._deselect;(function(wn,Cn,_n){for(var zn=0;zn<_n.length;zn++){var qn=_n[zn];if(qn.xaxis&&qn.xaxis._id===wn&&qn.yaxis&&qn.yaxis._id===Cn)return!0}return!1})(Ye=An.xref,We=An.yref,ht)||Te(pe,Ye,We,De),Zt&&(fn.points.length?Oe(pe,fn):Fe(pe)),Mt._deselect=!1}return{eventData:fn,selectionTesters:Me}}function Te(pe,be,Me,De){De=oe(pe,[O(pe,be,"x")],[O(pe,Me,"y")],be+Me);for(var Ne=0;Ne<De.length;Ne++){var Be=De[Ne];Be._module.selectPoints(Be,!1)}ve(pe,De)}function le(pe,be,Me,De){for(var Ne,Be=0;Be<pe.length;Be++){var Ye=pe[Be];be===Ye.xref&&Me===Ye.yref&&(Ne?De=K(Ne=xe(Ne,Ye,!!Ye.subtract)):(Ne=[Ye],De=j(Ye)))}return De}function ue(pe,be){for(var Me=[],De=pe._fullLayout,Ne=De.selections,Be=Ne.length,Ye=0;Ye<Be;Ye++)if(!be||Ye===De._activeSelectionIndex){var We=Ne[Ye];if(We){var et,ft,ht,mt,Mt,_t=We.xref,it=We.yref,st=O(pe,_t,"x"),St=O(pe,it,"y");if(We.type==="rect"){Mt=[];var zt=Le(st,We.x0),Ft=Le(st,We.x1),Pt=Le(St,We.y0),Xe=Le(St,We.y1);Mt=[[zt,Pt],[zt,Xe],[Ft,Xe],[Ft,Pt]],et=Math.min(zt,Ft),ft=Math.max(zt,Ft),ht=Math.min(Pt,Xe),mt=Math.max(Pt,Xe),Mt.xmin=et,Mt.xmax=ft,Mt.ymin=ht,Mt.ymax=mt,Mt.xref=_t,Mt.yref=it,Mt.subtract=!1,Mt.isRect=!0,Me.push(Mt)}else if(We.type==="path")for(var Ke=We.path.split("Z"),He=[],Je=0;Je<Ke.length;Je++){var lt=Ke[Je];if(lt){lt+="Z";var ot=u.extractPathCoords(lt,p.paramIsX,"raw"),je=u.extractPathCoords(lt,p.paramIsY,"raw");et=1/0,ft=-1/0,ht=1/0,mt=-1/0,Mt=[];for(var Ue=0;Ue<ot.length;Ue++){var at=Le(st,ot[Ue]),$e=Le(St,je[Ue]);Mt.push([at,$e]),et=Math.min(at,et),ft=Math.max(at,ft),ht=Math.min($e,ht),mt=Math.max($e,mt)}Mt.xmin=et,Mt.xmax=ft,Mt.ymin=ht,Mt.ymax=mt,Mt.xref=_t,Mt.yref=it,Mt.subtract=de(Mt,He),He.push(Mt),Me.push(Mt)}}}}return Me}function de(pe,be){for(var Me=!1,De=0;De<be.length;De++)for(var Ne=be[De],Be=0;Be<pe.length;Be++)if(w(pe[Be],Ne)){Me=!Me;break}return Me}function Le(pe,be){return pe.type==="date"&&(be=be.replace("_"," ")),pe.type==="log"?pe.c2p(be):pe.r2p(be,null,pe.calendar)}function we(pe){for(var be=pe.length,Me=[],De=0;De<be;De++){var Ne=pe[De];Me=(Me=Me.concat(Ne)).concat([Ne[0]])}return(Be=Me).isRect=Be.length===5&&Be[0][0]===Be[4][0]&&Be[0][1]===Be[4][1]&&Be[0][0]===Be[1][0]&&Be[2][0]===Be[3][0]&&Be[0][1]===Be[3][1]&&Be[1][1]===Be[2][1]||Be[0][1]===Be[1][1]&&Be[2][1]===Be[3][1]&&Be[0][0]===Be[3][0]&&Be[1][0]===Be[2][0],Be.isRect&&(Be.xmin=Math.min(Be[0][0],Be[2][0]),Be.xmax=Math.max(Be[0][0],Be[2][0]),Be.ymin=Math.min(Be[0][1],Be[2][1]),Be.ymax=Math.max(Be[0][1],Be[2][1])),Be;var Be}function Ee(pe){return function(be,Me){for(var De,Ne,Be=0;Be<pe.length;Be++){var Ye=pe[Be],We=Ye._id,et=We.charAt(0);if(Me.isRect){De||(De={});var ft=Me[et+"min"],ht=Me[et+"max"];ft!==void 0&&ht!==void 0&&(De[We]=[F(Ye,ft),F(Ye,ht)].sort(S))}else Ne||(Ne={}),Ne[We]=Me.map(V(Ye))}De&&(be.range=De),Ne&&(be.lassoPoints=Ne)}}function Oe(pe,be){be&&(be.selections=(pe.layout||{}).selections||[]),pe.emit("plotly_selected",be)}function Fe(pe){pe.emit("plotly_deselect",null)}N.exports={reselect:ke,prepSelect:function(pe,be,Me,De,Ne){var Be=!te(De),Ye=a(Ne),We=n(Ne),et=l(Ne),ft=r(Ne),ht=o(Ne),mt=Ne==="drawcircle",Mt=Ne==="drawline"||mt,_t=De.gd,it=_t._fullLayout,st=ht&&it.newselection.mode==="immediate"&&Be,St=it._zoomlayer,zt=De.element.getBoundingClientRect(),Ft=De.plotinfo,Pt=H(Ft),Xe=be-zt.left,Ke=Me-zt.top;it._calcInverseTransform(_t);var He=f.apply3DTransform(it._invTransform)(Xe,Ke);Xe=He[0],Ke=He[1];var Je,lt,ot,je,Ue,at,$e,gt=it._invScaleX,yt=it._invScaleY,xt=Xe,dt=Ke,Lt="M"+Xe+","+Ke,Tt=De.xaxes[0],bt=De.yaxes[0],Ct=Tt._length,Dt=bt._length,Bt=pe.altKey&&!(r(Ne)&&et);ee(pe,_t,De),Ye&&(Je=R([[Xe,Ke]],z.BENDPX));var Xt=St.selectAll("path.select-outline-"+Ft.id).data([1]),an=ft?it.newshape:it.newselection;ft&&(De.hasText=an.label.text||an.label.texttemplate);var Wt=ft&&!et?an.fillcolor:"rgba(0,0,0,0)",Vt=an.line.color||(Be?v.contrast(_t._fullLayout.plot_bgcolor):"#7f7f7f");Xt.enter().append("path").attr("class","select-outline select-outline-"+Ft.id).style({opacity:ft?an.opacity/2:1,"stroke-dasharray":_(an.line.dash,an.line.width),"stroke-width":an.line.width+"px","shape-rendering":"crispEdges"}).call(v.stroke,Vt).call(v.fill,Wt).attr("fill-rule","evenodd").classed("cursor-move",!!ft).attr("transform",Pt).attr("d",Lt+"Z");var on=St.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",Pt).attr("d","M0,0Z");if(ft&&De.hasText){var Sn=St.select(".label-temp");Sn.empty()&&(Sn=St.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Ln=it._uid+z.SELECTID,fn=[],Zt=oe(_t,De.xaxes,De.yaxes,De.subplot);st&&!pe.shiftKey&&(De._clearSubplotSelections=function(){if(Be){var nn=Tt._id,cn=bt._id;Te(_t,nn,cn,Zt);for(var kn=(_t.layout||{}).selections||[],An=[],wn=!1,Cn=0;Cn<kn.length;Cn++){var _n=it.selections[Cn];_n.xref!==nn||_n.yref!==cn?An.push(kn[Cn]):wn=!0}wn&&(_t._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",_t,{selections:An}))}});var ln=function(nn){return nn.plotinfo.fillRangeItems||Ee(nn.xaxes.concat(nn.yaxes))}(De);De.moveFn=function(nn,cn){De._clearSubplotSelections&&(De._clearSubplotSelections(),De._clearSubplotSelections=void 0),xt=Math.max(0,Math.min(Ct,gt*nn+Xe)),dt=Math.max(0,Math.min(Dt,yt*cn+Ke));var kn=Math.abs(xt-Xe),An=Math.abs(dt-Ke);if(We){var wn,Cn,_n;if(ht){var zn=it.selectdirection;switch(wn=zn==="any"?An<Math.min(.6*kn,U)?"h":kn<Math.min(.6*An,U)?"v":"d":zn){case"h":Cn=mt?Dt/2:0,_n=Dt;break;case"v":Cn=mt?Ct/2:0,_n=Ct}}if(ft)switch(it.newshape.drawdirection){case"vertical":wn="h",Cn=mt?Dt/2:0,_n=Dt;break;case"horizontal":wn="v",Cn=mt?Ct/2:0,_n=Ct;break;case"ortho":kn<An?(wn="h",Cn=Ke,_n=dt):(wn="v",Cn=Xe,_n=xt);break;default:wn="d"}wn==="h"?((je=Mt?d(mt,[xt,Cn],[xt,_n]):[[Xe,Cn],[Xe,_n],[xt,_n],[xt,Cn]]).xmin=Mt?xt:Math.min(Xe,xt),je.xmax=Mt?xt:Math.max(Xe,xt),je.ymin=Math.min(Cn,_n),je.ymax=Math.max(Cn,_n),on.attr("d","M"+je.xmin+","+(Ke-U)+"h-4v"+2*U+"h4ZM"+(je.xmax-1)+","+(Ke-U)+"h4v"+2*U+"h-4Z")):wn==="v"?((je=Mt?d(mt,[Cn,dt],[_n,dt]):[[Cn,Ke],[Cn,dt],[_n,dt],[_n,Ke]]).xmin=Math.min(Cn,_n),je.xmax=Math.max(Cn,_n),je.ymin=Mt?dt:Math.min(Ke,dt),je.ymax=Mt?dt:Math.max(Ke,dt),on.attr("d","M"+(Xe-U)+","+je.ymin+"v-4h"+2*U+"v4ZM"+(Xe-U)+","+(je.ymax-1)+"v4h"+2*U+"v-4Z")):wn==="d"&&((je=Mt?d(mt,[Xe,Ke],[xt,dt]):[[Xe,Ke],[Xe,dt],[xt,dt],[xt,Ke]]).xmin=Math.min(Xe,xt),je.xmax=Math.max(Xe,xt),je.ymin=Math.min(Ke,dt),je.ymax=Math.max(Ke,dt),on.attr("d","M0,0Z"))}else Ye&&(Je.addPt([xt,dt]),je=Je.filtered);if(De.selectionDefs&&De.selectionDefs.length?(ot=xe(De.mergedPolygons,je,Bt),je.subtract=Bt,lt=K(De.selectionDefs.concat([je]))):(ot=[je],lt=j(je)),c(ye(ot,et),Xt,De),ht){var qn,sr=ke(_t,!1),pr=sr.eventData?sr.eventData.points.slice():[];sr=ke(_t,!1,lt,Zt,De),lt=sr.selectionTesters,$e=sr.eventData,qn=Je?Je.filtered:we(ot),E.throttle(Ln,z.SELECTDELAY,function(){for(var ir=(fn=Ce(lt,Zt)).slice(),Jn=0;Jn<pr.length;Jn++){for(var mr=pr[Jn],qt=!1,tn=0;tn<ir.length;tn++)if(ir[tn].curveNumber===mr.curveNumber&&ir[tn].pointNumber===mr.pointNumber){qt=!0;break}qt||ir.push(mr)}ir.length&&($e||($e={}),$e.points=ir),ln($e,qn),function(dn,vn){dn.emit("plotly_selecting",vn)}(_t,$e)})}},De.clickFn=function(nn,cn){if(on.remove(),_t._fullLayout._activeShapeIndex>=0)_t._fullLayout._deactivateShape(_t);else if(!ft){var kn=it.clickmode;E.done(Ln).then(function(){if(E.clear(Ln),nn===2){for(Xt.remove(),Ue=0;Ue<Zt.length;Ue++)(at=Zt[Ue])._module.selectPoints(at,!1);if(ve(_t,Zt),ie(De),Fe(_t),Zt.length){var An=Zt[0].xaxis,wn=Zt[0].yaxis;if(An&&wn){for(var Cn=[],_n=_t._fullLayout.selections,zn=0;zn<_n.length;zn++){var qn=_n[zn];qn&&(qn.xref===An._id&&qn.yref===wn._id||Cn.push(qn))}Cn.length<_n.length&&(_t._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",_t,{selections:Cn}))}}}else kn.indexOf("select")>-1&&$(cn,_t,De.xaxes,De.yaxes,De.subplot,De,Xt),kn==="event"&&Oe(_t,void 0);h.click(_t,cn,Ft.id)}).catch(f.error)}},De.doneFn=function(){on.remove(),E.done(Ln).then(function(){E.clear(Ln),!st&&je&&De.selectionDefs&&(je.subtract=Bt,De.selectionDefs.push(je),De.mergedPolygons.length=0,[].push.apply(De.mergedPolygons,ot)),(st||ft)&&ie(De,st),De.doneFnCompleted&&De.doneFnCompleted(fn),ht&&Oe(_t,$e)}).catch(f.error)}},clearOutline:b,clearSelectionsCache:ie,selectOnClick:$}},89827:function(N,L,e){var T=e(50215),w=e(41940),i=e(82196).line,_=e(79952).P,v=e(1426).extendFlat,h=e(44467).templatedArray,s=(e(24695),e(9012)),t=e(5386).R,a=e(37281);N.exports=h("shape",{visible:v({},s.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:v({},s.legend,{editType:"calc+arraydraw"}),legendgroup:v({},s.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:v({},s.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:w({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:v({},s.legendrank,{editType:"calc+arraydraw"}),legendwidth:v({},s.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:v({},T.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:v({},T.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:v({},i.color,{editType:"arraydraw"}),width:v({},i.width,{editType:"calc+arraydraw"}),dash:v({},_,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(a)}),font:w({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(N,L,e){var T=e(71828),w=e(89298),i=e(21459),_=e(30477);function v(a){return s(a.line.width,a.xsizemode,a.x0,a.x1,a.path,!1)}function h(a){return s(a.line.width,a.ysizemode,a.y0,a.y1,a.path,!0)}function s(a,n,r,l,o,u){var p=a/2,c=u;if(n==="pixel"){var b=o?_.extractPathCoords(o,u?i.paramIsY:i.paramIsX):[r,l],g=T.aggNums(Math.max,null,b),d=T.aggNums(Math.min,null,b),m=d<0?Math.abs(d)+p:p,x=g>0?g+p:p;return{ppad:p,ppadplus:c?m:x,ppadminus:c?x:m}}return{ppad:p}}function t(a,n,r,l,o){var u=a.type==="category"||a.type==="multicategory"?a.r2c:a.d2c;if(n!==void 0)return[u(n),u(r)];if(l){var p,c,b,g,d=1/0,m=-1/0,x=l.match(i.segmentRE);for(a.type==="date"&&(u=_.decodeDate(u)),p=0;p<x.length;p++)(c=o[x[p].charAt(0)].drawn)!==void 0&&(!(b=x[p].substr(1).match(i.paramRE))||b.length<c||((g=u(b[c]))<d&&(d=g),g>m&&(m=g)));return m>=d?[d,m]:void 0}}N.exports=function(a){var n=a._fullLayout,r=T.filterVisible(n.shapes);if(r.length&&a._fullData.length)for(var l=0;l<r.length;l++){var o,u,p=r[l];p._extremes={};var c=w.getRefType(p.xref),b=w.getRefType(p.yref);if(p.xref!=="paper"&&c!=="domain"){var g=p.xsizemode==="pixel"?p.xanchor:p.x0,d=p.xsizemode==="pixel"?p.xanchor:p.x1;(u=t(o=w.getFromId(a,p.xref),g,d,p.path,i.paramIsX))&&(p._extremes[o._id]=w.findExtremes(o,u,v(p)))}if(p.yref!=="paper"&&b!=="domain"){var m=p.ysizemode==="pixel"?p.yanchor:p.y0,x=p.ysizemode==="pixel"?p.yanchor:p.y1;(u=t(o=w.getFromId(a,p.yref),m,x,p.path,i.paramIsY))&&(p._extremes[o._id]=w.findExtremes(o,u,h(p)))}}}},21459:function(N){N.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(N,L,e){var T=e(71828),w=e(89298),i=e(85501),_=e(89827),v=e(30477);function h(s,t,a){function n(Z,F){return T.coerce(s,t,_,Z,F)}if(t._isShape=!0,n("visible")){n("showlegend")&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),T.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var r=n("path"),l=n("type",r?"path":"rect"),o=l!=="path";o&&delete t.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var u=n("xsizemode"),p=n("ysizemode"),c=["x","y"],b=0;b<2;b++){var g,d,m,x=c[b],y=x+"anchor",k=x==="x"?u:p,f={_fullLayout:a},S=w.coerceRef(s,t,f,x,void 0,"paper");if(w.getRefType(S)==="range"?((g=w.getFromId(f,S))._shapeIndices.push(t._index),m=v.rangeToShapePosition(g),d=v.shapePositionToRange(g)):d=m=T.identity,o){var M=x+"0",E=x+"1",O=s[M],P=s[E];s[M]=d(s[M],!0),s[E]=d(s[E],!0),k==="pixel"?(n(M,0),n(E,10)):(w.coercePosition(t,f,n,S,M,.25),w.coercePosition(t,f,n,S,E,.75)),t[M]=m(t[M]),t[E]=m(t[E]),s[M]=O,s[E]=P}if(k==="pixel"){var I=s[y];s[y]=d(s[y],!0),w.coercePosition(t,f,n,S,y,.25),t[y]=m(t[y]),s[y]=I}}o&&T.noneOrAll(s,t,["x0","x1","y0","y1"]);var z,U,R=l==="line";if(o&&(z=n("label.texttemplate")),z||(U=n("label.text")),U||z){n("label.textangle");var j=n("label.textposition",R?"middle":"middle center");n("label.xanchor"),n("label.yanchor",function(Z,F){return Z?"bottom":F.indexOf("top")!==-1?"top":F.indexOf("bottom")!==-1?"bottom":"middle"}(R,j)),n("label.padding"),T.coerceFont(n,"label.font",a.font)}}}N.exports=function(s,t){i(s,t,{name:"shapes",handleItemDefaults:h})}},48100:function(N,L,e){var T=e(71828),w=e(89298),i=e(63893),_=e(91424),v=e(60165).readPaths,h=e(30477),s=h.getPathString,t=e(37281),a=e(18783).FROM_TL;N.exports=function(n,r,l,o){if(o.selectAll(".shape-label").remove(),l.label.text||l.label.texttemplate){var u;if(l.label.texttemplate){var p={};if(l.type!=="path"){var c=w.getFromId(n,l.xref),b=w.getFromId(n,l.yref);for(var g in t){var d=t[g](l,c,b);d!==void 0&&(p[g]=d)}}u=T.texttemplateStringForShapes(l.label.texttemplate,{},n._fullLayout._d3locale,p)}else u=l.label.text;var m,x,y,k,f={"data-index":r},S=l.label.font,M=o.append("g").attr(f).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(l.path){var E=s(n,l),O=v(E,n);m=1/0,y=1/0,x=-1/0,k=-1/0;for(var P=0;P<O.length;P++)for(var I=0;I<O[P].length;I++)for(var z=O[P][I],U=1;U<z.length;U+=2){var R=z[U],j=z[U+1];m=Math.min(m,R),x=Math.max(x,R),y=Math.min(y,j),k=Math.max(k,j)}}else{var Z=w.getFromId(n,l.xref),F=w.getRefType(l.xref),V=w.getFromId(n,l.yref),H=w.getRefType(l.yref),te=h.getDataToPixel(n,Z,!1,F),$=h.getDataToPixel(n,V,!0,H);m=te(l.x0),x=te(l.x1),y=$(l.y0),k=$(l.y1)}var J=l.label.textangle;J==="auto"&&(J=l.type==="line"?function(ae,oe,fe,ge){var ve,xe;return xe=Math.abs(fe-ae),ve=fe>=ae?oe-ge:ge-oe,-180/Math.PI*Math.atan2(ve,xe)}(m,y,x,k):0),M.call(function(ae){return ae.call(_.font,S).attr({}),i.convertToTspans(ae,n),ae});var X=function(ae,oe,fe,ge,ve,xe,_e){var ye,Ce,ke,Te,le=ve.label.textposition,ue=ve.label.textangle,de=ve.label.padding,Le=ve.type,we=Math.PI/180*xe,Ee=Math.sin(we),Oe=Math.cos(we),Fe=ve.label.xanchor,pe=ve.label.yanchor;if(Le==="line"){le==="start"?(ye=ae,Ce=oe):le==="end"?(ye=fe,Ce=ge):(ye=(ae+fe)/2,Ce=(oe+ge)/2),Fe==="auto"&&(Fe=le==="start"?ue==="auto"?fe>ae?"left":fe<ae?"right":"center":fe>ae?"right":fe<ae?"left":"center":le==="end"?ue==="auto"?fe>ae?"right":fe<ae?"left":"center":fe>ae?"left":fe<ae?"right":"center":"center");var be={bottom:-1,middle:0,top:1};if(ue==="auto"){var Me=be[pe];ke=-de*Ee*Me,Te=de*Oe*Me}else ke=de*{left:1,center:0,right:-1}[Fe],Te=de*be[pe];ye+=ke,Ce+=Te}else ke=de+3,le.indexOf("right")!==-1?(ye=Math.max(ae,fe)-ke,Fe==="auto"&&(Fe="right")):le.indexOf("left")!==-1?(ye=Math.min(ae,fe)+ke,Fe==="auto"&&(Fe="left")):(ye=(ae+fe)/2,Fe==="auto"&&(Fe="center")),Ce=le.indexOf("top")!==-1?Math.min(oe,ge):le.indexOf("bottom")!==-1?Math.max(oe,ge):(oe+ge)/2,Te=de,pe==="bottom"?Ce-=Te:pe==="top"&&(Ce+=Te);var De=a[pe],Ne=ve.label.font.size,Be=_e.height;return{textx:ye+(Be*De-Ne)*Ee,texty:Ce+-(Be*De-Ne)*Oe,xanchor:Fe}}(m,y,x,k,l,J,_.bBox(M.node())),K=X.textx,ee=X.texty,ie=X.xanchor;M.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ie],y:ee,x:K,transform:"rotate("+J+","+K+","+ee+")"}).call(i.positionText,K,ee)}}},42359:function(N,L,e){var T=e(71828).strTranslate,w=e(28569),i=e(64505),_=i.drawMode,v=i.selectMode,h=e(73972),s=e(7901),t=e(89995),a=t.i000,n=t.i090,r=t.i180,l=t.i270,o=e(51873).clearOutlineControllers,u=e(60165),p=u.pointsOnRectangle,c=u.pointsOnEllipse,b=u.writePaths,g=e(90551).newShapes,d=e(90551).createShapeObj,m=e(35855),x=e(48100);function y(k,f){var S,M,E,O=k[f][1],P=k[f][2],I=k.length;return M=k[S=(f+1)%I][1],E=k[S][2],M===O&&E===P&&(M=k[S=(f+2)%I][1],E=k[S][2]),[S,M,E]}N.exports=function k(f,S,M,E){E||(E=0);var O=M.gd;function P(){k(f,S,M,E++),(c(f[0])||M.hasText)&&I({redrawing:!0})}function I(ve){var xe={};M.isActiveShape!==void 0&&(M.isActiveShape=!1,xe=g(S,M)),M.isActiveSelection!==void 0&&(M.isActiveSelection=!1,xe=m(S,M),O._fullLayout._reselect=!0),Object.keys(xe).length&&h.call((ve||{}).redrawing?"relayout":"_guiRelayout",O,xe)}var z,U,R,j,Z,F=O._fullLayout._zoomlayer,V=M.dragmode,H=_(V),te=v(V);if((H||te)&&(O._fullLayout._outlining=!0),o(O),S.attr("d",b(f)),E||!M.isActiveShape&&!M.isActiveSelection||(Z=function(ve,xe){for(var _e=0;_e<xe.length;_e++){var ye=xe[_e];ve[_e]=[];for(var Ce=0;Ce<ye.length;Ce++){ve[_e][Ce]=[];for(var ke=0;ke<ye[Ce].length;ke++)ve[_e][Ce][ke]=ye[Ce][ke]}}return ve}([],f),function(ve){z=[];for(var xe=0;xe<f.length;xe++){var _e=f[xe],ye=p(_e),Ce=!ye&&c(_e);z[xe]=[];for(var ke=_e.length,Te=0;Te<ke;Te++)if(_e[Te][0]!=="Z"&&(!Ce||Te===a||Te===n||Te===r||Te===l)){var le,ue=ye&&M.isActiveSelection;ue&&(le=y(_e,Te));var de=_e[Te][1],Le=_e[Te][2],we=ve.append(ue?"rect":"circle").attr("data-i",xe).attr("data-j",Te).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ue){var Ee=le[1]-de,Oe=le[2]-Le,Fe=Oe?5:Math.max(Math.min(25,Math.abs(Ee)-5),5),pe=Ee?5:Math.max(Math.min(25,Math.abs(Oe)-5),5);we.classed(Oe?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Fe).attr("height",pe).attr("x",de-Fe/2).attr("y",Le-pe/2).attr("transform",T(Ee/2,Oe/2))}else we.classed("cursor-grab",!0).attr("r",5).attr("cx",de).attr("cy",Le);z[xe][Te]={element:we.node(),gd:O,prepFn:X,doneFn:ee,clickFn:ie},w.init(z[xe][Te])}}}(F.append("g").attr("class","outline-controllers")),function(){U=[],f.length&&(U[0]={element:S[0][0],gd:O,prepFn:oe,doneFn:fe,clickFn:ge},w.init(U[0]))}()),H&&M.hasText){var $=F.select(".label-temp"),J=d(S,M,M.dragmode);x(O,"label-temp",J,$)}function X(ve){R=+ve.srcElement.getAttribute("data-i"),j=+ve.srcElement.getAttribute("data-j"),z[R][j].moveFn=K}function K(ve,xe){if(f.length){var _e=Z[R][j][1],ye=Z[R][j][2],Ce=f[R],ke=Ce.length;if(p(Ce)){var Te=ve,le=xe;M.isActiveSelection&&(y(Ce,j)[1]===Ce[j][1]?le=0:Te=0);for(var ue=0;ue<ke;ue++)if(ue!==j){var de=Ce[ue];de[1]===Ce[j][1]&&(de[1]=_e+Te),de[2]===Ce[j][2]&&(de[2]=ye+le)}if(Ce[j][1]=_e+Te,Ce[j][2]=ye+le,!p(Ce))for(var Le=0;Le<ke;Le++)for(var we=0;we<Ce[Le].length;we++)Ce[Le][we]=Z[R][Le][we]}else Ce[j][1]=_e+ve,Ce[j][2]=ye+xe;P()}}function ee(){I()}function ie(ve,xe){if(ve===2){R=+xe.srcElement.getAttribute("data-i"),j=+xe.srcElement.getAttribute("data-j");var _e=f[R];p(_e)||c(_e)||function(){if(f.length&&f[R]&&f[R].length){for(var ye=[],Ce=0;Ce<f[R].length;Ce++)Ce!==j&&ye.push(f[R][Ce]);ye.length>1&&(ye.length!==2||ye[1][0]!=="Z")&&(j===0&&(ye[0][0]="M"),f[R]=ye,P(),I())}}()}}function ae(ve,xe){(function(_e,ye){if(f.length)for(var Ce=0;Ce<f.length;Ce++)for(var ke=0;ke<f[Ce].length;ke++)for(var Te=0;Te+2<f[Ce][ke].length;Te+=2)f[Ce][ke][Te+1]=Z[Ce][ke][Te+1]+_e,f[Ce][ke][Te+2]=Z[Ce][ke][Te+2]+ye})(ve,xe),P()}function oe(ve){(R=+ve.srcElement.getAttribute("data-i"))||(R=0),U[R].moveFn=ae}function fe(){I()}function ge(ve){ve===2&&function(xe){if(v(xe._fullLayout.dragmode)){o(xe);var _e=xe._fullLayout._activeSelectionIndex,ye=(xe.layout||{}).selections||[];if(_e<ye.length){for(var Ce=[],ke=0;ke<ye.length;ke++)ke!==_e&&Ce.push(ye[ke]);delete xe._fullLayout._activeSelectionIndex;var Te=xe._fullLayout.selections[_e];xe._fullLayout._deselect={xref:Te.xref,yref:Te.yref},h.call("_guiRelayout",xe,{selections:Ce})}}}(O)}}},34031:function(N,L,e){var T=e(39898),w=e(73972),i=e(71828),_=e(89298),v=e(60165).readPaths,h=e(42359),s=e(48100),t=e(51873).clearOutlineControllers,a=e(7901),n=e(91424),r=e(44467).arrayEditor,l=e(28569),o=e(6964),u=e(21459),p=e(30477),c=p.getPathString;function b(f){var S=f._fullLayout;for(var M in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[M].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var O=0;O<S.shapes.length;O++)S.shapes[O].visible===!0&&m(f,O)}function g(f){return!!f._fullLayout._outlining}function d(f){return!f._context.edits.shapePosition}function m(f,S){f._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var M=p.makeShapesOptionsAndPlotinfo(f,S),E=M.options,O=M.plotinfo;function P(I){var z=c(f,E),U={"data-index":S,"fill-rule":E.fillrule,d:z},R=E.opacity,j=E.fillcolor,Z=E.line.width?E.line.color:"rgba(0,0,0,0)",F=E.line.width,V=E.line.dash;F||E.editable!==!0||(F=5,V="solid");var H=z[z.length-1]!=="Z",te=d(f)&&E.editable&&f._fullLayout._activeShapeIndex===S;te&&(j=H?"rgba(0,0,0,0)":f._fullLayout.activeshape.fillcolor,R=f._fullLayout.activeshape.opacity);var $,J=I.append("g").classed("shape-group",!0).attr({"data-index":S}),X=J.append("path").attr(U).style("opacity",R).call(a.stroke,Z).call(a.fill,j).call(n.dashLine,V,F);if(x(J,f,E),s(f,S,E,J),(te||f._context.edits.shapePosition)&&($=r(f.layout,"shapes",E)),te){X.style({cursor:"move"});var K={element:X.node(),plotinfo:O,gd:f,editHelpers:$,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},ee=v(z,f);h(ee,X,K)}else f._context.edits.shapePosition?function(ie,ae,oe,fe,ge,ve){var xe,_e,ye,Ce,ke,Te,le,ue,de,Le,we,Ee,Oe,Fe,pe,be,Me=10,De=10,Ne=oe.xsizemode==="pixel",Be=oe.ysizemode==="pixel",Ye=oe.type==="line",We=oe.type==="path",et=ve.modifyItem,ft=T.select(ae.node().parentNode),ht=_.getFromId(ie,oe.xref),mt=_.getRefType(oe.xref),Mt=_.getFromId(ie,oe.yref),_t=_.getRefType(oe.yref),it=p.getDataToPixel(ie,ht,!1,mt),st=p.getDataToPixel(ie,Mt,!0,_t),St=p.getPixelToData(ie,ht,!1,mt),zt=p.getPixelToData(ie,Mt,!0,_t),Ft=Ye?function(){var ot=10,je=Math.max(oe.line.width,ot),Ue=ge.append("g").attr("data-index",fe).attr("drag-helper",!0);Ue.append("path").attr("d",ae.attr("d")).style({cursor:"move","stroke-width":je,"stroke-opacity":"0"});var at={"fill-opacity":"0"},$e=Math.max(je/2,ot);return Ue.append("circle").attr({"data-line-point":"start-point",cx:Ne?it(oe.xanchor)+oe.x0:it(oe.x0),cy:Be?st(oe.yanchor)-oe.y0:st(oe.y0),r:$e}).style(at).classed("cursor-grab",!0),Ue.append("circle").attr({"data-line-point":"end-point",cx:Ne?it(oe.xanchor)+oe.x1:it(oe.x1),cy:Be?st(oe.yanchor)-oe.y1:st(oe.y1),r:$e}).style(at).classed("cursor-grab",!0),Ue}():ae,Pt={element:Ft.node(),gd:ie,prepFn:function(ot){g(ie)||(Ne&&(ke=it(oe.xanchor)),Be&&(Te=st(oe.yanchor)),oe.type==="path"?pe=oe.path:(xe=Ne?oe.x0:it(oe.x0),_e=Be?oe.y0:st(oe.y0),ye=Ne?oe.x1:it(oe.x1),Ce=Be?oe.y1:st(oe.y1)),xe<ye?(de=xe,Oe="x0",Le=ye,Fe="x1"):(de=ye,Oe="x1",Le=xe,Fe="x0"),!Be&&_e<Ce||Be&&_e>Ce?(le=_e,we="y0",ue=Ce,Ee="y1"):(le=Ce,we="y1",ue=_e,Ee="y0"),Xe(ot),Je(ge,oe),function(je,Ue,at){var $e=Ue.xref,gt=Ue.yref,yt=_.getFromId(at,$e),xt=_.getFromId(at,gt),dt="";$e==="paper"||yt.autorange||(dt+=$e),gt==="paper"||xt.autorange||(dt+=gt),n.setClipUrl(je,dt?"clip"+at._fullLayout._uid+dt:null,at)}(ae,oe,ie),Pt.moveFn=be==="move"?Ke:He,Pt.altKey=ot.altKey)},doneFn:function(){g(ie)||(o(ae),lt(ge),x(ae,ie,oe),w.call("_guiRelayout",ie,ve.getUpdateObj()))},clickFn:function(){g(ie)||lt(ge)}};function Xe(ot){if(g(ie))be=null;else if(Ye)be=ot.target.tagName==="path"?"move":ot.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var je=Pt.element.getBoundingClientRect(),Ue=je.right-je.left,at=je.bottom-je.top,$e=ot.clientX-je.left,gt=ot.clientY-je.top,yt=!We&&Ue>Me&&at>De&&!ot.shiftKey?l.getCursor($e/Ue,1-gt/at):"move";o(ae,yt),be=yt.split("-")[0]}}function Ke(ot,je){if(oe.type==="path"){var Ue=function(gt){return gt},at=Ue,$e=Ue;Ne?et("xanchor",oe.xanchor=St(ke+ot)):(at=function(gt){return St(it(gt)+ot)},ht&&ht.type==="date"&&(at=p.encodeDate(at))),Be?et("yanchor",oe.yanchor=zt(Te+je)):($e=function(gt){return zt(st(gt)+je)},Mt&&Mt.type==="date"&&($e=p.encodeDate($e))),et("path",oe.path=y(pe,at,$e))}else Ne?et("xanchor",oe.xanchor=St(ke+ot)):(et("x0",oe.x0=St(xe+ot)),et("x1",oe.x1=St(ye+ot))),Be?et("yanchor",oe.yanchor=zt(Te+je)):(et("y0",oe.y0=zt(_e+je)),et("y1",oe.y1=zt(Ce+je)));ae.attr("d",c(ie,oe)),Je(ge,oe),s(ie,fe,oe,ft)}function He(ot,je){if(We){var Ue=function(Vt){return Vt},at=Ue,$e=Ue;Ne?et("xanchor",oe.xanchor=St(ke+ot)):(at=function(Vt){return St(it(Vt)+ot)},ht&&ht.type==="date"&&(at=p.encodeDate(at))),Be?et("yanchor",oe.yanchor=zt(Te+je)):($e=function(Vt){return zt(st(Vt)+je)},Mt&&Mt.type==="date"&&($e=p.encodeDate($e))),et("path",oe.path=y(pe,at,$e))}else if(Ye){if(be==="resize-over-start-point"){var gt=xe+ot,yt=Be?_e-je:_e+je;et("x0",oe.x0=Ne?gt:St(gt)),et("y0",oe.y0=Be?yt:zt(yt))}else if(be==="resize-over-end-point"){var xt=ye+ot,dt=Be?Ce-je:Ce+je;et("x1",oe.x1=Ne?xt:St(xt)),et("y1",oe.y1=Be?dt:zt(dt))}}else{var Lt=function(Vt){return be.indexOf(Vt)!==-1},Tt=Lt("n"),bt=Lt("s"),Ct=Lt("w"),Dt=Lt("e"),Bt=Tt?le+je:le,Xt=bt?ue+je:ue,an=Ct?de+ot:de,Wt=Dt?Le+ot:Le;Be&&(Tt&&(Bt=le-je),bt&&(Xt=ue-je)),(!Be&&Xt-Bt>De||Be&&Bt-Xt>De)&&(et(we,oe[we]=Be?Bt:zt(Bt)),et(Ee,oe[Ee]=Be?Xt:zt(Xt))),Wt-an>Me&&(et(Oe,oe[Oe]=Ne?an:St(an)),et(Fe,oe[Fe]=Ne?Wt:St(Wt)))}ae.attr("d",c(ie,oe)),Je(ge,oe),s(ie,fe,oe,ft)}function Je(ot,je){(Ne||Be)&&function(){var Ue=je.type!=="path",at=ot.selectAll(".visual-cue").data([0]);at.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var $e=it(Ne?je.xanchor:i.midRange(Ue?[je.x0,je.x1]:p.extractPathCoords(je.path,u.paramIsX))),gt=st(Be?je.yanchor:i.midRange(Ue?[je.y0,je.y1]:p.extractPathCoords(je.path,u.paramIsY)));if($e=p.roundPositionForSharpStrokeRendering($e,1),gt=p.roundPositionForSharpStrokeRendering(gt,1),Ne&&Be){var yt="M"+($e-1-1)+","+(gt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";at.attr("d",yt)}else if(Ne){var xt="M"+($e-1-1)+","+(gt-9-1)+"v18 h2 v-18 Z";at.attr("d",xt)}else{var dt="M"+($e-9-1)+","+(gt-1-1)+"h18 v2 h-18 Z";at.attr("d",dt)}}()}function lt(ot){ot.selectAll(".visual-cue").remove()}l.init(Pt),Ft.node().onmousemove=Xe}(f,X,E,S,I,$):E.editable===!0&&X.style("pointer-events",H||a.opacity(j)*R<=.5?"stroke":"all");X.node().addEventListener("click",function(){return function(ie,ae){if(d(ie)){var oe=+ae.node().getAttribute("data-index");if(oe>=0){if(oe===ie._fullLayout._activeShapeIndex)return void k(ie);ie._fullLayout._activeShapeIndex=oe,ie._fullLayout._deactivateShape=k,b(ie)}}}(f,X)})}E._input&&E.visible===!0&&(E.layer!=="below"?P(f._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?P(f._fullLayout._shapeLowerLayer):O._hadPlotinfo?P((O.mainplotinfo||O).shapelayer):P(f._fullLayout._shapeLowerLayer))}function x(f,S,M){var E=(M.xref+M.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(f,E?"clip"+S._fullLayout._uid+E:null,S)}function y(f,S,M){return f.replace(u.segmentRE,function(E){var O=0,P=E.charAt(0),I=u.paramIsX[P],z=u.paramIsY[P],U=u.numParams[P];return P+E.substr(1).replace(u.paramRE,function(R){return O>=U||(I[O]?R=S(R):z[O]&&(R=M(R)),O++),R})})}function k(f){d(f)&&f._fullLayout._activeShapeIndex>=0&&(t(f),delete f._fullLayout._activeShapeIndex,b(f))}N.exports={draw:b,drawOne:m,eraseActiveShape:function(f){if(d(f)){t(f);var S=f._fullLayout._activeShapeIndex,M=(f.layout||{}).shapes||[];if(S<M.length){for(var E=[],O=0;O<M.length;O++)O!==S&&E.push(M[O]);return delete f._fullLayout._activeShapeIndex,w.call("_guiRelayout",f,{shapes:E})}}},drawLabel:s}},29241:function(N,L,e){var T=e(30962).overrideAll,w=e(9012),i=e(41940),_=e(79952).P,v=e(1426).extendFlat,h=e(5386).R,s=e(37281);N.exports=T({newshape:{visible:v({},w.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:v({},w.legend,{}),legendgroup:v({},w.legendgroup,{}),legendgrouptitle:{text:v({},w.legendgrouptitle.text,{}),font:i({})},legendrank:v({},w.legendrank,{}),legendwidth:v({},w.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:v({},_,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:v({},w.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:h({newshape:!0},{keys:Object.keys(s)}),font:i({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function(N){N.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(N,L,e){var T=e(7901),w=e(71828);N.exports=function(i,_,v){if(v("newshape.visible"),v("newshape.name"),v("newshape.showlegend"),v("newshape.legend"),v("newshape.legendwidth"),v("newshape.legendgroup"),v("newshape.legendgrouptitle.text"),w.coerceFont(v,"newshape.legendgrouptitle.font"),v("newshape.legendrank"),v("newshape.drawdirection"),v("newshape.layer"),v("newshape.fillcolor"),v("newshape.fillrule"),v("newshape.opacity"),v("newshape.line.width")){var h=(i||{}).plot_bgcolor||"#FFF";v("newshape.line.color",T.contrast(h)),v("newshape.line.dash")}var s=i.dragmode==="drawline",t=v("newshape.label.text"),a=v("newshape.label.texttemplate");if(t||a){v("newshape.label.textangle");var n=v("newshape.label.textposition",s?"middle":"middle center");v("newshape.label.xanchor"),v("newshape.label.yanchor",function(r,l){return r?"bottom":l.indexOf("top")!==-1?"top":l.indexOf("bottom")!==-1?"bottom":"middle"}(s,n)),v("newshape.label.padding"),w.coerceFont(v,"newshape.label.font",_.font)}v("activeshape.fillcolor"),v("activeshape.opacity")}},60165:function(N,L,e){var T=e(95616),w=e(89995),i=w.CIRCLE_SIDES,_=w.SQRT2,v=e(75549),h=v.p2r,s=v.r2p,t=[0,3,4,5,6,1,2],a=[0,3,4,1,2];function n(l,o){return Math.abs(l-o)<=1e-6}function r(l,o){var u=o[1]-l[1],p=o[2]-l[2];return Math.sqrt(u*u+p*p)}L.writePaths=function(l){var o=l.length;if(!o)return"M0,0Z";for(var u="",p=0;p<o;p++)for(var c=l[p].length,b=0;b<c;b++){var g=l[p][b][0];if(g==="Z")u+="Z";else for(var d=l[p][b].length,m=0;m<d;m++){var x=m;g==="Q"||g==="S"?x=a[m]:g==="C"&&(x=t[m]),u+=l[p][b][x],m>0&&m<d-1&&(u+=",")}}return u},L.readPaths=function(l,o,u,p){var c,b,g,d=T(l),m=[],x=-1,y=0,k=0,f=function(){b=y,g=k};f();for(var S=0;S<d.length;S++){var M,E,O,P,I=[],z=d[S][0],U=z;switch(z){case"M":m[++x]=[],y=+d[S][1],k=+d[S][2],I.push([U,y,k]),f();break;case"Q":case"S":M=+d[S][1],O=+d[S][2],y=+d[S][3],k=+d[S][4],I.push([U,y,k,M,O]);break;case"C":M=+d[S][1],O=+d[S][2],E=+d[S][3],P=+d[S][4],y=+d[S][5],k=+d[S][6],I.push([U,y,k,M,O,E,P]);break;case"T":case"L":y=+d[S][1],k=+d[S][2],I.push([U,y,k]);break;case"H":U="L",y=+d[S][1],I.push([U,y,k]);break;case"V":U="L",k=+d[S][1],I.push([U,y,k]);break;case"A":U="L";var R=+d[S][1],j=+d[S][2];+d[S][4]||(R=-R,j=-j);var Z=y-R,F=k;for(c=1;c<=i/2;c++){var V=2*Math.PI*c/i;I.push([U,Z+R*Math.cos(V),F+j*Math.sin(V)])}break;case"Z":y===b&&k===g||(y=b,k=g,I.push([U,y,k]))}for(var H=(u||{}).domain,te=o._fullLayout._size,$=u&&u.xsizemode==="pixel",J=u&&u.ysizemode==="pixel",X=p===!1,K=0;K<I.length;K++){for(c=0;c+2<7;c+=2){var ee=I[K][c+1],ie=I[K][c+2];ee!==void 0&&ie!==void 0&&(y=ee,k=ie,u&&(u.xaxis&&u.xaxis.p2r?(X&&(ee-=u.xaxis._offset),ee=$?s(u.xaxis,u.xanchor)+ee:h(u.xaxis,ee)):(X&&(ee-=te.l),H?ee=H.x[0]+ee/te.w:ee/=te.w),u.yaxis&&u.yaxis.p2r?(X&&(ie-=u.yaxis._offset),ie=J?s(u.yaxis,u.yanchor)-ie:h(u.yaxis,ie)):(X&&(ie-=te.t),ie=H?H.y[1]-ie/te.h:1-ie/te.h)),I[K][c+1]=ee,I[K][c+2]=ie)}m[x].push(I[K].slice())}}return m},L.pointsOnRectangle=function(l){if(l.length!==5)return!1;for(var o=1;o<3;o++)if(!n(l[0][o]-l[1][o],l[3][o]-l[2][o])||!n(l[0][o]-l[3][o],l[1][o]-l[2][o]))return!1;return!(!n(l[0][1],l[1][1])&&!n(l[0][1],l[3][1])||!(r(l[0],l[1])*r(l[0],l[3])))},L.pointsOnEllipse=function(l){var o=l.length;if(o!==i+1)return!1;o=i;for(var u=0;u<o;u++){var p=(2*o-u)%o,c=(o/2+p)%o,b=(o/2+u)%o;if(!n(r(l[u],l[b]),r(l[p],l[c])))return!1}return!0},L.handleEllipse=function(l,o,u){if(!l)return[o,u];var p=L.ellipseOver({x0:o[0],y0:o[1],x1:u[0],y1:u[1]}),c=(p.x1+p.x0)/2,b=(p.y1+p.y0)/2,g=(p.x1-p.x0)/2,d=(p.y1-p.y0)/2;g||(g=d/=_),d||(d=g/=_);for(var m=[],x=0;x<i;x++){var y=2*x*Math.PI/i;m.push([c+g*Math.cos(y),b+d*Math.sin(y)])}return m},L.ellipseOver=function(l){var o=l.x0,u=l.y0,p=l.x1,c=l.y1,b=p-o,g=c-u,d=((o-=b)+p)/2,m=((u-=g)+c)/2;return{x0:d-(b*=_),y0:m-(g*=_),x1:d+b,y1:m+g}},L.fixDatesForPaths=function(l,o,u){var p=o.type==="date",c=u.type==="date";if(!p&&!c)return l;for(var b=0;b<l.length;b++)for(var g=0;g<l[b].length;g++)for(var d=0;d+2<l[b][g].length;d+=2)p&&(l[b][g][d+1]=l[b][g][d+1].replace(" ","_")),c&&(l[b][g][d+2]=l[b][g][d+2].replace(" ","_"));return l}},90551:function(N,L,e){var T=e(64505),w=T.drawMode,i=T.openMode,_=e(89995),v=_.i000,h=_.i090,s=_.i180,t=_.i270,a=_.cos45,n=_.sin45,r=e(75549),l=r.p2r,o=r.r2p,u=e(51873).clearOutline,p=e(60165),c=p.readPaths,b=p.writePaths,g=p.ellipseOver,d=p.fixDatesForPaths;function m(x,y,k){var f,S=x[0][0],M=y.gd,E=S.getAttribute("d"),O=M._fullLayout.newshape,P=y.plotinfo,I=y.isActiveShape,z=P.xaxis,U=P.yaxis,R=!!P.domain||!P.xaxis,j=!!P.domain||!P.yaxis,Z=i(k),F=c(E,M,P,I),V={editable:!0,visible:O.visible,name:O.name,showlegend:O.showlegend,legend:O.legend,legendwidth:O.legendwidth,legendgroup:O.legendgroup,legendgrouptitle:{text:O.legendgrouptitle.text,font:O.legendgrouptitle.font},legendrank:O.legendrank,label:O.label,xref:R?"paper":z._id,yref:j?"paper":U._id,layer:O.layer,opacity:O.opacity,line:{color:O.line.color,width:O.line.width,dash:O.line.dash}};if(Z||(V.fillcolor=O.fillcolor,V.fillrule=O.fillrule),F.length===1&&(f=F[0]),f&&f.length===5&&k==="drawrect")V.type="rect",V.x0=f[0][1],V.y0=f[0][2],V.x1=f[2][1],V.y1=f[2][2];else if(f&&k==="drawline")V.type="line",V.x0=f[0][1],V.y0=f[0][2],V.x1=f[1][1],V.y1=f[1][2];else if(f&&k==="drawcircle"){V.type="circle";var H=f[v][1],te=f[h][1],$=f[s][1],J=f[t][1],X=f[v][2],K=f[h][2],ee=f[s][2],ie=f[t][2],ae=P.xaxis&&(P.xaxis.type==="date"||P.xaxis.type==="log"),oe=P.yaxis&&(P.yaxis.type==="date"||P.yaxis.type==="log");ae&&(H=o(P.xaxis,H),te=o(P.xaxis,te),$=o(P.xaxis,$),J=o(P.xaxis,J)),oe&&(X=o(P.yaxis,X),K=o(P.yaxis,K),ee=o(P.yaxis,ee),ie=o(P.yaxis,ie));var fe=(te+J)/2,ge=(X+ee)/2,ve=g({x0:fe,y0:ge,x1:fe+(J-te+$-H)/2*a,y1:ge+(ie-K+ee-X)/2*n});ae&&(ve.x0=l(P.xaxis,ve.x0),ve.x1=l(P.xaxis,ve.x1)),oe&&(ve.y0=l(P.yaxis,ve.y0),ve.y1=l(P.yaxis,ve.y1)),V.x0=ve.x0,V.y0=ve.y0,V.x1=ve.x1,V.y1=ve.y1}else V.type="path",z&&U&&d(F,z,U),V.path=b(F),f=null;return V}N.exports={newShapes:function(x,y){if(x.length&&x[0][0]){var k=y.gd,f=y.isActiveShape,S=y.dragmode,M=(k.layout||{}).shapes||[];if(!w(S)&&f!==void 0){var E=k._fullLayout._activeShapeIndex;if(E<M.length)switch(k._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var O=M[E].path||"";S=O[O.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var P=m(x,y,S);u(k);for(var I=y.editHelpers,z=(I||{}).modifyItem,U=[],R=0;R<M.length;R++){var j=k._fullLayout.shapes[R];if(U[R]=j._input,f!==void 0&&R===k._fullLayout._activeShapeIndex){var Z=P;switch(j.type){case"line":case"rect":case"circle":z("x0",Z.x0),z("x1",Z.x1),z("y0",Z.y0),z("y1",Z.y1);break;case"path":z("path",Z.path)}}}return f===void 0?(U.push(P),U):I?I.getUpdateObj():{}}},createShapeObj:m}},51873:function(N){N.exports={clearOutlineControllers:function(L){var e=L._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(L){var e=L._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),L._fullLayout._outlining=!1}}},30477:function(N,L,e){var T=e(21459),w=e(71828),i=e(89298);L.rangeToShapePosition=function(_){return _.type==="log"?_.r2d:function(v){return v}},L.shapePositionToRange=function(_){return _.type==="log"?_.d2r:function(v){return v}},L.decodeDate=function(_){return function(v){return v.replace&&(v=v.replace("_"," ")),_(v)}},L.encodeDate=function(_){return function(v){return _(v).replace(" ","_")}},L.extractPathCoords=function(_,v,h){var s=[];return _.match(T.segmentRE).forEach(function(t){var a=v[t.charAt(0)].drawn;if(a!==void 0){var n=t.substr(1).match(T.paramRE);if(n&&!(n.length<a)){var r=n[a],l=h?r:w.cleanNumber(r);s.push(l)}}}),s},L.getDataToPixel=function(_,v,h,s){var t,a=_._fullLayout._size;if(v)if(s==="domain")t=function(r){return v._length*(h?1-r:r)+v._offset};else{var n=L.shapePositionToRange(v);t=function(r){return v._offset+v.r2p(n(r,!0))},v.type==="date"&&(t=L.decodeDate(t))}else t=h?function(r){return a.t+a.h*(1-r)}:function(r){return a.l+a.w*r};return t},L.getPixelToData=function(_,v,h,s){var t,a=_._fullLayout._size;if(v)if(s==="domain")t=function(r){var l=(r-v._offset)/v._length;return h?1-l:l};else{var n=L.rangeToShapePosition(v);t=function(r){return n(v.p2r(r-v._offset))}}else t=h?function(r){return 1-(r-a.t)/a.h}:function(r){return(r-a.l)/a.w};return t},L.roundPositionForSharpStrokeRendering=function(_,v){var h=Math.round(v%2)===1,s=Math.round(_);return h?s+.5:s},L.makeShapesOptionsAndPlotinfo=function(_,v){var h=_._fullLayout.shapes[v]||{},s=_._fullLayout._plots[h.xref+h.yref];return s?s._hadPlotinfo=!0:(s={},h.xref&&h.xref!=="paper"&&(s.xaxis=_._fullLayout[h.xref+"axis"]),h.yref&&h.yref!=="paper"&&(s.yaxis=_._fullLayout[h.yref+"axis"])),s.xsizemode=h.xsizemode,s.ysizemode=h.ysizemode,s.xanchor=h.xanchor,s.yanchor=h.yanchor,{options:h,plotinfo:s}},L.makeSelectionsOptionsAndPlotinfo=function(_,v){var h=_._fullLayout.selections[v]||{},s=_._fullLayout._plots[h.xref+h.yref];return s?s._hadPlotinfo=!0:(s={},h.xref&&(s.xaxis=_._fullLayout[h.xref+"axis"]),h.yref&&(s.yaxis=_._fullLayout[h.yref+"axis"])),{options:h,plotinfo:s}},L.getPathString=function(_,v){var h,s,t,a,n,r,l,o,u=v.type,p=i.getRefType(v.xref),c=i.getRefType(v.yref),b=i.getFromId(_,v.xref),g=i.getFromId(_,v.yref),d=_._fullLayout._size;if(b?p==="domain"?s=function(O){return b._offset+b._length*O}:(h=L.shapePositionToRange(b),s=function(O){return b._offset+b.r2p(h(O,!0))}):s=function(O){return d.l+d.w*O},g?c==="domain"?a=function(O){return g._offset+g._length*(1-O)}:(t=L.shapePositionToRange(g),a=function(O){return g._offset+g.r2p(t(O,!0))}):a=function(O){return d.t+d.h*(1-O)},u==="path")return b&&b.type==="date"&&(s=L.decodeDate(s)),g&&g.type==="date"&&(a=L.decodeDate(a)),function(O,P,I){var z=O.path,U=O.xsizemode,R=O.ysizemode,j=O.xanchor,Z=O.yanchor;return z.replace(T.segmentRE,function(F){var V=0,H=F.charAt(0),te=T.paramIsX[H],$=T.paramIsY[H],J=T.numParams[H],X=F.substr(1).replace(T.paramRE,function(K){return te[V]?K=U==="pixel"?P(j)+Number(K):P(K):$[V]&&(K=R==="pixel"?I(Z)-Number(K):I(K)),++V>J&&(K="X"),K});return V>J&&(X=X.replace(/[\s,]*X.*/,""),w.log("Ignoring extra params in segment "+F)),H+X})}(v,s,a);if(v.xsizemode==="pixel"){var m=s(v.xanchor);n=m+v.x0,r=m+v.x1}else n=s(v.x0),r=s(v.x1);if(v.ysizemode==="pixel"){var x=a(v.yanchor);l=x-v.y0,o=x-v.y1}else l=a(v.y0),o=a(v.y1);if(u==="line")return"M"+n+","+l+"L"+r+","+o;if(u==="rect")return"M"+n+","+l+"H"+r+"V"+o+"H"+n+"Z";var y=(n+r)/2,k=(l+o)/2,f=Math.abs(y-n),S=Math.abs(k-l),M="A"+f+","+S,E=y+f+","+k;return"M"+E+M+" 0 1,1 "+y+","+(k-S)+M+" 0 0,1 "+E+"Z"}},89853:function(N,L,e){var T=e(34031);N.exports={moduleType:"component",name:"shapes",layoutAttributes:e(89827),supplyLayoutDefaults:e(84726),supplyDrawNewShapeDefaults:e(45547),includeBasePlot:e(76325)("shapes"),calcAutorange:e(5627),draw:T.draw,drawOne:T.drawOne}},37281:function(N){function L(i,_){return _?_.d2l(i):i}function e(i,_){return _?_.l2d(i):i}function T(i,_){return L(i.x1,_)-L(i.x0,_)}function w(i,_,v){return L(i.y1,v)-L(i.y0,v)}N.exports={x0:function(i){return i.x0},x1:function(i){return i.x1},y0:function(i){return i.y0},y1:function(i){return i.y1},slope:function(i,_,v){return i.type!=="line"?void 0:w(i,0,v)/T(i,_)},dx:T,dy:w,width:function(i,_){return Math.abs(T(i,_))},height:function(i,_,v){return Math.abs(w(i,0,v))},length:function(i,_,v){return i.type!=="line"?void 0:Math.sqrt(Math.pow(T(i,_),2)+Math.pow(w(i,0,v),2))},xcenter:function(i,_){return e((L(i.x1,_)+L(i.x0,_))/2,_)},ycenter:function(i,_,v){return e((L(i.y1,v)+L(i.y0,v))/2,v)}}},75067:function(N,L,e){var T=e(41940),w=e(35025),i=e(1426).extendDeepAll,_=e(30962).overrideAll,v=e(85594),h=e(44467).templatedArray,s=e(98292),t=h("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});N.exports=_(h("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(w({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:v.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:T({})},font:T({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},98292:function(N){N.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(N,L,e){var T=e(71828),w=e(85501),i=e(75067),_=e(98292).name,v=i.steps;function h(t,a,n){function r(c,b){return T.coerce(t,a,i,c,b)}for(var l=w(t,a,{name:"steps",handleItemDefaults:s}),o=0,u=0;u<l.length;u++)l[u].visible&&o++;if(o<2?a.visible=!1:r("visible")){a._stepCount=o;var p=a._visibleSteps=T.filterVisible(l);(l[r("active")]||{}).visible||(a.active=p[0]._index),r("x"),r("y"),T.noneOrAll(t,a,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),T.coerceFont(r,"font",n.font),r("currentvalue.visible")&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),T.coerceFont(r,"currentvalue.font",a.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen")}}function s(t,a){function n(l,o){return T.coerce(t,a,v,l,o)}if(t.method==="skip"||Array.isArray(t.args)?n("visible"):a.visible=!1){n("method"),n("args");var r=n("label","step-"+a._index);n("value",r),n("execute")}}N.exports=function(t,a){w(t,a,{name:_,handleItemDefaults:h})}},44504:function(N,L,e){var T=e(39898),w=e(74875),i=e(7901),_=e(91424),v=e(71828),h=v.strTranslate,s=e(63893),t=e(44467).arrayEditor,a=e(98292),n=e(18783),r=n.LINE_SPACING,l=n.FROM_TL,o=n.FROM_BR;function u(I){return a.autoMarginIdRoot+I._index}function p(I){return I._index}function c(I,z){var U=_.tester.selectAll("g."+a.labelGroupClass).data(z._visibleSteps);U.enter().append("g").classed(a.labelGroupClass,!0);var R=0,j=0;U.each(function(K){var ee=d(T.select(this),{step:K},z).node();if(ee){var ie=_.bBox(ee);j=Math.max(j,ie.height),R=Math.max(R,ie.width)}}),U.remove();var Z=z._dims={};Z.inputAreaWidth=Math.max(a.railWidth,a.gripHeight);var F=I._fullLayout._size;Z.lx=F.l+F.w*z.x,Z.ly=F.t+F.h*(1-z.y),z.lenmode==="fraction"?Z.outerLength=Math.round(F.w*z.len):Z.outerLength=z.len,Z.inputAreaStart=0,Z.inputAreaLength=Math.round(Z.outerLength-z.pad.l-z.pad.r);var V=(Z.inputAreaLength-2*a.stepInset)/(z._stepCount-1),H=R+a.labelPadding;if(Z.labelStride=Math.max(1,Math.ceil(H/V)),Z.labelHeight=j,Z.currentValueMaxWidth=0,Z.currentValueHeight=0,Z.currentValueTotalHeight=0,Z.currentValueMaxLines=1,z.currentvalue.visible){var te=_.tester.append("g");U.each(function(K){var ee=b(te,z,K.label),ie=ee.node()&&_.bBox(ee.node())||{width:0,height:0},ae=s.lineCount(ee);Z.currentValueMaxWidth=Math.max(Z.currentValueMaxWidth,Math.ceil(ie.width)),Z.currentValueHeight=Math.max(Z.currentValueHeight,Math.ceil(ie.height)),Z.currentValueMaxLines=Math.max(Z.currentValueMaxLines,ae)}),Z.currentValueTotalHeight=Z.currentValueHeight+z.currentvalue.offset,te.remove()}Z.height=Z.currentValueTotalHeight+a.tickOffset+z.ticklen+a.labelOffset+Z.labelHeight+z.pad.t+z.pad.b;var $="left";v.isRightAnchor(z)&&(Z.lx-=Z.outerLength,$="right"),v.isCenterAnchor(z)&&(Z.lx-=Z.outerLength/2,$="center");var J="top";v.isBottomAnchor(z)&&(Z.ly-=Z.height,J="bottom"),v.isMiddleAnchor(z)&&(Z.ly-=Z.height/2,J="middle"),Z.outerLength=Math.ceil(Z.outerLength),Z.height=Math.ceil(Z.height),Z.lx=Math.round(Z.lx),Z.ly=Math.round(Z.ly);var X={y:z.y,b:Z.height*o[J],t:Z.height*l[J]};z.lenmode==="fraction"?(X.l=0,X.xl=z.x-z.len*l[$],X.r=0,X.xr=z.x+z.len*o[$]):(X.x=z.x,X.l=Z.outerLength*l[$],X.r=Z.outerLength*o[$]),w.autoMargin(I,u(z),X)}function b(I,z,U){if(z.currentvalue.visible){var R,j,Z=z._dims;switch(z.currentvalue.xanchor){case"right":R=Z.inputAreaLength-a.currentValueInset-Z.currentValueMaxWidth,j="left";break;case"center":R=.5*Z.inputAreaLength,j="middle";break;default:R=a.currentValueInset,j="left"}var F=v.ensureSingle(I,"text",a.labelClass,function(X){X.attr({"text-anchor":j,"data-notex":1})}),V=z.currentvalue.prefix?z.currentvalue.prefix:"";if(typeof U=="string")V+=U;else{var H=z.steps[z.active].label,te=z._gd._fullLayout._meta;te&&(H=v.templateString(H,te)),V+=H}z.currentvalue.suffix&&(V+=z.currentvalue.suffix),F.call(_.font,z.currentvalue.font).text(V).call(s.convertToTspans,z._gd);var $=s.lineCount(F),J=(Z.currentValueMaxLines+1-$)*z.currentvalue.font.size*r;return s.positionText(F,R,J),F}}function g(I,z,U){v.ensureSingle(I,"rect",a.gripRectClass,function(R){R.call(k,z,I,U).style("pointer-events","all")}).attr({width:a.gripWidth,height:a.gripHeight,rx:a.gripRadius,ry:a.gripRadius}).call(i.stroke,U.bordercolor).call(i.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function d(I,z,U){var R=v.ensureSingle(I,"text",a.labelClass,function(F){F.attr({"text-anchor":"middle","data-notex":1})}),j=z.step.label,Z=U._gd._fullLayout._meta;return Z&&(j=v.templateString(j,Z)),R.call(_.font,U.font).text(j).call(s.convertToTspans,U._gd),R}function m(I,z){var U=v.ensureSingle(I,"g",a.labelsClass),R=z._dims,j=U.selectAll("g."+a.labelGroupClass).data(R.labelSteps);j.enter().append("g").classed(a.labelGroupClass,!0),j.exit().remove(),j.each(function(Z){var F=T.select(this);F.call(d,Z,z),_.setTranslate(F,M(z,Z.fraction),a.tickOffset+z.ticklen+z.font.size*r+a.labelOffset+R.currentValueTotalHeight)})}function x(I,z,U,R,j){var Z=Math.round(R*(U._stepCount-1)),F=U._visibleSteps[Z]._index;F!==U.active&&y(I,z,U,F,!0,j)}function y(I,z,U,R,j,Z){var F=U.active;U.active=R,t(I.layout,a.name,U).applyUpdate("active",R);var V=U.steps[U.active];z.call(S,U,Z),z.call(b,U),I.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:j,previousActive:F}),V&&V.method&&j&&(z._nextMethod?(z._nextMethod.step=V,z._nextMethod.doCallback=j,z._nextMethod.doTransition=Z):(z._nextMethod={step:V,doCallback:j,doTransition:Z},z._nextMethodRaf=window.requestAnimationFrame(function(){var H=z._nextMethod.step;H.method&&(H.execute&&w.executeAPICommand(I,H.method,H.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function k(I,z,U){if(!z._context.staticPlot){var R=U.node(),j=T.select(z);I.on("mousedown",F),I.on("touchstart",F)}function Z(){return U.data()[0]}function F(){var V=Z();z.emit("plotly_sliderstart",{slider:V});var H=U.select("."+a.gripRectClass);T.event.stopPropagation(),T.event.preventDefault(),H.call(i.fill,V.activebgcolor);var te=E(V,T.mouse(R)[0]);function $(){var X=Z(),K=E(X,T.mouse(R)[0]);x(z,U,X,K,!1)}function J(){var X=Z();X._dragging=!1,H.call(i.fill,X.bgcolor),j.on("mouseup",null),j.on("mousemove",null),j.on("touchend",null),j.on("touchmove",null),z.emit("plotly_sliderend",{slider:X,step:X.steps[X.active]})}x(z,U,V,te,!0),V._dragging=!0,j.on("mousemove",$),j.on("touchmove",$),j.on("mouseup",J),j.on("touchend",J)}}function f(I,z){var U=I.selectAll("rect."+a.tickRectClass).data(z._visibleSteps),R=z._dims;U.enter().append("rect").classed(a.tickRectClass,!0),U.exit().remove(),U.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(j,Z){var F=Z%R.labelStride==0,V=T.select(this);V.attr({height:F?z.ticklen:z.minorticklen}).call(i.fill,z.tickcolor),_.setTranslate(V,M(z,Z/(z._stepCount-1))-.5*z.tickwidth,(F?a.tickOffset:a.minorTickOffset)+R.currentValueTotalHeight)})}function S(I,z,U){for(var R=I.select("rect."+a.gripRectClass),j=0,Z=0;Z<z._stepCount;Z++)if(z._visibleSteps[Z]._index===z.active){j=Z;break}var F=M(z,j/(z._stepCount-1));if(!z._invokingCommand){var V=R;U&&z.transition.duration>0&&(V=V.transition().duration(z.transition.duration).ease(z.transition.easing)),V.attr("transform",h(F-.5*a.gripWidth,z._dims.currentValueTotalHeight))}}function M(I,z){var U=I._dims;return U.inputAreaStart+a.stepInset+(U.inputAreaLength-2*a.stepInset)*Math.min(1,Math.max(0,z))}function E(I,z){var U=I._dims;return Math.min(1,Math.max(0,(z-a.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*a.stepInset-2*U.inputAreaStart)))}function O(I,z,U){var R=U._dims,j=v.ensureSingle(I,"rect",a.railTouchRectClass,function(Z){Z.call(k,z,I,U).style("pointer-events","all")});j.attr({width:R.inputAreaLength,height:Math.max(R.inputAreaWidth,a.tickOffset+U.ticklen+R.labelHeight)}).call(i.fill,U.bgcolor).attr("opacity",0),_.setTranslate(j,0,R.currentValueTotalHeight)}function P(I,z){var U=z._dims,R=U.inputAreaLength-2*a.railInset,j=v.ensureSingle(I,"rect",a.railRectClass);j.attr({width:R,height:a.railWidth,rx:a.railRadius,ry:a.railRadius,"shape-rendering":"crispEdges"}).call(i.stroke,z.bordercolor).call(i.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),_.setTranslate(j,a.railInset,.5*(U.inputAreaWidth-a.railWidth)+U.currentValueTotalHeight)}N.exports=function(I){var z=I._context.staticPlot,U=I._fullLayout,R=function(te,$){for(var J=te[a.name],X=[],K=0;K<J.length;K++){var ee=J[K];ee.visible&&(ee._gd=$,X.push(ee))}return X}(U,I),j=U._infolayer.selectAll("g."+a.containerClassName).data(R.length>0?[0]:[]);function Z(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),w.autoMargin(I,u(te))}if(j.enter().append("g").classed(a.containerClassName,!0).style("cursor",z?null:"ew-resize"),j.exit().each(function(){T.select(this).selectAll("g."+a.groupClassName).each(Z)}).remove(),R.length!==0){var F=j.selectAll("g."+a.groupClassName).data(R,p);F.enter().append("g").classed(a.groupClassName,!0),F.exit().each(Z).remove();for(var V=0;V<R.length;V++){var H=R[V];c(I,H)}F.each(function(te){var $=T.select(this);(function(J){var X=J._dims;X.labelSteps=[];for(var K=J._stepCount,ee=0;ee<K;ee+=X.labelStride)X.labelSteps.push({fraction:ee/(K-1),step:J._visibleSteps[ee]})})(te),w.manageCommandObserver(I,te,te._visibleSteps,function(J){var X=$.data()[0];X.active!==J.index&&(X._dragging||y(I,$,X,J.index,!1,!0))}),function(J,X,K){(K.steps[K.active]||{}).visible||(K.active=K._visibleSteps[0]._index),X.call(b,K).call(P,K).call(m,K).call(f,K).call(O,J,K).call(g,J,K);var ee=K._dims;_.setTranslate(X,ee.lx+K.pad.l,ee.ly+K.pad.t),X.call(S,K,!1),X.call(b,K)}(I,T.select(this),te)})}}},23243:function(N,L,e){var T=e(98292);N.exports={moduleType:"component",name:T.name,layoutAttributes:e(75067),supplyLayoutDefaults:e(12343),draw:e(44504)}},92998:function(N,L,e){var T=e(39898),w=e(92770),i=e(74875),_=e(73972),v=e(71828),h=v.strTranslate,s=e(91424),t=e(7901),a=e(63893),n=e(37822),r=e(18783).OPPOSITE_SIDE,l=/ [XY][0-9]* /;N.exports={draw:function(o,u,p){var c,b=p.propContainer,g=p.propName,d=p.placeholder,m=p.traceIndex,x=p.avoid||{},y=p.attributes,k=p.transform,f=p.containerGroup,S=o._fullLayout,M=1,E=!1,O=b.title,P=(O&&O.text?O.text:"").trim(),I=O&&O.font?O.font:{},z=I.family,U=I.size,R=I.color;g==="title.text"?c="titleText":g.indexOf("axis")!==-1?c="axisTitleText":g.indexOf(!0)&&(c="colorbarTitleText");var j=o._context.edits[c];P===""?M=0:P.replace(l," % ")===d.replace(l," % ")&&(M=.2,E=!0,j||(P="")),p._meta?P=v.templateString(P,p._meta):S._meta&&(P=v.templateString(P,S._meta));var Z,F=P||j;f||(f=v.ensureSingle(S._infolayer,"g","g-"+u),Z=S._hColorbarMoveTitle);var V=f.selectAll("text").data(F?[0]:[]);if(V.enter().append("text"),V.text(P).attr("class",u),V.exit().remove(),!F)return f;function H(J){v.syncOrAsync([te,$],J)}function te(J){var X;return!k&&Z&&(k={}),k?(X="",k.rotate&&(X+="rotate("+[k.rotate,y.x,y.y]+")"),(k.offset||Z)&&(X+=h(0,(k.offset||0)-(Z||0)))):X=null,J.attr("transform",X),J.style({"font-family":z,"font-size":T.round(U,2)+"px",fill:t.rgb(R),opacity:M*t.opacity(R),"font-weight":i.fontWeight}).attr(y).call(a.convertToTspans,o),i.previousPromises(o)}function $(J){var X=T.select(J.node().parentNode);if(x&&x.selection&&x.side&&P){X.attr("transform",null);var K=r[x.side],ee=x.side==="left"||x.side==="top"?-1:1,ie=w(x.pad)?x.pad:2,ae=s.bBox(X.node()),oe={t:0,b:0,l:0,r:0},fe=o._fullLayout._reservedMargin;for(var ge in fe)for(var ve in fe[ge]){var xe=fe[ge][ve];oe[ve]=Math.max(oe[ve],xe)}var _e={left:oe.l,top:oe.t,right:S.width-oe.r,bottom:S.height-oe.b},ye=x.maxShift||ee*(_e[x.side]-ae[x.side]),Ce=0;if(ye<0)Ce=ye;else{var ke=x.offsetLeft||0,Te=x.offsetTop||0;ae.left-=ke,ae.right-=ke,ae.top-=Te,ae.bottom-=Te,x.selection.each(function(){var ue=s.bBox(this);v.bBoxIntersect(ae,ue,ie)&&(Ce=Math.max(Ce,ee*(ue[x.side]-ae[K])+ie))}),Ce=Math.min(ye,Ce),b._titleScoot=Math.abs(Ce)}if(Ce>0||ye<0){var le={left:[-Ce,0],right:[Ce,0],top:[0,-Ce],bottom:[0,Ce]}[x.side];X.attr("transform",h(le[0],le[1]))}}}return V.call(H),j&&(P?V.on(".opacity",null):(M=0,E=!0,V.text(d).on("mouseover.opacity",function(){T.select(this).transition().duration(n.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){T.select(this).transition().duration(n.HIDE_PLACEHOLDER).style("opacity",0)})),V.call(a.makeEditable,{gd:o}).on("edit",function(J){m!==void 0?_.call("_guiRestyle",o,g,J,m):_.call("_guiRelayout",o,g,J)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(H)}).on("input",function(J){this.text(J||" ").call(a.positionText,y.x,y.y)})),V.classed("js-placeholder",E),f}}},7163:function(N,L,e){var T=e(41940),w=e(22399),i=e(1426).extendFlat,_=e(30962).overrideAll,v=e(35025),h=e(44467).templatedArray,s=h("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});N.exports=_(h("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(v({editType:"arraydraw"}),{}),font:T({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:w.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(N){N.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},64897:function(N,L,e){var T=e(71828),w=e(85501),i=e(7163),_=e(75909).name,v=i.buttons;function h(t,a,n){function r(l,o){return T.coerce(t,a,i,l,o)}r("visible",w(t,a,{name:"buttons",handleItemDefaults:s}).length>0)&&(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),T.noneOrAll(t,a,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),T.coerceFont(r,"font",n.font),r("bgcolor",n.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function s(t,a){function n(r,l){return T.coerce(t,a,v,r,l)}n("visible",t.method==="skip"||Array.isArray(t.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}N.exports=function(t,a){w(t,a,{name:_,handleItemDefaults:h})}},13689:function(N,L,e){var T=e(39898),w=e(74875),i=e(7901),_=e(91424),v=e(71828),h=e(63893),s=e(44467).arrayEditor,t=e(18783).LINE_SPACING,a=e(75909),n=e(25849);function r(M){return M._index}function l(M,E){return+M.attr(a.menuIndexAttrName)===E._index}function o(M,E,O,P,I,z,U,R){E.active=U,s(M.layout,a.name,E).applyUpdate("active",U),E.type==="buttons"?p(M,P,null,null,E):E.type==="dropdown"&&(I.attr(a.menuIndexAttrName,"-1"),u(M,P,I,z,E),R||p(M,P,I,z,E))}function u(M,E,O,P,I){var z=v.ensureSingle(E,"g",a.headerClassName,function(V){V.style("pointer-events","all")}),U=I._dims,R=I.active,j=I.buttons[R]||a.blankHeaderOpts,Z={y:I.pad.t,yPad:0,x:I.pad.l,xPad:0,index:0},F={width:U.headerWidth,height:U.headerHeight};z.call(c,I,j,M).call(f,I,Z,F),v.ensureSingle(E,"text",a.headerArrowClassName,function(V){V.attr("text-anchor","end").call(_.font,I.font).text(a.arrowSymbol[I.direction])}).attr({x:U.headerWidth-a.arrowOffsetX+I.pad.l,y:U.headerHeight/2+a.textOffsetY+I.pad.t}),z.on("click",function(){O.call(S,String(l(O,I)?-1:I._index)),p(M,E,O,P,I)}),z.on("mouseover",function(){z.call(m)}),z.on("mouseout",function(){z.call(x,I)}),_.setTranslate(E,U.lx,U.ly)}function p(M,E,O,P,I){O||(O=E).attr("pointer-events","all");var z=function(X){return+X.attr(a.menuIndexAttrName)==-1}(O)&&I.type!=="buttons"?[]:I.buttons,U=I.type==="dropdown"?a.dropdownButtonClassName:a.buttonClassName,R=O.selectAll("g."+U).data(v.filterVisible(z)),j=R.enter().append("g").classed(U,!0),Z=R.exit();I.type==="dropdown"?(j.attr("opacity","0").transition().attr("opacity","1"),Z.transition().attr("opacity","0").remove()):Z.remove();var F=0,V=0,H=I._dims,te=["up","down"].indexOf(I.direction)!==-1;I.type==="dropdown"&&(te?V=H.headerHeight+a.gapButtonHeader:F=H.headerWidth+a.gapButtonHeader),I.type==="dropdown"&&I.direction==="up"&&(V=-a.gapButtonHeader+a.gapButton-H.openHeight),I.type==="dropdown"&&I.direction==="left"&&(F=-a.gapButtonHeader+a.gapButton-H.openWidth);var $={x:H.lx+F+I.pad.l,y:H.ly+V+I.pad.t,yPad:a.gapButton,xPad:a.gapButton,index:0},J={l:$.x+I.borderwidth,t:$.y+I.borderwidth};R.each(function(X,K){var ee=T.select(this);ee.call(c,I,X,M).call(f,I,$),ee.on("click",function(){T.event.defaultPrevented||(X.execute&&(X.args2&&I.active===K?(o(M,I,0,E,O,P,-1),w.executeAPICommand(M,X.method,X.args2)):(o(M,I,0,E,O,P,K),w.executeAPICommand(M,X.method,X.args))),M.emit("plotly_buttonclicked",{menu:I,button:X,active:I.active}))}),ee.on("mouseover",function(){ee.call(m)}),ee.on("mouseout",function(){ee.call(x,I),R.call(d,I)})}),R.call(d,I),te?(J.w=Math.max(H.openWidth,H.headerWidth),J.h=$.y-J.t):(J.w=$.x-J.l,J.h=Math.max(H.openHeight,H.headerHeight)),J.direction=I.direction,P&&(R.size()?function(X,K,ee,ie,ae,oe){var fe,ge,ve,xe=ae.direction,_e=xe==="up"||xe==="down",ye=ae._dims,Ce=ae.active;if(_e)for(ge=0,ve=0;ve<Ce;ve++)ge+=ye.heights[ve]+a.gapButton;else for(fe=0,ve=0;ve<Ce;ve++)fe+=ye.widths[ve]+a.gapButton;ie.enable(oe,fe,ge),ie.hbar&&ie.hbar.attr("opacity","0").transition().attr("opacity","1"),ie.vbar&&ie.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,P,I,J):function(X){var K=!!X.hbar,ee=!!X.vbar;K&&X.hbar.transition().attr("opacity","0").each("end",function(){K=!1,ee||X.disable()}),ee&&X.vbar.transition().attr("opacity","0").each("end",function(){ee=!1,K||X.disable()})}(P))}function c(M,E,O,P){M.call(b,E).call(g,E,O,P)}function b(M,E){v.ensureSingle(M,"rect",a.itemRectClassName,function(O){O.attr({rx:a.rx,ry:a.ry,"shape-rendering":"crispEdges"})}).call(i.stroke,E.bordercolor).call(i.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function g(M,E,O,P){var I=v.ensureSingle(M,"text",a.itemTextClassName,function(R){R.attr({"text-anchor":"start","data-notex":1})}),z=O.label,U=P._fullLayout._meta;U&&(z=v.templateString(z,U)),I.call(_.font,E.font).text(z).call(h.convertToTspans,P)}function d(M,E){var O=E.active;M.each(function(P,I){var z=T.select(this);I===O&&E.showactive&&z.select("rect."+a.itemRectClassName).call(i.fill,a.activeColor)})}function m(M){M.select("rect."+a.itemRectClassName).call(i.fill,a.hoverColor)}function x(M,E){M.select("rect."+a.itemRectClassName).call(i.fill,E.bgcolor)}function y(M,E){var O=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},P=_.tester.selectAll("g."+a.dropdownButtonClassName).data(v.filterVisible(E.buttons));P.enter().append("g").classed(a.dropdownButtonClassName,!0);var I=["up","down"].indexOf(E.direction)!==-1;P.each(function(F,V){var H=T.select(this);H.call(c,E,F,M);var te=H.select("."+a.itemTextClassName),$=te.node()&&_.bBox(te.node()).width,J=Math.max($+a.textPadX,a.minWidth),X=E.font.size*t,K=h.lineCount(te),ee=Math.max(X*K,a.minHeight)+a.textOffsetY;ee=Math.ceil(ee),J=Math.ceil(J),O.widths[V]=J,O.heights[V]=ee,O.height1=Math.max(O.height1,ee),O.width1=Math.max(O.width1,J),I?(O.totalWidth=Math.max(O.totalWidth,J),O.openWidth=O.totalWidth,O.totalHeight+=ee+a.gapButton,O.openHeight+=ee+a.gapButton):(O.totalWidth+=J+a.gapButton,O.openWidth+=J+a.gapButton,O.totalHeight=Math.max(O.totalHeight,ee),O.openHeight=O.totalHeight)}),I?O.totalHeight-=a.gapButton:O.totalWidth-=a.gapButton,O.headerWidth=O.width1+a.arrowPadX,O.headerHeight=O.height1,E.type==="dropdown"&&(I?(O.width1+=a.arrowPadX,O.totalHeight=O.height1):O.totalWidth=O.width1,O.totalWidth+=a.arrowPadX),P.remove();var z=O.totalWidth+E.pad.l+E.pad.r,U=O.totalHeight+E.pad.t+E.pad.b,R=M._fullLayout._size;O.lx=R.l+R.w*E.x,O.ly=R.t+R.h*(1-E.y);var j="left";v.isRightAnchor(E)&&(O.lx-=z,j="right"),v.isCenterAnchor(E)&&(O.lx-=z/2,j="center");var Z="top";v.isBottomAnchor(E)&&(O.ly-=U,Z="bottom"),v.isMiddleAnchor(E)&&(O.ly-=U/2,Z="middle"),O.totalWidth=Math.ceil(O.totalWidth),O.totalHeight=Math.ceil(O.totalHeight),O.lx=Math.round(O.lx),O.ly=Math.round(O.ly),w.autoMargin(M,k(E),{x:E.x,y:E.y,l:z*({right:1,center:.5}[j]||0),r:z*({left:1,center:.5}[j]||0),b:U*({top:1,middle:.5}[Z]||0),t:U*({bottom:1,middle:.5}[Z]||0)})}function k(M){return a.autoMarginIdRoot+M._index}function f(M,E,O,P){P=P||{};var I=M.select("."+a.itemRectClassName),z=M.select("."+a.itemTextClassName),U=E.borderwidth,R=O.index,j=E._dims;_.setTranslate(M,U+O.x,U+O.y);var Z=["up","down"].indexOf(E.direction)!==-1,F=P.height||(Z?j.heights[R]:j.height1);I.attr({x:0,y:0,width:P.width||(Z?j.width1:j.widths[R]),height:F});var V=E.font.size*t,H=(h.lineCount(z)-1)*V/2;h.positionText(z,a.textOffsetX,F/2-H+a.textOffsetY),Z?O.y+=j.heights[R]+O.yPad:O.x+=j.widths[R]+O.xPad,O.index++}function S(M,E){M.attr(a.menuIndexAttrName,E||"-1").selectAll("g."+a.dropdownButtonClassName).remove()}N.exports=function(M){var E=M._fullLayout,O=v.filterVisible(E[a.name]);function P(V){w.autoMargin(M,k(V))}var I=E._menulayer.selectAll("g."+a.containerClassName).data(O.length>0?[0]:[]);if(I.enter().append("g").classed(a.containerClassName,!0).style("cursor","pointer"),I.exit().each(function(){T.select(this).selectAll("g."+a.headerGroupClassName).each(P)}).remove(),O.length!==0){var z=I.selectAll("g."+a.headerGroupClassName).data(O,r);z.enter().append("g").classed(a.headerGroupClassName,!0);for(var U=v.ensureSingle(I,"g",a.dropdownButtonGroupClassName,function(V){V.style("pointer-events","all")}),R=0;R<O.length;R++){var j=O[R];y(M,j)}var Z="updatemenus"+E._uid,F=new n(M,U,Z);z.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(S)),z.exit().each(function(V){U.call(S),P(V)}).remove(),z.each(function(V){var H=T.select(this),te=V.type==="dropdown"?U:null;w.manageCommandObserver(M,V,V.buttons,function($){o(M,V,V.buttons[$.index],H,te,F,$.index,!0)}),V.type==="dropdown"?(u(M,H,U,F,V),l(U,V)&&p(M,H,U,F,V)):p(M,H,null,null,V)})}}},20763:function(N,L,e){var T=e(75909);N.exports={moduleType:"component",name:T.name,layoutAttributes:e(7163),supplyLayoutDefaults:e(64897),draw:e(13689)}},25849:function(N,L,e){N.exports=v;var T=e(39898),w=e(7901),i=e(91424),_=e(71828);function v(h,s,t){this.gd=h,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}v.barWidth=2,v.barLength=20,v.barRadius=2,v.barPad=1,v.barColor="#808BA4",v.prototype.enable=function(h,s,t){var a=this.gd._fullLayout,n=a.width,r=a.height;this.position=h;var l,o,u,p,c=this.position.l,b=this.position.w,g=this.position.t,d=this.position.h,m=this.position.direction,x=m==="down",y=m==="left",k=m==="up",f=b,S=d;x||y||m==="right"||k||(this.position.direction="down",x=!0),x||k?(o=(l=c)+f,x?(u=g,S=(p=Math.min(u+S,r))-u):S=(p=g+S)-(u=Math.max(p-S,0))):(p=(u=g)+S,y?f=(o=c+f)-(l=Math.max(o-f,0)):(l=c,f=(o=Math.min(l+f,n))-l)),this._box={l,t:u,w:f,h:S};var M=b>f,E=v.barLength+2*v.barPad,O=v.barWidth+2*v.barPad,P=c,I=g+d;I+O>r&&(I=r-O);var z=this.container.selectAll("rect.scrollbar-horizontal").data(M?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(w.fill,v.barColor),M?(this.hbar=z.attr({rx:v.barRadius,ry:v.barRadius,x:P,y:I,width:E,height:O}),this._hbarXMin=P+E/2,this._hbarTranslateMax=f-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=d>S,R=v.barWidth+2*v.barPad,j=v.barLength+2*v.barPad,Z=c+b,F=g;Z+R>n&&(Z=n-R);var V=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);V.exit().on(".drag",null).remove(),V.enter().append("rect").classed("scrollbar-vertical",!0).call(w.fill,v.barColor),U?(this.vbar=V.attr({rx:v.barRadius,ry:v.barRadius,x:Z,y:F,width:R,height:j}),this._vbarYMin=F+j/2,this._vbarTranslateMax=S-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var H=this.id,te=l-.5,$=U?o+R+.5:o+.5,J=u-.5,X=M?p+O+.5:p+.5,K=a._topdefs.selectAll("#"+H).data(M||U?[0]:[]);if(K.exit().remove(),K.enter().append("clipPath").attr("id",H).append("rect"),M||U?(this._clipRect=K.select("rect").attr({x:Math.floor(te),y:Math.floor(J),width:Math.ceil($)-Math.floor(te),height:Math.ceil(X)-Math.floor(J)}),this.container.call(i.setClipUrl,H,this.gd),this.bg.attr({x:c,y:g,width:b,height:d})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),M||U){var ee=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ee);var ie=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault(),T.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));M&&this.hbar.on(".drag",null).call(ie),U&&this.vbar.on(".drag",null).call(ie)}this.setTranslate(s,t)},v.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},v.prototype._onBoxDrag=function(){var h=this.translateX,s=this.translateY;this.hbar&&(h-=T.event.dx),this.vbar&&(s-=T.event.dy),this.setTranslate(h,s)},v.prototype._onBoxWheel=function(){var h=this.translateX,s=this.translateY;this.hbar&&(h+=T.event.deltaY),this.vbar&&(s+=T.event.deltaY),this.setTranslate(h,s)},v.prototype._onBarDrag=function(){var h=this.translateX,s=this.translateY;if(this.hbar){var t=h+this._hbarXMin,a=t+this._hbarTranslateMax;h=(_.constrain(T.event.x,t,a)-t)/(a-t)*(this.position.w-this._box.w)}if(this.vbar){var n=s+this._vbarYMin,r=n+this._vbarTranslateMax;s=(_.constrain(T.event.y,n,r)-n)/(r-n)*(this.position.h-this._box.h)}this.setTranslate(h,s)},v.prototype.setTranslate=function(h,s){var t=this.position.w-this._box.w,a=this.position.h-this._box.h;if(h=_.constrain(h||0,0,t),s=_.constrain(s||0,0,a),this.translateX=h,this.translateY=s,this.container.call(i.setTranslate,this._box.l-this.position.l-h,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+h-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var n=h/t;this.hbar.call(i.setTranslate,h+n*this._hbarTranslateMax,s)}if(this.vbar){var r=s/a;this.vbar.call(i.setTranslate,h,s+r*this._vbarTranslateMax)}}},18783:function(N){N.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(N){N.exports={axisRefDescription:function(L,e,T){return["If set to a",L,"axis id (e.g. *"+L+"* or","*"+L+"2*), the `"+L+"` position refers to a",L,"coordinate. If set to *paper*, the `"+L+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+T+"). If set to a",L,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+L+"2 domain* refers to the domain of the second",L," axis and a",L,"position of 0.5 refers to the","point between the",e,"and the",T,"of the domain of the","second",L,"axis."].join(" ")}}},22372:function(N){N.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},31562:function(N){N.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(N){N.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(N){N.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(N){N.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},37822:function(N){N.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(N){N.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},32396:function(N,L){L.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],L.STYLE=L.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},77922:function(N,L){L.xmlns="http://www.w3.org/2000/xmlns/",L.svg="http://www.w3.org/2000/svg",L.xlink="http://www.w3.org/1999/xlink",L.svgAttrs={xmlns:L.svg,"xmlns:xlink":L.xlink}},8729:function(N,L,e){L.version=e(11506).version,e(7417),e(98847);for(var T=e(73972),w=L.register=T.register,i=e(10641),_=Object.keys(i),v=0;v<_.length;v++){var h=_[v];h.charAt(0)!=="_"&&(L[h]=i[h]),w({moduleType:"apiMethod",name:h,fn:i[h]})}w(e(67368)),w([e(32745),e(2468),e(47322),e(89853),e(68804),e(20763),e(23243),e(13137),e(97218),e(83312),e(37369),e(21081),e(12311),e(2199),e(30211),e(64168)]),w([e(92177),e(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(w(window.PlotlyLocales),delete window.PlotlyLocales),L.Icons=e(24255);var s=e(30211),t=e(74875);L.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},L.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},L.Snapshot=e(44511),L.PlotSchema=e(86281)},24255:function(N){N.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(N,L){L.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},L.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},L.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},L.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},L.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},L.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},26348:function(N,L,e){var T=e(64872),w=T.mod,i=T.modHalf,_=Math.PI,v=2*_;function h(n){return Math.abs(n[1]-n[0])>v-1e-14}function s(n,r){return i(r-n,v)}function t(n,r){if(h(r))return!0;var l,o;r[0]<r[1]?(l=r[0],o=r[1]):(l=r[1],o=r[0]),(l=w(l,v))>(o=w(o,v))&&(o+=v);var u=w(n,v),p=u+v;return u>=l&&u<=o||p>=l&&p<=o}function a(n,r,l,o,u,p,c){u=u||0,p=p||0;var b,g,d,m,x,y=h([l,o]);function k(E,O){return[E*Math.cos(O)+u,p-E*Math.sin(O)]}y?(b=0,g=_,d=v):l<o?(b=l,d=o):(b=o,d=l),n<r?(m=n,x=r):(m=r,x=n);var f,S=Math.abs(d-b)<=_?0:1;function M(E,O,P){return"A"+[E,E]+" "+[0,S,P]+" "+k(E,O)}return y?f=m===null?"M"+k(x,b)+M(x,g,0)+M(x,d,0)+"Z":"M"+k(m,b)+M(m,g,0)+M(m,d,0)+"ZM"+k(x,b)+M(x,g,1)+M(x,d,1)+"Z":m===null?(f="M"+k(x,b)+M(x,d,0),c&&(f+="L0,0Z")):f="M"+k(m,b)+"L"+k(x,b)+M(x,d,0)+"L"+k(m,d)+M(m,b,1)+"Z",f}N.exports={deg2rad:function(n){return n/180*_},rad2deg:function(n){return n/_*180},angleDelta:s,angleDist:function(n,r){return Math.abs(s(n,r))},isFullCircle:h,isAngleInsideSector:t,isPtInsideSector:function(n,r,l,o){return!!t(r,o)&&(l[0]<l[1]?(u=l[0],p=l[1]):(u=l[1],p=l[0]),n>=u&&n<=p);var u,p},pathArc:function(n,r,l,o,u){return a(null,n,r,l,o,u,0)},pathSector:function(n,r,l,o,u){return a(null,n,r,l,o,u,1)},pathAnnulus:function(n,r,l,o,u,p){return a(n,r,l,o,u,p,1)}}},73627:function(N,L,e){var T=e(11631).decode,w=e(41965),i=Array.isArray,_=ArrayBuffer,v=DataView;function h(r){return _.isView(r)&&!(r instanceof v)}function s(r){return i(r)||h(r)}L.isTypedArray=h,L.isArrayOrTypedArray=s,L.isArray1D=function(r){return!s(r[0])},L.ensureArray=function(r,l){return i(r)||(r=[]),r.length=l,r};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function a(r){return r.constructor===ArrayBuffer}function n(r,l,o){if(s(r)){if(s(r[0])){for(var u=o,p=0;p<r.length;p++)u=l(u,r[p].length);return u}return r.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,L.isArrayBuffer=a,L.decodeTypedArraySpec=function(r){var l=[],o=function(E){return{bdata:E.bdata,dtype:E.dtype,shape:E.shape}}(r),u=o.dtype,p=t[u];if(!p)throw new Error('Error in dtype: "'+u+'"');var c=p.BYTES_PER_ELEMENT,b=o.bdata;a(b)||(b=T(b));var g=o.shape===void 0?[b.byteLength/c]:(""+o.shape).split(",");g.reverse();var d,m,x=g.length,y=+g[0],k=c*y,f=0;if(x===1)l=new p(b);else if(x===2)for(d=+g[1],m=0;m<d;m++)l[m]=new p(b,f,y),f+=k;else{if(x!==3)throw new Error("ndim: "+x+'is not supported with the shape:"'+o.shape+'"');d=+g[1];for(var S=+g[2],M=0;M<S;M++)for(l[M]=[],m=0;m<d;m++)l[M][m]=new p(b,f,y),f+=k}return l.bdata=o.bdata,l.dtype=o.dtype,l.shape=g.reverse().join(","),r._inputArray=l,l},L.isTypedArraySpec=function(r){return w(r)&&r.hasOwnProperty("dtype")&&typeof r.dtype=="string"&&r.hasOwnProperty("bdata")&&(typeof r.bdata=="string"||a(r.bdata))&&(r.shape===void 0||r.hasOwnProperty("shape")&&(typeof r.shape=="string"||typeof r.shape=="number"))},L.concat=function(){var r,l,o,u,p,c,b,g,d=[],m=!0,x=0;for(o=0;o<arguments.length;o++)(c=(u=arguments[o]).length)&&(l?d.push(u):(l=u,p=c),i(u)?r=!1:(m=!1,x?r!==u.constructor&&(r=!1):r=u.constructor),x+=c);if(!x)return[];if(!d.length)return l;if(m)return l.concat.apply(l,d);if(r){for((b=new r(x)).set(l),o=0;o<d.length;o++)u=d[o],b.set(u,p),p+=u.length;return b}for(b=new Array(x),g=0;g<l.length;g++)b[g]=l[g];for(o=0;o<d.length;o++){for(u=d[o],g=0;g<u.length;g++)b[p+g]=u[g];p+=g}return b},L.maxRowLength=function(r){return n(r,Math.max,0)},L.minRowLength=function(r){return n(r,Math.min,1/0)}},95218:function(N,L,e){var T=e(92770),w=e(50606).BADNUM,i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;N.exports=function(_){return typeof _=="string"&&(_=_.replace(i,"")),T(_)?Number(_):w}},33306:function(N){N.exports=function(L){var e=L._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},86367:function(N){N.exports=function(L){L._responsiveChartHandler&&(window.removeEventListener("resize",L._responsiveChartHandler),delete L._responsiveChartHandler)}},96554:function(N,L,e){var T=e(92770),w=e(84267),i=e(9012),_=e(63282),v=e(7901),h=e(37822).DESELECTDIM,s=e(65487),t=e(30587).counter,a=e(64872).modHalf,n=e(73627).isArrayOrTypedArray,r=e(73627).isTypedArraySpec,l=e(73627).decodeTypedArraySpec;function o(u,p){var c=L.valObjectMeta[p.valType];if(p.arrayOk&&n(u))return!0;if(c.validateFunction)return c.validateFunction(u,p);var b={},g=b,d={set:function(m){g=m}};return c.coerceFunction(u,d,b,p),g!==b}L.valObjectMeta={data_array:{coerceFunction:function(u,p,c){p.set(n(u)?u:r(u)?l(u):c)}},enumerated:{coerceFunction:function(u,p,c,b){b.coerceNumber&&(u=+u),b.values.indexOf(u)===-1?p.set(c):p.set(u)},validateFunction:function(u,p){p.coerceNumber&&(u=+u);for(var c=p.values,b=0;b<c.length;b++){var g=String(c[b]);if(g.charAt(0)==="/"&&g.charAt(g.length-1)==="/"){if(new RegExp(g.substr(1,g.length-2)).test(u))return!0}else if(u===c[b])return!0}return!1}},boolean:{coerceFunction:function(u,p,c){u===!0||u===!1?p.set(u):p.set(c)}},number:{coerceFunction:function(u,p,c,b){!T(u)||b.min!==void 0&&u<b.min||b.max!==void 0&&u>b.max?p.set(c):p.set(+u)}},integer:{coerceFunction:function(u,p,c,b){u%1||!T(u)||b.min!==void 0&&u<b.min||b.max!==void 0&&u>b.max?p.set(c):p.set(+u)}},string:{coerceFunction:function(u,p,c,b){if(typeof u!="string"){var g=typeof u=="number";b.strict!==!0&&g?p.set(String(u)):p.set(c)}else b.noBlank&&!u?p.set(c):p.set(u)}},color:{coerceFunction:function(u,p,c){w(u).isValid()?p.set(u):p.set(c)}},colorlist:{coerceFunction:function(u,p,c){Array.isArray(u)&&u.length&&u.every(function(b){return w(b).isValid()})?p.set(u):p.set(c)}},colorscale:{coerceFunction:function(u,p,c){p.set(_.get(u,c))}},angle:{coerceFunction:function(u,p,c){u==="auto"?p.set("auto"):T(u)?p.set(a(+u,360)):p.set(c)}},subplotid:{coerceFunction:function(u,p,c,b){var g=b.regex||t(c);typeof u=="string"&&g.test(u)?p.set(u):p.set(c)},validateFunction:function(u,p){var c=p.dflt;return u===c||typeof u=="string"&&!!t(c).test(u)}},flaglist:{coerceFunction:function(u,p,c,b){if((b.extras||[]).indexOf(u)===-1)if(typeof u=="string"){for(var g=u.split("+"),d=0;d<g.length;){var m=g[d];b.flags.indexOf(m)===-1||g.indexOf(m)<d?g.splice(d,1):d++}g.length?p.set(g.join("+")):p.set(c)}else p.set(c);else p.set(u)}},any:{coerceFunction:function(u,p,c){u===void 0?p.set(c):p.set(r(u)?l(u):u)}},info_array:{coerceFunction:function(u,p,c,b){function g(U,R,j){var Z,F={set:function(V){Z=V}};return j===void 0&&(j=R.dflt),L.valObjectMeta[R.valType].coerceFunction(U,F,j,R),Z}if(r(u)&&(u=l(u)),n(u)){var d,m,x,y,k,f,S=b.dimensions===2||b.dimensions==="1-2"&&Array.isArray(u)&&n(u[0]),M=b.items,E=[],O=Array.isArray(M),P=O&&S&&n(M[0]),I=S&&O&&!P,z=O&&!I?M.length:u.length;if(c=Array.isArray(c)?c:[],S)for(d=0;d<z;d++)for(E[d]=[],x=n(u[d])?u[d]:[],k=I?M.length:O?M[d].length:x.length,m=0;m<k;m++)y=I?M[m]:O?M[d][m]:M,(f=g(x[m],y,(c[d]||[])[m]))!==void 0&&(E[d][m]=f);else for(d=0;d<z;d++)(f=g(u[d],O?M[d]:M,c[d]))!==void 0&&(E[d]=f);p.set(E)}else p.set(c)},validateFunction:function(u,p){if(!n(u))return!1;var c=p.items,b=Array.isArray(c),g=p.dimensions===2;if(!p.freeLength&&u.length!==c.length)return!1;for(var d=0;d<u.length;d++)if(g){if(!n(u[d])||!p.freeLength&&u[d].length!==c[d].length)return!1;for(var m=0;m<u[d].length;m++)if(!o(u[d][m],b?c[d][m]:c))return!1}else if(!o(u[d],b?c[d]:c))return!1;return!0}}},L.coerce=function(u,p,c,b,g){var d=s(c,b).get(),m=s(u,b),x=s(p,b),y=m.get(),k=p._template;if(y===void 0&&k&&(y=s(k,b).get(),k=0),g===void 0&&(g=d.dflt),d.arrayOk){if(n(y))return x.set(y),y;if(r(y))return y=l(y),x.set(y),y}var f=L.valObjectMeta[d.valType].coerceFunction;f(y,x,g,d);var S=x.get();return k&&S===g&&!o(y,d)&&(f(y=s(k,b).get(),x,g,d),S=x.get()),S},L.coerce2=function(u,p,c,b,g){var d=s(u,b),m=L.coerce(u,p,c,b,g);return d.get()!=null&&m},L.coerceFont=function(u,p,c){var b={};return c=c||{},b.family=u(p+".family",c.family),b.size=u(p+".size",c.size),b.color=u(p+".color",c.color),b},L.coercePattern=function(u,p,c,b){if(u(p+".shape")){u(p+".solidity"),u(p+".size");var g=u(p+".fillmode")==="overlay";if(!b){var d=u(p+".bgcolor",g?c:void 0);u(p+".fgcolor",g?v.contrast(d):c)}u(p+".fgopacity",g?.5:1)}},L.coerceHoverinfo=function(u,p,c){var b,g=p._module.attributes,d=g.hoverinfo?g:i,m=d.hoverinfo;if(c._dataLength===1){var x=m.dflt==="all"?m.flags.slice():m.dflt.split("+");x.splice(x.indexOf("name"),1),b=x.join("+")}return L.coerce(u,p,d,"hoverinfo",b)},L.coerceSelectionMarkerOpacity=function(u,p){if(u.marker){var c,b,g=u.marker.opacity;g!==void 0&&(n(g)||u.selected||u.unselected||(c=g,b=h*g),p("selected.marker.opacity",c),p("unselected.marker.opacity",b))}},L.validate=o},41631:function(N,L,e){var T,w,i=e(84096).i$,_=e(92770),v=e(47769),h=e(64872).mod,s=e(50606),t=s.BADNUM,a=s.ONEDAY,n=s.ONEHOUR,r=s.ONEMIN,l=s.ONESEC,o=s.EPOCHJD,u=e(73972),p=e(84096).g0,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=new Date().getFullYear()-70;function d(z){return z&&u.componentsRegistry.calendars&&typeof z=="string"&&z!=="gregorian"}function m(z,U){return String(z+Math.pow(10,U)).substr(1)}L.dateTick0=function(z,U){var R=function(Z,F){return d(Z)?F?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[Z]:u.getComponentMethod("calendars","CANONICAL_TICK")[Z]:F?"2000-01-02":"2000-01-01"}(z,!!U);if(U<2)return R;var j=L.dateTime2ms(R,z);return j+=a*(U-1),L.ms2DateTime(j,0,z)},L.dfltRange=function(z){return d(z)?u.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},L.isJSDate=function(z){return typeof z=="object"&&z!==null&&typeof z.getTime=="function"},L.dateTime2ms=function(z,U){if(L.isJSDate(z)){var R=z.getTimezoneOffset()*r,j=(z.getUTCMinutes()-z.getMinutes())*r+(z.getUTCSeconds()-z.getSeconds())*l+(z.getUTCMilliseconds()-z.getMilliseconds());if(j){var Z=3*r;R=R-Z/2+h(j-R+Z/2,Z)}return(z=Number(z)-R)>=T&&z<=w?z:t}if(typeof z!="string"&&typeof z!="number")return t;z=String(z);var F=d(U),V=z.charAt(0);!F||V!=="G"&&V!=="g"||(z=z.substr(1),U="");var H=F&&U.substr(0,7)==="chinese",te=z.match(H?b:c);if(!te)return t;var $=te[1],J=te[3]||"1",X=Number(te[5]||1),K=Number(te[7]||0),ee=Number(te[9]||0),ie=Number(te[11]||0);if(F){if($.length===2)return t;var ae;$=Number($);try{var oe=u.getComponentMethod("calendars","getCal")(U);if(H){var fe=J.charAt(J.length-1)==="i";J=parseInt(J,10),ae=oe.newDate($,oe.toMonthIndex($,J,fe),X)}else ae=oe.newDate($,Number(J),X)}catch{return t}return ae?(ae.toJD()-o)*a+K*n+ee*r+ie*l:t}$=$.length===2?(Number($)+2e3-g)%100+g:Number($),J-=1;var ge=new Date(Date.UTC(2e3,J,X,K,ee));return ge.setUTCFullYear($),ge.getUTCMonth()!==J||ge.getUTCDate()!==X?t:ge.getTime()+ie*l},T=L.MIN_MS=L.dateTime2ms("-9999"),w=L.MAX_MS=L.dateTime2ms("9999-12-31 23:59:59.9999"),L.isDateTime=function(z,U){return L.dateTime2ms(z,U)!==t};var x=90*a,y=3*n,k=5*r;function f(z,U,R,j,Z){if((U||R||j||Z)&&(z+=" "+m(U,2)+":"+m(R,2),(j||Z)&&(z+=":"+m(j,2),Z))){for(var F=4;Z%10==0;)F-=1,Z/=10;z+="."+m(Z,F)}return z}L.ms2DateTime=function(z,U,R){if(typeof z!="number"||!(z>=T&&z<=w))return t;U||(U=0);var j,Z,F,V,H,te,$=Math.floor(10*h(z+.05,1)),J=Math.round(z-$/10);if(d(R)){var X=Math.floor(J/a)+o,K=Math.floor(h(z,a));try{j=u.getComponentMethod("calendars","getCal")(R).fromJD(X).formatDate("yyyy-mm-dd")}catch{j=p("G%Y-%m-%d")(new Date(J))}if(j.charAt(0)==="-")for(;j.length<11;)j="-0"+j.substr(1);else for(;j.length<10;)j="0"+j;Z=U<x?Math.floor(K/n):0,F=U<x?Math.floor(K%n/r):0,V=U<y?Math.floor(K%r/l):0,H=U<k?K%l*10+$:0}else te=new Date(J),j=p("%Y-%m-%d")(te),Z=U<x?te.getUTCHours():0,F=U<x?te.getUTCMinutes():0,V=U<y?te.getUTCSeconds():0,H=U<k?10*te.getUTCMilliseconds()+$:0;return f(j,Z,F,V,H)},L.ms2DateTimeLocal=function(z){if(!(z>=T+a&&z<=w-a))return t;var U=Math.floor(10*h(z+.05,1)),R=new Date(Math.round(z-U/10));return f(i("%Y-%m-%d")(R),R.getHours(),R.getMinutes(),R.getSeconds(),10*R.getUTCMilliseconds()+U)},L.cleanDate=function(z,U,R){if(z===t)return U;if(L.isJSDate(z)||typeof z=="number"&&isFinite(z)){if(d(R))return v.error("JS Dates and milliseconds are incompatible with world calendars",z),U;if(!(z=L.ms2DateTimeLocal(+z))&&U!==void 0)return U}else if(!L.isDateTime(z,R))return v.error("unrecognized date",z),U;return z};var S=/%\d?f/g,M=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function O(z,U,R,j){z=z.replace(S,function(F){var V=Math.min(+F.charAt(1)||6,6);return(U/1e3%1+2).toFixed(V).substr(2).replace(/0+$/,"")||"0"});var Z=new Date(Math.floor(U+.05));if(z=z.replace(M,function(){return E[R("%q")(Z)]}),d(j))try{z=u.getComponentMethod("calendars","worldCalFmt")(z,U,j)}catch{return"Invalid"}return R(z)(Z)}var P=[59,59.9,59.99,59.999,59.9999];L.formatDate=function(z,U,R,j,Z,F){if(Z=d(Z)&&Z,!U)if(R==="y")U=F.year;else if(R==="m")U=F.month;else{if(R!=="d")return function(V,H){var te=h(V+.05,a),$=m(Math.floor(te/n),2)+":"+m(h(Math.floor(te/r),60),2);if(H!=="M"){_(H)||(H=0);var J=(100+Math.min(h(V/l,60),P[H])).toFixed(H).substr(1);H>0&&(J=J.replace(/0+$/,"").replace(/[\.]$/,"")),$+=":"+J}return $}(z,R)+`
`+O(F.dayMonthYear,z,j,Z);U=F.dayMonth+`
`+F.year}return O(U,z,j,Z)};var I=3*a;L.incrementMonth=function(z,U,R){R=d(R)&&R;var j=h(z,a);if(z=Math.round(z-j),R)try{var Z=Math.round(z/a)+o,F=u.getComponentMethod("calendars","getCal")(R),V=F.fromJD(Z);return U%12?F.add(V,U,"m"):F.add(V,U/12,"y"),(V.toJD()-o)*a+j}catch{v.error("invalid ms "+z+" in calendar "+R)}var H=new Date(z+I);return H.setUTCMonth(H.getUTCMonth()+U)+j-I},L.findExactDates=function(z,U){for(var R,j,Z=0,F=0,V=0,H=0,te=d(U)&&u.getComponentMethod("calendars","getCal")(U),$=0;$<z.length;$++)if(j=z[$],_(j)){if(!(j%a))if(te)try{(R=te.fromJD(j/a+o)).day()===1?R.month()===1?Z++:F++:V++}catch{}else(R=new Date(j)).getUTCDate()===1?R.getUTCMonth()===0?Z++:F++:V++}else H++;V+=F+=Z;var J=z.length-H;return{exactYears:Z/J,exactMonths:F/J,exactDays:V/J}}},24401:function(N,L,e){var T=e(39898),w=e(47769),i=e(35657),_=e(79576);function v(n){var r=n&&n.parentNode;r&&r.removeChild(n)}function h(n,r,l){var o="plotly.js-style-"+n,u=document.getElementById(o);u||((u=document.createElement("style")).setAttribute("id",o),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var p=u.sheet;p.insertRule?p.insertRule(r+"{"+l+"}",0):p.addRule?p.addRule(r,l,0):w.warn("addStyleRule failed")}function s(n){var r=window.getComputedStyle(n,null),l=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("-moz-transform")||r.getPropertyValue("-ms-transform")||r.getPropertyValue("-o-transform")||r.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(o){return+o})}function t(n){for(var r=[];a(n);)r.push(n),n=n.parentNode;return r}function a(n){return n&&(n instanceof Element||n instanceof HTMLElement)}N.exports={getGraphDiv:function(n){var r;if(typeof n=="string"){if((r=document.getElementById(n))===null)throw new Error("No DOM element with id '"+n+"' exists on the page.");return r}if(n==null)throw new Error("DOM element provided is null or undefined");return n},isPlotDiv:function(n){var r=T.select(n);return r.node()instanceof HTMLElement&&r.size()&&r.classed("js-plotly-plot")},removeElement:v,addStyleRule:function(n,r){h("global",n,r)},addRelatedStyleRule:h,deleteRelatedStyleRule:function(n){var r="plotly.js-style-"+n,l=document.getElementById(r);l&&v(l)},getFullTransformMatrix:function(n){var r=t(n),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return r.forEach(function(o){var u=s(o);if(u){var p=i.convertCssMatrix(u);l=_.multiply(l,l,p)}}),l},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(n,r){return n&&r&&n.top===r.top&&n.left===r.left&&n.right===r.right&&n.bottom===r.bottom}}},11086:function(N,L,e){var T=e(15398).EventEmitter,w={init:function(i){if(i._ev instanceof T)return i;var _=new T,v=new T;return i._ev=_,i._internalEv=v,i.on=_.on.bind(_),i.once=_.once.bind(_),i.removeListener=_.removeListener.bind(_),i.removeAllListeners=_.removeAllListeners.bind(_),i._internalOn=v.on.bind(v),i._internalOnce=v.once.bind(v),i._removeInternalListener=v.removeListener.bind(v),i._removeAllInternalListeners=v.removeAllListeners.bind(v),i.emit=function(h,s){typeof jQuery<"u"&&jQuery(i).trigger(h,s),_.emit(h,s),v.emit(h,s)},i},triggerHandler:function(i,_,v){var h,s;typeof jQuery<"u"&&(h=jQuery(i).triggerHandler(_,v));var t=i._ev;if(!t)return h;var a,n=t._events[_];if(!n)return h;function r(l){return l.listener?(t.removeListener(_,l.listener),l.fired?void 0:(l.fired=!0,l.listener.apply(t,[v]))):l.apply(t,[v])}for(n=Array.isArray(n)?n:[n],a=0;a<n.length-1;a++)r(n[a]);return s=r(n[a]),h!==void 0?h:s},purge:function(i){return delete i._ev,delete i.on,delete i.once,delete i.removeListener,delete i.removeAllListeners,delete i.emit,delete i._ev,delete i._internalEv,delete i._internalOn,delete i._internalOnce,delete i._removeInternalListener,delete i._removeAllInternalListeners,i}};N.exports=w},1426:function(N,L,e){var T=e(41965),w=Array.isArray;function i(_,v,h,s){var t,a,n,r,l,o,u,p=_[0],c=_.length;if(c===2&&w(p)&&w(_[1])&&p.length===0){if(u=function(g,d){var m,x;for(m=0;m<g.length;m++){if((x=g[m])!==null&&typeof x=="object")return!1;x!==void 0&&(d[m]=x)}return!0}(_[1],p),u)return p;p.splice(0,p.length)}for(var b=1;b<c;b++)for(a in t=_[b])n=p[a],r=t[a],s&&w(r)?p[a]=r:v&&r&&(T(r)||(l=w(r)))?(l?(l=!1,o=n&&w(n)?n:[]):o=n&&T(n)?n:{},p[a]=i([o,r],v,h,s)):(r!==void 0||h)&&(p[a]=r);return p}L.extendFlat=function(){return i(arguments,!1,!1,!1)},L.extendDeep=function(){return i(arguments,!0,!1,!1)},L.extendDeepAll=function(){return i(arguments,!0,!0,!1)},L.extendDeepNoArrays=function(){return i(arguments,!0,!1,!0)}},75744:function(N){N.exports=function(L){for(var e={},T=[],w=0,i=0;i<L.length;i++){var _=L[i];e[_]!==1&&(e[_]=1,T[w++]=_)}return T}},76756:function(N){function L(T){return T.visible===!0}function e(T){var w=T[0].trace;return w.visible===!0&&w._length!==0}N.exports=function(T){for(var w,i=(w=T,Array.isArray(w)&&Array.isArray(w[0])&&w[0][0]&&w[0][0].trace?e:L),_=[],v=0;v<T.length;v++){var h=T[v];i(h)&&_.push(h)}return _}},41327:function(N,L,e){var T=e(39898),w=e(24138),i=e(30774),_=e(29261),v=e(85268),h=e(23389),s=e(47769),t=e(41965),a=e(65487),n=e(61082),r=Object.keys(w),l={"ISO-3":h,"USA-states":h,"country names":function(u){for(var p=0;p<r.length;p++){var c=r[p];if(new RegExp(w[c]).test(u.trim().toLowerCase()))return c}return s.log("Unrecognized country name: "+u+"."),!1}};function o(u){var p=u.geojson,c=window.PlotlyGeoAssets||{},b=typeof p=="string"?c[p]:p;return t(b)?b:(s.error("Oops ... something went wrong when fetching "+p),!1)}N.exports={locationToFeature:function(u,p,c){if(!p||typeof p!="string")return!1;var b,g,d,m=l[u](p);if(m){if(u==="USA-states")for(b=[],d=0;d<c.length;d++)(g=c[d]).properties&&g.properties.gu&&g.properties.gu==="USA"&&b.push(g);else b=c;for(d=0;d<b.length;d++)if((g=b[d]).id===m)return g;s.log(["Location with id",m,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var p,c,b,g,d=u.geometry,m=d.coordinates,x=u.id,y=[];function k(f){for(var S=0;S<f.length-1;S++)if(f[S][0]>0&&f[S+1][0]<0)return S;return null}switch(p=x==="RUS"||x==="FJI"?function(f){var S;if(k(f)===null)S=f;else for(S=new Array(f.length),g=0;g<f.length;g++)S[g]=[f[g][0]<0?f[g][0]+360:f[g][0],f[g][1]];y.push(n.tester(S))}:x==="ATA"?function(f){var S=k(f);if(S===null)return y.push(n.tester(f));var M=new Array(f.length+1),E=0;for(g=0;g<f.length;g++)g>S?M[E++]=[f[g][0]+360,f[g][1]]:g===S?(M[E++]=f[g],M[E++]=[f[g][0],-90]):M[E++]=f[g];var O=n.tester(M);O.pts.pop(),y.push(O)}:function(f){y.push(n.tester(f))},d.type){case"MultiPolygon":for(c=0;c<m.length;c++)for(b=0;b<m[c].length;b++)p(m[c][b]);break;case"Polygon":for(c=0;c<m.length;c++)p(m[c])}return y},getTraceGeojson:o,extractTraceFeature:function(u){var p=u[0].trace,c=o(p);if(!c)return!1;var b,g={},d=[];for(b=0;b<p._length;b++){var m=u[b];(m.loc||m.loc===0)&&(g[m.loc]=m)}function x(f){var S=a(f,p.featureidkey||"id").get(),M=g[S];if(M){var E=f.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var O={type:"Feature",id:S,geometry:E,properties:{}};O.properties.ct=function(P){var I,z=P.geometry;if(z.type==="MultiPolygon")for(var U=z.coordinates,R=0,j=0;j<U.length;j++){var Z={type:"Polygon",coordinates:U[j]},F=i.default(Z);F>R&&(R=F,I=Z)}else I=z;return _.default(I).geometry.coordinates}(O),M.fIn=f,M.fOut=O,d.push(O)}else s.log(["Location",M.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete g[S]}switch(c.type){case"FeatureCollection":var y=c.features;for(b=0;b<y.length;b++)x(y[b]);break;case"Feature":x(c);break;default:return s.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var k in g)s.log(["Location *"+k+"*","does not have a matching feature with id-key","*"+p.featureidkey+"*."].join(" "));return d},fetchTraceGeoData:function(u){var p=window.PlotlyGeoAssets||{},c=[];function b(x){return new Promise(function(y,k){T.json(x,function(f,S){if(f){delete p[x];var M=f.status===404?'GeoJSON at URL "'+x+'" does not exist.':"Unexpected error while fetching from "+x;return k(new Error(M))}return p[x]=S,y(S)})})}function g(x){return new Promise(function(y,k){var f=0,S=setInterval(function(){return p[x]&&p[x]!=="pending"?(clearInterval(S),y(p[x])):f>100?(clearInterval(S),k("Unexpected error while fetching from "+x)):void f++},50)})}for(var d=0;d<u.length;d++){var m=u[d][0].trace.geojson;typeof m=="string"&&(p[m]?p[m]==="pending"&&c.push(g(m)):(p[m]="pending",c.push(b(m))))}return c},computeBbox:function(u){return v.default(u)}}},18214:function(N,L,e){var T=e(50606).BADNUM;L.calcTraceToLineCoords=function(w){for(var i=w[0].trace.connectgaps,_=[],v=[],h=0;h<w.length;h++){var s=w[h].lonlat;s[0]!==T?v.push(s):!i&&v.length>0&&(_.push(v),v=[])}return v.length>0&&_.push(v),_},L.makeLine=function(w){return w.length===1?{type:"LineString",coordinates:w[0]}:{type:"MultiLineString",coordinates:w}},L.makePolygon=function(w){if(w.length===1)return{type:"Polygon",coordinates:w};for(var i=new Array(w.length),_=0;_<w.length;_++)i[_]=[w[_]];return{type:"MultiPolygon",coordinates:i}},L.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(N,L,e){var T,w,i,_=e(64872).mod;function v(s,t,a,n,r,l,o,u){var p=a-s,c=r-s,b=o-r,g=n-t,d=l-t,m=u-l,x=p*m-b*g;if(x===0)return null;var y=(c*m-b*d)/x,k=(c*g-p*d)/x;return k<0||k>1||y<0||y>1?null:{x:s+p*y,y:t+g*y}}function h(s,t,a,n,r){var l=n*s+r*t;if(l<0)return n*n+r*r;if(l>a){var o=n-s,u=r-t;return o*o+u*u}var p=n*t-r*s;return p*p/a}L.segmentsIntersect=v,L.segmentDistance=function(s,t,a,n,r,l,o,u){if(v(s,t,a,n,r,l,o,u))return 0;var p=a-s,c=n-t,b=o-r,g=u-l,d=p*p+c*c,m=b*b+g*g,x=Math.min(h(p,c,d,r-s,l-t),h(p,c,d,o-s,u-t),h(b,g,m,s-r,t-l),h(b,g,m,a-r,n-l));return Math.sqrt(x)},L.getTextLocation=function(s,t,a,n){if(s===w&&n===i||(T={},w=s,i=n),T[a])return T[a];var r=s.getPointAtLength(_(a-n/2,t)),l=s.getPointAtLength(_(a+n/2,t)),o=Math.atan((l.y-r.y)/(l.x-r.x)),u=s.getPointAtLength(_(a,t)),p={x:(4*u.x+r.x+l.x)/6,y:(4*u.y+r.y+l.y)/6,theta:o};return T[a]=p,p},L.clearLocationCache=function(){w=null},L.getVisibleSegment=function(s,t,a){var n,r,l=t.left,o=t.right,u=t.top,p=t.bottom,c=0,b=s.getTotalLength(),g=b;function d(x){var y=s.getPointAtLength(x);x===0?n=y:x===b&&(r=y);var k=y.x<l?l-y.x:y.x>o?y.x-o:0,f=y.y<u?u-y.y:y.y>p?y.y-p:0;return Math.sqrt(k*k+f*f)}for(var m=d(c);m;){if((c+=m+a)>g)return;m=d(c)}for(m=d(g);m;){if(c>(g-=m+a))return;m=d(g)}return{min:c,max:g,len:g-c,total:b,isClosed:c===0&&g===b&&Math.abs(n.x-r.x)<.1&&Math.abs(n.y-r.y)<.1}},L.findPointOnPath=function(s,t,a,n){for(var r,l,o,u=(n=n||{}).pathLength||s.getTotalLength(),p=n.tolerance||.001,c=n.iterationLimit||30,b=s.getPointAtLength(0)[a]>s.getPointAtLength(u)[a]?-1:1,g=0,d=0,m=u;g<c;){if(r=(d+m)/2,o=(l=s.getPointAtLength(r))[a]-t,Math.abs(o)<p)return l;b*o>0?m=r:d=r,g++}return l}},81697:function(N,L,e){var T=e(92770),w=e(84267),i=e(25075),_=e(21081),v=e(22399).defaultLine,h=e(73627).isArrayOrTypedArray,s=i(v);function t(r,l){var o=r;return o[3]*=l,o}function a(r){if(T(r))return s;var l=i(r);return l.length?l:s}function n(r){return T(r)?r:1}N.exports={formatColor:function(r,l,o){var u=r.color;u&&u._inputArray&&(u=u._inputArray);var p,c,b,g,d,m=h(u),x=h(l),y=_.extractOpts(r),k=[];if(p=y.colorscale!==void 0?_.makeColorScaleFuncFromTrace(r):a,c=m?function(S,M){return S[M]===void 0?s:i(p(S[M]))}:a,b=x?function(S,M){return S[M]===void 0?1:n(S[M])}:n,m||x)for(var f=0;f<o;f++)g=c(u,f),d=b(l,f),k[f]=t(g,d);else k=t(i(u),l);return k},parseColorScale:function(r){var l=_.extractOpts(r),o=l.colorscale;return l.reversescale&&(o=_.flipScale(l.colorscale)),o.map(function(u){var p=u[0],c=w(u[1]).toRgb();return{index:p,rgb:[c.r,c.g,c.b,c.a]}})}}},28984:function(N,L,e){var T=e(23389);function w(i){return[i]}N.exports={keyFun:function(i){return i.key},repeat:w,descend:T,wrap:w,unwrap:function(i){return i[0]}}},23389:function(N){N.exports=function(L){return L}},39240:function(N){N.exports=function(L,e){if(!e)return L;var T=1/Math.abs(e),w=T>1?(T*L+T*e)/T:L+e,i=String(w).length;if(i>16){var _=String(e).length;if(i>=String(L).length+_){var v=parseFloat(w).toPrecision(12);v.indexOf("e+")===-1&&(w=+v)}}return w}},71828:function(N,L,e){var T=e(39898),w=e(84096).g0,i=e(60721).WU,_=e(92770),v=e(50606),h=v.FP_SAFE,s=-h,t=v.BADNUM,a=N.exports={};a.adjustFormat=function(K){return!K||/^\d[.]\df/.test(K)||/[.]\d%/.test(K)?K:K==="0.f"?"~f":/^\d%/.test(K)?"~%":/^\ds/.test(K)?"~s":!/^[~,.0$]/.test(K)&&/[&fps]/.test(K)?"~"+K:K};var n={};a.warnBadFormat=function(K){var ee=String(K);n[ee]||(n[ee]=1,a.warn('encountered bad format: "'+ee+'"'))},a.noFormat=function(K){return String(K)},a.numberFormat=function(K){var ee;try{ee=i(a.adjustFormat(K))}catch{return a.warnBadFormat(K),a.noFormat}return ee},a.nestedProperty=e(65487),a.keyedContainer=e(66636),a.relativeAttr=e(6962),a.isPlainObject=e(41965),a.toLogRange=e(58163),a.relinkPrivateKeys=e(51332);var r=e(73627);a.isArrayBuffer=r.isArrayBuffer,a.isTypedArray=r.isTypedArray,a.isArrayOrTypedArray=r.isArrayOrTypedArray,a.isArray1D=r.isArray1D,a.ensureArray=r.ensureArray,a.concat=r.concat,a.maxRowLength=r.maxRowLength,a.minRowLength=r.minRowLength;var l=e(64872);a.mod=l.mod,a.modHalf=l.modHalf;var o=e(96554);a.valObjectMeta=o.valObjectMeta,a.coerce=o.coerce,a.coerce2=o.coerce2,a.coerceFont=o.coerceFont,a.coercePattern=o.coercePattern,a.coerceHoverinfo=o.coerceHoverinfo,a.coerceSelectionMarkerOpacity=o.coerceSelectionMarkerOpacity,a.validate=o.validate;var u=e(41631);a.dateTime2ms=u.dateTime2ms,a.isDateTime=u.isDateTime,a.ms2DateTime=u.ms2DateTime,a.ms2DateTimeLocal=u.ms2DateTimeLocal,a.cleanDate=u.cleanDate,a.isJSDate=u.isJSDate,a.formatDate=u.formatDate,a.incrementMonth=u.incrementMonth,a.dateTick0=u.dateTick0,a.dfltRange=u.dfltRange,a.findExactDates=u.findExactDates,a.MIN_MS=u.MIN_MS,a.MAX_MS=u.MAX_MS;var p=e(65888);a.findBin=p.findBin,a.sorterAsc=p.sorterAsc,a.sorterDes=p.sorterDes,a.distinctVals=p.distinctVals,a.roundUp=p.roundUp,a.sort=p.sort,a.findIndexOfMin=p.findIndexOfMin,a.sortObjectKeys=e(78607);var c=e(80038);a.aggNums=c.aggNums,a.len=c.len,a.mean=c.mean,a.median=c.median,a.midRange=c.midRange,a.variance=c.variance,a.stdev=c.stdev,a.interp=c.interp;var b=e(35657);a.init2dArray=b.init2dArray,a.transposeRagged=b.transposeRagged,a.dot=b.dot,a.translationMatrix=b.translationMatrix,a.rotationMatrix=b.rotationMatrix,a.rotationXYMatrix=b.rotationXYMatrix,a.apply3DTransform=b.apply3DTransform,a.apply2DTransform=b.apply2DTransform,a.apply2DTransform2=b.apply2DTransform2,a.convertCssMatrix=b.convertCssMatrix,a.inverseTransformMatrix=b.inverseTransformMatrix;var g=e(26348);a.deg2rad=g.deg2rad,a.rad2deg=g.rad2deg,a.angleDelta=g.angleDelta,a.angleDist=g.angleDist,a.isFullCircle=g.isFullCircle,a.isAngleInsideSector=g.isAngleInsideSector,a.isPtInsideSector=g.isPtInsideSector,a.pathArc=g.pathArc,a.pathSector=g.pathSector,a.pathAnnulus=g.pathAnnulus;var d=e(99863);a.isLeftAnchor=d.isLeftAnchor,a.isCenterAnchor=d.isCenterAnchor,a.isRightAnchor=d.isRightAnchor,a.isTopAnchor=d.isTopAnchor,a.isMiddleAnchor=d.isMiddleAnchor,a.isBottomAnchor=d.isBottomAnchor;var m=e(87642);a.segmentsIntersect=m.segmentsIntersect,a.segmentDistance=m.segmentDistance,a.getTextLocation=m.getTextLocation,a.clearLocationCache=m.clearLocationCache,a.getVisibleSegment=m.getVisibleSegment,a.findPointOnPath=m.findPointOnPath;var x=e(1426);a.extendFlat=x.extendFlat,a.extendDeep=x.extendDeep,a.extendDeepAll=x.extendDeepAll,a.extendDeepNoArrays=x.extendDeepNoArrays;var y=e(47769);a.log=y.log,a.warn=y.warn,a.error=y.error;var k=e(30587);a.counterRegex=k.counter;var f=e(79990);a.throttle=f.throttle,a.throttleDone=f.done,a.clearThrottle=f.clear;var S=e(24401);function M(K){var ee={};for(var ie in K)for(var ae=K[ie],oe=0;oe<ae.length;oe++)ee[ae[oe]]=+ie;return ee}a.getGraphDiv=S.getGraphDiv,a.isPlotDiv=S.isPlotDiv,a.removeElement=S.removeElement,a.addStyleRule=S.addStyleRule,a.addRelatedStyleRule=S.addRelatedStyleRule,a.deleteRelatedStyleRule=S.deleteRelatedStyleRule,a.getFullTransformMatrix=S.getFullTransformMatrix,a.getElementTransformMatrix=S.getElementTransformMatrix,a.getElementAndAncestors=S.getElementAndAncestors,a.equalDomRects=S.equalDomRects,a.clearResponsive=e(86367),a.preserveDrawingBuffer=e(45142),a.makeTraceGroups=e(77310),a._=e(15867),a.notifier=e(75046),a.filterUnique=e(75744),a.filterVisible=e(76756),a.pushUnique=e(75138),a.increment=e(39240),a.cleanNumber=e(95218),a.ensureNumber=function(K){return _(K)?(K=Number(K))>h||K<s?t:K:t},a.isIndex=function(K,ee){return!(ee!==void 0&&K>=ee)&&_(K)&&K>=0&&K%1==0},a.noop=e(64213),a.identity=e(23389),a.repeat=function(K,ee){for(var ie=new Array(ee),ae=0;ae<ee;ae++)ie[ae]=K;return ie},a.swapAttrs=function(K,ee,ie,ae){ie||(ie="x"),ae||(ae="y");for(var oe=0;oe<ee.length;oe++){var fe=ee[oe],ge=a.nestedProperty(K,fe.replace("?",ie)),ve=a.nestedProperty(K,fe.replace("?",ae)),xe=ge.get();ge.set(ve.get()),ve.set(xe)}},a.raiseToTop=function(K){K.parentNode.appendChild(K)},a.cancelTransition=function(K){return K.transition().duration(0)},a.constrain=function(K,ee,ie){return ee>ie?Math.max(ie,Math.min(ee,K)):Math.max(ee,Math.min(ie,K))},a.bBoxIntersect=function(K,ee,ie){return ie=ie||0,K.left<=ee.right+ie&&ee.left<=K.right+ie&&K.top<=ee.bottom+ie&&ee.top<=K.bottom+ie},a.simpleMap=function(K,ee,ie,ae,oe){for(var fe=K.length,ge=new Array(fe),ve=0;ve<fe;ve++)ge[ve]=ee(K[ve],ie,ae,oe);return ge},a.randstr=function K(ee,ie,ae,oe){if(ae||(ae=16),ie===void 0&&(ie=24),ie<=0)return"0";var fe,ge,ve=Math.log(Math.pow(2,ie))/Math.log(ae),xe="";for(fe=2;ve===1/0;fe*=2)ve=Math.log(Math.pow(2,ie/fe))/Math.log(ae)*fe;var _e=ve-Math.floor(ve);for(fe=0;fe<Math.floor(ve);fe++)xe=Math.floor(Math.random()*ae).toString(ae)+xe;_e&&(ge=Math.pow(ae,_e),xe=Math.floor(Math.random()*ge).toString(ae)+xe);var ye=parseInt(xe,ae);return ee&&ee[xe]||ye!==1/0&&ye>=Math.pow(2,ie)?oe>10?(a.warn("randstr failed uniqueness"),xe):K(ee,ie,ae,(oe||0)+1):xe},a.OptionControl=function(K,ee){K||(K={}),ee||(ee="opt");var ie={optionList:[],_newoption:function(ae){ae[ee]=K,ie[ae.name]=ae,ie.optionList.push(ae)}};return ie["_"+ee]=K,ie},a.smooth=function(K,ee){if((ee=Math.round(ee)||0)<2)return K;var ie,ae,oe,fe,ge=K.length,ve=2*ge,xe=2*ee-1,_e=new Array(xe),ye=new Array(ge);for(ie=0;ie<xe;ie++)_e[ie]=(1-Math.cos(Math.PI*(ie+1)/ee))/(2*ee);for(ie=0;ie<ge;ie++){for(fe=0,ae=0;ae<xe;ae++)(oe=ie+ae+1-ee)<-ge?oe-=ve*Math.round(oe/ve):oe>=ve&&(oe-=ve*Math.floor(oe/ve)),oe<0?oe=-1-oe:oe>=ge&&(oe=ve-1-oe),fe+=K[oe]*_e[ae];ye[ie]=fe}return ye},a.syncOrAsync=function(K,ee,ie){var ae;function oe(){return a.syncOrAsync(K,ee,ie)}for(;K.length;)if((ae=(0,K.splice(0,1)[0])(ee))&&ae.then)return ae.then(oe);return ie&&ie(ee)},a.stripTrailingSlash=function(K){return K.substr(-1)==="/"?K.substr(0,K.length-1):K},a.noneOrAll=function(K,ee,ie){if(K){var ae,oe=!1,fe=!0;for(ae=0;ae<ie.length;ae++)K[ie[ae]]!=null?oe=!0:fe=!1;if(oe&&!fe)for(ae=0;ae<ie.length;ae++)K[ie[ae]]=ee[ie[ae]]}},a.mergeArray=function(K,ee,ie,ae){var oe=typeof ae=="function";if(a.isArrayOrTypedArray(K))for(var fe=Math.min(K.length,ee.length),ge=0;ge<fe;ge++){var ve=K[ge];ee[ge][ie]=oe?ae(ve):ve}},a.mergeArrayCastPositive=function(K,ee,ie){return a.mergeArray(K,ee,ie,function(ae){var oe=+ae;return isFinite(oe)&&oe>0?oe:0})},a.fillArray=function(K,ee,ie,ae){if(ae=ae||a.identity,a.isArrayOrTypedArray(K))for(var oe=0;oe<ee.length;oe++)ee[oe][ie]=ae(K[oe])},a.castOption=function(K,ee,ie,ae){ae=ae||a.identity;var oe=a.nestedProperty(K,ie).get();return a.isArrayOrTypedArray(oe)?Array.isArray(ee)&&a.isArrayOrTypedArray(oe[ee[0]])?ae(oe[ee[0]][ee[1]]):ae(oe[ee]):oe},a.extractOption=function(K,ee,ie,ae){if(ie in K)return K[ie];var oe=a.nestedProperty(ee,ae).get();return Array.isArray(oe)?void 0:oe},a.tagSelected=function(K,ee,ie){var ae,oe,fe=ee.selectedpoints,ge=ee._indexToPoints;ge&&(ae=M(ge));for(var ve=0;ve<fe.length;ve++){var xe=fe[ve];if(a.isIndex(xe)||a.isArrayOrTypedArray(xe)&&a.isIndex(xe[0])&&a.isIndex(xe[1])){var _e=ae?ae[xe]:xe,ye=ie?ie[_e]:_e;(oe=ye)!==void 0&&oe<K.length&&(K[ye].selected=1)}}},a.selIndices2selPoints=function(K){var ee=K.selectedpoints,ie=K._indexToPoints;if(ie){for(var ae=M(ie),oe=[],fe=0;fe<ee.length;fe++){var ge=ee[fe];if(a.isIndex(ge)){var ve=ae[ge];a.isIndex(ve)&&oe.push(ve)}}return oe}return ee},a.getTargetArray=function(K,ee){var ie=ee.target;if(typeof ie=="string"&&ie){var ae=a.nestedProperty(K,ie).get();return!!a.isArrayOrTypedArray(ae)&&ae}return!!a.isArrayOrTypedArray(ie)&&ie},a.minExtend=function K(ee,ie,ae){var oe={};typeof ie!="object"&&(ie={});var fe,ge,ve,xe=ae==="pieLike"?-1:3,_e=Object.keys(ee);for(fe=0;fe<_e.length;fe++)ve=ee[ge=_e[fe]],ge.charAt(0)!=="_"&&typeof ve!="function"&&(ge==="module"?oe[ge]=ve:Array.isArray(ve)?oe[ge]=ge==="colorscale"||xe===-1?ve.slice():ve.slice(0,xe):a.isTypedArray(ve)?oe[ge]=xe===-1?ve.subarray():ve.subarray(0,xe):oe[ge]=ve&&typeof ve=="object"?K(ee[ge],ie[ge],ae):ve);for(_e=Object.keys(ie),fe=0;fe<_e.length;fe++)typeof(ve=ie[ge=_e[fe]])=="object"&&ge in oe&&typeof oe[ge]=="object"||(oe[ge]=ve);return oe},a.titleCase=function(K){return K.charAt(0).toUpperCase()+K.substr(1)},a.containsAny=function(K,ee){for(var ie=0;ie<ee.length;ie++)if(K.indexOf(ee[ie])!==-1)return!0;return!1},a.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;a.isSafari=function(){return E.test(window.navigator.userAgent)};var O=/iPad|iPhone|iPod/;a.isIOS=function(){return O.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;a.getFirefoxVersion=function(){var K=P.exec(window.navigator.userAgent);if(K&&K.length===2){var ee=parseInt(K[1]);if(!isNaN(ee))return ee}return null},a.isD3Selection=function(K){return K instanceof T.selection},a.ensureSingle=function(K,ee,ie,ae){var oe=K.select(ee+(ie?"."+ie:""));if(oe.size())return oe;var fe=K.append(ee);return ie&&fe.classed(ie,!0),ae&&fe.call(ae),fe},a.ensureSingleById=function(K,ee,ie,ae){var oe=K.select(ee+"#"+ie);if(oe.size())return oe;var fe=K.append(ee).attr("id",ie);return ae&&fe.call(ae),fe},a.objectFromPath=function(K,ee){for(var ie,ae=K.split("."),oe=ie={},fe=0;fe<ae.length;fe++){var ge=ae[fe],ve=null,xe=ae[fe].match(/(.*)\[([0-9]+)\]/);xe?(ge=xe[1],ve=xe[2],ie=ie[ge]=[],fe===ae.length-1?ie[ve]=ee:ie[ve]={},ie=ie[ve]):(fe===ae.length-1?ie[ge]=ee:ie[ge]={},ie=ie[ge])}return oe};var I=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function U(K){return K.slice(0,2)==="__"}a.expandObjectPaths=function(K){var ee,ie,ae,oe,fe,ge,ve;if(typeof K=="object"&&!Array.isArray(K)){for(ie in K)if(K.hasOwnProperty(ie))if(ee=ie.match(I)){if(oe=K[ie],U(ae=ee[1]))continue;delete K[ie],K[ae]=a.extendDeepNoArrays(K[ae]||{},a.objectFromPath(ie,a.expandObjectPaths(oe))[ae])}else if(ee=ie.match(z)){if(oe=K[ie],U(ae=ee[1]))continue;if(fe=parseInt(ee[2]),delete K[ie],K[ae]=K[ae]||[],ee[3]===".")ve=ee[4],ge=K[ae][fe]=K[ae][fe]||{},a.extendDeepNoArrays(ge,a.objectFromPath(ve,a.expandObjectPaths(oe)));else{if(U(ae))continue;K[ae][fe]=a.expandObjectPaths(oe)}}else{if(U(ie))continue;K[ie]=a.expandObjectPaths(K[ie])}}return K},a.numSeparate=function(K,ee,ie){if(ie||(ie=!1),typeof ee!="string"||ee.length===0)throw new Error("Separator string required for formatting!");typeof K=="number"&&(K=String(K));var ae=/(\d+)(\d{3})/,oe=ee.charAt(0),fe=ee.charAt(1),ge=K.split("."),ve=ge[0],xe=ge.length>1?oe+ge[1]:"";if(fe&&(ge.length>1||ve.length>4||ie))for(;ae.test(ve);)ve=ve.replace(ae,"$1"+fe+"$2");return ve+xe},a.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;a.templateString=function(K,ee){var ie={};return K.replace(a.TEMPLATE_STRING_REGEX,function(ae,oe){var fe;return R.test(oe)?fe=ee[oe]:(ie[oe]=ie[oe]||a.nestedProperty(ee,oe).get,fe=ie[oe]()),a.isValidTextValue(fe)?fe:""})};var j={max:10,count:0,name:"hovertemplate"};a.hovertemplateString=function(){return te.apply(j,arguments)};var Z={max:10,count:0,name:"texttemplate"};a.texttemplateString=function(){return te.apply(Z,arguments)};var F=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,V={max:10,count:0,name:"texttemplate",parseMultDiv:!0};a.texttemplateStringForShapes=function(){return te.apply(V,arguments)};var H=/^[:|\|]/;function te(K,ee,ie){var ae=this,oe=arguments;ee||(ee={});var fe={};return K.replace(a.TEMPLATE_STRING_REGEX,function(ge,ve,xe){var _e=ve==="_xother"||ve==="_yother",ye=ve==="_xother_"||ve==="_yother_",Ce=ve==="xother_"||ve==="yother_",ke=ve==="xother"||ve==="yother"||_e||Ce||ye,Te=ve;(_e||ye)&&(Te=Te.substring(1)),(Ce||ye)&&(Te=Te.substring(0,Te.length-1));var le,ue,de,Le=null,we=null;if(ae.parseMultDiv){var Ee=function(be){var Me=be.match(F);return Me?{key:Me[1],op:Me[2],number:Number(Me[3])}:{key:be,op:null,number:null}}(Te);Te=Ee.key,Le=Ee.op,we=Ee.number}if(ke){if((le=ee[Te])===void 0)return""}else for(de=3;de<oe.length;de++)if(ue=oe[de]){if(ue.hasOwnProperty(Te)){le=ue[Te];break}if(R.test(Te)||(le=a.nestedProperty(ue,Te).get(),(le=fe[Te]||a.nestedProperty(ue,Te).get())&&(fe[Te]=le)),le!==void 0)break}if(le!==void 0&&(Le==="*"&&(le*=we),Le==="/"&&(le/=we)),le===void 0&&ae)return ae.count<ae.max&&(a.warn("Variable '"+Te+"' in "+ae.name+" could not be found!"),le=ge),ae.count===ae.max&&a.warn("Too many "+ae.name+" warnings - additional warnings will be suppressed"),ae.count++,ge;if(xe){var Oe;if(xe[0]===":"&&(le=(Oe=ie?ie.numberFormat:a.numberFormat)(xe.replace(H,""))(le)),xe[0]==="|"){Oe=ie?ie.timeFormat:w;var Fe=a.dateTime2ms(le);le=a.formatDate(Fe,xe.replace(H,""),!1,Oe)}}else{var pe=Te+"Label";ee.hasOwnProperty(pe)&&(le=ee[pe])}return ke&&(le="("+le+")",(_e||ye)&&(le=" "+le),(Ce||ye)&&(le+=" ")),le})}a.subplotSort=function(K,ee){for(var ie=Math.min(K.length,ee.length)+1,ae=0,oe=0,fe=0;fe<ie;fe++){var ge=K.charCodeAt(fe)||0,ve=ee.charCodeAt(fe)||0,xe=ge>=48&&ge<=57,_e=ve>=48&&ve<=57;if(xe&&(ae=10*ae+ge-48),_e&&(oe=10*oe+ve-48),!xe||!_e){if(ae!==oe)return ae-oe;if(ge!==ve)return ge-ve}}return oe-ae};var $=2e9;a.seedPseudoRandom=function(){$=2e9},a.pseudoRandom=function(){var K=$;return $=(69069*$+1)%4294967296,Math.abs($-K)<429496729?a.pseudoRandom():$/4294967296},a.fillText=function(K,ee,ie){var ae=Array.isArray(ie)?function(ge){ie.push(ge)}:function(ge){ie.text=ge},oe=a.extractOption(K,ee,"htx","hovertext");if(a.isValidTextValue(oe))return ae(oe);var fe=a.extractOption(K,ee,"tx","text");return a.isValidTextValue(fe)?ae(fe):void 0},a.isValidTextValue=function(K){return K||K===0},a.formatPercent=function(K,ee){ee=ee||0;for(var ie=(Math.round(100*K*Math.pow(10,ee))*Math.pow(.1,ee)).toFixed(ee)+"%",ae=0;ae<ee;ae++)ie.indexOf(".")!==-1&&(ie=(ie=ie.replace("0%","%")).replace(".%","%"));return ie},a.isHidden=function(K){var ee=window.getComputedStyle(K).display;return!ee||ee==="none"},a.strTranslate=function(K,ee){return K||ee?"translate("+K+","+ee+")":""},a.strRotate=function(K){return K?"rotate("+K+")":""},a.strScale=function(K){return K!==1?"scale("+K+")":""},a.getTextTransform=function(K){var ee=K.noCenter,ie=K.textX,ae=K.textY,oe=K.targetX,fe=K.targetY,ge=K.anchorX||0,ve=K.anchorY||0,xe=K.rotate,_e=K.scale;return _e?_e>1&&(_e=1):_e=0,a.strTranslate(oe-_e*(ie+ge),fe-_e*(ae+ve))+a.strScale(_e)+(xe?"rotate("+xe+(ee?"":" "+ie+" "+ae)+")":"")},a.setTransormAndDisplay=function(K,ee){K.attr("transform",a.getTextTransform(ee)),K.style("display",ee.scale?null:"none")},a.ensureUniformFontSize=function(K,ee){var ie=a.extendFlat({},ee);return ie.size=Math.max(ee.size,K._fullLayout.uniformtext.minsize||0),ie},a.join2=function(K,ee,ie){var ae=K.length;return ae>1?K.slice(0,-1).join(ee)+ie+K[ae-1]:K.join(ee)},a.bigFont=function(K){return Math.round(1.2*K)};var J=a.getFirefoxVersion(),X=J!==null&&J<86;a.getPositionFromD3Event=function(){return X?[T.event.layerX,T.event.layerY]:[T.event.offsetX,T.event.offsetY]}},41965:function(N){N.exports=function(L){return window&&window.process&&window.process.versions?Object.prototype.toString.call(L)==="[object Object]":Object.prototype.toString.call(L)==="[object Object]"&&Object.getPrototypeOf(L).hasOwnProperty("hasOwnProperty")}},66636:function(N,L,e){var T=e(65487),w=/^\w*$/;N.exports=function(i,_,v,h){var s,t,a;v=v||"name",h=h||"value";var n={};_&&_.length?(a=T(i,_),t=a.get()):t=i,_=_||"";var r={};if(t)for(s=0;s<t.length;s++)r[t[s][v]]=s;var l=w.test(h),o={set:function(u,p){var c=p===null?4:0;if(!t){if(!a||c===4)return;t=[],a.set(t)}var b=r[u];if(b===void 0){if(c===4)return;c|=3,b=t.length,r[u]=b}else p!==(l?t[b][h]:T(t[b],h).get())&&(c|=2);var g=t[b]=t[b]||{};return g[v]=u,l?g[h]=p:T(g,h).set(p),p!==null&&(c&=-5),n[b]=n[b]|c,o},get:function(u){if(t){var p=r[u];return p===void 0?void 0:l?t[p][h]:T(t[p],h).get()}},rename:function(u,p){var c=r[u];return c===void 0||(n[c]=1|n[c],r[p]=c,delete r[u],t[c][v]=p),o},remove:function(u){var p=r[u];if(p===void 0)return o;var c=t[p];if(Object.keys(c).length>2)return n[p]=2|n[p],o.set(u,null);if(l){for(s=p;s<t.length;s++)n[s]=3|n[s];for(s=p;s<t.length;s++)r[t[s][v]]--;t.splice(p,1),delete r[u]}else T(c,h).set(null),n[p]=6|n[p];return o},constructUpdate:function(){for(var u,p,c={},b=Object.keys(n),g=0;g<b.length;g++)p=b[g],u=_+"["+p+"]",t[p]?(1&n[p]&&(c[u+"."+v]=t[p][v]),2&n[p]&&(c[u+"."+h]=l?4&n[p]?null:t[p][h]:4&n[p]?null:T(t[p],h).get())):c[u]=null;return c}};return o}},15867:function(N,L,e){var T=e(73972);N.exports=function(w,i){for(var _=w._context.locale,v=0;v<2;v++){for(var h=w._context.locales,s=0;s<2;s++){var t=(h[_]||{}).dictionary;if(t){var a=t[i];if(a)return a}h=T.localeRegistry}var n=_.split("-")[0];if(n===_)break;_=n}return i}},47769:function(N,L,e){var T=e(72075).dfltConfig,w=e(75046),i=N.exports={};i.log=function(){var _;if(T.logging>1){var v=["LOG:"];for(_=0;_<arguments.length;_++)v.push(arguments[_]);console.trace.apply(console,v)}if(T.notifyOnLogging>1){var h=[];for(_=0;_<arguments.length;_++)h.push(arguments[_]);w(h.join("<br>"),"long")}},i.warn=function(){var _;if(T.logging>0){var v=["WARN:"];for(_=0;_<arguments.length;_++)v.push(arguments[_]);console.trace.apply(console,v)}if(T.notifyOnLogging>0){var h=[];for(_=0;_<arguments.length;_++)h.push(arguments[_]);w(h.join("<br>"),"stick")}},i.error=function(){var _;if(T.logging>0){var v=["ERROR:"];for(_=0;_<arguments.length;_++)v.push(arguments[_]);console.error.apply(console,v)}if(T.notifyOnLogging>0){var h=[];for(_=0;_<arguments.length;_++)h.push(arguments[_]);w(h.join("<br>"),"stick")}}},77310:function(N,L,e){var T=e(39898);N.exports=function(w,i,_){var v=w.selectAll("g."+_.replace(/\s/g,".")).data(i,function(s){return s[0].trace.uid});v.exit().remove(),v.enter().append("g").attr("class",_),v.order();var h=w.classed("rangeplot")?"nodeRangePlot3":"node3";return v.each(function(s){s[0][h]=T.select(this)}),v}},35657:function(N,L,e){var T=e(79576);L.init2dArray=function(w,i){for(var _=new Array(w),v=0;v<w;v++)_[v]=new Array(i);return _},L.transposeRagged=function(w){var i,_,v=0,h=w.length;for(i=0;i<h;i++)v=Math.max(v,w[i].length);var s=new Array(v);for(i=0;i<v;i++)for(s[i]=new Array(h),_=0;_<h;_++)s[i][_]=w[_][i];return s},L.dot=function(w,i){if(!w.length||!i.length||w.length!==i.length)return null;var _,v,h=w.length;if(w[0].length)for(_=new Array(h),v=0;v<h;v++)_[v]=L.dot(w[v],i);else if(i[0].length){var s=L.transposeRagged(i);for(_=new Array(s.length),v=0;v<s.length;v++)_[v]=L.dot(w,s[v])}else for(_=0,v=0;v<h;v++)_+=w[v]*i[v];return _},L.translationMatrix=function(w,i){return[[1,0,w],[0,1,i],[0,0,1]]},L.rotationMatrix=function(w){var i=w*Math.PI/180;return[[Math.cos(i),-Math.sin(i),0],[Math.sin(i),Math.cos(i),0],[0,0,1]]},L.rotationXYMatrix=function(w,i,_){return L.dot(L.dot(L.translationMatrix(i,_),L.rotationMatrix(w)),L.translationMatrix(-i,-_))},L.apply3DTransform=function(w){return function(){var i=arguments,_=arguments.length===1?i[0]:[i[0],i[1],i[2]||0];return L.dot(w,[_[0],_[1],_[2],1]).slice(0,3)}},L.apply2DTransform=function(w){return function(){var i=arguments;i.length===3&&(i=i[0]);var _=arguments.length===1?i[0]:[i[0],i[1]];return L.dot(w,[_[0],_[1],1]).slice(0,2)}},L.apply2DTransform2=function(w){var i=L.apply2DTransform(w);return function(_){return i(_.slice(0,2)).concat(i(_.slice(2,4)))}},L.convertCssMatrix=function(w){if(w){var i=w.length;if(i===16)return w;if(i===6)return[w[0],w[1],0,0,w[2],w[3],0,0,0,0,1,0,w[4],w[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},L.inverseTransformMatrix=function(w){var i=[];return T.invert(i,w),[[i[0],i[1],i[2],i[3]],[i[4],i[5],i[6],i[7]],[i[8],i[9],i[10],i[11]],[i[12],i[13],i[14],i[15]]]}},64872:function(N){N.exports={mod:function(L,e){var T=L%e;return T<0?T+e:T},modHalf:function(L,e){return Math.abs(L)>e/2?L-Math.round(L/e)*e:L}}},65487:function(N,L,e){var T=e(92770),w=e(73627).isArrayOrTypedArray;function i(n,r){return function(){var l,o,u,p,c,b=n;for(p=0;p<r.length-1;p++){if((l=r[p])===-1){for(o=!0,u=[],c=0;c<b.length;c++)u[c]=i(b[c],r.slice(p+1))(),u[c]!==u[0]&&(o=!1);return o?u[0]:u}if(typeof l=="number"&&!w(b)||typeof(b=b[l])!="object"||b===null)return}if(typeof b=="object"&&b!==null&&(u=b[r[p]])!==null)return u}}N.exports=function(n,r){if(T(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var l,o,u,p,c=r.split(".");for(p=0;p<c.length;p++)if(String(c[p]).slice(0,2)==="__")throw"bad property string";for(p=0;p<c.length;){if(l=String(c[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(l[1])c[p]=l[1];else{if(p!==0)throw"bad property string";c.splice(0,1)}for(o=l[2].substr(1,l[2].length-2).split("]["),u=0;u<o.length;u++)p++,c.splice(p,0,Number(o[u]))}p++}return typeof n!="object"?function(b,g,d){return{set:function(){throw"bad container"},get:function(){},astr:g,parts:d,obj:b}}(n,r,c):{set:h(n,c,r),get:i(n,c),astr:r,parts:c,obj:n}};var _=/(^|\.)args\[/;function v(n,r){return n===void 0||n===null&&!r.match(_)}function h(n,r,l){return function(o){var u,p,c=n,b="",g=v(o,l);for(p=0;p<r.length-1;p++){if(typeof(u=r[p])=="number"&&!w(c))throw"array index but container is not an array";if(u===-1){if(g=!t(c,r.slice(p+1),o,l))break;return}if(!a(c,u,r[p+1],g))break;if(typeof(c=c[u])!="object"||c===null)throw"container is not an object";b=s(b,u)}if(g){if(p===r.length-1&&(delete c[r[p]],Array.isArray(c)&&+r[p]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[r[p]]=o}}function s(n,r){var l=r;return T(r)?l="["+r+"]":n&&(l="."+r),n+l}function t(n,r,l,o){var u,p=w(l),c=!0,b=l,g=o.replace("-1",0),d=!p&&v(l,g),m=r[0];for(u=0;u<n.length;u++)g=o.replace("-1",u),p&&(d=v(b=l[u%l.length],g)),d&&(c=!1),a(n,u,m,d)&&h(n[u],r,o.replace("-1",u))(b);return c}function a(n,r,l,o){if(n[r]===void 0){if(o)return!1;n[r]=typeof l=="number"?[]:{}}return!0}},64213:function(N){N.exports=function(){}},75046:function(N,L,e){var T=e(39898),w=e(92770),i=[];N.exports=function(_,v){if(i.indexOf(_)===-1){i.push(_);var h=1e3;w(v)?h=v:v==="long"&&(h=3e3);var s=T.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(i).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var n=T.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(t)});for(var r=n.append("p"),l=a.split(/<br\s*\/?>/g),o=0;o<l.length;o++)o&&r.append("br"),r.append("span").text(l[o]);v==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(h).call(t)})}function t(a){a.duration(700).style("opacity",0).each("end",function(n){var r=i.indexOf(n);r!==-1&&i.splice(r,1),T.select(this).remove()})}}},39918:function(N,L,e){var T=e(6964),w="data-savedcursor";N.exports=function(i,_){var v=i.attr(w);if(_){if(!v){for(var h=(i.attr("class")||"").split(" "),s=0;s<h.length;s++){var t=h[s];t.indexOf("cursor-")===0&&i.attr(w,t.substr(7)).classed(t,!1)}i.attr(w)||i.attr(w,"!!")}T(i,_)}else v&&(i.attr(w,null),v==="!!"?T(i):T(i,v))}},61082:function(N,L,e){var T=e(35657).dot,w=e(50606).BADNUM,i=N.exports={};i.tester=function(_){var v,h=_.slice(),s=h[0][0],t=s,a=h[0][1],n=a;for(h[h.length-1][0]===h[0][0]&&h[h.length-1][1]===h[0][1]||h.push(h[0]),v=1;v<h.length;v++)s=Math.min(s,h[v][0]),t=Math.max(t,h[v][0]),a=Math.min(a,h[v][1]),n=Math.max(n,h[v][1]);var r,l=!1;h.length===5&&(h[0][0]===h[1][0]?h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]&&(l=!0,r=function(p){return p[0]===h[0][0]}):h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(l=!0,r=function(p){return p[1]===h[0][1]}));var o=!0,u=h[0];for(v=1;v<h.length;v++)if(u[0]!==h[v][0]||u[1]!==h[v][1]){o=!1;break}return{xmin:s,xmax:t,ymin:a,ymax:n,pts:h,contains:l?function(p,c){var b=p[0],g=p[1];return!(b===w||b<s||b>t||g===w||g<a||g>n||c&&r(p))}:function(p,c){var b=p[0],g=p[1];if(b===w||b<s||b>t||g===w||g<a||g>n)return!1;var d,m,x,y,k,f=h.length,S=h[0][0],M=h[0][1],E=0;for(d=1;d<f;d++)if(m=S,x=M,S=h[d][0],M=h[d][1],!(b<(y=Math.min(m,S))||b>Math.max(m,S)||g>Math.max(x,M)))if(g<Math.min(x,M))b!==y&&E++;else{if(g===(k=S===m?g:x+(b-m)*(M-x)/(S-m)))return d!==1||!c;g<=k&&b!==y&&E++}return E%2==1},isRect:l,degenerate:o}},i.isSegmentBent=function(_,v,h,s){var t,a,n,r=_[v],l=[_[h][0]-r[0],_[h][1]-r[1]],o=T(l,l),u=Math.sqrt(o),p=[-l[1]/u,l[0]/u];for(t=v+1;t<h;t++)if(a=[_[t][0]-r[0],_[t][1]-r[1]],(n=T(a,l))<0||n>o||Math.abs(T(a,p))>s)return!0;return!1},i.filter=function(_,v){var h=[_[0]],s=0,t=0;function a(n){_.push(n);var r=h.length,l=s;h.splice(t+1);for(var o=l+1;o<_.length;o++)(o===_.length-1||i.isSegmentBent(_,l,o+1,v))&&(h.push(_[o]),h.length<r-2&&(s=o,t=h.length-1),l=o)}return _.length>1&&a(_.pop()),{addPt:a,raw:_,filtered:h}}},79749:function(N,L,e){var T=e(58617),w=e(98580);N.exports=function(i,_,v){var h=i._fullLayout,s=!0;return h._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(v);else if(!t.pick||h._has("parcoords")){try{t.regl=w({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:i._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:_||[],cachedCode:v||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(a){i&&i.emit&&i.emit("plotly_webglcontextlost",{event:a,layer:t.key})},!1)}}),s||T({container:h._glcontainer.node()}),s}},45142:function(N,L,e){var T=e(92770),w=e(35791);N.exports=function(i){var _;if(typeof(_=i&&i.hasOwnProperty("userAgent")?i.userAgent:function(){var r;return typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),r}())!="string")return!0;var v=w({ua:{headers:{"user-agent":_}},tablet:!0,featureDetect:!1});if(!v){for(var h=_.split(" "),s=1;s<h.length;s++)if(h[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var a=h[t];if(a.substr(0,8)==="Version/"){var n=a.substr(8).split(".")[0];if(T(n)&&(n=+n),n>=13)return!0}}}return v}},75138:function(N){N.exports=function(L,e){if(e instanceof RegExp){for(var T=e.toString(),w=0;w<L.length;w++)if(L[w]instanceof RegExp&&L[w].toString()===T)return L;L.push(e)}else!e&&e!==0||L.indexOf(e)!==-1||L.push(e);return L}},10847:function(N,L,e){var T=e(71828),w=e(72075).dfltConfig,i={add:function(_,v,h,s,t){var a,n;_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},n=_.undoQueue.index,_.autoplay?_.undoQueue.inSequence||(_.autoplay=!1):(!_.undoQueue.sequence||_.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},_.undoQueue.queue.splice(n,_.undoQueue.queue.length-n,a),_.undoQueue.index+=1):a=_.undoQueue.queue[n-1],_.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(v),a.undo.args.unshift(h),a.redo.calls.push(s),a.redo.args.push(t)),_.undoQueue.queue.length>w.queueLength&&(_.undoQueue.queue.shift(),_.undoQueue.index--))},startSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!0,_.undoQueue.beginSequence=!0},stopSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!1,_.undoQueue.beginSequence=!1},undo:function(_){var v,h;if(!(_.undoQueue===void 0||isNaN(_.undoQueue.index)||_.undoQueue.index<=0)){for(_.undoQueue.index--,v=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,h=0;h<v.undo.calls.length;h++)i.plotDo(_,v.undo.calls[h],v.undo.args[h]);_.undoQueue.inSequence=!1,_.autoplay=!1}},redo:function(_){var v,h;if(!(_.undoQueue===void 0||isNaN(_.undoQueue.index)||_.undoQueue.index>=_.undoQueue.queue.length)){for(v=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,h=0;h<v.redo.calls.length;h++)i.plotDo(_,v.redo.calls[h],v.redo.args[h]);_.undoQueue.inSequence=!1,_.autoplay=!1,_.undoQueue.index++}},plotDo:function(_,v,h){_.autoplay=!0,h=function(s,t){for(var a,n=[],r=0;r<t.length;r++)a=t[r],n[r]=a===s?a:typeof a=="object"?Array.isArray(a)?T.extendDeep([],a):T.extendDeepAll({},a):a;return n}(_,h),v.apply(null,h)}};N.exports=i},30587:function(N,L){L.counter=function(e,T,w,i){var _=(T||"")+(w?"":"$"),v=i===!1?"":"^";return e==="xy"?new RegExp(v+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+_):new RegExp(v+e+"([2-9]|[1-9][0-9]+)?"+_)}},6962:function(N){var L=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;N.exports=function(T,w){for(;w;){var i=T.match(L);if(i)T=i[1];else{if(!T.match(e))throw new Error("bad relativeAttr call:"+[T,w]);T=""}if(w.charAt(0)!=="^")break;w=w.slice(1)}return T&&w.charAt(0)!=="["?T+"."+w:T+w}},51332:function(N,L,e){var T=e(73627).isArrayOrTypedArray,w=e(41965);N.exports=function i(_,v){for(var h in v){var s=v[h],t=_[h];if(t!==s)if(h.charAt(0)==="_"||typeof s=="function"){if(h in _)continue;_[h]=s}else if(T(s)&&T(t)&&w(s[0])){if(h==="customdata"||h==="ids")continue;for(var a=Math.min(s.length,t.length),n=0;n<a;n++)t[n]!==s[n]&&w(s[n])&&w(t[n])&&i(t[n],s[n])}else w(s)&&w(t)&&(i(t,s),Object.keys(t).length||delete _[h])}}},65888:function(N,L,e){var T=e(92770),w=e(47769),i=e(23389),_=e(50606).BADNUM,v=1e-9;function h(n,r){return n<r}function s(n,r){return n<=r}function t(n,r){return n>r}function a(n,r){return n>=r}L.findBin=function(n,r,l){if(T(r.start))return l?Math.ceil((n-r.start)/r.size-v)-1:Math.floor((n-r.start)/r.size+v);var o,u,p=0,c=r.length,b=0,g=c>1?(r[c-1]-r[0])/(c-1):1;for(u=g>=0?l?h:s:l?a:t,n+=g*v*(l?-1:1)*(g>=0?1:-1);p<c&&b++<100;)u(r[o=Math.floor((p+c)/2)],n)?p=o+1:c=o;return b>90&&w.log("Long binary search..."),p-1},L.sorterAsc=function(n,r){return n-r},L.sorterDes=function(n,r){return r-n},L.distinctVals=function(n){var r,l=n.slice();for(l.sort(L.sorterAsc),r=l.length-1;r>-1&&l[r]===_;r--);for(var o,u=l[r]-l[0]||1,p=u/(r||1)/1e4,c=[],b=0;b<=r;b++){var g=l[b],d=g-o;o===void 0?(c.push(g),o=g):d>p&&(u=Math.min(u,d),c.push(g),o=g)}return{vals:c,minDiff:u}},L.roundUp=function(n,r,l){for(var o,u=0,p=r.length-1,c=0,b=l?0:1,g=l?1:0,d=l?Math.ceil:Math.floor;u<p&&c++<100;)r[o=d((u+p)/2)]<=n?u=o+b:p=o-g;return r[u]},L.sort=function(n,r){for(var l=0,o=0,u=1;u<n.length;u++){var p=r(n[u],n[u-1]);if(p<0?l=1:p>0&&(o=1),l&&o)return n.sort(r)}return o?n:n.reverse()},L.findIndexOfMin=function(n,r){r=r||i;for(var l,o=1/0,u=0;u<n.length;u++){var p=r(n[u]);p<o&&(o=p,l=u)}return l}},6964:function(N){N.exports=function(L,e){(L.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&L.classed(T,!1)}),e&&L.classed("cursor-"+e,!0)}},58617:function(N,L,e){var T=e(7901),w=function(){};N.exports=function(i){for(var _ in i)typeof i[_]=="function"&&(i[_]=w);i.destroy=function(){i.container.parentNode.removeChild(i.container)};var v=document.createElement("div");v.className="no-webgl",v.style.cursor="pointer",v.style.fontSize="24px",v.style.color=T.defaults[0],v.style.position="absolute",v.style.left=v.style.top="0px",v.style.width=v.style.height="100%",v.style["background-color"]=T.lightLine,v.style["z-index"]=30;var h=document.createElement("p");return h.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",h.style.position="relative",h.style.top="50%",h.style.left="50%",h.style.height="30%",h.style.width="50%",h.style.margin="-15% 0 0 -25%",v.appendChild(h),i.container.appendChild(v),i.container.style.background="#FFFFFF",i.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(N){N.exports=function(L){return Object.keys(L).sort()}},80038:function(N,L,e){var T=e(92770),w=e(73627).isArrayOrTypedArray;L.aggNums=function(i,_,v,h){var s,t;if((!h||h>v.length)&&(h=v.length),T(_)||(_=!1),w(v[0])){for(t=new Array(h),s=0;s<h;s++)t[s]=L.aggNums(i,_,v[s]);v=t}for(s=0;s<h;s++)T(_)?T(v[s])&&(_=i(+_,+v[s])):_=v[s];return _},L.len=function(i){return L.aggNums(function(_){return _+1},0,i)},L.mean=function(i,_){return _||(_=L.len(i)),L.aggNums(function(v,h){return v+h},0,i)/_},L.midRange=function(i){if(i!==void 0&&i.length!==0)return(L.aggNums(Math.max,null,i)+L.aggNums(Math.min,null,i))/2},L.variance=function(i,_,v){return _||(_=L.len(i)),T(v)||(v=L.mean(i,_)),L.aggNums(function(h,s){return h+Math.pow(s-v,2)},0,i)/_},L.stdev=function(i,_,v){return Math.sqrt(L.variance(i,_,v))},L.median=function(i){var _=i.slice().sort();return L.interp(_,.5)},L.interp=function(i,_){if(!T(_))throw"n should be a finite number";if((_=_*i.length-.5)<0)return i[0];if(_>i.length-1)return i[i.length-1];var v=_%1;return v*i[Math.ceil(_)]+(1-v)*i[Math.floor(_)]}},78614:function(N,L,e){var T=e(25075);N.exports=function(w){return w?T(w):[0,0,0,1]}},3883:function(N,L,e){var T=e(32396),w=e(91424),i=e(71828),_=null;N.exports=function(){if(_!==null)return _;_=!1;var v=i.isIE()||i.isSafari()||i.isIOS();if(window.navigator.userAgent&&!v){var h=Array.from(T.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")_=h.some(function(n){return s.apply(null,n)});else{var t=w.tester.append("image").attr("style",T.STYLE),a=window.getComputedStyle(t.node()).imageRendering;_=h.some(function(n){var r=n[1];return a===r||a===r.toLowerCase()}),t.remove()}}return _}},63893:function(N,L,e){var T=e(39898),w=e(71828),i=w.strTranslate,_=e(77922),v=e(18783).LINE_SPACING,h=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;L.convertToTspans=function(z,U,R){var j=z.text(),Z=!z.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&j.match(h),F=T.select(z.node().parentNode);if(!F.empty()){var V=z.attr("class")?z.attr("class").split(" ")[0]:"text";return V+="-math",F.selectAll("svg."+V).remove(),F.selectAll("g."+V+"-group").remove(),z.style("display",null).attr({"data-unformatted":j,"data-math":"N"}),Z?(U&&U._promises||[]).push(new Promise(function(te){z.style("display","none");var $=parseInt(z.node().style.fontSize,10),J={fontSize:$};(function(X,K,ee){var ie,ae,oe,fe,ge=parseInt((MathJax.version||"").split(".")[0]);if(ge===2||ge===3){var ve=function(){var _e="math-output-"+w.randstr({},64),ye=(fe=T.select("body").append("div").attr({id:_e}).style({visibility:"hidden",position:"absolute","font-size":K.fontSize+"px"}).text(X.replace(s,"\\lt ").replace(t,"\\gt "))).node();return ge===2?MathJax.Hub.Typeset(ye):MathJax.typeset([ye])},xe=function(){var _e=fe.select(ge===2?".MathJax_SVG":".MathJax"),ye=!_e.empty()&&fe.select("svg").node();if(ye){var Ce,ke=ye.getBoundingClientRect();Ce=ge===2?T.select("body").select("#MathJax_SVG_glyphs"):_e.select("defs"),ee(_e,Ce,ke)}else w.log("There was an error in the tex syntax.",X),ee();fe.remove()};ge===2?MathJax.Hub.Queue(function(){return ae=w.extendDeepAll({},MathJax.Hub.config),oe=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:a},displayAlign:"left"})},function(){if((ie=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ve,xe,function(){if(ie!=="SVG")return MathJax.Hub.setRenderer(ie)},function(){return oe!==void 0&&(MathJax.Hub.processSectionDelay=oe),MathJax.Hub.Config(ae)}):ge===3&&(ae=w.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=a,(ie=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ve(),xe(),ie!=="svg"&&(MathJax.config.startup.output=ie),MathJax.config=ae}))}else w.warn("No MathJax version:",MathJax.version)})(Z[2],J,function(X,K,ee){F.selectAll("svg."+V).remove(),F.selectAll("g."+V+"-group").remove();var ie=X&&X.select("svg");if(!ie||!ie.node())return H(),void te();var ae=F.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});ae.node().appendChild(ie.node()),K&&K.node()&&ie.node().insertBefore(K.node().cloneNode(!0),ie.node().firstChild);var oe=ee.width,fe=ee.height;ie.attr({class:V,height:fe,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ge=z.node().style.fill||"black",ve=ie.select("g");ve.attr({fill:ge,stroke:ge});var xe=ve.node().getBoundingClientRect(),_e=xe.width,ye=xe.height;(_e>oe||ye>fe)&&(ie.style("overflow","hidden"),_e=(xe=ie.node().getBoundingClientRect()).width,ye=xe.height);var Ce=+z.attr("x"),ke=+z.attr("y"),Te=-($||z.node().getBoundingClientRect().height)/4;if(V[0]==="y")ae.attr({transform:"rotate("+[-90,Ce,ke]+")"+i(-_e/2,Te-ye/2)});else if(V[0]==="l")ke=Te-ye/2;else if(V[0]==="a"&&V.indexOf("atitle")!==0)Ce=0,ke=Te;else{var le=z.attr("text-anchor");Ce-=_e*(le==="middle"?.5:le==="end"?1:0),ke=ke+Te-ye/2}ie.attr({x:Ce,y:ke}),R&&R.call(z,ae),te(ae)})})):H(),z}function H(){F.empty()||(V=z.attr("class")+"-math",F.select("svg."+V).remove()),z.text("").style("white-space","pre");var te=function($,J){J=J.replace(p," ");var X,K=!1,ee=[],ie=-1;function ae(){ie++;var we=document.createElementNS(_.svg,"tspan");T.select(we).attr({class:"line",dy:ie*v+"em"}),$.appendChild(we),X=we;var Ee=ee;if(ee=[{node:we}],Ee.length>1)for(var Oe=1;Oe<Ee.length;Oe++)oe(Ee[Oe])}function oe(we){var Ee,Oe=we.type,Fe={};if(Oe==="a"){Ee="a";var pe=we.target,be=we.href,Me=we.popup;be&&(Fe={"xlink:xlink:show":pe==="_blank"||pe.charAt(0)!=="_"?"new":"replace",target:pe,"xlink:xlink:href":be},Me&&(Fe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Me+'");return false;'))}else Ee="tspan";we.style&&(Fe.style=we.style);var De=document.createElementNS(_.svg,Ee);if(Oe==="sup"||Oe==="sub"){fe(X,o),X.appendChild(De);var Ne=document.createElementNS(_.svg,"tspan");fe(Ne,o),T.select(Ne).attr("dy",l[Oe]),Fe.dy=r[Oe],X.appendChild(De),X.appendChild(Ne)}else X.appendChild(De);T.select(De).attr(Fe),X=we.node=De,ee.push(we)}function fe(we,Ee){we.appendChild(document.createTextNode(Ee))}function ge(we){if(ee.length!==1){var Ee=ee.pop();we!==Ee.type&&w.log("Start tag <"+Ee.type+"> doesnt match end tag <"+we+">. Pretending it did match.",J),X=ee[ee.length-1].node}else w.log("Ignoring unexpected end tag </"+we+">.",J)}g.test(J)?ae():(X=$,ee=[{node:$}]);for(var ve=J.split(c),xe=0;xe<ve.length;xe++){var _e=ve[xe],ye=_e.match(b),Ce=ye&&ye[2].toLowerCase(),ke=n[Ce];if(Ce==="br")ae();else if(ke===void 0)fe(X,E(_e));else if(ye[1])ge(Ce);else{var Te=ye[4],le={type:Ce},ue=k(Te,d);if(ue?(ue=ue.replace(f,"$1 fill:"),ke&&(ue+=";"+ke)):ke&&(ue=ke),ue&&(le.style=ue),Ce==="a"){K=!0;var de=k(Te,m);if(de){var Le=O(de);Le&&(le.href=Le,le.target=k(Te,x)||"_blank",le.popup=k(Te,y))}}oe(le)}}return K}(z.node(),j);te&&z.style("pointer-events","all"),L.positionText(z),R&&R.call(z)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,a=[["$","$"],["\\(","\\)"]],n={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",sup:"-0.6em"},l={sub:"-0.21em",sup:"0.42em"},o="",u=["http:","https:","mailto:","",void 0,":"],p=L.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,g=/<br(\s+.*)?>/i;L.BR_TAG_ALL=/<br(\s+.*)?>/gi;var d=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,m=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function k(z,U){if(!z)return null;var R=z.match(U),j=R&&(R[3]||R[4]);return j&&E(j)}var f=/(^|;)\s*color:/;L.plainText=function(z,U){for(var R=(U=U||{}).len!==void 0&&U.len!==-1?U.len:1/0,j=U.allowedTags!==void 0?U.allowedTags:["br"],Z=z.split(c),F=[],V="",H=0,te=0;te<Z.length;te++){var $=Z[te],J=$.match(b),X=J&&J[2].toLowerCase();if(X)j.indexOf(X)!==-1&&(F.push($),V=X);else{var K=$.length;if(H+K<R)F.push($),H+=K;else if(H<R){var ee=R-H;V&&(V!=="br"||ee<=3||K<=3)&&F.pop(),R>3?F.push($.substr(0,ee-3)+"..."):F.push($.substr(0,ee));break}V=""}}return F.join("")};var S={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},M=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(z){return z.replace(M,function(U,R){return(R.charAt(0)==="#"?function(j){if(!(j>1114111)){var Z=String.fromCodePoint;if(Z)return Z(j);var F=String.fromCharCode;return j<=65535?F(j):F(55232+(j>>10),j%1024+56320)}}(R.charAt(1)==="x"?parseInt(R.substr(2),16):parseInt(R.substr(1),10)):S[R])||U})}function O(z){var U=encodeURI(decodeURI(z)),R=document.createElement("a"),j=document.createElement("a");R.href=z,j.href=U;var Z=R.protocol,F=j.protocol;return u.indexOf(Z)!==-1&&u.indexOf(F)!==-1?U:""}function P(z,U,R){var j,Z,F,V=R.horizontalAlign,H=R.verticalAlign||"top",te=z.node().getBoundingClientRect(),$=U.node().getBoundingClientRect();return Z=H==="bottom"?function(){return te.bottom-j.height}:H==="middle"?function(){return te.top+(te.height-j.height)/2}:function(){return te.top},F=V==="right"?function(){return te.right-j.width}:V==="center"?function(){return te.left+(te.width-j.width)/2}:function(){return te.left},function(){j=this.node().getBoundingClientRect();var J=F()-$.left,X=Z()-$.top,K=R.gd||{};if(R.gd){K._fullLayout._calcInverseTransform(K);var ee=w.apply3DTransform(K._fullLayout._invTransform)(J,X);J=ee[0],X=ee[1]}return this.style({top:X+"px",left:J+"px","z-index":1e3}),this}}L.convertEntities=E,L.sanitizeHTML=function(z){z=z.replace(p," ");for(var U=document.createElement("p"),R=U,j=[],Z=z.split(c),F=0;F<Z.length;F++){var V=Z[F],H=V.match(b),te=H&&H[2].toLowerCase();if(te in n)if(H[1])j.length&&(R=j.pop());else{var $=H[4],J=k($,d),X=J?{style:J}:{};if(te==="a"){var K=k($,m);if(K){var ee=O(K);if(ee){X.href=ee;var ie=k($,x);ie&&(X.target=ie)}}}var ae=document.createElement(te);R.appendChild(ae),T.select(ae).attr(X),R=ae,j.push(ae)}else R.appendChild(document.createTextNode(E(V)))}return U.innerHTML},L.lineCount=function(z){return z.selectAll("tspan.line").size()||1},L.positionText=function(z,U,R){return z.each(function(){var j=T.select(this);function Z(H,te){return te===void 0?(te=j.attr(H))===null&&(j.attr(H,0),te=0):j.attr(H,te),te}var F=Z("x",U),V=Z("y",R);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:F,y:V})})};var I="1px ";L.makeTextShadow=function(z){return I+I+I+z+", -"+I+"-"+I+I+z+", "+I+"-"+I+I+z+", -"+I+I+I+z},L.makeEditable=function(z,U){var R=U.gd,j=U.delegate,Z=T.dispatch("edit","input","cancel"),F=j||z;if(z.style({"pointer-events":j?"none":"all"}),z.size()!==1)throw new Error("boo");function V(){var te,$,J,X,K;te=T.select(R).select(".svg-container"),$=te.append("div"),J=z.node().style,X=parseFloat(J.fontSize||12),(K=U.text)===void 0&&(K=z.attr("data-unformatted")),$.classed("plugin-editable editable",!0).style({position:"absolute","font-family":J.fontFamily||"Arial","font-size":X,color:U.fill||J.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-X/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(K).call(P(z,te,U)).on("blur",function(){R._editing=!1,z.text(this.textContent).style({opacity:1});var ae,oe=T.select(this).attr("class");(ae=oe?"."+oe.split(" ")[0]+"-math-group":"[class*=-math-group]")&&T.select(z.node().parentNode).select(ae).style({opacity:0});var fe=this.textContent;T.select(this).transition().duration(0).remove(),T.select(document).on("mouseup",null),Z.edit.call(z,fe)}).on("focus",function(){var ae=this;R._editing=!0,T.select(document).on("mouseup",function(){if(T.event.target===ae)return!1;document.activeElement===$.node()&&$.node().blur()})}).on("keyup",function(){T.event.which===27?(R._editing=!1,z.style({opacity:1}),T.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Z.cancel.call(z,this.textContent)):(Z.input.call(z,this.textContent),T.select(this).call(P(z,te,U)))}).on("keydown",function(){T.event.which===13&&this.blur()}).call(H),z.style({opacity:0});var ee,ie=F.attr("class");(ee=ie?"."+ie.split(" ")[0]+"-math-group":"[class*=-math-group]")&&T.select(z.node().parentNode).select(ee).style({opacity:0})}function H(te){var $=te.node(),J=document.createRange();J.selectNodeContents($);var X=window.getSelection();X.removeAllRanges(),X.addRange(J),$.focus()}return U.immediate?V():F.on("click",V),T.rebind(z,Z,"on")}},79990:function(N,L){var e={};function T(w){w&&w.timer!==null&&(clearTimeout(w.timer),w.timer=null)}L.throttle=function(w,i,_){var v=e[w],h=Date.now();if(!v){for(var s in e)e[s].ts<h-6e4&&delete e[s];v=e[w]={ts:0,timer:null}}function t(){_(),v.ts=Date.now(),v.onDone&&(v.onDone(),v.onDone=null)}T(v),h>v.ts+i?t():v.timer=setTimeout(function(){t(),v.timer=null},i)},L.done=function(w){var i=e[w];return i&&i.timer?new Promise(function(_){var v=i.onDone;i.onDone=function(){v&&v(),_(),i.onDone=null}}):Promise.resolve()},L.clear=function(w){if(w)T(e[w]),delete e[w];else for(var i in e)L.clear(i)}},58163:function(N,L,e){var T=e(92770);N.exports=function(w,i){if(w>0)return Math.log(w)/Math.LN10;var _=Math.log(Math.min(i[0],i[1]))/Math.LN10;return T(_)||(_=Math.log(Math.max(i[0],i[1]))/Math.LN10-6),_}},90973:function(N,L,e){var T=N.exports={},w=e(78776).locationmodeToLayer,i=e(96892).zL;T.getTopojsonName=function(_){return[_.scope.replace(/ /g,"-"),"_",_.resolution.toString(),"m"].join("")},T.getTopojsonPath=function(_,v){return _+v+".json"},T.getTopojsonFeatures=function(_,v){var h=w[_.locationmode],s=v.objects[h];return i(v,s).features}},37815:function(N){N.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(N){N.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(N,L,e){var T=e(73972);N.exports=function(w){for(var i,_,v=T.layoutArrayContainers,h=T.layoutArrayRegexes,s=w.split("[")[0],t=0;t<h.length;t++)if((_=w.match(h[t]))&&_.index===0){i=_[0];break}if(i||(i=v[v.indexOf(s)]),!i)return!1;var a=w.substr(i.length);return a?!!(_=a.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:i,index:Number(_[1]),property:_[3]||""}:{array:i,index:"",property:""}}},30962:function(N,L,e){var T=e(1426).extendFlat,w=e(41965),i={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},_={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},v=i.flags.slice().concat(["fullReplot"]),h=_.flags.slice().concat("layoutReplot");function s(n){for(var r={},l=0;l<n.length;l++)r[n[l]]=!1;return r}function t(n,r,l){var o=T({},n);for(var u in o){var p=o[u];w(p)&&(o[u]=a(p,r,0,u))}return l==="from-root"&&(o.editType=r),o}function a(n,r,l,o){if(n.valType){var u=T({},n);if(u.editType=r,Array.isArray(n.items)){u.items=new Array(n.items.length);for(var p=0;p<n.items.length;p++)u.items[p]=a(n.items[p],r)}return u}return t(n,r,o.charAt(0)==="_"?"nested":"from-root")}N.exports={traces:i,layout:_,traceFlags:function(){return s(v)},layoutFlags:function(){return s(h)},update:function(n,r){var l=r.editType;if(l&&l!=="none")for(var o=l.split("+"),u=0;u<o.length;u++)n[o[u]]=!0},overrideAll:t}},58377:function(N,L,e){var T=e(92770),w=e(27812),i=e(73972),_=e(71828),v=e(74875),h=e(41675),s=e(7901),t=h.cleanId,a=h.getFromTrace,n=i.traceIs;function r(m,x){var y=m[x],k=x.charAt(0);y&&y!=="paper"&&(m[x]=t(y,k,!0))}function l(m){function x(y,k){var f=m[y],S=m.title&&m.title[k];f&&!S&&(m.title||(m.title={}),m.title[k]=m[y],delete m[y])}m&&(typeof m.title!="string"&&typeof m.title!="number"||(m.title={text:m.title}),x("titlefont","font"),x("titleposition","position"),x("titleside","side"),x("titleoffset","offset"))}function o(m){if(!_.isPlainObject(m))return!1;var x=m.name;return delete m.name,delete m.showlegend,(typeof x=="string"||typeof x=="number")&&String(x)}function u(m,x,y,k){if(y&&!k)return m;if(k&&!y||!m.trim())return x;if(!x.trim())return m;var f,S=Math.min(m.length,x.length);for(f=0;f<S&&m.charAt(f)===x.charAt(f);f++);return m.substr(0,f).trim()}function p(m){var x="middle",y="center";return typeof m=="string"&&(m.indexOf("top")!==-1?x="top":m.indexOf("bottom")!==-1&&(x="bottom"),m.indexOf("left")!==-1?y="left":m.indexOf("right")!==-1&&(y="right")),x+" "+y}function c(m,x){return x in m&&typeof m[x]=="object"&&Object.keys(m[x]).length===0}L.clearPromiseQueue=function(m){Array.isArray(m._promises)&&m._promises.length>0&&_.log("Clearing previous rejected promises from queue."),m._promises=[]},L.cleanLayout=function(m){var x,y;m||(m={}),m.xaxis1&&(m.xaxis||(m.xaxis=m.xaxis1),delete m.xaxis1),m.yaxis1&&(m.yaxis||(m.yaxis=m.yaxis1),delete m.yaxis1),m.scene1&&(m.scene||(m.scene=m.scene1),delete m.scene1);var k=(v.subplotsRegistry.cartesian||{}).attrRegex,f=(v.subplotsRegistry.polar||{}).attrRegex,S=(v.subplotsRegistry.ternary||{}).attrRegex,M=(v.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(m);for(x=0;x<E.length;x++){var O=E[x];if(k&&k.test(O)){var P=m[O];P.anchor&&P.anchor!=="free"&&(P.anchor=t(P.anchor)),P.overlaying&&(P.overlaying=t(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),P.autorange!=="withzero"&&P.autorange!=="tozero"||(P.autorange=!0,P.rangemode="tozero"),P.insiderange&&delete P.range,delete P.islog,delete P.isdate,delete P.categories,c(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),l(P)}else if(f&&f.test(O))l(m[O].radialaxis);else if(S&&S.test(O)){var I=m[O];l(I.aaxis),l(I.baxis),l(I.caxis)}else if(M&&M.test(O)){var z=m[O],U=z.cameraposition;if(Array.isArray(U)&&U[0].length===4){var R=U[0],j=U[1],Z=U[2],F=w([],R),V=[];for(y=0;y<3;++y)V[y]=j[y]+Z*F[2+4*y];z.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:j[0],y:j[1],z:j[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}l(z.xaxis),l(z.yaxis),l(z.zaxis)}}var H=Array.isArray(m.annotations)?m.annotations.length:0;for(x=0;x<H;x++){var te=m.annotations[x];_.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),r(te,"xref"),r(te,"yref"))}var $=Array.isArray(m.shapes)?m.shapes.length:0;for(x=0;x<$;x++){var J=m.shapes[x];_.isPlainObject(J)&&(r(J,"xref"),r(J,"yref"))}var X=Array.isArray(m.images)?m.images.length:0;for(x=0;x<X;x++){var K=m.images[x];_.isPlainObject(K)&&(r(K,"xref"),r(K,"yref"))}var ee=m.legend;return ee&&(ee.x>3?(ee.x=1.02,ee.xanchor="left"):ee.x<-2&&(ee.x=-.02,ee.xanchor="right"),ee.y>3?(ee.y=1.02,ee.yanchor="bottom"):ee.y<-2&&(ee.y=-.02,ee.yanchor="top")),l(m),m.dragmode==="rotate"&&(m.dragmode="orbit"),s.clean(m),m.template&&m.template.layout&&L.cleanLayout(m.template.layout),m},L.cleanData=function(m){for(var x=0;x<m.length;x++){var y,k=m[x];if(k.type==="histogramy"&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var f=s.defaults,S=k.error_y.color||(n(k,"bar")?s.defaultLine:f[x%f.length]);k.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&(k.bardir!=="h"||!n(k,"bar")&&k.type.substr(0,9)!=="histogram"||(k.orientation="h",L.swapXYData(k)),delete k.bardir),k.type==="histogramy"&&L.swapXYData(k),k.type!=="histogramx"&&k.type!=="histogramy"||(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=t(k.xaxis,"x")),k.yaxis&&(k.yaxis=t(k.yaxis,"y")),n(k,"gl3d")&&k.scene&&(k.scene=v.subplotsRegistry.gl3d.cleanId(k.scene)),!n(k,"pie-like")&&!n(k,"bar-like"))if(Array.isArray(k.textposition))for(y=0;y<k.textposition.length;y++)k.textposition[y]=p(k.textposition[y]);else k.textposition&&(k.textposition=p(k.textposition));var M=i.getModule(k);if(M&&M.colorbar){var E=M.colorbar.container,O=E?k[E]:k;O&&O.colorscale&&(O.colorscale==="YIGnBu"&&(O.colorscale="YlGnBu"),O.colorscale==="YIOrRd"&&(O.colorscale="YlOrRd"))}if(k.type==="surface"&&_.isPlainObject(k.contours)){var P=["x","y","z"];for(y=0;y<P.length;y++){var I=k.contours[P[y]];_.isPlainObject(I)&&(I.highlightColor&&(I.highlightcolor=I.highlightColor,delete I.highlightColor),I.highlightWidth&&(I.highlightwidth=I.highlightWidth,delete I.highlightWidth))}}if(k.type==="candlestick"||k.type==="ohlc"){var z=(k.increasing||{}).showlegend!==!1,U=(k.decreasing||{}).showlegend!==!1,R=o(k.increasing),j=o(k.decreasing);if(R!==!1&&j!==!1){var Z=u(R,j,z,U);Z&&(k.name=Z)}else!R&&!j||k.name||(k.name=R||j)}if(Array.isArray(k.transforms)){var F=k.transforms;for(y=0;y<F.length;y++){var V=F[y];if(_.isPlainObject(V))switch(V.type){case"filter":V.filtersrc&&(V.target=V.filtersrc,delete V.filtersrc),V.calendar&&(V.valuecalendar||(V.valuecalendar=V.calendar),delete V.calendar);break;case"groupby":if(V.styles=V.styles||V.style,V.styles&&!Array.isArray(V.styles)){var H=V.styles,te=Object.keys(H);V.styles=[];for(var $=0;$<te.length;$++)V.styles.push({target:te[$],value:H[te[$]]})}}}}c(k,"line")&&delete k.line,"marker"in k&&(c(k.marker,"line")&&delete k.marker.line,c(k,"marker")&&delete k.marker),s.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),l(k),k.colorbar&&l(k.colorbar),k.marker&&k.marker.colorbar&&l(k.marker.colorbar),k.line&&k.line.colorbar&&l(k.line.colorbar),k.aaxis&&l(k.aaxis),k.baxis&&l(k.baxis)}},L.swapXYData=function(m){var x;if(_.swapAttrs(m,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(m.z)&&Array.isArray(m.z[0])&&(m.transpose?delete m.transpose:m.transpose=!0),m.error_x&&m.error_y){var y=m.error_y,k="copy_ystyle"in y?y.copy_ystyle:!(y.color||y.thickness||y.width);_.swapAttrs(m,["error_?.copy_ystyle"]),k&&_.swapAttrs(m,["error_?.color","error_?.thickness","error_?.width"])}if(typeof m.hoverinfo=="string"){var f=m.hoverinfo.split("+");for(x=0;x<f.length;x++)f[x]==="x"?f[x]="y":f[x]==="y"&&(f[x]="x");m.hoverinfo=f.join("+")}},L.coerceTraceIndices=function(m,x){if(T(x))return[x];if(!Array.isArray(x)||!x.length)return m.data.map(function(f,S){return S});if(Array.isArray(x)){for(var y=[],k=0;k<x.length;k++)_.isIndex(x[k],m.data.length)?y.push(x[k]):_.warn("trace index (",x[k],") is not a number or is out of bounds");return y}return x},L.manageArrayContainers=function(m,x,y){var k=m.obj,f=m.parts,S=f.length,M=f[S-1],E=T(M);if(E&&x===null){var O=f.slice(0,S-1).join(".");_.nestedProperty(k,O).get().splice(M,1)}else E&&m.get()===void 0&&m.get()===void 0&&(y[m.astr]=null),m.set(x)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function g(m){var x=m.search(b);if(x>0)return m.substr(0,x)}L.hasParent=function(m,x){for(var y=g(x);y;){if(y in m)return!0;y=g(y)}return!1};var d=["x","y","z"];L.clearAxisTypes=function(m,x,y){for(var k=0;k<x.length;k++)for(var f=m._fullData[k],S=0;S<3;S++){var M=a(m,f,d[S]);if(M&&M.type!=="log"){var E=M._name,O=M._id.substr(1);if(O.substr(0,5)==="scene"){if(y[O]!==void 0)continue;E=O+"."+E}var P=E+".type";y[E]===void 0&&y[P]===void 0&&_.nestedProperty(m.layout,P).set(null)}}}},10641:function(N,L,e){var T=e(72391);L._doPlot=T._doPlot,L.newPlot=T.newPlot,L.restyle=T.restyle,L.relayout=T.relayout,L.redraw=T.redraw,L.update=T.update,L._guiRestyle=T._guiRestyle,L._guiRelayout=T._guiRelayout,L._guiUpdate=T._guiUpdate,L._storeDirectGUIEdit=T._storeDirectGUIEdit,L.react=T.react,L.extendTraces=T.extendTraces,L.prependTraces=T.prependTraces,L.addTraces=T.addTraces,L.deleteTraces=T.deleteTraces,L.moveTraces=T.moveTraces,L.purge=T.purge,L.addFrames=T.addFrames,L.deleteFrames=T.deleteFrames,L.animate=T.animate,L.setPlotConfig=T.setPlotConfig;var w=e(24401).getGraphDiv,i=e(34031).eraseActiveShape;L.deleteActiveShape=function(v){return i(w(v))},L.toImage=e(403),L.validate=e(84936),L.downloadImage=e(7239);var _=e(96318);L.makeTemplate=_.makeTemplate,L.validateTemplate=_.validateTemplate},6611:function(N,L,e){var T=e(41965),w=e(64213),i=e(47769),_=e(65888).sorterAsc,v=e(73972);L.containerArrayMatch=e(14458);var h=L.isAddVal=function(t){return t==="add"||T(t)},s=L.isRemoveVal=function(t){return t===null||t==="remove"};L.applyContainerArrayChanges=function(t,a,n,r,l){var o=a.astr,u=v.getComponentMethod(o,"supplyLayoutDefaults"),p=v.getComponentMethod(o,"draw"),c=v.getComponentMethod(o,"drawOne"),b=r.replot||r.recalc||u===w||p===w,g=t.layout,d=t._fullLayout;if(n[""]){Object.keys(n).length>1&&i.warn("Full array edits are incompatible with other edits",o);var m=n[""][""];if(s(m))a.set(null);else{if(!Array.isArray(m))return i.warn("Unrecognized full array edit value",o,m),!0;a.set(m)}return!b&&(u(g,d),p(t),!0)}var x,y,k,f,S,M,E,O,P=Object.keys(n).map(Number).sort(_),I=a.get(),z=I||[],U=l(d,o).get(),R=[],j=-1,Z=z.length;for(x=0;x<P.length;x++)if(f=n[k=P[x]],S=Object.keys(f),M=f[""],E=h(M),k<0||k>z.length-(E?0:1))i.warn("index out of range",o,k);else if(M!==void 0)S.length>1&&i.warn("Insertion & removal are incompatible with edits to the same index.",o,k),s(M)?R.push(k):E?(M==="add"&&(M={}),z.splice(k,0,M),U&&U.splice(k,0,{})):i.warn("Unrecognized full object edit value",o,k,M),j===-1&&(j=k);else for(y=0;y<S.length;y++)O=o+"["+k+"].",l(z[k],S[y],O).set(f[S[y]]);for(x=R.length-1;x>=0;x--)z.splice(R[x],1),U&&U.splice(R[x],1);if(z.length?I||a.set(z):a.set(null),b)return!1;if(u(g,d),c!==w){var F;if(j===-1)F=P;else{for(Z=Math.max(z.length,Z),F=[],x=0;x<P.length&&!((k=P[x])>=j);x++)F.push(k);for(x=j;x<Z;x++)F.push(x)}for(x=0;x<F.length;x++)c(t,F[x])}else p(t);return!0}},72391:function(N,L,e){var T=e(39898),w=e(92770),i=e(57035),_=e(71828),v=_.nestedProperty,h=e(11086),s=e(10847),t=e(73972),a=e(86281),n=e(74875),r=e(89298),l=e(23608),o=e(13838),u=e(91424),p=e(7901),c=e(4305).initInteractions,b=e(77922),g=e(47322).clearOutline,d=e(72075).dfltConfig,m=e(6611),x=e(58377),y=e(61549),k=e(30962),f=e(85555).AX_NAME_PATTERN,S=0;function M(we){var Ee=we._fullLayout;Ee._redrawFromAutoMarginCount?Ee._redrawFromAutoMarginCount--:we.emit("plotly_afterplot")}function E(we,Ee){try{we._fullLayout._paper.style("background",Ee)}catch(Oe){_.error(Oe)}}function O(we,Ee){E(we,p.combine(Ee,"white"))}function P(we,Ee){if(!we._context){we._context=_.extendDeep({},d);var Oe=T.select("base");we._context._baseUrl=Oe.size()&&Oe.attr("href")?window.location.href.split("#")[0]:""}var Fe,pe,be,Me=we._context;if(Ee){for(pe=Object.keys(Ee),Fe=0;Fe<pe.length;Fe++)(be=pe[Fe])!=="editable"&&be!=="edits"&&be in Me&&(be==="setBackground"&&Ee[be]==="opaque"?Me[be]=O:Me[be]=Ee[be]);Ee.plot3dPixelRatio&&!Me.plotGlPixelRatio&&(Me.plotGlPixelRatio=Me.plot3dPixelRatio);var De=Ee.editable;if(De!==void 0)for(Me.editable=De,pe=Object.keys(Me.edits),Fe=0;Fe<pe.length;Fe++)Me.edits[pe[Fe]]=De;if(Ee.edits)for(pe=Object.keys(Ee.edits),Fe=0;Fe<pe.length;Fe++)(be=pe[Fe])in Me.edits&&(Me.edits[be]=Ee.edits[be]);Me._exportedPlot=Ee._exportedPlot}Me.staticPlot&&(Me.editable=!1,Me.edits={},Me.autosizable=!1,Me.scrollZoom=!1,Me.doubleClick=!1,Me.showTips=!1,Me.showLink=!1,Me.displayModeBar=!1),Me.displayModeBar!=="hover"||i||(Me.displayModeBar=!0),Me.setBackground!=="transparent"&&typeof Me.setBackground=="function"||(Me.setBackground=E),Me._hasZeroHeight=Me._hasZeroHeight||we.clientHeight===0,Me._hasZeroWidth=Me._hasZeroWidth||we.clientWidth===0;var Ne=Me.scrollZoom,Be=Me._scrollZoom={};if(Ne===!0)Be.cartesian=1,Be.gl3d=1,Be.geo=1,Be.mapbox=1;else if(typeof Ne=="string"){var Ye=Ne.split("+");for(Fe=0;Fe<Ye.length;Fe++)Be[Ye[Fe]]=1}else Ne!==!1&&(Be.gl3d=1,Be.geo=1,Be.mapbox=1)}function I(we,Ee){var Oe,Fe,pe=Ee+1,be=[];for(Oe=0;Oe<we.length;Oe++)(Fe=we[Oe])<0?be.push(pe+Fe):be.push(Fe);return be}function z(we,Ee,Oe){var Fe,pe;for(Fe=0;Fe<Ee.length;Fe++){if((pe=Ee[Fe])!==parseInt(pe,10))throw new Error("all values in "+Oe+" must be integers");if(pe>=we.data.length||pe<-we.data.length)throw new Error(Oe+" must be valid indices for gd.data.");if(Ee.indexOf(pe,Fe+1)>-1||pe>=0&&Ee.indexOf(-we.data.length+pe)>-1||pe<0&&Ee.indexOf(we.data.length+pe)>-1)throw new Error("each index in "+Oe+" must be unique.")}}function U(we,Ee,Oe){if(!Array.isArray(we.data))throw new Error("gd.data must be an array.");if(Ee===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(Ee)||(Ee=[Ee]),z(we,Ee,"currentIndices"),Oe===void 0||Array.isArray(Oe)||(Oe=[Oe]),Oe!==void 0&&z(we,Oe,"newIndices"),Oe!==void 0&&Ee.length!==Oe.length)throw new Error("current and new indices must be of equal length.")}function R(we,Ee,Oe,Fe,pe){(function(et,ft,ht,mt){var Mt=_.isPlainObject(mt);if(!Array.isArray(et.data))throw new Error("gd.data must be an array");if(!_.isPlainObject(ft))throw new Error("update must be a key:value object");if(ht===void 0)throw new Error("indices must be an integer or array of integers");for(var _t in z(et,ht,"indices"),ft){if(!Array.isArray(ft[_t])||ft[_t].length!==ht.length)throw new Error("attribute "+_t+" must be an array of length equal to indices array length");if(Mt&&(!(_t in mt)||!Array.isArray(mt[_t])||mt[_t].length!==ft[_t].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(we,Ee,Oe,Fe);for(var be=function(et,ft,ht,mt){var Mt,_t,it,st,St,zt=_.isPlainObject(mt),Ft=[];for(var Pt in Array.isArray(ht)||(ht=[ht]),ht=I(ht,et.data.length-1),ft)for(var Xe=0;Xe<ht.length;Xe++){if(Mt=et.data[ht[Xe]],_t=(it=v(Mt,Pt)).get(),st=ft[Pt][Xe],!_.isArrayOrTypedArray(st))throw new Error("attribute: "+Pt+" index: "+Xe+" must be an array");if(!_.isArrayOrTypedArray(_t))throw new Error("cannot extend missing or non-array attribute: "+Pt);if(_t.constructor!==st.constructor)throw new Error("cannot extend array with an array of a different type: "+Pt);St=zt?mt[Pt][Xe]:mt,w(St)||(St=-1),Ft.push({prop:it,target:_t,insert:st,maxp:Math.floor(St)})}return Ft}(we,Ee,Oe,Fe),Me={},De={},Ne=0;Ne<be.length;Ne++){var Be=be[Ne].prop,Ye=be[Ne].maxp,We=pe(be[Ne].target,be[Ne].insert,Ye);Be.set(We[0]),Array.isArray(Me[Be.astr])||(Me[Be.astr]=[]),Me[Be.astr].push(We[1]),Array.isArray(De[Be.astr])||(De[Be.astr]=[]),De[Be.astr].push(be[Ne].target.length)}return{update:Me,maxPoints:De}}function j(we,Ee){var Oe=new we.constructor(we.length+Ee.length);return Oe.set(we),Oe.set(Ee,we.length),Oe}function Z(we,Ee,Oe,Fe){we=_.getGraphDiv(we),x.clearPromiseQueue(we);var pe={};if(typeof Ee=="string")pe[Ee]=Oe;else{if(!_.isPlainObject(Ee))return _.warn("Restyle fail.",Ee,Oe,Fe),Promise.reject();pe=_.extendFlat({},Ee),Fe===void 0&&(Fe=Oe)}Object.keys(pe).length&&(we.changed=!0);var be=x.coerceTraceIndices(we,Fe),Me=te(we,pe,be),De=Me.flags;De.calc&&(we.calcdata=void 0),De.clearAxisTypes&&x.clearAxisTypes(we,be,{});var Ne=[];De.fullReplot?Ne.push(L._doPlot):(Ne.push(n.previousPromises),n.supplyDefaults(we),De.markerSize&&(n.doCalcdata(we),K(Ne)),De.style&&Ne.push(y.doTraceStyle),De.colorbars&&Ne.push(y.doColorBars),Ne.push(M)),Ne.push(n.rehover,n.redrag,n.reselect),s.add(we,Z,[we,Me.undoit,Me.traces],Z,[we,Me.redoit,Me.traces]);var Be=_.syncOrAsync(Ne,we);return Be&&Be.then||(Be=Promise.resolve()),Be.then(function(){return we.emit("plotly_restyle",Me.eventData),we})}function F(we){return we===void 0?null:we}function V(we,Ee){return Ee?function(Oe,Fe,pe){var be=v(Oe,Fe),Me=be.set;return be.set=function(De){H((pe||"")+Fe,be.get(),De,we),Me(De)},be}:v}function H(we,Ee,Oe,Fe){if(Array.isArray(Ee)||Array.isArray(Oe))for(var pe=Array.isArray(Ee)?Ee:[],be=Array.isArray(Oe)?Oe:[],Me=Math.max(pe.length,be.length),De=0;De<Me;De++)H(we+"["+De+"]",pe[De],be[De],Fe);else if(_.isPlainObject(Ee)||_.isPlainObject(Oe)){var Ne=_.isPlainObject(Ee)?Ee:{},Be=_.isPlainObject(Oe)?Oe:{},Ye=_.extendFlat({},Ne,Be);for(var We in Ye)H(we+"."+We,Ne[We],Be[We],Fe)}else Fe[we]===void 0&&(Fe[we]=F(Ee))}function te(we,Ee,Oe){var Fe,pe=we._fullLayout,be=we._fullData,Me=we.data,De=pe._guiEditing,Ne=V(pe._preGUI,De),Be=_.extendDeepAll({},Ee);$(Ee);var Ye,We=k.traceFlags(),et={},ft={};function ht(){return Oe.map(function(){})}function mt(Wt){var Vt=r.id2name(Wt);Ye.indexOf(Vt)===-1&&Ye.push(Vt)}function Mt(Wt){return"LAYOUT"+Wt+".autorange"}function _t(Wt){return"LAYOUT"+Wt+".range"}function it(Wt){for(var Vt=Wt;Vt<be.length;Vt++)if(be[Vt]._input===Me[Wt])return be[Vt]}function st(Wt,Vt,on){if(Array.isArray(Wt))Wt.forEach(function(fn){st(fn,Vt,on)});else if(!(Wt in Ee)&&!x.hasParent(Ee,Wt)){var Sn;if(Wt.substr(0,6)==="LAYOUT")Sn=Ne(we.layout,Wt.replace("LAYOUT",""));else{var Ln=Oe[on];Sn=V(pe._tracePreGUI[it(Ln)._fullInput.uid],De)(Me[Ln],Wt)}Wt in ft||(ft[Wt]=ht()),ft[Wt][on]===void 0&&(ft[Wt][on]=F(Sn.get())),Vt!==void 0&&Sn.set(Vt)}}function St(Wt){return function(Vt){return be[Vt][Wt]}}function zt(Wt){return function(Vt,on){return Vt===!1?be[Oe[on]][Wt]:null}}for(var Ft in Ee){if(x.hasParent(Ee,Ft))throw new Error("cannot set "+Ft+" and a parent attribute simultaneously");var Pt,Xe,Ke,He,Je,lt,ot=Ee[Ft];if(Ft!=="autobinx"&&Ft!=="autobiny"||(Ft=Ft.charAt(Ft.length-1)+"bins",ot=Array.isArray(ot)?ot.map(zt(Ft)):ot===!1?Oe.map(St(Ft)):null),et[Ft]=ot,Ft.substr(0,6)!=="LAYOUT"){for(ft[Ft]=ht(),Fe=0;Fe<Oe.length;Fe++)if(Pt=Me[Oe[Fe]],Xe=it(Oe[Fe]),He=(Ke=V(pe._tracePreGUI[Xe._fullInput.uid],De)(Pt,Ft)).get(),(Je=Array.isArray(ot)?ot[Fe%ot.length]:ot)!==void 0){var je=Ke.parts[Ke.parts.length-1],Ue=Ft.substr(0,Ft.length-je.length-1),at=Ue?Ue+".":"",$e=Ue?v(Xe,Ue).get():Xe;if((lt=a.getTraceValObject(Xe,Ke.parts))&&lt.impliedEdits&&Je!==null)for(var gt in lt.impliedEdits)st(_.relativeAttr(Ft,gt),lt.impliedEdits[gt],Fe);else if(je!=="thicknessmode"&&je!=="lenmode"||He===Je||Je!=="fraction"&&Je!=="pixels"||!$e){if(Ft==="type"&&(Je==="pie"!=(He==="pie")||Je==="funnelarea"!=(He==="funnelarea"))){var yt="x",xt="y";Je!=="bar"&&He!=="bar"||Pt.orientation!=="h"||(yt="y",xt="x"),_.swapAttrs(Pt,["?","?src"],"labels",yt),_.swapAttrs(Pt,["d?","?0"],"label",yt),_.swapAttrs(Pt,["?","?src"],"values",xt),He==="pie"||He==="funnelarea"?(v(Pt,"marker.color").set(v(Pt,"marker.colors").get()),pe._pielayer.selectAll("g.trace").remove()):t.traceIs(Pt,"cartesian")&&v(Pt,"marker.colors").set(v(Pt,"marker.color").get())}}else{var dt=pe._size,Lt=$e.orient,Tt=Lt==="top"||Lt==="bottom";if(je==="thicknessmode"){var bt=Tt?dt.h:dt.w;st(at+"thickness",$e.thickness*(Je==="fraction"?1/bt:bt),Fe)}else{var Ct=Tt?dt.w:dt.h;st(at+"len",$e.len*(Je==="fraction"?1/Ct:Ct),Fe)}}if(ft[Ft][Fe]=F(He),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ft)!==-1){if(Ft==="orientation"){Ke.set(Je);var Dt=Pt.x&&!Pt.y?"h":"v";if((Ke.get()||Dt)===Xe.orientation)continue}else Ft==="orientationaxes"&&(Pt.orientation={v:"h",h:"v"}[Xe.orientation]);x.swapXYData(Pt),We.calc=We.clearAxisTypes=!0}else n.dataArrayContainers.indexOf(Ke.parts[0])!==-1?(x.manageArrayContainers(Ke,Je,ft),We.calc=!0):(lt?lt.arrayOk&&!t.traceIs(Xe,"regl")&&(_.isArrayOrTypedArray(Je)||_.isArrayOrTypedArray(He))?We.calc=!0:k.update(We,lt):We.calc=!0,Ke.set(Je))}if(["swapxyaxes","orientationaxes"].indexOf(Ft)!==-1&&r.swap(we,Oe),Ft==="orientationaxes"){var Bt=v(we.layout,"hovermode"),Xt=Bt.get();Xt==="x"?Bt.set("y"):Xt==="y"?Bt.set("x"):Xt==="x unified"?Bt.set("y unified"):Xt==="y unified"&&Bt.set("x unified")}if(["orientation","type"].indexOf(Ft)!==-1){for(Ye=[],Fe=0;Fe<Oe.length;Fe++){var an=Me[Oe[Fe]];t.traceIs(an,"cartesian")&&(mt(an.xaxis||"x"),mt(an.yaxis||"y"))}st(Ye.map(Mt),!0,0),st(Ye.map(_t),[0,1],0)}}else Ke=Ne(we.layout,Ft.replace("LAYOUT","")),ft[Ft]=[F(Ke.get())],Ke.set(Array.isArray(ot)?ot[0]:ot),We.calc=!0}return(We.calc||We.plot)&&(We.fullReplot=!0),{flags:We,undoit:ft,redoit:et,traces:Oe,eventData:_.extendDeepNoArrays([],[Be,Oe])}}function $(we){var Ee,Oe,Fe,pe=_.counterRegex("axis",".title",!1,!1),be=/colorbar\.title$/,Me=Object.keys(we);for(Ee=0;Ee<Me.length;Ee++)Oe=Me[Ee],Fe=we[Oe],Oe!=="title"&&!pe.test(Oe)&&!be.test(Oe)||typeof Fe!="string"&&typeof Fe!="number"?Oe.indexOf("titlefont")>-1&&Oe.indexOf("grouptitlefont")===-1?De(Oe,Oe.replace("titlefont","title.font")):Oe.indexOf("titleposition")>-1?De(Oe,Oe.replace("titleposition","title.position")):Oe.indexOf("titleside")>-1?De(Oe,Oe.replace("titleside","title.side")):Oe.indexOf("titleoffset")>-1&&De(Oe,Oe.replace("titleoffset","title.offset")):De(Oe,Oe.replace("title","title.text"));function De(Ne,Be){we[Be]=we[Ne],delete we[Ne]}}function J(we,Ee,Oe){we=_.getGraphDiv(we),x.clearPromiseQueue(we);var Fe={};if(typeof Ee=="string")Fe[Ee]=Oe;else{if(!_.isPlainObject(Ee))return _.warn("Relayout fail.",Ee,Oe),Promise.reject();Fe=_.extendFlat({},Ee)}Object.keys(Fe).length&&(we.changed=!0);var pe=oe(we,Fe),be=pe.flags;be.calc&&(we.calcdata=void 0);var Me=[n.previousPromises];be.layoutReplot?Me.push(y.layoutReplot):Object.keys(Fe).length&&(X(we,be,pe)||n.supplyDefaults(we),be.legend&&Me.push(y.doLegend),be.layoutstyle&&Me.push(y.layoutStyles),be.axrange&&K(Me,pe.rangesAltered),be.ticks&&Me.push(y.doTicksRelayout),be.modebar&&Me.push(y.doModeBar),be.camera&&Me.push(y.doCamera),be.colorbars&&Me.push(y.doColorBars),Me.push(M)),Me.push(n.rehover,n.redrag,n.reselect),s.add(we,J,[we,pe.undoit],J,[we,pe.redoit]);var De=_.syncOrAsync(Me,we);return De&&De.then||(De=Promise.resolve(we)),De.then(function(){return we.emit("plotly_relayout",pe.eventData),we})}function X(we,Ee,Oe){var Fe,pe,be=we._fullLayout;if(!Ee.axrange)return!1;for(var Me in Ee)if(Me!=="axrange"&&Ee[Me])return!1;var De=function(ft,ht){return _.coerce(Fe,pe,o,ft,ht)},Ne={};for(var Be in Oe.rangesAltered){var Ye=r.id2name(Be);if(Fe=we.layout[Ye],pe=be[Ye],l(Fe,pe,De,Ne),pe._matchGroup){for(var We in pe._matchGroup)if(We!==Be){var et=be[r.id2name(We)];et.autorange=pe.autorange,et.range=pe.range.slice(),et._input.range=pe.range.slice()}}}return!0}function K(we,Ee){var Oe=Ee?function(Fe){var pe=[];for(var be in Ee){var Me=r.getFromId(Fe,be);if(pe.push(be),(Me.ticklabelposition||"").indexOf("inside")!==-1&&Me._anchorAxis&&pe.push(Me._anchorAxis._id),Me._matchGroup)for(var De in Me._matchGroup)Ee[De]||pe.push(De)}return r.draw(Fe,pe,{skipTitle:!0})}:function(Fe){return r.draw(Fe,"redraw")};we.push(g,y.doAutoRangeAndConstraints,Oe,y.drawData,y.finalDraw)}var ee=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ie=/^[xyz]axis[0-9]*\.autorange$/,ae=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function oe(we,Ee){var Oe,Fe,pe,be=we.layout,Me=we._fullLayout,De=Me._guiEditing,Ne=V(Me._preGUI,De),Be=Object.keys(Ee),Ye=r.list(we),We=_.extendDeepAll({},Ee),et={};for($(Ee),Be=Object.keys(Ee),Fe=0;Fe<Be.length;Fe++)if(Be[Fe].indexOf("allaxes")===0){for(pe=0;pe<Ye.length;pe++){var ft=Ye[pe]._id.substr(1),ht=ft.indexOf("scene")!==-1?ft+".":"",mt=Be[Fe].replace("allaxes",ht+Ye[pe]._name);Ee[mt]||(Ee[mt]=Ee[Be[Fe]])}delete Ee[Be[Fe]]}var Mt=k.layoutFlags(),_t={},it={};function st(fn,Zt){if(Array.isArray(fn))fn.forEach(function(nn){st(nn,Zt)});else if(!(fn in Ee)&&!x.hasParent(Ee,fn)){var ln=Ne(be,fn);fn in it||(it[fn]=F(ln.get())),Zt!==void 0&&ln.set(Zt)}}var St,zt={};function Ft(fn){var Zt=r.name2id(fn.split(".")[0]);return zt[Zt]=1,Zt}for(var Pt in Ee){if(x.hasParent(Ee,Pt))throw new Error("cannot set "+Pt+" and a parent attribute simultaneously");for(var Xe=Ne(be,Pt),Ke=Ee[Pt],He=Xe.parts.length-1;He>0&&typeof Xe.parts[He]!="string";)He--;var Je=Xe.parts[He],lt=Xe.parts[He-1]+"."+Je,ot=Xe.parts.slice(0,He).join("."),je=v(we.layout,ot).get(),Ue=v(Me,ot).get(),at=Xe.get();if(Ke!==void 0){_t[Pt]=Ke,it[Pt]=Je==="reverse"?Ke:F(at);var $e=a.getLayoutValObject(Me,Xe.parts);if($e&&$e.impliedEdits&&Ke!==null)for(var gt in $e.impliedEdits)st(_.relativeAttr(Pt,gt),$e.impliedEdits[gt]);if(["width","height"].indexOf(Pt)!==-1)if(Ke){st("autosize",null);var yt=Pt==="height"?"width":"height";st(yt,Me[yt])}else Me[Pt]=we._initialAutoSize[Pt];else if(Pt==="autosize")st("width",Ke?null:Me.width),st("height",Ke?null:Me.height);else if(lt.match(ee))Ft(lt),v(Me,ot+"._inputRange").set(null);else if(lt.match(ie)){Ft(lt),v(Me,ot+"._inputRange").set(null);var xt=v(Me,ot).get();xt._inputDomain&&(xt._input.domain=xt._inputDomain.slice())}else lt.match(ae)&&v(Me,ot+"._inputDomain").set(null);if(Je==="type"){St=je;var dt=Ue.type==="linear"&&Ke==="log",Lt=Ue.type==="log"&&Ke==="linear";if(dt||Lt){if(St&&St.range)if(Ue.autorange)dt&&(St.range=St.range[1]>St.range[0]?[1,2]:[2,1]);else{var Tt=St.range[0],bt=St.range[1];dt?(Tt<=0&&bt<=0&&st(ot+".autorange",!0),Tt<=0?Tt=bt/1e6:bt<=0&&(bt=Tt/1e6),st(ot+".range[0]",Math.log(Tt)/Math.LN10),st(ot+".range[1]",Math.log(bt)/Math.LN10)):(st(ot+".range[0]",Math.pow(10,Tt)),st(ot+".range[1]",Math.pow(10,bt)))}else st(ot+".autorange",!0);Array.isArray(Me._subplots.polar)&&Me._subplots.polar.length&&Me[Xe.parts[0]]&&Xe.parts[1]==="radialaxis"&&delete Me[Xe.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(we,Ue,Ke,st),t.getComponentMethod("images","convertCoords")(we,Ue,Ke,st)}else st(ot+".autorange",!0),st(ot+".range",null);v(Me,ot+"._inputRange").set(null)}else if(Je.match(f)){var Ct=v(Me,Pt).get(),Dt=(Ke||{}).type;Dt&&Dt!=="-"||(Dt="linear"),t.getComponentMethod("annotations","convertCoords")(we,Ct,Dt,st),t.getComponentMethod("images","convertCoords")(we,Ct,Dt,st)}var Bt=m.containerArrayMatch(Pt);if(Bt){Oe=Bt.array,Fe=Bt.index;var Xt=Bt.property,an=$e||{editType:"calc"};Fe!==""&&Xt===""&&(m.isAddVal(Ke)?it[Pt]=null:m.isRemoveVal(Ke)?it[Pt]=(v(be,Oe).get()||[])[Fe]:_.warn("unrecognized full object value",Ee)),k.update(Mt,an),et[Oe]||(et[Oe]={});var Wt=et[Oe][Fe];Wt||(Wt=et[Oe][Fe]={}),Wt[Xt]=Ke,delete Ee[Pt]}else Je==="reverse"?(je.range?je.range.reverse():(st(ot+".autorange",!0),je.range=[1,0]),Ue.autorange?Mt.calc=!0:Mt.plot=!0):(Pt==="dragmode"&&(Ke===!1&&at!==!1||Ke!==!1&&at===!1)||Me._has("scatter-like")&&Me._has("regl")&&Pt==="dragmode"&&(Ke==="lasso"||Ke==="select")&&at!=="lasso"&&at!=="select"||Me._has("gl2d")?Mt.plot=!0:$e?k.update(Mt,$e):Mt.calc=!0,Xe.set(Ke))}}for(Oe in et)m.applyContainerArrayChanges(we,Ne(be,Oe),et[Oe],Mt,Ne)||(Mt.plot=!0);for(var Vt in zt){var on=(St=r.getFromId(we,Vt))&&St._constraintGroup;if(on)for(var Sn in Mt.calc=!0,on)zt[Sn]||(r.getFromId(we,Sn)._constraintShrinkable=!0)}(fe(we)||Ee.height||Ee.width)&&(Mt.plot=!0);var Ln=Me.shapes;for(Fe=0;Fe<Ln.length;Fe++)if(Ln[Fe].showlegend){Mt.calc=!0;break}return(Mt.plot||Mt.calc)&&(Mt.layoutReplot=!0),{flags:Mt,rangesAltered:zt,undoit:it,redoit:_t,eventData:We}}function fe(we){var Ee=we._fullLayout,Oe=Ee.width,Fe=Ee.height;return we.layout.autosize&&n.plotAutoSize(we,we.layout,Ee),Ee.width!==Oe||Ee.height!==Fe}function ge(we,Ee,Oe,Fe){we=_.getGraphDiv(we),x.clearPromiseQueue(we),_.isPlainObject(Ee)||(Ee={}),_.isPlainObject(Oe)||(Oe={}),Object.keys(Ee).length&&(we.changed=!0),Object.keys(Oe).length&&(we.changed=!0);var pe=x.coerceTraceIndices(we,Fe),be=te(we,_.extendFlat({},Ee),pe),Me=be.flags,De=oe(we,_.extendFlat({},Oe)),Ne=De.flags;(Me.calc||Ne.calc)&&(we.calcdata=void 0),Me.clearAxisTypes&&x.clearAxisTypes(we,pe,Oe);var Be=[];Ne.layoutReplot?Be.push(y.layoutReplot):Me.fullReplot?Be.push(L._doPlot):(Be.push(n.previousPromises),X(we,Ne,De)||n.supplyDefaults(we),Me.style&&Be.push(y.doTraceStyle),(Me.colorbars||Ne.colorbars)&&Be.push(y.doColorBars),Ne.legend&&Be.push(y.doLegend),Ne.layoutstyle&&Be.push(y.layoutStyles),Ne.axrange&&K(Be,De.rangesAltered),Ne.ticks&&Be.push(y.doTicksRelayout),Ne.modebar&&Be.push(y.doModeBar),Ne.camera&&Be.push(y.doCamera),Be.push(M)),Be.push(n.rehover,n.redrag,n.reselect),s.add(we,ge,[we,be.undoit,De.undoit,be.traces],ge,[we,be.redoit,De.redoit,be.traces]);var Ye=_.syncOrAsync(Be,we);return Ye&&Ye.then||(Ye=Promise.resolve(we)),Ye.then(function(){return we.emit("plotly_update",{data:be.eventData,layout:De.eventData}),we})}function ve(we){return function(Ee){Ee._fullLayout._guiEditing=!0;var Oe=we.apply(null,arguments);return Ee._fullLayout._guiEditing=!1,Oe}}var xe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],_e=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ye(we,Ee){for(var Oe=0;Oe<Ee.length;Oe++){var Fe=Ee[Oe],pe=we.match(Fe.pattern);if(pe){var be=pe[1]||"";return{head:be,tail:we.substr(be.length+1),attr:Fe.attr}}}}function Ce(we,Ee){var Oe=v(Ee,we).get();if(Oe!==void 0)return Oe;var Fe=we.split(".");for(Fe.pop();Fe.length>1;)if(Fe.pop(),(Oe=v(Ee,Fe.join(".")+".uirevision").get())!==void 0)return Oe;return Ee.uirevision}function ke(we,Ee){for(var Oe=0;Oe<Ee.length;Oe++)if(Ee[Oe]._fullInput.uid===we)return Oe;return-1}function Te(we,Ee,Oe){for(var Fe=0;Fe<Ee.length;Fe++)if(Ee[Fe].uid===we)return Fe;return!Ee[Oe]||Ee[Oe].uid?-1:Oe}function le(we,Ee){var Oe=_.isPlainObject(we),Fe=Array.isArray(we);return Oe||Fe?(Oe&&_.isPlainObject(Ee)||Fe&&Array.isArray(Ee))&&JSON.stringify(we)===JSON.stringify(Ee):we===Ee}function ue(we,Ee,Oe,Fe){var pe,be,Me,De=Fe.getValObject,Ne=Fe.flags,Be=Fe.immutable,Ye=Fe.inArray,We=Fe.arrayIndex;function et(){var je=pe.editType;Ye&&je.indexOf("arraydraw")!==-1?_.pushUnique(Ne.arrays[Ye],We):(k.update(Ne,pe),je!=="none"&&Ne.nChanges++,Fe.transition&&pe.anim&&Ne.nChangesAnim++,(ee.test(Me)||ie.test(Me))&&(Ne.rangesAltered[Oe[0]]=1),ae.test(Me)&&v(Ee,"_inputDomain").set(null),be==="datarevision"&&(Ne.newDataRevision=1))}function ft(je){return je.valType==="data_array"||je.arrayOk}for(be in we){if(Ne.calc&&!Fe.transition)return;var ht=we[be],mt=Ee[be],Mt=Oe.concat(be);if(Me=Mt.join("."),be.charAt(0)!=="_"&&typeof ht!="function"&&ht!==mt){if((be==="tick0"||be==="dtick")&&Oe[0]!=="geo"){var _t=Ee.tickmode;if(_t==="auto"||_t==="array"||!_t)continue}if((be!=="range"||!Ee.autorange)&&(be!=="zmin"&&be!=="zmax"||Ee.type!=="contourcarpet")&&(pe=De(Mt))&&(!pe._compareAsJSON||JSON.stringify(ht)!==JSON.stringify(mt))){var it,st=pe.valType,St=ft(pe),zt=Array.isArray(ht),Ft=Array.isArray(mt);if(zt&&Ft){var Pt="_input_"+be,Xe=we[Pt],Ke=Ee[Pt];if(Array.isArray(Xe)&&Xe===Ke)continue}if(mt===void 0)St&&zt?Ne.calc=!0:et();else if(pe._isLinkedToArray){var He=[],Je=!1;Ye||(Ne.arrays[be]=He);var lt=Math.min(ht.length,mt.length),ot=Math.max(ht.length,mt.length);if(lt!==ot){if(pe.editType!=="arraydraw"){et();continue}Je=!0}for(it=0;it<lt;it++)ue(ht[it],mt[it],Mt.concat(it),_.extendFlat({inArray:be,arrayIndex:it},Fe));if(Je)for(it=lt;it<ot;it++)He.push(it)}else!st&&_.isPlainObject(ht)?ue(ht,mt,Mt,Fe):St?zt&&Ft?(Be&&(Ne.calc=!0),(Be||Fe.newDataRevision)&&et()):zt!==Ft?Ne.calc=!0:et():zt&&Ft&&ht.length===mt.length&&String(ht)===String(mt)||et()}}}for(be in Ee)if(!(be in we)&&be.charAt(0)!=="_"&&typeof Ee[be]!="function"){if(ft(pe=De(Oe.concat(be)))&&Array.isArray(Ee[be]))return void(Ne.calc=!0);et()}}function de(we,Ee){var Oe;for(Oe in we)if(Oe.charAt(0)!=="_"){var Fe=we[Oe],pe=Ee[Oe];if(Fe!==pe)if(_.isPlainObject(Fe)&&_.isPlainObject(pe)){if(de(Fe,pe))return!0}else{if(!Array.isArray(Fe)||!Array.isArray(pe)||Fe.length!==pe.length)return!0;for(var be=0;be<Fe.length;be++)if(Fe[be]!==pe[be]&&(!_.isPlainObject(Fe[be])||!_.isPlainObject(pe[be])||de(Fe[be],pe[be])))return!0}}}function Le(we){var Ee=we._fullLayout,Oe=we.getBoundingClientRect();if(!_.equalDomRects(Oe,Ee._lastBBox)){var Fe=Ee._invTransform=_.inverseTransformMatrix(_.getFullTransformMatrix(we));Ee._invScaleX=Math.sqrt(Fe[0][0]*Fe[0][0]+Fe[0][1]*Fe[0][1]+Fe[0][2]*Fe[0][2]),Ee._invScaleY=Math.sqrt(Fe[1][0]*Fe[1][0]+Fe[1][1]*Fe[1][1]+Fe[1][2]*Fe[1][2]),Ee._lastBBox=Oe}}L.animate=function(we,Ee,Oe){if(we=_.getGraphDiv(we),!_.isPlotDiv(we))throw new Error("This element is not a Plotly plot: "+we+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Fe=we._transitionData;Fe._frameQueue||(Fe._frameQueue=[]);var pe=(Oe=n.supplyAnimationDefaults(Oe)).transition,be=Oe.frame;function Me(Be){return Array.isArray(pe)?Be>=pe.length?pe[0]:pe[Be]:pe}function De(Be){return Array.isArray(be)?Be>=be.length?be[0]:be[Be]:be}function Ne(Be,Ye){var We=0;return function(){if(Be&&++We===Ye)return Be()}}return Fe._frameWaitingCnt===void 0&&(Fe._frameWaitingCnt=0),new Promise(function(Be,Ye){function We(){we.emit("plotly_animating"),Fe._lastFrameAt=-1/0,Fe._timeToNext=0,Fe._runningTransitions=0,Fe._currentFrame=null;var Pt=function(){Fe._animationRaf=window.requestAnimationFrame(Pt),Date.now()-Fe._lastFrameAt>Fe._timeToNext&&function(){Fe._currentFrame&&Fe._currentFrame.onComplete&&Fe._currentFrame.onComplete();var Xe=Fe._currentFrame=Fe._frameQueue.shift();if(Xe){var Ke=Xe.name?Xe.name.toString():null;we._fullLayout._currentFrame=Ke,Fe._lastFrameAt=Date.now(),Fe._timeToNext=Xe.frameOpts.duration,n.transition(we,Xe.frame.data,Xe.frame.layout,x.coerceTraceIndices(we,Xe.frame.traces),Xe.frameOpts,Xe.transitionOpts).then(function(){Xe.onComplete&&Xe.onComplete()}),we.emit("plotly_animatingframe",{name:Ke,frame:Xe.frame,animation:{frame:Xe.frameOpts,transition:Xe.transitionOpts}})}else we.emit("plotly_animated"),window.cancelAnimationFrame(Fe._animationRaf),Fe._animationRaf=null}()};Pt()}var et,ft,ht=0;function mt(Pt){return Array.isArray(pe)?ht>=pe.length?Pt.transitionOpts=pe[ht]:Pt.transitionOpts=pe[0]:Pt.transitionOpts=pe,ht++,Pt}var Mt=[],_t=Ee==null,it=Array.isArray(Ee);if(_t||it||!_.isPlainObject(Ee)){if(_t||["string","number"].indexOf(typeof Ee)!==-1)for(et=0;et<Fe._frames.length;et++)(ft=Fe._frames[et])&&(_t||String(ft.group)===String(Ee))&&Mt.push({type:"byname",name:String(ft.name),data:mt({name:ft.name})});else if(it)for(et=0;et<Ee.length;et++){var st=Ee[et];["number","string"].indexOf(typeof st)!==-1?(st=String(st),Mt.push({type:"byname",name:st,data:mt({name:st})})):_.isPlainObject(st)&&Mt.push({type:"object",data:mt(_.extendFlat({},st))})}}else Mt.push({type:"object",data:mt(_.extendFlat({},Ee))});for(et=0;et<Mt.length;et++)if((ft=Mt[et]).type==="byname"&&!Fe._frameHash[ft.data.name])return _.warn('animate failure: frame not found: "'+ft.data.name+'"'),void Ye();["next","immediate"].indexOf(Oe.mode)!==-1&&function(){if(Fe._frameQueue.length!==0){for(;Fe._frameQueue.length;){var Pt=Fe._frameQueue.pop();Pt.onInterrupt&&Pt.onInterrupt()}we.emit("plotly_animationinterrupted",[])}}(),Oe.direction==="reverse"&&Mt.reverse();var St=we._fullLayout._currentFrame;if(St&&Oe.fromcurrent){var zt=-1;for(et=0;et<Mt.length;et++)if((ft=Mt[et]).type==="byname"&&ft.name===St){zt=et;break}if(zt>0&&zt<Mt.length-1){var Ft=[];for(et=0;et<Mt.length;et++)ft=Mt[et],(Mt[et].type!=="byname"||et>zt)&&Ft.push(ft);Mt=Ft}}Mt.length>0?function(Pt){if(Pt.length!==0){for(var Xe=0;Xe<Pt.length;Xe++){var Ke;Ke=Pt[Xe].type==="byname"?n.computeFrame(we,Pt[Xe].name):Pt[Xe].data;var He=De(Xe),Je=Me(Xe);Je.duration=Math.min(Je.duration,He.duration);var lt={frame:Ke,name:Pt[Xe].name,frameOpts:He,transitionOpts:Je};Xe===Pt.length-1&&(lt.onComplete=Ne(Be,2),lt.onInterrupt=Ye),Fe._frameQueue.push(lt)}Oe.mode==="immediate"&&(Fe._lastFrameAt=-1/0),Fe._animationRaf||We()}}(Mt):(we.emit("plotly_animated"),Be())})},L.addFrames=function(we,Ee,Oe){if(we=_.getGraphDiv(we),Ee==null)return Promise.resolve();if(!_.isPlotDiv(we))throw new Error("This element is not a Plotly plot: "+we+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Fe,pe,be,Me,De=we._transitionData._frames,Ne=we._transitionData._frameHash;if(!Array.isArray(Ee))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ee);var Be=De.length+2*Ee.length,Ye=[],We={};for(Fe=Ee.length-1;Fe>=0;Fe--)if(_.isPlainObject(Ee[Fe])){var et=Ee[Fe].name,ft=(Ne[et]||We[et]||{}).name,ht=Ee[Fe].name,mt=Ne[ft]||We[ft];ft&&ht&&typeof ht=="number"&&mt&&S<5&&(S++,_.warn('addFrames: overwriting frame "'+(Ne[ft]||We[ft]).name+'" with a frame whose name of type "number" also equates to "'+ft+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&_.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),We[et]={name:et},Ye.push({frame:n.supplyFrameDefaults(Ee[Fe]),index:Oe&&Oe[Fe]!==void 0&&Oe[Fe]!==null?Oe[Fe]:Be+Fe})}Ye.sort(function(Pt,Xe){return Pt.index>Xe.index?-1:Pt.index<Xe.index?1:0});var Mt=[],_t=[],it=De.length;for(Fe=Ye.length-1;Fe>=0;Fe--){if(typeof(pe=Ye[Fe].frame).name=="number"&&_.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!pe.name)for(;Ne[pe.name="frame "+we._transitionData._counter++];);if(Ne[pe.name]){for(be=0;be<De.length&&(De[be]||{}).name!==pe.name;be++);Mt.push({type:"replace",index:be,value:pe}),_t.unshift({type:"replace",index:be,value:De[be]})}else Me=Math.max(0,Math.min(Ye[Fe].index,it)),Mt.push({type:"insert",index:Me,value:pe}),_t.unshift({type:"delete",index:Me}),it++}var st=n.modifyFrames,St=n.modifyFrames,zt=[we,_t],Ft=[we,Mt];return s&&s.add(we,st,zt,St,Ft),n.modifyFrames(we,Mt)},L.deleteFrames=function(we,Ee){if(we=_.getGraphDiv(we),!_.isPlotDiv(we))throw new Error("This element is not a Plotly plot: "+we);var Oe,Fe,pe=we._transitionData._frames,be=[],Me=[];if(!Ee)for(Ee=[],Oe=0;Oe<pe.length;Oe++)Ee.push(Oe);for((Ee=Ee.slice()).sort(),Oe=Ee.length-1;Oe>=0;Oe--)Fe=Ee[Oe],be.push({type:"delete",index:Fe}),Me.unshift({type:"insert",index:Fe,value:pe[Fe]});var De=n.modifyFrames,Ne=n.modifyFrames,Be=[we,Me],Ye=[we,be];return s&&s.add(we,De,Be,Ne,Ye),n.modifyFrames(we,be)},L.addTraces=function we(Ee,Oe,Fe){Ee=_.getGraphDiv(Ee);var pe,be,Me=[],De=L.deleteTraces,Ne=we,Be=[Ee,Me],Ye=[Ee,Oe];for(function(We,et,ft){var ht,mt;if(!Array.isArray(We.data))throw new Error("gd.data must be an array.");if(et===void 0)throw new Error("traces must be defined.");for(Array.isArray(et)||(et=[et]),ht=0;ht<et.length;ht++)if(typeof(mt=et[ht])!="object"||Array.isArray(mt)||mt===null)throw new Error("all values in traces array must be non-array objects");if(ft===void 0||Array.isArray(ft)||(ft=[ft]),ft!==void 0&&ft.length!==et.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Ee,Oe,Fe),Array.isArray(Oe)||(Oe=[Oe]),Oe=Oe.map(function(We){return _.extendFlat({},We)}),x.cleanData(Oe),pe=0;pe<Oe.length;pe++)Ee.data.push(Oe[pe]);for(pe=0;pe<Oe.length;pe++)Me.push(-Oe.length+pe);if(Fe===void 0)return be=L.redraw(Ee),s.add(Ee,De,Be,Ne,Ye),be;Array.isArray(Fe)||(Fe=[Fe]);try{U(Ee,Me,Fe)}catch(We){throw Ee.data.splice(Ee.data.length-Oe.length,Oe.length),We}return s.startSequence(Ee),s.add(Ee,De,Be,Ne,Ye),be=L.moveTraces(Ee,Me,Fe),s.stopSequence(Ee),be},L.deleteTraces=function we(Ee,Oe){Ee=_.getGraphDiv(Ee);var Fe,pe,be=[],Me=L.addTraces,De=we,Ne=[Ee,be,Oe],Be=[Ee,Oe];if(Oe===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Oe)||(Oe=[Oe]),z(Ee,Oe,"indices"),(Oe=I(Oe,Ee.data.length-1)).sort(_.sorterDes),Fe=0;Fe<Oe.length;Fe+=1)pe=Ee.data.splice(Oe[Fe],1)[0],be.push(pe);var Ye=L.redraw(Ee);return s.add(Ee,Me,Ne,De,Be),Ye},L.extendTraces=function we(Ee,Oe,Fe,pe){var be=R(Ee=_.getGraphDiv(Ee),Oe,Fe,pe,function(Ne,Be,Ye){var We,et;if(_.isTypedArray(Ne))if(Ye<0){var ft=new Ne.constructor(0),ht=j(Ne,Be);Ye<0?(We=ht,et=ft):(We=ft,et=ht)}else if(We=new Ne.constructor(Ye),et=new Ne.constructor(Ne.length+Be.length-Ye),Ye===Be.length)We.set(Be),et.set(Ne);else if(Ye<Be.length){var mt=Be.length-Ye;We.set(Be.subarray(mt)),et.set(Ne),et.set(Be.subarray(0,mt),Ne.length)}else{var Mt=Ye-Be.length,_t=Ne.length-Mt;We.set(Ne.subarray(_t)),We.set(Be,Mt),et.set(Ne.subarray(0,_t))}else We=Ne.concat(Be),et=Ye>=0&&Ye<We.length?We.splice(0,We.length-Ye):[];return[We,et]}),Me=L.redraw(Ee),De=[Ee,be.update,Fe,be.maxPoints];return s.add(Ee,L.prependTraces,De,we,arguments),Me},L.moveTraces=function we(Ee,Oe,Fe){var pe,be=[],Me=[],De=we,Ne=we,Be=[Ee=_.getGraphDiv(Ee),Fe,Oe],Ye=[Ee,Oe,Fe];if(U(Ee,Oe,Fe),Oe=Array.isArray(Oe)?Oe:[Oe],Fe===void 0)for(Fe=[],pe=0;pe<Oe.length;pe++)Fe.push(-Oe.length+pe);for(Fe=Array.isArray(Fe)?Fe:[Fe],Oe=I(Oe,Ee.data.length-1),Fe=I(Fe,Ee.data.length-1),pe=0;pe<Ee.data.length;pe++)Oe.indexOf(pe)===-1&&be.push(Ee.data[pe]);for(pe=0;pe<Oe.length;pe++)Me.push({newIndex:Fe[pe],trace:Ee.data[Oe[pe]]});for(Me.sort(function(et,ft){return et.newIndex-ft.newIndex}),pe=0;pe<Me.length;pe+=1)be.splice(Me[pe].newIndex,0,Me[pe].trace);Ee.data=be;var We=L.redraw(Ee);return s.add(Ee,De,Be,Ne,Ye),We},L.prependTraces=function we(Ee,Oe,Fe,pe){var be=R(Ee=_.getGraphDiv(Ee),Oe,Fe,pe,function(Ne,Be,Ye){var We,et;if(_.isTypedArray(Ne))if(Ye<=0){var ft=new Ne.constructor(0),ht=j(Be,Ne);Ye<0?(We=ht,et=ft):(We=ft,et=ht)}else if(We=new Ne.constructor(Ye),et=new Ne.constructor(Ne.length+Be.length-Ye),Ye===Be.length)We.set(Be),et.set(Ne);else if(Ye<Be.length){var mt=Be.length-Ye;We.set(Be.subarray(0,mt)),et.set(Be.subarray(mt)),et.set(Ne,mt)}else{var Mt=Ye-Be.length;We.set(Be),We.set(Ne.subarray(0,Mt),Be.length),et.set(Ne.subarray(Mt))}else We=Be.concat(Ne),et=Ye>=0&&Ye<We.length?We.splice(Ye,We.length):[];return[We,et]}),Me=L.redraw(Ee),De=[Ee,be.update,Fe,be.maxPoints];return s.add(Ee,L.extendTraces,De,we,arguments),Me},L.newPlot=function(we,Ee,Oe,Fe){return we=_.getGraphDiv(we),n.cleanPlot([],{},we._fullData||[],we._fullLayout||{}),n.purge(we),L._doPlot(we,Ee,Oe,Fe)},L._doPlot=function(we,Ee,Oe,Fe){var pe;if(we=_.getGraphDiv(we),h.init(we),_.isPlainObject(Ee)){var be=Ee;Ee=be.data,Oe=be.layout,Fe=be.config,pe=be.frames}if(h.triggerHandler(we,"plotly_beforeplot",[Ee,Oe,Fe])===!1)return Promise.reject();Ee||Oe||_.isPlotDiv(we)||_.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",we),P(we,Fe),Oe||(Oe={}),T.select(we).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(we._promises)||(we._promises=[]);var Me=(we.data||[]).length===0&&Array.isArray(Ee);Array.isArray(Ee)&&(x.cleanData(Ee),Me?we.data=Ee:we.data.push.apply(we.data,Ee),we.empty=!1),we.layout&&!Me||(we.layout=x.cleanLayout(Oe)),n.supplyDefaults(we);var De=we._fullLayout,Ne=De._has("cartesian");De._replotting=!0,(Me||De._shouldCreateBgLayer)&&(function(_t){var it=T.select(_t),st=_t._fullLayout;if(st._calcInverseTransform=Le,st._calcInverseTransform(_t),st._container=it.selectAll(".plot-container").data([0]),st._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),st._paperdiv=st._container.selectAll(".svg-container").data([0]),st._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),st._glcontainer=st._paperdiv.selectAll(".gl-container").data([{}]),st._glcontainer.enter().append("div").classed("gl-container",!0),st._paperdiv.selectAll(".main-svg").remove(),st._paperdiv.select(".modebar-container").remove(),st._paper=st._paperdiv.insert("svg",":first-child").classed("main-svg",!0),st._toppaper=st._paperdiv.append("svg").classed("main-svg",!0),st._modebardiv=st._paperdiv.append("div"),delete st._modeBar,st._hoverpaper=st._paperdiv.append("svg").classed("main-svg",!0),!st._uid){var St={};T.selectAll("defs").each(function(){this.id&&(St[this.id.split("-")[1]]=1)}),st._uid=_.randstr(St)}st._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),st._defs=st._paper.append("defs").attr("id","defs-"+st._uid),st._clips=st._defs.append("g").classed("clips",!0),st._topdefs=st._toppaper.append("defs").attr("id","topdefs-"+st._uid),st._topclips=st._topdefs.append("g").classed("clips",!0),st._bgLayer=st._paper.append("g").classed("bglayer",!0),st._draggers=st._paper.append("g").classed("draglayer",!0);var zt=st._paper.append("g").classed("layer-below",!0);st._imageLowerLayer=zt.append("g").classed("imagelayer",!0),st._shapeLowerLayer=zt.append("g").classed("shapelayer",!0),st._cartesianlayer=st._paper.append("g").classed("cartesianlayer",!0),st._polarlayer=st._paper.append("g").classed("polarlayer",!0),st._smithlayer=st._paper.append("g").classed("smithlayer",!0),st._ternarylayer=st._paper.append("g").classed("ternarylayer",!0),st._geolayer=st._paper.append("g").classed("geolayer",!0),st._funnelarealayer=st._paper.append("g").classed("funnelarealayer",!0),st._pielayer=st._paper.append("g").classed("pielayer",!0),st._iciclelayer=st._paper.append("g").classed("iciclelayer",!0),st._treemaplayer=st._paper.append("g").classed("treemaplayer",!0),st._sunburstlayer=st._paper.append("g").classed("sunburstlayer",!0),st._indicatorlayer=st._toppaper.append("g").classed("indicatorlayer",!0),st._glimages=st._paper.append("g").classed("glimages",!0);var Ft=st._toppaper.append("g").classed("layer-above",!0);st._imageUpperLayer=Ft.append("g").classed("imagelayer",!0),st._shapeUpperLayer=Ft.append("g").classed("shapelayer",!0),st._selectionLayer=st._toppaper.append("g").classed("selectionlayer",!0),st._infolayer=st._toppaper.append("g").classed("infolayer",!0),st._menulayer=st._toppaper.append("g").classed("menulayer",!0),st._zoomlayer=st._toppaper.append("g").classed("zoomlayer",!0),st._hoverlayer=st._hoverpaper.append("g").classed("hoverlayer",!0),st._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),_t.emit("plotly_framework")}(we),De._shouldCreateBgLayer&&delete De._shouldCreateBgLayer),u.initGradients(we),u.initPatterns(we),Me&&r.saveShowSpikeInitial(we);var Be=!we.calcdata||we.calcdata.length!==(we._fullData||[]).length;Be&&n.doCalcdata(we);for(var Ye=0;Ye<we.calcdata.length;Ye++)we.calcdata[Ye][0].trace=we._fullData[Ye];we._context.responsive?we._responsiveChartHandler||(we._responsiveChartHandler=function(){_.isHidden(we)||n.resize(we)},window.addEventListener("resize",we._responsiveChartHandler)):_.clearResponsive(we);var We=_.extendFlat({},De._size),et=0;function ft(){if(n.clearAutoMarginIds(we),y.drawMarginPushers(we),r.allowAutoMargin(we),we._fullLayout.title.text&&we._fullLayout.title.automargin&&n.allowAutoMargin(we,"title.automargin"),De._has("pie"))for(var _t=we._fullData,it=0;it<_t.length;it++){var st=_t[it];st.type==="pie"&&st.automargin&&n.allowAutoMargin(we,"pie."+st.uid+".automargin")}return n.doAutoMargin(we),n.previousPromises(we)}function ht(){we._transitioning||(y.doAutoRangeAndConstraints(we),Me&&r.saveRangeInitial(we),t.getComponentMethod("rangeslider","calcAutorange")(we))}var mt=[n.previousPromises,function(){if(pe)return L.addFrames(we,pe)},function _t(){for(var it=De._basePlotModules,st=0;st<it.length;st++)it[st].drawFramework&&it[st].drawFramework(we);!De._glcanvas&&De._has("gl")&&(De._glcanvas=De._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Pt){return Pt.key}),De._glcanvas.enter().append("canvas").attr("class",function(Pt){return"gl-canvas gl-canvas-"+Pt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var St=we._context.plotGlPixelRatio;if(De._glcanvas){De._glcanvas.attr("width",De.width*St).attr("height",De.height*St).style("width",De.width+"px").style("height",De.height+"px");var zt=De._glcanvas.data()[0].regl;if(zt&&(Math.floor(De.width*St)!==zt._gl.drawingBufferWidth||Math.floor(De.height*St)!==zt._gl.drawingBufferHeight)){var Ft="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!et)return _.log(Ft+" Clearing graph and plotting again."),n.cleanPlot([],{},we._fullData,De),n.supplyDefaults(we),De=we._fullLayout,n.doCalcdata(we),et++,_t();_.error(Ft)}}return De.modebar.orientation==="h"?De._modebardiv.style("height",null).style("width","100%"):De._modebardiv.style("width",null).style("height",De.height+"px"),n.previousPromises(we)},ft,function(){if(n.didMarginChange(We,De._size))return _.syncOrAsync([ft,y.layoutStyles],we)}];Ne&&mt.push(function(){if(Be)return _.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),ht],we);ht()}),mt.push(y.layoutStyles),Ne&&mt.push(function(){return r.draw(we,Me?"":"redraw")},function(_t){var it=_t._fullLayout._insideTickLabelsUpdaterange;if(it)return _t._fullLayout._insideTickLabelsUpdaterange=void 0,J(_t,it).then(function(){r.saveRangeInitial(_t,!0)})}),mt.push(y.drawData,y.finalDraw,c,n.addLinks,n.rehover,n.redrag,n.reselect,n.doAutoMargin,n.previousPromises);var Mt=_.syncOrAsync(mt,we);return Mt&&Mt.then||(Mt=Promise.resolve()),Mt.then(function(){return M(we),we})},L.purge=function(we){var Ee=(we=_.getGraphDiv(we))._fullLayout||{},Oe=we._fullData||[];return n.cleanPlot([],{},Oe,Ee),n.purge(we),h.purge(we),Ee._container&&Ee._container.remove(),delete we._context,we},L.react=function(we,Ee,Oe,Fe){var pe,be;we=_.getGraphDiv(we),x.clearPromiseQueue(we);var Me=we._fullData,De=we._fullLayout;if(_.isPlotDiv(we)&&Me&&De){if(_.isPlainObject(Ee)){var Ne=Ee;Ee=Ne.data,Oe=Ne.layout,Fe=Ne.config,pe=Ne.frames}var Be=!1;if(Fe){var Ye=_.extendDeep({},we._context);we._context=void 0,P(we,Fe),Be=de(Ye,we._context)}we.data=Ee||[],x.cleanData(we.data),we.layout=Oe||{},x.cleanLayout(we.layout),function(ot,je,Ue,at){var $e,gt,yt,xt,dt,Lt,Tt,bt,Ct,Dt,Bt=at._preGUI,Xt=[],an={},Wt={};for($e in Bt){if(dt=ye($e,xe)){if(Ct=dt.head,Dt=dt.tail,gt=dt.attr||Ct+".uirevision",(xt=(yt=v(at,gt).get())&&Ce(gt,je))&&xt===yt){if((Lt=Bt[$e])===null&&(Lt=void 0),le(bt=(Tt=v(je,$e)).get(),Lt)){bt===void 0&&Dt==="autorange"&&Xt.push(Ct),Tt.set(F(v(at,$e).get()));continue}if(Dt==="autorange"||Dt.substr(0,6)==="range["){var Vt=Bt[Ct+".range[0]"],on=Bt[Ct+".range[1]"],Sn=Bt[Ct+".autorange"];if(Sn||Sn===null&&Vt===null&&on===null){if(!(Ct in an)){var Ln=v(je,Ct).get();an[Ct]=Ln&&(Ln.autorange||Ln.autorange!==!1&&(!Ln.range||Ln.range.length!==2))}if(an[Ct]){Tt.set(F(v(at,$e).get()));continue}}}}}else _.warn("unrecognized GUI edit: "+$e);delete Bt[$e],dt&&dt.tail.substr(0,6)==="range["&&(Wt[dt.head]=1)}for(var fn=0;fn<Xt.length;fn++){var Zt=Xt[fn];if(Wt[Zt]){var ln=v(je,Zt).get();ln&&delete ln.autorange}}var nn=at._tracePreGUI;for(var cn in nn){var kn,An=nn[cn],wn=null;for($e in An){if(!wn){var Cn=ke(cn,Ue);if(Cn<0){delete nn[cn];break}var _n=Te(cn,ot,(kn=Ue[Cn]._fullInput).index);if(_n<0){delete nn[cn];break}wn=ot[_n]}if(dt=ye($e,_e)){if(dt.attr?xt=(yt=v(at,dt.attr).get())&&Ce(dt.attr,je):(yt=kn.uirevision,(xt=wn.uirevision)===void 0&&(xt=je.uirevision)),xt&&xt===yt&&((Lt=An[$e])===null&&(Lt=void 0),le(bt=(Tt=v(wn,$e)).get(),Lt))){Tt.set(F(v(kn,$e).get()));continue}}else _.warn("unrecognized GUI edit: "+$e+" in trace uid "+cn);delete An[$e]}}}(we.data,we.layout,Me,De),n.supplyDefaults(we,{skipUpdateCalc:!0});var We=we._fullData,et=we._fullLayout,ft=et.datarevision===void 0,ht=et.transition,mt=function(ot,je,Ue,at,$e){var gt=k.layoutFlags();return gt.arrays={},gt.rangesAltered={},gt.nChanges=0,gt.nChangesAnim=0,ue(je,Ue,[],{getValObject:function(yt){return a.getLayoutValObject(Ue,yt)},flags:gt,immutable:at,transition:$e,gd:ot}),(gt.plot||gt.calc)&&(gt.layoutReplot=!0),$e&&gt.nChanges&&gt.nChangesAnim&&(gt.anim=gt.nChanges===gt.nChangesAnim?"all":"some"),gt}(we,De,et,ft,ht),Mt=mt.newDataRevision,_t=function(ot,je,Ue,at,$e,gt){var yt=je.length===Ue.length;if(!$e&&!yt)return{fullReplot:!0,calc:!0};var xt,dt,Lt=k.traceFlags();Lt.arrays={},Lt.nChanges=0,Lt.nChangesAnim=0;var Tt={getValObject:function(Ct){var Dt=a.getTraceValObject(dt,Ct);return!dt._module.animatable&&Dt.anim&&(Dt.anim=!1),Dt},flags:Lt,immutable:at,transition:$e,newDataRevision:gt,gd:ot},bt={};for(xt=0;xt<je.length;xt++)if(Ue[xt]){if(dt=Ue[xt]._fullInput,n.hasMakesDataTransform(dt)&&(dt=Ue[xt]),bt[dt.uid])continue;bt[dt.uid]=1,ue(je[xt]._fullInput,dt,[],Tt)}return(Lt.calc||Lt.plot)&&(Lt.fullReplot=!0),$e&&Lt.nChanges&&Lt.nChangesAnim&&(Lt.anim=Lt.nChanges===Lt.nChangesAnim&&yt?"all":"some"),Lt}(we,Me,We,ft,ht,Mt);if(fe(we)&&(mt.layoutReplot=!0),_t.calc||mt.calc){we.calcdata=void 0;for(var it=Object.getOwnPropertyNames(et),st=0;st<it.length;st++){var St=it[st],zt=St.substring(0,5);if(zt==="xaxis"||zt==="yaxis"){var Ft=et[St]._emptyCategories;Ft&&Ft()}}}else n.supplyDefaultsUpdateCalc(we.calcdata,We);var Pt=[];if(pe&&(we._transitionData={},n.createTransitionData(we),Pt.push(function(){return L.addFrames(we,pe)})),et.transition&&!Be&&(_t.anim||mt.anim))mt.ticks&&Pt.push(y.doTicksRelayout),n.doCalcdata(we),y.doAutoRangeAndConstraints(we),Pt.push(function(){return n.transitionFromReact(we,_t,mt,De)});else if(_t.fullReplot||mt.layoutReplot||Be)we._fullLayout._skipDefaults=!0,Pt.push(L._doPlot);else{for(var Xe in mt.arrays){var Ke=mt.arrays[Xe];if(Ke.length){var He=t.getComponentMethod(Xe,"drawOne");if(He!==_.noop)for(var Je=0;Je<Ke.length;Je++)He(we,Ke[Je]);else{var lt=t.getComponentMethod(Xe,"draw");if(lt===_.noop)throw new Error("cannot draw components: "+Xe);lt(we)}}}Pt.push(n.previousPromises),_t.style&&Pt.push(y.doTraceStyle),(_t.colorbars||mt.colorbars)&&Pt.push(y.doColorBars),mt.legend&&Pt.push(y.doLegend),mt.layoutstyle&&Pt.push(y.layoutStyles),mt.axrange&&K(Pt),mt.ticks&&Pt.push(y.doTicksRelayout),mt.modebar&&Pt.push(y.doModeBar),mt.camera&&Pt.push(y.doCamera),Pt.push(M)}Pt.push(n.rehover,n.redrag,n.reselect),(be=_.syncOrAsync(Pt,we))&&be.then||(be=Promise.resolve(we))}else be=L.newPlot(we,Ee,Oe,Fe);return be.then(function(){return we.emit("plotly_react",{data:Ee,layout:Oe}),we})},L.redraw=function(we){if(we=_.getGraphDiv(we),!_.isPlotDiv(we))throw new Error("This element is not a Plotly plot: "+we);return x.cleanData(we.data),x.cleanLayout(we.layout),we.calcdata=void 0,L._doPlot(we).then(function(){return we.emit("plotly_redraw"),we})},L.relayout=J,L.restyle=Z,L.setPlotConfig=function(we){return _.extendFlat(d,we)},L.update=ge,L._guiRelayout=ve(J),L._guiRestyle=ve(Z),L._guiUpdate=ve(ge),L._storeDirectGUIEdit=function(we,Ee,Oe){for(var Fe in Oe)H(Fe,v(we,Fe).get(),Oe[Fe],Ee)}},72075:function(N){var L={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function T(w,i){for(var _ in w){var v=w[_];v.valType?i[_]=v.dflt:(i[_]||(i[_]={}),T(v,i[_]))}})(L,e),N.exports={configAttributes:L,dfltConfig:e}},86281:function(N,L,e){var T=e(73972),w=e(71828),i=e(9012),_=e(10820),v=e(31391),h=e(85594),s=e(72075).configAttributes,t=e(30962),a=w.extendDeepAll,n=w.isPlainObject,r=w.isArrayOrTypedArray,l=w.nestedProperty,o=w.valObjectMeta,u="_isSubplotObj",p="_isLinkedToArray",c="_deprecated",b=[u,p,"_arrayAttrRegexps",c];function g(f,S,M){if(!f)return!1;if(f._isLinkedToArray){if(d(S[M]))M++;else if(M<S.length)return!1}for(;M<S.length;M++){var E=f[S[M]];if(!n(E)||(f=E,M===S.length-1))break;if(f._isLinkedToArray){if(!d(S[++M]))return!1}else if(f.valType==="info_array"){var O=S[++M];if(!d(O))return!1;var P=f.items;if(Array.isArray(P)){if(O>=P.length)return!1;if(f.dimensions===2){if(M++,S.length===M)return f;var I=S[M];if(!d(I))return!1;f=P[O][I]}else f=P[O]}else f=P}}return f}function d(f){return f===Math.round(f)&&f>=0}function m(){var f,S,M={};for(f in a(M,_),T.subplotsRegistry)if((S=T.subplotsRegistry[f]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)y(M,S,S.attr[E]);else y(M,S,S.attr==="subplot"?S.name:S.attr);for(f in T.componentsRegistry){var O=(S=T.componentsRegistry[f]).schema;if(O&&(O.subplots||O.layout)){var P=O.subplots;if(P&&P.xaxis&&!P.yaxis)for(var I in P.xaxis)delete M.yaxis[I];delete M.xaxis.shift,delete M.xaxis.autoshift}else S.name==="colorscale"?a(M,S.layoutAttributes):S.layoutAttributes&&k(M,S.layoutAttributes,S.name)}return{layoutAttributes:x(M)}}function x(f){return function(S){L.crawl(S,function(M,E,O){L.isValObject(M)?M.arrayOk!==!0&&M.valType!=="data_array"||(O[E+"src"]={valType:"string",editType:"none"}):n(M)&&(M.role="object")})}(f),function(S){L.crawl(S,function(M,E,O){if(M){var P=M[p];P&&(delete M[p],O[E]={items:{}},O[E].items[P]=M,O[E].role="object")}})}(f),function(S){(function M(E){for(var O in E)if(n(E[O]))M(E[O]);else if(Array.isArray(E[O]))for(var P=0;P<E[O].length;P++)M(E[O][P]);else E[O]instanceof RegExp&&(E[O]=E[O].toString())})(S)}(f),f}function y(f,S,M){var E=l(f,M),O=a({},S.layoutAttributes);O[u]=!0,E.set(O)}function k(f,S,M){var E=l(f,M);E.set(a(E.get()||{},S))}L.IS_SUBPLOT_OBJ=u,L.IS_LINKED_TO_ARRAY=p,L.DEPRECATED=c,L.UNDERSCORE_ATTRS=b,L.get=function(){var f={};T.allTypes.forEach(function(E){f[E]=function(O){var P,I;I=(P=T.modules[O]._module).basePlotModule;var z={type:null},U=a({},i),R=a({},P.attributes);L.crawl(R,function(F,V,H,te,$){l(U,$).set(void 0),F===void 0&&l(R,$).set(void 0)}),a(z,U),T.traceIs(O,"noOpacity")&&delete z.opacity,T.traceIs(O,"showLegend")||(delete z.showlegend,delete z.legendgroup),T.traceIs(O,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),P.selectPoints||delete z.selectedpoints,a(z,R),I.attributes&&a(z,I.attributes),z.type=O;var j={meta:P.meta||{},categories:P.categories||{},animatable:!!P.animatable,type:O,attributes:x(z)};if(P.layoutAttributes){var Z={};a(Z,P.layoutAttributes),j.layoutAttributes=x(Z)}return P.animatable||L.crawl(j,function(F){L.isValObject(F)&&"anim"in F&&delete F.anim}),j}(E)});var S,M={};return Object.keys(T.transformsRegistry).forEach(function(E){M[E]=function(O){var P=T.transformsRegistry[O],I=a({},P.attributes);return Object.keys(T.componentsRegistry).forEach(function(z){var U=T.componentsRegistry[z];U.schema&&U.schema.transforms&&U.schema.transforms[O]&&Object.keys(U.schema.transforms[O]).forEach(function(R){k(I,U.schema.transforms[O][R],R)})}),{attributes:x(I)}}(E)}),{defs:{valObjects:o,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:f,layout:m(),transforms:M,frames:(S={frames:a({},v)},x(S),S.frames),animation:x(h),config:x(s)}},L.crawl=function(f,S,M,E){var O=M||0;E=E||"",Object.keys(f).forEach(function(P){var I=f[P];if(b.indexOf(P)===-1){var z=(E?E+".":"")+P;S(I,P,f,O,z),L.isValObject(I)||n(I)&&P!=="impliedEdits"&&L.crawl(I,S,O+1,z)}})},L.isValObject=function(f){return f&&f.valType!==void 0},L.findArrayAttributes=function(f){var S,M,E=[],O=[],P=[];function I(F,V,H,te){O=O.slice(0,te).concat([V]),P=P.slice(0,te).concat([F&&F._isLinkedToArray]),F&&(F.valType==="data_array"||F.arrayOk===!0)&&(O[te-1]!=="colorbar"||V!=="ticktext"&&V!=="tickvals")&&z(S,0,"")}function z(F,V,H){var te=F[O[V]],$=H+O[V];if(V===O.length-1)r(te)&&E.push(M+$);else if(P[V]){if(Array.isArray(te))for(var J=0;J<te.length;J++)n(te[J])&&z(te[J],V+1,$+"["+J+"].")}else n(te)&&z(te,V+1,$+".")}S=f,M="",L.crawl(i,I),f._module&&f._module.attributes&&L.crawl(f._module.attributes,I);var U=f.transforms;if(U)for(var R=0;R<U.length;R++){var j=U[R],Z=j._module;Z&&(M="transforms["+R+"].",S=j,L.crawl(Z.attributes,I))}return E},L.getTraceValObject=function(f,S){var M,E,O=S[0],P=1;if(O==="transforms"){if(S.length===1)return i.transforms;var I=f.transforms;if(!Array.isArray(I)||!I.length)return!1;var z=S[1];if(!d(z)||z>=I.length)return!1;E=(M=(T.transformsRegistry[I[z].type]||{}).attributes)&&M[S[2]],P=3}else{var U=f._module;if(U||(U=(T.modules[f.type||i.type.dflt]||{})._module),!U)return!1;if(!(E=(M=U.attributes)&&M[O])){var R=U.basePlotModule;R&&R.attributes&&(E=R.attributes[O])}E||(E=i[O])}return g(E,S,P)},L.getLayoutValObject=function(f,S){var M=function(E,O){var P,I,z,U,R=E._basePlotModules;if(R){var j;for(P=0;P<R.length;P++){if((z=R[P]).attrRegex&&z.attrRegex.test(O)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!j&&z.layoutAttributes&&(j=z.layoutAttributes)}var Z=z.baseLayoutAttrOverrides;if(Z&&O in Z)return Z[O]}if(j)return j}var F=E._modules;if(F){for(P=0;P<F.length;P++)if((U=F[P].layoutAttributes)&&O in U)return U[O]}for(I in T.componentsRegistry){if((z=T.componentsRegistry[I]).name==="colorscale"&&O.indexOf("coloraxis")===0)return z.layoutAttributes[O];if(!z.schema&&O===z.name)return z.layoutAttributes}return O in _&&_[O]}(f,S[0]);return g(M,S,1)}},44467:function(N,L,e){var T=e(71828),w=e(9012),i="templateitemname",_={name:{valType:"string",editType:"none"}};function v(s){return s&&typeof s=="string"}function h(s){var t=s.length-1;return s.charAt(t)!=="s"&&T.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}_[i]={valType:"string",editType:"calc"},L.templatedArray=function(s,t){return t._isLinkedToArray=s,t.name=_.name,t[i]=_[i],t},L.traceTemplater=function(s){var t,a,n={};for(t in s)a=s[t],Array.isArray(a)&&a.length&&(n[t]=0);return{newTrace:function(r){var l={type:t=T.coerce(r,{},w,"type"),_template:null};if(t in n){a=s[t];var o=n[t]%a.length;n[t]++,l._template=a[o]}return l}}},L.newContainer=function(s,t,a){var n=s._template,r=n&&(n[t]||a&&n[a]);return T.isPlainObject(r)||(r=null),s[t]={_template:r}},L.arrayTemplater=function(s,t,a){var n=s._template,r=n&&n[h(t)],l=n&&n[t];Array.isArray(l)&&l.length||(l=[]);var o={};return{newItem:function(u){var p={name:u.name,_input:u},c=p[i]=u[i];if(!v(c))return p._template=r,p;for(var b=0;b<l.length;b++){var g=l[b];if(g.name===c)return o[c]=1,p._template=g,p}return p[a]=u[a]||!1,p._template=!1,p},defaultItems:function(){for(var u=[],p=0;p<l.length;p++){var c=l[p],b=c.name;if(v(b)&&!o[b]){var g={_template:c,name:b,_input:{_templateitemname:b}};g[i]=c[i],u.push(g),o[b]=1}}return u}}},L.arrayDefaultKey=h,L.arrayEditor=function(s,t,a){var n=(T.nestedProperty(s,t).get()||[]).length,r=a._index,l=r>=n&&(a._input||{})._templateitemname;l&&(r=n);var o,u=t+"["+r+"]";function p(){o={},l&&(o[u]={},o[u][i]=l)}function c(g,d){l?T.nestedProperty(o[u],g).set(d):o[u+"."+g]=d}function b(){var g=o;return p(),g}return p(),{modifyBase:function(g,d){o[g]=d},modifyItem:c,getUpdateObj:b,applyUpdate:function(g,d){g&&c(g,d);var m=b();for(var x in m)T.nestedProperty(s,x).set(m[x])}}}},61549:function(N,L,e){var T=e(39898),w=e(73972),i=e(74875),_=e(71828),v=e(63893),h=e(33306),s=e(7901),t=e(91424),a=e(92998),n=e(64168),r=e(89298),l=e(18783),o=e(99082),u=o.enforce,p=o.clean,c=e(71739).doAutoRange,b="start";function g(k,f,S){for(var M=0;M<S.length;M++){var E=S[M][0],O=S[M][1];if(!(E[0]>=k[1]||E[1]<=k[0])&&O[0]<f[1]&&O[1]>f[0])return!0}return!1}function d(k){var f,S,M,E,O,P,I=k._fullLayout,z=I._size,U=z.p,R=r.list(k,"",!0);if(I._paperdiv.style({width:k._context.responsive&&I.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":I.width+"px",height:k._context.responsive&&I.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":I.height+"px"}).selectAll(".main-svg").call(t.setSize,I.width,I.height),k._context.setBackground(k,I.paper_bgcolor),L.drawMainTitle(k),n.manage(k),!I._has("cartesian"))return i.previousPromises(k);function j(Be,Ye,We){var et=Be._lw/2;return Be._id.charAt(0)==="x"?Ye?We==="top"?Ye._offset-U-et:Ye._offset+Ye._length+U+et:z.t+z.h*(1-(Be.position||0))+et%1:Ye?We==="right"?Ye._offset+Ye._length+U+et:Ye._offset-U-et:z.l+z.w*(Be.position||0)+et%1}for(f=0;f<R.length;f++){var Z=(E=R[f])._anchorAxis;E._linepositions={},E._lw=t.crispRound(k,E.linewidth,1),E._mainLinePosition=j(E,Z,E.side),E._mainMirrorPosition=E.mirror&&Z?j(E,Z,l.OPPOSITE_SIDE[E.side]):null}var F=[],V=[],H=[],te=s.opacity(I.paper_bgcolor)===1&&s.opacity(I.plot_bgcolor)===1&&I.paper_bgcolor===I.plot_bgcolor;for(S in I._plots)if((M=I._plots[S]).mainplot)M.bg&&M.bg.remove(),M.bg=void 0;else{var $=M.xaxis.domain,J=M.yaxis.domain,X=M.plotgroup;if(g($,J,H)){var K=X.node(),ee=M.bg=_.ensureSingle(X,"rect","bg");K.insertBefore(ee.node(),K.childNodes[0]),V.push(S)}else X.select("rect.bg").remove(),H.push([$,J]),te||(F.push(S),V.push(S))}var ie,ae,oe,fe,ge,ve,xe,_e,ye,Ce,ke,Te,le,ue=I._bgLayer.selectAll(".bg").data(F);for(ue.enter().append("rect").classed("bg",!0),ue.exit().remove(),ue.each(function(Be){I._plots[Be].bg=T.select(this)}),f=0;f<V.length;f++)M=I._plots[V[f]],O=M.xaxis,P=M.yaxis,M.bg&&O._offset!==void 0&&P._offset!==void 0&&M.bg.call(t.setRect,O._offset-U,P._offset-U,O._length+2*U,P._length+2*U).call(s.fill,I.plot_bgcolor).style("stroke-width",0);if(!I._hasOnlyLargeSploms)for(S in I._plots){M=I._plots[S],O=M.xaxis,P=M.yaxis;var de,Le,we=M.clipId="clip"+I._uid+S+"plot",Ee=_.ensureSingleById(I._clips,"clipPath",we,function(Be){Be.classed("plotclip",!0).append("rect")});M.clipRect=Ee.select("rect").attr({width:O._length,height:P._length}),t.setTranslate(M.plot,O._offset,P._offset),M._hasClipOnAxisFalse?(de=null,Le=we):(de=we,Le=null),t.setClipUrl(M.plot,de,k),M.layerClipId=Le}function Oe(Be){return"M"+ie+","+Be+"H"+ae}function Fe(Be){return"M"+O._offset+","+Be+"h"+O._length}function pe(Be){return"M"+Be+","+_e+"V"+xe}function be(Be){return P._shift!==void 0&&(Be+=P._shift),"M"+Be+","+P._offset+"v"+P._length}function Me(Be,Ye,We){if(!Be.showline||S!==Be._mainSubplot)return"";if(!Be._anchorAxis)return We(Be._mainLinePosition);var et=Ye(Be._mainLinePosition);return Be.mirror&&(et+=Ye(Be._mainMirrorPosition)),et}for(S in I._plots){M=I._plots[S],O=M.xaxis,P=M.yaxis;var De="M0,0";m(O,S)&&(ge=y(O,"left",P,R),ie=O._offset-(ge?U+ge:0),ve=y(O,"right",P,R),ae=O._offset+O._length+(ve?U+ve:0),oe=j(O,P,"bottom"),fe=j(O,P,"top"),!(le=!O._anchorAxis||S!==O._mainSubplot)||O.mirror!=="allticks"&&O.mirror!=="all"||(O._linepositions[S]=[oe,fe]),De=Me(O,Oe,Fe),le&&O.showline&&(O.mirror==="all"||O.mirror==="allticks")&&(De+=Oe(oe)+Oe(fe)),M.xlines.style("stroke-width",O._lw+"px").call(s.stroke,O.showline?O.linecolor:"rgba(0,0,0,0)")),M.xlines.attr("d",De);var Ne="M0,0";m(P,S)&&(ke=y(P,"bottom",O,R),xe=P._offset+P._length+(ke?U:0),Te=y(P,"top",O,R),_e=P._offset-(Te?U:0),ye=j(P,O,"left"),Ce=j(P,O,"right"),!(le=!P._anchorAxis||S!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[S]=[ye,Ce]),Ne=Me(P,pe,be),le&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Ne+=pe(ye)+pe(Ce)),M.ylines.style("stroke-width",P._lw+"px").call(s.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),M.ylines.attr("d",Ne)}return r.makeClipPaths(k),i.previousPromises(k)}function m(k,f){return(k.ticks||k.showline)&&(f===k._mainSubplot||k.mirror==="all"||k.mirror==="allticks")}function x(k,f,S){if(!S.showline||!S._lw)return!1;if(S.mirror==="all"||S.mirror==="allticks")return!0;var M=S._anchorAxis;if(!M)return!1;var E=l.FROM_BL[f];return S.side===f?M.domain[E]===k.domain[E]:S.mirror&&M.domain[1-E]===k.domain[1-E]}function y(k,f,S,M){if(x(k,f,S))return S._lw;for(var E=0;E<M.length;E++){var O=M[E];if(O._mainAxis===S._mainAxis&&x(k,f,O))return O._lw}return 0}L.layoutStyles=function(k){return _.syncOrAsync([i.doAutoMargin,d],k)},L.drawMainTitle=function(k){var f,S=k._fullLayout.title,M=k._fullLayout,E=function(F){var V=F.title,H="middle";return _.isRightAnchor(V)?H="end":_.isLeftAnchor(V)&&(H=b),H}(M),O=function(F){var V=F.title,H="0em";return _.isTopAnchor(V)?H=l.CAP_SHIFT+"em":_.isMiddleAnchor(V)&&(H=l.MID_SHIFT+"em"),H}(M),P=function(F,V){var H=F.title,te=F._size,$=0;return V!=="0em"&&V?V===l.CAP_SHIFT+"em"&&($=H.pad.t):$=-H.pad.b,H.y==="auto"?te.t/2:H.yref==="paper"?te.t+te.h-te.h*H.y+$:F.height-F.height*H.y+$}(M,O),I=function(F,V){var H=F.title,te=F._size,$=0;return V===b?$=H.pad.l:V==="end"&&($=-H.pad.r),H.xref==="paper"?te.l+te.w*H.x+$:F.width*H.x+$}(M,E);if(a.draw(k,"gtitle",{propContainer:M,propName:"title.text",placeholder:M._dfltTitle.plot,attributes:{x:I,y:P,"text-anchor":E,dy:O}}),S.text&&S.automargin){var z=T.selectAll(".gtitle"),U=t.bBox(z.node()).height,R=function(F,V,H){var te=V.y,$=V.yanchor,J=te>.5?"t":"b",X=F._fullLayout.margin[J],K=0;return V.yref==="paper"?K=H+V.pad.t+V.pad.b:V.yref==="container"&&(K=function(ee,ie,ae,oe,fe){var ge=0;return ae==="middle"&&(ge+=fe/2),ee==="t"?(ae==="top"&&(ge+=fe),ge+=oe-ie*oe):(ae==="bottom"&&(ge+=fe),ge+=ie*oe),ge}(J,te,$,F._fullLayout.height,H)+V.pad.t+V.pad.b),K>X?K:0}(k,S,U);if(R>0){(function(F,V,H,te){var $="title.automargin",J=F._fullLayout.title,X=J.y>.5?"t":"b",K={x:J.x,y:J.y,t:0,b:0},ee={};J.yref==="paper"&&function(ie,ae,oe,fe,ge){var ve=ae.yref==="paper"?ie._fullLayout._size.h:ie._fullLayout.height,xe=_.isTopAnchor(ae)?fe:fe-ge,_e=oe==="b"?ve-xe:xe;return!(_.isTopAnchor(ae)&&oe==="t"||_.isBottomAnchor(ae)&&oe==="b")&&_e<ge}(F,J,X,V,te)?K[X]=H:J.yref==="container"&&(ee[X]=H,F._fullLayout._reservedMargin[$]=ee),i.allowAutoMargin(F,$),i.autoMargin(F,$,K)})(k,P,R,U),z.attr({x:I,y:P,"text-anchor":E,dy:(f=S.yanchor,f==="top"?l.CAP_SHIFT+.3+"em":f==="bottom"?"-0.3em":l.MID_SHIFT+"em")}).call(v.positionText,I,P);var j=(S.text.match(v.BR_TAG_ALL)||[]).length;if(j){var Z=l.LINE_SPACING*j+l.MID_SHIFT;S.y===0&&(Z=-Z),z.selectAll(".line").each(function(){var F=+this.getAttribute("dy").slice(0,-2)-Z+"em";this.setAttribute("dy",F)})}}}},L.doTraceStyle=function(k){var f,S=k.calcdata,M=[];for(f=0;f<S.length;f++){var E=S[f],O=E[0]||{},P=O.trace||{},I=P._module||{},z=I.arraysToCalcdata;z&&z(E,P);var U=I.editStyle;U&&M.push({fn:U,cd0:O})}if(M.length){for(f=0;f<M.length;f++){var R=M[f];R.fn(k,R.cd0)}h(k),L.redrawReglTraces(k)}return i.style(k),w.getComponentMethod("legend","draw")(k),i.previousPromises(k)},L.doColorBars=function(k){return w.getComponentMethod("colorbar","draw")(k),i.previousPromises(k)},L.layoutReplot=function(k){var f=k.layout;return k.layout=void 0,w.call("_doPlot",k,"",f)},L.doLegend=function(k){return w.getComponentMethod("legend","draw")(k),i.previousPromises(k)},L.doTicksRelayout=function(k){return r.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(w.subplotsRegistry.splom.updateGrid(k),h(k),L.redrawReglTraces(k)),L.drawMainTitle(k),i.previousPromises(k)},L.doModeBar=function(k){var f=k._fullLayout;n.manage(k);for(var S=0;S<f._basePlotModules.length;S++){var M=f._basePlotModules[S].updateFx;M&&M(k)}return i.previousPromises(k)},L.doCamera=function(k){for(var f=k._fullLayout,S=f._subplots.gl3d,M=0;M<S.length;M++){var E=f[S[M]];E._scene.setViewport(E)}},L.drawData=function(k){var f=k._fullLayout;h(k);for(var S=f._basePlotModules,M=0;M<S.length;M++)S[M].plot(k);return L.redrawReglTraces(k),i.style(k),w.getComponentMethod("selections","draw")(k),w.getComponentMethod("shapes","draw")(k),w.getComponentMethod("annotations","draw")(k),w.getComponentMethod("images","draw")(k),f._replotting=!1,i.previousPromises(k)},L.redrawReglTraces=function(k){var f=k._fullLayout;if(f._has("regl")){var S,M,E=k._fullData,O=[],P=[];for(f._hasOnlyLargeSploms&&f._splomGrid.draw(),S=0;S<E.length;S++){var I=E[S];I.visible===!0&&I._length!==0&&(I.type==="splom"?f._splomScenes[I.uid].draw():I.type==="scattergl"?_.pushUnique(O,I.xaxis+I.yaxis):I.type==="scatterpolargl"&&_.pushUnique(P,I.subplot))}for(S=0;S<O.length;S++)(M=f._plots[O[S]])._scene&&M._scene.draw();for(S=0;S<P.length;S++)(M=f[P[S]]._subplot)._scene&&M._scene.draw()}},L.doAutoRangeAndConstraints=function(k){for(var f,S=r.list(k,"",!0),M={},E=0;E<S.length;E++)if(!M[(f=S[E])._id]){M[f._id]=1,p(k,f),c(k,f);var O=f._matchGroup;if(O)for(var P in O){var I=r.getFromId(k,P);c(k,I,f.range),M[P]=1}}u(k)},L.finalDraw=function(k){w.getComponentMethod("rangeslider","draw")(k),w.getComponentMethod("rangeselector","draw")(k)},L.drawMarginPushers=function(k){w.getComponentMethod("legend","draw")(k),w.getComponentMethod("rangeselector","draw")(k),w.getComponentMethod("sliders","draw")(k),w.getComponentMethod("updatemenus","draw")(k),w.getComponentMethod("colorbar","draw")(k)}},96318:function(N,L,e){var T=e(71828),w=T.isPlainObject,i=e(86281),_=e(74875),v=e(9012),h=e(44467),s=e(72075).dfltConfig;function t(c,b){c=T.extendDeep({},c);var g,d,m=Object.keys(c).sort();function x(M,E,O){if(w(E)&&w(M))t(M,E);else if(Array.isArray(E)&&Array.isArray(M)){var P=h.arrayTemplater({_template:c},O);for(d=0;d<E.length;d++){var I=E[d],z=P.newItem(I)._template;z&&t(z,I)}var U=P.defaultItems();for(d=0;d<U.length;d++)E.push(U[d]._template);for(d=0;d<E.length;d++)delete E[d].templateitemname}}for(g=0;g<m.length;g++){var y=m[g],k=c[y];if(y in b?x(k,b[y],y):b[y]=k,a(y)===y)for(var f in b){var S=a(f);f===S||S!==y||f in c||x(k,b[f],y)}}}function a(c){return c.replace(/[0-9]+$/,"")}function n(c,b,g,d,m){var x=m&&g(m);for(var y in c){var k=c[y],f=o(c,y,d),S=o(c,y,m),M=g(S);if(!M){var E=a(y);E!==y&&(M=g(S=o(c,E,m)))}if(!(x&&x===M||!M||M._noTemplating||M.valType==="data_array"||M.arrayOk&&Array.isArray(k)))if(!M.valType&&w(k))n(k,b,g,f,S);else if(M._isLinkedToArray&&Array.isArray(k))for(var O=!1,P=0,I={},z=0;z<k.length;z++){var U=k[z];if(w(U)){var R=U.name;if(R)I[R]||(n(U,b,g,o(k,P,f),o(k,P,S)),P++,I[R]=1);else if(!O){var j=o(c,h.arrayDefaultKey(y),d),Z=o(k,P,f);n(U,b,g,Z,o(k,P,S));var F=T.nestedProperty(b,Z);T.nestedProperty(b,j).set(F.get()),F.set(null),O=!0}}}else T.nestedProperty(b,f).set(k)}}function r(c,b){return i.getLayoutValObject(c,T.nestedProperty({},b).parts)}function l(c,b){return i.getTraceValObject(c,T.nestedProperty({},b).parts)}function o(c,b,g){return g?Array.isArray(c)?g+"["+b+"]":g+"."+b:b}function u(c){for(var b=0;b<c.length;b++)if(w(c[b]))return!0}function p(c){var b;switch(c.code){case"data":b="The template has no key data.";break;case"layout":b="The template has no key layout.";break;case"missing":b=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":b=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":b="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=b,c}L.makeTemplate=function(c){c=T.isPlainObject(c)?c:T.getGraphDiv(c),c=T.extendDeep({_context:s},{data:c.data,layout:c.layout}),_.supplyDefaults(c);var b=c.data||[],g=c.layout||{};g._basePlotModules=c._fullLayout._basePlotModules,g._modules=c._fullLayout._modules;var d={data:{},layout:{}};b.forEach(function(P){var I={};n(P,I,l.bind(null,P));var z=T.coerce(P,{},v,"type"),U=d.data[z];U||(U=d.data[z]=[]),U.push(I)}),n(g,d.layout,r.bind(null,g)),delete d.layout.template;var m=g.template;if(w(m)){var x,y,k,f,S,M,E=m.layout;w(E)&&t(E,d.layout);var O=m.data;if(w(O)){for(y in d.data)if(k=O[y],Array.isArray(k)){for(M=(S=d.data[y]).length,f=k.length,x=0;x<M;x++)t(k[x%f],S[x]);for(x=M;x<f;x++)S.push(T.extendDeep({},k[x]))}for(y in O)y in d.data||(d.data[y]=T.extendDeep([],O[y]))}}return d},L.validateTemplate=function(c,b){var g=T.extendDeep({},{_context:s,data:c.data,layout:c.layout}),d=g.layout||{};w(b)||(b=d.template||{});var m=b.layout,x=b.data,y=[];g.layout=d,g.layout.template=b,_.supplyDefaults(g);var k=g._fullLayout,f=g._fullData,S={};if(w(m)?(function U(R,j){for(var Z in R)if(Z.charAt(0)!=="_"&&w(R[Z])){var F,V=a(Z),H=[];for(F=0;F<j.length;F++)H.push(o(R,Z,j[F])),V!==Z&&H.push(o(R,V,j[F]));for(F=0;F<H.length;F++)S[H[F]]=1;U(R[Z],H)}}(k,["layout"]),function U(R,j){for(var Z in R)if(Z.indexOf("defaults")===-1&&w(R[Z])){var F=o(R,Z,j);S[F]?U(R[Z],F):y.push({code:"unused",path:F})}}(m,"layout")):y.push({code:"layout"}),w(x)){for(var M,E={},O=0;O<f.length;O++){var P=f[O];E[M=P.type]=(E[M]||0)+1,P._fullInput._template||y.push({code:"missing",index:P._fullInput.index,traceType:M})}for(M in x){var I=x[M].length,z=E[M]||0;I>z?y.push({code:"unused",traceType:M,templateCount:I,dataCount:z}):z>I&&y.push({code:"reused",traceType:M,templateCount:I,dataCount:z})}}else y.push({code:"data"});if(function U(R,j){for(var Z in R)if(Z.charAt(0)!=="_"){var F=R[Z],V=o(R,Z,j);w(F)?(Array.isArray(R)&&F._template===!1&&F.templateitemname&&y.push({code:"missing",path:V,templateitemname:F.templateitemname}),U(F,V)):Array.isArray(F)&&u(F)&&U(F,V)}}({data:f,layout:k},""),y.length)return y.map(p)}},403:function(N,L,e){var T=e(92770),w=e(72391),i=e(74875),_=e(71828),v=e(25095),h=e(5900),s=e(70942),t=e(11506).version,a={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};N.exports=function(n,r){var l,o,u,p;function c(z){return!(z in r)||_.validate(r[z],a[z])}if(r=r||{},_.isPlainObject(n)?(l=n.data||[],o=n.layout||{},u=n.config||{},p={}):(n=_.getGraphDiv(n),l=_.extendDeep([],n.data),o=_.extendDeep({},n.layout),u=n._context,p=n._fullLayout||{}),!c("width")&&r.width!==null||!c("height")&&r.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+_.join2(a.format.values,", "," or ")+".");var b={};function g(z,U){return _.coerce(r,b,a,z,U)}var d=g("format"),m=g("width"),x=g("height"),y=g("scale"),k=g("setBackground"),f=g("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var M=_.extendFlat({},o);m?M.width=m:r.width===null&&T(p.width)&&(M.width=p.width),x?M.height=x:r.height===null&&T(p.height)&&(M.height=p.height);var E=_.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:k}),O=v.getRedrawFunc(S);function P(){return new Promise(function(z){setTimeout(z,v.getDelay(S._fullLayout))})}function I(){return new Promise(function(z,U){var R=h(S,d,y),j=S._fullLayout.width,Z=S._fullLayout.height;function F(){w.purge(S),document.body.removeChild(S)}if(d==="full-json"){var V=i.graphJson(S,!1,"keepdata","object",!0,!0);return V.version=t,V=JSON.stringify(V),F(),z(f?V:v.encodeJSON(V))}if(F(),d==="svg")return z(f?R:v.encodeSVG(R));var H=document.createElement("canvas");H.id=_.randstr(),s({format:d,width:j,height:Z,scale:y,canvas:H,svg:R,promise:!0}).then(z).catch(U)})}return new Promise(function(z,U){w.newPlot(S,l,M,E).then(O).then(P).then(I).then(function(R){z(function(j){return f?j.replace(v.IMAGE_URL_PREFIX,""):j}(R))}).catch(function(R){U(R)})})}},84936:function(N,L,e){var T=e(71828),w=e(74875),i=e(86281),_=e(72075).dfltConfig,v=T.isPlainObject,h=Array.isArray,s=T.isArrayOrTypedArray;function t(c,b,g,d,m,x){x=x||[];for(var y=Object.keys(c),k=0;k<y.length;k++){var f=y[k];if(f!=="transforms"){var S=x.slice();S.push(f);var M=c[f],E=b[f],O=o(g,f),P=(O||{}).valType,I=P==="info_array",z=P==="colorscale",U=(O||{}).items;if(l(g,f))if(v(M)&&v(E)&&P!=="any")t(M,E,O,d,m,S);else if(I&&h(M)){M.length>E.length&&d.push(r("unused",m,S.concat(E.length)));var R,j,Z,F,V,H=E.length,te=Array.isArray(U);if(te&&(H=Math.min(H,U.length)),O.dimensions===2)for(j=0;j<H;j++)if(h(M[j])){M[j].length>E[j].length&&d.push(r("unused",m,S.concat(j,E[j].length)));var $=E[j].length;for(R=0;R<(te?Math.min($,U[j].length):$);R++)Z=te?U[j][R]:U,F=M[j][R],V=E[j][R],T.validate(F,Z)?V!==F&&V!==+F&&d.push(r("dynamic",m,S.concat(j,R),F,V)):d.push(r("value",m,S.concat(j,R),F))}else d.push(r("array",m,S.concat(j),M[j]));else for(j=0;j<H;j++)Z=te?U[j]:U,F=M[j],V=E[j],T.validate(F,Z)?V!==F&&V!==+F&&d.push(r("dynamic",m,S.concat(j),F,V)):d.push(r("value",m,S.concat(j),F))}else if(O.items&&!I&&h(M)){var J,X,K=U[Object.keys(U)[0]],ee=[];for(J=0;J<E.length;J++){var ie=E[J]._index||J;if((X=S.slice()).push(ie),v(M[ie])&&v(E[J])){ee.push(ie);var ae=M[ie],oe=E[J];v(ae)&&ae.visible!==!1&&oe.visible===!1?d.push(r("invisible",m,X)):t(ae,oe,K,d,m,X)}}for(J=0;J<M.length;J++)(X=S.slice()).push(J),v(M[J])?ee.indexOf(J)===-1&&d.push(r("unused",m,X)):d.push(r("object",m,X,M[J]))}else!v(M)&&v(E)?d.push(r("object",m,S,M)):s(M)||!s(E)||I||z?f in b?T.validate(M,O)?O.valType==="enumerated"&&(O.coerceNumber&&M!==+E||M!==E)&&d.push(r("dynamic",m,S,M,E)):d.push(r("value",m,S,M)):d.push(r("unused",m,S,M)):d.push(r("array",m,S,M));else d.push(r("schema",m,S))}}return d}N.exports=function(c,b){c===void 0&&(c=[]),b===void 0&&(b={});var g,d,m=i.get(),x=[],y={_context:T.extendFlat({},_)};h(c)?(y.data=T.extendDeep([],c),g=c):(y.data=[],g=[],x.push(r("array","data"))),v(b)?(y.layout=T.extendDeep({},b),d=b):(y.layout={},d={},arguments.length>1&&x.push(r("object","layout"))),w.supplyDefaults(y);for(var k=y._fullData,f=g.length,S=0;S<f;S++){var M=g[S],E=["data",S];if(v(M)){var O=k[S],P=O.type,I=m.traces[P].attributes;I.type={valType:"enumerated",values:[P]},O.visible===!1&&M.visible!==!1&&x.push(r("invisible",E)),t(M,O,I,x,E);var z=M.transforms,U=O.transforms;if(z){h(z)||x.push(r("array",E,["transforms"])),E.push("transforms");for(var R=0;R<z.length;R++){var j=["transforms",R],Z=z[R].type;if(v(z[R])){var F=m.transforms[Z]?m.transforms[Z].attributes:{};F.type={valType:"enumerated",values:Object.keys(m.transforms)},t(z[R],U[R],F,x,E,j)}else x.push(r("object",E,j))}}}else x.push(r("object",E))}var V=y._fullLayout,H=function(te,$){for(var J=te.layout.layoutAttributes,X=0;X<$.length;X++){var K=$[X],ee=te.traces[K.type],ie=ee.layoutAttributes;ie&&(K.subplot?T.extendFlat(J[ee.attributes.subplot.dflt],ie):T.extendFlat(J,ie))}return J}(m,k);return t(d,V,H,x,"layout"),x.length===0?void 0:x};var a={object:function(c,b){return(c==="layout"&&b===""?"The layout argument":c[0]==="data"&&b===""?"Trace "+c[1]+" in the data argument":n(c)+"key "+b)+" must be linked to an object container"},array:function(c,b){return(c==="data"?"The data argument":n(c)+"key "+b)+" must be linked to an array container"},schema:function(c,b){return n(c)+"key "+b+" is not part of the schema"},unused:function(c,b,g){var d=v(g)?"container":"key";return n(c)+d+" "+b+" did not get coerced"},dynamic:function(c,b,g,d){return[n(c)+"key",b,"(set to '"+g+"')","got reset to","'"+d+"'","during defaults."].join(" ")},invisible:function(c,b){return(b?n(c)+"item "+b:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,b,g){return[n(c)+"key "+b,"is set to an invalid value ("+g+")"].join(" ")}};function n(c){return h(c)?"In data trace "+c[1]+", ":"In "+c+", "}function r(c,b,g,d,m){var x,y;g=g||"",h(b)?(x=b[0],y=b[1]):(x=b,y=null);var k=function(S){if(!h(S))return String(S);for(var M="",E=0;E<S.length;E++){var O=S[E];typeof O=="number"?M=M.substr(0,M.length-1)+"["+O+"]":M+=O,E<S.length-1&&(M+=".")}return M}(g),f=a[c](b,k,d,m);return T.log(f),{code:c,container:x,trace:y,path:g,astr:k,msg:f}}function l(c,b){var g=p(b),d=g.keyMinusId,m=g.id;return!!(d in c&&c[d]._isSubplotObj&&m)||b in c}function o(c,b){return b in c?c[b]:c[p(b).keyMinusId]}var u=T.counterRegex("([a-z]+)");function p(c){var b=c.match(u);return{keyMinusId:b&&b[1],id:b&&b[2]}}},85594:function(N){N.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(N,L,e){var T=e(71828),w=e(44467);N.exports=function(i,_,v){var h,s,t=v.name,a=v.inclusionAttr||"visible",n=_[t],r=T.isArrayOrTypedArray(i[t])?i[t]:[],l=_[t]=[],o=w.arrayTemplater(_,t,a);for(h=0;h<r.length;h++){var u=r[h];T.isPlainObject(u)?s=o.newItem(u):(s=o.newItem({}))[a]=!1,s._index=h,s[a]!==!1&&v.handleItemDefaults(u,s,_,v),l.push(s)}var p=o.defaultItems();for(h=0;h<p.length;h++)(s=p[h])._index=l.length,v.handleItemDefaults({},s,_,v,{}),l.push(s);if(T.isArrayOrTypedArray(n)){var c=Math.min(n.length,l.length);for(h=0;h<c;h++)T.relinkPrivateKeys(l[h],n[h])}return l}},9012:function(N,L,e){var T=e(41940),w=e(77914);N.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:T({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:w.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(N,L,e){var T=e(92770),w=e(71828),i=w.dateTime2ms,_=w.incrementMonth,v=e(50606).ONEAVGMONTH;N.exports=function(h,s,t,a){if(s.type!=="date")return{vals:a};var n=h[t+"periodalignment"];if(!n)return{vals:a};var r,l=h[t+"period"];if(T(l)){if((l=+l)<=0)return{vals:a}}else if(typeof l=="string"&&l.charAt(0)==="M"){var o=+l.substring(1);if(!(o>0&&Math.round(o)===o))return{vals:a};r=o}for(var u=s.calendar,p=n==="start",c=n==="end",b=h[t+"period0"],g=i(b,u)||0,d=[],m=[],x=[],y=a.length,k=0;k<y;k++){var f,S,M,E=a[k];if(r){for(f=Math.round((E-g)/(r*v)),M=_(g,r*f,u);M>E;)M=_(M,-r,u);for(;M<=E;)M=_(M,r,u);S=_(M,-r,u)}else{for(M=g+(f=Math.round((E-g)/l))*l;M>E;)M-=l;for(;M<=E;)M+=l;S=M-l}d[k]=p?S:c?M:(S+M)/2,m[k]=S,x[k]=M}return{vals:d,starts:m,ends:x}}},89502:function(N){N.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(N,L,e){var T=e(39898),w=e(92770),i=e(71828),_=e(50606).FP_SAFE,v=e(73972),h=e(91424),s=e(41675),t=s.getFromId,a=s.isLinked;function n(k,f){var S,M,E=[],O=k._fullLayout,P=l(O,f,0),I=l(O,f,1),z=u(k,f),U=z.min,R=z.max;if(U.length===0||R.length===0)return i.simpleMap(f.range,f.r2l);var j=U[0].val,Z=R[0].val;for(S=1;S<U.length&&j===Z;S++)j=Math.min(j,U[S].val);for(S=1;S<R.length&&j===Z;S++)Z=Math.max(Z,R[S].val);var F=f.autorange,V=F==="reversed"||F==="min reversed"||F==="max reversed";if(!V&&f.range){var H=i.simpleMap(f.range,f.r2l);V=H[1]<H[0]}f.autorange==="reversed"&&(f.autorange=!0);var te,$,J,X,K,ee,ie=f.rangemode,ae=ie==="tozero",oe=ie==="nonnegative",fe=f._length,ge=fe/10,ve=0;for(S=0;S<U.length;S++)for(te=U[S],M=0;M<R.length;M++)(ee=($=R[M]).val-te.val-r(f,te.val,$.val))>0&&((K=fe-P(te)-I($))>ge?ee/K>ve&&(J=te,X=$,ve=ee/K):ee/fe>ve&&(J={val:te.val,nopad:1},X={val:$.val,nopad:1},ve=ee/fe));if(j===Z){var xe=j-1,_e=j+1;if(ae)if(j===0)E=[0,1];else{var ye=(j>0?R:U).reduce(function(ke,Te){return Math.max(ke,I(Te))},0),Ce=j/(1-Math.min(.5,ye/fe));E=j>0?[0,Ce]:[Ce,0]}else E=oe?[Math.max(0,xe),Math.max(1,_e)]:[xe,_e]}else ae?(J.val>=0&&(J={val:0,nopad:1}),X.val<=0&&(X={val:0,nopad:1})):oe&&(J.val-ve*P(J)<0&&(J={val:0,nopad:1}),X.val<=0&&(X={val:1,nopad:1})),ve=(X.val-J.val-r(f,te.val,$.val))/(fe-P(J)-I(X)),E=[J.val-ve*P(J),X.val+ve*I(X)];return E=y(E,f),f.limitRange&&f.limitRange(),V&&E.reverse(),i.simpleMap(E,f.l2r||Number)}function r(k,f,S){var M=0;if(k.rangebreaks)for(var E=k.locateBreaks(f,S),O=0;O<E.length;O++){var P=E[O];M+=P.max-P.min}return M}function l(k,f,S){var M=.05*f._length,E=f._anchorAxis||{};if((f.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var O=f.isReversed();if(!O){var P=i.simpleMap(f.range,f.r2l);O=P[1]<P[0]}O&&(S=!S)}var I=0;return a(k,f._id)||(I=function(z,U,R){var j=0,Z=U._id.charAt(0)==="x";for(var F in z._plots){var V=z._plots[F];if(U._id===V.xaxis._id||U._id===V.yaxis._id){var H=(Z?V.yaxis:V.xaxis)||{};if((H.ticklabelposition||"").indexOf("inside")!==-1&&(!R&&(H.side==="left"||H.side==="bottom")||R&&(H.side==="top"||H.side==="right"))){if(H._vals){var te=i.deg2rad(H._tickAngles[H._id+"tick"]||0),$=Math.abs(Math.cos(te)),J=Math.abs(Math.sin(te));if(!H._vals[0].bb){var X=H._id+"tick";H._selections[X].each(function(oe){var fe=T.select(this);fe.select(".text-math-group").empty()&&(oe.bb=h.bBox(fe.node()))})}for(var K=0;K<H._vals.length;K++){var ee=H._vals[K].bb;if(ee){var ie=2*o+ee.width,ae=2*o+ee.height;j=Math.max(j,Z?Math.max(ie*$,ae*J):Math.max(ae*$,ie*J))}}}H.ticks==="inside"&&H.ticklabelposition==="inside"&&(j+=H.ticklen||0)}}}return j}(k,f,S)),M=Math.max(I,M),f.constrain==="domain"&&f._inputDomain&&(M*=(f._inputDomain[1]-f._inputDomain[0])/(f.domain[1]-f.domain[0])),function(z){return z.nopad?0:z.pad+(z.extrapad?M:I)}}N.exports={applyAutorangeOptions:y,getAutoRange:n,makePadFn:l,doAutoRange:function(k,f,S){if(f.setScale(),f.autorange){f.range=S?S.slice():n(k,f),f._r=f.range.slice(),f._rl=i.simpleMap(f._r,f.r2l);var M=f._input,E={};E[f._attr+".range"]=f.range,E[f._attr+".autorange"]=f.autorange,v.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,E),M.range=f.range.slice(),M.autorange=f.autorange}var O=f._anchorAxis;if(O&&O.rangeslider){var P=O.rangeslider[f._name];P&&P.rangemode==="auto"&&(P.range=n(k,f)),O._input.rangeslider[f._name]=i.extendFlat({},P)}},findExtremes:function(k,f,S){S||(S={}),k._m||k.setScale();var M,E,O,P,I,z,U,R,j,Z=[],F=[],V=f.length,H=S.padded||!1,te=S.tozero&&(k.type==="linear"||k.type==="-"),$=k.type==="log",J=!1,X=S.vpadLinearized||!1;function K(xe){if(Array.isArray(xe))return J=!0,function(ye){return Math.max(Number(xe[ye]||0),0)};var _e=Math.max(Number(xe||0),0);return function(){return _e}}var ee=K((k._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),ie=K((k._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),ae=K(S.vpadplus||S.vpad),oe=K(S.vpadminus||S.vpad);if(!J){if(R=1/0,j=-1/0,$)for(M=0;M<V;M++)(E=f[M])<R&&E>0&&(R=E),E>j&&E<_&&(j=E);else for(M=0;M<V;M++)(E=f[M])<R&&E>-_&&(R=E),E>j&&E<_&&(j=E);f=[R,j],V=2}var fe={tozero:te,extrapad:H};function ge(xe){O=f[xe],w(O)&&(z=ee(xe),U=ie(xe),X?(P=k.c2l(O)-oe(xe),I=k.c2l(O)+ae(xe)):(R=O-oe(xe),j=O+ae(xe),$&&R<j/10&&(R=j/10),P=k.c2l(R),I=k.c2l(j)),te&&(P=Math.min(0,P),I=Math.max(0,I)),g(P)&&p(Z,P,U,fe),g(I)&&c(F,I,z,fe))}var ve=Math.min(6,V);for(M=0;M<ve;M++)ge(M);for(M=V-1;M>=ve;M--)ge(M);return{min:Z,max:F,opts:S}},concatExtremes:u};var o=3;function u(k,f,S){var M,E,O,P=f._id,I=k._fullData,z=k._fullLayout,U=[],R=[];function j(te,$){for(M=0;M<$.length;M++){var J=te[$[M]],X=(J._extremes||{})[P];if(J.visible===!0&&X){for(E=0;E<X.min.length;E++)O=X.min[E],p(U,O.val,O.pad,{extrapad:O.extrapad});for(E=0;E<X.max.length;E++)O=X.max[E],c(R,O.val,O.pad,{extrapad:O.extrapad})}}}if(j(I,f._traceIndices),j(z.annotations||[],f._annIndices||[]),j(z.shapes||[],f._shapeIndices||[]),f._matchGroup&&!S){for(var Z in f._matchGroup)if(Z!==f._id){var F=t(k,Z),V=u(k,F,!0),H=f._length/F._length;for(E=0;E<V.min.length;E++)O=V.min[E],p(U,O.val,O.pad*H,{extrapad:O.extrapad});for(E=0;E<V.max.length;E++)O=V.max[E],c(R,O.val,O.pad*H,{extrapad:O.extrapad})}}return{min:U,max:R}}function p(k,f,S,M){b(k,f,S,M,d)}function c(k,f,S,M){b(k,f,S,M,m)}function b(k,f,S,M,E){for(var O=M.tozero,P=M.extrapad,I=!0,z=0;z<k.length&&I;z++){var U=k[z];if(E(U.val,f)&&U.pad>=S&&(U.extrapad||!P)){I=!1;break}E(f,U.val)&&U.pad<=S&&(P||!U.extrapad)&&(k.splice(z,1),z--)}if(I){var R=O&&f===0;k.push({val:f,pad:R?0:S,extrapad:!R&&P})}}function g(k){return w(k)&&Math.abs(k)<_}function d(k,f){return k<=f}function m(k,f){return k>=f}function x(k,f,S){return f===void 0||S===void 0||(f=k.d2l(f))<k.d2l(S)}function y(k,f){if(!f||!f.autorangeoptions)return k;var S=k[0],M=k[1],E=f.autorangeoptions.include;if(E!==void 0){var O=f.d2l(S),P=f.d2l(M);i.isArrayOrTypedArray(E)||(E=[E]);for(var I=0;I<E.length;I++){var z=f.d2l(E[I]);O>=z&&(O=z,S=z),P<=z&&(P=z,M=z)}}return S=function(U,R){var j=R.autorangeoptions;return j&&j.minallowed!==void 0&&x(R,j.minallowed,j.maxallowed)?j.minallowed:j&&j.clipmin!==void 0&&x(R,j.clipmin,j.clipmax)?Math.max(U,R.d2l(j.clipmin)):U}(S,f),M=function(U,R){var j=R.autorangeoptions;return j&&j.maxallowed!==void 0&&x(R,j.minallowed,j.maxallowed)?j.maxallowed:j&&j.clipmax!==void 0&&x(R,j.clipmin,j.clipmax)?Math.min(U,R.d2l(j.clipmax)):U}(M,f),[S,M]}},23074:function(N){N.exports=function(L,e,T){var w,i;if(T){var _=e==="reversed"||e==="min reversed"||e==="max reversed";w=T[_?1:0],i=T[_?0:1]}var v=L("autorangeoptions.minallowed",i===null?w:void 0),h=L("autorangeoptions.maxallowed",w===null?i:void 0);v===void 0&&L("autorangeoptions.clipmin"),h===void 0&&L("autorangeoptions.clipmax"),L("autorangeoptions.include")}},89298:function(N,L,e){var T=e(39898),w=e(92770),i=e(74875),_=e(73972),v=e(71828),h=v.strTranslate,s=e(63893),t=e(92998),a=e(7901),n=e(91424),r=e(13838),l=e(66287),o=e(50606),u=o.ONEMAXYEAR,p=o.ONEAVGYEAR,c=o.ONEMINYEAR,b=o.ONEMAXQUARTER,g=o.ONEAVGQUARTER,d=o.ONEMINQUARTER,m=o.ONEMAXMONTH,x=o.ONEAVGMONTH,y=o.ONEMINMONTH,k=o.ONEWEEK,f=o.ONEDAY,S=f/2,M=o.ONEHOUR,E=o.ONEMIN,O=o.ONESEC,P=o.MINUS_SIGN,I=o.BADNUM,z={K:"zeroline"},U={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},j={K:"tick",L:"path"},Z={K:"tick",L:"text"},F={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},V=e(18783),H=V.MID_SHIFT,te=V.CAP_SHIFT,$=V.LINE_SPACING,J=V.OPPOSITE_SIDE,X=N.exports={};X.setConvert=e(21994);var K=e(4322),ee=e(41675),ie=ee.idSort,ae=ee.isLinked;X.id2name=ee.id2name,X.name2id=ee.name2id,X.cleanId=ee.cleanId,X.list=ee.list,X.listIds=ee.listIds,X.getFromId=ee.getFromId,X.getFromTrace=ee.getFromTrace;var oe=e(71739);X.getAutoRange=oe.getAutoRange,X.findExtremes=oe.findExtremes;var fe=1e-4;function ge(je){var Ue=(je[1]-je[0])*fe;return[je[0]-Ue,je[1]+Ue]}X.coerceRef=function(je,Ue,at,$e,gt,yt){var xt=$e.charAt($e.length-1),dt=at._fullLayout._subplots[xt+"axis"],Lt=$e+"ref",Tt={};return gt||(gt=dt[0]||(typeof yt=="string"?yt:yt[0])),yt||(yt=gt),dt=dt.concat(dt.map(function(bt){return bt+" domain"})),Tt[Lt]={valType:"enumerated",values:dt.concat(yt?typeof yt=="string"?[yt]:yt:[]),dflt:gt},v.coerce(je,Ue,Tt,Lt)},X.getRefType=function(je){return je===void 0?je:je==="paper"?"paper":je==="pixel"?"pixel":/( domain)$/.test(je)?"domain":"range"},X.coercePosition=function(je,Ue,at,$e,gt,yt){var xt,dt;if(X.getRefType($e)!=="range")xt=v.ensureNumber,dt=at(gt,yt);else{var Lt=X.getFromId(Ue,$e);dt=at(gt,yt=Lt.fraction2r(yt)),xt=Lt.cleanPos}je[gt]=xt(dt)},X.cleanPosition=function(je,Ue,at){return(at==="paper"||at==="pixel"?v.ensureNumber:X.getFromId(Ue,at).cleanPos)(je)},X.redrawComponents=function(je,Ue){Ue=Ue||X.listIds(je);var at=je._fullLayout;function $e(gt,yt,xt,dt){for(var Lt=_.getComponentMethod(gt,yt),Tt={},bt=0;bt<Ue.length;bt++)for(var Ct=at[X.id2name(Ue[bt])][xt],Dt=0;Dt<Ct.length;Dt++){var Bt=Ct[Dt];if(!Tt[Bt]&&(Lt(je,Bt),Tt[Bt]=1,dt))return}}$e("annotations","drawOne","_annIndices"),$e("shapes","drawOne","_shapeIndices"),$e("images","draw","_imgIndices",!0),$e("selections","drawOne","_selectionIndices")};var ve=X.getDataConversions=function(je,Ue,at,$e){var gt,yt=at==="x"||at==="y"||at==="z"?at:$e;if(v.isArrayOrTypedArray(yt)){if(gt={type:K($e,void 0,{autotypenumbers:je._fullLayout.autotypenumbers}),_categories:[]},X.setConvert(gt),gt.type==="category")for(var xt=0;xt<$e.length;xt++)gt.d2c($e[xt])}else gt=X.getFromTrace(je,Ue,yt);return gt?{d2c:gt.d2c,c2d:gt.c2d}:yt==="ids"?{d2c:_e,c2d:_e}:{d2c:xe,c2d:xe}};function xe(je){return+je}function _e(je){return String(je)}function ye(je,Ue){return Math.abs((je/Ue+.5)%1-.5)<.001}function Ce(je,Ue){return Math.abs(je/Ue-1)<.001}function ke(je){return+je.substring(1)}function Te(je,Ue){return je.rangebreaks&&(Ue=Ue.filter(function(at){return je.maskBreaks(at.x)!==I})),Ue}function le(je){var Ue=je._mainAxis,at=[];if(Ue._vals){for(var $e=0;$e<Ue._vals.length;$e++)if(!Ue._vals[$e].noTick){var gt=Ue.l2p(Ue._vals[$e].x),yt=je.p2l(gt),xt=X.tickText(je,yt);Ue._vals[$e].minor&&(xt.minor=!0,xt.text=""),at.push(xt)}}return Te(je,at)}function ue(je,Ue){var at=ge(v.simpleMap(je.range,je.r2l)),$e=Math.min(at[0],at[1]),gt=Math.max(at[0],at[1]),yt=je.type==="category"?je.d2l_noadd:je.d2l;je.type==="log"&&String(je.dtick).charAt(0)!=="L"&&(je.dtick="L"+Math.pow(10,Math.floor(Math.min(je.range[0],je.range[1]))-1));for(var xt=[],dt=0;dt<=1;dt++)if((Ue===void 0||!(Ue&&dt||Ue===!1&&!dt))&&(!dt||je.minor)){var Lt=dt?je.minor.tickvals:je.tickvals,Tt=dt?[]:je.ticktext;if(Lt){v.isArrayOrTypedArray(Tt)||(Tt=[]);for(var bt=0;bt<Lt.length;bt++){var Ct=yt(Lt[bt]);if(Ct>$e&&Ct<gt){var Dt=Tt[bt]===void 0?X.tickText(je,Ct):De(je,Ct,String(Tt[bt]));dt&&(Dt.minor=!0,Dt.text=""),xt.push(Dt)}}}}return Te(je,xt)}X.getDataToCoordFunc=function(je,Ue,at,$e){return ve(je,Ue,at,$e).d2c},X.counterLetter=function(je){var Ue=je.charAt(0);return Ue==="x"?"y":Ue==="y"?"x":void 0},X.minDtick=function(je,Ue,at,$e){["log","category","multicategory"].indexOf(je.type)===-1&&$e?je._minDtick===void 0?(je._minDtick=Ue,je._forceTick0=at):je._minDtick&&((je._minDtick/Ue+1e-6)%1<2e-6&&((at-je._forceTick0)/Ue%1+1.000001)%1<2e-6?(je._minDtick=Ue,je._forceTick0=at):((Ue/je._minDtick+1e-6)%1>2e-6||((at-je._forceTick0)/je._minDtick%1+1.000001)%1>2e-6)&&(je._minDtick=0)):je._minDtick=0},X.saveRangeInitial=function(je,Ue){for(var at=X.list(je,"",!0),$e=!1,gt=0;gt<at.length;gt++){var yt=at[gt],xt=yt._rangeInitial0===void 0&&yt._rangeInitial1===void 0,dt=xt||yt.range[0]!==yt._rangeInitial0||yt.range[1]!==yt._rangeInitial1,Lt=yt.autorange;(xt&&Lt!==!0||Ue&&dt)&&(yt._rangeInitial0=Lt==="min"||Lt==="max reversed"?void 0:yt.range[0],yt._rangeInitial1=Lt==="max"||Lt==="min reversed"?void 0:yt.range[1],yt._autorangeInitial=Lt,$e=!0)}return $e},X.saveShowSpikeInitial=function(je,Ue){for(var at=X.list(je,"",!0),$e=!1,gt="on",yt=0;yt<at.length;yt++){var xt=at[yt],dt=xt._showSpikeInitial===void 0,Lt=dt||xt.showspikes!==xt._showspikes;(dt||Ue&&Lt)&&(xt._showSpikeInitial=xt.showspikes,$e=!0),gt!=="on"||xt.showspikes||(gt="off")}return je._fullLayout._cartesianSpikesEnabled=gt,$e},X.autoBin=function(je,Ue,at,$e,gt,yt){var xt,dt=v.aggNums(Math.min,null,je),Lt=v.aggNums(Math.max,null,je);if(Ue.type==="category"||Ue.type==="multicategory")return{start:dt-.5,end:Lt+.5,size:Math.max(1,Math.round(yt)||1),_dataSpan:Lt-dt};if(gt||(gt=Ue.calendar),xt=Ue.type==="log"?{type:"linear",range:[dt,Lt]}:{type:Ue.type,range:v.simpleMap([dt,Lt],Ue.c2r,0,gt),calendar:gt},X.setConvert(xt),yt=yt&&l.dtick(yt,xt.type))xt.dtick=yt,xt.tick0=l.tick0(void 0,xt.type,gt);else{var Tt;if(at)Tt=(Lt-dt)/at;else{var bt=v.distinctVals(je),Ct=Math.pow(10,Math.floor(Math.log(bt.minDiff)/Math.LN10)),Dt=Ct*v.roundUp(bt.minDiff/Ct,[.9,1.9,4.9,9.9],!0);Tt=Math.max(Dt,2*v.stdev(je)/Math.pow(je.length,$e?.25:.4)),w(Tt)||(Tt=1)}X.autoTicks(xt,Tt)}var Bt,Xt=xt.dtick,an=X.tickIncrement(X.tickFirst(xt),Xt,"reverse",gt);if(typeof Xt=="number")an=function(Wt,Vt,on,Sn,Ln){var fn=0,Zt=0,ln=0,nn=0;function cn(Cn){return(1+100*(Cn-Wt)/on.dtick)%100<2}for(var kn=0;kn<Vt.length;kn++)Vt[kn]%1==0?ln++:w(Vt[kn])||nn++,cn(Vt[kn])&&fn++,cn(Vt[kn]+on.dtick/2)&&Zt++;var An=Vt.length-nn;if(ln===An&&on.type!=="date")on.dtick<1?Wt=Sn-.5*on.dtick:(Wt-=.5)+on.dtick<Sn&&(Wt+=on.dtick);else if(Zt<.1*An&&(fn>.3*An||cn(Sn)||cn(Ln))){var wn=on.dtick/2;Wt+=Wt+wn<Sn?wn:-wn}return Wt}(an,je,xt,dt,Lt),Bt=an+(1+Math.floor((Lt-an)/Xt))*Xt;else for(xt.dtick.charAt(0)==="M"&&(an=function(Wt,Vt,on,Sn,Ln){var fn=v.findExactDates(Vt,Ln);if(fn.exactDays>.8){var Zt=Number(on.substr(1));fn.exactYears>.8&&Zt%12==0?Wt=X.tickIncrement(Wt,"M6","reverse")+1.5*f:fn.exactMonths>.8?Wt=X.tickIncrement(Wt,"M1","reverse")+15.5*f:Wt-=S;var ln=X.tickIncrement(Wt,on);if(ln<=Sn)return ln}return Wt}(an,je,Xt,dt,gt)),Bt=an;Bt<=Lt;)Bt=X.tickIncrement(Bt,Xt,!1,gt);return{start:Ue.c2r(an,0,gt),end:Ue.c2r(Bt,0,gt),size:Xt,_dataSpan:Lt-dt}},X.prepMinorTicks=function(je,Ue,at){if(!Ue.minor.dtick){delete je.dtick;var $e,gt=Ue.dtick&&w(Ue._tmin);if(gt){var yt=X.tickIncrement(Ue._tmin,Ue.dtick,!0);$e=[Ue._tmin,.99*yt+.01*Ue._tmin]}else{var xt=v.simpleMap(Ue.range,Ue.r2l);$e=[xt[0],.8*xt[0]+.2*xt[1]]}if(je.range=v.simpleMap($e,Ue.l2r),je._isMinor=!0,X.prepTicks(je,at),gt){var dt=w(Ue.dtick),Lt=w(je.dtick),Tt=dt?Ue.dtick:+Ue.dtick.substring(1),bt=Lt?je.dtick:+je.dtick.substring(1);dt&&Lt?ye(Tt,bt)?Tt===2*k&&bt===2*f&&(je.dtick=k):Tt===2*k&&bt===3*f?je.dtick=k:Tt!==k||(Ue._input.minor||{}).nticks?Ce(Tt/bt,2.5)?je.dtick=Tt/2:je.dtick=Tt:je.dtick=f:String(Ue.dtick).charAt(0)==="M"?Lt?je.dtick="M1":ye(Tt,bt)?Tt>=12&&bt===2&&(je.dtick="M3"):je.dtick=Ue.dtick:String(je.dtick).charAt(0)==="L"?String(Ue.dtick).charAt(0)==="L"?ye(Tt,bt)||(je.dtick=Ce(Tt/bt,2.5)?Ue.dtick/2:Ue.dtick):je.dtick="D1":je.dtick==="D2"&&+Ue.dtick>1&&(je.dtick=1)}je.range=Ue.range}Ue.minor._tick0Init===void 0&&(je.tick0=Ue.tick0)},X.prepTicks=function(je,Ue){var at=v.simpleMap(je.range,je.r2l,void 0,void 0,Ue);if(je.tickmode==="auto"||!je.dtick){var $e,gt=je.nticks;gt||(je.type==="category"||je.type==="multicategory"?($e=je.tickfont?v.bigFont(je.tickfont.size||12):15,gt=je._length/$e):($e=je._id.charAt(0)==="y"?40:80,gt=v.constrain(je._length/$e,4,9)+1),je._name==="radialaxis"&&(gt*=2)),je.minor&&je.minor.tickmode!=="array"||je.tickmode==="array"&&(gt*=100),je._roughDTick=Math.abs(at[1]-at[0])/gt,X.autoTicks(je,je._roughDTick),je._minDtick>0&&je.dtick<2*je._minDtick&&(je.dtick=je._minDtick,je.tick0=je.l2r(je._forceTick0))}je.ticklabelmode==="period"&&function(yt){var xt;function dt(){return!(w(yt.dtick)||yt.dtick.charAt(0)!=="M")}var Lt=dt(),Tt=X.getTickFormat(yt);if(Tt){var bt=yt._dtickInit!==yt.dtick;/%[fLQsSMX]/.test(Tt)||(/%[HI]/.test(Tt)?(xt=M,bt&&!Lt&&yt.dtick<M&&(yt.dtick=M)):/%p/.test(Tt)?(xt=S,bt&&!Lt&&yt.dtick<S&&(yt.dtick=S)):/%[Aadejuwx]/.test(Tt)?(xt=f,bt&&!Lt&&yt.dtick<f&&(yt.dtick=f)):/%[UVW]/.test(Tt)?(xt=k,bt&&!Lt&&yt.dtick<k&&(yt.dtick=k)):/%[Bbm]/.test(Tt)?(xt=x,bt&&(Lt?ke(yt.dtick)<1:yt.dtick<y)&&(yt.dtick="M1")):/%[q]/.test(Tt)?(xt=g,bt&&(Lt?ke(yt.dtick)<3:yt.dtick<d)&&(yt.dtick="M3")):/%[Yy]/.test(Tt)&&(xt=p,bt&&(Lt?ke(yt.dtick)<12:yt.dtick<c)&&(yt.dtick="M12")))}(Lt=dt())&&yt.tick0===yt._dowTick0&&(yt.tick0=yt._rawTick0),yt._definedDelta=xt}(je),je.tick0||(je.tick0=je.type==="date"?"2000-01-01":0),je.type==="date"&&je.dtick<.1&&(je.dtick=.1),Me(je)},X.calcTicks=function(je,Ue){for(var at,$e,gt=je.type,yt=je.calendar,xt=je.ticklabelstep,dt=je.ticklabelmode==="period",Lt=v.simpleMap(je.range,je.r2l,void 0,void 0,Ue),Tt=Lt[1]<Lt[0],bt=Math.min(Lt[0],Lt[1]),Ct=Math.max(Lt[0],Lt[1]),Dt=Math.max(1e3,je._length||0),Bt=[],Xt=[],an=[],Wt=[],Vt=je.minor&&(je.minor.ticks||je.minor.showgrid),on=1;on>=(Vt?0:1);on--){var Sn=!on;on?(je._dtickInit=je.dtick,je._tick0Init=je.tick0):(je.minor._dtickInit=je.minor.dtick,je.minor._tick0Init=je.minor.tick0);var Ln=on?je:v.extendFlat({},je,je.minor);if(Sn?X.prepMinorTicks(Ln,je,Ue):X.prepTicks(Ln,Ue),Ln.tickmode!=="array")if(Ln.tickmode!=="sync"){var fn=ge(Lt),Zt=fn[0],ln=fn[1],nn=w(Ln.dtick),cn=gt==="log"&&!(nn||Ln.dtick.charAt(0)==="L"),kn=X.tickFirst(Ln,Ue);if(on){if(je._tmin=kn,kn<Zt!==Tt)break;gt!=="category"&&gt!=="multicategory"||(ln=Tt?Math.max(-.5,ln):Math.min(je._categories.length-.5,ln))}var An,wn,Cn=null,_n=kn;on&&(nn?wn=je.dtick:gt==="date"?typeof je.dtick=="string"&&je.dtick.charAt(0)==="M"&&(wn=x*je.dtick.substring(1)):wn=je._roughDTick,An=Math.round((je.r2l(_n)-je.r2l(je.tick0))/wn)-1);var zn=Ln.dtick;for(Ln.rangebreaks&&Ln._tick0Init!==Ln.tick0&&(_n=He(_n,je),Tt||(_n=X.tickIncrement(_n,zn,!Tt,yt))),on&&dt&&(_n=X.tickIncrement(_n,zn,!Tt,yt),An--);Tt?_n>=ln:_n<=ln;_n=X.tickIncrement(_n,zn,Tt,yt)){if(on&&An++,Ln.rangebreaks&&!Tt){if(_n<Zt)continue;if(Ln.maskBreaks(_n)===I&&He(_n,Ln)>=Ct)break}if(an.length>Dt||_n===Cn)break;Cn=_n;var qn={value:_n};on?(cn&&_n!==(0|_n)&&(qn.simpleLabel=!0),xt>1&&An%xt&&(qn.skipLabel=!0),an.push(qn)):(qn.minor=!0,Wt.push(qn))}}else an=[],Bt=le(je);else on?(an=[],Bt=ue(je,!Sn)):(Wt=[],Xt=ue(je,!Sn))}if(Vt&&!(je.minor.ticks==="inside"&&je.ticks==="outside"||je.minor.ticks==="outside"&&je.ticks==="inside")){for(var sr=an.map(function(Rt){return Rt.value}),pr=[],ir=0;ir<Wt.length;ir++){var Jn=Wt[ir],mr=Jn.value;if(sr.indexOf(mr)===-1){for(var qt=!1,tn=0;!qt&&tn<an.length;tn++)1e7+an[tn].value===1e7+mr&&(qt=!0);qt||pr.push(Jn)}}Wt=pr}if(dt&&function(Rt,Kt,rn){for(var xn=0;xn<Rt.length;xn++){var Tn=Rt[xn].value,Pn=xn,pn=xn+1;xn<Rt.length-1?(Pn=xn,pn=xn+1):xn>0?(Pn=xn-1,pn=xn):(Pn=xn,pn=xn);var $t,en=Rt[Pn].value,hn=Rt[pn].value,gn=Math.abs(hn-en),Dn=rn||gn,Fn=0;Dn>=c?Fn=gn>=c&&gn<=u?gn:p:rn===g&&Dn>=d?Fn=gn>=d&&gn<=b?gn:g:Dn>=y?Fn=gn>=y&&gn<=m?gn:x:rn===k&&Dn>=k?Fn=k:Dn>=f?Fn=f:rn===S&&Dn>=S?Fn=S:rn===M&&Dn>=M&&(Fn=M),Fn>=gn&&(Fn=gn,$t=!0);var Zn=Tn+Fn;if(Kt.rangebreaks&&Fn>0){for(var Wn=0,tr=0;tr<84;tr++){var Qn=(tr+.5)/84;Kt.maskBreaks(Tn*(1-Qn)+Qn*Zn)!==I&&Wn++}(Fn*=Wn/84)||(Rt[xn].drop=!0),$t&&gn>k&&(Fn=gn)}(Fn>0||xn===0)&&(Rt[xn].periodX=Tn+Fn/2)}}(an,je,je._definedDelta),je.rangebreaks){var dn=je._id.charAt(0)==="y",vn=1;je.tickmode==="auto"&&(vn=je.tickfont?je.tickfont.size:12);var On=NaN;for(at=an.length-1;at>-1;at--)if(an[at].drop)an.splice(at,1);else{an[at].value=He(an[at].value,je);var Hn=je.c2p(an[at].value);(dn?On>Hn-vn:On<Hn+vn)?an.splice(Tt?at+1:at,1):On=Hn}}Ke(je)&&Math.abs(Lt[1]-Lt[0])===360&&an.pop(),je._tmax=(an[an.length-1]||{}).value,je._prevDateHead="",je._inCalcTicks=!0;var Bn,Vn,nr=function(Rt){Rt.text="",je._prevDateHead=$e};for(an=an.concat(Wt),at=0;at<an.length;at++){var Qt=an[at].minor,bn=an[at].value;Qt?Xt.push({x:bn,minor:!0}):($e=je._prevDateHead,Bn=X.tickText(je,bn,!1,an[at].simpleLabel),(Vn=an[at].periodX)!==void 0&&(Bn.periodX=Vn,(Vn>Ct||Vn<bt)&&(Vn>Ct&&(Bn.periodX=Ct),Vn<bt&&(Bn.periodX=bt),nr(Bn))),an[at].skipLabel&&nr(Bn),Bt.push(Bn))}return Bt=Bt.concat(Xt),je._inCalcTicks=!1,dt&&Bt.length&&(Bt[0].noTick=!0),Bt};var de=[2,5,10],Le=[1,2,3,6,12],we=[1,2,5,10,15,30],Ee=[1,2,3,7,14],Oe=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Fe=[-.301,0,.301,.699,1],pe=[15,30,45,90,180];function be(je,Ue,at){return Ue*v.roundUp(je/Ue,at)}function Me(je){var Ue=je.dtick;if(je._tickexponent=0,w(Ue)||typeof Ue=="string"||(Ue=1),je.type!=="category"&&je.type!=="multicategory"||(je._tickround=null),je.type==="date"){var at=je.r2l(je.tick0),$e=je.l2r(at).replace(/(^-|i)/g,""),gt=$e.length;if(String(Ue).charAt(0)==="M")gt>10||$e.substr(5)!=="01-01"?je._tickround="d":je._tickround=+Ue.substr(1)%12==0?"y":"m";else if(Ue>=f&&gt<=10||Ue>=15*f)je._tickround="d";else if(Ue>=E&&gt<=16||Ue>=M)je._tickround="M";else if(Ue>=O&&gt<=19||Ue>=E)je._tickround="S";else{var yt=je.l2r(at+Ue).replace(/^-/,"").length;je._tickround=Math.max(gt,yt)-20,je._tickround<0&&(je._tickround=4)}}else if(w(Ue)||Ue.charAt(0)==="L"){var xt=je.range.map(je.r2d||Number);w(Ue)||(Ue=Number(Ue.substr(1))),je._tickround=2-Math.floor(Math.log(Ue)/Math.LN10+.01);var dt=Math.max(Math.abs(xt[0]),Math.abs(xt[1])),Lt=Math.floor(Math.log(dt)/Math.LN10+.01),Tt=je.minexponent===void 0?3:je.minexponent;Math.abs(Lt)>Tt&&(Be(je.exponentformat)&&!Ye(Lt)?je._tickexponent=3*Math.round((Lt-1)/3):je._tickexponent=Lt)}else je._tickround=null}function De(je,Ue,at){var $e=je.tickfont||{};return{x:Ue,dx:0,dy:0,text:at||"",fontSize:$e.size,font:$e.family,fontColor:$e.color}}X.autoTicks=function(je,Ue,at){var $e;function gt(Ct){return Math.pow(Ct,Math.floor(Math.log(Ue)/Math.LN10))}if(je.type==="date"){je.tick0=v.dateTick0(je.calendar,0);var yt=2*Ue;if(yt>p)Ue/=p,$e=gt(10),je.dtick="M"+12*be(Ue,$e,de);else if(yt>x)Ue/=x,je.dtick="M"+be(Ue,1,Le);else if(yt>f){if(je.dtick=be(Ue,f,je._hasDayOfWeekBreaks?[1,2,7,14]:Ee),!at){var xt=X.getTickFormat(je),dt=je.ticklabelmode==="period";dt&&(je._rawTick0=je.tick0),/%[uVW]/.test(xt)?je.tick0=v.dateTick0(je.calendar,2):je.tick0=v.dateTick0(je.calendar,1),dt&&(je._dowTick0=je.tick0)}}else yt>M?je.dtick=be(Ue,M,Le):yt>E?je.dtick=be(Ue,E,we):yt>O?je.dtick=be(Ue,O,we):($e=gt(10),je.dtick=be(Ue,$e,de))}else if(je.type==="log"){je.tick0=0;var Lt=v.simpleMap(je.range,je.r2l);if(je._isMinor&&(Ue*=1.5),Ue>.7)je.dtick=Math.ceil(Ue);else if(Math.abs(Lt[1]-Lt[0])<1){var Tt=1.5*Math.abs((Lt[1]-Lt[0])/Ue);Ue=Math.abs(Math.pow(10,Lt[1])-Math.pow(10,Lt[0]))/Tt,$e=gt(10),je.dtick="L"+be(Ue,$e,de)}else je.dtick=Ue>.3?"D2":"D1"}else je.type==="category"||je.type==="multicategory"?(je.tick0=0,je.dtick=Math.ceil(Math.max(Ue,1))):Ke(je)?(je.tick0=0,$e=1,je.dtick=be(Ue,$e,pe)):(je.tick0=0,$e=gt(10),je.dtick=be(Ue,$e,de));if(je.dtick===0&&(je.dtick=1),!w(je.dtick)&&typeof je.dtick!="string"){var bt=je.dtick;throw je.dtick=1,"ax.dtick error: "+String(bt)}},X.tickIncrement=function(je,Ue,at,$e){var gt=at?-1:1;if(w(Ue))return v.increment(je,gt*Ue);var yt=Ue.charAt(0),xt=gt*Number(Ue.substr(1));if(yt==="M")return v.incrementMonth(je,xt,$e);if(yt==="L")return Math.log(Math.pow(10,je)+xt)/Math.LN10;if(yt==="D"){var dt=Ue==="D2"?Fe:Oe,Lt=je+.01*gt,Tt=v.roundUp(v.mod(Lt,1),dt,at);return Math.floor(Lt)+Math.log(T.round(Math.pow(10,Tt),1))/Math.LN10}throw"unrecognized dtick "+String(Ue)},X.tickFirst=function(je,Ue){var at=je.r2l||Number,$e=v.simpleMap(je.range,at,void 0,void 0,Ue),gt=$e[1]<$e[0],yt=gt?Math.floor:Math.ceil,xt=ge($e)[0],dt=je.dtick,Lt=at(je.tick0);if(w(dt)){var Tt=yt((xt-Lt)/dt)*dt+Lt;return je.type!=="category"&&je.type!=="multicategory"||(Tt=v.constrain(Tt,0,je._categories.length-1)),Tt}var bt=dt.charAt(0),Ct=Number(dt.substr(1));if(bt==="M"){for(var Dt,Bt,Xt,an=0,Wt=Lt;an<10;){if(((Dt=X.tickIncrement(Wt,dt,gt,je.calendar))-xt)*(Wt-xt)<=0)return gt?Math.min(Wt,Dt):Math.max(Wt,Dt);Bt=(xt-(Wt+Dt)/2)/(Dt-Wt),Xt=bt+(Math.abs(Math.round(Bt))||1)*Ct,Wt=X.tickIncrement(Wt,Xt,Bt<0?!gt:gt,je.calendar),an++}return v.error("tickFirst did not converge",je),Wt}if(bt==="L")return Math.log(yt((Math.pow(10,xt)-Lt)/Ct)*Ct+Lt)/Math.LN10;if(bt==="D"){var Vt=dt==="D2"?Fe:Oe,on=v.roundUp(v.mod(xt,1),Vt,gt);return Math.floor(xt)+Math.log(T.round(Math.pow(10,on),1))/Math.LN10}throw"unrecognized dtick "+String(dt)},X.tickText=function(je,Ue,at,$e){var gt,yt=De(je,Ue),xt=je.tickmode==="array",dt=at||xt,Lt=je.type,Tt=Lt==="category"?je.d2l_noadd:je.d2l;if(xt&&v.isArrayOrTypedArray(je.ticktext)){var bt=v.simpleMap(je.range,je.r2l),Ct=(Math.abs(bt[1]-bt[0])-(je._lBreaks||0))/1e4;for(gt=0;gt<je.ticktext.length&&!(Math.abs(Ue-Tt(je.tickvals[gt]))<Ct);gt++);if(gt<je.ticktext.length)return yt.text=String(je.ticktext[gt]),yt}function Dt(Wt){if(Wt===void 0)return!0;if(at)return Wt==="none";var Vt={first:je._tmin,last:je._tmax}[Wt];return Wt!=="all"&&Ue!==Vt}var Bt=at?"never":je.exponentformat!=="none"&&Dt(je.showexponent)?"hide":"";if(Lt==="date"?function(Wt,Vt,on,Sn){var Ln=Wt._tickround,fn=on&&Wt.hoverformat||X.getTickFormat(Wt);(Sn=!fn&&Sn)&&(Ln=w(Ln)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Ln]);var Zt,ln=v.formatDate(Vt.x,fn,Ln,Wt._dateFormat,Wt.calendar,Wt._extraFormat),nn=ln.indexOf(`
`);if(nn!==-1&&(Zt=ln.substr(nn+1),ln=ln.substr(0,nn)),Sn&&(Zt===void 0||ln!=="00:00:00"&&ln!=="00:00"?ln.length===8&&(ln=ln.replace(/:00$/,"")):(ln=Zt,Zt="")),Zt)if(on)Ln==="d"?ln+=", "+Zt:ln=Zt+(ln?", "+ln:"");else if(Wt._inCalcTicks&&Wt._prevDateHead===Zt){var cn=Je(Wt),kn=Wt._trueSide||Wt.side;(!cn&&kn==="top"||cn&&kn==="bottom")&&(ln+="<br> ")}else Wt._prevDateHead=Zt,ln+="<br>"+Zt;Vt.text=ln}(je,yt,at,dt):Lt==="log"?function(Wt,Vt,on,Sn,Ln){var fn=Wt.dtick,Zt=Vt.x,ln=Wt.tickformat,nn=typeof fn=="string"&&fn.charAt(0);if(Ln==="never"&&(Ln=""),Sn&&nn!=="L"&&(fn="L3",nn="L"),ln||nn==="L")Vt.text=We(Math.pow(10,Zt),Wt,Ln,Sn);else if(w(fn)||nn==="D"&&v.mod(Zt+.01,1)<.1){var cn=Math.round(Zt),kn=Math.abs(cn),An=Wt.exponentformat;An==="power"||Be(An)&&Ye(cn)?(Vt.text=cn===0?1:cn===1?"10":"10<sup>"+(cn>1?"":P)+kn+"</sup>",Vt.fontSize*=1.25):(An==="e"||An==="E")&&kn>2?Vt.text="1"+An+(cn>0?"+":P)+kn:(Vt.text=We(Math.pow(10,Zt),Wt,"","fakehover"),fn==="D1"&&Wt._id.charAt(0)==="y"&&(Vt.dy-=Vt.fontSize/6))}else{if(nn!=="D")throw"unrecognized dtick "+String(fn);Vt.text=String(Math.round(Math.pow(10,v.mod(Zt,1)))),Vt.fontSize*=.75}if(Wt.dtick==="D1"){var wn=String(Vt.text).charAt(0);wn!=="0"&&wn!=="1"||(Wt._id.charAt(0)==="y"?Vt.dx-=Vt.fontSize/4:(Vt.dy+=Vt.fontSize/2,Vt.dx+=(Wt.range[1]>Wt.range[0]?1:-1)*Vt.fontSize*(Zt<0?.5:.25)))}}(je,yt,0,dt,Bt):Lt==="category"?function(Wt,Vt){var on=Wt._categories[Math.round(Vt.x)];on===void 0&&(on=""),Vt.text=String(on)}(je,yt):Lt==="multicategory"?function(Wt,Vt,on){var Sn=Math.round(Vt.x),Ln=Wt._categories[Sn]||[],fn=Ln[1]===void 0?"":String(Ln[1]),Zt=Ln[0]===void 0?"":String(Ln[0]);on?Vt.text=Zt+" - "+fn:(Vt.text=fn,Vt.text2=Zt)}(je,yt,at):Ke(je)?function(Wt,Vt,on,Sn,Ln){if(Wt.thetaunit!=="radians"||on)Vt.text=We(Vt.x,Wt,Ln,Sn);else{var fn=Vt.x/180;if(fn===0)Vt.text="0";else{var Zt=function(nn){function cn(Cn,_n){return Math.abs(Cn-_n)<=1e-6}var kn=function(Cn){for(var _n=1;!cn(Math.round(Cn*_n)/_n,Cn);)_n*=10;return _n}(nn),An=nn*kn,wn=Math.abs(function Cn(_n,zn){return cn(zn,0)?_n:Cn(zn,_n%zn)}(An,kn));return[Math.round(An/wn),Math.round(kn/wn)]}(fn);if(Zt[1]>=100)Vt.text=We(v.deg2rad(Vt.x),Wt,Ln,Sn);else{var ln=Vt.x<0;Zt[1]===1?Zt[0]===1?Vt.text="":Vt.text=Zt[0]+"":Vt.text=["<sup>",Zt[0],"</sup>","","<sub>",Zt[1],"</sub>",""].join(""),ln&&(Vt.text=P+Vt.text)}}}}(je,yt,at,dt,Bt):function(Wt,Vt,on,Sn,Ln){Ln==="never"?Ln="":Wt.showexponent==="all"&&Math.abs(Vt.x/Wt.dtick)<1e-6&&(Ln="hide"),Vt.text=We(Vt.x,Wt,Ln,Sn)}(je,yt,0,dt,Bt),$e||(je.tickprefix&&!Dt(je.showtickprefix)&&(yt.text=je.tickprefix+yt.text),je.ticksuffix&&!Dt(je.showticksuffix)&&(yt.text+=je.ticksuffix)),je.labelalias&&je.labelalias.hasOwnProperty(yt.text)){var Xt=je.labelalias[yt.text];typeof Xt=="string"&&(yt.text=Xt)}if(je.tickson==="boundaries"||je.showdividers){var an=function(Wt){var Vt=je.l2p(Wt);return Vt>=0&&Vt<=je._length?Wt:null};yt.xbnd=[an(yt.x-.5),an(yt.x+je.dtick-.5)]}return yt},X.hoverLabelText=function(je,Ue,at){at&&(je=v.extendFlat({},je,{hoverformat:at}));var $e=v.isArrayOrTypedArray(Ue)?Ue[0]:Ue,gt=v.isArrayOrTypedArray(Ue)?Ue[1]:void 0;if(gt!==void 0&&gt!==$e)return X.hoverLabelText(je,$e,at)+" - "+X.hoverLabelText(je,gt,at);var yt=je.type==="log"&&$e<=0,xt=X.tickText(je,je.c2l(yt?-$e:$e),"hover").text;return yt?$e===0?"0":P+xt:xt};var Ne=["f","p","n","","m","","k","M","G","T"];function Be(je){return je==="SI"||je==="B"}function Ye(je){return je>14||je<-15}function We(je,Ue,at,$e){var gt=je<0,yt=Ue._tickround,xt=at||Ue.exponentformat||"B",dt=Ue._tickexponent,Lt=X.getTickFormat(Ue),Tt=Ue.separatethousands;if($e){var bt={exponentformat:xt,minexponent:Ue.minexponent,dtick:Ue.showexponent==="none"?Ue.dtick:w(je)&&Math.abs(je)||1,range:Ue.showexponent==="none"?Ue.range.map(Ue.r2d):[0,je||1]};Me(bt),yt=(Number(bt._tickround)||0)+4,dt=bt._tickexponent,Ue.hoverformat&&(Lt=Ue.hoverformat)}if(Lt)return Ue._numFormat(Lt)(je).replace(/-/g,P);var Ct,Dt=Math.pow(10,-yt)/2;if(xt==="none"&&(dt=0),(je=Math.abs(je))<Dt)je="0",gt=!1;else{if(je+=Dt,dt&&(je*=Math.pow(10,-dt),yt+=dt),yt===0)je=String(Math.floor(je));else if(yt<0){je=(je=String(Math.round(je))).substr(0,je.length+yt);for(var Bt=yt;Bt<0;Bt++)je+="0"}else{var Xt=(je=String(je)).indexOf(".")+1;Xt&&(je=je.substr(0,Xt+yt).replace(/\.?0+$/,""))}je=v.numSeparate(je,Ue._separators,Tt)}return dt&&xt!=="hide"&&(Be(xt)&&Ye(dt)&&(xt="power"),Ct=dt<0?P+-dt:xt!=="power"?"+"+dt:String(dt),xt==="e"||xt==="E"?je+=xt+Ct:xt==="power"?je+="10<sup>"+Ct+"</sup>":xt==="B"&&dt===9?je+="B":Be(xt)&&(je+=Ne[dt/3+5])),gt?P+je:je}function et(je,Ue){if(je){var at=Object.keys(F).reduce(function($e,gt){return Ue.indexOf(gt)!==-1&&F[gt].forEach(function(yt){$e[yt]=1}),$e},{});Object.keys(je).forEach(function($e){at[$e]||($e.length===1?je[$e]=0:delete je[$e])})}}function ft(je,Ue){for(var at=[],$e={},gt=0;gt<Ue.length;gt++){var yt=Ue[gt];$e[yt.text2]?$e[yt.text2].push(yt.x):$e[yt.text2]=[yt.x]}for(var xt in $e)at.push(De(je,v.interp($e[xt],.5),xt));return at}function ht(je){return je.periodX!==void 0?je.periodX:je.x}function mt(je){return[je.text,je.x,je.axInfo,je.font,je.fontSize,je.fontColor].join("_")}function Mt(je){var Ue=je.title.font.size,at=(je.title.text.match(s.BR_TAG_ALL)||[]).length;return je.title.hasOwnProperty("standoff")?at?Ue*(te+at*$):Ue*te:at?Ue*(at+1)*$:Ue}function _t(je,Ue){var at=je.l2p(Ue);return at>1&&at<je._length-1}function it(je){var Ue=T.select(je),at=Ue.select(".text-math-group");return at.empty()?Ue.select("text"):at}function st(je){return je._id+".automargin"}function St(je){return st(je)+".mirror"}function zt(je){return je._id+".rangeslider"}function Ft(je,Ue){for(var at=0;at<Ue.length;at++)je.indexOf(Ue[at])===-1&&je.push(Ue[at])}function Pt(je,Ue,at){var $e,gt,yt=[],xt=[],dt=je.layout;for($e=0;$e<Ue.length;$e++)yt.push(X.getFromId(je,Ue[$e]));for($e=0;$e<at.length;$e++)xt.push(X.getFromId(je,at[$e]));var Lt=Object.keys(r),Tt=["anchor","domain","overlaying","position","side","tickangle","editType"],bt=["linear","log"];for($e=0;$e<Lt.length;$e++){var Ct=Lt[$e],Dt=yt[0][Ct],Bt=xt[0][Ct],Xt=!0,an=!1,Wt=!1;if(Ct.charAt(0)!=="_"&&typeof Dt!="function"&&Tt.indexOf(Ct)===-1){for(gt=1;gt<yt.length&&Xt;gt++){var Vt=yt[gt][Ct];Ct==="type"&&bt.indexOf(Dt)!==-1&&bt.indexOf(Vt)!==-1&&Dt!==Vt?an=!0:Vt!==Dt&&(Xt=!1)}for(gt=1;gt<xt.length&&Xt;gt++){var on=xt[gt][Ct];Ct==="type"&&bt.indexOf(Bt)!==-1&&bt.indexOf(on)!==-1&&Bt!==on?Wt=!0:xt[gt][Ct]!==Bt&&(Xt=!1)}Xt&&(an&&(dt[yt[0]._name].type="linear"),Wt&&(dt[xt[0]._name].type="linear"),Xe(dt,Ct,yt,xt,je._fullLayout._dfltTitle))}}for($e=0;$e<je._fullLayout.annotations.length;$e++){var Sn=je._fullLayout.annotations[$e];Ue.indexOf(Sn.xref)!==-1&&at.indexOf(Sn.yref)!==-1&&v.swapAttrs(dt.annotations[$e],["?"])}}function Xe(je,Ue,at,$e,gt){var yt,xt=v.nestedProperty,dt=xt(je[at[0]._name],Ue).get(),Lt=xt(je[$e[0]._name],Ue).get();for(Ue==="title"&&(dt&&dt.text===gt.x&&(dt.text=gt.y),Lt&&Lt.text===gt.y&&(Lt.text=gt.x)),yt=0;yt<at.length;yt++)xt(je,at[yt]._name+"."+Ue).set(Lt);for(yt=0;yt<$e.length;yt++)xt(je,$e[yt]._name+"."+Ue).set(dt)}function Ke(je){return je._id==="angularaxis"}function He(je,Ue){for(var at=Ue._rangebreaks.length,$e=0;$e<at;$e++){var gt=Ue._rangebreaks[$e];if(je>=gt.min&&je<gt.max)return gt.max}return je}function Je(je){return(je.ticklabelposition||"").indexOf("inside")!==-1}function lt(je,Ue){Je(je._anchorAxis||{})&&je._hideCounterAxisInsideTickLabels&&je._hideCounterAxisInsideTickLabels(Ue)}function ot(je,Ue,at,$e){var gt,yt=je.anchor==="free"||je.overlaying!==void 0&&je.overlaying!==!1?je.overlaying:je._id;gt=$e?je.side==="right"?Ue:-Ue:Ue,yt in at||(at[yt]={}),je.side in at[yt]||(at[yt][je.side]=0),at[yt][je.side]+=gt}X.getTickFormat=function(je){var Ue,at,$e,gt,yt,xt,dt,Lt;function Tt(Dt){return typeof Dt!="string"?Dt:Number(Dt.replace("M",""))*x}function bt(Dt,Bt){var Xt=["L","D"];if(typeof Dt==typeof Bt){if(typeof Dt=="number")return Dt-Bt;var an=Xt.indexOf(Dt.charAt(0)),Wt=Xt.indexOf(Bt.charAt(0));return an===Wt?Number(Dt.replace(/(L|D)/g,""))-Number(Bt.replace(/(L|D)/g,"")):an-Wt}return typeof Dt=="number"?1:-1}function Ct(Dt,Bt){var Xt=Bt[0]===null,an=Bt[1]===null,Wt=bt(Dt,Bt[0])>=0,Vt=bt(Dt,Bt[1])<=0;return(Xt||Wt)&&(an||Vt)}if(je.tickformatstops&&je.tickformatstops.length>0)switch(je.type){case"date":case"linear":for(Ue=0;Ue<je.tickformatstops.length;Ue++)if(($e=je.tickformatstops[Ue]).enabled&&(gt=je.dtick,yt=$e.dtickrange,xt=void 0,dt=void 0,Lt=void 0,xt=Tt||function(Dt){return Dt},dt=yt[0],Lt=yt[1],(!dt&&typeof dt!="number"||xt(dt)<=xt(gt))&&(!Lt&&typeof Lt!="number"||xt(Lt)>=xt(gt)))){at=$e;break}break;case"log":for(Ue=0;Ue<je.tickformatstops.length;Ue++)if(($e=je.tickformatstops[Ue]).enabled&&Ct(je.dtick,$e.dtickrange)){at=$e;break}}return at?at.value:je.tickformat},X.getSubplots=function(je,Ue){var at=je._fullLayout._subplots,$e=at.cartesian.concat(at.gl2d||[]),gt=Ue?X.findSubplotsWithAxis($e,Ue):$e;return gt.sort(function(yt,xt){var dt=yt.substr(1).split("y"),Lt=xt.substr(1).split("y");return dt[0]===Lt[0]?+dt[1]-+Lt[1]:+dt[0]-+Lt[0]}),gt},X.findSubplotsWithAxis=function(je,Ue){for(var at=new RegExp(Ue._id.charAt(0)==="x"?"^"+Ue._id+"y":Ue._id+"$"),$e=[],gt=0;gt<je.length;gt++){var yt=je[gt];at.test(yt)&&$e.push(yt)}return $e},X.makeClipPaths=function(je){var Ue=je._fullLayout;if(!Ue._hasOnlyLargeSploms){var at,$e,gt={_offset:0,_length:Ue.width,_id:""},yt={_offset:0,_length:Ue.height,_id:""},xt=X.list(je,"x",!0),dt=X.list(je,"y",!0),Lt=[];for(at=0;at<xt.length;at++)for(Lt.push({x:xt[at],y:yt}),$e=0;$e<dt.length;$e++)at===0&&Lt.push({x:gt,y:dt[$e]}),Lt.push({x:xt[at],y:dt[$e]});var Tt=Ue._clips.selectAll(".axesclip").data(Lt,function(bt){return bt.x._id+bt.y._id});Tt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(bt){return"clip"+Ue._uid+bt.x._id+bt.y._id}).append("rect"),Tt.exit().remove(),Tt.each(function(bt){T.select(this).select("rect").attr({x:bt.x._offset||0,y:bt.y._offset||0,width:bt.x._length||1,height:bt.y._length||1})})}},X.draw=function(je,Ue,at){var $e=je._fullLayout;Ue==="redraw"&&$e._paper.selectAll("g.subplot").each(function(dt){var Lt=dt[0],Tt=$e._plots[Lt];if(Tt){var bt=Tt.xaxis,Ct=Tt.yaxis;Tt.xaxislayer.selectAll("."+bt._id+"tick").remove(),Tt.yaxislayer.selectAll("."+Ct._id+"tick").remove(),Tt.xaxislayer.selectAll("."+bt._id+"tick2").remove(),Tt.yaxislayer.selectAll("."+Ct._id+"tick2").remove(),Tt.xaxislayer.selectAll("."+bt._id+"divider").remove(),Tt.yaxislayer.selectAll("."+Ct._id+"divider").remove(),Tt.minorGridlayer&&Tt.minorGridlayer.selectAll("path").remove(),Tt.gridlayer&&Tt.gridlayer.selectAll("path").remove(),Tt.zerolinelayer&&Tt.zerolinelayer.selectAll("path").remove(),$e._infolayer.select(".g-"+bt._id+"title").remove(),$e._infolayer.select(".g-"+Ct._id+"title").remove()}});var gt=Ue&&Ue!=="redraw"?Ue:X.listIds(je),yt=X.list(je).filter(function(dt){return dt.autoshift}).map(function(dt){return dt.overlaying});gt.map(function(dt){var Lt=X.getFromId(je,dt);if(Lt.tickmode==="sync"&&Lt.overlaying){var Tt=gt.findIndex(function(bt){return bt===Lt.overlaying});Tt>=0&&gt.unshift(gt.splice(Tt,1).shift())}});var xt={false:{left:0,right:0}};return v.syncOrAsync(gt.map(function(dt){return function(){if(dt){var Lt=X.getFromId(je,dt);at||(at={}),at.axShifts=xt,at.overlayingShiftedAx=yt;var Tt=X.drawOne(je,Lt,at);return Lt._shiftPusher&&ot(Lt,Lt._fullDepth||0,xt,!0),Lt._r=Lt.range.slice(),Lt._rl=v.simpleMap(Lt._r,Lt.r2l),Tt}}}))},X.drawOne=function(je,Ue,at){var $e,gt,yt,xt=(at=at||{}).axShifts||{},dt=at.overlayingShiftedAx||[];Ue.setScale();var Lt=je._fullLayout,Tt=Ue._id,bt=Tt.charAt(0),Ct=X.counterLetter(Tt),Dt=Lt._plots[Ue._mainSubplot];if(Dt){if(Ue._shiftPusher=Ue.autoshift||dt.indexOf(Ue._id)!==-1||dt.indexOf(Ue.overlaying)!==-1,Ue._shiftPusher&Ue.anchor==="free"){var Bt=Ue.linewidth/2||0;Ue.ticks==="inside"&&(Bt+=Ue.ticklen),ot(Ue,Bt,xt,!0),ot(Ue,Ue.shift||0,xt,!1)}at.skipTitle===!0&&Ue._shift!==void 0||(Ue._shift=function(pn,$t){return pn.autoshift?$t[pn.overlaying][pn.side]:pn.shift||0}(Ue,xt));var Xt=Dt[bt+"axislayer"],an=Ue._mainLinePosition,Wt=an+=Ue._shift,Vt=Ue._mainMirrorPosition,on=Ue._vals=X.calcTicks(Ue),Sn=[Ue.mirror,Wt,Vt].join("_");for($e=0;$e<on.length;$e++)on[$e].axInfo=Sn;Ue._selections={},Ue._tickAngles&&(Ue._prevTickAngles=Ue._tickAngles),Ue._tickAngles={},Ue._depth=null;var Ln={};if(Ue.visible){var fn,Zt,ln=X.makeTransTickFn(Ue),nn=X.makeTransTickLabelFn(Ue),cn=Ue.ticks==="inside",kn=Ue.ticks==="outside";if(Ue.tickson==="boundaries"){var An=function(pn,$t){var en,hn=[],gn=function(Dn,Fn){var Zn=Dn.xbnd[Fn];Zn!==null&&hn.push(v.extendFlat({},Dn,{x:Zn}))};if($t.length){for(en=0;en<$t.length;en++)gn($t[en],0);gn($t[en-1],1)}return hn}(0,on);Zt=X.clipEnds(Ue,An),fn=cn?Zt:An}else Zt=X.clipEnds(Ue,on),fn=cn&&Ue.ticklabelmode!=="period"?Zt:on;var wn,Cn=Ue._gridVals=Zt,_n=function(pn,$t){var en,hn,gn=[],Dn=$t.length&&$t[$t.length-1].x<$t[0].x,Fn=function(Wn,tr){var Qn=Wn.xbnd[tr];Qn!==null&&gn.push(v.extendFlat({},Wn,{x:Qn}))};if(pn.showdividers&&$t.length){for(en=0;en<$t.length;en++){var Zn=$t[en];Zn.text2!==hn&&Fn(Zn,Dn?1:0),hn=Zn.text2}Fn($t[en-1],Dn?0:1)}return gn}(Ue,on);if(!Lt._hasOnlyLargeSploms){var zn=Ue._subplotsWith,qn={};for($e=0;$e<zn.length;$e++){gt=zn[$e];var sr=(yt=Lt._plots[gt])[Ct+"axis"],pr=sr._mainAxis._id;if(!qn[pr]){qn[pr]=1;var ir=bt==="x"?"M0,"+sr._offset+"v"+sr._length:"M"+sr._offset+",0h"+sr._length;X.drawGrid(je,Ue,{vals:Cn,counterAxis:sr,layer:yt.gridlayer.select("."+Tt),minorLayer:yt.minorGridlayer.select("."+Tt),path:ir,transFn:ln}),X.drawZeroLine(je,Ue,{counterAxis:sr,layer:yt.zerolinelayer,path:ir,transFn:ln})}}}var Jn=X.getTickSigns(Ue),mr=X.getTickSigns(Ue,"minor");if(Ue.ticks||Ue.minor&&Ue.minor.ticks){var qt,tn,dn,vn,On=X.makeTickPath(Ue,Wt,Jn[2]),Hn=X.makeTickPath(Ue,Wt,mr[2],{minor:!0});if(Ue._anchorAxis&&Ue.mirror&&Ue.mirror!==!0?(qt=X.makeTickPath(Ue,Vt,Jn[3]),tn=X.makeTickPath(Ue,Vt,mr[3],{minor:!0}),dn=On+qt,vn=Hn+tn):(qt="",tn="",dn=On,vn=Hn),Ue.showdividers&&kn&&Ue.tickson==="boundaries"){var Bn={};for($e=0;$e<_n.length;$e++)Bn[_n[$e].x]=1;wn=function(pn){return Bn[pn.x]?qt:dn}}else wn=function(pn){return pn.minor?vn:dn}}if(X.drawTicks(je,Ue,{vals:fn,layer:Xt,path:wn,transFn:ln}),Ue.mirror==="allticks"){var Vn=Object.keys(Ue._linepositions||{});for($e=0;$e<Vn.length;$e++){gt=Vn[$e],yt=Lt._plots[gt];var nr=Ue._linepositions[gt]||[],Qt=nr[0],bn=nr[1],Rt=nr[2],Kt=X.makeTickPath(Ue,Qt,Rt?Jn[0]:mr[0],{minor:Rt})+X.makeTickPath(Ue,bn,Rt?Jn[1]:mr[1],{minor:Rt});X.drawTicks(je,Ue,{vals:fn,layer:yt[bt+"axislayer"],path:Kt,transFn:ln})}}var rn=[];if(rn.push(function(){return X.drawLabels(je,Ue,{vals:on,layer:Xt,plotinfo:yt,transFn:nn,labelFns:X.makeLabelFns(Ue,Wt)})}),Ue.type==="multicategory"){var xn={x:2,y:10}[bt];rn.push(function(){var pn={x:"height",y:"width"}[bt],$t=Pn()[pn]+xn+(Ue._tickAngles[Tt+"tick"]?Ue.tickfont.size*$:0);return X.drawLabels(je,Ue,{vals:ft(Ue,on),layer:Xt,cls:Tt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:ln,labelFns:X.makeLabelFns(Ue,Wt+$t*Jn[4])})}),rn.push(function(){return Ue._depth=Jn[4]*(Pn("tick2")[Ue.side]-Wt),function(pn,$t,en){var hn=$t._id+"divider",gn=en.vals,Dn=en.layer.selectAll("path."+hn).data(gn,mt);Dn.exit().remove(),Dn.enter().insert("path",":first-child").classed(hn,1).classed("crisp",1).call(a.stroke,$t.dividercolor).style("stroke-width",n.crispRound(pn,$t.dividerwidth,1)+"px"),Dn.attr("transform",en.transFn).attr("d",en.path)}(je,Ue,{vals:_n,layer:Xt,path:X.makeTickPath(Ue,Wt,Jn[4],{len:Ue._depth}),transFn:ln})})}else Ue.title.hasOwnProperty("standoff")&&rn.push(function(){Ue._depth=Jn[4]*(Pn()[Ue.side]-Wt)});var Tn=_.getComponentMethod("rangeslider","isVisible")(Ue);return at.skipTitle||Tn&&Ue.side==="bottom"||rn.push(function(){return function(pn,$t){var en,hn=pn._fullLayout,gn=$t._id,Dn=gn.charAt(0),Fn=$t.title.font.size;if($t.title.hasOwnProperty("standoff"))en=$t._depth+$t.title.standoff+Mt($t);else{var Zn=Je($t);if($t.type==="multicategory")en=$t._depth;else{var Wn=1.5*Fn;Zn&&(Wn=.5*Fn,$t.ticks==="outside"&&(Wn+=$t.ticklen)),en=10+Wn+($t.linewidth?$t.linewidth-1:0)}Zn||(en+=Dn==="x"?$t.side==="top"?Fn*($t.showticklabels?1:0):Fn*($t.showticklabels?1.5:.5):$t.side==="right"?Fn*($t.showticklabels?1:.5):Fn*($t.showticklabels?.5:0))}var tr,Qn,or,hr,fr=X.getPxPosition(pn,$t);if(Dn==="x"?(Qn=$t._offset+$t._length/2,or=$t.side==="top"?fr-en:fr+en):(or=$t._offset+$t._length/2,Qn=$t.side==="right"?fr+en:fr-en,tr={rotate:"-90",offset:0}),$t.type!=="multicategory"){var xr=$t._selections[$t._id+"tick"];if(hr={selection:xr,side:$t.side},xr&&xr.node()&&xr.node().parentNode){var yr=n.getTranslate(xr.node().parentNode);hr.offsetLeft=yr.x,hr.offsetTop=yr.y}$t.title.hasOwnProperty("standoff")&&(hr.pad=0)}return $t._titleStandoff=en,t.draw(pn,gn+"title",{propContainer:$t,propName:$t._name+".title.text",placeholder:hn._dfltTitle[Dn],avoid:hr,transform:tr,attributes:{x:Qn,y:or,"text-anchor":"middle"}})}(je,Ue)}),rn.push(function(){var pn,$t,en,hn,gn=Ue.side.charAt(0),Dn=J[Ue.side].charAt(0),Fn=X.getPxPosition(je,Ue),Zn=kn?Ue.ticklen:0;(Ue.automargin||Tn||Ue._shiftPusher)&&(Ue.type==="multicategory"?pn=Pn("tick2"):(pn=Pn(),bt==="x"&&gn==="b"&&(Ue._depth=Math.max(pn.width>0?pn.bottom-Fn:0,Zn))));var Wn=0,tr=0;if(Ue._shiftPusher&&(Wn=Math.max(Zn,pn.height>0?gn==="l"?Fn-pn.left:pn.right-Fn:0),Ue.title.text!==Lt._dfltTitle[bt]&&(tr=(Ue._titleStandoff||0)+(Ue._titleScoot||0),gn==="l"&&(tr+=Mt(Ue))),Ue._fullDepth=Math.max(Wn,tr)),Ue.automargin){$t={x:0,y:0,r:0,l:0,t:0,b:0};var Qn=[0,1],or=typeof Ue._shift=="number"?Ue._shift:0;if(bt==="x"){if(gn==="b"?$t[gn]=Ue._depth:($t[gn]=Ue._depth=Math.max(pn.width>0?Fn-pn.top:0,Zn),Qn.reverse()),pn.width>0){var hr=pn.right-(Ue._offset+Ue._length);hr>0&&($t.xr=1,$t.r=hr);var fr=Ue._offset-pn.left;fr>0&&($t.xl=0,$t.l=fr)}}else if(gn==="l"?(Ue._depth=Math.max(pn.height>0?Fn-pn.left:0,Zn),$t[gn]=Ue._depth-or):(Ue._depth=Math.max(pn.height>0?pn.right-Fn:0,Zn),$t[gn]=Ue._depth+or,Qn.reverse()),pn.height>0){var xr=pn.bottom-(Ue._offset+Ue._length);xr>0&&($t.yb=0,$t.b=xr);var yr=Ue._offset-pn.top;yr>0&&($t.yt=1,$t.t=yr)}$t[Ct]=Ue.anchor==="free"?Ue.position:Ue._anchorAxis.domain[Qn[0]],Ue.title.text!==Lt._dfltTitle[bt]&&($t[gn]+=Mt(Ue)+(Ue.title.standoff||0)),Ue.mirror&&Ue.anchor!=="free"&&((en={x:0,y:0,r:0,l:0,t:0,b:0})[Dn]=Ue.linewidth,Ue.mirror&&Ue.mirror!==!0&&(en[Dn]+=Zn),Ue.mirror===!0||Ue.mirror==="ticks"?en[Ct]=Ue._anchorAxis.domain[Qn[1]]:Ue.mirror!=="all"&&Ue.mirror!=="allticks"||(en[Ct]=[Ue._counterDomainMin,Ue._counterDomainMax][Qn[1]]))}Tn&&(hn=_.getComponentMethod("rangeslider","autoMarginOpts")(je,Ue)),typeof Ue.automargin=="string"&&(et($t,Ue.automargin),et(en,Ue.automargin)),i.autoMargin(je,st(Ue),$t),i.autoMargin(je,St(Ue),en),i.autoMargin(je,zt(Ue),hn)}),v.syncOrAsync(rn)}}function Pn(pn){var $t=Tt+(pn||"tick");return Ln[$t]||(Ln[$t]=function(en,hn){var gn,Dn,Fn,Zn;return en._selections[hn].size()?(gn=1/0,Dn=-1/0,Fn=1/0,Zn=-1/0,en._selections[hn].each(function(){var Wn=it(this),tr=n.bBox(Wn.node().parentNode);gn=Math.min(gn,tr.top),Dn=Math.max(Dn,tr.bottom),Fn=Math.min(Fn,tr.left),Zn=Math.max(Zn,tr.right)})):(gn=0,Dn=0,Fn=0,Zn=0),{top:gn,bottom:Dn,left:Fn,right:Zn,height:Dn-gn,width:Zn-Fn}}(Ue,$t)),Ln[$t]}},X.getTickSigns=function(je,Ue){var at=je._id.charAt(0),$e={x:"top",y:"right"}[at],gt=je.side===$e?1:-1,yt=[-1,1,gt,-gt];return(Ue?(je.minor||{}).ticks:je.ticks)!=="inside"==(at==="x")&&(yt=yt.map(function(xt){return-xt})),je.side&&yt.push({l:-1,t:-1,r:1,b:1}[je.side.charAt(0)]),yt},X.makeTransTickFn=function(je){return je._id.charAt(0)==="x"?function(Ue){return h(je._offset+je.l2p(Ue.x),0)}:function(Ue){return h(0,je._offset+je.l2p(Ue.x))}},X.makeTransTickLabelFn=function(je){var Ue=function(gt){var yt=gt.ticklabelposition||"",xt=function(Vt){return yt.indexOf(Vt)!==-1},dt=xt("top"),Lt=xt("left"),Tt=xt("right"),bt=xt("bottom"),Ct=xt("inside"),Dt=bt||Lt||dt||Tt;if(!Dt&&!Ct)return[0,0];var Bt=gt.side,Xt=Dt?(gt.tickwidth||0)/2:0,an=3,Wt=gt.tickfont?gt.tickfont.size:12;return(bt||dt)&&(Xt+=Wt*te,an+=(gt.linewidth||0)/2),(Lt||Tt)&&(Xt+=(gt.linewidth||0)/2,an+=3),Ct&&Bt==="top"&&(an-=Wt*(1-te)),(Lt||dt)&&(Xt=-Xt),Bt!=="bottom"&&Bt!=="right"||(an=-an),[Dt?Xt:0,Ct?an:0]}(je),at=Ue[0],$e=Ue[1];return je._id.charAt(0)==="x"?function(gt){return h(at+je._offset+je.l2p(ht(gt)),$e)}:function(gt){return h($e,at+je._offset+je.l2p(ht(gt)))}},X.makeTickPath=function(je,Ue,at,$e){$e||($e={});var gt=$e.minor;if(gt&&!je.minor)return"";var yt=$e.len!==void 0?$e.len:gt?je.minor.ticklen:je.ticklen,xt=je._id.charAt(0),dt=(je.linewidth||1)/2;return xt==="x"?"M0,"+(Ue+dt*at)+"v"+yt*at:"M"+(Ue+dt*at)+",0h"+yt*at},X.makeLabelFns=function(je,Ue,at){var $e=je.ticklabelposition||"",gt=function(An){return $e.indexOf(An)!==-1},yt=gt("top"),xt=gt("left"),dt=gt("right"),Lt=gt("bottom")||xt||yt||dt,Tt=gt("inside"),bt=$e==="inside"&&je.ticks==="inside"||!Tt&&je.ticks==="outside"&&je.tickson!=="boundaries",Ct=0,Dt=0,Bt=bt?je.ticklen:0;if(Tt?Bt*=-1:Lt&&(Bt=0),bt&&(Ct+=Bt,at)){var Xt=v.deg2rad(at);Ct=Bt*Math.cos(Xt)+1,Dt=Bt*Math.sin(Xt)}je.showticklabels&&(bt||je.showline)&&(Ct+=.2*je.tickfont.size);var an,Wt,Vt,on,Sn,Ln={labelStandoff:Ct+=(je.linewidth||1)/2*(Tt?-1:1),labelShift:Dt},fn=0,Zt=je.side,ln=je._id.charAt(0),nn=je.tickangle;if(ln==="x")on=(Sn=!Tt&&Zt==="bottom"||Tt&&Zt==="top")?1:-1,Tt&&(on*=-1),an=Dt*on,Wt=Ue+Ct*on,Vt=Sn?1:-.2,Math.abs(nn)===90&&(Tt?Vt+=H:Vt=nn===-90&&Zt==="bottom"?te:nn===90&&Zt==="top"?H:.5,fn=H/2*(nn/90)),Ln.xFn=function(An){return An.dx+an+fn*An.fontSize},Ln.yFn=function(An){return An.dy+Wt+An.fontSize*Vt},Ln.anchorFn=function(An,wn){if(Lt){if(xt)return"end";if(dt)return"start"}return w(wn)&&wn!==0&&wn!==180?wn*on<0!==Tt?"end":"start":"middle"},Ln.heightFn=function(An,wn,Cn){return wn<-60||wn>60?-.5*Cn:je.side==="top"!==Tt?-Cn:0};else if(ln==="y"){if(on=(Sn=!Tt&&Zt==="left"||Tt&&Zt==="right")?1:-1,Tt&&(on*=-1),an=Ct,Wt=Dt*on,Vt=0,Tt||Math.abs(nn)!==90||(Vt=nn===-90&&Zt==="left"||nn===90&&Zt==="right"?te:.5),Tt){var cn=w(nn)?+nn:0;if(cn!==0){var kn=v.deg2rad(cn);fn=Math.abs(Math.sin(kn))*te*on,Vt=0}}Ln.xFn=function(An){return An.dx+Ue-(an+An.fontSize*Vt)*on+fn*An.fontSize},Ln.yFn=function(An){return An.dy+Wt+An.fontSize*H},Ln.anchorFn=function(An,wn){return w(wn)&&Math.abs(wn)===90?"middle":Sn?"end":"start"},Ln.heightFn=function(An,wn,Cn){return je.side==="right"&&(wn*=-1),wn<-30?-Cn:wn<30?-.5*Cn:0}}return Ln},X.drawTicks=function(je,Ue,at){at=at||{};var $e=Ue._id+"tick",gt=[].concat(Ue.minor&&Ue.minor.ticks?at.vals.filter(function(xt){return xt.minor&&!xt.noTick}):[]).concat(Ue.ticks?at.vals.filter(function(xt){return!xt.minor&&!xt.noTick}):[]),yt=at.layer.selectAll("path."+$e).data(gt,mt);yt.exit().remove(),yt.enter().append("path").classed($e,1).classed("ticks",1).classed("crisp",at.crisp!==!1).each(function(xt){return a.stroke(T.select(this),xt.minor?Ue.minor.tickcolor:Ue.tickcolor)}).style("stroke-width",function(xt){return n.crispRound(je,xt.minor?Ue.minor.tickwidth:Ue.tickwidth,1)+"px"}).attr("d",at.path).style("display",null),lt(Ue,[j]),yt.attr("transform",at.transFn)},X.drawGrid=function(je,Ue,at){if(at=at||{},Ue.tickmode!=="sync"){var $e=Ue._id+"grid",gt=Ue.minor&&Ue.minor.showgrid,yt=gt?at.vals.filter(function(Vt){return Vt.minor}):[],xt=Ue.showgrid?at.vals.filter(function(Vt){return!Vt.minor}):[],dt=at.counterAxis;if(dt&&X.shouldShowZeroLine(je,Ue,dt))for(var Lt=Ue.tickmode==="array",Tt=0;Tt<xt.length;Tt++){var bt=xt[Tt].x;if(Lt?!bt:Math.abs(bt)<Ue.dtick/100){if(xt=xt.slice(0,Tt).concat(xt.slice(Tt+1)),!Lt)break;Tt--}}Ue._gw=n.crispRound(je,Ue.gridwidth,1);for(var Ct=gt?n.crispRound(je,Ue.minor.gridwidth,1):0,Dt=at.layer,Bt=at.minorLayer,Xt=1;Xt>=0;Xt--){var an=Xt?Dt:Bt;if(an){var Wt=an.selectAll("path."+$e).data(Xt?xt:yt,mt);Wt.exit().remove(),Wt.enter().append("path").classed($e,1).classed("crisp",at.crisp!==!1),Wt.attr("transform",at.transFn).attr("d",at.path).each(function(Vt){return a.stroke(T.select(this),Vt.minor?Ue.minor.gridcolor:Ue.gridcolor||"#ddd")}).style("stroke-dasharray",function(Vt){return n.dashStyle(Vt.minor?Ue.minor.griddash:Ue.griddash,Vt.minor?Ue.minor.gridwidth:Ue.gridwidth)}).style("stroke-width",function(Vt){return(Vt.minor?Ct:Ue._gw)+"px"}).style("display",null),typeof at.path=="function"&&Wt.attr("d",at.path)}}lt(Ue,[U,R])}},X.drawZeroLine=function(je,Ue,at){at=at||at;var $e=Ue._id+"zl",gt=X.shouldShowZeroLine(je,Ue,at.counterAxis),yt=at.layer.selectAll("path."+$e).data(gt?[{x:0,id:Ue._id}]:[]);yt.exit().remove(),yt.enter().append("path").classed($e,1).classed("zl",1).classed("crisp",at.crisp!==!1).each(function(){at.layer.selectAll("path").sort(function(xt,dt){return ie(xt.id,dt.id)})}),yt.attr("transform",at.transFn).attr("d",at.path).call(a.stroke,Ue.zerolinecolor||a.defaultLine).style("stroke-width",n.crispRound(je,Ue.zerolinewidth,Ue._gw||1)+"px").style("display",null),lt(Ue,[z])},X.drawLabels=function(je,Ue,at){at=at||{};var $e=je._fullLayout,gt=Ue._id,yt=gt.charAt(0),xt=at.cls||gt+"tick",dt=at.vals.filter(function(wn){return wn.text}),Lt=at.labelFns,Tt=at.secondary?0:Ue.tickangle,bt=(Ue._prevTickAngles||{})[xt],Ct=at.layer.selectAll("g."+xt).data(Ue.showticklabels?dt:[],mt),Dt=[];function Bt(wn,Cn){wn.each(function(_n){var zn=T.select(this),qn=zn.select(".text-math-group"),sr=Lt.anchorFn(_n,Cn),pr=at.transFn.call(zn.node(),_n)+(w(Cn)&&+Cn!=0?" rotate("+Cn+","+Lt.xFn(_n)+","+(Lt.yFn(_n)-_n.fontSize/2)+")":""),ir=s.lineCount(zn),Jn=$*_n.fontSize,mr=Lt.heightFn(_n,w(Cn)?+Cn:0,(ir-1)*Jn);if(mr&&(pr+=h(0,mr)),qn.empty()){var qt=zn.select("text");qt.attr({transform:pr,"text-anchor":sr}),qt.style("opacity",1),Ue._adjustTickLabelsOverflow&&Ue._adjustTickLabelsOverflow()}else{var tn=n.bBox(qn.node()).width*{end:-.5,start:.5}[sr];qn.attr("transform",pr+h(tn,0))}})}Ct.enter().append("g").classed(xt,1).append("text").attr("text-anchor","middle").each(function(wn){var Cn=T.select(this),_n=je._promises.length;Cn.call(s.positionText,Lt.xFn(wn),Lt.yFn(wn)).call(n.font,wn.font,wn.fontSize,wn.fontColor).text(wn.text).call(s.convertToTspans,je),je._promises[_n]?Dt.push(je._promises.pop().then(function(){Bt(Cn,Tt)})):Bt(Cn,Tt)}),lt(Ue,[Z]),Ct.exit().remove(),at.repositionOnUpdate&&Ct.each(function(wn){T.select(this).select("text").call(s.positionText,Lt.xFn(wn),Lt.yFn(wn))}),Ue._adjustTickLabelsOverflow=function(){var wn=Ue.ticklabeloverflow;if(wn&&wn!=="allow"){var Cn=wn.indexOf("hide")!==-1,_n=Ue._id.charAt(0)==="x",zn=0,qn=_n?je._fullLayout.width:je._fullLayout.height;if(wn.indexOf("domain")!==-1){var sr=v.simpleMap(Ue.range,Ue.r2l);zn=Ue.l2p(sr[0])+Ue._offset,qn=Ue.l2p(sr[1])+Ue._offset}var pr=Math.min(zn,qn),ir=Math.max(zn,qn),Jn=Ue.side,mr=1/0,qt=-1/0;for(var tn in Ct.each(function(On){var Hn=T.select(this);if(Hn.select(".text-math-group").empty()){var Bn=n.bBox(Hn.node()),Vn=0;_n?(Bn.right>ir||Bn.left<pr)&&(Vn=1):(Bn.bottom>ir||Bn.top+(Ue.tickangle?0:On.fontSize/4)<pr)&&(Vn=1);var nr=Hn.select("text");Vn?Cn&&nr.style("opacity",0):(nr.style("opacity",1),mr=Jn==="bottom"||Jn==="right"?Math.min(mr,_n?Bn.top:Bn.left):-1/0,qt=Jn==="top"||Jn==="left"?Math.max(qt,_n?Bn.bottom:Bn.right):1/0)}}),$e._plots){var dn=$e._plots[tn];if(Ue._id===dn.xaxis._id||Ue._id===dn.yaxis._id){var vn=_n?dn.yaxis:dn.xaxis;vn&&(vn["_visibleLabelMin_"+Ue._id]=mr,vn["_visibleLabelMax_"+Ue._id]=qt)}}}},Ue._hideCounterAxisInsideTickLabels=function(wn){var Cn=Ue._id.charAt(0)==="x",_n=[];for(var zn in $e._plots){var qn=$e._plots[zn];Ue._id!==qn.xaxis._id&&Ue._id!==qn.yaxis._id||_n.push(Cn?qn.yaxis:qn.xaxis)}_n.forEach(function(sr,pr){sr&&Je(sr)&&(wn||[z,R,U,j,Z]).forEach(function(ir){var Jn=ir.K==="tick"&&ir.L==="text"&&Ue.ticklabelmode==="period",mr=$e._plots[Ue._mainSubplot];(ir.K===z.K?mr.zerolinelayer.selectAll("."+Ue._id+"zl"):ir.K===R.K?mr.minorGridlayer.selectAll("."+Ue._id):ir.K===U.K?mr.gridlayer.selectAll("."+Ue._id):mr[Ue._id.charAt(0)+"axislayer"]).each(function(){var qt=T.select(this);ir.L&&(qt=qt.selectAll(ir.L)),qt.each(function(tn){var dn=Ue.l2p(Jn?ht(tn):tn.x)+Ue._offset,vn=T.select(this);dn<Ue["_visibleLabelMax_"+sr._id]&&dn>Ue["_visibleLabelMin_"+sr._id]?vn.style("display","none"):ir.K!=="tick"||pr||vn.style("display",null)})})})})},Bt(Ct,bt+1?bt:Tt);var Xt=null;Ue._selections&&(Ue._selections[xt]=Ct);var an=[function(){return Dt.length&&Promise.all(Dt)}];Ue.automargin&&$e._redrawFromAutoMarginCount&&bt===90?(Xt=90,an.push(function(){Bt(Ct,bt)})):an.push(function(){if(Bt(Ct,Tt),dt.length&&yt==="x"&&!w(Tt)&&(Ue.type!=="log"||String(Ue.dtick).charAt(0)!=="D")){Xt=0;var wn,Cn=0,_n=[];if(Ct.each(function(Hn){Cn=Math.max(Cn,Hn.fontSize);var Bn=Ue.l2p(Hn.x),Vn=it(this),nr=n.bBox(Vn.node());_n.push({top:0,bottom:10,height:10,left:Bn-nr.width/2,right:Bn+nr.width/2+2,width:nr.width+2})}),Ue.tickson!=="boundaries"&&!Ue.showdividers||at.secondary){var zn=dt.length,qn=Math.abs((dt[zn-1].x-dt[0].x)*Ue._m)/(zn-1),sr=Ue.ticklabelposition||"",pr=function(Hn){return sr.indexOf(Hn)!==-1},ir=pr("top"),Jn=pr("left"),mr=pr("right"),qt=pr("bottom")||Jn||ir||mr?(Ue.tickwidth||0)+6:0,tn=qn<2.5*Cn||Ue.type==="multicategory"||Ue._name==="realaxis";for(wn=0;wn<_n.length-1;wn++)if(v.bBoxIntersect(_n[wn],_n[wn+1],qt)){Xt=tn?90:30;break}}else{var dn=2;for(Ue.ticks&&(dn+=Ue.tickwidth/2),wn=0;wn<_n.length;wn++){var vn=dt[wn].xbnd,On=_n[wn];if(vn[0]!==null&&On.left-Ue.l2p(vn[0])<dn||vn[1]!==null&&Ue.l2p(vn[1])-On.right<dn){Xt=90;break}}}Xt&&Bt(Ct,Xt)}}),Ue._tickAngles&&an.push(function(){Ue._tickAngles[xt]=Xt===null?w(Tt)?Tt:0:Xt});var Wt=function(){var wn=0,Cn=0;return Ct.each(function(_n,zn){var qn,sr=it(this);sr.select(".text-math-group").empty()&&(Ue._vals[zn]&&(qn=Ue._vals[zn].bb||n.bBox(sr.node()),Ue._vals[zn].bb=qn),wn=Math.max(wn,qn.width),Cn=Math.max(Cn,qn.height))}),{labelsMaxW:wn,labelsMaxH:Cn}},Vt=Ue._anchorAxis;if(Vt&&(Vt.autorange||Vt.insiderange)&&Je(Ue)&&!ae($e,Ue._id)&&($e._insideTickLabelsUpdaterange||($e._insideTickLabelsUpdaterange={}),Vt.autorange&&($e._insideTickLabelsUpdaterange[Vt._name+".autorange"]=Vt.autorange,an.push(Wt)),Vt.insiderange)){var on=Wt(),Sn=Ue._id.charAt(0)==="y"?on.labelsMaxW:on.labelsMaxH;Sn+=6,Ue.ticklabelposition==="inside"&&(Sn+=Ue.ticklen||0);var Ln=Ue.side==="right"||Ue.side==="top"?1:-1,fn=Ln===1?1:0,Zt=Ln===1?0:1,ln=[];ln[Zt]=Vt.range[Zt];var nn=Vt.d2p(Vt.range[fn]),cn=Vt.d2p(Vt.range[Zt]),kn=Math.abs(cn-nn);kn-Sn>0?Sn*=1+Sn/(kn-=Sn):Sn=0,Ue._id.charAt(0)!=="y"&&(Sn=-Sn),ln[fn]=Vt.p2d(Vt.d2p(Vt.range[fn])+Ln*Sn),Vt.autorange==="min"||Vt.autorange==="max reversed"?(ln[0]=null,Vt._rangeInitial0=void 0,Vt._rangeInitial1=void 0):Vt.autorange!=="max"&&Vt.autorange!=="min reversed"||(ln[1]=null,Vt._rangeInitial0=void 0,Vt._rangeInitial1=void 0),$e._insideTickLabelsUpdaterange[Vt._name+".range"]=ln}var An=v.syncOrAsync(an);return An&&An.then&&je._promises.push(An),An},X.getPxPosition=function(je,Ue){var at,$e=je._fullLayout._size,gt=Ue._id.charAt(0),yt=Ue.side;return Ue.anchor!=="free"?at=Ue._anchorAxis:gt==="x"?at={_offset:$e.t+(1-(Ue.position||0))*$e.h,_length:0}:gt==="y"&&(at={_offset:$e.l+(Ue.position||0)*$e.w+Ue._shift,_length:0}),yt==="top"||yt==="left"?at._offset:yt==="bottom"||yt==="right"?at._offset+at._length:void 0},X.shouldShowZeroLine=function(je,Ue,at){var $e=v.simpleMap(Ue.range,Ue.r2l);return $e[0]*$e[1]<=0&&Ue.zeroline&&(Ue.type==="linear"||Ue.type==="-")&&!(Ue.rangebreaks&&Ue.maskBreaks(0)===I)&&(_t(Ue,0)||!function(gt,yt,xt,dt){var Lt=xt._mainAxis;if(Lt){var Tt=gt._fullLayout,bt=yt._id.charAt(0),Ct=X.counterLetter(yt._id),Dt=yt._offset+(Math.abs(dt[0])<Math.abs(dt[1])==(bt==="x")?0:yt._length),Bt=Tt._plots[xt._mainSubplot];if(!(Bt.mainplotinfo||Bt).overlays.length)return Vt(xt);for(var Xt=X.list(gt,Ct),an=0;an<Xt.length;an++){var Wt=Xt[an];if(Wt._mainAxis===Lt&&Vt(Wt))return!0}}function Vt(on){if(!on.showline||!on.linewidth)return!1;var Sn=Math.max((on.linewidth+yt.zerolinewidth)/2,1);function Ln(ln){return typeof ln=="number"&&Math.abs(ln-Dt)<Sn}if(Ln(on._mainLinePosition)||Ln(on._mainMirrorPosition))return!0;var fn=on._linepositions||{};for(var Zt in fn)if(Ln(fn[Zt][0])||Ln(fn[Zt][1]))return!0}}(je,Ue,at,$e)||function(gt,yt){for(var xt=gt._fullData,dt=yt._mainSubplot,Lt=yt._id.charAt(0),Tt=0;Tt<xt.length;Tt++){var bt=xt[Tt];if(bt.visible===!0&&bt.xaxis+bt.yaxis===dt&&(_.traceIs(bt,"bar-like")&&bt.orientation==={x:"h",y:"v"}[Lt]||bt.fill&&bt.fill.charAt(bt.fill.length-1)===Lt))return!0}return!1}(je,Ue))},X.clipEnds=function(je,Ue){return Ue.filter(function(at){return _t(je,at.x)})},X.allowAutoMargin=function(je){for(var Ue=X.list(je,"",!0),at=0;at<Ue.length;at++){var $e=Ue[at];$e.automargin&&(i.allowAutoMargin(je,st($e)),$e.mirror&&i.allowAutoMargin(je,St($e))),_.getComponentMethod("rangeslider","isVisible")($e)&&i.allowAutoMargin(je,zt($e))}},X.swap=function(je,Ue){for(var at=function(gt,yt){var xt,dt,Lt=[];for(xt=0;xt<yt.length;xt++){var Tt=[],bt=gt._fullData[yt[xt]].xaxis,Ct=gt._fullData[yt[xt]].yaxis;if(bt&&Ct){for(dt=0;dt<Lt.length;dt++)Lt[dt].x.indexOf(bt)===-1&&Lt[dt].y.indexOf(Ct)===-1||Tt.push(dt);if(Tt.length){var Dt,Bt=Lt[Tt[0]];if(Tt.length>1)for(dt=1;dt<Tt.length;dt++)Dt=Lt[Tt[dt]],Ft(Bt.x,Dt.x),Ft(Bt.y,Dt.y);Ft(Bt.x,[bt]),Ft(Bt.y,[Ct])}else Lt.push({x:[bt],y:[Ct]})}}return Lt}(je,Ue),$e=0;$e<at.length;$e++)Pt(je,at[$e].x,at[$e].y)}},4322:function(N,L,e){var T=e(92770),w=e(71828),i=e(50606).BADNUM,_=w.isArrayOrTypedArray,v=w.isDateTime,h=w.cleanNumber,s=Math.round;function t(n,r){return r?T(n):typeof n=="number"}function a(n){return Math.max(1,(n-1)/1e3)}N.exports=function(n,r,l){var o=n,u=l.noMultiCategory;if(_(o)&&!o.length)return"-";if(!u&&function(d){return _(d[0])&&_(d[1])}(o))return"multicategory";if(u&&Array.isArray(o[0])){for(var p=[],c=0;c<o.length;c++)if(_(o[c]))for(var b=0;b<o[c].length;b++)p.push(o[c][b]);o=p}if(function(d,m){for(var x=d.length,y=a(x),k=0,f=0,S={},M=0;M<x;M+=y){var E=d[s(M)],O=String(E);S[O]||(S[O]=1,v(E,m)&&k++,T(E)&&f++)}return k>2*f}(o,r))return"date";var g=l.autotypenumbers!=="strict";return function(d,m){for(var x=d.length,y=a(x),k=0,f=0,S={},M=0;M<x;M+=y){var E=d[s(M)],O=String(E);if(!S[O]){S[O]=1;var P=typeof E;P==="boolean"?f++:(m?h(E)!==i:P==="number")?k++:P==="string"&&f++}}return f>2*k}(o,g)?"category":function(d,m){for(var x=d.length,y=0;y<x;y++)if(t(d[y],m))return!0;return!1}(o,g)?"linear":"-"}},71453:function(N,L,e){var T=e(92770),w=e(73972),i=e(71828),_=e(44467),v=e(85501),h=e(13838),s=e(26218),t=e(38701),a=e(96115),n=e(89426),r=e(15258),l=e(92128),o=e(23608),u=e(21994),p=e(85555).WEEKDAY_PATTERN,c=e(85555).HOUR_PATTERN;function b(m,x,y){function k(z,U){return i.coerce(m,x,h.rangebreaks,z,U)}if(k("enabled")){var f=k("bounds");if(f&&f.length>=2){var S,M,E="";if(f.length===2){for(S=0;S<2;S++)if(M=d(f[S])){E=p;break}}var O=k("pattern",E);if(O===p)for(S=0;S<2;S++)(M=d(f[S]))&&(x.bounds[S]=f[S]=M-1);if(O)for(S=0;S<2;S++)switch(M=f[S],O){case p:if(!T(M)||(M=+M)!==Math.floor(M)||M<0||M>=7)return void(x.enabled=!1);x.bounds[S]=f[S]=M;break;case c:if(!T(M)||(M=+M)<0||M>24)return void(x.enabled=!1);x.bounds[S]=f[S]=M}if(y.autorange===!1){var P=y.range;if(P[0]<P[1]){if(f[0]<P[0]&&f[1]>P[1])return void(x.enabled=!1)}else if(f[0]>P[0]&&f[1]<P[1])return void(x.enabled=!1)}}else{var I=k("values");if(!I||!I.length)return void(x.enabled=!1);k("dvalue")}}}N.exports=function(m,x,y,k,f){var S,M=k.letter,E=k.font||{},O=k.splomStash||{},P=y("visible",!k.visibleDflt),I=x._template||{},z=x.type||I.type||"-";z==="date"&&(w.getComponentMethod("calendars","handleDefaults")(m,x,"calendar",k.calendar),k.noTicklabelmode||(S=y("ticklabelmode")));var U="";k.noTicklabelposition&&z!=="multicategory"||(U=i.coerce(m,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:M==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),k.noTicklabeloverflow||y("ticklabeloverflow",U.indexOf("inside")!==-1?"hide past domain":z==="category"||z==="multicategory"?"allow":"hide past div"),u(x,f),o(m,x,y,k),r(m,x,y,k),z==="category"||k.noHover||y("hoverformat");var R=y("color"),j=R!==h.color.dflt?R:E.color,Z=O.label||f._dfltTitle[M];if(n(m,x,y,z,k),!P)return x;y("title.text",Z),i.coerceFont(y,"title.font",{family:E.family,size:i.bigFont(E.size),color:j}),s(m,x,y,z);var F=k.hasMinor;if(F&&(_.newContainer(x,"minor"),s(m,x,y,z,{isMinor:!0})),a(m,x,y,z,k),t(m,x,y,k),F){var V=k.isMinor;k.isMinor=!0,t(m,x,y,k),k.isMinor=V}l(m,x,y,{dfltColor:R,bgColor:k.bgColor,showGrid:k.showGrid,hasMinor:F,attributes:h}),!F||x.minor.ticks||x.minor.showgrid||delete x.minor,(x.showline||x.ticks)&&y("mirror");var H,te=z==="multicategory";if(k.noTickson||z!=="category"&&!te||!x.ticks&&!x.showgrid||(te&&(H="boundaries"),y("tickson",H)==="boundaries"&&delete x.ticklabelposition),te&&y("showdividers")&&(y("dividercolor"),y("dividerwidth")),z==="date")if(v(m,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:b}),x.rangebreaks.length){for(var $=0;$<x.rangebreaks.length;$++)if(x.rangebreaks[$].pattern===p){x._hasDayOfWeekBreaks=!0;break}if(u(x,f),f._has("scattergl")||f._has("splom"))for(var J=0;J<k.data.length;J++){var X=k.data[J];X.type!=="scattergl"&&X.type!=="splom"||(X.visible=!1,i.warn(X.type+" traces do not work on axes with rangebreaks. Setting trace "+X.index+" to `visible: false`."))}}else delete x.rangebreaks;return x};var g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function d(m){if(typeof m=="string")return g[m.substr(0,3).toLowerCase()]}},12663:function(N,L,e){var T=e(31562),w=T.FORMAT_LINK,i=T.DATE_FORMAT_LINK;function _(h,s){return["Sets the "+h+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+w+"."].join(" ")}function v(h,s){return _(h,s)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}N.exports={axisHoverFormat:function(h,s){return{valType:"string",dflt:"",editType:"none",description:(s?_:v)("hover text",h)+["By default the values are formatted using "+(s?"generic number format":"`"+h+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:_,descriptionWithDates:v}},41675:function(N,L,e){var T=e(73972),w=e(85555);function i(_,v){if(v&&v.length){for(var h=0;h<v.length;h++)if(v[h][_])return!0}return!1}L.id2name=function(_){if(typeof _=="string"&&_.match(w.AX_ID_PATTERN)){var v=_.split(" ")[0].substr(1);return v==="1"&&(v=""),_.charAt(0)+"axis"+v}},L.name2id=function(_){if(_.match(w.AX_NAME_PATTERN)){var v=_.substr(5);return v==="1"&&(v=""),_.charAt(0)+v}},L.cleanId=function(_,v,h){var s=/( domain)$/.test(_);if(typeof _=="string"&&_.match(w.AX_ID_PATTERN)&&(!v||_.charAt(0)===v)&&(!s||h)){var t=_.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),_.charAt(0)+t+(s&&h?" domain":"")}},L.list=function(_,v,h){var s=_._fullLayout;if(!s)return[];var t,a=L.listIds(_,v),n=new Array(a.length);for(t=0;t<a.length;t++){var r=a[t];n[t]=s[r.charAt(0)+"axis"+r.substr(1)]}if(!h){var l=s._subplots.gl3d||[];for(t=0;t<l.length;t++){var o=s[l[t]];v?n.push(o[v+"axis"]):n.push(o.xaxis,o.yaxis,o.zaxis)}}return n},L.listIds=function(_,v){var h=_._fullLayout;if(!h)return[];var s=h._subplots;return v?s[v+"axis"]:s.xaxis.concat(s.yaxis)},L.getFromId=function(_,v,h){var s=_._fullLayout;return v=v===void 0||typeof v!="string"?v:v.replace(" domain",""),h==="x"?v=v.replace(/y[0-9]*/,""):h==="y"&&(v=v.replace(/x[0-9]*/,"")),s[L.id2name(v)]},L.getFromTrace=function(_,v,h){var s=_._fullLayout,t=null;if(T.traceIs(v,"gl3d")){var a=v.scene;a.substr(0,5)==="scene"&&(t=s[a][h+"axis"])}else t=L.getFromId(_,v[h+"axis"]||h);return t},L.idSort=function(_,v){var h=_.charAt(0),s=v.charAt(0);return h!==s?h>s?1:-1:+(_.substr(1)||1)-+(v.substr(1)||1)},L.ref2id=function(_){return!!/^[xyz]/.test(_)&&_.split(" ")[0]},L.isLinked=function(_,v){return i(v,_._axisMatchGroups)||i(v,_._axisConstraintGroups)}},15258:function(N,L,e){var T=e(73627).isTypedArraySpec;N.exports=function(w,i,_,v){if(i.type==="category"){var h,s=w.categoryarray,t=Array.isArray(s)&&s.length>0||T(s);t&&(h="array");var a,n=_("categoryorder",h);n==="array"&&(a=_("categoryarray")),t||n!=="array"||(n=i.categoryorder="trace"),n==="trace"?i._initialCategories=[]:n==="array"?i._initialCategories=a.slice():(a=function(r,l){var o,u,p,c=l.dataAttr||r._id.charAt(0),b={};if(l.axData)o=l.axData;else for(o=[],u=0;u<l.data.length;u++){var g=l.data[u];g[c+"axis"]===r._id&&o.push(g)}for(u=0;u<o.length;u++){var d=o[u][c];for(p=0;p<d.length;p++){var m=d[p];m!=null&&(b[m]=1)}}return Object.keys(b)}(i,v).sort(),n==="category ascending"?i._initialCategories=a:n==="category descending"&&(i._initialCategories=a.reverse()))}}},66287:function(N,L,e){var T=e(92770),w=e(71828),i=e(50606),_=i.ONEDAY,v=i.ONEWEEK;L.dtick=function(h,s){var t=s==="log",a=s==="date",n=s==="category",r=a?_:1;if(!h)return r;if(T(h))return(h=Number(h))<=0?r:n?Math.max(1,Math.round(h)):a?Math.max(.1,h):h;if(typeof h!="string"||!a&&!t)return r;var l=h.charAt(0),o=h.substr(1);return(o=T(o)?Number(o):0)<=0||!(a&&l==="M"&&o===Math.round(o)||t&&l==="L"||t&&l==="D"&&(o===1||o===2))?r:h},L.tick0=function(h,s,t,a){return s==="date"?w.cleanDate(h,w.dateTick0(t,a%v==0?1:0)):a!=="D1"&&a!=="D2"?T(h)?Number(h):0:void 0}},85555:function(N,L,e){var T=e(30587).counter;N.exports={idRegex:{x:T("x","( domain)?"),y:T("y","( domain)?")},attrRegex:T("[xy]axis"),xAxisMatch:T("xaxis"),yAxisMatch:T("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(N,L,e){var T=e(71828),w=e(71739),i=e(41675).id2name,_=e(13838),v=e(42449),h=e(21994),s=e(50606).ALMOST_EQUAL,t=e(18783).FROM_BL;function a(c,b,g){var d=g.axIds,m=g.layoutOut,x=g.hasImage,y=m._axisConstraintGroups,k=m._axisMatchGroups,f=b._id,S=f.charAt(0),M=((m._splomAxes||{})[S]||{})[f]||{},E=b._id,O=E.charAt(0)==="x";function P(K,ee){return T.coerce(c,b,_,K,ee)}b._matchGroup=null,b._constraintGroup=null,P("constrain",x?"domain":"range"),T.coerce(c,b,{constraintoward:{valType:"enumerated",values:O?["left","center","right"]:["bottom","middle","top"],dflt:O?"center":"middle"}},"constraintoward");var I,z,U=b.type,R=[];for(I=0;I<d.length;I++)(z=d[I])!==E&&m[i(z)].type===U&&R.push(z);var j=r(y,E);if(j){var Z=[];for(I=0;I<R.length;I++)j[z=R[I]]||Z.push(z);R=Z}var F,V,H=R.length;H&&(c.matches||M.matches)&&(F=T.coerce(c,b,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(M.matches)!==-1?M.matches:void 0}},"matches"));var te=x&&!O?b.anchor:void 0;if(H&&!F&&(c.scaleanchor||te)&&(V=T.coerce(c,b,{scaleanchor:{valType:"enumerated",values:R.concat([!1])}},"scaleanchor",te)),F){b._matchGroup=l(k,E,F,1);var $=m[i(F)],J=n(m,b)/n(m,$);O!==(F.charAt(0)==="x")&&(J=(O?"x":"y")+J),l(y,E,F,J)}else c.matches&&d.indexOf(c.matches)!==-1&&T.warn("ignored "+b._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(V){var X=P("scaleratio");X||(X=b.scaleratio=1),l(y,E,V,X)}else c.scaleanchor&&d.indexOf(c.scaleanchor)!==-1&&T.warn("ignored "+b._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function n(c,b){var g=b.domain;return g||(g=c[i(b.overlaying)].domain),g[1]-g[0]}function r(c,b){for(var g=0;g<c.length;g++)if(c[g][b])return c[g];return null}function l(c,b,g,d){var m,x,y,k,f,S=r(c,b);S===null?((S={})[b]=1,f=c.length,c.push(S)):f=c.indexOf(S);var M=Object.keys(S);for(m=0;m<c.length;m++)if(y=c[m],m!==f&&y[g]){var E=y[g];for(x=0;x<M.length;x++)y[k=M[x]]=o(E,o(d,S[k]));return void c.splice(f,1)}if(d!==1)for(x=0;x<M.length;x++){var O=M[x];S[O]=o(d,S[O])}S[g]=1}function o(c,b){var g,d,m="",x="";typeof c=="string"&&(g=(m=c.match(/^[xy]*/)[0]).length,c=+c.substr(g)),typeof b=="string"&&(d=(x=b.match(/^[xy]*/)[0]).length,b=+b.substr(d));var y=c*b;return g||d?g&&d&&m.charAt(0)!==x.charAt(0)?g===d?y:(g>d?m.substr(d):x.substr(g))+y:m+x+c*b:y}function u(c,b){for(var g=b._size,d=g.h/g.w,m={},x=Object.keys(c),y=0;y<x.length;y++){var k=x[y],f=c[k];if(typeof f=="string"){var S=f.match(/^[xy]*/)[0],M=S.length;f=+f.substr(M);for(var E=S.charAt(0)==="y"?d:1/d,O=0;O<M;O++)f*=E}m[k]=f}return m}function p(c,b){var g=c._inputDomain,d=t[c.constraintoward],m=g[0]+(g[1]-g[0])*d;c.domain=c._input.domain=[m+(g[0]-m)/b,m+(g[1]-m)/b],c.setScale()}L.handleDefaults=function(c,b,g){var d,m,x,y,k,f,S,M,E=g.axIds,O=g.axHasImage,P=b._axisConstraintGroups=[],I=b._axisMatchGroups=[];for(d=0;d<E.length;d++)a(k=c[y=i(E[d])],f=b[y],{axIds:E,layoutOut:b,hasImage:O[y]});function z($,J){for(d=0;d<$.length;d++)for(x in m=$[d])b[i(x)][J]=m}for(z(I,"_matchGroup"),d=0;d<P.length;d++)for(x in m=P[d])if((f=b[i(x)]).fixedrange){for(var U in m){var R=i(U);(c[R]||{}).fixedrange===!1&&T.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),b[R].fixedrange=!0}break}for(d=0;d<P.length;){for(x in m=P[d]){(f=b[i(x)])._matchGroup&&Object.keys(f._matchGroup).length===Object.keys(m).length&&(P.splice(d,1),d--);break}d++}z(P,"_constraintGroup");var j=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Z=!1,F=!1;function V(){M=f[S],S==="rangebreaks"&&(F=f._hasDayOfWeekBreaks)}for(d=0;d<I.length;d++){m=I[d];for(var H=0;H<j.length;H++){var te;for(x in S=j[H],M=null,m)if(k=c[y=i(x)],f=b[y],S in f){if(!f.matches&&(te=f,S in k)){V();break}M===null&&S in k&&V()}if(S==="range"&&M&&k.range&&k.range.length===2&&k.range[0]!==null&&k.range[1]!==null&&(Z=!0),S==="autorange"&&M===null&&Z&&(M=!1),M===null&&S in te&&(M=te[S]),M!==null)for(x in m)(f=b[i(x)])[S]=S==="range"?M.slice():M,S==="rangebreaks"&&(f._hasDayOfWeekBreaks=F,h(f,b))}}},L.enforce=function(c){var b,g,d,m,x,y,k,f,S=c._fullLayout,M=S._axisConstraintGroups||[];for(b=0;b<M.length;b++){d=u(M[b],S);var E=Object.keys(d),O=1/0,P=0,I=1/0,z={},U={},R=!1;for(g=0;g<E.length;g++)U[m=E[g]]=x=S[i(m)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),z[m]=y=Math.abs(x._m)/d[m],O=Math.min(O,y),x.constrain!=="domain"&&x._constraintShrinkable||(I=Math.min(I,y)),delete x._constraintShrinkable,P=Math.max(P,y),x.constrain==="domain"&&(R=!0);if(!(O>s*P)||R){for(g=0;g<E.length;g++)if(y=z[m=E[g]],k=(x=U[m]).constrain,y!==I||k==="domain")if(f=y/I,k==="range")v(x,f);else{var j=x._inputDomain,Z=(x.domain[1]-x.domain[0])/(j[1]-j[0]),F=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if((f/=Z)*F<1){x.domain=x._input.domain=j.slice(),v(x,f);continue}if(F<1&&(x.range=x._input.range=x._inputRange.slice(),f*=F),x.autorange){var V=x.r2l(x.range[0]),H=x.r2l(x.range[1]),te=(V+H)/2,$=te,J=te,X=Math.abs(H-te),K=te-X*f*1.0001,ee=te+X*f*1.0001,ie=w.makePadFn(S,x,0),ae=w.makePadFn(S,x,1);p(x,f);var oe,fe,ge=Math.abs(x._m),ve=w.concatExtremes(c,x),xe=ve.min,_e=ve.max;for(fe=0;fe<xe.length;fe++)(oe=xe[fe].val-ie(xe[fe])/ge)>K&&oe<$&&($=oe);for(fe=0;fe<_e.length;fe++)(oe=_e[fe].val+ae(_e[fe])/ge)<ee&&oe>J&&(J=oe);f/=(J-$)/(2*X),$=x.l2r($),J=x.l2r(J),x.range=x._input.range=V<H?[$,J]:[J,$]}p(x,f)}}}},L.getAxisGroup=function(c,b){for(var g=c._axisMatchGroups,d=0;d<g.length;d++)if(g[d][b])return"g"+d;return b},L.clean=function(c,b){if(b._inputDomain){for(var g=!1,d=b._id,m=c._fullLayout._axisConstraintGroups,x=0;x<m.length;x++)if(m[x][d]){g=!0;break}g&&b.constrain==="domain"||(b._input.domain=b.domain=b._inputDomain,delete b._inputDomain)}}},29323:function(N,L,e){var T=e(39898),w=e(71828),i=w.numberFormat,_=e(84267),v=e(38520),h=e(73972),s=w.strTranslate,t=e(63893),a=e(7901),n=e(91424),r=e(30211),l=e(89298),o=e(6964),u=e(28569),p=e(64505),c=p.selectingOrDrawing,b=p.freeMode,g=e(18783).FROM_TL,d=e(33306),m=e(61549).redrawReglTraces,x=e(74875),y=e(41675).getFromId,k=e(47322).prepSelect,f=e(47322).clearOutline,S=e(47322).selectOnClick,M=e(42449),E=e(85555),O=E.MINDRAG,P=E.MINZOOM,I=!0;function z(oe,fe,ge,ve){var xe=w.ensureSingle(oe.draglayer,fe,ge,function(_e){_e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",oe.id)});return xe.call(o,ve),xe.node()}function U(oe,fe,ge,ve,xe,_e,ye){var Ce=z(oe,"rect",fe,ge);return T.select(Ce).call(n.setRect,ve,xe,_e,ye),Ce}function R(oe,fe){for(var ge=0;ge<oe.length;ge++)if(!oe[ge].fixedrange)return fe;return""}function j(oe,fe,ge,ve,xe){for(var _e=0;_e<oe.length;_e++){var ye=oe[_e];if(!ye.fixedrange)if(ye.rangebreaks){var Ce=ye._id.charAt(0)==="y",ke=Ce?1-fe:fe,Te=Ce?1-ge:ge;ve[ye._name+".range[0]"]=ye.l2r(ye.p2l(ke*ye._length)),ve[ye._name+".range[1]"]=ye.l2r(ye.p2l(Te*ye._length))}else{var le=ye._rl[0],ue=ye._rl[1]-le;ve[ye._name+".range[0]"]=ye.l2r(le+ue*fe),ve[ye._name+".range[1]"]=ye.l2r(le+ue*ge)}}if(xe&&xe.length){var de=(fe+(1-ge))/2;j(xe,de,1-de,ve,[])}}function Z(oe,fe){for(var ge=0;ge<oe.length;ge++){var ve=oe[ge];if(!ve.fixedrange){if(ve.rangebreaks){var xe=ve._length,_e=(ve.p2l(0+fe)-ve.p2l(0)+(ve.p2l(xe+fe)-ve.p2l(xe)))/2;ve.range=[ve.l2r(ve._rl[0]-_e),ve.l2r(ve._rl[1]-_e)]}else ve.range=[ve.l2r(ve._rl[0]-fe/ve._m),ve.l2r(ve._rl[1]-fe/ve._m)];ve.limitRange&&ve.limitRange()}}}function F(oe){return 1-(oe>=0?Math.min(oe,.9):1/(1/Math.max(oe,-.3)+3.222))}function V(oe,fe,ge,ve,xe){return oe.append("path").attr("class","zoombox").style({fill:fe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(ge,ve)).attr("d",xe+"Z")}function H(oe,fe,ge){return oe.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(fe,ge)).attr("d","M0,0Z")}function te(oe,fe,ge,ve,xe,_e){oe.attr("d",ve+"M"+ge.l+","+ge.t+"v"+ge.h+"h"+ge.w+"v-"+ge.h+"h-"+ge.w+"Z"),$(oe,fe,xe,_e)}function $(oe,fe,ge,ve){ge||(oe.transition().style("fill",ve>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),fe.transition().style("opacity",1).duration(200))}function J(oe){T.select(oe).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function X(oe){I&&oe.data&&oe._context.showTips&&(w.notifier(w._(oe,"Double-click to zoom back out"),"long"),I=!1)}function K(oe){var fe=Math.floor(Math.min(oe.b-oe.t,oe.r-oe.l,P)/2);return"M"+(oe.l-3.5)+","+(oe.t-.5+fe)+"h3v"+-fe+"h"+fe+"v-3h-"+(fe+3)+"ZM"+(oe.r+3.5)+","+(oe.t-.5+fe)+"h-3v"+-fe+"h"+-fe+"v-3h"+(fe+3)+"ZM"+(oe.r+3.5)+","+(oe.b+.5-fe)+"h-3v"+fe+"h"+-fe+"v3h"+(fe+3)+"ZM"+(oe.l-3.5)+","+(oe.b+.5-fe)+"h3v"+fe+"h"+fe+"v3h-"+(fe+3)+"Z"}function ee(oe,fe,ge,ve,xe){for(var _e,ye,Ce,ke,Te=!1,le={},ue={},de=(xe||{}).xaHash,Le=(xe||{}).yaHash,we=0;we<fe.length;we++){var Ee=fe[we];for(_e in ge)if(Ee[_e]){for(Ce in Ee)xe&&(de[Ce]||Le[Ce])||(Ce.charAt(0)==="x"?ge:ve)[Ce]||(le[Ce]=_e);for(ye in ve)xe&&(de[ye]||Le[ye])||!Ee[ye]||(Te=!0)}for(ye in ve)if(Ee[ye])for(ke in Ee)xe&&(de[ke]||Le[ke])||(ke.charAt(0)==="x"?ge:ve)[ke]||(ue[ke]=ye)}Te&&(w.extendFlat(le,ue),ue={});var Oe={},Fe=[];for(Ce in le){var pe=y(oe,Ce);Fe.push(pe),Oe[pe._id]=pe}var be={},Me=[];for(ke in ue){var De=y(oe,ke);Me.push(De),be[De._id]=De}return{xaHash:Oe,yaHash:be,xaxes:Fe,yaxes:Me,xLinks:le,yLinks:ue,isSubplotConstrained:Te}}function ie(oe,fe){if(v){var ge=oe.onwheel!==void 0?"wheel":"mousewheel";oe._onwheel&&oe.removeEventListener(ge,oe._onwheel),oe._onwheel=fe,oe.addEventListener(ge,fe,{passive:!1})}else oe.onwheel!==void 0?oe.onwheel=fe:oe.onmousewheel!==void 0?oe.onmousewheel=fe:oe.isAddedWheelEvent||(oe.isAddedWheelEvent=!0,oe.addEventListener("wheel",fe,{passive:!1}))}function ae(oe){var fe=[];for(var ge in oe)fe.push(oe[ge]);return fe}N.exports={makeDragBox:function(oe,fe,ge,ve,xe,_e,ye,Ce){var ke,Te,le,ue,de,Le,we,Ee,Oe,Fe,pe,be,Me,De,Ne,Be,Ye,We,et,ft,ht,mt,Mt,_t=oe._fullLayout._zoomlayer,it=ye+Ce==="nsew",st=(ye+Ce).length===1;function St(){if(ke=fe.xaxis,Te=fe.yaxis,Oe=ke._length,Fe=Te._length,we=ke._offset,Ee=Te._offset,(le={})[ke._id]=ke,(ue={})[Te._id]=Te,ye&&Ce)for(var Zt=fe.overlays,ln=0;ln<Zt.length;ln++){var nn=Zt[ln].xaxis;le[nn._id]=nn;var cn=Zt[ln].yaxis;ue[cn._id]=cn}de=ae(le),Le=ae(ue),Me=R(de,Ce),De=R(Le,ye),Ne=!De&&!Me,be=ee(oe,oe._fullLayout._axisMatchGroups,le,ue);var kn=(pe=ee(oe,oe._fullLayout._axisConstraintGroups,le,ue,be)).isSubplotConstrained||be.isSubplotConstrained;Be=Ce||kn,Ye=ye||kn;var An=oe._fullLayout;We=An._has("scattergl"),et=An._has("splom"),ft=An._has("svg")}ge+=fe.yaxis._shift,St();var zt=function(Zt,ln,nn){return Zt?Zt==="nsew"?nn?"":ln==="pan"?"move":"crosshair":Zt.toLowerCase()+"-resize":"pointer"}(De+Me,oe._fullLayout.dragmode,it),Ft=U(fe,ye+Ce+"drag",zt,ge,ve,xe,_e);if(Ne&&!it)return Ft.onmousedown=null,Ft.style.pointerEvents="none",Ft;var Pt,Xe,Ke,He,Je,lt,ot,je,Ue,at,$e={element:Ft,gd:oe,plotinfo:fe};function gt(){$e.plotinfo.selection=!1,f(oe)}function yt(Zt,ln){var nn=$e.gd;if(nn._fullLayout._activeShapeIndex>=0)nn._fullLayout._deactivateShape(nn);else{var cn=nn._fullLayout.clickmode;if(J(nn),Zt!==2||st||Wt(),it)cn.indexOf("select")>-1&&S(ln,nn,de,Le,fe.id,$e),cn.indexOf("event")>-1&&r.click(nn,ln,fe.id);else if(Zt===1&&st){var kn=ye?Te:ke,An=ye==="s"||Ce==="w"?0:1,wn=kn._name+".range["+An+"]",Cn=function(qn,sr){var pr,ir=qn.range[sr],Jn=Math.abs(ir-qn.range[1-sr]);return qn.type==="date"?ir:qn.type==="log"?(pr=Math.ceil(Math.max(0,-Math.log(Jn)/Math.LN10))+3,i("."+pr+"g")(Math.pow(10,ir))):(pr=Math.floor(Math.log(Math.abs(ir))/Math.LN10)-Math.floor(Math.log(Jn)/Math.LN10)+4,i("."+String(pr)+"g")(ir))}(kn,An),_n="left",zn="middle";if(kn.fixedrange)return;ye?(zn=ye==="n"?"top":"bottom",kn.side==="right"&&(_n="right")):Ce==="e"&&(_n="right"),nn._context.showAxisRangeEntryBoxes&&T.select(Ft).call(t.makeEditable,{gd:nn,immediate:!0,background:nn._fullLayout.paper_bgcolor,text:String(Cn),fill:kn.tickfont?kn.tickfont.color:"#444",horizontalAlign:_n,verticalAlign:zn}).on("edit",function(qn){var sr=kn.d2r(qn);sr!==void 0&&h.call("_guiRelayout",nn,wn,sr)})}}}function xt(Zt,ln){if(oe._transitioningWithDuration)return!1;var nn=Math.max(0,Math.min(Oe,mt*Zt+Pt)),cn=Math.max(0,Math.min(Fe,Mt*ln+Xe)),kn=Math.abs(nn-Pt),An=Math.abs(cn-Xe);function wn(){ot="",Ke.r=Ke.l,Ke.t=Ke.b,Ue.attr("d","M0,0Z")}if(Ke.l=Math.min(Pt,nn),Ke.r=Math.max(Pt,nn),Ke.t=Math.min(Xe,cn),Ke.b=Math.max(Xe,cn),pe.isSubplotConstrained)kn>P||An>P?(ot="xy",kn/Oe>An/Fe?(An=kn*Fe/Oe,Xe>cn?Ke.t=Xe-An:Ke.b=Xe+An):(kn=An*Oe/Fe,Pt>nn?Ke.l=Pt-kn:Ke.r=Pt+kn),Ue.attr("d",K(Ke))):wn();else if(be.isSubplotConstrained)if(kn>P||An>P){ot="xy";var Cn=Math.min(Ke.l/Oe,(Fe-Ke.b)/Fe),_n=Math.max(Ke.r/Oe,(Fe-Ke.t)/Fe);Ke.l=Cn*Oe,Ke.r=_n*Oe,Ke.b=(1-Cn)*Fe,Ke.t=(1-_n)*Fe,Ue.attr("d",K(Ke))}else wn();else!De||An<Math.min(Math.max(.6*kn,O),P)?kn<O||!Me?wn():(Ke.t=0,Ke.b=Fe,ot="x",Ue.attr("d",function(zn,qn){return"M"+(zn.l-.5)+","+(qn-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(zn.r+.5)+","+(qn-P-.5)+"h3v"+(2*P+1)+"h-3Z"}(Ke,Xe))):!Me||kn<Math.min(.6*An,P)?(Ke.l=0,Ke.r=Oe,ot="y",Ue.attr("d",function(zn,qn){return"M"+(qn-P-.5)+","+(zn.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(qn-P-.5)+","+(zn.b+.5)+"v3h"+(2*P+1)+"v-3Z"}(Ke,Pt))):(ot="xy",Ue.attr("d",K(Ke)));Ke.w=Ke.r-Ke.l,Ke.h=Ke.b-Ke.t,ot&&(at=!0),oe._dragged=at,te(je,Ue,Ke,Je,lt,He),dt(),oe.emit("plotly_relayouting",ht),lt=!0}function dt(){ht={},ot!=="xy"&&ot!=="x"||(j(de,Ke.l/Oe,Ke.r/Oe,ht,pe.xaxes),Xt("x",ht)),ot!=="xy"&&ot!=="y"||(j(Le,(Fe-Ke.b)/Fe,(Fe-Ke.t)/Fe,ht,pe.yaxes),Xt("y",ht))}function Lt(){dt(),J(oe),Vt(),X(oe)}$e.prepFn=function(Zt,ln,nn){var cn=$e.dragmode,kn=oe._fullLayout.dragmode;kn!==cn&&($e.dragmode=kn),St(),mt=oe._fullLayout._invScaleX,Mt=oe._fullLayout._invScaleY,Ne||(it?Zt.shiftKey?kn==="pan"?kn="zoom":c(kn)||(kn="pan"):Zt.ctrlKey&&(kn="pan"):kn="pan"),b(kn)?$e.minDrag=1:$e.minDrag=void 0,c(kn)?($e.xaxes=de,$e.yaxes=Le,k(Zt,ln,nn,$e,kn)):($e.clickFn=yt,c(cn)&&gt(),Ne||(kn==="zoom"?($e.moveFn=xt,$e.doneFn=Lt,$e.minDrag=1,function(An,wn,Cn){var _n=Ft.getBoundingClientRect();Pt=wn-_n.left,Xe=Cn-_n.top,oe._fullLayout._calcInverseTransform(oe);var zn=w.apply3DTransform(oe._fullLayout._invTransform)(Pt,Xe);Pt=zn[0],Xe=zn[1],Ke={l:Pt,r:Pt,w:0,t:Xe,b:Xe,h:0},He=oe._hmpixcount?oe._hmlumcount/oe._hmpixcount:_(oe._fullLayout.plot_bgcolor).getLuminance(),lt=!1,ot="xy",at=!1,je=V(_t,He,we,Ee,Je="M0,0H"+Oe+"V"+Fe+"H0V0"),Ue=H(_t,we,Ee)}(0,ln,nn)):kn==="pan"&&($e.moveFn=Bt,$e.doneFn=Vt))),oe._fullLayout._redrag=function(){var An=oe._dragdata;if(An&&An.element===Ft){var wn=oe._fullLayout.dragmode;c(wn)||(St(),on([0,0,Oe,Fe]),$e.moveFn(An.dx,An.dy))}}},u.init($e);var Tt=[0,0,Oe,Fe],bt=null,Ct=E.REDRAWDELAY,Dt=fe.mainplot?oe._fullLayout._plots[fe.mainplot]:fe;function Bt(Zt,ln){if(Zt*=mt,ln*=Mt,!oe._transitioningWithDuration){if(oe._fullLayout._replotting=!0,Me==="ew"||De==="ns"){var nn=Me?-Zt:0,cn=De?-ln:0;if(be.isSubplotConstrained){if(Me&&De){var kn=(Zt/Oe-ln/Fe)/2;nn=-(Zt=kn*Oe),cn=-(ln=-kn*Fe)}De?nn=-cn*Oe/Fe:cn=-nn*Fe/Oe}return Me&&(Z(de,Zt),Xt("x")),De&&(Z(Le,ln),Xt("y")),on([nn,cn,Oe,Fe]),an(),void oe.emit("plotly_relayouting",ht)}var An,wn,Cn=Me==="w"==(De==="n")?1:-1;if(Me&&De&&(pe.isSubplotConstrained||be.isSubplotConstrained)){var _n=(Zt/Oe+Cn*ln/Fe)/2;Zt=_n*Oe,ln=Cn*_n*Fe}if(Me==="w"?Zt=pr(de,0,Zt):Me==="e"?Zt=pr(de,1,-Zt):Me||(Zt=0),De==="n"?ln=pr(Le,1,ln):De==="s"?ln=pr(Le,0,-ln):De||(ln=0),An=Me==="w"?Zt:0,wn=De==="n"?ln:0,pe.isSubplotConstrained&&!be.isSubplotConstrained||be.isSubplotConstrained&&Me&&De&&Cn>0){var zn;if(be.isSubplotConstrained||!Me&&De.length===1){for(zn=0;zn<de.length;zn++)de[zn].range=de[zn]._r.slice(),M(de[zn],1-ln/Fe);An=(Zt=ln*Oe/Fe)/2}if(be.isSubplotConstrained||!De&&Me.length===1){for(zn=0;zn<Le.length;zn++)Le[zn].range=Le[zn]._r.slice(),M(Le[zn],1-Zt/Oe);wn=(ln=Zt*Fe/Oe)/2}}be.isSubplotConstrained&&De||Xt("x"),be.isSubplotConstrained&&Me||Xt("y");var qn=Oe-Zt,sr=Fe-ln;!be.isSubplotConstrained||Me&&De||(Me?(wn=An?0:Zt*Fe/Oe,sr=qn*Fe/Oe):(An=wn?0:ln*Oe/Fe,qn=sr*Oe/Fe)),on([An,wn,qn,sr]),an(),oe.emit("plotly_relayouting",ht)}function pr(ir,Jn,mr){for(var qt,tn,dn=1-Jn,vn=0;vn<ir.length;vn++){var On=ir[vn];if(!On.fixedrange){qt=On,tn=On._rl[dn]+(On._rl[Jn]-On._rl[dn])/F(mr/On._length);var Hn=On.l2r(tn);Hn!==!1&&Hn!==void 0&&(On.range[Jn]=Hn)}}return qt._length*(qt._rl[Jn]-tn)/(qt._rl[Jn]-qt._rl[dn])}}function Xt(Zt,ln){for(var nn=be.isSubplotConstrained?{x:Le,y:de}[Zt]:be[Zt+"axes"],cn=be.isSubplotConstrained?{x:de,y:Le}[Zt]:[],kn=0;kn<nn.length;kn++){var An=nn[kn],wn=An._id,Cn=be.xLinks[wn]||be.yLinks[wn],_n=cn[0]||le[Cn]||ue[Cn];_n&&(ln?(ln[An._name+".range[0]"]=ln[_n._name+".range[0]"],ln[An._name+".range[1]"]=ln[_n._name+".range[1]"]):An.range=_n.range.slice())}}function an(){var Zt,ln=[];function nn(wn){for(Zt=0;Zt<wn.length;Zt++)wn[Zt].fixedrange||ln.push(wn[Zt]._id)}function cn(wn,Cn){for(Zt=0;Zt<wn.length;Zt++){var _n=wn[Zt],zn=_n[Cn];_n.fixedrange||zn.tickmode!=="sync"||ln.push(zn._id)}}for(Be&&(nn(de),nn(pe.xaxes),nn(be.xaxes),cn(fe.overlays,"xaxis")),Ye&&(nn(Le),nn(pe.yaxes),nn(be.yaxes),cn(fe.overlays,"yaxis")),ht={},Zt=0;Zt<ln.length;Zt++){var kn=ln[Zt],An=y(oe,kn);l.drawOne(oe,An,{skipTitle:!0}),ht[An._name+".range[0]"]=An.range[0],ht[An._name+".range[1]"]=An.range[1]}l.redrawComponents(oe,ln)}function Wt(){if(!oe._transitioningWithDuration){var Zt=oe._context.doubleClick,ln=[];Me&&(ln=ln.concat(de)),De&&(ln=ln.concat(Le)),be.xaxes&&(ln=ln.concat(be.xaxes)),be.yaxes&&(ln=ln.concat(be.yaxes));var nn,cn,kn={};if(Zt==="reset+autosize")for(Zt="autosize",cn=0;cn<ln.length;cn++){var An=(nn=ln[cn])._rangeInitial0,wn=nn._rangeInitial1,Cn=An!==void 0||wn!==void 0;if(Cn&&(An!==void 0&&An!==nn.range[0]||wn!==void 0&&wn!==nn.range[1])||!Cn&&nn.autorange!==!0){Zt="reset";break}}if(Zt==="autosize")for(cn=0;cn<ln.length;cn++)(nn=ln[cn]).fixedrange||(kn[nn._name+".autorange"]=!0);else if(Zt==="reset"){for((Me||pe.isSubplotConstrained)&&(ln=ln.concat(pe.xaxes)),De&&!pe.isSubplotConstrained&&(ln=ln.concat(pe.yaxes)),pe.isSubplotConstrained&&(Me?De||(ln=ln.concat(Le)):ln=ln.concat(de)),cn=0;cn<ln.length;cn++)if(!(nn=ln[cn]).fixedrange){var _n=nn._name,zn=nn._autorangeInitial;nn._rangeInitial0===void 0&&nn._rangeInitial1===void 0?kn[_n+".autorange"]=!0:nn._rangeInitial0===void 0?(kn[_n+".autorange"]=zn,kn[_n+".range"]=[null,nn._rangeInitial1]):nn._rangeInitial1===void 0?(kn[_n+".range"]=[nn._rangeInitial0,null],kn[_n+".autorange"]=zn):kn[_n+".range"]=[nn._rangeInitial0,nn._rangeInitial1]}}oe.emit("plotly_doubleclick",null),h.call("_guiRelayout",oe,kn)}}function Vt(){on([0,0,Oe,Fe]),w.syncOrAsync([x.previousPromises,function(){oe._fullLayout._replotting=!1,h.call("_guiRelayout",oe,ht)}],oe)}function on(Zt){var ln,nn,cn,kn,An=oe._fullLayout,wn=An._plots,Cn=An._subplots.cartesian;if(et&&h.subplotsRegistry.splom.drag(oe),We){for(ln=0;ln<Cn.length;ln++)if(cn=(nn=wn[Cn[ln]]).xaxis,kn=nn.yaxis,nn._scene){var _n=w.simpleMap(cn.range,cn.r2l),zn=w.simpleMap(kn.range,kn.r2l);cn.limitRange&&cn.limitRange(),kn.limitRange&&kn.limitRange(),_n=cn.range,zn=kn.range,nn._scene.update({range:[_n[0],zn[0],_n[1],zn[1]]})}}if((et||We)&&(d(oe),m(oe)),ft){var qn=Zt[2]/ke._length,sr=Zt[3]/Te._length;for(ln=0;ln<Cn.length;ln++){cn=(nn=wn[Cn[ln]]).xaxis,kn=nn.yaxis;var pr,ir,Jn,mr,qt=(Be||be.isSubplotConstrained)&&!cn.fixedrange&&le[cn._id],tn=(Ye||be.isSubplotConstrained)&&!kn.fixedrange&&ue[kn._id];if(qt?(pr=qn,Jn=Ce||be.isSubplotConstrained?Zt[0]:fn(cn,pr)):be.xaHash[cn._id]?(pr=qn,Jn=Zt[0]*cn._length/ke._length):be.yaHash[cn._id]?(pr=sr,Jn=De==="ns"?-Zt[1]*cn._length/Te._length:fn(cn,pr,{n:"top",s:"bottom"}[De])):Jn=Ln(cn,pr=Sn(cn,qn,sr)),pr>1&&(cn.maxallowed!==void 0&&Be===(cn.range[0]<cn.range[1]?"e":"w")||cn.minallowed!==void 0&&Be===(cn.range[0]<cn.range[1]?"w":"e"))&&(pr=1,Jn=0),tn?(ir=sr,mr=ye||be.isSubplotConstrained?Zt[1]:fn(kn,ir)):be.yaHash[kn._id]?(ir=sr,mr=Zt[1]*kn._length/Te._length):be.xaHash[kn._id]?(ir=qn,mr=Me==="ew"?-Zt[0]*kn._length/ke._length:fn(kn,ir,{e:"right",w:"left"}[Me])):mr=Ln(kn,ir=Sn(kn,qn,sr)),ir>1&&(kn.maxallowed!==void 0&&Ye===(kn.range[0]<kn.range[1]?"n":"s")||kn.minallowed!==void 0&&Ye===(kn.range[0]<kn.range[1]?"s":"n"))&&(ir=1,mr=0),pr||ir){pr||(pr=1),ir||(ir=1);var dn=cn._offset-Jn/pr,vn=kn._offset-mr/ir;nn.clipRect.call(n.setTranslate,Jn,mr).call(n.setScale,pr,ir),nn.plot.call(n.setTranslate,dn,vn).call(n.setScale,1/pr,1/ir),pr===nn.xScaleFactor&&ir===nn.yScaleFactor||(n.setPointGroupScale(nn.zoomScalePts,pr,ir),n.setTextPointsScale(nn.zoomScaleTxt,pr,ir)),n.hideOutsideRangePoints(nn.clipOnAxisFalseTraces,nn),nn.xScaleFactor=pr,nn.yScaleFactor=ir}}}}function Sn(Zt,ln,nn){return Zt.fixedrange?0:Be&&pe.xaHash[Zt._id]?ln:Ye&&(pe.isSubplotConstrained?pe.xaHash:pe.yaHash)[Zt._id]?nn:0}function Ln(Zt,ln){return ln?(Zt.range=Zt._r.slice(),M(Zt,ln),fn(Zt,ln)):0}function fn(Zt,ln,nn){return Zt._length*(1-ln)*g[nn||Zt.constraintoward||"middle"]}return ye.length*Ce.length!=1&&ie(Ft,function(Zt){if(oe._context._scrollZoom.cartesian||oe._fullLayout._enablescrollzoom){if(gt(),oe._transitioningWithDuration)return Zt.preventDefault(),void Zt.stopPropagation();St(),clearTimeout(bt);var ln=-Zt.deltaY;if(isFinite(ln)||(ln=Zt.wheelDelta/10),isFinite(ln)){var nn,cn=Math.exp(-Math.min(Math.max(ln,-20),20)/200),kn=Dt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),An=(Zt.clientX-kn.left)/kn.width,wn=(kn.bottom-Zt.clientY)/kn.height;if(Be){for(Ce||(An=.5),nn=0;nn<de.length;nn++)Cn(de[nn],An,cn);Xt("x"),Tt[2]*=cn,Tt[0]+=Tt[2]*An*(1/cn-1)}if(Ye){for(ye||(wn=.5),nn=0;nn<Le.length;nn++)Cn(Le[nn],wn,cn);Xt("y"),Tt[3]*=cn,Tt[1]+=Tt[3]*(1-wn)*(1/cn-1)}on(Tt),an(),oe.emit("plotly_relayouting",ht),bt=setTimeout(function(){oe._fullLayout&&(Tt=[0,0,Oe,Fe],Vt())},Ct),Zt.preventDefault()}else w.log("Did not find wheel motion attributes: ",Zt)}function Cn(_n,zn,qn){if(!_n.fixedrange){var sr=w.simpleMap(_n.range,_n.r2l),pr=sr[0]+(sr[1]-sr[0])*zn;_n.range=sr.map(function(ir){return _n.l2r(pr+(ir-pr)*qn)})}}}),Ft},makeDragger:z,makeRectDragger:U,makeZoombox:V,makeCorners:H,updateZoombox:te,xyCorners:K,transitionZoombox:$,removeZoombox:J,showDoubleClickNotifier:X,attachWheelEventHandler:ie}},4305:function(N,L,e){var T=e(39898),w=e(30211),i=e(28569),_=e(6964),v=e(29323).makeDragBox,h=e(85555).DRAGGERSIZE;L.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)T.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(n,r){if((t._plots[n].mainplot&&!0)===(t._plots[r].mainplot&&!0)){var l=n.split("y"),o=r.split("y");return l[0]===o[0]?Number(l[1]||1)-Number(o[1]||1):Number(l[0]||1)-Number(o[0]||1)}return t._plots[n].mainplot?1:-1}).forEach(function(n){var r=t._plots[n],l=r.xaxis,o=r.yaxis;if(!r.mainplot){var u=v(s,r,l._offset,o._offset,l._length,o._length,"ns","ew");u.onmousemove=function(b){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===n&&s._fullLayout._plots[n]&&w.hover(s,b,n)},w.hover(s,b,n),s._fullLayout._lasthover=u,s._fullLayout._hoversubplot=n},u.onmouseout=function(b){s._dragging||(s._fullLayout._hoversubplot=null,i.unhover(s,b))},s._context.showAxisDragHandles&&(v(s,r,l._offset-h,o._offset-h,h,h,"n","w"),v(s,r,l._offset+l._length,o._offset-h,h,h,"n","e"),v(s,r,l._offset-h,o._offset+o._length,h,h,"s","w"),v(s,r,l._offset+l._length,o._offset+o._length,h,h,"s","e"))}if(s._context.showAxisDragHandles){if(n===l._mainSubplot){var p=l._mainLinePosition;l.side==="top"&&(p-=h),v(s,r,l._offset+.1*l._length,p,.8*l._length,h,"","ew"),v(s,r,l._offset,p,.1*l._length,h,"","w"),v(s,r,l._offset+.9*l._length,p,.1*l._length,h,"","e")}if(n===o._mainSubplot){var c=o._mainLinePosition;o.side!=="right"&&(c-=h),v(s,r,c,o._offset+.1*o._length,h,.8*o._length,"ns",""),v(s,r,c,o._offset+.9*o._length,h,.1*o._length,"s",""),v(s,r,c,o._offset,h,.1*o._length,"n","")}}});var a=t._hoverlayer.node();a.onmousemove=function(n){n.target=s._fullLayout._lasthover,w.hover(s,n,t._hoversubplot)},a.onclick=function(n){n.target=s._fullLayout._lasthover,w.click(s,n)},a.onmousedown=function(n){s._fullLayout._lasthover.onmousedown(n)},L.updateFx(s)}},L.updateFx=function(s){var t=s._fullLayout,a=t.dragmode==="pan"?"move":"crosshair";_(t._draggers,a)}},76325:function(N,L,e){var T=e(73972),w=e(71828),i=e(41675);N.exports=function(_){return function(v,h){var s=v[_];if(Array.isArray(s))for(var t=T.subplotsRegistry.cartesian,a=t.idRegex,n=h._subplots,r=n.xaxis,l=n.yaxis,o=n.cartesian,u=h._has("cartesian")||h._has("gl2d"),p=0;p<s.length;p++){var c=s[p];if(w.isPlainObject(c)){var b=i.cleanId(c.xref,"x",!1),g=i.cleanId(c.yref,"y",!1),d=a.x.test(b),m=a.y.test(g);if(d||m){u||w.pushUnique(h._basePlotModules,t);var x=!1;d&&r.indexOf(b)===-1&&(r.push(b),x=!0),m&&l.indexOf(g)===-1&&(l.push(g),x=!0),x&&d&&m&&o.push(b+g)}}}}}},93612:function(N,L,e){var T=e(39898),w=e(73972),i=e(71828),_=e(74875),v=e(91424),h=e(27659).a0,s=e(41675),t=e(85555),a=e(77922),n=i.ensureSingle;function r(c,b,g){return i.ensureSingle(c,b,g,function(d){d.datum(g)})}function l(c,b,g,d,m){for(var x,y,k,f=t.traceLayerClasses,S=c._fullLayout,M=S._modules,E=[],O=[],P=0;P<M.length;P++){var I=(x=M[P]).name,z=w.modules[I].categories;if(z.svg){var U=x.layerName||I+"layer",R=x.plot;k=(y=h(g,R))[0],g=y[1],k.length&&E.push({i:f.indexOf(U),className:U,plotMethod:R,cdModule:k}),z.zoomScale&&O.push("."+U)}}E.sort(function(F,V){return F.i-V.i});var j=b.plot.selectAll("g.mlayer").data(E,function(F){return F.className});if(j.enter().append("g").attr("class",function(F){return F.className}).classed("mlayer",!0).classed("rangeplot",b.isRangePlot),j.exit().remove(),j.order(),j.each(function(F){var V=T.select(this),H=F.className;F.plotMethod(c,b,F.cdModule,V,d,m),t.clipOnAxisFalseQuery.indexOf("."+H)===-1&&v.setClipUrl(V,b.layerClipId,c)}),S._has("scattergl")&&(x=w.getModule("scattergl"),k=h(g,x)[0],x.plot(c,b,k)),!c._context.staticPlot&&(b._hasClipOnAxisFalse&&(b.clipOnAxisFalseTraces=b.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),O.length)){var Z=b.plot.selectAll(O.join(",")).selectAll(".trace");b.zoomScalePts=Z.selectAll("path.point"),b.zoomScaleTxt=Z.selectAll(".textpoint")}}function o(c,b){var g=b.plotgroup,d=b.id,m=t.layerValue2layerClass[b.xaxis.layer],x=t.layerValue2layerClass[b.yaxis.layer],y=c._fullLayout._hasOnlyLargeSploms;if(b.mainplot){var k=b.mainplotinfo,f=k.plotgroup,S=d+"-x",M=d+"-y";b.minorGridlayer=k.minorGridlayer,b.gridlayer=k.gridlayer,b.zerolinelayer=k.zerolinelayer,n(k.overlinesBelow,"path",S),n(k.overlinesBelow,"path",M),n(k.overaxesBelow,"g",S),n(k.overaxesBelow,"g",M),b.plot=n(k.overplot,"g",d),n(k.overlinesAbove,"path",S),n(k.overlinesAbove,"path",M),n(k.overaxesAbove,"g",S),n(k.overaxesAbove,"g",M),b.xlines=f.select(".overlines-"+m).select("."+S),b.ylines=f.select(".overlines-"+x).select("."+M),b.xaxislayer=f.select(".overaxes-"+m).select("."+S),b.yaxislayer=f.select(".overaxes-"+x).select("."+M)}else if(y)b.xlines=n(g,"path","xlines-above"),b.ylines=n(g,"path","ylines-above"),b.xaxislayer=n(g,"g","xaxislayer-above"),b.yaxislayer=n(g,"g","yaxislayer-above");else{var E=n(g,"g","layer-subplot");b.shapelayer=n(E,"g","shapelayer"),b.imagelayer=n(E,"g","imagelayer"),b.minorGridlayer=n(g,"g","minor-gridlayer"),b.gridlayer=n(g,"g","gridlayer"),b.zerolinelayer=n(g,"g","zerolinelayer"),n(g,"path","xlines-below"),n(g,"path","ylines-below"),b.overlinesBelow=n(g,"g","overlines-below"),n(g,"g","xaxislayer-below"),n(g,"g","yaxislayer-below"),b.overaxesBelow=n(g,"g","overaxes-below"),b.plot=n(g,"g","plot"),b.overplot=n(g,"g","overplot"),b.xlines=n(g,"path","xlines-above"),b.ylines=n(g,"path","ylines-above"),b.overlinesAbove=n(g,"g","overlines-above"),n(g,"g","xaxislayer-above"),n(g,"g","yaxislayer-above"),b.overaxesAbove=n(g,"g","overaxes-above"),b.xlines=g.select(".xlines-"+m),b.ylines=g.select(".ylines-"+x),b.xaxislayer=g.select(".xaxislayer-"+m),b.yaxislayer=g.select(".yaxislayer-"+x)}y||(r(b.minorGridlayer,"g",b.xaxis._id),r(b.minorGridlayer,"g",b.yaxis._id),b.minorGridlayer.selectAll("g").map(function(O){return O[0]}).sort(s.idSort),r(b.gridlayer,"g",b.xaxis._id),r(b.gridlayer,"g",b.yaxis._id),b.gridlayer.selectAll("g").map(function(O){return O[0]}).sort(s.idSort)),b.xlines.style("fill","none").classed("crisp",!0),b.ylines.style("fill","none").classed("crisp",!0)}function u(c,b){if(c){var g={};for(var d in c.each(function(k){var f=k[0];T.select(this).remove(),p(f,b),g[f]=!0}),b._plots)for(var m=b._plots[d].overlays||[],x=0;x<m.length;x++){var y=m[x];g[y.id]&&y.plot.selectAll(".trace").remove()}}}function p(c,b){b._draggers.selectAll("g."+c).remove(),b._defs.select("#clip"+b._uid+c+"plot").remove()}L.name="cartesian",L.attr=["xaxis","yaxis"],L.idRoot=["x","y"],L.idRegex=t.idRegex,L.attrRegex=t.attrRegex,L.attributes=e(89502),L.layoutAttributes=e(13838),L.supplyLayoutDefaults=e(86763),L.transitionAxes=e(66847),L.finalizeSubplots=function(c,b){var g,d,m,x=b._subplots,y=x.xaxis,k=x.yaxis,f=x.cartesian,S=f.concat(x.gl2d||[]),M={},E={};for(g=0;g<S.length;g++){var O=S[g].split("y");M[O[0]]=1,E["y"+O[1]]=1}for(g=0;g<y.length;g++)M[d=y[g]]||(m=(c[s.id2name(d)]||{}).anchor,t.idRegex.y.test(m)||(m="y"),f.push(d+m),S.push(d+m),E[m]||(E[m]=1,i.pushUnique(k,m)));for(g=0;g<k.length;g++)E[m=k[g]]||(d=(c[s.id2name(m)]||{}).anchor,t.idRegex.x.test(d)||(d="x"),f.push(d+m),S.push(d+m),M[d]||(M[d]=1,i.pushUnique(y,d)));if(!S.length){for(var P in d="",m="",c)t.attrRegex.test(P)&&(P.charAt(0)==="x"?(!d||+P.substr(5)<+d.substr(5))&&(d=P):(!m||+P.substr(5)<+m.substr(5))&&(m=P));d=d?s.name2id(d):"x",m=m?s.name2id(m):"y",y.push(d),k.push(m),f.push(d+m)}},L.plot=function(c,b,g,d){var m,x=c._fullLayout,y=x._subplots.cartesian,k=c.calcdata;if(!Array.isArray(b))for(b=[],m=0;m<k.length;m++)b.push(m);for(m=0;m<y.length;m++){for(var f,S=y[m],M=x._plots[S],E=[],O=0;O<k.length;O++){var P=k[O],I=P[0].trace;I.xaxis+I.yaxis===S&&((b.indexOf(I.index)!==-1||I.carpet)&&(f&&f[0].trace.xaxis+f[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&E.indexOf(f)===-1&&E.push(f),E.push(P)),f=P)}l(c,M,E,g,d)}},L.clean=function(c,b,g,d){var m,x,y,k=d._plots||{},f=b._plots||{},S=d._subplots||{};if(d._hasOnlyLargeSploms&&!b._hasOnlyLargeSploms)for(y in k)(m=k[y]).plotgroup&&m.plotgroup.remove();var M=d._has&&d._has("gl"),E=b._has&&b._has("gl");if(M&&!E)for(y in k)(m=k[y])._scene&&m._scene.destroy();if(S.xaxis&&S.yaxis){var O=s.listIds({_fullLayout:d});for(x=0;x<O.length;x++){var P=O[x];b[s.id2name(P)]||d._infolayer.selectAll(".g-"+P+"title").remove()}}var I=d._has&&d._has("cartesian"),z=b._has&&b._has("cartesian");if(I&&!z)u(d._cartesianlayer.selectAll(".subplot"),d),d._defs.selectAll(".axesclip").remove(),delete d._axisConstraintGroups,delete d._axisMatchGroups;else if(S.cartesian)for(x=0;x<S.cartesian.length;x++){var U=S.cartesian[x];if(!f[U]){var R="."+U+",."+U+"-x,."+U+"-y";d._cartesianlayer.selectAll(R).remove(),p(U,d)}}},L.drawFramework=function(c){var b=c._fullLayout,g=function(m){var x,y,k,f,S,M,E=m._fullLayout,O=E._subplots.cartesian,P=O.length,I=[],z=[];for(x=0;x<P;x++){k=O[x],S=(f=E._plots[k]).xaxis,M=f.yaxis;var U=S._mainAxis,R=M._mainAxis,j=U._id+R._id,Z=E._plots[j];f.overlays=[],j!==k&&Z?(f.mainplot=j,f.mainplotinfo=Z,z.push(k)):(f.mainplot=void 0,f.mainplotinfo=void 0,I.push(k))}for(x=0;x<z.length;x++)k=z[x],(f=E._plots[k]).mainplotinfo.overlays.push(f);var F=I.concat(z),V=new Array(P);for(x=0;x<P;x++){k=F[x],S=(f=E._plots[k]).xaxis,M=f.yaxis;var H=[k,S.layer,M.layer,S.overlaying||"",M.overlaying||""];for(y=0;y<f.overlays.length;y++)H.push(f.overlays[y].id);V[x]=H}return V}(c),d=b._cartesianlayer.selectAll(".subplot").data(g,String);d.enter().append("g").attr("class",function(m){return"subplot "+m[0]}),d.order(),d.exit().call(u,b),d.each(function(m){var x=m[0],y=b._plots[x];y.plotgroup=T.select(this),o(c,y),y.draglayer=n(b._draggers,"g",x)})},L.rangePlot=function(c,b,g){o(c,b),l(c,b,g),_.style(c)},L.toSVG=function(c){var b=c._fullLayout._glimages,g=T.select(c).selectAll(".svg-container");g.filter(function(d,m){return m===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var d=this,m=d.toDataURL("image/png");b.append("svg:image").attr({xmlns:a.svg,"xlink:href":m,preserveAspectRatio:"none",x:0,y:0,width:d.style.width,height:d.style.height})})},L.updateFx=e(4305).updateFx},13838:function(N,L,e){var T=e(41940),w=e(22399),i=e(79952).P,_=e(1426).extendFlat,v=e(44467).templatedArray,h=e(12663).descriptionWithDates,s=e(50606).ONEDAY,t=e(85555),a=t.HOUR_PATTERN,n=t.WEEKDAY_PATTERN,r={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},l=_({},r,{values:r.values.slice().concat(["sync"])});function o(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},b={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function g(S){var M={valType:"number",min:0,editType:"ticks"};return S||(M.dflt=5),M}function d(S){var M={valType:"number",min:0,editType:"ticks"};return S||(M.dflt=1),M}var m={valType:"color",dflt:w.defaultLine,editType:"ticks"},x={valType:"color",dflt:w.lightLine,editType:"ticks"};function y(S){var M={valType:"number",min:0,editType:"ticks"};return S||(M.dflt=1),M}var k=_({},i,{editType:"ticks"}),f={valType:"boolean",editType:"ticks"};N.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:w.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:T({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:v("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[n,a,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:l,nticks:o(),tick0:u,dtick:p,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:b,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:g(),tickwidth:d(),tickcolor:m,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:_({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:T({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:h("tick label")},tickformatstops:v("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:h("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:w.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:f,gridcolor:x,gridwidth:y(),griddash:k,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:w.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:w.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:r,nticks:o("minor"),tick0:u,dtick:p,tickvals:c,ticks:b,ticklen:g("minor"),tickwidth:d("minor"),tickcolor:m,gridcolor:x,gridwidth:y("minor"),griddash:k,showgrid:f,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:T({editType:"ticks"})}}},86763:function(N,L,e){var T=e(71828),w=e(7901),i=e(23469).isUnifiedHover,_=e(98212),v=e(44467),h=e(10820),s=e(13838),t=e(951),a=e(71453),n=e(99082),r=e(52830),l=e(41675),o=l.id2name,u=l.name2id,p=e(85555).AX_ID_PATTERN,c=e(73972),b=c.traceIs,g=c.getComponentMethod;function d(m,x,y){Array.isArray(m[x])?m[x].push(y):m[x]=[y]}N.exports=function(m,x,y){var k,f,S=x.autotypenumbers,M={},E={},O={},P={},I={},z={},U={},R={},j={},Z={};for(k=0;k<y.length;k++){var F=y[k];if(b(F,"cartesian")||b(F,"gl2d")){var V,H;if(F.xaxis)V=o(F.xaxis),d(M,V,F);else if(F.xaxes)for(f=0;f<F.xaxes.length;f++)d(M,o(F.xaxes[f]),F);if(F.yaxis)H=o(F.yaxis),d(M,H,F);else if(F.yaxes)for(f=0;f<F.yaxes.length;f++)d(M,o(F.yaxes[f]),F);F.type==="funnel"?F.orientation==="h"?(V&&(E[V]=!0),H&&(U[H]=!0)):H&&(O[H]=!0):F.type==="image"?(H&&(R[H]=!0),V&&(R[V]=!0)):(H&&(I[H]=!0,z[H]=!0),b(F,"carpet")&&(F.type!=="carpet"||F._cheater)||V&&(P[V]=!0)),F.type==="carpet"&&F._cheater&&V&&(E[V]=!0),b(F,"2dMap")&&(j[V]=!0,j[H]=!0),b(F,"oriented")&&(Z[F.orientation==="h"?H:V]=!0)}}var te=x._subplots,$=te.xaxis,J=te.yaxis,X=T.simpleMap($,o),K=T.simpleMap(J,o),ee=X.concat(K),ie=w.background;$.length&&J.length&&(ie=T.coerce(m,x,h,"plot_bgcolor"));var ae,oe,fe,ge,ve,xe=w.combine(ie,x.paper_bgcolor);function _e(){var st=M[ae]||[];ve._traceIndices=st.map(function(St){return St._expandedIndex}),ve._annIndices=[],ve._shapeIndices=[],ve._selectionIndices=[],ve._imgIndices=[],ve._subplotsWith=[],ve._counterAxes=[],ve._name=ve._attr=ae,ve._id=oe}function ye(st,St){return T.coerce(ge,ve,s,st,St)}function Ce(st,St){return T.coerce2(ge,ve,s,st,St)}function ke(st){return st==="x"?J:$}function Te(st,St){for(var zt=st==="x"?X:K,Ft=[],Pt=0;Pt<zt.length;Pt++){var Xe=zt[Pt];Xe===St||(m[Xe]||{}).overlaying||Ft.push(u(Xe))}return Ft}var le={x:ke("x"),y:ke("y")},ue=le.x.concat(le.y),de={},Le=[];function we(){var st=ge.matches;p.test(st)&&ue.indexOf(st)===-1&&(de[st]=ge.type,Le=Object.keys(de))}var Ee=_(m,x),Oe=i(Ee);for(k=0;k<ee.length;k++){ae=ee[k],oe=u(ae),fe=ae.charAt(0),T.isPlainObject(m[ae])||(m[ae]={}),ge=m[ae],ve=v.newContainer(x,ae,fe+"axis"),_e();var Fe=fe==="x"&&!P[ae]&&E[ae]||fe==="y"&&!I[ae]&&O[ae],pe=fe==="y"&&(!z[ae]&&U[ae]||R[ae]),be={hasMinor:!0,letter:fe,font:x.font,outerTicks:j[ae],showGrid:!Z[ae],data:M[ae]||[],bgColor:xe,calendar:x.calendar,automargin:!0,visibleDflt:Fe,reverseDflt:pe,autotypenumbersDflt:S,splomStash:((x._splomAxes||{})[fe]||{})[oe]};ye("uirevision",x.uirevision),t(ge,ve,ye,be),a(ge,ve,ye,be,x);var Me=Oe&&fe===Ee.charAt(0),De=Ce("spikecolor",Oe?ve.color:void 0),Ne=Ce("spikethickness",Oe?1.5:void 0),Be=Ce("spikedash",Oe?"dot":void 0),Ye=Ce("spikemode",Oe?"across":void 0),We=Ce("spikesnap");ye("showspikes",!!(Me||De||Ne||Be||Ye||We))||(delete ve.spikecolor,delete ve.spikethickness,delete ve.spikedash,delete ve.spikemode,delete ve.spikesnap);var et=o(ge.overlaying),ft=[0,1];if(x[et]!==void 0){var ht=o(x[et].anchor);x[ht]!==void 0&&(ft=x[ht].domain)}r(ge,ve,ye,{letter:fe,counterAxes:le[fe],overlayableAxes:Te(fe,ae),grid:x.grid,overlayingDomain:ft}),ye("title.standoff"),we(),ve._input=ge}for(k=0;k<Le.length;){oe=Le[k++],fe=(ae=o(oe)).charAt(0),T.isPlainObject(m[ae])||(m[ae]={}),ge=m[ae],ve=v.newContainer(x,ae,fe+"axis"),_e();var mt={letter:fe,font:x.font,outerTicks:j[ae],showGrid:!Z[ae],data:[],bgColor:xe,calendar:x.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((x._splomAxes||{})[fe]||{})[oe]};ye("uirevision",x.uirevision),ve.type=de[oe]||"linear",a(ge,ve,ye,mt,x),r(ge,ve,ye,{letter:fe,counterAxes:le[fe],overlayableAxes:Te(fe,ae),grid:x.grid}),ye("fixedrange"),we(),ve._input=ge}var Mt=g("rangeslider","handleDefaults"),_t=g("rangeselector","handleDefaults");for(k=0;k<X.length;k++)ae=X[k],ge=m[ae],ve=x[ae],Mt(m,x,ae),ve.type==="date"&&_t(ge,ve,x,K,ve.calendar),ye("fixedrange");for(k=0;k<K.length;k++){ae=K[k],ge=m[ae],ve=x[ae];var it=x[o(ve.anchor)];ye("fixedrange",g("rangeslider","isVisible")(it))}n.handleDefaults(m,x,{axIds:ue.concat(Le).sort(l.idSort),axHasImage:R})}},92128:function(N,L,e){var T=e(84267).mix,w=e(22399),i=e(71828);N.exports=function(_,v,h,s){var t=(s=s||{}).dfltColor;function a(m,x){return i.coerce2(_,v,s.attributes,m,x)}var n=a("linecolor",t),r=a("linewidth");h("showline",s.showLine||!!n||!!r)||(delete v.linecolor,delete v.linewidth);var l=a("gridcolor",T(t,s.bgColor,s.blend||w.lightFraction).toRgbString()),o=a("gridwidth"),u=a("griddash");if(h("showgrid",s.showGrid||!!l||!!o||!!u)||(delete v.gridcolor,delete v.gridwidth,delete v.griddash),s.hasMinor){var p=a("minor.gridcolor",T(v.gridcolor,s.bgColor,67).toRgbString()),c=a("minor.gridwidth",v.gridwidth||1),b=a("minor.griddash",v.griddash||"solid");h("minor.showgrid",!!p||!!c||!!b)||(delete v.minor.gridcolor,delete v.minor.gridwidth,delete v.minor.griddash)}if(!s.noZeroLine){var g=a("zerolinecolor",t),d=a("zerolinewidth");h("zeroline",s.showGrid||!!g||!!d)||(delete v.zerolinecolor,delete v.zerolinewidth)}}},52830:function(N,L,e){var T=e(92770),w=e(71828);N.exports=function(i,_,v,h){var s,t,a,n,r,l,o=h.counterAxes||[],u=h.overlayableAxes||[],p=h.letter,c=h.grid,b=h.overlayingDomain;c&&(t=c._domains[p][c._axisMap[_._id]],s=c._anchors[_._id],t&&(a=c[p+"side"].split(" ")[0],n=c.domain[p][a==="right"||a==="top"?1:0])),t=t||[0,1],s=s||(T(i.position)?"free":o[0]||"free"),a=a||(p==="x"?"bottom":"left"),n=n||0,r=0,l=!1;var g=w.coerce(i,_,{anchor:{valType:"enumerated",values:["free"].concat(o),dflt:s}},"anchor"),d=w.coerce(i,_,{side:{valType:"enumerated",values:p==="x"?["bottom","top"]:["left","right"],dflt:a}},"side");g==="free"&&(p==="y"&&(v("autoshift")&&(n=d==="left"?b[0]:b[1],l=!_.automargin||_.automargin,r=d==="left"?-3:3),v("shift",r)),v("position",n)),v("automargin",l);var m=!1;if(u.length&&(m=w.coerce(i,_,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!m){var x=v("domain",t);x[0]>x[1]-.000244140625&&(_.domain=t),w.noneOrAll(i.domain,_.domain,t),_.tickmode==="sync"&&(_.tickmode="auto")}return v("layer"),_}},89426:function(N,L,e){var T=e(59652);N.exports=function(w,i,_,v,h){h||(h={});var s=h.tickSuffixDflt,t=T(w);_("tickprefix")&&_("showtickprefix",t),_("ticksuffix",s)&&_("showticksuffix",t)}},23608:function(N,L,e){var T=e(23074);N.exports=function(w,i,_,v){var h=i._template||{},s=i.type||h.type||"-";_("minallowed"),_("maxallowed");var t,a=_("range");a||v.noInsiderange||s==="log"||(!(t=_("insiderange"))||t[0]!==null&&t[1]!==null||(i.insiderange=!1,t=void 0),t&&(a=_("range",t)));var n,r=i.getAutorangeDflt(a,v),l=_("autorange",r);!a||(a[0]!==null||a[1]!==null)&&(a[0]!==null&&a[1]!==null||l!=="reversed"&&l!==!0)&&(a[0]===null||l!=="min"&&l!=="max reversed")&&(a[1]===null||l!=="max"&&l!=="min reversed")||(a=void 0,delete i.range,i.autorange=!0,n=!0),n||(l=_("autorange",r=i.getAutorangeDflt(a,v))),l&&(T(_,l,a),s!=="linear"&&s!=="-"||_("rangemode")),i.cleanRange()}},42449:function(N,L,e){var T=e(18783).FROM_BL;N.exports=function(w,i,_){_===void 0&&(_=T[w.constraintoward||"center"]);var v=[w.r2l(w.range[0]),w.r2l(w.range[1])],h=v[0]+(v[1]-v[0])*_;w.range=w._input.range=[w.l2r(h+(v[0]-h)*i),w.l2r(h+(v[1]-h)*i)],w.setScale()}},21994:function(N,L,e){var T=e(39898),w=e(84096).g0,i=e(71828),_=i.numberFormat,v=e(92770),h=i.cleanNumber,s=i.ms2DateTime,t=i.dateTime2ms,a=i.ensureNumber,n=i.isArrayOrTypedArray,r=e(50606),l=r.FP_SAFE,o=r.BADNUM,u=r.LOG_CLIP,p=r.ONEWEEK,c=r.ONEDAY,b=r.ONEHOUR,g=r.ONEMIN,d=r.ONESEC,m=e(41675),x=e(85555),y=x.HOUR_PATTERN,k=x.WEEKDAY_PATTERN;function f(M){return Math.pow(10,M)}function S(M){return M!=null}N.exports=function(M,E){E=E||{};var O=M._id||"x",P=O.charAt(0);function I(ee,ie){if(ee>0)return Math.log(ee)/Math.LN10;if(ee<=0&&ie&&M.range&&M.range.length===2){var ae=M.range[0],oe=M.range[1];return .5*(ae+oe-2*u*Math.abs(ae-oe))}return o}function z(ee,ie,ae,oe){if((oe||{}).msUTC&&v(ee))return+ee;var fe=t(ee,ae||M.calendar);if(fe===o){if(!v(ee))return o;ee=+ee;var ge=Math.floor(10*i.mod(ee+.05,1)),ve=Math.round(ee-ge/10);fe=t(new Date(ve))+ge/10}return fe}function U(ee,ie,ae){return s(ee,ie,ae||M.calendar)}function R(ee){return M._categories[Math.round(ee)]}function j(ee){if(S(ee)){if(M._categoriesMap===void 0&&(M._categoriesMap={}),M._categoriesMap[ee]!==void 0)return M._categoriesMap[ee];M._categories.push(typeof ee=="number"?String(ee):ee);var ie=M._categories.length-1;return M._categoriesMap[ee]=ie,ie}return o}function Z(ee){if(M._categoriesMap)return M._categoriesMap[ee]}function F(ee){var ie=Z(ee);return ie!==void 0?ie:v(ee)?+ee:void 0}function V(ee){return v(ee)?+ee:Z(ee)}function H(ee,ie,ae){return T.round(ae+ie*ee,2)}function te(ee,ie,ae){return(ee-ae)/ie}var $=function(ee){return v(ee)?H(ee,M._m,M._b):o},J=function(ee){return te(ee,M._m,M._b)};if(M.rangebreaks){var X=P==="y";$=function(ee){if(!v(ee))return o;var ie=M._rangebreaks.length;if(!ie)return H(ee,M._m,M._b);var ae=X;M.range[0]>M.range[1]&&(ae=!ae);for(var oe=ae?-1:1,fe=oe*ee,ge=0,ve=0;ve<ie;ve++){var xe=oe*M._rangebreaks[ve].min,_e=oe*M._rangebreaks[ve].max;if(fe<xe)break;if(!(fe>_e)){ge=fe<(xe+_e)/2?ve:ve+1;break}ge=ve+1}var ye=M._B[ge]||0;return isFinite(ye)?H(ee,M._m2,ye):0},J=function(ee){var ie=M._rangebreaks.length;if(!ie)return te(ee,M._m,M._b);for(var ae=0,oe=0;oe<ie&&!(ee<M._rangebreaks[oe].pmin);oe++)ee>M._rangebreaks[oe].pmax&&(ae=oe+1);return te(ee,M._m2,M._B[ae])}}M.c2l=M.type==="log"?I:a,M.l2c=M.type==="log"?f:a,M.l2p=$,M.p2l=J,M.c2p=M.type==="log"?function(ee,ie){return $(I(ee,ie))}:$,M.p2c=M.type==="log"?function(ee){return f(J(ee))}:J,["linear","-"].indexOf(M.type)!==-1?(M.d2r=M.r2d=M.d2c=M.r2c=M.d2l=M.r2l=h,M.c2d=M.c2r=M.l2d=M.l2r=a,M.d2p=M.r2p=function(ee){return M.l2p(h(ee))},M.p2d=M.p2r=J,M.cleanPos=a):M.type==="log"?(M.d2r=M.d2l=function(ee,ie){return I(h(ee),ie)},M.r2d=M.r2c=function(ee){return f(h(ee))},M.d2c=M.r2l=h,M.c2d=M.l2r=a,M.c2r=I,M.l2d=f,M.d2p=function(ee,ie){return M.l2p(M.d2r(ee,ie))},M.p2d=function(ee){return f(J(ee))},M.r2p=function(ee){return M.l2p(h(ee))},M.p2r=J,M.cleanPos=a):M.type==="date"?(M.d2r=M.r2d=i.identity,M.d2c=M.r2c=M.d2l=M.r2l=z,M.c2d=M.c2r=M.l2d=M.l2r=U,M.d2p=M.r2p=function(ee,ie,ae){return M.l2p(z(ee,0,ae))},M.p2d=M.p2r=function(ee,ie,ae){return U(J(ee),ie,ae)},M.cleanPos=function(ee){return i.cleanDate(ee,o,M.calendar)}):M.type==="category"?(M.d2c=M.d2l=j,M.r2d=M.c2d=M.l2d=R,M.d2r=M.d2l_noadd=F,M.r2c=function(ee){var ie=V(ee);return ie!==void 0?ie:M.fraction2r(.5)},M.l2r=M.c2r=a,M.r2l=V,M.d2p=function(ee){return M.l2p(M.r2c(ee))},M.p2d=function(ee){return R(J(ee))},M.r2p=M.d2p,M.p2r=J,M.cleanPos=function(ee){return typeof ee=="string"&&ee!==""?ee:a(ee)}):M.type==="multicategory"&&(M.r2d=M.c2d=M.l2d=R,M.d2r=M.d2l_noadd=F,M.r2c=function(ee){var ie=F(ee);return ie!==void 0?ie:M.fraction2r(.5)},M.r2c_just_indices=Z,M.l2r=M.c2r=a,M.r2l=F,M.d2p=function(ee){return M.l2p(M.r2c(ee))},M.p2d=function(ee){return R(J(ee))},M.r2p=M.d2p,M.p2r=J,M.cleanPos=function(ee){return Array.isArray(ee)||typeof ee=="string"&&ee!==""?ee:a(ee)},M.setupMultiCategory=function(ee){var ie,ae,oe=M._traceIndices,fe=M._matchGroup;if(fe&&M._categories.length===0){for(var ge in fe)if(ge!==O){var ve=E[m.id2name(ge)];oe=oe.concat(ve._traceIndices)}}var xe=[[0,{}],[0,{}]],_e=[];for(ie=0;ie<oe.length;ie++){var ye=ee[oe[ie]];if(P in ye){var Ce=ye[P],ke=ye._length||i.minRowLength(Ce);if(n(Ce[0])&&n(Ce[1]))for(ae=0;ae<ke;ae++){var Te=Ce[0][ae],le=Ce[1][ae];S(Te)&&S(le)&&(_e.push([Te,le]),Te in xe[0][1]||(xe[0][1][Te]=xe[0][0]++),le in xe[1][1]||(xe[1][1][le]=xe[1][0]++))}}}for(_e.sort(function(ue,de){var Le=xe[0][1],we=Le[ue[0]]-Le[de[0]];if(we)return we;var Ee=xe[1][1];return Ee[ue[1]]-Ee[de[1]]}),ie=0;ie<_e.length;ie++)j(_e[ie])}),M.fraction2r=function(ee){var ie=M.r2l(M.range[0]),ae=M.r2l(M.range[1]);return M.l2r(ie+ee*(ae-ie))},M.r2fraction=function(ee){var ie=M.r2l(M.range[0]),ae=M.r2l(M.range[1]);return(M.r2l(ee)-ie)/(ae-ie)},M.limitRange=function(ee){var ie=M.minallowed,ae=M.maxallowed;if(ie!==void 0||ae!==void 0){ee||(ee="range");var oe=i.nestedProperty(M,ee).get(),fe=i.simpleMap(oe,M.r2l),ge=fe[1]<fe[0];ge&&fe.reverse();var ve=i.simpleMap([ie,ae],M.r2l);if(ie!==void 0&&fe[0]<ve[0]&&(oe[ge?1:0]=ie),ae!==void 0&&fe[1]>ve[1]&&(oe[ge?0:1]=ae),oe[0]===oe[1]){var xe=M.l2r(ie),_e=M.l2r(ae);if(ie!==void 0){var ye=xe+1;ae!==void 0&&(ye=Math.min(ye,_e)),oe[ge?1:0]=ye}if(ae!==void 0){var Ce=_e+1;ie!==void 0&&(Ce=Math.max(Ce,xe)),oe[ge?0:1]=Ce}}}},M.cleanRange=function(ee,ie){M._cleanRange(ee,ie),M.limitRange(ee)},M._cleanRange=function(ee,ie){ie||(ie={}),ee||(ee="range");var ae,oe,fe=i.nestedProperty(M,ee).get();if(oe=(oe=M.type==="date"?i.dfltRange(M.calendar):P==="y"?x.DFLTRANGEY:M._name==="realaxis"?[0,1]:ie.dfltRange||x.DFLTRANGEX).slice(),M.rangemode!=="tozero"&&M.rangemode!=="nonnegative"||(oe[0]=0),fe&&fe.length===2){var ge=fe[0]===null,ve=fe[1]===null;for(M.type!=="date"||M.autorange||(fe[0]=i.cleanDate(fe[0],o,M.calendar),fe[1]=i.cleanDate(fe[1],o,M.calendar)),ae=0;ae<2;ae++)if(M.type==="date"){if(!i.isDateTime(fe[ae],M.calendar)){M[ee]=oe;break}if(M.r2l(fe[0])===M.r2l(fe[1])){var xe=i.constrain(M.r2l(fe[0]),i.MIN_MS+1e3,i.MAX_MS-1e3);fe[0]=M.l2r(xe-1e3),fe[1]=M.l2r(xe+1e3);break}}else{if(!v(fe[ae])){if(ge||ve||!v(fe[1-ae])){M[ee]=oe;break}fe[ae]=fe[1-ae]*(ae?10:.1)}if(fe[ae]<-l?fe[ae]=-l:fe[ae]>l&&(fe[ae]=l),fe[0]===fe[1]){var _e=Math.max(1,Math.abs(1e-6*fe[0]));fe[0]-=_e,fe[1]+=_e}}}else i.nestedProperty(M,ee).set(oe)},M.setScale=function(ee){var ie=E._size;if(M.overlaying){var ae=m.getFromId({_fullLayout:E},M.overlaying);M.domain=ae.domain}var oe=ee&&M._r?"_r":"range",fe=M.calendar;M.cleanRange(oe);var ge,ve,xe=M.r2l(M[oe][0],fe),_e=M.r2l(M[oe][1],fe),ye=P==="y";if(ye?(M._offset=ie.t+(1-M.domain[1])*ie.h,M._length=ie.h*(M.domain[1]-M.domain[0]),M._m=M._length/(xe-_e),M._b=-M._m*_e):(M._offset=ie.l+M.domain[0]*ie.w,M._length=ie.w*(M.domain[1]-M.domain[0]),M._m=M._length/(_e-xe),M._b=-M._m*xe),M._rangebreaks=[],M._lBreaks=0,M._m2=0,M._B=[],M.rangebreaks&&(M._rangebreaks=M.locateBreaks(Math.min(xe,_e),Math.max(xe,_e)),M._rangebreaks.length)){for(ge=0;ge<M._rangebreaks.length;ge++)ve=M._rangebreaks[ge],M._lBreaks+=Math.abs(ve.max-ve.min);var Ce=ye;xe>_e&&(Ce=!Ce),Ce&&M._rangebreaks.reverse();var ke=Ce?-1:1;for(M._m2=ke*M._length/(Math.abs(_e-xe)-M._lBreaks),M._B.push(-M._m2*(ye?_e:xe)),ge=0;ge<M._rangebreaks.length;ge++)ve=M._rangebreaks[ge],M._B.push(M._B[M._B.length-1]-ke*M._m2*(ve.max-ve.min));for(ge=0;ge<M._rangebreaks.length;ge++)(ve=M._rangebreaks[ge]).pmin=$(ve.min),ve.pmax=$(ve.max)}if(!isFinite(M._m)||!isFinite(M._b)||M._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},M.maskBreaks=function(ee){var ie,ae,oe,fe,ge,ve=M.rangebreaks||[];ve._cachedPatterns||(ve._cachedPatterns=ve.map(function(Te){return Te.enabled&&Te.bounds?i.simpleMap(Te.bounds,Te.pattern?h:M.d2c):null})),ve._cachedValues||(ve._cachedValues=ve.map(function(Te){return Te.enabled&&Te.values?i.simpleMap(Te.values,M.d2c).sort(i.sorterAsc):null}));for(var xe=0;xe<ve.length;xe++){var _e=ve[xe];if(_e.enabled){if(_e.bounds){var ye=_e.pattern;switch(ae=(ie=ve._cachedPatterns[xe])[0],oe=ie[1],ye){case k:fe=(ge=new Date(ee)).getUTCDay(),ae>oe&&(oe+=7,fe<ae&&(fe+=7));break;case y:fe=(ge=new Date(ee)).getUTCHours()+(ge.getUTCMinutes()/60+ge.getUTCSeconds()/3600+ge.getUTCMilliseconds()/36e5),ae>oe&&(oe+=24,fe<ae&&(fe+=24));break;case"":fe=ee}if(fe>=ae&&fe<oe)return o}else for(var Ce=ve._cachedValues[xe],ke=0;ke<Ce.length;ke++)if(oe=(ae=Ce[ke])+_e.dvalue,ee>=ae&&ee<oe)return o}}return ee},M.locateBreaks=function(ee,ie){var ae,oe,fe,ge,ve=[];if(!M.rangebreaks)return ve;var xe=M.rangebreaks.slice().sort(function(Ee,Oe){return Ee.pattern===k&&Oe.pattern===y?-1:Oe.pattern===k&&Ee.pattern===y?1:0}),_e=function(Ee,Oe){if((Ee=i.constrain(Ee,ee,ie))!==(Oe=i.constrain(Oe,ee,ie))){for(var Fe=!0,pe=0;pe<ve.length;pe++){var be=ve[pe];Ee<be.max&&Oe>=be.min&&(Ee<be.min&&(be.min=Ee),Oe>be.max&&(be.max=Oe),Fe=!1)}Fe&&ve.push({min:Ee,max:Oe})}};for(ae=0;ae<xe.length;ae++){var ye=xe[ae];if(ye.enabled)if(ye.bounds){var Ce=ee,ke=ie;ye.pattern&&(Ce=Math.floor(Ce)),fe=(oe=i.simpleMap(ye.bounds,ye.pattern?h:M.r2l))[0],ge=oe[1];var Te,le,ue=new Date(Ce);switch(ye.pattern){case k:le=p,Te=(ge-fe+(ge<fe?7:0))*c,Ce+=fe*c-(ue.getUTCDay()*c+ue.getUTCHours()*b+ue.getUTCMinutes()*g+ue.getUTCSeconds()*d+ue.getUTCMilliseconds());break;case y:le=c,Te=(ge-fe+(ge<fe?24:0))*b,Ce+=fe*b-(ue.getUTCHours()*b+ue.getUTCMinutes()*g+ue.getUTCSeconds()*d+ue.getUTCMilliseconds());break;default:Ce=Math.min(oe[0],oe[1]),Te=le=(ke=Math.max(oe[0],oe[1]))-Ce}for(var de=Ce;de<ke;de+=le)_e(de,de+Te)}else for(var Le=i.simpleMap(ye.values,M.d2c),we=0;we<Le.length;we++)_e(fe=Le[we],ge=fe+ye.dvalue)}return ve.sort(function(Ee,Oe){return Ee.min-Oe.min}),ve},M.makeCalcdata=function(ee,ie,ae){var oe,fe,ge,ve,xe=M.type,_e=xe==="date"&&ee[ie+"calendar"];if(ie in ee){if(oe=ee[ie],ve=ee._length||i.minRowLength(oe),i.isTypedArray(oe)&&(xe==="linear"||xe==="log")){if(ve===oe.length)return oe;if(oe.subarray)return oe.subarray(0,ve)}if(xe==="multicategory")return function(ke,Te){for(var le=new Array(Te),ue=0;ue<Te;ue++){var de=(ke[0]||[])[ue],Le=(ke[1]||[])[ue];le[ue]=Z([de,Le])}return le}(oe,ve);for(fe=new Array(ve),ge=0;ge<ve;ge++)fe[ge]=M.d2c(oe[ge],0,_e,ae)}else{var ye=ie+"0"in ee?M.d2c(ee[ie+"0"],0,_e):0,Ce=ee["d"+ie]?Number(ee["d"+ie]):1;for(oe=ee[{x:"y",y:"x"}[ie]],ve=ee._length||oe.length,fe=new Array(ve),ge=0;ge<ve;ge++)fe[ge]=ye+ge*Ce}if(M.rangebreaks)for(ge=0;ge<ve;ge++)fe[ge]=M.maskBreaks(fe[ge]);return fe},M.isValidRange=function(ee,ie){return Array.isArray(ee)&&ee.length===2&&(ie&&ee[0]===null||v(M.r2l(ee[0])))&&(ie&&ee[1]===null||v(M.r2l(ee[1])))},M.getAutorangeDflt=function(ee,ie){var ae=!M.isValidRange(ee,"nullOk");return ae&&ie&&ie.reverseDflt?ae="reversed":ee&&(ee[0]===null&&ee[1]===null?ae=!0:ee[0]===null&&ee[1]!==null?ae="min":ee[0]!==null&&ee[1]===null&&(ae="max")),ae},M.isReversed=function(){var ee=M.autorange;return ee==="reversed"||ee==="min reversed"||ee==="max reversed"},M.isPtWithinRange=function(ee,ie){var ae=M.c2l(ee[P],null,ie),oe=M.r2l(M.range[0]),fe=M.r2l(M.range[1]);return oe<fe?oe<=ae&&ae<=fe:fe<=ae&&ae<=oe},M._emptyCategories=function(){M._categories=[],M._categoriesMap={}},M.clearCalc=function(){var ee=M._matchGroup;if(ee){var ie=null,ae=null;for(var oe in ee){var fe=E[m.id2name(oe)];if(fe._categories){ie=fe._categories,ae=fe._categoriesMap;break}}ie&&ae?(M._categories=ie,M._categoriesMap=ae):M._emptyCategories()}else M._emptyCategories();if(M._initialCategories)for(var ge=0;ge<M._initialCategories.length;ge++)j(M._initialCategories[ge])},M.sortByInitialCategories=function(){var ee=[];if(M._emptyCategories(),M._initialCategories)for(var ie=0;ie<M._initialCategories.length;ie++)j(M._initialCategories[ie]);ee=ee.concat(M._traceIndices);var ae=M._matchGroup;for(var oe in ae)if(O!==oe){var fe=E[m.id2name(oe)];fe._categories=M._categories,fe._categoriesMap=M._categoriesMap,ee=ee.concat(fe._traceIndices)}return ee};var K=E._d3locale;M.type==="date"&&(M._dateFormat=K?K.timeFormat:w,M._extraFormat=E._extraFormat),M._separators=E.separators,M._numFormat=K?K.numberFormat:_,delete M._minDtick,delete M._forceTick0}},59652:function(N){N.exports=function(L){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(T){return L[T]!==void 0});if(e.every(function(T){return L[T]===L[e[0]]})||e.length===1)return L[e[0]]}},96115:function(N,L,e){var T=e(71828),w=e(7901).contrast,i=e(13838),_=e(59652),v=e(85501);function h(s,t){function a(n,r){return T.coerce(s,t,i.tickformatstops,n,r)}a("enabled")&&(a("dtickrange"),a("value"))}N.exports=function(s,t,a,n,r){r||(r={});var l=a("labelalias");T.isPlainObject(l)||delete t.labelalias;var o=_(s);if(a("showticklabels")){var u=r.font||{},p=t.color,c=(t.ticklabelposition||"").indexOf("inside")!==-1?w(r.bgColor):p&&p!==i.color.dflt?p:u.color;if(T.coerceFont(a,"tickfont",{family:u.family,size:u.size,color:c}),r.noTicklabelstep||n==="multicategory"||n==="log"||a("ticklabelstep"),r.noAng||a("tickangle"),n!=="category"){var b=a("tickformat");v(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:h}),t.tickformatstops.length||delete t.tickformatstops,r.noExp||b||n==="date"||(a("showexponent",o),a("exponentformat"),a("minexponent"),a("separatethousands"))}}}},38701:function(N,L,e){var T=e(71828),w=e(13838);N.exports=function(i,_,v,h){var s=h.isMinor,t=s?i.minor||{}:i,a=s?_.minor:_,n=s?w.minor:w,r=s?"minor.":"",l=T.coerce2(t,a,n,"ticklen",s?.6*(_.ticklen||5):void 0),o=T.coerce2(t,a,n,"tickwidth",s?_.tickwidth||1:void 0),u=T.coerce2(t,a,n,"tickcolor",(s?_.tickcolor:void 0)||a.color);v(r+"ticks",!s&&h.outerTicks||l||o||u?"outside":"")||(delete a.ticklen,delete a.tickwidth,delete a.tickcolor)}},26218:function(N,L,e){var T=e(66287),w=e(71828).isArrayOrTypedArray,i=e(73627).isTypedArraySpec,_=e(73627).decodeTypedArraySpec;N.exports=function(v,h,s,t,a){a||(a={});var n=a.isMinor,r=n?v.minor||{}:v,l=n?h.minor:h,o=n?"minor.":"";function u(m){var x=r[m];return i(x)&&(x=_(x)),x!==void 0?x:(l._template||{})[m]}var p=u("tick0"),c=u("dtick"),b=u("tickvals"),g=s(o+"tickmode",w(b)?"array":c?"linear":"auto");if(g==="auto"||g==="sync")s(o+"nticks");else if(g==="linear"){var d=l.dtick=T.dtick(c,t);l.tick0=T.tick0(p,t,h.calendar,d)}else t!=="multicategory"&&(s(o+"tickvals")===void 0?l.tickmode="auto":n||s("ticktext"))}},66847:function(N,L,e){var T=e(39898),w=e(73972),i=e(71828),_=e(91424),v=e(89298);N.exports=function(h,s,t,a){var n=h._fullLayout;if(s.length!==0){var r,l,o,u;a&&(r=a());var p=T.ease(t.easing);return h._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var g={},d=0;d<s.length;d++){var m=s[d],x=m.plotinfo.xaxis,y=m.plotinfo.yaxis;m.xr0&&(g[x._name+".range"]=m.xr0.slice()),m.yr0&&(g[y._name+".range"]=m.yr0.slice())}return w.call("relayout",h,g).then(function(){for(var k=0;k<s.length;k++)c(s[k].plotinfo)})}()}),l=Date.now(),u=window.requestAnimationFrame(function g(){o=Date.now();for(var d=Math.min(1,(o-l)/t.duration),m=p(d),x=0;x<s.length;x++)b(s[x],m);o-l>t.duration?(function(){for(var y={},k=0;k<s.length;k++){var f=s[k],S=f.plotinfo.xaxis,M=f.plotinfo.yaxis;f.xr1&&(y[S._name+".range"]=f.xr1.slice()),f.yr1&&(y[M._name+".range"]=f.yr1.slice())}r&&r(),w.call("relayout",h,y).then(function(){for(var E=0;E<s.length;E++)c(s[E].plotinfo)})}(),u=window.cancelAnimationFrame(g)):u=window.requestAnimationFrame(g)}),Promise.resolve()}function c(g){var d=g.xaxis,m=g.yaxis;n._defs.select("#"+g.clipId+"> rect").call(_.setTranslate,0,0).call(_.setScale,1,1),g.plot.call(_.setTranslate,d._offset,m._offset).call(_.setScale,1,1);var x=g.plot.selectAll(".scatterlayer .trace");x.selectAll(".point").call(_.setPointGroupScale,1,1),x.selectAll(".textpoint").call(_.setTextPointsScale,1,1),x.call(_.hideOutsideRangePoints,g)}function b(g,d){var m=g.plotinfo,x=m.xaxis,y=m.yaxis,k=x._length,f=y._length,S=!!g.xr1,M=!!g.yr1,E=[];if(S){var O=i.simpleMap(g.xr0,x.r2l),P=i.simpleMap(g.xr1,x.r2l),I=O[1]-O[0],z=P[1]-P[0];E[0]=(O[0]*(1-d)+d*P[0]-O[0])/(O[1]-O[0])*k,E[2]=k*(1-d+d*z/I),x.range[0]=x.l2r(O[0]*(1-d)+d*P[0]),x.range[1]=x.l2r(O[1]*(1-d)+d*P[1])}else E[0]=0,E[2]=k;if(M){var U=i.simpleMap(g.yr0,y.r2l),R=i.simpleMap(g.yr1,y.r2l),j=U[1]-U[0],Z=R[1]-R[0];E[1]=(U[1]*(1-d)+d*R[1]-U[1])/(U[0]-U[1])*f,E[3]=f*(1-d+d*Z/j),y.range[0]=x.l2r(U[0]*(1-d)+d*R[0]),y.range[1]=y.l2r(U[1]*(1-d)+d*R[1])}else E[1]=0,E[3]=f;v.drawOne(h,x,{skipTitle:!0}),v.drawOne(h,y,{skipTitle:!0}),v.redrawComponents(h,[x._id,y._id]);var F=S?k/E[2]:1,V=M?f/E[3]:1,H=S?E[0]:0,te=M?E[1]:0,$=S?E[0]/E[2]*k:0,J=M?E[1]/E[3]*f:0,X=x._offset-$,K=y._offset-J;m.clipRect.call(_.setTranslate,H,te).call(_.setScale,1/F,1/V),m.plot.call(_.setTranslate,X,K).call(_.setScale,F,V),_.setPointGroupScale(m.zoomScalePts,1/F,1/V),_.setTextPointsScale(m.zoomScaleTxt,1/F,1/V)}v.redrawComponents(h)}},951:function(N,L,e){var T=e(73972).traceIs,w=e(4322);function i(v){return{v:"x",h:"y"}[v.orientation||"v"]}function _(v,h){var s=i(v),t=T(v,"box-violin"),a=T(v._fullInput||{},"candlestick");return t&&!a&&h===s&&v[s]===void 0&&v[s+"0"]===void 0}N.exports=function(v,h,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(a,n){if(a.type==="-"){var r,l=a._id,o=l.charAt(0);l.indexOf("scene")!==-1&&(l=o);var u=function(y,k,f){for(var S=0;S<y.length;S++){var M=y[S];if(M.type==="splom"&&M._length>0&&(M["_"+f+"axes"]||{})[k]||(M[f+"axis"]||f)===k&&(_(M,f)||(M[f]||[]).length||M[f+"0"]))return M}}(n,l,o);if(u)if(u.type!=="histogram"||o!=={v:"y",h:"x"}[u.orientation||"v"]){var p=o+"calendar",c=u[p],b={noMultiCategory:!T(u,"cartesian")||T(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&o==={h:"x",v:"y"}[u.orientation||"v"]&&(b.noMultiCategory=!0),b.autotypenumbers=a.autotypenumbers,_(u,o)){var g=i(u),d=[];for(r=0;r<n.length;r++){var m=n[r];T(m,"box-violin")&&(m[o+"axis"]||o)===l&&(m[g]!==void 0?d.push(m[g][0]):m.name!==void 0?d.push(m.name):d.push("text"),m[p]!==c&&(c=void 0))}a.type=w(d,c,b)}else if(u.type==="splom"){var x=u.dimensions[u._axesDim[l]];x.visible&&(a.type=w(x.values,c,b))}else a.type=w(u[o]||[u[o+"0"]],c,b)}else a.type="linear"}}(h,t.data),h.type==="-"?h.type="linear":v.type=h.type)}},31137:function(N,L,e){var T=e(73972),w=e(71828);function i(s,t,a){var n,r,l,o=!1;if(t.type==="data")n=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;n=s._fullLayout}return r=w.nestedProperty(n,t.prop).get(),(l=a[t.type]=a[t.type]||{}).hasOwnProperty(t.prop)&&l[t.prop]!==r&&(o=!0),l[t.prop]=r,{changed:o,value:r}}function _(s,t){var a=[],n=t[0],r={};if(typeof n=="string")r[n]=t[1];else{if(!w.isPlainObject(n))return a;r=n}return h(r,function(l,o,u){a.push({type:"layout",prop:l,value:u})},"",0),a}function v(s,t){var a,n,r,l,o=[];if(n=t[0],r=t[1],a=t[2],l={},typeof n=="string")l[n]=r;else{if(!w.isPlainObject(n))return o;l=n,a===void 0&&(a=r)}return a===void 0&&(a=null),h(l,function(u,p,c){var b,g;if(Array.isArray(c)){g=c.slice();var d=Math.min(g.length,s.data.length);a&&(d=Math.min(d,a.length)),b=[];for(var m=0;m<d;m++)b[m]=a?a[m]:m}else g=c,b=a?a.slice():null;if(b===null)Array.isArray(g)&&(g=g[0]);else if(Array.isArray(b)){if(!Array.isArray(g)){var x=g;g=[];for(var y=0;y<b.length;y++)g[y]=x}g.length=Math.min(b.length,g.length)}o.push({type:"data",prop:u,traces:b,value:g})},"",0),o}function h(s,t,a,n){Object.keys(s).forEach(function(r){var l=s[r];if(r[0]!=="_"){var o=a+(n>0?".":"")+r;w.isPlainObject(l)?h(l,t,o,n+1):t(o,r,l)}})}L.manageCommandObserver=function(s,t,a,n){var r={},l=!0;t&&t._commandObserver&&(r=t._commandObserver),r.cache||(r.cache={}),r.lookupTable={};var o=L.hasSimpleAPICommandBindings(s,a,r.lookupTable);if(t&&t._commandObserver){if(o)return r;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,r}if(o){i(s,o,r.cache),r.check=function(){if(l){var c=i(s,o,r.cache);return c.changed&&n&&r.lookupTable[c.value]!==void 0&&(r.disable(),Promise.resolve(n({value:c.value,type:o.type,prop:o.prop,traces:o.traces,index:r.lookupTable[c.value]})).then(r.enable,r.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<u.length;p++)s._internalOn(u[p],r.check);r.remove=function(){for(var c=0;c<u.length;c++)s._removeInternalListener(u[c],r.check)}}else w.log("Unable to automatically bind plot updates to API command"),r.lookupTable={},r.remove=function(){};return r.disable=function(){l=!1},r.enable=function(){l=!0},t&&(t._commandObserver=r),r},L.hasSimpleAPICommandBindings=function(s,t,a){var n,r,l=t.length;for(n=0;n<l;n++){var o,u=t[n],p=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!p)return!1;var b=L.computeAPICommandBindings(s,p,c);if(b.length!==1)return!1;if(r){if((o=b[0]).type!==r.type||o.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(o.traces))return!1;o.traces.sort();for(var g=0;g<r.traces.length;g++)if(r.traces[g]!==o.traces[g])return!1}else if(o.prop!==r.prop)return!1}else r=b[0],Array.isArray(r.traces)&&r.traces.sort();var d=(o=b[0]).value;if(Array.isArray(d)){if(d.length!==1)return!1;d=d[0]}a&&(a[d]=n)}return r},L.executeAPICommand=function(s,t,a){if(t==="skip")return Promise.resolve();var n=T.apiMethodRegistry[t],r=[s];Array.isArray(a)||(a=[]);for(var l=0;l<a.length;l++)r.push(a[l]);return n.apply(null,r).catch(function(o){return w.warn("API call to Plotly."+t+" rejected.",o),Promise.reject(o)})},L.computeAPICommandBindings=function(s,t,a){var n;switch(Array.isArray(a)||(a=[]),t){case"restyle":n=v(s,a);break;case"relayout":n=_(0,a);break;case"update":n=v(s,[a[0],a[2]]).concat(_(0,[a[1]]));break;case"animate":n=function(r,l){return Array.isArray(l[0])&&l[0].length===1&&["string","number"].indexOf(typeof l[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:l[0][0].toString()}]:[]}(0,a);break;default:n=[]}return n}},27670:function(N,L,e){var T=e(1426).extendFlat;L.Y=function(w,i){i=i||{};var _={valType:"info_array",editType:(w=w||{}).editType,items:[{valType:"number",min:0,max:1,editType:w.editType},{valType:"number",min:0,max:1,editType:w.editType}],dflt:[0,1]},v=(w.name&&w.name,w.trace,i.description&&i.description,{x:T({},_,{}),y:T({},_,{}),editType:w.editType});return w.noGridCell||(v.row={valType:"integer",min:0,dflt:0,editType:w.editType},v.column={valType:"integer",min:0,dflt:0,editType:w.editType}),v},L.c=function(w,i,_,v){var h=v&&v.x||[0,1],s=v&&v.y||[0,1],t=i.grid;if(t){var a=_("domain.column");a!==void 0&&(a<t.columns?h=t._domains.x[a]:delete w.domain.column);var n=_("domain.row");n!==void 0&&(n<t.rows?s=t._domains.y[n]:delete w.domain.row)}var r=_("domain.x",h),l=_("domain.y",s);r[0]<r[1]||(w.domain.x=h.slice()),l[0]<l[1]||(w.domain.y=s.slice())}},41940:function(N){N.exports=function(L){var e=L.editType,T=L.colorEditType;T===void 0&&(T=e);var w={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:T},editType:e};return L.autoSize&&(w.size.dflt="auto"),L.autoColor&&(w.color.dflt="auto"),L.arrayOk&&(w.family.arrayOk=!0,w.size.arrayOk=!0,w.color.arrayOk=!0),w}},31391:function(N){N.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(N,L){L.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},L.axesNames=["lonaxis","lataxis"],L.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},L.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},L.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},L.clipPad=.001,L.precision=.1,L.landColor="#F0DC82",L.waterColor="#3399FF",L.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},L.sphereSVG={type:"Sphere"},L.fillLayers={ocean:1,land:1,lakes:1},L.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},L.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],L.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],L.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(N,L,e){var T=e(39898),w=e(27362),i=w.geoPath,_=w.geoDistance,v=e(65704),h=e(73972),s=e(71828),t=s.strTranslate,a=e(7901),n=e(91424),r=e(30211),l=e(74875),o=e(89298),u=e(71739).getAutoRange,p=e(28569),c=e(47322).prepSelect,b=e(47322).clearOutline,g=e(47322).selectOnClick,d=e(74455),m=e(78776),x=e(41327),y=e(90973),k=e(96892).zL;function f(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=f.prototype;function M(E,O){var P=m.clipPad,I=E[0]+P,z=E[1]-P,U=O[0]+P,R=O[1]-P;I>0&&z<0&&(z+=360);var j=(z-I)/4;return{type:"Polygon",coordinates:[[[I,U],[I,R],[I+j,R],[I+2*j,R],[I+3*j,R],[z,R],[z,U],[z-j,U],[z-2*j,U],[z-3*j,U],[I,U]]]}}N.exports=function(E){return new f(E)},S.plot=function(E,O,P,I){var z=this;if(I)return z.update(E,O,!0);z._geoCalcData=E,z._fullLayout=O;var U=O[this.id],R=[],j=!1;for(var Z in m.layerNameToAdjective)if(Z!=="frame"&&U["show"+Z]){j=!0;break}for(var F=!1,V=0;V<E.length;V++){var H=E[0][0].trace;H._geo=z,H.locationmode&&(j=!0);var te=H.marker;if(te){var $=te.angle,J=te.angleref;($||J==="north"||J==="previous")&&(F=!0)}}if(this._hasMarkerAngles=F,j){var X=y.getTopojsonName(U);z.topojson!==null&&X===z.topojsonName||(z.topojsonName=X,PlotlyGeoAssets.topojson[z.topojsonName]===void 0&&R.push(z.fetchTopojson()))}R=R.concat(x.fetchTraceGeoData(E)),P.push(new Promise(function(K,ee){Promise.all(R).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(E,O),K()}).catch(ee)}))},S.fetchTopojson=function(){var E=this,O=y.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(P,I){T.json(O,function(z,U){if(z)return z.status===404?I(new Error(["plotly.js could not find topojson file at",O+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):I(new Error(["unexpected error while fetching topojson file at",O].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=U,P()})})},S.update=function(E,O,P){var I=O[this.id];this.hasChoropleth=!1;for(var z=0;z<E.length;z++){var U=E[z],R=U[0].trace;R.type==="choropleth"&&(this.hasChoropleth=!0),R.visible===!0&&R._length>0&&R._module.calcGeoJSON(U,O)}if(!P){if(this.updateProjection(E,O))return;this.viewInitial&&this.scope===I.scope||this.saveViewInitial(I)}this.scope=I.scope,this.updateBaseLayers(O,I),this.updateDims(O,I),this.updateFx(O,I),l.generalUpdatePerTraceModule(this.graphDiv,this,E,I);var j=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=j.selectAll(".point"),this.dataPoints.text=j.selectAll("text"),this.dataPaths.line=j.selectAll(".js-line");var Z=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Z.selectAll("path"),this._render()},S.updateProjection=function(E,O){var P=this.graphDiv,I=O[this.id],z=O._size,U=I.domain,R=I.projection,j=I.lonaxis,Z=I.lataxis,F=j._ax,V=Z._ax,H=this.projection=function(ue){var de=ue.projection,Le=de.type,we=m.projNames[Le];we="geo"+s.titleCase(we);for(var Ee=(w[we]||v[we])(),Oe=ue._isSatellite?180*Math.acos(1/de.distance)/Math.PI:ue._isClipped?m.lonaxisSpan[Le]/2:null,Fe=["center","rotate","parallels","clipExtent"],pe=function(De){return De?Ee:[]},be=0;be<Fe.length;be++){var Me=Fe[be];typeof Ee[Me]!="function"&&(Ee[Me]=pe)}return Ee.isLonLatOverEdges=function(De){if(Ee(De)===null)return!0;if(Oe){var Ne=Ee.rotate();return _(De,[-Ne[0],-Ne[1]])>Oe*Math.PI/180}return!1},Ee.getPath=function(){return i().projection(Ee)},Ee.getBounds=function(De){return Ee.getPath().bounds(De)},Ee.precision(m.precision),ue._isSatellite&&Ee.tilt(de.tilt).distance(de.distance),Oe&&Ee.clipAngle(Oe-m.clipPad),Ee}(I),te=[[z.l+z.w*U.x[0],z.t+z.h*(1-U.y[1])],[z.l+z.w*U.x[1],z.t+z.h*(1-U.y[0])]],$=I.center||{},J=R.rotation||{},X=j.range||[],K=Z.range||[];if(I.fitbounds){F._length=te[1][0]-te[0][0],V._length=te[1][1]-te[0][1],F.range=u(P,F),V.range=u(P,V);var ee=(F.range[0]+F.range[1])/2,ie=(V.range[0]+V.range[1])/2;if(I._isScoped)$={lon:ee,lat:ie};else if(I._isClipped){$={lon:ee,lat:ie},J={lon:ee,lat:ie,roll:J.roll};var ae=R.type,oe=m.lonaxisSpan[ae]/2||180,fe=m.lataxisSpan[ae]/2||90;X=[ee-oe,ee+oe],K=[ie-fe,ie+fe]}else $={lon:ee,lat:ie},J={lon:ee,lat:J.lat,roll:J.roll}}H.center([$.lon-J.lon,$.lat-J.lat]).rotate([-J.lon,-J.lat,J.roll]).parallels(R.parallels);var ge=M(X,K);H.fitExtent(te,ge);var ve=this.bounds=H.getBounds(ge),xe=this.fitScale=H.scale(),_e=H.translate();if(I.fitbounds){var ye=H.getBounds(M(F.range,V.range)),Ce=Math.min((ve[1][0]-ve[0][0])/(ye[1][0]-ye[0][0]),(ve[1][1]-ve[0][1])/(ye[1][1]-ye[0][1]));isFinite(Ce)?H.scale(Ce*xe):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else H.scale(R.scale*xe);var ke=this.midPt=[(ve[0][0]+ve[1][0])/2,(ve[0][1]+ve[1][1])/2];if(H.translate([_e[0]+(ke[0]-_e[0]),_e[1]+(ke[1]-_e[1])]).clipExtent(ve),I._isAlbersUsa){var Te=H([$.lon,$.lat]),le=H.translate();H.translate([le[0]-(Te[0]-le[0]),le[1]-(Te[1]-le[1])])}},S.updateBaseLayers=function(E,O){var P=this,I=P.topojson,z=P.layers,U=P.basePaths;function R(H){return H==="lonaxis"||H==="lataxis"}function j(H){return!!m.lineLayers[H]}function Z(H){return!!m.fillLayers[H]}var F=(this.hasChoropleth?m.layersForChoropleth:m.layers).filter(function(H){return j(H)||Z(H)?O["show"+H]:!R(H)||O[H].showgrid}),V=P.framework.selectAll(".layer").data(F,String);V.exit().each(function(H){delete z[H],delete U[H],T.select(this).remove()}),V.enter().append("g").attr("class",function(H){return"layer "+H}).each(function(H){var te=z[H]=T.select(this);H==="bg"?P.bgRect=te.append("rect").style("pointer-events","all"):R(H)?U[H]=te.append("path").style("fill","none"):H==="backplot"?te.append("g").classed("choroplethlayer",!0):H==="frontplot"?te.append("g").classed("scatterlayer",!0):j(H)?U[H]=te.append("path").style("fill","none").style("stroke-miterlimit",2):Z(H)&&(U[H]=te.append("path").style("stroke","none"))}),V.order(),V.each(function(H){var te=U[H],$=m.layerNameToAdjective[H];H==="frame"?te.datum(m.sphereSVG):j(H)||Z(H)?te.datum(k(I,I.objects[H])):R(H)&&te.datum(function(J,X,K){var ee,ie,ae,oe=X[J],fe=m.scopeDefaults[X.scope];J==="lonaxis"?(ee=fe.lonaxisRange,ie=fe.lataxisRange,ae=function(le,ue){return[le,ue]}):J==="lataxis"&&(ee=fe.lataxisRange,ie=fe.lonaxisRange,ae=function(le,ue){return[ue,le]});var ge={type:"linear",range:[ee[0],ee[1]-1e-6],tick0:oe.tick0,dtick:oe.dtick};o.setConvert(ge,K);var ve=o.calcTicks(ge);X.isScoped||J!=="lonaxis"||ve.pop();for(var xe=ve.length,_e=new Array(xe),ye=0;ye<xe;ye++)for(var Ce=ve[ye].x,ke=_e[ye]=[],Te=ie[0];Te<ie[1]+2.5;Te+=2.5)ke.push(ae(Ce,Te));return{type:"MultiLineString",coordinates:_e}}(H,O,E)).call(a.stroke,O[H].gridcolor).call(n.dashLine,O[H].griddash,O[H].gridwidth),j(H)?te.call(a.stroke,O[$+"color"]).call(n.dashLine,"",O[$+"width"]):Z(H)&&te.call(a.fill,O[$+"color"])})},S.updateDims=function(E,O){var P=this.bounds,I=(O.framewidth||0)/2,z=P[0][0]-I,U=P[0][1]-I,R=P[1][0]-z+I,j=P[1][1]-U+I;n.setRect(this.clipRect,z,U,R,j),this.bgRect.call(n.setRect,z,U,R,j).call(a.fill,O.bgcolor),this.xaxis._offset=z,this.xaxis._length=R,this.yaxis._offset=U,this.yaxis._length=j},S.updateFx=function(E,O){var P=this,I=P.graphDiv,z=P.bgRect,U=E.dragmode,R=E.clickmode;if(!P.isStatic){var j={element:P.bgRect.node(),gd:I,plotinfo:{id:P.id,xaxis:P.xaxis,yaxis:P.yaxis,fillRangeItems:function(F,V){V.isRect?(F.range={})[P.id]=[Z([V.xmin,V.ymin]),Z([V.xmax,V.ymax])]:(F.lassoPoints={})[P.id]=V.map(Z)}},xaxes:[P.xaxis],yaxes:[P.yaxis],subplot:P.id,clickFn:function(F){F===2&&b(I)}};U==="pan"?(z.node().onmousedown=null,z.call(d(P,O)),z.on("dblclick.zoom",function(){var F=P.viewInitial,V={};for(var H in F)V[P.id+"."+H]=F[H];h.call("_guiRelayout",I,V),I.emit("plotly_doubleclick",null)}),I._context._scrollZoom.geo||z.on("wheel.zoom",null)):U!=="select"&&U!=="lasso"||(z.on(".zoom",null),j.prepFn=function(F,V,H){c(F,V,H,j,U)},p.init(j)),z.on("mousemove",function(){var F=P.projection.invert(s.getPositionFromD3Event());if(!F)return p.unhover(I,T.event);P.xaxis.p2c=function(){return F[0]},P.yaxis.p2c=function(){return F[1]},r.hover(I,T.event,P.id)}),z.on("mouseout",function(){I._dragging||p.unhover(I,T.event)}),z.on("click",function(){U!=="select"&&U!=="lasso"&&(R.indexOf("select")>-1&&g(T.event,I,[P.xaxis],[P.yaxis],P.id,j),R.indexOf("event")>-1&&r.click(I,T.event))})}function Z(F){return P.projection.invert([F[0]+P.xaxis._offset,F[1]+P.yaxis._offset])}},S.makeFramework=function(){var E=this,O=E.graphDiv,P=O._fullLayout,I="clip"+P._uid+E.id;E.clipDef=P._clips.append("clipPath").attr("id",I),E.clipRect=E.clipDef.append("rect"),E.framework=T.select(E.container).append("g").attr("class","geo "+E.id).call(n.setClipUrl,I,O),E.project=function(z){var U=E.projection(z);return U?[U[0]-E.xaxis._offset,U[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(z){return E.project(z)[0]}},E.yaxis={_id:"y",c2p:function(z){return E.project(z)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},o.setConvert(E.mockAxis,P)},S.saveViewInitial=function(E){var O,P=E.center||{},I=E.projection,z=I.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":I.scale},O=E._isScoped?{"center.lon":P.lon,"center.lat":P.lat}:E._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":P.lon,"center.lat":P.lat,"projection.rotation.lon":z.lon},s.extendFlat(this.viewInitial,O)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,O=this.projection,P=O.getPath();function I(U){var R=O(U.lonlat);return R?t(R[0],R[1]):null}function z(U){return O.isLonLatOverEdges(U.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",P);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(U){return P(U.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",z).attr("transform",I)}},44622:function(N,L,e){var T=e(27659).AU,w=e(71828).counterRegex,i=e(69082),_="geo",v=w(_),h={};h[_]={valType:"subplotid",dflt:_,editType:"calc"},N.exports={attr:_,name:_,idRoot:_,idRegex:v,attrRegex:v,attributes:h,layoutAttributes:e(77519),supplyLayoutDefaults:e(82161),plot:function(s){for(var t=s._fullLayout,a=s.calcdata,n=t._subplots[_],r=0;r<n.length;r++){var l=n[r],o=T(a,_,l),u=t[l]._subplot;u||(u=i({id:l,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[l]._subplot=u),u.plot(o,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,a=t._subplots[_],n=0;n<a.length;n++){var r=t[a[n]];r._subplot.updateFx(t,r)}},clean:function(s,t,a,n){for(var r=n._subplots[_]||[],l=0;l<r.length;l++){var o=r[l],u=n[o]._subplot;!t[o]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},77519:function(N,L,e){var T=e(22399),w=e(27670).Y,i=e(79952).P,_=e(78776),v=e(30962).overrideAll,h=e(78607),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:T.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:i};(N.exports=v({domain:w({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:h(_.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:h(_.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:T.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:_.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:_.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:_.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:_.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:T.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:T.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:T.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:T.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(N,L,e){var T=e(71828),w=e(49119),i=e(27659).NG,_=e(78776),v=e(77519),h=_.axesNames;function s(t,a,n,r){var l=i(r.fullData,"geo",r.id).map(function(J){return J._expandedIndex}),o=n("resolution"),u=n("scope"),p=_.scopeDefaults[u],c=n("projection.type",p.projType),b=a._isAlbersUsa=c==="albers usa";b&&(u=a.scope="usa");var g=a._isScoped=u!=="world",d=a._isSatellite=c==="satellite",m=a._isConic=c.indexOf("conic")!==-1||c==="albers",x=a._isClipped=!!_.lonaxisSpan[c];if(t.visible===!1){var y=T.extendDeep({},a._template);y.showcoastlines=!1,y.showcountries=!1,y.showframe=!1,y.showlakes=!1,y.showland=!1,y.showocean=!1,y.showrivers=!1,y.showsubunits=!1,y.lonaxis&&(y.lonaxis.showgrid=!1),y.lataxis&&(y.lataxis.showgrid=!1),a._template=y}for(var k=n("visible"),f=0;f<h.length;f++){var S,M=h[f],E=[30,10][f];if(g)S=p[M+"Range"];else{var O=_[M+"Span"],P=(O[c]||O["*"])/2,I=n("projection.rotation."+M.substr(0,3),p.projRotate[f]);S=[I-P,I+P]}var z=n(M+".range",S);n(M+".tick0"),n(M+".dtick",E),n(M+".showgrid",!!k&&void 0)&&(n(M+".gridcolor"),n(M+".gridwidth"),n(M+".griddash")),a[M]._ax={type:"linear",_id:M.slice(0,3),_traceIndices:l,setScale:T.identity,c2l:T.identity,r2l:T.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var U=a.lonaxis.range,R=a.lataxis.range,j=U[0],Z=U[1];j>0&&Z<0&&(Z+=360);var F,V,H,te=(j+Z)/2;if(!b){var $=g?p.projRotate:[te,0,0];F=n("projection.rotation.lon",$[0]),n("projection.rotation.lat",$[1]),n("projection.rotation.roll",$[2]),n("showcoastlines",!g&&k)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean",!!k&&void 0)&&n("oceancolor")}b?(V=-96.6,H=38.7):(V=g?te:F,H=(R[0]+R[1])/2),n("center.lon",V),n("center.lat",H),d&&(n("projection.tilt"),n("projection.distance")),m&&n("projection.parallels",p.projParallels||[0,60]),n("projection.scale"),n("showland",!!k&&void 0)&&n("landcolor"),n("showlakes",!!k&&void 0)&&n("lakecolor"),n("showrivers",!!k&&void 0)&&(n("rivercolor"),n("riverwidth")),n("showcountries",g&&u!=="usa"&&k)&&(n("countrycolor"),n("countrywidth")),(u==="usa"||u==="north america"&&o===50)&&(n("showsubunits",k),n("subunitcolor"),n("subunitwidth")),g||n("showframe",k)&&(n("framecolor"),n("framewidth")),n("bgcolor"),n("fitbounds")&&(delete a.projection.scale,g?(delete a.center.lon,delete a.center.lat):x?(delete a.center.lon,delete a.center.lat,delete a.projection.rotation.lon,delete a.projection.rotation.lat,delete a.lonaxis.range,delete a.lataxis.range):(delete a.center.lon,delete a.center.lat,delete a.projection.rotation.lon))}N.exports=function(t,a,n){w(t,a,n,{type:"geo",attributes:v,handleDefaults:s,fullData:n,partition:"y"})}},74455:function(N,L,e){var T=e(39898),w=e(71828),i=e(73972),_=Math.PI/180,v=180/Math.PI,h={cursor:"pointer"},s={cursor:"auto"};function t(g,d){return T.behavior.zoom().translate(d.translate()).scale(d.scale())}function a(g,d,m){var x=g.id,y=g.graphDiv,k=y.layout,f=k[x],S=y._fullLayout,M=S[x],E={},O={};function P(I,z){E[x+"."+I]=w.nestedProperty(f,I).get(),i.call("_storeDirectGUIEdit",k,S._preGUI,E);var U=w.nestedProperty(M,I);U.get()!==z&&(U.set(z),w.nestedProperty(f,I).set(z),O[x+"."+I]=z)}m(P),P("projection.scale",d.scale()/g.fitScale),P("fitbounds",!1),y.emit("plotly_relayout",O)}function n(g,d){var m=t(0,d);function x(y){var k=d.invert(g.midPt);y("center.lon",k[0]),y("center.lat",k[1])}return m.on("zoomstart",function(){T.select(this).style(h)}).on("zoom",function(){d.scale(T.event.scale).translate(T.event.translate),g.render(!0);var y=d.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":d.scale()/g.fitScale,"geo.center.lon":y[0],"geo.center.lat":y[1]})}).on("zoomend",function(){T.select(this).style(s),a(g,d,x)}),m}function r(g,d){var m,x,y,k,f,S,M,E,O,P=t(0,d);function I(U){return d.invert(U)}function z(U){var R=d.rotate(),j=d.invert(g.midPt);U("projection.rotation.lon",-R[0]),U("center.lon",j[0]),U("center.lat",j[1])}return P.on("zoomstart",function(){T.select(this).style(h),m=T.mouse(this),x=d.rotate(),y=d.translate(),k=x,f=I(m)}).on("zoom",function(){if(S=T.mouse(this),function(j){var Z=I(j);if(!Z)return!0;var F=d(Z);return Math.abs(F[0]-j[0])>2||Math.abs(F[1]-j[1])>2}(m))return P.scale(d.scale()),void P.translate(d.translate());d.scale(T.event.scale),d.translate([y[0],T.event.translate[1]]),f?I(S)&&(E=I(S),M=[k[0]+(E[0]-f[0]),x[1],x[2]],d.rotate(M),k=M):f=I(m=S),O=!0,g.render(!0);var U=d.rotate(),R=d.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":d.scale()/g.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1],"geo.projection.rotation.lon":-U[0]})}).on("zoomend",function(){T.select(this).style(s),O&&a(g,d,z)}),P}function l(g,d){var m;d.rotate(),d.scale();var x=t(0,d),y=function(M){for(var E=0,O=arguments.length,P=[];++E<O;)P.push(arguments[E]);var I=T.dispatch.apply(null,P);return I.of=function(z,U){return function(R){var j;try{j=R.sourceEvent=T.event,R.target=M,T.event=R,I[R.type].apply(z,U)}finally{T.event=j}}},I}(x,"zoomstart","zoom","zoomend"),k=0,f=x.on;function S(M){var E=d.rotate();M("projection.rotation.lon",-E[0]),M("projection.rotation.lat",-E[1])}return x.on("zoomstart",function(){T.select(this).style(h);var M,E,O,P,I,z,U,R,j,Z,F,V=T.mouse(this),H=d.rotate(),te=H,$=d.translate(),J=(E=.5*(M=H)[0]*_,O=.5*M[1]*_,P=.5*M[2]*_,I=Math.sin(E),z=Math.cos(E),U=Math.sin(O),R=Math.cos(O),j=Math.sin(P),[z*R*(Z=Math.cos(P))+I*U*j,I*R*Z-z*U*j,z*U*Z+I*R*j,z*R*j-I*U*Z]);m=o(d,V),f.call(x,"zoom",function(){var X,K,ee,ie,ae,oe,fe,ge,ve,xe,_e=T.mouse(this);if(d.scale(T.event.scale),m){if(o(d,_e)){d.rotate(H).translate($);var ye=o(d,_e),Ce=function(le,ue){if(le&&ue){var de=function(Oe,Fe){return[Oe[1]*Fe[2]-Oe[2]*Fe[1],Oe[2]*Fe[0]-Oe[0]*Fe[2],Oe[0]*Fe[1]-Oe[1]*Fe[0]]}(le,ue),Le=Math.sqrt(b(de,de)),we=.5*Math.acos(Math.max(-1,Math.min(1,b(le,ue)))),Ee=Math.sin(we)/Le;return Le&&[Math.cos(we),de[2]*Ee,-de[1]*Ee,de[0]*Ee]}}(m,ye),ke=function(le){return[Math.atan2(2*(le[0]*le[1]+le[2]*le[3]),1-2*(le[1]*le[1]+le[2]*le[2]))*v,Math.asin(Math.max(-1,Math.min(1,2*(le[0]*le[2]-le[3]*le[1]))))*v,Math.atan2(2*(le[0]*le[3]+le[1]*le[2]),1-2*(le[2]*le[2]+le[3]*le[3]))*v]}((ee=(X=J)[0],ie=X[1],ae=X[2],oe=X[3],[ee*(fe=(K=Ce)[0])-ie*(ge=K[1])-ae*(ve=K[2])-oe*(xe=K[3]),ee*ge+ie*fe+ae*xe-oe*ve,ee*ve-ie*xe+ae*fe+oe*ge,ee*xe+ie*ve-ae*ge+oe*fe])),Te=function(le,ue,de){var Le=c(ue,2,le[0]);Le=c(Le,1,le[1]),Le=c(Le,0,le[2]-de[2]);var we,Ee,Oe=ue[0],Fe=ue[1],pe=ue[2],be=Le[0],Me=Le[1],De=Le[2],Ne=Math.atan2(Fe,Oe)*v,Be=Math.sqrt(Oe*Oe+Fe*Fe);Math.abs(Me)>Be?(Ee=(Me>0?90:-90)-Ne,we=0):(Ee=Math.asin(Me/Be)*v-Ne,we=Math.sqrt(Be*Be-Me*Me));var Ye=180-Ee-2*Ne,We=(Math.atan2(De,be)-Math.atan2(pe,we))*v,et=(Math.atan2(De,be)-Math.atan2(pe,-we))*v;return u(de[0],de[1],Ee,We)<=u(de[0],de[1],Ye,et)?[Ee,We,de[2]]:[Ye,et,de[2]]}(ke,m,te);isFinite(Te[0])&&isFinite(Te[1])&&isFinite(Te[2])||(Te=te),d.rotate(Te),te=Te}}else m=o(d,V=_e);y.of(this,arguments)({type:"zoom"})}),F=y.of(this,arguments),k++||F({type:"zoomstart"})}).on("zoomend",function(){var M;T.select(this).style(s),f.call(x,"zoom",null),M=y.of(this,arguments),--k||M({type:"zoomend"}),a(g,d,S)}).on("zoom.redraw",function(){g.render(!0);var M=d.rotate();g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":d.scale()/g.fitScale,"geo.projection.rotation.lon":-M[0],"geo.projection.rotation.lat":-M[1]})}),T.rebind(x,y,"on")}function o(g,d){var m=g.invert(d);return m&&isFinite(m[0])&&isFinite(m[1])&&function(x){var y=x[0]*_,k=x[1]*_,f=Math.cos(k);return[f*Math.cos(y),f*Math.sin(y),Math.sin(k)]}(m)}function u(g,d,m,x){var y=p(m-g),k=p(x-d);return Math.sqrt(y*y+k*k)}function p(g){return(g%360+540)%360-180}function c(g,d,m){var x=m*_,y=g.slice(),k=d===0?1:0,f=d===2?1:2,S=Math.cos(x),M=Math.sin(x);return y[k]=g[k]*S-g[f]*M,y[f]=g[f]*S+g[k]*M,y}function b(g,d){for(var m=0,x=0,y=g.length;x<y;++x)m+=g[x]*d[x];return m}N.exports=function(g,d){var m=g.projection;return(d._isScoped?n:d._isClipped?l:r)(g,m)}},27659:function(N,L,e){var T=e(73972),w=e(85555).SUBPLOT_PATTERN;L.AU=function(i,_,v){var h=T.subplotsRegistry[_];if(!h)return[];for(var s=h.attr,t=[],a=0;a<i.length;a++){var n=i[a];n[0].trace[s]===v&&t.push(n)}return t},L.a0=function(i,_){var v,h=[],s=[];if(!(v=typeof _=="string"?T.getModule(_).plot:typeof _=="function"?_:_.plot))return[h,i];for(var t=0;t<i.length;t++){var a=i[t],n=a[0].trace;n.visible===!0&&n._length!==0&&(n._module&&n._module.plot===v?h.push(a):s.push(a))}return[h,s]},L.NG=function(i,_,v){if(!T.subplotsRegistry[_])return[];var h,s,t,a=T.subplotsRegistry[_].attr,n=[];if(_==="gl2d"){var r=v.match(w);s="x"+r[1],t="y"+r[2]}for(var l=0;l<i.length;l++)h=i[l],_==="gl2d"&&T.traceIs(h,"gl2d")?h[a[0]]===s&&h[a[1]]===t&&n.push(h):h[a]===v&&n.push(h);return n}},75071:function(N,L,e){var T=e(16825),w=e(1195),i=e(48956),_=e(85555),v=e(38520);function h(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}N.exports=function(s){var t=s.mouseContainer,a=s.glplot,n=new h(t,a);function r(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function l(o,u,p){var c,b,g=s.calcDataBox(),d=a.viewBox,m=n.lastPos[0],x=n.lastPos[1],y=_.MINDRAG*a.pixelRatio,k=_.MINZOOM*a.pixelRatio;function f(I,z,U){var R=Math.min(z,U),j=Math.max(z,U);R!==j?(g[I]=R,g[I+2]=j,n.dataBox=g,s.setRanges(g)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(u*=a.pixelRatio,p*=a.pixelRatio,p=d[3]-d[1]-p,s.fullLayout.dragmode){case"zoom":if(o){var S=u/(d[2]-d[0])*(g[2]-g[0])+g[0],M=p/(d[3]-d[1])*(g[3]-g[1])+g[1];n.boxInited||(n.boxStart[0]=S,n.boxStart[1]=M,n.dragStart[0]=u,n.dragStart[1]=p),n.boxEnd[0]=S,n.boxEnd[1]=M,n.boxInited=!0,n.boxEnabled||n.boxStart[0]===n.boxEnd[0]&&n.boxStart[1]===n.boxEnd[1]||(n.boxEnabled=!0);var E=Math.abs(n.dragStart[0]-u)<k,O=Math.abs(n.dragStart[1]-p)<k;if(!function(){for(var I=s.graphDiv._fullLayout._axisConstraintGroups,z=s.xaxis._id,U=s.yaxis._id,R=0;R<I.length;R++)if(I[R][z]!==-1){if(I[R][U]!==-1)return!0;break}return!1}()||E&&O)E&&(n.boxEnd[0]=n.boxStart[0]),O&&(n.boxEnd[1]=n.boxStart[1]);else{c=n.boxEnd[0]-n.boxStart[0],b=n.boxEnd[1]-n.boxStart[1];var P=(g[3]-g[1])/(g[2]-g[0]);Math.abs(c*P)>Math.abs(b)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(c)*P*(b>=0?1:-1),n.boxEnd[1]<g[1]?(n.boxEnd[1]=g[1],n.boxEnd[0]=n.boxStart[0]+(g[1]-n.boxStart[1])/Math.abs(P)):n.boxEnd[1]>g[3]&&(n.boxEnd[1]=g[3],n.boxEnd[0]=n.boxStart[0]+(g[3]-n.boxStart[1])/Math.abs(P))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(b)/P*(c>=0?1:-1),n.boxEnd[0]<g[0]?(n.boxEnd[0]=g[0],n.boxEnd[1]=n.boxStart[1]+(g[0]-n.boxStart[0])*Math.abs(P)):n.boxEnd[0]>g[2]&&(n.boxEnd[0]=g[2],n.boxEnd[1]=n.boxStart[1]+(g[2]-n.boxStart[0])*Math.abs(P)))}}else n.boxEnabled?(c=n.boxStart[0]!==n.boxEnd[0],b=n.boxStart[1]!==n.boxEnd[1],c||b?(c&&(f(0,n.boxStart[0],n.boxEnd[0]),s.xaxis.autorange=!1),b&&(f(1,n.boxStart[1],n.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,o?(n.panning||(n.dragStart[0]=u,n.dragStart[1]=p),Math.abs(n.dragStart[0]-u)<y&&(u=n.dragStart[0]),Math.abs(n.dragStart[1]-p)<y&&(p=n.dragStart[1]),c=(m-u)*(g[2]-g[0])/(a.viewBox[2]-a.viewBox[0]),b=(x-p)*(g[3]-g[1])/(a.viewBox[3]-a.viewBox[1]),g[0]+=c,g[2]+=c,g[1]+=b,g[3]+=b,s.setRanges(g),n.panning=!0,n.lastInputTime=Date.now(),r(),s.cameraChanged(),s.handleAnnotations()):n.panning&&(n.panning=!1,s.relayoutCallback())}n.lastPos[0]=u,n.lastPos[1]=p}return n.mouseListener=T(t,l),t.addEventListener("touchstart",function(o){var u=i(o.changedTouches[0],t);l(0,u[0],u[1]),l(1,u[0],u[1]),o.preventDefault()},!!v&&{passive:!1}),t.addEventListener("touchmove",function(o){o.preventDefault();var u=i(o.changedTouches[0],t);l(1,u[0],u[1]),o.preventDefault()},!!v&&{passive:!1}),t.addEventListener("touchend",function(o){l(0,n.lastPos[0],n.lastPos[1]),o.preventDefault()},!!v&&{passive:!1}),n.wheelListener=w(t,function(o,u){if(!s.scrollZoom)return!1;var p=s.calcDataBox(),c=a.viewBox,b=n.lastPos[0],g=n.lastPos[1],d=Math.exp(5*u/(c[3]-c[1])),m=b/(c[2]-c[0])*(p[2]-p[0])+p[0],x=g/(c[3]-c[1])*(p[3]-p[1])+p[1];return p[0]=(p[0]-m)*d+m,p[2]=(p[2]-m)*d+m,p[1]=(p[1]-x)*d+x,p[3]=(p[3]-x)*d+x,s.setRanges(p),n.lastInputTime=Date.now(),r(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),n}},82961:function(N,L,e){var T=e(89298),w=e(78614);function i(h){this.scene=h,this.gl=h.gl,this.pixelRatio=h.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var _=i.prototype,v=["xaxis","yaxis"];_.merge=function(h){var s,t,a,n,r,l,o,u,p,c,b;for(this.titleEnable=!1,this.backgroundColor=w(h.plot_bgcolor),c=0;c<2;++c){var g=(s=v[c]).charAt(0);for(a=(t=h[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[g]?"":t.title.text,b=0;b<=2;b+=2)this.labelEnable[c+b]=!1,this.labels[c+b]=a,this.labelColor[c+b]=w(t.title.font.color),this.labelFont[c+b]=t.title.font.family,this.labelSize[c+b]=t.title.font.size,this.labelPad[c+b]=this.getLabelPad(s,t),this.tickEnable[c+b]=!1,this.tickColor[c+b]=w((t.tickfont||{}).color),this.tickAngle[c+b]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[c+b]=this.getTickPad(t),this.tickMarkLength[c+b]=0,this.tickMarkWidth[c+b]=t.tickwidth||0,this.tickMarkColor[c+b]=w(t.tickcolor),this.borderLineEnable[c+b]=!1,this.borderLineColor[c+b]=w(t.linecolor),this.borderLineWidth[c+b]=t.linewidth||0;o=this.hasSharedAxis(t),r=this.hasAxisInDfltPos(s,t)&&!o,l=this.hasAxisInAltrPos(s,t)&&!o,n=t.mirror||!1,u=o?String(n).indexOf("all")!==-1:!!n,p=o?n==="allticks":String(n).indexOf("ticks")!==-1,r?this.labelEnable[c]=!0:l&&(this.labelEnable[c+2]=!0),r?this.tickEnable[c]=t.showticklabels:l&&(this.tickEnable[c+2]=t.showticklabels),(r||u)&&(this.borderLineEnable[c]=t.showline),(l||u)&&(this.borderLineEnable[c+2]=t.showline),(r||p)&&(this.tickMarkLength[c]=this.getTickMarkLength(t)),(l||p)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(t)),this.gridLineEnable[c]=t.showgrid,this.gridLineColor[c]=w(t.gridcolor),this.gridLineWidth[c]=t.gridwidth,this.zeroLineEnable[c]=t.zeroline,this.zeroLineColor[c]=w(t.zerolinecolor),this.zeroLineWidth[c]=t.zerolinewidth}},_.hasSharedAxis=function(h){var s=this.scene,t=s.fullLayout._subplots.gl2d;return T.findSubplotsWithAxis(t,h).indexOf(s.id)!==0},_.hasAxisInDfltPos=function(h,s){var t=s.side;return h==="xaxis"?t==="bottom":h==="yaxis"?t==="left":void 0},_.hasAxisInAltrPos=function(h,s){var t=s.side;return h==="xaxis"?t==="top":h==="yaxis"?t==="right":void 0},_.getLabelPad=function(h,s){var t=1.5,a=s.title.font.size,n=s.showticklabels;return h==="xaxis"?s.side==="top"?a*(t+(n?1:0))-10:a*(t+(n?.5:0))-10:h==="yaxis"?s.side==="right"?10+a*(t+(n?1:.5)):10+a*(t+(n?.5:0)):void 0},_.getTickPad=function(h){return h.ticks==="outside"?10+h.ticklen:15},_.getTickMarkLength=function(h){if(!h.ticks)return 0;var s=h.ticklen;return h.ticks==="inside"?-s:s},N.exports=function(h){return new i(h)}},4796:function(N,L,e){var T=e(30962).overrideAll,w=e(92918),i=e(10820),_=e(77922),v=e(85555),h=e(93612),s=e(528),t=e(27659).NG;L.name="gl2d",L.attr=["xaxis","yaxis"],L.idRoot=["x","y"],L.idRegex=v.idRegex,L.attrRegex=v.attrRegex,L.attributes=e(89502),L.supplyLayoutDefaults=function(a,n,r){n._has("cartesian")||h.supplyLayoutDefaults(a,n,r)},L.layoutAttrOverrides=T(h.layoutAttributes,"plot","from-root"),L.baseLayoutAttrOverrides=T({plot_bgcolor:i.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),L.plot=function(a){for(var n=a._fullLayout,r=a._fullData,l=n._subplots.gl2d,o=0;o<l.length;o++){var u=l[o],p=n._plots[u],c=t(r,"gl2d",u),b=p._scene2d;b===void 0&&(b=new w({id:u,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},n),p._scene2d=b),b.plot(c,a.calcdata,n,a.layout)}},L.clean=function(a,n,r,l){for(var o=l._subplots.gl2d||[],u=0;u<o.length;u++){var p=o[u],c=l._plots[p];c._scene2d&&t(a,"gl2d",p).length===0&&(c._scene2d.destroy(),delete l._plots[p])}h.clean.apply(this,arguments)},L.drawFramework=function(a){a._context.staticPlot||h.drawFramework(a)},L.toSVG=function(a){for(var n=a._fullLayout,r=n._subplots.gl2d,l=0;l<r.length;l++){var o=n._plots[r[l]]._scene2d,u=o.toImage("png");n._glimages.append("svg:image").attr({xmlns:_.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),o.destroy()}},L.updateFx=function(a){for(var n=a._fullLayout,r=n._subplots.gl2d,l=0;l<r.length;l++)n._plots[r[l]]._scene2d.updateFx(n.dragmode)}},92918:function(N,L,e){var T,w,i=e(73972),_=e(89298),v=e(30211),h=e(9330).gl_plot2d,s=e(9330).gl_spikes2d,t=e(9330).gl_select_box,a=e(40372),n=e(82961),r=e(75071),l=e(58617),o=e(99082),u=o.enforce,p=o.clean,c=e(71739).doAutoRange,b=e(64505),g=b.drawMode,d=b.selectMode,m=["xaxis","yaxis"],x=e(85555).SUBPLOT_PATTERN;function y(f,S){this.container=f.container,this.graphDiv=f.graphDiv,this.pixelRatio=f.plotGlPixelRatio||window.devicePixelRatio,this.id=f.id,this.staticPlot=!!f.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=n(this),this.glplotOptions.merge(S),this.glplot=h(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}N.exports=y;var k=y.prototype;k.makeFramework=function(){if(this.staticPlot){if(!(w||(T=document.createElement("canvas"),w=a({canvas:T,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=T,this.gl=w}else{var f=this.container.querySelector(".gl-canvas-focus"),S=a({canvas:f,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return l(this),void(this.stopped=!0);this.canvas=f,this.gl=S}var M=this.canvas;M.style.width="100%",M.style.height="100%",M.style.position="absolute",M.style.top="0px",M.style.left="0px",M.style["pointer-events"]="none",this.updateSize(M);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var O=this.mouseContainer=document.createElement("div");O.style.position="absolute",O.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var P=this.container;P.appendChild(E),P.appendChild(O);var I=this;O.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),O.addEventListener("mouseover",function(){I.isMouseOver=!0})},k.toImage=function(f){f||(f="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(T),this.updateSize(this.canvas);var S=this.glplot.gl,M=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var O=new Uint8Array(M*E*4);S.readPixels(0,0,M,E,S.RGBA,S.UNSIGNED_BYTE,O);for(var P=0,I=E-1;P<I;++P,--I)for(var z=0;z<M;++z)for(var U=0;U<4;++U){var R=O[4*(M*P+z)+U];O[4*(M*P+z)+U]=O[4*(M*I+z)+U],O[4*(M*I+z)+U]=R}var j=document.createElement("canvas");j.width=M,j.height=E;var Z,F=j.getContext("2d",{willReadFrequently:!0}),V=F.createImageData(M,E);switch(V.data.set(O),F.putImageData(V,0,0),f){case"jpeg":Z=j.toDataURL("image/jpeg");break;case"webp":Z=j.toDataURL("image/webp");break;default:Z=j.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(T),Z},k.updateSize=function(f){f||(f=this.canvas);var S=this.pixelRatio,M=this.fullLayout,E=M.width,O=M.height,P=0|Math.ceil(S*E),I=0|Math.ceil(S*O);return f.width===P&&f.height===I||(f.width=P,f.height=I),f},k.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var f=[_.calcTicks(this.xaxis),_.calcTicks(this.yaxis)],S=0;S<2;++S)for(var M=0;M<f[S].length;++M)f[S][M].text=f[S][M].text+"";return f},k.updateRefs=function(f){this.fullLayout=f;var S=this.id.match(x),M="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[M],this.yaxis=this.fullLayout[E]},k.relayoutCallback=function(){var f=this.graphDiv,S=this.xaxis,M=this.yaxis,E=f.layout,O={},P=O[S._name+".range"]=S.range.slice(),I=O[M._name+".range"]=M.range.slice();O[S._name+".autorange"]=S.autorange,O[M._name+".autorange"]=M.autorange,i.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,O);var z=E[S._name];z.range=P,z.autorange=S.autorange;var U=E[M._name];U.range=I,U.autorange=M.autorange,O.lastInputTime=this.camera.lastInputTime,f.emit("plotly_relayout",O)},k.cameraChanged=function(){var f=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(M,E){for(var O=0;O<2;++O){var P=M[O],I=E[O];if(P.length!==I.length)return!0;for(var z=0;z<P.length;++z)if(P[z].x!==I[z].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=f.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},k.handleAnnotations=function(){for(var f=this.graphDiv,S=this.fullLayout.annotations,M=0;M<S.length;M++){var E=S[M];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&i.getComponentMethod("annotations","drawOne")(f,M)}},k.destroy=function(){if(this.glplot){var f=this.traces;f&&Object.keys(f).map(function(S){f[S].dispose(),delete f[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},k.plot=function(f,S,M){var E=this.glplot;this.updateRefs(M),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(f,S),this.updateFx(M.dragmode);var O=M.width,P=M.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(M),I.screenBox=[0,0,O,P];var z={_fullLayout:{_axisConstraintGroups:M._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:M._size}};p(z,this.xaxis),p(z,this.yaxis);var U,R,j=M._size,Z=this.xaxis.domain,F=this.yaxis.domain;for(I.viewBox=[j.l+Z[0]*j.w,j.b+F[0]*j.h,O-j.r-(1-Z[1])*j.w,P-j.t-(1-F[1])*j.h],this.mouseContainer.style.width=j.w*(Z[1]-Z[0])+"px",this.mouseContainer.style.height=j.h*(F[1]-F[0])+"px",this.mouseContainer.height=j.h*(F[1]-F[0]),this.mouseContainer.style.left=j.l+Z[0]*j.w+"px",this.mouseContainer.style.top=j.t+(1-F[1])*j.h+"px",R=0;R<2;++R)(U=this[m[R]])._length=I.viewBox[R+2]-I.viewBox[R],c(this.graphDiv,U),U.setScale();u(z),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(M),E.update(I),this.glplot.draw()},k.calcDataBox=function(){var f=this.xaxis,S=this.yaxis,M=f.range,E=S.range,O=f.r2l,P=S.r2l;return[O(M[0]),P(E[0]),O(M[1]),P(E[1])]},k.setRanges=function(f){var S=this.xaxis,M=this.yaxis,E=S.l2r,O=M.l2r;S.range=[E(f[0]),E(f[2])],M.range=[O(f[1]),O(f[3])]},k.updateTraces=function(f,S){var M,E,O,P=Object.keys(this.traces);this.fullData=f;e:for(M=0;M<P.length;M++){var I=P[M],z=this.traces[I];for(E=0;E<f.length;E++)if((O=f[E]).uid===I&&O.type===z.type)continue e;z.dispose(),delete this.traces[I]}for(M=0;M<f.length;M++){O=f[M];var U=S[M],R=this.traces[O.uid];R?R.update(O,U):(R=O._module.plot(this,O,U),this.traces[O.uid]=R)}this.glplot.objects.sort(function(j,Z){return j._trace.index-Z._trace.index})},k.updateFx=function(f){d(f)||g(f)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=f==="pan"?"move":f==="zoom"?"crosshair":null},k.emitPointAction=function(f,S){for(var M,E=f.trace.uid,O=f.pointIndex,P=0;P<this.fullData.length;P++)this.fullData[P].uid===E&&(M=this.fullData[P]);var I={x:f.traceCoord[0],y:f.traceCoord[1],curveNumber:M.index,pointNumber:O,data:M._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};v.appendArrayPointValue(I,M,O),this.graphDiv.emit(S,{points:[I]})},k.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var f=this.glplot,S=this.camera,M=S.mouseListener,E=this.lastButtonState===1&&M.buttons===0,O=this.fullLayout;this.lastButtonState=M.buttons,this.cameraChanged();var P,I=M.x*f.pixelRatio,z=this.canvas.height-f.pixelRatio*M.y;if(S.boxEnabled&&O.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],R=0;R<2;R++)S.boxStart[R]===S.boxEnd[R]&&(U[R]=f.dataBox[R],U[R+2]=f.dataBox[R+2]);f.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var j=O._size,Z=this.xaxis.domain,F=this.yaxis.domain,V=(P=f.pick(I/f.pixelRatio+j.l+Z[0]*j.w,z/f.pixelRatio-(j.t+(1-F[1])*j.h)))&&P.object._trace.handlePick(P);if(V&&E&&this.emitPointAction(V,"plotly_click"),P&&P.object._trace.hoverinfo!=="skip"&&O.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var H=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:P.dataCoord}),H.screenCoord=[((f.viewBox[2]-f.viewBox[0])*(P.dataCoord[0]-f.dataBox[0])/(f.dataBox[2]-f.dataBox[0])+f.viewBox[0])/f.pixelRatio,(this.canvas.height-(f.viewBox[3]-f.viewBox[1])*(P.dataCoord[1]-f.dataBox[1])/(f.dataBox[3]-f.dataBox[1])-f.viewBox[1])/f.pixelRatio],this.emitPointAction(V,"plotly_hover");var te=this.fullData[H.trace.index]||{},$=H.pointIndex,J=v.castHoverinfo(te,O,$);if(J&&J!=="all"){var X=J.split("+");X.indexOf("x")===-1&&(H.traceCoord[0]=void 0),X.indexOf("y")===-1&&(H.traceCoord[1]=void 0),X.indexOf("z")===-1&&(H.traceCoord[2]=void 0),X.indexOf("text")===-1&&(H.textLabel=void 0),X.indexOf("name")===-1&&(H.name=void 0)}v.loneHover({x:H.screenCoord[0],y:H.screenCoord[1],xLabel:this.hoverFormatter("xaxis",H.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",H.traceCoord[1]),zLabel:H.traceCoord[2],text:H.textLabel,name:H.name,color:v.castHoverOption(te,$,"bgcolor")||H.color,borderColor:v.castHoverOption(te,$,"bordercolor"),fontFamily:v.castHoverOption(te,$,"font.family"),fontSize:v.castHoverOption(te,$,"font.size"),fontColor:v.castHoverOption(te,$,"font.color"),nameLength:v.castHoverOption(te,$,"namelength"),textAlign:v.castHoverOption(te,$,"align")},{container:this.svgContainer,gd:this.graphDiv})}}P||this.unhover(),f.draw()}},k.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),v.loneUnhover(this.svgContainer))},k.hoverFormatter=function(f,S){if(S!==void 0){var M=this[f];return _.tickText(M,M.c2l(S),"hover").text}}},58547:function(N,L,e){var T=e(30962).overrideAll,w=e(528),i=e(33539),_=e(27659).NG,v=e(71828),h=e(77922),s="gl3d",t="scene";L.name=s,L.attr=t,L.idRoot=t,L.idRegex=L.attrRegex=v.counterRegex("scene"),L.attributes=e(59084),L.layoutAttributes=e(65500),L.baseLayoutAttrOverrides=T({hoverlabel:w.hoverlabel},"plot","nested"),L.supplyLayoutDefaults=e(24682),L.plot=function(a){for(var n=a._fullLayout,r=a._fullData,l=n._subplots[s],o=0;o<l.length;o++){var u=l[o],p=_(r,s,u),c=n[u],b=c.camera,g=c._scene;g||(g=new i({id:u,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio,camera:b},n),c._scene=g),g.viewInitial||(g.viewInitial={up:{x:b.up.x,y:b.up.y,z:b.up.z},eye:{x:b.eye.x,y:b.eye.y,z:b.eye.z},center:{x:b.center.x,y:b.center.y,z:b.center.z}}),g.plot(p,n,a.layout)}},L.clean=function(a,n,r,l){for(var o=l._subplots[s]||[],u=0;u<o.length;u++){var p=o[u];!n[p]&&l[p]._scene&&(l[p]._scene.destroy(),l._infolayer&&l._infolayer.selectAll(".annotation-"+p).remove())}},L.toSVG=function(a){for(var n=a._fullLayout,r=n._subplots[s],l=n._size,o=0;o<r.length;o++){var u=n[r[o]],p=u.domain,c=u._scene,b=c.toImage("png");n._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":b,x:l.l+l.w*p.x[0],y:l.t+l.h*(1-p.y[1]),width:l.w*(p.x[1]-p.x[0]),height:l.h*(p.y[1]-p.y[0]),preserveAspectRatio:"none"}),c.destroy()}},L.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var n=a.substr(5);return n==="1"&&(n=""),t+n}},L.updateFx=function(a){for(var n=a._fullLayout,r=n._subplots[s],l=0;l<r.length;l++)n[r[l]]._scene.updateFx(n.dragmode,n.hovermode)}},59084:function(N){N.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(N,L,e){var T=e(7901),w=e(13838),i=e(1426).extendFlat,_=e(30962).overrideAll;N.exports=_({visible:w.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:T.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:w.color,categoryorder:w.categoryorder,categoryarray:w.categoryarray,title:{text:w.title.text,font:w.title.font},type:i({},w.type,{values:["-","linear","log","date","category"]}),autotypenumbers:w.autotypenumbers,autorange:w.autorange,autorangeoptions:{minallowed:w.autorangeoptions.minallowed,maxallowed:w.autorangeoptions.maxallowed,clipmin:w.autorangeoptions.clipmin,clipmax:w.autorangeoptions.clipmax,include:w.autorangeoptions.include,editType:"plot"},rangemode:w.rangemode,minallowed:w.minallowed,maxallowed:w.maxallowed,range:i({},w.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:w.minor.tickmode,nticks:w.nticks,tick0:w.tick0,dtick:w.dtick,tickvals:w.tickvals,ticktext:w.ticktext,ticks:w.ticks,mirror:w.mirror,ticklen:w.ticklen,tickwidth:w.tickwidth,tickcolor:w.tickcolor,showticklabels:w.showticklabels,labelalias:w.labelalias,tickfont:w.tickfont,tickangle:w.tickangle,tickprefix:w.tickprefix,showtickprefix:w.showtickprefix,ticksuffix:w.ticksuffix,showticksuffix:w.showticksuffix,showexponent:w.showexponent,exponentformat:w.exponentformat,minexponent:w.minexponent,separatethousands:w.separatethousands,tickformat:w.tickformat,tickformatstops:w.tickformatstops,hoverformat:w.hoverformat,showline:w.showline,linecolor:w.linecolor,linewidth:w.linewidth,showgrid:w.showgrid,gridcolor:i({},w.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:w.gridwidth,zeroline:w.zeroline,zerolinecolor:w.zerolinecolor,zerolinewidth:w.zerolinewidth,_deprecated:{title:w._deprecated.title,titlefont:w._deprecated.titlefont}},"plot","from-root")},3277:function(N,L,e){var T=e(84267).mix,w=e(71828),i=e(44467),_=e(77894),v=e(951),h=e(71453),s=["xaxis","yaxis","zaxis"];N.exports=function(t,a,n){var r,l;function o(c,b){return w.coerce(r,l,_,c,b)}for(var u=0;u<s.length;u++){var p=s[u];r=t[p]||{},(l=i.newContainer(a,p))._id=p[0]+n.scene,l._name=p,v(r,l,o,n),h(r,l,o,{font:n.font,letter:p[0],data:n.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),o("gridcolor",T(l.color,n.bgColor,72.72727272727273).toRgbString()),o("title.text",p[0]),l.setScale=w.noop,o("showspikes")&&(o("spikesides"),o("spikethickness"),o("spikecolor",l.color)),o("showaxeslabels"),o("showbackground")&&o("backgroundcolor")}}},30422:function(N,L,e){var T=e(78614),w=e(71828),i=["xaxis","yaxis","zaxis"];function _(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}_.prototype.merge=function(v,h){for(var s=this,t=0;t<3;++t){var a=h[i[t]];a.visible?(s.labels[t]=v._meta?w.templateString(a.title.text,v._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(s.labelColor[t]=T(a.title.font.color)),a.title.font.family&&(s.labelFont[t]=a.title.font.family),a.title.font.size&&(s.labelSize[t]=a.title.font.size)),"showline"in a&&(s.lineEnable[t]=a.showline),"linecolor"in a&&(s.lineColor[t]=T(a.linecolor)),"linewidth"in a&&(s.lineWidth[t]=a.linewidth),"showgrid"in a&&(s.gridEnable[t]=a.showgrid),"gridcolor"in a&&(s.gridColor[t]=T(a.gridcolor)),"gridwidth"in a&&(s.gridWidth[t]=a.gridwidth),a.type==="log"?s.zeroEnable[t]=!1:"zeroline"in a&&(s.zeroEnable[t]=a.zeroline),"zerolinecolor"in a&&(s.zeroLineColor[t]=T(a.zerolinecolor)),"zerolinewidth"in a&&(s.zeroLineWidth[t]=a.zerolinewidth),"ticks"in a&&a.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in a&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=a.ticklen),"tickcolor"in a&&(s.lineTickColor[t]=T(a.tickcolor)),"tickwidth"in a&&(s.lineTickWidth[t]=a.tickwidth),"tickangle"in a&&(s.tickAngle[t]=a.tickangle==="auto"?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(s.tickEnable[t]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(s.tickColor[t]=T(a.tickfont.color)),a.tickfont.family&&(s.tickFont[t]=a.tickfont.family),a.tickfont.size&&(s.tickSize[t]=a.tickfont.size)),"mirror"in a?["ticks","all","allticks"].indexOf(a.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):a.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in a&&a.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=T(a.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},N.exports=function(v,h){var s=new _;return s.merge(v,h),s}},24682:function(N,L,e){var T=e(71828),w=e(7901),i=e(73972),_=e(49119),v=e(3277),h=e(65500),s=e(27659).NG,t="gl3d";function a(n,r,l,o){for(var u=l("bgcolor"),p=w.combine(u,o.paper_bgcolor),c=["up","center","eye"],b=0;b<c.length;b++)l("camera."+c[b]+".x"),l("camera."+c[b]+".y"),l("camera."+c[b]+".z");l("camera.projection.type");var g=!!l("aspectratio.x")&&!!l("aspectratio.y")&&!!l("aspectratio.z"),d=l("aspectmode",g?"manual":"auto");g||(n.aspectratio=r.aspectratio={x:1,y:1,z:1},d==="manual"&&(r.aspectmode="auto"),n.aspectmode=r.aspectmode);var m=s(o.fullData,t,o.id);v(n,r,{font:o.font,scene:o.id,data:m,bgColor:p,calendar:o.calendar,autotypenumbersDflt:o.autotypenumbersDflt,fullLayout:o.fullLayout}),i.getComponentMethod("annotations3d","handleDefaults")(n,r,o);var x=o.getDfltFromLayout("dragmode");if(x!==!1&&!x)if(x="orbit",n.camera&&n.camera.up){var y=n.camera.up.x,k=n.camera.up.y,f=n.camera.up.z;f!==0&&(y&&k&&f?f/Math.sqrt(y*y+k*k+f*f)>.999&&(x="turntable"):x="turntable")}else x="turntable";l("dragmode",x),l("hovermode",o.getDfltFromLayout("hovermode"))}N.exports=function(n,r,l){var o=r._basePlotModules.length>1;_(n,r,l,{type:t,attributes:h,handleDefaults:a,fullLayout:r,font:r.font,fullData:l,getDfltFromLayout:function(u){if(!o)return T.validate(n[u],h[u])?n[u]:void 0},autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})}},65500:function(N,L,e){var T=e(77894),w=e(27670).Y,i=e(1426).extendFlat,_=e(71828).counterRegex;function v(h,s,t){return{x:{valType:"number",dflt:h,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}N.exports={_arrayAttrRegexps:[_("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:i(v(0,0,1),{}),center:i(v(0,0,0),{}),eye:i(v(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:w({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:T,yaxis:T,zaxis:T,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(N,L,e){var T=e(78614),w=["xaxis","yaxis","zaxis"];function i(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}i.prototype.merge=function(_){for(var v=0;v<3;++v){var h=_[w[v]];h.visible?(this.enabled[v]=h.showspikes,this.colors[v]=T(h.spikecolor),this.drawSides[v]=h.spikesides,this.lineWidth[v]=h.spikethickness):(this.enabled[v]=!1,this.drawSides[v]=!1)}},N.exports=function(_){var v=new i;return v.merge(_),v}},96085:function(N,L,e){N.exports=function(v){for(var h=v.axesOptions,s=v.glplot.axesPixels,t=v.fullSceneLayout,a=[[],[],[]],n=0;n<3;++n){var r=t[i[n]];if(r._length=(s[n].hi-s[n].lo)*s[n].pixelsPerDataUnit/v.dataScale[n],Math.abs(r._length)===1/0||isNaN(r._length))a[n]=[];else{r._input_range=r.range.slice(),r.range[0]=s[n].lo/v.dataScale[n],r.range[1]=s[n].hi/v.dataScale[n],r._m=1/(v.dataScale[n]*s[n].pixelsPerDataUnit),r.range[0]===r.range[1]&&(r.range[0]-=1,r.range[1]+=1);var l=r.tickmode;if(r.tickmode==="auto"){r.tickmode="linear";var o=r.nticks||w.constrain(r._length/40,4,9);T.autoTicks(r,Math.abs(r.range[1]-r.range[0])/o)}for(var u=T.calcTicks(r,{msUTC:!0}),p=0;p<u.length;++p)u[p].x=u[p].x*v.dataScale[n],r.type==="date"&&(u[p].text=u[p].text.replace(/\<br\>/g," "));a[n]=u,r.tickmode=l}}for(h.ticks=a,n=0;n<3;++n)for(_[n]=.5*(v.glplot.bounds[0][n]+v.glplot.bounds[1][n]),p=0;p<2;++p)h.bounds[p][n]=v.glplot.bounds[p][n];v.contourLevels=function(c){for(var b=new Array(3),g=0;g<3;++g){for(var d=c[g],m=new Array(d.length),x=0;x<d.length;++x)m[x]=d[x].x;b[g]=m}return b}(a)};var T=e(89298),w=e(71828),i=["xaxis","yaxis","zaxis"],_=[0,0,0]},63538:function(N){function L(e,T){var w,i,_=[0,0,0,0];for(w=0;w<4;++w)for(i=0;i<4;++i)_[i]+=e[4*w+i]*T[w];return _}N.exports=function(e,T){return L(e.projection,L(e.view,L(e.model,[T[0],T[1],T[2],1])))}},33539:function(N,L,e){var T,w,i=e(9330).gl_plot3d,_=i.createCamera,v=i.createScene,h=e(40372),s=e(38520),t=e(73972),a=e(71828),n=a.preserveDrawingBuffer(),r=e(89298),l=e(30211),o=e(78614),u=e(58617),p=e(63538),c=e(30422),b=e(13133),g=e(96085),d=e(71739).applyAutorangeOptions,m=!1;function x(M,E){var O=document.createElement("div"),P=M.container;this.graphDiv=M.graphDiv;var I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",I.style["z-index"]=20,I.style["pointer-events"]="none",O.appendChild(I),this.svgContainer=I,O.id=M.id,O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",P.appendChild(O),this.fullLayout=E,this.id=M.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(E,E[this.id]),this.spikeOptions=b(E[this.id]),this.container=O,this.staticMode=!!M.staticPlot,this.pixelRatio=this.pixelRatio||M.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=x.prototype;y.prepareOptions=function(){var M=this,E={canvas:M.canvas,gl:M.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:M.container,axes:M.axesOptions,spikes:M.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:M.camera,pixelRatio:M.pixelRatio};if(M.staticMode){if(!(w||(T=document.createElement("canvas"),w=h({canvas:T,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=w,E.canvas=T}return E};var k=!0;y.tryCreatePlot=function(){var M=this,E=M.prepareOptions(),O=!0;try{M.glplot=v(E)}catch{if(M.staticMode||!k||n)O=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=E.glOptions.preserveDrawingBuffer=!0,M.glplot=v(E)}catch{n=E.glOptions.preserveDrawingBuffer=!1,O=!1}}}return k=!1,O},y.initializeGLCamera=function(){var M=this,E=M.fullSceneLayout.camera,O=E.projection.type==="orthographic";M.camera=_(M.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:O,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var M=this;if(M.initializeGLCamera(),!M.tryCreatePlot())return u(M);M.traces={},M.make4thDimension();var E=M.graphDiv,O=E.layout,P=function(){var z={};return M.isCameraChanged(O)&&(z[M.id+".camera"]=M.getCamera()),M.isAspectChanged(O)&&(z[M.id+".aspectratio"]=M.glplot.getAspectratio(),O[M.id].aspectmode!=="manual"&&(M.fullSceneLayout.aspectmode=O[M.id].aspectmode=z[M.id+".aspectmode"]="manual")),z},I=function(z){if(z.fullSceneLayout.dragmode!==!1){var U=P();z.saveLayout(O),z.graphDiv.emit("plotly_relayout",U)}};return M.glplot.canvas&&(M.glplot.canvas.addEventListener("mouseup",function(){I(M)}),M.glplot.canvas.addEventListener("touchstart",function(){m=!0}),M.glplot.canvas.addEventListener("wheel",function(z){if(E._context._scrollZoom.gl3d){if(M.camera._ortho){var U=z.deltaX>z.deltaY?1.1:.9090909090909091,R=M.glplot.getAspectratio();M.glplot.setAspectratio({x:U*R.x,y:U*R.y,z:U*R.z})}I(M)}},!!s&&{passive:!1}),M.glplot.canvas.addEventListener("mousemove",function(){if(M.fullSceneLayout.dragmode!==!1&&M.camera.mouseListener.buttons!==0){var z=P();M.graphDiv.emit("plotly_relayouting",z)}}),M.staticMode||M.glplot.canvas.addEventListener("webglcontextlost",function(z){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:z,layer:M.id})},!1)),M.glplot.oncontextloss=function(){M.recoverContext()},M.glplot.onrender=function(){M.render()},!0},y.render=function(){var M,E=this,O=E.graphDiv,P=E.svgContainer,I=E.container.getBoundingClientRect();O._fullLayout._calcInverseTransform(O);var z=O._fullLayout._invScaleX,U=O._fullLayout._invScaleY,R=I.width*z,j=I.height*U;P.setAttributeNS(null,"viewBox","0 0 "+R+" "+j),P.setAttributeNS(null,"width",R),P.setAttributeNS(null,"height",j),g(E),E.glplot.axes.update(E.axesOptions);for(var Z=Object.keys(E.traces),F=null,V=E.glplot.selection,H=0;H<Z.length;++H)(M=E.traces[Z[H]]).data.hoverinfo!=="skip"&&M.handlePick(V)&&(F=M),M.setContourLevels&&M.setContourLevels();function te(_e,ye,Ce){var ke=E.fullSceneLayout[_e+"axis"];return ke.type!=="log"&&(ye=ke.d2l(ye)),r.hoverLabelText(ke,ye,Ce)}if(F!==null){var $=p(E.glplot.cameraParams,V.dataCoordinate);M=F.data;var J,X=O._fullData[M.index],K=V.index,ee={xLabel:te("x",V.traceCoordinate[0],M.xhoverformat),yLabel:te("y",V.traceCoordinate[1],M.yhoverformat),zLabel:te("z",V.traceCoordinate[2],M.zhoverformat)},ie=l.castHoverinfo(X,E.fullLayout,K),ae=(ie||"").split("+"),oe=ie&&ie==="all";X.hovertemplate||oe||(ae.indexOf("x")===-1&&(ee.xLabel=void 0),ae.indexOf("y")===-1&&(ee.yLabel=void 0),ae.indexOf("z")===-1&&(ee.zLabel=void 0),ae.indexOf("text")===-1&&(V.textLabel=void 0),ae.indexOf("name")===-1&&(F.name=void 0));var fe=[];M.type==="cone"||M.type==="streamtube"?(ee.uLabel=te("x",V.traceCoordinate[3],M.uhoverformat),(oe||ae.indexOf("u")!==-1)&&fe.push("u: "+ee.uLabel),ee.vLabel=te("y",V.traceCoordinate[4],M.vhoverformat),(oe||ae.indexOf("v")!==-1)&&fe.push("v: "+ee.vLabel),ee.wLabel=te("z",V.traceCoordinate[5],M.whoverformat),(oe||ae.indexOf("w")!==-1)&&fe.push("w: "+ee.wLabel),ee.normLabel=V.traceCoordinate[6].toPrecision(3),(oe||ae.indexOf("norm")!==-1)&&fe.push("norm: "+ee.normLabel),M.type==="streamtube"&&(ee.divergenceLabel=V.traceCoordinate[7].toPrecision(3),(oe||ae.indexOf("divergence")!==-1)&&fe.push("divergence: "+ee.divergenceLabel)),V.textLabel&&fe.push(V.textLabel),J=fe.join("<br>")):M.type==="isosurface"||M.type==="volume"?(ee.valueLabel=r.hoverLabelText(E._mockAxis,E._mockAxis.d2l(V.traceCoordinate[3]),M.valuehoverformat),fe.push("value: "+ee.valueLabel),V.textLabel&&fe.push(V.textLabel),J=fe.join("<br>")):J=V.textLabel;var ge={x:V.traceCoordinate[0],y:V.traceCoordinate[1],z:V.traceCoordinate[2],data:X._input,fullData:X,curveNumber:X.index,pointNumber:K};l.appendArrayPointValue(ge,X,K),M._module.eventData&&(ge=X._module.eventData(ge,V,X,{},K));var ve={points:[ge]};if(E.fullSceneLayout.hovermode){var xe=[];l.loneHover({trace:X,x:(.5+.5*$[0]/$[3])*R,y:(.5-.5*$[1]/$[3])*j,xLabel:ee.xLabel,yLabel:ee.yLabel,zLabel:ee.zLabel,text:J,name:F.name,color:l.castHoverOption(X,K,"bgcolor")||F.color,borderColor:l.castHoverOption(X,K,"bordercolor"),fontFamily:l.castHoverOption(X,K,"font.family"),fontSize:l.castHoverOption(X,K,"font.size"),fontColor:l.castHoverOption(X,K,"font.color"),nameLength:l.castHoverOption(X,K,"namelength"),textAlign:l.castHoverOption(X,K,"align"),hovertemplate:a.castOption(X,K,"hovertemplate"),hovertemplateLabels:a.extendFlat({},ge,ee),eventData:[ge]},{container:P,gd:O,inOut_bbox:xe}),ge.bbox=xe[0]}V.distance<5&&(V.buttons||m)?O.emit("plotly_click",ve):O.emit("plotly_hover",ve),this.oldEventData=ve}else l.loneUnhover(P),this.oldEventData&&O.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},y.recoverContext=function(){var M=this;M.glplot.dispose();var E=function(){M.glplot.gl.isContextLost()?requestAnimationFrame(E):M.initializeGLPlot()?M.plot.apply(M,M.plotArgs):a.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var f=["xaxis","yaxis","zaxis"];function S(M,E,O){for(var P=M.fullSceneLayout,I=0;I<3;I++){var z=f[I],U=z.charAt(0),R=P[z],j=E[U],Z=E[U+"calendar"],F=E["_"+U+"length"];if(a.isArrayOrTypedArray(j))for(var V,H=0;H<(F||j.length);H++)if(a.isArrayOrTypedArray(j[H]))for(var te=0;te<j[H].length;++te)V=R.d2l(j[H][te],0,Z),!isNaN(V)&&isFinite(V)&&(O[0][I]=Math.min(O[0][I],V),O[1][I]=Math.max(O[1][I],V));else V=R.d2l(j[H],0,Z),!isNaN(V)&&isFinite(V)&&(O[0][I]=Math.min(O[0][I],V),O[1][I]=Math.max(O[1][I],V));else O[0][I]=Math.min(O[0][I],0),O[1][I]=Math.max(O[1][I],F-1)}}y.plot=function(M,E,O){var P=this;if(P.plotArgs=[M,E,O],!P.glplot.contextLost){var I,z,U,R,j,Z,F=E[P.id],V=O[P.id];P.fullLayout=E,P.fullSceneLayout=F,P.axesOptions.merge(E,F),P.spikeOptions.merge(F),P.setViewport(F),P.updateFx(F.dragmode,F.hovermode),P.camera.enableWheel=P.graphDiv._context._scrollZoom.gl3d,P.glplot.setClearColor(o(F.bgcolor)),P.setConvert(j),M?Array.isArray(M)||(M=[M]):M=[];var H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(U=0;U<M.length;++U)(I=M[U]).visible===!0&&I._length!==0&&S(this,I,H);(function(Oe,Fe){for(var pe=Oe.fullSceneLayout,be=pe.annotations||[],Me=0;Me<3;Me++)for(var De=f[Me],Ne=De.charAt(0),Be=pe[De],Ye=0;Ye<be.length;Ye++){var We=be[Ye];if(We.visible){var et=Be.r2l(We[Ne]);!isNaN(et)&&isFinite(et)&&(Fe[0][Me]=Math.min(Fe[0][Me],et),Fe[1][Me]=Math.max(Fe[1][Me],et))}}})(this,H);var te=[1,1,1];for(R=0;R<3;++R)H[1][R]===H[0][R]?te[R]=1:te[R]=1/(H[1][R]-H[0][R]);for(P.dataScale=te,P.convertAnnotations(this),U=0;U<M.length;++U)(I=M[U]).visible===!0&&I._length!==0&&((z=P.traces[I.uid])?z.data.type===I.type?z.update(I):(z.dispose(),z=I._module.plot(this,I),P.traces[I.uid]=z):(z=I._module.plot(this,I),P.traces[I.uid]=z),z.name=I.name);var $=Object.keys(P.traces);e:for(U=0;U<$.length;++U){for(R=0;R<M.length;++R)if(M[R].uid===$[U]&&M[R].visible===!0&&M[R]._length!==0)continue e;(z=P.traces[$[U]]).dispose(),delete P.traces[$[U]]}P.glplot.objects.sort(function(Oe,Fe){return Oe._trace.data.index-Fe._trace.data.index});var J,X=[[0,0,0],[0,0,0]],K=[],ee={};for(U=0;U<3;++U){var ie;if((Z=(j=F[f[U]]).type)in ee?(ee[Z].acc*=te[U],ee[Z].count+=1):ee[Z]={acc:te[U],count:1},j.autorange){X[0][U]=1/0,X[1][U]=-1/0;var ae=P.glplot.objects,oe=P.fullSceneLayout.annotations||[],fe=j._name.charAt(0);for(R=0;R<ae.length;R++){var ge=ae[R],ve=ge.bounds,xe=ge._trace.data._pad||0;ge.constructor.name==="ErrorBars"&&j._lowerLogErrorBound?X[0][U]=Math.min(X[0][U],j._lowerLogErrorBound):X[0][U]=Math.min(X[0][U],ve[0][U]/te[U]-xe),X[1][U]=Math.max(X[1][U],ve[1][U]/te[U]+xe)}for(R=0;R<oe.length;R++){var _e=oe[R];if(_e.visible){var ye=j.r2l(_e[fe]);X[0][U]=Math.min(X[0][U],ye),X[1][U]=Math.max(X[1][U],ye)}}if("rangemode"in j&&j.rangemode==="tozero"&&(X[0][U]=Math.min(X[0][U],0),X[1][U]=Math.max(X[1][U],0)),X[0][U]>X[1][U])X[0][U]=-1,X[1][U]=1;else{var Ce=X[1][U]-X[0][U];X[0][U]-=Ce/32,X[1][U]+=Ce/32}if(ie=[X[0][U],X[1][U]],ie=d(ie,j),X[0][U]=ie[0],X[1][U]=ie[1],j.isReversed()){var ke=X[0][U];X[0][U]=X[1][U],X[1][U]=ke}}else ie=j.range,X[0][U]=j.r2l(ie[0]),X[1][U]=j.r2l(ie[1]);X[0][U]===X[1][U]&&(X[0][U]-=1,X[1][U]+=1),K[U]=X[1][U]-X[0][U],j.range=[X[0][U],X[1][U]],j.limitRange(),P.glplot.setBounds(U,{min:j.range[0]*te[U],max:j.range[1]*te[U]})}var Te=F.aspectmode;if(Te==="cube")J=[1,1,1];else if(Te==="manual"){var le=F.aspectratio;J=[le.x,le.y,le.z]}else{if(Te!=="auto"&&Te!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var ue=[1,1,1];for(U=0;U<3;++U){var de=ee[Z=(j=F[f[U]]).type];ue[U]=Math.pow(de.acc,1/de.count)/te[U]}J=Te==="data"||Math.max.apply(null,ue)/Math.min.apply(null,ue)<=4?ue:[1,1,1]}F.aspectratio.x=V.aspectratio.x=J[0],F.aspectratio.y=V.aspectratio.y=J[1],F.aspectratio.z=V.aspectratio.z=J[2],P.glplot.setAspectratio(F.aspectratio),P.viewInitial.aspectratio||(P.viewInitial.aspectratio={x:F.aspectratio.x,y:F.aspectratio.y,z:F.aspectratio.z}),P.viewInitial.aspectmode||(P.viewInitial.aspectmode=F.aspectmode);var Le=F.domain||null,we=E._size||null;if(Le&&we){var Ee=P.container.style;Ee.position="absolute",Ee.left=we.l+Le.x[0]*we.w+"px",Ee.top=we.t+(1-Le.y[1])*we.h+"px",Ee.width=we.w*(Le.x[1]-Le.x[0])+"px",Ee.height=we.h*(Le.y[1]-Le.y[0])+"px"}P.glplot.redraw()}},y.destroy=function(){var M=this;M.glplot&&(M.camera.mouseListener.enabled=!1,M.container.removeEventListener("wheel",M.camera.wheelListener),M.camera=null,M.glplot.dispose(),M.container.parentNode.removeChild(M.container),M.glplot=null)},y.getCamera=function(){var M,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(M=E.camera).up[0],y:M.up[1],z:M.up[2]},center:{x:M.center[0],y:M.center[1],z:M.center[2]},eye:{x:M.eye[0],y:M.eye[1],z:M.eye[2]},projection:{type:M._ortho===!0?"orthographic":"perspective"}}},y.setViewport=function(M){var E,O=this,P=M.camera;O.camera.lookAt.apply(this,[[(E=P).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),O.glplot.setAspectratio(M.aspectratio),P.projection.type==="orthographic"!==O.camera._ortho&&(O.glplot.redraw(),O.glplot.clearRGBA(),O.glplot.dispose(),O.initializeGLPlot())},y.isCameraChanged=function(M){var E=this.getCamera(),O=a.nestedProperty(M,this.id+".camera").get();function P(R,j,Z,F){var V=["up","center","eye"],H=["x","y","z"];return j[V[Z]]&&R[V[Z]][H[F]]===j[V[Z]][H[F]]}var I=!1;if(O===void 0)I=!0;else{for(var z=0;z<3;z++)for(var U=0;U<3;U++)if(!P(E,O,z,U)){I=!0;break}(!O.projection||E.projection&&E.projection.type!==O.projection.type)&&(I=!0)}return I},y.isAspectChanged=function(M){var E=this.glplot.getAspectratio(),O=a.nestedProperty(M,this.id+".aspectratio").get();return O===void 0||O.x!==E.x||O.y!==E.y||O.z!==E.z},y.saveLayout=function(M){var E,O,P,I,z,U,R=this,j=R.fullLayout,Z=R.isCameraChanged(M),F=R.isAspectChanged(M),V=Z||F;if(V){var H={};Z&&(E=R.getCamera(),P=(O=a.nestedProperty(M,R.id+".camera")).get(),H[R.id+".camera"]=P),F&&(I=R.glplot.getAspectratio(),U=(z=a.nestedProperty(M,R.id+".aspectratio")).get(),H[R.id+".aspectratio"]=U),t.call("_storeDirectGUIEdit",M,j._preGUI,H),Z&&(O.set(E),a.nestedProperty(j,R.id+".camera").set(E)),F&&(z.set(I),a.nestedProperty(j,R.id+".aspectratio").set(I),R.glplot.redraw())}return V},y.updateFx=function(M,E){var O=this,P=O.camera;if(P)if(M==="orbit")P.mode="orbit",P.keyBindingMode="rotate";else if(M==="turntable"){P.up=[0,0,1],P.mode="turntable",P.keyBindingMode="rotate";var I=O.graphDiv,z=I._fullLayout,U=O.fullSceneLayout.camera,R=U.up.x,j=U.up.y,Z=U.up.z;if(Z/Math.sqrt(R*R+j*j+Z*Z)<.999){var F=O.id+".camera.up",V={x:0,y:0,z:1},H={};H[F]=V;var te=I.layout;t.call("_storeDirectGUIEdit",te,z._preGUI,H),U.up=V,a.nestedProperty(te,F).set(V)}}else P.keyBindingMode=M;O.fullSceneLayout.hovermode=E},y.toImage=function(M){var E=this;M||(M="png"),E.staticMode&&E.container.appendChild(T),E.glplot.redraw();var O=E.glplot.gl,P=O.drawingBufferWidth,I=O.drawingBufferHeight;O.bindFramebuffer(O.FRAMEBUFFER,null);var z=new Uint8Array(P*I*4);O.readPixels(0,0,P,I,O.RGBA,O.UNSIGNED_BYTE,z),function(F,V,H){for(var te=0,$=H-1;te<$;++te,--$)for(var J=0;J<V;++J)for(var X=0;X<4;++X){var K=4*(V*te+J)+X,ee=4*(V*$+J)+X,ie=F[K];F[K]=F[ee],F[ee]=ie}}(z,P,I),function(F,V,H){for(var te=0;te<H;++te)for(var $=0;$<V;++$){var J=4*(V*te+$),X=F[J+3];if(X>0)for(var K=255/X,ee=0;ee<3;++ee)F[J+ee]=Math.min(K*F[J+ee],255)}}(z,P,I);var U=document.createElement("canvas");U.width=P,U.height=I;var R,j=U.getContext("2d",{willReadFrequently:!0}),Z=j.createImageData(P,I);switch(Z.data.set(z),j.putImageData(Z,0,0),M){case"jpeg":R=U.toDataURL("image/jpeg");break;case"webp":R=U.toDataURL("image/webp");break;default:R=U.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(T),R},y.setConvert=function(){for(var M=0;M<3;M++){var E=this.fullSceneLayout[f[M]];r.setConvert(E,this.fullLayout),E.setScale=a.noop}},y.make4thDimension=function(){var M=this,E=M.graphDiv._fullLayout;M._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(M._mockAxis,E)},N.exports=x},90060:function(N){N.exports=function(L,e,T,w){w=w||L.length;for(var i=new Array(w),_=0;_<w;_++)i[_]=[L[_],e[_],T[_]];return i}},10820:function(N,L,e){var T=e(41940),w=e(85594),i=e(22399),_=e(29241),v=e(53777),h=e(35025),s=e(1426).extendFlat,t=T({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=i.defaultLine,N.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:T({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(h({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:_.newshape,activeshape:_.activeshape,newselection:v.newselection,activeselection:v.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},w.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:T({editType:"layoutstyle"})}}},77734:function(N,L,e){var T=e(78607),w="1.13.4",i=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',_=[' <a target="_blank" href="https://carto.com/">Carto</a>',i].join(" "),v=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),h={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:i,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:_,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:_,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:v,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:v,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=T(h);N.exports={requiredVersion:w,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:h,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+w+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function(N,L,e){var T=e(71828);N.exports=function(w,i){var _=w.split(" "),v=_[0],h=_[1],s=T.isArrayOrTypedArray(i)?T.mean(i):i,t=.5+s/100,a=1.5+s/100,n=["",""],r=[0,0];switch(v){case"top":n[0]="top",r[1]=-a;break;case"bottom":n[0]="bottom",r[1]=a}switch(h){case"left":n[1]="right",r[0]=-t;break;case"right":n[1]="left",r[0]=t}return{anchor:n[0]&&n[1]?n.join("-"):n[0]?n[0]:n[1]?n[1]:"center",offset:r}}},50101:function(N,L,e){var T=e(97433),w=e(71828),i=w.strTranslate,_=w.strScale,v=e(27659).AU,h=e(77922),s=e(39898),t=e(91424),a=e(63893),n=e(10481),r="mapbox",l=L.constants=e(77734);function o(u){return typeof u=="string"&&(l.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0||u.indexOf("stamen")===0)}L.name=r,L.attr="subplot",L.idRoot=r,L.idRegex=L.attrRegex=w.counterRegex(r),L.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},L.layoutAttributes=e(23585),L.supplyLayoutDefaults=e(77882),L.plot=function(u){var p=u._fullLayout,c=u.calcdata,b=p._subplots[r];if(T.version!==l.requiredVersion)throw new Error(l.wrongVersionErrorMsg);var g=function(f,S){var M=f._fullLayout;if(f._context.mapboxAccessToken==="")return"";for(var E=[],O=[],P=!1,I=!1,z=0;z<S.length;z++){var U=M[S[z]],R=U.accesstoken;o(U.style)&&(R?w.pushUnique(E,R):(o(U._input.style)&&(w.error("Uses Mapbox map style, but did not set an access token."),P=!0),I=!0)),R&&w.pushUnique(O,R)}if(I){var j=P?l.noAccessTokenErrorMsg:l.missingStyleErrorMsg;throw w.error(j),new Error(j)}return E.length?(E.length>1&&w.warn(l.multipleTokensErrorMsg),E[0]):(O.length&&w.log(["Listed mapbox access token(s)",O.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,b);T.accessToken=g;for(var d=0;d<b.length;d++){var m=b[d],x=v(c,r,m),y=p[m],k=y._subplot;k||(k=new n(u,m),p[m]._subplot=k),k.viewInitial||(k.viewInitial={center:w.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),k.plot(x,p,u._promises)}},L.clean=function(u,p,c,b){for(var g=b._subplots[r]||[],d=0;d<g.length;d++){var m=g[d];!p[m]&&b[m]._subplot&&b[m]._subplot.destroy()}},L.toSVG=function(u){for(var p=u._fullLayout,c=p._subplots[r],b=p._size,g=0;g<c.length;g++){var d=p[c[g]],m=d.domain,x=d._subplot.toImage("png");p._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":x,x:b.l+b.w*m.x[0],y:b.t+b.h*(1-m.y[1]),width:b.w*(m.x[1]-m.x[0]),height:b.h*(m.y[1]-m.y[0]),preserveAspectRatio:"none"});var y=s.select(d._subplot.div);if(y.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var k=p._glimages.append("g");k.attr("transform",i(b.l+b.w*m.x[0]+10,b.t+b.h*(1-m.y[0])-31)),k.append("path").attr("d",l.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),k.append("path").attr("d",l.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),k.append("path").attr("d",l.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),k.append("polygon").attr("points",l.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var f=y.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=p._glimages.append("g"),M=S.append("text");M.text(f).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":f});var E=t.bBox(M.node()),O=b.w*(m.x[1]-m.x[0]);if(E.width>O/2){var P=f.split("|").join("<br>");M.text(P).attr("data-unformatted",P).call(a.convertToTspans,u),E=t.bBox(M.node())}M.attr("transform",i(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var I=1;E.width+6>O&&(I=O/(E.width+6));var z=[b.l+b.w*m.x[1],b.t+b.h*(1-m.y[0])];S.attr("transform",i(z[0],z[1])+_(I))}},L.updateFx=function(u){for(var p=u._fullLayout,c=p._subplots[r],b=0;b<c.length;b++)p[c[b]]._subplot.updateFx(p)}},67911:function(N,L,e){var T=e(71828),w=e(63893).sanitizeHTML,i=e(13056),_=e(77734);function v(a,n){this.subplot=a,this.uid=a.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=_.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var h=v.prototype;function s(a){if(!a.visible)return!1;var n=a.source;if(Array.isArray(n)&&n.length>0){for(var r=0;r<n.length;r++)if(typeof n[r]!="string"||n[r].length===0)return!1;return!0}return T.isPlainObject(n)||typeof n=="string"&&n.length>0}function t(a){var n={},r={};switch(a.type){case"circle":T.extendFlat(r,{"circle-radius":a.circle.radius,"circle-color":a.color,"circle-opacity":a.opacity});break;case"line":T.extendFlat(r,{"line-width":a.line.width,"line-color":a.color,"line-opacity":a.opacity,"line-dasharray":a.line.dash});break;case"fill":T.extendFlat(r,{"fill-color":a.color,"fill-outline-color":a.fill.outlinecolor,"fill-opacity":a.opacity});break;case"symbol":var l=a.symbol,o=i(l.textposition,l.iconsize);T.extendFlat(n,{"icon-image":l.icon+"-15","icon-size":l.iconsize/10,"text-field":l.text,"text-size":l.textfont.size,"text-anchor":o.anchor,"text-offset":o.offset,"symbol-placement":l.placement}),T.extendFlat(r,{"icon-color":a.color,"text-color":l.textfont.color,"text-opacity":a.opacity});break;case"raster":T.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":a.opacity})}return{layout:n,paint:r}}h.update=function(a){this.visible?this.needsNewImage(a)?this.updateImage(a):this.needsNewSource(a)?(this.removeLayer(),this.updateSource(a),this.updateLayer(a)):this.needsNewLayer(a)?this.updateLayer(a):this.updateStyle(a):(this.updateSource(a),this.updateLayer(a)),this.visible=s(a)},h.needsNewImage=function(a){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&a.sourcetype==="image"&&(this.source!==a.source||JSON.stringify(this.coordinates)!==JSON.stringify(a.coordinates))},h.needsNewSource=function(a){return this.sourceType!==a.sourcetype||JSON.stringify(this.source)!==JSON.stringify(a.source)||this.layerType!==a.type},h.needsNewLayer=function(a){return this.layerType!==a.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},h.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},h.updateImage=function(a){this.subplot.map.getSource(this.idSource).updateImage({url:a.source,coordinates:a.coordinates});var n=this.findFollowingMapboxLayerId(this.lookupBelow());n!==null&&this.subplot.map.moveLayer(this.idLayer,n)},h.updateSource=function(a){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=a.sourcetype,this.source=a.source,s(a)){var r=function(l){var o,u=l.sourcetype,p=l.source,c={type:u};return u==="geojson"?o="data":u==="vector"?o=typeof p=="string"?"url":"tiles":u==="raster"?(o="tiles",c.tileSize=256):u==="image"&&(o="url",c.coordinates=l.coordinates),c[o]=p,l.sourceattribution&&(c.attribution=w(l.sourceattribution)),c}(a);n.addSource(this.idSource,r)}},h.findFollowingMapboxLayerId=function(a){if(a==="traces")for(var n=this.subplot.getMapLayers(),r=0;r<n.length;r++){var l=n[r].id;if(typeof l=="string"&&l.indexOf(_.traceLayerPrefix)===0){a=l;break}}return a},h.updateLayer=function(a){var n=this.subplot,r=t(a),l=this.lookupBelow(),o=this.findFollowingMapboxLayerId(l);this.removeLayer(),s(a)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":a.sourcelayer||"",type:a.type,minzoom:a.minzoom,maxzoom:a.maxzoom,layout:r.layout,paint:r.paint},o),this.layerType=a.type,this.below=l},h.updateStyle=function(a){if(s(a)){var n=t(a);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},h.removeLayer=function(){var a=this.subplot.map;a.getLayer(this.idLayer)&&a.removeLayer(this.idLayer)},h.dispose=function(){var a=this.subplot.map;a.getLayer(this.idLayer)&&a.removeLayer(this.idLayer),a.getSource(this.idSource)&&a.removeSource(this.idSource)},N.exports=function(a,n,r){var l=new v(a,n);return l.update(r),l}},23585:function(N,L,e){var T=e(71828),w=e(7901).defaultLine,i=e(27670).Y,_=e(41940),v=e(82196).textposition,h=e(30962).overrideAll,s=e(44467).templatedArray,t=e(77734),a=_({});a.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(N.exports=h({_arrayAttrRegexps:[T.counterRegex("mapbox",".layers",!0)],domain:i({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:w},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:w}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:a,textposition:T.extendFlat({},v,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(N,L,e){var T=e(71828),w=e(49119),i=e(85501),_=e(23585);function v(s,t,a,n){a("accesstoken",n.accessToken),a("style"),a("center.lon"),a("center.lat"),a("zoom"),a("bearing"),a("pitch");var r=a("bounds.west"),l=a("bounds.east"),o=a("bounds.south"),u=a("bounds.north");r!==void 0&&l!==void 0&&o!==void 0&&u!==void 0||delete t.bounds,i(s,t,{name:"layers",handleItemDefaults:h}),t._input=s}function h(s,t){function a(u,p){return T.coerce(s,t,_.layers,u,p)}if(a("visible")){var n,r=a("sourcetype"),l=r==="raster"||r==="image";a("source"),a("sourceattribution"),r==="vector"&&a("sourcelayer"),r==="image"&&a("coordinates"),l&&(n="raster");var o=a("type",n);l&&o!=="raster"&&(o=t.type="raster",T.log("Source types *raster* and *image* must drawn *raster* layer type.")),a("below"),a("color"),a("opacity"),a("minzoom"),a("maxzoom"),o==="circle"&&a("circle.radius"),o==="line"&&(a("line.width"),a("line.dash")),o==="fill"&&a("fill.outlinecolor"),o==="symbol"&&(a("symbol.icon"),a("symbol.iconsize"),a("symbol.text"),T.coerceFont(a,"symbol.textfont"),a("symbol.textposition"),a("symbol.placement"))}}N.exports=function(s,t,a){w(s,t,a,{type:"mapbox",attributes:_,handleDefaults:v,partition:"y",accessToken:t._mapboxAccessToken})}},10481:function(N,L,e){var T=e(97433),w=e(71828),i=e(41327),_=e(73972),v=e(89298),h=e(28569),s=e(30211),t=e(64505),a=t.drawMode,n=t.selectMode,r=e(47322).prepSelect,l=e(47322).clearOutline,o=e(47322).clearSelectionsCache,u=e(47322).selectOnClick,p=e(77734),c=e(67911);function b(k,f){this.id=f,this.gd=k;var S=k._fullLayout,M=k._context;this.container=S._glcontainer.node(),this.isStatic=M.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var g=b.prototype;g.plot=function(k,f,S){var M,E=this,O=f[E.id];E.map&&O.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),M=E.map?new Promise(function(P,I){E.updateMap(k,f,P,I)}):new Promise(function(P,I){E.createMap(k,f,P,I)}),S.push(M)},g.createMap=function(k,f,S,M){var E=this,O=f[E.id],P=E.styleObj=m(O.style,f);E.accessToken=O.accesstoken;var I=O.bounds,z=I?[[I.west,I.south],[I.east,I.north]]:null,U=E.map=new T.Map({container:E.div,style:P.style,center:y(O.center),zoom:O.zoom,bearing:O.bearing,pitch:O.pitch,maxBounds:z,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new T.AttributionControl({compact:!0}));U._canvas.style.left="0px",U._canvas.style.top="0px",E.rejectOnError(M),E.isStatic||E.initFx(k,f);var R=[];R.push(new Promise(function(j){U.once("load",j)})),R=R.concat(i.fetchTraceGeoData(k)),Promise.all(R).then(function(){E.fillBelowLookup(k,f),E.updateData(k),E.updateLayout(f),E.resolveOnRender(S)}).catch(M)},g.updateMap=function(k,f,S,M){var E=this,O=E.map,P=f[this.id];E.rejectOnError(M);var I=[],z=m(P.style,f);JSON.stringify(E.styleObj)!==JSON.stringify(z)&&(E.styleObj=z,O.setStyle(z.style),E.traceHash={},I.push(new Promise(function(U){O.once("styledata",U)}))),I=I.concat(i.fetchTraceGeoData(k)),Promise.all(I).then(function(){E.fillBelowLookup(k,f),E.updateData(k),E.updateLayout(f),E.resolveOnRender(S)}).catch(M)},g.fillBelowLookup=function(k,f){var S,M,E=f[this.id].layers,O=this.belowLookup={},P=!1;for(S=0;S<k.length;S++){var I=k[S][0].trace,z=I._module;typeof I.below=="string"?M=I.below:z.getBelow&&(M=z.getBelow(I,this)),M===""&&(P=!0),O["trace-"+I.uid]=M||""}for(S=0;S<E.length;S++){var U=E[S];M=typeof U.below=="string"?U.below:P?"traces":"",O["layout-"+S]=M}var R,j,Z={};for(R in O)Z[M=O[R]]?Z[M].push(R):Z[M]=[R];for(M in Z){var F=Z[M];if(F.length>1)for(S=0;S<F.length;S++)(R=F[S]).indexOf("trace-")===0?(j=R.split("trace-")[1],this.traceHash[j]&&(this.traceHash[j].below=null)):R.indexOf("layout-")===0&&(j=R.split("layout-")[1],this.layerList[j]&&(this.layerList[j].below=null))}};var d={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function m(k,f){var S={};if(w.isPlainObject(k))S.id=k.id,S.style=k;else if(typeof k=="string")if(S.id=k,p.styleValuesMapbox.indexOf(k)!==-1)S.style=x(k);else if(p.stylesNonMapbox[k]){S.style=p.stylesNonMapbox[k];var M=S.style.sources["plotly-"+k],E=M?M.tiles:void 0;E&&E[0]&&E[0].slice(-9)==="?api_key="&&(E[0]+=f._mapboxAccessToken)}else S.style=k;else S.id=p.styleValueDflt,S.style=x(p.styleValueDflt);return S.transition={duration:0,delay:0},S}function x(k){return p.styleUrlPrefix+k+"-"+p.styleUrlSuffix}function y(k){return[k.lon,k.lat]}g.updateData=function(k){var f,S,M,E,O=this.traceHash,P=k.slice().sort(function(j,Z){return d[j[0].trace.type]-d[Z[0].trace.type]});for(M=0;M<P.length;M++){var I=P[M],z=!1;(f=O[(S=I[0].trace).uid])&&(f.type===S.type?(f.update(I),z=!0):f.dispose()),!z&&S._module&&(O[S.uid]=S._module.plot(this,I))}var U=Object.keys(O);e:for(M=0;M<U.length;M++){var R=U[M];for(E=0;E<k.length;E++)if(R===(S=k[E][0].trace).uid)continue e;(f=O[R]).dispose(),delete O[R]}},g.updateLayout=function(k){var f=this.map,S=k[this.id];this.dragging||this.wheeling||(f.setCenter(y(S.center)),f.setZoom(S.zoom),f.setBearing(S.bearing),f.setPitch(S.pitch)),this.updateLayers(k),this.updateFramework(k),this.updateFx(k),this.map.resize(),this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()},g.resolveOnRender=function(k){var f=this.map;f.on("render",function S(){f.loaded()&&(f.off("render",S),setTimeout(k,10))})},g.rejectOnError=function(k){var f=this.map;function S(){k(new Error(p.mapOnErrorMsg))}f.once("error",S),f.once("style.error",S),f.once("source.error",S),f.once("tile.error",S),f.once("layer.error",S)},g.createFramework=function(k){var f=this,S=f.div=document.createElement("div");S.id=f.uid,S.style.position="absolute",f.container.appendChild(S),f.xaxis={_id:"x",c2p:function(M){return f.project(M).x}},f.yaxis={_id:"y",c2p:function(M){return f.project(M).y}},f.updateFramework(k),f.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},v.setConvert(f.mockAxis,k)},g.initFx=function(k,f){var S=this,M=S.gd,E=S.map;function O(){s.loneUnhover(f._hoverlayer)}function P(){var I=S.getView();M.emit("plotly_relayouting",S.getViewEditsWithDerived(I))}E.on("moveend",function(I){if(S.map){var z=M._fullLayout;if(I.originalEvent||S.wheeling){var U=z[S.id];_.call("_storeDirectGUIEdit",M.layout,z._preGUI,S.getViewEdits(U));var R=S.getView();U._input.center=U.center=R.center,U._input.zoom=U.zoom=R.zoom,U._input.bearing=U.bearing=R.bearing,U._input.pitch=U.pitch=R.pitch,M.emit("plotly_relayout",S.getViewEditsWithDerived(R))}I.originalEvent&&I.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),z._rehover&&z._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(I){var z=S.div.getBoundingClientRect(),U=[I.originalEvent.offsetX,I.originalEvent.offsetY];I.target.getBoundingClientRect=function(){return z},S.xaxis.p2c=function(){return E.unproject(U).lng},S.yaxis.p2c=function(){return E.unproject(U).lat},M._fullLayout._rehover=function(){M._fullLayout._hoversubplot===S.id&&M._fullLayout[S.id]&&s.hover(M,I,S.id)},s.hover(M,I,S.id),M._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,O()}),E.on("zoomstart",O),E.on("mouseout",function(){M._fullLayout._hoversubplot=null}),E.on("drag",P),E.on("zoom",P),E.on("dblclick",function(){var I=M._fullLayout[S.id];_.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,S.getViewEdits(I));var z=S.viewInitial;E.setCenter(y(z.center)),E.setZoom(z.zoom),E.setBearing(z.bearing),E.setPitch(z.pitch);var U=S.getView();I._input.center=I.center=U.center,I._input.zoom=I.zoom=U.zoom,I._input.bearing=I.bearing=U.bearing,I._input.pitch=I.pitch=U.pitch,M.emit("plotly_doubleclick",null),M.emit("plotly_relayout",S.getViewEditsWithDerived(U))}),S.clearOutline=function(){o(S.dragOptions),l(S.dragOptions.gd)},S.onClickInPanFn=function(I){return function(z){var U=M._fullLayout.clickmode;U.indexOf("select")>-1&&u(z.originalEvent,M,[S.xaxis],[S.yaxis],S.id,I),U.indexOf("event")>-1&&s.click(M,z.originalEvent)}}},g.updateFx=function(k){var f=this,S=f.map,M=f.gd;if(!f.isStatic){var E,O=k.dragmode;E=function(z,U){U.isRect?(z.range={})[f.id]=[I([U.xmin,U.ymin]),I([U.xmax,U.ymax])]:(z.lassoPoints={})[f.id]=U.map(I)};var P=f.dragOptions;f.dragOptions=w.extendDeep(P||{},{dragmode:k.dragmode,element:f.div,gd:M,plotinfo:{id:f.id,domain:k[f.id].domain,xaxis:f.xaxis,yaxis:f.yaxis,fillRangeItems:E},xaxes:[f.xaxis],yaxes:[f.yaxis],subplot:f.id}),S.off("click",f.onClickInPanHandler),n(O)||a(O)?(S.dragPan.disable(),S.on("zoomstart",f.clearOutline),f.dragOptions.prepFn=function(z,U,R){r(z,U,R,f.dragOptions,O)},h.init(f.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",f.clearOutline),f.div.onmousedown=null,f.div.ontouchstart=null,f.div.removeEventListener("touchstart",f.div._ontouchstart),f.onClickInPanHandler=f.onClickInPanFn(f.dragOptions),S.on("click",f.onClickInPanHandler))}function I(z){var U=f.map.unproject(z);return[U.lng,U.lat]}},g.updateFramework=function(k){var f=k[this.id].domain,S=k._size,M=this.div.style;M.width=S.w*(f.x[1]-f.x[0])+"px",M.height=S.h*(f.y[1]-f.y[0])+"px",M.left=S.l+f.x[0]*S.w+"px",M.top=S.t+(1-f.y[1])*S.h+"px",this.xaxis._offset=S.l+f.x[0]*S.w,this.xaxis._length=S.w*(f.x[1]-f.x[0]),this.yaxis._offset=S.t+(1-f.y[1])*S.h,this.yaxis._length=S.h*(f.y[1]-f.y[0])},g.updateLayers=function(k){var f,S=k[this.id].layers,M=this.layerList;if(S.length!==M.length){for(f=0;f<M.length;f++)M[f].dispose();for(M=this.layerList=[],f=0;f<S.length;f++)M.push(c(this,f,S[f]))}else for(f=0;f<S.length;f++)M[f].update(S[f])},g.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},g.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},g.setOptions=function(k,f,S){for(var M in S)this.map[f](k,M,S[M])},g.getMapLayers=function(){return this.map.getStyle().layers},g.addLayer=function(k,f){var S=this.map;if(typeof f=="string"){if(f==="")return void S.addLayer(k,f);for(var M=this.getMapLayers(),E=0;E<M.length;E++)if(f===M[E].id)return void S.addLayer(k,f);w.warn(["Trying to add layer with *below* value",f,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(k)},g.project=function(k){return this.map.project(new T.LngLat(k[0],k[1]))},g.getView=function(){var k=this.map,f=k.getCenter(),S={lon:f.lng,lat:f.lat},M=k.getCanvas(),E=parseInt(M.style.width),O=parseInt(M.style.height);return{center:S,zoom:k.getZoom(),bearing:k.getBearing(),pitch:k.getPitch(),_derived:{coordinates:[k.unproject([0,0]).toArray(),k.unproject([E,0]).toArray(),k.unproject([E,O]).toArray(),k.unproject([0,O]).toArray()]}}},g.getViewEdits=function(k){for(var f=this.id,S=["center","zoom","bearing","pitch"],M={},E=0;E<S.length;E++){var O=S[E];M[f+"."+O]=k[O]}return M},g.getViewEditsWithDerived=function(k){var f=this.id,S=this.getViewEdits(k);return S[f+"._derived"]=k._derived,S},N.exports=b},35025:function(N){N.exports=function(L){var e=L.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},74875:function(N,L,e){var T=e(39898),w=e(84096).Dq,i=e(60721).FF,_=e(92770),v=e(11631),h=e(73972),s=e(86281),t=e(44467),a=e(71828),n=e(7901),r=e(50606).BADNUM,l=e(41675),o=e(51873).clearOutline,u=e(21479),p=e(85594),c=e(31391),b=e(27659).a0,g=a.relinkPrivateKeys,d=a._,m=N.exports={};a.extendFlat(m,h),m.attributes=e(9012),m.attributes.type.values=m.allTypes,m.fontAttrs=e(41940),m.layoutAttributes=e(10820),m.fontWeight="normal";var x=m.transformsRegistry,y=e(31137);m.executeAPICommand=y.executeAPICommand,m.computeAPICommandBindings=y.computeAPICommandBindings,m.manageCommandObserver=y.manageCommandObserver,m.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,m.redrawText=function(F){return F=a.getGraphDiv(F),new Promise(function(V){setTimeout(function(){F._fullLayout&&(h.getComponentMethod("annotations","draw")(F),h.getComponentMethod("legend","draw")(F),h.getComponentMethod("colorbar","draw")(F),V(m.previousPromises(F)))},300)})},m.resize=function(F){var V;F=a.getGraphDiv(F);var H=new Promise(function(te,$){F&&!a.isHidden(F)||$(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(V=F._resolveResize),F._resolveResize=te,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||a.isHidden(F))te(F);else{delete F.layout.width,delete F.layout.height;var J=F.changed;F.autoplay=!0,h.call("relayout",F,{autosize:!0}).then(function(){F.changed=J,F._resolveResize===te&&(delete F._resolveResize,te(F))})}},100)});return V&&V(H),H},m.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},m.addLinks=function(F){if(F._context.showLink||F._context.showSources){var V=F._fullLayout,H=a.ensureSingle(V._paper,"text","js-plot-link-container",function(ee){ee.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var ie=T.select(this);ie.append("tspan").classed("js-link-to-tool",!0),ie.append("tspan").classed("js-link-spacer",!0),ie.append("tspan").classed("js-sourcelinks",!0)})}),te=H.node(),$={y:V._paper.attr("height")-9};document.body.contains(te)&&te.getComputedTextLength()>=V.width-20?($["text-anchor"]="start",$.x=5):($["text-anchor"]="end",$.x=V._paper.attr("width")-7),H.attr($);var J=H.select(".js-link-to-tool"),X=H.select(".js-link-spacer"),K=H.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function(ee,ie){ie.text("");var ae=ie.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(ee._context.linkText+" "+String.fromCharCode(187));if(ee._context.sendData)ae.on("click",function(){m.sendDataToCloud(ee)});else{var oe=window.location.pathname.split("/"),fe=window.location.search;ae.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+oe[2].split(".")[0]+"/"+oe[1]+fe})}}(F,J),X.text(J.text()&&K.text()?" - ":"")}},m.sendDataToCloud=function(F){var V=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(V){F.emit("plotly_beforeexport");var H=T.select(F).append("div").attr("id","hiddenform").style("display","none"),te=H.append("form").attr({action:V+"/external",method:"post",target:"_blank"});return te.append("input").attr({type:"text",name:"data"}).node().value=m.graphJson(F,!1,"keepdata"),te.node().submit(),H.remove(),F.emit("plotly_afterexport"),!1}};var k=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],f=["year","month","dayMonth","dayMonthYear"];function S(F,V){var H=F._context.locale;H||(H="en-US");var te=!1,$={};function J(oe){for(var fe=!0,ge=0;ge<V.length;ge++){var ve=V[ge];$[ve]||(oe[ve]?$[ve]=oe[ve]:fe=!1)}fe&&(te=!0)}for(var X=0;X<2;X++){for(var K=F._context.locales,ee=0;ee<2;ee++){var ie=(K[H]||{}).format;if(ie&&(J(ie),te))break;K=h.localeRegistry}var ae=H.split("-")[0];if(te||ae===H)break;H=ae}return te||J(h.localeRegistry.en.format),$}function M(F,V){var H={_fullLayout:V},te=F._id.charAt(0)==="x",$=F._mainAxis._anchorAxis,J="",X="",K="";if($&&(K=$._mainAxis._id,J=te?F._id+K:K+F._id),!J||!V._plots[J]){J="";for(var ee=F._counterAxes,ie=0;ie<ee.length;ie++){var ae=ee[ie],oe=te?F._id+ae:ae+F._id;X||(X=oe);var fe=l.getFromId(H,ae);if(K&&fe.overlaying===K){J=oe;break}}}return J||X}function E(F){var V=F.transforms;if(Array.isArray(V)&&V.length)for(var H=0;H<V.length;H++){var te=V[H],$=te._module||x[te.type];if($&&$.makesData)return!0}return!1}function O(F,V,H,te){for(var $=F.transforms,J=[F],X=0;X<$.length;X++){var K=$[X],ee=x[K.type];ee&&ee.transform&&(J=ee.transform(J,{transform:K,fullTrace:F,fullData:V,layout:H,fullLayout:te,transformIndex:X}))}return J}function P(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}function I(F){var V=F.margin;if(!F._size){var H=F._size={l:Math.round(V.l),r:Math.round(V.r),t:Math.round(V.t),b:Math.round(V.b),p:Math.round(V.pad)};H.w=Math.round(F.width)-H.l-H.r,H.h=Math.round(F.height)-H.t-H.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={}),F._reservedMargin||(F._reservedMargin={})}m.supplyDefaults=function(F,V){var H=V&&V.skipUpdateCalc,te=F._fullLayout||{};if(te._skipDefaults)delete te._skipDefaults;else{var $,J=F._fullLayout={},X=F.layout||{},K=F._fullData||[],ee=F._fullData=[],ie=F.data||[],ae=F.calcdata||[],oe=F._context||{};F._transitionData||m.createTransitionData(F),J._dfltTitle={plot:d(F,"Click to enter Plot title"),x:d(F,"Click to enter X axis title"),y:d(F,"Click to enter Y axis title"),colorbar:d(F,"Click to enter Colorscale title"),annotation:d(F,"new text")},J._traceWord=d(F,"trace");var fe=S(F,k);if(J._mapboxAccessToken=oe.mapboxAccessToken,te._initialAutoSizeIsDone){var ge=te.width,ve=te.height;m.supplyLayoutGlobalDefaults(X,J,fe),X.width||(J.width=ge),X.height||(J.height=ve),m.sanitizeMargins(J)}else{m.supplyLayoutGlobalDefaults(X,J,fe);var xe=!X.width||!X.height,_e=J.autosize,ye=oe.autosizable;xe&&(_e||ye)?m.plotAutoSize(F,X,J):xe&&m.sanitizeMargins(J),!_e&&xe&&(X.width=J.width,X.height=J.height)}J._d3locale=function(Be,Ye){return Be.decimal=Ye.charAt(0),Be.thousands=Ye.charAt(1),{numberFormat:function(We){try{We=i(Be).format(a.adjustFormat(We))}catch{return a.warnBadFormat(We),a.noFormat}return We},timeFormat:w(Be).utcFormat}}(fe,J.separators),J._extraFormat=S(F,f),J._initialAutoSizeIsDone=!0,J._dataLength=ie.length,J._modules=[],J._visibleModules=[],J._basePlotModules=[];var Ce=J._subplots=function(){var Be,Ye,We=h.collectableSubplotTypes,et={};if(!We){We=[];var ft=h.subplotsRegistry;for(var ht in ft){var mt=ft[ht].attr;if(mt&&(We.push(ht),Array.isArray(mt)))for(Ye=0;Ye<mt.length;Ye++)a.pushUnique(We,mt[Ye])}}for(Be=0;Be<We.length;Be++)et[We[Be]]=[];return et}(),ke=J._splomAxes={x:{},y:{}},Te=J._splomSubplots={};J._splomGridDflt={},J._scatterStackOpts={},J._firstScatter={},J._alignmentOpts={},J._colorAxes={},J._requestRangeslider={},J._traceUids=function(Be,Ye){var We,et,ft=Ye.length,ht=[];for(We=0;We<Be.length;We++){var mt=Be[We]._fullInput;mt!==et&&ht.push(mt),et=mt}var Mt=ht.length,_t=new Array(ft),it={};function st(Ft,Pt){_t[Pt]=Ft,it[Ft]=1}function St(Ft,Pt){if(Ft&&typeof Ft=="string"&&!it[Ft])return st(Ft,Pt),!0}for(We=0;We<ft;We++){var zt=Ye[We].uid;typeof zt=="number"&&(zt=String(zt)),St(zt,We)||We<Mt&&St(ht[We].uid,We)||st(a.randstr(it),We)}return _t}(K,ie),J._globalTransforms=(F._context||{}).globalTransforms,m.supplyDataDefaults(ie,ee,X,J);var le=Object.keys(ke.x),ue=Object.keys(ke.y);if(le.length>1&&ue.length>1){for(h.getComponentMethod("grid","sizeDefaults")(X,J),$=0;$<le.length;$++)a.pushUnique(Ce.xaxis,le[$]);for($=0;$<ue.length;$++)a.pushUnique(Ce.yaxis,ue[$]);for(var de in Te)a.pushUnique(Ce.cartesian,de)}if(J._has=m._hasPlotType.bind(J),K.length===ee.length)for($=0;$<ee.length;$++)g(ee[$],K[$]);m.supplyLayoutModuleDefaults(X,J,ee,F._transitionData);var Le=J._visibleModules,we=[];for($=0;$<Le.length;$++){var Ee=Le[$].crossTraceDefaults;Ee&&a.pushUnique(we,Ee)}for($=0;$<we.length;$++)we[$](ee,J);J._hasOnlyLargeSploms=J._basePlotModules.length===1&&J._basePlotModules[0].name==="splom"&&le.length>15&&ue.length>15&&J.shapes.length===0&&J.images.length===0,m.linkSubplots(ee,J,K,te),m.cleanPlot(ee,J,K,te);var Oe=!(!te._has||!te._has("gl2d")),Fe=!(!J._has||!J._has("gl2d")),pe=!(!te._has||!te._has("cartesian"))||Oe,be=!(!J._has||!J._has("cartesian"))||Fe;pe&&!be?te._bgLayer.remove():be&&!pe&&(J._shouldCreateBgLayer=!0),te._zoomlayer&&!F._dragging&&o({_fullLayout:te}),function(Be,Ye){var We,et=[];Ye.meta&&(We=Ye._meta={meta:Ye.meta,layout:{meta:Ye.meta}});for(var ft=0;ft<Be.length;ft++){var ht=Be[ft];ht.meta?et[ht.index]=ht._meta={meta:ht.meta}:Ye.meta&&(ht._meta={meta:Ye.meta}),Ye.meta&&(ht._meta.layout={meta:Ye.meta})}et.length&&(We||(We=Ye._meta={}),We.data=et)}(ee,J),g(J,te),h.getComponentMethod("colorscale","crossTraceDefaults")(ee,J),J._preGUI||(J._preGUI={}),J._tracePreGUI||(J._tracePreGUI={});var Me,De=J._tracePreGUI,Ne={};for(Me in De)Ne[Me]="old";for($=0;$<ee.length;$++)Ne[Me=ee[$]._fullInput.uid]||(De[Me]={}),Ne[Me]="new";for(Me in Ne)Ne[Me]==="old"&&delete De[Me];I(J),h.getComponentMethod("rangeslider","makeData")(J),H||ae.length!==ee.length||m.supplyDefaultsUpdateCalc(ae,ee)}},m.supplyDefaultsUpdateCalc=function(F,V){for(var H=0;H<V.length;H++){var te=V[H],$=(F[H]||[])[0];if($&&$.trace){var J=$.trace;if(J._hasCalcTransform){var X,K,ee,ie=J._arrayAttrs;for(X=0;X<ie.length;X++)K=ie[X],ee=a.nestedProperty(J,K).get().slice(),a.nestedProperty(te,K).set(ee)}$.trace=te}}},m.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},m._hasPlotType=function(F){var V,H=this._basePlotModules||[];for(V=0;V<H.length;V++)if(H[V].name===F)return!0;var te=this._modules||[];for(V=0;V<te.length;V++){var $=te[V].name;if($===F)return!0;var J=h.modules[$];if(J&&J.categories[F])return!0}return!1},m.cleanPlot=function(F,V,H,te){var $,J,X=te._basePlotModules||[];for($=0;$<X.length;$++){var K=X[$];K.clean&&K.clean(F,V,H,te)}var ee=te._has&&te._has("gl"),ie=V._has&&V._has("gl");ee&&!ie&&te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.selectAll(".no-webgl").remove(),te._glcanvas=null);var ae=!!te._infolayer;e:for($=0;$<H.length;$++){var oe=H[$].uid;for(J=0;J<F.length;J++)if(oe===F[J].uid)continue e;ae&&te._infolayer.select(".cb"+oe).remove()}},m.linkSubplots=function(F,V,H,te){var $,J,X=te._plots||{},K=V._plots={},ee=V._subplots,ie={_fullData:F,_fullLayout:V},ae=ee.cartesian.concat(ee.gl2d||[]);for($=0;$<ae.length;$++){var oe,fe=ae[$],ge=X[fe],ve=l.getFromId(ie,fe,"x"),xe=l.getFromId(ie,fe,"y");for(ge?oe=K[fe]=ge:(oe=K[fe]={}).id=fe,ve._counterAxes.push(xe._id),xe._counterAxes.push(ve._id),ve._subplotsWith.push(fe),xe._subplotsWith.push(fe),oe.xaxis=ve,oe.yaxis=xe,oe._hasClipOnAxisFalse=!1,J=0;J<F.length;J++){var _e=F[J];if(_e.xaxis===oe.xaxis._id&&_e.yaxis===oe.yaxis._id&&_e.cliponaxis===!1){oe._hasClipOnAxisFalse=!0;break}}}var ye,Ce=l.list(ie,null,!0);for($=0;$<Ce.length;$++){var ke=null;(ye=Ce[$]).overlaying&&(ke=l.getFromId(ie,ye.overlaying))&&ke.overlaying&&(ye.overlaying=!1,ke=null),ye._mainAxis=ke||ye,ke&&(ye.domain=ke.domain.slice()),ye._anchorAxis=ye.anchor==="free"?null:l.getFromId(ie,ye.anchor)}for($=0;$<Ce.length;$++)if((ye=Ce[$])._counterAxes.sort(l.idSort),ye._subplotsWith.sort(a.subplotSort),ye._mainSubplot=M(ye,V),ye._counterAxes.length&&(ye.spikemode&&ye.spikemode.indexOf("across")!==-1||ye.automargin&&ye.mirror&&ye.anchor!=="free"||h.getComponentMethod("rangeslider","isVisible")(ye))){var Te=1,le=0;for(J=0;J<ye._counterAxes.length;J++){var ue=l.getFromId(ie,ye._counterAxes[J]);Te=Math.min(Te,ue.domain[0]),le=Math.max(le,ue.domain[1])}Te<le&&(ye._counterDomainMin=Te,ye._counterDomainMax=le)}},m.clearExpandedTraceDefaultColors=function(F){var V,H,te;for(H=[],(V=F._module._colorAttrs)||(F._module._colorAttrs=V=[],s.crawl(F._module.attributes,function($,J,X,K){H[K]=J,H.length=K+1,$.valType==="color"&&$.dflt===void 0&&V.push(H.join("."))})),te=0;te<V.length;te++)a.nestedProperty(F,"_input."+V[te]).get()||a.nestedProperty(F,V[te]).set(null)},m.supplyDataDefaults=function(F,V,H,te){var $,J,X,K=te._modules,ee=te._visibleModules,ie=te._basePlotModules,ae=0,oe=0;function fe(de){V.push(de);var Le=de._module;Le&&(a.pushUnique(K,Le),de.visible===!0&&a.pushUnique(ee,Le),a.pushUnique(ie,de._module.basePlotModule),ae++,de._input.visible!==!1&&oe++)}te._transformModules=[];var ge={},ve=[],xe=(H.template||{}).data||{},_e=t.traceTemplater(xe);for($=0;$<F.length;$++){if(X=F[$],(J=_e.newTrace(X)).uid=te._traceUids[$],m.supplyTraceDefaults(X,J,oe,te,$),J.index=$,J._input=X,J._expandedIndex=ae,J.transforms&&J.transforms.length)for(var ye=X.visible!==!1&&J.visible===!1,Ce=O(J,V,H,te),ke=0;ke<Ce.length;ke++){var Te=Ce[ke],le={_template:J._template,type:J.type,uid:J.uid+ke};ye&&Te.visible===!1&&delete Te.visible,m.supplyTraceDefaults(Te,le,ae,te,$),g(le,Te),le.index=$,le._input=X,le._fullInput=J,le._expandedIndex=ae,le._expandedInput=Te,fe(le)}else J._fullInput=J,J._expandedInput=J,fe(J);h.traceIs(J,"carpetAxis")&&(ge[J.carpet]=J),h.traceIs(J,"carpetDependent")&&ve.push($)}for($=0;$<ve.length;$++)if((J=V[ve[$]]).visible){var ue=ge[J.carpet];J._carpet=ue,ue&&ue.visible?(J.xaxis=ue.xaxis,J.yaxis=ue.yaxis):J.visible=!1}},m.supplyAnimationDefaults=function(F){var V;F=F||{};var H={};function te($,J){return a.coerce(F||{},H,p,$,J)}if(te("mode"),te("direction"),te("fromcurrent"),Array.isArray(F.frame))for(H.frame=[],V=0;V<F.frame.length;V++)H.frame[V]=m.supplyAnimationFrameDefaults(F.frame[V]||{});else H.frame=m.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(H.transition=[],V=0;V<F.transition.length;V++)H.transition[V]=m.supplyAnimationTransitionDefaults(F.transition[V]||{});else H.transition=m.supplyAnimationTransitionDefaults(F.transition||{});return H},m.supplyAnimationFrameDefaults=function(F){var V={};function H(te,$){return a.coerce(F||{},V,p.frame,te,$)}return H("duration"),H("redraw"),V},m.supplyAnimationTransitionDefaults=function(F){var V={};function H(te,$){return a.coerce(F||{},V,p.transition,te,$)}return H("duration"),H("easing"),V},m.supplyFrameDefaults=function(F){var V={};function H(te,$){return a.coerce(F,V,c,te,$)}return H("group"),H("name"),H("traces"),H("baseframe"),H("data"),H("layout"),V},m.supplyTraceDefaults=function(F,V,H,te,$){var J,X=te.colorway||n.defaults,K=X[H%X.length];function ee(ke,Te){return a.coerce(F,V,m.attributes,ke,Te)}var ie=ee("visible");ee("type"),ee("name",te._traceWord+" "+$),ee("uirevision",te.uirevision);var ae=m.getModule(V);if(V._module=ae,ae){var oe=ae.basePlotModule,fe=oe.attr,ge=oe.attributes;if(fe&&ge){var ve=te._subplots,xe="";if(ie||oe.name!=="gl2d"){if(Array.isArray(fe))for(J=0;J<fe.length;J++){var _e=fe[J],ye=a.coerce(F,V,ge,_e);ve[_e]&&a.pushUnique(ve[_e],ye),xe+=ye}else xe=a.coerce(F,V,ge,fe);ve[oe.name]&&a.pushUnique(ve[oe.name],xe)}}}if(ie){if(ee("customdata"),ee("ids"),ee("meta"),h.traceIs(V,"showLegend")?(a.coerce(F,V,ae.attributes.showlegend?ae.attributes:m.attributes,"showlegend"),ee("legend"),ee("legendwidth"),ee("legendgroup"),ee("legendgrouptitle.text"),ee("legendrank"),V._dfltShowLegend=!0):V._dfltShowLegend=!1,ae&&ae.supplyDefaults(F,V,K,te),h.traceIs(V,"noOpacity")||ee("opacity"),h.traceIs(V,"notLegendIsolatable")&&(V.visible=!!V.visible),h.traceIs(V,"noHover")||(V.hovertemplate||a.coerceHoverinfo(F,V,te),V.type!=="parcats"&&h.getComponentMethod("fx","supplyDefaults")(F,V,K,te)),ae&&ae.selectPoints){var Ce=ee("selectedpoints");a.isTypedArray(Ce)&&(V.selectedpoints=Array.from(Ce))}m.supplyTransformDefaults(F,V,te)}return V},m.hasMakesDataTransform=E,m.supplyTransformDefaults=function(F,V,H){if(V._length||E(F)){var te=H._globalTransforms||[],$=H._transformModules||[];if(Array.isArray(F.transforms)||te.length!==0)for(var J=F.transforms||[],X=te.concat(J),K=V.transforms=[],ee=0;ee<X.length;ee++){var ie,ae=X[ee],oe=ae.type,fe=x[oe],ge=!(ae._module&&ae._module===fe),ve=fe&&typeof fe.transform=="function";fe||a.warn("Unrecognized transform type "+oe+"."),fe&&fe.supplyDefaults&&(ge||ve)?((ie=fe.supplyDefaults(ae,V,H,F)).type=oe,ie._module=fe,a.pushUnique($,fe)):ie=a.extendFlat({},ae),K.push(ie)}}},m.supplyLayoutGlobalDefaults=function(F,V,H){function te(ae,oe){return a.coerce(F,V,m.layoutAttributes,ae,oe)}var $=F.template;a.isPlainObject($)&&(V.template=$,V._template=$.layout,V._dataTemplate=$.data),te("autotypenumbers");var J=a.coerceFont(te,"font"),X=J.size;a.coerceFont(te,"title.font",a.extendFlat({},J,{size:Math.round(1.4*X)})),te("title.text",V._dfltTitle.plot),te("title.xref");var K=te("title.yref");te("title.pad.t"),te("title.pad.r"),te("title.pad.b"),te("title.pad.l");var ee=te("title.automargin");te("title.x"),te("title.xanchor"),te("title.y"),te("title.yanchor"),ee&&(K==="paper"&&(V.title.y!==0&&(V.title.y=1),V.title.yanchor==="auto"&&(V.title.yanchor=V.title.y===0?"top":"bottom")),K==="container"&&(V.title.y==="auto"&&(V.title.y=1),V.title.yanchor==="auto"&&(V.title.yanchor=V.title.y<.5?"bottom":"top"))),te("uniformtext.mode")&&te("uniformtext.minsize"),te("autosize",!(F.width&&F.height)),te("width"),te("height"),te("minreducedwidth"),te("minreducedheight"),te("margin.l"),te("margin.r"),te("margin.t"),te("margin.b"),te("margin.pad"),te("margin.autoexpand"),F.width&&F.height&&m.sanitizeMargins(V),h.getComponentMethod("grid","sizeDefaults")(F,V),te("paper_bgcolor"),te("separators",H.decimal+H.thousands),te("hidesources"),te("colorway"),te("datarevision");var ie=te("uirevision");te("editrevision",ie),te("selectionrevision",ie),h.getComponentMethod("modebar","supplyLayoutDefaults")(F,V),h.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,V,te),h.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,V,te),te("meta"),a.isPlainObject(F.transition)&&(te("transition.duration"),te("transition.easing"),te("transition.ordering")),h.getComponentMethod("calendars","handleDefaults")(F,V,"calendar"),h.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,V,te),a.coerce(F,V,u,"scattermode")},m.plotAutoSize=function(F,V,H){var te,$,J=F._context||{},X=J.frameMargins,K=a.isPlotDiv(F);if(K&&F.emit("plotly_autosize"),J.fillFrame)te=window.innerWidth,$=window.innerHeight,document.body.style.overflow="hidden";else{var ee=K?window.getComputedStyle(F):{};if(te=P(ee.width)||P(ee.maxWidth)||H.width,$=P(ee.height)||P(ee.maxHeight)||H.height,_(X)&&X>0){var ie=1-2*X;te=Math.round(ie*te),$=Math.round(ie*$)}}var ae=m.layoutAttributes.width.min,oe=m.layoutAttributes.height.min;te<ae&&(te=ae),$<oe&&($=oe);var fe=!V.width&&Math.abs(H.width-te)>1,ge=!V.height&&Math.abs(H.height-$)>1;(ge||fe)&&(fe&&(H.width=te),ge&&(H.height=$)),F._initialAutoSize||(F._initialAutoSize={width:te,height:$}),m.sanitizeMargins(H)},m.supplyLayoutModuleDefaults=function(F,V,H,te){var $,J,X,K=h.componentsRegistry,ee=V._basePlotModules,ie=h.subplotsRegistry.cartesian;for($ in K)(X=K[$]).includeBasePlot&&X.includeBasePlot(F,V);for(var ae in ee.length||ee.push(ie),V._has("cartesian")&&(h.getComponentMethod("grid","contentDefaults")(F,V),ie.finalizeSubplots(F,V)),V._subplots)V._subplots[ae].sort(a.subplotSort);for(J=0;J<ee.length;J++)(X=ee[J]).supplyLayoutDefaults&&X.supplyLayoutDefaults(F,V,H);var oe=V._modules;for(J=0;J<oe.length;J++)(X=oe[J]).supplyLayoutDefaults&&X.supplyLayoutDefaults(F,V,H);var fe=V._transformModules;for(J=0;J<fe.length;J++)(X=fe[J]).supplyLayoutDefaults&&X.supplyLayoutDefaults(F,V,H,te);for($ in K)(X=K[$]).supplyLayoutDefaults&&X.supplyLayoutDefaults(F,V,H)},m.purge=function(F){var V=F._fullLayout||{};V._glcontainer!==void 0&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.remove(),V._glcanvas=null),V._modeBar&&V._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),a.clearThrottle(),a.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},m.style=function(F){var V,H=F._fullLayout._visibleModules,te=[];for(V=0;V<H.length;V++){var $=H[V];$.style&&a.pushUnique(te,$.style)}for(V=0;V<te.length;V++)te[V](F)},m.sanitizeMargins=function(F){if(F&&F.margin){var V,H=F.width,te=F.height,$=F.margin,J=H-($.l+$.r),X=te-($.t+$.b);J<0&&(V=(H-1)/($.l+$.r),$.l=Math.floor(V*$.l),$.r=Math.floor(V*$.r)),X<0&&(V=(te-1)/($.t+$.b),$.t=Math.floor(V*$.t),$.b=Math.floor(V*$.b))}},m.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},m.allowAutoMargin=function(F,V){F._fullLayout._pushmarginIds[V]=1},m.autoMargin=function(F,V,H){var te=F._fullLayout,$=te.width,J=te.height,X=te.margin,K=te.minreducedwidth,ee=te.minreducedheight,ie=a.constrain($-X.l-X.r,2,K),ae=a.constrain(J-X.t-X.b,2,ee),oe=Math.max(0,$-ie),fe=Math.max(0,J-ae),ge=te._pushmargin,ve=te._pushmarginIds;if(X.autoexpand!==!1){if(H){var xe=H.pad;if(xe===void 0&&(xe=Math.min(12,X.l,X.r,X.t,X.b)),oe){var _e=(H.l+H.r)/oe;_e>1&&(H.l/=_e,H.r/=_e)}if(fe){var ye=(H.t+H.b)/fe;ye>1&&(H.t/=ye,H.b/=ye)}var Ce=H.xl!==void 0?H.xl:H.x,ke=H.xr!==void 0?H.xr:H.x,Te=H.yt!==void 0?H.yt:H.y,le=H.yb!==void 0?H.yb:H.y;ge[V]={l:{val:Ce,size:H.l+xe},r:{val:ke,size:H.r+xe},b:{val:le,size:H.b+xe},t:{val:Te,size:H.t+xe}},ve[V]=1}else delete ge[V],delete ve[V];if(!te._replotting)return m.doAutoMargin(F)}},m.doAutoMargin=function(F){var V=F._fullLayout,H=V.width,te=V.height;V._size||(V._size={}),I(V);var $=V._size,J=V.margin,X={t:0,b:0,l:0,r:0},K=a.extendFlat({},$),ee=J.l,ie=J.r,ae=J.t,oe=J.b,fe=V._pushmargin,ge=V._pushmarginIds,ve=V.minreducedwidth,xe=V.minreducedheight;if(J.autoexpand!==!1){for(var _e in fe)ge[_e]||delete fe[_e];var ye=F._fullLayout._reservedMargin;for(var Ce in ye)for(var ke in ye[Ce]){var Te=ye[Ce][ke];X[ke]=Math.max(X[ke],Te)}for(var le in fe.base={l:{val:0,size:ee},r:{val:1,size:ie},t:{val:1,size:ae},b:{val:0,size:oe}},X){var ue=0;for(var de in fe)de!=="base"&&_(fe[de][le].size)&&(ue=fe[de][le].size>ue?fe[de][le].size:ue);var Le=Math.max(0,J[le]-ue);X[le]=Math.max(0,X[le]-Le)}for(var we in fe){var Ee=fe[we].l||{},Oe=fe[we].b||{},Fe=Ee.val,pe=Ee.size,be=Oe.val,Me=Oe.size,De=H-X.r-X.l,Ne=te-X.t-X.b;for(var Be in fe){if(_(pe)&&fe[Be].r){var Ye=fe[Be].r.val,We=fe[Be].r.size;if(Ye>Fe){var et=(pe*Ye+(We-De)*Fe)/(Ye-Fe),ft=(We*(1-Fe)+(pe-De)*(1-Ye))/(Ye-Fe);et+ft>ee+ie&&(ee=et,ie=ft)}}if(_(Me)&&fe[Be].t){var ht=fe[Be].t.val,mt=fe[Be].t.size;if(ht>be){var Mt=(Me*ht+(mt-Ne)*be)/(ht-be),_t=(mt*(1-be)+(Me-Ne)*(1-ht))/(ht-be);Mt+_t>oe+ae&&(oe=Mt,ae=_t)}}}}}var it=a.constrain(H-J.l-J.r,2,ve),st=a.constrain(te-J.t-J.b,2,xe),St=Math.max(0,H-it),zt=Math.max(0,te-st);if(St){var Ft=(ee+ie)/St;Ft>1&&(ee/=Ft,ie/=Ft)}if(zt){var Pt=(oe+ae)/zt;Pt>1&&(oe/=Pt,ae/=Pt)}if($.l=Math.round(ee)+X.l,$.r=Math.round(ie)+X.r,$.t=Math.round(ae)+X.t,$.b=Math.round(oe)+X.b,$.p=Math.round(J.pad),$.w=Math.round(H)-$.l-$.r,$.h=Math.round(te)-$.t-$.b,!V._replotting&&(m.didMarginChange(K,$)||function(Ke){if("_redrawFromAutoMarginCount"in Ke._fullLayout)return!1;var He=l.list(Ke,"",!0);for(var Je in He)if(He[Je].autoshift||He[Je].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in V?V._redrawFromAutoMarginCount++:V._redrawFromAutoMarginCount=1;var Xe=3*(1+Object.keys(ge).length);if(V._redrawFromAutoMarginCount<Xe)return h.call("_doPlot",F);V._size=K,a.warn("Too many auto-margin redraws.")}(function(Ke){var He=l.list(Ke,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Je){for(var lt=0;lt<He.length;lt++){var ot=He[lt][Je];ot&&ot()}})})(F)};var z=["l","r","t","b","p","w","h"];function U(F,V,H){var te=!1,$=[m.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(X){var K=Promise.resolve();if(!X)return K;for(;X.length;)K=K.then(X.shift());return K}(F._transitionData._interruptCallbacks)},H.prepareFn,m.rehover,m.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(X){F._transitioning=!0,V.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){te=!0}),H.redraw&&F._transitionData._interruptCallbacks.push(function(){return h.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var K=0,ee=0;function ie(){return K++,function(){var ae;ee++,te||ee!==K||(ae=X,F._transitionData&&(function(oe){if(oe)for(;oe.length;)oe.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(H.redraw)return h.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(ae)))}}H.runFn(ie),setTimeout(ie())})}],J=a.syncOrAsync($,F);return J&&J.then||(J=Promise.resolve()),J.then(function(){return F})}m.didMarginChange=function(F,V){for(var H=0;H<z.length;H++){var te=z[H],$=F[te],J=V[te];if(!_($)||Math.abs(J-$)>1)return!0}return!1},m.graphJson=function(F,V,H,te,$,J){($&&V&&!F._fullData||$&&!V&&!F._fullLayout)&&m.supplyDefaults(F);var X=$?F._fullData:F.data,K=$?F._fullLayout:F.layout,ee=(F._transitionData||{})._frames;function ie(fe,ge){if(typeof fe=="function")return ge?"_function_":null;if(a.isPlainObject(fe)){var ve,xe={};return Object.keys(fe).sort().forEach(function(ke){if(["_","["].indexOf(ke.charAt(0))===-1)if(typeof fe[ke]!="function"){if(H==="keepdata"){if(ke.substr(ke.length-3)==="src")return}else if(H==="keepstream"){if(typeof(ve=fe[ke+"src"])=="string"&&ve.indexOf(":")>0&&!a.isPlainObject(fe.stream))return}else if(H!=="keepall"&&typeof(ve=fe[ke+"src"])=="string"&&ve.indexOf(":")>0)return;xe[ke]=ie(fe[ke],ge)}else ge&&(xe[ke]="_function")}),xe}var _e=Array.isArray(fe),ye=a.isTypedArray(fe);if((_e||ye)&&fe.dtype&&fe.shape){var Ce=fe.bdata;return ie({dtype:fe.dtype,shape:fe.shape,bdata:a.isArrayBuffer(Ce)?v.encode(Ce):Ce},ge)}return _e?fe.map(function(ke){return ie(ke,ge)}):ye?a.simpleMap(fe,a.identity):a.isJSDate(fe)?a.ms2DateTimeLocal(+fe):fe}var ae={data:(X||[]).map(function(fe){var ge=ie(fe);return V&&delete ge.fit,ge})};if(!V&&(ae.layout=ie(K),$)){var oe=K._size;ae.layout.computed={margin:{b:oe.b,l:oe.l,r:oe.r,t:oe.t}}}return ee&&(ae.frames=ie(ee)),J&&(ae.config=ie(F._context,!0)),te==="object"?ae:JSON.stringify(ae)},m.modifyFrames=function(F,V){var H,te,$,J=F._transitionData._frames,X=F._transitionData._frameHash;for(H=0;H<V.length;H++)switch((te=V[H]).type){case"replace":$=te.value;var K=(J[te.index]||{}).name,ee=$.name;J[te.index]=X[ee]=$,ee!==K&&(delete X[K],X[ee]=$);break;case"insert":X[($=te.value).name]=$,J.splice(te.index,0,$);break;case"delete":delete X[($=J[te.index]).name],J.splice(te.index,1)}return Promise.resolve()},m.computeFrame=function(F,V){var H,te,$,J,X=F._transitionData._frameHash;if(!V)throw new Error("computeFrame must be given a string frame name");var K=X[V.toString()];if(!K)return!1;for(var ee=[K],ie=[K.name];K.baseframe&&(K=X[K.baseframe.toString()])&&ie.indexOf(K.name)===-1;)ee.push(K),ie.push(K.name);for(var ae={};K=ee.pop();)if(K.layout&&(ae.layout=m.extendLayout(ae.layout,K.layout)),K.data){if(ae.data||(ae.data=[]),!(te=K.traces))for(te=[],H=0;H<K.data.length;H++)te[H]=H;for(ae.traces||(ae.traces=[]),H=0;H<K.data.length;H++)($=te[H])!=null&&((J=ae.traces.indexOf($))===-1&&(J=ae.data.length,ae.traces[J]=$),ae.data[J]=m.extendTrace(ae.data[J],K.data[H]))}return ae},m.recomputeFrameHash=function(F){for(var V=F._transitionData._frameHash={},H=F._transitionData._frames,te=0;te<H.length;te++){var $=H[te];$&&$.name&&(V[$.name]=$)}},m.extendObjectWithContainers=function(F,V,H){var te,$,J,X,K,ee,ie,ae=a.extendDeepNoArrays({},V||{}),oe=a.expandObjectPaths(ae),fe={};if(H&&H.length)for(J=0;J<H.length;J++)($=(te=a.nestedProperty(oe,H[J])).get())===void 0?a.nestedProperty(fe,H[J]).set(null):(te.set(null),a.nestedProperty(fe,H[J]).set($));if(F=a.extendDeepNoArrays(F||{},oe),H&&H.length){for(J=0;J<H.length;J++)if(ee=a.nestedProperty(fe,H[J]).get()){for(ie=(K=a.nestedProperty(F,H[J])).get(),Array.isArray(ie)||(ie=[],K.set(ie)),X=0;X<ee.length;X++){var ge=ee[X];ie[X]=ge===null?null:m.extendObjectWithContainers(ie[X],ge)}K.set(ie)}}return F},m.dataArrayContainers=["transforms","dimensions"],m.layoutArrayContainers=h.layoutArrayContainers,m.extendTrace=function(F,V){return m.extendObjectWithContainers(F,V,m.dataArrayContainers)},m.extendLayout=function(F,V){return m.extendObjectWithContainers(F,V,m.layoutArrayContainers)},m.transition=function(F,V,H,te,$,J){var X={redraw:$.redraw},K={},ee=[];return X.prepareFn=function(){for(var ie=Array.isArray(V)?V.length:0,ae=te.slice(0,ie),oe=0;oe<ae.length;oe++){var fe=ae[oe],ge=F._fullData[fe]._module;if(ge){if(ge.animatable){var ve=ge.basePlotModule.name;K[ve]||(K[ve]=[]),K[ve].push(fe)}F.data[ae[oe]]=m.extendTrace(F.data[ae[oe]],V[oe])}}var xe=a.expandObjectPaths(a.extendDeepNoArrays({},H)),_e=/^[xy]axis[0-9]*$/;for(var ye in xe)_e.test(ye)&&delete xe[ye].range;m.extendLayout(F.layout,xe),delete F.calcdata,m.supplyDefaults(F),m.doCalcdata(F);var Ce=a.expandObjectPaths(H);if(Ce){var ke=F._fullLayout._plots;for(var Te in ke){var le=ke[Te],ue=le.xaxis,de=le.yaxis,Le=ue.range.slice(),we=de.range.slice(),Ee=null,Oe=null,Fe=null,pe=null;Array.isArray(Ce[ue._name+".range"])?Ee=Ce[ue._name+".range"].slice():Array.isArray((Ce[ue._name]||{}).range)&&(Ee=Ce[ue._name].range.slice()),Array.isArray(Ce[de._name+".range"])?Oe=Ce[de._name+".range"].slice():Array.isArray((Ce[de._name]||{}).range)&&(Oe=Ce[de._name].range.slice()),Le&&Ee&&(ue.r2l(Le[0])!==ue.r2l(Ee[0])||ue.r2l(Le[1])!==ue.r2l(Ee[1]))&&(Fe={xr0:Le,xr1:Ee}),we&&Oe&&(de.r2l(we[0])!==de.r2l(Oe[0])||de.r2l(we[1])!==de.r2l(Oe[1]))&&(pe={yr0:we,yr1:Oe}),(Fe||pe)&&ee.push(a.extendFlat({plotinfo:le},Fe,pe))}}return Promise.resolve()},X.runFn=function(ie){var ae,oe,fe=F._fullLayout._basePlotModules,ge=ee.length;if(H)for(oe=0;oe<fe.length;oe++)fe[oe].transitionAxes&&fe[oe].transitionAxes(F,ee,J,ie);for(var ve in ge?((ae=a.extendFlat({},J)).duration=0,delete K.cartesian):ae=J,K){var xe=K[ve];F._fullData[xe[0]]._module.basePlotModule.plot(F,xe,ae,ie)}},U(F,J,X)},m.transitionFromReact=function(F,V,H,te){var $=F._fullLayout,J=$.transition,X={},K=[];return X.prepareFn=function(){var ee=$._plots;for(var ie in X.redraw=!1,V.anim==="some"&&(X.redraw=!0),H.anim==="some"&&(X.redraw=!0),ee){var ae=ee[ie],oe=ae.xaxis,fe=ae.yaxis,ge=te[oe._name].range.slice(),ve=te[fe._name].range.slice(),xe=oe.range.slice(),_e=fe.range.slice();oe.setScale(),fe.setScale();var ye=null,Ce=null;oe.r2l(ge[0])===oe.r2l(xe[0])&&oe.r2l(ge[1])===oe.r2l(xe[1])||(ye={xr0:ge,xr1:xe}),fe.r2l(ve[0])===fe.r2l(_e[0])&&fe.r2l(ve[1])===fe.r2l(_e[1])||(Ce={yr0:ve,yr1:_e}),(ye||Ce)&&K.push(a.extendFlat({plotinfo:ae},ye,Ce))}return Promise.resolve()},X.runFn=function(ee){for(var ie,ae,oe,fe=F._fullData,ge=F._fullLayout._basePlotModules,ve=[],xe=0;xe<fe.length;xe++)ve.push(xe);function _e(){if(F._fullLayout)for(var Ce=0;Ce<ge.length;Ce++)ge[Ce].transitionAxes&&ge[Ce].transitionAxes(F,K,ie,ee)}function ye(){if(F._fullLayout)for(var Ce=0;Ce<ge.length;Ce++)ge[Ce].plot(F,oe,ae,ee)}K.length&&V.anim?J.ordering==="traces first"?(ie=a.extendFlat({},J,{duration:0}),oe=ve,ae=J,setTimeout(_e,J.duration),ye()):(ie=J,oe=null,ae=a.extendFlat({},J,{duration:0}),setTimeout(ye,ie.duration),_e()):K.length?(ie=J,_e()):V.anim&&(oe=ve,ae=J,ye())},U(F,J,X)},m.doCalcdata=function(F,V){var H,te,$,J,X=l.list(F),K=F._fullData,ee=F._fullLayout,ie=new Array(K.length),ae=(F.calcdata||[]).slice();for(F.calcdata=ie,ee._numBoxes=0,ee._numViolins=0,ee._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,ee._piecolormap={},ee._sunburstcolormap={},ee._treemapcolormap={},ee._iciclecolormap={},ee._funnelareacolormap={},$=0;$<K.length;$++)Array.isArray(V)&&V.indexOf($)===-1&&(ie[$]=ae[$]);for($=0;$<K.length;$++)(H=K[$])._arrayAttrs=s.findArrayAttributes(H),H._extremes={};var oe=ee._subplots.polar||[];for($=0;$<oe.length;$++)X.push(ee[oe[$]].radialaxis,ee[oe[$]].angularaxis);for(var fe in ee._colorAxes){var ge=ee[fe];ge.cauto!==!1&&(delete ge.cmin,delete ge.cmax)}var ve=!1;function xe(Ce){if(H=K[Ce],te=H._module,H.visible===!0&&H.transforms){if(te&&te.calc){var ke=te.calc(F,H);ke[0]&&ke[0].t&&ke[0].t._scene&&delete ke[0].t._scene.dirty}for(J=0;J<H.transforms.length;J++){var Te=H.transforms[J];(te=x[Te.type])&&te.calcTransform&&(H._hasCalcTransform=!0,ve=!0,te.calcTransform(F,H,Te))}}}function _e(Ce,ke){if(H=K[Ce],!!(te=H._module).isContainer===ke){var Te=[];if(H.visible===!0&&H._length!==0){delete H._indexToPoints;var le=H.transforms||[];for(J=le.length-1;J>=0;J--)if(le[J].enabled){H._indexToPoints=le[J]._indexToPoints;break}te&&te.calc&&(Te=te.calc(F,H))}Array.isArray(Te)&&Te[0]||(Te=[{x:r,y:r}]),Te[0].t||(Te[0].t={}),Te[0].trace=H,ie[Ce]=Te}}for(j(X,K,ee),$=0;$<K.length;$++)_e($,!0);for($=0;$<K.length;$++)xe($);for(ve&&j(X,K,ee),$=0;$<K.length;$++)_e($,!0);for($=0;$<K.length;$++)_e($,!1);Z(F);var ye=function(Ce,ke){var Te,le,ue,de,Le,we=[];function Ee(Je,lt,ot){var je=lt._id.charAt(0);if(Je==="histogram2dcontour"){var Ue=lt._counterAxes[0],at=l.getFromId(ke,Ue),$e=je==="x"||Ue==="x"&&at.type==="category",gt=je==="y"||Ue==="y"&&at.type==="category";return function(yt,xt){return yt===0||xt===0||$e&&yt===ot[xt].length-1||gt&&xt===ot.length-1?-1:(je==="y"?xt:yt)-1}}return function(yt,xt){return je==="y"?xt:yt}}var Oe={min:function(Je){return a.aggNums(Math.min,null,Je)},max:function(Je){return a.aggNums(Math.max,null,Je)},sum:function(Je){return a.aggNums(function(lt,ot){return lt+ot},null,Je)},total:function(Je){return a.aggNums(function(lt,ot){return lt+ot},null,Je)},mean:function(Je){return a.mean(Je)},median:function(Je){return a.median(Je)}};function Fe(Je,lt){return Je[1]-lt[1]}function pe(Je,lt){return lt[1]-Je[1]}for(Te=0;Te<Ce.length;Te++){var be=Ce[Te];if(be.type==="category"){var Me=be.categoryorder.match(R);if(Me){var De=Me[1],Ne=Me[2],Be=be._id.charAt(0),Ye=Be==="x",We=[];for(le=0;le<be._categories.length;le++)We.push([be._categories[le],[]]);for(le=0;le<be._traceIndices.length;le++){var et=be._traceIndices[le],ft=ke._fullData[et];if(ft.visible===!0){var ht=ft.type;h.traceIs(ft,"histogram")&&(delete ft._xautoBinFinished,delete ft._yautoBinFinished);var mt=ht==="splom",Mt=ht==="scattergl",_t=ke.calcdata[et];for(ue=0;ue<_t.length;ue++){var it,st,St=_t[ue];if(mt){var zt=ft._axesDim[be._id];if(!Ye){var Ft=ft._diag[zt][0];Ft&&(be=ke._fullLayout[l.id2name(Ft)])}var Pt=St.trace.dimensions[zt].values;for(de=0;de<Pt.length;de++)for(it=be._categoriesMap[Pt[de]],Le=0;Le<St.trace.dimensions.length;Le++)if(Le!==zt){var Xe=St.trace.dimensions[Le];We[it][1].push(Xe.values[de])}}else if(Mt){for(de=0;de<St.t.x.length;de++)Ye?(it=St.t.x[de],st=St.t.y[de]):(it=St.t.y[de],st=St.t.x[de]),We[it][1].push(st);St.t&&St.t._scene&&delete St.t._scene.dirty}else if(St.hasOwnProperty("z")){st=St.z;var Ke=Ee(ft.type,be,st);for(de=0;de<st.length;de++)for(Le=0;Le<st[de].length;Le++)(it=Ke(Le,de))+1&&We[it][1].push(st[de][Le])}else for((it=St.p)===void 0&&(it=St[Be]),(st=St.s)===void 0&&(st=St.v),st===void 0&&(st=Ye?St.y:St.x),Array.isArray(st)||(st=st===void 0?[]:[st]),de=0;de<st.length;de++)We[it][1].push(st[de])}}}be._categoriesValue=We;var He=[];for(le=0;le<We.length;le++)He.push([We[le][0],Oe[De](We[le][1])]);He.sort(Ne==="descending"?pe:Fe),be._categoriesAggregatedValue=He,be._initialCategories=He.map(function(Je){return Je[0]}),we=we.concat(be.sortByInitialCategories())}}}return we}(X,F);if(ye.length){for(ee._numBoxes=0,ee._numViolins=0,$=0;$<ye.length;$++)_e(ye[$],!0);for($=0;$<ye.length;$++)_e(ye[$],!1);Z(F)}h.getComponentMethod("fx","calc")(F),h.getComponentMethod("errorbars","calc")(F)};var R=/(total|sum|min|max|mean|median) (ascending|descending)/;function j(F,V,H){var te={};function $(ee){ee.clearCalc(),ee.type==="multicategory"&&ee.setupMultiCategory(V),te[ee._id]=1}a.simpleMap(F,$);for(var J=H._axisMatchGroups||[],X=0;X<J.length;X++)for(var K in J[X])te[K]||$(H[l.id2name(K)])}function Z(F){var V,H,te,$=F._fullLayout,J=$._visibleModules,X={};for(H=0;H<J.length;H++){var K=J[H],ee=K.crossTraceCalc;if(ee){var ie=K.basePlotModule.name;X[ie]?a.pushUnique(X[ie],ee):X[ie]=[ee]}}for(te in X){var ae=X[te],oe=$._subplots[te];if(Array.isArray(oe))for(V=0;V<oe.length;V++){var fe=oe[V],ge=te==="cartesian"?$._plots[fe]:$[fe];for(H=0;H<ae.length;H++)ae[H](F,ge,fe)}else for(H=0;H<ae.length;H++)ae[H](F)}}m.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},m.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},m.reselect=function(F){var V=F._fullLayout,H=(F.layout||{}).selections,te=V._previousSelections;V._previousSelections=H;var $=V._reselect||JSON.stringify(H)!==JSON.stringify(te);h.getComponentMethod("selections","reselect")(F,$)},m.generalUpdatePerTraceModule=function(F,V,H,te){var $,J=V.traceHash,X={};for($=0;$<H.length;$++){var K=H[$],ee=K[0].trace;ee.visible&&(X[ee.type]=X[ee.type]||[],X[ee.type].push(K))}for(var ie in J)if(!X[ie]){var ae=J[ie][0];ae[0].trace.visible=!1,X[ie]=[ae]}for(var oe in X){var fe=X[oe];fe[0][0].trace._module.plot(F,V,a.filterVisible(fe),te)}V.traceHash=X},m.plotBasePlot=function(F,V,H,te,$){var J=h.getModule(F),X=b(V.calcdata,J)[0];J.plot(V,X,te,$)},m.cleanBasePlot=function(F,V,H,te,$){var J=$._has&&$._has(F),X=H._has&&H._has(F);J&&!X&&$["_"+F+"layer"].selectAll("g.trace").remove()}},9813:function(N){N.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(N,L,e){var T=e(71828),w=e(61082).tester,i=T.findIndexOfMin,_=T.isAngleInsideSector,v=T.angleDelta,h=T.angleDist;function s(r,l,o,u){var p,c,b=u[0],g=u[1],d=a(Math.sin(l)-Math.sin(r)),m=a(Math.cos(l)-Math.cos(r)),x=Math.tan(o),y=a(1/x),k=d/m,f=g-k*b;return y?d&&m?c=x*(p=f/(x-k)):m?(p=g*y,c=g):(p=b,c=b*x):d&&m?(p=0,c=f):m?(p=0,c=g):p=c=NaN,[p,c]}function t(r,l,o,u){return T.isFullCircle([l,o])?function(p,c){var b,g=c.length,d=new Array(g+1);for(b=0;b<g;b++){var m=c[b];d[b]=[p*Math.cos(m),p*Math.sin(m)]}return d[b]=d[0].slice(),d}(r,u):function(p,c,b,g){var d,m,x=g.length,y=[];function k(U){return[p*Math.cos(U),p*Math.sin(U)]}function f(U,R,j){return s(U,R,j,k(U))}function S(U){return T.mod(U,x)}function M(U){return _(U,[c,b])}var E=i(g,function(U){return M(U)?h(U,c):1/0}),O=f(g[E],g[S(E-1)],c);for(y.push(O),d=E,m=0;m<x;d++,m++){var P=g[S(d)];if(!M(P))break;y.push(k(P))}var I=i(g,function(U){return M(U)?h(U,b):1/0}),z=f(g[I],g[S(I+1)],b);return y.push(z),y.push([0,0]),y.push(y[0].slice()),y}(r,l,o,u)}function a(r){return Math.abs(r)>1e-10?r:0}function n(r,l,o){l=l||0,o=o||0;for(var u=r.length,p=new Array(u),c=0;c<u;c++){var b=r[c];p[c]=[l+b[0],o-b[1]]}return p}N.exports={isPtInsidePolygon:function(r,l,o,u,p){if(!_(l,u))return!1;var c,b;o[0]<o[1]?(c=o[0],b=o[1]):(c=o[1],b=o[0]);var g=w(t(c,u[0],u[1],p)),d=w(t(b,u[0],u[1],p)),m=[r*Math.cos(l),r*Math.sin(l)];return d.contains(m)&&!g.contains(m)},findPolygonOffset:function(r,l,o,u){for(var p=1/0,c=1/0,b=t(r,l,o,u),g=0;g<b.length;g++){var d=b[g];p=Math.min(p,d[0]),c=Math.min(c,-d[1])}return[p,c]},findEnclosingVertexAngles:function(r,l){var o=i(l,function(p){var c=v(p,r);return c>0?c:1/0}),u=T.mod(o+1,l.length);return[l[o],l[u]]},findIntersectionXY:s,findXYatLength:function(r,l,o,u){var p=-l*o,c=l*l+1,b=2*(l*p-o),g=p*p+o*o-r*r,d=Math.sqrt(b*b-4*c*g),m=(-b+d)/(2*c),x=(-b-d)/(2*c);return[[m,l*m+p+u],[x,l*x+p+u]]},clampTiny:a,pathPolygon:function(r,l,o,u,p,c){return"M"+n(t(r,l,o,u),p,c).join("L")},pathPolygonAnnulus:function(r,l,o,u,p,c,b){var g,d;r<l?(g=r,d=l):(g=l,d=r);var m=n(t(g,o,u,p),c,b);return"M"+n(t(d,o,u,p),c,b).reverse().join("L")+"M"+m.join("L")}}},23580:function(N,L,e){var T=e(27659).AU,w=e(71828).counterRegex,i=e(77997),_=e(9813),v=_.attr,h=_.name,s=w(h),t={};t[v]={valType:"subplotid",dflt:h,editType:"calc"},N.exports={attr:v,name:h,idRoot:h,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(73812),supplyLayoutDefaults:e(68993),plot:function(a){for(var n=a._fullLayout,r=a.calcdata,l=n._subplots[h],o=0;o<l.length;o++){var u=l[o],p=T(r,h,u),c=n[u]._subplot;c||(c=i(a,u),n[u]._subplot=c),c.plot(p,n,a._promises)}},clean:function(a,n,r,l){for(var o=l._subplots[h]||[],u=l._has&&l._has("gl"),p=n._has&&n._has("gl"),c=u&&!p,b=0;b<o.length;b++){var g=o[b],d=l[g]._subplot;if(!n[g]&&d)for(var m in d.framework.remove(),d.layers["radial-axis-title"].remove(),d.clipPaths)d.clipPaths[m].remove();c&&d._scene&&(d._scene.destroy(),d._scene=null)}},toSVG:e(93612).toSVG}},73812:function(N,L,e){var T=e(22399),w=e(13838),i=e(27670).Y,_=e(71828).extendFlat,v=e(30962).overrideAll,h=v({color:w.color,showline:_({},w.showline,{dflt:!0}),linecolor:w.linecolor,linewidth:w.linewidth,showgrid:_({},w.showgrid,{dflt:!0}),gridcolor:w.gridcolor,gridwidth:w.gridwidth,griddash:w.griddash},"plot","from-root"),s=v({tickmode:w.minor.tickmode,nticks:w.nticks,tick0:w.tick0,dtick:w.dtick,tickvals:w.tickvals,ticktext:w.ticktext,ticks:w.ticks,ticklen:w.ticklen,tickwidth:w.tickwidth,tickcolor:w.tickcolor,ticklabelstep:w.ticklabelstep,showticklabels:w.showticklabels,labelalias:w.labelalias,showtickprefix:w.showtickprefix,tickprefix:w.tickprefix,showticksuffix:w.showticksuffix,ticksuffix:w.ticksuffix,showexponent:w.showexponent,exponentformat:w.exponentformat,minexponent:w.minexponent,separatethousands:w.separatethousands,tickfont:w.tickfont,tickangle:w.tickangle,tickformat:w.tickformat,tickformatstops:w.tickformatstops,layer:w.layer},"plot","from-root"),t={visible:_({},w.visible,{dflt:!0}),type:_({},w.type,{values:["-","linear","log","date","category"]}),autotypenumbers:w.autotypenumbers,autorangeoptions:{minallowed:w.autorangeoptions.minallowed,maxallowed:w.autorangeoptions.maxallowed,clipmin:w.autorangeoptions.clipmin,clipmax:w.autorangeoptions.clipmax,include:w.autorangeoptions.include,editType:"plot"},autorange:_({},w.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:_({},w.minallowed,{editType:"plot"}),maxallowed:_({},w.maxallowed,{editType:"plot"}),range:_({},w.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:w.categoryorder,categoryarray:w.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:_({},w.title.text,{editType:"plot",dflt:""}),font:_({},w.title.font,{editType:"plot"}),editType:"plot"},hoverformat:w.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:w._deprecated.title,titlefont:w._deprecated.titlefont}};_(t,h,s);var a={visible:_({},w.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:w.autotypenumbers,categoryorder:w.categoryorder,categoryarray:w.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:w.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};_(a,h,s),N.exports={domain:i({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:T.background},radialaxis:t,angularaxis:a,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(N,L,e){var T=e(71828),w=e(7901),i=e(44467),_=e(49119),v=e(27659).NG,h=e(26218),s=e(38701),t=e(96115),a=e(89426),n=e(15258),r=e(92128),l=e(23074),o=e(4322),u=e(73812),p=e(12101),c=e(9813),b=c.axisNames;function g(m,x,y,k){var f=y("bgcolor");k.bgColor=w.combine(f,k.paper_bgcolor);var S=y("sector");y("hole");var M,E=v(k.fullData,c.name,k.id),O=k.layoutOut;function P(oe,fe){return y(M+"."+oe,fe)}for(var I=0;I<b.length;I++){M=b[I],T.isPlainObject(m[M])||(m[M]={});var z=m[M],U=i.newContainer(x,M);U._id=U._name=M,U._attr=k.id+"."+M,U._traceIndices=E.map(function(oe){return oe._expandedIndex});var R=c.axisName2dataArray[M],j=d(z,U,P,E,R,k);n(z,U,P,{axData:E,dataAttr:R});var Z=P("visible");switch(p(U,x,O),P("uirevision",x.uirevision),U._m=1,M){case"radialaxis":P("minallowed"),P("maxallowed");var F,V=P("range"),H=U.getAutorangeDflt(V),te=P("autorange",H);!V||(V[0]!==null||V[1]!==null)&&(V[0]!==null&&V[1]!==null||te!=="reversed"&&te!==!0)&&(V[0]===null||te!=="min"&&te!=="max reversed")&&(V[1]===null||te!=="max"&&te!=="min reversed")||(V=void 0,delete U.range,U.autorange=!0,F=!0),F||(te=P("autorange",H=U.getAutorangeDflt(V))),z.autorange=te,te&&(l(P,te,V),j!=="linear"&&j!=="-"||P("rangemode"),U.isReversed()&&(U._m=-1)),U.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(j==="date"){T.log("Polar plots do not support date angular axes yet.");for(var $=0;$<E.length;$++)E[$].visible=!1;j=z.type=U.type="linear"}P(j==="linear"?"thetaunit":"period");var J=P("direction");P("rotation",{counterclockwise:0,clockwise:90}[J])}if(a(z,U,P,U.type,{tickSuffixDflt:U.thetaunit==="degrees"?"":void 0}),Z){var X,K,ee,ie,ae=k.font||{};K=(X=P("color"))===z.color?X:ae.color,ee=ae.size,ie=ae.family,h(z,U,P,U.type),t(z,U,P,U.type,{font:{color:K,size:ee,family:ie}}),s(z,U,P,{outerTicks:!0}),r(z,U,P,{dfltColor:X,bgColor:k.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[M]}),P("layer"),M==="radialaxis"&&(P("side"),P("angle",S[0]),P("title.text"),T.coerceFont(P,"title.font",{color:K,size:T.bigFont(ee),family:ie}))}j!=="category"&&P("hoverformat"),U._input=z}x.angularaxis.type==="category"&&y("gridshape")}function d(m,x,y,k,f,S){var M=y("autotypenumbers",S.autotypenumbersDflt);if(y("type")==="-"){for(var E,O=0;O<k.length;O++)if(k[O].visible){E=k[O];break}E&&E[f]&&(x.type=o(E[f],"gregorian",{noMultiCategory:!0,autotypenumbers:M})),x.type==="-"?x.type="linear":m.type=x.type}return x.type}N.exports=function(m,x,y){_(m,x,y,{type:c.name,attributes:u,handleDefaults:g,font:x.font,autotypenumbersDflt:x.autotypenumbers,paper_bgcolor:x.paper_bgcolor,fullData:y,layoutOut:x})}},77997:function(N,L,e){var T=e(39898),w=e(84267),i=e(73972),_=e(71828),v=_.strRotate,h=_.strTranslate,s=e(7901),t=e(91424),a=e(74875),n=e(89298),r=e(21994),l=e(12101),o=e(71739).doAutoRange,u=e(29323),p=e(28569),c=e(30211),b=e(92998),g=e(47322).prepSelect,d=e(47322).selectOnClick,m=e(47322).clearOutline,x=e(6964),y=e(33306),k=e(61549).redrawReglTraces,f=e(18783).MID_SHIFT,S=e(9813),M=e(10869),E=e(23893),O=E.smith,P=E.reactanceArc,I=E.resistanceArc,z=E.smithTransform,U=_._,R=_.mod,j=_.deg2rad,Z=_.rad2deg;function F(J,X,K){this.isSmith=K||!1,this.id=X,this.gd=J,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var ee=J._fullLayout,ie="clip"+ee._uid+X;this.clipIds.forTraces=ie+"-for-traces",this.clipPaths.forTraces=ee._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=ee["_"+(K?"smith":"polar")+"layer"].append("g").attr("class",X),this.getHole=function(ae){return this.isSmith?0:ae.hole},this.getSector=function(ae){return this.isSmith?[0,360]:ae.sector},this.getRadial=function(ae){return this.isSmith?ae.realaxis:ae.radialaxis},this.getAngular=function(ae){return this.isSmith?ae.imaginaryaxis:ae.angularaxis},K||(this.radialTickLayout=null,this.angularTickLayout=null)}var V=F.prototype;function H(J){var X=J.ticks+String(J.ticklen)+String(J.showticklabels);return"side"in J&&(X+=J.side),X}function te(J,X){return X[_.findIndexOfMin(X,function(K){return _.angleDist(J,K)})]}function $(J,X,K){return X?(J.attr("display",null),J.attr(K)):J&&J.attr("display","none"),J}N.exports=function(J,X,K){return new F(J,X,K)},V.plot=function(J,X){for(var K=this,ee=X[K.id],ie=!1,ae=0;ae<J.length;ae++)if(J[ae][0].trace.cliponaxis===!1){ie=!0;break}K._hasClipOnAxisFalse=ie,K.updateLayers(X,ee),K.updateLayout(X,ee),a.generalUpdatePerTraceModule(K.gd,K,J,ee),K.updateFx(X,ee),K.isSmith&&(delete ee.realaxis.range,delete ee.imaginaryaxis.range)},V.updateLayers=function(J,X){var K=this,ee=K.isSmith,ie=K.layers,ae=K.getRadial(X),oe=K.getAngular(X),fe=S.layerNames,ge=fe.indexOf("frontplot"),ve=fe.slice(0,ge),xe=oe.layer==="below traces",_e=ae.layer==="below traces";xe&&ve.push("angular-line"),_e&&ve.push("radial-line"),xe&&ve.push("angular-axis"),_e&&ve.push("radial-axis"),ve.push("frontplot"),xe||ve.push("angular-line"),_e||ve.push("radial-line"),xe||ve.push("angular-axis"),_e||ve.push("radial-axis");var ye=(ee?"smith":"polar")+"sublayer",Ce=K.framework.selectAll("."+ye).data(ve,String);Ce.enter().append("g").attr("class",function(ke){return ye+" "+ke}).each(function(ke){var Te=ie[ke]=T.select(this);switch(ke){case"frontplot":ee||Te.append("g").classed("barlayer",!0),Te.append("g").classed("scatterlayer",!0);break;case"backplot":Te.append("g").classed("maplayer",!0);break;case"plotbg":ie.bg=Te.append("path");break;case"radial-grid":case"angular-grid":Te.style("fill","none");break;case"radial-line":Te.append("line").style("fill","none");break;case"angular-line":Te.append("path").style("fill","none")}}),Ce.order()},V.updateLayout=function(J,X){var K=this,ee=K.layers,ie=J._size,ae=K.getRadial(X),oe=K.getAngular(X),fe=X.domain.x,ge=X.domain.y;K.xOffset=ie.l+ie.w*fe[0],K.yOffset=ie.t+ie.h*(1-ge[1]);var ve=K.xLength=ie.w*(fe[1]-fe[0]),xe=K.yLength=ie.h*(ge[1]-ge[0]),_e=K.getSector(X);K.sectorInRad=_e.map(j);var ye,Ce,ke,Te,le,ue=K.sectorBBox=function(ft){var ht,mt=ft[0],Mt=ft[1]-mt,_t=R(mt,360),it=_t+Mt,st=Math.cos(j(_t)),St=Math.sin(j(_t)),zt=Math.cos(j(it)),Ft=Math.sin(j(it));return ht=_t<=90&&it>=90||_t>90&&it>=450?1:St<=0&&Ft<=0?0:Math.max(St,Ft),[_t<=180&&it>=180||_t>180&&it>=540?-1:st>=0&&zt>=0?0:Math.min(st,zt),_t<=270&&it>=270||_t>270&&it>=630?-1:St>=0&&Ft>=0?0:Math.min(St,Ft),it>=360?1:st<=0&&zt<=0?0:Math.max(st,zt),ht]}(_e),de=ue[2]-ue[0],Le=ue[3]-ue[1],we=xe/ve,Ee=Math.abs(Le/de);we>Ee?(ye=ve,le=(xe-(Ce=ve*Ee))/ie.h/2,ke=[fe[0],fe[1]],Te=[ge[0]+le,ge[1]-le]):(Ce=xe,le=(ve-(ye=xe/Ee))/ie.w/2,ke=[fe[0]+le,fe[1]-le],Te=[ge[0],ge[1]]),K.xLength2=ye,K.yLength2=Ce,K.xDomain2=ke,K.yDomain2=Te;var Oe,Fe=K.xOffset2=ie.l+ie.w*ke[0],pe=K.yOffset2=ie.t+ie.h*(1-Te[1]),be=K.radius=ye/de,Me=K.innerRadius=K.getHole(X)*be,De=K.cx=Fe-be*ue[0],Ne=K.cy=pe+be*ue[3],Be=K.cxx=De-Fe,Ye=K.cyy=Ne-pe,We=ae.side;We==="counterclockwise"?(Oe=We,We="top"):We==="clockwise"&&(Oe=We,We="bottom"),K.radialAxis=K.mockAxis(J,X,ae,{_id:"x",side:We,_trueSide:Oe,domain:[Me/ie.w,be/ie.w]}),K.angularAxis=K.mockAxis(J,X,oe,{side:"right",domain:[0,Math.PI],autorange:!1}),K.doAutoRange(J,X),K.updateAngularAxis(J,X),K.updateRadialAxis(J,X),K.updateRadialAxisTitle(J,X),K.xaxis=K.mockCartesianAxis(J,X,{_id:"x",domain:ke}),K.yaxis=K.mockCartesianAxis(J,X,{_id:"y",domain:Te});var et=K.pathSubplot();K.clipPaths.forTraces.select("path").attr("d",et).attr("transform",h(Be,Ye)),ee.frontplot.attr("transform",h(Fe,pe)).call(t.setClipUrl,K._hasClipOnAxisFalse?null:K.clipIds.forTraces,K.gd),ee.bg.attr("d",et).attr("transform",h(De,Ne)).call(s.fill,X.bgcolor)},V.mockAxis=function(J,X,K,ee){var ie=_.extendFlat({},K,ee);return l(ie,X,J),ie},V.mockCartesianAxis=function(J,X,K){var ee=this,ie=ee.isSmith,ae=K._id,oe=_.extendFlat({type:"linear"},K);r(oe,J);var fe={x:[0,2],y:[1,3]};return oe.setRange=function(){var ge=ee.sectorBBox,ve=fe[ae],xe=ee.radialAxis._rl,_e=(xe[1]-xe[0])/(1-ee.getHole(X));oe.range=[ge[ve[0]]*_e,ge[ve[1]]*_e]},oe.isPtWithinRange=ae!=="x"||ie?function(){return!0}:function(ge){return ee.isPtInside(ge)},oe.setRange(),oe.setScale(),oe},V.doAutoRange=function(J,X){var K=this,ee=K.gd,ie=K.radialAxis,ae=K.getRadial(X);o(ee,ie);var oe=ie.range;if(ae.range=oe.slice(),ae._input.range=oe.slice(),ie._rl=[ie.r2l(oe[0],null,"gregorian"),ie.r2l(oe[1],null,"gregorian")],ie.minallowed!==void 0){var fe=ie.r2l(ie.minallowed);ie._rl[0]>ie._rl[1]?ie._rl[1]=Math.max(ie._rl[1],fe):ie._rl[0]=Math.max(ie._rl[0],fe)}if(ie.maxallowed!==void 0){var ge=ie.r2l(ie.maxallowed);ie._rl[0]<ie._rl[1]?ie._rl[1]=Math.min(ie._rl[1],ge):ie._rl[0]=Math.min(ie._rl[0],ge)}},V.updateRadialAxis=function(J,X){var K=this,ee=K.gd,ie=K.layers,ae=K.radius,oe=K.innerRadius,fe=K.cx,ge=K.cy,ve=K.getRadial(X),xe=R(K.getSector(X)[0],360),_e=K.radialAxis,ye=oe<ae,Ce=K.isSmith;Ce||(K.fillViewInitialKey("radialaxis.angle",ve.angle),K.fillViewInitialKey("radialaxis.range",_e.range.slice()),_e.setGeometry()),_e.tickangle==="auto"&&xe>90&&xe<=270&&(_e.tickangle=180);var ke=Ce?function(pe){var be=z(K,O([pe.x,0]));return h(be[0]-fe,be[1]-ge)}:function(pe){return h(_e.l2p(pe.x)+oe,0)},Te=Ce?function(pe){return I(K,pe.x,-1/0,1/0)}:function(pe){return K.pathArc(_e.r2p(pe.x)+oe)},le=H(ve);if(K.radialTickLayout!==le&&(ie["radial-axis"].selectAll(".xtick").remove(),K.radialTickLayout=le),ye){_e.setScale();var ue=0,de=Ce?(_e.tickvals||[]).filter(function(pe){return pe>=0}).map(function(pe){return n.tickText(_e,pe,!0,!1)}):n.calcTicks(_e),Le=Ce?de:n.clipEnds(_e,de),we=n.getTickSigns(_e)[2];Ce&&((_e.ticks==="top"&&_e.side==="bottom"||_e.ticks==="bottom"&&_e.side==="top")&&(we=-we),_e.ticks==="top"&&_e.side==="top"&&(ue=-_e.ticklen),_e.ticks==="bottom"&&_e.side==="bottom"&&(ue=_e.ticklen)),n.drawTicks(ee,_e,{vals:de,layer:ie["radial-axis"],path:n.makeTickPath(_e,0,we),transFn:ke,crisp:!1}),n.drawGrid(ee,_e,{vals:Le,layer:ie["radial-grid"],path:Te,transFn:_.noop,crisp:!1}),n.drawLabels(ee,_e,{vals:de,layer:ie["radial-axis"],transFn:ke,labelFns:n.makeLabelFns(_e,ue)})}var Ee=K.radialAxisAngle=K.vangles?Z(te(j(ve.angle),K.vangles)):ve.angle,Oe=h(fe,ge),Fe=Oe+v(-Ee);$(ie["radial-axis"],ye&&(ve.showticklabels||ve.ticks),{transform:Fe}),$(ie["radial-grid"],ye&&ve.showgrid,{transform:Ce?"":Oe}),$(ie["radial-line"].select("line"),ye&&ve.showline,{x1:Ce?-ae:oe,y1:0,x2:ae,y2:0,transform:Fe}).attr("stroke-width",ve.linewidth).call(s.stroke,ve.linecolor)},V.updateRadialAxisTitle=function(J,X,K){if(!this.isSmith){var ee=this,ie=ee.gd,ae=ee.radius,oe=ee.cx,fe=ee.cy,ge=ee.getRadial(X),ve=ee.id+"title",xe=0;if(ge.title){var _e=t.bBox(ee.layers["radial-axis"].node()).height,ye=ge.title.font.size,Ce=ge.side;xe=Ce==="top"?ye:Ce==="counterclockwise"?-(_e+.4*ye):_e+.8*ye}var ke=K!==void 0?K:ee.radialAxisAngle,Te=j(ke),le=Math.cos(Te),ue=Math.sin(Te),de=oe+ae/2*le+xe*ue,Le=fe-ae/2*ue+xe*le;ee.layers["radial-axis-title"]=b.draw(ie,ve,{propContainer:ge,propName:ee.id+".radialaxis.title",placeholder:U(ie,"Click to enter radial axis title"),attributes:{x:de,y:Le,"text-anchor":"middle"},transform:{rotate:-ke}})}},V.updateAngularAxis=function(J,X){var K=this,ee=K.gd,ie=K.layers,ae=K.radius,oe=K.innerRadius,fe=K.cx,ge=K.cy,ve=K.getAngular(X),xe=K.angularAxis,_e=K.isSmith;_e||(K.fillViewInitialKey("angularaxis.rotation",ve.rotation),xe.setGeometry(),xe.setScale());var ye=_e?function(pe){var be=z(K,O([0,pe.x]));return Math.atan2(be[0]-fe,be[1]-ge)-Math.PI/2}:function(pe){return xe.t2g(pe.x)};xe.type==="linear"&&xe.thetaunit==="radians"&&(xe.tick0=Z(xe.tick0),xe.dtick=Z(xe.dtick));var Ce=function(pe){return h(fe+ae*Math.cos(pe),ge-ae*Math.sin(pe))},ke=_e?function(pe){var be=z(K,O([0,pe.x]));return h(be[0],be[1])}:function(pe){return Ce(ye(pe))},Te=_e?function(pe){var be=z(K,O([0,pe.x])),Me=Math.atan2(be[0]-fe,be[1]-ge)-Math.PI/2;return h(be[0],be[1])+v(-Z(Me))}:function(pe){var be=ye(pe);return Ce(be)+v(-Z(be))},le=_e?function(pe){return P(K,pe.x,0,1/0)}:function(pe){var be=ye(pe),Me=Math.cos(be),De=Math.sin(be);return"M"+[fe+oe*Me,ge-oe*De]+"L"+[fe+ae*Me,ge-ae*De]},ue=n.makeLabelFns(xe,0).labelStandoff,de={xFn:function(pe){var be=ye(pe);return Math.cos(be)*ue},yFn:function(pe){var be=ye(pe),Me=Math.sin(be)>0?.2:1;return-Math.sin(be)*(ue+pe.fontSize*Me)+Math.abs(Math.cos(be))*(pe.fontSize*f)},anchorFn:function(pe){var be=ye(pe),Me=Math.cos(be);return Math.abs(Me)<.1?"middle":Me>0?"start":"end"},heightFn:function(pe,be,Me){var De=ye(pe);return-.5*(1+Math.sin(De))*Me}},Le=H(ve);K.angularTickLayout!==Le&&(ie["angular-axis"].selectAll("."+xe._id+"tick").remove(),K.angularTickLayout=Le);var we,Ee=_e?[1/0].concat(xe.tickvals||[]).map(function(pe){return n.tickText(xe,pe,!0,!1)}):n.calcTicks(xe);if(_e&&(Ee[0].text="",Ee[0].fontSize*=1.75),X.gridshape==="linear"?(we=Ee.map(ye),_.angleDelta(we[0],we[1])<0&&(we=we.slice().reverse())):we=null,K.vangles=we,xe.type==="category"&&(Ee=Ee.filter(function(pe){return _.isAngleInsideSector(ye(pe),K.sectorInRad)})),xe.visible){var Oe=xe.ticks==="inside"?-1:1,Fe=(xe.linewidth||1)/2;n.drawTicks(ee,xe,{vals:Ee,layer:ie["angular-axis"],path:"M"+Oe*Fe+",0h"+Oe*xe.ticklen,transFn:Te,crisp:!1}),n.drawGrid(ee,xe,{vals:Ee,layer:ie["angular-grid"],path:le,transFn:_.noop,crisp:!1}),n.drawLabels(ee,xe,{vals:Ee,layer:ie["angular-axis"],repositionOnUpdate:!0,transFn:ke,labelFns:de})}$(ie["angular-line"].select("path"),ve.showline,{d:K.pathSubplot(),transform:h(fe,ge)}).attr("stroke-width",ve.linewidth).call(s.stroke,ve.linecolor)},V.updateFx=function(J,X){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(J),this.updateRadialDrag(J,X,0),this.updateRadialDrag(J,X,1)),this.updateHoverAndMainDrag(J))},V.updateHoverAndMainDrag=function(J){var X,K,ee=this,ie=ee.isSmith,ae=ee.gd,oe=ee.layers,fe=J._zoomlayer,ge=S.MINZOOM,ve=S.OFFEDGE,xe=ee.radius,_e=ee.innerRadius,ye=ee.cx,Ce=ee.cy,ke=ee.cxx,Te=ee.cyy,le=ee.sectorInRad,ue=ee.vangles,de=ee.radialAxis,Le=M.clampTiny,we=M.findXYatLength,Ee=M.findEnclosingVertexAngles,Oe=S.cornerHalfWidth,Fe=S.cornerLen/2,pe=u.makeDragger(oe,"path","maindrag",J.dragmode===!1?"none":"crosshair");T.select(pe).attr("d",ee.pathSubplot()).attr("transform",h(ye,Ce)),pe.onmousemove=function(ot){c.hover(ae,ot,ee.id),ae._fullLayout._lasthover=pe,ae._fullLayout._hoversubplot=ee.id},pe.onmouseout=function(ot){ae._dragging||p.unhover(ae,ot)};var be,Me,De,Ne,Be,Ye,We,et,ft,ht={element:pe,gd:ae,subplot:ee.id,plotinfo:{id:ee.id,xaxis:ee.xaxis,yaxis:ee.yaxis},xaxes:[ee.xaxis],yaxes:[ee.yaxis]};function mt(ot,je){return Math.sqrt(ot*ot+je*je)}function Mt(ot,je){return mt(ot-ke,je-Te)}function _t(ot,je){return Math.atan2(Te-je,ot-ke)}function it(ot,je){return[ot*Math.cos(je),ot*Math.sin(-je)]}function st(ot,je){if(ot===0)return ee.pathSector(2*Oe);var Ue=Fe/ot,at=je-Ue,$e=je+Ue,gt=Math.max(0,Math.min(ot,xe)),yt=gt-Oe,xt=gt+Oe;return"M"+it(yt,at)+"A"+[yt,yt]+" 0,0,0 "+it(yt,$e)+"L"+it(xt,$e)+"A"+[xt,xt]+" 0,0,1 "+it(xt,at)+"Z"}function St(ot,je,Ue){if(ot===0)return ee.pathSector(2*Oe);var at,$e,gt=it(ot,je),yt=it(ot,Ue),xt=Le((gt[0]+yt[0])/2),dt=Le((gt[1]+yt[1])/2);if(xt&&dt){var Lt=dt/xt,Tt=-1/Lt,bt=we(Oe,Lt,xt,dt);at=we(Fe,Tt,bt[0][0],bt[0][1]),$e=we(Fe,Tt,bt[1][0],bt[1][1])}else{var Ct,Dt;dt?(Ct=Fe,Dt=Oe):(Ct=Oe,Dt=Fe),at=[[xt-Ct,dt-Dt],[xt+Ct,dt-Dt]],$e=[[xt-Ct,dt+Dt],[xt+Ct,dt+Dt]]}return"M"+at.join("L")+"L"+$e.reverse().join("L")+"Z"}function zt(ot,je){return je=Math.max(Math.min(je,xe),_e),ot<ve?ot=0:xe-ot<ve?ot=xe:je<ve?je=0:xe-je<ve&&(je=xe),Math.abs(je-ot)>ge?(ot<je?(De=ot,Ne=je):(De=je,Ne=ot),!0):(De=null,Ne=null,!1)}function Ft(ot,je){ot=ot||Be,je=je||"M0,0Z",et.attr("d",ot),ft.attr("d",je),u.transitionZoombox(et,ft,Ye,We),Ye=!0;var Ue={};Je(Ue),ae.emit("plotly_relayouting",Ue)}function Pt(ot,je){var Ue,at,$e=be+(ot*=X),gt=Me+(je*=K),yt=Mt(be,Me),xt=Math.min(Mt($e,gt),xe),dt=_t(be,Me);zt(yt,xt)&&(Ue=Be+ee.pathSector(Ne),De&&(Ue+=ee.pathSector(De)),at=st(De,dt)+st(Ne,dt)),Ft(Ue,at)}function Xe(ot,je,Ue,at){var $e=M.findIntersectionXY(Ue,at,Ue,[ot-ke,Te-je]);return mt($e[0],$e[1])}function Ke(ot,je){var Ue,at,$e=be+ot,gt=Me+je,yt=_t(be,Me),xt=_t($e,gt),dt=Ee(yt,ue),Lt=Ee(xt,ue);zt(Xe(be,Me,dt[0],dt[1]),Math.min(Xe($e,gt,Lt[0],Lt[1]),xe))&&(Ue=Be+ee.pathSector(Ne),De&&(Ue+=ee.pathSector(De)),at=[St(De,dt[0],dt[1]),St(Ne,dt[0],dt[1])].join(" ")),Ft(Ue,at)}function He(){if(u.removeZoombox(ae),De!==null&&Ne!==null){var ot={};Je(ot),u.showDoubleClickNotifier(ae),i.call("_guiRelayout",ae,ot)}}function Je(ot){var je=de._rl,Ue=(je[1]-je[0])/(1-_e/xe)/xe,at=[je[0]+(De-_e)*Ue,je[0]+(Ne-_e)*Ue];ot[ee.id+".radialaxis.range"]=at}function lt(ot,je){var Ue=ae._fullLayout.clickmode;if(u.removeZoombox(ae),ot===2){var at={};for(var $e in ee.viewInitial)at[ee.id+"."+$e]=ee.viewInitial[$e];ae.emit("plotly_doubleclick",null),i.call("_guiRelayout",ae,at)}Ue.indexOf("select")>-1&&ot===1&&d(je,ae,[ee.xaxis],[ee.yaxis],ee.id,ht),Ue.indexOf("event")>-1&&c.click(ae,je,ee.id)}ht.prepFn=function(ot,je,Ue){var at=ae._fullLayout.dragmode,$e=pe.getBoundingClientRect();ae._fullLayout._calcInverseTransform(ae);var gt=ae._fullLayout._invTransform;X=ae._fullLayout._invScaleX,K=ae._fullLayout._invScaleY;var yt=_.apply3DTransform(gt)(je-$e.left,Ue-$e.top);if(be=yt[0],Me=yt[1],ue){var xt=M.findPolygonOffset(xe,le[0],le[1],ue);be+=ke+xt[0],Me+=Te+xt[1]}switch(at){case"zoom":ht.clickFn=lt,ie||(ht.moveFn=ue?Ke:Pt,ht.doneFn=He,function(){De=null,Ne=null,Be=ee.pathSubplot(),Ye=!1;var dt=ae._fullLayout[ee.id];We=w(dt.bgcolor).getLuminance(),(et=u.makeZoombox(fe,We,ye,Ce,Be)).attr("fill-rule","evenodd"),ft=u.makeCorners(fe,ye,Ce),m(ae)}());break;case"select":case"lasso":g(ot,je,Ue,ht,at)}},p.init(ht)},V.updateRadialDrag=function(J,X,K){var ee=this,ie=ee.gd,ae=ee.layers,oe=ee.radius,fe=ee.innerRadius,ge=ee.cx,ve=ee.cy,xe=ee.radialAxis,_e=S.radialDragBoxSize,ye=_e/2;if(xe.visible){var Ce,ke,Te,le=j(ee.radialAxisAngle),ue=xe._rl,de=ue[0],Le=ue[1],we=ue[K],Ee=.75*(ue[1]-ue[0])/(1-ee.getHole(X))/oe;K?(Ce=ge+(oe+ye)*Math.cos(le),ke=ve-(oe+ye)*Math.sin(le),Te="radialdrag"):(Ce=ge+(fe-ye)*Math.cos(le),ke=ve-(fe-ye)*Math.sin(le),Te="radialdrag-inner");var Oe,Fe,pe,be=u.makeRectDragger(ae,Te,"crosshair",-ye,-ye,_e,_e),Me={element:be,gd:ie};J.dragmode===!1&&(Me.dragmode=!1),$(T.select(be),xe.visible&&fe<oe,{transform:h(Ce,ke)}),Me.prepFn=function(){Oe=null,Fe=null,pe=null,Me.moveFn=De,Me.doneFn=Ne,m(ie)},Me.clampFn=function(We,et){return Math.sqrt(We*We+et*et)<S.MINDRAG&&(We=0,et=0),[We,et]},p.init(Me)}function De(We,et){if(Oe)Oe(We,et);else{var ft=[We,-et],ht=[Math.cos(le),Math.sin(le)],mt=Math.abs(_.dot(ft,ht)/Math.sqrt(_.dot(ft,ft)));isNaN(mt)||(Oe=mt<.5?Be:Ye)}var Mt={};(function(_t){Fe!==null?_t[ee.id+".radialaxis.angle"]=Fe:pe!==null&&(_t[ee.id+".radialaxis.range["+K+"]"]=pe)})(Mt),ie.emit("plotly_relayouting",Mt)}function Ne(){Fe!==null?i.call("_guiRelayout",ie,ee.id+".radialaxis.angle",Fe):pe!==null&&i.call("_guiRelayout",ie,ee.id+".radialaxis.range["+K+"]",pe)}function Be(We,et){if(K!==0){var ft=Ce+We,ht=ke+et;Fe=Math.atan2(ve-ht,ft-ge),ee.vangles&&(Fe=te(Fe,ee.vangles)),Fe=Z(Fe);var mt=h(ge,ve)+v(-Fe);ae["radial-axis"].attr("transform",mt),ae["radial-line"].select("line").attr("transform",mt);var Mt=ee.gd._fullLayout,_t=Mt[ee.id];ee.updateRadialAxisTitle(Mt,_t,Fe)}}function Ye(We,et){var ft=_.dot([We,-et],[Math.cos(le),Math.sin(le)]);if(pe=we-Ee*ft,Ee>0==(K?pe>de:pe<Le)){var ht=ie._fullLayout,mt=ht[ee.id];xe.range[K]=pe,xe._rl[K]=pe,ee.updateRadialAxis(ht,mt),ee.xaxis.setRange(),ee.xaxis.setScale(),ee.yaxis.setRange(),ee.yaxis.setScale();var Mt=!1;for(var _t in ee.traceHash){var it=ee.traceHash[_t],st=_.filterVisible(it);it[0][0].trace._module.plot(ie,ee,st,mt),i.traceIs(_t,"gl")&&st.length&&(Mt=!0)}Mt&&(y(ie),k(ie))}else pe=null}},V.updateAngularDrag=function(J){var X=this,K=X.gd,ee=X.layers,ie=X.radius,ae=X.angularAxis,oe=X.cx,fe=X.cy,ge=X.cxx,ve=X.cyy,xe=S.angularDragBoxSize,_e=u.makeDragger(ee,"path","angulardrag",J.dragmode===!1?"none":"move"),ye={element:_e,gd:K};function Ce(Me,De){return Math.atan2(ve+xe-De,Me-ge-xe)}J.dragmode===!1?ye.dragmode=!1:T.select(_e).attr("d",X.pathAnnulus(ie,ie+xe)).attr("transform",h(oe,fe)).call(x,"move");var ke,Te,le,ue,de,Le,we=ee.frontplot.select(".scatterlayer").selectAll(".trace"),Ee=we.selectAll(".point"),Oe=we.selectAll(".textpoint");function Fe(Me,De){var Ne=X.gd._fullLayout,Be=Ne[X.id],Ye=Ce(ke+Me*J._invScaleX,Te+De*J._invScaleY),We=Z(Ye-Le);if(ue=le+We,ee.frontplot.attr("transform",h(X.xOffset2,X.yOffset2)+v([-We,ge,ve])),X.vangles){de=X.radialAxisAngle+We;var et=h(oe,fe)+v(-We),ft=h(oe,fe)+v(-de);ee.bg.attr("transform",et),ee["radial-grid"].attr("transform",et),ee["radial-axis"].attr("transform",ft),ee["radial-line"].select("line").attr("transform",ft),X.updateRadialAxisTitle(Ne,Be,de)}else X.clipPaths.forTraces.select("path").attr("transform",h(ge,ve)+v(We));Ee.each(function(){var st=T.select(this),St=t.getTranslate(st);st.attr("transform",h(St.x,St.y)+v([We]))}),Oe.each(function(){var st=T.select(this),St=st.select("text"),zt=t.getTranslate(st);st.attr("transform",v([We,St.attr("x"),St.attr("y")])+h(zt.x,zt.y))}),ae.rotation=_.modHalf(ue,360),X.updateAngularAxis(Ne,Be),X._hasClipOnAxisFalse&&!_.isFullCircle(X.sectorInRad)&&we.call(t.hideOutsideRangePoints,X);var ht=!1;for(var mt in X.traceHash)if(i.traceIs(mt,"gl")){var Mt=X.traceHash[mt],_t=_.filterVisible(Mt);Mt[0][0].trace._module.plot(K,X,_t,Be),_t.length&&(ht=!0)}ht&&(y(K),k(K));var it={};pe(it),K.emit("plotly_relayouting",it)}function pe(Me){Me[X.id+".angularaxis.rotation"]=ue,X.vangles&&(Me[X.id+".radialaxis.angle"]=de)}function be(){Oe.select("text").attr("transform",null);var Me={};pe(Me),i.call("_guiRelayout",K,Me)}ye.prepFn=function(Me,De,Ne){var Be=J[X.id];le=Be.angularaxis.rotation;var Ye=_e.getBoundingClientRect();ke=De-Ye.left,Te=Ne-Ye.top,K._fullLayout._calcInverseTransform(K);var We=_.apply3DTransform(J._invTransform)(ke,Te);ke=We[0],Te=We[1],Le=Ce(ke,Te),ye.moveFn=Fe,ye.doneFn=be,m(K)},X.vangles&&!_.isFullCircle(X.sectorInRad)&&(ye.prepFn=_.noop,x(T.select(_e),null)),p.init(ye)},V.isPtInside=function(J){if(this.isSmith)return!0;var X=this.sectorInRad,K=this.vangles,ee=this.angularAxis.c2g(J.theta),ie=this.radialAxis,ae=ie.c2l(J.r),oe=ie._rl;return(K?M.isPtInsidePolygon:_.isPtInsideSector)(ae,ee,oe,X,K)},V.pathArc=function(J){var X=this.sectorInRad,K=this.vangles;return(K?M.pathPolygon:_.pathArc)(J,X[0],X[1],K)},V.pathSector=function(J){var X=this.sectorInRad,K=this.vangles;return(K?M.pathPolygon:_.pathSector)(J,X[0],X[1],K)},V.pathAnnulus=function(J,X){var K=this.sectorInRad,ee=this.vangles;return(ee?M.pathPolygonAnnulus:_.pathAnnulus)(J,X,K[0],K[1],ee)},V.pathSubplot=function(){var J=this.innerRadius,X=this.radius;return J?this.pathAnnulus(J,X):this.pathSector(X)},V.fillViewInitialKey=function(J,X){J in this.viewInitial||(this.viewInitial[J]=X)}},12101:function(N,L,e){var T=e(71828),w=e(21994),i=T.deg2rad,_=T.rad2deg;N.exports=function(v,h,s){switch(w(v,s),v._id){case"x":case"radialaxis":(function(t,a){var n=a._subplot;t.setGeometry=function(){var r=t._rl[0],l=t._rl[1],o=n.innerRadius,u=(n.radius-o)/(l-r),p=o/u,c=r>l?function(b){return b<=0}:function(b){return b>=0};t.c2g=function(b){var g=t.c2l(b)-r;return(c(g)?g:0)+p},t.g2c=function(b){return t.l2c(b+r-p)},t.g2p=function(b){return b*u},t.c2p=function(b){return t.g2p(t.c2g(b))}}})(v,h);break;case"angularaxis":(function(t,a){var n=t.type;if(n==="linear"){var r=t.d2c,l=t.c2d;t.d2c=function(o,u){return function(p,c){return c==="degrees"?i(p):p}(r(o),u)},t.c2d=function(o,u){return l(function(p,c){return c==="degrees"?_(p):p}(o,u))}}t.makeCalcdata=function(o,u){var p,c,b=o[u],g=o._length,d=function(f){return t.d2c(f,o.thetaunit)};if(b)for(p=new Array(g),c=0;c<g;c++)p[c]=d(b[c]);else{var m=u+"0",x="d"+u,y=m in o?d(o[m]):0,k=o[x]?d(o[x]):(t.period||2*Math.PI)/g;for(p=new Array(g),c=0;c<g;c++)p[c]=y+c*k}return p},t.setGeometry=function(){var o,u,p,c,b=a.sector,g=b.map(i),d={clockwise:-1,counterclockwise:1}[t.direction],m=i(t.rotation),x=function(S){return d*S+m},y=function(S){return(S-m)/d};switch(n){case"linear":u=o=T.identity,c=i,p=_,t.range=T.isFullCircle(g)?[b[0],b[0]+360]:g.map(y).map(_);break;case"category":var k=t._categories.length,f=t.period?Math.max(t.period,k):k;f===0&&(f=1),u=c=function(S){return 2*S*Math.PI/f},o=p=function(S){return S*f/Math.PI/2},t.range=[0,f]}t.c2g=function(S){return x(u(S))},t.g2c=function(S){return o(y(S))},t.t2g=function(S){return x(c(S))},t.g2t=function(S){return p(y(S))}}})(v,h)}}},39779:function(N){N.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(N){function L(i){return i<0?-1:i>0?1:0}function e(i){var _=i[0],v=i[1];if(!isFinite(_)||!isFinite(v))return[1,0];var h=(_+1)*(_+1)+v*v;return[(_*_+v*v-1)/h,2*v/h]}function T(i,_){var v=_[0],h=_[1];return[v*i.radius+i.cx,-h*i.radius+i.cy]}function w(i,_){return _*i.radius}N.exports={smith:e,reactanceArc:function(i,_,v,h){var s=T(i,e([v,_])),t=s[0],a=s[1],n=T(i,e([h,_])),r=n[0],l=n[1];if(_===0)return["M"+t+","+a,"L"+r+","+l].join(" ");var o=w(i,1/Math.abs(_));return["M"+t+","+a,"A"+o+","+o+" 0 0,"+(_<0?1:0)+" "+r+","+l].join(" ")},resistanceArc:function(i,_,v,h){var s=w(i,1/(_+1)),t=T(i,e([_,v])),a=t[0],n=t[1],r=T(i,e([_,h])),l=r[0],o=r[1];if(L(v)!==L(h)){var u=T(i,e([_,0]));return["M"+a+","+n,"A"+s+","+s+" 0 0,"+(0<v?0:1)+" "+u[0]+","+u[1],"A"+s+","+s+" 0 0,"+(h<0?0:1)+l+","+o].join(" ")}return["M"+a+","+n,"A"+s+","+s+" 0 0,"+(h<v?0:1)+" "+l+","+o].join(" ")},smithTransform:T}},7504:function(N,L,e){var T=e(27659).AU,w=e(71828).counterRegex,i=e(77997),_=e(39779),v=_.attr,h=_.name,s=w(h),t={};t[v]={valType:"subplotid",dflt:h,editType:"calc"},N.exports={attr:v,name:h,idRoot:h,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(33419),supplyLayoutDefaults:e(9558),plot:function(a){for(var n=a._fullLayout,r=a.calcdata,l=n._subplots[h],o=0;o<l.length;o++){var u=l[o],p=T(r,h,u),c=n[u]._subplot;c||(c=i(a,u,!0),n[u]._subplot=c),c.plot(p,n,a._promises)}},clean:function(a,n,r,l){for(var o=l._subplots[h]||[],u=0;u<o.length;u++){var p=o[u],c=l[p]._subplot;if(!n[p]&&c)for(var b in c.framework.remove(),c.clipPaths)c.clipPaths[b].remove()}},toSVG:e(93612).toSVG}},33419:function(N,L,e){var T=e(22399),w=e(13838),i=e(27670).Y,_=e(71828).extendFlat,v=e(30962).overrideAll,h=v({color:w.color,showline:_({},w.showline,{dflt:!0}),linecolor:w.linecolor,linewidth:w.linewidth,showgrid:_({},w.showgrid,{dflt:!0}),gridcolor:w.gridcolor,gridwidth:w.gridwidth,griddash:w.griddash},"plot","from-root"),s=v({ticklen:w.ticklen,tickwidth:_({},w.tickwidth,{dflt:2}),tickcolor:w.tickcolor,showticklabels:w.showticklabels,labelalias:w.labelalias,showtickprefix:w.showtickprefix,tickprefix:w.tickprefix,showticksuffix:w.showticksuffix,ticksuffix:w.ticksuffix,tickfont:w.tickfont,tickformat:w.tickformat,hoverformat:w.hoverformat,layer:w.layer},"plot","from-root"),t=_({visible:_({},w.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:_({},w.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},h,s),a=_({visible:_({},w.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:w.ticks,editType:"calc"},h,s);N.exports={domain:i({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:T.background},realaxis:t,imaginaryaxis:a,editType:"calc"}},9558:function(N,L,e){var T,w,i,_=e(71828),v=e(7901),h=e(44467),s=e(49119),t=e(27659).NG,a=e(89426),n=e(96115),r=e(92128),l=e(21994),o=e(33419),u=e(39779),p=u.axisNames,c=(T=function(g){return _.isTypedArray(g)&&(g=Array.from(g)),g.slice().reverse().map(function(d){return-d}).concat([0]).concat(g)},w=String,i={},function(g){var d=w?w(g):g;if(d in i)return i[d];var m=T(g);return i[d]=m,m});function b(g,d,m,x){var y=m("bgcolor");x.bgColor=v.combine(y,x.paper_bgcolor);var k,f=t(x.fullData,u.name,x.id),S=x.layoutOut;function M(V,H){return m(k+"."+V,H)}for(var E=0;E<p.length;E++){k=p[E],_.isPlainObject(g[k])||(g[k]={});var O=g[k],P=h.newContainer(d,k);P._id=P._name=k,P._attr=x.id+"."+k,P._traceIndices=f.map(function(V){return V._expandedIndex});var I=M("visible");if(P.type="linear",l(P,S),a(O,P,M,P.type),I){var z,U,R,j,Z=k==="realaxis";Z&&M("side"),Z?M("tickvals"):M("tickvals",c(d.realaxis.tickvals||o.realaxis.tickvals.dflt)),_.isTypedArray(P.tickvals)&&(P.tickvals=Array.from(P.tickvals));var F=x.font||{};I&&(U=(z=M("color"))===O.color?z:F.color,R=F.size,j=F.family),n(O,P,M,P.type,{noTicklabelstep:!0,noAng:!Z,noExp:!0,font:{color:U,size:R,family:j}}),_.coerce2(g,d,o,k+".ticklen"),_.coerce2(g,d,o,k+".tickwidth"),_.coerce2(g,d,o,k+".tickcolor",d.color),M("ticks")||(delete d[k].ticklen,delete d[k].tickwidth,delete d[k].tickcolor),r(O,P,M,{dfltColor:z,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o[k]}),M("layer")}M("hoverformat"),delete P.type,P._input=O}}N.exports=function(g,d,m){s(g,d,m,{noUirevision:!0,type:u.name,attributes:o,handleDefaults:b,font:d.font,paper_bgcolor:d.paper_bgcolor,fullData:m,layoutOut:d})}},49119:function(N,L,e){var T=e(71828),w=e(44467),i=e(27670).c;N.exports=function(_,v,h,s){var t,a,n=s.type,r=s.attributes,l=s.handleDefaults,o=s.partition||"x",u=v._subplots[n],p=u.length,c=p&&u[0].replace(/\d+$/,"");function b(x,y){return T.coerce(t,a,r,x,y)}for(var g=0;g<p;g++){var d=u[g];t=_[d]?_[d]:_[d]={},a=w.newContainer(v,d,c),s.noUirevision||b("uirevision",v.uirevision);var m={};m[o]=[g/p,(g+1)/p],i(a,v,b,m),s.id=d,l(t,a,b,s)}}},5386:function(N,L,e){var T=e(31562);function w(i){var _=i.description?" "+i.description:"",v=i.keys||[];if(v.length>0){for(var h=[],s=0;s<v.length;s++)h[s]="`"+v[s]+"`";_+="Finally, the template string has access to ",_=v.length===1?_+"variable "+h[0]:_+"variables "+h.slice(0,-1).join(", ")+" and "+h.slice(-1)+"."}return _}T.FORMAT_LINK,T.DATE_FORMAT_LINK,L.fF=function(i,_){i=i||{},w(_=_||{});var v={valType:"string",dflt:"",editType:i.editType||"none"};return i.arrayOk!==!1&&(v.arrayOk=!0),v},L.si=function(i,_){i=i||{},w(_=_||{});var v={valType:"string",dflt:"",editType:i.editType||"calc"};return i.arrayOk!==!1&&(v.arrayOk=!0),v},L.R=function(i,_){return _=_||{},(i=i||{}).newshape,w(_),{valType:"string",dflt:"",editType:i.editType||"arraydraw"}}},61639:function(N,L,e){var T=e(64380),w=e(27659).AU,i=e(71828).counterRegex,_="ternary";L.name=_;var v=L.attr="subplot";L.idRoot=_,L.idRegex=L.attrRegex=i(_),(L.attributes={})[v]={valType:"subplotid",dflt:"ternary",editType:"calc"},L.layoutAttributes=e(81367),L.supplyLayoutDefaults=e(25369),L.plot=function(h){for(var s=h._fullLayout,t=h.calcdata,a=s._subplots[_],n=0;n<a.length;n++){var r=a[n],l=w(t,_,r),o=s[r]._subplot;o||(o=new T({id:r,graphDiv:h,container:s._ternarylayer.node()},s),s[r]._subplot=o),o.plot(l,s,h._promises)}},L.clean=function(h,s,t,a){for(var n=a._subplots[_]||[],r=0;r<n.length;r++){var l=n[r],o=a[l]._subplot;!s[l]&&o&&(o.plotContainer.remove(),o.clipDef.remove(),o.clipDefRelative.remove(),o.layers["a-title"].remove(),o.layers["b-title"].remove(),o.layers["c-title"].remove())}}},81367:function(N,L,e){var T=e(22399),w=e(27670).Y,i=e(13838),_=e(30962).overrideAll,v=e(1426).extendFlat,h={title:{text:i.title.text,font:i.title.font},color:i.color,tickmode:i.minor.tickmode,nticks:v({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,labelalias:i.labelalias,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:v({},i.showline,{dflt:!0}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:v({},i.showgrid,{dflt:!0}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,griddash:i.griddash,layer:i.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},s=N.exports=_({domain:w({name:"ternary"}),bgcolor:{valType:"color",dflt:T.background},sum:{valType:"number",dflt:1,min:0},aaxis:h,baxis:h,caxis:h},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},25369:function(N,L,e){var T=e(7901),w=e(44467),i=e(71828),_=e(49119),v=e(96115),h=e(89426),s=e(38701),t=e(26218),a=e(92128),n=e(81367),r=["aaxis","baxis","caxis"];function l(u,p,c,b){var g,d,m,x=c("bgcolor"),y=c("sum");b.bgColor=T.combine(x,b.paper_bgcolor);for(var k=0;k<r.length;k++)d=u[g=r[k]]||{},(m=w.newContainer(p,g))._name=g,o(d,m,b,p);var f=p.aaxis,S=p.baxis,M=p.caxis;f.min+S.min+M.min>=y&&(f.min=0,S.min=0,M.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function o(u,p,c,b){var g=n[p._name];function d(S,M){return i.coerce(u,p,g,S,M)}d("uirevision",b.uirevision),p.type="linear";var m=d("color"),x=m!==g.color.dflt?m:c.font.color,y=p._name.charAt(0).toUpperCase(),k="Component "+y,f=d("title.text",k);p._hovertitle=f===k?f:y,i.coerceFont(d,"title.font",{family:c.font.family,size:i.bigFont(c.font.size),color:x}),d("min"),t(u,p,d,"linear"),h(u,p,d,"linear"),v(u,p,d,"linear"),s(u,p,d,{outerTicks:!0}),d("showticklabels")&&(i.coerceFont(d,"tickfont",{family:c.font.family,size:c.font.size,color:x}),d("tickangle"),d("tickformat")),a(u,p,d,{dfltColor:m,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g}),d("hoverformat"),d("layer")}N.exports=function(u,p,c){_(u,p,c,{type:"ternary",attributes:n,handleDefaults:l,font:p.font,paper_bgcolor:p.paper_bgcolor})}},64380:function(N,L,e){var T=e(39898),w=e(84267),i=e(73972),_=e(71828),v=_.strTranslate,h=_._,s=e(7901),t=e(91424),a=e(21994),n=e(1426).extendFlat,r=e(74875),l=e(89298),o=e(28569),u=e(30211),p=e(64505),c=p.freeMode,b=p.rectMode,g=e(92998),d=e(47322).prepSelect,m=e(47322).selectOnClick,x=e(47322).clearOutline,y=e(47322).clearSelectionsCache,k=e(85555);function f(R,j){this.id=R.id,this.graphDiv=R.graphDiv,this.init(j),this.makeFramework(j),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}N.exports=f;var S=f.prototype;S.init=function(R){this.container=R._ternarylayer,this.defs=R._defs,this.layoutId=R._uid,this.traceHash={},this.layers={}},S.plot=function(R,j){var Z=this,F=j[Z.id],V=j._size;Z._hasClipOnAxisFalse=!1;for(var H=0;H<R.length;H++)if(R[H][0].trace.cliponaxis===!1){Z._hasClipOnAxisFalse=!0;break}Z.updateLayers(F),Z.adjustLayout(F,V),r.generalUpdatePerTraceModule(Z.graphDiv,Z,R,F),Z.layers.plotbg.select("path").call(s.fill,F.bgcolor)},S.makeFramework=function(R){var j=this,Z=j.graphDiv,F=R[j.id],V=j.clipId="clip"+j.layoutId+j.id,H=j.clipIdRelative="clip-relative"+j.layoutId+j.id;j.clipDef=_.ensureSingleById(R._clips,"clipPath",V,function(te){te.append("path").attr("d","M0,0Z")}),j.clipDefRelative=_.ensureSingleById(R._clips,"clipPath",H,function(te){te.append("path").attr("d","M0,0Z")}),j.plotContainer=_.ensureSingle(j.container,"g",j.id),j.updateLayers(F),t.setClipUrl(j.layers.backplot,V,Z),t.setClipUrl(j.layers.grids,V,Z)},S.updateLayers=function(R){var j=this.layers,Z=["draglayer","plotbg","backplot","grids"];R.aaxis.layer==="below traces"&&Z.push("aaxis","aline"),R.baxis.layer==="below traces"&&Z.push("baxis","bline"),R.caxis.layer==="below traces"&&Z.push("caxis","cline"),Z.push("frontplot"),R.aaxis.layer==="above traces"&&Z.push("aaxis","aline"),R.baxis.layer==="above traces"&&Z.push("baxis","bline"),R.caxis.layer==="above traces"&&Z.push("caxis","cline");var F=this.plotContainer.selectAll("g.toplevel").data(Z,String),V=["agrid","bgrid","cgrid"];F.enter().append("g").attr("class",function(H){return"toplevel "+H}).each(function(H){var te=T.select(this);j[H]=te,H==="frontplot"?te.append("g").classed("scatterlayer",!0):H==="backplot"?te.append("g").classed("maplayer",!0):H==="plotbg"?te.append("path").attr("d","M0,0Z"):H==="aline"||H==="bline"||H==="cline"?te.append("path"):H==="grids"&&V.forEach(function($){j[$]=te.append("g").classed("grid "+$,!0)})}),F.order()};var M=Math.sqrt(4/3);S.adjustLayout=function(R,j){var Z,F,V,H,te,$,J=this,X=R.domain,K=(X.x[0]+X.x[1])/2,ee=(X.y[0]+X.y[1])/2,ie=X.x[1]-X.x[0],ae=X.y[1]-X.y[0],oe=ie*j.w,fe=ae*j.h,ge=R.sum,ve=R.aaxis.min,xe=R.baxis.min,_e=R.caxis.min;oe>M*fe?V=(H=fe)*M:H=(V=oe)/M,te=ie*V/oe,$=ae*H/fe,Z=j.l+j.w*K-V/2,F=j.t+j.h*(1-ee)-H/2,J.x0=Z,J.y0=F,J.w=V,J.h=H,J.sum=ge,J.xaxis={type:"linear",range:[ve+2*_e-ge,ge-ve-2*xe],domain:[K-te/2,K+te/2],_id:"x"},a(J.xaxis,J.graphDiv._fullLayout),J.xaxis.setScale(),J.xaxis.isPtWithinRange=function(Oe){return Oe.a>=J.aaxis.range[0]&&Oe.a<=J.aaxis.range[1]&&Oe.b>=J.baxis.range[1]&&Oe.b<=J.baxis.range[0]&&Oe.c>=J.caxis.range[1]&&Oe.c<=J.caxis.range[0]},J.yaxis={type:"linear",range:[ve,ge-xe-_e],domain:[ee-$/2,ee+$/2],_id:"y"},a(J.yaxis,J.graphDiv._fullLayout),J.yaxis.setScale(),J.yaxis.isPtWithinRange=function(){return!0};var ye=J.yaxis.domain[0],Ce=J.aaxis=n({},R.aaxis,{range:[ve,ge-xe-_e],side:"left",tickangle:(+R.aaxis.tickangle||0)-30,domain:[ye,ye+$*M],anchor:"free",position:0,_id:"y",_length:V});a(Ce,J.graphDiv._fullLayout),Ce.setScale();var ke=J.baxis=n({},R.baxis,{range:[ge-ve-_e,xe],side:"bottom",domain:J.xaxis.domain,anchor:"free",position:0,_id:"x",_length:V});a(ke,J.graphDiv._fullLayout),ke.setScale();var Te=J.caxis=n({},R.caxis,{range:[ge-ve-xe,_e],side:"right",tickangle:(+R.caxis.tickangle||0)+30,domain:[ye,ye+$*M],anchor:"free",position:0,_id:"y",_length:V});a(Te,J.graphDiv._fullLayout),Te.setScale();var le="M"+Z+","+(F+H)+"h"+V+"l-"+V/2+",-"+H+"Z";J.clipDef.select("path").attr("d",le),J.layers.plotbg.select("path").attr("d",le);var ue="M0,"+H+"h"+V+"l-"+V/2+",-"+H+"Z";J.clipDefRelative.select("path").attr("d",ue);var de=v(Z,F);J.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",de),J.clipDefRelative.select("path").attr("transform",null);var Le=v(Z-ke._offset,F+H);J.layers.baxis.attr("transform",Le),J.layers.bgrid.attr("transform",Le);var we=v(Z+V/2,F)+"rotate(30)"+v(0,-Ce._offset);J.layers.aaxis.attr("transform",we),J.layers.agrid.attr("transform",we);var Ee=v(Z+V/2,F)+"rotate(-30)"+v(0,-Te._offset);J.layers.caxis.attr("transform",Ee),J.layers.cgrid.attr("transform",Ee),J.drawAxes(!0),J.layers.aline.select("path").attr("d",Ce.showline?"M"+Z+","+(F+H)+"l"+V/2+",-"+H:"M0,0").call(s.stroke,Ce.linecolor||"#000").style("stroke-width",(Ce.linewidth||0)+"px"),J.layers.bline.select("path").attr("d",ke.showline?"M"+Z+","+(F+H)+"h"+V:"M0,0").call(s.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),J.layers.cline.select("path").attr("d",Te.showline?"M"+(Z+V/2)+","+F+"l"+V/2+","+H:"M0,0").call(s.stroke,Te.linecolor||"#000").style("stroke-width",(Te.linewidth||0)+"px"),J.graphDiv._context.staticPlot||J.initInteractions(),t.setClipUrl(J.layers.frontplot,J._hasClipOnAxisFalse?null:J.clipId,J.graphDiv)},S.drawAxes=function(R){var j=this,Z=j.graphDiv,F=j.id.substr(7)+"title",V=j.layers,H=j.aaxis,te=j.baxis,$=j.caxis;if(j.drawAx(H),j.drawAx(te),j.drawAx($),R){var J=Math.max(H.showticklabels?H.tickfont.size/2:0,($.showticklabels?.75*$.tickfont.size:0)+($.ticks==="outside"?.87*$.ticklen:0)),X=(te.showticklabels?te.tickfont.size:0)+(te.ticks==="outside"?te.ticklen:0)+3;V["a-title"]=g.draw(Z,"a"+F,{propContainer:H,propName:j.id+".aaxis.title",placeholder:h(Z,"Click to enter Component A title"),attributes:{x:j.x0+j.w/2,y:j.y0-H.title.font.size/3-J,"text-anchor":"middle"}}),V["b-title"]=g.draw(Z,"b"+F,{propContainer:te,propName:j.id+".baxis.title",placeholder:h(Z,"Click to enter Component B title"),attributes:{x:j.x0-X,y:j.y0+j.h+.83*te.title.font.size+X,"text-anchor":"middle"}}),V["c-title"]=g.draw(Z,"c"+F,{propContainer:$,propName:j.id+".caxis.title",placeholder:h(Z,"Click to enter Component C title"),attributes:{x:j.x0+j.w+X,y:j.y0+j.h+.83*$.title.font.size+X,"text-anchor":"middle"}})}},S.drawAx=function(R){var j,Z=this,F=Z.graphDiv,V=R._name,H=V.charAt(0),te=R._id,$=Z.layers[V],J=H+"tickLayout",X=(j=R).ticks+String(j.ticklen)+String(j.showticklabels);Z[J]!==X&&($.selectAll("."+te+"tick").remove(),Z[J]=X),R.setScale();var K=l.calcTicks(R),ee=l.clipEnds(R,K),ie=l.makeTransTickFn(R),ae=l.getTickSigns(R)[2],oe=_.deg2rad(30),fe=ae*(R.linewidth||1)/2,ge=ae*R.ticklen,ve=Z.w,xe=Z.h,_e=H==="b"?"M0,"+fe+"l"+Math.sin(oe)*ge+","+Math.cos(oe)*ge:"M"+fe+",0l"+Math.cos(oe)*ge+","+-Math.sin(oe)*ge,ye={a:"M0,0l"+xe+",-"+ve/2,b:"M0,0l-"+ve/2+",-"+xe,c:"M0,0l-"+xe+","+ve/2}[H];l.drawTicks(F,R,{vals:R.ticks==="inside"?ee:K,layer:$,path:_e,transFn:ie,crisp:!1}),l.drawGrid(F,R,{vals:ee,layer:Z.layers[H+"grid"],path:ye,transFn:ie,crisp:!1}),l.drawLabels(F,R,{vals:K,layer:$,transFn:ie,labelFns:l.makeLabelFns(R,0,30)})};var E=k.MINZOOM/2+.87,O="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",P="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",I="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",z=!0;function U(R){T.select(R).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){y(this.dragOptions),x(this.dragOptions.gd)},S.initInteractions=function(){var R,j,Z,F,V,H,te,$,J,X,K,ee,ie=this,ae=ie.layers.plotbg.select("path").node(),oe=ie.graphDiv,fe=oe._fullLayout._zoomlayer;function ge(ue){var de={};return de[ie.id+".aaxis.min"]=ue.a,de[ie.id+".baxis.min"]=ue.b,de[ie.id+".caxis.min"]=ue.c,de}function ve(ue,de){var Le=oe._fullLayout.clickmode;U(oe),ue===2&&(oe.emit("plotly_doubleclick",null),i.call("_guiRelayout",oe,ge({a:0,b:0,c:0}))),Le.indexOf("select")>-1&&ue===1&&m(de,oe,[ie.xaxis],[ie.yaxis],ie.id,ie.dragOptions),Le.indexOf("event")>-1&&u.click(oe,de,ie.id)}function xe(ue,de){return 1-de/ie.h}function _e(ue,de){return 1-(ue+(ie.h-de)/Math.sqrt(3))/ie.w}function ye(ue,de){return(ue-(ie.h-de)/Math.sqrt(3))/ie.w}function Ce(ue,de){var Le=Z+ue*R,we=F+de*j,Ee=Math.max(0,Math.min(1,xe(0,F),xe(0,we))),Oe=Math.max(0,Math.min(1,_e(Z,F),_e(Le,we))),Fe=Math.max(0,Math.min(1,ye(Z,F),ye(Le,we))),pe=(Ee/2+Fe)*ie.w,be=(1-Ee/2-Oe)*ie.w,Me=(pe+be)/2,De=be-pe,Ne=(1-Ee)*ie.h,Be=Ne-De/M;De<k.MINZOOM?(te=V,K.attr("d",J),ee.attr("d","M0,0Z")):(te={a:V.a+Ee*H,b:V.b+Oe*H,c:V.c+Fe*H},K.attr("d",J+"M"+pe+","+Ne+"H"+be+"L"+Me+","+Be+"L"+pe+","+Ne+"Z"),ee.attr("d","M"+Z+","+F+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+pe+","+Ne+O+"M"+be+","+Ne+P+"M"+Me+","+Be+I)),X||(K.transition().style("fill",$>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ee.transition().style("opacity",1).duration(200),X=!0),oe.emit("plotly_relayouting",ge(te))}function ke(){U(oe),te!==V&&(i.call("_guiRelayout",oe,ge(te)),z&&oe.data&&oe._context.showTips&&(_.notifier(h(oe,"Double-click to zoom back out"),"long"),z=!1))}function Te(ue,de){var Le=ue/ie.xaxis._m,we=de/ie.yaxis._m,Ee=[(te={a:V.a-we,b:V.b+(Le+we)/2,c:V.c-(Le-we)/2}).a,te.b,te.c].sort(_.sorterAsc),Oe=Ee.indexOf(te.a),Fe=Ee.indexOf(te.b),pe=Ee.indexOf(te.c);Ee[0]<0&&(Ee[1]+Ee[0]/2<0?(Ee[2]+=Ee[0]+Ee[1],Ee[0]=Ee[1]=0):(Ee[2]+=Ee[0]/2,Ee[1]+=Ee[0]/2,Ee[0]=0),te={a:Ee[Oe],b:Ee[Fe],c:Ee[pe]},de=(V.a-te.a)*ie.yaxis._m,ue=(V.c-te.c-V.b+te.b)*ie.xaxis._m);var be=v(ie.x0+ue,ie.y0+de);ie.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",be);var Me=v(-ue,-de);ie.clipDefRelative.select("path").attr("transform",Me),ie.aaxis.range=[te.a,ie.sum-te.b-te.c],ie.baxis.range=[ie.sum-te.a-te.c,te.b],ie.caxis.range=[ie.sum-te.a-te.b,te.c],ie.drawAxes(!1),ie._hasClipOnAxisFalse&&ie.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ie),oe.emit("plotly_relayouting",ge(te))}function le(){i.call("_guiRelayout",oe,ge(te))}this.dragOptions={element:ae,gd:oe,plotinfo:{id:ie.id,domain:oe._fullLayout[ie.id].domain,xaxis:ie.xaxis,yaxis:ie.yaxis},subplot:ie.id,prepFn:function(ue,de,Le){ie.dragOptions.xaxes=[ie.xaxis],ie.dragOptions.yaxes=[ie.yaxis],R=oe._fullLayout._invScaleX,j=oe._fullLayout._invScaleY;var we=ie.dragOptions.dragmode=oe._fullLayout.dragmode;c(we)?ie.dragOptions.minDrag=1:ie.dragOptions.minDrag=void 0,we==="zoom"?(ie.dragOptions.moveFn=Ce,ie.dragOptions.clickFn=ve,ie.dragOptions.doneFn=ke,function(Ee,Oe,Fe){var pe=ae.getBoundingClientRect();Z=Oe-pe.left,F=Fe-pe.top,oe._fullLayout._calcInverseTransform(oe);var be=oe._fullLayout._invTransform,Me=_.apply3DTransform(be)(Z,F);Z=Me[0],F=Me[1],V={a:ie.aaxis.range[0],b:ie.baxis.range[1],c:ie.caxis.range[1]},te=V,H=ie.aaxis.range[1]-V.a,$=w(ie.graphDiv._fullLayout[ie.id].bgcolor).getLuminance(),J="M0,"+ie.h+"L"+ie.w/2+", 0L"+ie.w+","+ie.h+"Z",X=!1,K=fe.append("path").attr("class","zoombox").attr("transform",v(ie.x0,ie.y0)).style({fill:$>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",J),ee=fe.append("path").attr("class","zoombox-corners").attr("transform",v(ie.x0,ie.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ie.clearOutline(oe)}(0,de,Le)):we==="pan"?(ie.dragOptions.moveFn=Te,ie.dragOptions.clickFn=ve,ie.dragOptions.doneFn=le,V={a:ie.aaxis.range[0],b:ie.baxis.range[1],c:ie.caxis.range[1]},te=V,ie.clearOutline(oe)):(b(we)||c(we))&&d(ue,de,Le,ie.dragOptions,we)}},ae.onmousemove=function(ue){u.hover(oe,ue,ie.id),oe._fullLayout._lasthover=ae,oe._fullLayout._hoversubplot=ie.id},ae.onmouseout=function(ue){oe._dragging||o.unhover(oe,ue)},o.init(this.dragOptions)}},73972:function(N,L,e){var T=e(47769),w=e(64213),i=e(75138),_=e(41965),v=e(24401).addStyleRule,h=e(1426),s=e(9012),t=e(10820),a=h.extendFlat,n=h.extendDeepAll;function r(m){var x=m.name,y=m.categories,k=m.meta;if(L.modules[x])T.log("Type "+x+" already registered");else{L.subplotsRegistry[m.basePlotModule.name]||function(z){var U=z.name;if(L.subplotsRegistry[U])T.log("Plot type "+U+" already registered.");else for(var R in p(z),L.subplotsRegistry[U]=z,L.componentsRegistry)g(R,z.name)}(m.basePlotModule);for(var f={},S=0;S<y.length;S++)f[y[S]]=!0,L.allCategories[y[S]]=!0;for(var M in L.modules[x]={_module:m,categories:f},k&&Object.keys(k).length&&(L.modules[x].meta=k),L.allTypes.push(x),L.componentsRegistry)c(M,x);m.layoutAttributes&&a(L.traceLayoutAttributes,m.layoutAttributes);var E=m.basePlotModule,O=E.name;if(O==="mapbox"){var P=E.constants.styleRules;for(var I in P)v(".js-plotly-plot .plotly .mapboxgl-"+I,P[I])}O!=="geo"&&O!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function l(m){if(typeof m.name!="string")throw new Error("Component module *name* must be a string.");var x=m.name;for(var y in L.componentsRegistry[x]=m,m.layoutAttributes&&(m.layoutAttributes._isLinkedToArray&&i(L.layoutArrayContainers,x),p(m)),L.modules)c(x,y);for(var k in L.subplotsRegistry)g(x,k);for(var f in L.transformsRegistry)b(x,f);m.schema&&m.schema.layout&&n(t,m.schema.layout)}function o(m){if(typeof m.name!="string")throw new Error("Transform module *name* must be a string.");var x="Transform module "+m.name,y=typeof m.transform=="function",k=typeof m.calcTransform=="function";if(!y&&!k)throw new Error(x+" is missing a *transform* or *calcTransform* method.");for(var f in y&&k&&T.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),_(m.attributes)||T.log(x+" registered without an *attributes* object."),typeof m.supplyDefaults!="function"&&T.log(x+" registered without a *supplyDefaults* method."),L.transformsRegistry[m.name]=m,L.componentsRegistry)b(f,m.name)}function u(m){var x=m.name,y=x.split("-")[0],k=m.dictionary,f=m.format,S=k&&Object.keys(k).length,M=f&&Object.keys(f).length,E=L.localeRegistry,O=E[x];if(O||(E[x]=O={}),y!==x){var P=E[y];P||(E[y]=P={}),S&&P.dictionary===O.dictionary&&(P.dictionary=k),M&&P.format===O.format&&(P.format=f)}S&&(O.dictionary=k),M&&(O.format=f)}function p(m){if(m.layoutAttributes){var x=m.layoutAttributes._arrayAttrRegexps;if(x)for(var y=0;y<x.length;y++)i(L.layoutArrayRegexes,x[y])}}function c(m,x){var y=L.componentsRegistry[m].schema;if(y&&y.traces){var k=y.traces[x];k&&n(L.modules[x]._module.attributes,k)}}function b(m,x){var y=L.componentsRegistry[m].schema;if(y&&y.transforms){var k=y.transforms[x];k&&n(L.transformsRegistry[x].attributes,k)}}function g(m,x){var y=L.componentsRegistry[m].schema;if(y&&y.subplots){var k=L.subplotsRegistry[x],f=k.layoutAttributes,S=k.attr==="subplot"?k.name:k.attr;Array.isArray(S)&&(S=S[0]);var M=y.subplots[S];f&&M&&n(f,M)}}function d(m){return typeof m=="object"&&(m=m.type),m}L.modules={},L.allCategories={},L.allTypes=[],L.subplotsRegistry={},L.transformsRegistry={},L.componentsRegistry={},L.layoutArrayContainers=[],L.layoutArrayRegexes=[],L.traceLayoutAttributes={},L.localeRegistry={},L.apiMethodRegistry={},L.collectableSubplotTypes=null,L.register=function(m){if(L.collectableSubplotTypes=null,!m)throw new Error("No argument passed to Plotly.register.");m&&!Array.isArray(m)&&(m=[m]);for(var x=0;x<m.length;x++){var y=m[x];if(!y)throw new Error("Invalid module was attempted to be registered!");switch(y.moduleType){case"trace":r(y);break;case"transform":o(y);break;case"component":l(y);break;case"locale":u(y);break;case"apiMethod":var k=y.name;L.apiMethodRegistry[k]=y.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},L.getModule=function(m){var x=L.modules[d(m)];return!!x&&x._module},L.traceIs=function(m,x){if((m=d(m))==="various")return!1;var y=L.modules[m];return y||(m&&T.log("Unrecognized trace type "+m+"."),y=L.modules[s.type.dflt]),!!y.categories[x]},L.getTransformIndices=function(m,x){for(var y=[],k=m.transforms||[],f=0;f<k.length;f++)k[f].type===x&&y.push(f);return y},L.hasTransform=function(m,x){for(var y=m.transforms||[],k=0;k<y.length;k++)if(y[k].type===x)return!0;return!1},L.getComponentMethod=function(m,x){var y=L.componentsRegistry[m];return y&&y[x]||w},L.call=function(){var m=arguments[0],x=[].slice.call(arguments,1);return L.apiMethodRegistry[m].apply(null,x)}},61914:function(N,L,e){var T=e(73972),w=e(71828),i=w.extendFlat,_=w.extendDeep;function v(h){var s;switch(h){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}N.exports=function(h,s){var t,a,n=h.data,r=h.layout,l=_([],n),o=_({},r,v(s.tileClass)),u=h._context||{};if(s.width&&(o.width=s.width),s.height&&(o.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){o.annotations=[];var p=Object.keys(o);for(t=0;t<p.length;t++)a=p[t],["xaxis","yaxis","zaxis"].indexOf(a.slice(0,5))>-1&&(o[p[t]].title={text:""});for(t=0;t<l.length;t++){var c=l[t];c.showscale=!1,c.marker&&(c.marker.showscale=!1),T.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)o.annotations.push(s.annotations[t]);var b=Object.keys(o).filter(function(y){return y.match(/^scene\d*$/)});if(b.length){var g={};for(s.tileClass==="thumbnail"&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<b.length;t++){var d=o[b[t]];d.xaxis||(d.xaxis={}),d.yaxis||(d.yaxis={}),d.zaxis||(d.zaxis={}),i(d.xaxis,g),i(d.yaxis,g),i(d.zaxis,g),d._scene=null}}var m=document.createElement("div");s.tileClass&&(m.className=s.tileClass);var x={gd:m,td:m,layout:o,data:l,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return s.setBackground!=="transparent"&&(x.config.setBackground=s.setBackground||"opaque"),x.gd.defaultLayout=v(s.tileClass),x}},7239:function(N,L,e){var T=e(71828),w=e(403),i=e(22435),_=e(25095);N.exports=function(v,h){var s;return T.isPlainObject(v)||(s=T.getGraphDiv(v)),(h=h||{}).format=h.format||"png",h.width=h.width||null,h.height=h.height||null,h.imageDataOnly=!0,new Promise(function(t,a){s&&s._snapshotInProgress&&a(new Error("Snapshotting already in progress.")),T.isIE()&&h.format!=="svg"&&a(new Error(_.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var n=w(v,h),r=h.filename||v.fn||"newplot";r+="."+h.format.replace("-","."),n.then(function(l){return s&&(s._snapshotInProgress=!1),i(l,r,h.format)}).then(function(l){t(l)}).catch(function(l){s&&(s._snapshotInProgress=!1),a(l)})})}},22435:function(N,L,e){var T=e(71828),w=e(25095);N.exports=function(i,_,v){var h=document.createElement("a"),s="download"in h;return new Promise(function(t,a){var n,r;if(T.isIE())return n=w.createBlob(i,"svg"),window.navigator.msSaveBlob(n,_),n=null,t(_);if(s)return n=w.createBlob(i,v),r=w.createObjectURL(n),h.href=r,h.download=_,document.body.appendChild(h),h.click(),document.body.removeChild(h),w.revokeObjectURL(r),n=null,t(_);if(T.isSafari()){var l=v==="svg"?",":";base64,";return w.octetStream(l+encodeURIComponent(i)),t(_)}a(new Error("download error"))})}},25095:function(N,L,e){var T=e(73972);L.getDelay=function(i){return i._has&&(i._has("gl3d")||i._has("gl2d")||i._has("mapbox"))?500:0},L.getRedrawFunc=function(i){return function(){T.getComponentMethod("colorbar","draw")(i)}},L.encodeSVG=function(i){return"data:image/svg+xml,"+encodeURIComponent(i)},L.encodeJSON=function(i){return"data:application/json,"+encodeURIComponent(i)};var w=window.URL||window.webkitURL;L.createObjectURL=function(i){return w.createObjectURL(i)},L.revokeObjectURL=function(i){return w.revokeObjectURL(i)},L.createBlob=function(i,_){if(_==="svg")return new window.Blob([i],{type:"image/svg+xml;charset=utf-8"});if(_==="full-json")return new window.Blob([i],{type:"application/json;charset=utf-8"});var v=function(h){for(var s=h.length,t=new ArrayBuffer(s),a=new Uint8Array(t),n=0;n<s;n++)a[n]=h.charCodeAt(n);return t}(window.atob(i));return new window.Blob([v],{type:"image/"+_})},L.octetStream=function(i){document.location.href="data:application/octet-stream"+i},L.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,L.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(N,L,e){var T=e(25095),w={getDelay:T.getDelay,getRedrawFunc:T.getRedrawFunc,clone:e(61914),toSVG:e(5900),svgToImg:e(70942),toImage:e(56395),downloadImage:e(7239)};N.exports=w},70942:function(N,L,e){var T=e(71828),w=e(15398).EventEmitter,i=e(25095);N.exports=function(_){var v=_.emitter||new w,h=new Promise(function(s,t){var a=window.Image,n=_.svg,r=_.format||"png";if(T.isIE()&&r!=="svg"){var l=new Error(i.MSG_IE_BAD_FORMAT);return t(l),_.promise?h:v.emit("error",l)}var o,u,p=_.canvas,c=_.scale||1,b=_.width||300,g=_.height||150,d=c*b,m=c*g,x=p.getContext("2d",{willReadFrequently:!0}),y=new a;r==="svg"||T.isSafari()?u=i.encodeSVG(n):(o=i.createBlob(n,"svg"),u=i.createObjectURL(o)),p.width=d,p.height=m,y.onload=function(){var k;switch(o=null,i.revokeObjectURL(u),r!=="svg"&&x.drawImage(y,0,0,d,m),r){case"jpeg":k=p.toDataURL("image/jpeg");break;case"png":k=p.toDataURL("image/png");break;case"webp":k=p.toDataURL("image/webp");break;case"svg":k=u;break;default:var f="Image format is not jpeg, png, svg or webp.";if(t(new Error(f)),!_.promise)return v.emit("error",f)}s(k),_.promise||v.emit("success",k)},y.onerror=function(k){if(o=null,i.revokeObjectURL(u),t(k),!_.promise)return v.emit("error",k)},y.src=u});return _.promise?h:v}},56395:function(N,L,e){var T=e(15398).EventEmitter,w=e(73972),i=e(71828),_=e(25095),v=e(61914),h=e(5900),s=e(70942);N.exports=function(t,a){var n=new T,r=v(t,{format:"png"}),l=r.gd;l.style.position="absolute",l.style.left="-5000px",document.body.appendChild(l);var o=_.getRedrawFunc(l);return w.call("_doPlot",l,r.data,r.layout,r.config).then(o).then(function(){var u=_.getDelay(l._fullLayout);setTimeout(function(){var p=h(l),c=document.createElement("canvas");c.id=i.randstr(),(n=s({format:a.format,width:l._fullLayout.width,height:l._fullLayout.height,canvas:c,emitter:n,svg:p})).clean=function(){l&&document.body.removeChild(l)}},u)}).catch(function(u){n.emit("error",u)}),n}},5900:function(N,L,e){var T=e(39898),w=e(71828),i=e(91424),_=e(7901),v=e(77922),h=/"/g,s="TOBESTRIPPED",t=new RegExp('("'+s+")|("+s+'")',"g");N.exports=function(a,n,r){var l,o=a._fullLayout,u=o._paper,p=o._toppaper,c=o.width,b=o.height;u.insert("rect",":first-child").call(i.setRect,0,0,c,b).call(_.fill,o.paper_bgcolor);var g=o._basePlotModules||[];for(l=0;l<g.length;l++){var d=g[l];d.toSVG&&d.toSVG(a)}if(p){var m=p.node().childNodes,x=Array.prototype.slice.call(m);for(l=0;l<x.length;l++){var y=x[l];y.childNodes.length&&u.node().appendChild(y)}}o._draggers&&o._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var f=T.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){f.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&f.style("font-family",S.replace(h,s))}else f.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var f=T.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&f.style("fill",S.replace(h,s));var M=this.style.stroke;M&&M.indexOf("url(")!==-1&&f.style("stroke",M.replace(h,s))}),n!=="pdf"&&n!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(v.xmlns,"xmlns",v.svg),u.node().setAttributeNS(v.xmlns,"xmlns:xlink",v.xlink),n==="svg"&&r&&(u.attr("width",r*c),u.attr("height",r*b),u.attr("viewBox","0 0 "+c+" "+b));var k=new window.XMLSerializer().serializeToString(u.node());return k=(k=(k=function(f){var S=T.select("body").append("div").style({display:"none"}).html(""),M=f.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),M}(k)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),w.isIE()&&(k=(k=(k=k.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),k}},75341:function(N,L,e){var T=e(71828);N.exports=function(w,i){for(var _=0;_<w.length;_++)w[_].i=_;T.mergeArray(i.text,w,"tx"),T.mergeArray(i.hovertext,w,"htx");var v=i.marker;if(v){T.mergeArray(v.opacity,w,"mo",!0),T.mergeArray(v.color,w,"mc");var h=v.line;h&&(T.mergeArray(h.color,w,"mlc"),T.mergeArrayCastPositive(h.width,w,"mlw"))}}},1486:function(N,L,e){var T=e(82196),w=e(12663).axisHoverFormat,i=e(5386).fF,_=e(5386).si,v=e(50693),h=e(41940),s=e(97313),t=e(79952).u,a=e(1426).extendFlat,n=h({editType:"calc",arrayOk:!0,colorEditType:"style"}),r=a({},T.marker.line.width,{dflt:0}),l=a({width:r,editType:"calc"},v("marker.line")),o=a({line:l,editType:"calc"},v("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t});N.exports={x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),text:T.text,texttemplate:_({editType:"plot"},{keys:s.eventDataKeys}),hovertext:T.hovertext,hovertemplate:i({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:a({},n,{}),insidetextfont:a({},n,{}),outsidetextfont:a({},n,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:a({},T.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:o,offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:{marker:{opacity:T.selected.marker.opacity,color:T.selected.marker.color,editType:"style"},textfont:T.selected.textfont,editType:"style"},unselected:{marker:{opacity:T.unselected.marker.opacity,color:T.unselected.marker.color,editType:"style"},textfont:T.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(N,L,e){var T=e(89298),w=e(42973),i=e(52075).hasColorscale,_=e(78803),v=e(75341),h=e(66279);N.exports=function(s,t){var a,n,r,l,o,u,p=T.getFromId(s,t.xaxis||"x"),c=T.getFromId(s,t.yaxis||"y"),b={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(a=p.makeCalcdata(t,"x",b),r=c.makeCalcdata(t,"y"),l=w(t,c,"y",r),o=!!t.yperiodalignment,u="y"):(a=c.makeCalcdata(t,"y",b),r=p.makeCalcdata(t,"x"),l=w(t,p,"x",r),o=!!t.xperiodalignment,u="x"),n=l.vals;for(var g=Math.min(n.length,a.length),d=new Array(g),m=0;m<g;m++)d[m]={p:n[m],s:a[m]},o&&(d[m].orig_p=r[m],d[m][u+"End"]=l.ends[m],d[m][u+"Start"]=l.starts[m]),t.ids&&(d[m].id=String(t.ids[m]));return i(t,"marker")&&_(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),i(t,"marker.line")&&_(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),v(d,t),h(d,t),d}},97313:function(N){N.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(N,L,e){var T=e(92770),w=e(71828).isArrayOrTypedArray,i=e(50606).BADNUM,_=e(73972),v=e(89298),h=e(99082).getAxisGroup,s=e(61546);function t(g,d,m,x,y){if(x.length){var k,f,S,M;switch(function(E,O){var P,I;for(P=0;P<O.length;P++){var z,U=O[P],R=U[0].trace,j=R.type==="funnel"?R._base:R.base,Z=R.orientation==="h"?R.xcalendar:R.ycalendar,F=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(w(j)){for(I=0;I<Math.min(j.length,U.length);I++)z=F(j[I],0,Z),T(z)?(U[I].b=+z,U[I].hasB=1):U[I].b=0;for(;I<U.length;I++)U[I].b=0}else{z=F(j,0,Z);var V=T(z);for(z=V?z:0,I=0;I<U.length;I++)U[I].b=z,V&&(U[I].hasB=1)}}}(m,x),y.mode){case"overlay":a(d,m,x,y);break;case"group":for(k=[],f=[],S=0;S<x.length;S++)(M=x[S])[0].trace.offset===void 0?f.push(M):k.push(M);f.length&&function(E,O,P,I,z){var U=new s(I,{posAxis:O,sepNegVal:!1,overlapNoMerge:!z.norm});(function(R,j,Z,F){for(var V=R._fullLayout,H=Z.positions,te=Z.distinctPositions,$=Z.minDiff,J=Z.traces,X=J.length,K=H.length!==te.length,ee=$*(1-F.gap),ie=h(V,j._id)+J[0][0].trace.orientation,ae=V._alignmentOpts[ie]||{},oe=0;oe<X;oe++){var fe,ge,ve=J[oe],xe=ve[0].trace,_e=ae[xe.alignmentgroup]||{},ye=Object.keys(_e.offsetGroups||{}).length,Ce=(fe=ye?ee/ye:K?ee/X:ee)*(1-(F.groupgap||0));ge=ye?((2*xe._offsetIndex+1-ye)*fe-Ce)/2:K?((2*oe+1-X)*fe-Ce)/2:-Ce/2;var ke=ve[0].t;ke.barwidth=Ce,ke.poffset=ge,ke.bargroupwidth=ee,ke.bardelta=$}Z.binWidth=J[0][0].t.barwidth/100,r(Z),l(j,Z),o(j,Z,K)})(E,O,U,z),function(R,j){for(var Z=R.traces,F=0;F<Z.length;F++){var V=Z[F];if(V[0].trace.base===void 0)for(var H=new s([V],{posAxis:j,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<V.length;te++){var $=V[te];if($.p!==i){var J=H.put($.p,$.b+$.s);J&&($.b=J)}}}}(U,O),z.norm?(p(U),c(P,U,z)):u(P,U)}(g,d,m,f,y),k.length&&a(d,m,k,y);break;case"stack":case"relative":for(k=[],f=[],S=0;S<x.length;S++)(M=x[S])[0].trace.base===void 0?f.push(M):k.push(M);f.length&&function(E,O,P,I,z){var U=new s(I,{posAxis:O,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});n(O,U,z),function(V,H,te){var $,J,X,K,ee,ie,ae=b(V),oe=H.traces;for(K=0;K<oe.length;K++)if((J=($=oe[K])[0].trace).type==="funnel")for(ee=0;ee<$.length;ee++)(ie=$[ee]).s!==i&&H.put(ie.p,-.5*ie.s);for(K=0;K<oe.length;K++){X=(J=($=oe[K])[0].trace).type==="funnel";var fe=[];for(ee=0;ee<$.length;ee++)if((ie=$[ee]).s!==i){var ge;ge=X?ie.s:ie.s+ie.b;var ve=H.put(ie.p,ge),xe=ve+ge;ie.b=ve,ie[ae]=xe,te.norm||(fe.push(xe),ie.hasB&&fe.push(ve))}te.norm||(J._extremes[V._id]=v.findExtremes(V,fe,{tozero:!0,padded:!0}))}}(P,U,z);for(var R=0;R<I.length;R++)for(var j=I[R],Z=0;Z<j.length;Z++){var F=j[Z];F.s!==i&&F.b+F.s===U.get(F.p,F.s)&&(F._outmost=!0)}z.norm&&c(P,U,z)}(0,d,m,f,y),k.length&&a(d,m,k,y)}(function(E,O){var P,I,z,U=b(O),R={},j=1/0,Z=-1/0;for(P=0;P<E.length;P++)for(z=E[P],I=0;I<z.length;I++){var F=z[I].p;T(F)&&(j=Math.min(j,F),Z=Math.max(Z,F))}var V=1e4/(Z-j),H=R.round=function(ie){return String(Math.round(V*(ie-j)))};for(P=0;P<E.length;P++){(z=E[P])[0].t.extents=R;var te=z[0].t.poffset,$=w(te);for(I=0;I<z.length;I++){var J=z[I],X=J[U]-J.w/2;if(T(X)){var K=J[U]+J.w/2,ee=H(J.p);R[ee]?R[ee]=[Math.min(X,R[ee][0]),Math.max(K,R[ee][1])]:R[ee]=[X,K]}J.p0=J.p+($?te[I]:te),J.p1=J.p0+J.w,J.s0=J.b,J.s1=J.s0+J.s}}})(x,d)}}function a(g,d,m,x){for(var y=0;y<m.length;y++){var k=m[y],f=new s([k],{posAxis:g,sepNegVal:!1,overlapNoMerge:!x.norm});n(g,f,x),x.norm?(p(f),c(d,f,x)):u(d,f)}}function n(g,d,m){for(var x=d.minDiff,y=d.traces,k=x*(1-m.gap),f=k*(1-(m.groupgap||0)),S=-f/2,M=0;M<y.length;M++){var E=y[M][0].t;E.barwidth=f,E.poffset=S,E.bargroupwidth=k,E.bardelta=x}d.binWidth=y[0][0].t.barwidth/100,r(d),l(g,d),o(g,d)}function r(g){var d,m,x=g.traces;for(d=0;d<x.length;d++){var y,k=x[d],f=k[0],S=f.trace,M=f.t,E=S._offset||S.offset,O=M.poffset;if(w(E)){for(y=Array.prototype.slice.call(E,0,k.length),m=0;m<y.length;m++)T(y[m])||(y[m]=O);for(m=y.length;m<k.length;m++)y.push(O);M.poffset=y}else E!==void 0&&(M.poffset=E);var P=S._width||S.width,I=M.barwidth;if(w(P)){var z=Array.prototype.slice.call(P,0,k.length);for(m=0;m<z.length;m++)T(z[m])||(z[m]=I);for(m=z.length;m<k.length;m++)z.push(I);if(M.barwidth=z,E===void 0){for(y=[],m=0;m<k.length;m++)y.push(O+(I-z[m])/2);M.poffset=y}}else P!==void 0&&(M.barwidth=P,E===void 0&&(M.poffset=O+(I-P)/2))}}function l(g,d){for(var m=d.traces,x=b(g),y=0;y<m.length;y++)for(var k=m[y],f=k[0].t,S=f.poffset,M=w(S),E=f.barwidth,O=w(E),P=0;P<k.length;P++){var I=k[P],z=I.w=O?E[P]:E;I.p===void 0&&(I.p=I[x],I["orig_"+x]=I[x]);var U=(M?S[P]:S)+z/2;I[x]=I.p+U}}function o(g,d,m){var x=d.traces,y=d.minDiff/2;v.minDtick(g,d.minDiff,d.distinctPositions[0],m);for(var k=0;k<x.length;k++){var f,S,M,E,O=x[k],P=O[0],I=P.trace,z=[];for(E=0;E<O.length;E++)S=(f=O[E]).p-y,M=f.p+y,z.push(S,M);if(I.width||I.offset){var U=P.t,R=U.poffset,j=U.barwidth,Z=w(R),F=w(j);for(E=0;E<O.length;E++){f=O[E];var V=Z?R[E]:R,H=F?j[E]:j;M=(S=f.p+V)+H,z.push(S,M)}}I._extremes[g._id]=v.findExtremes(g,z,{padded:!1})}}function u(g,d){for(var m=d.traces,x=b(g),y=0;y<m.length;y++){for(var k=m[y],f=k[0].trace,S=f.type==="scatter",M=f.orientation==="v",E=[],O=!1,P=0;P<k.length;P++){var I=k[P],z=S?0:I.b,U=S?M?I.y:I.x:z+I.s;I[x]=U,E.push(U),I.hasB&&E.push(z),I.hasB&&I.b||(O=!0)}f._extremes[g._id]=v.findExtremes(g,E,{tozero:O,padded:!0})}}function p(g){for(var d=g.traces,m=0;m<d.length;m++)for(var x=d[m],y=0;y<x.length;y++){var k=x[y];k.s!==i&&g.put(k.p,k.b+k.s)}}function c(g,d,m){var x=d.traces,y=b(g),k=m.norm==="fraction"?1:100,f=k/1e9,S=g.l2c(g.c2l(0)),M=m.mode==="stack"?k:S;function E(te){return T(g.c2l(te))&&(te<S-f||te>M+f||!T(S))}for(var O=0;O<x.length;O++){for(var P=x[O],I=P[0].trace,z=[],U=!1,R=!1,j=0;j<P.length;j++){var Z=P[j];if(Z.s!==i){var F=Math.abs(k/d.get(Z.p,Z.s));Z.b*=F,Z.s*=F;var V=Z.b,H=V+Z.s;Z[y]=H,z.push(H),R=R||E(H),Z.hasB&&(z.push(V),R=R||E(V)),Z.hasB&&Z.b||(U=!0)}}I._extremes[g._id]=v.findExtremes(g,z,{tozero:U,padded:R})}}function b(g){return g._id.charAt(0)}N.exports={crossTraceCalc:function(g,d){for(var m=d.xaxis,x=d.yaxis,y=g._fullLayout,k=g._fullData,f=g.calcdata,S=[],M=[],E=0;E<k.length;E++){var O=k[E];if(O.visible===!0&&_.traceIs(O,"bar")&&O.xaxis===m._id&&O.yaxis===x._id&&(O.orientation==="h"?S.push(f[E]):M.push(f[E]),O._computePh))for(var P=g.calcdata[E],I=0;I<P.length;I++)typeof P[I].ph0=="function"&&(P[I].ph0=P[I].ph0()),typeof P[I].ph1=="function"&&(P[I].ph1=P[I].ph1())}var z={xCat:m.type==="category"||m.type==="multicategory",yCat:x.type==="category"||x.type==="multicategory",mode:y.barmode,norm:y.barnorm,gap:y.bargap,groupgap:y.bargroupgap};t(g,m,x,M,z),t(g,x,m,S,z)},setGroupPositions:t}},90769:function(N,L,e){var T=e(71828),w=e(7901),i=e(73972),_=e(67513),v=e(73927),h=e(98340),s=e(26125),t=e(1486),a=T.coerceFont;function n(r,l,o,u,p,c){var b=(c=c||{}).moduleHasSelected!==!1,g=c.moduleHasUnselected!==!1,d=c.moduleHasConstrain!==!1,m=c.moduleHasCliponaxis!==!1,x=c.moduleHasTextangle!==!1,y=c.moduleHasInsideanchor!==!1,k=!!c.hasPathbar,f=Array.isArray(p)||p==="auto",S=f||p==="inside",M=f||p==="outside";if(S||M){var E=a(u,"textfont",o.font),O=T.extendFlat({},E),P=!(r.textfont&&r.textfont.color);if(P&&delete O.color,a(u,"insidetextfont",O),k){var I=T.extendFlat({},E);P&&delete I.color,a(u,"pathbar.textfont",I)}M&&a(u,"outsidetextfont",E),b&&u("selected.textfont.color"),g&&u("unselected.textfont.color"),d&&u("constraintext"),m&&u("cliponaxis"),x&&u("textangle"),u("texttemplate")}S&&y&&u("insidetextanchor")}N.exports={supplyDefaults:function(r,l,o,u){function p(d,m){return T.coerce(r,l,t,d,m)}if(_(r,l,u,p)){v(r,l,u,p),p("xhoverformat"),p("yhoverformat"),p("orientation",l.x&&!l.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var c=p("textposition");n(r,0,u,p,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h(r,l,p,o,u);var b=(l.marker.line||{}).color,g=i.getComponentMethod("errorbars","supplyDefaults");g(r,l,b||w.defaultLine,{axis:"y"}),g(r,l,b||w.defaultLine,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(l,p)}else l.visible=!1},crossTraceDefaults:function(r,l){var o,u;function p(b){return T.coerce(u._input,u,t,b)}if(l.barmode==="group")for(var c=0;c<r.length;c++)(u=r[c]).type==="bar"&&(o=u._input,s(o,u,l,p))},handleText:n}},58065:function(N){N.exports=function(L,e,T){return L.x="xVal"in e?e.xVal:e.x,L.y="yVal"in e?e.yVal:e.y,e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),T.orientation==="h"?(L.label=L.y,L.value=L.x):(L.label=L.x,L.value=L.y),L}},69383:function(N,L,e){var T=e(92770),w=e(84267),i=e(71828).isArrayOrTypedArray;L.coerceString=function(_,v,h){if(typeof v=="string"){if(v||!_.noBlank)return v}else if((typeof v=="number"||v===!0)&&!_.strict)return String(v);return h!==void 0?h:_.dflt},L.coerceNumber=function(_,v,h){if(T(v)){v=+v;var s=_.min,t=_.max;if(!(s!==void 0&&v<s||t!==void 0&&v>t))return v}return h!==void 0?h:_.dflt},L.coerceColor=function(_,v,h){return w(v).isValid()?v:h!==void 0?h:_.dflt},L.coerceEnumerated=function(_,v,h){return _.coerceNumber&&(v=+v),_.values.indexOf(v)!==-1?v:h!==void 0?h:_.dflt},L.getValue=function(_,v){var h;return i(_)?v<_.length&&(h=_[v]):h=_,h},L.getLineWidth=function(_,v){return 0<v.mlw?v.mlw:i(_.marker.line.width)?0:_.marker.line.width}},95423:function(N,L,e){var T=e(30211),w=e(73972),i=e(7901),_=e(71828).fillText,v=e(69383).getLineWidth,h=e(89298).hoverLabelText,s=e(50606).BADNUM;function t(n,r,l,o,u){var p,c,b,g,d,m,x,y=n.cd,k=y[0].trace,f=y[0].t,S=o==="closest",M=k.type==="waterfall",E=n.maxHoverDistance,O=n.maxSpikeDistance;k.orientation==="h"?(p=l,c=r,b="y",g="x",d=$,m=H):(p=r,c=l,b="x",g="y",m=$,d=H);var P=k[b+"period"],I=S||P;function z(fe){return R(fe,-1)}function U(fe){return R(fe,1)}function R(fe,ge){var ve=fe.w;return fe[b]+ge*ve/2}function j(fe){return fe[b+"End"]-fe[b+"Start"]}var Z=S?z:P?function(fe){return fe.p-j(fe)/2}:function(fe){return Math.min(z(fe),fe.p-f.bardelta/2)},F=S?U:P?function(fe){return fe.p+j(fe)/2}:function(fe){return Math.max(U(fe),fe.p+f.bardelta/2)};function V(fe,ge,ve){return u.finiteRange&&(ve=0),T.inbox(fe-p,ge-p,ve+Math.min(1,Math.abs(ge-fe)/x)-1)}function H(fe){return V(Z(fe),F(fe),E)}function te(fe){var ge=fe[g];if(M){var ve=Math.abs(fe.rawS)||0;c>0?ge+=ve:c<0&&(ge-=ve)}return ge}function $(fe){var ge=c,ve=fe.b,xe=te(fe);return T.inbox(ve-ge,xe-ge,E+(xe-ge)/(xe-ve)-1)}var J=n[b+"a"],X=n[g+"a"];x=Math.abs(J.r2c(J.range[1])-J.r2c(J.range[0]));var K=T.getDistanceFunction(o,d,m,function(fe){return(d(fe)+m(fe))/2});if(T.getClosest(y,K,n),n.index!==!1&&y[n.index].p!==s){I||(Z=function(fe){return Math.min(z(fe),fe.p-f.bargroupwidth/2)},F=function(fe){return Math.max(U(fe),fe.p+f.bargroupwidth/2)});var ee=y[n.index],ie=k.base?ee.b+ee.s:ee.s;n[g+"0"]=n[g+"1"]=X.c2p(ee[g],!0),n[g+"LabelVal"]=ie;var ae=f.extents[f.extents.round(ee.p)];n[b+"0"]=J.c2p(S?Z(ee):ae[0],!0),n[b+"1"]=J.c2p(S?F(ee):ae[1],!0);var oe=ee.orig_p!==void 0;return n[b+"LabelVal"]=oe?ee.orig_p:ee.p,n.labelLabel=h(J,n[b+"LabelVal"],k[b+"hoverformat"]),n.valueLabel=h(X,n[g+"LabelVal"],k[g+"hoverformat"]),n.baseLabel=h(X,ee.b,k[g+"hoverformat"]),n.spikeDistance=(function(fe){var ge=c,ve=fe.b,xe=te(fe);return T.inbox(ve-ge,xe-ge,O+(xe-ge)/(xe-ve)-1)}(ee)+function(fe){return V(z(fe),U(fe),O)}(ee))/2,n[b+"Spike"]=J.c2p(ee.p,!0),_(ee,k,n),n.hovertemplate=k.hovertemplate,n}}function a(n,r){var l=r.mcc||n.marker.color,o=r.mlcc||n.marker.line.color,u=v(n,r);return i.opacity(l)?l:i.opacity(o)&&u?o:void 0}N.exports={hoverPoints:function(n,r,l,o,u){var p=t(n,r,l,o,u);if(p){var c=p.cd,b=c[0].trace,g=c[p.index];return p.color=a(b,g),w.getComponentMethod("errorbars","hoverInfo")(g,b,p),[p]}},hoverOnBars:t,getTraceColor:a}},60822:function(N,L,e){N.exports={attributes:e(1486),layoutAttributes:e(43641),supplyDefaults:e(90769).supplyDefaults,crossTraceDefaults:e(90769).crossTraceDefaults,supplyLayoutDefaults:e(13957),calc:e(92290),crossTraceCalc:e(11661).crossTraceCalc,colorbar:e(4898),arraysToCalcdata:e(75341),plot:e(17295).plot,style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(95423).hoverPoints,eventData:e(58065),selectPoints:e(81974),moduleType:"trace",name:"bar",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(N){N.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(N,L,e){var T=e(73972),w=e(89298),i=e(71828),_=e(43641);N.exports=function(v,h,s){function t(b,g){return i.coerce(v,h,_,b,g)}for(var a=!1,n=!1,r=!1,l={},o=t("barmode"),u=0;u<s.length;u++){var p=s[u];if(T.traceIs(p,"bar")&&p.visible){if(a=!0,o==="group"){var c=p.xaxis+p.yaxis;l[c]&&(r=!0),l[c]=!0}p.visible&&p.type==="histogram"&&w.getFromId({_fullLayout:h},p[p.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(n=!0)}}a?(o!=="overlay"&&t("barnorm"),t("bargap",n&&!r?0:.2),t("bargroupgap")):delete h.barmode}},17295:function(N,L,e){var T=e(39898),w=e(92770),i=e(71828),_=e(63893),v=e(7901),h=e(91424),s=e(73972),t=e(89298).tickText,a=e(72597),n=a.recordMinTextSize,r=a.clearMinTextSize,l=e(16688),o=e(69383),u=e(97313),p=e(1486),c=p.text,b=p.textposition,g=e(23469).appendArrayPointValue,d=u.TEXTPAD;function m(O){return O.id}function x(O){if(O.ids)return m}function y(O,P){return O<P?1:-1}function k(O,P,I,z){var U;return!P.uniformtext.mode&&f(I)?(z&&(U=z()),O.transition().duration(I.duration).ease(I.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()})):O}function f(O){return O&&O.duration>0}function S(O){return O==="auto"?0:O}function M(O,P){var I=Math.PI/180*P,z=Math.abs(Math.sin(I)),U=Math.abs(Math.cos(I));return{x:O.width*U+O.height*z,y:O.width*z+O.height*U}}function E(O,P,I,z,U,R){var j=!!R.isHorizontal,Z=!!R.constrained,F=R.angle||0,V=R.anchor||"end",H=V==="end",te=V==="start",$=((R.leftToRight||0)+1)/2,J=1-$,X=U.width,K=U.height,ee=Math.abs(P-O),ie=Math.abs(z-I),ae=ee>2*d&&ie>2*d?d:0;ee-=2*ae,ie-=2*ae;var oe=S(F);F!=="auto"||X<=ee&&K<=ie||!(X>ee||K>ie)||(X>ie||K>ee)&&X<K==ee<ie||(oe+=90);var fe=M(U,oe),ge=1;Z&&(ge=Math.min(1,ee/fe.x,ie/fe.y));var ve=U.left*J+U.right*$,xe=(U.top+U.bottom)/2,_e=(O+d)*J+(P-d)*$,ye=(I+z)/2,Ce=0,ke=0;if(te||H){var Te=(j?fe.x:fe.y)/2,le=j?y(O,P):y(I,z);j?te?(_e=O+le*ae,Ce=-le*Te):(_e=P-le*ae,Ce=le*Te):te?(ye=I+le*ae,ke=-le*Te):(ye=z-le*ae,ke=le*Te)}return{textX:ve,textY:xe,targetX:_e,targetY:ye,anchorX:Ce,anchorY:ke,scale:ge,rotate:oe}}N.exports={plot:function(O,P,I,z,U,R){var j=P.xaxis,Z=P.yaxis,F=O._fullLayout,V=O._context.staticPlot;U||(U={mode:F.barmode,norm:F.barmode,gap:F.bargap,groupgap:F.bargroupgap},r("bar",F));var H=i.makeTraceGroups(z,I,"trace bars").each(function(te){var $=T.select(this),J=te[0].trace,X=J.type==="waterfall",K=J.type==="funnel",ee=J.type==="bar"||K,ie=0;X&&J.connector.visible&&J.connector.mode==="between"&&(ie=J.connector.line.width/2);var ae=J.orientation==="h",oe=f(U),fe=i.ensureSingle($,"g","points"),ge=x(J),ve=fe.selectAll("g.point").data(i.identity,ge);ve.enter().append("g").classed("point",!0),ve.exit().remove(),ve.each(function(_e,ye){var Ce,ke,Te=T.select(this),le=function(De,Ne,Be,Ye){var We=[],et=[],ft=Ye?Ne:Be,ht=Ye?Be:Ne;return We[0]=ft.c2p(De.s0,!0),et[0]=ht.c2p(De.p0,!0),We[1]=ft.c2p(De.s1,!0),et[1]=ht.c2p(De.p1,!0),Ye?[We,et]:[et,We]}(_e,j,Z,ae),ue=le[0][0],de=le[0][1],Le=le[1][0],we=le[1][1],Ee=(ae?de-ue:we-Le)==0;if(Ee&&ee&&o.getLineWidth(J,_e)&&(Ee=!1),Ee||(Ee=!(w(ue)&&w(de)&&w(Le)&&w(we))),_e.isBlank=Ee,Ee&&(ae?de=ue:we=Le),ie&&!Ee&&(ae?(ue-=y(ue,de)*ie,de+=y(ue,de)*ie):(Le-=y(Le,we)*ie,we+=y(Le,we)*ie)),J.type==="waterfall"){if(!Ee){var Oe=J[_e.dir].marker;Ce=Oe.line.width,ke=Oe.color}}else Ce=o.getLineWidth(J,_e),ke=_e.mc||J.marker.color;function Fe(De){var Ne=T.round(Ce/2%1,2);return U.gap===0&&U.groupgap===0?T.round(Math.round(De)-Ne,2):De}if(!O._context.staticPlot){var pe=v.opacity(ke)<1||Ce>.01?Fe:function(De,Ne,Be){return Be&&De===Ne?De:Math.abs(De-Ne)>=2?Fe(De):De>Ne?Math.ceil(De):Math.floor(De)};ue=pe(ue,de,ae),de=pe(de,ue,ae),Le=pe(Le,we,!ae),we=pe(we,Le,!ae)}var be=k(i.ensureSingle(Te,"path"),F,U,R);if(be.style("vector-effect",V?"none":"non-scaling-stroke").attr("d",isNaN((de-ue)*(we-Le))||Ee&&O._context.staticPlot?"M0,0Z":"M"+ue+","+Le+"V"+we+"H"+de+"V"+Le+"Z").call(h.setClipUrl,P.layerClipId,O),!F.uniformtext.mode&&oe){var Me=h.makePointStyleFns(J);h.singlePointStyle(_e,be,J,Me,O)}(function(De,Ne,Be,Ye,We,et,ft,ht,mt,Mt,_t){var it,st=Ne.xaxis,St=Ne.yaxis,zt=De._fullLayout;function Ft(an,Wt,Vt){return i.ensureSingle(an,"text").text(Wt).attr({class:"bartext bartext-"+it,"text-anchor":"middle","data-notex":1}).call(h.font,Vt).call(_.convertToTspans,De)}var Pt=Ye[0].trace,Xe=Pt.orientation==="h",Ke=function(an,Wt,Vt,on,Sn){var Ln,fn=Wt[0].trace;return Ln=fn.texttemplate?function(Zt,ln,nn,cn,kn){var An=ln[0].trace,wn=i.castOption(An,nn,"texttemplate");if(!wn)return"";var Cn,_n,zn,qn,sr=An.type==="histogram",pr=An.type==="waterfall",ir=An.type==="funnel",Jn=An.orientation==="h";function mr(Bn){return t(qn,qn.c2l(Bn),!0).text}Jn?(Cn="y",_n=kn,zn="x",qn=cn):(Cn="x",_n=cn,zn="y",qn=kn);var qt,tn=ln[nn],dn={};dn.label=tn.p,dn.labelLabel=dn[Cn+"Label"]=(qt=tn.p,t(_n,_n.c2l(qt),!0).text);var vn=i.castOption(An,tn.i,"text");(vn===0||vn)&&(dn.text=vn),dn.value=tn.s,dn.valueLabel=dn[zn+"Label"]=mr(tn.s);var On={};g(On,An,tn.i),(sr||On.x===void 0)&&(On.x=Jn?dn.value:dn.label),(sr||On.y===void 0)&&(On.y=Jn?dn.label:dn.value),(sr||On.xLabel===void 0)&&(On.xLabel=Jn?dn.valueLabel:dn.labelLabel),(sr||On.yLabel===void 0)&&(On.yLabel=Jn?dn.labelLabel:dn.valueLabel),pr&&(dn.delta=+tn.rawS||tn.s,dn.deltaLabel=mr(dn.delta),dn.final=tn.v,dn.finalLabel=mr(dn.final),dn.initial=dn.final-dn.delta,dn.initialLabel=mr(dn.initial)),ir&&(dn.value=tn.s,dn.valueLabel=mr(dn.value),dn.percentInitial=tn.begR,dn.percentInitialLabel=i.formatPercent(tn.begR),dn.percentPrevious=tn.difR,dn.percentPreviousLabel=i.formatPercent(tn.difR),dn.percentTotal=tn.sumR,dn.percenTotalLabel=i.formatPercent(tn.sumR));var Hn=i.castOption(An,tn.i,"customdata");return Hn&&(dn.customdata=Hn),i.texttemplateString(wn,dn,Zt._d3locale,On,dn,An._meta||{})}(an,Wt,Vt,on,Sn):fn.textinfo?function(Zt,ln,nn,cn){var kn=Zt[0].trace,An=kn.orientation==="h",wn=kn.type==="waterfall",Cn=kn.type==="funnel";function _n(Hn){return t(An?nn:cn,+Hn,!0).text}var zn,qn,sr=kn.textinfo,pr=Zt[ln],ir=sr.split("+"),Jn=[],mr=function(Hn){return ir.indexOf(Hn)!==-1};if(mr("label")&&Jn.push((qn=Zt[ln].p,t(An?cn:nn,qn,!0).text)),mr("text")&&((zn=i.castOption(kn,pr.i,"text"))===0||zn)&&Jn.push(zn),wn){var qt=+pr.rawS||pr.s,tn=pr.v,dn=tn-qt;mr("initial")&&Jn.push(_n(dn)),mr("delta")&&Jn.push(_n(qt)),mr("final")&&Jn.push(_n(tn))}if(Cn){mr("value")&&Jn.push(_n(pr.s));var vn=0;mr("percent initial")&&vn++,mr("percent previous")&&vn++,mr("percent total")&&vn++;var On=vn>1;mr("percent initial")&&(zn=i.formatPercent(pr.begR),On&&(zn+=" of initial"),Jn.push(zn)),mr("percent previous")&&(zn=i.formatPercent(pr.difR),On&&(zn+=" of previous"),Jn.push(zn)),mr("percent total")&&(zn=i.formatPercent(pr.sumR),On&&(zn+=" of total"),Jn.push(zn))}return Jn.join("<br>")}(Wt,Vt,on,Sn):o.getValue(fn.text,Vt),o.coerceString(c,Ln)}(zt,Ye,We,st,St);it=function(an,Wt){var Vt=o.getValue(an.textposition,Wt);return o.coerceEnumerated(b,Vt)}(Pt,We);var He=Mt.mode==="stack"||Mt.mode==="relative",Je=Ye[We],lt=!He||Je._outmost;if(Ke&&it!=="none"&&(!Je.isBlank&&et!==ft&&ht!==mt||it!=="auto"&&it!=="inside")){var ot=zt.font,je=l.getBarColor(Ye[We],Pt),Ue=l.getInsideTextFont(Pt,We,ot,je),at=l.getOutsideTextFont(Pt,We,ot),$e=Be.datum();Xe?st.type==="log"&&$e.s0<=0&&(et=st.range[0]<st.range[1]?0:st._length):St.type==="log"&&$e.s0<=0&&(ht=St.range[0]<St.range[1]?St._length:0);var gt,yt,xt,dt,Lt,Tt=Math.abs(ft-et)-2*d,bt=Math.abs(mt-ht)-2*d;if(it==="outside"&&(lt||Je.hasB||(it="inside")),it==="auto"&&(lt?(it="inside",gt=Ft(Be,Ke,Lt=i.ensureUniformFontSize(De,Ue)),xt=(yt=h.bBox(gt.node())).width,dt=yt.height,xt>0&&dt>0&&(xt<=Tt&&dt<=bt||xt<=bt&&dt<=Tt||(Xe?Tt>=xt*(bt/dt):bt>=dt*(Tt/xt)))?it="inside":(it="outside",gt.remove(),gt=null)):it="inside"),!gt){var Ct=(gt=Ft(Be,Ke,Lt=i.ensureUniformFontSize(De,it==="outside"?at:Ue))).attr("transform");if(gt.attr("transform",""),xt=(yt=h.bBox(gt.node())).width,dt=yt.height,gt.attr("transform",Ct),xt<=0||dt<=0)return void gt.remove()}var Dt,Bt=Pt.textangle;Dt=it==="outside"?function(an,Wt,Vt,on,Sn,Ln){var fn,Zt=!!Ln.isHorizontal,ln=!!Ln.constrained,nn=Ln.angle||0,cn=Sn.width,kn=Sn.height,An=Math.abs(Wt-an),wn=Math.abs(on-Vt);fn=Zt?wn>2*d?d:0:An>2*d?d:0;var Cn=1;ln&&(Cn=Zt?Math.min(1,wn/kn):Math.min(1,An/cn));var _n=S(nn),zn=M(Sn,_n),qn=(Zt?zn.x:zn.y)/2,sr=(Sn.left+Sn.right)/2,pr=(Sn.top+Sn.bottom)/2,ir=(an+Wt)/2,Jn=(Vt+on)/2,mr=0,qt=0,tn=Zt?y(Wt,an):y(Vt,on);return Zt?(ir=Wt-tn*fn,mr=tn*qn):(Jn=on+tn*fn,qt=-tn*qn),{textX:sr,textY:pr,targetX:ir,targetY:Jn,anchorX:mr,anchorY:qt,scale:Cn,rotate:_n}}(et,ft,ht,mt,yt,{isHorizontal:Xe,constrained:Pt.constraintext==="both"||Pt.constraintext==="outside",angle:Bt}):E(et,ft,ht,mt,yt,{isHorizontal:Xe,constrained:Pt.constraintext==="both"||Pt.constraintext==="inside",angle:Bt,anchor:Pt.insidetextanchor}),Dt.fontSize=Lt.size,n(Pt.type==="histogram"?"bar":Pt.type,Dt,zt),Je.transform=Dt;var Xt=k(gt,zt,Mt,_t);i.setTransormAndDisplay(Xt,Dt)}else Be.select("text").remove()})(O,P,Te,te,ye,ue,de,Le,we,U,R),P.layerClipId&&h.hideOutsideRangePoint(_e,Te.select("text"),j,Z,J.xcalendar,J.ycalendar)});var xe=J.cliponaxis===!1;h.setClipUrl($,xe?null:P.layerClipId,O)});s.getComponentMethod("errorbars","plot")(O,H,P,U)},toMoveInsideBar:E}},81974:function(N){function L(e,T,w,i,_){var v=T.c2p(i?e.s0:e.p0,!0),h=T.c2p(i?e.s1:e.p1,!0),s=w.c2p(i?e.p0:e.s0,!0),t=w.c2p(i?e.p1:e.s1,!0);return _?[(v+h)/2,(s+t)/2]:i?[h,(s+t)/2]:[(v+h)/2,t]}N.exports=function(e,T){var w,i=e.cd,_=e.xaxis,v=e.yaxis,h=i[0].trace,s=h.type==="funnel",t=h.orientation==="h",a=[];if(T===!1)for(w=0;w<i.length;w++)i[w].selected=0;else for(w=0;w<i.length;w++){var n=i[w],r="ct"in n?n.ct:L(n,_,v,t,s);T.contains(r,!1,w,e)?(a.push({pointNumber:w,x:_.c2d(n.x),y:v.c2d(n.y)}),n.selected=1):n.selected=0}return a}},61546:function(N,L,e){N.exports=w;var T=e(71828).distinctVals;function w(i,_){this.traces=i,this.sepNegVal=_.sepNegVal,this.overlapNoMerge=_.overlapNoMerge;for(var v=1/0,h=_.posAxis._id.charAt(0),s=[],t=0;t<i.length;t++){for(var a=i[t],n=0;n<a.length;n++){var r=a[n],l=r.p;l===void 0&&(l=r[h]),l!==void 0&&s.push(l)}a[0]&&a[0].width1&&(v=Math.min(a[0].width1,v))}this.positions=s;var o=T(s);this.distinctPositions=o.vals,o.vals.length===1&&v!==1/0?this.minDiff=v:this.minDiff=Math.min(o.minDiff,v);var u=(_.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}w.prototype.put=function(i,_){var v=this.getLabel(i,_),h=this.bins[v]||0;return this.bins[v]=h+_,h},w.prototype.get=function(i,_){var v=this.getLabel(i,_);return this.bins[v]||0},w.prototype.getLabel=function(i,_){return(_<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?i:Math.round(i/this.binWidth))}},16688:function(N,L,e){var T=e(39898),w=e(7901),i=e(91424),_=e(71828),v=e(73972),h=e(72597).resizeText,s=e(1486),t=s.textfont,a=s.insidetextfont,n=s.outsidetextfont,r=e(69383);function l(m,x,y){i.pointStyle(m.selectAll("path"),x,y),o(m,x,y)}function o(m,x,y){m.selectAll("text").each(function(k){var f=T.select(this),S=_.ensureUniformFontSize(y,u(f,k,x,y));i.font(f,S)})}function u(m,x,y,k){var f=k._fullLayout.font,S=y.textfont;if(m.classed("bartext-inside")){var M=d(x,y);S=c(y,x.i,f,M)}else m.classed("bartext-outside")&&(S=b(y,x.i,f));return S}function p(m,x,y){return g(t,m.textfont,x,y)}function c(m,x,y,k){var f=p(m,x,y);return(m._input.textfont===void 0||m._input.textfont.color===void 0||Array.isArray(m.textfont.color)&&m.textfont.color[x]===void 0)&&(f={color:w.contrast(k),family:f.family,size:f.size}),g(a,m.insidetextfont,x,f)}function b(m,x,y){var k=p(m,x,y);return g(n,m.outsidetextfont,x,k)}function g(m,x,y,k){x=x||{};var f=r.getValue(x.family,y),S=r.getValue(x.size,y),M=r.getValue(x.color,y);return{family:r.coerceString(m.family,f,k.family),size:r.coerceNumber(m.size,S,k.size),color:r.coerceColor(m.color,M,k.color)}}function d(m,x){return x.type==="waterfall"?x[m.dir].marker.color:m.mcc||m.mc||x.marker.color}N.exports={style:function(m){var x=T.select(m).selectAll("g.barlayer").selectAll("g.trace");h(m,x,"bar");var y=x.size(),k=m._fullLayout;x.style("opacity",function(f){return f[0].trace.opacity}).each(function(f){(k.barmode==="stack"&&y>1||k.bargap===0&&k.bargroupgap===0&&!f[0].trace.marker.line.width)&&T.select(this).attr("shape-rendering","crispEdges")}),x.selectAll("g.points").each(function(f){l(T.select(this),f[0].trace,m)}),v.getComponentMethod("errorbars","style")(x)},styleTextPoints:o,styleOnSelect:function(m,x,y){var k=x[0].trace;k.selectedpoints?function(f,S,M){i.selectedPointStyle(f.selectAll("path"),S),function(E,O,P){E.each(function(I){var z,U=T.select(this);if(I.selected){z=_.ensureUniformFontSize(P,u(U,I,O,P));var R=O.selected.textfont&&O.selected.textfont.color;R&&(z.color=R),i.font(U,z)}else i.selectedTextStyle(U,O)})}(f.selectAll("text"),S,M)}(y,k,m):(l(y,k,m),v.getComponentMethod("errorbars","style")(y))},getInsideTextFont:c,getOutsideTextFont:b,getBarColor:d,resizeText:h}},98340:function(N,L,e){var T=e(7901),w=e(52075).hasColorscale,i=e(1586),_=e(71828).coercePattern;N.exports=function(v,h,s,t,a){var n=s("marker.color",t),r=w(v,"marker");r&&i(v,h,a,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",T.defaultLine),w(v,"marker.line")&&i(v,h,a,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),_(s,"marker.pattern",n,r),s("selected.marker.color"),s("unselected.marker.color")}},72597:function(N,L,e){var T=e(39898),w=e(71828);function i(_){return"_"+_+"Text_minsize"}N.exports={recordMinTextSize:function(_,v,h){if(h.uniformtext.mode){var s=i(_),t=h.uniformtext.minsize,a=v.scale*v.fontSize;v.hide=a<t,h[s]=h[s]||1/0,v.hide||(h[s]=Math.min(h[s],Math.max(a,t)))}},clearMinTextSize:function(_,v){v[i(_)]=void 0},resizeText:function(_,v,h){var s=_._fullLayout,t=s["_"+h+"Text_minsize"];if(t){var a,n=s.uniformtext.mode==="hide";switch(h){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}v.selectAll(a).each(function(r){var l=r.transform;if(l){l.scale=n&&l.hide?0:t/l.fontSize;var o=T.select(this).select("text");w.setTransormAndDisplay(o,l)}})}}}},55023:function(N,L,e){var T=e(5386).fF,w=e(1426).extendFlat,i=e(81245),_=e(1486);N.exports={r:i.r,theta:i.theta,r0:i.r0,dr:i.dr,theta0:i.theta0,dtheta:i.dtheta,thetaunit:i.thetaunit,base:w({},_.base,{}),offset:w({},_.offset,{}),width:w({},_.width,{}),text:w({},_.text,{}),hovertext:w({},_.hovertext,{}),marker:_.marker,hoverinfo:i.hoverinfo,hovertemplate:T(),selected:_.selected,unselected:_.unselected}},74692:function(N,L,e){var T=e(52075).hasColorscale,w=e(78803),i=e(71828).isArrayOrTypedArray,_=e(75341),v=e(11661).setGroupPositions,h=e(66279),s=e(73972).traceIs,t=e(71828).extendFlat;N.exports={calc:function(a,n){for(var r=a._fullLayout,l=n.subplot,o=r[l].radialaxis,u=r[l].angularaxis,p=o.makeCalcdata(n,"r"),c=u.makeCalcdata(n,"theta"),b=n._length,g=new Array(b),d=p,m=c,x=0;x<b;x++)g[x]={p:m[x],s:d[x]};function y(k){var f=n[k];f!==void 0&&(n["_"+k]=i(f)?u.makeCalcdata(n,k):u.d2c(f,n.thetaunit))}return u.type==="linear"&&(y("width"),y("offset")),T(n,"marker")&&w(a,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),T(n,"marker.line")&&w(a,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),_(g,n),h(g,n),g},crossTraceCalc:function(a,n,r){for(var l=a.calcdata,o=[],u=0;u<l.length;u++){var p=l[u],c=p[0].trace;c.visible===!0&&s(c,"bar")&&c.subplot===r&&o.push(p)}var b=t({},n.radialaxis,{_id:"x"}),g=n.angularaxis;v(a,g,b,o,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},6135:function(N,L,e){var T=e(71828),w=e(22184).handleRThetaDefaults,i=e(98340),_=e(55023);N.exports=function(v,h,s,t){function a(n,r){return T.coerce(v,h,_,n,r)}w(v,h,t,a)?(a("thetaunit"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate"),i(v,h,a,s,t),T.coerceSelectionMarkerOpacity(h,a)):h.visible=!1}},27379:function(N,L,e){var T=e(30211),w=e(71828),i=e(95423).getTraceColor,_=w.fillText,v=e(59150).makeHoverPointText,h=e(10869).isPtInsidePolygon;N.exports=function(s,t,a){var n=s.cd,r=n[0].trace,l=s.subplot,o=l.radialAxis,u=l.angularAxis,p=l.vangles,c=p?h:w.isPtInsideSector,b=s.maxHoverDistance,g=u._period||2*Math.PI,d=Math.abs(o.g2p(Math.sqrt(t*t+a*a))),m=Math.atan2(a,t);if(o.range[0]>o.range[1]&&(m+=Math.PI),T.getClosest(n,function(k){return c(d,m,[k.rp0,k.rp1],[k.thetag0,k.thetag1],p)?b+Math.min(1,Math.abs(k.thetag1-k.thetag0)/g)-1+(k.rp1-d)/(k.rp1-k.rp0)-1:1/0},s),s.index!==!1){var x=n[s.index];s.x0=s.x1=x.ct[0],s.y0=s.y1=x.ct[1];var y=w.extendFlat({},x,{r:x.s,theta:x.p});return _(x,r,s),v(y,r,l,s),s.hovertemplate=r.hovertemplate,s.color=i(r,x),s.xLabelVal=s.yLabelVal=void 0,x.s<0&&(s.idealAlign="left"),[s]}}},23381:function(N,L,e){N.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(23580),categories:["polar","bar","showLegend"],attributes:e(55023),layoutAttributes:e(40151),supplyDefaults:e(6135),supplyLayoutDefaults:e(19860),calc:e(74692).calc,crossTraceCalc:e(74692).crossTraceCalc,plot:e(60173),colorbar:e(4898),formatLabels:e(98608),style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(27379),selectPoints:e(81974),meta:{}}},40151:function(N){N.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(N,L,e){var T=e(71828),w=e(40151);N.exports=function(i,_,v){var h,s={};function t(r,l){return T.coerce(i[h]||{},_[h],w,r,l)}for(var a=0;a<v.length;a++){var n=v[a];n.type==="barpolar"&&n.visible===!0&&(s[h=n.subplot]||(t("barmode"),t("bargap"),s[h]=1))}}},60173:function(N,L,e){var T=e(39898),w=e(92770),i=e(71828),_=e(91424),v=e(10869);N.exports=function(h,s,t){var a=h._context.staticPlot,n=s.xaxis,r=s.yaxis,l=s.radialAxis,o=s.angularAxis,u=function(c){var b=c.cxx,g=c.cyy;return c.vangles?function(d,m,x,y){var k,f;i.angleDelta(x,y)>0?(k=x,f=y):(k=y,f=x);var S=[v.findEnclosingVertexAngles(k,c.vangles)[0],(k+f)/2,v.findEnclosingVertexAngles(f,c.vangles)[1]];return v.pathPolygonAnnulus(d,m,k,f,S,b,g)}:function(d,m,x,y){return i.pathAnnulus(d,m,x,y,b,g)}}(s),p=s.layers.frontplot.select("g.barlayer");i.makeTraceGroups(p,t,"trace bars").each(function(){var c=T.select(this),b=i.ensureSingle(c,"g","points").selectAll("g.point").data(i.identity);b.enter().append("g").style("vector-effect",a?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),b.exit().remove(),b.each(function(g){var d,m=T.select(this),x=g.rp0=l.c2p(g.s0),y=g.rp1=l.c2p(g.s1),k=g.thetag0=o.c2g(g.p0),f=g.thetag1=o.c2g(g.p1);if(w(x)&&w(y)&&w(k)&&w(f)&&x!==y&&k!==f){var S=l.c2g(g.s1),M=(k+f)/2;g.ct=[n.c2p(S*Math.cos(M)),r.c2p(S*Math.sin(M))],d=u(x,y,k,f)}else d="M0,0Z";i.ensureSingle(m,"path").attr("d",d)}),_.setClipUrl(c,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,h)})}},53522:function(N,L,e){var T=e(82196),w=e(1486),i=e(22399),_=e(12663).axisHoverFormat,v=e(5386).fF,h=e(1426).extendFlat,s=T.marker,t=s.line;N.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:h({},s.symbol,{arrayOk:!1,editType:"plot"}),opacity:h({},s.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:h({},s.angle,{arrayOk:!1,editType:"calc"}),size:h({},s.size,{arrayOk:!1,editType:"calc"}),color:h({},s.color,{arrayOk:!1,editType:"style"}),line:{color:h({},t.color,{arrayOk:!1,dflt:i.defaultLine,editType:"style"}),width:h({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup,selected:{marker:T.selected.marker,editType:"style"},unselected:{marker:T.unselected.marker,editType:"style"},text:h({},T.text,{}),hovertext:h({},T.hovertext,{}),hovertemplate:v({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(N,L,e){var T=e(92770),w=e(89298),i=e(42973),_=e(71828),v=e(50606).BADNUM,h=_._;N.exports=function(c,b){var g,d,m,x,y,k,f,S=c._fullLayout,M=w.getFromId(c,b.xaxis||"x"),E=w.getFromId(c,b.yaxis||"y"),O=[],P=b.type==="violin"?"_numViolins":"_numBoxes";b.orientation==="h"?(m=M,x="x",y=E,k="y",f=!!b.yperiodalignment):(m=E,x="y",y=M,k="x",f=!!b.xperiodalignment);var I,z,U,R,j,Z,F=function(Ne,Be,Ye,We){var et,ft=Be+"0"in Ne;if(Be in Ne||ft&&"d"+Be in Ne){var ht=Ye.makeCalcdata(Ne,Be);return[i(Ne,Ye,Be,ht).vals,ht]}et=ft?Ne[Be+"0"]:"name"in Ne&&(Ye.type==="category"||T(Ne.name)&&["linear","log"].indexOf(Ye.type)!==-1||_.isDateTime(Ne.name)&&Ye.type==="date")?Ne.name:We;for(var mt=Ye.type==="multicategory"?Ye.r2c_just_indices(et):Ye.d2c(et,0,Ne[Be+"calendar"]),Mt=Ne._length,_t=new Array(Mt),it=0;it<Mt;it++)_t[it]=mt;return[_t]}(b,k,y,S[P]),V=F[0],H=F[1],te=_.distinctVals(V,y),$=te.vals,J=te.minDiff/2,X=(b.boxpoints||b.points)==="all"?_.identity:function(Ne){return Ne.v<I.lf||Ne.v>I.uf};if(b._hasPreCompStats){var K=b[x],ee=function(Ne){return m.d2c((b[Ne]||[])[g])},ie=1/0,ae=-1/0;for(g=0;g<b._length;g++){var oe=V[g];if(T(oe)){if((I={}).pos=I[k]=oe,f&&H&&(I.orig_p=H[g]),I.q1=ee("q1"),I.med=ee("median"),I.q3=ee("q3"),z=[],K&&_.isArrayOrTypedArray(K[g]))for(d=0;d<K[g].length;d++)(Z=m.d2c(K[g][d]))!==v&&(t(j={v:Z,i:[g,d]},b,[g,d]),z.push(j));if(I.pts=z.sort(a),R=(U=I[x]=z.map(n)).length,I.med!==v&&I.q1!==v&&I.q3!==v&&I.med>=I.q1&&I.q3>=I.med){var fe=ee("lowerfence");I.lf=fe!==v&&fe<=I.q1?fe:r(I,U,R);var ge=ee("upperfence");I.uf=ge!==v&&ge>=I.q3?ge:l(I,U,R);var ve=ee("mean");I.mean=ve!==v?ve:R?_.mean(U,R):(I.q1+I.q3)/2;var xe=ee("sd");I.sd=ve!==v&&xe>=0?xe:R?_.stdev(U,R,I.mean):I.q3-I.q1,I.lo=o(I),I.uo=u(I);var _e=ee("notchspan");_e=_e!==v&&_e>0?_e:p(I,R),I.ln=I.med-_e,I.un=I.med+_e;var ye=I.lf,Ce=I.uf;b.boxpoints&&U.length&&(ye=Math.min(ye,U[0]),Ce=Math.max(Ce,U[R-1])),b.notched&&(ye=Math.min(ye,I.ln),Ce=Math.max(Ce,I.un)),I.min=ye,I.max=Ce}else{var ke;_.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+I.q1,"median = "+I.med,"q3 = "+I.q3].join(`
`)),ke=I.med!==v?I.med:I.q1!==v?I.q3!==v?(I.q1+I.q3)/2:I.q1:I.q3!==v?I.q3:0,I.med=ke,I.q1=I.q3=ke,I.lf=I.uf=ke,I.mean=I.sd=ke,I.ln=I.un=ke,I.min=I.max=ke}ie=Math.min(ie,I.min),ae=Math.max(ae,I.max),I.pts2=z.filter(X),O.push(I)}}b._extremes[m._id]=w.findExtremes(m,[ie,ae],{padded:!0})}else{var Te=m.makeCalcdata(b,x),le=function(Ne,Be){for(var Ye=Ne.length,We=new Array(Ye+1),et=0;et<Ye;et++)We[et]=Ne[et]-Be;return We[Ye]=Ne[Ye-1]+Be,We}($,J),ue=$.length,de=function(Ne){for(var Be=new Array(Ne),Ye=0;Ye<Ne;Ye++)Be[Ye]=[];return Be}(ue);for(g=0;g<b._length;g++)if(Z=Te[g],T(Z)){var Le=_.findBin(V[g],le);Le>=0&&Le<ue&&(t(j={v:Z,i:g},b,g),de[Le].push(j))}var we=1/0,Ee=-1/0,Oe=b.quartilemethod,Fe=Oe==="exclusive",pe=Oe==="inclusive";for(g=0;g<ue;g++)if(de[g].length>0){var be,Me;(I={}).pos=I[k]=$[g],z=I.pts=de[g].sort(a),R=(U=I[x]=z.map(n)).length,I.min=U[0],I.max=U[R-1],I.mean=_.mean(U,R),I.sd=_.stdev(U,R,I.mean)*b.sdmultiple,I.med=_.interp(U,.5),R%2&&(Fe||pe)?(Fe?(be=U.slice(0,R/2),Me=U.slice(R/2+1)):pe&&(be=U.slice(0,R/2+1),Me=U.slice(R/2)),I.q1=_.interp(be,.5),I.q3=_.interp(Me,.5)):(I.q1=_.interp(U,.25),I.q3=_.interp(U,.75)),I.lf=r(I,U,R),I.uf=l(I,U,R),I.lo=o(I),I.uo=u(I);var De=p(I,R);I.ln=I.med-De,I.un=I.med+De,we=Math.min(we,I.ln),Ee=Math.max(Ee,I.un),I.pts2=z.filter(X),O.push(I)}b.notched&&_.isTypedArray(Te)&&(Te=Array.from(Te)),b._extremes[m._id]=w.findExtremes(m,b.notched?Te.concat([we,Ee]):Te,{padded:!0})}return function(Ne,Be){if(_.isArrayOrTypedArray(Be.selectedpoints))for(var Ye=0;Ye<Ne.length;Ye++){for(var We=Ne[Ye].pts||[],et={},ft=0;ft<We.length;ft++)et[We[ft].i]=ft;_.tagSelected(We,Be,et)}}(O,b),O.length>0?(O[0].t={num:S[P],dPos:J,posLetter:k,valLetter:x,labels:{med:h(c,"median:"),min:h(c,"min:"),q1:h(c,"q1:"),q3:h(c,"q3:"),max:h(c,"max:"),mean:b.boxmean==="sd"||b.sizemode==="sd"?h(c,"mean  :").replace("",b.sdmultiple===1?"":b.sdmultiple+""):h(c,"mean:"),lf:h(c,"lower fence:"),uf:h(c,"upper fence:")}},S[P]++,O):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(c,b,g){for(var d in s)_.isArrayOrTypedArray(b[d])&&(Array.isArray(g)?_.isArrayOrTypedArray(b[d][g[0]])&&(c[s[d]]=b[d][g[0]][g[1]]):c[s[d]]=b[d][g])}function a(c,b){return c.v-b.v}function n(c){return c.v}function r(c,b,g){return g===0?c.q1:Math.min(c.q1,b[Math.min(_.findBin(2.5*c.q1-1.5*c.q3,b,!0)+1,g-1)])}function l(c,b,g){return g===0?c.q3:Math.max(c.q3,b[Math.max(_.findBin(2.5*c.q3-1.5*c.q1,b),0)])}function o(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function p(c,b){return b===0?0:1.57*(c.q3-c.q1)/Math.sqrt(b)}},37188:function(N,L,e){var T=e(89298),w=e(71828),i=e(99082).getAxisGroup,_=["v","h"];function v(h,s,t,a){var n,r,l,o=s.calcdata,u=s._fullLayout,p=a._id,c=p.charAt(0),b=[],g=0;for(n=0;n<t.length;n++)for(l=o[t[n]],r=0;r<l.length;r++)b.push(a.c2l(l[r].pos,!0)),g+=(l[r].pts2||[]).length;if(b.length){var d=w.distinctVals(b);a.type!=="category"&&a.type!=="multicategory"||(d.minDiff=1);var m=d.minDiff/2;T.minDtick(a,d.minDiff,d.vals[0],!0);var x=u[h==="violin"?"_numViolins":"_numBoxes"],y=u[h+"mode"]==="group"&&x>1,k=1-u[h+"gap"],f=1-u[h+"groupgap"];for(n=0;n<t.length;n++){var S,M,E,O,P,I,z=(l=o[t[n]])[0].trace,U=l[0].t,R=z.width,j=z.side;if(R)S=M=O=R/2,E=0;else if(S=m,y){var Z=i(u,a._id)+z.orientation,F=(u._alignmentOpts[Z]||{})[z.alignmentgroup]||{},V=Object.keys(F.offsetGroups||{}).length,H=V||x;M=S*k*f/H,E=2*S*(((V?z._offsetIndex:U.num)+.5)/H-.5)*k,O=S*k/H}else M=S*k*f,E=0,O=S;U.dPos=S,U.bPos=E,U.bdPos=M,U.wHover=O;var te,$,J,X,K,ee,ie=E+M,ae=!!R;if(j==="positive"?(P=S*(R?1:.5),te=ie,I=te=E):j==="negative"?(P=te=E,I=S*(R?1:.5),$=ie):(P=I=S,te=$=ie),(z.boxpoints||z.points)&&g>0){var oe=z.pointpos,fe=z.jitter,ge=z.marker.size/2,ve=0;oe+fe>=0&&((ve=ie*(oe+fe))>P?(ae=!0,K=ge,J=ve):ve>te&&(K=ge,J=P)),ve<=P&&(J=P);var xe=0;oe-fe<=0&&((xe=-ie*(oe-fe))>I?(ae=!0,ee=ge,X=xe):xe>$&&(ee=ge,X=I)),xe<=I&&(X=I)}else J=P,X=I;var _e=new Array(l.length);for(r=0;r<l.length;r++)_e[r]=l[r].pos;z._extremes[p]=T.findExtremes(a,_e,{padded:ae,vpadminus:X,vpadplus:J,vpadLinearized:!0,ppadminus:{x:ee,y:K}[c],ppadplus:{x:K,y:ee}[c]})}}}N.exports={crossTraceCalc:function(h,s){for(var t=h.calcdata,a=s.xaxis,n=s.yaxis,r=0;r<_.length;r++){for(var l=_[r],o=l==="h"?n:a,u=[],p=0;p<t.length;p++){var c=t[p],b=c[0].t,g=c[0].trace;g.visible!==!0||g.type!=="box"&&g.type!=="candlestick"||b.empty||(g.orientation||"v")!==l||g.xaxis!==a._id||g.yaxis!==n._id||u.push(p)}v("box",h,u,o)}},setPositionOffset:v}},36411:function(N,L,e){var T=e(71828),w=e(73972),i=e(7901),_=e(73927),v=e(26125),h=e(4322),s=e(53522);function t(n,r,l,o){function u(j){var Z=0;return j&&j.length&&(Z+=1,T.isArrayOrTypedArray(j[0])&&j[0].length&&(Z+=1)),Z}function p(j){return T.validate(n[j],s[j])}var c,b=l("y"),g=l("x");if(r.type==="box"){var d=l("q1"),m=l("median"),x=l("q3");r._hasPreCompStats=d&&d.length&&m&&m.length&&x&&x.length,c=Math.min(T.minRowLength(d),T.minRowLength(m),T.minRowLength(x))}var y,k,f=u(b),S=u(g),M=f&&T.minRowLength(b),E=S&&T.minRowLength(g),O=o.calendar,P={autotypenumbers:o.autotypenumbers};if(r._hasPreCompStats)switch(String(S)+String(f)){case"00":var I=p("x0")||p("dx");y=!p("y0")&&!p("dy")||I?"v":"h",k=c;break;case"10":y="v",k=Math.min(c,E);break;case"20":y="h",k=Math.min(c,g.length);break;case"01":y="h",k=Math.min(c,M);break;case"02":y="v",k=Math.min(c,b.length);break;case"12":y="v",k=Math.min(c,E,b.length);break;case"21":y="h",k=Math.min(c,g.length,M);break;case"11":k=0;break;case"22":var z,U=!1;for(z=0;z<g.length;z++)if(h(g[z],O,P)==="category"){U=!0;break}if(U)y="v",k=Math.min(c,E,b.length);else{for(z=0;z<b.length;z++)if(h(b[z],O,P)==="category"){U=!0;break}U?(y="h",k=Math.min(c,g.length,M)):(y="v",k=Math.min(c,E,b.length))}}else f>0?(y="v",k=S>0?Math.min(E,M):Math.min(M)):S>0?(y="h",k=Math.min(E)):k=0;if(k){r._length=k;var R=l("orientation",y);r._hasPreCompStats?R==="v"&&S===0?(l("x0",0),l("dx",1)):R==="h"&&f===0&&(l("y0",0),l("dy",1)):R==="v"&&S===0?l("x0"):R==="h"&&f===0&&l("y0"),w.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],o)}else r.visible=!1}function a(n,r,l,o){var u=o.prefix,p=T.coerce2(n,r,s,"marker.outliercolor"),c=l("marker.line.outliercolor"),b="outliers";r._hasPreCompStats?b="all":(p||c)&&(b="suspectedoutliers");var g=l(u+"points",b);g?(l("jitter",g==="all"?.3:0),l("pointpos",g==="all"?-1.5:0),l("marker.symbol"),l("marker.opacity"),l("marker.size"),l("marker.angle"),l("marker.color",r.line.color),l("marker.line.color"),l("marker.line.width"),g==="suspectedoutliers"&&(l("marker.line.outliercolor",r.marker.color),l("marker.line.outlierwidth")),l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size"),l("text"),l("hovertext")):delete r.marker;var d=l("hoveron");d!=="all"&&d.indexOf("points")===-1||l("hovertemplate"),T.coerceSelectionMarkerOpacity(r,l)}N.exports={supplyDefaults:function(n,r,l,o){function u(k,f){return T.coerce(n,r,s,k,f)}if(t(n,r,u,o),r.visible!==!1){_(n,r,o,u),u("xhoverformat"),u("yhoverformat");var p=r._hasPreCompStats;p&&(u("lowerfence"),u("upperfence")),u("line.color",(n.marker||{}).color||l),u("line.width"),u("fillcolor",i.addOpacity(r.line.color,.5));var c=!1;if(p){var b=u("mean"),g=u("sd");b&&b.length&&(c=!0,g&&g.length&&(c="sd"))}u("whiskerwidth");var d,m=u("sizemode");m==="quartiles"&&(d=u("boxmean",c)),u("showwhiskers",m==="quartiles"),m!=="sd"&&d!=="sd"||u("sdmultiple"),u("width"),u("quartilemethod");var x=!1;if(p){var y=u("notchspan");y&&y.length&&(x=!0)}else T.validate(n.notchwidth,s.notchwidth)&&(x=!0);u("notched",x)&&u("notchwidth"),a(n,r,u,{prefix:"box"})}},crossTraceDefaults:function(n,r){var l,o;function u(b){return T.coerce(o._input,o,s,b)}for(var p=0;p<n.length;p++){var c=(o=n[p]).type;c!=="box"&&c!=="violin"||(l=o._input,r[c+"mode"]==="group"&&v(l,o,r,u))}},handleSampleDefaults:t,handlePointsDefaults:a}},74907:function(N){N.exports=function(L,e){return e.hoverOnBox&&(L.hoverOnBox=e.hoverOnBox),"xVal"in e&&(L.x=e.xVal),"yVal"in e&&(L.y=e.yVal),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),L}},41868:function(N,L,e){var T=e(89298),w=e(71828),i=e(30211),_=e(7901),v=w.fillText;function h(t,a,n,r){var l,o,u,p,c,b,g,d,m,x,y,k,f,S,M=t.cd,E=t.xa,O=t.ya,P=M[0].trace,I=M[0].t,z=P.type==="violin",U=I.bdPos,R=I.wHover,j=function(ke){return u.c2l(ke.pos)+I.bPos-u.c2l(b)};z&&P.side!=="both"?(P.side==="positive"&&(m=function(ke){var Te=j(ke);return i.inbox(Te,Te+R,x)},k=U,f=0),P.side==="negative"&&(m=function(ke){var Te=j(ke);return i.inbox(Te-R,Te,x)},k=0,f=U)):(m=function(ke){var Te=j(ke);return i.inbox(Te-R,Te+R,x)},k=f=U),S=z?function(ke){return i.inbox(ke.span[0]-c,ke.span[1]-c,x)}:function(ke){return i.inbox(ke.min-c,ke.max-c,x)},P.orientation==="h"?(c=a,b=n,g=S,d=m,l="y",u=O,o="x",p=E):(c=n,b=a,g=m,d=S,l="x",u=E,o="y",p=O);var Z=Math.min(1,U/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function F(ke){return(g(ke)+d(ke))/2}x=t.maxHoverDistance-Z,y=t.maxSpikeDistance-Z;var V=i.getDistanceFunction(r,g,d,F);if(i.getClosest(M,V,t),t.index===!1)return[];var H=M[t.index],te=P.line.color,$=(P.marker||{}).color;_.opacity(te)&&P.line.width?t.color=te:_.opacity($)&&P.boxpoints?t.color=$:t.color=P.fillcolor,t[l+"0"]=u.c2p(H.pos+I.bPos-f,!0),t[l+"1"]=u.c2p(H.pos+I.bPos+k,!0),t[l+"LabelVal"]=H.orig_p!==void 0?H.orig_p:H.pos;var J=l+"Spike";t.spikeDistance=F(H)*y/x,t[J]=u.c2p(H.pos,!0);var X=P.boxmean||P.sizemode==="sd"||(P.meanline||{}).visible,K=P.boxpoints||P.points,ee=K&&X?["max","uf","q3","med","mean","q1","lf","min"]:K&&!X?["max","uf","q3","med","q1","lf","min"]:!K&&X?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ie=p.range[1]<p.range[0];P.orientation===(ie?"v":"h")&&ee.reverse();for(var ae=t.spikeDistance,oe=t[J],fe=[],ge=0;ge<ee.length;ge++){var ve=ee[ge];if(ve in H){var xe=H[ve],_e=p.c2p(xe,!0),ye=w.extendFlat({},t);ye.attr=ve,ye[o+"0"]=ye[o+"1"]=_e,ye[o+"LabelVal"]=xe,ye[o+"Label"]=(I.labels?I.labels[ve]+" ":"")+T.hoverLabelText(p,xe,P[o+"hoverformat"]),ye.hoverOnBox=!0,ve!=="mean"||!("sd"in H)||P.boxmean!=="sd"&&P.sizemode!=="sd"||(ye[o+"err"]=H.sd),ye.hovertemplate=!1,fe.push(ye)}}t.name="",t.spikeDistance=void 0,t[J]=void 0;for(var Ce=0;Ce<fe.length;Ce++)fe[Ce].attr!=="med"?(fe[Ce].name="",fe[Ce].spikeDistance=void 0,fe[Ce][J]=void 0):(fe[Ce].spikeDistance=ae,fe[Ce][J]=oe);return fe}function s(t,a,n){for(var r,l,o,u=t.cd,p=t.xa,c=t.ya,b=u[0].trace,g=p.c2p(a),d=c.c2p(n),m=i.quadrature(function(z){var U=Math.max(3,z.mrc||0);return Math.max(Math.abs(p.c2p(z.x)-g)-U,1-3/U)},function(z){var U=Math.max(3,z.mrc||0);return Math.max(Math.abs(c.c2p(z.y)-d)-U,1-3/U)}),x=!1,y=0;y<u.length;y++){l=u[y];for(var k=0;k<(l.pts||[]).length;k++){var f=m(o=l.pts[k]);f<=t.distance&&(t.distance=f,x=[y,k])}}if(!x)return!1;o=(l=u[x[0]]).pts[x[1]];var S=p.c2p(o.x,!0),M=c.c2p(o.y,!0),E=o.mrc||1;r=w.extendFlat({},t,{index:o.i,color:(b.marker||{}).color,name:b.name,x0:S-E,x1:S+E,y0:M-E,y1:M+E,spikeDistance:t.distance,hovertemplate:b.hovertemplate});var O,P=l.orig_p,I=P!==void 0?P:l.pos;return b.orientation==="h"?(O=c,r.xLabelVal=o.x,r.yLabelVal=I):(O=p,r.xLabelVal=I,r.yLabelVal=o.y),r[O._id.charAt(0)+"Spike"]=O.c2p(l.pos,!0),v(o,b,r),r}N.exports={hoverPoints:function(t,a,n,r){var l,o=t.cd[0].trace.hoveron,u=[];return o.indexOf("boxes")!==-1&&(u=u.concat(h(t,a,n,r))),o.indexOf("points")!==-1&&(l=s(t,a,n)),r==="closest"?l?[l]:u:(l&&u.push(l),u)},hoverOnBoxes:h,hoverOnPoints:s}},83832:function(N,L,e){N.exports={attributes:e(53522),layoutAttributes:e(40094),supplyDefaults:e(36411).supplyDefaults,crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(4199).supplyLayoutDefaults,calc:e(48518),crossTraceCalc:e(37188).crossTraceCalc,plot:e(86047).plot,style:e(58063).style,styleOnSelect:e(58063).styleOnSelect,hoverPoints:e(41868).hoverPoints,eventData:e(74907),selectPoints:e(24626),moduleType:"trace",name:"box",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(N){N.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(N,L,e){var T=e(73972),w=e(71828),i=e(40094);function _(v,h,s,t,a){for(var n=a+"Layout",r=!1,l=0;l<s.length;l++){var o=s[l];if(T.traceIs(o,n)){r=!0;break}}r&&(t(a+"mode"),t(a+"gap"),t(a+"groupgap"))}N.exports={supplyLayoutDefaults:function(v,h,s){_(0,0,s,function(t,a){return w.coerce(v,h,i,t,a)},"box")},_supply:_}},86047:function(N,L,e){var T=e(39898),w=e(71828),i=e(91424);function _(s,t,a,n,r){var l,o,u=a.orientation==="h",p=t.val,c=t.pos,b=!!c.rangebreaks,g=n.bPos,d=n.wdPos||0,m=n.bPosPxOffset||0,x=a.whiskerwidth||0,y=a.showwhiskers!==!1,k=a.notched||!1,f=k?1-2*a.notchwidth:1;Array.isArray(n.bdPos)?(l=n.bdPos[0],o=n.bdPos[1]):(l=n.bdPos,o=n.bdPos);var S=s.selectAll("path.box").data(a.type!=="violin"||a.box.visible?w.identity:[]);S.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(M){if(M.empty)return T.select(this).attr("d","M0,0Z");var E=c.c2l(M.pos+g,!0),O=c.l2p(E-l)+m,P=c.l2p(E+o)+m,I=b?(O+P)/2:c.l2p(E)+m,z=a.whiskerwidth,U=b?O*z+(1-z)*I:c.l2p(E-d)+m,R=b?P*z+(1-z)*I:c.l2p(E+d)+m,j=c.l2p(E-l*f)+m,Z=c.l2p(E+o*f)+m,F=a.sizemode==="sd",V=p.c2p(F?M.mean-M.sd:M.q1,!0),H=F?p.c2p(M.mean+M.sd,!0):p.c2p(M.q3,!0),te=w.constrain(F?p.c2p(M.mean,!0):p.c2p(M.med,!0),Math.min(V,H)+1,Math.max(V,H)-1),$=M.lf===void 0||a.boxpoints===!1||F,J=p.c2p($?M.min:M.lf,!0),X=p.c2p($?M.max:M.uf,!0),K=p.c2p(M.ln,!0),ee=p.c2p(M.un,!0);u?T.select(this).attr("d","M"+te+","+j+"V"+Z+"M"+V+","+O+"V"+P+(k?"H"+K+"L"+te+","+Z+"L"+ee+","+P:"")+"H"+H+"V"+O+(k?"H"+ee+"L"+te+","+j+"L"+K+","+O:"")+"Z"+(y?"M"+V+","+I+"H"+J+"M"+H+","+I+"H"+X+(x===0?"":"M"+J+","+U+"V"+R+"M"+X+","+U+"V"+R):"")):T.select(this).attr("d","M"+j+","+te+"H"+Z+"M"+O+","+V+"H"+P+(k?"V"+K+"L"+Z+","+te+"L"+P+","+ee:"")+"V"+H+"H"+O+(k?"V"+ee+"L"+j+","+te+"L"+O+","+K:"")+"Z"+(y?"M"+I+","+V+"V"+J+"M"+I+","+H+"V"+X+(x===0?"":"M"+U+","+J+"H"+R+"M"+U+","+X+"H"+R):""))})}function v(s,t,a,n){var r=t.x,l=t.y,o=n.bdPos,u=n.bPos,p=a.boxpoints||a.points;w.seedPseudoRandom();var c=s.selectAll("g.points").data(p?function(g){return g.forEach(function(d){d.t=n,d.trace=a}),g}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var b=c.selectAll("path").data(function(g){var d,m,x=g.pts2,y=Math.max((g.max-g.min)/10,g.q3-g.q1),k=1e-9*y,f=.01*y,S=[],M=0;if(a.jitter){if(y===0)for(M=1,S=new Array(x.length),d=0;d<x.length;d++)S[d]=1;else for(d=0;d<x.length;d++){var E=Math.max(0,d-5),O=x[E].v,P=Math.min(x.length-1,d+5),I=x[P].v;p!=="all"&&(x[d].v<g.lf?I=Math.min(I,g.lf):O=Math.max(O,g.uf));var z=Math.sqrt(f*(P-E)/(I-O+k))||0;z=w.constrain(Math.abs(z),0,1),S.push(z),M=Math.max(z,M)}m=2*a.jitter/(M||1)}for(d=0;d<x.length;d++){var U=x[d],R=U.v,j=a.jitter?m*S[d]*(w.pseudoRandom()-.5):0,Z=g.pos+u+o*(a.pointpos+j);a.orientation==="h"?(U.y=Z,U.x=R):(U.x=Z,U.y=R),p==="suspectedoutliers"&&R<g.uo&&R>g.lo&&(U.so=!0)}return x});b.enter().append("path").classed("point",!0),b.exit().remove(),b.call(i.translatePoints,r,l)}function h(s,t,a,n){var r,l,o=t.val,u=t.pos,p=!!u.rangebreaks,c=n.bPos,b=n.bPosPxOffset||0,g=a.boxmean||(a.meanline||{}).visible;Array.isArray(n.bdPos)?(r=n.bdPos[0],l=n.bdPos[1]):(r=n.bdPos,l=n.bdPos);var d=s.selectAll("path.mean").data(a.type==="box"&&a.boxmean||a.type==="violin"&&a.box.visible&&a.meanline.visible?w.identity:[]);d.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),d.exit().remove(),d.each(function(m){var x=u.c2l(m.pos+c,!0),y=u.l2p(x-r)+b,k=u.l2p(x+l)+b,f=p?(y+k)/2:u.l2p(x)+b,S=o.c2p(m.mean,!0),M=o.c2p(m.mean-m.sd,!0),E=o.c2p(m.mean+m.sd,!0);a.orientation==="h"?T.select(this).attr("d","M"+S+","+y+"V"+k+(g==="sd"?"m0,0L"+M+","+f+"L"+S+","+y+"L"+E+","+f+"Z":"")):T.select(this).attr("d","M"+y+","+S+"H"+k+(g==="sd"?"m0,0L"+f+","+M+"L"+y+","+S+"L"+f+","+E+"Z":""))})}N.exports={plot:function(s,t,a,n){var r=s._context.staticPlot,l=t.xaxis,o=t.yaxis;w.makeTraceGroups(n,a,"trace boxes").each(function(u){var p,c,b=T.select(this),g=u[0],d=g.t,m=g.trace;d.wdPos=d.bdPos*m.whiskerwidth,m.visible!==!0||d.empty?b.remove():(m.orientation==="h"?(p=o,c=l):(p=l,c=o),_(b,{pos:p,val:c},m,d,r),v(b,{x:l,y:o},m,d),h(b,{pos:p,val:c},m,d))})},plotBoxAndWhiskers:_,plotPoints:v,plotBoxMean:h}},24626:function(N){N.exports=function(L,e){var T,w,i=L.cd,_=L.xaxis,v=L.yaxis,h=[];if(e===!1)for(T=0;T<i.length;T++)for(w=0;w<(i[T].pts||[]).length;w++)i[T].pts[w].selected=0;else for(T=0;T<i.length;T++)for(w=0;w<(i[T].pts||[]).length;w++){var s=i[T].pts[w],t=_.c2p(s.x),a=v.c2p(s.y);e.contains([t,a],null,s.i,L)?(h.push({pointNumber:s.i,x:_.c2d(s.x),y:v.c2d(s.y)}),s.selected=1):s.selected=0}return h}},58063:function(N,L,e){var T=e(39898),w=e(7901),i=e(91424);N.exports={style:function(_,v,h){var s=h||T.select(_).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var a=T.select(this),n=t[0].trace,r=n.line.width;function l(p,c,b,g){p.style("stroke-width",c+"px").call(w.stroke,b).call(w.fill,g)}var o=a.selectAll("path.box");if(n.type==="candlestick")o.each(function(p){if(!p.empty){var c=T.select(this),b=n[p.dir];l(c,b.line.width,b.line.color,b.fillcolor),c.style("opacity",n.selectedpoints&&!p.selected?.3:1)}});else{l(o,r,n.line.color,n.fillcolor),a.selectAll("path.mean").style({"stroke-width":r,"stroke-dasharray":2*r+"px,"+r+"px"}).call(w.stroke,n.line.color);var u=a.selectAll("path.point");i.pointStyle(u,n,_)}})},styleOnSelect:function(_,v,h){var s=v[0].trace,t=h.selectAll("path.point");s.selectedpoints?i.selectedPointStyle(t,s):i.pointStyle(t,s,_)}}},75343:function(N,L,e){var T=e(71828).extendFlat,w=e(12663).axisHoverFormat,i=e(2522),_=e(53522);function v(h){return{line:{color:T({},_.line.color,{dflt:h}),width:_.line.width,editType:"style"},fillcolor:_.fillcolor,editType:"style"}}N.exports={xperiod:i.xperiod,xperiod0:i.xperiod0,xperiodalignment:i.xperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),x:i.x,open:i.open,high:i.high,low:i.low,close:i.close,line:{width:T({},_.line.width,{}),editType:"style"},increasing:v(i.increasing.line.color.dflt),decreasing:v(i.decreasing.line.color.dflt),text:i.text,hovertext:i.hovertext,whiskerwidth:T({},_.whiskerwidth,{dflt:0}),hoverlabel:i.hoverlabel}},41197:function(N,L,e){var T=e(71828),w=e(89298),i=e(42973),_=e(3485).calcCommon;function v(h,s,t,a){return{min:t,q1:Math.min(h,a),med:a,q3:Math.max(h,a),max:s}}N.exports=function(h,s){var t=h._fullLayout,a=w.getFromId(h,s.xaxis),n=w.getFromId(h,s.yaxis),r=a.makeCalcdata(s,"x"),l=i(s,a,"x",r).vals,o=_(h,s,r,l,n,v);return o.length?(T.extendFlat(o[0].t,{num:t._numBoxes,dPos:T.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,o):[{t:{empty:!0}}]}},1026:function(N,L,e){var T=e(71828),w=e(7901),i=e(14555),_=e(73927),v=e(75343);function h(s,t,a,n){var r=a(n+".line.color");a(n+".line.width",t.line.width),a(n+".fillcolor",w.addOpacity(r,.5))}N.exports=function(s,t,a,n){function r(l,o){return T.coerce(s,t,v,l,o)}i(s,t,r,n)?(_(s,t,n,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),h(0,t,r,"increasing"),h(0,t,r,"decreasing"),r("text"),r("hovertext"),r("whiskerwidth"),n._requestRangeslider[t.xaxis]=!0):t.visible=!1}},91815:function(N,L,e){N.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(75343),layoutAttributes:e(40094),supplyLayoutDefaults:e(4199).supplyLayoutDefaults,crossTraceCalc:e(37188).crossTraceCalc,supplyDefaults:e(1026),calc:e(41197),plot:e(86047).plot,layerName:"boxlayer",style:e(58063).style,hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},13145:function(N,L,e){var T=e(11500),w=e(44467);N.exports=function(i,_,v,h,s){h("a")||(h("da"),h("a0")),h("b")||(h("db"),h("b0")),function(t,a,n,r){["aaxis","baxis"].forEach(function(l){var o=l.charAt(0),u=t[l]||{},p=w.newContainer(a,l),c={noTicklabelstep:!0,tickfont:"x",id:o+"axis",letter:o,font:a.font,name:l,data:t[o],calendar:a.calendar,dfltColor:r,bgColor:n.paper_bgcolor,autotypenumbersDflt:n.autotypenumbers,fullLayout:n};T(u,p,c),p._categories=p._categories||[],t[l]||u.type==="-"||(t[l]={type:u.type})})}(i,_,v,s)}},402:function(N,L,e){var T=e(71828).isArrayOrTypedArray;function w(i,_){if(!T(i)||_>=10)return null;for(var v=1/0,h=-1/0,s=i.length,t=0;t<s;t++){var a=i[t];if(T(a)){var n=w(a,_+1);n&&(v=Math.min(n[0],v),h=Math.max(n[1],h))}else v=Math.min(a,v),h=Math.max(a,h)}return[v,h]}N.exports=function(i){return w(i,0)}},99798:function(N,L,e){var T=e(41940),w=e(1928),i=e(22399),_=T({editType:"calc"});_.family.dflt='"Open Sans", verdana, arial, sans-serif',_.size.dflt=12,_.color.dflt=i.defaultLine,N.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:w,baxis:w,font:_,color:{valType:"color",dflt:i.defaultLine,editType:"plot"},transforms:void 0}},4536:function(N,L,e){var T=e(71828).isArrayOrTypedArray;N.exports=function(w,i,_,v){var h,s,t,a,n,r,l,o,u,p,c,b,g,d=T(_)?"a":"b",m=(d==="a"?w.aaxis:w.baxis).smoothing,x=d==="a"?w.a2i:w.b2j,y=d==="a"?_:v,k=d==="a"?v:_,f=d==="a"?i.a.length:i.b.length,S=d==="a"?i.b.length:i.a.length,M=Math.floor(d==="a"?w.b2j(k):w.a2i(k)),E=d==="a"?function(te){return w.evalxy([],te,M)}:function(te){return w.evalxy([],M,te)};m&&(t=Math.max(0,Math.min(S-2,M)),a=M-t,s=d==="a"?function(te,$){return w.dxydi([],te,t,$,a)}:function(te,$){return w.dxydj([],t,te,a,$)});var O=x(y[0]),P=x(y[1]),I=O<P?1:-1,z=1e-8*(P-O),U=I>0?Math.floor:Math.ceil,R=I>0?Math.ceil:Math.floor,j=I>0?Math.min:Math.max,Z=I>0?Math.max:Math.min,F=U(O+z),V=R(P-z),H=[[l=E(O)]];for(h=F;h*I<V*I;h+=I)n=[],c=Z(O,h),g=(b=j(P,h+I))-c,r=Math.max(0,Math.min(f-2,Math.floor(.5*(c+b)))),o=E(b),m&&(u=s(r,c-r),p=s(r,b-r),n.push([l[0]+u[0]/3*g,l[1]+u[1]/3*g]),n.push([o[0]-p[0]/3*g,o[1]-p[1]/3*g])),n.push(o),H.push(n),l=o;return H}},1928:function(N,L,e){var T=e(41940),w=e(22399),i=e(13838),_=e(12663).descriptionWithDates,v=e(30962).overrideAll,h=e(79952).P,s=e(1426).extendFlat;N.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:T({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:i.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},i.labelalias,{editType:"calc"}),tickfont:T({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:_("tick label")},tickformatstops:v(i.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:w.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},h,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},h,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:w.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:T({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(N,L,e){var T=e(99798),w=e(7901).addOpacity,i=e(73972),_=e(71828),v=e(26218),h=e(96115),s=e(89426),t=e(15258),a=e(21994),n=e(4322);N.exports=function(r,l,o){var u=o.letter,p=o.font||{},c=T[u+"axis"];function b(I,z){return _.coerce(r,l,c,I,z)}function g(I,z){return _.coerce2(r,l,c,I,z)}o.name&&(l._name=o.name,l._id=o.name),b("autotypenumbers",o.autotypenumbersDflt);var d=b("type");d==="-"&&(o.data&&function(I,z){if(I.type==="-"){var U=I._id.charAt(0),R=I[U+"calendar"];I.type=n(z,R,{autotypenumbers:I.autotypenumbers})}}(l,o.data),l.type==="-"?l.type="linear":d=r.type=l.type),b("smoothing"),b("cheatertype"),b("showticklabels"),b("labelprefix",u+" = "),b("labelsuffix"),b("showtickprefix"),b("showticksuffix"),b("separatethousands"),b("tickformat"),b("exponentformat"),b("minexponent"),b("showexponent"),b("categoryorder"),b("tickmode"),b("tickvals"),b("ticktext"),b("tick0"),b("dtick"),l.tickmode==="array"&&(b("arraytick0"),b("arraydtick")),b("labelpadding"),l._hovertitle=u,d==="date"&&i.getComponentMethod("calendars","handleDefaults")(r,l,"calendar",o.calendar),a(l,o.fullLayout),l.c2p=_.identity;var m=b("color",o.dfltColor),x=m===r.color?m:p.color;b("title.text")&&(_.coerceFont(b,"title.font",{family:p.family,size:_.bigFont(p.size),color:x}),b("title.offset")),b("tickangle"),b("autorange",!l.isValidRange(r.range))&&b("rangemode"),b("range"),l.cleanRange(),b("fixedrange"),v(r,l,b,d),s(r,l,b,d,o),h(r,l,b,d,o),t(r,l,b,{data:o.data,dataAttr:u});var y=g("gridcolor",w(m,.3)),k=g("gridwidth"),f=g("griddash"),S=b("showgrid");S||(delete l.gridcolor,delete l.gridwidth,delete l.griddash);var M=g("startlinecolor",m),E=g("startlinewidth",k);b("startline",l.showgrid||!!M||!!E)||(delete l.startlinecolor,delete l.startlinewidth);var O=g("endlinecolor",m),P=g("endlinewidth",k);return b("endline",l.showgrid||!!O||!!P)||(delete l.endlinecolor,delete l.endlinewidth),S?(b("minorgridcount"),b("minorgridwidth",k),b("minorgriddash",f),b("minorgridcolor",w(y,.06)),l.minorgridcount||(delete l.minorgridwidth,delete l.minorgriddash,delete l.minorgridcolor)):(delete l.gridcolor,delete l.gridwidth,delete l.griddash),l.showticklabels==="none"&&(delete l.tickfont,delete l.tickangle,delete l.showexponent,delete l.exponentformat,delete l.minexponent,delete l.tickformat,delete l.showticksuffix,delete l.showtickprefix),l.showticksuffix||delete l.ticksuffix,l.showtickprefix||delete l.tickprefix,b("tickmode"),l}},25281:function(N,L,e){var T=e(89298),w=e(71828).isArray1D,i=e(53824),_=e(402),v=e(20347),h=e(83311),s=e(44807),t=e(4742),a=e(72505),n=e(68296),r=e(11435);N.exports=function(l,o){var u=T.getFromId(l,o.xaxis),p=T.getFromId(l,o.yaxis),c=o.aaxis,b=o.baxis,g=o.x,d=o.y,m=[];g&&w(g)&&m.push("x"),d&&w(d)&&m.push("y"),m.length&&n(o,c,b,"a","b",m);var x=o._a=o._a||o.a,y=o._b=o._b||o.b;g=o._x||o.x,d=o._y||o.y;var k={};if(o._cheater){var f=c.cheatertype==="index"?x.length:x,S=b.cheatertype==="index"?y.length:y;g=i(f,S,o.cheaterslope)}o._x=g=t(g),o._y=d=t(d),a(g,x,y),a(d,x,y),r(o),o.setScale();var M=_(g),E=_(d),O=.5*(M[1]-M[0]),P=.5*(M[1]+M[0]),I=.5*(E[1]-E[0]),z=.5*(E[1]+E[0]),U=1.3;return M=[P-O*U,P+O*U],E=[z-I*U,z+I*U],o._extremes[u._id]=T.findExtremes(u,M,{padded:!0}),o._extremes[p._id]=T.findExtremes(p,E,{padded:!0}),v(o,"a","b"),v(o,"b","a"),h(o,c),h(o,b),k.clipsegments=s(o._xctrl,o._yctrl,c,b),k.x=g,k.y=d,k.a=x,k.b=y,[k]}},44807:function(N){N.exports=function(L,e,T,w){var i,_,v,h=[],s=!!T.smoothing,t=!!w.smoothing,a=L[0].length-1,n=L.length-1;for(i=0,_=[],v=[];i<=a;i++)_[i]=L[0][i],v[i]=e[0][i];for(h.push({x:_,y:v,bicubic:s}),i=0,_=[],v=[];i<=n;i++)_[i]=L[i][a],v[i]=e[i][a];for(h.push({x:_,y:v,bicubic:t}),i=a,_=[],v=[];i>=0;i--)_[a-i]=L[n][i],v[a-i]=e[n][i];for(h.push({x:_,y:v,bicubic:s}),i=n,_=[],v=[];i>=0;i--)_[n-i]=L[i][0],v[n-i]=e[i][0];return h.push({x:_,y:v,bicubic:t}),h}},20347:function(N,L,e){var T=e(89298),w=e(1426).extendFlat;N.exports=function(i,_,v){var h,s,t,a,n,r,l,o,u,p,c,b,g,d,m=i["_"+_],x=i[_+"axis"],y=x._gridlines=[],k=x._minorgridlines=[],f=x._boundarylines=[],S=i["_"+v],M=i[v+"axis"];x.tickmode==="array"&&(x.tickvals=m.slice());var E=i._xctrl,O=i._yctrl,P=E[0].length,I=E.length,z=i._a.length,U=i._b.length;T.prepTicks(x),x.tickmode==="array"&&delete x.tickvals;var R=x.smoothing?3:1;function j(F){var V,H,te,$,J,X,K,ee,ie,ae,oe,fe,ge=[],ve=[],xe={};if(_==="b")for(H=i.b2j(F),te=Math.floor(Math.max(0,Math.min(U-2,H))),$=H-te,xe.length=U,xe.crossLength=z,xe.xy=function(_e){return i.evalxy([],_e,H)},xe.dxy=function(_e,ye){return i.dxydi([],_e,te,ye,$)},V=0;V<z;V++)X=Math.min(z-2,V),K=V-X,ee=i.evalxy([],V,H),M.smoothing&&V>0&&(ie=i.dxydi([],V-1,te,0,$),ge.push(J[0]+ie[0]/3),ve.push(J[1]+ie[1]/3),ae=i.dxydi([],V-1,te,1,$),ge.push(ee[0]-ae[0]/3),ve.push(ee[1]-ae[1]/3)),ge.push(ee[0]),ve.push(ee[1]),J=ee;else for(V=i.a2i(F),X=Math.floor(Math.max(0,Math.min(z-2,V))),K=V-X,xe.length=z,xe.crossLength=U,xe.xy=function(_e){return i.evalxy([],V,_e)},xe.dxy=function(_e,ye){return i.dxydj([],X,_e,K,ye)},H=0;H<U;H++)te=Math.min(U-2,H),$=H-te,ee=i.evalxy([],V,H),M.smoothing&&H>0&&(oe=i.dxydj([],X,H-1,K,0),ge.push(J[0]+oe[0]/3),ve.push(J[1]+oe[1]/3),fe=i.dxydj([],X,H-1,K,1),ge.push(ee[0]-fe[0]/3),ve.push(ee[1]-fe[1]/3)),ge.push(ee[0]),ve.push(ee[1]),J=ee;return xe.axisLetter=_,xe.axis=x,xe.crossAxis=M,xe.value=F,xe.constvar=v,xe.index=o,xe.x=ge,xe.y=ve,xe.smoothing=M.smoothing,xe}function Z(F){var V,H,te,$,J,X=[],K=[],ee={};if(ee.length=m.length,ee.crossLength=S.length,_==="b")for(te=Math.max(0,Math.min(U-2,F)),J=Math.min(1,Math.max(0,F-te)),ee.xy=function(ie){return i.evalxy([],ie,F)},ee.dxy=function(ie,ae){return i.dxydi([],ie,te,ae,J)},V=0;V<P;V++)X[V]=E[F*R][V],K[V]=O[F*R][V];else for(H=Math.max(0,Math.min(z-2,F)),$=Math.min(1,Math.max(0,F-H)),ee.xy=function(ie){return i.evalxy([],F,ie)},ee.dxy=function(ie,ae){return i.dxydj([],H,ie,$,ae)},V=0;V<I;V++)X[V]=E[V][F*R],K[V]=O[V][F*R];return ee.axisLetter=_,ee.axis=x,ee.crossAxis=M,ee.value=m[F],ee.constvar=v,ee.index=F,ee.x=X,ee.y=K,ee.smoothing=M.smoothing,ee}if(x.tickmode==="array"){for(a=5e-15,r=(n=[Math.floor((m.length-1-x.arraytick0)/x.arraydtick*(1+a)),Math.ceil(-x.arraytick0/x.arraydtick/(1+a))].sort(function(F,V){return F-V}))[0]-1,l=n[1]+1,o=r;o<l;o++)(s=x.arraytick0+x.arraydtick*o)<0||s>m.length-1||y.push(w(Z(s),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(o=r;o<l;o++)if(t=x.arraytick0+x.arraydtick*o,c=Math.min(t+x.arraydtick,m.length-1),!(t<0||t>m.length-1||c<0||c>m.length-1))for(b=m[t],g=m[c],h=0;h<x.minorgridcount;h++)(d=c-t)<=0||(p=b+(g-b)*(h+1)/(x.minorgridcount+1)*(x.arraydtick/d))<m[0]||p>m[m.length-1]||k.push(w(j(p),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&f.push(w(Z(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&f.push(w(Z(m.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(a=5e-15,r=(n=[Math.floor((m[m.length-1]-x.tick0)/x.dtick*(1+a)),Math.ceil((m[0]-x.tick0)/x.dtick/(1+a))].sort(function(F,V){return F-V}))[0],l=n[1],o=r;o<=l;o++)u=x.tick0+x.dtick*o,y.push(w(j(u),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(o=r-1;o<l+1;o++)for(u=x.tick0+x.dtick*o,h=0;h<x.minorgridcount;h++)(p=u+x.dtick*(h+1)/(x.minorgridcount+1))<m[0]||p>m[m.length-1]||k.push(w(j(p),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&f.push(w(j(m[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&f.push(w(j(m[m.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},83311:function(N,L,e){var T=e(89298),w=e(1426).extendFlat;N.exports=function(i,_){var v,h,s,t=_._labels=[],a=_._gridlines;for(v=0;v<a.length;v++)s=a[v],["start","both"].indexOf(_.showticklabels)!==-1&&(h=T.tickText(_,s.value),w(h,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:v===0,isLast:v===a.length-1}),t.push(h)),["end","both"].indexOf(_.showticklabels)!==-1&&(h=T.tickText(_,s.value),w(h,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:v===0,isLast:v===a.length-1}),t.push(h))}},42048:function(N){N.exports=function(L,e,T,w){var i=L[0]-e[0],_=L[1]-e[1],v=T[0]-e[0],h=T[1]-e[1],s=Math.pow(i*i+_*_,.25),t=Math.pow(v*v+h*h,.25),a=(t*t*i-s*s*v)*w,n=(t*t*_-s*s*h)*w,r=t*(s+t)*3,l=s*(s+t)*3;return[[e[0]+(r&&a/r),e[1]+(r&&n/r)],[e[0]-(l&&a/l),e[1]-(l&&n/l)]]}},53824:function(N,L,e){var T=e(71828).isArrayOrTypedArray;N.exports=function(w,i,_){var v,h,s,t,a,n,r=[],l=T(w)?w.length:w,o=T(i)?i.length:i,u=T(w)?w:null,p=T(i)?i:null;u&&(s=(u.length-1)/(u[u.length-1]-u[0])/(l-1)),p&&(t=(p.length-1)/(p[p.length-1]-p[0])/(o-1));var c=1/0,b=-1/0;for(h=0;h<o;h++)for(r[h]=[],a=p?(p[h]-p[0])*t:h/(o-1),v=0;v<l;v++)n=(u?(u[v]-u[0])*s:v/(l-1))-a*_,c=Math.min(n,c),b=Math.max(n,b),r[h][v]=n;var g=1/(b-c),d=-c*g;for(h=0;h<o;h++)for(v=0;v<l;v++)r[h][v]=g*r[h][v]+d;return r}},45664:function(N,L,e){var T=e(42048),w=e(71828).ensureArray;function i(_,v,h){var s=-.5*h[0]+1.5*v[0],t=-.5*h[1]+1.5*v[1];return[(2*s+_[0])/3,(2*t+_[1])/3]}N.exports=function(_,v,h,s,t,a){var n,r,l,o,u,p,c,b,g,d,m=h[0].length,x=h.length,y=t?3*m-2:m,k=a?3*x-2:x;for(_=w(_,k),v=w(v,k),l=0;l<k;l++)_[l]=w(_[l],y),v[l]=w(v[l],y);for(r=0,o=0;r<x;r++,o+=a?3:1)for(u=_[o],p=v[o],c=h[r],b=s[r],n=0,l=0;n<m;n++,l+=t?3:1)u[l]=c[n],p[l]=b[n];if(t)for(r=0,o=0;r<x;r++,o+=a?3:1){for(n=1,l=3;n<m-1;n++,l+=3)g=T([h[r][n-1],s[r][n-1]],[h[r][n],s[r][n]],[h[r][n+1],s[r][n+1]],t),_[o][l-1]=g[0][0],v[o][l-1]=g[0][1],_[o][l+1]=g[1][0],v[o][l+1]=g[1][1];d=i([_[o][0],v[o][0]],[_[o][2],v[o][2]],[_[o][3],v[o][3]]),_[o][1]=d[0],v[o][1]=d[1],d=i([_[o][y-1],v[o][y-1]],[_[o][y-3],v[o][y-3]],[_[o][y-4],v[o][y-4]]),_[o][y-2]=d[0],v[o][y-2]=d[1]}if(a)for(l=0;l<y;l++){for(o=3;o<k-3;o+=3)g=T([_[o-3][l],v[o-3][l]],[_[o][l],v[o][l]],[_[o+3][l],v[o+3][l]],a),_[o-1][l]=g[0][0],v[o-1][l]=g[0][1],_[o+1][l]=g[1][0],v[o+1][l]=g[1][1];d=i([_[0][l],v[0][l]],[_[2][l],v[2][l]],[_[3][l],v[3][l]]),_[1][l]=d[0],v[1][l]=d[1],d=i([_[k-1][l],v[k-1][l]],[_[k-3][l],v[k-3][l]],[_[k-4][l],v[k-4][l]]),_[k-2][l]=d[0],v[k-2][l]=d[1]}if(t&&a)for(o=1;o<k;o+=(o+1)%3==0?2:1){for(l=3;l<y-3;l+=3)g=T([_[o][l-3],v[o][l-3]],[_[o][l],v[o][l]],[_[o][l+3],v[o][l+3]],t),_[o][l-1]=.5*(_[o][l-1]+g[0][0]),v[o][l-1]=.5*(v[o][l-1]+g[0][1]),_[o][l+1]=.5*(_[o][l+1]+g[1][0]),v[o][l+1]=.5*(v[o][l+1]+g[1][1]);d=i([_[o][0],v[o][0]],[_[o][2],v[o][2]],[_[o][3],v[o][3]]),_[o][1]=.5*(_[o][1]+d[0]),v[o][1]=.5*(v[o][1]+d[1]),d=i([_[o][y-1],v[o][y-1]],[_[o][y-3],v[o][y-3]],[_[o][y-4],v[o][y-4]]),_[o][y-2]=.5*(_[o][y-2]+d[0]),v[o][y-2]=.5*(v[o][y-2]+d[1])}return[_,v]}},35509:function(N){N.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(N){N.exports=function(L,e,T){return e&&T?function(w,i,_,v,h){var s,t,a,n,r,l;w||(w=[]),i*=3,_*=3;var o=v*v,u=1-v,p=u*u,c=u*v*2,b=-3*p,g=3*(p-c),d=3*(c-o),m=3*o,x=h*h,y=x*h,k=1-h,f=k*k,S=f*k;for(l=0;l<L.length;l++)s=b*(r=L[l])[_][i]+g*r[_][i+1]+d*r[_][i+2]+m*r[_][i+3],t=b*r[_+1][i]+g*r[_+1][i+1]+d*r[_+1][i+2]+m*r[_+1][i+3],a=b*r[_+2][i]+g*r[_+2][i+1]+d*r[_+2][i+2]+m*r[_+2][i+3],n=b*r[_+3][i]+g*r[_+3][i+1]+d*r[_+3][i+2]+m*r[_+3][i+3],w[l]=S*s+3*(f*h*t+k*x*a)+y*n;return w}:e?function(w,i,_,v,h){var s,t,a,n;w||(w=[]),i*=3;var r=v*v,l=1-v,o=l*l,u=l*v*2,p=-3*o,c=3*(o-u),b=3*(u-r),g=3*r,d=1-h;for(a=0;a<L.length;a++)s=p*(n=L[a])[_][i]+c*n[_][i+1]+b*n[_][i+2]+g*n[_][i+3],t=p*n[_+1][i]+c*n[_+1][i+1]+b*n[_+1][i+2]+g*n[_+1][i+3],w[a]=d*s+h*t;return w}:T?function(w,i,_,v,h){var s,t,a,n,r,l;w||(w=[]),_*=3;var o=h*h,u=o*h,p=1-h,c=p*p,b=c*p;for(r=0;r<L.length;r++)s=(l=L[r])[_][i+1]-l[_][i],t=l[_+1][i+1]-l[_+1][i],a=l[_+2][i+1]-l[_+2][i],n=l[_+3][i+1]-l[_+3][i],w[r]=b*s+3*(c*h*t+p*o*a)+u*n;return w}:function(w,i,_,v,h){var s,t,a,n;w||(w=[]);var r=1-h;for(a=0;a<L.length;a++)s=(n=L[a])[_][i+1]-n[_][i],t=n[_+1][i+1]-n[_+1][i],w[a]=r*s+h*t;return w}}},73057:function(N){N.exports=function(L,e,T){return e&&T?function(w,i,_,v,h){var s,t,a,n,r,l;w||(w=[]),i*=3,_*=3;var o=v*v,u=o*v,p=1-v,c=p*p,b=c*p,g=h*h,d=1-h,m=d*d,x=d*h*2,y=-3*m,k=3*(m-x),f=3*(x-g),S=3*g;for(l=0;l<L.length;l++)s=y*(r=L[l])[_][i]+k*r[_+1][i]+f*r[_+2][i]+S*r[_+3][i],t=y*r[_][i+1]+k*r[_+1][i+1]+f*r[_+2][i+1]+S*r[_+3][i+1],a=y*r[_][i+2]+k*r[_+1][i+2]+f*r[_+2][i+2]+S*r[_+3][i+2],n=y*r[_][i+3]+k*r[_+1][i+3]+f*r[_+2][i+3]+S*r[_+3][i+3],w[l]=b*s+3*(c*v*t+p*o*a)+u*n;return w}:e?function(w,i,_,v,h){var s,t,a,n,r,l;w||(w=[]),i*=3;var o=h*h,u=o*h,p=1-h,c=p*p,b=c*p;for(r=0;r<L.length;r++)s=(l=L[r])[_+1][i]-l[_][i],t=l[_+1][i+1]-l[_][i+1],a=l[_+1][i+2]-l[_][i+2],n=l[_+1][i+3]-l[_][i+3],w[r]=b*s+3*(c*h*t+p*o*a)+u*n;return w}:T?function(w,i,_,v,h){var s,t,a,n;w||(w=[]),_*=3;var r=1-v,l=h*h,o=1-h,u=o*o,p=o*h*2,c=-3*u,b=3*(u-p),g=3*(p-l),d=3*l;for(a=0;a<L.length;a++)s=c*(n=L[a])[_][i]+b*n[_+1][i]+g*n[_+2][i]+d*n[_+3][i],t=c*n[_][i+1]+b*n[_+1][i+1]+g*n[_+2][i+1]+d*n[_+3][i+1],w[a]=r*s+v*t;return w}:function(w,i,_,v,h){var s,t,a,n;w||(w=[]);var r=1-v;for(a=0;a<L.length;a++)s=(n=L[a])[_+1][i]-n[_][i],t=n[_+1][i+1]-n[_][i+1],w[a]=r*s+v*t;return w}}},20349:function(N){N.exports=function(L,e,T,w,i){var _=e-2,v=T-2;return w&&i?function(h,s,t){var a,n,r,l,o,u;h||(h=[]);var p=Math.max(0,Math.min(Math.floor(s),_)),c=Math.max(0,Math.min(Math.floor(t),v)),b=Math.max(0,Math.min(1,s-p)),g=Math.max(0,Math.min(1,t-c));p*=3,c*=3;var d=b*b,m=d*b,x=1-b,y=x*x,k=y*x,f=g*g,S=f*g,M=1-g,E=M*M,O=E*M;for(u=0;u<L.length;u++)a=k*(o=L[u])[c][p]+3*(y*b*o[c][p+1]+x*d*o[c][p+2])+m*o[c][p+3],n=k*o[c+1][p]+3*(y*b*o[c+1][p+1]+x*d*o[c+1][p+2])+m*o[c+1][p+3],r=k*o[c+2][p]+3*(y*b*o[c+2][p+1]+x*d*o[c+2][p+2])+m*o[c+2][p+3],l=k*o[c+3][p]+3*(y*b*o[c+3][p+1]+x*d*o[c+3][p+2])+m*o[c+3][p+3],h[u]=O*a+3*(E*g*n+M*f*r)+S*l;return h}:w?function(h,s,t){h||(h=[]);var a,n,r,l,o,u,p=Math.max(0,Math.min(Math.floor(s),_)),c=Math.max(0,Math.min(Math.floor(t),v)),b=Math.max(0,Math.min(1,s-p)),g=Math.max(0,Math.min(1,t-c));p*=3;var d=b*b,m=d*b,x=1-b,y=x*x,k=y*x,f=1-g;for(o=0;o<L.length;o++)a=f*(u=L[o])[c][p]+g*u[c+1][p],n=f*u[c][p+1]+g*u[c+1][p+1],r=f*u[c][p+2]+g*u[c+1][p+1],l=f*u[c][p+3]+g*u[c+1][p+1],h[o]=k*a+3*(y*b*n+x*d*r)+m*l;return h}:i?function(h,s,t){h||(h=[]);var a,n,r,l,o,u,p=Math.max(0,Math.min(Math.floor(s),_)),c=Math.max(0,Math.min(Math.floor(t),v)),b=Math.max(0,Math.min(1,s-p)),g=Math.max(0,Math.min(1,t-c));c*=3;var d=g*g,m=d*g,x=1-g,y=x*x,k=y*x,f=1-b;for(o=0;o<L.length;o++)a=f*(u=L[o])[c][p]+b*u[c][p+1],n=f*u[c+1][p]+b*u[c+1][p+1],r=f*u[c+2][p]+b*u[c+2][p+1],l=f*u[c+3][p]+b*u[c+3][p+1],h[o]=k*a+3*(y*g*n+x*d*r)+m*l;return h}:function(h,s,t){h||(h=[]);var a,n,r,l,o=Math.max(0,Math.min(Math.floor(s),_)),u=Math.max(0,Math.min(Math.floor(t),v)),p=Math.max(0,Math.min(1,s-o)),c=Math.max(0,Math.min(1,t-u)),b=1-c,g=1-p;for(r=0;r<L.length;r++)a=g*(l=L[r])[u][o]+p*l[u][o+1],n=g*l[u+1][o]+p*l[u+1][o+1],h[r]=b*a+c*n;return h}}},92087:function(N,L,e){var T=e(71828),w=e(19237),i=e(13145),_=e(99798),v=e(22399);N.exports=function(h,s,t,a){function n(l,o){return T.coerce(h,s,_,l,o)}s._clipPathId="clip"+s.uid+"carpet";var r=n("color",v.defaultLine);T.coerceFont(n,"font"),n("carpet"),i(h,s,a,n,r),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),w(h,s,n)||(s.visible=!1),s._cheater&&n("cheaterslope")):s.visible=!1}},21462:function(N,L,e){N.exports={attributes:e(99798),supplyDefaults:e(92087),plot:e(89740),calc:e(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(N){N.exports=function(L,e){for(var T,w=L._fullData.length,i=0;i<w;i++){var _=L._fullData[i];if(_.index!==e.index&&_.type==="carpet"&&(T||(T=_),_.carpet===e.carpet))return _}return T}},67961:function(N){N.exports=function(L,e,T){if(L.length===0)return"";var w,i=[],_=T?3:1;for(w=0;w<L.length;w+=_)i.push(L[w]+","+e[w]),T&&w<L.length-_&&(i.push("C"),i.push([L[w+1]+","+e[w+1],L[w+2]+","+e[w+2]+" "].join(" ")));return i.join(T?"":"L")}},27669:function(N,L,e){var T=e(71828).isArrayOrTypedArray;N.exports=function(w,i,_){var v;for(T(w)?w.length>i.length&&(w=w.slice(0,i.length)):w=[],v=0;v<i.length;v++)w[v]=_(i[v]);return w}},11651:function(N){N.exports=function(L,e,T,w,i,_){var v=i[0]*L.dpdx(e),h=i[1]*L.dpdy(T),s=1,t=1;if(_){var a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),n=Math.sqrt(_[0]*_[0]+_[1]*_[1]),r=(i[0]*_[0]+i[1]*_[1])/a/n;t=Math.max(0,r)}var l=180*Math.atan2(h,v)/Math.PI;return l<-90?(l+=180,s=-s):l>90&&(l-=180,s=-s),{angle:l,flip:s,p:L.c2p(w,e,T),offsetMultplier:t}}},89740:function(N,L,e){var T=e(39898),w=e(91424),i=e(27669),_=e(67961),v=e(11651),h=e(63893),s=e(71828),t=s.strRotate,a=s.strTranslate,n=e(18783);function r(c,b,g,d,m,x,y){var k="const-"+m+"-lines",f=g.selectAll("."+k).data(x);f.enter().append("path").classed(k,!0).style("vector-effect",y?"none":"non-scaling-stroke"),f.each(function(S){var M=S,E=M.x,O=M.y,P=i([],E,c.c2p),I=i([],O,b.c2p),z="M"+_(P,I,M.smoothing);T.select(this).attr("d",z).style("stroke-width",M.width).style("stroke",M.color).style("stroke-dasharray",w.dashStyle(M.dash,M.width)).style("fill","none")}),f.exit().remove()}function l(c,b,g,d,m,x,y,k){var f=x.selectAll("text."+k).data(y);f.enter().append("text").classed(k,!0);var S=0,M={};return f.each(function(E,O){var P;if(E.axis.tickangle==="auto")P=v(d,b,g,E.xy,E.dxy);else{var I=(E.axis.tickangle+180)*Math.PI/180;P=v(d,b,g,E.xy,[Math.cos(I),Math.sin(I)])}O||(M={angle:P.angle,flip:P.flip});var z=(E.endAnchor?-1:1)*P.flip,U=T.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(w.font,E.font).text(E.text).call(h.convertToTspans,c),R=w.bBox(this);U.attr("transform",a(P.p[0],P.p[1])+t(P.angle)+a(E.axis.labelpadding*z,.3*R.height)),S=Math.max(S,R.width+E.axis.labelpadding)}),f.exit().remove(),M.maxExtent=S,M}N.exports=function(c,b,g,d){var m=c._context.staticPlot,x=b.xaxis,y=b.yaxis,k=c._fullLayout._clips;s.makeTraceGroups(d,g,"trace").each(function(f){var S=T.select(this),M=f[0],E=M.trace,O=E.aaxis,P=E.baxis,I=s.ensureSingle(S,"g","minorlayer"),z=s.ensureSingle(S,"g","majorlayer"),U=s.ensureSingle(S,"g","boundarylayer"),R=s.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),r(x,y,z,0,"a",O._gridlines,!0),r(x,y,z,0,"b",P._gridlines,!0),r(x,y,I,0,"a",O._minorgridlines,!0),r(x,y,I,0,"b",P._minorgridlines,!0),r(x,y,U,0,"a-boundary",O._boundarylines,m),r(x,y,U,0,"b-boundary",P._boundarylines,m);var j=l(c,x,y,E,0,R,O._labels,"a-label"),Z=l(c,x,y,E,0,R,P._labels,"b-label");(function(F,V,H,te,$,J,X,K){var ee,ie,ae,oe,fe=s.aggNums(Math.min,null,H.a),ge=s.aggNums(Math.max,null,H.a),ve=s.aggNums(Math.min,null,H.b),xe=s.aggNums(Math.max,null,H.b);ee=.5*(fe+ge),ie=ve,ae=H.ab2xy(ee,ie,!0),oe=H.dxyda_rough(ee,ie),X.angle===void 0&&s.extendFlat(X,v(H,$,J,ae,H.dxydb_rough(ee,ie))),p(F,V,H,0,ae,oe,H.aaxis,$,J,X,"a-title"),ee=fe,ie=.5*(ve+xe),ae=H.ab2xy(ee,ie,!0),oe=H.dxydb_rough(ee,ie),K.angle===void 0&&s.extendFlat(K,v(H,$,J,ae,H.dxyda_rough(ee,ie))),p(F,V,H,0,ae,oe,H.baxis,$,J,K,"b-title")})(c,R,E,0,x,y,j,Z),function(F,V,H,te,$){var J,X,K,ee,ie=H.select("#"+F._clipPathId);ie.size()||(ie=H.append("clipPath").classed("carpetclip",!0));var ae=s.ensureSingle(ie,"path","carpetboundary"),oe=V.clipsegments,fe=[];for(ee=0;ee<oe.length;ee++)J=oe[ee],X=i([],J.x,te.c2p),K=i([],J.y,$.c2p),fe.push(_(X,K,J.bicubic));var ge="M"+fe.join("L")+"Z";ie.attr("id",F._clipPathId),ae.attr("d",ge)}(E,M,k,x,y)})};var o=n.LINE_SPACING,u=(1-n.MID_SHIFT)/o+1;function p(c,b,g,d,m,x,y,k,f,S,M){var E=[];y.title.text&&E.push(y.title.text);var O=b.selectAll("text."+M).data(E),P=S.maxExtent;O.enter().append("text").classed(M,!0),O.each(function(){var I=v(g,k,f,m,x);["start","both"].indexOf(y.showticklabels)===-1&&(P=0);var z=y.title.font.size;P+=z+y.title.offset;var U=(S.angle+(S.flip<0?180:0)-I.angle+450)%360,R=U>90&&U<270,j=T.select(this);j.text(y.title.text).call(h.convertToTspans,c),R&&(P=(-h.lineCount(j)+u)*o*z-P),j.attr("transform",a(I.p[0],I.p[1])+t(I.angle)+a(0,P)).attr("text-anchor","middle").call(w.font,y.title.font)}),O.exit().remove()}},11435:function(N,L,e){var T=e(35509),w=e(65888).findBin,i=e(45664),_=e(20349),v=e(54495),h=e(73057);N.exports=function(s){var t=s._a,a=s._b,n=t.length,r=a.length,l=s.aaxis,o=s.baxis,u=t[0],p=t[n-1],c=a[0],b=a[r-1],g=t[t.length-1]-t[0],d=a[a.length-1]-a[0],m=g*T.RELATIVE_CULL_TOLERANCE,x=d*T.RELATIVE_CULL_TOLERANCE;u-=m,p+=m,c-=x,b+=x,s.isVisible=function(y,k){return y>u&&y<p&&k>c&&k<b},s.isOccluded=function(y,k){return y<u||y>p||k<c||k>b},s.setScale=function(){var y=s._x,k=s._y,f=i(s._xctrl,s._yctrl,y,k,l.smoothing,o.smoothing);s._xctrl=f[0],s._yctrl=f[1],s.evalxy=_([s._xctrl,s._yctrl],n,r,l.smoothing,o.smoothing),s.dxydi=v([s._xctrl,s._yctrl],l.smoothing,o.smoothing),s.dxydj=h([s._xctrl,s._yctrl],l.smoothing,o.smoothing)},s.i2a=function(y){var k=Math.max(0,Math.floor(y[0]),n-2),f=y[0]-k;return(1-f)*t[k]+f*t[k+1]},s.j2b=function(y){var k=Math.max(0,Math.floor(y[1]),n-2),f=y[1]-k;return(1-f)*a[k]+f*a[k+1]},s.ij2ab=function(y){return[s.i2a(y[0]),s.j2b(y[1])]},s.a2i=function(y){var k=Math.max(0,Math.min(w(y,t),n-2)),f=t[k],S=t[k+1];return Math.max(0,Math.min(n-1,k+(y-f)/(S-f)))},s.b2j=function(y){var k=Math.max(0,Math.min(w(y,a),r-2)),f=a[k],S=a[k+1];return Math.max(0,Math.min(r-1,k+(y-f)/(S-f)))},s.ab2ij=function(y){return[s.a2i(y[0]),s.b2j(y[1])]},s.i2c=function(y,k){return s.evalxy([],y,k)},s.ab2xy=function(y,k,f){if(!f&&(y<t[0]||y>t[n-1]|k<a[0]||k>a[r-1]))return[!1,!1];var S=s.a2i(y),M=s.b2j(k),E=s.evalxy([],S,M);if(f){var O,P,I,z,U=0,R=0,j=[];y<t[0]?(O=0,P=0,U=(y-t[0])/(t[1]-t[0])):y>t[n-1]?(O=n-2,P=1,U=(y-t[n-1])/(t[n-1]-t[n-2])):P=S-(O=Math.max(0,Math.min(n-2,Math.floor(S)))),k<a[0]?(I=0,z=0,R=(k-a[0])/(a[1]-a[0])):k>a[r-1]?(I=r-2,z=1,R=(k-a[r-1])/(a[r-1]-a[r-2])):z=M-(I=Math.max(0,Math.min(r-2,Math.floor(M)))),U&&(s.dxydi(j,O,I,P,z),E[0]+=j[0]*U,E[1]+=j[1]*U),R&&(s.dxydj(j,O,I,P,z),E[0]+=j[0]*R,E[1]+=j[1]*R)}return E},s.c2p=function(y,k,f){return[k.c2p(y[0]),f.c2p(y[1])]},s.p2x=function(y,k,f){return[k.p2c(y[0]),f.p2c(y[1])]},s.dadi=function(y){var k=Math.max(0,Math.min(t.length-2,y));return t[k+1]-t[k]},s.dbdj=function(y){var k=Math.max(0,Math.min(a.length-2,y));return a[k+1]-a[k]},s.dxyda=function(y,k,f,S){var M=s.dxydi(null,y,k,f,S),E=s.dadi(y,f);return[M[0]/E,M[1]/E]},s.dxydb=function(y,k,f,S){var M=s.dxydj(null,y,k,f,S),E=s.dbdj(k,S);return[M[0]/E,M[1]/E]},s.dxyda_rough=function(y,k,f){var S=g*(f||.1),M=s.ab2xy(y+S,k,!0),E=s.ab2xy(y-S,k,!0);return[.5*(M[0]-E[0])/S,.5*(M[1]-E[1])/S]},s.dxydb_rough=function(y,k,f){var S=d*(f||.1),M=s.ab2xy(y,k+S,!0),E=s.ab2xy(y,k-S,!0);return[.5*(M[0]-E[0])/S,.5*(M[1]-E[1])/S]},s.dpdx=function(y){return y._m},s.dpdy=function(y){return y._m}}},72505:function(N,L,e){var T=e(71828);N.exports=function(w,i,_){var v,h,s,t=[],a=[],n=w[0].length,r=w.length;function l(F,V){var H,te=0,$=0;return F>0&&(H=w[V][F-1])!==void 0&&($++,te+=H),F<n-1&&(H=w[V][F+1])!==void 0&&($++,te+=H),V>0&&(H=w[V-1][F])!==void 0&&($++,te+=H),V<r-1&&(H=w[V+1][F])!==void 0&&($++,te+=H),te/Math.max(1,$)}var o,u,p,c,b,g,d,m,x,y,k,f=0;for(v=0;v<n;v++)for(h=0;h<r;h++)w[h][v]===void 0&&(t.push(v),a.push(h),w[h][v]=l(v,h)),f=Math.max(f,Math.abs(w[h][v]));if(!t.length)return w;var S=0,M=0,E=t.length;do{for(S=0,s=0;s<E;s++){v=t[s],h=a[s];var O,P,I,z,U,R,j=0,Z=0;v===0?(I=i[U=Math.min(n-1,2)],z=i[1],O=w[h][U],Z+=(P=w[h][1])+(P-O)*(i[0]-z)/(z-I),j++):v===n-1&&(I=i[U=Math.max(0,n-3)],z=i[n-2],O=w[h][U],Z+=(P=w[h][n-2])+(P-O)*(i[n-1]-z)/(z-I),j++),(v===0||v===n-1)&&h>0&&h<r-1&&(o=_[h+1]-_[h],Z+=((u=_[h]-_[h-1])*w[h+1][v]+o*w[h-1][v])/(u+o),j++),h===0?(I=_[R=Math.min(r-1,2)],z=_[1],O=w[R][v],Z+=(P=w[1][v])+(P-O)*(_[0]-z)/(z-I),j++):h===r-1&&(I=_[R=Math.max(0,r-3)],z=_[r-2],O=w[R][v],Z+=(P=w[r-2][v])+(P-O)*(_[r-1]-z)/(z-I),j++),(h===0||h===r-1)&&v>0&&v<n-1&&(o=i[v+1]-i[v],Z+=((u=i[v]-i[v-1])*w[h][v+1]+o*w[h][v-1])/(u+o),j++),j?Z/=j:(p=i[v+1]-i[v],c=i[v]-i[v-1],m=(b=_[h+1]-_[h])*(g=_[h]-_[h-1])*(b+g),Z=((d=p*c*(p+c))*(g*w[h+1][v]+b*w[h-1][v])+m*(c*w[h][v+1]+p*w[h][v-1]))/(m*(c+p)+d*(g+b))),S+=(y=(x=Z-w[h][v])/f)*y,k=j?0:.85,w[h][v]+=x*(1+k)}S=Math.sqrt(S)}while(M++<100&&S>1e-5);return T.log("Smoother converged to",S,"after",M,"iterations"),w}},19237:function(N,L,e){var T=e(71828).isArray1D;N.exports=function(w,i,_){var v=_("x"),h=v&&v.length,s=_("y"),t=s&&s.length;if(!h&&!t)return!1;if(i._cheater=!v,h&&!T(v)||t&&!T(s))i._length=null;else{var a=h?v.length:1/0;t&&(a=Math.min(a,s.length)),i.a&&i.a.length&&(a=Math.min(a,i.a.length)),i.b&&i.b.length&&(a=Math.min(a,i.b.length)),i._length=a}return!0}},69568:function(N,L,e){var T=e(5386).fF,w=e(19316),i=e(50693),_=e(9012),v=e(22399).defaultLine,h=e(1426).extendFlat,s=w.marker.line;N.exports=h({locations:{valType:"data_array",editType:"calc"},locationmode:w.locationmode,z:{valType:"data_array",editType:"calc"},geojson:h({},w.geojson,{}),featureidkey:w.featureidkey,text:h({},w.text,{}),hovertext:h({},w.hovertext,{}),marker:{line:{color:h({},s.color,{dflt:v}),width:h({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:w.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:w.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:h({},_.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:T(),showlegend:h({},_.showlegend,{dflt:!1})},i("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(N,L,e){var T=e(92770),w=e(50606).BADNUM,i=e(78803),_=e(75225),v=e(66279);function h(s){return s&&typeof s=="string"}N.exports=function(s,t){var a,n=t._length,r=new Array(n);a=t.geojson?function(c){return h(c)||T(c)}:h;for(var l=0;l<n;l++){var o=r[l]={},u=t.locations[l],p=t.z[l];a(u)&&T(p)?(o.loc=u,o.z=p):(o.loc=null,o.z=w),o.index=l}return _(r,t),i(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),v(r,t),r}},61869:function(N,L,e){var T=e(71828),w=e(1586),i=e(69568);N.exports=function(_,v,h,s){function t(o,u){return T.coerce(_,v,i,o,u)}var a=t("locations"),n=t("z");if(a&&a.length&&T.isArrayOrTypedArray(n)&&n.length){v._length=Math.min(a.length,n.length);var r,l=t("geojson");(typeof l=="string"&&l!==""||T.isPlainObject(l))&&(r="geojson-id"),t("locationmode",r)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),w(_,v,s,t,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(v,t)}else v.visible=!1}},92069:function(N){N.exports=function(L,e,T,w,i){L.location=e.location,L.z=e.z;var _=w[i];return _.fIn&&_.fIn.properties&&(L.properties=_.fIn.properties),L.ct=_.ct,L}},42300:function(N,L,e){var T=e(89298),w=e(69568),i=e(71828).fillText;N.exports=function(_,v,h){var s,t,a,n,r=_.cd,l=r[0].trace,o=_.subplot,u=[v,h],p=[v+360,h];for(t=0;t<r.length;t++)if(n=!1,(s=r[t])._polygons){for(a=0;a<s._polygons.length;a++)s._polygons[a].contains(u)&&(n=!n),s._polygons[a].contains(p)&&(n=!n);if(n)break}if(n&&s)return _.x0=_.x1=_.xa.c2p(s.ct),_.y0=_.y1=_.ya.c2p(s.ct),_.index=s.index,_.location=s.loc,_.z=s.z,_.zLabel=T.tickText(o.mockAxis,o.mockAxis.c2l(s.z),"hover").text,_.hovertemplate=s.hovertemplate,function(c,b,g){if(!b.hovertemplate){var d=g.hi||b.hoverinfo,m=String(g.loc),x=d==="all"?w.hoverinfo.flags:d.split("+"),y=x.indexOf("name")!==-1,k=x.indexOf("location")!==-1,f=x.indexOf("z")!==-1,S=x.indexOf("text")!==-1,M=[];!y&&k?c.nameOverride=m:(y&&(c.nameOverride=b.name),k&&M.push(m)),f&&M.push(c.zLabel),S&&i(g,b,M),c.extraText=M.join("<br>")}}(_,l,s),[_]}},51319:function(N,L,e){N.exports={attributes:e(69568),supplyDefaults:e(61869),colorbar:e(61243),calc:e(38675),calcGeoJSON:e(99841).calcGeoJSON,plot:e(99841).plot,style:e(99636).style,styleOnSelect:e(99636).styleOnSelect,hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),moduleType:"trace",name:"choropleth",basePlotModule:e(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(N,L,e){var T=e(39898),w=e(71828),i=e(41327),_=e(90973).getTopojsonFeatures,v=e(71739).findExtremes,h=e(99636).style;N.exports={calcGeoJSON:function(s,t){for(var a=s[0].trace,n=t[a.geo],r=n._subplot,l=a.locationmode,o=a._length,u=l==="geojson-id"?i.extractTraceFeature(s):_(a,r.topojson),p=[],c=[],b=0;b<o;b++){var g=s[b],d=l==="geojson-id"?g.fOut:i.locationToFeature(l,g.loc,u);if(d){g.geojson=d,g.ct=d.properties.ct,g._polygons=i.feature2polygons(d);var m=i.computeBbox(d);p.push(m[0],m[2]),c.push(m[1],m[3])}else g.geojson=null}if(n.fitbounds==="geojson"&&l==="geojson-id"){var x=i.computeBbox(i.getTraceGeojson(a));p=[x[0],x[2]],c=[x[1],x[3]]}var y={padded:!0};a._extremes.lon=v(n.lonaxis._ax,p,y),a._extremes.lat=v(n.lataxis._ax,c,y)},plot:function(s,t,a){var n=t.layers.backplot.select(".choroplethlayer");w.makeTraceGroups(n,a,"trace choropleth").each(function(r){var l=T.select(this).selectAll("path.choroplethlocation").data(w.identity);l.enter().append("path").classed("choroplethlocation",!0),l.exit().remove(),h(s,r)})}}},81253:function(N){N.exports=function(L,e){var T,w,i,_,v,h=L.cd,s=L.xaxis,t=L.yaxis,a=[];if(e===!1)for(T=0;T<h.length;T++)h[T].selected=0;else for(T=0;T<h.length;T++)(i=(w=h[T]).ct)&&(_=s.c2p(i),v=t.c2p(i),e.contains([_,v],null,T,L)?(a.push({pointNumber:T,lon:i[0],lat:i[1]}),w.selected=1):w.selected=0);return a}},99636:function(N,L,e){var T=e(39898),w=e(7901),i=e(91424),_=e(21081);function v(h,s){var t=s[0].trace,a=s[0].node3.selectAll(".choroplethlocation"),n=t.marker||{},r=n.line||{},l=_.makeColorScaleFuncFromTrace(t);a.each(function(o){T.select(this).attr("fill",l(o.z)).call(w.stroke,o.mlc||r.color).call(i.dashLine,"",o.mlw||r.width||0).style("opacity",n.opacity)}),i.selectedPointStyle(a,t)}N.exports={style:function(h,s){s&&v(0,s)},styleOnSelect:function(h,s){var t=s[0].node3,a=s[0].trace;a.selectedpoints?i.selectedPointStyle(t.selectAll(".choroplethlocation"),a):v(0,s)}}},64496:function(N,L,e){var T=e(69568),w=e(50693),i=e(5386).fF,_=e(9012),v=e(1426).extendFlat;N.exports=v({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:v({},T.featureidkey,{}),below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,marker:{line:{color:v({},T.marker.line.color,{editType:"plot"}),width:v({},T.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:v({},T.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:v({},T.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:v({},T.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:T.hoverinfo,hovertemplate:i({},{keys:["properties"]}),showlegend:v({},_.showlegend,{dflt:!1})},w("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(N,L,e){var T=e(92770),w=e(71828),i=e(21081),_=e(91424),v=e(18214).makeBlank,h=e(41327);function s(t){var a,n=t[0].trace,r=n._opts;if(n.selectedpoints){for(var l=_.makeSelectedPointStyleFns(n),o=0;o<t.length;o++){var u=t[o];u.fOut&&(u.fOut.properties.mo2=l.selectedOpacityFn(u))}a={type:"identity",property:"mo2"}}else a=w.isArrayOrTypedArray(n.marker.opacity)?{type:"identity",property:"mo"}:n.marker.opacity;return w.extendFlat(r.fill.paint,{"fill-opacity":a}),w.extendFlat(r.line.paint,{"line-opacity":a}),r}N.exports={convert:function(t){var a=t[0].trace,n=a.visible===!0&&a._length!==0,r={layout:{visibility:"none"},paint:{}},l={layout:{visibility:"none"},paint:{}},o=a._opts={fill:r,line:l,geojson:v()};if(!n)return o;var u=h.extractTraceFeature(t);if(!u)return o;var p,c,b,g=i.makeColorScaleFuncFromTrace(a),d=a.marker,m=d.line||{};w.isArrayOrTypedArray(d.opacity)&&(p=function(M){var E=M.mo;return T(E)?+w.constrain(E,0,1):0}),w.isArrayOrTypedArray(m.color)&&(c=function(M){return M.mlc}),w.isArrayOrTypedArray(m.width)&&(b=function(M){return M.mlw});for(var x=0;x<t.length;x++){var y=t[x],k=y.fOut;if(k){var f=k.properties;f.fc=g(y.z),p&&(f.mo=p(y)),c&&(f.mlc=c(y)),b&&(f.mlw=b(y)),y.ct=f.ct,y._polygons=h.feature2polygons(k)}}var S=p?{type:"identity",property:"mo"}:d.opacity;return w.extendFlat(r.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),w.extendFlat(l.paint,{"line-color":c?{type:"identity",property:"mlc"}:m.color,"line-width":b?{type:"identity",property:"mlw"}:m.width,"line-opacity":S}),r.layout.visibility="visible",l.layout.visibility="visible",o.geojson={type:"FeatureCollection",features:u},s(t),o},convertOnSelect:s}},22654:function(N,L,e){var T=e(71828),w=e(1586),i=e(64496);N.exports=function(_,v,h,s){function t(l,o){return T.coerce(_,v,i,l,o)}var a=t("locations"),n=t("z"),r=t("geojson");T.isArrayOrTypedArray(a)&&a.length&&T.isArrayOrTypedArray(n)&&n.length&&(typeof r=="string"&&r!==""||T.isPlainObject(r))?(t("featureidkey"),v._length=Math.min(a.length,n.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),w(_,v,s,t,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(v,t)):v.visible=!1}},57516:function(N,L,e){N.exports={attributes:e(64496),supplyDefaults:e(22654),colorbar:e(61243),calc:e(38675),plot:e(7852),hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),styleOnSelect:function(T,w){w&&w[0].trace._glTrace.updateOnSelect(w)},getBelow:function(T,w){for(var i=w.getMapLayers(),_=i.length-2;_>=0;_--){var v=i[_].id;if(typeof v=="string"&&v.indexOf("water")===0){for(var h=_+1;h<i.length;h++)if(typeof(v=i[h].id)=="string"&&v.indexOf("plotly-")===-1)return v}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(N,L,e){var T=e(82004).convert,w=e(82004).convertOnSelect,i=e(77734).traceLayerPrefix;function _(h,s){this.type="choroplethmapbox",this.subplot=h,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",i+s+"-fill"],["line",i+s+"-line"]],this.below=null}var v=_.prototype;v.update=function(h){this._update(T(h)),h[0].trace._glTrace=this},v.updateOnSelect=function(h){this._update(w(h))},v._update=function(h){var s=this.subplot,t=this.layerList,a=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(h.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(h,a),this.below=a);for(var n=0;n<t.length;n++){var r=t[n],l=r[0],o=r[1],u=h[l];s.setOptions(o,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&s.setOptions(o,"setPaintProperty",u.paint)}},v._addLayers=function(h,s){for(var t=this.subplot,a=this.layerList,n=this.sourceId,r=0;r<a.length;r++){var l=a[r],o=l[0],u=h[o];t.addLayer({type:o,id:l[1],source:n,layout:u.layout,paint:u.paint},s)}},v._removeLayers=function(){for(var h=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)h.removeLayer(s[t][1])},v.dispose=function(){var h=this.subplot.map;this._removeLayers(),h.removeSource(this.sourceId)},N.exports=function(h,s){var t=s[0].trace,a=new _(h,t.uid),n=a.sourceId,r=T(s),l=a.below=h.belowLookup["trace-"+t.uid];return h.map.addSource(n,{type:"geojson",data:r.geojson}),a._addLayers(r,l),s[0].trace._glTrace=a,a}},12674:function(N,L,e){var T=e(50693),w=e(12663).axisHoverFormat,i=e(5386).fF,_=e(2418),v=e(9012),h=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["norm"]}),uhoverformat:w("u",1),vhoverformat:w("v",1),whoverformat:w("w",1),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),showlegend:h({},v.showlegend,{dflt:!1})};h(s,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=_[t]}),s.hoverinfo=h({},v.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,N.exports=s},31371:function(N,L,e){var T=e(78803);N.exports=function(w,i){for(var _=i.u,v=i.v,h=i.w,s=Math.min(i.x.length,i.y.length,i.z.length,_.length,v.length,h.length),t=-1/0,a=1/0,n=0;n<s;n++){var r=_[n],l=v[n],o=h[n],u=Math.sqrt(r*r+l*l+o*o);t=Math.max(t,u),a=Math.min(a,u)}i._len=s,i._normMax=t,T(w,i,{vals:[a,t],containerStr:"",cLetter:"c"})}},5453:function(N,L,e){var T=e(9330).gl_cone3d,w=e(9330).gl_cone3d.createConeMesh,i=e(71828).simpleMap,_=e(81697).parseColorScale,v=e(21081).extractOpts,h=e(71828).isArrayOrTypedArray,s=e(90060);function t(u,p){this.scene=u,this.uid=p,this.mesh=null,this.data=null}var a=t.prototype;a.handlePick=function(u){if(u.object===this.mesh){var p=u.index=u.data.index,c=this.data.x[p],b=this.data.y[p],g=this.data.z[p],d=this.data.u[p],m=this.data.v[p],x=this.data.w[p];u.traceCoordinate=[c,b,g,d,m,x,Math.sqrt(d*d+m*m+x*x)];var y=this.data.hovertext||this.data.text;return h(y)&&y[p]!==void 0?u.textLabel=y[p]:y&&(u.textLabel=y),!0}};var n={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},l={tip:1,tail:1,cm:.75,center:.5};function o(u,p){var c=u.fullSceneLayout,b=u.dataScale,g={};function d(k,f){var S=c[f],M=b[n[f]];return i(k,function(E){return S.d2l(E)*M})}g.vectors=s(d(p.u,"xaxis"),d(p.v,"yaxis"),d(p.w,"zaxis"),p._len),g.positions=s(d(p.x,"xaxis"),d(p.y,"yaxis"),d(p.z,"zaxis"),p._len);var m=v(p);g.colormap=_(p),g.vertexIntensityBounds=[m.min/p._normMax,m.max/p._normMax],g.coneOffset=r[p.anchor],p.sizemode==="scaled"?g.coneSize=p.sizeref||.5:g.coneSize=p.sizeref&&p._normMax?p.sizeref/p._normMax:.5;var x=T(g),y=p.lightposition;return x.lightPosition=[y.x,y.y,y.z],x.ambient=p.lighting.ambient,x.diffuse=p.lighting.diffuse,x.specular=p.lighting.specular,x.roughness=p.lighting.roughness,x.fresnel=p.lighting.fresnel,x.opacity=p.opacity,p._pad=l[p.anchor]*x.vectorScale*x.coneScale*p._normMax,x}a.update=function(u){this.data=u;var p=o(this.scene,u);this.mesh.update(p)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},N.exports=function(u,p){var c=u.glplot.gl,b=o(u,p),g=w(c,b),d=new t(u,p.uid);return d.mesh=g,d.data=p,g._trace=d,u.glplot.add(g),d}},91750:function(N,L,e){var T=e(71828),w=e(1586),i=e(12674);N.exports=function(_,v,h,s){function t(p,c){return T.coerce(_,v,i,p,c)}var a=t("u"),n=t("v"),r=t("w"),l=t("x"),o=t("y"),u=t("z");a&&a.length&&n&&n.length&&r&&r.length&&l&&l.length&&o&&o.length&&u&&u.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),w(_,v,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),v._length=null):v.visible=!1}},98128:function(N,L,e){N.exports={moduleType:"trace",name:"cone",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(12674),supplyDefaults:e(91750),colorbar:{min:"cmin",max:"cmax"},calc:e(31371),plot:e(5453),eventData:function(T,w){return T.norm=w.traceCoordinate[6],T},meta:{}}},70600:function(N,L,e){var T=e(21606),w=e(82196),i=e(12663),_=i.axisHoverFormat,v=i.descriptionOnlyNumbers,h=e(50693),s=e(79952).P,t=e(41940),a=e(1426).extendFlat,n=e(74808),r=n.COMPARISON_OPS2,l=n.INTERVAL_OPS,o=w.line;N.exports=a({z:T.z,x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,text:T.text,hovertext:T.hovertext,transpose:T.transpose,xtype:T.xtype,ytype:T.ytype,xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:T.hovertemplate,texttemplate:a({},T.texttemplate,{}),textfont:a({},T.textfont,{}),hoverongaps:T.hoverongaps,connectgaps:a({},T.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:v("contour label")},operation:{valType:"enumerated",values:[].concat(r).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},o.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:a({},o.smoothing,{}),editType:"plot"}},h("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(N,L,e){var T=e(21081),w=e(90757),i=e(18670),_=e(53572);N.exports=function(v,h){var s=w(v,h),t=s[0].z;i(h,t);var a,n=h.contours,r=T.extractOpts(h);if(n.coloring==="heatmap"&&r.auto&&h.autocontour===!1){var l=n.start,o=_(n),u=n.size||1,p=Math.floor((o-l)/u)+1;isFinite(u)||(u=1,p=1);var c=l-u/2;a=[c,c+p*u]}else a=t;return T.calc(v,h,{vals:a,cLetter:"z"}),s}},20083:function(N){N.exports=function(L,e){var T,w=L[0],i=w.z;switch(e.type){case"levels":var _=Math.min(i[0][0],i[0][1]);for(T=0;T<L.length;T++){var v=L[T];v.prefixBoundary=!v.edgepaths.length&&(_>v.level||v.starts.length&&_===v.level)}break;case"constraint":if(w.prefixBoundary=!1,w.edgepaths.length)return;var h=w.x.length,s=w.y.length,t=-1/0,a=1/0;for(T=0;T<s;T++)a=Math.min(a,i[T][0]),a=Math.min(a,i[T][h-1]),t=Math.max(t,i[T][0]),t=Math.max(t,i[T][h-1]);for(T=1;T<h-1;T++)a=Math.min(a,i[0][T]),a=Math.min(a,i[s-1][T]),t=Math.max(t,i[0][T]),t=Math.max(t,i[s-1][T]);var n,r,l=e.value;switch(e._operation){case">":l>t&&(w.prefixBoundary=!0);break;case"<":(l<a||w.starts.length&&l===a)&&(w.prefixBoundary=!0);break;case"[]":n=Math.min(l[0],l[1]),((r=Math.max(l[0],l[1]))<a||n>t||w.starts.length&&r===a)&&(w.prefixBoundary=!0);break;case"][":n=Math.min(l[0],l[1]),r=Math.max(l[0],l[1]),n<a&&r>t&&(w.prefixBoundary=!0)}}}},90654:function(N,L,e){var T=e(21081),w=e(86068),i=e(53572);N.exports={min:"zmin",max:"zmax",calc:function(_,v,h){var s=v.contours,t=v.line,a=s.size||1,n=s.coloring,r=w(v,{isColorbar:!0});if(n==="heatmap"){var l=T.extractOpts(v);h._fillgradient=l.reversescale?T.flipScale(l.colorscale):l.colorscale,h._zrange=[l.min,l.max]}else n==="fill"&&(h._fillcolor=r);h._line={color:n==="lines"?r:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},h._levels={start:s.start,end:i(s),size:a}}}},36914:function(N){N.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(N,L,e){var T=e(92770),w=e(14523),i=e(7901),_=i.addOpacity,v=i.opacity,h=e(74808),s=e(71828).isArrayOrTypedArray,t=h.CONSTRAINT_REDUCTION,a=h.COMPARISON_OPS2;N.exports=function(n,r,l,o,u,p){var c,b,g,d=r.contours,m=l("contours.operation");d._operation=t[m],function(x,y){var k;a.indexOf(y.operation)===-1?(x("contours.value",[0,1]),s(y.value)?y.value.length>2?y.value=y.value.slice(2):y.length===0?y.value=[0,1]:y.length<2?(k=parseFloat(y.value[0]),y.value=[k,k+1]):y.value=[parseFloat(y.value[0]),parseFloat(y.value[1])]:T(y.value)&&(k=parseFloat(y.value),y.value=[k,k+1])):(x("contours.value",0),T(y.value)||(s(y.value)?y.value=parseFloat(y.value[0]):y.value=0))}(l,d),m==="="?c=d.showlines=!0:(c=l("contours.showlines"),g=l("fillcolor",_((n.line||{}).color||u,.5))),c&&(b=l("line.color",g&&v(g)?_(r.fillcolor,1):u),l("line.width",2),l("line.dash")),l("line.smoothing"),w(l,o,b,p)}},64237:function(N,L,e){var T=e(74808),w=e(92770);function i(h,s){var t,a=Array.isArray(s);function n(r){return w(r)?+r:null}return T.COMPARISON_OPS2.indexOf(h)!==-1?t=n(a?s[0]:s):T.INTERVAL_OPS.indexOf(h)!==-1?t=a?[n(s[0]),n(s[1])]:[n(s),n(s)]:T.SET_OPS.indexOf(h)!==-1&&(t=a?s.map(n):[n(s)]),t}function _(h){return function(s){s=i(h,s);var t=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return{start:t,end:a,size:a-t}}}function v(h){return function(s){return{start:s=i(h,s),end:1/0,size:1/0}}}N.exports={"[]":_("[]"),"][":_("]["),">":v(">"),"<":v("<"),"=":v("=")}},67217:function(N){N.exports=function(L,e,T,w){var i=w("contours.start"),_=w("contours.end"),v=i===!1||_===!1,h=T("contours.size");!(v?e.autocontour=!0:T("autocontour",!1))&&h||T("ncontours")}},84857:function(N,L,e){var T=e(71828);function w(i){return T.extendFlat({},i,{edgepaths:T.extendDeep([],i.edgepaths),paths:T.extendDeep([],i.paths),starts:T.extendDeep([],i.starts)})}N.exports=function(i,_){var v,h,s,t=function(r){return r.reverse()},a=function(r){return r};switch(_){case"=":case"<":return i;case">":for(i.length!==1&&T.warn("Contour data invalid for the specified inequality operation."),h=i[0],v=0;v<h.edgepaths.length;v++)h.edgepaths[v]=t(h.edgepaths[v]);for(v=0;v<h.paths.length;v++)h.paths[v]=t(h.paths[v]);for(v=0;v<h.starts.length;v++)h.starts[v]=t(h.starts[v]);return i;case"][":var n=t;t=a,a=n;case"[]":for(i.length!==2&&T.warn("Contour data invalid for the specified inequality range operation."),h=w(i[0]),s=w(i[1]),v=0;v<h.edgepaths.length;v++)h.edgepaths[v]=t(h.edgepaths[v]);for(v=0;v<h.paths.length;v++)h.paths[v]=t(h.paths[v]);for(v=0;v<h.starts.length;v++)h.starts[v]=t(h.starts[v]);for(;s.edgepaths.length;)h.edgepaths.push(a(s.edgepaths.shift()));for(;s.paths.length;)h.paths.push(a(s.paths.shift()));for(;s.starts.length;)h.starts.push(a(s.starts.shift()));return[h]}}},13031:function(N,L,e){var T=e(71828),w=e(67684),i=e(73927),_=e(83179),v=e(67217),h=e(8724),s=e(58623),t=e(70600);N.exports=function(a,n,r,l){function o(p,c){return T.coerce(a,n,t,p,c)}if(w(a,n,o,l)){i(a,n,l,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hoverongaps"),o("hovertemplate");var u=o("contours.type")==="constraint";o("connectgaps",T.isArray1D(n.z)),u?_(a,n,o,l,r):(v(a,n,o,function(p){return T.coerce2(a,n,t,p)}),h(a,n,o,l)),n.contours&&n.contours.coloring==="heatmap"&&s(o,l)}else n.visible=!1}},87558:function(N,L,e){var T=e(71828),w=e(64237),i=e(53572);N.exports=function(_,v,h){for(var s=_.type==="constraint"?w[_._operation](_.value):_,t=s.size,a=[],n=i(s),r=h.trace._carpetTrace,l=r?{xaxis:r.aaxis,yaxis:r.baxis,x:h.a,y:h.b}:{xaxis:v.xaxis,yaxis:v.yaxis,x:h.x,y:h.y},o=s.start;o<n;o+=t)if(a.push(T.extendFlat({level:o,crossings:{},starts:[],edgepaths:[],paths:[],z:h.z,smoothing:h.trace.line.smoothing},l)),a.length>1e3){T.warn("Too many contours, clipping at 1000",_);break}return a}},53572:function(N){N.exports=function(L){return L.end+L.size/1e6}},81696:function(N,L,e){var T=e(71828),w=e(36914);function i(h,s,t,a){return Math.abs(h[0]-s[0])<t&&Math.abs(h[1]-s[1])<a}function _(h,s,t,a,n){var r,l=s.join(","),o=h.crossings[l],u=function(ie,ae,oe){var fe=0,ge=0;return ie>20&&ae?ie===208||ie===1114?fe=oe[0]===0?1:-1:ge=oe[1]===0?1:-1:w.BOTTOMSTART.indexOf(ie)!==-1?ge=1:w.LEFTSTART.indexOf(ie)!==-1?fe=1:w.TOPSTART.indexOf(ie)!==-1?ge=-1:fe=-1,[fe,ge]}(o,t,s),p=[v(h,s,[-u[0],-u[1]])],c=h.z.length,b=h.z[0].length,g=s.slice(),d=u.slice();for(r=0;r<1e4;r++){if(o>20?(o=w.CHOOSESADDLE[o][(u[0]||u[1])<0?0:1],h.crossings[l]=w.SADDLEREMAINDER[o]):delete h.crossings[l],!(u=w.NEWDELTA[o])){T.log("Found bad marching index:",o,s,h.level);break}p.push(v(h,s,u)),s[0]+=u[0],s[1]+=u[1],l=s.join(","),i(p[p.length-1],p[p.length-2],a,n)&&p.pop();var m=u[0]&&(s[0]<0||s[0]>b-2)||u[1]&&(s[1]<0||s[1]>c-2);if(s[0]===g[0]&&s[1]===g[1]&&u[0]===d[0]&&u[1]===d[1]||t&&m)break;o=h.crossings[l]}r===1e4&&T.log("Infinite loop in contour?");var x,y,k,f,S,M,E,O,P,I,z,U,R,j,Z,F=i(p[0],p[p.length-1],a,n),V=0,H=.2*h.smoothing,te=[],$=0;for(r=1;r<p.length;r++)U=p[r],R=p[r-1],j=U[2]-R[2],Z=U[3]-R[3],V+=E=Math.sqrt(j*j+Z*Z),te.push(E);var J=V/te.length*H;function X(ie){return p[ie%p.length]}for(r=p.length-2;r>=$;r--)if((x=te[r])<J){for(k=0,y=r-1;y>=$&&x+te[y]<J;y--)x+=te[y];if(F&&r===p.length-2)for(k=0;k<y&&x+te[k]<J;k++)x+=te[k];S=r-y+k+1,M=Math.floor((r+y+k+2)/2),f=F||r!==p.length-2?F||y!==-1?S%2?X(M):[(X(M)[0]+X(M+1)[0])/2,(X(M)[1]+X(M+1)[1])/2]:p[0]:p[p.length-1],p.splice(y+1,r-y+1,f),r=y+1,k&&($=k),F&&(r===p.length-2?p[k]=p[p.length-1]:r===0&&(p[p.length-1]=p[0]))}for(p.splice(0,$),r=0;r<p.length;r++)p[r].length=2;if(!(p.length<2))if(F)p.pop(),h.paths.push(p);else{t||T.log("Unclosed interior contour?",h.level,g.join(","),p.join("L"));var K=!1;for(O=0;O<h.edgepaths.length;O++)if(I=h.edgepaths[O],!K&&i(I[0],p[p.length-1],a,n)){p.pop(),K=!0;var ee=!1;for(P=0;P<h.edgepaths.length;P++)if(i((z=h.edgepaths[P])[z.length-1],p[0],a,n)){ee=!0,p.shift(),h.edgepaths.splice(O,1),P===O?h.paths.push(p.concat(z)):(P>O&&P--,h.edgepaths[P]=z.concat(p,I));break}ee||(h.edgepaths[O]=p.concat(I))}for(O=0;O<h.edgepaths.length&&!K;O++)i((I=h.edgepaths[O])[I.length-1],p[0],a,n)&&(p.shift(),h.edgepaths[O]=I.concat(p),K=!0);K||h.edgepaths.push(p)}}function v(h,s,t){var a=s[0]+Math.max(t[0],0),n=s[1]+Math.max(t[1],0),r=h.z[n][a],l=h.xaxis,o=h.yaxis;if(t[1]){var u=(h.level-r)/(h.z[n][a+1]-r),p=(u!==1?(1-u)*l.c2l(h.x[a]):0)+(u!==0?u*l.c2l(h.x[a+1]):0);return[l.c2p(l.l2c(p),!0),o.c2p(h.y[n],!0),a+u,n]}var c=(h.level-r)/(h.z[n+1][a]-r),b=(c!==1?(1-c)*o.c2l(h.y[n]):0)+(c!==0?c*o.c2l(h.y[n+1]):0);return[l.c2p(h.x[a],!0),o.c2p(o.l2c(b),!0),a,n+c]}N.exports=function(h,s,t){var a,n,r,l;for(s=s||.01,t=t||.01,n=0;n<h.length;n++){for(r=h[n],l=0;l<r.starts.length;l++)_(r,r.starts[l],"edge",s,t);for(a=0;Object.keys(r.crossings).length&&a<1e4;)a++,_(r,Object.keys(r.crossings)[0].split(",").map(Number),void 0,s,t);a===1e4&&T.log("Infinite loop in contour?")}}},52421:function(N,L,e){var T=e(7901),w=e(46248);N.exports=function(i,_,v,h,s){s||(s={}),s.isContour=!0;var t=w(i,_,v,h,s);return t&&t.forEach(function(a){var n=a.trace;n.contours.type==="constraint"&&(n.fillcolor&&T.opacity(n.fillcolor)?a.color=T.addOpacity(n.fillcolor,1):n.contours.showlines&&T.opacity(n.line.color)&&(a.color=T.addOpacity(n.line.color,1)))}),t}},99442:function(N,L,e){N.exports={attributes:e(70600),supplyDefaults:e(13031),calc:e(27529),plot:e(29854).plot,style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"contour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(N,L,e){var T=e(71828);N.exports=function(w,i,_,v){if(v||(v={}),w("contours.showlabels")){var h=i.font;T.coerceFont(w,"contours.labelfont",{family:h.family,size:h.size,color:_}),w("contours.labelformat")}v.hasHover!==!1&&w("zhoverformat")}},86068:function(N,L,e){var T=e(39898),w=e(21081),i=e(53572);N.exports=function(_){var v=_.contours,h=v.start,s=i(v),t=v.size||1,a=Math.floor((s-h)/t)+1,n=v.coloring==="lines"?0:1,r=w.extractOpts(_);isFinite(t)||(t=1,a=1);var l,o,u=r.reversescale?w.flipScale(r.colorscale):r.colorscale,p=u.length,c=new Array(p),b=new Array(p),g=r.min,d=r.max;if(v.coloring==="heatmap"){for(o=0;o<p;o++)l=u[o],c[o]=l[0]*(d-g)+g,b[o]=l[1];var m=T.extent([g,d,v.start,v.start+t*(a-1)]),x=m[g<d?0:1],y=m[g<d?1:0];x!==g&&(c.splice(0,0,x),b.splice(0,0,b[0])),y!==d&&(c.push(y),b.push(b[b.length-1]))}else{var k=_._input&&typeof _._input.zmin=="number"&&typeof _._input.zmax=="number";for(k&&(h<=g||s>=d)&&(h<=g&&(h=g),s>=d&&(s=d),a=Math.floor((s-h)/t)+1,n=0),o=0;o<p;o++)l=u[o],c[o]=(l[0]*(a+n-1)-n/2)*t+h,b[o]=l[1];(k||_.autocontour)&&(c[0]>g&&(c.unshift(g),b.unshift(b[0])),c[c.length-1]<d&&(c.push(d),b.push(b[b.length-1])))}return w.makeColorScaleFunc({domain:c,range:b},{noNumericCheck:!0})}},87678:function(N,L,e){var T=e(36914);function w(i,_){var v=(_[0][0]>i?0:1)+(_[0][1]>i?0:2)+(_[1][1]>i?0:4)+(_[1][0]>i?0:8);return v===5||v===10?i>(_[0][0]+_[0][1]+_[1][0]+_[1][1])/4?v===5?713:1114:v===5?104:208:v===15?0:v}N.exports=function(i){var _,v,h,s,t,a,n,r,l,o=i[0].z,u=o.length,p=o[0].length,c=u===2||p===2;for(v=0;v<u-1;v++)for(s=[],v===0&&(s=s.concat(T.BOTTOMSTART)),v===u-2&&(s=s.concat(T.TOPSTART)),_=0;_<p-1;_++)for(h=s.slice(),_===0&&(h=h.concat(T.LEFTSTART)),_===p-2&&(h=h.concat(T.RIGHTSTART)),t=_+","+v,a=[[o[v][_],o[v][_+1]],[o[v+1][_],o[v+1][_+1]]],l=0;l<i.length;l++)(n=w((r=i[l]).level,a))&&(r.crossings[t]=n,h.indexOf(n)!==-1&&(r.starts.push([_,v]),c&&h.indexOf(n,h.indexOf(n)+1)!==-1&&r.starts.push([_,v])))}},29854:function(N,L,e){var T=e(39898),w=e(71828),i=e(91424),_=e(21081),v=e(63893),h=e(89298),s=e(21994),t=e(50347),a=e(87678),n=e(81696),r=e(87558),l=e(84857),o=e(20083),u=e(36914),p=u.LABELOPTIMIZER;function c(d,m){var x,y,k,f,S,M,E,O="",P=0,I=d.edgepaths.map(function(F,V){return V}),z=!0;function U(F){return Math.abs(F[1]-m[2][1])<.01}function R(F){return Math.abs(F[0]-m[0][0])<.01}function j(F){return Math.abs(F[0]-m[2][0])<.01}for(;I.length;){for(M=i.smoothopen(d.edgepaths[P],d.smoothing),O+=z?M:M.replace(/^M/,"L"),I.splice(I.indexOf(P),1),x=d.edgepaths[P][d.edgepaths[P].length-1],f=-1,k=0;k<4;k++){if(!x){w.log("Missing end?",P,d);break}for(E=x,Math.abs(E[1]-m[0][1])<.01&&!j(x)?y=m[1]:R(x)?y=m[0]:U(x)?y=m[3]:j(x)&&(y=m[2]),S=0;S<d.edgepaths.length;S++){var Z=d.edgepaths[S][0];Math.abs(x[0]-y[0])<.01?Math.abs(x[0]-Z[0])<.01&&(Z[1]-x[1])*(y[1]-Z[1])>=0&&(y=Z,f=S):Math.abs(x[1]-y[1])<.01?Math.abs(x[1]-Z[1])<.01&&(Z[0]-x[0])*(y[0]-Z[0])>=0&&(y=Z,f=S):w.log("endpt to newendpt is not vert. or horz.",x,y,Z)}if(x=y,f>=0)break;O+="L"+y}if(f===d.edgepaths.length){w.log("unclosed perimeter path");break}P=f,(z=I.indexOf(P)===-1)&&(P=I[0],O+="Z")}for(P=0;P<d.paths.length;P++)O+=i.smoothclosed(d.paths[P],d.smoothing);return O}function b(d,m,x,y){var k=m.width/2,f=m.height/2,S=d.x,M=d.y,E=d.theta,O=Math.cos(E)*k,P=Math.sin(E)*k,I=(S>y.center?y.right-S:S-y.left)/(O+Math.abs(Math.sin(E)*f)),z=(M>y.middle?y.bottom-M:M-y.top)/(Math.abs(P)+Math.cos(E)*f);if(I<1||z<1)return 1/0;var U=p.EDGECOST*(1/(I-1)+1/(z-1));U+=p.ANGLECOST*E*E;for(var R=S-O,j=M-P,Z=S+O,F=M+P,V=0;V<x.length;V++){var H=x[V],te=Math.cos(H.theta)*H.width/2,$=Math.sin(H.theta)*H.width/2,J=2*w.segmentDistance(R,j,Z,F,H.x-te,H.y-$,H.x+te,H.y+$)/(m.height+H.height),X=H.level===m.level,K=X?p.SAMELEVELDISTANCE:1;if(J<=K)return 1/0;U+=p.NEIGHBORCOST*(X?p.SAMELEVELFACTOR:1)/(J-K)}return U}function g(d){var m,x,y=d.trace._emptypoints,k=[],f=d.z.length,S=d.z[0].length,M=[];for(m=0;m<S;m++)M.push(1);for(m=0;m<f;m++)k.push(M.slice());for(m=0;m<y.length;m++)k[(x=y[m])[0]][x[1]]=0;return d.zmask=k,k}L.plot=function(d,m,x,y){var k=m.xaxis,f=m.yaxis;w.makeTraceGroups(y,x,"contour").each(function(S){var M=T.select(this),E=S[0],O=E.trace,P=E.x,I=E.y,z=O.contours,U=r(z,m,E),R=w.ensureSingle(M,"g","heatmapcoloring"),j=[];z.coloring==="heatmap"&&(j=[S]),t(d,m,j,R),a(U),n(U);var Z=k.c2p(P[0],!0),F=k.c2p(P[P.length-1],!0),V=f.c2p(I[0],!0),H=f.c2p(I[I.length-1],!0),te=[[Z,H],[F,H],[F,V],[Z,V]],$=U;z.type==="constraint"&&($=l(U,z._operation)),function(J,X,K){var ee=w.ensureSingle(J,"g","contourbg").selectAll("path").data(K.coloring==="fill"?[0]:[]);ee.enter().append("path"),ee.exit().remove(),ee.attr("d","M"+X.join("L")+"Z").style("stroke","none")}(M,te,z),function(J,X,K,ee){var ie=ee.coloring==="fill"||ee.type==="constraint"&&ee._operation!=="=",ae="M"+K.join("L")+"Z";ie&&o(X,ee);var oe=w.ensureSingle(J,"g","contourfill").selectAll("path").data(ie?X:[]);oe.enter().append("path"),oe.exit().remove(),oe.each(function(fe){var ge=(fe.prefixBoundary?ae:"")+c(fe,K);ge?T.select(this).attr("d",ge).style("stroke","none"):T.select(this).remove()})}(M,$,te,z),function(J,X,K,ee,ie){var ae=K._context.staticPlot,oe=w.ensureSingle(J,"g","contourlines"),fe=ie.showlines!==!1,ge=ie.showlabels,ve=fe&&ge,xe=L.createLines(oe,fe||ge,X,ae),_e=L.createLineClip(oe,ve,K,ee.trace.uid),ye=J.selectAll("g.contourlabels").data(ge?[0]:[]);if(ye.exit().remove(),ye.enter().append("g").classed("contourlabels",!0),ge){var Ce=[],ke=[];w.clearLocationCache();var Te=L.labelFormatter(K,ee),le=i.tester.append("text").attr("data-notex",1).call(i.font,ie.labelfont),ue=X[0].xaxis,de=X[0].yaxis,Le=ue._length,we=de._length,Ee=ue.range,Oe=de.range,Fe=w.aggNums(Math.min,null,ee.x),pe=w.aggNums(Math.max,null,ee.x),be=w.aggNums(Math.min,null,ee.y),Me=w.aggNums(Math.max,null,ee.y),De=Math.max(ue.c2p(Fe,!0),0),Ne=Math.min(ue.c2p(pe,!0),Le),Be=Math.max(de.c2p(Me,!0),0),Ye=Math.min(de.c2p(be,!0),we),We={};Ee[0]<Ee[1]?(We.left=De,We.right=Ne):(We.left=Ne,We.right=De),Oe[0]<Oe[1]?(We.top=Be,We.bottom=Ye):(We.top=Ye,We.bottom=Be),We.middle=(We.top+We.bottom)/2,We.center=(We.left+We.right)/2,Ce.push([[We.left,We.top],[We.right,We.top],[We.right,We.bottom],[We.left,We.bottom]]);var et=Math.sqrt(Le*Le+we*we),ft=u.LABELDISTANCE*et/Math.max(1,X.length/u.LABELINCREASE);xe.each(function(ht){var mt=L.calcTextOpts(ht.level,Te,le,K);T.select(this).selectAll("path").each(function(){var Mt=w.getVisibleSegment(this,We,mt.height/2);if(Mt&&!(Mt.len<(mt.width+mt.height)*u.LABELMIN))for(var _t=Math.min(Math.ceil(Mt.len/ft),u.LABELMAX),it=0;it<_t;it++){var st=L.findBestTextLocation(this,Mt,mt,ke,We);if(!st)break;L.addLabelData(st,mt,ke,Ce)}})}),le.remove(),L.drawLabels(ye,ke,K,_e,ve?Ce:null)}ge&&!fe&&xe.remove()}(M,U,d,E,z),function(J,X,K,ee,ie){var ae=ee.trace,oe=K._fullLayout._clips,fe="clip"+ae.uid,ge=oe.selectAll("#"+fe).data(ae.connectgaps?[]:[0]);if(ge.enter().append("clipPath").classed("contourclip",!0).attr("id",fe),ge.exit().remove(),ae.connectgaps===!1){var ve={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:X.xaxis,yaxis:X.yaxis,x:ee.x,y:ee.y,z:g(ee),smoothing:0};a([ve]),n([ve]),o([ve],{type:"levels"}),w.ensureSingle(ge,"path","").attr("d",(ve.prefixBoundary?"M"+ie.join("L")+"Z":"")+c(ve,ie))}else fe=null;i.setClipUrl(J,fe,K)}(M,m,d,E,te)})},L.createLines=function(d,m,x,y){var k=x[0].smoothing,f=d.selectAll("g.contourlevel").data(m?x:[]);if(f.exit().remove(),f.enter().append("g").classed("contourlevel",!0),m){var S=f.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return i.smoothopen(E,k)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke");var M=f.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});M.exit().remove(),M.enter().append("path").classed("closedline",!0),M.attr("d",function(E){return i.smoothclosed(E,k)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke")}return f},L.createLineClip=function(d,m,x,y){var k=m?"clipline"+y:null,f=x._fullLayout._clips.selectAll("#"+k).data(m?[0]:[]);return f.exit().remove(),f.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),i.setClipUrl(d,k,x),f},L.labelFormatter=function(d,m){var x=d._fullLayout,y=m.trace,k=y.contours,f={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(k.labelformat)f.tickformat=k.labelformat,s(f,x);else{var S=_.extractOpts(y);if(S&&S.colorbar&&S.colorbar._axis)f=S.colorbar._axis;else{if(k.type==="constraint"){var M=k.value;w.isArrayOrTypedArray(M)?f.range=[M[0],M[M.length-1]]:f.range=[M,M]}else f.range=[k.start,k.end],f.nticks=(k.end-k.start)/k.size;f.range[0]===f.range[1]&&(f.range[1]+=f.range[0]||1),f.nticks||(f.nticks=1e3),s(f,x),h.prepTicks(f),f._tmin=null,f._tmax=null}}return function(E){return h.tickText(f,E).text}},L.calcTextOpts=function(d,m,x,y){var k=m(d);x.text(k).call(v.convertToTspans,y);var f=x.node(),S=i.bBox(f,!0);return{text:k,width:S.width,height:S.height,fontSize:+f.style["font-size"].replace("px",""),level:d,dy:(S.top+S.bottom)/2}},L.findBestTextLocation=function(d,m,x,y,k){var f,S,M,E,O,P=x.width;m.isClosed?(S=m.len/p.INITIALSEARCHPOINTS,f=m.min+S/2,M=m.max):(S=(m.len-P)/(p.INITIALSEARCHPOINTS+1),f=m.min+S+P/2,M=m.max-(S+P)/2);for(var I=1/0,z=0;z<p.ITERATIONS;z++){for(var U=f;U<M;U+=S){var R=w.getTextLocation(d,m.total,U,P),j=b(R,x,y,k);j<I&&(I=j,O=R,E=U)}if(I>2*p.MAXCOST)break;z&&(S/=2),M=(f=E-S/2)+1.5*S}if(I<=p.MAXCOST)return O},L.addLabelData=function(d,m,x,y){var k=m.fontSize,f=m.width+k/3,S=Math.max(0,m.height-k/3),M=d.x,E=d.y,O=d.theta,P=Math.sin(O),I=Math.cos(O),z=function(R,j){return[M+R*I-j*P,E+R*P+j*I]},U=[z(-f/2,-S/2),z(-f/2,S/2),z(f/2,S/2),z(f/2,-S/2)];x.push({text:m.text,x:M,y:E,dy:m.dy,theta:O,level:m.level,width:f,height:S}),y.push(U)},L.drawLabels=function(d,m,x,y,k){var f=d.selectAll("text").data(m,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(f.exit().remove(),f.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var O=E.x+Math.sin(E.theta)*E.dy,P=E.y-Math.cos(E.theta)*E.dy;T.select(this).text(E.text).attr({x:O,y:P,transform:"rotate("+180*E.theta/Math.PI+" "+O+" "+P+")"}).call(v.convertToTspans,x)}),k){for(var S="",M=0;M<k.length;M++)S+="M"+k[M].join("L")+"Z";w.ensureSingle(y,"path","").attr("d",S)}}},18670:function(N,L,e){var T=e(89298),w=e(71828);function i(_,v,h){var s={type:"linear",range:[_,v]};return T.autoTicks(s,(v-_)/(h||15)),s}N.exports=function(_,v){var h=_.contours;if(_.autocontour){var s=_.zmin,t=_.zmax;(_.zauto||s===void 0)&&(s=w.aggNums(Math.min,null,v)),(_.zauto||t===void 0)&&(t=w.aggNums(Math.max,null,v));var a=i(s,t,_.ncontours);h.size=a.dtick,h.start=T.tickFirst(a),a.range.reverse(),h.end=T.tickFirst(a),h.start===s&&(h.start+=h.size),h.end===t&&(h.end-=h.size),h.start>h.end&&(h.start=h.end=(h.start+h.end)/2),_._input.contours||(_._input.contours={}),w.extendFlat(_._input.contours,{start:h.start,end:h.end,size:h.size}),_._input.autocontour=!0}else if(h.type!=="constraint"){var n,r=h.start,l=h.end,o=_._input.contours;r>l&&(h.start=o.start=l,l=h.end=o.end=r,r=h.start),h.size>0||(n=r===l?1:i(r,l,_.ncontours).dtick,o.size=h.size=n)}}},84426:function(N,L,e){var T=e(39898),w=e(91424),i=e(70035),_=e(86068);N.exports=function(v){var h=T.select(v).selectAll("g.contour");h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var t=T.select(this),a=s[0].trace,n=a.contours,r=a.line,l=n.size||1,o=n.start,u=n.type==="constraint",p=!u&&n.coloring==="lines",c=!u&&n.coloring==="fill",b=p||c?_(a):null;t.selectAll("g.contourlevel").each(function(m){T.select(this).selectAll("path").call(w.lineGroupStyle,r.width,p?b(m.level):r.color,r.dash)});var g=n.labelfont;if(t.selectAll("g.contourlabels text").each(function(m){w.font(T.select(this),{family:g.family,size:g.size,color:g.color||(p?b(m.level):r.color)})}),u)t.selectAll("g.contourfill path").style("fill",a.fillcolor);else if(c){var d;t.selectAll("g.contourfill path").style("fill",function(m){return d===void 0&&(d=m.level),b(m.level+.5*l)}),d===void 0&&(d=o),t.selectAll("g.contourbg path").style("fill",b(d-.5*l))}}),i(v)}},8724:function(N,L,e){var T=e(1586),w=e(14523);N.exports=function(i,_,v,h,s){var t,a=v("contours.coloring"),n="";a==="fill"&&(t=v("contours.showlines")),t!==!1&&(a!=="lines"&&(n=v("line.color","#000")),v("line.width",.5),v("line.dash")),a!=="none"&&(i.showlegend!==!0&&(_.showlegend=!1),_._dfltShowLegend=!1,T(i,_,h,v,{prefix:"",cLetter:"z"})),v("line.smoothing"),w(v,h,n,s)}},88085:function(N,L,e){var T=e(21606),w=e(70600),i=e(50693),_=e(1426).extendFlat,v=w.contours;N.exports=_({carpet:{valType:"string",editType:"calc"},z:T.z,a:T.x,a0:T.x0,da:T.dx,b:T.y,b0:T.y0,db:T.dy,text:T.text,hovertext:T.hovertext,transpose:T.transpose,atype:T.xtype,btype:T.ytype,fillcolor:w.fillcolor,autocontour:w.autocontour,ncontours:w.ncontours,contours:{type:v.type,start:v.start,end:v.end,size:v.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:v.showlines,showlabels:v.showlabels,labelfont:v.labelfont,labelformat:v.labelformat,operation:v.operation,value:v.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:w.line.color,width:w.line.width,dash:w.line.dash,smoothing:w.line.smoothing,editType:"plot"},transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},59885:function(N,L,e){var T=e(78803),w=e(71828),i=e(68296),_=e(4742),v=e(824),h=e(43907),s=e(70769),t=e(75005),a=e(22882),n=e(18670);N.exports=function(r,l){var o=l._carpetTrace=a(r,l);if(o&&o.visible&&o.visible!=="legendonly"){if(!l.a||!l.b){var u=r.data[o.index],p=r.data[l.index];p.a||(p.a=u.a),p.b||(p.b=u.b),t(p,l,l._defaultColor,r._fullLayout)}var c=function(b,g){var d,m,x,y,k,f,S,M=g._carpetTrace,E=M.aaxis,O=M.baxis;E._minDtick=0,O._minDtick=0,w.isArray1D(g.z)&&i(g,E,O,"a","b",["z"]),d=g._a=g._a||g.a,y=g._b=g._b||g.b,d=d?E.makeCalcdata(g,"_a"):[],y=y?O.makeCalcdata(g,"_b"):[],m=g.a0||0,x=g.da||1,k=g.b0||0,f=g.db||1,S=g._z=_(g._z||g.z,g.transpose),g._emptypoints=h(S),v(S,g._emptypoints);var P=w.maxRowLength(S),I=g.xtype==="scaled"?"":d,z=s(g,I,m,x,P,E),U=g.ytype==="scaled"?"":y,R={a:z,b:s(g,U,k,f,S.length,O),z:S};return g.contours.type==="levels"&&g.contours.coloring!=="none"&&T(b,g,{vals:S,containerStr:"",cLetter:"z"}),[R]}(r,l);return n(l,l._z),c}}},75005:function(N,L,e){var T=e(71828),w=e(67684),i=e(88085),_=e(83179),v=e(67217),h=e(8724);N.exports=function(s,t,a,n){function r(l,o){return T.coerce(s,t,i,l,o)}if(r("carpet"),s.a&&s.b){if(!w(s,t,r,n,"a","b"))return void(t.visible=!1);r("text"),r("contours.type")==="constraint"?_(s,t,r,n,a,{hasHover:!1}):(v(s,t,r,function(l){return T.coerce2(s,t,i,l)}),h(s,t,r,n,{hasHover:!1}))}else t._defaultColor=a,t._length=null}},93740:function(N,L,e){N.exports={attributes:e(88085),supplyDefaults:e(75005),colorbar:e(90654),calc:e(59885),plot:e(51048),style:e(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(N,L,e){var T=e(39898),w=e(27669),i=e(67961),_=e(91424),v=e(71828),h=e(87678),s=e(81696),t=e(29854),a=e(36914),n=e(84857),r=e(87558),l=e(20083),o=e(22882),u=e(4536);function p(g,d,m){var x=g.getPointAtLength(d),y=g.getPointAtLength(m),k=y.x-x.x,f=y.y-x.y,S=Math.sqrt(k*k+f*f);return[k/S,f/S]}function c(g){var d=Math.sqrt(g[0]*g[0]+g[1]*g[1]);return[g[0]/d,g[1]/d]}function b(g,d){var m=Math.abs(g[0]*d[0]+g[1]*d[1]);return Math.sqrt(1-m*m)/m}N.exports=function(g,d,m,x){var y=d.xaxis,k=d.yaxis;v.makeTraceGroups(x,m,"contour").each(function(f){var S=T.select(this),M=f[0],E=M.trace,O=E._carpetTrace=o(g,E),P=g.calcdata[O.index][0];if(O.visible&&O.visible!=="legendonly"){var I=M.a,z=M.b,U=E.contours,R=r(U,d,M),j=U.type==="constraint",Z=U._operation,F=j?Z==="="?"lines":"fill":U.coloring,V=[[I[0],z[z.length-1]],[I[I.length-1],z[z.length-1]],[I[I.length-1],z[0]],[I[0],z[0]]];h(R);var H=1e-8*(I[I.length-1]-I[0]),te=1e-8*(z[z.length-1]-z[0]);s(R,H,te);var $,J,X,K,ee=R;U.type==="constraint"&&(ee=n(R,Z)),function(fe,ge){var ve,xe,_e,ye,Ce,ke,Te,le,ue;for(ve=0;ve<fe.length;ve++){for(Ce=(ye=fe[ve]).pedgepaths=[],ke=ye.ppaths=[],xe=0;xe<ye.edgepaths.length;xe++){for(ue=ye.edgepaths[xe],Te=[],_e=0;_e<ue.length;_e++)Te[_e]=ge(ue[_e]);Ce.push(Te)}for(xe=0;xe<ye.paths.length;xe++){for(ue=ye.paths[xe],le=[],_e=0;_e<ue.length;_e++)le[_e]=ge(ue[_e]);ke.push(le)}}}(R,oe);var ie=[];for(K=P.clipsegments.length-1;K>=0;K--)$=P.clipsegments[K],J=w([],$.x,y.c2p),X=w([],$.y,k.c2p),J.reverse(),X.reverse(),ie.push(i(J,X,$.bicubic));var ae="M"+ie.join("L")+"Z";(function(fe,ge,ve,xe,_e,ye){var Ce,ke,Te,le,ue=v.ensureSingle(fe,"g","contourbg").selectAll("path").data(ye!=="fill"||_e?[]:[0]);ue.enter().append("path"),ue.exit().remove();var de=[];for(le=0;le<ge.length;le++)Ce=ge[le],ke=w([],Ce.x,ve.c2p),Te=w([],Ce.y,xe.c2p),de.push(i(ke,Te,Ce.bicubic));ue.attr("d","M"+de.join("L")+"Z").style("stroke","none")})(S,P.clipsegments,y,k,j,F),function(fe,ge,ve,xe,_e,ye,Ce,ke,Te,le,ue){var de=le==="fill";de&&l(_e,fe.contours);var Le=v.ensureSingle(ge,"g","contourfill").selectAll("path").data(de?_e:[]);Le.enter().append("path"),Le.exit().remove(),Le.each(function(we){var Ee=(we.prefixBoundary?ue:"")+function(Oe,Fe,pe,be,Me,De,Ne,Be){var Ye,We,et,ft,ht,mt,Mt,_t="",it=Fe.edgepaths.map(function(ot,je){return je}),st=!0,St=1e-4*Math.abs(pe[0][0]-pe[2][0]),zt=1e-4*Math.abs(pe[0][1]-pe[2][1]);function Ft(ot){return Math.abs(ot[1]-pe[0][1])<zt}function Pt(ot){return Math.abs(ot[1]-pe[2][1])<zt}function Xe(ot){return Math.abs(ot[0]-pe[0][0])<St}function Ke(ot){return Math.abs(ot[0]-pe[2][0])<St}function He(ot,je){var Ue,at,$e,gt,yt="";for(Ft(ot)&&!Ke(ot)||Pt(ot)&&!Xe(ot)?(gt=Me.aaxis,$e=u(Me,De,[ot[0],je[0]],.5*(ot[1]+je[1]))):(gt=Me.baxis,$e=u(Me,De,.5*(ot[0]+je[0]),[ot[1],je[1]])),Ue=1;Ue<$e.length;Ue++)for(yt+=gt.smoothing?"C":"L",at=0;at<$e[Ue].length;at++){var xt=$e[Ue][at];yt+=[Ne.c2p(xt[0]),Be.c2p(xt[1])]+" "}return yt}for(Ye=0,We=null;it.length;){var Je=Fe.edgepaths[Ye][0];for(We&&(_t+=He(We,Je)),Mt=_.smoothopen(Fe.edgepaths[Ye].map(be),Fe.smoothing),_t+=st?Mt:Mt.replace(/^M/,"L"),it.splice(it.indexOf(Ye),1),We=Fe.edgepaths[Ye][Fe.edgepaths[Ye].length-1],ht=-1,ft=0;ft<4;ft++){if(!We){v.log("Missing end?",Ye,Fe);break}for(Ft(We)&&!Ke(We)?et=pe[1]:Xe(We)?et=pe[0]:Pt(We)?et=pe[3]:Ke(We)&&(et=pe[2]),mt=0;mt<Fe.edgepaths.length;mt++){var lt=Fe.edgepaths[mt][0];Math.abs(We[0]-et[0])<St?Math.abs(We[0]-lt[0])<St&&(lt[1]-We[1])*(et[1]-lt[1])>=0&&(et=lt,ht=mt):Math.abs(We[1]-et[1])<zt?Math.abs(We[1]-lt[1])<zt&&(lt[0]-We[0])*(et[0]-lt[0])>=0&&(et=lt,ht=mt):v.log("endpt to newendpt is not vert. or horz.",We,et,lt)}if(ht>=0)break;_t+=He(We,et),We=et}if(ht===Fe.edgepaths.length){v.log("unclosed perimeter path");break}Ye=ht,(st=it.indexOf(Ye)===-1)&&(Ye=it[0],_t+=He(We,et)+"Z",We=null)}for(Ye=0;Ye<Fe.paths.length;Ye++)_t+=_.smoothclosed(Fe.paths[Ye].map(be),Fe.smoothing);return _t}(0,we,ye,Ce,ke,Te,ve,xe);Ee?T.select(this).attr("d",Ee).style("stroke","none"):T.select(this).remove()})}(E,S,y,k,ee,V,oe,O,P,F,ae),function(fe,ge,ve,xe,_e,ye,Ce){var ke=ve._context.staticPlot,Te=v.ensureSingle(fe,"g","contourlines"),le=_e.showlines!==!1,ue=_e.showlabels,de=le&&ue,Le=t.createLines(Te,le||ue,ge,ke),we=t.createLineClip(Te,de,ve,xe.trace.uid),Ee=fe.selectAll("g.contourlabels").data(ue?[0]:[]);if(Ee.exit().remove(),Ee.enter().append("g").classed("contourlabels",!0),ue){var Oe=ye.xaxis,Fe=ye.yaxis,pe=Oe._length,be=Fe._length,Me=[[[0,0],[pe,0],[pe,be],[0,be]]],De=[];v.clearLocationCache();var Ne=t.labelFormatter(ve,xe),Be=_.tester.append("text").attr("data-notex",1).call(_.font,_e.labelfont),Ye={left:0,right:pe,center:pe/2,top:0,bottom:be,middle:be/2},We=Math.sqrt(pe*pe+be*be),et=a.LABELDISTANCE*We/Math.max(1,ge.length/a.LABELINCREASE);Le.each(function(ft){var ht=t.calcTextOpts(ft.level,Ne,Be,ve);T.select(this).selectAll("path").each(function(mt){var Mt=this,_t=v.getVisibleSegment(Mt,Ye,ht.height/2);if(_t&&(function(zt,Ft,Pt,Xe,Ke,He){for(var Je,lt=0;lt<Pt.pedgepaths.length;lt++)Ft===Pt.pedgepaths[lt]&&(Je=Pt.edgepaths[lt]);if(Je){var ot=Ke.a[0],je=Ke.a[Ke.a.length-1],Ue=Ke.b[0],at=Ke.b[Ke.b.length-1],$e=p(zt,0,1),gt=p(zt,Xe.total,Xe.total-1),yt=dt(Je[0],$e),xt=Xe.total-dt(Je[Je.length-1],gt);Xe.min<yt&&(Xe.min=yt),Xe.max>xt&&(Xe.max=xt),Xe.len=Xe.max-Xe.min}function dt(Lt,Tt){var bt,Ct=0,Dt=.1;return(Math.abs(Lt[0]-ot)<Dt||Math.abs(Lt[0]-je)<Dt)&&(bt=c(Ke.dxydb_rough(Lt[0],Lt[1],Dt)),Ct=Math.max(Ct,He*b(Tt,bt)/2)),(Math.abs(Lt[1]-Ue)<Dt||Math.abs(Lt[1]-at)<Dt)&&(bt=c(Ke.dxyda_rough(Lt[0],Lt[1],Dt)),Ct=Math.max(Ct,He*b(Tt,bt)/2)),Ct}}(Mt,mt,ft,_t,Ce,ht.height),!(_t.len<(ht.width+ht.height)*a.LABELMIN)))for(var it=Math.min(Math.ceil(_t.len/et),a.LABELMAX),st=0;st<it;st++){var St=t.findBestTextLocation(Mt,_t,ht,De,Ye);if(!St)break;t.addLabelData(St,ht,De,Me)}})}),Be.remove(),t.drawLabels(Ee,De,ve,we,de?Me:null)}ue&&!le&&Le.remove()}(S,R,g,M,U,d,O),_.setClipUrl(S,O._clipPathId,g)}function oe(fe){var ge=O.ab2xy(fe[0],fe[1],!0);return[y.c2p(ge[0]),k.c2p(ge[1])]}})}},64096:function(N,L,e){var T=e(50693),w=e(5386).fF,i=e(9012),_=e(99181),v=e(1426).extendFlat;N.exports=v({lon:_.lon,lat:_.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:_.text,hovertext:_.hovertext,hoverinfo:v({},i.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:w(),showlegend:v({},i.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(N,L,e){var T=e(92770),w=e(71828).isArrayOrTypedArray,i=e(50606).BADNUM,_=e(78803),v=e(71828)._;N.exports=function(h,s){for(var t=s._length,a=new Array(t),n=s.z,r=w(n)&&n.length,l=0;l<t;l++){var o=a[l]={},u=s.lon[l],p=s.lat[l];if(o.lonlat=T(u)&&T(p)?[+u,+p]:[i,i],r){var c=n[l];o.z=T(c)?c:i}}return _(h,s,{vals:r?n:[0,1],containerStr:"",cLetter:"z"}),t&&(a[0].t={labels:{lat:v(h,"lat:")+" ",lon:v(h,"lon:")+" "}}),a}},52414:function(N,L,e){var T=e(92770),w=e(71828),i=e(7901),_=e(21081),v=e(50606).BADNUM,h=e(18214).makeBlank;N.exports=function(s){var t=s[0].trace,a=t.visible===!0&&t._length!==0,n=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:h()};if(!a)return n;var r,l=[],o=t.z,u=t.radius,p=w.isArrayOrTypedArray(o)&&o.length,c=w.isArrayOrTypedArray(u);for(r=0;r<s.length;r++){var b=s[r],g=b.lonlat;if(g[0]!==v){var d={};if(p){var m=b.z;d.z=m!==v?m:0}c&&(d.r=T(u[r])&&u[r]>0?+u[r]:0),l.push({type:"Feature",geometry:{type:"Point",coordinates:g},properties:d})}}var x=_.extractOpts(t),y=x.reversescale?_.flipScale(x.colorscale):x.colorscale,k=y[0][1],f=["interpolate",["linear"],["heatmap-density"],0,i.opacity(k)<1?k:i.addOpacity(k,0)];for(r=1;r<y.length;r++)f.push(y[r][0],y[r][1]);var S=["interpolate",["linear"],["get","z"],x.min,0,x.max,1];return w.extendFlat(n.heatmap.paint,{"heatmap-weight":p?S:1/(x.max-x.min),"heatmap-color":f,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),n.geojson={type:"FeatureCollection",features:l},n.heatmap.layout.visibility="visible",n}},79429:function(N,L,e){var T=e(71828),w=e(1586),i=e(64096);N.exports=function(_,v,h,s){function t(l,o){return T.coerce(_,v,i,l,o)}var a=t("lon")||[],n=t("lat")||[],r=Math.min(a.length,n.length);r?(v._length=r,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),w(_,v,s,t,{prefix:"",cLetter:"z"})):v.visible=!1}},62474:function(N){N.exports=function(L,e){return L.lon=e.lon,L.lat=e.lat,L.z=e.z,L}},84684:function(N,L,e){var T=e(89298),w=e(28178).hoverPoints,i=e(28178).getExtraText;N.exports=function(_,v,h){var s=w(_,v,h);if(s){var t=s[0],a=t.cd,n=a[0].trace,r=a[t.index];if(delete t.color,"z"in r){var l=t.subplot.mockAxis;t.z=r.z,t.zLabel=T.tickText(l,l.c2l(r.z),"hover").text}return t.extraText=i(n,r,a[0].t.labels),[t]}}},93814:function(N,L,e){N.exports={attributes:e(64096),supplyDefaults:e(79429),colorbar:e(61243),formatLabels:e(15636),calc:e(85070),plot:e(7336),hoverPoints:e(84684),eventData:e(62474),getBelow:function(T,w){for(var i=w.getMapLayers(),_=0;_<i.length;_++){var v=i[_],h=v.id;if(v.type==="symbol"&&typeof h=="string"&&h.indexOf("plotly-")===-1)return h}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(N,L,e){var T=e(52414),w=e(77734).traceLayerPrefix;function i(v,h){this.type="densitymapbox",this.subplot=v,this.uid=h,this.sourceId="source-"+h,this.layerList=[["heatmap",w+h+"-heatmap"]],this.below=null}var _=i.prototype;_.update=function(v){var h=this.subplot,s=this.layerList,t=T(v),a=h.belowLookup["trace-"+this.uid];h.map.getSource(this.sourceId).setData(t.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(t,a),this.below=a);for(var n=0;n<s.length;n++){var r=s[n],l=r[0],o=r[1],u=t[l];h.setOptions(o,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&h.setOptions(o,"setPaintProperty",u.paint)}},_._addLayers=function(v,h){for(var s=this.subplot,t=this.layerList,a=this.sourceId,n=0;n<t.length;n++){var r=t[n],l=r[0],o=v[l];s.addLayer({type:l,id:r[1],source:a,layout:o.layout,paint:o.paint},h)}},_._removeLayers=function(){for(var v=this.subplot.map,h=this.layerList,s=h.length-1;s>=0;s--)v.removeLayer(h[s][1])},_.dispose=function(){var v=this.subplot.map;this._removeLayers(),v.removeSource(this.sourceId)},N.exports=function(v,h){var s=h[0].trace,t=new i(v,s.uid),a=t.sourceId,n=T(h),r=t.below=v.belowLookup["trace-"+s.uid];return v.map.addSource(a,{type:"geojson",data:n.geojson}),t._addLayers(n,r),t}},49789:function(N,L,e){var T=e(71828);N.exports=function(w,i){for(var _=0;_<w.length;_++)w[_].i=_;T.mergeArray(i.text,w,"tx"),T.mergeArray(i.hovertext,w,"htx");var v=i.marker;if(v){T.mergeArray(v.opacity,w,"mo"),T.mergeArray(v.color,w,"mc");var h=v.line;h&&(T.mergeArray(h.color,w,"mlc"),T.mergeArrayCastPositive(h.width,w,"mlw"))}}},1285:function(N,L,e){var T,w=e(1486),i=e(82196).line,_=e(9012),v=e(12663).axisHoverFormat,h=e(5386).fF,s=e(5386).si,t=e(18517),a=e(1426).extendFlat,n=e(7901);N.exports={x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),hovertext:w.hovertext,hovertemplate:h({},{keys:t.eventDataKeys}),hoverinfo:a({},_.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:w.text,textposition:w.textposition,insidetextanchor:a({},w.insidetextanchor,{dflt:"middle"}),textangle:a({},w.textangle,{dflt:0}),textfont:w.textfont,insidetextfont:w.insidetextfont,outsidetextfont:w.outsidetextfont,constraintext:w.constraintext,cliponaxis:w.cliponaxis,orientation:a({},w.orientation,{}),offset:a({},w.offset,{arrayOk:!1}),width:a({},w.width,{arrayOk:!1}),marker:(T=a({},w.marker),delete T.pattern,T),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:a({},i.color,{dflt:n.defaultLine}),width:a({},i.width,{dflt:0,editType:"plot"}),dash:i.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup}},9532:function(N,L,e){var T=e(89298),w=e(42973),i=e(49789),_=e(66279),v=e(50606).BADNUM;function h(s){return s===v?0:s}N.exports=function(s,t){var a,n,r,l,o,u,p,c,b=T.getFromId(s,t.xaxis||"x"),g=T.getFromId(s,t.yaxis||"y");t.orientation==="h"?(a=b.makeCalcdata(t,"x"),r=g.makeCalcdata(t,"y"),l=w(t,g,"y",r),o=!!t.yperiodalignment,u="y"):(a=g.makeCalcdata(t,"y"),r=b.makeCalcdata(t,"x"),l=w(t,b,"x",r),o=!!t.xperiodalignment,u="x"),n=l.vals;var d,m=Math.min(n.length,a.length),x=new Array(m);for(t._base=[],p=0;p<m;p++){a[p]<0&&(a[p]=v);var y=!1;a[p]!==v&&p+1<m&&a[p+1]!==v&&(y=!0),c=x[p]={p:n[p],s:a[p],cNext:y},t._base[p]=-.5*c.s,o&&(x[p].orig_p=r[p],x[p][u+"End"]=l.ends[p],x[p][u+"Start"]=l.starts[p]),t.ids&&(c.id=String(t.ids[p])),p===0&&(x[0].vTotal=0),x[0].vTotal+=h(c.s),c.begR=h(c.s)/h(x[0].s)}for(p=0;p<m;p++)(c=x[p]).s!==v&&(c.sumR=c.s/x[0].vTotal,c.difR=d!==void 0?c.s/d:1,d=c.s);return i(x,t),_(x,t),x}},18517:function(N){N.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(N,L,e){var T=e(11661).setGroupPositions;N.exports=function(w,i){var _,v,h=w._fullLayout,s=w._fullData,t=w.calcdata,a=i.xaxis,n=i.yaxis,r=[],l=[],o=[];for(v=0;v<s.length;v++){var u=s[v],p=u.orientation==="h";u.visible===!0&&u.xaxis===a._id&&u.yaxis===n._id&&u.type==="funnel"&&(_=t[v],p?o.push(_):l.push(_),r.push(_))}var c={mode:h.funnelmode,norm:h.funnelnorm,gap:h.funnelgap,groupgap:h.funnelgroupgap};for(T(w,a,n,l,c),T(w,n,a,o,c),v=0;v<r.length;v++){_=r[v];for(var b=0;b<_.length;b++)b+1<_.length&&(_[b].nextP0=_[b+1].p0,_[b].nextS0=_[b+1].s0,_[b].nextP1=_[b+1].p1,_[b].nextS1=_[b+1].s1)}}},26199:function(N,L,e){var T=e(71828),w=e(26125),i=e(90769).handleText,_=e(67513),v=e(73927),h=e(1285),s=e(7901);N.exports={supplyDefaults:function(t,a,n,r){function l(c,b){return T.coerce(t,a,h,c,b)}if(_(t,a,r,l)){v(t,a,r,l),l("xhoverformat"),l("yhoverformat"),l("orientation",a.y&&!a.x?"v":"h"),l("offset"),l("width");var o=l("text");l("hovertext"),l("hovertemplate");var u=l("textposition");i(t,a,r,l,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a.textposition==="none"||a.texttemplate||l("textinfo",T.isArrayOrTypedArray(o)?"text+value":"value");var p=l("marker.color",n);l("marker.line.color",s.defaultLine),l("marker.line.width"),l("connector.visible")&&(l("connector.fillcolor",function(c){var b=T.isArrayOrTypedArray(c)?"#000":c;return s.addOpacity(b,.5*s.opacity(b))}(p)),l("connector.line.width")&&(l("connector.line.color"),l("connector.line.dash")))}else a.visible=!1},crossTraceDefaults:function(t,a){var n,r;function l(u){return T.coerce(r._input,r,h,u)}if(a.funnelmode==="group")for(var o=0;o<t.length;o++)n=(r=t[o])._input,w(n,r,a,l)}}},34598:function(N){N.exports=function(L,e){return L.x="xVal"in e?e.xVal:e.x,L.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(L.percentInitial=e.percentInitial),"percentPrevious"in e&&(L.percentPrevious=e.percentPrevious),"percentTotal"in e&&(L.percentTotal=e.percentTotal),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),L}},63341:function(N,L,e){var T=e(7901).opacity,w=e(95423).hoverOnBars,i=e(71828).formatPercent;N.exports=function(_,v,h,s,t){var a=w(_,v,h,s,t);if(a){var n=a.cd,r=n[0].trace,l=r.orientation==="h",o=n[a.index];a[(l?"x":"y")+"LabelVal"]=o.s,a.percentInitial=o.begR,a.percentInitialLabel=i(o.begR,1),a.percentPrevious=o.difR,a.percentPreviousLabel=i(o.difR,1),a.percentTotal=o.sumR,a.percentTotalLabel=i(o.sumR,1);var u=o.hi||r.hoverinfo,p=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",b=u.split("+"),g=function(d){return c||b.indexOf(d)!==-1};g("percent initial")&&p.push(a.percentInitialLabel+" of initial"),g("percent previous")&&p.push(a.percentPreviousLabel+" of previous"),g("percent total")&&p.push(a.percentTotalLabel+" of total")}return a.extraText=p.join("<br>"),a.color=function(d,m){var x=d.marker,y=m.mc||x.color,k=m.mlc||x.line.color,f=m.mlw||x.line.width;return T(y)?y:T(k)&&f?k:void 0}(r,o),[a]}}},51759:function(N,L,e){N.exports={attributes:e(1285),layoutAttributes:e(10440),supplyDefaults:e(26199).supplyDefaults,crossTraceDefaults:e(26199).crossTraceDefaults,supplyLayoutDefaults:e(93138),calc:e(9532),crossTraceCalc:e(8984),plot:e(80461),style:e(68266).style,hoverPoints:e(63341),eventData:e(34598),selectPoints:e(81974),moduleType:"trace",name:"funnel",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(N){N.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(N,L,e){var T=e(71828),w=e(10440);N.exports=function(i,_,v){var h=!1;function s(n,r){return T.coerce(i,_,w,n,r)}for(var t=0;t<v.length;t++){var a=v[t];if(a.visible&&a.type==="funnel"){h=!0;break}}h&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},80461:function(N,L,e){var T=e(39898),w=e(71828),i=e(91424),_=e(50606).BADNUM,v=e(17295),h=e(72597).clearMinTextSize;function s(t,a,n,r){var l=[],o=[],u=r?a:n,p=r?n:a;return l[0]=u.c2p(t.s0,!0),o[0]=p.c2p(t.p0,!0),l[1]=u.c2p(t.s1,!0),o[1]=p.c2p(t.p1,!0),l[2]=u.c2p(t.nextS0,!0),o[2]=p.c2p(t.nextP0,!0),l[3]=u.c2p(t.nextS1,!0),o[3]=p.c2p(t.nextP1,!0),r?[l,o]:[o,l]}N.exports=function(t,a,n,r){var l=t._fullLayout;h("funnel",l),function(o,u,p,c){var b=u.xaxis,g=u.yaxis;w.makeTraceGroups(c,p,"trace bars").each(function(d){var m=T.select(this),x=d[0].trace,y=w.ensureSingle(m,"g","regions");if(x.connector&&x.connector.visible){var k=x.orientation==="h",f=y.selectAll("g.region").data(w.identity);f.enter().append("g").classed("region",!0),f.exit().remove();var S=f.size();f.each(function(M,E){if(E===S-1||M.cNext){var O=s(M,b,g,k),P=O[0],I=O[1],z="";P[0]!==_&&I[0]!==_&&P[1]!==_&&I[1]!==_&&P[2]!==_&&I[2]!==_&&P[3]!==_&&I[3]!==_&&(z+=k?"M"+P[0]+","+I[1]+"L"+P[2]+","+I[2]+"H"+P[3]+"L"+P[1]+","+I[1]+"Z":"M"+P[1]+","+I[1]+"L"+P[2]+","+I[3]+"V"+I[2]+"L"+P[1]+","+I[0]+"Z"),z===""&&(z="M0,0Z"),w.ensureSingle(T.select(this),"path").attr("d",z).call(i.setClipUrl,u.layerClipId,o)}})}else y.remove()})}(t,a,n,r),function(o,u,p,c){var b=u.xaxis,g=u.yaxis;w.makeTraceGroups(c,p,"trace bars").each(function(d){var m=T.select(this),x=d[0].trace,y=w.ensureSingle(m,"g","lines");if(x.connector&&x.connector.visible&&x.connector.line.width){var k=x.orientation==="h",f=y.selectAll("g.line").data(w.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(M,E){if(E===S-1||M.cNext){var O=s(M,b,g,k),P=O[0],I=O[1],z="";P[3]!==void 0&&I[3]!==void 0&&(k?(z+="M"+P[0]+","+I[1]+"L"+P[2]+","+I[2],z+="M"+P[1]+","+I[1]+"L"+P[3]+","+I[2]):(z+="M"+P[1]+","+I[1]+"L"+P[2]+","+I[3],z+="M"+P[1]+","+I[0]+"L"+P[2]+","+I[2])),z===""&&(z="M0,0Z"),w.ensureSingle(T.select(this),"path").attr("d",z).call(i.setClipUrl,u.layerClipId,o)}})}else y.remove()})}(t,a,n,r),v.plot(t,a,n,r,{mode:l.funnelmode,norm:l.funnelmode,gap:l.funnelgap,groupgap:l.funnelgroupgap})}},68266:function(N,L,e){var T=e(39898),w=e(91424),i=e(7901),_=e(37822).DESELECTDIM,v=e(16688),h=e(72597).resizeText,s=v.styleTextPoints;N.exports={style:function(t,a,n){var r=n||T.select(t).selectAll("g.funnellayer").selectAll("g.trace");h(t,r,"funnel"),r.style("opacity",function(l){return l[0].trace.opacity}),r.each(function(l){var o=T.select(this),u=l[0].trace;o.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u.marker;T.select(this).call(i.fill,p.mc||c.color).call(i.stroke,p.mlc||c.line.color).call(w.dashLine,c.line.dash,p.mlw||c.line.width).style("opacity",u.selectedpoints&&!p.selected?_:1)}}),s(o,u,t),o.selectAll(".regions").each(function(){T.select(this).selectAll("path").style("stroke-width",0).call(i.fill,u.connector.fillcolor)}),o.selectAll(".lines").each(function(){var p=u.connector.line;w.lineGroupStyle(T.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},86807:function(N,L,e){var T=e(34e3),w=e(9012),i=e(27670).Y,_=e(5386).fF,v=e(5386).si,h=e(1426).extendFlat;N.exports={labels:T.labels,label0:T.label0,dlabel:T.dlabel,values:T.values,marker:{colors:T.marker.colors,line:{color:h({},T.marker.line.color,{dflt:null}),width:h({},T.marker.line.width,{dflt:1}),editType:"calc"},pattern:T.marker.pattern,editType:"calc"},text:T.text,hovertext:T.hovertext,scalegroup:h({},T.scalegroup,{}),textinfo:h({},T.textinfo,{flags:["label","text","value","percent"]}),texttemplate:v({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:h({},w.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:_({},{keys:["label","color","value","text","percent"]}),textposition:h({},T.textposition,{values:["inside","none"],dflt:"inside"}),textfont:T.textfont,insidetextfont:T.insidetextfont,title:{text:T.title.text,font:T.title.font,position:h({},T.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:i({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(N,L,e){var T=e(74875);L.name="funnelarea",L.plot=function(w,i,_,v){T.plotBasePlot(L.name,w,i,_,v)},L.clean=function(w,i,_,v){T.cleanBasePlot(L.name,w,i,_,v)}},89574:function(N,L,e){var T=e(32354);N.exports={calc:function(w,i){return T.calc(w,i)},crossTraceCalc:function(w){T.crossTraceCalc(w,{type:"funnelarea"})}}},86282:function(N,L,e){var T=e(71828),w=e(86807),i=e(27670).c,_=e(90769).handleText,v=e(37434).handleLabelsAndValues,h=e(37434).handleMarkerDefaults;N.exports=function(s,t,a,n){function r(m,x){return T.coerce(s,t,w,m,x)}var l=r("labels"),o=r("values"),u=v(l,o),p=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(r("label0"),r("dlabel")),p){t._length=p,h(s,t,n,r),r("scalegroup");var c,b=r("text"),g=r("texttemplate");if(g||(c=r("textinfo",Array.isArray(b)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),g||c&&c!=="none"){var d=r("textposition");_(s,t,n,r,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}i(t,n,r),r("title.text")&&(r("title.position"),T.coerceFont(r,"title.font",n.font)),r("aspectratio"),r("baseratio")}else t.visible=!1}},10421:function(N,L,e){N.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(6452),categories:["pie-like","funnelarea","showLegend"],attributes:e(86807),layoutAttributes:e(80097),supplyDefaults:e(86282),supplyLayoutDefaults:e(57402),calc:e(89574).calc,crossTraceCalc:e(89574).crossTraceCalc,plot:e(79187),style:e(71858),styleOne:e(63463),meta:{}}},80097:function(N,L,e){var T=e(92774).hiddenlabels;N.exports={hiddenlabels:T,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(N,L,e){var T=e(71828),w=e(80097);N.exports=function(i,_){function v(h,s){return T.coerce(i,_,w,h,s)}v("hiddenlabels"),v("funnelareacolorway",_.colorway),v("extendfunnelareacolors")}},79187:function(N,L,e){var T=e(39898),w=e(91424),i=e(71828),_=i.strScale,v=i.strTranslate,h=e(63893),s=e(17295).toMoveInsideBar,t=e(72597),a=t.recordMinTextSize,n=t.clearMinTextSize,r=e(53581),l=e(14575),o=l.attachFxHandlers,u=l.determineInsideTextFont,p=l.layoutAreas,c=l.prerenderTitles,b=l.positionTitleOutside,g=l.formatSliceLabel;function d(m,x){return"l"+(x[0]-m[0])+","+(x[1]-m[1])}N.exports=function(m,x){var y=m._context.staticPlot,k=m._fullLayout;n("funnelarea",k),c(x,m),p(x,k._size),i.makeTraceGroups(k._funnelarealayer,x,"trace").each(function(f){var S=T.select(this),M=f[0],E=M.trace;(function(O){if(O.length){var P=O[0],I=P.trace,z=I.aspectratio,U=I.baseratio;U>.999&&(U=.999);var R,j,Z,F=Math.pow(U,2),V=P.vTotal,H=V,te=V*F/(1-F)/V,$=[];for($.push(Te()),j=O.length-1;j>-1;j--)if(!(Z=O[j]).hidden){var J=Z.v/H;te+=J,$.push(Te())}var X=1/0,K=-1/0;for(j=0;j<$.length;j++)R=$[j],X=Math.min(X,R[1]),K=Math.max(K,R[1]);for(j=0;j<$.length;j++)$[j][1]-=(K+X)/2;var ee=$[$.length-1][0],ie=P.r,ae=(K-X)/2,oe=ie/ee,fe=ie/ae*z;for(P.r=fe*ae,j=0;j<$.length;j++)$[j][0]*=oe,$[j][1]*=fe;var ge,ve,xe=[-(R=$[0])[0],R[1]],_e=[R[0],R[1]],ye=0;for(j=O.length-1;j>-1;j--)if(!(Z=O[j]).hidden){var Ce=$[ye+=1][0],ke=$[ye][1];Z.TL=[-Ce,ke],Z.TR=[Ce,ke],Z.BL=xe,Z.BR=_e,Z.pxmid=(ge=Z.TR,ve=Z.BR,[.5*(ge[0]+ve[0]),.5*(ge[1]+ve[1])]),xe=Z.TL,_e=Z.TR}}function Te(){var le,ue={x:le=Math.sqrt(te),y:-le};return[ue.x,ue.y]}})(f),S.each(function(){var O=T.select(this).selectAll("g.slice").data(f);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(I,z){if(I.hidden)T.select(this).selectAll("path,g").remove();else{I.pointNumber=I.i,I.curveNumber=E.index;var U=M.cx,R=M.cy,j=T.select(this),Z=j.selectAll("path.surface").data([I]);Z.enter().append("path").classed("surface",!0).style({"pointer-events":y?"none":"all"}),j.call(o,m,f);var F="M"+(U+I.TR[0])+","+(R+I.TR[1])+d(I.TR,I.BR)+d(I.BR,I.BL)+d(I.BL,I.TL)+"Z";Z.attr("d",F),g(m,I,M);var V=r.castOption(E.textposition,I.pts),H=j.selectAll("g.slicetext").data(I.text&&V!=="none"?[0]:[]);H.enter().append("g").classed("slicetext",!0),H.exit().remove(),H.each(function(){var te=i.ensureSingle(T.select(this),"text","",function(oe){oe.attr("data-notex",1)}),$=i.ensureUniformFontSize(m,u(E,I,k.font));te.text(I.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(w.font,$).call(h.convertToTspans,m);var J,X,K,ee=w.bBox(te.node()),ie=Math.min(I.BL[1],I.BR[1])+R,ae=Math.max(I.TL[1],I.TR[1])+R;X=Math.max(I.TL[0],I.BL[0])+U,K=Math.min(I.TR[0],I.BR[0])+U,(J=s(X,K,ie,ae,ee,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=$.size,a(E.type,J,k),f[z].transform=J,i.setTransormAndDisplay(te,J)})}});var P=T.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);P.enter().append("g").classed("titletext",!0),P.exit().remove(),P.each(function(){var I=i.ensureSingle(T.select(this),"text","",function(R){R.attr("data-notex",1)}),z=E.title.text;E._meta&&(z=i.templateString(z,E._meta)),I.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(w.font,E.title.font).call(h.convertToTspans,m);var U=b(M,k._size);I.attr("transform",v(U.x,U.y)+_(Math.min(1,U.scale))+v(U.tx,U.ty))})})})}},71858:function(N,L,e){var T=e(39898),w=e(63463),i=e(72597).resizeText;N.exports=function(_){var v=_._fullLayout._funnelarealayer.selectAll(".trace");i(_,v,"funnelarea"),v.each(function(h){var s=h[0].trace,t=T.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(a){T.select(this).call(w,a,s,_)})})}},21606:function(N,L,e){var T=e(82196),w=e(9012),i=e(41940),_=e(12663).axisHoverFormat,v=e(5386).fF,h=e(5386).si,s=e(50693),t=e(1426).extendFlat;N.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},T.x,{impliedEdits:{xtype:"array"}}),x0:t({},T.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},T.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},T.y,{impliedEdits:{ytype:"array"}}),y0:t({},T.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},T.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},T.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},T.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},T.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},T.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},T.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},T.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:v(),texttemplate:h({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:i({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},w.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},90757:function(N,L,e){var T=e(73972),w=e(71828),i=e(89298),_=e(42973),v=e(17562),h=e(78803),s=e(68296),t=e(4742),a=e(824),n=e(43907),r=e(70769),l=e(50606).BADNUM;function o(u){for(var p=[],c=u.length,b=0;b<c;b++){var g=u[b];g!==l&&p.push(g)}return p}N.exports=function(u,p){var c,b,g,d,m,x,y,k,f,S,M,E=i.getFromId(u,p.xaxis||"x"),O=i.getFromId(u,p.yaxis||"y"),P=T.traceIs(p,"contour"),I=T.traceIs(p,"histogram"),z=T.traceIs(p,"gl2d"),U=P?"best":p.zsmooth;if(E._minDtick=0,O._minDtick=0,I)d=(M=v(u,p)).orig_x,c=M.x,b=M.x0,g=M.dx,k=M.orig_y,m=M.y,x=M.y0,y=M.dy,f=M.z;else{var R=p.z;w.isArray1D(R)?(s(p,E,O,"x","y",["z"]),c=p._x,m=p._y,R=p._z):(d=p.x?E.makeCalcdata(p,"x"):[],k=p.y?O.makeCalcdata(p,"y"):[],c=_(p,E,"x",d).vals,m=_(p,O,"y",k).vals,p._x=c,p._y=m),b=p.x0,g=p.dx,x=p.y0,y=p.dy,f=t(R,p,E,O)}function j(K){U=p._input.zsmooth=p.zsmooth=!1,w.warn('cannot use zsmooth: "fast": '+K)}function Z(K){if(K.length>1){var ee=(K[K.length-1]-K[0])/(K.length-1),ie=Math.abs(ee/100);for(S=0;S<K.length-1;S++)if(Math.abs(K[S+1]-K[S]-ee)>ie)return!1}return!0}(E.rangebreaks||O.rangebreaks)&&(f=function(K,ee,ie){for(var ae=[],oe=-1,fe=0;fe<ie.length;fe++)if(ee[fe]!==l){ae[++oe]=[];for(var ge=0;ge<ie[fe].length;ge++)K[ge]!==l&&ae[oe].push(ie[fe][ge])}return ae}(c,m,f),I||(c=o(c),m=o(m),p._x=c,p._y=m)),I||!P&&!p.connectgaps||(p._emptypoints=n(f),a(f,p._emptypoints)),p._islinear=!1,E.type==="log"||O.type==="log"?U==="fast"&&j("log axis found"):Z(c)?Z(m)?p._islinear=!0:U==="fast"&&j("y scale is not linear"):U==="fast"&&j("x scale is not linear");var F=w.maxRowLength(f),V=p.xtype==="scaled"?"":c,H=r(p,V,b,g,F,E),te=p.ytype==="scaled"?"":m,$=r(p,te,x,y,f.length,O);z||(p._extremes[E._id]=i.findExtremes(E,H),p._extremes[O._id]=i.findExtremes(O,$));var J={x:H,y:$,z:f,text:p._text||p.text,hovertext:p._hovertext||p.hovertext};if(p.xperiodalignment&&d&&(J.orig_x=d),p.yperiodalignment&&k&&(J.orig_y=k),V&&V.length===H.length-1&&(J.xCenter=V),te&&te.length===$.length-1&&(J.yCenter=te),I&&(J.xRanges=M.xRanges,J.yRanges=M.yRanges,J.pts=M.pts),P||h(u,p,{vals:f,cLetter:"z"}),P&&p.contours&&p.contours.coloring==="heatmap"){var X={type:p.type==="contour"?"heatmap":"histogram2d",xcalendar:p.xcalendar,ycalendar:p.ycalendar};J.xfill=r(X,V,b,g,F,E),J.yfill=r(X,te,x,y,f.length,O)}return[J]}},4742:function(N,L,e){var T=e(92770),w=e(71828),i=e(50606).BADNUM;N.exports=function(_,v,h,s){var t,a,n,r,l,o;function u(m){if(T(m))return+m}if(v&&v.transpose){for(t=0,l=0;l<_.length;l++)t=Math.max(t,_[l].length);if(t===0)return!1;n=function(m){return m.length},r=function(m,x,y){return(m[y]||[])[x]}}else t=_.length,n=function(m,x){return m[x].length},r=function(m,x,y){return(m[x]||[])[y]};var p=function(m,x,y){return x===i||y===i?i:r(m,x,y)};function c(m){if(v&&v.type!=="carpet"&&v.type!=="contourcarpet"&&m&&m.type==="category"&&v["_"+m._id.charAt(0)].length){var x=m._id.charAt(0),y={},k=v["_"+x+"CategoryMap"]||v[x];for(l=0;l<k.length;l++)y[k[l]]=l;return function(f){var S=y[m._categories[f]];return S+1?S:i}}return w.identity}var b=c(h),g=c(s);s&&s.type==="category"&&(t=s._categories.length);var d=new Array(t);for(l=0;l<t;l++)for(a=h&&h.type==="category"?h._categories.length:n(_,l),d[l]=new Array(a),o=0;o<a;o++)d[l][o]=u(p(_,g(l),b(o)));return d}},61243:function(N){N.exports={min:"zmin",max:"zmax"}},68296:function(N,L,e){var T=e(71828),w=e(50606).BADNUM,i=e(42973);N.exports=function(_,v,h,s,t,a){var n=_._length,r=v.makeCalcdata(_,s),l=h.makeCalcdata(_,t);r=i(_,v,s,r).vals,l=i(_,h,t,l).vals;var o,u,p,c,b=_.text,g=b!==void 0&&T.isArray1D(b),d=_.hovertext,m=d!==void 0&&T.isArray1D(d),x=T.distinctVals(r),y=x.vals,k=T.distinctVals(l),f=k.vals,S=[],M=f.length,E=y.length;for(o=0;o<a.length;o++)S[o]=T.init2dArray(M,E);g&&(p=T.init2dArray(M,E)),m&&(c=T.init2dArray(M,E));var O=T.init2dArray(M,E);for(o=0;o<n;o++)if(r[o]!==w&&l[o]!==w){var P=T.findBin(r[o]+x.minDiff/2,y),I=T.findBin(l[o]+k.minDiff/2,f);for(u=0;u<a.length;u++){var z=_[a[u]];S[u][I][P]=z[o],O[I][P]=o}g&&(p[I][P]=b[o]),m&&(c[I][P]=d[o])}for(_["_"+s]=y,_["_"+t]=f,u=0;u<a.length;u++)_["_"+a[u]]=S[u];g&&(_._text=p),m&&(_._hovertext=c),v&&v.type==="category"&&(_["_"+s+"CategoryMap"]=y.map(function(U){return v._categories[U]})),h&&h.type==="category"&&(_["_"+t+"CategoryMap"]=f.map(function(U){return h._categories[U]})),_._after2before=O}},76382:function(N,L,e){var T=e(71828),w=e(67684),i=e(58623),_=e(73927),v=e(49901),h=e(1586),s=e(21606);N.exports=function(t,a,n,r){function l(o,u){return T.coerce(t,a,s,o,u)}w(t,a,l,r)?(_(t,a,r,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hovertemplate"),i(l,r),v(t,a,l,r),l("hoverongaps"),l("connectgaps",T.isArray1D(a.z)&&a.zsmooth!==!1),h(t,a,r,l,{prefix:"",cLetter:"z"})):a.visible=!1}},43907:function(N,L,e){var T=e(71828).maxRowLength;N.exports=function(w){var i,_,v,h,s,t,a,n,r=[],l={},o=[],u=w[0],p=[],c=[0,0,0],b=T(w);for(_=0;_<w.length;_++)for(i=p,p=u,u=w[_+1]||[],v=0;v<b;v++)p[v]===void 0&&((t=(p[v-1]!==void 0?1:0)+(p[v+1]!==void 0?1:0)+(i[v]!==void 0?1:0)+(u[v]!==void 0?1:0))?(_===0&&t++,v===0&&t++,_===w.length-1&&t++,v===p.length-1&&t++,t<4&&(l[[_,v]]=[_,v,t]),r.push([_,v,t])):o.push([_,v]));for(;o.length;){for(a={},n=!1,s=o.length-1;s>=0;s--)(t=((l[[(_=(h=o[s])[0])-1,v=h[1]]]||c)[2]+(l[[_+1,v]]||c)[2]+(l[[_,v-1]]||c)[2]+(l[[_,v+1]]||c)[2])/20)&&(a[h]=[_,v,t],o.splice(s,1),n=!0);if(!n)throw"findEmpties iterated with no new neighbors";for(h in a)l[h]=a[h],r.push(a[h])}return r.sort(function(g,d){return d[2]-g[2]})}},46248:function(N,L,e){var T=e(30211),w=e(71828),i=w.isArrayOrTypedArray,_=e(89298),v=e(21081).extractOpts;N.exports=function(h,s,t,a,n){n||(n={});var r,l,o,u,p=n.isContour,c=h.cd[0],b=c.trace,g=h.xa,d=h.ya,m=c.x,x=c.y,y=c.z,k=c.xCenter,f=c.yCenter,S=c.zmask,M=b.zhoverformat,E=m,O=x;if(h.index!==!1){try{o=Math.round(h.index[1]),u=Math.round(h.index[0])}catch{return void w.error("Error hovering on heatmap, pointNumber must be [row,col], found:",h.index)}if(o<0||o>=y[0].length||u<0||u>y.length)return}else{if(T.inbox(s-m[0],s-m[m.length-1],0)>0||T.inbox(t-x[0],t-x[x.length-1],0)>0)return;if(p){var P;for(E=[2*m[0]-m[1]],P=1;P<m.length;P++)E.push((m[P]+m[P-1])/2);for(E.push([2*m[m.length-1]-m[m.length-2]]),O=[2*x[0]-x[1]],P=1;P<x.length;P++)O.push((x[P]+x[P-1])/2);O.push([2*x[x.length-1]-x[x.length-2]])}o=Math.max(0,Math.min(E.length-2,w.findBin(s,E))),u=Math.max(0,Math.min(O.length-2,w.findBin(t,O)))}var I,z,U=g.c2p(m[o]),R=g.c2p(m[o+1]),j=d.c2p(x[u]),Z=d.c2p(x[u+1]);p?(I=c.orig_x||m,z=c.orig_y||x,R=U,r=I[o],Z=j,l=z[u]):(I=c.orig_x||k||m,z=c.orig_y||f||x,r=k?I[o]:(I[o]+I[o+1])/2,l=f?z[u]:(z[u]+z[u+1])/2,g&&g.type==="category"&&(r=m[o]),d&&d.type==="category"&&(l=x[u]),b.zsmooth&&(U=R=g.c2p(r),j=Z=d.c2p(l)));var F=y[u][o];if(S&&!S[u][o]&&(F=void 0),F!==void 0||b.hoverongaps){var V;i(c.hovertext)&&i(c.hovertext[u])?V=c.hovertext[u][o]:i(c.text)&&i(c.text[u])&&(V=c.text[u][o]);var H=v(b),te={type:"linear",range:[H.min,H.max],hoverformat:M,_separators:g._separators,_numFormat:g._numFormat},$=_.tickText(te,F,"hover").text;return[w.extendFlat(h,{index:b._after2before?b._after2before[u][o]:[u,o],distance:h.maxHoverDistance,spikeDistance:h.maxSpikeDistance,x0:U,x1:R,y0:j,y1:Z,xLabelVal:r,yLabelVal:l,zLabelVal:F,zLabel:$,text:V})]}}},92165:function(N,L,e){N.exports={attributes:e(21606),supplyDefaults:e(76382),calc:e(90757),plot:e(50347),colorbar:e(61243),style:e(70035),hoverPoints:e(46248),moduleType:"trace",name:"heatmap",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(N,L,e){var T=e(71828),w=[[-1,0],[1,0],[0,-1],[0,1]];function i(v){return .5-.25*Math.min(1,.5*v)}function _(v,h,s){var t,a,n,r,l,o,u,p,c,b,g,d,m,x=0;for(r=0;r<h.length;r++){for(a=(t=h[r])[0],n=t[1],g=v[a][n],b=0,c=0,l=0;l<4;l++)(u=v[a+(o=w[l])[0]])&&(p=u[n+o[1]])!==void 0&&(b===0?d=m=p:(d=Math.min(d,p),m=Math.max(m,p)),c++,b+=p);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";v[a][n]=b/c,g===void 0?c<4&&(x=1):(v[a][n]=(1+s)*v[a][n]-s*g,m>d&&(x=Math.max(x,Math.abs(v[a][n]-g)/(m-d))))}return x}N.exports=function(v,h){var s,t=1;for(_(v,h),s=0;s<h.length&&!(h[s][2]<4);s++);for(h=h.slice(s),s=0;s<100&&t>.01;s++)t=_(v,h,i(t));return t>.01&&T.log("interp2d didn't converge quickly",t),v}},58623:function(N,L,e){var T=e(71828);N.exports=function(w,i){w("texttemplate");var _=T.extendFlat({},i.font,{color:"auto",size:"auto"});T.coerceFont(w,"textfont",_)}},70769:function(N,L,e){var T=e(73972),w=e(71828).isArrayOrTypedArray;N.exports=function(i,_,v,h,s,t){var a,n,r,l=[],o=T.traceIs(i,"contour"),u=T.traceIs(i,"histogram"),p=T.traceIs(i,"gl2d");if(w(_)&&_.length>1&&!u&&t.type!=="category"){var c=_.length;if(!(c<=s))return o?_.slice(0,s):_.slice(0,s+1);if(o||p)l=Array.from(_).slice(0,s);else if(s===1)l=[_[0]-.5,_[0]+.5];else{for(l=[1.5*_[0]-.5*_[1]],r=1;r<c;r++)l.push(.5*(_[r-1]+_[r]));l.push(1.5*_[c-1]-.5*_[c-2])}if(c<s){var b=l[l.length-1],g=b-l[l.length-2];for(r=c;r<s;r++)b+=g,l.push(b)}}else{var d=i[t._id.charAt(0)+"calendar"];for(a=u?t.r2c(v,0,d):w(_)&&_.length===1?_[0]:v===void 0?0:(t.type==="log"?t.d2c:t.r2c)(v,0,d),n=h||1,r=o||p?0:-.5;r<s;r++)l.push(a+n*r)}return l}},50347:function(N,L,e){var T=e(39898),w=e(84267),i=e(73972),_=e(91424),v=e(89298),h=e(71828),s=e(63893),t=e(8225),a=e(7901),n=e(21081).extractOpts,r=e(21081).makeColorScaleFuncFromTrace,l=e(77922),o=e(18783).LINE_SPACING,u=e(3883),p=e(32396).STYLE,c="heatmap-label";function b(y){return y.selectAll("g."+c)}function g(y){b(y).remove()}function d(y,k){var f=k.length-2,S=h.constrain(h.findBin(y,k),0,f),M=k[S],E=k[S+1],O=h.constrain(S+(y-M)/(E-M)-.5,0,f),P=Math.round(O),I=Math.abs(O-P);return O&&O!==f&&I?{bin0:P,frac:I,bin1:Math.round(P+I/(O-P))}:{bin0:P,bin1:P,frac:0}}function m(y,k){var f=k.length-1,S=h.constrain(h.findBin(y,k),0,f),M=k[S],E=(y-M)/(k[S+1]-M)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function x(y,k,f){y[k]=f[0],y[k+1]=f[1],y[k+2]=f[2],y[k+3]=Math.round(255*f[3])}N.exports=function(y,k,f,S){var M=k.xaxis,E=k.yaxis;h.makeTraceGroups(S,f,"hm").each(function(O){var P,I,z,U,R,j,Z,F,V=T.select(this),H=O[0],te=H.trace,$=te.xgap||0,J=te.ygap||0,X=H.z,K=H.x,ee=H.y,ie=H.xCenter,ae=H.yCenter,oe=i.traceIs(te,"contour"),fe=oe?"best":te.zsmooth,ge=X.length,ve=h.maxRowLength(X),xe=!1,_e=!1;for(j=0;P===void 0&&j<K.length-1;)P=M.c2p(K[j]),j++;for(j=K.length-1;I===void 0&&j>0;)I=M.c2p(K[j]),j--;for(I<P&&(z=I,I=P,P=z,xe=!0),j=0;U===void 0&&j<ee.length-1;)U=E.c2p(ee[j]),j++;for(j=ee.length-1;R===void 0&&j>0;)R=E.c2p(ee[j]),j--;R<U&&(z=U,U=R,R=z,_e=!0),oe&&(ie=K,ae=ee,K=H.xfill,ee=H.yfill);var ye="default";if(fe?ye=fe==="best"?"smooth":"fast":te._islinear&&$===0&&J===0&&u()&&(ye="fast"),ye!=="fast"){var Ce=fe==="best"?0:.5;P=Math.max(-Ce*M._length,P),I=Math.min((1+Ce)*M._length,I),U=Math.max(-Ce*E._length,U),R=Math.min((1+Ce)*E._length,R)}var ke,Te,le=Math.round(I-P),ue=Math.round(R-U);if(P>=M._length||I<=0||U>=E._length||R<=0)return V.selectAll("image").data([]).exit().remove(),void g(V);ye==="fast"?(ke=ve,Te=ge):(ke=le,Te=ue);var de=document.createElement("canvas");de.width=ke,de.height=Te;var Le,we,Ee=de.getContext("2d",{willReadFrequently:!0}),Oe=r(te,{noNumericCheck:!0,returnArray:!0});ye==="fast"?(Le=xe?function(qt){return ve-1-qt}:h.identity,we=_e?function(qt){return ge-1-qt}:h.identity):(Le=function(qt){return h.constrain(Math.round(M.c2p(K[qt])-P),0,le)},we=function(qt){return h.constrain(Math.round(E.c2p(ee[qt])-U),0,ue)});var Fe,pe,be,Me,De=we(0),Ne=[De,De],Be=xe?0:1,Ye=_e?0:1,We=0,et=0,ft=0,ht=0;function mt(qt,tn){if(qt!==void 0){var dn=Oe(qt);return dn[0]=Math.round(dn[0]),dn[1]=Math.round(dn[1]),dn[2]=Math.round(dn[2]),We+=tn,et+=dn[0]*tn,ft+=dn[1]*tn,ht+=dn[2]*tn,dn}return[0,0,0,0]}function Mt(qt,tn,dn,vn){var On=qt[dn.bin0];if(On===void 0)return mt(void 0,1);var Hn,Bn=qt[dn.bin1],Vn=tn[dn.bin0],nr=tn[dn.bin1],Qt=Bn-On||0,bn=Vn-On||0;return Hn=Bn===void 0?nr===void 0?0:Vn===void 0?2*(nr-On):2*(2*nr-Vn-On)/3:nr===void 0?Vn===void 0?0:2*(2*On-Bn-Vn)/3:Vn===void 0?2*(2*nr-Bn-On)/3:nr+On-Bn-Vn,mt(On+dn.frac*Qt+vn.frac*(bn+dn.frac*Hn))}if(ye!=="default"){var _t,it=0;try{_t=new Uint8Array(ke*Te*4)}catch{_t=new Array(ke*Te*4)}if(ye==="smooth"){var st,St,zt,Ft=ie||K,Pt=ae||ee,Xe=new Array(Ft.length),Ke=new Array(Pt.length),He=new Array(le),Je=ie?m:d,lt=ae?m:d;for(j=0;j<Ft.length;j++)Xe[j]=Math.round(M.c2p(Ft[j])-P);for(j=0;j<Pt.length;j++)Ke[j]=Math.round(E.c2p(Pt[j])-U);for(j=0;j<le;j++)He[j]=Je(j,Xe);for(Z=0;Z<ue;Z++)for(St=X[(st=lt(Z,Ke)).bin0],zt=X[st.bin1],j=0;j<le;j++,it+=4)x(_t,it,Me=Mt(St,zt,He[j],st))}else for(Z=0;Z<ge;Z++)for(be=X[Z],Ne=we(Z),j=0;j<ve;j++)Me=mt(be[j],1),x(_t,it=4*(Ne*ve+Le(j)),Me);var ot=Ee.createImageData(ke,Te);try{ot.data.set(_t)}catch{var je=ot.data,Ue=je.length;for(Z=0;Z<Ue;Z++)je[Z]=_t[Z]}Ee.putImageData(ot,0,0)}else{var at=Math.floor($/2),$e=Math.floor(J/2);for(Z=0;Z<ge;Z++)if(be=X[Z],Ne.reverse(),Ne[Ye]=we(Z+1),Ne[0]!==Ne[1]&&Ne[0]!==void 0&&Ne[1]!==void 0)for(Fe=[pe=Le(0),pe],j=0;j<ve;j++)Fe.reverse(),Fe[Be]=Le(j+1),Fe[0]!==Fe[1]&&Fe[0]!==void 0&&Fe[1]!==void 0&&(Me=mt(be[j],(Fe[1]-Fe[0])*(Ne[1]-Ne[0])),Ee.fillStyle="rgba("+Me.join(",")+")",Ee.fillRect(Fe[0]+at,Ne[0]+$e,Fe[1]-Fe[0]-$,Ne[1]-Ne[0]-J))}et=Math.round(et/We),ft=Math.round(ft/We),ht=Math.round(ht/We);var gt=w("rgb("+et+","+ft+","+ht+")");y._hmpixcount=(y._hmpixcount||0)+We,y._hmlumcount=(y._hmlumcount||0)+We*gt.getLuminance();var yt=V.selectAll("image").data(O);yt.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),yt.attr({height:ue,width:le,x:P,y:U,"xlink:href":de.toDataURL("image/png")}),ye!=="fast"||fe||yt.attr("style",p),g(V);var xt=te.texttemplate;if(xt){var dt=n(te),Lt={type:"linear",range:[dt.min,dt.max],_separators:M._separators,_numFormat:M._numFormat},Tt=te.type==="histogram2dcontour",bt=te.type==="contour",Ct=bt?ge-1:ge,Dt=bt?1:0,Bt=bt?ve-1:ve,Xt=[];for(j=bt?1:0;j<Ct;j++){var an;if(bt)an=H.y[j];else if(Tt){if(j===0||j===ge-1)continue;an=H.y[j]}else if(H.yCenter)an=H.yCenter[j];else{if(j+1===ge&&H.y[j+1]===void 0)continue;an=(H.y[j]+H.y[j+1])/2}var Wt=Math.round(E.c2p(an));if(!(0>Wt||Wt>E._length))for(Z=Dt;Z<Bt;Z++){var Vt;if(bt)Vt=H.x[Z];else if(Tt){if(Z===0||Z===ve-1)continue;Vt=H.x[Z]}else if(H.xCenter)Vt=H.xCenter[Z];else{if(Z+1===ve&&H.x[Z+1]===void 0)continue;Vt=(H.x[Z]+H.x[Z+1])/2}var on=Math.round(M.c2p(Vt));if(!(0>on||on>M._length)){var Sn=t({x:Vt,y:an},te,y._fullLayout);Sn.x=Vt,Sn.y=an;var Ln=H.z[j][Z];Ln===void 0?(Sn.z="",Sn.zLabel=""):(Sn.z=Ln,Sn.zLabel=v.tickText(Lt,Ln,"hover").text);var fn=H.text&&H.text[j]&&H.text[j][Z];fn!==void 0&&fn!==!1||(fn=""),Sn.text=fn;var Zt=h.texttemplateString(xt,Sn,y._fullLayout._d3locale,Sn,te._meta||{});if(Zt){var ln=Zt.split("<br>"),nn=ln.length,cn=0;for(F=0;F<nn;F++)cn=Math.max(cn,ln[F].length);Xt.push({l:nn,c:cn,t:Zt,x:on,y:Wt,z:Ln})}}}}var kn=te.textfont,An=kn.family,wn=kn.size,Cn=y._fullLayout.font.size;if(!wn||wn==="auto"){var _n=1/0,zn=1/0,qn=0,sr=0;for(F=0;F<Xt.length;F++){var pr=Xt[F];if(qn=Math.max(qn,pr.l),sr=Math.max(sr,pr.c),F<Xt.length-1){var ir=Xt[F+1],Jn=Math.abs(ir.x-pr.x),mr=Math.abs(ir.y-pr.y);Jn&&(_n=Math.min(_n,Jn)),mr&&(zn=Math.min(zn,mr))}}isFinite(_n)&&isFinite(zn)?(_n-=$,zn-=J,_n/=sr,zn/=qn,_n/=o/2,zn/=o,wn=Math.min(Math.floor(_n),Math.floor(zn),Cn)):wn=Cn}if(wn<=0||!isFinite(wn))return;b(V).data(Xt).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(qt){var tn=T.select(this),dn=kn.color;dn&&dn!=="auto"||(dn=a.contrast("rgba("+Oe(qt.z).join()+")")),tn.attr("data-notex",1).call(s.positionText,function(vn){return vn.x}(qt),function(vn){return vn.y-wn*(vn.l*o/2-1)}(qt)).call(_.font,An,wn,dn).text(qt.t).call(s.convertToTspans,y)})}})}},70035:function(N,L,e){var T=e(39898);N.exports=function(w){T.select(w).selectAll(".hm image").style("opacity",function(i){return i.trace.opacity})}},49901:function(N){N.exports=function(L,e,T){T("zsmooth")===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},67684:function(N,L,e){var T=e(92770),w=e(71828),i=e(73972);function _(v,h){var s=h(v);return(s?h(v+"type","array"):"scaled")==="scaled"&&(h(v+"0"),h("d"+v)),s}N.exports=function(v,h,s,t,a,n){var r,l,o=s("z");if(a=a||"x",n=n||"y",o===void 0||!o.length)return 0;if(w.isArray1D(o)){r=s(a),l=s(n);var u=w.minRowLength(r),p=w.minRowLength(l);if(u===0||p===0)return 0;h._length=Math.min(u,p,o.length)}else{if(r=_(a,s),l=_(n,s),!function(c){for(var b,g=!0,d=!1,m=!1,x=0;x<c.length;x++){if(b=c[x],!w.isArrayOrTypedArray(b)){g=!1;break}b.length>0&&(d=!0);for(var y=0;y<b.length;y++)if(T(b[y])){m=!0;break}}return g&&d&&m}(o))return 0;s("transpose"),h._length=null}return v.type==="heatmapgl"||i.getComponentMethod("calendars","handleTraceDefaults")(v,h,[a,n],t),!0}},16063:function(N,L,e){for(var T=e(21606),w=e(50693),i=e(1426).extendFlat,_=e(30962).overrideAll,v=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],h={},s=0;s<v.length;s++){var t=v[s];h[t]=T[t]}h.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},i(h,w("",{cLetter:"z",autoColorDflt:!1})),N.exports=_(h,"calc","nested")},59560:function(N,L,e){var T=e(9330).gl_heatmap2d,w=e(89298),i=e(78614);function _(h,s){this.scene=h,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=T(h.glplot,this.options),this.heatmap._trace=this}var v=_.prototype;v.handlePick=function(h){var s=this.options,t=s.shape,a=h.pointId,n=a%t[0],r=Math.floor(a/t[0]),l=a;return{trace:this,dataCoord:h.dataCoord,traceCoord:[s.x[n],s.y[r],s.z[l]],textLabel:this.textLabels[a],name:this.name,pointIndex:[r,n],hoverinfo:this.hoverinfo}},v.update=function(h,s){var t=s[0];this.index=h.index,this.name=h.name,this.hoverinfo=h.hoverinfo;var a=t.z;this.options.z=[].concat.apply([],a);var n=a[0].length,r=a.length;this.options.shape=[n,r],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=h.zsmooth;var l=function(b){for(var g=b.colorscale,d=b.zmin,m=b.zmax,x=g.length,y=new Array(x),k=new Array(4*x),f=0;f<x;f++){var S=g[f],M=i(S[1]);y[f]=d+S[0]*(m-d);for(var E=0;E<4;E++)k[4*f+E]=M[E]}return{colorLevels:y,colorValues:k}}(h);this.options.colorLevels=l.colorLevels,this.options.colorValues=l.colorValues,this.textLabels=[].concat.apply([],h.text),this.heatmap.update(this.options);var o,u,p=this.scene.xaxis,c=this.scene.yaxis;h.zsmooth===!1&&(o={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),h._extremes[p._id]=w.findExtremes(p,t.x,o),h._extremes[c._id]=w.findExtremes(c,t.y,u)},v.dispose=function(){this.heatmap.dispose()},N.exports=function(h,s,t){var a=new _(h,s.uid);return a.update(s,t),a}},19600:function(N,L,e){var T=e(71828),w=e(67684),i=e(1586),_=e(16063);N.exports=function(v,h,s,t){function a(n,r){return T.coerce(v,h,_,n,r)}w(v,h,a,t)?(a("text"),a("zsmooth"),i(v,h,t,a,{prefix:"",cLetter:"z"})):h.visible=!1}},3325:function(N,L,e){N.exports={attributes:e(16063),supplyDefaults:e(19600),colorbar:e(61243),calc:e(90757),plot:e(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:e(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(N,L,e){var T=e(1486),w=e(12663).axisHoverFormat,i=e(5386).fF,_=e(5386).si,v=e(41940),h=e(17656),s=e(72406),t=e(1426).extendFlat;N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:w("x"),yhoverformat:w("y"),text:t({},T.text,{}),hovertext:t({},T.hovertext,{}),orientation:T.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:h("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:h("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:s.eventDataKeys}),texttemplate:_({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},T.textposition,{arrayOk:!1}),textfont:v({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:v({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:v({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:T.insidetextanchor,textangle:T.textangle,cliponaxis:T.cliponaxis,constraintext:T.constraintext,marker:T.marker,offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,_deprecated:{bardir:T._deprecated.bardir}}},42174:function(N){N.exports=function(L,e){for(var T=L.length,w=0,i=0;i<T;i++)e[i]?(L[i]/=e[i],w+=L[i]):L[i]=null;return w}},17656:function(N){N.exports=function(L,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(N,L,e){var T=e(92770);N.exports={count:function(w,i,_){return _[w]++,1},sum:function(w,i,_,v){var h=v[i];return T(h)?(h=Number(h),_[w]+=h,h):0},avg:function(w,i,_,v,h){var s=v[i];return T(s)&&(s=Number(s),_[w]+=s,h[w]++),0},min:function(w,i,_,v){var h=v[i];if(T(h)){if(h=Number(h),!T(_[w]))return _[w]=h,h;if(_[w]>h){var s=h-_[w];return _[w]=h,s}}return 0},max:function(w,i,_,v){var h=v[i];if(T(h)){if(h=Number(h),!T(_[w]))return _[w]=h,h;if(_[w]<h){var s=h-_[w];return _[w]=h,s}}return 0}}},40965:function(N,L,e){var T=e(50606),w=T.ONEAVGYEAR,i=T.ONEAVGMONTH,_=T.ONEDAY,v=T.ONEHOUR,h=T.ONEMIN,s=T.ONESEC,t=e(89298).tickIncrement;function a(o,u,p,c){if(o*u<=0)return 1/0;for(var b=Math.abs(u-o),g=p.type==="date",d=n(b,g),m=0;m<10;m++){var x=n(80*d,g);if(d===x||!r(x,o,u,g,p,c))break;d=x}return d}function n(o,u){return u&&o>s?o>_?o>1.1*w?w:o>1.1*i?i:_:o>v?v:o>h?h:s:Math.pow(10,Math.floor(Math.log(o)/Math.LN10))}function r(o,u,p,c,b,g){if(c&&o>_){var d=l(u,b,g),m=l(p,b,g),x=o===w?0:1;return d[x]!==m[x]}return Math.floor(p/o)-Math.floor(u/o)>.1}function l(o,u,p){var c=u.c2d(o,w,p).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}N.exports=function(o,u,p,c,b){var g,d,m=-1.1*u,x=-.1*u,y=o-x,k=p[0],f=p[1],S=Math.min(a(k+x,k+y,c,b),a(f+x,f+y,c,b)),M=Math.min(a(k+m,k+x,c,b),a(f+m,f+x,c,b));if(S>M&&M<Math.abs(f-k)/4e3?(g=S,d=!1):(g=Math.min(S,M),d=!0),c.type==="date"&&g>_){var E=g===w?1:6,O=g===w?"M12":"M1";return function(P,I){var z=c.c2d(P,w,b),U=z.indexOf("-",E);U>0&&(z=z.substr(0,U));var R=c.d2c(z,0,b);if(R<P){var j=t(R,O,!1,b);(R+j)/2<P+o&&(R=j)}return I&&d?t(R,O,!0,b):R}}return function(P,I){var z=g*Math.round(P/g);return z+g/10<P&&z+.9*g<P+o&&(z+=g),I&&d&&(z-=g),z}}},72138:function(N,L,e){var T=e(92770),w=e(71828),i=e(73972),_=e(89298),v=e(75341),h=e(59575),s=e(36362),t=e(42174),a=e(40965);function n(r,l,o,u,p){var c,b,g,d,m,x,y,k=u+"bins",f=r._fullLayout,S=l["_"+u+"bingroup"],M=f._histogramBinOpts[S],E=f.barmode==="overlay",O=function(_e){return o.r2c(_e,0,d)},P=function(_e){return o.c2r(_e,0,d)},I=o.type==="date"?function(_e){return _e||_e===0?w.cleanDate(_e,null,d):null}:function(_e){return T(_e)?Number(_e):null};function z(_e,ye,Ce){ye[_e+"Found"]?(ye[_e]=I(ye[_e]),ye[_e]===null&&(ye[_e]=Ce[_e])):(x[_e]=ye[_e]=Ce[_e],w.nestedProperty(b[0],k+"."+_e).set(Ce[_e]))}if(l["_"+u+"autoBinFinished"])delete l["_"+u+"autoBinFinished"];else{b=M.traces;var U=[],R=!0,j=!1,Z=!1;for(c=0;c<b.length;c++)if((g=b[c]).visible){var F=M.dirs[c];m=g["_"+F+"pos0"]=o.makeCalcdata(g,F),U=w.concat(U,m),delete g["_"+u+"autoBinFinished"],l.visible===!0&&(R?R=!1:(delete g._autoBin,g["_"+u+"autoBinFinished"]=1),i.traceIs(g,"2dMap")&&(j=!0),g.type==="histogram2dcontour"&&(Z=!0))}d=b[0][u+"calendar"];var V=_.autoBin(U,o,M.nbins,j,d,M.sizeFound&&M.size),H=b[0]._autoBin={};if(x=H[M.dirs[0]]={},Z&&(M.size||(V.start=P(_.tickIncrement(O(V.start),V.size,!0,d))),M.end===void 0&&(V.end=P(_.tickIncrement(O(V.end),V.size,!1,d)))),E&&!i.traceIs(l,"2dMap")&&V._dataSpan===0&&o.type!=="category"&&o.type!=="multicategory"&&l.bingroup===""&&l.xbins===void 0){if(p)return[V,m,!0];V=function(_e,ye,Ce,ke,Te){var le,ue,de,Le=_e._fullLayout,we=function(et,ft){for(var ht=ft.xaxis,mt=ft.yaxis,Mt=ft.orientation,_t=[],it=et._fullData,st=0;st<it.length;st++){var St=it[st];St.type==="histogram"&&St.visible===!0&&St.orientation===Mt&&St.xaxis===ht&&St.yaxis===mt&&_t.push(St)}return _t}(_e,ye),Ee=!1,Oe=1/0,Fe=[ye];for(le=0;le<we.length;le++)if((ue=we[le])===ye)Ee=!0;else if(Ee){var pe=n(_e,ue,Ce,ke,!0),be=pe[0],Me=pe[2];ue["_"+ke+"autoBinFinished"]=1,ue["_"+ke+"pos0"]=pe[1],Me?Fe.push(ue):Oe=Math.min(Oe,be.size)}else de=Le._histogramBinOpts[ue["_"+ke+"bingroup"]],Oe=Math.min(Oe,de.size||ue[Te].size);var De=new Array(Fe.length);for(le=0;le<Fe.length;le++)for(var Ne=Fe[le]["_"+ke+"pos0"],Be=0;Be<Ne.length;Be++)if(Ne[Be]!==void 0){De[le]=Ne[Be];break}for(isFinite(Oe)||(Oe=w.distinctVals(De).minDiff),le=0;le<Fe.length;le++){var Ye=(ue=Fe[le])[ke+"calendar"],We={start:Ce.c2r(De[le]-Oe/2,0,Ye),end:Ce.c2r(De[le]+Oe/2,0,Ye),size:Oe};ue._input[Te]=ue[Te]=We,(de=Le._histogramBinOpts[ue["_"+ke+"bingroup"]])&&w.extendFlat(de,We)}return ye[Te]}(r,l,o,u,k)}(y=g.cumulative||{}).enabled&&y.currentbin!=="include"&&(y.direction==="decreasing"?V.start=P(_.tickIncrement(O(V.start),V.size,!0,d)):V.end=P(_.tickIncrement(O(V.end),V.size,!1,d))),M.size=V.size,M.sizeFound||(x.size=V.size,w.nestedProperty(b[0],k+".size").set(V.size)),z("start",M,V),z("end",M,V)}m=l["_"+u+"pos0"],delete l["_"+u+"pos0"];var te=l._input[k]||{},$=w.extendFlat({},M),J=M.start,X=o.r2l(te.start),K=X!==void 0;if((M.startFound||K)&&X!==o.r2l(J)){var ee=K?X:w.aggNums(Math.min,null,m),ie={type:o.type==="category"||o.type==="multicategory"?"linear":o.type,r2l:o.r2l,dtick:M.size,tick0:J,calendar:d,range:[ee,_.tickIncrement(ee,M.size,!1,d)].map(o.l2r)},ae=_.tickFirst(ie);ae>o.r2l(ee)&&(ae=_.tickIncrement(ae,M.size,!0,d)),$.start=o.l2r(ae),K||w.nestedProperty(l,k+".start").set($.start)}var oe=M.end,fe=o.r2l(te.end),ge=fe!==void 0;if((M.endFound||ge)&&fe!==o.r2l(oe)){var ve=ge?fe:w.aggNums(Math.max,null,m);$.end=o.l2r(ve),ge||w.nestedProperty(l,k+".start").set($.end)}var xe="autobin"+u;return l._input[xe]===!1&&(l._input[k]=w.extendFlat({},l[k]||{}),delete l._input[xe],delete l[xe]),[$,m]}N.exports={calc:function(r,l){var o,u,p,c,b=[],g=[],d=l.orientation==="h",m=_.getFromId(r,d?l.yaxis:l.xaxis),x=d?"y":"x",y={x:"y",y:"x"}[x],k=l[x+"calendar"],f=l.cumulative,S=n(r,l,m,x),M=S[0],E=S[1],O=typeof M.size=="string",P=[],I=O?P:M,z=[],U=[],R=[],j=0,Z=l.histnorm,F=l.histfunc,V=Z.indexOf("density")!==-1;f.enabled&&V&&(Z=Z.replace(/ ?density$/,""),V=!1);var H,te=F==="max"||F==="min"?null:0,$=h.count,J=s[Z],X=!1,K=function(ue){return m.r2c(ue,0,k)};for(w.isArrayOrTypedArray(l[y])&&F!=="count"&&(H=l[y],X=F==="avg",$=h[F]),o=K(M.start),p=K(M.end)+(o-_.tickIncrement(o,M.size,!1,k))/1e6;o<p&&b.length<1e6&&(u=_.tickIncrement(o,M.size,!1,k),b.push((o+u)/2),g.push(te),R.push([]),P.push(o),V&&z.push(1/(u-o)),X&&U.push(0),!(u<=o));)o=u;P.push(o),O||m.type!=="date"||(I={start:K(I.start),end:K(I.end),size:I.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var ee=l["_"+x+"bingroup"],ie={leftGap:1/0,rightGap:1/0};ee&&(r._fullLayout._roundFnOpts[ee]||(r._fullLayout._roundFnOpts[ee]=ie),ie=r._fullLayout._roundFnOpts[ee]);var ae,oe=g.length,fe=!0,ge=ie.leftGap,ve=ie.rightGap,xe={};for(o=0;o<E.length;o++){var _e=E[o];(c=w.findBin(_e,I))>=0&&c<oe&&(j+=$(c,o,g,H,U),fe&&R[c].length&&_e!==E[R[c][0]]&&(fe=!1),R[c].push(o),xe[o]=c,ge=Math.min(ge,_e-P[c]),ve=Math.min(ve,P[c+1]-_e))}ie.leftGap=ge,ie.rightGap=ve,fe||(ae=function(ue,de){return function(){var Le=r._fullLayout._roundFnOpts[ee];return a(Le.leftGap,Le.rightGap,P,m,k)(ue,de)}}),X&&(j=t(g,U)),J&&J(g,j,z),f.enabled&&function(ue,de,Le){var we,Ee,Oe;function Fe(be){Oe=ue[be],ue[be]/=2}function pe(be){Ee=ue[be],ue[be]=Oe+Ee/2,Oe+=Ee}if(Le==="half")if(de==="increasing")for(Fe(0),we=1;we<ue.length;we++)pe(we);else for(Fe(ue.length-1),we=ue.length-2;we>=0;we--)pe(we);else if(de==="increasing"){for(we=1;we<ue.length;we++)ue[we]+=ue[we-1];Le==="exclude"&&(ue.unshift(0),ue.pop())}else{for(we=ue.length-2;we>=0;we--)ue[we]+=ue[we+1];Le==="exclude"&&(ue.push(0),ue.shift())}}(g,f.direction,f.currentbin);var ye=Math.min(b.length,g.length),Ce=[],ke=0,Te=ye-1;for(o=0;o<ye;o++)if(g[o]){ke=o;break}for(o=ye-1;o>=ke;o--)if(g[o]){Te=o;break}for(o=ke;o<=Te;o++)if(T(b[o])&&T(g[o])){var le={p:b[o],s:g[o],b:0};f.enabled||(le.pts=R[o],fe?le.ph0=le.ph1=R[o].length?E[R[o][0]]:b[o]:(l._computePh=!0,le.ph0=ae(P[o]),le.ph1=ae(P[o+1],!0))),Ce.push(le)}return Ce.length===1&&(Ce[0].width1=_.tickIncrement(Ce[0].p,M.size,!1,k)-Ce[0].p),v(Ce,l),w.isArrayOrTypedArray(l.selectedpoints)&&w.tagSelected(Ce,l,xe),Ce},calcAllAutoBins:n}},72406:function(N){N.exports={eventDataKeys:["binNumber"]}},82222:function(N,L,e){var T=e(71828),w=e(41675),i=e(73972).traceIs,_=e(26125),v=T.nestedProperty,h=e(99082).getAxisGroup,s=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];N.exports=function(a,n){var r,l,o,u,p,c,b,g=n._histogramBinOpts={},d=[],m={},x=[];function y(V,H){return T.coerce(r._input,r,r._module.attributes,V,H)}function k(V){return V.orientation==="v"?"x":"y"}function f(V,H,te){var $=V.uid+"__"+te;H||(H=$);var J=function(ie,ae){return w.getFromTrace({_fullLayout:n},ie,ae).type}(V,te),X=V[te+"calendar"]||"",K=g[H],ee=!0;K&&(J===K.axType&&X===K.calendar?(ee=!1,K.traces.push(V),K.dirs.push(te)):(H=$,J!==K.axType&&T.warn(["Attempted to group the bins of trace",V.index,"set on a","type:"+J,"axis","with bins on","type:"+K.axType,"axis."].join(" ")),X!==K.calendar&&T.warn(["Attempted to group the bins of trace",V.index,"set with a",X,"calendar","with bins",K.calendar?"on a "+K.calendar+" calendar":"w/o a set calendar"].join(" ")))),ee&&(g[H]={traces:[V],dirs:[te],axType:J,calendar:V[te+"calendar"]||""}),V["_"+te+"bingroup"]=H}for(p=0;p<a.length;p++)r=a[p],i(r,"histogram")&&(d.push(r),delete r._xautoBinFinished,delete r._yautoBinFinished,i(r,"2dMap")||_(r._input,r,n,y));var S=n._alignmentOpts||{};for(p=0;p<d.length;p++){if(r=d[p],o="",!i(r,"2dMap")){if(u=k(r),n.barmode==="group"&&r.alignmentgroup){var M=r[u+"axis"],E=h(n,M)+r.orientation;(S[E]||{})[r.alignmentgroup]&&(o=E)}o||n.barmode==="overlay"||(o=h(n,r.xaxis)+h(n,r.yaxis)+k(r))}o?(m[o]||(m[o]=[]),m[o].push(r)):x.push(r)}for(o in m)if((l=m[o]).length!==1){var O=!1;for(l.length&&(r=l[0],O=y("bingroup")),o=O||o,p=0;p<l.length;p++){var P=(r=l[p])._input.bingroup;P&&P!==o&&T.warn(["Trace",r.index,"must match","within bingroup",o+".","Ignoring its bingroup:",P,"setting."].join(" ")),r.bingroup=o,f(r,o,k(r))}}else x.push(l[0]);for(p=0;p<x.length;p++){r=x[p];var I=y("bingroup");if(i(r,"2dMap"))for(b=0;b<2;b++){var z=y((u=t[b])+"bingroup",I?I+"__"+u:null);f(r,z,u)}else f(r,I,k(r))}for(o in g){var U=g[o];for(l=U.traces,c=0;c<s.length;c++){var R,j,Z=s[c],F=Z.name;if(F!=="nbins"||!U.sizeFound){for(p=0;p<l.length;p++){if(r=l[p],u=U.dirs[p],R=Z.aStr[u],v(r._input,R).get()!==void 0){U[F]=y(R),U[F+"Found"]=!0;break}(j=(r._autoBin||{})[u]||{})[F]&&v(r,R).set(j[F])}if(F==="start"||F==="end")for(;p<l.length;p++)(r=l[p])["_"+u+"bingroup"]&&y(R,(j=(r._autoBin||{})[u]||{})[F]);F!=="nbins"||U.sizeFound||U.nbinsFound||(r=l[0],U[F]=y(R))}}}}},11385:function(N,L,e){var T=e(73972),w=e(71828),i=e(7901),_=e(90769).handleText,v=e(98340),h=e(7745);N.exports=function(s,t,a,n){function r(x,y){return w.coerce(s,t,h,x,y)}var l=r("x"),o=r("y");r("cumulative.enabled")&&(r("cumulative.direction"),r("cumulative.currentbin")),r("text");var u=r("textposition");_(s,t,n,r,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat");var p=r("orientation",o&&!l?"h":"v"),c=p==="v"?"x":"y",b=p==="v"?"y":"x",g=l&&o?Math.min(w.minRowLength(l)&&w.minRowLength(o)):w.minRowLength(t[c]||[]);if(g){t._length=g,T.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],n),t[b]&&r("histfunc"),r("histnorm"),r("autobin"+c),v(s,t,r,a,n),w.coerceSelectionMarkerOpacity(t,r);var d=(t.marker.line||{}).color,m=T.getComponentMethod("errorbars","supplyDefaults");m(s,t,d||i.defaultLine,{axis:"y"}),m(s,t,d||i.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},84402:function(N){N.exports=function(L,e,T,w,i){if(L.x="xVal"in e?e.xVal:e.x,L.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(L.z=e.zLabelVal),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),!(T.cumulative||{}).enabled){var _,v=Array.isArray(i)?w[0].pts[i[0]][i[1]]:w[i].pts;if(L.pointNumbers=v,L.binNumber=L.pointNumber,delete L.pointNumber,delete L.pointIndex,T._indexToPoints){_=[];for(var h=0;h<v.length;h++)_=_.concat(T._indexToPoints[v[h]])}else _=v;L.pointIndices=_}return L}},76440:function(N,L,e){var T=e(95423).hoverPoints,w=e(89298).hoverLabelText;N.exports=function(i,_,v,h,s){var t=T(i,_,v,h,s);if(t){var a=(i=t[0]).cd[i.index],n=i.cd[0].trace;if(!n.cumulative.enabled){var r=n.orientation==="h"?"y":"x";i[r+"Label"]=w(i[r+"a"],[a.ph0,a.ph1],n[r+"hoverformat"])}return t}}},36071:function(N,L,e){N.exports={attributes:e(7745),layoutAttributes:e(43641),supplyDefaults:e(11385),crossTraceDefaults:e(82222),supplyLayoutDefaults:e(13957),calc:e(72138).calc,crossTraceCalc:e(11661).crossTraceCalc,plot:e(17295).plot,layerName:"barlayer",style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,colorbar:e(4898),hoverPoints:e(76440),selectPoints:e(81974),eventData:e(84402),moduleType:"trace",name:"histogram",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(N){N.exports={percent:function(L,e){for(var T=L.length,w=100/e,i=0;i<T;i++)L[i]*=w},probability:function(L,e){for(var T=L.length,w=0;w<T;w++)L[w]/=e},density:function(L,e,T,w){var i=L.length;w=w||1;for(var _=0;_<i;_++)L[_]*=T[_]*w},"probability density":function(L,e,T,w){var i=L.length;w&&(e/=w);for(var _=0;_<i;_++)L[_]*=T[_]/e}}},35361:function(N,L,e){var T=e(7745),w=e(17656),i=e(21606),_=e(9012),v=e(12663).axisHoverFormat,h=e(5386).fF,s=e(5386).si,t=e(50693),a=e(1426).extendFlat;N.exports=a({x:T.x,y:T.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:w("x"),nbinsy:T.nbinsy,ybins:w("y"),autobinx:T.autobinx,autobiny:T.autobiny,bingroup:a({},T.bingroup,{}),xbingroup:a({},T.bingroup,{}),ybingroup:a({},T.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z",1),hovertemplate:h({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:i.textfont,showlegend:a({},_.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},17562:function(N,L,e){var T=e(71828),w=e(89298),i=e(59575),_=e(36362),v=e(42174),h=e(40965),s=e(72138).calcAllAutoBins;function t(r,l,o,u){var p,c=new Array(r);if(u)for(p=0;p<r;p++)c[p]=1/(l[p+1]-l[p]);else{var b=1/o;for(p=0;p<r;p++)c[p]=b}return c}function a(r,l){return{start:r(l.start),end:r(l.end),size:l.size}}function n(r,l,o,u,p,c){var b,g=r.length-1,d=new Array(g),m=h(o,u,r,p,c);for(b=0;b<g;b++){var x=(l||[])[b];d[b]=x===void 0?[m(r[b]),m(r[b+1],!0)]:[x,x]}return d}N.exports=function(r,l){var o,u,p,c,b=w.getFromId(r,l.xaxis),g=w.getFromId(r,l.yaxis),d=l.xcalendar,m=l.ycalendar,x=function(mt){return b.r2c(mt,0,d)},y=function(mt){return g.r2c(mt,0,m)},k=s(r,l,b,"x"),f=k[0],S=k[1],M=s(r,l,g,"y"),E=M[0],O=M[1],P=l._length;S.length>P&&S.splice(P,S.length-P),O.length>P&&O.splice(P,O.length-P);var I=[],z=[],U=[],R=typeof f.size=="string",j=typeof E.size=="string",Z=[],F=[],V=R?Z:f,H=j?F:E,te=0,$=[],J=[],X=l.histnorm,K=l.histfunc,ee=X.indexOf("density")!==-1,ie=K==="max"||K==="min"?null:0,ae=i.count,oe=_[X],fe=!1,ge=[],ve=[],xe="z"in l?l.z:"marker"in l&&Array.isArray(l.marker.color)?l.marker.color:"";xe&&K!=="count"&&(fe=K==="avg",ae=i[K]);var _e=f.size,ye=x(f.start),Ce=x(f.end)+(ye-w.tickIncrement(ye,_e,!1,d))/1e6;for(o=ye;o<Ce;o=w.tickIncrement(o,_e,!1,d))z.push(ie),Z.push(o),fe&&U.push(0);Z.push(o);var ke,Te=z.length,le=(o-ye)/Te,ue=(ke=ye+le/2,b.c2r(ke,0,d)),de=E.size,Le=y(E.start),we=y(E.end)+(Le-w.tickIncrement(Le,de,!1,m))/1e6;for(o=Le;o<we;o=w.tickIncrement(o,de,!1,m)){I.push(z.slice()),F.push(o);var Ee=new Array(Te);for(u=0;u<Te;u++)Ee[u]=[];J.push(Ee),fe&&$.push(U.slice())}F.push(o);var Oe=I.length,Fe=(o-Le)/Oe,pe=function(mt){return g.c2r(mt,0,m)}(Le+Fe/2);ee&&(ge=t(z.length,V,le,R),ve=t(I.length,H,Fe,j)),R||b.type!=="date"||(V=a(x,V)),j||g.type!=="date"||(H=a(y,H));var be=!0,Me=!0,De=new Array(Te),Ne=new Array(Oe),Be=1/0,Ye=1/0,We=1/0,et=1/0;for(o=0;o<P;o++){var ft=S[o],ht=O[o];p=T.findBin(ft,V),c=T.findBin(ht,H),p>=0&&p<Te&&c>=0&&c<Oe&&(te+=ae(p,o,I[c],xe,$[c]),J[c][p].push(o),be&&(De[p]===void 0?De[p]=ft:De[p]!==ft&&(be=!1)),Me&&(Ne[c]===void 0?Ne[c]=ht:Ne[c]!==ht&&(Me=!1)),Be=Math.min(Be,ft-Z[p]),Ye=Math.min(Ye,Z[p+1]-ft),We=Math.min(We,ht-F[c]),et=Math.min(et,F[c+1]-ht))}if(fe)for(c=0;c<Oe;c++)te+=v(I[c],$[c]);if(oe)for(c=0;c<Oe;c++)oe(I[c],te,ge,ve[c]);return{x:S,xRanges:n(Z,be&&De,Be,Ye,b,d),x0:ue,dx:le,y:O,yRanges:n(F,Me&&Ne,We,et,g,m),y0:pe,dy:Fe,z:I,pts:J}}},93888:function(N,L,e){var T=e(71828),w=e(75238),i=e(49901),_=e(1586),v=e(58623),h=e(35361);N.exports=function(s,t,a,n){function r(l,o){return T.coerce(s,t,h,l,o)}w(s,t,r,n),t.visible!==!1&&(i(s,t,r,n),_(s,t,n,r,{prefix:"",cLetter:"z"}),r("hovertemplate"),v(r,n),r("xhoverformat"),r("yhoverformat"))}},76128:function(N,L,e){var T=e(46248),w=e(89298).hoverLabelText;N.exports=function(i,_,v,h,s){var t=T(i,_,v,h,s);if(t){var a=(i=t[0]).index,n=a[0],r=a[1],l=i.cd[0],o=l.trace,u=l.xRanges[r],p=l.yRanges[n];return i.xLabel=w(i.xa,[u[0],u[1]],o.xhoverformat),i.yLabel=w(i.ya,[p[0],p[1]],o.yhoverformat),t}}},43905:function(N,L,e){N.exports={attributes:e(35361),supplyDefaults:e(93888),crossTraceDefaults:e(82222),calc:e(90757),plot:e(50347),layerName:"heatmaplayer",colorbar:e(61243),style:e(70035),hoverPoints:e(76128),eventData:e(84402),moduleType:"trace",name:"histogram2d",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(N,L,e){var T=e(73972),w=e(71828);N.exports=function(i,_,v,h){var s=v("x"),t=v("y"),a=w.minRowLength(s),n=w.minRowLength(t);a&&n?(_._length=Math.min(a,n),T.getComponentMethod("calendars","handleTraceDefaults")(i,_,["x","y"],h),(v("z")||v("marker.color"))&&v("histfunc"),v("histnorm"),v("autobinx"),v("autobiny")):_.visible=!1}},99066:function(N,L,e){var T=e(35361),w=e(70600),i=e(50693),_=e(12663).axisHoverFormat,v=e(1426).extendFlat;N.exports=v({x:T.x,y:T.y,z:T.z,marker:T.marker,histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:T.xbins,nbinsy:T.nbinsy,ybins:T.ybins,autobinx:T.autobinx,autobiny:T.autobiny,bingroup:T.bingroup,xbingroup:T.xbingroup,ybingroup:T.ybingroup,autocontour:w.autocontour,ncontours:w.ncontours,contours:w.contours,line:{color:w.line.color,width:v({},w.line.width,{dflt:.5}),dash:w.line.dash,smoothing:w.line.smoothing,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:T.hovertemplate,texttemplate:w.texttemplate,textfont:w.textfont},i("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(N,L,e){var T=e(71828),w=e(75238),i=e(67217),_=e(8724),v=e(58623),h=e(99066);N.exports=function(s,t,a,n){function r(l,o){return T.coerce(s,t,h,l,o)}w(s,t,r,n),t.visible!==!1&&(i(s,t,r,function(l){return T.coerce2(s,t,h,l)}),_(s,t,r,n),r("xhoverformat"),r("yhoverformat"),r("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&v(r,n))}},35902:function(N,L,e){N.exports={attributes:e(99066),supplyDefaults:e(62654),crossTraceDefaults:e(82222),calc:e(27529),plot:e(29854).plot,layerName:"contourlayer",style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(N,L,e){var T=e(5386).fF,w=e(5386).si,i=e(50693),_=e(27670).Y,v=e(34e3),h=e(57564),s=e(45802),t=e(43473),a=e(1426).extendFlat,n=e(79952).u;N.exports={labels:h.labels,parents:h.parents,values:h.values,branchvalues:h.branchvalues,count:h.count,level:h.level,maxdepth:h.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:a({colors:h.marker.colors,line:h.marker.line,pattern:n,editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),leaf:h.leaf,pathbar:s.pathbar,text:v.text,textinfo:h.textinfo,texttemplate:w({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:v.hovertext,hoverinfo:h.hoverinfo,hovertemplate:T({},{keys:t.eventDataKeys}),textfont:v.textfont,insidetextfont:v.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:v.sort,root:h.root,domain:_({name:"icicle",trace:!0,editType:"calc"})}},96346:function(N,L,e){var T=e(74875);L.name="icicle",L.plot=function(w,i,_,v){T.plotBasePlot(L.name,w,i,_,v)},L.clean=function(w,i,_,v){T.cleanBasePlot(L.name,w,i,_,v)}},46584:function(N,L,e){var T=e(52147);L.y=function(w,i){return T.calc(w,i)},L.T=function(w){return T._runCrossTraceCalc("icicle",w)}},56524:function(N,L,e){var T=e(71828),w=e(46291),i=e(7901),_=e(27670).c,v=e(90769).handleText,h=e(97313).TEXTPAD,s=e(37434).handleMarkerDefaults,t=e(21081),a=t.hasColorscale,n=t.handleDefaults;N.exports=function(r,l,o,u){function p(y,k){return T.coerce(r,l,w,y,k)}var c=p("labels"),b=p("parents");if(c&&c.length&&b&&b.length){var g=p("values");g&&g.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var d=p("text");p("texttemplate"),l.texttemplate||p("textinfo",T.isArrayOrTypedArray(d)?"text+label":"label"),p("hovertext"),p("hovertemplate");var m=p("pathbar.visible");v(r,l,u,p,"auto",{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition"),s(r,l,u,p);var x=l._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis;x&&n(r,l,u,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",x?1:.7),l._hovered={marker:{line:{width:2,color:i.contrast(u.paper_bgcolor)}}},m&&(p("pathbar.thickness",l.pathbar.textfont.size+2*h),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),_(l,u,p),l._length=null}else l.visible=!1}},90666:function(N,L,e){var T=e(39898),w=e(71828),i=e(91424),_=e(63893),v=e(21538),h=e(82454).styleOne,s=e(43473),t=e(2791),a=e(83523),n=e(24714).formatSliceLabel,r=!1;N.exports=function(l,o,u,p,c){var b=c.width,g=c.height,d=c.viewX,m=c.viewY,x=c.pathSlice,y=c.toMoveInsideSlice,k=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,M=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,O=c.prevEntry,P=l._context.staticPlot,I=l._fullLayout,z=o[0].trace,U=z.textposition.indexOf("left")!==-1,R=z.textposition.indexOf("right")!==-1,j=z.textposition.indexOf("bottom")!==-1,Z=v(u,[b,g],{flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,orientation:z.tiling.orientation,pad:{inner:z.tiling.pad},maxDepth:z._maxDepth}).descendants(),F=1/0,V=-1/0;Z.forEach(function(X){var K=X.depth;K>=z._maxDepth?(X.x0=X.x1=(X.x0+X.x1)/2,X.y0=X.y1=(X.y0+X.y1)/2):(F=Math.min(F,K),V=Math.max(V,K))}),p=p.data(Z,t.getPtId),z._maxVisibleLayers=isFinite(V)?V-F+1:0,p.enter().append("g").classed("slice",!0),S(p,r,{},[b,g],x),p.order();var H=null;if(f&&O){var te=t.getPtId(O);p.each(function(X){H===null&&t.getPtId(X)===te&&(H={x0:X.x0,x1:X.x1,y0:X.y0,y1:X.y1})})}var $=function(){return H||{x0:0,x1:b,y0:0,y1:g}},J=p;return f&&(J=J.transition().each("end",function(){var X=T.select(this);t.setSliceCursor(X,l,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),J.each(function(X){X._x0=d(X.x0),X._x1=d(X.x1),X._y0=m(X.y0),X._y1=m(X.y1),X._hoverX=d(X.x1-z.tiling.pad),X._hoverY=m(j?X.y1-z.tiling.pad/2:X.y0+z.tiling.pad/2);var K=T.select(this),ee=w.ensureSingle(K,"path","surface",function(fe){fe.style("pointer-events",P?"none":"all")});f?ee.transition().attrTween("d",function(fe){var ge=M(fe,r,$(),[b,g],{orientation:z.tiling.orientation,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1});return function(ve){return x(ge(ve))}}):ee.attr("d",x),K.call(a,u,l,o,{styleOne:h,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,l,{isTransitioning:l._transitioning}),ee.call(h,X,z,l,{hovered:!1}),X.x0===X.x1||X.y0===X.y1?X._text="":X._text=n(X,u,z,o,I)||"";var ie=w.ensureSingle(K,"g","slicetext"),ae=w.ensureSingle(ie,"text","",function(fe){fe.attr("data-notex",1)}),oe=w.ensureUniformFontSize(l,t.determineTextFont(z,X,I.font));ae.text(X._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":U?"start":"middle").call(i.font,oe).call(_.convertToTspans,l),X.textBB=i.bBox(ae.node()),X.transform=y(X,{fontSize:oe.size}),X.transform.fontSize=oe.size,f?ae.transition().attrTween("transform",function(fe){var ge=E(fe,r,$(),[b,g]);return function(ve){return k(ge(ve))}}):ae.attr("transform",k(X))}),H}},69816:function(N,L,e){N.exports={moduleType:"trace",name:"icicle",basePlotModule:e(96346),categories:[],animatable:!0,attributes:e(46291),layoutAttributes:e(92894),supplyDefaults:e(56524),supplyLayoutDefaults:e(21070),calc:e(46584).y,crossTraceCalc:e(46584).T,plot:e(85596),style:e(82454).style,colorbar:e(4898),meta:{}}},92894:function(N){N.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(N,L,e){var T=e(71828),w=e(92894);N.exports=function(i,_){function v(h,s){return T.coerce(i,_,w,h,s)}v("iciclecolorway",_.colorway),v("extendiciclecolors")}},21538:function(N,L,e){var T=e(674),w=e(14102);N.exports=function(i,_,v){var h=v.flipX,s=v.flipY,t=v.orientation==="h",a=v.maxDepth,n=_[0],r=_[1];a&&(n=(i.height+1)*_[0]/Math.min(i.height+1,a),r=(i.height+1)*_[1]/Math.min(i.height+1,a));var l=T.partition().padding(v.pad.inner).size(t?[_[1],n]:[_[0],r])(i);return(t||h||s)&&w(l,_,{swapXY:t,flipX:h,flipY:s}),l}},85596:function(N,L,e){var T=e(80694),w=e(90666);N.exports=function(i,_,v,h){return T(i,_,v,h,{type:"icicle",drawDescendants:w})}},82454:function(N,L,e){var T=e(39898),w=e(7901),i=e(71828),_=e(72597).resizeText,v=e(43467);function h(s,t,a,n){var r=t.data.data,l=!t.children,o=r.i,u=i.castOption(a,o,"marker.line.color")||w.defaultLine,p=i.castOption(a,o,"marker.line.width")||0;s.call(v,t,a,n).style("stroke-width",p).call(w.stroke,u).style("opacity",l?a.leaf.opacity:null)}N.exports={style:function(s){var t=s._fullLayout._iciclelayer.selectAll(".trace");_(s,t,"icicle"),t.each(function(a){var n=T.select(this),r=a[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(l){T.select(this).call(h,l,r,s)})})},styleOne:h}},17230:function(N,L,e){for(var T=e(9012),w=e(5386).fF,i=e(1426).extendFlat,_=e(51877).colormodel,v=["rgb","rgba","rgba256","hsl","hsla"],h=[],s=[],t=0;t<v.length;t++){var a=_[v[t]];h.push("For the `"+v[t]+"` colormodel, it is ["+(a.zminDflt||a.min).join(", ")+"]."),s.push("For the `"+v[t]+"` colormodel, it is ["+(a.zmaxDflt||a.max).join(", ")+"].")}N.exports=i({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:v,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:i({},T.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:w({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(N,L,e){var T=e(71828),w=e(51877),i=e(92770),_=e(89298),v=e(71828).maxRowLength,h=e(67395).A;function s(a,n,r,l){return function(o){return T.constrain((o-a)*n,r,l)}}function t(a,n){return function(r){return T.constrain(r,a,n)}}N.exports=function(a,n){var r,l;if(n._hasZ)r=n.z.length,l=v(n.z);else if(n._hasSource){var o=h(n.source);r=o.height,l=o.width}var u,p=_.getFromId(a,n.xaxis||"x"),c=_.getFromId(a,n.yaxis||"y"),b=p.d2c(n.x0)-n.dx/2,g=c.d2c(n.y0)-n.dy/2,d=[b,b+l*n.dx],m=[g,g+r*n.dy];if(p&&p.type==="log")for(u=0;u<l;u++)d.push(b+u*n.dx);if(c&&c.type==="log")for(u=0;u<r;u++)m.push(g+u*n.dy);return n._extremes[p._id]=_.findExtremes(p,d),n._extremes[c._id]=_.findExtremes(c,m),n._scaler=function(x){var y=w.colormodel[x.colormodel],k=(y.colormodel||x.colormodel).length;x._sArray=[];for(var f=0;f<k;f++)y.min[f]!==x.zmin[f]||y.max[f]!==x.zmax[f]?x._sArray.push(s(x.zmin[f],(y.max[f]-y.min[f])/(x.zmax[f]-x.zmin[f]),y.min[f],y.max[f])):x._sArray.push(t(y.min[f],y.max[f]));return function(S){for(var M=S.slice(0,k),E=0;E<k;E++){var O=M[E];if(!i(O))return!1;M[E]=x._sArray[E](O)}return M}}(n),[{x0:b,y0:g,z:n.z,w:l,h:r}]}},51877:function(N){N.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(L){return L.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(L){return L.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(L){return L.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(L){var e=L.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(L){var e=L.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}}}},13245:function(N,L,e){var T=e(71828),w=e(17230),i=e(51877),_=e(25095).IMAGE_URL_PREFIX;N.exports=function(v,h){function s(n,r){return T.coerce(v,h,w,n,r)}s("source"),h.source&&!h.source.match(_)&&delete h.source,h._hasSource=!!h.source;var t,a=s("z");h._hasZ=!(a===void 0||!a.length||!a[0]||!a[0].length),h._hasZ||h._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),h._hasZ?(s("colormodel","rgb"),s("zmin",(t=i.colormodel[h.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):h._hasSource&&(h.colormodel="rgba256",t=i.colormodel[h.colormodel],h.zmin=t.zminDflt,h.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),h._length=null):h.visible=!1}},30835:function(N){N.exports=function(L,e){return"xVal"in e&&(L.x=e.xVal),"yVal"in e&&(L.y=e.yVal),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),L.color=e.color,L.colormodel=e.trace.colormodel,L.z||(L.z=e.color),L}},67395:function(N,L,e){var T=e(33575),w=e(25095).IMAGE_URL_PREFIX,i=e(12856).Buffer;L.A=function(_){var v=_.replace(w,""),h=new i(v,"base64");return T(h)}},28749:function(N,L,e){var T=e(30211),w=e(71828),i=w.isArrayOrTypedArray,_=e(51877);N.exports=function(v,h,s){var t=v.cd[0],a=t.trace,n=v.xa,r=v.ya;if(!(T.inbox(h-t.x0,h-(t.x0+t.w*a.dx),0)>0||T.inbox(s-t.y0,s-(t.y0+t.h*a.dy),0)>0)){var l,o=Math.floor((h-t.x0)/a.dx),u=Math.floor(Math.abs(s-t.y0)/a.dy);if(a._hasZ?l=t.z[u][o]:a._hasSource&&(l=a._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(o,u,1,1).data),l){var p,c=t.hi||a.hoverinfo;if(c){var b=c.split("+");b.indexOf("all")!==-1&&(b=["color"]),b.indexOf("color")!==-1&&(p=!0)}var g,d=_.colormodel[a.colormodel],m=d.colormodel||a.colormodel,x=m.length,y=a._scaler(l),k=d.suffix,f=[];(a.hovertemplate||p)&&(f.push("["+[y[0]+k[0],y[1]+k[1],y[2]+k[2]].join(", ")),x===4&&f.push(", "+y[3]+k[3]),f.push("]"),f=f.join(""),v.extraText=m.toUpperCase()+": "+f),i(a.hovertext)&&i(a.hovertext[u])?g=a.hovertext[u][o]:i(a.text)&&i(a.text[u])&&(g=a.text[u][o]);var S=r.c2p(t.y0+(u+.5)*a.dy),M=t.x0+(o+.5)*a.dx,E=t.y0+(u+.5)*a.dy,O="["+l.slice(0,a.colormodel.length).join(", ")+"]";return[w.extendFlat(v,{index:[u,o],x0:n.c2p(t.x0+o*a.dx),x1:n.c2p(t.x0+(o+1)*a.dx),y0:S,y1:S,color:y,xVal:M,xLabelVal:M,yVal:E,yLabelVal:E,zLabelVal:O,text:g,hovertemplateLabels:{zLabel:O,colorLabel:f,"color[0]Label":y[0]+k[0],"color[1]Label":y[1]+k[1],"color[2]Label":y[2]+k[2],"color[3]Label":y[3]+k[3]}})]}}}},94507:function(N,L,e){N.exports={attributes:e(17230),supplyDefaults:e(13245),calc:e(71113),plot:e(60775),style:e(12826),hoverPoints:e(28749),eventData:e(30835),moduleType:"trace",name:"image",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(N,L,e){var T=e(39898),w=e(71828),i=w.strTranslate,_=e(77922),v=e(51877),h=e(3883),s=e(32396).STYLE;N.exports=function(t,a,n,r){var l=a.xaxis,o=a.yaxis,u=!t._context._exportedPlot&&h();w.makeTraceGroups(r,n,"im").each(function(p){var c=T.select(this),b=p[0],g=b.trace,d=(g.zsmooth==="fast"||g.zsmooth===!1&&u)&&!g._hasZ&&g._hasSource&&l.type==="linear"&&o.type==="linear";g._realImage=d;var m,x,y,k,f,S,M=b.z,E=b.x0,O=b.y0,P=b.w,I=b.h,z=g.dx,U=g.dy;for(S=0;m===void 0&&S<P;)m=l.c2p(E+S*z),S++;for(S=P;x===void 0&&S>0;)x=l.c2p(E+S*z),S--;for(S=0;k===void 0&&S<I;)k=o.c2p(O+S*U),S++;for(S=I;f===void 0&&S>0;)f=o.c2p(O+S*U),S--;x<m&&(y=x,x=m,m=y),f<k&&(y=k,k=f,f=y),d||(m=Math.max(-.5*l._length,m),x=Math.min(1.5*l._length,x),k=Math.max(-.5*o._length,k),f=Math.min(1.5*o._length,f));var R=Math.round(x-m),j=Math.round(f-k);if(R<=0||j<=0)c.selectAll("image").data([]).exit().remove();else{var Z=c.selectAll("image").data([p]);Z.enter().append("svg:image").attr({xmlns:_.svg,preserveAspectRatio:"none"}),Z.exit().remove();var F=g.zsmooth===!1?s:"";if(d){var V=w.simpleMap(l.range,l.r2l),H=w.simpleMap(o.range,o.r2l),te=V[1]<V[0],$=H[1]>H[0];if(te||$){var J=m+R/2,X=k+j/2;F+="transform:"+i(J+"px",X+"px")+"scale("+(te?-1:1)+","+($?-1:1)+")"+i(-J+"px",-X+"px")+";"}}Z.attr("style",F);var K=new Promise(function(ie){if(g._hasZ)ie();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===P&&g._canvas.el.height===I&&g._canvas.source===g.source)ie();else{var ae=document.createElement("canvas");ae.width=P,ae.height=I;var oe=ae.getContext("2d",{willReadFrequently:!0});g._image=g._image||new Image;var fe=g._image;fe.onload=function(){oe.drawImage(fe,0,0),g._canvas={el:ae,source:g.source},ie()},fe.setAttribute("src",g.source)}}).then(function(){var ie,ae;if(g._hasZ)ae=ee(function(fe,ge){var ve=M[ge][fe];return w.isTypedArray(ve)&&(ve=Array.from(ve)),ve}),ie=ae.toDataURL("image/png");else if(g._hasSource)if(d)ie=g.source;else{var oe=g._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,P,I).data;ae=ee(function(fe,ge){var ve=4*(ge*P+fe);return[oe[ve],oe[ve+1],oe[ve+2],oe[ve+3]]}),ie=ae.toDataURL("image/png")}Z.attr({"xlink:href":ie,height:j,width:R,x:m,y:k})});t._promises.push(K)}function ee(ie){var ae=document.createElement("canvas");ae.width=R,ae.height=j;var oe,fe=ae.getContext("2d",{willReadFrequently:!0}),ge=function(de){return w.constrain(Math.round(l.c2p(E+de*z)-m),0,R)},ve=function(de){return w.constrain(Math.round(o.c2p(O+de*U)-k),0,j)},xe=v.colormodel[g.colormodel],_e=xe.colormodel||g.colormodel,ye=xe.fmt;for(S=0;S<b.w;S++){var Ce=ge(S),ke=ge(S+1);if(ke!==Ce&&!isNaN(ke)&&!isNaN(Ce))for(var Te=0;Te<b.h;Te++){var le=ve(Te),ue=ve(Te+1);ue===le||isNaN(ue)||isNaN(le)||!ie(S,Te)||(oe=g._scaler(ie(S,Te)),fe.fillStyle=oe?_e+"("+ye(oe).join(",")+")":"rgba(0,0,0,0)",fe.fillRect(Ce,le,ke-Ce,ue-le))}}return ae}})}},12826:function(N,L,e){var T=e(39898);N.exports=function(w){T.select(w).selectAll(".im image").style("opacity",function(i){return i[0].trace.opacity})}},54846:function(N,L,e){var T=e(1426).extendFlat,w=e(1426).extendDeep,i=e(30962).overrideAll,_=e(41940),v=e(22399),h=e(27670).Y,s=e(13838),t=e(44467).templatedArray,a=e(22372),n=e(12663).descriptionOnlyNumbers,r=_({editType:"plot",colorEditType:"plot"}),l={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:v.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},o={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",w({},l,{range:o}));N.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:h({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:T({},r,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:n("value")},font:T({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:n("value")},increasing:{symbol:{valType:"string",dflt:a.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:a.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:a.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:a.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:T({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:w({},l,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:i({range:o,visible:T({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:T({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:_({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:T({},l.line.color,{}),width:T({},l.line.width,{dflt:1}),editType:"plot"},thickness:T({},l.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(N,L,e){var T=e(74875);L.name="indicator",L.plot=function(w,i,_,v){T.plotBasePlot(L.name,w,i,_,v)},L.clean=function(w,i,_,v){T.cleanBasePlot(L.name,w,i,_,v)}},24667:function(N){N.exports={calc:function(L,e){var T=[],w=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var i=e._lastValue,_=i;return e._hasDelta&&typeof e.delta.reference=="number"&&(_=e.delta.reference),T[0]={y:w,lastY:i,delta:w-_,relativeDelta:(w-_)/_},T}}},84577:function(N){N.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(N,L,e){var T=e(71828),w=e(54846),i=e(27670).c,_=e(44467),v=e(85501),h=e(84577),s=e(26218),t=e(38701),a=e(96115),n=e(89426);function r(l,o){function u(p,c){return T.coerce(l,o,w.gauge.steps,p,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}N.exports={supplyDefaults:function(l,o,u,p){function c(O,P){return T.coerce(l,o,w,O,P)}i(o,p,c),c("mode"),o._hasNumber=o.mode.indexOf("number")!==-1,o._hasDelta=o.mode.indexOf("delta")!==-1,o._hasGauge=o.mode.indexOf("gauge")!==-1;var b=c("value");o._range=[0,typeof b=="number"?1.5*b:1];var g,d,m,x,y,k,f=new Array(2);function S(O,P){return T.coerce(m,x,w.gauge,O,P)}function M(O,P){return T.coerce(y,k,w.gauge.axis,O,P)}if(o._hasNumber&&(c("number.valueformat"),c("number.font.color",p.font.color),c("number.font.family",p.font.family),c("number.font.size"),o.number.font.size===void 0&&(o.number.font.size=h.defaultNumberFontSize,f[0]=!0),c("number.prefix"),c("number.suffix"),g=o.number.font.size),o._hasDelta&&(c("delta.font.color",p.font.color),c("delta.font.family",p.font.family),c("delta.font.size"),o.delta.font.size===void 0&&(o.delta.font.size=(o._hasNumber?.5:1)*(g||h.defaultNumberFontSize),f[1]=!0),c("delta.reference",o.value),c("delta.relative"),c("delta.valueformat",o.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),d=o.delta.font.size),o._scaleNumbers=(!o._hasNumber||f[0])&&(!o._hasDelta||f[1])||!1,c("title.font.color",p.font.color),c("title.font.family",p.font.family),c("title.font.size",.25*(g||d||h.defaultNumberFontSize)),c("title.text"),o._hasGauge){(m=l.gauge)||(m={}),x=_.newContainer(o,"gauge"),S("shape"),(o._isBullet=o.gauge.shape==="bullet")||c("title.align","center"),(o._isAngular=o.gauge.shape==="angular")||c("align","center"),S("bgcolor",p.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width"),S("bar.thickness",h.valueThickness*(o.gauge.shape==="bullet"?.5:1)),v(m,x,{name:"steps",handleItemDefaults:r}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),y={},m&&(y=m.axis||{}),k=_.newContainer(x,"axis"),M("visible"),o._range=M("range",o._range);var E={outerTicks:!0};s(y,k,M,"linear"),n(y,k,M,"linear",E),a(y,k,M,"linear",E),t(y,k,M,E)}else c("title.align","center"),c("align","center"),o._isAngular=o._isBullet=!1;o._length=null}}},15154:function(N,L,e){N.exports={moduleType:"trace",name:"indicator",basePlotModule:e(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(54846),supplyDefaults:e(94425).supplyDefaults,calc:e(24667).calc,plot:e(75634),meta:{}}},75634:function(N,L,e){var T=e(39898),w=e(81684).sX,i=e(81684).k4,_=e(71828),v=_.strScale,h=_.strTranslate,s=_.rad2deg,t=e(18783).MID_SHIFT,a=e(91424),n=e(84577),r=e(63893),l=e(89298),o=e(71453),u=e(52830),p=e(13838),c=e(7901),b={left:"start",center:"middle",right:"end"},g={left:0,center:.5,right:1},d=/[yzafpnmkMGTPEZY]/;function m(M){return M&&M.duration>0}function x(M){M.each(function(E){c.stroke(T.select(this),E.line.color)}).each(function(E){c.fill(T.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function y(M,E,O){var P=M._fullLayout,I=_.extendFlat({type:"linear",ticks:"outside",range:O,showline:!0},E),z={type:"linear",_id:"x"+E._id},U={letter:"x",font:P.font,noHover:!0,noTickson:!0};function R(j,Z){return _.coerce(I,z,p,j,Z)}return o(I,z,R,U,P),u(I,z,R,U),z}function k(M,E,O){return[Math.min(E/M.width,O/M.height),M,E+"x"+O]}function f(M,E,O,P){var I=document.createElementNS("http://www.w3.org/2000/svg","text"),z=T.select(I);return z.text(M).attr("x",0).attr("y",0).attr("text-anchor",O).attr("data-unformatted",M).call(r.convertToTspans,P).call(a.font,E),a.bBox(z.node())}function S(M,E,O,P,I,z){var U="_cache"+E;M[U]&&M[U].key===I||(M[U]={key:I,value:O});var R=_.aggNums(z,null,[M[U].value,P],2);return M[U].value=R,R}N.exports=function(M,E,O,P){var I,z=M._fullLayout;m(O)&&P&&(I=P()),_.makeTraceGroups(z._indicatorlayer,E,"trace").each(function(U){var R,j,Z,F,V,H=U[0].trace,te=T.select(this),$=H._hasGauge,J=H._isAngular,X=H._isBullet,K=H.domain,ee={w:z._size.w*(K.x[1]-K.x[0]),h:z._size.h*(K.y[1]-K.y[0]),l:z._size.l+z._size.w*K.x[0],r:z._size.r+z._size.w*(1-K.x[1]),t:z._size.t+z._size.h*(1-K.y[1]),b:z._size.b+z._size.h*K.y[0]},ie=ee.l+ee.w/2,ae=ee.t+ee.h/2,oe=Math.min(ee.w/2,ee.h),fe=n.innerRadius*oe,ge=H.align||"center";if(j=ae,$){if(J&&(R=ie,j=ae+oe/2,Z=function(le){return function(ue,de){return[de/Math.sqrt(ue.width/2*(ue.width/2)+ue.height*ue.height),ue,de]}(le,.9*fe)}),X){var ve=n.bulletPadding,xe=1-n.bulletNumberDomainSize+ve;R=ee.l+(xe+(1-xe)*g[ge])*ee.w,Z=function(le){return k(le,(n.bulletNumberDomainSize-ve)*ee.w,ee.h)}}}else R=ee.l+g[ge]*ee.w,Z=function(le){return k(le,ee.w,ee.h)};(function(le,ue,de,Le){var we,Ee,Oe,Fe=de[0].trace,pe=Le.numbersX,be=Le.numbersY,Me=Fe.align||"center",De=b[Me],Ne=Le.transitionOpts,Be=Le.onComplete,Ye=_.ensureSingle(ue,"g","numbers"),We=[];Fe._hasNumber&&We.push("number"),Fe._hasDelta&&(We.push("delta"),Fe.delta.position==="left"&&We.reverse());var et=Ye.selectAll("text").data(We);function ft(zt,Ft,Pt,Xe){if(!zt.match("s")||Pt>=0==Xe>=0||Ft(Pt).slice(-1).match(d)||Ft(Xe).slice(-1).match(d))return Ft;var Ke=zt.slice().replace("s","f").replace(/\d+/,function(Je){return parseInt(Je)-1}),He=y(le,{tickformat:Ke});return function(Je){return Math.abs(Je)<1?l.tickText(He,Je).text:Ft(Je)}}et.enter().append("text"),et.attr("text-anchor",function(){return De}).attr("class",function(zt){return zt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),et.exit().remove();var ht,mt=Fe.mode+Fe.align;if(Fe._hasDelta&&(ht=function(){var zt=y(le,{tickformat:Fe.delta.valueformat},Fe._range);zt.setScale(),l.prepTicks(zt);var Ft=function(je){return l.tickText(zt,je).text},Pt=Fe.delta.suffix,Xe=Fe.delta.prefix,Ke=function(je){return Fe.delta.relative?je.relativeDelta:je.delta},He=function(je,Ue){return je===0||typeof je!="number"||isNaN(je)?"-":(je>0?Fe.delta.increasing.symbol:Fe.delta.decreasing.symbol)+Xe+Ue(je)+Pt},Je=function(je){return je.delta>=0?Fe.delta.increasing.color:Fe.delta.decreasing.color};Fe._deltaLastValue===void 0&&(Fe._deltaLastValue=Ke(de[0]));var lt=Ye.select("text.delta");function ot(){lt.text(He(Ke(de[0]),Ft)).call(c.fill,Je(de[0])).call(r.convertToTspans,le)}return lt.call(a.font,Fe.delta.font).call(c.fill,Je({delta:Fe._deltaLastValue})),m(Ne)?lt.transition().duration(Ne.duration).ease(Ne.easing).tween("text",function(){var je=T.select(this),Ue=Ke(de[0]),at=Fe._deltaLastValue,$e=ft(Fe.delta.valueformat,Ft,at,Ue),gt=i(at,Ue);return Fe._deltaLastValue=Ue,function(yt){je.text(He(gt(yt),$e)),je.call(c.fill,Je({delta:gt(yt)}))}}).each("end",function(){ot(),Be&&Be()}).each("interrupt",function(){ot(),Be&&Be()}):ot(),Ee=f(He(Ke(de[0]),Ft),Fe.delta.font,De,le),lt}(),mt+=Fe.delta.position+Fe.delta.font.size+Fe.delta.font.family+Fe.delta.valueformat,mt+=Fe.delta.increasing.symbol+Fe.delta.decreasing.symbol,Oe=Ee),Fe._hasNumber&&(function(){var zt=y(le,{tickformat:Fe.number.valueformat},Fe._range);zt.setScale(),l.prepTicks(zt);var Ft=function(Je){return l.tickText(zt,Je).text},Pt=Fe.number.suffix,Xe=Fe.number.prefix,Ke=Ye.select("text.number");function He(){var Je=typeof de[0].y=="number"?Xe+Ft(de[0].y)+Pt:"-";Ke.text(Je).call(a.font,Fe.number.font).call(r.convertToTspans,le)}m(Ne)?Ke.transition().duration(Ne.duration).ease(Ne.easing).each("end",function(){He(),Be&&Be()}).each("interrupt",function(){He(),Be&&Be()}).attrTween("text",function(){var Je=T.select(this),lt=i(de[0].lastY,de[0].y);Fe._lastValue=de[0].y;var ot=ft(Fe.number.valueformat,Ft,de[0].lastY,de[0].y);return function(je){Je.text(Xe+ot(lt(je))+Pt)}}):He(),we=f(Xe+Ft(de[0].y)+Pt,Fe.number.font,De,le)}(),mt+=Fe.number.font.size+Fe.number.font.family+Fe.number.valueformat+Fe.number.suffix+Fe.number.prefix,Oe=we),Fe._hasDelta&&Fe._hasNumber){var Mt,_t,it=[(we.left+we.right)/2,(we.top+we.bottom)/2],st=[(Ee.left+Ee.right)/2,(Ee.top+Ee.bottom)/2],St=.75*Fe.delta.font.size;Fe.delta.position==="left"&&(Mt=S(Fe,"deltaPos",0,-1*(we.width*g[Fe.align]+Ee.width*(1-g[Fe.align])+St),mt,Math.min),_t=it[1]-st[1],Oe={width:we.width+Ee.width+St,height:Math.max(we.height,Ee.height),left:Ee.left+Mt,right:we.right,top:Math.min(we.top,Ee.top+_t),bottom:Math.max(we.bottom,Ee.bottom+_t)}),Fe.delta.position==="right"&&(Mt=S(Fe,"deltaPos",0,we.width*(1-g[Fe.align])+Ee.width*g[Fe.align]+St,mt,Math.max),_t=it[1]-st[1],Oe={width:we.width+Ee.width+St,height:Math.max(we.height,Ee.height),left:we.left,right:Ee.right+Mt,top:Math.min(we.top,Ee.top+_t),bottom:Math.max(we.bottom,Ee.bottom+_t)}),Fe.delta.position==="bottom"&&(Mt=null,_t=Ee.height,Oe={width:Math.max(we.width,Ee.width),height:we.height+Ee.height,left:Math.min(we.left,Ee.left),right:Math.max(we.right,Ee.right),top:we.bottom-we.height,bottom:we.bottom+Ee.height}),Fe.delta.position==="top"&&(Mt=null,_t=we.top,Oe={width:Math.max(we.width,Ee.width),height:we.height+Ee.height,left:Math.min(we.left,Ee.left),right:Math.max(we.right,Ee.right),top:we.bottom-we.height-Ee.height,bottom:we.bottom}),ht.attr({dx:Mt,dy:_t})}(Fe._hasNumber||Fe._hasDelta)&&Ye.attr("transform",function(){var zt=Le.numbersScaler(Oe);mt+=zt[2];var Ft,Pt=S(Fe,"numbersScale",1,zt[0],mt,Math.min);Fe._scaleNumbers||(Pt=1),Ft=Fe._isAngular?be-Pt*Oe.bottom:be-Pt*(Oe.top+Oe.bottom)/2,Fe._numbersTop=Pt*Oe.top+Ft;var Xe=Oe[Me];Me==="center"&&(Xe=(Oe.left+Oe.right)/2);var Ke=pe-Pt*Xe;return Ke=S(Fe,"numbersTranslate",0,Ke,mt,Math.max),h(Ke,Ft)+v(Pt)})})(M,te,U,{numbersX:R,numbersY:j,numbersScaler:Z,transitionOpts:O,onComplete:I}),$&&(F={range:H.gauge.axis.range,color:H.gauge.bgcolor,line:{color:H.gauge.bordercolor,width:0},thickness:1},V={range:H.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:H.gauge.bordercolor,width:H.gauge.borderwidth},thickness:1});var _e=te.selectAll("g.angular").data(J?U:[]);_e.exit().remove();var ye=te.selectAll("g.angularaxis").data(J?U:[]);ye.exit().remove(),J&&function(le,ue,de,Le){var we,Ee,Oe,Fe,pe=de[0].trace,be=Le.size,Me=Le.radius,De=Le.innerRadius,Ne=Le.gaugeBg,Be=Le.gaugeOutline,Ye=[be.l+be.w/2,be.t+be.h/2+Me/2],We=Le.gauge,et=Le.layer,ft=Le.transitionOpts,ht=Le.onComplete,mt=Math.PI/2;function Mt(yt){var xt=pe.gauge.axis.range[0],dt=(yt-xt)/(pe.gauge.axis.range[1]-xt)*Math.PI-mt;return dt<-mt?-mt:dt>mt?mt:dt}function _t(yt){return T.svg.arc().innerRadius((De+Me)/2-yt/2*(Me-De)).outerRadius((De+Me)/2+yt/2*(Me-De)).startAngle(-mt)}function it(yt){yt.attr("d",function(xt){return _t(xt.thickness).startAngle(Mt(xt.range[0])).endAngle(Mt(xt.range[1]))()})}We.enter().append("g").classed("angular",!0),We.attr("transform",h(Ye[0],Ye[1])),et.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),et.selectAll("g.xangularaxistick,path,text").remove(),(we=y(le,pe.gauge.axis)).type="linear",we.range=pe.gauge.axis.range,we._id="xangularaxis",we.ticklabeloverflow="allow",we.setScale();var st=function(yt){return(we.range[0]-yt.x)/(we.range[1]-we.range[0])*Math.PI+Math.PI},St={},zt=l.makeLabelFns(we,0).labelStandoff;St.xFn=function(yt){var xt=st(yt);return Math.cos(xt)*zt},St.yFn=function(yt){var xt=st(yt),dt=Math.sin(xt)>0?.2:1;return-Math.sin(xt)*(zt+yt.fontSize*dt)+Math.abs(Math.cos(xt))*(yt.fontSize*t)},St.anchorFn=function(yt){var xt=st(yt),dt=Math.cos(xt);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},St.heightFn=function(yt,xt,dt){var Lt=st(yt);return-.5*(1+Math.sin(Lt))*dt};var Ft=function(yt){return h(Ye[0]+Me*Math.cos(yt),Ye[1]-Me*Math.sin(yt))};if(Oe=function(yt){return Ft(st(yt))},Ee=l.calcTicks(we),Fe=l.getTickSigns(we)[2],we.visible){Fe=we.ticks==="inside"?-1:1;var Pt=(we.linewidth||1)/2;l.drawTicks(le,we,{vals:Ee,layer:et,path:"M"+Fe*Pt+",0h"+Fe*we.ticklen,transFn:function(yt){var xt=st(yt);return Ft(xt)+"rotate("+-s(xt)+")"}}),l.drawLabels(le,we,{vals:Ee,layer:et,transFn:Oe,labelFns:St})}var Xe=[Ne].concat(pe.gauge.steps),Ke=We.selectAll("g.bg-arc").data(Xe);Ke.enter().append("g").classed("bg-arc",!0).append("path"),Ke.select("path").call(it).call(x),Ke.exit().remove();var He=_t(pe.gauge.bar.thickness),Je=We.selectAll("g.value-arc").data([pe.gauge.bar]);Je.enter().append("g").classed("value-arc",!0).append("path");var lt,ot,je,Ue=Je.select("path");m(ft)?(Ue.transition().duration(ft.duration).ease(ft.easing).each("end",function(){ht&&ht()}).each("interrupt",function(){ht&&ht()}).attrTween("d",(lt=He,ot=Mt(de[0].lastY),je=Mt(de[0].y),function(){var yt=w(ot,je);return function(xt){return lt.endAngle(yt(xt))()}})),pe._lastValue=de[0].y):Ue.attr("d",typeof de[0].y=="number"?He.endAngle(Mt(de[0].y)):"M0,0Z"),Ue.call(x),Je.exit().remove(),Xe=[];var at=pe.gauge.threshold.value;(at||at===0)&&Xe.push({range:[at,at],color:pe.gauge.threshold.color,line:{color:pe.gauge.threshold.line.color,width:pe.gauge.threshold.line.width},thickness:pe.gauge.threshold.thickness});var $e=We.selectAll("g.threshold-arc").data(Xe);$e.enter().append("g").classed("threshold-arc",!0).append("path"),$e.select("path").call(it).call(x),$e.exit().remove();var gt=We.selectAll("g.gauge-outline").data([Be]);gt.enter().append("g").classed("gauge-outline",!0).append("path"),gt.select("path").call(it).call(x),gt.exit().remove()}(M,0,U,{radius:oe,innerRadius:fe,gauge:_e,layer:ye,size:ee,gaugeBg:F,gaugeOutline:V,transitionOpts:O,onComplete:I});var Ce=te.selectAll("g.bullet").data(X?U:[]);Ce.exit().remove();var ke=te.selectAll("g.bulletaxis").data(X?U:[]);ke.exit().remove(),X&&function(le,ue,de,Le){var we,Ee,Oe,Fe,pe,be=de[0].trace,Me=Le.gauge,De=Le.layer,Ne=Le.gaugeBg,Be=Le.gaugeOutline,Ye=Le.size,We=be.domain,et=Le.transitionOpts,ft=Le.onComplete;Me.enter().append("g").classed("bullet",!0),Me.attr("transform",h(Ye.l,Ye.t)),De.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),De.selectAll("g.xbulletaxistick,path,text").remove();var ht=Ye.h,mt=be.gauge.bar.thickness*ht,Mt=We.x[0],_t=We.x[0]+(We.x[1]-We.x[0])*(be._hasNumber||be._hasDelta?1-n.bulletNumberDomainSize:1);function it(Ke){Ke.attr("width",function(He){return Math.max(0,we.c2p(He.range[1])-we.c2p(He.range[0]))}).attr("x",function(He){return we.c2p(He.range[0])}).attr("y",function(He){return .5*(1-He.thickness)*ht}).attr("height",function(He){return He.thickness*ht})}(we=y(le,be.gauge.axis))._id="xbulletaxis",we.domain=[Mt,_t],we.setScale(),Ee=l.calcTicks(we),Oe=l.makeTransTickFn(we),Fe=l.getTickSigns(we)[2],pe=Ye.t+Ye.h,we.visible&&(l.drawTicks(le,we,{vals:we.ticks==="inside"?l.clipEnds(we,Ee):Ee,layer:De,path:l.makeTickPath(we,pe,Fe),transFn:Oe}),l.drawLabels(le,we,{vals:Ee,layer:De,transFn:Oe,labelFns:l.makeLabelFns(we,pe)}));var st=[Ne].concat(be.gauge.steps),St=Me.selectAll("g.bg-bullet").data(st);St.enter().append("g").classed("bg-bullet",!0).append("rect"),St.select("rect").call(it).call(x),St.exit().remove();var zt=Me.selectAll("g.value-bullet").data([be.gauge.bar]);zt.enter().append("g").classed("value-bullet",!0).append("rect"),zt.select("rect").attr("height",mt).attr("y",(ht-mt)/2).call(x),m(et)?zt.select("rect").transition().duration(et.duration).ease(et.easing).each("end",function(){ft&&ft()}).each("interrupt",function(){ft&&ft()}).attr("width",Math.max(0,we.c2p(Math.min(be.gauge.axis.range[1],de[0].y)))):zt.select("rect").attr("width",typeof de[0].y=="number"?Math.max(0,we.c2p(Math.min(be.gauge.axis.range[1],de[0].y))):0),zt.exit().remove();var Ft=de.filter(function(){return be.gauge.threshold.value||be.gauge.threshold.value===0}),Pt=Me.selectAll("g.threshold-bullet").data(Ft);Pt.enter().append("g").classed("threshold-bullet",!0).append("line"),Pt.select("line").attr("x1",we.c2p(be.gauge.threshold.value)).attr("x2",we.c2p(be.gauge.threshold.value)).attr("y1",(1-be.gauge.threshold.thickness)/2*ht).attr("y2",(1-(1-be.gauge.threshold.thickness)/2)*ht).call(c.stroke,be.gauge.threshold.line.color).style("stroke-width",be.gauge.threshold.line.width),Pt.exit().remove();var Xe=Me.selectAll("g.gauge-outline").data([Be]);Xe.enter().append("g").classed("gauge-outline",!0).append("rect"),Xe.select("rect").call(it).call(x),Xe.exit().remove()}(M,0,U,{gauge:Ce,layer:ke,size:ee,gaugeBg:F,gaugeOutline:V,transitionOpts:O,onComplete:I});var Te=te.selectAll("text.title").data(U);Te.exit().remove(),Te.enter().append("text").classed("title",!0),Te.attr("text-anchor",function(){return X?b.right:b[H.title.align]}).text(H.title.text).call(a.font,H.title.font).call(r.convertToTspans,M),Te.attr("transform",function(){var le,ue=ee.l+ee.w*g[H.title.align],de=n.titlePadding,Le=a.bBox(Te.node());return $?(J&&(le=H.gauge.axis.visible?a.bBox(ye.node()).top-de-Le.bottom:ee.t+ee.h/2-oe/2-Le.bottom-de),X&&(le=j-(Le.top+Le.bottom)/2,ue=ee.l-n.bulletPadding*ee.w)):le=H._numbersTop-de-Le.bottom,h(ue,le)})})}},16249:function(N,L,e){var T=e(50693),w=e(12663).axisHoverFormat,i=e(5386).fF,_=e(2418),v=e(9012),h=e(1426).extendFlat,s=e(30962).overrideAll,t=N.exports=s(h({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:i(),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),valuehoverformat:w("value",1),showlegend:h({},v.showlegend,{dflt:!1})},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,lightposition:_.lightposition,lighting:_.lighting,flatshading:_.flatshading,contour:_.contour,hoverinfo:h({},v.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},56959:function(N,L,e){var T=e(78803),w=e(88489).processGrid,i=e(88489).filter;N.exports=function(_,v){v._len=Math.min(v.x.length,v.y.length,v.z.length,v.value.length),v._x=i(v.x,v._len),v._y=i(v.y,v._len),v._z=i(v.z,v._len),v._value=i(v.value,v._len);var h=w(v);v._gridFill=h.fill,v._Xs=h.Xs,v._Ys=h.Ys,v._Zs=h.Zs,v._len=h.len;for(var s=1/0,t=-1/0,a=0;a<v._len;a++){var n=v._value[a];s=Math.min(s,n),t=Math.max(t,n)}v._minValues=s,v._maxValues=t,v._vMin=v.isomin===void 0||v.isomin===null?s:v.isomin,v._vMax=v.isomax===void 0||v.isomin===null?t:v.isomax,T(_,v,{vals:[v._vMin,v._vMax],containerStr:"",cLetter:"c"})}},22674:function(N,L,e){var T=e(9330).gl_mesh3d,w=e(81697).parseColorScale,i=e(71828).isArrayOrTypedArray,_=e(78614),v=e(21081).extractOpts,h=e(90060),s=function(l,o){for(var u=o.length-1;u>0;u--){var p=Math.min(o[u],o[u-1]),c=Math.max(o[u],o[u-1]);if(c>p&&p<l&&l<=c)return{id:u,distRatio:(c-l)/(c-p)}}return{id:0,distRatio:0}};function t(l,o,u){this.scene=l,this.uid=u,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var a=t.prototype;a.handlePick=function(l){if(l.object===this.mesh){var o=l.data.index,u=this.data._meshX[o],p=this.data._meshY[o],c=this.data._meshZ[o],b=this.data._Ys.length,g=this.data._Zs.length,d=s(u,this.data._Xs).id,m=s(p,this.data._Ys).id,x=s(c,this.data._Zs).id,y=l.index=x+g*m+g*b*d;l.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var k=this.data.hovertext||this.data.text;return i(k)&&k[y]!==void 0?l.textLabel=k[y]:k&&(l.textLabel=k),!0}},a.update=function(l){var o=this.scene,u=o.fullSceneLayout;function p(g,d,m,x){return d.map(function(y){return g.d2l(y,0,x)*m})}this.data=r(l);var c={positions:h(p(u.xaxis,l._meshX,o.dataScale[0],l.xcalendar),p(u.yaxis,l._meshY,o.dataScale[1],l.ycalendar),p(u.zaxis,l._meshZ,o.dataScale[2],l.zcalendar)),cells:h(l._meshI,l._meshJ,l._meshK),lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,contourEnable:l.contour.show,contourColor:_(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading},b=v(l);c.vertexIntensity=l._meshIntensity,c.vertexIntensityBounds=[b.min,b.max],c.colormap=w(l),this.mesh.update(c)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(l){l._meshI=[],l._meshJ=[],l._meshK=[];var o,u,p,c,b,g,d,m=l.surface.show,x=l.spaceframe.show,y=l.surface.fill,k=l.spaceframe.fill,f=!1,S=!1,M=0,E=l._Xs,O=l._Ys,P=l._Zs,I=E.length,z=O.length,U=P.length,R=n.indexOf(l._gridFill.replace(/-/g,"").replace(/\+/g,"")),j=function(De,Ne,Be){switch(R){case 5:return Be+U*Ne+U*z*De;case 4:return Be+U*De+U*I*Ne;case 3:return Ne+z*Be+z*U*De;case 2:return Ne+z*De+z*I*Be;case 1:return De+I*Be+I*U*Ne;default:return De+I*Ne+I*z*Be}},Z=l._minValues,F=l._maxValues,V=l._vMin,H=l._vMax;function te(De,Ne,Be){for(var Ye=g.length,We=u;We<Ye;We++)if(De===p[We]&&Ne===c[We]&&Be===b[We])return We;return-1}function $(){u=o}function J(){p=[],c=[],b=[],g=[],o=0,$()}function X(De,Ne,Be,Ye){return p.push(De),c.push(Ne),b.push(Be),g.push(Ye),++o-1}function K(De,Ne,Be){for(var Ye=[],We=0;We<De.length;We++)Ye[We]=De[We]*(1-Be)+Be*Ne[We];return Ye}function ee(De){d=De}function ie(De,Ne){return De==="all"||De===null||De.indexOf(Ne)>-1}function ae(De,Ne){return De===null?Ne:De}function oe(De,Ne,Be){$();var Ye,We,et,ft=[Ne],ht=[Be];if(d>=1)ft=[Ne],ht=[Be];else if(d>0){var mt=function(Xe,Ke){var He=Xe[0],Je=Xe[1],lt=Xe[2],ot=function(dt,Lt,Tt){for(var bt=[],Ct=0;Ct<dt.length;Ct++)bt[Ct]=(dt[Ct]+Lt[Ct]+Tt[Ct])/3;return bt}(He,Je,lt),je=Math.sqrt(1-d),Ue=K(ot,He,je),at=K(ot,Je,je),$e=K(ot,lt,je),gt=Ke[0],yt=Ke[1],xt=Ke[2];return{xyzv:[[He,Je,at],[at,Ue,He],[Je,lt,$e],[$e,at,Je],[lt,He,Ue],[Ue,$e,lt]],abc:[[gt,yt,-1],[-1,-1,gt],[yt,xt,-1],[-1,-1,yt],[xt,gt,-1],[-1,-1,xt]]}}(Ne,Be);ft=mt.xyzv,ht=mt.abc}for(var Mt=0;Mt<ft.length;Mt++){Ne=ft[Mt],Be=ht[Mt];for(var _t=[],it=0;it<3;it++){var st=Ne[it][0],St=Ne[it][1],zt=Ne[it][2],Ft=Ne[it][3],Pt=Be[it]>-1?Be[it]:te(st,St,zt);_t[it]=Pt>-1?Pt:X(st,St,zt,ae(De,Ft))}Ye=_t[0],We=_t[1],et=_t[2],l._meshI.push(Ye),l._meshJ.push(We),l._meshK.push(et),++M}}function fe(De,Ne,Be,Ye){var We=De[3];We<Be&&(We=Be),We>Ye&&(We=Ye);for(var et=(De[3]-We)/(De[3]-Ne[3]+1e-9),ft=[],ht=0;ht<4;ht++)ft[ht]=(1-et)*De[ht]+et*Ne[ht];return ft}function ge(De,Ne,Be){return De>=Ne&&De<=Be}function ve(De){var Ne=.001*(H-V);return De>=V-Ne&&De<=H+Ne}function xe(De){for(var Ne=[],Be=0;Be<4;Be++){var Ye=De[Be];Ne.push([l._x[Ye],l._y[Ye],l._z[Ye],l._value[Ye]])}return Ne}var _e=3;function ye(De,Ne,Be,Ye,We,et){et||(et=1),Be=[-1,-1,-1];var ft=!1,ht=[ge(Ne[0][3],Ye,We),ge(Ne[1][3],Ye,We),ge(Ne[2][3],Ye,We)];if(!ht[0]&&!ht[1]&&!ht[2])return!1;var mt=function(_t,it,st){return ve(it[0][3])&&ve(it[1][3])&&ve(it[2][3])?(oe(_t,it,st),!0):et<_e&&ye(_t,it,st,V,H,++et)};if(ht[0]&&ht[1]&&ht[2])return mt(De,Ne,Be)||ft;var Mt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(_t){if(ht[_t[0]]&&ht[_t[1]]&&!ht[_t[2]]){var it=Ne[_t[0]],st=Ne[_t[1]],St=Ne[_t[2]],zt=fe(St,it,Ye,We),Ft=fe(St,st,Ye,We);ft=mt(De,[Ft,zt,it],[-1,-1,Be[_t[0]]])||ft,ft=mt(De,[it,st,Ft],[Be[_t[0]],Be[_t[1]],-1])||ft,Mt=!0}}),Mt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(_t){if(ht[_t[0]]&&!ht[_t[1]]&&!ht[_t[2]]){var it=Ne[_t[0]],st=Ne[_t[1]],St=Ne[_t[2]],zt=fe(st,it,Ye,We),Ft=fe(St,it,Ye,We);ft=mt(De,[Ft,zt,it],[-1,-1,Be[_t[0]]])||ft,Mt=!0}}),ft}function Ce(De,Ne,Be,Ye){var We=!1,et=xe(Ne),ft=[ge(et[0][3],Be,Ye),ge(et[1][3],Be,Ye),ge(et[2][3],Be,Ye),ge(et[3][3],Be,Ye)];if(!(ft[0]||ft[1]||ft[2]||ft[3]))return We;if(ft[0]&&ft[1]&&ft[2]&&ft[3])return S&&(We=function(mt,Mt,_t){var it=function(st,St,zt){oe(mt,[Mt[st],Mt[St],Mt[zt]],[_t[st],_t[St],_t[zt]])};it(0,1,2),it(3,0,1),it(2,3,0),it(1,2,3)}(De,et,Ne)||We),We;var ht=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(mt){if(ft[mt[0]]&&ft[mt[1]]&&ft[mt[2]]&&!ft[mt[3]]){var Mt=et[mt[0]],_t=et[mt[1]],it=et[mt[2]],st=et[mt[3]];if(S)We=oe(De,[Mt,_t,it],[Ne[mt[0]],Ne[mt[1]],Ne[mt[2]]])||We;else{var St=fe(st,Mt,Be,Ye),zt=fe(st,_t,Be,Ye),Ft=fe(st,it,Be,Ye);We=oe(null,[St,zt,Ft],[-1,-1,-1])||We}ht=!0}}),ht||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(mt){if(ft[mt[0]]&&ft[mt[1]]&&!ft[mt[2]]&&!ft[mt[3]]){var Mt=et[mt[0]],_t=et[mt[1]],it=et[mt[2]],st=et[mt[3]],St=fe(it,Mt,Be,Ye),zt=fe(it,_t,Be,Ye),Ft=fe(st,_t,Be,Ye),Pt=fe(st,Mt,Be,Ye);S?(We=oe(De,[Mt,Pt,St],[Ne[mt[0]],-1,-1])||We,We=oe(De,[_t,zt,Ft],[Ne[mt[1]],-1,-1])||We):We=function(Xe,Ke,He){var Je=function(lt,ot,je){oe(null,[Ke[lt],Ke[ot],Ke[je]],[He[lt],He[ot],He[je]])};Je(0,1,2),Je(2,3,0)}(0,[St,zt,Ft,Pt],[-1,-1,-1,-1])||We,ht=!0}}),ht||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(mt){if(ft[mt[0]]&&!ft[mt[1]]&&!ft[mt[2]]&&!ft[mt[3]]){var Mt=et[mt[0]],_t=et[mt[1]],it=et[mt[2]],st=et[mt[3]],St=fe(_t,Mt,Be,Ye),zt=fe(it,Mt,Be,Ye),Ft=fe(st,Mt,Be,Ye);S?(We=oe(De,[Mt,St,zt],[Ne[mt[0]],-1,-1])||We,We=oe(De,[Mt,zt,Ft],[Ne[mt[0]],-1,-1])||We,We=oe(De,[Mt,Ft,St],[Ne[mt[0]],-1,-1])||We):We=oe(null,[St,zt,Ft],[-1,-1,-1])||We,ht=!0}})),We}function ke(De,Ne,Be,Ye,We,et,ft,ht,mt,Mt,_t){var it=!1;return f&&(ie(De,"A")&&(it=Ce(null,[Ne,Be,Ye,et],Mt,_t)||it),ie(De,"B")&&(it=Ce(null,[Be,Ye,We,mt],Mt,_t)||it),ie(De,"C")&&(it=Ce(null,[Be,et,ft,mt],Mt,_t)||it),ie(De,"D")&&(it=Ce(null,[Ye,et,ht,mt],Mt,_t)||it),ie(De,"E")&&(it=Ce(null,[Be,Ye,et,mt],Mt,_t)||it)),S&&(it=Ce(De,[Be,Ye,et,mt],Mt,_t)||it),it}function Te(De,Ne,Be,Ye,We,et,ft,ht){return[ht[0]===!0||ye(De,xe([Ne,Be,Ye]),[Ne,Be,Ye],et,ft),ht[1]===!0||ye(De,xe([Ye,We,Ne]),[Ye,We,Ne],et,ft)]}function le(De,Ne,Be,Ye,We,et,ft,ht,mt){return ht?Te(De,Ne,Be,We,Ye,et,ft,mt):Te(De,Be,We,Ye,Ne,et,ft,mt)}function ue(De,Ne,Be,Ye,We,et,ft){var ht,mt,Mt,_t,it=!1,st=function(){it=ye(De,[ht,mt,Mt],[-1,-1,-1],We,et)||it,it=ye(De,[Mt,_t,ht],[-1,-1,-1],We,et)||it},St=ft[0],zt=ft[1],Ft=ft[2];return St&&(ht=K(xe([j(Ne,Be-0,Ye-0)])[0],xe([j(Ne-1,Be-0,Ye-0)])[0],St),mt=K(xe([j(Ne,Be-0,Ye-1)])[0],xe([j(Ne-1,Be-0,Ye-1)])[0],St),Mt=K(xe([j(Ne,Be-1,Ye-1)])[0],xe([j(Ne-1,Be-1,Ye-1)])[0],St),_t=K(xe([j(Ne,Be-1,Ye-0)])[0],xe([j(Ne-1,Be-1,Ye-0)])[0],St),st()),zt&&(ht=K(xe([j(Ne-0,Be,Ye-0)])[0],xe([j(Ne-0,Be-1,Ye-0)])[0],zt),mt=K(xe([j(Ne-0,Be,Ye-1)])[0],xe([j(Ne-0,Be-1,Ye-1)])[0],zt),Mt=K(xe([j(Ne-1,Be,Ye-1)])[0],xe([j(Ne-1,Be-1,Ye-1)])[0],zt),_t=K(xe([j(Ne-1,Be,Ye-0)])[0],xe([j(Ne-1,Be-1,Ye-0)])[0],zt),st()),Ft&&(ht=K(xe([j(Ne-0,Be-0,Ye)])[0],xe([j(Ne-0,Be-0,Ye-1)])[0],Ft),mt=K(xe([j(Ne-0,Be-1,Ye)])[0],xe([j(Ne-0,Be-1,Ye-1)])[0],Ft),Mt=K(xe([j(Ne-1,Be-1,Ye)])[0],xe([j(Ne-1,Be-1,Ye-1)])[0],Ft),_t=K(xe([j(Ne-1,Be-0,Ye)])[0],xe([j(Ne-1,Be-0,Ye-1)])[0],Ft),st()),it}function de(De,Ne,Be,Ye,We,et,ft,ht,mt,Mt,_t,it){var st=De;return it?(f&&De==="even"&&(st=null),ke(st,Ne,Be,Ye,We,et,ft,ht,mt,Mt,_t)):(f&&De==="odd"&&(st=null),ke(st,mt,ht,ft,et,We,Ye,Be,Ne,Mt,_t))}function Le(De,Ne,Be,Ye,We){for(var et=[],ft=0,ht=0;ht<Ne.length;ht++)for(var mt=Ne[ht],Mt=1;Mt<U;Mt++)for(var _t=1;_t<z;_t++)et.push(le(De,j(mt,_t-1,Mt-1),j(mt,_t-1,Mt),j(mt,_t,Mt-1),j(mt,_t,Mt),Be,Ye,(mt+_t+Mt)%2,We&&We[ft]?We[ft]:[])),ft++;return et}function we(De,Ne,Be,Ye,We){for(var et=[],ft=0,ht=0;ht<Ne.length;ht++)for(var mt=Ne[ht],Mt=1;Mt<I;Mt++)for(var _t=1;_t<U;_t++)et.push(le(De,j(Mt-1,mt,_t-1),j(Mt,mt,_t-1),j(Mt-1,mt,_t),j(Mt,mt,_t),Be,Ye,(Mt+mt+_t)%2,We&&We[ft]?We[ft]:[])),ft++;return et}function Ee(De,Ne,Be,Ye,We){for(var et=[],ft=0,ht=0;ht<Ne.length;ht++)for(var mt=Ne[ht],Mt=1;Mt<z;Mt++)for(var _t=1;_t<I;_t++)et.push(le(De,j(_t-1,Mt-1,mt),j(_t-1,Mt,mt),j(_t,Mt-1,mt),j(_t,Mt,mt),Be,Ye,(_t+Mt+mt)%2,We&&We[ft]?We[ft]:[])),ft++;return et}function Oe(De,Ne,Be){for(var Ye=1;Ye<U;Ye++)for(var We=1;We<z;We++)for(var et=1;et<I;et++)de(De,j(et-1,We-1,Ye-1),j(et-1,We-1,Ye),j(et-1,We,Ye-1),j(et-1,We,Ye),j(et,We-1,Ye-1),j(et,We-1,Ye),j(et,We,Ye-1),j(et,We,Ye),Ne,Be,(et+We+Ye)%2)}function Fe(De,Ne,Be,Ye,We,et){for(var ft=[],ht=0,mt=0;mt<Ne.length;mt++)for(var Mt=Ne[mt],_t=1;_t<U;_t++)for(var it=1;it<z;it++)ft.push(ue(De,Mt,it,_t,Be,Ye,We[mt],et&&et[ht]&&et[ht])),ht++;return ft}function pe(De,Ne,Be,Ye,We,et){for(var ft=[],ht=0,mt=0;mt<Ne.length;mt++)for(var Mt=Ne[mt],_t=1;_t<I;_t++)for(var it=1;it<U;it++)ft.push(ue(De,_t,Mt,it,Be,Ye,We[mt],et&&et[ht]&&et[ht])),ht++;return ft}function be(De,Ne,Be,Ye,We,et){for(var ft=[],ht=0,mt=0;mt<Ne.length;mt++)for(var Mt=Ne[mt],_t=1;_t<z;_t++)for(var it=1;it<I;it++)ft.push(ue(De,it,_t,Mt,Be,Ye,We[mt],et&&et[ht]&&et[ht])),ht++;return ft}function Me(De,Ne){for(var Be=[],Ye=De;Ye<Ne;Ye++)Be.push(Ye);return Be}return function(){J(),function(){for(var mt=0;mt<I;mt++)for(var Mt=0;Mt<z;Mt++)for(var _t=0;_t<U;_t++){var it=j(mt,Mt,_t);X(l._x[it],l._y[it],l._z[it],l._value[it])}}();var De=null;if(x&&k&&(ee(k),S=!0,Oe(De,V,H),S=!1),m&&y){ee(y);for(var Ne=l.surface.pattern,Be=l.surface.count,Ye=0;Ye<Be;Ye++){var We=Be===1?.5:Ye/(Be-1),et=(1-We)*V+We*H,ft=Math.abs(et-Z)>Math.abs(et-F)?[Z,et]:[et,F];f=!0,Oe(Ne,ft[0],ft[1]),f=!1}}var ht=[[Math.min(V,F),Math.max(V,F)],[Math.min(Z,H),Math.max(Z,H)]];["x","y","z"].forEach(function(mt){for(var Mt=[],_t=0;_t<ht.length;_t++){var it=0,st=ht[_t][0],St=ht[_t][1],zt=l.slices[mt];if(zt.show&&zt.fill){ee(zt.fill);var Ft=[],Pt=[],Xe=[];if(zt.locations.length)for(var Ke=0;Ke<zt.locations.length;Ke++){var He=s(zt.locations[Ke],mt==="x"?E:mt==="y"?O:P);He.distRatio===0?Ft.push(He.id):He.id>0&&(Pt.push(He.id),mt==="x"?Xe.push([He.distRatio,0,0]):mt==="y"?Xe.push([0,He.distRatio,0]):Xe.push([0,0,He.distRatio]))}else Ft=Me(1,mt==="x"?I-1:mt==="y"?z-1:U-1);Pt.length>0&&(Mt[it]=mt==="x"?Fe(De,Pt,st,St,Xe,Mt[it]):mt==="y"?pe(De,Pt,st,St,Xe,Mt[it]):be(De,Pt,st,St,Xe,Mt[it]),it++),Ft.length>0&&(Mt[it]=mt==="x"?Le(De,Ft,st,St,Mt[it]):mt==="y"?we(De,Ft,st,St,Mt[it]):Ee(De,Ft,st,St,Mt[it]),it++)}var Je=l.caps[mt];Je.show&&Je.fill&&(ee(Je.fill),Mt[it]=mt==="x"?Le(De,[0,I-1],st,St,Mt[it]):mt==="y"?we(De,[0,z-1],st,St,Mt[it]):Ee(De,[0,U-1],st,St,Mt[it]),it++)}}),M===0&&J(),l._meshX=p,l._meshY=c,l._meshZ=b,l._meshIntensity=g,l._Xs=E,l._Ys=O,l._Zs=P}(),l}N.exports={findNearestOnAxis:s,generateIsoMeshes:r,createIsosurfaceTrace:function(l,o){var u=l.glplot.gl,p=T({gl:u}),c=new t(l,p,o.uid);return p._trace=c,c.update(o),l.glplot.add(p),c}}},82738:function(N,L,e){var T=e(71828),w=e(73972),i=e(16249),_=e(1586);function v(h,s,t,a,n){var r=n("isomin"),l=n("isomax");l!=null&&r!=null&&r>l&&(s.isomin=null,s.isomax=null);var o=n("x"),u=n("y"),p=n("z"),c=n("value");o&&o.length&&u&&u.length&&p&&p.length&&c&&c.length?(w.getComponentMethod("calendars","handleTraceDefaults")(h,s,["x","y","z"],a),n("valuehoverformat"),["x","y","z"].forEach(function(b){n(b+"hoverformat");var g="caps."+b;n(g+".show")&&n(g+".fill");var d="slices."+b;n(d+".show")&&(n(d+".fill"),n(d+".locations"))}),n("spaceframe.show")&&n("spaceframe.fill"),n("surface.show")&&(n("surface.count"),n("surface.fill"),n("surface.pattern")),n("contour.show")&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(b){n(b)}),_(h,s,a,n,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}N.exports={supplyDefaults:function(h,s,t,a){v(h,s,0,a,function(n,r){return T.coerce(h,s,i,n,r)})},supplyIsoDefaults:v}},64943:function(N,L,e){N.exports={attributes:e(16249),supplyDefaults:e(82738).supplyDefaults,calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(N,L,e){var T=e(50693),w=e(12663).axisHoverFormat,i=e(5386).fF,_=e(54532),v=e(9012),h=e(1426).extendFlat;N.exports=h({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:i({editType:"calc"}),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},T("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:h({},_.contours.x.show,{}),color:_.contours.x.color,width:_.contours.x.width,editType:"calc"},lightposition:{x:h({},_.lightposition.x,{dflt:1e5}),y:h({},_.lightposition.y,{dflt:1e5}),z:h({},_.lightposition.z,{dflt:0}),editType:"calc"},lighting:h({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},_.lighting),hoverinfo:h({},v.hoverinfo,{editType:"calc"}),showlegend:h({},v.showlegend,{dflt:!1})})},82932:function(N,L,e){var T=e(78803);N.exports=function(w,i){i.intensity&&T(w,i,{vals:i.intensity,containerStr:"",cLetter:"c"})}},91134:function(N,L,e){var T=e(9330).gl_mesh3d,w=e(9330).delaunay_triangulate,i=e(9330).alpha_shape,_=e(9330).convex_hull,v=e(81697).parseColorScale,h=e(71828).isArrayOrTypedArray,s=e(78614),t=e(21081).extractOpts,a=e(90060);function n(c,b,g){this.scene=c,this.uid=g,this.mesh=b,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=n.prototype;function l(c){for(var b=[],g=c.length,d=0;d<g;d++)b[d]=s(c[d]);return b}function o(c,b,g,d){for(var m=[],x=b.length,y=0;y<x;y++)m[y]=c.d2l(b[y],0,d)*g;return m}function u(c){for(var b=[],g=c.length,d=0;d<g;d++)b[d]=Math.round(c[d]);return b}function p(c,b){for(var g=c.length,d=0;d<g;d++)if(c[d]<=-.5||c[d]>=b-.5)return!1;return!0}r.handlePick=function(c){if(c.object===this.mesh){var b=c.index=c.data.index;c.data._cellCenter?c.traceCoordinate=c.data.dataCoordinate:c.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]];var g=this.data.hovertext||this.data.text;return h(g)&&g[b]!==void 0?c.textLabel=g[b]:g&&(c.textLabel=g),!0}},r.update=function(c){var b=this.scene,g=b.fullSceneLayout;this.data=c;var d,m=c.x.length,x=a(o(g.xaxis,c.x,b.dataScale[0],c.xcalendar),o(g.yaxis,c.y,b.dataScale[1],c.ycalendar),o(g.zaxis,c.z,b.dataScale[2],c.zcalendar));if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!p(c.i,m)||!p(c.j,m)||!p(c.k,m))return;d=a(u(c.i),u(c.j),u(c.k))}else d=c.alphahull===0?_(x):c.alphahull>0?i(c.alphahull,x):function(S,M){for(var E=["x","y","z"].indexOf(S),O=[],P=M.length,I=0;I<P;I++)O[I]=[M[I][(E+1)%3],M[I][(E+2)%3]];return w(O)}(c.delaunayaxis,x);var y={positions:x,cells:d,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:s(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var k=t(c);this.color="#fff";var f=c.intensitymode;y[f+"Intensity"]=c.intensity,y[f+"IntensityBounds"]=[k.min,k.max],y.colormap=v(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],y.vertexColors=l(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],y.cellColors=l(c.facecolor)):(this.color=c.color,y.meshColor=s(c.color));this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},N.exports=function(c,b){var g=c.glplot.gl,d=T({gl:g}),m=new n(c,d,b.uid);return d._trace=m,m.update(b),c.glplot.add(d),m}},58669:function(N,L,e){var T=e(73972),w=e(71828),i=e(1586),_=e(2418);N.exports=function(v,h,s,t){function a(r,l){return w.coerce(v,h,_,r,l)}function n(r){var l=r.map(function(o){var u=a(o);return u&&w.isArrayOrTypedArray(u)?u:null});return l.every(function(o){return o&&o.length===l[0].length})&&l}n(["x","y","z"])?(n(["i","j","k"]),(!h.i||h.j&&h.k)&&(!h.j||h.k&&h.i)&&(!h.k||h.i&&h.j)?(T.getComponentMethod("calendars","handleTraceDefaults")(v,h,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(r){a(r)}),a("contour.show")&&(a("contour.color"),a("contour.width")),"intensity"in v?(a("intensity"),a("intensitymode"),i(v,h,t,a,{prefix:"",cLetter:"c"})):(h.showscale=!1,"facecolor"in v?a("facecolor"):"vertexcolor"in v?a("vertexcolor"):a("color",s)),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),h._length=null):h.visible=!1):h.visible=!1}},21164:function(N,L,e){N.exports={attributes:e(2418),supplyDefaults:e(58669),calc:e(82932),colorbar:{min:"cmin",max:"cmax"},plot:e(91134),moduleType:"trace",name:"mesh3d",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(N,L,e){var T=e(71828).extendFlat,w=e(82196),i=e(12663).axisHoverFormat,_=e(79952).P,v=e(77914),h=e(22372),s=h.INCREASING.COLOR,t=h.DECREASING.COLOR,a=w.line;function n(r){return{line:{color:T({},a.color,{dflt:r}),width:a.width,dash:_,editType:"style"},editType:"style"}}N.exports={xperiod:w.xperiod,xperiod0:w.xperiod0,xperiodalignment:w.xperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:T({},a.width,{}),dash:T({},_,{}),editType:"style"},increasing:n(s),decreasing:n(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:T({},v.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(N,L,e){var T=e(71828),w=T._,i=e(89298),_=e(42973),v=e(50606).BADNUM;function h(t,a,n,r){return{o:t,h:a,l:n,c:r}}function s(t,a,n,r,l,o){for(var u=l.makeCalcdata(a,"open"),p=l.makeCalcdata(a,"high"),c=l.makeCalcdata(a,"low"),b=l.makeCalcdata(a,"close"),g=T.isArrayOrTypedArray(a.text),d=T.isArrayOrTypedArray(a.hovertext),m=!0,x=null,y=!!a.xperiodalignment,k=[],f=0;f<r.length;f++){var S=r[f],M=u[f],E=p[f],O=c[f],P=b[f];if(S!==v&&M!==v&&E!==v&&O!==v&&P!==v){P===M?x!==null&&P!==x&&(m=P>x):m=P>M,x=P;var I=o(M,E,O,P);I.pos=S,I.yc=(M+P)/2,I.i=f,I.dir=m?"increasing":"decreasing",I.x=I.pos,I.y=[O,E],y&&(I.orig_p=n[f]),g&&(I.tx=a.text[f]),d&&(I.htx=a.hovertext[f]),k.push(I)}else k.push({pos:S,empty:!0})}return a._extremes[l._id]=i.findExtremes(l,T.concat(c,p),{padded:!0}),k.length&&(k[0].t={labels:{open:w(t,"open:")+" ",high:w(t,"high:")+" ",low:w(t,"low:")+" ",close:w(t,"close:")+" "}}),k}N.exports={calc:function(t,a){var n=i.getFromId(t,a.xaxis),r=i.getFromId(t,a.yaxis),l=function(b,g,d){var m=d._minDiff;if(!m){var x,y=b._fullData,k=[];for(m=1/0,x=0;x<y.length;x++){var f=y[x];if(f.type==="ohlc"&&f.visible===!0&&f.xaxis===g._id){k.push(f);var S=g.makeCalcdata(f,"x");f._origX=S;var M=_(d,g,"x",S).vals;f._xcalc=M;var E=T.distinctVals(M).minDiff;E&&isFinite(E)&&(m=Math.min(m,E))}}for(m===1/0&&(m=1),x=0;x<k.length;x++)k[x]._minDiff=m}return m*d.tickwidth}(t,n,a),o=a._minDiff;a._minDiff=null;var u=a._origX;a._origX=null;var p=a._xcalc;a._xcalc=null;var c=s(t,a,u,p,r,h);return a._extremes[n._id]=i.findExtremes(n,p,{vpad:o/2}),c.length?(T.extendFlat(c[0].t,{wHover:o/2,tickLen:l}),c):[{t:{empty:!0}}]},calcCommon:s}},16169:function(N,L,e){var T=e(71828),w=e(14555),i=e(73927),_=e(2522);function v(h,s,t,a){t(a+".line.color"),t(a+".line.width",s.line.width),t(a+".line.dash",s.line.dash)}N.exports=function(h,s,t,a){function n(r,l){return T.coerce(h,s,_,r,l)}w(h,s,n,a)?(i(h,s,a,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),n("line.dash"),v(0,s,n,"increasing"),v(0,s,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),a._requestRangeslider[s.xaxis]=!0):s.visible=!1}},66449:function(N,L,e){var T=e(89298),w=e(71828),i=e(30211),_=e(7901),v=e(71828).fillText,h=e(22372),s={increasing:h.INCREASING.SYMBOL,decreasing:h.DECREASING.SYMBOL};function t(r,l,o,u){var p,c,b=r.cd,g=r.xa,d=b[0].trace,m=b[0].t,x=d.type,y=x==="ohlc"?"l":"min",k=x==="ohlc"?"h":"max",f=m.bPos||0,S=function(F){return F.pos+f-l},M=m.bdPos||m.tickLen,E=m.wHover,O=Math.min(1,M/Math.abs(g.r2c(g.range[1])-g.r2c(g.range[0])));function P(F){var V=S(F);return i.inbox(V-E,V+E,p)}function I(F){var V=F[y],H=F[k];return V===H||i.inbox(V-o,H-o,p)}function z(F){return(P(F)+I(F))/2}p=r.maxHoverDistance-O,c=r.maxSpikeDistance-O;var U=i.getDistanceFunction(u,P,I,z);if(i.getClosest(b,U,r),r.index===!1)return null;var R=b[r.index];if(R.empty)return null;var j=d[R.dir],Z=j.line.color;return _.opacity(Z)&&j.line.width?r.color=Z:r.color=j.fillcolor,r.x0=g.c2p(R.pos+f-M,!0),r.x1=g.c2p(R.pos+f+M,!0),r.xLabelVal=R.orig_p!==void 0?R.orig_p:R.pos,r.spikeDistance=z(R)*c/p,r.xSpike=g.c2p(R.pos,!0),r}function a(r,l,o,u){var p=r.cd,c=r.ya,b=p[0].trace,g=p[0].t,d=[],m=t(r,l,o,u);if(!m)return[];var x=p[m.index].hi||b.hoverinfo,y=x.split("+");if(x!=="all"&&y.indexOf("y")===-1)return[];for(var k=["high","open","close","low"],f={},S=0;S<k.length;S++){var M,E=k[S],O=b[E][m.index],P=c.c2p(O,!0);O in f?(M=f[O]).yLabel+="<br>"+g.labels[E]+T.hoverLabelText(c,O,b.yhoverformat):((M=w.extendFlat({},m)).y0=M.y1=P,M.yLabelVal=O,M.yLabel=g.labels[E]+T.hoverLabelText(c,O,b.yhoverformat),M.name="",d.push(M),f[O]=M)}return d}function n(r,l,o,u){var p=r.cd,c=r.ya,b=p[0].trace,g=p[0].t,d=t(r,l,o,u);if(!d)return[];var m=p[d.index],x=d.index=m.i,y=m.dir;function k(I){return g.labels[I]+T.hoverLabelText(c,b[I][x],b.yhoverformat)}var f=m.hi||b.hoverinfo,S=f.split("+"),M=f==="all",E=M||S.indexOf("y")!==-1,O=M||S.indexOf("text")!==-1,P=E?[k("open"),k("high"),k("low"),k("close")+"  "+s[y]]:[];return O&&v(m,b,P),d.extraText=P.join("<br>"),d.y0=d.y1=c.c2p(m.yc,!0),[d]}N.exports={hoverPoints:function(r,l,o,u){return r.cd[0].trace.hoverlabel.split?a(r,l,o,u):n(r,l,o,u)},hoverSplit:a,hoverOnPoints:n}},54186:function(N,L,e){N.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(2522),supplyDefaults:e(16169),calc:e(3485).calc,plot:e(72314),style:e(53101),hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},14555:function(N,L,e){var T=e(73972),w=e(71828);N.exports=function(i,_,v,h){var s=v("x"),t=v("open"),a=v("high"),n=v("low"),r=v("close");if(v("hoverlabel.split"),T.getComponentMethod("calendars","handleTraceDefaults")(i,_,["x"],h),t&&a&&n&&r){var l=Math.min(t.length,a.length,n.length,r.length);return s&&(l=Math.min(l,w.minRowLength(s))),_._length=l,l}}},72314:function(N,L,e){var T=e(39898),w=e(71828);N.exports=function(i,_,v,h){var s=_.yaxis,t=_.xaxis,a=!!t.rangebreaks;w.makeTraceGroups(h,v,"trace ohlc").each(function(n){var r=T.select(this),l=n[0],o=l.t;if(l.trace.visible!==!0||o.empty)r.remove();else{var u=o.tickLen,p=r.selectAll("path").data(w.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(c){if(c.empty)return"M0,0Z";var b=t.c2p(c.pos-u,!0),g=t.c2p(c.pos+u,!0),d=a?(b+g)/2:t.c2p(c.pos,!0);return"M"+b+","+s.c2p(c.o,!0)+"H"+d+"M"+d+","+s.c2p(c.h,!0)+"V"+s.c2p(c.l,!0)+"M"+g+","+s.c2p(c.c,!0)+"H"+d})}})}},67324:function(N){N.exports=function(L,e){var T,w=L.cd,i=L.xaxis,_=L.yaxis,v=[],h=w[0].t.bPos||0;if(e===!1)for(T=0;T<w.length;T++)w[T].selected=0;else for(T=0;T<w.length;T++){var s=w[T];e.contains([i.c2p(s.pos+h),_.c2p(s.yc)],null,s.i,L)?(v.push({pointNumber:s.i,x:i.c2d(s.pos),y:_.c2d(s.yc)}),s.selected=1):s.selected=0}return v}},53101:function(N,L,e){var T=e(39898),w=e(91424),i=e(7901);N.exports=function(_,v,h){var s=h||T.select(_).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var a=t[0].trace;T.select(this).selectAll("path").each(function(n){if(!n.empty){var r=a[n.dir].line;T.select(this).style("fill","none").call(i.stroke,r.color).call(w.dashLine,r.dash,r.width).style("opacity",a.selectedpoints&&!n.selected?.3:1)}})})}},99506:function(N,L,e){var T=e(1426).extendFlat,w=e(9012),i=e(41940),_=e(50693),v=e(5386).fF,h=e(27670).Y,s=T({editType:"calc"},_("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:v({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});N.exports={domain:h({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:T({},w.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:v({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:i({editType:"calc"}),tickfont:i({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(N,L,e){var T=e(27659).a0,w=e(45784),i="parcats";L.name=i,L.plot=function(_,v,h,s){var t=T(_.calcdata,i);if(t.length){var a=t[0];w(_,a,h,s)}},L.clean=function(_,v,h,s){var t=s._has&&s._has("parcats"),a=v._has&&v._has("parcats");t&&!a&&s._paperdiv.selectAll(".parcats").remove()}},28699:function(N,L,e){var T=e(28984).wrap,w=e(52075).hasColorscale,i=e(78803),_=e(75744),v=e(91424),h=e(71828),s=e(92770);function t(r,l,o){r.valueInds.push(l),r.count+=o}function a(r,l,o){return{categoryInds:r,color:l,rawColor:o,valueInds:[],count:0}}function n(r,l,o){r.valueInds.push(l),r.count+=o}N.exports=function(r,l){var o=h.filterVisible(l.dimensions);if(o.length===0)return[];var u,p,c,b=o.map(function(H){var te;if(H.categoryorder==="trace")te=null;else if(H.categoryorder==="array")te=H.categoryarray;else{te=_(H.values);for(var $=!0,J=0;J<te.length;J++)if(!s(te[J])){$=!1;break}te.sort($?h.sorterAsc:void 0),H.categoryorder==="category descending"&&(te=te.reverse())}return function(X,K){K=K==null?[]:K.map(function(xe){return xe});var ee={},ie={},ae=[];K.forEach(function(xe,_e){ee[xe]=0,ie[xe]=_e});for(var oe=0;oe<X.length;oe++){var fe,ge=X[oe];ee[ge]===void 0?(ee[ge]=1,fe=K.push(ge)-1,ie[ge]=fe):(ee[ge]++,fe=ie[ge]),ae.push(fe)}var ve=K.map(function(xe){return ee[xe]});return{uniqueValues:K,uniqueCounts:ve,inds:ae}}(H.values,te)});u=h.isArrayOrTypedArray(l.counts)?l.counts:[l.counts],function(H){var te,$=H.map(function(J){return J.displayindex});if(function(J){for(var X=new Array(J.length),K=0;K<J.length;K++){if(J[K]<0||J[K]>=J.length||X[J[K]]!==void 0)return!1;X[J[K]]=!0}return!0}($))for(te=0;te<H.length;te++)H[te]._displayindex=H[te].displayindex;else for(te=0;te<H.length;te++)H[te]._displayindex=te}(o),o.forEach(function(H,te){(function($,J){$._categoryarray=J.uniqueValues,$.ticktext===null||$.ticktext===void 0?$._ticktext=[]:$._ticktext=$.ticktext.slice();for(var X=$._ticktext.length;X<J.uniqueValues.length;X++)$._ticktext.push(J.uniqueValues[X])})(H,b[te])});var g,d=l.line;d?(w(l,"line")&&i(r,l,{vals:l.line.color,containerStr:"line",cLetter:"c"}),g=v.tryColorscale(d)):g=h.identity;var m,x,y,k,f,S=o[0].values.length,M={},E=b.map(function(H){return H.inds});for(c=0,m=0;m<S;m++){var O=[];for(x=0;x<E.length;x++)O.push(E[x][m]);p=u[m%u.length],c+=p;var P=(y=m,k=void 0,f=void 0,h.isArrayOrTypedArray(d.color)?f=k=d.color[y%d.color.length]:k=d.color,{color:g(k),rawColor:f}),I=O+"-"+P.rawColor;M[I]===void 0&&(M[I]=a(O,P.color,P.rawColor)),n(M[I],m,p)}var z,U=o.map(function(H,te){return function($,J,X,K,ee){return{dimensionInd:$,containerInd:J,displayInd:X,dimensionLabel:K,count:ee,categories:[],dragX:null}}(te,H._index,H._displayindex,H.label,c)});for(m=0;m<S;m++)for(p=u[m%u.length],x=0;x<U.length;x++){var R=U[x].containerInd,j=b[x].inds[m],Z=U[x].categories;if(Z[j]===void 0){var F=l.dimensions[R]._categoryarray[j],V=l.dimensions[R]._ticktext[j];Z[j]={dimensionInd:x,categoryInd:z=j,categoryValue:F,displayInd:z,categoryLabel:V,valueInds:[],count:0,dragY:null}}t(Z[j],m,p)}return T(function(H,te,$){var J=H.map(function(X){return X.categories.length}).reduce(function(X,K){return Math.max(X,K)});return{dimensions:H,paths:te,trace:void 0,maxCats:J,count:$}}(U,M,c))}},14647:function(N,L,e){var T=e(71828),w=e(52075).hasColorscale,i=e(1586),_=e(27670).c,v=e(85501),h=e(99506),s=e(94397),t=e(73627).isTypedArraySpec;function a(n,r){function l(d,m){return T.coerce(n,r,h.dimensions,d,m)}var o=l("values"),u=l("visible");if(o&&o.length||(u=r.visible=!1),u){l("label"),l("displayindex",r._index);var p,c=n.categoryarray,b=T.isArrayOrTypedArray(c)&&c.length>0||t(c);b&&(p="array");var g=l("categoryorder",p);g==="array"?(l("categoryarray"),l("ticktext")):(delete n.categoryarray,delete n.ticktext),b||g!=="array"||(r.categoryorder="trace")}}N.exports=function(n,r,l,o){function u(d,m){return T.coerce(n,r,h,d,m)}var p=v(n,r,{name:"dimensions",handleItemDefaults:a}),c=function(d,m,x,y,k){k("line.shape"),k("line.hovertemplate");var f=k("line.color",y.colorway[0]);if(w(d,"line")&&T.isArrayOrTypedArray(f)){if(f.length)return k("line.colorscale"),i(d,m,y,k,{prefix:"line.",cLetter:"c"}),f.length;m.line.color=x}return 1/0}(n,r,l,o,u);_(r,o,u),Array.isArray(p)&&p.length||(r.visible=!1),s(r,p,"values",c),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var b={family:o.font.family,size:Math.round(o.font.size),color:o.font.color};T.coerceFont(u,"labelfont",b);var g={family:o.font.family,size:Math.round(o.font.size/1.2),color:o.font.color};T.coerceFont(u,"tickfont",g)}},94873:function(N,L,e){N.exports={attributes:e(99506),supplyDefaults:e(14647),calc:e(28699),plot:e(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(27677),categories:["noOpacity"],meta:{}}},45460:function(N,L,e){var T=e(39898),w=e(81684).k4,i=e(72391),_=e(30211),v=e(71828),h=v.strTranslate,s=e(91424),t=e(84267),a=e(63893);function n($,J,X,K){var ee=J._context.staticPlot,ie=$.map(Z.bind(0,J,X)),ae=K.selectAll("g.parcatslayer").data([null]);ae.enter().append("g").attr("class","parcatslayer").style("pointer-events",ee?"none":"all");var oe=ae.selectAll("g.trace.parcats").data(ie,r),fe=oe.enter().append("g").attr("class","trace parcats");oe.attr("transform",function(le){return h(le.x,le.y)}),fe.append("g").attr("class","paths");var ge=oe.select("g.paths").selectAll("path.path").data(function(le){return le.paths},r);ge.attr("fill",function(le){return le.model.color});var ve=ge.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(le){return le.model.color}).attr("fill-opacity",0);d(ve),ge.attr("d",function(le){return le.svgD}),ve.empty()||ge.sort(o),ge.exit().remove(),ge.on("mouseover",u).on("mouseout",p).on("click",g),fe.append("g").attr("class","dimensions");var xe=oe.select("g.dimensions").selectAll("g.dimension").data(function(le){return le.dimensions},r);xe.enter().append("g").attr("class","dimension"),xe.attr("transform",function(le){return h(le.x,0)}),xe.exit().remove();var _e=xe.selectAll("g.category").data(function(le){return le.categories},r),ye=_e.enter().append("g").attr("class","category");_e.attr("transform",function(le){return h(0,le.y)}),ye.append("rect").attr("class","catrect").attr("pointer-events","none"),_e.select("rect.catrect").attr("fill","none").attr("width",function(le){return le.width}).attr("height",function(le){return le.height}),x(ye);var Ce=_e.selectAll("rect.bandrect").data(function(le){return le.bands},r);Ce.each(function(){v.raiseToTop(this)}),Ce.attr("fill",function(le){return le.color});var ke=Ce.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(le){return le.color}).attr("fill-opacity",0);Ce.attr("fill",function(le){return le.color}).attr("width",function(le){return le.width}).attr("height",function(le){return le.height}).attr("y",function(le){return le.y}).attr("cursor",function(le){return le.parcatsViewModel.arrangement==="fixed"?"default":le.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),y(ke),Ce.exit().remove(),ye.append("text").attr("class","catlabel").attr("pointer-events","none");var Te=J._fullLayout.paper_bgcolor;_e.select("text.catlabel").attr("text-anchor",function(le){return l(le)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",a.makeTextShadow(Te)).style("fill","rgb(0, 0, 0)").attr("x",function(le){return l(le)?le.width+5:-5}).attr("y",function(le){return le.height/2}).text(function(le){return le.model.categoryLabel}).each(function(le){s.font(T.select(this),le.parcatsViewModel.categorylabelfont),a.convertToTspans(T.select(this),J)}),ye.append("text").attr("class","dimlabel"),_e.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(le){return le.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(le){return le.width/2}).attr("y",-5).text(function(le,ue){return ue===0?le.parcatsViewModel.model.dimensions[le.model.dimensionInd].dimensionLabel:null}).each(function(le){s.font(T.select(this),le.parcatsViewModel.labelfont)}),_e.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",O),_e.exit().remove(),xe.call(T.behavior.drag().origin(function(le){return{x:le.x,y:0}}).on("dragstart",P).on("drag",I).on("dragend",z)),oe.each(function(le){le.traceSelection=T.select(this),le.pathSelection=T.select(this).selectAll("g.paths").selectAll("path.path"),le.dimensionSelection=T.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),oe.exit().remove()}function r($){return $.key}function l($){var J=$.parcatsViewModel.dimensions.length,X=$.parcatsViewModel.dimensions[J-1].model.dimensionInd;return $.model.dimensionInd===X}function o($,J){return $.model.rawColor>J.model.rawColor?1:$.model.rawColor<J.model.rawColor?-1:0}function u($){if(!$.parcatsViewModel.dragDimension&&$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){v.raiseToTop(this),m(T.select(this));var J=c($),X=b($);if($.parcatsViewModel.graphDiv.emit("plotly_hover",{points:J,event:T.event,constraints:X}),$.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var K,ee,ie,ae=T.mouse(this)[0],oe=$.parcatsViewModel.graphDiv,fe=$.parcatsViewModel.trace,ge=oe._fullLayout,ve=ge._paperdiv.node().getBoundingClientRect(),xe=$.parcatsViewModel.graphDiv.getBoundingClientRect();for(ie=0;ie<$.leftXs.length-1;ie++)if($.leftXs[ie]+$.dimWidths[ie]-2<=ae&&ae<=$.leftXs[ie+1]+2){var _e=$.parcatsViewModel.dimensions[ie],ye=$.parcatsViewModel.dimensions[ie+1];K=(_e.x+_e.width+ye.x)/2,ee=($.topYs[ie]+$.topYs[ie+1]+$.height)/2;break}var Ce=$.parcatsViewModel.x+K,ke=$.parcatsViewModel.y+ee,Te=t.mostReadable($.model.color,["black","white"]),le=$.model.count,ue=le/$.parcatsViewModel.model.count,de={countLabel:le,probabilityLabel:ue.toFixed(3)},Le=[];$.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Le.push(["Count:",de.countLabel].join(" ")),$.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Le.push(["P:",de.probabilityLabel].join(" "));var we=Le.join("<br>"),Ee=T.mouse(oe)[0];_.loneHover({trace:fe,x:Ce-ve.left+xe.left,y:ke-ve.top+xe.top,text:we,color:$.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Te,idealAlign:Ee<Ce?"right":"left",hovertemplate:(fe.line||{}).hovertemplate,hovertemplateLabels:de,eventData:[{data:fe._input,fullData:fe,count:le,probability:ue}]},{container:ge._hoverlayer.node(),outerContainer:ge._paper.node(),gd:oe})}}}function p($){if(!$.parcatsViewModel.dragDimension&&(d(T.select(this)),_.loneUnhover($.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),$.parcatsViewModel.pathSelection.sort(o),$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var J=c($),X=b($);$.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:J,event:T.event,constraints:X})}}function c($){for(var J=[],X=U($.parcatsViewModel),K=0;K<$.model.valueInds.length;K++){var ee=$.model.valueInds[K];J.push({curveNumber:X,pointNumber:ee})}return J}function b($){for(var J={},X=$.parcatsViewModel.model.dimensions,K=0;K<X.length;K++){var ee=X[K],ie=ee.categories[$.model.categoryInds[K]];J[ee.containerInd]=ie.categoryValue}return $.model.rawColor!==void 0&&(J.color=$.model.rawColor),J}function g($){if($.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var J=c($),X=b($);$.parcatsViewModel.graphDiv.emit("plotly_click",{points:J,event:T.event,constraints:X})}}function d($){$.attr("fill",function(J){return J.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function m($){$.attr("fill-opacity",.8).attr("stroke",function(J){return t.mostReadable(J.model.color,["black","white"])}).attr("stroke-width",.3)}function x($){$.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function y($){$.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function k($){var J=$.parcatsViewModel.pathSelection,X=$.categoryViewModel.model.dimensionInd,K=$.categoryViewModel.model.categoryInd;return J.filter(function(ee){return ee.model.categoryInds[X]===K&&ee.model.color===$.color})}function f($,J,X){var K=T.select($).datum(),ee=K.categoryViewModel.model,ie=K.parcatsViewModel.graphDiv,ae=T.select($.parentNode).selectAll("rect.bandrect"),oe=[];ae.each(function(ge){k(ge).each(function(ve){Array.prototype.push.apply(oe,c(ve))})});var fe={};fe[ee.dimensionInd]=ee.categoryValue,ie.emit(J,{points:oe,event:X,constraints:fe})}function S($,J,X){var K=T.select($).datum(),ee=K.categoryViewModel.model,ie=K.parcatsViewModel.graphDiv,ae=k(K),oe=[];ae.each(function(ge){Array.prototype.push.apply(oe,c(ge))});var fe={};fe[ee.dimensionInd]=ee.categoryValue,K.rawColor!==void 0&&(fe.color=K.rawColor),ie.emit(J,{points:oe,event:X,constraints:fe})}function M($,J,X){$._fullLayout._calcInverseTransform($);var K,ee,ie=$._fullLayout._invScaleX,ae=$._fullLayout._invScaleY,oe=T.select(X.parentNode).select("rect.catrect"),fe=oe.node().getBoundingClientRect(),ge=oe.datum(),ve=ge.parcatsViewModel,xe=ve.model.dimensions[ge.model.dimensionInd],_e=ve.trace,ye=fe.top+fe.height/2;ve.dimensions.length>1&&xe.displayInd===ve.dimensions.length-1?(K=fe.left,ee="left"):(K=fe.left+fe.width,ee="right");var Ce=ge.model.count,ke=ge.model.categoryLabel,Te=Ce/ge.parcatsViewModel.model.count,le={countLabel:Ce,categoryLabel:ke,probabilityLabel:Te.toFixed(3)},ue=[];ge.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ue.push(["Count:",le.countLabel].join(" ")),ge.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&ue.push(["P("+le.categoryLabel+"):",le.probabilityLabel].join(" "));var de=ue.join("<br>");return{trace:_e,x:ie*(K-J.left),y:ae*(ye-J.top),text:de,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ee,hovertemplate:_e.hovertemplate,hovertemplateLabels:le,eventData:[{data:_e._input,fullData:_e,count:Ce,category:ke,probability:Te}]}}function E($){if(!$.parcatsViewModel.dragDimension&&$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(T.mouse(this)[1]<-1)return;var J,X=$.parcatsViewModel.graphDiv,K=X._fullLayout,ee=K._paperdiv.node().getBoundingClientRect(),ie=$.parcatsViewModel.hoveron,ae=this;ie==="color"?(function(oe){var fe=T.select(oe).datum(),ge=k(fe);m(ge),ge.each(function(){v.raiseToTop(this)}),T.select(oe.parentNode).selectAll("rect.bandrect").filter(function(ve){return ve.color===fe.color}).each(function(){v.raiseToTop(this),T.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(ae),S(ae,"plotly_hover",T.event)):(function(oe){T.select(oe.parentNode).selectAll("rect.bandrect").each(function(fe){var ge=k(fe);m(ge),ge.each(function(){v.raiseToTop(this)})}),T.select(oe.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(ae),f(ae,"plotly_hover",T.event)),$.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ie==="category"?J=M(X,ee,ae):ie==="color"?J=function(oe,fe,ge){oe._fullLayout._calcInverseTransform(oe);var ve,xe,_e=oe._fullLayout._invScaleX,ye=oe._fullLayout._invScaleY,Ce=ge.getBoundingClientRect(),ke=T.select(ge).datum(),Te=ke.categoryViewModel,le=Te.parcatsViewModel,ue=le.model.dimensions[Te.model.dimensionInd],de=le.trace,Le=Ce.y+Ce.height/2;le.dimensions.length>1&&ue.displayInd===le.dimensions.length-1?(ve=Ce.left,xe="left"):(ve=Ce.left+Ce.width,xe="right");var we=Te.model.categoryLabel,Ee=ke.parcatsViewModel.model.count,Oe=0;ke.categoryViewModel.bands.forEach(function(et){et.color===ke.color&&(Oe+=et.count)});var Fe=Te.model.count,pe=0;le.pathSelection.each(function(et){et.model.color===ke.color&&(pe+=et.model.count)});var be=Oe/Ee,Me=Oe/pe,De=Oe/Fe,Ne={countLabel:Ee,categoryLabel:we,probabilityLabel:be.toFixed(3)},Be=[];Te.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Be.push(["Count:",Ne.countLabel].join(" ")),Te.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Be.push("P(color  "+we+"): "+Ne.probabilityLabel),Be.push("P("+we+" | color): "+Me.toFixed(3)),Be.push("P(color | "+we+"): "+De.toFixed(3)));var Ye=Be.join("<br>"),We=t.mostReadable(ke.color,["black","white"]);return{trace:de,x:_e*(ve-fe.left),y:ye*(Le-fe.top),text:Ye,color:ke.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:We,fontSize:10,idealAlign:xe,hovertemplate:de.hovertemplate,hovertemplateLabels:Ne,eventData:[{data:de._input,fullData:de,category:we,count:Ee,probability:be,categorycount:Fe,colorcount:pe,bandcolorcount:Oe}]}}(X,ee,ae):ie==="dimension"&&(J=function(oe,fe,ge){var ve=[];return T.select(ge.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ve.push(M(oe,fe,this))}),ve}(X,ee,ae)),J&&_.loneHover(J,{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:X}))}}function O($){var J=$.parcatsViewModel;J.dragDimension||(d(J.pathSelection),x(J.dimensionSelection.selectAll("g.category")),y(J.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),_.loneUnhover(J.graphDiv._fullLayout._hoverlayer.node()),J.pathSelection.sort(o),J.hoverinfoItems.indexOf("skip")!==-1)||($.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",T.event):f(this,"plotly_unhover",T.event))}function P($){$.parcatsViewModel.arrangement!=="fixed"&&($.dragDimensionDisplayInd=$.model.displayInd,$.initialDragDimensionDisplayInds=$.parcatsViewModel.model.dimensions.map(function(J){return J.displayInd}),$.dragHasMoved=!1,$.dragCategoryDisplayInd=null,T.select(this).selectAll("g.category").select("rect.catrect").each(function(J){var X=T.mouse(this)[0],K=T.mouse(this)[1];-2<=X&&X<=J.width+2&&-2<=K&&K<=J.height+2&&($.dragCategoryDisplayInd=J.model.displayInd,$.initialDragCategoryDisplayInds=$.model.categories.map(function(ee){return ee.displayInd}),J.model.dragY=J.y,v.raiseToTop(this.parentNode),T.select(this.parentNode).selectAll("rect.bandrect").each(function(ee){ee.y<K&&K<=ee.y+ee.height&&($.potentialClickBand=this)}))}),$.parcatsViewModel.dragDimension=$,_.loneUnhover($.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function I($){if($.parcatsViewModel.arrangement!=="fixed"&&($.dragHasMoved=!0,$.dragDimensionDisplayInd!==null)){var J=$.dragDimensionDisplayInd,X=J-1,K=J+1,ee=$.parcatsViewModel.dimensions[J];if($.dragCategoryDisplayInd!==null){var ie=ee.categories[$.dragCategoryDisplayInd];ie.model.dragY+=T.event.dy;var ae=ie.model.dragY,oe=ie.model.displayInd,fe=ee.categories,ge=fe[oe-1],ve=fe[oe+1];ge!==void 0&&ae<ge.y+ge.height/2&&(ie.model.displayInd=ge.model.displayInd,ge.model.displayInd=oe),ve!==void 0&&ae+ie.height>ve.y+ve.height/2&&(ie.model.displayInd=ve.model.displayInd,ve.model.displayInd=oe),$.dragCategoryDisplayInd=ie.model.displayInd}if($.dragCategoryDisplayInd===null||$.parcatsViewModel.arrangement==="freeform"){ee.model.dragX=T.event.x;var xe=$.parcatsViewModel.dimensions[X],_e=$.parcatsViewModel.dimensions[K];xe!==void 0&&ee.model.dragX<xe.x+xe.width&&(ee.model.displayInd=xe.model.displayInd,xe.model.displayInd=J),_e!==void 0&&ee.model.dragX+ee.width>_e.x&&(ee.model.displayInd=_e.model.displayInd,_e.model.displayInd=$.dragDimensionDisplayInd),$.dragDimensionDisplayInd=ee.model.displayInd}H($.parcatsViewModel),V($.parcatsViewModel),j($.parcatsViewModel),R($.parcatsViewModel)}}function z($){if($.parcatsViewModel.arrangement!=="fixed"&&$.dragDimensionDisplayInd!==null){T.select(this).selectAll("text").attr("font-weight","normal");var J={},X=U($.parcatsViewModel),K=$.parcatsViewModel.model.dimensions.map(function(ve){return ve.displayInd}),ee=$.initialDragDimensionDisplayInds.some(function(ve,xe){return ve!==K[xe]});ee&&K.forEach(function(ve,xe){var _e=$.parcatsViewModel.model.dimensions[xe].containerInd;J["dimensions["+_e+"].displayindex"]=ve});var ie=!1;if($.dragCategoryDisplayInd!==null){var ae=$.model.categories.map(function(ve){return ve.displayInd});if(ie=$.initialDragCategoryDisplayInds.some(function(ve,xe){return ve!==ae[xe]})){var oe=$.model.categories.slice().sort(function(ve,xe){return ve.displayInd-xe.displayInd}),fe=oe.map(function(ve){return ve.categoryValue}),ge=oe.map(function(ve){return ve.categoryLabel});J["dimensions["+$.model.containerInd+"].categoryarray"]=[fe],J["dimensions["+$.model.containerInd+"].ticktext"]=[ge],J["dimensions["+$.model.containerInd+"].categoryorder"]="array"}}$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!$.dragHasMoved&&$.potentialClickBand&&($.parcatsViewModel.hoveron==="color"?S($.potentialClickBand,"plotly_click",T.event.sourceEvent):f($.potentialClickBand,"plotly_click",T.event.sourceEvent)),$.model.dragX=null,$.dragCategoryDisplayInd!==null&&($.parcatsViewModel.dimensions[$.dragDimensionDisplayInd].categories[$.dragCategoryDisplayInd].model.dragY=null,$.dragCategoryDisplayInd=null),$.dragDimensionDisplayInd=null,$.parcatsViewModel.dragDimension=null,$.dragHasMoved=null,$.potentialClickBand=null,H($.parcatsViewModel),V($.parcatsViewModel),T.transition().duration(300).ease("cubic-in-out").each(function(){j($.parcatsViewModel,!0),R($.parcatsViewModel,!0)}).each("end",function(){(ee||ie)&&i.restyle($.parcatsViewModel.graphDiv,J,[X])})}}function U($){for(var J,X=$.graphDiv._fullData,K=0;K<X.length;K++)if($.key===X[K].uid){J=K;break}return J}function R($,J){var X;J===void 0&&(J=!1),$.pathSelection.data(function(K){return K.paths},r),(X=$.pathSelection,J?X.transition():X).attr("d",function(K){return K.svgD})}function j($,J){function X(ae){return J?ae.transition():ae}J===void 0&&(J=!1),$.dimensionSelection.data(function(ae){return ae.dimensions},r);var K=$.dimensionSelection.selectAll("g.category").data(function(ae){return ae.categories},r);X($.dimensionSelection).attr("transform",function(ae){return h(ae.x,0)}),X(K).attr("transform",function(ae){return h(0,ae.y)}),K.select(".dimlabel").text(function(ae,oe){return oe===0?ae.parcatsViewModel.model.dimensions[ae.model.dimensionInd].dimensionLabel:null}),K.select(".catlabel").attr("text-anchor",function(ae){return l(ae)?"start":"end"}).attr("x",function(ae){return l(ae)?ae.width+5:-5}).each(function(ae){var oe,fe;l(ae)?(oe=ae.width+5,fe="start"):(oe=-5,fe="end"),T.select(this).selectAll("tspan").attr("x",oe).attr("text-anchor",fe)});var ee=K.selectAll("rect.bandrect").data(function(ae){return ae.bands},r),ie=ee.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ae){return ae.color}).attr("fill-opacity",0);ee.attr("fill",function(ae){return ae.color}).attr("width",function(ae){return ae.width}).attr("height",function(ae){return ae.height}).attr("y",function(ae){return ae.y}),y(ie),ee.each(function(){v.raiseToTop(this)}),ee.exit().remove()}function Z($,J,X){var K,ee=X[0],ie=J.margin||{l:80,r:80,t:100,b:80},ae=ee.trace,oe=ae.domain,fe=J.width,ge=J.height,ve=Math.floor(fe*(oe.x[1]-oe.x[0])),xe=Math.floor(ge*(oe.y[1]-oe.y[0])),_e=oe.x[0]*fe+ie.l,ye=J.height-oe.y[1]*J.height+ie.t,Ce=ae.line.shape;K=ae.hoverinfo==="all"?["count","probability"]:(ae.hoverinfo||"").split("+");var ke={trace:ae,key:ae.uid,model:ee,x:_e,y:ye,width:ve,height:xe,hoveron:ae.hoveron,hoverinfoItems:K,arrangement:ae.arrangement,bundlecolors:ae.bundlecolors,sortpaths:ae.sortpaths,labelfont:ae.labelfont,categorylabelfont:ae.tickfont,pathShape:Ce,dragDimension:null,margin:ie,paths:[],dimensions:[],graphDiv:$,traceSelection:null,pathSelection:null,dimensionSelection:null};return ee.dimensions&&(H(ke),V(ke)),ke}function F($,J,X,K,ee){var ie,ae,oe=[],fe=[];for(ae=0;ae<X.length-1;ae++)ie=w(X[ae]+$[ae],$[ae+1]),oe.push(ie(ee)),fe.push(ie(1-ee));var ge="M "+$[0]+","+J[0];for(ge+="l"+X[0]+",0 ",ae=1;ae<X.length;ae++)ge+="C"+oe[ae-1]+","+J[ae-1]+" "+fe[ae-1]+","+J[ae]+" "+$[ae]+","+J[ae],ge+="l"+X[ae]+",0 ";for(ge+="l0,"+K+" ",ge+="l -"+X[X.length-1]+",0 ",ae=X.length-2;ae>=0;ae--)ge+="C"+fe[ae]+","+(J[ae+1]+K)+" "+oe[ae]+","+(J[ae]+K)+" "+($[ae]+X[ae])+","+(J[ae]+K),ge+="l-"+X[ae]+",0 ";return ge+"Z"}function V($){var J=$.dimensions,X=$.model,K=J.map(function(Ne){return Ne.categories.map(function(Be){return Be.y})}),ee=$.model.dimensions.map(function(Ne){return Ne.categories.map(function(Be){return Be.displayInd})}),ie=$.model.dimensions.map(function(Ne){return Ne.displayInd}),ae=$.dimensions.map(function(Ne){return Ne.model.dimensionInd}),oe=J.map(function(Ne){return Ne.x}),fe=J.map(function(Ne){return Ne.width}),ge=[];for(var ve in X.paths)X.paths.hasOwnProperty(ve)&&ge.push(X.paths[ve]);function xe(Ne){var Be=Ne.categoryInds.map(function(Ye,We){return ee[We][Ye]});return ae.map(function(Ye){return Be[Ye]})}ge.sort(function(Ne,Be){var Ye=xe(Ne),We=xe(Be);return $.sortpaths==="backward"&&(Ye.reverse(),We.reverse()),Ye.push(Ne.valueInds[0]),We.push(Be.valueInds[0]),$.bundlecolors&&(Ye.unshift(Ne.rawColor),We.unshift(Be.rawColor)),Ye<We?-1:Ye>We?1:0});for(var _e=new Array(ge.length),ye=J[0].model.count,Ce=J[0].categories.map(function(Ne){return Ne.height}).reduce(function(Ne,Be){return Ne+Be}),ke=0;ke<ge.length;ke++){var Te,le=ge[ke];Te=ye>0?Ce*(le.count/ye):0;for(var ue,de=new Array(K.length),Le=0;Le<le.categoryInds.length;Le++){var we=le.categoryInds[Le],Ee=ee[Le][we],Oe=ie[Le];de[Oe]=K[Oe][Ee],K[Oe][Ee]+=Te;var Fe=$.dimensions[Oe].categories[Ee],pe=Fe.bands.length,be=Fe.bands[pe-1];if(be===void 0||le.rawColor!==be.rawColor){var Me=be===void 0?0:be.y+be.height;Fe.bands.push({key:Me,color:le.color,rawColor:le.rawColor,height:Te,width:Fe.width,count:le.count,y:Me,categoryViewModel:Fe,parcatsViewModel:$})}else{var De=Fe.bands[pe-1];De.height+=Te,De.count+=le.count}}ue=$.pathShape==="hspline"?F(oe,de,fe,Te,.5):F(oe,de,fe,Te,0),_e[ke]={key:le.valueInds[0],model:le,height:Te,leftXs:oe,topYs:de,dimWidths:fe,svgD:ue,parcatsViewModel:$}}$.paths=_e}function H($){var J=$.model.dimensions.map(function(ae){return{displayInd:ae.displayInd,dimensionInd:ae.dimensionInd}});J.sort(function(ae,oe){return ae.displayInd-oe.displayInd});var X=[];for(var K in J){var ee=J[K].dimensionInd,ie=$.model.dimensions[ee];X.push(te($,ie))}$.dimensions=X}function te($,J){var X,K=$.model.dimensions.length,ee=J.displayInd;X=40+(K>1?($.width-80-16)/(K-1):0)*ee;var ie,ae,oe,fe,ge,ve=[],xe=$.model.maxCats,_e=J.categories.length,ye=J.count,Ce=$.height-8*(xe-1),ke=8*(xe-_e)/2,Te=J.categories.map(function(le){return{displayInd:le.displayInd,categoryInd:le.categoryInd}});for(Te.sort(function(le,ue){return le.displayInd-ue.displayInd}),ge=0;ge<_e;ge++)fe=Te[ge].categoryInd,ae=J.categories[fe],ie=ye>0?ae.count/ye*Ce:0,oe={key:ae.valueInds[0],model:ae,width:16,height:ie,y:ae.dragY!==null?ae.dragY:ke,bands:[],parcatsViewModel:$},ke=ke+ie+8,ve.push(oe);return{key:J.dimensionInd,x:J.dragX!==null?J.dragX:X,y:0,width:16,model:J,categories:ve,parcatsViewModel:$,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}N.exports=function($,J,X,K){n(X,$,K,J)}},45784:function(N,L,e){var T=e(45460);N.exports=function(w,i,_,v){var h=w._fullLayout,s=h._paper,t=h._size;T(w,s,i,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},_,v)}},73362:function(N,L,e){var T=e(50693),w=e(13838),i=e(41940),_=e(27670).Y,v=e(1426).extendFlat,h=e(44467).templatedArray;N.exports={domain:_({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:i({editType:"plot"}),tickfont:i({editType:"plot"}),rangefont:i({editType:"plot"}),dimensions:h("dimension",{label:{valType:"string",editType:"plot"},tickvals:v({},w.tickvals,{editType:"plot"}),ticktext:v({},w.ticktext,{editType:"plot"}),tickformat:v({},w.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:v({editType:"calc"},T("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(N,L,e){var T=e(25706),w=e(39898),i=e(28984).keyFun,_=e(28984).repeat,v=e(71828).sorterAsc,h=e(71828).strTranslate,s=T.bar.snapRatio;function t(M,E){return M*(1-s)+E*s}var a=T.bar.snapClose;function n(M,E){return M*(1-a)+E*a}function r(M,E,O,P){if(function(te,$){for(var J=0;J<$.length;J++)if(te>=$[J][0]&&te<=$[J][1])return!0;return!1}(O,P))return O;var I=M?-1:1,z=0,U=E.length-1;if(I<0){var R=z;z=U,U=R}for(var j=E[z],Z=j,F=z;I*F<I*U;F+=I){var V=F+I,H=E[V];if(I*O<I*n(j,H))return t(j,Z);if(I*O<I*H||V===U)return t(H,j);Z=j,j=H}}function l(M){M.attr("x",-T.bar.captureWidth/2).attr("width",T.bar.captureWidth)}function o(M){M.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(M){if(!M.brush.filterSpecified)return"0,"+M.height;for(var E,O,P,I=p(M.brush.filter.getConsolidated(),M.height),z=[0],U=I.length?I[0][0]:null,R=0;R<I.length;R++)O=(E=I[R])[1]-E[0],z.push(U),z.push(O),(P=R+1)<I.length&&(U=I[P][0]-E[1]);return z.push(M.height),z}function p(M,E){return M.map(function(O){return O.map(function(P){return Math.max(0,P*E)}).sort(v)})}function c(){w.select(document.body).style("cursor",null)}function b(M){M.attr("stroke-dasharray",u)}function g(M,E){var O=w.select(M).selectAll(".highlight, .highlight-shadow");b(E?O.transition().duration(T.bar.snapDuration).each("end",E):O)}function d(M,E){var O,P=M.brush,I=NaN,z={};if(P.filterSpecified){var U=M.height,R=P.filter.getConsolidated(),j=p(R,U),Z=NaN,F=NaN,V=NaN;for(O=0;O<=j.length;O++){var H=j[O];if(H&&H[0]<=E&&E<=H[1]){Z=O;break}if(F=O?O-1:NaN,H&&H[0]>E){V=O;break}}if(I=Z,isNaN(I)&&(I=isNaN(F)||isNaN(V)?isNaN(F)?V:F:E-j[F][1]<j[V][0]-E?F:V),!isNaN(I)){var te=j[I],$=function(ee,ie){var ae=T.bar.handleHeight;if(!(ie>ee[1]+ae||ie<ee[0]-ae))return ie>=.9*ee[1]+.1*ee[0]?"n":ie<=.9*ee[0]+.1*ee[1]?"s":"ns"}(te,E);$&&(z.interval=R[I],z.intervalPix=te,z.region=$)}}if(M.ordinal&&!z.region){var J=M.unitTickvals,X=M.unitToPaddedPx.invert(E);for(O=0;O<J.length;O++){var K=[.25*J[Math.max(O-1,0)]+.75*J[O],.25*J[Math.min(O+1,J.length-1)]+.75*J[O]];if(X>=K[0]&&X<=K[1]){z.clickableOrdinalRange=K;break}}}return z}function m(M,E){w.event.sourceEvent.stopPropagation();var O=E.height-w.mouse(M)[1]-2*T.verticalPadding,P=E.brush.svgBrush;P.wasDragged=!0,P._dragging=!0,P.grabbingBar?P.newExtent=[O-P.grabPoint,O+P.barLength-P.grabPoint].map(E.unitToPaddedPx.invert):P.newExtent=[P.startExtent,E.unitToPaddedPx.invert(O)].sort(v),E.brush.filterSpecified=!0,P.extent=P.stayingIntervals.concat([P.newExtent]),P.brushCallback(E),g(M.parentNode)}function x(M,E){var O=d(E,E.height-w.mouse(M)[1]-2*T.verticalPadding),P="crosshair";O.clickableOrdinalRange?P="pointer":O.region&&(P=O.region+"-resize"),w.select(document.body).style("cursor",P)}function y(M){M.on("mousemove",function(E){w.event.preventDefault(),E.parent.inBrushDrag||x(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||c()}).call(w.behavior.drag().on("dragstart",function(E){(function(O,P){w.event.sourceEvent.stopPropagation();var I=P.height-w.mouse(O)[1]-2*T.verticalPadding,z=P.unitToPaddedPx.invert(I),U=P.brush,R=d(P,I),j=R.interval,Z=U.svgBrush;if(Z.wasDragged=!1,Z.grabbingBar=R.region==="ns",Z.grabbingBar){var F=j.map(P.unitToPaddedPx);Z.grabPoint=I-F[0]-T.verticalPadding,Z.barLength=F[1]-F[0]}Z.clickableOrdinalRange=R.clickableOrdinalRange,Z.stayingIntervals=P.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],j&&(Z.stayingIntervals=Z.stayingIntervals.filter(function(V){return V[0]!==j[0]&&V[1]!==j[1]})),Z.startExtent=R.region?j[R.region==="s"?1:0]:z,P.parent.inBrushDrag=!0,Z.brushStartCallback()})(this,E)}).on("drag",function(E){m(this,E)}).on("dragend",function(E){(function(O,P){var I=P.brush,z=I.filter,U=I.svgBrush;U._dragging||(x(O,P),m(O,P),P.brush.svgBrush.wasDragged=!1),U._dragging=!1,w.event.sourceEvent.stopPropagation();var R=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,P.parent.inBrushDrag=!1,c(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?I.filterSpecified&&P.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],I.filterSpecified=!0):R?(U.extent=U.stayingIntervals,U.extent.length===0&&f(I)):f(I),U.brushCallback(P),g(O.parentNode),void U.brushEndCallback(I.filterSpecified?z.getConsolidated():[]);var j=function(){z.set(z.getConsolidated())};if(P.ordinal){var Z=P.unitTickvals;Z[Z.length-1]<Z[0]&&Z.reverse(),U.newExtent=[r(0,Z,U.newExtent[0],U.stayingIntervals),r(1,Z,U.newExtent[1],U.stayingIntervals)];var F=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(F?[U.newExtent]:[]),U.extent.length||f(I),U.brushCallback(P),F?g(O.parentNode,j):(j(),g(O.parentNode))}else j();U.brushEndCallback(I.filterSpecified?z.getConsolidated():[])})(this,E)}))}function k(M,E){return M[0]-E[0]}function f(M){M.filterSpecified=!1,M.svgBrush.extent=[[-1/0,1/0]]}function S(M){for(var E,O=M.slice(),P=[],I=O.shift();I;){for(E=I.slice();(I=O.shift())&&I[0]<=E[1];)E[1]=Math.max(E[1],I[1]);P.push(E)}return P.length===1&&P[0][0]>P[0][1]&&(P=[]),P}N.exports={makeBrush:function(M,E,O,P,I,z){var U,R=function(){var j,Z,F=[];return{set:function(V){(F=V.map(function(H){return H.slice().sort(v)}).sort(k)).length===1&&F[0][0]===-1/0&&F[0][1]===1/0&&(F=[[0,-1]]),j=S(F),Z=F.reduce(function(H,te){return[Math.min(H[0],te[0]),Math.max(H[1],te[1])]},[1/0,-1/0])},get:function(){return F.slice()},getConsolidated:function(){return j},getBounds:function(){return Z}}}();return R.set(O),{filter:R,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:P,brushCallback:(U=I,function(j){var Z=j.brush,F=function(H){return H.svgBrush.extent.map(function(te){return te.slice()})}(Z),V=F.slice();Z.filter.set(V),U()}),brushEndCallback:z}}},ensureAxisBrush:function(M,E,O){var P=M.selectAll("."+T.cn.axisBrush).data(_,i);P.enter().append("g").classed(T.cn.axisBrush,!0),function(I,z,U){var R=U._context.staticPlot,j=I.selectAll(".background").data(_);j.enter().append("rect").classed("background",!0).call(l).call(o).style("pointer-events",R?"none":"auto").attr("transform",h(0,T.verticalPadding)),j.call(y).attr("height",function(V){return V.height-T.verticalPadding});var Z=I.selectAll(".highlight-shadow").data(_);Z.enter().append("line").classed("highlight-shadow",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width+T.bar.strokeWidth).attr("stroke",z).attr("opacity",T.bar.strokeOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(V){return V.height}).call(b);var F=I.selectAll(".highlight").data(_);F.enter().append("line").classed("highlight",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width-T.bar.strokeWidth).attr("stroke",T.bar.fillColor).attr("opacity",T.bar.fillOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(V){return V.height}).call(b)}(P,E,O)},cleanRanges:function(M,E){if(Array.isArray(M[0])?(M=M.map(function(P){return P.sort(v)}),M=E.multiselect?S(M.sort(k)):[M[0]]):M=[M.sort(v)],E.tickvals){var O=E.tickvals.slice().sort(v);if(!(M=M.map(function(P){var I=[r(0,O,P[0],[]),r(1,O,P[1],[])];if(I[1]>I[0])return I}).filter(function(P){return P})).length)return}return M.length>1?M:M[0]}}},71791:function(N,L,e){N.exports={attributes:e(73362),supplyDefaults:e(3633),calc:e(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(N,L,e){var T=e(39898),w=e(27659).a0,i=e(21341),_=e(77922);L.name="parcoords",L.plot=function(v){var h=w(v.calcdata,"parcoords")[0];h.length&&i(v,h)},L.clean=function(v,h,s,t){var a=t._has&&t._has("parcoords"),n=h._has&&h._has("parcoords");a&&!n&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},L.toSVG=function(v){var h=v._fullLayout._glimages,s=T.select(v).selectAll(".svg-container");s.filter(function(t,a){return a===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,a=t.toDataURL("image/png");h.append("svg:image").attr({xmlns:_.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){T.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(N,L,e){var T=e(71828).isArrayOrTypedArray,w=e(21081),i=e(28984).wrap;N.exports=function(_,v){var h,s;return w.hasColorscale(v,"line")&&T(v.line.color)?(h=v.line.color,s=w.extractOpts(v.line).colorscale,w.calc(_,v,{vals:h,containerStr:"line",cLetter:"c"})):(h=function(t){for(var a=new Array(t),n=0;n<t;n++)a[n]=.5;return a}(v._length),s=[[0,v.line.color],[1,v.line.color]]),i({lineColor:h,cscale:s})}},25706:function(N){N.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(N,L,e){var T=e(71828),w=e(52075).hasColorscale,i=e(1586),_=e(27670).c,v=e(85501),h=e(89298),s=e(73362),t=e(57920),a=e(25706).maxDimensionCount,n=e(94397);function r(l,o,u,p){function c(x,y){return T.coerce(l,o,s.dimensions,x,y)}var b=c("values"),g=c("visible");if(b&&b.length||(g=o.visible=!1),g){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var d=c("range");o._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:d},h.setConvert(o._ax,p.layout),c("multiselect");var m=c("constraintrange");m&&(o.constraintrange=t.cleanRanges(m,o))}}N.exports=function(l,o,u,p){function c(x,y){return T.coerce(l,o,s,x,y)}var b=l.dimensions;Array.isArray(b)&&b.length>a&&(T.log("parcoords traces support up to "+a+" dimensions at the moment"),b.splice(a));var g=v(l,o,{name:"dimensions",layout:p,handleItemDefaults:r}),d=function(x,y,k,f,S){var M=S("line.color",k);if(w(x,"line")&&T.isArrayOrTypedArray(M)){if(M.length)return S("line.colorscale"),i(x,y,f,S,{prefix:"line.",cLetter:"c"}),M.length;y.line.color=k}return 1/0}(l,o,u,p,c);_(o,p,c),Array.isArray(g)&&g.length||(o.visible=!1),n(o,g,"values",d);var m={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};T.coerceFont(c,"labelfont",m),T.coerceFont(c,"tickfont",m),T.coerceFont(c,"rangefont",m),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},1602:function(N,L,e){var T=e(71828).isTypedArray;L.convertTypedArray=function(w){return T(w)?Array.prototype.slice.call(w):w},L.isOrdinal=function(w){return!!w.tickvals},L.isVisible=function(w){return w.visible||!("visible"in w)}},67618:function(N,L,e){var T=e(71791);T.plot=e(21341),N.exports=T},83398:function(N,L,e){var T=e(56068),w=T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),i=T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),_=e(25706).maxDimensionCount,v=e(71828),h=1e-6,s=new Uint8Array(4),t=new Uint8Array(4),a={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function n(d,m,x,y,k){var f=d._gl;f.enable(f.SCISSOR_TEST),f.scissor(m,x,y,k),d.clear({color:[0,0,0,0],depth:1})}function r(d,m,x,y,k,f){var S=f.key;x.drawCompleted||(function(M){M.read({x:0,y:0,width:1,height:1,data:s})}(d),x.drawCompleted=!0),function M(E){var O=Math.min(y,k-E*y);E===0&&(window.cancelAnimationFrame(x.currentRafs[S]),delete x.currentRafs[S],n(d,f.scissorX,f.scissorY,f.scissorWidth,f.viewBoxSize[1])),x.clearOnly||(f.count=2*O,f.offset=2*E*y,m(f),E*y+O<k&&(x.currentRafs[S]=window.requestAnimationFrame(function(){M(E+1)})),x.drawCompleted=!1)}(0)}function l(d,m){for(var x=new Array(256),y=0;y<256;y++)x[y]=d(y/255).concat(m);return x}function o(d,m){return(d>>>8*m)%256/255}function u(d,m,x){for(var y=new Array(8*m),k=0,f=0;f<m;f++)for(var S=0;S<2;S++)for(var M=0;M<4;M++){var E=4*d+M,O=x[64*f+E];E===63&&S===0&&(O*=-1),y[k++]=O}return y}function p(d){var m="0"+d;return m.substr(m.length-2)}function c(d){return d<_?"p"+p(d+1)+"_"+p(d+4):"colors"}function b(d,m,x,y,k,f,S,M,E,O,P,I,z,U){for(var R=[[],[]],j=0;j<64;j++)R[0][j]=j===k?1:0,R[1][j]=j===f?1:0;S*=U,M*=U,E*=U,O*=U;var Z=d.lines.canvasOverdrag*U,F=d.domain,V=d.canvasWidth*U,H=d.canvasHeight*U,te=d.pad.l*U,$=d.pad.b*U,J=d.layoutHeight*U,X=d.layoutWidth*U,K=d.deselectedLines.color,ee=d.deselectedLines.opacity;return v.extendFlat({key:P,resolution:[V,H],viewBoxPos:[S+Z,M],viewBoxSize:[E,O],i0:k,i1:f,dim0A:R[0].slice(0,16),dim0B:R[0].slice(16,32),dim0C:R[0].slice(32,48),dim0D:R[0].slice(48,64),dim1A:R[1].slice(0,16),dim1B:R[1].slice(16,32),dim1C:R[1].slice(32,48),dim1D:R[1].slice(48,64),drwLayer:I,contextColor:[K[0]/255,K[1]/255,K[2]/255,ee!=="auto"?K[3]*ee:Math.max(.00392156862745098,Math.pow(1/d.lines.color.length,.3333333333333333))],scissorX:(y===m?0:S+Z)+(te-Z)+X*F.x[0],scissorWidth:(y===x?V-S+Z:E+.5)+(y===m?S+Z:0),scissorY:M+$+J*F.y[0],scissorHeight:O,viewportX:te-Z+X*F.x[0],viewportY:$+J*F.y[0],viewportWidth:V,viewportHeight:H},z)}function g(d){var m=2047,x=Math.max(0,Math.floor(d[0]*m),0),y=Math.min(m,Math.ceil(d[1]*m),m);return[Math.min(x,y),Math.max(x,y)]}N.exports=function(d,m){var x,y,k,f,S,M=m.context,E=m.pick,O=m.regl,P=O._gl,I=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),z=Math.max(I[0],Math.min(I[1],m.viewModel.plotGlPixelRatio)),U={currentRafs:{},drawCompleted:!0,clearOnly:!1},R=function(H){for(var te={},$=0;$<=_;$+=4)te[c($)]=H.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return te}(O),j=O.texture(a),Z=[];V(m);var F=O({profile:!1,blend:{enable:M,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!M,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:O.prop("scissorX"),y:O.prop("scissorY"),width:O.prop("scissorWidth"),height:O.prop("scissorHeight")}},viewport:{x:O.prop("viewportX"),y:O.prop("viewportY"),width:O.prop("viewportWidth"),height:O.prop("viewportHeight")},dither:!1,vert:w,frag:i,primitive:"lines",lineWidth:z,attributes:R,uniforms:{resolution:O.prop("resolution"),viewBoxPos:O.prop("viewBoxPos"),viewBoxSize:O.prop("viewBoxSize"),dim0A:O.prop("dim0A"),dim1A:O.prop("dim1A"),dim0B:O.prop("dim0B"),dim1B:O.prop("dim1B"),dim0C:O.prop("dim0C"),dim1C:O.prop("dim1C"),dim0D:O.prop("dim0D"),dim1D:O.prop("dim1D"),loA:O.prop("loA"),hiA:O.prop("hiA"),loB:O.prop("loB"),hiB:O.prop("hiB"),loC:O.prop("loC"),hiC:O.prop("hiC"),loD:O.prop("loD"),hiD:O.prop("hiD"),palette:j,contextColor:O.prop("contextColor"),maskTexture:O.prop("maskTexture"),drwLayer:O.prop("drwLayer"),maskHeight:O.prop("maskHeight")},offset:O.prop("offset"),count:O.prop("count")});function V(H){x=H.model,y=H.viewModel,k=y.dimensions.slice(),f=k[0]?k[0].values.length:0;var te=x.lines,$=E?te.color.map(function(X,K){return K/te.color.length}):te.color,J=function(X,K,ee){for(var ie,ae=new Array(X*(_+4)),oe=0,fe=0;fe<X;fe++){for(var ge=0;ge<_;ge++)ae[oe++]=ge<K.length?K[ge].paddedUnitValues[fe]:.5;ae[oe++]=o(fe,2),ae[oe++]=o(fe,1),ae[oe++]=o(fe,0),ae[oe++]=(ie=ee[fe],Math.max(h,Math.min(.999999,ie)))}return ae}(f,k,$);(function(X,K,ee){for(var ie=0;ie<=_;ie+=4)X[c(ie)](u(ie/4,K,ee))})(R,f,J),M||E||(j=O.texture(v.extendFlat({data:l(x.unitToColor,255)},a)))}return{render:function(H,te,$){var J,X,K,ee=H.length,ie=1/0,ae=-1/0;for(J=0;J<ee;J++)H[J].dim0.canvasX<ie&&(ie=H[J].dim0.canvasX,X=J),H[J].dim1.canvasX>ae&&(ae=H[J].dim1.canvasX,K=J);ee===0&&n(O,0,0,x.canvasWidth,x.canvasHeight);var oe=function(le){var ue,de,Le,we=[[],[]];for(Le=0;Le<64;Le++){var Ee=!le&&Le<k.length?k[Le].brush.filter.getBounds():[-1/0,1/0];we[0][Le]=Ee[0],we[1][Le]=Ee[1]}var Oe=new Array(16384);for(ue=0;ue<16384;ue++)Oe[ue]=255;if(!le)for(ue=0;ue<k.length;ue++){var Fe=ue%8,pe=(ue-Fe)/8,be=Math.pow(2,Fe),Me=k[ue].brush.filter.get();if(!(Me.length<2)){var De=g(Me[0])[1];for(de=1;de<Me.length;de++){var Ne=g(Me[de]);for(Le=De+1;Le<Ne[0];Le++)Oe[8*Le+pe]&=~be;De=Math.max(De,Ne[1])}}}var Be={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Oe};return S?S(Be):S=O.texture(Be),{maskTexture:S,maskHeight:2048,loA:we[0].slice(0,16),loB:we[0].slice(16,32),loC:we[0].slice(32,48),loD:we[0].slice(48,64),hiA:we[1].slice(0,16),hiB:we[1].slice(16,32),hiC:we[1].slice(32,48),hiD:we[1].slice(48,64)}}(M);for(J=0;J<ee;J++){var fe=H[J],ge=fe.dim0.crossfilterDimensionIndex,ve=fe.dim1.crossfilterDimensionIndex,xe=fe.canvasX,_e=fe.canvasY,ye=xe+fe.panelSizeX,Ce=fe.plotGlPixelRatio;if(te||!Z[ge]||Z[ge][0]!==xe||Z[ge][1]!==ye){Z[ge]=[xe,ye];var ke=b(x,X,K,J,ge,ve,xe,_e,fe.panelSizeX,fe.panelSizeY,fe.dim0.crossfilterDimensionIndex,M?0:E?2:1,oe,Ce);U.clearOnly=$;var Te=te?x.lines.blockLineCount:f;r(O,F,U,Te,f,ke)}}},readPixel:function(H,te){return O.read({x:H,y:te,width:1,height:1,data:t}),t},readPixels:function(H,te,$,J){var X=new Uint8Array(4*$*J);return O.read({x:H,y:te,width:$,height:J,data:X}),X},destroy:function(){for(var H in d.style["pointer-events"]="none",j.destroy(),S&&S.destroy(),R)R[H].destroy()},update:V}}},94397:function(N){N.exports=function(L,e,T,w){var i,_;for(w||(w=1/0),i=0;i<e.length;i++)(_=e[i]).visible&&(w=Math.min(w,_[T].length));for(w===1/0&&(w=0),L._length=w,i=0;i<e.length;i++)(_=e[i]).visible&&(_._length=w);return w}},17171:function(N,L,e){var T=e(39898),w=e(71828),i=w.isArrayOrTypedArray,_=w.numberFormat,v=e(36652),h=e(89298),s=w.strRotate,t=w.strTranslate,a=e(63893),n=e(91424),r=e(21081),l=e(28984),o=l.keyFun,u=l.repeat,p=l.unwrap,c=e(1602),b=e(25706),g=e(57920),d=e(83398);function m(Z,F,V){return w.aggNums(Z,null,F,V)}function x(Z,F){return k(m(Math.min,Z,F),m(Math.max,Z,F))}function y(Z){var F=Z.range;return F?k(F[0],F[1]):x(Z.values,Z._length)}function k(Z,F){return!isNaN(Z)&&isFinite(Z)||(Z=0),!isNaN(F)&&isFinite(F)||(F=0),Z===F&&(Z===0?(Z-=1,F+=1):(Z*=.9,F*=1.1)),[Z,F]}function f(Z,F,V,H,te){var $,J,X=y(V);return H?T.scale.ordinal().domain(H.map(($=_(V.tickformat),J=te,J?function(K,ee){var ie=J[ee];return ie??$(K)}:$))).range(H.map(function(K){var ee=(K-X[0])/(X[1]-X[0]);return Z-F+ee*(2*F-Z)})):T.scale.linear().domain(X).range([Z-F,F])}function S(Z){if(Z.tickvals){var F=y(Z);return T.scale.ordinal().domain(Z.tickvals).range(Z.tickvals.map(function(V){return(V-F[0])/(F[1]-F[0])}))}}function M(Z){var F=Z.map(function(te){return te[0]}),V=Z.map(function(te){var $=v(te[1]);return T.rgb("rgb("+$[0]+","+$[1]+","+$[2]+")")}),H="rgb".split("").map(function(te){return T.scale.linear().clamp(!0).domain(F).range(V.map(($=te,function(J){return J[$]})));var $});return function(te){return H.map(function($){return $(te)})}}function E(Z){return Z.dimensions.some(function(F){return F.brush.filterSpecified})}function O(Z,F,V){var H=p(F),te=H.trace,$=c.convertTypedArray(H.lineColor),J=te.line,X={color:v(te.unselected.line.color),opacity:te.unselected.line.opacity},K=r.extractOpts(J),ee=K.reversescale?r.flipScale(H.cscale):H.cscale,ie=te.domain,ae=te.dimensions,oe=Z.width,fe=te.labelangle,ge=te.labelside,ve=te.labelfont,xe=te.tickfont,_e=te.rangefont,ye=w.extendDeepNoArrays({},J,{color:$.map(T.scale.linear().domain(y({values:$,range:[K.min,K.max],_length:te._length}))),blockLineCount:b.blockLineCount,canvasOverdrag:b.overdrag*b.canvasPixelRatio}),Ce=Math.floor(oe*(ie.x[1]-ie.x[0])),ke=Math.floor(Z.height*(ie.y[1]-ie.y[0])),Te=Z.margin||{l:80,r:80,t:100,b:80},le=Ce,ue=ke;return{key:V,colCount:ae.filter(c.isVisible).length,dimensions:ae,tickDistance:b.tickDistance,unitToColor:M(ee),lines:ye,deselectedLines:X,labelAngle:fe,labelSide:ge,labelFont:ve,tickFont:xe,rangeFont:_e,layoutWidth:oe,layoutHeight:Z.height,domain:ie,translateX:ie.x[0]*oe,translateY:Z.height-ie.y[1]*Z.height,pad:Te,canvasWidth:le*b.canvasPixelRatio+2*ye.canvasOverdrag,canvasHeight:ue*b.canvasPixelRatio,width:le,height:ue,canvasPixelRatio:b.canvasPixelRatio}}function P(Z,F,V){var H=V.width,te=V.height,$=V.dimensions,J=V.canvasPixelRatio,X=function(oe){return H*oe/Math.max(1,V.colCount-1)},K=b.verticalPadding/te,ee=function(oe,fe){return T.scale.linear().range([fe,oe-fe])}(te,b.verticalPadding),ie={key:V.key,xScale:X,model:V,inBrushDrag:!1},ae={};return ie.dimensions=$.filter(c.isVisible).map(function(oe,fe){var ge=function(Oe,Fe){return T.scale.linear().domain(y(Oe)).range([Fe,1-Fe])}(oe,K),ve=ae[oe.label];ae[oe.label]=(ve||0)+1;var xe=oe.label+(ve?"__"+ve:""),_e=oe.constraintrange,ye=_e&&_e.length;ye&&!i(_e[0])&&(_e=[_e]);var Ce=ye?_e.map(function(Oe){return Oe.map(ge)}):[[-1/0,1/0]],ke=oe.values;ke.length>oe._length&&(ke=ke.slice(0,oe._length));var Te,le=oe.tickvals;function ue(Oe,Fe){return{val:Oe,text:Te[Fe]}}function de(Oe,Fe){return Oe.val-Fe.val}if(i(le)&&le.length){w.isTypedArray(le)&&(le=Array.from(le)),Te=oe.ticktext,i(Te)&&Te.length?Te.length>le.length?Te=Te.slice(0,le.length):le.length>Te.length&&(le=le.slice(0,Te.length)):Te=le.map(_(oe.tickformat));for(var Le=1;Le<le.length;Le++)if(le[Le]<le[Le-1]){for(var we=le.map(ue).sort(de),Ee=0;Ee<le.length;Ee++)le[Ee]=we[Ee].val,Te[Ee]=we[Ee].text;break}}else le=void 0;return ke=c.convertTypedArray(ke),{key:xe,label:oe.label,tickFormat:oe.tickformat,tickvals:le,ticktext:Te,ordinal:c.isOrdinal(oe),multiselect:oe.multiselect,xIndex:fe,crossfilterDimensionIndex:fe,visibleIndex:oe._index,height:te,values:ke,paddedUnitValues:ke.map(ge),unitTickvals:le&&le.map(ge),xScale:X,x:X(fe),canvasX:X(fe)*J,unitToPaddedPx:ee,domainScale:f(te,b.verticalPadding,oe,le,Te),ordinalScale:S(oe),parent:ie,model:V,brush:g.makeBrush(Z,ye,Ce,function(){Z.linePickActive(!1)},function(){var Oe=ie;Oe.focusLayer&&Oe.focusLayer.render(Oe.panels,!0);var Fe=E(Oe);!Z.contextShown()&&Fe?(Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!0),Z.contextShown(!0)):Z.contextShown()&&!Fe&&(Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!0,!0),Z.contextShown(!1))},function(Oe){if(ie.focusLayer.render(ie.panels,!0),ie.pickLayer&&ie.pickLayer.render(ie.panels,!0),Z.linePickActive(!0),F&&F.filterChanged){var Fe=ge.invert,pe=Oe.map(function(be){return be.map(Fe).sort(w.sorterAsc)}).sort(function(be,Me){return be[0]-Me[0]});F.filterChanged(ie.key,oe._index,pe)}})}}),ie}function I(Z){Z.classed(b.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function z(Z,F){var V=F==="top"?1:-1,H=Z*Math.PI/180;return{dir:V,dx:Math.sin(H),dy:Math.cos(H),degrees:Z}}function U(Z,F,V){for(var H=F.panels||(F.panels=[]),te=Z.data(),$=0;$<te.length-1;$++){var J=H[$]||(H[$]={}),X=te[$],K=te[$+1];J.dim0=X,J.dim1=K,J.canvasX=X.canvasX,J.panelSizeX=K.canvasX-X.canvasX,J.panelSizeY=F.model.canvasHeight,J.y=0,J.canvasY=0,J.plotGlPixelRatio=V}}function R(Z,F){return h.tickText(Z._ax,F,!1).text}function j(Z,F){if(Z.ordinal)return"";var V=Z.domainScale.domain(),H=V[F?V.length-1:0];return R(Z.model.dimensions[Z.visibleIndex],H)}N.exports=function(Z,F,V,H){var te=Z._context.staticPlot,$=Z._fullLayout,J=$._toppaper,X=$._glcontainer,K=Z._context.plotGlPixelRatio,ee=Z._fullLayout.paper_bgcolor;(function(Oe){for(var Fe=0;Fe<Oe.length;Fe++)for(var pe=0;pe<Oe[Fe].length;pe++)for(var be=Oe[Fe][pe].trace,Me=be.dimensions,De=0;De<Me.length;De++){var Ne=Me[De].values,Be=Me[De]._ax;Be&&(Be.range?Be.range=k(Be.range[0],Be.range[1]):Be.range=x(Ne,be._length),Be.dtick||(Be.dtick=.01*(Math.abs(Be.range[1]-Be.range[0])||1)),Be.tickformat=Me[De].tickformat,h.calcTicks(Be),Be.cleanRange())}})(F);var ie,ae,oe=(ie=!0,ae=!1,{linePickActive:function(Oe){return arguments.length?ie=!!Oe:ie},contextShown:function(Oe){return arguments.length?ae=!!Oe:ae}}),fe=F.filter(function(Oe){return p(Oe).trace.visible}).map(O.bind(0,V)).map(P.bind(0,oe,H));X.each(function(Oe,Fe){return w.extendFlat(Oe,fe[Fe])});var ge=X.selectAll(".gl-canvas").each(function(Oe){Oe.viewModel=fe[0],Oe.viewModel.plotGlPixelRatio=K,Oe.viewModel.paperColor=ee,Oe.model=Oe.viewModel?Oe.viewModel.model:null}),ve=null;ge.filter(function(Oe){return Oe.pick}).style("pointer-events",te?"none":"auto").on("mousemove",function(Oe){if(oe.linePickActive()&&Oe.lineLayer&&H&&H.hover){var Fe=T.event,pe=this.width,be=this.height,Me=T.mouse(this),De=Me[0],Ne=Me[1];if(De<0||Ne<0||De>=pe||Ne>=be)return;var Be=Oe.lineLayer.readPixel(De,be-1-Ne),Ye=Be[3]!==0,We=Ye?Be[2]+256*(Be[1]+256*Be[0]):null,et={x:De,y:Ne,clientX:Fe.clientX,clientY:Fe.clientY,dataIndex:Oe.model.key,curveNumber:We};We!==ve&&(Ye?H.hover(et):H.unhover&&H.unhover(et),ve=We)}}),ge.style("opacity",function(Oe){return Oe.pick?0:1}),J.style("background","rgba(255, 255, 255, 0)");var xe=J.selectAll("."+b.cn.parcoords).data(fe,o);xe.exit().remove(),xe.enter().append("g").classed(b.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),xe.attr("transform",function(Oe){return t(Oe.model.translateX,Oe.model.translateY)});var _e=xe.selectAll("."+b.cn.parcoordsControlView).data(u,o);_e.enter().append("g").classed(b.cn.parcoordsControlView,!0),_e.attr("transform",function(Oe){return t(Oe.model.pad.l,Oe.model.pad.t)});var ye=_e.selectAll("."+b.cn.yAxis).data(function(Oe){return Oe.dimensions},o);ye.enter().append("g").classed(b.cn.yAxis,!0),_e.each(function(Oe){U(ye,Oe,K)}),ge.each(function(Oe){if(Oe.viewModel){!Oe.lineLayer||H?Oe.lineLayer=d(this,Oe):Oe.lineLayer.update(Oe),(Oe.key||Oe.key===0)&&(Oe.viewModel[Oe.key]=Oe.lineLayer);var Fe=!Oe.context||H;Oe.lineLayer.render(Oe.viewModel.panels,Fe)}}),ye.attr("transform",function(Oe){return t(Oe.xScale(Oe.xIndex),0)}),ye.call(T.behavior.drag().origin(function(Oe){return Oe}).on("drag",function(Oe){var Fe=Oe.parent;oe.linePickActive(!1),Oe.x=Math.max(-b.overdrag,Math.min(Oe.model.width+b.overdrag,T.event.x)),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio,ye.sort(function(pe,be){return pe.x-be.x}).each(function(pe,be){pe.xIndex=be,pe.x=Oe===pe?pe.x:pe.xScale(pe.xIndex),pe.canvasX=pe.x*pe.model.canvasPixelRatio}),U(ye,Fe,K),ye.filter(function(pe){return Math.abs(Oe.xIndex-pe.xIndex)!==0}).attr("transform",function(pe){return t(pe.xScale(pe.xIndex),0)}),T.select(this).attr("transform",t(Oe.x,0)),ye.each(function(pe,be,Me){Me===Oe.parent.key&&(Fe.dimensions[be]=pe)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!E(Fe)),Fe.focusLayer.render&&Fe.focusLayer.render(Fe.panels)}).on("dragend",function(Oe){var Fe=Oe.parent;Oe.x=Oe.xScale(Oe.xIndex),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio,U(ye,Fe,K),T.select(this).attr("transform",function(pe){return t(pe.x,0)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!E(Fe)),Fe.focusLayer&&Fe.focusLayer.render(Fe.panels),Fe.pickLayer&&Fe.pickLayer.render(Fe.panels,!0),oe.linePickActive(!0),H&&H.axesMoved&&H.axesMoved(Fe.key,Fe.dimensions.map(function(pe){return pe.crossfilterDimensionIndex}))})),ye.exit().remove();var Ce=ye.selectAll("."+b.cn.axisOverlays).data(u,o);Ce.enter().append("g").classed(b.cn.axisOverlays,!0),Ce.selectAll("."+b.cn.axis).remove();var ke=Ce.selectAll("."+b.cn.axis).data(u,o);ke.enter().append("g").classed(b.cn.axis,!0),ke.each(function(Oe){var Fe=Oe.model.height/Oe.model.tickDistance,pe=Oe.domainScale,be=pe.domain();T.select(this).call(T.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Fe,Oe.tickFormat).tickValues(Oe.ordinal?be:null).tickFormat(function(Me){return c.isOrdinal(Oe)?Me:R(Oe.model.dimensions[Oe.visibleIndex],Me)}).scale(pe)),n.font(ke.selectAll("text"),Oe.model.tickFont)}),ke.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ke.selectAll("text").style("text-shadow",a.makeTextShadow(ee)).style("cursor","default");var Te=Ce.selectAll("."+b.cn.axisHeading).data(u,o);Te.enter().append("g").classed(b.cn.axisHeading,!0);var le=Te.selectAll("."+b.cn.axisTitle).data(u,o);le.enter().append("text").classed(b.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",te?"none":"auto"),le.text(function(Oe){return Oe.label}).each(function(Oe){var Fe=T.select(this);n.font(Fe,Oe.model.labelFont),a.convertToTspans(Fe,Z)}).attr("transform",function(Oe){var Fe=z(Oe.model.labelAngle,Oe.model.labelSide),pe=b.axisTitleOffset;return(Fe.dir>0?"":t(0,2*pe+Oe.model.height))+s(Fe.degrees)+t(-pe*Fe.dx,-pe*Fe.dy)}).attr("text-anchor",function(Oe){var Fe=z(Oe.model.labelAngle,Oe.model.labelSide);return 2*Math.abs(Fe.dx)>Math.abs(Fe.dy)?Fe.dir*Fe.dx<0?"start":"end":"middle"});var ue=Ce.selectAll("."+b.cn.axisExtent).data(u,o);ue.enter().append("g").classed(b.cn.axisExtent,!0);var de=ue.selectAll("."+b.cn.axisExtentTop).data(u,o);de.enter().append("g").classed(b.cn.axisExtentTop,!0),de.attr("transform",t(0,-b.axisExtentOffset));var Le=de.selectAll("."+b.cn.axisExtentTopText).data(u,o);Le.enter().append("text").classed(b.cn.axisExtentTopText,!0).call(I),Le.text(function(Oe){return j(Oe,!0)}).each(function(Oe){n.font(T.select(this),Oe.model.rangeFont)});var we=ue.selectAll("."+b.cn.axisExtentBottom).data(u,o);we.enter().append("g").classed(b.cn.axisExtentBottom,!0),we.attr("transform",function(Oe){return t(0,Oe.model.height+b.axisExtentOffset)});var Ee=we.selectAll("."+b.cn.axisExtentBottomText).data(u,o);Ee.enter().append("text").classed(b.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(I),Ee.text(function(Oe){return j(Oe,!1)}).each(function(Oe){n.font(T.select(this),Oe.model.rangeFont)}),g.ensureAxisBrush(Ce,ee,Z)}},21341:function(N,L,e){var T=e(17171),w=e(79749),i=e(1602).isVisible,_={};function v(h,s,t){var a=s.indexOf(t),n=h.indexOf(a);return n===-1&&(n+=s.length),n}(N.exports=function(h,s){var t=h._fullLayout;if(w(h,[],_)){var a={},n={},r={},l={},o=t._size;s.forEach(function(u,p){var c=u[0].trace;r[p]=c.index;var b=l[p]=c._fullInput.index;a[p]=h.data[b].dimensions,n[p]=h.data[b].dimensions.slice()}),T(h,s,{width:o.w,height:o.h,margin:{t:o.t,r:o.r,b:o.b,l:o.l}},{filterChanged:function(u,p,c){var b=n[u][p],g=c.map(function(f){return f.slice()}),d="dimensions["+p+"].constraintrange",m=t._tracePreGUI[h._fullData[r[u]]._fullInput.uid];if(m[d]===void 0){var x=b.constraintrange;m[d]=x||null}var y=h._fullData[r[u]].dimensions[p];g.length?(g.length===1&&(g=g[0]),b.constraintrange=g,y.constraintrange=g.slice(),g=[g]):(delete b.constraintrange,delete y.constraintrange,g=null);var k={};k[d]=g,h.emit("plotly_restyle",[k,[l[u]]])},hover:function(u){h.emit("plotly_hover",u)},unhover:function(u){h.emit("plotly_unhover",u)},axesMoved:function(u,p){var c=function(b,g){return function(d,m){return v(b,g,d)-v(b,g,m)}}(p,n[u].filter(i));a[u].sort(c),n[u].filter(function(b){return!i(b)}).sort(function(b){return n[u].indexOf(b)}).forEach(function(b){a[u].splice(a[u].indexOf(b),1),a[u].splice(n[u].indexOf(b),0,b)}),h.emit("plotly_restyle",[{dimensions:[a[u]]},[l[u]]])}})}}).reglPrecompiled=_},34e3:function(N,L,e){var T=e(9012),w=e(27670).Y,i=e(41940),_=e(22399),v=e(5386).fF,h=e(5386).si,s=e(1426).extendFlat,t=e(79952).u,a=i({editType:"plot",arrayOk:!0,colorEditType:"plot"});N.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},T.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:v({},{keys:["label","color","value","percent","text"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},a,{}),outsidetextfont:s({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:w({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(N,L,e){var T=e(74875);L.name="pie",L.plot=function(w,i,_,v){T.plotBasePlot(L.name,w,i,_,v)},L.clean=function(w,i,_,v){T.cleanBasePlot(L.name,w,i,_,v)}},32354:function(N,L,e){var T=e(92770),w=e(84267),i=e(7901),_={};function v(s){return function(t,a){return!!t&&!!(t=w(t)).isValid()&&(t=i.addOpacity(t,t.getAlpha()),s[a]||(s[a]=t),t)}}function h(s,t){var a,n=JSON.stringify(s),r=t[n];if(!r){for(r=s.slice(),a=0;a<s.length;a++)r.push(w(s[a]).lighten(20).toHexString());for(a=0;a<s.length;a++)r.push(w(s[a]).darken(20).toHexString());t[n]=r}return r}N.exports={calc:function(s,t){var a,n,r=[],l=s._fullLayout,o=l.hiddenlabels||[],u=t.labels,p=t.marker.colors||[],c=t.values,b=t._length,g=t._hasValues&&b;if(t.dlabel)for(u=new Array(b),a=0;a<b;a++)u[a]=String(t.label0+a*t.dlabel);var d={},m=v(l["_"+t.type+"colormap"]),x=0,y=!1;for(a=0;a<b;a++){var k,f,S;if(g){if(k=c[a],!T(k))continue;k=+k}else k=1;(f=u[a])!==void 0&&f!==""||(f=a);var M=d[f=String(f)];M===void 0?(d[f]=r.length,(S=o.indexOf(f)!==-1)||(x+=k),r.push({v:k,label:f,color:m(p[a],f),i:a,pts:[a],hidden:S})):(y=!0,(n=r[M]).v+=k,n.pts.push(a),n.hidden||(x+=k),n.color===!1&&p[a]&&(n.color=m(p[a],f)))}return r=r.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?y:t.sort)&&r.sort(function(E,O){return O.v-E.v}),r[0]&&(r[0].vTotal=x),r},crossTraceCalc:function(s,t){var a=(t||{}).type;a||(a="pie");var n=s._fullLayout,r=s.calcdata,l=n[a+"colorway"],o=n["_"+a+"colormap"];n["extend"+a+"colors"]&&(l=h(l,_));for(var u=0,p=0;p<r.length;p++){var c=r[p];if(c[0].trace.type===a)for(var b=0;b<c.length;b++){var g=c[b];g.color===!1&&(o[g.label]?g.color=o[g.label]:(o[g.label]=g.color=l[u%l.length],u++))}}},makePullColorFn:v,generateExtendedColors:h}},37434:function(N,L,e){var T=e(92770),w=e(71828),i=e(34e3),_=e(27670).c,v=e(90769).handleText,h=e(71828).coercePattern;function s(a,n){var r=w.isArrayOrTypedArray(a),l=w.isArrayOrTypedArray(n),o=Math.min(r?a.length:1/0,l?n.length:1/0);if(isFinite(o)||(o=0),o&&l){for(var u,p=0;p<o;p++){var c=n[p];if(T(c)&&c>0){u=!0;break}}u||(o=0)}return{hasLabels:r,hasValues:l,len:o}}function t(a,n,r,l,o){l("marker.line.width")&&l("marker.line.color",o?void 0:r.paper_bgcolor);var u=l("marker.colors");h(l,"marker.pattern",u),a.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=a.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=r.paper_bgcolor)}N.exports={handleLabelsAndValues:s,handleMarkerDefaults:t,supplyDefaults:function(a,n,r,l){function o(y,k){return w.coerce(a,n,i,y,k)}var u=s(o("labels"),o("values")),p=u.len;if(n._hasLabels=u.hasLabels,n._hasValues=u.hasValues,!n._hasLabels&&n._hasValues&&(o("label0"),o("dlabel")),p){n._length=p,t(a,n,l,o,!0),o("scalegroup");var c,b=o("text"),g=o("texttemplate");if(g||(c=o("textinfo",w.isArrayOrTypedArray(b)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),g||c&&c!=="none"){var d=o("textposition");v(a,n,l,o,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(d)||d==="auto"||d==="outside")&&o("automargin"),(d==="inside"||d==="auto"||Array.isArray(d))&&o("insidetextorientation")}_(n,l,o);var m=o("hole");if(o("title.text")){var x=o("title.position",m?"middle center":"top center");m||x!=="middle center"||(n.title.position="top center"),w.coerceFont(o,"title.font",l.font)}o("sort"),o("direction"),o("rotation"),o("pull")}else n.visible=!1}}},20007:function(N,L,e){var T=e(23469).appendArrayMultiPointValues;N.exports=function(w,i){var _={curveNumber:i.index,pointNumbers:w.pts,data:i._input,fullData:i,label:w.label,color:w.color,value:w.v,percent:w.percent,text:w.text,bbox:w.bbox,v:w.v};return w.pts.length===1&&(_.pointNumber=_.i=w.pts[0]),T(_,i,w.pts),i.type==="funnelarea"&&(delete _.v,delete _.i),_}},22209:function(N,L,e){var T=e(91424),w=e(7901);N.exports=function(i,_,v,h){var s=v.marker.pattern;s&&s.shape?T.pointStyle(i,v,h,_):w.fill(i,_.color)}},53581:function(N,L,e){var T=e(71828);function w(i){return i.indexOf("e")!==-1?i.replace(/[.]?0+e/,"e"):i.indexOf(".")!==-1?i.replace(/[.]?0+$/,""):i}L.formatPiePercent=function(i,_){var v=w((100*i).toPrecision(3));return T.numSeparate(v,_)+"%"},L.formatPieValue=function(i,_){var v=w(i.toPrecision(10));return T.numSeparate(v,_)},L.getFirstFilled=function(i,_){if(T.isArrayOrTypedArray(i))for(var v=0;v<_.length;v++){var h=i[_[v]];if(h||h===0||h==="")return h}},L.castOption=function(i,_){return T.isArrayOrTypedArray(i)?L.getFirstFilled(i,_):i||void 0},L.getRotationAngle=function(i){return(i==="auto"?0:i)*Math.PI/180}},58810:function(N,L,e){N.exports={attributes:e(34e3),supplyDefaults:e(37434).supplyDefaults,supplyLayoutDefaults:e(92097),layoutAttributes:e(92774),calc:e(32354).calc,crossTraceCalc:e(32354).crossTraceCalc,plot:e(14575).plot,style:e(68357),styleOne:e(63463),moduleType:"trace",name:"pie",basePlotModule:e(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(N){N.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(N,L,e){var T=e(71828),w=e(92774);N.exports=function(i,_){function v(h,s){return T.coerce(i,_,w,h,s)}v("hiddenlabels"),v("piecolorway",_.colorway),v("extendpiecolors")}},14575:function(N,L,e){var T=e(39898),w=e(74875),i=e(30211),_=e(7901),v=e(91424),h=e(71828),s=h.strScale,t=h.strTranslate,a=e(63893),n=e(72597),r=n.recordMinTextSize,l=n.clearMinTextSize,o=e(97313).TEXTPAD,u=e(53581),p=e(20007),c=e(71828).isValidTextValue;function b(Z,F,V){var H=V[0],te=H.cx,$=H.cy,J=H.trace,X=J.type==="funnelarea";"_hasHoverLabel"in J||(J._hasHoverLabel=!1),"_hasHoverEvent"in J||(J._hasHoverEvent=!1),Z.on("mouseover",function(K){var ee=F._fullLayout,ie=F._fullData[J.index];if(!F._dragging&&ee.hovermode!==!1){var ae=ie.hoverinfo;if(Array.isArray(ae)&&(ae=i.castHoverinfo({hoverinfo:[u.castOption(ae,K.pts)],_module:J._module},ee,0)),ae==="all"&&(ae="label+text+value+percent+name"),ie.hovertemplate||ae!=="none"&&ae!=="skip"&&ae){var oe=K.rInscribed||0,fe=te+K.pxmid[0]*(1-oe),ge=$+K.pxmid[1]*(1-oe),ve=ee.separators,xe=[];if(ae&&ae.indexOf("label")!==-1&&xe.push(K.label),K.text=u.castOption(ie.hovertext||ie.text,K.pts),ae&&ae.indexOf("text")!==-1){var _e=K.text;h.isValidTextValue(_e)&&xe.push(_e)}K.value=K.v,K.valueLabel=u.formatPieValue(K.v,ve),ae&&ae.indexOf("value")!==-1&&xe.push(K.valueLabel),K.percent=K.v/H.vTotal,K.percentLabel=u.formatPiePercent(K.percent,ve),ae&&ae.indexOf("percent")!==-1&&xe.push(K.percentLabel);var ye=ie.hoverlabel,Ce=ye.font,ke=[];i.loneHover({trace:J,x0:fe-oe*H.r,x1:fe+oe*H.r,y:ge,_x0:X?te+K.TL[0]:fe-oe*H.r,_x1:X?te+K.TR[0]:fe+oe*H.r,_y0:X?$+K.TL[1]:ge-oe*H.r,_y1:X?$+K.BL[1]:ge+oe*H.r,text:xe.join("<br>"),name:ie.hovertemplate||ae.indexOf("name")!==-1?ie.name:void 0,idealAlign:K.pxmid[0]<0?"left":"right",color:u.castOption(ye.bgcolor,K.pts)||K.color,borderColor:u.castOption(ye.bordercolor,K.pts),fontFamily:u.castOption(Ce.family,K.pts),fontSize:u.castOption(Ce.size,K.pts),fontColor:u.castOption(Ce.color,K.pts),nameLength:u.castOption(ye.namelength,K.pts),textAlign:u.castOption(ye.align,K.pts),hovertemplate:u.castOption(ie.hovertemplate,K.pts),hovertemplateLabels:K,eventData:[p(K,ie)]},{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:F,inOut_bbox:ke}),K.bbox=ke[0],J._hasHoverLabel=!0}J._hasHoverEvent=!0,F.emit("plotly_hover",{points:[p(K,ie)],event:T.event})}}),Z.on("mouseout",function(K){var ee=F._fullLayout,ie=F._fullData[J.index],ae=T.select(this).datum();J._hasHoverEvent&&(K.originalEvent=T.event,F.emit("plotly_unhover",{points:[p(ae,ie)],event:T.event}),J._hasHoverEvent=!1),J._hasHoverLabel&&(i.loneUnhover(ee._hoverlayer.node()),J._hasHoverLabel=!1)}),Z.on("click",function(K){var ee=F._fullLayout,ie=F._fullData[J.index];F._dragging||ee.hovermode===!1||(F._hoverdata=[p(K,ie)],i.click(F,T.event))})}function g(Z,F,V){var H=u.castOption(Z.insidetextfont.color,F.pts);!H&&Z._input.textfont&&(H=u.castOption(Z._input.textfont.color,F.pts));var te=u.castOption(Z.insidetextfont.family,F.pts)||u.castOption(Z.textfont.family,F.pts)||V.family,$=u.castOption(Z.insidetextfont.size,F.pts)||u.castOption(Z.textfont.size,F.pts)||V.size;return{color:H||_.contrast(F.color),family:te,size:$}}function d(Z,F){for(var V,H,te=0;te<Z.length;te++)if((H=(V=Z[te][0]).trace).title.text){var $=H.title.text;H._meta&&($=h.templateString($,H._meta));var J=v.tester.append("text").attr("data-notex",1).text($).call(v.font,H.title.font).call(a.convertToTspans,F),X=v.bBox(J.node(),!0);V.titleBox={width:X.width,height:X.height},J.remove()}}function m(Z,F,V){var H=V.r||F.rpx1,te=F.rInscribed;if(F.startangle===F.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var $,J=F.ring,X=J===1&&Math.abs(F.startangle-F.stopangle)===2*Math.PI,K=F.halfangle,ee=F.midangle,ie=V.trace.insidetextorientation,ae=ie==="horizontal",oe=ie==="tangential",fe=ie==="radial",ge=ie==="auto",ve=[];if(!ge){var xe,_e=function(ue,de){if(function(Oe,Fe){var pe=Oe.startangle,be=Oe.stopangle;return pe>Fe&&Fe>be||pe<Fe&&Fe<be}(F,ue)){var Le=Math.abs(ue-F.startangle),we=Math.abs(ue-F.stopangle),Ee=Le<we?Le:we;($=de==="tan"?y(Z,H,J,Ee,0):x(Z,H,J,Ee,Math.PI/2)).textPosAngle=ue,ve.push($)}};if(ae||oe){for(xe=4;xe>=-4;xe-=2)_e(Math.PI*xe,"tan");for(xe=4;xe>=-4;xe-=2)_e(Math.PI*(xe+1),"tan")}if(ae||fe){for(xe=4;xe>=-4;xe-=2)_e(Math.PI*(xe+1.5),"rad");for(xe=4;xe>=-4;xe-=2)_e(Math.PI*(xe+.5),"rad")}}if(X||ge||ae){var ye=Math.sqrt(Z.width*Z.width+Z.height*Z.height);if(($={scale:te*H*2/ye,rCenter:1-te,rotate:0}).textPosAngle=(F.startangle+F.stopangle)/2,$.scale>=1)return $;ve.push($)}(ge||fe)&&(($=x(Z,H,J,K,ee)).textPosAngle=(F.startangle+F.stopangle)/2,ve.push($)),(ge||oe)&&(($=y(Z,H,J,K,ee)).textPosAngle=(F.startangle+F.stopangle)/2,ve.push($));for(var Ce=0,ke=0,Te=0;Te<ve.length;Te++){var le=ve[Te].scale;if(ke<le&&(ke=le,Ce=Te),!ge&&ke>=1)break}return ve[Ce]}function x(Z,F,V,H,te){F=Math.max(0,F-2*o);var $=Z.width/Z.height,J=S($,H,F,V);return{scale:2*J/Z.height,rCenter:k($,J/F),rotate:f(te)}}function y(Z,F,V,H,te){F=Math.max(0,F-2*o);var $=Z.height/Z.width,J=S($,H,F,V);return{scale:2*J/Z.width,rCenter:k($,J/F),rotate:f(te+Math.PI/2)}}function k(Z,F){return Math.cos(F)-Z*F}function f(Z){return(180/Math.PI*Z+720)%180-90}function S(Z,F,V,H){var te=Z+1/(2*Math.tan(F));return V*Math.min(1/(Math.sqrt(te*te+.5)+te),H/(Math.sqrt(Z*Z+H/2)+Z))}function M(Z,F){return Z.v!==F.vTotal||F.trace.hole?Math.min(1/(1+1/Math.sin(Z.halfangle)),Z.ring/2):1}function E(Z,F){var V=F.pxmid[0],H=F.pxmid[1],te=Z.width/2,$=Z.height/2;return V<0&&(te*=-1),H<0&&($*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs($)*(te>0?1:-1)/2,y:$/(1+V*V/(H*H)),outside:!0}}function O(Z,F){var V,H,te,$=Z.trace,J={x:Z.cx,y:Z.cy},X={tx:0,ty:0};X.ty+=$.title.font.size,te=I($),$.title.position.indexOf("top")!==-1?(J.y-=(1+te)*Z.r,X.ty-=Z.titleBox.height):$.title.position.indexOf("bottom")!==-1&&(J.y+=(1+te)*Z.r);var K,ee=Z.r/((K=Z.trace.aspectratio)===void 0?1:K),ie=F.w*($.domain.x[1]-$.domain.x[0])/2;return $.title.position.indexOf("left")!==-1?(ie+=ee,J.x-=(1+te)*ee,X.tx+=Z.titleBox.width/2):$.title.position.indexOf("center")!==-1?ie*=2:$.title.position.indexOf("right")!==-1&&(ie+=ee,J.x+=(1+te)*ee,X.tx-=Z.titleBox.width/2),V=ie/Z.titleBox.width,H=P(Z,F)/Z.titleBox.height,{x:J.x,y:J.y,scale:Math.min(V,H),tx:X.tx,ty:X.ty}}function P(Z,F){var V=Z.trace,H=F.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(Z.titleBox.height,H/2)}function I(Z){var F,V=Z.pull;if(!V)return 0;if(h.isArrayOrTypedArray(V))for(V=0,F=0;F<Z.pull.length;F++)Z.pull[F]>V&&(V=Z.pull[F]);return V}function z(Z,F){for(var V=[],H=0;H<Z.length;H++){var te=Z[H][0],$=te.trace,J=$.domain,X=F.w*(J.x[1]-J.x[0]),K=F.h*(J.y[1]-J.y[0]);$.title.text&&$.title.position!=="middle center"&&(K-=P(te,F));var ee=X/2,ie=K/2;$.type!=="funnelarea"||$.scalegroup||(ie/=$.aspectratio),te.r=Math.min(ee,ie)/(1+I($)),te.cx=F.l+F.w*($.domain.x[1]+$.domain.x[0])/2,te.cy=F.t+F.h*(1-$.domain.y[0])-K/2,$.title.text&&$.title.position.indexOf("bottom")!==-1&&(te.cy-=P(te,F)),$.scalegroup&&V.indexOf($.scalegroup)===-1&&V.push($.scalegroup)}(function(ae,oe){for(var fe,ge,ve,xe=0;xe<oe.length;xe++){var _e=1/0,ye=oe[xe];for(ge=0;ge<ae.length;ge++)if((ve=(fe=ae[ge][0]).trace).scalegroup===ye){var Ce;if(ve.type==="pie")Ce=fe.r*fe.r;else if(ve.type==="funnelarea"){var ke,Te;ve.aspectratio>1?Te=(ke=fe.r)/ve.aspectratio:ke=(Te=fe.r)*ve.aspectratio,Ce=(ke*=(1+ve.baseratio)/2)*Te}_e=Math.min(_e,Ce/fe.vTotal)}for(ge=0;ge<ae.length;ge++)if((ve=(fe=ae[ge][0]).trace).scalegroup===ye){var le=_e*fe.vTotal;ve.type==="funnelarea"&&(le/=(1+ve.baseratio)/2,le/=ve.aspectratio),fe.r=Math.sqrt(le)}}})(Z,V)}function U(Z,F){return[Z*Math.sin(F),-Z*Math.cos(F)]}function R(Z,F,V){var H=Z._fullLayout,te=V.trace,$=te.texttemplate,J=te.textinfo;if(!$&&J&&J!=="none"){var X,K=J.split("+"),ee=function(Ce){return K.indexOf(Ce)!==-1},ie=ee("label"),ae=ee("text"),oe=ee("value"),fe=ee("percent"),ge=H.separators;if(X=ie?[F.label]:[],ae){var ve=u.getFirstFilled(te.text,F.pts);c(ve)&&X.push(ve)}oe&&X.push(u.formatPieValue(F.v,ge)),fe&&X.push(u.formatPiePercent(F.v/V.vTotal,ge)),F.text=X.join("<br>")}if($){var xe=h.castOption(te,F.i,"texttemplate");if(xe){var _e=function(Ce){return{label:Ce.label,value:Ce.v,valueLabel:u.formatPieValue(Ce.v,H.separators),percent:Ce.v/V.vTotal,percentLabel:u.formatPiePercent(Ce.v/V.vTotal,H.separators),color:Ce.color,text:Ce.text,customdata:h.castOption(te,Ce.i,"customdata")}}(F),ye=u.getFirstFilled(te.text,F.pts);(c(ye)||ye==="")&&(_e.text=ye),F.text=h.texttemplateString(xe,_e,Z._fullLayout._d3locale,_e,te._meta||{})}else F.text=""}}function j(Z,F){var V=Z.rotate*Math.PI/180,H=Math.cos(V),te=Math.sin(V),$=(F.left+F.right)/2,J=(F.top+F.bottom)/2;Z.textX=$*H-J*te,Z.textY=$*te+J*H,Z.noCenter=!0}N.exports={plot:function(Z,F){var V=Z._context.staticPlot,H=Z._fullLayout,te=H._size;l("pie",H),d(F,Z),z(F,te);var $=h.makeTraceGroups(H._pielayer,F,"trace").each(function(J){var X=T.select(this),K=J[0],ee=K.trace;(function(ie){var ae,oe,fe,ge=ie[0],ve=ge.r,xe=ge.trace,_e=u.getRotationAngle(xe.rotation),ye=2*Math.PI/ge.vTotal,Ce="px0",ke="px1";if(xe.direction==="counterclockwise"){for(ae=0;ae<ie.length&&ie[ae].hidden;ae++);if(ae===ie.length)return;_e+=ye*ie[ae].v,ye*=-1,Ce="px1",ke="px0"}for(fe=U(ve,_e),ae=0;ae<ie.length;ae++)(oe=ie[ae]).hidden||(oe[Ce]=fe,oe.startangle=_e,_e+=ye*oe.v/2,oe.pxmid=U(ve,_e),oe.midangle=_e,fe=U(ve,_e+=ye*oe.v/2),oe.stopangle=_e,oe[ke]=fe,oe.largeArc=oe.v>ge.vTotal/2?1:0,oe.halfangle=Math.PI*Math.min(oe.v/ge.vTotal,.5),oe.ring=1-xe.hole,oe.rInscribed=M(oe,ge))})(J),X.attr("stroke-linejoin","round"),X.each(function(){var ie=T.select(this).selectAll("g.slice").data(J);ie.enter().append("g").classed("slice",!0),ie.exit().remove();var ae=[[[],[]],[[],[]]],oe=!1;ie.each(function(ke,Te){if(ke.hidden)T.select(this).selectAll("path,g").remove();else{ke.pointNumber=ke.i,ke.curveNumber=ee.index,ae[ke.pxmid[1]<0?0:1][ke.pxmid[0]<0?0:1].push(ke);var le=K.cx,ue=K.cy,de=T.select(this),Le=de.selectAll("path.surface").data([ke]);if(Le.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),de.call(b,Z,J),ee.pull){var we=+u.castOption(ee.pull,ke.pts)||0;we>0&&(le+=we*ke.pxmid[0],ue+=we*ke.pxmid[1])}ke.cxFinal=le,ke.cyFinal=ue;var Ee=ee.hole;if(ke.v===K.vTotal){var Oe="M"+(le+ke.px0[0])+","+(ue+ke.px0[1])+De(ke.px0,ke.pxmid,!0,1)+De(ke.pxmid,ke.px0,!0,1)+"Z";Ee?Le.attr("d","M"+(le+Ee*ke.px0[0])+","+(ue+Ee*ke.px0[1])+De(ke.px0,ke.pxmid,!1,Ee)+De(ke.pxmid,ke.px0,!1,Ee)+"Z"+Oe):Le.attr("d",Oe)}else{var Fe=De(ke.px0,ke.px1,!0,1);if(Ee){var pe=1-Ee;Le.attr("d","M"+(le+Ee*ke.px1[0])+","+(ue+Ee*ke.px1[1])+De(ke.px1,ke.px0,!1,Ee)+"l"+pe*ke.px0[0]+","+pe*ke.px0[1]+Fe+"Z")}else Le.attr("d","M"+le+","+ue+"l"+ke.px0[0]+","+ke.px0[1]+Fe+"Z")}R(Z,ke,K);var be=u.castOption(ee.textposition,ke.pts),Me=de.selectAll("g.slicetext").data(ke.text&&be!=="none"?[0]:[]);Me.enter().append("g").classed("slicetext",!0),Me.exit().remove(),Me.each(function(){var Ne=h.ensureSingle(T.select(this),"text","",function(Mt){Mt.attr("data-notex",1)}),Be=h.ensureUniformFontSize(Z,be==="outside"?function(Mt,_t,it){return{color:u.castOption(Mt.outsidetextfont.color,_t.pts)||u.castOption(Mt.textfont.color,_t.pts)||it.color,family:u.castOption(Mt.outsidetextfont.family,_t.pts)||u.castOption(Mt.textfont.family,_t.pts)||it.family,size:u.castOption(Mt.outsidetextfont.size,_t.pts)||u.castOption(Mt.textfont.size,_t.pts)||it.size}}(ee,ke,H.font):g(ee,ke,H.font));Ne.text(ke.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,Be).call(a.convertToTspans,Z);var Ye,We=v.bBox(Ne.node());if(be==="outside")Ye=E(We,ke);else if(Ye=m(We,ke,K),be==="auto"&&Ye.scale<1){var et=h.ensureUniformFontSize(Z,ee.outsidetextfont);Ne.call(v.font,et),Ye=E(We=v.bBox(Ne.node()),ke)}var ft=Ye.textPosAngle,ht=ft===void 0?ke.pxmid:U(K.r,ft);if(Ye.targetX=le+ht[0]*Ye.rCenter+(Ye.x||0),Ye.targetY=ue+ht[1]*Ye.rCenter+(Ye.y||0),j(Ye,We),Ye.outside){var mt=Ye.targetY;ke.yLabelMin=mt-We.height/2,ke.yLabelMid=mt,ke.yLabelMax=mt+We.height/2,ke.labelExtraX=0,ke.labelExtraY=0,oe=!0}Ye.fontSize=Be.size,r(ee.type,Ye,H),J[Te].transform=Ye,h.setTransormAndDisplay(Ne,Ye)})}function De(Ne,Be,Ye,We){var et=We*(Be[0]-Ne[0]),ft=We*(Be[1]-Ne[1]);return"a"+We*K.r+","+We*K.r+" 0 "+ke.largeArc+(Ye?" 1 ":" 0 ")+et+","+ft}});var fe=T.select(this).selectAll("g.titletext").data(ee.title.text?[0]:[]);if(fe.enter().append("g").classed("titletext",!0),fe.exit().remove(),fe.each(function(){var ke,Te=h.ensureSingle(T.select(this),"text","",function(ue){ue.attr("data-notex",1)}),le=ee.title.text;ee._meta&&(le=h.templateString(le,ee._meta)),Te.text(le).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,ee.title.font).call(a.convertToTspans,Z),ke=ee.title.position==="middle center"?function(ue){var de=Math.sqrt(ue.titleBox.width*ue.titleBox.width+ue.titleBox.height*ue.titleBox.height);return{x:ue.cx,y:ue.cy,scale:ue.trace.hole*ue.r*2/de,tx:0,ty:-ue.titleBox.height/2+ue.trace.title.font.size}}(K):O(K,te),Te.attr("transform",t(ke.x,ke.y)+s(Math.min(1,ke.scale))+t(ke.tx,ke.ty))}),oe&&function(ke,Te){var le,ue,de,Le,we,Ee,Oe,Fe,pe,be,Me,De,Ne;function Be(ft,ht){return ft.pxmid[1]-ht.pxmid[1]}function Ye(ft,ht){return ht.pxmid[1]-ft.pxmid[1]}function We(ft,ht){ht||(ht={});var mt,Mt,_t,it,st=ht.labelExtraY+(ue?ht.yLabelMax:ht.yLabelMin),St=ue?ft.yLabelMin:ft.yLabelMax,zt=ue?ft.yLabelMax:ft.yLabelMin,Ft=ft.cyFinal+we(ft.px0[1],ft.px1[1]),Pt=st-St;if(Pt*Oe>0&&(ft.labelExtraY=Pt),h.isArrayOrTypedArray(Te.pull))for(Mt=0;Mt<be.length;Mt++)(_t=be[Mt])===ft||(u.castOption(Te.pull,ft.pts)||0)>=(u.castOption(Te.pull,_t.pts)||0)||((ft.pxmid[1]-_t.pxmid[1])*Oe>0?(Pt=_t.cyFinal+we(_t.px0[1],_t.px1[1])-St-ft.labelExtraY)*Oe>0&&(ft.labelExtraY+=Pt):(zt+ft.labelExtraY-Ft)*Oe>0&&(mt=3*Ee*Math.abs(Mt-be.indexOf(ft)),(it=_t.cxFinal+Le(_t.px0[0],_t.px1[0])+mt-(ft.cxFinal+ft.pxmid[0])-ft.labelExtraX)*Ee>0&&(ft.labelExtraX+=it)))}for(ue=0;ue<2;ue++)for(de=ue?Be:Ye,we=ue?Math.max:Math.min,Oe=ue?1:-1,le=0;le<2;le++){for(Le=le?Math.max:Math.min,Ee=le?1:-1,(Fe=ke[ue][le]).sort(de),pe=ke[1-ue][le],be=pe.concat(Fe),De=[],Me=0;Me<Fe.length;Me++)Fe[Me].yLabelMid!==void 0&&De.push(Fe[Me]);for(Ne=!1,Me=0;ue&&Me<pe.length;Me++)if(pe[Me].yLabelMid!==void 0){Ne=pe[Me];break}for(Me=0;Me<De.length;Me++){var et=Me&&De[Me-1];Ne&&!Me&&(et=Ne),We(De[Me],et)}}}(ae,ee),function(ke,Te){ke.each(function(le){var ue=T.select(this);if(le.labelExtraX||le.labelExtraY){var de=ue.select("g.slicetext text");le.transform.targetX+=le.labelExtraX,le.transform.targetY+=le.labelExtraY,h.setTransormAndDisplay(de,le.transform);var Le=le.cxFinal+le.pxmid[0],we="M"+Le+","+(le.cyFinal+le.pxmid[1]),Ee=(le.yLabelMax-le.yLabelMin)*(le.pxmid[0]<0?-1:1)/4;if(le.labelExtraX){var Oe=le.labelExtraX*le.pxmid[1]/le.pxmid[0],Fe=le.yLabelMid+le.labelExtraY-(le.cyFinal+le.pxmid[1]);Math.abs(Oe)>Math.abs(Fe)?we+="l"+Fe*le.pxmid[0]/le.pxmid[1]+","+Fe+"H"+(Le+le.labelExtraX+Ee):we+="l"+le.labelExtraX+","+Oe+"v"+(Fe-Oe)+"h"+Ee}else we+="V"+(le.yLabelMid+le.labelExtraY)+"h"+Ee;h.ensureSingle(ue,"path","textline").call(_.stroke,Te.outsidetextfont.color).attr({"stroke-width":Math.min(2,Te.outsidetextfont.size/8),d:we,fill:"none"})}else ue.select("path.textline").remove()})}(ie,ee),oe&&ee.automargin){var ge=v.bBox(X.node()),ve=ee.domain,xe=te.w*(ve.x[1]-ve.x[0]),_e=te.h*(ve.y[1]-ve.y[0]),ye=(.5*xe-K.r)/te.w,Ce=(.5*_e-K.r)/te.h;w.autoMargin(Z,"pie."+ee.uid+".automargin",{xl:ve.x[0]-ye,xr:ve.x[1]+ye,yb:ve.y[0]-Ce,yt:ve.y[1]+Ce,l:Math.max(K.cx-K.r-ge.left,0),r:Math.max(ge.right-(K.cx+K.r),0),b:Math.max(ge.bottom-(K.cy+K.r),0),t:Math.max(K.cy-K.r-ge.top,0),pad:5})}})});setTimeout(function(){$.selectAll("tspan").each(function(){var J=T.select(this);J.attr("dy")&&J.attr("dy",J.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:m,determineInsideTextFont:g,positionTitleOutside:O,prerenderTitles:d,layoutAreas:z,attachFxHandlers:b,computeTransform:j}},68357:function(N,L,e){var T=e(39898),w=e(63463),i=e(72597).resizeText;N.exports=function(_){var v=_._fullLayout._pielayer.selectAll(".trace");i(_,v,"pie"),v.each(function(h){var s=h[0].trace,t=T.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(a){T.select(this).call(w,a,s,_)})})}},63463:function(N,L,e){var T=e(7901),w=e(53581).castOption,i=e(22209);N.exports=function(_,v,h,s){var t=h.marker.line,a=w(t.color,v.pts)||T.defaultLine,n=w(t.width,v.pts)||0;_.call(i,v,h,s).style("stroke-width",n).call(T.stroke,a)}},10959:function(N,L,e){var T=e(82196);N.exports={x:T.x,y:T.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:T.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(N,L,e){var T=e(9330).gl_pointcloud2d,w=e(71828).isArrayOrTypedArray,i=e(78614),_=e(71739).findExtremes,v=e(34603);function h(t,a){this.scene=t,this.uid=a,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=T(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var s=h.prototype;s.handlePick=function(t){var a=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*a],this.pickXYData[2*a+1]]:[this.pickXData[a],this.pickYData[a]],textLabel:w(this.textLabels)?this.textLabels[a]:this.textLabels,color:this.color,name:this.name,pointIndex:a,hoverinfo:this.hoverinfo}},s.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=v(t,{})},s.updateFast=function(t){var a,n,r,l,o,u,p=this.xData=this.pickXData=t.x,c=this.yData=this.pickYData=t.y,b=this.pickXYData=t.xy,g=t.xbounds&&t.ybounds,d=t.indices,m=this.bounds;if(b){if(r=b,a=b.length>>>1,g)m[0]=t.xbounds[0],m[2]=t.xbounds[1],m[1]=t.ybounds[0],m[3]=t.ybounds[1];else for(u=0;u<a;u++)l=r[2*u],o=r[2*u+1],l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),o<m[1]&&(m[1]=o),o>m[3]&&(m[3]=o);if(d)n=d;else for(n=new Int32Array(a),u=0;u<a;u++)n[u]=u}else for(a=p.length,r=new Float32Array(2*a),n=new Int32Array(a),u=0;u<a;u++)l=p[u],o=c[u],n[u]=u,r[2*u]=l,r[2*u+1]=o,l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),o<m[1]&&(m[1]=o),o>m[3]&&(m[3]=o);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=r;var x=i(t.marker.color),y=i(t.marker.border.color),k=t.opacity*t.marker.opacity;x[3]*=k,this.pointcloudOptions.color=x;var f=t.marker.blend;f===null&&(f=p.length<100||c.length<100),this.pointcloudOptions.blend=f,y[3]*=k,this.pointcloudOptions.borderColor=y;var S=t.marker.sizemin,M=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=M,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,O=this.scene.yaxis,P=M/2||.5;t._extremes[E._id]=_(E,[m[0],m[2]],{ppad:P}),t._extremes[O._id]=_(O,[m[1],m[3]],{ppad:P})},s.dispose=function(){this.pointcloud.dispose()},N.exports=function(t,a){var n=new h(t,a.uid);return n.update(a),n}},33876:function(N,L,e){var T=e(71828),w=e(10959);N.exports=function(i,_,v){function h(s,t){return T.coerce(i,_,w,s,t)}h("x"),h("y"),h("xbounds"),h("ybounds"),i.xy&&i.xy instanceof Float32Array&&(_.xy=i.xy),i.indices&&i.indices instanceof Int32Array&&(_.indices=i.indices),h("text"),h("marker.color",v),h("marker.opacity"),h("marker.blend"),h("marker.sizemin"),h("marker.sizemax"),h("marker.border.color",v),h("marker.border.arearatio"),_._length=null}},20593:function(N,L,e){N.exports={attributes:e(10959),supplyDefaults:e(33876),calc:e(36563),plot:e(42743),moduleType:"trace",name:"pointcloud",basePlotModule:e(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(N,L,e){var T=e(41940),w=e(9012),i=e(22399),_=e(77914),v=e(27670).Y,h=e(5386).fF,s=e(50693),t=e(44467).templatedArray,a=e(12663).descriptionOnlyNumbers,n=e(1426).extendFlat,r=e(30962).overrideAll;(N.exports=r({hoverinfo:n({},w.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:_.hoverlabel,domain:v({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:a("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:T({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:h({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:h({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:n(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(N,L,e){var T=e(30962).overrideAll,w=e(27659).a0,i=e(60436),_=e(528),v=e(6964),h=e(28569),s=e(47322).prepSelect,t=e(71828),a=e(73972),n="sankey";function r(l,o){var u=l._fullData[o],p=l._fullLayout,c=p.dragmode,b=p.dragmode==="pan"?"move":"crosshair",g=u._bgRect;if(g&&c!=="pan"&&c!=="zoom"){v(g,b);var d={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},m={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},x={gd:l,element:g.node(),plotinfo:{id:o,xaxis:d,yaxis:m,fillRangeItems:t.noop},subplot:o,xaxes:[d],yaxes:[m],doneFnCompleted:function(y){var k,f=l._fullData[o],S=f.node.groups.slice(),M=[];function E(z){for(var U=f._sankey.graph.nodes,R=0;R<U.length;R++)if(U[R].pointNumber===z)return U[R]}for(var O=0;O<y.length;O++){var P=E(y[O].pointNumber);if(P)if(P.group){for(var I=0;I<P.childrenNodes.length;I++)M.push(P.childrenNodes[I].pointNumber);S[P.pointNumber-f.node._count]=!1}else M.push(P.pointNumber)}k=S.filter(Boolean).concat([M]),a.call("_guiRestyle",l,{"node.groups":[k]},o)},prepFn:function(y,k,f){s(y,k,f,x,c)}};h.init(x)}}L.name=n,L.baseLayoutAttrOverrides=T({hoverlabel:_.hoverlabel},"plot","nested"),L.plot=function(l){var o=w(l.calcdata,n)[0];i(l,o),L.updateFx(l)},L.clean=function(l,o,u,p){var c=p._has&&p._has(n),b=o._has&&o._has(n);c&&!b&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},L.updateFx=function(l){for(var o=0;o<l._fullData.length;o++)r(l,o)}},92930:function(N,L,e){var T=e(68664),w=e(71828),i=e(28984).wrap,_=w.isArrayOrTypedArray,v=w.isIndex,h=e(21081);N.exports=function(s,t){var a=function(n){var r,l=n.node,o=n.link,u=[],p=_(o.color),c=_(o.customdata),b={},g={},d=o.colorscales.length;for(r=0;r<d;r++){var m=o.colorscales[r],x=h.extractScale(m,{cLetter:"c"}),y=h.makeColorScaleFunc(x);g[m.label]=y}var k=0;for(r=0;r<o.value.length;r++)o.source[r]>k&&(k=o.source[r]),o.target[r]>k&&(k=o.target[r]);var f,S=k+1;n.node._count=S;var M=n.node.groups,E={};for(r=0;r<M.length;r++){var O=M[r];for(f=0;f<O.length;f++){var P=O[f],I=S+r;E.hasOwnProperty(P)?w.warn("Node "+P+" is already part of a group."):E[P]=I}}var z={source:[],target:[]};for(r=0;r<o.value.length;r++){var U=o.value[r],R=o.source[r],j=o.target[r];if(U>0&&v(R,S)&&v(j,S)&&(!E.hasOwnProperty(R)||!E.hasOwnProperty(j)||E[R]!==E[j])){E.hasOwnProperty(j)&&(j=E[j]),E.hasOwnProperty(R)&&(R=E[R]),j=+j,b[R=+R]=b[j]=!0;var Z="";o.label&&o.label[r]&&(Z=o.label[r]);var F=null;Z&&g.hasOwnProperty(Z)&&(F=g[Z]),u.push({pointNumber:r,label:Z,color:p?o.color[r]:o.color,customdata:c?o.customdata[r]:o.customdata,concentrationscale:F,source:R,target:j,value:+U}),z.source.push(R),z.target.push(j)}}var V=S+M.length,H=_(l.color),te=_(l.customdata),$=[];for(r=0;r<V;r++)if(b[r]){var J=l.label[r];$.push({group:r>S-1,childrenNodes:[],pointNumber:r,label:J,color:H?l.color[r]:l.color,customdata:te?l.customdata[r]:l.customdata})}var X=!1;return function(K,ee,ie){for(var ae=w.init2dArray(K,0),oe=0;oe<Math.min(ee.length,ie.length);oe++)if(w.isIndex(ee[oe],K)&&w.isIndex(ie[oe],K)){if(ee[oe]===ie[oe])return!0;ae[ee[oe]].push(ie[oe])}return T(ae).components.some(function(fe){return fe.length>1})}(V,z.source,z.target)&&(X=!0),{circular:X,links:u,nodes:$,groups:M,groupLookup:E}}(t);return i({circular:a.circular,_nodes:a.nodes,_links:a.links,_groups:a.groups,_groupLookup:a.groupLookup})}},85247:function(N){N.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(N,L,e){var T=e(71828),w=e(39953),i=e(7901),_=e(84267),v=e(27670).c,h=e(38048),s=e(44467),t=e(85501);function a(n,r){function l(o,u){return T.coerce(n,r,w.link.colorscales,o,u)}l("label"),l("cmin"),l("cmax"),l("colorscale")}N.exports=function(n,r,l,o){function u(S,M){return T.coerce(n,r,w,S,M)}var p=T.extendDeep(o.hoverlabel,n.hoverlabel),c=n.node,b=s.newContainer(r,"node");function g(S,M){return T.coerce(c,b,w.node,S,M)}g("label"),g("groups"),g("x"),g("y"),g("pad"),g("thickness"),g("line.color"),g("line.width"),g("hoverinfo",n.hoverinfo),h(c,b,g,p),g("hovertemplate"),g("align");var d=o.colorway;g("color",b.label.map(function(S,M){return i.addOpacity(function(E){return d[E%d.length]}(M),.8)})),g("customdata");var m=n.link||{},x=s.newContainer(r,"link");function y(S,M){return T.coerce(m,x,w.link,S,M)}y("label"),y("arrowlen"),y("source"),y("target"),y("value"),y("line.color"),y("line.width"),y("hoverinfo",n.hoverinfo),h(m,x,y,p),y("hovertemplate");var k,f=_(o.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";y("color",T.repeat(f,x.value.length)),y("customdata"),t(m,x,{name:"colorscales",handleItemDefaults:a}),v(r,o,u),u("orientation"),u("valueformat"),u("valuesuffix"),b.x.length&&b.y.length&&(k="freeform"),u("arrangement",k),T.coerceFont(u,"textfont",T.extendFlat({},o.font)),r._length=null}},29396:function(N,L,e){N.exports={attributes:e(39953),supplyDefaults:e(26857),calc:e(92930),plot:e(60436),moduleType:"trace",name:"sankey",basePlotModule:e(75536),selectPoints:e(84564),categories:["noOpacity"],meta:{}}},60436:function(N,L,e){var T=e(39898),w=e(71828),i=w.numberFormat,_=e(3393),v=e(30211),h=e(7901),s=e(85247).cn,t=w._;function a(m){return m!==""}function n(m,x){return m.filter(function(y){return y.key===x.traceId})}function r(m,x){T.select(m).select("path").style("fill-opacity",x),T.select(m).select("rect").style("fill-opacity",x)}function l(m){T.select(m).select("text.name").style("fill","black")}function o(m){return function(x){return m.node.sourceLinks.indexOf(x.link)!==-1||m.node.targetLinks.indexOf(x.link)!==-1}}function u(m){return function(x){return x.node.sourceLinks.indexOf(m.link)!==-1||x.node.targetLinks.indexOf(m.link)!==-1}}function p(m,x,y){x&&y&&n(y,x).selectAll("."+s.sankeyLink).filter(o(x)).call(b.bind(0,x,y,!1))}function c(m,x,y){x&&y&&n(y,x).selectAll("."+s.sankeyLink).filter(o(x)).call(g.bind(0,x,y,!1))}function b(m,x,y,k){k.style("fill-opacity",function(f){if(!f.link.concentrationscale)return .4}),k.each(function(f){var S=f.link.label;S!==""&&n(x,m).selectAll("."+s.sankeyLink).filter(function(M){return M.link.label===S}).style("fill-opacity",function(M){if(!M.link.concentrationscale)return .4})}),y&&n(x,m).selectAll("."+s.sankeyNode).filter(u(m)).call(p)}function g(m,x,y,k){k.style("fill-opacity",function(f){return f.tinyColorAlpha}),k.each(function(f){var S=f.link.label;S!==""&&n(x,m).selectAll("."+s.sankeyLink).filter(function(M){return M.link.label===S}).style("fill-opacity",function(M){return M.tinyColorAlpha})}),y&&n(x,m).selectAll(s.sankeyNode).filter(u(m)).call(c)}function d(m,x){var y=m.hoverlabel||{},k=w.nestedProperty(y,x).get();return!Array.isArray(k)&&k}N.exports=function(m,x){for(var y=m._fullLayout,k=y._paper,f=y._size,S=0;S<m._fullData.length;S++)if(m._fullData[S].visible&&m._fullData[S].type===s.sankey&&!m._fullData[S]._viewInitial){var M=m._fullData[S].node;m._fullData[S]._viewInitial={node:{groups:M.groups.slice(),x:M.x.slice(),y:M.y.slice()}}}var E=t(m,"source:")+" ",O=t(m,"target:")+" ",P=t(m,"concentration:")+" ",I=t(m,"incoming flow count:")+" ",z=t(m,"outgoing flow count:")+" ";_(m,k,x,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:function(U,R,j){m._fullLayout.hovermode!==!1&&(T.select(U).call(b.bind(0,R,j,!0)),R.link.trace.link.hoverinfo!=="skip"&&(R.link.fullData=R.link.trace,m.emit("plotly_hover",{event:T.event,points:[R.link]})))},follow:function(U,R){if(m._fullLayout.hovermode!==!1){var j=R.link.trace.link;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){for(var Z=[],F=0,V=0;V<R.flow.links.length;V++){var H=R.flow.links[V];if(m._fullLayout.hovermode!=="closest"||R.link.pointNumber===H.pointNumber){R.link.pointNumber===H.pointNumber&&(F=V),H.fullData=H.trace,j=R.link.trace.link;var te=J(H),$={valueLabel:i(R.valueFormat)(H.value)+R.valueSuffix};Z.push({x:te[0],y:te[1],name:$.valueLabel,text:[H.label||"",E+H.source.label,O+H.target.label,H.concentrationscale?P+i("%0.2f")(H.flow.labelConcentration):""].filter(a).join("<br>"),color:d(j,"bgcolor")||h.addOpacity(H.color,1),borderColor:d(j,"bordercolor"),fontFamily:d(j,"font.family"),fontSize:d(j,"font.size"),fontColor:d(j,"font.color"),nameLength:d(j,"namelength"),textAlign:d(j,"align"),idealAlign:T.event.x<te[0]?"right":"left",hovertemplate:j.hovertemplate,hovertemplateLabels:$,eventData:[H]})}}v.loneHover(Z,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:m,anchorIndex:F}).each(function(){R.link.concentrationscale||r(this,.65),l(this)})}}function J(X){var K,ee;X.circular?(K=(X.circularPathData.leftInnerExtent+X.circularPathData.rightInnerExtent)/2,ee=X.circularPathData.verticalFullExtent):(K=(X.source.x1+X.target.x0)/2,ee=(X.y0+X.y1)/2);var ie=[K,ee];return X.trace.orientation==="v"&&ie.reverse(),ie[0]+=R.parent.translateX,ie[1]+=R.parent.translateY,ie}},unhover:function(U,R,j){m._fullLayout.hovermode!==!1&&(T.select(U).call(g.bind(0,R,j,!0)),R.link.trace.link.hoverinfo!=="skip"&&(R.link.fullData=R.link.trace,m.emit("plotly_unhover",{event:T.event,points:[R.link]})),v.loneUnhover(y._hoverlayer.node()))},select:function(U,R){var j=R.link;j.originalEvent=T.event,m._hoverdata=[j],v.click(m,{target:!0})}},nodeEvents:{hover:function(U,R,j){m._fullLayout.hovermode!==!1&&(T.select(U).call(p,R,j),R.node.trace.node.hoverinfo!=="skip"&&(R.node.fullData=R.node.trace,m.emit("plotly_hover",{event:T.event,points:[R.node]})))},follow:function(U,R){if(m._fullLayout.hovermode!==!1){var j=R.node.trace.node;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){var Z=T.select(U).select("."+s.nodeRect),F=m._fullLayout._paperdiv.node().getBoundingClientRect(),V=Z.node().getBoundingClientRect(),H=V.left-2-F.left,te=V.right+2-F.left,$=V.top+V.height/4-F.top,J={valueLabel:i(R.valueFormat)(R.node.value)+R.valueSuffix};R.node.fullData=R.node.trace,m._fullLayout._calcInverseTransform(m);var X=m._fullLayout._invScaleX,K=m._fullLayout._invScaleY,ee=v.loneHover({x0:X*H,x1:X*te,y:K*$,name:i(R.valueFormat)(R.node.value)+R.valueSuffix,text:[R.node.label,I+R.node.targetLinks.length,z+R.node.sourceLinks.length].filter(a).join("<br>"),color:d(j,"bgcolor")||R.tinyColorHue,borderColor:d(j,"bordercolor"),fontFamily:d(j,"font.family"),fontSize:d(j,"font.size"),fontColor:d(j,"font.color"),nameLength:d(j,"namelength"),textAlign:d(j,"align"),idealAlign:"left",hovertemplate:j.hovertemplate,hovertemplateLabels:J,eventData:[R.node]},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:m});r(ee,.85),l(ee)}}},unhover:function(U,R,j){m._fullLayout.hovermode!==!1&&(T.select(U).call(c,R,j),R.node.trace.node.hoverinfo!=="skip"&&(R.node.fullData=R.node.trace,m.emit("plotly_unhover",{event:T.event,points:[R.node]})),v.loneUnhover(y._hoverlayer.node()))},select:function(U,R,j){var Z=R.node;Z.originalEvent=T.event,m._hoverdata=[Z],T.select(U).call(c,R,j),v.click(m,{target:!0})}}})}},3393:function(N,L,e){var T=e(49887),w=e(81684).k4,i=e(39898),_=e(30838),v=e(86781),h=e(85247),s=e(84267),t=e(7901),a=e(91424),n=e(71828),r=n.strTranslate,l=n.strRotate,o=e(28984),u=o.keyFun,p=o.repeat,c=o.unwrap,b=e(63893),g=e(73972),d=e(18783),m=d.CAP_SHIFT,x=d.LINE_SPACING;function y(V,H,te){var $,J=c(H),X=J.trace,K=X.domain,ee=X.orientation==="h",ie=X.node.pad,ae=X.node.thickness,oe={justify:_.sankeyJustify,left:_.sankeyLeft,right:_.sankeyRight,center:_.sankeyCenter}[X.node.align],fe=V.width*(K.x[1]-K.x[0]),ge=V.height*(K.y[1]-K.y[0]),ve=J._nodes,xe=J._links,_e=J.circular;($=_e?v.sankeyCircular().circularLinkGap(0):_.sankey()).iterations(h.sankeyIterations).size(ee?[fe,ge]:[ge,fe]).nodeWidth(ae).nodePadding(ie).nodeId(function(Oe){return Oe.pointNumber}).nodeAlign(oe).nodes(ve).links(xe);var ye,Ce,ke,Te=$();for(var le in $.nodePadding()<ie&&n.warn("node.pad was reduced to ",$.nodePadding()," to fit within the figure."),J._groupLookup){var ue,de=parseInt(J._groupLookup[le]);for(ye=0;ye<Te.nodes.length;ye++)if(Te.nodes[ye].pointNumber===de){ue=Te.nodes[ye];break}if(ue){var Le={pointNumber:parseInt(le),x0:ue.x0,x1:ue.x1,y0:ue.y0,y1:ue.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Te.nodes.unshift(Le),ue.childrenNodes.unshift(Le)}}if(function(){for(ye=0;ye<Te.nodes.length;ye++){var Oe,Fe,pe=Te.nodes[ye],be={};for(Ce=0;Ce<pe.targetLinks.length;Ce++)Oe=(Fe=pe.targetLinks[Ce]).source.pointNumber+":"+Fe.target.pointNumber,be.hasOwnProperty(Oe)||(be[Oe]=[]),be[Oe].push(Fe);var Me=Object.keys(be);for(Ce=0;Ce<Me.length;Ce++){var De=be[Oe=Me[Ce]],Ne=0,Be={};for(ke=0;ke<De.length;ke++)Be[(Fe=De[ke]).label]||(Be[Fe.label]=0),Be[Fe.label]+=Fe.value,Ne+=Fe.value;for(ke=0;ke<De.length;ke++)(Fe=De[ke]).flow={value:Ne,labelConcentration:Be[Fe.label]/Ne,concentration:Fe.value/Ne,links:De},Fe.concentrationscale&&(Fe.color=s(Fe.concentrationscale(Fe.flow.labelConcentration)))}var Ye=0;for(Ce=0;Ce<pe.sourceLinks.length;Ce++)Ye+=pe.sourceLinks[Ce].value;for(Ce=0;Ce<pe.sourceLinks.length;Ce++)(Fe=pe.sourceLinks[Ce]).concentrationOut=Fe.value/Ye;var We=0;for(Ce=0;Ce<pe.targetLinks.length;Ce++)We+=pe.targetLinks[Ce].value;for(Ce=0;Ce<pe.targetLinks.length;Ce++)(Fe=pe.targetLinks[Ce]).concenrationIn=Fe.value/We}}(),X.node.x.length&&X.node.y.length){for(ye=0;ye<Math.min(X.node.x.length,X.node.y.length,Te.nodes.length);ye++)if(X.node.x[ye]&&X.node.y[ye]){var we=[X.node.x[ye]*fe,X.node.y[ye]*ge];Te.nodes[ye].x0=we[0]-ae/2,Te.nodes[ye].x1=we[0]+ae/2;var Ee=Te.nodes[ye].y1-Te.nodes[ye].y0;Te.nodes[ye].y0=we[1]-Ee/2,Te.nodes[ye].y1=we[1]+Ee/2}X.arrangement==="snap"&&function(Oe){var Fe,pe,be=Oe.map(function(Ye,We){return{x0:Ye.x0,index:We}}).sort(function(Ye,We){return Ye.x0-We.x0}),Me=[],De=-1,Ne=-1/0;for(ye=0;ye<be.length;ye++){var Be=Oe[be[ye].index];Be.x0>Ne+ae&&(De+=1,Fe=Be.x0),Ne=Be.x0,Me[De]||(Me[De]=[]),Me[De].push(Be),pe=Fe-Be.x0,Be.x0+=pe,Be.x1+=pe}return Me}(ve=Te.nodes).forEach(function(Oe){var Fe,pe,be,Me=0,De=Oe.length;for(Oe.sort(function(Ne,Be){return Ne.y0-Be.y0}),be=0;be<De;++be)(Fe=Oe[be]).y0>=Me||(pe=Me-Fe.y0)>1e-6&&(Fe.y0+=pe,Fe.y1+=pe),Me=Fe.y1+ie}),$.update(Te)}return{circular:_e,key:te,trace:X,guid:n.randstr(),horizontal:ee,width:fe,height:ge,nodePad:X.node.pad,nodeLineColor:X.node.line.color,nodeLineWidth:X.node.line.width,linkLineColor:X.link.line.color,linkLineWidth:X.link.line.width,linkArrowLength:X.link.arrowlen,valueFormat:X.valueformat,valueSuffix:X.valuesuffix,textFont:X.textfont,translateX:K.x[0]*V.width+V.margin.l,translateY:V.height-K.y[1]*V.height+V.margin.t,dragParallel:ee?ge:fe,dragPerpendicular:ee?fe:ge,arrangement:X.arrangement,sankey:$,graph:Te,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function k(V,H,te){var $=s(H.color),J=H.source.label+"|"+H.target.label+"__"+te;return H.trace=V.trace,H.curveNumber=V.trace.index,{circular:V.circular,key:J,traceId:V.key,pointNumber:H.pointNumber,link:H,tinyColorHue:t.tinyRGB($),tinyColorAlpha:$.getAlpha(),linkPath:f,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,linkArrowLength:V.linkArrowLength,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:H.flow}}function f(){return function(V){var H=V.linkArrowLength;if(V.link.circular)return function(ye,Ce){var ke=ye.width/2,Te=ye.circularPathData;return ye.circularLinkType==="top"?"M "+(Te.targetX-Ce)+" "+(Te.targetY+ke)+" L"+(Te.rightInnerExtent-Ce)+" "+(Te.targetY+ke)+"A"+(Te.rightLargeArcRadius+ke)+" "+(Te.rightSmallArcRadius+ke)+" 0 0 1 "+(Te.rightFullExtent-ke-Ce)+" "+(Te.targetY-Te.rightSmallArcRadius)+"L"+(Te.rightFullExtent-ke-Ce)+" "+Te.verticalRightInnerExtent+"A"+(Te.rightLargeArcRadius+ke)+" "+(Te.rightLargeArcRadius+ke)+" 0 0 1 "+(Te.rightInnerExtent-Ce)+" "+(Te.verticalFullExtent-ke)+"L"+Te.leftInnerExtent+" "+(Te.verticalFullExtent-ke)+"A"+(Te.leftLargeArcRadius+ke)+" "+(Te.leftLargeArcRadius+ke)+" 0 0 1 "+(Te.leftFullExtent+ke)+" "+Te.verticalLeftInnerExtent+"L"+(Te.leftFullExtent+ke)+" "+(Te.sourceY-Te.leftSmallArcRadius)+"A"+(Te.leftLargeArcRadius+ke)+" "+(Te.leftSmallArcRadius+ke)+" 0 0 1 "+Te.leftInnerExtent+" "+(Te.sourceY+ke)+"L"+Te.sourceX+" "+(Te.sourceY+ke)+"L"+Te.sourceX+" "+(Te.sourceY-ke)+"L"+Te.leftInnerExtent+" "+(Te.sourceY-ke)+"A"+(Te.leftLargeArcRadius-ke)+" "+(Te.leftSmallArcRadius-ke)+" 0 0 0 "+(Te.leftFullExtent-ke)+" "+(Te.sourceY-Te.leftSmallArcRadius)+"L"+(Te.leftFullExtent-ke)+" "+Te.verticalLeftInnerExtent+"A"+(Te.leftLargeArcRadius-ke)+" "+(Te.leftLargeArcRadius-ke)+" 0 0 0 "+Te.leftInnerExtent+" "+(Te.verticalFullExtent+ke)+"L"+(Te.rightInnerExtent-Ce)+" "+(Te.verticalFullExtent+ke)+"A"+(Te.rightLargeArcRadius-ke)+" "+(Te.rightLargeArcRadius-ke)+" 0 0 0 "+(Te.rightFullExtent+ke-Ce)+" "+Te.verticalRightInnerExtent+"L"+(Te.rightFullExtent+ke-Ce)+" "+(Te.targetY-Te.rightSmallArcRadius)+"A"+(Te.rightLargeArcRadius-ke)+" "+(Te.rightSmallArcRadius-ke)+" 0 0 0 "+(Te.rightInnerExtent-Ce)+" "+(Te.targetY-ke)+"L"+(Te.targetX-Ce)+" "+(Te.targetY-ke)+(Ce>0?"L"+Te.targetX+" "+Te.targetY:"")+"Z":"M "+(Te.targetX-Ce)+" "+(Te.targetY-ke)+" L"+(Te.rightInnerExtent-Ce)+" "+(Te.targetY-ke)+"A"+(Te.rightLargeArcRadius+ke)+" "+(Te.rightSmallArcRadius+ke)+" 0 0 0 "+(Te.rightFullExtent-ke-Ce)+" "+(Te.targetY+Te.rightSmallArcRadius)+"L"+(Te.rightFullExtent-ke-Ce)+" "+Te.verticalRightInnerExtent+"A"+(Te.rightLargeArcRadius+ke)+" "+(Te.rightLargeArcRadius+ke)+" 0 0 0 "+(Te.rightInnerExtent-Ce)+" "+(Te.verticalFullExtent+ke)+"L"+Te.leftInnerExtent+" "+(Te.verticalFullExtent+ke)+"A"+(Te.leftLargeArcRadius+ke)+" "+(Te.leftLargeArcRadius+ke)+" 0 0 0 "+(Te.leftFullExtent+ke)+" "+Te.verticalLeftInnerExtent+"L"+(Te.leftFullExtent+ke)+" "+(Te.sourceY+Te.leftSmallArcRadius)+"A"+(Te.leftLargeArcRadius+ke)+" "+(Te.leftSmallArcRadius+ke)+" 0 0 0 "+Te.leftInnerExtent+" "+(Te.sourceY-ke)+"L"+Te.sourceX+" "+(Te.sourceY-ke)+"L"+Te.sourceX+" "+(Te.sourceY+ke)+"L"+Te.leftInnerExtent+" "+(Te.sourceY+ke)+"A"+(Te.leftLargeArcRadius-ke)+" "+(Te.leftSmallArcRadius-ke)+" 0 0 1 "+(Te.leftFullExtent-ke)+" "+(Te.sourceY+Te.leftSmallArcRadius)+"L"+(Te.leftFullExtent-ke)+" "+Te.verticalLeftInnerExtent+"A"+(Te.leftLargeArcRadius-ke)+" "+(Te.leftLargeArcRadius-ke)+" 0 0 1 "+Te.leftInnerExtent+" "+(Te.verticalFullExtent-ke)+"L"+(Te.rightInnerExtent-Ce)+" "+(Te.verticalFullExtent-ke)+"A"+(Te.rightLargeArcRadius-ke)+" "+(Te.rightLargeArcRadius-ke)+" 0 0 1 "+(Te.rightFullExtent+ke-Ce)+" "+Te.verticalRightInnerExtent+"L"+(Te.rightFullExtent+ke-Ce)+" "+(Te.targetY+Te.rightSmallArcRadius)+"A"+(Te.rightLargeArcRadius-ke)+" "+(Te.rightSmallArcRadius-ke)+" 0 0 1 "+(Te.rightInnerExtent-Ce)+" "+(Te.targetY+ke)+"L"+(Te.targetX-Ce)+" "+(Te.targetY+ke)+(Ce>0?"L"+Te.targetX+" "+Te.targetY:"")+"Z"}(V.link,H);var te=Math.abs((V.link.target.x0-V.link.source.x1)/2);H>te&&(H=te);var $=V.link.source.x1,J=V.link.target.x0-H,X=w($,J),K=X(.5),ee=X(.5),ie=V.link.y0-V.link.width/2,ae=V.link.y0+V.link.width/2,oe=V.link.y1-V.link.width/2,fe=V.link.y1+V.link.width/2,ge="M"+$+","+ie,ve="C"+K+","+ie+" "+ee+","+oe+" "+J+","+oe,xe="C"+ee+","+fe+" "+K+","+ae+" "+$+","+ae,_e=H>0?"L"+(J+H)+","+(oe+V.link.width/2):"";return ge+ve+(_e+="L"+J+","+fe)+xe+"Z"}}function S(V,H){var te=s(H.color),$=h.nodePadAcross,J=V.nodePad/2;H.dx=H.x1-H.x0,H.dy=H.y1-H.y0;var X=H.dx,K=Math.max(.5,H.dy),ee="node_"+H.pointNumber;return H.group&&(ee=n.randstr()),H.trace=V.trace,H.curveNumber=V.trace.index,{index:H.pointNumber,key:ee,partOfGroup:H.partOfGroup||!1,group:H.group,traceId:V.key,trace:V.trace,node:H,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil(X),visibleHeight:K,zoneX:-$,zoneY:-J,zoneWidth:X+2*$,zoneHeight:K+2*J,labelY:V.horizontal?H.dy/2+1:H.dx/2+1,left:H.originalLayer===1,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:t.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,ee].join("_"),interactionState:V.interactionState,figure:V}}function M(V){V.attr("transform",function(H){return r(H.node.x0.toFixed(3),H.node.y0.toFixed(3))})}function E(V){V.call(M)}function O(V,H){V.call(E),H.attr("d",f())}function P(V){V.attr("width",function(H){return H.node.x1-H.node.x0}).attr("height",function(H){return H.visibleHeight})}function I(V){return V.link.width>1||V.linkLineWidth>0}function z(V){return r(V.translateX,V.translateY)+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(V,H,te){V.on(".basic",null).on("mouseover.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(te.hover(this,$,H),$.interactionState.hovered=[this,$])}).on("mousemove.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(te.follow(this,$),$.interactionState.hovered=[this,$])}).on("mouseout.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(te.unhover(this,$,H),$.interactionState.hovered=!1)}).on("click.basic",function($){$.interactionState.hovered&&(te.unhover(this,$,H),$.interactionState.hovered=!1),$.interactionState.dragInProgress||$.partOfGroup||te.select(this,$,H)})}function R(V,H,te,$){var J=i.behavior.drag().origin(function(X){return{x:X.node.x0+X.visibleWidth/2,y:X.node.y0+X.visibleHeight/2}}).on("dragstart",function(X){if(X.arrangement!=="fixed"&&(n.ensureSingle($._fullLayout._infolayer,"g","dragcover",function(ee){$._fullLayout._dragCover=ee}),n.raiseToTop(this),X.interactionState.dragInProgress=X.node,Z(X.node),X.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,X.interactionState.hovered),X.interactionState.hovered=!1),X.arrangement==="snap")){var K=X.traceId+"|"+X.key;X.forceLayouts[K]?X.forceLayouts[K].alpha(1):function(ee,ie,ae,oe){(function(ge){for(var ve=0;ve<ge.length;ve++)ge[ve].y=(ge[ve].y0+ge[ve].y1)/2,ge[ve].x=(ge[ve].x0+ge[ve].x1)/2})(ae.graph.nodes);var fe=ae.graph.nodes.filter(function(ge){return ge.originalX===ae.node.originalX}).filter(function(ge){return!ge.partOfGroup});ae.forceLayouts[ie]=T.forceSimulation(fe).alphaDecay(0).force("collide",T.forceCollide().radius(function(ge){return ge.dy/2+ae.nodePad/2}).strength(1).iterations(h.forceIterations)).force("constrain",function(ge,ve,xe,_e){return function(){for(var ye=0,Ce=0;Ce<xe.length;Ce++){var ke=xe[Ce];ke===_e.interactionState.dragInProgress?(ke.x=ke.lastDraggedX,ke.y=ke.lastDraggedY):(ke.vx=(ke.originalX-ke.x)/h.forceTicksPerFrame,ke.y=Math.min(_e.size-ke.dy/2,Math.max(ke.dy/2,ke.y))),ye=Math.max(ye,Math.abs(ke.vx),Math.abs(ke.vy))}!_e.interactionState.dragInProgress&&ye<.1&&_e.forceLayouts[ve].alpha()>0&&_e.forceLayouts[ve].alpha(0)}}(0,ie,fe,ae)).stop()}(0,K,X),function(ee,ie,ae,oe,fe){window.requestAnimationFrame(function ge(){var ve;for(ve=0;ve<h.forceTicksPerFrame;ve++)ae.forceLayouts[oe].tick();if(function(_e){for(var ye=0;ye<_e.length;ye++)_e[ye].y0=_e[ye].y-_e[ye].dy/2,_e[ye].y1=_e[ye].y0+_e[ye].dy,_e[ye].x0=_e[ye].x-_e[ye].dx/2,_e[ye].x1=_e[ye].x0+_e[ye].dx}(ae.graph.nodes),ae.sankey.update(ae.graph),O(ee.filter(F(ae)),ie),ae.forceLayouts[oe].alpha()>0)window.requestAnimationFrame(ge);else{var xe=ae.node.originalX;ae.node.x0=xe-ae.visibleWidth/2,ae.node.x1=xe+ae.visibleWidth/2,j(ae,fe)}})}(V,H,X,K,$)}}).on("drag",function(X){if(X.arrangement!=="fixed"){var K=i.event.x,ee=i.event.y;X.arrangement==="snap"?(X.node.x0=K-X.visibleWidth/2,X.node.x1=K+X.visibleWidth/2,X.node.y0=ee-X.visibleHeight/2,X.node.y1=ee+X.visibleHeight/2):(X.arrangement==="freeform"&&(X.node.x0=K-X.visibleWidth/2,X.node.x1=K+X.visibleWidth/2),ee=Math.max(0,Math.min(X.size-X.visibleHeight/2,ee)),X.node.y0=ee-X.visibleHeight/2,X.node.y1=ee+X.visibleHeight/2),Z(X.node),X.arrangement!=="snap"&&(X.sankey.update(X.graph),O(V.filter(F(X)),H))}}).on("dragend",function(X){if(X.arrangement!=="fixed"){X.interactionState.dragInProgress=!1;for(var K=0;K<X.node.childrenNodes.length;K++)X.node.childrenNodes[K].x=X.node.x,X.node.childrenNodes[K].y=X.node.y;X.arrangement!=="snap"&&j(X,$)}});V.on(".drag",null).call(J)}function j(V,H){for(var te=[],$=[],J=0;J<V.graph.nodes.length;J++){var X=(V.graph.nodes[J].x0+V.graph.nodes[J].x1)/2,K=(V.graph.nodes[J].y0+V.graph.nodes[J].y1)/2;te.push(X/V.figure.width),$.push(K/V.figure.height)}g.call("_guiRestyle",H,{"node.x":[te],"node.y":[$]},V.trace.index).then(function(){H._fullLayout._dragCover&&H._fullLayout._dragCover.remove()})}function Z(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function F(V){return function(H){return H.node.originalX===V.node.originalX}}N.exports=function(V,H,te,$,J){var X=V._context.staticPlot,K=!1;n.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){K=!0});var ee=V._fullLayout._dragCover,ie=te.filter(function(ye){return c(ye).trace.visible}).map(y.bind(null,$)),ae=H.selectAll("."+h.cn.sankey).data(ie,u);ae.exit().remove(),ae.enter().append("g").classed(h.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",X?"none":"auto").attr("transform",z),ae.each(function(ye,Ce){V._fullData[Ce]._sankey=ye;var ke="bgsankey-"+ye.trace.uid+"-"+Ce;n.ensureSingle(V._fullLayout._draggers,"rect",ke),V._fullData[Ce]._bgRect=i.select("."+ke),V._fullData[Ce]._bgRect.style("pointer-events",X?"none":"all").attr("width",ye.width).attr("height",ye.height).attr("x",ye.translateX).attr("y",ye.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ae.transition().ease(h.ease).duration(h.duration).attr("transform",z);var oe=ae.selectAll("."+h.cn.sankeyLinks).data(p,u);oe.enter().append("g").classed(h.cn.sankeyLinks,!0).style("fill","none");var fe=oe.selectAll("."+h.cn.sankeyLink).data(function(ye){return ye.graph.links.filter(function(Ce){return Ce.value}).map(k.bind(null,ye))},u);fe.enter().append("path").classed(h.cn.sankeyLink,!0).call(U,ae,J.linkEvents),fe.style("stroke",function(ye){return I(ye)?t.tinyRGB(s(ye.linkLineColor)):ye.tinyColorHue}).style("stroke-opacity",function(ye){return I(ye)?t.opacity(ye.linkLineColor):ye.tinyColorAlpha}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}).style("stroke-width",function(ye){return I(ye)?ye.linkLineWidth:1}).attr("d",f()),fe.style("opacity",function(){return V._context.staticPlot||K||ee?1:0}).transition().ease(h.ease).duration(h.duration).style("opacity",1),fe.exit().transition().ease(h.ease).duration(h.duration).style("opacity",0).remove();var ge=ae.selectAll("."+h.cn.sankeyNodeSet).data(p,u);ge.enter().append("g").classed(h.cn.sankeyNodeSet,!0),ge.style("cursor",function(ye){switch(ye.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ve=ge.selectAll("."+h.cn.sankeyNode).data(function(ye){var Ce=ye.graph.nodes;return function(ke){var Te,le=[];for(Te=0;Te<ke.length;Te++)ke[Te].originalX=(ke[Te].x0+ke[Te].x1)/2,ke[Te].originalY=(ke[Te].y0+ke[Te].y1)/2,le.indexOf(ke[Te].originalX)===-1&&le.push(ke[Te].originalX);for(le.sort(function(ue,de){return ue-de}),Te=0;Te<ke.length;Te++)ke[Te].originalLayerIndex=le.indexOf(ke[Te].originalX),ke[Te].originalLayer=ke[Te].originalLayerIndex/(le.length-1)}(Ce),Ce.map(S.bind(null,ye))},u);ve.enter().append("g").classed(h.cn.sankeyNode,!0).call(M).style("opacity",function(ye){return!V._context.staticPlot&&!K||ye.partOfGroup?0:1}),ve.call(U,ae,J.nodeEvents).call(R,fe,J,V),ve.transition().ease(h.ease).duration(h.duration).call(M).style("opacity",function(ye){return ye.partOfGroup?0:1}),ve.exit().transition().ease(h.ease).duration(h.duration).style("opacity",0).remove();var xe=ve.selectAll("."+h.cn.nodeRect).data(p);xe.enter().append("rect").classed(h.cn.nodeRect,!0).call(P),xe.style("stroke-width",function(ye){return ye.nodeLineWidth}).style("stroke",function(ye){return t.tinyRGB(s(ye.nodeLineColor))}).style("stroke-opacity",function(ye){return t.opacity(ye.nodeLineColor)}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}),xe.transition().ease(h.ease).duration(h.duration).call(P);var _e=ve.selectAll("."+h.cn.nodeLabel).data(p);_e.enter().append("text").classed(h.cn.nodeLabel,!0).style("cursor","default"),_e.attr("data-notex",1).text(function(ye){return ye.node.label}).each(function(ye){var Ce=i.select(this);a.font(Ce,ye.textFont),b.convertToTspans(Ce,V)}).style("text-shadow",b.makeTextShadow(V._fullLayout.paper_bgcolor)).attr("text-anchor",function(ye){return ye.horizontal&&ye.left?"end":"start"}).attr("transform",function(ye){var Ce=i.select(this),ke=b.lineCount(Ce),Te=ye.textFont.size*((ke-1)*x-m),le=ye.nodeLineWidth/2+3,ue=((ye.horizontal?ye.visibleHeight:ye.visibleWidth)-Te)/2;ye.horizontal&&(ye.left?le=-le:le+=ye.visibleWidth);var de=ye.horizontal?"":"scale(-1,1)"+l(90);return r(ye.horizontal?le:ue,ye.horizontal?ue:le)+de}),_e.transition().ease(h.ease).duration(h.duration)}},84564:function(N){N.exports=function(L,e){for(var T=[],w=L.cd[0].trace,i=w._sankey.graph.nodes,_=0;_<i.length;_++){var v=i[_];if(!v.partOfGroup){var h=[(v.x0+v.x1)/2,(v.y0+v.y1)/2];w.orientation==="v"&&h.reverse(),e&&e.contains(h,!1,_,L)&&T.push({pointNumber:v.pointNumber})}}return T}},75225:function(N,L,e){var T=e(71828);N.exports=function(w,i){for(var _=0;_<w.length;_++)w[_].i=_;T.mergeArray(i.text,w,"tx"),T.mergeArray(i.texttemplate,w,"txt"),T.mergeArray(i.hovertext,w,"htx"),T.mergeArray(i.customdata,w,"data"),T.mergeArray(i.textposition,w,"tp"),i.textfont&&(T.mergeArrayCastPositive(i.textfont.size,w,"ts"),T.mergeArray(i.textfont.color,w,"tc"),T.mergeArray(i.textfont.family,w,"tf"));var v=i.marker;if(v){T.mergeArrayCastPositive(v.size,w,"ms"),T.mergeArrayCastPositive(v.opacity,w,"mo"),T.mergeArray(v.symbol,w,"mx"),T.mergeArray(v.angle,w,"ma"),T.mergeArray(v.standoff,w,"mf"),T.mergeArray(v.color,w,"mc");var h=v.line;v.line&&(T.mergeArray(h.color,w,"mlc"),T.mergeArrayCastPositive(h.width,w,"mlw"));var s=v.gradient;s&&s.type!=="none"&&(T.mergeArray(s.type,w,"mgt"),T.mergeArray(s.color,w,"mgc"))}}},82196:function(N,L,e){var T=e(12663).axisHoverFormat,w=e(5386).si,i=e(5386).fF,_=e(50693),v=e(41940),h=e(79952).P,s=e(79952).u,t=e(91424),a=e(47581),n=e(1426).extendFlat;N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:T("x"),yhoverformat:T("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:w({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:a.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},h,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:s,marker:n({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},_("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},_("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:v({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(N,L,e){var T=e(92770),w=e(71828),i=e(89298),_=e(42973),v=e(50606).BADNUM,h=e(34098),s=e(36922),t=e(75225),a=e(66279);function n(p,c,b,g,d,m,x){var y=c._length,k=p._fullLayout,f=b._id,S=g._id,M=k._firstScatter[o(c)]===c.uid,E=(u(c,k,b,g)||{}).orientation,O=c.fill;b._minDtick=0,g._minDtick=0;var P={padded:!0},I={padded:!0};x&&(P.ppad=I.ppad=x);var z=y<2||d[0]!==d[y-1]||m[0]!==m[y-1];z&&(O==="tozerox"||O==="tonextx"&&(M||E==="h"))?P.tozero=!0:(c.error_y||{}).visible||O!=="tonexty"&&O!=="tozeroy"&&(h.hasMarkers(c)||h.hasText(c))||(P.padded=!1,P.ppad=0),z&&(O==="tozeroy"||O==="tonexty"&&(M||E==="v"))?I.tozero=!0:O!=="tonextx"&&O!=="tozerox"||(I.padded=!1),f&&(c._extremes[f]=i.findExtremes(b,d,P)),S&&(c._extremes[S]=i.findExtremes(g,m,I))}function r(p,c){if(h.hasMarkers(p)){var b,g=p.marker,d=1.6*(p.marker.sizeref||1);if(b=p.marker.sizemode==="area"?function(f){return Math.max(Math.sqrt((f||0)/d),3)}:function(f){return Math.max((f||0)/d,3)},w.isArrayOrTypedArray(g.size)){var m={type:"linear"};i.setConvert(m);for(var x=m.makeCalcdata(p.marker,"size"),y=new Array(c),k=0;k<c;k++)y[k]=b(x[k]);return y}return b(g.size)}}function l(p,c){var b=o(c),g=p._firstScatter;g[b]||(g[b]=c.uid)}function o(p){var c=p.stackgroup;return p.xaxis+p.yaxis+p.type+(c?"-"+c:"")}function u(p,c,b,g){var d=p.stackgroup;if(d){var m=c._scatterStackOpts[b._id+g._id][d],x=m.orientation==="v"?g:b;return x.type==="linear"||x.type==="log"?m:void 0}}N.exports={calc:function(p,c){var b,g,d,m,x,y,k=p._fullLayout,f=c._xA=i.getFromId(p,c.xaxis||"x","x"),S=c._yA=i.getFromId(p,c.yaxis||"y","y"),M=f.makeCalcdata(c,"x"),E=S.makeCalcdata(c,"y"),O=_(c,f,"x",M),P=_(c,S,"y",E),I=O.vals,z=P.vals,U=c._length,R=new Array(U),j=c.ids,Z=u(c,k,f,S),F=!1;l(k,c);var V,H="x",te="y";Z?(w.pushUnique(Z.traceIndices,c._expandedIndex),(b=Z.orientation==="v")?(te="s",V="x"):(H="s",V="y"),x=Z.stackgaps==="interpolate"):n(p,c,f,S,I,z,r(c,U));var $=!!c.xperiodalignment,J=!!c.yperiodalignment;for(g=0;g<U;g++){var X=R[g]={},K=T(I[g]),ee=T(z[g]);K&&ee?(X[H]=I[g],X[te]=z[g],$&&(X.orig_x=M[g],X.xEnd=O.ends[g],X.xStart=O.starts[g]),J&&(X.orig_y=E[g],X.yEnd=P.ends[g],X.yStart=P.starts[g])):Z&&(b?K:ee)?(X[V]=b?I[g]:z[g],X.gap=!0,x?(X.s=v,F=!0):X.s=0):X[H]=X[te]=v,j&&(X.id=String(j[g]))}if(t(R,c),s(p,c),a(R,c),Z){for(g=0;g<R.length;)R[g][V]===v?R.splice(g,1):g++;if(w.sort(R,function(fe,ge){return fe[V]-ge[V]||fe.i-ge.i}),F){for(g=0;g<R.length-1&&R[g].gap;)g++;for((y=R[g].s)||(y=R[g].s=0),d=0;d<g;d++)R[d].s=y;for(m=R.length-1;m>g&&R[m].gap;)m--;for(y=R[m].s,d=R.length-1;d>m;d--)R[d].s=y;for(;g<m;)if(R[++g].gap){for(d=g+1;R[d].gap;)d++;for(var ie=R[g-1][V],ae=R[g-1].s,oe=(R[d].s-ae)/(R[d][V]-ie);g<d;)R[g].s=ae+(R[g][V]-ie)*oe,g++}}}return R},calcMarkerSize:r,calcAxisExpansion:n,setFirstScatter:l,getStackOpts:u}},66279:function(N,L,e){var T=e(71828);N.exports=function(w,i){T.isArrayOrTypedArray(i.selectedpoints)&&T.tagSelected(w,i)}},36922:function(N,L,e){var T=e(52075).hasColorscale,w=e(78803),i=e(34098);N.exports=function(_,v){i.hasLines(v)&&T(v,"line")&&w(_,v,{vals:v.line.color,containerStr:"line",cLetter:"c"}),i.hasMarkers(v)&&(T(v,"marker")&&w(_,v,{vals:v.marker.color,containerStr:"marker",cLetter:"c"}),T(v,"marker.line")&&w(_,v,{vals:v.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(N){N.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(N,L,e){var T=e(47761),w=e(11661).setGroupPositions;function i(_,v,h,s,t,a,n){t[s]=!0;var r={i:null,gap:!0,s:0};if(r[n]=h,_.splice(v,0,r),v&&h===_[v-1][n]){var l=_[v-1];r.s=l.s,r.i=l.i,r.gap=l.gap}else a&&(r.s=function(o,u,p,c){var b=o[u-1],g=o[u+1];return g?b?b.s+(g.s-b.s)*(p-b[c])/(g[c]-b[c]):g.s:b.s}(_,v,h,n));v||(_[0].t=_[1].t,_[0].trace=_[1].trace,delete _[1].t,delete _[1].trace)}N.exports=function(_,v){_._fullLayout.scattermode==="group"&&function(V,H){for(var te=H.xaxis,$=H.yaxis,J=V._fullLayout,X=V._fullData,K=V.calcdata,ee=[],ie=[],ae=0;ae<X.length;ae++){var oe=X[ae];oe.visible===!0&&oe.type==="scatter"&&oe.xaxis===te._id&&oe.yaxis===$._id&&(oe.orientation==="h"?ee.push(K[ae]):oe.orientation==="v"&&ie.push(K[ae]))}var fe={mode:J.scattermode,gap:J.scattergap};w(V,te,$,ie,fe),w(V,$,te,ee,fe)}(_,v);var h=v.xaxis,s=v.yaxis,t=h._id+s._id,a=_._fullLayout._scatterStackOpts[t];if(a){var n,r,l,o,u,p,c,b,g,d,m,x,y,k,f,S=_.calcdata;for(var M in a){var E=(d=a[M]).traceIndices;if(E.length){for(m=d.stackgaps==="interpolate",x=d.groupnorm,d.orientation==="v"?(y="x",k="y"):(y="y",k="x"),f=new Array(E.length),n=0;n<f.length;n++)f[n]=!1;p=S[E[0]];var O=new Array(p.length);for(n=0;n<p.length;n++)O[n]=p[n][y];for(n=1;n<E.length;n++){for(u=S[E[n]],r=l=0;r<u.length;r++){for(c=u[r][y];c>O[l]&&l<O.length;l++)i(u,r,O[l],n,f,m,y),r++;if(c!==O[l]){for(o=0;o<n;o++)i(S[E[o]],l,c,o,f,m,y);O.splice(l,0,c)}l++}for(;l<O.length;l++)i(u,r,O[l],n,f,m,y),r++}var P=O.length;for(r=0;r<p.length;r++){for(b=p[r][k]=p[r].s,n=1;n<E.length;n++)(u=S[E[n]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=P,b+=u[r].s,u[r][k]=b;if(x)for(g=(x==="fraction"?b:b/100)||1,n=0;n<E.length;n++){var I=S[E[n]][r];I[k]/=g,I.sNorm=I.s/g}}for(n=0;n<E.length;n++){var z=(u=S[E[n]])[0].trace,U=T.calcMarkerSize(z,z._rawLength),R=Array.isArray(U);if(U&&f[n]||R){var j=U;for(U=new Array(P),r=0;r<P;r++)U[r]=u[r].gap?0:R?j[u[r].i]:j}var Z=new Array(P),F=new Array(P);for(r=0;r<P;r++)Z[r]=u[r].x,F[r]=u[r].y;T.calcAxisExpansion(_,z,h,s,Z,F,U),u[0].t.orientation=d.orientation}}}}}},34936:function(N,L,e){var T=e(71828),w=e(26125),i=e(82196);N.exports=function(_,v){var h,s,t;function a(u){return T.coerce(s._input,s,i,u)}if(v.scattermode==="group")for(t=0;t<_.length;t++)(s=_[t]).type==="scatter"&&(h=s._input,w(h,s,v,a));for(t=0;t<_.length;t++){var n=_[t];if(n.type==="scatter"){var r=n.fill;if(r!=="none"&&r!=="toself"&&(n.opacity=void 0,r==="tonexty"||r==="tonextx"))for(var l=t-1;l>=0;l--){var o=_[l];if(o.type==="scatter"&&o.xaxis===n.xaxis&&o.yaxis===n.yaxis){o.opacity=void 0;break}}}}}},17438:function(N,L,e){var T=e(71828),w=e(73972),i=e(82196),_=e(47581),v=e(34098),h=e(67513),s=e(73927),t=e(565),a=e(49508),n=e(11058),r=e(94039),l=e(82410),o=e(28908),u=e(71828).coercePattern;N.exports=function(p,c,b,g){function d(E,O){return T.coerce(p,c,i,E,O)}var m=h(p,c,g,d);if(m||(c.visible=!1),c.visible){s(p,c,g,d),d("xhoverformat"),d("yhoverformat");var x=t(p,c,g,d);g.scattermode==="group"&&c.orientation===void 0&&d("orientation","v");var y=!x&&m<_.PTS_LINESONLY?"lines+markers":"lines";d("text"),d("hovertext"),d("mode",y),v.hasMarkers(c)&&a(p,c,b,g,d,{gradient:!0}),v.hasLines(c)&&(n(p,c,b,g,d,{backoff:!0}),r(p,c,d),d("connectgaps"),d("line.simplify")),v.hasText(c)&&(d("texttemplate"),l(p,c,g,d));var k=[];(v.hasMarkers(c)||v.hasText(c))&&(d("cliponaxis"),d("marker.maxdisplayed"),k.push("points")),d("fill",x?x.fillDflt:"none"),c.fill!=="none"&&(o(p,c,b,d),v.hasLines(c)||r(p,c,d),u(d,"fillpattern",c.fillcolor,!1));var f=(c.line||{}).color,S=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||k.push("fills"),d("hoveron",k.join("+")||"points"),c.hoveron!=="fills"&&d("hovertemplate");var M=w.getComponentMethod("errorbars","supplyDefaults");M(p,c,f||S||b,{axis:"y"}),M(p,c,f||S||b,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(c,d)}}},28908:function(N,L,e){var T=e(7901),w=e(71828).isArrayOrTypedArray;N.exports=function(i,_,v,h){var s=!1;if(_.marker){var t=_.marker.color,a=(_.marker.line||{}).color;t&&!w(t)?s=t:a&&!w(a)&&(s=a)}h("fillcolor",T.addOpacity((_.line||{}).color||s||v,.5))}},8225:function(N,L,e){var T=e(89298);N.exports=function(w,i,_){var v={},h={_fullLayout:_},s=T.getFromTrace(h,i,"x"),t=T.getFromTrace(h,i,"y"),a=w.orig_x;a===void 0&&(a=w.x);var n=w.orig_y;return n===void 0&&(n=w.y),v.xLabel=T.tickText(s,s.c2l(a),!0).text,v.yLabel=T.tickText(t,t.c2l(n),!0).text,v}},34603:function(N,L,e){var T=e(7901),w=e(34098);N.exports=function(i,_){var v,h;if(i.mode==="lines")return(v=i.line.color)&&T.opacity(v)?v:i.fillcolor;if(i.mode==="none")return i.fill?i.fillcolor:"";var s=_.mcc||(i.marker||{}).color,t=_.mlcc||((i.marker||{}).line||{}).color;return(h=s&&T.opacity(s)?s:t&&T.opacity(t)&&(_.mlw||((i.marker||{}).line||{}).width)?t:"")?T.opacity(h)<.3?T.addOpacity(h,.3):h:(v=(i.line||{}).color)&&T.opacity(v)&&w.hasLines(i)&&i.line.width?v:i.fillcolor}},26125:function(N,L,e){var T=e(99082).getAxisGroup;N.exports=function(w,i,_,v){var h=i.orientation,s=i[{v:"x",h:"y"}[h]+"axis"],t=T(_,s)+h,a=_._alignmentOpts||{},n=v("alignmentgroup"),r=a[t];r||(r=a[t]={});var l=r[n];l?l.traces.push(i):l=r[n]={traces:[i],alignmentIndex:Object.keys(r).length,offsetGroups:{}};var o=v("offsetgroup"),u=l.offsetGroups,p=u[o];o&&(p||(p=u[o]={offsetIndex:Object.keys(u).length}),i._offsetIndex=p.offsetIndex)}},33720:function(N,L,e){var T=e(71828),w=e(30211),i=e(73972),_=e(34603),v=e(7901),h=T.fillText;N.exports=function(s,t,a,n){var r=s.cd,l=r[0].trace,o=s.xa,u=s.ya,p=o.c2p(t),c=u.c2p(a),b=[p,c],g=l.hoveron||"",d=l.mode.indexOf("markers")!==-1?3:.5,m=!!l.xperiodalignment,x=!!l.yperiodalignment;if(g.indexOf("points")!==-1){var y=function(ve){var xe=Math.max(d,ve.mrc||0),_e=o.c2p(ve.x)-p,ye=u.c2p(ve.y)-c;return Math.max(Math.sqrt(_e*_e+ye*ye)-xe,1-d/xe)},k=w.getDistanceFunction(n,function(ve){if(m){var xe=o.c2p(ve.xStart),_e=o.c2p(ve.xEnd);return p>=Math.min(xe,_e)&&p<=Math.max(xe,_e)?0:1/0}var ye=Math.max(3,ve.mrc||0),Ce=1-1/ye,ke=Math.abs(o.c2p(ve.x)-p);return ke<ye?Ce*ke/ye:ke-ye+Ce},function(ve){if(x){var xe=u.c2p(ve.yStart),_e=u.c2p(ve.yEnd);return c>=Math.min(xe,_e)&&c<=Math.max(xe,_e)?0:1/0}var ye=Math.max(3,ve.mrc||0),Ce=1-1/ye,ke=Math.abs(u.c2p(ve.y)-c);return ke<ye?Ce*ke/ye:ke-ye+Ce},y);if(w.getClosest(r,k,s),s.index!==!1){var f=r[s.index],S=o.c2p(f.x,!0),M=u.c2p(f.y,!0),E=f.mrc||1;s.index=f.i;var O=r[0].t.orientation,P=O&&(f.sNorm||f.s),I=O==="h"?P:f.orig_x!==void 0?f.orig_x:f.x,z=O==="v"?P:f.orig_y!==void 0?f.orig_y:f.y;return T.extendFlat(s,{color:_(l,f),x0:S-E,x1:S+E,xLabelVal:I,y0:M-E,y1:M+E,yLabelVal:z,spikeDistance:y(f),hovertemplate:l.hovertemplate}),h(f,l,s),i.getComponentMethod("errorbars","hoverInfo")(f,l,s),[s]}}if(g.indexOf("fills")!==-1&&l._polygons){var U,R,j,Z,F,V,H,te,$,J=l._polygons,X=[],K=!1,ee=1/0,ie=-1/0,ae=1/0,oe=-1/0;for(U=0;U<J.length;U++)(j=J[U]).contains(b)&&(K=!K,X.push(j),ae=Math.min(ae,j.ymin),oe=Math.max(oe,j.ymax));if(K){var fe=((ae=Math.max(ae,0))+(oe=Math.min(oe,u._length)))/2;for(U=0;U<X.length;U++)for(Z=X[U].pts,R=1;R<Z.length;R++)(te=Z[R-1][1])>fe!=($=Z[R][1])>=fe&&(V=Z[R-1][0],H=Z[R][0],$-te&&(F=V+(H-V)*(fe-te)/($-te),ee=Math.min(ee,F),ie=Math.max(ie,F)));ee=Math.max(ee,0),ie=Math.min(ie,o._length);var ge=v.defaultLine;return v.opacity(l.fillcolor)?ge=l.fillcolor:v.opacity((l.line||{}).color)&&(ge=l.line.color),T.extendFlat(s,{distance:s.maxHoverDistance,x0:ee,x1:ie,y0:fe,y1:fe,color:ge,hovertemplate:!1}),delete s.index,l.text&&!T.isArrayOrTypedArray(l.text)?s.text=String(l.text):s.text=l.name,[s]}}}},67368:function(N,L,e){var T=e(34098);N.exports={hasLines:T.hasLines,hasMarkers:T.hasMarkers,hasText:T.hasText,isBubble:T.isBubble,attributes:e(82196),layoutAttributes:e(21479),supplyDefaults:e(17438),crossTraceDefaults:e(34936),supplyLayoutDefaults:e(79334),calc:e(47761).calc,crossTraceCalc:e(72626),arraysToCalcdata:e(75225),plot:e(32663),colorbar:e(4898),formatLabels:e(8225),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(33720),selectPoints:e(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(N){N.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(N,L,e){var T=e(71828),w=e(21479);N.exports=function(i,_){var v,h=_.barmode==="group";_.scattermode==="group"&&(v=h?_.bargap:.2,T.coerce(i,_,w,"scattergap",v))}},11058:function(N,L,e){var T=e(71828).isArrayOrTypedArray,w=e(52075).hasColorscale,i=e(1586);N.exports=function(_,v,h,s,t,a){a||(a={});var n=(_.marker||{}).color;n&&n._inputArray&&(n=n._inputArray),t("line.color",h),w(_,"line")?i(_,v,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!T(n)&&n||h),t("line.width"),a.noDash||t("line.dash"),a.backoff&&t("line.backoff")}},34621:function(N,L,e){var T=e(91424),w=e(50606),i=w.BADNUM,_=w.LOG_CLIP,v=_+.5,h=_-.5,s=e(71828),t=s.segmentsIntersect,a=s.constrain,n=e(47581);N.exports=function(r,l){var o,u,p,c,b,g,d,m,x,y,k,f,S,M,E,O,P,I,z=l.trace||{},U=l.xaxis,R=l.yaxis,j=U.type==="log",Z=R.type==="log",F=U._length,V=R._length,H=l.backoff,te=z.marker,$=l.connectGaps,J=l.baseTolerance,X=l.shape,K=X==="linear",ee=z.fill&&z.fill!=="none",ie=[],ae=n.minTolerance,oe=r.length,fe=new Array(oe),ge=0;function ve(Pt){var Xe=r[Pt];if(!Xe)return!1;var Ke=l.linearized?U.l2p(Xe.x):U.c2p(Xe.x),He=l.linearized?R.l2p(Xe.y):R.c2p(Xe.y);if(Ke===i){if(j&&(Ke=U.c2p(Xe.x,!0)),Ke===i)return!1;Z&&He===i&&(Ke*=Math.abs(U._m*V*(U._m>0?v:h)/(R._m*F*(R._m>0?v:h)))),Ke*=1e3}if(He===i){if(Z&&(He=R.c2p(Xe.y,!0)),He===i)return!1;He*=1e3}return[Ke,He]}function xe(Pt,Xe,Ke,He){var Je=Ke-Pt,lt=He-Xe,ot=.5-Pt,je=.5-Xe,Ue=Je*Je+lt*lt,at=Je*ot+lt*je;if(at>0&&at<Ue){var $e=ot*lt-je*Je;if($e*$e<Ue)return!0}}function _e(Pt,Xe){var Ke=Pt[0]/F,He=Pt[1]/V,Je=Math.max(0,-Ke,Ke-1,-He,He-1);return Je&&P!==void 0&&xe(Ke,He,P,I)&&(Je=0),Je&&Xe&&xe(Ke,He,Xe[0]/F,Xe[1]/V)&&(Je=0),(1+n.toleranceGrowth*Je)*J}function ye(Pt,Xe){var Ke=Pt[0]-Xe[0],He=Pt[1]-Xe[1];return Math.sqrt(Ke*Ke+He*He)}var Ce,ke,Te,le,ue,de,Le,we=n.maxScreensAway,Ee=-F*we,Oe=F*(1+we),Fe=-V*we,pe=V*(1+we),be=[[Ee,Fe,Oe,Fe],[Oe,Fe,Oe,pe],[Oe,pe,Ee,pe],[Ee,pe,Ee,Fe]];function Me(Pt){if(Pt[0]<Ee||Pt[0]>Oe||Pt[1]<Fe||Pt[1]>pe)return[a(Pt[0],Ee,Oe),a(Pt[1],Fe,pe)]}function De(Pt,Xe){return Pt[0]===Xe[0]&&(Pt[0]===Ee||Pt[0]===Oe)||Pt[1]===Xe[1]&&(Pt[1]===Fe||Pt[1]===pe)||void 0}function Ne(Pt,Xe,Ke){return function(He,Je){var lt=Me(He),ot=Me(Je),je=[];if(lt&&ot&&De(lt,ot))return je;lt&&je.push(lt),ot&&je.push(ot);var Ue=2*s.constrain((He[Pt]+Je[Pt])/2,Xe,Ke)-((lt||He)[Pt]+(ot||Je)[Pt]);return Ue&&((lt&&ot?Ue>0==lt[Pt]>ot[Pt]?lt:ot:lt||ot)[Pt]+=Ue),je}}function Be(Pt){var Xe=Pt[0],Ke=Pt[1],He=Xe===fe[ge-1][0],Je=Ke===fe[ge-1][1];if(!He||!Je)if(ge>1){var lt=Xe===fe[ge-2][0],ot=Ke===fe[ge-2][1];He&&(Xe===Ee||Xe===Oe)&&lt?ot?ge--:fe[ge-1]=Pt:Je&&(Ke===Fe||Ke===pe)&&ot?lt?ge--:fe[ge-1]=Pt:fe[ge++]=Pt}else fe[ge++]=Pt}function Ye(Pt){fe[ge-1][0]!==Pt[0]&&fe[ge-1][1]!==Pt[1]&&Be([Te,le]),Be(Pt),ue=null,Te=le=0}X==="linear"||X==="spline"?Le=function(Pt,Xe){for(var Ke=[],He=0,Je=0;Je<4;Je++){var lt=be[Je],ot=t(Pt[0],Pt[1],Xe[0],Xe[1],lt[0],lt[1],lt[2],lt[3]);ot&&(!He||Math.abs(ot.x-Ke[0][0])>1||Math.abs(ot.y-Ke[0][1])>1)&&(ot=[ot.x,ot.y],He&&ye(ot,Pt)<ye(Ke[0],Pt)?Ke.unshift(ot):Ke.push(ot),He++)}return Ke}:X==="hv"||X==="vh"?Le=function(Pt,Xe){var Ke=[],He=Me(Pt),Je=Me(Xe);return He&&Je&&De(He,Je)||(He&&Ke.push(He),Je&&Ke.push(Je)),Ke}:X==="hvh"?Le=Ne(0,Ee,Oe):X==="vhv"&&(Le=Ne(1,Fe,pe));var We=s.isArrayOrTypedArray(te);function et(Pt){if(Pt&&H&&(Pt.i=o,Pt.d=r,Pt.trace=z,Pt.marker=We?te[Pt.i]:te,Pt.backoff=H),P=Pt[0]/F,I=Pt[1]/V,Ce=Pt[0]<Ee?Ee:Pt[0]>Oe?Oe:0,ke=Pt[1]<Fe?Fe:Pt[1]>pe?pe:0,Ce||ke){if(ge)if(ue){var Xe=Le(ue,Pt);Xe.length>1&&(Ye(Xe[0]),fe[ge++]=Xe[1])}else de=Le(fe[ge-1],Pt)[0],fe[ge++]=de;else fe[ge++]=[Ce||Pt[0],ke||Pt[1]];var Ke=fe[ge-1];Ce&&ke&&(Ke[0]!==Ce||Ke[1]!==ke)?(ue&&(Te!==Ce&&le!==ke?Be(Te&&le?(He=ue,lt=(Je=Pt)[0]-He[0],ot=(Je[1]-He[1])/lt,(He[1]*Je[0]-Je[1]*He[0])/lt>0?[ot>0?Ee:Oe,pe]:[ot>0?Oe:Ee,Fe]):[Te||Ce,le||ke]):Te&&le&&Be([Te,le])),Be([Ce,ke])):Te-Ce&&le-ke&&Be([Ce||Te,ke||le]),ue=Pt,Te=Ce,le=ke}else ue&&Ye(Le(ue,Pt)[0]),fe[ge++]=Pt;var He,Je,lt,ot}for(o=0;o<oe;o++)if(u=ve(o)){for(ge=0,ue=null,et(u),o++;o<oe;o++){if(!(c=ve(o))){if($)continue;break}if(K&&l.simplify){var ft=ve(o+1);if(y=ye(c,u),ee&&(ge===0||ge===oe-1)||!(y<_e(c,ft)*ae)){for(m=[(c[0]-u[0])/y,(c[1]-u[1])/y],b=u,k=y,f=M=E=0,d=!1,p=c,o++;o<r.length;o++){if(g=ft,ft=ve(o+1),!g){if($)continue;break}if(O=(x=[g[0]-u[0],g[1]-u[1]])[0]*m[1]-x[1]*m[0],M=Math.min(M,O),(E=Math.max(E,O))-M>_e(g,ft))break;p=g,(S=x[0]*m[0]+x[1]*m[1])>k?(k=S,c=g,d=!1):S<f&&(f=S,b=g,d=!0)}if(d?(et(c),p!==b&&et(b)):(b!==u&&et(b),p!==c&&et(c)),et(p),o>=r.length||!g)break;et(g),u=g}}else et(c)}ue&&Be([Te||ue[0],le||ue[1]]),ie.push(fe.slice(0,ge))}var ht=X.slice(X.length-1);if(H&&ht!=="h"&&ht!=="v"){for(var mt=!1,Mt=-1,_t=[],it=0;it<ie.length;it++)for(var st=0;st<ie[it].length-1;st++){var St=ie[it][st],zt=ie[it][st+1],Ft=T.applyBackoff(zt,St);Ft[0]===zt[0]&&Ft[1]===zt[1]||(mt=!0),_t[Mt+1]||(_t[++Mt]=[St,[Ft[0],Ft[1]]])}return mt?_t:ie}return ie}},94039:function(N){N.exports=function(L,e,T){T("line.shape")==="spline"&&T("line.smoothing")}},68687:function(N){var L={tonextx:1,tonexty:1,tonext:1};N.exports=function(e,T,w){var i,_,v,h,s,t={},a=!1,n=-1,r=0,l=-1;for(_=0;_<w.length;_++)(v=(i=w[_][0].trace).stackgroup||"")?v in t?s=t[v]:(s=t[v]=r,r++):i.fill in L&&l>=0?s=l:(s=l=r,r++),s<n&&(a=!0),i._groupIndex=n=s;var o=w.slice();a&&o.sort(function(p,c){var b=p[0].trace,g=c[0].trace;return b._groupIndex-g._groupIndex||b.index-g.index});var u={};for(_=0;_<o.length;_++)v=(i=o[_][0].trace).stackgroup||"",i.visible===!0?(i._nexttrace=null,i.fill in L&&(h=u[v],i._prevtrace=h||null,h&&(h._nexttrace=i)),i._ownfill=i.fill&&(i.fill.substr(0,6)==="tozero"||i.fill==="toself"||i.fill.substr(0,2)==="to"&&!i._prevtrace),u[v]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return o}},39984:function(N,L,e){var T=e(92770);N.exports=function(w,i){i||(i=2);var _=w.marker,v=_.sizeref||1,h=_.sizemin||0,s=_.sizemode==="area"?function(t){return Math.sqrt(t/v)}:function(t){return t/v};return function(t){var a=s(t/i);return T(a)&&a>0?Math.max(a,h):0}}},4898:function(N){N.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(N,L,e){var T=e(7901),w=e(52075).hasColorscale,i=e(1586),_=e(34098);N.exports=function(v,h,s,t,a,n){var r=_.isBubble(v),l=(v.line||{}).color;n=n||{},l&&(s=l),a("marker.symbol"),a("marker.opacity",r?.7:1),a("marker.size"),n.noAngle||(a("marker.angle"),n.noAngleRef||a("marker.angleref"),n.noStandOff||a("marker.standoff")),a("marker.color",s),w(v,"marker")&&i(v,h,t,a,{prefix:"marker.",cLetter:"c"}),n.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),n.noLine||(a("marker.line.color",l&&!Array.isArray(l)&&h.marker.color!==l?l:r?T.background:T.defaultLine),w(v,"marker.line")&&i(v,h,t,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",r?1:0)),r&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),n.gradient&&a("marker.gradient.type")!=="none"&&a("marker.gradient.color")}},73927:function(N,L,e){var T=e(71828).dateTick0,w=e(50606).ONEWEEK;function i(_,v){return T(v,_%w==0?1:0)}N.exports=function(_,v,h,s,t){if(t||(t={x:!0,y:!0}),t.x){var a=s("xperiod");a&&(s("xperiod0",i(a,v.xcalendar)),s("xperiodalignment"))}if(t.y){var n=s("yperiod");n&&(s("yperiod0",i(n,v.ycalendar)),s("yperiodalignment"))}}},32663:function(N,L,e){var T=e(39898),w=e(73972),i=e(71828),_=i.ensureSingle,v=i.identity,h=e(91424),s=e(34098),t=e(34621),a=e(68687),n=e(61082).tester;function r(l,o,u,p,c,b,g){var d,m=l._context.staticPlot;(function(Le,we,Ee,Oe,Fe){var pe=Ee.xaxis,be=Ee.yaxis,Me=T.extent(i.simpleMap(pe.range,pe.r2c)),De=T.extent(i.simpleMap(be.range,be.r2c)),Ne=Oe[0].trace;if(s.hasMarkers(Ne)){var Be=Ne.marker.maxdisplayed;if(Be!==0){var Ye=Oe.filter(function(ht){return ht.x>=Me[0]&&ht.x<=Me[1]&&ht.y>=De[0]&&ht.y<=De[1]}),We=Math.ceil(Ye.length/Be),et=0;Fe.forEach(function(ht,mt){var Mt=ht[0].trace;s.hasMarkers(Mt)&&Mt.marker.maxdisplayed>0&&mt<we&&et++});var ft=Math.round(et*We/3+Math.floor(et/3)*We/7.1);Oe.forEach(function(ht){delete ht.vis}),Ye.forEach(function(ht,mt){Math.round((mt+ft)%We)===0&&(ht.vis=!0)})}}})(0,o,u,p,c);var x=!!g&&g.duration>0;function y(Le){return x?Le.transition():Le}var k=u.xaxis,f=u.yaxis,S=p[0].trace,M=S.line,E=T.select(b),O=_(E,"g","errorbars"),P=_(E,"g","lines"),I=_(E,"g","points"),z=_(E,"g","text");if(w.getComponentMethod("errorbars","plot")(l,O,u,g),S.visible===!0){var U,R;y(E).style("opacity",S.opacity);var j=S.fill.charAt(S.fill.length-1);j!=="x"&&j!=="y"&&(j=""),p[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var Z,F,V="",H=[],te=S._prevtrace;te&&(V=te._prevRevpath||"",R=te._nextFill,H=te._polygons);var $,J,X,K,ee,ie,ae,oe="",fe="",ge=[],ve=i.noop;if(U=S._ownFill,s.hasLines(S)||S.fill!=="none"){for(R&&R.datum(p),["hv","vh","hvh","vhv"].indexOf(M.shape)!==-1?($=h.steps(M.shape),J=h.steps(M.shape.split("").reverse().join(""))):$=J=M.shape==="spline"?function(Le){var we=Le[Le.length-1];return Le.length>1&&Le[0][0]===we[0]&&Le[0][1]===we[1]?h.smoothclosed(Le.slice(1),M.smoothing):h.smoothopen(Le,M.smoothing)}:function(Le){return"M"+Le.join("L")},X=function(Le){return J(Le.reverse())},ge=t(p,{xaxis:k,yaxis:f,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(M.width||1,3)/4,shape:M.shape,backoff:M.backoff,simplify:M.simplify,fill:S.fill}),ae=S._polygons=new Array(ge.length),d=0;d<ge.length;d++)S._polygons[d]=n(ge[d]);ge.length&&(K=ge[0][0],ie=(ee=ge[ge.length-1])[ee.length-1]),ve=function(Le){return function(we){if(Z=$(we),F=X(we),oe?j?(oe+="L"+Z.substr(1),fe=F+"L"+fe.substr(1)):(oe+="Z"+Z,fe=F+"Z"+fe):(oe=Z,fe=F),s.hasLines(S)){var Ee=T.select(this);if(Ee.datum(p),Le)y(Ee.style("opacity",0).attr("d",Z).call(h.lineGroupStyle)).style("opacity",1);else{var Oe=y(Ee);Oe.attr("d",Z),h.singleLineStyle(p,Oe)}}}}}var xe=P.selectAll(".js-line").data(ge);y(xe.exit()).style("opacity",0).remove(),xe.each(ve(!1)),xe.enter().append("path").classed("js-line",!0).style("vector-effect",m?"none":"non-scaling-stroke").call(h.lineGroupStyle).each(ve(!0)),h.setClipUrl(xe,u.layerClipId,l),ge.length?(U?(U.datum(p),K&&ie&&(j?(j==="y"?K[1]=ie[1]=f.c2p(0,!0):j==="x"&&(K[0]=ie[0]=k.c2p(0,!0)),y(U).attr("d","M"+ie+"L"+K+"L"+oe.substr(1)).call(h.singleFillStyle,l)):y(U).attr("d",oe+"Z").call(h.singleFillStyle,l))):R&&(S.fill.substr(0,6)==="tonext"&&oe&&V?(S.fill==="tonext"?y(R).attr("d",oe+"Z"+V+"Z").call(h.singleFillStyle,l):y(R).attr("d",oe+"L"+V.substr(1)+"Z").call(h.singleFillStyle,l),S._polygons=S._polygons.concat(H)):(ye(R),S._polygons=null)),S._prevRevpath=fe,S._prevPolygons=ae):(U?ye(U):R&&ye(R),S._polygons=S._prevRevpath=S._prevPolygons=null),I.datum(p),z.datum(p),function(Le,we,Ee){var Oe,Fe=Ee[0].trace,pe=s.hasMarkers(Fe),be=s.hasText(Fe),Me=ue(Fe),De=de,Ne=de;if(pe||be){var Be=v,Ye=Fe.stackgroup,We=Ye&&l._fullLayout._scatterStackOpts[k._id+f._id][Ye].stackgaps==="infer zero";Fe.marker.maxdisplayed||Fe._needsCull?Be=We?ke:Ce:Ye&&!We&&(Be=Te),pe&&(De=Be),be&&(Ne=Be)}var et,ft=(Oe=Le.selectAll("path.point").data(De,Me)).enter().append("path").classed("point",!0);x&&ft.call(h.pointStyle,Fe,l).call(h.translatePoints,k,f).style("opacity",0).transition().style("opacity",1),Oe.order(),pe&&(et=h.makePointStyleFns(Fe)),Oe.each(function(ht){var mt=T.select(this),Mt=y(mt);h.translatePoint(ht,Mt,k,f)?(h.singlePointStyle(ht,Mt,Fe,et,l),u.layerClipId&&h.hideOutsideRangePoint(ht,Mt,k,f,Fe.xcalendar,Fe.ycalendar),Fe.customdata&&mt.classed("plotly-customdata",ht.data!==null&&ht.data!==void 0)):Mt.remove()}),x?Oe.exit().transition().style("opacity",0).remove():Oe.exit().remove(),(Oe=we.selectAll("g").data(Ne,Me)).enter().append("g").classed("textpoint",!0).append("text"),Oe.order(),Oe.each(function(ht){var mt=T.select(this),Mt=y(mt.select("text"));h.translatePoint(ht,Mt,k,f)?u.layerClipId&&h.hideOutsideRangePoint(ht,mt,k,f,Fe.xcalendar,Fe.ycalendar):mt.remove()}),Oe.selectAll("text").call(h.textPointStyle,Fe,l).each(function(ht){var mt=k.c2p(ht.x),Mt=f.c2p(ht.y);T.select(this).selectAll("tspan.line").each(function(){y(T.select(this)).attr({x:mt,y:Mt})})}),Oe.exit().remove()}(I,z,p);var _e=S.cliponaxis===!1?null:u.layerClipId;h.setClipUrl(I,_e,l),h.setClipUrl(z,_e,l)}function ye(Le){y(Le).attr("d","M0,0Z")}function Ce(Le){return Le.filter(function(we){return!we.gap&&we.vis})}function ke(Le){return Le.filter(function(we){return we.vis})}function Te(Le){return Le.filter(function(we){return!we.gap})}function le(Le){return Le.id}function ue(Le){if(Le.ids)return le}function de(){return!1}}N.exports=function(l,o,u,p,c,b){var g,d,m=!c,x=!!c&&c.duration>0,y=a(l,o,u);(g=p.selectAll("g.trace").data(y,function(k){return k[0].trace.uid})).enter().append("g").attr("class",function(k){return"trace scatter trace"+k[0].trace.uid}).style("stroke-miterlimit",2),g.order(),function(k,f,S){f.each(function(M){var E=_(T.select(this),"g","fills");h.setClipUrl(E,S.layerClipId,k);var O=M[0].trace,P=[];O._ownfill&&P.push("_ownFill"),O._nexttrace&&P.push("_nextFill");var I=E.selectAll("g").data(P,v);I.enter().append("g"),I.exit().each(function(z){O[z]=null}).remove(),I.order().each(function(z){O[z]=_(T.select(this),"path","js-fill")})})}(l,g,o),x?(b&&(d=b()),T.transition().duration(c.duration).ease(c.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()}).each(function(){p.selectAll("g.trace").each(function(k,f){r(l,f,o,k,y,this,c)})})):g.each(function(k,f){r(l,f,o,k,y,this,c)}),m&&g.exit().remove(),p.selectAll("path:not([d])").remove()}},98002:function(N,L,e){var T=e(34098);N.exports=function(w,i){var _,v,h,s,t=w.cd,a=w.xaxis,n=w.yaxis,r=[],l=t[0].trace;if(!T.hasMarkers(l)&&!T.hasText(l))return[];if(i===!1)for(_=0;_<t.length;_++)t[_].selected=0;else for(_=0;_<t.length;_++)v=t[_],h=a.c2p(v.x),s=n.c2p(v.y),v.i!==null&&i.contains([h,s],!1,_,w)?(r.push({pointNumber:v.i,x:a.c2d(v.x),y:n.c2d(v.y)}),v.selected=1):v.selected=0;return r}},565:function(N){var L=["orientation","groupnorm","stackgaps"];N.exports=function(e,T,w,i){var _=w._scatterStackOpts,v=i("stackgroup");if(v){var h=T.xaxis+T.yaxis,s=_[h];s||(s=_[h]={});var t=s[v],a=!1;t?t.traces.push(T):(t=s[v]={traceIndices:[],traces:[T]},a=!0);for(var n={orientation:T.x&&!T.y?"h":"v"},r=0;r<L.length;r++){var l=L[r],o=l+"Found";if(!t[o]){var u=e[l]!==void 0,p=l==="orientation";if((u||a)&&(t[l]=i(l,n[l]),p&&(t.fillDflt=t[l]==="h"?"tonextx":"tonexty"),u&&(t[o]=!0,!a&&(delete t.traces[0][l],p))))for(var c=0;c<t.traces.length-1;c++){var b=t.traces[c];b._input.fill!==b.fill&&(b.fill=t.fillDflt)}}}return t}}},16296:function(N,L,e){var T=e(39898),w=e(91424),i=e(73972);function _(h,s,t){w.pointStyle(h.selectAll("path.point"),s,t)}function v(h,s,t){w.textPointStyle(h.selectAll("text"),s,t)}N.exports={style:function(h){var s=T.select(h).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){_(T.select(this),t.trace||t[0].trace,h)}),s.selectAll("g.text").each(function(t){v(T.select(this),t.trace||t[0].trace,h)}),s.selectAll("g.trace path.js-line").call(w.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(w.fillGroupStyle,h),i.getComponentMethod("errorbars","style")(s)},stylePoints:_,styleText:v,styleOnSelect:function(h,s,t){var a=s[0].trace;a.selectedpoints?(w.selectedPointStyle(t.selectAll("path.point"),a),w.selectedTextStyle(t.selectAll("text"),a)):(_(t,a,h),v(t,a,h))}}},34098:function(N,L,e){var T=e(71828),w=e(73627).isTypedArraySpec;N.exports={hasLines:function(i){return i.visible&&i.mode&&i.mode.indexOf("lines")!==-1},hasMarkers:function(i){return i.visible&&(i.mode&&i.mode.indexOf("markers")!==-1||i.type==="splom")},hasText:function(i){return i.visible&&i.mode&&i.mode.indexOf("text")!==-1},isBubble:function(i){var _=i.marker;return T.isPlainObject(_)&&(T.isArrayOrTypedArray(_.size)||w(_.size))}}},82410:function(N,L,e){var T=e(71828);N.exports=function(w,i,_,v,h){h=h||{},v("textposition"),T.coerceFont(v,"textfont",h.font||_.font),h.noSelect||(v("selected.textfont.color"),v("unselected.textfont.color"))}},67513:function(N,L,e){var T=e(71828),w=e(73972);N.exports=function(i,_,v,h){var s,t=h("x"),a=h("y");if(w.getComponentMethod("calendars","handleTraceDefaults")(i,_,["x","y"],v),t){var n=T.minRowLength(t);a?s=Math.min(n,T.minRowLength(a)):(s=n,h("y0"),h("dy"))}else{if(!a)return 0;s=T.minRowLength(a),h("x0"),h("dx")}return _._length=s,s}},44542:function(N,L,e){var T=e(82196),w=e(50693),i=e(12663).axisHoverFormat,_=e(5386).fF,v=e(5386).si,h=e(9012),s=e(29659),t=e(87381),a=e(1426).extendFlat,n=e(30962).overrideAll,r=e(78607),l=T.line,o=T.marker,u=o.line,p=a({width:l.width,dash:{valType:"enumerated",values:r(s),dflt:"solid"}},w("line")),c=N.exports=n({x:T.x,y:T.y,z:{valType:"data_array"},text:a({},T.text,{}),texttemplate:v({},{}),hovertext:a({},T.hovertext,{}),hovertemplate:_(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),mode:a({},T.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:T.connectgaps,line:p,marker:a({symbol:{valType:"enumerated",values:r(t),dflt:"circle",arrayOk:!0},size:a({},o.size,{dflt:8}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:a({},o.opacity,{arrayOk:!1}),colorbar:o.colorbar,line:a({width:a({},u.width,{arrayOk:!1})},w("marker.line"))},w("marker")),textposition:a({},T.textposition,{dflt:"top center"}),textfont:{color:T.textfont.color,size:T.textfont.size,family:a({},T.textfont.family,{arrayOk:!1})},opacity:h.opacity,hoverinfo:a({},h.hoverinfo)},"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes"},36563:function(N,L,e){var T=e(75225),w=e(36922);N.exports=function(i,_){var v=[{x:!1,y:!1,trace:_,t:{}}];return T(v,_),w(i,_),v}},67336:function(N,L,e){var T=e(73972);function w(i,_,v,h){if(!_||!_.visible)return null;for(var s=T.getComponentMethod("errorbars","makeComputeError")(_),t=new Array(i.length),a=0;a<i.length;a++){var n=s(+i[a],a);if(h.type==="log"){var r=h.c2l(i[a]),l=i[a]-n[0],o=i[a]+n[1];if(t[a]=[(h.c2l(l,!0)-r)*v,(h.c2l(o,!0)-r)*v],l>0){var u=h.c2l(l);h._lowerLogErrorBound||(h._lowerLogErrorBound=u),h._lowerErrorBound=Math.min(h._lowerLogErrorBound,u)}}else t[a]=[-n[0]*v,n[1]*v]}return t}N.exports=function(i,_,v){var h=[w(i.x,i.error_x,_[0],v.xaxis),w(i.y,i.error_y,_[1],v.yaxis),w(i.z,i.error_z,_[2],v.zaxis)],s=function(o){for(var u=0;u<o.length;u++)if(o[u])return o[u].length;return 0}(h);if(s===0)return null;for(var t=new Array(s),a=0;a<s;a++){for(var n=[[0,0,0],[0,0,0]],r=0;r<3;r++)if(h[r])for(var l=0;l<2;l++)n[l][r]=h[r][a][l];t[a]=n}return t}},58925:function(N,L,e){var T=e(9330).gl_line3d,w=e(9330).gl_scatter3d,i=e(9330).gl_error3d,_=e(9330).gl_mesh3d,v=e(9330).delaunay_triangulate,h=e(71828),s=e(78614),t=e(81697).formatColor,a=e(39984),n=e(29659),r=e(87381),l=e(89298),o=e(23469).appendArrayPointValue,u=e(67336);function p(f,S){this.scene=f,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=p.prototype;function b(f){return f==null?0:f.indexOf("left")>-1?-1:f.indexOf("right")>-1?1:0}function g(f){return f==null?0:f.indexOf("top")>-1?-1:f.indexOf("bottom")>-1?1:0}function d(f,S){return S(4*f)}function m(f){return r[f]}function x(f,S,M,E,O){var P=null;if(h.isArrayOrTypedArray(f)){P=[];for(var I=0;I<S;I++)f[I]===void 0?P[I]=E:P[I]=M(f[I],O)}else P=M(f,h.identity);return P}function y(f){if(h.isArrayOrTypedArray(f)){var S=f[0];return h.isArrayOrTypedArray(S)&&(f=S),"rgb("+f.slice(0,3).map(function(M){return Math.round(255*M)})+")"}return null}function k(f){return h.isArrayOrTypedArray(f)?f.length===4&&typeof f[0]=="number"?y(f):f.map(y):null}c.handlePick=function(f){if(f.object&&(f.object===this.linePlot||f.object===this.delaunayMesh||f.object===this.textMarkers||f.object===this.scatterPlot)){var S=f.index=f.data.index;return f.object.highlight&&f.object.highlight(null),this.scatterPlot&&(f.object=this.scatterPlot,this.scatterPlot.highlight(f.data)),f.textLabel="",this.textLabels&&(h.isArrayOrTypedArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(f.textLabel=this.textLabels[S]):f.textLabel=this.textLabels),f.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},c.update=function(f){var S,M,E,O,P=this.scene.glplot.gl,I=n.solid;this.data=f;var z=function(j,Z){var F,V,H,te,$,J,X=[],K=j.fullSceneLayout,ee=j.dataScale,ie=K.xaxis,ae=K.yaxis,oe=K.zaxis,fe=Z.marker,ge=Z.line,ve=Z.x||[],xe=Z.y||[],_e=Z.z||[],ye=ve.length,Ce=Z.xcalendar,ke=Z.ycalendar,Te=Z.zcalendar;for($=0;$<ye;$++)F=ie.d2l(ve[$],0,Ce)*ee[0],V=ae.d2l(xe[$],0,ke)*ee[1],H=oe.d2l(_e[$],0,Te)*ee[2],X[$]=[F,V,H];if(Array.isArray(Z.text))J=Z.text;else if(h.isTypedArray(Z.text))J=Array.from(Z.text);else if(Z.text!==void 0)for(J=new Array(ye),$=0;$<ye;$++)J[$]=Z.text;function le(Ye,We){var et=K[Ye];return l.tickText(et,et.d2l(We),!0).text}var ue=Z.texttemplate;if(ue){var de=j.fullLayout._d3locale,Le=Array.isArray(ue),we=Le?Math.min(ue.length,ye):ye,Ee=Le?function(Ye){return ue[Ye]}:function(){return ue};for(J=new Array(we),$=0;$<we;$++){var Oe={x:ve[$],y:xe[$],z:_e[$]},Fe={xLabel:le("xaxis",ve[$]),yLabel:le("yaxis",xe[$]),zLabel:le("zaxis",_e[$])},pe={};o(pe,Z,$);var be=Z._meta||{};J[$]=h.texttemplateString(Ee($),Fe,de,pe,Oe,be)}}if(te={position:X,mode:Z.mode,text:J},"line"in Z&&(te.lineColor=t(ge,1,ye),te.lineWidth=ge.width,te.lineDashes=ge.dash),"marker"in Z){var Me=a(Z);te.scatterColor=t(fe,1,ye),te.scatterSize=x(fe.size,ye,d,20,Me),te.scatterMarker=x(fe.symbol,ye,m,""),te.scatterLineWidth=fe.line.width,te.scatterLineColor=t(fe.line,1,ye),te.scatterAngle=0}"textposition"in Z&&(te.textOffset=function(Ye){var We=[0,0];if(Array.isArray(Ye))for(var et=0;et<Ye.length;et++)We[et]=[0,0],Ye[et]&&(We[et][0]=b(Ye[et]),We[et][1]=g(Ye[et]));else We[0]=b(Ye),We[1]=g(Ye);return We}(Z.textposition),te.textColor=t(Z.textfont,1,ye),te.textSize=x(Z.textfont.size,ye,h.identity,12),te.textFont=Z.textfont.family,te.textAngle=0);var De=["x","y","z"];for(te.project=[!1,!1,!1],te.projectScale=[1,1,1],te.projectOpacity=[1,1,1],$=0;$<3;++$){var Ne=Z.projection[De[$]];(te.project[$]=Ne.show)&&(te.projectOpacity[$]=Ne.opacity,te.projectScale[$]=Ne.scale)}te.errorBounds=u(Z,ee,K);var Be=function(Ye){for(var We=[0,0,0],et=[[0,0,0],[0,0,0],[0,0,0]],ft=[1,1,1],ht=0;ht<3;ht++){var mt=Ye[ht];mt&&mt.copy_zstyle!==!1&&Ye[2].visible!==!1&&(mt=Ye[2]),mt&&mt.visible&&(We[ht]=mt.width/2,et[ht]=s(mt.color),ft[ht]=mt.thickness)}return{capSize:We,color:et,lineWidth:ft}}([Z.error_x,Z.error_y,Z.error_z]);return te.errorColor=Be.color,te.errorLineWidth=Be.lineWidth,te.errorCapSize=Be.capSize,te.delaunayAxis=Z.surfaceaxis,te.delaunayColor=s(Z.surfacecolor),te}(this.scene,f);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in n&&(I=n[z.lineDashes]),this.color=k(z.scatterColor)||k(z.lineColor),this.dataPoints=z.position,S={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:I[0],dashScale:I[1],opacity:f.opacity,connectGaps:f.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=T(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=f.opacity;if(f.marker&&f.marker.opacity!==void 0&&(U*=f.marker.opacity),M={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:U,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(M):(this.scatterPlot=w(M),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:f.opacity},this.textLabels=f.hovertext||f.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=w(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:f.opacity},this.errorBars?z.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=i(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var R=function(j,Z,F){var V,H=(F+1)%3,te=(F+2)%3,$=[],J=[];for(V=0;V<j.length;++V){var X=j[V];!isNaN(X[H])&&isFinite(X[H])&&!isNaN(X[te])&&isFinite(X[te])&&($.push([X[H],X[te]]),J.push(V))}var K=v($);for(V=0;V<K.length;++V)for(var ee=K[V],ie=0;ie<ee.length;++ie)ee[ie]=J[ee[ie]];return{positions:j,cells:K,meshColor:Z}}(z.position,z.delaunayColor,z.delaunayAxis);R.opacity=f.opacity,this.delaunayMesh?this.delaunayMesh.update(R):(R.gl=P,this.delaunayMesh=_(R),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},N.exports=function(f,S){var M=new p(f,S.uid);return M.update(S),M}},21428:function(N,L,e){var T=e(73972),w=e(71828),i=e(34098),_=e(49508),v=e(11058),h=e(82410),s=e(44542);N.exports=function(t,a,n,r){function l(m,x){return w.coerce(t,a,s,m,x)}var o=function(m,x,y,k){var f=0,S=y("x"),M=y("y"),E=y("z");return T.getComponentMethod("calendars","handleTraceDefaults")(m,x,["x","y","z"],k),S&&M&&E&&(f=Math.min(S.length,M.length,E.length),x._length=x._xlength=x._ylength=x._zlength=f),f}(t,a,l,r);if(o){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),l("mode"),i.hasMarkers(a)&&_(t,a,n,r,l,{noSelect:!0,noAngle:!0}),i.hasLines(a)&&(l("connectgaps"),v(t,a,n,r,l)),i.hasText(a)&&(l("texttemplate"),h(t,a,r,l,{noSelect:!0}));var u=(a.line||{}).color,p=(a.marker||{}).color;l("surfaceaxis")>=0&&l("surfacecolor",u||p);for(var c=["x","y","z"],b=0;b<3;++b){var g="projection."+c[b];l(g+".show")&&(l(g+".opacity"),l(g+".scale"))}var d=T.getComponentMethod("errorbars","supplyDefaults");d(t,a,u||p||n,{axis:"z"}),d(t,a,u||p||n,{axis:"y",inherit:"z"}),d(t,a,u||p||n,{axis:"x",inherit:"z"})}else a.visible=!1}},13551:function(N,L,e){N.exports={plot:e(58925),attributes:e(44542),markerSymbols:e(87381),supplyDefaults:e(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(36563),moduleType:"trace",name:"scatter3d",basePlotModule:e(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(N,L,e){var T=e(82196),w=e(9012),i=e(5386).fF,_=e(5386).si,v=e(50693),h=e(1426).extendFlat,s=T.marker,t=T.line,a=s.line;N.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:h({},T.mode,{dflt:"markers"}),text:h({},T.text,{}),texttemplate:_({editType:"plot"},{keys:["a","b","text"]}),hovertext:h({},T.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:h({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:T.connectgaps,fill:h({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,marker:h({symbol:s.symbol,opacity:s.opacity,maxdisplayed:s.maxdisplayed,angle:s.angle,angleref:s.angleref,standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,line:h({width:a.width,editType:"calc"},v("marker.line")),gradient:s.gradient,editType:"calc"},v("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:h({},w.hoverinfo,{flags:["a","b","text","name"]}),hoveron:T.hoveron,hovertemplate:i()}},34618:function(N,L,e){var T=e(92770),w=e(36922),i=e(75225),_=e(66279),v=e(47761).calcMarkerSize,h=e(22882);N.exports=function(s,t){var a=t._carpetTrace=h(s,t);if(a&&a.visible&&a.visible!=="legendonly"){var n;t.xaxis=a.xaxis,t.yaxis=a.yaxis;var r,l,o=t._length,u=new Array(o),p=!1;for(n=0;n<o;n++)if(r=t.a[n],l=t.b[n],T(r)&&T(l)){var c=a.ab2xy(+r,+l,!0),b=a.isVisible(+r,+l);b||(p=!0),u[n]={x:c[0],y:c[1],a:r,b:l,vis:b}}else u[n]={x:!1,y:!1};return t._needsCull=p,u[0].carpet=a,u[0].trace=t,v(t,o),w(s,t),i(u,t),_(u,t),u}}},98965:function(N,L,e){var T=e(71828),w=e(47581),i=e(34098),_=e(49508),v=e(11058),h=e(94039),s=e(82410),t=e(28908),a=e(97001);N.exports=function(n,r,l,o){function u(d,m){return T.coerce(n,r,a,d,m)}u("carpet"),r.xaxis="x",r.yaxis="y";var p=u("a"),c=u("b"),b=Math.min(p.length,c.length);if(b){r._length=b,u("text"),u("texttemplate"),u("hovertext"),u("mode",b<w.PTS_LINESONLY?"lines+markers":"lines"),i.hasMarkers(r)&&_(n,r,l,o,u,{gradient:!0}),i.hasLines(r)&&(v(n,r,l,o,u,{backoff:!0}),h(n,r,u),u("connectgaps")),i.hasText(r)&&s(n,r,o,u);var g=[];(i.hasMarkers(r)||i.hasText(r))&&(u("marker.maxdisplayed"),g.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,l,u),i.hasLines(r)||h(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||g.push("fills"),u("hoveron",g.join("+")||"points")!=="fills"&&u("hovertemplate"),T.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},16165:function(N){N.exports=function(L,e,T,w,i){var _=w[i];return L.a=_.a,L.b=_.b,L.y=_.y,L}},48953:function(N){N.exports=function(L,e){var T={},w=e._carpet,i=w.ab2ij([L.a,L.b]),_=Math.floor(i[0]),v=i[0]-_,h=Math.floor(i[1]),s=i[1]-h,t=w.evalxy([],_,h,v,s);return T.yLabel=t[1].toFixed(3),T}},22931:function(N,L,e){var T=e(33720),w=e(71828).fillText;N.exports=function(i,_,v,h){var s=T(i,_,v,h);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var a=1-t.y0/i.ya._length,n=i.xa._length,r=n*a/2,l=n-r;return t.x0=Math.max(Math.min(t.x0,l),r),t.x1=Math.max(Math.min(t.x1,l),r),s}var o=t.cd[t.index];t.a=o.a,t.b=o.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,p=u._carpet,c=u._module.formatLabels(o,u);t.yLabel=c.yLabel,delete t.text;var b=[];if(!u.hovertemplate){var g=(o.hi||u.hoverinfo).split("+");g.indexOf("all")!==-1&&(g=["a","b","text"]),g.indexOf("a")!==-1&&d(p.aaxis,o.a),g.indexOf("b")!==-1&&d(p.baxis,o.b),b.push("y: "+t.yLabel),g.indexOf("text")!==-1&&w(o,u,b),t.extraText=b.join("<br>")}return s}function d(m,x){var y;y=m.labelprefix&&m.labelprefix.length>0?m.labelprefix.replace(/ = $/,""):m._hovertitle,b.push(y+": "+x.toFixed(3)+m.labelsuffix)}}},46858:function(N,L,e){N.exports={attributes:e(97001),supplyDefaults:e(98965),colorbar:e(4898),formatLabels:e(48953),calc:e(34618),plot:e(1913),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(22931),selectPoints:e(98002),eventData:e(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:e(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(N,L,e){var T=e(32663),w=e(89298),i=e(91424);N.exports=function(_,v,h,s){var t,a,n,r=h[0][0].carpet,l=w.getFromId(_,r.xaxis||"x"),o=w.getFromId(_,r.yaxis||"y"),u={xaxis:l,yaxis:o,plot:v.plot};for(t=0;t<h.length;t++)(a=h[t][0].trace)._xA=l,a._yA=o;for(T(_,u,h,s),t=0;t<h.length;t++)a=h[t][0].trace,n=s.selectAll("g.trace"+a.uid+" .js-line"),i.setClipUrl(n,h[t][0].carpet._clipPathId,_)}},19316:function(N,L,e){var T=e(5386).fF,w=e(5386).si,i=e(82196),_=e(9012),v=e(50693),h=e(79952).P,s=e(1426).extendFlat,t=e(30962).overrideAll,a=i.marker,n=i.line,r=a.line;N.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:s({},i.mode,{dflt:"markers"}),text:s({},i.text,{}),texttemplate:w({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:s({},i.hovertext,{}),textfont:i.textfont,textposition:i.textposition,line:{color:n.color,width:n.width,dash:h},connectgaps:i.connectgaps,marker:s({symbol:a.symbol,opacity:a.opacity,angle:a.angle,angleref:s({},a.angleref,{values:["previous","up","north"]}),standoff:a.standoff,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,colorbar:a.colorbar,line:s({width:r.width},v("marker.line")),gradient:a.gradient},v("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:i.fillcolor,selected:i.selected,unselected:i.unselected,hoverinfo:s({},_.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:T()},"calc","nested")},84622:function(N,L,e){var T=e(92770),w=e(50606).BADNUM,i=e(36922),_=e(75225),v=e(66279),h=e(71828).isArrayOrTypedArray,s=e(71828)._;function t(a){return a&&typeof a=="string"}N.exports=function(a,n){var r,l=h(n.locations),o=l?n.locations.length:n._length,u=new Array(o);r=n.geojson?function(m){return t(m)||T(m)}:t;for(var p=0;p<o;p++){var c=u[p]={};if(l){var b=n.locations[p];c.loc=r(b)?b:null}else{var g=n.lon[p],d=n.lat[p];T(g)&&T(d)?c.lonlat=[+g,+d]:c.lonlat=[w,w]}}return _(u,n),i(a,n),v(u,n),o&&(u[0].t={labels:{lat:s(a,"lat:")+" ",lon:s(a,"lon:")+" "}}),u}},10659:function(N,L,e){var T=e(71828),w=e(34098),i=e(49508),_=e(11058),v=e(82410),h=e(28908),s=e(19316);N.exports=function(t,a,n,r){function l(d,m){return T.coerce(t,a,s,d,m)}var o,u=l("locations");if(u&&u.length){var p,c=l("geojson");(typeof c=="string"&&c!==""||T.isPlainObject(c))&&(p="geojson-id"),l("locationmode",p)==="geojson-id"&&l("featureidkey"),o=u.length}else{var b=l("lon")||[],g=l("lat")||[];o=Math.min(b.length,g.length)}o?(a._length=o,l("text"),l("hovertext"),l("hovertemplate"),l("mode"),w.hasMarkers(a)&&i(t,a,n,r,l,{gradient:!0}),w.hasLines(a)&&(_(t,a,n,r,l),l("connectgaps")),w.hasText(a)&&(l("texttemplate"),v(t,a,r,l)),l("fill"),a.fill!=="none"&&h(t,a,n,l),T.coerceSelectionMarkerOpacity(a,l)):a.visible=!1}},84084:function(N){N.exports=function(L,e,T,w,i){L.lon=e.lon,L.lat=e.lat,L.location=e.loc?e.loc:null;var _=w[i];return _.fIn&&_.fIn.properties&&(L.properties=_.fIn.properties),L}},82719:function(N,L,e){var T=e(89298);N.exports=function(w,i,_){var v={},h=_[i.geo]._subplot.mockAxis,s=w.lonlat;return v.lonLabel=T.tickText(h,h.c2l(s[0]),!0).text,v.latLabel=T.tickText(h,h.c2l(s[1]),!0).text,v}},14977:function(N,L,e){var T=e(30211),w=e(50606).BADNUM,i=e(34603),_=e(71828).fillText,v=e(19316);N.exports=function(h,s,t){var a=h.cd,n=a[0].trace,r=h.xa,l=h.ya,o=h.subplot,u=o.projection.isLonLatOverEdges,p=o.project;if(T.getClosest(a,function(y){var k=y.lonlat;if(k[0]===w||u(k))return 1/0;var f=p(k),S=p([s,t]),M=Math.abs(f[0]-S[0]),E=Math.abs(f[1]-S[1]),O=Math.max(3,y.mrc||0);return Math.max(Math.sqrt(M*M+E*E)-O,1-3/O)},h),h.index!==!1){var c=a[h.index],b=c.lonlat,g=[r.c2p(b),l.c2p(b)],d=c.mrc||1;h.x0=g[0]-d,h.x1=g[0]+d,h.y0=g[1]-d,h.y1=g[1]+d,h.loc=c.loc,h.lon=b[0],h.lat=b[1];var m={};m[n.geo]={_subplot:o};var x=n._module.formatLabels(c,n,m);return h.lonLabel=x.lonLabel,h.latLabel=x.latLabel,h.color=i(n,c),h.extraText=function(y,k,f,S){if(!y.hovertemplate){var M=k.hi||y.hoverinfo,E=M==="all"?v.hoverinfo.flags:M.split("+"),O=E.indexOf("location")!==-1&&Array.isArray(y.locations),P=E.indexOf("lon")!==-1,I=E.indexOf("lat")!==-1,z=E.indexOf("text")!==-1,U=[];return O?U.push(k.loc):P&&I?U.push("("+R(f.latLabel)+", "+R(f.lonLabel)+")"):P?U.push(S.lon+R(f.lonLabel)):I&&U.push(S.lat+R(f.latLabel)),z&&_(k,y,U),U.join("<br>")}function R(j){return j+""}}(n,c,h,a[0].t.labels),h.hovertemplate=n.hovertemplate,[h]}}},17988:function(N,L,e){N.exports={attributes:e(19316),supplyDefaults:e(10659),colorbar:e(4898),formatLabels:e(82719),calc:e(84622),calcGeoJSON:e(89171).calcGeoJSON,plot:e(89171).plot,style:e(33095),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(14977),eventData:e(84084),selectPoints:e(20548),moduleType:"trace",name:"scattergeo",basePlotModule:e(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(N,L,e){var T=e(39898),w=e(71828),i=e(90973).getTopojsonFeatures,_=e(18214),v=e(41327),h=e(71739).findExtremes,s=e(50606).BADNUM,t=e(47761).calcMarkerSize,a=e(34098),n=e(33095);N.exports={calcGeoJSON:function(r,l){var o,u,p=r[0].trace,c=l[p.geo],b=c._subplot,g=p._length;if(w.isArrayOrTypedArray(p.locations)){var d=p.locationmode,m=d==="geojson-id"?v.extractTraceFeature(r):i(p,b.topojson);for(o=0;o<g;o++){u=r[o];var x=d==="geojson-id"?u.fOut:v.locationToFeature(d,u.loc,m);u.lonlat=x?x.properties.ct:[s,s]}}var y,k,f={padded:!0};if(c.fitbounds==="geojson"&&p.locationmode==="geojson-id"){var S=v.computeBbox(v.getTraceGeojson(p));y=[S[0],S[2]],k=[S[1],S[3]]}else{for(y=new Array(g),k=new Array(g),o=0;o<g;o++)u=r[o],y[o]=u.lonlat[0],k[o]=u.lonlat[1];f.ppad=t(p,g)}p._extremes.lon=h(c.lonaxis._ax,y,f),p._extremes.lat=h(c.lataxis._ax,k,f)},plot:function(r,l,o){var u=l.layers.frontplot.select(".scatterlayer"),p=w.makeTraceGroups(u,o,"trace scattergeo");function c(b,g){b.lonlat[0]===s&&T.select(g).remove()}p.selectAll("*").remove(),p.each(function(b){var g=T.select(this),d=b[0].trace;if(a.hasLines(d)||d.fill!=="none"){var m=_.calcTraceToLineCoords(b),x=d.fill!=="none"?_.makePolygon(m):_.makeLine(m);g.selectAll("path.js-line").data([{geojson:x,trace:d}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}a.hasMarkers(d)&&g.selectAll("path.point").data(w.identity).enter().append("path").classed("point",!0).each(function(y){c(y,this)}),a.hasText(d)&&g.selectAll("g").data(w.identity).enter().append("g").append("text").each(function(y){c(y,this)}),n(r,b)})}}},20548:function(N,L,e){var T=e(34098),w=e(50606).BADNUM;N.exports=function(i,_){var v,h,s,t,a,n=i.cd,r=i.xaxis,l=i.yaxis,o=[],u=n[0].trace;if(!T.hasMarkers(u)&&!T.hasText(u))return[];if(_===!1)for(a=0;a<n.length;a++)n[a].selected=0;else for(a=0;a<n.length;a++)(h=(v=n[a]).lonlat)[0]!==w&&(s=r.c2p(h),t=l.c2p(h),_.contains([s,t],null,a,i)?(o.push({pointNumber:a,lon:h[0],lat:h[1]}),v.selected=1):v.selected=0);return o}},33095:function(N,L,e){var T=e(39898),w=e(91424),i=e(7901),_=e(16296),v=_.stylePoints,h=_.styleText;N.exports=function(s,t){t&&function(a,n){var r=n[0].trace,l=n[0].node3;l.style("opacity",n[0].trace.opacity),v(l,r,a),h(l,r,a),l.selectAll("path.js-line").style("fill","none").each(function(o){var u=T.select(this),p=o.trace,c=p.line||{};u.call(i.stroke,c.color).call(w.dashLine,c.dash||"",c.width||0),p.fill!=="none"&&u.call(i.fill,p.fillcolor)})}(s,t)}},42341:function(N,L,e){var T=e(9012),w=e(82196),i=e(12663).axisHoverFormat,_=e(50693),v=e(78607),h=e(1426).extendFlat,s=e(30962).overrideAll,t=e(78232).DASHES,a=w.line,n=w.marker,r=n.line,l=N.exports=s({x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),text:w.text,hovertext:w.hovertext,textposition:w.textposition,textfont:w.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:v(t),dflt:"solid"}},marker:h({},_("marker"),{symbol:n.symbol,angle:n.angle,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:h({},_("marker.line"),{width:r.width})}),connectgaps:w.connectgaps,fill:h({},w.fill,{dflt:"none"}),fillcolor:w.fillcolor,selected:{marker:w.selected.marker,textfont:w.selected.textfont},unselected:{marker:w.unselected.marker,textfont:w.unselected.textfont},opacity:T.opacity},"calc","nested");l.x.editType=l.y.editType=l.x0.editType=l.y0.editType="calc+clearAxisTypes",l.hovertemplate=w.hovertemplate,l.texttemplate=w.texttemplate},72156:function(N,L,e){var T=e(20794);N.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(42341),supplyDefaults:e(47148),crossTraceDefaults:e(34936),colorbar:e(4898),formatLabels:e(68101),calc:e(45032),hoverPoints:T.hoverPoints,selectPoints:e(58147),meta:{}}},45032:function(N,L,e){var T=e(88294),w=e(71828),i=e(41675),_=e(71739).findExtremes,v=e(42973),h=e(47761),s=h.calcMarkerSize,t=h.calcAxisExpansion,a=h.setFirstScatter,n=e(36922),r=e(19635),l=e(38967),o=e(50606).BADNUM,u=e(78232).TOO_MANY_POINTS;function p(c,b,g){var d=c._extremes[b._id],m=_(b,g._bnds,{padded:!0});d.min=d.min.concat(m.min),d.max=d.max.concat(m.max)}N.exports=function(c,b){var g,d=c._fullLayout,m=b._xA=i.getFromId(c,b.xaxis,"x"),x=b._yA=i.getFromId(c,b.yaxis,"y"),y=d._plots[b.xaxis+b.yaxis],k=b._length,f=k>=u,S=2*k,M={},E=m.makeCalcdata(b,"x"),O=x.makeCalcdata(b,"y"),P=v(b,m,"x",E),I=v(b,x,"y",O),z=P.vals,U=I.vals;b._x=z,b._y=U,b.xperiodalignment&&(b._origX=E,b._xStarts=P.starts,b._xEnds=P.ends),b.yperiodalignment&&(b._origY=O,b._yStarts=I.starts,b._yEnds=I.ends);var R=new Array(S),j=new Array(k);for(g=0;g<k;g++)R[2*g]=z[g]===o?NaN:z[g],R[2*g+1]=U[g]===o?NaN:U[g],j[g]=g;if(m.type==="log")for(g=0;g<S;g+=2)R[g]=m.c2l(R[g]);if(x.type==="log")for(g=1;g<S;g+=2)R[g]=x.c2l(R[g]);f&&m.type!=="log"&&x.type!=="log"?M.tree=T(R):M.ids=j,n(c,b);var Z,F=function(H,te,$,J,X,K){var ee=r.style(H,$);if(ee.marker&&(ee.marker.positions=J),ee.line&&J.length>1&&w.extendFlat(ee.line,r.linePositions(H,$,J)),ee.errorX||ee.errorY){var ie=r.errorBarPositions(H,$,J,X,K);ee.errorX&&w.extendFlat(ee.errorX,ie.x),ee.errorY&&w.extendFlat(ee.errorY,ie.y)}return ee.text&&(w.extendFlat(ee.text,{positions:J},r.textPosition(H,$,ee.text,ee.marker)),w.extendFlat(ee.textSel,{positions:J},r.textPosition(H,$,ee.text,ee.markerSel)),w.extendFlat(ee.textUnsel,{positions:J},r.textPosition(H,$,ee.text,ee.markerUnsel))),ee}(c,0,b,R,z,U),V=l(c,y);return a(d,b),f?F.marker&&(Z=F.marker.sizeAvg||Math.max(F.marker.size,3)):Z=s(b,k),t(c,b,m,x,z,U,Z),F.errorX&&p(b,m,F.errorX),F.errorY&&p(b,x,F.errorY),F.fill&&!V.fill2d&&(V.fill2d=!0),F.marker&&!V.scatter2d&&(V.scatter2d=!0),F.line&&!V.line2d&&(V.line2d=!0),!F.errorX&&!F.errorY||V.error2d||(V.error2d=!0),F.text&&!V.glText&&(V.glText=!0),F.marker&&(F.marker.snap=k),V.lineOptions.push(F.line),V.errorXOptions.push(F.errorX),V.errorYOptions.push(F.errorY),V.fillOptions.push(F.fill),V.markerOptions.push(F.marker),V.markerSelectedOptions.push(F.markerSel),V.markerUnselectedOptions.push(F.markerUnsel),V.textOptions.push(F.text),V.textSelectedOptions.push(F.textSel),V.textUnselectedOptions.push(F.textUnsel),V.selectBatch.push([]),V.unselectBatch.push([]),M._scene=V,M.index=V.count,M.x=z,M.y=U,M.positions=R,V.count++,[{x:!1,y:!1,t:M,trace:b}]}},78232:function(N){N.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(N,L,e){var T=e(92770),w=e(82019),i=e(25075),_=e(73972),v=e(71828),h=v.isArrayOrTypedArray,s=e(91424),t=e(41675),a=e(81697).formatColor,n=e(34098),r=e(39984),l=e(68645),o=e(78232),u=e(37822).DESELECTDIM,p={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},c=e(23469).appendArrayPointValue;function b(O,P){var I,z=O._fullLayout,U=P._length,R=P.textfont,j=P.textposition,Z=h(j)?j:[j],F=R.color,V=R.size,H=R.family,te={},$=O._context.plotGlPixelRatio,J=P.texttemplate;if(J){te.text=[];var X=z._d3locale,K=Array.isArray(J),ee=K?Math.min(J.length,U):U,ie=K?function(_e){return J[_e]}:function(){return J};for(I=0;I<ee;I++){var ae={i:I},oe=P._module.formatLabels(ae,P,z),fe={};c(fe,P,I);var ge=P._meta||{};te.text.push(v.texttemplateString(ie(I),oe,X,fe,ae,ge))}}else h(P.text)&&P.text.length<U?te.text=P.text.slice():te.text=P.text;if(h(te.text))for(I=te.text.length;I<U;I++)te.text[I]="";for(te.opacity=P.opacity,te.font={},te.align=[],te.baseline=[],I=0;I<Z.length;I++){var ve=Z[I].split(/\s+/);switch(ve[1]){case"left":te.align.push("right");break;case"right":te.align.push("left");break;default:te.align.push(ve[1])}switch(ve[0]){case"top":te.baseline.push("bottom");break;case"bottom":te.baseline.push("top");break;default:te.baseline.push(ve[0])}}if(h(F))for(te.color=new Array(U),I=0;I<U;I++)te.color[I]=F[I];else te.color=F;if(h(V)||h(H))for(te.font=new Array(U),I=0;I<U;I++){var xe=te.font[I]={};xe.size=(v.isTypedArray(V)?V[I]:h(V)?T(V[I])?V[I]:0:V)*$,xe.family=h(H)?H[I]:H}else te.font={size:V*$,family:H};return te}function g(O,P){var I,z,U=P._length,R=P.marker,j={},Z=h(R.symbol),F=h(R.angle),V=h(R.color),H=h(R.line.color),te=h(R.opacity),$=h(R.size),J=h(R.line.width);if(Z||(z=l.isOpenSymbol(R.symbol)),Z||V||H||te||F){j.symbols=new Array(U),j.angles=new Array(U),j.colors=new Array(U),j.borderColors=new Array(U);var X=R.symbol,K=R.angle,ee=a(R,R.opacity,U),ie=a(R.line,R.opacity,U);if(!h(ie[0])){var ae=ie;for(ie=Array(U),I=0;I<U;I++)ie[I]=ae}if(!h(ee[0])){var oe=ee;for(ee=Array(U),I=0;I<U;I++)ee[I]=oe}if(!h(X)){var fe=X;for(X=Array(U),I=0;I<U;I++)X[I]=fe}if(!h(K)){var ge=K;for(K=Array(U),I=0;I<U;I++)K[I]=ge}for(j.symbols=X,j.angles=K,j.colors=ee,j.borderColors=ie,I=0;I<U;I++)Z&&(z=l.isOpenSymbol(R.symbol[I])),z&&(ie[I]=ee[I].slice(),ee[I]=ee[I].slice(),ee[I][3]=0);for(j.opacity=P.opacity,j.markers=new Array(U),I=0;I<U;I++)j.markers[I]=E({mx:j.symbols[I],ma:j.angles[I]},P)}else z?(j.color=i(R.color,"uint8"),j.color[3]=0,j.borderColor=i(R.color,"uint8")):(j.color=i(R.color,"uint8"),j.borderColor=i(R.line.color,"uint8")),j.opacity=P.opacity*R.opacity,j.marker=E({mx:R.symbol,ma:R.angle},P);var ve,xe=r(P,1);if($||J){var _e,ye=j.sizes=new Array(U),Ce=j.borderSizes=new Array(U),ke=0;if($){for(I=0;I<U;I++)ye[I]=xe(R.size[I]),ke+=ye[I];_e=ke/U}else for(ve=xe(R.size),I=0;I<U;I++)ye[I]=ve;if(J)for(I=0;I<U;I++)Ce[I]=R.line.width[I];else for(ve=R.line.width,I=0;I<U;I++)Ce[I]=ve;j.sizeAvg=_e}else j.size=xe(R&&R.size||10),j.borderSizes=xe(R.line.width);return j}function d(O,P,I){var z=P.marker,U={};return I&&(I.marker&&I.marker.symbol?U=g(0,v.extendFlat({},z,I.marker)):I.marker&&(I.marker.size&&(U.size=I.marker.size),I.marker.color&&(U.colors=I.marker.color),I.marker.opacity!==void 0&&(U.opacity=I.marker.opacity))),U}function m(O,P,I){var z={};if(!I)return z;if(I.textfont){var U={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:v.extendFlat({},P.textfont)};I.textfont&&v.extendFlat(U.textfont,I.textfont),z=b(O,U)}return z}function x(O,P,I){var z={capSize:2*P.width*I,lineWidth:P.thickness*I,color:P.color};return P.copy_ystyle&&(z=O.error_y),z}var y=o.SYMBOL_SDF_SIZE,k=o.SYMBOL_SIZE,f=o.SYMBOL_STROKE,S={},M=s.symbolFuncs[0](.05*k);function E(O,P){var I,z,U=O.mx;if(U==="circle")return null;var R=s.symbolNumber(U),j=s.symbolFuncs[R%100],Z=!!s.symbolNoDot[R%100],F=!!s.symbolNoFill[R%100],V=l.isDotSymbol(U);if(O.ma&&(U+="_"+O.ma),S[U])return S[U];var H=s.getMarkerAngle(O,P);return I=V&&!Z?j(1.1*k,H)+M:j(k,H),z=w(I,{w:y,h:y,viewBox:[-k,-k,k,k],stroke:F?f:-f}),S[U]=z,z||null}N.exports={style:function(O,P){var I,z={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},U=O._context.plotGlPixelRatio;if(P.visible!==!0)return z;if(n.hasText(P)&&(z.text=b(O,P),z.textSel=m(O,P,P.selected),z.textUnsel=m(O,P,P.unselected)),n.hasMarkers(P)&&(z.marker=g(0,P),z.markerSel=d(0,P,P.selected),z.markerUnsel=d(0,P,P.unselected),!P.unselected&&h(P.marker.opacity))){var R=P.marker.opacity;for(z.markerUnsel.opacity=new Array(R.length),I=0;I<R.length;I++)z.markerUnsel.opacity[I]=u*R[I]}if(n.hasLines(P)){z.line={overlay:!0,thickness:P.line.width*U,color:P.line.color,opacity:P.opacity};var j=(o.DASHES[P.line.dash]||[1]).slice();for(I=0;I<j.length;++I)j[I]*=P.line.width*U;z.line.dashes=j}return P.error_x&&P.error_x.visible&&(z.errorX=x(P,P.error_x,U)),P.error_y&&P.error_y.visible&&(z.errorY=x(P,P.error_y,U)),P.fill&&P.fill!=="none"&&(z.fill={closed:!0,fill:P.fillcolor,thickness:0}),z},markerStyle:g,markerSelection:d,linePositions:function(O,P,I){var z,U,R=I.length,j=R/2;if(n.hasLines(P)&&j)if(P.line.shape==="hv"){for(z=[],U=0;U<j-1;U++)isNaN(I[2*U])||isNaN(I[2*U+1])?z.push(NaN,NaN,NaN,NaN):(z.push(I[2*U],I[2*U+1]),isNaN(I[2*U+2])||isNaN(I[2*U+3])?z.push(NaN,NaN):z.push(I[2*U+2],I[2*U+1]));z.push(I[R-2],I[R-1])}else if(P.line.shape==="hvh"){for(z=[],U=0;U<j-1;U++)if(isNaN(I[2*U])||isNaN(I[2*U+1])||isNaN(I[2*U+2])||isNaN(I[2*U+3]))isNaN(I[2*U])||isNaN(I[2*U+1])?z.push(NaN,NaN):z.push(I[2*U],I[2*U+1]),z.push(NaN,NaN);else{var Z=(I[2*U]+I[2*U+2])/2;z.push(I[2*U],I[2*U+1],Z,I[2*U+1],Z,I[2*U+3])}z.push(I[R-2],I[R-1])}else if(P.line.shape==="vhv"){for(z=[],U=0;U<j-1;U++)if(isNaN(I[2*U])||isNaN(I[2*U+1])||isNaN(I[2*U+2])||isNaN(I[2*U+3]))isNaN(I[2*U])||isNaN(I[2*U+1])?z.push(NaN,NaN):z.push(I[2*U],I[2*U+1]),z.push(NaN,NaN);else{var F=(I[2*U+1]+I[2*U+3])/2;z.push(I[2*U],I[2*U+1],I[2*U],F,I[2*U+2],F)}z.push(I[R-2],I[R-1])}else if(P.line.shape==="vh"){for(z=[],U=0;U<j-1;U++)isNaN(I[2*U])||isNaN(I[2*U+1])?z.push(NaN,NaN,NaN,NaN):(z.push(I[2*U],I[2*U+1]),isNaN(I[2*U+2])||isNaN(I[2*U+3])?z.push(NaN,NaN):z.push(I[2*U],I[2*U+3]));z.push(I[R-2],I[R-1])}else z=I;var V=!1;for(U=0;U<z.length;U++)if(isNaN(z[U])){V=!0;break}var H=V||z.length>o.TOO_MANY_POINTS||n.hasMarkers(P)?"rect":"round";if(V&&P.connectgaps){var te=z[0],$=z[1];for(U=0;U<z.length;U+=2)isNaN(z[U])||isNaN(z[U+1])?(z[U]=te,z[U+1]=$):(te=z[U],$=z[U+1])}return{join:H,positions:z}},errorBarPositions:function(O,P,I,z,U){var R=_.getComponentMethod("errorbars","makeComputeError"),j=t.getFromId(O,P.xaxis,"x"),Z=t.getFromId(O,P.yaxis,"y"),F=I.length/2,V={};function H(te,$){var J=$._id.charAt(0),X=P["error_"+J];if(X&&X.visible&&($.type==="linear"||$.type==="log")){for(var K=R(X),ee={x:0,y:1}[J],ie={x:[0,1,2,3],y:[2,3,0,1]}[J],ae=new Float64Array(4*F),oe=1/0,fe=-1/0,ge=0,ve=0;ge<F;ge++,ve+=4){var xe=te[ge];if(T(xe)){var _e=I[2*ge+ee],ye=K(xe,ge),Ce=ye[0],ke=ye[1];if(T(Ce)&&T(ke)){var Te=xe-Ce,le=xe+ke;ae[ve+ie[0]]=_e-$.c2l(Te),ae[ve+ie[1]]=$.c2l(le)-_e,ae[ve+ie[2]]=0,ae[ve+ie[3]]=0,oe=Math.min(oe,xe-Ce),fe=Math.max(fe,xe+ke)}}}V[J]={positions:I,errors:ae,_bnds:[oe,fe]}}}return H(z,j),H(U,Z),V},textPosition:function(O,P,I,z){var U,R=P._length,j={};if(n.hasMarkers(P)){var Z=I.font,F=I.align,V=I.baseline;for(j.offset=new Array(R),U=0;U<R;U++){var H=z.sizes?z.sizes[U]:z.size,te=h(Z)?Z[U].size:Z.size,$=h(F)?F.length>1?F[U]:F[0]:F,J=h(V)?V.length>1?V[U]:V[0]:V,X=p[$],K=p[J],ee=H?H/.8+1:0,ie=-K*ee-.5*K;j.offset[U]=[X*ee/te,ie/te]}}return j}}},47148:function(N,L,e){var T=e(71828),w=e(73972),i=e(68645),_=e(42341),v=e(47581),h=e(34098),s=e(67513),t=e(73927),a=e(49508),n=e(11058),r=e(28908),l=e(82410);N.exports=function(o,u,p,c){function b(S,M){return T.coerce(o,u,_,S,M)}var g=!!o.marker&&i.isOpenSymbol(o.marker.symbol),d=h.isBubble(o),m=s(o,u,c,b);if(m){t(o,u,c,b),b("xhoverformat"),b("yhoverformat");var x=m<v.PTS_LINESONLY?"lines+markers":"lines";b("text"),b("hovertext"),b("hovertemplate"),b("mode",x),h.hasMarkers(u)&&(a(o,u,p,c,b,{noAngleRef:!0,noStandOff:!0}),b("marker.line.width",g||d?1:0)),h.hasLines(u)&&(b("connectgaps"),n(o,u,p,c,b),b("line.shape")),h.hasText(u)&&(b("texttemplate"),l(o,u,c,b));var y=(u.line||{}).color,k=(u.marker||{}).color;b("fill"),u.fill!=="none"&&r(o,u,p,b);var f=w.getComponentMethod("errorbars","supplyDefaults");f(o,u,y||k||p,{axis:"y"}),f(o,u,y||k||p,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(u,b)}else u.visible=!1}},5345:function(N,L,e){var T=e(71828),w=e(7901),i=e(37822).DESELECTDIM;N.exports={styleTextSelection:function(_){var v,h,s=_[0],t=s.trace,a=s.t,n=a._scene,r=a.index,l=n.selectBatch[r],o=n.unselectBatch[r],u=n.textOptions[r],p=n.textSelectedOptions[r]||{},c=n.textUnselectedOptions[r]||{},b=T.extendFlat({},u);if(l.length||o.length){var g=p.color,d=c.color,m=u.color,x=T.isArrayOrTypedArray(m);for(b.color=new Array(t._length),v=0;v<l.length;v++)h=l[v],b.color[h]=g||(x?m[h]:m);for(v=0;v<o.length;v++){h=o[v];var y=x?m[h]:m;b.color[h]=d||(g?y:w.addOpacity(y,i))}}n.glText[r].update(b)}}},68101:function(N,L,e){var T=e(8225);N.exports=function(w,i,_){var v=w.i;return"x"in w||(w.x=i._x[v]),"y"in w||(w.y=i._y[v]),T(w,i,_)}},68645:function(N,L,e){var T=e(78232);L.isOpenSymbol=function(w){return typeof w=="string"?T.OPEN_RE.test(w):w%200>100},L.isDotSymbol=function(w){return typeof w=="string"?T.DOT_RE.test(w):w>200}},20794:function(N,L,e){var T=e(73972),w=e(71828),i=e(34603);function _(v,h,s,t){var a=v.xa,n=v.ya,r=v.distance,l=v.dxy,o=v.index,u={pointNumber:o,x:h[o],y:s[o]};u.tx=w.isArrayOrTypedArray(t.text)?t.text[o]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[o]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[o]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[o]:t.textposition;var p=t.textfont;p&&(u.ts=w.isArrayOrTypedArray(p.size)?p.size[o]:p.size,u.tc=Array.isArray(p.color)?p.color[o]:p.color,u.tf=Array.isArray(p.family)?p.family[o]:p.family);var c=t.marker;c&&(u.ms=w.isArrayOrTypedArray(c.size)?c.size[o]:c.size,u.mo=w.isArrayOrTypedArray(c.opacity)?c.opacity[o]:c.opacity,u.mx=w.isArrayOrTypedArray(c.symbol)?c.symbol[o]:c.symbol,u.ma=w.isArrayOrTypedArray(c.angle)?c.angle[o]:c.angle,u.mc=w.isArrayOrTypedArray(c.color)?c.color[o]:c.color);var b=c&&c.line;b&&(u.mlc=Array.isArray(b.color)?b.color[o]:b.color,u.mlw=w.isArrayOrTypedArray(b.width)?b.width[o]:b.width);var g=c&&c.gradient;g&&g.type!=="none"&&(u.mgt=Array.isArray(g.type)?g.type[o]:g.type,u.mgc=Array.isArray(g.color)?g.color[o]:g.color);var d=a.c2p(u.x,!0),m=n.c2p(u.y,!0),x=u.mrc||1,y=t.hoverlabel;y&&(u.hbg=Array.isArray(y.bgcolor)?y.bgcolor[o]:y.bgcolor,u.hbc=Array.isArray(y.bordercolor)?y.bordercolor[o]:y.bordercolor,u.hts=w.isArrayOrTypedArray(y.font.size)?y.font.size[o]:y.font.size,u.htc=Array.isArray(y.font.color)?y.font.color[o]:y.font.color,u.htf=Array.isArray(y.font.family)?y.font.family[o]:y.font.family,u.hnl=w.isArrayOrTypedArray(y.namelength)?y.namelength[o]:y.namelength);var k=t.hoverinfo;k&&(u.hi=Array.isArray(k)?k[o]:k);var f=t.hovertemplate;f&&(u.ht=Array.isArray(f)?f[o]:f);var S={};S[v.index]=u;var M=t._origX,E=t._origY,O=w.extendFlat({},v,{color:i(t,u),x0:d-x,x1:d+x,xLabelVal:M?M[o]:u.x,y0:m-x,y1:m+x,yLabelVal:E?E[o]:u.y,cd:S,distance:r,spikeDistance:l,hovertemplate:u.ht});return u.htx?O.text=u.htx:u.tx?O.text=u.tx:t.text&&(O.text=t.text),w.fillText(u,t,O),T.getComponentMethod("errorbars","hoverInfo")(u,t,O),O}N.exports={hoverPoints:function(v,h,s,t){var a,n,r,l,o,u,p,c,b,g,d=v.cd,m=d[0].t,x=d[0].trace,y=v.xa,k=v.ya,f=m.x,S=m.y,M=y.c2p(h),E=k.c2p(s),O=v.distance;if(m.tree){var P=y.p2c(M-O),I=y.p2c(M+O),z=k.p2c(E-O),U=k.p2c(E+O);a=t==="x"?m.tree.range(Math.min(P,I),Math.min(k._rl[0],k._rl[1]),Math.max(P,I),Math.max(k._rl[0],k._rl[1])):m.tree.range(Math.min(P,I),Math.min(z,U),Math.max(P,I),Math.max(z,U))}else a=m.ids;var R=O;if(t==="x"){var j=!!x.xperiodalignment,Z=!!x.yperiodalignment;for(u=0;u<a.length;u++){if(l=f[n=a[u]],p=Math.abs(y.c2p(l)-M),j){var F=y.c2p(x._xStarts[n]),V=y.c2p(x._xEnds[n]);p=M>=Math.min(F,V)&&M<=Math.max(F,V)?0:1/0}if(p<R){if(R=p,o=S[n],c=k.c2p(o)-E,Z){var H=k.c2p(x._yStarts[n]),te=k.c2p(x._yEnds[n]);c=E>=Math.min(H,te)&&E<=Math.max(H,te)?0:1/0}g=Math.sqrt(p*p+c*c),r=a[u]}}}else for(u=a.length-1;u>-1;u--)l=f[n=a[u]],o=S[n],p=y.c2p(l)-M,c=k.c2p(o)-E,(b=Math.sqrt(p*p+c*c))<R&&(R=g=b,r=n);return v.index=r,v.distance=R,v.dxy=g,r===void 0?[v]:[_(v,f,S,x)]},calcHover:_}},68868:function(N,L,e){var T=e(72156);T.plot=e(26787),N.exports=T},26787:function(N,L,e){var T=e(11870),w=e(46075),i=e(3593),_=e(42505),v=e(71828),h=e(64505).selectMode,s=e(79749),t=e(34098),a=e(68687),n=e(5345).styleTextSelection,r={};function l(o,u,p,c){var b=o._size,g=o.width*c,d=o.height*c,m=b.l*c,x=b.b*c,y=b.r*c,k=b.t*c,f=b.w*c,S=b.h*c;return[m+u.domain[0]*f,x+p.domain[0]*S,g-y-(1-u.domain[1])*f,d-k-(1-p.domain[1])*S]}(N.exports=function(o,u,p){if(p.length){var c,b,g=o._fullLayout,d=u._scene,m=u.xaxis,x=u.yaxis;if(d)if(s(o,["ANGLE_instanced_arrays","OES_element_index_uint"],r)){var y=d.count,k=g._glcanvas.data()[0].regl;if(a(o,u,p),d.dirty){if(!d.line2d&&!d.error2d||d.scatter2d||d.fill2d||d.glText||k.clear({}),d.error2d===!0&&(d.error2d=i(k)),d.line2d===!0&&(d.line2d=w(k)),d.scatter2d===!0&&(d.scatter2d=T(k)),d.fill2d===!0&&(d.fill2d=w(k)),d.glText===!0)for(d.glText=new Array(y),c=0;c<y;c++)d.glText[c]=new _(k);if(d.glText){if(y>d.glText.length){var f=y-d.glText.length;for(c=0;c<f;c++)d.glText.push(new _(k))}else if(y<d.glText.length){var S=d.glText.length-y;d.glText.splice(y,S).forEach(function(ie){ie.destroy()})}for(c=0;c<y;c++)d.glText[c].update(d.textOptions[c])}if(d.line2d&&(d.line2d.update(d.lineOptions),d.lineOptions=d.lineOptions.map(function(ie){if(ie&&ie.positions){for(var ae=ie.positions,oe=0;oe<ae.length&&(isNaN(ae[oe])||isNaN(ae[oe+1]));)oe+=2;for(var fe=ae.length-2;fe>oe&&(isNaN(ae[fe])||isNaN(ae[fe+1]));)fe-=2;ie.positions=ae.slice(oe,fe+2)}return ie}),d.line2d.update(d.lineOptions)),d.error2d){var M=(d.errorXOptions||[]).concat(d.errorYOptions||[]);d.error2d.update(M)}d.scatter2d&&d.scatter2d.update(d.markerOptions),d.fillOrder=v.repeat(null,y),d.fill2d&&(d.fillOptions=d.fillOptions.map(function(ie,ae){var oe=p[ae];if(ie&&oe&&oe[0]&&oe[0].trace){var fe,ge,ve=oe[0],xe=ve.trace,_e=ve.t,ye=d.lineOptions[ae],Ce=[];xe._ownfill&&Ce.push(ae),xe._nexttrace&&Ce.push(ae+1),Ce.length&&(d.fillOrder[ae]=Ce);var ke,Te,le=[],ue=ye&&ye.positions||_e.positions;if(xe.fill==="tozeroy"){for(ke=0;ke<ue.length&&isNaN(ue[ke+1]);)ke+=2;for(Te=ue.length-2;Te>ke&&isNaN(ue[Te+1]);)Te-=2;ue[ke+1]!==0&&(le=[ue[ke],0]),le=le.concat(ue.slice(ke,Te+2)),ue[Te+1]!==0&&(le=le.concat([ue[Te],0]))}else if(xe.fill==="tozerox"){for(ke=0;ke<ue.length&&isNaN(ue[ke]);)ke+=2;for(Te=ue.length-2;Te>ke&&isNaN(ue[Te]);)Te-=2;ue[ke]!==0&&(le=[0,ue[ke+1]]),le=le.concat(ue.slice(ke,Te+2)),ue[Te]!==0&&(le=le.concat([0,ue[Te+1]]))}else if(xe.fill==="toself"||xe.fill==="tonext"){for(le=[],fe=0,ie.splitNull=!0,ge=0;ge<ue.length;ge+=2)(isNaN(ue[ge])||isNaN(ue[ge+1]))&&((le=le.concat(ue.slice(fe,ge))).push(ue[fe],ue[fe+1]),le.push(null,null),fe=ge+2);le=le.concat(ue.slice(fe)),fe&&le.push(ue[fe],ue[fe+1])}else{var de=xe._nexttrace;if(de){var Le=d.lineOptions[ae+1];if(Le){var we=Le.positions;if(xe.fill==="tonexty"){for(le=ue.slice(),ae=Math.floor(we.length/2);ae--;){var Ee=we[2*ae],Oe=we[2*ae+1];isNaN(Ee)||isNaN(Oe)||le.push(Ee,Oe)}ie.fill=de.fillcolor}}}}if(xe._prevtrace&&xe._prevtrace.fill==="tonext"){var Fe=d.lineOptions[ae-1].positions,pe=le.length/2,be=[fe=pe];for(ge=0;ge<Fe.length;ge+=2)(isNaN(Fe[ge])||isNaN(Fe[ge+1]))&&(be.push(ge/2+pe+1),fe=ge+2);le=le.concat(Fe),ie.hole=be}return ie.fillmode=xe.fill,ie.opacity=xe.opacity,ie.positions=le,ie}}),d.fill2d.update(d.fillOptions))}var E=g.dragmode,O=h(E),P=g.clickmode.indexOf("select")>-1;for(c=0;c<y;c++){var I=p[c][0],z=I.trace,U=I.t,R=U.index,j=z._length,Z=U.x,F=U.y;if(z.selectedpoints||O||P){if(O||(O=!0),z.selectedpoints){var V=d.selectBatch[R]=v.selIndices2selPoints(z),H={};for(b=0;b<V.length;b++)H[V[b]]=1;var te=[];for(b=0;b<j;b++)H[b]||te.push(b);d.unselectBatch[R]=te}var $=U.xpx=new Array(j),J=U.ypx=new Array(j);for(b=0;b<j;b++)$[b]=m.c2p(Z[b]),J[b]=x.c2p(F[b])}else U.xpx=U.ypx=null}if(O){if(d.select2d||(d.select2d=T(g._glcanvas.data()[1].regl)),d.scatter2d){var X=new Array(y);for(c=0;c<y;c++)X[c]=d.selectBatch[c].length||d.unselectBatch[c].length?d.markerUnselectedOptions[c]:{};d.scatter2d.update(X)}d.select2d&&(d.select2d.update(d.markerOptions),d.select2d.update(d.markerSelectedOptions)),d.glText&&p.forEach(function(ie){var ae=((ie||[])[0]||{}).trace||{};t.hasText(ae)&&n(ie)})}else d.scatter2d&&d.scatter2d.update(d.markerOptions);var K={viewport:l(g,m,x,o._context.plotGlPixelRatio),range:[(m._rl||m.range)[0],(x._rl||x.range)[0],(m._rl||m.range)[1],(x._rl||x.range)[1]]},ee=v.repeat(K,d.count);d.fill2d&&d.fill2d.update(ee),d.line2d&&d.line2d.update(ee),d.error2d&&d.error2d.update(ee.concat(ee)),d.scatter2d&&d.scatter2d.update(ee),d.select2d&&d.select2d.update(ee),d.glText&&d.glText.forEach(function(ie){ie.update(K)})}else d.init()}}).reglPrecompiled=r},38967:function(N,L,e){var T=e(71828);N.exports=function(w,i){var _=i._scene,v={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},h={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return i._scene||((_=i._scene={}).init=function(){T.extendFlat(_,h,v)},_.init(),_.update=function(s){var t=T.repeat(s,_.count);if(_.fill2d&&_.fill2d.update(t),_.scatter2d&&_.scatter2d.update(t),_.line2d&&_.line2d.update(t),_.error2d&&_.error2d.update(t.concat(t)),_.select2d&&_.select2d.update(t),_.glText)for(var a=0;a<_.count;a++)_.glText[a].update(s)},_.draw=function(){for(var s=_.count,t=_.fill2d,a=_.error2d,n=_.line2d,r=_.scatter2d,l=_.glText,o=_.select2d,u=_.selectBatch,p=_.unselectBatch,c=0;c<s;c++){if(t&&_.fillOrder[c]&&t.draw(_.fillOrder[c]),n&&_.lineOptions[c]&&n.draw(c),a&&(_.errorXOptions[c]&&a.draw(c),_.errorYOptions[c]&&a.draw(c+s)),r&&_.markerOptions[c])if(p[c].length){var b=T.repeat([],_.count);b[c]=p[c],r.draw(b)}else u[c].length||r.draw(c);l[c]&&_.textOptions[c]&&l[c].render()}o&&o.draw(u),_.dirty=!1},_.destroy=function(){_.fill2d&&_.fill2d.destroy&&_.fill2d.destroy(),_.scatter2d&&_.scatter2d.destroy&&_.scatter2d.destroy(),_.error2d&&_.error2d.destroy&&_.error2d.destroy(),_.line2d&&_.line2d.destroy&&_.line2d.destroy(),_.select2d&&_.select2d.destroy&&_.select2d.destroy(),_.glText&&_.glText.forEach(function(s){s.destroy&&s.destroy()}),_.lineOptions=null,_.fillOptions=null,_.markerOptions=null,_.markerSelectedOptions=null,_.markerUnselectedOptions=null,_.errorXOptions=null,_.errorYOptions=null,_.textOptions=null,_.textSelectedOptions=null,_.textUnselectedOptions=null,_.selectBatch=null,_.unselectBatch=null,i._scene=null}),_.dirty||T.extendFlat(_,v),_}},58147:function(N,L,e){var T=e(34098),w=e(5345).styleTextSelection;N.exports=function(i,_){var v=i.cd,h=i.xaxis,s=i.yaxis,t=[],a=v[0].trace,n=v[0].t,r=a._length,l=n.x,o=n.y,u=n._scene,p=n.index;if(!u)return t;var c=T.hasText(a),b=T.hasMarkers(a),g=!b&&!c;if(a.visible!==!0||g)return t;var d=[],m=[];if(_!==!1&&!_.degenerate)for(var x=0;x<r;x++)_.contains([n.xpx[x],n.ypx[x]],!1,x,i)?(d.push(x),t.push({pointNumber:x,x:h.c2d(l[x]),y:s.c2d(o[x])})):m.push(x);if(b){var y=u.scatter2d;if(d.length||m.length){if(!u.selectBatch[p].length&&!u.unselectBatch[p].length){var k=new Array(u.count);k[p]=u.markerUnselectedOptions[p],y.update.apply(y,k)}}else{var f=new Array(u.count);f[p]=u.markerOptions[p],y.update.apply(y,f)}}return u.selectBatch[p]=d,u.unselectBatch[p]=m,c&&w(v),t}},99181:function(N,L,e){var T=e(5386).fF,w=e(5386).si,i=e(19316),_=e(82196),v=e(23585),h=e(9012),s=e(50693),t=e(1426).extendFlat,a=e(30962).overrideAll,n=e(23585),r=i.line,l=i.marker;N.exports=a({lon:i.lon,lat:i.lat,cluster:{enabled:{valType:"boolean"},maxzoom:t({},n.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:t({},l.opacity,{dflt:1})},mode:t({},_.mode,{dflt:"markers"}),text:t({},_.text,{}),texttemplate:w({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},_.hovertext,{}),line:{color:r.color,width:r.width},connectgaps:_.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},s("marker")),fill:i.fill,fillcolor:_.fillcolor,textfont:v.layers.symbol.textfont,textposition:v.layers.symbol.textposition,below:{valType:"string"},selected:{marker:_.selected.marker},unselected:{marker:_.unselected.marker},hoverinfo:t({},h.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:T()},"calc","nested")},15790:function(N,L,e){var T=e(92770),w=e(71828),i=e(50606).BADNUM,_=e(18214),v=e(21081),h=e(91424),s=e(39984),t=e(34098),a=e(13056),n=e(23469).appendArrayPointValue,r=e(63893).NEWLINES,l=e(63893).BR_TAG_ALL;function o(g){return{type:g,geojson:_.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function u(g,d){return w.isArrayOrTypedArray(g)?d?function(m){return T(g[m])?+g[m]:0}:function(m){return g[m]}:g?function(){return g}:p}function p(){return""}function c(g){return g[0]===i}function b(g,d){var m;if(w.isArrayOrTypedArray(g)&&w.isArrayOrTypedArray(d)){m=["step",["get","point_count"],g[0]];for(var x=1;x<g.length;x++)m.push(d[x-1],g[x])}else m=g;return m}N.exports=function(g,d){var m,x=d[0].trace,y=x.visible===!0&&x._length!==0,k=x.fill!=="none",f=t.hasLines(x),S=t.hasMarkers(x),M=t.hasText(x),E=S&&x.marker.symbol==="circle",O=S&&x.marker.symbol!=="circle",P=x.cluster&&x.cluster.enabled,I=o("fill"),z=o("line"),U=o("circle"),R=o("symbol"),j={fill:I,line:z,circle:U,symbol:R};if(!y)return j;if((k||f)&&(m=_.calcTraceToLineCoords(d)),k&&(I.geojson=_.makePolygon(m),I.layout.visibility="visible",w.extendFlat(I.paint,{"fill-color":x.fillcolor})),f&&(z.geojson=_.makeLine(m),z.layout.visibility="visible",w.extendFlat(z.paint,{"line-width":x.line.width,"line-color":x.line.color,"line-opacity":x.opacity})),E){var Z=function(H){var te,$,J,X,K=H[0].trace,ee=K.marker,ie=K.selectedpoints,ae=w.isArrayOrTypedArray(ee.color),oe=w.isArrayOrTypedArray(ee.size),fe=w.isArrayOrTypedArray(ee.opacity);function ge(le){return K.opacity*le}ae&&($=v.hasColorscale(K,"marker")?v.makeColorScaleFuncFromTrace(ee):w.identity),oe&&(J=s(K)),fe&&(X=function(le){return ge(T(le)?+w.constrain(le,0,1):0)});var ve,xe,_e=[];for(te=0;te<H.length;te++){var ye=H[te],Ce=ye.lonlat;if(!c(Ce)){var ke={};$&&(ke.mcc=ye.mcc=$(ye.mc)),J&&(ke.mrc=ye.mrc=J(ye.ms)),X&&(ke.mo=X(ye.mo)),ie&&(ke.selected=ye.selected||0),_e.push({type:"Feature",id:te+1,geometry:{type:"Point",coordinates:Ce},properties:ke})}}if(ie)for(ve=h.makeSelectedPointStyleFns(K),te=0;te<_e.length;te++){var Te=_e[te].properties;ve.selectedOpacityFn&&(Te.mo=ge(ve.selectedOpacityFn(Te))),ve.selectedColorFn&&(Te.mcc=ve.selectedColorFn(Te)),ve.selectedSizeFn&&(Te.mrc=ve.selectedSizeFn(Te))}return{geojson:{type:"FeatureCollection",features:_e},mcc:ae||ve&&ve.selectedColorFn?{type:"identity",property:"mcc"}:ee.color,mrc:oe||ve&&ve.selectedSizeFn?{type:"identity",property:"mrc"}:(xe=ee.size,xe/2),mo:fe||ve&&ve.selectedOpacityFn?{type:"identity",property:"mo"}:ge(ee.opacity)}}(d);U.geojson=Z.geojson,U.layout.visibility="visible",P&&(U.filter=["!",["has","point_count"]],j.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":b(x.cluster.color,x.cluster.step),"circle-radius":b(x.cluster.size,x.cluster.step),"circle-opacity":b(x.cluster.opacity,x.cluster.step)}},j.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),w.extendFlat(U.paint,{"circle-color":Z.mcc,"circle-radius":Z.mrc,"circle-opacity":Z.mo})}if(E&&P&&(U.filter=["!",["has","point_count"]]),(O||M)&&(R.geojson=function(H,te){for(var $=te._fullLayout,J=H[0].trace,X=J.marker||{},K=X.symbol,ee=X.angle,ie=K!=="circle"?u(K):p,ae=ee!=="auto"?u(ee,!0):p,oe=t.hasText(J)?u(J.text):p,fe=[],ge=0;ge<H.length;ge++){var ve=H[ge];if(!c(ve.lonlat)){var xe,_e=J.texttemplate;if(_e){var ye=Array.isArray(_e)?_e[ge]||"":_e,Ce=J._module.formatLabels(ve,J,$),ke={};n(ke,J,ve.i);var Te=J._meta||{};xe=w.texttemplateString(ye,Ce,$._d3locale,ke,ve,Te)}else xe=oe(ge);xe&&(xe=xe.replace(r,"").replace(l,`
`)),fe.push({type:"Feature",geometry:{type:"Point",coordinates:ve.lonlat},properties:{symbol:ie(ge),angle:ae(ge),text:xe}})}}return{type:"FeatureCollection",features:fe}}(d,g),w.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),O&&(w.extendFlat(R.layout,{"icon-size":x.marker.size/10}),"angle"in x.marker&&x.marker.angle!=="auto"&&w.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=x.marker.allowoverlap,w.extendFlat(R.paint,{"icon-opacity":x.opacity*x.marker.opacity,"icon-color":x.marker.color})),M)){var F=(x.marker||{}).size,V=a(x.textposition,F);w.extendFlat(R.layout,{"text-size":x.textfont.size,"text-anchor":V.anchor,"text-offset":V.offset,"text-font":x.textfont.family.split(", ")}),w.extendFlat(R.paint,{"text-color":x.textfont.color,"text-opacity":x.opacity})}return j}},76645:function(N,L,e){var T=e(71828),w=e(34098),i=e(49508),_=e(11058),v=e(82410),h=e(28908),s=e(99181),t=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];N.exports=function(a,n,r,l){function o(y,k){return T.coerce(a,n,s,y,k)}function u(y,k){return T.coerce2(a,n,s,y,k)}var p=function(y,k,f){var S=f("lon")||[],M=f("lat")||[],E=Math.min(S.length,M.length);return k._length=E,E}(0,n,o);if(p){if(o("text"),o("texttemplate"),o("hovertext"),o("hovertemplate"),o("mode"),o("below"),w.hasMarkers(n)){i(a,n,r,l,o,{noLine:!0,noAngle:!0}),o("marker.allowoverlap"),o("marker.angle");var c=n.marker;c.symbol!=="circle"&&(T.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),T.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}w.hasLines(n)&&(_(a,n,r,l,o,{noDash:!0}),o("connectgaps"));var b=u("cluster.maxzoom"),g=u("cluster.step"),d=u("cluster.color",n.marker&&n.marker.color||r),m=u("cluster.size"),x=u("cluster.opacity");o("cluster.enabled",b!==!1||g!==!1||d!==!1||m!==!1||x!==!1),w.hasText(n)&&v(a,n,l,o,{noSelect:!0,font:{family:t.indexOf(l.font.family)!==-1?l.font.family:"Open Sans Regular",size:l.font.size,color:l.font.color}}),o("fill"),n.fill!=="none"&&h(a,n,r,o),T.coerceSelectionMarkerOpacity(n,o)}else n.visible=!1}},53353:function(N){N.exports=function(L,e){return L.lon=e.lon,L.lat=e.lat,L}},15636:function(N,L,e){var T=e(89298);N.exports=function(w,i,_){var v={},h=_[i.subplot]._subplot.mockAxis,s=w.lonlat;return v.lonLabel=T.tickText(h,h.c2l(s[0]),!0).text,v.latLabel=T.tickText(h,h.c2l(s[1]),!0).text,v}},28178:function(N,L,e){var T=e(30211),w=e(71828),i=e(34603),_=w.fillText,v=e(50606).BADNUM,h=e(77734).traceLayerPrefix;function s(t,a,n){if(!t.hovertemplate){var r=(a.hi||t.hoverinfo).split("+"),l=r.indexOf("all")!==-1,o=r.indexOf("lon")!==-1,u=r.indexOf("lat")!==-1,p=a.lonlat,c=[];return l||o&&u?c.push("("+b(p[1])+", "+b(p[0])+")"):o?c.push(n.lon+b(p[0])):u&&c.push(n.lat+b(p[1])),(l||r.indexOf("text")!==-1)&&_(a,t,c),c.join("<br>")}function b(g){return g+""}}N.exports={hoverPoints:function(t,a,n){var r=t.cd,l=r[0].trace,o=t.xa,u=t.ya,p=t.subplot,c=[],b=h+l.uid+"-circle",g=l.cluster&&l.cluster.enabled;if(g){var d=p.map.queryRenderedFeatures(null,{layers:[b]});c=d.map(function(I){return I.id})}var m=360*(a>=0?Math.floor((a+180)/360):Math.ceil((a-180)/360)),x=a-m;if(T.getClosest(r,function(I){var z=I.lonlat;if(z[0]===v||g&&c.indexOf(I.i+1)===-1)return 1/0;var U=w.modHalf(z[0],360),R=z[1],j=p.project([U,R]),Z=j.x-o.c2p([x,R]),F=j.y-u.c2p([U,n]),V=Math.max(3,I.mrc||0);return Math.max(Math.sqrt(Z*Z+F*F)-V,1-3/V)},t),t.index!==!1){var y=r[t.index],k=y.lonlat,f=[w.modHalf(k[0],360)+m,k[1]],S=o.c2p(f),M=u.c2p(f),E=y.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=M-E,t.y1=M+E;var O={};O[l.subplot]={_subplot:p};var P=l._module.formatLabels(y,l,O);return t.lonLabel=P.lonLabel,t.latLabel=P.latLabel,t.color=i(l,y),t.extraText=s(l,y,r[0].t.labels),t.hovertemplate=l.hovertemplate,[t]}},getExtraText:s}},20467:function(N,L,e){N.exports={attributes:e(99181),supplyDefaults:e(76645),colorbar:e(4898),formatLabels:e(15636),calc:e(84622),plot:e(86951),hoverPoints:e(28178).hoverPoints,eventData:e(53353),selectPoints:e(86387),styleOnSelect:function(T,w){w&&w[0].trace._glTrace.update(w)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(N,L,e){var T=e(71828),w=e(15790),i=e(77734).traceLayerPrefix,_={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function v(s,t,a,n){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=a,this.isHidden=n,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:i+t+"-fill",line:i+t+"-line",circle:i+t+"-circle",symbol:i+t+"-symbol",cluster:i+t+"-cluster",clusterCount:i+t+"-cluster-count"},this.below=null}var h=v.prototype;h.addSource=function(s,t,a){var n={type:"geojson",data:t.geojson};a&&a.enabled&&T.extendFlat(n,{cluster:!0,clusterMaxZoom:a.maxzoom});var r=this.subplot.map.getSource(this.sourceIds[s]);r?r.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[s],n)},h.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},h.addLayer=function(s,t,a){var n={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(n.filter=t.filter);for(var r,l=this.layerIds[s],o=this.subplot.getMapLayers(),u=0;u<o.length;u++)if(o[u].id===l){r=!0;break}r?(this.subplot.setOptions(l,"setLayoutProperty",n.layout),n.layout.visibility==="visible"&&this.subplot.setOptions(l,"setPaintProperty",n.paint)):this.subplot.addLayer(n,a)},h.update=function(s){var t=s[0].trace,a=this.subplot,n=a.map,r=w(a.gd,s),l=a.belowLookup["trace-"+this.uid],o=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,p=this;function c(x){u?function(y){for(var k=_.cluster,f=k.length-1;f>=0;f--){var S=k[f];n.removeLayer(p.layerIds[S])}y||n.removeSource(p.sourceIds.circle)}(x):function(y){for(var k=_.nonCluster,f=k.length-1;f>=0;f--){var S=k[f];n.removeLayer(p.layerIds[S]),y||n.removeSource(p.sourceIds[S])}}(x)}function b(x){o?function(y){y||p.addSource("circle",r.circle,t.cluster);for(var k=_.cluster,f=0;f<k.length;f++){var S=k[f],M=r[S];p.addLayer(S,M,l)}}(x):function(y){for(var k=_.nonCluster,f=0;f<k.length;f++){var S=k[f],M=r[S];y||p.addSource(S,M),p.addLayer(S,M,l)}}(x)}function g(){for(var x=o?_.cluster:_.nonCluster,y=0;y<x.length;y++){var k=x[y],f=r[k];f&&(a.setOptions(p.layerIds[k],"setLayoutProperty",f.layout),f.layout.visibility==="visible"&&(k!=="cluster"&&p.setSourceData(k,f),a.setOptions(p.layerIds[k],"setPaintProperty",f.paint)))}}var d=this.isHidden,m=t.visible!==!0;m?d||c():d?m||b():u!==o?(c(),b()):(this.below!==l&&(c(!0),b(!0)),g()),this.clusterEnabled=o,this.isHidden=m,this.below=l,s[0].trace._glTrace=this},h.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?_.cluster:_.nonCluster,a=t.length-1;a>=0;a--){var n=t[a];s.removeLayer(this.layerIds[n]),s.removeSource(this.sourceIds[n])}},N.exports=function(s,t){var a,n,r,l=t[0].trace,o=l.cluster&&l.cluster.enabled,u=l.visible!==!0,p=new v(s,l.uid,o,u),c=w(s.gd,t),b=p.below=s.belowLookup["trace-"+l.uid];if(o)for(p.addSource("circle",c.circle,l.cluster),a=0;a<_.cluster.length;a++)r=c[n=_.cluster[a]],p.addLayer(n,r,b);else for(a=0;a<_.nonCluster.length;a++)r=c[n=_.nonCluster[a]],p.addSource(n,r,l.cluster),p.addLayer(n,r,b);return t[0].trace._glTrace=p,p}},86387:function(N,L,e){var T=e(71828),w=e(34098),i=e(50606).BADNUM;N.exports=function(_,v){var h,s=_.cd,t=_.xaxis,a=_.yaxis,n=[],r=s[0].trace;if(!w.hasMarkers(r))return[];if(v===!1)for(h=0;h<s.length;h++)s[h].selected=0;else for(h=0;h<s.length;h++){var l=s[h],o=l.lonlat;if(o[0]!==i){var u=[T.modHalf(o[0],360),o[1]],p=[t.c2p(u),a.c2p(u)];v.contains(p,null,h,_)?(n.push({pointNumber:h,lon:o[0],lat:o[1]}),l.selected=1):l.selected=0}}return n}},81245:function(N,L,e){var T=e(5386).fF,w=e(5386).si,i=e(1426).extendFlat,_=e(82196),v=e(9012),h=_.line;N.exports={mode:_.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:w({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,line:{color:h.color,width:h.width,dash:h.dash,backoff:h.backoff,shape:i({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:i({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:i({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:i({},v.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:_.hoveron,hovertemplate:T(),selected:_.selected,unselected:_.unselected}},26442:function(N,L,e){var T=e(92770),w=e(50606).BADNUM,i=e(89298),_=e(36922),v=e(75225),h=e(66279),s=e(47761).calcMarkerSize;N.exports=function(t,a){for(var n=t._fullLayout,r=a.subplot,l=n[r].radialaxis,o=n[r].angularaxis,u=l.makeCalcdata(a,"r"),p=o.makeCalcdata(a,"theta"),c=a._length,b=new Array(c),g=0;g<c;g++){var d=u[g],m=p[g],x=b[g]={};T(d)&&T(m)?(x.r=d,x.theta=m):x.r=w}var y=s(a,c);return a._extremes.x=i.findExtremes(l,u,{ppad:y}),_(t,a),v(b,a),h(b,a),b}},22184:function(N,L,e){var T=e(71828),w=e(34098),i=e(49508),_=e(11058),v=e(94039),h=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,a=e(81245);function n(r,l,o,u){var p,c=u("r"),b=u("theta");if(T.isTypedArray(c)&&(l.r=c=Array.from(c)),T.isTypedArray(b)&&(l.theta=b=Array.from(b)),c)b?p=Math.min(c.length,b.length):(p=c.length,u("theta0"),u("dtheta"));else{if(!b)return 0;p=l.theta.length,u("r0"),u("dr")}return l._length=p,p}N.exports={handleRThetaDefaults:n,supplyDefaults:function(r,l,o,u){function p(g,d){return T.coerce(r,l,a,g,d)}var c=n(0,l,0,p);if(c){p("thetaunit"),p("mode",c<t?"lines+markers":"lines"),p("text"),p("hovertext"),l.hoveron!=="fills"&&p("hovertemplate"),w.hasMarkers(l)&&i(r,l,o,u,p,{gradient:!0}),w.hasLines(l)&&(_(r,l,o,u,p,{backoff:!0}),v(r,l,p),p("connectgaps")),w.hasText(l)&&(p("texttemplate"),h(r,l,u,p));var b=[];(w.hasMarkers(l)||w.hasText(l))&&(p("cliponaxis"),p("marker.maxdisplayed"),b.push("points")),p("fill"),l.fill!=="none"&&(s(r,l,o,p),w.hasLines(l)||v(r,l,p)),l.fill!=="tonext"&&l.fill!=="toself"||b.push("fills"),p("hoveron",b.join("+")||"points"),T.coerceSelectionMarkerOpacity(l,p)}else l.visible=!1}}},98608:function(N,L,e){var T=e(71828),w=e(89298);N.exports=function(i,_,v){var h,s,t={},a=v[_.subplot]._subplot;a?(h=a.radialAxis,s=a.angularAxis):(h=(a=v[_.subplot]).radialaxis,s=a.angularaxis);var n=h.c2l(i.r);t.rLabel=w.tickText(h,n,!0).text;var r=s.thetaunit==="degrees"?T.rad2deg(i.theta):i.theta;return t.thetaLabel=w.tickText(s,r,!0).text,t}},59150:function(N,L,e){var T=e(33720);function w(i,_,v,h){var s=v.radialAxis,t=v.angularAxis;s._hovertitle="r",t._hovertitle="";var a={};a[_.subplot]={_subplot:v};var n=_._module.formatLabels(i,_,a);h.rLabel=n.rLabel,h.thetaLabel=n.thetaLabel;var r=i.hi||_.hoverinfo,l=[];function o(p,c){l.push(p._hovertitle+": "+c)}if(!_.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&o(s,h.rLabel),u.indexOf("theta")!==-1&&o(t,h.thetaLabel),u.indexOf("text")!==-1&&h.text&&(l.push(h.text),delete h.text),h.extraText=l.join("<br>")}}N.exports={hoverPoints:function(i,_,v,h){var s=T(i,_,v,h);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var a=i.subplot,n=t.cd[t.index],r=t.trace;if(a.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,w(n,r,a,t),t.hovertemplate=r.hovertemplate,s}},makeHoverPointText:w}},91271:function(N,L,e){N.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(81245),supplyDefaults:e(22184).supplyDefaults,colorbar:e(4898),formatLabels:e(98608),calc:e(26442),plot:e(45162),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(59150).hoverPoints,selectPoints:e(98002),meta:{}}},45162:function(N,L,e){var T=e(32663),w=e(50606).BADNUM;N.exports=function(i,_,v){for(var h=_.layers.frontplot.select("g.scatterlayer"),s=_.xaxis,t=_.yaxis,a={xaxis:s,yaxis:t,plot:_.framework,layerClipId:_._hasClipOnAxisFalse?_.clipIds.forTraces:null},n=_.radialAxis,r=_.angularAxis,l=0;l<v.length;l++)for(var o=v[l],u=0;u<o.length;u++){u===0&&(o[0].trace._xA=s,o[0].trace._yA=t);var p=o[u],c=p.r;if(c===w)p.x=p.y=w;else{var b=n.c2g(c),g=r.c2g(p.theta);p.x=b*Math.cos(g),p.y=b*Math.sin(g)}}T(i,a,v,h)}},53286:function(N,L,e){var T=e(81245),w=e(42341),i=e(5386).si;N.exports={mode:T.mode,r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,text:T.text,texttemplate:i({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,hovertemplate:T.hovertemplate,line:{color:w.line.color,width:w.line.width,dash:w.line.dash,editType:"calc"},connectgaps:w.connectgaps,marker:w.marker,fill:w.fill,fillcolor:w.fillcolor,textposition:w.textposition,textfont:w.textfont,hoverinfo:T.hoverinfo,selected:T.selected,unselected:T.unselected}},65746:function(N,L,e){N.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(53286),supplyDefaults:e(75485),colorbar:e(4898),formatLabels:e(46255),calc:e(37499),hoverPoints:e(29347).hoverPoints,selectPoints:e(58147),meta:{}}},37499:function(N,L,e){var T=e(36922),w=e(47761).calcMarkerSize,i=e(19635),_=e(89298),v=e(78232).TOO_MANY_POINTS;N.exports=function(h,s){var t=h._fullLayout,a=s.subplot,n=t[a].radialaxis,r=t[a].angularaxis,l=s._r=n.makeCalcdata(s,"r"),o=s._theta=r.makeCalcdata(s,"theta"),u=s._length,p={};u<l.length&&(l=l.slice(0,u)),u<o.length&&(o=o.slice(0,u)),p.r=l,p.theta=o,T(h,s);var c,b=p.opts=i.style(h,s);return u<v?c=w(s,u):b.marker&&(c=2*(b.marker.sizeAvg||Math.max(b.marker.size,3))),s._extremes.x=_.findExtremes(n,l,{ppad:c}),[{x:!1,y:!1,t:p,trace:s}]}},75485:function(N,L,e){var T=e(71828),w=e(34098),i=e(22184).handleRThetaDefaults,_=e(49508),v=e(11058),h=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,a=e(53286);N.exports=function(n,r,l,o){function u(c,b){return T.coerce(n,r,a,c,b)}var p=i(n,r,o,u);p?(u("thetaunit"),u("mode",p<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),w.hasMarkers(r)&&_(n,r,l,o,u,{noAngleRef:!0,noStandOff:!0}),w.hasLines(r)&&(v(n,r,l,o,u),u("connectgaps")),w.hasText(r)&&(u("texttemplate"),h(n,r,o,u)),u("fill"),r.fill!=="none"&&s(n,r,l,u),T.coerceSelectionMarkerOpacity(r,u)):r.visible=!1}},46255:function(N,L,e){var T=e(98608);N.exports=function(w,i,_){var v=w.i;return"r"in w||(w.r=i._r[v]),"theta"in w||(w.theta=i._theta[v]),T(w,i,_)}},29347:function(N,L,e){var T=e(20794),w=e(59150).makeHoverPointText;N.exports={hoverPoints:function(i,_,v,h){var s=i.cd[0].t,t=s.r,a=s.theta,n=T.hoverPoints(i,_,v,h);if(n&&n[0].index!==!1){var r=n[0];if(r.index===void 0)return n;var l=i.subplot,o=r.cd[r.index],u=r.trace;if(o.r=t[r.index],o.theta=a[r.index],l.isPtInside(o))return r.xLabelVal=void 0,r.yLabelVal=void 0,w(o,u,l,r),n}}}},21461:function(N,L,e){var T=e(65746);T.plot=e(49741),N.exports=T},49741:function(N,L,e){var T=e(88294),w=e(92770),i=e(26787),_=e(38967),v=e(19635),h=e(71828),s=e(78232).TOO_MANY_POINTS;N.exports=function(t,a,n){if(n.length){var r=a.radialAxis,l=a.angularAxis,o=_(t,a);return n.forEach(function(u){if(u&&u[0]&&u[0].trace){var p,c=u[0],b=c.trace,g=c.t,d=b._length,m=g.r,x=g.theta,y=g.opts,k=m.slice(),f=x.slice();for(p=0;p<m.length;p++)a.isPtInside({r:m[p],theta:x[p]})||(k[p]=NaN,f[p]=NaN);var S=new Array(2*d),M=Array(d),E=Array(d);for(p=0;p<d;p++){var O,P,I=k[p];if(w(I)){var z=r.c2g(I),U=l.c2g(f[p],b.thetaunit);O=z*Math.cos(U),P=z*Math.sin(U)}else O=P=NaN;M[p]=S[2*p]=O,E[p]=S[2*p+1]=P}g.tree=T(S),y.marker&&d>=s&&(y.marker.cluster=g.tree),y.marker&&(y.markerSel.positions=y.markerUnsel.positions=y.marker.positions=S),y.line&&S.length>1&&h.extendFlat(y.line,v.linePositions(t,b,S)),y.text&&(h.extendFlat(y.text,{positions:S},v.textPosition(t,b,y.text,y.marker)),h.extendFlat(y.textSel,{positions:S},v.textPosition(t,b,y.text,y.markerSel)),h.extendFlat(y.textUnsel,{positions:S},v.textPosition(t,b,y.text,y.markerUnsel))),y.fill&&!o.fill2d&&(o.fill2d=!0),y.marker&&!o.scatter2d&&(o.scatter2d=!0),y.line&&!o.line2d&&(o.line2d=!0),y.text&&!o.glText&&(o.glText=!0),o.lineOptions.push(y.line),o.fillOptions.push(y.fill),o.markerOptions.push(y.marker),o.markerSelectedOptions.push(y.markerSel),o.markerUnselectedOptions.push(y.markerUnsel),o.textOptions.push(y.text),o.textSelectedOptions.push(y.textSel),o.textUnselectedOptions.push(y.textUnsel),o.selectBatch.push([]),o.unselectBatch.push([]),g.x=M,g.y=E,g.rawx=M,g.rawy=E,g.r=m,g.theta=x,g.positions=S,g._scene=o,g.index=o.count,o.count++}}),i(t,a,n)}},N.exports.reglPrecompiled={}},48300:function(N,L,e){var T=e(5386).fF,w=e(5386).si,i=e(1426).extendFlat,_=e(82196),v=e(9012),h=_.line;N.exports={mode:_.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:w({editType:"plot"},{keys:["real","imag","text"]}),hovertext:_.hovertext,line:{color:h.color,width:h.width,dash:h.dash,backoff:h.backoff,shape:i({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:i({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:i({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:i({},v.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:_.hoveron,hovertemplate:T(),selected:_.selected,unselected:_.unselected}},30621:function(N,L,e){var T=e(92770),w=e(50606).BADNUM,i=e(36922),_=e(75225),v=e(66279),h=e(47761).calcMarkerSize;N.exports=function(s,t){for(var a=s._fullLayout,n=t.subplot,r=a[n].realaxis,l=a[n].imaginaryaxis,o=r.makeCalcdata(t,"real"),u=l.makeCalcdata(t,"imag"),p=t._length,c=new Array(p),b=0;b<p;b++){var g=o[b],d=u[b],m=c[b]={};T(g)&&T(d)?(m.real=g,m.imag=d):m.real=w}return h(t,p),i(s,t),_(c,t),v(c,t),c}},65269:function(N,L,e){var T=e(71828),w=e(34098),i=e(49508),_=e(11058),v=e(94039),h=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,a=e(48300);N.exports=function(n,r,l,o){function u(b,g){return T.coerce(n,r,a,b,g)}var p=function(b,g,d,m){var x,y=m("real"),k=m("imag");return y&&k&&(x=Math.min(y.length,k.length)),T.isTypedArray(y)&&(g.real=y=Array.from(y)),T.isTypedArray(k)&&(g.imag=k=Array.from(k)),g._length=x,x}(0,r,0,u);if(p){u("mode",p<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),w.hasMarkers(r)&&i(n,r,l,o,u,{gradient:!0}),w.hasLines(r)&&(_(n,r,l,o,u,{backoff:!0}),v(n,r,u),u("connectgaps")),w.hasText(r)&&(u("texttemplate"),h(n,r,o,u));var c=[];(w.hasMarkers(r)||w.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),r.fill!=="none"&&(s(n,r,l,u),w.hasLines(r)||v(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||c.push("fills"),u("hoveron",c.join("+")||"points"),T.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},62047:function(N,L,e){var T=e(89298);N.exports=function(w,i,_){var v={},h=_[i.subplot]._subplot;return v.realLabel=T.tickText(h.radialAxis,w.real,!0).text,v.imagLabel=T.tickText(h.angularAxis,w.imag,!0).text,v}},11350:function(N,L,e){var T=e(33720);function w(i,_,v,h){var s=v.radialAxis,t=v.angularAxis;s._hovertitle="real",t._hovertitle="imag";var a={};a[_.subplot]={_subplot:v};var n=_._module.formatLabels(i,_,a);h.realLabel=n.realLabel,h.imagLabel=n.imagLabel;var r=i.hi||_.hoverinfo,l=[];function o(p,c){l.push(p._hovertitle+": "+c)}if(!_.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&o(s,h.realLabel),u.indexOf("imag")!==-1&&o(t,h.imagLabel),u.indexOf("text")!==-1&&h.text&&(l.push(h.text),delete h.text),h.extraText=l.join("<br>")}}N.exports={hoverPoints:function(i,_,v,h){var s=T(i,_,v,h);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var a=i.subplot,n=t.cd[t.index],r=t.trace;if(a.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,w(n,r,a,t),t.hovertemplate=r.hovertemplate,s}},makeHoverPointText:w}},85956:function(N,L,e){N.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(48300),supplyDefaults:e(65269),colorbar:e(4898),formatLabels:e(62047),calc:e(30621),plot:e(12480),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(11350).hoverPoints,selectPoints:e(98002),meta:{}}},12480:function(N,L,e){var T=e(32663),w=e(50606).BADNUM,i=e(23893).smith;N.exports=function(_,v,h){for(var s=v.layers.frontplot.select("g.scatterlayer"),t=v.xaxis,a=v.yaxis,n={xaxis:t,yaxis:a,plot:v.framework,layerClipId:v._hasClipOnAxisFalse?v.clipIds.forTraces:null},r=0;r<h.length;r++)for(var l=h[r],o=0;o<l.length;o++){o===0&&(l[0].trace._xA=t,l[0].trace._yA=a);var u=l[o],p=u.real;if(p===w)u.x=u.y=w;else{var c=i([p,u.imag]);u.x=c[0],u.y=c[1]}}T(_,n,h,s)}},50413:function(N,L,e){var T=e(5386).fF,w=e(5386).si,i=e(82196),_=e(9012),v=e(50693),h=e(79952).P,s=e(1426).extendFlat,t=i.marker,a=i.line,n=t.line;N.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},i.mode,{dflt:"markers"}),text:s({},i.text,{}),texttemplate:w({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:s({},i.hovertext,{}),line:{color:a.color,width:a.width,dash:h,backoff:a.backoff,shape:s({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:i.connectgaps,cliponaxis:i.cliponaxis,fill:s({},i.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i.fillcolor,marker:s({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:t.angleref,standoff:t.standoff,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:n.width,editType:"calc"},v("marker.line")),gradient:t.gradient,editType:"calc"},v("marker")),textfont:i.textfont,textposition:i.textposition,selected:i.selected,unselected:i.unselected,hoverinfo:s({},_.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:i.hoveron,hovertemplate:T()}},54337:function(N,L,e){var T=e(92770),w=e(36922),i=e(75225),_=e(66279),v=e(47761).calcMarkerSize,h=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};N.exports=function(t,a){var n,r,l,o,u,p,c=t._fullLayout[a.subplot].sum,b=a.sum||c,g={a:a.a,b:a.b,c:a.c};for(n=0;n<h.length;n++)if(!g[l=h[n]]){for(u=g[s[l][0]],p=g[s[l][1]],o=new Array(u.length),r=0;r<u.length;r++)o[r]=b-u[r]-p[r];g[l]=o}var d,m,x,y,k,f,S=a._length,M=new Array(S);for(n=0;n<S;n++)d=g.a[n],m=g.b[n],x=g.c[n],T(d)&&T(m)&&T(x)?((y=c/((d=+d)+(m=+m)+(x=+x)))!=1&&(d*=y,m*=y,x*=y),f=d,k=x-m,M[n]={x:k,y:f,a:d,b:m,c:x}):M[n]={x:!1,y:!1};return v(a,S),w(t,a),i(M,a),_(M,a),M}},46008:function(N,L,e){var T=e(71828),w=e(47581),i=e(34098),_=e(49508),v=e(11058),h=e(94039),s=e(82410),t=e(28908),a=e(50413);N.exports=function(n,r,l,o){function u(m,x){return T.coerce(n,r,a,m,x)}var p,c=u("a"),b=u("b"),g=u("c");if(c?(p=c.length,b?(p=Math.min(p,b.length),g&&(p=Math.min(p,g.length))):p=g?Math.min(p,g.length):0):b&&g&&(p=Math.min(b.length,g.length)),p){r._length=p,u("sum"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),u("mode",p<w.PTS_LINESONLY?"lines+markers":"lines"),i.hasMarkers(r)&&_(n,r,l,o,u,{gradient:!0}),i.hasLines(r)&&(v(n,r,l,o,u,{backoff:!0}),h(n,r,u),u("connectgaps")),i.hasText(r)&&(u("texttemplate"),s(n,r,o,u));var d=[];(i.hasMarkers(r)||i.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),d.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,l,u),i.hasLines(r)||h(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||d.push("fills"),u("hoveron",d.join("+")||"points"),T.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},4524:function(N){N.exports=function(L,e,T,w,i){if(e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),w[i]){var _=w[i];L.a=_.a,L.b=_.b,L.c=_.c}else L.a=e.a,L.b=e.b,L.c=e.c;return L}},93645:function(N,L,e){var T=e(89298);N.exports=function(w,i,_){var v={},h=_[i.subplot]._subplot;return v.aLabel=T.tickText(h.aaxis,w.a,!0).text,v.bLabel=T.tickText(h.baxis,w.b,!0).text,v.cLabel=T.tickText(h.caxis,w.c,!0).text,v}},47250:function(N,L,e){var T=e(33720);N.exports=function(w,i,_,v){var h=T(w,i,_,v);if(h&&h[0].index!==!1){var s=h[0];if(s.index===void 0){var t=1-s.y0/w.ya._length,a=w.xa._length,n=a*t/2,r=a-n;return s.x0=Math.max(Math.min(s.x0,r),n),s.x1=Math.max(Math.min(s.x1,r),n),h}var l=s.cd[s.index],o=s.trace,u=s.subplot;s.a=l.a,s.b=l.b,s.c=l.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var p={};p[o.subplot]={_subplot:u};var c=o._module.formatLabels(l,o,p);s.aLabel=c.aLabel,s.bLabel=c.bLabel,s.cLabel=c.cLabel;var b=l.hi||o.hoverinfo,g=[];if(!o.hovertemplate){var d=b.split("+");d.indexOf("all")!==-1&&(d=["a","b","c"]),d.indexOf("a")!==-1&&m(u.aaxis,s.aLabel),d.indexOf("b")!==-1&&m(u.baxis,s.bLabel),d.indexOf("c")!==-1&&m(u.caxis,s.cLabel)}return s.extraText=g.join("<br>"),s.hovertemplate=o.hovertemplate,h}function m(x,y){g.push(x._hovertitle+": "+y)}}},52979:function(N,L,e){N.exports={attributes:e(50413),supplyDefaults:e(46008),colorbar:e(4898),formatLabels:e(93645),calc:e(54337),plot:e(7507),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(47250),selectPoints:e(98002),eventData:e(4524),moduleType:"trace",name:"scatterternary",basePlotModule:e(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(N,L,e){var T=e(32663);N.exports=function(w,i,_){var v=i.plotContainer;v.select(".scatterlayer").selectAll("*").remove();for(var h=i.xaxis,s=i.yaxis,t={xaxis:h,yaxis:s,plot:v,layerClipId:i._hasClipOnAxisFalse?i.clipIdRelative:null},a=i.layers.frontplot.select("g.scatterlayer"),n=0;n<_.length;n++){var r=_[n];r.length&&(r[0].trace._xA=h,r[0].trace._yA=s)}T(w,t,_,a)}},46880:function(N,L,e){var T=e(82196),w=e(50693),i=e(12663).axisHoverFormat,_=e(5386).fF,v=e(42341),h=e(85555).idRegex,s=e(44467).templatedArray,t=e(1426).extendFlat,a=T.marker,n=a.line,r=t(w("marker.line",{editTypeOverride:"calc"}),{width:t({},n.width,{editType:"calc"}),editType:"calc"}),l=t(w("marker"),{symbol:a.symbol,angle:a.angle,size:t({},a.size,{editType:"markerSize"}),sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:r,editType:"calc"});function o(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:h[u],editType:"plot"}}}l.color.editType=l.cmin.editType=l.cmax.editType="style",N.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},v.text,{}),hovertext:t({},v.hovertext,{}),hovertemplate:_(),xhoverformat:i("x"),yhoverformat:i("y"),marker:l,xaxes:o("x"),yaxes:o("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:v.selected.marker,editType:"calc"},unselected:{marker:v.unselected.marker,editType:"calc"},opacity:v.opacity}},65017:function(N,L,e){var T=e(73972),w=e(83312);N.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(46880),supplyDefaults:e(25784),colorbar:e(4898),calc:e(87625),plot:e(79410),hoverPoints:e(8567).hoverPoints,selectPoints:e(8689),editStyle:e(28801),meta:{}},T.register(w)},16947:function(N,L,e){var T=e(46075),w=e(73972),i=e(79749),_=e(27659).a0,v=e(93612),h=e(41675).getFromId,s=e(89298).shouldShowZeroLine,t="splom",a={};function n(l,o,u){for(var p=u.matrixOptions.data.length,c=o._visibleDims,b=u.viewOpts.ranges=new Array(p),g=0;g<c.length;g++){var d=c[g],m=b[g]=new Array(4),x=h(l,o._diag[d][0]);x&&(m[0]=x.r2l(x.range[0]),m[2]=x.r2l(x.range[1]));var y=h(l,o._diag[d][1]);y&&(m[1]=y.r2l(y.range[0]),m[3]=y.r2l(y.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:b},{ranges:b}):u.matrix.update({ranges:b})}function r(l){var o=l._fullLayout,u=o._glcanvas.data()[0].regl,p=o._splomGrid;p||(p=o._splomGrid=T(u)),p.update(function(c){var b,g=c._context.plotGlPixelRatio,d=c._fullLayout,m=d._size,x=[0,0,d.width*g,d.height*g],y={};function k(H,te,$,J,X,K){$*=g,J*=g,X*=g,K*=g;var ee=te[H+"color"],ie=te[H+"width"],ae=String(ee+ie);ae in y?y[ae].data.push(NaN,NaN,$,J,X,K):y[ae]={data:[$,J,X,K],join:"rect",thickness:ie*g,color:ee,viewport:x,range:x,overlay:!1}}for(b in d._splomSubplots){var f,S,M=d._plots[b],E=M.xaxis,O=M.yaxis,P=E._gridVals,I=O._gridVals,z=E._offset,U=E._length,R=O._length,j=m.b+O.domain[0]*m.h,Z=-O._m,F=-Z*O.r2l(O.range[0],O.calendar);if(E.showgrid)for(b=0;b<P.length;b++)f=z+E.l2p(P[b].x),k("grid",E,f,j,f,j+R);if(O.showgrid)for(b=0;b<I.length;b++)k("grid",O,z,S=j+F+Z*I[b].x,z+U,S);s(c,E,O)&&(f=z+E.l2p(0),k("zeroline",E,f,j,f,j+R)),s(c,O,E)&&k("zeroline",O,z,S=j+F+0,z+U,S)}var V=[];for(b in y)V.push(y[b]);return V}(l))}N.exports={name:t,attr:v.attr,attrRegex:v.attrRegex,layoutAttributes:v.layoutAttributes,supplyLayoutDefaults:v.supplyLayoutDefaults,drawFramework:v.drawFramework,plot:function(l){var o=l._fullLayout,u=w.getModule(t),p=_(l.calcdata,u)[0];i(l,["ANGLE_instanced_arrays","OES_element_index_uint"],a)&&(o._hasOnlyLargeSploms&&r(l),u.plot(l,{},p))},drag:function(l){var o=l.calcdata,u=l._fullLayout;u._hasOnlyLargeSploms&&r(l);for(var p=0;p<o.length;p++){var c=o[p][0].trace,b=u._splomScenes[c.uid];c.type==="splom"&&b&&b.matrix&&n(l,c,b)}},updateGrid:r,clean:function(l,o,u,p){var c,b={};if(p._splomScenes){for(c=0;c<l.length;c++){var g=l[c];g.type==="splom"&&(b[g.uid]=1)}for(c=0;c<u.length;c++){var d=u[c];if(!b[d.uid]){var m=p._splomScenes[d.uid];m&&m.destroy&&m.destroy(),p._splomScenes[d.uid]=null,delete p._splomScenes[d.uid]}}}Object.keys(p._splomScenes||{}).length===0&&delete p._splomScenes,p._splomGrid&&!o._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),v.clean(l,o,u,p)},updateFx:v.updateFx,toSVG:v.toSVG,reglPrecompiled:a}},87625:function(N,L,e){var T=e(71828),w=e(41675),i=e(47761).calcMarkerSize,_=e(47761).calcAxisExpansion,v=e(36922),h=e(19635).markerSelection,s=e(19635).markerStyle,t=e(10164),a=e(50606).BADNUM,n=e(78232).TOO_MANY_POINTS;N.exports=function(r,l){var o,u,p,c,b,g,d=l.dimensions,m=l._length,x={},y=x.cdata=[],k=x.data=[],f=l._visibleDims=[];function S(E,O){for(var P=E.makeCalcdata({v:O.values,vcalendar:l.calendar},"v"),I=0;I<P.length;I++)P[I]=P[I]===a?NaN:P[I];y.push(P),k.push(E.type==="log"?T.simpleMap(P,E.c2l):P)}for(o=0;o<d.length;o++)if((p=d[o]).visible){if(c=w.getFromId(r,l._diag[o][0]),b=w.getFromId(r,l._diag[o][1]),c&&b&&c.type!==b.type){T.log("Skipping splom dimension "+o+" with conflicting axis types");continue}c?(S(c,p),b&&b.type==="category"&&(b._categories=c._categories.slice())):S(b,p),f.push(o)}for(v(r,l),T.extendFlat(x,s(r,l)),g=y.length*m>n?x.sizeAvg||Math.max(x.size,3):i(l,m),u=0;u<f.length;u++)p=d[o=f[u]],c=w.getFromId(r,l._diag[o][0])||{},b=w.getFromId(r,l._diag[o][1])||{},_(r,l,c,b,y[u],y[u],g);var M=t(r,l);return M.matrix||(M.matrix=!0),M.matrixOptions=x,M.selectedOptions=h(r,l,l.selected),M.unselectedOptions=h(r,l,l.unselected),[{x:!1,y:!1,t:{},trace:l}]}},25784:function(N,L,e){var T=e(71828),w=e(85501),i=e(46880),_=e(34098),v=e(49508),h=e(94397),s=e(68645).isOpenSymbol;function t(a,n){function r(o,u){return T.coerce(a,n,i.dimensions,o,u)}r("label");var l=r("values");l&&l.length?r("visible"):n.visible=!1,r("axis.type"),r("axis.matches")}N.exports=function(a,n,r,l){function o(m,x){return T.coerce(a,n,i,m,x)}var u=w(a,n,{name:"dimensions",handleItemDefaults:t}),p=o("diagonal.visible"),c=o("showupperhalf"),b=o("showlowerhalf");if(h(n,u,"values")&&(p||c||b)){o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),v(a,n,r,l,o,{noAngleRef:!0,noStandOff:!0});var g=s(n.marker.symbol),d=_.isBubble(n);o("marker.line.width",g||d?1:0),function(m,x,y,k){var f,S,M=x.dimensions,E=M.length,O=x.showupperhalf,P=x.showlowerhalf,I=x.diagonal.visible,z=new Array(E),U=new Array(E);for(f=0;f<E;f++){var R=f?f+1:"";z[f]="x"+R,U[f]="y"+R}var j=k("xaxes",z),Z=k("yaxes",U),F=x._diag=new Array(E);x._xaxes={},x._yaxes={};var V=[],H=[];function te(fe,ge,ve,xe){if(fe){var _e=fe.charAt(0),ye=y._splomAxes[_e];if(x["_"+_e+"axes"][fe]=1,xe.push(fe),!(fe in ye)){var Ce=ye[fe]={};ve&&(Ce.label=ve.label||"",ve.visible&&ve.axis&&(ve.axis.type&&(Ce.type=ve.axis.type),ve.axis.matches&&(Ce.matches=ge)))}}}var $=!I&&!P,J=!I&&!O;for(x._axesDim={},f=0;f<E;f++){var X=M[f],K=f===0,ee=f===E-1,ie=K&&$||ee&&J?void 0:j[f],ae=K&&J||ee&&$?void 0:Z[f];te(ie,ae,X,V),te(ae,ie,X,H),F[f]=[ie,ae],x._axesDim[ie]=f,x._axesDim[ae]=f}for(f=0;f<V.length;f++)for(S=0;S<H.length;S++){var oe=V[f]+H[S];f>S&&O||f<S&&P?y._splomSubplots[oe]=1:f!==S||!I&&P&&O||(y._splomSubplots[oe]=1)}(!P||!I&&O&&P)&&(y._splomGridDflt.xside="bottom",y._splomGridDflt.yside="left")}(0,n,l,o),T.coerceSelectionMarkerOpacity(n,o)}else n.visible=!1}},28801:function(N,L,e){var T=e(71828),w=e(36922),i=e(19635).markerStyle;N.exports=function(_,v){var h=v.trace,s=_._fullLayout._splomScenes[h.uid];if(s){w(_,h),T.extendFlat(s.matrixOptions,i(_,h));var t=T.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},35948:function(N,L){L.getDimIndex=function(e,T){for(var w=T._id,i={x:0,y:1}[w.charAt(0)],_=e._visibleDims,v=0;v<_.length;v++){var h=_[v];if(e._diag[h][i]===w)return v}return!1}},8567:function(N,L,e){var T=e(35948),w=e(20794).calcHover;N.exports={hoverPoints:function(i,_,v){var h=i.cd[0].trace,s=i.scene.matrixOptions.cdata,t=i.xa,a=i.ya,n=t.c2p(_),r=a.c2p(v),l=i.distance,o=T.getDimIndex(h,t),u=T.getDimIndex(h,a);if(o===!1||u===!1)return[i];for(var p,c,b=s[o],g=s[u],d=l,m=0;m<b.length;m++){var x=b[m],y=g[m],k=t.c2p(x)-n,f=a.c2p(y)-r,S=Math.sqrt(k*k+f*f);S<d&&(d=c=S,p=m)}return i.index=p,i.distance=d,i.dxy=c,p===void 0?[i]:[w(i,b,g,h)]}}},6419:function(N,L,e){var T=e(65017);T.basePlotModule=e(16947),N.exports=T},79410:function(N,L,e){var T=e(60487),w=e(71828),i=e(41675),_=e(64505).selectMode;function v(h,s){var t,a,n,r,l,o=h._fullLayout,u=o._size,p=s.trace,c=s.t,b=o._splomScenes[p.uid],g=b.matrixOptions,d=g.cdata,m=o._glcanvas.data()[0].regl,x=o.dragmode;if(d.length!==0){g.lower=p.showupperhalf,g.upper=p.showlowerhalf,g.diagonal=p.diagonal.visible;var y=p._visibleDims,k=d.length,f=b.viewOpts={};for(f.ranges=new Array(k),f.domains=new Array(k),l=0;l<y.length;l++){n=y[l];var S=f.ranges[l]=new Array(4),M=f.domains[l]=new Array(4);(t=i.getFromId(h,p._diag[n][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],M[0]=t.domain[0],M[2]=t.domain[1]),(a=i.getFromId(h,p._diag[n][1]))&&(S[1]=a._rl[0],S[3]=a._rl[1],M[1]=a.domain[0],M[3]=a.domain[1])}var E=h._context.plotGlPixelRatio,O=u.l*E,P=u.b*E,I=u.w*E,z=u.h*E;f.viewport=[O,P,I+O,z+P],b.matrix===!0&&(b.matrix=T(m));var U=o.clickmode.indexOf("select")>-1,R=!0;if(_(x)||p.selectedpoints||U){var j=p._length;if(p.selectedpoints){b.selectBatch=p.selectedpoints;var Z=p.selectedpoints,F={};for(n=0;n<Z.length;n++)F[Z[n]]=!0;var V=[];for(n=0;n<j;n++)F[n]||V.push(n);b.unselectBatch=V}var H=c.xpx=new Array(k),te=c.ypx=new Array(k);for(l=0;l<y.length;l++){if(n=y[l],t=i.getFromId(h,p._diag[n][0]))for(H[l]=new Array(j),r=0;r<j;r++)H[l][r]=t.c2p(d[l][r]);if(a=i.getFromId(h,p._diag[n][1]))for(te[l]=new Array(j),r=0;r<j;r++)te[l][r]=a.c2p(d[l][r])}if(b.selectBatch.length||b.unselectBatch.length){var $=w.extendFlat({},g,b.unselectedOptions,f),J=w.extendFlat({},g,b.selectedOptions,f);b.matrix.update($,J),R=!1}}else c.xpx=c.ypx=null;if(R){var X=w.extendFlat({},g,f);b.matrix.update(X,null)}}}N.exports=function(h,s,t){if(t.length)for(var a=0;a<t.length;a++)v(h,t[a][0])}},10164:function(N,L,e){var T=e(71828);N.exports=function(w,i){var _=w._fullLayout,v=i.uid,h=_._splomScenes;h||(h=_._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=h[i.uid];return t||((t=h[v]=T.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||T.extendFlat(t,s),t}},8689:function(N,L,e){var T=e(71828),w=T.pushUnique,i=e(34098),_=e(35948);N.exports=function(v,h){var s=v.cd,t=s[0].trace,a=s[0].t,n=v.scene,r=n.matrixOptions.cdata,l=v.xaxis,o=v.yaxis,u=[];if(!n)return u;var p=!i.hasMarkers(t)&&!i.hasText(t);if(t.visible!==!0||p)return u;var c=_.getDimIndex(t,l),b=_.getDimIndex(t,o);if(c===!1||b===!1)return u;var g=a.xpx[c],d=a.ypx[b],m=r[c],x=r[b],y=(v.scene.selectBatch||[]).slice(),k=[];if(h!==!1&&!h.degenerate)for(var f=0;f<m.length;f++)h.contains([g[f],d[f]],null,f,v)?(u.push({pointNumber:f,x:m[f],y:x[f]}),w(y,f)):y.indexOf(f)!==-1?w(y,f):k.push(f);var S=n.matrixOptions;return y.length||k.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,T.extendFlat({},S,n.selectedOptions,n.viewOpts)):n.matrix.update(S,null),n.selectBatch=y,n.unselectBatch=k,u}},21850:function(N,L,e){var T=e(50693),w=e(12663).axisHoverFormat,i=e(5386).fF,_=e(2418),v=e(9012),h=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:w("u",1),vhoverformat:w("v",1),whoverformat:w("w",1),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),showlegend:h({},v.showlegend,{dflt:!1})};h(s,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=_[t]}),s.hoverinfo=h({},v.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,N.exports=s},88489:function(N,L,e){var T=e(71828),w=e(78803);function i(h){var s,t,a,n,r,l,o,u,p,c,b,g,d=h._x,m=h._y,x=h._z,y=h._len,k=-1/0,f=1/0,S=-1/0,M=1/0,E=-1/0,O=1/0,P="";for(y&&(o=d[0],p=m[0],b=x[0]),y>1&&(u=d[y-1],c=m[y-1],g=x[y-1]),s=0;s<y;s++)k=Math.max(k,d[s]),f=Math.min(f,d[s]),S=Math.max(S,m[s]),M=Math.min(M,m[s]),E=Math.max(E,x[s]),O=Math.min(O,x[s]),n||d[s]===o||(n=!0,P+="x"),r||m[s]===p||(r=!0,P+="y"),l||x[s]===b||(l=!0,P+="z");n||(P+="x"),r||(P+="y"),l||(P+="z");var I=_(h._x),z=_(h._y),U=_(h._z);P=(P=(P=P.replace("x",(o>u?"-":"+")+"x")).replace("y",(p>c?"-":"+")+"y")).replace("z",(b>g?"-":"+")+"z");var R=function(){y=0,I=[],z=[],U=[]};(!y||y<I.length*z.length*U.length)&&R();var j=function(_e){return _e==="x"?d:_e==="y"?m:x},Z=function(_e){return _e==="x"?I:_e==="y"?z:U},F=function(_e){return _e[y-1]<_e[0]?-1:1},V=j(P[1]),H=j(P[3]),te=j(P[5]),$=Z(P[1]).length,J=Z(P[3]).length,X=Z(P[5]).length,K=!1,ee=function(_e,ye,Ce){return $*(J*_e+ye)+Ce},ie=F(j(P[1])),ae=F(j(P[3])),oe=F(j(P[5]));for(s=0;s<X-1;s++){for(t=0;t<J-1;t++){for(a=0;a<$-1;a++){var fe=ee(s,t,a),ge=ee(s,t,a+1),ve=ee(s,t+1,a),xe=ee(s+1,t,a);if(V[fe]*ie<V[ge]*ie&&H[fe]*ae<H[ve]*ae&&te[fe]*oe<te[xe]*oe||(K=!0),K)break}if(K)break}if(K)break}return K&&(T.warn("Encountered arbitrary coordinates! Unable to input data grid."),R()),{xMin:f,yMin:M,zMin:O,xMax:k,yMax:S,zMax:E,Xs:I,Ys:z,Zs:U,len:y,fill:P}}function _(h){return T.distinctVals(h).vals}function v(h,s){if(s===void 0&&(s=h.length),T.isTypedArray(h))return h.subarray(0,s);for(var t=[],a=0;a<s;a++)t[a]=+h[a];return t}N.exports={calc:function(h,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=v(s.u,s._len),s._v=v(s.v,s._len),s._w=v(s.w,s._len),s._x=v(s.x,s._len),s._y=v(s.y,s._len),s._z=v(s.z,s._len);var t=i(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var a,n,r,l=0;s.starts&&(a=v(s.starts.x||[]),n=v(s.starts.y||[]),r=v(s.starts.z||[]),l=Math.min(a.length,n.length,r.length)),s._startsX=a||[],s._startsY=n||[],s._startsZ=r||[];var o,u=0,p=1/0;for(o=0;o<s._len;o++){var c=s._u[o],b=s._v[o],g=s._w[o],d=Math.sqrt(c*c+b*b+g*g);u=Math.max(u,d),p=Math.min(p,d)}for(w(h,s,{vals:[p,u],containerStr:"",cLetter:"c"}),o=0;o<l;o++){var m=a[o];t.xMax=Math.max(t.xMax,m),t.xMin=Math.min(t.xMin,m);var x=n[o];t.yMax=Math.max(t.yMax,x),t.yMin=Math.min(t.yMin,x);var y=r[o];t.zMax=Math.max(t.zMax,y),t.zMin=Math.min(t.zMin,y)}s._slen=l,s._normMax=u,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:v,processGrid:i}},90154:function(N,L,e){var T=e(9330).gl_streamtube3d,w=T.createTubeMesh,i=e(71828),_=e(81697).parseColorScale,v=e(21081).extractOpts,h=e(90060),s={xaxis:0,yaxis:1,zaxis:2};function t(o,u){this.scene=o,this.uid=u,this.mesh=null,this.data=null}var a=t.prototype;function n(o){var u=o.length;return u>2?o.slice(1,u-1):u===2?[(o[0]+o[1])/2]:o}function r(o){var u=o.length;return u===1?[.5,.5]:[o[1]-o[0],o[u-1]-o[u-2]]}function l(o,u){var p=o.fullSceneLayout,c=o.dataScale,b=u._len,g={};function d($,J){var X=p[J],K=c[s[J]];return i.simpleMap($,function(ee){return X.d2l(ee)*K})}if(g.vectors=h(d(u._u,"xaxis"),d(u._v,"yaxis"),d(u._w,"zaxis"),b),!b)return{positions:[],cells:[]};var m=d(u._Xs,"xaxis"),x=d(u._Ys,"yaxis"),y=d(u._Zs,"zaxis");if(g.meshgrid=[m,x,y],g.gridFill=u._gridFill,u._slen)g.startingPositions=h(d(u._startsX,"xaxis"),d(u._startsY,"yaxis"),d(u._startsZ,"zaxis"));else{for(var k=x[0],f=n(m),S=n(y),M=new Array(f.length*S.length),E=0,O=0;O<f.length;O++)for(var P=0;P<S.length;P++)M[E++]=[f[O],k,S[P]];g.startingPositions=M}g.colormap=_(u),g.tubeSize=u.sizeref,g.maxLength=u.maxdisplayed;var I=d(u._xbnds,"xaxis"),z=d(u._ybnds,"yaxis"),U=d(u._zbnds,"zaxis"),R=r(m),j=r(x),Z=r(y),F=[[I[0]-R[0],z[0]-j[0],U[0]-Z[0]],[I[1]+R[1],z[1]+j[1],U[1]+Z[1]]],V=T(g,F),H=v(u);V.vertexIntensityBounds=[H.min/u._normMax,H.max/u._normMax];var te=u.lightposition;return V.lightPosition=[te.x,te.y,te.z],V.ambient=u.lighting.ambient,V.diffuse=u.lighting.diffuse,V.specular=u.lighting.specular,V.roughness=u.lighting.roughness,V.fresnel=u.lighting.fresnel,V.opacity=u.opacity,u._pad=V.tubeScale*u.sizeref*2,V}a.handlePick=function(o){var u=this.scene.fullSceneLayout,p=this.scene.dataScale;function c(d,m){var x=u[m],y=p[s[m]];return x.l2c(d)/y}if(o.object===this.mesh){var b=o.data.position,g=o.data.velocity;return o.traceCoordinate=[c(b[0],"xaxis"),c(b[1],"yaxis"),c(b[2],"zaxis"),c(g[0],"xaxis"),c(g[1],"yaxis"),c(g[2],"zaxis"),o.data.intensity*this.data._normMax,o.data.divergence],o.textLabel=this.data.hovertext||this.data.text,!0}},a.update=function(o){this.data=o;var u=l(this.scene,o);this.mesh.update(u)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},N.exports=function(o,u){var p=o.glplot.gl,c=l(o,u),b=w(p,c),g=new t(o,u.uid);return g.mesh=b,g.data=u,b._trace=g,o.glplot.add(b),g}},22459:function(N,L,e){var T=e(71828),w=e(1586),i=e(21850);N.exports=function(_,v,h,s){function t(p,c){return T.coerce(_,v,i,p,c)}var a=t("u"),n=t("v"),r=t("w"),l=t("x"),o=t("y"),u=t("z");a&&a.length&&n&&n.length&&r&&r.length&&l&&l.length&&o&&o.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),w(_,v,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),v._length=null):v.visible=!1}},61510:function(N,L,e){N.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(21850),supplyDefaults:e(22459),colorbar:{min:"cmin",max:"cmax"},calc:e(88489).calc,plot:e(90154),eventData:function(T,w){return T.tubex=T.x,T.tubey=T.y,T.tubez=T.z,T.tubeu=w.traceCoordinate[3],T.tubev=w.traceCoordinate[4],T.tubew=w.traceCoordinate[5],T.norm=w.traceCoordinate[6],T.divergence=w.traceCoordinate[7],delete T.x,delete T.y,delete T.z,T},meta:{}}},57564:function(N,L,e){var T=e(9012),w=e(5386).fF,i=e(5386).si,_=e(50693),v=e(27670).Y,h=e(34e3),s=e(7055),t=e(1426).extendFlat,a=e(79952).u;N.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},h.marker.line.color,{dflt:null}),width:t({},h.marker.line.width,{dflt:1}),editType:"calc"},pattern:a,editType:"calc"},_("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:h.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:i({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:h.hovertext,hoverinfo:t({},T.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:w({},{keys:s.eventDataKeys}),textfont:h.textfont,insidetextorientation:h.insidetextorientation,insidetextfont:h.insidetextfont,outsidetextfont:t({},h.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:h.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:v({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(N,L,e){var T=e(74875);L.name="sunburst",L.plot=function(w,i,_,v){T.plotBasePlot(L.name,w,i,_,v)},L.clean=function(w,i,_,v){T.cleanBasePlot(L.name,w,i,_,v)}},52147:function(N,L,e){var T=e(674),w=e(92770),i=e(71828),_=e(21081).makeColorScaleFuncFromTrace,v=e(32354).makePullColorFn,h=e(32354).generateExtendedColors,s=e(21081).calc,t=e(50606).ALMOST_EQUAL,a={},n={},r={};function l(o,u,p){var c=0,b=o.children;if(b){for(var g=b.length,d=0;d<g;d++)c+=l(b[d],u,p);p.branches&&c++}else p.leaves&&c++;return o.value=o.data.data.value=c,u._values||(u._values=[]),u._values[o.data.data.i]=c,c}L.calc=function(o,u){var p,c,b,g,d,m,x=o._fullLayout,y=u.ids,k=i.isArrayOrTypedArray(y),f=u.labels,S=u.parents,M=u.values,E=i.isArrayOrTypedArray(M),O=[],P={},I={},z=function(oe){return oe||typeof oe=="number"},U=function(oe){return!E||w(M[oe])&&M[oe]>=0};k?(p=Math.min(y.length,S.length),c=function(oe){return z(y[oe])&&U(oe)},b=function(oe){return String(y[oe])}):(p=Math.min(f.length,S.length),c=function(oe){return z(f[oe])&&U(oe)},b=function(oe){return String(f[oe])}),E&&(p=Math.min(p,M.length));for(var R=0;R<p;R++)if(c(R)){var j=b(R),Z=z(S[R])?String(S[R]):"",F={i:R,id:j,pid:Z,label:z(f[R])?String(f[R]):""};E&&(F.v=+M[R]),O.push(F),d=j,P[g=Z]?P[g].push(d):P[g]=[d],I[d]=1}if(P[""]){if(P[""].length>1){for(var V=i.randstr(),H=0;H<O.length;H++)O[H].pid===""&&(O[H].pid=V);O.unshift({hasMultipleRoots:!0,id:V,pid:"",label:""})}}else{var te,$=[];for(te in P)I[te]||$.push(te);if($.length!==1)return i.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",$.join(", ")].join(" "));te=$[0],O.unshift({hasImpliedRoot:!0,id:te,pid:"",label:te})}try{m=T.stratify().id(function(oe){return oe.id}).parentId(function(oe){return oe.pid})(O)}catch(oe){return i.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",oe.message].join(" "))}var J=T.hierarchy(m),X=!1;if(E)switch(u.branchvalues){case"remainder":J.sum(function(oe){return oe.data.v});break;case"total":J.each(function(oe){var fe=oe.data.data,ge=fe.v;if(oe.children){var ve=oe.children.reduce(function(xe,_e){return xe+_e.data.data.v},0);if((fe.hasImpliedRoot||fe.hasMultipleRoots)&&(ge=ve),ge<ve*t)return X=!0,i.warn(["Total value for node",oe.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,ge,`
children sum =`,ve].join(" "))}oe.value=ge})}else l(J,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!X){var K,ee;u.sort&&J.sort(function(oe,fe){return fe.value-oe.value});var ie=u.marker.colors||[],ae=!!ie.length;return u._hasColorscale?(ae||(ie=E?u.values:u._values),s(o,u,{vals:ie,containerStr:"marker",cLetter:"c"}),ee=_(u.marker)):K=v(x["_"+u.type+"colormap"]),J.each(function(oe){var fe=oe.data.data;fe.color=u._hasColorscale?ee(ie[fe.i]):K(ie[fe.i],fe.id)}),O[0].hierarchy=J,O}},L._runCrossTraceCalc=function(o,u){var p=u._fullLayout,c=u.calcdata,b=p[o+"colorway"],g=p["_"+o+"colormap"];p["extend"+o+"colors"]&&(b=h(b,o==="icicle"?r:o==="treemap"?n:a));var d,m=0;function x(f){var S=f.data.data,M=S.id;S.color===!1&&(g[M]?S.color=g[M]:f.parent?f.parent.parent?S.color=f.parent.data.data.color:(g[M]=S.color=b[m%b.length],m++):S.color=d)}for(var y=0;y<c.length;y++){var k=c[y][0];k.trace.type===o&&k.hierarchy&&(d=k.trace.root.color,k.hierarchy.each(x))}},L.crossTraceCalc=function(o){return L._runCrossTraceCalc("sunburst",o)}},7055:function(N){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(N,L,e){var T=e(71828),w=e(57564),i=e(27670).c,_=e(90769).handleText,v=e(37434).handleMarkerDefaults,h=e(21081),s=h.hasColorscale,t=h.handleDefaults;N.exports=function(a,n,r,l){function o(d,m){return T.coerce(a,n,w,d,m)}var u=o("labels"),p=o("parents");if(u&&u.length&&p&&p.length){var c=o("values");c&&c.length?o("branchvalues"):o("count"),o("level"),o("maxdepth"),v(a,n,l,o);var b=n._hasColorscale=s(a,"marker","colors")||(a.marker||{}).coloraxis;b&&t(a,n,l,o,{prefix:"marker.",cLetter:"c"}),o("leaf.opacity",b?1:.7);var g=o("text");o("texttemplate"),n.texttemplate||o("textinfo",T.isArrayOrTypedArray(g)?"text+label":"label"),o("hovertext"),o("hovertemplate"),_(a,n,l,o,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),o("insidetextorientation"),o("sort"),o("rotation"),o("root.color"),i(n,l,o),n._length=null}else n.visible=!1}},43467:function(N,L,e){var T=e(91424),w=e(7901);N.exports=function(i,_,v,h,s){var t=_.data.data,a=t.i,n=s||t.color;if(a>=0){_.i=t.i;var r=v.marker;r.pattern&&r.colors&&r.pattern.shape||(r.color=n,_.color=n),T.pointStyle(i,v,h,_)}else w.fill(i,n)}},83523:function(N,L,e){var T=e(39898),w=e(73972),i=e(23469).appendArrayPointValue,_=e(30211),v=e(71828),h=e(11086),s=e(2791),t=e(53581).formatPieValue;function a(n,r,l){for(var o=n.data.data,u={curveNumber:r.index,pointNumber:o.i,data:r._input,fullData:r},p=0;p<l.length;p++){var c=l[p];c in n&&(u[c]=n[c])}return"parentString"in n&&!s.isHierarchyRoot(n)&&(u.parent=n.parentString),i(u,r,o.i),u}N.exports=function(n,r,l,o,u){var p=o[0],c=p.trace,b=p.hierarchy,g=c.type==="sunburst",d=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),n.on("mouseover",function(m){var x=l._fullLayout;if(!l._dragging&&x.hovermode!==!1){var y,k=l._fullData[c.index],f=m.data.data,S=f.i,M=s.isHierarchyRoot(m),E=s.getParent(b,m),O=s.getValue(m),P=function(ie){return v.castOption(k,S,ie)},I=P("hovertemplate"),z=_.castHoverinfo(k,x,S),U=x.separators;if(I||z&&z!=="none"&&z!=="skip"){var R,j;g&&(R=p.cx+m.pxmid[0]*(1-m.rInscribed),j=p.cy+m.pxmid[1]*(1-m.rInscribed)),d&&(R=m._hoverX,j=m._hoverY);var Z,F={},V=[],H=[],te=function(ie){return V.indexOf(ie)!==-1};z&&(V=z==="all"?k._module.attributes.hoverinfo.flags:z.split("+")),F.label=f.label,te("label")&&F.label&&H.push(F.label),f.hasOwnProperty("v")&&(F.value=f.v,F.valueLabel=t(F.value,U),te("value")&&H.push(F.valueLabel)),F.currentPath=m.currentPath=s.getPath(m.data),te("current path")&&!M&&H.push(F.currentPath);var $=[],J=function(){$.indexOf(Z)===-1&&(H.push(Z),$.push(Z))};F.percentParent=m.percentParent=O/s.getValue(E),F.parent=m.parentString=s.getPtLabel(E),te("percent parent")&&(Z=s.formatPercent(F.percentParent,U)+" of "+F.parent,J()),F.percentEntry=m.percentEntry=O/s.getValue(r),F.entry=m.entry=s.getPtLabel(r),!te("percent entry")||M||m.onPathbar||(Z=s.formatPercent(F.percentEntry,U)+" of "+F.entry,J()),F.percentRoot=m.percentRoot=O/s.getValue(b),F.root=m.root=s.getPtLabel(b),te("percent root")&&!M&&(Z=s.formatPercent(F.percentRoot,U)+" of "+F.root,J()),F.text=P("hovertext")||P("text"),te("text")&&(Z=F.text,v.isValidTextValue(Z)&&H.push(Z)),y=[a(m,k,u.eventDataKeys)];var X={trace:k,y:j,_x0:m._x0,_x1:m._x1,_y0:m._y0,_y1:m._y1,text:H.join("<br>"),name:I||te("name")?k.name:void 0,color:P("hoverlabel.bgcolor")||f.color,borderColor:P("hoverlabel.bordercolor"),fontFamily:P("hoverlabel.font.family"),fontSize:P("hoverlabel.font.size"),fontColor:P("hoverlabel.font.color"),nameLength:P("hoverlabel.namelength"),textAlign:P("hoverlabel.align"),hovertemplate:I,hovertemplateLabels:F,eventData:y};g&&(X.x0=R-m.rInscribed*m.rpx1,X.x1=R+m.rInscribed*m.rpx1,X.idealAlign=m.pxmid[0]<0?"left":"right"),d&&(X.x=R,X.idealAlign=R<0?"left":"right");var K=[];_.loneHover(X,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:l,inOut_bbox:K}),y[0].bbox=K[0],c._hasHoverLabel=!0}if(d){var ee=n.select("path.surface");u.styleOne(ee,m,k,l,{hovered:!0})}c._hasHoverEvent=!0,l.emit("plotly_hover",{points:y||[a(m,k,u.eventDataKeys)],event:T.event})}}),n.on("mouseout",function(m){var x=l._fullLayout,y=l._fullData[c.index],k=T.select(this).datum();if(c._hasHoverEvent&&(m.originalEvent=T.event,l.emit("plotly_unhover",{points:[a(k,y,u.eventDataKeys)],event:T.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(_.loneUnhover(x._hoverlayer.node()),c._hasHoverLabel=!1),d){var f=n.select("path.surface");u.styleOne(f,k,y,l,{hovered:!1})}}),n.on("click",function(m){var x=l._fullLayout,y=l._fullData[c.index],k=g&&(s.isHierarchyRoot(m)||s.isLeaf(m)),f=s.getPtId(m),S=s.isEntry(m)?s.findEntryWithChild(b,f):s.findEntryWithLevel(b,f),M=s.getPtId(S),E={points:[a(m,y,u.eventDataKeys)],event:T.event};k||(E.nextLevel=M);var O=h.triggerHandler(l,"plotly_"+c.type+"click",E);if(O!==!1&&x.hovermode&&(l._hoverdata=[a(m,y,u.eventDataKeys)],_.click(l,T.event)),!k&&O!==!1&&!l._dragging&&!l._transitioning){w.call("_storeDirectGUIEdit",y,x._tracePreGUI[y.uid],{level:y.level});var P={data:[{level:M}],traces:[c.index]},I={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};_.loneUnhover(x._hoverlayer.node()),w.call("animate",l,P,I)}})}},2791:function(N,L,e){var T=e(71828),w=e(7901),i=e(6964),_=e(53581);function v(h){return h.data.data.pid}L.findEntryWithLevel=function(h,s){var t;return s&&h.eachAfter(function(a){if(L.getPtId(a)===s)return t=a.copy()}),t||h},L.findEntryWithChild=function(h,s){var t;return h.eachAfter(function(a){for(var n=a.children||[],r=0;r<n.length;r++){var l=n[r];if(L.getPtId(l)===s)return t=a.copy()}}),t||h},L.isEntry=function(h){return!h.parent},L.isLeaf=function(h){return!h.children},L.getPtId=function(h){return h.data.data.id},L.getPtLabel=function(h){return h.data.data.label},L.getValue=function(h){return h.value},L.isHierarchyRoot=function(h){return v(h)===""},L.setSliceCursor=function(h,s,t){var a=t.isTransitioning;if(!a){var n=h.datum();a=t.hideOnRoot&&L.isHierarchyRoot(n)||t.hideOnLeaves&&L.isLeaf(n)}i(h,a?null:"pointer")},L.getInsideTextFontKey=function(h,s,t,a,n){var r=(n||{}).onPathbar?"pathbar.textfont":"insidetextfont",l=t.data.data.i;return T.castOption(s,l,r+"."+h)||T.castOption(s,l,"textfont."+h)||a.size},L.getOutsideTextFontKey=function(h,s,t,a){var n=t.data.data.i;return T.castOption(s,n,"outsidetextfont."+h)||T.castOption(s,n,"textfont."+h)||a.size},L.isOutsideText=function(h,s){return!h._hasColorscale&&L.isHierarchyRoot(s)},L.determineTextFont=function(h,s,t,a){return L.isOutsideText(h,s)?function(n,r,l){return{color:L.getOutsideTextFontKey("color",n,r,l),family:L.getOutsideTextFontKey("family",n,r,l),size:L.getOutsideTextFontKey("size",n,r,l)}}(h,s,t):function(n,r,l,o){var u=(o||{}).onPathbar,p=r.data.data,c=p.i,b=T.castOption(n,c,(u?"pathbar.textfont":"insidetextfont")+".color");return!b&&n._input.textfont&&(b=T.castOption(n._input,c,"textfont.color")),{color:b||w.contrast(p.color),family:L.getInsideTextFontKey("family",n,r,l,o),size:L.getInsideTextFontKey("size",n,r,l,o)}}(h,s,t,a)},L.hasTransition=function(h){return!!(h&&h.duration>0)},L.getMaxDepth=function(h){return h.maxdepth>=0?h.maxdepth:1/0},L.isHeader=function(h,s){return!(L.isLeaf(h)||h.depth===s._maxDepth-1)},L.getParent=function(h,s){return L.findEntryWithLevel(h,v(s))},L.listPath=function(h,s){var t=h.parent;if(!t)return[];var a=s?[t.data[s]]:[t];return L.listPath(t,s).concat(a)},L.getPath=function(h){return L.listPath(h,"label").join("/")+"/"},L.formatValue=_.formatPieValue,L.formatPercent=function(h,s){var t=T.formatPercent(h,0);return t==="0%"&&(t=_.formatPiePercent(h,s)),t}},87619:function(N,L,e){N.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(66888),categories:[],animatable:!0,attributes:e(57564),layoutAttributes:e(2654),supplyDefaults:e(17094),supplyLayoutDefaults:e(57034),calc:e(52147).calc,crossTraceCalc:e(52147).crossTraceCalc,plot:e(24714).plot,style:e(29969).style,colorbar:e(4898),meta:{}}},2654:function(N){N.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(N,L,e){var T=e(71828),w=e(2654);N.exports=function(i,_){function v(h,s){return T.coerce(i,_,w,h,s)}v("sunburstcolorway",_.colorway),v("extendsunburstcolors")}},24714:function(N,L,e){var T=e(39898),w=e(674),i=e(81684).sX,_=e(91424),v=e(71828),h=e(63893),s=e(72597),t=s.recordMinTextSize,a=s.clearMinTextSize,n=e(14575),r=e(53581).getRotationAngle,l=n.computeTransform,o=n.transformInsideText,u=e(29969).styleOne,p=e(16688).resizeText,c=e(83523),b=e(7055),g=e(2791);function d(x,y,k,f){var S=x._context.staticPlot,M=x._fullLayout,E=!M.uniformtext.mode&&g.hasTransition(f),O=T.select(k).selectAll("g.slice"),P=y[0],I=P.trace,z=P.hierarchy,U=g.findEntryWithLevel(z,I.level),R=g.getMaxDepth(I),j=M._size,Z=I.domain,F=j.w*(Z.x[1]-Z.x[0]),V=j.h*(Z.y[1]-Z.y[0]),H=.5*Math.min(F,V),te=P.cx=j.l+j.w*(Z.x[1]+Z.x[0])/2,$=P.cy=j.t+j.h*(1-Z.y[0])-V/2;if(!U)return O.remove();var J=null,X={};E&&O.each(function(ue){X[g.getPtId(ue)]={rpx0:ue.rpx0,rpx1:ue.rpx1,x0:ue.x0,x1:ue.x1,transform:ue.transform},!J&&g.isEntry(ue)&&(J=ue)});var K=function(ue){return w.partition().size([2*Math.PI,ue.height+1])(ue)}(U).descendants(),ee=U.height+1,ie=0,ae=R;P.hasMultipleRoots&&g.isHierarchyRoot(U)&&(K=K.slice(1),ee-=1,ie=1,ae+=1),K=K.filter(function(ue){return ue.y1<=ae});var oe=r(I.rotation);oe&&K.forEach(function(ue){ue.x0+=oe,ue.x1+=oe});var fe=Math.min(ee,R),ge=function(ue){return(ue-ie)/fe*H},ve=function(ue,de){return[ue*Math.cos(de),-ue*Math.sin(de)]},xe=function(ue){return v.pathAnnulus(ue.rpx0,ue.rpx1,ue.x0,ue.x1,te,$)},_e=function(ue){return te+m(ue)[0]*(ue.transform.rCenter||0)+(ue.transform.x||0)},ye=function(ue){return $+m(ue)[1]*(ue.transform.rCenter||0)+(ue.transform.y||0)};(O=O.data(K,g.getPtId)).enter().append("g").classed("slice",!0),E?O.exit().transition().each(function(){var ue=T.select(this);ue.select("path.surface").transition().attrTween("d",function(de){var Le=function(we){var Ee,Oe=g.getPtId(we),Fe=X[Oe],pe=X[g.getPtId(U)];if(pe){var be=(we.x1>pe.x1?2*Math.PI:0)+oe;Ee=we.rpx1<pe.rpx1?{x0:we.x0,x1:we.x1,rpx0:0,rpx1:0}:{x0:be,x1:be,rpx0:we.rpx0,rpx1:we.rpx1}}else{var Me,De=g.getPtId(we.parent);O.each(function(et){if(g.getPtId(et)===De)return Me=et});var Ne,Be=Me.children;Be.forEach(function(et,ft){if(g.getPtId(et)===Oe)return Ne=ft});var Ye=Be.length,We=i(Me.x0,Me.x1);Ee={rpx0:H,rpx1:H,x0:We(Ne/Ye),x1:We((Ne+1)/Ye)}}return i(Fe,Ee)}(de);return function(we){return xe(Le(we))}}),ue.select("g.slicetext").attr("opacity",0)}).remove():O.exit().remove(),O.order();var Ce=null;if(E&&J){var ke=g.getPtId(J);O.each(function(ue){Ce===null&&g.getPtId(ue)===ke&&(Ce=ue.x1)})}var Te=O;function le(ue){var de=ue.parent,Le=X[g.getPtId(de)],we={};if(Le){var Ee=de.children,Oe=Ee.indexOf(ue),Fe=Ee.length,pe=i(Le.x0,Le.x1);we.x0=pe(Oe/Fe),we.x1=pe(Oe/Fe)}else we.x0=we.x1=0;return we}E&&(Te=Te.transition().each("end",function(){var ue=T.select(this);g.setSliceCursor(ue,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Te.each(function(ue){var de=T.select(this),Le=v.ensureSingle(de,"path","surface",function(be){be.style("pointer-events",S?"none":"all")});ue.rpx0=ge(ue.y0),ue.rpx1=ge(ue.y1),ue.xmid=(ue.x0+ue.x1)/2,ue.pxmid=ve(ue.rpx1,ue.xmid),ue.midangle=-(ue.xmid-Math.PI/2),ue.startangle=-(ue.x0-Math.PI/2),ue.stopangle=-(ue.x1-Math.PI/2),ue.halfangle=.5*Math.min(v.angleDelta(ue.x0,ue.x1)||Math.PI,Math.PI),ue.ring=1-ue.rpx0/ue.rpx1,ue.rInscribed=function(be){return be.rpx0===0&&v.isFullCircle([be.x0,be.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(be.halfangle)),be.ring/2))}(ue),E?Le.transition().attrTween("d",function(be){var Me=function(De){var Ne,Be=X[g.getPtId(De)],Ye={x0:De.x0,x1:De.x1,rpx0:De.rpx0,rpx1:De.rpx1};if(Be)Ne=Be;else if(J)if(De.parent)if(Ce){var We=(De.x1>Ce?2*Math.PI:0)+oe;Ne={x0:We,x1:We}}else Ne={rpx0:H,rpx1:H},v.extendFlat(Ne,le(De));else Ne={rpx0:0,rpx1:0};else Ne={x0:oe,x1:oe};return i(Ne,Ye)}(be);return function(De){return xe(Me(De))}}):Le.attr("d",xe),de.call(c,U,x,y,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(g.setSliceCursor,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:x._transitioning}),Le.call(u,ue,I,x);var we=v.ensureSingle(de,"g","slicetext"),Ee=v.ensureSingle(we,"text","",function(be){be.attr("data-notex",1)}),Oe=v.ensureUniformFontSize(x,g.determineTextFont(I,ue,M.font));Ee.text(L.formatSliceLabel(ue,U,I,y,M)).classed("slicetext",!0).attr("text-anchor","middle").call(_.font,Oe).call(h.convertToTspans,x);var Fe=_.bBox(Ee.node());ue.transform=o(Fe,ue,P),ue.transform.targetX=_e(ue),ue.transform.targetY=ye(ue);var pe=function(be,Me){var De=be.transform;return l(De,Me),De.fontSize=Oe.size,t(I.type,De,M),v.getTextTransform(De)};E?Ee.transition().attrTween("transform",function(be){var Me=function(De){var Ne,Be=X[g.getPtId(De)],Ye=De.transform;if(Be)Ne=Be;else if(Ne={rpx1:De.rpx1,transform:{textPosAngle:Ye.textPosAngle,scale:0,rotate:Ye.rotate,rCenter:Ye.rCenter,x:Ye.x,y:Ye.y}},J)if(De.parent)if(Ce){var We=De.x1>Ce?2*Math.PI:0;Ne.x0=Ne.x1=We}else v.extendFlat(Ne,le(De));else Ne.x0=Ne.x1=oe;else Ne.x0=Ne.x1=oe;var et=i(Ne.transform.textPosAngle,De.transform.textPosAngle),ft=i(Ne.rpx1,De.rpx1),ht=i(Ne.x0,De.x0),mt=i(Ne.x1,De.x1),Mt=i(Ne.transform.scale,Ye.scale),_t=i(Ne.transform.rotate,Ye.rotate),it=Ye.rCenter===0?3:Ne.transform.rCenter===0?1/3:1,st=i(Ne.transform.rCenter,Ye.rCenter);return function(St){var zt=ft(St),Ft=ht(St),Pt=mt(St),Xe=function(He){return st(Math.pow(He,it))}(St),Ke={pxmid:ve(zt,(Ft+Pt)/2),rpx1:zt,transform:{textPosAngle:et(St),rCenter:Xe,x:Ye.x,y:Ye.y}};return t(I.type,Ye,M),{transform:{targetX:_e(Ke),targetY:ye(Ke),scale:Mt(St),rotate:_t(St),rCenter:Xe}}}}(be);return function(De){return pe(Me(De),Fe)}}):Ee.attr("transform",pe(ue,Fe))})}function m(x){return y=x.rpx1,k=x.transform.textPosAngle,[y*Math.sin(k),-y*Math.cos(k)];var y,k}L.plot=function(x,y,k,f){var S,M,E=x._fullLayout,O=E._sunburstlayer,P=!k,I=!E.uniformtext.mode&&g.hasTransition(k);a("sunburst",E),(S=O.selectAll("g.trace.sunburst").data(y,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),I?(f&&(M=f()),T.transition().duration(k.duration).ease(k.easing).each("end",function(){M&&M()}).each("interrupt",function(){M&&M()}).each(function(){O.selectAll("g.trace").each(function(z){d(x,z,this,k)})})):(S.each(function(z){d(x,z,this,k)}),E.uniformtext.mode&&p(x,E._sunburstlayer.selectAll(".trace"),"sunburst")),P&&S.exit().remove()},L.formatSliceLabel=function(x,y,k,f,S){var M=k.texttemplate,E=k.textinfo;if(!(M||E&&E!=="none"))return"";var O=S.separators,P=f[0],I=x.data.data,z=P.hierarchy,U=g.isHierarchyRoot(x),R=g.getParent(z,x),j=g.getValue(x);if(!M){var Z,F=E.split("+"),V=function(ae){return F.indexOf(ae)!==-1},H=[];if(V("label")&&I.label&&H.push(I.label),I.hasOwnProperty("v")&&V("value")&&H.push(g.formatValue(I.v,O)),!U){V("current path")&&H.push(g.getPath(x.data));var te=0;V("percent parent")&&te++,V("percent entry")&&te++,V("percent root")&&te++;var $=te>1;if(te){var J,X=function(ae){Z=g.formatPercent(J,O),$&&(Z+=" of "+ae),H.push(Z)};V("percent parent")&&!U&&(J=j/g.getValue(R),X("parent")),V("percent entry")&&(J=j/g.getValue(y),X("entry")),V("percent root")&&(J=j/g.getValue(z),X("root"))}}return V("text")&&(Z=v.castOption(k,I.i,"text"),v.isValidTextValue(Z)&&H.push(Z)),H.join("<br>")}var K=v.castOption(k,I.i,"texttemplate");if(!K)return"";var ee={};I.label&&(ee.label=I.label),I.hasOwnProperty("v")&&(ee.value=I.v,ee.valueLabel=g.formatValue(I.v,O)),ee.currentPath=g.getPath(x.data),U||(ee.percentParent=j/g.getValue(R),ee.percentParentLabel=g.formatPercent(ee.percentParent,O),ee.parent=g.getPtLabel(R)),ee.percentEntry=j/g.getValue(y),ee.percentEntryLabel=g.formatPercent(ee.percentEntry,O),ee.entry=g.getPtLabel(y),ee.percentRoot=j/g.getValue(z),ee.percentRootLabel=g.formatPercent(ee.percentRoot,O),ee.root=g.getPtLabel(z),I.hasOwnProperty("color")&&(ee.color=I.color);var ie=v.castOption(k,I.i,"text");return(v.isValidTextValue(ie)||ie==="")&&(ee.text=ie),ee.customdata=v.castOption(k,I.i,"customdata"),v.texttemplateString(K,ee,S._d3locale,ee,k._meta||{})}},29969:function(N,L,e){var T=e(39898),w=e(7901),i=e(71828),_=e(72597).resizeText,v=e(43467);function h(s,t,a,n){var r=t.data.data,l=!t.children,o=r.i,u=i.castOption(a,o,"marker.line.color")||w.defaultLine,p=i.castOption(a,o,"marker.line.width")||0;s.call(v,t,a,n).style("stroke-width",p).call(w.stroke,u).style("opacity",l?a.leaf.opacity:null)}N.exports={style:function(s){var t=s._fullLayout._sunburstlayer.selectAll(".trace");_(s,t,"sunburst"),t.each(function(a){var n=T.select(this),r=a[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(l){T.select(this).call(h,l,r,s)})})},styleOne:h}},54532:function(N,L,e){var T=e(7901),w=e(50693),i=e(12663).axisHoverFormat,_=e(5386).fF,v=e(9012),h=e(1426).extendFlat,s=e(30962).overrideAll;function t(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:T.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:T.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var a=N.exports=s(h({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:_(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},w("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:h({},w.zauto,{}),zmin:h({},w.zmin,{}),zmax:h({},w.zmax,{})},hoverinfo:h({},v.hoverinfo),showlegend:h({},v.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType="calc+clearAxisTypes",a.transforms=void 0},18396:function(N,L,e){var T=e(78803);N.exports=function(w,i){i.surfacecolor?T(w,i,{vals:i.surfacecolor,containerStr:"",cLetter:"c"}):T(w,i,{vals:i.z,containerStr:"",cLetter:"c"})}},43768:function(N,L,e){var T=e(9330).gl_surface3d,w=e(9330).ndarray,i=e(9330).ndarray_linear_interpolate.d2,_=e(824),v=e(43907),h=e(71828).isArrayOrTypedArray,s=e(81697).parseColorScale,t=e(78614),a=e(21081).extractOpts;function n(k,f,S){this.scene=k,this.uid=S,this.surface=f,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var r=n.prototype;r.getXat=function(k,f,S,M){var E=h(this.data.x)?h(this.data.x[0])?this.data.x[f][k]:this.data.x[k]:k;return S===void 0?E:M.d2l(E,0,S)},r.getYat=function(k,f,S,M){var E=h(this.data.y)?h(this.data.y[0])?this.data.y[f][k]:this.data.y[f]:f;return S===void 0?E:M.d2l(E,0,S)},r.getZat=function(k,f,S,M){var E=this.data.z[f][k];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[f][k]),S===void 0?E:M.d2l(E,0,S)},r.handlePick=function(k){if(k.object===this.surface){var f=(k.data.index[0]-1)/this.dataScaleX-1,S=(k.data.index[1]-1)/this.dataScaleY-1,M=Math.max(Math.min(Math.round(f),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);k.index=[M,E],k.traceCoordinate=[this.getXat(M,E),this.getYat(M,E),this.getZat(M,E)],k.dataCoordinate=[this.getXat(M,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(M,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(M,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var O=0;O<3;O++)k.dataCoordinate[O]!=null&&(k.dataCoordinate[O]*=this.scene.dataScale[O]);var P=this.data.hovertext||this.data.text;return h(P)&&P[E]&&P[E][M]!==void 0?k.textLabel=P[E][M]:k.textLabel=P||"",k.data.dataCoordinate=k.dataCoordinate.slice(),this.surface.highlight(k.data),this.scene.glplot.spikes.position=k.dataCoordinate,!0}};var l=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function o(k,f){if(k<f)return 0;for(var S=0;Math.floor(k%f)===0;)k/=f,S++;return S}function u(k){for(var f=[],S=0;S<l.length;S++){var M=l[S];f.push(o(k,M))}return f}function p(k){for(var f=u(k),S=k,M=0;M<l.length;M++)if(f[M]>0){S=l[M];break}return S}function c(k,f){if(!(k<1||f<1)){for(var S=u(k),M=u(f),E=1,O=0;O<l.length;O++)E*=Math.pow(l[O],Math.max(S[O],M[O]));return E}}r.calcXnums=function(k){var f,S=[];for(f=1;f<k;f++){var M=this.getXat(f-1,0),E=this.getXat(f,0);S[f-1]=E!==M&&M!=null&&E!=null?Math.abs(E-M):0}var O=0;for(f=1;f<k;f++)O+=S[f-1];for(f=1;f<k;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(O/S[f-1]);return S},r.calcYnums=function(k){var f,S=[];for(f=1;f<k;f++){var M=this.getYat(0,f-1),E=this.getYat(0,f);S[f-1]=E!==M&&M!=null&&E!=null?Math.abs(E-M):0}var O=0;for(f=1;f<k;f++)O+=S[f-1];for(f=1;f<k;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(O/S[f-1]);return S};var b=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],g=b[9],d=b[13];function m(k,f,S){var M=S[8]+S[2]*f[0]+S[5]*f[1];return k[0]=(S[6]+S[0]*f[0]+S[3]*f[1])/M,k[1]=(S[7]+S[1]*f[0]+S[4]*f[1])/M,k}function x(k,f,S){return function(M,E,O,P){for(var I=[0,0],z=M.shape[0],U=M.shape[1],R=0;R<z;R++)for(var j=0;j<U;j++)O(I,[R,j],P),M.set(R,j,i(E,I[0],I[1]))}(k,f,m,S),k}function y(k,f){for(var S=!1,M=0;M<k.length;M++)if(f===k[M]){S=!0;break}S===!1&&k.push(f)}r.estimateScale=function(k,f){for(var S=1+function(E){if(E.length!==0){for(var O=1,P=0;P<E.length;P++)O=c(O,E[P]);return O}}(f===0?this.calcXnums(k):this.calcYnums(k));S<g;)S*=2;for(;S>d;)S--,S/=p(S),++S<g&&(S=d);var M=Math.round(S/k);return M>1?M:1},r.refineCoords=function(k){for(var f=this.dataScaleX,S=this.dataScaleY,M=k[0].shape[0],E=k[0].shape[1],O=0|Math.floor(k[0].shape[0]*f+1),P=0|Math.floor(k[0].shape[1]*S+1),I=1+M+1,z=1+E+1,U=w(new Float32Array(I*z),[I,z]),R=[1/f,0,0,0,1/S,0,0,0,1],j=0;j<k.length;++j){this.surface.padField(U,k[j]);var Z=w(new Float32Array(O*P),[O,P]);x(Z,U,R),k[j]=Z}},r.setContourLevels=function(){var k,f,S,M=[[],[],[]],E=[!1,!1,!1],O=!1;for(k=0;k<3;++k)if(this.showContour[k]&&(O=!0,this.contourSize[k]>0&&this.contourStart[k]!==null&&this.contourEnd[k]!==null&&this.contourEnd[k]>this.contourStart[k]))for(E[k]=!0,f=this.contourStart[k];f<this.contourEnd[k];f+=this.contourSize[k])S=f*this.scene.dataScale[k],y(M[k],S);if(O){var P=[[],[],[]];for(k=0;k<3;++k)this.showContour[k]&&(P[k]=E[k]?M[k]:this.scene.contourLevels[k]);this.surface.update({levels:P})}},r.update=function(k){var f,S,M,E,O=this.scene,P=O.fullSceneLayout,I=this.surface,z=s(k),U=O.dataScale,R=k.z[0].length,j=k._ylength,Z=O.contourLevels;this.data=k;var F=[];for(f=0;f<3;f++)for(F[f]=[],S=0;S<R;S++)F[f][S]=[];for(S=0;S<R;S++)for(M=0;M<j;M++)F[0][S][M]=this.getXat(S,M,k.xcalendar,P.xaxis),F[1][S][M]=this.getYat(S,M,k.ycalendar,P.yaxis),F[2][S][M]=this.getZat(S,M,k.zcalendar,P.zaxis);if(k.connectgaps)for(k._emptypoints=v(F[2]),_(F[2],k._emptypoints),k._interpolatedZ=[],S=0;S<R;S++)for(k._interpolatedZ[S]=[],M=0;M<j;M++)k._interpolatedZ[S][M]=F[2][S][M];for(f=0;f<3;f++)for(S=0;S<R;S++)for(M=0;M<j;M++)(E=F[f][S][M])==null?F[f][S][M]=NaN:E=F[f][S][M]*=U[f];for(f=0;f<3;f++)for(S=0;S<R;S++)for(M=0;M<j;M++)(E=F[f][S][M])!=null&&(this.minValues[f]>E&&(this.minValues[f]=E),this.maxValues[f]<E&&(this.maxValues[f]=E));for(f=0;f<3;f++)this.objectOffset[f]=.5*(this.minValues[f]+this.maxValues[f]);for(f=0;f<3;f++)for(S=0;S<R;S++)for(M=0;M<j;M++)(E=F[f][S][M])!=null&&(F[f][S][M]-=this.objectOffset[f]);var V=[w(new Float32Array(R*j),[R,j]),w(new Float32Array(R*j),[R,j]),w(new Float32Array(R*j),[R,j])];for(f=0;f<3;f++)for(S=0;S<R;S++)for(M=0;M<j;M++)V[f].set(S,M,F[f][S][M]);F=[];var H={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!k.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:k.opacityscale,opacity:k.opacity},te=a(k);if(H.intensityBounds=[te.min,te.max],k.surfacecolor){var $=w(new Float32Array(R*j),[R,j]);for(S=0;S<R;S++)for(M=0;M<j;M++)$.set(S,M,k.surfacecolor[M][S]);V.push($)}else H.intensityBounds[0]*=U[2],H.intensityBounds[1]*=U[2];(d<V[0].shape[0]||d<V[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(V[0].shape[0],0),this.dataScaleY=this.estimateScale(V[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(V)),k.surfacecolor&&(H.intensity=V.pop());var J=[!0,!0,!0],X=["x","y","z"];for(f=0;f<3;++f){var K=k.contours[X[f]];J[f]=K.highlight,H.showContour[f]=K.show||K.highlight,H.showContour[f]&&(H.contourProject[f]=[K.project.x,K.project.y,K.project.z],K.show?(this.showContour[f]=!0,H.levels[f]=Z[f],I.highlightColor[f]=H.contourColor[f]=t(K.color),K.usecolormap?I.highlightTint[f]=H.contourTint[f]=0:I.highlightTint[f]=H.contourTint[f]=1,H.contourWidth[f]=K.width,this.contourStart[f]=K.start,this.contourEnd[f]=K.end,this.contourSize[f]=K.size):(this.showContour[f]=!1,this.contourStart[f]=null,this.contourEnd[f]=null,this.contourSize[f]=0),K.highlight&&(H.dynamicColor[f]=t(K.highlightcolor),H.dynamicWidth[f]=K.highlightwidth))}(function(ee){var ie=ee[0].rgb,ae=ee[ee.length-1].rgb;return ie[0]===ae[0]&&ie[1]===ae[1]&&ie[2]===ae[2]&&ie[3]===ae[3]})(z)&&(H.vertexColor=!0),H.objectOffset=this.objectOffset,H.coords=V,I.update(H),I.visible=k.visible,I.enableDynamic=J,I.enableHighlight=J,I.snapToData=!0,"lighting"in k&&(I.ambientLight=k.lighting.ambient,I.diffuseLight=k.lighting.diffuse,I.specularLight=k.lighting.specular,I.roughness=k.lighting.roughness,I.fresnel=k.lighting.fresnel),"lightposition"in k&&(I.lightPosition=[k.lightposition.x,k.lightposition.y,k.lightposition.z])},r.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},N.exports=function(k,f){var S=k.glplot.gl,M=T({gl:S}),E=new n(k,M,f.uid);return M._trace=E,E.update(f),k.glplot.add(M),E}},91831:function(N,L,e){var T=e(73972),w=e(71828),i=e(1586),_=e(54532);function v(s,t,a,n){var r=n("opacityscale");r==="max"?t.opacityscale=[[0,.1],[1,1]]:r==="min"?t.opacityscale=[[0,1],[1,.1]]:r==="extremes"?t.opacityscale=function(l,o){for(var u=[],p=0;p<32;p++){var c=p/31,b=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,b))])}return u}():function(l){var o=0;if(!Array.isArray(l)||l.length<2||!l[0]||!l[l.length-1]||+l[0][0]!=0||+l[l.length-1][0]!=1)return!1;for(var u=0;u<l.length;u++){var p=l[u];if(p.length!==2||+p[0]<o)return!1;o=+p[0]}return!0}(r)||(t.opacityscale=void 0)}function h(s,t,a){t in s&&!(a in s)&&(s[a]=s[t])}N.exports={supplyDefaults:function(s,t,a,n){var r,l;function o(y,k){return w.coerce(s,t,_,y,k)}var u=o("x"),p=o("y"),c=o("z");if(!c||!c.length||u&&u.length<1||p&&p.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&w.isArrayOrTypedArray(u[0])?c.length:c[0].length,t._ylength=c.length,T.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],n),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(y){o(y)});var b=o("surfacecolor"),g=["x","y","z"];for(r=0;r<3;++r){var d="contours."+g[r],m=o(d+".show"),x=o(d+".highlight");if(m||x)for(l=0;l<3;++l)o(d+".project."+g[l]);m&&(o(d+".color"),o(d+".width"),o(d+".usecolormap")),x&&(o(d+".highlightcolor"),o(d+".highlightwidth")),o(d+".start"),o(d+".end"),o(d+".size")}b||(h(s,"zmin","cmin"),h(s,"zmax","cmax"),h(s,"zauto","cauto")),i(s,t,n,o,{prefix:"",cLetter:"c"}),v(0,t,0,o),t._length=null}},opacityscaleDefaults:v}},93601:function(N,L,e){N.exports={attributes:e(54532),supplyDefaults:e(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(18396),plot:e(43768),moduleType:"trace",name:"surface",basePlotModule:e(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(N,L,e){var T=e(50215),w=e(1426).extendFlat,i=e(30962).overrideAll,_=e(41940),v=e(27670).Y,h=e(12663).descriptionOnlyNumbers;(N.exports=i({domain:v({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:h("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:w({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:w({},_({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:h("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:w({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:w({},_({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(N,L,e){var T=e(27659).a0,w=e(36736),i="table";L.name=i,L.plot=function(_){var v=T(_.calcdata,i)[0];v.length&&w(_,v)},L.clean=function(_,v,h,s){var t=s._has&&s._has(i),a=v._has&&v._has(i);t&&!a&&s._paperdiv.selectAll(".table").remove()}},76333:function(N,L,e){var T=e(28984).wrap;N.exports=function(){return T({})}},49850:function(N){N.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(N,L,e){var T=e(49850),w=e(1426).extendFlat,i=e(92770),_=e(73627).isTypedArray,v=e(73627).isArrayOrTypedArray;function h(o){if(v(o)){for(var u=0,p=0;p<o.length;p++)u=Math.max(u,h(o[p]));return u}return o}function s(o,u){return o+u}function t(o){var u,p=o.slice(),c=1/0,b=0;for(u=0;u<p.length;u++)_(p[u])?p[u]=Array.from(p[u]):v(p[u])||(p[u]=[p[u]]),c=Math.min(c,p[u].length),b=Math.max(b,p[u].length);if(c!==b)for(u=0;u<p.length;u++){var g=b-p[u].length;g&&(p[u]=p[u].concat(a(g)))}return p}function a(o){for(var u=new Array(o),p=0;p<o;p++)u[p]="";return u}function n(o){return o.calcdata.columns.reduce(function(u,p){return p.xIndex<o.xIndex?u+p.columnWidth:u},0)}function r(o,u){return Object.keys(o).map(function(p){return w({},o[p],{auxiliaryBlocks:u})})}function l(o,u){for(var p,c={},b=0,g=0,d={firstRowIndex:null,lastRowIndex:null,rows:[]},m=0,x=0,y=0;y<o.length;y++)p=o[y],d.rows.push({rowIndex:y,rowHeight:p}),((g+=p)>=u||y===o.length-1)&&(c[b]=d,d.key=x++,d.firstRowIndex=m,d.lastRowIndex=y,d={firstRowIndex:null,lastRowIndex:null,rows:[]},b+=g,m=y+1,g=0);return c}N.exports=function(o,u){var p=t(u.cells.values),c=function(j){return j.slice(u.header.values.length,j.length)},b=t(u.header.values);b.length&&!b[0].length&&(b[0]=[""],b=t(b));var g=b.concat(c(p).map(function(){return a((b[0]||[""]).length)})),d=u.domain,m=Math.floor(o._fullLayout._size.w*(d.x[1]-d.x[0])),x=Math.floor(o._fullLayout._size.h*(d.y[1]-d.y[0])),y=u.header.values.length?g[0].map(function(){return u.header.height}):[T.emptyHeaderHeight],k=p.length?p[0].map(function(){return u.cells.height}):[],f=y.reduce(s,0),S=l(k,x-f+T.uplift),M=r(l(y,f),[]),E=r(S,M),O={},P=u._fullInput.columnorder;v(P)&&(P=Array.from(P)),P=P.concat(c(p.map(function(j,Z){return Z})));var I=g.map(function(j,Z){var F=v(u.columnwidth)?u.columnwidth[Math.min(Z,u.columnwidth.length-1)]:u.columnwidth;return i(F)?Number(F):1}),z=I.reduce(s,0);I=I.map(function(j){return j/z*m});var U=Math.max(h(u.header.line.width),h(u.cells.line.width)),R={key:u.uid+o._context.staticPlot,translateX:d.x[0]*o._fullLayout._size.w,translateY:o._fullLayout._size.h*(1-d.y[1]),size:o._fullLayout._size,width:m,maxLineWidth:U,height:x,columnOrder:P,groupHeight:x,rowBlocks:E,headerRowBlocks:M,scrollY:0,cells:w({},u.cells,{values:p}),headerCells:w({},u.header,{values:g}),gdColumns:g.map(function(j){return j[0]}),gdColumnsOriginalOrder:g.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:g.map(function(j,Z){var F=O[j];return O[j]=(F||0)+1,{key:j+"__"+O[j],label:j,specIndex:Z,xIndex:P[Z],xScale:n,x:void 0,calcdata:void 0,columnWidth:I[Z]}})};return R.columns.forEach(function(j){j.calcdata=R,j.x=n(j)}),R}},56269:function(N,L,e){var T=e(1426).extendFlat;L.splitToPanels=function(w){var i=[0,0],_=T({},w,{key:"header",type:"header",page:0,prevPages:i,currentRepaint:[null,null],dragHandle:!0,values:w.calcdata.headerCells.values[w.specIndex],rowBlocks:w.calcdata.headerRowBlocks,calcdata:T({},w.calcdata,{cells:w.calcdata.headerCells})});return[T({},w,{key:"cells1",type:"cells",page:0,prevPages:i,currentRepaint:[null,null],dragHandle:!1,values:w.calcdata.cells.values[w.specIndex],rowBlocks:w.calcdata.rowBlocks}),T({},w,{key:"cells2",type:"cells",page:1,prevPages:i,currentRepaint:[null,null],dragHandle:!1,values:w.calcdata.cells.values[w.specIndex],rowBlocks:w.calcdata.rowBlocks}),_]},L.splitToCells=function(w){var i=function(_){var v=_.rowBlocks[_.page],h=v?v.rows[0].rowIndex:0;return[h,v?h+v.rows.length:0]}(w);return(w.values||[]).slice(i[0],i[1]).map(function(_,v){return{keyWithinBlock:v+(typeof _=="string"&&_.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:i[0]+v,column:w,calcdata:w.calcdata,page:w.page,rowBlocks:w.rowBlocks,value:_}})}},39754:function(N,L,e){var T=e(71828),w=e(44464),i=e(27670).c;N.exports=function(_,v,h,s){function t(a,n){return T.coerce(_,v,w,a,n)}i(v,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),T.coerceFont(t,"header.font",T.extendFlat({},s.font)),function(a,n){for(var r=a.columnorder||[],l=a.header.values.length,o=r.slice(0,l),u=o.slice().sort(function(b,g){return b-g}),p=o.map(function(b){return u.indexOf(b)}),c=p.length;c<l;c++)p.push(c);n("columnorder",p)}(v,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),T.coerceFont(t,"cells.font",T.extendFlat({},s.font)),v._length=null}},96595:function(N,L,e){N.exports={attributes:e(44464),supplyDefaults:e(39754),calc:e(76333),plot:e(36736),moduleType:"trace",name:"table",basePlotModule:e(99469),categories:["noOpacity"],meta:{}}},36736:function(N,L,e){var T=e(49850),w=e(39898),i=e(71828),_=i.numberFormat,v=e(28984),h=e(91424),s=e(63893),t=e(71828).raiseToTop,a=e(71828).strTranslate,n=e(71828).cancelTransition,r=e(51018),l=e(56269),o=e(7901);function u(H){return Math.ceil(H.calcdata.maxLineWidth/2)}function p(H,te){return"clip"+H._fullLayout._uid+"_scrollAreaBottomClip_"+te.key}function c(H,te){return"clip"+H._fullLayout._uid+"_columnBoundaryClippath_"+te.calcdata.key+"_"+te.specIndex}function b(H){return[].concat.apply([],H.map(function(te){return te})).map(function(te){return te.__data__})}function g(H,te,$){var J=H.selectAll("."+T.cn.scrollbarKit).data(v.repeat,v.keyFun);J.enter().append("g").classed(T.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),J.each(function(ae){var oe=ae.scrollbarState;oe.totalHeight=function(fe){var ge=fe.rowBlocks;return j(ge,ge.length-1)+(ge.length?Z(ge[ge.length-1],1/0):1)}(ae),oe.scrollableAreaHeight=ae.groupHeight-M(ae),oe.currentlyVisibleHeight=Math.min(oe.totalHeight,oe.scrollableAreaHeight),oe.ratio=oe.currentlyVisibleHeight/oe.totalHeight,oe.barLength=Math.max(oe.ratio*oe.currentlyVisibleHeight,T.goldenRatio*T.scrollbarWidth),oe.barWiggleRoom=oe.currentlyVisibleHeight-oe.barLength,oe.wiggleRoom=Math.max(0,oe.totalHeight-oe.scrollableAreaHeight),oe.topY=oe.barWiggleRoom===0?0:ae.scrollY/oe.wiggleRoom*oe.barWiggleRoom,oe.bottomY=oe.topY+oe.barLength,oe.dragMultiplier=oe.wiggleRoom/oe.barWiggleRoom}).attr("transform",function(ae){var oe=ae.width+T.scrollbarWidth/2+T.scrollbarOffset;return a(oe,M(ae))});var X=J.selectAll("."+T.cn.scrollbar).data(v.repeat,v.keyFun);X.enter().append("g").classed(T.cn.scrollbar,!0);var K=X.selectAll("."+T.cn.scrollbarSlider).data(v.repeat,v.keyFun);K.enter().append("g").classed(T.cn.scrollbarSlider,!0),K.attr("transform",function(ae){return a(0,ae.scrollbarState.topY||0)});var ee=K.selectAll("."+T.cn.scrollbarGlyph).data(v.repeat,v.keyFun);ee.enter().append("line").classed(T.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",T.scrollbarWidth).attr("stroke-linecap","round").attr("y1",T.scrollbarWidth/2),ee.attr("y2",function(ae){return ae.scrollbarState.barLength-T.scrollbarWidth/2}).attr("stroke-opacity",function(ae){return ae.columnDragInProgress||!ae.scrollbarState.barWiggleRoom||$?0:.4}),ee.transition().delay(0).duration(0),ee.transition().delay(T.scrollbarHideDelay).duration(T.scrollbarHideDuration).attr("stroke-opacity",0);var ie=X.selectAll("."+T.cn.scrollbarCaptureZone).data(v.repeat,v.keyFun);ie.enter().append("line").classed(T.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",T.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ae){var oe=w.event.y,fe=this.getBoundingClientRect(),ge=ae.scrollbarState,ve=oe-fe.top,xe=w.scale.linear().domain([0,ge.scrollableAreaHeight]).range([0,ge.totalHeight]).clamp(!0);ge.topY<=ve&&ve<=ge.bottomY||O(te,H,null,xe(ve-ge.barLength/2))(ae)}).call(w.behavior.drag().origin(function(ae){return w.event.stopPropagation(),ae.scrollbarState.scrollbarScrollInProgress=!0,ae}).on("drag",O(te,H)).on("dragend",function(){})),ie.attr("y2",function(ae){return ae.scrollbarState.scrollableAreaHeight}),te._context.staticPlot&&(ee.remove(),ie.remove())}function d(H,te,$,J){var X=function(oe){var fe=oe.selectAll("."+T.cn.columnCells).data(v.repeat,v.keyFun);return fe.enter().append("g").classed(T.cn.columnCells,!0),fe.exit().remove(),fe}($),K=function(oe){var fe=oe.selectAll("."+T.cn.columnCell).data(l.splitToCells,function(ge){return ge.keyWithinBlock});return fe.enter().append("g").classed(T.cn.columnCell,!0),fe.exit().remove(),fe}(X);(function(oe){oe.each(function(fe,ge){var ve=fe.calcdata.cells.font,xe=fe.column.specIndex,_e={size:y(ve.size,xe,ge),color:y(ve.color,xe,ge),family:y(ve.family,xe,ge)};fe.rowNumber=fe.key,fe.align=y(fe.calcdata.cells.align,xe,ge),fe.cellBorderWidth=y(fe.calcdata.cells.line.width,xe,ge),fe.font=_e})})(K);var ee=function(oe){var fe=oe.selectAll("."+T.cn.cellRect).data(v.repeat,function(ge){return ge.keyWithinBlock});return fe.enter().append("rect").classed(T.cn.cellRect,!0),fe}(K);(function(oe){oe.attr("width",function(fe){return fe.column.columnWidth}).attr("stroke-width",function(fe){return fe.cellBorderWidth}).each(function(fe){var ge=w.select(this);o.stroke(ge,y(fe.calcdata.cells.line.color,fe.column.specIndex,fe.rowNumber)),o.fill(ge,y(fe.calcdata.cells.fill.color,fe.column.specIndex,fe.rowNumber))})})(ee);var ie=function(oe){var fe=oe.selectAll("."+T.cn.cellTextHolder).data(v.repeat,function(ge){return ge.keyWithinBlock});return fe.enter().append("g").classed(T.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),fe}(K),ae=function(oe){var fe=oe.selectAll("."+T.cn.cellText).data(v.repeat,function(ge){return ge.keyWithinBlock});return fe.enter().append("text").classed(T.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){w.event.stopPropagation()}),fe}(ie);(function(oe){oe.each(function(fe){h.font(w.select(this),fe.font)})})(ae),m(ae,te,J,H),R(K)}function m(H,te,$,J){H.text(function(X){var K=X.column.specIndex,ee=X.rowNumber,ie=X.value,ae=typeof ie=="string",oe=ae&&ie.match(/<br>/i),fe=!ae||oe;X.mayHaveMarkup=ae&&ie.match(/[<&>]/);var ge,ve=typeof(ge=ie)=="string"&&ge.match(T.latexCheck);X.latex=ve;var xe,_e,ye=ve?"":y(X.calcdata.cells.prefix,K,ee)||"",Ce=ve?"":y(X.calcdata.cells.suffix,K,ee)||"",ke=ve?null:y(X.calcdata.cells.format,K,ee)||null,Te=ye+(ke?_(ke)(X.value):X.value)+Ce;if(X.wrappingNeeded=!X.wrapped&&!fe&&!ve&&(xe=x(Te)),X.cellHeightMayIncrease=oe||ve||X.mayHaveMarkup||(xe===void 0?x(Te):xe),X.needsConvertToTspans=X.mayHaveMarkup||X.wrappingNeeded||X.latex,X.wrappingNeeded){var le=(T.wrapSplitCharacter===" "?Te.replace(/<a href=/gi,"<a_href="):Te).split(T.wrapSplitCharacter),ue=T.wrapSplitCharacter===" "?le.map(function(de){return de.replace(/<a_href=/gi,"<a href=")}):le;X.fragments=ue.map(function(de){return{text:de,width:null}}),X.fragments.push({fragment:T.wrapSpacer,width:null}),_e=ue.join(T.lineBreaker)+T.lineBreaker+T.wrapSpacer}else delete X.fragments,_e=Te;return _e}).attr("dy",function(X){return X.needsConvertToTspans?0:"0.75em"}).each(function(X){var K=this,ee=w.select(K),ie=X.wrappingNeeded?I:z;X.needsConvertToTspans?s.convertToTspans(ee,J,ie($,K,te,J,X)):w.select(K.parentNode).attr("transform",function(ae){return a(U(ae),T.cellPad)}).attr("text-anchor",function(ae){return{left:"start",center:"middle",right:"end"}[ae.align]})})}function x(H){return H.indexOf(T.wrapSplitCharacter)!==-1}function y(H,te,$){if(i.isArrayOrTypedArray(H)){var J=H[Math.min(te,H.length-1)];return i.isArrayOrTypedArray(J)?J[Math.min($,J.length-1)]:J}return H}function k(H,te,$){H.transition().ease(T.releaseTransitionEase).duration(T.releaseTransitionDuration).attr("transform",a(te.x,$))}function f(H){return H.type==="cells"}function S(H){return H.type==="header"}function M(H){return(H.rowBlocks.length?H.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(te,$){return te+Z($,1/0)},0)}function E(H,te,$){var J=b(te)[0];if(J!==void 0){var X=J.rowBlocks,K=J.calcdata,ee=j(X,X.length),ie=J.calcdata.groupHeight-M(J),ae=K.scrollY=Math.max(0,Math.min(ee-ie,K.scrollY)),oe=function(fe,ge,ve){for(var xe=[],_e=0,ye=0;ye<fe.length;ye++){for(var Ce=fe[ye],ke=Ce.rows,Te=0,le=0;le<ke.length;le++)Te+=ke[le].rowHeight;Ce.allRowsHeight=Te,ge<_e+Te&&ge+ve>_e&&xe.push(ye),_e+=Te}return xe}(X,ae,ie);oe.length===1&&(oe[0]===X.length-1?oe.unshift(oe[0]-1):oe.push(oe[0]+1)),oe[0]%2&&oe.reverse(),te.each(function(fe,ge){fe.page=oe[ge],fe.scrollY=ae}),te.attr("transform",function(fe){var ge=j(fe.rowBlocks,fe.page)-fe.scrollY;return a(0,ge)}),H&&(P(H,$,te,oe,J.prevPages,J,0),P(H,$,te,oe,J.prevPages,J,1),g($,H))}}function O(H,te,$,J){return function(X){var K=X.calcdata?X.calcdata:X,ee=te.filter(function(fe){return K.key===fe.key}),ie=$||K.scrollbarState.dragMultiplier,ae=K.scrollY;K.scrollY=J===void 0?K.scrollY+ie*w.event.dy:J;var oe=ee.selectAll("."+T.cn.yColumn).selectAll("."+T.cn.columnBlock).filter(f);return E(H,oe,ee),K.scrollY===ae}}function P(H,te,$,J,X,K,ee){J[ee]!==X[ee]&&(clearTimeout(K.currentRepaint[ee]),K.currentRepaint[ee]=setTimeout(function(){var ie=$.filter(function(ae,oe){return oe===ee&&J[oe]!==X[oe]});d(H,te,ie,$),X[ee]=J[ee]}))}function I(H,te,$,J){return function(){var X=w.select(te.parentNode);X.each(function(K){var ee=K.fragments;X.selectAll("tspan.line").each(function(_e,ye){ee[ye].width=this.getComputedTextLength()});var ie,ae,oe=ee[ee.length-1].width,fe=ee.slice(0,-1),ge=[],ve=0,xe=K.column.columnWidth-2*T.cellPad;for(K.value="";fe.length;)ve+(ae=(ie=fe.shift()).width+oe)>xe&&(K.value+=ge.join(T.wrapSpacer)+T.lineBreaker,ge=[],ve=0),ge.push(ie.text),ve+=ae;ve&&(K.value+=ge.join(T.wrapSpacer)),K.wrapped=!0}),X.selectAll("tspan.line").remove(),m(X.select("."+T.cn.cellText),$,H,J),w.select(te.parentNode.parentNode).call(R)}}function z(H,te,$,J,X){return function(){if(!X.settledY){var K=w.select(te.parentNode),ee=V(X),ie=X.key-ee.firstRowIndex,ae=ee.rows[ie].rowHeight,oe=X.cellHeightMayIncrease?te.parentNode.getBoundingClientRect().height+2*T.cellPad:ae,fe=Math.max(oe,ae);fe-ee.rows[ie].rowHeight&&(ee.rows[ie].rowHeight=fe,H.selectAll("."+T.cn.columnCell).call(R),E(null,H.filter(f),0),g($,J,!0)),K.attr("transform",function(){var ge=this,ve=ge.parentNode.getBoundingClientRect(),xe=w.select(ge.parentNode).select("."+T.cn.cellRect).node().getBoundingClientRect(),_e=ge.transform.baseVal.consolidate(),ye=xe.top-ve.top+(_e?_e.matrix.f:T.cellPad);return a(U(X,w.select(ge.parentNode).select("."+T.cn.cellTextHolder).node().getBoundingClientRect().width),ye)}),X.settledY=!0}}}function U(H,te){switch(H.align){case"left":default:return T.cellPad;case"right":return H.column.columnWidth-(te||0)-T.cellPad;case"center":return(H.column.columnWidth-(te||0))/2}}function R(H){H.attr("transform",function(te){var $=te.rowBlocks[0].auxiliaryBlocks.reduce(function(X,K){return X+Z(K,1/0)},0),J=Z(V(te),te.key);return a(0,J+$)}).selectAll("."+T.cn.cellRect).attr("height",function(te){return($=V(te),J=te.key,$.rows[J-$.firstRowIndex]).rowHeight;var $,J})}function j(H,te){for(var $=0,J=te-1;J>=0;J--)$+=F(H[J]);return $}function Z(H,te){for(var $=0,J=0;J<H.rows.length&&H.rows[J].rowIndex<te;J++)$+=H.rows[J].rowHeight;return $}function F(H){var te=H.allRowsHeight;if(te!==void 0)return te;for(var $=0,J=0;J<H.rows.length;J++)$+=H.rows[J].rowHeight;return H.allRowsHeight=$,$}function V(H){return H.rowBlocks[H.page]}N.exports=function(H,te){var $=!H._context.staticPlot,J=H._fullLayout._paper.selectAll("."+T.cn.table).data(te.map(function(Ce){var ke=v.unwrap(Ce).trace;return r(H,ke)}),v.keyFun);J.exit().remove(),J.enter().append("g").classed(T.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),J.attr("width",function(Ce){return Ce.width+Ce.size.l+Ce.size.r}).attr("height",function(Ce){return Ce.height+Ce.size.t+Ce.size.b}).attr("transform",function(Ce){return a(Ce.translateX,Ce.translateY)});var X=J.selectAll("."+T.cn.tableControlView).data(v.repeat,v.keyFun),K=X.enter().append("g").classed(T.cn.tableControlView,!0).style("box-sizing","content-box");if($){var ee="onwheel"in document?"wheel":"mousewheel";K.on("mousemove",function(Ce){X.filter(function(ke){return Ce===ke}).call(g,H)}).on(ee,function(Ce){if(!Ce.scrollbarState.wheeling){Ce.scrollbarState.wheeling=!0;var ke=Ce.scrollY+w.event.deltaY;O(H,X,null,ke)(Ce)||(w.event.stopPropagation(),w.event.preventDefault()),Ce.scrollbarState.wheeling=!1}}).call(g,H,!0)}X.attr("transform",function(Ce){return a(Ce.size.l,Ce.size.t)});var ie=X.selectAll("."+T.cn.scrollBackground).data(v.repeat,v.keyFun);ie.enter().append("rect").classed(T.cn.scrollBackground,!0).attr("fill","none"),ie.attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}),X.each(function(Ce){h.setClipUrl(w.select(this),p(H,Ce),H)});var ae=X.selectAll("."+T.cn.yColumn).data(function(Ce){return Ce.columns},v.keyFun);ae.enter().append("g").classed(T.cn.yColumn,!0),ae.exit().remove(),ae.attr("transform",function(Ce){return a(Ce.x,0)}),$&&ae.call(w.behavior.drag().origin(function(Ce){return k(w.select(this),Ce,-T.uplift),t(this),Ce.calcdata.columnDragInProgress=!0,g(X.filter(function(ke){return Ce.calcdata.key===ke.key}),H),Ce}).on("drag",function(Ce){var ke=w.select(this),Te=function(le){return(Ce===le?w.event.x:le.x)+le.columnWidth/2};Ce.x=Math.max(-T.overdrag,Math.min(Ce.calcdata.width+T.overdrag-Ce.columnWidth,w.event.x)),b(ae).filter(function(le){return le.calcdata.key===Ce.calcdata.key}).sort(function(le,ue){return Te(le)-Te(ue)}).forEach(function(le,ue){le.xIndex=ue,le.x=Ce===le?le.x:le.xScale(le)}),ae.filter(function(le){return Ce!==le}).transition().ease(T.transitionEase).duration(T.transitionDuration).attr("transform",function(le){return a(le.x,0)}),ke.call(n).attr("transform",a(Ce.x,-T.uplift))}).on("dragend",function(Ce){var ke=w.select(this),Te=Ce.calcdata;Ce.x=Ce.xScale(Ce),Ce.calcdata.columnDragInProgress=!1,k(ke,Ce,0),function(le,ue,de){var Le=ue.gdColumnsOriginalOrder;ue.gdColumns.sort(function(we,Ee){return de[Le.indexOf(we)]-de[Le.indexOf(Ee)]}),ue.columnorder=de,le.emit("plotly_restyle")}(H,Te,Te.columns.map(function(le){return le.xIndex}))})),ae.each(function(Ce){h.setClipUrl(w.select(this),c(H,Ce),H)});var oe=ae.selectAll("."+T.cn.columnBlock).data(l.splitToPanels,v.keyFun);oe.enter().append("g").classed(T.cn.columnBlock,!0).attr("id",function(Ce){return Ce.key}),oe.style("cursor",function(Ce){return Ce.dragHandle?"ew-resize":Ce.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var fe=oe.filter(S),ge=oe.filter(f);$&&ge.call(w.behavior.drag().origin(function(Ce){return w.event.stopPropagation(),Ce}).on("drag",O(H,X,-1)).on("dragend",function(){})),d(H,X,fe,oe),d(H,X,ge,oe);var ve=X.selectAll("."+T.cn.scrollAreaClip).data(v.repeat,v.keyFun);ve.enter().append("clipPath").classed(T.cn.scrollAreaClip,!0).attr("id",function(Ce){return p(H,Ce)});var xe=ve.selectAll("."+T.cn.scrollAreaClipRect).data(v.repeat,v.keyFun);xe.enter().append("rect").classed(T.cn.scrollAreaClipRect,!0).attr("x",-T.overdrag).attr("y",-T.uplift).attr("fill","none"),xe.attr("width",function(Ce){return Ce.width+2*T.overdrag}).attr("height",function(Ce){return Ce.height+T.uplift}),ae.selectAll("."+T.cn.columnBoundary).data(v.repeat,v.keyFun).enter().append("g").classed(T.cn.columnBoundary,!0);var _e=ae.selectAll("."+T.cn.columnBoundaryClippath).data(v.repeat,v.keyFun);_e.enter().append("clipPath").classed(T.cn.columnBoundaryClippath,!0),_e.attr("id",function(Ce){return c(H,Ce)});var ye=_e.selectAll("."+T.cn.columnBoundaryRect).data(v.repeat,v.keyFun);ye.enter().append("rect").classed(T.cn.columnBoundaryRect,!0).attr("fill","none"),ye.attr("width",function(Ce){return Ce.columnWidth+2*u(Ce)}).attr("height",function(Ce){return Ce.calcdata.height+2*u(Ce)+T.uplift}).attr("x",function(Ce){return-u(Ce)}).attr("y",function(Ce){return-u(Ce)}),E(null,ge,X)}},45802:function(N,L,e){var T=e(5386).fF,w=e(5386).si,i=e(50693),_=e(27670).Y,v=e(34e3),h=e(57564),s=e(43473),t=e(1426).extendFlat,a=e(79952).u;N.exports={labels:h.labels,parents:h.parents,values:h.values,branchvalues:h.branchvalues,count:h.count,level:h.level,maxdepth:h.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:h.marker.colors,pattern:a,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:h.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},v.textfont,{}),editType:"calc"},text:v.text,textinfo:h.textinfo,texttemplate:w({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:v.hovertext,hoverinfo:h.hoverinfo,hovertemplate:T({},{keys:s.eventDataKeys}),textfont:v.textfont,insidetextfont:v.insidetextfont,outsidetextfont:t({},v.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:v.sort,root:h.root,domain:_({name:"treemap",trace:!0,editType:"calc"})}},78018:function(N,L,e){var T=e(74875);L.name="treemap",L.plot=function(w,i,_,v){T.plotBasePlot(L.name,w,i,_,v)},L.clean=function(w,i,_,v){T.cleanBasePlot(L.name,w,i,_,v)}},65039:function(N,L,e){var T=e(52147);L.y=function(w,i){return T.calc(w,i)},L.T=function(w){return T._runCrossTraceCalc("treemap",w)}},43473:function(N){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(N,L,e){var T=e(71828),w=e(45802),i=e(7901),_=e(27670).c,v=e(90769).handleText,h=e(97313).TEXTPAD,s=e(37434).handleMarkerDefaults,t=e(21081),a=t.hasColorscale,n=t.handleDefaults;N.exports=function(r,l,o,u){function p(k,f){return T.coerce(r,l,w,k,f)}var c=p("labels"),b=p("parents");if(c&&c.length&&b&&b.length){var g=p("values");g&&g.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.packing")==="squarify"&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var d=p("text");p("texttemplate"),l.texttemplate||p("textinfo",T.isArrayOrTypedArray(d)?"text+label":"label"),p("hovertext"),p("hovertemplate");var m=p("pathbar.visible");v(r,l,u,p,"auto",{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var x=l.textposition.indexOf("bottom")!==-1;s(r,l,u,p),(l._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis)?n(r,l,u,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(l.marker.colors||[]).length);var y=2*l.textfont.size;p("marker.pad.t",x?y/4:y),p("marker.pad.l",y/4),p("marker.pad.r",y/4),p("marker.pad.b",x?y:y/4),p("marker.cornerradius"),l._hovered={marker:{line:{width:2,color:i.contrast(u.paper_bgcolor)}}},m&&(p("pathbar.thickness",l.pathbar.textfont.size+2*h),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),_(l,u,p),l._length=null}else l.visible=!1}},80694:function(N,L,e){var T=e(39898),w=e(2791),i=e(72597).clearMinTextSize,_=e(16688).resizeText,v=e(46650);N.exports=function(h,s,t,a,n){var r,l,o=n.type,u=n.drawDescendants,p=h._fullLayout,c=p["_"+o+"layer"],b=!t;i(o,p),(r=c.selectAll("g.trace."+o).data(s,function(g){return g[0].trace.uid})).enter().append("g").classed("trace",!0).classed(o,!0),r.order(),!p.uniformtext.mode&&w.hasTransition(t)?(a&&(l=a()),T.transition().duration(t.duration).ease(t.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()}).each(function(){c.selectAll("g.trace").each(function(g){v(h,g,this,t,u)})})):(r.each(function(g){v(h,g,this,t,u)}),p.uniformtext.mode&&_(h,c.selectAll(".trace"),o)),b&&r.exit().remove()}},66209:function(N,L,e){var T=e(39898),w=e(71828),i=e(91424),_=e(63893),v=e(37210),h=e(96362).styleOne,s=e(43473),t=e(2791),a=e(83523),n=!0;N.exports=function(r,l,o,u,p){var c=p.barDifY,b=p.width,g=p.height,d=p.viewX,m=p.viewY,x=p.pathSlice,y=p.toMoveInsideSlice,k=p.strTransform,f=p.hasTransition,S=p.handleSlicesExit,M=p.makeUpdateSliceInterpolator,E=p.makeUpdateTextInterpolator,O={},P=r._context.staticPlot,I=r._fullLayout,z=l[0],U=z.trace,R=z.hierarchy,j=b/U._entryDepth,Z=t.listPath(o.data,"id"),F=v(R.copy(),[b,g],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(F=F.filter(function(H){var te=Z.indexOf(H.data.id);return te!==-1&&(H.x0=j*te,H.x1=j*(te+1),H.y0=c,H.y1=c+g,H.onPathbar=!0,!0)})).reverse(),(u=u.data(F,t.getPtId)).enter().append("g").classed("pathbar",!0),S(u,n,O,[b,g],x),u.order();var V=u;f&&(V=V.transition().each("end",function(){var H=T.select(this);t.setSliceCursor(H,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(H){H._x0=d(H.x0),H._x1=d(H.x1),H._y0=m(H.y0),H._y1=m(H.y1),H._hoverX=d(H.x1-Math.min(b,g)/2),H._hoverY=m(H.y1-g/2);var te=T.select(this),$=w.ensureSingle(te,"path","surface",function(ee){ee.style("pointer-events",P?"none":"all")});f?$.transition().attrTween("d",function(ee){var ie=M(ee,n,O,[b,g]);return function(ae){return x(ie(ae))}}):$.attr("d",x),te.call(a,o,r,l,{styleOne:h,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:r._transitioning}),$.call(h,H,U,r,{hovered:!1}),H._text=(t.getPtLabel(H)||"").split("<br>").join(" ")||"";var J=w.ensureSingle(te,"g","slicetext"),X=w.ensureSingle(J,"text","",function(ee){ee.attr("data-notex",1)}),K=w.ensureUniformFontSize(r,t.determineTextFont(U,H,I.font,{onPathbar:!0}));X.text(H._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(i.font,K).call(_.convertToTspans,r),H.textBB=i.bBox(X.node()),H.transform=y(H,{fontSize:K.size,onPathbar:!0}),H.transform.fontSize=K.size,f?X.transition().attrTween("transform",function(ee){var ie=E(ee,n,O,[b,g]);return function(ae){return k(ie(ae))}}):X.attr("transform",k(H))})}},52583:function(N,L,e){var T=e(39898),w=e(71828),i=e(91424),_=e(63893),v=e(37210),h=e(96362).styleOne,s=e(43473),t=e(2791),a=e(83523),n=e(24714).formatSliceLabel,r=!1;N.exports=function(l,o,u,p,c){var b=c.width,g=c.height,d=c.viewX,m=c.viewY,x=c.pathSlice,y=c.toMoveInsideSlice,k=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,M=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,O=c.prevEntry,P=l._context.staticPlot,I=l._fullLayout,z=o[0].trace,U=z.textposition.indexOf("left")!==-1,R=z.textposition.indexOf("right")!==-1,j=z.textposition.indexOf("bottom")!==-1,Z=!j&&!z.marker.pad.t||j&&!z.marker.pad.b,F=v(u,[b,g],{packing:z.tiling.packing,squarifyratio:z.tiling.squarifyratio,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,pad:{inner:z.tiling.pad,top:z.marker.pad.t,left:z.marker.pad.l,right:z.marker.pad.r,bottom:z.marker.pad.b}}).descendants(),V=1/0,H=-1/0;F.forEach(function(K){var ee=K.depth;ee>=z._maxDepth?(K.x0=K.x1=(K.x0+K.x1)/2,K.y0=K.y1=(K.y0+K.y1)/2):(V=Math.min(V,ee),H=Math.max(H,ee))}),p=p.data(F,t.getPtId),z._maxVisibleLayers=isFinite(H)?H-V+1:0,p.enter().append("g").classed("slice",!0),S(p,r,{},[b,g],x),p.order();var te=null;if(f&&O){var $=t.getPtId(O);p.each(function(K){te===null&&t.getPtId(K)===$&&(te={x0:K.x0,x1:K.x1,y0:K.y0,y1:K.y1})})}var J=function(){return te||{x0:0,x1:b,y0:0,y1:g}},X=p;return f&&(X=X.transition().each("end",function(){var K=T.select(this);t.setSliceCursor(K,l,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(K){var ee=t.isHeader(K,z);K._x0=d(K.x0),K._x1=d(K.x1),K._y0=m(K.y0),K._y1=m(K.y1),K._hoverX=d(K.x1-z.marker.pad.r),K._hoverY=m(j?K.y1-z.marker.pad.b/2:K.y0+z.marker.pad.t/2);var ie=T.select(this),ae=w.ensureSingle(ie,"path","surface",function(ve){ve.style("pointer-events",P?"none":"all")});f?ae.transition().attrTween("d",function(ve){var xe=M(ve,r,J(),[b,g]);return function(_e){return x(xe(_e))}}):ae.attr("d",x),ie.call(a,u,l,o,{styleOne:h,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,l,{isTransitioning:l._transitioning}),ae.call(h,K,z,l,{hovered:!1}),K.x0===K.x1||K.y0===K.y1?K._text="":K._text=ee?Z?"":t.getPtLabel(K)||"":n(K,u,z,o,I)||"";var oe=w.ensureSingle(ie,"g","slicetext"),fe=w.ensureSingle(oe,"text","",function(ve){ve.attr("data-notex",1)}),ge=w.ensureUniformFontSize(l,t.determineTextFont(z,K,I.font));fe.text(K._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":U||ee?"start":"middle").call(i.font,ge).call(_.convertToTspans,l),K.textBB=i.bBox(fe.node()),K.transform=y(K,{fontSize:ge.size,isHeader:ee}),K.transform.fontSize=ge.size,f?fe.transition().attrTween("transform",function(ve){var xe=E(ve,r,J(),[b,g]);return function(_e){return k(xe(_e))}}):fe.attr("transform",k(K))}),te}},14102:function(N){N.exports=function L(e,T,w){var i;w.swapXY&&(i=e.x0,e.x0=e.y0,e.y0=i,i=e.x1,e.x1=e.y1,e.y1=i),w.flipX&&(i=e.x0,e.x0=T[0]-e.x1,e.x1=T[0]-i),w.flipY&&(i=e.y0,e.y0=T[1]-e.y1,e.y1=T[1]-i);var _=e.children;if(_)for(var v=0;v<_.length;v++)L(_[v],T,w)}},70954:function(N,L,e){N.exports={moduleType:"trace",name:"treemap",basePlotModule:e(78018),categories:[],animatable:!0,attributes:e(45802),layoutAttributes:e(55479),supplyDefaults:e(91174),supplyLayoutDefaults:e(77182),calc:e(65039).y,crossTraceCalc:e(65039).T,plot:e(5893),style:e(96362).style,colorbar:e(4898),meta:{}}},55479:function(N){N.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(N,L,e){var T=e(71828),w=e(55479);N.exports=function(i,_){function v(h,s){return T.coerce(i,_,w,h,s)}v("treemapcolorway",_.colorway),v("extendtreemapcolors")}},37210:function(N,L,e){var T=e(674),w=e(14102);N.exports=function(i,_,v){var h,s=v.flipX,t=v.flipY,a=v.packing==="dice-slice",n=v.pad[t?"bottom":"top"],r=v.pad[s?"right":"left"],l=v.pad[s?"left":"right"],o=v.pad[t?"top":"bottom"];a&&(h=r,r=n,n=h,h=l,l=o,o=h);var u=T.treemap().tile(function(p,c){switch(p){case"squarify":return T.treemapSquarify.ratio(c);case"binary":return T.treemapBinary;case"dice":return T.treemapDice;case"slice":return T.treemapSlice;default:return T.treemapSliceDice}}(v.packing,v.squarifyratio)).paddingInner(v.pad.inner).paddingLeft(r).paddingRight(l).paddingTop(n).paddingBottom(o).size(a?[_[1],_[0]]:_)(i);return(a||s||t)&&w(u,_,{swapXY:a,flipX:s,flipY:t}),u}},5893:function(N,L,e){var T=e(80694),w=e(52583);N.exports=function(i,_,v,h){return T(i,_,v,h,{type:"treemap",drawDescendants:w})}},46650:function(N,L,e){var T=e(39898),w=e(81684).sX,i=e(2791),_=e(71828),v=e(97313).TEXTPAD,h=e(17295).toMoveInsideBar,s=e(72597).recordMinTextSize,t=e(43473),a=e(66209);function n(r){return i.isHierarchyRoot(r)?"":i.getPtId(r)}N.exports=function(r,l,o,u,p){var c=r._fullLayout,b=l[0],g=b.trace,d=g.type==="icicle",m=b.hierarchy,x=i.findEntryWithLevel(m,g.level),y=T.select(o),k=y.selectAll("g.pathbar"),f=y.selectAll("g.slice");if(!x)return k.remove(),void f.remove();var S=i.isHierarchyRoot(x),M=!c.uniformtext.mode&&i.hasTransition(u),E=i.getMaxDepth(g),O=c._size,P=g.domain,I=O.w*(P.x[1]-P.x[0]),z=O.h*(P.y[1]-P.y[0]),U=I,R=g.pathbar.thickness,j=g.marker.line.width+t.gapWithPathbar,Z=g.pathbar.visible?g.pathbar.side.indexOf("bottom")>-1?z+j:-(R+j):0,F={x0:U,x1:U,y0:Z,y1:Z+R},V=function(Me,De,Ne){var Be=g.tiling.pad,Ye=function(ht){return ht-Be<=De.x0},We=function(ht){return ht+Be>=De.x1},et=function(ht){return ht-Be<=De.y0},ft=function(ht){return ht+Be>=De.y1};return Me.x0===De.x0&&Me.x1===De.x1&&Me.y0===De.y0&&Me.y1===De.y1?{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1}:{x0:Ye(Me.x0-Be)?0:We(Me.x0-Be)?Ne[0]:Me.x0,x1:Ye(Me.x1+Be)?0:We(Me.x1+Be)?Ne[0]:Me.x1,y0:et(Me.y0-Be)?0:ft(Me.y0-Be)?Ne[1]:Me.y0,y1:et(Me.y1+Be)?0:ft(Me.y1+Be)?Ne[1]:Me.y1}},H=null,te={},$={},J=null,X=function(Me,De){return De?te[n(Me)]:$[n(Me)]};b.hasMultipleRoots&&S&&E++,g._maxDepth=E,g._backgroundColor=c.paper_bgcolor,g._entryDepth=x.data.depth,g._atRootLevel=S;var K=-I/2+O.l+O.w*(P.x[1]+P.x[0])/2,ee=-z/2+O.t+O.h*(1-(P.y[1]+P.y[0])/2),ie=function(Me){return K+Me},ae=function(Me){return ee+Me},oe=ae(0),fe=ie(0),ge=function(Me){return fe+Me},ve=function(Me){return oe+Me};function xe(Me,De){return Me+","+De}var _e=ge(0),ye=function(Me){Me.x=Math.max(_e,Me.x)},Ce=g.pathbar.edgeshape,ke=g[d?"tiling":"marker"].pad,Te=function(Me){return g.textposition.indexOf(Me)!==-1},le=Te("top"),ue=Te("left"),de=Te("right"),Le=Te("bottom"),we=function(Me,De){var Ne=Me.x0,Be=Me.x1,Ye=Me.y0,We=Me.y1,et=Me.textBB,ft=le||De.isHeader&&!Le?"start":Le?"end":"middle",ht=Te("right"),mt=Te("left")||De.onPathbar?-1:ht?1:0;if(De.isHeader){if((Ne+=(d?ke:ke.l)-v)>=(Be-=(d?ke:ke.r)-v)){var Mt=(Ne+Be)/2;Ne=Mt,Be=Mt}var _t;Le?Ye<(_t=We-(d?ke:ke.b))&&_t<We&&(Ye=_t):Ye<(_t=Ye+(d?ke:ke.t))&&_t<We&&(We=_t)}var it=h(Ne,Be,Ye,We,et,{isHorizontal:!1,constrained:!0,angle:0,anchor:ft,leftToRight:mt});return it.fontSize=De.fontSize,it.targetX=ie(it.targetX),it.targetY=ae(it.targetY),isNaN(it.targetX)||isNaN(it.targetY)?{}:(Ne!==Be&&Ye!==We&&s(g.type,it,c),{scale:it.scale,rotate:it.rotate,textX:it.textX,textY:it.textY,anchorX:it.anchorX,anchorY:it.anchorY,targetX:it.targetX,targetY:it.targetY})},Ee=function(Me,De){for(var Ne,Be=0,Ye=Me;!Ne&&Be<E;)Be++,(Ye=Ye.parent)?Ne=X(Ye,De):Be=E;return Ne||{}},Oe=function(Me,De,Ne,Be,Ye){var We,et=X(Me,De);if(et)We=et;else if(De)We=F;else if(H)if(Me.parent){var ft=J||Ne;ft&&!De?We=V(Me,ft,Be):(We={},_.extendFlat(We,Ee(Me,De)))}else We=_.extendFlat({},Me),d&&(Ye.orientation==="h"?Ye.flipX?We.x0=Me.x1:We.x1=0:Ye.flipY?We.y0=Me.y1:We.y1=0);else We={};return w(We,{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1})},Fe=function(Me,De,Ne,Be){var Ye=X(Me,De),We={},et=function(ht,mt,Mt,_t){if(mt)return te[n(m)]||F;var it=$[g.level]||Mt;return function(st){return st.data.depth-x.data.depth<E}(ht)?V(ht,it,_t):{}}(Me,De,Ne,Be);_.extendFlat(We,{transform:we({x0:et.x0,x1:et.x1,y0:et.y0,y1:et.y1,textBB:Me.textBB,_text:Me._text},{isHeader:i.isHeader(Me,g)})}),Ye?We=Ye:Me.parent&&_.extendFlat(We,Ee(Me,De));var ft=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&s(g.type,ft,c),w(We,{transform:{scale:ft.scale,rotate:ft.rotate,textX:ft.textX,textY:ft.textY,anchorX:ft.anchorX,anchorY:ft.anchorY,targetX:ft.targetX,targetY:ft.targetY}})},pe=function(Me,De,Ne,Be,Ye){var We=Be[0],et=Be[1];M?Me.exit().transition().each(function(){var ft=T.select(this);ft.select("path.surface").transition().attrTween("d",function(ht){var mt=function(Mt,_t,it,st){var St,zt=X(Mt,_t);if(_t)St=F;else{var Ft=X(x,_t);St=Ft?V(Mt,Ft,st):{}}return w(zt,St)}(ht,De,0,[We,et]);return function(Mt){return Ye(mt(Mt))}}),ft.select("g.slicetext").attr("opacity",0)}).remove():Me.exit().remove()},be=function(Me){var De=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&s(g.type,De,c),_.getTextTransform({textX:De.textX,textY:De.textY,anchorX:De.anchorX,anchorY:De.anchorY,targetX:De.targetX,targetY:De.targetY,scale:De.scale,rotate:De.rotate})};M&&(k.each(function(Me){te[n(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(te[n(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate})}),f.each(function(Me){$[n(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&($[n(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate}),!H&&i.isEntry(Me)&&(H=Me)})),J=p(r,l,x,f,{width:I,height:z,viewX:ie,viewY:ae,pathSlice:function(Me){var De=ie(Me.x0),Ne=ie(Me.x1),Be=ae(Me.y0),Ye=ae(Me.y1),We=Ne-De,et=Ye-Be;if(!We||!et)return"";var ft=g.marker.cornerradius||0,ht=Math.min(ft,We/2,et/2);ht&&Me.data&&Me.data.data&&Me.data.data.label&&(le&&(ht=Math.min(ht,ke.t)),ue&&(ht=Math.min(ht,ke.l)),de&&(ht=Math.min(ht,ke.r)),Le&&(ht=Math.min(ht,ke.b)));var mt=function(Mt,_t){return ht?"a"+xe(ht,ht)+" 0 0 1 "+xe(Mt,_t):""};return"M"+xe(De,Be+ht)+mt(ht,-ht)+"L"+xe(Ne-ht,Be)+mt(ht,ht)+"L"+xe(Ne,Ye-ht)+mt(-ht,ht)+"L"+xe(De+ht,Ye)+mt(-ht,-ht)+"Z"},toMoveInsideSlice:we,prevEntry:H,makeUpdateSliceInterpolator:Oe,makeUpdateTextInterpolator:Fe,handleSlicesExit:pe,hasTransition:M,strTransform:be}),g.pathbar.visible?a(r,l,x,k,{barDifY:Z,width:U,height:R,viewX:ge,viewY:ve,pathSlice:function(Me){var De=ge(Math.max(Math.min(Me.x0,Me.x0),0)),Ne=ge(Math.min(Math.max(Me.x1,Me.x1),U)),Be=ve(Me.y0),Ye=ve(Me.y1),We=R/2,et={},ft={};et.x=De,ft.x=Ne,et.y=ft.y=(Be+Ye)/2;var ht={x:De,y:Be},mt={x:Ne,y:Be},Mt={x:Ne,y:Ye},_t={x:De,y:Ye};return Ce===">"?(ht.x-=We,mt.x-=We,Mt.x-=We,_t.x-=We):Ce==="/"?(Mt.x-=We,_t.x-=We,et.x-=We/2,ft.x-=We/2):Ce==="\\"?(ht.x-=We,mt.x-=We,et.x-=We/2,ft.x-=We/2):Ce==="<"&&(et.x-=We,ft.x-=We),ye(ht),ye(_t),ye(et),ye(mt),ye(Mt),ye(ft),"M"+xe(ht.x,ht.y)+"L"+xe(mt.x,mt.y)+"L"+xe(ft.x,ft.y)+"L"+xe(Mt.x,Mt.y)+"L"+xe(_t.x,_t.y)+"L"+xe(et.x,et.y)+"Z"},toMoveInsideSlice:we,makeUpdateSliceInterpolator:Oe,makeUpdateTextInterpolator:Fe,handleSlicesExit:pe,hasTransition:M,strTransform:be}):k.remove()}},96362:function(N,L,e){var T=e(39898),w=e(7901),i=e(71828),_=e(2791),v=e(72597).resizeText,h=e(43467);function s(t,a,n,r,l){var o,u,p=(l||{}).hovered,c=a.data.data,b=c.i,g=c.color,d=_.isHierarchyRoot(a),m=1;if(p)o=n._hovered.marker.line.color,u=n._hovered.marker.line.width;else if(d&&g===n.root.color)m=100,o="rgba(0,0,0,0)",u=0;else if(o=i.castOption(n,b,"marker.line.color")||w.defaultLine,u=i.castOption(n,b,"marker.line.width")||0,!n._hasColorscale&&!a.onPathbar){var x=n.marker.depthfade;if(x){var y,k=w.combine(w.addOpacity(n._backgroundColor,.75),g);if(x===!0){var f=_.getMaxDepth(n);y=isFinite(f)?_.isLeaf(a)?0:n._maxVisibleLayers-(a.data.depth-n._entryDepth):a.data.height+1}else y=a.data.depth-n._entryDepth,n._atRootLevel||y++;if(y>0)for(var S=0;S<y;S++){var M=.5*S/y;g=w.combine(w.addOpacity(k,M),g)}}}t.call(h,a,n,r,g).style("stroke-width",u).call(w.stroke,o).style("opacity",m)}N.exports={style:function(t){var a=t._fullLayout._treemaplayer.selectAll(".trace");v(t,a,"treemap"),a.each(function(n){var r=T.select(this),l=n[0].trace;r.style("opacity",l.opacity),r.selectAll("path.surface").each(function(o){T.select(this).call(s,o,l,t,{hovered:!1})})})},styleOne:s}},68875:function(N,L,e){var T=e(53522),w=e(1426).extendFlat,i=e(12663).axisHoverFormat;N.exports={y:T.y,x:T.x,x0:T.x0,y0:T.y0,xhoverformat:i("x"),yhoverformat:i("y"),name:w({},T.name,{}),orientation:w({},T.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T.fillcolor,points:w({},T.boxpoints,{}),jitter:w({},T.jitter,{}),pointpos:w({},T.pointpos,{}),width:w({},T.width,{}),marker:T.marker,text:T.text,hovertext:T.hovertext,hovertemplate:T.hovertemplate,quartilemethod:T.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(N,L,e){var T=e(71828),w=e(89298),i=e(48518),_=e(60168),v=e(50606).BADNUM;function h(t,a,n){var r=a.max-a.min;if(!r)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,r/1e4);var l=n.length,o=T.stdev(n,l-1,a.mean);return Math.max(function(u,p,c){return 1.059*Math.min(p,c/1.349)*Math.pow(u,-.2)}(l,o,a.q3-a.q1),r/100)}function s(t,a,n,r){var l,o=t.spanmode,u=t.span||[],p=[a.min,a.max],c=[a.min-2*r,a.max+2*r];function b(d){var m=u[d],x=n.type==="multicategory"?n.r2c(m):n.d2c(m,0,t[a.valLetter+"calendar"]);return x===v?c[d]:x}var g={type:"linear",range:l=o==="soft"?c:o==="hard"?p:[b(0),b(1)]};return w.setConvert(g),g.cleanRange(),l}N.exports=function(t,a){var n=i(t,a);if(n[0].t.empty)return n;for(var r=t._fullLayout,l=w.getFromId(t,a[a.orientation==="h"?"xaxis":"yaxis"]),o=1/0,u=-1/0,p=0,c=0,b=0;b<n.length;b++){var g=n[b],d=g.pts.map(_.extractVal),m=g.bandwidth=h(a,g,d),x=g.span=s(a,g,l,m);if(g.min===g.max&&m===0)x=g.span=[g.min,g.max],g.density=[{v:1,t:x[0]}],g.bandwidth=m,p=Math.max(p,1);else{var y=x[1]-x[0],k=Math.ceil(y/(m/3)),f=y/k;if(!isFinite(f)||!isFinite(k))return T.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var S=_.makeKDE(g,a,d);g.density=new Array(k);for(var M=0,E=x[0];E<x[1]+f/2;M++,E+=f){var O=S(E);g.density[M]={v:O,t:E},p=Math.max(p,O)}}c=Math.max(c,d.length),o=Math.min(o,x[0]),u=Math.max(u,x[1])}var P=w.findExtremes(l,[o,u],{padded:!0});if(a._extremes[l._id]=P,a.width)n[0].t.maxKDE=p;else{var I=r._violinScaleGroupStats,z=a.scalegroup,U=I[z];U?(U.maxKDE=Math.max(U.maxKDE,p),U.maxCount=Math.max(U.maxCount,c)):I[z]={maxKDE:p,maxCount:c}}return n[0].t.labels.kde=T._(t,"kde:"),n}},86403:function(N,L,e){var T=e(37188).setPositionOffset,w=["v","h"];N.exports=function(i,_){for(var v=i.calcdata,h=_.xaxis,s=_.yaxis,t=0;t<w.length;t++){for(var a=w[t],n=a==="h"?s:h,r=[],l=0;l<v.length;l++){var o=v[l],u=o[0].t,p=o[0].trace;p.visible!==!0||p.type!=="violin"||u.empty||p.orientation!==a||p.xaxis!==h._id||p.yaxis!==s._id||r.push(l)}T("violin",i,r,n)}}},15899:function(N,L,e){var T=e(71828),w=e(7901),i=e(36411),_=e(68875);N.exports=function(v,h,s,t){function a(y,k){return T.coerce(v,h,_,y,k)}function n(y,k){return T.coerce2(v,h,_,y,k)}if(i.handleSampleDefaults(v,h,a,t),h.visible!==!1){a("bandwidth"),a("side"),a("width")||(a("scalegroup",h.name),a("scalemode"));var r,l=a("span");Array.isArray(l)&&(r="manual"),a("spanmode",r);var o=a("line.color",(v.marker||{}).color||s),u=a("line.width"),p=a("fillcolor",w.addOpacity(h.line.color,.5));i.handlePointsDefaults(v,h,a,{prefix:""});var c=n("box.width"),b=n("box.fillcolor",p),g=n("box.line.color",o),d=n("box.line.width",u);a("box.visible",!!(c||b||g||d))||(h.box={visible:!1});var m=n("meanline.color",o),x=n("meanline.width",u);a("meanline.visible",!!(m||x))||(h.meanline={visible:!1}),a("quartilemethod")}}},60168:function(N,L,e){var T=e(71828),w=function(i){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*i*i)};L.makeKDE=function(i,_,v){var h=v.length,s=w,t=i.bandwidth,a=1/(h*t);return function(n){for(var r=0,l=0;l<h;l++)r+=s((n-v[l])/t);return a*r}},L.getPositionOnKdePath=function(i,_,v){var h,s;_.orientation==="h"?(h="y",s="x"):(h="x",s="y");var t=T.findPointOnPath(i.path,v,s,{pathLength:i.pathLength}),a=i.posCenterPx,n=t[h];return[n,_.side==="both"?2*a-n:a]},L.getKdeValue=function(i,_,v){var h=i.pts.map(L.extractVal);return L.makeKDE(i,_,h)(v)/i.posDensityScale},L.extractVal=function(i){return i.v}},57634:function(N,L,e){var T=e(7901),w=e(71828),i=e(89298),_=e(41868),v=e(60168);N.exports=function(h,s,t,a,n){n||(n={});var r,l,o=n.hoverLayer,u=h.cd,p=u[0].trace,c=p.hoveron,b=c.indexOf("violins")!==-1,g=c.indexOf("kde")!==-1,d=[];if(b||g){var m=_.hoverOnBoxes(h,s,t,a);if(g&&m.length>0){var x,y,k,f,S,M=h.xa,E=h.ya;p.orientation==="h"?(S=s,x="y",k=E,y="x",f=M):(S=t,x="x",k=M,y="y",f=E);var O=u[h.index];if(S>=O.span[0]&&S<=O.span[1]){var P=w.extendFlat({},h),I=f.c2p(S,!0),z=v.getKdeValue(O,p,S),U=v.getPositionOnKdePath(O,p,I),R=k._offset,j=k._length;P[x+"0"]=U[0],P[x+"1"]=U[1],P[y+"0"]=P[y+"1"]=I,P[y+"Label"]=y+": "+i.hoverLabelText(f,S,p[y+"hoverformat"])+", "+u[0].t.labels.kde+" "+z.toFixed(3);for(var Z=0,F=0;F<m.length;F++)if(m[F].attr==="med"){Z=F;break}P.spikeDistance=m[Z].spikeDistance;var V=x+"Spike";P[V]=m[Z][V],m[Z].spikeDistance=void 0,m[Z][V]=void 0,P.hovertemplate=!1,d.push(P),(l={})[x+"1"]=w.constrain(R+U[0],R,R+j),l[x+"2"]=w.constrain(R+U[1],R,R+j),l[y+"1"]=l[y+"2"]=f._offset+I}}b&&(d=d.concat(m))}c.indexOf("points")!==-1&&(r=_.hoverOnPoints(h,s,t));var H=o.selectAll(".violinline-"+p.uid).data(l?[0]:[]);return H.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),H.exit().remove(),H.attr(l).call(T.stroke,h.color),a==="closest"?r?[r]:d:(r&&d.push(r),d)}},47462:function(N,L,e){N.exports={attributes:e(68875),layoutAttributes:e(9228),supplyDefaults:e(15899),crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(33598),calc:e(38603),crossTraceCalc:e(86403),plot:e(28443),style:e(31847),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(57634),selectPoints:e(24626),moduleType:"trace",name:"violin",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(N,L,e){var T=e(40094),w=e(71828).extendFlat;N.exports={violinmode:w({},T.boxmode,{}),violingap:w({},T.boxgap,{}),violingroupgap:w({},T.boxgroupgap,{})}},33598:function(N,L,e){var T=e(71828),w=e(9228),i=e(4199);N.exports=function(_,v,h){i._supply(_,v,h,function(s,t){return T.coerce(_,v,w,s,t)},"violin")}},28443:function(N,L,e){var T=e(39898),w=e(71828),i=e(91424),_=e(86047),v=e(34621),h=e(60168);N.exports=function(s,t,a,n){var r=s._context.staticPlot,l=s._fullLayout,o=t.xaxis,u=t.yaxis;function p(c,b){var g=v(c,{xaxis:o,yaxis:u,trace:b,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return i.smoothopen(g[0],1)}w.makeTraceGroups(n,a,"trace violins").each(function(c){var b=T.select(this),g=c[0],d=g.t,m=g.trace;if(m.visible!==!0||d.empty)b.remove();else{var x=d.bPos,y=d.bdPos,k=t[d.valLetter+"axis"],f=t[d.posLetter+"axis"],S=m.side==="both",M=S||m.side==="positive",E=S||m.side==="negative",O=b.selectAll("path.violin").data(w.identity);O.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","violin"),O.exit().remove(),O.each(function(F){var V,H,te,$,J,X,K,ee,ie=T.select(this),ae=F.density,oe=ae.length,fe=f.c2l(F.pos+x,!0),ge=f.l2p(fe);if(m.width)V=d.maxKDE/y;else{var ve=l._violinScaleGroupStats[m.scalegroup];V=m.scalemode==="count"?ve.maxKDE/y*(ve.maxCount/F.pts.length):ve.maxKDE/y}if(M){for(K=new Array(oe),J=0;J<oe;J++)(ee=K[J]={})[d.posLetter]=fe+ae[J].v/V,ee[d.valLetter]=k.c2l(ae[J].t,!0);H=p(K,m)}if(E){for(K=new Array(oe),X=0,J=oe-1;X<oe;X++,J--)(ee=K[X]={})[d.posLetter]=fe-ae[J].v/V,ee[d.valLetter]=k.c2l(ae[J].t,!0);te=p(K,m)}if(S)$=H+"L"+te.substr(1)+"Z";else{var xe=[ge,k.c2p(ae[0].t)],_e=[ge,k.c2p(ae[oe-1].t)];m.orientation==="h"&&(xe.reverse(),_e.reverse()),$=M?"M"+xe+"L"+H.substr(1)+"L"+_e:"M"+_e+"L"+te.substr(1)+"L"+xe}ie.attr("d",$),F.posCenterPx=ge,F.posDensityScale=V*y,F.path=ie.node(),F.pathLength=F.path.getTotalLength()/(S?2:1)});var P,I,z,U=m.box,R=U.width,j=(U.line||{}).width;S?(P=y*R,I=0):M?(P=[0,y*R/2],I=j*{x:1,y:-1}[d.posLetter]):(P=[y*R/2,0],I=j*{x:-1,y:1}[d.posLetter]),_.plotBoxAndWhiskers(b,{pos:f,val:k},m,{bPos:x,bdPos:P,bPosPxOffset:I}),_.plotBoxMean(b,{pos:f,val:k},m,{bPos:x,bdPos:P,bPosPxOffset:I}),!m.box.visible&&m.meanline.visible&&(z=w.identity);var Z=b.selectAll("path.meanline").data(z||[]);Z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",r?"none":"non-scaling-stroke"),Z.exit().remove(),Z.each(function(F){var V=k.c2p(F.mean,!0),H=h.getPositionOnKdePath(F,m,V);T.select(this).attr("d",m.orientation==="h"?"M"+V+","+H[0]+"V"+H[1]:"M"+H[0]+","+V+"H"+H[1])}),_.plotPoints(b,{x:o,y:u},m,d)}})}},31847:function(N,L,e){var T=e(39898),w=e(7901),i=e(16296).stylePoints;N.exports=function(_){var v=T.select(_).selectAll("g.trace.violins");v.style("opacity",function(h){return h[0].trace.opacity}),v.each(function(h){var s=h[0].trace,t=T.select(this),a=s.box||{},n=a.line||{},r=s.meanline||{},l=r.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(w.stroke,s.line.color).call(w.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",n.width+"px").call(w.stroke,n.color).call(w.fill,a.fillcolor);var o={"stroke-width":l+"px","stroke-dasharray":2*l+"px,"+l+"px"};t.selectAll("path.mean").style(o).call(w.stroke,r.color),t.selectAll("path.meanline").style(o).call(w.stroke,r.color),i(t,s,_)})}},16336:function(N,L,e){var T=e(50693),w=e(16249),i=e(54532),_=e(9012),v=e(1426).extendFlat,h=e(30962).overrideAll,s=N.exports=h(v({x:w.x,y:w.y,z:w.z,value:w.value,isomin:w.isomin,isomax:w.isomax,surface:w.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:w.slices,caps:w.caps,text:w.text,hovertext:w.hovertext,xhoverformat:w.xhoverformat,yhoverformat:w.yhoverformat,zhoverformat:w.zhoverformat,valuehoverformat:w.valuehoverformat,hovertemplate:w.hovertemplate},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:w.colorbar,opacity:w.opacity,opacityscale:i.opacityscale,lightposition:w.lightposition,lighting:w.lighting,flatshading:w.flatshading,contour:w.contour,hoverinfo:v({},_.hoverinfo),showlegend:v({},_.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},64809:function(N,L,e){var T=e(9330).gl_mesh3d,w=e(81697).parseColorScale,i=e(71828).isArrayOrTypedArray,_=e(78614),v=e(21081).extractOpts,h=e(90060),s=e(22674).findNearestOnAxis,t=e(22674).generateIsoMeshes;function a(r,l,o){this.scene=r,this.uid=o,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var n=a.prototype;n.handlePick=function(r){if(r.object===this.mesh){var l=r.data.index,o=this.data._meshX[l],u=this.data._meshY[l],p=this.data._meshZ[l],c=this.data._Ys.length,b=this.data._Zs.length,g=s(o,this.data._Xs).id,d=s(u,this.data._Ys).id,m=s(p,this.data._Zs).id,x=r.index=m+b*d+b*c*g;r.traceCoordinate=[this.data._meshX[x],this.data._meshY[x],this.data._meshZ[x],this.data._value[x]];var y=this.data.hovertext||this.data.text;return i(y)&&y[x]!==void 0?r.textLabel=y[x]:y&&(r.textLabel=y),!0}},n.update=function(r){var l=this.scene,o=l.fullSceneLayout;function u(b,g,d,m){return g.map(function(x){return b.d2l(x,0,m)*d})}this.data=t(r);var p={positions:h(u(o.xaxis,r._meshX,l.dataScale[0],r.xcalendar),u(o.yaxis,r._meshY,l.dataScale[1],r.ycalendar),u(o.zaxis,r._meshZ,l.dataScale[2],r.zcalendar)),cells:h(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:_(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},c=v(r);p.vertexIntensity=r._meshIntensity,p.vertexIntensityBounds=[c.min,c.max],p.colormap=w(r),this.mesh.update(p)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},N.exports=function(r,l){var o=r.glplot.gl,u=T({gl:o}),p=new a(r,u,l.uid);return u._trace=p,p.update(l),r.glplot.add(u),p}},47651:function(N,L,e){var T=e(71828),w=e(16336),i=e(82738).supplyIsoDefaults,_=e(91831).opacityscaleDefaults;N.exports=function(v,h,s,t){function a(n,r){return T.coerce(v,h,w,n,r)}i(v,h,s,t,a),_(v,h,t,a)}},17659:function(N,L,e){N.exports={attributes:e(16336),supplyDefaults:e(47651),calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(64809),moduleType:"trace",name:"volume",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(N,L,e){var T=e(1486),w=e(82196).line,i=e(9012),_=e(12663).axisHoverFormat,v=e(5386).fF,h=e(5386).si,s=e(48334),t=e(1426).extendFlat,a=e(7901);function n(r){return{marker:{color:t({},T.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},T.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},T.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}N.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),hovertext:T.hovertext,hovertemplate:v({},{keys:s.eventDataKeys}),hoverinfo:t({},i.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:h({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:T.text,textposition:T.textposition,insidetextanchor:T.insidetextanchor,textangle:T.textangle,textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:T.outsidetextfont,constraintext:T.constraintext,cliponaxis:T.cliponaxis,orientation:T.orientation,offset:T.offset,width:T.width,increasing:n(),decreasing:n(),totals:n(),connector:{line:{color:t({},w.color,{dflt:a.defaultLine}),width:t({},w.width,{editType:"plot"}),dash:w.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup}},52752:function(N,L,e){var T=e(89298),w=e(42973),i=e(71828).mergeArray,_=e(66279),v=e(50606).BADNUM;function h(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}N.exports=function(t,a){var n,r,l,o,u,p,c=T.getFromId(t,a.xaxis||"x"),b=T.getFromId(t,a.yaxis||"y");a.orientation==="h"?(n=c.makeCalcdata(a,"x"),l=b.makeCalcdata(a,"y"),o=w(a,b,"y",l),u=!!a.yperiodalignment,p="y"):(n=b.makeCalcdata(a,"y"),l=c.makeCalcdata(a,"x"),o=w(a,c,"x",l),u=!!a.xperiodalignment,p="x"),r=o.vals;for(var g,d=Math.min(r.length,n.length),m=new Array(d),x=0,y=!1,k=0;k<d;k++){var f=n[k]||0,S=!1;(n[k]!==v||s(a.measure[k])||h(a.measure[k]))&&k+1<d&&(n[k+1]!==v||s(a.measure[k+1])||h(a.measure[k+1]))&&(S=!0);var M=m[k]={i:k,p:r[k],s:f,rawS:f,cNext:S};h(a.measure[k])?(x=M.s,M.isSum=!0,M.dir="totals",M.s=x):s(a.measure[k])?(M.isSum=!0,M.dir="totals",M.s=x):(M.isSum=!1,M.dir=M.rawS<0?"decreasing":"increasing",g=M.s,M.s=x+g,x+=g),M.dir==="totals"&&(y=!0),u&&(m[k].orig_p=l[k],m[k][p+"End"]=o.ends[k],m[k][p+"Start"]=o.starts[k]),a.ids&&(M.id=String(a.ids[k])),M.v=(a.base||0)+x}return m.length&&(m[0].hasTotals=y),i(a.text,m,"tx"),i(a.hovertext,m,"htx"),_(m,a),m}},48334:function(N){N.exports={eventDataKeys:["initial","delta","final"]}},70766:function(N,L,e){var T=e(11661).setGroupPositions;N.exports=function(w,i){var _,v,h=w._fullLayout,s=w._fullData,t=w.calcdata,a=i.xaxis,n=i.yaxis,r=[],l=[],o=[];for(v=0;v<s.length;v++){var u=s[v];u.visible===!0&&u.xaxis===a._id&&u.yaxis===n._id&&u.type==="waterfall"&&(_=t[v],u.orientation==="h"?o.push(_):l.push(_),r.push(_))}var p={mode:h.waterfallmode,norm:h.waterfallnorm,gap:h.waterfallgap,groupgap:h.waterfallgroupgap};for(T(w,a,n,l,p),T(w,n,a,o,p),v=0;v<r.length;v++){_=r[v];for(var c=0;c<_.length;c++){var b=_[c];b.isSum===!1&&(b.s0+=c===0?0:_[c-1].s),c+1<_.length&&(_[c].nextP0=_[c+1].p0,_[c].nextS0=_[c+1].s0)}}}},83266:function(N,L,e){var T=e(71828),w=e(26125),i=e(90769).handleText,_=e(67513),v=e(73927),h=e(43037),s=e(7901),t=e(22372),a=t.INCREASING.COLOR,n=t.DECREASING.COLOR;function r(l,o,u){l(o+".marker.color",u),l(o+".marker.line.color",s.defaultLine),l(o+".marker.line.width")}N.exports={supplyDefaults:function(l,o,u,p){function c(g,d){return T.coerce(l,o,h,g,d)}if(_(l,o,p,c)){v(l,o,p,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",o.x&&!o.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var b=c("textposition");i(l,o,p,c,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&(c("texttemplate"),o.texttemplate||c("textinfo")),r(c,"increasing",a),r(c,"decreasing",n),r(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else o.visible=!1},crossTraceDefaults:function(l,o){var u,p;function c(g){return T.coerce(p._input,p,h,g)}if(o.waterfallmode==="group")for(var b=0;b<l.length;b++)u=(p=l[b])._input,w(u,p,o,c)}}},58593:function(N){N.exports=function(L,e){return L.x="xVal"in e?e.xVal:e.x,L.y="yVal"in e?e.yVal:e.y,"initial"in e&&(L.initial=e.initial),"delta"in e&&(L.delta=e.delta),"final"in e&&(L.final=e.final),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),L}},61326:function(N,L,e){var T=e(89298).hoverLabelText,w=e(7901).opacity,i=e(95423).hoverOnBars,_=e(22372),v=_.INCREASING.SYMBOL,h=_.DECREASING.SYMBOL;N.exports=function(s,t,a,n,r){var l=i(s,t,a,n,r);if(l){var o=l.cd,u=o[0].trace,p=u.orientation==="h",c=p?"x":"y",b=p?s.xa:s.ya,g=o[l.index],d=g.isSum?g.b+g.s:g.rawS;l.initial=g.b+g.s-d,l.delta=d,l.final=l.initial+l.delta;var m=M(Math.abs(l.delta));l.deltaLabel=d<0?"("+m+")":m,l.finalLabel=M(l.final),l.initialLabel=M(l.initial);var x=g.hi||u.hoverinfo,y=[];if(x&&x!=="none"&&x!=="skip"){var k=x==="all",f=x.split("+"),S=function(E){return k||f.indexOf(E)!==-1};g.isSum||(!S("final")||S(p?"x":"y")||y.push(l.finalLabel),S("delta")&&(d<0?y.push(l.deltaLabel+" "+h):y.push(l.deltaLabel+" "+v)),S("initial")&&y.push("Initial: "+l.initialLabel))}return y.length&&(l.extraText=y.join("<br>")),l.color=function(E,O){var P=E[O.dir].marker,I=P.color,z=P.line.color,U=P.line.width;return w(I)?I:w(z)&&U?z:void 0}(u,g),[l]}function M(E){return T(b,E,u[c+"hoverformat"])}}},19990:function(N,L,e){N.exports={attributes:e(43037),layoutAttributes:e(13494),supplyDefaults:e(83266).supplyDefaults,crossTraceDefaults:e(83266).crossTraceDefaults,supplyLayoutDefaults:e(5176),calc:e(52752),crossTraceCalc:e(70766),plot:e(30436),style:e(55750).style,hoverPoints:e(61326),eventData:e(58593),selectPoints:e(81974),moduleType:"trace",name:"waterfall",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(N){N.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(N,L,e){var T=e(71828),w=e(13494);N.exports=function(i,_,v){var h=!1;function s(n,r){return T.coerce(i,_,w,n,r)}for(var t=0;t<v.length;t++){var a=v[t];if(a.visible&&a.type==="waterfall"){h=!0;break}}h&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},30436:function(N,L,e){var T=e(39898),w=e(71828),i=e(91424),_=e(50606).BADNUM,v=e(17295),h=e(72597).clearMinTextSize;N.exports=function(s,t,a,n){var r=s._fullLayout;h("waterfall",r),v.plot(s,t,a,n,{mode:r.waterfallmode,norm:r.waterfallmode,gap:r.waterfallgap,groupgap:r.waterfallgroupgap}),function(l,o,u,p){var c=o.xaxis,b=o.yaxis;w.makeTraceGroups(p,u,"trace bars").each(function(g){var d=T.select(this),m=g[0].trace,x=w.ensureSingle(d,"g","lines");if(m.connector&&m.connector.visible){var y=m.orientation==="h",k=m.connector.mode,f=x.selectAll("g.line").data(w.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(M,E){if(E===S-1||M.cNext){var O=function(U,R,j,Z){var F=[],V=[],H=Z?R:j,te=Z?j:R;return F[0]=H.c2p(U.s0,!0),V[0]=te.c2p(U.p0,!0),F[1]=H.c2p(U.s1,!0),V[1]=te.c2p(U.p1,!0),F[2]=H.c2p(U.nextS0,!0),V[2]=te.c2p(U.nextP0,!0),Z?[F,V]:[V,F]}(M,c,b,y),P=O[0],I=O[1],z="";P[0]!==_&&I[0]!==_&&P[1]!==_&&I[1]!==_&&(k==="spanning"&&!M.isSum&&E>0&&(z+=y?"M"+P[0]+","+I[1]+"V"+I[0]:"M"+P[1]+","+I[0]+"H"+P[0]),k!=="between"&&(M.isSum||E<S-1)&&(z+=y?"M"+P[1]+","+I[0]+"V"+I[1]:"M"+P[0]+","+I[1]+"H"+P[1]),P[2]!==_&&I[2]!==_&&(z+=y?"M"+P[1]+","+I[1]+"V"+I[2]:"M"+P[1]+","+I[1]+"H"+P[2])),z===""&&(z="M0,0Z"),w.ensureSingle(T.select(this),"path").attr("d",z).call(i.setClipUrl,o.layerClipId,l)}})}else x.remove()})}(s,t,a,n)}},55750:function(N,L,e){var T=e(39898),w=e(91424),i=e(7901),_=e(37822).DESELECTDIM,v=e(16688),h=e(72597).resizeText,s=v.styleTextPoints;N.exports={style:function(t,a,n){var r=n||T.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");h(t,r,"waterfall"),r.style("opacity",function(l){return l[0].trace.opacity}),r.each(function(l){var o=T.select(this),u=l[0].trace;o.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u[p.dir].marker;T.select(this).call(i.fill,c.color).call(i.stroke,c.line.color).call(w.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!p.selected?_:1)}}),s(o,u,t),o.selectAll(".lines").each(function(){var p=u.connector.line;w.lineGroupStyle(T.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},82887:function(N,L,e){var T=e(89298),w=e(71828),i=e(86281),_=e(79344).p,v=e(50606).BADNUM;L.moduleType="transform",L.name="aggregate";var h=L.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=h.aggregations;function t(l,o,u,p){if(p.enabled){for(var c=p.target,b=w.nestedProperty(o,c),g=b.get(),d=function(y,k){var f=y.func,S=k.d2c,M=k.c2d;switch(f){case"count":return a;case"first":return n;case"last":return r;case"sum":return function(E,O){for(var P=0,I=0;I<O.length;I++){var z=S(E[O[I]]);z!==v&&(P+=z)}return M(P)};case"avg":return function(E,O){for(var P=0,I=0,z=0;z<O.length;z++){var U=S(E[O[z]]);U!==v&&(P+=U,I++)}return I?M(P/I):v};case"min":return function(E,O){for(var P=1/0,I=0;I<O.length;I++){var z=S(E[O[I]]);z!==v&&(P=Math.min(P,z))}return P===1/0?v:M(P)};case"max":return function(E,O){for(var P=-1/0,I=0;I<O.length;I++){var z=S(E[O[I]]);z!==v&&(P=Math.max(P,z))}return P===-1/0?v:M(P)};case"range":return function(E,O){for(var P=1/0,I=-1/0,z=0;z<O.length;z++){var U=S(E[O[z]]);U!==v&&(P=Math.min(P,U),I=Math.max(I,U))}return I===-1/0||P===1/0?v:M(I-P)};case"change":return function(E,O){var P=S(E[O[0]]),I=S(E[O[O.length-1]]);return P===v||I===v?v:M(I-P)};case"median":return function(E,O){for(var P=[],I=0;I<O.length;I++){var z=S(E[O[I]]);z!==v&&P.push(z)}if(!P.length)return v;P.sort(w.sorterAsc);var U=(P.length-1)/2;return M((P[Math.floor(U)]+P[Math.ceil(U)])/2)};case"mode":return function(E,O){for(var P={},I=0,z=v,U=0;U<O.length;U++){var R=S(E[O[U]]);if(R!==v){var j=P[R]=(P[R]||0)+1;j>I&&(I=j,z=R)}}return I?M(z):v};case"rms":return function(E,O){for(var P=0,I=0,z=0;z<O.length;z++){var U=S(E[O[z]]);U!==v&&(P+=U*U,I++)}return I?M(Math.sqrt(P/I)):v};case"stddev":return function(E,O){var P,I=0,z=0,U=1,R=v;for(P=0;P<O.length&&R===v;P++)R=S(E[O[P]]);if(R===v)return v;for(;P<O.length;P++){var j=S(E[O[P]]);if(j!==v){var Z=j-R;I+=Z,z+=Z*Z,U++}}var F=y.funcmode==="sample"?U-1:U;return F?Math.sqrt((z-I*I/U)/F):0}}}(p,T.getDataConversions(l,o,c,g)),m=new Array(u.length),x=0;x<u.length;x++)m[x]=d(g,u[x]);b.set(m),p.func==="count"&&w.pushUnique(o._arrayAttrs,c)}}function a(l,o){return o.length}function n(l,o){return l[o[0]]}function r(l,o){return l[o[o.length-1]]}L.supplyDefaults=function(l,o){var u,p={};function c(M,E){return w.coerce(l,p,h,M,E)}if(!c("enabled"))return p;var b=i.findArrayAttributes(o),g={};for(u=0;u<b.length;u++)g[b[u]]=1;var d=c("groups");if(!Array.isArray(d)){if(!g[d])return p.enabled=!1,p;g[d]=0}var m,x=l.aggregations||[],y=p.aggregations=new Array(x.length);function k(M,E){return w.coerce(x[u],m,s,M,E)}for(u=0;u<x.length;u++){m={_index:u};var f=k("target"),S=k("func");k("enabled")&&f&&(g[f]||S==="count"&&g[f]===void 0)?(S==="stddev"&&k("funcmode"),g[f]=0,y[u]=m):y[u]={enabled:!1,_index:u}}for(u=0;u<b.length;u++)g[b[u]]&&y.push({target:b[u],func:s.func.dflt,enabled:!0,_index:-1});return p},L.calcTransform=function(l,o,u){if(u.enabled){var p=u.groups,c=w.getTargetArray(o,{target:p});if(c){var b,g,d,m,x={},y={},k=[],f=_(o.transforms,u),S=c.length;for(o._length&&(S=Math.min(S,o._length)),b=0;b<S;b++)(d=x[g=c[b]])===void 0?(x[g]=k.length,m=[b],k.push(m),y[x[g]]=f(b)):(k[d].push(b),y[x[g]]=(y[x[g]]||[]).concat(f(b)));u._indexToPoints=y;var M=u.aggregations;for(b=0;b<M.length;b++)t(l,o,k,M[b]);typeof p=="string"&&t(l,o,k,{target:p,func:"first",enabled:!0}),o._length=k.length}}}},14382:function(N,L,e){var T=e(71828),w=e(73972),i=e(89298),_=e(79344).p,v=e(74808),h=v.COMPARISON_OPS,s=v.INTERVAL_OPS,t=v.SET_OPS;L.moduleType="transform",L.name="filter",L.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(h).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},L.supplyDefaults=function(a){var n={};function r(u,p){return T.coerce(a,n,L.attributes,u,p)}if(r("enabled")){var l=r("target");if(T.isArrayOrTypedArray(l)&&l.length===0)return n.enabled=!1,n;r("preservegaps"),r("operation"),r("value");var o=w.getComponentMethod("calendars","handleDefaults");o(a,n,"valuecalendar",null),o(a,n,"targetcalendar",null)}return n},L.calcTransform=function(a,n,r){if(r.enabled){var l=T.getTargetArray(n,r);if(l){var o=r.target,u=l.length;n._length&&(u=Math.min(u,n._length));var p=r.targetcalendar,c=n._arrayAttrs,b=r.preservegaps;if(typeof o=="string"){var g=T.nestedProperty(n,o+"calendar").get();g&&(p=g)}var d,m,x=function(O,P,I){var z=O.operation,U=O.value,R=T.isArrayOrTypedArray(U);function j(H){return H.indexOf(z)!==-1}var Z,F=function(H){return P(H,0,O.valuecalendar)},V=function(H){return P(H,0,I)};switch(j(h)?Z=F(R?U[0]:U):j(s)?Z=R?[F(U[0]),F(U[1])]:[F(U),F(U)]:j(t)&&(Z=R?U.map(F):[F(U)]),z){case"=":return function(H){return V(H)===Z};case"!=":return function(H){return V(H)!==Z};case"<":return function(H){return V(H)<Z};case"<=":return function(H){return V(H)<=Z};case">":return function(H){return V(H)>Z};case">=":return function(H){return V(H)>=Z};case"[]":return function(H){var te=V(H);return te>=Z[0]&&te<=Z[1]};case"()":return function(H){var te=V(H);return te>Z[0]&&te<Z[1]};case"[)":return function(H){var te=V(H);return te>=Z[0]&&te<Z[1]};case"(]":return function(H){var te=V(H);return te>Z[0]&&te<=Z[1]};case"][":return function(H){var te=V(H);return te<=Z[0]||te>=Z[1]};case")(":return function(H){var te=V(H);return te<Z[0]||te>Z[1]};case"](":return function(H){var te=V(H);return te<=Z[0]||te>Z[1]};case")[":return function(H){var te=V(H);return te<Z[0]||te>=Z[1]};case"{}":return function(H){return Z.indexOf(V(H))!==-1};case"}{":return function(H){return Z.indexOf(V(H))===-1}}}(r,i.getDataToCoordFunc(a,n,o,l),p),y={},k={},f=0;b?(d=function(O){y[O.astr]=T.extendDeep([],O.get()),O.set(new Array(u))},m=function(O,P){var I=y[O.astr][P];O.get()[P]=I}):(d=function(O){y[O.astr]=T.extendDeep([],O.get()),O.set([])},m=function(O,P){var I=y[O.astr][P];O.get().push(I)}),E(d);for(var S=_(n.transforms,r),M=0;M<u;M++)x(l[M])?(E(m,M),k[f++]=S(M)):b&&f++;r._indexToPoints=k,n._length=f}}function E(O,P){for(var I=0;I<c.length;I++)O(T.nestedProperty(n,c[I]),P)}}},43102:function(N,L,e){var T=e(71828),w=e(86281),i=e(74875),_=e(79344).p;function v(h,s){var t,a,n,r,l,o,u,p,c,b,g=s.transform,d=s.transformIndex,m=h.transforms[d].groups,x=_(h.transforms,g);if(!T.isArrayOrTypedArray(m)||m.length===0)return[h];var y=T.filterUnique(m),k=new Array(y.length),f=m.length,S=w.findArrayAttributes(h),M=g.styles||[],E={};for(t=0;t<M.length;t++)E[M[t].target]=M[t].value;g.styles&&(b=T.keyedContainer(g,"styles","target","value.name"));var O={},P={};for(t=0;t<y.length;t++){O[o=y[t]]=t,P[o]=0,(u=k[t]=T.extendDeepNoArrays({},h))._group=o,u.transforms[d]._indexToPoints={};var I=null;for(b&&(I=b.get(o)),u.name=I||I===""?I:T.templateString(g.nameformat,{trace:h.name,group:o}),p=u.transforms,u.transforms=[],a=0;a<p.length;a++)u.transforms[a]=T.extendDeepNoArrays({},p[a]);for(a=0;a<S.length;a++)T.nestedProperty(u,S[a]).set([])}for(n=0;n<S.length;n++){for(r=S[n],a=0,c=[];a<y.length;a++)c[a]=T.nestedProperty(k[a],r).get();for(l=T.nestedProperty(h,r).get(),a=0;a<f;a++)c[O[m[a]]].push(l[a])}for(a=0;a<f;a++)(u=k[O[m[a]]]).transforms[d]._indexToPoints[P[m[a]]]=x(a),P[m[a]]++;for(t=0;t<y.length;t++)o=y[t],u=k[t],i.clearExpandedTraceDefaultColors(u),u=T.extendDeepNoArrays(u,E[o]||{});return k}L.moduleType="transform",L.name="groupby",L.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},L.supplyDefaults=function(h,s,t){var a,n={};function r(c,b){return T.coerce(h,n,L.attributes,c,b)}if(!r("enabled"))return n;r("groups"),r("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var l=h.styles,o=n.styles=[];if(l)for(a=0;a<l.length;a++){var u=o[a]={};T.coerce(l[a],o[a],L.attributes.styles,"target");var p=T.coerce(l[a],o[a],L.attributes.styles,"value");T.isPlainObject(p)?u.value=T.extendDeep({},p):p&&delete u.value}return n},L.transform=function(h,s){var t,a,n,r=[];for(a=0;a<h.length;a++)for(t=v(h[a],s),n=0;n<t.length;n++)r.push(t[n]);return r}},79344:function(N,L){L.p=function(e,T){for(var w,i,_=0;_<e.length&&(w=e[_])!==T;_++)w._indexToPoints&&w.enabled!==!1&&(i=w._indexToPoints);var v=i?function(h){return i[h]}:function(h){return[h]};return v}},32275:function(N,L,e){var T=e(71828),w=e(89298),i=e(79344).p,_=e(50606).BADNUM;L.moduleType="transform",L.name="sort",L.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},L.supplyDefaults=function(v){var h={};function s(t,a){return T.coerce(v,h,L.attributes,t,a)}return s("enabled")&&(s("target"),s("order")),h},L.calcTransform=function(v,h,s){if(s.enabled){var t=T.getTargetArray(h,s);if(t){var a=s.target,n=t.length;h._length&&(n=Math.min(n,h._length));var r,l,o=h._arrayAttrs,u=function(m,x,y,k){var f,S=new Array(k),M=new Array(k);for(f=0;f<k;f++)S[f]={v:x[f],i:f};for(S.sort(function(E,O){switch(E.order){case"ascending":return function(P,I){var z=O(P.v),U=O(I.v);return z===_?1:U===_?-1:z-U};case"descending":return function(P,I){var z=O(P.v),U=O(I.v);return z===_?1:U===_?-1:U-z}}}(m,y)),f=0;f<k;f++)M[f]=S[f].i;return M}(s,t,w.getDataToCoordFunc(v,h,a,t),n),p=i(h.transforms,s),c={};for(r=0;r<o.length;r++){var b=T.nestedProperty(h,o[r]),g=b.get(),d=new Array(n);for(l=0;l<n;l++)d[l]=g[u[l]];b.set(d)}for(l=0;l<n;l++)c[l]=p(u[l]);s._indexToPoints=c,h._length=n}}}},11506:function(N,L){L.version="2.28.0"},9330:function(N,L,e){var T,w=e(90386);T=function(){return function(){var i={7386:function(h,s,t){h.exports={alpha_shape:t(2350),convex_hull:t(5537),delaunay_triangulate:t(4419),gl_cone3d:t(1140),gl_error3d:t(3110),gl_heatmap2d:t(6386),gl_line3d:t(6086),gl_mesh3d:t(8116),gl_plot2d:t(2117),gl_plot3d:t(1059),gl_pointcloud2d:t(8271),gl_scatter3d:t(2182),gl_select_box:t(6623),gl_spikes2d:t(3050),gl_streamtube3d:t(7307),gl_surface3d:t(3754),ndarray:t(5050),ndarray_linear_interpolate:t(3581)}},2146:function(h,s,t){function a(pe,be){for(var Me=0;Me<be.length;Me++){var De=be[Me];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(pe,De.key,De)}}function n(pe,be){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Me,De){return Me.__proto__=De,Me},n(pe,be)}function r(pe){if(pe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pe}function l(pe){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(be){return be.__proto__||Object.getPrototypeOf(be)},l(pe)}function o(pe){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},o(pe)}var u=t(3910),p=t(3187),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=d,s.h2=50;var b=2147483647;function g(pe){if(pe>b)throw new RangeError('The value "'+pe+'" is invalid for option "size"');var be=new Uint8Array(pe);return Object.setPrototypeOf(be,d.prototype),be}function d(pe,be,Me){if(typeof pe=="number"){if(typeof be=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(pe)}return m(pe,be,Me)}function m(pe,be,Me){if(typeof pe=="string")return function(Be,Ye){if(typeof Ye=="string"&&Ye!==""||(Ye="utf8"),!d.isEncoding(Ye))throw new TypeError("Unknown encoding: "+Ye);var We=0|M(Be,Ye),et=g(We),ft=et.write(Be,Ye);return ft!==We&&(et=et.slice(0,ft)),et}(pe,be);if(ArrayBuffer.isView(pe))return function(Be){if(Le(Be,Uint8Array)){var Ye=new Uint8Array(Be);return f(Ye.buffer,Ye.byteOffset,Ye.byteLength)}return k(Be)}(pe);if(pe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+o(pe));if(Le(pe,ArrayBuffer)||pe&&Le(pe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Le(pe,SharedArrayBuffer)||pe&&Le(pe.buffer,SharedArrayBuffer)))return f(pe,be,Me);if(typeof pe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var De=pe.valueOf&&pe.valueOf();if(De!=null&&De!==pe)return d.from(De,be,Me);var Ne=function(Be){if(d.isBuffer(Be)){var Ye=0|S(Be.length),We=g(Ye);return We.length===0||Be.copy(We,0,0,Ye),We}return Be.length!==void 0?typeof Be.length!="number"||we(Be.length)?g(0):k(Be):Be.type==="Buffer"&&Array.isArray(Be.data)?k(Be.data):void 0}(pe);if(Ne)return Ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof pe[Symbol.toPrimitive]=="function")return d.from(pe[Symbol.toPrimitive]("string"),be,Me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+o(pe))}function x(pe){if(typeof pe!="number")throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function y(pe){return x(pe),g(pe<0?0:0|S(pe))}function k(pe){for(var be=pe.length<0?0:0|S(pe.length),Me=g(be),De=0;De<be;De+=1)Me[De]=255&pe[De];return Me}function f(pe,be,Me){if(be<0||pe.byteLength<be)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<be+(Me||0))throw new RangeError('"length" is outside of buffer bounds');var De;return De=be===void 0&&Me===void 0?new Uint8Array(pe):Me===void 0?new Uint8Array(pe,be):new Uint8Array(pe,be,Me),Object.setPrototypeOf(De,d.prototype),De}function S(pe){if(pe>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return 0|pe}function M(pe,be){if(d.isBuffer(pe))return pe.length;if(ArrayBuffer.isView(pe)||Le(pe,ArrayBuffer))return pe.byteLength;if(typeof pe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+o(pe));var Me=pe.length,De=arguments.length>2&&arguments[2]===!0;if(!De&&Me===0)return 0;for(var Ne=!1;;)switch(be){case"ascii":case"latin1":case"binary":return Me;case"utf8":case"utf-8":return le(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Me;case"hex":return Me>>>1;case"base64":return ue(pe).length;default:if(Ne)return De?-1:le(pe).length;be=(""+be).toLowerCase(),Ne=!0}}function E(pe,be,Me){var De=!1;if((be===void 0||be<0)&&(be=0),be>this.length||((Me===void 0||Me>this.length)&&(Me=this.length),Me<=0)||(Me>>>=0)<=(be>>>=0))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return J(this,be,Me);case"utf8":case"utf-8":return V(this,be,Me);case"ascii":return te(this,be,Me);case"latin1":case"binary":return $(this,be,Me);case"base64":return F(this,be,Me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,be,Me);default:if(De)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),De=!0}}function O(pe,be,Me){var De=pe[be];pe[be]=pe[Me],pe[Me]=De}function P(pe,be,Me,De,Ne){if(pe.length===0)return-1;if(typeof Me=="string"?(De=Me,Me=0):Me>2147483647?Me=2147483647:Me<-2147483648&&(Me=-2147483648),we(Me=+Me)&&(Me=Ne?0:pe.length-1),Me<0&&(Me=pe.length+Me),Me>=pe.length){if(Ne)return-1;Me=pe.length-1}else if(Me<0){if(!Ne)return-1;Me=0}if(typeof be=="string"&&(be=d.from(be,De)),d.isBuffer(be))return be.length===0?-1:I(pe,be,Me,De,Ne);if(typeof be=="number")return be&=255,typeof Uint8Array.prototype.indexOf=="function"?Ne?Uint8Array.prototype.indexOf.call(pe,be,Me):Uint8Array.prototype.lastIndexOf.call(pe,be,Me):I(pe,[be],Me,De,Ne);throw new TypeError("val must be string, number or Buffer")}function I(pe,be,Me,De,Ne){var Be,Ye=1,We=pe.length,et=be.length;if(De!==void 0&&((De=String(De).toLowerCase())==="ucs2"||De==="ucs-2"||De==="utf16le"||De==="utf-16le")){if(pe.length<2||be.length<2)return-1;Ye=2,We/=2,et/=2,Me/=2}function ft(_t,it){return Ye===1?_t[it]:_t.readUInt16BE(it*Ye)}if(Ne){var ht=-1;for(Be=Me;Be<We;Be++)if(ft(pe,Be)===ft(be,ht===-1?0:Be-ht)){if(ht===-1&&(ht=Be),Be-ht+1===et)return ht*Ye}else ht!==-1&&(Be-=Be-ht),ht=-1}else for(Me+et>We&&(Me=We-et),Be=Me;Be>=0;Be--){for(var mt=!0,Mt=0;Mt<et;Mt++)if(ft(pe,Be+Mt)!==ft(be,Mt)){mt=!1;break}if(mt)return Be}return-1}function z(pe,be,Me,De){Me=Number(Me)||0;var Ne=pe.length-Me;De?(De=Number(De))>Ne&&(De=Ne):De=Ne;var Be,Ye=be.length;for(De>Ye/2&&(De=Ye/2),Be=0;Be<De;++Be){var We=parseInt(be.substr(2*Be,2),16);if(we(We))return Be;pe[Me+Be]=We}return Be}function U(pe,be,Me,De){return de(le(be,pe.length-Me),pe,Me,De)}function R(pe,be,Me,De){return de(function(Ne){for(var Be=[],Ye=0;Ye<Ne.length;++Ye)Be.push(255&Ne.charCodeAt(Ye));return Be}(be),pe,Me,De)}function j(pe,be,Me,De){return de(ue(be),pe,Me,De)}function Z(pe,be,Me,De){return de(function(Ne,Be){for(var Ye,We,et,ft=[],ht=0;ht<Ne.length&&!((Be-=2)<0);++ht)We=(Ye=Ne.charCodeAt(ht))>>8,et=Ye%256,ft.push(et),ft.push(We);return ft}(be,pe.length-Me),pe,Me,De)}function F(pe,be,Me){return be===0&&Me===pe.length?u.fromByteArray(pe):u.fromByteArray(pe.slice(be,Me))}function V(pe,be,Me){Me=Math.min(pe.length,Me);for(var De=[],Ne=be;Ne<Me;){var Be=pe[Ne],Ye=null,We=Be>239?4:Be>223?3:Be>191?2:1;if(Ne+We<=Me){var et=void 0,ft=void 0,ht=void 0,mt=void 0;switch(We){case 1:Be<128&&(Ye=Be);break;case 2:(192&(et=pe[Ne+1]))==128&&(mt=(31&Be)<<6|63&et)>127&&(Ye=mt);break;case 3:et=pe[Ne+1],ft=pe[Ne+2],(192&et)==128&&(192&ft)==128&&(mt=(15&Be)<<12|(63&et)<<6|63&ft)>2047&&(mt<55296||mt>57343)&&(Ye=mt);break;case 4:et=pe[Ne+1],ft=pe[Ne+2],ht=pe[Ne+3],(192&et)==128&&(192&ft)==128&&(192&ht)==128&&(mt=(15&Be)<<18|(63&et)<<12|(63&ft)<<6|63&ht)>65535&&mt<1114112&&(Ye=mt)}}Ye===null?(Ye=65533,We=1):Ye>65535&&(Ye-=65536,De.push(Ye>>>10&1023|55296),Ye=56320|1023&Ye),De.push(Ye),Ne+=We}return function(Mt){var _t=Mt.length;if(_t<=H)return String.fromCharCode.apply(String,Mt);for(var it="",st=0;st<_t;)it+=String.fromCharCode.apply(String,Mt.slice(st,st+=H));return it}(De)}d.TYPED_ARRAY_SUPPORT=function(){try{var pe=new Uint8Array(1),be={foo:function(){return 42}};return Object.setPrototypeOf(be,Uint8Array.prototype),Object.setPrototypeOf(pe,be),pe.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(pe,be,Me){return m(pe,be,Me)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(pe,be,Me){return function(De,Ne,Be){return x(De),De<=0?g(De):Ne!==void 0?typeof Be=="string"?g(De).fill(Ne,Be):g(De).fill(Ne):g(De)}(pe,be,Me)},d.allocUnsafe=function(pe){return y(pe)},d.allocUnsafeSlow=function(pe){return y(pe)},d.isBuffer=function(pe){return pe!=null&&pe._isBuffer===!0&&pe!==d.prototype},d.compare=function(pe,be){if(Le(pe,Uint8Array)&&(pe=d.from(pe,pe.offset,pe.byteLength)),Le(be,Uint8Array)&&(be=d.from(be,be.offset,be.byteLength)),!d.isBuffer(pe)||!d.isBuffer(be))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pe===be)return 0;for(var Me=pe.length,De=be.length,Ne=0,Be=Math.min(Me,De);Ne<Be;++Ne)if(pe[Ne]!==be[Ne]){Me=pe[Ne],De=be[Ne];break}return Me<De?-1:De<Me?1:0},d.isEncoding=function(pe){switch(String(pe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(pe,be){if(!Array.isArray(pe))throw new TypeError('"list" argument must be an Array of Buffers');if(pe.length===0)return d.alloc(0);var Me;if(be===void 0)for(be=0,Me=0;Me<pe.length;++Me)be+=pe[Me].length;var De=d.allocUnsafe(be),Ne=0;for(Me=0;Me<pe.length;++Me){var Be=pe[Me];if(Le(Be,Uint8Array))Ne+Be.length>De.length?(d.isBuffer(Be)||(Be=d.from(Be)),Be.copy(De,Ne)):Uint8Array.prototype.set.call(De,Be,Ne);else{if(!d.isBuffer(Be))throw new TypeError('"list" argument must be an Array of Buffers');Be.copy(De,Ne)}Ne+=Be.length}return De},d.byteLength=M,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var pe=this.length;if(pe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var be=0;be<pe;be+=2)O(this,be,be+1);return this},d.prototype.swap32=function(){var pe=this.length;if(pe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var be=0;be<pe;be+=4)O(this,be,be+3),O(this,be+1,be+2);return this},d.prototype.swap64=function(){var pe=this.length;if(pe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var be=0;be<pe;be+=8)O(this,be,be+7),O(this,be+1,be+6),O(this,be+2,be+5),O(this,be+3,be+4);return this},d.prototype.toString=function(){var pe=this.length;return pe===0?"":arguments.length===0?V(this,0,pe):E.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(pe){if(!d.isBuffer(pe))throw new TypeError("Argument must be a Buffer");return this===pe||d.compare(this,pe)===0},d.prototype.inspect=function(){var pe="",be=s.h2;return pe=this.toString("hex",0,be).replace(/(.{2})/g,"$1 ").trim(),this.length>be&&(pe+=" ... "),"<Buffer "+pe+">"},c&&(d.prototype[c]=d.prototype.inspect),d.prototype.compare=function(pe,be,Me,De,Ne){if(Le(pe,Uint8Array)&&(pe=d.from(pe,pe.offset,pe.byteLength)),!d.isBuffer(pe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+o(pe));if(be===void 0&&(be=0),Me===void 0&&(Me=pe?pe.length:0),De===void 0&&(De=0),Ne===void 0&&(Ne=this.length),be<0||Me>pe.length||De<0||Ne>this.length)throw new RangeError("out of range index");if(De>=Ne&&be>=Me)return 0;if(De>=Ne)return-1;if(be>=Me)return 1;if(this===pe)return 0;for(var Be=(Ne>>>=0)-(De>>>=0),Ye=(Me>>>=0)-(be>>>=0),We=Math.min(Be,Ye),et=this.slice(De,Ne),ft=pe.slice(be,Me),ht=0;ht<We;++ht)if(et[ht]!==ft[ht]){Be=et[ht],Ye=ft[ht];break}return Be<Ye?-1:Ye<Be?1:0},d.prototype.includes=function(pe,be,Me){return this.indexOf(pe,be,Me)!==-1},d.prototype.indexOf=function(pe,be,Me){return P(this,pe,be,Me,!0)},d.prototype.lastIndexOf=function(pe,be,Me){return P(this,pe,be,Me,!1)},d.prototype.write=function(pe,be,Me,De){if(be===void 0)De="utf8",Me=this.length,be=0;else if(Me===void 0&&typeof be=="string")De=be,Me=this.length,be=0;else{if(!isFinite(be))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");be>>>=0,isFinite(Me)?(Me>>>=0,De===void 0&&(De="utf8")):(De=Me,Me=void 0)}var Ne=this.length-be;if((Me===void 0||Me>Ne)&&(Me=Ne),pe.length>0&&(Me<0||be<0)||be>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");for(var Be=!1;;)switch(De){case"hex":return z(this,pe,be,Me);case"utf8":case"utf-8":return U(this,pe,be,Me);case"ascii":case"latin1":case"binary":return R(this,pe,be,Me);case"base64":return j(this,pe,be,Me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,pe,be,Me);default:if(Be)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Be=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;function te(pe,be,Me){var De="";Me=Math.min(pe.length,Me);for(var Ne=be;Ne<Me;++Ne)De+=String.fromCharCode(127&pe[Ne]);return De}function $(pe,be,Me){var De="";Me=Math.min(pe.length,Me);for(var Ne=be;Ne<Me;++Ne)De+=String.fromCharCode(pe[Ne]);return De}function J(pe,be,Me){var De=pe.length;(!be||be<0)&&(be=0),(!Me||Me<0||Me>De)&&(Me=De);for(var Ne="",Be=be;Be<Me;++Be)Ne+=Ee[pe[Be]];return Ne}function X(pe,be,Me){for(var De=pe.slice(be,Me),Ne="",Be=0;Be<De.length-1;Be+=2)Ne+=String.fromCharCode(De[Be]+256*De[Be+1]);return Ne}function K(pe,be,Me){if(pe%1!=0||pe<0)throw new RangeError("offset is not uint");if(pe+be>Me)throw new RangeError("Trying to access beyond buffer length")}function ee(pe,be,Me,De,Ne,Be){if(!d.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(be>Ne||be<Be)throw new RangeError('"value" argument is out of bounds');if(Me+De>pe.length)throw new RangeError("Index out of range")}function ie(pe,be,Me,De,Ne){ye(be,De,Ne,pe,Me,7);var Be=Number(be&BigInt(4294967295));pe[Me++]=Be,Be>>=8,pe[Me++]=Be,Be>>=8,pe[Me++]=Be,Be>>=8,pe[Me++]=Be;var Ye=Number(be>>BigInt(32)&BigInt(4294967295));return pe[Me++]=Ye,Ye>>=8,pe[Me++]=Ye,Ye>>=8,pe[Me++]=Ye,Ye>>=8,pe[Me++]=Ye,Me}function ae(pe,be,Me,De,Ne){ye(be,De,Ne,pe,Me,7);var Be=Number(be&BigInt(4294967295));pe[Me+7]=Be,Be>>=8,pe[Me+6]=Be,Be>>=8,pe[Me+5]=Be,Be>>=8,pe[Me+4]=Be;var Ye=Number(be>>BigInt(32)&BigInt(4294967295));return pe[Me+3]=Ye,Ye>>=8,pe[Me+2]=Ye,Ye>>=8,pe[Me+1]=Ye,Ye>>=8,pe[Me]=Ye,Me+8}function oe(pe,be,Me,De,Ne,Be){if(Me+De>pe.length)throw new RangeError("Index out of range");if(Me<0)throw new RangeError("Index out of range")}function fe(pe,be,Me,De,Ne){return be=+be,Me>>>=0,Ne||oe(pe,0,Me,4),p.write(pe,be,Me,De,23,4),Me+4}function ge(pe,be,Me,De,Ne){return be=+be,Me>>>=0,Ne||oe(pe,0,Me,8),p.write(pe,be,Me,De,52,8),Me+8}d.prototype.slice=function(pe,be){var Me=this.length;(pe=~~pe)<0?(pe+=Me)<0&&(pe=0):pe>Me&&(pe=Me),(be=be===void 0?Me:~~be)<0?(be+=Me)<0&&(be=0):be>Me&&(be=Me),be<pe&&(be=pe);var De=this.subarray(pe,be);return Object.setPrototypeOf(De,d.prototype),De},d.prototype.readUintLE=d.prototype.readUIntLE=function(pe,be,Me){pe>>>=0,be>>>=0,Me||K(pe,be,this.length);for(var De=this[pe],Ne=1,Be=0;++Be<be&&(Ne*=256);)De+=this[pe+Be]*Ne;return De},d.prototype.readUintBE=d.prototype.readUIntBE=function(pe,be,Me){pe>>>=0,be>>>=0,Me||K(pe,be,this.length);for(var De=this[pe+--be],Ne=1;be>0&&(Ne*=256);)De+=this[pe+--be]*Ne;return De},d.prototype.readUint8=d.prototype.readUInt8=function(pe,be){return pe>>>=0,be||K(pe,1,this.length),this[pe]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(pe,be){return pe>>>=0,be||K(pe,2,this.length),this[pe]|this[pe+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(pe,be){return pe>>>=0,be||K(pe,2,this.length),this[pe]<<8|this[pe+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(pe,be){return pe>>>=0,be||K(pe,4,this.length),(this[pe]|this[pe+1]<<8|this[pe+2]<<16)+16777216*this[pe+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(pe,be){return pe>>>=0,be||K(pe,4,this.length),16777216*this[pe]+(this[pe+1]<<16|this[pe+2]<<8|this[pe+3])},d.prototype.readBigUInt64LE=Oe(function(pe){Ce(pe>>>=0,"offset");var be=this[pe],Me=this[pe+7];be!==void 0&&Me!==void 0||ke(pe,this.length-8);var De=be+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24),Ne=this[++pe]+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+Me*Math.pow(2,24);return BigInt(De)+(BigInt(Ne)<<BigInt(32))}),d.prototype.readBigUInt64BE=Oe(function(pe){Ce(pe>>>=0,"offset");var be=this[pe],Me=this[pe+7];be!==void 0&&Me!==void 0||ke(pe,this.length-8);var De=be*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe],Ne=this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+Me;return(BigInt(De)<<BigInt(32))+BigInt(Ne)}),d.prototype.readIntLE=function(pe,be,Me){pe>>>=0,be>>>=0,Me||K(pe,be,this.length);for(var De=this[pe],Ne=1,Be=0;++Be<be&&(Ne*=256);)De+=this[pe+Be]*Ne;return De>=(Ne*=128)&&(De-=Math.pow(2,8*be)),De},d.prototype.readIntBE=function(pe,be,Me){pe>>>=0,be>>>=0,Me||K(pe,be,this.length);for(var De=be,Ne=1,Be=this[pe+--De];De>0&&(Ne*=256);)Be+=this[pe+--De]*Ne;return Be>=(Ne*=128)&&(Be-=Math.pow(2,8*be)),Be},d.prototype.readInt8=function(pe,be){return pe>>>=0,be||K(pe,1,this.length),128&this[pe]?-1*(255-this[pe]+1):this[pe]},d.prototype.readInt16LE=function(pe,be){pe>>>=0,be||K(pe,2,this.length);var Me=this[pe]|this[pe+1]<<8;return 32768&Me?4294901760|Me:Me},d.prototype.readInt16BE=function(pe,be){pe>>>=0,be||K(pe,2,this.length);var Me=this[pe+1]|this[pe]<<8;return 32768&Me?4294901760|Me:Me},d.prototype.readInt32LE=function(pe,be){return pe>>>=0,be||K(pe,4,this.length),this[pe]|this[pe+1]<<8|this[pe+2]<<16|this[pe+3]<<24},d.prototype.readInt32BE=function(pe,be){return pe>>>=0,be||K(pe,4,this.length),this[pe]<<24|this[pe+1]<<16|this[pe+2]<<8|this[pe+3]},d.prototype.readBigInt64LE=Oe(function(pe){Ce(pe>>>=0,"offset");var be=this[pe],Me=this[pe+7];be!==void 0&&Me!==void 0||ke(pe,this.length-8);var De=this[pe+4]+this[pe+5]*Math.pow(2,8)+this[pe+6]*Math.pow(2,16)+(Me<<24);return(BigInt(De)<<BigInt(32))+BigInt(be+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24))}),d.prototype.readBigInt64BE=Oe(function(pe){Ce(pe>>>=0,"offset");var be=this[pe],Me=this[pe+7];be!==void 0&&Me!==void 0||ke(pe,this.length-8);var De=(be<<24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe];return(BigInt(De)<<BigInt(32))+BigInt(this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+Me)}),d.prototype.readFloatLE=function(pe,be){return pe>>>=0,be||K(pe,4,this.length),p.read(this,pe,!0,23,4)},d.prototype.readFloatBE=function(pe,be){return pe>>>=0,be||K(pe,4,this.length),p.read(this,pe,!1,23,4)},d.prototype.readDoubleLE=function(pe,be){return pe>>>=0,be||K(pe,8,this.length),p.read(this,pe,!0,52,8)},d.prototype.readDoubleBE=function(pe,be){return pe>>>=0,be||K(pe,8,this.length),p.read(this,pe,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(pe,be,Me,De){pe=+pe,be>>>=0,Me>>>=0,De||ee(this,pe,be,Me,Math.pow(2,8*Me)-1,0);var Ne=1,Be=0;for(this[be]=255&pe;++Be<Me&&(Ne*=256);)this[be+Be]=pe/Ne&255;return be+Me},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(pe,be,Me,De){pe=+pe,be>>>=0,Me>>>=0,De||ee(this,pe,be,Me,Math.pow(2,8*Me)-1,0);var Ne=Me-1,Be=1;for(this[be+Ne]=255&pe;--Ne>=0&&(Be*=256);)this[be+Ne]=pe/Be&255;return be+Me},d.prototype.writeUint8=d.prototype.writeUInt8=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,1,255,0),this[be]=255&pe,be+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,2,65535,0),this[be]=255&pe,this[be+1]=pe>>>8,be+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,2,65535,0),this[be]=pe>>>8,this[be+1]=255&pe,be+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,4,4294967295,0),this[be+3]=pe>>>24,this[be+2]=pe>>>16,this[be+1]=pe>>>8,this[be]=255&pe,be+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,4,4294967295,0),this[be]=pe>>>24,this[be+1]=pe>>>16,this[be+2]=pe>>>8,this[be+3]=255&pe,be+4},d.prototype.writeBigUInt64LE=Oe(function(pe){return ie(this,pe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Oe(function(pe){return ae(this,pe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(pe,be,Me,De){if(pe=+pe,be>>>=0,!De){var Ne=Math.pow(2,8*Me-1);ee(this,pe,be,Me,Ne-1,-Ne)}var Be=0,Ye=1,We=0;for(this[be]=255&pe;++Be<Me&&(Ye*=256);)pe<0&&We===0&&this[be+Be-1]!==0&&(We=1),this[be+Be]=(pe/Ye>>0)-We&255;return be+Me},d.prototype.writeIntBE=function(pe,be,Me,De){if(pe=+pe,be>>>=0,!De){var Ne=Math.pow(2,8*Me-1);ee(this,pe,be,Me,Ne-1,-Ne)}var Be=Me-1,Ye=1,We=0;for(this[be+Be]=255&pe;--Be>=0&&(Ye*=256);)pe<0&&We===0&&this[be+Be+1]!==0&&(We=1),this[be+Be]=(pe/Ye>>0)-We&255;return be+Me},d.prototype.writeInt8=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,1,127,-128),pe<0&&(pe=255+pe+1),this[be]=255&pe,be+1},d.prototype.writeInt16LE=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,2,32767,-32768),this[be]=255&pe,this[be+1]=pe>>>8,be+2},d.prototype.writeInt16BE=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,2,32767,-32768),this[be]=pe>>>8,this[be+1]=255&pe,be+2},d.prototype.writeInt32LE=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,4,2147483647,-2147483648),this[be]=255&pe,this[be+1]=pe>>>8,this[be+2]=pe>>>16,this[be+3]=pe>>>24,be+4},d.prototype.writeInt32BE=function(pe,be,Me){return pe=+pe,be>>>=0,Me||ee(this,pe,be,4,2147483647,-2147483648),pe<0&&(pe=4294967295+pe+1),this[be]=pe>>>24,this[be+1]=pe>>>16,this[be+2]=pe>>>8,this[be+3]=255&pe,be+4},d.prototype.writeBigInt64LE=Oe(function(pe){return ie(this,pe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Oe(function(pe){return ae(this,pe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(pe,be,Me){return fe(this,pe,be,!0,Me)},d.prototype.writeFloatBE=function(pe,be,Me){return fe(this,pe,be,!1,Me)},d.prototype.writeDoubleLE=function(pe,be,Me){return ge(this,pe,be,!0,Me)},d.prototype.writeDoubleBE=function(pe,be,Me){return ge(this,pe,be,!1,Me)},d.prototype.copy=function(pe,be,Me,De){if(!d.isBuffer(pe))throw new TypeError("argument should be a Buffer");if(Me||(Me=0),De||De===0||(De=this.length),be>=pe.length&&(be=pe.length),be||(be=0),De>0&&De<Me&&(De=Me),De===Me||pe.length===0||this.length===0)return 0;if(be<0)throw new RangeError("targetStart out of bounds");if(Me<0||Me>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),pe.length-be<De-Me&&(De=pe.length-be+Me);var Ne=De-Me;return this===pe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(be,Me,De):Uint8Array.prototype.set.call(pe,this.subarray(Me,De),be),Ne},d.prototype.fill=function(pe,be,Me,De){if(typeof pe=="string"){if(typeof be=="string"?(De=be,be=0,Me=this.length):typeof Me=="string"&&(De=Me,Me=this.length),De!==void 0&&typeof De!="string")throw new TypeError("encoding must be a string");if(typeof De=="string"&&!d.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(pe.length===1){var Ne=pe.charCodeAt(0);(De==="utf8"&&Ne<128||De==="latin1")&&(pe=Ne)}}else typeof pe=="number"?pe&=255:typeof pe=="boolean"&&(pe=Number(pe));if(be<0||this.length<be||this.length<Me)throw new RangeError("Out of range index");if(Me<=be)return this;var Be;if(be>>>=0,Me=Me===void 0?this.length:Me>>>0,pe||(pe=0),typeof pe=="number")for(Be=be;Be<Me;++Be)this[Be]=pe;else{var Ye=d.isBuffer(pe)?pe:d.from(pe,De),We=Ye.length;if(We===0)throw new TypeError('The value "'+pe+'" is invalid for argument "value"');for(Be=0;Be<Me-be;++Be)this[Be+be]=Ye[Be%We]}return this};var ve={};function xe(pe,be,Me){ve[pe]=function(De){(function(ht,mt){if(typeof mt!="function"&&mt!==null)throw new TypeError("Super expression must either be null or a function");ht.prototype=Object.create(mt&&mt.prototype,{constructor:{value:ht,writable:!0,configurable:!0}}),Object.defineProperty(ht,"prototype",{writable:!1}),mt&&n(ht,mt)})(ft,De);var Ne,Be,Ye,We,et=(Ye=ft,We=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ht,mt=l(Ye);if(We){var Mt=l(this).constructor;ht=Reflect.construct(mt,arguments,Mt)}else ht=mt.apply(this,arguments);return function(_t,it){if(it&&(o(it)==="object"||typeof it=="function"))return it;if(it!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r(_t)}(this,ht)});function ft(){var ht;return function(mt,Mt){if(!(mt instanceof Mt))throw new TypeError("Cannot call a class as a function")}(this,ft),ht=et.call(this),Object.defineProperty(r(ht),"message",{value:be.apply(r(ht),arguments),writable:!0,configurable:!0}),ht.name="".concat(ht.name," [").concat(pe,"]"),ht.stack,delete ht.name,ht}return Ne=ft,(Be=[{key:"code",get:function(){return pe},set:function(ht){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ht,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(pe,"]: ").concat(this.message)}}])&&a(Ne.prototype,Be),Object.defineProperty(Ne,"prototype",{writable:!1}),ft}(Me)}function _e(pe){for(var be="",Me=pe.length,De=pe[0]==="-"?1:0;Me>=De+4;Me-=3)be="_".concat(pe.slice(Me-3,Me)).concat(be);return"".concat(pe.slice(0,Me)).concat(be)}function ye(pe,be,Me,De,Ne,Be){if(pe>Me||pe<be){var Ye,We=typeof be=="bigint"?"n":"";throw Ye=Be>3?be===0||be===BigInt(0)?">= 0".concat(We," and < 2").concat(We," ** ").concat(8*(Be+1)).concat(We):">= -(2".concat(We," ** ").concat(8*(Be+1)-1).concat(We,") and < 2 ** ")+"".concat(8*(Be+1)-1).concat(We):">= ".concat(be).concat(We," and <= ").concat(Me).concat(We),new ve.ERR_OUT_OF_RANGE("value",Ye,pe)}(function(et,ft,ht){Ce(ft,"offset"),et[ft]!==void 0&&et[ft+ht]!==void 0||ke(ft,et.length-(ht+1))})(De,Ne,Be)}function Ce(pe,be){if(typeof pe!="number")throw new ve.ERR_INVALID_ARG_TYPE(be,"number",pe)}function ke(pe,be,Me){throw Math.floor(pe)!==pe?(Ce(pe,Me),new ve.ERR_OUT_OF_RANGE(Me||"offset","an integer",pe)):be<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE(Me||"offset",">= ".concat(Me?1:0," and <= ").concat(be),pe)}xe("ERR_BUFFER_OUT_OF_BOUNDS",function(pe){return pe?"".concat(pe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),xe("ERR_INVALID_ARG_TYPE",function(pe,be){return'The "'.concat(pe,'" argument must be of type number. Received type ').concat(o(be))},TypeError),xe("ERR_OUT_OF_RANGE",function(pe,be,Me){var De='The value of "'.concat(pe,'" is out of range.'),Ne=Me;return Number.isInteger(Me)&&Math.abs(Me)>Math.pow(2,32)?Ne=_e(String(Me)):typeof Me=="bigint"&&(Ne=String(Me),(Me>Math.pow(BigInt(2),BigInt(32))||Me<-Math.pow(BigInt(2),BigInt(32)))&&(Ne=_e(Ne)),Ne+="n"),De+" It must be ".concat(be,". Received ").concat(Ne)},RangeError);var Te=/[^+/0-9A-Za-z-_]/g;function le(pe,be){var Me;be=be||1/0;for(var De=pe.length,Ne=null,Be=[],Ye=0;Ye<De;++Ye){if((Me=pe.charCodeAt(Ye))>55295&&Me<57344){if(!Ne){if(Me>56319){(be-=3)>-1&&Be.push(239,191,189);continue}if(Ye+1===De){(be-=3)>-1&&Be.push(239,191,189);continue}Ne=Me;continue}if(Me<56320){(be-=3)>-1&&Be.push(239,191,189),Ne=Me;continue}Me=65536+(Ne-55296<<10|Me-56320)}else Ne&&(be-=3)>-1&&Be.push(239,191,189);if(Ne=null,Me<128){if((be-=1)<0)break;Be.push(Me)}else if(Me<2048){if((be-=2)<0)break;Be.push(Me>>6|192,63&Me|128)}else if(Me<65536){if((be-=3)<0)break;Be.push(Me>>12|224,Me>>6&63|128,63&Me|128)}else{if(!(Me<1114112))throw new Error("Invalid code point");if((be-=4)<0)break;Be.push(Me>>18|240,Me>>12&63|128,Me>>6&63|128,63&Me|128)}}return Be}function ue(pe){return u.toByteArray(function(be){if((be=(be=be.split("=")[0]).trim().replace(Te,"")).length<2)return"";for(;be.length%4!=0;)be+="=";return be}(pe))}function de(pe,be,Me,De){var Ne;for(Ne=0;Ne<De&&!(Ne+Me>=be.length||Ne>=pe.length);++Ne)be[Ne+Me]=pe[Ne];return Ne}function Le(pe,be){return pe instanceof be||pe!=null&&pe.constructor!=null&&pe.constructor.name!=null&&pe.constructor.name===be.name}function we(pe){return pe!=pe}var Ee=function(){for(var pe="0123456789abcdef",be=new Array(256),Me=0;Me<16;++Me)for(var De=16*Me,Ne=0;Ne<16;++Ne)be[De+Ne]=pe[Me]+pe[Ne];return be}();function Oe(pe){return typeof BigInt>"u"?Fe:pe}function Fe(){throw new Error("BigInt not supported")}},2321:function(h){h.exports=n,h.exports.isMobile=n,h.exports.default=n;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,a=/android|ipad|playbook|silk/i;function n(r){r||(r={});var l=r.ua;if(l||typeof navigator>"u"||(l=navigator.userAgent),l&&l.headers&&typeof l.headers["user-agent"]=="string"&&(l=l.headers["user-agent"]),typeof l!="string")return!1;var o=s.test(l)&&!t.test(l)||!!r.tablet&&a.test(l);return!o&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&l.indexOf("Macintosh")!==-1&&l.indexOf("Safari")!==-1&&(o=!0),o}},3910:function(h,s){s.byteLength=function(p){var c=o(p),b=c[0],g=c[1];return 3*(b+g)/4-g},s.toByteArray=function(p){var c,b,g=o(p),d=g[0],m=g[1],x=new n(function(f,S,M){return 3*(S+M)/4-M}(0,d,m)),y=0,k=m>0?d-4:d;for(b=0;b<k;b+=4)c=a[p.charCodeAt(b)]<<18|a[p.charCodeAt(b+1)]<<12|a[p.charCodeAt(b+2)]<<6|a[p.charCodeAt(b+3)],x[y++]=c>>16&255,x[y++]=c>>8&255,x[y++]=255&c;return m===2&&(c=a[p.charCodeAt(b)]<<2|a[p.charCodeAt(b+1)]>>4,x[y++]=255&c),m===1&&(c=a[p.charCodeAt(b)]<<10|a[p.charCodeAt(b+1)]<<4|a[p.charCodeAt(b+2)]>>2,x[y++]=c>>8&255,x[y++]=255&c),x},s.fromByteArray=function(p){for(var c,b=p.length,g=b%3,d=[],m=16383,x=0,y=b-g;x<y;x+=m)d.push(u(p,x,x+m>y?y:x+m));return g===1?(c=p[b-1],d.push(t[c>>2]+t[c<<4&63]+"==")):g===2&&(c=(p[b-2]<<8)+p[b-1],d.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),d.join("")};for(var t=[],a=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)t[l]=r[l],a[r.charCodeAt(l)]=l;function o(p){var c=p.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=p.indexOf("=");return b===-1&&(b=c),[b,b===c?0:4-b%4]}function u(p,c,b){for(var g,d,m=[],x=c;x<b;x+=3)g=(p[x]<<16&16711680)+(p[x+1]<<8&65280)+(255&p[x+2]),m.push(t[(d=g)>>18&63]+t[d>>12&63]+t[d>>6&63]+t[63&d]);return m.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},3187:function(h,s){s.read=function(t,a,n,r,l){var o,u,p=8*l-r-1,c=(1<<p)-1,b=c>>1,g=-7,d=n?l-1:0,m=n?-1:1,x=t[a+d];for(d+=m,o=x&(1<<-g)-1,x>>=-g,g+=p;g>0;o=256*o+t[a+d],d+=m,g-=8);for(u=o&(1<<-g)-1,o>>=-g,g+=r;g>0;u=256*u+t[a+d],d+=m,g-=8);if(o===0)o=1-b;else{if(o===c)return u?NaN:1/0*(x?-1:1);u+=Math.pow(2,r),o-=b}return(x?-1:1)*u*Math.pow(2,o-r)},s.write=function(t,a,n,r,l,o){var u,p,c,b=8*o-l-1,g=(1<<b)-1,d=g>>1,m=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=r?0:o-1,y=r?1:-1,k=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(p=isNaN(a)?1:0,u=g):(u=Math.floor(Math.log(a)/Math.LN2),a*(c=Math.pow(2,-u))<1&&(u--,c*=2),(a+=u+d>=1?m/c:m*Math.pow(2,1-d))*c>=2&&(u++,c/=2),u+d>=g?(p=0,u=g):u+d>=1?(p=(a*c-1)*Math.pow(2,l),u+=d):(p=a*Math.pow(2,d-1)*Math.pow(2,l),u=0));l>=8;t[n+x]=255&p,x+=y,p/=256,l-=8);for(u=u<<l|p,b+=l;b>0;t[n+x]=255&u,x+=y,u/=256,b-=8);t[n+x-y]|=128*k}},1152:function(h,s,t){h.exports=function(u){var p=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],b=u.up||[0,1,0],g=u.distanceLimits||[0,1/0],d=u.mode||"turntable",m=a(),x=n(),y=r();return m.setDistanceLimits(g[0],g[1]),m.lookAt(0,p,c,b),x.setDistanceLimits(g[0],g[1]),x.lookAt(0,p,c,b),y.setDistanceLimits(g[0],g[1]),y.lookAt(0,p,c,b),new l({turntable:m,orbit:x,matrix:y},d)};var a=t(3440),n=t(7774),r=t(9298);function l(u,p){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=p,this._active=u[p],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var o=l.prototype;o.flush=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].flush(u)},o.idle=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].idle(u)},o.lookAt=function(u,p,c,b){for(var g=this._controllerList,d=0;d<g.length;++d)g[d].lookAt(u,p,c,b)},o.rotate=function(u,p,c,b){for(var g=this._controllerList,d=0;d<g.length;++d)g[d].rotate(u,p,c,b)},o.pan=function(u,p,c,b){for(var g=this._controllerList,d=0;d<g.length;++d)g[d].pan(u,p,c,b)},o.translate=function(u,p,c,b){for(var g=this._controllerList,d=0;d<g.length;++d)g[d].translate(u,p,c,b)},o.setMatrix=function(u,p){for(var c=this._controllerList,b=0;b<c.length;++b)c[b].setMatrix(u,p)},o.setDistanceLimits=function(u,p){for(var c=this._controllerList,b=0;b<c.length;++b)c[b].setDistanceLimits(u,p)},o.setDistance=function(u,p){for(var c=this._controllerList,b=0;b<c.length;++b)c[b].setDistance(u,p)},o.recalcMatrix=function(u){this._active.recalcMatrix(u)},o.getDistance=function(u){return this._active.getDistance(u)},o.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},o.lastT=function(){return this._active.lastT()},o.setMode=function(u){if(u!==this._mode){var p=this._controllerNames.indexOf(u);if(!(p<0)){var c=this._active,b=this._controllerList[p],g=Math.max(c.lastT(),b.lastT());c.recalcMatrix(g),b.setMatrix(g,c.computedMatrix),this._active=b,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},o.getMode=function(){return this._mode}},8126:function(h,s,t){var a=typeof WeakMap>"u"?t(5346):WeakMap,n=t(5827),r=t(2944),l=new a;h.exports=function(o){var u=l.get(o),p=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!p||!o.isBuffer(p)){var c=n(o,new Float32Array([-1,-1,-1,4,4,-1]));(u=r(o,[{buffer:c,type:o.FLOAT,size:2}]))._triangleBuffer=c,l.set(o,u)}u.bind(),o.drawArrays(o.TRIANGLES,0,3),u.unbind()}},8008:function(h,s,t){var a=t(4930);h.exports=function(n,r,l){r=typeof r=="number"?r:1,l=l||": ";var o=n.split(/\r?\n/),u=String(o.length+r-1).length;return o.map(function(p,c){var b=c+r,g=String(b).length;return a(b,u-g)+l+p}).join(`
`)}},2153:function(h,s,t){h.exports=function(r){var l=r.length;if(l===0)return[];if(l===1)return[0];for(var o=r[0].length,u=[r[0]],p=[0],c=1;c<l;++c)if(u.push(r[c]),n(u,o)){if(p.push(c),p.length===o+1)return p}else u.pop();return p};var a=t(417);function n(r,l){for(var o=new Array(l+1),u=0;u<r.length;++u)o[u]=r[u];for(u=0;u<=r.length;++u){for(var p=r.length;p<=l;++p){for(var c=new Array(l),b=0;b<l;++b)c[b]=Math.pow(p+1-u,b);o[p]=c}if(a.apply(void 0,o))return!0}return!1}},4653:function(h,s,t){h.exports=function(r,l){return a(l).filter(function(o){for(var u=new Array(o.length),p=0;p<o.length;++p)u[p]=l[o[p]];return n(u)*r<1})};var a=t(4419),n=t(1778)},2350:function(h,s,t){h.exports=function(r,l){return n(a(r,l))};var a=t(4653),n=t(8691)},7896:function(h){h.exports=function(s){return atob(s)}},957:function(h,s,t){h.exports=function(r,l){for(var o=l.length,u=new Array(o+1),p=0;p<o;++p){for(var c=new Array(o+1),b=0;b<=o;++b)c[b]=r[b][p];u[p]=c}for(u[o]=new Array(o+1),p=0;p<=o;++p)u[o][p]=1;var g=new Array(o+1);for(p=0;p<o;++p)g[p]=l[p];g[o]=1;var d=a(u,g),m=n(d[o+1]);m===0&&(m=1);var x=new Array(o+1);for(p=0;p<=o;++p)x[p]=n(d[p])/m;return x};var a=t(6606);function n(r){for(var l=0,o=0;o<r.length;++o)l+=r[o];return l}},1539:function(h,s,t){var a=t(8524);h.exports=function(n,r){return a(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},8846:function(h){h.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},9189:function(h,s,t){var a=t(8524);h.exports=function(n,r){return a(n[0].mul(r[1]),n[1].mul(r[0]))}},5125:function(h,s,t){var a=t(234),n=t(3218),r=t(5514),l=t(2813),o=t(8524),u=t(9189);h.exports=function p(c,b){if(a(c))return b?u(c,p(b)):[c[0].clone(),c[1].clone()];var g,d,m=0;if(n(c))g=c.clone();else if(typeof c=="string")g=l(c);else{if(c===0)return[r(0),r(1)];if(c===Math.floor(c))g=r(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),m-=256;g=r(c)}}if(a(b))g.mul(b[1]),d=b[0].clone();else if(n(b))d=b.clone();else if(typeof b=="string")d=l(b);else if(b)if(b===Math.floor(b))d=r(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),m+=256;d=r(b)}else d=r(1);return m>0?g=g.ushln(m):m<0&&(d=d.ushln(-m)),o(g,d)}},234:function(h,s,t){var a=t(3218);h.exports=function(n){return Array.isArray(n)&&n.length===2&&a(n[0])&&a(n[1])}},4275:function(h,s,t){var a=t(1928);h.exports=function(n){return n.cmp(new a(0))}},9958:function(h,s,t){var a=t(4275);h.exports=function(n){var r=n.length,l=n.words,o=0;if(r===1)o=l[0];else if(r===2)o=l[0]+67108864*l[1];else for(var u=0;u<r;u++)o+=l[u]*Math.pow(67108864,u);return a(n)*o}},1112:function(h,s,t){var a=t(8362),n=t(2288).countTrailingZeros;h.exports=function(r){var l=n(a.lo(r));if(l<32)return l;var o=n(a.hi(r));return o>20?52:o+32}},3218:function(h,s,t){t(1928),h.exports=function(a){return a&&typeof a=="object"&&!!a.words}},5514:function(h,s,t){var a=t(1928),n=t(8362);h.exports=function(r){var l=n.exponent(r);return l<52?new a(r):new a(r*Math.pow(2,52-l)).ushln(l-52)}},8524:function(h,s,t){var a=t(5514),n=t(4275);h.exports=function(r,l){var o=n(r),u=n(l);if(o===0)return[a(0),a(1)];if(u===0)return[a(0),a(0)];u<0&&(r=r.neg(),l=l.neg());var p=r.gcd(l);return p.cmpn(1)?[r.div(p),l.div(p)]:[r,l]}},2813:function(h,s,t){var a=t(1928);h.exports=function(n){return new a(n)}},3962:function(h,s,t){var a=t(8524);h.exports=function(n,r){return a(n[0].mul(r[0]),n[1].mul(r[1]))}},4951:function(h,s,t){var a=t(4275);h.exports=function(n){return a(n[0])*a(n[1])}},4354:function(h,s,t){var a=t(8524);h.exports=function(n,r){return a(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},7999:function(h,s,t){var a=t(9958),n=t(1112);h.exports=function(r){var l=r[0],o=r[1];if(l.cmpn(0)===0)return 0;var u=l.abs().divmod(o.abs()),p=u.div,c=a(p),b=u.mod,g=l.negative!==o.negative?-1:1;if(b.cmpn(0)===0)return g*c;if(c){var d=n(c)+4;return g*(c+(x=a(b.ushln(d).divRound(o)))*Math.pow(2,-d))}var m=o.bitLength()-b.bitLength()+53,x=a(b.ushln(m).divRound(o));return m<1023?g*x*Math.pow(2,-m):g*(x*=Math.pow(2,-1023))*Math.pow(2,1023-m)}},5070:function(h){function s(o,u,p,c,b){for(var g=b+1;c<=b;){var d=c+b>>>1,m=o[d];(p!==void 0?p(m,u):m-u)>=0?(g=d,b=d-1):c=d+1}return g}function t(o,u,p,c,b){for(var g=b+1;c<=b;){var d=c+b>>>1,m=o[d];(p!==void 0?p(m,u):m-u)>0?(g=d,b=d-1):c=d+1}return g}function a(o,u,p,c,b){for(var g=c-1;c<=b;){var d=c+b>>>1,m=o[d];(p!==void 0?p(m,u):m-u)<0?(g=d,c=d+1):b=d-1}return g}function n(o,u,p,c,b){for(var g=c-1;c<=b;){var d=c+b>>>1,m=o[d];(p!==void 0?p(m,u):m-u)<=0?(g=d,c=d+1):b=d-1}return g}function r(o,u,p,c,b){for(;c<=b;){var g=c+b>>>1,d=o[g],m=p!==void 0?p(d,u):d-u;if(m===0)return g;m<=0?c=g+1:b=g-1}return-1}function l(o,u,p,c,b,g){return typeof p=="function"?g(o,u,p,c===void 0?0:0|c,b===void 0?o.length-1:0|b):g(o,u,void 0,p===void 0?0:0|p,c===void 0?o.length-1:0|c)}h.exports={ge:function(o,u,p,c,b){return l(o,u,p,c,b,s)},gt:function(o,u,p,c,b){return l(o,u,p,c,b,t)},lt:function(o,u,p,c,b){return l(o,u,p,c,b,a)},le:function(o,u,p,c,b){return l(o,u,p,c,b,n)},eq:function(o,u,p,c,b){return l(o,u,p,c,b,r)}}},2288:function(h,s){function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(n){return(n>0)-(n<0)},s.abs=function(n){var r=n>>31;return(n^r)-r},s.min=function(n,r){return r^(n^r)&-(n<r)},s.max=function(n,r){return n^(n^r)&-(n<r)},s.isPow2=function(n){return!(n&n-1||!n)},s.log2=function(n){var r,l;return r=(n>65535)<<4,r|=l=((n>>>=r)>255)<<3,r|=l=((n>>>=l)>15)<<2,(r|=l=((n>>>=l)>3)<<1)|(n>>>=l)>>1},s.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},s.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,1+((n|=n>>>8)|n>>>16)},s.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},s.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var a=new Array(256);(function(n){for(var r=0;r<256;++r){var l=r,o=r,u=7;for(l>>>=1;l;l>>>=1)o<<=1,o|=1&l,--u;n[r]=o<<u&255}})(a),s.reverse=function(n){return a[255&n]<<24|a[n>>>8&255]<<16|a[n>>>16&255]<<8|a[n>>>24&255]},s.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},s.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},s.interleave3=function(n,r,l){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<2},s.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},s.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},1928:function(h,s,t){(function(a,n){function r(R,j){if(!R)throw new Error(j||"Assertion failed")}function l(R,j){R.super_=j;var Z=function(){};Z.prototype=j.prototype,R.prototype=new Z,R.prototype.constructor=R}function o(R,j,Z){if(o.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&(j!=="le"&&j!=="be"||(Z=j,j=10),this._init(R||0,j||10,Z||"be"))}var u;typeof a=="object"?a.exports=o:n.BN=o,o.BN=o,o.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(6601).Buffer}catch{}function p(R,j){var Z=R.charCodeAt(j);return Z>=65&&Z<=70?Z-55:Z>=97&&Z<=102?Z-87:Z-48&15}function c(R,j,Z){var F=p(R,Z);return Z-1>=j&&(F|=p(R,Z-1)<<4),F}function b(R,j,Z,F){for(var V=0,H=Math.min(R.length,Z),te=j;te<H;te++){var $=R.charCodeAt(te)-48;V*=F,V+=$>=49?$-49+10:$>=17?$-17+10:$}return V}o.isBN=function(R){return R instanceof o||R!==null&&typeof R=="object"&&R.constructor.wordSize===o.wordSize&&Array.isArray(R.words)},o.max=function(R,j){return R.cmp(j)>0?R:j},o.min=function(R,j){return R.cmp(j)<0?R:j},o.prototype._init=function(R,j,Z){if(typeof R=="number")return this._initNumber(R,j,Z);if(typeof R=="object")return this._initArray(R,j,Z);j==="hex"&&(j=16),r(j===(0|j)&&j>=2&&j<=36);var F=0;(R=R.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<R.length&&(j===16?this._parseHex(R,F,Z):(this._parseBase(R,j,F),Z==="le"&&this._initArray(this.toArray(),j,Z)))},o.prototype._initNumber=function(R,j,Z){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(r(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),j,Z)},o.prototype._initArray=function(R,j,Z){if(r(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,H,te=0;if(Z==="be")for(F=R.length-1,V=0;F>=0;F-=3)H=R[F]|R[F-1]<<8|R[F-2]<<16,this.words[V]|=H<<te&67108863,this.words[V+1]=H>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);else if(Z==="le")for(F=0,V=0;F<R.length;F+=3)H=R[F]|R[F+1]<<8|R[F+2]<<16,this.words[V]|=H<<te&67108863,this.words[V+1]=H>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);return this.strip()},o.prototype._parseHex=function(R,j,Z){this.length=Math.ceil((R.length-j)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,H=0,te=0;if(Z==="be")for(F=R.length-1;F>=j;F-=2)V=c(R,j,F)<<H,this.words[te]|=67108863&V,H>=18?(H-=18,te+=1,this.words[te]|=V>>>26):H+=8;else for(F=(R.length-j)%2==0?j+1:j;F<R.length;F+=2)V=c(R,j,F)<<H,this.words[te]|=67108863&V,H>=18?(H-=18,te+=1,this.words[te]|=V>>>26):H+=8;this.strip()},o.prototype._parseBase=function(R,j,Z){this.words=[0],this.length=1;for(var F=0,V=1;V<=67108863;V*=j)F++;F--,V=V/j|0;for(var H=R.length-Z,te=H%F,$=Math.min(H,H-te)+Z,J=0,X=Z;X<$;X+=F)J=b(R,X,X+F,j),this.imuln(V),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J);if(te!==0){var K=1;for(J=b(R,X,R.length,j),X=0;X<te;X++)K*=j;this.imuln(K),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J)}this.strip()},o.prototype.copy=function(R){R.words=new Array(this.length);for(var j=0;j<this.length;j++)R.words[j]=this.words[j];R.length=this.length,R.negative=this.negative,R.red=this.red},o.prototype.clone=function(){var R=new o(null);return this.copy(R),R},o.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function x(R,j,Z){Z.negative=j.negative^R.negative;var F=R.length+j.length|0;Z.length=F,F=F-1|0;var V=0|R.words[0],H=0|j.words[0],te=V*H,$=67108863&te,J=te/67108864|0;Z.words[0]=$;for(var X=1;X<F;X++){for(var K=J>>>26,ee=67108863&J,ie=Math.min(X,j.length-1),ae=Math.max(0,X-R.length+1);ae<=ie;ae++){var oe=X-ae|0;K+=(te=(V=0|R.words[oe])*(H=0|j.words[ae])+ee)/67108864|0,ee=67108863&te}Z.words[X]=0|ee,J=0|K}return J!==0?Z.words[X]=0|J:Z.length--,Z.strip()}o.prototype.toString=function(R,j){var Z;if(j=0|j||1,(R=R||10)===16||R==="hex"){Z="";for(var F=0,V=0,H=0;H<this.length;H++){var te=this.words[H],$=(16777215&(te<<F|V)).toString(16);Z=(V=te>>>24-F&16777215)!=0||H!==this.length-1?g[6-$.length]+$+Z:$+Z,(F+=2)>=26&&(F-=26,H--)}for(V!==0&&(Z=V.toString(16)+Z);Z.length%j!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(R===(0|R)&&R>=2&&R<=36){var J=d[R],X=m[R];Z="";var K=this.clone();for(K.negative=0;!K.isZero();){var ee=K.modn(X).toString(R);Z=(K=K.idivn(X)).isZero()?ee+Z:g[J-ee.length]+ee+Z}for(this.isZero()&&(Z="0"+Z);Z.length%j!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=67108864*this.words[1]:this.length===3&&this.words[2]===1?R+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(R,j){return r(u!==void 0),this.toArrayLike(u,R,j)},o.prototype.toArray=function(R,j){return this.toArrayLike(Array,R,j)},o.prototype.toArrayLike=function(R,j,Z){var F=this.byteLength(),V=Z||Math.max(1,F);r(F<=V,"byte array longer than desired length"),r(V>0,"Requested array length <= 0"),this.strip();var H,te,$=j==="le",J=new R(V),X=this.clone();if($){for(te=0;!X.isZero();te++)H=X.andln(255),X.iushrn(8),J[te]=H;for(;te<V;te++)J[te]=0}else{for(te=0;te<V-F;te++)J[te]=0;for(te=0;!X.isZero();te++)H=X.andln(255),X.iushrn(8),J[V-te-1]=H}return J},Math.clz32?o.prototype._countBits=function(R){return 32-Math.clz32(R)}:o.prototype._countBits=function(R){var j=R,Z=0;return j>=4096&&(Z+=13,j>>>=13),j>=64&&(Z+=7,j>>>=7),j>=8&&(Z+=4,j>>>=4),j>=2&&(Z+=2,j>>>=2),Z+j},o.prototype._zeroBits=function(R){if(R===0)return 26;var j=R,Z=0;return!(8191&j)&&(Z+=13,j>>>=13),!(127&j)&&(Z+=7,j>>>=7),!(15&j)&&(Z+=4,j>>>=4),!(3&j)&&(Z+=2,j>>>=2),!(1&j)&&Z++,Z},o.prototype.bitLength=function(){var R=this.words[this.length-1],j=this._countBits(R);return 26*(this.length-1)+j},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,j=0;j<this.length;j++){var Z=this._zeroBits(this.words[j]);if(R+=Z,Z!==26)break}return R},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},o.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var j=0;j<R.length;j++)this.words[j]=this.words[j]|R.words[j];return this.strip()},o.prototype.ior=function(R){return r((this.negative|R.negative)==0),this.iuor(R)},o.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},o.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},o.prototype.iuand=function(R){var j;j=this.length>R.length?R:this;for(var Z=0;Z<j.length;Z++)this.words[Z]=this.words[Z]&R.words[Z];return this.length=j.length,this.strip()},o.prototype.iand=function(R){return r((this.negative|R.negative)==0),this.iuand(R)},o.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},o.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},o.prototype.iuxor=function(R){var j,Z;this.length>R.length?(j=this,Z=R):(j=R,Z=this);for(var F=0;F<Z.length;F++)this.words[F]=j.words[F]^Z.words[F];if(this!==j)for(;F<j.length;F++)this.words[F]=j.words[F];return this.length=j.length,this.strip()},o.prototype.ixor=function(R){return r((this.negative|R.negative)==0),this.iuxor(R)},o.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},o.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},o.prototype.inotn=function(R){r(typeof R=="number"&&R>=0);var j=0|Math.ceil(R/26),Z=R%26;this._expand(j),Z>0&&j--;for(var F=0;F<j;F++)this.words[F]=67108863&~this.words[F];return Z>0&&(this.words[F]=~this.words[F]&67108863>>26-Z),this.strip()},o.prototype.notn=function(R){return this.clone().inotn(R)},o.prototype.setn=function(R,j){r(typeof R=="number"&&R>=0);var Z=R/26|0,F=R%26;return this._expand(Z+1),this.words[Z]=j?this.words[Z]|1<<F:this.words[Z]&~(1<<F),this.strip()},o.prototype.iadd=function(R){var j,Z,F;if(this.negative!==0&&R.negative===0)return this.negative=0,j=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,j=this.isub(R),R.negative=1,j._normSign();this.length>R.length?(Z=this,F=R):(Z=R,F=this);for(var V=0,H=0;H<F.length;H++)j=(0|Z.words[H])+(0|F.words[H])+V,this.words[H]=67108863&j,V=j>>>26;for(;V!==0&&H<Z.length;H++)j=(0|Z.words[H])+V,this.words[H]=67108863&j,V=j>>>26;if(this.length=Z.length,V!==0)this.words[this.length]=V,this.length++;else if(Z!==this)for(;H<Z.length;H++)this.words[H]=Z.words[H];return this},o.prototype.add=function(R){var j;return R.negative!==0&&this.negative===0?(R.negative=0,j=this.sub(R),R.negative^=1,j):R.negative===0&&this.negative!==0?(this.negative=0,j=R.sub(this),this.negative=1,j):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},o.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var j=this.iadd(R);return R.negative=1,j._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var Z,F,V=this.cmp(R);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;V>0?(Z=this,F=R):(Z=R,F=this);for(var H=0,te=0;te<F.length;te++)H=(j=(0|Z.words[te])-(0|F.words[te])+H)>>26,this.words[te]=67108863&j;for(;H!==0&&te<Z.length;te++)H=(j=(0|Z.words[te])+H)>>26,this.words[te]=67108863&j;if(H===0&&te<Z.length&&Z!==this)for(;te<Z.length;te++)this.words[te]=Z.words[te];return this.length=Math.max(this.length,te),Z!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(R){return this.clone().isub(R)};var y=function(R,j,Z){var F,V,H,te=R.words,$=j.words,J=Z.words,X=0,K=0|te[0],ee=8191&K,ie=K>>>13,ae=0|te[1],oe=8191&ae,fe=ae>>>13,ge=0|te[2],ve=8191&ge,xe=ge>>>13,_e=0|te[3],ye=8191&_e,Ce=_e>>>13,ke=0|te[4],Te=8191&ke,le=ke>>>13,ue=0|te[5],de=8191&ue,Le=ue>>>13,we=0|te[6],Ee=8191&we,Oe=we>>>13,Fe=0|te[7],pe=8191&Fe,be=Fe>>>13,Me=0|te[8],De=8191&Me,Ne=Me>>>13,Be=0|te[9],Ye=8191&Be,We=Be>>>13,et=0|$[0],ft=8191&et,ht=et>>>13,mt=0|$[1],Mt=8191&mt,_t=mt>>>13,it=0|$[2],st=8191&it,St=it>>>13,zt=0|$[3],Ft=8191&zt,Pt=zt>>>13,Xe=0|$[4],Ke=8191&Xe,He=Xe>>>13,Je=0|$[5],lt=8191&Je,ot=Je>>>13,je=0|$[6],Ue=8191&je,at=je>>>13,$e=0|$[7],gt=8191&$e,yt=$e>>>13,xt=0|$[8],dt=8191&xt,Lt=xt>>>13,Tt=0|$[9],bt=8191&Tt,Ct=Tt>>>13;Z.negative=R.negative^j.negative,Z.length=19;var Dt=(X+(F=Math.imul(ee,ft))|0)+((8191&(V=(V=Math.imul(ee,ht))+Math.imul(ie,ft)|0))<<13)|0;X=((H=Math.imul(ie,ht))+(V>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,F=Math.imul(oe,ft),V=(V=Math.imul(oe,ht))+Math.imul(fe,ft)|0,H=Math.imul(fe,ht);var Bt=(X+(F=F+Math.imul(ee,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(ee,_t)|0)+Math.imul(ie,Mt)|0))<<13)|0;X=((H=H+Math.imul(ie,_t)|0)+(V>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,F=Math.imul(ve,ft),V=(V=Math.imul(ve,ht))+Math.imul(xe,ft)|0,H=Math.imul(xe,ht),F=F+Math.imul(oe,Mt)|0,V=(V=V+Math.imul(oe,_t)|0)+Math.imul(fe,Mt)|0,H=H+Math.imul(fe,_t)|0;var Xt=(X+(F=F+Math.imul(ee,st)|0)|0)+((8191&(V=(V=V+Math.imul(ee,St)|0)+Math.imul(ie,st)|0))<<13)|0;X=((H=H+Math.imul(ie,St)|0)+(V>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,F=Math.imul(ye,ft),V=(V=Math.imul(ye,ht))+Math.imul(Ce,ft)|0,H=Math.imul(Ce,ht),F=F+Math.imul(ve,Mt)|0,V=(V=V+Math.imul(ve,_t)|0)+Math.imul(xe,Mt)|0,H=H+Math.imul(xe,_t)|0,F=F+Math.imul(oe,st)|0,V=(V=V+Math.imul(oe,St)|0)+Math.imul(fe,st)|0,H=H+Math.imul(fe,St)|0;var an=(X+(F=F+Math.imul(ee,Ft)|0)|0)+((8191&(V=(V=V+Math.imul(ee,Pt)|0)+Math.imul(ie,Ft)|0))<<13)|0;X=((H=H+Math.imul(ie,Pt)|0)+(V>>>13)|0)+(an>>>26)|0,an&=67108863,F=Math.imul(Te,ft),V=(V=Math.imul(Te,ht))+Math.imul(le,ft)|0,H=Math.imul(le,ht),F=F+Math.imul(ye,Mt)|0,V=(V=V+Math.imul(ye,_t)|0)+Math.imul(Ce,Mt)|0,H=H+Math.imul(Ce,_t)|0,F=F+Math.imul(ve,st)|0,V=(V=V+Math.imul(ve,St)|0)+Math.imul(xe,st)|0,H=H+Math.imul(xe,St)|0,F=F+Math.imul(oe,Ft)|0,V=(V=V+Math.imul(oe,Pt)|0)+Math.imul(fe,Ft)|0,H=H+Math.imul(fe,Pt)|0;var Wt=(X+(F=F+Math.imul(ee,Ke)|0)|0)+((8191&(V=(V=V+Math.imul(ee,He)|0)+Math.imul(ie,Ke)|0))<<13)|0;X=((H=H+Math.imul(ie,He)|0)+(V>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,F=Math.imul(de,ft),V=(V=Math.imul(de,ht))+Math.imul(Le,ft)|0,H=Math.imul(Le,ht),F=F+Math.imul(Te,Mt)|0,V=(V=V+Math.imul(Te,_t)|0)+Math.imul(le,Mt)|0,H=H+Math.imul(le,_t)|0,F=F+Math.imul(ye,st)|0,V=(V=V+Math.imul(ye,St)|0)+Math.imul(Ce,st)|0,H=H+Math.imul(Ce,St)|0,F=F+Math.imul(ve,Ft)|0,V=(V=V+Math.imul(ve,Pt)|0)+Math.imul(xe,Ft)|0,H=H+Math.imul(xe,Pt)|0,F=F+Math.imul(oe,Ke)|0,V=(V=V+Math.imul(oe,He)|0)+Math.imul(fe,Ke)|0,H=H+Math.imul(fe,He)|0;var Vt=(X+(F=F+Math.imul(ee,lt)|0)|0)+((8191&(V=(V=V+Math.imul(ee,ot)|0)+Math.imul(ie,lt)|0))<<13)|0;X=((H=H+Math.imul(ie,ot)|0)+(V>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,F=Math.imul(Ee,ft),V=(V=Math.imul(Ee,ht))+Math.imul(Oe,ft)|0,H=Math.imul(Oe,ht),F=F+Math.imul(de,Mt)|0,V=(V=V+Math.imul(de,_t)|0)+Math.imul(Le,Mt)|0,H=H+Math.imul(Le,_t)|0,F=F+Math.imul(Te,st)|0,V=(V=V+Math.imul(Te,St)|0)+Math.imul(le,st)|0,H=H+Math.imul(le,St)|0,F=F+Math.imul(ye,Ft)|0,V=(V=V+Math.imul(ye,Pt)|0)+Math.imul(Ce,Ft)|0,H=H+Math.imul(Ce,Pt)|0,F=F+Math.imul(ve,Ke)|0,V=(V=V+Math.imul(ve,He)|0)+Math.imul(xe,Ke)|0,H=H+Math.imul(xe,He)|0,F=F+Math.imul(oe,lt)|0,V=(V=V+Math.imul(oe,ot)|0)+Math.imul(fe,lt)|0,H=H+Math.imul(fe,ot)|0;var on=(X+(F=F+Math.imul(ee,Ue)|0)|0)+((8191&(V=(V=V+Math.imul(ee,at)|0)+Math.imul(ie,Ue)|0))<<13)|0;X=((H=H+Math.imul(ie,at)|0)+(V>>>13)|0)+(on>>>26)|0,on&=67108863,F=Math.imul(pe,ft),V=(V=Math.imul(pe,ht))+Math.imul(be,ft)|0,H=Math.imul(be,ht),F=F+Math.imul(Ee,Mt)|0,V=(V=V+Math.imul(Ee,_t)|0)+Math.imul(Oe,Mt)|0,H=H+Math.imul(Oe,_t)|0,F=F+Math.imul(de,st)|0,V=(V=V+Math.imul(de,St)|0)+Math.imul(Le,st)|0,H=H+Math.imul(Le,St)|0,F=F+Math.imul(Te,Ft)|0,V=(V=V+Math.imul(Te,Pt)|0)+Math.imul(le,Ft)|0,H=H+Math.imul(le,Pt)|0,F=F+Math.imul(ye,Ke)|0,V=(V=V+Math.imul(ye,He)|0)+Math.imul(Ce,Ke)|0,H=H+Math.imul(Ce,He)|0,F=F+Math.imul(ve,lt)|0,V=(V=V+Math.imul(ve,ot)|0)+Math.imul(xe,lt)|0,H=H+Math.imul(xe,ot)|0,F=F+Math.imul(oe,Ue)|0,V=(V=V+Math.imul(oe,at)|0)+Math.imul(fe,Ue)|0,H=H+Math.imul(fe,at)|0;var Sn=(X+(F=F+Math.imul(ee,gt)|0)|0)+((8191&(V=(V=V+Math.imul(ee,yt)|0)+Math.imul(ie,gt)|0))<<13)|0;X=((H=H+Math.imul(ie,yt)|0)+(V>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,F=Math.imul(De,ft),V=(V=Math.imul(De,ht))+Math.imul(Ne,ft)|0,H=Math.imul(Ne,ht),F=F+Math.imul(pe,Mt)|0,V=(V=V+Math.imul(pe,_t)|0)+Math.imul(be,Mt)|0,H=H+Math.imul(be,_t)|0,F=F+Math.imul(Ee,st)|0,V=(V=V+Math.imul(Ee,St)|0)+Math.imul(Oe,st)|0,H=H+Math.imul(Oe,St)|0,F=F+Math.imul(de,Ft)|0,V=(V=V+Math.imul(de,Pt)|0)+Math.imul(Le,Ft)|0,H=H+Math.imul(Le,Pt)|0,F=F+Math.imul(Te,Ke)|0,V=(V=V+Math.imul(Te,He)|0)+Math.imul(le,Ke)|0,H=H+Math.imul(le,He)|0,F=F+Math.imul(ye,lt)|0,V=(V=V+Math.imul(ye,ot)|0)+Math.imul(Ce,lt)|0,H=H+Math.imul(Ce,ot)|0,F=F+Math.imul(ve,Ue)|0,V=(V=V+Math.imul(ve,at)|0)+Math.imul(xe,Ue)|0,H=H+Math.imul(xe,at)|0,F=F+Math.imul(oe,gt)|0,V=(V=V+Math.imul(oe,yt)|0)+Math.imul(fe,gt)|0,H=H+Math.imul(fe,yt)|0;var Ln=(X+(F=F+Math.imul(ee,dt)|0)|0)+((8191&(V=(V=V+Math.imul(ee,Lt)|0)+Math.imul(ie,dt)|0))<<13)|0;X=((H=H+Math.imul(ie,Lt)|0)+(V>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,F=Math.imul(Ye,ft),V=(V=Math.imul(Ye,ht))+Math.imul(We,ft)|0,H=Math.imul(We,ht),F=F+Math.imul(De,Mt)|0,V=(V=V+Math.imul(De,_t)|0)+Math.imul(Ne,Mt)|0,H=H+Math.imul(Ne,_t)|0,F=F+Math.imul(pe,st)|0,V=(V=V+Math.imul(pe,St)|0)+Math.imul(be,st)|0,H=H+Math.imul(be,St)|0,F=F+Math.imul(Ee,Ft)|0,V=(V=V+Math.imul(Ee,Pt)|0)+Math.imul(Oe,Ft)|0,H=H+Math.imul(Oe,Pt)|0,F=F+Math.imul(de,Ke)|0,V=(V=V+Math.imul(de,He)|0)+Math.imul(Le,Ke)|0,H=H+Math.imul(Le,He)|0,F=F+Math.imul(Te,lt)|0,V=(V=V+Math.imul(Te,ot)|0)+Math.imul(le,lt)|0,H=H+Math.imul(le,ot)|0,F=F+Math.imul(ye,Ue)|0,V=(V=V+Math.imul(ye,at)|0)+Math.imul(Ce,Ue)|0,H=H+Math.imul(Ce,at)|0,F=F+Math.imul(ve,gt)|0,V=(V=V+Math.imul(ve,yt)|0)+Math.imul(xe,gt)|0,H=H+Math.imul(xe,yt)|0,F=F+Math.imul(oe,dt)|0,V=(V=V+Math.imul(oe,Lt)|0)+Math.imul(fe,dt)|0,H=H+Math.imul(fe,Lt)|0;var fn=(X+(F=F+Math.imul(ee,bt)|0)|0)+((8191&(V=(V=V+Math.imul(ee,Ct)|0)+Math.imul(ie,bt)|0))<<13)|0;X=((H=H+Math.imul(ie,Ct)|0)+(V>>>13)|0)+(fn>>>26)|0,fn&=67108863,F=Math.imul(Ye,Mt),V=(V=Math.imul(Ye,_t))+Math.imul(We,Mt)|0,H=Math.imul(We,_t),F=F+Math.imul(De,st)|0,V=(V=V+Math.imul(De,St)|0)+Math.imul(Ne,st)|0,H=H+Math.imul(Ne,St)|0,F=F+Math.imul(pe,Ft)|0,V=(V=V+Math.imul(pe,Pt)|0)+Math.imul(be,Ft)|0,H=H+Math.imul(be,Pt)|0,F=F+Math.imul(Ee,Ke)|0,V=(V=V+Math.imul(Ee,He)|0)+Math.imul(Oe,Ke)|0,H=H+Math.imul(Oe,He)|0,F=F+Math.imul(de,lt)|0,V=(V=V+Math.imul(de,ot)|0)+Math.imul(Le,lt)|0,H=H+Math.imul(Le,ot)|0,F=F+Math.imul(Te,Ue)|0,V=(V=V+Math.imul(Te,at)|0)+Math.imul(le,Ue)|0,H=H+Math.imul(le,at)|0,F=F+Math.imul(ye,gt)|0,V=(V=V+Math.imul(ye,yt)|0)+Math.imul(Ce,gt)|0,H=H+Math.imul(Ce,yt)|0,F=F+Math.imul(ve,dt)|0,V=(V=V+Math.imul(ve,Lt)|0)+Math.imul(xe,dt)|0,H=H+Math.imul(xe,Lt)|0;var Zt=(X+(F=F+Math.imul(oe,bt)|0)|0)+((8191&(V=(V=V+Math.imul(oe,Ct)|0)+Math.imul(fe,bt)|0))<<13)|0;X=((H=H+Math.imul(fe,Ct)|0)+(V>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,F=Math.imul(Ye,st),V=(V=Math.imul(Ye,St))+Math.imul(We,st)|0,H=Math.imul(We,St),F=F+Math.imul(De,Ft)|0,V=(V=V+Math.imul(De,Pt)|0)+Math.imul(Ne,Ft)|0,H=H+Math.imul(Ne,Pt)|0,F=F+Math.imul(pe,Ke)|0,V=(V=V+Math.imul(pe,He)|0)+Math.imul(be,Ke)|0,H=H+Math.imul(be,He)|0,F=F+Math.imul(Ee,lt)|0,V=(V=V+Math.imul(Ee,ot)|0)+Math.imul(Oe,lt)|0,H=H+Math.imul(Oe,ot)|0,F=F+Math.imul(de,Ue)|0,V=(V=V+Math.imul(de,at)|0)+Math.imul(Le,Ue)|0,H=H+Math.imul(Le,at)|0,F=F+Math.imul(Te,gt)|0,V=(V=V+Math.imul(Te,yt)|0)+Math.imul(le,gt)|0,H=H+Math.imul(le,yt)|0,F=F+Math.imul(ye,dt)|0,V=(V=V+Math.imul(ye,Lt)|0)+Math.imul(Ce,dt)|0,H=H+Math.imul(Ce,Lt)|0;var ln=(X+(F=F+Math.imul(ve,bt)|0)|0)+((8191&(V=(V=V+Math.imul(ve,Ct)|0)+Math.imul(xe,bt)|0))<<13)|0;X=((H=H+Math.imul(xe,Ct)|0)+(V>>>13)|0)+(ln>>>26)|0,ln&=67108863,F=Math.imul(Ye,Ft),V=(V=Math.imul(Ye,Pt))+Math.imul(We,Ft)|0,H=Math.imul(We,Pt),F=F+Math.imul(De,Ke)|0,V=(V=V+Math.imul(De,He)|0)+Math.imul(Ne,Ke)|0,H=H+Math.imul(Ne,He)|0,F=F+Math.imul(pe,lt)|0,V=(V=V+Math.imul(pe,ot)|0)+Math.imul(be,lt)|0,H=H+Math.imul(be,ot)|0,F=F+Math.imul(Ee,Ue)|0,V=(V=V+Math.imul(Ee,at)|0)+Math.imul(Oe,Ue)|0,H=H+Math.imul(Oe,at)|0,F=F+Math.imul(de,gt)|0,V=(V=V+Math.imul(de,yt)|0)+Math.imul(Le,gt)|0,H=H+Math.imul(Le,yt)|0,F=F+Math.imul(Te,dt)|0,V=(V=V+Math.imul(Te,Lt)|0)+Math.imul(le,dt)|0,H=H+Math.imul(le,Lt)|0;var nn=(X+(F=F+Math.imul(ye,bt)|0)|0)+((8191&(V=(V=V+Math.imul(ye,Ct)|0)+Math.imul(Ce,bt)|0))<<13)|0;X=((H=H+Math.imul(Ce,Ct)|0)+(V>>>13)|0)+(nn>>>26)|0,nn&=67108863,F=Math.imul(Ye,Ke),V=(V=Math.imul(Ye,He))+Math.imul(We,Ke)|0,H=Math.imul(We,He),F=F+Math.imul(De,lt)|0,V=(V=V+Math.imul(De,ot)|0)+Math.imul(Ne,lt)|0,H=H+Math.imul(Ne,ot)|0,F=F+Math.imul(pe,Ue)|0,V=(V=V+Math.imul(pe,at)|0)+Math.imul(be,Ue)|0,H=H+Math.imul(be,at)|0,F=F+Math.imul(Ee,gt)|0,V=(V=V+Math.imul(Ee,yt)|0)+Math.imul(Oe,gt)|0,H=H+Math.imul(Oe,yt)|0,F=F+Math.imul(de,dt)|0,V=(V=V+Math.imul(de,Lt)|0)+Math.imul(Le,dt)|0,H=H+Math.imul(Le,Lt)|0;var cn=(X+(F=F+Math.imul(Te,bt)|0)|0)+((8191&(V=(V=V+Math.imul(Te,Ct)|0)+Math.imul(le,bt)|0))<<13)|0;X=((H=H+Math.imul(le,Ct)|0)+(V>>>13)|0)+(cn>>>26)|0,cn&=67108863,F=Math.imul(Ye,lt),V=(V=Math.imul(Ye,ot))+Math.imul(We,lt)|0,H=Math.imul(We,ot),F=F+Math.imul(De,Ue)|0,V=(V=V+Math.imul(De,at)|0)+Math.imul(Ne,Ue)|0,H=H+Math.imul(Ne,at)|0,F=F+Math.imul(pe,gt)|0,V=(V=V+Math.imul(pe,yt)|0)+Math.imul(be,gt)|0,H=H+Math.imul(be,yt)|0,F=F+Math.imul(Ee,dt)|0,V=(V=V+Math.imul(Ee,Lt)|0)+Math.imul(Oe,dt)|0,H=H+Math.imul(Oe,Lt)|0;var kn=(X+(F=F+Math.imul(de,bt)|0)|0)+((8191&(V=(V=V+Math.imul(de,Ct)|0)+Math.imul(Le,bt)|0))<<13)|0;X=((H=H+Math.imul(Le,Ct)|0)+(V>>>13)|0)+(kn>>>26)|0,kn&=67108863,F=Math.imul(Ye,Ue),V=(V=Math.imul(Ye,at))+Math.imul(We,Ue)|0,H=Math.imul(We,at),F=F+Math.imul(De,gt)|0,V=(V=V+Math.imul(De,yt)|0)+Math.imul(Ne,gt)|0,H=H+Math.imul(Ne,yt)|0,F=F+Math.imul(pe,dt)|0,V=(V=V+Math.imul(pe,Lt)|0)+Math.imul(be,dt)|0,H=H+Math.imul(be,Lt)|0;var An=(X+(F=F+Math.imul(Ee,bt)|0)|0)+((8191&(V=(V=V+Math.imul(Ee,Ct)|0)+Math.imul(Oe,bt)|0))<<13)|0;X=((H=H+Math.imul(Oe,Ct)|0)+(V>>>13)|0)+(An>>>26)|0,An&=67108863,F=Math.imul(Ye,gt),V=(V=Math.imul(Ye,yt))+Math.imul(We,gt)|0,H=Math.imul(We,yt),F=F+Math.imul(De,dt)|0,V=(V=V+Math.imul(De,Lt)|0)+Math.imul(Ne,dt)|0,H=H+Math.imul(Ne,Lt)|0;var wn=(X+(F=F+Math.imul(pe,bt)|0)|0)+((8191&(V=(V=V+Math.imul(pe,Ct)|0)+Math.imul(be,bt)|0))<<13)|0;X=((H=H+Math.imul(be,Ct)|0)+(V>>>13)|0)+(wn>>>26)|0,wn&=67108863,F=Math.imul(Ye,dt),V=(V=Math.imul(Ye,Lt))+Math.imul(We,dt)|0,H=Math.imul(We,Lt);var Cn=(X+(F=F+Math.imul(De,bt)|0)|0)+((8191&(V=(V=V+Math.imul(De,Ct)|0)+Math.imul(Ne,bt)|0))<<13)|0;X=((H=H+Math.imul(Ne,Ct)|0)+(V>>>13)|0)+(Cn>>>26)|0,Cn&=67108863;var _n=(X+(F=Math.imul(Ye,bt))|0)+((8191&(V=(V=Math.imul(Ye,Ct))+Math.imul(We,bt)|0))<<13)|0;return X=((H=Math.imul(We,Ct))+(V>>>13)|0)+(_n>>>26)|0,_n&=67108863,J[0]=Dt,J[1]=Bt,J[2]=Xt,J[3]=an,J[4]=Wt,J[5]=Vt,J[6]=on,J[7]=Sn,J[8]=Ln,J[9]=fn,J[10]=Zt,J[11]=ln,J[12]=nn,J[13]=cn,J[14]=kn,J[15]=An,J[16]=wn,J[17]=Cn,J[18]=_n,X!==0&&(J[19]=X,Z.length++),Z};function k(R,j,Z){return new f().mulp(R,j,Z)}function f(R,j){this.x=R,this.y=j}Math.imul||(y=x),o.prototype.mulTo=function(R,j){var Z,F=this.length+R.length;return Z=this.length===10&&R.length===10?y(this,R,j):F<63?x(this,R,j):F<1024?function(V,H,te){te.negative=H.negative^V.negative,te.length=V.length+H.length;for(var $=0,J=0,X=0;X<te.length-1;X++){var K=J;J=0;for(var ee=67108863&$,ie=Math.min(X,H.length-1),ae=Math.max(0,X-V.length+1);ae<=ie;ae++){var oe=X-ae,fe=(0|V.words[oe])*(0|H.words[ae]),ge=67108863&fe;ee=67108863&(ge=ge+ee|0),J+=(K=(K=K+(fe/67108864|0)|0)+(ge>>>26)|0)>>>26,K&=67108863}te.words[X]=ee,$=K,K=J}return $!==0?te.words[X]=$:te.length--,te.strip()}(this,R,j):k(this,R,j),Z},f.prototype.makeRBT=function(R){for(var j=new Array(R),Z=o.prototype._countBits(R)-1,F=0;F<R;F++)j[F]=this.revBin(F,Z,R);return j},f.prototype.revBin=function(R,j,Z){if(R===0||R===Z-1)return R;for(var F=0,V=0;V<j;V++)F|=(1&R)<<j-V-1,R>>=1;return F},f.prototype.permute=function(R,j,Z,F,V,H){for(var te=0;te<H;te++)F[te]=j[R[te]],V[te]=Z[R[te]]},f.prototype.transform=function(R,j,Z,F,V,H){this.permute(H,R,j,Z,F,V);for(var te=1;te<V;te<<=1)for(var $=te<<1,J=Math.cos(2*Math.PI/$),X=Math.sin(2*Math.PI/$),K=0;K<V;K+=$)for(var ee=J,ie=X,ae=0;ae<te;ae++){var oe=Z[K+ae],fe=F[K+ae],ge=Z[K+ae+te],ve=F[K+ae+te],xe=ee*ge-ie*ve;ve=ee*ve+ie*ge,ge=xe,Z[K+ae]=oe+ge,F[K+ae]=fe+ve,Z[K+ae+te]=oe-ge,F[K+ae+te]=fe-ve,ae!==$&&(xe=J*ee-X*ie,ie=J*ie+X*ee,ee=xe)}},f.prototype.guessLen13b=function(R,j){var Z=1|Math.max(j,R),F=1&Z,V=0;for(Z=Z/2|0;Z;Z>>>=1)V++;return 1<<V+1+F},f.prototype.conjugate=function(R,j,Z){if(!(Z<=1))for(var F=0;F<Z/2;F++){var V=R[F];R[F]=R[Z-F-1],R[Z-F-1]=V,V=j[F],j[F]=-j[Z-F-1],j[Z-F-1]=-V}},f.prototype.normalize13b=function(R,j){for(var Z=0,F=0;F<j/2;F++){var V=8192*Math.round(R[2*F+1]/j)+Math.round(R[2*F]/j)+Z;R[F]=67108863&V,Z=V<67108864?0:V/67108864|0}return R},f.prototype.convert13b=function(R,j,Z,F){for(var V=0,H=0;H<j;H++)V+=0|R[H],Z[2*H]=8191&V,V>>>=13,Z[2*H+1]=8191&V,V>>>=13;for(H=2*j;H<F;++H)Z[H]=0;r(V===0),r((-8192&V)==0)},f.prototype.stub=function(R){for(var j=new Array(R),Z=0;Z<R;Z++)j[Z]=0;return j},f.prototype.mulp=function(R,j,Z){var F=2*this.guessLen13b(R.length,j.length),V=this.makeRBT(F),H=this.stub(F),te=new Array(F),$=new Array(F),J=new Array(F),X=new Array(F),K=new Array(F),ee=new Array(F),ie=Z.words;ie.length=F,this.convert13b(R.words,R.length,te,F),this.convert13b(j.words,j.length,X,F),this.transform(te,H,$,J,F,V),this.transform(X,H,K,ee,F,V);for(var ae=0;ae<F;ae++){var oe=$[ae]*K[ae]-J[ae]*ee[ae];J[ae]=$[ae]*ee[ae]+J[ae]*K[ae],$[ae]=oe}return this.conjugate($,J,F),this.transform($,J,ie,H,F,V),this.conjugate(ie,H,F),this.normalize13b(ie,F),Z.negative=R.negative^j.negative,Z.length=R.length+j.length,Z.strip()},o.prototype.mul=function(R){var j=new o(null);return j.words=new Array(this.length+R.length),this.mulTo(R,j)},o.prototype.mulf=function(R){var j=new o(null);return j.words=new Array(this.length+R.length),k(this,R,j)},o.prototype.imul=function(R){return this.clone().mulTo(R,this)},o.prototype.imuln=function(R){r(typeof R=="number"),r(R<67108864);for(var j=0,Z=0;Z<this.length;Z++){var F=(0|this.words[Z])*R,V=(67108863&F)+(67108863&j);j>>=26,j+=F/67108864|0,j+=V>>>26,this.words[Z]=67108863&V}return j!==0&&(this.words[Z]=j,this.length++),this},o.prototype.muln=function(R){return this.clone().imuln(R)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(R){var j=function(H){for(var te=new Array(H.bitLength()),$=0;$<te.length;$++){var J=$/26|0,X=$%26;te[$]=(H.words[J]&1<<X)>>>X}return te}(R);if(j.length===0)return new o(1);for(var Z=this,F=0;F<j.length&&j[F]===0;F++,Z=Z.sqr());if(++F<j.length)for(var V=Z.sqr();F<j.length;F++,V=V.sqr())j[F]!==0&&(Z=Z.mul(V));return Z},o.prototype.iushln=function(R){r(typeof R=="number"&&R>=0);var j,Z=R%26,F=(R-Z)/26,V=67108863>>>26-Z<<26-Z;if(Z!==0){var H=0;for(j=0;j<this.length;j++){var te=this.words[j]&V,$=(0|this.words[j])-te<<Z;this.words[j]=$|H,H=te>>>26-Z}H&&(this.words[j]=H,this.length++)}if(F!==0){for(j=this.length-1;j>=0;j--)this.words[j+F]=this.words[j];for(j=0;j<F;j++)this.words[j]=0;this.length+=F}return this.strip()},o.prototype.ishln=function(R){return r(this.negative===0),this.iushln(R)},o.prototype.iushrn=function(R,j,Z){var F;r(typeof R=="number"&&R>=0),F=j?(j-j%26)/26:0;var V=R%26,H=Math.min((R-V)/26,this.length),te=67108863^67108863>>>V<<V,$=Z;if(F-=H,F=Math.max(0,F),$){for(var J=0;J<H;J++)$.words[J]=this.words[J];$.length=H}if(H!==0)if(this.length>H)for(this.length-=H,J=0;J<this.length;J++)this.words[J]=this.words[J+H];else this.words[0]=0,this.length=1;var X=0;for(J=this.length-1;J>=0&&(X!==0||J>=F);J--){var K=0|this.words[J];this.words[J]=X<<26-V|K>>>V,X=K&te}return $&&X!==0&&($.words[$.length++]=X),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(R,j,Z){return r(this.negative===0),this.iushrn(R,j,Z)},o.prototype.shln=function(R){return this.clone().ishln(R)},o.prototype.ushln=function(R){return this.clone().iushln(R)},o.prototype.shrn=function(R){return this.clone().ishrn(R)},o.prototype.ushrn=function(R){return this.clone().iushrn(R)},o.prototype.testn=function(R){r(typeof R=="number"&&R>=0);var j=R%26,Z=(R-j)/26,F=1<<j;return!(this.length<=Z||!(this.words[Z]&F))},o.prototype.imaskn=function(R){r(typeof R=="number"&&R>=0);var j=R%26,Z=(R-j)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(j!==0&&Z++,this.length=Math.min(Z,this.length),j!==0){var F=67108863^67108863>>>j<<j;this.words[this.length-1]&=F}return this.strip()},o.prototype.maskn=function(R){return this.clone().imaskn(R)},o.prototype.iaddn=function(R){return r(typeof R=="number"),r(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(0|this.words[0])<R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},o.prototype._iaddn=function(R){this.words[0]+=R;for(var j=0;j<this.length&&this.words[j]>=67108864;j++)this.words[j]-=67108864,j===this.length-1?this.words[j+1]=1:this.words[j+1]++;return this.length=Math.max(this.length,j+1),this},o.prototype.isubn=function(R){if(r(typeof R=="number"),r(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var j=0;j<this.length&&this.words[j]<0;j++)this.words[j]+=67108864,this.words[j+1]-=1;return this.strip()},o.prototype.addn=function(R){return this.clone().iaddn(R)},o.prototype.subn=function(R){return this.clone().isubn(R)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(R,j,Z){var F,V,H=R.length+Z;this._expand(H);var te=0;for(F=0;F<R.length;F++){V=(0|this.words[F+Z])+te;var $=(0|R.words[F])*j;te=((V-=67108863&$)>>26)-($/67108864|0),this.words[F+Z]=67108863&V}for(;F<this.length-Z;F++)te=(V=(0|this.words[F+Z])+te)>>26,this.words[F+Z]=67108863&V;if(te===0)return this.strip();for(r(te===-1),te=0,F=0;F<this.length;F++)te=(V=-(0|this.words[F])+te)>>26,this.words[F]=67108863&V;return this.negative=1,this.strip()},o.prototype._wordDiv=function(R,j){var Z=(this.length,R.length),F=this.clone(),V=R,H=0|V.words[V.length-1];(Z=26-this._countBits(H))!=0&&(V=V.ushln(Z),F.iushln(Z),H=0|V.words[V.length-1]);var te,$=F.length-V.length;if(j!=="mod"){(te=new o(null)).length=$+1,te.words=new Array(te.length);for(var J=0;J<te.length;J++)te.words[J]=0}var X=F.clone()._ishlnsubmul(V,1,$);X.negative===0&&(F=X,te&&(te.words[$]=1));for(var K=$-1;K>=0;K--){var ee=67108864*(0|F.words[V.length+K])+(0|F.words[V.length+K-1]);for(ee=Math.min(ee/H|0,67108863),F._ishlnsubmul(V,ee,K);F.negative!==0;)ee--,F.negative=0,F._ishlnsubmul(V,1,K),F.isZero()||(F.negative^=1);te&&(te.words[K]=ee)}return te&&te.strip(),F.strip(),j!=="div"&&Z!==0&&F.iushrn(Z),{div:te||null,mod:F}},o.prototype.divmod=function(R,j,Z){return r(!R.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:this.negative!==0&&R.negative===0?(H=this.neg().divmod(R,j),j!=="mod"&&(F=H.div.neg()),j!=="div"&&(V=H.mod.neg(),Z&&V.negative!==0&&V.iadd(R)),{div:F,mod:V}):this.negative===0&&R.negative!==0?(H=this.divmod(R.neg(),j),j!=="mod"&&(F=H.div.neg()),{div:F,mod:H.mod}):this.negative&R.negative?(H=this.neg().divmod(R.neg(),j),j!=="div"&&(V=H.mod.neg(),Z&&V.negative!==0&&V.isub(R)),{div:H.div,mod:V}):R.length>this.length||this.cmp(R)<0?{div:new o(0),mod:this}:R.length===1?j==="div"?{div:this.divn(R.words[0]),mod:null}:j==="mod"?{div:null,mod:new o(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new o(this.modn(R.words[0]))}:this._wordDiv(R,j);var F,V,H},o.prototype.div=function(R){return this.divmod(R,"div",!1).div},o.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},o.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},o.prototype.divRound=function(R){var j=this.divmod(R);if(j.mod.isZero())return j.div;var Z=j.div.negative!==0?j.mod.isub(R):j.mod,F=R.ushrn(1),V=R.andln(1),H=Z.cmp(F);return H<0||V===1&&H===0?j.div:j.div.negative!==0?j.div.isubn(1):j.div.iaddn(1)},o.prototype.modn=function(R){r(R<=67108863);for(var j=67108864%R,Z=0,F=this.length-1;F>=0;F--)Z=(j*Z+(0|this.words[F]))%R;return Z},o.prototype.idivn=function(R){r(R<=67108863);for(var j=0,Z=this.length-1;Z>=0;Z--){var F=(0|this.words[Z])+67108864*j;this.words[Z]=F/R|0,j=F%R}return this.strip()},o.prototype.divn=function(R){return this.clone().idivn(R)},o.prototype.egcd=function(R){r(R.negative===0),r(!R.isZero());var j=this,Z=R.clone();j=j.negative!==0?j.umod(R):j.clone();for(var F=new o(1),V=new o(0),H=new o(0),te=new o(1),$=0;j.isEven()&&Z.isEven();)j.iushrn(1),Z.iushrn(1),++$;for(var J=Z.clone(),X=j.clone();!j.isZero();){for(var K=0,ee=1;!(j.words[0]&ee)&&K<26;++K,ee<<=1);if(K>0)for(j.iushrn(K);K-- >0;)(F.isOdd()||V.isOdd())&&(F.iadd(J),V.isub(X)),F.iushrn(1),V.iushrn(1);for(var ie=0,ae=1;!(Z.words[0]&ae)&&ie<26;++ie,ae<<=1);if(ie>0)for(Z.iushrn(ie);ie-- >0;)(H.isOdd()||te.isOdd())&&(H.iadd(J),te.isub(X)),H.iushrn(1),te.iushrn(1);j.cmp(Z)>=0?(j.isub(Z),F.isub(H),V.isub(te)):(Z.isub(j),H.isub(F),te.isub(V))}return{a:H,b:te,gcd:Z.iushln($)}},o.prototype._invmp=function(R){r(R.negative===0),r(!R.isZero());var j=this,Z=R.clone();j=j.negative!==0?j.umod(R):j.clone();for(var F,V=new o(1),H=new o(0),te=Z.clone();j.cmpn(1)>0&&Z.cmpn(1)>0;){for(var $=0,J=1;!(j.words[0]&J)&&$<26;++$,J<<=1);if($>0)for(j.iushrn($);$-- >0;)V.isOdd()&&V.iadd(te),V.iushrn(1);for(var X=0,K=1;!(Z.words[0]&K)&&X<26;++X,K<<=1);if(X>0)for(Z.iushrn(X);X-- >0;)H.isOdd()&&H.iadd(te),H.iushrn(1);j.cmp(Z)>=0?(j.isub(Z),V.isub(H)):(Z.isub(j),H.isub(V))}return(F=j.cmpn(1)===0?V:H).cmpn(0)<0&&F.iadd(R),F},o.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var j=this.clone(),Z=R.clone();j.negative=0,Z.negative=0;for(var F=0;j.isEven()&&Z.isEven();F++)j.iushrn(1),Z.iushrn(1);for(;;){for(;j.isEven();)j.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var V=j.cmp(Z);if(V<0){var H=j;j=Z,Z=H}else if(V===0||Z.cmpn(1)===0)break;j.isub(Z)}return Z.iushln(F)},o.prototype.invm=function(R){return this.egcd(R).a.umod(R)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(R){return this.words[0]&R},o.prototype.bincn=function(R){r(typeof R=="number");var j=R%26,Z=(R-j)/26,F=1<<j;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=F,this;for(var V=F,H=Z;V!==0&&H<this.length;H++){var te=0|this.words[H];V=(te+=V)>>>26,te&=67108863,this.words[H]=te}return V!==0&&(this.words[H]=V,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(R){var j,Z=R<0;if(this.negative!==0&&!Z)return-1;if(this.negative===0&&Z)return 1;if(this.strip(),this.length>1)j=1;else{Z&&(R=-R),r(R<=67108863,"Number is too big");var F=0|this.words[0];j=F===R?0:F<R?-1:1}return this.negative!==0?0|-j:j},o.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var j=this.ucmp(R);return this.negative!==0?0|-j:j},o.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var j=0,Z=this.length-1;Z>=0;Z--){var F=0|this.words[Z],V=0|R.words[Z];if(F!==V){F<V?j=-1:F>V&&(j=1);break}}return j},o.prototype.gtn=function(R){return this.cmpn(R)===1},o.prototype.gt=function(R){return this.cmp(R)===1},o.prototype.gten=function(R){return this.cmpn(R)>=0},o.prototype.gte=function(R){return this.cmp(R)>=0},o.prototype.ltn=function(R){return this.cmpn(R)===-1},o.prototype.lt=function(R){return this.cmp(R)===-1},o.prototype.lten=function(R){return this.cmpn(R)<=0},o.prototype.lte=function(R){return this.cmp(R)<=0},o.prototype.eqn=function(R){return this.cmpn(R)===0},o.prototype.eq=function(R){return this.cmp(R)===0},o.red=function(R){return new z(R)},o.prototype.toRed=function(R){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(R){return this.red=R,this},o.prototype.forceRed=function(R){return r(!this.red,"Already a number in reduction context"),this._forceRed(R)},o.prototype.redAdd=function(R){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},o.prototype.redIAdd=function(R){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},o.prototype.redSub=function(R){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},o.prototype.redISub=function(R){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},o.prototype.redShl=function(R){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},o.prototype.redMul=function(R){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},o.prototype.redIMul=function(R){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(R){return r(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var S={k256:null,p224:null,p192:null,p25519:null};function M(R,j){this.name=R,this.p=new o(j,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function O(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function I(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(R){if(typeof R=="string"){var j=o._prime(R);this.m=j.p,this.prime=j}else r(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function U(R){z.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var R=new o(null);return R.words=new Array(Math.ceil(this.n/13)),R},M.prototype.ireduce=function(R){var j,Z=R;do this.split(Z,this.tmp),j=(Z=(Z=this.imulK(Z)).iadd(this.tmp)).bitLength();while(j>this.n);var F=j<this.n?-1:Z.ucmp(this.p);return F===0?(Z.words[0]=0,Z.length=1):F>0?Z.isub(this.p):Z.strip!==void 0?Z.strip():Z._strip(),Z},M.prototype.split=function(R,j){R.iushrn(this.n,0,j)},M.prototype.imulK=function(R){return R.imul(this.k)},l(E,M),E.prototype.split=function(R,j){for(var Z=4194303,F=Math.min(R.length,9),V=0;V<F;V++)j.words[V]=R.words[V];if(j.length=F,R.length<=9)return R.words[0]=0,void(R.length=1);var H=R.words[9];for(j.words[j.length++]=H&Z,V=10;V<R.length;V++){var te=0|R.words[V];R.words[V-10]=(te&Z)<<4|H>>>22,H=te}H>>>=22,R.words[V-10]=H,H===0&&R.length>10?R.length-=10:R.length-=9},E.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var j=0,Z=0;Z<R.length;Z++){var F=0|R.words[Z];j+=977*F,R.words[Z]=67108863&j,j=64*F+(j/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R},l(O,M),l(P,M),l(I,M),I.prototype.imulK=function(R){for(var j=0,Z=0;Z<R.length;Z++){var F=19*(0|R.words[Z])+j,V=67108863&F;F>>>=26,R.words[Z]=V,j=F}return j!==0&&(R.words[R.length++]=j),R},o._prime=function(R){if(S[R])return S[R];var j;if(R==="k256")j=new E;else if(R==="p224")j=new O;else if(R==="p192")j=new P;else{if(R!=="p25519")throw new Error("Unknown prime "+R);j=new I}return S[R]=j,j},z.prototype._verify1=function(R){r(R.negative===0,"red works only with positives"),r(R.red,"red works only with red numbers")},z.prototype._verify2=function(R,j){r((R.negative|j.negative)==0,"red works only with positives"),r(R.red&&R.red===j.red,"red works only with red numbers")},z.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},z.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},z.prototype.add=function(R,j){this._verify2(R,j);var Z=R.add(j);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},z.prototype.iadd=function(R,j){this._verify2(R,j);var Z=R.iadd(j);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},z.prototype.sub=function(R,j){this._verify2(R,j);var Z=R.sub(j);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},z.prototype.isub=function(R,j){this._verify2(R,j);var Z=R.isub(j);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},z.prototype.shl=function(R,j){return this._verify1(R),this.imod(R.ushln(j))},z.prototype.imul=function(R,j){return this._verify2(R,j),this.imod(R.imul(j))},z.prototype.mul=function(R,j){return this._verify2(R,j),this.imod(R.mul(j))},z.prototype.isqr=function(R){return this.imul(R,R.clone())},z.prototype.sqr=function(R){return this.mul(R,R)},z.prototype.sqrt=function(R){if(R.isZero())return R.clone();var j=this.m.andln(3);if(r(j%2==1),j===3){var Z=this.m.add(new o(1)).iushrn(2);return this.pow(R,Z)}for(var F=this.m.subn(1),V=0;!F.isZero()&&F.andln(1)===0;)V++,F.iushrn(1);r(!F.isZero());var H=new o(1).toRed(this),te=H.redNeg(),$=this.m.subn(1).iushrn(1),J=this.m.bitLength();for(J=new o(2*J*J).toRed(this);this.pow(J,$).cmp(te)!==0;)J.redIAdd(te);for(var X=this.pow(J,F),K=this.pow(R,F.addn(1).iushrn(1)),ee=this.pow(R,F),ie=V;ee.cmp(H)!==0;){for(var ae=ee,oe=0;ae.cmp(H)!==0;oe++)ae=ae.redSqr();r(oe<ie);var fe=this.pow(X,new o(1).iushln(ie-oe-1));K=K.redMul(fe),X=fe.redSqr(),ee=ee.redMul(X),ie=oe}return K},z.prototype.invm=function(R){var j=R._invmp(this.m);return j.negative!==0?(j.negative=0,this.imod(j).redNeg()):this.imod(j)},z.prototype.pow=function(R,j){if(j.isZero())return new o(1).toRed(this);if(j.cmpn(1)===0)return R.clone();var Z=new Array(16);Z[0]=new o(1).toRed(this),Z[1]=R;for(var F=2;F<Z.length;F++)Z[F]=this.mul(Z[F-1],R);var V=Z[0],H=0,te=0,$=j.bitLength()%26;for($===0&&($=26),F=j.length-1;F>=0;F--){for(var J=j.words[F],X=$-1;X>=0;X--){var K=J>>X&1;V!==Z[0]&&(V=this.sqr(V)),K!==0||H!==0?(H<<=1,H|=K,(++te==4||F===0&&X===0)&&(V=this.mul(V,Z[H]),te=0,H=0)):te=0}$=26}return V},z.prototype.convertTo=function(R){var j=R.umod(this.m);return j===R?j.clone():j},z.prototype.convertFrom=function(R){var j=R.clone();return j.red=null,j},o.mont=function(R){return new U(R)},l(U,z),U.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},U.prototype.convertFrom=function(R){var j=this.imod(R.mul(this.rinv));return j.red=null,j},U.prototype.imul=function(R,j){if(R.isZero()||j.isZero())return R.words[0]=0,R.length=1,R;var Z=R.imul(j),F=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=Z.isub(F).iushrn(this.shift),H=V;return V.cmp(this.m)>=0?H=V.isub(this.m):V.cmpn(0)<0&&(H=V.iadd(this.m)),H._forceRed(this)},U.prototype.mul=function(R,j){if(R.isZero()||j.isZero())return new o(0)._forceRed(this);var Z=R.mul(j),F=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=Z.isub(F).iushrn(this.shift),H=V;return V.cmp(this.m)>=0?H=V.isub(this.m):V.cmpn(0)<0&&(H=V.iadd(this.m)),H._forceRed(this)},U.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}})(h=t.nmd(h),this)},2692:function(h){h.exports=function(s){var t,a,n,r=s.length,l=0;for(t=0;t<r;++t)l+=s[t].length;var o=new Array(l),u=0;for(t=0;t<r;++t){var p=s[t],c=p.length;for(a=0;a<c;++a){var b=o[u++]=new Array(c-1),g=0;for(n=0;n<c;++n)n!==a&&(b[g++]=p[n]);if(1&a){var d=b[1];b[1]=b[0],b[0]=d}}}return o}},2569:function(h,s,t){h.exports=function(b,g,d){switch(arguments.length){case 1:return a=[],p(m=b,m,c,!0),a;case 2:return typeof g=="function"?p(b,b,g,!0):function(x,y){return a=[],p(x,y,c,!1),a}(b,g);case 3:return p(b,g,d,!1);default:throw new Error("box-intersect: Invalid arguments")}var m};var a,n=t(5306),r=t(1390),l=t(2337);function o(b,g){for(var d=0;d<b;++d)if(!(g[d]<=g[d+b]))return!0;return!1}function u(b,g,d,m){for(var x=0,y=0,k=0,f=b.length;k<f;++k){var S=b[k];if(!o(g,S)){for(var M=0;M<2*g;++M)d[x++]=S[M];m[y++]=k}}return y}function p(b,g,d,m){var x=b.length,y=g.length;if(!(x<=0||y<=0)){var k=b[0].length>>>1;if(!(k<=0)){var f,S=n.mallocDouble(2*k*x),M=n.mallocInt32(x);if((x=u(b,k,S,M))>0){if(k===1&&m)r.init(x),f=r.sweepComplete(k,d,0,x,S,M,0,x,S,M);else{var E=n.mallocDouble(2*k*y),O=n.mallocInt32(y);(y=u(g,k,E,O))>0&&(r.init(x+y),f=k===1?r.sweepBipartite(k,d,0,x,S,M,0,y,E,O):l(k,d,m,x,S,M,y,E,O),n.free(E),n.free(O))}n.free(S),n.free(M)}return f}}}function c(b,g){a.push([b,g])}},7333:function(h,s){function t(a){return a?function(n,r,l,o,u,p,c,b,g,d,m){return u-o>g-b?function(x,y,k,f,S,M,E,O,P,I,z){for(var U=2*x,R=f,j=U*f;R<S;++R,j+=U){var Z=M[y+j],F=M[y+j+x],V=E[R];e:for(var H=O,te=U*O;H<P;++H,te+=U){var $=I[y+te],J=I[y+te+x],X=z[H];if(!(J<Z||F<$)){for(var K=y+1;K<x;++K){var ee=M[K+j],ie=M[K+x+j],ae=I[K+te],oe=I[K+x+te];if(ie<ae||oe<ee)continue e}var fe=k(V,X);if(fe!==void 0)return fe}}}}(n,r,l,o,u,p,c,b,g,d,m):function(x,y,k,f,S,M,E,O,P,I,z){for(var U=2*x,R=O,j=U*O;R<P;++R,j+=U){var Z=I[y+j],F=I[y+j+x],V=z[R];e:for(var H=f,te=U*f;H<S;++H,te+=U){var $=M[y+te],J=M[y+te+x],X=E[H];if(!(F<$||J<Z)){for(var K=y+1;K<x;++K){var ee=M[K+te],ie=M[K+x+te],ae=I[K+j],oe=I[K+x+j];if(ie<ae||oe<ee)continue e}var fe=k(X,V);if(fe!==void 0)return fe}}}}(n,r,l,o,u,p,c,b,g,d,m)}:function(n,r,l,o,u,p,c,b,g,d,m,x){return p-u>d-g?o?function(y,k,f,S,M,E,O,P,I,z,U){for(var R=2*y,j=S,Z=R*S;j<M;++j,Z+=R){var F=E[k+Z],V=E[k+Z+y],H=O[j];e:for(var te=P,$=R*P;te<I;++te,$+=R){var J=z[k+$],X=U[te];if(!(J<=F||V<J)){for(var K=k+1;K<y;++K){var ee=E[K+Z],ie=E[K+y+Z],ae=z[K+$],oe=z[K+y+$];if(ie<ae||oe<ee)continue e}var fe=f(X,H);if(fe!==void 0)return fe}}}}(n,r,l,u,p,c,b,g,d,m,x):function(y,k,f,S,M,E,O,P,I,z,U){for(var R=2*y,j=S,Z=R*S;j<M;++j,Z+=R){var F=E[k+Z],V=E[k+Z+y],H=O[j];e:for(var te=P,$=R*P;te<I;++te,$+=R){var J=z[k+$],X=U[te];if(!(J<F||V<J)){for(var K=k+1;K<y;++K){var ee=E[K+Z],ie=E[K+y+Z],ae=z[K+$],oe=z[K+y+$];if(ie<ae||oe<ee)continue e}var fe=f(H,X);if(fe!==void 0)return fe}}}}(n,r,l,u,p,c,b,g,d,m,x):o?function(y,k,f,S,M,E,O,P,I,z,U){for(var R=2*y,j=P,Z=R*P;j<I;++j,Z+=R){var F=z[k+Z],V=U[j];e:for(var H=S,te=R*S;H<M;++H,te+=R){var $=E[k+te],J=E[k+te+y],X=O[H];if(!(F<=$||J<F)){for(var K=k+1;K<y;++K){var ee=E[K+te],ie=E[K+y+te],ae=z[K+Z],oe=z[K+y+Z];if(ie<ae||oe<ee)continue e}var fe=f(V,X);if(fe!==void 0)return fe}}}}(n,r,l,u,p,c,b,g,d,m,x):function(y,k,f,S,M,E,O,P,I,z,U){for(var R=2*y,j=P,Z=R*P;j<I;++j,Z+=R){var F=z[k+Z],V=U[j];e:for(var H=S,te=R*S;H<M;++H,te+=R){var $=E[k+te],J=E[k+te+y],X=O[H];if(!(F<$||J<F)){for(var K=k+1;K<y;++K){var ee=E[K+te],ie=E[K+y+te],ae=z[K+Z],oe=z[K+y+Z];if(ie<ae||oe<ee)continue e}var fe=f(X,V);if(fe!==void 0)return fe}}}}(n,r,l,u,p,c,b,g,d,m,x)}}s.partial=t(!1),s.full=t(!0)},2337:function(h,s,t){h.exports=function(R,j,Z,F,V,H,te,$,J){(function(Ne,Be){var Ye=8*n.log2(Be+1)*(Ne+1)|0,We=n.nextPow2(M*Ye);O.length<We&&(a.free(O),O=a.mallocInt32(We));var et=n.nextPow2(E*Ye);P.length<et&&(a.free(P),P=a.mallocDouble(et))})(R,F+te);var X,K=0,ee=2*R;for(I(K++,0,0,F,0,te,Z?16:0,-1/0,1/0),Z||I(K++,0,0,te,0,F,1,-1/0,1/0);K>0;){var ie=(K-=1)*M,ae=O[ie],oe=O[ie+1],fe=O[ie+2],ge=O[ie+3],ve=O[ie+4],xe=O[ie+5],_e=K*E,ye=P[_e],Ce=P[_e+1],ke=1&xe,Te=!!(16&xe),le=V,ue=H,de=$,Le=J;if(ke&&(le=$,ue=J,de=V,Le=H),!(2&xe&&oe>=(fe=y(R,ae,oe,fe,le,ue,Ce))||4&xe&&(oe=k(R,ae,oe,fe,le,ue,ye))>=fe)){var we=fe-oe,Ee=ve-ge;if(Te){if(R*we*(we+Ee)<d){if((X=u.scanComplete(R,ae,j,oe,fe,le,ue,ge,ve,de,Le))!==void 0)return X;continue}}else{if(R*Math.min(we,Ee)<b){if((X=l(R,ae,j,ke,oe,fe,le,ue,ge,ve,de,Le))!==void 0)return X;continue}if(R*we*Ee<g){if((X=u.scanBipartite(R,ae,j,ke,oe,fe,le,ue,ge,ve,de,Le))!==void 0)return X;continue}}var Oe=m(R,ae,oe,fe,le,ue,ye,Ce);if(oe<Oe)if(R*(Oe-oe)<b){if((X=o(R,ae+1,j,oe,Oe,le,ue,ge,ve,de,Le))!==void 0)return X}else if(ae===R-2){if((X=ke?u.sweepBipartite(R,j,ge,ve,de,Le,oe,Oe,le,ue):u.sweepBipartite(R,j,oe,Oe,le,ue,ge,ve,de,Le))!==void 0)return X}else I(K++,ae+1,oe,Oe,ge,ve,ke,-1/0,1/0),I(K++,ae+1,ge,ve,oe,Oe,1^ke,-1/0,1/0);if(Oe<fe){var Fe=p(R,ae,ge,ve,de,Le),pe=de[ee*Fe+ae],be=x(R,ae,Fe,ve,de,Le,pe);if(be<ve&&I(K++,ae,Oe,fe,be,ve,(4|ke)+(Te?16:0),pe,Ce),ge<Fe&&I(K++,ae,Oe,fe,ge,Fe,(2|ke)+(Te?16:0),ye,pe),Fe+1===be){if((X=Te?U(R,ae,j,Oe,fe,le,ue,Fe,de,Le[Fe]):z(R,ae,j,ke,Oe,fe,le,ue,Fe,de,Le[Fe]))!==void 0)return X}else if(Fe<be){var Me;if(Te){if(Oe<(Me=f(R,ae,Oe,fe,le,ue,pe))){var De=x(R,ae,Oe,Me,le,ue,pe);if(ae===R-2){if(Oe<De&&(X=u.sweepComplete(R,j,Oe,De,le,ue,Fe,be,de,Le))!==void 0||De<Me&&(X=u.sweepBipartite(R,j,De,Me,le,ue,Fe,be,de,Le))!==void 0)return X}else Oe<De&&I(K++,ae+1,Oe,De,Fe,be,16,-1/0,1/0),De<Me&&(I(K++,ae+1,De,Me,Fe,be,0,-1/0,1/0),I(K++,ae+1,Fe,be,De,Me,1,-1/0,1/0))}}else Oe<(Me=ke?S(R,ae,Oe,fe,le,ue,pe):f(R,ae,Oe,fe,le,ue,pe))&&(ae===R-2?X=ke?u.sweepBipartite(R,j,Fe,be,de,Le,Oe,Me,le,ue):u.sweepBipartite(R,j,Oe,Me,le,ue,Fe,be,de,Le):(I(K++,ae+1,Oe,Me,Fe,be,ke,-1/0,1/0),I(K++,ae+1,Fe,be,Oe,Me,1^ke,-1/0,1/0)))}}}}};var a=t(5306),n=t(2288),r=t(7333),l=r.partial,o=r.full,u=t(1390),p=t(2464),c=t(122),b=128,g=1<<22,d=1<<22,m=c("!(lo>=p0)&&!(p1>=hi)"),x=c("lo===p0"),y=c("lo<p0"),k=c("hi<=p0"),f=c("lo<=p0&&p0<=hi"),S=c("lo<p0&&p0<=hi"),M=6,E=2,O=a.mallocInt32(1024),P=a.mallocDouble(1024);function I(R,j,Z,F,V,H,te,$,J){var X=M*R;O[X]=j,O[X+1]=Z,O[X+2]=F,O[X+3]=V,O[X+4]=H,O[X+5]=te;var K=E*R;P[K]=$,P[K+1]=J}function z(R,j,Z,F,V,H,te,$,J,X,K){var ee=2*R,ie=J*ee,ae=X[ie+j];e:for(var oe=V,fe=V*ee;oe<H;++oe,fe+=ee){var ge=te[fe+j],ve=te[fe+j+R];if(!(ae<ge||ve<ae||F&&ae===ge)){for(var xe,_e=$[oe],ye=j+1;ye<R;++ye){ge=te[fe+ye],ve=te[fe+ye+R];var Ce=X[ie+ye],ke=X[ie+ye+R];if(ve<Ce||ke<ge)continue e}if((xe=F?Z(K,_e):Z(_e,K))!==void 0)return xe}}}function U(R,j,Z,F,V,H,te,$,J,X){var K=2*R,ee=$*K,ie=J[ee+j];e:for(var ae=F,oe=F*K;ae<V;++ae,oe+=K){var fe=te[ae];if(fe!==X){var ge=H[oe+j],ve=H[oe+j+R];if(!(ie<ge||ve<ie)){for(var xe=j+1;xe<R;++xe){ge=H[oe+xe],ve=H[oe+xe+R];var _e=J[ee+xe],ye=J[ee+xe+R];if(ve<_e||ye<ge)continue e}var Ce=Z(fe,X);if(Ce!==void 0)return Ce}}}}},2464:function(h,s,t){h.exports=function(l,o,u,p,c,b){if(p<=u+1)return u;for(var g=u,d=p,m=p+u>>>1,x=2*l,y=m,k=c[x*m+o];g<d;){if(d-g<n){r(l,o,g,d,c,b),k=c[x*m+o];break}var f=d-g,S=Math.random()*f+g|0,M=c[x*S+o],E=Math.random()*f+g|0,O=c[x*E+o],P=Math.random()*f+g|0,I=c[x*P+o];M<=O?I>=O?(y=E,k=O):M>=I?(y=S,k=M):(y=P,k=I):O>=I?(y=E,k=O):I>=M?(y=S,k=M):(y=P,k=I);for(var z=x*(d-1),U=x*y,R=0;R<x;++R,++z,++U){var j=c[z];c[z]=c[U],c[U]=j}var Z=b[d-1];for(b[d-1]=b[y],b[y]=Z,z=x*(d-1),U=x*(y=a(l,o,g,d-1,c,b,k)),R=0;R<x;++R,++z,++U)j=c[z],c[z]=c[U],c[U]=j;if(Z=b[d-1],b[d-1]=b[y],b[y]=Z,m<y){for(d=y-1;g<d&&c[x*(d-1)+o]===k;)d-=1;d+=1}else{if(!(y<m))break;for(g=y+1;g<d&&c[x*g+o]===k;)g+=1}}return a(l,o,u,m,c,b,c[x*m+o])};var a=t(122)("lo<p0"),n=8;function r(l,o,u,p,c,b){for(var g=2*l,d=g*(u+1)+o,m=u+1;m<p;++m,d+=g)for(var x=c[d],y=m,k=g*(m-1);y>u&&c[k+o]>x;--y,k-=g){for(var f=k,S=k+g,M=0;M<g;++M,++f,++S){var E=c[f];c[f]=c[S],c[S]=E}var O=b[y];b[y]=b[y-1],b[y-1]=O}}},122:function(h){h.exports=function(t){return s[t]};var s={"lo===p0":function(t,a,n,r,l,o,u){for(var p=2*t,c=p*n,b=c,g=n,d=a,m=n;r>m;++m,c+=p)if(l[c+d]===u)if(g===m)g+=1,b+=p;else{for(var x=0;p>x;++x){var y=l[c+x];l[c+x]=l[b],l[b++]=y}var k=o[m];o[m]=o[g],o[g++]=k}return g},"lo<p0":function(t,a,n,r,l,o,u){for(var p=2*t,c=p*n,b=c,g=n,d=a,m=n;r>m;++m,c+=p)if(l[c+d]<u)if(g===m)g+=1,b+=p;else{for(var x=0;p>x;++x){var y=l[c+x];l[c+x]=l[b],l[b++]=y}var k=o[m];o[m]=o[g],o[g++]=k}return g},"lo<=p0":function(t,a,n,r,l,o,u){for(var p=2*t,c=p*n,b=c,g=n,d=t+a,m=n;r>m;++m,c+=p)if(l[c+d]<=u)if(g===m)g+=1,b+=p;else{for(var x=0;p>x;++x){var y=l[c+x];l[c+x]=l[b],l[b++]=y}var k=o[m];o[m]=o[g],o[g++]=k}return g},"hi<=p0":function(t,a,n,r,l,o,u){for(var p=2*t,c=p*n,b=c,g=n,d=t+a,m=n;r>m;++m,c+=p)if(l[c+d]<=u)if(g===m)g+=1,b+=p;else{for(var x=0;p>x;++x){var y=l[c+x];l[c+x]=l[b],l[b++]=y}var k=o[m];o[m]=o[g],o[g++]=k}return g},"lo<p0&&p0<=hi":function(t,a,n,r,l,o,u){for(var p=2*t,c=p*n,b=c,g=n,d=a,m=t+a,x=n;r>x;++x,c+=p){var y=l[c+d],k=l[c+m];if(y<u&&u<=k)if(g===x)g+=1,b+=p;else{for(var f=0;p>f;++f){var S=l[c+f];l[c+f]=l[b],l[b++]=S}var M=o[x];o[x]=o[g],o[g++]=M}}return g},"lo<=p0&&p0<=hi":function(t,a,n,r,l,o,u){for(var p=2*t,c=p*n,b=c,g=n,d=a,m=t+a,x=n;r>x;++x,c+=p){var y=l[c+d],k=l[c+m];if(y<=u&&u<=k)if(g===x)g+=1,b+=p;else{for(var f=0;p>f;++f){var S=l[c+f];l[c+f]=l[b],l[b++]=S}var M=o[x];o[x]=o[g],o[g++]=M}}return g},"!(lo>=p0)&&!(p1>=hi)":function(t,a,n,r,l,o,u,p){for(var c=2*t,b=c*n,g=b,d=n,m=a,x=t+a,y=n;r>y;++y,b+=c){var k=l[b+m],f=l[b+x];if(!(k>=u||p>=f))if(d===y)d+=1,g+=c;else{for(var S=0;c>S;++S){var M=l[b+S];l[b+S]=l[g],l[g++]=M}var E=o[y];o[y]=o[d],o[d++]=E}}return d}}},309:function(h){h.exports=function(c,b){b<=4*s?t(0,b-1,c):p(0,b-1,c)};var s=32;function t(c,b,g){for(var d=2*(c+1),m=c+1;m<=b;++m){for(var x=g[d++],y=g[d++],k=m,f=d-2;k-- >c;){var S=g[f-2],M=g[f-1];if(S<x||S===x&&M<y)break;g[f]=S,g[f+1]=M,f-=2}g[f]=x,g[f+1]=y}}function a(c,b,g){b*=2;var d=g[c*=2],m=g[c+1];g[c]=g[b],g[c+1]=g[b+1],g[b]=d,g[b+1]=m}function n(c,b,g){b*=2,g[c*=2]=g[b],g[c+1]=g[b+1]}function r(c,b,g,d){b*=2,g*=2;var m=d[c*=2],x=d[c+1];d[c]=d[b],d[c+1]=d[b+1],d[b]=d[g],d[b+1]=d[g+1],d[g]=m,d[g+1]=x}function l(c,b,g,d,m){b*=2,m[c*=2]=m[b],m[b]=g,m[c+1]=m[b+1],m[b+1]=d}function o(c,b,g){b*=2;var d=g[c*=2],m=g[b];return!(d<m)&&(d!==m||g[c+1]>g[b+1])}function u(c,b,g,d){var m=d[c*=2];return m<b||m===b&&d[c+1]<g}function p(c,b,g){var d=(b-c+1)/6|0,m=c+d,x=b-d,y=c+b>>1,k=y-d,f=y+d,S=m,M=k,E=y,O=f,P=x,I=c+1,z=b-1,U=0;o(S,M,g)&&(U=S,S=M,M=U),o(O,P,g)&&(U=O,O=P,P=U),o(S,E,g)&&(U=S,S=E,E=U),o(M,E,g)&&(U=M,M=E,E=U),o(S,O,g)&&(U=S,S=O,O=U),o(E,O,g)&&(U=E,E=O,O=U),o(M,P,g)&&(U=M,M=P,P=U),o(M,E,g)&&(U=M,M=E,E=U),o(O,P,g)&&(U=O,O=P,P=U);for(var R=g[2*M],j=g[2*M+1],Z=g[2*O],F=g[2*O+1],V=2*S,H=2*E,te=2*P,$=2*m,J=2*y,X=2*x,K=0;K<2;++K){var ee=g[V+K],ie=g[H+K],ae=g[te+K];g[$+K]=ee,g[J+K]=ie,g[X+K]=ae}n(k,c,g),n(f,b,g);for(var oe=I;oe<=z;++oe)if(u(oe,R,j,g))oe!==I&&a(oe,I,g),++I;else if(!u(oe,Z,F,g))for(;;){if(u(z,Z,F,g)){u(z,R,j,g)?(r(oe,I,z,g),++I,--z):(a(oe,z,g),--z);break}if(--z<oe)break}l(c,I-1,R,j,g),l(b,z+1,Z,F,g),I-2-c<=s?t(c,I-2,g):p(c,I-2,g),b-(z+2)<=s?t(z+2,b,g):p(z+2,b,g),z-I<=s?t(I,z,g):p(I,z,g)}},1390:function(h,s,t){h.exports={init:function(k){var f=n.nextPow2(k);u.length<f&&(a.free(u),u=a.mallocInt32(f)),p.length<f&&(a.free(p),p=a.mallocInt32(f)),c.length<f&&(a.free(c),c=a.mallocInt32(f)),b.length<f&&(a.free(b),b=a.mallocInt32(f)),g.length<f&&(a.free(g),g=a.mallocInt32(f)),d.length<f&&(a.free(d),d=a.mallocInt32(f));var S=8*f;m.length<S&&(a.free(m),m=a.mallocDouble(S))},sweepBipartite:function(k,f,S,M,E,O,P,I,z,U){for(var R=0,j=2*k,Z=k-1,F=j-1,V=S;V<M;++V){var H=O[V],te=j*V;m[R++]=E[te+Z],m[R++]=-(H+1),m[R++]=E[te+F],m[R++]=H}for(V=P;V<I;++V){H=U[V]+l;var $=j*V;m[R++]=z[$+Z],m[R++]=-H,m[R++]=z[$+F],m[R++]=H}var J=R>>>1;r(m,J);var X=0,K=0;for(V=0;V<J;++V){var ee=0|m[2*V+1];if(ee>=l)x(c,b,K--,ee=ee-l|0);else if(ee>=0)x(u,p,X--,ee);else if(ee<=-l){ee=-ee-l|0;for(var ie=0;ie<X;++ie)if((ae=f(u[ie],ee))!==void 0)return ae;y(c,b,K++,ee)}else{for(ee=-ee-1|0,ie=0;ie<K;++ie){var ae;if((ae=f(ee,c[ie]))!==void 0)return ae}y(u,p,X++,ee)}}},sweepComplete:function(k,f,S,M,E,O,P,I,z,U){for(var R=0,j=2*k,Z=k-1,F=j-1,V=S;V<M;++V){var H=O[V]+1<<1,te=j*V;m[R++]=E[te+Z],m[R++]=-H,m[R++]=E[te+F],m[R++]=H}for(V=P;V<I;++V){H=U[V]+1<<1;var $=j*V;m[R++]=z[$+Z],m[R++]=1|-H,m[R++]=z[$+F],m[R++]=1|H}var J=R>>>1;r(m,J);var X=0,K=0,ee=0;for(V=0;V<J;++V){var ie=0|m[2*V+1],ae=1&ie;if(V<J-1&&ie>>1==m[2*V+3]>>1&&(ae=2,V+=1),ie<0){for(var oe=-(ie>>1)-1,fe=0;fe<ee;++fe)if((ge=f(g[fe],oe))!==void 0)return ge;if(ae!==0){for(fe=0;fe<X;++fe)if((ge=f(u[fe],oe))!==void 0)return ge}if(ae!==1)for(fe=0;fe<K;++fe){var ge;if((ge=f(c[fe],oe))!==void 0)return ge}ae===0?y(u,p,X++,oe):ae===1?y(c,b,K++,oe):ae===2&&y(g,d,ee++,oe)}else oe=(ie>>1)-1,ae===0?x(u,p,X--,oe):ae===1?x(c,b,K--,oe):ae===2&&x(g,d,ee--,oe)}},scanBipartite:function(k,f,S,M,E,O,P,I,z,U,R,j){var Z=0,F=2*k,V=f,H=f+k,te=1,$=1;M?$=l:te=l;for(var J=E;J<O;++J){var X=J+te,K=F*J;m[Z++]=P[K+V],m[Z++]=-X,m[Z++]=P[K+H],m[Z++]=X}for(J=z;J<U;++J){X=J+$;var ee=F*J;m[Z++]=R[ee+V],m[Z++]=-X}var ie=Z>>>1;r(m,ie);var ae=0;for(J=0;J<ie;++J){var oe=0|m[2*J+1];if(oe<0){var fe=!1;if((X=-oe)>=l?(fe=!M,X-=l):(fe=!!M,X-=1),fe)y(u,p,ae++,X);else{var ge=j[X],ve=F*X,xe=R[ve+f+1],_e=R[ve+f+1+k];e:for(var ye=0;ye<ae;++ye){var Ce=u[ye],ke=F*Ce;if(!(_e<P[ke+f+1]||P[ke+f+1+k]<xe)){for(var Te=f+2;Te<k;++Te)if(R[ve+Te+k]<P[ke+Te]||P[ke+Te+k]<R[ve+Te])continue e;var le,ue=I[Ce];if((le=M?S(ge,ue):S(ue,ge))!==void 0)return le}}}}else x(u,p,ae--,oe-te)}},scanComplete:function(k,f,S,M,E,O,P,I,z,U,R){for(var j=0,Z=2*k,F=f,V=f+k,H=M;H<E;++H){var te=H+l,$=Z*H;m[j++]=O[$+F],m[j++]=-te,m[j++]=O[$+V],m[j++]=te}for(H=I;H<z;++H){te=H+1;var J=Z*H;m[j++]=U[J+F],m[j++]=-te}var X=j>>>1;r(m,X);var K=0;for(H=0;H<X;++H){var ee=0|m[2*H+1];if(ee<0)if((te=-ee)>=l)u[K++]=te-l;else{var ie=R[te-=1],ae=Z*te,oe=U[ae+f+1],fe=U[ae+f+1+k];e:for(var ge=0;ge<K;++ge){var ve=u[ge],xe=P[ve];if(xe===ie)break;var _e=Z*ve;if(!(fe<O[_e+f+1]||O[_e+f+1+k]<oe)){for(var ye=f+2;ye<k;++ye)if(U[ae+ye+k]<O[_e+ye]||O[_e+ye+k]<U[ae+ye])continue e;var Ce=S(xe,ie);if(Ce!==void 0)return Ce}}}else{for(te=ee-l,ge=K-1;ge>=0;--ge)if(u[ge]===te){for(ye=ge+1;ye<K;++ye)u[ye-1]=u[ye];break}--K}}}};var a=t(5306),n=t(2288),r=t(309),l=1<<28,o=1024,u=a.mallocInt32(o),p=a.mallocInt32(o),c=a.mallocInt32(o),b=a.mallocInt32(o),g=a.mallocInt32(o),d=a.mallocInt32(o),m=a.mallocDouble(8192);function x(k,f,S,M){var E=f[M],O=k[S-1];k[E]=O,f[O]=E}function y(k,f,S,M){k[S]=M,f[M]=S}},7761:function(h,s,t){var a=t(9971),n=t(743),r=t(2161),l=t(7098);function o(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,b){return c[0]-b[0]||c[1]-b[1]}function p(c,b,g){return b in c?c[b]:g}h.exports=function(c,b,g){Array.isArray(b)?(g=g||{},b=b||[]):(g=b||{},b=[]);var d=!!p(g,"delaunay",!0),m=!!p(g,"interior",!0),x=!!p(g,"exterior",!0),y=!!p(g,"infinity",!1);if(!m&&!x||c.length===0)return[];var k=a(c,b);if(d||m!==x||y){for(var f=n(c.length,function(E){return E.map(o).sort(u)}(b)),S=0;S<k.length;++S){var M=k[S];f.addTriangle(M[0],M[1],M[2])}return d&&r(c,f),x?m?y?l(f,0,y):f.cells():l(f,1,y):l(f,-1)}return k}},2161:function(h,s,t){var a=t(2227)[4];function n(r,l,o,u,p,c){var b=l.opposite(u,p);if(!(b<0)){if(p<u){var g=u;u=p,p=g,g=c,c=b,b=g}l.isConstraint(u,p)||a(r[u],r[p],r[c],r[b])<0&&o.push(u,p)}}t(5070),h.exports=function(r,l){for(var o=[],u=r.length,p=l.stars,c=0;c<u;++c)for(var b=p[c],g=1;g<b.length;g+=2)if(!((y=b[g])<c||l.isConstraint(c,y))){for(var d=b[g-1],m=-1,x=1;x<b.length;x+=2)if(b[x-1]===y){m=b[x];break}m<0||a(r[c],r[y],r[d],r[m])<0&&o.push(c,y)}for(;o.length>0;){for(var y=o.pop(),k=(d=-1,m=-1,b=p[c=o.pop()],1);k<b.length;k+=2){var f=b[k-1],S=b[k];f===y?m=S:S===y&&(d=f)}d<0||m<0||a(r[c],r[y],r[d],r[m])>=0||(l.flip(c,y),n(r,l,o,d,c,m),n(r,l,o,c,m,d),n(r,l,o,m,y,d),n(r,l,o,y,d,m))}}},7098:function(h,s,t){var a,n=t(5070);function r(o,u,p,c,b,g,d){this.cells=o,this.neighbor=u,this.flags=c,this.constraint=p,this.active=b,this.next=g,this.boundary=d}function l(o,u){return o[0]-u[0]||o[1]-u[1]||o[2]-u[2]}h.exports=function(o,u,p){var c=function(P,I){for(var z=P.cells(),U=z.length,R=0;R<U;++R){var j=(ee=z[R])[0],Z=ee[1],F=ee[2];Z<F?Z<j&&(ee[0]=Z,ee[1]=F,ee[2]=j):F<j&&(ee[0]=F,ee[1]=j,ee[2]=Z)}z.sort(l);var V=new Array(U);for(R=0;R<V.length;++R)V[R]=0;var H=[],te=[],$=new Array(3*U),J=new Array(3*U),X=null;I&&(X=[]);var K=new r(z,$,J,V,H,te,X);for(R=0;R<U;++R)for(var ee=z[R],ie=0;ie<3;++ie){j=ee[ie],Z=ee[(ie+1)%3];var ae=$[3*R+ie]=K.locate(Z,j,P.opposite(Z,j)),oe=J[3*R+ie]=P.isConstraint(j,Z);ae<0&&(oe?te.push(R):(H.push(R),V[R]=1),I&&X.push([Z,j,-1]))}return K}(o,p);if(u===0)return p?c.cells.concat(c.boundary):c.cells;for(var b=1,g=c.active,d=c.next,m=c.flags,x=c.cells,y=c.constraint,k=c.neighbor;g.length>0||d.length>0;){for(;g.length>0;){var f=g.pop();if(m[f]!==-b){m[f]=b,x[f];for(var S=0;S<3;++S){var M=k[3*f+S];M>=0&&m[M]===0&&(y[3*f+S]?d.push(M):(g.push(M),m[M]=b))}}}var E=d;d=g,g=E,d.length=0,b=-b}var O=function(P,I,z){for(var U=0,R=0;R<P.length;++R)I[R]===z&&(P[U++]=P[R]);return P.length=U,P}(x,m,u);return p?O.concat(c.boundary):O},r.prototype.locate=(a=[0,0,0],function(o,u,p){var c=o,b=u,g=p;return u<p?u<o&&(c=u,b=p,g=o):p<o&&(c=p,b=o,g=u),c<0?-1:(a[0]=c,a[1]=b,a[2]=g,n.eq(this.cells,a,l))})},9971:function(h,s,t){var a=t(5070),n=t(417)[3];function r(d,m,x,y,k){this.a=d,this.b=m,this.idx=x,this.lowerIds=y,this.upperIds=k}function l(d,m,x,y){this.a=d,this.b=m,this.type=x,this.idx=y}function o(d,m){var x=d.a[0]-m.a[0]||d.a[1]-m.a[1]||d.type-m.type;return x||(d.type!==0&&(x=n(d.a,d.b,m.b))?x:d.idx-m.idx)}function u(d,m){return n(d.a,d.b,m)}function p(d,m,x,y,k){for(var f=a.lt(m,y,u),S=a.gt(m,y,u),M=f;M<S;++M){for(var E=m[M],O=E.lowerIds,P=O.length;P>1&&n(x[O[P-2]],x[O[P-1]],y)>0;)d.push([O[P-1],O[P-2],k]),P-=1;O.length=P,O.push(k);var I=E.upperIds;for(P=I.length;P>1&&n(x[I[P-2]],x[I[P-1]],y)<0;)d.push([I[P-2],I[P-1],k]),P-=1;I.length=P,I.push(k)}}function c(d,m){var x;return(x=d.a[0]<m.a[0]?n(d.a,d.b,m.a):n(m.b,m.a,d.a))?x:(x=m.b[0]<d.b[0]?n(d.a,d.b,m.b):n(m.b,m.a,d.b))||d.idx-m.idx}function b(d,m,x){var y=a.le(d,x,c),k=d[y],f=k.upperIds,S=f[f.length-1];k.upperIds=[S],d.splice(y+1,0,new r(x.a,x.b,x.idx,[S],f))}function g(d,m,x){var y=x.a;x.a=x.b,x.b=y;var k=a.eq(d,x,c),f=d[k];d[k-1].upperIds=f.upperIds,d.splice(k,1)}h.exports=function(d,m){for(var x=d.length,y=m.length,k=[],f=0;f<x;++f)k.push(new l(d[f],null,0,f));for(f=0;f<y;++f){var S=m[f],M=d[S[0]],E=d[S[1]];M[0]<E[0]?k.push(new l(M,E,2,f),new l(E,M,1,f)):M[0]>E[0]&&k.push(new l(E,M,2,f),new l(M,E,1,f))}k.sort(o);for(var O=k[0].a[0]-(1+Math.abs(k[0].a[0]))*Math.pow(2,-52),P=[new r([O,1],[O,0],-1,[],[])],I=[],z=(f=0,k.length);f<z;++f){var U=k[f],R=U.type;R===0?p(I,P,d,U.a,U.idx):R===2?b(P,0,U):g(P,0,U)}return I}},743:function(h,s,t){var a=t(5070);function n(o,u){this.stars=o,this.edges=u}h.exports=function(o,u){for(var p=new Array(o),c=0;c<o;++c)p[c]=[];return new n(p,u)};var r=n.prototype;function l(o,u,p){for(var c=1,b=o.length;c<b;c+=2)if(o[c-1]===u&&o[c]===p)return o[c-1]=o[b-2],o[c]=o[b-1],void(o.length=b-2)}r.isConstraint=function(){var o=[0,0];function u(p,c){return p[0]-c[0]||p[1]-c[1]}return function(p,c){return o[0]=Math.min(p,c),o[1]=Math.max(p,c),a.eq(this.edges,o,u)>=0}}(),r.removeTriangle=function(o,u,p){var c=this.stars;l(c[o],u,p),l(c[u],p,o),l(c[p],o,u)},r.addTriangle=function(o,u,p){var c=this.stars;c[o].push(u,p),c[u].push(p,o),c[p].push(o,u)},r.opposite=function(o,u){for(var p=this.stars[u],c=1,b=p.length;c<b;c+=2)if(p[c]===o)return p[c-1];return-1},r.flip=function(o,u){var p=this.opposite(o,u),c=this.opposite(u,o);this.removeTriangle(o,u,p),this.removeTriangle(u,o,c),this.addTriangle(o,c,p),this.addTriangle(u,p,c)},r.edges=function(){for(var o=this.stars,u=[],p=0,c=o.length;p<c;++p)for(var b=o[p],g=0,d=b.length;g<d;g+=2)u.push([b[g],b[g+1]]);return u},r.cells=function(){for(var o=this.stars,u=[],p=0,c=o.length;p<c;++p)for(var b=o[p],g=0,d=b.length;g<d;g+=2){var m=b[g],x=b[g+1];p<Math.min(m,x)&&u.push([p,m,x])}return u}},9887:function(h){h.exports=function(s){for(var t=1,a=1;a<s.length;++a)for(var n=0;n<a;++n)if(s[a]<s[n])t=-t;else if(s[n]===s[a])return 0;return t}},9243:function(h,s,t){var a=t(3094),n=t(6606);function r(u,p){for(var c=0,b=u.length,g=0;g<b;++g)c+=u[g]*p[g];return c}function l(u){var p=u.length;if(p===0)return[];u[0].length;var c=a([u.length+1,u.length+1],1),b=a([u.length+1],1);c[p][p]=0;for(var g=0;g<p;++g){for(var d=0;d<=g;++d)c[d][g]=c[g][d]=2*r(u[g],u[d]);b[g]=r(u[g],u[g])}var m=n(c,b),x=0,y=m[p+1];for(g=0;g<y.length;++g)x+=y[g];var k=new Array(p);for(g=0;g<p;++g){y=m[g];var f=0;for(d=0;d<y.length;++d)f+=y[d];k[g]=f/x}return k}function o(u){if(u.length===0)return[];for(var p=u[0].length,c=a([p]),b=l(u),g=0;g<u.length;++g)for(var d=0;d<p;++d)c[d]+=u[g][d]*b[g];return c}o.barycenetric=l,h.exports=o},1778:function(h,s,t){h.exports=function(n){for(var r=a(n),l=0,o=0;o<n.length;++o)for(var u=n[o],p=0;p<r.length;++p)l+=Math.pow(u[p]-r[p],2);return Math.sqrt(l/n.length)};var a=t(9243)},197:function(h,s,t){h.exports=function(S,M,E){var O;if(E){O=M;for(var P=new Array(M.length),I=0;I<M.length;++I){var z=M[I];P[I]=[z[0],z[1],E[I]]}M=P}for(var U=function(R,j,Z){var F=m(R,[],d(R));return k(j,F,Z),!!F}(S,M,!!E);f(S,M,!!E);)U=!0;if(E&&U)for(O.length=0,E.length=0,I=0;I<M.length;++I)z=M[I],O.push([z[0],z[1]]),E.push(z[2]);return U};var a=t(1731),n=t(2569),r=t(4434),l=t(5125),o=t(8846),u=t(7999),p=t(2826),c=t(8551),b=t(5528);function g(S){var M=u(S);return[c(M,-1/0),c(M,1/0)]}function d(S){for(var M=new Array(S.length),E=0;E<S.length;++E){var O=S[E];M[E]=[c(O[0],-1/0),c(O[1],-1/0),c(O[0],1/0),c(O[1],1/0)]}return M}function m(S,M,E){for(var O=M.length,P=new a(O),I=[],z=0;z<M.length;++z){var U=M[z],R=g(U[0]),j=g(U[1]);I.push([c(R[0],-1/0),c(j[0],-1/0),c(R[1],1/0),c(j[1],1/0)])}n(I,function(te,$){P.link(te,$)});var Z=!0,F=new Array(O);for(z=0;z<O;++z)(H=P.find(z))!==z&&(Z=!1,S[H]=[Math.min(S[z][0],S[H][0]),Math.min(S[z][1],S[H][1])]);if(Z)return null;var V=0;for(z=0;z<O;++z){var H;(H=P.find(z))===z?(F[z]=V,S[V++]=S[z]):F[z]=-1}for(S.length=V,z=0;z<O;++z)F[z]<0&&(F[z]=F[P.find(z)]);return F}function x(S,M){return S[0]-M[0]||S[1]-M[1]}function y(S,M){return S[0]-M[0]||S[1]-M[1]||(S[2]<M[2]?-1:S[2]>M[2]?1:0)}function k(S,M,E){if(S.length!==0){if(M)for(var O=0;O<S.length;++O){var P=M[(z=S[O])[0]],I=M[z[1]];z[0]=Math.min(P,I),z[1]=Math.max(P,I)}else for(O=0;O<S.length;++O){var z;P=(z=S[O])[0],I=z[1],z[0]=Math.min(P,I),z[1]=Math.max(P,I)}E?S.sort(y):S.sort(x);var U=1;for(O=1;O<S.length;++O){var R=S[O-1],j=S[O];(j[0]!==R[0]||j[1]!==R[1]||E&&j[2]!==R[2])&&(S[U++]=j)}S.length=U}}function f(S,M,E){var O=function(R,j){for(var Z=new Array(j.length),F=0;F<j.length;++F){var V=j[F],H=R[V[0]],te=R[V[1]];Z[F]=[c(Math.min(H[0],te[0]),-1/0),c(Math.min(H[1],te[1]),-1/0),c(Math.max(H[0],te[0]),1/0),c(Math.max(H[1],te[1]),1/0)]}return Z}(S,M),P=function(R,j,Z){var F=[];return n(Z,function(V,H){var te=j[V],$=j[H];if(te[0]!==$[0]&&te[0]!==$[1]&&te[1]!==$[0]&&te[1]!==$[1]){var J=R[te[0]],X=R[te[1]],K=R[$[0]],ee=R[$[1]];r(J,X,K,ee)&&F.push([V,H])}}),F}(S,M,O),I=function(R,j,Z,F){var V=[];return n(Z,F,function(H,te){var $=j[H];if($[0]!==te&&$[1]!==te){var J=R[te],X=R[$[0]],K=R[$[1]];r(X,K,J,J)&&V.push([H,te])}}),V}(S,M,O,d(S)),z=function(R,j,Z,F,V){var H,te,$=R.map(function(le){return[l(le[0]),l(le[1])]});for(H=0;H<Z.length;++H){var J=Z[H];te=J[0];var X=J[1],K=j[te],ee=j[X],ie=b(p(R[K[0]]),p(R[K[1]]),p(R[ee[0]]),p(R[ee[1]]));if(ie){var ae=R.length;R.push([u(ie[0]),u(ie[1])]),$.push(ie),F.push([te,ae],[X,ae])}}for(F.sort(function(le,ue){if(le[0]!==ue[0])return le[0]-ue[0];var de=$[le[1]],Le=$[ue[1]];return o(de[0],Le[0])||o(de[1],Le[1])}),H=F.length-1;H>=0;--H){var oe=j[te=(ke=F[H])[0]],fe=oe[0],ge=oe[1],ve=R[fe],xe=R[ge];if((ve[0]-xe[0]||ve[1]-xe[1])<0){var _e=fe;fe=ge,ge=_e}oe[0]=fe;var ye,Ce=oe[1]=ke[1];for(V&&(ye=oe[2]);H>0&&F[H-1][0]===te;){var ke,Te=(ke=F[--H])[1];V?j.push([Ce,Te,ye]):j.push([Ce,Te]),Ce=Te}V?j.push([Ce,ge,ye]):j.push([Ce,ge])}return $}(S,M,P,I,E),U=m(S,z);return k(M,U,E),!!U||P.length>0||I.length>0}},5528:function(h,s,t){h.exports=function(b,g,d,m){var x=o(g,b),y=o(m,d),k=c(x,y);if(l(k)===0)return null;var f=c(y,o(b,d)),S=n(f,k),M=p(x,S);return u(b,M)};var a=t(3962),n=t(9189),r=t(4354),l=t(4951),o=t(6695),u=t(7584),p=t(4469);function c(b,g){return r(a(b[0],g[1]),a(b[1],g[0]))}},5692:function(h){h.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(h,s,t){var a=t(5692),n=t(3578);function r(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function l(u){for(var p,c="#",b=0;b<3;++b)c+=("00"+(p=(p=u[b]).toString(16))).substr(p.length);return c}function o(u){return"rgba("+u.join(",")+")"}h.exports=function(u){var p,c,b,g,d,m,x,y,k,f;if(u||(u={}),y=(u.nshades||72)-1,x=u.format||"hex",(m=u.colormap)||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!a[m])throw Error(m+" not a supported colorscale");d=a[m]}else{if(!Array.isArray(m))throw Error("unsupported colormap option",m);d=m.slice()}if(d.length>y+1)throw new Error(m+" map requires nshades to be at least size "+d.length);k=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],p=d.map(function(P){return Math.round(P.index*y)}),k[0]=Math.min(Math.max(k[0],0),1),k[1]=Math.min(Math.max(k[1],0),1);var S=d.map(function(P,I){var z=d[I].index,U=d[I].rgb.slice();return U.length===4&&U[3]>=0&&U[3]<=1||(U[3]=k[0]+(k[1]-k[0])*z),U}),M=[];for(f=0;f<p.length-1;++f){g=p[f+1]-p[f],c=S[f],b=S[f+1];for(var E=0;E<g;E++){var O=E/g;M.push([Math.round(n(c[0],b[0],O)),Math.round(n(c[1],b[1],O)),Math.round(n(c[2],b[2],O)),n(c[3],b[3],O)])}}return M.push(d[d.length-1].rgb.concat(k[1])),x==="hex"?M=M.map(l):x==="rgbaString"?M=M.map(o):x==="float"&&(M=M.map(r)),M}},9398:function(h,s,t){h.exports=function(p,c,b,g){var d=a(c,b,g);if(d===0){var m=n(a(p,c,b)),x=n(a(p,c,g));if(m===x){if(m===0){var y=u(p,c,b);return y===u(p,c,g)?0:y?1:-1}return 0}return x===0?m>0||u(p,c,g)?-1:1:m===0?x>0||u(p,c,b)?1:-1:n(x-m)}var k=a(p,c,b);return k>0?d>0&&a(p,c,g)>0?1:-1:k<0?d>0||a(p,c,g)>0?1:-1:a(p,c,g)>0||u(p,c,b)?1:-1};var a=t(417),n=t(7538),r=t(87),l=t(2019),o=t(9662);function u(p,c,b){var g=r(p[0],-c[0]),d=r(p[1],-c[1]),m=r(b[0],-c[0]),x=r(b[1],-c[1]),y=o(l(g,m),l(d,x));return y[y.length-1]>=0}},7538:function(h){h.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(h){h.exports=function(a,n){var r=a.length,l=a.length-n.length;if(l)return l;switch(r){case 0:return 0;case 1:return a[0]-n[0];case 2:return a[0]+a[1]-n[0]-n[1]||s(a[0],a[1])-s(n[0],n[1]);case 3:var o=a[0]+a[1],u=n[0]+n[1];if(l=o+a[2]-(u+n[2]))return l;var p=s(a[0],a[1]),c=s(n[0],n[1]);return s(p,a[2])-s(c,n[2])||s(p+a[2],o)-s(c+n[2],u);case 4:var b=a[0],g=a[1],d=a[2],m=a[3],x=n[0],y=n[1],k=n[2],f=n[3];return b+g+d+m-(x+y+k+f)||s(b,g,d,m)-s(x,y,k,f,x)||s(b+g,b+d,b+m,g+d,g+m,d+m)-s(x+y,x+k,x+f,y+k,y+f,k+f)||s(b+g+d,b+g+m,b+d+m,g+d+m)-s(x+y+k,x+y+f,x+k+f,y+k+f);default:for(var S=a.slice().sort(t),M=n.slice().sort(t),E=0;E<r;++E)if(l=S[E]-M[E])return l;return 0}};var s=Math.min;function t(a,n){return a-n}},1284:function(h,s,t){var a=t(9209),n=t(9887);h.exports=function(r,l){return a(r,l)||n(r)-n(l)}},5537:function(h,s,t){var a=t(8950),n=t(8722),r=t(3332);h.exports=function(l){var o=l.length;if(o===0)return[];if(o===1)return[[0]];var u=l[0].length;return u===0?[]:u===1?a(l):u===2?n(l):r(l,u)}},8950:function(h){h.exports=function(s){for(var t=0,a=0,n=1;n<s.length;++n)s[n][0]<s[t][0]&&(t=n),s[n][0]>s[a][0]&&(a=n);return t<a?[[t],[a]]:t>a?[[a],[t]]:[[t]]}},8722:function(h,s,t){h.exports=function(n){var r=a(n),l=r.length;if(l<=2)return[];for(var o=new Array(l),u=r[l-1],p=0;p<l;++p){var c=r[p];o[p]=[u,c],u=c}return o};var a=t(3266)},3332:function(h,s,t){h.exports=function(r,l){try{return a(r,!0)}catch{var o=n(r);if(o.length<=l)return[];var u=function(c,b){for(var g=c.length,d=new Array(g),m=0;m<b.length;++m)d[m]=c[b[m]];var x=b.length;for(m=0;m<g;++m)b.indexOf(m)<0&&(d[x++]=c[m]);return d}(r,o);return function(c,b){for(var g=c.length,d=b.length,m=0;m<g;++m)for(var x=c[m],y=0;y<x.length;++y){var k=x[y];if(k<d)x[y]=b[k];else{k-=d;for(var f=0;f<d;++f)k>=b[f]&&(k+=1);x[y]=k}}return c}(a(u,!0),o)}};var a=t(2183),n=t(2153)},9680:function(h){h.exports=function(s,t,a,n,r,l){var o=r-1,u=r*r,p=o*o,c=(1+2*r)*p,b=r*p,g=u*(3-2*r),d=u*o;if(s.length){l||(l=new Array(s.length));for(var m=s.length-1;m>=0;--m)l[m]=c*s[m]+b*t[m]+g*a[m]+d*n[m];return l}return c*s+b*t+g*a+d*n},h.exports.derivative=function(s,t,a,n,r,l){var o=6*r*r-6*r,u=3*r*r-4*r+1,p=-6*r*r+6*r,c=3*r*r-2*r;if(s.length){l||(l=new Array(s.length));for(var b=s.length-1;b>=0;--b)l[b]=o*s[b]+u*t[b]+p*a[b]+c*n[b];return l}return o*s+u*t+p*a[b]+c*n}},4419:function(h,s,t){var a=t(2183),n=t(1215);function r(o,u){this.point=o,this.index=u}function l(o,u){for(var p=o.point,c=u.point,b=p.length,g=0;g<b;++g){var d=c[g]-p[g];if(d)return d}return 0}h.exports=function(o,u){var p=o.length;if(p===0)return[];var c=o[0].length;if(c<1)return[];if(c===1)return function(z,U,R){if(z===1)return R?[[-1,0]]:[];var j=U.map(function(te,$){return[te[0],$]});j.sort(function(te,$){return te[0]-$[0]});for(var Z=new Array(z-1),F=1;F<z;++F){var V=j[F-1],H=j[F];Z[F-1]=[V[1],H[1]]}return R&&Z.push([-1,Z[0][1]],[Z[z-1][1],-1]),Z}(p,o,u);for(var b=new Array(p),g=1,d=0;d<p;++d){for(var m=o[d],x=new Array(c+1),y=0,k=0;k<c;++k){var f=m[k];x[k]=f,y+=f*f}x[c]=y,b[d]=new r(x,d),g=Math.max(y,g)}n(b,l),p=b.length;var S=new Array(p+c+1),M=new Array(p+c+1),E=(c+1)*(c+1)*g,O=new Array(c+1);for(d=0;d<=c;++d)O[d]=0;for(O[c]=E,S[0]=O.slice(),M[0]=-1,d=0;d<=c;++d)(x=O.slice())[d]=1,S[d+1]=x,M[d+1]=-1;for(d=0;d<p;++d){var P=b[d];S[d+c+1]=P.point,M[d+c+1]=P.index}var I=a(S,!1);if(I=u?I.filter(function(z){for(var U=0,R=0;R<=c;++R){var j=M[z[R]];if(j<0&&++U>=2)return!1;z[R]=j}return!0}):I.filter(function(z){for(var U=0;U<=c;++U){var R=M[z[U]];if(R<0)return!1;z[U]=R}return!0}),1&c)for(d=0;d<I.length;++d)x=(P=I[d])[0],P[0]=P[1],P[1]=x;return I}},8362:function(h){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),a=new Uint32Array(t.buffer);t[0]=1,s=!0,a[1]===1072693248?(h.exports=function(r){return t[0]=r,[a[0],a[1]]},h.exports.pack=function(r,l){return a[0]=r,a[1]=l,t[0]},h.exports.lo=function(r){return t[0]=r,a[0]},h.exports.hi=function(r){return t[0]=r,a[1]}):a[0]===1072693248?(h.exports=function(r){return t[0]=r,[a[1],a[0]]},h.exports.pack=function(r,l){return a[1]=r,a[0]=l,t[0]},h.exports.lo=function(r){return t[0]=r,a[1]},h.exports.hi=function(r){return t[0]=r,a[0]}):s=!1}if(!s){var n=new Buffer(8);h.exports=function(r){return n.writeDoubleLE(r,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},h.exports.pack=function(r,l){return n.writeUInt32LE(r,0,!0),n.writeUInt32LE(l,4,!0),n.readDoubleLE(0,!0)},h.exports.lo=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(0,!0)},h.exports.hi=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(4,!0)}}h.exports.sign=function(r){return h.exports.hi(r)>>>31},h.exports.exponent=function(r){return(h.exports.hi(r)<<1>>>21)-1023},h.exports.fraction=function(r){var l=h.exports.lo(r),o=h.exports.hi(r),u=1048575&o;return 2146435072&o&&(u+=1048576),[l,u]},h.exports.denormalized=function(r){return!(2146435072&h.exports.hi(r))}},3094:function(h){function s(t,a,n){var r=0|t[n];if(r<=0)return[];var l,o=new Array(r);if(n===t.length-1)for(l=0;l<r;++l)o[l]=a;else for(l=0;l<r;++l)o[l]=s(t,a,n+1);return o}h.exports=function(t,a){switch(a===void 0&&(a=0),typeof t){case"number":if(t>0)return function(n,r){var l,o;for(l=new Array(n),o=0;o<n;++o)l[o]=r;return l}(0|t,a);break;case"object":if(typeof t.length=="number")return s(t,a,0)}return[]}},8348:function(h,s,t){h.exports=function(n,r){var l=n.length;if(typeof r!="number"){r=0;for(var o=0;o<l;++o){var u=n[o];r=Math.max(r,u[0],u[1])}r=1+(0|r)}r|=0;var p=new Array(r);for(o=0;o<r;++o)p[o]=[];for(o=0;o<l;++o)p[(u=n[o])[0]].push(u[1]),p[u[1]].push(u[0]);for(var c=0;c<r;++c)a(p[c],function(b,g){return b-g});return p};var a=t(1215)},5795:function(h){h.exports=function(s,t,a){var n=t||0,r=a||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[n*s[12]+s[8],n*s[13]+s[9],n*s[14]+s[10],n*s[15]+s[11]],[r*s[12]-s[8],r*s[13]-s[9],r*s[14]-s[10],r*s[15]-s[11]]]}},8444:function(h,s,t){h.exports=function(p,c,b){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return typeof p=="number"?new l(g=u(p),g,0):new l(p,u(p.length),0);case 2:var g;if(typeof c=="number")return new l(p,g=u(p.length),+c);b=0;case 3:if(p.length!==c.length)throw new Error("state and velocity lengths must match");return new l(p,c,b)}};var a=t(9680),n=t(5070);function r(p,c,b){return Math.min(c,Math.max(p,b))}function l(p,c,b){this.dimension=p.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var g=0;g<this.dimension;++g)this.bounds[0][g]=-1/0,this.bounds[1][g]=1/0;this._state=p.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[b],this._scratch=[p.slice(),p.slice(),p.slice(),p.slice(),p.slice()]}var o=l.prototype;function u(p){for(var c=new Array(p),b=0;b<p;++b)c[b]=0;return c}o.flush=function(p){var c=n.gt(this._time,p)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},o.curve=function(p){var c=this._time,b=c.length,g=n.le(c,p),d=this._scratch[0],m=this._state,x=this._velocity,y=this.dimension,k=this.bounds;if(g<0)for(var f=y-1,S=0;S<y;++S,--f)d[S]=m[f];else if(g>=b-1){f=m.length-1;var M=p-c[b-1];for(S=0;S<y;++S,--f)d[S]=m[f]+M*x[f]}else{f=y*(g+1)-1;var E=c[g],O=c[g+1]-E||1,P=this._scratch[1],I=this._scratch[2],z=this._scratch[3],U=this._scratch[4],R=!0;for(S=0;S<y;++S,--f)P[S]=m[f],z[S]=x[f]*O,I[S]=m[f+y],U[S]=x[f+y]*O,R=R&&P[S]===I[S]&&z[S]===U[S]&&z[S]===0;if(R)for(S=0;S<y;++S)d[S]=P[S];else a(P,z,I,U,(p-E)/O,d)}var j=k[0],Z=k[1];for(S=0;S<y;++S)d[S]=r(j[S],Z[S],d[S]);return d},o.dcurve=function(p){var c=this._time,b=c.length,g=n.le(c,p),d=this._scratch[0],m=this._state,x=this._velocity,y=this.dimension;if(g>=b-1)for(var k=m.length-1,f=(c[b-1],0);f<y;++f,--k)d[f]=x[k];else{k=y*(g+1)-1;var S=c[g],M=c[g+1]-S||1,E=this._scratch[1],O=this._scratch[2],P=this._scratch[3],I=this._scratch[4],z=!0;for(f=0;f<y;++f,--k)E[f]=m[k],P[f]=x[k]*M,O[f]=m[k+y],I[f]=x[k+y]*M,z=z&&E[f]===O[f]&&P[f]===I[f]&&P[f]===0;if(z)for(f=0;f<y;++f)d[f]=0;else for(a.derivative(E,P,O,I,(p-S)/M,d),f=0;f<y;++f)d[f]/=M}return d},o.lastT=function(){var p=this._time;return p[p.length-1]},o.stable=function(){for(var p=this._velocity,c=p.length,b=this.dimension-1;b>=0;--b)if(p[--c])return!1;return!0},o.jump=function(p){var c=this.lastT(),b=this.dimension;if(!(p<c||arguments.length!==b+1)){var g=this._state,d=this._velocity,m=g.length-this.dimension,x=this.bounds,y=x[0],k=x[1];this._time.push(c,p);for(var f=0;f<2;++f)for(var S=0;S<b;++S)g.push(g[m++]),d.push(0);for(this._time.push(p),S=b;S>0;--S)g.push(r(y[S-1],k[S-1],arguments[S])),d.push(0)}},o.push=function(p){var c=this.lastT(),b=this.dimension;if(!(p<c||arguments.length!==b+1)){var g=this._state,d=this._velocity,m=g.length-this.dimension,x=p-c,y=this.bounds,k=y[0],f=y[1],S=x>1e-6?1/x:0;this._time.push(p);for(var M=b;M>0;--M){var E=r(k[M-1],f[M-1],arguments[M]);g.push(E),d.push((E-g[m++])*S)}}},o.set=function(p){var c=this.dimension;if(!(p<this.lastT()||arguments.length!==c+1)){var b=this._state,g=this._velocity,d=this.bounds,m=d[0],x=d[1];this._time.push(p);for(var y=c;y>0;--y)b.push(r(m[y-1],x[y-1],arguments[y])),g.push(0)}},o.move=function(p){var c=this.lastT(),b=this.dimension;if(!(p<=c||arguments.length!==b+1)){var g=this._state,d=this._velocity,m=g.length-this.dimension,x=this.bounds,y=x[0],k=x[1],f=p-c,S=f>1e-6?1/f:0;this._time.push(p);for(var M=b;M>0;--M){var E=arguments[M];g.push(r(y[M-1],k[M-1],g[m++]+E)),d.push(E*S)}}},o.idle=function(p){var c=this.lastT();if(!(p<c)){var b=this.dimension,g=this._state,d=this._velocity,m=g.length-b,x=this.bounds,y=x[0],k=x[1],f=p-c;this._time.push(p);for(var S=b-1;S>=0;--S)g.push(r(y[S],k[S],g[m]+f*d[m])),d.push(0),m+=1}}},7080:function(h){function s(m,x,y,k,f,S){this._color=m,this.key=x,this.value=y,this.left=k,this.right=f,this._count=S}function t(m){return new s(m._color,m.key,m.value,m.left,m.right,m._count)}function a(m,x){return new s(m,x.key,x.value,x.left,x.right,x._count)}function n(m){m._count=1+(m.left?m.left._count:0)+(m.right?m.right._count:0)}function r(m,x){this._compare=m,this.root=x}h.exports=function(m){return new r(m||d,null)};var l=r.prototype;function o(m,x){var y;return x.left&&(y=o(m,x.left))?y:(y=m(x.key,x.value))||(x.right?o(m,x.right):void 0)}function u(m,x,y,k){if(x(m,k.key)<=0){var f;if(k.left&&(f=u(m,x,y,k.left))||(f=y(k.key,k.value)))return f}if(k.right)return u(m,x,y,k.right)}function p(m,x,y,k,f){var S,M=y(m,f.key),E=y(x,f.key);if(M<=0&&(f.left&&(S=p(m,x,y,k,f.left))||E>0&&(S=k(f.key,f.value))))return S;if(E>0&&f.right)return p(m,x,y,k,f.right)}function c(m,x){this.tree=m,this._stack=x}Object.defineProperty(l,"keys",{get:function(){var m=[];return this.forEach(function(x,y){m.push(x)}),m}}),Object.defineProperty(l,"values",{get:function(){var m=[];return this.forEach(function(x,y){m.push(y)}),m}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(m,x){for(var y=this._compare,k=this.root,f=[],S=[];k;){var M=y(m,k.key);f.push(k),S.push(M),k=M<=0?k.left:k.right}f.push(new s(0,m,x,null,null,1));for(var E=f.length-2;E>=0;--E)k=f[E],S[E]<=0?f[E]=new s(k._color,k.key,k.value,f[E+1],k.right,k._count+1):f[E]=new s(k._color,k.key,k.value,k.left,f[E+1],k._count+1);for(E=f.length-1;E>1;--E){var O=f[E-1];if(k=f[E],O._color===1||k._color===1)break;var P=f[E-2];if(P.left===O)if(O.left===k){if(!(I=P.right)||I._color!==0){P._color=0,P.left=O.right,O._color=1,O.right=P,f[E-2]=O,f[E-1]=k,n(P),n(O),E>=3&&((z=f[E-3]).left===P?z.left=O:z.right=O);break}O._color=1,P.right=a(1,I),P._color=0,E-=1}else{if(!(I=P.right)||I._color!==0){O.right=k.left,P._color=0,P.left=k.right,k._color=1,k.left=O,k.right=P,f[E-2]=k,f[E-1]=O,n(P),n(O),n(k),E>=3&&((z=f[E-3]).left===P?z.left=k:z.right=k);break}O._color=1,P.right=a(1,I),P._color=0,E-=1}else if(O.right===k){if(!(I=P.left)||I._color!==0){P._color=0,P.right=O.left,O._color=1,O.left=P,f[E-2]=O,f[E-1]=k,n(P),n(O),E>=3&&((z=f[E-3]).right===P?z.right=O:z.left=O);break}O._color=1,P.left=a(1,I),P._color=0,E-=1}else{var I;if(!(I=P.left)||I._color!==0){var z;O.left=k.right,P._color=0,P.right=k.left,k._color=1,k.right=O,k.left=P,f[E-2]=k,f[E-1]=O,n(P),n(O),n(k),E>=3&&((z=f[E-3]).right===P?z.right=k:z.left=k);break}O._color=1,P.left=a(1,I),P._color=0,E-=1}}return f[0]._color=1,new r(y,f[0])},l.forEach=function(m,x,y){if(this.root)switch(arguments.length){case 1:return o(m,this.root);case 2:return u(x,this._compare,m,this.root);case 3:return this._compare(x,y)>=0?void 0:p(x,y,this._compare,m,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var m=[],x=this.root;x;)m.push(x),x=x.left;return new c(this,m)}}),Object.defineProperty(l,"end",{get:function(){for(var m=[],x=this.root;x;)m.push(x),x=x.right;return new c(this,m)}}),l.at=function(m){if(m<0)return new c(this,[]);for(var x=this.root,y=[];;){if(y.push(x),x.left){if(m<x.left._count){x=x.left;continue}m-=x.left._count}if(!m)return new c(this,y);if(m-=1,!x.right||m>=x.right._count)break;x=x.right}return new c(this,[])},l.ge=function(m){for(var x=this._compare,y=this.root,k=[],f=0;y;){var S=x(m,y.key);k.push(y),S<=0&&(f=k.length),y=S<=0?y.left:y.right}return k.length=f,new c(this,k)},l.gt=function(m){for(var x=this._compare,y=this.root,k=[],f=0;y;){var S=x(m,y.key);k.push(y),S<0&&(f=k.length),y=S<0?y.left:y.right}return k.length=f,new c(this,k)},l.lt=function(m){for(var x=this._compare,y=this.root,k=[],f=0;y;){var S=x(m,y.key);k.push(y),S>0&&(f=k.length),y=S<=0?y.left:y.right}return k.length=f,new c(this,k)},l.le=function(m){for(var x=this._compare,y=this.root,k=[],f=0;y;){var S=x(m,y.key);k.push(y),S>=0&&(f=k.length),y=S<0?y.left:y.right}return k.length=f,new c(this,k)},l.find=function(m){for(var x=this._compare,y=this.root,k=[];y;){var f=x(m,y.key);if(k.push(y),f===0)return new c(this,k);y=f<=0?y.left:y.right}return new c(this,[])},l.remove=function(m){var x=this.find(m);return x?x.remove():this},l.get=function(m){for(var x=this._compare,y=this.root;y;){var k=x(m,y.key);if(k===0)return y.value;y=k<=0?y.left:y.right}};var b=c.prototype;function g(m,x){m.key=x.key,m.value=x.value,m.left=x.left,m.right=x.right,m._color=x._color,m._count=x._count}function d(m,x){return m<x?-1:m>x?1:0}Object.defineProperty(b,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(b,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),b.clone=function(){return new c(this.tree,this._stack.slice())},b.remove=function(){var m=this._stack;if(m.length===0)return this.tree;var x=new Array(m.length),y=m[m.length-1];x[x.length-1]=new s(y._color,y.key,y.value,y.left,y.right,y._count);for(var k=m.length-2;k>=0;--k)(y=m[k]).left===m[k+1]?x[k]=new s(y._color,y.key,y.value,x[k+1],y.right,y._count):x[k]=new s(y._color,y.key,y.value,y.left,x[k+1],y._count);if((y=x[x.length-1]).left&&y.right){var f=x.length;for(y=y.left;y.right;)x.push(y),y=y.right;var S=x[f-1];for(x.push(new s(y._color,S.key,S.value,y.left,y.right,y._count)),x[f-1].key=y.key,x[f-1].value=y.value,k=x.length-2;k>=f;--k)y=x[k],x[k]=new s(y._color,y.key,y.value,y.left,x[k+1],y._count);x[f-1].left=x[f]}if((y=x[x.length-1])._color===0){var M=x[x.length-2];for(M.left===y?M.left=null:M.right===y&&(M.right=null),x.pop(),k=0;k<x.length;++k)x[k]._count--;return new r(this.tree._compare,x[0])}if(y.left||y.right){for(y.left?g(y,y.left):y.right&&g(y,y.right),y._color=1,k=0;k<x.length-1;++k)x[k]._count--;return new r(this.tree._compare,x[0])}if(x.length===1)return new r(this.tree._compare,null);for(k=0;k<x.length;++k)x[k]._count--;var E=x[x.length-2];return function(O){for(var P,I,z,U,R=O.length-1;R>=0;--R){if(P=O[R],R===0)return void(P._color=1);if((I=O[R-1]).left===P){if((z=I.right).right&&z.right._color===0)return U=(z=I.right=t(z)).right=t(z.right),I.right=z.left,z.left=I,z.right=U,z._color=I._color,P._color=1,I._color=1,U._color=1,n(I),n(z),R>1&&((j=O[R-2]).left===I?j.left=z:j.right=z),void(O[R-1]=z);if(z.left&&z.left._color===0)return U=(z=I.right=t(z)).left=t(z.left),I.right=U.left,z.left=U.right,U.left=I,U.right=z,U._color=I._color,I._color=1,z._color=1,P._color=1,n(I),n(z),n(U),R>1&&((j=O[R-2]).left===I?j.left=U:j.right=U),void(O[R-1]=U);if(z._color===1){if(I._color===0)return I._color=1,void(I.right=a(0,z));I.right=a(0,z);continue}z=t(z),I.right=z.left,z.left=I,z._color=I._color,I._color=0,n(I),n(z),R>1&&((j=O[R-2]).left===I?j.left=z:j.right=z),O[R-1]=z,O[R]=I,R+1<O.length?O[R+1]=P:O.push(P),R+=2}else{if((z=I.left).left&&z.left._color===0)return U=(z=I.left=t(z)).left=t(z.left),I.left=z.right,z.right=I,z.left=U,z._color=I._color,P._color=1,I._color=1,U._color=1,n(I),n(z),R>1&&((j=O[R-2]).right===I?j.right=z:j.left=z),void(O[R-1]=z);if(z.right&&z.right._color===0)return U=(z=I.left=t(z)).right=t(z.right),I.left=U.right,z.right=U.left,U.right=I,U.left=z,U._color=I._color,I._color=1,z._color=1,P._color=1,n(I),n(z),n(U),R>1&&((j=O[R-2]).right===I?j.right=U:j.left=U),void(O[R-1]=U);if(z._color===1){if(I._color===0)return I._color=1,void(I.left=a(0,z));I.left=a(0,z);continue}var j;z=t(z),I.left=z.right,z.right=I,z._color=I._color,I._color=0,n(I),n(z),R>1&&((j=O[R-2]).right===I?j.right=z:j.left=z),O[R-1]=z,O[R]=I,R+1<O.length?O[R+1]=P:O.push(P),R+=2}}}(x),E.left===y?E.left=null:E.right=null,new r(this.tree._compare,x[0])},Object.defineProperty(b,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(b,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(b,"index",{get:function(){var m=0,x=this._stack;if(x.length===0){var y=this.tree.root;return y?y._count:0}x[x.length-1].left&&(m=x[x.length-1].left._count);for(var k=x.length-2;k>=0;--k)x[k+1]===x[k].right&&(++m,x[k].left&&(m+=x[k].left._count));return m},enumerable:!0}),b.next=function(){var m=this._stack;if(m.length!==0){var x=m[m.length-1];if(x.right)for(x=x.right;x;)m.push(x),x=x.left;else for(m.pop();m.length>0&&m[m.length-1].right===x;)x=m[m.length-1],m.pop()}},Object.defineProperty(b,"hasNext",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].right)return!0;for(var x=m.length-1;x>0;--x)if(m[x-1].left===m[x])return!0;return!1}}),b.update=function(m){var x=this._stack;if(x.length===0)throw new Error("Can't update empty node!");var y=new Array(x.length),k=x[x.length-1];y[y.length-1]=new s(k._color,k.key,m,k.left,k.right,k._count);for(var f=x.length-2;f>=0;--f)(k=x[f]).left===x[f+1]?y[f]=new s(k._color,k.key,k.value,y[f+1],k.right,k._count):y[f]=new s(k._color,k.key,k.value,k.left,y[f+1],k._count);return new r(this.tree._compare,y[0])},b.prev=function(){var m=this._stack;if(m.length!==0){var x=m[m.length-1];if(x.left)for(x=x.left;x;)m.push(x),x=x.right;else for(m.pop();m.length>0&&m[m.length-1].left===x;)x=m[m.length-1],m.pop()}},Object.defineProperty(b,"hasPrev",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].left)return!0;for(var x=m.length-1;x>0;--x)if(m[x-1].right===m[x])return!0;return!1}})},7453:function(h,s,t){h.exports=function(M,E){var O=new c(M);return O.update(E),O};var a=t(9557),n=t(1681),r=t(1011),l=t(2864),o=t(8468),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function p(M,E){return M[0]=E[0],M[1]=E[1],M[2]=E[2],M}function c(M){this.gl=M,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(M)}var b=c.prototype;function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}b.update=function(M){function E(te,$,J){if(J in M){var X,K=M[J],ee=this[J];(te?Array.isArray(K)&&Array.isArray(K[0]):Array.isArray(K))?this[J]=X=[$(K[0]),$(K[1]),$(K[2])]:this[J]=X=[$(K),$(K),$(K)];for(var ie=0;ie<3;++ie)if(X[ie]!==ee[ie])return!0}return!1}M=M||{};var O,P=E.bind(this,!1,Number),I=E.bind(this,!1,Boolean),z=E.bind(this,!1,String),U=E.bind(this,!0,function(te){if(Array.isArray(te)){if(te.length===3)return[+te[0],+te[1],+te[2],1];if(te.length===4)return[+te[0],+te[1],+te[2],+te[3]]}return[0,0,0,1]}),R=!1,j=!1;if("bounds"in M)for(var Z=M.bounds,F=0;F<2;++F)for(var V=0;V<3;++V)Z[F][V]!==this.bounds[F][V]&&(j=!0),this.bounds[F][V]=Z[F][V];if("ticks"in M)for(O=M.ticks,R=!0,this.autoTicks=!1,F=0;F<3;++F)this.tickSpacing[F]=0;else P("tickSpacing")&&(this.autoTicks=!0,j=!0);if(this._firstInit&&("ticks"in M||"tickSpacing"in M||(this.autoTicks=!0),j=!0,R=!0,this._firstInit=!1),j&&this.autoTicks&&(O=o.create(this.bounds,this.tickSpacing),R=!0),R){for(F=0;F<3;++F)O[F].sort(function(te,$){return te.x-$.x});o.equal(O,this.ticks)?R=!1:this.ticks=O}I("tickEnable"),z("tickFont")&&(R=!0),P("tickSize"),P("tickAngle"),P("tickPad"),U("tickColor");var H=z("labels");z("labelFont")&&(H=!0),I("labelEnable"),P("labelSize"),P("labelPad"),U("labelColor"),I("lineEnable"),I("lineMirror"),P("lineWidth"),U("lineColor"),I("lineTickEnable"),I("lineTickMirror"),P("lineTickLength"),P("lineTickWidth"),U("lineTickColor"),I("gridEnable"),P("gridWidth"),U("gridColor"),I("zeroEnable"),U("zeroLineColor"),P("zeroLineWidth"),I("backgroundEnable"),U("backgroundColor"),this._text?this._text&&(H||R)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&R&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var d=[new g,new g,new g];function m(M,E,O,P,I){for(var z=M.primalOffset,U=M.primalMinor,R=M.mirrorOffset,j=M.mirrorMinor,Z=P[E],F=0;F<3;++F)if(E!==F){var V=z,H=R,te=U,$=j;Z&1<<F&&(V=R,H=z,te=j,$=U),V[F]=O[0][F],H[F]=O[1][F],I[F]>0?(te[F]=-1,$[F]=0):(te[F]=0,$[F]=1)}}var x=[0,0,0],y={model:u,view:u,projection:u,_ortho:!1};b.isOpaque=function(){return!0},b.isTransparent=function(){return!1},b.drawTransparent=function(M){};var k=[0,0,0],f=[0,0,0],S=[0,0,0];b.draw=function(M){M=M||y;for(var E=this.gl,O=M.model||u,P=M.view||u,I=M.projection||u,z=this.bounds,U=M._ortho||!1,R=l(O,P,I,z,U),j=R.cubeEdges,Z=R.axis,F=P[12],V=P[13],H=P[14],te=P[15],$=(U?2:1)*this.pixelRatio*(I[3]*F+I[7]*V+I[11]*H+I[15]*te)/E.drawingBufferHeight,J=0;J<3;++J)this.lastCubeProps.cubeEdges[J]=j[J],this.lastCubeProps.axis[J]=Z[J];var X=d;for(J=0;J<3;++J)m(d[J],J,this.bounds,j,Z);E=this.gl;var K,ee,ie,ae=x;for(J=0;J<3;++J)this.backgroundEnable[J]?ae[J]=Z[J]:ae[J]=0;for(this._background.draw(O,P,I,z,ae,this.backgroundColor),this._lines.bind(O,P,I,this),J=0;J<3;++J){var oe=[0,0,0];Z[J]>0?oe[J]=z[1][J]:oe[J]=z[0][J];for(var fe=0;fe<2;++fe){var ge=(J+1+fe)%3,ve=(J+1+(1^fe))%3;this.gridEnable[ge]&&this._lines.drawGrid(ge,ve,this.bounds,oe,this.gridColor[ge],this.gridWidth[ge]*this.pixelRatio)}for(fe=0;fe<2;++fe)ge=(J+1+fe)%3,ve=(J+1+(1^fe))%3,this.zeroEnable[ve]&&Math.min(z[0][ve],z[1][ve])<=0&&Math.max(z[0][ve],z[1][ve])>=0&&this._lines.drawZero(ge,ve,this.bounds,oe,this.zeroLineColor[ve],this.zeroLineWidth[ve]*this.pixelRatio)}for(J=0;J<3;++J){this.lineEnable[J]&&this._lines.drawAxisLine(J,this.bounds,X[J].primalOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio),this.lineMirror[J]&&this._lines.drawAxisLine(J,this.bounds,X[J].mirrorOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio);var xe=p(k,X[J].primalMinor),_e=p(f,X[J].mirrorMinor),ye=this.lineTickLength;for(fe=0;fe<3;++fe){var Ce=$/O[5*fe];xe[fe]*=ye[fe]*Ce,_e[fe]*=ye[fe]*Ce}this.lineTickEnable[J]&&this._lines.drawAxisTicks(J,X[J].primalOffset,xe,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio),this.lineTickMirror[J]&&this._lines.drawAxisTicks(J,X[J].mirrorOffset,_e,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio)}function ke(we){(ie=[0,0,0])[we]=1}function Te(we,Ee,Oe){var Fe=(we+1)%3,pe=(we+2)%3,be=Ee[Fe],Me=Ee[pe],De=Oe[Fe],Ne=Oe[pe];be>0&&Ne>0||be>0&&Ne<0||be<0&&Ne>0||be<0&&Ne<0?ke(Fe):(Me>0&&De>0||Me>0&&De<0||Me<0&&De>0||Me<0&&De<0)&&ke(pe)}for(this._lines.unbind(),this._text.bind(O,P,I,this.pixelRatio),J=0;J<3;++J){var le=X[J].primalMinor,ue=X[J].mirrorMinor,de=p(S,X[J].primalOffset);for(fe=0;fe<3;++fe)this.lineTickEnable[J]&&(de[fe]+=$*le[fe]*Math.max(this.lineTickLength[fe],0)/O[5*fe]);var Le=[0,0,0];if(Le[J]=1,this.tickEnable[J]){for(this.tickAngle[J]===-3600?(this.tickAngle[J]=0,this.tickAlign[J]="auto"):this.tickAlign[J]=-1,ee=1,(K=[this.tickAlign[J],.5,ee])[0]==="auto"?K[0]=0:K[0]=parseInt(""+K[0]),ie=[0,0,0],Te(J,le,ue),fe=0;fe<3;++fe)de[fe]+=$*le[fe]*this.tickPad[fe]/O[5*fe];this._text.drawTicks(J,this.tickSize[J],this.tickAngle[J],de,this.tickColor[J],Le,ie,K)}if(this.labelEnable[J]){for(ee=0,ie=[0,0,0],this.labels[J].length>4&&(ke(J),ee=1),(K=[this.labelAlign[J],.5,ee])[0]==="auto"?K[0]=0:K[0]=parseInt(""+K[0]),fe=0;fe<3;++fe)de[fe]+=$*le[fe]*this.labelPad[fe]/O[5*fe];de[J]+=.5*(z[0][J]+z[1][J]),this._text.drawLabel(J,this.labelSize[J],this.labelAngle[J],de,this.labelColor[J],[0,0,0],ie,K)}}this._text.unbind()},b.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(h,s,t){h.exports=function(u){for(var p=[],c=[],b=0,g=0;g<3;++g)for(var d=(g+1)%3,m=(g+2)%3,x=[0,0,0],y=[0,0,0],k=-1;k<=1;k+=2){c.push(b,b+2,b+1,b+1,b+2,b+3),x[g]=k,y[g]=k;for(var f=-1;f<=1;f+=2){x[d]=f;for(var S=-1;S<=1;S+=2)x[m]=S,p.push(x[0],x[1],x[2],y[0],y[1],y[2]),b+=1}var M=d;d=m,m=M}var E=a(u,new Float32Array(p)),O=a(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),P=n(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],O),I=r(u);return I.attributes.position.location=0,I.attributes.normal.location=1,new l(u,E,P,I)};var a=t(5827),n=t(2944),r=t(1943).bg;function l(u,p,c,b){this.gl=u,this.buffer=p,this.vao=c,this.shader=b}var o=l.prototype;o.draw=function(u,p,c,b,g,d){for(var m=!1,x=0;x<3;++x)m=m||g[x];if(m){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:p,projection:c,bounds:b,enable:g,colors:d},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},o.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(h,s,t){h.exports=function(f,S,M,E,O){n(o,S,f),n(o,M,o);for(var P=0,I=0;I<2;++I){c[2]=E[I][2];for(var z=0;z<2;++z){c[1]=E[z][1];for(var U=0;U<2;++U)c[0]=E[U][0],g(u[P],c,o),P+=1}}var R=-1;for(I=0;I<8;++I){for(var j=u[I][3],Z=0;Z<3;++Z)p[I][Z]=u[I][Z]/j;O&&(p[I][2]*=-1),j<0&&(R<0||p[I][2]<p[R][2])&&(R=I)}if(R<0){R=0;for(var F=0;F<3;++F){for(var V=(F+2)%3,H=(F+1)%3,te=-1,$=-1,J=0;J<2;++J){var X=(ee=J<<F)+(J<<V)+(1-J<<H),K=ee+(1-J<<V)+(J<<H);l(p[ee],p[X],p[K],b)<0||(J?te=1:$=1)}if(te<0||$<0)$>te&&(R|=1<<F);else{for(J=0;J<2;++J){X=(ee=J<<F)+(J<<V)+(1-J<<H),K=ee+(1-J<<V)+(J<<H);var ee,ie=m([u[ee],u[X],u[K],u[ee+(1<<V)+(1<<H)]]);J?te=ie:$=ie}$>te&&(R|=1<<F)}}}var ae=7^R,oe=-1;for(I=0;I<8;++I)I!==R&&I!==ae&&(oe<0||p[oe][1]>p[I][1])&&(oe=I);var fe=-1;for(I=0;I<3;++I)(ve=oe^1<<I)!==R&&ve!==ae&&(fe<0&&(fe=ve),(H=p[ve])[0]<p[fe][0]&&(fe=ve));var ge=-1;for(I=0;I<3;++I){var ve;(ve=oe^1<<I)!==R&&ve!==ae&&ve!==fe&&(ge<0&&(ge=ve),(H=p[ve])[0]>p[ge][0]&&(ge=ve))}var xe=x;xe[0]=xe[1]=xe[2]=0,xe[a.log2(fe^oe)]=oe&fe,xe[a.log2(oe^ge)]=oe&ge;var _e=7^ge;_e===R||_e===ae?(_e=7^fe,xe[a.log2(ge^_e)]=_e&ge):xe[a.log2(fe^_e)]=_e&fe;var ye=y,Ce=R;for(F=0;F<3;++F)ye[F]=Ce&1<<F?-1:1;return k};var a=t(2288),n=t(104),r=t(4670),l=t(417),o=new Array(16),u=new Array(8),p=new Array(8),c=new Array(3),b=[0,0,0];function g(f,S,M){for(var E=0;E<4;++E){f[E]=M[12+E];for(var O=0;O<3;++O)f[E]+=S[O]*M[4*O+E]}}(function(){for(var f=0;f<8;++f)u[f]=[1,1,1,1],p[f]=[1,1,1]})();var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function m(f){for(var S=0;S<d.length;++S)if((f=r.positive(f,d[S])).length<3)return 0;var M=f[0],E=M[0]/M[3],O=M[1]/M[3],P=0;for(S=1;S+1<f.length;++S){var I=f[S],z=f[S+1],U=I[0]/I[3]-E,R=I[1]/I[3]-O,j=z[0]/z[3]-E,Z=z[1]/z[3]-O;P+=Math.abs(U*Z-R*j)}return P}var x=[1,1,1],y=[0,0,0],k={cubeEdges:x,axis:y}},1681:function(h,s,t){h.exports=function(x,y,k){var f=[],S=[0,0,0],M=[0,0,0],E=[0,0,0],O=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var P=0;P<3;++P){for(var I=f.length/3|0,z=0;z<k[P].length;++z){var U=+k[P][z].x;f.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1)}var R=f.length/3|0;S[P]=I,M[P]=R-I,I=f.length/3|0;for(var j=0;j<k[P].length;++j)U=+k[P][j].x,f.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1);R=f.length/3|0,E[P]=I,O[P]=R-I}var Z=a(x,new Float32Array(f)),F=n(x,[{buffer:Z,type:x.FLOAT,size:3,stride:0,offset:0}]),V=r(x);return V.attributes.position.location=0,new d(x,Z,F,V,M,S,O,E)};var a=t(5827),n=t(2944),r=t(1943).j,l=[0,0,0],o=[0,0,0],u=[0,0,0],p=[0,0,0],c=[1,1];function b(x){return x[0]=x[1]=x[2]=0,x}function g(x,y){return x[0]=y[0],x[1]=y[1],x[2]=y[2],x}function d(x,y,k,f,S,M,E,O){this.gl=x,this.vertBuffer=y,this.vao=k,this.shader=f,this.tickCount=S,this.tickOffset=M,this.gridCount=E,this.gridOffset=O}var m=d.prototype;m.bind=function(x,y,k){this.shader.bind(),this.shader.uniforms.model=x,this.shader.uniforms.view=y,this.shader.uniforms.projection=k,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},m.unbind=function(){this.vao.unbind()},m.drawAxisLine=function(x,y,k,f,S){var M=b(o);this.shader.uniforms.majorAxis=o,M[x]=y[1][x]-y[0][x],this.shader.uniforms.minorAxis=M;var E,O=g(p,k);O[x]+=y[0][x],this.shader.uniforms.offset=O,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=f,(E=b(u))[(x+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=b(u))[(x+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},m.drawAxisTicks=function(x,y,k,f,S){if(this.tickCount[x]){var M=b(l);M[x]=1,this.shader.uniforms.majorAxis=M,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=k,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=S;var E=b(u);E[x]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x])}},m.drawGrid=function(x,y,k,f,S,M){if(this.gridCount[x]){var E=b(o);E[y]=k[1][y]-k[0][y],this.shader.uniforms.minorAxis=E;var O=g(p,f);O[y]+=k[0][y],this.shader.uniforms.offset=O;var P=b(l);P[x]=1,this.shader.uniforms.majorAxis=P;var I=b(u);I[x]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[x],this.gridOffset[x])}},m.drawZero=function(x,y,k,f,S,M){var E=b(o);this.shader.uniforms.majorAxis=E,E[x]=k[1][x]-k[0][x],this.shader.uniforms.minorAxis=E;var O=g(p,f);O[x]+=k[0][x],this.shader.uniforms.offset=O;var P=b(u);P[y]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},m.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(h,s,t){var a=t(6832),n=t(5158),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.j=function(b){return n(b,r,l,null,[{name:"position",type:"vec3"}])};var o=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=a([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.f=function(b){return n(b,o,u,null,[{name:"position",type:"vec3"}])};var p=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=a([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(b){return n(b,p,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(h,s,t){h.exports=function(g,d,m,x,y,k){var f=a(g),S=n(g,[{buffer:f,size:3}]),M=l(g);M.attributes.position.location=0;var E=new p(g,M,f,S);return E.update(d,m,x,y,k),E};var a=t(5827),n=t(2944),r=t(875),l=t(1943).f,o=window||w.global||{},u=o.__TEXT_CACHE||{};function p(g,d,m,x){this.gl=g,this.shader=d,this.buffer=m,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}o.__TEXT_CACHE={};var c=p.prototype,b=[0,0];c.bind=function(g,d,m,x){this.vao.bind(),this.shader.bind();var y=this.shader.uniforms;y.model=g,y.view=d,y.projection=m,y.pixelScale=x,b[0]=this.gl.drawingBufferWidth,b[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=b},c.unbind=function(){this.vao.unbind()},c.update=function(g,d,m,x,y){var k=[];function f(U,R,j,Z,F,V){var H=u[j];H||(H=u[j]={});var te=H[R];te||(te=H[R]=function(fe,ge){try{return r(fe,ge)}catch(ve){return console.warn('error vectorizing text:"'+fe+'" error:',ve),{cells:[],positions:[]}}}(R,{triangles:!0,font:j,textAlign:"center",textBaseline:"middle",lineSpacing:F,styletags:V}));for(var $=(Z||12)/12,J=te.positions,X=te.cells,K=0,ee=X.length;K<ee;++K)for(var ie=X[K],ae=2;ae>=0;--ae){var oe=J[ie[ae]];k.push($*oe[0],-$*oe[1],U)}}for(var S=[0,0,0],M=[0,0,0],E=[0,0,0],O=[0,0,0],P={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){E[I]=k.length/3|0,f(.5*(g[0][I]+g[1][I]),d[I],m[I],12,1.25,P),O[I]=(k.length/3|0)-E[I],S[I]=k.length/3|0;for(var z=0;z<x[I].length;++z)x[I][z].text&&f(x[I][z].x,x[I][z].text,x[I][z].font||y,x[I][z].fontSize||12,1.25,P);M[I]=(k.length/3|0)-S[I]}this.buffer.update(k),this.tickOffset=S,this.tickCount=M,this.labelOffset=E,this.labelCount=O},c.drawTicks=function(g,d,m,x,y,k,f,S){this.tickCount[g]&&(this.shader.uniforms.axis=k,this.shader.uniforms.color=y,this.shader.uniforms.angle=m,this.shader.uniforms.scale=d,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g]))},c.drawLabel=function(g,d,m,x,y,k,f,S){this.labelCount[g]&&(this.shader.uniforms.axis=k,this.shader.uniforms.color=y,this.shader.uniforms.angle=m,this.shader.uniforms.scale=d,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[g],this.labelOffset[g]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(h,s){function t(a,n){var r=a+"",l=r.indexOf("."),o=0;l>=0&&(o=r.length-l-1);var u=Math.pow(10,o),p=Math.round(a*n*u),c=p+"";if(c.indexOf("e")>=0)return c;var b=p/u,g=p%u;p<0?(b=0|-Math.ceil(b),g=0|-g):(b=0|Math.floor(b),g|=0);var d=""+b;if(p<0&&(d="-"+d),o){for(var m=""+g;m.length<o;)m="0"+m;return d+"."+m}return d}s.create=function(a,n){for(var r=[],l=0;l<3;++l){for(var o=[],u=(a[0][l],a[1][l],0);u*n[l]<=a[1][l];++u)o.push({x:u*n[l],text:t(n[l],u)});for(u=-1;u*n[l]>=a[0][l];--u)o.push({x:u*n[l],text:t(n[l],u)});r.push(o)}return r},s.equal=function(a,n){for(var r=0;r<3;++r){if(a[r].length!==n[r].length)return!1;for(var l=0;l<a[r].length;++l){var o=a[r][l],u=n[r][l];if(o.x!==u.x||o.text!==u.text||o.font!==u.font||o.fontColor!==u.fontColor||o.fontSize!==u.fontSize||o.dx!==u.dx||o.dy!==u.dy)return!1}}return!0}},2771:function(h,s,t){h.exports=function(k,f,S,M,E){var O=f.model||p,P=f.view||p,I=f.projection||p,z=f._ortho||!1,U=k.bounds,R=(E=E||r(O,P,I,U,z)).axis;l(c,P,O),l(c,I,c);for(var j=x,Z=0;Z<3;++Z)j[Z].lo=1/0,j[Z].hi=-1/0,j[Z].pixelsPerDataUnit=1/0;var F=a(o(c,c));o(c,c);for(var V=0;V<3;++V){var H=(V+1)%3,te=(V+2)%3,$=y;e:for(Z=0;Z<2;++Z){var J=[];if(R[V]<0!=!!Z){$[V]=U[Z][V];for(var X=0;X<2;++X){$[H]=U[X^Z][H];for(var K=0;K<2;++K)$[te]=U[K^X^Z][te],J.push($.slice())}var ee=z?5:4;for(X=ee;X===ee;++X){if(J.length===0)continue e;J=n.positive(J,F[X])}for(X=0;X<J.length;++X){te=J[X];var ie=m(y,c,te,S,M);for(K=0;K<3;++K)j[K].lo=Math.min(j[K].lo,te[K]),j[K].hi=Math.max(j[K].hi,te[K]),K!==V&&(j[K].pixelsPerDataUnit=Math.min(j[K].pixelsPerDataUnit,Math.abs(ie[K])))}}}}return j};var a=t(5795),n=t(4670),r=t(2864),l=t(104),o=t(2142),u=t(6342),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function b(k,f,S){this.lo=k,this.hi=f,this.pixelsPerDataUnit=S}var g=[0,0,0,1],d=[0,0,0,1];function m(k,f,S,M,E){for(var O=0;O<3;++O){for(var P=g,I=d,z=0;z<3;++z)I[z]=P[z]=S[z];I[3]=P[3]=1,I[O]+=1,u(I,I,f),I[3]<0&&(k[O]=1/0),P[O]-=1,u(P,P,f),P[3]<0&&(k[O]=1/0);var U=(P[0]/P[3]-I[0]/I[3])*M,R=(P[1]/P[3]-I[1]/I[3])*E;k[O]=.25*Math.sqrt(U*U+R*R)}return k}var x=[new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0)],y=[0,0,0]},5827:function(h,s,t){var a=t(5306),n=t(7498),r=t(5050),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function o(b,g,d,m,x){this.gl=b,this.type=g,this.handle=d,this.length=m,this.usage=x}var u=o.prototype;function p(b,g,d,m,x,y){var k=x.length*x.BYTES_PER_ELEMENT;if(y<0)return b.bufferData(g,x,m),k;if(k+y>d)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return b.bufferSubData(g,y,x),d}function c(b,g){for(var d=a.malloc(b.length,g),m=b.length,x=0;x<m;++x)d[x]=b[x];return d}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(b,g){if(typeof g!="number"&&(g=-1),this.bind(),typeof b=="object"&&b.shape!==void 0){var d=b.dtype;if(l.indexOf(d)<0&&(d="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(d=gl.getExtension("OES_element_index_uint")&&d!=="uint16"?"uint32":"uint16"),d===b.dtype&&function(k,f){for(var S=1,M=f.length-1;M>=0;--M){if(f[M]!==S)return!1;S*=k[M]}return!0}(b.shape,b.stride))b.offset===0&&b.data.length===b.shape[0]?this.length=p(this.gl,this.type,this.length,this.usage,b.data,g):this.length=p(this.gl,this.type,this.length,this.usage,b.data.subarray(b.offset,b.shape[0]),g);else{var m=a.malloc(b.size,d),x=r(m,b.shape);n.assign(x,b),this.length=p(this.gl,this.type,this.length,this.usage,g<0?m:m.subarray(0,b.size),g),a.free(m)}}else if(Array.isArray(b)){var y;y=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(b,"uint16"):c(b,"float32"),this.length=p(this.gl,this.type,this.length,this.usage,g<0?y:y.subarray(0,b.length),g),a.free(y)}else if(typeof b=="object"&&typeof b.length=="number")this.length=p(this.gl,this.type,this.length,this.usage,b,g);else{if(typeof b!="number"&&b!==void 0)throw new Error("gl-buffer: Invalid data type");if(g>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(b|=0)<=0&&(b=1),this.gl.bufferData(this.type,0|b,this.usage),this.length=b}},h.exports=function(b,g,d,m){if(d=d||b.ARRAY_BUFFER,m=m||b.DYNAMIC_DRAW,d!==b.ARRAY_BUFFER&&d!==b.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(m!==b.DYNAMIC_DRAW&&m!==b.STATIC_DRAW&&m!==b.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=b.createBuffer(),y=new o(b,d,x,0,m);return y.update(g),y}},1140:function(h,s,t){var a=t(2858);h.exports=function(r,l){var o=r.positions,u=r.vectors,p={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(r.positions.length===0)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),p;for(var c=0,b=1/0,g=-1/0,d=1/0,m=-1/0,x=1/0,y=-1/0,k=null,f=null,S=[],M=1/0,E=!1,O=0;O<o.length;O++){var P=o[O];b=Math.min(P[0],b),g=Math.max(P[0],g),d=Math.min(P[1],d),m=Math.max(P[1],m),x=Math.min(P[2],x),y=Math.max(P[2],y);var I=u[O];if(a.length(I)>c&&(c=a.length(I)),O){var z=2*a.distance(k,P)/(a.length(f)+a.length(I));z?(M=Math.min(M,z),E=!1):E=!0}E||(k=P,f=I),S.push(I)}var U=[b,d,x],R=[g,m,y];l&&(l[0]=U,l[1]=R),c===0&&(c=1);var j=1/c;isFinite(M)||(M=1),p.vectorScale=M;var Z=r.coneSize||.5;r.absoluteConeSize&&(Z=r.absoluteConeSize*j),p.coneScale=Z,O=0;for(var F=0;O<o.length;O++)for(var V=(P=o[O])[0],H=P[1],te=P[2],$=S[O],J=a.length($)*j,X=0;X<8;X++){p.positions.push([V,H,te,F++]),p.positions.push([V,H,te,F++]),p.positions.push([V,H,te,F++]),p.positions.push([V,H,te,F++]),p.positions.push([V,H,te,F++]),p.positions.push([V,H,te,F++]),p.vectors.push($),p.vectors.push($),p.vectors.push($),p.vectors.push($),p.vectors.push($),p.vectors.push($),p.vertexIntensity.push(J,J,J),p.vertexIntensity.push(J,J,J);var K=p.positions.length;p.cells.push([K-6,K-5,K-4],[K-3,K-2,K-1])}return p};var n=t(7234);h.exports.createMesh=t(5028),h.exports.createConeMesh=function(r,l){return h.exports.createMesh(r,l,{shaders:n,traceType:"cone"})}},5028:function(h,s,t){var a=t(5158),n=t(5827),r=t(2944),l=t(8931),o=t(104),u=t(7437),p=t(5050),c=t(9156),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(m,x,y,k,f,S,M,E,O,P,I){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=y,this.pickShader=k,this.trianglePositions=f,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=O,this.triangleIds=M,this.triangleVAO=P,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var d=g.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(m){this.pickId=m},d.update=function(m){m=m||{};var x=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(ie){for(var ae=c({colormap:ie,nshades:256,format:"rgba"}),oe=new Uint8Array(1024),fe=0;fe<256;++fe){for(var ge=ae[fe],ve=0;ve<3;++ve)oe[4*fe+ve]=ge[ve];oe[4*fe+3]=255*ge[3]}return p(oe,[256,256,4],[4,0,1])}(m.colormap)),this.texture.generateMipmap());var y=m.cells,k=m.positions,f=m.vectors;if(k&&y&&f){var S=[],M=[],E=[],O=[],P=[];this.cells=y,this.positions=k,this.vectors=f;var I=m.meshColor||[1,1,1,1],z=m.vertexIntensity,U=1/0,R=-1/0;if(z)if(m.vertexIntensityBounds)U=+m.vertexIntensityBounds[0],R=+m.vertexIntensityBounds[1];else for(var j=0;j<z.length;++j){var Z=z[j];U=Math.min(U,Z),R=Math.max(R,Z)}else for(j=0;j<k.length;++j)Z=k[j][2],U=Math.min(U,Z),R=Math.max(R,Z);for(this.intensity=z||function(ie){for(var ae=ie.length,oe=new Array(ae),fe=0;fe<ae;++fe)oe[fe]=ie[fe][2];return oe}(k),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=0;j<k.length;++j)for(var F=k[j],V=0;V<3;++V)!isNaN(F[V])&&isFinite(F[V])&&(this.bounds[0][V]=Math.min(this.bounds[0][V],F[V]),this.bounds[1][V]=Math.max(this.bounds[1][V],F[V]));var H=0;e:for(j=0;j<y.length;++j){var te=y[j];if(te.length===3){for(V=0;V<3;++V){F=k[J=te[V]];for(var $=0;$<3;++$)if(isNaN(F[$])||!isFinite(F[$]))continue e}for(V=0;V<3;++V){var J;F=k[J=te[2-V]],S.push(F[0],F[1],F[2],F[3]);var X=f[J];M.push(X[0],X[1],X[2],X[3]||0);var K,ee=I;ee.length===3?E.push(ee[0],ee[1],ee[2],1):E.push(ee[0],ee[1],ee[2],ee[3]),K=z?[(z[J]-U)/(R-U),0]:[(F[2]-U)/(R-U),0],O.push(K[0],K[1]),P.push(j)}H+=1}}this.triangleCount=H,this.trianglePositions.update(S),this.triangleVectors.update(M),this.triangleColors.update(E),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(P))}},d.drawTransparent=d.draw=function(m){m=m||{};for(var x=this.gl,y=m.model||b,k=m.view||b,f=m.projection||b,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)S[0][M]=Math.max(S[0][M],this.clipBounds[0][M]),S[1][M]=Math.min(S[1][M],this.clipBounds[1][M]);var E={model:y,view:k,projection:f,inverseModel:b.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),x.disable(x.CULL_FACE),this.texture.bind(0);var O=new Array(16);for(o(O,E.view,E.model),o(O,E.projection,O),u(O,O),M=0;M<3;++M)E.eyePosition[M]=O[12+M]/O[15];var P=O[15];for(M=0;M<3;++M)P+=this.lightPosition[M]*O[4*M+3];for(M=0;M<3;++M){for(var I=O[12+M],z=0;z<3;++z)I+=O[4*z+M]*this.lightPosition[z];E.lightPosition[M]=I/P}if(this.triangleCount>0){var U=this.triShader;U.bind(),U.uniforms=E,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},d.drawPick=function(m){m=m||{};for(var x=this.gl,y=m.model||b,k=m.view||b,f=m.projection||b,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)S[0][M]=Math.max(S[0][M],this.clipBounds[0][M]),S[1][M]=Math.min(S[1][M],this.clipBounds[1][M]);this._model=[].slice.call(y),this._view=[].slice.call(k),this._projection=[].slice.call(f),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var E={model:y,view:k,projection:f,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},d.pick=function(m){if(!m||m.id!==this.pickId)return null;var x=m.value[0]+256*m.value[1]+65536*m.value[2],y=this.cells[x],k=this.positions[y[1]].slice(0,3),f={position:k,dataCoordinate:k,index:Math.floor(y[1]/48)};return this.traceType==="cone"?f.index=Math.floor(y[1]/48):this.traceType==="streamtube"&&(f.intensity=this.intensity[y[1]],f.velocity=this.vectors[y[1]].slice(0,3),f.divergence=this.vectors[y[1]][3],f.index=x),f},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},h.exports=function(m,x,y){var k=y.shaders;arguments.length===1&&(m=(x=m).gl);var f=function(R,j){var Z=a(R,j.meshShader.vertex,j.meshShader.fragment,null,j.meshShader.attributes);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.vector.location=4,Z}(m,k),S=function(R,j){var Z=a(R,j.pickShader.vertex,j.pickShader.fragment,null,j.pickShader.attributes);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z.attributes.vector.location=4,Z}(m,k),M=l(m,p(new Uint8Array([255,255,255,255]),[1,1,4]));M.generateMipmap(),M.minFilter=m.LINEAR_MIPMAP_LINEAR,M.magFilter=m.LINEAR;var E=n(m),O=n(m),P=n(m),I=n(m),z=n(m),U=new g(m,M,f,S,E,O,z,P,I,r(m,[{buffer:E,type:m.FLOAT,size:4},{buffer:z,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:P,type:m.FLOAT,size:4},{buffer:I,type:m.FLOAT,size:2},{buffer:O,type:m.FLOAT,size:4}]),y.traceType||"cone");return U.update(x),U}},7234:function(h,s,t){var a=t(6832),n=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=a([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),o=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:l,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(h){h.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(h,s,t){var a=t(1950);h.exports=function(n){return a[n]}},3110:function(h,s,t){h.exports=function(g){var d=g.gl,m=a(d),x=n(d,[{buffer:m,type:d.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:d.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:d.FLOAT,size:3,offset:28,stride:40}]),y=r(d);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var k=new o(d,m,x,y);return k.update(g),k};var a=t(5827),n=t(2944),r=t(7667),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(g,d,m,x){this.gl=g,this.shader=x,this.buffer=d,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=o.prototype;function p(g,d){for(var m=0;m<3;++m)g[0][m]=Math.min(g[0][m],d[m]),g[1][m]=Math.max(g[1][m],d[m])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(g){var d=this.gl,m=this.shader.uniforms;this.shader.bind();var x=m.view=g.view||l,y=m.projection=g.projection||l;m.model=g.model||l,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var k=x[12],f=x[13],S=x[14],M=x[15],E=(g._ortho?2:1)*this.pixelRatio*(y[3]*k+y[7]*f+y[11]*S+y[15]*M)/d.drawingBufferHeight;this.vao.bind();for(var O=0;O<3;++O)d.lineWidth(this.lineWidth[O]*this.pixelRatio),m.capSize=this.capSize[O]*E,this.lineCount[O]&&d.drawArrays(d.LINES,this.lineOffset[O],this.lineCount[O]);this.vao.unbind()};var c=function(){for(var g=new Array(3),d=0;d<3;++d){for(var m=[],x=1;x<=2;++x)for(var y=-1;y<=1;y+=2){var k=[0,0,0];k[(x+d)%3]=y,m.push(k)}g[d]=m}return g}();function b(g,d,m,x){for(var y=c[x],k=0;k<y.length;++k){var f=y[k];g.push(d[0],d[1],d[2],m[0],m[1],m[2],m[3],f[0],f[1],f[2])}return y.length}u.update=function(g){"lineWidth"in(g=g||{})&&(this.lineWidth=g.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in g&&(this.capSize=g.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var d=g.color||[[0,0,0],[0,0,0],[0,0,0]],m=g.position,x=g.error;if(Array.isArray(d[0])||(d=[d,d,d]),m&&x){var y=[],k=m.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=f;e:for(var M=0;M<k;++M){for(var E=m[M],O=0;O<3;++O)if(isNaN(E[O])||!isFinite(E[O]))continue e;var P,I=x[M],z=d[S];Array.isArray(z[0])&&(z=d[M]),z.length===3?z=[z[0],z[1],z[2],1]:z.length===4&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)),isNaN(I[0][S])||isNaN(I[1][S])||(I[0][S]<0&&((P=E.slice())[S]+=I[0][S],y.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,P[0],P[1],P[2],z[0],z[1],z[2],z[3],0,0,0),p(this.bounds,P),f+=2+b(y,P,z,S)),I[1][S]>0&&((P=E.slice())[S]+=I[1][S],y.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,P[0],P[1],P[2],z[0],z[1],z[2],z[3],0,0,0),p(this.bounds,P),f+=2+b(y,P,z,S)))}this.lineCount[S]=f-this.lineOffset[S]}this.buffer.update(y)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(h,s,t){var a=t(6832),n=t(5158),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),l=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);h.exports=function(o){return n(o,r,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(h,s,t){var a=t(8931);h.exports=function(k,f,S,M){n||(n=k.FRAMEBUFFER_UNSUPPORTED,r=k.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=k.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,o=k.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=k.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(j,Z){var F=j.getParameter(Z.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(F+1);for(var V=0;V<=F;++V){for(var H=new Array(F),te=0;te<V;++te)H[te]=j.COLOR_ATTACHMENT0+te;for(te=V;te<F;++te)H[te]=j.NONE;u[V]=H}}(k,E),Array.isArray(f)&&(M=S,S=0|f[1],f=0|f[0]),typeof f!="number")throw new Error("gl-fbo: Missing shape parameter");var O=k.getParameter(k.MAX_RENDERBUFFER_SIZE);if(f<0||f>O||S<0||S>O)throw new Error("gl-fbo: Parameters are too large for FBO");var P=1;if("color"in(M=M||{})){if((P=Math.max(0|M.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(P>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(P>k.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+P+" draw buffers")}}var I=k.UNSIGNED_BYTE,z=k.getExtension("OES_texture_float");if(M.float&&P>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");I=k.FLOAT}else M.preferFloat&&P>0&&z&&(I=k.FLOAT);var U=!0;"depth"in M&&(U=!!M.depth);var R=!1;return"stencil"in M&&(R=!!M.stencil),new m(k,f,S,I,P,U,R,E)};var n,r,l,o,u=null;function p(k){return[k.getParameter(k.FRAMEBUFFER_BINDING),k.getParameter(k.RENDERBUFFER_BINDING),k.getParameter(k.TEXTURE_BINDING_2D)]}function c(k,f){k.bindFramebuffer(k.FRAMEBUFFER,f[0]),k.bindRenderbuffer(k.RENDERBUFFER,f[1]),k.bindTexture(k.TEXTURE_2D,f[2])}function b(k){switch(k){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case o:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function g(k,f,S,M,E,O){if(!M)return null;var P=a(k,f,S,E,M);return P.magFilter=k.NEAREST,P.minFilter=k.NEAREST,P.mipSamples=1,P.bind(),k.framebufferTexture2D(k.FRAMEBUFFER,O,k.TEXTURE_2D,P.handle,0),P}function d(k,f,S,M,E){var O=k.createRenderbuffer();return k.bindRenderbuffer(k.RENDERBUFFER,O),k.renderbufferStorage(k.RENDERBUFFER,M,f,S),k.framebufferRenderbuffer(k.FRAMEBUFFER,E,k.RENDERBUFFER,O),O}function m(k,f,S,M,E,O,P,I){this.gl=k,this._shape=[0|f,0|S],this._destroyed=!1,this._ext=I,this.color=new Array(E);for(var z=0;z<E;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=M,this._useDepth=O,this._useStencil=P;var U=this,R=[0|f,0|S];Object.defineProperties(R,{0:{get:function(){return U._shape[0]},set:function(j){return U.width=j}},1:{get:function(){return U._shape[1]},set:function(j){return U.height=j}}}),this._shapeVector=R,function(j){var Z=p(j.gl),F=j.gl,V=j.handle=F.createFramebuffer(),H=j._shape[0],te=j._shape[1],$=j.color.length,J=j._ext,X=j._useStencil,K=j._useDepth,ee=j._colorType;F.bindFramebuffer(F.FRAMEBUFFER,V);for(var ie=0;ie<$;++ie)j.color[ie]=g(F,H,te,ee,F.RGBA,F.COLOR_ATTACHMENT0+ie);$===0?(j._color_rb=d(F,H,te,F.RGBA4,F.COLOR_ATTACHMENT0),J&&J.drawBuffersWEBGL(u[0])):$>1&&J.drawBuffersWEBGL(u[$]);var ae=F.getExtension("WEBGL_depth_texture");ae?X?j.depth=g(F,H,te,ae.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):K&&(j.depth=g(F,H,te,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):K&&X?j._depth_rb=d(F,H,te,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):K?j._depth_rb=d(F,H,te,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):X&&(j._depth_rb=d(F,H,te,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var oe=F.checkFramebufferStatus(F.FRAMEBUFFER);if(oe!==F.FRAMEBUFFER_COMPLETE){for(j._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(j.handle),j.handle=null,j.depth&&(j.depth.dispose(),j.depth=null),j._depth_rb&&(F.deleteRenderbuffer(j._depth_rb),j._depth_rb=null),ie=0;ie<j.color.length;++ie)j.color[ie].dispose(),j.color[ie]=null;j._color_rb&&(F.deleteRenderbuffer(j._color_rb),j._color_rb=null),c(F,Z),b(oe)}c(F,Z)}(this)}var x=m.prototype;function y(k,f,S){if(k._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(k._shape[0]!==f||k._shape[1]!==S){var M=k.gl,E=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");k._shape[0]=f,k._shape[1]=S;for(var O=p(M),P=0;P<k.color.length;++P)k.color[P].shape=k._shape;k._color_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,k._color_rb),M.renderbufferStorage(M.RENDERBUFFER,M.RGBA4,k._shape[0],k._shape[1])),k.depth&&(k.depth.shape=k._shape),k._depth_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,k._depth_rb),k._useDepth&&k._useStencil?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,k._shape[0],k._shape[1]):k._useDepth?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_COMPONENT16,k._shape[0],k._shape[1]):k._useStencil&&M.renderbufferStorage(M.RENDERBUFFER,M.STENCIL_INDEX,k._shape[0],k._shape[1])),M.bindFramebuffer(M.FRAMEBUFFER,k.handle);var I=M.checkFramebufferStatus(M.FRAMEBUFFER);I!==M.FRAMEBUFFER_COMPLETE&&(k.dispose(),c(M,O),b(I)),c(M,O)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(k){if(Array.isArray(k)||(k=[0|k,0|k]),k.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|k[0],S=0|k[1];return y(this,f,S),[f,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(k){return y(this,k|=0,this._shape[1]),k},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(k){return k|=0,y(this,this._shape[0],k),k},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this.handle),k.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var k=this.gl;k.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(k.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(k.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(h,s,t){var a=t(8974).sprintf,n=t(6603),r=t(9365),l=t(8008);h.exports=function(o,u,p){var c=r(u)||"of unknown name (see npm glsl-shader-name)",b="unknown type";p!==void 0&&(b=p===n.FRAGMENT_SHADER?"fragment":"vertex");for(var g=a(`Error compiling %s shader %s:
`,b,c),d=a("%s%s",g,o),m=o.split(`
`),x={},y=0;y<m.length;y++){var k=m[y];if(k!==""&&k!=="\0"){var f=parseInt(k.split(":")[2]);if(isNaN(f))throw new Error(a("Could not parse error: %s",k));x[f]=k}}var S=l(u).split(`
`);for(y=0;y<S.length;y++)if((x[y+3]||x[y+2]||x[y+1])&&(g+=S[y]+`
`,x[y+1])){var M=x[y+1];M=M.substr(M.split(":",3).join(":").length+1).trim(),g+=a(`^^^ %s

`,M)}return{long:g.trim(),short:d.trim()}}},6386:function(h,s,t){h.exports=function(d,m){var x=d.gl,y=new p(d,l(x,u.vertex,u.fragment),l(x,u.pickVertex,u.pickFragment),o(x),o(x),o(x),o(x));return y.update(m),d.addObject(y),y};var a=t(5070),n=t(9560),r=t(5306),l=t(5158),o=t(5827),u=t(1292);function p(d,m,x,y,k,f,S){this.plot=d,this.shader=m,this.pickShader=x,this.positionBuffer=y,this.weightBuffer=k,this.colorBuffer=f,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,b=p.prototype,g=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var d=this.plot,m=this.shader,x=this.bounds,y=this.numVertices;if(!(y<=0)){var k=d.gl,f=d.dataBox,S=x[2]-x[0],M=x[3]-x[1],E=f[2]-f[0],O=f[3]-f[1];c[0]=2*S/E,c[4]=2*M/O,c[6]=2*(x[0]-f[0])/E-1,c[7]=2*(x[1]-f[1])/O-1,m.bind();var P=m.uniforms;P.viewTransform=c,P.shape=this.shape;var I=m.attributes;this.positionBuffer.bind(),I.position.pointer(),this.weightBuffer.bind(),I.weight.pointer(k.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),I.color.pointer(k.UNSIGNED_BYTE,!0),k.drawArrays(k.TRIANGLES,0,y)}}),b.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],m=[0,0,0,0];return function(x){var y=this.plot,k=this.pickShader,f=this.bounds,S=this.numVertices;if(!(S<=0)){var M=y.gl,E=y.dataBox,O=f[2]-f[0],P=f[3]-f[1],I=E[2]-E[0],z=E[3]-E[1];d[0]=2*O/I,d[4]=2*P/z,d[6]=2*(f[0]-E[0])/I-1,d[7]=2*(f[1]-E[1])/z-1;for(var U=0;U<4;++U)m[U]=x>>8*U&255;this.pickOffset=x,k.bind();var R=k.uniforms;R.viewTransform=d,R.pickOffset=m,R.shape=this.shape;var j=k.attributes;return this.positionBuffer.bind(),j.position.pointer(),this.weightBuffer.bind(),j.weight.pointer(M.UNSIGNED_BYTE,!1),this.idBuffer.bind(),j.pickId.pointer(M.UNSIGNED_BYTE,!1),M.drawArrays(M.TRIANGLES,0,S),x+this.shape[0]*this.shape[1]}}}(),b.pick=function(d,m,x){var y=this.pickOffset,k=this.shape[0]*this.shape[1];if(x<y||x>=y+k)return null;var f=x-y,S=this.xData,M=this.yData;return{object:this,pointId:f,dataCoord:[S[f%this.shape[0]],M[f/this.shape[0]|0]]}},b.update=function(d){var m=(d=d||{}).shape||[0,0],x=d.x||n(m[0]),y=d.y||n(m[1]),k=d.z||new Float32Array(m[0]*m[1]),f=d.zsmooth!==!1;this.xData=x,this.yData=y;var S,M,E,O,P=d.colorLevels||[0],I=d.colorValues||[0,0,0,1],z=P.length,U=this.bounds;f?(S=U[0]=x[0],M=U[1]=y[0],E=U[2]=x[x.length-1],O=U[3]=y[y.length-1]):(S=U[0]=x[0]+(x[1]-x[0])/2,M=U[1]=y[0]+(y[1]-y[0])/2,E=U[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,O=U[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var R=1/(E-S),j=1/(O-M),Z=m[0],F=m[1];this.shape=[Z,F];var V=(f?(Z-1)*(F-1):Z*F)*(g.length>>>1);this.numVertices=V;for(var H=r.mallocUint8(4*V),te=r.mallocFloat32(2*V),$=r.mallocUint8(2*V),J=r.mallocUint32(V),X=0,K=f?Z-1:Z,ee=f?F-1:F,ie=0;ie<ee;++ie){var ae,oe;f?(ae=j*(y[ie]-M),oe=j*(y[ie+1]-M)):(ae=ie<F-1?j*(y[ie]-(y[ie+1]-y[ie])/2-M):j*(y[ie]-(y[ie]-y[ie-1])/2-M),oe=ie<F-1?j*(y[ie]+(y[ie+1]-y[ie])/2-M):j*(y[ie]+(y[ie]-y[ie-1])/2-M));for(var fe=0;fe<K;++fe){var ge,ve;f?(ge=R*(x[fe]-S),ve=R*(x[fe+1]-S)):(ge=fe<Z-1?R*(x[fe]-(x[fe+1]-x[fe])/2-S):R*(x[fe]-(x[fe]-x[fe-1])/2-S),ve=fe<Z-1?R*(x[fe]+(x[fe+1]-x[fe])/2-S):R*(x[fe]+(x[fe]-x[fe-1])/2-S));for(var xe=0;xe<g.length;xe+=2){var _e,ye,Ce,ke,Te=g[xe],le=g[xe+1],ue=k[f?(ie+le)*Z+(fe+Te):ie*Z+fe],de=a.le(P,ue);if(de<0)_e=I[0],ye=I[1],Ce=I[2],ke=I[3];else if(de===z-1)_e=I[4*z-4],ye=I[4*z-3],Ce=I[4*z-2],ke=I[4*z-1];else{var Le=(ue-P[de])/(P[de+1]-P[de]),we=1-Le,Ee=4*de,Oe=4*(de+1);_e=we*I[Ee]+Le*I[Oe],ye=we*I[Ee+1]+Le*I[Oe+1],Ce=we*I[Ee+2]+Le*I[Oe+2],ke=we*I[Ee+3]+Le*I[Oe+3]}H[4*X]=255*_e,H[4*X+1]=255*ye,H[4*X+2]=255*Ce,H[4*X+3]=255*ke,te[2*X]=.5*ge+.5*ve,te[2*X+1]=.5*ae+.5*oe,$[2*X]=Te,$[2*X+1]=le,J[X]=ie*Z+fe,X+=1}}}this.positionBuffer.update(te),this.weightBuffer.update($),this.colorBuffer.update(H),this.idBuffer.update(J),r.free(te),r.free(H),r.free($),r.free(J)},b.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(h,s,t){var a=t(6832);h.exports={fragment:a([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:a([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(h,s,t){var a=t(6832),n=t(5158),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),o=a([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(p){return n(p,r,l,null,u)},s.createPickShader=function(p){return n(p,r,o,null,u)}},6086:function(h,s,t){h.exports=function(S){var M=S.gl||S.scene&&S.scene.gl,E=b(M);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var O=g(M);O.attributes.position.location=0,O.attributes.nextPosition.location=1,O.attributes.arcLength.location=2,O.attributes.lineWidth.location=3,O.attributes.color.location=4;for(var P=a(M),I=n(M,[{buffer:P,size:3,offset:0,stride:48},{buffer:P,size:3,offset:12,stride:48},{buffer:P,size:1,offset:24,stride:48},{buffer:P,size:1,offset:28,stride:48},{buffer:P,size:4,offset:32,stride:48}]),z=p(new Array(1024),[256,1,4]),U=0;U<1024;++U)z.data[U]=255;var R=r(M,z);R.wrap=M.REPEAT;var j=new k(M,E,O,P,I,R);return j.update(S),j};var a=t(5827),n=t(2944),r=t(8931),l=new Uint8Array(4),o=new Float32Array(l.buffer),u=t(5070),p=t(5050),c=t(248),b=c.createShader,g=c.createPickShader,d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(S,M){for(var E=0,O=0;O<3;++O){var P=S[O]-M[O];E+=P*P}return Math.sqrt(E)}function x(S){for(var M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)M[0][E]=Math.max(S[0][E],M[0][E]),M[1][E]=Math.min(S[1][E],M[1][E]);return M}function y(S,M,E,O){this.arcLength=S,this.position=M,this.index=E,this.dataCoordinate=O}function k(S,M,E,O,P,I){this.gl=S,this.shader=M,this.pickShader=E,this.buffer=O,this.vao=P,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=I,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=k.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(S){this.pickId=S},f.drawTransparent=f.draw=function(S){if(this.vertexCount){var M=this.gl,E=this.shader,O=this.vao;E.bind(),E.uniforms={model:S.model||d,view:S.view||d,projection:S.projection||d,clipBounds:x(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},O.bind(),O.draw(M.TRIANGLE_STRIP,this.vertexCount),O.unbind()}},f.drawPick=function(S){if(this.vertexCount){var M=this.gl,E=this.pickShader,O=this.vao;E.bind(),E.uniforms={model:S.model||d,view:S.view||d,projection:S.projection||d,pickId:this.pickId,clipBounds:x(this.clipBounds),screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},O.bind(),O.draw(M.TRIANGLE_STRIP,this.vertexCount),O.unbind()}},f.update=function(S){var M,E;this.dirty=!0;var O=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var P=[],I=[],z=[],U=0,R=0,j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Z=S.position||S.positions;if(Z){var F=S.color||S.colors||[0,0,0,1],V=S.lineWidth||1,H=!1;e:for(M=1;M<Z.length;++M){var te,$,J,X=Z[M-1],K=Z[M];for(I.push(U),z.push(X.slice()),E=0;E<3;++E){if(isNaN(X[E])||isNaN(K[E])||!isFinite(X[E])||!isFinite(K[E])){if(!O&&P.length>0){for(var ee=0;ee<24;++ee)P.push(P[P.length-12]);R+=2,H=!0}continue e}j[0][E]=Math.min(j[0][E],X[E],K[E]),j[1][E]=Math.max(j[1][E],X[E],K[E])}Array.isArray(F[0])?(te=F.length>M-1?F[M-1]:F.length>0?F[F.length-1]:[0,0,0,1],$=F.length>M?F[M]:F.length>0?F[F.length-1]:[0,0,0,1]):te=$=F,te.length===3&&(te=[te[0],te[1],te[2],1]),$.length===3&&($=[$[0],$[1],$[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),J=Array.isArray(V)?V.length>M-1?V[M-1]:V.length>0?V[V.length-1]:[0,0,0,1]:V;var ie=U;if(U+=m(X,K),H){for(E=0;E<2;++E)P.push(X[0],X[1],X[2],K[0],K[1],K[2],ie,J,te[0],te[1],te[2],te[3]);R+=2,H=!1}P.push(X[0],X[1],X[2],K[0],K[1],K[2],ie,J,te[0],te[1],te[2],te[3],X[0],X[1],X[2],K[0],K[1],K[2],ie,-J,te[0],te[1],te[2],te[3],K[0],K[1],K[2],X[0],X[1],X[2],U,-J,$[0],$[1],$[2],$[3],K[0],K[1],K[2],X[0],X[1],X[2],U,J,$[0],$[1],$[2],$[3]),R+=4}}if(this.buffer.update(P),I.push(U),z.push(Z[Z.length-1].slice()),this.bounds=j,this.vertexCount=R,this.points=z,this.arcLength=I,"dashes"in S){var ae=S.dashes.slice();for(ae.unshift(0),M=1;M<ae.length;++M)ae[M]=ae[M-1]+ae[M];var oe=p(new Array(1024),[256,1,4]);for(M=0;M<256;++M){for(E=0;E<4;++E)oe.set(M,0,E,0);1&u.le(ae,ae[ae.length-1]*M/255)?oe.set(M,0,0,0):oe.set(M,0,0,255)}this.texture.setPixels(oe)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(S){if(!S||S.id!==this.pickId)return null;var M=function(Z,F,V,H){return l[0]=0,l[1]=V,l[2]=F,l[3]=Z,o[0]}(S.value[0],S.value[1],S.value[2]),E=u.le(this.arcLength,M);if(E<0)return null;if(E===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var O=this.points[E],P=this.points[Math.min(E+1,this.points.length-1)],I=(M-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),z=1-I,U=[0,0,0],R=0;R<3;++R)U[R]=z*O[R]+I*P[R];var j=Math.min(I<.5?E:E+1,this.points.length-1);return new y(M,U,j,this.points[j])}},7332:function(h){h.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},9823:function(h){h.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2],r=s[3],l=s[4],o=s[5],u=s[6],p=s[7],c=s[8],b=s[9],g=s[10],d=s[11],m=s[12],x=s[13],y=s[14],k=s[15];return(t*o-a*l)*(g*k-d*y)-(t*u-n*l)*(b*k-d*x)+(t*p-r*l)*(b*y-g*x)+(a*u-n*o)*(c*k-d*m)-(a*p-r*o)*(c*y-g*m)+(n*p-r*u)*(c*x-b*m)}},5950:function(h){h.exports=function(s,t){var a=t[0],n=t[1],r=t[2],l=t[3],o=a+a,u=n+n,p=r+r,c=a*o,b=n*o,g=n*u,d=r*o,m=r*u,x=r*p,y=l*o,k=l*u,f=l*p;return s[0]=1-g-x,s[1]=b+f,s[2]=d-k,s[3]=0,s[4]=b-f,s[5]=1-c-x,s[6]=m+y,s[7]=0,s[8]=d+k,s[9]=m-y,s[10]=1-c-g,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],l=t[2],o=t[3],u=n+n,p=r+r,c=l+l,b=n*u,g=n*p,d=n*c,m=r*p,x=r*c,y=l*c,k=o*u,f=o*p,S=o*c;return s[0]=1-(m+y),s[1]=g+S,s[2]=d-f,s[3]=0,s[4]=g-S,s[5]=1-(b+y),s[6]=x+k,s[7]=0,s[8]=d+f,s[9]=x-k,s[10]=1-(b+m),s[11]=0,s[12]=a[0],s[13]=a[1],s[14]=a[2],s[15]=1,s}},9947:function(h){h.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(h){h.exports=function(s,t){var a=t[0],n=t[1],r=t[2],l=t[3],o=t[4],u=t[5],p=t[6],c=t[7],b=t[8],g=t[9],d=t[10],m=t[11],x=t[12],y=t[13],k=t[14],f=t[15],S=a*u-n*o,M=a*p-r*o,E=a*c-l*o,O=n*p-r*u,P=n*c-l*u,I=r*c-l*p,z=b*y-g*x,U=b*k-d*x,R=b*f-m*x,j=g*k-d*y,Z=g*f-m*y,F=d*f-m*k,V=S*F-M*Z+E*j+O*R-P*U+I*z;return V?(V=1/V,s[0]=(u*F-p*Z+c*j)*V,s[1]=(r*Z-n*F-l*j)*V,s[2]=(y*I-k*P+f*O)*V,s[3]=(d*P-g*I-m*O)*V,s[4]=(p*R-o*F-c*U)*V,s[5]=(a*F-r*R+l*U)*V,s[6]=(k*E-x*I-f*M)*V,s[7]=(b*I-d*E+m*M)*V,s[8]=(o*Z-u*R+c*z)*V,s[9]=(n*R-a*Z-l*z)*V,s[10]=(x*P-y*E+f*S)*V,s[11]=(g*E-b*P-m*S)*V,s[12]=(u*U-o*j-p*z)*V,s[13]=(a*j-n*U+r*z)*V,s[14]=(y*M-x*O-k*S)*V,s[15]=(b*O-g*M+d*S)*V,s):null}},3012:function(h,s,t){var a=t(9947);h.exports=function(n,r,l,o){var u,p,c,b,g,d,m,x,y,k,f=r[0],S=r[1],M=r[2],E=o[0],O=o[1],P=o[2],I=l[0],z=l[1],U=l[2];return Math.abs(f-I)<1e-6&&Math.abs(S-z)<1e-6&&Math.abs(M-U)<1e-6?a(n):(m=f-I,x=S-z,y=M-U,u=O*(y*=k=1/Math.sqrt(m*m+x*x+y*y))-P*(x*=k),p=P*(m*=k)-E*y,c=E*x-O*m,(k=Math.sqrt(u*u+p*p+c*c))?(u*=k=1/k,p*=k,c*=k):(u=0,p=0,c=0),b=x*c-y*p,g=y*u-m*c,d=m*p-x*u,(k=Math.sqrt(b*b+g*g+d*d))?(b*=k=1/k,g*=k,d*=k):(b=0,g=0,d=0),n[0]=u,n[1]=b,n[2]=m,n[3]=0,n[4]=p,n[5]=g,n[6]=x,n[7]=0,n[8]=c,n[9]=d,n[10]=y,n[11]=0,n[12]=-(u*f+p*S+c*M),n[13]=-(b*f+g*S+d*M),n[14]=-(m*f+x*S+y*M),n[15]=1,n)}},104:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],l=t[2],o=t[3],u=t[4],p=t[5],c=t[6],b=t[7],g=t[8],d=t[9],m=t[10],x=t[11],y=t[12],k=t[13],f=t[14],S=t[15],M=a[0],E=a[1],O=a[2],P=a[3];return s[0]=M*n+E*u+O*g+P*y,s[1]=M*r+E*p+O*d+P*k,s[2]=M*l+E*c+O*m+P*f,s[3]=M*o+E*b+O*x+P*S,M=a[4],E=a[5],O=a[6],P=a[7],s[4]=M*n+E*u+O*g+P*y,s[5]=M*r+E*p+O*d+P*k,s[6]=M*l+E*c+O*m+P*f,s[7]=M*o+E*b+O*x+P*S,M=a[8],E=a[9],O=a[10],P=a[11],s[8]=M*n+E*u+O*g+P*y,s[9]=M*r+E*p+O*d+P*k,s[10]=M*l+E*c+O*m+P*f,s[11]=M*o+E*b+O*x+P*S,M=a[12],E=a[13],O=a[14],P=a[15],s[12]=M*n+E*u+O*g+P*y,s[13]=M*r+E*p+O*d+P*k,s[14]=M*l+E*c+O*m+P*f,s[15]=M*o+E*b+O*x+P*S,s}},5268:function(h){h.exports=function(s,t,a,n,r,l,o){var u=1/(t-a),p=1/(n-r),c=1/(l-o);return s[0]=-2*u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*p,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(t+a)*u,s[13]=(r+n)*p,s[14]=(o+l)*c,s[15]=1,s}},1120:function(h){h.exports=function(s,t,a,n,r){var l=1/Math.tan(t/2),o=1/(n-r);return s[0]=l/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(r+n)*o,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*r*n*o,s[15]=0,s}},4422:function(h){h.exports=function(s,t,a,n){var r,l,o,u,p,c,b,g,d,m,x,y,k,f,S,M,E,O,P,I,z,U,R,j,Z=n[0],F=n[1],V=n[2],H=Math.sqrt(Z*Z+F*F+V*V);return Math.abs(H)<1e-6?null:(Z*=H=1/H,F*=H,V*=H,r=Math.sin(a),o=1-(l=Math.cos(a)),u=t[0],p=t[1],c=t[2],b=t[3],g=t[4],d=t[5],m=t[6],x=t[7],y=t[8],k=t[9],f=t[10],S=t[11],M=Z*Z*o+l,E=F*Z*o+V*r,O=V*Z*o-F*r,P=Z*F*o-V*r,I=F*F*o+l,z=V*F*o+Z*r,U=Z*V*o+F*r,R=F*V*o-Z*r,j=V*V*o+l,s[0]=u*M+g*E+y*O,s[1]=p*M+d*E+k*O,s[2]=c*M+m*E+f*O,s[3]=b*M+x*E+S*O,s[4]=u*P+g*I+y*z,s[5]=p*P+d*I+k*z,s[6]=c*P+m*I+f*z,s[7]=b*P+x*I+S*z,s[8]=u*U+g*R+y*j,s[9]=p*U+d*R+k*j,s[10]=c*U+m*R+f*j,s[11]=b*U+x*R+S*j,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},6109:function(h){h.exports=function(s,t,a){var n=Math.sin(a),r=Math.cos(a),l=t[4],o=t[5],u=t[6],p=t[7],c=t[8],b=t[9],g=t[10],d=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=l*r+c*n,s[5]=o*r+b*n,s[6]=u*r+g*n,s[7]=p*r+d*n,s[8]=c*r-l*n,s[9]=b*r-o*n,s[10]=g*r-u*n,s[11]=d*r-p*n,s}},7115:function(h){h.exports=function(s,t,a){var n=Math.sin(a),r=Math.cos(a),l=t[0],o=t[1],u=t[2],p=t[3],c=t[8],b=t[9],g=t[10],d=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=l*r-c*n,s[1]=o*r-b*n,s[2]=u*r-g*n,s[3]=p*r-d*n,s[8]=l*n+c*r,s[9]=o*n+b*r,s[10]=u*n+g*r,s[11]=p*n+d*r,s}},5240:function(h){h.exports=function(s,t,a){var n=Math.sin(a),r=Math.cos(a),l=t[0],o=t[1],u=t[2],p=t[3],c=t[4],b=t[5],g=t[6],d=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=l*r+c*n,s[1]=o*r+b*n,s[2]=u*r+g*n,s[3]=p*r+d*n,s[4]=c*r-l*n,s[5]=b*r-o*n,s[6]=g*r-u*n,s[7]=d*r-p*n,s}},3668:function(h){h.exports=function(s,t,a){var n=a[0],r=a[1],l=a[2];return s[0]=t[0]*n,s[1]=t[1]*n,s[2]=t[2]*n,s[3]=t[3]*n,s[4]=t[4]*r,s[5]=t[5]*r,s[6]=t[6]*r,s[7]=t[7]*r,s[8]=t[8]*l,s[9]=t[9]*l,s[10]=t[10]*l,s[11]=t[11]*l,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},998:function(h){h.exports=function(s,t,a){var n,r,l,o,u,p,c,b,g,d,m,x,y=a[0],k=a[1],f=a[2];return t===s?(s[12]=t[0]*y+t[4]*k+t[8]*f+t[12],s[13]=t[1]*y+t[5]*k+t[9]*f+t[13],s[14]=t[2]*y+t[6]*k+t[10]*f+t[14],s[15]=t[3]*y+t[7]*k+t[11]*f+t[15]):(n=t[0],r=t[1],l=t[2],o=t[3],u=t[4],p=t[5],c=t[6],b=t[7],g=t[8],d=t[9],m=t[10],x=t[11],s[0]=n,s[1]=r,s[2]=l,s[3]=o,s[4]=u,s[5]=p,s[6]=c,s[7]=b,s[8]=g,s[9]=d,s[10]=m,s[11]=x,s[12]=n*y+u*k+g*f+t[12],s[13]=r*y+p*k+d*f+t[13],s[14]=l*y+c*k+m*f+t[14],s[15]=o*y+b*k+x*f+t[15]),s}},2142:function(h){h.exports=function(s,t){if(s===t){var a=t[1],n=t[2],r=t[3],l=t[6],o=t[7],u=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=a,s[6]=t[9],s[7]=t[13],s[8]=n,s[9]=l,s[11]=t[14],s[12]=r,s[13]=o,s[14]=u}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},4340:function(h,s,t){var a=t(957),n=t(7309);function r(u,p){for(var c=[0,0,0,0],b=0;b<4;++b)for(var g=0;g<4;++g)c[g]+=u[4*b+g]*p[b];return c}function l(u,p,c,b,g){for(var d=r(b,r(c,r(p,[u[0],u[1],u[2],1]))),m=0;m<3;++m)d[m]/=d[3];return[.5*g[0]*(1+d[0]),.5*g[1]*(1-d[1])]}function o(u,p){for(var c=[0,0,0],b=0;b<u.length;++b)for(var g=u[b],d=p[b],m=0;m<3;++m)c[m]+=d*g[m];return c}h.exports=function(u,p,c,b,g,d){if(u.length===1)return[0,u[0].slice()];for(var m=new Array(u.length),x=0;x<u.length;++x)m[x]=l(u[x],c,b,g,d);var y=0,k=1/0;for(x=0;x<m.length;++x){for(var f=0,S=0;S<2;++S)f+=Math.pow(m[x][S]-p[S],2);f<k&&(k=f,y=x)}var M=function(O,P){if(O.length===2){for(var I=0,z=0,U=0;U<2;++U)I+=Math.pow(P[U]-O[0][U],2),z+=Math.pow(P[U]-O[1][U],2);return(I=Math.sqrt(I))+(z=Math.sqrt(z))<1e-6?[1,0]:[z/(I+z),I/(z+I)]}if(O.length===3){var R=[0,0];return n(O[0],O[1],O[2],P,R),a(O,R)}return[]}(m,p),E=0;for(x=0;x<3;++x){if(M[x]<-.001||M[x]>1.0001)return null;E+=M[x]}return Math.abs(E-1)>.001?null:[y,o(u,M),M]}},2056:function(h,s,t){var a=t(6832),n=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),r=a([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),o=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),p=a([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),b=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),m=a([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:l,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:u,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:c,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:g,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:d,fragment:m,attributes:[{name:"position",type:"vec3"}]}},8116:function(h,s,t){var a=t(5158),n=t(5827),r=t(2944),l=t(8931),o=t(115),u=t(104),p=t(7437),c=t(5050),b=t(9156),g=t(7212),d=t(5306),m=t(2056),x=t(4340),y=m.meshShader,k=m.wireShader,f=m.pointShader,S=m.pickShader,M=m.pointPickShader,E=m.contourShader,O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function P(F,V,H,te,$,J,X,K,ee,ie,ae,oe,fe,ge,ve,xe,_e,ye,Ce,ke,Te,le,ue,de,Le,we,Ee){this.gl=F,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=V,this.dirty=!0,this.triShader=H,this.lineShader=te,this.pointShader=$,this.pickShader=J,this.pointPickShader=X,this.contourShader=K,this.trianglePositions=ee,this.triangleColors=ae,this.triangleNormals=fe,this.triangleUVs=oe,this.triangleIds=ie,this.triangleVAO=ge,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ve,this.edgeColors=_e,this.edgeUVs=ye,this.edgeIds=xe,this.edgeVAO=Ce,this.edgeCount=0,this.pointPositions=ke,this.pointColors=le,this.pointUVs=ue,this.pointSizes=de,this.pointIds=Te,this.pointVAO=Le,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=we,this.contourVAO=Ee,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=O,this._view=O,this._projection=O,this._resolution=[1,1]}var I=P.prototype;function z(F,V){if(!V||!V.length)return 1;for(var H=0;H<V.length;++H){if(V.length<2)return 1;if(V[H][0]===F)return V[H][1];if(V[H][0]>F&&H>0){var te=(V[H][0]-F)/(V[H][0]-V[H-1][0]);return V[H][1]*(1-te)+te*V[H-1][1]}}return 1}function U(F){var V=a(F,f.vertex,f.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V.attributes.pointSize.location=4,V}function R(F){var V=a(F,S.vertex,S.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V}function j(F){var V=a(F,M.vertex,M.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V.attributes.pointSize.location=4,V}function Z(F){var V=a(F,E.vertex,E.fragment);return V.attributes.position.location=0,V}I.isOpaque=function(){return!this.hasAlpha},I.isTransparent=function(){return this.hasAlpha},I.pickSlots=1,I.setPickBase=function(F){this.pickId=F},I.highlight=function(F){if(F&&this.contourEnable){for(var V=g(this.cells,this.intensity,F.intensity),H=V.cells,te=V.vertexIds,$=V.vertexWeights,J=H.length,X=d.mallocFloat32(6*J),K=0,ee=0;ee<J;++ee)for(var ie=H[ee],ae=0;ae<2;++ae){var oe=ie[0];ie.length===2&&(oe=ie[ae]);for(var fe=te[oe][0],ge=te[oe][1],ve=$[oe],xe=1-ve,_e=this.positions[fe],ye=this.positions[ge],Ce=0;Ce<3;++Ce)X[K++]=ve*_e[Ce]+xe*ye[Ce]}this.contourCount=K/3|0,this.contourPositions.update(X.subarray(0,K)),d.free(X)}else this.contourCount=0},I.update=function(F){F=F||{};var V=this.gl;this.dirty=!0,"contourEnable"in F&&(this.contourEnable=F.contourEnable),"contourColor"in F&&(this.contourColor=F.contourColor),"lineWidth"in F&&(this.lineWidth=F.lineWidth),"lightPosition"in F&&(this.lightPosition=F.lightPosition),this.hasAlpha=!1,"opacity"in F&&(this.opacity=F.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in F&&(this.opacityscale=F.opacityscale,this.hasAlpha=!0),"ambient"in F&&(this.ambientLight=F.ambient),"diffuse"in F&&(this.diffuseLight=F.diffuse),"specular"in F&&(this.specularLight=F.specular),"roughness"in F&&(this.roughness=F.roughness),"fresnel"in F&&(this.fresnel=F.fresnel),F.texture?(this.texture.dispose(),this.texture=l(V,F.texture)):F.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=V.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=V.LINEAR,this.texture.setPixels(function(zt,Ft){for(var Pt=b({colormap:zt,nshades:256,format:"rgba"}),Xe=new Uint8Array(1024),Ke=0;Ke<256;++Ke){for(var He=Pt[Ke],Je=0;Je<3;++Je)Xe[4*Ke+Je]=He[Je];Xe[4*Ke+3]=Ft?255*z(Ke/255,Ft):255*He[3]}return c(Xe,[256,256,4],[4,0,1])}(F.colormap,this.opacityscale)),this.texture.generateMipmap());var H=F.cells,te=F.positions;if(te&&H){var $=[],J=[],X=[],K=[],ee=[],ie=[],ae=[],oe=[],fe=[],ge=[],ve=[],xe=[],_e=[],ye=[];this.cells=H,this.positions=te;var Ce=F.vertexNormals,ke=F.cellNormals,Te=F.vertexNormalsEpsilon===void 0?1e-6:F.vertexNormalsEpsilon,le=F.faceNormalsEpsilon===void 0?1e-6:F.faceNormalsEpsilon;F.useFacetNormals&&!ke&&(ke=o.faceNormals(H,te,le)),ke||Ce||(Ce=o.vertexNormals(H,te,Te));var ue=F.vertexColors,de=F.cellColors,Le=F.meshColor||[1,1,1,1],we=F.vertexUVs,Ee=F.vertexIntensity,Oe=F.cellUVs,Fe=F.cellIntensity,pe=1/0,be=-1/0;if(!we&&!Oe)if(Ee)if(F.vertexIntensityBounds)pe=+F.vertexIntensityBounds[0],be=+F.vertexIntensityBounds[1];else for(var Me=0;Me<Ee.length;++Me){var De=Ee[Me];pe=Math.min(pe,De),be=Math.max(be,De)}else if(Fe)if(F.cellIntensityBounds)pe=+F.cellIntensityBounds[0],be=+F.cellIntensityBounds[1];else for(Me=0;Me<Fe.length;++Me)De=Fe[Me],pe=Math.min(pe,De),be=Math.max(be,De);else for(Me=0;Me<te.length;++Me)De=te[Me][2],pe=Math.min(pe,De),be=Math.max(be,De);this.intensity=Ee||Fe||function(zt){for(var Ft=zt.length,Pt=new Array(Ft),Xe=0;Xe<Ft;++Xe)Pt[Xe]=zt[Xe][2];return Pt}(te),this.pickVertex=!(Fe||de);var Ne=F.pointSizes,Be=F.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Me=0;Me<te.length;++Me)for(var Ye=te[Me],We=0;We<3;++We)!isNaN(Ye[We])&&isFinite(Ye[We])&&(this.bounds[0][We]=Math.min(this.bounds[0][We],Ye[We]),this.bounds[1][We]=Math.max(this.bounds[1][We],Ye[We]));var et=0,ft=0,ht=0;e:for(Me=0;Me<H.length;++Me){var mt=H[Me];switch(mt.length){case 1:for(Ye=te[_t=mt[0]],We=0;We<3;++We)if(isNaN(Ye[We])||!isFinite(Ye[We]))continue e;ge.push(Ye[0],Ye[1],Ye[2]),it=ue?ue[_t]:de?de[Me]:Le,this.opacityscale&&Ee?J.push(it[0],it[1],it[2],this.opacity*z((Ee[_t]-pe)/(be-pe),this.opacityscale)):it.length===3?ve.push(it[0],it[1],it[2],this.opacity):(ve.push(it[0],it[1],it[2],it[3]*this.opacity),it[3]<1&&(this.hasAlpha=!0)),st=we?we[_t]:Ee?[(Ee[_t]-pe)/(be-pe),0]:Oe?Oe[Me]:Fe?[(Fe[Me]-pe)/(be-pe),0]:[(Ye[2]-pe)/(be-pe),0],xe.push(st[0],st[1]),Ne?_e.push(Ne[_t]):_e.push(Be),ye.push(Me),ht+=1;break;case 2:for(We=0;We<2;++We){Ye=te[_t=mt[We]];for(var Mt=0;Mt<3;++Mt)if(isNaN(Ye[Mt])||!isFinite(Ye[Mt]))continue e}for(We=0;We<2;++We)Ye=te[_t=mt[We]],ie.push(Ye[0],Ye[1],Ye[2]),it=ue?ue[_t]:de?de[Me]:Le,this.opacityscale&&Ee?J.push(it[0],it[1],it[2],this.opacity*z((Ee[_t]-pe)/(be-pe),this.opacityscale)):it.length===3?ae.push(it[0],it[1],it[2],this.opacity):(ae.push(it[0],it[1],it[2],it[3]*this.opacity),it[3]<1&&(this.hasAlpha=!0)),st=we?we[_t]:Ee?[(Ee[_t]-pe)/(be-pe),0]:Oe?Oe[Me]:Fe?[(Fe[Me]-pe)/(be-pe),0]:[(Ye[2]-pe)/(be-pe),0],oe.push(st[0],st[1]),fe.push(Me);ft+=1;break;case 3:for(We=0;We<3;++We)for(Ye=te[_t=mt[We]],Mt=0;Mt<3;++Mt)if(isNaN(Ye[Mt])||!isFinite(Ye[Mt]))continue e;for(We=0;We<3;++We){var _t,it,st,St;Ye=te[_t=mt[2-We]],$.push(Ye[0],Ye[1],Ye[2]),(it=ue?ue[_t]:de?de[Me]:Le)?this.opacityscale&&Ee?J.push(it[0],it[1],it[2],this.opacity*z((Ee[_t]-pe)/(be-pe),this.opacityscale)):it.length===3?J.push(it[0],it[1],it[2],this.opacity):(J.push(it[0],it[1],it[2],it[3]*this.opacity),it[3]<1&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),st=we?we[_t]:Ee?[(Ee[_t]-pe)/(be-pe),0]:Oe?Oe[Me]:Fe?[(Fe[Me]-pe)/(be-pe),0]:[(Ye[2]-pe)/(be-pe),0],K.push(st[0],st[1]),St=Ce?Ce[_t]:ke[Me],X.push(St[0],St[1],St[2]),ee.push(Me)}et+=1}}this.pointCount=ht,this.edgeCount=ft,this.triangleCount=et,this.pointPositions.update(ge),this.pointColors.update(ve),this.pointUVs.update(xe),this.pointSizes.update(_e),this.pointIds.update(new Uint32Array(ye)),this.edgePositions.update(ie),this.edgeColors.update(ae),this.edgeUVs.update(oe),this.edgeIds.update(new Uint32Array(fe)),this.trianglePositions.update($),this.triangleColors.update(J),this.triangleUVs.update(K),this.triangleNormals.update(X),this.triangleIds.update(new Uint32Array(ee))}},I.drawTransparent=I.draw=function(F){F=F||{};for(var V=this.gl,H=F.model||O,te=F.view||O,$=F.projection||O,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)J[0][X]=Math.max(J[0][X],this.clipBounds[0][X]),J[1][X]=Math.min(J[1][X],this.clipBounds[1][X]);var K={model:H,view:te,projection:$,inverseModel:O.slice(),clipBounds:J,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};K.inverseModel=p(K.inverseModel,K.model),V.disable(V.CULL_FACE),this.texture.bind(0);var ee=new Array(16);for(u(ee,K.view,K.model),u(ee,K.projection,ee),p(ee,ee),X=0;X<3;++X)K.eyePosition[X]=ee[12+X]/ee[15];var ie,ae=ee[15];for(X=0;X<3;++X)ae+=this.lightPosition[X]*ee[4*X+3];for(X=0;X<3;++X){for(var oe=ee[12+X],fe=0;fe<3;++fe)oe+=ee[4*fe+X]*this.lightPosition[fe];K.lightPosition[X]=oe/ae}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=K,this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=K,this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=K,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=K,this.contourVAO.bind(),V.drawArrays(V.LINES,0,this.contourCount),this.contourVAO.unbind())},I.drawPick=function(F){F=F||{};for(var V=this.gl,H=F.model||O,te=F.view||O,$=F.projection||O,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)J[0][X]=Math.max(J[0][X],this.clipBounds[0][X]),J[1][X]=Math.min(J[1][X],this.clipBounds[1][X]);this._model=[].slice.call(H),this._view=[].slice.call(te),this._projection=[].slice.call($),this._resolution=[V.drawingBufferWidth,V.drawingBufferHeight];var K,ee={model:H,view:te,projection:$,clipBounds:J,pickId:this.pickId/255};(K=this.pickShader).bind(),K.uniforms=ee,this.triangleCount>0&&(this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((K=this.pointPickShader).bind(),K.uniforms=ee,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind())},I.pick=function(F){if(!F||F.id!==this.pickId)return null;for(var V=F.value[0]+256*F.value[1]+65536*F.value[2],H=this.cells[V],te=this.positions,$=new Array(H.length),J=0;J<H.length;++J)$[J]=te[H[J]];var X=F.coord[0],K=F.coord[1];if(!this.pickVertex){var ee=this.positions[H[0]],ie=this.positions[H[1]],ae=this.positions[H[2]],oe=[(ee[0]+ie[0]+ae[0])/3,(ee[1]+ie[1]+ae[1])/3,(ee[2]+ie[2]+ae[2])/3];return{_cellCenter:!0,position:[X,K],index:V,cell:H,cellId:V,intensity:this.intensity[V],dataCoordinate:oe}}var fe=x($,[X*this.pixelRatio,this._resolution[1]-K*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!fe)return null;var ge=fe[2],ve=0;for(J=0;J<H.length;++J)ve+=ge[J]*this.intensity[H[J]];return{position:fe[1],index:H[fe[0]],cell:H,cellId:V,intensity:ve,dataCoordinate:this.positions[H[fe[0]]]}},I.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},h.exports=function(F,V){if(arguments.length===1&&(F=(V=F).gl),!(F.getExtension("OES_standard_derivatives")||F.getExtension("MOZ_OES_standard_derivatives")||F.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var H=function(Fe){var pe=a(Fe,y.vertex,y.fragment);return pe.attributes.position.location=0,pe.attributes.color.location=2,pe.attributes.uv.location=3,pe.attributes.normal.location=4,pe}(F),te=function(Fe){var pe=a(Fe,k.vertex,k.fragment);return pe.attributes.position.location=0,pe.attributes.color.location=2,pe.attributes.uv.location=3,pe}(F),$=U(F),J=R(F),X=j(F),K=Z(F),ee=l(F,c(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=F.LINEAR_MIPMAP_LINEAR,ee.magFilter=F.LINEAR;var ie=n(F),ae=n(F),oe=n(F),fe=n(F),ge=n(F),ve=r(F,[{buffer:ie,type:F.FLOAT,size:3},{buffer:ge,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ae,type:F.FLOAT,size:4},{buffer:oe,type:F.FLOAT,size:2},{buffer:fe,type:F.FLOAT,size:3}]),xe=n(F),_e=n(F),ye=n(F),Ce=n(F),ke=r(F,[{buffer:xe,type:F.FLOAT,size:3},{buffer:Ce,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_e,type:F.FLOAT,size:4},{buffer:ye,type:F.FLOAT,size:2}]),Te=n(F),le=n(F),ue=n(F),de=n(F),Le=n(F),we=r(F,[{buffer:Te,type:F.FLOAT,size:3},{buffer:Le,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:le,type:F.FLOAT,size:4},{buffer:ue,type:F.FLOAT,size:2},{buffer:de,type:F.FLOAT,size:1}]),Ee=n(F),Oe=new P(F,ee,H,te,$,J,X,K,ie,ge,ae,oe,fe,ve,xe,Ce,_e,ye,ke,Te,Le,le,ue,de,we,Ee,r(F,[{buffer:Ee,type:F.FLOAT,size:3}]));return Oe.update(V),Oe}},4554:function(h,s,t){h.exports=function(c){var b=c.gl;return new l(c,a(b,[0,0,0,1,1,0,1,1]),n(b,r.boxVert,r.lineFrag))};var a=t(5827),n=t(5158),r=t(2709);function l(c,b,g){this.plot=c,this.vbo=b,this.shader=g}var o,u,p=l.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawBox=(o=[0,0],u=[0,0],function(c,b,g,d,m){var x=this.plot,y=this.shader,k=x.gl;o[0]=c,o[1]=b,u[0]=g,u[1]=d,y.uniforms.lo=o,y.uniforms.hi=u,y.uniforms.color=m,k.drawArrays(k.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(h,s,t){h.exports=function(x){var y=x.gl;return new o(x,a(y),n(y,l.gridVert,l.gridFrag),n(y,l.tickVert,l.gridFrag))};var a=t(5827),n=t(5158),r=t(5070),l=t(2709);function o(x,y,k,f){this.plot=x,this.vbo=y,this.shader=k,this.tickShader=f,this.ticks=[[],[]]}function u(x,y){return x-y}var p,c,b,g,d,m=o.prototype;m.draw=(p=[0,0],c=[0,0],b=[0,0],function(){for(var x=this.plot,y=this.vbo,k=this.shader,f=this.ticks,S=x.gl,M=x._tickBounds,E=x.dataBox,O=x.viewBox,P=x.gridLineWidth,I=x.gridLineColor,z=x.gridLineEnable,U=x.pixelRatio,R=0;R<2;++R){var j=M[R],Z=M[R+2]-j,F=.5*(E[R+2]+E[R]),V=E[R+2]-E[R];c[R]=2*Z/V,p[R]=2*(j-F)/V}k.bind(),y.bind(),k.attributes.dataCoord.pointer(),k.uniforms.dataShift=p,k.uniforms.dataScale=c;var H=0;for(R=0;R<2;++R){b[0]=b[1]=0,b[R]=1,k.uniforms.dataAxis=b,k.uniforms.lineWidth=P[R]/(O[R+2]-O[R])*U,k.uniforms.color=I[R];var te=6*f[R].length;z[R]&&te&&S.drawArrays(S.TRIANGLES,H,te),H+=te}}),m.drawTickMarks=function(){var x=[0,0],y=[0,0],k=[1,0],f=[0,1],S=[0,0],M=[0,0];return function(){for(var E=this.plot,O=this.vbo,P=this.tickShader,I=this.ticks,z=E.gl,U=E._tickBounds,R=E.dataBox,j=E.viewBox,Z=E.pixelRatio,F=E.screenBox,V=F[2]-F[0],H=F[3]-F[1],te=j[2]-j[0],$=j[3]-j[1],J=0;J<2;++J){var X=U[J],K=U[J+2]-X,ee=.5*(R[J+2]+R[J]),ie=R[J+2]-R[J];y[J]=2*K/ie,x[J]=2*(X-ee)/ie}y[0]*=te/V,x[0]*=te/V,y[1]*=$/H,x[1]*=$/H,P.bind(),O.bind(),P.attributes.dataCoord.pointer();var ae=P.uniforms;ae.dataShift=x,ae.dataScale=y;var oe=E.tickMarkLength,fe=E.tickMarkWidth,ge=E.tickMarkColor,ve=6*I[0].length,xe=Math.min(r.ge(I[0],(R[0]-U[0])/(U[2]-U[0]),u),I[0].length),_e=Math.min(r.gt(I[0],(R[2]-U[0])/(U[2]-U[0]),u),I[0].length),ye=0+6*xe,Ce=6*Math.max(0,_e-xe),ke=Math.min(r.ge(I[1],(R[1]-U[1])/(U[3]-U[1]),u),I[1].length),Te=Math.min(r.gt(I[1],(R[3]-U[1])/(U[3]-U[1]),u),I[1].length),le=ve+6*ke,ue=6*Math.max(0,Te-ke);S[0]=2*(j[0]-oe[1])/V-1,S[1]=(j[3]+j[1])/H-1,M[0]=oe[1]*Z/V,M[1]=fe[1]*Z/H,ue&&(ae.color=ge[1],ae.tickScale=M,ae.dataAxis=f,ae.screenOffset=S,z.drawArrays(z.TRIANGLES,le,ue)),S[0]=(j[2]+j[0])/V-1,S[1]=2*(j[1]-oe[0])/H-1,M[0]=fe[0]*Z/V,M[1]=oe[0]*Z/H,Ce&&(ae.color=ge[0],ae.tickScale=M,ae.dataAxis=k,ae.screenOffset=S,z.drawArrays(z.TRIANGLES,ye,Ce)),S[0]=2*(j[2]+oe[3])/V-1,S[1]=(j[3]+j[1])/H-1,M[0]=oe[3]*Z/V,M[1]=fe[3]*Z/H,ue&&(ae.color=ge[3],ae.tickScale=M,ae.dataAxis=f,ae.screenOffset=S,z.drawArrays(z.TRIANGLES,le,ue)),S[0]=(j[2]+j[0])/V-1,S[1]=2*(j[3]+oe[2])/H-1,M[0]=fe[2]*Z/V,M[1]=oe[2]*Z/H,Ce&&(ae.color=ge[2],ae.tickScale=M,ae.dataAxis=k,ae.screenOffset=S,z.drawArrays(z.TRIANGLES,ye,Ce))}}(),m.update=(g=[1,1,-1,-1,1,-1],d=[1,-1,1,1,-1,-1],function(x){for(var y=x.ticks,k=x.bounds,f=new Float32Array(18*(y[0].length+y[1].length)),S=(this.plot.zeroLineEnable,0),M=[[],[]],E=0;E<2;++E)for(var O=M[E],P=y[E],I=k[E],z=k[E+2],U=0;U<P.length;++U){var R=(P[U].x-I)/(z-I);O.push(R);for(var j=0;j<6;++j)f[S++]=R,f[S++]=g[j],f[S++]=d[j]}this.ticks=M,this.vbo.update(f)}),m.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(h,s,t){h.exports=function(c){var b=c.gl;return new l(c,a(b,[-1,-1,-1,1,1,-1,1,1]),n(b,r.lineVert,r.lineFrag))};var a=t(5827),n=t(5158),r=t(2709);function l(c,b,g){this.plot=c,this.vbo=b,this.shader=g}var o,u,p=l.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawLine=(o=[0,0],u=[0,0],function(c,b,g,d,m,x){var y=this.plot,k=this.shader,f=y.gl;o[0]=c,o[1]=b,u[0]=g,u[1]=d,k.uniforms.start=o,k.uniforms.end=u,k.uniforms.width=m*y.pixelRatio,k.uniforms.color=x,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(h,s,t){var a=t(6832),n=a([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);h.exports={lineVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:n,textVert:a([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:n,gridVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:n,boxVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(h,s,t){h.exports=function(y){var k=y.gl;return new u(y,a(k),n(k,o.textVert,o.textFrag))};var a=t(5827),n=t(5158),r=t(6946),l=t(5070),o=t(2709);function u(y,k,f){this.plot=y,this.vbo=k,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var p,c,b,g,d,m,x=u.prototype;x.drawTicks=(p=[0,0],c=[0,0],b=[0,0],function(y){var k=this.plot,f=this.shader,S=this.tickX[y],M=this.tickOffset[y],E=k.gl,O=k.viewBox,P=k.dataBox,I=k.screenBox,z=k.pixelRatio,U=k.tickEnable,R=k.tickPad,j=k.tickColor,Z=k.tickAngle,F=k.labelEnable,V=k.labelPad,H=k.labelColor,te=k.labelAngle,$=this.labelOffset[y],J=this.labelCount[y],X=l.lt(S,P[y]),K=l.le(S,P[y+2]);p[0]=p[1]=0,p[y]=1,c[y]=(O[2+y]+O[y])/(I[2+y]-I[y])-1;var ee=2/I[2+(1^y)]-I[1^y];c[1^y]=ee*O[1^y]-1,U[y]&&(c[1^y]-=ee*z*R[y],X<K&&M[K]>M[X]&&(f.uniforms.dataAxis=p,f.uniforms.screenOffset=c,f.uniforms.color=j[y],f.uniforms.angle=Z[y],E.drawArrays(E.TRIANGLES,M[X],M[K]-M[X]))),F[y]&&J&&(c[1^y]-=ee*z*V[y],f.uniforms.dataAxis=b,f.uniforms.screenOffset=c,f.uniforms.color=H[y],f.uniforms.angle=te[y],E.drawArrays(E.TRIANGLES,$,J)),c[1^y]=ee*O[2+(1^y)]-1,U[y+2]&&(c[1^y]+=ee*z*R[y+2],X<K&&M[K]>M[X]&&(f.uniforms.dataAxis=p,f.uniforms.screenOffset=c,f.uniforms.color=j[y+2],f.uniforms.angle=Z[y+2],E.drawArrays(E.TRIANGLES,M[X],M[K]-M[X]))),F[y+2]&&J&&(c[1^y]+=ee*z*V[y+2],f.uniforms.dataAxis=b,f.uniforms.screenOffset=c,f.uniforms.color=H[y+2],f.uniforms.angle=te[y+2],E.drawArrays(E.TRIANGLES,$,J))}),x.drawTitle=function(){var y=[0,0],k=[0,0];return function(){var f=this.plot,S=this.shader,M=f.gl,E=f.screenBox,O=f.titleCenter,P=f.titleAngle,I=f.titleColor,z=f.pixelRatio;if(this.titleCount){for(var U=0;U<2;++U)k[U]=2*(O[U]*z-E[U])/(E[2+U]-E[U])-1;S.bind(),S.uniforms.dataAxis=y,S.uniforms.screenOffset=k,S.uniforms.angle=P,S.uniforms.color=I,M.drawArrays(M.TRIANGLES,this.titleOffset,this.titleCount)}}}(),x.bind=(g=[0,0],d=[0,0],m=[0,0],function(){var y=this.plot,k=this.shader,f=y._tickBounds,S=y.dataBox,M=y.screenBox,E=y.viewBox;k.bind();for(var O=0;O<2;++O){var P=f[O],I=f[O+2]-P,z=.5*(S[O+2]+S[O]),U=S[O+2]-S[O],R=E[O],j=E[O+2]-R,Z=M[O],F=M[O+2]-Z;d[O]=2*I/U*j/F,g[O]=2*(P-z)/U*j/F}m[1]=2*y.pixelRatio/(M[3]-M[1]),m[0]=m[1]*(M[3]-M[1])/(M[2]-M[0]),k.uniforms.dataScale=d,k.uniforms.dataShift=g,k.uniforms.textScale=m,this.vbo.bind(),k.attributes.textCoordinate.pointer()}),x.update=function(y){var k,f,S,M,E,O=[],P=y.ticks,I=y.bounds;for(E=0;E<2;++E){var z=[Math.floor(O.length/3)],U=[-1/0],R=P[E];for(k=0;k<R.length;++k){var j=R[k],Z=j.x,F=j.text,V=j.font||"sans-serif";M=j.fontSize||12;for(var H=1/(I[E+2]-I[E]),te=I[E],$=F.split(`
`),J=0;J<$.length;J++)for(S=r(V,$[J]).data,f=0;f<S.length;f+=2)O.push(S[f]*M,-S[f+1]*M-J*M*1.2,(Z-te)*H);z.push(Math.floor(O.length/3)),U.push(Z)}this.tickOffset[E]=z,this.tickX[E]=U}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(O.length/3),S=r(y.labelFont[E],y.labels[E],{textAlign:"center"}).data,M=y.labelSize[E],k=0;k<S.length;k+=2)O.push(S[k]*M,-S[k+1]*M,0);this.labelCount[E]=Math.floor(O.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(O.length/3),S=r(y.titleFont,y.title).data,M=y.titleSize,k=0;k<S.length;k+=2)O.push(S[k]*M,-S[k+1]*M,0);this.titleCount=Math.floor(O.length/3)-this.titleOffset,this.vbo.update(O)},x.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(h,s,t){h.exports=function(g){var d=g.gl,m=new u(d,a(d,[d.drawingBufferWidth,d.drawingBufferHeight]));return m.grid=n(m),m.text=r(m),m.line=l(m),m.box=o(m),m.update(g),m};var a=t(2611),n=t(3016),r=t(5613),l=t(1154),o=t(4554);function u(g,d){this.gl=g,this.pickBuffer=d,this.screenBox=[0,0,g.drawingBufferWidth,g.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var p=u.prototype;function c(g){for(var d=g.slice(),m=0;m<d.length;++m)d[m]=d[m].slice();return d}function b(g,d){return g.x-d.x}p.setDirty=function(){this.dirty=this.pickDirty=!0},p.setOverlayDirty=function(){this.dirty=!0},p.nextDepthValue=function(){return this._depthCounter++/65536},p.draw=function(){var g=this.gl,d=this.screenBox,m=this.viewBox,x=this.dataBox,y=this.pixelRatio,k=this.grid,f=this.line,S=this.text,M=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,g.bindFramebuffer(g.FRAMEBUFFER,null),g.enable(g.SCISSOR_TEST),g.disable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.depthMask(!1),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD,g.FUNC_ADD),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),this.borderColor){g.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);var E=this.borderColor;g.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT)}g.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),g.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var O=this.backgroundColor;g.clearColor(O[0]*O[3],O[1]*O[3],O[2]*O[3],O[3]),g.clear(g.COLOR_BUFFER_BIT),k.draw();var P=this.zeroLineEnable,I=this.zeroLineColor,z=this.zeroLineWidth;if(P[0]||P[1]){f.bind();for(var U=0;U<2;++U)if(P[U]&&x[U]<=0&&x[U+2]>=0){var R=d[U]-x[U]*(d[U+2]-d[U])/(x[U+2]-x[U]);U===0?f.drawLine(R,d[1],R,d[3],z[U],I[U]):f.drawLine(d[0],R,d[2],R,z[U],I[U])}}for(U=0;U<M.length;++U)M[U].draw();g.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]),g.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]),this.grid.drawTickMarks(),f.bind();var j=this.borderLineEnable,Z=this.borderLineWidth,F=this.borderLineColor;for(j[1]&&f.drawLine(m[0],m[1]-.5*Z[1]*y,m[0],m[3]+.5*Z[3]*y,Z[1],F[1]),j[0]&&f.drawLine(m[0]-.5*Z[0]*y,m[1],m[2]+.5*Z[2]*y,m[1],Z[0],F[0]),j[3]&&f.drawLine(m[2],m[1]-.5*Z[1]*y,m[2],m[3]+.5*Z[3]*y,Z[3],F[3]),j[2]&&f.drawLine(m[0]-.5*Z[0]*y,m[3],m[2]+.5*Z[2]*y,m[3],Z[2],F[2]),S.bind(),U=0;U<2;++U)S.drawTicks(U);this.titleEnable&&S.drawTitle();var V=this.overlays;for(U=0;U<V.length;++U)V[U].draw();g.disable(g.SCISSOR_TEST),g.disable(g.BLEND),g.depthMask(!0)}},p.drawPick=function(){if(!this.static){var g=this.pickBuffer;this.gl,this._pickTimeout=null,g.begin();for(var d=1,m=this.objects,x=0;x<m.length;++x)d=m[x].drawPick(d);g.end()}},p.pick=function(g,d){if(!this.static){var m=this.pixelRatio,x=this.pickPixelRatio,y=this.viewBox,k=0|Math.round((g-y[0]/m)*x),f=0|Math.round((d-y[1]/m)*x),S=this.pickBuffer.query(k,f,this.pickRadius);if(!S)return null;for(var M=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,O=0;O<E.length;++O){var P=E[O].pick(k,f,M);if(P)return P}return null}},p.setScreenBox=function(g){var d=this.screenBox,m=this.pixelRatio;d[0]=0|Math.round(g[0]*m),d[1]=0|Math.round(g[1]*m),d[2]=0|Math.round(g[2]*m),d[3]=0|Math.round(g[3]*m),this.setDirty()},p.setDataBox=function(g){var d=this.dataBox;(d[0]!==g[0]||d[1]!==g[1]||d[2]!==g[2]||d[3]!==g[3])&&(d[0]=g[0],d[1]=g[1],d[2]=g[2],d[3]=g[3],this.setDirty())},p.setViewBox=function(g){var d=this.pixelRatio,m=this.viewBox;m[0]=0|Math.round(g[0]*d),m[1]=0|Math.round(g[1]*d),m[2]=0|Math.round(g[2]*d),m[3]=0|Math.round(g[3]*d);var x=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((g[2]-g[0])*x),0|Math.round((g[3]-g[1])*x)],this.setDirty()},p.update=function(g){g=g||{};var d=this.gl;this.pixelRatio=g.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(g.screenBox||[0,0,d.drawingBufferWidth/m,d.drawingBufferHeight/m]),this.screenBox,this.setViewBox(g.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var x=this.viewBox,y=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(g.dataBox||[-10,-10/y,10,10/y]),this.borderColor=g.borderColor!==!1&&(g.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(g.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(g.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(g.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(g.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(g.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(g.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(g.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(g.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(g.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(g.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(g.titleCenter||[.5*(x[0]+x[2])/m,(x[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in g)||!!g.titleEnable,this.titleAngle=g.titleAngle||0,this.titleColor=(g.titleColor||[0,0,0,1]).slice(),this.labelPad=(g.labelPad||[15,15,15,15]).slice(),this.labelAngle=(g.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(g.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(g.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(g.tickPad||[15,15,15,15]).slice(),this.tickAngle=(g.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(g.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(g.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(g.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(g.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(g.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var k=g.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var S=0;S<2;++S){var M=k[S].slice(0);M.length!==0&&(M.sort(b),f[S]=Math.min(f[S],M[0].x),f[S+2]=Math.max(f[S+2],M[M.length-1].x))}this.grid.update({bounds:f,ticks:k}),this.text.update({bounds:f,ticks:k,labels:g.labels||["x","y"],labelSize:g.labelSize||[12,12],labelFont:g.labelFont||["sans-serif","sans-serif"],title:g.title||"",titleSize:g.titleSize||18,titleFont:g.titleFont||"sans-serif"}),this.static=!!g.static,this.setDirty()},p.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var g=this.objects.length-1;g>=0;--g)this.objects[g].dispose();for(this.objects.length=0,g=this.overlays.length-1;g>=0;--g)this.overlays[g].dispose();this.overlays.length=0,this.gl=null},p.addObject=function(g){this.objects.indexOf(g)<0&&(this.objects.push(g),this.setDirty())},p.removeObject=function(g){for(var d=this.objects,m=0;m<d.length;++m)if(d[m]===g){d.splice(m,1),this.setDirty();break}},p.addOverlay=function(g){this.overlays.indexOf(g)<0&&(this.overlays.push(g),this.setOverlayDirty())},p.removeOverlay=function(g){for(var d=this.overlays,m=0;m<d.length;++m)if(d[m]===g){d.splice(m,1),this.setOverlayDirty();break}}},4296:function(h,s,t){h.exports=function(p,c){p=p||document.body;var b=[.01,1/0];"distanceLimits"in(c=c||{})&&(b[0]=c.distanceLimits[0],b[1]=c.distanceLimits[1]),"zoomMin"in c&&(b[0]=c.zoomMin),"zoomMax"in c&&(b[1]=c.zoomMax);var g=n({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:b}),d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,x=p.clientWidth,y=p.clientHeight,k={keyBindingMode:"rotate",enableWheel:!0,view:g,element:p,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:g.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var f=a(),S=this.delay,M=f-2*S;g.idle(f-S),g.recalcMatrix(M),g.flush(f-(100+2*S));for(var E=!0,O=g.computedMatrix,P=0;P<16;++P)E=E&&d[P]===O[P],d[P]=O[P];var I=p.clientWidth===x&&p.clientHeight===y;return x=p.clientWidth,y=p.clientHeight,E?!I:(m=Math.exp(g.computedRadius[0]),!0)},lookAt:function(f,S,M){g.lookAt(g.lastT(),f,S,M)},rotate:function(f,S,M){g.rotate(g.lastT(),f,S,M)},pan:function(f,S,M){g.pan(g.lastT(),f,S,M)},translate:function(f,S,M){g.translate(g.lastT(),f,S,M)}};return Object.defineProperties(k,{matrix:{get:function(){return g.computedMatrix},set:function(f){return g.setMatrix(g.lastT(),f),g.computedMatrix},enumerable:!0},mode:{get:function(){return g.getMode()},set:function(f){var S=g.computedUp.slice(),M=g.computedEye.slice(),E=g.computedCenter.slice();if(g.setMode(f),f==="turntable"){var O=a();g._active.lookAt(O,M,E,S),g._active.lookAt(O+500,M,E,[0,0,1]),g._active.flush(O)}return g.getMode()},enumerable:!0},center:{get:function(){return g.computedCenter},set:function(f){return g.lookAt(g.lastT(),null,f),g.computedCenter},enumerable:!0},eye:{get:function(){return g.computedEye},set:function(f){return g.lookAt(g.lastT(),f),g.computedEye},enumerable:!0},up:{get:function(){return g.computedUp},set:function(f){return g.lookAt(g.lastT(),null,null,f),g.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(f){return g.setDistance(g.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return g.getDistanceLimits(b)},set:function(f){return g.setDistanceLimits(f),f},enumerable:!0}}),p.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),k._lastX=-1,k._lastY=-1,k._lastMods={shift:!1,control:!1,alt:!1,meta:!1},k.enableMouseListeners=function(){function f(S,M,E,O){var P=k.keyBindingMode;if(P!==!1){var I=P==="rotate",z=P==="pan",U=P==="zoom",R=!!O.control,j=!!O.alt,Z=!!O.shift,F=!!(1&S),V=!!(2&S),H=!!(4&S),te=1/p.clientHeight,$=te*(M-k._lastX),J=te*(E-k._lastY),X=k.flipX?1:-1,K=k.flipY?1:-1,ee=Math.PI*k.rotateSpeed,ie=a();if(k._lastX!==-1&&k._lastY!==-1&&((I&&F&&!R&&!j&&!Z||F&&!R&&!j&&Z)&&g.rotate(ie,X*ee*$,-K*ee*J,0),(z&&F&&!R&&!j&&!Z||V||F&&R&&!j&&!Z)&&g.pan(ie,-k.translateSpeed*$*m,k.translateSpeed*J*m,0),U&&F&&!R&&!j&&!Z||H||F&&!R&&j&&!Z)){var ae=-k.zoomSpeed*J/window.innerHeight*(ie-g.lastT())*100;g.pan(ie,0,0,m*(Math.exp(ae)-1))}return k._lastX=M,k._lastY=E,k._lastMods=O,!0}}k.mouseListener=r(p,f),p.addEventListener("touchstart",function(S){var M=o(S.changedTouches[0],p);f(0,M[0],M[1],k._lastMods),f(1,M[0],M[1],k._lastMods)},!!u&&{passive:!0}),p.addEventListener("touchmove",function(S){var M=o(S.changedTouches[0],p);f(1,M[0],M[1],k._lastMods),S.preventDefault()},!!u&&{passive:!1}),p.addEventListener("touchend",function(S){f(0,k._lastX,k._lastY,k._lastMods)},!!u&&{passive:!0}),k.wheelListener=l(p,function(S,M){if(k.keyBindingMode!==!1&&k.enableWheel){var E=k.flipX?1:-1,O=k.flipY?1:-1,P=a();if(Math.abs(S)>Math.abs(M))g.rotate(P,0,0,-S*E*Math.PI*k.rotateSpeed/window.innerWidth);else if(!k._ortho){var I=-k.zoomSpeed*O*M/window.innerHeight*(P-g.lastT())/20;g.pan(P,0,0,m*(Math.exp(I)-1))}}},!0)},k.enableMouseListeners(),k};var a=t(8161),n=t(1152),r=t(6145),l=t(6475),o=t(2565),u=t(5233)},8245:function(h,s,t){var a=t(6832),n=t(5158),r=a([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),l=a([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);h.exports=function(o){return n(o,r,l,null,[{name:"position",type:"vec2"}])}},1059:function(h,s,t){var a=t(4296),n=t(7453),r=t(2771),l=t(6496),o=t(2611),u=t(4234),p=t(8126),c=t(6145),b=t(1120),g=t(5268),d=t(8245),m=t(2321)({tablet:!0,featureDetect:!0});function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function y(f){var S=Math.round(Math.log(Math.abs(f))/Math.log(10));if(S<0){var M=Math.round(Math.pow(10,-S));return Math.ceil(f*M)/M}return S>0?(M=Math.round(Math.pow(10,S)),Math.ceil(f/M)*M):Math.ceil(f)}function k(f){return typeof f!="boolean"||f}h.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var S=f.canvas;S||(S=document.createElement("canvas"),f.container?f.container.appendChild(S):document.body.appendChild(S));var M=f.gl;if(M||(f.glOptions&&(m=!!f.glOptions.preserveDrawingBuffer),M=function(Ce,ke){var Te=null;try{(Te=Ce.getContext("webgl",ke))||(Te=Ce.getContext("experimental-webgl",ke))}catch{return null}return Te}(S,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:m})),!M)throw new Error("webgl not supported");var E=f.bounds||[[-10,-10,-10],[10,10,10]],O=new x,P=u(M,M.drawingBufferWidth,M.drawingBufferHeight,{preferFloat:!m}),I=d(M),z=f.cameraObject&&f.cameraObject._ortho===!0||f.camera.projection&&f.camera.projection.type==="orthographic"||!1,U={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:z},R=f.axes||{},j=n(M,R);j.enable=!R.disable;var Z=f.spikes||{},F=l(M,Z),V=[],H=[],te=[],$=[],J=!0,X=!0,K={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},ee=(X=!0,[M.drawingBufferWidth,M.drawingBufferHeight]),ie=f.cameraObject||a(S,U),ae={gl:M,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:S,selection:O,camera:ie,axes:j,axesPixels:null,spikes:F,bounds:E,objects:V,shape:ee,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:k(f.autoResize),autoBounds:k(f.autoBounds),autoScale:!!f.autoScale,autoCenter:k(f.autoCenter),clipToBounds:k(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:K,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ce){this.aspect[0]=Ce.x,this.aspect[1]=Ce.y,this.aspect[2]=Ce.z,X=!0},setBounds:function(Ce,ke){this.bounds[0][Ce]=ke.min,this.bounds[1][Ce]=ke.max},setClearColor:function(Ce){this.clearColor=Ce},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},oe=[M.drawingBufferWidth/ae.pixelRatio|0,M.drawingBufferHeight/ae.pixelRatio|0];function fe(){if(!ae._stopped&&ae.autoResize){var Ce=S.parentNode,ke=1,Te=1;Ce&&Ce!==document.body?(ke=Ce.clientWidth,Te=Ce.clientHeight):(ke=window.innerWidth,Te=window.innerHeight);var le=0|Math.ceil(ke*ae.pixelRatio),ue=0|Math.ceil(Te*ae.pixelRatio);if(le!==S.width||ue!==S.height){S.width=le,S.height=ue;var de=S.style;de.position=de.position||"absolute",de.left="0px",de.top="0px",de.width=ke+"px",de.height=Te+"px",J=!0}}}function ge(){for(var Ce=V.length,ke=$.length,Te=0;Te<ke;++Te)te[Te]=0;e:for(Te=0;Te<Ce;++Te){var le=V[Te],ue=le.pickSlots;if(ue){for(var de=0;de<ke;++de)if(te[de]+ue<255){H[Te]=de,le.setPickBase(te[de]+1),te[de]+=ue;continue e}var Le=o(M,ee);H[Te]=ke,$.push(Le),te.push(ue),le.setPickBase(1),ke+=1}else H[Te]=-1}for(;ke>0&&te[ke-1]===0;)te.pop(),$.pop().dispose()}function ve(){if(ae.contextLost)return!0;M.isContextLost()&&(ae.contextLost=!0,ae.mouseListener.enabled=!1,ae.selection.object=null,ae.oncontextloss&&ae.oncontextloss())}ae.autoResize&&fe(),window.addEventListener("resize",fe),ae.update=function(Ce){ae._stopped||(J=!0,X=!0)},ae.add=function(Ce){ae._stopped||(Ce.axes=j,V.push(Ce),H.push(-1),J=!0,X=!0,ge())},ae.remove=function(Ce){if(!ae._stopped){var ke=V.indexOf(Ce);ke<0||(V.splice(ke,1),H.pop(),J=!0,X=!0,ge())}},ae.dispose=function(){if(!ae._stopped&&(ae._stopped=!0,window.removeEventListener("resize",fe),S.removeEventListener("webglcontextlost",ve),ae.mouseListener.enabled=!1,!ae.contextLost)){j.dispose(),F.dispose();for(var Ce=0;Ce<V.length;++Ce)V[Ce].dispose();for(P.dispose(),Ce=0;Ce<$.length;++Ce)$[Ce].dispose();I.dispose(),M=null,j=null,F=null,V=[]}},ae._mouseRotating=!1,ae._prevButtons=0,ae.enableMouseListeners=function(){ae.mouseListener=c(S,function(Ce,ke,Te){if(!ae._stopped){var le=$.length,ue=V.length,de=O.object;O.distance=1/0,O.mouse[0]=ke,O.mouse[1]=Te,O.object=null,O.screen=null,O.dataCoordinate=O.dataPosition=null;var Le=!1;if(Ce&&ae._prevButtons)ae._mouseRotating=!0;else{ae._mouseRotating&&(X=!0),ae._mouseRotating=!1;for(var we=0;we<le;++we){var Ee=$[we].query(ke,oe[1]-Te-1,ae.pickRadius);if(Ee){if(Ee.distance>O.distance)continue;for(var Oe=0;Oe<ue;++Oe){var Fe=V[Oe];if(H[Oe]===we){var pe=Fe.pick(Ee);pe&&(O.buttons=Ce,O.screen=Ee.coord,O.distance=Ee.distance,O.object=Fe,O.index=pe.distance,O.dataPosition=pe.position,O.dataCoordinate=pe.dataCoordinate,O.data=pe,Le=!0)}}}}}de&&de!==O.object&&(de.highlight&&de.highlight(null),J=!0),O.object&&(O.object.highlight&&O.object.highlight(O.data),J=!0),(Le=Le||O.object!==de)&&ae.onselect&&ae.onselect(O),1&Ce&&!(1&ae._prevButtons)&&ae.onclick&&ae.onclick(O),ae._prevButtons=Ce}})},S.addEventListener("webglcontextlost",ve);var xe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=[xe[0].slice(),xe[1].slice()];function ye(){if(!ve()){fe();var Ce=ae.camera.tick();K.view=ae.camera.matrix,J=J||Ce,X=X||Ce,j.pixelRatio=ae.pixelRatio,F.pixelRatio=ae.pixelRatio;var ke=V.length,Te=xe[0],le=xe[1];Te[0]=Te[1]=Te[2]=1/0,le[0]=le[1]=le[2]=-1/0;for(var ue=0;ue<ke;++ue){(Be=V[ue]).pixelRatio=ae.pixelRatio,Be.axes=ae.axes,J=J||!!Be.dirty,X=X||!!Be.dirty;var de=Be.bounds;if(de)for(var Le=de[0],we=de[1],Ee=0;Ee<3;++Ee)Te[Ee]=Math.min(Te[Ee],Le[Ee]),le[Ee]=Math.max(le[Ee],we[Ee])}var Oe=ae.bounds;if(ae.autoBounds)for(Ee=0;Ee<3;++Ee){if(le[Ee]<Te[Ee])Te[Ee]=-1,le[Ee]=1;else{Te[Ee]===le[Ee]&&(Te[Ee]-=1,le[Ee]+=1);var Fe=.05*(le[Ee]-Te[Ee]);Te[Ee]=Te[Ee]-Fe,le[Ee]=le[Ee]+Fe}Oe[0][Ee]=Te[Ee],Oe[1][Ee]=le[Ee]}var pe=!1;for(Ee=0;Ee<3;++Ee)pe=pe||_e[0][Ee]!==Oe[0][Ee]||_e[1][Ee]!==Oe[1][Ee],_e[0][Ee]=Oe[0][Ee],_e[1][Ee]=Oe[1][Ee];if(X=X||pe,J=J||pe){if(pe){var be=[0,0,0];for(ue=0;ue<3;++ue)be[ue]=y((Oe[1][ue]-Oe[0][ue])/10);j.autoTicks?j.update({bounds:Oe,tickSpacing:be}):j.update({bounds:Oe})}var Me=M.drawingBufferWidth,De=M.drawingBufferHeight;for(ee[0]=Me,ee[1]=De,oe[0]=0|Math.max(Me/ae.pixelRatio,1),oe[1]=0|Math.max(De/ae.pixelRatio,1),function(Ye,We){var et=Ye.bounds,ft=Ye.cameraParams,ht=ft.projection,mt=ft.model,Mt=Ye.gl.drawingBufferWidth,_t=Ye.gl.drawingBufferHeight,it=Ye.zNear,st=Ye.zFar,St=Ye.fovy,zt=Mt/_t;We?(g(ht,-zt,zt,-1,1,it,st),ft._ortho=!0):(b(ht,St,zt,it,st),ft._ortho=!1);for(var Ft=0;Ft<16;++Ft)mt[Ft]=0;mt[15]=1;var Pt=0;for(Ft=0;Ft<3;++Ft)Pt=Math.max(Pt,et[1][Ft]-et[0][Ft]);for(Ft=0;Ft<3;++Ft)Ye.autoScale?mt[5*Ft]=Ye.aspect[Ft]/(et[1][Ft]-et[0][Ft]):mt[5*Ft]=1/Pt,Ye.autoCenter&&(mt[12+Ft]=.5*-mt[5*Ft]*(et[0][Ft]+et[1][Ft]))}(ae,z),ue=0;ue<ke;++ue)(Be=V[ue]).axesBounds=Oe,ae.clipToBounds&&(Be.clipBounds=Oe);O.object&&(ae.snapToData?F.position=O.dataCoordinate:F.position=O.dataPosition,F.bounds=Oe),X&&(X=!1,function(){if(!ve()){M.colorMask(!0,!0,!0,!0),M.depthMask(!0),M.disable(M.BLEND),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL);for(var Ye=V.length,We=$.length,et=0;et<We;++et){var ft=$[et];ft.shape=oe,ft.begin();for(var ht=0;ht<Ye;++ht)if(H[ht]===et){var mt=V[ht];mt.drawPick&&(mt.pixelRatio=1,mt.drawPick(K))}ft.end()}}}()),ae.axesPixels=r(ae.axes,K,Me,De),ae.onrender&&ae.onrender(),M.bindFramebuffer(M.FRAMEBUFFER,null),M.viewport(0,0,Me,De),ae.clearRGBA(),M.depthMask(!0),M.colorMask(!0,!0,!0,!0),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.disable(M.BLEND),M.disable(M.CULL_FACE);var Ne=!1;for(j.enable&&(Ne=Ne||j.isTransparent(),j.draw(K)),F.axes=j,O.object&&F.draw(K),M.disable(M.CULL_FACE),ue=0;ue<ke;++ue)(Be=V[ue]).axes=j,Be.pixelRatio=ae.pixelRatio,Be.isOpaque&&Be.isOpaque()&&Be.draw(K),Be.isTransparent&&Be.isTransparent()&&(Ne=!0);if(Ne){for(P.shape=ee,P.bind(),M.clear(M.DEPTH_BUFFER_BIT),M.colorMask(!1,!1,!1,!1),M.depthMask(!0),M.depthFunc(M.LESS),j.enable&&j.isTransparent()&&j.drawTransparent(K),ue=0;ue<ke;++ue)(Be=V[ue]).isOpaque&&Be.isOpaque()&&Be.draw(K);for(M.enable(M.BLEND),M.blendEquation(M.FUNC_ADD),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.colorMask(!0,!0,!0,!0),M.depthMask(!1),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),j.isTransparent()&&j.drawTransparent(K),ue=0;ue<ke;++ue){var Be;(Be=V[ue]).isTransparent&&Be.isTransparent()&&Be.drawTransparent(K)}M.bindFramebuffer(M.FRAMEBUFFER,null),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST),I.bind(),P.color[0].bind(0),I.uniforms.accumBuffer=0,p(M),M.disable(M.BLEND)}for(J=!1,ue=0;ue<ke;++ue)V[ue].dirty=!1}}}return ae.enableMouseListeners(),function Ce(){ae._stopped||ae.contextLost||(ye(),requestAnimationFrame(Ce))}(),ae.redraw=function(){ae._stopped||(J=!0,ye())},ae},createCamera:a}},8023:function(h,s,t){var a=t(6832);s.pointVertex=a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=a([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=a([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(h,s,t){var a=t(5158),n=t(5827),r=t(5306),l=t(8023);function o(b,g,d,m,x){this.plot=b,this.offsetBuffer=g,this.pickBuffer=d,this.shader=m,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}h.exports=function(b,g){var d=b.gl,m=new o(b,n(d),n(d),a(d,l.pointVertex,l.pointFragment),a(d,l.pickVertex,l.pickFragment));return m.update(g),b.addObject(m),m};var u,p,c=o.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(b){var g;function d(M,E){return M in b?b[M]:E}b=b||{},this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var m=b.positions.length>>>1,x=b.positions instanceof Float32Array,y=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=m,k=b.positions,f=x?k:r.mallocFloat32(k.length),S=y?b.idToIndex:r.mallocInt32(m);if(x||f.set(k),!y)for(f.set(k),g=0;g<m;g++)S[g]=g;this.points=k,this.offsetBuffer.update(f),this.pickBuffer.update(S),x||r.free(f),y||r.free(S),this.pointCount=m,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(b){var g=b!==void 0,d=g?this.pickShader:this.shader,m=this.plot.gl,x=this.plot.dataBox;if(this.pointCount===0)return b;var y=x[2]-x[0],k=x[3]-x[1],f=function(O,P){var I,z=0,U=O.length>>>1;for(I=0;I<U;I++){var R=O[2*I],j=O[2*I+1];R>=P[0]&&R<=P[2]&&j>=P[1]&&j<=P[3]&&z++}return z}(this.points,x),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));u[0]=2/y,u[4]=2/k,u[6]=-2*x[0]/y-1,u[7]=-2*x[1]/k-1,this.offsetBuffer.bind(),d.bind(),d.attributes.position.pointer(),d.uniforms.matrix=u,d.uniforms.color=this.color,d.uniforms.borderColor=this.borderColor,d.uniforms.pointCloud=S<5,d.uniforms.pointSize=S,d.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),g&&(p[0]=255&b,p[1]=b>>8&255,p[2]=b>>16&255,p[3]=b>>24&255,this.pickBuffer.bind(),d.attributes.pickId.pointer(m.UNSIGNED_BYTE),d.uniforms.pickOffset=p,this.pickOffset=b);var M=m.getParameter(m.BLEND),E=m.getParameter(m.DITHER);return M&&!this.blend&&m.disable(m.BLEND),E&&m.disable(m.DITHER),m.drawArrays(m.POINTS,0,this.pointCount),M&&!this.blend&&m.enable(m.BLEND),E&&m.enable(m.DITHER),b+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(b,g,d){var m=this.pickOffset,x=this.pointCount;if(d<m||d>=m+x)return null;var y=d-m,k=this.points;return{object:this,pointId:y,dataCoord:[k[2*y],k[2*y+1]]}}},6093:function(h){h.exports=function(s,t,a,n){var r,l,o,u,p,c=t[0],b=t[1],g=t[2],d=t[3],m=a[0],x=a[1],y=a[2],k=a[3];return(l=c*m+b*x+g*y+d*k)<0&&(l=-l,m=-m,x=-x,y=-y,k=-k),1-l>1e-6?(r=Math.acos(l),o=Math.sin(r),u=Math.sin((1-n)*r)/o,p=Math.sin(n*r)/o):(u=1-n,p=n),s[0]=u*c+p*m,s[1]=u*b+p*x,s[2]=u*g+p*y,s[3]=u*d+p*k,s}},8240:function(h){h.exports=function(s){return s||s===0?s.toString():""}},4123:function(h,s,t){var a=t(875);h.exports=function(r,l,o){var u=n[l];if(u||(u=n[l]={}),r in u)return u[r];var p={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},c=a(r,p);p.triangles=!1;var b,g,d=a(r,p);if(o&&o!==1){for(b=0;b<c.positions.length;++b)for(g=0;g<c.positions[b].length;++g)c.positions[b][g]/=o;for(b=0;b<d.positions.length;++b)for(g=0;g<d.positions[b].length;++g)d.positions[b][g]/=o}var m=[[1/0,1/0],[-1/0,-1/0]],x=d.positions.length;for(b=0;b<x;++b){var y=d.positions[b];for(g=0;g<2;++g)m[0][g]=Math.min(m[0][g],y[g]),m[1][g]=Math.max(m[1][g],y[g])}return u[r]=[c,d,m]};var n={}},9282:function(h,s,t){var a=t(5158),n=t(6832),r=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),o=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),p=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],b={vertex:r,fragment:u,attributes:c},g={vertex:l,fragment:u,attributes:c},d={vertex:o,fragment:u,attributes:c},m={vertex:r,fragment:p,attributes:c},x={vertex:l,fragment:p,attributes:c},y={vertex:o,fragment:p,attributes:c};function k(f,S){var M=a(f,S),E=M.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,M}s.createPerspective=function(f){return k(f,b)},s.createOrtho=function(f){return k(f,g)},s.createProject=function(f){return k(f,d)},s.createPickPerspective=function(f){return k(f,m)},s.createPickOrtho=function(f){return k(f,x)},s.createPickProject=function(f){return k(f,y)}},2182:function(h,s,t){var a=t(3596),n=t(5827),r=t(2944),l=t(5306),o=t(104),u=t(9282),p=t(4123),c=t(8240),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(H,te){var $=H[0],J=H[1],X=H[2],K=H[3];return H[0]=te[0]*$+te[4]*J+te[8]*X+te[12]*K,H[1]=te[1]*$+te[5]*J+te[9]*X+te[13]*K,H[2]=te[2]*$+te[6]*J+te[10]*X+te[14]*K,H[3]=te[3]*$+te[7]*J+te[11]*X+te[15]*K,H}function d(H,te,$,J){return g(J,J),g(J,J),g(J,J)}function m(H,te){this.index=H,this.dataCoordinate=this.position=te}function x(H){return H===!0||H>1?1:H}function y(H,te,$,J,X,K,ee,ie,ae,oe,fe,ge){this.gl=H,this.pixelRatio=1,this.shader=te,this.orthoShader=$,this.projectShader=J,this.pointBuffer=X,this.colorBuffer=K,this.glyphBuffer=ee,this.idBuffer=ie,this.vao=ae,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=oe,this.pickOrthoShader=fe,this.pickProjectShader=ge,this.points=[],this._selectResult=new m(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}h.exports=function(H){var te=H.gl,$=u.createPerspective(te),J=u.createOrtho(te),X=u.createProject(te),K=u.createPickPerspective(te),ee=u.createPickOrtho(te),ie=u.createPickProject(te),ae=n(te),oe=n(te),fe=n(te),ge=n(te),ve=new y(te,$,J,X,ae,oe,fe,ge,r(te,[{buffer:ae,size:3,type:te.FLOAT},{buffer:oe,size:4,type:te.FLOAT},{buffer:fe,size:2,type:te.FLOAT},{buffer:ge,size:4,type:te.UNSIGNED_BYTE,normalized:!0}]),K,ee,ie);return ve.update(H),ve};var k=y.prototype;k.pickSlots=1,k.setPickBase=function(H){this.pickId=H},k.isTransparent=function(){if(this.hasAlpha)return!0;for(var H=0;H<3;++H)if(this.axesProject[H]&&this.projectHasAlpha)return!0;return!1},k.isOpaque=function(){if(!this.hasAlpha)return!0;for(var H=0;H<3;++H)if(this.axesProject[H]&&!this.projectHasAlpha)return!0;return!1};var f=[0,0],S=[0,0,0],M=[0,0,0],E=[0,0,0,1],O=[0,0,0,1],P=b.slice(),I=[0,0,0],z=[[0,0,0],[0,0,0]];function U(H){return H[0]=H[1]=H[2]=0,H}function R(H,te){return H[0]=te[0],H[1]=te[1],H[2]=te[2],H[3]=1,H}function j(H,te,$,J){return H[0]=te[0],H[1]=te[1],H[2]=te[2],H[$]=J,H}var Z=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function F(H,te,$,J,X,K,ee){var ie=$.gl;if((K===$.projectHasAlpha||ee)&&function(oe,fe,ge,ve){var xe,_e=fe.axesProject,ye=fe.gl,Ce=oe.uniforms,ke=ge.model||b,Te=ge.view||b,le=ge.projection||b,ue=fe.axesBounds,de=function(et){for(var ft=z,ht=0;ht<2;++ht)for(var mt=0;mt<3;++mt)ft[ht][mt]=Math.max(Math.min(et[ht][mt],1e8),-1e8);return ft}(fe.clipBounds);xe=fe.axes&&fe.axes.lastCubeProps?fe.axes.lastCubeProps.axis:[1,1,1],f[0]=2/ye.drawingBufferWidth,f[1]=2/ye.drawingBufferHeight,oe.bind(),Ce.view=Te,Ce.projection=le,Ce.screenSize=f,Ce.highlightId=fe.highlightId,Ce.highlightScale=fe.highlightScale,Ce.clipBounds=de,Ce.pickGroup=fe.pickId/255,Ce.pixelRatio=ve;for(var Le=0;Le<3;++Le)if(_e[Le]){Ce.scale=fe.projectScale[Le],Ce.opacity=fe.projectOpacity[Le];for(var we=P,Ee=0;Ee<16;++Ee)we[Ee]=0;for(Ee=0;Ee<4;++Ee)we[5*Ee]=1;we[5*Le]=0,xe[Le]<0?we[12+Le]=ue[0][Le]:we[12+Le]=ue[1][Le],o(we,ke,we),Ce.model=we;var Oe=(Le+1)%3,Fe=(Le+2)%3,pe=U(S),be=U(M);pe[Oe]=1,be[Fe]=1;var Me=d(0,0,0,R(E,pe)),De=d(0,0,0,R(O,be));if(Math.abs(Me[1])>Math.abs(De[1])){var Ne=Me;Me=De,De=Ne,Ne=pe,pe=be,be=Ne;var Be=Oe;Oe=Fe,Fe=Be}Me[0]<0&&(pe[Oe]=-1),De[1]>0&&(be[Fe]=-1);var Ye=0,We=0;for(Ee=0;Ee<4;++Ee)Ye+=Math.pow(ke[4*Oe+Ee],2),We+=Math.pow(ke[4*Fe+Ee],2);pe[Oe]/=Math.sqrt(Ye),be[Fe]/=Math.sqrt(We),Ce.axes[0]=pe,Ce.axes[1]=be,Ce.fragClipBounds[0]=j(I,de[0],Le,-1e8),Ce.fragClipBounds[1]=j(I,de[1],Le,1e8),fe.vao.bind(),fe.vao.draw(ye.TRIANGLES,fe.vertexCount),fe.lineWidth>0&&(ye.lineWidth(fe.lineWidth*ve),fe.vao.draw(ye.LINES,fe.lineVertexCount,fe.vertexCount)),fe.vao.unbind()}}(te,$,J,X),K===$.hasAlpha||ee){H.bind();var ae=H.uniforms;ae.model=J.model||b,ae.view=J.view||b,ae.projection=J.projection||b,f[0]=2/ie.drawingBufferWidth,f[1]=2/ie.drawingBufferHeight,ae.screenSize=f,ae.highlightId=$.highlightId,ae.highlightScale=$.highlightScale,ae.fragClipBounds=Z,ae.clipBounds=$.axes.bounds,ae.opacity=$.opacity,ae.pickGroup=$.pickId/255,ae.pixelRatio=X,$.vao.bind(),$.vao.draw(ie.TRIANGLES,$.vertexCount),$.lineWidth>0&&(ie.lineWidth($.lineWidth*X),$.vao.draw(ie.LINES,$.lineVertexCount,$.vertexCount)),$.vao.unbind()}}function V(H,te,$,J){var X;X=Array.isArray(H)?te<H.length?H[te]:void 0:H,X=c(X);var K=!0;a(X)&&(X="",K=!1);var ee=p(X,$,J);return{mesh:ee[0],lines:ee[1],bounds:ee[2],visible:K}}k.draw=function(H){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!1,!1)},k.drawTransparent=function(H){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!0,!1)},k.drawPick=function(H){F(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,H,1,!0,!0)},k.pick=function(H){if(!H||H.id!==this.pickId)return null;var te=H.value[2]+(H.value[1]<<8)+(H.value[0]<<16);if(te>=this.pointCount||te<0)return null;var $=this.points[te],J=this._selectResult;J.index=te;for(var X=0;X<3;++X)J.position[X]=J.dataCoordinate[X]=$[X];return J},k.highlight=function(H){if(H){var te=H.index,$=255&te,J=te>>8&255,X=te>>16&255;this.highlightId=[$/255,J/255,X/255,0]}else this.highlightId=[1,1,1,1]},k.update=function(H){if("perspective"in(H=H||{})&&(this.useOrtho=!H.perspective),"orthographic"in H&&(this.useOrtho=!!H.orthographic),"lineWidth"in H&&(this.lineWidth=H.lineWidth),"project"in H)if(Array.isArray(H.project))this.axesProject=H.project;else{var te=!!H.project;this.axesProject=[te,te,te]}if("projectScale"in H)if(Array.isArray(H.projectScale))this.projectScale=H.projectScale.slice();else{var $=+H.projectScale;this.projectScale=[$,$,$]}if(this.projectHasAlpha=!1,"projectOpacity"in H){Array.isArray(H.projectOpacity)?this.projectOpacity=H.projectOpacity.slice():($=+H.projectOpacity,this.projectOpacity=[$,$,$]);for(var J=0;J<3;++J)this.projectOpacity[J]=x(this.projectOpacity[J]),this.projectOpacity[J]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in H&&(this.opacity=x(H.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var X,K,ee=H.position,ie=H.font||"normal",ae=H.alignment||[0,0];if(ae.length===2)X=ae[0],K=ae[1];else for(X=[],K=[],J=0;J<ae.length;++J)X[J]=ae[J][0],K[J]=ae[J][1];var oe=[1/0,1/0,1/0],fe=[-1/0,-1/0,-1/0],ge=H.glyph,ve=H.color,xe=H.size,_e=H.angle,ye=H.lineColor,Ce=-1,ke=0,Te=0,le=0;if(ee.length){le=ee.length;e:for(J=0;J<le;++J){for(var ue=ee[J],de=0;de<3;++de)if(isNaN(ue[de])||!isFinite(ue[de]))continue e;var Le=(ft=V(ge,J,ie,this.pixelRatio)).mesh,we=ft.lines,Ee=ft.bounds;ke+=3*Le.cells.length,Te+=2*we.edges.length}}var Oe=ke+Te,Fe=l.mallocFloat(3*Oe),pe=l.mallocFloat(4*Oe),be=l.mallocFloat(2*Oe),Me=l.mallocUint32(Oe);if(Oe>0){var De=0,Ne=ke,Be=[0,0,0,1],Ye=[0,0,0,1],We=Array.isArray(ve)&&Array.isArray(ve[0]),et=Array.isArray(ye)&&Array.isArray(ye[0]);e:for(J=0;J<le;++J){for(Ce+=1,ue=ee[J],de=0;de<3;++de){if(isNaN(ue[de])||!isFinite(ue[de]))continue e;fe[de]=Math.max(fe[de],ue[de]),oe[de]=Math.min(oe[de],ue[de])}Le=(ft=V(ge,J,ie,this.pixelRatio)).mesh,we=ft.lines,Ee=ft.bounds;var ft,ht=ft.visible;if(ht)if(Array.isArray(ve)){if((mt=We?J<ve.length?ve[J]:[0,0,0,0]:ve).length===3){for(de=0;de<3;++de)Be[de]=mt[de];Be[3]=1}else if(mt.length===4){for(de=0;de<4;++de)Be[de]=mt[de];!this.hasAlpha&&mt[3]<1&&(this.hasAlpha=!0)}}else Be[0]=Be[1]=Be[2]=0,Be[3]=1;else Be=[1,1,1,0];if(ht)if(Array.isArray(ye)){var mt;if((mt=et?J<ye.length?ye[J]:[0,0,0,0]:ye).length===3){for(de=0;de<3;++de)Ye[de]=mt[de];Ye[de]=1}else if(mt.length===4){for(de=0;de<4;++de)Ye[de]=mt[de];!this.hasAlpha&&mt[3]<1&&(this.hasAlpha=!0)}}else Ye[0]=Ye[1]=Ye[2]=0,Ye[3]=1;else Ye=[1,1,1,0];var Mt=.5;ht?Array.isArray(xe)?Mt=J<xe.length?+xe[J]:12:xe?Mt=+xe:this.useOrtho&&(Mt=12):Mt=0;var _t=0;Array.isArray(_e)?_t=J<_e.length?+_e[J]:0:_e&&(_t=+_e);var it=Math.cos(_t),st=Math.sin(_t);for(ue=ee[J],de=0;de<3;++de)fe[de]=Math.max(fe[de],ue[de]),oe[de]=Math.min(oe[de],ue[de]);var St=X,zt=K;St=0,Array.isArray(X)?St=J<X.length?X[J]:0:X&&(St=X),zt=0,Array.isArray(K)?zt=J<K.length?K[J]:0:K&&(zt=K);var Ft=[St*=St>0?1-Ee[0][0]:St<0?1+Ee[1][0]:1,zt*=zt>0?1-Ee[0][1]:zt<0?1+Ee[1][1]:1],Pt=Le.cells||[],Xe=Le.positions||[];for(de=0;de<Pt.length;++de)for(var Ke=Pt[de],He=0;He<3;++He){for(var Je=0;Je<3;++Je)Fe[3*De+Je]=ue[Je];for(Je=0;Je<4;++Je)pe[4*De+Je]=Be[Je];Me[De]=Ce;var lt=Xe[Ke[He]];be[2*De]=Mt*(it*lt[0]-st*lt[1]+Ft[0]),be[2*De+1]=Mt*(st*lt[0]+it*lt[1]+Ft[1]),De+=1}for(Pt=we.edges,Xe=we.positions,de=0;de<Pt.length;++de)for(Ke=Pt[de],He=0;He<2;++He){for(Je=0;Je<3;++Je)Fe[3*Ne+Je]=ue[Je];for(Je=0;Je<4;++Je)pe[4*Ne+Je]=Ye[Je];Me[Ne]=Ce,lt=Xe[Ke[He]],be[2*Ne]=Mt*(it*lt[0]-st*lt[1]+Ft[0]),be[2*Ne+1]=Mt*(st*lt[0]+it*lt[1]+Ft[1]),Ne+=1}}}this.bounds=[oe,fe],this.points=ee,this.pointCount=ee.length,this.vertexCount=ke,this.lineVertexCount=Te,this.pointBuffer.update(Fe),this.colorBuffer.update(pe),this.glyphBuffer.update(be),this.idBuffer.update(Me),l.free(Fe),l.free(pe),l.free(be),l.free(Me)},k.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(h,s,t){var a=t(6832);s.boxVertex=a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=a([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(h,s,t){var a=t(5158),n=t(5827),r=t(1884);function l(u,p,c){this.plot=u,this.boxBuffer=p,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}h.exports=function(u,p){var c=u.gl,b=new l(u,n(c,[0,0,0,1,1,0,1,1]),a(c,r.boxVertex,r.boxFragment));return b.update(p),u.addOverlay(b),b};var o=l.prototype;o.draw=function(){if(this.enabled){var u=this.plot,p=this.selectBox,c=this.borderWidth,b=(this.innerFill,this.innerColor),g=(this.outerFill,this.outerColor),d=this.borderColor,m=u.box,x=u.screenBox,y=u.dataBox,k=u.viewBox,f=u.pixelRatio,S=(p[0]-y[0])*(k[2]-k[0])/(y[2]-y[0])+k[0],M=(p[1]-y[1])*(k[3]-k[1])/(y[3]-y[1])+k[1],E=(p[2]-y[0])*(k[2]-k[0])/(y[2]-y[0])+k[0],O=(p[3]-y[1])*(k[3]-k[1])/(y[3]-y[1])+k[1];if(S=Math.max(S,k[0]),M=Math.max(M,k[1]),E=Math.min(E,k[2]),O=Math.min(O,k[3]),!(E<S||O<M)){m.bind();var P=x[2]-x[0],I=x[3]-x[1];if(this.outerFill&&(m.drawBox(0,0,P,M,g),m.drawBox(0,M,S,O,g),m.drawBox(0,O,P,I,g),m.drawBox(E,M,P,O,g)),this.innerFill&&m.drawBox(S,M,E,O,b),c>0){var z=c*f;m.drawBox(S-z,M-z,E+z,M+z,d),m.drawBox(S-z,O-z,E+z,O+z,d),m.drawBox(S-z,M-z,S+z,O+z,d),m.drawBox(E-z,M-z,E+z,O+z,d)}}}},o.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},o.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(h,s,t){h.exports=function(c,b){var g=b[0],d=b[1];return new u(c,a(c,g,d,{}),n.mallocUint8(g*d*4))};var a=t(4234),n=t(5306),r=t(5050),l=t(2288).nextPow2;function o(c,b,g,d,m){this.coord=[c,b],this.id=g,this.value=d,this.distance=m}function u(c,b,g){this.gl=c,this.fbo=b,this.buffer=g,this._readTimeout=null;var d=this;this._readCallback=function(){d.gl&&(b.bind(),c.readPixels(0,0,b.shape[0],b.shape[1],c.RGBA,c.UNSIGNED_BYTE,d.buffer),d._readTimeout=null)}}var p=u.prototype;Object.defineProperty(p,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var b=this.fbo.shape[0],g=this.fbo.shape[1];if(g*b*4>this.buffer.length){n.free(this.buffer);for(var d=this.buffer=n.mallocUint8(l(g*b*4)),m=0;m<g*b*4;++m)d[m]=255}return c}}}),p.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},p.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},p.query=function(c,b,g){if(!this.gl)return null;var d=this.fbo.shape.slice();c|=0,b|=0,typeof g!="number"&&(g=1);var m=0|Math.min(Math.max(c-g,0),d[0]),x=0|Math.min(Math.max(c+g,0),d[0]),y=0|Math.min(Math.max(b-g,0),d[1]),k=0|Math.min(Math.max(b+g,0),d[1]);if(x<=m||k<=y)return null;var f=[x-m,k-y],S=r(this.buffer,[f[0],f[1],4],[4,4*d[0],1],4*(m+d[0]*y)),M=function(P,I,z){for(var U=1e8,R=-1,j=-1,Z=P.shape[0],F=P.shape[1],V=0;V<Z;V++)for(var H=0;H<F;H++){var te=P.get(V,H,0),$=P.get(V,H,1),J=P.get(V,H,2),X=P.get(V,H,3);if(te<255||$<255||J<255||X<255){var K=I-V,ee=z-H,ie=K*K+ee*ee;ie<U&&(U=ie,R=V,j=H)}}return[R,j,U]}(S.hi(f[0],f[1],1),g,g),E=M[0],O=M[1];return E<0||Math.pow(this.radius,2)<M[2]?null:new o(E+m|0,O+y|0,S.get(E,O,0),[S.get(E,O,1),S.get(E,O,2),S.get(E,O,3)],Math.sqrt(M[2]))},p.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(h,s,t){var a=t(9016),n=t(4280),r=t(3984),l=t(1628),o=t(2631),u=t(9068);function p(g){this.gl=g,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=p.prototype;function b(g,d){return g.name<d.name?-1:1}c.bind=function(){var g;this.program||this._relink();var d=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(d>m)for(g=m;g<d;g++)this.gl.enableVertexAttribArray(g);else if(m>d)for(g=d;g<m;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=d,this.gl.useProgram(this.program)},c.dispose=function(){for(var g=this.gl.lastAttribCount,d=0;d<g;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(g,d,m,x){if(!d||arguments.length===1){var y=g;g=y.vertex,d=y.fragment,m=y.uniforms,x=y.attributes}var k=this,f=k.gl,S=k._vref;k._vref=l.shader(f,f.VERTEX_SHADER,g),S&&S.dispose(),k.vertShader=k._vref.shader;var M=this._fref;if(k._fref=l.shader(f,f.FRAGMENT_SHADER,d),M&&M.dispose(),k.fragShader=k._fref.shader,!m||!x){var E=f.createProgram();if(f.attachShader(E,k.fragShader),f.attachShader(E,k.vertShader),f.linkProgram(E),!f.getProgramParameter(E,f.LINK_STATUS)){var O=f.getProgramInfoLog(E);throw new u(O,"Error linking program:"+O)}m=m||o.uniforms(f,E),x=x||o.attributes(f,E),f.deleteProgram(E)}(x=x.slice()).sort(b);var P,I=[],z=[],U=[];for(P=0;P<x.length;++P){var R=x[P];if(R.type.indexOf("mat")>=0){for(var j=0|R.type.charAt(R.type.length-1),Z=new Array(j),F=0;F<j;++F)Z[F]=U.length,z.push(R.name+"["+F+"]"),typeof R.location=="number"?U.push(R.location+F):Array.isArray(R.location)&&R.location.length===j&&typeof R.location[F]=="number"?U.push(0|R.location[F]):U.push(-1);I.push({name:R.name,type:R.type,locations:Z})}else I.push({name:R.name,type:R.type,locations:[U.length]}),z.push(R.name),typeof R.location=="number"?U.push(0|R.location):U.push(-1)}var V=0;for(P=0;P<U.length;++P)if(U[P]<0){for(;U.indexOf(V)>=0;)V+=1;U[P]=V}var H=new Array(m.length);function te(){k.program=l.program(f,k._vref,k._fref,z,U);for(var $=0;$<m.length;++$)H[$]=f.getUniformLocation(k.program,m[$].name)}te(),k._relink=te,k.types={uniforms:r(m),attributes:r(x)},k.attributes=n(f,k,I,U),Object.defineProperty(k,"uniforms",a(f,k,m,H))},h.exports=function(g,d,m,x,y){var k=new p(g);return k.update(d,m,x,y),k}},9068:function(h){function s(t,a,n){this.shortMessage=a||"",this.longMessage=n||"",this.rawError=t||"",this.message="gl-shader: "+(a||t||"")+(n?`
`+n:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,h.exports=s},4280:function(h,s,t){h.exports=function(p,c,b,g){for(var d={},m=0,x=b.length;m<x;++m){var y=b[m],k=y.name,f=y.type,S=y.locations;switch(f){case"bool":case"int":case"float":o(p,c,S[0],g,1,d,k);break;default:if(f.indexOf("vec")>=0){if((M=f.charCodeAt(f.length-1)-48)<2||M>4)throw new a("","Invalid data type for attribute "+k+": "+f);o(p,c,S[0],g,M,d,k)}else{if(!(f.indexOf("mat")>=0))throw new a("","Unknown data type for attribute "+k+": "+f);var M;if((M=f.charCodeAt(f.length-1)-48)<2||M>4)throw new a("","Invalid data type for attribute "+k+": "+f);u(p,c,S,g,M,d,k)}}}return d};var a=t(9068);function n(p,c,b,g,d,m){this._gl=p,this._wrapper=c,this._index=b,this._locations=g,this._dimension=d,this._constFunc=m}var r=n.prototype;r.pointer=function(p,c,b,g){var d=this,m=d._gl,x=d._locations[d._index];m.vertexAttribPointer(x,d._dimension,p||m.FLOAT,!!c,b||0,g||0),m.enableVertexAttribArray(x)},r.set=function(p,c,b,g){return this._constFunc(this._locations[this._index],p,c,b,g)},Object.defineProperty(r,"location",{get:function(){return this._locations[this._index]},set:function(p){return p!==this._locations[this._index]&&(this._locations[this._index]=0|p,this._wrapper.program=null),0|p}});var l=[function(p,c,b){return b.length===void 0?p.vertexAttrib1f(c,b):p.vertexAttrib1fv(c,b)},function(p,c,b,g){return b.length===void 0?p.vertexAttrib2f(c,b,g):p.vertexAttrib2fv(c,b)},function(p,c,b,g,d){return b.length===void 0?p.vertexAttrib3f(c,b,g,d):p.vertexAttrib3fv(c,b)},function(p,c,b,g,d,m){return b.length===void 0?p.vertexAttrib4f(c,b,g,d,m):p.vertexAttrib4fv(c,b)}];function o(p,c,b,g,d,m,x){var y=l[d],k=new n(p,c,b,g,d,y);Object.defineProperty(m,x,{set:function(f){return p.disableVertexAttribArray(g[b]),y(p,g[b],f),f},get:function(){return k},enumerable:!0})}function u(p,c,b,g,d,m,x){for(var y=new Array(d),k=new Array(d),f=0;f<d;++f)o(p,c,b[f],g,d,y,f),k[f]=y[f];Object.defineProperty(y,"location",{set:function(E){if(Array.isArray(E))for(var O=0;O<d;++O)k[O].location=E[O];else for(O=0;O<d;++O)k[O].location=E+O;return E},get:function(){for(var E=new Array(d),O=0;O<d;++O)E[O]=g[b[O]];return E},enumerable:!0}),y.pointer=function(E,O,P,I){E=E||p.FLOAT,O=!!O,P=P||d*d,I=I||0;for(var z=0;z<d;++z){var U=g[b[z]];p.vertexAttribPointer(U,d,E,O,P,I+z*d),p.enableVertexAttribArray(U)}};var S=new Array(d),M=p["vertexAttrib"+d+"fv"];Object.defineProperty(m,x,{set:function(E){for(var O=0;O<d;++O){var P=g[b[O]];if(p.disableVertexAttribArray(P),Array.isArray(E[0]))M.call(p,P,E[O]);else{for(var I=0;I<d;++I)S[I]=E[d*O+I];M.call(p,P,S)}}return E},get:function(){return y},enumerable:!0})}},9016:function(h,s,t){var a=t(3984),n=t(9068);function r(o){return function(){return o}}function l(o,u){for(var p=new Array(o),c=0;c<o;++c)p[c]=u;return p}h.exports=function(o,u,p,c){function b(y){return function(k){for(var f=g("",y),S=0;S<f.length;++S){var M=f[S],E=M[0],O=M[1];if(c[O]){var P=k;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var I=E;if(E.indexOf(".")===0&&(I=E.slice(1)),I.indexOf("]")===I.length-1){var z=I.indexOf("["),U=I.slice(0,z),R=I.slice(z+1,I.length-1);P=U?k[U][R]:k[R]}else P=k[I]}var j,Z=p[O].type;switch(Z){case"bool":case"int":case"sampler2D":case"samplerCube":o.uniform1i(c[O],P);break;case"float":o.uniform1f(c[O],P);break;default:var F=Z.indexOf("vec");if(!(0<=F&&F<=1&&Z.length===4+F)){if(Z.indexOf("mat")===0&&Z.length===4){if((j=Z.charCodeAt(Z.length-1)-48)<2||j>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+Z);o["uniformMatrix"+j+"fv"](c[O],!1,P);break}throw new n("","Unknown uniform data type for "+name+": "+Z)}if((j=Z.charCodeAt(Z.length-1)-48)<2||j>4)throw new n("","Invalid data type");switch(Z.charAt(0)){case"b":case"i":o["uniform"+j+"iv"](c[O],P);break;case"v":o["uniform"+j+"fv"](c[O],P);break;default:throw new n("","Unrecognized data type for vector "+name+": "+Z)}}}}}}function g(y,k){if(typeof k!="object")return[[y,k]];var f=[];for(var S in k){var M=k[S],E=y;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof M=="object"?f.push.apply(f,g(E,M)):f.push([E,M])}return f}function d(y,k,f){if(typeof f=="object"){var S=m(f);Object.defineProperty(y,k,{get:r(S),set:b(f),enumerable:!0,configurable:!1})}else c[f]?Object.defineProperty(y,k,{get:(M=f,function(E,O,P){return E.getUniform(O.program,P[M])}),set:b(f),enumerable:!0,configurable:!1}):y[k]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var O=E.indexOf("vec");if(0<=O&&O<=1&&E.length===4+O){if((P=E.charCodeAt(E.length-1)-48)<2||P>4)throw new n("","Invalid data type");return E.charAt(0)==="b"?l(P,!1):l(P,0)}if(E.indexOf("mat")===0&&E.length===4){var P;if((P=E.charCodeAt(E.length-1)-48)<2||P>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+E);return l(P*P,0)}throw new n("","Unknown uniform data type for "+name+": "+E)}}(p[f].type);var M}function m(y){var k;if(Array.isArray(y)){k=new Array(y.length);for(var f=0;f<y.length;++f)d(k,f,y[f])}else for(var S in k={},y)d(k,S,y[S]);return k}var x=a(p,!0);return{get:r(m(x)),set:b(x),enumerable:!0,configurable:!0}}},3984:function(h){h.exports=function(s,t){for(var a={},n=0;n<s.length;++n)for(var r=s[n].name.split("."),l=a,o=0;o<r.length;++o){var u=r[o].split("[");if(u.length>1){u[0]in l||(l[u[0]]=[]),l=l[u[0]];for(var p=1;p<u.length;++p){var c=parseInt(u[p]);p<u.length-1||o<r.length-1?(c in l||(p<u.length-1?l[c]=[]:l[c]={}),l=l[c]):l[c]=t?n:s[n].type}}else o<r.length-1?(u[0]in l||(l[u[0]]={}),l=l[u[0]]):l[u[0]]=t?n:s[n].type}return a}},2631:function(h,s){s.uniforms=function(r,l){for(var o=r.getProgramParameter(l,r.ACTIVE_UNIFORMS),u=[],p=0;p<o;++p){var c=r.getActiveUniform(l,p);if(c){var b=n(r,c.type);if(c.size>1)for(var g=0;g<c.size;++g)u.push({name:c.name.replace("[0]","["+g+"]"),type:b});else u.push({name:c.name,type:b})}}return u},s.attributes=function(r,l){for(var o=r.getProgramParameter(l,r.ACTIVE_ATTRIBUTES),u=[],p=0;p<o;++p){var c=r.getActiveAttrib(l,p);c&&u.push({name:c.name,type:n(r,c.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function n(r,l){if(!a){var o=Object.keys(t);a={};for(var u=0;u<o.length;++u){var p=o[u];a[r[p]]=t[p]}}return a[l]}},1628:function(h,s,t){s.shader=function(b,g,d){return c(b).getShaderReference(g,d)},s.program=function(b,g,d,m,x){return c(b).getProgram(g,d,m,x)};var a=t(9068),n=t(3530),r=new(typeof WeakMap>"u"?t(4037):WeakMap),l=0;function o(b,g,d,m,x,y,k){this.id=b,this.src=g,this.type=d,this.shader=m,this.count=y,this.programs=[],this.cache=k}function u(b){this.gl=b,this.shaders=[{},{}],this.programs={}}o.prototype.dispose=function(){if(--this.count==0){for(var b=this.cache,g=b.gl,d=this.programs,m=0,x=d.length;m<x;++m){var y=b.programs[d[m]];y&&(delete b.programs[m],g.deleteProgram(y))}g.deleteShader(this.shader),delete b.shaders[this.type===g.FRAGMENT_SHADER|0][this.src]}};var p=u.prototype;function c(b){var g=r.get(b);return g||(g=new u(b),r.set(b,g)),g}p.getShaderReference=function(b,g){var d=this.gl,m=this.shaders[b===d.FRAGMENT_SHADER|0],x=m[g];if(x&&d.isShader(x.shader))x.count+=1;else{var y=function(k,f,S){var M=k.createShader(f);if(k.shaderSource(M,S),k.compileShader(M),!k.getShaderParameter(M,k.COMPILE_STATUS)){var E=k.getShaderInfoLog(M);try{var O=n(E,S,f)}catch(P){throw console.warn("Failed to format compiler error: "+P),new a(E,`Error compiling shader:
`+E)}throw new a(E,O.short,O.long)}return M}(d,b,g);x=m[g]=new o(l++,g,b,y,[],1,this)}return x},p.getProgram=function(b,g,d,m){var x=[b.id,g.id,d.join(":"),m.join(":")].join("@"),y=this.programs[x];return y&&this.gl.isProgram(y)||(this.programs[x]=y=function(k,f,S,M,E){var O=k.createProgram();k.attachShader(O,f),k.attachShader(O,S);for(var P=0;P<M.length;++P)k.bindAttribLocation(O,E[P],M[P]);if(k.linkProgram(O),!k.getProgramParameter(O,k.LINK_STATUS)){var I=k.getProgramInfoLog(O);throw new a(I,"Error linking program: "+I)}return O}(this.gl,b.shader,g.shader,d,m),b.programs.push(x),g.programs.push(x)),y}},3050:function(h){function s(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}h.exports=function(a,n){var r=new s(a);return r.update(n),a.addOverlay(r),r};var t=s.prototype;t.update=function(a){a=a||{},this.enable=(a.enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var a=this.enable,n=this.width,r=this.color,l=this.center,o=this.plot,u=o.line,p=o.dataBox,c=o.viewBox;if(u.bind(),p[0]<=l[0]&&l[0]<=p[2]&&p[1]<=l[1]&&l[1]<=p[3]){var b=c[0]+(l[0]-p[0])/(p[2]-p[0])*(c[2]-c[0]),g=c[1]+(l[1]-p[1])/(p[3]-p[1])*(c[3]-c[1]);a[0]&&u.drawLine(b,g,c[0],g,n[0],r[0]),a[1]&&u.drawLine(b,g,b,c[1],n[1],r[1]),a[2]&&u.drawLine(b,g,c[2],g,n[2],r[2]),a[3]&&u.drawLine(b,g,b,c[3],n[3],r[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},3540:function(h,s,t){var a=t(6832),n=t(5158),r=a([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),l=a([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);h.exports=function(o){return n(o,r,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(h,s,t){var a=t(5827),n=t(2944),r=t(3540);h.exports=function(g,d){var m=[];function x(M,E,O,P,I,z){var U=[M,E,O,0,0,0,1];U[P+3]=1,U[P]=I,m.push.apply(m,U),U[6]=-1,m.push.apply(m,U),U[P]=z,m.push.apply(m,U),m.push.apply(m,U),U[6]=1,m.push.apply(m,U),U[P]=I,m.push.apply(m,U)}x(0,0,0,0,0,1),x(0,0,0,1,0,1),x(0,0,0,2,0,1),x(1,0,0,1,-1,1),x(1,0,0,2,-1,1),x(0,1,0,0,-1,1),x(0,1,0,2,-1,1),x(0,0,1,0,-1,1),x(0,0,1,1,-1,1);var y=a(g,m),k=n(g,[{type:g.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:g.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:g.FLOAT,buffer:y,size:1,offset:24,stride:28}]),f=r(g);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var S=new o(g,y,k,f);return S.update(d),S};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(g,d,m,x){this.gl=g,this.buffer=d,this.vao=m,this.shader=x,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=o.prototype,p=[0,0,0],c=[0,0,0],b=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(g){},u.draw=function(g){var d=this.gl,m=this.vao,x=this.shader;m.bind(),x.bind();var y,k=g.model||l,f=g.view||l,S=g.projection||l;this.axes&&(y=this.axes.lastCubeProps.axis);for(var M=p,E=c,O=0;O<3;++O)y&&y[O]<0?(M[O]=this.bounds[0][O],E[O]=this.bounds[1][O]):(M[O]=this.bounds[1][O],E[O]=this.bounds[0][O]);for(b[0]=d.drawingBufferWidth,b[1]=d.drawingBufferHeight,x.uniforms.model=k,x.uniforms.view=f,x.uniforms.projection=S,x.uniforms.coordinates=[this.position,M,E],x.uniforms.colors=this.colors,x.uniforms.screenShape=b,O=0;O<3;++O)x.uniforms.lineWidth=this.lineWidth[O]*this.pixelRatio,this.enabled[O]&&(m.draw(d.TRIANGLES,6,6*O),this.drawSides[O]&&m.draw(d.TRIANGLES,12,18+12*O));m.unbind()},u.update=function(g){g&&("bounds"in g&&(this.bounds=g.bounds),"position"in g&&(this.position=g.position),"lineWidth"in g&&(this.lineWidth=g.lineWidth),"colors"in g&&(this.colors=g.colors),"enabled"in g&&(this.enabled=g.enabled),"drawSides"in g&&(this.drawSides=g.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(h,s,t){var a=t(6832),n=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=a([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),o=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:l,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(h,s,t){var a=t(2858),n=t(4020),r=["xyz","xzy","yxz","yzx","zxy","zyx"],l=function(b,g){var d,m=b.length;for(d=0;d<m;d++){var x=b[d];if(x===g)return d;if(x>g)return d-1}return d},o=function(b,g,d){return b<g?g:b>d?d:b},u=function(b){var g=1/0;b.sort(function(y,k){return y-k});for(var d=b.length,m=1;m<d;m++){var x=Math.abs(b[m]-b[m-1]);x<g&&(g=x)}return g};h.exports=function(b,g){var d=b.startingPositions,m=b.maxLength||1e3,x=b.tubeSize||1,y=b.absoluteTubeSize,k=b.gridFill||"+x+y+z",f={};k.indexOf("-x")!==-1&&(f.reversedX=!0),k.indexOf("-y")!==-1&&(f.reversedY=!0),k.indexOf("-z")!==-1&&(f.reversedZ=!0),f.filled=r.indexOf(k.replace(/-/g,"").replace(/\+/g,""));var S=b.getVelocity||function(ye){return function(Ce,ke,Te){var le=ke.vectors,ue=ke.meshgrid,de=Ce[0],Le=Ce[1],we=Ce[2],Ee=ue[0].length,Oe=ue[1].length,Fe=ue[2].length,pe=l(ue[0],de),be=l(ue[1],Le),Me=l(ue[2],we),De=pe+1,Ne=be+1,Be=Me+1;if(pe=o(pe,0,Ee-1),De=o(De,0,Ee-1),be=o(be,0,Oe-1),Ne=o(Ne,0,Oe-1),Me=o(Me,0,Fe-1),Be=o(Be,0,Fe-1),pe<0||be<0||Me<0||De>Ee-1||Ne>Oe-1||Be>Fe-1)return a.create();var Ye,We,et,ft,ht,mt,Mt=ue[0][pe],_t=ue[0][De],it=ue[1][be],st=ue[1][Ne],St=ue[2][Me],zt=(de-Mt)/(_t-Mt),Ft=(Le-it)/(st-it),Pt=(we-St)/(ue[2][Be]-St);switch(isFinite(zt)||(zt=.5),isFinite(Ft)||(Ft=.5),isFinite(Pt)||(Pt=.5),Te.reversedX&&(pe=Ee-1-pe,De=Ee-1-De),Te.reversedY&&(be=Oe-1-be,Ne=Oe-1-Ne),Te.reversedZ&&(Me=Fe-1-Me,Be=Fe-1-Be),Te.filled){case 5:ht=Me,mt=Be,et=be*Fe,ft=Ne*Fe,Ye=pe*Fe*Oe,We=De*Fe*Oe;break;case 4:ht=Me,mt=Be,Ye=pe*Fe,We=De*Fe,et=be*Fe*Ee,ft=Ne*Fe*Ee;break;case 3:et=be,ft=Ne,ht=Me*Oe,mt=Be*Oe,Ye=pe*Oe*Fe,We=De*Oe*Fe;break;case 2:et=be,ft=Ne,Ye=pe*Oe,We=De*Oe,ht=Me*Oe*Ee,mt=Be*Oe*Ee;break;case 1:Ye=pe,We=De,ht=Me*Ee,mt=Be*Ee,et=be*Ee*Fe,ft=Ne*Ee*Fe;break;default:Ye=pe,We=De,et=be*Ee,ft=Ne*Ee,ht=Me*Ee*Oe,mt=Be*Ee*Oe}var Xe=le[Ye+et+ht],Ke=le[Ye+et+mt],He=le[Ye+ft+ht],Je=le[Ye+ft+mt],lt=le[We+et+ht],ot=le[We+et+mt],je=le[We+ft+ht],Ue=le[We+ft+mt],at=a.create(),$e=a.create(),gt=a.create(),yt=a.create();a.lerp(at,Xe,lt,zt),a.lerp($e,Ke,ot,zt),a.lerp(gt,He,je,zt),a.lerp(yt,Je,Ue,zt);var xt=a.create(),dt=a.create();a.lerp(xt,at,gt,Ft),a.lerp(dt,$e,yt,Ft);var Lt=a.create();return a.lerp(Lt,xt,dt,Pt),Lt}(ye,b,f)},M=b.getDivergence||function(ye,Ce){var ke=a.create(),Te=1e-4;a.add(ke,ye,[Te,0,0]);var le=S(ke);a.subtract(le,le,Ce),a.scale(le,le,1/Te),a.add(ke,ye,[0,Te,0]);var ue=S(ke);a.subtract(ue,ue,Ce),a.scale(ue,ue,1/Te),a.add(ke,ye,[0,0,Te]);var de=S(ke);return a.subtract(de,de,Ce),a.scale(de,de,1/Te),a.add(ke,le,ue),a.add(ke,ke,de),ke},E=[],O=g[0][0],P=g[0][1],I=g[0][2],z=g[1][0],U=g[1][1],R=g[1][2],j=function(ye){var Ce=ye[0],ke=ye[1],Te=ye[2];return!(Ce<O||Ce>z||ke<P||ke>U||Te<I||Te>R)},Z=10*a.distance(g[0],g[1])/m,F=Z*Z,V=1,H=0,te=d.length;te>1&&(V=function(ye){for(var Ce=[],ke=[],Te=[],le={},ue={},de={},Le=ye.length,we=0;we<Le;we++){var Ee=ye[we],Oe=Ee[0],Fe=Ee[1],pe=Ee[2];le[Oe]||(Ce.push(Oe),le[Oe]=!0),ue[Fe]||(ke.push(Fe),ue[Fe]=!0),de[pe]||(Te.push(pe),de[pe]=!0)}var be=u(Ce),Me=u(ke),De=u(Te),Ne=Math.min(be,Me,De);return isFinite(Ne)?Ne:1}(d));for(var $=0;$<te;$++){var J=a.create();a.copy(J,d[$]);var X=[J],K=[],ee=S(J),ie=J;K.push(ee);var ae=[],oe=M(J,ee),fe=a.length(oe);isFinite(fe)&&fe>H&&(H=fe),ae.push(fe),E.push({points:X,velocities:K,divergences:ae});for(var ge=0;ge<100*m&&X.length<m&&j(J);){ge++;var ve=a.clone(ee),xe=a.squaredLength(ve);if(xe===0)break;xe>F&&a.scale(ve,ve,Z/Math.sqrt(xe)),a.add(ve,ve,J),ee=S(ve),a.squaredDistance(ie,ve)-F>-1e-4*F&&(X.push(ve),ie=ve,K.push(ee),oe=M(ve,ee),fe=a.length(oe),isFinite(fe)&&fe>H&&(H=fe),ae.push(fe)),J=ve}}var _e=function(ye,Ce,ke,Te){for(var le=0,ue=0;ue<ye.length;ue++)for(var de=ye[ue].velocities,Le=0;Le<de.length;Le++)le=Math.max(le,a.length(de[Le]));var we=ye.map(function(Ye){return function(We,et,ft,ht){for(var mt=We.points,Mt=We.velocities,_t=We.divergences,it=[],st=[],St=[],zt=[],Ft=[],Pt=[],Xe=0,Ke=0,He=n.create(),Je=n.create(),lt=0;lt<mt.length;lt++){var ot=mt[lt],je=Mt[lt],Ue=_t[lt];et===0&&(Ue=.05*ft),Ke=a.length(je)/ht,He=n.create(),a.copy(He,je),He[3]=Ue;for(var at=0;at<8;at++)Ft[at]=[ot[0],ot[1],ot[2],at];if(zt.length>0)for(at=0;at<8;at++){var $e=(at+1)%8;it.push(zt[at],Ft[at],Ft[$e],Ft[$e],zt[$e],zt[at]),St.push(Je,He,He,He,Je,Je),Pt.push(Xe,Ke,Ke,Ke,Xe,Xe);var gt=it.length;st.push([gt-6,gt-5,gt-4],[gt-3,gt-2,gt-1])}var yt=zt;zt=Ft,Ft=yt;var xt=Je;Je=He,He=xt;var dt=Xe;Xe=Ke,Ke=dt}return{positions:it,cells:st,vectors:St,vertexIntensity:Pt}}(Ye,ke,Te,le)}),Ee=[],Oe=[],Fe=[],pe=[];for(ue=0;ue<we.length;ue++){var be=we[ue],Me=Ee.length;for(Ee=Ee.concat(be.positions),Fe=Fe.concat(be.vectors),pe=pe.concat(be.vertexIntensity),Le=0;Le<be.cells.length;Le++){var De=be.cells[Le],Ne=[];Oe.push(Ne);for(var Be=0;Be<De.length;Be++)Ne.push(De[Be]+Me)}}return{positions:Ee,cells:Oe,vectors:Fe,vertexIntensity:pe,colormap:Ce}}(E,b.colormap,H,V);return y?_e.tubeScale=y:(H===0&&(H=1),_e.tubeScale=.5*x*V/H),_e};var p=t(9578),c=t(1140).createMesh;h.exports.createTubeMesh=function(b,g){return c(b,g,{shaders:p,traceType:"streamtube"})}},9054:function(h,s,t){var a=t(5158),n=t(6832),r=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),o=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(p){var c=a(p,r,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createPickShader=function(p){var c=a(p,r,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createContourShader=function(p){var c=a(p,o,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},s.createPickContourShader=function(p){var c=a(p,o,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},3754:function(h,s,t){h.exports=function(oe){var fe=oe.gl,ge=f(fe),ve=M(fe),xe=S(fe),_e=E(fe),ye=n(fe),Ce=r(fe,[{buffer:ye,size:4,stride:O,offset:0},{buffer:ye,size:3,stride:O,offset:16},{buffer:ye,size:3,stride:O,offset:28}]),ke=n(fe),Te=r(fe,[{buffer:ke,size:4,stride:20,offset:0},{buffer:ke,size:1,stride:20,offset:16}]),le=n(fe),ue=r(fe,[{buffer:le,size:2,type:fe.FLOAT}]),de=l(fe,1,R,fe.RGBA,fe.UNSIGNED_BYTE);de.minFilter=fe.LINEAR,de.magFilter=fe.LINEAR;var Le=new j(fe,[0,0],[[0,0,0],[0,0,0]],ge,ve,ye,Ce,de,xe,_e,ke,Te,le,ue,[0,0,0]),we={levels:[[],[],[]]};for(var Ee in oe)we[Ee]=oe[Ee];return we.colormap=we.colormap||"jet",Le.update(we),Le};var a=t(2288),n=t(5827),r=t(2944),l=t(8931),o=t(5306),u=t(9156),p=t(7498),c=t(7382),b=t(5050),g=t(4162),d=t(104),m=t(7437),x=t(5070),y=t(9144),k=t(9054),f=k.createShader,S=k.createContourShader,M=k.createPickShader,E=k.createPickContourShader,O=40,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],z=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function U(oe,fe,ge,ve,xe){this.position=oe,this.index=fe,this.uv=ge,this.level=ve,this.dataCoordinate=xe}(function(){for(var oe=0;oe<3;++oe){var fe=z[oe],ge=(oe+2)%3;fe[(oe+1)%3+0]=1,fe[ge+3]=1,fe[oe+6]=1}})();var R=256;function j(oe,fe,ge,ve,xe,_e,ye,Ce,ke,Te,le,ue,de,Le,we){this.gl=oe,this.shape=fe,this.bounds=ge,this.objectOffset=we,this.intensityBounds=[],this._shader=ve,this._pickShader=xe,this._coordinateBuffer=_e,this._vao=ye,this._colorMap=Ce,this._contourShader=ke,this._contourPickShader=Te,this._contourBuffer=le,this._contourVAO=ue,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new U([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=de,this._dynamicVAO=Le,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[b(o.mallocFloat(1024),[0,0]),b(o.mallocFloat(1024),[0,0]),b(o.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var Z=j.prototype;Z.genColormap=function(oe,fe){var ge=!1,ve=c([u({colormap:oe,nshades:R,format:"rgba"}).map(function(xe,_e){var ye=fe?function(Ce,ke){if(!ke||!ke.length)return 1;for(var Te=0;Te<ke.length;++Te){if(ke.length<2)return 1;if(ke[Te][0]===Ce)return ke[Te][1];if(ke[Te][0]>Ce&&Te>0){var le=(ke[Te][0]-Ce)/(ke[Te][0]-ke[Te-1][0]);return ke[Te][1]*(1-le)+le*ke[Te-1][1]}}return 1}(_e/255,fe):xe[3];return ye<1&&(ge=!0),[xe[0],xe[1],xe[2],255*ye]})]);return p.divseq(ve,255),this.hasAlphaScale=ge,ve},Z.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},Z.isOpaque=function(){return!this.isTransparent()},Z.pickSlots=1,Z.setPickBase=function(oe){this.pickId=oe};var F=[0,0,0],V={showSurface:!1,showContour:!1,projections:[P.slice(),P.slice(),P.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function H(oe,fe){var ge,ve,xe,_e=fe.axes&&fe.axes.lastCubeProps.axis||F,ye=fe.showSurface,Ce=fe.showContour;for(ge=0;ge<3;++ge)for(ye=ye||fe.surfaceProject[ge],ve=0;ve<3;++ve)Ce=Ce||fe.contourProject[ge][ve];for(ge=0;ge<3;++ge){var ke=V.projections[ge];for(ve=0;ve<16;++ve)ke[ve]=0;for(ve=0;ve<4;++ve)ke[5*ve]=1;ke[5*ge]=0,ke[12+ge]=fe.axesBounds[+(_e[ge]>0)][ge],d(ke,oe.model,ke);var Te=V.clipBounds[ge];for(xe=0;xe<2;++xe)for(ve=0;ve<3;++ve)Te[xe][ve]=oe.clipBounds[xe][ve];Te[0][ge]=-1e8,Te[1][ge]=1e8}return V.showSurface=ye,V.showContour=Ce,V}var te={model:P,view:P,projection:P,inverseModel:P.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},$=P.slice(),J=[1,0,0,0,1,0,0,0,1];function X(oe,fe){oe=oe||{};var ge=this.gl;ge.disable(ge.CULL_FACE),this._colorMap.bind(0);var ve=te;ve.model=oe.model||P,ve.view=oe.view||P,ve.projection=oe.projection||P,ve.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ve.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ve.objectOffset=this.objectOffset,ve.contourColor=this.contourColor[0],ve.inverseModel=m(ve.inverseModel,ve.model);for(var xe=0;xe<2;++xe)for(var _e=ve.clipBounds[xe],ye=0;ye<3;++ye)_e[ye]=Math.min(Math.max(this.clipBounds[xe][ye],-1e8),1e8);ve.kambient=this.ambientLight,ve.kdiffuse=this.diffuseLight,ve.kspecular=this.specularLight,ve.roughness=this.roughness,ve.fresnel=this.fresnel,ve.opacity=this.opacity,ve.height=0,ve.permutation=J,ve.vertexColor=this.vertexColor;var Ce=$;for(d(Ce,ve.view,ve.model),d(Ce,ve.projection,Ce),m(Ce,Ce),xe=0;xe<3;++xe)ve.eyePosition[xe]=Ce[12+xe]/Ce[15];var ke=Ce[15];for(xe=0;xe<3;++xe)ke+=this.lightPosition[xe]*Ce[4*xe+3];for(xe=0;xe<3;++xe){var Te=Ce[12+xe];for(ye=0;ye<3;++ye)Te+=Ce[4*ye+xe]*this.lightPosition[ye];ve.lightPosition[xe]=Te/ke}var le=H(ve,this);if(le.showSurface){for(this._shader.bind(),this._shader.uniforms=ve,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ge.TRIANGLES,this._vertexCount),xe=0;xe<3;++xe)this.surfaceProject[xe]&&this.vertexCount&&(this._shader.uniforms.model=le.projections[xe],this._shader.uniforms.clipBounds=le.clipBounds[xe],this._vao.draw(ge.TRIANGLES,this._vertexCount));this._vao.unbind()}if(le.showContour){var ue=this._contourShader;ve.kambient=1,ve.kdiffuse=0,ve.kspecular=0,ve.opacity=1,ue.bind(),ue.uniforms=ve;var de=this._contourVAO;for(de.bind(),xe=0;xe<3;++xe)for(ue.uniforms.permutation=z[xe],ge.lineWidth(this.contourWidth[xe]*this.pixelRatio),ye=0;ye<this.contourLevels[xe].length;++ye)ye===this.highlightLevel[xe]?(ue.uniforms.contourColor=this.highlightColor[xe],ue.uniforms.contourTint=this.highlightTint[xe]):ye!==0&&ye-1!==this.highlightLevel[xe]||(ue.uniforms.contourColor=this.contourColor[xe],ue.uniforms.contourTint=this.contourTint[xe]),this._contourCounts[xe][ye]&&(ue.uniforms.height=this.contourLevels[xe][ye],de.draw(ge.LINES,this._contourCounts[xe][ye],this._contourOffsets[xe][ye]));for(xe=0;xe<3;++xe)for(ue.uniforms.model=le.projections[xe],ue.uniforms.clipBounds=le.clipBounds[xe],ye=0;ye<3;++ye)if(this.contourProject[xe][ye]){ue.uniforms.permutation=z[ye],ge.lineWidth(this.contourWidth[ye]*this.pixelRatio);for(var Le=0;Le<this.contourLevels[ye].length;++Le)Le===this.highlightLevel[ye]?(ue.uniforms.contourColor=this.highlightColor[ye],ue.uniforms.contourTint=this.highlightTint[ye]):Le!==0&&Le-1!==this.highlightLevel[ye]||(ue.uniforms.contourColor=this.contourColor[ye],ue.uniforms.contourTint=this.contourTint[ye]),this._contourCounts[ye][Le]&&(ue.uniforms.height=this.contourLevels[ye][Le],de.draw(ge.LINES,this._contourCounts[ye][Le],this._contourOffsets[ye][Le]))}for(de.unbind(),(de=this._dynamicVAO).bind(),xe=0;xe<3;++xe)if(this._dynamicCounts[xe]!==0)for(ue.uniforms.model=ve.model,ue.uniforms.clipBounds=ve.clipBounds,ue.uniforms.permutation=z[xe],ge.lineWidth(this.dynamicWidth[xe]*this.pixelRatio),ue.uniforms.contourColor=this.dynamicColor[xe],ue.uniforms.contourTint=this.dynamicTint[xe],ue.uniforms.height=this.dynamicLevel[xe],de.draw(ge.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]),ye=0;ye<3;++ye)this.contourProject[ye][xe]&&(ue.uniforms.model=le.projections[ye],ue.uniforms.clipBounds=le.clipBounds[ye],de.draw(ge.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]));de.unbind()}}Z.draw=function(oe){return X.call(this,oe,!1)},Z.drawTransparent=function(oe){return X.call(this,oe,!0)};var K={model:P,view:P,projection:P,inverseModel:P,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function ee(oe,fe){return Array.isArray(oe)?[fe(oe[0]),fe(oe[1]),fe(oe[2])]:[fe(oe),fe(oe),fe(oe)]}function ie(oe){return Array.isArray(oe)?oe.length===3?[oe[0],oe[1],oe[2],1]:[oe[0],oe[1],oe[2],oe[3]]:[0,0,0,1]}function ae(oe){if(Array.isArray(oe)){if(Array.isArray(oe))return[ie(oe[0]),ie(oe[1]),ie(oe[2])];var fe=ie(oe);return[fe.slice(),fe.slice(),fe.slice()]}}Z.drawPick=function(oe){oe=oe||{};var fe=this.gl;fe.disable(fe.CULL_FACE);var ge=K;ge.model=oe.model||P,ge.view=oe.view||P,ge.projection=oe.projection||P,ge.shape=this._field[2].shape,ge.pickId=this.pickId/255,ge.lowerBound=this.bounds[0],ge.upperBound=this.bounds[1],ge.objectOffset=this.objectOffset,ge.permutation=J;for(var ve=0;ve<2;++ve)for(var xe=ge.clipBounds[ve],_e=0;_e<3;++_e)xe[_e]=Math.min(Math.max(this.clipBounds[ve][_e],-1e8),1e8);var ye=H(ge,this);if(ye.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ge,this._vao.bind(),this._vao.draw(fe.TRIANGLES,this._vertexCount),ve=0;ve<3;++ve)this.surfaceProject[ve]&&(this._pickShader.uniforms.model=ye.projections[ve],this._pickShader.uniforms.clipBounds=ye.clipBounds[ve],this._vao.draw(fe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ye.showContour){var Ce=this._contourPickShader;Ce.bind(),Ce.uniforms=ge;var ke=this._contourVAO;for(ke.bind(),_e=0;_e<3;++_e)for(fe.lineWidth(this.contourWidth[_e]*this.pixelRatio),Ce.uniforms.permutation=z[_e],ve=0;ve<this.contourLevels[_e].length;++ve)this._contourCounts[_e][ve]&&(Ce.uniforms.height=this.contourLevels[_e][ve],ke.draw(fe.LINES,this._contourCounts[_e][ve],this._contourOffsets[_e][ve]));for(ve=0;ve<3;++ve)for(Ce.uniforms.model=ye.projections[ve],Ce.uniforms.clipBounds=ye.clipBounds[ve],_e=0;_e<3;++_e)if(this.contourProject[ve][_e]){Ce.uniforms.permutation=z[_e],fe.lineWidth(this.contourWidth[_e]*this.pixelRatio);for(var Te=0;Te<this.contourLevels[_e].length;++Te)this._contourCounts[_e][Te]&&(Ce.uniforms.height=this.contourLevels[_e][Te],ke.draw(fe.LINES,this._contourCounts[_e][Te],this._contourOffsets[_e][Te]))}ke.unbind()}},Z.pick=function(oe){if(!oe||oe.id!==this.pickId)return null;var fe=this._field[2].shape,ge=this._pickResult,ve=fe[0]*(oe.value[0]+(oe.value[2]>>4)/16)/255,xe=Math.floor(ve),_e=ve-xe,ye=fe[1]*(oe.value[1]+(15&oe.value[2])/16)/255,Ce=Math.floor(ye),ke=ye-Ce;xe+=1,Ce+=1;var Te=ge.position;Te[0]=Te[1]=Te[2]=0;for(var le=0;le<2;++le)for(var ue=le?_e:1-_e,de=0;de<2;++de)for(var Le=xe+le,we=Ce+de,Ee=ue*(de?ke:1-ke),Oe=0;Oe<3;++Oe)Te[Oe]+=this._field[Oe].get(Le,we)*Ee;for(var Fe=this._pickResult.level,pe=0;pe<3;++pe)if(Fe[pe]=x.le(this.contourLevels[pe],Te[pe]),Fe[pe]<0)this.contourLevels[pe].length>0&&(Fe[pe]=0);else if(Fe[pe]<this.contourLevels[pe].length-1){var be=this.contourLevels[pe][Fe[pe]],Me=this.contourLevels[pe][Fe[pe]+1];Math.abs(be-Te[pe])>Math.abs(Me-Te[pe])&&(Fe[pe]+=1)}for(ge.index[0]=_e<.5?xe:xe+1,ge.index[1]=ke<.5?Ce:Ce+1,ge.uv[0]=ve/fe[0],ge.uv[1]=ye/fe[1],Oe=0;Oe<3;++Oe)ge.dataCoordinate[Oe]=this._field[Oe].get(ge.index[0],ge.index[1]);return ge},Z.padField=function(oe,fe){var ge=fe.shape.slice(),ve=oe.shape.slice();p.assign(oe.lo(1,1).hi(ge[0],ge[1]),fe),p.assign(oe.lo(1).hi(ge[0],1),fe.hi(ge[0],1)),p.assign(oe.lo(1,ve[1]-1).hi(ge[0],1),fe.lo(0,ge[1]-1).hi(ge[0],1)),p.assign(oe.lo(0,1).hi(1,ge[1]),fe.hi(1)),p.assign(oe.lo(ve[0]-1,1).hi(1,ge[1]),fe.lo(ge[0]-1)),oe.set(0,0,fe.get(0,0)),oe.set(0,ve[1]-1,fe.get(0,ge[1]-1)),oe.set(ve[0]-1,0,fe.get(ge[0]-1,0)),oe.set(ve[0]-1,ve[1]-1,fe.get(ge[0]-1,ge[1]-1))},Z.update=function(oe){oe=oe||{},this.objectOffset=oe.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in oe&&(this.contourWidth=ee(oe.contourWidth,Number)),"showContour"in oe&&(this.showContour=ee(oe.showContour,Boolean)),"showSurface"in oe&&(this.showSurface=!!oe.showSurface),"contourTint"in oe&&(this.contourTint=ee(oe.contourTint,Boolean)),"contourColor"in oe&&(this.contourColor=ae(oe.contourColor)),"contourProject"in oe&&(this.contourProject=ee(oe.contourProject,function(ln){return ee(ln,Boolean)})),"surfaceProject"in oe&&(this.surfaceProject=oe.surfaceProject),"dynamicColor"in oe&&(this.dynamicColor=ae(oe.dynamicColor)),"dynamicTint"in oe&&(this.dynamicTint=ee(oe.dynamicTint,Number)),"dynamicWidth"in oe&&(this.dynamicWidth=ee(oe.dynamicWidth,Number)),"opacity"in oe&&(this.opacity=oe.opacity),"opacityscale"in oe&&(this.opacityscale=oe.opacityscale),"colorBounds"in oe&&(this.colorBounds=oe.colorBounds),"vertexColor"in oe&&(this.vertexColor=oe.vertexColor?1:0),"colormap"in oe&&this._colorMap.setPixels(this.genColormap(oe.colormap,this.opacityscale));var fe=oe.field||oe.coords&&oe.coords[2]||null,ge=!1;if(fe||(fe=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in oe||"coords"in oe){var ve=(fe.shape[0]+2)*(fe.shape[1]+2);ve>this._field[2].data.length&&(o.freeFloat(this._field[2].data),this._field[2].data=o.mallocFloat(a.nextPow2(ve))),this._field[2]=b(this._field[2].data,[fe.shape[0]+2,fe.shape[1]+2]),this.padField(this._field[2],fe),this.shape=fe.shape.slice();for(var xe=this.shape,_e=0;_e<2;++_e)this._field[2].size>this._field[_e].data.length&&(o.freeFloat(this._field[_e].data),this._field[_e].data=o.mallocFloat(this._field[2].size)),this._field[_e]=b(this._field[_e].data,[xe[0]+2,xe[1]+2]);if(oe.coords){var ye=oe.coords;if(!Array.isArray(ye)||ye.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(_e=0;_e<2;++_e){var Ce=ye[_e];for(de=0;de<2;++de)if(Ce.shape[de]!==xe[de])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[_e],Ce)}}else if(oe.ticks){var ke=oe.ticks;if(!Array.isArray(ke)||ke.length!==2)throw new Error("gl-surface: invalid ticks");for(_e=0;_e<2;++_e){var Te=ke[_e];if((Array.isArray(Te)||Te.length)&&(Te=b(Te)),Te.shape[0]!==xe[_e])throw new Error("gl-surface: invalid tick length");var le=b(Te.data,xe);le.stride[_e]=Te.stride[0],le.stride[1^_e]=0,this.padField(this._field[_e],le)}}else{for(_e=0;_e<2;++_e){var ue=[0,0];ue[_e]=1,this._field[_e]=b(this._field[_e].data,[xe[0]+2,xe[1]+2],ue,0)}this._field[0].set(0,0,0);for(var de=0;de<xe[0];++de)this._field[0].set(de+1,0,de);for(this._field[0].set(xe[0]+1,0,xe[0]-1),this._field[1].set(0,0,0),de=0;de<xe[1];++de)this._field[1].set(0,de+1,de);this._field[1].set(0,xe[1]+1,xe[1]-1)}var Le=this._field,we=b(o.mallocFloat(3*Le[2].size*2),[3,xe[0]+2,xe[1]+2,2]);for(_e=0;_e<3;++_e)y(we.pick(_e),Le[_e],"mirror");var Ee=b(o.mallocFloat(3*Le[2].size),[xe[0]+2,xe[1]+2,3]);for(_e=0;_e<xe[0]+2;++_e)for(de=0;de<xe[1]+2;++de){var Oe=we.get(0,_e,de,0),Fe=we.get(0,_e,de,1),pe=we.get(1,_e,de,0),be=we.get(1,_e,de,1),Me=we.get(2,_e,de,0),De=we.get(2,_e,de,1),Ne=pe*De-be*Me,Be=Me*Fe-De*Oe,Ye=Oe*be-Fe*pe,We=Math.sqrt(Ne*Ne+Be*Be+Ye*Ye);We<1e-8?(We=Math.max(Math.abs(Ne),Math.abs(Be),Math.abs(Ye)))<1e-8?(Ye=1,Be=Ne=0,We=1):We=1/We:We=1/Math.sqrt(We),Ee.set(_e,de,0,Ne*We),Ee.set(_e,de,1,Be*We),Ee.set(_e,de,2,Ye*We)}o.free(we.data);var et=[1/0,1/0,1/0],ft=[-1/0,-1/0,-1/0],ht=1/0,mt=-1/0,Mt=(xe[0]-1)*(xe[1]-1)*6,_t=o.mallocFloat(a.nextPow2(10*Mt)),it=0,st=0;for(_e=0;_e<xe[0]-1;++_e)e:for(de=0;de<xe[1]-1;++de){for(var St=0;St<2;++St)for(var zt=0;zt<2;++zt)for(var Ft=0;Ft<3;++Ft){var Pt=this._field[Ft].get(1+_e+St,1+de+zt);if(isNaN(Pt)||!isFinite(Pt))continue e}for(Ft=0;Ft<6;++Ft){var Xe=_e+I[Ft][0],Ke=de+I[Ft][1],He=this._field[0].get(Xe+1,Ke+1),Je=this._field[1].get(Xe+1,Ke+1);Pt=this._field[2].get(Xe+1,Ke+1),Ne=Ee.get(Xe+1,Ke+1,0),Be=Ee.get(Xe+1,Ke+1,1),Ye=Ee.get(Xe+1,Ke+1,2),oe.intensity&&(lt=oe.intensity.get(Xe,Ke));var lt=oe.intensity?oe.intensity.get(Xe,Ke):Pt+this.objectOffset[2];_t[it++]=Xe,_t[it++]=Ke,_t[it++]=He,_t[it++]=Je,_t[it++]=Pt,_t[it++]=0,_t[it++]=lt,_t[it++]=Ne,_t[it++]=Be,_t[it++]=Ye,et[0]=Math.min(et[0],He+this.objectOffset[0]),et[1]=Math.min(et[1],Je+this.objectOffset[1]),et[2]=Math.min(et[2],Pt+this.objectOffset[2]),ht=Math.min(ht,lt),ft[0]=Math.max(ft[0],He+this.objectOffset[0]),ft[1]=Math.max(ft[1],Je+this.objectOffset[1]),ft[2]=Math.max(ft[2],Pt+this.objectOffset[2]),mt=Math.max(mt,lt),st+=1}}for(oe.intensityBounds&&(ht=+oe.intensityBounds[0],mt=+oe.intensityBounds[1]),_e=6;_e<it;_e+=10)_t[_e]=(_t[_e]-ht)/(mt-ht);this._vertexCount=st,this._coordinateBuffer.update(_t.subarray(0,it)),o.freeFloat(_t),o.free(Ee.data),this.bounds=[et,ft],this.intensity=oe.intensity||this._field[2],this.intensityBounds[0]===ht&&this.intensityBounds[1]===mt||(ge=!0),this.intensityBounds=[ht,mt]}if("levels"in oe){var ot=oe.levels;for(ot=Array.isArray(ot[0])?ot.slice():[[],[],ot],_e=0;_e<3;++_e)ot[_e]=ot[_e].slice(),ot[_e].sort(function(ln,nn){return ln-nn});for(_e=0;_e<3;++_e)for(de=0;de<ot[_e].length;++de)ot[_e][de]-=this.objectOffset[_e];e:for(_e=0;_e<3;++_e){if(ot[_e].length!==this.contourLevels[_e].length){ge=!0;break}for(de=0;de<ot[_e].length;++de)if(ot[_e][de]!==this.contourLevels[_e][de]){ge=!0;break e}}this.contourLevels=ot}if(ge){Le=this._field,xe=this.shape;for(var je=[],Ue=0;Ue<3;++Ue){var at=this.contourLevels[Ue],$e=[],gt=[],yt=[0,0,0];for(_e=0;_e<at.length;++_e){var xt=g(this._field[Ue],at[_e]);$e.push(je.length/5|0),st=0;e:for(de=0;de<xt.cells.length;++de){var dt=xt.cells[de];for(Ft=0;Ft<2;++Ft){var Lt=xt.positions[dt[Ft]],Tt=Lt[0],bt=0|Math.floor(Tt),Ct=Tt-bt,Dt=Lt[1],Bt=0|Math.floor(Dt),Xt=Dt-Bt,an=!1;t:for(var Wt=0;Wt<3;++Wt){yt[Wt]=0;var Vt=(Ue+Wt+1)%3;for(St=0;St<2;++St){var on=St?Ct:1-Ct;for(Xe=0|Math.min(Math.max(bt+St,0),xe[0]),zt=0;zt<2;++zt){var Sn=zt?Xt:1-Xt;if(Ke=0|Math.min(Math.max(Bt+zt,0),xe[1]),Pt=Wt<2?this._field[Vt].get(Xe,Ke):(this.intensity.get(Xe,Ke)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Pt)||isNaN(Pt)){an=!0;break t}var Ln=on*Sn;yt[Wt]+=Ln*Pt}}}if(an){if(Ft>0){for(var fn=0;fn<5;++fn)je.pop();st-=1}continue e}je.push(yt[0],yt[1],Lt[0],Lt[1],yt[2]),st+=1}}gt.push(st)}this._contourOffsets[Ue]=$e,this._contourCounts[Ue]=gt}var Zt=o.mallocFloat(je.length);for(_e=0;_e<je.length;++_e)Zt[_e]=je[_e];this._contourBuffer.update(Zt),o.freeFloat(Zt)}},Z.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var oe=0;oe<3;++oe)o.freeFloat(this._field[oe].data)},Z.highlight=function(oe){var fe,ge;if(!oe)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(fe=0;fe<3;++fe)this.enableHighlight[fe]?this.highlightLevel[fe]=oe.level[fe]:this.highlightLevel[fe]=-1;for(ge=this.snapToData?oe.dataCoordinate:oe.position,fe=0;fe<3;++fe)ge[fe]-=this.objectOffset[fe];if(this.enableDynamic[0]&&ge[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ge[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ge[2]!==this.dynamicLevel[2]){for(var ve=0,xe=this.shape,_e=o.mallocFloat(12*xe[0]*xe[1]),ye=0;ye<3;++ye)if(this.enableDynamic[ye]){this.dynamicLevel[ye]=ge[ye];var Ce=(ye+1)%3,ke=(ye+2)%3,Te=this._field[ye],le=this._field[Ce],ue=this._field[ke],de=g(Te,ge[ye]),Le=de.cells,we=de.positions;for(this._dynamicOffsets[ye]=ve,fe=0;fe<Le.length;++fe)for(var Ee=Le[fe],Oe=0;Oe<2;++Oe){var Fe=we[Ee[Oe]],pe=+Fe[0],be=0|pe,Me=0|Math.min(be+1,xe[0]),De=pe-be,Ne=1-De,Be=+Fe[1],Ye=0|Be,We=0|Math.min(Ye+1,xe[1]),et=Be-Ye,ft=1-et,ht=Ne*ft,mt=Ne*et,Mt=De*ft,_t=De*et,it=ht*le.get(be,Ye)+mt*le.get(be,We)+Mt*le.get(Me,Ye)+_t*le.get(Me,We),st=ht*ue.get(be,Ye)+mt*ue.get(be,We)+Mt*ue.get(Me,Ye)+_t*ue.get(Me,We);if(isNaN(it)||isNaN(st)){Oe&&(ve-=1);break}_e[2*ve+0]=it,_e[2*ve+1]=st,ve+=1}this._dynamicCounts[ye]=ve-this._dynamicOffsets[ye]}else this.dynamicLevel[ye]=NaN,this._dynamicCounts[ye]=0;this._dynamicBuffer.update(_e.subarray(0,2*ve)),o.freeFloat(_e)}}},8931:function(h,s,t){var a=t(5050),n=t(7498),r=t(5306);h.exports=function(k){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||function(M){l=[M.LINEAR,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_NEAREST],o=[M.NEAREST,M.LINEAR,M.NEAREST_MIPMAP_NEAREST,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_LINEAR],u=[M.REPEAT,M.CLAMP_TO_EDGE,M.MIRRORED_REPEAT]}(k),typeof arguments[1]=="number")return y(k,arguments[1],arguments[2],arguments[3]||k.RGBA,arguments[4]||k.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(k,0|arguments[1][0],0|arguments[1][1],arguments[2]||k.RGBA,arguments[3]||k.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var f=arguments[1],S=p(f)?f:f.raw;if(S)return function(M,E,O,P,I,z){var U=x(M);return M.texImage2D(M.TEXTURE_2D,0,I,I,z,E),new g(M,U,O,P,I,z)}(k,S,0|f.width,0|f.height,arguments[2]||k.RGBA,arguments[3]||k.UNSIGNED_BYTE);if(f.shape&&f.data&&f.stride)return function(M,E){var O=E.dtype,P=E.shape.slice(),I=M.getParameter(M.MAX_TEXTURE_SIZE);if(P[0]<0||P[0]>I||P[1]<0||P[1]>I)throw new Error("gl-texture2d: Invalid texture size");var z=m(P,E.stride.slice()),U=0;O==="float32"?U=M.FLOAT:O==="float64"?(U=M.FLOAT,z=!1,O="float32"):O==="uint8"?U=M.UNSIGNED_BYTE:(U=M.UNSIGNED_BYTE,z=!1,O="uint8");var R,j,Z=0;if(P.length===2)Z=M.LUMINANCE,P=[P[0],P[1],1],E=a(E.data,P,[E.stride[0],E.stride[1],1],E.offset);else{if(P.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(P[2]===1)Z=M.ALPHA;else if(P[2]===2)Z=M.LUMINANCE_ALPHA;else if(P[2]===3)Z=M.RGB;else{if(P[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");Z=M.RGBA}}U!==M.FLOAT||M.getExtension("OES_texture_float")||(U=M.UNSIGNED_BYTE,z=!1);var F=E.size;if(z)R=E.offset===0&&E.data.length===F?E.data:E.data.subarray(E.offset,E.offset+F);else{var V=[P[2],P[2]*P[0],1];j=r.malloc(F,O);var H=a(j,P,V,0);O!=="float32"&&O!=="float64"||U!==M.UNSIGNED_BYTE?n.assign(H,E):c(H,E),R=j.subarray(0,F)}var te=x(M);return M.texImage2D(M.TEXTURE_2D,0,Z,P[0],P[1],0,Z,U,R),z||r.free(j),new g(M,te,P[0],P[1],Z,U)}(k,f)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,o=null,u=null;function p(k){return typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&k instanceof HTMLVideoElement||typeof ImageData<"u"&&k instanceof ImageData}var c=function(k,f){n.muls(k,f,255)};function b(k,f,S){var M=k.gl,E=M.getParameter(M.MAX_TEXTURE_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return k._shape=[f,S],k.bind(),M.texImage2D(M.TEXTURE_2D,0,k.format,f,S,0,k.format,k.type,null),k._mipLevels=[0],k}function g(k,f,S,M,E,O){this.gl=k,this.handle=f,this.format=E,this.type=O,this._shape=[S,M],this._mipLevels=[0],this._magFilter=k.NEAREST,this._minFilter=k.NEAREST,this._wrapS=k.CLAMP_TO_EDGE,this._wrapT=k.CLAMP_TO_EDGE,this._anisoSamples=1;var P=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return P._wrapS},set:function(U){return P.wrapS=U}},{get:function(){return P._wrapT},set:function(U){return P.wrapT=U}}]),this._wrapVector=I;var z=[this._shape[0],this._shape[1]];Object.defineProperties(z,[{get:function(){return P._shape[0]},set:function(U){return P.width=U}},{get:function(){return P._shape[1]},set:function(U){return P.height=U}}]),this._shapeVector=z}var d=g.prototype;function m(k,f){return k.length===3?f[2]===1&&f[1]===k[0]*k[2]&&f[0]===k[2]:f[0]===1&&f[1]===k[0]}function x(k){var f=k.createTexture();return k.bindTexture(k.TEXTURE_2D,f),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),f}function y(k,f,S,M,E){var O=k.getParameter(k.MAX_TEXTURE_SIZE);if(f<0||f>O||S<0||S>O)throw new Error("gl-texture2d: Invalid texture shape");if(E===k.FLOAT&&!k.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var P=x(k);return k.texImage2D(k.TEXTURE_2D,0,M,f,S,0,M,E,null),new g(k,P,f,S,M,E)}Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(k){this.bind();var f=this.gl;if(this.type===f.FLOAT&&l.indexOf(k)>=0&&(f.getExtension("OES_texture_float_linear")||(k=f.NEAREST)),o.indexOf(k)<0)throw new Error("gl-texture2d: Unknown filter mode "+k);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,k),this._minFilter=k}},magFilter:{get:function(){return this._magFilter},set:function(k){this.bind();var f=this.gl;if(this.type===f.FLOAT&&l.indexOf(k)>=0&&(f.getExtension("OES_texture_float_linear")||(k=f.NEAREST)),o.indexOf(k)<0)throw new Error("gl-texture2d: Unknown filter mode "+k);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,k),this._magFilter=k}},mipSamples:{get:function(){return this._anisoSamples},set:function(k){var f=this._anisoSamples;if(this._anisoSamples=0|Math.max(k,1),f!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(k){if(this.bind(),u.indexOf(k)<0)throw new Error("gl-texture2d: Unknown wrap mode "+k);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,k),this._wrapS=k}},wrapT:{get:function(){return this._wrapT},set:function(k){if(this.bind(),u.indexOf(k)<0)throw new Error("gl-texture2d: Unknown wrap mode "+k);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,k),this._wrapT=k}},wrap:{get:function(){return this._wrapVector},set:function(k){if(Array.isArray(k)||(k=[k,k]),k.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var f=0;f<2;++f)if(u.indexOf(k[f])<0)throw new Error("gl-texture2d: Unknown wrap mode "+k);this._wrapS=k[0],this._wrapT=k[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),k}},shape:{get:function(){return this._shapeVector},set:function(k){if(Array.isArray(k)){if(k.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else k=[0|k,0|k];return b(this,0|k[0],0|k[1]),[0|k[0],0|k[1]]}},width:{get:function(){return this._shape[0]},set:function(k){return b(this,k|=0,this._shape[1]),k}},height:{get:function(){return this._shape[1]},set:function(k){return k|=0,b(this,this._shape[0],k),k}}}),d.bind=function(k){var f=this.gl;return k!==void 0&&f.activeTexture(f.TEXTURE0+(0|k)),f.bindTexture(f.TEXTURE_2D,this.handle),k!==void 0?0|k:f.getParameter(f.ACTIVE_TEXTURE)-f.TEXTURE0},d.dispose=function(){this.gl.deleteTexture(this.handle)},d.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var k=Math.min(this._shape[0],this._shape[1]),f=0;k>0;++f,k>>>=1)this._mipLevels.indexOf(f)<0&&this._mipLevels.push(f)},d.setPixels=function(k,f,S,M){var E=this.gl;this.bind(),Array.isArray(f)?(M=S,S=0|f[1],f=0|f[0]):(f=f||0,S=S||0),M=M||0;var O=p(k)?k:k.raw;if(O)this._mipLevels.indexOf(M)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(M)):E.texSubImage2D(E.TEXTURE_2D,M,f,S,this.format,this.type,O);else{if(!(k.shape&&k.stride&&k.data))throw new Error("gl-texture2d: Unsupported data type");if(k.shape.length<2||f+k.shape[1]>this._shape[1]>>>M||S+k.shape[0]>this._shape[0]>>>M||f<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(P,I,z,U,R,j,Z,F){var V=F.dtype,H=F.shape.slice();if(H.length<2||H.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var te=0,$=0,J=m(H,F.stride.slice());if(V==="float32"?te=P.FLOAT:V==="float64"?(te=P.FLOAT,J=!1,V="float32"):V==="uint8"?te=P.UNSIGNED_BYTE:(te=P.UNSIGNED_BYTE,J=!1,V="uint8"),H.length===2)$=P.LUMINANCE,H=[H[0],H[1],1],F=a(F.data,H,[F.stride[0],F.stride[1],1],F.offset);else{if(H.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(H[2]===1)$=P.ALPHA;else if(H[2]===2)$=P.LUMINANCE_ALPHA;else if(H[2]===3)$=P.RGB;else{if(H[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");$=P.RGBA}H[2]}if($!==P.LUMINANCE&&$!==P.ALPHA||R!==P.LUMINANCE&&R!==P.ALPHA||($=R),$!==R)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var X=F.size,K=Z.indexOf(U)<0;if(K&&Z.push(U),te===j&&J)F.offset===0&&F.data.length===X?K?P.texImage2D(P.TEXTURE_2D,U,R,H[0],H[1],0,R,j,F.data):P.texSubImage2D(P.TEXTURE_2D,U,I,z,H[0],H[1],R,j,F.data):K?P.texImage2D(P.TEXTURE_2D,U,R,H[0],H[1],0,R,j,F.data.subarray(F.offset,F.offset+X)):P.texSubImage2D(P.TEXTURE_2D,U,I,z,H[0],H[1],R,j,F.data.subarray(F.offset,F.offset+X));else{var ee;ee=j===P.FLOAT?r.mallocFloat32(X):r.mallocUint8(X);var ie=a(ee,H,[H[2],H[2]*H[0],1]);te===P.FLOAT&&j===P.UNSIGNED_BYTE?c(ie,F):n.assign(ie,F),K?P.texImage2D(P.TEXTURE_2D,U,R,H[0],H[1],0,R,j,ee.subarray(0,X)):P.texSubImage2D(P.TEXTURE_2D,U,I,z,H[0],H[1],R,j,ee.subarray(0,X)),j===P.FLOAT?r.freeFloat32(ee):r.freeUint8(ee)}})(E,f,S,M,this.format,this.type,this._mipLevels,k)}}},3056:function(h){h.exports=function(s,t,a){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var n=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(a){if(a.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<a.length;++r){var l=a[r];if(l.buffer){var o=l.buffer,u=l.size||4,p=l.type||s.FLOAT,c=!!l.normalized,b=l.stride||0,g=l.offset||0;o.bind(),s.enableVertexAttribArray(r),s.vertexAttribPointer(r,u,p,c,b,g)}else{if(typeof l=="number")s.vertexAttrib1f(r,l);else if(l.length===1)s.vertexAttrib1f(r,l[0]);else if(l.length===2)s.vertexAttrib2f(r,l[0],l[1]);else if(l.length===3)s.vertexAttrib3f(r,l[0],l[1],l[2]);else{if(l.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(r,l[0],l[1],l[2],l[3])}s.disableVertexAttribArray(r)}}for(;r<n;++r)s.disableVertexAttribArray(r)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),r=0;r<n;++r)s.disableVertexAttribArray(r)}},7220:function(h,s,t){var a=t(3056);function n(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}n.prototype.bind=function(){a(this.gl,this._elements,this._attributes)},n.prototype.update=function(r,l,o){this._elements=l,this._attributes=r,this._elementsType=o||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(r,l,o){o=o||0;var u=this.gl;this._elements?u.drawElements(r,l,this._elementsType,o):u.drawArrays(r,o,l)},h.exports=function(r){return new n(r)}},3778:function(h,s,t){var a=t(3056);function n(l,o,u,p,c,b){this.location=l,this.dimension=o,this.a=u,this.b=p,this.c=c,this.d=b}function r(l,o,u){this.gl=l,this._ext=o,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}n.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(l,o,u){if(this.bind(),a(this.gl,o,l),this.unbind(),this._attribs.length=0,l)for(var p=0;p<l.length;++p){var c=l[p];typeof c=="number"?this._attribs.push(new n(p,1,c)):Array.isArray(c)&&this._attribs.push(new n(p,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!o,this._elementsType=u||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(l,o,u){u=u||0;var p=this.gl;this._useElements?p.drawElements(l,o,this._elementsType,u):p.drawArrays(l,u,o)},h.exports=function(l,o){return new r(l,o,o.createVertexArrayOES())}},2944:function(h,s,t){var a=t(3778),n=t(7220);function r(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}h.exports=function(l,o,u,p){var c,b=l.createVertexArray?new r(l):l.getExtension("OES_vertex_array_object");return(c=b?a(l,b):n(l)).update(o,u,p),c}},2598:function(h){h.exports=function(s,t,a){return s[0]=t[0]+a[0],s[1]=t[1]+a[1],s[2]=t[2]+a[2],s}},5879:function(h,s,t){h.exports=function(l,o){var u=a(l[0],l[1],l[2]),p=a(o[0],o[1],o[2]);n(u,u),n(p,p);var c=r(u,p);return c>1?0:Math.acos(c)};var a=t(5415),n=t(899),r=t(9305)},8827:function(h){h.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},7622:function(h){h.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},8782:function(h){h.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},8501:function(h){h.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],l=t[2],o=a[0],u=a[1],p=a[2];return s[0]=r*p-l*u,s[1]=l*o-n*p,s[2]=n*u-r*o,s}},5981:function(h,s,t){h.exports=t(8288)},8288:function(h){h.exports=function(s,t){var a=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2];return Math.sqrt(a*a+n*n+r*r)}},8629:function(h,s,t){h.exports=t(7979)},7979:function(h){h.exports=function(s,t,a){return s[0]=t[0]/a[0],s[1]=t[1]/a[1],s[2]=t[2]/a[2],s}},9305:function(h){h.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},154:function(h){h.exports=1e-6},4932:function(h,s,t){h.exports=function(n,r){var l=n[0],o=n[1],u=n[2],p=r[0],c=r[1],b=r[2];return Math.abs(l-p)<=a*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(o-c)<=a*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(u-b)<=a*Math.max(1,Math.abs(u),Math.abs(b))};var a=t(154)},5777:function(h){h.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},3306:function(h){h.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},7447:function(h,s,t){h.exports=function(n,r,l,o,u,p){var c,b;for(r||(r=3),l||(l=0),b=o?Math.min(o*r+l,n.length):n.length,c=l;c<b;c+=r)a[0]=n[c],a[1]=n[c+1],a[2]=n[c+2],u(a,a,p),n[c]=a[0],n[c+1]=a[1],n[c+2]=a[2];return n};var a=t(8501)()},5415:function(h){h.exports=function(s,t,a){var n=new Float32Array(3);return n[0]=s,n[1]=t,n[2]=a,n}},2858:function(h,s,t){h.exports={EPSILON:t(154),create:t(8501),clone:t(7622),angle:t(5879),fromValues:t(5415),copy:t(8782),set:t(831),equals:t(4932),exactEquals:t(5777),add:t(2598),subtract:t(911),sub:t(8921),multiply:t(105),mul:t(5733),divide:t(7979),div:t(8629),min:t(3605),max:t(1716),floor:t(3306),ceil:t(8827),round:t(1624),scale:t(5685),scaleAndAdd:t(6722),distance:t(8288),dist:t(5981),squaredDistance:t(6403),sqrDist:t(5294),length:t(4693),len:t(1468),squaredLength:t(4337),sqrLen:t(3303),negate:t(435),inverse:t(2073),normalize:t(899),dot:t(9305),cross:t(903),lerp:t(1868),random:t(6660),transformMat4:t(3255),transformMat3:t(9908),transformQuat:t(6568),rotateX:t(392),rotateY:t(3222),rotateZ:t(3388),forEach:t(7447)}},2073:function(h){h.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},1468:function(h,s,t){h.exports=t(4693)},4693:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2];return Math.sqrt(t*t+a*a+n*n)}},1868:function(h){h.exports=function(s,t,a,n){var r=t[0],l=t[1],o=t[2];return s[0]=r+n*(a[0]-r),s[1]=l+n*(a[1]-l),s[2]=o+n*(a[2]-o),s}},1716:function(h){h.exports=function(s,t,a){return s[0]=Math.max(t[0],a[0]),s[1]=Math.max(t[1],a[1]),s[2]=Math.max(t[2],a[2]),s}},3605:function(h){h.exports=function(s,t,a){return s[0]=Math.min(t[0],a[0]),s[1]=Math.min(t[1],a[1]),s[2]=Math.min(t[2],a[2]),s}},5733:function(h,s,t){h.exports=t(105)},105:function(h){h.exports=function(s,t,a){return s[0]=t[0]*a[0],s[1]=t[1]*a[1],s[2]=t[2]*a[2],s}},435:function(h){h.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},899:function(h){h.exports=function(s,t){var a=t[0],n=t[1],r=t[2],l=a*a+n*n+r*r;return l>0&&(l=1/Math.sqrt(l),s[0]=t[0]*l,s[1]=t[1]*l,s[2]=t[2]*l),s}},6660:function(h){h.exports=function(s,t){t=t||1;var a=2*Math.random()*Math.PI,n=2*Math.random()-1,r=Math.sqrt(1-n*n)*t;return s[0]=Math.cos(a)*r,s[1]=Math.sin(a)*r,s[2]=n*t,s}},392:function(h){h.exports=function(s,t,a,n){var r=a[1],l=a[2],o=t[1]-r,u=t[2]-l,p=Math.sin(n),c=Math.cos(n);return s[0]=t[0],s[1]=r+o*c-u*p,s[2]=l+o*p+u*c,s}},3222:function(h){h.exports=function(s,t,a,n){var r=a[0],l=a[2],o=t[0]-r,u=t[2]-l,p=Math.sin(n),c=Math.cos(n);return s[0]=r+u*p+o*c,s[1]=t[1],s[2]=l+u*c-o*p,s}},3388:function(h){h.exports=function(s,t,a,n){var r=a[0],l=a[1],o=t[0]-r,u=t[1]-l,p=Math.sin(n),c=Math.cos(n);return s[0]=r+o*c-u*p,s[1]=l+o*p+u*c,s[2]=t[2],s}},1624:function(h){h.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},5685:function(h){h.exports=function(s,t,a){return s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a,s}},6722:function(h){h.exports=function(s,t,a,n){return s[0]=t[0]+a[0]*n,s[1]=t[1]+a[1]*n,s[2]=t[2]+a[2]*n,s}},831:function(h){h.exports=function(s,t,a,n){return s[0]=t,s[1]=a,s[2]=n,s}},5294:function(h,s,t){h.exports=t(6403)},3303:function(h,s,t){h.exports=t(4337)},6403:function(h){h.exports=function(s,t){var a=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2];return a*a+n*n+r*r}},4337:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2];return t*t+a*a+n*n}},8921:function(h,s,t){h.exports=t(911)},911:function(h){h.exports=function(s,t,a){return s[0]=t[0]-a[0],s[1]=t[1]-a[1],s[2]=t[2]-a[2],s}},9908:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],l=t[2];return s[0]=n*a[0]+r*a[3]+l*a[6],s[1]=n*a[1]+r*a[4]+l*a[7],s[2]=n*a[2]+r*a[5]+l*a[8],s}},3255:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],l=t[2],o=a[3]*n+a[7]*r+a[11]*l+a[15];return o=o||1,s[0]=(a[0]*n+a[4]*r+a[8]*l+a[12])/o,s[1]=(a[1]*n+a[5]*r+a[9]*l+a[13])/o,s[2]=(a[2]*n+a[6]*r+a[10]*l+a[14])/o,s}},6568:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],l=t[2],o=a[0],u=a[1],p=a[2],c=a[3],b=c*n+u*l-p*r,g=c*r+p*n-o*l,d=c*l+o*r-u*n,m=-o*n-u*r-p*l;return s[0]=b*c+m*-o+g*-p-d*-u,s[1]=g*c+m*-u+d*-o-b*-p,s[2]=d*c+m*-p+b*-u-g*-o,s}},3433:function(h){h.exports=function(s,t,a){return s[0]=t[0]+a[0],s[1]=t[1]+a[1],s[2]=t[2]+a[2],s[3]=t[3]+a[3],s}},1413:function(h){h.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},3470:function(h){h.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},5313:function(h){h.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(h){h.exports=function(s,t){var a=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2],l=t[3]-s[3];return Math.sqrt(a*a+n*n+r*r+l*l)}},205:function(h){h.exports=function(s,t,a){return s[0]=t[0]/a[0],s[1]=t[1]/a[1],s[2]=t[2]/a[2],s[3]=t[3]/a[3],s}},4242:function(h){h.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},5680:function(h){h.exports=function(s,t,a,n){var r=new Float32Array(4);return r[0]=s,r[1]=t,r[2]=a,r[3]=n,r}},4020:function(h,s,t){h.exports={create:t(5313),clone:t(1413),fromValues:t(5680),copy:t(3470),set:t(6453),add:t(3433),subtract:t(2705),multiply:t(746),divide:t(205),min:t(2170),max:t(3030),scale:t(5510),scaleAndAdd:t(4224),distance:t(5446),squaredDistance:t(1542),length:t(8177),squaredLength:t(9037),negate:t(6459),inverse:t(8057),normalize:t(381),dot:t(4242),lerp:t(8746),random:t(3770),transformMat4:t(6342),transformQuat:t(5022)}},8057:function(h){h.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},8177:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2],r=s[3];return Math.sqrt(t*t+a*a+n*n+r*r)}},8746:function(h){h.exports=function(s,t,a,n){var r=t[0],l=t[1],o=t[2],u=t[3];return s[0]=r+n*(a[0]-r),s[1]=l+n*(a[1]-l),s[2]=o+n*(a[2]-o),s[3]=u+n*(a[3]-u),s}},3030:function(h){h.exports=function(s,t,a){return s[0]=Math.max(t[0],a[0]),s[1]=Math.max(t[1],a[1]),s[2]=Math.max(t[2],a[2]),s[3]=Math.max(t[3],a[3]),s}},2170:function(h){h.exports=function(s,t,a){return s[0]=Math.min(t[0],a[0]),s[1]=Math.min(t[1],a[1]),s[2]=Math.min(t[2],a[2]),s[3]=Math.min(t[3],a[3]),s}},746:function(h){h.exports=function(s,t,a){return s[0]=t[0]*a[0],s[1]=t[1]*a[1],s[2]=t[2]*a[2],s[3]=t[3]*a[3],s}},6459:function(h){h.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},381:function(h){h.exports=function(s,t){var a=t[0],n=t[1],r=t[2],l=t[3],o=a*a+n*n+r*r+l*l;return o>0&&(o=1/Math.sqrt(o),s[0]=a*o,s[1]=n*o,s[2]=r*o,s[3]=l*o),s}},3770:function(h,s,t){var a=t(381),n=t(5510);h.exports=function(r,l){return l=l||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),a(r,r),n(r,r,l),r}},5510:function(h){h.exports=function(s,t,a){return s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a,s[3]=t[3]*a,s}},4224:function(h){h.exports=function(s,t,a,n){return s[0]=t[0]+a[0]*n,s[1]=t[1]+a[1]*n,s[2]=t[2]+a[2]*n,s[3]=t[3]+a[3]*n,s}},6453:function(h){h.exports=function(s,t,a,n,r){return s[0]=t,s[1]=a,s[2]=n,s[3]=r,s}},1542:function(h){h.exports=function(s,t){var a=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2],l=t[3]-s[3];return a*a+n*n+r*r+l*l}},9037:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2],r=s[3];return t*t+a*a+n*n+r*r}},2705:function(h){h.exports=function(s,t,a){return s[0]=t[0]-a[0],s[1]=t[1]-a[1],s[2]=t[2]-a[2],s[3]=t[3]-a[3],s}},6342:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],l=t[2],o=t[3];return s[0]=a[0]*n+a[4]*r+a[8]*l+a[12]*o,s[1]=a[1]*n+a[5]*r+a[9]*l+a[13]*o,s[2]=a[2]*n+a[6]*r+a[10]*l+a[14]*o,s[3]=a[3]*n+a[7]*r+a[11]*l+a[15]*o,s}},5022:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],l=t[2],o=a[0],u=a[1],p=a[2],c=a[3],b=c*n+u*l-p*r,g=c*r+p*n-o*l,d=c*l+o*r-u*n,m=-o*n-u*r-p*l;return s[0]=b*c+m*-o+g*-p-d*-u,s[1]=g*c+m*-u+d*-o-b*-p,s[2]=d*c+m*-p+b*-u-g*-o,s[3]=t[3],s}},9365:function(h,s,t){var a=t(8096),n=t(7896);h.exports=function(r){for(var l=Array.isArray(r)?r:a(r),o=0;o<l.length;o++){var u=l[o];if(u.type==="preprocessor"){var p=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(p&&p[2]){var c=p[1],b=p[2];return(c?n(b):b).trim()}}}}},3193:function(h,s,t){h.exports=function(P){var I,z,U,R=0,j=0,Z=u,F=[],V=[],H=1,te=0,$=0,J=!1,X=!1,K="",ee=r,ie=a;(P=P||{}).version==="300 es"&&(ee=o,ie=l);var ae={},oe={};for(R=0;R<ee.length;R++)ae[ee[R]]=!0;for(R=0;R<ie.length;R++)oe[ie[R]]=!0;return function(de){return V=[],de!==null?function(Le){var we;for(R=0,Le.toString&&(Le=Le.toString()),K+=Le.replace(/\r\n/g,`
`),U=K.length;I=K[R],R<U;){switch(we=R,Z){case c:R=_e();break;case b:case g:R=xe();break;case d:R=ye();break;case m:R=Te();break;case E:R=ke();break;case x:R=le();break;case p:R=ue();break;case S:R=ve();break;case u:R=ge()}we!==R&&(K[we]===`
`?(te=0,++H):++te)}return j+=R,K=K.slice(R),V}(de):(F.length&&fe(F.join("")),Z=M,fe("(eof)"),V)};function fe(de){de.length&&V.push({type:O[Z],data:de,position:$,line:H,column:te})}function ge(){return F=F.length?[]:F,z==="/"&&I==="*"?($=j+R-1,Z=c,z=I,R+1):z==="/"&&I==="/"?($=j+R-1,Z=b,z=I,R+1):I==="#"?(Z=g,$=j+R,R):/\s/.test(I)?(Z=S,$=j+R,R):(J=/\d/.test(I),X=/[^\w_]/.test(I),$=j+R,Z=J?m:X?d:p,R)}function ve(){return/[^\s]/g.test(I)?(fe(F.join("")),Z=u,R):(F.push(I),z=I,R+1)}function xe(){return I!=="\r"&&I!==`
`||z==="\\"?(F.push(I),z=I,R+1):(fe(F.join("")),Z=u,R)}function _e(){return I==="/"&&z==="*"?(F.push(I),fe(F.join("")),Z=u,R+1):(F.push(I),z=I,R+1)}function ye(){if(z==="."&&/\d/.test(I))return Z=x,R;if(z==="/"&&I==="*")return Z=c,R;if(z==="/"&&I==="/")return Z=b,R;if(I==="."&&F.length){for(;Ce(F););return Z=x,R}if(I===";"||I===")"||I==="("){if(F.length)for(;Ce(F););return fe(I),Z=u,R+1}var de=F.length===2&&I!=="=";if(/[\w_\d\s]/.test(I)||de){for(;Ce(F););return Z=u,R}return F.push(I),z=I,R+1}function Ce(de){for(var Le,we,Ee=0;;){if(Le=n.indexOf(de.slice(0,de.length+Ee).join("")),we=n[Le],Le===-1){if(Ee--+de.length>0)continue;we=de.slice(0,1).join("")}return fe(we),$+=we.length,(F=F.slice(we.length)).length}}function ke(){return/[^a-fA-F0-9]/.test(I)?(fe(F.join("")),Z=u,R):(F.push(I),z=I,R+1)}function Te(){return I==="."||/[eE]/.test(I)?(F.push(I),Z=x,z=I,R+1):I==="x"&&F.length===1&&F[0]==="0"?(Z=E,F.push(I),z=I,R+1):/[^\d]/.test(I)?(fe(F.join("")),Z=u,R):(F.push(I),z=I,R+1)}function le(){return I==="f"&&(F.push(I),z=I,R+=1),/[eE]/.test(I)?(F.push(I),z=I,R+1):(I!=="-"&&I!=="+"||!/[eE]/.test(z))&&/[^\d]/.test(I)?(fe(F.join("")),Z=u,R):(F.push(I),z=I,R+1)}function ue(){if(/[^\d\w_]/.test(I)){var de=F.join("");return Z=oe[de]?f:ae[de]?k:y,fe(F.join("")),Z=u,R}return F.push(I),z=I,R+1}};var a=t(399),n=t(9746),r=t(9525),l=t(9458),o=t(3585),u=999,p=9999,c=0,b=1,g=2,d=3,m=4,x=5,y=6,k=7,f=8,S=9,M=10,E=11,O=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(h,s,t){var a=t(9525);a=a.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),h.exports=a.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(h){h.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(h,s,t){var a=t(399);h.exports=a.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(h){h.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(h){h.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(h,s,t){var a=t(3193);h.exports=function(n,r){var l=a(r),o=[];return(o=o.concat(l(n))).concat(l(null))}},6832:function(h){h.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),a=[],n=0;n<s.length-1;n++)a.push(s[n],t[n]||"");return a.push(s[n]),a.join("")}},5233:function(h,s,t){var a=t(4846);h.exports=a&&function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{n=!1}return n}()},2183:function(h,s,t){h.exports=function(b,g){var d=b.length;if(d===0)throw new Error("Must have at least d+1 points");var m=b[0].length;if(d<=m)throw new Error("Must input at least d+1 points");var x=b.slice(0,m+1),y=a.apply(void 0,x);if(y===0)throw new Error("Input not in general position");for(var k=new Array(m+1),f=0;f<=m;++f)k[f]=f;y<0&&(k[0]=1,k[1]=0);var S=new r(k,new Array(m+1),!1),M=S.adjacent,E=new Array(m+2);for(f=0;f<=m;++f){for(var O=k.slice(),P=0;P<=m;++P)P===f&&(O[P]=-1);var I=O[0];O[0]=O[1],O[1]=I;var z=new r(O,new Array(m+1),!0);M[f]=z,E[f]=z}for(E[m+1]=S,f=0;f<=m;++f){O=M[f].vertices;var U=M[f].adjacent;for(P=0;P<=m;++P){var R=O[P];if(R<0)U[P]=S;else for(var j=0;j<=m;++j)M[j].vertices.indexOf(R)<0&&(U[P]=M[j])}}var Z=new p(m,x,E),F=!!g;for(f=m+1;f<d;++f)Z.insert(b[f],F);return Z.boundary()};var a=t(417),n=t(8211).H;function r(b,g,d){this.vertices=b,this.adjacent=g,this.boundary=d,this.lastVisited=-1}function l(b,g,d){this.vertices=b,this.cell=g,this.index=d}function o(b,g){return n(b.vertices,g.vertices)}r.prototype.flip=function(){var b=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=b;var g=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=g};var u=[];function p(b,g,d){this.dimension=b,this.vertices=g,this.simplices=d,this.interior=d.filter(function(k){return!k.boundary}),this.tuple=new Array(b+1);for(var m=0;m<=b;++m)this.tuple[m]=this.vertices[m];var x,y=u[b];y||(y=u[b]=((x=a[b+1])||(x=a),function(k){return function(){var f=this.tuple;return k.apply(this,f)}}(x))),this.orient=y}var c=p.prototype;c.handleBoundaryDegeneracy=function(b,g){var d=this.dimension,m=this.vertices.length-1,x=this.tuple,y=this.vertices,k=[b];for(b.lastVisited=-m;k.length>0;)for(var f=(b=k.pop()).adjacent,S=0;S<=d;++S){var M=f[S];if(M.boundary&&!(M.lastVisited<=-m)){for(var E=M.vertices,O=0;O<=d;++O){var P=E[O];x[O]=P<0?g:y[P]}var I=this.orient();if(I>0)return M;M.lastVisited=-m,I===0&&k.push(M)}}return null},c.walk=function(b,g){var d=this.vertices.length-1,m=this.dimension,x=this.vertices,y=this.tuple,k=g?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[k];e:for(;!f.boundary;){for(var S=f.vertices,M=f.adjacent,E=0;E<=m;++E)y[E]=x[S[E]];for(f.lastVisited=d,E=0;E<=m;++E){var O=M[E];if(!(O.lastVisited>=d)){var P=y[E];y[E]=b;var I=this.orient();if(y[E]=P,I<0){f=O;continue e}O.boundary?O.lastVisited=-d:O.lastVisited=d}}return}return f},c.addPeaks=function(b,g){var d=this.vertices.length-1,m=this.dimension,x=this.vertices,y=this.tuple,k=this.interior,f=this.simplices,S=[g];g.lastVisited=d,g.vertices[g.vertices.indexOf(-1)]=d,g.boundary=!1,k.push(g);for(var M=[];S.length>0;){var E=(g=S.pop()).vertices,O=g.adjacent,P=E.indexOf(d);if(!(P<0)){for(var I=0;I<=m;++I)if(I!==P){var z=O[I];if(z.boundary&&!(z.lastVisited>=d)){var U=z.vertices;if(z.lastVisited!==-d){for(var R=0,j=0;j<=m;++j)U[j]<0?(R=j,y[j]=b):y[j]=x[U[j]];if(this.orient()>0){U[R]=d,z.boundary=!1,k.push(z),S.push(z),z.lastVisited=d;continue}z.lastVisited=-d}var Z=z.adjacent,F=E.slice(),V=O.slice(),H=new r(F,V,!0);f.push(H);var te=Z.indexOf(g);if(!(te<0))for(Z[te]=H,V[P]=z,F[I]=-1,V[I]=g,O[I]=H,H.flip(),j=0;j<=m;++j){var $=F[j];if(!($<0||$===d)){for(var J=new Array(m-1),X=0,K=0;K<=m;++K){var ee=F[K];ee<0||K===j||(J[X++]=ee)}M.push(new l(J,H,j))}}}}}}for(M.sort(o),I=0;I+1<M.length;I+=2){var ie=M[I],ae=M[I+1],oe=ie.index,fe=ae.index;oe<0||fe<0||(ie.cell.adjacent[ie.index]=ae.cell,ae.cell.adjacent[ae.index]=ie.cell)}},c.insert=function(b,g){var d=this.vertices;d.push(b);var m=this.walk(b,g);if(m){for(var x=this.dimension,y=this.tuple,k=0;k<=x;++k){var f=m.vertices[k];y[k]=f<0?b:d[f]}var S=this.orient(y);S<0||(S!==0||(m=this.handleBoundaryDegeneracy(m,b)))&&this.addPeaks(b,m)}},c.boundary=function(){for(var b=this.dimension,g=[],d=this.simplices,m=d.length,x=0;x<m;++x){var y=d[x];if(y.boundary){for(var k=new Array(b),f=y.vertices,S=0,M=0,E=0;E<=b;++E)f[E]>=0?k[S++]=f[E]:M=1&E;if(M===(1&b)){var O=k[0];k[0]=k[1],k[1]=O}g.push(k)}}return g}},9014:function(h,s,t){var a=t(5070);function n(S,M,E,O,P){this.mid=S,this.left=M,this.right=E,this.leftPoints=O,this.rightPoints=P,this.count=(M?M.count:0)+(E?E.count:0)+O.length}h.exports=function(S){return S&&S.length!==0?new k(y(S)):new k(null)};var r=n.prototype;function l(S,M){S.mid=M.mid,S.left=M.left,S.right=M.right,S.leftPoints=M.leftPoints,S.rightPoints=M.rightPoints,S.count=M.count}function o(S,M){var E=y(M);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function u(S,M){var E=S.intervals([]);E.push(M),o(S,E)}function p(S,M){var E=S.intervals([]),O=E.indexOf(M);return O<0?0:(E.splice(O,1),o(S,E),1)}function c(S,M,E){for(var O=0;O<S.length&&S[O][0]<=M;++O){var P=E(S[O]);if(P)return P}}function b(S,M,E){for(var O=S.length-1;O>=0&&S[O][1]>=M;--O){var P=E(S[O]);if(P)return P}}function g(S,M){for(var E=0;E<S.length;++E){var O=M(S[E]);if(O)return O}}function d(S,M){return S-M}function m(S,M){return S[0]-M[0]||S[1]-M[1]}function x(S,M){return S[1]-M[1]||S[0]-M[0]}function y(S){if(S.length===0)return null;for(var M=[],E=0;E<S.length;++E)M.push(S[E][0],S[E][1]);M.sort(d);var O=M[M.length>>1],P=[],I=[],z=[];for(E=0;E<S.length;++E){var U=S[E];U[1]<O?P.push(U):O<U[0]?I.push(U):z.push(U)}var R=z,j=z.slice();return R.sort(m),j.sort(x),new n(O,y(P),y(I),R,j)}function k(S){this.root=S}r.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},r.insert=function(S){var M=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(M+1)?u(this,S):this.left.insert(S):this.left=y([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(M+1)?u(this,S):this.right.insert(S):this.right=y([S]);else{var E=a.ge(this.leftPoints,S,m),O=a.ge(this.rightPoints,S,x);this.leftPoints.splice(E,0,S),this.rightPoints.splice(O,0,S)}},r.remove=function(S){var M=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(M-1)?p(this,S):(I=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(I===1&&(this.count-=1),I):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(M-1)?p(this,S):(I=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(I===1&&(this.count-=1),I):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,O=this.left;O.right;)E=O,O=O.right;if(E===this)O.right=this.right;else{var P=this.left,I=this.right;E.count-=O.count,E.right=O.left,O.left=P,O.right=I}l(this,O),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?l(this,this.left):l(this,this.right);return 1}for(P=a.ge(this.leftPoints,S,m);P<this.leftPoints.length&&this.leftPoints[P][0]===S[0];++P)if(this.leftPoints[P]===S){for(this.count-=1,this.leftPoints.splice(P,1),I=a.ge(this.rightPoints,S,x);I<this.rightPoints.length&&this.rightPoints[I][1]===S[1];++I)if(this.rightPoints[I]===S)return this.rightPoints.splice(I,1),1}return 0},r.queryPoint=function(S,M){return S<this.mid?this.left&&(E=this.left.queryPoint(S,M))?E:c(this.leftPoints,S,M):S>this.mid?this.right&&(E=this.right.queryPoint(S,M))?E:b(this.rightPoints,S,M):g(this.leftPoints,M);var E},r.queryInterval=function(S,M,E){var O;return S<this.mid&&this.left&&(O=this.left.queryInterval(S,M,E))||M>this.mid&&this.right&&(O=this.right.queryInterval(S,M,E))?O:M<this.mid?c(this.leftPoints,M,E):S>this.mid?b(this.rightPoints,S,E):g(this.leftPoints,E)};var f=k.prototype;f.insert=function(S){this.root?this.root.insert(S):this.root=new n(S[0],null,null,[S],[S])},f.remove=function(S){if(this.root){var M=this.root.remove(S);return M===2&&(this.root=null),M!==0}return!1},f.queryPoint=function(S,M){if(this.root)return this.root.queryPoint(S,M)},f.queryInterval=function(S,M,E){if(S<=M&&this.root)return this.root.queryInterval(S,M,E)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(h){h.exports=function(s){for(var t=new Array(s),a=0;a<s;++a)t[a]=a;return t}},4846:function(h){h.exports=!0},4780:function(h){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}h.exports=function(t){return t!=null&&(s(t)||function(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&s(a.slice(0,0))}(t)||!!t._isBuffer)}},3596:function(h){h.exports=function(s){for(var t,a=s.length,n=0;n<a;n++)if(((t=s.charCodeAt(n))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},3578:function(h){h.exports=function(s,t,a){return s*(1-a)+t*a}},7191:function(h,s,t){var a=t(4690),n=t(9823),r=t(7332),l=t(7787),o=t(7437),u=t(2142),p={length:t(4693),normalize:t(899),dot:t(9305),cross:t(903)},c=n(),b=n(),g=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],m=[0,0,0];function x(y,k,f,S,M){y[0]=k[0]*S+f[0]*M,y[1]=k[1]*S+f[1]*M,y[2]=k[2]*S+f[2]*M}h.exports=function(y,k,f,S,M,E){if(k||(k=[0,0,0]),f||(f=[0,0,0]),S||(S=[0,0,0]),M||(M=[0,0,0,1]),E||(E=[0,0,0,1]),!a(c,y)||(r(b,c),b[3]=0,b[7]=0,b[11]=0,b[15]=1,Math.abs(l(b)<1e-8)))return!1;var O,P,I,z,U,R,j,Z=c[3],F=c[7],V=c[11],H=c[12],te=c[13],$=c[14],J=c[15];if(Z!==0||F!==0||V!==0){if(g[0]=Z,g[1]=F,g[2]=V,g[3]=J,!o(b,b))return!1;u(b,b),O=M,I=b,z=(P=g)[0],U=P[1],R=P[2],j=P[3],O[0]=I[0]*z+I[4]*U+I[8]*R+I[12]*j,O[1]=I[1]*z+I[5]*U+I[9]*R+I[13]*j,O[2]=I[2]*z+I[6]*U+I[10]*R+I[14]*j,O[3]=I[3]*z+I[7]*U+I[11]*R+I[15]*j}else M[0]=M[1]=M[2]=0,M[3]=1;if(k[0]=H,k[1]=te,k[2]=$,function(K,ee){K[0][0]=ee[0],K[0][1]=ee[1],K[0][2]=ee[2],K[1][0]=ee[4],K[1][1]=ee[5],K[1][2]=ee[6],K[2][0]=ee[8],K[2][1]=ee[9],K[2][2]=ee[10]}(d,c),f[0]=p.length(d[0]),p.normalize(d[0],d[0]),S[0]=p.dot(d[0],d[1]),x(d[1],d[1],d[0],1,-S[0]),f[1]=p.length(d[1]),p.normalize(d[1],d[1]),S[0]/=f[1],S[1]=p.dot(d[0],d[2]),x(d[2],d[2],d[0],1,-S[1]),S[2]=p.dot(d[1],d[2]),x(d[2],d[2],d[1],1,-S[2]),f[2]=p.length(d[2]),p.normalize(d[2],d[2]),S[1]/=f[2],S[2]/=f[2],p.cross(m,d[1],d[2]),p.dot(d[0],m)<0)for(var X=0;X<3;X++)f[X]*=-1,d[X][0]*=-1,d[X][1]*=-1,d[X][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(E[0]=-E[0]),d[0][2]>d[2][0]&&(E[1]=-E[1]),d[1][0]>d[0][1]&&(E[2]=-E[2]),!0}},4690:function(h){h.exports=function(s,t){var a=t[15];if(a===0)return!1;for(var n=1/a,r=0;r<16;r++)s[r]=t[r]*n;return!0}},7649:function(h,s,t){var a=t(1868),n=t(1102),r=t(7191),l=t(7787),o=t(1116),u=b(),p=b(),c=b();function b(){return{translate:g(),scale:g(1),skew:g(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function g(d){return[d||0,d||0,d||0]}h.exports=function(d,m,x,y){if(l(m)===0||l(x)===0)return!1;var k=r(m,u.translate,u.scale,u.skew,u.perspective,u.quaternion),f=r(x,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!(!k||!f||(a(c.translate,u.translate,p.translate,y),a(c.skew,u.skew,p.skew,y),a(c.scale,u.scale,p.scale,y),a(c.perspective,u.perspective,p.perspective,y),o(c.quaternion,u.quaternion,p.quaternion,y),n(d,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},1102:function(h,s,t){var a={identity:t(9947),translate:t(998),multiply:t(104),create:t(9823),scale:t(3668),fromRotationTranslation:t(7280)},n=(a.create(),a.create());h.exports=function(r,l,o,u,p,c){return a.identity(r),a.fromRotationTranslation(r,c,l),r[3]=p[0],r[7]=p[1],r[11]=p[2],r[15]=p[3],a.identity(n),u[2]!==0&&(n[9]=u[2],a.multiply(r,r,n)),u[1]!==0&&(n[9]=0,n[8]=u[1],a.multiply(r,r,n)),u[0]!==0&&(n[8]=0,n[4]=u[0],a.multiply(r,r,n)),a.scale(r,r,o),r}},9298:function(h,s,t){var a=t(5070),n=t(7649),r=t(7437),l=t(6109),o=t(7115),u=t(5240),p=t(3012),c=t(998),b=(t(3668),t(899)),g=[0,0,0];function d(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}h.exports=function(y){return new d((y=y||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var m=d.prototype;m.recalcMatrix=function(y){var k=this._time,f=a.le(k,y),S=this.computedMatrix;if(!(f<0)){var M=this._components;if(f===k.length-1)for(var E=16*f,O=0;O<16;++O)S[O]=M[E++];else{var P=k[f+1]-k[f],I=(E=16*f,this.prevMatrix),z=!0;for(O=0;O<16;++O)I[O]=M[E++];var U=this.nextMatrix;for(O=0;O<16;++O)U[O]=M[E++],z=z&&I[O]===U[O];if(P<1e-6||z)for(O=0;O<16;++O)S[O]=I[O];else n(S,I,U,(y-k[f])/P)}var R=this.computedUp;R[0]=S[1],R[1]=S[5],R[2]=S[9],b(R,R);var j=this.computedInverse;r(j,S);var Z=this.computedEye,F=j[15];Z[0]=j[12]/F,Z[1]=j[13]/F,Z[2]=j[14]/F;var V=this.computedCenter,H=Math.exp(this.computedRadius[0]);for(O=0;O<3;++O)V[O]=Z[O]-S[2+4*O]*H}},m.idle=function(y){if(!(y<this.lastT())){for(var k=this._components,f=k.length-16,S=0;S<16;++S)k.push(k[f++]);this._time.push(y)}},m.flush=function(y){var k=a.gt(this._time,y)-2;k<0||(this._time.splice(0,k),this._components.splice(0,16*k))},m.lastT=function(){return this._time[this._time.length-1]},m.lookAt=function(y,k,f,S){this.recalcMatrix(y),k=k||this.computedEye,f=f||g,S=S||this.computedUp,this.setMatrix(y,p(this.computedMatrix,k,f,S));for(var M=0,E=0;E<3;++E)M+=Math.pow(f[E]-k[E],2);M=Math.log(Math.sqrt(M)),this.computedRadius[0]=M},m.rotate=function(y,k,f,S){this.recalcMatrix(y);var M=this.computedInverse;k&&o(M,M,k),f&&l(M,M,f),S&&u(M,M,S),this.setMatrix(y,r(this.computedMatrix,M))};var x=[0,0,0];m.pan=function(y,k,f,S){x[0]=-(k||0),x[1]=-(f||0),x[2]=-(S||0),this.recalcMatrix(y);var M=this.computedInverse;c(M,M,x),this.setMatrix(y,r(M,M))},m.translate=function(y,k,f,S){x[0]=k||0,x[1]=f||0,x[2]=S||0,this.recalcMatrix(y);var M=this.computedMatrix;c(M,M,x),this.setMatrix(y,M)},m.setMatrix=function(y,k){if(!(y<this.lastT())){this._time.push(y);for(var f=0;f<16;++f)this._components.push(k[f])}},m.setDistance=function(y,k){this.computedRadius[0]=k},m.setDistanceLimits=function(y,k){var f=this._limits;f[0]=y,f[1]=k},m.getDistanceLimits=function(y){var k=this._limits;return y?(y[0]=k[0],y[1]=k[1],y):k}},3266:function(h,s,t){h.exports=function(n){var r=n.length;if(r<3){for(var l=new Array(r),o=0;o<r;++o)l[o]=o;return r===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:l}var u=new Array(r);for(o=0;o<r;++o)u[o]=o;u.sort(function(k,f){return n[k][0]-n[f][0]||n[k][1]-n[f][1]});var p=[u[0],u[1]],c=[u[0],u[1]];for(o=2;o<r;++o){for(var b=u[o],g=n[b],d=p.length;d>1&&a(n[p[d-2]],n[p[d-1]],g)<=0;)d-=1,p.pop();for(p.push(b),d=c.length;d>1&&a(n[c[d-2]],n[c[d-1]],g)>=0;)d-=1,c.pop();c.push(b)}l=new Array(c.length+p.length-2);for(var m=0,x=(o=0,p.length);o<x;++o)l[m++]=p[o];for(var y=c.length-2;y>0;--y)l[m++]=c[y];return l};var a=t(417)[3]},6145:function(h,s,t){h.exports=function(n,r){r||(r=n,n=window);var l=0,o=0,u=0,p={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function b(E){var O=!1;return"altKey"in E&&(O=O||E.altKey!==p.alt,p.alt=!!E.altKey),"shiftKey"in E&&(O=O||E.shiftKey!==p.shift,p.shift=!!E.shiftKey),"ctrlKey"in E&&(O=O||E.ctrlKey!==p.control,p.control=!!E.ctrlKey),"metaKey"in E&&(O=O||E.metaKey!==p.meta,p.meta=!!E.metaKey),O}function g(E,O){var P=a.x(O),I=a.y(O);"buttons"in O&&(E=0|O.buttons),(E!==l||P!==o||I!==u||b(O))&&(l=0|E,o=P||0,u=I||0,r&&r(l,o,u,p))}function d(E){g(0,E)}function m(){(l||o||u||p.shift||p.alt||p.meta||p.control)&&(o=u=0,l=0,p.shift=p.alt=p.control=p.meta=!1,r&&r(0,0,0,p))}function x(E){b(E)&&r&&r(l,o,u,p)}function y(E){a.buttons(E)===0?g(0,E):g(l,E)}function k(E){g(l|a.buttons(E),E)}function f(E){g(l&~a.buttons(E),E)}function S(){c||(c=!0,n.addEventListener("mousemove",y),n.addEventListener("mousedown",k),n.addEventListener("mouseup",f),n.addEventListener("mouseleave",d),n.addEventListener("mouseenter",d),n.addEventListener("mouseout",d),n.addEventListener("mouseover",d),n.addEventListener("blur",m),n.addEventListener("keyup",x),n.addEventListener("keydown",x),n.addEventListener("keypress",x),n!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",x),window.addEventListener("keydown",x),window.addEventListener("keypress",x)))}S();var M={element:n};return Object.defineProperties(M,{enabled:{get:function(){return c},set:function(E){E?S():c&&(c=!1,n.removeEventListener("mousemove",y),n.removeEventListener("mousedown",k),n.removeEventListener("mouseup",f),n.removeEventListener("mouseleave",d),n.removeEventListener("mouseenter",d),n.removeEventListener("mouseout",d),n.removeEventListener("mouseover",d),n.removeEventListener("blur",m),n.removeEventListener("keyup",x),n.removeEventListener("keydown",x),n.removeEventListener("keypress",x),n!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",x),window.removeEventListener("keydown",x),window.removeEventListener("keypress",x)))},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),M};var a=t(4110)},2565:function(h){var s={left:0,top:0};h.exports=function(t,a,n){a=a||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r,l=t.clientX||0,o=t.clientY||0,u=(r=a)===window||r===document||r===document.body?s:r.getBoundingClientRect();return n[0]=l-u.left,n[1]=o-u.top,n}},4110:function(h,s){function t(a){return a.target||a.srcElement||window}s.buttons=function(a){if(typeof a=="object"){if("buttons"in a)return a.buttons;if("which"in a){if((n=a.which)===2)return 4;if(n===3)return 2;if(n>0)return 1<<n-1}else if("button"in a){var n;if((n=a.button)===1)return 4;if(n===2)return 2;if(n>=0)return 1<<n}}return 0},s.element=t,s.x=function(a){if(typeof a=="object"){if("offsetX"in a)return a.offsetX;var n=t(a).getBoundingClientRect();return a.clientX-n.left}return 0},s.y=function(a){if(typeof a=="object"){if("offsetY"in a)return a.offsetY;var n=t(a).getBoundingClientRect();return a.clientY-n.top}return 0}},6475:function(h,s,t){var a=t(14);h.exports=function(n,r,l){typeof n=="function"&&(l=!!r,r=n,n=window);var o=a("ex",n),u=function(p){l&&p.preventDefault();var c=p.deltaX||0,b=p.deltaY||0,g=p.deltaZ||0,d=1;switch(p.deltaMode){case 1:d=o;break;case 2:d=window.innerHeight}if(b*=d,g*=d,(c*=d)||b||g)return r(c,b,g,p)};return n.addEventListener("wheel",u),u}},9284:function(h,s,t){var a=t(5306);h.exports=function(r){function l(g){throw new Error("ndarray-extract-contour: "+g)}typeof r!="object"&&l("Must specify arguments");var o=r.order;Array.isArray(o)||l("Must specify order");var u=r.arrayArguments||1;u<1&&l("Must have at least one array argument"),(r.scalarArguments||0)<0&&l("Scalar arg count must be > 0"),typeof r.vertex!="function"&&l("Must specify vertex creation function"),typeof r.cell!="function"&&l("Must specify cell creation function"),typeof r.phase!="function"&&l("Must specify phase function");for(var p=r.getters||[],c=new Array(u),b=0;b<u;++b)p.indexOf(b)>=0?c[b]=!0:c[b]=!1;return function(g,d,m,x,y,k){var f=[k,y].join(",");return(0,n[f])(g,d,m,a.mallocUint32,a.freeUint32)}(r.vertex,r.cell,r.phase,0,o,c)};var n={"false,0,1":function(r,l,o,u,p){return function(c,b,g,d){var m,x=0|c.shape[0],y=0|c.shape[1],k=c.data,f=0|c.offset,S=0|c.stride[0],M=0|c.stride[1],E=f,O=0|-S,P=0,I=0|-M,z=0,U=-S-M|0,R=0,j=0|S,Z=M-S*x|0,F=0,V=0,H=0,te=2*x|0,$=u(te),J=u(te),X=0,K=0,ee=-1,ie=-1,ae=0,oe=0|-x,fe=0|x,ge=0,ve=-x-1|0,xe=x-1|0,_e=0,ye=0,Ce=0;for(F=0;F<x;++F)$[X++]=o(k[E],b,g,d),E+=j;if(E+=Z,y>0){if(V=1,$[X++]=o(k[E],b,g,d),E+=j,x>0)for(F=1,m=k[E],K=$[X]=o(m,b,g,d),ae=$[X+ee],ge=$[X+oe],_e=$[X+ve],K===ae&&K===ge&&K===_e||(P=k[E+O],z=k[E+I],R=k[E+U],r(F,V,m,P,z,R,K,ae,ge,_e,b,g,d),ye=J[X]=H++),X+=1,E+=j,F=2;F<x;++F)m=k[E],K=$[X]=o(m,b,g,d),ae=$[X+ee],ge=$[X+oe],_e=$[X+ve],K===ae&&K===ge&&K===_e||(P=k[E+O],z=k[E+I],R=k[E+U],r(F,V,m,P,z,R,K,ae,ge,_e,b,g,d),ye=J[X]=H++,_e!==ae&&l(J[X+ee],ye,R,P,_e,ae,b,g,d)),X+=1,E+=j;for(E+=Z,X=0,Ce=ee,ee=ie,ie=Ce,Ce=oe,oe=fe,fe=Ce,Ce=ve,ve=xe,xe=Ce,V=2;V<y;++V){if($[X++]=o(k[E],b,g,d),E+=j,x>0)for(F=1,m=k[E],K=$[X]=o(m,b,g,d),ae=$[X+ee],ge=$[X+oe],_e=$[X+ve],K===ae&&K===ge&&K===_e||(P=k[E+O],z=k[E+I],R=k[E+U],r(F,V,m,P,z,R,K,ae,ge,_e,b,g,d),ye=J[X]=H++,_e!==ge&&l(J[X+oe],ye,z,R,ge,_e,b,g,d)),X+=1,E+=j,F=2;F<x;++F)m=k[E],K=$[X]=o(m,b,g,d),ae=$[X+ee],ge=$[X+oe],_e=$[X+ve],K===ae&&K===ge&&K===_e||(P=k[E+O],z=k[E+I],R=k[E+U],r(F,V,m,P,z,R,K,ae,ge,_e,b,g,d),ye=J[X]=H++,_e!==ge&&l(J[X+oe],ye,z,R,ge,_e,b,g,d),_e!==ae&&l(J[X+ee],ye,R,P,_e,ae,b,g,d)),X+=1,E+=j;1&V&&(X=0),Ce=ee,ee=ie,ie=Ce,Ce=oe,oe=fe,fe=Ce,Ce=ve,ve=xe,xe=Ce,E+=Z}}p(J),p($)}},"false,1,0":function(r,l,o,u,p){return function(c,b,g,d){var m,x=0|c.shape[0],y=0|c.shape[1],k=c.data,f=0|c.offset,S=0|c.stride[0],M=0|c.stride[1],E=f,O=0|-S,P=0,I=0|-M,z=0,U=-S-M|0,R=0,j=0|M,Z=S-M*y|0,F=0,V=0,H=0,te=2*y|0,$=u(te),J=u(te),X=0,K=0,ee=-1,ie=-1,ae=0,oe=0|-y,fe=0|y,ge=0,ve=-y-1|0,xe=y-1|0,_e=0,ye=0,Ce=0;for(V=0;V<y;++V)$[X++]=o(k[E],b,g,d),E+=j;if(E+=Z,x>0){if(F=1,$[X++]=o(k[E],b,g,d),E+=j,y>0)for(V=1,m=k[E],K=$[X]=o(m,b,g,d),ge=$[X+oe],ae=$[X+ee],_e=$[X+ve],K===ge&&K===ae&&K===_e||(P=k[E+O],z=k[E+I],R=k[E+U],r(F,V,m,P,z,R,K,ge,ae,_e,b,g,d),ye=J[X]=H++),X+=1,E+=j,V=2;V<y;++V)m=k[E],K=$[X]=o(m,b,g,d),ge=$[X+oe],ae=$[X+ee],_e=$[X+ve],K===ge&&K===ae&&K===_e||(P=k[E+O],z=k[E+I],R=k[E+U],r(F,V,m,P,z,R,K,ge,ae,_e,b,g,d),ye=J[X]=H++,_e!==ae&&l(J[X+ee],ye,z,R,ae,_e,b,g,d)),X+=1,E+=j;for(E+=Z,X=0,Ce=oe,oe=fe,fe=Ce,Ce=ee,ee=ie,ie=Ce,Ce=ve,ve=xe,xe=Ce,F=2;F<x;++F){if($[X++]=o(k[E],b,g,d),E+=j,y>0)for(V=1,m=k[E],K=$[X]=o(m,b,g,d),ge=$[X+oe],ae=$[X+ee],_e=$[X+ve],K===ge&&K===ae&&K===_e||(P=k[E+O],z=k[E+I],R=k[E+U],r(F,V,m,P,z,R,K,ge,ae,_e,b,g,d),ye=J[X]=H++,_e!==ge&&l(J[X+oe],ye,R,P,_e,ge,b,g,d)),X+=1,E+=j,V=2;V<y;++V)m=k[E],K=$[X]=o(m,b,g,d),ge=$[X+oe],ae=$[X+ee],_e=$[X+ve],K===ge&&K===ae&&K===_e||(P=k[E+O],z=k[E+I],R=k[E+U],r(F,V,m,P,z,R,K,ge,ae,_e,b,g,d),ye=J[X]=H++,_e!==ae&&l(J[X+ee],ye,z,R,ae,_e,b,g,d),_e!==ge&&l(J[X+oe],ye,R,P,_e,ge,b,g,d)),X+=1,E+=j;1&F&&(X=0),Ce=oe,oe=fe,fe=Ce,Ce=ee,ee=ie,ie=Ce,Ce=ve,ve=xe,xe=Ce,E+=Z}}p(J),p($)}}}},9144:function(h,s,t){var a=t(3094),n={zero:function(x,y,k,f){var S=x[0];f|=0;var M=0,E=k[0];for(M=0;M<S;++M)y[f]=0,f+=E},fdTemplate1:function(x,y,k,f,S,M,E){var O=x[0],P=k[0],I=-1*P,z=P;f|=0,E|=0;var U=0,R=P,j=M[0];for(U=0;U<O;++U)S[E]=.5*(y[f+I]-y[f+z]),f+=R,E+=j},fdTemplate2:function(x,y,k,f,S,M,E,O,P,I){var z=x[0],U=x[1],R=k[0],j=k[1],Z=M[0],F=M[1],V=P[0],H=P[1],te=-1*R,$=R,J=-1*j,X=j;f|=0,E|=0,I|=0;var K=0,ee=0,ie=j,ae=R-U*j,oe=F,fe=Z-U*F,ge=H,ve=V-U*H;for(ee=0;ee<z;++ee){for(K=0;K<U;++K)S[E]=.5*(y[f+te]-y[f+$]),O[I]=.5*(y[f+J]-y[f+X]),f+=ie,E+=oe,I+=ge;f+=ae,E+=fe,I+=ve}}},r={cdiff:function(x){var y={};return function(k,f,S){var M=k.dtype,E=k.order,O=f.dtype,P=f.order,I=S.dtype,z=S.order,U=[M,E.join(),O,P.join(),I,z.join()].join(),R=y[U];return R||(y[U]=R=x([M,E,O,P,I,z])),R(k.shape.slice(0),k.data,k.stride,0|k.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}},zero:function(x){var y={};return function(k){var f=k.dtype,S=k.order,M=[f,S.join()].join(),E=y[M];return E||(y[M]=E=x([f,S])),E(k.shape.slice(0),k.data,k.stride,0|k.offset)}},fdTemplate1:function(x){var y={};return function(k,f){var S=k.dtype,M=k.order,E=f.dtype,O=f.order,P=[S,M.join(),E,O.join()].join(),I=y[P];return I||(y[P]=I=x([S,M,E,O])),I(k.shape.slice(0),k.data,k.stride,0|k.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(x){var y={};return function(k,f,S){var M=k.dtype,E=k.order,O=f.dtype,P=f.order,I=S.dtype,z=S.order,U=[M,E.join(),O,P.join(),I,z.join()].join(),R=y[U];return R||(y[U]=R=x([M,E,O,P,I,z])),R(k.shape.slice(0),k.data,k.stride,0|k.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}}};function l(x){return(0,r[x.funcName])(o.bind(void 0,x))}function o(x){return n[x.funcName]}function u(x){return l({funcName:x.funcName})}var p={},c={},b=u({funcName:"cdiff"}),g=u({funcName:"zero"});function d(x){return x in p?p[x]:p[x]=u({funcName:"fdTemplate"+x})}function m(x,y,k,f){return function(S,M){var E=M.shape.slice();return E[0]>2&&E[1]>2&&f(M.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(k(M.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),y(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(k(M.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),y(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(k(M.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),y(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(k(M.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),y(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}h.exports=function(x,y,k){return Array.isArray(k)||(k=a(y.dimension,typeof k=="string"?k:"clamp")),y.size===0?x:y.dimension===0?(x.set(0),x):function(f){var S=f.join();if(P=c[S])return P;for(var M=f.length,E=[b,g],O=1;O<=M;++O)E.push(d(O));var P=m.apply(void 0,E);return c[S]=P,P}(k)(x,y)}},3581:function(h){function s(r,l){var o=Math.floor(l),u=l-o,p=0<=o&&o<r.shape[0],c=0<=o+1&&o+1<r.shape[0];return(1-u)*(p?+r.get(o):0)+u*(c?+r.get(o+1):0)}function t(r,l,o){var u=Math.floor(l),p=l-u,c=0<=u&&u<r.shape[0],b=0<=u+1&&u+1<r.shape[0],g=Math.floor(o),d=o-g,m=0<=g&&g<r.shape[1],x=0<=g+1&&g+1<r.shape[1],y=c&&m?r.get(u,g):0,k=c&&x?r.get(u,g+1):0;return(1-d)*((1-p)*y+p*(b&&m?r.get(u+1,g):0))+d*((1-p)*k+p*(b&&x?r.get(u+1,g+1):0))}function a(r,l,o,u){var p=Math.floor(l),c=l-p,b=0<=p&&p<r.shape[0],g=0<=p+1&&p+1<r.shape[0],d=Math.floor(o),m=o-d,x=0<=d&&d<r.shape[1],y=0<=d+1&&d+1<r.shape[1],k=Math.floor(u),f=u-k,S=0<=k&&k<r.shape[2],M=0<=k+1&&k+1<r.shape[2],E=b&&x&&S?r.get(p,d,k):0,O=b&&y&&S?r.get(p,d+1,k):0,P=g&&x&&S?r.get(p+1,d,k):0,I=g&&y&&S?r.get(p+1,d+1,k):0,z=b&&x&&M?r.get(p,d,k+1):0,U=b&&y&&M?r.get(p,d+1,k+1):0;return(1-f)*((1-m)*((1-c)*E+c*P)+m*((1-c)*O+c*I))+f*((1-m)*((1-c)*z+c*(g&&x&&M?r.get(p+1,d,k+1):0))+m*((1-c)*U+c*(g&&y&&M?r.get(p+1,d+1,k+1):0)))}function n(r){var l,o,u=0|r.shape.length,p=new Array(u),c=new Array(u),b=new Array(u),g=new Array(u);for(l=0;l<u;++l)o=+arguments[l+1],p[l]=Math.floor(o),c[l]=o-p[l],b[l]=0<=p[l]&&p[l]<r.shape[l],g[l]=0<=p[l]+1&&p[l]+1<r.shape[l];var d,m,x,y=0;e:for(l=0;l<1<<u;++l){for(m=1,x=r.offset,d=0;d<u;++d)if(l&1<<d){if(!g[d])continue e;m*=c[d],x+=r.stride[d]*(p[d]+1)}else{if(!b[d])continue e;m*=1-c[d],x+=r.stride[d]*p[d]}y+=m*r.data[x]}return y}h.exports=function(r,l,o,u){switch(r.shape.length){case 0:return 0;case 1:return s(r,l);case 2:return t(r,l,o);case 3:return a(r,l,o,u);default:return n.apply(void 0,arguments)}},h.exports.d1=s,h.exports.d2=t,h.exports.d3=a},7498:function(h,s){var t={"float64,2,1,0":function(){return function(o,u,p,c,b){var g=o[0],d=o[1],m=o[2],x=p[0],y=p[1],k=p[2];c|=0;var f=0,S=0,M=0,E=k,O=y-m*k,P=x-d*y;for(M=0;M<g;++M){for(S=0;S<d;++S){for(f=0;f<m;++f)u[c]/=b,c+=E;c+=O}c+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(o,u,p,c,b,g,d,m){for(var x=o[0],y=o[1],k=o[2],f=p[0],S=p[1],M=p[2],E=g[0],O=g[1],P=g[2],I=c|=0,z=d|=0,U=0|o[0];U>0;){U<64?(x=U,U=0):(x=64,U-=64);for(var R=0|o[1];R>0;){R<64?(y=R,R=0):(y=64,R-=64),c=I+U*f+R*S,d=z+U*E+R*O;var j=0,Z=0,F=0,V=M,H=f-k*M,te=S-x*f,$=P,J=E-k*P,X=O-x*E;for(F=0;F<y;++F){for(Z=0;Z<x;++Z){for(j=0;j<k;++j)u[c]=b[d]*m,c+=V,d+=$;c+=H,d+=J}c+=te,d+=X}}}}},"float32,1,0,float32,1,0":function(){return function(o,u,p,c,b,g,d){var m=o[0],x=o[1],y=p[0],k=p[1],f=g[0],S=g[1];c|=0,d|=0;var M=0,E=0,O=k,P=y-x*k,I=S,z=f-x*S;for(E=0;E<m;++E){for(M=0;M<x;++M)u[c]=b[d],c+=O,d+=I;c+=P,d+=z}}},"float32,1,0,float32,0,1":function(){return function(o,u,p,c,b,g,d){for(var m=o[0],x=o[1],y=p[0],k=p[1],f=g[0],S=g[1],M=c|=0,E=d|=0,O=0|o[1];O>0;){O<64?(x=O,O=0):(x=64,O-=64);for(var P=0|o[0];P>0;){P<64?(m=P,P=0):(m=64,P-=64),c=M+O*k+P*y,d=E+O*S+P*f;var I=0,z=0,U=k,R=y-x*k,j=S,Z=f-x*S;for(z=0;z<m;++z){for(I=0;I<x;++I)u[c]=b[d],c+=U,d+=j;c+=R,d+=Z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(o,u,p,c,b,g,d){for(var m=o[0],x=o[1],y=o[2],k=p[0],f=p[1],S=p[2],M=g[0],E=g[1],O=g[2],P=c|=0,I=d|=0,z=0|o[2];z>0;){z<64?(y=z,z=0):(y=64,z-=64);for(var U=0|o[0];U>0;){U<64?(m=U,U=0):(m=64,U-=64);for(var R=0|o[1];R>0;){R<64?(x=R,R=0):(x=64,R-=64),c=P+z*S+U*k+R*f,d=I+z*O+U*M+R*E;var j=0,Z=0,F=0,V=S,H=k-y*S,te=f-m*k,$=O,J=M-y*O,X=E-m*M;for(F=0;F<x;++F){for(Z=0;Z<m;++Z){for(j=0;j<y;++j)u[c]=b[d],c+=V,d+=$;c+=H,d+=J}c+=te,d+=X}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(o,u,p,c,b,g,d){var m=o[0],x=o[1],y=o[2],k=p[0],f=p[1],S=p[2],M=g[0],E=g[1],O=g[2];c|=0,d|=0;var P=0,I=0,z=0,U=S,R=k-y*S,j=f-m*k,Z=O,F=M-y*O,V=E-m*M;for(z=0;z<x;++z){for(I=0;I<m;++I){for(P=0;P<y;++P)u[c]=b[d],c+=U,d+=Z;c+=R,d+=F}c+=j,d+=V}}}},a=function(o,u){var p=u.join(",");return(0,t[p])()},n={mul:function(o){var u={};return function(p,c,b){var g=p.dtype,d=p.order,m=c.dtype,x=c.order,y=b.dtype,k=b.order,f=[g,d.join(),m,x.join(),y,k.join()].join(),S=u[f];return S||(u[f]=S=o([g,d,m,x,y,k])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,b.data,b.stride,0|b.offset)}},muls:function(o){var u={};return function(p,c,b){var g=p.dtype,d=p.order,m=c.dtype,x=c.order,y=[g,d.join(),m,x.join()].join(),k=u[y];return k||(u[y]=k=o([g,d,m,x])),k(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,b)}},mulseq:function(o){var u={};return function(p,c){var b=p.dtype,g=p.order,d=[b,g.join()].join(),m=u[d];return m||(u[d]=m=o([b,g])),m(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},div:function(o){var u={};return function(p,c,b){var g=p.dtype,d=p.order,m=c.dtype,x=c.order,y=b.dtype,k=b.order,f=[g,d.join(),m,x.join(),y,k.join()].join(),S=u[f];return S||(u[f]=S=o([g,d,m,x,y,k])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,b.data,b.stride,0|b.offset)}},divs:function(o){var u={};return function(p,c,b){var g=p.dtype,d=p.order,m=c.dtype,x=c.order,y=[g,d.join(),m,x.join()].join(),k=u[y];return k||(u[y]=k=o([g,d,m,x])),k(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,b)}},divseq:function(o){var u={};return function(p,c){var b=p.dtype,g=p.order,d=[b,g.join()].join(),m=u[d];return m||(u[d]=m=o([b,g])),m(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},assign:function(o){var u={};return function(p,c){var b=p.dtype,g=p.order,d=c.dtype,m=c.order,x=[b,g.join(),d,m.join()].join(),y=u[x];return y||(u[x]=y=o([b,g,d,m])),y(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset)}}};function r(o){return u={funcName:o.funcName},(0,n[u.funcName])(a.bind(void 0,u));var u}var l={mul:"*",div:"/"};(function(){for(var o in l)s[o]=r({funcName:o}),s[o+"s"]=r({funcName:o+"s"}),s[o+"seq"]=r({funcName:o+"seq"})})(),s.assign=r({funcName:"assign"})},7382:function(h,s,t){var a=t(5050),n=t(9262);h.exports=function(r,l){for(var o=[],u=r,p=1;Array.isArray(u);)o.push(u.length),p*=u.length,u=u[0];return o.length===0?a():(l||(l=a(new Float64Array(p),o)),n(l,r),l)}},9262:function(h){h.exports=function(s){var t={};return function(a,n){var r=a.dtype,l=a.order,o=[r,l.join()].join(),u=t[o];return u||(t[o]=u=s([r,l])),u(a.shape.slice(0),a.data,a.stride,0|a.offset,n)}}((function(){return function(s,t,a,n,r){var l=s[0],o=s[1],u=s[2],p=a[0],c=a[1],b=a[2],g=[0,0,0];n|=0;var d=0,m=0,x=0,y=b,k=c-u*b,f=p-o*c;for(x=0;x<l;++x){for(m=0;m<o;++m){for(d=0;d<u;++d){var S,M=r;for(S=0;S<g.length-1;++S)M=M[g[S]];t[n]=M[g[g.length-1]],n+=y,++g[2]}n+=k,g[2]-=u,++g[1]}n+=f,g[1]-=o,++g[0]}}}).bind(void 0,{funcName:"convert"}))},8139:function(h,s,t){var a=t(5306);function n(u){return u==="uint32"?[a.mallocUint32,a.freeUint32]:null}var r={"uint32,1,0":function(u,p){return function(c,b,g,d,m,x,y,k,f,S,M){var E,O,P,I,z,U,R,j,Z=c*m+d,F=u(k);for(E=c+1;E<=b;++E){for(O=E,P=Z+=m,z=0,U=Z,I=0;I<k;++I)F[z++]=g[U],U+=f;e:for(;O-- >c;){z=0,U=P-m;t:for(I=0;I<k;++I){if((R=g[U])<(j=F[z]))break e;if(R>j)break t;U+=S,z+=M}for(z=P,U=P-m,I=0;I<k;++I)g[z]=g[U],z+=f,U+=f;P-=m}for(z=P,U=0,I=0;I<k;++I)g[z]=F[U++],z+=f}p(F)}}},l={"uint32,1,0":function(u,p,c){return function b(g,d,m,x,y,k,f,S,M,E,O){var P,I,z,U,R,j,Z,F,V,H,te,$,J,X,K,ee,ie,ae,oe,fe,ge,ve,xe,_e,ye,Ce=(d-g+1)/6|0,ke=g+Ce,Te=d-Ce,le=g+d>>1,ue=le-Ce,de=le+Ce,Le=ke,we=ue,Ee=le,Oe=de,Fe=Te,pe=g+1,be=d-1,Me=!0,De=0,Ne=0,Be=0,Ye=S,We=p(Ye),et=p(Ye);te=y*Le,$=y*we,ye=x;e:for(H=0;H<S;++H){if(F=$+ye,(Be=m[Z=te+ye]-m[F])>0){I=Le,Le=we,we=I;break e}if(Be<0)break e;ye+=E}te=y*Oe,$=y*Fe,ye=x;e:for(H=0;H<S;++H){if(F=$+ye,(Be=m[Z=te+ye]-m[F])>0){I=Oe,Oe=Fe,Fe=I;break e}if(Be<0)break e;ye+=E}te=y*Le,$=y*Ee,ye=x;e:for(H=0;H<S;++H){if(F=$+ye,(Be=m[Z=te+ye]-m[F])>0){I=Le,Le=Ee,Ee=I;break e}if(Be<0)break e;ye+=E}te=y*we,$=y*Ee,ye=x;e:for(H=0;H<S;++H){if(F=$+ye,(Be=m[Z=te+ye]-m[F])>0){I=we,we=Ee,Ee=I;break e}if(Be<0)break e;ye+=E}te=y*Le,$=y*Oe,ye=x;e:for(H=0;H<S;++H){if(F=$+ye,(Be=m[Z=te+ye]-m[F])>0){I=Le,Le=Oe,Oe=I;break e}if(Be<0)break e;ye+=E}te=y*Ee,$=y*Oe,ye=x;e:for(H=0;H<S;++H){if(F=$+ye,(Be=m[Z=te+ye]-m[F])>0){I=Ee,Ee=Oe,Oe=I;break e}if(Be<0)break e;ye+=E}te=y*we,$=y*Fe,ye=x;e:for(H=0;H<S;++H){if(F=$+ye,(Be=m[Z=te+ye]-m[F])>0){I=we,we=Fe,Fe=I;break e}if(Be<0)break e;ye+=E}te=y*we,$=y*Ee,ye=x;e:for(H=0;H<S;++H){if(F=$+ye,(Be=m[Z=te+ye]-m[F])>0){I=we,we=Ee,Ee=I;break e}if(Be<0)break e;ye+=E}te=y*Oe,$=y*Fe,ye=x;e:for(H=0;H<S;++H){if(F=$+ye,(Be=m[Z=te+ye]-m[F])>0){I=Oe,Oe=Fe,Fe=I;break e}if(Be<0)break e;ye+=E}for(te=y*Le,$=y*we,J=y*Ee,X=y*Oe,K=y*Fe,ee=y*ke,ie=y*le,ae=y*Te,_e=0,ye=x,H=0;H<S;++H)Z=te+ye,F=$+ye,V=J+ye,oe=X+ye,fe=K+ye,ge=ee+ye,ve=ie+ye,xe=ae+ye,We[_e]=m[F],et[_e]=m[oe],Me=Me&&We[_e]===et[_e],z=m[Z],U=m[V],R=m[fe],m[ge]=z,m[ve]=U,m[xe]=R,++_e,ye+=M;for(te=y*ue,$=y*g,ye=x,H=0;H<S;++H)F=$+ye,m[Z=te+ye]=m[F],ye+=M;for(te=y*de,$=y*d,ye=x,H=0;H<S;++H)F=$+ye,m[Z=te+ye]=m[F],ye+=M;if(Me)for(j=pe;j<=be;++j){for(Z=x+j*y,_e=0,H=0;H<S&&(Be=m[Z]-We[_e])==0;++H)_e+=O,Z+=E;if(Be!==0)if(Be<0){if(j!==pe)for(te=y*j,$=y*pe,ye=x,H=0;H<S;++H)F=$+ye,P=m[Z=te+ye],m[Z]=m[F],m[F]=P,ye+=M;++pe}else for(;;){for(Z=x+be*y,_e=0,H=0;H<S&&(Be=m[Z]-We[_e])==0;++H)_e+=O,Z+=E;if(!(Be>0)){if(Be<0){for(te=y*j,$=y*pe,J=y*be,ye=x,H=0;H<S;++H)F=$+ye,V=J+ye,P=m[Z=te+ye],m[Z]=m[F],m[F]=m[V],m[V]=P,ye+=M;++pe,--be;break}for(te=y*j,$=y*be,ye=x,H=0;H<S;++H)F=$+ye,P=m[Z=te+ye],m[Z]=m[F],m[F]=P,ye+=M;--be;break}be--}}else for(j=pe;j<=be;++j){for(Z=x+j*y,_e=0,H=0;H<S&&(De=m[Z]-We[_e])==0;++H)_e+=O,Z+=E;if(De<0){if(j!==pe)for(te=y*j,$=y*pe,ye=x,H=0;H<S;++H)F=$+ye,P=m[Z=te+ye],m[Z]=m[F],m[F]=P,ye+=M;++pe}else{for(Z=x+j*y,_e=0,H=0;H<S&&(Ne=m[Z]-et[_e])==0;++H)_e+=O,Z+=E;if(Ne>0)for(;;){for(Z=x+be*y,_e=0,H=0;H<S&&(Be=m[Z]-et[_e])==0;++H)_e+=O,Z+=E;if(!(Be>0)){for(Z=x+be*y,_e=0,H=0;H<S&&(Be=m[Z]-We[_e])==0;++H)_e+=O,Z+=E;if(Be<0){for(te=y*j,$=y*pe,J=y*be,ye=x,H=0;H<S;++H)F=$+ye,V=J+ye,P=m[Z=te+ye],m[Z]=m[F],m[F]=m[V],m[V]=P,ye+=M;++pe,--be}else{for(te=y*j,$=y*be,ye=x,H=0;H<S;++H)F=$+ye,P=m[Z=te+ye],m[Z]=m[F],m[F]=P,ye+=M;--be}break}if(--be<j)break}}}for(te=y*g,$=y*(pe-1),_e=0,ye=x,H=0;H<S;++H)F=$+ye,m[Z=te+ye]=m[F],m[F]=We[_e],++_e,ye+=M;for(te=y*d,$=y*(be+1),_e=0,ye=x,H=0;H<S;++H)F=$+ye,m[Z=te+ye]=m[F],m[F]=et[_e],++_e,ye+=M;if(pe-2-g<=32?u(g,pe-2,m,x,y,k,f,S,M,E,O):b(g,pe-2,m,x,y,k,f,S,M,E,O),d-(be+2)<=32?u(be+2,d,m,x,y,k,f,S,M,E,O):b(be+2,d,m,x,y,k,f,S,M,E,O),Me)return c(We),void c(et);if(pe<ke&&be>Te){e:for(;;){for(Z=x+pe*y,_e=0,ye=x,H=0;H<S;++H){if(m[Z]!==We[_e])break e;++_e,Z+=M}++pe}e:for(;;){for(Z=x+be*y,_e=0,ye=x,H=0;H<S;++H){if(m[Z]!==et[_e])break e;++_e,Z+=M}--be}for(j=pe;j<=be;++j){for(Z=x+j*y,_e=0,H=0;H<S&&(De=m[Z]-We[_e])==0;++H)_e+=O,Z+=E;if(De===0){if(j!==pe)for(te=y*j,$=y*pe,ye=x,H=0;H<S;++H)F=$+ye,P=m[Z=te+ye],m[Z]=m[F],m[F]=P,ye+=M;++pe}else{for(Z=x+j*y,_e=0,H=0;H<S&&(Ne=m[Z]-et[_e])==0;++H)_e+=O,Z+=E;if(Ne===0)for(;;){for(Z=x+be*y,_e=0,H=0;H<S&&(Be=m[Z]-et[_e])==0;++H)_e+=O,Z+=E;if(Be!==0){for(Z=x+be*y,_e=0,H=0;H<S&&(Be=m[Z]-We[_e])==0;++H)_e+=O,Z+=E;if(Be<0){for(te=y*j,$=y*pe,J=y*be,ye=x,H=0;H<S;++H)F=$+ye,V=J+ye,P=m[Z=te+ye],m[Z]=m[F],m[F]=m[V],m[V]=P,ye+=M;++pe,--be}else{for(te=y*j,$=y*be,ye=x,H=0;H<S;++H)F=$+ye,P=m[Z=te+ye],m[Z]=m[F],m[F]=P,ye+=M;--be}break}if(--be<j)break}}}}c(We),c(et),be-pe<=32?u(pe,be,m,x,y,k,f,S,M,E,O):b(pe,be,m,x,y,k,f,S,M,E,O)}}},o={"uint32,1,0":function(u,p){return function(c){var b=c.data,g=0|c.offset,d=c.shape,m=c.stride,x=0|m[0],y=0|d[0],k=0|m[1],f=0|d[1],S=k,M=k;y<=32?u(0,y-1,b,g,x,k,y,f,S,M,1):p(0,y-1,b,g,x,k,y,f,S,M,1)}}};h.exports=function(u,p){var c=[p,u].join(","),b=o[c],g=function(m,x){var y=n(x),k=[x,m].join(","),f=r[k];return y?f(y[0],y[1]):f()}(u,p),d=function(m,x,y){var k=n(x),f=[x,m].join(","),S=l[f];return m.length>1&&k?S(y,k[0],k[1]):S(y)}(u,p,g);return b(g,d)}},8729:function(h,s,t){var a=t(8139),n={};h.exports=function(r){var l=r.order,o=r.dtype,u=[l,o].join(":"),p=n[u];return p||(n[u]=p=a(l,o)),p(r),r}},5050:function(h,s,t){var a=t(4780),n=typeof Float64Array<"u";function r(c,b){return c[0]-b[0]}function l(){var c,b=this.stride,g=new Array(b.length);for(c=0;c<g.length;++c)g[c]=[Math.abs(b[c]),c];g.sort(r);var d=new Array(g.length);for(c=0;c<d.length;++c)d[c]=g[c][1];return d}var o={T:function(c){function b(d){this.data=d}var g=b.prototype;return g.dtype=c,g.index=function(){return-1},g.size=0,g.dimension=-1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new b(this.data)},g.get=g.set=function(){},g.pick=function(){return null},function(d){return new b(d)}},0:function(c,b){function g(m,x){this.data=m,this.offset=x}var d=g.prototype;return d.dtype=c,d.index=function(){return this.offset},d.dimension=0,d.size=1,d.shape=d.stride=d.order=[],d.lo=d.hi=d.transpose=d.step=function(){return new g(this.data,this.offset)},d.pick=function(){return b(this.data)},d.valueOf=d.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},d.set=function(m){return c==="generic"?this.data.set(this.offset,m):this.data[this.offset]=m},function(m,x,y,k){return new g(m,k)}},1:function(c,b,g){function d(x,y,k,f){this.data=x,this.shape=[y],this.stride=[k],this.offset=0|f}var m=d.prototype;return m.dtype=c,m.dimension=1,Object.defineProperty(m,"size",{get:function(){return this.shape[0]}}),m.order=[0],m.set=function(x,y){return c==="generic"?this.data.set(this.offset+this.stride[0]*x,y):this.data[this.offset+this.stride[0]*x]=y},m.get=function(x){return c==="generic"?this.data.get(this.offset+this.stride[0]*x):this.data[this.offset+this.stride[0]*x]},m.index=function(x){return this.offset+this.stride[0]*x},m.hi=function(x){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,this.stride[0],this.offset)},m.lo=function(x){var y=this.offset,k=0,f=this.shape[0],S=this.stride[0];return typeof x=="number"&&x>=0&&(y+=S*(k=0|x),f-=k),new d(this.data,f,S,y)},m.step=function(x){var y=this.shape[0],k=this.stride[0],f=this.offset,S=0,M=Math.ceil;return typeof x=="number"&&((S=0|x)<0?(f+=k*(y-1),y=M(-y/S)):y=M(y/S),k*=S),new d(this.data,y,k,f)},m.transpose=function(x){x=x===void 0?0:0|x;var y=this.shape,k=this.stride;return new d(this.data,y[x],k[x],this.offset)},m.pick=function(x){var y=[],k=[],f=this.offset;return typeof x=="number"&&x>=0?f=f+this.stride[0]*x|0:(y.push(this.shape[0]),k.push(this.stride[0])),(0,b[y.length+1])(this.data,y,k,f)},function(x,y,k,f){return new d(x,y[0],k[0],f)}},2:function(c,b,g){function d(x,y,k,f,S,M){this.data=x,this.shape=[y,k],this.stride=[f,S],this.offset=0|M}var m=d.prototype;return m.dtype=c,m.dimension=2,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(m,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),m.set=function(x,y,k){return c==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y,k):this.data[this.offset+this.stride[0]*x+this.stride[1]*y]=k},m.get=function(x,y){return c==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y):this.data[this.offset+this.stride[0]*x+this.stride[1]*y]},m.index=function(x,y){return this.offset+this.stride[0]*x+this.stride[1]*y},m.hi=function(x,y){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,this.stride[0],this.stride[1],this.offset)},m.lo=function(x,y){var k=this.offset,f=0,S=this.shape[0],M=this.shape[1],E=this.stride[0],O=this.stride[1];return typeof x=="number"&&x>=0&&(k+=E*(f=0|x),S-=f),typeof y=="number"&&y>=0&&(k+=O*(f=0|y),M-=f),new d(this.data,S,M,E,O,k)},m.step=function(x,y){var k=this.shape[0],f=this.shape[1],S=this.stride[0],M=this.stride[1],E=this.offset,O=0,P=Math.ceil;return typeof x=="number"&&((O=0|x)<0?(E+=S*(k-1),k=P(-k/O)):k=P(k/O),S*=O),typeof y=="number"&&((O=0|y)<0?(E+=M*(f-1),f=P(-f/O)):f=P(f/O),M*=O),new d(this.data,k,f,S,M,E)},m.transpose=function(x,y){x=x===void 0?0:0|x,y=y===void 0?1:0|y;var k=this.shape,f=this.stride;return new d(this.data,k[x],k[y],f[x],f[y],this.offset)},m.pick=function(x,y){var k=[],f=[],S=this.offset;return typeof x=="number"&&x>=0?S=S+this.stride[0]*x|0:(k.push(this.shape[0]),f.push(this.stride[0])),typeof y=="number"&&y>=0?S=S+this.stride[1]*y|0:(k.push(this.shape[1]),f.push(this.stride[1])),(0,b[k.length+1])(this.data,k,f,S)},function(x,y,k,f){return new d(x,y[0],y[1],k[0],k[1],f)}},3:function(c,b,g){function d(x,y,k,f,S,M,E,O){this.data=x,this.shape=[y,k,f],this.stride=[S,M,E],this.offset=0|O}var m=d.prototype;return m.dtype=c,m.dimension=3,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(m,"order",{get:function(){var x=Math.abs(this.stride[0]),y=Math.abs(this.stride[1]),k=Math.abs(this.stride[2]);return x>y?y>k?[2,1,0]:x>k?[1,2,0]:[1,0,2]:x>k?[2,0,1]:k>y?[0,1,2]:[0,2,1]}}),m.set=function(x,y,k,f){return c==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k,f):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k]=f},m.get=function(x,y,k){return c==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k]},m.index=function(x,y,k){return this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k},m.hi=function(x,y,k){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,typeof k!="number"||k<0?this.shape[2]:0|k,this.stride[0],this.stride[1],this.stride[2],this.offset)},m.lo=function(x,y,k){var f=this.offset,S=0,M=this.shape[0],E=this.shape[1],O=this.shape[2],P=this.stride[0],I=this.stride[1],z=this.stride[2];return typeof x=="number"&&x>=0&&(f+=P*(S=0|x),M-=S),typeof y=="number"&&y>=0&&(f+=I*(S=0|y),E-=S),typeof k=="number"&&k>=0&&(f+=z*(S=0|k),O-=S),new d(this.data,M,E,O,P,I,z,f)},m.step=function(x,y,k){var f=this.shape[0],S=this.shape[1],M=this.shape[2],E=this.stride[0],O=this.stride[1],P=this.stride[2],I=this.offset,z=0,U=Math.ceil;return typeof x=="number"&&((z=0|x)<0?(I+=E*(f-1),f=U(-f/z)):f=U(f/z),E*=z),typeof y=="number"&&((z=0|y)<0?(I+=O*(S-1),S=U(-S/z)):S=U(S/z),O*=z),typeof k=="number"&&((z=0|k)<0?(I+=P*(M-1),M=U(-M/z)):M=U(M/z),P*=z),new d(this.data,f,S,M,E,O,P,I)},m.transpose=function(x,y,k){x=x===void 0?0:0|x,y=y===void 0?1:0|y,k=k===void 0?2:0|k;var f=this.shape,S=this.stride;return new d(this.data,f[x],f[y],f[k],S[x],S[y],S[k],this.offset)},m.pick=function(x,y,k){var f=[],S=[],M=this.offset;return typeof x=="number"&&x>=0?M=M+this.stride[0]*x|0:(f.push(this.shape[0]),S.push(this.stride[0])),typeof y=="number"&&y>=0?M=M+this.stride[1]*y|0:(f.push(this.shape[1]),S.push(this.stride[1])),typeof k=="number"&&k>=0?M=M+this.stride[2]*k|0:(f.push(this.shape[2]),S.push(this.stride[2])),(0,b[f.length+1])(this.data,f,S,M)},function(x,y,k,f){return new d(x,y[0],y[1],y[2],k[0],k[1],k[2],f)}},4:function(c,b,g){function d(x,y,k,f,S,M,E,O,P,I){this.data=x,this.shape=[y,k,f,S],this.stride=[M,E,O,P],this.offset=0|I}var m=d.prototype;return m.dtype=c,m.dimension=4,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(m,"order",{get:g}),m.set=function(x,y,k,f,S){return c==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f,S):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f]=S},m.get=function(x,y,k,f){return c==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f]},m.index=function(x,y,k,f){return this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f},m.hi=function(x,y,k,f){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,typeof k!="number"||k<0?this.shape[2]:0|k,typeof f!="number"||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},m.lo=function(x,y,k,f){var S=this.offset,M=0,E=this.shape[0],O=this.shape[1],P=this.shape[2],I=this.shape[3],z=this.stride[0],U=this.stride[1],R=this.stride[2],j=this.stride[3];return typeof x=="number"&&x>=0&&(S+=z*(M=0|x),E-=M),typeof y=="number"&&y>=0&&(S+=U*(M=0|y),O-=M),typeof k=="number"&&k>=0&&(S+=R*(M=0|k),P-=M),typeof f=="number"&&f>=0&&(S+=j*(M=0|f),I-=M),new d(this.data,E,O,P,I,z,U,R,j,S)},m.step=function(x,y,k,f){var S=this.shape[0],M=this.shape[1],E=this.shape[2],O=this.shape[3],P=this.stride[0],I=this.stride[1],z=this.stride[2],U=this.stride[3],R=this.offset,j=0,Z=Math.ceil;return typeof x=="number"&&((j=0|x)<0?(R+=P*(S-1),S=Z(-S/j)):S=Z(S/j),P*=j),typeof y=="number"&&((j=0|y)<0?(R+=I*(M-1),M=Z(-M/j)):M=Z(M/j),I*=j),typeof k=="number"&&((j=0|k)<0?(R+=z*(E-1),E=Z(-E/j)):E=Z(E/j),z*=j),typeof f=="number"&&((j=0|f)<0?(R+=U*(O-1),O=Z(-O/j)):O=Z(O/j),U*=j),new d(this.data,S,M,E,O,P,I,z,U,R)},m.transpose=function(x,y,k,f){x=x===void 0?0:0|x,y=y===void 0?1:0|y,k=k===void 0?2:0|k,f=f===void 0?3:0|f;var S=this.shape,M=this.stride;return new d(this.data,S[x],S[y],S[k],S[f],M[x],M[y],M[k],M[f],this.offset)},m.pick=function(x,y,k,f){var S=[],M=[],E=this.offset;return typeof x=="number"&&x>=0?E=E+this.stride[0]*x|0:(S.push(this.shape[0]),M.push(this.stride[0])),typeof y=="number"&&y>=0?E=E+this.stride[1]*y|0:(S.push(this.shape[1]),M.push(this.stride[1])),typeof k=="number"&&k>=0?E=E+this.stride[2]*k|0:(S.push(this.shape[2]),M.push(this.stride[2])),typeof f=="number"&&f>=0?E=E+this.stride[3]*f|0:(S.push(this.shape[3]),M.push(this.stride[3])),(0,b[S.length+1])(this.data,S,M,E)},function(x,y,k,f){return new d(x,y[0],y[1],y[2],y[3],k[0],k[1],k[2],k[3],f)}},5:function(c,b,g){function d(x,y,k,f,S,M,E,O,P,I,z,U){this.data=x,this.shape=[y,k,f,S,M],this.stride=[E,O,P,I,z],this.offset=0|U}var m=d.prototype;return m.dtype=c,m.dimension=5,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(m,"order",{get:g}),m.set=function(x,y,k,f,S,M){return c==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f+this.stride[4]*S,M):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f+this.stride[4]*S]=M},m.get=function(x,y,k,f,S){return c==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f+this.stride[4]*S):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f+this.stride[4]*S]},m.index=function(x,y,k,f,S){return this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*k+this.stride[3]*f+this.stride[4]*S},m.hi=function(x,y,k,f,S){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,typeof k!="number"||k<0?this.shape[2]:0|k,typeof f!="number"||f<0?this.shape[3]:0|f,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},m.lo=function(x,y,k,f,S){var M=this.offset,E=0,O=this.shape[0],P=this.shape[1],I=this.shape[2],z=this.shape[3],U=this.shape[4],R=this.stride[0],j=this.stride[1],Z=this.stride[2],F=this.stride[3],V=this.stride[4];return typeof x=="number"&&x>=0&&(M+=R*(E=0|x),O-=E),typeof y=="number"&&y>=0&&(M+=j*(E=0|y),P-=E),typeof k=="number"&&k>=0&&(M+=Z*(E=0|k),I-=E),typeof f=="number"&&f>=0&&(M+=F*(E=0|f),z-=E),typeof S=="number"&&S>=0&&(M+=V*(E=0|S),U-=E),new d(this.data,O,P,I,z,U,R,j,Z,F,V,M)},m.step=function(x,y,k,f,S){var M=this.shape[0],E=this.shape[1],O=this.shape[2],P=this.shape[3],I=this.shape[4],z=this.stride[0],U=this.stride[1],R=this.stride[2],j=this.stride[3],Z=this.stride[4],F=this.offset,V=0,H=Math.ceil;return typeof x=="number"&&((V=0|x)<0?(F+=z*(M-1),M=H(-M/V)):M=H(M/V),z*=V),typeof y=="number"&&((V=0|y)<0?(F+=U*(E-1),E=H(-E/V)):E=H(E/V),U*=V),typeof k=="number"&&((V=0|k)<0?(F+=R*(O-1),O=H(-O/V)):O=H(O/V),R*=V),typeof f=="number"&&((V=0|f)<0?(F+=j*(P-1),P=H(-P/V)):P=H(P/V),j*=V),typeof S=="number"&&((V=0|S)<0?(F+=Z*(I-1),I=H(-I/V)):I=H(I/V),Z*=V),new d(this.data,M,E,O,P,I,z,U,R,j,Z,F)},m.transpose=function(x,y,k,f,S){x=x===void 0?0:0|x,y=y===void 0?1:0|y,k=k===void 0?2:0|k,f=f===void 0?3:0|f,S=S===void 0?4:0|S;var M=this.shape,E=this.stride;return new d(this.data,M[x],M[y],M[k],M[f],M[S],E[x],E[y],E[k],E[f],E[S],this.offset)},m.pick=function(x,y,k,f,S){var M=[],E=[],O=this.offset;return typeof x=="number"&&x>=0?O=O+this.stride[0]*x|0:(M.push(this.shape[0]),E.push(this.stride[0])),typeof y=="number"&&y>=0?O=O+this.stride[1]*y|0:(M.push(this.shape[1]),E.push(this.stride[1])),typeof k=="number"&&k>=0?O=O+this.stride[2]*k|0:(M.push(this.shape[2]),E.push(this.stride[2])),typeof f=="number"&&f>=0?O=O+this.stride[3]*f|0:(M.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?O=O+this.stride[4]*S|0:(M.push(this.shape[4]),E.push(this.stride[4])),(0,b[M.length+1])(this.data,M,E,O)},function(x,y,k,f){return new d(x,y[0],y[1],y[2],y[3],y[4],k[0],k[1],k[2],k[3],k[4],f)}}};function u(c,b){var g=b===-1?"T":String(b),d=o[g];return b===-1?d(c):b===0?d(c,p[c][0]):d(c,p[c],l)}var p={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};h.exports=function(c,b,g,d){if(c===void 0)return(0,p.array[0])([]);typeof c=="number"&&(c=[c]),b===void 0&&(b=[c.length]);var m=b.length;if(g===void 0){g=new Array(m);for(var x=m-1,y=1;x>=0;--x)g[x]=y,y*=b[x]}if(d===void 0)for(d=0,x=0;x<m;++x)g[x]<0&&(d-=(b[x]-1)*g[x]);for(var k=function(S){if(a(S))return"buffer";if(n)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(c),f=p[k];f.length<=m+1;)f.push(u(k,f.length-1));return(0,f[m+1])(c,b,g,d)}},8551:function(h,s,t){var a=t(8362),n=Math.pow(2,-1074),r=-1>>>0;h.exports=function(l,o){if(isNaN(l)||isNaN(o))return NaN;if(l===o)return l;if(l===0)return o<0?-n:n;var u=a.hi(l),p=a.lo(l);return o>l==l>0?p===r?(u+=1,p=0):p+=1:p===0?(p=r,u-=1):p-=1,a.pack(p,u)}},115:function(h,s){s.vertexNormals=function(t,a,n){for(var r=a.length,l=new Array(r),o=n===void 0?1e-6:n,u=0;u<r;++u)l[u]=[0,0,0];for(u=0;u<t.length;++u)for(var p=t[u],c=0,b=p[p.length-1],g=p[0],d=0;d<p.length;++d){c=b,b=g,g=p[(d+1)%p.length];for(var m=a[c],x=a[b],y=a[g],k=new Array(3),f=0,S=new Array(3),M=0,E=0;E<3;++E)k[E]=m[E]-x[E],f+=k[E]*k[E],S[E]=y[E]-x[E],M+=S[E]*S[E];if(f*M>o){var O=l[b],P=1/Math.sqrt(f*M);for(E=0;E<3;++E){var I=(E+1)%3,z=(E+2)%3;O[E]+=P*(S[I]*k[z]-S[z]*k[I])}}}for(u=0;u<r;++u){O=l[u];var U=0;for(E=0;E<3;++E)U+=O[E]*O[E];if(U>o)for(P=1/Math.sqrt(U),E=0;E<3;++E)O[E]*=P;else for(E=0;E<3;++E)O[E]=0}return l},s.faceNormals=function(t,a,n){for(var r=t.length,l=new Array(r),o=n===void 0?1e-6:n,u=0;u<r;++u){for(var p=t[u],c=new Array(3),b=0;b<3;++b)c[b]=a[p[b]];var g=new Array(3),d=new Array(3);for(b=0;b<3;++b)g[b]=c[1][b]-c[0][b],d[b]=c[2][b]-c[0][b];var m=new Array(3),x=0;for(b=0;b<3;++b){var y=(b+1)%3,k=(b+2)%3;m[b]=g[y]*d[k]-g[k]*d[y],x+=m[b]*m[b]}for(x=x>o?1/Math.sqrt(x):0,b=0;b<3;++b)m[b]*=x;l[u]=m}return l}},567:function(h){h.exports=function(s,t,a,n,r,l,o,u,p,c){var b=t+l+c;if(g>0){var g=Math.sqrt(b+1);s[0]=.5*(o-p)/g,s[1]=.5*(u-n)/g,s[2]=.5*(a-l)/g,s[3]=.5*g}else{var d=Math.max(t,l,c);g=Math.sqrt(2*d-b+1),t>=d?(s[0]=.5*g,s[1]=.5*(r+a)/g,s[2]=.5*(u+n)/g,s[3]=.5*(o-p)/g):l>=d?(s[0]=.5*(a+r)/g,s[1]=.5*g,s[2]=.5*(p+o)/g,s[3]=.5*(u-n)/g):(s[0]=.5*(n+u)/g,s[1]=.5*(o+p)/g,s[2]=.5*g,s[3]=.5*(a-r)/g)}return s}},7774:function(h,s,t){h.exports=function(d){var m=(d=d||{}).center||[0,0,0],x=d.rotation||[0,0,0,1],y=d.radius||1;m=[].slice.call(m,0,3),c(x=[].slice.call(x,0,4),x);var k=new b(x,m,Math.log(y));return k.setDistanceLimits(d.zoomMin,d.zoomMax),("eye"in d||"up"in d)&&k.lookAt(0,d.eye,d.center,d.up),k};var a=t(8444),n=t(3012),r=t(5950),l=t(7437),o=t(567);function u(d,m,x){return Math.sqrt(Math.pow(d,2)+Math.pow(m,2)+Math.pow(x,2))}function p(d,m,x,y){return Math.sqrt(Math.pow(d,2)+Math.pow(m,2)+Math.pow(x,2)+Math.pow(y,2))}function c(d,m){var x=m[0],y=m[1],k=m[2],f=m[3],S=p(x,y,k,f);S>1e-6?(d[0]=x/S,d[1]=y/S,d[2]=k/S,d[3]=f/S):(d[0]=d[1]=d[2]=0,d[3]=1)}function b(d,m,x){this.radius=a([x]),this.center=a(m),this.rotation=a(d),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=b.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(d){this.radius.curve(d),this.center.curve(d),this.rotation.curve(d);var m=this.computedRotation;c(m,m);var x=this.computedMatrix;r(x,m);var y=this.computedCenter,k=this.computedEye,f=this.computedUp,S=Math.exp(this.computedRadius[0]);k[0]=y[0]+S*x[2],k[1]=y[1]+S*x[6],k[2]=y[2]+S*x[10],f[0]=x[1],f[1]=x[5],f[2]=x[9];for(var M=0;M<3;++M){for(var E=0,O=0;O<3;++O)E+=x[M+4*O]*k[O];x[12+M]=-E}},g.getMatrix=function(d,m){this.recalcMatrix(d);var x=this.computedMatrix;if(m){for(var y=0;y<16;++y)m[y]=x[y];return m}return x},g.idle=function(d){this.center.idle(d),this.radius.idle(d),this.rotation.idle(d)},g.flush=function(d){this.center.flush(d),this.radius.flush(d),this.rotation.flush(d)},g.pan=function(d,m,x,y){m=m||0,x=x||0,y=y||0,this.recalcMatrix(d);var k=this.computedMatrix,f=k[1],S=k[5],M=k[9],E=u(f,S,M);f/=E,S/=E,M/=E;var O=k[0],P=k[4],I=k[8],z=O*f+P*S+I*M,U=u(O-=f*z,P-=S*z,I-=M*z);O/=U,P/=U,I/=U,k[2],k[6],k[10];var R=O*m+f*x,j=P*m+S*x,Z=I*m+M*x;this.center.move(d,R,j,Z);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+y),this.radius.set(d,Math.log(F))},g.rotate=function(d,m,x,y){this.recalcMatrix(d),m=m||0,x=x||0;var k=this.computedMatrix,f=k[0],S=k[4],M=k[8],E=k[1],O=k[5],P=k[9],I=k[2],z=k[6],U=k[10],R=m*f+x*E,j=m*S+x*O,Z=m*M+x*P,F=-(z*Z-U*j),V=-(U*R-I*Z),H=-(I*j-z*R),te=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(V,2)-Math.pow(H,2))),$=p(F,V,H,te);$>1e-6?(F/=$,V/=$,H/=$,te/=$):(F=V=H=0,te=1);var J=this.computedRotation,X=J[0],K=J[1],ee=J[2],ie=J[3],ae=X*te+ie*F+K*H-ee*V,oe=K*te+ie*V+ee*F-X*H,fe=ee*te+ie*H+X*V-K*F,ge=ie*te-X*F-K*V-ee*H;if(y){F=I,V=z,H=U;var ve=Math.sin(y)/u(F,V,H);F*=ve,V*=ve,H*=ve,ge=ge*(te=Math.cos(m))-(ae=ae*te+ge*F+oe*H-fe*V)*F-(oe=oe*te+ge*V+fe*F-ae*H)*V-(fe=fe*te+ge*H+ae*V-oe*F)*H}var xe=p(ae,oe,fe,ge);xe>1e-6?(ae/=xe,oe/=xe,fe/=xe,ge/=xe):(ae=oe=fe=0,ge=1),this.rotation.set(d,ae,oe,fe,ge)},g.lookAt=function(d,m,x,y){this.recalcMatrix(d),x=x||this.computedCenter,m=m||this.computedEye,y=y||this.computedUp;var k=this.computedMatrix;n(k,m,x,y);var f=this.computedRotation;o(f,k[0],k[1],k[2],k[4],k[5],k[6],k[8],k[9],k[10]),c(f,f),this.rotation.set(d,f[0],f[1],f[2],f[3]);for(var S=0,M=0;M<3;++M)S+=Math.pow(x[M]-m[M],2);this.radius.set(d,.5*Math.log(Math.max(S,1e-6))),this.center.set(d,x[0],x[1],x[2])},g.translate=function(d,m,x,y){this.center.move(d,m||0,x||0,y||0)},g.setMatrix=function(d,m){var x=this.computedRotation;o(x,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),c(x,x),this.rotation.set(d,x[0],x[1],x[2],x[3]);var y=this.computedMatrix;l(y,m);var k=y[15];if(Math.abs(k)>1e-6){var f=y[12]/k,S=y[13]/k,M=y[14]/k;this.recalcMatrix(d);var E=Math.exp(this.computedRadius[0]);this.center.set(d,f-y[2]*E,S-y[6]*E,M-y[10]*E),this.radius.idle(d)}else this.center.idle(d),this.radius.idle(d)},g.setDistance=function(d,m){m>0&&this.radius.set(d,Math.log(m))},g.setDistanceLimits=function(d,m){d=d>0?Math.log(d):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(d){var m=this.radius.bounds;return d?(d[0]=Math.exp(m[0][0]),d[1]=Math.exp(m[1][0]),d):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(d){var m=this.lastT(),x=d.center;x&&this.center.set(m,x[0],x[1],x[2]);var y=d.rotation;y&&this.rotation.set(m,y[0],y[1],y[2],y[3]);var k=d.distance;k&&k>0&&this.radius.set(m,Math.log(k)),this.setDistanceLimits(d.zoomMin,d.zoomMax)}},4930:function(h,s,t){var a=t(6184);h.exports=function(n,r,l){return a(l=l!==void 0?l+"":" ",r)+n}},4405:function(h){h.exports=function(s,t){t||(t=[0,""]),s=String(s);var a=parseFloat(s,10);return t[0]=a,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(h,s,t){h.exports=function(n,r){for(var l=0|r.length,o=n.length,u=[new Array(l),new Array(l)],p=0;p<l;++p)u[0][p]=[],u[1][p]=[];for(p=0;p<o;++p){var c=n[p];u[0][c[0]].push(c),u[1][c[1]].push(c)}var b=[];for(p=0;p<l;++p)u[0][p].length+u[1][p].length===0&&b.push([p]);function g(S,M){var E=u[M][S[M]];E.splice(E.indexOf(S),1)}function d(S,M,E){for(var O,P,I,z=0;z<2;++z)if(u[z][M].length>0){O=u[z][M][0],I=z;break}P=O[1^I];for(var U=0;U<2;++U)for(var R=u[U][M],j=0;j<R.length;++j){var Z=R[j],F=Z[1^U];a(r[S],r[M],r[P],r[F])>0&&(O=Z,P=F,I=U)}return E||O&&g(O,I),P}function m(S,M){var E=u[M][S][0],O=[S];g(E,M);for(var P=E[1^M];;){for(;P!==S;)O.push(P),P=d(O[O.length-2],P,!1);if(u[0][S].length+u[1][S].length===0)break;var I=O[O.length-1],z=S,U=O[1],R=d(I,z,!0);if(a(r[I],r[z],r[U],r[R])<0)break;O.push(S),P=d(I,z)}return O}function x(S,M){return M[1]===M[M.length-1]}for(p=0;p<l;++p)for(var y=0;y<2;++y){for(var k=[];u[y][p].length>0;){u[0][p].length;var f=m(p,y);x(0,f)?k.push.apply(k,f):(k.length>0&&b.push(k),k=f)}k.length>0&&b.push(k)}return b};var a=t(9398)},3959:function(h,s,t){h.exports=function(n,r){for(var l=a(n,r.length),o=new Array(r.length),u=new Array(r.length),p=[],c=0;c<r.length;++c){var b=l[c].length;u[c]=b,o[c]=!0,b<=1&&p.push(c)}for(;p.length>0;){o[y=p.pop()]=!1;var g=l[y];for(c=0;c<g.length;++c){var d=g[c];--u[d]==0&&p.push(d)}}var m=new Array(r.length),x=[];for(c=0;c<r.length;++c)if(o[c]){var y=x.length;m[c]=y,x.push(r[c])}else m[c]=-1;var k=[];for(c=0;c<n.length;++c){var f=n[c];o[f[0]]&&o[f[1]]&&k.push([m[f[0]],m[f[1]]])}return[k,x]};var a=t(8348)},8040:function(h,s,t){h.exports=function(b,g){var d=p(b,g);b=d[0];for(var m=(g=d[1]).length,x=(b.length,a(b,g.length)),y=0;y<m;++y)if(x[y].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var k=n(b,g),f=(k=k.filter(function(Ce){for(var ke=Ce.length,Te=[0],le=0;le<ke;++le){var ue=g[Ce[le]],de=g[Ce[(le+1)%ke]],Le=l(-ue[0],ue[1]),we=l(-ue[0],de[1]),Ee=l(de[0],ue[1]),Oe=l(de[0],de[1]);Te=o(Te,o(o(Le,we),o(Ee,Oe)))}return Te[Te.length-1]>0})).length,S=new Array(f),M=new Array(f);for(y=0;y<f;++y){S[y]=y;var E=new Array(f),O=k[y].map(function(Ce){return g[Ce]}),P=r([O]),I=0;e:for(var z=0;z<f;++z)if(E[z]=0,y!==z){for(var U=(_e=k[z]).length,R=0;R<U;++R){var j=P(g[_e[R]]);if(j!==0){j<0&&(E[z]=1,I+=1);continue e}}E[z]=1,I+=1}M[y]=[I,y,E]}for(M.sort(function(Ce,ke){return ke[0]-Ce[0]}),y=0;y<f;++y){var Z=(E=M[y])[1],F=E[2];for(z=0;z<f;++z)F[z]&&(S[z]=Z)}var V=function(Ce){for(var ke=new Array(Ce),Te=0;Te<Ce;++Te)ke[Te]=[];return ke}(f);for(y=0;y<f;++y)V[y].push(S[y]),V[S[y]].push(y);var H={},te=c(m,!1);for(y=0;y<f;++y)for(U=(_e=k[y]).length,z=0;z<U;++z){var $=_e[z],J=_e[(z+1)%U],X=Math.min($,J)+":"+Math.max($,J);if(X in H){var K=H[X];V[K].push(y),V[y].push(K),te[$]=te[J]=!0}else H[X]=y}function ee(Ce){for(var ke=Ce.length,Te=0;Te<ke;++Te)if(!te[Ce[Te]])return!1;return!0}var ie=[],ae=c(f,-1);for(y=0;y<f;++y)S[y]!==y||ee(k[y])?ae[y]=-1:(ie.push(y),ae[y]=0);for(d=[];ie.length>0;){var oe=ie.pop(),fe=V[oe];u(fe,function(Ce,ke){return Ce-ke});var ge,ve=fe.length,xe=ae[oe];for(xe===0&&(ge=[_e=k[oe]]),y=0;y<ve;++y){var _e,ye=fe[y];ae[ye]>=0||(ae[ye]=1^xe,ie.push(ye),xe===0&&(ee(_e=k[ye])||(_e.reverse(),ge.push(_e))))}xe===0&&d.push(ge)}return d};var a=t(8348),n=t(4166),r=t(211),l=t(9660),o=t(9662),u=t(1215),p=t(3959);function c(b,g){for(var d=new Array(b),m=0;m<b;++m)d[m]=g;return d}},211:function(h,s,t){h.exports=function(c){for(var b=c.length,g=[],d=[],m=0;m<b;++m)for(var x=c[m],y=x.length,k=y-1,f=0;f<y;k=f++){var S=x[k],M=x[f];S[0]===M[0]?d.push([S,M]):g.push([S,M])}if(g.length===0)return d.length===0?p:(E=u(d),function(I){return E(I[0],I[1])?0:1});var E,O=n(g),P=function(I,z){return function(U){var R=l.le(z,U[0]);if(R<0)return 1;var j=I[R];if(!j){if(!(R>0&&z[R]===U[0]))return 1;j=I[R-1]}for(var Z=1;j;){var F=j.key,V=a(U,F[0],F[1]);if(F[0][0]<F[1][0])if(V<0)j=j.left;else{if(!(V>0))return 0;Z=-1,j=j.right}else if(V>0)j=j.left;else{if(!(V<0))return 0;Z=1,j=j.right}}return Z}}(O.slabs,O.coordinates);return d.length===0?P:function(I,z){return function(U){return I(U[0],U[1])?0:z(U)}}(u(d),P)};var a=t(417)[3],n=t(4385),r=t(9014),l=t(5070);function o(){return!0}function u(c){for(var b={},g=0;g<c.length;++g){var d=c[g],m=d[0][0],x=d[0][1],y=d[1][1],k=[Math.min(x,y),Math.max(x,y)];m in b?b[m].push(k):b[m]=[k]}var f={},S=Object.keys(b);for(g=0;g<S.length;++g){var M=b[S[g]];f[S[g]]=r(M)}return function(E){return function(O,P){var I=E[O];return!!I&&!!I.queryPoint(P,o)}}(f)}function p(c){return 1}},7309:function(h){var s=new Float64Array(4),t=new Float64Array(4),a=new Float64Array(4);h.exports=function(n,r,l,o,u){s.length<o.length&&(s=new Float64Array(o.length),t=new Float64Array(o.length),a=new Float64Array(o.length));for(var p=0;p<o.length;++p)s[p]=n[p]-o[p],t[p]=r[p]-n[p],a[p]=l[p]-n[p];var c=0,b=0,g=0,d=0,m=0,x=0;for(p=0;p<o.length;++p){var y=t[p],k=a[p],f=s[p];c+=y*y,b+=y*k,g+=k*k,d+=f*y,m+=f*k,x+=f*f}var S,M,E,O,P,I=Math.abs(c*g-b*b),z=b*m-g*d,U=b*d-c*m;if(z+U<=I)if(z<0)U<0&&d<0?(U=0,-d>=c?(z=1,S=c+2*d+x):S=d*(z=-d/c)+x):(z=0,m>=0?(U=0,S=x):-m>=g?(U=1,S=g+2*m+x):S=m*(U=-m/g)+x);else if(U<0)U=0,d>=0?(z=0,S=x):-d>=c?(z=1,S=c+2*d+x):S=d*(z=-d/c)+x;else{var R=1/I;S=(z*=R)*(c*z+b*(U*=R)+2*d)+U*(b*z+g*U+2*m)+x}else z<0?(E=g+m)>(M=b+d)?(O=E-M)>=(P=c-2*b+g)?(z=1,U=0,S=c+2*d+x):S=(z=O/P)*(c*z+b*(U=1-z)+2*d)+U*(b*z+g*U+2*m)+x:(z=0,E<=0?(U=1,S=g+2*m+x):m>=0?(U=0,S=x):S=m*(U=-m/g)+x):U<0?(E=c+d)>(M=b+m)?(O=E-M)>=(P=c-2*b+g)?(U=1,z=0,S=g+2*m+x):S=(z=1-(U=O/P))*(c*z+b*U+2*d)+U*(b*z+g*U+2*m)+x:(U=0,E<=0?(z=1,S=c+2*d+x):d>=0?(z=0,S=x):S=d*(z=-d/c)+x):(O=g+m-b-d)<=0?(z=0,U=1,S=g+2*m+x):O>=(P=c-2*b+g)?(z=1,U=0,S=c+2*d+x):S=(z=O/P)*(c*z+b*(U=1-z)+2*d)+U*(b*z+g*U+2*m)+x;var j=1-z-U;for(p=0;p<o.length;++p)u[p]=j*n[p]+z*r[p]+U*l[p];return S<0?0:S}},1116:function(h,s,t){h.exports=t(6093)},7584:function(h,s,t){var a=t(1539);h.exports=function(n,r){for(var l=n.length,o=new Array(l),u=0;u<l;++u)o[u]=a(n[u],r[u]);return o}},2826:function(h,s,t){h.exports=function(n){for(var r=new Array(n.length),l=0;l<n.length;++l)r[l]=a(n[l]);return r};var a=t(5125)},4469:function(h,s,t){var a=t(5125),n=t(3962);h.exports=function(r,l){for(var o=a(l),u=r.length,p=new Array(u),c=0;c<u;++c)p[c]=n(r[c],o);return p}},6695:function(h,s,t){var a=t(4354);h.exports=function(n,r){for(var l=n.length,o=new Array(l),u=0;u<l;++u)o[u]=a(n[u],r[u]);return o}},7037:function(h,s,t){var a=t(9209),n=t(1284),r=t(9887);h.exports=function(l){l.sort(n);for(var o=l.length,u=0,p=0;p<o;++p){var c=l[p],b=r(c);if(b!==0){if(u>0){var g=l[u-1];if(a(c,g)===0&&r(g)!==b){u-=1;continue}}l[u++]=c}}return l.length=u,l}},6184:function(h){var s,t="";h.exports=function(a,n){if(typeof a!="string")throw new TypeError("expected a string");if(n===1)return a;if(n===2)return a+a;var r=a.length*n;if(s!==a||s===void 0)s=a,t="";else if(t.length>=r)return t.substr(0,r);for(;r>t.length&&n>1;)1&n&&(t+=a),n>>=1,a+=a;return t=(t+=a).substr(0,r)}},8161:function(h,s,t){h.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(h){h.exports=function(s){for(var t=s.length,a=s[s.length-1],n=t,r=t-2;r>=0;--r){var l=a;(p=(u=s[r])-((a=l+u)-l))&&(s[--n]=a,a=p)}var o=0;for(r=n;r<t;++r){var u,p;(p=(u=a)-((a=(l=s[r])+u)-l))&&(s[o++]=p)}return s[o++]=a,s.length=o,s}},8167:function(h,s,t){var a=t(9660),n=t(9662),r=t(8289),l=t(402);function o(m,x,y,k){return function(f){return k(m(y(f[0][0],f[1][1]),y(-f[0][1],f[1][0])))}}function u(m,x,y,k){return function(f){return k(m(x(m(y(f[1][1],f[2][2]),y(-f[1][2],f[2][1])),f[0][0]),m(x(m(y(f[1][0],f[2][2]),y(-f[1][2],f[2][0])),-f[0][1]),x(m(y(f[1][0],f[2][1]),y(-f[1][1],f[2][0])),f[0][2]))))}}function p(m,x,y,k){return function(f){return k(m(m(x(m(x(m(y(f[2][2],f[3][3]),y(-f[2][3],f[3][2])),f[1][1]),m(x(m(y(f[2][1],f[3][3]),y(-f[2][3],f[3][1])),-f[1][2]),x(m(y(f[2][1],f[3][2]),y(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),x(m(x(m(y(f[2][2],f[3][3]),y(-f[2][3],f[3][2])),f[1][0]),m(x(m(y(f[2][0],f[3][3]),y(-f[2][3],f[3][0])),-f[1][2]),x(m(y(f[2][0],f[3][2]),y(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),m(x(m(x(m(y(f[2][1],f[3][3]),y(-f[2][3],f[3][1])),f[1][0]),m(x(m(y(f[2][0],f[3][3]),y(-f[2][3],f[3][0])),-f[1][1]),x(m(y(f[2][0],f[3][1]),y(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),x(m(x(m(y(f[2][1],f[3][2]),y(-f[2][2],f[3][1])),f[1][0]),m(x(m(y(f[2][0],f[3][2]),y(-f[2][2],f[3][0])),-f[1][1]),x(m(y(f[2][0],f[3][1]),y(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function c(m,x,y,k){return function(f){return k(m(m(x(m(m(x(m(x(m(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][2]),m(x(m(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),-f[2][3]),x(m(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),x(m(x(m(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][1]),m(x(m(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),-f[2][3]),x(m(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),m(x(m(x(m(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),f[2][1]),m(x(m(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),-f[2][2]),x(m(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),x(m(x(m(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][1]),m(x(m(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),-f[2][2]),x(m(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),x(m(m(x(m(x(m(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][2]),m(x(m(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),-f[2][3]),x(m(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),x(m(x(m(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][0]),m(x(m(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][3]),x(m(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),m(x(m(x(m(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),f[2][0]),m(x(m(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][2]),x(m(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),x(m(x(m(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][0]),m(x(m(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),-f[2][2]),x(m(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),m(x(m(m(x(m(x(m(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][1]),m(x(m(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),-f[2][3]),x(m(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),x(m(x(m(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][0]),m(x(m(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][3]),x(m(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),m(x(m(x(m(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),f[2][0]),m(x(m(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][1]),x(m(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),x(m(x(m(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),f[2][0]),m(x(m(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),-f[2][1]),x(m(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),m(x(m(m(x(m(x(m(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),f[2][1]),m(x(m(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),-f[2][2]),x(m(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),x(m(x(m(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),f[2][0]),m(x(m(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][2]),x(m(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),m(x(m(x(m(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),f[2][0]),m(x(m(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][1]),x(m(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),x(m(x(m(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][0]),m(x(m(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),-f[2][1]),x(m(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),x(m(m(x(m(x(m(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][1]),m(x(m(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),-f[2][2]),x(m(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),x(m(x(m(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][0]),m(x(m(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),-f[2][2]),x(m(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),m(x(m(x(m(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),f[2][0]),m(x(m(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),-f[2][1]),x(m(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),x(m(x(m(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][0]),m(x(m(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),-f[2][1]),x(m(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function b(m){return(m===2?o:m===3?u:m===4?p:m===5?c:void 0)(n,r,a,l)}var g=[function(){return[0]},function(m){return[m[0][0]]}];function d(m,x,y,k,f,S,M,E){return function(O){switch(O.length){case 0:return m(O);case 1:return x(O);case 2:return y(O);case 3:return k(O);case 4:return f(O);case 5:return S(O)}var P=M[O.length];return P||(P=M[O.length]=E(O.length)),P(O)}}(function(){for(;g.length<6;)g.push(b(g.length));h.exports=d.apply(void 0,g.concat([g,b]));for(var m=0;m<g.length;++m)h.exports[m]=g[m]})()},9130:function(h,s,t){var a=t(9660),n=t(9662);h.exports=function(r,l){for(var o=a(r[0],l[0]),u=1;u<r.length;++u)o=n(o,a(r[u],l[u]));return o}},2227:function(h,s,t){var a=t(9660),n=t(9662),r=t(4078),l=t(8289);function o(x){return(x===3?u:x===4?p:x===5?c:b)(n,r,a,l)}function u(x,y,k,f){return function(S,M,E){var O=k(S[0],S[0]),P=f(O,M[0]),I=f(O,E[0]),z=k(M[0],M[0]),U=f(z,S[0]),R=f(z,E[0]),j=k(E[0],E[0]),Z=f(j,S[0]),F=f(j,M[0]),V=x(y(F,R),y(U,P)),H=y(Z,I),te=y(V,H);return te[te.length-1]}}function p(x,y,k,f){return function(S,M,E,O){var P=x(k(S[0],S[0]),k(S[1],S[1])),I=f(P,M[0]),z=f(P,E[0]),U=f(P,O[0]),R=x(k(M[0],M[0]),k(M[1],M[1])),j=f(R,S[0]),Z=f(R,E[0]),F=f(R,O[0]),V=x(k(E[0],E[0]),k(E[1],E[1])),H=f(V,S[0]),te=f(V,M[0]),$=f(V,O[0]),J=x(k(O[0],O[0]),k(O[1],O[1])),X=f(J,S[0]),K=f(J,M[0]),ee=f(J,E[0]),ie=x(x(f(y(ee,$),M[1]),x(f(y(K,F),-E[1]),f(y(te,Z),O[1]))),x(f(y(K,F),S[1]),x(f(y(X,U),-M[1]),f(y(j,I),O[1])))),ae=x(x(f(y(ee,$),S[1]),x(f(y(X,U),-E[1]),f(y(H,z),O[1]))),x(f(y(te,Z),S[1]),x(f(y(H,z),-M[1]),f(y(j,I),E[1])))),oe=y(ie,ae);return oe[oe.length-1]}}function c(x,y,k,f){return function(S,M,E,O,P){var I=x(k(S[0],S[0]),x(k(S[1],S[1]),k(S[2],S[2]))),z=f(I,M[0]),U=f(I,E[0]),R=f(I,O[0]),j=f(I,P[0]),Z=x(k(M[0],M[0]),x(k(M[1],M[1]),k(M[2],M[2]))),F=f(Z,S[0]),V=f(Z,E[0]),H=f(Z,O[0]),te=f(Z,P[0]),$=x(k(E[0],E[0]),x(k(E[1],E[1]),k(E[2],E[2]))),J=f($,S[0]),X=f($,M[0]),K=f($,O[0]),ee=f($,P[0]),ie=x(k(O[0],O[0]),x(k(O[1],O[1]),k(O[2],O[2]))),ae=f(ie,S[0]),oe=f(ie,M[0]),fe=f(ie,E[0]),ge=f(ie,P[0]),ve=x(k(P[0],P[0]),x(k(P[1],P[1]),k(P[2],P[2]))),xe=f(ve,S[0]),_e=f(ve,M[0]),ye=f(ve,E[0]),Ce=f(ve,O[0]),ke=x(x(x(f(x(f(y(Ce,ge),E[1]),x(f(y(ye,ee),-O[1]),f(y(fe,K),P[1]))),M[2]),x(f(x(f(y(Ce,ge),M[1]),x(f(y(_e,te),-O[1]),f(y(oe,H),P[1]))),-E[2]),f(x(f(y(ye,ee),M[1]),x(f(y(_e,te),-E[1]),f(y(X,V),P[1]))),O[2]))),x(f(x(f(y(fe,K),M[1]),x(f(y(oe,H),-E[1]),f(y(X,V),O[1]))),-P[2]),x(f(x(f(y(Ce,ge),M[1]),x(f(y(_e,te),-O[1]),f(y(oe,H),P[1]))),S[2]),f(x(f(y(Ce,ge),S[1]),x(f(y(xe,j),-O[1]),f(y(ae,R),P[1]))),-M[2])))),x(x(f(x(f(y(_e,te),S[1]),x(f(y(xe,j),-M[1]),f(y(F,z),P[1]))),O[2]),x(f(x(f(y(oe,H),S[1]),x(f(y(ae,R),-M[1]),f(y(F,z),O[1]))),-P[2]),f(x(f(y(fe,K),M[1]),x(f(y(oe,H),-E[1]),f(y(X,V),O[1]))),S[2]))),x(f(x(f(y(fe,K),S[1]),x(f(y(ae,R),-E[1]),f(y(J,U),O[1]))),-M[2]),x(f(x(f(y(oe,H),S[1]),x(f(y(ae,R),-M[1]),f(y(F,z),O[1]))),E[2]),f(x(f(y(X,V),S[1]),x(f(y(J,U),-M[1]),f(y(F,z),E[1]))),-O[2]))))),Te=x(x(x(f(x(f(y(Ce,ge),E[1]),x(f(y(ye,ee),-O[1]),f(y(fe,K),P[1]))),S[2]),f(x(f(y(Ce,ge),S[1]),x(f(y(xe,j),-O[1]),f(y(ae,R),P[1]))),-E[2])),x(f(x(f(y(ye,ee),S[1]),x(f(y(xe,j),-E[1]),f(y(J,U),P[1]))),O[2]),f(x(f(y(fe,K),S[1]),x(f(y(ae,R),-E[1]),f(y(J,U),O[1]))),-P[2]))),x(x(f(x(f(y(ye,ee),M[1]),x(f(y(_e,te),-E[1]),f(y(X,V),P[1]))),S[2]),f(x(f(y(ye,ee),S[1]),x(f(y(xe,j),-E[1]),f(y(J,U),P[1]))),-M[2])),x(f(x(f(y(_e,te),S[1]),x(f(y(xe,j),-M[1]),f(y(F,z),P[1]))),E[2]),f(x(f(y(X,V),S[1]),x(f(y(J,U),-M[1]),f(y(F,z),E[1]))),-P[2])))),le=y(ke,Te);return le[le.length-1]}}function b(x,y,k,f){return function(S,M,E,O,P,I){var z=x(x(k(S[0],S[0]),k(S[1],S[1])),x(k(S[2],S[2]),k(S[3],S[3]))),U=f(z,M[0]),R=f(z,E[0]),j=f(z,O[0]),Z=f(z,P[0]),F=f(z,I[0]),V=x(x(k(M[0],M[0]),k(M[1],M[1])),x(k(M[2],M[2]),k(M[3],M[3]))),H=f(V,S[0]),te=f(V,E[0]),$=f(V,O[0]),J=f(V,P[0]),X=f(V,I[0]),K=x(x(k(E[0],E[0]),k(E[1],E[1])),x(k(E[2],E[2]),k(E[3],E[3]))),ee=f(K,S[0]),ie=f(K,M[0]),ae=f(K,O[0]),oe=f(K,P[0]),fe=f(K,I[0]),ge=x(x(k(O[0],O[0]),k(O[1],O[1])),x(k(O[2],O[2]),k(O[3],O[3]))),ve=f(ge,S[0]),xe=f(ge,M[0]),_e=f(ge,E[0]),ye=f(ge,P[0]),Ce=f(ge,I[0]),ke=x(x(k(P[0],P[0]),k(P[1],P[1])),x(k(P[2],P[2]),k(P[3],P[3]))),Te=f(ke,S[0]),le=f(ke,M[0]),ue=f(ke,E[0]),de=f(ke,O[0]),Le=f(ke,I[0]),we=x(x(k(I[0],I[0]),k(I[1],I[1])),x(k(I[2],I[2]),k(I[3],I[3]))),Ee=f(we,S[0]),Oe=f(we,M[0]),Fe=f(we,E[0]),pe=f(we,O[0]),be=f(we,P[0]),Me=x(x(x(f(x(x(f(x(f(y(be,Le),O[1]),x(f(y(pe,Ce),-P[1]),f(y(de,ye),I[1]))),E[2]),f(x(f(y(be,Le),E[1]),x(f(y(Fe,fe),-P[1]),f(y(ue,oe),I[1]))),-O[2])),x(f(x(f(y(pe,Ce),E[1]),x(f(y(Fe,fe),-O[1]),f(y(_e,ae),I[1]))),P[2]),f(x(f(y(de,ye),E[1]),x(f(y(ue,oe),-O[1]),f(y(_e,ae),P[1]))),-I[2]))),M[3]),x(f(x(x(f(x(f(y(be,Le),O[1]),x(f(y(pe,Ce),-P[1]),f(y(de,ye),I[1]))),M[2]),f(x(f(y(be,Le),M[1]),x(f(y(Oe,X),-P[1]),f(y(le,J),I[1]))),-O[2])),x(f(x(f(y(pe,Ce),M[1]),x(f(y(Oe,X),-O[1]),f(y(xe,$),I[1]))),P[2]),f(x(f(y(de,ye),M[1]),x(f(y(le,J),-O[1]),f(y(xe,$),P[1]))),-I[2]))),-E[3]),f(x(x(f(x(f(y(be,Le),E[1]),x(f(y(Fe,fe),-P[1]),f(y(ue,oe),I[1]))),M[2]),f(x(f(y(be,Le),M[1]),x(f(y(Oe,X),-P[1]),f(y(le,J),I[1]))),-E[2])),x(f(x(f(y(Fe,fe),M[1]),x(f(y(Oe,X),-E[1]),f(y(ie,te),I[1]))),P[2]),f(x(f(y(ue,oe),M[1]),x(f(y(le,J),-E[1]),f(y(ie,te),P[1]))),-I[2]))),O[3]))),x(x(f(x(x(f(x(f(y(pe,Ce),E[1]),x(f(y(Fe,fe),-O[1]),f(y(_e,ae),I[1]))),M[2]),f(x(f(y(pe,Ce),M[1]),x(f(y(Oe,X),-O[1]),f(y(xe,$),I[1]))),-E[2])),x(f(x(f(y(Fe,fe),M[1]),x(f(y(Oe,X),-E[1]),f(y(ie,te),I[1]))),O[2]),f(x(f(y(_e,ae),M[1]),x(f(y(xe,$),-E[1]),f(y(ie,te),O[1]))),-I[2]))),-P[3]),f(x(x(f(x(f(y(de,ye),E[1]),x(f(y(ue,oe),-O[1]),f(y(_e,ae),P[1]))),M[2]),f(x(f(y(de,ye),M[1]),x(f(y(le,J),-O[1]),f(y(xe,$),P[1]))),-E[2])),x(f(x(f(y(ue,oe),M[1]),x(f(y(le,J),-E[1]),f(y(ie,te),P[1]))),O[2]),f(x(f(y(_e,ae),M[1]),x(f(y(xe,$),-E[1]),f(y(ie,te),O[1]))),-P[2]))),I[3])),x(f(x(x(f(x(f(y(be,Le),O[1]),x(f(y(pe,Ce),-P[1]),f(y(de,ye),I[1]))),M[2]),f(x(f(y(be,Le),M[1]),x(f(y(Oe,X),-P[1]),f(y(le,J),I[1]))),-O[2])),x(f(x(f(y(pe,Ce),M[1]),x(f(y(Oe,X),-O[1]),f(y(xe,$),I[1]))),P[2]),f(x(f(y(de,ye),M[1]),x(f(y(le,J),-O[1]),f(y(xe,$),P[1]))),-I[2]))),S[3]),f(x(x(f(x(f(y(be,Le),O[1]),x(f(y(pe,Ce),-P[1]),f(y(de,ye),I[1]))),S[2]),f(x(f(y(be,Le),S[1]),x(f(y(Ee,F),-P[1]),f(y(Te,Z),I[1]))),-O[2])),x(f(x(f(y(pe,Ce),S[1]),x(f(y(Ee,F),-O[1]),f(y(ve,j),I[1]))),P[2]),f(x(f(y(de,ye),S[1]),x(f(y(Te,Z),-O[1]),f(y(ve,j),P[1]))),-I[2]))),-M[3])))),x(x(x(f(x(x(f(x(f(y(be,Le),M[1]),x(f(y(Oe,X),-P[1]),f(y(le,J),I[1]))),S[2]),f(x(f(y(be,Le),S[1]),x(f(y(Ee,F),-P[1]),f(y(Te,Z),I[1]))),-M[2])),x(f(x(f(y(Oe,X),S[1]),x(f(y(Ee,F),-M[1]),f(y(H,U),I[1]))),P[2]),f(x(f(y(le,J),S[1]),x(f(y(Te,Z),-M[1]),f(y(H,U),P[1]))),-I[2]))),O[3]),f(x(x(f(x(f(y(pe,Ce),M[1]),x(f(y(Oe,X),-O[1]),f(y(xe,$),I[1]))),S[2]),f(x(f(y(pe,Ce),S[1]),x(f(y(Ee,F),-O[1]),f(y(ve,j),I[1]))),-M[2])),x(f(x(f(y(Oe,X),S[1]),x(f(y(Ee,F),-M[1]),f(y(H,U),I[1]))),O[2]),f(x(f(y(xe,$),S[1]),x(f(y(ve,j),-M[1]),f(y(H,U),O[1]))),-I[2]))),-P[3])),x(f(x(x(f(x(f(y(de,ye),M[1]),x(f(y(le,J),-O[1]),f(y(xe,$),P[1]))),S[2]),f(x(f(y(de,ye),S[1]),x(f(y(Te,Z),-O[1]),f(y(ve,j),P[1]))),-M[2])),x(f(x(f(y(le,J),S[1]),x(f(y(Te,Z),-M[1]),f(y(H,U),P[1]))),O[2]),f(x(f(y(xe,$),S[1]),x(f(y(ve,j),-M[1]),f(y(H,U),O[1]))),-P[2]))),I[3]),f(x(x(f(x(f(y(pe,Ce),E[1]),x(f(y(Fe,fe),-O[1]),f(y(_e,ae),I[1]))),M[2]),f(x(f(y(pe,Ce),M[1]),x(f(y(Oe,X),-O[1]),f(y(xe,$),I[1]))),-E[2])),x(f(x(f(y(Fe,fe),M[1]),x(f(y(Oe,X),-E[1]),f(y(ie,te),I[1]))),O[2]),f(x(f(y(_e,ae),M[1]),x(f(y(xe,$),-E[1]),f(y(ie,te),O[1]))),-I[2]))),S[3]))),x(x(f(x(x(f(x(f(y(pe,Ce),E[1]),x(f(y(Fe,fe),-O[1]),f(y(_e,ae),I[1]))),S[2]),f(x(f(y(pe,Ce),S[1]),x(f(y(Ee,F),-O[1]),f(y(ve,j),I[1]))),-E[2])),x(f(x(f(y(Fe,fe),S[1]),x(f(y(Ee,F),-E[1]),f(y(ee,R),I[1]))),O[2]),f(x(f(y(_e,ae),S[1]),x(f(y(ve,j),-E[1]),f(y(ee,R),O[1]))),-I[2]))),-M[3]),f(x(x(f(x(f(y(pe,Ce),M[1]),x(f(y(Oe,X),-O[1]),f(y(xe,$),I[1]))),S[2]),f(x(f(y(pe,Ce),S[1]),x(f(y(Ee,F),-O[1]),f(y(ve,j),I[1]))),-M[2])),x(f(x(f(y(Oe,X),S[1]),x(f(y(Ee,F),-M[1]),f(y(H,U),I[1]))),O[2]),f(x(f(y(xe,$),S[1]),x(f(y(ve,j),-M[1]),f(y(H,U),O[1]))),-I[2]))),E[3])),x(f(x(x(f(x(f(y(Fe,fe),M[1]),x(f(y(Oe,X),-E[1]),f(y(ie,te),I[1]))),S[2]),f(x(f(y(Fe,fe),S[1]),x(f(y(Ee,F),-E[1]),f(y(ee,R),I[1]))),-M[2])),x(f(x(f(y(Oe,X),S[1]),x(f(y(Ee,F),-M[1]),f(y(H,U),I[1]))),E[2]),f(x(f(y(ie,te),S[1]),x(f(y(ee,R),-M[1]),f(y(H,U),E[1]))),-I[2]))),-O[3]),f(x(x(f(x(f(y(_e,ae),M[1]),x(f(y(xe,$),-E[1]),f(y(ie,te),O[1]))),S[2]),f(x(f(y(_e,ae),S[1]),x(f(y(ve,j),-E[1]),f(y(ee,R),O[1]))),-M[2])),x(f(x(f(y(xe,$),S[1]),x(f(y(ve,j),-M[1]),f(y(H,U),O[1]))),E[2]),f(x(f(y(ie,te),S[1]),x(f(y(ee,R),-M[1]),f(y(H,U),E[1]))),-O[2]))),I[3]))))),De=x(x(x(f(x(x(f(x(f(y(be,Le),O[1]),x(f(y(pe,Ce),-P[1]),f(y(de,ye),I[1]))),E[2]),f(x(f(y(be,Le),E[1]),x(f(y(Fe,fe),-P[1]),f(y(ue,oe),I[1]))),-O[2])),x(f(x(f(y(pe,Ce),E[1]),x(f(y(Fe,fe),-O[1]),f(y(_e,ae),I[1]))),P[2]),f(x(f(y(de,ye),E[1]),x(f(y(ue,oe),-O[1]),f(y(_e,ae),P[1]))),-I[2]))),S[3]),x(f(x(x(f(x(f(y(be,Le),O[1]),x(f(y(pe,Ce),-P[1]),f(y(de,ye),I[1]))),S[2]),f(x(f(y(be,Le),S[1]),x(f(y(Ee,F),-P[1]),f(y(Te,Z),I[1]))),-O[2])),x(f(x(f(y(pe,Ce),S[1]),x(f(y(Ee,F),-O[1]),f(y(ve,j),I[1]))),P[2]),f(x(f(y(de,ye),S[1]),x(f(y(Te,Z),-O[1]),f(y(ve,j),P[1]))),-I[2]))),-E[3]),f(x(x(f(x(f(y(be,Le),E[1]),x(f(y(Fe,fe),-P[1]),f(y(ue,oe),I[1]))),S[2]),f(x(f(y(be,Le),S[1]),x(f(y(Ee,F),-P[1]),f(y(Te,Z),I[1]))),-E[2])),x(f(x(f(y(Fe,fe),S[1]),x(f(y(Ee,F),-E[1]),f(y(ee,R),I[1]))),P[2]),f(x(f(y(ue,oe),S[1]),x(f(y(Te,Z),-E[1]),f(y(ee,R),P[1]))),-I[2]))),O[3]))),x(x(f(x(x(f(x(f(y(pe,Ce),E[1]),x(f(y(Fe,fe),-O[1]),f(y(_e,ae),I[1]))),S[2]),f(x(f(y(pe,Ce),S[1]),x(f(y(Ee,F),-O[1]),f(y(ve,j),I[1]))),-E[2])),x(f(x(f(y(Fe,fe),S[1]),x(f(y(Ee,F),-E[1]),f(y(ee,R),I[1]))),O[2]),f(x(f(y(_e,ae),S[1]),x(f(y(ve,j),-E[1]),f(y(ee,R),O[1]))),-I[2]))),-P[3]),f(x(x(f(x(f(y(de,ye),E[1]),x(f(y(ue,oe),-O[1]),f(y(_e,ae),P[1]))),S[2]),f(x(f(y(de,ye),S[1]),x(f(y(Te,Z),-O[1]),f(y(ve,j),P[1]))),-E[2])),x(f(x(f(y(ue,oe),S[1]),x(f(y(Te,Z),-E[1]),f(y(ee,R),P[1]))),O[2]),f(x(f(y(_e,ae),S[1]),x(f(y(ve,j),-E[1]),f(y(ee,R),O[1]))),-P[2]))),I[3])),x(f(x(x(f(x(f(y(be,Le),E[1]),x(f(y(Fe,fe),-P[1]),f(y(ue,oe),I[1]))),M[2]),f(x(f(y(be,Le),M[1]),x(f(y(Oe,X),-P[1]),f(y(le,J),I[1]))),-E[2])),x(f(x(f(y(Fe,fe),M[1]),x(f(y(Oe,X),-E[1]),f(y(ie,te),I[1]))),P[2]),f(x(f(y(ue,oe),M[1]),x(f(y(le,J),-E[1]),f(y(ie,te),P[1]))),-I[2]))),S[3]),f(x(x(f(x(f(y(be,Le),E[1]),x(f(y(Fe,fe),-P[1]),f(y(ue,oe),I[1]))),S[2]),f(x(f(y(be,Le),S[1]),x(f(y(Ee,F),-P[1]),f(y(Te,Z),I[1]))),-E[2])),x(f(x(f(y(Fe,fe),S[1]),x(f(y(Ee,F),-E[1]),f(y(ee,R),I[1]))),P[2]),f(x(f(y(ue,oe),S[1]),x(f(y(Te,Z),-E[1]),f(y(ee,R),P[1]))),-I[2]))),-M[3])))),x(x(x(f(x(x(f(x(f(y(be,Le),M[1]),x(f(y(Oe,X),-P[1]),f(y(le,J),I[1]))),S[2]),f(x(f(y(be,Le),S[1]),x(f(y(Ee,F),-P[1]),f(y(Te,Z),I[1]))),-M[2])),x(f(x(f(y(Oe,X),S[1]),x(f(y(Ee,F),-M[1]),f(y(H,U),I[1]))),P[2]),f(x(f(y(le,J),S[1]),x(f(y(Te,Z),-M[1]),f(y(H,U),P[1]))),-I[2]))),E[3]),f(x(x(f(x(f(y(Fe,fe),M[1]),x(f(y(Oe,X),-E[1]),f(y(ie,te),I[1]))),S[2]),f(x(f(y(Fe,fe),S[1]),x(f(y(Ee,F),-E[1]),f(y(ee,R),I[1]))),-M[2])),x(f(x(f(y(Oe,X),S[1]),x(f(y(Ee,F),-M[1]),f(y(H,U),I[1]))),E[2]),f(x(f(y(ie,te),S[1]),x(f(y(ee,R),-M[1]),f(y(H,U),E[1]))),-I[2]))),-P[3])),x(f(x(x(f(x(f(y(ue,oe),M[1]),x(f(y(le,J),-E[1]),f(y(ie,te),P[1]))),S[2]),f(x(f(y(ue,oe),S[1]),x(f(y(Te,Z),-E[1]),f(y(ee,R),P[1]))),-M[2])),x(f(x(f(y(le,J),S[1]),x(f(y(Te,Z),-M[1]),f(y(H,U),P[1]))),E[2]),f(x(f(y(ie,te),S[1]),x(f(y(ee,R),-M[1]),f(y(H,U),E[1]))),-P[2]))),I[3]),f(x(x(f(x(f(y(de,ye),E[1]),x(f(y(ue,oe),-O[1]),f(y(_e,ae),P[1]))),M[2]),f(x(f(y(de,ye),M[1]),x(f(y(le,J),-O[1]),f(y(xe,$),P[1]))),-E[2])),x(f(x(f(y(ue,oe),M[1]),x(f(y(le,J),-E[1]),f(y(ie,te),P[1]))),O[2]),f(x(f(y(_e,ae),M[1]),x(f(y(xe,$),-E[1]),f(y(ie,te),O[1]))),-P[2]))),S[3]))),x(x(f(x(x(f(x(f(y(de,ye),E[1]),x(f(y(ue,oe),-O[1]),f(y(_e,ae),P[1]))),S[2]),f(x(f(y(de,ye),S[1]),x(f(y(Te,Z),-O[1]),f(y(ve,j),P[1]))),-E[2])),x(f(x(f(y(ue,oe),S[1]),x(f(y(Te,Z),-E[1]),f(y(ee,R),P[1]))),O[2]),f(x(f(y(_e,ae),S[1]),x(f(y(ve,j),-E[1]),f(y(ee,R),O[1]))),-P[2]))),-M[3]),f(x(x(f(x(f(y(de,ye),M[1]),x(f(y(le,J),-O[1]),f(y(xe,$),P[1]))),S[2]),f(x(f(y(de,ye),S[1]),x(f(y(Te,Z),-O[1]),f(y(ve,j),P[1]))),-M[2])),x(f(x(f(y(le,J),S[1]),x(f(y(Te,Z),-M[1]),f(y(H,U),P[1]))),O[2]),f(x(f(y(xe,$),S[1]),x(f(y(ve,j),-M[1]),f(y(H,U),O[1]))),-P[2]))),E[3])),x(f(x(x(f(x(f(y(ue,oe),M[1]),x(f(y(le,J),-E[1]),f(y(ie,te),P[1]))),S[2]),f(x(f(y(ue,oe),S[1]),x(f(y(Te,Z),-E[1]),f(y(ee,R),P[1]))),-M[2])),x(f(x(f(y(le,J),S[1]),x(f(y(Te,Z),-M[1]),f(y(H,U),P[1]))),E[2]),f(x(f(y(ie,te),S[1]),x(f(y(ee,R),-M[1]),f(y(H,U),E[1]))),-P[2]))),-O[3]),f(x(x(f(x(f(y(_e,ae),M[1]),x(f(y(xe,$),-E[1]),f(y(ie,te),O[1]))),S[2]),f(x(f(y(_e,ae),S[1]),x(f(y(ve,j),-E[1]),f(y(ee,R),O[1]))),-M[2])),x(f(x(f(y(xe,$),S[1]),x(f(y(ve,j),-M[1]),f(y(H,U),O[1]))),E[2]),f(x(f(y(ie,te),S[1]),x(f(y(ee,R),-M[1]),f(y(H,U),E[1]))),-O[2]))),P[3]))))),Ne=y(Me,De);return Ne[Ne.length-1]}}var g=[function(){return 0},function(){return 0},function(){return 0}];function d(x){var y=g[x.length];return y||(y=g[x.length]=o(x.length)),y.apply(void 0,x)}function m(x,y,k,f,S,M,E,O){return function(P,I,z,U,R,j){switch(arguments.length){case 0:case 1:return 0;case 2:return f(P,I);case 3:return S(P,I,z);case 4:return M(P,I,z,U);case 5:return E(P,I,z,U,R);case 6:return O(P,I,z,U,R,j)}for(var Z=new Array(arguments.length),F=0;F<arguments.length;++F)Z[F]=arguments[F];return x(Z)}}(function(){for(;g.length<=6;)g.push(o(g.length));h.exports=m.apply(void 0,[d].concat(g));for(var x=0;x<=6;++x)h.exports[x]=g[x]})()},6606:function(h,s,t){var a=t(8167);function n(g){return(g===2?r:g===3?l:g===4?o:g===5?u:p)(g<6?a[g]:a)}function r(g){return function(d,m){return[g([[+m[0],+d[0][1]],[+m[1],+d[1][1]]]),g([[+d[0][0],+m[0]],[+d[1][0],+m[1]]]),g(d)]}}function l(g){return function(d,m){return[g([[+m[0],+d[0][1],+d[0][2]],[+m[1],+d[1][1],+d[1][2]],[+m[2],+d[2][1],+d[2][2]]]),g([[+d[0][0],+m[0],+d[0][2]],[+d[1][0],+m[1],+d[1][2]],[+d[2][0],+m[2],+d[2][2]]]),g([[+d[0][0],+d[0][1],+m[0]],[+d[1][0],+d[1][1],+m[1]],[+d[2][0],+d[2][1],+m[2]]]),g(d)]}}function o(g){return function(d,m){return[g([[+m[0],+d[0][1],+d[0][2],+d[0][3]],[+m[1],+d[1][1],+d[1][2],+d[1][3]],[+m[2],+d[2][1],+d[2][2],+d[2][3]],[+m[3],+d[3][1],+d[3][2],+d[3][3]]]),g([[+d[0][0],+m[0],+d[0][2],+d[0][3]],[+d[1][0],+m[1],+d[1][2],+d[1][3]],[+d[2][0],+m[2],+d[2][2],+d[2][3]],[+d[3][0],+m[3],+d[3][2],+d[3][3]]]),g([[+d[0][0],+d[0][1],+m[0],+d[0][3]],[+d[1][0],+d[1][1],+m[1],+d[1][3]],[+d[2][0],+d[2][1],+m[2],+d[2][3]],[+d[3][0],+d[3][1],+m[3],+d[3][3]]]),g([[+d[0][0],+d[0][1],+d[0][2],+m[0]],[+d[1][0],+d[1][1],+d[1][2],+m[1]],[+d[2][0],+d[2][1],+d[2][2],+m[2]],[+d[3][0],+d[3][1],+d[3][2],+m[3]]]),g(d)]}}function u(g){return function(d,m){return[g([[+m[0],+d[0][1],+d[0][2],+d[0][3],+d[0][4]],[+m[1],+d[1][1],+d[1][2],+d[1][3],+d[1][4]],[+m[2],+d[2][1],+d[2][2],+d[2][3],+d[2][4]],[+m[3],+d[3][1],+d[3][2],+d[3][3],+d[3][4]],[+m[4],+d[4][1],+d[4][2],+d[4][3],+d[4][4]]]),g([[+d[0][0],+m[0],+d[0][2],+d[0][3],+d[0][4]],[+d[1][0],+m[1],+d[1][2],+d[1][3],+d[1][4]],[+d[2][0],+m[2],+d[2][2],+d[2][3],+d[2][4]],[+d[3][0],+m[3],+d[3][2],+d[3][3],+d[3][4]],[+d[4][0],+m[4],+d[4][2],+d[4][3],+d[4][4]]]),g([[+d[0][0],+d[0][1],+m[0],+d[0][3],+d[0][4]],[+d[1][0],+d[1][1],+m[1],+d[1][3],+d[1][4]],[+d[2][0],+d[2][1],+m[2],+d[2][3],+d[2][4]],[+d[3][0],+d[3][1],+m[3],+d[3][3],+d[3][4]],[+d[4][0],+d[4][1],+m[4],+d[4][3],+d[4][4]]]),g([[+d[0][0],+d[0][1],+d[0][2],+m[0],+d[0][4]],[+d[1][0],+d[1][1],+d[1][2],+m[1],+d[1][4]],[+d[2][0],+d[2][1],+d[2][2],+m[2],+d[2][4]],[+d[3][0],+d[3][1],+d[3][2],+m[3],+d[3][4]],[+d[4][0],+d[4][1],+d[4][2],+m[4],+d[4][4]]]),g([[+d[0][0],+d[0][1],+d[0][2],+d[0][3],+m[0]],[+d[1][0],+d[1][1],+d[1][2],+d[1][3],+m[1]],[+d[2][0],+d[2][1],+d[2][2],+d[2][3],+m[2]],[+d[3][0],+d[3][1],+d[3][2],+d[3][3],+m[3]],[+d[4][0],+d[4][1],+d[4][2],+d[4][3],+m[4]]]),g(d)]}}function p(g){return function(d,m){return[g([[+m[0],+d[0][1],+d[0][2],+d[0][3],+d[0][4],+d[0][5]],[+m[1],+d[1][1],+d[1][2],+d[1][3],+d[1][4],+d[1][5]],[+m[2],+d[2][1],+d[2][2],+d[2][3],+d[2][4],+d[2][5]],[+m[3],+d[3][1],+d[3][2],+d[3][3],+d[3][4],+d[3][5]],[+m[4],+d[4][1],+d[4][2],+d[4][3],+d[4][4],+d[4][5]],[+m[5],+d[5][1],+d[5][2],+d[5][3],+d[5][4],+d[5][5]]]),g([[+d[0][0],+m[0],+d[0][2],+d[0][3],+d[0][4],+d[0][5]],[+d[1][0],+m[1],+d[1][2],+d[1][3],+d[1][4],+d[1][5]],[+d[2][0],+m[2],+d[2][2],+d[2][3],+d[2][4],+d[2][5]],[+d[3][0],+m[3],+d[3][2],+d[3][3],+d[3][4],+d[3][5]],[+d[4][0],+m[4],+d[4][2],+d[4][3],+d[4][4],+d[4][5]],[+d[5][0],+m[5],+d[5][2],+d[5][3],+d[5][4],+d[5][5]]]),g([[+d[0][0],+d[0][1],+m[0],+d[0][3],+d[0][4],+d[0][5]],[+d[1][0],+d[1][1],+m[1],+d[1][3],+d[1][4],+d[1][5]],[+d[2][0],+d[2][1],+m[2],+d[2][3],+d[2][4],+d[2][5]],[+d[3][0],+d[3][1],+m[3],+d[3][3],+d[3][4],+d[3][5]],[+d[4][0],+d[4][1],+m[4],+d[4][3],+d[4][4],+d[4][5]],[+d[5][0],+d[5][1],+m[5],+d[5][3],+d[5][4],+d[5][5]]]),g([[+d[0][0],+d[0][1],+d[0][2],+m[0],+d[0][4],+d[0][5]],[+d[1][0],+d[1][1],+d[1][2],+m[1],+d[1][4],+d[1][5]],[+d[2][0],+d[2][1],+d[2][2],+m[2],+d[2][4],+d[2][5]],[+d[3][0],+d[3][1],+d[3][2],+m[3],+d[3][4],+d[3][5]],[+d[4][0],+d[4][1],+d[4][2],+m[4],+d[4][4],+d[4][5]],[+d[5][0],+d[5][1],+d[5][2],+m[5],+d[5][4],+d[5][5]]]),g([[+d[0][0],+d[0][1],+d[0][2],+d[0][3],+m[0],+d[0][5]],[+d[1][0],+d[1][1],+d[1][2],+d[1][3],+m[1],+d[1][5]],[+d[2][0],+d[2][1],+d[2][2],+d[2][3],+m[2],+d[2][5]],[+d[3][0],+d[3][1],+d[3][2],+d[3][3],+m[3],+d[3][5]],[+d[4][0],+d[4][1],+d[4][2],+d[4][3],+m[4],+d[4][5]],[+d[5][0],+d[5][1],+d[5][2],+d[5][3],+m[5],+d[5][5]]]),g([[+d[0][0],+d[0][1],+d[0][2],+d[0][3],+d[0][4],+m[0]],[+d[1][0],+d[1][1],+d[1][2],+d[1][3],+d[1][4],+m[1]],[+d[2][0],+d[2][1],+d[2][2],+d[2][3],+d[2][4],+m[2]],[+d[3][0],+d[3][1],+d[3][2],+d[3][3],+d[3][4],+m[3]],[+d[4][0],+d[4][1],+d[4][2],+d[4][3],+d[4][4],+m[4]],[+d[5][0],+d[5][1],+d[5][2],+d[5][3],+d[5][4],+m[5]]]),g(d)]}}var c=[function(){return[[0]]},function(g,d){return[[d[0]],[g[0][0]]]}];function b(g,d,m,x,y,k,f,S){return function(M,E){switch(M.length){case 0:return g(M,E);case 1:return d(M,E);case 2:return m(M,E);case 3:return x(M,E);case 4:return y(M,E);case 5:return k(M,E)}var O=f[M.length];return O||(O=f[M.length]=S(M.length)),O(M,E)}}(function(){for(;c.length<6;)c.push(n(c.length));h.exports=b.apply(void 0,c.concat([c,n]));for(var g=0;g<6;++g)h.exports[g]=c[g]})()},417:function(h,s,t){var a=t(9660),n=t(9662),r=t(8289),l=t(4078);function o(y,k,f,S){return function(M,E,O){var P=y(y(k(E[1],O[0]),k(-O[1],E[0])),y(k(M[1],E[0]),k(-E[1],M[0]))),I=y(k(M[1],O[0]),k(-O[1],M[0])),z=S(P,I);return z[z.length-1]}}function u(y,k,f,S){return function(M,E,O,P){var I=y(y(f(y(k(O[1],P[0]),k(-P[1],O[0])),E[2]),y(f(y(k(E[1],P[0]),k(-P[1],E[0])),-O[2]),f(y(k(E[1],O[0]),k(-O[1],E[0])),P[2]))),y(f(y(k(E[1],P[0]),k(-P[1],E[0])),M[2]),y(f(y(k(M[1],P[0]),k(-P[1],M[0])),-E[2]),f(y(k(M[1],E[0]),k(-E[1],M[0])),P[2])))),z=y(y(f(y(k(O[1],P[0]),k(-P[1],O[0])),M[2]),y(f(y(k(M[1],P[0]),k(-P[1],M[0])),-O[2]),f(y(k(M[1],O[0]),k(-O[1],M[0])),P[2]))),y(f(y(k(E[1],O[0]),k(-O[1],E[0])),M[2]),y(f(y(k(M[1],O[0]),k(-O[1],M[0])),-E[2]),f(y(k(M[1],E[0]),k(-E[1],M[0])),O[2])))),U=S(I,z);return U[U.length-1]}}function p(y,k,f,S){return function(M,E,O,P,I){var z=y(y(y(f(y(f(y(k(P[1],I[0]),k(-I[1],P[0])),O[2]),y(f(y(k(O[1],I[0]),k(-I[1],O[0])),-P[2]),f(y(k(O[1],P[0]),k(-P[1],O[0])),I[2]))),E[3]),y(f(y(f(y(k(P[1],I[0]),k(-I[1],P[0])),E[2]),y(f(y(k(E[1],I[0]),k(-I[1],E[0])),-P[2]),f(y(k(E[1],P[0]),k(-P[1],E[0])),I[2]))),-O[3]),f(y(f(y(k(O[1],I[0]),k(-I[1],O[0])),E[2]),y(f(y(k(E[1],I[0]),k(-I[1],E[0])),-O[2]),f(y(k(E[1],O[0]),k(-O[1],E[0])),I[2]))),P[3]))),y(f(y(f(y(k(O[1],P[0]),k(-P[1],O[0])),E[2]),y(f(y(k(E[1],P[0]),k(-P[1],E[0])),-O[2]),f(y(k(E[1],O[0]),k(-O[1],E[0])),P[2]))),-I[3]),y(f(y(f(y(k(P[1],I[0]),k(-I[1],P[0])),E[2]),y(f(y(k(E[1],I[0]),k(-I[1],E[0])),-P[2]),f(y(k(E[1],P[0]),k(-P[1],E[0])),I[2]))),M[3]),f(y(f(y(k(P[1],I[0]),k(-I[1],P[0])),M[2]),y(f(y(k(M[1],I[0]),k(-I[1],M[0])),-P[2]),f(y(k(M[1],P[0]),k(-P[1],M[0])),I[2]))),-E[3])))),y(y(f(y(f(y(k(E[1],I[0]),k(-I[1],E[0])),M[2]),y(f(y(k(M[1],I[0]),k(-I[1],M[0])),-E[2]),f(y(k(M[1],E[0]),k(-E[1],M[0])),I[2]))),P[3]),y(f(y(f(y(k(E[1],P[0]),k(-P[1],E[0])),M[2]),y(f(y(k(M[1],P[0]),k(-P[1],M[0])),-E[2]),f(y(k(M[1],E[0]),k(-E[1],M[0])),P[2]))),-I[3]),f(y(f(y(k(O[1],P[0]),k(-P[1],O[0])),E[2]),y(f(y(k(E[1],P[0]),k(-P[1],E[0])),-O[2]),f(y(k(E[1],O[0]),k(-O[1],E[0])),P[2]))),M[3]))),y(f(y(f(y(k(O[1],P[0]),k(-P[1],O[0])),M[2]),y(f(y(k(M[1],P[0]),k(-P[1],M[0])),-O[2]),f(y(k(M[1],O[0]),k(-O[1],M[0])),P[2]))),-E[3]),y(f(y(f(y(k(E[1],P[0]),k(-P[1],E[0])),M[2]),y(f(y(k(M[1],P[0]),k(-P[1],M[0])),-E[2]),f(y(k(M[1],E[0]),k(-E[1],M[0])),P[2]))),O[3]),f(y(f(y(k(E[1],O[0]),k(-O[1],E[0])),M[2]),y(f(y(k(M[1],O[0]),k(-O[1],M[0])),-E[2]),f(y(k(M[1],E[0]),k(-E[1],M[0])),O[2]))),-P[3]))))),U=y(y(y(f(y(f(y(k(P[1],I[0]),k(-I[1],P[0])),O[2]),y(f(y(k(O[1],I[0]),k(-I[1],O[0])),-P[2]),f(y(k(O[1],P[0]),k(-P[1],O[0])),I[2]))),M[3]),f(y(f(y(k(P[1],I[0]),k(-I[1],P[0])),M[2]),y(f(y(k(M[1],I[0]),k(-I[1],M[0])),-P[2]),f(y(k(M[1],P[0]),k(-P[1],M[0])),I[2]))),-O[3])),y(f(y(f(y(k(O[1],I[0]),k(-I[1],O[0])),M[2]),y(f(y(k(M[1],I[0]),k(-I[1],M[0])),-O[2]),f(y(k(M[1],O[0]),k(-O[1],M[0])),I[2]))),P[3]),f(y(f(y(k(O[1],P[0]),k(-P[1],O[0])),M[2]),y(f(y(k(M[1],P[0]),k(-P[1],M[0])),-O[2]),f(y(k(M[1],O[0]),k(-O[1],M[0])),P[2]))),-I[3]))),y(y(f(y(f(y(k(O[1],I[0]),k(-I[1],O[0])),E[2]),y(f(y(k(E[1],I[0]),k(-I[1],E[0])),-O[2]),f(y(k(E[1],O[0]),k(-O[1],E[0])),I[2]))),M[3]),f(y(f(y(k(O[1],I[0]),k(-I[1],O[0])),M[2]),y(f(y(k(M[1],I[0]),k(-I[1],M[0])),-O[2]),f(y(k(M[1],O[0]),k(-O[1],M[0])),I[2]))),-E[3])),y(f(y(f(y(k(E[1],I[0]),k(-I[1],E[0])),M[2]),y(f(y(k(M[1],I[0]),k(-I[1],M[0])),-E[2]),f(y(k(M[1],E[0]),k(-E[1],M[0])),I[2]))),O[3]),f(y(f(y(k(E[1],O[0]),k(-O[1],E[0])),M[2]),y(f(y(k(M[1],O[0]),k(-O[1],M[0])),-E[2]),f(y(k(M[1],E[0]),k(-E[1],M[0])),O[2]))),-I[3])))),R=S(z,U);return R[R.length-1]}}function c(y){return(y===3?o:y===4?u:p)(n,a,r,l)}var b=c(3),g=c(4),d=[function(){return 0},function(){return 0},function(y,k){return k[0]-y[0]},function(y,k,f){var S,M=(y[1]-f[1])*(k[0]-f[0]),E=(y[0]-f[0])*(k[1]-f[1]),O=M-E;if(M>0){if(E<=0)return O;S=M+E}else{if(!(M<0)||E>=0)return O;S=-(M+E)}var P=33306690738754716e-32*S;return O>=P||O<=-P?O:b(y,k,f)},function(y,k,f,S){var M=y[0]-S[0],E=k[0]-S[0],O=f[0]-S[0],P=y[1]-S[1],I=k[1]-S[1],z=f[1]-S[1],U=y[2]-S[2],R=k[2]-S[2],j=f[2]-S[2],Z=E*z,F=O*I,V=O*P,H=M*z,te=M*I,$=E*P,J=U*(Z-F)+R*(V-H)+j*(te-$),X=7771561172376103e-31*((Math.abs(Z)+Math.abs(F))*Math.abs(U)+(Math.abs(V)+Math.abs(H))*Math.abs(R)+(Math.abs(te)+Math.abs($))*Math.abs(j));return J>X||-J>X?J:g(y,k,f,S)}];function m(y){var k=d[y.length];return k||(k=d[y.length]=c(y.length)),k.apply(void 0,y)}function x(y,k,f,S,M,E,O){return function(P,I,z,U,R){switch(arguments.length){case 0:case 1:return 0;case 2:return S(P,I);case 3:return M(P,I,z);case 4:return E(P,I,z,U);case 5:return O(P,I,z,U,R)}for(var j=new Array(arguments.length),Z=0;Z<arguments.length;++Z)j[Z]=arguments[Z];return y(j)}}(function(){for(;d.length<=5;)d.push(c(d.length));h.exports=x.apply(void 0,[m].concat(d));for(var y=0;y<=5;++y)h.exports[y]=d[y]})()},2019:function(h,s,t){var a=t(9662),n=t(8289);h.exports=function(r,l){if(r.length===1)return n(l,r[0]);if(l.length===1)return n(r,l[0]);if(r.length===0||l.length===0)return[0];var o=[0];if(r.length<l.length)for(var u=0;u<r.length;++u)o=a(o,n(l,r[u]));else for(u=0;u<l.length;++u)o=a(o,n(r,l[u]));return o}},8289:function(h,s,t){var a=t(9660),n=t(87);h.exports=function(r,l){var o=r.length;if(o===1){var u=a(r[0],l);return u[0]?u:[u[1]]}var p=new Array(2*o),c=[.1,.1],b=[.1,.1],g=0;a(r[0],l,c),c[0]&&(p[g++]=c[0]);for(var d=1;d<o;++d){a(r[d],l,b);var m=c[1];n(m,b[0],c),c[0]&&(p[g++]=c[0]);var x=b[1],y=c[1],k=x+y,f=y-(k-x);c[1]=k,f&&(p[g++]=f)}return c[1]&&(p[g++]=c[1]),g===0&&(p[g++]=0),p.length=g,p}},4434:function(h,s,t){h.exports=function(n,r,l,o){var u=a(n,l,o),p=a(r,l,o);if(u>0&&p>0||u<0&&p<0)return!1;var c=a(l,n,r),b=a(o,n,r);return!(c>0&&b>0||c<0&&b<0)&&(u!==0||p!==0||c!==0||b!==0||function(g,d,m,x){for(var y=0;y<2;++y){var k=g[y],f=d[y],S=Math.min(k,f),M=Math.max(k,f),E=m[y],O=x[y],P=Math.min(E,O);if(Math.max(E,O)<S||M<P)return!1}return!0}(n,r,l,o))};var a=t(417)[3]},4078:function(h){h.exports=function(s,t){var a=0|s.length,n=0|t.length;if(a===1&&n===1)return function(P,I){var z=P+I,U=z-P,R=P-(z-U)+(I-U);return R?[R,z]:[z]}(s[0],-t[0]);var r,l,o=new Array(a+n),u=0,p=0,c=0,b=Math.abs,g=s[p],d=b(g),m=-t[c],x=b(m);d<x?(l=g,(p+=1)<a&&(d=b(g=s[p]))):(l=m,(c+=1)<n&&(x=b(m=-t[c]))),p<a&&d<x||c>=n?(r=g,(p+=1)<a&&(d=b(g=s[p]))):(r=m,(c+=1)<n&&(x=b(m=-t[c])));for(var y,k,f=r+l,S=f-r,M=l-S,E=M,O=f;p<a&&c<n;)d<x?(r=g,(p+=1)<a&&(d=b(g=s[p]))):(r=m,(c+=1)<n&&(x=b(m=-t[c]))),(M=(l=E)-(S=(f=r+l)-r))&&(o[u++]=M),E=O-((y=O+f)-(k=y-O))+(f-k),O=y;for(;p<a;)(M=(l=E)-(S=(f=(r=g)+l)-r))&&(o[u++]=M),E=O-((y=O+f)-(k=y-O))+(f-k),O=y,(p+=1)<a&&(g=s[p]);for(;c<n;)(M=(l=E)-(S=(f=(r=m)+l)-r))&&(o[u++]=M),E=O-((y=O+f)-(k=y-O))+(f-k),O=y,(c+=1)<n&&(m=-t[c]);return E&&(o[u++]=E),O&&(o[u++]=O),u||(o[u++]=0),o.length=u,o}},9662:function(h){h.exports=function(s,t){var a=0|s.length,n=0|t.length;if(a===1&&n===1)return function(P,I){var z=P+I,U=z-P,R=P-(z-U)+(I-U);return R?[R,z]:[z]}(s[0],t[0]);var r,l,o=new Array(a+n),u=0,p=0,c=0,b=Math.abs,g=s[p],d=b(g),m=t[c],x=b(m);d<x?(l=g,(p+=1)<a&&(d=b(g=s[p]))):(l=m,(c+=1)<n&&(x=b(m=t[c]))),p<a&&d<x||c>=n?(r=g,(p+=1)<a&&(d=b(g=s[p]))):(r=m,(c+=1)<n&&(x=b(m=t[c])));for(var y,k,f=r+l,S=f-r,M=l-S,E=M,O=f;p<a&&c<n;)d<x?(r=g,(p+=1)<a&&(d=b(g=s[p]))):(r=m,(c+=1)<n&&(x=b(m=t[c]))),(M=(l=E)-(S=(f=r+l)-r))&&(o[u++]=M),E=O-((y=O+f)-(k=y-O))+(f-k),O=y;for(;p<a;)(M=(l=E)-(S=(f=(r=g)+l)-r))&&(o[u++]=M),E=O-((y=O+f)-(k=y-O))+(f-k),O=y,(p+=1)<a&&(g=s[p]);for(;c<n;)(M=(l=E)-(S=(f=(r=m)+l)-r))&&(o[u++]=M),E=O-((y=O+f)-(k=y-O))+(f-k),O=y,(c+=1)<n&&(m=t[c]);return E&&(o[u++]=E),O&&(o[u++]=O),u||(o[u++]=0),o.length=u,o}},8691:function(h,s,t){h.exports=function(r){return n(a(r))};var a=t(2692),n=t(7037)},7212:function(h,s,t){h.exports=function(o,u,p,c){if(p=p||0,c===void 0&&(c=function(f){for(var S=f.length,M=0,E=0;E<S;++E)M=0|Math.max(M,f[E].length);return M-1}(o)),o.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var b=function(f,S){for(var M=f.length,E=n.mallocUint8(M),O=0;O<M;++O)E[O]=f[O]<S|0;return E}(u,+p),g=function(f,S){for(var M=f.length,E=S*(S+1)/2*M|0,O=n.mallocUint32(2*E),P=0,I=0;I<M;++I)for(var z=f[I],U=(S=z.length,0);U<S;++U)for(var R=0;R<U;++R){var j=z[R],Z=z[U];O[P++]=0|Math.min(j,Z),O[P++]=0|Math.max(j,Z)}r(a(O,[P/2|0,2]));var F=2;for(I=2;I<P;I+=2)O[I-2]===O[I]&&O[I-1]===O[I+1]||(O[F++]=O[I],O[F++]=O[I+1]);return a(O,[F/2|0,2])}(o,c),d=function(f,S,M,E){for(var O=f.data,P=f.shape[0],I=n.mallocDouble(P),z=0,U=0;U<P;++U){var R=O[2*U],j=O[2*U+1];if(M[R]!==M[j]){var Z=S[R],F=S[j];O[2*z]=R,O[2*z+1]=j,I[z++]=(F-E)/(F-Z)}}return f.shape[0]=z,a(I,[z])}(g,u,b,+p),m=function(f,S){var M=n.mallocInt32(2*S),E=f.shape[0],O=f.data;M[0]=0;for(var P=0,I=0;I<E;++I){var z=O[2*I];if(z!==P){for(M[2*P+1]=I;++P<z;)M[2*P]=I,M[2*P+1]=I;M[2*P]=I}}for(M[2*P+1]=E;++P<S;)M[2*P]=M[2*P+1]=E;return M}(g,0|u.length),x=l(c)(o,g.data,m,b),y=function(f){for(var S=0|f.shape[0],M=f.data,E=new Array(S),O=0;O<S;++O)E[O]=[M[2*O],M[2*O+1]];return E}(g),k=[].slice.call(d.data,0,d.shape[0]);return n.free(b),n.free(g.data),n.free(d.data),n.free(m),{cells:x,vertexIds:y,vertexWeights:k}};var a=t(5050),n=t(5306),r=t(8729),l=t(1168)},1168:function(h){h.exports=function(t){return s[t]()};var s=[function(){return function(t,a,n,r){for(var l=t.length,o=0;o<l;++o)t[o].length;return[]}},function(){function t(a,n,r,l){for(var o=0|Math.min(r,l),u=0|Math.max(r,l),p=a[2*o],c=a[2*o+1];p<c;){var b=p+c>>1,g=n[2*b+1];if(g===u)return b;u<g?c=b:p=b+1}return p}return function(a,n,r,l){for(var o=a.length,u=[],p=0;p<o;++p){var c=a[p];if(c.length===2){var b=(l[c[0]]<<0)+(l[c[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(a,n,r,l){for(var o=0|Math.min(r,l),u=0|Math.max(r,l),p=a[2*o],c=a[2*o+1];p<c;){var b=p+c>>1,g=n[2*b+1];if(g===u)return b;u<g?c=b:p=b+1}return p}return function(a,n,r,l){for(var o=a.length,u=[],p=0;p<o;++p){var c=a[p],b=c.length;if(b===3){if((g=(l[c[0]]<<0)+(l[c[1]]<<1)+(l[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(b===2){var g;if((g=(l[c[0]]<<0)+(l[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(a,n,r,l){for(var o=0|Math.min(r,l),u=0|Math.max(r,l),p=a[2*o],c=a[2*o+1];p<c;){var b=p+c>>1,g=n[2*b+1];if(g===u)return b;u<g?c=b:p=b+1}return p}return function(a,n,r,l){for(var o=a.length,u=[],p=0;p<o;++p){var c=a[p],b=c.length;if(b===4){if((g=(l[c[0]]<<0)+(l[c[1]]<<1)+(l[c[2]]<<2)+(l[c[3]]<<3))==0||g===15)continue;switch(g){case 0:case 15:break;case 1:u.push([t(r,n,c[0],c[1]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])]);break;case 2:u.push([t(r,n,c[1],c[2]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])]);break;case 3:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])],[t(r,n,c[1],c[3]),t(r,n,c[1],c[2]),t(r,n,c[0],c[3])]);break;case 4:u.push([t(r,n,c[2],c[0]),t(r,n,c[2],c[1]),t(r,n,c[2],c[3])]);break;case 5:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[0],c[3])],[t(r,n,c[2],c[1]),t(r,n,c[2],c[3]),t(r,n,c[0],c[3])]);break;case 6:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])],[t(r,n,c[2],c[3]),t(r,n,c[2],c[0]),t(r,n,c[1],c[3])]);break;case 7:u.push([t(r,n,c[0],c[3]),t(r,n,c[1],c[3]),t(r,n,c[2],c[3])]);break;case 8:u.push([t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[3],c[2])]);break;case 9:u.push([t(r,n,c[3],c[1]),t(r,n,c[0],c[1]),t(r,n,c[0],c[2])],[t(r,n,c[3],c[2]),t(r,n,c[3],c[1]),t(r,n,c[0],c[2])]);break;case 10:u.push([t(r,n,c[1],c[0]),t(r,n,c[3],c[0]),t(r,n,c[1],c[2])],[t(r,n,c[3],c[0]),t(r,n,c[3],c[2]),t(r,n,c[1],c[2])]);break;case 11:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[3],c[2])]);break;case 12:u.push([t(r,n,c[3],c[0]),t(r,n,c[2],c[0]),t(r,n,c[2],c[1])],[t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[2],c[1])]);break;case 13:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[3],c[1])]);break;case 14:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[3],c[0])])}}else if(b===3){if((g=(l[c[0]]<<0)+(l[c[1]]<<1)+(l[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(b===2){var g;if((g=(l[c[0]]<<0)+(l[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}}]},8211:function(h,s,t){t(2288),t(1731),s.H=function(a,n){var r=a.length,l=a.length-n.length,o=Math.min;if(l)return l;switch(r){case 0:return 0;case 1:return a[0]-n[0];case 2:return(c=a[0]+a[1]-n[0]-n[1])||o(a[0],a[1])-o(n[0],n[1]);case 3:var u=a[0]+a[1],p=n[0]+n[1];if(c=u+a[2]-(p+n[2]))return c;var c,b=o(a[0],a[1]),g=o(n[0],n[1]);return(c=o(b,a[2])-o(g,n[2]))||o(b+a[2],u)-o(g+n[2],p);default:var d=a.slice(0);d.sort();var m=n.slice(0);m.sort();for(var x=0;x<r;++x)if(l=d[x]-m[x])return l;return 0}}},9392:function(h,s){function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(n){return(n>0)-(n<0)},s.abs=function(n){var r=n>>31;return(n^r)-r},s.min=function(n,r){return r^(n^r)&-(n<r)},s.max=function(n,r){return n^(n^r)&-(n<r)},s.isPow2=function(n){return!(n&n-1||!n)},s.log2=function(n){var r,l;return r=(n>65535)<<4,r|=l=((n>>>=r)>255)<<3,r|=l=((n>>>=l)>15)<<2,(r|=l=((n>>>=l)>3)<<1)|(n>>>=l)>>1},s.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},s.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,1+((n|=n>>>8)|n>>>16)},s.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},s.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var a=new Array(256);(function(n){for(var r=0;r<256;++r){var l=r,o=r,u=7;for(l>>>=1;l;l>>>=1)o<<=1,o|=1&l,--u;n[r]=o<<u&255}})(a),s.reverse=function(n){return a[255&n]<<24|a[n>>>8&255]<<16|a[n>>>16&255]<<8|a[n>>>24&255]},s.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},s.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},s.interleave3=function(n,r,l){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<2},s.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},s.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},6656:function(h,s,t){var a=t(9392),n=t(9521);function r(g,d){var m=g.length,x=g.length-d.length,y=Math.min;if(x)return x;switch(m){case 0:return 0;case 1:return g[0]-d[0];case 2:return(S=g[0]+g[1]-d[0]-d[1])||y(g[0],g[1])-y(d[0],d[1]);case 3:var k=g[0]+g[1],f=d[0]+d[1];if(S=k+g[2]-(f+d[2]))return S;var S,M=y(g[0],g[1]),E=y(d[0],d[1]);return(S=y(M,g[2])-y(E,d[2]))||y(M+g[2],k)-y(E+d[2],f);default:var O=g.slice(0);O.sort();var P=d.slice(0);P.sort();for(var I=0;I<m;++I)if(x=O[I]-P[I])return x;return 0}}function l(g,d){return r(g[0],d[0])}function o(g,d){if(d){for(var m=g.length,x=new Array(m),y=0;y<m;++y)x[y]=[g[y],d[y]];for(x.sort(l),y=0;y<m;++y)g[y]=x[y][0],d[y]=x[y][1];return g}return g.sort(r),g}function u(g){if(g.length===0)return[];for(var d=1,m=g.length,x=1;x<m;++x){var y=g[x];if(r(y,g[x-1])){if(x===d){d++;continue}g[d++]=y}}return g.length=d,g}function p(g,d){for(var m=0,x=g.length-1,y=-1;m<=x;){var k=m+x>>1,f=r(g[k],d);f<=0?(f===0&&(y=k),m=k+1):f>0&&(x=k-1)}return y}function c(g,d){for(var m=new Array(g.length),x=0,y=m.length;x<y;++x)m[x]=[];for(var k=[],f=(x=0,d.length);x<f;++x)for(var S=d[x],M=S.length,E=1,O=1<<M;E<O;++E){k.length=a.popCount(E);for(var P=0,I=0;I<M;++I)E&1<<I&&(k[P++]=S[I]);var z=p(g,k);if(!(z<0))for(;m[z++].push(x),!(z>=g.length||r(g[z],k)!==0););}return m}function b(g,d){if(d<0)return[];for(var m=[],x=(1<<d+1)-1,y=0;y<g.length;++y)for(var k=g[y],f=x;f<1<<k.length;f=a.nextCombination(f)){for(var S=new Array(d+1),M=0,E=0;E<k.length;++E)f&1<<E&&(S[M++]=k[E]);m.push(S)}return o(m)}s.dimension=function(g){for(var d=0,m=Math.max,x=0,y=g.length;x<y;++x)d=m(d,g[x].length);return d-1},s.countVertices=function(g){for(var d=-1,m=Math.max,x=0,y=g.length;x<y;++x)for(var k=g[x],f=0,S=k.length;f<S;++f)d=m(d,k[f]);return d+1},s.cloneCells=function(g){for(var d=new Array(g.length),m=0,x=g.length;m<x;++m)d[m]=g[m].slice(0);return d},s.compareCells=r,s.normalize=o,s.unique=u,s.findCell=p,s.incidence=c,s.dual=function(g,d){if(!d)return c(u(b(g,0)),g);for(var m=new Array(d),x=0;x<d;++x)m[x]=[];x=0;for(var y=g.length;x<y;++x)for(var k=g[x],f=0,S=k.length;f<S;++f)m[k[f]].push(x);return m},s.explode=function(g){for(var d=[],m=0,x=g.length;m<x;++m)for(var y=g[m],k=0|y.length,f=1,S=1<<k;f<S;++f){for(var M=[],E=0;E<k;++E)f>>>E&1&&M.push(y[E]);d.push(M)}return o(d)},s.skeleton=b,s.boundary=function(g){for(var d=[],m=0,x=g.length;m<x;++m)for(var y=g[m],k=0,f=y.length;k<f;++k){for(var S=new Array(y.length-1),M=0,E=0;M<f;++M)M!==k&&(S[E++]=y[M]);d.push(S)}return o(d)},s.connectedComponents=function(g,d){return d?function(m,x){for(var y=new n(x),k=0;k<m.length;++k)for(var f=m[k],S=0;S<f.length;++S)for(var M=S+1;M<f.length;++M)y.link(f[S],f[M]);var E=[],O=y.ranks;for(k=0;k<O.length;++k)O[k]=-1;for(k=0;k<m.length;++k){var P=y.find(m[k][0]);O[P]<0?(O[P]=E.length,E.push([m[k].slice(0)])):E[O[P]].push(m[k].slice(0))}return E}(g,d):function(m){for(var x=u(o(b(m,0))),y=new n(x.length),k=0;k<m.length;++k)for(var f=m[k],S=0;S<f.length;++S)for(var M=p(x,[f[S]]),E=S+1;E<f.length;++E)y.link(M,p(x,[f[E]]));var O=[],P=y.ranks;for(k=0;k<P.length;++k)P[k]=-1;for(k=0;k<m.length;++k){var I=y.find(p(x,[m[k][0]]));P[I]<0?(P[I]=O.length,O.push([m[k].slice(0)])):O[P[I]].push(m[k].slice(0))}return O}(g)}},9521:function(h){function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var a=0;a<t;++a)this.roots[a]=a,this.ranks[a]=0}h.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var a=this.roots;a[t]!==t;){var n=a[t];a[t]=a[n],t=n}return t},s.prototype.link=function(t,a){var n=this.find(t),r=this.find(a);if(n!==r){var l=this.ranks,o=this.roots,u=l[n],p=l[r];u<p?o[n]=r:p<u?o[r]=n:(o[r]=n,++l[n])}}},8243:function(h,s,t){h.exports=function(r,l,o){for(var u=l.length,p=r.length,c=new Array(u),b=new Array(u),g=new Array(u),d=new Array(u),m=0;m<u;++m)c[m]=b[m]=-1,g[m]=1/0,d[m]=!1;for(m=0;m<p;++m){var x=r[m];if(x.length!==2)throw new Error("Input must be a graph");var y=x[1],k=x[0];b[k]!==-1?b[k]=-2:b[k]=y,c[y]!==-1?c[y]=-2:c[y]=k}function f($){if(d[$])return 1/0;var J,X,K,ee=c[$],ie=b[$];return ee<0||ie<0?1/0:(J=l[$],X=l[ee],K=l[ie],Math.abs(a(J,X,K))/Math.sqrt(Math.pow(X[0]-K[0],2)+Math.pow(X[1]-K[1],2)))}function S($,J){var X=R[$],K=R[J];R[$]=K,R[J]=X,j[X]=J,j[K]=$}function M($){return g[R[$]]}function E($){return 1&$?$-1>>1:($>>1)-1}function O($){for(var J=M($);;){var X=J,K=2*$+1,ee=2*($+1),ie=$;if(K<Z){var ae=M(K);ae<X&&(ie=K,X=ae)}if(ee<Z&&M(ee)<X&&(ie=ee),ie===$)return $;S($,ie),$=ie}}function P($){for(var J=M($);$>0;){var X=E($);if(!(X>=0&&J<M(X)))return $;S($,X),$=X}}function I(){if(Z>0){var $=R[0];return S(0,Z-1),Z-=1,O(0),$}return-1}function z($,J){var X=R[$];return g[X]===J?$:(g[X]=-1/0,P($),I(),g[X]=J,P((Z+=1)-1))}function U($){if(!d[$]){d[$]=!0;var J=c[$],X=b[$];c[X]>=0&&(c[X]=J),b[J]>=0&&(b[J]=X),j[J]>=0&&z(j[J],f(J)),j[X]>=0&&z(j[X],f(X))}}var R=[],j=new Array(u);for(m=0;m<u;++m)(g[m]=f(m))<1/0?(j[m]=R.length,R.push(m)):j[m]=-1;var Z=R.length;for(m=Z>>1;m>=0;--m)O(m);for(;;){var F=I();if(F<0||g[F]>o)break;U(F)}var V=[];for(m=0;m<u;++m)d[m]||(j[m]=V.length,V.push(l[m].slice()));function H($,J){if($[J]<0)return J;var X=J,K=J;do{var ee=$[K];if(!d[K]||ee<0||ee===K||(ee=$[K=ee],!d[K]||ee<0||ee===K))break;K=ee,X=$[X]}while(X!==K);for(var ie=J;ie!==K;ie=$[ie])$[ie]=K;return K}V.length;var te=[];return r.forEach(function($){var J=H(c,$[0]),X=H(b,$[1]);if(J>=0&&X>=0&&J!==X){var K=j[J],ee=j[X];K!==ee&&te.push([K,ee])}}),n.unique(n.normalize(te)),{positions:V,edges:te}};var a=t(417),n=t(6656)},6638:function(h,s,t){h.exports=function(r,l){var o,u,p,c;if(l[0][0]<l[1][0])o=l[0],u=l[1];else{if(!(l[0][0]>l[1][0]))return n(l,r);o=l[1],u=l[0]}if(r[0][0]<r[1][0])p=r[0],c=r[1];else{if(!(r[0][0]>r[1][0]))return-n(r,l);p=r[1],c=r[0]}var b=a(o,u,c),g=a(o,u,p);if(b<0){if(g<=0)return b}else if(b>0){if(g>=0)return b}else if(g)return g;if(b=a(c,p,u),g=a(c,p,o),b<0){if(g<=0)return b}else if(b>0){if(g>=0)return b}else if(g)return g;return u[0]-c[0]};var a=t(417);function n(r,l){var o,u,p,c;if(l[0][0]<l[1][0])o=l[0],u=l[1];else{if(!(l[0][0]>l[1][0])){var b=Math.min(r[0][1],r[1][1]),g=Math.max(r[0][1],r[1][1]),d=Math.min(l[0][1],l[1][1]),m=Math.max(l[0][1],l[1][1]);return g<d?g-d:b>m?b-m:g-m}o=l[1],u=l[0]}r[0][1]<r[1][1]?(p=r[0],c=r[1]):(p=r[1],c=r[0]);var x=a(u,o,p);return x||(x=a(u,o,c))||c-u}},4385:function(h,s,t){h.exports=function(g){for(var d=g.length,m=2*d,x=new Array(m),y=0;y<d;++y){var k=g[y],f=k[0][0]<k[1][0];x[2*y]=new b(k[0][0],k,f,y),x[2*y+1]=new b(k[1][0],k,!f,y)}x.sort(function(U,R){var j=U.x-R.x;return j||(j=U.create-R.create)||Math.min(U.segment[0][1],U.segment[1][1])-Math.min(R.segment[0][1],R.segment[1][1])});var S=n(l),M=[],E=[],O=[];for(y=0;y<m;){for(var P=x[y].x,I=[];y<m;){var z=x[y];if(z.x!==P)break;y+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(I.push(new c(z.segment[0][1],z.index,!0,!0)),I.push(new c(z.segment[1][1],z.index,!1,!1))):(I.push(new c(z.segment[1][1],z.index,!0,!1)),I.push(new c(z.segment[0][1],z.index,!1,!0)))):S=z.create?S.insert(z.segment,z.index):S.remove(z.segment)}M.push(S.root),E.push(P),O.push(I)}return new o(M,E,O)};var a=t(5070),n=t(7080),r=t(417),l=t(6638);function o(g,d,m){this.slabs=g,this.coordinates=d,this.horizontal=m}function u(g,d){return g.y-d}function p(g,d){for(var m=null;g;){var x,y,k=g.key;k[0][0]<k[1][0]?(x=k[0],y=k[1]):(x=k[1],y=k[0]);var f=r(x,y,d);if(f<0)g=g.left;else if(f>0)if(d[0]!==k[1][0])m=g,g=g.right;else{if(S=p(g.right,d))return S;g=g.left}else{if(d[0]!==k[1][0])return g;var S;if(S=p(g.right,d))return S;g=g.left}}return m}function c(g,d,m,x){this.y=g,this.index=d,this.start=m,this.closed=x}function b(g,d,m,x){this.x=g,this.segment=d,this.create=m,this.index=x}o.prototype.castUp=function(g){var d=a.le(this.coordinates,g[0]);if(d<0)return-1;this.slabs[d];var m=p(this.slabs[d],g),x=-1;if(m&&(x=m.value),this.coordinates[d]===g[0]){var y=null;if(m&&(y=m.key),d>0){var k=p(this.slabs[d-1],g);k&&(y?l(k.key,y)>0&&(y=k.key,x=k.value):(x=k.value,y=k.key))}var f=this.horizontal[d];if(f.length>0){var S=a.ge(f,g[1],u);if(S<f.length){var M=f[S];if(g[1]===M.y){if(M.closed)return M.index;for(;S<f.length-1&&f[S+1].y===g[1];)if((M=f[S+=1]).closed)return M.index;if(M.y===g[1]&&!M.start){if((S+=1)>=f.length)return x;M=f[S]}}if(M.start)if(y){var E=r(y[0],y[1],[g[0],M.y]);y[0][0]>y[1][0]&&(E=-E),E>0&&(x=M.index)}else x=M.index;else M.y!==g[1]&&(x=M.index)}}}return x}},4670:function(h,s,t){var a=t(9130),n=t(9662);function r(o,u){var p=n(a(o,u),[u[u.length-1]]);return p[p.length-1]}function l(o,u,p,c){var b=-u/(c-u);b<0?b=0:b>1&&(b=1);for(var g=1-b,d=o.length,m=new Array(d),x=0;x<d;++x)m[x]=b*o[x]+g*p[x];return m}h.exports=function(o,u){for(var p=[],c=[],b=r(o[o.length-1],u),g=o[o.length-1],d=o[0],m=0;m<o.length;++m,g=d){var x=r(d=o[m],u);if(b<0&&x>0||b>0&&x<0){var y=l(g,x,d,b);p.push(y),c.push(y.slice())}x<0?c.push(d.slice()):x>0?p.push(d.slice()):(p.push(d.slice()),c.push(d.slice())),b=x}return{positive:p,negative:c}},h.exports.positive=function(o,u){for(var p=[],c=r(o[o.length-1],u),b=o[o.length-1],g=o[0],d=0;d<o.length;++d,b=g){var m=r(g=o[d],u);(c<0&&m>0||c>0&&m<0)&&p.push(l(b,m,g,c)),m>=0&&p.push(g.slice()),c=m}return p},h.exports.negative=function(o,u){for(var p=[],c=r(o[o.length-1],u),b=o[o.length-1],g=o[0],d=0;d<o.length;++d,b=g){var m=r(g=o[d],u);(c<0&&m>0||c>0&&m<0)&&p.push(l(b,m,g,c)),m<=0&&p.push(g.slice()),c=m}return p}},8974:function(h,s,t){var a;(function(){var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(u){return function(p,c){var b,g,d,m,x,y,k,f,S,M=1,E=p.length,O="";for(g=0;g<E;g++)if(typeof p[g]=="string")O+=p[g];else if(typeof p[g]=="object"){if((m=p[g]).keys)for(b=c[M],d=0;d<m.keys.length;d++){if(b==null)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[d],m.keys[d-1]));b=b[m.keys[d]]}else b=m.param_no?c[m.param_no]:c[M++];if(n.not_type.test(m.type)&&n.not_primitive.test(m.type)&&b instanceof Function&&(b=b()),n.numeric_arg.test(m.type)&&typeof b!="number"&&isNaN(b))throw new TypeError(r("[sprintf] expecting number but found %T",b));switch(n.number.test(m.type)&&(f=b>=0),m.type){case"b":b=parseInt(b,10).toString(2);break;case"c":b=String.fromCharCode(parseInt(b,10));break;case"d":case"i":b=parseInt(b,10);break;case"j":b=JSON.stringify(b,null,m.width?parseInt(m.width):0);break;case"e":b=m.precision?parseFloat(b).toExponential(m.precision):parseFloat(b).toExponential();break;case"f":b=m.precision?parseFloat(b).toFixed(m.precision):parseFloat(b);break;case"g":b=m.precision?String(Number(b.toPrecision(m.precision))):parseFloat(b);break;case"o":b=(parseInt(b,10)>>>0).toString(8);break;case"s":b=String(b),b=m.precision?b.substring(0,m.precision):b;break;case"t":b=String(!!b),b=m.precision?b.substring(0,m.precision):b;break;case"T":b=Object.prototype.toString.call(b).slice(8,-1).toLowerCase(),b=m.precision?b.substring(0,m.precision):b;break;case"u":b=parseInt(b,10)>>>0;break;case"v":b=b.valueOf(),b=m.precision?b.substring(0,m.precision):b;break;case"x":b=(parseInt(b,10)>>>0).toString(16);break;case"X":b=(parseInt(b,10)>>>0).toString(16).toUpperCase()}n.json.test(m.type)?O+=b:(!n.number.test(m.type)||f&&!m.sign?S="":(S=f?"+":"-",b=b.toString().replace(n.sign,"")),y=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",k=m.width-(S+b).length,x=m.width&&k>0?y.repeat(k):"",O+=m.align?S+b+x:y==="0"?S+x+b:x+S+b)}return O}(function(p){if(o[p])return o[p];for(var c,b=p,g=[],d=0;b;){if((c=n.text.exec(b))!==null)g.push(c[0]);else if((c=n.modulo.exec(b))!==null)g.push("%");else{if((c=n.placeholder.exec(b))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){d|=1;var m=[],x=c[2],y=[];if((y=n.key.exec(x))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(m.push(y[1]);(x=x.substring(y[0].length))!=="";)if((y=n.key_access.exec(x))!==null)m.push(y[1]);else{if((y=n.index_access.exec(x))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");m.push(y[1])}c[2]=m}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}b=b.substring(c[0].length)}return o[p]=g}(u),arguments)}function l(u,p){return r.apply(null,[u].concat(p||[]))}var o=Object.create(null);s.sprintf=r,s.vsprintf=l,typeof window<"u"&&(window.sprintf=r,window.vsprintf=l,(a=(function(){return{sprintf:r,vsprintf:l}}).call(s,t,s,h))===void 0||(h.exports=a))})()},4162:function(h,s,t){h.exports=function(o,u){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return function(b,g){for(var d=n(b,g),m=d.length,x=new Array(m),y=new Array(m),k=0;k<m;++k)x[k]=[d[k]],y[k]=[k];return{positions:x,cells:y}}(o,u);var p=o.order.join()+"-"+o.dtype,c=l[p];return u=+u||0,c||(c=l[p]=function(b,g){var d=b.length+"d",m=r[d];if(m)return m(a,b,g)}(o.order,o.dtype)),c(o,u)};var a=t(9284),n=t(9584),r={"2d":function(o,u,p){var c=o({order:u,scalarArguments:3,getters:p==="generic"?[0]:void 0,phase:function(b,g,d,m){return b>m|0},vertex:function(b,g,d,m,x,y,k,f,S,M,E,O,P){var I=(k<<0)+(f<<1)+(S<<2)+(M<<3)|0;if(I!==0&&I!==15)switch(I){case 0:case 15:E.push([b-.5,g-.5]);break;case 1:E.push([b-.25-.25*(m+d-2*P)/(d-m),g-.25-.25*(x+d-2*P)/(d-x)]);break;case 2:E.push([b-.75-.25*(-m-d+2*P)/(m-d),g-.25-.25*(y+m-2*P)/(m-y)]);break;case 3:E.push([b-.5,g-.5-.5*(x+d+y+m-4*P)/(d-x+m-y)]);break;case 4:E.push([b-.25-.25*(y+x-2*P)/(x-y),g-.75-.25*(-x-d+2*P)/(x-d)]);break;case 5:E.push([b-.5-.5*(m+d+y+x-4*P)/(d-m+x-y),g-.5]);break;case 6:E.push([b-.5-.25*(-m-d+y+x)/(m-d+x-y),g-.5-.25*(-x-d+y+m)/(x-d+m-y)]);break;case 7:E.push([b-.75-.25*(y+x-2*P)/(x-y),g-.75-.25*(y+m-2*P)/(m-y)]);break;case 8:E.push([b-.75-.25*(-y-x+2*P)/(y-x),g-.75-.25*(-y-m+2*P)/(y-m)]);break;case 9:E.push([b-.5-.25*(m+d+-y-x)/(d-m+y-x),g-.5-.25*(x+d+-y-m)/(d-x+y-m)]);break;case 10:E.push([b-.5-.5*(-m-d-y-x+4*P)/(m-d+y-x),g-.5]);break;case 11:E.push([b-.25-.25*(-y-x+2*P)/(y-x),g-.75-.25*(x+d-2*P)/(d-x)]);break;case 12:E.push([b-.5,g-.5-.5*(-x-d-y-m+4*P)/(x-d+y-m)]);break;case 13:E.push([b-.75-.25*(m+d-2*P)/(d-m),g-.25-.25*(-y-m+2*P)/(y-m)]);break;case 14:E.push([b-.25-.25*(-m-d+2*P)/(m-d),g-.25-.25*(-x-d+2*P)/(x-d)])}},cell:function(b,g,d,m,x,y,k,f,S){x?f.push([b,g]):f.push([g,b])}});return function(b,g){var d=[],m=[];return c(b,d,m,g),{positions:d,cells:m}}}},l={}},6946:function(h,s,t){h.exports=function l(o,u,p){p=p||{};var c=r[o];c||(c=r[o]={" ":{data:new Float32Array(0),shape:.2}});var b=c[u];if(!b)if(u.length<=1||!/\d/.test(u))b=c[u]=function(O){for(var P=O.cells,I=O.positions,z=new Float32Array(6*P.length),U=0,R=0,j=0;j<P.length;++j)for(var Z=P[j],F=0;F<3;++F){var V=I[Z[F]];z[U++]=V[0],z[U++]=V[1]+1.4,R=Math.max(V[0],R)}return{data:z,shape:R}}(a(u,{triangles:!0,font:o,textAlign:p.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var g=u.split(/(\d|\s)/),d=new Array(g.length),m=0,x=0,y=0;y<g.length;++y)d[y]=l(o,g[y]),m+=d[y].data.length,x+=d[y].shape,y>0&&(x+=.02);var k=new Float32Array(m),f=0,S=-.5*x;for(y=0;y<d.length;++y){for(var M=d[y].data,E=0;E<M.length;E+=2)k[f++]=M[E]+S,k[f++]=M[E+1];S+=d[y].shape+.02}b=c[u]={data:k,shape:x}}return b};var a=t(875),n=window||w.global||{},r=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}},14:function(h,s,t){var a=t(4405);h.exports=l;var n=96;function r(o,u){var p=a(getComputedStyle(o).getPropertyValue(u));return p[0]*l(p[1],o)}function l(o,u){switch(u=u||document.body,o=(o||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),o){case"%":return u.clientHeight/100;case"ch":case"ex":return function(p,c){var b=document.createElement("div");b.style["font-size"]="128"+p,c.appendChild(b);var g=r(b,"font-size")/128;return c.removeChild(b),g}(o,u);case"em":return r(u,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},3440:function(h,s,t){h.exports=function(x){var y=(x=x||{}).center||[0,0,0],k=x.up||[0,1,0],f=x.right||b(k),S=x.radius||1,M=x.theta||0,E=x.phi||0;if(y=[].slice.call(y,0,3),k=[].slice.call(k,0,3),o(k,k),f=[].slice.call(f,0,3),o(f,f),"eye"in x){var O=x.eye,P=[O[0]-y[0],O[1]-y[1],O[2]-y[2]];l(f,P,k),p(f[0],f[1],f[2])<1e-6?f=b(k):o(f,f),S=p(P[0],P[1],P[2]);var I=u(k,P)/S,z=u(f,P)/S;E=Math.acos(I),M=Math.acos(z)}return S=Math.log(S),new g(x.zoomMin,x.zoomMax,y,k,f,S,M,E)};var a=t(8444),n=t(7437),r=t(4422),l=t(903),o=t(899),u=t(9305);function p(x,y,k){return Math.sqrt(Math.pow(x,2)+Math.pow(y,2)+Math.pow(k,2))}function c(x){return Math.min(1,Math.max(-1,x))}function b(x){var y=Math.abs(x[0]),k=Math.abs(x[1]),f=Math.abs(x[2]),S=[0,0,0];y>Math.max(k,f)?S[2]=1:k>Math.max(y,f)?S[0]=1:S[1]=1;for(var M=0,E=0,O=0;O<3;++O)M+=x[O]*x[O],E+=S[O]*x[O];for(O=0;O<3;++O)S[O]-=E/M*x[O];return o(S,S),S}function g(x,y,k,f,S,M,E,O){this.center=a(k),this.up=a(f),this.right=a(S),this.radius=a([M]),this.angle=a([E,O]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(x,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var P=0;P<16;++P)this.computedMatrix[P]=.5;this.recalcMatrix(0)}var d=g.prototype;d.setDistanceLimits=function(x,y){x=x>0?Math.log(x):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,x),this.radius.bounds[0][0]=x,this.radius.bounds[1][0]=y},d.getDistanceLimits=function(x){var y=this.radius.bounds[0];return x?(x[0]=Math.exp(y[0][0]),x[1]=Math.exp(y[1][0]),x):[Math.exp(y[0][0]),Math.exp(y[1][0])]},d.recalcMatrix=function(x){this.center.curve(x),this.up.curve(x),this.right.curve(x),this.radius.curve(x),this.angle.curve(x);for(var y=this.computedUp,k=this.computedRight,f=0,S=0,M=0;M<3;++M)S+=y[M]*k[M],f+=y[M]*y[M];var E=Math.sqrt(f),O=0;for(M=0;M<3;++M)k[M]-=y[M]*S/f,O+=k[M]*k[M],y[M]/=E;var P=Math.sqrt(O);for(M=0;M<3;++M)k[M]/=P;var I=this.computedToward;l(I,y,k),o(I,I);var z=Math.exp(this.computedRadius[0]),U=this.computedAngle[0],R=this.computedAngle[1],j=Math.cos(U),Z=Math.sin(U),F=Math.cos(R),V=Math.sin(R),H=this.computedCenter,te=j*F,$=Z*F,J=V,X=-j*V,K=-Z*V,ee=F,ie=this.computedEye,ae=this.computedMatrix;for(M=0;M<3;++M){var oe=te*k[M]+$*I[M]+J*y[M];ae[4*M+1]=X*k[M]+K*I[M]+ee*y[M],ae[4*M+2]=oe,ae[4*M+3]=0}var fe=ae[1],ge=ae[5],ve=ae[9],xe=ae[2],_e=ae[6],ye=ae[10],Ce=ge*ye-ve*_e,ke=ve*xe-fe*ye,Te=fe*_e-ge*xe,le=p(Ce,ke,Te);for(Ce/=le,ke/=le,Te/=le,ae[0]=Ce,ae[4]=ke,ae[8]=Te,M=0;M<3;++M)ie[M]=H[M]+ae[2+4*M]*z;for(M=0;M<3;++M){O=0;for(var ue=0;ue<3;++ue)O+=ae[M+4*ue]*ie[ue];ae[12+M]=-O}ae[15]=1},d.getMatrix=function(x,y){this.recalcMatrix(x);var k=this.computedMatrix;if(y){for(var f=0;f<16;++f)y[f]=k[f];return y}return k};var m=[0,0,0];d.rotate=function(x,y,k,f){if(this.angle.move(x,y,k),f){this.recalcMatrix(x);var S=this.computedMatrix;m[0]=S[2],m[1]=S[6],m[2]=S[10];for(var M=this.computedUp,E=this.computedRight,O=this.computedToward,P=0;P<3;++P)S[4*P]=M[P],S[4*P+1]=E[P],S[4*P+2]=O[P];for(r(S,S,f,m),P=0;P<3;++P)M[P]=S[4*P],E[P]=S[4*P+1];this.up.set(x,M[0],M[1],M[2]),this.right.set(x,E[0],E[1],E[2])}},d.pan=function(x,y,k,f){y=y||0,k=k||0,f=f||0,this.recalcMatrix(x);var S=this.computedMatrix,M=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],O=S[9],P=p(M,E,O);M/=P,E/=P,O/=P;var I=S[0],z=S[4],U=S[8],R=I*M+z*E+U*O,j=p(I-=M*R,z-=E*R,U-=O*R),Z=(I/=j)*y+M*k,F=(z/=j)*y+E*k,V=(U/=j)*y+O*k;this.center.move(x,Z,F,V);var H=Math.exp(this.computedRadius[0]);H=Math.max(1e-4,H+f),this.radius.set(x,Math.log(H))},d.translate=function(x,y,k,f){this.center.move(x,y||0,k||0,f||0)},d.setMatrix=function(x,y,k,f){var S=1;typeof k=="number"&&(S=0|k),(S<0||S>3)&&(S=1);var M=(S+2)%3;y||(this.recalcMatrix(x),y=this.computedMatrix);var E=y[S],O=y[S+4],P=y[S+8];if(f){var I=Math.abs(E),z=Math.abs(O),U=Math.abs(P),R=Math.max(I,z,U);I===R?(E=E<0?-1:1,O=P=0):U===R?(P=P<0?-1:1,E=O=0):(O=O<0?-1:1,E=P=0)}else{var j=p(E,O,P);E/=j,O/=j,P/=j}var Z,F,V=y[M],H=y[M+4],te=y[M+8],$=V*E+H*O+te*P,J=p(V-=E*$,H-=O*$,te-=P*$),X=O*(te/=J)-P*(H/=J),K=P*(V/=J)-E*te,ee=E*H-O*V,ie=p(X,K,ee);if(X/=ie,K/=ie,ee/=ie,this.center.jump(x,Ee,Oe,Fe),this.radius.idle(x),this.up.jump(x,E,O,P),this.right.jump(x,V,H,te),S===2){var ae=y[1],oe=y[5],fe=y[9],ge=ae*V+oe*H+fe*te,ve=ae*X+oe*K+fe*ee;Z=Ce<0?-Math.PI/2:Math.PI/2,F=Math.atan2(ve,ge)}else{var xe=y[2],_e=y[6],ye=y[10],Ce=xe*E+_e*O+ye*P,ke=xe*V+_e*H+ye*te,Te=xe*X+_e*K+ye*ee;Z=Math.asin(c(Ce)),F=Math.atan2(Te,ke)}this.angle.jump(x,F,Z),this.recalcMatrix(x);var le=y[2],ue=y[6],de=y[10],Le=this.computedMatrix;n(Le,y);var we=Le[15],Ee=Le[12]/we,Oe=Le[13]/we,Fe=Le[14]/we,pe=Math.exp(this.computedRadius[0]);this.center.jump(x,Ee-le*pe,Oe-ue*pe,Fe-de*pe)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(x){this.center.idle(x),this.up.idle(x),this.right.idle(x),this.radius.idle(x),this.angle.idle(x)},d.flush=function(x){this.center.flush(x),this.up.flush(x),this.right.flush(x),this.radius.flush(x),this.angle.flush(x)},d.setDistance=function(x,y){y>0&&this.radius.set(x,Math.log(y))},d.lookAt=function(x,y,k,f){this.recalcMatrix(x),y=y||this.computedEye,k=k||this.computedCenter;var S=(f=f||this.computedUp)[0],M=f[1],E=f[2],O=p(S,M,E);if(!(O<1e-6)){S/=O,M/=O,E/=O;var P=y[0]-k[0],I=y[1]-k[1],z=y[2]-k[2],U=p(P,I,z);if(!(U<1e-6)){P/=U,I/=U,z/=U;var R=this.computedRight,j=R[0],Z=R[1],F=R[2],V=S*j+M*Z+E*F,H=p(j-=V*S,Z-=V*M,F-=V*E);if(!(H<.01&&(H=p(j=M*z-E*I,Z=E*P-S*z,F=S*I-M*P))<1e-6)){j/=H,Z/=H,F/=H,this.up.set(x,S,M,E),this.right.set(x,j,Z,F),this.center.set(x,k[0],k[1],k[2]),this.radius.set(x,Math.log(U));var te=M*F-E*Z,$=E*j-S*F,J=S*Z-M*j,X=p(te,$,J),K=S*P+M*I+E*z,ee=j*P+Z*I+F*z,ie=(te/=X)*P+($/=X)*I+(J/=X)*z,ae=Math.asin(c(K)),oe=Math.atan2(ie,ee),fe=this.angle._state,ge=fe[fe.length-1],ve=fe[fe.length-2];ge%=2*Math.PI;var xe=Math.abs(ge+2*Math.PI-oe),_e=Math.abs(ge-oe),ye=Math.abs(ge-2*Math.PI-oe);xe<_e&&(ge+=2*Math.PI),ye<_e&&(ge-=2*Math.PI),this.angle.jump(this.angle.lastT(),ge,ve),this.angle.set(x,oe,ae)}}}}},9660:function(h){h.exports=function(t,a,n){var r=t*a,l=s*t,o=l-(l-t),u=t-o,p=s*a,c=p-(p-a),b=a-c,g=u*b-(r-o*c-u*c-o*b);return n?(n[0]=g,n[1]=r,n):[g,r]};var s=+(Math.pow(2,27)+1)},87:function(h){h.exports=function(s,t,a){var n=s+t,r=n-s,l=t-r,o=s-(n-r);return a?(a[0]=o+l,a[1]=n,a):[o+l,n]}},5306:function(h,s,t){var a=t(2288),n=t(3094),r=t(2146).lW;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var l=typeof Uint8ClampedArray<"u",o=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",p=t.g.__TYPEDARRAY_POOL;p.UINT8C||(p.UINT8C=n([32,0])),p.BIGUINT64||(p.BIGUINT64=n([32,0])),p.BIGINT64||(p.BIGINT64=n([32,0])),p.BUFFER||(p.BUFFER=n([32,0]));var c=p.DATA,b=p.BUFFER;function g(R){if(R){var j=R.length||R.byteLength,Z=a.log2(j);c[Z].push(R)}}function d(R){R=a.nextPow2(R);var j=a.log2(R),Z=c[j];return Z.length>0?Z.pop():new ArrayBuffer(R)}function m(R){return new Uint8Array(d(R),0,R)}function x(R){return new Uint16Array(d(2*R),0,R)}function y(R){return new Uint32Array(d(4*R),0,R)}function k(R){return new Int8Array(d(R),0,R)}function f(R){return new Int16Array(d(2*R),0,R)}function S(R){return new Int32Array(d(4*R),0,R)}function M(R){return new Float32Array(d(4*R),0,R)}function E(R){return new Float64Array(d(8*R),0,R)}function O(R){return l?new Uint8ClampedArray(d(R),0,R):m(R)}function P(R){return o?new BigUint64Array(d(8*R),0,R):null}function I(R){return u?new BigInt64Array(d(8*R),0,R):null}function z(R){return new DataView(d(R),0,R)}function U(R){R=a.nextPow2(R);var j=a.log2(R),Z=b[j];return Z.length>0?Z.pop():new r(R)}s.free=function(R){if(r.isBuffer(R))b[a.log2(R.length)].push(R);else{if(Object.prototype.toString.call(R)!=="[object ArrayBuffer]"&&(R=R.buffer),!R)return;var j=R.length||R.byteLength,Z=0|a.log2(j);c[Z].push(R)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(R){g(R.buffer)},s.freeArrayBuffer=g,s.freeBuffer=function(R){b[a.log2(R.length)].push(R)},s.malloc=function(R,j){if(j===void 0||j==="arraybuffer")return d(R);switch(j){case"uint8":return m(R);case"uint16":return x(R);case"uint32":return y(R);case"int8":return k(R);case"int16":return f(R);case"int32":return S(R);case"float":case"float32":return M(R);case"double":case"float64":return E(R);case"uint8_clamped":return O(R);case"bigint64":return I(R);case"biguint64":return P(R);case"buffer":return U(R);case"data":case"dataview":return z(R);default:return null}return null},s.mallocArrayBuffer=d,s.mallocUint8=m,s.mallocUint16=x,s.mallocUint32=y,s.mallocInt8=k,s.mallocInt16=f,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=M,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=O,s.mallocBigUint64=P,s.mallocBigInt64=I,s.mallocDataView=z,s.mallocBuffer=U,s.clearCache=function(){for(var R=0;R<32;++R)p.UINT8[R].length=0,p.UINT16[R].length=0,p.UINT32[R].length=0,p.INT8[R].length=0,p.INT16[R].length=0,p.INT32[R].length=0,p.FLOAT[R].length=0,p.DOUBLE[R].length=0,p.BIGUINT64[R].length=0,p.BIGINT64[R].length=0,p.UINT8C[R].length=0,c[R].length=0,b[R].length=0}},1731:function(h){function s(a){this.roots=new Array(a),this.ranks=new Array(a);for(var n=0;n<a;++n)this.roots[n]=n,this.ranks[n]=0}h.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},t.find=function(a){for(var n=a,r=this.roots;r[a]!==a;)a=r[a];for(;r[n]!==a;){var l=r[n];r[n]=a,n=l}return a},t.link=function(a,n){var r=this.find(a),l=this.find(n);if(r!==l){var o=this.ranks,u=this.roots,p=o[r],c=o[l];p<c?u[r]=l:c<p?u[l]=r:(u[l]=r,++o[r])}}},1215:function(h){h.exports=function(s,t,a){return s.length===0?s:t?(a||s.sort(t),function(n,r){for(var l=1,o=n.length,u=n[0],p=n[0],c=1;c<o;++c)if(p=u,r(u=n[c],p)){if(c===l){l++;continue}n[l++]=u}return n.length=l,n}(s,t)):(a||s.sort(),function(n){for(var r=1,l=n.length,o=n[0],u=n[0],p=1;p<l;++p,u=o)if(u=o,(o=n[p])!==u){if(p===r){r++;continue}n[r++]=o}return n.length=r,n}(s))}},875:function(h,s,t){h.exports=function(l,o){return typeof o=="object"&&o!==null||(o={}),a(l,o.canvas||n,o.context||r,o)};var a=t(712),n=null,r=null;typeof document<"u"&&((n=document.createElement("canvas")).width=8192,n.height=1024,r=n.getContext("2d"))},712:function(h,s,t){h.exports=function(P,I,z,U){var R=64,j=1.25,Z={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return U&&(U.size&&U.size>0&&(R=U.size),U.lineSpacing&&U.lineSpacing>0&&(j=U.lineSpacing),U.styletags&&U.styletags.breaklines&&(Z.breaklines=!!U.styletags.breaklines),U.styletags&&U.styletags.bolds&&(Z.bolds=!!U.styletags.bolds),U.styletags&&U.styletags.italics&&(Z.italics=!!U.styletags.italics),U.styletags&&U.styletags.subscripts&&(Z.subscripts=!!U.styletags.subscripts),U.styletags&&U.styletags.superscripts&&(Z.superscripts=!!U.styletags.superscripts)),z.font=[U.fontStyle,U.fontVariant,U.fontWeight,R+"px",U.font].filter(function(F){return F}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr",O(function(F,V,H,te,$,J){H=H.replace(/\n/g,""),H=J.breaklines===!0?H.replace(/\<br\>/g,`
`):H.replace(/\<br\>/g," ");var X="",K=[];for(oe=0;oe<H.length;++oe)K[oe]=X;J.bolds===!0&&(K=S(p,c,H,K)),J.italics===!0&&(K=S(b,g,H,K)),J.superscripts===!0&&(K=S(d,x,H,K)),J.subscripts===!0&&(K=S(y,f,H,K));var ee=[],ie="";for(oe=0;oe<H.length;++oe)K[oe]!==null&&(ie+=H[oe],ee.push(K[oe]));var ae,oe,fe,ge,ve,xe=ie.split(`
`),_e=xe.length,ye=Math.round($*te),Ce=te,ke=2*te,Te=0,le=_e*ye+ke;F.height<le&&(F.height=le),V.fillStyle="#000",V.fillRect(0,0,F.width,F.height),V.fillStyle="#fff";var ue=0,de="";function Le(){if(de!==""){var De=V.measureText(de).width;V.fillText(de,Ce+fe,ke+ge),fe+=De}}function we(){return Math.round(ve)+"px "}function Ee(De,Ne){var Be=""+V.font;if(J.subscripts===!0){var Ye=De.indexOf(k),We=Ne.indexOf(k),et=Ye>-1?parseInt(De[1+Ye]):0,ft=We>-1?parseInt(Ne[1+We]):0;et!==ft&&(Be=Be.replace(we(),"?px "),ve*=Math.pow(.75,ft-et),Be=Be.replace("?px ",we())),ge+=.25*ye*(ft-et)}if(J.superscripts===!0){var ht=De.indexOf(m),mt=Ne.indexOf(m),Mt=ht>-1?parseInt(De[1+ht]):0,_t=mt>-1?parseInt(Ne[1+mt]):0;Mt!==_t&&(Be=Be.replace(we(),"?px "),ve*=Math.pow(.75,_t-Mt),Be=Be.replace("?px ",we())),ge-=.25*ye*(_t-Mt)}if(J.bolds===!0){var it=De.indexOf(c)>-1,st=Ne.indexOf(c)>-1;!it&&st&&(Be=St?Be.replace("italic ","italic bold "):"bold "+Be),it&&!st&&(Be=Be.replace("bold ",""))}if(J.italics===!0){var St=De.indexOf(g)>-1,zt=Ne.indexOf(g)>-1;!St&&zt&&(Be="italic "+Be),St&&!zt&&(Be=Be.replace("italic ",""))}V.font=Be}for(ae=0;ae<_e;++ae){var Oe=xe[ae]+`
`;for(fe=0,ge=ae*ye,ve=te,de="",oe=0;oe<Oe.length;++oe){var Fe=oe+ue<ee.length?ee[oe+ue]:ee[ee.length-1];X===Fe?de+=Oe[oe]:(Le(),de=Oe[oe],Fe!==void 0&&(Ee(X,Fe),X=Fe))}Le(),ue+=Oe.length;var pe=0|Math.round(fe+2*Ce);Te<pe&&(Te=pe)}var be=Te,Me=ke+ye*_e;return n(V.getImageData(0,0,be,Me).data,[Me,be,4]).pick(-1,-1,0).transpose(1,0)}(I,z,P,R,j,Z),U,R)},h.exports.processPixels=O;var a=t(4162),n=t(5050),r=t(8243),l=t(197),o=t(7761),u=t(8040),p="b",c="b|",b="i",g="i|",d="sup",m="+",x="+1",y="sub",k="-",f="-1";function S(P,I,z,U){for(var R="<"+P+">",j="</"+P+">",Z=R.length,F=j.length,V=I[0]===m||I[0]===k,H=0,te=-F;H>-1&&(H=z.indexOf(R,H))!==-1&&(te=z.indexOf(j,H+Z))!==-1&&!(te<=H);){for(var $=H;$<te+F;++$)if($<H+Z||$>=te)U[$]=null,z=z.substr(0,$)+" "+z.substr($+1);else if(U[$]!==null){var J=U[$].indexOf(I[0]);J===-1?U[$]+=I:V&&(U[$]=U[$].substr(0,J+1)+(1+parseInt(U[$][J+1]))+U[$].substr(J+2))}var X=H+Z,K=z.substr(X,te-X).indexOf(R);H=K!==-1?K:te+F}return U}function M(P,I){var z=a(P,128);return I?r(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function E(P,I,z,U){var R=M(P,U),j=function(ae,oe,fe){for(var ge=oe.textAlign||"start",ve=oe.textBaseline||"alphabetic",xe=[1<<30,1<<30],_e=[0,0],ye=ae.length,Ce=0;Ce<ye;++Ce)for(var ke=ae[Ce],Te=0;Te<2;++Te)xe[Te]=0|Math.min(xe[Te],ke[Te]),_e[Te]=0|Math.max(_e[Te],ke[Te]);var le=0;switch(ge){case"center":le=-.5*(xe[0]+_e[0]);break;case"right":case"end":le=-_e[0];break;case"left":case"start":le=-xe[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+ge+"'")}var ue=0;switch(ve){case"hanging":case"top":ue=-xe[1];break;case"middle":ue=-.5*(xe[1]+_e[1]);break;case"alphabetic":case"ideographic":ue=-3*fe;break;case"bottom":ue=-_e[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+ve+"'")}var de=1/fe;return"lineHeight"in oe?de*=+oe.lineHeight:"width"in oe?de=oe.width/(_e[0]-xe[0]):"height"in oe&&(de=oe.height/(_e[1]-xe[1])),ae.map(function(Le){return[de*(Le[0]+le),de*(Le[1]+ue)]})}(R.positions,I,z),Z=R.edges,F=I.orientation==="ccw";if(l(j,Z),I.polygons||I.polygon||I.polyline){for(var V=u(Z,j),H=new Array(V.length),te=0;te<V.length;++te){for(var $=V[te],J=new Array($.length),X=0;X<$.length;++X){for(var K=$[X],ee=new Array(K.length),ie=0;ie<K.length;++ie)ee[ie]=j[K[ie]].slice();F&&ee.reverse(),J[X]=ee}H[te]=J}return H}return I.triangles||I.triangulate||I.triangle?{cells:o(j,Z,{delaunay:!1,exterior:!1,interior:!0}),positions:j}:{edges:Z,positions:j}}function O(P,I,z){try{return E(P,I,z,!0)}catch{}try{return E(P,I,z,!1)}catch{}return I.polygons||I.polyline||I.polygon?[]:I.triangles||I.triangulate||I.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(h){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=y);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var a=new t,n=Object.freeze({});if(a.set(n,1),a.get(n)===1)return void(h.exports=WeakMap);s=!0}}var r=Object.getOwnPropertyNames,l=Object.defineProperty,o=Object.isExtensible,u="weakmap:",p=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),b=new Uint8Array(c);crypto.getRandomValues(b),p=u+"rand:"+Array.prototype.map.call(b,function(E){return(E%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(E){return r(E).filter(k)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(E){return g(E).filter(k)}})}(function(){var E=Object.freeze;l(Object,"freeze",{value:function(I){return f(I),E(I)}});var O=Object.seal;l(Object,"seal",{value:function(I){return f(I),O(I)}});var P=Object.preventExtensions;l(Object,"preventExtensions",{value:function(I){return f(I),P(I)}})})();var d=!1,m=0,x=function(){this instanceof x||M();var E=[],O=[],P=m++;return Object.create(x.prototype,{get___:{value:S(function(I,z){var U,R=f(I);return R?P in R?R[P]:z:(U=E.indexOf(I))>=0?O[U]:z})},has___:{value:S(function(I){var z=f(I);return z?P in z:E.indexOf(I)>=0})},set___:{value:S(function(I,z){var U,R=f(I);return R?R[P]=z:(U=E.indexOf(I))>=0?O[U]=z:(U=E.length,O[U]=z,E[U]=I),this})},delete___:{value:S(function(I){var z,U,R=f(I);return R?P in R&&delete R[P]:!((z=E.indexOf(I))<0||(U=E.length-1,E[z]=void 0,O[z]=O[U],E[z]=E[U],E.length=U,O.length=U,0))})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(E,O){return this.get___(E,O)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,O){return this.set___(E,O)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof x||M();var O,P=new t,I=void 0,z=!1;return O=s?function(U,R){return P.set(U,R),P.has(U)||(I||(I=new x),I.set(U,R)),this}:function(U,R){if(z)try{P.set(U,R)}catch{I||(I=new x),I.set___(U,R)}else P.set(U,R);return this},Object.create(x.prototype,{get___:{value:S(function(U,R){return I?P.has(U)?P.get(U):I.get___(U,R):P.get(U,R)})},has___:{value:S(function(U){return P.has(U)||!!I&&I.has___(U)})},set___:{value:S(O)},delete___:{value:S(function(U){var R=!!P.delete(U);return I&&I.delete___(U)||R})},permitHostObjects___:{value:S(function(U){if(U!==y)throw new Error("bogus call to permitHostObjects___");z=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=x.prototype,h.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),h.exports=x)}function y(E){E.permitHostObjects___&&E.permitHostObjects___(y)}function k(E){return!(E.substr(0,8)==u&&E.substr(E.length-3)==="___")}function f(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var O=E[p];if(O&&O.key===E)return O;if(o(E)){O={key:E};try{return l(E,p,{value:O,writable:!1,enumerable:!1,configurable:!1}),O}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function M(){d||typeof console>"u"||(d=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(h,s,t){var a=t(7178);h.exports=function(){var n={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var l=r.valueOf(n);return l&&l.identity===n?l:a(r,n)}}},7178:function(h){h.exports=function(s,t){var a={identity:t},n=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(r){return r!==t?n.apply(this,arguments):a},writable:!0}),a}},4037:function(h,s,t){var a=t(9222);h.exports=function(){var n=a();return{get:function(r,l){var o=n(r);return o.hasOwnProperty("value")?o.value:l},set:function(r,l){return n(r).value=l,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},6183:function(h){h.exports=function(s){var t={};return function(a,n,r){var l=a.dtype,o=a.order,u=[l,o.join()].join(),p=t[u];return p||(t[u]=p=s([l,o])),p(a.shape.slice(0),a.data,a.stride,0|a.offset,n,r)}}((function(){return function(s,t,a,n,r,l){var o=s[0],u=a[0],p=[0],c=u;n|=0;var b=0,g=u;for(b=0;b<o;++b){var d=t[n]-l,m=t[n+c]-l;d>=0!=m>=0&&r.push(p[0]+.5+.5*(d+m)/(d-m)),n+=g,++p[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},9584:function(h,s,t){h.exports=function(n,r){var l=[];return r=+r||0,a(n.hi(n.shape[0]-1),l,r),l};var a=t(6183)},6601:function(){}},_={};function v(h){var s=_[h];if(s!==void 0)return s.exports;var t=_[h]={id:h,loaded:!1,exports:{}};return i[h].call(t.exports,t,t.exports,v),t.loaded=!0,t.exports}return v.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),v.nmd=function(h){return h.paths=[],h.children||(h.children=[]),h},v(7386)}()},N.exports=T()},12856:function(N,L,e){function T(le,ue){for(var de=0;de<ue.length;de++){var Le=ue[de];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(le,(we=function(Ee,Oe){if(v(Ee)!=="object"||Ee===null)return Ee;var Fe=Ee[Symbol.toPrimitive];if(Fe!==void 0){var pe=Fe.call(Ee,"string");if(v(pe)!=="object")return pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ee)}(Le.key),v(we)==="symbol"?we:String(we)),Le)}var we}function w(le,ue){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(de,Le){return de.__proto__=Le,de},w(le,ue)}function i(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function _(le){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ue){return ue.__proto__||Object.getPrototypeOf(ue)},_(le)}function v(le){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},v(le)}var h=e(95341),s=e(95280),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;L.Buffer=r,L.SlowBuffer=function(le){return+le!=le&&(le=0),r.alloc(+le)},L.INSPECT_MAX_BYTES=50;var a=2147483647;function n(le){if(le>a)throw new RangeError('The value "'+le+'" is invalid for option "size"');var ue=new Uint8Array(le);return Object.setPrototypeOf(ue,r.prototype),ue}function r(le,ue,de){if(typeof le=="number"){if(typeof ue=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(le)}return l(le,ue,de)}function l(le,ue,de){if(typeof le=="string")return function(Ee,Oe){if(typeof Oe=="string"&&Oe!==""||(Oe="utf8"),!r.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);var Fe=0|g(Ee,Oe),pe=n(Fe),be=pe.write(Ee,Oe);return be!==Fe&&(pe=pe.slice(0,be)),pe}(le,ue);if(ArrayBuffer.isView(le))return function(Ee){if(_e(Ee,Uint8Array)){var Oe=new Uint8Array(Ee);return c(Oe.buffer,Oe.byteOffset,Oe.byteLength)}return p(Ee)}(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+v(le));if(_e(le,ArrayBuffer)||le&&_e(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_e(le,SharedArrayBuffer)||le&&_e(le.buffer,SharedArrayBuffer)))return c(le,ue,de);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Le=le.valueOf&&le.valueOf();if(Le!=null&&Le!==le)return r.from(Le,ue,de);var we=function(Ee){if(r.isBuffer(Ee)){var Oe=0|b(Ee.length),Fe=n(Oe);return Fe.length===0||Ee.copy(Fe,0,0,Oe),Fe}return Ee.length!==void 0?typeof Ee.length!="number"||ye(Ee.length)?n(0):p(Ee):Ee.type==="Buffer"&&Array.isArray(Ee.data)?p(Ee.data):void 0}(le);if(we)return we;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return r.from(le[Symbol.toPrimitive]("string"),ue,de);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+v(le))}function o(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function u(le){return o(le),n(le<0?0:0|b(le))}function p(le){for(var ue=le.length<0?0:0|b(le.length),de=n(ue),Le=0;Le<ue;Le+=1)de[Le]=255&le[Le];return de}function c(le,ue,de){if(ue<0||le.byteLength<ue)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<ue+(de||0))throw new RangeError('"length" is outside of buffer bounds');var Le;return Le=ue===void 0&&de===void 0?new Uint8Array(le):de===void 0?new Uint8Array(le,ue):new Uint8Array(le,ue,de),Object.setPrototypeOf(Le,r.prototype),Le}function b(le){if(le>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|le}function g(le,ue){if(r.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||_e(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+v(le));var de=le.length,Le=arguments.length>2&&arguments[2]===!0;if(!Le&&de===0)return 0;for(var we=!1;;)switch(ue){case"ascii":case"latin1":case"binary":return de;case"utf8":case"utf-8":return ge(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*de;case"hex":return de>>>1;case"base64":return ve(le).length;default:if(we)return Le?-1:ge(le).length;ue=(""+ue).toLowerCase(),we=!0}}function d(le,ue,de){var Le=!1;if((ue===void 0||ue<0)&&(ue=0),ue>this.length||((de===void 0||de>this.length)&&(de=this.length),de<=0)||(de>>>=0)<=(ue>>>=0))return"";for(le||(le="utf8");;)switch(le){case"hex":return R(this,ue,de);case"utf8":case"utf-8":return P(this,ue,de);case"ascii":return z(this,ue,de);case"latin1":case"binary":return U(this,ue,de);case"base64":return O(this,ue,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,ue,de);default:if(Le)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Le=!0}}function m(le,ue,de){var Le=le[ue];le[ue]=le[de],le[de]=Le}function x(le,ue,de,Le,we){if(le.length===0)return-1;if(typeof de=="string"?(Le=de,de=0):de>2147483647?de=2147483647:de<-2147483648&&(de=-2147483648),ye(de=+de)&&(de=we?0:le.length-1),de<0&&(de=le.length+de),de>=le.length){if(we)return-1;de=le.length-1}else if(de<0){if(!we)return-1;de=0}if(typeof ue=="string"&&(ue=r.from(ue,Le)),r.isBuffer(ue))return ue.length===0?-1:y(le,ue,de,Le,we);if(typeof ue=="number")return ue&=255,typeof Uint8Array.prototype.indexOf=="function"?we?Uint8Array.prototype.indexOf.call(le,ue,de):Uint8Array.prototype.lastIndexOf.call(le,ue,de):y(le,[ue],de,Le,we);throw new TypeError("val must be string, number or Buffer")}function y(le,ue,de,Le,we){var Ee,Oe=1,Fe=le.length,pe=ue.length;if(Le!==void 0&&((Le=String(Le).toLowerCase())==="ucs2"||Le==="ucs-2"||Le==="utf16le"||Le==="utf-16le")){if(le.length<2||ue.length<2)return-1;Oe=2,Fe/=2,pe/=2,de/=2}function be(Be,Ye){return Oe===1?Be[Ye]:Be.readUInt16BE(Ye*Oe)}if(we){var Me=-1;for(Ee=de;Ee<Fe;Ee++)if(be(le,Ee)===be(ue,Me===-1?0:Ee-Me)){if(Me===-1&&(Me=Ee),Ee-Me+1===pe)return Me*Oe}else Me!==-1&&(Ee-=Ee-Me),Me=-1}else for(de+pe>Fe&&(de=Fe-pe),Ee=de;Ee>=0;Ee--){for(var De=!0,Ne=0;Ne<pe;Ne++)if(be(le,Ee+Ne)!==be(ue,Ne)){De=!1;break}if(De)return Ee}return-1}function k(le,ue,de,Le){de=Number(de)||0;var we=le.length-de;Le?(Le=Number(Le))>we&&(Le=we):Le=we;var Ee,Oe=ue.length;for(Le>Oe/2&&(Le=Oe/2),Ee=0;Ee<Le;++Ee){var Fe=parseInt(ue.substr(2*Ee,2),16);if(ye(Fe))return Ee;le[de+Ee]=Fe}return Ee}function f(le,ue,de,Le){return xe(ge(ue,le.length-de),le,de,Le)}function S(le,ue,de,Le){return xe(function(we){for(var Ee=[],Oe=0;Oe<we.length;++Oe)Ee.push(255&we.charCodeAt(Oe));return Ee}(ue),le,de,Le)}function M(le,ue,de,Le){return xe(ve(ue),le,de,Le)}function E(le,ue,de,Le){return xe(function(we,Ee){for(var Oe,Fe,pe,be=[],Me=0;Me<we.length&&!((Ee-=2)<0);++Me)Fe=(Oe=we.charCodeAt(Me))>>8,pe=Oe%256,be.push(pe),be.push(Fe);return be}(ue,le.length-de),le,de,Le)}function O(le,ue,de){return ue===0&&de===le.length?h.fromByteArray(le):h.fromByteArray(le.slice(ue,de))}function P(le,ue,de){de=Math.min(le.length,de);for(var Le=[],we=ue;we<de;){var Ee=le[we],Oe=null,Fe=Ee>239?4:Ee>223?3:Ee>191?2:1;if(we+Fe<=de){var pe=void 0,be=void 0,Me=void 0,De=void 0;switch(Fe){case 1:Ee<128&&(Oe=Ee);break;case 2:(192&(pe=le[we+1]))==128&&(De=(31&Ee)<<6|63&pe)>127&&(Oe=De);break;case 3:pe=le[we+1],be=le[we+2],(192&pe)==128&&(192&be)==128&&(De=(15&Ee)<<12|(63&pe)<<6|63&be)>2047&&(De<55296||De>57343)&&(Oe=De);break;case 4:pe=le[we+1],be=le[we+2],Me=le[we+3],(192&pe)==128&&(192&be)==128&&(192&Me)==128&&(De=(15&Ee)<<18|(63&pe)<<12|(63&be)<<6|63&Me)>65535&&De<1114112&&(Oe=De)}}Oe===null?(Oe=65533,Fe=1):Oe>65535&&(Oe-=65536,Le.push(Oe>>>10&1023|55296),Oe=56320|1023&Oe),Le.push(Oe),we+=Fe}return function(Ne){var Be=Ne.length;if(Be<=I)return String.fromCharCode.apply(String,Ne);for(var Ye="",We=0;We<Be;)Ye+=String.fromCharCode.apply(String,Ne.slice(We,We+=I));return Ye}(Le)}L.kMaxLength=a,r.TYPED_ARRAY_SUPPORT=function(){try{var le=new Uint8Array(1),ue={foo:function(){return 42}};return Object.setPrototypeOf(ue,Uint8Array.prototype),Object.setPrototypeOf(le,ue),le.foo()===42}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(le,ue,de){return l(le,ue,de)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(le,ue,de){return function(Le,we,Ee){return o(Le),Le<=0?n(Le):we!==void 0?typeof Ee=="string"?n(Le).fill(we,Ee):n(Le).fill(we):n(Le)}(le,ue,de)},r.allocUnsafe=function(le){return u(le)},r.allocUnsafeSlow=function(le){return u(le)},r.isBuffer=function(le){return le!=null&&le._isBuffer===!0&&le!==r.prototype},r.compare=function(le,ue){if(_e(le,Uint8Array)&&(le=r.from(le,le.offset,le.byteLength)),_e(ue,Uint8Array)&&(ue=r.from(ue,ue.offset,ue.byteLength)),!r.isBuffer(le)||!r.isBuffer(ue))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===ue)return 0;for(var de=le.length,Le=ue.length,we=0,Ee=Math.min(de,Le);we<Ee;++we)if(le[we]!==ue[we]){de=le[we],Le=ue[we];break}return de<Le?-1:Le<de?1:0},r.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(le,ue){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(le.length===0)return r.alloc(0);var de;if(ue===void 0)for(ue=0,de=0;de<le.length;++de)ue+=le[de].length;var Le=r.allocUnsafe(ue),we=0;for(de=0;de<le.length;++de){var Ee=le[de];if(_e(Ee,Uint8Array))we+Ee.length>Le.length?(r.isBuffer(Ee)||(Ee=r.from(Ee)),Ee.copy(Le,we)):Uint8Array.prototype.set.call(Le,Ee,we);else{if(!r.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(Le,we)}we+=Ee.length}return Le},r.byteLength=g,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ue=0;ue<le;ue+=2)m(this,ue,ue+1);return this},r.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ue=0;ue<le;ue+=4)m(this,ue,ue+3),m(this,ue+1,ue+2);return this},r.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ue=0;ue<le;ue+=8)m(this,ue,ue+7),m(this,ue+1,ue+6),m(this,ue+2,ue+5),m(this,ue+3,ue+4);return this},r.prototype.toString=function(){var le=this.length;return le===0?"":arguments.length===0?P(this,0,le):d.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(le){if(!r.isBuffer(le))throw new TypeError("Argument must be a Buffer");return this===le||r.compare(this,le)===0},r.prototype.inspect=function(){var le="",ue=L.INSPECT_MAX_BYTES;return le=this.toString("hex",0,ue).replace(/(.{2})/g,"$1 ").trim(),this.length>ue&&(le+=" ... "),"<Buffer "+le+">"},t&&(r.prototype[t]=r.prototype.inspect),r.prototype.compare=function(le,ue,de,Le,we){if(_e(le,Uint8Array)&&(le=r.from(le,le.offset,le.byteLength)),!r.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+v(le));if(ue===void 0&&(ue=0),de===void 0&&(de=le?le.length:0),Le===void 0&&(Le=0),we===void 0&&(we=this.length),ue<0||de>le.length||Le<0||we>this.length)throw new RangeError("out of range index");if(Le>=we&&ue>=de)return 0;if(Le>=we)return-1;if(ue>=de)return 1;if(this===le)return 0;for(var Ee=(we>>>=0)-(Le>>>=0),Oe=(de>>>=0)-(ue>>>=0),Fe=Math.min(Ee,Oe),pe=this.slice(Le,we),be=le.slice(ue,de),Me=0;Me<Fe;++Me)if(pe[Me]!==be[Me]){Ee=pe[Me],Oe=be[Me];break}return Ee<Oe?-1:Oe<Ee?1:0},r.prototype.includes=function(le,ue,de){return this.indexOf(le,ue,de)!==-1},r.prototype.indexOf=function(le,ue,de){return x(this,le,ue,de,!0)},r.prototype.lastIndexOf=function(le,ue,de){return x(this,le,ue,de,!1)},r.prototype.write=function(le,ue,de,Le){if(ue===void 0)Le="utf8",de=this.length,ue=0;else if(de===void 0&&typeof ue=="string")Le=ue,de=this.length,ue=0;else{if(!isFinite(ue))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ue>>>=0,isFinite(de)?(de>>>=0,Le===void 0&&(Le="utf8")):(Le=de,de=void 0)}var we=this.length-ue;if((de===void 0||de>we)&&(de=we),le.length>0&&(de<0||ue<0)||ue>this.length)throw new RangeError("Attempt to write outside buffer bounds");Le||(Le="utf8");for(var Ee=!1;;)switch(Le){case"hex":return k(this,le,ue,de);case"utf8":case"utf-8":return f(this,le,ue,de);case"ascii":case"latin1":case"binary":return S(this,le,ue,de);case"base64":return M(this,le,ue,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,le,ue,de);default:if(Ee)throw new TypeError("Unknown encoding: "+Le);Le=(""+Le).toLowerCase(),Ee=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function z(le,ue,de){var Le="";de=Math.min(le.length,de);for(var we=ue;we<de;++we)Le+=String.fromCharCode(127&le[we]);return Le}function U(le,ue,de){var Le="";de=Math.min(le.length,de);for(var we=ue;we<de;++we)Le+=String.fromCharCode(le[we]);return Le}function R(le,ue,de){var Le=le.length;(!ue||ue<0)&&(ue=0),(!de||de<0||de>Le)&&(de=Le);for(var we="",Ee=ue;Ee<de;++Ee)we+=Ce[le[Ee]];return we}function j(le,ue,de){for(var Le=le.slice(ue,de),we="",Ee=0;Ee<Le.length-1;Ee+=2)we+=String.fromCharCode(Le[Ee]+256*Le[Ee+1]);return we}function Z(le,ue,de){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(le+ue>de)throw new RangeError("Trying to access beyond buffer length")}function F(le,ue,de,Le,we,Ee){if(!r.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(ue>we||ue<Ee)throw new RangeError('"value" argument is out of bounds');if(de+Le>le.length)throw new RangeError("Index out of range")}function V(le,ue,de,Le,we){ie(ue,Le,we,le,de,7);var Ee=Number(ue&BigInt(4294967295));le[de++]=Ee,Ee>>=8,le[de++]=Ee,Ee>>=8,le[de++]=Ee,Ee>>=8,le[de++]=Ee;var Oe=Number(ue>>BigInt(32)&BigInt(4294967295));return le[de++]=Oe,Oe>>=8,le[de++]=Oe,Oe>>=8,le[de++]=Oe,Oe>>=8,le[de++]=Oe,de}function H(le,ue,de,Le,we){ie(ue,Le,we,le,de,7);var Ee=Number(ue&BigInt(4294967295));le[de+7]=Ee,Ee>>=8,le[de+6]=Ee,Ee>>=8,le[de+5]=Ee,Ee>>=8,le[de+4]=Ee;var Oe=Number(ue>>BigInt(32)&BigInt(4294967295));return le[de+3]=Oe,Oe>>=8,le[de+2]=Oe,Oe>>=8,le[de+1]=Oe,Oe>>=8,le[de]=Oe,de+8}function te(le,ue,de,Le,we,Ee){if(de+Le>le.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("Index out of range")}function $(le,ue,de,Le,we){return ue=+ue,de>>>=0,we||te(le,0,de,4),s.write(le,ue,de,Le,23,4),de+4}function J(le,ue,de,Le,we){return ue=+ue,de>>>=0,we||te(le,0,de,8),s.write(le,ue,de,Le,52,8),de+8}r.prototype.slice=function(le,ue){var de=this.length;(le=~~le)<0?(le+=de)<0&&(le=0):le>de&&(le=de),(ue=ue===void 0?de:~~ue)<0?(ue+=de)<0&&(ue=0):ue>de&&(ue=de),ue<le&&(ue=le);var Le=this.subarray(le,ue);return Object.setPrototypeOf(Le,r.prototype),Le},r.prototype.readUintLE=r.prototype.readUIntLE=function(le,ue,de){le>>>=0,ue>>>=0,de||Z(le,ue,this.length);for(var Le=this[le],we=1,Ee=0;++Ee<ue&&(we*=256);)Le+=this[le+Ee]*we;return Le},r.prototype.readUintBE=r.prototype.readUIntBE=function(le,ue,de){le>>>=0,ue>>>=0,de||Z(le,ue,this.length);for(var Le=this[le+--ue],we=1;ue>0&&(we*=256);)Le+=this[le+--ue]*we;return Le},r.prototype.readUint8=r.prototype.readUInt8=function(le,ue){return le>>>=0,ue||Z(le,1,this.length),this[le]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(le,ue){return le>>>=0,ue||Z(le,2,this.length),this[le]|this[le+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(le,ue){return le>>>=0,ue||Z(le,2,this.length),this[le]<<8|this[le+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(le,ue){return le>>>=0,ue||Z(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(le,ue){return le>>>=0,ue||Z(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},r.prototype.readBigUInt64LE=ke(function(le){ae(le>>>=0,"offset");var ue=this[le],de=this[le+7];ue!==void 0&&de!==void 0||oe(le,this.length-8);var Le=ue+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,24),we=this[++le]+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+de*Math.pow(2,24);return BigInt(Le)+(BigInt(we)<<BigInt(32))}),r.prototype.readBigUInt64BE=ke(function(le){ae(le>>>=0,"offset");var ue=this[le],de=this[le+7];ue!==void 0&&de!==void 0||oe(le,this.length-8);var Le=ue*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+this[++le],we=this[++le]*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+de;return(BigInt(Le)<<BigInt(32))+BigInt(we)}),r.prototype.readIntLE=function(le,ue,de){le>>>=0,ue>>>=0,de||Z(le,ue,this.length);for(var Le=this[le],we=1,Ee=0;++Ee<ue&&(we*=256);)Le+=this[le+Ee]*we;return Le>=(we*=128)&&(Le-=Math.pow(2,8*ue)),Le},r.prototype.readIntBE=function(le,ue,de){le>>>=0,ue>>>=0,de||Z(le,ue,this.length);for(var Le=ue,we=1,Ee=this[le+--Le];Le>0&&(we*=256);)Ee+=this[le+--Le]*we;return Ee>=(we*=128)&&(Ee-=Math.pow(2,8*ue)),Ee},r.prototype.readInt8=function(le,ue){return le>>>=0,ue||Z(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},r.prototype.readInt16LE=function(le,ue){le>>>=0,ue||Z(le,2,this.length);var de=this[le]|this[le+1]<<8;return 32768&de?4294901760|de:de},r.prototype.readInt16BE=function(le,ue){le>>>=0,ue||Z(le,2,this.length);var de=this[le+1]|this[le]<<8;return 32768&de?4294901760|de:de},r.prototype.readInt32LE=function(le,ue){return le>>>=0,ue||Z(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},r.prototype.readInt32BE=function(le,ue){return le>>>=0,ue||Z(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},r.prototype.readBigInt64LE=ke(function(le){ae(le>>>=0,"offset");var ue=this[le],de=this[le+7];ue!==void 0&&de!==void 0||oe(le,this.length-8);var Le=this[le+4]+this[le+5]*Math.pow(2,8)+this[le+6]*Math.pow(2,16)+(de<<24);return(BigInt(Le)<<BigInt(32))+BigInt(ue+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,24))}),r.prototype.readBigInt64BE=ke(function(le){ae(le>>>=0,"offset");var ue=this[le],de=this[le+7];ue!==void 0&&de!==void 0||oe(le,this.length-8);var Le=(ue<<24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+this[++le];return(BigInt(Le)<<BigInt(32))+BigInt(this[++le]*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+de)}),r.prototype.readFloatLE=function(le,ue){return le>>>=0,ue||Z(le,4,this.length),s.read(this,le,!0,23,4)},r.prototype.readFloatBE=function(le,ue){return le>>>=0,ue||Z(le,4,this.length),s.read(this,le,!1,23,4)},r.prototype.readDoubleLE=function(le,ue){return le>>>=0,ue||Z(le,8,this.length),s.read(this,le,!0,52,8)},r.prototype.readDoubleBE=function(le,ue){return le>>>=0,ue||Z(le,8,this.length),s.read(this,le,!1,52,8)},r.prototype.writeUintLE=r.prototype.writeUIntLE=function(le,ue,de,Le){le=+le,ue>>>=0,de>>>=0,Le||F(this,le,ue,de,Math.pow(2,8*de)-1,0);var we=1,Ee=0;for(this[ue]=255&le;++Ee<de&&(we*=256);)this[ue+Ee]=le/we&255;return ue+de},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(le,ue,de,Le){le=+le,ue>>>=0,de>>>=0,Le||F(this,le,ue,de,Math.pow(2,8*de)-1,0);var we=de-1,Ee=1;for(this[ue+we]=255&le;--we>=0&&(Ee*=256);)this[ue+we]=le/Ee&255;return ue+de},r.prototype.writeUint8=r.prototype.writeUInt8=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,1,255,0),this[ue]=255&le,ue+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,2,65535,0),this[ue]=255&le,this[ue+1]=le>>>8,ue+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,2,65535,0),this[ue]=le>>>8,this[ue+1]=255&le,ue+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,4,4294967295,0),this[ue+3]=le>>>24,this[ue+2]=le>>>16,this[ue+1]=le>>>8,this[ue]=255&le,ue+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,4,4294967295,0),this[ue]=le>>>24,this[ue+1]=le>>>16,this[ue+2]=le>>>8,this[ue+3]=255&le,ue+4},r.prototype.writeBigUInt64LE=ke(function(le){return V(this,le,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=ke(function(le){return H(this,le,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(le,ue,de,Le){if(le=+le,ue>>>=0,!Le){var we=Math.pow(2,8*de-1);F(this,le,ue,de,we-1,-we)}var Ee=0,Oe=1,Fe=0;for(this[ue]=255&le;++Ee<de&&(Oe*=256);)le<0&&Fe===0&&this[ue+Ee-1]!==0&&(Fe=1),this[ue+Ee]=(le/Oe>>0)-Fe&255;return ue+de},r.prototype.writeIntBE=function(le,ue,de,Le){if(le=+le,ue>>>=0,!Le){var we=Math.pow(2,8*de-1);F(this,le,ue,de,we-1,-we)}var Ee=de-1,Oe=1,Fe=0;for(this[ue+Ee]=255&le;--Ee>=0&&(Oe*=256);)le<0&&Fe===0&&this[ue+Ee+1]!==0&&(Fe=1),this[ue+Ee]=(le/Oe>>0)-Fe&255;return ue+de},r.prototype.writeInt8=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,1,127,-128),le<0&&(le=255+le+1),this[ue]=255&le,ue+1},r.prototype.writeInt16LE=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,2,32767,-32768),this[ue]=255&le,this[ue+1]=le>>>8,ue+2},r.prototype.writeInt16BE=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,2,32767,-32768),this[ue]=le>>>8,this[ue+1]=255&le,ue+2},r.prototype.writeInt32LE=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,4,2147483647,-2147483648),this[ue]=255&le,this[ue+1]=le>>>8,this[ue+2]=le>>>16,this[ue+3]=le>>>24,ue+4},r.prototype.writeInt32BE=function(le,ue,de){return le=+le,ue>>>=0,de||F(this,le,ue,4,2147483647,-2147483648),le<0&&(le=4294967295+le+1),this[ue]=le>>>24,this[ue+1]=le>>>16,this[ue+2]=le>>>8,this[ue+3]=255&le,ue+4},r.prototype.writeBigInt64LE=ke(function(le){return V(this,le,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=ke(function(le){return H(this,le,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeFloatLE=function(le,ue,de){return $(this,le,ue,!0,de)},r.prototype.writeFloatBE=function(le,ue,de){return $(this,le,ue,!1,de)},r.prototype.writeDoubleLE=function(le,ue,de){return J(this,le,ue,!0,de)},r.prototype.writeDoubleBE=function(le,ue,de){return J(this,le,ue,!1,de)},r.prototype.copy=function(le,ue,de,Le){if(!r.isBuffer(le))throw new TypeError("argument should be a Buffer");if(de||(de=0),Le||Le===0||(Le=this.length),ue>=le.length&&(ue=le.length),ue||(ue=0),Le>0&&Le<de&&(Le=de),Le===de||le.length===0||this.length===0)return 0;if(ue<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(Le<0)throw new RangeError("sourceEnd out of bounds");Le>this.length&&(Le=this.length),le.length-ue<Le-de&&(Le=le.length-ue+de);var we=Le-de;return this===le&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ue,de,Le):Uint8Array.prototype.set.call(le,this.subarray(de,Le),ue),we},r.prototype.fill=function(le,ue,de,Le){if(typeof le=="string"){if(typeof ue=="string"?(Le=ue,ue=0,de=this.length):typeof de=="string"&&(Le=de,de=this.length),Le!==void 0&&typeof Le!="string")throw new TypeError("encoding must be a string");if(typeof Le=="string"&&!r.isEncoding(Le))throw new TypeError("Unknown encoding: "+Le);if(le.length===1){var we=le.charCodeAt(0);(Le==="utf8"&&we<128||Le==="latin1")&&(le=we)}}else typeof le=="number"?le&=255:typeof le=="boolean"&&(le=Number(le));if(ue<0||this.length<ue||this.length<de)throw new RangeError("Out of range index");if(de<=ue)return this;var Ee;if(ue>>>=0,de=de===void 0?this.length:de>>>0,le||(le=0),typeof le=="number")for(Ee=ue;Ee<de;++Ee)this[Ee]=le;else{var Oe=r.isBuffer(le)?le:r.from(le,Le),Fe=Oe.length;if(Fe===0)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(Ee=0;Ee<de-ue;++Ee)this[Ee+ue]=Oe[Ee%Fe]}return this};var X={};function K(le,ue,de){X[le]=function(Le){(function(Me,De){if(typeof De!="function"&&De!==null)throw new TypeError("Super expression must either be null or a function");Me.prototype=Object.create(De&&De.prototype,{constructor:{value:Me,writable:!0,configurable:!0}}),Object.defineProperty(Me,"prototype",{writable:!1}),De&&w(Me,De)})(be,Le);var we,Ee,Oe,Fe,pe=(Oe=be,Fe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Me,De=_(Oe);if(Fe){var Ne=_(this).constructor;Me=Reflect.construct(De,arguments,Ne)}else Me=De.apply(this,arguments);return function(Be,Ye){if(Ye&&(v(Ye)==="object"||typeof Ye=="function"))return Ye;if(Ye!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(Be)}(this,Me)});function be(){var Me;return function(De,Ne){if(!(De instanceof Ne))throw new TypeError("Cannot call a class as a function")}(this,be),Me=pe.call(this),Object.defineProperty(i(Me),"message",{value:ue.apply(i(Me),arguments),writable:!0,configurable:!0}),Me.name="".concat(Me.name," [").concat(le,"]"),Me.stack,delete Me.name,Me}return we=be,(Ee=[{key:"code",get:function(){return le},set:function(Me){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Me,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(le,"]: ").concat(this.message)}}])&&T(we.prototype,Ee),Object.defineProperty(we,"prototype",{writable:!1}),be}(de)}function ee(le){for(var ue="",de=le.length,Le=le[0]==="-"?1:0;de>=Le+4;de-=3)ue="_".concat(le.slice(de-3,de)).concat(ue);return"".concat(le.slice(0,de)).concat(ue)}function ie(le,ue,de,Le,we,Ee){if(le>de||le<ue){var Oe,Fe=typeof ue=="bigint"?"n":"";throw Oe=Ee>3?ue===0||ue===BigInt(0)?">= 0".concat(Fe," and < 2").concat(Fe," ** ").concat(8*(Ee+1)).concat(Fe):">= -(2".concat(Fe," ** ").concat(8*(Ee+1)-1).concat(Fe,") and < 2 ** ")+"".concat(8*(Ee+1)-1).concat(Fe):">= ".concat(ue).concat(Fe," and <= ").concat(de).concat(Fe),new X.ERR_OUT_OF_RANGE("value",Oe,le)}(function(pe,be,Me){ae(be,"offset"),pe[be]!==void 0&&pe[be+Me]!==void 0||oe(be,pe.length-(Me+1))})(Le,we,Ee)}function ae(le,ue){if(typeof le!="number")throw new X.ERR_INVALID_ARG_TYPE(ue,"number",le)}function oe(le,ue,de){throw Math.floor(le)!==le?(ae(le,de),new X.ERR_OUT_OF_RANGE(de||"offset","an integer",le)):ue<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE(de||"offset",">= ".concat(de?1:0," and <= ").concat(ue),le)}K("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?"".concat(le," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(le,ue){return'The "'.concat(le,'" argument must be of type number. Received type ').concat(v(ue))},TypeError),K("ERR_OUT_OF_RANGE",function(le,ue,de){var Le='The value of "'.concat(le,'" is out of range.'),we=de;return Number.isInteger(de)&&Math.abs(de)>Math.pow(2,32)?we=ee(String(de)):typeof de=="bigint"&&(we=String(de),(de>Math.pow(BigInt(2),BigInt(32))||de<-Math.pow(BigInt(2),BigInt(32)))&&(we=ee(we)),we+="n"),Le+" It must be ".concat(ue,". Received ").concat(we)},RangeError);var fe=/[^+/0-9A-Za-z-_]/g;function ge(le,ue){var de;ue=ue||1/0;for(var Le=le.length,we=null,Ee=[],Oe=0;Oe<Le;++Oe){if((de=le.charCodeAt(Oe))>55295&&de<57344){if(!we){if(de>56319){(ue-=3)>-1&&Ee.push(239,191,189);continue}if(Oe+1===Le){(ue-=3)>-1&&Ee.push(239,191,189);continue}we=de;continue}if(de<56320){(ue-=3)>-1&&Ee.push(239,191,189),we=de;continue}de=65536+(we-55296<<10|de-56320)}else we&&(ue-=3)>-1&&Ee.push(239,191,189);if(we=null,de<128){if((ue-=1)<0)break;Ee.push(de)}else if(de<2048){if((ue-=2)<0)break;Ee.push(de>>6|192,63&de|128)}else if(de<65536){if((ue-=3)<0)break;Ee.push(de>>12|224,de>>6&63|128,63&de|128)}else{if(!(de<1114112))throw new Error("Invalid code point");if((ue-=4)<0)break;Ee.push(de>>18|240,de>>12&63|128,de>>6&63|128,63&de|128)}}return Ee}function ve(le){return h.toByteArray(function(ue){if((ue=(ue=ue.split("=")[0]).trim().replace(fe,"")).length<2)return"";for(;ue.length%4!=0;)ue+="=";return ue}(le))}function xe(le,ue,de,Le){var we;for(we=0;we<Le&&!(we+de>=ue.length||we>=le.length);++we)ue[we+de]=le[we];return we}function _e(le,ue){return le instanceof ue||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===ue.name}function ye(le){return le!=le}var Ce=function(){for(var le="0123456789abcdef",ue=new Array(256),de=0;de<16;++de)for(var Le=16*de,we=0;we<16;++we)ue[Le+we]=le[de]+le[we];return ue}();function ke(le){return typeof BigInt>"u"?Te:le}function Te(){throw new Error("BigInt not supported")}},35791:function(N){N.exports=w,N.exports.isMobile=w,N.exports.default=w;var L=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,T=/android|ipad|playbook|silk/i;function w(i){i||(i={});var _=i.ua;if(_||typeof navigator>"u"||(_=navigator.userAgent),_&&_.headers&&typeof _.headers["user-agent"]=="string"&&(_=_.headers["user-agent"]),typeof _!="string")return!1;var v=L.test(_)&&!e.test(_)||!!i.tablet&&T.test(_);return!v&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&_.indexOf("Macintosh")!==-1&&_.indexOf("Safari")!==-1&&(v=!0),v}},86781:function(N,L,e){e.r(L),e.d(L,{sankeyCenter:function(){return n},sankeyCircular:function(){return O},sankeyJustify:function(){return a},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var T=e(33064),w=e(15140),i=e(45879),_=e(2502),v=e.n(_);function h(xe){return xe.target.depth}function s(xe){return xe.depth}function t(xe,_e){return _e-1-xe.height}function a(xe,_e){return xe.sourceLinks.length?xe.depth:_e-1}function n(xe){return xe.targetLinks.length?xe.depth:xe.sourceLinks.length?(0,T.VV)(xe.sourceLinks,h)-1:0}function r(xe){return function(){return xe}}var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xe){return typeof xe}:function(xe){return xe&&typeof Symbol=="function"&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe};function o(xe,_e){return p(xe.source,_e.source)||xe.index-_e.index}function u(xe,_e){return p(xe.target,_e.target)||xe.index-_e.index}function p(xe,_e){return xe.partOfCycle===_e.partOfCycle?xe.y0-_e.y0:xe.circularLinkType==="top"||_e.circularLinkType==="bottom"?-1:1}function c(xe){return xe.value}function b(xe){return(xe.y0+xe.y1)/2}function g(xe){return b(xe.source)}function d(xe){return b(xe.target)}function m(xe){return xe.index}function x(xe){return xe.nodes}function y(xe){return xe.links}function k(xe,_e){var ye=xe.get(_e);if(!ye)throw new Error("missing: "+_e);return ye}function f(xe,_e){return _e(xe)}var S=25,M=10,E=.3;function O(){var xe,_e,ye=0,Ce=0,ke=1,Te=1,le=24,ue=m,de=a,Le=x,we=y,Ee=32,Oe=2,Fe=null;function pe(){var Me={nodes:Le.apply(null,arguments),links:we.apply(null,arguments)};(function(Ne){Ne.nodes.forEach(function(Ye,We){Ye.index=We,Ye.sourceLinks=[],Ye.targetLinks=[]});var Be=(0,w.UI)(Ne.nodes,ue);Ne.links.forEach(function(Ye,We){Ye.index=We;var et=Ye.source,ft=Ye.target;(et===void 0?"undefined":l(et))!=="object"&&(et=Ye.source=k(Be,et)),(ft===void 0?"undefined":l(ft))!=="object"&&(ft=Ye.target=k(Be,ft)),et.sourceLinks.push(Ye),ft.targetLinks.push(Ye)})})(Me),function(Ne,Be,Ye){var We=0;if(Ye===null){for(var et=[],ft=0;ft<Ne.links.length;ft++){var ht=Ne.links[ft],mt=ht.source.index,Mt=ht.target.index;et[mt]||(et[mt]=[]),et[Mt]||(et[Mt]=[]),et[mt].indexOf(Mt)===-1&&et[mt].push(Mt)}var _t=v()(et);_t.sort(function(St,zt){return St.length-zt.length});var it={};for(ft=0;ft<_t.length;ft++){var st=_t[ft].slice(-2);it[st[0]]||(it[st[0]]={}),it[st[0]][st[1]]=!0}Ne.links.forEach(function(St){var zt=St.target.index,Ft=St.source.index;zt===Ft||it[Ft]&&it[Ft][zt]?(St.circular=!0,St.circularLinkID=We,We+=1):St.circular=!1})}else Ne.links.forEach(function(St){St.source[Ye]<St.target[Ye]?St.circular=!1:(St.circular=!0,St.circularLinkID=We,We+=1)})}(Me,0,Fe),function(Ne){Ne.nodes.forEach(function(Be){Be.partOfCycle=!1,Be.value=Math.max((0,T.Sm)(Be.sourceLinks,c),(0,T.Sm)(Be.targetLinks,c)),Be.sourceLinks.forEach(function(Ye){Ye.circular&&(Be.partOfCycle=!0,Be.circularLinkType=Ye.circularLinkType)}),Be.targetLinks.forEach(function(Ye){Ye.circular&&(Be.partOfCycle=!0,Be.circularLinkType=Ye.circularLinkType)})})}(Me),function(Ne){var Be,Ye,We;for(Be=Ne.nodes,Ye=[],We=0;Be.length;++We,Be=Ye,Ye=[])Be.forEach(function(et){et.depth=We,et.sourceLinks.forEach(function(ft){Ye.indexOf(ft.target)<0&&!ft.circular&&Ye.push(ft.target)})});for(Be=Ne.nodes,Ye=[],We=0;Be.length;++We,Be=Ye,Ye=[])Be.forEach(function(et){et.height=We,et.targetLinks.forEach(function(ft){Ye.indexOf(ft.source)<0&&!ft.circular&&Ye.push(ft.source)})});Ne.nodes.forEach(function(et){et.column=Math.floor(de.call(null,et,We))})}(Me),P(Me,ue),function(Ne,Be,Ye){var We=(0,w.b1)().key(function(Mt){return Mt.column}).sortKeys(T.j2).entries(Ne.nodes).map(function(Mt){return Mt.values});(function(Mt){if(_e){var _t=1/0;We.forEach(function(zt){var Ft=Te*_e/(zt.length+1);_t=Ft<_t?Ft:_t}),xe=_t}var it=(0,T.VV)(We,function(zt){return(Te-Ce-(zt.length-1)*xe)/(0,T.Sm)(zt,c)});it*=E,Ne.links.forEach(function(zt){zt.width=zt.value*it});var st=function(zt){var Ft=0,Pt=0,Xe=0,Ke=0,He=(0,T.Fp)(zt.nodes,function(Je){return Je.column});return zt.links.forEach(function(Je){Je.circular&&(Je.circularLinkType=="top"?Ft+=Je.width:Pt+=Je.width,Je.target.column==0&&(Ke+=Je.width),Je.source.column==He&&(Xe+=Je.width))}),{top:Ft=Ft>0?Ft+S+M:Ft,bottom:Pt=Pt>0?Pt+S+M:Pt,left:Ke=Ke>0?Ke+S+M:Ke,right:Xe=Xe>0?Xe+S+M:Xe}}(Ne),St=function(zt,Ft){var Pt=(0,T.Fp)(zt.nodes,function(lt){return lt.column}),Xe=ke-ye,Ke=Te-Ce,He=Xe/(Xe+Ft.right+Ft.left),Je=Ke/(Ke+Ft.top+Ft.bottom);return ye=ye*He+Ft.left,ke=Ft.right==0?ke:ke*He,Ce=Ce*Je+Ft.top,Te*=Je,zt.nodes.forEach(function(lt){lt.x0=ye+lt.column*((ke-ye-le)/Pt),lt.x1=lt.x0+le}),Je}(Ne,st);it*=St,Ne.links.forEach(function(zt){zt.width=zt.value*it}),We.forEach(function(zt){var Ft=zt.length;zt.forEach(function(Pt,Xe){Pt.depth==We.length-1&&Ft==1||Pt.depth==0&&Ft==1?(Pt.y0=Te/2-Pt.value*it,Pt.y1=Pt.y0+Pt.value*it):Pt.partOfCycle?z(Pt,Mt)==0?(Pt.y0=Te/2+Xe,Pt.y1=Pt.y0+Pt.value*it):Pt.circularLinkType=="top"?(Pt.y0=Ce+Xe,Pt.y1=Pt.y0+Pt.value*it):(Pt.y0=Te-Pt.value*it-Xe,Pt.y1=Pt.y0+Pt.value*it):st.top==0||st.bottom==0?(Pt.y0=(Te-Ce)/Ft*Xe,Pt.y1=Pt.y0+Pt.value*it):(Pt.y0=(Te-Ce)/2-Ft/2+Xe,Pt.y1=Pt.y0+Pt.value*it)})})})(Ye),mt();for(var et=1,ft=Be;ft>0;--ft)ht(et*=.99,Ye),mt();function ht(Mt,_t){var it=We.length;We.forEach(function(st){var St=st.length,zt=st[0].depth;st.forEach(function(Ft){var Pt;if((Ft.sourceLinks.length||Ft.targetLinks.length)&&!(Ft.partOfCycle&&z(Ft,_t)>0))if(zt==0&&St==1)Pt=Ft.y1-Ft.y0,Ft.y0=Te/2-Pt/2,Ft.y1=Te/2+Pt/2;else if(zt==it-1&&St==1)Pt=Ft.y1-Ft.y0,Ft.y0=Te/2-Pt/2,Ft.y1=Te/2+Pt/2;else{var Xe=(0,T.J6)(Ft.sourceLinks,d),Ke=(0,T.J6)(Ft.targetLinks,g),He=((Xe&&Ke?(Xe+Ke)/2:Xe||Ke)-b(Ft))*Mt;Ft.y0+=He,Ft.y1+=He}})})}function mt(){We.forEach(function(Mt){var _t,it,st,St=Ce,zt=Mt.length;for(Mt.sort(p),st=0;st<zt;++st)(it=St-(_t=Mt[st]).y0)>0&&(_t.y0+=it,_t.y1+=it),St=_t.y1+xe;if((it=St-xe-Te)>0)for(St=_t.y0-=it,_t.y1-=it,st=zt-2;st>=0;--st)(it=(_t=Mt[st]).y1+xe-St)>0&&(_t.y0-=it,_t.y1-=it),St=_t.y0})}}(Me,Ee,ue),be(Me);for(var De=0;De<4;De++)ae(Me,Te,ue),oe(Me,0,ue),ee(Me,Ce,Te,ue),ae(Me,Te,ue),oe(Me,0,ue);return function(Ne,Be,Ye){var We=Ne.nodes,et=Ne.links,ft=!1,ht=!1;if(et.forEach(function(_t){_t.circularLinkType=="top"?ft=!0:_t.circularLinkType=="bottom"&&(ht=!0)}),ft==0||ht==0){var mt=(0,T.VV)(We,function(_t){return _t.y0}),Mt=(Ye-Be)/((0,T.Fp)(We,function(_t){return _t.y1})-mt);We.forEach(function(_t){var it=(_t.y1-_t.y0)*Mt;_t.y0=(_t.y0-mt)*Mt,_t.y1=_t.y0+it}),et.forEach(function(_t){_t.y0=(_t.y0-mt)*Mt,_t.y1=(_t.y1-mt)*Mt,_t.width=_t.width*Mt})}}(Me,Ce,Te),j(Me,Oe,Te,ue),Me}function be(Me){Me.nodes.forEach(function(De){De.sourceLinks.sort(u),De.targetLinks.sort(o)}),Me.nodes.forEach(function(De){var Ne=De.y0,Be=Ne,Ye=De.y1,We=Ye;De.sourceLinks.forEach(function(et){et.circular?(et.y0=Ye-et.width/2,Ye-=et.width):(et.y0=Ne+et.width/2,Ne+=et.width)}),De.targetLinks.forEach(function(et){et.circular?(et.y1=We-et.width/2,We-=et.width):(et.y1=Be+et.width/2,Be+=et.width)})})}return pe.nodeId=function(Me){return arguments.length?(ue=typeof Me=="function"?Me:r(Me),pe):ue},pe.nodeAlign=function(Me){return arguments.length?(de=typeof Me=="function"?Me:r(Me),pe):de},pe.nodeWidth=function(Me){return arguments.length?(le=+Me,pe):le},pe.nodePadding=function(Me){return arguments.length?(xe=+Me,pe):xe},pe.nodes=function(Me){return arguments.length?(Le=typeof Me=="function"?Me:r(Me),pe):Le},pe.links=function(Me){return arguments.length?(we=typeof Me=="function"?Me:r(Me),pe):we},pe.size=function(Me){return arguments.length?(ye=Ce=0,ke=+Me[0],Te=+Me[1],pe):[ke-ye,Te-Ce]},pe.extent=function(Me){return arguments.length?(ye=+Me[0][0],ke=+Me[1][0],Ce=+Me[0][1],Te=+Me[1][1],pe):[[ye,Ce],[ke,Te]]},pe.iterations=function(Me){return arguments.length?(Ee=+Me,pe):Ee},pe.circularLinkGap=function(Me){return arguments.length?(Oe=+Me,pe):Oe},pe.nodePaddingRatio=function(Me){return arguments.length?(_e=+Me,pe):_e},pe.sortNodes=function(Me){return arguments.length?(Fe=Me,pe):Fe},pe.update=function(Me){return P(Me,ue),be(Me),Me.links.forEach(function(De){De.circular&&(De.circularLinkType=De.y0+De.y1<Te?"top":"bottom",De.source.circularLinkType=De.circularLinkType,De.target.circularLinkType=De.circularLinkType)}),ae(Me,Te,ue,!1),oe(Me,0,ue),j(Me,Oe,Te,ue),Me},pe}function P(xe,_e){var ye=0,Ce=0;xe.links.forEach(function(ke){ke.circular&&(ke.source.circularLinkType||ke.target.circularLinkType?ke.circularLinkType=ke.source.circularLinkType?ke.source.circularLinkType:ke.target.circularLinkType:ke.circularLinkType=ye<Ce?"top":"bottom",ke.circularLinkType=="top"?ye+=1:Ce+=1,xe.nodes.forEach(function(Te){f(Te,_e)!=f(ke.source,_e)&&f(Te,_e)!=f(ke.target,_e)||(Te.circularLinkType=ke.circularLinkType)}))}),xe.links.forEach(function(ke){ke.circular&&(ke.source.circularLinkType==ke.target.circularLinkType&&(ke.circularLinkType=ke.source.circularLinkType),ve(ke,_e)&&(ke.circularLinkType=ke.source.circularLinkType))})}function I(xe){var _e=Math.abs(xe.y1-xe.y0),ye=Math.abs(xe.target.x0-xe.source.x1);return Math.atan(ye/_e)}function z(xe,_e){var ye=0;xe.sourceLinks.forEach(function(ke){ye=ke.circular&&!ve(ke,_e)?ye+1:ye});var Ce=0;return xe.targetLinks.forEach(function(ke){Ce=ke.circular&&!ve(ke,_e)?Ce+1:Ce}),ye+Ce}function U(xe){var _e=xe.source.sourceLinks,ye=0;_e.forEach(function(Te){ye=Te.circular?ye+1:ye});var Ce=xe.target.targetLinks,ke=0;return Ce.forEach(function(Te){ke=Te.circular?ke+1:ke}),!(ye>1||ke>1)}function R(xe,_e,ye){return xe.sort(Z),xe.forEach(function(Ce,ke){var Te,le,ue=0;if(ve(Ce,ye)&&U(Ce))Ce.circularPathData.verticalBuffer=ue+Ce.width/2;else{for(var de=0;de<ke;de++)if(Te=xe[ke],le=xe[de],!(Te.source.column<le.target.column||Te.target.column>le.source.column)){var Le=xe[de].circularPathData.verticalBuffer+xe[de].width/2+_e;ue=Le>ue?Le:ue}Ce.circularPathData.verticalBuffer=ue+Ce.width/2}}),xe}function j(xe,_e,ye,Ce){var ke=(0,T.VV)(xe.links,function(Te){return Te.source.y0});xe.links.forEach(function(Te){Te.circular&&(Te.circularPathData={})}),R(xe.links.filter(function(Te){return Te.circularLinkType=="top"}),_e,Ce),R(xe.links.filter(function(Te){return Te.circularLinkType=="bottom"}),_e,Ce),xe.links.forEach(function(Te){if(Te.circular){if(Te.circularPathData.arcRadius=Te.width+M,Te.circularPathData.leftNodeBuffer=5,Te.circularPathData.rightNodeBuffer=5,Te.circularPathData.sourceWidth=Te.source.x1-Te.source.x0,Te.circularPathData.sourceX=Te.source.x0+Te.circularPathData.sourceWidth,Te.circularPathData.targetX=Te.target.x0,Te.circularPathData.sourceY=Te.y0,Te.circularPathData.targetY=Te.y1,ve(Te,Ce)&&U(Te))Te.circularPathData.leftSmallArcRadius=M+Te.width/2,Te.circularPathData.leftLargeArcRadius=M+Te.width/2,Te.circularPathData.rightSmallArcRadius=M+Te.width/2,Te.circularPathData.rightLargeArcRadius=M+Te.width/2,Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Te.source.y1+S+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=Te.source.y0-S-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius);else{var le=Te.source.column,ue=Te.circularLinkType,de=xe.links.filter(function(Ee){return Ee.source.column==le&&Ee.circularLinkType==ue});Te.circularLinkType=="bottom"?de.sort(V):de.sort(F);var Le=0;de.forEach(function(Ee,Oe){Ee.circularLinkID==Te.circularLinkID&&(Te.circularPathData.leftSmallArcRadius=M+Te.width/2+Le,Te.circularPathData.leftLargeArcRadius=M+Te.width/2+Oe*_e+Le),Le+=Ee.width}),le=Te.target.column,de=xe.links.filter(function(Ee){return Ee.target.column==le&&Ee.circularLinkType==ue}),Te.circularLinkType=="bottom"?de.sort(te):de.sort(H),Le=0,de.forEach(function(Ee,Oe){Ee.circularLinkID==Te.circularLinkID&&(Te.circularPathData.rightSmallArcRadius=M+Te.width/2+Le,Te.circularPathData.rightLargeArcRadius=M+Te.width/2+Oe*_e+Le),Le+=Ee.width}),Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Math.max(ye,Te.source.y1,Te.target.y1)+S+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=ke-S-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius)}Te.circularPathData.leftInnerExtent=Te.circularPathData.sourceX+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightInnerExtent=Te.circularPathData.targetX-Te.circularPathData.rightNodeBuffer,Te.circularPathData.leftFullExtent=Te.circularPathData.sourceX+Te.circularPathData.leftLargeArcRadius+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightFullExtent=Te.circularPathData.targetX-Te.circularPathData.rightLargeArcRadius-Te.circularPathData.rightNodeBuffer}if(Te.circular)Te.path=function(Ee){return Ee.circularLinkType=="top"?"M"+Ee.circularPathData.sourceX+" "+Ee.circularPathData.sourceY+" L"+Ee.circularPathData.leftInnerExtent+" "+Ee.circularPathData.sourceY+" A"+Ee.circularPathData.leftLargeArcRadius+" "+Ee.circularPathData.leftSmallArcRadius+" 0 0 0 "+Ee.circularPathData.leftFullExtent+" "+(Ee.circularPathData.sourceY-Ee.circularPathData.leftSmallArcRadius)+" L"+Ee.circularPathData.leftFullExtent+" "+Ee.circularPathData.verticalLeftInnerExtent+" A"+Ee.circularPathData.leftLargeArcRadius+" "+Ee.circularPathData.leftLargeArcRadius+" 0 0 0 "+Ee.circularPathData.leftInnerExtent+" "+Ee.circularPathData.verticalFullExtent+" L"+Ee.circularPathData.rightInnerExtent+" "+Ee.circularPathData.verticalFullExtent+" A"+Ee.circularPathData.rightLargeArcRadius+" "+Ee.circularPathData.rightLargeArcRadius+" 0 0 0 "+Ee.circularPathData.rightFullExtent+" "+Ee.circularPathData.verticalRightInnerExtent+" L"+Ee.circularPathData.rightFullExtent+" "+(Ee.circularPathData.targetY-Ee.circularPathData.rightSmallArcRadius)+" A"+Ee.circularPathData.rightLargeArcRadius+" "+Ee.circularPathData.rightSmallArcRadius+" 0 0 0 "+Ee.circularPathData.rightInnerExtent+" "+Ee.circularPathData.targetY+" L"+Ee.circularPathData.targetX+" "+Ee.circularPathData.targetY:"M"+Ee.circularPathData.sourceX+" "+Ee.circularPathData.sourceY+" L"+Ee.circularPathData.leftInnerExtent+" "+Ee.circularPathData.sourceY+" A"+Ee.circularPathData.leftLargeArcRadius+" "+Ee.circularPathData.leftSmallArcRadius+" 0 0 1 "+Ee.circularPathData.leftFullExtent+" "+(Ee.circularPathData.sourceY+Ee.circularPathData.leftSmallArcRadius)+" L"+Ee.circularPathData.leftFullExtent+" "+Ee.circularPathData.verticalLeftInnerExtent+" A"+Ee.circularPathData.leftLargeArcRadius+" "+Ee.circularPathData.leftLargeArcRadius+" 0 0 1 "+Ee.circularPathData.leftInnerExtent+" "+Ee.circularPathData.verticalFullExtent+" L"+Ee.circularPathData.rightInnerExtent+" "+Ee.circularPathData.verticalFullExtent+" A"+Ee.circularPathData.rightLargeArcRadius+" "+Ee.circularPathData.rightLargeArcRadius+" 0 0 1 "+Ee.circularPathData.rightFullExtent+" "+Ee.circularPathData.verticalRightInnerExtent+" L"+Ee.circularPathData.rightFullExtent+" "+(Ee.circularPathData.targetY+Ee.circularPathData.rightSmallArcRadius)+" A"+Ee.circularPathData.rightLargeArcRadius+" "+Ee.circularPathData.rightSmallArcRadius+" 0 0 1 "+Ee.circularPathData.rightInnerExtent+" "+Ee.circularPathData.targetY+" L"+Ee.circularPathData.targetX+" "+Ee.circularPathData.targetY}(Te);else{var we=(0,i.h5)().source(function(Ee){return[Ee.source.x0+(Ee.source.x1-Ee.source.x0),Ee.y0]}).target(function(Ee){return[Ee.target.x0,Ee.y1]});Te.path=we(Te)}})}function Z(xe,_e){return $(xe)==$(_e)?xe.circularLinkType=="bottom"?V(xe,_e):F(xe,_e):$(_e)-$(xe)}function F(xe,_e){return xe.y0-_e.y0}function V(xe,_e){return _e.y0-xe.y0}function H(xe,_e){return xe.y1-_e.y1}function te(xe,_e){return _e.y1-xe.y1}function $(xe){return xe.target.column-xe.source.column}function J(xe){return xe.target.x0-xe.source.x1}function X(xe,_e){var ye=I(xe),Ce=J(_e)/Math.tan(ye);return ge(xe)=="up"?xe.y1+Ce:xe.y1-Ce}function K(xe,_e){var ye=I(xe),Ce=J(_e)/Math.tan(ye);return ge(xe)=="up"?xe.y1-Ce:xe.y1+Ce}function ee(xe,_e,ye,Ce){xe.links.forEach(function(ke){if(!ke.circular&&ke.target.column-ke.source.column>1){var Te=ke.source.column+1,le=ke.target.column-1,ue=1,de=le-Te+1;for(ue=1;Te<=le;Te++,ue++)xe.nodes.forEach(function(Le){if(Le.column==Te){var we,Ee=ue/(de+1),Oe=Math.pow(1-Ee,3),Fe=3*Ee*Math.pow(1-Ee,2),pe=3*Math.pow(Ee,2)*(1-Ee),be=Math.pow(Ee,3),Me=Oe*ke.y0+Fe*ke.y0+pe*ke.y1+be*ke.y1,De=Me-ke.width/2,Ne=Me+ke.width/2;De>Le.y0&&De<Le.y1?(we=Le.y1-De+10,we=Le.circularLinkType=="bottom"?we:-we,Le=ie(Le,we,_e,ye),xe.nodes.forEach(function(Be){var Ye,We;f(Be,Ce)!=f(Le,Ce)&&Be.column==Le.column&&(We=Be,(Ye=Le).y0>We.y0&&Ye.y0<We.y1||Ye.y1>We.y0&&Ye.y1<We.y1||Ye.y0<We.y0&&Ye.y1>We.y1)&&ie(Be,we,_e,ye)})):(Ne>Le.y0&&Ne<Le.y1||De<Le.y0&&Ne>Le.y1)&&(we=Ne-Le.y0+10,Le=ie(Le,we,_e,ye),xe.nodes.forEach(function(Be){f(Be,Ce)!=f(Le,Ce)&&Be.column==Le.column&&Be.y0<Le.y1&&Be.y1>Le.y1&&ie(Be,we,_e,ye)}))}})}})}function ie(xe,_e,ye,Ce){return xe.y0+_e>=ye&&xe.y1+_e<=Ce&&(xe.y0=xe.y0+_e,xe.y1=xe.y1+_e,xe.targetLinks.forEach(function(ke){ke.y1=ke.y1+_e}),xe.sourceLinks.forEach(function(ke){ke.y0=ke.y0+_e})),xe}function ae(xe,_e,ye,Ce){xe.nodes.forEach(function(ke){Ce&&ke.y+(ke.y1-ke.y0)>_e&&(ke.y=ke.y-(ke.y+(ke.y1-ke.y0)-_e));var Te=xe.links.filter(function(de){return f(de.source,ye)==f(ke,ye)}),le=Te.length;le>1&&Te.sort(function(de,Le){if(!de.circular&&!Le.circular){if(de.target.column==Le.target.column||!fe(de,Le))return de.y1-Le.y1;if(de.target.column>Le.target.column){var we=K(Le,de);return de.y1-we}if(Le.target.column>de.target.column)return K(de,Le)-Le.y1}return de.circular&&!Le.circular?de.circularLinkType=="top"?-1:1:Le.circular&&!de.circular?Le.circularLinkType=="top"?1:-1:de.circular&&Le.circular?de.circularLinkType===Le.circularLinkType&&de.circularLinkType=="top"?de.target.column===Le.target.column?de.target.y1-Le.target.y1:Le.target.column-de.target.column:de.circularLinkType===Le.circularLinkType&&de.circularLinkType=="bottom"?de.target.column===Le.target.column?Le.target.y1-de.target.y1:de.target.column-Le.target.column:de.circularLinkType=="top"?-1:1:void 0});var ue=ke.y0;Te.forEach(function(de){de.y0=ue+de.width/2,ue+=de.width}),Te.forEach(function(de,Le){if(de.circularLinkType=="bottom"){for(var we=Le+1,Ee=0;we<le;we++)Ee+=Te[we].width;de.y0=ke.y1-Ee-de.width/2}})})}function oe(xe,_e,ye){xe.nodes.forEach(function(Ce){var ke=xe.links.filter(function(ue){return f(ue.target,ye)==f(Ce,ye)}),Te=ke.length;Te>1&&ke.sort(function(ue,de){if(!ue.circular&&!de.circular){if(ue.source.column==de.source.column||!fe(ue,de))return ue.y0-de.y0;if(de.source.column<ue.source.column){var Le=X(de,ue);return ue.y0-Le}if(ue.source.column<de.source.column)return X(ue,de)-de.y0}return ue.circular&&!de.circular?ue.circularLinkType=="top"?-1:1:de.circular&&!ue.circular?de.circularLinkType=="top"?1:-1:ue.circular&&de.circular?ue.circularLinkType===de.circularLinkType&&ue.circularLinkType=="top"?ue.source.column===de.source.column?ue.source.y1-de.source.y1:ue.source.column-de.source.column:ue.circularLinkType===de.circularLinkType&&ue.circularLinkType=="bottom"?ue.source.column===de.source.column?ue.source.y1-de.source.y1:de.source.column-ue.source.column:ue.circularLinkType=="top"?-1:1:void 0});var le=Ce.y0;ke.forEach(function(ue){ue.y1=le+ue.width/2,le+=ue.width}),ke.forEach(function(ue,de){if(ue.circularLinkType=="bottom"){for(var Le=de+1,we=0;Le<Te;Le++)we+=ke[Le].width;ue.y1=Ce.y1-we-ue.width/2}})})}function fe(xe,_e){return ge(xe)==ge(_e)}function ge(xe){return xe.y0-xe.y1>0?"up":"down"}function ve(xe,_e){return f(xe.source,_e)==f(xe.target,_e)}},30838:function(N,L,e){e.r(L),e.d(L,{sankey:function(){return m},sankeyCenter:function(){return s},sankeyJustify:function(){return h},sankeyLeft:function(){return _},sankeyLinkHorizontal:function(){return f},sankeyRight:function(){return v}});var T=e(33064),w=e(15140);function i(S){return S.target.depth}function _(S){return S.depth}function v(S,M){return M-1-S.height}function h(S,M){return S.sourceLinks.length?S.depth:M-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,T.VV)(S.sourceLinks,i)-1:0}function t(S){return function(){return S}}function a(S,M){return r(S.source,M.source)||S.index-M.index}function n(S,M){return r(S.target,M.target)||S.index-M.index}function r(S,M){return S.y0-M.y0}function l(S){return S.value}function o(S){return(S.y0+S.y1)/2}function u(S){return o(S.source)*S.value}function p(S){return o(S.target)*S.value}function c(S){return S.index}function b(S){return S.nodes}function g(S){return S.links}function d(S,M){var E=S.get(M);if(!E)throw new Error("missing: "+M);return E}function m(){var S=0,M=0,E=1,O=1,P=24,I=8,z=c,U=h,R=b,j=g,Z=32;function F(){var H={nodes:R.apply(null,arguments),links:j.apply(null,arguments)};return function(te){te.nodes.forEach(function(J,X){J.index=X,J.sourceLinks=[],J.targetLinks=[]});var $=(0,w.UI)(te.nodes,z);te.links.forEach(function(J,X){J.index=X;var K=J.source,ee=J.target;typeof K!="object"&&(K=J.source=d($,K)),typeof ee!="object"&&(ee=J.target=d($,ee)),K.sourceLinks.push(J),ee.targetLinks.push(J)})}(H),function(te){te.nodes.forEach(function($){$.value=Math.max((0,T.Sm)($.sourceLinks,l),(0,T.Sm)($.targetLinks,l))})}(H),function(te){var $,J,X;for($=te.nodes,J=[],X=0;$.length;++X,$=J,J=[])$.forEach(function(ee){ee.depth=X,ee.sourceLinks.forEach(function(ie){J.indexOf(ie.target)<0&&J.push(ie.target)})});for($=te.nodes,J=[],X=0;$.length;++X,$=J,J=[])$.forEach(function(ee){ee.height=X,ee.targetLinks.forEach(function(ie){J.indexOf(ie.source)<0&&J.push(ie.source)})});var K=(E-S-P)/(X-1);te.nodes.forEach(function(ee){ee.x1=(ee.x0=S+Math.max(0,Math.min(X-1,Math.floor(U.call(null,ee,X))))*K)+P})}(H),function(te){var $=(0,w.b1)().key(function(ae){return ae.x0}).sortKeys(T.j2).entries(te.nodes).map(function(ae){return ae.values});(function(){var ae=(0,T.Fp)($,function(ge){return ge.length}),oe=.6666666666666666*(O-M)/(ae-1);I>oe&&(I=oe);var fe=(0,T.VV)($,function(ge){return(O-M-(ge.length-1)*I)/(0,T.Sm)(ge,l)});$.forEach(function(ge){ge.forEach(function(ve,xe){ve.y1=(ve.y0=xe)+ve.value*fe})}),te.links.forEach(function(ge){ge.width=ge.value*fe})})(),ie();for(var J=1,X=Z;X>0;--X)ee(J*=.99),ie(),K(J),ie();function K(ae){$.forEach(function(oe){oe.forEach(function(fe){if(fe.targetLinks.length){var ge=((0,T.Sm)(fe.targetLinks,u)/(0,T.Sm)(fe.targetLinks,l)-o(fe))*ae;fe.y0+=ge,fe.y1+=ge}})})}function ee(ae){$.slice().reverse().forEach(function(oe){oe.forEach(function(fe){if(fe.sourceLinks.length){var ge=((0,T.Sm)(fe.sourceLinks,p)/(0,T.Sm)(fe.sourceLinks,l)-o(fe))*ae;fe.y0+=ge,fe.y1+=ge}})})}function ie(){$.forEach(function(ae){var oe,fe,ge,ve=M,xe=ae.length;for(ae.sort(r),ge=0;ge<xe;++ge)(fe=ve-(oe=ae[ge]).y0)>0&&(oe.y0+=fe,oe.y1+=fe),ve=oe.y1+I;if((fe=ve-I-O)>0)for(ve=oe.y0-=fe,oe.y1-=fe,ge=xe-2;ge>=0;--ge)(fe=(oe=ae[ge]).y1+I-ve)>0&&(oe.y0-=fe,oe.y1-=fe),ve=oe.y0})}}(H),V(H),H}function V(H){H.nodes.forEach(function(te){te.sourceLinks.sort(n),te.targetLinks.sort(a)}),H.nodes.forEach(function(te){var $=te.y0,J=$;te.sourceLinks.forEach(function(X){X.y0=$+X.width/2,$+=X.width}),te.targetLinks.forEach(function(X){X.y1=J+X.width/2,J+=X.width})})}return F.update=function(H){return V(H),H},F.nodeId=function(H){return arguments.length?(z=typeof H=="function"?H:t(H),F):z},F.nodeAlign=function(H){return arguments.length?(U=typeof H=="function"?H:t(H),F):U},F.nodeWidth=function(H){return arguments.length?(P=+H,F):P},F.nodePadding=function(H){return arguments.length?(I=+H,F):I},F.nodes=function(H){return arguments.length?(R=typeof H=="function"?H:t(H),F):R},F.links=function(H){return arguments.length?(j=typeof H=="function"?H:t(H),F):j},F.size=function(H){return arguments.length?(S=M=0,E=+H[0],O=+H[1],F):[E-S,O-M]},F.extent=function(H){return arguments.length?(S=+H[0][0],E=+H[1][0],M=+H[0][1],O=+H[1][1],F):[[S,M],[E,O]]},F.iterations=function(H){return arguments.length?(Z=+H,F):Z},F}var x=e(45879);function y(S){return[S.source.x1,S.y0]}function k(S){return[S.target.x0,S.y1]}function f(){return(0,x.h5)().source(y).target(k)}},39898:function(N,L,e){var T,w;(function(){var i={version:"3.8.0"},_=[].slice,v=function(C){return _.call(C)},h=self.document;function s(C){return C&&(C.ownerDocument||C.document||C).documentElement}function t(C){return C&&(C.ownerDocument&&C.ownerDocument.defaultView||C.document&&C||C.defaultView)}if(h)try{v(h.documentElement.childNodes)[0].nodeType}catch{v=function(q){for(var Q=q.length,ne=new Array(Q);Q--;)ne[Q]=q[Q];return ne}}if(Date.now||(Date.now=function(){return+new Date}),h)try{h.createElement("DIV").style.setProperty("opacity",0,"")}catch{var a=this.Element.prototype,n=a.setAttribute,r=a.setAttributeNS,l=this.CSSStyleDeclaration.prototype,o=l.setProperty;a.setAttribute=function(q,Q){n.call(this,q,Q+"")},a.setAttributeNS=function(q,Q,ne){r.call(this,q,Q,ne+"")},l.setProperty=function(q,Q,ne){o.call(this,q,Q+"",ne)}}function u(C,q){return C<q?-1:C>q?1:C>=q?0:NaN}function p(C){return C===null?NaN:+C}function c(C){return!isNaN(C)}function b(C){return{left:function(q,Q,ne,he){for(arguments.length<3&&(ne=0),arguments.length<4&&(he=q.length);ne<he;){var me=ne+he>>>1;C(q[me],Q)<0?ne=me+1:he=me}return ne},right:function(q,Q,ne,he){for(arguments.length<3&&(ne=0),arguments.length<4&&(he=q.length);ne<he;){var me=ne+he>>>1;C(q[me],Q)>0?he=me:ne=me+1}return ne}}}i.ascending=u,i.descending=function(C,q){return q<C?-1:q>C?1:q>=C?0:NaN},i.min=function(C,q){var Q,ne,he=-1,me=C.length;if(arguments.length===1){for(;++he<me;)if((ne=C[he])!=null&&ne>=ne){Q=ne;break}for(;++he<me;)(ne=C[he])!=null&&Q>ne&&(Q=ne)}else{for(;++he<me;)if((ne=q.call(C,C[he],he))!=null&&ne>=ne){Q=ne;break}for(;++he<me;)(ne=q.call(C,C[he],he))!=null&&Q>ne&&(Q=ne)}return Q},i.max=function(C,q){var Q,ne,he=-1,me=C.length;if(arguments.length===1){for(;++he<me;)if((ne=C[he])!=null&&ne>=ne){Q=ne;break}for(;++he<me;)(ne=C[he])!=null&&ne>Q&&(Q=ne)}else{for(;++he<me;)if((ne=q.call(C,C[he],he))!=null&&ne>=ne){Q=ne;break}for(;++he<me;)(ne=q.call(C,C[he],he))!=null&&ne>Q&&(Q=ne)}return Q},i.extent=function(C,q){var Q,ne,he,me=-1,Pe=C.length;if(arguments.length===1){for(;++me<Pe;)if((ne=C[me])!=null&&ne>=ne){Q=he=ne;break}for(;++me<Pe;)(ne=C[me])!=null&&(Q>ne&&(Q=ne),he<ne&&(he=ne))}else{for(;++me<Pe;)if((ne=q.call(C,C[me],me))!=null&&ne>=ne){Q=he=ne;break}for(;++me<Pe;)(ne=q.call(C,C[me],me))!=null&&(Q>ne&&(Q=ne),he<ne&&(he=ne))}return[Q,he]},i.sum=function(C,q){var Q,ne=0,he=C.length,me=-1;if(arguments.length===1)for(;++me<he;)c(Q=+C[me])&&(ne+=Q);else for(;++me<he;)c(Q=+q.call(C,C[me],me))&&(ne+=Q);return ne},i.mean=function(C,q){var Q,ne=0,he=C.length,me=-1,Pe=he;if(arguments.length===1)for(;++me<he;)c(Q=p(C[me]))?ne+=Q:--Pe;else for(;++me<he;)c(Q=p(q.call(C,C[me],me)))?ne+=Q:--Pe;if(Pe)return ne/Pe},i.quantile=function(C,q){var Q=(C.length-1)*q+1,ne=Math.floor(Q),he=+C[ne-1],me=Q-ne;return me?he+me*(C[ne]-he):he},i.median=function(C,q){var Q,ne=[],he=C.length,me=-1;if(arguments.length===1)for(;++me<he;)c(Q=p(C[me]))&&ne.push(Q);else for(;++me<he;)c(Q=p(q.call(C,C[me],me)))&&ne.push(Q);if(ne.length)return i.quantile(ne.sort(u),.5)},i.variance=function(C,q){var Q,ne,he=C.length,me=0,Pe=0,ze=-1,qe=0;if(arguments.length===1)for(;++ze<he;)c(Q=p(C[ze]))&&(Pe+=(ne=Q-me)*(Q-(me+=ne/++qe)));else for(;++ze<he;)c(Q=p(q.call(C,C[ze],ze)))&&(Pe+=(ne=Q-me)*(Q-(me+=ne/++qe)));if(qe>1)return Pe/(qe-1)},i.deviation=function(){var C=i.variance.apply(this,arguments);return C&&Math.sqrt(C)};var g=b(u);function d(C){return C.length}i.bisectLeft=g.left,i.bisect=i.bisectRight=g.right,i.bisector=function(C){return b(C.length===1?function(q,Q){return u(C(q),Q)}:C)},i.shuffle=function(C,q,Q){(me=arguments.length)<3&&(Q=C.length,me<2&&(q=0));for(var ne,he,me=Q-q;me;)he=Math.random()*me--|0,ne=C[me+q],C[me+q]=C[he+q],C[he+q]=ne;return C},i.permute=function(C,q){for(var Q=q.length,ne=new Array(Q);Q--;)ne[Q]=C[q[Q]];return ne},i.pairs=function(C){for(var q=0,Q=C.length-1,ne=C[0],he=new Array(Q<0?0:Q);q<Q;)he[q]=[ne,ne=C[++q]];return he},i.transpose=function(C){if(!(he=C.length))return[];for(var q=-1,Q=i.min(C,d),ne=new Array(Q);++q<Q;)for(var he,me=-1,Pe=ne[q]=new Array(he);++me<he;)Pe[me]=C[me][q];return ne},i.zip=function(){return i.transpose(arguments)},i.keys=function(C){var q=[];for(var Q in C)q.push(Q);return q},i.values=function(C){var q=[];for(var Q in C)q.push(C[Q]);return q},i.entries=function(C){var q=[];for(var Q in C)q.push({key:Q,value:C[Q]});return q},i.merge=function(C){for(var q,Q,ne,he=C.length,me=-1,Pe=0;++me<he;)Pe+=C[me].length;for(Q=new Array(Pe);--he>=0;)for(q=(ne=C[he]).length;--q>=0;)Q[--Pe]=ne[q];return Q};var m=Math.abs;function x(C,q){for(var Q in q)Object.defineProperty(C.prototype,Q,{value:q[Q],enumerable:!1})}function y(){this._=Object.create(null)}i.range=function(C,q,Q){if(arguments.length<3&&(Q=1,arguments.length<2&&(q=C,C=0)),(q-C)/Q==1/0)throw new Error("infinite range");var ne,he=[],me=function(ze){for(var qe=1;ze*qe%1;)qe*=10;return qe}(m(Q)),Pe=-1;if(C*=me,q*=me,(Q*=me)<0)for(;(ne=C+Q*++Pe)>q;)he.push(ne/me);else for(;(ne=C+Q*++Pe)<q;)he.push(ne/me);return he},i.map=function(C,q){var Q=new y;if(C instanceof y)C.forEach(function(ze,qe){Q.set(ze,qe)});else if(Array.isArray(C)){var ne,he=-1,me=C.length;if(arguments.length===1)for(;++he<me;)Q.set(he,C[he]);else for(;++he<me;)Q.set(q.call(C,ne=C[he],he),ne)}else for(var Pe in C)Q.set(Pe,C[Pe]);return Q};var k="__proto__",f="\0";function S(C){return(C+="")===k||C[0]===f?f+C:C}function M(C){return(C+="")[0]===f?C.slice(1):C}function E(C){return S(C)in this._}function O(C){return(C=S(C))in this._&&delete this._[C]}function P(){var C=[];for(var q in this._)C.push(M(q));return C}function I(){var C=0;for(var q in this._)++C;return C}function z(){for(var C in this._)return!1;return!0}function U(){this._=Object.create(null)}function R(C){return C}function j(C,q,Q){return function(){var ne=Q.apply(q,arguments);return ne===q?C:ne}}function Z(C,q){if(q in C)return q;q=q.charAt(0).toUpperCase()+q.slice(1);for(var Q=0,ne=F.length;Q<ne;++Q){var he=F[Q]+q;if(he in C)return he}}x(y,{has:E,get:function(C){return this._[S(C)]},set:function(C,q){return this._[S(C)]=q},remove:O,keys:P,values:function(){var C=[];for(var q in this._)C.push(this._[q]);return C},entries:function(){var C=[];for(var q in this._)C.push({key:M(q),value:this._[q]});return C},size:I,empty:z,forEach:function(C){for(var q in this._)C.call(this,M(q),this._[q])}}),i.nest=function(){var C,q,Q={},ne=[],he=[];function me(ze,qe,Ze){if(Ze>=ne.length)return q?q.call(Q,qe):C?qe.sort(C):qe;for(var rt,pt,vt,kt,Ot=-1,Et=qe.length,jt=ne[Ze++],It=new y;++Ot<Et;)(kt=It.get(rt=jt(pt=qe[Ot])))?kt.push(pt):It.set(rt,[pt]);return ze?(pt=ze(),vt=function(Jt,Gt){pt.set(Jt,me(ze,Gt,Ze))}):(pt={},vt=function(Jt,Gt){pt[Jt]=me(ze,Gt,Ze)}),It.forEach(vt),pt}function Pe(ze,qe){if(qe>=ne.length)return ze;var Ze=[],rt=he[qe++];return ze.forEach(function(pt,vt){Ze.push({key:pt,values:Pe(vt,qe)})}),rt?Ze.sort(function(pt,vt){return rt(pt.key,vt.key)}):Ze}return Q.map=function(ze,qe){return me(qe,ze,0)},Q.entries=function(ze){return Pe(me(i.map,ze,0),0)},Q.key=function(ze){return ne.push(ze),Q},Q.sortKeys=function(ze){return he[ne.length-1]=ze,Q},Q.sortValues=function(ze){return C=ze,Q},Q.rollup=function(ze){return q=ze,Q},Q},i.set=function(C){var q=new U;if(C)for(var Q=0,ne=C.length;Q<ne;++Q)q.add(C[Q]);return q},x(U,{has:E,add:function(C){return this._[S(C+="")]=!0,C},remove:O,values:P,size:I,empty:z,forEach:function(C){for(var q in this._)C.call(this,M(q))}}),i.behavior={},i.rebind=function(C,q){for(var Q,ne=1,he=arguments.length;++ne<he;)C[Q=arguments[ne]]=j(C,q,q[Q]);return C};var F=["webkit","ms","moz","Moz","o","O"];function V(){}function H(){}function te(C){var q=[],Q=new y;function ne(){for(var he,me=q,Pe=-1,ze=me.length;++Pe<ze;)(he=me[Pe].on)&&he.apply(this,arguments);return C}return ne.on=function(he,me){var Pe,ze=Q.get(he);return arguments.length<2?ze&&ze.on:(ze&&(ze.on=null,q=q.slice(0,Pe=q.indexOf(ze)).concat(q.slice(Pe+1)),Q.remove(he)),me&&q.push(Q.set(he,{on:me})),C)},ne}function $(){i.event.preventDefault()}function J(){for(var C,q=i.event;C=q.sourceEvent;)q=C;return q}function X(C){for(var q=new H,Q=0,ne=arguments.length;++Q<ne;)q[arguments[Q]]=te(q);return q.of=function(he,me){return function(Pe){try{var ze=Pe.sourceEvent=i.event;Pe.target=C,i.event=Pe,q[Pe.type].apply(he,me)}finally{i.event=ze}}},q}i.dispatch=function(){for(var C=new H,q=-1,Q=arguments.length;++q<Q;)C[arguments[q]]=te(C);return C},H.prototype.on=function(C,q){var Q=C.indexOf("."),ne="";if(Q>=0&&(ne=C.slice(Q+1),C=C.slice(0,Q)),C)return arguments.length<2?this[C].on(ne):this[C].on(ne,q);if(arguments.length===2){if(q==null)for(C in this)this.hasOwnProperty(C)&&this[C].on(ne,null);return this}},i.event=null,i.requote=function(C){return C.replace(K,"\\$&")};var K=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ee={}.__proto__?function(C,q){C.__proto__=q}:function(C,q){for(var Q in q)C[Q]=q[Q]};function ie(C){return ee(C,ge),C}var ae=function(C,q){return q.querySelector(C)},oe=function(C,q){return q.querySelectorAll(C)},fe=function(C,q){var Q=C.matches||C[Z(C,"matchesSelector")];return fe=function(ne,he){return Q.call(ne,he)},fe(C,q)};typeof Sizzle=="function"&&(ae=function(C,q){return Sizzle(C,q)[0]||null},oe=Sizzle,fe=Sizzle.matchesSelector),i.selection=function(){return i.select(h.documentElement)};var ge=i.selection.prototype=[];function ve(C){return typeof C=="function"?C:function(){return ae(C,this)}}function xe(C){return typeof C=="function"?C:function(){return oe(C,this)}}ge.select=function(C){var q,Q,ne,he,me=[];C=ve(C);for(var Pe=-1,ze=this.length;++Pe<ze;){me.push(q=[]),q.parentNode=(ne=this[Pe]).parentNode;for(var qe=-1,Ze=ne.length;++qe<Ze;)(he=ne[qe])?(q.push(Q=C.call(he,he.__data__,qe,Pe)),Q&&"__data__"in he&&(Q.__data__=he.__data__)):q.push(null)}return ie(me)},ge.selectAll=function(C){var q,Q,ne=[];C=xe(C);for(var he=-1,me=this.length;++he<me;)for(var Pe=this[he],ze=-1,qe=Pe.length;++ze<qe;)(Q=Pe[ze])&&(ne.push(q=v(C.call(Q,Q.__data__,ze,he))),q.parentNode=Q);return ie(ne)};var _e="http://www.w3.org/1999/xhtml",ye={svg:"http://www.w3.org/2000/svg",xhtml:_e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ce(C,q){return C=i.ns.qualify(C),q==null?C.local?function(){this.removeAttributeNS(C.space,C.local)}:function(){this.removeAttribute(C)}:typeof q=="function"?C.local?function(){var Q=q.apply(this,arguments);Q==null?this.removeAttributeNS(C.space,C.local):this.setAttributeNS(C.space,C.local,Q)}:function(){var Q=q.apply(this,arguments);Q==null?this.removeAttribute(C):this.setAttribute(C,Q)}:C.local?function(){this.setAttributeNS(C.space,C.local,q)}:function(){this.setAttribute(C,q)}}function ke(C){return C.trim().replace(/\s+/g," ")}function Te(C){return new RegExp("(?:^|\\s+)"+i.requote(C)+"(?:\\s+|$)","g")}function le(C){return(C+"").trim().split(/^|\s+/)}function ue(C,q){var Q=(C=le(C).map(de)).length;return typeof q=="function"?function(){for(var ne=-1,he=q.apply(this,arguments);++ne<Q;)C[ne](this,he)}:function(){for(var ne=-1;++ne<Q;)C[ne](this,q)}}function de(C){var q=Te(C);return function(Q,ne){if(he=Q.classList)return ne?he.add(C):he.remove(C);var he=Q.getAttribute("class")||"";ne?(q.lastIndex=0,q.test(he)||Q.setAttribute("class",ke(he+" "+C))):Q.setAttribute("class",ke(he.replace(q," ")))}}function Le(C,q,Q){return q==null?function(){this.style.removeProperty(C)}:typeof q=="function"?function(){var ne=q.apply(this,arguments);ne==null?this.style.removeProperty(C):this.style.setProperty(C,ne,Q)}:function(){this.style.setProperty(C,q,Q)}}function we(C,q){return q==null?function(){delete this[C]}:typeof q=="function"?function(){var Q=q.apply(this,arguments);Q==null?delete this[C]:this[C]=Q}:function(){this[C]=q}}function Ee(C){return typeof C=="function"?C:(C=i.ns.qualify(C)).local?function(){return this.ownerDocument.createElementNS(C.space,C.local)}:function(){var q=this.ownerDocument,Q=this.namespaceURI;return Q===_e&&q.documentElement.namespaceURI===_e?q.createElement(C):q.createElementNS(Q,C)}}function Oe(){var C=this.parentNode;C&&C.removeChild(this)}function Fe(C){return{__data__:C}}function pe(C){return function(){return fe(this,C)}}function be(C){return arguments.length||(C=u),function(q,Q){return q&&Q?C(q.__data__,Q.__data__):!q-!Q}}function Me(C,q){for(var Q=0,ne=C.length;Q<ne;Q++)for(var he,me=C[Q],Pe=0,ze=me.length;Pe<ze;Pe++)(he=me[Pe])&&q(he,Pe,Q);return C}function De(C){return ee(C,Ne),C}i.ns={prefix:ye,qualify:function(C){var q=C.indexOf(":"),Q=C;return q>=0&&(Q=C.slice(0,q))!=="xmlns"&&(C=C.slice(q+1)),ye.hasOwnProperty(Q)?{space:ye[Q],local:C}:C}},ge.attr=function(C,q){if(arguments.length<2){if(typeof C=="string"){var Q=this.node();return(C=i.ns.qualify(C)).local?Q.getAttributeNS(C.space,C.local):Q.getAttribute(C)}for(q in C)this.each(Ce(q,C[q]));return this}return this.each(Ce(C,q))},ge.classed=function(C,q){if(arguments.length<2){if(typeof C=="string"){var Q=this.node(),ne=(C=le(C)).length,he=-1;if(q=Q.classList){for(;++he<ne;)if(!q.contains(C[he]))return!1}else for(q=Q.getAttribute("class");++he<ne;)if(!Te(C[he]).test(q))return!1;return!0}for(q in C)this.each(ue(q,C[q]));return this}return this.each(ue(C,q))},ge.style=function(C,q,Q){var ne=arguments.length;if(ne<3){if(typeof C!="string"){for(Q in ne<2&&(q=""),C)this.each(Le(Q,C[Q],q));return this}if(ne<2){var he=this.node();return t(he).getComputedStyle(he,null).getPropertyValue(C)}Q=""}return this.each(Le(C,q,Q))},ge.property=function(C,q){if(arguments.length<2){if(typeof C=="string")return this.node()[C];for(q in C)this.each(we(q,C[q]));return this}return this.each(we(C,q))},ge.text=function(C){return arguments.length?this.each(typeof C=="function"?function(){var q=C.apply(this,arguments);this.textContent=q??""}:C==null?function(){this.textContent=""}:function(){this.textContent=C}):this.node().textContent},ge.html=function(C){return arguments.length?this.each(typeof C=="function"?function(){var q=C.apply(this,arguments);this.innerHTML=q??""}:C==null?function(){this.innerHTML=""}:function(){this.innerHTML=C}):this.node().innerHTML},ge.append=function(C){return C=Ee(C),this.select(function(){return this.appendChild(C.apply(this,arguments))})},ge.insert=function(C,q){return C=Ee(C),q=ve(q),this.select(function(){return this.insertBefore(C.apply(this,arguments),q.apply(this,arguments)||null)})},ge.remove=function(){return this.each(Oe)},ge.data=function(C,q){var Q,ne,he=-1,me=this.length;if(!arguments.length){for(C=new Array(me=(Q=this[0]).length);++he<me;)(ne=Q[he])&&(C[he]=ne.__data__);return C}function Pe(rt,pt){var vt,kt,Ot,Et=rt.length,jt=pt.length,It=Math.min(Et,jt),Jt=new Array(jt),Gt=new Array(jt),Ht=new Array(Et);if(q){var mn,yn=new y,In=new Array(Et);for(vt=-1;++vt<Et;)(kt=rt[vt])&&(yn.has(mn=q.call(kt,kt.__data__,vt))?Ht[vt]=kt:yn.set(mn,kt),In[vt]=mn);for(vt=-1;++vt<jt;)(kt=yn.get(mn=q.call(pt,Ot=pt[vt],vt)))?kt!==!0&&(Jt[vt]=kt,kt.__data__=Ot):Gt[vt]=Fe(Ot),yn.set(mn,!0);for(vt=-1;++vt<Et;)vt in In&&yn.get(In[vt])!==!0&&(Ht[vt]=rt[vt])}else{for(vt=-1;++vt<It;)kt=rt[vt],Ot=pt[vt],kt?(kt.__data__=Ot,Jt[vt]=kt):Gt[vt]=Fe(Ot);for(;vt<jt;++vt)Gt[vt]=Fe(pt[vt]);for(;vt<Et;++vt)Ht[vt]=rt[vt]}Gt.update=Jt,Gt.parentNode=Jt.parentNode=Ht.parentNode=rt.parentNode,ze.push(Gt),qe.push(Jt),Ze.push(Ht)}var ze=De([]),qe=ie([]),Ze=ie([]);if(typeof C=="function")for(;++he<me;)Pe(Q=this[he],C.call(Q,Q.parentNode.__data__,he));else for(;++he<me;)Pe(Q=this[he],C);return qe.enter=function(){return ze},qe.exit=function(){return Ze},qe},ge.datum=function(C){return arguments.length?this.property("__data__",C):this.property("__data__")},ge.filter=function(C){var q,Q,ne,he=[];typeof C!="function"&&(C=pe(C));for(var me=0,Pe=this.length;me<Pe;me++){he.push(q=[]),q.parentNode=(Q=this[me]).parentNode;for(var ze=0,qe=Q.length;ze<qe;ze++)(ne=Q[ze])&&C.call(ne,ne.__data__,ze,me)&&q.push(ne)}return ie(he)},ge.order=function(){for(var C=-1,q=this.length;++C<q;)for(var Q,ne=this[C],he=ne.length-1,me=ne[he];--he>=0;)(Q=ne[he])&&(me&&me!==Q.nextSibling&&me.parentNode.insertBefore(Q,me),me=Q);return this},ge.sort=function(C){C=be.apply(this,arguments);for(var q=-1,Q=this.length;++q<Q;)this[q].sort(C);return this.order()},ge.each=function(C){return Me(this,function(q,Q,ne){C.call(q,q.__data__,Q,ne)})},ge.call=function(C){var q=v(arguments);return C.apply(q[0]=this,q),this},ge.empty=function(){return!this.node()},ge.node=function(){for(var C=0,q=this.length;C<q;C++)for(var Q=this[C],ne=0,he=Q.length;ne<he;ne++){var me=Q[ne];if(me)return me}return null},ge.size=function(){var C=0;return Me(this,function(){++C}),C};var Ne=[];function Be(C,q,Q){var ne="__on"+C,he=C.indexOf("."),me=We;he>0&&(C=C.slice(0,he));var Pe=Ye.get(C);function ze(){var qe=this[ne];qe&&(this.removeEventListener(C,qe,qe.$),delete this[ne])}return Pe&&(C=Pe,me=et),he?q?function(){var qe=me(q,v(arguments));ze.call(this),this.addEventListener(C,this[ne]=qe,qe.$=Q),qe._=q}:ze:q?V:function(){var qe,Ze=new RegExp("^__on([^.]+)"+i.requote(C)+"$");for(var rt in this)if(qe=rt.match(Ze)){var pt=this[rt];this.removeEventListener(qe[1],pt,pt.$),delete this[rt]}}}i.selection.enter=De,i.selection.enter.prototype=Ne,Ne.append=ge.append,Ne.empty=ge.empty,Ne.node=ge.node,Ne.call=ge.call,Ne.size=ge.size,Ne.select=function(C){for(var q,Q,ne,he,me,Pe=[],ze=-1,qe=this.length;++ze<qe;){ne=(he=this[ze]).update,Pe.push(q=[]),q.parentNode=he.parentNode;for(var Ze=-1,rt=he.length;++Ze<rt;)(me=he[Ze])?(q.push(ne[Ze]=Q=C.call(he.parentNode,me.__data__,Ze,ze)),Q.__data__=me.__data__):q.push(null)}return ie(Pe)},Ne.insert=function(C,q){var Q,ne,he;return arguments.length<2&&(Q=this,q=function(me,Pe,ze){var qe,Ze=Q[ze].update,rt=Ze.length;for(ze!=he&&(he=ze,ne=0),Pe>=ne&&(ne=Pe+1);!(qe=Ze[ne])&&++ne<rt;);return qe}),ge.insert.call(this,C,q)},i.select=function(C){var q;return typeof C=="string"?(q=[ae(C,h)]).parentNode=h.documentElement:(q=[C]).parentNode=s(C),ie([q])},i.selectAll=function(C){var q;return typeof C=="string"?(q=v(oe(C,h))).parentNode=h.documentElement:(q=v(C)).parentNode=null,ie([q])},ge.on=function(C,q,Q){var ne=arguments.length;if(ne<3){if(typeof C!="string"){for(Q in ne<2&&(q=!1),C)this.each(Be(Q,C[Q],q));return this}if(ne<2)return(ne=this.node()["__on"+C])&&ne._;Q=!1}return this.each(Be(C,q,Q))};var Ye=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});function We(C,q){return function(Q){var ne=i.event;i.event=Q,q[0]=this.__data__;try{C.apply(this,q)}finally{i.event=ne}}}function et(C,q){var Q=We(C,q);return function(ne){var he=this,me=ne.relatedTarget;me&&(me===he||8&me.compareDocumentPosition(he))||Q.call(he,ne)}}h&&Ye.forEach(function(C){"on"+C in h&&Ye.remove(C)});var ft,ht=0;function mt(C){var q=".dragsuppress-"+ ++ht,Q="click"+q,ne=i.select(t(C)).on("touchmove"+q,$).on("dragstart"+q,$).on("selectstart"+q,$);if(ft==null&&(ft=!("onselectstart"in C)&&Z(C.style,"userSelect")),ft){var he=s(C).style,me=he[ft];he[ft]="none"}return function(Pe){if(ne.on(q,null),ft&&(he[ft]=me),Pe){var ze=function(){ne.on(Q,null)};ne.on(Q,function(){$(),ze()},!0),setTimeout(ze,0)}}}i.mouse=function(C){return _t(C,J())};var Mt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function _t(C,q){q.changedTouches&&(q=q.changedTouches[0]);var Q=C.ownerSVGElement||C;if(Q.createSVGPoint){var ne=Q.createSVGPoint();if(Mt<0){var he=t(C);if(he.scrollX||he.scrollY){var me=(Q=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Mt=!(me.f||me.e),Q.remove()}}return Mt?(ne.x=q.pageX,ne.y=q.pageY):(ne.x=q.clientX,ne.y=q.clientY),[(ne=ne.matrixTransform(C.getScreenCTM().inverse())).x,ne.y]}var Pe=C.getBoundingClientRect();return[q.clientX-Pe.left-C.clientLeft,q.clientY-Pe.top-C.clientTop]}function it(){return i.event.changedTouches[0].identifier}i.touch=function(C,q,Q){if(arguments.length<3&&(Q=q,q=J().changedTouches),q){for(var ne,he=0,me=q.length;he<me;++he)if((ne=q[he]).identifier===Q)return _t(C,ne)}},i.behavior.drag=function(){var C=X(he,"drag","dragstart","dragend"),q=null,Q=me(V,i.mouse,t,"mousemove","mouseup"),ne=me(it,i.touch,R,"touchmove","touchend");function he(){this.on("mousedown.drag",Q).on("touchstart.drag",ne)}function me(Pe,ze,qe,Ze,rt){return function(){var pt,vt=this,kt=i.event.target.correspondingElement||i.event.target,Ot=vt.parentNode,Et=C.of(vt,arguments),jt=0,It=Pe(),Jt=".drag"+(It==null?"":"-"+It),Gt=i.select(qe(kt)).on(Ze+Jt,function(){var yn,In,Rn=ze(Ot,It);Rn&&(yn=Rn[0]-mn[0],In=Rn[1]-mn[1],jt|=yn|In,mn=Rn,Et({type:"drag",x:Rn[0]+pt[0],y:Rn[1]+pt[1],dx:yn,dy:In}))}).on(rt+Jt,function(){ze(Ot,It)&&(Gt.on(Ze+Jt,null).on(rt+Jt,null),Ht(jt),Et({type:"dragend"}))}),Ht=mt(kt),mn=ze(Ot,It);pt=q?[(pt=q.apply(vt,arguments)).x-mn[0],pt.y-mn[1]]:[0,0],Et({type:"dragstart"})}}return he.origin=function(Pe){return arguments.length?(q=Pe,he):q},i.rebind(he,C,"on")},i.touches=function(C,q){return arguments.length<2&&(q=J().touches),q?v(q).map(function(Q){var ne=_t(C,Q);return ne.identifier=Q.identifier,ne}):[]};var st=1e-6,St=st*st,zt=Math.PI,Ft=2*zt,Pt=Ft-st,Xe=zt/2,Ke=zt/180,He=180/zt;function Je(C){return C>1?Xe:C<-1?-Xe:Math.asin(C)}function lt(C){return((C=Math.exp(C))+1/C)/2}var ot=Math.SQRT2;i.interpolateZoom=function(C,q){var Q,ne,he=C[0],me=C[1],Pe=C[2],ze=q[0],qe=q[1],Ze=q[2],rt=ze-he,pt=qe-me,vt=rt*rt+pt*pt;if(vt<St)ne=Math.log(Ze/Pe)/ot,Q=function(Jt){return[he+Jt*rt,me+Jt*pt,Pe*Math.exp(ot*Jt*ne)]};else{var kt=Math.sqrt(vt),Ot=(Ze*Ze-Pe*Pe+4*vt)/(2*Pe*2*kt),Et=(Ze*Ze-Pe*Pe-4*vt)/(2*Ze*2*kt),jt=Math.log(Math.sqrt(Ot*Ot+1)-Ot),It=Math.log(Math.sqrt(Et*Et+1)-Et);ne=(It-jt)/ot,Q=function(Jt){var Gt,Ht=Jt*ne,mn=lt(jt),yn=Pe/(2*kt)*(mn*(Gt=ot*Ht+jt,((Gt=Math.exp(2*Gt))-1)/(Gt+1))-function(In){return((In=Math.exp(In))-1/In)/2}(jt));return[he+yn*rt,me+yn*pt,Pe*mn/lt(ot*Ht+jt)]}}return Q.duration=1e3*ne,Q},i.behavior.zoom=function(){var C,q,Q,ne,he,me,Pe,ze,qe,Ze={x:0,y:0,k:1},rt=[960,500],pt=at,vt=250,kt=0,Ot="mousedown.zoom",Et="mousemove.zoom",jt="mouseup.zoom",It="touchstart.zoom",Jt=X(Gt,"zoomstart","zoom","zoomend");function Gt($n){$n.on(Ot,Xn).on(Ue+".zoom",Tr).on("dblclick.zoom",Rr).on(It,cr)}function Ht($n){return[($n[0]-Ze.x)/Ze.k,($n[1]-Ze.y)/Ze.k]}function mn($n){Ze.k=Math.max(pt[0],Math.min(pt[1],$n))}function yn($n,ur){ur=function(Sr){return[Sr[0]*Ze.k+Ze.x,Sr[1]*Ze.k+Ze.y]}(ur),Ze.x+=$n[0]-ur[0],Ze.y+=$n[1]-ur[1]}function In($n,ur,Sr,gr){$n.__chart__={x:Ze.x,y:Ze.y,k:Ze.k},mn(Math.pow(2,gr)),yn(q=ur,Sr),$n=i.select($n),vt>0&&($n=$n.transition().duration(vt)),$n.call(Gt.event)}function Rn(){Pe&&Pe.domain(me.range().map(function($n){return($n-Ze.x)/Ze.k}).map(me.invert)),qe&&qe.domain(ze.range().map(function($n){return($n-Ze.y)/Ze.k}).map(ze.invert))}function Yn($n){kt++||$n({type:"zoomstart"})}function er($n){Rn(),$n({type:"zoom",scale:Ze.k,translate:[Ze.x,Ze.y]})}function dr($n){--kt||($n({type:"zoomend"}),q=null)}function Xn(){var $n=this,ur=Jt.of($n,arguments),Sr=0,gr=i.select(t($n)).on(Et,function(){Sr=1,yn(i.mouse($n),Pr),er(ur)}).on(jt,function(){gr.on(Et,null).on(jt,null),jr(Sr),dr(ur)}),Pr=Ht(i.mouse($n)),jr=mt($n);ao.call($n),Yn(ur)}function cr(){var $n,ur=this,Sr=Jt.of(ur,arguments),gr={},Pr=0,jr=".zoom-"+i.event.changedTouches[0].identifier,Xr="touchmove"+jr,Kr="touchend"+jr,ni=[],ai=i.select(ur),Li=mt(ur);function Ki(){var zi=i.touches(ur);return $n=Ze.k,zi.forEach(function(si){si.identifier in gr&&(gr[si.identifier]=Ht(si))}),zi}function Pa(){var zi=i.event.target;i.select(zi).on(Xr,pa).on(Kr,Ma),ni.push(zi);for(var si=i.event.changedTouches,Hi=0,wi=si.length;Hi<wi;++Hi)gr[si[Hi].identifier]=null;var hi=Ki(),qi=Date.now();if(hi.length===1){if(qi-he<500){var Qi=hi[0];In(ur,Qi,gr[Qi.identifier],Math.floor(Math.log(Ze.k)/Math.LN2)+1),$()}he=qi}else if(hi.length>1){Qi=hi[0];var la=hi[1],al=Qi[0]-la[0],ol=Qi[1]-la[1];Pr=al*al+ol*ol}}function pa(){var zi,si,Hi,wi,hi=i.touches(ur);ao.call(ur);for(var qi=0,Qi=hi.length;qi<Qi;++qi,wi=null)if(Hi=hi[qi],wi=gr[Hi.identifier]){if(si)break;zi=Hi,si=wi}if(wi){var la=(la=Hi[0]-zi[0])*la+(la=Hi[1]-zi[1])*la,al=Pr&&Math.sqrt(la/Pr);zi=[(zi[0]+Hi[0])/2,(zi[1]+Hi[1])/2],si=[(si[0]+wi[0])/2,(si[1]+wi[1])/2],mn(al*$n)}he=null,yn(zi,si),er(Sr)}function Ma(){if(i.event.touches.length){for(var zi=i.event.changedTouches,si=0,Hi=zi.length;si<Hi;++si)delete gr[zi[si].identifier];for(var wi in gr)return void Ki()}i.selectAll(ni).on(jr,null),ai.on(Ot,Xn).on(It,cr),Li(),dr(Sr)}Pa(),Yn(Sr),ai.on(Ot,null).on(It,Pa)}function Tr(){var $n=Jt.of(this,arguments);ne?clearTimeout(ne):(ao.call(this),C=Ht(q=Q||i.mouse(this)),Yn($n)),ne=setTimeout(function(){ne=null,dr($n)},50),$(),mn(Math.pow(2,.002*je())*Ze.k),yn(q,C),er($n)}function Rr(){var $n=i.mouse(this),ur=Math.log(Ze.k)/Math.LN2;In(this,$n,Ht($n),i.event.shiftKey?Math.ceil(ur)-1:Math.floor(ur)+1)}return Ue||(Ue="onwheel"in h?(je=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in h?(je=function(){return i.event.wheelDelta},"mousewheel"):(je=function(){return-i.event.detail},"MozMousePixelScroll")),Gt.event=function($n){$n.each(function(){var ur=Jt.of(this,arguments),Sr=Ze;na?i.select(this).transition().each("start.zoom",function(){Ze=this.__chart__||{x:0,y:0,k:1},Yn(ur)}).tween("zoom:zoom",function(){var gr=rt[0],Pr=rt[1],jr=q?q[0]:gr/2,Xr=q?q[1]:Pr/2,Kr=i.interpolateZoom([(jr-Ze.x)/Ze.k,(Xr-Ze.y)/Ze.k,gr/Ze.k],[(jr-Sr.x)/Sr.k,(Xr-Sr.y)/Sr.k,gr/Sr.k]);return function(ni){var ai=Kr(ni),Li=gr/ai[2];this.__chart__=Ze={x:jr-ai[0]*Li,y:Xr-ai[1]*Li,k:Li},er(ur)}}).each("interrupt.zoom",function(){dr(ur)}).each("end.zoom",function(){dr(ur)}):(this.__chart__=Ze,Yn(ur),er(ur),dr(ur))})},Gt.translate=function($n){return arguments.length?(Ze={x:+$n[0],y:+$n[1],k:Ze.k},Rn(),Gt):[Ze.x,Ze.y]},Gt.scale=function($n){return arguments.length?(Ze={x:Ze.x,y:Ze.y,k:null},mn(+$n),Rn(),Gt):Ze.k},Gt.scaleExtent=function($n){return arguments.length?(pt=$n==null?at:[+$n[0],+$n[1]],Gt):pt},Gt.center=function($n){return arguments.length?(Q=$n&&[+$n[0],+$n[1]],Gt):Q},Gt.size=function($n){return arguments.length?(rt=$n&&[+$n[0],+$n[1]],Gt):rt},Gt.duration=function($n){return arguments.length?(vt=+$n,Gt):vt},Gt.x=function($n){return arguments.length?(Pe=$n,me=$n.copy(),Ze={x:0,y:0,k:1},Gt):Pe},Gt.y=function($n){return arguments.length?(qe=$n,ze=$n.copy(),Ze={x:0,y:0,k:1},Gt):qe},i.rebind(Gt,Jt,"on")};var je,Ue,at=[0,1/0];function $e(){}function gt(C,q,Q){return this instanceof gt?(this.h=+C,this.s=+q,void(this.l=+Q)):arguments.length<2?C instanceof gt?new gt(C.h,C.s,C.l):cn(""+C,kn,gt):new gt(C,q,Q)}i.color=$e,$e.prototype.toString=function(){return this.rgb()+""},i.hsl=gt;var yt=gt.prototype=new $e;function xt(C,q,Q){var ne,he;function me(Pe){return Math.round(255*function(ze){return ze>360?ze-=360:ze<0&&(ze+=360),ze<60?ne+(he-ne)*ze/60:ze<180?he:ze<240?ne+(he-ne)*(240-ze)/60:ne}(Pe))}return C=isNaN(C)?0:(C%=360)<0?C+360:C,q=isNaN(q)||q<0?0:q>1?1:q,ne=2*(Q=Q<0?0:Q>1?1:Q)-(he=Q<=.5?Q*(1+q):Q+q-Q*q),new Ln(me(C+120),me(C),me(C-120))}function dt(C,q,Q){return this instanceof dt?(this.h=+C,this.c=+q,void(this.l=+Q)):arguments.length<2?C instanceof dt?new dt(C.h,C.c,C.l):function(ne,he,me){return ne>0?new dt(Math.atan2(me,he)*He,Math.sqrt(he*he+me*me),ne):new dt(NaN,NaN,ne)}(C instanceof bt?C.l:(C=An((C=i.rgb(C)).r,C.g,C.b)).l,C.a,C.b):new dt(C,q,Q)}yt.brighter=function(C){return C=Math.pow(.7,arguments.length?C:1),new gt(this.h,this.s,this.l/C)},yt.darker=function(C){return C=Math.pow(.7,arguments.length?C:1),new gt(this.h,this.s,C*this.l)},yt.rgb=function(){return xt(this.h,this.s,this.l)},i.hcl=dt;var Lt=dt.prototype=new $e;function Tt(C,q,Q){return isNaN(C)&&(C=0),isNaN(q)&&(q=0),new bt(Q,Math.cos(C*=Ke)*q,Math.sin(C)*q)}function bt(C,q,Q){return this instanceof bt?(this.l=+C,this.a=+q,void(this.b=+Q)):arguments.length<2?C instanceof bt?new bt(C.l,C.a,C.b):C instanceof dt?Tt(C.h,C.c,C.l):An((C=Ln(C)).r,C.g,C.b):new bt(C,q,Q)}Lt.brighter=function(C){return new dt(this.h,this.c,Math.min(100,this.l+Ct*(arguments.length?C:1)))},Lt.darker=function(C){return new dt(this.h,this.c,Math.max(0,this.l-Ct*(arguments.length?C:1)))},Lt.rgb=function(){return Tt(this.h,this.c,this.l).rgb()},i.lab=bt;var Ct=18,Dt=.95047,Bt=1,Xt=1.08883,an=bt.prototype=new $e;function Wt(C,q,Q){var ne=(C+16)/116,he=ne+q/500,me=ne-Q/200;return new Ln(Sn(3.2404542*(he=Vt(he)*Dt)-1.5371385*(ne=Vt(ne)*Bt)-.4985314*(me=Vt(me)*Xt)),Sn(-.969266*he+1.8760108*ne+.041556*me),Sn(.0556434*he-.2040259*ne+1.0572252*me))}function Vt(C){return C>.206893034?C*C*C:(C-.13793103448275862)/7.787037}function on(C){return C>.008856?Math.pow(C,.3333333333333333):7.787037*C+.13793103448275862}function Sn(C){return Math.round(255*(C<=.00304?12.92*C:1.055*Math.pow(C,.4166666666666667)-.055))}function Ln(C,q,Q){return this instanceof Ln?(this.r=~~C,this.g=~~q,void(this.b=~~Q)):arguments.length<2?C instanceof Ln?new Ln(C.r,C.g,C.b):cn(""+C,Ln,xt):new Ln(C,q,Q)}function fn(C){return new Ln(C>>16,C>>8&255,255&C)}function Zt(C){return fn(C)+""}an.brighter=function(C){return new bt(Math.min(100,this.l+Ct*(arguments.length?C:1)),this.a,this.b)},an.darker=function(C){return new bt(Math.max(0,this.l-Ct*(arguments.length?C:1)),this.a,this.b)},an.rgb=function(){return Wt(this.l,this.a,this.b)},i.rgb=Ln;var ln=Ln.prototype=new $e;function nn(C){return C<16?"0"+Math.max(0,C).toString(16):Math.min(255,C).toString(16)}function cn(C,q,Q){var ne,he,me,Pe=0,ze=0,qe=0;if(ne=/([a-z]+)\((.*)\)/.exec(C=C.toLowerCase()))switch(he=ne[2].split(","),ne[1]){case"hsl":return Q(parseFloat(he[0]),parseFloat(he[1])/100,parseFloat(he[2])/100);case"rgb":return q(Cn(he[0]),Cn(he[1]),Cn(he[2]))}return(me=_n.get(C))?q(me.r,me.g,me.b):(C==null||C.charAt(0)!=="#"||isNaN(me=parseInt(C.slice(1),16))||(C.length===4?(Pe=(3840&me)>>4,Pe|=Pe>>4,ze=240&me,ze|=ze>>4,qe=15&me,qe|=qe<<4):C.length===7&&(Pe=(16711680&me)>>16,ze=(65280&me)>>8,qe=255&me)),q(Pe,ze,qe))}function kn(C,q,Q){var ne,he,me=Math.min(C/=255,q/=255,Q/=255),Pe=Math.max(C,q,Q),ze=Pe-me,qe=(Pe+me)/2;return ze?(he=qe<.5?ze/(Pe+me):ze/(2-Pe-me),ne=C==Pe?(q-Q)/ze+(q<Q?6:0):q==Pe?(Q-C)/ze+2:(C-q)/ze+4,ne*=60):(ne=NaN,he=qe>0&&qe<1?0:ne),new gt(ne,he,qe)}function An(C,q,Q){var ne=on((.4124564*(C=wn(C))+.3575761*(q=wn(q))+.1804375*(Q=wn(Q)))/Dt),he=on((.2126729*C+.7151522*q+.072175*Q)/Bt);return bt(116*he-16,500*(ne-he),200*(he-on((.0193339*C+.119192*q+.9503041*Q)/Xt)))}function wn(C){return(C/=255)<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function Cn(C){var q=parseFloat(C);return C.charAt(C.length-1)==="%"?Math.round(2.55*q):q}ln.brighter=function(C){C=Math.pow(.7,arguments.length?C:1);var q=this.r,Q=this.g,ne=this.b,he=30;return q||Q||ne?(q&&q<he&&(q=he),Q&&Q<he&&(Q=he),ne&&ne<he&&(ne=he),new Ln(Math.min(255,q/C),Math.min(255,Q/C),Math.min(255,ne/C))):new Ln(he,he,he)},ln.darker=function(C){return new Ln((C=Math.pow(.7,arguments.length?C:1))*this.r,C*this.g,C*this.b)},ln.hsl=function(){return kn(this.r,this.g,this.b)},ln.toString=function(){return"#"+nn(this.r)+nn(this.g)+nn(this.b)};var _n=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function zn(C){return typeof C=="function"?C:function(){return C}}function qn(C){return function(q,Q,ne){return arguments.length===2&&typeof Q=="function"&&(ne=Q,Q=null),sr(q,Q,C,ne)}}function sr(C,q,Q,ne){var he={},me=i.dispatch("beforesend","progress","load","error"),Pe={},ze=new XMLHttpRequest,qe=null;function Ze(){var rt,pt=ze.status;if(!pt&&function(vt){var kt=vt.responseType;return kt&&kt!=="text"?vt.response:vt.responseText}(ze)||pt>=200&&pt<300||pt===304){try{rt=Q.call(he,ze)}catch(vt){return void me.error.call(he,vt)}me.load.call(he,rt)}else me.error.call(he,ze)}return self.XDomainRequest&&!("withCredentials"in ze)&&/^(http(s)?:)?\/\//.test(C)&&(ze=new XDomainRequest),"onload"in ze?ze.onload=ze.onerror=Ze:ze.onreadystatechange=function(){ze.readyState>3&&Ze()},ze.onprogress=function(rt){var pt=i.event;i.event=rt;try{me.progress.call(he,ze)}finally{i.event=pt}},he.header=function(rt,pt){return rt=(rt+"").toLowerCase(),arguments.length<2?Pe[rt]:(pt==null?delete Pe[rt]:Pe[rt]=pt+"",he)},he.mimeType=function(rt){return arguments.length?(q=rt==null?null:rt+"",he):q},he.responseType=function(rt){return arguments.length?(qe=rt,he):qe},he.response=function(rt){return Q=rt,he},["get","post"].forEach(function(rt){he[rt]=function(){return he.send.apply(he,[rt].concat(v(arguments)))}}),he.send=function(rt,pt,vt){if(arguments.length===2&&typeof pt=="function"&&(vt=pt,pt=null),ze.open(rt,C,!0),q==null||"accept"in Pe||(Pe.accept=q+",*/*"),ze.setRequestHeader)for(var kt in Pe)ze.setRequestHeader(kt,Pe[kt]);return q!=null&&ze.overrideMimeType&&ze.overrideMimeType(q),qe!=null&&(ze.responseType=qe),vt!=null&&he.on("error",vt).on("load",function(Ot){vt(null,Ot)}),me.beforesend.call(he,ze),ze.send(pt??null),he},he.abort=function(){return ze.abort(),he},i.rebind(he,me,"on"),ne==null?he:he.get(function(rt){return rt.length===1?function(pt,vt){rt(pt==null?vt:null)}:rt}(ne))}_n.forEach(function(C,q){_n.set(C,fn(q))}),i.functor=zn,i.xhr=qn(R),i.dsv=function(C,q){var Q=new RegExp('["'+C+`
]`),ne=C.charCodeAt(0);function he(Ze,rt,pt){arguments.length<3&&(pt=rt,rt=null);var vt=sr(Ze,q,rt==null?me:Pe(rt),pt);return vt.row=function(kt){return arguments.length?vt.response((rt=kt)==null?me:Pe(kt)):rt},vt}function me(Ze){return he.parse(Ze.responseText)}function Pe(Ze){return function(rt){return he.parse(rt.responseText,Ze)}}function ze(Ze){return Ze.map(qe).join(C)}function qe(Ze){return Q.test(Ze)?'"'+Ze.replace(/\"/g,'""')+'"':Ze}return he.parse=function(Ze,rt){var pt;return he.parseRows(Ze,function(vt,kt){if(pt)return pt(vt,kt-1);var Ot=function(Et){for(var jt={},It=vt.length,Jt=0;Jt<It;++Jt)jt[vt[Jt]]=Et[Jt];return jt};pt=rt?function(Et,jt){return rt(Ot(Et),jt)}:Ot})},he.parseRows=function(Ze,rt){var pt,vt,kt={},Ot={},Et=[],jt=Ze.length,It=0,Jt=0;function Gt(){if(It>=jt)return Ot;if(vt)return vt=!1,kt;var mn=It;if(Ze.charCodeAt(mn)===34){for(var yn=mn;yn++<jt;)if(Ze.charCodeAt(yn)===34){if(Ze.charCodeAt(yn+1)!==34)break;++yn}return It=yn+2,(In=Ze.charCodeAt(yn+1))===13?(vt=!0,Ze.charCodeAt(yn+2)===10&&++It):In===10&&(vt=!0),Ze.slice(mn+1,yn).replace(/""/g,'"')}for(;It<jt;){var In,Rn=1;if((In=Ze.charCodeAt(It++))===10)vt=!0;else if(In===13)vt=!0,Ze.charCodeAt(It)===10&&(++It,++Rn);else if(In!==ne)continue;return Ze.slice(mn,It-Rn)}return Ze.slice(mn)}for(;(pt=Gt())!==Ot;){for(var Ht=[];pt!==kt&&pt!==Ot;)Ht.push(pt),pt=Gt();rt&&(Ht=rt(Ht,Jt++))==null||Et.push(Ht)}return Et},he.format=function(Ze){if(Array.isArray(Ze[0]))return he.formatRows(Ze);var rt=new U,pt=[];return Ze.forEach(function(vt){for(var kt in vt)rt.has(kt)||pt.push(rt.add(kt))}),[pt.map(qe).join(C)].concat(Ze.map(function(vt){return pt.map(function(kt){return qe(vt[kt])}).join(C)})).join(`
`)},he.formatRows=function(Ze){return Ze.map(ze).join(`
`)},he},i.csv=i.dsv(",","text/csv"),i.tsv=i.dsv("	","text/tab-separated-values");var pr,ir,Jn,mr,qt=this[Z(this,"requestAnimationFrame")]||function(C){setTimeout(C,17)};function tn(C,q,Q){var ne=arguments.length;ne<2&&(q=0),ne<3&&(Q=Date.now());var he={c:C,t:Q+q,n:null};return ir?ir.n=he:pr=he,ir=he,Jn||(mr=clearTimeout(mr),Jn=1,qt(dn)),he}function dn(){var C=vn(),q=On()-C;q>24?(isFinite(q)&&(clearTimeout(mr),mr=setTimeout(dn,q)),Jn=0):(Jn=1,qt(dn))}function vn(){for(var C=Date.now(),q=pr;q;)C>=q.t&&q.c(C-q.t)&&(q.c=null),q=q.n;return C}function On(){for(var C,q=pr,Q=1/0;q;)q.c?(q.t<Q&&(Q=q.t),q=(C=q).n):q=C?C.n=q.n:pr=q.n;return ir=C,Q}function Hn(C){return C[0]}function Bn(C){return C[1]}function Vn(C){for(var q,Q,ne,he=C.length,me=[0,1],Pe=2,ze=2;ze<he;ze++){for(;Pe>1&&(q=C[me[Pe-2]],Q=C[me[Pe-1]],ne=C[ze],(Q[0]-q[0])*(ne[1]-q[1])-(Q[1]-q[1])*(ne[0]-q[0])<=0);)--Pe;me[Pe++]=ze}return me.slice(0,Pe)}function nr(C,q){return C[0]-q[0]||C[1]-q[1]}i.timer=function(){tn.apply(this,arguments)},i.timer.flush=function(){vn(),On()},i.round=function(C,q){return q?Math.round(C*(q=Math.pow(10,q)))/q:Math.round(C)},i.geom={},i.geom.hull=function(C){var q=Hn,Q=Bn;if(arguments.length)return ne(C);function ne(he){if(he.length<3)return[];var me,Pe=zn(q),ze=zn(Q),qe=he.length,Ze=[],rt=[];for(me=0;me<qe;me++)Ze.push([+Pe.call(this,he[me],me),+ze.call(this,he[me],me),me]);for(Ze.sort(nr),me=0;me<qe;me++)rt.push([Ze[me][0],-Ze[me][1]]);var pt=Vn(Ze),vt=Vn(rt),kt=vt[0]===pt[0],Ot=vt[vt.length-1]===pt[pt.length-1],Et=[];for(me=pt.length-1;me>=0;--me)Et.push(he[Ze[pt[me]][2]]);for(me=+kt;me<vt.length-Ot;++me)Et.push(he[Ze[vt[me]][2]]);return Et}return ne.x=function(he){return arguments.length?(q=he,ne):q},ne.y=function(he){return arguments.length?(Q=he,ne):Q},ne},i.geom.polygon=function(C){return ee(C,Qt),C};var Qt=i.geom.polygon.prototype=[];function bn(C,q,Q){return(Q[0]-q[0])*(C[1]-q[1])<(Q[1]-q[1])*(C[0]-q[0])}function Rt(C,q,Q,ne){var he=C[0],me=Q[0],Pe=q[0]-he,ze=ne[0]-me,qe=C[1],Ze=Q[1],rt=q[1]-qe,pt=ne[1]-Ze,vt=(ze*(qe-Ze)-pt*(he-me))/(pt*Pe-ze*rt);return[he+vt*Pe,qe+vt*rt]}function Kt(C){var q=C[0],Q=C[C.length-1];return!(q[0]-Q[0]||q[1]-Q[1])}Qt.area=function(){for(var C,q=-1,Q=this.length,ne=this[Q-1],he=0;++q<Q;)C=ne,ne=this[q],he+=C[1]*ne[0]-C[0]*ne[1];return .5*he},Qt.centroid=function(C){var q,Q,ne=-1,he=this.length,me=0,Pe=0,ze=this[he-1];for(arguments.length||(C=-1/(6*this.area()));++ne<he;)q=ze,ze=this[ne],Q=q[0]*ze[1]-ze[0]*q[1],me+=(q[0]+ze[0])*Q,Pe+=(q[1]+ze[1])*Q;return[me*C,Pe*C]},Qt.clip=function(C){for(var q,Q,ne,he,me,Pe,ze=Kt(C),qe=-1,Ze=this.length-Kt(this),rt=this[Ze-1];++qe<Ze;){for(q=C.slice(),C.length=0,he=this[qe],me=q[(ne=q.length-ze)-1],Q=-1;++Q<ne;)bn(Pe=q[Q],rt,he)?(bn(me,rt,he)||C.push(Rt(me,Pe,rt,he)),C.push(Pe)):bn(me,rt,he)&&C.push(Rt(me,Pe,rt,he)),me=Pe;ze&&C.push(C[0]),rt=he}return C};var rn,xn,Tn,Pn,pn,$t=[],en=[];function hn(){ki(this),this.edge=this.site=this.circle=null}function gn(C){var q=$t.pop()||new hn;return q.site=C,q}function Dn(C){xr(C),Tn.remove(C),$t.push(C),ki(C)}function Fn(C){var q=C.circle,Q=q.x,ne=q.cy,he={x:Q,y:ne},me=C.P,Pe=C.N,ze=[C];Dn(C);for(var qe=me;qe.circle&&m(Q-qe.circle.x)<st&&m(ne-qe.circle.cy)<st;)me=qe.P,ze.unshift(qe),Dn(qe),qe=me;ze.unshift(qe),xr(qe);for(var Ze=Pe;Ze.circle&&m(Q-Ze.circle.x)<st&&m(ne-Ze.circle.cy)<st;)Pe=Ze.N,ze.push(Ze),Dn(Ze),Ze=Pe;ze.push(Ze),xr(Ze);var rt,pt=ze.length;for(rt=1;rt<pt;++rt)Ze=ze[rt],qe=ze[rt-1],kr(Ze.edge,qe.site,Ze.site,he);qe=ze[0],(Ze=ze[pt-1]).edge=lr(qe.site,Ze.site,null,he),fr(qe),fr(Ze)}function Zn(C){for(var q,Q,ne,he,me=C.x,Pe=C.y,ze=Tn._;ze;)if((ne=Wn(ze,Pe)-me)>st)ze=ze.L;else{if(!((he=me-tr(ze,Pe))>st)){ne>-st?(q=ze.P,Q=ze):he>-st?(q=ze,Q=ze.N):q=Q=ze;break}if(!ze.R){q=ze;break}ze=ze.R}var qe=gn(C);if(Tn.insert(q,qe),q||Q){if(q===Q)return xr(q),Q=gn(q.site),Tn.insert(qe,Q),qe.edge=Q.edge=lr(q.site,qe.site),fr(q),void fr(Q);if(Q){xr(q),xr(Q);var Ze=q.site,rt=Ze.x,pt=Ze.y,vt=C.x-rt,kt=C.y-pt,Ot=Q.site,Et=Ot.x-rt,jt=Ot.y-pt,It=2*(vt*jt-kt*Et),Jt=vt*vt+kt*kt,Gt=Et*Et+jt*jt,Ht={x:(jt*Jt-kt*Gt)/It+rt,y:(vt*Gt-Et*Jt)/It+pt};kr(Q.edge,Ze,Ot,Ht),qe.edge=lr(Ze,C,null,Ht),Q.edge=lr(C,Ot,null,Ht),fr(q),fr(Q)}else qe.edge=lr(q.site,qe.site)}}function Wn(C,q){var Q=C.site,ne=Q.x,he=Q.y,me=he-q;if(!me)return ne;var Pe=C.P;if(!Pe)return-1/0;var ze=(Q=Pe.site).x,qe=Q.y,Ze=qe-q;if(!Ze)return ze;var rt=ze-ne,pt=1/me-1/Ze,vt=rt/Ze;return pt?(-vt+Math.sqrt(vt*vt-2*pt*(rt*rt/(-2*Ze)-qe+Ze/2+he-me/2)))/pt+ne:(ne+ze)/2}function tr(C,q){var Q=C.N;if(Q)return Wn(Q,q);var ne=C.site;return ne.y===q?ne.x:1/0}function Qn(C){this.site=C,this.edges=[]}function or(C,q){return q.angle-C.angle}function hr(){ki(this),this.x=this.y=this.arc=this.site=this.cy=null}function fr(C){var q=C.P,Q=C.N;if(q&&Q){var ne=q.site,he=C.site,me=Q.site;if(ne!==me){var Pe=he.x,ze=he.y,qe=ne.x-Pe,Ze=ne.y-ze,rt=me.x-Pe,pt=2*(qe*(jt=me.y-ze)-Ze*rt);if(!(pt>=-St)){var vt=qe*qe+Ze*Ze,kt=rt*rt+jt*jt,Ot=(jt*vt-Ze*kt)/pt,Et=(qe*kt-rt*vt)/pt,jt=Et+ze,It=en.pop()||new hr;It.arc=C,It.site=he,It.x=Ot+Pe,It.y=jt+Math.sqrt(Ot*Ot+Et*Et),It.cy=jt,C.circle=It;for(var Jt=null,Gt=pn._;Gt;)if(It.y<Gt.y||It.y===Gt.y&&It.x<=Gt.x){if(!Gt.L){Jt=Gt.P;break}Gt=Gt.L}else{if(!Gt.R){Jt=Gt;break}Gt=Gt.R}pn.insert(Jt,It),Jt||(Pn=It)}}}}function xr(C){var q=C.circle;q&&(q.P||(Pn=q.N),pn.remove(q),en.push(q),ki(q),C.circle=null)}function yr(C,q){var Q=C.b;if(Q)return!0;var ne,he,me=C.a,Pe=q[0][0],ze=q[1][0],qe=q[0][1],Ze=q[1][1],rt=C.l,pt=C.r,vt=rt.x,kt=rt.y,Ot=pt.x,Et=pt.y,jt=(vt+Ot)/2,It=(kt+Et)/2;if(Et===kt){if(jt<Pe||jt>=ze)return;if(vt>Ot){if(me){if(me.y>=Ze)return}else me={x:jt,y:qe};Q={x:jt,y:Ze}}else{if(me){if(me.y<qe)return}else me={x:jt,y:Ze};Q={x:jt,y:qe}}}else if(he=It-(ne=(vt-Ot)/(Et-kt))*jt,ne<-1||ne>1)if(vt>Ot){if(me){if(me.y>=Ze)return}else me={x:(qe-he)/ne,y:qe};Q={x:(Ze-he)/ne,y:Ze}}else{if(me){if(me.y<qe)return}else me={x:(Ze-he)/ne,y:Ze};Q={x:(qe-he)/ne,y:qe}}else if(kt<Et){if(me){if(me.x>=ze)return}else me={x:Pe,y:ne*Pe+he};Q={x:ze,y:ne*ze+he}}else{if(me){if(me.x<Pe)return}else me={x:ze,y:ne*ze+he};Q={x:Pe,y:ne*Pe+he}}return C.a=me,C.b=Q,!0}function Ir(C,q){this.l=C,this.r=q,this.a=this.b=null}function lr(C,q,Q,ne){var he=new Ir(C,q);return rn.push(he),Q&&kr(he,C,q,Q),ne&&kr(he,q,C,ne),xn[C.i].edges.push(new Fr(he,C,q)),xn[q.i].edges.push(new Fr(he,q,C)),he}function kr(C,q,Q,ne){C.a||C.b?C.l===Q?C.b=ne:C.a=ne:(C.a=ne,C.l=q,C.r=Q)}function Fr(C,q,Q){var ne=C.a,he=C.b;this.edge=C,this.site=q,this.angle=Q?Math.atan2(Q.y-q.y,Q.x-q.x):C.l===q?Math.atan2(he.x-ne.x,ne.y-he.y):Math.atan2(ne.x-he.x,he.y-ne.y)}function Wr(){this._=null}function ki(C){C.U=C.C=C.L=C.R=C.P=C.N=null}function Ai(C,q){var Q=q,ne=q.R,he=Q.U;he?he.L===Q?he.L=ne:he.R=ne:C._=ne,ne.U=he,Q.U=ne,Q.R=ne.L,Q.R&&(Q.R.U=Q),ne.L=Q}function aa(C,q){var Q=q,ne=q.L,he=Q.U;he?he.L===Q?he.L=ne:he.R=ne:C._=ne,ne.U=he,Q.U=ne,Q.L=ne.R,Q.L&&(Q.L.U=Q),ne.R=Q}function bi(C){for(;C.L;)C=C.L;return C}function Ji(C,q){var Q,ne,he,me=C.sort(Ba).pop();for(rn=[],xn=new Array(C.length),Tn=new Wr,pn=new Wr;;)if(he=Pn,me&&(!he||me.y<he.y||me.y===he.y&&me.x<he.x))me.x===Q&&me.y===ne||(xn[me.i]=new Qn(me),Zn(me),Q=me.x,ne=me.y),me=C.pop();else{if(!he)break;Fn(he.arc)}q&&(function(ze){for(var qe,Ze,rt,pt,vt,kt=rn,Ot=(Ze=ze[0][0],rt=ze[0][1],pt=ze[1][0],vt=ze[1][1],function(jt){var It,Jt=jt.a,Gt=jt.b,Ht=Jt.x,mn=Jt.y,yn=0,In=1,Rn=Gt.x-Ht,Yn=Gt.y-mn;if(It=Ze-Ht,Rn||!(It>0)){if(It/=Rn,Rn<0){if(It<yn)return;It<In&&(In=It)}else if(Rn>0){if(It>In)return;It>yn&&(yn=It)}if(It=pt-Ht,Rn||!(It<0)){if(It/=Rn,Rn<0){if(It>In)return;It>yn&&(yn=It)}else if(Rn>0){if(It<yn)return;It<In&&(In=It)}if(It=rt-mn,Yn||!(It>0)){if(It/=Yn,Yn<0){if(It<yn)return;It<In&&(In=It)}else if(Yn>0){if(It>In)return;It>yn&&(yn=It)}if(It=vt-mn,Yn||!(It<0)){if(It/=Yn,Yn<0){if(It>In)return;It>yn&&(yn=It)}else if(Yn>0){if(It<yn)return;It<In&&(In=It)}return yn>0&&(jt.a={x:Ht+yn*Rn,y:mn+yn*Yn}),In<1&&(jt.b={x:Ht+In*Rn,y:mn+In*Yn}),jt}}}}}),Et=kt.length;Et--;)(!yr(qe=kt[Et],ze)||!Ot(qe)||m(qe.a.x-qe.b.x)<st&&m(qe.a.y-qe.b.y)<st)&&(qe.a=qe.b=null,kt.splice(Et,1))}(q),function(ze){for(var qe,Ze,rt,pt,vt,kt,Ot,Et,jt,It,Jt=ze[0][0],Gt=ze[1][0],Ht=ze[0][1],mn=ze[1][1],yn=xn,In=yn.length;In--;)if((vt=yn[In])&&vt.prepare())for(Et=(Ot=vt.edges).length,kt=0;kt<Et;)rt=(It=Ot[kt].end()).x,pt=It.y,qe=(jt=Ot[++kt%Et].start()).x,Ze=jt.y,(m(rt-qe)>st||m(pt-Ze)>st)&&(Ot.splice(kt,0,new Fr((Rn=vt.site,Yn=It,er=m(rt-Jt)<st&&mn-pt>st?{x:Jt,y:m(qe-Jt)<st?Ze:mn}:m(pt-mn)<st&&Gt-rt>st?{x:m(Ze-mn)<st?qe:Gt,y:mn}:m(rt-Gt)<st&&pt-Ht>st?{x:Gt,y:m(qe-Gt)<st?Ze:Ht}:m(pt-Ht)<st&&rt-Jt>st?{x:m(Ze-Ht)<st?qe:Jt,y:Ht}:null,dr=void 0,(dr=new Ir(Rn,null)).a=Yn,dr.b=er,rn.push(dr),dr),vt.site,null)),++Et);var Rn,Yn,er,dr}(q));var Pe={cells:xn,edges:rn};return Tn=pn=rn=xn=null,Pe}function Ba(C,q){return q.y-C.y||q.x-C.x}Qn.prototype.prepare=function(){for(var C,q=this.edges,Q=q.length;Q--;)(C=q[Q].edge).b&&C.a||q.splice(Q,1);return q.sort(or),q.length},Fr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Wr.prototype={insert:function(C,q){var Q,ne,he;if(C){if(q.P=C,q.N=C.N,C.N&&(C.N.P=q),C.N=q,C.R){for(C=C.R;C.L;)C=C.L;C.L=q}else C.R=q;Q=C}else this._?(C=bi(this._),q.P=null,q.N=C,C.P=C.L=q,Q=C):(q.P=q.N=null,this._=q,Q=null);for(q.L=q.R=null,q.U=Q,q.C=!0,C=q;Q&&Q.C;)Q===(ne=Q.U).L?(he=ne.R)&&he.C?(Q.C=he.C=!1,ne.C=!0,C=ne):(C===Q.R&&(Ai(this,Q),Q=(C=Q).U),Q.C=!1,ne.C=!0,aa(this,ne)):(he=ne.L)&&he.C?(Q.C=he.C=!1,ne.C=!0,C=ne):(C===Q.L&&(aa(this,Q),Q=(C=Q).U),Q.C=!1,ne.C=!0,Ai(this,ne)),Q=C.U;this._.C=!1},remove:function(C){C.N&&(C.N.P=C.P),C.P&&(C.P.N=C.N),C.N=C.P=null;var q,Q,ne,he=C.U,me=C.L,Pe=C.R;if(Q=me?Pe?bi(Pe):me:Pe,he?he.L===C?he.L=Q:he.R=Q:this._=Q,me&&Pe?(ne=Q.C,Q.C=C.C,Q.L=me,me.U=Q,Q!==Pe?(he=Q.U,Q.U=C.U,C=Q.R,he.L=C,Q.R=Pe,Pe.U=Q):(Q.U=he,he=Q,C=Q.R)):(ne=C.C,C=Q),C&&(C.U=he),!ne)if(C&&C.C)C.C=!1;else{do{if(C===this._)break;if(C===he.L){if((q=he.R).C&&(q.C=!1,he.C=!0,Ai(this,he),q=he.R),q.L&&q.L.C||q.R&&q.R.C){q.R&&q.R.C||(q.L.C=!1,q.C=!0,aa(this,q),q=he.R),q.C=he.C,he.C=q.R.C=!1,Ai(this,he),C=this._;break}}else if((q=he.L).C&&(q.C=!1,he.C=!0,aa(this,he),q=he.L),q.L&&q.L.C||q.R&&q.R.C){q.L&&q.L.C||(q.R.C=!1,q.C=!0,Ai(this,q),q=he.L),q.C=he.C,he.C=q.L.C=!1,aa(this,he),C=this._;break}q.C=!0,C=he,he=he.U}while(!C.C);C&&(C.C=!1)}}},i.geom.voronoi=function(C){var q=Hn,Q=Bn,ne=q,he=Q,me=Na;if(C)return Pe(C);function Pe(qe){var Ze=new Array(qe.length),rt=me[0][0],pt=me[0][1],vt=me[1][0],kt=me[1][1];return Ji(ze(qe),me).cells.forEach(function(Ot,Et){var jt=Ot.edges,It=Ot.site;(Ze[Et]=jt.length?jt.map(function(Jt){var Gt=Jt.start();return[Gt.x,Gt.y]}):It.x>=rt&&It.x<=vt&&It.y>=pt&&It.y<=kt?[[rt,kt],[vt,kt],[vt,pt],[rt,pt]]:[]).point=qe[Et]}),Ze}function ze(qe){return qe.map(function(Ze,rt){return{x:Math.round(ne(Ze,rt)/st)*st,y:Math.round(he(Ze,rt)/st)*st,i:rt}})}return Pe.links=function(qe){return Ji(ze(qe)).edges.filter(function(Ze){return Ze.l&&Ze.r}).map(function(Ze){return{source:qe[Ze.l.i],target:qe[Ze.r.i]}})},Pe.triangles=function(qe){var Ze=[];return Ji(ze(qe)).cells.forEach(function(rt,pt){for(var vt,kt,Ot,Et,jt=rt.site,It=rt.edges.sort(or),Jt=-1,Gt=It.length,Ht=It[Gt-1].edge,mn=Ht.l===jt?Ht.r:Ht.l;++Jt<Gt;)vt=mn,mn=(Ht=It[Jt].edge).l===jt?Ht.r:Ht.l,pt<vt.i&&pt<mn.i&&(Ot=vt,Et=mn,((kt=jt).x-Et.x)*(Ot.y-kt.y)-(kt.x-Ot.x)*(Et.y-kt.y)<0)&&Ze.push([qe[pt],qe[vt.i],qe[mn.i]])}),Ze},Pe.x=function(qe){return arguments.length?(ne=zn(q=qe),Pe):q},Pe.y=function(qe){return arguments.length?(he=zn(Q=qe),Pe):Q},Pe.clipExtent=function(qe){return arguments.length?(me=qe??Na,Pe):me===Na?null:me},Pe.size=function(qe){return arguments.length?Pe.clipExtent(qe&&[[0,0],qe]):me===Na?null:me&&me[1]},Pe};var Na=[[-1e6,-1e6],[1e6,1e6]];function Ss(C){return C.x}function qu(C){return C.y}function dl(C,q,Q,ne,he,me){if(!C(q,Q,ne,he,me)){var Pe=.5*(Q+he),ze=.5*(ne+me),qe=q.nodes;qe[0]&&dl(C,qe[0],Q,ne,Pe,ze),qe[1]&&dl(C,qe[1],Pe,ne,he,ze),qe[2]&&dl(C,qe[2],Q,ze,Pe,me),qe[3]&&dl(C,qe[3],Pe,ze,he,me)}}function vl(C,q){C=i.rgb(C),q=i.rgb(q);var Q=C.r,ne=C.g,he=C.b,me=q.r-Q,Pe=q.g-ne,ze=q.b-he;return function(qe){return"#"+nn(Math.round(Q+me*qe))+nn(Math.round(ne+Pe*qe))+nn(Math.round(he+ze*qe))}}function Nl(C,q){var Q,ne={},he={};for(Q in C)Q in q?ne[Q]=Yo(C[Q],q[Q]):he[Q]=C[Q];for(Q in q)Q in C||(he[Q]=q[Q]);return function(me){for(Q in ne)he[Q]=ne[Q](me);return he}}function bo(C,q){return C=+C,q=+q,function(Q){return C*(1-Q)+q*Q}}function jl(C,q){var Q,ne,he,me=Ul.lastIndex=Vl.lastIndex=0,Pe=-1,ze=[],qe=[];for(C+="",q+="";(Q=Ul.exec(C))&&(ne=Vl.exec(q));)(he=ne.index)>me&&(he=q.slice(me,he),ze[Pe]?ze[Pe]+=he:ze[++Pe]=he),(Q=Q[0])===(ne=ne[0])?ze[Pe]?ze[Pe]+=ne:ze[++Pe]=ne:(ze[++Pe]=null,qe.push({i:Pe,x:bo(Q,ne)})),me=Vl.lastIndex;return me<q.length&&(he=q.slice(me),ze[Pe]?ze[Pe]+=he:ze[++Pe]=he),ze.length<2?qe[0]?(q=qe[0].x,function(Ze){return q(Ze)+""}):function(){return q}:(q=qe.length,function(Ze){for(var rt,pt=0;pt<q;++pt)ze[(rt=qe[pt]).i]=rt.x(Ze);return ze.join("")})}i.geom.delaunay=function(C){return i.geom.voronoi().triangles(C)},i.geom.quadtree=function(C,q,Q,ne,he){var me,Pe=Hn,ze=Bn;if(me=arguments.length)return Pe=Ss,ze=qu,me===3&&(he=Q,ne=q,Q=q=0),qe(C);function qe(Ze){var rt,pt,vt,kt,Ot,Et,jt,It,Jt,Gt=zn(Pe),Ht=zn(ze);if(q!=null)Et=q,jt=Q,It=ne,Jt=he;else if(It=Jt=-(Et=jt=1/0),pt=[],vt=[],Ot=Ze.length,me)for(kt=0;kt<Ot;++kt)(rt=Ze[kt]).x<Et&&(Et=rt.x),rt.y<jt&&(jt=rt.y),rt.x>It&&(It=rt.x),rt.y>Jt&&(Jt=rt.y),pt.push(rt.x),vt.push(rt.y);else for(kt=0;kt<Ot;++kt){var mn=+Gt(rt=Ze[kt],kt),yn=+Ht(rt,kt);mn<Et&&(Et=mn),yn<jt&&(jt=yn),mn>It&&(It=mn),yn>Jt&&(Jt=yn),pt.push(mn),vt.push(yn)}var In=It-Et,Rn=Jt-jt;function Yn(Xn,cr,Tr,Rr,$n,ur,Sr,gr){if(!isNaN(Tr)&&!isNaN(Rr))if(Xn.leaf){var Pr=Xn.x,jr=Xn.y;if(Pr!=null)if(m(Pr-Tr)+m(jr-Rr)<.01)er(Xn,cr,Tr,Rr,$n,ur,Sr,gr);else{var Xr=Xn.point;Xn.x=Xn.y=Xn.point=null,er(Xn,Xr,Pr,jr,$n,ur,Sr,gr),er(Xn,cr,Tr,Rr,$n,ur,Sr,gr)}else Xn.x=Tr,Xn.y=Rr,Xn.point=cr}else er(Xn,cr,Tr,Rr,$n,ur,Sr,gr)}function er(Xn,cr,Tr,Rr,$n,ur,Sr,gr){var Pr=.5*($n+Sr),jr=.5*(ur+gr),Xr=Tr>=Pr,Kr=Rr>=jr,ni=Kr<<1|Xr;Xn.leaf=!1,Xr?$n=Pr:Sr=Pr,Kr?ur=jr:gr=jr,Yn(Xn=Xn.nodes[ni]||(Xn.nodes[ni]={leaf:!0,nodes:[],point:null,x:null,y:null}),cr,Tr,Rr,$n,ur,Sr,gr)}In>Rn?Jt=jt+In:It=Et+Rn;var dr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Xn){Yn(dr,Xn,+Gt(Xn,++kt),+Ht(Xn,kt),Et,jt,It,Jt)}};if(dr.visit=function(Xn){dl(Xn,dr,Et,jt,It,Jt)},dr.find=function(Xn){return function(cr,Tr,Rr,$n,ur,Sr,gr){var Pr,jr=1/0;return function Xr(Kr,ni,ai,Li,Ki){if(!(ni>Sr||ai>gr||Li<$n||Ki<ur)){if(Pa=Kr.point){var Pa,pa=Tr-Kr.x,Ma=Rr-Kr.y,zi=pa*pa+Ma*Ma;if(zi<jr){var si=Math.sqrt(jr=zi);$n=Tr-si,ur=Rr-si,Sr=Tr+si,gr=Rr+si,Pr=Pa}}for(var Hi=Kr.nodes,wi=.5*(ni+Li),hi=.5*(ai+Ki),qi=(Rr>=hi)<<1|Tr>=wi,Qi=qi+4;qi<Qi;++qi)if(Kr=Hi[3&qi])switch(3&qi){case 0:Xr(Kr,ni,ai,wi,hi);break;case 1:Xr(Kr,wi,ai,Li,hi);break;case 2:Xr(Kr,ni,hi,wi,Ki);break;case 3:Xr(Kr,wi,hi,Li,Ki)}}}(cr,$n,ur,Sr,gr),Pr}(dr,Xn[0],Xn[1],Et,jt,It,Jt)},kt=-1,q==null){for(;++kt<Ot;)Yn(dr,Ze[kt],pt[kt],vt[kt],Et,jt,It,Jt);--kt}else Ze.forEach(dr.add);return pt=vt=Ze=rt=null,dr}return qe.x=function(Ze){return arguments.length?(Pe=Ze,qe):Pe},qe.y=function(Ze){return arguments.length?(ze=Ze,qe):ze},qe.extent=function(Ze){return arguments.length?(Ze==null?q=Q=ne=he=null:(q=+Ze[0][0],Q=+Ze[0][1],ne=+Ze[1][0],he=+Ze[1][1]),qe):q==null?null:[[q,Q],[ne,he]]},qe.size=function(Ze){return arguments.length?(Ze==null?q=Q=ne=he=null:(q=Q=0,ne=+Ze[0],he=+Ze[1]),qe):q==null?null:[ne-q,he-Q]},qe},i.interpolateRgb=vl,i.interpolateObject=Nl,i.interpolateNumber=bo,i.interpolateString=jl;var Ul=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vl=new RegExp(Ul.source,"g");function Yo(C,q){for(var Q,ne=i.interpolators.length;--ne>=0&&!(Q=i.interpolators[ne](C,q)););return Q}function as(C,q){var Q,ne=[],he=[],me=C.length,Pe=q.length,ze=Math.min(C.length,q.length);for(Q=0;Q<ze;++Q)ne.push(Yo(C[Q],q[Q]));for(;Q<me;++Q)he[Q]=C[Q];for(;Q<Pe;++Q)he[Q]=q[Q];return function(qe){for(Q=0;Q<ze;++Q)he[Q]=ne[Q](qe);return he}}i.interpolate=Yo,i.interpolators=[function(C,q){var Q=typeof q;return(Q==="string"?_n.has(q.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(q)?vl:jl:q instanceof $e?vl:Array.isArray(q)?as:Q==="object"&&isNaN(q)?Nl:bo)(C,q)}],i.interpolateArray=as;var Es=function(){return R},Di=i.map({linear:Es,poly:function(C){return function(q){return Math.pow(q,C)}},quad:function(){return _o},cubic:function(){return os},sin:function(){return ss},exp:function(){return Wo},circle:function(){return ls},elastic:function(C,q){var Q;return arguments.length<2&&(q=.45),arguments.length?Q=q/Ft*Math.asin(1/C):(C=1,Q=q/4),function(ne){return 1+C*Math.pow(2,-10*ne)*Math.sin((ne-Q)*Ft/q)}},back:function(C){return C||(C=1.70158),function(q){return q*q*((C+1)*q-C)}},bounce:function(){return Ro}}),ca=i.map({in:R,out:Go,"in-out":Io,"out-in":function(C){return Io(Go(C))}});function Go(C){return function(q){return 1-C(1-q)}}function Io(C){return function(q){return .5*(q<.5?C(2*q):2-C(2-2*q))}}function _o(C){return C*C}function os(C){return C*C*C}function Do(C){if(C<=0)return 0;if(C>=1)return 1;var q=C*C,Q=q*C;return 4*(C<.5?Q:3*(C-q)+Q-.75)}function ss(C){return 1-Math.cos(C*Xe)}function Wo(C){return Math.pow(2,10*(C-1))}function ls(C){return 1-Math.sqrt(1-C*C)}function Ro(C){return C<.36363636363636365?7.5625*C*C:C<.7272727272727273?7.5625*(C-=.5454545454545454)*C+.75:C<.9090909090909091?7.5625*(C-=.8181818181818182)*C+.9375:7.5625*(C-=.9545454545454546)*C+.984375}function su(C,q){return q-=C,function(Q){return Math.round(C+q*Q)}}function Hl(C){var q,Q,ne,he=[C.a,C.b],me=[C.c,C.d],Pe=Eu(he),ze=Ls(he,me),qe=Eu(((q=me)[0]+=(ne=-ze)*(Q=he)[0],q[1]+=ne*Q[1],q))||0;he[0]*me[1]<me[0]*he[1]&&(he[0]*=-1,he[1]*=-1,Pe*=-1,ze*=-1),this.rotate=(Pe?Math.atan2(he[1],he[0]):Math.atan2(-me[0],me[1]))*He,this.translate=[C.e,C.f],this.scale=[Pe,qe],this.skew=qe?Math.atan2(ze,qe)*He:0}function Ls(C,q){return C[0]*q[0]+C[1]*q[1]}function Eu(C){var q=Math.sqrt(Ls(C,C));return q&&(C[0]/=q,C[1]/=q),q}i.ease=function(C){var q,Q=C.indexOf("-"),ne=Q>=0?C.slice(0,Q):C,he=Q>=0?C.slice(Q+1):"in";return ne=Di.get(ne)||Es,he=ca.get(he)||R,q=he(ne.apply(null,_.call(arguments,1))),function(me){return me<=0?0:me>=1?1:q(me)}},i.interpolateHcl=function(C,q){C=i.hcl(C),q=i.hcl(q);var Q=C.h,ne=C.c,he=C.l,me=q.h-Q,Pe=q.c-ne,ze=q.l-he;return isNaN(Pe)&&(Pe=0,ne=isNaN(ne)?q.c:ne),isNaN(me)?(me=0,Q=isNaN(Q)?q.h:Q):me>180?me-=360:me<-180&&(me+=360),function(qe){return Tt(Q+me*qe,ne+Pe*qe,he+ze*qe)+""}},i.interpolateHsl=function(C,q){C=i.hsl(C),q=i.hsl(q);var Q=C.h,ne=C.s,he=C.l,me=q.h-Q,Pe=q.s-ne,ze=q.l-he;return isNaN(Pe)&&(Pe=0,ne=isNaN(ne)?q.s:ne),isNaN(me)?(me=0,Q=isNaN(Q)?q.h:Q):me>180?me-=360:me<-180&&(me+=360),function(qe){return xt(Q+me*qe,ne+Pe*qe,he+ze*qe)+""}},i.interpolateLab=function(C,q){C=i.lab(C),q=i.lab(q);var Q=C.l,ne=C.a,he=C.b,me=q.l-Q,Pe=q.a-ne,ze=q.b-he;return function(qe){return Wt(Q+me*qe,ne+Pe*qe,he+ze*qe)+""}},i.interpolateRound=su,i.transform=function(C){var q=h.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(Q){if(Q!=null){q.setAttribute("transform",Q);var ne=q.transform.baseVal.consolidate()}return new Hl(ne?ne.matrix:Lu)})(C)},Hl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Lu={a:1,b:0,c:0,d:1,e:0,f:0};function Cs(C){return C.length?C.pop()+",":""}function Cu(C,q){var Q=[],ne=[];return C=i.transform(C),q=i.transform(q),function(he,me,Pe,ze){if(he[0]!==me[0]||he[1]!==me[1]){var qe=Pe.push("translate(",null,",",null,")");ze.push({i:qe-4,x:bo(he[0],me[0])},{i:qe-2,x:bo(he[1],me[1])})}else(me[0]||me[1])&&Pe.push("translate("+me+")")}(C.translate,q.translate,Q,ne),function(he,me,Pe,ze){he!==me?(he-me>180?me+=360:me-he>180&&(he+=360),ze.push({i:Pe.push(Cs(Pe)+"rotate(",null,")")-2,x:bo(he,me)})):me&&Pe.push(Cs(Pe)+"rotate("+me+")")}(C.rotate,q.rotate,Q,ne),function(he,me,Pe,ze){he!==me?ze.push({i:Pe.push(Cs(Pe)+"skewX(",null,")")-2,x:bo(he,me)}):me&&Pe.push(Cs(Pe)+"skewX("+me+")")}(C.skew,q.skew,Q,ne),function(he,me,Pe,ze){if(he[0]!==me[0]||he[1]!==me[1]){var qe=Pe.push(Cs(Pe)+"scale(",null,",",null,")");ze.push({i:qe-4,x:bo(he[0],me[0])},{i:qe-2,x:bo(he[1],me[1])})}else me[0]===1&&me[1]===1||Pe.push(Cs(Pe)+"scale("+me+")")}(C.scale,q.scale,Q,ne),C=q=null,function(he){for(var me,Pe=-1,ze=ne.length;++Pe<ze;)Q[(me=ne[Pe]).i]=me.x(he);return Q.join("")}}function Yu(C,q){return q=(q-=C=+C)||1/q,function(Q){return(Q-C)/q}}function Gu(C,q){return q=(q-=C=+C)||1/q,function(Q){return Math.max(0,Math.min(1,(Q-C)/q))}}function Os(C){for(var q=C.source,Q=C.target,ne=function(Pe,ze){if(Pe===ze)return Pe;for(var qe=zo(Pe),Ze=zo(ze),rt=qe.pop(),pt=Ze.pop(),vt=null;rt===pt;)vt=rt,rt=qe.pop(),pt=Ze.pop();return vt}(q,Q),he=[q];q!==ne;)q=q.parent,he.push(q);for(var me=he.length;Q!==ne;)he.splice(me,0,Q),Q=Q.parent;return he}function zo(C){for(var q=[],Q=C.parent;Q!=null;)q.push(C),C=Q,Q=Q.parent;return q.push(C),q}function Ws(C){C.fixed|=2}function Ps(C){C.fixed&=-7}function ml(C){C.fixed|=4,C.px=C.x,C.py=C.y}function Is(C){C.fixed&=-5}function wo(C,q,Q){var ne=0,he=0;if(C.charge=0,!C.leaf)for(var me,Pe=C.nodes,ze=Pe.length,qe=-1;++qe<ze;)(me=Pe[qe])!=null&&(wo(me,q,Q),C.charge+=me.charge,ne+=me.charge*me.cx,he+=me.charge*me.cy);if(C.point){C.leaf||(C.point.x+=Math.random()-.5,C.point.y+=Math.random()-.5);var Ze=q*Q[C.point.index];C.charge+=C.pointCharge=Ze,ne+=Ze*C.point.x,he+=Ze*C.point.y}C.cx=ne/C.charge,C.cy=he/C.charge}i.interpolateTransform=Cu,i.layout={},i.layout.bundle=function(){return function(C){for(var q=[],Q=-1,ne=C.length;++Q<ne;)q.push(Os(C[Q]));return q}},i.layout.chord=function(){var C,q,Q,ne,he,me,Pe,ze={},qe=0;function Ze(){var pt,vt,kt,Ot,Et,jt={},It=[],Jt=i.range(ne),Gt=[];for(C=[],q=[],pt=0,Ot=-1;++Ot<ne;){for(vt=0,Et=-1;++Et<ne;)vt+=Q[Ot][Et];It.push(vt),Gt.push(i.range(ne)),pt+=vt}for(he&&Jt.sort(function(dr,Xn){return he(It[dr],It[Xn])}),me&&Gt.forEach(function(dr,Xn){dr.sort(function(cr,Tr){return me(Q[Xn][cr],Q[Xn][Tr])})}),pt=(Ft-qe*ne)/pt,vt=0,Ot=-1;++Ot<ne;){for(kt=vt,Et=-1;++Et<ne;){var Ht=Jt[Ot],mn=Gt[Ht][Et],yn=Q[Ht][mn],In=vt,Rn=vt+=yn*pt;jt[Ht+"-"+mn]={index:Ht,subindex:mn,startAngle:In,endAngle:Rn,value:yn}}q[Ht]={index:Ht,startAngle:kt,endAngle:vt,value:It[Ht]},vt+=qe}for(Ot=-1;++Ot<ne;)for(Et=Ot-1;++Et<ne;){var Yn=jt[Ot+"-"+Et],er=jt[Et+"-"+Ot];(Yn.value||er.value)&&C.push(Yn.value<er.value?{source:er,target:Yn}:{source:Yn,target:er})}Pe&&rt()}function rt(){C.sort(function(pt,vt){return Pe((pt.source.value+pt.target.value)/2,(vt.source.value+vt.target.value)/2)})}return ze.matrix=function(pt){return arguments.length?(ne=(Q=pt)&&Q.length,C=q=null,ze):Q},ze.padding=function(pt){return arguments.length?(qe=pt,C=q=null,ze):qe},ze.sortGroups=function(pt){return arguments.length?(he=pt,C=q=null,ze):he},ze.sortSubgroups=function(pt){return arguments.length?(me=pt,C=null,ze):me},ze.sortChords=function(pt){return arguments.length?(Pe=pt,C&&rt(),ze):Pe},ze.chords=function(){return C||Ze(),C},ze.groups=function(){return q||Ze(),q},ze},i.layout.force=function(){var C,q,Q,ne,he,me,Pe={},ze=i.dispatch("start","tick","end"),qe=[1,1],Ze=.9,rt=lu,pt=us,vt=-30,kt=Zo,Ot=.1,Et=.64,jt=[],It=[];function Jt(Ht){return function(mn,yn,In,Rn){if(mn.point!==Ht){var Yn=mn.cx-Ht.x,er=mn.cy-Ht.y,dr=Rn-yn,Xn=Yn*Yn+er*er;if(dr*dr/Et<Xn){if(Xn<kt){var cr=mn.charge/Xn;Ht.px-=Yn*cr,Ht.py-=er*cr}return!0}mn.point&&Xn&&Xn<kt&&(cr=mn.pointCharge/Xn,Ht.px-=Yn*cr,Ht.py-=er*cr)}return!mn.charge}}function Gt(Ht){Ht.px=i.event.x,Ht.py=i.event.y,Pe.resume()}return Pe.tick=function(){if((Q*=.99)<.005)return C=null,ze.end({type:"end",alpha:Q=0}),!0;var Ht,mn,yn,In,Rn,Yn,er,dr,Xn,cr=jt.length,Tr=It.length;for(mn=0;mn<Tr;++mn)In=(yn=It[mn]).source,(Yn=(dr=(Rn=yn.target).x-In.x)*dr+(Xn=Rn.y-In.y)*Xn)&&(dr*=Yn=Q*he[mn]*((Yn=Math.sqrt(Yn))-ne[mn])/Yn,Xn*=Yn,Rn.x-=dr*(er=In.weight+Rn.weight?In.weight/(In.weight+Rn.weight):.5),Rn.y-=Xn*er,In.x+=dr*(er=1-er),In.y+=Xn*er);if((er=Q*Ot)&&(dr=qe[0]/2,Xn=qe[1]/2,mn=-1,er))for(;++mn<cr;)(yn=jt[mn]).x+=(dr-yn.x)*er,yn.y+=(Xn-yn.y)*er;if(vt)for(wo(Ht=i.geom.quadtree(jt),Q,me),mn=-1;++mn<cr;)(yn=jt[mn]).fixed||Ht.visit(Jt(yn));for(mn=-1;++mn<cr;)(yn=jt[mn]).fixed?(yn.x=yn.px,yn.y=yn.py):(yn.x-=(yn.px-(yn.px=yn.x))*Ze,yn.y-=(yn.py-(yn.py=yn.y))*Ze);ze.tick({type:"tick",alpha:Q})},Pe.nodes=function(Ht){return arguments.length?(jt=Ht,Pe):jt},Pe.links=function(Ht){return arguments.length?(It=Ht,Pe):It},Pe.size=function(Ht){return arguments.length?(qe=Ht,Pe):qe},Pe.linkDistance=function(Ht){return arguments.length?(rt=typeof Ht=="function"?Ht:+Ht,Pe):rt},Pe.distance=Pe.linkDistance,Pe.linkStrength=function(Ht){return arguments.length?(pt=typeof Ht=="function"?Ht:+Ht,Pe):pt},Pe.friction=function(Ht){return arguments.length?(Ze=+Ht,Pe):Ze},Pe.charge=function(Ht){return arguments.length?(vt=typeof Ht=="function"?Ht:+Ht,Pe):vt},Pe.chargeDistance=function(Ht){return arguments.length?(kt=Ht*Ht,Pe):Math.sqrt(kt)},Pe.gravity=function(Ht){return arguments.length?(Ot=+Ht,Pe):Ot},Pe.theta=function(Ht){return arguments.length?(Et=Ht*Ht,Pe):Math.sqrt(Et)},Pe.alpha=function(Ht){return arguments.length?(Ht=+Ht,Q?Ht>0?Q=Ht:(C.c=null,C.t=NaN,C=null,ze.end({type:"end",alpha:Q=0})):Ht>0&&(ze.start({type:"start",alpha:Q=Ht}),C=tn(Pe.tick)),Pe):Q},Pe.start=function(){var Ht,mn,yn,In=jt.length,Rn=It.length,Yn=qe[0],er=qe[1];for(Ht=0;Ht<In;++Ht)(yn=jt[Ht]).index=Ht,yn.weight=0;for(Ht=0;Ht<Rn;++Ht)typeof(yn=It[Ht]).source=="number"&&(yn.source=jt[yn.source]),typeof yn.target=="number"&&(yn.target=jt[yn.target]),++yn.source.weight,++yn.target.weight;for(Ht=0;Ht<In;++Ht)yn=jt[Ht],isNaN(yn.x)&&(yn.x=dr("x",Yn)),isNaN(yn.y)&&(yn.y=dr("y",er)),isNaN(yn.px)&&(yn.px=yn.x),isNaN(yn.py)&&(yn.py=yn.y);if(ne=[],typeof rt=="function")for(Ht=0;Ht<Rn;++Ht)ne[Ht]=+rt.call(this,It[Ht],Ht);else for(Ht=0;Ht<Rn;++Ht)ne[Ht]=rt;if(he=[],typeof pt=="function")for(Ht=0;Ht<Rn;++Ht)he[Ht]=+pt.call(this,It[Ht],Ht);else for(Ht=0;Ht<Rn;++Ht)he[Ht]=pt;if(me=[],typeof vt=="function")for(Ht=0;Ht<In;++Ht)me[Ht]=+vt.call(this,jt[Ht],Ht);else for(Ht=0;Ht<In;++Ht)me[Ht]=vt;function dr(Xn,cr){if(!mn){for(mn=new Array(In),ur=0;ur<In;++ur)mn[ur]=[];for(ur=0;ur<Rn;++ur){var Tr=It[ur];mn[Tr.source.index].push(Tr.target),mn[Tr.target.index].push(Tr.source)}}for(var Rr,$n=mn[Ht],ur=-1,Sr=$n.length;++ur<Sr;)if(!isNaN(Rr=$n[ur][Xn]))return Rr;return Math.random()*cr}return Pe.resume()},Pe.resume=function(){return Pe.alpha(.1)},Pe.stop=function(){return Pe.alpha(0)},Pe.drag=function(){if(q||(q=i.behavior.drag().origin(R).on("dragstart.force",Ws).on("drag.force",Gt).on("dragend.force",Ps)),!arguments.length)return q;this.on("mouseover.force",ml).on("mouseout.force",Is).call(q)},i.rebind(Pe,ze,"on")};var lu=20,us=1,Zo=1/0;function Xo(C,q){return i.rebind(C,q,"sort","children","value"),C.nodes=C,C.links=Xs,C}function cs(C,q){for(var Q=[C];(C=Q.pop())!=null;)if(q(C),(he=C.children)&&(ne=he.length))for(var ne,he;--ne>=0;)Q.push(he[ne])}function ri(C,q){for(var Q=[C],ne=[];(C=Q.pop())!=null;)if(ne.push(C),(me=C.children)&&(he=me.length))for(var he,me,Pe=-1;++Pe<he;)Q.push(me[Pe]);for(;(C=ne.pop())!=null;)q(C)}function Zs(C){return C.children}function Wu(C){return C.value}function ql(C,q){return q.value-C.value}function Xs(C){return i.merge(C.map(function(q){return(q.children||[]).map(function(Q){return{source:q,target:Q}})}))}i.layout.hierarchy=function(){var C=ql,q=Zs,Q=Wu;function ne(he){var me,Pe=[he],ze=[];for(he.depth=0;(me=Pe.pop())!=null;)if(ze.push(me),(Ze=q.call(ne,me,me.depth))&&(qe=Ze.length)){for(var qe,Ze,rt;--qe>=0;)Pe.push(rt=Ze[qe]),rt.parent=me,rt.depth=me.depth+1;Q&&(me.value=0),me.children=Ze}else Q&&(me.value=+Q.call(ne,me,me.depth)||0),delete me.children;return ri(he,function(pt){var vt,kt;C&&(vt=pt.children)&&vt.sort(C),Q&&(kt=pt.parent)&&(kt.value+=pt.value)}),ze}return ne.sort=function(he){return arguments.length?(C=he,ne):C},ne.children=function(he){return arguments.length?(q=he,ne):q},ne.value=function(he){return arguments.length?(Q=he,ne):Q},ne.revalue=function(he){return Q&&(cs(he,function(me){me.children&&(me.value=0)}),ri(he,function(me){var Pe;me.children||(me.value=+Q.call(ne,me,me.depth)||0),(Pe=me.parent)&&(Pe.value+=me.value)})),he},ne},i.layout.partition=function(){var C=i.layout.hierarchy(),q=[1,1];function Q(me,Pe,ze,qe){var Ze=me.children;if(me.x=Pe,me.y=me.depth*qe,me.dx=ze,me.dy=qe,Ze&&(rt=Ze.length)){var rt,pt,vt,kt=-1;for(ze=me.value?ze/me.value:0;++kt<rt;)Q(pt=Ze[kt],Pe,vt=pt.value*ze,qe),Pe+=vt}}function ne(me){var Pe=me.children,ze=0;if(Pe&&(qe=Pe.length))for(var qe,Ze=-1;++Ze<qe;)ze=Math.max(ze,ne(Pe[Ze]));return 1+ze}function he(me,Pe){var ze=C.call(this,me,Pe);return Q(ze[0],0,q[0],q[1]/ne(ze[0])),ze}return he.size=function(me){return arguments.length?(q=me,he):q},Xo(he,C)},i.layout.pie=function(){var C=Number,q=Ou,Q=0,ne=Ft,he=0;function me(Pe){var ze,qe=Pe.length,Ze=Pe.map(function(Jt,Gt){return+C.call(me,Jt,Gt)}),rt=+(typeof Q=="function"?Q.apply(this,arguments):Q),pt=(typeof ne=="function"?ne.apply(this,arguments):ne)-rt,vt=Math.min(Math.abs(pt)/qe,+(typeof he=="function"?he.apply(this,arguments):he)),kt=vt*(pt<0?-1:1),Ot=i.sum(Ze),Et=Ot?(pt-qe*kt)/Ot:0,jt=i.range(qe),It=[];return q!=null&&jt.sort(q===Ou?function(Jt,Gt){return Ze[Gt]-Ze[Jt]}:function(Jt,Gt){return q(Pe[Jt],Pe[Gt])}),jt.forEach(function(Jt){It[Jt]={data:Pe[Jt],value:ze=Ze[Jt],startAngle:rt,endAngle:rt+=ze*Et+kt,padAngle:vt}}),It}return me.value=function(Pe){return arguments.length?(C=Pe,me):C},me.sort=function(Pe){return arguments.length?(q=Pe,me):q},me.startAngle=function(Pe){return arguments.length?(Q=Pe,me):Q},me.endAngle=function(Pe){return arguments.length?(ne=Pe,me):ne},me.padAngle=function(Pe){return arguments.length?(he=Pe,me):he},me};var Ou={};function Zu(C){return C.x}function Yl(C){return C.y}function Xu(C,q,Q){C.y0=q,C.y=Q}i.layout.stack=function(){var C=R,q=Jo,Q=To,ne=Xu,he=Zu,me=Yl;function Pe(ze,qe){if(!(vt=ze.length))return ze;var Ze=ze.map(function(Jt,Gt){return C.call(Pe,Jt,Gt)}),rt=Ze.map(function(Jt){return Jt.map(function(Gt,Ht){return[he.call(Pe,Gt,Ht),me.call(Pe,Gt,Ht)]})}),pt=q.call(Pe,rt,qe);Ze=i.permute(Ze,pt),rt=i.permute(rt,pt);var vt,kt,Ot,Et,jt=Q.call(Pe,rt,qe),It=Ze[0].length;for(Ot=0;Ot<It;++Ot)for(ne.call(Pe,Ze[0][Ot],Et=jt[Ot],rt[0][Ot][1]),kt=1;kt<vt;++kt)ne.call(Pe,Ze[kt][Ot],Et+=rt[kt-1][Ot][1],rt[kt][Ot][1]);return ze}return Pe.values=function(ze){return arguments.length?(C=ze,Pe):C},Pe.order=function(ze){return arguments.length?(q=typeof ze=="function"?ze:fs.get(ze)||Jo,Pe):q},Pe.offset=function(ze){return arguments.length?(Q=typeof ze=="function"?ze:Ds.get(ze)||To,Pe):Q},Pe.x=function(ze){return arguments.length?(he=ze,Pe):he},Pe.y=function(ze){return arguments.length?(me=ze,Pe):me},Pe.out=function(ze){return arguments.length?(ne=ze,Pe):ne},Pe};var fs=i.map({"inside-out":function(C){var q,Q,ne=C.length,he=C.map(Js),me=C.map(Pu),Pe=i.range(ne).sort(function(pt,vt){return he[pt]-he[vt]}),ze=0,qe=0,Ze=[],rt=[];for(q=0;q<ne;++q)Q=Pe[q],ze<qe?(ze+=me[Q],Ze.push(Q)):(qe+=me[Q],rt.push(Q));return rt.reverse().concat(Ze)},reverse:function(C){return i.range(C.length).reverse()},default:Jo}),Ds=i.map({silhouette:function(C){var q,Q,ne,he=C.length,me=C[0].length,Pe=[],ze=0,qe=[];for(Q=0;Q<me;++Q){for(q=0,ne=0;q<he;q++)ne+=C[q][Q][1];ne>ze&&(ze=ne),Pe.push(ne)}for(Q=0;Q<me;++Q)qe[Q]=(ze-Pe[Q])/2;return qe},wiggle:function(C){var q,Q,ne,he,me,Pe,ze,qe,Ze,rt=C.length,pt=C[0],vt=pt.length,kt=[];for(kt[0]=qe=Ze=0,Q=1;Q<vt;++Q){for(q=0,he=0;q<rt;++q)he+=C[q][Q][1];for(q=0,me=0,ze=pt[Q][0]-pt[Q-1][0];q<rt;++q){for(ne=0,Pe=(C[q][Q][1]-C[q][Q-1][1])/(2*ze);ne<q;++ne)Pe+=(C[ne][Q][1]-C[ne][Q-1][1])/ze;me+=Pe*C[q][Q][1]}kt[Q]=qe-=he?me/he*ze:0,qe<Ze&&(Ze=qe)}for(Q=0;Q<vt;++Q)kt[Q]-=Ze;return kt},expand:function(C){var q,Q,ne,he=C.length,me=C[0].length,Pe=1/he,ze=[];for(Q=0;Q<me;++Q){for(q=0,ne=0;q<he;q++)ne+=C[q][Q][1];if(ne)for(q=0;q<he;q++)C[q][Q][1]/=ne;else for(q=0;q<he;q++)C[q][Q][1]=Pe}for(Q=0;Q<me;++Q)ze[Q]=0;return ze},zero:To});function Jo(C){return i.range(C.length)}function To(C){for(var q=-1,Q=C[0].length,ne=[];++q<Q;)ne[q]=0;return ne}function Js(C){for(var q,Q=1,ne=0,he=C[0][1],me=C.length;Q<me;++Q)(q=C[Q][1])>he&&(ne=Q,he=q);return ne}function Pu(C){return C.reduce(yl,0)}function yl(C,q){return C+q[1]}function Gl(C,q){return ro(C,Math.ceil(Math.log(q.length)/Math.LN2+1))}function ro(C,q){for(var Q=-1,ne=+C[0],he=(C[1]-ne)/q,me=[];++Q<=q;)me[Q]=he*Q+ne;return me}function Wl(C){return[i.min(C),i.max(C)]}function Iu(C,q){return C.value-q.value}function Ks(C,q){var Q=C._pack_next;C._pack_next=q,q._pack_prev=C,q._pack_next=Q,Q._pack_prev=q}function Rs(C,q){C._pack_next=q,q._pack_prev=C}function Qs(C,q){var Q=q.x-C.x,ne=q.y-C.y,he=C.r+q.r;return .999*he*he>Q*Q+ne*ne}function zs(C){if((q=C.children)&&(qe=q.length)){var q,Q,ne,he,me,Pe,ze,qe,Ze=1/0,rt=-1/0,pt=1/0,vt=-1/0;if(q.forEach(Fs),(Q=q[0]).x=-Q.r,Q.y=0,Gt(Q),qe>1&&((ne=q[1]).x=ne.r,ne.y=0,Gt(ne),qe>2))for(vi(Q,ne,he=q[2]),Gt(he),Ks(Q,he),Q._pack_prev=he,Ks(he,ne),ne=Q._pack_next,me=3;me<qe;me++){vi(Q,ne,he=q[me]);var kt=0,Ot=1,Et=1;for(Pe=ne._pack_next;Pe!==ne;Pe=Pe._pack_next,Ot++)if(Qs(Pe,he)){kt=1;break}if(kt==1)for(ze=Q._pack_prev;ze!==Pe._pack_prev&&!Qs(ze,he);ze=ze._pack_prev,Et++);kt?(Ot<Et||Ot==Et&&ne.r<Q.r?Rs(Q,ne=Pe):Rs(Q=ze,ne),me--):(Ks(Q,he),ne=he,Gt(he))}var jt=(Ze+rt)/2,It=(pt+vt)/2,Jt=0;for(me=0;me<qe;me++)(he=q[me]).x-=jt,he.y-=It,Jt=Math.max(Jt,he.r+Math.sqrt(he.x*he.x+he.y*he.y));C.r=Jt,q.forEach(xl)}function Gt(Ht){Ze=Math.min(Ht.x-Ht.r,Ze),rt=Math.max(Ht.x+Ht.r,rt),pt=Math.min(Ht.y-Ht.r,pt),vt=Math.max(Ht.y+Ht.r,vt)}}function Fs(C){C._pack_next=C._pack_prev=C}function xl(C){delete C._pack_next,delete C._pack_prev}function Zl(C,q,Q,ne){var he=C.children;if(C.x=q+=ne*C.x,C.y=Q+=ne*C.y,C.r*=ne,he)for(var me=-1,Pe=he.length;++me<Pe;)Zl(he[me],q,Q,ne)}function vi(C,q,Q){var ne=C.r+Q.r,he=q.x-C.x,me=q.y-C.y;if(ne&&(he||me)){var Pe=q.r+Q.r,ze=he*he+me*me,qe=.5+((ne*=ne)-(Pe*=Pe))/(2*ze),Ze=Math.sqrt(Math.max(0,2*Pe*(ne+ze)-(ne-=ze)*ne-Pe*Pe))/(2*ze);Q.x=C.x+qe*he+Ze*me,Q.y=C.y+qe*me-Ze*he}else Q.x=C.x+ne,Q.y=C.y}function hs(C,q){return C.parent==q.parent?1:2}function ka(C){var q=C.children;return q.length?q[0]:C.t}function ko(C){var q,Q=C.children;return(q=Q.length)?Q[q-1]:C.t}function ui(C,q,Q){var ne=Q/(q.i-C.i);q.c-=ne,q.s+=Q,C.c+=ne,q.z+=Q,q.m+=Q}function gi(C,q,Q){return C.a.parent===q.parent?C.a:Q}function io(C){var q=C.children;return q&&q.length?io(q[0]):C}function $s(C){var q,Q=C.children;return Q&&(q=Q.length)?$s(Q[q-1]):C}function bl(C){return{x:C.x,y:C.y,dx:C.dx,dy:C.dy}}function Xl(C,q){var Q=C.x+q[3],ne=C.y+q[0],he=C.dx-q[1]-q[3],me=C.dy-q[0]-q[2];return he<0&&(Q+=he/2,he=0),me<0&&(ne+=me/2,me=0),{x:Q,y:ne,dx:he,dy:me}}function _l(C){var q=C[0],Q=C[C.length-1];return q<Q?[q,Q]:[Q,q]}function wl(C){return C.rangeExtent?C.rangeExtent():_l(C.range())}function co(C,q,Q,ne){var he=Q(C[0],C[1]),me=ne(q[0],q[1]);return function(Pe){return me(he(Pe))}}function ps(C,q){var Q,ne=0,he=C.length-1,me=C[ne],Pe=C[he];return Pe<me&&(Q=ne,ne=he,he=Q,Q=me,me=Pe,Pe=Q),C[ne]=q.floor(me),C[he]=q.ceil(Pe),C}function ds(C){return C?{floor:function(q){return Math.floor(q/C)*C},ceil:function(q){return Math.ceil(q/C)*C}}:Ca}i.layout.histogram=function(){var C=!0,q=Number,Q=Wl,ne=Gl;function he(me,Pe){for(var ze,qe,Ze=[],rt=me.map(q,this),pt=Q.call(this,rt,Pe),vt=ne.call(this,pt,rt,Pe),kt=(Pe=-1,rt.length),Ot=vt.length-1,Et=C?1:1/kt;++Pe<Ot;)(ze=Ze[Pe]=[]).dx=vt[Pe+1]-(ze.x=vt[Pe]),ze.y=0;if(Ot>0)for(Pe=-1;++Pe<kt;)(qe=rt[Pe])>=pt[0]&&qe<=pt[1]&&((ze=Ze[i.bisect(vt,qe,1,Ot)-1]).y+=Et,ze.push(me[Pe]));return Ze}return he.value=function(me){return arguments.length?(q=me,he):q},he.range=function(me){return arguments.length?(Q=zn(me),he):Q},he.bins=function(me){return arguments.length?(ne=typeof me=="number"?function(Pe){return ro(Pe,me)}:zn(me),he):ne},he.frequency=function(me){return arguments.length?(C=!!me,he):C},he},i.layout.pack=function(){var C,q=i.layout.hierarchy().sort(Iu),Q=0,ne=[1,1];function he(me,Pe){var ze=q.call(this,me,Pe),qe=ze[0],Ze=ne[0],rt=ne[1],pt=C==null?Math.sqrt:typeof C=="function"?C:function(){return C};if(qe.x=qe.y=0,ri(qe,function(kt){kt.r=+pt(kt.value)}),ri(qe,zs),Q){var vt=Q*(C?1:Math.max(2*qe.r/Ze,2*qe.r/rt))/2;ri(qe,function(kt){kt.r+=vt}),ri(qe,zs),ri(qe,function(kt){kt.r-=vt})}return Zl(qe,Ze/2,rt/2,C?1:1/Math.max(2*qe.r/Ze,2*qe.r/rt)),ze}return he.size=function(me){return arguments.length?(ne=me,he):ne},he.radius=function(me){return arguments.length?(C=me==null||typeof me=="function"?me:+me,he):C},he.padding=function(me){return arguments.length?(Q=+me,he):Q},Xo(he,q)},i.layout.tree=function(){var C=i.layout.hierarchy().sort(null).value(null),q=hs,Q=[1,1],ne=null;function he(qe,Ze){var rt=C.call(this,qe,Ze),pt=rt[0],vt=function(Gt){for(var Ht,mn={A:null,children:[Gt]},yn=[mn];(Ht=yn.pop())!=null;)for(var In,Rn=Ht.children,Yn=0,er=Rn.length;Yn<er;++Yn)yn.push((Rn[Yn]=In={_:Rn[Yn],parent:Ht,children:(In=Rn[Yn].children)&&In.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Yn}).a=In);return mn.children[0]}(pt);if(ri(vt,me),vt.parent.m=-vt.z,cs(vt,Pe),ne)cs(pt,ze);else{var kt=pt,Ot=pt,Et=pt;cs(pt,function(Gt){Gt.x<kt.x&&(kt=Gt),Gt.x>Ot.x&&(Ot=Gt),Gt.depth>Et.depth&&(Et=Gt)});var jt=q(kt,Ot)/2-kt.x,It=Q[0]/(Ot.x+q(Ot,kt)/2+jt),Jt=Q[1]/(Et.depth||1);cs(pt,function(Gt){Gt.x=(Gt.x+jt)*It,Gt.y=Gt.depth*Jt})}return rt}function me(qe){var Ze=qe.children,rt=qe.parent.children,pt=qe.i?rt[qe.i-1]:null;if(Ze.length){(function(kt){for(var Ot,Et=0,jt=0,It=kt.children,Jt=It.length;--Jt>=0;)(Ot=It[Jt]).z+=Et,Ot.m+=Et,Et+=Ot.s+(jt+=Ot.c)})(qe);var vt=(Ze[0].z+Ze[Ze.length-1].z)/2;pt?(qe.z=pt.z+q(qe._,pt._),qe.m=qe.z-vt):qe.z=vt}else pt&&(qe.z=pt.z+q(qe._,pt._));qe.parent.A=function(kt,Ot,Et){if(Ot){for(var jt,It=kt,Jt=kt,Gt=Ot,Ht=It.parent.children[0],mn=It.m,yn=Jt.m,In=Gt.m,Rn=Ht.m;Gt=ko(Gt),It=ka(It),Gt&&It;)Ht=ka(Ht),(Jt=ko(Jt)).a=kt,(jt=Gt.z+In-It.z-mn+q(Gt._,It._))>0&&(ui(gi(Gt,kt,Et),kt,jt),mn+=jt,yn+=jt),In+=Gt.m,mn+=It.m,Rn+=Ht.m,yn+=Jt.m;Gt&&!ko(Jt)&&(Jt.t=Gt,Jt.m+=In-yn),It&&!ka(Ht)&&(Ht.t=It,Ht.m+=mn-Rn,Et=kt)}return Et}(qe,pt,qe.parent.A||rt[0])}function Pe(qe){qe._.x=qe.z+qe.parent.m,qe.m+=qe.parent.m}function ze(qe){qe.x*=Q[0],qe.y=qe.depth*Q[1]}return he.separation=function(qe){return arguments.length?(q=qe,he):q},he.size=function(qe){return arguments.length?(ne=(Q=qe)==null?ze:null,he):ne?null:Q},he.nodeSize=function(qe){return arguments.length?(ne=(Q=qe)==null?null:ze,he):ne?Q:null},Xo(he,C)},i.layout.cluster=function(){var C=i.layout.hierarchy().sort(null).value(null),q=hs,Q=[1,1],ne=!1;function he(me,Pe){var ze,qe=C.call(this,me,Pe),Ze=qe[0],rt=0;ri(Ze,function(Et){var jt=Et.children;jt&&jt.length?(Et.x=function(It){return It.reduce(function(Jt,Gt){return Jt+Gt.x},0)/It.length}(jt),Et.y=function(It){return 1+i.max(It,function(Jt){return Jt.y})}(jt)):(Et.x=ze?rt+=q(Et,ze):0,Et.y=0,ze=Et)});var pt=io(Ze),vt=$s(Ze),kt=pt.x-q(pt,vt)/2,Ot=vt.x+q(vt,pt)/2;return ri(Ze,ne?function(Et){Et.x=(Et.x-Ze.x)*Q[0],Et.y=(Ze.y-Et.y)*Q[1]}:function(Et){Et.x=(Et.x-kt)/(Ot-kt)*Q[0],Et.y=(1-(Ze.y?Et.y/Ze.y:1))*Q[1]}),qe}return he.separation=function(me){return arguments.length?(q=me,he):q},he.size=function(me){return arguments.length?(ne=(Q=me)==null,he):ne?null:Q},he.nodeSize=function(me){return arguments.length?(ne=(Q=me)!=null,he):ne?Q:null},Xo(he,C)},i.layout.treemap=function(){var C,q=i.layout.hierarchy(),Q=Math.round,ne=[1,1],he=null,me=bl,Pe=!1,ze="squarify",qe=.5*(1+Math.sqrt(5));function Ze(Et,jt){for(var It,Jt,Gt=-1,Ht=Et.length;++Gt<Ht;)Jt=(It=Et[Gt]).value*(jt<0?0:jt),It.area=isNaN(Jt)||Jt<=0?0:Jt}function rt(Et){var jt=Et.children;if(jt&&jt.length){var It,Jt,Gt,Ht=me(Et),mn=[],yn=jt.slice(),In=1/0,Rn=ze==="slice"?Ht.dx:ze==="dice"?Ht.dy:ze==="slice-dice"?1&Et.depth?Ht.dy:Ht.dx:Math.min(Ht.dx,Ht.dy);for(Ze(yn,Ht.dx*Ht.dy/Et.value),mn.area=0;(Gt=yn.length)>0;)mn.push(It=yn[Gt-1]),mn.area+=It.area,ze!=="squarify"||(Jt=vt(mn,Rn))<=In?(yn.pop(),In=Jt):(mn.area-=mn.pop().area,kt(mn,Rn,Ht,!1),Rn=Math.min(Ht.dx,Ht.dy),mn.length=mn.area=0,In=1/0);mn.length&&(kt(mn,Rn,Ht,!0),mn.length=mn.area=0),jt.forEach(rt)}}function pt(Et){var jt=Et.children;if(jt&&jt.length){var It,Jt=me(Et),Gt=jt.slice(),Ht=[];for(Ze(Gt,Jt.dx*Jt.dy/Et.value),Ht.area=0;It=Gt.pop();)Ht.push(It),Ht.area+=It.area,It.z!=null&&(kt(Ht,It.z?Jt.dx:Jt.dy,Jt,!Gt.length),Ht.length=Ht.area=0);jt.forEach(pt)}}function vt(Et,jt){for(var It,Jt=Et.area,Gt=0,Ht=1/0,mn=-1,yn=Et.length;++mn<yn;)(It=Et[mn].area)&&(It<Ht&&(Ht=It),It>Gt&&(Gt=It));return jt*=jt,(Jt*=Jt)?Math.max(jt*Gt*qe/Jt,Jt/(jt*Ht*qe)):1/0}function kt(Et,jt,It,Jt){var Gt,Ht=-1,mn=Et.length,yn=It.x,In=It.y,Rn=jt?Q(Et.area/jt):0;if(jt==It.dx){for((Jt||Rn>It.dy)&&(Rn=It.dy);++Ht<mn;)(Gt=Et[Ht]).x=yn,Gt.y=In,Gt.dy=Rn,yn+=Gt.dx=Math.min(It.x+It.dx-yn,Rn?Q(Gt.area/Rn):0);Gt.z=!0,Gt.dx+=It.x+It.dx-yn,It.y+=Rn,It.dy-=Rn}else{for((Jt||Rn>It.dx)&&(Rn=It.dx);++Ht<mn;)(Gt=Et[Ht]).x=yn,Gt.y=In,Gt.dx=Rn,In+=Gt.dy=Math.min(It.y+It.dy-In,Rn?Q(Gt.area/Rn):0);Gt.z=!1,Gt.dy+=It.y+It.dy-In,It.x+=Rn,It.dx-=Rn}}function Ot(Et){var jt=C||q(Et),It=jt[0];return It.x=It.y=0,It.value?(It.dx=ne[0],It.dy=ne[1]):It.dx=It.dy=0,C&&q.revalue(It),Ze([It],It.dx*It.dy/It.value),(C?pt:rt)(It),Pe&&(C=jt),jt}return Ot.size=function(Et){return arguments.length?(ne=Et,Ot):ne},Ot.padding=function(Et){if(!arguments.length)return he;function jt(Jt){return Xl(Jt,Et)}var It;return me=(he=Et)==null?bl:(It=typeof Et)=="function"?function(Jt){var Gt=Et.call(Ot,Jt,Jt.depth);return Gt==null?bl(Jt):Xl(Jt,typeof Gt=="number"?[Gt,Gt,Gt,Gt]:Gt)}:(It==="number"&&(Et=[Et,Et,Et,Et]),jt),Ot},Ot.round=function(Et){return arguments.length?(Q=Et?Math.round:Number,Ot):Q!=Number},Ot.sticky=function(Et){return arguments.length?(Pe=Et,C=null,Ot):Pe},Ot.ratio=function(Et){return arguments.length?(qe=Et,Ot):qe},Ot.mode=function(Et){return arguments.length?(ze=Et+"",Ot):ze},Xo(Ot,q)},i.random={normal:function(C,q){var Q=arguments.length;return Q<2&&(q=1),Q<1&&(C=0),function(){var ne,he,me;do me=(ne=2*Math.random()-1)*ne+(he=2*Math.random()-1)*he;while(!me||me>1);return C+q*ne*Math.sqrt(-2*Math.log(me)/me)}},logNormal:function(){var C=i.random.normal.apply(i,arguments);return function(){return Math.exp(C())}},bates:function(C){var q=i.random.irwinHall(C);return function(){return q()/C}},irwinHall:function(C){return function(){for(var q=0,Q=0;Q<C;Q++)q+=Math.random();return q}}},i.scale={};var Ca={floor:R,ceil:R};function Tl(C,q,Q,ne){var he=[],me=[],Pe=0,ze=Math.min(C.length,q.length)-1;for(C[ze]<C[0]&&(C=C.slice().reverse(),q=q.slice().reverse());++Pe<=ze;)he.push(Q(C[Pe-1],C[Pe])),me.push(ne(q[Pe-1],q[Pe]));return function(qe){var Ze=i.bisect(C,qe,1,ze)-1;return me[Ze](he[Ze](qe))}}function fo(C,q,Q,ne){var he,me;function Pe(){var qe=Math.min(C.length,q.length)>2?Tl:co,Ze=ne?Gu:Yu;return he=qe(C,q,Ze,Q),me=qe(q,C,Ze,Yo),ze}function ze(qe){return he(qe)}return ze.invert=function(qe){return me(qe)},ze.domain=function(qe){return arguments.length?(C=qe.map(Number),Pe()):C},ze.range=function(qe){return arguments.length?(q=qe,Pe()):q},ze.rangeRound=function(qe){return ze.range(qe).interpolate(su)},ze.clamp=function(qe){return arguments.length?(ne=qe,Pe()):ne},ze.interpolate=function(qe){return arguments.length?(Q=qe,Pe()):Q},ze.ticks=function(qe){return ma(C,qe)},ze.tickFormat=function(qe,Ze){return d3_scale_linearTickFormat(C,qe,Ze)},ze.nice=function(qe){return va(C,qe),Pe()},ze.copy=function(){return fo(C,q,Q,ne)},Pe()}function fa(C,q){return i.rebind(C,q,"range","rangeRound","interpolate","clamp")}function va(C,q){return ps(C,ds(Mi(C,q)[2])),ps(C,ds(Mi(C,q)[2])),C}function Mi(C,q){q==null&&(q=10);var Q=_l(C),ne=Q[1]-Q[0],he=Math.pow(10,Math.floor(Math.log(ne/q)/Math.LN10)),me=q/ne*he;return me<=.15?he*=10:me<=.35?he*=5:me<=.75&&(he*=2),Q[0]=Math.ceil(Q[0]/he)*he,Q[1]=Math.floor(Q[1]/he)*he+.5*he,Q[2]=he,Q}function ma(C,q){return i.range.apply(i,Mi(C,q))}function Fo(C,q,Q,ne){function he(ze){return(Q?Math.log(ze<0?0:ze):-Math.log(ze>0?0:-ze))/Math.log(q)}function me(ze){return Q?Math.pow(q,ze):-Math.pow(q,-ze)}function Pe(ze){return C(he(ze))}return Pe.invert=function(ze){return me(C.invert(ze))},Pe.domain=function(ze){return arguments.length?(Q=ze[0]>=0,C.domain((ne=ze.map(Number)).map(he)),Pe):ne},Pe.base=function(ze){return arguments.length?(q=+ze,C.domain(ne.map(he)),Pe):q},Pe.nice=function(){var ze=ps(ne.map(he),Q?Math:Bs);return C.domain(ze),ne=ze.map(me),Pe},Pe.ticks=function(){var ze=_l(ne),qe=[],Ze=ze[0],rt=ze[1],pt=Math.floor(he(Ze)),vt=Math.ceil(he(rt)),kt=q%1?2:q;if(isFinite(vt-pt)){if(Q){for(;pt<vt;pt++)for(var Ot=1;Ot<kt;Ot++)qe.push(me(pt)*Ot);qe.push(me(pt))}else for(qe.push(me(pt));pt++<vt;)for(Ot=kt-1;Ot>0;Ot--)qe.push(me(pt)*Ot);for(pt=0;qe[pt]<Ze;pt++);for(vt=qe.length;qe[vt-1]>rt;vt--);qe=qe.slice(pt,vt)}return qe},Pe.copy=function(){return Fo(C.copy(),q,Q,ne)},fa(Pe,C)}i.scale.linear=function(){return fo([0,1],[0,1],Yo,!1)},i.scale.log=function(){return Fo(i.scale.linear().domain([0,1]),10,!0,[1,10])};var Bs={floor:function(C){return-Math.ceil(-C)},ceil:function(C){return-Math.floor(-C)}};function Mo(C,q,Q){var ne=gs(q),he=gs(1/q);function me(Pe){return C(ne(Pe))}return me.invert=function(Pe){return he(C.invert(Pe))},me.domain=function(Pe){return arguments.length?(C.domain((Q=Pe.map(Number)).map(ne)),me):Q},me.ticks=function(Pe){return ma(Q,Pe)},me.tickFormat=function(Pe,ze){return d3_scale_linearTickFormat(Q,Pe,ze)},me.nice=function(Pe){return me.domain(va(Q,Pe))},me.exponent=function(Pe){return arguments.length?(ne=gs(q=Pe),he=gs(1/q),C.domain(Q.map(ne)),me):q},me.copy=function(){return Mo(C.copy(),q,Q)},fa(me,C)}function gs(C){return function(q){return q<0?-Math.pow(-q,C):Math.pow(q,C)}}function ja(C,q){var Q,ne,he;function me(ze){return ne[((Q.get(ze)||(q.t==="range"?Q.set(ze,C.push(ze)):NaN))-1)%ne.length]}function Pe(ze,qe){return i.range(C.length).map(function(Ze){return ze+qe*Ze})}return me.domain=function(ze){if(!arguments.length)return C;C=[],Q=new y;for(var qe,Ze=-1,rt=ze.length;++Ze<rt;)Q.has(qe=ze[Ze])||Q.set(qe,C.push(qe));return me[q.t].apply(me,q.a)},me.range=function(ze){return arguments.length?(ne=ze,he=0,q={t:"range",a:arguments},me):ne},me.rangePoints=function(ze,qe){arguments.length<2&&(qe=0);var Ze=ze[0],rt=ze[1],pt=C.length<2?(Ze=(Ze+rt)/2,0):(rt-Ze)/(C.length-1+qe);return ne=Pe(Ze+pt*qe/2,pt),he=0,q={t:"rangePoints",a:arguments},me},me.rangeRoundPoints=function(ze,qe){arguments.length<2&&(qe=0);var Ze=ze[0],rt=ze[1],pt=C.length<2?(Ze=rt=Math.round((Ze+rt)/2),0):(rt-Ze)/(C.length-1+qe)|0;return ne=Pe(Ze+Math.round(pt*qe/2+(rt-Ze-(C.length-1+qe)*pt)/2),pt),he=0,q={t:"rangeRoundPoints",a:arguments},me},me.rangeBands=function(ze,qe,Ze){arguments.length<2&&(qe=0),arguments.length<3&&(Ze=qe);var rt=ze[1]<ze[0],pt=ze[rt-0],vt=(ze[1-rt]-pt)/(C.length-qe+2*Ze);return ne=Pe(pt+vt*Ze,vt),rt&&ne.reverse(),he=vt*(1-qe),q={t:"rangeBands",a:arguments},me},me.rangeRoundBands=function(ze,qe,Ze){arguments.length<2&&(qe=0),arguments.length<3&&(Ze=qe);var rt=ze[1]<ze[0],pt=ze[rt-0],vt=ze[1-rt],kt=Math.floor((vt-pt)/(C.length-qe+2*Ze));return ne=Pe(pt+Math.round((vt-pt-(C.length-qe)*kt)/2),kt),rt&&ne.reverse(),he=Math.round(kt*(1-qe)),q={t:"rangeRoundBands",a:arguments},me},me.rangeBand=function(){return he},me.rangeExtent=function(){return _l(q.a[0])},me.copy=function(){return ja(C,q)},me.domain(C)}i.scale.pow=function(){return Mo(i.scale.linear(),1,[0,1])},i.scale.sqrt=function(){return i.scale.pow().exponent(.5)},i.scale.ordinal=function(){return ja([],{t:"range",a:[[]]})},i.scale.category10=function(){return i.scale.ordinal().range(Ns)},i.scale.category20=function(){return i.scale.ordinal().range(Ko)},i.scale.category20b=function(){return i.scale.ordinal().range(ho)},i.scale.category20c=function(){return i.scale.ordinal().range(po)};var Ns=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Zt),Ko=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Zt),ho=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Zt),po=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Zt);function Si(C,q){var Q;function ne(){var me=0,Pe=q.length;for(Q=[];++me<Pe;)Q[me-1]=i.quantile(C,me/Pe);return he}function he(me){if(!isNaN(me=+me))return q[i.bisect(Q,me)]}return he.domain=function(me){return arguments.length?(C=me.map(p).filter(c).sort(u),ne()):C},he.range=function(me){return arguments.length?(q=me,ne()):q},he.quantiles=function(){return Q},he.invertExtent=function(me){return(me=q.indexOf(me))<0?[NaN,NaN]:[me>0?Q[me-1]:C[0],me<Q.length?Q[me]:C[C.length-1]]},he.copy=function(){return Si(C,q)},ne()}function Ao(C,q,Q){var ne,he;function me(ze){return Q[Math.max(0,Math.min(he,Math.floor(ne*(ze-C))))]}function Pe(){return ne=Q.length/(q-C),he=Q.length-1,me}return me.domain=function(ze){return arguments.length?(C=+ze[0],q=+ze[ze.length-1],Pe()):[C,q]},me.range=function(ze){return arguments.length?(Q=ze,Pe()):Q},me.invertExtent=function(ze){return[ze=(ze=Q.indexOf(ze))<0?NaN:ze/ne+C,ze+1/ne]},me.copy=function(){return Ao(C,q,Q)},Pe()}function Or(C,q){function Q(ne){if(ne<=ne)return q[i.bisect(C,ne)]}return Q.domain=function(ne){return arguments.length?(C=ne,Q):C},Q.range=function(ne){return arguments.length?(q=ne,Q):q},Q.invertExtent=function(ne){return ne=q.indexOf(ne),[C[ne-1],C[ne]]},Q.copy=function(){return Or(C,q)},Q}function kl(C){function q(Q){return+Q}return q.invert=q,q.domain=q.range=function(Q){return arguments.length?(C=Q.map(q),q):C},q.ticks=function(Q){return ma(C,Q)},q.tickFormat=function(Q,ne){return d3_scale_linearTickFormat(C,Q,ne)},q.copy=function(){return kl(C)},q}function uu(){return 0}i.scale.quantile=function(){return Si([],[])},i.scale.quantize=function(){return Ao(0,1,[0,1])},i.scale.threshold=function(){return Or([.5],[0,1])},i.scale.identity=function(){return kl([0,1])},i.svg={},i.svg.arc=function(){var C=ms,q=js,Q=uu,ne=vs,he=el,me=wr,Pe=Ml;function ze(){var Ze=Math.max(0,+C.apply(this,arguments)),rt=Math.max(0,+q.apply(this,arguments)),pt=he.apply(this,arguments)-Xe,vt=me.apply(this,arguments)-Xe,kt=Math.abs(vt-pt),Ot=pt>vt?0:1;if(rt<Ze&&(Et=rt,rt=Ze,Ze=Et),kt>=Pt)return qe(rt,Ot)+(Ze?qe(Ze,1-Ot):"")+"Z";var Et,jt,It,Jt,Gt,Ht,mn,yn,In,Rn,Yn,er,dr=0,Xn=0,cr=[];if((Jt=(+Pe.apply(this,arguments)||0)/2)&&(It=ne===vs?Math.sqrt(Ze*Ze+rt*rt):+ne.apply(this,arguments),Ot||(Xn*=-1),rt&&(Xn=Je(It/rt*Math.sin(Jt))),Ze&&(dr=Je(It/Ze*Math.sin(Jt)))),rt){Gt=rt*Math.cos(pt+Xn),Ht=rt*Math.sin(pt+Xn),mn=rt*Math.cos(vt-Xn),yn=rt*Math.sin(vt-Xn);var Tr=Math.abs(vt-pt-2*Xn)<=zt?0:1;if(Xn&&Qo(Gt,Ht,mn,yn)===Ot^Tr){var Rr=(pt+vt)/2;Gt=rt*Math.cos(Rr),Ht=rt*Math.sin(Rr),mn=yn=null}}else Gt=Ht=0;if(Ze){In=Ze*Math.cos(vt-dr),Rn=Ze*Math.sin(vt-dr),Yn=Ze*Math.cos(pt+dr),er=Ze*Math.sin(pt+dr);var $n=Math.abs(pt-vt+2*dr)<=zt?0:1;if(dr&&Qo(In,Rn,Yn,er)===1-Ot^$n){var ur=(pt+vt)/2;In=Ze*Math.cos(ur),Rn=Ze*Math.sin(ur),Yn=er=null}}else In=Rn=0;if(kt>st&&(Et=Math.min(Math.abs(rt-Ze)/2,+Q.apply(this,arguments)))>.001){jt=Ze<rt^Ot?0:1;var Sr=Et,gr=Et;if(kt<zt){var Pr=Yn==null?[In,Rn]:mn==null?[Gt,Ht]:Rt([Gt,Ht],[Yn,er],[mn,yn],[In,Rn]),jr=Gt-Pr[0],Xr=Ht-Pr[1],Kr=mn-Pr[0],ni=yn-Pr[1],ai=1/Math.sin(Math.acos((jr*Kr+Xr*ni)/(Math.sqrt(jr*jr+Xr*Xr)*Math.sqrt(Kr*Kr+ni*ni)))/2),Li=Math.sqrt(Pr[0]*Pr[0]+Pr[1]*Pr[1]);gr=Math.min(Et,(Ze-Li)/(ai-1)),Sr=Math.min(Et,(rt-Li)/(ai+1))}if(mn!=null){var Ki=ha(Yn==null?[In,Rn]:[Yn,er],[Gt,Ht],rt,Sr,Ot),Pa=ha([mn,yn],[In,Rn],rt,Sr,Ot);Et===Sr?cr.push("M",Ki[0],"A",Sr,",",Sr," 0 0,",jt," ",Ki[1],"A",rt,",",rt," 0 ",1-Ot^Qo(Ki[1][0],Ki[1][1],Pa[1][0],Pa[1][1]),",",Ot," ",Pa[1],"A",Sr,",",Sr," 0 0,",jt," ",Pa[0]):cr.push("M",Ki[0],"A",Sr,",",Sr," 0 1,",jt," ",Pa[0])}else cr.push("M",Gt,",",Ht);if(Yn!=null){var pa=ha([Gt,Ht],[Yn,er],Ze,-gr,Ot),Ma=ha([In,Rn],mn==null?[Gt,Ht]:[mn,yn],Ze,-gr,Ot);Et===gr?cr.push("L",Ma[0],"A",gr,",",gr," 0 0,",jt," ",Ma[1],"A",Ze,",",Ze," 0 ",Ot^Qo(Ma[1][0],Ma[1][1],pa[1][0],pa[1][1]),",",1-Ot," ",pa[1],"A",gr,",",gr," 0 0,",jt," ",pa[0]):cr.push("L",Ma[0],"A",gr,",",gr," 0 0,",jt," ",pa[0])}else cr.push("L",In,",",Rn)}else cr.push("M",Gt,",",Ht),mn!=null&&cr.push("A",rt,",",rt," 0 ",Tr,",",Ot," ",mn,",",yn),cr.push("L",In,",",Rn),Yn!=null&&cr.push("A",Ze,",",Ze," 0 ",$n,",",1-Ot," ",Yn,",",er);return cr.push("Z"),cr.join("")}function qe(Ze,rt){return"M0,"+Ze+"A"+Ze+","+Ze+" 0 1,"+rt+" 0,"+-Ze+"A"+Ze+","+Ze+" 0 1,"+rt+" 0,"+Ze}return ze.innerRadius=function(Ze){return arguments.length?(C=zn(Ze),ze):C},ze.outerRadius=function(Ze){return arguments.length?(q=zn(Ze),ze):q},ze.cornerRadius=function(Ze){return arguments.length?(Q=zn(Ze),ze):Q},ze.padRadius=function(Ze){return arguments.length?(ne=Ze==vs?vs:zn(Ze),ze):ne},ze.startAngle=function(Ze){return arguments.length?(he=zn(Ze),ze):he},ze.endAngle=function(Ze){return arguments.length?(me=zn(Ze),ze):me},ze.padAngle=function(Ze){return arguments.length?(Pe=zn(Ze),ze):Pe},ze.centroid=function(){var Ze=(+C.apply(this,arguments)+ +q.apply(this,arguments))/2,rt=(+he.apply(this,arguments)+ +me.apply(this,arguments))/2-Xe;return[Math.cos(rt)*Ze,Math.sin(rt)*Ze]},ze};var vs="auto";function ms(C){return C.innerRadius}function js(C){return C.outerRadius}function el(C){return C.startAngle}function wr(C){return C.endAngle}function Ml(C){return C&&C.padAngle}function Qo(C,q,Q,ne){return(C-Q)*q-(q-ne)*C>0?0:1}function ha(C,q,Q,ne,he){var me=C[0]-q[0],Pe=C[1]-q[1],ze=(he?ne:-ne)/Math.sqrt(me*me+Pe*Pe),qe=ze*Pe,Ze=-ze*me,rt=C[0]+qe,pt=C[1]+Ze,vt=q[0]+qe,kt=q[1]+Ze,Ot=(rt+vt)/2,Et=(pt+kt)/2,jt=vt-rt,It=kt-pt,Jt=jt*jt+It*It,Gt=Q-ne,Ht=rt*kt-vt*pt,mn=(It<0?-1:1)*Math.sqrt(Math.max(0,Gt*Gt*Jt-Ht*Ht)),yn=(Ht*It-jt*mn)/Jt,In=(-Ht*jt-It*mn)/Jt,Rn=(Ht*It+jt*mn)/Jt,Yn=(-Ht*jt+It*mn)/Jt,er=yn-Ot,dr=In-Et,Xn=Rn-Ot,cr=Yn-Et;return er*er+dr*dr>Xn*Xn+cr*cr&&(yn=Rn,In=Yn),[[yn-qe,In-Ze],[yn*Q/Gt,In*Q/Gt]]}function ys(){return!0}function So(C){var q=Hn,Q=Bn,ne=ys,he=Oa,me=he.key,Pe=.7;function ze(qe){var Ze,rt=[],pt=[],vt=-1,kt=qe.length,Ot=zn(q),Et=zn(Q);function jt(){rt.push("M",he(C(pt),Pe))}for(;++vt<kt;)ne.call(this,Ze=qe[vt],vt)?pt.push([+Ot.call(this,Ze,vt),+Et.call(this,Ze,vt)]):pt.length&&(jt(),pt=[]);return pt.length&&jt(),rt.length?rt.join(""):null}return ze.x=function(qe){return arguments.length?(q=qe,ze):q},ze.y=function(qe){return arguments.length?(Q=qe,ze):Q},ze.defined=function(qe){return arguments.length?(ne=qe,ze):ne},ze.interpolate=function(qe){return arguments.length?(me=typeof qe=="function"?he=qe:(he=go.get(qe)||Oa).key,ze):me},ze.tension=function(qe){return arguments.length?(Pe=qe,ze):Pe},ze}i.svg.line=function(){return So(R)};var go=i.map({linear:Oa,"linear-closed":Bo,step:function(C){for(var q=0,Q=C.length,ne=C[0],he=[ne[0],",",ne[1]];++q<Q;)he.push("H",(ne[0]+(ne=C[q])[0])/2,"V",ne[1]);return Q>1&&he.push("H",ne[0]),he.join("")},"step-before":vo,"step-after":$o,basis:oi,"basis-open":function(C){if(C.length<4)return Oa(C);for(var q,Q=[],ne=-1,he=C.length,me=[0],Pe=[0];++ne<3;)q=C[ne],me.push(q[0]),Pe.push(q[1]);for(Q.push(ya(Va,me)+","+ya(Va,Pe)),--ne;++ne<he;)q=C[ne],me.shift(),me.push(q[0]),Pe.shift(),Pe.push(q[1]),tl(Q,me,Pe);return Q.join("")},"basis-closed":function(C){for(var q,Q,ne=-1,he=C.length,me=he+4,Pe=[],ze=[];++ne<4;)Q=C[ne%he],Pe.push(Q[0]),ze.push(Q[1]);for(q=[ya(Va,Pe),",",ya(Va,ze)],--ne;++ne<me;)Q=C[ne%he],Pe.shift(),Pe.push(Q[0]),ze.shift(),ze.push(Q[1]),tl(q,Pe,ze);return q.join("")},bundle:function(C,q){var Q=C.length-1;if(Q)for(var ne,he,me=C[0][0],Pe=C[0][1],ze=C[Q][0]-me,qe=C[Q][1]-Pe,Ze=-1;++Ze<=Q;)he=Ze/Q,(ne=C[Ze])[0]=q*ne[0]+(1-q)*(me+he*ze),ne[1]=q*ne[1]+(1-q)*(Pe+he*qe);return oi(C)},cardinal:function(C,q){return C.length<3?Oa(C):C[0]+Al(C,xs(C,q))},"cardinal-open":function(C,q){return C.length<4?Oa(C):C[1]+Al(C.slice(1,-1),xs(C,q))},"cardinal-closed":function(C,q){return C.length<3?Bo(C):C[0]+Al((C.push(C[0]),C),xs([C[C.length-2]].concat(C,[C[1]]),q))},monotone:function(C){return C.length<3?Oa(C):C[0]+Al(C,function(q){for(var Q,ne,he,me,Pe=[],ze=function(rt){for(var pt=0,vt=rt.length-1,kt=[],Ot=rt[0],Et=rt[1],jt=kt[0]=nl(Ot,Et);++pt<vt;)kt[pt]=(jt+(jt=nl(Ot=Et,Et=rt[pt+1])))/2;return kt[pt]=jt,kt}(q),qe=-1,Ze=q.length-1;++qe<Ze;)Q=nl(q[qe],q[qe+1]),m(Q)<st?ze[qe]=ze[qe+1]=0:(me=(ne=ze[qe]/Q)*ne+(he=ze[qe+1]/Q)*he)>9&&(me=3*Q/Math.sqrt(me),ze[qe]=me*ne,ze[qe+1]=me*he);for(qe=-1;++qe<=Ze;)me=(q[Math.min(Ze,qe+1)][0]-q[Math.max(0,qe-1)][0])/(6*(1+ze[qe]*ze[qe])),Pe.push([me||0,ze[qe]*me||0]);return Pe}(C))}});function Oa(C){return C.length>1?C.join("L"):C+"Z"}function Bo(C){return C.join("L")+"Z"}function vo(C){for(var q=0,Q=C.length,ne=C[0],he=[ne[0],",",ne[1]];++q<Q;)he.push("V",(ne=C[q])[1],"H",ne[0]);return he.join("")}function $o(C){for(var q=0,Q=C.length,ne=C[0],he=[ne[0],",",ne[1]];++q<Q;)he.push("H",(ne=C[q])[0],"V",ne[1]);return he.join("")}function Al(C,q){if(q.length<1||C.length!=q.length&&C.length!=q.length+2)return Oa(C);var Q=C.length!=q.length,ne="",he=C[0],me=C[1],Pe=q[0],ze=Pe,qe=1;if(Q&&(ne+="Q"+(me[0]-2*Pe[0]/3)+","+(me[1]-2*Pe[1]/3)+","+me[0]+","+me[1],he=C[1],qe=2),q.length>1){ze=q[1],me=C[qe],qe++,ne+="C"+(he[0]+Pe[0])+","+(he[1]+Pe[1])+","+(me[0]-ze[0])+","+(me[1]-ze[1])+","+me[0]+","+me[1];for(var Ze=2;Ze<q.length;Ze++,qe++)me=C[qe],ze=q[Ze],ne+="S"+(me[0]-ze[0])+","+(me[1]-ze[1])+","+me[0]+","+me[1]}if(Q){var rt=C[qe];ne+="Q"+(me[0]+2*ze[0]/3)+","+(me[1]+2*ze[1]/3)+","+rt[0]+","+rt[1]}return ne}function xs(C,q){for(var Q,ne=[],he=(1-q)/2,me=C[0],Pe=C[1],ze=1,qe=C.length;++ze<qe;)Q=me,me=Pe,Pe=C[ze],ne.push([he*(Pe[0]-Q[0]),he*(Pe[1]-Q[1])]);return ne}function oi(C){if(C.length<3)return Oa(C);var q=1,Q=C.length,ne=C[0],he=ne[0],me=ne[1],Pe=[he,he,he,(ne=C[1])[0]],ze=[me,me,me,ne[1]],qe=[he,",",me,"L",ya(Va,Pe),",",ya(Va,ze)];for(C.push(C[Q-1]);++q<=Q;)ne=C[q],Pe.shift(),Pe.push(ne[0]),ze.shift(),ze.push(ne[1]),tl(qe,Pe,ze);return C.pop(),qe.push("L",ne),qe.join("")}function ya(C,q){return C[0]*q[0]+C[1]*q[1]+C[2]*q[2]+C[3]*q[3]}go.forEach(function(C,q){q.key=C,q.closed=/-closed$/.test(C)});var Ua=[0,2/3,1/3,0],No=[0,1/3,2/3,0],Va=[0,1/6,2/3,1/6];function tl(C,q,Q){C.push("C",ya(Ua,q),",",ya(Ua,Q),",",ya(No,q),",",ya(No,Q),",",ya(Va,q),",",ya(Va,Q))}function nl(C,q){return(q[1]-C[1])/(q[0]-C[0])}function Ha(C){for(var q,Q,ne,he=-1,me=C.length;++he<me;)Q=(q=C[he])[0],ne=q[1]-Xe,q[0]=Q*Math.cos(ne),q[1]=Q*Math.sin(ne);return C}function ii(C){var q=Hn,Q=Hn,ne=0,he=Bn,me=ys,Pe=Oa,ze=Pe.key,qe=Pe,Ze="L",rt=.7;function pt(vt){var kt,Ot,Et,jt=[],It=[],Jt=[],Gt=-1,Ht=vt.length,mn=zn(q),yn=zn(ne),In=q===Q?function(){return Ot}:zn(Q),Rn=ne===he?function(){return Et}:zn(he);function Yn(){jt.push("M",Pe(C(Jt),rt),Ze,qe(C(It.reverse()),rt),"Z")}for(;++Gt<Ht;)me.call(this,kt=vt[Gt],Gt)?(It.push([Ot=+mn.call(this,kt,Gt),Et=+yn.call(this,kt,Gt)]),Jt.push([+In.call(this,kt,Gt),+Rn.call(this,kt,Gt)])):It.length&&(Yn(),It=[],Jt=[]);return It.length&&Yn(),jt.length?jt.join(""):null}return pt.x=function(vt){return arguments.length?(q=Q=vt,pt):Q},pt.x0=function(vt){return arguments.length?(q=vt,pt):q},pt.x1=function(vt){return arguments.length?(Q=vt,pt):Q},pt.y=function(vt){return arguments.length?(ne=he=vt,pt):he},pt.y0=function(vt){return arguments.length?(ne=vt,pt):ne},pt.y1=function(vt){return arguments.length?(he=vt,pt):he},pt.defined=function(vt){return arguments.length?(me=vt,pt):me},pt.interpolate=function(vt){return arguments.length?(ze=typeof vt=="function"?Pe=vt:(Pe=go.get(vt)||Oa).key,qe=Pe.reverse||Pe,Ze=Pe.closed?"M":"L",pt):ze},pt.tension=function(vt){return arguments.length?(rt=vt,pt):rt},pt}function jo(C){return C.source}function Us(C){return C.target}function Eo(C){return C.radius}function rl(C){return[C.x,C.y]}function il(){return 64}function Lo(){return"circle"}function Ei(C){var q=Math.sqrt(C/zt);return"M0,"+q+"A"+q+","+q+" 0 1,1 0,"+-q+"A"+q+","+q+" 0 1,1 0,"+q+"Z"}i.svg.line.radial=function(){var C=So(Ha);return C.radius=C.x,delete C.x,C.angle=C.y,delete C.y,C},vo.reverse=$o,$o.reverse=vo,i.svg.area=function(){return ii(R)},i.svg.area.radial=function(){var C=ii(Ha);return C.radius=C.x,delete C.x,C.innerRadius=C.x0,delete C.x0,C.outerRadius=C.x1,delete C.x1,C.angle=C.y,delete C.y,C.startAngle=C.y0,delete C.y0,C.endAngle=C.y1,delete C.y1,C},i.svg.chord=function(){var C=jo,q=Us,Q=Eo,ne=el,he=wr;function me(Ze,rt){var pt,vt,kt=Pe(this,C,Ze,rt),Ot=Pe(this,q,Ze,rt);return"M"+kt.p0+ze(kt.r,kt.p1,kt.a1-kt.a0)+(vt=Ot,((pt=kt).a0==vt.a0&&pt.a1==vt.a1?qe(kt.r,kt.p1,kt.r,kt.p0):qe(kt.r,kt.p1,Ot.r,Ot.p0)+ze(Ot.r,Ot.p1,Ot.a1-Ot.a0)+qe(Ot.r,Ot.p1,kt.r,kt.p0))+"Z")}function Pe(Ze,rt,pt,vt){var kt=rt.call(Ze,pt,vt),Ot=Q.call(Ze,kt,vt),Et=ne.call(Ze,kt,vt)-Xe,jt=he.call(Ze,kt,vt)-Xe;return{r:Ot,a0:Et,a1:jt,p0:[Ot*Math.cos(Et),Ot*Math.sin(Et)],p1:[Ot*Math.cos(jt),Ot*Math.sin(jt)]}}function ze(Ze,rt,pt){return"A"+Ze+","+Ze+" 0 "+ +(pt>zt)+",1 "+rt}function qe(Ze,rt,pt,vt){return"Q 0,0 "+vt}return me.radius=function(Ze){return arguments.length?(Q=zn(Ze),me):Q},me.source=function(Ze){return arguments.length?(C=zn(Ze),me):C},me.target=function(Ze){return arguments.length?(q=zn(Ze),me):q},me.startAngle=function(Ze){return arguments.length?(ne=zn(Ze),me):ne},me.endAngle=function(Ze){return arguments.length?(he=zn(Ze),me):he},me},i.svg.diagonal=function(){var C=jo,q=Us,Q=rl;function ne(he,me){var Pe=C.call(this,he,me),ze=q.call(this,he,me),qe=(Pe.y+ze.y)/2,Ze=[Pe,{x:Pe.x,y:qe},{x:ze.x,y:qe},ze];return"M"+(Ze=Ze.map(Q))[0]+"C"+Ze[1]+" "+Ze[2]+" "+Ze[3]}return ne.source=function(he){return arguments.length?(C=zn(he),ne):C},ne.target=function(he){return arguments.length?(q=zn(he),ne):q},ne.projection=function(he){return arguments.length?(Q=he,ne):Q},ne},i.svg.diagonal.radial=function(){var C=i.svg.diagonal(),q=rl,Q=C.projection;return C.projection=function(ne){return arguments.length?Q(function(he){return function(){var me=he.apply(this,arguments),Pe=me[0],ze=me[1]-Xe;return[Pe*Math.cos(ze),Pe*Math.sin(ze)]}}(q=ne)):q},C},i.svg.symbol=function(){var C=Lo,q=il;function Q(ne,he){return(Vs.get(C.call(this,ne,he))||Ei)(q.call(this,ne,he))}return Q.type=function(ne){return arguments.length?(C=zn(ne),Q):C},Q.size=function(ne){return arguments.length?(q=zn(ne),Q):q},Q};var Vs=i.map({circle:Ei,cross:function(C){var q=Math.sqrt(C/5)/2;return"M"+-3*q+","+-q+"H"+-q+"V"+-3*q+"H"+q+"V"+-q+"H"+3*q+"V"+q+"H"+q+"V"+3*q+"H"+-q+"V"+q+"H"+-3*q+"Z"},diamond:function(C){var q=Math.sqrt(C/(2*Hr)),Q=q*Hr;return"M0,"+-q+"L"+Q+",0 0,"+q+" "+-Q+",0Z"},square:function(C){var q=Math.sqrt(C)/2;return"M"+-q+","+-q+"L"+q+","+-q+" "+q+","+q+" "+-q+","+q+"Z"},"triangle-down":function(C){var q=Math.sqrt(C/Dr),Q=q*Dr/2;return"M0,"+Q+"L"+q+","+-Q+" "+-q+","+-Q+"Z"},"triangle-up":function(C){var q=Math.sqrt(C/Dr),Q=q*Dr/2;return"M0,"+-Q+"L"+q+","+Q+" "+-q+","+Q+"Z"}});i.svg.symbolTypes=Vs.keys();var Dr=Math.sqrt(3),Hr=Math.tan(30*Ke);ge.transition=function(C){for(var q,Q,ne=na||++Du,he=Ri(C),me=[],Pe=Vo||{time:Date.now(),ease:Do,delay:0,duration:250},ze=-1,qe=this.length;++ze<qe;){me.push(q=[]);for(var Ze=this[ze],rt=-1,pt=Ze.length;++rt<pt;)(Q=Ze[rt])&&Ka(Q,rt,he,ne,Pe),q.push(Q)}return es(me,he,ne)},ge.interrupt=function(C){return this.each(C==null?ao:Uo(Ri(C)))};var ao=Uo(Ri());function Uo(C){return function(){var q,Q,ne;(q=this[C])&&(ne=q[Q=q.active])&&(ne.timer.c=null,ne.timer.t=NaN,--q.count?delete q[Q]:delete this[C],q.active+=.5,ne.event&&ne.event.interrupt.call(this,this.__data__,ne.index))}}function es(C,q,Q){return ee(C,mi),C.namespace=q,C.id=Q,C}var na,Vo,mi=[],Du=0;function oo(C,q,Q,ne){var he=C.id,me=C.namespace;return Me(C,typeof Q=="function"?function(Pe,ze,qe){Pe[me][he].tween.set(q,ne(Q.call(Pe,Pe.__data__,ze,qe)))}:(Q=ne(Q),function(Pe){Pe[me][he].tween.set(q,Q)}))}function _i(C){return C==null&&(C=""),function(){this.textContent=C}}function Ri(C){return C==null?"__transition__":"__transition_"+C+"__"}function Ka(C,q,Q,ne,he){var me,Pe,ze,qe,Ze,rt=C[Q]||(C[Q]={active:0,count:0}),pt=rt[ne];function vt(Ot){var Et=rt.active,jt=rt[Et];for(var It in jt&&(jt.timer.c=null,jt.timer.t=NaN,--rt.count,delete rt[Et],jt.event&&jt.event.interrupt.call(C,C.__data__,jt.index)),rt)if(+It<ne){var Jt=rt[It];Jt.timer.c=null,Jt.timer.t=NaN,--rt.count,delete rt[It]}Pe.c=kt,tn(function(){return Pe.c&&kt(Ot||1)&&(Pe.c=null,Pe.t=NaN),1},0,me),rt.active=ne,pt.event&&pt.event.start.call(C,C.__data__,q),Ze=[],pt.tween.forEach(function(Gt,Ht){(Ht=Ht.call(C,C.__data__,q))&&Ze.push(Ht)}),qe=pt.ease,ze=pt.duration}function kt(Ot){for(var Et=Ot/ze,jt=qe(Et),It=Ze.length;It>0;)Ze[--It].call(C,jt);if(Et>=1)return pt.event&&pt.event.end.call(C,C.__data__,q),--rt.count?delete rt[ne]:delete C[Q],1}pt||(me=he.time,Pe=tn(function(Ot){var Et=pt.delay;if(Pe.t=Et+me,Et<=Ot)return vt(Ot-Et);Pe.c=vt},0,me),pt=rt[ne]={tween:new y,time:me,timer:Pe,delay:he.delay,duration:he.duration,ease:he.ease,index:q},he=null,++rt.count)}mi.call=ge.call,mi.empty=ge.empty,mi.node=ge.node,mi.size=ge.size,i.transition=function(C,q){return C&&C.transition?na?C.transition(q):C:i.selection().transition(C)},i.transition.prototype=mi,mi.select=function(C){var q,Q,ne,he=this.id,me=this.namespace,Pe=[];C=ve(C);for(var ze=-1,qe=this.length;++ze<qe;){Pe.push(q=[]);for(var Ze=this[ze],rt=-1,pt=Ze.length;++rt<pt;)(ne=Ze[rt])&&(Q=C.call(ne,ne.__data__,rt,ze))?("__data__"in ne&&(Q.__data__=ne.__data__),Ka(Q,rt,me,he,ne[me][he]),q.push(Q)):q.push(null)}return es(Pe,me,he)},mi.selectAll=function(C){var q,Q,ne,he,me,Pe=this.id,ze=this.namespace,qe=[];C=xe(C);for(var Ze=-1,rt=this.length;++Ze<rt;)for(var pt=this[Ze],vt=-1,kt=pt.length;++vt<kt;)if(ne=pt[vt]){me=ne[ze][Pe],Q=C.call(ne,ne.__data__,vt,Ze),qe.push(q=[]);for(var Ot=-1,Et=Q.length;++Ot<Et;)(he=Q[Ot])&&Ka(he,Ot,ze,Pe,me),q.push(he)}return es(qe,ze,Pe)},mi.filter=function(C){var q,Q,ne=[];typeof C!="function"&&(C=pe(C));for(var he=0,me=this.length;he<me;he++){ne.push(q=[]);for(var Pe,ze=0,qe=(Pe=this[he]).length;ze<qe;ze++)(Q=Pe[ze])&&C.call(Q,Q.__data__,ze,he)&&q.push(Q)}return es(ne,this.namespace,this.id)},mi.tween=function(C,q){var Q=this.id,ne=this.namespace;return arguments.length<2?this.node()[ne][Q].tween.get(C):Me(this,q==null?function(he){he[ne][Q].tween.remove(C)}:function(he){he[ne][Q].tween.set(C,q)})},mi.attr=function(C,q){if(arguments.length<2){for(q in C)this.attr(q,C[q]);return this}var Q=C=="transform"?Cu:Yo,ne=i.ns.qualify(C);function he(){this.removeAttribute(ne)}function me(){this.removeAttributeNS(ne.space,ne.local)}return oo(this,"attr."+C,q,ne.local?function(Pe){return Pe==null?me:(Pe+="",function(){var ze,qe=this.getAttributeNS(ne.space,ne.local);return qe!==Pe&&(ze=Q(qe,Pe),function(Ze){this.setAttributeNS(ne.space,ne.local,ze(Ze))})})}:function(Pe){return Pe==null?he:(Pe+="",function(){var ze,qe=this.getAttribute(ne);return qe!==Pe&&(ze=Q(qe,Pe),function(Ze){this.setAttribute(ne,ze(Ze))})})})},mi.attrTween=function(C,q){var Q=i.ns.qualify(C);return this.tween("attr."+C,Q.local?function(ne,he){var me=q.call(this,ne,he,this.getAttributeNS(Q.space,Q.local));return me&&function(Pe){this.setAttributeNS(Q.space,Q.local,me(Pe))}}:function(ne,he){var me=q.call(this,ne,he,this.getAttribute(Q));return me&&function(Pe){this.setAttribute(Q,me(Pe))}})},mi.style=function(C,q,Q){var ne=arguments.length;if(ne<3){if(typeof C!="string"){for(Q in ne<2&&(q=""),C)this.style(Q,C[Q],q);return this}Q=""}function he(){this.style.removeProperty(C)}return oo(this,"style."+C,q,function(me){return me==null?he:(me+="",function(){var Pe,ze=t(this).getComputedStyle(this,null).getPropertyValue(C);return ze!==me&&(Pe=Yo(ze,me),function(qe){this.style.setProperty(C,Pe(qe),Q)})})})},mi.styleTween=function(C,q,Q){return arguments.length<3&&(Q=""),this.tween("style."+C,function(ne,he){var me=q.call(this,ne,he,t(this).getComputedStyle(this,null).getPropertyValue(C));return me&&function(Pe){this.style.setProperty(C,me(Pe),Q)}})},mi.text=function(C){return oo(this,"text",C,_i)},mi.remove=function(){var C=this.namespace;return this.each("end.transition",function(){var q;this[C].count<2&&(q=this.parentNode)&&q.removeChild(this)})},mi.ease=function(C){var q=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][q].ease:(typeof C!="function"&&(C=i.ease.apply(i,arguments)),Me(this,function(ne){ne[Q][q].ease=C}))},mi.delay=function(C){var q=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][q].delay:Me(this,typeof C=="function"?function(ne,he,me){ne[Q][q].delay=+C.call(ne,ne.__data__,he,me)}:(C=+C,function(ne){ne[Q][q].delay=C}))},mi.duration=function(C){var q=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][q].duration:Me(this,typeof C=="function"?function(ne,he,me){ne[Q][q].duration=Math.max(1,C.call(ne,ne.__data__,he,me))}:(C=Math.max(1,C),function(ne){ne[Q][q].duration=C}))},mi.each=function(C,q){var Q=this.id,ne=this.namespace;if(arguments.length<2){var he=Vo,me=na;try{na=Q,Me(this,function(Pe,ze,qe){Vo=Pe[ne][Q],C.call(Pe,Pe.__data__,ze,qe)})}finally{Vo=he,na=me}}else Me(this,function(Pe){var ze=Pe[ne][Q];(ze.event||(ze.event=i.dispatch("start","end","interrupt"))).on(C,q)});return this},mi.transition=function(){for(var C,q,Q,ne=this.id,he=++Du,me=this.namespace,Pe=[],ze=0,qe=this.length;ze<qe;ze++){Pe.push(C=[]);for(var Ze,rt=0,pt=(Ze=this[ze]).length;rt<pt;rt++)(q=Ze[rt])&&Ka(q,rt,me,he,{time:(Q=q[me][ne]).time,ease:Q.ease,delay:Q.delay+Q.duration,duration:Q.duration}),C.push(q)}return es(Pe,me,he)},i.svg.axis=function(){var C,q=i.scale.linear(),Q=bs,ne=6,he=6,me=3,Pe=[10],ze=null;function qe(Ze){Ze.each(function(){var rt,pt=i.select(this),vt=this.__chart__||q,kt=this.__chart__=q.copy(),Ot=ze??(kt.ticks?kt.ticks.apply(kt,Pe):kt.domain()),Et=C??(kt.tickFormat?kt.tickFormat.apply(kt,Pe):R),jt=pt.selectAll(".tick").data(Ot,kt),It=jt.enter().insert("g",".domain").attr("class","tick").style("opacity",st),Jt=i.transition(jt.exit()).style("opacity",st).remove(),Gt=i.transition(jt.order()).style("opacity",1),Ht=Math.max(ne,0)+me,mn=wl(kt),yn=pt.selectAll(".domain").data([0]),In=(yn.enter().append("path").attr("class","domain"),i.transition(yn));It.append("line"),It.append("text");var Rn,Yn,er,dr,Xn=It.select("line"),cr=Gt.select("line"),Tr=jt.select("text").text(Et),Rr=It.select("text"),$n=Gt.select("text"),ur=Q==="top"||Q==="left"?-1:1;if(Q==="bottom"||Q==="top"?(rt=Qe,Rn="x",er="y",Yn="x2",dr="y2",Tr.attr("dy",ur<0?"0em":".71em").style("text-anchor","middle"),In.attr("d","M"+mn[0]+","+ur*he+"V0H"+mn[1]+"V"+ur*he)):(rt=nt,Rn="y",er="x",Yn="y2",dr="x2",Tr.attr("dy",".32em").style("text-anchor",ur<0?"end":"start"),In.attr("d","M"+ur*he+","+mn[0]+"H0V"+mn[1]+"H"+ur*he)),Xn.attr(dr,ur*ne),Rr.attr(er,ur*Ht),cr.attr(Yn,0).attr(dr,ur*ne),$n.attr(Rn,0).attr(er,ur*Ht),kt.rangeBand){var Sr=kt,gr=Sr.rangeBand()/2;vt=kt=function(Pr){return Sr(Pr)+gr}}else vt.rangeBand?vt=kt:Jt.call(rt,kt,vt);It.call(rt,vt,kt),Gt.call(rt,kt,kt)})}return qe.scale=function(Ze){return arguments.length?(q=Ze,qe):q},qe.orient=function(Ze){return arguments.length?(Q=Ze in cu?Ze+"":bs,qe):Q},qe.ticks=function(){return arguments.length?(Pe=v(arguments),qe):Pe},qe.tickValues=function(Ze){return arguments.length?(ze=Ze,qe):ze},qe.tickFormat=function(Ze){return arguments.length?(C=Ze,qe):C},qe.tickSize=function(Ze){var rt=arguments.length;return rt?(ne=+Ze,he=+arguments[rt-1],qe):ne},qe.innerTickSize=function(Ze){return arguments.length?(ne=+Ze,qe):ne},qe.outerTickSize=function(Ze){return arguments.length?(he=+Ze,qe):he},qe.tickPadding=function(Ze){return arguments.length?(me=+Ze,qe):me},qe.tickSubdivide=function(){return arguments.length&&qe},qe};var bs="bottom",cu={top:1,right:1,bottom:1,left:1};function Qe(C,q,Q){C.attr("transform",function(ne){var he=q(ne);return"translate("+(isFinite(he)?he:Q(ne))+",0)"})}function nt(C,q,Q){C.attr("transform",function(ne){var he=q(ne);return"translate(0,"+(isFinite(he)?he:Q(ne))+")"})}i.svg.brush=function(){var C,q,Q=X(rt,"brushstart","brush","brushend"),ne=null,he=null,me=[0,0],Pe=[0,0],ze=!0,qe=!0,Ze=B[0];function rt(Et){Et.each(function(){var jt=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ot).on("touchstart.brush",Ot),It=jt.selectAll(".background").data([0]);It.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),jt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Jt=jt.selectAll(".resize").data(Ze,R);Jt.exit().remove(),Jt.enter().append("g").attr("class",function(yn){return"resize "+yn}).style("cursor",function(yn){return ut[yn]}).append("rect").attr("x",function(yn){return/[ew]$/.test(yn)?-3:null}).attr("y",function(yn){return/^[ns]/.test(yn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Jt.style("display",rt.empty()?"none":null);var Gt,Ht=i.transition(jt),mn=i.transition(It);ne&&(Gt=wl(ne),mn.attr("x",Gt[0]).attr("width",Gt[1]-Gt[0]),vt(Ht)),he&&(Gt=wl(he),mn.attr("y",Gt[0]).attr("height",Gt[1]-Gt[0]),kt(Ht)),pt(Ht)})}function pt(Et){Et.selectAll(".resize").attr("transform",function(jt){return"translate("+me[+/e$/.test(jt)]+","+Pe[+/^s/.test(jt)]+")"})}function vt(Et){Et.select(".extent").attr("x",me[0]),Et.selectAll(".extent,.n>rect,.s>rect").attr("width",me[1]-me[0])}function kt(Et){Et.select(".extent").attr("y",Pe[0]),Et.selectAll(".extent,.e>rect,.w>rect").attr("height",Pe[1]-Pe[0])}function Ot(){var Et,jt,It=this,Jt=i.select(i.event.target),Gt=Q.of(It,arguments),Ht=i.select(It),mn=Jt.datum(),yn=!/^(n|s)$/.test(mn)&&ne,In=!/^(e|w)$/.test(mn)&&he,Rn=Jt.classed("extent"),Yn=mt(It),er=i.mouse(It),dr=i.select(t(It)).on("keydown.brush",function(){i.event.keyCode==32&&(Rn||(Et=null,er[0]-=me[1],er[1]-=Pe[1],Rn=2),$())}).on("keyup.brush",function(){i.event.keyCode==32&&Rn==2&&(er[0]+=me[1],er[1]+=Pe[1],Rn=0,$())});if(i.event.changedTouches?dr.on("touchmove.brush",Tr).on("touchend.brush",$n):dr.on("mousemove.brush",Tr).on("mouseup.brush",$n),Ht.interrupt().selectAll("*").interrupt(),Rn)er[0]=me[0]-er[0],er[1]=Pe[0]-er[1];else if(mn){var Xn=+/w$/.test(mn),cr=+/^n/.test(mn);jt=[me[1-Xn]-er[0],Pe[1-cr]-er[1]],er[0]=me[Xn],er[1]=Pe[cr]}else i.event.altKey&&(Et=er.slice());function Tr(){var ur=i.mouse(It),Sr=!1;jt&&(ur[0]+=jt[0],ur[1]+=jt[1]),Rn||(i.event.altKey?(Et||(Et=[(me[0]+me[1])/2,(Pe[0]+Pe[1])/2]),er[0]=me[+(ur[0]<Et[0])],er[1]=Pe[+(ur[1]<Et[1])]):Et=null),yn&&Rr(ur,ne,0)&&(vt(Ht),Sr=!0),In&&Rr(ur,he,1)&&(kt(Ht),Sr=!0),Sr&&(pt(Ht),Gt({type:"brush",mode:Rn?"move":"resize"}))}function Rr(ur,Sr,gr){var Pr,jr,Xr=wl(Sr),Kr=Xr[0],ni=Xr[1],ai=er[gr],Li=gr?Pe:me,Ki=Li[1]-Li[0];if(Rn&&(Kr-=ai,ni-=Ki+ai),Pr=(gr?qe:ze)?Math.max(Kr,Math.min(ni,ur[gr])):ur[gr],Rn?jr=(Pr+=ai)+Ki:(Et&&(ai=Math.max(Kr,Math.min(ni,2*Et[gr]-Pr))),ai<Pr?(jr=Pr,Pr=ai):jr=ai),Li[0]!=Pr||Li[1]!=jr)return gr?q=null:C=null,Li[0]=Pr,Li[1]=jr,!0}function $n(){Tr(),Ht.style("pointer-events","all").selectAll(".resize").style("display",rt.empty()?"none":null),i.select("body").style("cursor",null),dr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Yn(),Gt({type:"brushend"})}Ht.style("pointer-events","none").selectAll(".resize").style("display",null),i.select("body").style("cursor",Jt.style("cursor")),Gt({type:"brushstart"}),Tr()}return rt.event=function(Et){Et.each(function(){var jt=Q.of(this,arguments),It={x:me,y:Pe,i:C,j:q},Jt=this.__chart__||It;this.__chart__=It,na?i.select(this).transition().each("start.brush",function(){C=Jt.i,q=Jt.j,me=Jt.x,Pe=Jt.y,jt({type:"brushstart"})}).tween("brush:brush",function(){var Gt=as(me,It.x),Ht=as(Pe,It.y);return C=q=null,function(mn){me=It.x=Gt(mn),Pe=It.y=Ht(mn),jt({type:"brush",mode:"resize"})}}).each("end.brush",function(){C=It.i,q=It.j,jt({type:"brush",mode:"resize"}),jt({type:"brushend"})}):(jt({type:"brushstart"}),jt({type:"brush",mode:"resize"}),jt({type:"brushend"}))})},rt.x=function(Et){return arguments.length?(Ze=B[!(ne=Et)<<1|!he],rt):ne},rt.y=function(Et){return arguments.length?(Ze=B[!ne<<1|!(he=Et)],rt):he},rt.clamp=function(Et){return arguments.length?(ne&&he?(ze=!!Et[0],qe=!!Et[1]):ne?ze=!!Et:he&&(qe=!!Et),rt):ne&&he?[ze,qe]:ne?ze:he?qe:null},rt.extent=function(Et){var jt,It,Jt,Gt,Ht;return arguments.length?(ne&&(jt=Et[0],It=Et[1],he&&(jt=jt[0],It=It[0]),C=[jt,It],ne.invert&&(jt=ne(jt),It=ne(It)),It<jt&&(Ht=jt,jt=It,It=Ht),jt==me[0]&&It==me[1]||(me=[jt,It])),he&&(Jt=Et[0],Gt=Et[1],ne&&(Jt=Jt[1],Gt=Gt[1]),q=[Jt,Gt],he.invert&&(Jt=he(Jt),Gt=he(Gt)),Gt<Jt&&(Ht=Jt,Jt=Gt,Gt=Ht),Jt==Pe[0]&&Gt==Pe[1]||(Pe=[Jt,Gt])),rt):(ne&&(C?(jt=C[0],It=C[1]):(jt=me[0],It=me[1],ne.invert&&(jt=ne.invert(jt),It=ne.invert(It)),It<jt&&(Ht=jt,jt=It,It=Ht))),he&&(q?(Jt=q[0],Gt=q[1]):(Jt=Pe[0],Gt=Pe[1],he.invert&&(Jt=he.invert(Jt),Gt=he.invert(Gt)),Gt<Jt&&(Ht=Jt,Jt=Gt,Gt=Ht))),ne&&he?[[jt,Jt],[It,Gt]]:ne?[jt,It]:he&&[Jt,Gt])},rt.clear=function(){return rt.empty()||(me=[0,0],Pe=[0,0],C=q=null),rt},rt.empty=function(){return!!ne&&me[0]==me[1]||!!he&&Pe[0]==Pe[1]},i.rebind(rt,Q,"on")};var ut={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},B=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function G(C){return JSON.parse(C.responseText)}function Y(C){var q=h.createRange();return q.selectNode(h.body),q.createContextualFragment(C.responseText)}i.text=qn(function(C){return C.responseText}),i.json=function(C,q){return sr(C,"application/json",G,q)},i.html=function(C,q){return sr(C,"text/html",Y,q)},i.xml=qn(function(C){return C.responseXML}),(w=typeof(T=i)=="function"?T.call(L,e,L,N):T)===void 0||(N.exports=w)}).apply(self)},97433:function(N){N.exports=function(){var L,e,T;function w(i,_){if(L)if(e){var v="var sharedChunk = {}; ("+L+")(sharedChunk); ("+e+")(sharedChunk);",h={};L(h),T=_(h),typeof window<"u"&&(T.workerUrl=window.URL.createObjectURL(new Blob([v],{type:"text/javascript"})))}else e=_;else L=_}return w(0,function(i){function _(A,D){return A(D={exports:{}},D.exports),D.exports}var v="1.13.4",h=s;function s(A,D,W,ce){this.cx=3*A,this.bx=3*(W-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*D,this.by=3*(ce-D)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=ce,this.p2x=W,this.p2y=ce}s.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},s.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},s.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},s.prototype.solveCurveX=function(A,D){var W,ce,Se,Ie,Ve;for(D===void 0&&(D=1e-6),Se=A,Ve=0;Ve<8;Ve++){if(Ie=this.sampleCurveX(Se)-A,Math.abs(Ie)<D)return Se;var tt=this.sampleCurveDerivativeX(Se);if(Math.abs(tt)<1e-6)break;Se-=Ie/tt}if((Se=A)<(W=0))return W;if(Se>(ce=1))return ce;for(;W<ce;){if(Ie=this.sampleCurveX(Se),Math.abs(Ie-A)<D)return Se;A>Ie?W=Se:ce=Se,Se=.5*(ce-W)+W}return Se},s.prototype.solve=function(A,D){return this.sampleCurveY(this.solveCurveX(A,D))};var t=a;function a(A,D){this.x=A,this.y=D}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,D){return this.clone()._rotateAround(A,D)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var D=A.x-this.x,W=A.y-this.y;return D*D+W*W},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,D){return Math.atan2(this.x*D-this.y*A,this.x*A+this.y*D)},_matMult:function(A){var D=A[0]*this.x+A[1]*this.y,W=A[2]*this.x+A[3]*this.y;return this.x=D,this.y=W,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var D=Math.cos(A),W=Math.sin(A),ce=D*this.x-W*this.y,Se=W*this.x+D*this.y;return this.x=ce,this.y=Se,this},_rotateAround:function(A,D){var W=Math.cos(A),ce=Math.sin(A),Se=D.x+W*(this.x-D.x)-ce*(this.y-D.y),Ie=D.y+ce*(this.x-D.x)+W*(this.y-D.y);return this.x=Se,this.y=Ie,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(A){return A instanceof a?A:Array.isArray(A)?new a(A[0],A[1]):A};var n=typeof self<"u"?self:{},r=Math.pow(2,53)-1;function l(A,D,W,ce){var Se=new h(A,D,W,ce);return function(Ie){return Se.solve(Ie)}}var o=l(.25,.1,.25,1);function u(A,D,W){return Math.min(W,Math.max(D,A))}function p(A,D,W){var ce=W-D,Se=((A-D)%ce+ce)%ce+D;return Se===D?W:Se}function c(A){for(var D=[],W=arguments.length-1;W-- >0;)D[W]=arguments[W+1];for(var ce=0,Se=D;ce<Se.length;ce+=1){var Ie=Se[ce];for(var Ve in Ie)A[Ve]=Ie[Ve]}return A}var b=1;function g(){return b++}function d(){return function A(D){return D?(D^16*Math.random()>>D/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function m(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function x(A,D){A.forEach(function(W){D[W]&&(D[W]=D[W].bind(D))})}function y(A,D){return A.indexOf(D,A.length-D.length)!==-1}function k(A,D,W){var ce={};for(var Se in A)ce[Se]=D.call(W||this,A[Se],Se,A);return ce}function f(A,D,W){var ce={};for(var Se in A)D.call(W||this,A[Se],Se,A)&&(ce[Se]=A[Se]);return ce}function S(A){return Array.isArray(A)?A.map(S):typeof A=="object"&&A?k(A,S):A}var M={};function E(A){M[A]||(typeof console<"u"&&console.warn(A),M[A]=!0)}function O(A,D,W){return(W.y-A.y)*(D.x-A.x)>(D.y-A.y)*(W.x-A.x)}function P(A){for(var D=0,W=0,ce=A.length,Se=ce-1,Ie=void 0,Ve=void 0;W<ce;Se=W++)Ie=A[W],D+=((Ve=A[Se]).x-Ie.x)*(Ie.y+Ve.y);return D}function I(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function z(A){var D={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ce,Se,Ie,Ve){var tt=Ie||Ve;return D[Se]=!tt||tt.toLowerCase(),""}),D["max-age"]){var W=parseInt(D["max-age"],10);isNaN(W)?delete D["max-age"]:D["max-age"]=W}return D}var U=null;function R(A){if(U==null){var D=A.navigator?A.navigator.userAgent:null;U=!!A.safari||!(!D||!(/\b(iPad|iPhone|iPod)\b/.test(D)||D.match("Safari")&&!D.match("Chrome")))}return U}function j(A){try{var D=n[A];return D.setItem("_mapbox_test_",1),D.removeItem("_mapbox_test_"),!0}catch{return!1}}var Z,F,V,H,te=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),$=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,J=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,X={now:te,frame:function(A){var D=$(A);return{cancel:function(){return J(D)}}},getImageData:function(A,D){D===void 0&&(D=0);var W=n.document.createElement("canvas"),ce=W.getContext("2d");if(!ce)throw new Error("failed to create canvas 2d context");return W.width=A.width,W.height=A.height,ce.drawImage(A,0,0,A.width,A.height),ce.getImageData(-D,-D,A.width+2*D,A.height+2*D)},resolveURL:function(A){return Z||(Z=n.document.createElement("a")),Z.href=A,Z.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(F==null&&(F=n.matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}},K={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ee={supported:!1,testSupport:function(A){!ie&&H&&(ae?oe(A):V=A)}},ie=!1,ae=!1;function oe(A){var D=A.createTexture();A.bindTexture(A.TEXTURE_2D,D);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,H),A.isContextLost())return;ee.supported=!0}catch{}A.deleteTexture(D),ie=!0}n.document&&((H=n.document.createElement("img")).onload=function(){V&&oe(V),V=null,ae=!0},H.onerror=function(){ie=!0,V=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var fe="01",ge=function(A,D){this._transformRequestFn=A,this._customAccessToken=D,this._createSkuToken()};function ve(A){return A.indexOf("mapbox:")===0}ge.prototype._createSkuToken=function(){var A=function(){for(var D="",W=0;W<10;W++)D+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",fe,D].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},ge.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ge.prototype.transformRequest=function(A,D){return this._transformRequestFn&&this._transformRequestFn(A,D)||{url:A}},ge.prototype.normalizeStyleURL=function(A,D){if(!ve(A))return A;var W=Ce(A);return W.path="/styles/v1"+W.path,this._makeAPIURL(W,this._customAccessToken||D)},ge.prototype.normalizeGlyphsURL=function(A,D){if(!ve(A))return A;var W=Ce(A);return W.path="/fonts/v1"+W.path,this._makeAPIURL(W,this._customAccessToken||D)},ge.prototype.normalizeSourceURL=function(A,D){if(!ve(A))return A;var W=Ce(A);return W.path="/v4/"+W.authority+".json",W.params.push("secure"),this._makeAPIURL(W,this._customAccessToken||D)},ge.prototype.normalizeSpriteURL=function(A,D,W,ce){var Se=Ce(A);return ve(A)?(Se.path="/styles/v1"+Se.path+"/sprite"+D+W,this._makeAPIURL(Se,this._customAccessToken||ce)):(Se.path+=""+D+W,ke(Se))},ge.prototype.normalizeTileURL=function(A,D){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!ve(A))return A;var W=Ce(A),ce=X.devicePixelRatio>=2||D===512?"@2x":"",Se=ee.supported?".webp":"$1";W.path=W.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+ce+Se),W.path=W.path.replace(/^.+\/v4\//,"/"),W.path="/v4"+W.path;var Ie=this._customAccessToken||function(Ve){for(var tt=0,ct=Ve;tt<ct.length;tt+=1){var wt=ct[tt].match(/^access_token=(.*)$/);if(wt)return wt[1]}return null}(W.params)||K.ACCESS_TOKEN;return K.REQUIRE_ACCESS_TOKEN&&Ie&&this._skuToken&&W.params.push("sku="+this._skuToken),this._makeAPIURL(W,Ie)},ge.prototype.canonicalizeTileURL=function(A,D){var W=Ce(A);if(!W.path.match(/(^\/v4\/)/)||!W.path.match(/\.[\w]+$/))return A;var ce="mapbox://tiles/";ce+=W.path.replace("/v4/","");var Se=W.params;return D&&(Se=Se.filter(function(Ie){return!Ie.match(/^access_token=/)})),Se.length&&(ce+="?"+Se.join("&")),ce},ge.prototype.canonicalizeTileset=function(A,D){for(var W=!!D&&ve(D),ce=[],Se=0,Ie=A.tiles||[];Se<Ie.length;Se+=1){var Ve=Ie[Se];_e(Ve)?ce.push(this.canonicalizeTileURL(Ve,W)):ce.push(Ve)}return ce},ge.prototype._makeAPIURL=function(A,D){var W="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ce=Ce(K.API_URL);if(A.protocol=ce.protocol,A.authority=ce.authority,A.protocol==="http"){var Se=A.params.indexOf("secure");Se>=0&&A.params.splice(Se,1)}if(ce.path!=="/"&&(A.path=""+ce.path+A.path),!K.REQUIRE_ACCESS_TOKEN)return ke(A);if(!(D=D||K.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+W);if(D[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+W);return A.params=A.params.filter(function(Ie){return Ie.indexOf("access_token")===-1}),A.params.push("access_token="+D),ke(A)};var xe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _e(A){return xe.test(A)}var ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ce(A){var D=A.match(ye);if(!D)throw new Error("Unable to parse URL object");return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}function ke(A){var D=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+D}var Te="mapbox.eventData";function le(A){if(!A)return null;var D,W=A.split(".");if(!W||W.length!==3)return null;try{return JSON.parse((D=W[1],decodeURIComponent(n.atob(D).split("").map(function(ce){return"%"+("00"+ce.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var ue=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ue.prototype.getStorageKey=function(A){var D,W,ce=le(K.ACCESS_TOKEN);return D=ce&&ce.u?(W=ce.u,n.btoa(encodeURIComponent(W).replace(/%([0-9A-F]{2})/g,function(Se,Ie){return String.fromCharCode(+("0x"+Ie))}))):K.ACCESS_TOKEN||"",A?Te+"."+A+":"+D:Te+":"+D},ue.prototype.fetchEventData=function(){var A=j("localStorage"),D=this.getStorageKey(),W=this.getStorageKey("uuid");if(A)try{var ce=n.localStorage.getItem(D);ce&&(this.eventData=JSON.parse(ce));var Se=n.localStorage.getItem(W);Se&&(this.anonId=Se)}catch{E("Unable to read from LocalStorage")}},ue.prototype.saveEventData=function(){var A=j("localStorage"),D=this.getStorageKey(),W=this.getStorageKey("uuid");if(A)try{n.localStorage.setItem(W,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(D,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},ue.prototype.processRequests=function(A){},ue.prototype.postEvent=function(A,D,W,ce){var Se=this;if(K.EVENTS_URL){var Ie=Ce(K.EVENTS_URL);Ie.params.push("access_token="+(ce||K.ACCESS_TOKEN||""));var Ve={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:fe,userId:this.anonId},tt=D?c(Ve,D):Ve,ct={url:ke(Ie),headers:{"Content-Type":"text/plain"},body:JSON.stringify([tt])};this.pendingRequest=Pt(ct,function(wt){Se.pendingRequest=null,W(wt),Se.saveEventData(),Se.processRequests(ce)})}},ue.prototype.queueRequest=function(A,D){this.queue.push(A),this.processRequests(D)};var de,Le,we=function(A){function D(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.postMapLoadEvent=function(W,ce,Se,Ie){this.skuToken=Se,(K.EVENTS_URL&&Ie||K.ACCESS_TOKEN&&Array.isArray(W)&&W.some(function(Ve){return ve(Ve)||_e(Ve)}))&&this.queueRequest({id:ce,timestamp:Date.now()},Ie)},D.prototype.processRequests=function(W){var ce=this;if(!this.pendingRequest&&this.queue.length!==0){var Se=this.queue.shift(),Ie=Se.id,Ve=Se.timestamp;Ie&&this.success[Ie]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=d()),this.postEvent(Ve,{skuToken:this.skuToken},function(tt){tt||Ie&&(ce.success[Ie]=!0)},W))}},D}(ue),Ee=function(A){function D(W){A.call(this,"appUserTurnstile"),this._customAccessToken=W}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.postTurnstileEvent=function(W,ce){K.EVENTS_URL&&K.ACCESS_TOKEN&&Array.isArray(W)&&W.some(function(Se){return ve(Se)||_e(Se)})&&this.queueRequest(Date.now(),ce)},D.prototype.processRequests=function(W){var ce=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Se=le(K.ACCESS_TOKEN),Ie=Se?Se.u:K.ACCESS_TOKEN,Ve=Ie!==this.eventData.tokenU;m(this.anonId)||(this.anonId=d(),Ve=!0);var tt=this.queue.shift();if(this.eventData.lastSuccess){var ct=new Date(this.eventData.lastSuccess),wt=new Date(tt),At=(tt-this.eventData.lastSuccess)/864e5;Ve=Ve||At>=1||At<-1||ct.getDate()!==wt.getDate()}else Ve=!0;if(!Ve)return this.processRequests();this.postEvent(tt,{"enabled.telemetry":!1},function(Nt){Nt||(ce.eventData.lastSuccess=tt,ce.eventData.tokenU=Ie)},W)}},D}(ue),Oe=new Ee,Fe=Oe.postTurnstileEvent.bind(Oe),pe=new we,be=pe.postMapLoadEvent.bind(pe),Me="mapbox-tiles",De=500,Ne=50,Be=42e4;function Ye(){n.caches&&!de&&(de=n.caches.open(Me))}function We(A,D,W){if(Ye(),de){var ce={status:D.status,statusText:D.statusText,headers:new n.Headers};D.headers.forEach(function(Ie,Ve){return ce.headers.set(Ve,Ie)});var Se=z(D.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&ce.headers.set("Expires",new Date(W+1e3*Se["max-age"]).toUTCString()),new Date(ce.headers.get("Expires")).getTime()-W<Be||function(Ie,Ve){if(Le===void 0)try{new Response(new ReadableStream),Le=!0}catch{Le=!1}Le?Ve(Ie.body):Ie.blob().then(Ve)}(D,function(Ie){var Ve=new n.Response(Ie,ce);Ye(),de&&de.then(function(tt){return tt.put(et(A.url),Ve)}).catch(function(tt){return E(tt.message)})}))}}function et(A){var D=A.indexOf("?");return D<0?A:A.slice(0,D)}function ft(A,D){if(Ye(),!de)return D(null);var W=et(A.url);de.then(function(ce){ce.match(W).then(function(Se){var Ie=function(Ve){if(!Ve)return!1;var tt=new Date(Ve.headers.get("Expires")||0),ct=z(Ve.headers.get("Cache-Control")||"");return tt>Date.now()&&!ct["no-cache"]}(Se);ce.delete(W),Ie&&ce.put(W,Se.clone()),D(null,Se,Ie)}).catch(D)}).catch(D)}var ht,mt=1/0;function Mt(){return ht==null&&(ht=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),ht}var _t={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(_t);var it=function(A){function D(W,ce,Se){ce===401&&_e(Se)&&(W+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,W),this.status=ce,this.url=Se,this.name=this.constructor.name,this.message=W}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},D}(Error),st=I()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href};function St(A,D){var W,ce=new n.AbortController,Se=new n.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:st(),signal:ce.signal}),Ie=!1,Ve=!1,tt=(W=Se.url).indexOf("sku=")>0&&_e(W);A.type==="json"&&Se.headers.set("Accept","application/json");var ct=function(At,Nt,Yt){if(!Ve){if(At&&At.message!=="SecurityError"&&E(At),Nt&&Yt)return wt(Nt);var Ut=Date.now();n.fetch(Se).then(function(sn){if(sn.ok){var un=tt?sn.clone():null;return wt(sn,un,Ut)}return D(new it(sn.statusText,sn.status,A.url))}).catch(function(sn){sn.code!==20&&D(new Error(sn.message))})}},wt=function(At,Nt,Yt){(A.type==="arrayBuffer"?At.arrayBuffer():A.type==="json"?At.json():At.text()).then(function(Ut){Ve||(Nt&&Yt&&We(Se,Nt,Yt),Ie=!0,D(null,Ut,At.headers.get("Cache-Control"),At.headers.get("Expires")))}).catch(function(Ut){Ve||D(new Error(Ut.message))})};return tt?ft(Se,ct):ct(null,null),{cancel:function(){Ve=!0,Ie||ce.abort()}}}var zt=function(A,D){if(W=A.url,!(/^file:/.test(W)||/^file:/.test(st())&&!/^\w+:/.test(W))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return St(A,D);if(I()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,D,void 0,!0)}var W;return function(ce,Se){var Ie=new n.XMLHttpRequest;for(var Ve in Ie.open(ce.method||"GET",ce.url,!0),ce.type==="arrayBuffer"&&(Ie.responseType="arraybuffer"),ce.headers)Ie.setRequestHeader(Ve,ce.headers[Ve]);return ce.type==="json"&&(Ie.responseType="text",Ie.setRequestHeader("Accept","application/json")),Ie.withCredentials=ce.credentials==="include",Ie.onerror=function(){Se(new Error(Ie.statusText))},Ie.onload=function(){if((Ie.status>=200&&Ie.status<300||Ie.status===0)&&Ie.response!==null){var tt=Ie.response;if(ce.type==="json")try{tt=JSON.parse(Ie.response)}catch(ct){return Se(ct)}Se(null,tt,Ie.getResponseHeader("Cache-Control"),Ie.getResponseHeader("Expires"))}else Se(new it(Ie.statusText,Ie.status,ce.url))},Ie.send(ce.body),{cancel:function(){return Ie.abort()}}}(A,D)},Ft=function(A,D){return zt(c(A,{type:"arrayBuffer"}),D)},Pt=function(A,D){return zt(c(A,{method:"POST"}),D)},Xe,Ke,He="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Xe=[],Ke=0;var Je=function(A,D){if(ee.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),Ke>=K.MAX_PARALLEL_IMAGE_REQUESTS){var W={requestParameters:A,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return Xe.push(W),W}Ke++;var ce=!1,Se=function(){if(!ce)for(ce=!0,Ke--;Xe.length&&Ke<K.MAX_PARALLEL_IMAGE_REQUESTS;){var Ve=Xe.shift(),tt=Ve.requestParameters,ct=Ve.callback;Ve.cancelled||(Ve.cancel=Je(tt,ct).cancel)}},Ie=Ft(A,function(Ve,tt,ct,wt){Se(),Ve?D(Ve):tt&&(Mt()?function(At,Nt){var Yt=new n.Blob([new Uint8Array(At)],{type:"image/png"});n.createImageBitmap(Yt).then(function(Ut){Nt(null,Ut)}).catch(function(Ut){Nt(new Error("Could not load image because of "+Ut.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(tt,D):function(At,Nt,Yt,Ut){var sn=new n.Image,un=n.URL;sn.onload=function(){Nt(null,sn),un.revokeObjectURL(sn.src),sn.onload=null,n.requestAnimationFrame(function(){sn.src=He})},sn.onerror=function(){return Nt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var En=new n.Blob([new Uint8Array(At)],{type:"image/png"});sn.cacheControl=Yt,sn.expires=Ut,sn.src=At.byteLength?un.createObjectURL(En):He}(tt,D,ct,wt))});return{cancel:function(){Ie.cancel(),Se()}}};function lt(A,D,W){W[A]&&W[A].indexOf(D)!==-1||(W[A]=W[A]||[],W[A].push(D))}function ot(A,D,W){if(W&&W[A]){var ce=W[A].indexOf(D);ce!==-1&&W[A].splice(ce,1)}}var je=function(A,D){D===void 0&&(D={}),c(this,D),this.type=A},Ue=function(A){function D(W,ce){ce===void 0&&(ce={}),A.call(this,"error",c({error:W},ce))}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(je),at=function(){};at.prototype.on=function(A,D){return this._listeners=this._listeners||{},lt(A,D,this._listeners),this},at.prototype.off=function(A,D){return ot(A,D,this._listeners),ot(A,D,this._oneTimeListeners),this},at.prototype.once=function(A,D){return this._oneTimeListeners=this._oneTimeListeners||{},lt(A,D,this._oneTimeListeners),this},at.prototype.fire=function(A,D){typeof A=="string"&&(A=new je(A,D||{}));var W=A.type;if(this.listens(W)){A.target=this;for(var ce=0,Se=this._listeners&&this._listeners[W]?this._listeners[W].slice():[];ce<Se.length;ce+=1)Se[ce].call(this,A);for(var Ie=0,Ve=this._oneTimeListeners&&this._oneTimeListeners[W]?this._oneTimeListeners[W].slice():[];Ie<Ve.length;Ie+=1){var tt=Ve[Ie];ot(W,tt,this._oneTimeListeners),tt.call(this,A)}var ct=this._eventedParent;ct&&(c(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ct.fire(A))}else A instanceof Ue&&console.error(A.error);return this},at.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},at.prototype.setEventedParent=function(A,D){return this._eventedParent=A,this._eventedParentData=D,this};var $e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},gt=function(A,D,W,ce){this.message=(A?A+": ":"")+W,ce&&(this.identifier=ce),D!=null&&D.__line__&&(this.line=D.__line__)};function yt(A){var D=A.key,W=A.value;return W?[new gt(D,W,"constants have been deprecated as of v8")]:[]}function xt(A){for(var D=[],W=arguments.length-1;W-- >0;)D[W]=arguments[W+1];for(var ce=0,Se=D;ce<Se.length;ce+=1){var Ie=Se[ce];for(var Ve in Ie)A[Ve]=Ie[Ve]}return A}function dt(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Lt(A){if(Array.isArray(A))return A.map(Lt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var D={};for(var W in A)D[W]=Lt(A[W]);return D}return dt(A)}var Tt=function(A){function D(W,ce){A.call(this,ce),this.message=ce,this.key=W}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(Error),bt=function(A,D){D===void 0&&(D=[]),this.parent=A,this.bindings={};for(var W=0,ce=D;W<ce.length;W+=1){var Se=ce[W],Ie=Se[0],Ve=Se[1];this.bindings[Ie]=Ve}};bt.prototype.concat=function(A){return new bt(this,A)},bt.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},bt.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var Ct={kind:"null"},Dt={kind:"number"},Bt={kind:"string"},Xt={kind:"boolean"},an={kind:"color"},Wt={kind:"object"},Vt={kind:"value"},on={kind:"collator"},Sn={kind:"formatted"},Ln={kind:"resolvedImage"};function fn(A,D){return{kind:"array",itemType:A,N:D}}function Zt(A){if(A.kind==="array"){var D=Zt(A.itemType);return typeof A.N=="number"?"array<"+D+", "+A.N+">":A.itemType.kind==="value"?"array":"array<"+D+">"}return A.kind}var ln=[Ct,Dt,Bt,Xt,an,Sn,Wt,fn(Vt),Ln];function nn(A,D){if(D.kind==="error")return null;if(A.kind==="array"){if(D.kind==="array"&&(D.N===0&&D.itemType.kind==="value"||!nn(A.itemType,D.itemType))&&(typeof A.N!="number"||A.N===D.N))return null}else{if(A.kind===D.kind)return null;if(A.kind==="value"){for(var W=0,ce=ln;W<ce.length;W+=1)if(!nn(ce[W],D))return null}}return"Expected "+Zt(A)+" but found "+Zt(D)+" instead."}function cn(A,D){return D.some(function(W){return W.kind===A.kind})}function kn(A,D){return D.some(function(W){return W==="null"?A===null:W==="array"?Array.isArray(A):W==="object"?A&&!Array.isArray(A)&&typeof A=="object":W===typeof A})}var An=_(function(A,D){var W={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ce(ct){return(ct=Math.round(ct))<0?0:ct>255?255:ct}function Se(ct){return ct<0?0:ct>1?1:ct}function Ie(ct){return ct[ct.length-1]==="%"?ce(parseFloat(ct)/100*255):ce(parseInt(ct))}function Ve(ct){return ct[ct.length-1]==="%"?Se(parseFloat(ct)/100):Se(parseFloat(ct))}function tt(ct,wt,At){return At<0?At+=1:At>1&&(At-=1),6*At<1?ct+(wt-ct)*At*6:2*At<1?wt:3*At<2?ct+(wt-ct)*(2/3-At)*6:ct}try{D.parseCSSColor=function(ct){var wt,At=ct.replace(/ /g,"").toLowerCase();if(At in W)return W[At].slice();if(At[0]==="#")return At.length===4?(wt=parseInt(At.substr(1),16))>=0&&wt<=4095?[(3840&wt)>>4|(3840&wt)>>8,240&wt|(240&wt)>>4,15&wt|(15&wt)<<4,1]:null:At.length===7&&(wt=parseInt(At.substr(1),16))>=0&&wt<=16777215?[(16711680&wt)>>16,(65280&wt)>>8,255&wt,1]:null;var Nt=At.indexOf("("),Yt=At.indexOf(")");if(Nt!==-1&&Yt+1===At.length){var Ut=At.substr(0,Nt),sn=At.substr(Nt+1,Yt-(Nt+1)).split(","),un=1;switch(Ut){case"rgba":if(sn.length!==4)return null;un=Ve(sn.pop());case"rgb":return sn.length!==3?null:[Ie(sn[0]),Ie(sn[1]),Ie(sn[2]),un];case"hsla":if(sn.length!==4)return null;un=Ve(sn.pop());case"hsl":if(sn.length!==3)return null;var En=(parseFloat(sn[0])%360+360)%360/360,Mn=Ve(sn[1]),Nn=Ve(sn[2]),jn=Nn<=.5?Nn*(Mn+1):Nn+Mn-Nn*Mn,Gn=2*Nn-jn;return[ce(255*tt(Gn,jn,En+1/3)),ce(255*tt(Gn,jn,En)),ce(255*tt(Gn,jn,En-1/3)),un];default:return null}}return null}}catch{}}),wn=An.parseCSSColor,Cn=function(A,D,W,ce){ce===void 0&&(ce=1),this.r=A,this.g=D,this.b=W,this.a=ce};Cn.parse=function(A){if(A){if(A instanceof Cn)return A;if(typeof A=="string"){var D=wn(A);if(D)return new Cn(D[0]/255*D[3],D[1]/255*D[3],D[2]/255*D[3],D[3])}}},Cn.prototype.toString=function(){var A=this.toArray(),D=A[0],W=A[1],ce=A[2],Se=A[3];return"rgba("+Math.round(D)+","+Math.round(W)+","+Math.round(ce)+","+Se+")"},Cn.prototype.toArray=function(){var A=this,D=A.r,W=A.g,ce=A.b,Se=A.a;return Se===0?[0,0,0,0]:[255*D/Se,255*W/Se,255*ce/Se,Se]},Cn.black=new Cn(0,0,0,1),Cn.white=new Cn(1,1,1,1),Cn.transparent=new Cn(0,0,0,0),Cn.red=new Cn(1,0,0,1);var _n=function(A,D,W){this.sensitivity=A?D?"variant":"case":D?"accent":"base",this.locale=W,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};_n.prototype.compare=function(A,D){return this.collator.compare(A,D)},_n.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var zn=function(A,D,W,ce,Se){this.text=A,this.image=D,this.scale=W,this.fontStack=ce,this.textColor=Se},qn=function(A){this.sections=A};qn.fromString=function(A){return new qn([new zn(A,null,null,null,null)])},qn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(A){return A.text.length!==0||A.image&&A.image.name.length!==0})},qn.factory=function(A){return A instanceof qn?A:qn.fromString(A)},qn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(A){return A.text}).join("")},qn.prototype.serialize=function(){for(var A=["format"],D=0,W=this.sections;D<W.length;D+=1){var ce=W[D];if(ce.image)A.push(["image",ce.image.name]);else{A.push(ce.text);var Se={};ce.fontStack&&(Se["text-font"]=["literal",ce.fontStack.split(",")]),ce.scale&&(Se["font-scale"]=ce.scale),ce.textColor&&(Se["text-color"]=["rgba"].concat(ce.textColor.toArray())),A.push(Se)}}return A};var sr=function(A){this.name=A.name,this.available=A.available};function pr(A,D,W,ce){return typeof A=="number"&&A>=0&&A<=255&&typeof D=="number"&&D>=0&&D<=255&&typeof W=="number"&&W>=0&&W<=255?ce===void 0||typeof ce=="number"&&ce>=0&&ce<=1?null:"Invalid rgba value ["+[A,D,W,ce].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ce=="number"?[A,D,W,ce]:[A,D,W]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ir(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof Cn||A instanceof _n||A instanceof qn||A instanceof sr)return!0;if(Array.isArray(A)){for(var D=0,W=A;D<W.length;D+=1)if(!ir(W[D]))return!1;return!0}if(typeof A=="object"){for(var ce in A)if(!ir(A[ce]))return!1;return!0}return!1}function Jn(A){if(A===null)return Ct;if(typeof A=="string")return Bt;if(typeof A=="boolean")return Xt;if(typeof A=="number")return Dt;if(A instanceof Cn)return an;if(A instanceof _n)return on;if(A instanceof qn)return Sn;if(A instanceof sr)return Ln;if(Array.isArray(A)){for(var D,W=A.length,ce=0,Se=A;ce<Se.length;ce+=1){var Ie=Jn(Se[ce]);if(D){if(D===Ie)continue;D=Vt;break}D=Ie}return fn(D||Vt,W)}return Wt}function mr(A){var D=typeof A;return A===null?"":D==="string"||D==="number"||D==="boolean"?String(A):A instanceof Cn||A instanceof qn||A instanceof sr?A.toString():JSON.stringify(A)}sr.prototype.toString=function(){return this.name},sr.fromString=function(A){return A?new sr({name:A,available:!1}):null},sr.prototype.serialize=function(){return["image",this.name]};var qt=function(A,D){this.type=A,this.value=D};qt.parse=function(A,D){if(A.length!==2)return D.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!ir(A[1]))return D.error("invalid value");var W=A[1],ce=Jn(W),Se=D.expectedType;return ce.kind!=="array"||ce.N!==0||!Se||Se.kind!=="array"||typeof Se.N=="number"&&Se.N!==0||(ce=Se),new qt(ce,W)},qt.prototype.evaluate=function(){return this.value},qt.prototype.eachChild=function(){},qt.prototype.outputDefined=function(){return!0},qt.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Cn?["rgba"].concat(this.value.toArray()):this.value instanceof qn?this.value.serialize():this.value};var tn=function(A){this.name="ExpressionEvaluationError",this.message=A};tn.prototype.toJSON=function(){return this.message};var dn={string:Bt,number:Dt,boolean:Xt,object:Wt},vn=function(A,D){this.type=A,this.args=D};vn.parse=function(A,D){if(A.length<2)return D.error("Expected at least one argument.");var W,ce=1,Se=A[0];if(Se==="array"){var Ie,Ve;if(A.length>2){var tt=A[1];if(typeof tt!="string"||!(tt in dn)||tt==="object")return D.error('The item type argument of "array" must be one of string, number, boolean',1);Ie=dn[tt],ce++}else Ie=Vt;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return D.error('The length argument to "array" must be a positive integer literal',2);Ve=A[2],ce++}W=fn(Ie,Ve)}else W=dn[Se];for(var ct=[];ce<A.length;ce++){var wt=D.parse(A[ce],ce,Vt);if(!wt)return null;ct.push(wt)}return new vn(W,ct)},vn.prototype.evaluate=function(A){for(var D=0;D<this.args.length;D++){var W=this.args[D].evaluate(A);if(!nn(this.type,Jn(W)))return W;if(D===this.args.length-1)throw new tn("Expected value to be of type "+Zt(this.type)+", but found "+Zt(Jn(W))+" instead.")}return null},vn.prototype.eachChild=function(A){this.args.forEach(A)},vn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},vn.prototype.serialize=function(){var A=this.type,D=[A.kind];if(A.kind==="array"){var W=A.itemType;if(W.kind==="string"||W.kind==="number"||W.kind==="boolean"){D.push(W.kind);var ce=A.N;(typeof ce=="number"||this.args.length>1)&&D.push(ce)}}return D.concat(this.args.map(function(Se){return Se.serialize()}))};var On=function(A){this.type=Sn,this.sections=A};On.parse=function(A,D){if(A.length<2)return D.error("Expected at least one argument.");var W=A[1];if(!Array.isArray(W)&&typeof W=="object")return D.error("First argument must be an image or text section.");for(var ce=[],Se=!1,Ie=1;Ie<=A.length-1;++Ie){var Ve=A[Ie];if(Se&&typeof Ve=="object"&&!Array.isArray(Ve)){Se=!1;var tt=null;if(Ve["font-scale"]&&!(tt=D.parse(Ve["font-scale"],1,Dt)))return null;var ct=null;if(Ve["text-font"]&&!(ct=D.parse(Ve["text-font"],1,fn(Bt))))return null;var wt=null;if(Ve["text-color"]&&!(wt=D.parse(Ve["text-color"],1,an)))return null;var At=ce[ce.length-1];At.scale=tt,At.font=ct,At.textColor=wt}else{var Nt=D.parse(A[Ie],1,Vt);if(!Nt)return null;var Yt=Nt.type.kind;if(Yt!=="string"&&Yt!=="value"&&Yt!=="null"&&Yt!=="resolvedImage")return D.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Se=!0,ce.push({content:Nt,scale:null,font:null,textColor:null})}}return new On(ce)},On.prototype.evaluate=function(A){return new qn(this.sections.map(function(D){var W=D.content.evaluate(A);return Jn(W)===Ln?new zn("",W,null,null,null):new zn(mr(W),null,D.scale?D.scale.evaluate(A):null,D.font?D.font.evaluate(A).join(","):null,D.textColor?D.textColor.evaluate(A):null)}))},On.prototype.eachChild=function(A){for(var D=0,W=this.sections;D<W.length;D+=1){var ce=W[D];A(ce.content),ce.scale&&A(ce.scale),ce.font&&A(ce.font),ce.textColor&&A(ce.textColor)}},On.prototype.outputDefined=function(){return!1},On.prototype.serialize=function(){for(var A=["format"],D=0,W=this.sections;D<W.length;D+=1){var ce=W[D];A.push(ce.content.serialize());var Se={};ce.scale&&(Se["font-scale"]=ce.scale.serialize()),ce.font&&(Se["text-font"]=ce.font.serialize()),ce.textColor&&(Se["text-color"]=ce.textColor.serialize()),A.push(Se)}return A};var Hn=function(A){this.type=Ln,this.input=A};Hn.parse=function(A,D){if(A.length!==2)return D.error("Expected two arguments.");var W=D.parse(A[1],1,Bt);return W?new Hn(W):D.error("No image name provided.")},Hn.prototype.evaluate=function(A){var D=this.input.evaluate(A),W=sr.fromString(D);return W&&A.availableImages&&(W.available=A.availableImages.indexOf(D)>-1),W},Hn.prototype.eachChild=function(A){A(this.input)},Hn.prototype.outputDefined=function(){return!1},Hn.prototype.serialize=function(){return["image",this.input.serialize()]};var Bn={"to-boolean":Xt,"to-color":an,"to-number":Dt,"to-string":Bt},Vn=function(A,D){this.type=A,this.args=D};Vn.parse=function(A,D){if(A.length<2)return D.error("Expected at least one argument.");var W=A[0];if((W==="to-boolean"||W==="to-string")&&A.length!==2)return D.error("Expected one argument.");for(var ce=Bn[W],Se=[],Ie=1;Ie<A.length;Ie++){var Ve=D.parse(A[Ie],Ie,Vt);if(!Ve)return null;Se.push(Ve)}return new Vn(ce,Se)},Vn.prototype.evaluate=function(A){if(this.type.kind==="boolean")return!!this.args[0].evaluate(A);if(this.type.kind==="color"){for(var D,W,ce=0,Se=this.args;ce<Se.length;ce+=1){if(W=null,(D=Se[ce].evaluate(A))instanceof Cn)return D;if(typeof D=="string"){var Ie=A.parseColor(D);if(Ie)return Ie}else if(Array.isArray(D)&&!(W=D.length<3||D.length>4?"Invalid rbga value "+JSON.stringify(D)+": expected an array containing either three or four numeric values.":pr(D[0],D[1],D[2],D[3])))return new Cn(D[0]/255,D[1]/255,D[2]/255,D[3])}throw new tn(W||"Could not parse color from value '"+(typeof D=="string"?D:String(JSON.stringify(D)))+"'")}if(this.type.kind==="number"){for(var Ve=null,tt=0,ct=this.args;tt<ct.length;tt+=1){if((Ve=ct[tt].evaluate(A))===null)return 0;var wt=Number(Ve);if(!isNaN(wt))return wt}throw new tn("Could not convert "+JSON.stringify(Ve)+" to number.")}return this.type.kind==="formatted"?qn.fromString(mr(this.args[0].evaluate(A))):this.type.kind==="resolvedImage"?sr.fromString(mr(this.args[0].evaluate(A))):mr(this.args[0].evaluate(A))},Vn.prototype.eachChild=function(A){this.args.forEach(A)},Vn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Vn.prototype.serialize=function(){if(this.type.kind==="formatted")return new On([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Hn(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(D){A.push(D.serialize())}),A};var nr=["Unknown","Point","LineString","Polygon"],Qt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Qt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Qt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?nr[this.feature.type]:this.feature.type:null},Qt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Qt.prototype.canonicalID=function(){return this.canonical},Qt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Qt.prototype.parseColor=function(A){var D=this._parseColorCache[A];return D||(D=this._parseColorCache[A]=Cn.parse(A)),D};var bn=function(A,D,W,ce){this.name=A,this.type=D,this._evaluate=W,this.args=ce};bn.prototype.evaluate=function(A){return this._evaluate(A,this.args)},bn.prototype.eachChild=function(A){this.args.forEach(A)},bn.prototype.outputDefined=function(){return!1},bn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},bn.parse=function(A,D){var W,ce=A[0],Se=bn.definitions[ce];if(!Se)return D.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ie=Array.isArray(Se)?Se[0]:Se.type,Ve=Array.isArray(Se)?[[Se[1],Se[2]]]:Se.overloads,tt=Ve.filter(function(Zr){var Nr=Zr[0];return!Array.isArray(Nr)||Nr.length===A.length-1}),ct=null,wt=0,At=tt;wt<At.length;wt+=1){var Nt=At[wt],Yt=Nt[0],Ut=Nt[1];ct=new Ir(D.registry,D.path,null,D.scope);for(var sn=[],un=!1,En=1;En<A.length;En++){var Mn=A[En],Nn=Array.isArray(Yt)?Yt[En-1]:Yt.type,jn=ct.parse(Mn,1+sn.length,Nn);if(!jn){un=!0;break}sn.push(jn)}if(!un)if(Array.isArray(Yt)&&Yt.length!==sn.length)ct.error("Expected "+Yt.length+" arguments, but found "+sn.length+" instead.");else{for(var Gn=0;Gn<sn.length;Gn++){var Kn=Array.isArray(Yt)?Yt[Gn]:Yt.type,rr=sn[Gn];ct.concat(Gn+1).checkSubtype(Kn,rr.type)}if(ct.errors.length===0)return new bn(ce,Ie,Ut,sn)}}if(tt.length===1)(W=D.errors).push.apply(W,ct.errors);else{for(var _r=(tt.length?tt:Ve).map(function(Zr){return Nr=Zr[0],Array.isArray(Nr)?"("+Nr.map(Zt).join(", ")+")":"("+Zt(Nr.type)+"...)";var Nr}).join(" | "),vr=[],Ar=1;Ar<A.length;Ar++){var Cr=D.parse(A[Ar],1+vr.length);if(!Cr)return null;vr.push(Zt(Cr.type))}D.error("Expected arguments of type "+_r+", but found ("+vr.join(", ")+") instead.")}return null},bn.register=function(A,D){for(var W in bn.definitions=D,D)A[W]=bn};var Rt=function(A,D,W){this.type=on,this.locale=W,this.caseSensitive=A,this.diacriticSensitive=D};Rt.parse=function(A,D){if(A.length!==2)return D.error("Expected one argument.");var W=A[1];if(typeof W!="object"||Array.isArray(W))return D.error("Collator options argument must be an object.");var ce=D.parse(W["case-sensitive"]!==void 0&&W["case-sensitive"],1,Xt);if(!ce)return null;var Se=D.parse(W["diacritic-sensitive"]!==void 0&&W["diacritic-sensitive"],1,Xt);if(!Se)return null;var Ie=null;return W.locale&&!(Ie=D.parse(W.locale,1,Bt))?null:new Rt(ce,Se,Ie)},Rt.prototype.evaluate=function(A){return new _n(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},Rt.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},Rt.prototype.outputDefined=function(){return!1},Rt.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Kt=8192;function rn(A,D){A[0]=Math.min(A[0],D[0]),A[1]=Math.min(A[1],D[1]),A[2]=Math.max(A[2],D[0]),A[3]=Math.max(A[3],D[1])}function xn(A,D){return!(A[0]<=D[0]||A[2]>=D[2]||A[1]<=D[1]||A[3]>=D[3])}function Tn(A,D){var W,ce=(180+A[0])/360,Se=(W=A[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+W*Math.PI/360)))/360),Ie=Math.pow(2,D.z);return[Math.round(ce*Ie*Kt),Math.round(Se*Ie*Kt)]}function Pn(A,D,W){return D[1]>A[1]!=W[1]>A[1]&&A[0]<(W[0]-D[0])*(A[1]-D[1])/(W[1]-D[1])+D[0]}function pn(A,D){for(var W=!1,ce=0,Se=D.length;ce<Se;ce++)for(var Ie=D[ce],Ve=0,tt=Ie.length;Ve<tt-1;Ve++){if(ct=A,wt=Ie[Ve],At=Ie[Ve+1],Nt=void 0,Yt=void 0,Ut=void 0,sn=void 0,Nt=ct[0]-wt[0],Yt=ct[1]-wt[1],Ut=ct[0]-At[0],sn=ct[1]-At[1],Nt*sn-Ut*Yt==0&&Nt*Ut<=0&&Yt*sn<=0)return!1;Pn(A,Ie[Ve],Ie[Ve+1])&&(W=!W)}var ct,wt,At,Nt,Yt,Ut,sn;return W}function $t(A,D){for(var W=0;W<D.length;W++)if(pn(A,D[W]))return!0;return!1}function en(A,D,W,ce){var Se=A[0]-W[0],Ie=A[1]-W[1],Ve=D[0]-W[0],tt=D[1]-W[1],ct=ce[0]-W[0],wt=ce[1]-W[1],At=Se*wt-ct*Ie,Nt=Ve*wt-ct*tt;return At>0&&Nt<0||At<0&&Nt>0}function hn(A,D,W){for(var ce=0,Se=W;ce<Se.length;ce+=1)for(var Ie=Se[ce],Ve=0;Ve<Ie.length-1;++Ve)if(tt=A,ct=D,wt=Ie[Ve],At=Ie[Ve+1],Nt=void 0,Yt=void 0,Ut=void 0,Ut=[ct[0]-tt[0],ct[1]-tt[1]],Nt=[At[0]-wt[0],At[1]-wt[1]],Yt=Ut,Nt[0]*Yt[1]-Nt[1]*Yt[0]!=0&&en(tt,ct,wt,At)&&en(wt,At,tt,ct))return!0;var tt,ct,wt,At,Nt,Yt,Ut;return!1}function gn(A,D){for(var W=0;W<A.length;++W)if(!pn(A[W],D))return!1;for(var ce=0;ce<A.length-1;++ce)if(hn(A[ce],A[ce+1],D))return!1;return!0}function Dn(A,D){for(var W=0;W<D.length;W++)if(gn(A,D[W]))return!0;return!1}function Fn(A,D,W){for(var ce=[],Se=0;Se<A.length;Se++){for(var Ie=[],Ve=0;Ve<A[Se].length;Ve++){var tt=Tn(A[Se][Ve],W);rn(D,tt),Ie.push(tt)}ce.push(Ie)}return ce}function Zn(A,D,W){for(var ce=[],Se=0;Se<A.length;Se++){var Ie=Fn(A[Se],D,W);ce.push(Ie)}return ce}function Wn(A,D,W,ce){if(A[0]<W[0]||A[0]>W[2]){var Se=.5*ce,Ie=A[0]-W[0]>Se?-ce:W[0]-A[0]>Se?ce:0;Ie===0&&(Ie=A[0]-W[2]>Se?-ce:W[2]-A[0]>Se?ce:0),A[0]+=Ie}rn(D,A)}function tr(A,D,W,ce){for(var Se=Math.pow(2,ce.z)*Kt,Ie=[ce.x*Kt,ce.y*Kt],Ve=[],tt=0,ct=A;tt<ct.length;tt+=1)for(var wt=0,At=ct[tt];wt<At.length;wt+=1){var Nt=At[wt],Yt=[Nt.x+Ie[0],Nt.y+Ie[1]];Wn(Yt,D,W,Se),Ve.push(Yt)}return Ve}function Qn(A,D,W,ce){for(var Se=Math.pow(2,ce.z)*Kt,Ie=[ce.x*Kt,ce.y*Kt],Ve=[],tt=0,ct=A;tt<ct.length;tt+=1){for(var wt=[],At=0,Nt=ct[tt];At<Nt.length;At+=1){var Yt=Nt[At],Ut=[Yt.x+Ie[0],Yt.y+Ie[1]];rn(D,Ut),wt.push(Ut)}Ve.push(wt)}if(D[2]-D[0]<=Se/2){(Nn=D)[0]=Nn[1]=1/0,Nn[2]=Nn[3]=-1/0;for(var sn=0,un=Ve;sn<un.length;sn+=1)for(var En=0,Mn=un[sn];En<Mn.length;En+=1)Wn(Mn[En],D,W,Se)}var Nn;return Ve}var or=function(A,D){this.type=Xt,this.geojson=A,this.geometries=D};function hr(A){if(A instanceof bn&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof or)return!1;var D=!0;return A.eachChild(function(W){D&&!hr(W)&&(D=!1)}),D}function fr(A){if(A instanceof bn&&A.name==="feature-state")return!1;var D=!0;return A.eachChild(function(W){D&&!fr(W)&&(D=!1)}),D}function xr(A,D){if(A instanceof bn&&D.indexOf(A.name)>=0)return!1;var W=!0;return A.eachChild(function(ce){W&&!xr(ce,D)&&(W=!1)}),W}or.parse=function(A,D){if(A.length!==2)return D.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(ir(A[1])){var W=A[1];if(W.type==="FeatureCollection")for(var ce=0;ce<W.features.length;++ce){var Se=W.features[ce].geometry.type;if(Se==="Polygon"||Se==="MultiPolygon")return new or(W,W.features[ce].geometry)}else if(W.type==="Feature"){var Ie=W.geometry.type;if(Ie==="Polygon"||Ie==="MultiPolygon")return new or(W,W.geometry)}else if(W.type==="Polygon"||W.type==="MultiPolygon")return new or(W,W)}return D.error("'within' expression requires valid geojson object that contains polygon geometry type.")},or.prototype.evaluate=function(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(D,W){var ce=[1/0,1/0,-1/0,-1/0],Se=[1/0,1/0,-1/0,-1/0],Ie=D.canonicalID();if(W.type==="Polygon"){var Ve=Fn(W.coordinates,Se,Ie),tt=tr(D.geometry(),ce,Se,Ie);if(!xn(ce,Se))return!1;for(var ct=0,wt=tt;ct<wt.length;ct+=1)if(!pn(wt[ct],Ve))return!1}if(W.type==="MultiPolygon"){var At=Zn(W.coordinates,Se,Ie),Nt=tr(D.geometry(),ce,Se,Ie);if(!xn(ce,Se))return!1;for(var Yt=0,Ut=Nt;Yt<Ut.length;Yt+=1)if(!$t(Ut[Yt],At))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(D,W){var ce=[1/0,1/0,-1/0,-1/0],Se=[1/0,1/0,-1/0,-1/0],Ie=D.canonicalID();if(W.type==="Polygon"){var Ve=Fn(W.coordinates,Se,Ie),tt=Qn(D.geometry(),ce,Se,Ie);if(!xn(ce,Se))return!1;for(var ct=0,wt=tt;ct<wt.length;ct+=1)if(!gn(wt[ct],Ve))return!1}if(W.type==="MultiPolygon"){var At=Zn(W.coordinates,Se,Ie),Nt=Qn(D.geometry(),ce,Se,Ie);if(!xn(ce,Se))return!1;for(var Yt=0,Ut=Nt;Yt<Ut.length;Yt+=1)if(!Dn(Ut[Yt],At))return!1}return!0}(A,this.geometries)}return!1},or.prototype.eachChild=function(){},or.prototype.outputDefined=function(){return!0},or.prototype.serialize=function(){return["within",this.geojson]};var yr=function(A,D){this.type=D.type,this.name=A,this.boundExpression=D};yr.parse=function(A,D){if(A.length!==2||typeof A[1]!="string")return D.error("'var' expression requires exactly one string literal argument.");var W=A[1];return D.scope.has(W)?new yr(W,D.scope.get(W)):D.error('Unknown variable "'+W+'". Make sure "'+W+'" has been bound in an enclosing "let" expression before using it.',1)},yr.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},yr.prototype.eachChild=function(){},yr.prototype.outputDefined=function(){return!1},yr.prototype.serialize=function(){return["var",this.name]};var Ir=function(A,D,W,ce,Se){D===void 0&&(D=[]),ce===void 0&&(ce=new bt),Se===void 0&&(Se=[]),this.registry=A,this.path=D,this.key=D.map(function(Ie){return"["+Ie+"]"}).join(""),this.scope=ce,this.errors=Se,this.expectedType=W};function lr(A){if(A instanceof yr)return lr(A.boundExpression);if(A instanceof bn&&A.name==="error"||A instanceof Rt||A instanceof or)return!1;var D=A instanceof Vn||A instanceof vn,W=!0;return A.eachChild(function(ce){W=D?W&&lr(ce):W&&ce instanceof qt}),!!W&&hr(A)&&xr(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function kr(A,D){for(var W,ce,Se=A.length-1,Ie=0,Ve=Se,tt=0;Ie<=Ve;)if(W=A[tt=Math.floor((Ie+Ve)/2)],ce=A[tt+1],W<=D){if(tt===Se||D<ce)return tt;Ie=tt+1}else{if(!(W>D))throw new tn("Input is not a number.");Ve=tt-1}return 0}Ir.prototype.parse=function(A,D,W,ce,Se){return Se===void 0&&(Se={}),D?this.concat(D,W,ce)._parse(A,Se):this._parse(A,Se)},Ir.prototype._parse=function(A,D){function W(wt,At,Nt){return Nt==="assert"?new vn(At,[wt]):Nt==="coerce"?new Vn(At,[wt]):wt}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ce=A[0];if(typeof ce!="string")return this.error("Expression name must be a string, but found "+typeof ce+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Se=this.registry[ce];if(Se){var Ie=Se.parse(A,this);if(!Ie)return null;if(this.expectedType){var Ve=this.expectedType,tt=Ie.type;if(Ve.kind!=="string"&&Ve.kind!=="number"&&Ve.kind!=="boolean"&&Ve.kind!=="object"&&Ve.kind!=="array"||tt.kind!=="value")if(Ve.kind!=="color"&&Ve.kind!=="formatted"&&Ve.kind!=="resolvedImage"||tt.kind!=="value"&&tt.kind!=="string"){if(this.checkSubtype(Ve,tt))return null}else Ie=W(Ie,Ve,D.typeAnnotation||"coerce");else Ie=W(Ie,Ve,D.typeAnnotation||"assert")}if(!(Ie instanceof qt)&&Ie.type.kind!=="resolvedImage"&&lr(Ie)){var ct=new Qt;try{Ie=new qt(Ie.type,Ie.evaluate(ct))}catch(wt){return this.error(wt.message),null}}return Ie}return this.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0)}return A===void 0?this.error("'undefined' value invalid. Use null instead."):typeof A=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof A+" instead.")},Ir.prototype.concat=function(A,D,W){var ce=typeof A=="number"?this.path.concat(A):this.path,Se=W?this.scope.concat(W):this.scope;return new Ir(this.registry,ce,D||null,Se,this.errors)},Ir.prototype.error=function(A){for(var D=[],W=arguments.length-1;W-- >0;)D[W]=arguments[W+1];var ce=""+this.key+D.map(function(Se){return"["+Se+"]"}).join("");this.errors.push(new Tt(ce,A))},Ir.prototype.checkSubtype=function(A,D){var W=nn(A,D);return W&&this.error(W),W};var Fr=function(A,D,W){this.type=A,this.input=D,this.labels=[],this.outputs=[];for(var ce=0,Se=W;ce<Se.length;ce+=1){var Ie=Se[ce],Ve=Ie[0],tt=Ie[1];this.labels.push(Ve),this.outputs.push(tt)}};function Wr(A,D,W){return A*(1-W)+D*W}Fr.parse=function(A,D){if(A.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return D.error("Expected an even number of arguments.");var W=D.parse(A[1],1,Dt);if(!W)return null;var ce=[],Se=null;D.expectedType&&D.expectedType.kind!=="value"&&(Se=D.expectedType);for(var Ie=1;Ie<A.length;Ie+=2){var Ve=Ie===1?-1/0:A[Ie],tt=A[Ie+1],ct=Ie,wt=Ie+1;if(typeof Ve!="number")return D.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(ce.length&&ce[ce.length-1][0]>=Ve)return D.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var At=D.parse(tt,wt,Se);if(!At)return null;Se=Se||At.type,ce.push([Ve,At])}return new Fr(Se,W,ce)},Fr.prototype.evaluate=function(A){var D=this.labels,W=this.outputs;if(D.length===1)return W[0].evaluate(A);var ce=this.input.evaluate(A);if(ce<=D[0])return W[0].evaluate(A);var Se=D.length;return ce>=D[Se-1]?W[Se-1].evaluate(A):W[kr(D,ce)].evaluate(A)},Fr.prototype.eachChild=function(A){A(this.input);for(var D=0,W=this.outputs;D<W.length;D+=1)A(W[D])},Fr.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Fr.prototype.serialize=function(){for(var A=["step",this.input.serialize()],D=0;D<this.labels.length;D++)D>0&&A.push(this.labels[D]),A.push(this.outputs[D].serialize());return A};var ki=Object.freeze({__proto__:null,number:Wr,color:function(A,D,W){return new Cn(Wr(A.r,D.r,W),Wr(A.g,D.g,W),Wr(A.b,D.b,W),Wr(A.a,D.a,W))},array:function(A,D,W){return A.map(function(ce,Se){return Wr(ce,D[Se],W)})}}),Ai=.95047,aa=1,bi=1.08883,Ji=4/29,Ba=6/29,Na=3*Ba*Ba,Ss=Ba*Ba*Ba,qu=Math.PI/180,dl=180/Math.PI;function vl(A){return A>Ss?Math.pow(A,.3333333333333333):A/Na+Ji}function Nl(A){return A>Ba?A*A*A:Na*(A-Ji)}function bo(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,.4166666666666667)-.055)}function jl(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function Ul(A){var D=jl(A.r),W=jl(A.g),ce=jl(A.b),Se=vl((.4124564*D+.3575761*W+.1804375*ce)/Ai),Ie=vl((.2126729*D+.7151522*W+.072175*ce)/aa);return{l:116*Ie-16,a:500*(Se-Ie),b:200*(Ie-vl((.0193339*D+.119192*W+.9503041*ce)/bi)),alpha:A.a}}function Vl(A){var D=(A.l+16)/116,W=isNaN(A.a)?D:D+A.a/500,ce=isNaN(A.b)?D:D-A.b/200;return D=aa*Nl(D),W=Ai*Nl(W),ce=bi*Nl(ce),new Cn(bo(3.2404542*W-1.5371385*D-.4985314*ce),bo(-.969266*W+1.8760108*D+.041556*ce),bo(.0556434*W-.2040259*D+1.0572252*ce),A.alpha)}function Yo(A,D,W){var ce=D-A;return A+W*(ce>180||ce<-180?ce-360*Math.round(ce/360):ce)}var as={forward:Ul,reverse:Vl,interpolate:function(A,D,W){return{l:Wr(A.l,D.l,W),a:Wr(A.a,D.a,W),b:Wr(A.b,D.b,W),alpha:Wr(A.alpha,D.alpha,W)}}},Es={forward:function(A){var D=Ul(A),W=D.l,ce=D.a,Se=D.b,Ie=Math.atan2(Se,ce)*dl;return{h:Ie<0?Ie+360:Ie,c:Math.sqrt(ce*ce+Se*Se),l:W,alpha:A.a}},reverse:function(A){var D=A.h*qu,W=A.c;return Vl({l:A.l,a:Math.cos(D)*W,b:Math.sin(D)*W,alpha:A.alpha})},interpolate:function(A,D,W){return{h:Yo(A.h,D.h,W),c:Wr(A.c,D.c,W),l:Wr(A.l,D.l,W),alpha:Wr(A.alpha,D.alpha,W)}}},Di=Object.freeze({__proto__:null,lab:as,hcl:Es}),ca=function(A,D,W,ce,Se){this.type=A,this.operator=D,this.interpolation=W,this.input=ce,this.labels=[],this.outputs=[];for(var Ie=0,Ve=Se;Ie<Ve.length;Ie+=1){var tt=Ve[Ie],ct=tt[0],wt=tt[1];this.labels.push(ct),this.outputs.push(wt)}};function Go(A,D,W,ce){var Se=ce-W,Ie=A-W;return Se===0?0:D===1?Ie/Se:(Math.pow(D,Ie)-1)/(Math.pow(D,Se)-1)}ca.interpolationFactor=function(A,D,W,ce){var Se=0;if(A.name==="exponential")Se=Go(D,A.base,W,ce);else if(A.name==="linear")Se=Go(D,1,W,ce);else if(A.name==="cubic-bezier"){var Ie=A.controlPoints;Se=new h(Ie[0],Ie[1],Ie[2],Ie[3]).solve(Go(D,1,W,ce))}return Se},ca.parse=function(A,D){var W=A[0],ce=A[1],Se=A[2],Ie=A.slice(3);if(!Array.isArray(ce)||ce.length===0)return D.error("Expected an interpolation type expression.",1);if(ce[0]==="linear")ce={name:"linear"};else if(ce[0]==="exponential"){var Ve=ce[1];if(typeof Ve!="number")return D.error("Exponential interpolation requires a numeric base.",1,1);ce={name:"exponential",base:Ve}}else{if(ce[0]!=="cubic-bezier")return D.error("Unknown interpolation type "+String(ce[0]),1,0);var tt=ce.slice(1);if(tt.length!==4||tt.some(function(En){return typeof En!="number"||En<0||En>1}))return D.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ce={name:"cubic-bezier",controlPoints:tt}}if(A.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return D.error("Expected an even number of arguments.");if(!(Se=D.parse(Se,2,Dt)))return null;var ct=[],wt=null;W==="interpolate-hcl"||W==="interpolate-lab"?wt=an:D.expectedType&&D.expectedType.kind!=="value"&&(wt=D.expectedType);for(var At=0;At<Ie.length;At+=2){var Nt=Ie[At],Yt=Ie[At+1],Ut=At+3,sn=At+4;if(typeof Nt!="number")return D.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ut);if(ct.length&&ct[ct.length-1][0]>=Nt)return D.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ut);var un=D.parse(Yt,sn,wt);if(!un)return null;wt=wt||un.type,ct.push([Nt,un])}return wt.kind==="number"||wt.kind==="color"||wt.kind==="array"&&wt.itemType.kind==="number"&&typeof wt.N=="number"?new ca(wt,W,ce,Se,ct):D.error("Type "+Zt(wt)+" is not interpolatable.")},ca.prototype.evaluate=function(A){var D=this.labels,W=this.outputs;if(D.length===1)return W[0].evaluate(A);var ce=this.input.evaluate(A);if(ce<=D[0])return W[0].evaluate(A);var Se=D.length;if(ce>=D[Se-1])return W[Se-1].evaluate(A);var Ie=kr(D,ce),Ve=D[Ie],tt=D[Ie+1],ct=ca.interpolationFactor(this.interpolation,ce,Ve,tt),wt=W[Ie].evaluate(A),At=W[Ie+1].evaluate(A);return this.operator==="interpolate"?ki[this.type.kind.toLowerCase()](wt,At,ct):this.operator==="interpolate-hcl"?Es.reverse(Es.interpolate(Es.forward(wt),Es.forward(At),ct)):as.reverse(as.interpolate(as.forward(wt),as.forward(At),ct))},ca.prototype.eachChild=function(A){A(this.input);for(var D=0,W=this.outputs;D<W.length;D+=1)A(W[D])},ca.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},ca.prototype.serialize=function(){var A;A=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var D=[this.operator,A,this.input.serialize()],W=0;W<this.labels.length;W++)D.push(this.labels[W],this.outputs[W].serialize());return D};var Io=function(A,D){this.type=A,this.args=D};Io.parse=function(A,D){if(A.length<2)return D.error("Expectected at least one argument.");var W=null,ce=D.expectedType;ce&&ce.kind!=="value"&&(W=ce);for(var Se=[],Ie=0,Ve=A.slice(1);Ie<Ve.length;Ie+=1){var tt=Ve[Ie],ct=D.parse(tt,1+Se.length,W,void 0,{typeAnnotation:"omit"});if(!ct)return null;W=W||ct.type,Se.push(ct)}var wt=ce&&Se.some(function(At){return nn(ce,At.type)});return new Io(wt?Vt:W,Se)},Io.prototype.evaluate=function(A){for(var D,W=null,ce=0,Se=0,Ie=this.args;Se<Ie.length&&(ce++,(W=Ie[Se].evaluate(A))&&W instanceof sr&&!W.available&&(D||(D=W.name),W=null,ce===this.args.length&&(W=D)),W===null);Se+=1);return W},Io.prototype.eachChild=function(A){this.args.forEach(A)},Io.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Io.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(D){A.push(D.serialize())}),A};var _o=function(A,D){this.type=D.type,this.bindings=[].concat(A),this.result=D};_o.prototype.evaluate=function(A){return this.result.evaluate(A)},_o.prototype.eachChild=function(A){for(var D=0,W=this.bindings;D<W.length;D+=1)A(W[D][1]);A(this.result)},_o.parse=function(A,D){if(A.length<4)return D.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var W=[],ce=1;ce<A.length-1;ce+=2){var Se=A[ce];if(typeof Se!="string")return D.error("Expected string, but found "+typeof Se+" instead.",ce);if(/[^a-zA-Z0-9_]/.test(Se))return D.error("Variable names must contain only alphanumeric characters or '_'.",ce);var Ie=D.parse(A[ce+1],ce+1);if(!Ie)return null;W.push([Se,Ie])}var Ve=D.parse(A[A.length-1],A.length-1,D.expectedType,W);return Ve?new _o(W,Ve):null},_o.prototype.outputDefined=function(){return this.result.outputDefined()},_o.prototype.serialize=function(){for(var A=["let"],D=0,W=this.bindings;D<W.length;D+=1){var ce=W[D],Se=ce[0],Ie=ce[1];A.push(Se,Ie.serialize())}return A.push(this.result.serialize()),A};var os=function(A,D,W){this.type=A,this.index=D,this.input=W};os.parse=function(A,D){if(A.length!==3)return D.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var W=D.parse(A[1],1,Dt),ce=D.parse(A[2],2,fn(D.expectedType||Vt));if(!W||!ce)return null;var Se=ce.type;return new os(Se.itemType,W,ce)},os.prototype.evaluate=function(A){var D=this.index.evaluate(A),W=this.input.evaluate(A);if(D<0)throw new tn("Array index out of bounds: "+D+" < 0.");if(D>=W.length)throw new tn("Array index out of bounds: "+D+" > "+(W.length-1)+".");if(D!==Math.floor(D))throw new tn("Array index must be an integer, but found "+D+" instead.");return W[D]},os.prototype.eachChild=function(A){A(this.index),A(this.input)},os.prototype.outputDefined=function(){return!1},os.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Do=function(A,D){this.type=Xt,this.needle=A,this.haystack=D};Do.parse=function(A,D){if(A.length!==3)return D.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var W=D.parse(A[1],1,Vt),ce=D.parse(A[2],2,Vt);return W&&ce?cn(W.type,[Xt,Bt,Dt,Ct,Vt])?new Do(W,ce):D.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(W.type)+" instead"):null},Do.prototype.evaluate=function(A){var D=this.needle.evaluate(A),W=this.haystack.evaluate(A);if(!W)return!1;if(!kn(D,["boolean","string","number","null"]))throw new tn("Expected first argument to be of type boolean, string, number or null, but found "+Zt(Jn(D))+" instead.");if(!kn(W,["string","array"]))throw new tn("Expected second argument to be of type array or string, but found "+Zt(Jn(W))+" instead.");return W.indexOf(D)>=0},Do.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},Do.prototype.outputDefined=function(){return!0},Do.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ss=function(A,D,W){this.type=Dt,this.needle=A,this.haystack=D,this.fromIndex=W};ss.parse=function(A,D){if(A.length<=2||A.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var W=D.parse(A[1],1,Vt),ce=D.parse(A[2],2,Vt);if(!W||!ce)return null;if(!cn(W.type,[Xt,Bt,Dt,Ct,Vt]))return D.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(W.type)+" instead");if(A.length===4){var Se=D.parse(A[3],3,Dt);return Se?new ss(W,ce,Se):null}return new ss(W,ce)},ss.prototype.evaluate=function(A){var D=this.needle.evaluate(A),W=this.haystack.evaluate(A);if(!kn(D,["boolean","string","number","null"]))throw new tn("Expected first argument to be of type boolean, string, number or null, but found "+Zt(Jn(D))+" instead.");if(!kn(W,["string","array"]))throw new tn("Expected second argument to be of type array or string, but found "+Zt(Jn(W))+" instead.");if(this.fromIndex){var ce=this.fromIndex.evaluate(A);return W.indexOf(D,ce)}return W.indexOf(D)},ss.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},ss.prototype.outputDefined=function(){return!1},ss.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Wo=function(A,D,W,ce,Se,Ie){this.inputType=A,this.type=D,this.input=W,this.cases=ce,this.outputs=Se,this.otherwise=Ie};Wo.parse=function(A,D){if(A.length<5)return D.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return D.error("Expected an even number of arguments.");var W,ce;D.expectedType&&D.expectedType.kind!=="value"&&(ce=D.expectedType);for(var Se={},Ie=[],Ve=2;Ve<A.length-1;Ve+=2){var tt=A[Ve],ct=A[Ve+1];Array.isArray(tt)||(tt=[tt]);var wt=D.concat(Ve);if(tt.length===0)return wt.error("Expected at least one branch label.");for(var At=0,Nt=tt;At<Nt.length;At+=1){var Yt=Nt[At];if(typeof Yt!="number"&&typeof Yt!="string")return wt.error("Branch labels must be numbers or strings.");if(typeof Yt=="number"&&Math.abs(Yt)>Number.MAX_SAFE_INTEGER)return wt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Yt=="number"&&Math.floor(Yt)!==Yt)return wt.error("Numeric branch labels must be integer values.");if(W){if(wt.checkSubtype(W,Jn(Yt)))return null}else W=Jn(Yt);if(Se[String(Yt)]!==void 0)return wt.error("Branch labels must be unique.");Se[String(Yt)]=Ie.length}var Ut=D.parse(ct,Ve,ce);if(!Ut)return null;ce=ce||Ut.type,Ie.push(Ut)}var sn=D.parse(A[1],1,Vt);if(!sn)return null;var un=D.parse(A[A.length-1],A.length-1,ce);return un?sn.type.kind!=="value"&&D.concat(1).checkSubtype(W,sn.type)?null:new Wo(W,ce,sn,Se,Ie,un):null},Wo.prototype.evaluate=function(A){var D=this.input.evaluate(A);return(Jn(D)===this.inputType&&this.outputs[this.cases[D]]||this.otherwise).evaluate(A)},Wo.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},Wo.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},Wo.prototype.serialize=function(){for(var A=this,D=["match",this.input.serialize()],W=[],ce={},Se=0,Ie=Object.keys(this.cases).sort();Se<Ie.length;Se+=1){var Ve=Ie[Se];(Nt=ce[this.cases[Ve]])===void 0?(ce[this.cases[Ve]]=W.length,W.push([this.cases[Ve],[Ve]])):W[Nt][1].push(Ve)}for(var tt=function(Ut){return A.inputType.kind==="number"?Number(Ut):Ut},ct=0,wt=W;ct<wt.length;ct+=1){var At=wt[ct],Nt=At[0],Yt=At[1];Yt.length===1?D.push(tt(Yt[0])):D.push(Yt.map(tt)),D.push(this.outputs[outputIndex$1].serialize())}return D.push(this.otherwise.serialize()),D};var ls=function(A,D,W){this.type=A,this.branches=D,this.otherwise=W};ls.parse=function(A,D){if(A.length<4)return D.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return D.error("Expected an odd number of arguments.");var W;D.expectedType&&D.expectedType.kind!=="value"&&(W=D.expectedType);for(var ce=[],Se=1;Se<A.length-1;Se+=2){var Ie=D.parse(A[Se],Se,Xt);if(!Ie)return null;var Ve=D.parse(A[Se+1],Se+1,W);if(!Ve)return null;ce.push([Ie,Ve]),W=W||Ve.type}var tt=D.parse(A[A.length-1],A.length-1,W);return tt?new ls(W,ce,tt):null},ls.prototype.evaluate=function(A){for(var D=0,W=this.branches;D<W.length;D+=1){var ce=W[D],Se=ce[0],Ie=ce[1];if(Se.evaluate(A))return Ie.evaluate(A)}return this.otherwise.evaluate(A)},ls.prototype.eachChild=function(A){for(var D=0,W=this.branches;D<W.length;D+=1){var ce=W[D],Se=ce[0],Ie=ce[1];A(Se),A(Ie)}A(this.otherwise)},ls.prototype.outputDefined=function(){return this.branches.every(function(A){return A[0],A[1].outputDefined()})&&this.otherwise.outputDefined()},ls.prototype.serialize=function(){var A=["case"];return this.eachChild(function(D){A.push(D.serialize())}),A};var Ro=function(A,D,W,ce){this.type=A,this.input=D,this.beginIndex=W,this.endIndex=ce};function su(A,D){return A==="=="||A==="!="?D.kind==="boolean"||D.kind==="string"||D.kind==="number"||D.kind==="null"||D.kind==="value":D.kind==="string"||D.kind==="number"||D.kind==="value"}function Hl(A,D,W,ce){return ce.compare(D,W)===0}function Ls(A,D,W){var ce=A!=="=="&&A!=="!=";return function(){function Se(Ie,Ve,tt){this.type=Xt,this.lhs=Ie,this.rhs=Ve,this.collator=tt,this.hasUntypedArgument=Ie.type.kind==="value"||Ve.type.kind==="value"}return Se.parse=function(Ie,Ve){if(Ie.length!==3&&Ie.length!==4)return Ve.error("Expected two or three arguments.");var tt=Ie[0],ct=Ve.parse(Ie[1],1,Vt);if(!ct)return null;if(!su(tt,ct.type))return Ve.concat(1).error('"'+tt+`" comparisons are not supported for type '`+Zt(ct.type)+"'.");var wt=Ve.parse(Ie[2],2,Vt);if(!wt)return null;if(!su(tt,wt.type))return Ve.concat(2).error('"'+tt+`" comparisons are not supported for type '`+Zt(wt.type)+"'.");if(ct.type.kind!==wt.type.kind&&ct.type.kind!=="value"&&wt.type.kind!=="value")return Ve.error("Cannot compare types '"+Zt(ct.type)+"' and '"+Zt(wt.type)+"'.");ce&&(ct.type.kind==="value"&&wt.type.kind!=="value"?ct=new vn(wt.type,[ct]):ct.type.kind!=="value"&&wt.type.kind==="value"&&(wt=new vn(ct.type,[wt])));var At=null;if(Ie.length===4){if(ct.type.kind!=="string"&&wt.type.kind!=="string"&&ct.type.kind!=="value"&&wt.type.kind!=="value")return Ve.error("Cannot use collator to compare non-string types.");if(!(At=Ve.parse(Ie[3],3,on)))return null}return new Se(ct,wt,At)},Se.prototype.evaluate=function(Ie){var Ve=this.lhs.evaluate(Ie),tt=this.rhs.evaluate(Ie);if(ce&&this.hasUntypedArgument){var ct=Jn(Ve),wt=Jn(tt);if(ct.kind!==wt.kind||ct.kind!=="string"&&ct.kind!=="number")throw new tn('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+ct.kind+", "+wt.kind+") instead.")}if(this.collator&&!ce&&this.hasUntypedArgument){var At=Jn(Ve),Nt=Jn(tt);if(At.kind!=="string"||Nt.kind!=="string")return D(Ie,Ve,tt)}return this.collator?W(Ie,Ve,tt,this.collator.evaluate(Ie)):D(Ie,Ve,tt)},Se.prototype.eachChild=function(Ie){Ie(this.lhs),Ie(this.rhs),this.collator&&Ie(this.collator)},Se.prototype.outputDefined=function(){return!0},Se.prototype.serialize=function(){var Ie=[A];return this.eachChild(function(Ve){Ie.push(Ve.serialize())}),Ie},Se}()}Ro.parse=function(A,D){if(A.length<=2||A.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var W=D.parse(A[1],1,Vt),ce=D.parse(A[2],2,Dt);if(!W||!ce)return null;if(!cn(W.type,[fn(Vt),Bt,Vt]))return D.error("Expected first argument to be of type array or string, but found "+Zt(W.type)+" instead");if(A.length===4){var Se=D.parse(A[3],3,Dt);return Se?new Ro(W.type,W,ce,Se):null}return new Ro(W.type,W,ce)},Ro.prototype.evaluate=function(A){var D=this.input.evaluate(A),W=this.beginIndex.evaluate(A);if(!kn(D,["string","array"]))throw new tn("Expected first argument to be of type array or string, but found "+Zt(Jn(D))+" instead.");if(this.endIndex){var ce=this.endIndex.evaluate(A);return D.slice(W,ce)}return D.slice(W)},Ro.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Eu=Ls("==",function(A,D,W){return D===W},Hl),Lu=Ls("!=",function(A,D,W){return D!==W},function(A,D,W,ce){return!Hl(0,D,W,ce)}),Cs=Ls("<",function(A,D,W){return D<W},function(A,D,W,ce){return ce.compare(D,W)<0}),Cu=Ls(">",function(A,D,W){return D>W},function(A,D,W,ce){return ce.compare(D,W)>0}),Yu=Ls("<=",function(A,D,W){return D<=W},function(A,D,W,ce){return ce.compare(D,W)<=0}),Gu=Ls(">=",function(A,D,W){return D>=W},function(A,D,W,ce){return ce.compare(D,W)>=0}),Os=function(A,D,W,ce,Se){this.type=Bt,this.number=A,this.locale=D,this.currency=W,this.minFractionDigits=ce,this.maxFractionDigits=Se};Os.parse=function(A,D){if(A.length!==3)return D.error("Expected two arguments.");var W=D.parse(A[1],1,Dt);if(!W)return null;var ce=A[2];if(typeof ce!="object"||Array.isArray(ce))return D.error("NumberFormat options argument must be an object.");var Se=null;if(ce.locale&&!(Se=D.parse(ce.locale,1,Bt)))return null;var Ie=null;if(ce.currency&&!(Ie=D.parse(ce.currency,1,Bt)))return null;var Ve=null;if(ce["min-fraction-digits"]&&!(Ve=D.parse(ce["min-fraction-digits"],1,Dt)))return null;var tt=null;return ce["max-fraction-digits"]&&!(tt=D.parse(ce["max-fraction-digits"],1,Dt))?null:new Os(W,Se,Ie,Ve,tt)},Os.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},Os.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},Os.prototype.outputDefined=function(){return!1},Os.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var zo=function(A){this.type=Dt,this.input=A};zo.parse=function(A,D){if(A.length!==2)return D.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var W=D.parse(A[1],1);return W?W.type.kind!=="array"&&W.type.kind!=="string"&&W.type.kind!=="value"?D.error("Expected argument of type string or array, but found "+Zt(W.type)+" instead."):new zo(W):null},zo.prototype.evaluate=function(A){var D=this.input.evaluate(A);if(typeof D=="string"||Array.isArray(D))return D.length;throw new tn("Expected value to be of type string or array, but found "+Zt(Jn(D))+" instead.")},zo.prototype.eachChild=function(A){A(this.input)},zo.prototype.outputDefined=function(){return!1},zo.prototype.serialize=function(){var A=["length"];return this.eachChild(function(D){A.push(D.serialize())}),A};var Ws={"==":Eu,"!=":Lu,">":Cu,"<":Cs,">=":Gu,"<=":Yu,array:vn,at:os,boolean:vn,case:ls,coalesce:Io,collator:Rt,format:On,image:Hn,in:Do,"index-of":ss,interpolate:ca,"interpolate-hcl":ca,"interpolate-lab":ca,length:zo,let:_o,literal:qt,match:Wo,number:vn,"number-format":Os,object:vn,slice:Ro,step:Fr,string:vn,"to-boolean":Vn,"to-color":Vn,"to-number":Vn,"to-string":Vn,var:yr,within:or};function Ps(A,D){var W=D[0],ce=D[1],Se=D[2],Ie=D[3];W=W.evaluate(A),ce=ce.evaluate(A),Se=Se.evaluate(A);var Ve=Ie?Ie.evaluate(A):1,tt=pr(W,ce,Se,Ve);if(tt)throw new tn(tt);return new Cn(W/255*Ve,ce/255*Ve,Se/255*Ve,Ve)}function ml(A,D){return A in D}function Is(A,D){var W=D[A];return W===void 0?null:W}function wo(A){return{type:A}}function lu(A){return{result:"success",value:A}}function us(A){return{result:"error",value:A}}function Zo(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function Xo(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function cs(A){return!!A.expression&&A.expression.interpolated}function ri(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function Zs(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function Wu(A){return A}function ql(A,D){var W,ce,Se,Ie=D.type==="color",Ve=A.stops&&typeof A.stops[0][0]=="object",tt=Ve||A.property!==void 0,ct=Ve||!tt,wt=A.type||(cs(D)?"exponential":"interval");if(Ie&&((A=xt({},A)).stops&&(A.stops=A.stops.map(function(vr){return[vr[0],Cn.parse(vr[1])]})),A.default?A.default=Cn.parse(A.default):A.default=Cn.parse(D.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!Di[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(wt==="exponential")W=Yl;else if(wt==="interval")W=Zu;else if(wt==="categorical"){W=Ou,ce=Object.create(null);for(var At=0,Nt=A.stops;At<Nt.length;At+=1){var Yt=Nt[At];ce[Yt[0]]=Yt[1]}Se=typeof A.stops[0][0]}else{if(wt!=="identity")throw new Error('Unknown function type "'+wt+'"');W=Xu}if(Ve){for(var Ut={},sn=[],un=0;un<A.stops.length;un++){var En=A.stops[un],Mn=En[0].zoom;Ut[Mn]===void 0&&(Ut[Mn]={zoom:Mn,type:A.type,property:A.property,default:A.default,stops:[]},sn.push(Mn)),Ut[Mn].stops.push([En[0].value,En[1]])}for(var Nn=[],jn=0,Gn=sn;jn<Gn.length;jn+=1){var Kn=Gn[jn];Nn.push([Ut[Kn].zoom,ql(Ut[Kn],D)])}var rr={name:"linear"};return{kind:"composite",interpolationType:rr,interpolationFactor:ca.interpolationFactor.bind(void 0,rr),zoomStops:Nn.map(function(vr){return vr[0]}),evaluate:function(vr,Ar){var Cr=vr.zoom;return Yl({stops:Nn,base:A.base},D,Cr).evaluate(Cr,Ar)}}}if(ct){var _r=wt==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:_r,interpolationFactor:ca.interpolationFactor.bind(void 0,_r),zoomStops:A.stops.map(function(vr){return vr[0]}),evaluate:function(vr){var Ar=vr.zoom;return W(A,D,Ar,ce,Se)}}}return{kind:"source",evaluate:function(vr,Ar){var Cr=Ar&&Ar.properties?Ar.properties[A.property]:void 0;return Cr===void 0?Xs(A.default,D.default):W(A,D,Cr,ce,Se)}}}function Xs(A,D,W){return A!==void 0?A:D!==void 0?D:W!==void 0?W:void 0}function Ou(A,D,W,ce,Se){return Xs(typeof W===Se?ce[W]:void 0,A.default,D.default)}function Zu(A,D,W){if(ri(W)!=="number")return Xs(A.default,D.default);var ce=A.stops.length;if(ce===1||W<=A.stops[0][0])return A.stops[0][1];if(W>=A.stops[ce-1][0])return A.stops[ce-1][1];var Se=kr(A.stops.map(function(Ie){return Ie[0]}),W);return A.stops[Se][1]}function Yl(A,D,W){var ce=A.base!==void 0?A.base:1;if(ri(W)!=="number")return Xs(A.default,D.default);var Se=A.stops.length;if(Se===1||W<=A.stops[0][0])return A.stops[0][1];if(W>=A.stops[Se-1][0])return A.stops[Se-1][1];var Ie=kr(A.stops.map(function(Nt){return Nt[0]}),W),Ve=function(Nt,Yt,Ut,sn){var un=sn-Ut,En=Nt-Ut;return un===0?0:Yt===1?En/un:(Math.pow(Yt,En)-1)/(Math.pow(Yt,un)-1)}(W,ce,A.stops[Ie][0],A.stops[Ie+1][0]),tt=A.stops[Ie][1],ct=A.stops[Ie+1][1],wt=ki[D.type]||Wu;if(A.colorSpace&&A.colorSpace!=="rgb"){var At=Di[A.colorSpace];wt=function(Nt,Yt){return At.reverse(At.interpolate(At.forward(Nt),At.forward(Yt),Ve))}}return typeof tt.evaluate=="function"?{evaluate:function(){for(var Nt=[],Yt=arguments.length;Yt--;)Nt[Yt]=arguments[Yt];var Ut=tt.evaluate.apply(void 0,Nt),sn=ct.evaluate.apply(void 0,Nt);if(Ut!==void 0&&sn!==void 0)return wt(Ut,sn,Ve)}}:wt(tt,ct,Ve)}function Xu(A,D,W){return D.type==="color"?W=Cn.parse(W):D.type==="formatted"?W=qn.fromString(W.toString()):D.type==="resolvedImage"?W=sr.fromString(W.toString()):ri(W)===D.type||D.type==="enum"&&D.values[W]||(W=void 0),Xs(W,A.default,D.default)}bn.register(Ws,{error:[{kind:"error"},[Bt],function(A,D){var W=D[0];throw new tn(W.evaluate(A))}],typeof:[Bt,[Vt],function(A,D){return Zt(Jn(D[0].evaluate(A)))}],"to-rgba":[fn(Dt,4),[an],function(A,D){return D[0].evaluate(A).toArray()}],rgb:[an,[Dt,Dt,Dt],Ps],rgba:[an,[Dt,Dt,Dt,Dt],Ps],has:{type:Xt,overloads:[[[Bt],function(A,D){return ml(D[0].evaluate(A),A.properties())}],[[Bt,Wt],function(A,D){var W=D[0],ce=D[1];return ml(W.evaluate(A),ce.evaluate(A))}]]},get:{type:Vt,overloads:[[[Bt],function(A,D){return Is(D[0].evaluate(A),A.properties())}],[[Bt,Wt],function(A,D){var W=D[0],ce=D[1];return Is(W.evaluate(A),ce.evaluate(A))}]]},"feature-state":[Vt,[Bt],function(A,D){return Is(D[0].evaluate(A),A.featureState||{})}],properties:[Wt,[],function(A){return A.properties()}],"geometry-type":[Bt,[],function(A){return A.geometryType()}],id:[Vt,[],function(A){return A.id()}],zoom:[Dt,[],function(A){return A.globals.zoom}],"heatmap-density":[Dt,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[Dt,[],function(A){return A.globals.lineProgress||0}],accumulated:[Vt,[],function(A){return A.globals.accumulated===void 0?null:A.globals.accumulated}],"+":[Dt,wo(Dt),function(A,D){for(var W=0,ce=0,Se=D;ce<Se.length;ce+=1)W+=Se[ce].evaluate(A);return W}],"*":[Dt,wo(Dt),function(A,D){for(var W=1,ce=0,Se=D;ce<Se.length;ce+=1)W*=Se[ce].evaluate(A);return W}],"-":{type:Dt,overloads:[[[Dt,Dt],function(A,D){var W=D[0],ce=D[1];return W.evaluate(A)-ce.evaluate(A)}],[[Dt],function(A,D){return-D[0].evaluate(A)}]]},"/":[Dt,[Dt,Dt],function(A,D){var W=D[0],ce=D[1];return W.evaluate(A)/ce.evaluate(A)}],"%":[Dt,[Dt,Dt],function(A,D){var W=D[0],ce=D[1];return W.evaluate(A)%ce.evaluate(A)}],ln2:[Dt,[],function(){return Math.LN2}],pi:[Dt,[],function(){return Math.PI}],e:[Dt,[],function(){return Math.E}],"^":[Dt,[Dt,Dt],function(A,D){var W=D[0],ce=D[1];return Math.pow(W.evaluate(A),ce.evaluate(A))}],sqrt:[Dt,[Dt],function(A,D){var W=D[0];return Math.sqrt(W.evaluate(A))}],log10:[Dt,[Dt],function(A,D){var W=D[0];return Math.log(W.evaluate(A))/Math.LN10}],ln:[Dt,[Dt],function(A,D){var W=D[0];return Math.log(W.evaluate(A))}],log2:[Dt,[Dt],function(A,D){var W=D[0];return Math.log(W.evaluate(A))/Math.LN2}],sin:[Dt,[Dt],function(A,D){var W=D[0];return Math.sin(W.evaluate(A))}],cos:[Dt,[Dt],function(A,D){var W=D[0];return Math.cos(W.evaluate(A))}],tan:[Dt,[Dt],function(A,D){var W=D[0];return Math.tan(W.evaluate(A))}],asin:[Dt,[Dt],function(A,D){var W=D[0];return Math.asin(W.evaluate(A))}],acos:[Dt,[Dt],function(A,D){var W=D[0];return Math.acos(W.evaluate(A))}],atan:[Dt,[Dt],function(A,D){var W=D[0];return Math.atan(W.evaluate(A))}],min:[Dt,wo(Dt),function(A,D){return Math.min.apply(Math,D.map(function(W){return W.evaluate(A)}))}],max:[Dt,wo(Dt),function(A,D){return Math.max.apply(Math,D.map(function(W){return W.evaluate(A)}))}],abs:[Dt,[Dt],function(A,D){var W=D[0];return Math.abs(W.evaluate(A))}],round:[Dt,[Dt],function(A,D){var W=D[0].evaluate(A);return W<0?-Math.round(-W):Math.round(W)}],floor:[Dt,[Dt],function(A,D){var W=D[0];return Math.floor(W.evaluate(A))}],ceil:[Dt,[Dt],function(A,D){var W=D[0];return Math.ceil(W.evaluate(A))}],"filter-==":[Xt,[Bt,Vt],function(A,D){var W=D[0],ce=D[1];return A.properties()[W.value]===ce.value}],"filter-id-==":[Xt,[Vt],function(A,D){var W=D[0];return A.id()===W.value}],"filter-type-==":[Xt,[Bt],function(A,D){var W=D[0];return A.geometryType()===W.value}],"filter-<":[Xt,[Bt,Vt],function(A,D){var W=D[0],ce=D[1],Se=A.properties()[W.value],Ie=ce.value;return typeof Se==typeof Ie&&Se<Ie}],"filter-id-<":[Xt,[Vt],function(A,D){var W=D[0],ce=A.id(),Se=W.value;return typeof ce==typeof Se&&ce<Se}],"filter->":[Xt,[Bt,Vt],function(A,D){var W=D[0],ce=D[1],Se=A.properties()[W.value],Ie=ce.value;return typeof Se==typeof Ie&&Se>Ie}],"filter-id->":[Xt,[Vt],function(A,D){var W=D[0],ce=A.id(),Se=W.value;return typeof ce==typeof Se&&ce>Se}],"filter-<=":[Xt,[Bt,Vt],function(A,D){var W=D[0],ce=D[1],Se=A.properties()[W.value],Ie=ce.value;return typeof Se==typeof Ie&&Se<=Ie}],"filter-id-<=":[Xt,[Vt],function(A,D){var W=D[0],ce=A.id(),Se=W.value;return typeof ce==typeof Se&&ce<=Se}],"filter->=":[Xt,[Bt,Vt],function(A,D){var W=D[0],ce=D[1],Se=A.properties()[W.value],Ie=ce.value;return typeof Se==typeof Ie&&Se>=Ie}],"filter-id->=":[Xt,[Vt],function(A,D){var W=D[0],ce=A.id(),Se=W.value;return typeof ce==typeof Se&&ce>=Se}],"filter-has":[Xt,[Vt],function(A,D){return D[0].value in A.properties()}],"filter-has-id":[Xt,[],function(A){return A.id()!==null&&A.id()!==void 0}],"filter-type-in":[Xt,[fn(Bt)],function(A,D){return D[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[Xt,[fn(Vt)],function(A,D){return D[0].value.indexOf(A.id())>=0}],"filter-in-small":[Xt,[Bt,fn(Vt)],function(A,D){var W=D[0];return D[1].value.indexOf(A.properties()[W.value])>=0}],"filter-in-large":[Xt,[Bt,fn(Vt)],function(A,D){var W=D[0],ce=D[1];return function(Se,Ie,Ve,tt){for(;Ve<=tt;){var ct=Ve+tt>>1;if(Ie[ct]===Se)return!0;Ie[ct]>Se?tt=ct-1:Ve=ct+1}return!1}(A.properties()[W.value],ce.value,0,ce.value.length-1)}],all:{type:Xt,overloads:[[[Xt,Xt],function(A,D){var W=D[0],ce=D[1];return W.evaluate(A)&&ce.evaluate(A)}],[wo(Xt),function(A,D){for(var W=0,ce=D;W<ce.length;W+=1)if(!ce[W].evaluate(A))return!1;return!0}]]},any:{type:Xt,overloads:[[[Xt,Xt],function(A,D){var W=D[0],ce=D[1];return W.evaluate(A)||ce.evaluate(A)}],[wo(Xt),function(A,D){for(var W=0,ce=D;W<ce.length;W+=1)if(ce[W].evaluate(A))return!0;return!1}]]},"!":[Xt,[Xt],function(A,D){return!D[0].evaluate(A)}],"is-supported-script":[Xt,[Bt],function(A,D){var W=D[0],ce=A.globals&&A.globals.isSupportedScript;return!ce||ce(W.evaluate(A))}],upcase:[Bt,[Bt],function(A,D){return D[0].evaluate(A).toUpperCase()}],downcase:[Bt,[Bt],function(A,D){return D[0].evaluate(A).toLowerCase()}],concat:[Bt,wo(Vt),function(A,D){return D.map(function(W){return mr(W.evaluate(A))}).join("")}],"resolved-locale":[Bt,[on],function(A,D){return D[0].evaluate(A).resolvedLocale()}]});var fs=function(A,D){this.expression=A,this._warningHistory={},this._evaluator=new Qt,this._defaultValue=D?function(W){return W.type==="color"&&Zs(W.default)?new Cn(0,0,0,0):W.type==="color"?Cn.parse(W.default)||null:W.default===void 0?null:W.default}(D):null,this._enumValues=D&&D.type==="enum"?D.values:null};function Ds(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in Ws}function Jo(A,D){var W=new Ir(Ws,[],D?function(Se){var Ie={color:an,string:Bt,number:Dt,enum:Bt,boolean:Xt,formatted:Sn,resolvedImage:Ln};return Se.type==="array"?fn(Ie[Se.value]||Vt,Se.length):Ie[Se.type]}(D):void 0),ce=W.parse(A,void 0,void 0,void 0,D&&D.type==="string"?{typeAnnotation:"coerce"}:void 0);return ce?lu(new fs(ce,D)):us(W.errors)}fs.prototype.evaluateWithoutErrorHandling=function(A,D,W,ce,Se,Ie){return this._evaluator.globals=A,this._evaluator.feature=D,this._evaluator.featureState=W,this._evaluator.canonical=ce,this._evaluator.availableImages=Se||null,this._evaluator.formattedSection=Ie,this.expression.evaluate(this._evaluator)},fs.prototype.evaluate=function(A,D,W,ce,Se,Ie){this._evaluator.globals=A,this._evaluator.feature=D||null,this._evaluator.featureState=W||null,this._evaluator.canonical=ce,this._evaluator.availableImages=Se||null,this._evaluator.formattedSection=Ie||null;try{var Ve=this.expression.evaluate(this._evaluator);if(Ve==null||typeof Ve=="number"&&Ve!=Ve)return this._defaultValue;if(this._enumValues&&!(Ve in this._enumValues))throw new tn("Expected value to be one of "+Object.keys(this._enumValues).map(function(tt){return JSON.stringify(tt)}).join(", ")+", but found "+JSON.stringify(Ve)+" instead.");return Ve}catch(tt){return this._warningHistory[tt.message]||(this._warningHistory[tt.message]=!0,typeof console<"u"&&console.warn(tt.message)),this._defaultValue}};var To=function(A,D){this.kind=A,this._styleExpression=D,this.isStateDependent=A!=="constant"&&!fr(D.expression)};To.prototype.evaluateWithoutErrorHandling=function(A,D,W,ce,Se,Ie){return this._styleExpression.evaluateWithoutErrorHandling(A,D,W,ce,Se,Ie)},To.prototype.evaluate=function(A,D,W,ce,Se,Ie){return this._styleExpression.evaluate(A,D,W,ce,Se,Ie)};var Js=function(A,D,W,ce){this.kind=A,this.zoomStops=W,this._styleExpression=D,this.isStateDependent=A!=="camera"&&!fr(D.expression),this.interpolationType=ce};function Pu(A,D){if((A=Jo(A,D)).result==="error")return A;var W=A.value.expression,ce=hr(W);if(!ce&&!Zo(D))return us([new Tt("","data expressions not supported")]);var Se=xr(W,["zoom"]);if(!Se&&!Xo(D))return us([new Tt("","zoom expressions not supported")]);var Ie=Gl(W);if(!Ie&&!Se)return us([new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ie instanceof Tt)return us([Ie]);if(Ie instanceof ca&&!cs(D))return us([new Tt("",'"interpolate" expressions cannot be used with this property')]);if(!Ie)return lu(new To(ce?"constant":"source",A.value));var Ve=Ie instanceof ca?Ie.interpolation:void 0;return lu(new Js(ce?"camera":"composite",A.value,Ie.labels,Ve))}Js.prototype.evaluateWithoutErrorHandling=function(A,D,W,ce,Se,Ie){return this._styleExpression.evaluateWithoutErrorHandling(A,D,W,ce,Se,Ie)},Js.prototype.evaluate=function(A,D,W,ce,Se,Ie){return this._styleExpression.evaluate(A,D,W,ce,Se,Ie)},Js.prototype.interpolationFactor=function(A,D,W){return this.interpolationType?ca.interpolationFactor(this.interpolationType,A,D,W):0};var yl=function(A,D){this._parameters=A,this._specification=D,xt(this,ql(this._parameters,this._specification))};function Gl(A){var D=null;if(A instanceof _o)D=Gl(A.result);else if(A instanceof Io)for(var W=0,ce=A.args;W<ce.length;W+=1){var Se=ce[W];if(D=Gl(Se))break}else(A instanceof Fr||A instanceof ca)&&A.input instanceof bn&&A.input.name==="zoom"&&(D=A);return D instanceof Tt||A.eachChild(function(Ie){var Ve=Gl(Ie);Ve instanceof Tt?D=Ve:!D&&Ve?D=new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&Ve&&D!==Ve&&(D=new Tt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}function ro(A){var D=A.key,W=A.value,ce=A.valueSpec||{},Se=A.objectElementValidators||{},Ie=A.style,Ve=A.styleSpec,tt=[],ct=ri(W);if(ct!=="object")return[new gt(D,W,"object expected, "+ct+" found")];for(var wt in W){var At=wt.split(".")[0],Nt=ce[At]||ce["*"],Yt=void 0;if(Se[At])Yt=Se[At];else if(ce[At])Yt=fo;else if(Se["*"])Yt=Se["*"];else{if(!ce["*"]){tt.push(new gt(D,W[wt],'unknown property "'+wt+'"'));continue}Yt=fo}tt=tt.concat(Yt({key:(D&&D+".")+wt,value:W[wt],valueSpec:Nt,style:Ie,styleSpec:Ve,object:W,objectKey:wt},W))}for(var Ut in ce)Se[Ut]||ce[Ut].required&&ce[Ut].default===void 0&&W[Ut]===void 0&&tt.push(new gt(D,W,'missing required property "'+Ut+'"'));return tt}function Wl(A){var D=A.value,W=A.valueSpec,ce=A.style,Se=A.styleSpec,Ie=A.key,Ve=A.arrayElementValidator||fo;if(ri(D)!=="array")return[new gt(Ie,D,"array expected, "+ri(D)+" found")];if(W.length&&D.length!==W.length)return[new gt(Ie,D,"array length "+W.length+" expected, length "+D.length+" found")];if(W["min-length"]&&D.length<W["min-length"])return[new gt(Ie,D,"array length at least "+W["min-length"]+" expected, length "+D.length+" found")];var tt={type:W.value,values:W.values};Se.$version<7&&(tt.function=W.function),ri(W.value)==="object"&&(tt=W.value);for(var ct=[],wt=0;wt<D.length;wt++)ct=ct.concat(Ve({array:D,arrayIndex:wt,value:D[wt],valueSpec:tt,style:ce,styleSpec:Se,key:Ie+"["+wt+"]"}));return ct}function Iu(A){var D=A.key,W=A.value,ce=A.valueSpec,Se=ri(W);return Se==="number"&&W!=W&&(Se="NaN"),Se!=="number"?[new gt(D,W,"number expected, "+Se+" found")]:"minimum"in ce&&W<ce.minimum?[new gt(D,W,W+" is less than the minimum value "+ce.minimum)]:"maximum"in ce&&W>ce.maximum?[new gt(D,W,W+" is greater than the maximum value "+ce.maximum)]:[]}function Ks(A){var D,W,ce,Se=A.valueSpec,Ie=dt(A.value.type),Ve={},tt=Ie!=="categorical"&&A.value.property===void 0,ct=!tt,wt=ri(A.value.stops)==="array"&&ri(A.value.stops[0])==="array"&&ri(A.value.stops[0][0])==="object",At=ro({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Ut){if(Ie==="identity")return[new gt(Ut.key,Ut.value,'identity function may not have a "stops" property')];var sn=[],un=Ut.value;return sn=sn.concat(Wl({key:Ut.key,value:un,valueSpec:Ut.valueSpec,style:Ut.style,styleSpec:Ut.styleSpec,arrayElementValidator:Nt})),ri(un)==="array"&&un.length===0&&sn.push(new gt(Ut.key,un,"array must have at least one stop")),sn},default:function(Ut){return fo({key:Ut.key,value:Ut.value,valueSpec:Se,style:Ut.style,styleSpec:Ut.styleSpec})}}});return Ie==="identity"&&tt&&At.push(new gt(A.key,A.value,'missing required property "property"')),Ie==="identity"||A.value.stops||At.push(new gt(A.key,A.value,'missing required property "stops"')),Ie==="exponential"&&A.valueSpec.expression&&!cs(A.valueSpec)&&At.push(new gt(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(ct&&!Zo(A.valueSpec)?At.push(new gt(A.key,A.value,"property functions not supported")):tt&&!Xo(A.valueSpec)&&At.push(new gt(A.key,A.value,"zoom functions not supported"))),Ie!=="categorical"&&!wt||A.value.property!==void 0||At.push(new gt(A.key,A.value,'"property" property is required')),At;function Nt(Ut){var sn=[],un=Ut.value,En=Ut.key;if(ri(un)!=="array")return[new gt(En,un,"array expected, "+ri(un)+" found")];if(un.length!==2)return[new gt(En,un,"array length 2 expected, length "+un.length+" found")];if(wt){if(ri(un[0])!=="object")return[new gt(En,un,"object expected, "+ri(un[0])+" found")];if(un[0].zoom===void 0)return[new gt(En,un,"object stop key must have zoom")];if(un[0].value===void 0)return[new gt(En,un,"object stop key must have value")];if(ce&&ce>dt(un[0].zoom))return[new gt(En,un[0].zoom,"stop zoom values must appear in ascending order")];dt(un[0].zoom)!==ce&&(ce=dt(un[0].zoom),W=void 0,Ve={}),sn=sn.concat(ro({key:En+"[0]",value:un[0],valueSpec:{zoom:{}},style:Ut.style,styleSpec:Ut.styleSpec,objectElementValidators:{zoom:Iu,value:Yt}}))}else sn=sn.concat(Yt({key:En+"[0]",value:un[0],valueSpec:{},style:Ut.style,styleSpec:Ut.styleSpec},un));return Ds(Lt(un[1]))?sn.concat([new gt(En+"[1]",un[1],"expressions are not allowed in function stops.")]):sn.concat(fo({key:En+"[1]",value:un[1],valueSpec:Se,style:Ut.style,styleSpec:Ut.styleSpec}))}function Yt(Ut,sn){var un=ri(Ut.value),En=dt(Ut.value),Mn=Ut.value!==null?Ut.value:sn;if(D){if(un!==D)return[new gt(Ut.key,Mn,un+" stop domain type must match previous stop domain type "+D)]}else D=un;if(un!=="number"&&un!=="string"&&un!=="boolean")return[new gt(Ut.key,Mn,"stop domain value must be a number, string, or boolean")];if(un!=="number"&&Ie!=="categorical"){var Nn="number expected, "+un+" found";return Zo(Se)&&Ie===void 0&&(Nn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gt(Ut.key,Mn,Nn)]}return Ie!=="categorical"||un!=="number"||isFinite(En)&&Math.floor(En)===En?Ie!=="categorical"&&un==="number"&&W!==void 0&&En<W?[new gt(Ut.key,Mn,"stop domain values must appear in ascending order")]:(W=En,Ie==="categorical"&&En in Ve?[new gt(Ut.key,Mn,"stop domain values must be unique")]:(Ve[En]=!0,[])):[new gt(Ut.key,Mn,"integer expected, found "+En)]}}function Rs(A){var D=(A.expressionContext==="property"?Pu:Jo)(Lt(A.value),A.valueSpec);if(D.result==="error")return D.value.map(function(ce){return new gt(""+A.key+ce.key,A.value,ce.message)});var W=D.value.expression||D.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!W.outputDefined())return[new gt(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!fr(W))return[new gt(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!fr(W))return[new gt(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!xr(W,["zoom","feature-state"]))return[new gt(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!hr(W))return[new gt(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qs(A){var D=A.key,W=A.value,ce=A.valueSpec,Se=[];return Array.isArray(ce.values)?ce.values.indexOf(dt(W))===-1&&Se.push(new gt(D,W,"expected one of ["+ce.values.join(", ")+"], "+JSON.stringify(W)+" found")):Object.keys(ce.values).indexOf(dt(W))===-1&&Se.push(new gt(D,W,"expected one of ["+Object.keys(ce.values).join(", ")+"], "+JSON.stringify(W)+" found")),Se}function zs(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var D=0,W=A.slice(1);D<W.length;D+=1){var ce=W[D];if(!zs(ce)&&typeof ce!="boolean")return!1}return!0;default:return!0}}yl.deserialize=function(A){return new yl(A._parameters,A._specification)},yl.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var Fs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xl(A){if(A==null)return{filter:function(){return!0},needGeometry:!1};zs(A)||(A=hs(A));var D=Jo(A,Fs);if(D.result==="error")throw new Error(D.value.map(function(W){return W.key+": "+W.message}).join(", "));return{filter:function(W,ce,Se){return D.value.evaluate(W,ce,{},Se)},needGeometry:vi(A)}}function Zl(A,D){return A<D?-1:A>D?1:0}function vi(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var D=1;D<A.length;D++)if(vi(A[D]))return!0;return!1}function hs(A){if(!A)return!0;var D,W=A[0];return A.length<=1?W!=="any":W==="=="?ka(A[1],A[2],"=="):W==="!="?gi(ka(A[1],A[2],"==")):W==="<"||W===">"||W==="<="||W===">="?ka(A[1],A[2],W):W==="any"?(D=A.slice(1),["any"].concat(D.map(hs))):W==="all"?["all"].concat(A.slice(1).map(hs)):W==="none"?["all"].concat(A.slice(1).map(hs).map(gi)):W==="in"?ko(A[1],A.slice(2)):W==="!in"?gi(ko(A[1],A.slice(2))):W==="has"?ui(A[1]):W==="!has"?gi(ui(A[1])):W!=="within"||A}function ka(A,D,W){switch(A){case"$type":return["filter-type-"+W,D];case"$id":return["filter-id-"+W,D];default:return["filter-"+W,A,D]}}function ko(A,D){if(D.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",D]];case"$id":return["filter-id-in",["literal",D]];default:return D.length>200&&!D.some(function(W){return typeof W!=typeof D[0]})?["filter-in-large",A,["literal",D.sort(Zl)]]:["filter-in-small",A,["literal",D]]}}function ui(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function gi(A){return["!",A]}function io(A){return zs(Lt(A.value))?Rs(xt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$s(A)}function $s(A){var D=A.value,W=A.key;if(ri(D)!=="array")return[new gt(W,D,"array expected, "+ri(D)+" found")];var ce,Se=A.styleSpec,Ie=[];if(D.length<1)return[new gt(W,D,"filter array must have at least 1 element")];switch(Ie=Ie.concat(Qs({key:W+"[0]",value:D[0],valueSpec:Se.filter_operator,style:A.style,styleSpec:A.styleSpec})),dt(D[0])){case"<":case"<=":case">":case">=":D.length>=2&&dt(D[1])==="$type"&&Ie.push(new gt(W,D,'"$type" cannot be use with operator "'+D[0]+'"'));case"==":case"!=":D.length!==3&&Ie.push(new gt(W,D,'filter array for operator "'+D[0]+'" must have 3 elements'));case"in":case"!in":D.length>=2&&(ce=ri(D[1]))!=="string"&&Ie.push(new gt(W+"[1]",D[1],"string expected, "+ce+" found"));for(var Ve=2;Ve<D.length;Ve++)ce=ri(D[Ve]),dt(D[1])==="$type"?Ie=Ie.concat(Qs({key:W+"["+Ve+"]",value:D[Ve],valueSpec:Se.geometry_type,style:A.style,styleSpec:A.styleSpec})):ce!=="string"&&ce!=="number"&&ce!=="boolean"&&Ie.push(new gt(W+"["+Ve+"]",D[Ve],"string, number, or boolean expected, "+ce+" found"));break;case"any":case"all":case"none":for(var tt=1;tt<D.length;tt++)Ie=Ie.concat($s({key:W+"["+tt+"]",value:D[tt],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":ce=ri(D[1]),D.length!==2?Ie.push(new gt(W,D,'filter array for "'+D[0]+'" operator must have 2 elements')):ce!=="string"&&Ie.push(new gt(W+"[1]",D[1],"string expected, "+ce+" found"));break;case"within":ce=ri(D[1]),D.length!==2?Ie.push(new gt(W,D,'filter array for "'+D[0]+'" operator must have 2 elements')):ce!=="object"&&Ie.push(new gt(W+"[1]",D[1],"object expected, "+ce+" found"))}return Ie}function bl(A,D){var W=A.key,ce=A.style,Se=A.styleSpec,Ie=A.value,Ve=A.objectKey,tt=Se[D+"_"+A.layerType];if(!tt)return[];var ct=Ve.match(/^(.*)-transition$/);if(D==="paint"&&ct&&tt[ct[1]]&&tt[ct[1]].transition)return fo({key:W,value:Ie,valueSpec:Se.transition,style:ce,styleSpec:Se});var wt,At=A.valueSpec||tt[Ve];if(!At)return[new gt(W,Ie,'unknown property "'+Ve+'"')];if(ri(Ie)==="string"&&Zo(At)&&!At.tokens&&(wt=/^{([^}]+)}$/.exec(Ie)))return[new gt(W,Ie,'"'+Ve+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(wt[1])+" }`.")];var Nt=[];return A.layerType==="symbol"&&(Ve==="text-field"&&ce&&!ce.glyphs&&Nt.push(new gt(W,Ie,'use of "text-field" requires a style "glyphs" property')),Ve==="text-font"&&Zs(Lt(Ie))&&dt(Ie.type)==="identity"&&Nt.push(new gt(W,Ie,'"text-font" does not support identity functions'))),Nt.concat(fo({key:A.key,value:Ie,valueSpec:At,style:ce,styleSpec:Se,expressionContext:"property",propertyType:D,propertyKey:Ve}))}function Xl(A){return bl(A,"paint")}function _l(A){return bl(A,"layout")}function wl(A){var D=[],W=A.value,ce=A.key,Se=A.style,Ie=A.styleSpec;W.type||W.ref||D.push(new gt(ce,W,'either "type" or "ref" is required'));var Ve,tt=dt(W.type),ct=dt(W.ref);if(W.id)for(var wt=dt(W.id),At=0;At<A.arrayIndex;At++){var Nt=Se.layers[At];dt(Nt.id)===wt&&D.push(new gt(ce,W.id,'duplicate layer id "'+W.id+'", previously used at line '+Nt.id.__line__))}if("ref"in W)["type","source","source-layer","filter","layout"].forEach(function(sn){sn in W&&D.push(new gt(ce,W[sn],'"'+sn+'" is prohibited for ref layers'))}),Se.layers.forEach(function(sn){dt(sn.id)===ct&&(Ve=sn)}),Ve?Ve.ref?D.push(new gt(ce,W.ref,"ref cannot reference another ref layer")):tt=dt(Ve.type):D.push(new gt(ce,W.ref,'ref layer "'+ct+'" not found'));else if(tt!=="background")if(W.source){var Yt=Se.sources&&Se.sources[W.source],Ut=Yt&&dt(Yt.type);Yt?Ut==="vector"&&tt==="raster"?D.push(new gt(ce,W.source,'layer "'+W.id+'" requires a raster source')):Ut==="raster"&&tt!=="raster"?D.push(new gt(ce,W.source,'layer "'+W.id+'" requires a vector source')):Ut!=="vector"||W["source-layer"]?Ut==="raster-dem"&&tt!=="hillshade"?D.push(new gt(ce,W.source,"raster-dem source can only be used with layer type 'hillshade'.")):tt!=="line"||!W.paint||!W.paint["line-gradient"]||Ut==="geojson"&&Yt.lineMetrics||D.push(new gt(ce,W,'layer "'+W.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):D.push(new gt(ce,W,'layer "'+W.id+'" must specify a "source-layer"')):D.push(new gt(ce,W.source,'source "'+W.source+'" not found'))}else D.push(new gt(ce,W,'missing required property "source"'));return D=D.concat(ro({key:ce,value:W,valueSpec:Ie.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return fo({key:ce+".type",value:W.type,valueSpec:Ie.layer.type,style:A.style,styleSpec:A.styleSpec,object:W,objectKey:"type"})},filter:io,layout:function(sn){return ro({layer:W,key:sn.key,value:sn.value,style:sn.style,styleSpec:sn.styleSpec,objectElementValidators:{"*":function(un){return _l(xt({layerType:tt},un))}}})},paint:function(sn){return ro({layer:W,key:sn.key,value:sn.value,style:sn.style,styleSpec:sn.styleSpec,objectElementValidators:{"*":function(un){return Xl(xt({layerType:tt},un))}}})}}})),D}function co(A){var D=A.value,W=A.key,ce=ri(D);return ce!=="string"?[new gt(W,D,"string expected, "+ce+" found")]:[]}var ps={promoteId:function(A){var D=A.key,W=A.value;if(ri(W)==="string")return co({key:D,value:W});var ce=[];for(var Se in W)ce.push.apply(ce,co({key:D+"."+Se,value:W[Se]}));return ce}};function ds(A){var D=A.value,W=A.key,ce=A.styleSpec,Se=A.style;if(!D.type)return[new gt(W,D,'"type" is required')];var Ie,Ve=dt(D.type);switch(Ve){case"vector":case"raster":case"raster-dem":return ro({key:W,value:D,valueSpec:ce["source_"+Ve.replace("-","_")],style:A.style,styleSpec:ce,objectElementValidators:ps});case"geojson":if(Ie=ro({key:W,value:D,valueSpec:ce.source_geojson,style:Se,styleSpec:ce,objectElementValidators:ps}),D.cluster)for(var tt in D.clusterProperties){var ct=D.clusterProperties[tt],wt=ct[0],At=ct[1],Nt=typeof wt=="string"?[wt,["accumulated"],["get",tt]]:wt;Ie.push.apply(Ie,Rs({key:W+"."+tt+".map",value:At,expressionContext:"cluster-map"})),Ie.push.apply(Ie,Rs({key:W+"."+tt+".reduce",value:Nt,expressionContext:"cluster-reduce"}))}return Ie;case"video":return ro({key:W,value:D,valueSpec:ce.source_video,style:Se,styleSpec:ce});case"image":return ro({key:W,value:D,valueSpec:ce.source_image,style:Se,styleSpec:ce});case"canvas":return[new gt(W,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qs({key:W+".type",value:D.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Se,styleSpec:ce})}}function Ca(A){var D=A.value,W=A.styleSpec,ce=W.light,Se=A.style,Ie=[],Ve=ri(D);if(D===void 0)return Ie;if(Ve!=="object")return Ie.concat([new gt("light",D,"object expected, "+Ve+" found")]);for(var tt in D){var ct=tt.match(/^(.*)-transition$/);Ie=ct&&ce[ct[1]]&&ce[ct[1]].transition?Ie.concat(fo({key:tt,value:D[tt],valueSpec:W.transition,style:Se,styleSpec:W})):ce[tt]?Ie.concat(fo({key:tt,value:D[tt],valueSpec:ce[tt],style:Se,styleSpec:W})):Ie.concat([new gt(tt,D[tt],'unknown property "'+tt+'"')])}return Ie}var Tl={"*":function(){return[]},array:Wl,boolean:function(A){var D=A.value,W=A.key,ce=ri(D);return ce!=="boolean"?[new gt(W,D,"boolean expected, "+ce+" found")]:[]},number:Iu,color:function(A){var D=A.key,W=A.value,ce=ri(W);return ce!=="string"?[new gt(D,W,"color expected, "+ce+" found")]:wn(W)===null?[new gt(D,W,'color expected, "'+W+'" found')]:[]},constants:yt,enum:Qs,filter:io,function:Ks,layer:wl,object:ro,source:ds,light:Ca,string:co,formatted:function(A){return co(A).length===0?[]:Rs(A)},resolvedImage:function(A){return co(A).length===0?[]:Rs(A)}};function fo(A){var D=A.value,W=A.valueSpec,ce=A.styleSpec;return W.expression&&Zs(dt(D))?Ks(A):W.expression&&Ds(Lt(D))?Rs(A):W.type&&Tl[W.type]?Tl[W.type](A):ro(xt({},A,{valueSpec:W.type?ce[W.type]:W}))}function fa(A){var D=A.value,W=A.key,ce=co(A);return ce.length||(D.indexOf("{fontstack}")===-1&&ce.push(new gt(W,D,'"glyphs" url must include a "{fontstack}" token')),D.indexOf("{range}")===-1&&ce.push(new gt(W,D,'"glyphs" url must include a "{range}" token'))),ce}function va(A,D){D===void 0&&(D=$e);var W=[];return W=W.concat(fo({key:"",value:A,valueSpec:D.$root,styleSpec:D,style:A,objectElementValidators:{glyphs:fa,"*":function(){return[]}}})),A.constants&&(W=W.concat(yt({key:"constants",value:A.constants,style:A,styleSpec:D}))),Mi(W)}function Mi(A){return[].concat(A).sort(function(D,W){return D.line-W.line})}function ma(A){return function(){for(var D=[],W=arguments.length;W--;)D[W]=arguments[W];return Mi(A.apply(this,D))}}va.source=ma(ds),va.light=ma(Ca),va.layer=ma(wl),va.filter=ma(io),va.paintProperty=ma(Xl),va.layoutProperty=ma(_l);var Fo=va,Bs=Fo.light,Mo=Fo.paintProperty,gs=Fo.layoutProperty;function ja(A,D){var W=!1;if(D&&D.length)for(var ce=0,Se=D;ce<Se.length;ce+=1){var Ie=Se[ce];A.fire(new Ue(new Error(Ie.message))),W=!0}return W}var Ns=ho,Ko=3;function ho(A,D,W){var ce=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var Se=new Int32Array(this.arrayBuffer);A=Se[0],D=Se[1],W=Se[2],this.d=D+2*W;for(var Ie=0;Ie<this.d*this.d;Ie++){var Ve=Se[Ko+Ie],tt=Se[Ko+Ie+1];ce.push(Ve===tt?null:Se.subarray(Ve,tt))}var ct=Se[Ko+ce.length],wt=Se[Ko+ce.length+1];this.keys=Se.subarray(ct,wt),this.bboxes=Se.subarray(wt),this.insert=this._insertReadonly}else{this.d=D+2*W;for(var At=0;At<this.d*this.d;At++)ce.push([]);this.keys=[],this.bboxes=[]}this.n=D,this.extent=A,this.padding=W,this.scale=D/A,this.uid=0;var Nt=W/D*A;this.min=-Nt,this.max=A+Nt}ho.prototype.insert=function(A,D,W,ce,Se){this._forEachCell(D,W,ce,Se,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(D),this.bboxes.push(W),this.bboxes.push(ce),this.bboxes.push(Se)},ho.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ho.prototype._insertCell=function(A,D,W,ce,Se,Ie){this.cells[Se].push(Ie)},ho.prototype.query=function(A,D,W,ce,Se){var Ie=this.min,Ve=this.max;if(A<=Ie&&D<=Ie&&Ve<=W&&Ve<=ce&&!Se)return Array.prototype.slice.call(this.keys);var tt=[];return this._forEachCell(A,D,W,ce,this._queryCell,tt,{},Se),tt},ho.prototype._queryCell=function(A,D,W,ce,Se,Ie,Ve,tt){var ct=this.cells[Se];if(ct!==null)for(var wt=this.keys,At=this.bboxes,Nt=0;Nt<ct.length;Nt++){var Yt=ct[Nt];if(Ve[Yt]===void 0){var Ut=4*Yt;(tt?tt(At[Ut+0],At[Ut+1],At[Ut+2],At[Ut+3]):A<=At[Ut+2]&&D<=At[Ut+3]&&W>=At[Ut+0]&&ce>=At[Ut+1])?(Ve[Yt]=!0,Ie.push(wt[Yt])):Ve[Yt]=!1}}},ho.prototype._forEachCell=function(A,D,W,ce,Se,Ie,Ve,tt){for(var ct=this._convertToCellCoord(A),wt=this._convertToCellCoord(D),At=this._convertToCellCoord(W),Nt=this._convertToCellCoord(ce),Yt=ct;Yt<=At;Yt++)for(var Ut=wt;Ut<=Nt;Ut++){var sn=this.d*Ut+Yt;if((!tt||tt(this._convertFromCellCoord(Yt),this._convertFromCellCoord(Ut),this._convertFromCellCoord(Yt+1),this._convertFromCellCoord(Ut+1)))&&Se.call(this,A,D,W,ce,sn,Ie,Ve,tt))return}},ho.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},ho.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},ho.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,D=Ko+this.cells.length+1+1,W=0,ce=0;ce<this.cells.length;ce++)W+=this.cells[ce].length;var Se=new Int32Array(D+W+this.keys.length+this.bboxes.length);Se[0]=this.extent,Se[1]=this.n,Se[2]=this.padding;for(var Ie=D,Ve=0;Ve<A.length;Ve++){var tt=A[Ve];Se[Ko+Ve]=Ie,Se.set(tt,Ie),Ie+=tt.length}return Se[Ko+A.length]=Ie,Se.set(this.keys,Ie),Ie+=this.keys.length,Se[Ko+A.length+1]=Ie,Se.set(this.bboxes,Ie),Ie+=this.bboxes.length,Se.buffer};var po=n.ImageData,Si=n.ImageBitmap,Ao={};function Or(A,D,W){W===void 0&&(W={}),Object.defineProperty(D,"_classRegistryKey",{value:A,writeable:!1}),Ao[A]={klass:D,omit:W.omit||[],shallow:W.shallow||[]}}for(var kl in Or("Object",Object),Ns.serialize=function(A,D){var W=A.toArrayBuffer();return D&&D.push(W),{buffer:W}},Ns.deserialize=function(A){return new Ns(A.buffer)},Or("Grid",Ns),Or("Color",Cn),Or("Error",Error),Or("ResolvedImage",sr),Or("StylePropertyFunction",yl),Or("StyleExpression",fs,{omit:["_evaluator"]}),Or("ZoomDependentExpression",Js),Or("ZoomConstantExpression",To),Or("CompoundExpression",bn,{omit:["_evaluate"]}),Ws)Ws[kl]._classRegistryKey||Or("Expression_"+kl,Ws[kl]);function uu(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function vs(A){return Si&&A instanceof Si}function ms(A,D){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(uu(A)||vs(A))return D&&D.push(A),A;if(ArrayBuffer.isView(A)){var W=A;return D&&D.push(W.buffer),W}if(A instanceof po)return D&&D.push(A.data.buffer),A;if(Array.isArray(A)){for(var ce=[],Se=0,Ie=A;Se<Ie.length;Se+=1){var Ve=Ie[Se];ce.push(ms(Ve,D))}return ce}if(typeof A=="object"){var tt=A.constructor,ct=tt._classRegistryKey;if(!ct)throw new Error("can't serialize object of unregistered class");var wt=tt.serialize?tt.serialize(A,D):{};if(!tt.serialize){for(var At in A)if(A.hasOwnProperty(At)&&!(Ao[ct].omit.indexOf(At)>=0)){var Nt=A[At];wt[At]=Ao[ct].shallow.indexOf(At)>=0?Nt:ms(Nt,D)}A instanceof Error&&(wt.message=A.message)}if(wt.$name)throw new Error("$name property is reserved for worker serialization logic.");return ct!=="Object"&&(wt.$name=ct),wt}throw new Error("can't serialize object of type "+typeof A)}function js(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||uu(A)||vs(A)||ArrayBuffer.isView(A)||A instanceof po)return A;if(Array.isArray(A))return A.map(js);if(typeof A=="object"){var D=A.$name||"Object",W=Ao[D].klass;if(!W)throw new Error("can't deserialize unregistered class "+D);if(W.deserialize)return W.deserialize(A);for(var ce=Object.create(W.prototype),Se=0,Ie=Object.keys(A);Se<Ie.length;Se+=1){var Ve=Ie[Se];if(Ve!=="$name"){var tt=A[Ve];ce[Ve]=Ao[D].shallow.indexOf(Ve)>=0?tt:js(tt)}}return ce}throw new Error("can't deserialize object of type "+typeof A)}var el=function(){this.first=!0};el.prototype.update=function(A,D){var W=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=W,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=W,!0):(this.lastFloorZoom>W?(this.lastIntegerZoom=W+1,this.lastIntegerZoomTime=D):this.lastFloorZoom<W&&(this.lastIntegerZoom=W,this.lastIntegerZoomTime=D),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=W,!0))};var wr={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function Ml(A){for(var D=0,W=A;D<W.length;D+=1)if(Qo(W[D].charCodeAt(0)))return!0;return!1}function Qo(A){return!(A!==746&&A!==747&&(A<4352||!(wr["Bopomofo Extended"](A)||wr.Bopomofo(A)||wr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||wr["CJK Compatibility Ideographs"](A)||wr["CJK Compatibility"](A)||wr["CJK Radicals Supplement"](A)||wr["CJK Strokes"](A)||!(!wr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||wr["CJK Unified Ideographs Extension A"](A)||wr["CJK Unified Ideographs"](A)||wr["Enclosed CJK Letters and Months"](A)||wr["Hangul Compatibility Jamo"](A)||wr["Hangul Jamo Extended-A"](A)||wr["Hangul Jamo Extended-B"](A)||wr["Hangul Jamo"](A)||wr["Hangul Syllables"](A)||wr.Hiragana(A)||wr["Ideographic Description Characters"](A)||wr.Kanbun(A)||wr["Kangxi Radicals"](A)||wr["Katakana Phonetic Extensions"](A)||wr.Katakana(A)&&A!==12540||!(!wr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!wr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||wr["Unified Canadian Aboriginal Syllabics"](A)||wr["Unified Canadian Aboriginal Syllabics Extended"](A)||wr["Vertical Forms"](A)||wr["Yijing Hexagram Symbols"](A)||wr["Yi Syllables"](A)||wr["Yi Radicals"](A))))}function ha(A){return!(Qo(A)||function(D){return!!(wr["Latin-1 Supplement"](D)&&(D===167||D===169||D===174||D===177||D===188||D===189||D===190||D===215||D===247)||wr["General Punctuation"](D)&&(D===8214||D===8224||D===8225||D===8240||D===8241||D===8251||D===8252||D===8258||D===8263||D===8264||D===8265||D===8273)||wr["Letterlike Symbols"](D)||wr["Number Forms"](D)||wr["Miscellaneous Technical"](D)&&(D>=8960&&D<=8967||D>=8972&&D<=8991||D>=8996&&D<=9e3||D===9003||D>=9085&&D<=9114||D>=9150&&D<=9165||D===9167||D>=9169&&D<=9179||D>=9186&&D<=9215)||wr["Control Pictures"](D)&&D!==9251||wr["Optical Character Recognition"](D)||wr["Enclosed Alphanumerics"](D)||wr["Geometric Shapes"](D)||wr["Miscellaneous Symbols"](D)&&!(D>=9754&&D<=9759)||wr["Miscellaneous Symbols and Arrows"](D)&&(D>=11026&&D<=11055||D>=11088&&D<=11097||D>=11192&&D<=11243)||wr["CJK Symbols and Punctuation"](D)||wr.Katakana(D)||wr["Private Use Area"](D)||wr["CJK Compatibility Forms"](D)||wr["Small Form Variants"](D)||wr["Halfwidth and Fullwidth Forms"](D)||D===8734||D===8756||D===8757||D>=9984&&D<=10087||D>=10102&&D<=10131||D===65532||D===65533)}(A))}function ys(A){return wr.Arabic(A)||wr["Arabic Supplement"](A)||wr["Arabic Extended-A"](A)||wr["Arabic Presentation Forms-A"](A)||wr["Arabic Presentation Forms-B"](A)}function So(A){return A>=1424&&A<=2303||wr["Arabic Presentation Forms-A"](A)||wr["Arabic Presentation Forms-B"](A)}function go(A,D){return!(!D&&So(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||wr.Khmer(A))}function Oa(A){for(var D=0,W=A;D<W.length;D+=1)if(So(W[D].charCodeAt(0)))return!0;return!1}var Bo="deferred",vo="loading",$o="loaded",Al="error",xs=null,oi="unavailable",ya=null,Ua=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(oi=Al),xs&&xs(A)};function No(){Va.fire(new je("pluginStateChange",{pluginStatus:oi,pluginURL:ya}))}var Va=new at,tl=function(){return oi},nl=function(){if(oi!==Bo||!ya)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");oi=vo,No(),ya&&Ft({url:ya},function(A){A?Ua(A):(oi=$o,No())})},Ha={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return oi===$o||Ha.applyArabicShaping!=null},isLoading:function(){return oi===vo},setState:function(A){oi=A.pluginStatus,ya=A.pluginURL},isParsed:function(){return Ha.applyArabicShaping!=null&&Ha.processBidirectionalText!=null&&Ha.processStyledBidirectionalText!=null},getPluginURL:function(){return ya}},ii=function(A,D){this.zoom=A,D?(this.now=D.now,this.fadeDuration=D.fadeDuration,this.zoomHistory=D.zoomHistory,this.transition=D.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new el,this.transition={})};ii.prototype.isSupportedScript=function(A){return function(D,W){for(var ce=0,Se=D;ce<Se.length;ce+=1)if(!go(Se[ce].charCodeAt(0),W))return!1;return!0}(A,Ha.isLoaded())},ii.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ii.prototype.getCrossfadeParameters=function(){var A=this.zoom,D=A-Math.floor(A),W=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:D+(1-D)*W}:{fromScale:.5,toScale:1,t:1-(1-W)*D}};var jo=function(A,D){this.property=A,this.value=D,this.expression=function(W,ce){if(Zs(W))return new yl(W,ce);if(Ds(W)){var Se=Pu(W,ce);if(Se.result==="error")throw new Error(Se.value.map(function(Ve){return Ve.key+": "+Ve.message}).join(", "));return Se.value}var Ie=W;return typeof W=="string"&&ce.type==="color"&&(Ie=Cn.parse(W)),{kind:"constant",evaluate:function(){return Ie}}}(D===void 0?A.specification.default:D,A.specification)};jo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},jo.prototype.possiblyEvaluate=function(A,D,W){return this.property.possiblyEvaluate(this,A,D,W)};var Us=function(A){this.property=A,this.value=new jo(A,void 0)};Us.prototype.transitioned=function(A,D){return new rl(this.property,this.value,D,c({},A.transition,this.transition),A.now)},Us.prototype.untransitioned=function(){return new rl(this.property,this.value,null,{},0)};var Eo=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};Eo.prototype.getValue=function(A){return S(this._values[A].value.value)},Eo.prototype.setValue=function(A,D){this._values.hasOwnProperty(A)||(this._values[A]=new Us(this._values[A].property)),this._values[A].value=new jo(this._values[A].property,D===null?void 0:S(D))},Eo.prototype.getTransition=function(A){return S(this._values[A].transition)},Eo.prototype.setTransition=function(A,D){this._values.hasOwnProperty(A)||(this._values[A]=new Us(this._values[A].property)),this._values[A].transition=S(D)||void 0},Eo.prototype.serialize=function(){for(var A={},D=0,W=Object.keys(this._values);D<W.length;D+=1){var ce=W[D],Se=this.getValue(ce);Se!==void 0&&(A[ce]=Se);var Ie=this.getTransition(ce);Ie!==void 0&&(A[ce+"-transition"]=Ie)}return A},Eo.prototype.transitioned=function(A,D){for(var W=new il(this._properties),ce=0,Se=Object.keys(this._values);ce<Se.length;ce+=1){var Ie=Se[ce];W._values[Ie]=this._values[Ie].transitioned(A,D._values[Ie])}return W},Eo.prototype.untransitioned=function(){for(var A=new il(this._properties),D=0,W=Object.keys(this._values);D<W.length;D+=1){var ce=W[D];A._values[ce]=this._values[ce].untransitioned()}return A};var rl=function(A,D,W,ce,Se){this.property=A,this.value=D,this.begin=Se+ce.delay||0,this.end=this.begin+ce.duration||0,A.specification.transition&&(ce.delay||ce.duration)&&(this.prior=W)};rl.prototype.possiblyEvaluate=function(A,D,W){var ce=A.now||0,Se=this.value.possiblyEvaluate(A,D,W),Ie=this.prior;if(Ie){if(ce>this.end)return this.prior=null,Se;if(this.value.isDataDriven())return this.prior=null,Se;if(ce<this.begin)return Ie.possiblyEvaluate(A,D,W);var Ve=(ce-this.begin)/(this.end-this.begin);return this.property.interpolate(Ie.possiblyEvaluate(A,D,W),Se,function(tt){if(tt<=0)return 0;if(tt>=1)return 1;var ct=tt*tt,wt=ct*tt;return 4*(tt<.5?wt:3*(tt-ct)+wt-.75)}(Ve))}return Se};var il=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};il.prototype.possiblyEvaluate=function(A,D,W){for(var ce=new Vs(this._properties),Se=0,Ie=Object.keys(this._values);Se<Ie.length;Se+=1){var Ve=Ie[Se];ce._values[Ve]=this._values[Ve].possiblyEvaluate(A,D,W)}return ce},il.prototype.hasTransition=function(){for(var A=0,D=Object.keys(this._values);A<D.length;A+=1){var W=D[A];if(this._values[W].prior)return!0}return!1};var Lo=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};Lo.prototype.getValue=function(A){return S(this._values[A].value)},Lo.prototype.setValue=function(A,D){this._values[A]=new jo(this._values[A].property,D===null?void 0:S(D))},Lo.prototype.serialize=function(){for(var A={},D=0,W=Object.keys(this._values);D<W.length;D+=1){var ce=W[D],Se=this.getValue(ce);Se!==void 0&&(A[ce]=Se)}return A},Lo.prototype.possiblyEvaluate=function(A,D,W){for(var ce=new Vs(this._properties),Se=0,Ie=Object.keys(this._values);Se<Ie.length;Se+=1){var Ve=Ie[Se];ce._values[Ve]=this._values[Ve].possiblyEvaluate(A,D,W)}return ce};var Ei=function(A,D,W){this.property=A,this.value=D,this.parameters=W};Ei.prototype.isConstant=function(){return this.value.kind==="constant"},Ei.prototype.constantOr=function(A){return this.value.kind==="constant"?this.value.value:A},Ei.prototype.evaluate=function(A,D,W,ce){return this.property.evaluate(this.value,this.parameters,A,D,W,ce)};var Vs=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};Vs.prototype.get=function(A){return this._values[A]};var Dr=function(A){this.specification=A};Dr.prototype.possiblyEvaluate=function(A,D){return A.expression.evaluate(D)},Dr.prototype.interpolate=function(A,D,W){var ce=ki[this.specification.type];return ce?ce(A,D,W):A};var Hr=function(A,D){this.specification=A,this.overrides=D};Hr.prototype.possiblyEvaluate=function(A,D,W,ce){return A.expression.kind==="constant"||A.expression.kind==="camera"?new Ei(this,{kind:"constant",value:A.expression.evaluate(D,null,{},W,ce)},D):new Ei(this,A.expression,D)},Hr.prototype.interpolate=function(A,D,W){if(A.value.kind!=="constant"||D.value.kind!=="constant")return A;if(A.value.value===void 0||D.value.value===void 0)return new Ei(this,{kind:"constant",value:void 0},A.parameters);var ce=ki[this.specification.type];return ce?new Ei(this,{kind:"constant",value:ce(A.value.value,D.value.value,W)},A.parameters):A},Hr.prototype.evaluate=function(A,D,W,ce,Se,Ie){return A.kind==="constant"?A.value:A.evaluate(D,W,ce,Se,Ie)};var ao=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(W,ce,Se,Ie){if(W.value===void 0)return new Ei(this,{kind:"constant",value:void 0},ce);if(W.expression.kind==="constant"){var Ve=W.expression.evaluate(ce,null,{},Se,Ie),tt=W.property.specification.type==="resolvedImage"&&typeof Ve!="string"?Ve.name:Ve,ct=this._calculate(tt,tt,tt,ce);return new Ei(this,{kind:"constant",value:ct},ce)}if(W.expression.kind==="camera"){var wt=this._calculate(W.expression.evaluate({zoom:ce.zoom-1}),W.expression.evaluate({zoom:ce.zoom}),W.expression.evaluate({zoom:ce.zoom+1}),ce);return new Ei(this,{kind:"constant",value:wt},ce)}return new Ei(this,W.expression,ce)},D.prototype.evaluate=function(W,ce,Se,Ie,Ve,tt){if(W.kind==="source"){var ct=W.evaluate(ce,Se,Ie,Ve,tt);return this._calculate(ct,ct,ct,ce)}return W.kind==="composite"?this._calculate(W.evaluate({zoom:Math.floor(ce.zoom)-1},Se,Ie),W.evaluate({zoom:Math.floor(ce.zoom)},Se,Ie),W.evaluate({zoom:Math.floor(ce.zoom)+1},Se,Ie),ce):W.value},D.prototype._calculate=function(W,ce,Se,Ie){return Ie.zoom>Ie.zoomHistory.lastIntegerZoom?{from:W,to:ce}:{from:Se,to:ce}},D.prototype.interpolate=function(W){return W},D}(Hr),Uo=function(A){this.specification=A};Uo.prototype.possiblyEvaluate=function(A,D,W,ce){if(A.value!==void 0){if(A.expression.kind==="constant"){var Se=A.expression.evaluate(D,null,{},W,ce);return this._calculate(Se,Se,Se,D)}return this._calculate(A.expression.evaluate(new ii(Math.floor(D.zoom-1),D)),A.expression.evaluate(new ii(Math.floor(D.zoom),D)),A.expression.evaluate(new ii(Math.floor(D.zoom+1),D)),D)}},Uo.prototype._calculate=function(A,D,W,ce){return ce.zoom>ce.zoomHistory.lastIntegerZoom?{from:A,to:D}:{from:W,to:D}},Uo.prototype.interpolate=function(A){return A};var es=function(A){this.specification=A};es.prototype.possiblyEvaluate=function(A,D,W,ce){return!!A.expression.evaluate(D,null,{},W,ce)},es.prototype.interpolate=function(){return!1};var na=function(A){for(var D in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var W=A[D];W.specification.overridable&&this.overridableProperties.push(D);var ce=this.defaultPropertyValues[D]=new jo(W,void 0),Se=this.defaultTransitionablePropertyValues[D]=new Us(W);this.defaultTransitioningPropertyValues[D]=Se.untransitioned(),this.defaultPossiblyEvaluatedValues[D]=ce.possiblyEvaluate({})}};Or("DataDrivenProperty",Hr),Or("DataConstantProperty",Dr),Or("CrossFadedDataDrivenProperty",ao),Or("CrossFadedProperty",Uo),Or("ColorRampProperty",es);var Vo="-transition",mi=function(A){function D(W,ce){if(A.call(this),this.id=W.id,this.type=W.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},W.type!=="custom"&&(this.metadata=W.metadata,this.minzoom=W.minzoom,this.maxzoom=W.maxzoom,W.type!=="background"&&(this.source=W.source,this.sourceLayer=W["source-layer"],this.filter=W.filter),ce.layout&&(this._unevaluatedLayout=new Lo(ce.layout)),ce.paint)){for(var Se in this._transitionablePaint=new Eo(ce.paint),W.paint)this.setPaintProperty(Se,W.paint[Se],{validate:!1});for(var Ie in W.layout)this.setLayoutProperty(Ie,W.layout[Ie],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Vs(ce.paint)}}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},D.prototype.getLayoutProperty=function(W){return W==="visibility"?this.visibility:this._unevaluatedLayout.getValue(W)},D.prototype.setLayoutProperty=function(W,ce,Se){if(Se===void 0&&(Se={}),ce!=null){var Ie="layers."+this.id+".layout."+W;if(this._validate(gs,Ie,W,ce,Se))return}W!=="visibility"?this._unevaluatedLayout.setValue(W,ce):this.visibility=ce},D.prototype.getPaintProperty=function(W){return y(W,Vo)?this._transitionablePaint.getTransition(W.slice(0,-11)):this._transitionablePaint.getValue(W)},D.prototype.setPaintProperty=function(W,ce,Se){if(Se===void 0&&(Se={}),ce!=null){var Ie="layers."+this.id+".paint."+W;if(this._validate(Mo,Ie,W,ce,Se))return!1}if(y(W,Vo))return this._transitionablePaint.setTransition(W.slice(0,-11),ce||void 0),!1;var Ve=this._transitionablePaint._values[W],tt=Ve.property.specification["property-type"]==="cross-faded-data-driven",ct=Ve.value.isDataDriven(),wt=Ve.value;this._transitionablePaint.setValue(W,ce),this._handleSpecialPaintPropertyUpdate(W);var At=this._transitionablePaint._values[W].value;return At.isDataDriven()||ct||tt||this._handleOverridablePaintPropertyUpdate(W,wt,At)},D.prototype._handleSpecialPaintPropertyUpdate=function(W){},D.prototype._handleOverridablePaintPropertyUpdate=function(W,ce,Se){return!1},D.prototype.isHidden=function(W){return!!(this.minzoom&&W<this.minzoom)||!!(this.maxzoom&&W>=this.maxzoom)||this.visibility==="none"},D.prototype.updateTransitions=function(W){this._transitioningPaint=this._transitionablePaint.transitioned(W,this._transitioningPaint)},D.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},D.prototype.recalculate=function(W,ce){W.getCrossfadeParameters&&(this._crossfadeParameters=W.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(W,void 0,ce)),this.paint=this._transitioningPaint.possiblyEvaluate(W,void 0,ce)},D.prototype.serialize=function(){var W={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(W.layout=W.layout||{},W.layout.visibility=this.visibility),f(W,function(ce,Se){return!(ce===void 0||Se==="layout"&&!Object.keys(ce).length||Se==="paint"&&!Object.keys(ce).length)})},D.prototype._validate=function(W,ce,Se,Ie,Ve){return Ve===void 0&&(Ve={}),(!Ve||Ve.validate!==!1)&&ja(this,W.call(Fo,{key:ce,layerType:this.type,objectKey:Se,value:Ie,styleSpec:$e,style:{glyphs:!0,sprite:!0}}))},D.prototype.is3D=function(){return!1},D.prototype.isTileClipped=function(){return!1},D.prototype.hasOffscreenPass=function(){return!1},D.prototype.resize=function(){},D.prototype.isStateDependent=function(){for(var W in this.paint._values){var ce=this.paint.get(W);if(ce instanceof Ei&&Zo(ce.property.specification)&&(ce.value.kind==="source"||ce.value.kind==="composite")&&ce.value.isStateDependent)return!0}return!1},D}(at),Du={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},oo=function(A,D){this._structArray=A,this._pos1=D*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},_i=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ri(A,D){D===void 0&&(D=1);var W=0,ce=0;return{members:A.map(function(Se){var Ie,Ve=(Ie=Se.type,Du[Ie].BYTES_PER_ELEMENT),tt=W=Ka(W,Math.max(D,Ve)),ct=Se.components||1;return ce=Math.max(ce,Ve),W+=Ve*ct,{name:Se.name,type:Se.type,components:ct,offset:tt}}),size:Ka(W,Math.max(ce,D)),alignment:D}}function Ka(A,D){return Math.ceil(A/D)*D}_i.serialize=function(A,D){return A._trim(),D&&(A.isTransferred=!0,D.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},_i.deserialize=function(A){var D=Object.create(this.prototype);return D.arrayBuffer=A.arrayBuffer,D.length=A.length,D.capacity=A.arrayBuffer.byteLength/D.bytesPerElement,D._refreshViews(),D},_i.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},_i.prototype.clear=function(){this.length=0},_i.prototype.resize=function(A){this.reserve(A),this.length=A},_i.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var D=this.uint8;this._refreshViews(),D&&this.uint8.set(D)}},_i.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var bs=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce){var Se=this.length;return this.resize(Se+1),this.emplace(Se,W,ce)},D.prototype.emplace=function(W,ce,Se){var Ie=2*W;return this.int16[Ie+0]=ce,this.int16[Ie+1]=Se,W},D}(_i);bs.prototype.bytesPerElement=4,Or("StructArrayLayout2i4",bs);var cu=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,W,ce,Se,Ie)},D.prototype.emplace=function(W,ce,Se,Ie,Ve){var tt=4*W;return this.int16[tt+0]=ce,this.int16[tt+1]=Se,this.int16[tt+2]=Ie,this.int16[tt+3]=Ve,W},D}(_i);cu.prototype.bytesPerElement=8,Or("StructArrayLayout4i8",cu);var Qe=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie,Ve,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,W,ce,Se,Ie,Ve,tt)},D.prototype.emplace=function(W,ce,Se,Ie,Ve,tt,ct){var wt=6*W;return this.int16[wt+0]=ce,this.int16[wt+1]=Se,this.int16[wt+2]=Ie,this.int16[wt+3]=Ve,this.int16[wt+4]=tt,this.int16[wt+5]=ct,W},D}(_i);Qe.prototype.bytesPerElement=12,Or("StructArrayLayout2i4i12",Qe);var nt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie,Ve,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,W,ce,Se,Ie,Ve,tt)},D.prototype.emplace=function(W,ce,Se,Ie,Ve,tt,ct){var wt=4*W,At=8*W;return this.int16[wt+0]=ce,this.int16[wt+1]=Se,this.uint8[At+4]=Ie,this.uint8[At+5]=Ve,this.uint8[At+6]=tt,this.uint8[At+7]=ct,W},D}(_i);nt.prototype.bytesPerElement=8,Or("StructArrayLayout2i4ub8",nt);var ut=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce){var Se=this.length;return this.resize(Se+1),this.emplace(Se,W,ce)},D.prototype.emplace=function(W,ce,Se){var Ie=2*W;return this.float32[Ie+0]=ce,this.float32[Ie+1]=Se,W},D}(_i);ut.prototype.bytesPerElement=8,Or("StructArrayLayout2f8",ut);var B=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt){var Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt)},D.prototype.emplace=function(W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt){var Ut=10*W;return this.uint16[Ut+0]=ce,this.uint16[Ut+1]=Se,this.uint16[Ut+2]=Ie,this.uint16[Ut+3]=Ve,this.uint16[Ut+4]=tt,this.uint16[Ut+5]=ct,this.uint16[Ut+6]=wt,this.uint16[Ut+7]=At,this.uint16[Ut+8]=Nt,this.uint16[Ut+9]=Yt,W},D}(_i);B.prototype.bytesPerElement=20,Or("StructArrayLayout10ui20",B);var G=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut){var sn=this.length;return this.resize(sn+1),this.emplace(sn,W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut)},D.prototype.emplace=function(W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn){var un=12*W;return this.int16[un+0]=ce,this.int16[un+1]=Se,this.int16[un+2]=Ie,this.int16[un+3]=Ve,this.uint16[un+4]=tt,this.uint16[un+5]=ct,this.uint16[un+6]=wt,this.uint16[un+7]=At,this.int16[un+8]=Nt,this.int16[un+9]=Yt,this.int16[un+10]=Ut,this.int16[un+11]=sn,W},D}(_i);G.prototype.bytesPerElement=24,Or("StructArrayLayout4i4ui4i24",G);var Y=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,W,ce,Se)},D.prototype.emplace=function(W,ce,Se,Ie){var Ve=3*W;return this.float32[Ve+0]=ce,this.float32[Ve+1]=Se,this.float32[Ve+2]=Ie,W},D}(_i);Y.prototype.bytesPerElement=12,Or("StructArrayLayout3f12",Y);var C=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W){var ce=this.length;return this.resize(ce+1),this.emplace(ce,W)},D.prototype.emplace=function(W,ce){var Se=1*W;return this.uint32[Se+0]=ce,W},D}(_i);C.prototype.bytesPerElement=4,Or("StructArrayLayout1ul4",C);var q=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie,Ve,tt,ct,wt,At){var Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,W,ce,Se,Ie,Ve,tt,ct,wt,At)},D.prototype.emplace=function(W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt){var Yt=10*W,Ut=5*W;return this.int16[Yt+0]=ce,this.int16[Yt+1]=Se,this.int16[Yt+2]=Ie,this.int16[Yt+3]=Ve,this.int16[Yt+4]=tt,this.int16[Yt+5]=ct,this.uint32[Ut+3]=wt,this.uint16[Yt+8]=At,this.uint16[Yt+9]=Nt,W},D}(_i);q.prototype.bytesPerElement=20,Or("StructArrayLayout6i1ul2ui20",q);var Q=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie,Ve,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,W,ce,Se,Ie,Ve,tt)},D.prototype.emplace=function(W,ce,Se,Ie,Ve,tt,ct){var wt=6*W;return this.int16[wt+0]=ce,this.int16[wt+1]=Se,this.int16[wt+2]=Ie,this.int16[wt+3]=Ve,this.int16[wt+4]=tt,this.int16[wt+5]=ct,W},D}(_i);Q.prototype.bytesPerElement=12,Or("StructArrayLayout2i2i2i12",Q);var ne=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie,Ve){var tt=this.length;return this.resize(tt+1),this.emplace(tt,W,ce,Se,Ie,Ve)},D.prototype.emplace=function(W,ce,Se,Ie,Ve,tt){var ct=4*W,wt=8*W;return this.float32[ct+0]=ce,this.float32[ct+1]=Se,this.float32[ct+2]=Ie,this.int16[wt+6]=Ve,this.int16[wt+7]=tt,W},D}(_i);ne.prototype.bytesPerElement=16,Or("StructArrayLayout2f1f2i16",ne);var he=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,W,ce,Se,Ie)},D.prototype.emplace=function(W,ce,Se,Ie,Ve){var tt=12*W,ct=3*W;return this.uint8[tt+0]=ce,this.uint8[tt+1]=Se,this.float32[ct+1]=Ie,this.float32[ct+2]=Ve,W},D}(_i);he.prototype.bytesPerElement=12,Or("StructArrayLayout2ub2f12",he);var me=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,W,ce,Se)},D.prototype.emplace=function(W,ce,Se,Ie){var Ve=3*W;return this.uint16[Ve+0]=ce,this.uint16[Ve+1]=Se,this.uint16[Ve+2]=Ie,W},D}(_i);me.prototype.bytesPerElement=6,Or("StructArrayLayout3ui6",me);var Pe=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn,un,En,Mn,Nn){var jn=this.length;return this.resize(jn+1),this.emplace(jn,W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn,un,En,Mn,Nn)},D.prototype.emplace=function(W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn,un,En,Mn,Nn,jn){var Gn=24*W,Kn=12*W,rr=48*W;return this.int16[Gn+0]=ce,this.int16[Gn+1]=Se,this.uint16[Gn+2]=Ie,this.uint16[Gn+3]=Ve,this.uint32[Kn+2]=tt,this.uint32[Kn+3]=ct,this.uint32[Kn+4]=wt,this.uint16[Gn+10]=At,this.uint16[Gn+11]=Nt,this.uint16[Gn+12]=Yt,this.float32[Kn+7]=Ut,this.float32[Kn+8]=sn,this.uint8[rr+36]=un,this.uint8[rr+37]=En,this.uint8[rr+38]=Mn,this.uint32[Kn+10]=Nn,this.int16[Gn+22]=jn,W},D}(_i);Pe.prototype.bytesPerElement=48,Or("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Pe);var ze=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn,un,En,Mn,Nn,jn,Gn,Kn,rr,_r,vr,Ar,Cr,Zr,Nr,Gr){var Ur=this.length;return this.resize(Ur+1),this.emplace(Ur,W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn,un,En,Mn,Nn,jn,Gn,Kn,rr,_r,vr,Ar,Cr,Zr,Nr,Gr)},D.prototype.emplace=function(W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn,un,En,Mn,Nn,jn,Gn,Kn,rr,_r,vr,Ar,Cr,Zr,Nr,Gr,Ur){var zr=34*W,ci=17*W;return this.int16[zr+0]=ce,this.int16[zr+1]=Se,this.int16[zr+2]=Ie,this.int16[zr+3]=Ve,this.int16[zr+4]=tt,this.int16[zr+5]=ct,this.int16[zr+6]=wt,this.int16[zr+7]=At,this.uint16[zr+8]=Nt,this.uint16[zr+9]=Yt,this.uint16[zr+10]=Ut,this.uint16[zr+11]=sn,this.uint16[zr+12]=un,this.uint16[zr+13]=En,this.uint16[zr+14]=Mn,this.uint16[zr+15]=Nn,this.uint16[zr+16]=jn,this.uint16[zr+17]=Gn,this.uint16[zr+18]=Kn,this.uint16[zr+19]=rr,this.uint16[zr+20]=_r,this.uint16[zr+21]=vr,this.uint16[zr+22]=Ar,this.uint32[ci+12]=Cr,this.float32[ci+13]=Zr,this.float32[ci+14]=Nr,this.float32[ci+15]=Gr,this.float32[ci+16]=Ur,W},D}(_i);ze.prototype.bytesPerElement=68,Or("StructArrayLayout8i15ui1ul4f68",ze);var qe=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W){var ce=this.length;return this.resize(ce+1),this.emplace(ce,W)},D.prototype.emplace=function(W,ce){var Se=1*W;return this.float32[Se+0]=ce,W},D}(_i);qe.prototype.bytesPerElement=4,Or("StructArrayLayout1f4",qe);var Ze=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,W,ce,Se)},D.prototype.emplace=function(W,ce,Se,Ie){var Ve=3*W;return this.int16[Ve+0]=ce,this.int16[Ve+1]=Se,this.int16[Ve+2]=Ie,W},D}(_i);Ze.prototype.bytesPerElement=6,Or("StructArrayLayout3i6",Ze);var rt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,W,ce,Se)},D.prototype.emplace=function(W,ce,Se,Ie){var Ve=2*W,tt=4*W;return this.uint32[Ve+0]=ce,this.uint16[tt+2]=Se,this.uint16[tt+3]=Ie,W},D}(_i);rt.prototype.bytesPerElement=8,Or("StructArrayLayout1ul2ui8",rt);var pt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce){var Se=this.length;return this.resize(Se+1),this.emplace(Se,W,ce)},D.prototype.emplace=function(W,ce,Se){var Ie=2*W;return this.uint16[Ie+0]=ce,this.uint16[Ie+1]=Se,W},D}(_i);pt.prototype.bytesPerElement=4,Or("StructArrayLayout2ui4",pt);var vt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W){var ce=this.length;return this.resize(ce+1),this.emplace(ce,W)},D.prototype.emplace=function(W,ce){var Se=1*W;return this.uint16[Se+0]=ce,W},D}(_i);vt.prototype.bytesPerElement=2,Or("StructArrayLayout1ui2",vt);var kt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(W,ce,Se,Ie){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,W,ce,Se,Ie)},D.prototype.emplace=function(W,ce,Se,Ie,Ve){var tt=4*W;return this.float32[tt+0]=ce,this.float32[tt+1]=Se,this.float32[tt+2]=Ie,this.float32[tt+3]=Ve,W},D}(_i);kt.prototype.bytesPerElement=16,Or("StructArrayLayout4f16",kt);var Ot=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D;var W={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return W.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},W.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},W.x1.get=function(){return this._structArray.int16[this._pos2+2]},W.y1.get=function(){return this._structArray.int16[this._pos2+3]},W.x2.get=function(){return this._structArray.int16[this._pos2+4]},W.y2.get=function(){return this._structArray.int16[this._pos2+5]},W.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},W.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},W.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},W.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(D.prototype,W),D}(oo);Ot.prototype.size=20;var Et=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.get=function(W){return new Ot(this,W)},D}(q);Or("CollisionBoxArray",Et);var jt=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D;var W={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return W.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},W.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},W.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},W.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},W.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},W.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},W.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},W.segment.get=function(){return this._structArray.uint16[this._pos2+10]},W.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},W.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},W.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},W.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},W.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},W.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},W.placedOrientation.set=function(ce){this._structArray.uint8[this._pos1+37]=ce},W.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},W.hidden.set=function(ce){this._structArray.uint8[this._pos1+38]=ce},W.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},W.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+10]=ce},W.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(D.prototype,W),D}(oo);jt.prototype.size=48;var It=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.get=function(W){return new jt(this,W)},D}(Pe);Or("PlacedSymbolArray",It);var Jt=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D;var W={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return W.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},W.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},W.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},W.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},W.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},W.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},W.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},W.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},W.key.get=function(){return this._structArray.uint16[this._pos2+8]},W.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},W.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},W.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},W.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},W.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},W.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},W.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},W.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},W.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},W.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},W.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},W.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},W.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},W.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},W.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},W.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+12]=ce},W.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},W.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},W.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},W.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(D.prototype,W),D}(oo);Jt.prototype.size=68;var Gt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.get=function(W){return new Jt(this,W)},D}(ze);Or("SymbolInstanceArray",Gt);var Ht=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.getoffsetX=function(W){return this.float32[1*W+0]},D}(qe);Or("GlyphOffsetArray",Ht);var mn=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.getx=function(W){return this.int16[3*W+0]},D.prototype.gety=function(W){return this.int16[3*W+1]},D.prototype.gettileUnitDistanceFromAnchor=function(W){return this.int16[3*W+2]},D}(Ze);Or("SymbolLineVertexArray",mn);var yn=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D;var W={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return W.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},W.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},W.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(D.prototype,W),D}(oo);yn.prototype.size=8;var In=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.get=function(W){return new yn(this,W)},D}(rt);Or("FeatureIndexArray",In);var Rn=Ri([{name:"a_pos",components:2,type:"Int16"}],4).members,Yn=function(A){A===void 0&&(A=[]),this.segments=A};function er(A,D){return 256*(A=u(Math.floor(A),0,255))+u(Math.floor(D),0,255)}Yn.prototype.prepareSegment=function(A,D,W,ce){var Se=this.segments[this.segments.length-1];return A>Yn.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+Yn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!Se||Se.vertexLength+A>Yn.MAX_VERTEX_ARRAY_LENGTH||Se.sortKey!==ce)&&(Se={vertexOffset:D.length,primitiveOffset:W.length,vertexLength:0,primitiveLength:0},ce!==void 0&&(Se.sortKey=ce),this.segments.push(Se)),Se},Yn.prototype.get=function(){return this.segments},Yn.prototype.destroy=function(){for(var A=0,D=this.segments;A<D.length;A+=1){var W=D[A];for(var ce in W.vaos)W.vaos[ce].destroy()}},Yn.simpleSegment=function(A,D,W,ce){return new Yn([{vertexOffset:A,primitiveOffset:D,vertexLength:W,primitiveLength:ce,vaos:{},sortKey:0}])},Yn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Or("SegmentVector",Yn);var dr=Ri([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Xn=_(function(A){A.exports=function(D,W){var ce,Se,Ie,Ve,tt,ct,wt,At;for(ce=3&D.length,Se=D.length-ce,Ie=W,tt=3432918353,ct=461845907,At=0;At<Se;)wt=255&D.charCodeAt(At)|(255&D.charCodeAt(++At))<<8|(255&D.charCodeAt(++At))<<16|(255&D.charCodeAt(++At))<<24,++At,Ie=27492+(65535&(Ve=5*(65535&(Ie=(Ie^=wt=(65535&(wt=(wt=(65535&wt)*tt+(((wt>>>16)*tt&65535)<<16)&4294967295)<<15|wt>>>17))*ct+(((wt>>>16)*ct&65535)<<16)&4294967295)<<13|Ie>>>19))+((5*(Ie>>>16)&65535)<<16)&4294967295))+((58964+(Ve>>>16)&65535)<<16);switch(wt=0,ce){case 3:wt^=(255&D.charCodeAt(At+2))<<16;case 2:wt^=(255&D.charCodeAt(At+1))<<8;case 1:Ie^=wt=(65535&(wt=(wt=(65535&(wt^=255&D.charCodeAt(At)))*tt+(((wt>>>16)*tt&65535)<<16)&4294967295)<<15|wt>>>17))*ct+(((wt>>>16)*ct&65535)<<16)&4294967295}return Ie^=D.length,Ie=2246822507*(65535&(Ie^=Ie>>>16))+((2246822507*(Ie>>>16)&65535)<<16)&4294967295,Ie=3266489909*(65535&(Ie^=Ie>>>13))+((3266489909*(Ie>>>16)&65535)<<16)&4294967295,(Ie^=Ie>>>16)>>>0}}),cr=_(function(A){A.exports=function(D,W){for(var ce,Se=D.length,Ie=W^Se,Ve=0;Se>=4;)ce=1540483477*(65535&(ce=255&D.charCodeAt(Ve)|(255&D.charCodeAt(++Ve))<<8|(255&D.charCodeAt(++Ve))<<16|(255&D.charCodeAt(++Ve))<<24))+((1540483477*(ce>>>16)&65535)<<16),Ie=1540483477*(65535&Ie)+((1540483477*(Ie>>>16)&65535)<<16)^(ce=1540483477*(65535&(ce^=ce>>>24))+((1540483477*(ce>>>16)&65535)<<16)),Se-=4,++Ve;switch(Se){case 3:Ie^=(255&D.charCodeAt(Ve+2))<<16;case 2:Ie^=(255&D.charCodeAt(Ve+1))<<8;case 1:Ie=1540483477*(65535&(Ie^=255&D.charCodeAt(Ve)))+((1540483477*(Ie>>>16)&65535)<<16)}return Ie=1540483477*(65535&(Ie^=Ie>>>13))+((1540483477*(Ie>>>16)&65535)<<16),(Ie^=Ie>>>15)>>>0}}),Tr=Xn,Rr=Xn,$n=cr;Tr.murmur3=Rr,Tr.murmur2=$n;var ur=function(){this.ids=[],this.positions=[],this.indexed=!1};ur.prototype.add=function(A,D,W,ce){this.ids.push(gr(A)),this.positions.push(D,W,ce)},ur.prototype.getPositions=function(A){for(var D=gr(A),W=0,ce=this.ids.length-1;W<ce;){var Se=W+ce>>1;this.ids[Se]>=D?ce=Se:W=Se+1}for(var Ie=[];this.ids[W]===D;){var Ve=this.positions[3*W],tt=this.positions[3*W+1],ct=this.positions[3*W+2];Ie.push({index:Ve,start:tt,end:ct}),W++}return Ie},ur.serialize=function(A,D){var W=new Float64Array(A.ids),ce=new Uint32Array(A.positions);return Pr(W,ce,0,W.length-1),D&&D.push(W.buffer,ce.buffer),{ids:W,positions:ce}},ur.deserialize=function(A){var D=new ur;return D.ids=A.ids,D.positions=A.positions,D.indexed=!0,D};var Sr=Math.pow(2,53)-1;function gr(A){var D=+A;return!isNaN(D)&&D<=Sr?D:Tr(String(A))}function Pr(A,D,W,ce){for(;W<ce;){for(var Se=A[W+ce>>1],Ie=W-1,Ve=ce+1;;){do Ie++;while(A[Ie]<Se);do Ve--;while(A[Ve]>Se);if(Ie>=Ve)break;jr(A,Ie,Ve),jr(D,3*Ie,3*Ve),jr(D,3*Ie+1,3*Ve+1),jr(D,3*Ie+2,3*Ve+2)}Ve-W<ce-Ve?(Pr(A,D,W,Ve),W=Ve+1):(Pr(A,D,Ve+1,ce),ce=Ve)}}function jr(A,D,W){var ce=A[D];A[D]=A[W],A[W]=ce}Or("FeaturePositionMap",ur);var Xr=function(A,D){this.gl=A.gl,this.location=D},Kr=function(A){function D(W,ce){A.call(this,W,ce),this.current=0}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(W){this.current!==W&&(this.current=W,this.gl.uniform1i(this.location,W))},D}(Xr),ni=function(A){function D(W,ce){A.call(this,W,ce),this.current=0}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(W){this.current!==W&&(this.current=W,this.gl.uniform1f(this.location,W))},D}(Xr),ai=function(A){function D(W,ce){A.call(this,W,ce),this.current=[0,0]}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(W){W[0]===this.current[0]&&W[1]===this.current[1]||(this.current=W,this.gl.uniform2f(this.location,W[0],W[1]))},D}(Xr),Li=function(A){function D(W,ce){A.call(this,W,ce),this.current=[0,0,0]}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(W){W[0]===this.current[0]&&W[1]===this.current[1]&&W[2]===this.current[2]||(this.current=W,this.gl.uniform3f(this.location,W[0],W[1],W[2]))},D}(Xr),Ki=function(A){function D(W,ce){A.call(this,W,ce),this.current=[0,0,0,0]}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(W){W[0]===this.current[0]&&W[1]===this.current[1]&&W[2]===this.current[2]&&W[3]===this.current[3]||(this.current=W,this.gl.uniform4f(this.location,W[0],W[1],W[2],W[3]))},D}(Xr),Pa=function(A){function D(W,ce){A.call(this,W,ce),this.current=Cn.transparent}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(W){W.r===this.current.r&&W.g===this.current.g&&W.b===this.current.b&&W.a===this.current.a||(this.current=W,this.gl.uniform4f(this.location,W.r,W.g,W.b,W.a))},D}(Xr),pa=new Float32Array(16),Ma=function(A){function D(W,ce){A.call(this,W,ce),this.current=pa}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(W){if(W[12]!==this.current[12]||W[0]!==this.current[0])return this.current=W,void this.gl.uniformMatrix4fv(this.location,!1,W);for(var ce=1;ce<16;ce++)if(W[ce]!==this.current[ce]){this.current=W,this.gl.uniformMatrix4fv(this.location,!1,W);break}},D}(Xr);function zi(A){return[er(255*A.r,255*A.g),er(255*A.b,255*A.a)]}var si=function(A,D,W){this.value=A,this.uniformNames=D.map(function(ce){return"u_"+ce}),this.type=W};si.prototype.setUniform=function(A,D,W){A.set(W.constantOr(this.value))},si.prototype.getBinding=function(A,D,W){return this.type==="color"?new Pa(A,D):new ni(A,D)};var Hi=function(A,D){this.uniformNames=D.map(function(W){return"u_"+W}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Hi.prototype.setConstantPatternPositions=function(A,D){this.pixelRatioFrom=D.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=D.tlbr,this.patternTo=A.tlbr},Hi.prototype.setUniform=function(A,D,W,ce){var Se=ce==="u_pattern_to"?this.patternTo:ce==="u_pattern_from"?this.patternFrom:ce==="u_pixel_ratio_to"?this.pixelRatioTo:ce==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Se&&A.set(Se)},Hi.prototype.getBinding=function(A,D,W){return W.substr(0,9)==="u_pattern"?new Ki(A,D):new ni(A,D)};var wi=function(A,D,W,ce){this.expression=A,this.type=W,this.maxValue=0,this.paintVertexAttributes=D.map(function(Se){return{name:"a_"+Se,type:"Float32",components:W==="color"?2:1,offset:0}}),this.paintVertexArray=new ce};wi.prototype.populatePaintArray=function(A,D,W,ce,Se){var Ie=this.paintVertexArray.length,Ve=this.expression.evaluate(new ii(0),D,{},ce,[],Se);this.paintVertexArray.resize(A),this._setPaintValue(Ie,A,Ve)},wi.prototype.updatePaintArray=function(A,D,W,ce){var Se=this.expression.evaluate({zoom:0},W,ce);this._setPaintValue(A,D,Se)},wi.prototype._setPaintValue=function(A,D,W){if(this.type==="color")for(var ce=zi(W),Se=A;Se<D;Se++)this.paintVertexArray.emplace(Se,ce[0],ce[1]);else{for(var Ie=A;Ie<D;Ie++)this.paintVertexArray.emplace(Ie,W);this.maxValue=Math.max(this.maxValue,Math.abs(W))}},wi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},wi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var hi=function(A,D,W,ce,Se,Ie){this.expression=A,this.uniformNames=D.map(function(Ve){return"u_"+Ve+"_t"}),this.type=W,this.useIntegerZoom=ce,this.zoom=Se,this.maxValue=0,this.paintVertexAttributes=D.map(function(Ve){return{name:"a_"+Ve,type:"Float32",components:W==="color"?4:2,offset:0}}),this.paintVertexArray=new Ie};hi.prototype.populatePaintArray=function(A,D,W,ce,Se){var Ie=this.expression.evaluate(new ii(this.zoom),D,{},ce,[],Se),Ve=this.expression.evaluate(new ii(this.zoom+1),D,{},ce,[],Se),tt=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(tt,A,Ie,Ve)},hi.prototype.updatePaintArray=function(A,D,W,ce){var Se=this.expression.evaluate({zoom:this.zoom},W,ce),Ie=this.expression.evaluate({zoom:this.zoom+1},W,ce);this._setPaintValue(A,D,Se,Ie)},hi.prototype._setPaintValue=function(A,D,W,ce){if(this.type==="color")for(var Se=zi(W),Ie=zi(ce),Ve=A;Ve<D;Ve++)this.paintVertexArray.emplace(Ve,Se[0],Se[1],Ie[0],Ie[1]);else{for(var tt=A;tt<D;tt++)this.paintVertexArray.emplace(tt,W,ce);this.maxValue=Math.max(this.maxValue,Math.abs(W),Math.abs(ce))}},hi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},hi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},hi.prototype.setUniform=function(A,D){var W=this.useIntegerZoom?Math.floor(D.zoom):D.zoom,ce=u(this.expression.interpolationFactor(W,this.zoom,this.zoom+1),0,1);A.set(ce)},hi.prototype.getBinding=function(A,D,W){return new ni(A,D)};var qi=function(A,D,W,ce,Se,Ie){this.expression=A,this.type=D,this.useIntegerZoom=W,this.zoom=ce,this.layerId=Ie,this.zoomInPaintVertexArray=new Se,this.zoomOutPaintVertexArray=new Se};qi.prototype.populatePaintArray=function(A,D,W){var ce=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(ce,A,D.patterns&&D.patterns[this.layerId],W)},qi.prototype.updatePaintArray=function(A,D,W,ce,Se){this._setPaintValues(A,D,W.patterns&&W.patterns[this.layerId],Se)},qi.prototype._setPaintValues=function(A,D,W,ce){if(ce&&W){var Se=W.min,Ie=W.mid,Ve=W.max,tt=ce[Se],ct=ce[Ie],wt=ce[Ve];if(tt&&ct&&wt)for(var At=A;At<D;At++)this.zoomInPaintVertexArray.emplace(At,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],ct.pixelRatio,tt.pixelRatio),this.zoomOutPaintVertexArray.emplace(At,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],wt.tl[0],wt.tl[1],wt.br[0],wt.br[1],ct.pixelRatio,wt.pixelRatio)}},qi.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,dr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,dr.members,this.expression.isStateDependent))},qi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Qi=function(A,D,W){this.binders={},this._buffers=[];var ce=[];for(var Se in A.paint._values)if(W(Se)){var Ie=A.paint.get(Se);if(Ie instanceof Ei&&Zo(Ie.property.specification)){var Ve=al(Se,A.type),tt=Ie.value,ct=Ie.property.specification.type,wt=Ie.property.useIntegerZoom,At=Ie.property.specification["property-type"],Nt=At==="cross-faded"||At==="cross-faded-data-driven";if(tt.kind==="constant")this.binders[Se]=Nt?new Hi(tt.value,Ve):new si(tt.value,Ve,ct),ce.push("/u_"+Se);else if(tt.kind==="source"||Nt){var Yt=ol(Se,ct,"source");this.binders[Se]=Nt?new qi(tt,ct,wt,D,Yt,A.id):new wi(tt,Ve,ct,Yt),ce.push("/a_"+Se)}else{var Ut=ol(Se,ct,"composite");this.binders[Se]=new hi(tt,Ve,ct,wt,D,Ut),ce.push("/z_"+Se)}}}this.cacheKey=ce.sort().join("")};Qi.prototype.getMaxValue=function(A){var D=this.binders[A];return D instanceof wi||D instanceof hi?D.maxValue:0},Qi.prototype.populatePaintArrays=function(A,D,W,ce,Se){for(var Ie in this.binders){var Ve=this.binders[Ie];(Ve instanceof wi||Ve instanceof hi||Ve instanceof qi)&&Ve.populatePaintArray(A,D,W,ce,Se)}},Qi.prototype.setConstantPatternPositions=function(A,D){for(var W in this.binders){var ce=this.binders[W];ce instanceof Hi&&ce.setConstantPatternPositions(A,D)}},Qi.prototype.updatePaintArrays=function(A,D,W,ce,Se){var Ie=!1;for(var Ve in A)for(var tt=0,ct=D.getPositions(Ve);tt<ct.length;tt+=1){var wt=ct[tt],At=W.feature(wt.index);for(var Nt in this.binders){var Yt=this.binders[Nt];if((Yt instanceof wi||Yt instanceof hi||Yt instanceof qi)&&Yt.expression.isStateDependent===!0){var Ut=ce.paint.get(Nt);Yt.expression=Ut.value,Yt.updatePaintArray(wt.start,wt.end,At,A[Ve],Se),Ie=!0}}}return Ie},Qi.prototype.defines=function(){var A=[];for(var D in this.binders){var W=this.binders[D];(W instanceof si||W instanceof Hi)&&A.push.apply(A,W.uniformNames.map(function(ce){return"#define HAS_UNIFORM_"+ce}))}return A},Qi.prototype.getBinderAttributes=function(){var A=[];for(var D in this.binders){var W=this.binders[D];if(W instanceof wi||W instanceof hi)for(var ce=0;ce<W.paintVertexAttributes.length;ce++)A.push(W.paintVertexAttributes[ce].name);else if(W instanceof qi)for(var Se=0;Se<dr.members.length;Se++)A.push(dr.members[Se].name)}return A},Qi.prototype.getBinderUniforms=function(){var A=[];for(var D in this.binders){var W=this.binders[D];if(W instanceof si||W instanceof Hi||W instanceof hi)for(var ce=0,Se=W.uniformNames;ce<Se.length;ce+=1){var Ie=Se[ce];A.push(Ie)}}return A},Qi.prototype.getPaintVertexBuffers=function(){return this._buffers},Qi.prototype.getUniforms=function(A,D){var W=[];for(var ce in this.binders){var Se=this.binders[ce];if(Se instanceof si||Se instanceof Hi||Se instanceof hi)for(var Ie=0,Ve=Se.uniformNames;Ie<Ve.length;Ie+=1){var tt=Ve[Ie];if(D[tt]){var ct=Se.getBinding(A,D[tt],tt);W.push({name:tt,property:ce,binding:ct})}}}return W},Qi.prototype.setUniforms=function(A,D,W,ce){for(var Se=0,Ie=D;Se<Ie.length;Se+=1){var Ve=Ie[Se],tt=Ve.name,ct=Ve.property,wt=Ve.binding;this.binders[ct].setUniform(wt,ce,W.get(ct),tt)}},Qi.prototype.updatePaintBuffers=function(A){for(var D in this._buffers=[],this.binders){var W=this.binders[D];if(A&&W instanceof qi){var ce=A.fromScale===2?W.zoomInPaintVertexBuffer:W.zoomOutPaintVertexBuffer;ce&&this._buffers.push(ce)}else(W instanceof wi||W instanceof hi)&&W.paintVertexBuffer&&this._buffers.push(W.paintVertexBuffer)}},Qi.prototype.upload=function(A){for(var D in this.binders){var W=this.binders[D];(W instanceof wi||W instanceof hi||W instanceof qi)&&W.upload(A)}this.updatePaintBuffers()},Qi.prototype.destroy=function(){for(var A in this.binders){var D=this.binders[A];(D instanceof wi||D instanceof hi||D instanceof qi)&&D.destroy()}};var la=function(A,D,W){W===void 0&&(W=function(){return!0}),this.programConfigurations={};for(var ce=0,Se=A;ce<Se.length;ce+=1){var Ie=Se[ce];this.programConfigurations[Ie.id]=new Qi(Ie,D,W)}this.needsUpload=!1,this._featureMap=new ur,this._bufferOffset=0};function al(A,D){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(D+"-","").replace(/-/g,"_")]}function ol(A,D,W){var ce={color:{source:ut,composite:kt},number:{source:qe,composite:ut}},Se=function(Ie){return{"line-pattern":{source:B,composite:B},"fill-pattern":{source:B,composite:B},"fill-extrusion-pattern":{source:B,composite:B}}[Ie]}(A);return Se&&Se[W]||ce[D][W]}la.prototype.populatePaintArrays=function(A,D,W,ce,Se,Ie){for(var Ve in this.programConfigurations)this.programConfigurations[Ve].populatePaintArrays(A,D,ce,Se,Ie);D.id!==void 0&&this._featureMap.add(D.id,W,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},la.prototype.updatePaintArrays=function(A,D,W,ce){for(var Se=0,Ie=W;Se<Ie.length;Se+=1){var Ve=Ie[Se];this.needsUpload=this.programConfigurations[Ve.id].updatePaintArrays(A,this._featureMap,D,Ve,ce)||this.needsUpload}},la.prototype.get=function(A){return this.programConfigurations[A]},la.prototype.upload=function(A){if(this.needsUpload){for(var D in this.programConfigurations)this.programConfigurations[D].upload(A);this.needsUpload=!1}},la.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},Or("ConstantBinder",si),Or("CrossFadedConstantBinder",Hi),Or("SourceExpressionBinder",wi),Or("CrossFadedCompositeBinder",qi),Or("CompositeExpressionBinder",hi),Or("ProgramConfiguration",Qi,{omit:["_buffers"]}),Or("ProgramConfigurationSet",la);var pi=8192,Jl=Math.pow(2,14)-1,Sl=-Jl-1;function ts(A){for(var D=pi/A.extent,W=A.loadGeometry(),ce=0;ce<W.length;ce++)for(var Se=W[ce],Ie=0;Ie<Se.length;Ie++){var Ve=Se[Ie],tt=Math.round(Ve.x*D),ct=Math.round(Ve.y*D);Ve.x=u(tt,Sl,Jl),Ve.y=u(ct,Sl,Jl),(tt<Ve.x||tt>Ve.x+1||ct<Ve.y||ct>Ve.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return W}function Yi(A,D){return{type:A.type,id:A.id,properties:A.properties,geometry:D?ts(A):[]}}function so(A,D,W,ce,Se){A.emplaceBack(2*D+(ce+1)/2,2*W+(Se+1)/2)}var xa=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new bs,this.indexArray=new me,this.segments=new Yn,this.programConfigurations=new la(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function Ju(A,D){for(var W=0;W<A.length;W++)if(Kl(D,A[W]))return!0;for(var ce=0;ce<D.length;ce++)if(Kl(A,D[ce]))return!0;return!!Ru(A,D)}function Qh(A,D,W){return!!Kl(A,D)||!!zu(D,A,W)}function Ff(A,D){if(A.length===1)return Nf(D,A[0]);for(var W=0;W<D.length;W++)for(var ce=D[W],Se=0;Se<ce.length;Se++)if(Kl(A,ce[Se]))return!0;for(var Ie=0;Ie<A.length;Ie++)if(Nf(D,A[Ie]))return!0;for(var Ve=0;Ve<D.length;Ve++)if(Ru(A,D[Ve]))return!0;return!1}function $h(A,D,W){if(A.length>1){if(Ru(A,D))return!0;for(var ce=0;ce<D.length;ce++)if(zu(D[ce],A,W))return!0}for(var Se=0;Se<A.length;Se++)if(zu(A[Se],D,W))return!0;return!1}function Ru(A,D){if(A.length===0||D.length===0)return!1;for(var W=0;W<A.length-1;W++)for(var ce=A[W],Se=A[W+1],Ie=0;Ie<D.length-1;Ie++)if(ep(ce,Se,D[Ie],D[Ie+1]))return!0;return!1}function ep(A,D,W,ce){return O(A,W,ce)!==O(D,W,ce)&&O(A,D,W)!==O(A,D,ce)}function zu(A,D,W){var ce=W*W;if(D.length===1)return A.distSqr(D[0])<ce;for(var Se=1;Se<D.length;Se++)if(Bf(A,D[Se-1],D[Se])<ce)return!0;return!1}function Bf(A,D,W){var ce=D.distSqr(W);if(ce===0)return A.distSqr(D);var Se=((A.x-D.x)*(W.x-D.x)+(A.y-D.y)*(W.y-D.y))/ce;return Se<0?A.distSqr(D):Se>1?A.distSqr(W):A.distSqr(W.sub(D)._mult(Se)._add(D))}function Nf(A,D){for(var W,ce,Se,Ie=!1,Ve=0;Ve<A.length;Ve++)for(var tt=0,ct=(W=A[Ve]).length-1;tt<W.length;ct=tt++)ce=W[tt],Se=W[ct],ce.y>D.y!=Se.y>D.y&&D.x<(Se.x-ce.x)*(D.y-ce.y)/(Se.y-ce.y)+ce.x&&(Ie=!Ie);return Ie}function Kl(A,D){for(var W=!1,ce=0,Se=A.length-1;ce<A.length;Se=ce++){var Ie=A[ce],Ve=A[Se];Ie.y>D.y!=Ve.y>D.y&&D.x<(Ve.x-Ie.x)*(D.y-Ie.y)/(Ve.y-Ie.y)+Ie.x&&(W=!W)}return W}function cv(A,D,W){var ce=W[0],Se=W[2];if(A.x<ce.x&&D.x<ce.x||A.x>Se.x&&D.x>Se.x||A.y<ce.y&&D.y<ce.y||A.y>Se.y&&D.y>Se.y)return!1;var Ie=O(A,D,W[0]);return Ie!==O(A,D,W[1])||Ie!==O(A,D,W[2])||Ie!==O(A,D,W[3])}function Xc(A,D,W){var ce=D.paint.get(A).value;return ce.kind==="constant"?ce.value:W.programConfigurations.get(D.id).getMaxValue(A)}function jf(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Uf(A,D,W,ce,Se){if(!D[0]&&!D[1])return A;var Ie=t.convert(D)._mult(Se);W==="viewport"&&Ie._rotate(-ce);for(var Ve=[],tt=0;tt<A.length;tt++){var ct=A[tt];Ve.push(ct.sub(Ie))}return Ve}xa.prototype.populate=function(A,D,W){var ce=this.layers[0],Se=[],Ie=null;ce.type==="circle"&&(Ie=ce.layout.get("circle-sort-key"));for(var Ve=0,tt=A;Ve<tt.length;Ve+=1){var ct=tt[Ve],wt=ct.feature,At=ct.id,Nt=ct.index,Yt=ct.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,sn=Yi(wt,Ut);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),sn,W)){var un=Ie?Ie.evaluate(sn,{},W):void 0,En={id:At,properties:wt.properties,type:wt.type,sourceLayerIndex:Yt,index:Nt,geometry:Ut?sn.geometry:ts(wt),patterns:{},sortKey:un};Se.push(En)}}Ie&&Se.sort(function(Ar,Cr){return Ar.sortKey-Cr.sortKey});for(var Mn=0,Nn=Se;Mn<Nn.length;Mn+=1){var jn=Nn[Mn],Gn=jn,Kn=Gn.geometry,rr=Gn.index,_r=Gn.sourceLayerIndex,vr=A[rr].feature;this.addFeature(jn,Kn,rr,W),D.featureIndex.insert(vr,Kn,rr,_r,this.index)}},xa.prototype.update=function(A,D,W){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,W)},xa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},xa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xa.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Rn),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},xa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xa.prototype.addFeature=function(A,D,W,ce){for(var Se=0,Ie=D;Se<Ie.length;Se+=1)for(var Ve=0,tt=Ie[Se];Ve<tt.length;Ve+=1){var ct=tt[Ve],wt=ct.x,At=ct.y;if(!(wt<0||wt>=pi||At<0||At>=pi)){var Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),Yt=Nt.vertexLength;so(this.layoutVertexArray,wt,At,-1,-1),so(this.layoutVertexArray,wt,At,1,-1),so(this.layoutVertexArray,wt,At,1,1),so(this.layoutVertexArray,wt,At,-1,1),this.indexArray.emplaceBack(Yt,Yt+1,Yt+2),this.indexArray.emplaceBack(Yt,Yt+3,Yt+2),Nt.vertexLength+=4,Nt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,W,{},ce)},Or("CircleBucket",xa,{omit:["layers"]});var fv=new na({"circle-sort-key":new Hr($e.layout_circle["circle-sort-key"])}),hv={paint:new na({"circle-radius":new Hr($e.paint_circle["circle-radius"]),"circle-color":new Hr($e.paint_circle["circle-color"]),"circle-blur":new Hr($e.paint_circle["circle-blur"]),"circle-opacity":new Hr($e.paint_circle["circle-opacity"]),"circle-translate":new Dr($e.paint_circle["circle-translate"]),"circle-translate-anchor":new Dr($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Dr($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Dr($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Hr($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Hr($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Hr($e.paint_circle["circle-stroke-opacity"])}),layout:fv},_s=typeof Float32Array<"u"?Float32Array:Array;function tp(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function Sd(A,D,W){var ce=D[0],Se=D[1],Ie=D[2],Ve=D[3],tt=D[4],ct=D[5],wt=D[6],At=D[7],Nt=D[8],Yt=D[9],Ut=D[10],sn=D[11],un=D[12],En=D[13],Mn=D[14],Nn=D[15],jn=W[0],Gn=W[1],Kn=W[2],rr=W[3];return A[0]=jn*ce+Gn*tt+Kn*Nt+rr*un,A[1]=jn*Se+Gn*ct+Kn*Yt+rr*En,A[2]=jn*Ie+Gn*wt+Kn*Ut+rr*Mn,A[3]=jn*Ve+Gn*At+Kn*sn+rr*Nn,jn=W[4],Gn=W[5],Kn=W[6],rr=W[7],A[4]=jn*ce+Gn*tt+Kn*Nt+rr*un,A[5]=jn*Se+Gn*ct+Kn*Yt+rr*En,A[6]=jn*Ie+Gn*wt+Kn*Ut+rr*Mn,A[7]=jn*Ve+Gn*At+Kn*sn+rr*Nn,jn=W[8],Gn=W[9],Kn=W[10],rr=W[11],A[8]=jn*ce+Gn*tt+Kn*Nt+rr*un,A[9]=jn*Se+Gn*ct+Kn*Yt+rr*En,A[10]=jn*Ie+Gn*wt+Kn*Ut+rr*Mn,A[11]=jn*Ve+Gn*At+Kn*sn+rr*Nn,jn=W[12],Gn=W[13],Kn=W[14],rr=W[15],A[12]=jn*ce+Gn*tt+Kn*Nt+rr*un,A[13]=jn*Se+Gn*ct+Kn*Yt+rr*En,A[14]=jn*Ie+Gn*wt+Kn*Ut+rr*Mn,A[15]=jn*Ve+Gn*At+Kn*sn+rr*Nn,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,D=0,W=arguments.length;W--;)D+=A[W]*A[W];return Math.sqrt(D)});var pv=Sd,Vf,dv=function(A,D,W){return A[0]=D[0]-W[0],A[1]=D[1]-W[1],A[2]=D[2]-W[2],A};function Hf(A,D,W){var ce=D[0],Se=D[1],Ie=D[2],Ve=D[3];return A[0]=W[0]*ce+W[4]*Se+W[8]*Ie+W[12]*Ve,A[1]=W[1]*ce+W[5]*Se+W[9]*Ie+W[13]*Ve,A[2]=W[2]*ce+W[6]*Se+W[10]*Ie+W[14]*Ve,A[3]=W[3]*ce+W[7]*Se+W[11]*Ie+W[15]*Ve,A}Vf=new _s(3),_s!=Float32Array&&(Vf[0]=0,Vf[1]=0,Vf[2]=0),function(){var A=new _s(4);_s!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0)}();var gv=function(A){var D=A[0],W=A[1];return D*D+W*W},vv=(function(){var A=new _s(2);_s!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function D(W){A.call(this,W,hv)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(W){return new xa(W)},D.prototype.queryRadius=function(W){var ce=W;return Xc("circle-radius",this,ce)+Xc("circle-stroke-width",this,ce)+jf(this.paint.get("circle-translate"))},D.prototype.queryIntersectsFeature=function(W,ce,Se,Ie,Ve,tt,ct,wt){for(var At=Uf(W,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),tt.angle,ct),Nt=this.paint.get("circle-radius").evaluate(ce,Se)+this.paint.get("circle-stroke-width").evaluate(ce,Se),Yt=this.paint.get("circle-pitch-alignment")==="map",Ut=Yt?At:function(_r,vr){return _r.map(function(Ar){return Ed(Ar,vr)})}(At,wt),sn=Yt?Nt*ct:Nt,un=0,En=Ie;un<En.length;un+=1)for(var Mn=0,Nn=En[un];Mn<Nn.length;Mn+=1){var jn=Nn[Mn],Gn=Yt?jn:Ed(jn,wt),Kn=sn,rr=Hf([],[jn.x,jn.y,0,1],wt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Kn*=rr[3]/tt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Kn*=tt.cameraToCenterDistance/rr[3]),Qh(Ut,Gn,Kn))return!0}return!1},D}(mi));function Ed(A,D){var W=Hf([],[A.x,A.y,0,1],D);return new t(W[0]/W[3],W[1]/W[3])}var Ld=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(xa);function np(A,D,W,ce){var Se=D.width,Ie=D.height;if(ce){if(ce instanceof Uint8ClampedArray)ce=new Uint8Array(ce.buffer);else if(ce.length!==Se*Ie*W)throw new RangeError("mismatched image size")}else ce=new Uint8Array(Se*Ie*W);return A.width=Se,A.height=Ie,A.data=ce,A}function Cd(A,D,W){var ce=D.width,Se=D.height;if(ce!==A.width||Se!==A.height){var Ie=np({},{width:ce,height:Se},W);rp(A,Ie,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,ce),height:Math.min(A.height,Se)},W),A.width=ce,A.height=Se,A.data=Ie.data}}function rp(A,D,W,ce,Se,Ie){if(Se.width===0||Se.height===0)return D;if(Se.width>A.width||Se.height>A.height||W.x>A.width-Se.width||W.y>A.height-Se.height)throw new RangeError("out of range source coordinates for image copy");if(Se.width>D.width||Se.height>D.height||ce.x>D.width-Se.width||ce.y>D.height-Se.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ve=A.data,tt=D.data,ct=0;ct<Se.height;ct++)for(var wt=((W.y+ct)*A.width+W.x)*Ie,At=((ce.y+ct)*D.width+ce.x)*Ie,Nt=0;Nt<Se.width*Ie;Nt++)tt[At+Nt]=Ve[wt+Nt];return D}Or("HeatmapBucket",Ld,{omit:["layers"]});var Ku=function(A,D){np(this,A,1,D)};Ku.prototype.resize=function(A){Cd(this,A,1)},Ku.prototype.clone=function(){return new Ku({width:this.width,height:this.height},new Uint8Array(this.data))},Ku.copy=function(A,D,W,ce,Se){rp(A,D,W,ce,Se,1)};var Ho=function(A,D){np(this,A,4,D)};Ho.prototype.resize=function(A){Cd(this,A,4)},Ho.prototype.replace=function(A,D){D?this.data.set(A):A instanceof Uint8ClampedArray?this.data=new Uint8Array(A.buffer):this.data=A},Ho.prototype.clone=function(){return new Ho({width:this.width,height:this.height},new Uint8Array(this.data))},Ho.copy=function(A,D,W,ce,Se){rp(A,D,W,ce,Se,4)},Or("AlphaImage",Ku),Or("RGBAImage",Ho);var mv={paint:new na({"heatmap-radius":new Hr($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Hr($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Dr($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new es($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Dr($e.paint_heatmap["heatmap-opacity"])})};function Od(A){var D={},W=A.resolution||256,ce=A.clips?A.clips.length:1,Se=A.image||new Ho({width:W,height:ce}),Ie=function(sn,un,En){D[A.evaluationKey]=En;var Mn=A.expression.evaluate(D);Se.data[sn+un+0]=Math.floor(255*Mn.r/Mn.a),Se.data[sn+un+1]=Math.floor(255*Mn.g/Mn.a),Se.data[sn+un+2]=Math.floor(255*Mn.b/Mn.a),Se.data[sn+un+3]=Math.floor(255*Mn.a)};if(A.clips)for(var Ve=0,tt=0;Ve<ce;++Ve,tt+=4*W)for(var ct=0,wt=0;ct<W;ct++,wt+=4){var At=ct/(W-1),Nt=A.clips[Ve];Ie(tt,wt,Nt.start*(1-At)+Nt.end*At)}else for(var Yt=0,Ut=0;Yt<W;Yt++,Ut+=4)Ie(0,Ut,Yt/(W-1));return Se}var yv=function(A){function D(W){A.call(this,W,mv),this._updateColorRamp()}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(W){return new Ld(W)},D.prototype._handleSpecialPaintPropertyUpdate=function(W){W==="heatmap-color"&&this._updateColorRamp()},D.prototype._updateColorRamp=function(){var W=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Od({expression:W,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},D.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},D}(mi),xv={paint:new na({"hillshade-illumination-direction":new Dr($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Dr($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Dr($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Dr($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Dr($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Dr($e.paint_hillshade["hillshade-accent-color"])})},bv=function(A){function D(W){A.call(this,W,xv)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},D}(mi),_v=Ri([{name:"a_pos",components:2,type:"Int16"}],4).members,ip=qf,wv=qf;function qf(A,D,W){W=W||2;var ce,Se,Ie,Ve,tt,ct,wt,At=D&&D.length,Nt=At?D[0]*W:A.length,Yt=Pd(A,0,Nt,W,!0),Ut=[];if(!Yt||Yt.next===Yt.prev)return Ut;if(At&&(Yt=function(un,En,Mn,Nn){var jn,Gn,Kn,rr=[];for(jn=0,Gn=En.length;jn<Gn;jn++)(Kn=Pd(un,En[jn]*Nn,jn<Gn-1?En[jn+1]*Nn:un.length,Nn,!1))===Kn.next&&(Kn.steiner=!0),rr.push(Cv(Kn));for(rr.sort(Sv),jn=0;jn<rr.length;jn++)Ev(rr[jn],Mn),Mn=Fu(Mn,Mn.next);return Mn}(A,D,Yt,W)),A.length>80*W){ce=Ie=A[0],Se=Ve=A[1];for(var sn=W;sn<Nt;sn+=W)(tt=A[sn])<ce&&(ce=tt),(ct=A[sn+1])<Se&&(Se=ct),tt>Ie&&(Ie=tt),ct>Ve&&(Ve=ct);wt=(wt=Math.max(Ie-ce,Ve-Se))!==0?1/wt:0}return Jc(Yt,Ut,W,ce,Se,wt),Ut}function Pd(A,D,W,ce,Se){var Ie,Ve;if(Se===sp(A,D,W,ce)>0)for(Ie=D;Ie<W;Ie+=ce)Ve=Rd(Ie,A[Ie],A[Ie+1],Ve);else for(Ie=W-ce;Ie>=D;Ie-=ce)Ve=Rd(Ie,A[Ie],A[Ie+1],Ve);return Ve&&Yf(Ve,Ve.next)&&(Qc(Ve),Ve=Ve.next),Ve}function Fu(A,D){if(!A)return A;D||(D=A);var W,ce=A;do if(W=!1,ce.steiner||!Yf(ce,ce.next)&&Aa(ce.prev,ce,ce.next)!==0)ce=ce.next;else{if(Qc(ce),(ce=D=ce.prev)===ce.next)break;W=!0}while(W||ce!==D);return D}function Jc(A,D,W,ce,Se,Ie,Ve){if(A){!Ve&&Ie&&function(At,Nt,Yt,Ut){var sn=At;do sn.z===null&&(sn.z=ap(sn.x,sn.y,Nt,Yt,Ut)),sn.prevZ=sn.prev,sn.nextZ=sn.next,sn=sn.next;while(sn!==At);sn.prevZ.nextZ=null,sn.prevZ=null,function(un){var En,Mn,Nn,jn,Gn,Kn,rr,_r,vr=1;do{for(Mn=un,un=null,Gn=null,Kn=0;Mn;){for(Kn++,Nn=Mn,rr=0,En=0;En<vr&&(rr++,Nn=Nn.nextZ);En++);for(_r=vr;rr>0||_r>0&&Nn;)rr!==0&&(_r===0||!Nn||Mn.z<=Nn.z)?(jn=Mn,Mn=Mn.nextZ,rr--):(jn=Nn,Nn=Nn.nextZ,_r--),Gn?Gn.nextZ=jn:un=jn,jn.prevZ=Gn,Gn=jn;Mn=Nn}Gn.nextZ=null,vr*=2}while(Kn>1)}(sn)}(A,ce,Se,Ie);for(var tt,ct,wt=A;A.prev!==A.next;)if(tt=A.prev,ct=A.next,Ie?kv(A,ce,Se,Ie):Tv(A))D.push(tt.i/W),D.push(A.i/W),D.push(ct.i/W),Qc(A),A=ct.next,wt=ct.next;else if((A=ct)===wt){Ve?Ve===1?Jc(A=Mv(Fu(A),D,W),D,W,ce,Se,Ie,2):Ve===2&&Av(A,D,W,ce,Se,Ie):Jc(Fu(A),D,W,ce,Se,Ie,1);break}}}function Tv(A){var D=A.prev,W=A,ce=A.next;if(Aa(D,W,ce)>=0)return!1;for(var Se=A.next.next;Se!==A.prev;){if(dc(D.x,D.y,W.x,W.y,ce.x,ce.y,Se.x,Se.y)&&Aa(Se.prev,Se,Se.next)>=0)return!1;Se=Se.next}return!0}function kv(A,D,W,ce){var Se=A.prev,Ie=A,Ve=A.next;if(Aa(Se,Ie,Ve)>=0)return!1;for(var tt=Se.x<Ie.x?Se.x<Ve.x?Se.x:Ve.x:Ie.x<Ve.x?Ie.x:Ve.x,ct=Se.y<Ie.y?Se.y<Ve.y?Se.y:Ve.y:Ie.y<Ve.y?Ie.y:Ve.y,wt=Se.x>Ie.x?Se.x>Ve.x?Se.x:Ve.x:Ie.x>Ve.x?Ie.x:Ve.x,At=Se.y>Ie.y?Se.y>Ve.y?Se.y:Ve.y:Ie.y>Ve.y?Ie.y:Ve.y,Nt=ap(tt,ct,D,W,ce),Yt=ap(wt,At,D,W,ce),Ut=A.prevZ,sn=A.nextZ;Ut&&Ut.z>=Nt&&sn&&sn.z<=Yt;){if(Ut!==A.prev&&Ut!==A.next&&dc(Se.x,Se.y,Ie.x,Ie.y,Ve.x,Ve.y,Ut.x,Ut.y)&&Aa(Ut.prev,Ut,Ut.next)>=0||(Ut=Ut.prevZ,sn!==A.prev&&sn!==A.next&&dc(Se.x,Se.y,Ie.x,Ie.y,Ve.x,Ve.y,sn.x,sn.y)&&Aa(sn.prev,sn,sn.next)>=0))return!1;sn=sn.nextZ}for(;Ut&&Ut.z>=Nt;){if(Ut!==A.prev&&Ut!==A.next&&dc(Se.x,Se.y,Ie.x,Ie.y,Ve.x,Ve.y,Ut.x,Ut.y)&&Aa(Ut.prev,Ut,Ut.next)>=0)return!1;Ut=Ut.prevZ}for(;sn&&sn.z<=Yt;){if(sn!==A.prev&&sn!==A.next&&dc(Se.x,Se.y,Ie.x,Ie.y,Ve.x,Ve.y,sn.x,sn.y)&&Aa(sn.prev,sn,sn.next)>=0)return!1;sn=sn.nextZ}return!0}function Mv(A,D,W){var ce=A;do{var Se=ce.prev,Ie=ce.next.next;!Yf(Se,Ie)&&Id(Se,ce,ce.next,Ie)&&Kc(Se,Ie)&&Kc(Ie,Se)&&(D.push(Se.i/W),D.push(ce.i/W),D.push(Ie.i/W),Qc(ce),Qc(ce.next),ce=A=Ie),ce=ce.next}while(ce!==A);return Fu(ce)}function Av(A,D,W,ce,Se,Ie){var Ve=A;do{for(var tt=Ve.next.next;tt!==Ve.prev;){if(Ve.i!==tt.i&&Ov(Ve,tt)){var ct=Dd(Ve,tt);return Ve=Fu(Ve,Ve.next),ct=Fu(ct,ct.next),Jc(Ve,D,W,ce,Se,Ie),void Jc(ct,D,W,ce,Se,Ie)}tt=tt.next}Ve=Ve.next}while(Ve!==A)}function Sv(A,D){return A.x-D.x}function Ev(A,D){if(D=function(ce,Se){var Ie,Ve=Se,tt=ce.x,ct=ce.y,wt=-1/0;do{if(ct<=Ve.y&&ct>=Ve.next.y&&Ve.next.y!==Ve.y){var At=Ve.x+(ct-Ve.y)*(Ve.next.x-Ve.x)/(Ve.next.y-Ve.y);if(At<=tt&&At>wt){if(wt=At,At===tt){if(ct===Ve.y)return Ve;if(ct===Ve.next.y)return Ve.next}Ie=Ve.x<Ve.next.x?Ve:Ve.next}}Ve=Ve.next}while(Ve!==Se);if(!Ie)return null;if(tt===wt)return Ie;var Nt,Yt=Ie,Ut=Ie.x,sn=Ie.y,un=1/0;Ve=Ie;do tt>=Ve.x&&Ve.x>=Ut&&tt!==Ve.x&&dc(ct<sn?tt:wt,ct,Ut,sn,ct<sn?wt:tt,ct,Ve.x,Ve.y)&&(Nt=Math.abs(ct-Ve.y)/(tt-Ve.x),Kc(Ve,ce)&&(Nt<un||Nt===un&&(Ve.x>Ie.x||Ve.x===Ie.x&&Lv(Ie,Ve)))&&(Ie=Ve,un=Nt)),Ve=Ve.next;while(Ve!==Yt);return Ie}(A,D)){var W=Dd(D,A);Fu(D,D.next),Fu(W,W.next)}}function Lv(A,D){return Aa(A.prev,A,D.prev)<0&&Aa(D.next,A,A.next)<0}function ap(A,D,W,ce,Se){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-W)*Se)|A<<8))|A<<4))|A<<2))|A<<1))|(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-ce)*Se)|D<<8))|D<<4))|D<<2))|D<<1))<<1}function Cv(A){var D=A,W=A;do(D.x<W.x||D.x===W.x&&D.y<W.y)&&(W=D),D=D.next;while(D!==A);return W}function dc(A,D,W,ce,Se,Ie,Ve,tt){return(Se-Ve)*(D-tt)-(A-Ve)*(Ie-tt)>=0&&(A-Ve)*(ce-tt)-(W-Ve)*(D-tt)>=0&&(W-Ve)*(Ie-tt)-(Se-Ve)*(ce-tt)>=0}function Ov(A,D){return A.next.i!==D.i&&A.prev.i!==D.i&&!function(W,ce){var Se=W;do{if(Se.i!==W.i&&Se.next.i!==W.i&&Se.i!==ce.i&&Se.next.i!==ce.i&&Id(Se,Se.next,W,ce))return!0;Se=Se.next}while(Se!==W);return!1}(A,D)&&(Kc(A,D)&&Kc(D,A)&&function(W,ce){var Se=W,Ie=!1,Ve=(W.x+ce.x)/2,tt=(W.y+ce.y)/2;do Se.y>tt!=Se.next.y>tt&&Se.next.y!==Se.y&&Ve<(Se.next.x-Se.x)*(tt-Se.y)/(Se.next.y-Se.y)+Se.x&&(Ie=!Ie),Se=Se.next;while(Se!==W);return Ie}(A,D)&&(Aa(A.prev,A,D.prev)||Aa(A,D.prev,D))||Yf(A,D)&&Aa(A.prev,A,A.next)>0&&Aa(D.prev,D,D.next)>0)}function Aa(A,D,W){return(D.y-A.y)*(W.x-D.x)-(D.x-A.x)*(W.y-D.y)}function Yf(A,D){return A.x===D.x&&A.y===D.y}function Id(A,D,W,ce){var Se=Wf(Aa(A,D,W)),Ie=Wf(Aa(A,D,ce)),Ve=Wf(Aa(W,ce,A)),tt=Wf(Aa(W,ce,D));return Se!==Ie&&Ve!==tt||!(Se!==0||!Gf(A,W,D))||!(Ie!==0||!Gf(A,ce,D))||!(Ve!==0||!Gf(W,A,ce))||!(tt!==0||!Gf(W,D,ce))}function Gf(A,D,W){return D.x<=Math.max(A.x,W.x)&&D.x>=Math.min(A.x,W.x)&&D.y<=Math.max(A.y,W.y)&&D.y>=Math.min(A.y,W.y)}function Wf(A){return A>0?1:A<0?-1:0}function Kc(A,D){return Aa(A.prev,A,A.next)<0?Aa(A,D,A.next)>=0&&Aa(A,A.prev,D)>=0:Aa(A,D,A.prev)<0||Aa(A,A.next,D)<0}function Dd(A,D){var W=new op(A.i,A.x,A.y),ce=new op(D.i,D.x,D.y),Se=A.next,Ie=D.prev;return A.next=D,D.prev=A,W.next=Se,Se.prev=W,ce.next=W,W.prev=ce,Ie.next=ce,ce.prev=Ie,ce}function Rd(A,D,W,ce){var Se=new op(A,D,W);return ce?(Se.next=ce.next,Se.prev=ce,ce.next.prev=Se,ce.next=Se):(Se.prev=Se,Se.next=Se),Se}function Qc(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function op(A,D,W){this.i=A,this.x=D,this.y=W,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sp(A,D,W,ce){for(var Se=0,Ie=D,Ve=W-ce;Ie<W;Ie+=ce)Se+=(A[Ve]-A[Ie])*(A[Ie+1]+A[Ve+1]),Ve=Ie;return Se}function Pv(A,D,W,ce,Se){zd(A,D,W||0,ce||A.length-1,Se||Iv)}function zd(A,D,W,ce,Se){for(;ce>W;){if(ce-W>600){var Ie=ce-W+1,Ve=D-W+1,tt=Math.log(Ie),ct=.5*Math.exp(2*tt/3),wt=.5*Math.sqrt(tt*ct*(Ie-ct)/Ie)*(Ve-Ie/2<0?-1:1);zd(A,D,Math.max(W,Math.floor(D-Ve*ct/Ie+wt)),Math.min(ce,Math.floor(D+(Ie-Ve)*ct/Ie+wt)),Se)}var At=A[D],Nt=W,Yt=ce;for($c(A,W,D),Se(A[ce],At)>0&&$c(A,W,ce);Nt<Yt;){for($c(A,Nt,Yt),Nt++,Yt--;Se(A[Nt],At)<0;)Nt++;for(;Se(A[Yt],At)>0;)Yt--}Se(A[W],At)===0?$c(A,W,Yt):$c(A,++Yt,ce),Yt<=D&&(W=Yt+1),D<=Yt&&(ce=Yt-1)}}function $c(A,D,W){var ce=A[D];A[D]=A[W],A[W]=ce}function Iv(A,D){return A<D?-1:A>D?1:0}function lp(A,D){var W=A.length;if(W<=1)return[A];for(var ce,Se,Ie=[],Ve=0;Ve<W;Ve++){var tt=P(A[Ve]);tt!==0&&(A[Ve].area=Math.abs(tt),Se===void 0&&(Se=tt<0),Se===tt<0?(ce&&Ie.push(ce),ce=[A[Ve]]):ce.push(A[Ve]))}if(ce&&Ie.push(ce),D>1)for(var ct=0;ct<Ie.length;ct++)Ie[ct].length<=D||(Pv(Ie[ct],D,1,Ie[ct].length-1,Dv),Ie[ct]=Ie[ct].slice(0,D));return Ie}function Dv(A,D){return D.area-A.area}function up(A,D,W){for(var ce=W.patternDependencies,Se=!1,Ie=0,Ve=D;Ie<Ve.length;Ie+=1){var tt=Ve[Ie].paint.get(A+"-pattern");tt.isConstant()||(Se=!0);var ct=tt.constantOr(null);ct&&(Se=!0,ce[ct.to]=!0,ce[ct.from]=!0)}return Se}function cp(A,D,W,ce,Se){for(var Ie=Se.patternDependencies,Ve=0,tt=D;Ve<tt.length;Ve+=1){var ct=tt[Ve],wt=ct.paint.get(A+"-pattern").value;if(wt.kind!=="constant"){var At=wt.evaluate({zoom:ce-1},W,{},Se.availableImages),Nt=wt.evaluate({zoom:ce},W,{},Se.availableImages),Yt=wt.evaluate({zoom:ce+1},W,{},Se.availableImages);At=At&&At.name?At.name:At,Nt=Nt&&Nt.name?Nt.name:Nt,Yt=Yt&&Yt.name?Yt.name:Yt,Ie[At]=!0,Ie[Nt]=!0,Ie[Yt]=!0,W.patterns[ct.id]={min:At,mid:Nt,max:Yt}}}return W}qf.deviation=function(A,D,W,ce){var Se=D&&D.length,Ie=Se?D[0]*W:A.length,Ve=Math.abs(sp(A,0,Ie,W));if(Se)for(var tt=0,ct=D.length;tt<ct;tt++){var wt=D[tt]*W,At=tt<ct-1?D[tt+1]*W:A.length;Ve-=Math.abs(sp(A,wt,At,W))}var Nt=0;for(tt=0;tt<ce.length;tt+=3){var Yt=ce[tt]*W,Ut=ce[tt+1]*W,sn=ce[tt+2]*W;Nt+=Math.abs((A[Yt]-A[sn])*(A[Ut+1]-A[Yt+1])-(A[Yt]-A[Ut])*(A[sn+1]-A[Yt+1]))}return Ve===0&&Nt===0?0:Math.abs((Nt-Ve)/Ve)},qf.flatten=function(A){for(var D=A[0][0].length,W={vertices:[],holes:[],dimensions:D},ce=0,Se=0;Se<A.length;Se++){for(var Ie=0;Ie<A[Se].length;Ie++)for(var Ve=0;Ve<D;Ve++)W.vertices.push(A[Se][Ie][Ve]);Se>0&&(ce+=A[Se-1].length,W.holes.push(ce))}return W},ip.default=wv;var El=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bs,this.indexArray=new me,this.indexArray2=new pt,this.programConfigurations=new la(A.layers,A.zoom),this.segments=new Yn,this.segments2=new Yn,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};El.prototype.populate=function(A,D,W){this.hasPattern=up("fill",this.layers,D);for(var ce=this.layers[0].layout.get("fill-sort-key"),Se=[],Ie=0,Ve=A;Ie<Ve.length;Ie+=1){var tt=Ve[Ie],ct=tt.feature,wt=tt.id,At=tt.index,Nt=tt.sourceLayerIndex,Yt=this.layers[0]._featureFilter.needGeometry,Ut=Yi(ct,Yt);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Ut,W)){var sn=ce?ce.evaluate(Ut,{},W,D.availableImages):void 0,un={id:wt,properties:ct.properties,type:ct.type,sourceLayerIndex:Nt,index:At,geometry:Yt?Ut.geometry:ts(ct),patterns:{},sortKey:sn};Se.push(un)}}ce&&Se.sort(function(Ar,Cr){return Ar.sortKey-Cr.sortKey});for(var En=0,Mn=Se;En<Mn.length;En+=1){var Nn=Mn[En],jn=Nn,Gn=jn.geometry,Kn=jn.index,rr=jn.sourceLayerIndex;if(this.hasPattern){var _r=cp("fill",this.layers,Nn,this.zoom,D);this.patternFeatures.push(_r)}else this.addFeature(Nn,Gn,Kn,W,{});var vr=A[Kn].feature;D.featureIndex.insert(vr,Gn,Kn,rr,this.index)}},El.prototype.update=function(A,D,W){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,W)},El.prototype.addFeatures=function(A,D,W){for(var ce=0,Se=this.patternFeatures;ce<Se.length;ce+=1){var Ie=Se[ce];this.addFeature(Ie,Ie.geometry,Ie.index,D,W)}},El.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},El.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},El.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,_v),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},El.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},El.prototype.addFeature=function(A,D,W,ce,Se){for(var Ie=0,Ve=lp(D,500);Ie<Ve.length;Ie+=1){for(var tt=Ve[Ie],ct=0,wt=0,At=tt;wt<At.length;wt+=1)ct+=At[wt].length;for(var Nt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),Yt=Nt.vertexLength,Ut=[],sn=[],un=0,En=tt;un<En.length;un+=1){var Mn=En[un];if(Mn.length!==0){Mn!==tt[0]&&sn.push(Ut.length/2);var Nn=this.segments2.prepareSegment(Mn.length,this.layoutVertexArray,this.indexArray2),jn=Nn.vertexLength;this.layoutVertexArray.emplaceBack(Mn[0].x,Mn[0].y),this.indexArray2.emplaceBack(jn+Mn.length-1,jn),Ut.push(Mn[0].x),Ut.push(Mn[0].y);for(var Gn=1;Gn<Mn.length;Gn++)this.layoutVertexArray.emplaceBack(Mn[Gn].x,Mn[Gn].y),this.indexArray2.emplaceBack(jn+Gn-1,jn+Gn),Ut.push(Mn[Gn].x),Ut.push(Mn[Gn].y);Nn.vertexLength+=Mn.length,Nn.primitiveLength+=Mn.length}}for(var Kn=ip(Ut,sn),rr=0;rr<Kn.length;rr+=3)this.indexArray.emplaceBack(Yt+Kn[rr],Yt+Kn[rr+1],Yt+Kn[rr+2]);Nt.vertexLength+=ct,Nt.primitiveLength+=Kn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,W,Se,ce)},Or("FillBucket",El,{omit:["layers","patternFeatures"]});var Rv=new na({"fill-sort-key":new Hr($e.layout_fill["fill-sort-key"])}),zv={paint:new na({"fill-antialias":new Dr($e.paint_fill["fill-antialias"]),"fill-opacity":new Hr($e.paint_fill["fill-opacity"]),"fill-color":new Hr($e.paint_fill["fill-color"]),"fill-outline-color":new Hr($e.paint_fill["fill-outline-color"]),"fill-translate":new Dr($e.paint_fill["fill-translate"]),"fill-translate-anchor":new Dr($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new ao($e.paint_fill["fill-pattern"])}),layout:Rv},Fv=function(A){function D(W){A.call(this,W,zv)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(W,ce){A.prototype.recalculate.call(this,W,ce);var Se=this.paint._values["fill-outline-color"];Se.value.kind==="constant"&&Se.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},D.prototype.createBucket=function(W){return new El(W)},D.prototype.queryRadius=function(){return jf(this.paint.get("fill-translate"))},D.prototype.queryIntersectsFeature=function(W,ce,Se,Ie,Ve,tt,ct){return Ff(Uf(W,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),tt.angle,ct),Ie)},D.prototype.isTileClipped=function(){return!0},D}(mi),Bv=Ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Fd=gc;function gc(A,D,W,ce,Se){this.properties={},this.extent=W,this.type=0,this._pbf=A,this._geometry=-1,this._keys=ce,this._values=Se,A.readFields(Nv,this,D)}function Nv(A,D,W){A==1?D.id=W.readVarint():A==2?function(ce,Se){for(var Ie=ce.readVarint()+ce.pos;ce.pos<Ie;){var Ve=Se._keys[ce.readVarint()],tt=Se._values[ce.readVarint()];Se.properties[Ve]=tt}}(W,D):A==3?D.type=W.readVarint():A==4&&(D._geometry=W.pos)}function jv(A){for(var D,W,ce=0,Se=0,Ie=A.length,Ve=Ie-1;Se<Ie;Ve=Se++)D=A[Se],ce+=((W=A[Ve]).x-D.x)*(D.y+W.y);return ce}gc.types=["Unknown","Point","LineString","Polygon"],gc.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var D,W=A.readVarint()+A.pos,ce=1,Se=0,Ie=0,Ve=0,tt=[];A.pos<W;){if(Se<=0){var ct=A.readVarint();ce=7&ct,Se=ct>>3}if(Se--,ce===1||ce===2)Ie+=A.readSVarint(),Ve+=A.readSVarint(),ce===1&&(D&&tt.push(D),D=[]),D.push(new t(Ie,Ve));else{if(ce!==7)throw new Error("unknown command "+ce);D&&D.push(D[0].clone())}}return D&&tt.push(D),tt},gc.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var D=A.readVarint()+A.pos,W=1,ce=0,Se=0,Ie=0,Ve=1/0,tt=-1/0,ct=1/0,wt=-1/0;A.pos<D;){if(ce<=0){var At=A.readVarint();W=7&At,ce=At>>3}if(ce--,W===1||W===2)(Se+=A.readSVarint())<Ve&&(Ve=Se),Se>tt&&(tt=Se),(Ie+=A.readSVarint())<ct&&(ct=Ie),Ie>wt&&(wt=Ie);else if(W!==7)throw new Error("unknown command "+W)}return[Ve,ct,tt,wt]},gc.prototype.toGeoJSON=function(A,D,W){var ce,Se,Ie=this.extent*Math.pow(2,W),Ve=this.extent*A,tt=this.extent*D,ct=this.loadGeometry(),wt=gc.types[this.type];function At(Ut){for(var sn=0;sn<Ut.length;sn++){var un=Ut[sn],En=180-360*(un.y+tt)/Ie;Ut[sn]=[360*(un.x+Ve)/Ie-180,360/Math.PI*Math.atan(Math.exp(En*Math.PI/180))-90]}}switch(this.type){case 1:var Nt=[];for(ce=0;ce<ct.length;ce++)Nt[ce]=ct[ce][0];At(ct=Nt);break;case 2:for(ce=0;ce<ct.length;ce++)At(ct[ce]);break;case 3:for(ct=function(Ut){var sn=Ut.length;if(sn<=1)return[Ut];for(var un,En,Mn=[],Nn=0;Nn<sn;Nn++){var jn=jv(Ut[Nn]);jn!==0&&(En===void 0&&(En=jn<0),En===jn<0?(un&&Mn.push(un),un=[Ut[Nn]]):un.push(Ut[Nn]))}return un&&Mn.push(un),Mn}(ct),ce=0;ce<ct.length;ce++)for(Se=0;Se<ct[ce].length;Se++)At(ct[ce][Se])}ct.length===1?ct=ct[0]:wt="Multi"+wt;var Yt={type:"Feature",geometry:{type:wt,coordinates:ct},properties:this.properties};return"id"in this&&(Yt.id=this.id),Yt};var Bd=Nd;function Nd(A,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(Uv,this,D),this.length=this._features.length}function Uv(A,D,W){A===15?D.version=W.readVarint():A===1?D.name=W.readString():A===5?D.extent=W.readVarint():A===2?D._features.push(W.pos):A===3?D._keys.push(W.readString()):A===4&&D._values.push(function(ce){for(var Se=null,Ie=ce.readVarint()+ce.pos;ce.pos<Ie;){var Ve=ce.readVarint()>>3;Se=Ve===1?ce.readString():Ve===2?ce.readFloat():Ve===3?ce.readDouble():Ve===4?ce.readVarint64():Ve===5?ce.readVarint():Ve===6?ce.readSVarint():Ve===7?ce.readBoolean():null}return Se}(W))}function Vv(A,D,W){if(A===3){var ce=new Bd(W,W.readVarint()+W.pos);ce.length&&(D[ce.name]=ce)}}Nd.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var D=this._pbf.readVarint()+this._pbf.pos;return new Fd(this._pbf,D,this.extent,this._keys,this._values)};var vc={VectorTile:function(A,D){this.layers=A.readFields(Vv,{},D)},VectorTileFeature:Fd,VectorTileLayer:Bd},Hv=vc.VectorTileFeature.types,fp=Math.pow(2,13);function ef(A,D,W,ce,Se,Ie,Ve,tt){A.emplaceBack(D,W,2*Math.floor(ce*fp)+Ve,Se*fp*2,Ie*fp*2,Math.round(tt))}var Ll=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Qe,this.indexArray=new me,this.programConfigurations=new la(A.layers,A.zoom),this.segments=new Yn,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function qv(A,D){return A.x===D.x&&(A.x<0||A.x>pi)||A.y===D.y&&(A.y<0||A.y>pi)}Ll.prototype.populate=function(A,D,W){this.features=[],this.hasPattern=up("fill-extrusion",this.layers,D);for(var ce=0,Se=A;ce<Se.length;ce+=1){var Ie=Se[ce],Ve=Ie.feature,tt=Ie.id,ct=Ie.index,wt=Ie.sourceLayerIndex,At=this.layers[0]._featureFilter.needGeometry,Nt=Yi(Ve,At);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Nt,W)){var Yt={id:tt,sourceLayerIndex:wt,index:ct,geometry:At?Nt.geometry:ts(Ve),properties:Ve.properties,type:Ve.type,patterns:{}};this.hasPattern?this.features.push(cp("fill-extrusion",this.layers,Yt,this.zoom,D)):this.addFeature(Yt,Yt.geometry,ct,W,{}),D.featureIndex.insert(Ve,Yt.geometry,ct,wt,this.index,!0)}}},Ll.prototype.addFeatures=function(A,D,W){for(var ce=0,Se=this.features;ce<Se.length;ce+=1){var Ie=Se[ce],Ve=Ie.geometry;this.addFeature(Ie,Ve,Ie.index,D,W)}},Ll.prototype.update=function(A,D,W){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,W)},Ll.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ll.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ll.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Bv),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Ll.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ll.prototype.addFeature=function(A,D,W,ce,Se){for(var Ie=0,Ve=lp(D,500);Ie<Ve.length;Ie+=1){for(var tt=Ve[Ie],ct=0,wt=0,At=tt;wt<At.length;wt+=1)ct+=At[wt].length;for(var Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Yt=0,Ut=tt;Yt<Ut.length;Yt+=1){var sn=Ut[Yt];if(sn.length!==0&&!((ci=sn).every(function($r){return $r.x<0})||ci.every(function($r){return $r.x>pi})||ci.every(function($r){return $r.y<0})||ci.every(function($r){return $r.y>pi})))for(var un=0,En=0;En<sn.length;En++){var Mn=sn[En];if(En>=1){var Nn=sn[En-1];if(!qv(Mn,Nn)){Nt.vertexLength+4>Yn.MAX_VERTEX_ARRAY_LENGTH&&(Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var jn=Mn.sub(Nn)._perp()._unit(),Gn=Nn.dist(Mn);un+Gn>32768&&(un=0),ef(this.layoutVertexArray,Mn.x,Mn.y,jn.x,jn.y,0,0,un),ef(this.layoutVertexArray,Mn.x,Mn.y,jn.x,jn.y,0,1,un),un+=Gn,ef(this.layoutVertexArray,Nn.x,Nn.y,jn.x,jn.y,0,0,un),ef(this.layoutVertexArray,Nn.x,Nn.y,jn.x,jn.y,0,1,un);var Kn=Nt.vertexLength;this.indexArray.emplaceBack(Kn,Kn+2,Kn+1),this.indexArray.emplaceBack(Kn+1,Kn+2,Kn+3),Nt.vertexLength+=4,Nt.primitiveLength+=2}}}}if(Nt.vertexLength+ct>Yn.MAX_VERTEX_ARRAY_LENGTH&&(Nt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),Hv[A.type]==="Polygon"){for(var rr=[],_r=[],vr=Nt.vertexLength,Ar=0,Cr=tt;Ar<Cr.length;Ar+=1){var Zr=Cr[Ar];if(Zr.length!==0){Zr!==tt[0]&&_r.push(rr.length/2);for(var Nr=0;Nr<Zr.length;Nr++){var Gr=Zr[Nr];ef(this.layoutVertexArray,Gr.x,Gr.y,0,0,1,1,0),rr.push(Gr.x),rr.push(Gr.y)}}}for(var Ur=ip(rr,_r),zr=0;zr<Ur.length;zr+=3)this.indexArray.emplaceBack(vr+Ur[zr],vr+Ur[zr+2],vr+Ur[zr+1]);Nt.primitiveLength+=Ur.length/3,Nt.vertexLength+=ct}}var ci;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,W,Se,ce)},Or("FillExtrusionBucket",Ll,{omit:["layers","features"]});var Yv={paint:new na({"fill-extrusion-opacity":new Dr($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Hr($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Dr($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Dr($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ao($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Hr($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Hr($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Dr($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Gv=function(A){function D(W){A.call(this,W,Yv)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(W){return new Ll(W)},D.prototype.queryRadius=function(){return jf(this.paint.get("fill-extrusion-translate"))},D.prototype.is3D=function(){return!0},D.prototype.queryIntersectsFeature=function(W,ce,Se,Ie,Ve,tt,ct,wt){var At=Uf(W,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),tt.angle,ct),Nt=this.paint.get("fill-extrusion-height").evaluate(ce,Se),Yt=this.paint.get("fill-extrusion-base").evaluate(ce,Se),Ut=function(un,En,Mn,Nn){for(var jn=[],Gn=0,Kn=un;Gn<Kn.length;Gn+=1){var rr=Kn[Gn],_r=[rr.x,rr.y,Nn,1];Hf(_r,_r,En),jn.push(new t(_r[0]/_r[3],_r[1]/_r[3]))}return jn}(At,wt,0,0),sn=function(un,En,Mn,Nn){for(var jn=[],Gn=[],Kn=Nn[8]*En,rr=Nn[9]*En,_r=Nn[10]*En,vr=Nn[11]*En,Ar=Nn[8]*Mn,Cr=Nn[9]*Mn,Zr=Nn[10]*Mn,Nr=Nn[11]*Mn,Gr=0,Ur=un;Gr<Ur.length;Gr+=1){for(var zr=[],ci=[],$r=0,Bi=Ur[Gr];$r<Bi.length;$r+=1){var Yr=Bi[$r],Oi=Yr.x,Wi=Yr.y,$i=Nn[0]*Oi+Nn[4]*Wi+Nn[12],ea=Nn[1]*Oi+Nn[5]*Wi+Nn[13],Ni=Nn[2]*Oi+Nn[6]*Wi+Nn[14],La=Nn[3]*Oi+Nn[7]*Wi+Nn[15],oa=Ni+_r,Ya=La+vr,lo=$i+Ar,$a=ea+Cr,Oo=Ni+Zr,eo=La+Nr,Ia=new t(($i+Kn)/Ya,(ea+rr)/Ya);Ia.z=oa/Ya,zr.push(Ia);var to=new t(lo/eo,$a/eo);to.z=Oo/eo,ci.push(to)}jn.push(zr),Gn.push(ci)}return[jn,Gn]}(Ie,Yt,Nt,wt);return function(un,En,Mn){var Nn=1/0;Ff(Mn,En)&&(Nn=jd(Mn,En[0]));for(var jn=0;jn<En.length;jn++)for(var Gn=En[jn],Kn=un[jn],rr=0;rr<Gn.length-1;rr++){var _r=Gn[rr],vr=Gn[rr+1],Ar=Kn[rr],Cr=[_r,vr,Kn[rr+1],Ar,_r];Ju(Mn,Cr)&&(Nn=Math.min(Nn,jd(Mn,Cr)))}return Nn!==1/0&&Nn}(sn[0],sn[1],Ut)},D}(mi);function tf(A,D){return A.x*D.x+A.y*D.y}function jd(A,D){if(A.length===1){for(var W,ce=0,Se=D[ce++];!W||Se.equals(W);)if(!(W=D[ce++]))return 1/0;for(;ce<D.length;ce++){var Ie=D[ce],Ve=A[0],tt=W.sub(Se),ct=Ie.sub(Se),wt=Ve.sub(Se),At=tf(tt,tt),Nt=tf(tt,ct),Yt=tf(ct,ct),Ut=tf(wt,tt),sn=tf(wt,ct),un=At*Yt-Nt*Nt,En=(Yt*Ut-Nt*sn)/un,Mn=(At*sn-Nt*Ut)/un,Nn=1-En-Mn,jn=Se.z*Nn+W.z*En+Ie.z*Mn;if(isFinite(jn))return jn}return 1/0}for(var Gn=1/0,Kn=0,rr=D;Kn<rr.length;Kn+=1){var _r=rr[Kn];Gn=Math.min(Gn,_r.z)}return Gn}var Wv=Ri([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Zv=Ri([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Xv=vc.VectorTileFeature.types,Jv=Math.cos(Math.PI/180*37.5),Ud=Math.pow(2,14)/.5,Co=function(A){var D=this;this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(W){return W.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(W){D.gradients[W.id]={}}),this.layoutVertexArray=new nt,this.layoutVertexArray2=new ut,this.indexArray=new me,this.programConfigurations=new la(A.layers,A.zoom),this.segments=new Yn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(W){return W.isStateDependent()}).map(function(W){return W.id})};Co.prototype.populate=function(A,D,W){this.hasPattern=up("line",this.layers,D);for(var ce=this.layers[0].layout.get("line-sort-key"),Se=[],Ie=0,Ve=A;Ie<Ve.length;Ie+=1){var tt=Ve[Ie],ct=tt.feature,wt=tt.id,At=tt.index,Nt=tt.sourceLayerIndex,Yt=this.layers[0]._featureFilter.needGeometry,Ut=Yi(ct,Yt);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Ut,W)){var sn=ce?ce.evaluate(Ut,{},W):void 0,un={id:wt,properties:ct.properties,type:ct.type,sourceLayerIndex:Nt,index:At,geometry:Yt?Ut.geometry:ts(ct),patterns:{},sortKey:sn};Se.push(un)}}ce&&Se.sort(function(Ar,Cr){return Ar.sortKey-Cr.sortKey});for(var En=0,Mn=Se;En<Mn.length;En+=1){var Nn=Mn[En],jn=Nn,Gn=jn.geometry,Kn=jn.index,rr=jn.sourceLayerIndex;if(this.hasPattern){var _r=cp("line",this.layers,Nn,this.zoom,D);this.patternFeatures.push(_r)}else this.addFeature(Nn,Gn,Kn,W,{});var vr=A[Kn].feature;D.featureIndex.insert(vr,Gn,Kn,rr,this.index)}},Co.prototype.update=function(A,D,W){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,W)},Co.prototype.addFeatures=function(A,D,W){for(var ce=0,Se=this.patternFeatures;ce<Se.length;ce+=1){var Ie=Se[ce];this.addFeature(Ie,Ie.geometry,Ie.index,D,W)}},Co.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Co.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Co.prototype.upload=function(A){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,Zv)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Wv),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Co.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Co.prototype.lineFeatureClips=function(A){if(A.properties&&A.properties.hasOwnProperty("mapbox_clip_start")&&A.properties.hasOwnProperty("mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}},Co.prototype.addFeature=function(A,D,W,ce,Se){var Ie=this.layers[0].layout,Ve=Ie.get("line-join").evaluate(A,{}),tt=Ie.get("line-cap"),ct=Ie.get("line-miter-limit"),wt=Ie.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(var At=0,Nt=D;At<Nt.length;At+=1){var Yt=Nt[At];this.addLine(Yt,A,Ve,tt,ct,wt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,W,Se,ce)},Co.prototype.addLine=function(A,D,W,ce,Se,Ie){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Ve=0;Ve<A.length-1;Ve++)this.totalDistance+=A[Ve].dist(A[Ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var tt=Xv[D.type]==="Polygon",ct=A.length;ct>=2&&A[ct-1].equals(A[ct-2]);)ct--;for(var wt=0;wt<ct-1&&A[wt].equals(A[wt+1]);)wt++;if(!(ct<(tt?3:2))){W==="bevel"&&(Se=1.05);var At,Nt=this.overscaling<=16?15*pi/(512*this.overscaling):0,Yt=this.segments.prepareSegment(10*ct,this.layoutVertexArray,this.indexArray),Ut=void 0,sn=void 0,un=void 0,En=void 0;this.e1=this.e2=-1,tt&&(At=A[ct-2],En=A[wt].sub(At)._unit()._perp());for(var Mn=wt;Mn<ct;Mn++)if(!(sn=Mn===ct-1?tt?A[wt+1]:void 0:A[Mn+1])||!A[Mn].equals(sn)){En&&(un=En),At&&(Ut=At),At=A[Mn],En=sn?sn.sub(At)._unit()._perp():un;var Nn=(un=un||En).add(En);Nn.x===0&&Nn.y===0||Nn._unit();var jn=un.x*En.x+un.y*En.y,Gn=Nn.x*En.x+Nn.y*En.y,Kn=Gn!==0?1/Gn:1/0,rr=2*Math.sqrt(2-2*Gn),_r=Gn<Jv&&Ut&&sn,vr=un.x*En.y-un.y*En.x>0;if(_r&&Mn>wt){var Ar=At.dist(Ut);if(Ar>2*Nt){var Cr=At.sub(At.sub(Ut)._mult(Nt/Ar)._round());this.updateDistance(Ut,Cr),this.addCurrentVertex(Cr,un,0,0,Yt),Ut=Cr}}var Zr=Ut&&sn,Nr=Zr?W:tt?"butt":ce;if(Zr&&Nr==="round"&&(Kn<Ie?Nr="miter":Kn<=2&&(Nr="fakeround")),Nr==="miter"&&Kn>Se&&(Nr="bevel"),Nr==="bevel"&&(Kn>2&&(Nr="flipbevel"),Kn<Se&&(Nr="miter")),Ut&&this.updateDistance(Ut,At),Nr==="miter")Nn._mult(Kn),this.addCurrentVertex(At,Nn,0,0,Yt);else if(Nr==="flipbevel"){if(Kn>100)Nn=En.mult(-1);else{var Gr=Kn*un.add(En).mag()/un.sub(En).mag();Nn._perp()._mult(Gr*(vr?-1:1))}this.addCurrentVertex(At,Nn,0,0,Yt),this.addCurrentVertex(At,Nn.mult(-1),0,0,Yt)}else if(Nr==="bevel"||Nr==="fakeround"){var Ur=-Math.sqrt(Kn*Kn-1),zr=vr?Ur:0,ci=vr?0:Ur;if(Ut&&this.addCurrentVertex(At,un,zr,ci,Yt),Nr==="fakeround")for(var $r=Math.round(180*rr/Math.PI/20),Bi=1;Bi<$r;Bi++){var Yr=Bi/$r;if(Yr!==.5){var Oi=Yr-.5;Yr+=Yr*Oi*(Yr-1)*((1.0904+jn*(jn*(3.55645-1.43519*jn)-3.2452))*Oi*Oi+(.848013+jn*(.215638*jn-1.06021)))}var Wi=En.sub(un)._mult(Yr)._add(un)._unit()._mult(vr?-1:1);this.addHalfVertex(At,Wi.x,Wi.y,!1,vr,0,Yt)}sn&&this.addCurrentVertex(At,En,-zr,-ci,Yt)}else if(Nr==="butt")this.addCurrentVertex(At,Nn,0,0,Yt);else if(Nr==="square"){var $i=Ut?1:-1;this.addCurrentVertex(At,Nn,$i,$i,Yt)}else Nr==="round"&&(Ut&&(this.addCurrentVertex(At,un,0,0,Yt),this.addCurrentVertex(At,un,1,1,Yt,!0)),sn&&(this.addCurrentVertex(At,En,-1,-1,Yt,!0),this.addCurrentVertex(At,En,0,0,Yt)));if(_r&&Mn<ct-1){var ea=At.dist(sn);if(ea>2*Nt){var Ni=At.add(sn.sub(At)._mult(Nt/ea)._round());this.updateDistance(At,Ni),this.addCurrentVertex(Ni,En,0,0,Yt),At=Ni}}}}},Co.prototype.addCurrentVertex=function(A,D,W,ce,Se,Ie){Ie===void 0&&(Ie=!1);var Ve=D.x+D.y*W,tt=D.y-D.x*W,ct=-D.x+D.y*ce,wt=-D.y-D.x*ce;this.addHalfVertex(A,Ve,tt,Ie,!1,W,Se),this.addHalfVertex(A,ct,wt,Ie,!0,-ce,Se),this.distance>Ud/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(A,D,W,ce,Se,Ie))},Co.prototype.addHalfVertex=function(A,D,W,ce,Se,Ie,Ve){var tt=A.x,ct=A.y,wt=.5*(this.lineClips?this.scaledDistance*(Ud-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack((tt<<1)+(ce?1:0),(ct<<1)+(Se?1:0),Math.round(63*D)+128,Math.round(63*W)+128,1+(Ie===0?0:Ie<0?-1:1)|(63&wt)<<2,wt>>6),this.lineClips){var At=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(At,this.lineClipsArray.length)}var Nt=Ve.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Nt),Ve.primitiveLength++),Se?this.e2=Nt:this.e1=Nt},Co.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Co.prototype.updateDistance=function(A,D){this.distance+=A.dist(D),this.updateScaledDistance()},Or("LineBucket",Co,{omit:["layers","patternFeatures"]});var Kv=new na({"line-cap":new Dr($e.layout_line["line-cap"]),"line-join":new Hr($e.layout_line["line-join"]),"line-miter-limit":new Dr($e.layout_line["line-miter-limit"]),"line-round-limit":new Dr($e.layout_line["line-round-limit"]),"line-sort-key":new Hr($e.layout_line["line-sort-key"])}),Vd={paint:new na({"line-opacity":new Hr($e.paint_line["line-opacity"]),"line-color":new Hr($e.paint_line["line-color"]),"line-translate":new Dr($e.paint_line["line-translate"]),"line-translate-anchor":new Dr($e.paint_line["line-translate-anchor"]),"line-width":new Hr($e.paint_line["line-width"]),"line-gap-width":new Hr($e.paint_line["line-gap-width"]),"line-offset":new Hr($e.paint_line["line-offset"]),"line-blur":new Hr($e.paint_line["line-blur"]),"line-dasharray":new Uo($e.paint_line["line-dasharray"]),"line-pattern":new ao($e.paint_line["line-pattern"]),"line-gradient":new es($e.paint_line["line-gradient"])}),layout:Kv},Qv=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(W,ce){return ce=new ii(Math.floor(ce.zoom),{now:ce.now,fadeDuration:ce.fadeDuration,zoomHistory:ce.zoomHistory,transition:ce.transition}),A.prototype.possiblyEvaluate.call(this,W,ce)},D.prototype.evaluate=function(W,ce,Se,Ie){return ce=c({},ce,{zoom:Math.floor(ce.zoom)}),A.prototype.evaluate.call(this,W,ce,Se,Ie)},D}(Hr),Hd=new Qv(Vd.paint.properties["line-width"].specification);Hd.useIntegerZoom=!0;var $v=function(A){function D(W){A.call(this,W,Vd),this.gradientVersion=0}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._handleSpecialPaintPropertyUpdate=function(W){if(W==="line-gradient"){var ce=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=ce._styleExpression.expression instanceof Fr,this.gradientVersion=(this.gradientVersion+1)%r}},D.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},D.prototype.recalculate=function(W,ce){A.prototype.recalculate.call(this,W,ce),this.paint._values["line-floorwidth"]=Hd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,W)},D.prototype.createBucket=function(W){return new Co(W)},D.prototype.queryRadius=function(W){var ce=W,Se=qd(Xc("line-width",this,ce),Xc("line-gap-width",this,ce)),Ie=Xc("line-offset",this,ce);return Se/2+Math.abs(Ie)+jf(this.paint.get("line-translate"))},D.prototype.queryIntersectsFeature=function(W,ce,Se,Ie,Ve,tt,ct){var wt=Uf(W,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),tt.angle,ct),At=ct/2*qd(this.paint.get("line-width").evaluate(ce,Se),this.paint.get("line-gap-width").evaluate(ce,Se)),Nt=this.paint.get("line-offset").evaluate(ce,Se);return Nt&&(Ie=function(Yt,Ut){for(var sn=[],un=new t(0,0),En=0;En<Yt.length;En++){for(var Mn=Yt[En],Nn=[],jn=0;jn<Mn.length;jn++){var Gn=Mn[jn-1],Kn=Mn[jn],rr=Mn[jn+1],_r=jn===0?un:Kn.sub(Gn)._unit()._perp(),vr=jn===Mn.length-1?un:rr.sub(Kn)._unit()._perp(),Ar=_r._add(vr)._unit(),Cr=Ar.x*vr.x+Ar.y*vr.y;Ar._mult(1/Cr),Nn.push(Ar._mult(Ut)._add(Kn))}sn.push(Nn)}return sn}(Ie,Nt*ct)),function(Yt,Ut,sn){for(var un=0;un<Ut.length;un++){var En=Ut[un];if(Yt.length>=3){for(var Mn=0;Mn<En.length;Mn++)if(Kl(Yt,En[Mn]))return!0}if($h(Yt,En,sn))return!0}return!1}(wt,Ie,At)},D.prototype.isTileClipped=function(){return!0},D}(mi);function qd(A,D){return D>0?D+2*A:A}var em=Ri([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),tm=Ri([{name:"a_projected_pos",components:3,type:"Float32"}],4),nm=(Ri([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ri([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Yd=(Ri([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),rm=Ri([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function im(A,D,W){return A.sections.forEach(function(ce){ce.text=function(Se,Ie,Ve){var tt=Ie.layout.get("text-transform").evaluate(Ve,{});return tt==="uppercase"?Se=Se.toLocaleUpperCase():tt==="lowercase"&&(Se=Se.toLocaleLowerCase()),Ha.applyArabicShaping&&(Se=Ha.applyArabicShaping(Se)),Se}(ce.text,D,W)}),A}Ri([{name:"triangle",components:3,type:"Uint16"}]),Ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ri([{type:"Float32",name:"offsetX"}]),Ri([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var nf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Qa=24,Gd=function(A,D,W,ce,Se){var Ie,Ve,tt=8*Se-ce-1,ct=(1<<tt)-1,wt=ct>>1,At=-7,Nt=W?Se-1:0,Yt=W?-1:1,Ut=A[D+Nt];for(Nt+=Yt,Ie=Ut&(1<<-At)-1,Ut>>=-At,At+=tt;At>0;Ie=256*Ie+A[D+Nt],Nt+=Yt,At-=8);for(Ve=Ie&(1<<-At)-1,Ie>>=-At,At+=ce;At>0;Ve=256*Ve+A[D+Nt],Nt+=Yt,At-=8);if(Ie===0)Ie=1-wt;else{if(Ie===ct)return Ve?NaN:1/0*(Ut?-1:1);Ve+=Math.pow(2,ce),Ie-=wt}return(Ut?-1:1)*Ve*Math.pow(2,Ie-ce)},Wd=function(A,D,W,ce,Se,Ie){var Ve,tt,ct,wt=8*Ie-Se-1,At=(1<<wt)-1,Nt=At>>1,Yt=Se===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ut=ce?0:Ie-1,sn=ce?1:-1,un=D<0||D===0&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(tt=isNaN(D)?1:0,Ve=At):(Ve=Math.floor(Math.log(D)/Math.LN2),D*(ct=Math.pow(2,-Ve))<1&&(Ve--,ct*=2),(D+=Ve+Nt>=1?Yt/ct:Yt*Math.pow(2,1-Nt))*ct>=2&&(Ve++,ct/=2),Ve+Nt>=At?(tt=0,Ve=At):Ve+Nt>=1?(tt=(D*ct-1)*Math.pow(2,Se),Ve+=Nt):(tt=D*Math.pow(2,Nt-1)*Math.pow(2,Se),Ve=0));Se>=8;A[W+Ut]=255&tt,Ut+=sn,tt/=256,Se-=8);for(Ve=Ve<<Se|tt,wt+=Se;wt>0;A[W+Ut]=255&Ve,Ut+=sn,Ve/=256,wt-=8);A[W+Ut-sn]|=128*un},Zf=Gi;function Gi(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}Gi.Varint=0,Gi.Fixed64=1,Gi.Bytes=2,Gi.Fixed32=5;var hp=4294967296,Zd=1/hp,Xd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function fu(A){return A.type===Gi.Bytes?A.readVarint()+A.pos:A.pos+1}function mc(A,D,W){return W?4294967296*D+(A>>>0):4294967296*(D>>>0)+(A>>>0)}function Jd(A,D,W){var ce=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(7*Math.LN2));W.realloc(ce);for(var Se=W.pos-1;Se>=A;Se--)W.buf[Se+ce]=W.buf[Se]}function am(A,D){for(var W=0;W<A.length;W++)D.writeVarint(A[W])}function om(A,D){for(var W=0;W<A.length;W++)D.writeSVarint(A[W])}function sm(A,D){for(var W=0;W<A.length;W++)D.writeFloat(A[W])}function lm(A,D){for(var W=0;W<A.length;W++)D.writeDouble(A[W])}function um(A,D){for(var W=0;W<A.length;W++)D.writeBoolean(A[W])}function cm(A,D){for(var W=0;W<A.length;W++)D.writeFixed32(A[W])}function fm(A,D){for(var W=0;W<A.length;W++)D.writeSFixed32(A[W])}function hm(A,D){for(var W=0;W<A.length;W++)D.writeFixed64(A[W])}function pm(A,D){for(var W=0;W<A.length;W++)D.writeSFixed64(A[W])}function Xf(A,D){return(A[D]|A[D+1]<<8|A[D+2]<<16)+16777216*A[D+3]}function yc(A,D,W){A[W]=D,A[W+1]=D>>>8,A[W+2]=D>>>16,A[W+3]=D>>>24}function Kd(A,D){return(A[D]|A[D+1]<<8|A[D+2]<<16)+(A[D+3]<<24)}Gi.prototype={destroy:function(){this.buf=null},readFields:function(A,D,W){for(W=W||this.length;this.pos<W;){var ce=this.readVarint(),Se=ce>>3,Ie=this.pos;this.type=7&ce,A(Se,D,this),this.pos===Ie&&this.skip(ce)}return D},readMessage:function(A,D){return this.readFields(A,D,this.readVarint()+this.pos)},readFixed32:function(){var A=Xf(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=Kd(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=Xf(this.buf,this.pos)+Xf(this.buf,this.pos+4)*hp;return this.pos+=8,A},readSFixed64:function(){var A=Xf(this.buf,this.pos)+Kd(this.buf,this.pos+4)*hp;return this.pos+=8,A},readFloat:function(){var A=Gd(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Gd(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var D,W,ce=this.buf;return D=127&(W=ce[this.pos++]),W<128?D:(D|=(127&(W=ce[this.pos++]))<<7,W<128?D:(D|=(127&(W=ce[this.pos++]))<<14,W<128?D:(D|=(127&(W=ce[this.pos++]))<<21,W<128?D:function(Se,Ie,Ve){var tt,ct,wt=Ve.buf;if(tt=(112&(ct=wt[Ve.pos++]))>>4,ct<128||(tt|=(127&(ct=wt[Ve.pos++]))<<3,ct<128)||(tt|=(127&(ct=wt[Ve.pos++]))<<10,ct<128)||(tt|=(127&(ct=wt[Ve.pos++]))<<17,ct<128)||(tt|=(127&(ct=wt[Ve.pos++]))<<24,ct<128)||(tt|=(1&(ct=wt[Ve.pos++]))<<31,ct<128))return mc(Se,tt,Ie);throw new Error("Expected varint not more than 10 bytes")}(D|=(15&(W=ce[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,D=this.pos;return this.pos=A,A-D>=12&&Xd?function(W,ce,Se){return Xd.decode(W.subarray(ce,Se))}(this.buf,D,A):function(W,ce,Se){for(var Ie="",Ve=ce;Ve<Se;){var tt,ct,wt,At=W[Ve],Nt=null,Yt=At>239?4:At>223?3:At>191?2:1;if(Ve+Yt>Se)break;Yt===1?At<128&&(Nt=At):Yt===2?(192&(tt=W[Ve+1]))==128&&(Nt=(31&At)<<6|63&tt)<=127&&(Nt=null):Yt===3?(tt=W[Ve+1],ct=W[Ve+2],(192&tt)==128&&(192&ct)==128&&((Nt=(15&At)<<12|(63&tt)<<6|63&ct)<=2047||Nt>=55296&&Nt<=57343)&&(Nt=null)):Yt===4&&(tt=W[Ve+1],ct=W[Ve+2],wt=W[Ve+3],(192&tt)==128&&(192&ct)==128&&(192&wt)==128&&((Nt=(15&At)<<18|(63&tt)<<12|(63&ct)<<6|63&wt)<=65535||Nt>=1114112)&&(Nt=null)),Nt===null?(Nt=65533,Yt=1):Nt>65535&&(Nt-=65536,Ie+=String.fromCharCode(Nt>>>10&1023|55296),Nt=56320|1023&Nt),Ie+=String.fromCharCode(Nt),Ve+=Yt}return Ie}(this.buf,D,A)},readBytes:function(){var A=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,A);return this.pos=A,D},readPackedVarint:function(A,D){if(this.type!==Gi.Bytes)return A.push(this.readVarint(D));var W=fu(this);for(A=A||[];this.pos<W;)A.push(this.readVarint(D));return A},readPackedSVarint:function(A){if(this.type!==Gi.Bytes)return A.push(this.readSVarint());var D=fu(this);for(A=A||[];this.pos<D;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==Gi.Bytes)return A.push(this.readBoolean());var D=fu(this);for(A=A||[];this.pos<D;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==Gi.Bytes)return A.push(this.readFloat());var D=fu(this);for(A=A||[];this.pos<D;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==Gi.Bytes)return A.push(this.readDouble());var D=fu(this);for(A=A||[];this.pos<D;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==Gi.Bytes)return A.push(this.readFixed32());var D=fu(this);for(A=A||[];this.pos<D;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==Gi.Bytes)return A.push(this.readSFixed32());var D=fu(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==Gi.Bytes)return A.push(this.readFixed64());var D=fu(this);for(A=A||[];this.pos<D;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==Gi.Bytes)return A.push(this.readSFixed64());var D=fu(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed64());return A},skip:function(A){var D=7&A;if(D===Gi.Varint)for(;this.buf[this.pos++]>127;);else if(D===Gi.Bytes)this.pos=this.readVarint()+this.pos;else if(D===Gi.Fixed32)this.pos+=4;else{if(D!==Gi.Fixed64)throw new Error("Unimplemented type: "+D);this.pos+=8}},writeTag:function(A,D){this.writeVarint(A<<3|D)},realloc:function(A){for(var D=this.length||16;D<this.pos+A;)D*=2;if(D!==this.length){var W=new Uint8Array(D);W.set(this.buf),this.buf=W,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),yc(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),yc(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),yc(this.buf,-1&A,this.pos),yc(this.buf,Math.floor(A*Zd),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),yc(this.buf,-1&A,this.pos),yc(this.buf,Math.floor(A*Zd),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(D,W){var ce,Se;if(D>=0?(ce=D%4294967296|0,Se=D/4294967296|0):(Se=~(-D/4294967296),4294967295^(ce=~(-D%4294967296))?ce=ce+1|0:(ce=0,Se=Se+1|0)),D>=18446744073709552e3||D<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");W.realloc(10),function(Ie,Ve,tt){tt.buf[tt.pos++]=127&Ie|128,Ie>>>=7,tt.buf[tt.pos++]=127&Ie|128,Ie>>>=7,tt.buf[tt.pos++]=127&Ie|128,Ie>>>=7,tt.buf[tt.pos++]=127&Ie|128,Ie>>>=7,tt.buf[tt.pos]=127&Ie}(ce,0,W),function(Ie,Ve){var tt=(7&Ie)<<4;Ve.buf[Ve.pos++]|=tt|((Ie>>>=3)?128:0),Ie&&(Ve.buf[Ve.pos++]=127&Ie|((Ie>>>=7)?128:0),Ie&&(Ve.buf[Ve.pos++]=127&Ie|((Ie>>>=7)?128:0),Ie&&(Ve.buf[Ve.pos++]=127&Ie|((Ie>>>=7)?128:0),Ie&&(Ve.buf[Ve.pos++]=127&Ie|((Ie>>>=7)?128:0),Ie&&(Ve.buf[Ve.pos++]=127&Ie)))))}(Se,W)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var D=this.pos;this.pos=function(ce,Se,Ie){for(var Ve,tt,ct=0;ct<Se.length;ct++){if((Ve=Se.charCodeAt(ct))>55295&&Ve<57344){if(!tt){Ve>56319||ct+1===Se.length?(ce[Ie++]=239,ce[Ie++]=191,ce[Ie++]=189):tt=Ve;continue}if(Ve<56320){ce[Ie++]=239,ce[Ie++]=191,ce[Ie++]=189,tt=Ve;continue}Ve=tt-55296<<10|Ve-56320|65536,tt=null}else tt&&(ce[Ie++]=239,ce[Ie++]=191,ce[Ie++]=189,tt=null);Ve<128?ce[Ie++]=Ve:(Ve<2048?ce[Ie++]=Ve>>6|192:(Ve<65536?ce[Ie++]=Ve>>12|224:(ce[Ie++]=Ve>>18|240,ce[Ie++]=Ve>>12&63|128),ce[Ie++]=Ve>>6&63|128),ce[Ie++]=63&Ve|128)}return Ie}(this.buf,A,this.pos);var W=this.pos-D;W>=128&&Jd(D,W,this),this.pos=D-1,this.writeVarint(W),this.pos+=W},writeFloat:function(A){this.realloc(4),Wd(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),Wd(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var D=A.length;this.writeVarint(D),this.realloc(D);for(var W=0;W<D;W++)this.buf[this.pos++]=A[W]},writeRawMessage:function(A,D){this.pos++;var W=this.pos;A(D,this);var ce=this.pos-W;ce>=128&&Jd(W,ce,this),this.pos=W-1,this.writeVarint(ce),this.pos+=ce},writeMessage:function(A,D,W){this.writeTag(A,Gi.Bytes),this.writeRawMessage(D,W)},writePackedVarint:function(A,D){D.length&&this.writeMessage(A,am,D)},writePackedSVarint:function(A,D){D.length&&this.writeMessage(A,om,D)},writePackedBoolean:function(A,D){D.length&&this.writeMessage(A,um,D)},writePackedFloat:function(A,D){D.length&&this.writeMessage(A,sm,D)},writePackedDouble:function(A,D){D.length&&this.writeMessage(A,lm,D)},writePackedFixed32:function(A,D){D.length&&this.writeMessage(A,cm,D)},writePackedSFixed32:function(A,D){D.length&&this.writeMessage(A,fm,D)},writePackedFixed64:function(A,D){D.length&&this.writeMessage(A,hm,D)},writePackedSFixed64:function(A,D){D.length&&this.writeMessage(A,pm,D)},writeBytesField:function(A,D){this.writeTag(A,Gi.Bytes),this.writeBytes(D)},writeFixed32Field:function(A,D){this.writeTag(A,Gi.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(A,D){this.writeTag(A,Gi.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(A,D){this.writeTag(A,Gi.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(A,D){this.writeTag(A,Gi.Fixed64),this.writeSFixed64(D)},writeVarintField:function(A,D){this.writeTag(A,Gi.Varint),this.writeVarint(D)},writeSVarintField:function(A,D){this.writeTag(A,Gi.Varint),this.writeSVarint(D)},writeStringField:function(A,D){this.writeTag(A,Gi.Bytes),this.writeString(D)},writeFloatField:function(A,D){this.writeTag(A,Gi.Fixed32),this.writeFloat(D)},writeDoubleField:function(A,D){this.writeTag(A,Gi.Fixed64),this.writeDouble(D)},writeBooleanField:function(A,D){this.writeVarintField(A,!!D)}};var pp=3;function dm(A,D,W){A===1&&W.readMessage(gm,D)}function gm(A,D,W){if(A===3){var ce=W.readMessage(vm,{}),Se=ce.id,Ie=ce.bitmap,Ve=ce.width,tt=ce.height,ct=ce.left,wt=ce.top,At=ce.advance;D.push({id:Se,bitmap:new Ku({width:Ve+2*pp,height:tt+2*pp},Ie),metrics:{width:Ve,height:tt,left:ct,top:wt,advance:At}})}}function vm(A,D,W){A===1?D.id=W.readVarint():A===2?D.bitmap=W.readBytes():A===3?D.width=W.readVarint():A===4?D.height=W.readVarint():A===5?D.left=W.readSVarint():A===6?D.top=W.readSVarint():A===7&&(D.advance=W.readVarint())}var Qd=pp;function $d(A){for(var D=0,W=0,ce=0,Se=A;ce<Se.length;ce+=1){var Ie=Se[ce];D+=Ie.w*Ie.h,W=Math.max(W,Ie.w)}A.sort(function(un,En){return En.h-un.h});for(var Ve=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(D/.95)),W),h:1/0}],tt=0,ct=0,wt=0,At=A;wt<At.length;wt+=1)for(var Nt=At[wt],Yt=Ve.length-1;Yt>=0;Yt--){var Ut=Ve[Yt];if(!(Nt.w>Ut.w||Nt.h>Ut.h)){if(Nt.x=Ut.x,Nt.y=Ut.y,ct=Math.max(ct,Nt.y+Nt.h),tt=Math.max(tt,Nt.x+Nt.w),Nt.w===Ut.w&&Nt.h===Ut.h){var sn=Ve.pop();Yt<Ve.length&&(Ve[Yt]=sn)}else Nt.h===Ut.h?(Ut.x+=Nt.w,Ut.w-=Nt.w):Nt.w===Ut.w?(Ut.y+=Nt.h,Ut.h-=Nt.h):(Ve.push({x:Ut.x+Nt.w,y:Ut.y,w:Ut.w-Nt.w,h:Nt.h}),Ut.y+=Nt.h,Ut.h-=Nt.h);break}}return{w:tt,h:ct,fill:D/(tt*ct)||0}}var ns=1,Jf=function(A,D){var W=D.pixelRatio,ce=D.version,Se=D.stretchX,Ie=D.stretchY,Ve=D.content;this.paddedRect=A,this.pixelRatio=W,this.stretchX=Se,this.stretchY=Ie,this.content=Ve,this.version=ce},rf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};rf.tl.get=function(){return[this.paddedRect.x+ns,this.paddedRect.y+ns]},rf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-ns,this.paddedRect.y+this.paddedRect.h-ns]},rf.tlbr.get=function(){return this.tl.concat(this.br)},rf.displaySize.get=function(){return[(this.paddedRect.w-2*ns)/this.pixelRatio,(this.paddedRect.h-2*ns)/this.pixelRatio]},Object.defineProperties(Jf.prototype,rf);var af=function(A,D){var W={},ce={};this.haveRenderCallbacks=[];var Se=[];this.addImages(A,W,Se),this.addImages(D,ce,Se);var Ie=$d(Se),Ve=Ie.w,tt=Ie.h,ct=new Ho({width:Ve||1,height:tt||1});for(var wt in A){var At=A[wt],Nt=W[wt].paddedRect;Ho.copy(At.data,ct,{x:0,y:0},{x:Nt.x+ns,y:Nt.y+ns},At.data)}for(var Yt in D){var Ut=D[Yt],sn=ce[Yt].paddedRect,un=sn.x+ns,En=sn.y+ns,Mn=Ut.data.width,Nn=Ut.data.height;Ho.copy(Ut.data,ct,{x:0,y:0},{x:un,y:En},Ut.data),Ho.copy(Ut.data,ct,{x:0,y:Nn-1},{x:un,y:En-1},{width:Mn,height:1}),Ho.copy(Ut.data,ct,{x:0,y:0},{x:un,y:En+Nn},{width:Mn,height:1}),Ho.copy(Ut.data,ct,{x:Mn-1,y:0},{x:un-1,y:En},{width:1,height:Nn}),Ho.copy(Ut.data,ct,{x:0,y:0},{x:un+Mn,y:En},{width:1,height:Nn})}this.image=ct,this.iconPositions=W,this.patternPositions=ce};af.prototype.addImages=function(A,D,W){for(var ce in A){var Se=A[ce],Ie={x:0,y:0,w:Se.data.width+2*ns,h:Se.data.height+2*ns};W.push(Ie),D[ce]=new Jf(Ie,Se),Se.hasRenderCallback&&this.haveRenderCallbacks.push(ce)}},af.prototype.patchUpdatedImages=function(A,D){for(var W in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[W],A.getImage(W),D),this.patchUpdatedImage(this.patternPositions[W],A.getImage(W),D)},af.prototype.patchUpdatedImage=function(A,D,W){if(A&&D&&A.version!==D.version){A.version=D.version;var ce=A.tl,Se=ce[0],Ie=ce[1];W.update(D.data,void 0,{x:Se,y:Ie})}},Or("ImagePosition",Jf),Or("ImageAtlas",af);var ws={horizontal:1,vertical:2,horizontalOnly:3},of=-17,xc=function(){this.scale=1,this.fontStack="",this.imageName=null};xc.forText=function(A,D){var W=new xc;return W.scale=A||1,W.fontStack=D,W},xc.forImage=function(A){var D=new xc;return D.imageName=A,D};var mo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Kf(A,D,W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn,un){var En,Mn=mo.fromFeature(A,Se);Nt===ws.vertical&&Mn.verticalizePunctuation();var Nn=Ha.processBidirectionalText,jn=Ha.processStyledBidirectionalText;if(Nn&&Mn.sections.length===1){En=[];for(var Gn=0,Kn=Nn(Mn.toString(),dp(Mn,wt,Ie,D,ce,Ut,sn));Gn<Kn.length;Gn+=1){var rr=Kn[Gn],_r=new mo;_r.text=rr,_r.sections=Mn.sections;for(var vr=0;vr<rr.length;vr++)_r.sectionIndex.push(0);En.push(_r)}}else if(jn){En=[];for(var Ar=0,Cr=jn(Mn.text,Mn.sectionIndex,dp(Mn,wt,Ie,D,ce,Ut,sn));Ar<Cr.length;Ar+=1){var Zr=Cr[Ar],Nr=new mo;Nr.text=Zr[0],Nr.sectionIndex=Zr[1],Nr.sections=Mn.sections,En.push(Nr)}}else En=function(zr,ci){for(var $r=[],Bi=zr.text,Yr=0,Oi=0,Wi=ci;Oi<Wi.length;Oi+=1){var $i=Wi[Oi];$r.push(zr.substring(Yr,$i)),Yr=$i}return Yr<Bi.length&&$r.push(zr.substring(Yr,Bi.length)),$r}(Mn,dp(Mn,wt,Ie,D,ce,Ut,sn));var Gr=[],Ur={positionedLines:Gr,text:Mn.toString(),top:At[1],bottom:At[1],left:At[0],right:At[0],writingMode:Nt,iconsInText:!1,verticalizable:!1};return function(zr,ci,$r,Bi,Yr,Oi,Wi,$i,ea,Ni,La,oa){for(var Ya=0,lo=of,$a=0,Oo=0,eo=$i==="right"?1:$i==="left"?0:.5,Ia=0,to=0,Ga=Yr;to<Ga.length;to+=1){var Da=Ga[to];Da.trim();var ei=Da.getMaxScale(),di=(ei-1)*Qa,da={positionedGlyphs:[],lineOffset:0};zr.positionedLines[Ia]=da;var Fi=da.positionedGlyphs,ua=0;if(Da.length()){for(var ia=0;ia<Da.length();ia++){var yi=Da.getSection(ia),ga=Da.getSectionIndex(ia),Po=Da.getCharCode(ia),is=0,yo=null,Ol=null,du=null,Wa=Qa,Pl=!(ea===ws.horizontal||!La&&!Qo(Po)||La&&(Qf[Po]||ys(Po)));if(yi.imageName){var sl=Bi[yi.imageName];if(!sl)continue;du=yi.imageName,zr.iconsInText=zr.iconsInText||!0,Ol=sl.paddedRect;var ll=sl.displaySize;yi.scale=yi.scale*Qa/oa,yo={width:ll[0],height:ll[1],left:ns,top:-Qd,advance:Pl?ll[1]:ll[0]},is=di+(Qa-ll[1]*yi.scale),Wa=yo.advance;var tc=Pl?ll[0]*yi.scale-Qa*ei:ll[1]*yi.scale-Qa*ei;tc>0&&tc>ua&&(ua=tc)}else{var sh=$r[yi.fontStack],nc=sh&&sh[Po];if(nc&&nc.rect)Ol=nc.rect,yo=nc.metrics;else{var lh=ci[yi.fontStack],cf=lh&&lh[Po];if(!cf)continue;yo=cf.metrics}is=(ei-yi.scale)*Qa}Pl?(zr.verticalizable=!0,Fi.push({glyph:Po,imageName:du,x:Ya,y:lo+is,vertical:Pl,scale:yi.scale,fontStack:yi.fontStack,sectionIndex:ga,metrics:yo,rect:Ol}),Ya+=Wa*yi.scale+Ni):(Fi.push({glyph:Po,imageName:du,x:Ya,y:lo+is,vertical:Pl,scale:yi.scale,fontStack:yi.fontStack,sectionIndex:ga,metrics:yo,rect:Ol}),Ya+=yo.advance*yi.scale+Ni)}if(Fi.length!==0){var kp=Ya-Ni;$a=Math.max(kp,$a),ym(Fi,0,Fi.length-1,eo,ua)}Ya=0;var uh=Oi*ei+ua;da.lineOffset=Math.max(ua,di),lo+=uh,Oo=Math.max(uh,Oo),++Ia}else lo+=Oi,++Ia}var Lc=lo-of,ch=gp(Wi),fh=ch.horizontalAlign,ff=ch.verticalAlign;(function(Mp,hf,rc,Cc,hh,ph,Oc,dh,gh){var pf=(hf-rc)*hh,df=0;df=ph!==Oc?-dh*Cc-of:(-Cc*gh+.5)*Oc;for(var ic=0,gf=Mp;ic<gf.length;ic+=1)for(var ac=0,vf=gf[ic].positionedGlyphs;ac<vf.length;ac+=1){var mf=vf[ac];mf.x+=pf,mf.y+=df}})(zr.positionedLines,eo,fh,ff,$a,Oo,Oi,Lc,Yr.length),zr.top+=-ff*Lc,zr.bottom=zr.top+Lc,zr.left+=-fh*$a,zr.right=zr.left+$a}(Ur,D,W,ce,En,Ve,tt,ct,Nt,wt,Yt,un),!function(zr){for(var ci=0,$r=zr;ci<$r.length;ci+=1)if($r[ci].positionedGlyphs.length!==0)return!1;return!0}(Gr)&&Ur}mo.fromFeature=function(A,D){for(var W=new mo,ce=0;ce<A.sections.length;ce++){var Se=A.sections[ce];Se.image?W.addImageSection(Se):W.addTextSection(Se,D)}return W},mo.prototype.length=function(){return this.text.length},mo.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},mo.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},mo.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},mo.prototype.verticalizePunctuation=function(){this.text=function(A){for(var D="",W=0;W<A.length;W++){var ce=A.charCodeAt(W+1)||null,Se=A.charCodeAt(W-1)||null;ce&&ha(ce)&&!nf[A[W+1]]||Se&&ha(Se)&&!nf[A[W-1]]||!nf[A[W]]?D+=A[W]:D+=nf[A[W]]}return D}(this.text)},mo.prototype.trim=function(){for(var A=0,D=0;D<this.text.length&&Qf[this.text.charCodeAt(D)];D++)A++;for(var W=this.text.length,ce=this.text.length-1;ce>=0&&ce>=A&&Qf[this.text.charCodeAt(ce)];ce--)W--;this.text=this.text.substring(A,W),this.sectionIndex=this.sectionIndex.slice(A,W)},mo.prototype.substring=function(A,D){var W=new mo;return W.text=this.text.substring(A,D),W.sectionIndex=this.sectionIndex.slice(A,D),W.sections=this.sections,W},mo.prototype.toString=function(){return this.text},mo.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(D,W){return Math.max(D,A.sections[W].scale)},0)},mo.prototype.addTextSection=function(A,D){this.text+=A.text,this.sections.push(xc.forText(A.scale,A.fontStack||D));for(var W=this.sections.length-1,ce=0;ce<A.text.length;++ce)this.sectionIndex.push(W)},mo.prototype.addImageSection=function(A){var D=A.image?A.image.name:"";if(D.length!==0){var W=this.getNextImageSectionCharCode();W?(this.text+=String.fromCharCode(W),this.sections.push(xc.forImage(D)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},mo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Qf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rs={};function e0(A,D,W,ce,Se,Ie){if(D.imageName){var Ve=ce[D.imageName];return Ve?Ve.displaySize[0]*D.scale*Qa/Ie+Se:0}var tt=W[D.fontStack],ct=tt&&tt[A];return ct?ct.metrics.advance*D.scale+Se:0}function t0(A,D,W,ce){var Se=Math.pow(A-D,2);return ce?A<D?Se/2:2*Se:Se+Math.abs(W)*W}function mm(A,D,W){var ce=0;return A===10&&(ce-=1e4),W&&(ce+=150),A!==40&&A!==65288||(ce+=50),D!==41&&D!==65289||(ce+=50),ce}function n0(A,D,W,ce,Se,Ie){for(var Ve=null,tt=t0(D,W,Se,Ie),ct=0,wt=ce;ct<wt.length;ct+=1){var At=wt[ct],Nt=t0(D-At.x,W,Se,Ie)+At.badness;Nt<=tt&&(Ve=At,tt=Nt)}return{index:A,x:D,priorBreak:Ve,badness:tt}}function r0(A){return A?r0(A.priorBreak).concat(A.index):[]}function dp(A,D,W,ce,Se,Ie,Ve){if(Ie!=="point")return[];if(!A)return[];for(var tt=[],ct=function(En,Mn,Nn,jn,Gn,Kn){for(var rr=0,_r=0;_r<En.length();_r++){var vr=En.getSection(_r);rr+=e0(En.getCharCode(_r),vr,jn,Gn,Mn,Kn)}return rr/Math.max(1,Math.ceil(rr/Nn))}(A,D,W,ce,Se,Ve),wt=A.text.indexOf("")>=0,At=0,Nt=0;Nt<A.length();Nt++){var Yt=A.getSection(Nt),Ut=A.getCharCode(Nt);if(Qf[Ut]||(At+=e0(Ut,Yt,ce,Se,D,Ve)),Nt<A.length()-1){var sn=!((un=Ut)<11904||!(wr["Bopomofo Extended"](un)||wr.Bopomofo(un)||wr["CJK Compatibility Forms"](un)||wr["CJK Compatibility Ideographs"](un)||wr["CJK Compatibility"](un)||wr["CJK Radicals Supplement"](un)||wr["CJK Strokes"](un)||wr["CJK Symbols and Punctuation"](un)||wr["CJK Unified Ideographs Extension A"](un)||wr["CJK Unified Ideographs"](un)||wr["Enclosed CJK Letters and Months"](un)||wr["Halfwidth and Fullwidth Forms"](un)||wr.Hiragana(un)||wr["Ideographic Description Characters"](un)||wr["Kangxi Radicals"](un)||wr["Katakana Phonetic Extensions"](un)||wr.Katakana(un)||wr["Vertical Forms"](un)||wr["Yi Radicals"](un)||wr["Yi Syllables"](un)));(rs[Ut]||sn||Yt.imageName)&&tt.push(n0(Nt+1,At,ct,tt,mm(Ut,A.getCharCode(Nt+1),sn&&wt),!1))}}var un;return r0(n0(A.length(),At,ct,tt,0,!0))}function gp(A){var D=.5,W=.5;switch(A){case"right":case"top-right":case"bottom-right":D=1;break;case"left":case"top-left":case"bottom-left":D=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":W=1;break;case"top":case"top-right":case"top-left":W=0}return{horizontalAlign:D,verticalAlign:W}}function ym(A,D,W,ce,Se){if(ce||Se)for(var Ie=A[W],Ve=Ie.metrics.advance*Ie.scale,tt=(A[W].x+Ve)*ce,ct=D;ct<=W;ct++)A[ct].x-=tt,A[ct].y+=Se}function i0(A,D,W,ce,Se,Ie){var Ve,tt=A.image;if(tt.content){var ct=tt.content,wt=tt.pixelRatio||1;Ve=[ct[0]/wt,ct[1]/wt,tt.displaySize[0]-ct[2]/wt,tt.displaySize[1]-ct[3]/wt]}var At,Nt,Yt,Ut,sn=D.left*Ie,un=D.right*Ie;W==="width"||W==="both"?(Ut=Se[0]+sn-ce[3],Nt=Se[0]+un+ce[1]):Nt=(Ut=Se[0]+(sn+un-tt.displaySize[0])/2)+tt.displaySize[0];var En=D.top*Ie,Mn=D.bottom*Ie;return W==="height"||W==="both"?(At=Se[1]+En-ce[0],Yt=Se[1]+Mn+ce[2]):Yt=(At=Se[1]+(En+Mn-tt.displaySize[1])/2)+tt.displaySize[1],{image:tt,top:At,right:Nt,bottom:Yt,left:Ut,collisionPadding:Ve}}rs[10]=!0,rs[32]=!0,rs[38]=!0,rs[40]=!0,rs[41]=!0,rs[43]=!0,rs[45]=!0,rs[47]=!0,rs[173]=!0,rs[183]=!0,rs[8203]=!0,rs[8208]=!0,rs[8211]=!0,rs[8231]=!0;var bc=function(A){function D(W,ce,Se,Ie){A.call(this,W,ce),this.angle=Se,Ie!==void 0&&(this.segment=Ie)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.clone=function(){return new D(this.x,this.y,this.angle,this.segment)},D}(t);Or("Anchor",bc);var Cl=128;function vp(A,D){var W=D.expression;if(W.kind==="constant")return{kind:"constant",layoutSize:W.evaluate(new ii(A+1))};if(W.kind==="source")return{kind:"source"};for(var ce=W.zoomStops,Se=W.interpolationType,Ie=0;Ie<ce.length&&ce[Ie]<=A;)Ie++;for(var Ve=Ie=Math.max(0,Ie-1);Ve<ce.length&&ce[Ve]<A+1;)Ve++;Ve=Math.min(ce.length-1,Ve);var tt=ce[Ie],ct=ce[Ve];return W.kind==="composite"?{kind:"composite",minZoom:tt,maxZoom:ct,interpolationType:Se}:{kind:"camera",minZoom:tt,maxZoom:ct,minSize:W.evaluate(new ii(tt)),maxSize:W.evaluate(new ii(ct)),interpolationType:Se}}function a0(A,D,W){var ce=D.uSize,Se=D.uSizeT,Ie=W.lowerSize,Ve=W.upperSize;return A.kind==="source"?Ie/Cl:A.kind==="composite"?Wr(Ie/Cl,Ve/Cl,Se):ce}function o0(A,D){var W=0,ce=0;if(A.kind==="constant")ce=A.layoutSize;else if(A.kind!=="source"){var Se=A.interpolationType,Ie=A.minZoom,Ve=A.maxZoom,tt=Se?u(ca.interpolationFactor(Se,D,Ie,Ve),0,1):0;A.kind==="camera"?ce=Wr(A.minSize,A.maxSize,tt):W=tt}return{uSizeT:W,uSize:ce}}var xm=Object.freeze({__proto__:null,getSizeData:vp,evaluateSizeForFeature:a0,evaluateSizeForZoom:o0,SIZE_PACK_FACTOR:Cl});function s0(A,D,W,ce,Se){if(D.segment===void 0)return!0;for(var Ie=D,Ve=D.segment+1,tt=0;tt>-W/2;){if(--Ve<0)return!1;tt-=A[Ve].dist(Ie),Ie=A[Ve]}tt+=A[Ve].dist(A[Ve+1]),Ve++;for(var ct=[],wt=0;tt<W/2;){var At=A[Ve-1],Nt=A[Ve],Yt=A[Ve+1];if(!Yt)return!1;var Ut=At.angleTo(Nt)-Nt.angleTo(Yt);for(Ut=Math.abs((Ut+3*Math.PI)%(2*Math.PI)-Math.PI),ct.push({distance:tt,angleDelta:Ut}),wt+=Ut;tt-ct[0].distance>ce;)wt-=ct.shift().angleDelta;if(wt>Se)return!1;Ve++,tt+=Nt.dist(Yt)}return!0}function l0(A){for(var D=0,W=0;W<A.length-1;W++)D+=A[W].dist(A[W+1]);return D}function u0(A,D,W){return A?.6*D*W:0}function c0(A,D){return Math.max(A?A.right-A.left:0,D?D.right-D.left:0)}function bm(A,D,W,ce,Se,Ie){for(var Ve=u0(W,Se,Ie),tt=c0(W,ce)*Ie,ct=0,wt=l0(A)/2,At=0;At<A.length-1;At++){var Nt=A[At],Yt=A[At+1],Ut=Nt.dist(Yt);if(ct+Ut>wt){var sn=(wt-ct)/Ut,un=Wr(Nt.x,Yt.x,sn),En=Wr(Nt.y,Yt.y,sn),Mn=new bc(un,En,Yt.angleTo(Nt),At);return Mn._round(),!Ve||s0(A,Mn,tt,Ve,D)?Mn:void 0}ct+=Ut}}function _m(A,D,W,ce,Se,Ie,Ve,tt,ct){var wt=u0(ce,Ie,Ve),At=c0(ce,Se),Nt=At*Ve,Yt=A[0].x===0||A[0].x===ct||A[0].y===0||A[0].y===ct;return D-Nt<D/4&&(D=Nt+D/4),f0(A,Yt?D/2*tt%D:(At/2+2*Ie)*Ve*tt%D,D,wt,W,Nt,Yt,!1,ct)}function f0(A,D,W,ce,Se,Ie,Ve,tt,ct){for(var wt=Ie/2,At=l0(A),Nt=0,Yt=D-W,Ut=[],sn=0;sn<A.length-1;sn++){for(var un=A[sn],En=A[sn+1],Mn=un.dist(En),Nn=En.angleTo(un);Yt+W<Nt+Mn;){var jn=((Yt+=W)-Nt)/Mn,Gn=Wr(un.x,En.x,jn),Kn=Wr(un.y,En.y,jn);if(Gn>=0&&Gn<ct&&Kn>=0&&Kn<ct&&Yt-wt>=0&&Yt+wt<=At){var rr=new bc(Gn,Kn,Nn,sn);rr._round(),ce&&!s0(A,rr,Ie,ce,Se)||Ut.push(rr)}}Nt+=Mn}return tt||Ut.length||Ve||(Ut=f0(A,Nt/2,W,ce,Se,Ie,Ve,!0,ct)),Ut}function h0(A,D,W,ce,Se){for(var Ie=[],Ve=0;Ve<A.length;Ve++)for(var tt=A[Ve],ct=void 0,wt=0;wt<tt.length-1;wt++){var At=tt[wt],Nt=tt[wt+1];At.x<D&&Nt.x<D||(At.x<D?At=new t(D,At.y+(Nt.y-At.y)*((D-At.x)/(Nt.x-At.x)))._round():Nt.x<D&&(Nt=new t(D,At.y+(Nt.y-At.y)*((D-At.x)/(Nt.x-At.x)))._round()),At.y<W&&Nt.y<W||(At.y<W?At=new t(At.x+(Nt.x-At.x)*((W-At.y)/(Nt.y-At.y)),W)._round():Nt.y<W&&(Nt=new t(At.x+(Nt.x-At.x)*((W-At.y)/(Nt.y-At.y)),W)._round()),At.x>=ce&&Nt.x>=ce||(At.x>=ce?At=new t(ce,At.y+(Nt.y-At.y)*((ce-At.x)/(Nt.x-At.x)))._round():Nt.x>=ce&&(Nt=new t(ce,At.y+(Nt.y-At.y)*((ce-At.x)/(Nt.x-At.x)))._round()),At.y>=Se&&Nt.y>=Se||(At.y>=Se?At=new t(At.x+(Nt.x-At.x)*((Se-At.y)/(Nt.y-At.y)),Se)._round():Nt.y>=Se&&(Nt=new t(At.x+(Nt.x-At.x)*((Se-At.y)/(Nt.y-At.y)),Se)._round()),ct&&At.equals(ct[ct.length-1])||(ct=[At],Ie.push(ct)),ct.push(Nt)))))}return Ie}var _c=ns;function p0(A,D,W,ce){var Se=[],Ie=A.image,Ve=Ie.pixelRatio,tt=Ie.paddedRect.w-2*_c,ct=Ie.paddedRect.h-2*_c,wt=A.right-A.left,At=A.bottom-A.top,Nt=Ie.stretchX||[[0,tt]],Yt=Ie.stretchY||[[0,ct]],Ut=function(Oi,Wi){return Oi+Wi[1]-Wi[0]},sn=Nt.reduce(Ut,0),un=Yt.reduce(Ut,0),En=tt-sn,Mn=ct-un,Nn=0,jn=sn,Gn=0,Kn=un,rr=0,_r=En,vr=0,Ar=Mn;if(Ie.content&&ce){var Cr=Ie.content;Nn=$f(Nt,0,Cr[0]),Gn=$f(Yt,0,Cr[1]),jn=$f(Nt,Cr[0],Cr[2]),Kn=$f(Yt,Cr[1],Cr[3]),rr=Cr[0]-Nn,vr=Cr[1]-Gn,_r=Cr[2]-Cr[0]-jn,Ar=Cr[3]-Cr[1]-Kn}var Zr=function(Oi,Wi,$i,ea){var Ni=eh(Oi.stretch-Nn,jn,wt,A.left),La=th(Oi.fixed-rr,_r,Oi.stretch,sn),oa=eh(Wi.stretch-Gn,Kn,At,A.top),Ya=th(Wi.fixed-vr,Ar,Wi.stretch,un),lo=eh($i.stretch-Nn,jn,wt,A.left),$a=th($i.fixed-rr,_r,$i.stretch,sn),Oo=eh(ea.stretch-Gn,Kn,At,A.top),eo=th(ea.fixed-vr,Ar,ea.stretch,un),Ia=new t(Ni,oa),to=new t(lo,oa),Ga=new t(lo,Oo),Da=new t(Ni,Oo),ei=new t(La/Ve,Ya/Ve),di=new t($a/Ve,eo/Ve),da=D*Math.PI/180;if(da){var Fi=Math.sin(da),ua=Math.cos(da),ia=[ua,-Fi,Fi,ua];Ia._matMult(ia),to._matMult(ia),Da._matMult(ia),Ga._matMult(ia)}var yi=Oi.stretch+Oi.fixed,ga=$i.stretch+$i.fixed,Po=Wi.stretch+Wi.fixed,is=ea.stretch+ea.fixed;return{tl:Ia,tr:to,bl:Da,br:Ga,tex:{x:Ie.paddedRect.x+_c+yi,y:Ie.paddedRect.y+_c+Po,w:ga-yi,h:is-Po},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ei,pixelOffsetBR:di,minFontScaleX:_r/Ve/wt,minFontScaleY:Ar/Ve/At,isSDF:W}};if(ce&&(Ie.stretchX||Ie.stretchY))for(var Nr=d0(Nt,En,sn),Gr=d0(Yt,Mn,un),Ur=0;Ur<Nr.length-1;Ur++)for(var zr=Nr[Ur],ci=Nr[Ur+1],$r=0;$r<Gr.length-1;$r++){var Bi=Gr[$r],Yr=Gr[$r+1];Se.push(Zr(zr,Bi,ci,Yr))}else Se.push(Zr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:tt+1},{fixed:0,stretch:ct+1}));return Se}function $f(A,D,W){for(var ce=0,Se=0,Ie=A;Se<Ie.length;Se+=1){var Ve=Ie[Se];ce+=Math.max(D,Math.min(W,Ve[1]))-Math.max(D,Math.min(W,Ve[0]))}return ce}function d0(A,D,W){for(var ce=[{fixed:-_c,stretch:0}],Se=0,Ie=A;Se<Ie.length;Se+=1){var Ve=Ie[Se],tt=Ve[0],ct=Ve[1],wt=ce[ce.length-1];ce.push({fixed:tt-wt.stretch,stretch:wt.stretch}),ce.push({fixed:tt-wt.stretch,stretch:wt.stretch+(ct-tt)})}return ce.push({fixed:D+_c,stretch:W}),ce}function eh(A,D,W,ce){return A/D*W+ce}function th(A,D,W,ce){return A-D*W/ce}var nh=function(A,D,W,ce,Se,Ie,Ve,tt,ct,wt){if(this.boxStartIndex=A.length,ct){var At=Ie.top,Nt=Ie.bottom,Yt=Ie.collisionPadding;Yt&&(At-=Yt[1],Nt+=Yt[3]);var Ut=Nt-At;Ut>0&&(Ut=Math.max(10,Ut),this.circleDiameter=Ut)}else{var sn=Ie.top*Ve-tt,un=Ie.bottom*Ve+tt,En=Ie.left*Ve-tt,Mn=Ie.right*Ve+tt,Nn=Ie.collisionPadding;if(Nn&&(En-=Nn[0]*Ve,sn-=Nn[1]*Ve,Mn+=Nn[2]*Ve,un+=Nn[3]*Ve),wt){var jn=new t(En,sn),Gn=new t(Mn,sn),Kn=new t(En,un),rr=new t(Mn,un),_r=wt*Math.PI/180;jn._rotate(_r),Gn._rotate(_r),Kn._rotate(_r),rr._rotate(_r),En=Math.min(jn.x,Gn.x,Kn.x,rr.x),Mn=Math.max(jn.x,Gn.x,Kn.x,rr.x),sn=Math.min(jn.y,Gn.y,Kn.y,rr.y),un=Math.max(jn.y,Gn.y,Kn.y,rr.y)}A.emplaceBack(D.x,D.y,En,sn,Mn,un,W,ce,Se)}this.boxEndIndex=A.length},wc=function(A,D){if(A===void 0&&(A=[]),D===void 0&&(D=wm),this.data=A,this.length=this.data.length,this.compare=D,this.length>0)for(var W=(this.length>>1)-1;W>=0;W--)this._down(W)};function wm(A,D){return A<D?-1:A>D?1:0}function Tm(A,D,W){D===void 0&&(D=1),W===void 0&&(W=!1);for(var ce=1/0,Se=1/0,Ie=-1/0,Ve=-1/0,tt=A[0],ct=0;ct<tt.length;ct++){var wt=tt[ct];(!ct||wt.x<ce)&&(ce=wt.x),(!ct||wt.y<Se)&&(Se=wt.y),(!ct||wt.x>Ie)&&(Ie=wt.x),(!ct||wt.y>Ve)&&(Ve=wt.y)}var At=Ie-ce,Nt=Ve-Se,Yt=Math.min(At,Nt),Ut=Yt/2,sn=new wc([],km);if(Yt===0)return new t(ce,Se);for(var un=ce;un<Ie;un+=Yt)for(var En=Se;En<Ve;En+=Yt)sn.push(new Tc(un+Ut,En+Ut,Ut,A));for(var Mn=function(Gn){for(var Kn=0,rr=0,_r=0,vr=Gn[0],Ar=0,Cr=vr.length,Zr=Cr-1;Ar<Cr;Zr=Ar++){var Nr=vr[Ar],Gr=vr[Zr],Ur=Nr.x*Gr.y-Gr.x*Nr.y;rr+=(Nr.x+Gr.x)*Ur,_r+=(Nr.y+Gr.y)*Ur,Kn+=3*Ur}return new Tc(rr/Kn,_r/Kn,0,Gn)}(A),Nn=sn.length;sn.length;){var jn=sn.pop();(jn.d>Mn.d||!Mn.d)&&(Mn=jn,W&&console.log("found best %d after %d probes",Math.round(1e4*jn.d)/1e4,Nn)),jn.max-Mn.d<=D||(Ut=jn.h/2,sn.push(new Tc(jn.p.x-Ut,jn.p.y-Ut,Ut,A)),sn.push(new Tc(jn.p.x+Ut,jn.p.y-Ut,Ut,A)),sn.push(new Tc(jn.p.x-Ut,jn.p.y+Ut,Ut,A)),sn.push(new Tc(jn.p.x+Ut,jn.p.y+Ut,Ut,A)),Nn+=4)}return W&&(console.log("num probes: "+Nn),console.log("best distance: "+Mn.d)),Mn.p}function km(A,D){return D.max-A.max}function Tc(A,D,W,ce){this.p=new t(A,D),this.h=W,this.d=function(Se,Ie){for(var Ve=!1,tt=1/0,ct=0;ct<Ie.length;ct++)for(var wt=Ie[ct],At=0,Nt=wt.length,Yt=Nt-1;At<Nt;Yt=At++){var Ut=wt[At],sn=wt[Yt];Ut.y>Se.y!=sn.y>Se.y&&Se.x<(sn.x-Ut.x)*(Se.y-Ut.y)/(sn.y-Ut.y)+Ut.x&&(Ve=!Ve),tt=Math.min(tt,Bf(Se,Ut,sn))}return(Ve?1:-1)*Math.sqrt(tt)}(this.p,ce),this.max=this.d+this.h*Math.SQRT2}wc.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},wc.prototype.pop=function(){if(this.length!==0){var A=this.data[0],D=this.data.pop();return this.length--,this.length>0&&(this.data[0]=D,this._down(0)),A}},wc.prototype.peek=function(){return this.data[0]},wc.prototype._up=function(A){for(var D=this.data,W=this.compare,ce=D[A];A>0;){var Se=A-1>>1,Ie=D[Se];if(W(ce,Ie)>=0)break;D[A]=Ie,A=Se}D[A]=ce},wc.prototype._down=function(A){for(var D=this.data,W=this.compare,ce=this.length>>1,Se=D[A];A<ce;){var Ie=1+(A<<1),Ve=D[Ie],tt=Ie+1;if(tt<this.length&&W(D[tt],Ve)<0&&(Ie=tt,Ve=D[tt]),W(Ve,Se)>=0)break;D[A]=Ve,A=Ie}D[A]=Se};var kc=7,mp=Number.POSITIVE_INFINITY;function g0(A,D){return D[1]!==mp?function(W,ce,Se){var Ie=0,Ve=0;switch(ce=Math.abs(ce),Se=Math.abs(Se),W){case"top-right":case"top-left":case"top":Ve=Se-kc;break;case"bottom-right":case"bottom-left":case"bottom":Ve=-Se+kc}switch(W){case"top-right":case"bottom-right":case"right":Ie=-ce;break;case"top-left":case"bottom-left":case"left":Ie=ce}return[Ie,Ve]}(A,D[0],D[1]):function(W,ce){var Se=0,Ie=0;ce<0&&(ce=0);var Ve=ce/Math.sqrt(2);switch(W){case"top-right":case"top-left":Ie=Ve-kc;break;case"bottom-right":case"bottom-left":Ie=-Ve+kc;break;case"bottom":Ie=-ce+kc;break;case"top":Ie=ce-kc}switch(W){case"top-right":case"bottom-right":Se=-Ve;break;case"top-left":case"bottom-left":Se=Ve;break;case"left":Se=ce;break;case"right":Se=-ce}return[Se,Ie]}(A,D[0])}function yp(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var sf=255,Bu=sf*Cl;function v0(A,D,W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn){var un=function(Gn,Kn,rr,_r,vr,Ar,Cr,Zr){for(var Nr=_r.layout.get("text-rotate").evaluate(Ar,{})*Math.PI/180,Gr=[],Ur=0,zr=Kn.positionedLines;Ur<zr.length;Ur+=1)for(var ci=zr[Ur],$r=0,Bi=ci.positionedGlyphs;$r<Bi.length;$r+=1){var Yr=Bi[$r];if(Yr.rect){var Oi=Yr.rect||{},Wi=Qd+1,$i=!0,ea=1,Ni=0,La=(vr||Zr)&&Yr.vertical,oa=Yr.metrics.advance*Yr.scale/2;if(Zr&&Kn.verticalizable){var Ya=(Yr.scale-1)*Qa,lo=(Qa-Yr.metrics.width*Yr.scale)/2;Ni=ci.lineOffset/2-(Yr.imageName?-lo:Ya)}if(Yr.imageName){var $a=Cr[Yr.imageName];$i=$a.sdf,ea=$a.pixelRatio,Wi=ns/ea}var Oo=vr?[Yr.x+oa,Yr.y]:[0,0],eo=vr?[0,0]:[Yr.x+oa+rr[0],Yr.y+rr[1]-Ni],Ia=[0,0];La&&(Ia=eo,eo=[0,0]);var to=(Yr.metrics.left-Wi)*Yr.scale-oa+eo[0],Ga=(-Yr.metrics.top-Wi)*Yr.scale+eo[1],Da=to+Oi.w*Yr.scale/ea,ei=Ga+Oi.h*Yr.scale/ea,di=new t(to,Ga),da=new t(Da,Ga),Fi=new t(to,ei),ua=new t(Da,ei);if(La){var ia=new t(-oa,oa-of),yi=-Math.PI/2,ga=Qa/2-oa,Po=Yr.imageName?ga:0,is=new t(5-of-ga,-Po),yo=new(Function.prototype.bind.apply(t,[null].concat(Ia)));di._rotateAround(yi,ia)._add(is)._add(yo),da._rotateAround(yi,ia)._add(is)._add(yo),Fi._rotateAround(yi,ia)._add(is)._add(yo),ua._rotateAround(yi,ia)._add(is)._add(yo)}if(Nr){var Ol=Math.sin(Nr),du=Math.cos(Nr),Wa=[du,-Ol,Ol,du];di._matMult(Wa),da._matMult(Wa),Fi._matMult(Wa),ua._matMult(Wa)}var Pl=new t(0,0),sl=new t(0,0);Gr.push({tl:di,tr:da,bl:Fi,br:ua,tex:Oi,writingMode:Kn.writingMode,glyphOffset:Oo,sectionIndex:Yr.sectionIndex,isSDF:$i,pixelOffsetTL:Pl,pixelOffsetBR:sl,minFontScaleX:0,minFontScaleY:0})}}return Gr}(0,W,tt,Se,Ie,Ve,ce,A.allowVerticalPlacement),En=A.textSizeData,Mn=null;En.kind==="source"?(Mn=[Cl*Se.layout.get("text-size").evaluate(Ve,{})])[0]>Bu&&E(A.layerIds[0]+': Value for "text-size" is >= '+sf+'. Reduce your "text-size".'):En.kind==="composite"&&((Mn=[Cl*Ut.compositeTextSizes[0].evaluate(Ve,{},sn),Cl*Ut.compositeTextSizes[1].evaluate(Ve,{},sn)])[0]>Bu||Mn[1]>Bu)&&E(A.layerIds[0]+': Value for "text-size" is >= '+sf+'. Reduce your "text-size".'),A.addSymbols(A.text,un,Mn,tt,Ie,Ve,wt,D,ct.lineStartIndex,ct.lineLength,Yt,sn);for(var Nn=0,jn=At;Nn<jn.length;Nn+=1)Nt[jn[Nn]]=A.text.placedSymbolArray.length-1;return 4*un.length}function m0(A){for(var D in A)return A[D];return null}function Mm(A,D,W,ce){var Se=A.compareText;if(D in Se){for(var Ie=Se[D],Ve=Ie.length-1;Ve>=0;Ve--)if(ce.dist(Ie[Ve])<W)return!0}else Se[D]=[];return Se[D].push(ce),!1}var Am=vc.VectorTileFeature.types,Sm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rh(A,D,W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt){var Ut=tt?Math.min(Bu,Math.round(tt[0])):0,sn=tt?Math.min(Bu,Math.round(tt[1])):0;A.emplaceBack(D,W,Math.round(32*ce),Math.round(32*Se),Ie,Ve,(Ut<<1)+(ct?1:0),sn,16*wt,16*At,256*Nt,256*Yt)}function xp(A,D,W){A.emplaceBack(D.x,D.y,W),A.emplaceBack(D.x,D.y,W),A.emplaceBack(D.x,D.y,W),A.emplaceBack(D.x,D.y,W)}function Em(A){for(var D=0,W=A.sections;D<W.length;D+=1)if(Oa(W[D].text))return!0;return!1}var Mc=function(A){this.layoutVertexArray=new G,this.indexArray=new me,this.programConfigurations=A,this.segments=new Yn,this.dynamicLayoutVertexArray=new Y,this.opacityVertexArray=new C,this.placedSymbolArray=new It};Mc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Mc.prototype.upload=function(A,D,W,ce){this.isEmpty()||(W&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,em.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,D),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,tm.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,Sm,!0),this.opacityVertexBuffer.itemSize=1),(W||ce)&&this.programConfigurations.upload(A))},Mc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Or("SymbolBuffers",Mc);var lf=function(A,D,W){this.layoutVertexArray=new A,this.layoutAttributes=D,this.indexArray=new W,this.segments=new Yn,this.collisionVertexArray=new he};lf.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,nm.members,!0)},lf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Or("CollisionBuffers",lf);var Ci=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Ve){return Ve.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=tp([]),this.placementViewportMatrix=tp([]);var D=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vp(this.zoom,D["text-size"]),this.iconSizeData=vp(this.zoom,D["icon-size"]);var W=this.layers[0].layout,ce=W.get("symbol-sort-key"),Se=W.get("symbol-z-order");this.canOverlap=W.get("text-allow-overlap")||W.get("icon-allow-overlap")||W.get("text-ignore-placement")||W.get("icon-ignore-placement"),this.sortFeaturesByKey=Se!=="viewport-y"&&ce.constantOr(1)!==void 0;var Ie=Se==="viewport-y"||Se==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ie&&this.canOverlap,W.get("symbol-placement")==="point"&&(this.writingModes=W.get("text-writing-mode").map(function(Ve){return ws[Ve]})),this.stateDependentLayerIds=this.layers.filter(function(Ve){return Ve.isStateDependent()}).map(function(Ve){return Ve.id}),this.sourceID=A.sourceID};Ci.prototype.createArrays=function(){this.text=new Mc(new la(this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Mc(new la(this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new Ht,this.lineVertexArray=new mn,this.symbolInstances=new Gt},Ci.prototype.calculateGlyphDependencies=function(A,D,W,ce,Se){for(var Ie=0;Ie<A.length;Ie++)if(D[A.charCodeAt(Ie)]=!0,(W||ce)&&Se){var Ve=nf[A.charAt(Ie)];Ve&&(D[Ve.charCodeAt(0)]=!0)}},Ci.prototype.populate=function(A,D,W){var ce=this.layers[0],Se=ce.layout,Ie=Se.get("text-font"),Ve=Se.get("text-field"),tt=Se.get("icon-image"),ct=(Ve.value.kind!=="constant"||Ve.value.value instanceof qn&&!Ve.value.value.isEmpty()||Ve.value.value.toString().length>0)&&(Ie.value.kind!=="constant"||Ie.value.value.length>0),wt=tt.value.kind!=="constant"||!!tt.value.value||Object.keys(tt.parameters).length>0,At=Se.get("symbol-sort-key");if(this.features=[],ct||wt){for(var Nt=D.iconDependencies,Yt=D.glyphDependencies,Ut=D.availableImages,sn=new ii(this.zoom),un=0,En=A;un<En.length;un+=1){var Mn=En[un],Nn=Mn.feature,jn=Mn.id,Gn=Mn.index,Kn=Mn.sourceLayerIndex,rr=ce._featureFilter.needGeometry,_r=Yi(Nn,rr);if(ce._featureFilter.filter(sn,_r,W)){rr||(_r.geometry=ts(Nn));var vr=void 0;if(ct){var Ar=ce.getValueAndResolveTokens("text-field",_r,W,Ut),Cr=qn.factory(Ar);Em(Cr)&&(this.hasRTLText=!0),(!this.hasRTLText||tl()==="unavailable"||this.hasRTLText&&Ha.isParsed())&&(vr=im(Cr,ce,_r))}var Zr=void 0;if(wt){var Nr=ce.getValueAndResolveTokens("icon-image",_r,W,Ut);Zr=Nr instanceof sr?Nr:sr.fromString(Nr)}if(vr||Zr){var Gr=this.sortFeaturesByKey?At.evaluate(_r,{},W):void 0,Ur={id:jn,text:vr,icon:Zr,index:Gn,sourceLayerIndex:Kn,geometry:_r.geometry,properties:Nn.properties,type:Am[Nn.type],sortKey:Gr};if(this.features.push(Ur),Zr&&(Nt[Zr.name]=!0),vr){var zr=Ie.evaluate(_r,{},W).join(","),ci=Se.get("text-rotation-alignment")==="map"&&Se.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ws.vertical)>=0;for(var $r=0,Bi=vr.sections;$r<Bi.length;$r+=1){var Yr=Bi[$r];if(Yr.image)Nt[Yr.image.name]=!0;else{var Oi=Ml(vr.toString()),Wi=Yr.fontStack||zr,$i=Yt[Wi]=Yt[Wi]||{};this.calculateGlyphDependencies(Yr.text,$i,ci,this.allowVerticalPlacement,Oi)}}}}}}Se.get("symbol-placement")==="line"&&(this.features=function(ea){var Ni={},La={},oa=[],Ya=0;function lo(ua){oa.push(ea[ua]),Ya++}function $a(ua,ia,yi){var ga=La[ua];return delete La[ua],La[ia]=ga,oa[ga].geometry[0].pop(),oa[ga].geometry[0]=oa[ga].geometry[0].concat(yi[0]),ga}function Oo(ua,ia,yi){var ga=Ni[ia];return delete Ni[ia],Ni[ua]=ga,oa[ga].geometry[0].shift(),oa[ga].geometry[0]=yi[0].concat(oa[ga].geometry[0]),ga}function eo(ua,ia,yi){var ga=yi?ia[0][ia[0].length-1]:ia[0][0];return ua+":"+ga.x+":"+ga.y}for(var Ia=0;Ia<ea.length;Ia++){var to=ea[Ia],Ga=to.geometry,Da=to.text?to.text.toString():null;if(Da){var ei=eo(Da,Ga),di=eo(Da,Ga,!0);if(ei in La&&di in Ni&&La[ei]!==Ni[di]){var da=Oo(ei,di,Ga),Fi=$a(ei,di,oa[da].geometry);delete Ni[ei],delete La[di],La[eo(Da,oa[Fi].geometry,!0)]=Fi,oa[da].geometry=null}else ei in La?$a(ei,di,Ga):di in Ni?Oo(ei,di,Ga):(lo(Ia),Ni[ei]=Ya-1,La[di]=Ya-1)}else lo(Ia)}return oa.filter(function(ua){return ua.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ea,Ni){return ea.sortKey-Ni.sortKey})}},Ci.prototype.update=function(A,D,W){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,D,this.layers,W),this.icon.programConfigurations.updatePaintArrays(A,D,this.layers,W))},Ci.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ci.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ci.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ci.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ci.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ci.prototype.addToLineVertexArray=function(A,D){var W=this.lineVertexArray.length;if(A.segment!==void 0){for(var ce=A.dist(D[A.segment+1]),Se=A.dist(D[A.segment]),Ie={},Ve=A.segment+1;Ve<D.length;Ve++)Ie[Ve]={x:D[Ve].x,y:D[Ve].y,tileUnitDistanceFromAnchor:ce},Ve<D.length-1&&(ce+=D[Ve+1].dist(D[Ve]));for(var tt=A.segment||0;tt>=0;tt--)Ie[tt]={x:D[tt].x,y:D[tt].y,tileUnitDistanceFromAnchor:Se},tt>0&&(Se+=D[tt-1].dist(D[tt]));for(var ct=0;ct<D.length;ct++){var wt=Ie[ct];this.lineVertexArray.emplaceBack(wt.x,wt.y,wt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:W,lineLength:this.lineVertexArray.length-W}},Ci.prototype.addSymbols=function(A,D,W,ce,Se,Ie,Ve,tt,ct,wt,At,Nt){for(var Yt=A.indexArray,Ut=A.layoutVertexArray,sn=A.segments.prepareSegment(4*D.length,Ut,Yt,this.canOverlap?Ie.sortKey:void 0),un=this.glyphOffsetArray.length,En=sn.vertexLength,Mn=this.allowVerticalPlacement&&Ve===ws.vertical?Math.PI/2:0,Nn=Ie.text&&Ie.text.sections,jn=0;jn<D.length;jn++){var Gn=D[jn],Kn=Gn.tl,rr=Gn.tr,_r=Gn.bl,vr=Gn.br,Ar=Gn.tex,Cr=Gn.pixelOffsetTL,Zr=Gn.pixelOffsetBR,Nr=Gn.minFontScaleX,Gr=Gn.minFontScaleY,Ur=Gn.glyphOffset,zr=Gn.isSDF,ci=Gn.sectionIndex,$r=sn.vertexLength,Bi=Ur[1];rh(Ut,tt.x,tt.y,Kn.x,Bi+Kn.y,Ar.x,Ar.y,W,zr,Cr.x,Cr.y,Nr,Gr),rh(Ut,tt.x,tt.y,rr.x,Bi+rr.y,Ar.x+Ar.w,Ar.y,W,zr,Zr.x,Cr.y,Nr,Gr),rh(Ut,tt.x,tt.y,_r.x,Bi+_r.y,Ar.x,Ar.y+Ar.h,W,zr,Cr.x,Zr.y,Nr,Gr),rh(Ut,tt.x,tt.y,vr.x,Bi+vr.y,Ar.x+Ar.w,Ar.y+Ar.h,W,zr,Zr.x,Zr.y,Nr,Gr),xp(A.dynamicLayoutVertexArray,tt,Mn),Yt.emplaceBack($r,$r+1,$r+2),Yt.emplaceBack($r+1,$r+2,$r+3),sn.vertexLength+=4,sn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ur[0]),jn!==D.length-1&&ci===D[jn+1].sectionIndex||A.programConfigurations.populatePaintArrays(Ut.length,Ie,Ie.index,{},Nt,Nn&&Nn[ci])}A.placedSymbolArray.emplaceBack(tt.x,tt.y,un,this.glyphOffsetArray.length-un,En,ct,wt,tt.segment,W?W[0]:0,W?W[1]:0,ce[0],ce[1],Ve,0,!1,0,At)},Ci.prototype._addCollisionDebugVertex=function(A,D,W,ce,Se,Ie){return D.emplaceBack(0,0),A.emplaceBack(W.x,W.y,ce,Se,Math.round(Ie.x),Math.round(Ie.y))},Ci.prototype.addCollisionDebugVertices=function(A,D,W,ce,Se,Ie,Ve){var tt=Se.segments.prepareSegment(4,Se.layoutVertexArray,Se.indexArray),ct=tt.vertexLength,wt=Se.layoutVertexArray,At=Se.collisionVertexArray,Nt=Ve.anchorX,Yt=Ve.anchorY;this._addCollisionDebugVertex(wt,At,Ie,Nt,Yt,new t(A,D)),this._addCollisionDebugVertex(wt,At,Ie,Nt,Yt,new t(W,D)),this._addCollisionDebugVertex(wt,At,Ie,Nt,Yt,new t(W,ce)),this._addCollisionDebugVertex(wt,At,Ie,Nt,Yt,new t(A,ce)),tt.vertexLength+=4;var Ut=Se.indexArray;Ut.emplaceBack(ct,ct+1),Ut.emplaceBack(ct+1,ct+2),Ut.emplaceBack(ct+2,ct+3),Ut.emplaceBack(ct+3,ct),tt.primitiveLength+=4},Ci.prototype.addDebugCollisionBoxes=function(A,D,W,ce){for(var Se=A;Se<D;Se++){var Ie=this.collisionBoxArray.get(Se),Ve=Ie.x1,tt=Ie.y1,ct=Ie.x2,wt=Ie.y2;this.addCollisionDebugVertices(Ve,tt,ct,wt,ce?this.textCollisionBox:this.iconCollisionBox,Ie.anchorPoint,W)}},Ci.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lf(Q,Yd.members,pt),this.iconCollisionBox=new lf(Q,Yd.members,pt);for(var A=0;A<this.symbolInstances.length;A++){var D=this.symbolInstances.get(A);this.addDebugCollisionBoxes(D.textBoxStartIndex,D.textBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.iconBoxStartIndex,D.iconBoxEndIndex,D,!1),this.addDebugCollisionBoxes(D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,!1)}},Ci.prototype._deserializeCollisionBoxesForSymbol=function(A,D,W,ce,Se,Ie,Ve,tt,ct){for(var wt={},At=D;At<W;At++){var Nt=A.get(At);wt.textBox={x1:Nt.x1,y1:Nt.y1,x2:Nt.x2,y2:Nt.y2,anchorPointX:Nt.anchorPointX,anchorPointY:Nt.anchorPointY},wt.textFeatureIndex=Nt.featureIndex;break}for(var Yt=ce;Yt<Se;Yt++){var Ut=A.get(Yt);wt.verticalTextBox={x1:Ut.x1,y1:Ut.y1,x2:Ut.x2,y2:Ut.y2,anchorPointX:Ut.anchorPointX,anchorPointY:Ut.anchorPointY},wt.verticalTextFeatureIndex=Ut.featureIndex;break}for(var sn=Ie;sn<Ve;sn++){var un=A.get(sn);wt.iconBox={x1:un.x1,y1:un.y1,x2:un.x2,y2:un.y2,anchorPointX:un.anchorPointX,anchorPointY:un.anchorPointY},wt.iconFeatureIndex=un.featureIndex;break}for(var En=tt;En<ct;En++){var Mn=A.get(En);wt.verticalIconBox={x1:Mn.x1,y1:Mn.y1,x2:Mn.x2,y2:Mn.y2,anchorPointX:Mn.anchorPointX,anchorPointY:Mn.anchorPointY},wt.verticalIconFeatureIndex=Mn.featureIndex;break}return wt},Ci.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var D=0;D<this.symbolInstances.length;D++){var W=this.symbolInstances.get(D);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,W.textBoxStartIndex,W.textBoxEndIndex,W.verticalTextBoxStartIndex,W.verticalTextBoxEndIndex,W.iconBoxStartIndex,W.iconBoxEndIndex,W.verticalIconBoxStartIndex,W.verticalIconBoxEndIndex))}},Ci.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ci.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ci.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ci.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ci.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ci.prototype.addIndicesForPlacedSymbol=function(A,D){for(var W=A.placedSymbolArray.get(D),ce=W.vertexStartIndex+4*W.numGlyphs,Se=W.vertexStartIndex;Se<ce;Se+=4)A.indexArray.emplaceBack(Se,Se+1,Se+2),A.indexArray.emplaceBack(Se+1,Se+2,Se+3)},Ci.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var D=Math.sin(A),W=Math.cos(A),ce=[],Se=[],Ie=[],Ve=0;Ve<this.symbolInstances.length;++Ve){Ie.push(Ve);var tt=this.symbolInstances.get(Ve);ce.push(0|Math.round(D*tt.anchorX+W*tt.anchorY)),Se.push(tt.featureIndex)}return Ie.sort(function(ct,wt){return ce[ct]-ce[wt]||Se[wt]-Se[ct]}),Ie},Ci.prototype.addToSortKeyRanges=function(A,D){var W=this.sortKeyRanges[this.sortKeyRanges.length-1];W&&W.sortKey===D?W.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:D,symbolInstanceStart:A,symbolInstanceEnd:A+1})},Ci.prototype.sortFeatures=function(A){var D=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var W=0,ce=this.symbolInstanceIndexes;W<ce.length;W+=1){var Se=ce[W],Ie=this.symbolInstances.get(Se);this.featureSortOrder.push(Ie.featureIndex),[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach(function(Ve,tt,ct){Ve>=0&&ct.indexOf(Ve)===tt&&D.addIndicesForPlacedSymbol(D.text,Ve)}),Ie.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ie.verticalPlacedTextSymbolIndex),Ie.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ie.placedIconSymbolIndex),Ie.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ie.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Or("SymbolBucket",Ci,{omit:["layers","collisionBoxArray","features","compareText"]}),Ci.MAX_GLYPHS=65535,Ci.addDynamicAttributes=xp;var Lm=new na({"symbol-placement":new Dr($e.layout_symbol["symbol-placement"]),"symbol-spacing":new Dr($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Dr($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Hr($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Dr($e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Dr($e.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Dr($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new Dr($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Dr($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new Hr($e.layout_symbol["icon-size"]),"icon-text-fit":new Dr($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Dr($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new Hr($e.layout_symbol["icon-image"]),"icon-rotate":new Hr($e.layout_symbol["icon-rotate"]),"icon-padding":new Dr($e.layout_symbol["icon-padding"]),"icon-keep-upright":new Dr($e.layout_symbol["icon-keep-upright"]),"icon-offset":new Hr($e.layout_symbol["icon-offset"]),"icon-anchor":new Hr($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Dr($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Dr($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Dr($e.layout_symbol["text-rotation-alignment"]),"text-field":new Hr($e.layout_symbol["text-field"]),"text-font":new Hr($e.layout_symbol["text-font"]),"text-size":new Hr($e.layout_symbol["text-size"]),"text-max-width":new Hr($e.layout_symbol["text-max-width"]),"text-line-height":new Dr($e.layout_symbol["text-line-height"]),"text-letter-spacing":new Hr($e.layout_symbol["text-letter-spacing"]),"text-justify":new Hr($e.layout_symbol["text-justify"]),"text-radial-offset":new Hr($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Dr($e.layout_symbol["text-variable-anchor"]),"text-anchor":new Hr($e.layout_symbol["text-anchor"]),"text-max-angle":new Dr($e.layout_symbol["text-max-angle"]),"text-writing-mode":new Dr($e.layout_symbol["text-writing-mode"]),"text-rotate":new Hr($e.layout_symbol["text-rotate"]),"text-padding":new Dr($e.layout_symbol["text-padding"]),"text-keep-upright":new Dr($e.layout_symbol["text-keep-upright"]),"text-transform":new Hr($e.layout_symbol["text-transform"]),"text-offset":new Hr($e.layout_symbol["text-offset"]),"text-allow-overlap":new Dr($e.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Dr($e.layout_symbol["text-ignore-placement"]),"text-optional":new Dr($e.layout_symbol["text-optional"])}),bp={paint:new na({"icon-opacity":new Hr($e.paint_symbol["icon-opacity"]),"icon-color":new Hr($e.paint_symbol["icon-color"]),"icon-halo-color":new Hr($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new Hr($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Hr($e.paint_symbol["icon-halo-blur"]),"icon-translate":new Dr($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new Dr($e.paint_symbol["icon-translate-anchor"]),"text-opacity":new Hr($e.paint_symbol["text-opacity"]),"text-color":new Hr($e.paint_symbol["text-color"],{runtimeType:an,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Hr($e.paint_symbol["text-halo-color"]),"text-halo-width":new Hr($e.paint_symbol["text-halo-width"]),"text-halo-blur":new Hr($e.paint_symbol["text-halo-blur"]),"text-translate":new Dr($e.paint_symbol["text-translate"]),"text-translate-anchor":new Dr($e.paint_symbol["text-translate-anchor"])}),layout:Lm},Ac=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:Ct,this.defaultValue=A};Ac.prototype.evaluate=function(A){if(A.formattedSection){var D=this.defaultValue.property.overrides;if(D&&D.hasOverride(A.formattedSection))return D.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Ac.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Ac.prototype.outputDefined=function(){return!1},Ac.prototype.serialize=function(){return null},Or("FormatSectionOverride",Ac,{omit:["defaultValue"]});var Cm=function(A){function D(W){A.call(this,W,bp)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(W,ce){if(A.prototype.recalculate.call(this,W,ce),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Se=this.layout.get("text-writing-mode");if(Se){for(var Ie=[],Ve=0,tt=Se;Ve<tt.length;Ve+=1){var ct=tt[Ve];Ie.indexOf(ct)<0&&Ie.push(ct)}this.layout._values["text-writing-mode"]=Ie}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},D.prototype.getValueAndResolveTokens=function(W,ce,Se,Ie){var Ve=this.layout.get(W).evaluate(ce,{},Se,Ie),tt=this._unevaluatedLayout._values[W];return tt.isDataDriven()||Ds(tt.value)||!Ve?Ve:function(ct,wt){return wt.replace(/{([^{}]+)}/g,function(At,Nt){return Nt in ct?String(ct[Nt]):""})}(ce.properties,Ve)},D.prototype.createBucket=function(W){return new Ci(W)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype._setPaintOverrides=function(){for(var W=0,ce=bp.paint.overridableProperties;W<ce.length;W+=1){var Se=ce[W];if(D.hasPaintOverride(this.layout,Se)){var Ie,Ve=this.paint.get(Se),tt=new Ac(Ve),ct=new fs(tt,Ve.property.specification);Ie=Ve.value.kind==="constant"||Ve.value.kind==="source"?new To("source",ct):new Js("composite",ct,Ve.value.zoomStops,Ve.value._interpolationType),this.paint._values[Se]=new Ei(Ve.property,Ie,Ve.parameters)}}},D.prototype._handleOverridablePaintPropertyUpdate=function(W,ce,Se){return!(!this.layout||ce.isDataDriven()||Se.isDataDriven())&&D.hasPaintOverride(this.layout,W)},D.hasPaintOverride=function(W,ce){var Se=W.get("text-field"),Ie=bp.paint.properties[ce],Ve=!1,tt=function(At){for(var Nt=0,Yt=At;Nt<Yt.length;Nt+=1){var Ut=Yt[Nt];if(Ie.overrides&&Ie.overrides.hasOverride(Ut))return void(Ve=!0)}};if(Se.value.kind==="constant"&&Se.value.value instanceof qn)tt(Se.value.value.sections);else if(Se.value.kind==="source"){var ct=function(At){if(!Ve)if(At instanceof qt&&Jn(At.value)===Sn){var Nt=At.value;tt(Nt.sections)}else At instanceof On?tt(At.sections):At.eachChild(ct)},wt=Se.value;wt._styleExpression&&ct(wt._styleExpression.expression)}return Ve},D}(mi),Om={paint:new na({"background-color":new Dr($e.paint_background["background-color"]),"background-pattern":new Uo($e.paint_background["background-pattern"]),"background-opacity":new Dr($e.paint_background["background-opacity"])})},Pm=function(A){function D(W){A.call(this,W,Om)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(mi),Im={paint:new na({"raster-opacity":new Dr($e.paint_raster["raster-opacity"]),"raster-hue-rotate":new Dr($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Dr($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Dr($e.paint_raster["raster-brightness-max"]),"raster-saturation":new Dr($e.paint_raster["raster-saturation"]),"raster-contrast":new Dr($e.paint_raster["raster-contrast"]),"raster-resampling":new Dr($e.paint_raster["raster-resampling"]),"raster-fade-duration":new Dr($e.paint_raster["raster-fade-duration"])})},Dm=function(A){function D(W){A.call(this,W,Im)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(mi),Rm=function(A){function D(W){A.call(this,W,{}),this.implementation=W}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},D.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},D.prototype.recalculate=function(){},D.prototype.updateTransitions=function(){},D.prototype.hasTransition=function(){},D.prototype.serialize=function(){},D.prototype.onAdd=function(W){this.implementation.onAdd&&this.implementation.onAdd(W,W.painter.context.gl)},D.prototype.onRemove=function(W){this.implementation.onRemove&&this.implementation.onRemove(W,W.painter.context.gl)},D}(mi),zm={circle:vv,heatmap:yv,hillshade:bv,fill:Fv,"fill-extrusion":Gv,line:$v,symbol:Cm,background:Pm,raster:Dm},y0=n.HTMLImageElement,x0=n.HTMLCanvasElement,b0=n.HTMLVideoElement,_0=n.ImageData,ih=n.ImageBitmap,Qu=function(A,D,W,ce){this.context=A,this.format=W,this.texture=A.gl.createTexture(),this.update(D,ce)};Qu.prototype.update=function(A,D,W){var ce=A.width,Se=A.height,Ie=!(this.size&&this.size[0]===ce&&this.size[1]===Se||W),Ve=this.context,tt=Ve.gl;if(this.useMipmap=!!(D&&D.useMipmap),tt.bindTexture(tt.TEXTURE_2D,this.texture),Ve.pixelStoreUnpackFlipY.set(!1),Ve.pixelStoreUnpack.set(1),Ve.pixelStoreUnpackPremultiplyAlpha.set(this.format===tt.RGBA&&(!D||D.premultiply!==!1)),Ie)this.size=[ce,Se],A instanceof y0||A instanceof x0||A instanceof b0||A instanceof _0||ih&&A instanceof ih?tt.texImage2D(tt.TEXTURE_2D,0,this.format,this.format,tt.UNSIGNED_BYTE,A):tt.texImage2D(tt.TEXTURE_2D,0,this.format,ce,Se,0,this.format,tt.UNSIGNED_BYTE,A.data);else{var ct=W||{x:0,y:0},wt=ct.x,At=ct.y;A instanceof y0||A instanceof x0||A instanceof b0||A instanceof _0||ih&&A instanceof ih?tt.texSubImage2D(tt.TEXTURE_2D,0,wt,At,tt.RGBA,tt.UNSIGNED_BYTE,A):tt.texSubImage2D(tt.TEXTURE_2D,0,wt,At,ce,Se,tt.RGBA,tt.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&tt.generateMipmap(tt.TEXTURE_2D)},Qu.prototype.bind=function(A,D,W){var ce=this.context.gl;ce.bindTexture(ce.TEXTURE_2D,this.texture),W!==ce.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(W=ce.LINEAR),A!==this.filter&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,A),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,W||A),this.filter=A),D!==this.wrap&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,D),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,D),this.wrap=D)},Qu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Qu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var _p=function(A){var D=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){D._triggered=!1,D._callback()})};_p.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},_p.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Sc=function(A,D,W){this.target=A,this.parent=D,this.mapId=W,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},x(["receive","process"],this),this.invoker=new _p(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=I()?A:n};function w0(A,D,W){var ce=2*Math.PI*6378137/256/Math.pow(2,W);return[A*ce-2*Math.PI*6378137/2,D*ce-2*Math.PI*6378137/2]}Sc.prototype.send=function(A,D,W,ce,Se){var Ie=this;Se===void 0&&(Se=!1);var Ve=Math.round(1e18*Math.random()).toString(36).substring(0,10);W&&(this.callbacks[Ve]=W);var tt=R(this.globalScope)?void 0:[];return this.target.postMessage({id:Ve,type:A,hasCallback:!!W,targetMapId:ce,mustQueue:Se,sourceMapId:this.mapId,data:ms(D,tt)},tt),{cancel:function(){W&&delete Ie.callbacks[Ve],Ie.target.postMessage({id:Ve,type:"<cancel>",targetMapId:ce,sourceMapId:Ie.mapId})}}},Sc.prototype.receive=function(A){var D=A.data,W=D.id;if(W&&(!D.targetMapId||this.mapId===D.targetMapId))if(D.type==="<cancel>"){delete this.tasks[W];var ce=this.cancelCallbacks[W];delete this.cancelCallbacks[W],ce&&ce()}else I()||D.mustQueue?(this.tasks[W]=D,this.taskQueue.push(W),this.invoker.trigger()):this.processTask(W,D)},Sc.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),D=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),D&&this.processTask(A,D)}},Sc.prototype.processTask=function(A,D){var W=this;if(D.type==="<response>"){var ce=this.callbacks[A];delete this.callbacks[A],ce&&(D.error?ce(js(D.error)):ce(null,js(D.data)))}else{var Se=!1,Ie=R(this.globalScope)?void 0:[],Ve=D.hasCallback?function(At,Nt){Se=!0,delete W.cancelCallbacks[A],W.target.postMessage({id:A,type:"<response>",sourceMapId:W.mapId,error:At?ms(At):null,data:ms(Nt,Ie)},Ie)}:function(At){Se=!0},tt=null,ct=js(D.data);if(this.parent[D.type])tt=this.parent[D.type](D.sourceMapId,ct,Ve);else if(this.parent.getWorkerSource){var wt=D.type.split(".");tt=this.parent.getWorkerSource(D.sourceMapId,wt[0],ct.source)[wt[1]](ct,Ve)}else Ve(new Error("Could not find function "+D.type));!Se&&tt&&tt.cancel&&(this.cancelCallbacks[A]=tt.cancel)}},Sc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Sa=function(A,D){A&&(D?this.setSouthWest(A).setNorthEast(D):A.length===4?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};Sa.prototype.setNorthEast=function(A){return this._ne=A instanceof ra?new ra(A.lng,A.lat):ra.convert(A),this},Sa.prototype.setSouthWest=function(A){return this._sw=A instanceof ra?new ra(A.lng,A.lat):ra.convert(A),this},Sa.prototype.extend=function(A){var D,W,ce=this._sw,Se=this._ne;if(A instanceof ra)D=A,W=A;else{if(!(A instanceof Sa)){if(Array.isArray(A)){if(A.length===4||A.every(Array.isArray)){var Ie=A;return this.extend(Sa.convert(Ie))}var Ve=A;return this.extend(ra.convert(Ve))}return this}if(D=A._sw,W=A._ne,!D||!W)return this}return ce||Se?(ce.lng=Math.min(D.lng,ce.lng),ce.lat=Math.min(D.lat,ce.lat),Se.lng=Math.max(W.lng,Se.lng),Se.lat=Math.max(W.lat,Se.lat)):(this._sw=new ra(D.lng,D.lat),this._ne=new ra(W.lng,W.lat)),this},Sa.prototype.getCenter=function(){return new ra((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Sa.prototype.getSouthWest=function(){return this._sw},Sa.prototype.getNorthEast=function(){return this._ne},Sa.prototype.getNorthWest=function(){return new ra(this.getWest(),this.getNorth())},Sa.prototype.getSouthEast=function(){return new ra(this.getEast(),this.getSouth())},Sa.prototype.getWest=function(){return this._sw.lng},Sa.prototype.getSouth=function(){return this._sw.lat},Sa.prototype.getEast=function(){return this._ne.lng},Sa.prototype.getNorth=function(){return this._ne.lat},Sa.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Sa.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Sa.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Sa.prototype.contains=function(A){var D=ra.convert(A),W=D.lng,ce=D.lat,Se=this._sw.lat<=ce&&ce<=this._ne.lat,Ie=this._sw.lng<=W&&W<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ie=this._sw.lng>=W&&W>=this._ne.lng),Se&&Ie},Sa.convert=function(A){return!A||A instanceof Sa?A:new Sa(A)};var T0=63710088e-1,ra=function(A,D){if(isNaN(A)||isNaN(D))throw new Error("Invalid LngLat object: ("+A+", "+D+")");if(this.lng=+A,this.lat=+D,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ra.prototype.wrap=function(){return new ra(p(this.lng,-180,180),this.lat)},ra.prototype.toArray=function(){return[this.lng,this.lat]},ra.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ra.prototype.distanceTo=function(A){var D=Math.PI/180,W=this.lat*D,ce=A.lat*D,Se=Math.sin(W)*Math.sin(ce)+Math.cos(W)*Math.cos(ce)*Math.cos((A.lng-this.lng)*D);return T0*Math.acos(Math.min(Se,1))},ra.prototype.toBounds=function(A){A===void 0&&(A=0);var D=360*A/40075017,W=D/Math.cos(Math.PI/180*this.lat);return new Sa(new ra(this.lng-W,this.lat-D),new ra(this.lng+W,this.lat+D))},ra.convert=function(A){if(A instanceof ra)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new ra(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new ra(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var k0=2*Math.PI*T0;function M0(A){return k0*Math.cos(A*Math.PI/180)}function A0(A){return(180+A)/360}function S0(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function E0(A,D){return A/M0(D)}function wp(A){var D=180-360*A;return 360/Math.PI*Math.atan(Math.exp(D*Math.PI/180))-90}var $u=function(A,D,W){W===void 0&&(W=0),this.x=+A,this.y=+D,this.z=+W};$u.fromLngLat=function(A,D){D===void 0&&(D=0);var W=ra.convert(A);return new $u(A0(W.lng),S0(W.lat),E0(D,W.lat))},$u.prototype.toLngLat=function(){return new ra(360*this.x-180,wp(this.y))},$u.prototype.toAltitude=function(){return A=this.z,D=this.y,A*M0(wp(D));var A,D},$u.prototype.meterInMercatorCoordinateUnits=function(){return 1/k0*(A=wp(this.y),1/Math.cos(A*Math.PI/180));var A};var ec=function(A,D,W){this.z=A,this.x=D,this.y=W,this.key=uf(0,A,A,D,W)};ec.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},ec.prototype.url=function(A,D){var W,ce,Se,Ie,Ve,tt=(W=this.x,ce=this.y,Se=this.z,Ie=w0(256*W,256*(ce=Math.pow(2,Se)-ce-1),Se),Ve=w0(256*(W+1),256*(ce+1),Se),Ie[0]+","+Ie[1]+","+Ve[0]+","+Ve[1]),ct=function(wt,At,Nt){for(var Yt,Ut="",sn=wt;sn>0;sn--)Ut+=(At&(Yt=1<<sn-1)?1:0)+(Nt&Yt?2:0);return Ut}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(D==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ct).replace("{bbox-epsg-3857}",tt)},ec.prototype.getTilePoint=function(A){var D=Math.pow(2,this.z);return new t((A.x*D-this.x)*pi,(A.y*D-this.y)*pi)},ec.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var L0=function(A,D){this.wrap=A,this.canonical=D,this.key=uf(A,D.z,D.z,D.x,D.y)},Ea=function(A,D,W,ce,Se){this.overscaledZ=A,this.wrap=D,this.canonical=new ec(W,+ce,+Se),this.key=uf(D,A,W,ce,Se)};function uf(A,D,W,ce,Se){(A*=2)<0&&(A=-1*A-1);var Ie=1<<W;return(Ie*Ie*A+Ie*Se+ce).toString(36)+W.toString(36)+D.toString(36)}Ea.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},Ea.prototype.scaledTo=function(A){var D=this.canonical.z-A;return A>this.canonical.z?new Ea(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ea(A,this.wrap,A,this.canonical.x>>D,this.canonical.y>>D)},Ea.prototype.calculateScaledKey=function(A,D){var W=this.canonical.z-A;return A>this.canonical.z?uf(this.wrap*+D,A,this.canonical.z,this.canonical.x,this.canonical.y):uf(this.wrap*+D,A,A,this.canonical.x>>W,this.canonical.y>>W)},Ea.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var D=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>D&&A.canonical.y===this.canonical.y>>D},Ea.prototype.children=function(A){if(this.overscaledZ>=A)return[new Ea(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var D=this.canonical.z+1,W=2*this.canonical.x,ce=2*this.canonical.y;return[new Ea(D,this.wrap,D,W,ce),new Ea(D,this.wrap,D,W+1,ce),new Ea(D,this.wrap,D,W,ce+1),new Ea(D,this.wrap,D,W+1,ce+1)]},Ea.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},Ea.prototype.wrapped=function(){return new Ea(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ea.prototype.unwrapTo=function(A){return new Ea(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},Ea.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ea.prototype.toUnwrapped=function(){return new L0(this.wrap,this.canonical)},Ea.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ea.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new $u(A.x-this.wrap,A.y))},Or("CanonicalTileID",ec),Or("OverscaledTileID",Ea,{omit:["posMatrix"]});var hu=function(A,D,W){if(this.uid=A,D.height!==D.width)throw new RangeError("DEM tiles must be square");if(W&&W!=="mapbox"&&W!=="terrarium")return E('"'+W+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=D.height;var ce=this.dim=D.height-2;this.data=new Uint32Array(D.data.buffer),this.encoding=W||"mapbox";for(var Se=0;Se<ce;Se++)this.data[this._idx(-1,Se)]=this.data[this._idx(0,Se)],this.data[this._idx(ce,Se)]=this.data[this._idx(ce-1,Se)],this.data[this._idx(Se,-1)]=this.data[this._idx(Se,0)],this.data[this._idx(Se,ce)]=this.data[this._idx(Se,ce-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ce,-1)]=this.data[this._idx(ce-1,0)],this.data[this._idx(-1,ce)]=this.data[this._idx(0,ce-1)],this.data[this._idx(ce,ce)]=this.data[this._idx(ce-1,ce-1)]};hu.prototype.get=function(A,D){var W=new Uint8Array(this.data.buffer),ce=4*this._idx(A,D);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(W[ce],W[ce+1],W[ce+2])},hu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},hu.prototype._idx=function(A,D){if(A<-1||A>=this.dim+1||D<-1||D>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(D+1)*this.stride+(A+1)},hu.prototype._unpackMapbox=function(A,D,W){return(256*A*256+256*D+W)/10-1e4},hu.prototype._unpackTerrarium=function(A,D,W){return 256*A+D+W/256-32768},hu.prototype.getPixels=function(){return new Ho({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},hu.prototype.backfillBorder=function(A,D,W){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var ce=D*this.dim,Se=D*this.dim+this.dim,Ie=W*this.dim,Ve=W*this.dim+this.dim;switch(D){case-1:ce=Se-1;break;case 1:Se=ce+1}switch(W){case-1:Ie=Ve-1;break;case 1:Ve=Ie+1}for(var tt=-D*this.dim,ct=-W*this.dim,wt=Ie;wt<Ve;wt++)for(var At=ce;At<Se;At++)this.data[this._idx(At,wt)]=A.data[this._idx(At+tt,wt+ct)]},Or("DEMData",hu);var ah=function(A){this._stringToNumber={},this._numberToString=[];for(var D=0;D<A.length;D++){var W=A[D];this._stringToNumber[W]=D,this._numberToString[D]=W}};ah.prototype.encode=function(A){return this._stringToNumber[A]},ah.prototype.decode=function(A){return this._numberToString[A]};var oh=function(A,D,W,ce,Se){this.type="Feature",this._vectorTileFeature=A,A._z=D,A._x=W,A._y=ce,this.properties=A.properties,this.id=Se},Tp={geometry:{configurable:!0}};Tp.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Tp.geometry.set=function(A){this._geometry=A},oh.prototype.toJSON=function(){var A={geometry:this.geometry};for(var D in this)D!=="_geometry"&&D!=="_vectorTileFeature"&&(A[D]=this[D]);return A},Object.defineProperties(oh.prototype,Tp);var Ec=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ec.prototype.updateState=function(A,D,W){var ce=String(D);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][ce]=this.stateChanges[A][ce]||{},c(this.stateChanges[A][ce],W),this.deletedStates[A]===null)for(var Se in this.deletedStates[A]={},this.state[A])Se!==ce&&(this.deletedStates[A][Se]=null);else if(this.deletedStates[A]&&this.deletedStates[A][ce]===null)for(var Ie in this.deletedStates[A][ce]={},this.state[A][ce])W[Ie]||(this.deletedStates[A][ce][Ie]=null);else for(var Ve in W)this.deletedStates[A]&&this.deletedStates[A][ce]&&this.deletedStates[A][ce][Ve]===null&&delete this.deletedStates[A][ce][Ve]},Ec.prototype.removeFeatureState=function(A,D,W){if(this.deletedStates[A]!==null){var ce=String(D);if(this.deletedStates[A]=this.deletedStates[A]||{},W&&D!==void 0)this.deletedStates[A][ce]!==null&&(this.deletedStates[A][ce]=this.deletedStates[A][ce]||{},this.deletedStates[A][ce][W]=null);else if(D!==void 0)if(this.stateChanges[A]&&this.stateChanges[A][ce])for(W in this.deletedStates[A][ce]={},this.stateChanges[A][ce])this.deletedStates[A][ce][W]=null;else this.deletedStates[A][ce]=null;else this.deletedStates[A]=null}},Ec.prototype.getState=function(A,D){var W=String(D),ce=this.state[A]||{},Se=this.stateChanges[A]||{},Ie=c({},ce[W],Se[W]);if(this.deletedStates[A]===null)return{};if(this.deletedStates[A]){var Ve=this.deletedStates[A][D];if(Ve===null)return{};for(var tt in Ve)delete Ie[tt]}return Ie},Ec.prototype.initializeTileState=function(A,D){A.setFeatureState(this.state,D)},Ec.prototype.coalesceChanges=function(A,D){var W={};for(var ce in this.stateChanges){this.state[ce]=this.state[ce]||{};var Se={};for(var Ie in this.stateChanges[ce])this.state[ce][Ie]||(this.state[ce][Ie]={}),c(this.state[ce][Ie],this.stateChanges[ce][Ie]),Se[Ie]=this.state[ce][Ie];W[ce]=Se}for(var Ve in this.deletedStates){this.state[Ve]=this.state[Ve]||{};var tt={};if(this.deletedStates[Ve]===null)for(var ct in this.state[Ve])tt[ct]={},this.state[Ve][ct]={};else for(var wt in this.deletedStates[Ve]){if(this.deletedStates[Ve][wt]===null)this.state[Ve][wt]={};else for(var At=0,Nt=Object.keys(this.deletedStates[Ve][wt]);At<Nt.length;At+=1){var Yt=Nt[At];delete this.state[Ve][wt][Yt]}tt[wt]=this.state[Ve][wt]}W[Ve]=W[Ve]||{},c(W[Ve],tt)}if(this.stateChanges={},this.deletedStates={},Object.keys(W).length!==0)for(var Ut in A)A[Ut].setFeatureState(W,D)};var pu=function(A,D){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new Ns(pi,16,0),this.grid3D=new Ns(pi,16,0),this.featureIndexArray=new In,this.promoteId=D};function C0(A,D,W,ce,Se){return k(A,function(Ie,Ve){var tt=D instanceof Vs?D.get(Ve):null;return tt&&tt.evaluate?tt.evaluate(W,ce,Se):tt})}function O0(A){for(var D=1/0,W=1/0,ce=-1/0,Se=-1/0,Ie=0,Ve=A;Ie<Ve.length;Ie+=1){var tt=Ve[Ie];D=Math.min(D,tt.x),W=Math.min(W,tt.y),ce=Math.max(ce,tt.x),Se=Math.max(Se,tt.y)}return{minX:D,minY:W,maxX:ce,maxY:Se}}function Fm(A,D){return D-A}pu.prototype.insert=function(A,D,W,ce,Se,Ie){var Ve=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(W,ce,Se);for(var tt=Ie?this.grid3D:this.grid,ct=0;ct<D.length;ct++){for(var wt=D[ct],At=[1/0,1/0,-1/0,-1/0],Nt=0;Nt<wt.length;Nt++){var Yt=wt[Nt];At[0]=Math.min(At[0],Yt.x),At[1]=Math.min(At[1],Yt.y),At[2]=Math.max(At[2],Yt.x),At[3]=Math.max(At[3],Yt.y)}At[0]<pi&&At[1]<pi&&At[2]>=0&&At[3]>=0&&tt.insert(Ve,At[0],At[1],At[2],At[3])}},pu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new vc.VectorTile(new Zf(this.rawTileData)).layers,this.sourceLayerCoder=new ah(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},pu.prototype.query=function(A,D,W,ce){var Se=this;this.loadVTLayers();for(var Ie=A.params||{},Ve=pi/A.tileSize/A.scale,tt=xl(Ie.filter),ct=A.queryGeometry,wt=A.queryPadding*Ve,At=O0(ct),Nt=this.grid.query(At.minX-wt,At.minY-wt,At.maxX+wt,At.maxY+wt),Yt=O0(A.cameraQueryGeometry),Ut=0,sn=this.grid3D.query(Yt.minX-wt,Yt.minY-wt,Yt.maxX+wt,Yt.maxY+wt,function(Gn,Kn,rr,_r){return function(vr,Ar,Cr,Zr,Nr){for(var Gr=0,Ur=vr;Gr<Ur.length;Gr+=1){var zr=Ur[Gr];if(Ar<=zr.x&&Cr<=zr.y&&Zr>=zr.x&&Nr>=zr.y)return!0}var ci=[new t(Ar,Cr),new t(Ar,Nr),new t(Zr,Nr),new t(Zr,Cr)];if(vr.length>2){for(var $r=0,Bi=ci;$r<Bi.length;$r+=1)if(Kl(vr,Bi[$r]))return!0}for(var Yr=0;Yr<vr.length-1;Yr++)if(cv(vr[Yr],vr[Yr+1],ci))return!0;return!1}(A.cameraQueryGeometry,Gn-wt,Kn-wt,rr+wt,_r+wt)});Ut<sn.length;Ut+=1){var un=sn[Ut];Nt.push(un)}Nt.sort(Fm);for(var En,Mn={},Nn=function(Gn){var Kn=Nt[Gn];if(Kn!==En){En=Kn;var rr=Se.featureIndexArray.get(Kn),_r=null;Se.loadMatchingFeature(Mn,rr.bucketIndex,rr.sourceLayerIndex,rr.featureIndex,tt,Ie.layers,Ie.availableImages,D,W,ce,function(vr,Ar,Cr){return _r||(_r=ts(vr)),Ar.queryIntersectsFeature(ct,vr,Cr,_r,Se.z,A.transform,Ve,A.pixelPosMatrix)})}},jn=0;jn<Nt.length;jn++)Nn(jn);return Mn},pu.prototype.loadMatchingFeature=function(A,D,W,ce,Se,Ie,Ve,tt,ct,wt,At){var Nt=this.bucketLayerIDs[D];if(!Ie||function(vr,Ar){for(var Cr=0;Cr<vr.length;Cr++)if(Ar.indexOf(vr[Cr])>=0)return!0;return!1}(Ie,Nt)){var Yt=this.sourceLayerCoder.decode(W),Ut=this.vtLayers[Yt].feature(ce);if(Se.needGeometry){var sn=Yi(Ut,!0);if(!Se.filter(new ii(this.tileID.overscaledZ),sn,this.tileID.canonical))return}else if(!Se.filter(new ii(this.tileID.overscaledZ),Ut))return;for(var un=this.getId(Ut,Yt),En=0;En<Nt.length;En++){var Mn=Nt[En];if(!(Ie&&Ie.indexOf(Mn)<0)){var Nn=tt[Mn];if(Nn){var jn={};un!==void 0&&wt&&(jn=wt.getState(Nn.sourceLayer||"_geojsonTileLayer",un));var Gn=c({},ct[Mn]);Gn.paint=C0(Gn.paint,Nn.paint,Ut,jn,Ve),Gn.layout=C0(Gn.layout,Nn.layout,Ut,jn,Ve);var Kn=!At||At(Ut,Nn,jn);if(Kn){var rr=new oh(Ut,this.z,this.x,this.y,un);rr.layer=Gn;var _r=A[Mn];_r===void 0&&(_r=A[Mn]=[]),_r.push({featureIndex:ce,feature:rr,intersectionZ:Kn})}}}}}},pu.prototype.lookupSymbolFeatures=function(A,D,W,ce,Se,Ie,Ve,tt){var ct={};this.loadVTLayers();for(var wt=xl(Se),At=0,Nt=A;At<Nt.length;At+=1){var Yt=Nt[At];this.loadMatchingFeature(ct,W,ce,Yt,wt,Ie,Ve,tt,D)}return ct},pu.prototype.hasLayer=function(A){for(var D=0,W=this.bucketLayerIDs;D<W.length;D+=1)for(var ce=0,Se=W[D];ce<Se.length;ce+=1)if(A===Se[ce])return!0;return!1},pu.prototype.getId=function(A,D){var W=A.id;if(this.promoteId){var ce=typeof this.promoteId=="string"?this.promoteId:this.promoteId[D];typeof(W=A.properties[ce])=="boolean"&&(W=Number(W))}return W},Or("FeatureIndex",pu,{omit:["rawTileData","sourceLayerCoder"]});var qa=function(A,D){this.tileID=A,this.uid=g(),this.uses=0,this.tileSize=D,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};qa.prototype.registerFadeDuration=function(A){var D=A+this.timeAdded;D<X.now()||this.fadeEndTime&&D<this.fadeEndTime||(this.fadeEndTime=D)},qa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},qa.prototype.loadVectorData=function(A,D,W){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var ce in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(wt,At){var Nt={};if(!At)return Nt;for(var Yt=function(){var un=sn[Ut],En=un.layerIds.map(function(Gn){return At.getLayer(Gn)}).filter(Boolean);if(En.length!==0){un.layers=En,un.stateDependentLayerIds&&(un.stateDependentLayers=un.stateDependentLayerIds.map(function(Gn){return En.filter(function(Kn){return Kn.id===Gn})[0]}));for(var Mn=0,Nn=En;Mn<Nn.length;Mn+=1){var jn=Nn[Mn];Nt[jn.id]=un}}},Ut=0,sn=wt;Ut<sn.length;Ut+=1)Yt();return Nt}(A.buckets,D.style),this.hasSymbolBuckets=!1,this.buckets){var Se=this.buckets[ce];if(Se instanceof Ci){if(this.hasSymbolBuckets=!0,!W)break;Se.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ie in this.buckets){var Ve=this.buckets[Ie];if(Ve instanceof Ci&&Ve.hasRTLText){this.hasRTLText=!0,Ha.isLoading()||Ha.isLoaded()||tl()!=="deferred"||nl();break}}for(var tt in this.queryPadding=0,this.buckets){var ct=this.buckets[tt];this.queryPadding=Math.max(this.queryPadding,D.style.getLayer(tt).queryRadius(ct))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new Et},qa.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},qa.prototype.getBucket=function(A){return this.buckets[A.id]},qa.prototype.upload=function(A){for(var D in this.buckets){var W=this.buckets[D];W.uploadPending()&&W.upload(A)}var ce=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Qu(A,this.imageAtlas.image,ce.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Qu(A,this.glyphAtlasImage,ce.ALPHA),this.glyphAtlasImage=null)},qa.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},qa.prototype.queryRenderedFeatures=function(A,D,W,ce,Se,Ie,Ve,tt,ct,wt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ce,cameraQueryGeometry:Se,scale:Ie,tileSize:this.tileSize,pixelPosMatrix:wt,transform:tt,params:Ve,queryPadding:this.queryPadding*ct},A,D,W):{}},qa.prototype.querySourceFeatures=function(A,D){var W=this.latestFeatureIndex;if(W&&W.rawTileData){var ce=W.loadVTLayers(),Se=D?D.sourceLayer:"",Ie=ce._geojsonTileLayer||ce[Se];if(Ie)for(var Ve=xl(D&&D.filter),tt=this.tileID.canonical,ct=tt.z,wt=tt.x,At=tt.y,Nt={z:ct,x:wt,y:At},Yt=0;Yt<Ie.length;Yt++){var Ut=Ie.feature(Yt);if(Ve.needGeometry){var sn=Yi(Ut,!0);if(!Ve.filter(new ii(this.tileID.overscaledZ),sn,this.tileID.canonical))continue}else if(!Ve.filter(new ii(this.tileID.overscaledZ),Ut))continue;var un=W.getId(Ut,Se),En=new oh(Ut,ct,wt,At,un);En.tile=Nt,A.push(En)}}},qa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},qa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},qa.prototype.setExpiryData=function(A){var D=this.expirationTime;if(A.cacheControl){var W=z(A.cacheControl);W["max-age"]&&(this.expirationTime=Date.now()+1e3*W["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var ce=Date.now(),Se=!1;if(this.expirationTime>ce)Se=!1;else if(D)if(this.expirationTime<D)Se=!0;else{var Ie=this.expirationTime-D;Ie?this.expirationTime=ce+Math.max(Ie,3e4):Se=!0}else Se=!0;Se?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},qa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},qa.prototype.setFeatureState=function(A,D){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(A).length!==0){var W=this.latestFeatureIndex.loadVTLayers();for(var ce in this.buckets)if(D.style.hasLayer(ce)){var Se=this.buckets[ce],Ie=Se.layers[0].sourceLayer||"_geojsonTileLayer",Ve=W[Ie],tt=A[Ie];if(Ve&&tt&&Object.keys(tt).length!==0){Se.update(tt,Ve,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=D&&D.style&&D.style.getLayer(ce);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(Se)))}}}},qa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},qa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<X.now()},qa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},qa.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=X.now()+A},qa.prototype.setDependencies=function(A,D){for(var W={},ce=0,Se=D;ce<Se.length;ce+=1)W[Se[ce]]=!0;this.dependencies[A]=W},qa.prototype.hasDependency=function(A,D){for(var W=0,ce=A;W<ce.length;W+=1){var Se=ce[W],Ie=this.dependencies[Se];if(Ie){for(var Ve=0,tt=D;Ve<tt.length;Ve+=1)if(Ie[tt[Ve]])return!0}}return!1};var Nu=n.performance,P0=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},Nu.mark(this._marks.start)};P0.prototype.finish=function(){Nu.mark(this._marks.end);var A=Nu.getEntriesByName(this._marks.measure);return A.length===0&&(Nu.measure(this._marks.measure,this._marks.start,this._marks.end),A=Nu.getEntriesByName(this._marks.measure),Nu.clearMarks(this._marks.start),Nu.clearMarks(this._marks.end),Nu.clearMeasures(this._marks.measure)),A},i.Actor=Sc,i.AlphaImage=Ku,i.CanonicalTileID=ec,i.CollisionBoxArray=Et,i.Color=Cn,i.DEMData=hu,i.DataConstantProperty=Dr,i.DictionaryCoder=ah,i.EXTENT=pi,i.ErrorEvent=Ue,i.EvaluationParameters=ii,i.Event=je,i.Evented=at,i.FeatureIndex=pu,i.FillBucket=El,i.FillExtrusionBucket=Ll,i.ImageAtlas=af,i.ImagePosition=Jf,i.LineBucket=Co,i.LngLat=ra,i.LngLatBounds=Sa,i.MercatorCoordinate=$u,i.ONE_EM=Qa,i.OverscaledTileID=Ea,i.Point=t,i.Point$1=t,i.Properties=na,i.Protobuf=Zf,i.RGBAImage=Ho,i.RequestManager=ge,i.RequestPerformance=P0,i.ResourceType=_t,i.SegmentVector=Yn,i.SourceFeatureState=Ec,i.StructArrayLayout1ui2=vt,i.StructArrayLayout2f1f2i16=ne,i.StructArrayLayout2i4=bs,i.StructArrayLayout3ui6=me,i.StructArrayLayout4i8=cu,i.SymbolBucket=Ci,i.Texture=Qu,i.Tile=qa,i.Transitionable=Eo,i.Uniform1f=ni,i.Uniform1i=Kr,i.Uniform2f=ai,i.Uniform3f=Li,i.Uniform4f=Ki,i.UniformColor=Pa,i.UniformMatrix4f=Ma,i.UnwrappedTileID=L0,i.ValidationError=gt,i.WritingMode=ws,i.ZoomHistory=el,i.add=function(A,D,W){return A[0]=D[0]+W[0],A[1]=D[1]+W[1],A[2]=D[2]+W[2],A},i.addDynamicAttributes=xp,i.asyncAll=function(A,D,W){if(!A.length)return W(null,[]);var ce=A.length,Se=new Array(A.length),Ie=null;A.forEach(function(Ve,tt){D(Ve,function(ct,wt){ct&&(Ie=ct),Se[tt]=wt,--ce==0&&W(Ie,Se)})})},i.bezier=l,i.bindAll=x,i.browser=X,i.cacheEntryPossiblyAdded=function(A){++mt>Ne&&(A.getActor().send("enforceCacheSizeLimit",De),mt=0)},i.clamp=u,i.clearTileCache=function(A){var D=n.caches.delete(Me);A&&D.catch(A).then(function(){return A()})},i.clipLine=h0,i.clone=function(A){var D=new _s(16);return D[0]=A[0],D[1]=A[1],D[2]=A[2],D[3]=A[3],D[4]=A[4],D[5]=A[5],D[6]=A[6],D[7]=A[7],D[8]=A[8],D[9]=A[9],D[10]=A[10],D[11]=A[11],D[12]=A[12],D[13]=A[13],D[14]=A[14],D[15]=A[15],D},i.clone$1=S,i.clone$2=function(A){var D=new _s(3);return D[0]=A[0],D[1]=A[1],D[2]=A[2],D},i.collisionCircleLayout=rm,i.config=K,i.create=function(){var A=new _s(16);return _s!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},i.create$1=function(){var A=new _s(9);return _s!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},i.create$2=function(){var A=new _s(4);return _s!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},i.createCommonjsModule=_,i.createExpression=Jo,i.createLayout=Ri,i.createStyleLayer=function(A){return A.type==="custom"?new Rm(A):new zm[A.type](A)},i.cross=function(A,D,W){var ce=D[0],Se=D[1],Ie=D[2],Ve=W[0],tt=W[1],ct=W[2];return A[0]=Se*ct-Ie*tt,A[1]=Ie*Ve-ce*ct,A[2]=ce*tt-Se*Ve,A},i.deepEqual=function A(D,W){if(Array.isArray(D)){if(!Array.isArray(W)||D.length!==W.length)return!1;for(var ce=0;ce<D.length;ce++)if(!A(D[ce],W[ce]))return!1;return!0}if(typeof D=="object"&&D!==null&&W!==null){if(typeof W!="object"||Object.keys(D).length!==Object.keys(W).length)return!1;for(var Se in D)if(!A(D[Se],W[Se]))return!1;return!0}return D===W},i.dot=function(A,D){return A[0]*D[0]+A[1]*D[1]+A[2]*D[2]},i.dot$1=function(A,D){return A[0]*D[0]+A[1]*D[1]+A[2]*D[2]+A[3]*D[3]},i.ease=o,i.emitValidationErrors=ja,i.endsWith=y,i.enforceCacheSizeLimit=function(A){Ye(),de&&de.then(function(D){D.keys().then(function(W){for(var ce=0;ce<W.length-A;ce++)D.delete(W[ce])})})},i.evaluateSizeForFeature=a0,i.evaluateSizeForZoom=o0,i.evaluateVariableOffset=g0,i.evented=Va,i.extend=c,i.featureFilter=xl,i.filterObject=f,i.fromRotation=function(A,D){var W=Math.sin(D),ce=Math.cos(D);return A[0]=ce,A[1]=W,A[2]=0,A[3]=-W,A[4]=ce,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},i.getAnchorAlignment=gp,i.getAnchorJustification=yp,i.getArrayBuffer=Ft,i.getImage=Je,i.getJSON=function(A,D){return zt(c(A,{type:"json"}),D)},i.getRTLTextPluginStatus=tl,i.getReferrer=st,i.getVideo=function(A,D){var W,ce,Se=n.document.createElement("video");Se.muted=!0,Se.onloadstart=function(){D(null,Se)};for(var Ie=0;Ie<A.length;Ie++){var Ve=n.document.createElement("source");W=A[Ie],ce=void 0,(ce=n.document.createElement("a")).href=W,ce.protocol===n.document.location.protocol&&ce.host===n.document.location.host||(Se.crossOrigin="Anonymous"),Ve.src=A[Ie],Se.appendChild(Ve)}return{cancel:function(){}}},i.identity=tp,i.invert=function(A,D){var W=D[0],ce=D[1],Se=D[2],Ie=D[3],Ve=D[4],tt=D[5],ct=D[6],wt=D[7],At=D[8],Nt=D[9],Yt=D[10],Ut=D[11],sn=D[12],un=D[13],En=D[14],Mn=D[15],Nn=W*tt-ce*Ve,jn=W*ct-Se*Ve,Gn=W*wt-Ie*Ve,Kn=ce*ct-Se*tt,rr=ce*wt-Ie*tt,_r=Se*wt-Ie*ct,vr=At*un-Nt*sn,Ar=At*En-Yt*sn,Cr=At*Mn-Ut*sn,Zr=Nt*En-Yt*un,Nr=Nt*Mn-Ut*un,Gr=Yt*Mn-Ut*En,Ur=Nn*Gr-jn*Nr+Gn*Zr+Kn*Cr-rr*Ar+_r*vr;return Ur?(Ur=1/Ur,A[0]=(tt*Gr-ct*Nr+wt*Zr)*Ur,A[1]=(Se*Nr-ce*Gr-Ie*Zr)*Ur,A[2]=(un*_r-En*rr+Mn*Kn)*Ur,A[3]=(Yt*rr-Nt*_r-Ut*Kn)*Ur,A[4]=(ct*Cr-Ve*Gr-wt*Ar)*Ur,A[5]=(W*Gr-Se*Cr+Ie*Ar)*Ur,A[6]=(En*Gn-sn*_r-Mn*jn)*Ur,A[7]=(At*_r-Yt*Gn+Ut*jn)*Ur,A[8]=(Ve*Nr-tt*Cr+wt*vr)*Ur,A[9]=(ce*Cr-W*Nr-Ie*vr)*Ur,A[10]=(sn*rr-un*Gn+Mn*Nn)*Ur,A[11]=(Nt*Gn-At*rr-Ut*Nn)*Ur,A[12]=(tt*Ar-Ve*Zr-ct*vr)*Ur,A[13]=(W*Zr-ce*Ar+Se*vr)*Ur,A[14]=(un*jn-sn*Kn-En*Nn)*Ur,A[15]=(At*Kn-Nt*jn+Yt*Nn)*Ur,A):null},i.isChar=wr,i.isMapboxURL=ve,i.keysDifference=function(A,D){var W=[];for(var ce in A)ce in D||W.push(ce);return W},i.makeRequest=zt,i.mapObject=k,i.mercatorXfromLng=A0,i.mercatorYfromLat=S0,i.mercatorZfromAltitude=E0,i.mul=pv,i.multiply=Sd,i.mvt=vc,i.nextPowerOfTwo=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},i.normalize=function(A,D){var W=D[0],ce=D[1],Se=D[2],Ie=W*W+ce*ce+Se*Se;return Ie>0&&(Ie=1/Math.sqrt(Ie)),A[0]=D[0]*Ie,A[1]=D[1]*Ie,A[2]=D[2]*Ie,A},i.number=Wr,i.offscreenCanvasSupported=Mt,i.ortho=function(A,D,W,ce,Se,Ie,Ve){var tt=1/(D-W),ct=1/(ce-Se),wt=1/(Ie-Ve);return A[0]=-2*tt,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*ct,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*wt,A[11]=0,A[12]=(D+W)*tt,A[13]=(Se+ce)*ct,A[14]=(Ve+Ie)*wt,A[15]=1,A},i.parseGlyphPBF=function(A){return new Zf(A).readFields(dm,[])},i.pbf=Zf,i.performSymbolLayout=function(A,D,W,ce,Se,Ie,Ve){A.createArrays();var tt=512*A.overscaling;A.tilePixelRatio=pi/tt,A.compareText={},A.iconsNeedLinear=!1;var ct=A.layers[0].layout,wt=A.layers[0]._unevaluatedLayout._values,At={};if(A.textSizeData.kind==="composite"){var Nt=A.textSizeData,Yt=Nt.minZoom,Ut=Nt.maxZoom;At.compositeTextSizes=[wt["text-size"].possiblyEvaluate(new ii(Yt),Ve),wt["text-size"].possiblyEvaluate(new ii(Ut),Ve)]}if(A.iconSizeData.kind==="composite"){var sn=A.iconSizeData,un=sn.minZoom,En=sn.maxZoom;At.compositeIconSizes=[wt["icon-size"].possiblyEvaluate(new ii(un),Ve),wt["icon-size"].possiblyEvaluate(new ii(En),Ve)]}At.layoutTextSize=wt["text-size"].possiblyEvaluate(new ii(A.zoom+1),Ve),At.layoutIconSize=wt["icon-size"].possiblyEvaluate(new ii(A.zoom+1),Ve),At.textMaxSize=wt["text-size"].possiblyEvaluate(new ii(18));for(var Mn=ct.get("text-line-height")*Qa,Nn=ct.get("text-rotation-alignment")==="map"&&ct.get("symbol-placement")!=="point",jn=ct.get("text-keep-upright"),Gn=ct.get("text-size"),Kn=function(){var vr=_r[rr],Ar=ct.get("text-font").evaluate(vr,{},Ve).join(","),Cr=Gn.evaluate(vr,{},Ve),Zr=At.layoutTextSize.evaluate(vr,{},Ve),Nr=At.layoutIconSize.evaluate(vr,{},Ve),Gr={horizontal:{},vertical:void 0},Ur=vr.text,zr=[0,0];if(Ur){var ci=Ur.toString(),$r=ct.get("text-letter-spacing").evaluate(vr,{},Ve)*Qa,Bi=function(ei){for(var di=0,da=ei;di<da.length;di+=1)if(Fi=da[di].charCodeAt(0),wr.Arabic(Fi)||wr["Arabic Supplement"](Fi)||wr["Arabic Extended-A"](Fi)||wr["Arabic Presentation Forms-A"](Fi)||wr["Arabic Presentation Forms-B"](Fi))return!1;var Fi;return!0}(ci)?$r:0,Yr=ct.get("text-anchor").evaluate(vr,{},Ve),Oi=ct.get("text-variable-anchor");if(!Oi){var Wi=ct.get("text-radial-offset").evaluate(vr,{},Ve);zr=Wi?g0(Yr,[Wi*Qa,mp]):ct.get("text-offset").evaluate(vr,{},Ve).map(function(ei){return ei*Qa})}var $i=Nn?"center":ct.get("text-justify").evaluate(vr,{},Ve),ea=ct.get("symbol-placement"),Ni=ea==="point"?ct.get("text-max-width").evaluate(vr,{},Ve)*Qa:0,La=function(){A.allowVerticalPlacement&&Ml(ci)&&(Gr.vertical=Kf(Ur,D,W,Se,Ar,Ni,Mn,Yr,"left",Bi,zr,ws.vertical,!0,ea,Zr,Cr))};if(!Nn&&Oi){for(var oa=$i==="auto"?Oi.map(function(ei){return yp(ei)}):[$i],Ya=!1,lo=0;lo<oa.length;lo++){var $a=oa[lo];if(!Gr.horizontal[$a])if(Ya)Gr.horizontal[$a]=Gr.horizontal[0];else{var Oo=Kf(Ur,D,W,Se,Ar,Ni,Mn,"center",$a,Bi,zr,ws.horizontal,!1,ea,Zr,Cr);Oo&&(Gr.horizontal[$a]=Oo,Ya=Oo.positionedLines.length===1)}}La()}else{$i==="auto"&&($i=yp(Yr));var eo=Kf(Ur,D,W,Se,Ar,Ni,Mn,Yr,$i,Bi,zr,ws.horizontal,!1,ea,Zr,Cr);eo&&(Gr.horizontal[$i]=eo),La(),Ml(ci)&&Nn&&jn&&(Gr.vertical=Kf(Ur,D,W,Se,Ar,Ni,Mn,Yr,$i,Bi,zr,ws.vertical,!1,ea,Zr,Cr))}}var Ia=void 0,to=!1;if(vr.icon&&vr.icon.name){var Ga=ce[vr.icon.name];Ga&&(Ia=function(ei,di,da){var Fi=gp(da),ua=Fi.horizontalAlign,ia=Fi.verticalAlign,yi=di[0],ga=di[1],Po=yi-ei.displaySize[0]*ua,is=Po+ei.displaySize[0],yo=ga-ei.displaySize[1]*ia;return{image:ei,top:yo,bottom:yo+ei.displaySize[1],left:Po,right:is}}(Se[vr.icon.name],ct.get("icon-offset").evaluate(vr,{},Ve),ct.get("icon-anchor").evaluate(vr,{},Ve)),to=Ga.sdf,A.sdfIcons===void 0?A.sdfIcons=Ga.sdf:A.sdfIcons!==Ga.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ga.pixelRatio!==A.pixelRatio||ct.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}var Da=m0(Gr.horizontal)||Gr.vertical;A.iconsInText=!!Da&&Da.iconsInText,(Da||Ia)&&function(ei,di,da,Fi,ua,ia,yi,ga,Po,is,yo){var Ol=ia.textMaxSize.evaluate(di,{});Ol===void 0&&(Ol=yi);var du,Wa=ei.layers[0].layout,Pl=Wa.get("icon-offset").evaluate(di,{},yo),sl=m0(da.horizontal),ll=24,tc=yi/ll,sh=ei.tilePixelRatio*tc,nc=ei.tilePixelRatio*Ol/ll,lh=ei.tilePixelRatio*ga,cf=ei.tilePixelRatio*Wa.get("symbol-spacing"),kp=Wa.get("text-padding")*ei.tilePixelRatio,uh=Wa.get("icon-padding")*ei.tilePixelRatio,Lc=Wa.get("text-max-angle")/180*Math.PI,ch=Wa.get("text-rotation-alignment")==="map"&&Wa.get("symbol-placement")!=="point",fh=Wa.get("icon-rotation-alignment")==="map"&&Wa.get("symbol-placement")!=="point",ff=Wa.get("symbol-placement"),Mp=cf/2,hf=Wa.get("icon-text-fit");Fi&&hf!=="none"&&(ei.allowVerticalPlacement&&da.vertical&&(du=i0(Fi,da.vertical,hf,Wa.get("icon-text-fit-padding"),Pl,tc)),sl&&(Fi=i0(Fi,sl,hf,Wa.get("icon-text-fit-padding"),Pl,tc)));var rc=function(Bm,yf){yf.x<0||yf.x>=pi||yf.y<0||yf.y>=pi||function(ba,Il,Nm,ju,Op,F0,vh,Ql,mh,xf,yh,xh,Pp,B0,bf,N0,j0,U0,V0,H0,Ts,bh,q0,$l,jm){var Y0,oc,Pc,Ic,Dc,Rc=ba.addToLineVertexArray(Il,Nm),G0=0,W0=0,Z0=0,X0=0,Ip=-1,Dp=-1,gu={},J0=Tr(""),Rp=0,zp=0;if(Ql._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Rp=(Y0=Ql.layout.get("text-offset").evaluate(Ts,{},$l).map(function(wf){return wf*Qa}))[0],zp=Y0[1]):(Rp=Ql.layout.get("text-radial-offset").evaluate(Ts,{},$l)*Qa,zp=mp),ba.allowVerticalPlacement&&ju.vertical){var K0=Ql.layout.get("text-rotate").evaluate(Ts,{},$l)+90,Um=ju.vertical;Ic=new nh(mh,Il,xf,yh,xh,Um,Pp,B0,bf,K0),vh&&(Dc=new nh(mh,Il,xf,yh,xh,vh,j0,U0,bf,K0))}if(Op){var Fp=Ql.layout.get("icon-rotate").evaluate(Ts,{}),Q0=Ql.layout.get("icon-text-fit")!=="none",$0=p0(Op,Fp,q0,Q0),Bp=vh?p0(vh,Fp,q0,Q0):void 0;Pc=new nh(mh,Il,xf,yh,xh,Op,j0,U0,!1,Fp),G0=4*$0.length;var e1=ba.iconSizeData,_f=null;e1.kind==="source"?(_f=[Cl*Ql.layout.get("icon-size").evaluate(Ts,{})])[0]>Bu&&E(ba.layerIds[0]+': Value for "icon-size" is >= '+sf+'. Reduce your "icon-size".'):e1.kind==="composite"&&((_f=[Cl*bh.compositeIconSizes[0].evaluate(Ts,{},$l),Cl*bh.compositeIconSizes[1].evaluate(Ts,{},$l)])[0]>Bu||_f[1]>Bu)&&E(ba.layerIds[0]+': Value for "icon-size" is >= '+sf+'. Reduce your "icon-size".'),ba.addSymbols(ba.icon,$0,_f,H0,V0,Ts,!1,Il,Rc.lineStartIndex,Rc.lineLength,-1,$l),Ip=ba.icon.placedSymbolArray.length-1,Bp&&(W0=4*Bp.length,ba.addSymbols(ba.icon,Bp,_f,H0,V0,Ts,ws.vertical,Il,Rc.lineStartIndex,Rc.lineLength,-1,$l),Dp=ba.icon.placedSymbolArray.length-1)}for(var t1 in ju.horizontal){var _h=ju.horizontal[t1];if(!oc){J0=Tr(_h.text);var Vm=Ql.layout.get("text-rotate").evaluate(Ts,{},$l);oc=new nh(mh,Il,xf,yh,xh,_h,Pp,B0,bf,Vm)}var n1=_h.positionedLines.length===1;if(Z0+=v0(ba,Il,_h,F0,Ql,bf,Ts,N0,Rc,ju.vertical?ws.horizontal:ws.horizontalOnly,n1?Object.keys(ju.horizontal):[t1],gu,Ip,bh,$l),n1)break}ju.vertical&&(X0+=v0(ba,Il,ju.vertical,F0,Ql,bf,Ts,N0,Rc,ws.vertical,["vertical"],gu,Dp,bh,$l));var Hm=oc?oc.boxStartIndex:ba.collisionBoxArray.length,qm=oc?oc.boxEndIndex:ba.collisionBoxArray.length,Ym=Ic?Ic.boxStartIndex:ba.collisionBoxArray.length,Gm=Ic?Ic.boxEndIndex:ba.collisionBoxArray.length,Wm=Pc?Pc.boxStartIndex:ba.collisionBoxArray.length,Zm=Pc?Pc.boxEndIndex:ba.collisionBoxArray.length,Xm=Dc?Dc.boxStartIndex:ba.collisionBoxArray.length,Jm=Dc?Dc.boxEndIndex:ba.collisionBoxArray.length,eu=-1,wh=function(wf,i1){return wf&&wf.circleDiameter?Math.max(wf.circleDiameter,i1):i1};eu=wh(oc,eu),eu=wh(Ic,eu),eu=wh(Pc,eu);var r1=(eu=wh(Dc,eu))>-1?1:0;r1&&(eu*=jm/Qa),ba.glyphOffsetArray.length>=Ci.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ts.sortKey!==void 0&&ba.addToSortKeyRanges(ba.symbolInstances.length,Ts.sortKey),ba.symbolInstances.emplaceBack(Il.x,Il.y,gu.right>=0?gu.right:-1,gu.center>=0?gu.center:-1,gu.left>=0?gu.left:-1,gu.vertical||-1,Ip,Dp,J0,Hm,qm,Ym,Gm,Wm,Zm,Xm,Jm,xf,Z0,X0,G0,W0,r1,0,Pp,Rp,zp,eu)}(ei,yf,Bm,da,Fi,ua,du,ei.layers[0],ei.collisionBoxArray,di.index,di.sourceLayerIndex,ei.index,sh,kp,ch,Po,lh,uh,fh,Pl,di,ia,is,yo,yi)};if(ff==="line")for(var Cc=0,hh=h0(di.geometry,0,0,pi,pi);Cc<hh.length;Cc+=1)for(var ph=hh[Cc],Oc=0,dh=_m(ph,cf,Lc,da.vertical||sl,Fi,ll,nc,ei.overscaling,pi);Oc<dh.length;Oc+=1){var gh=dh[Oc];sl&&Mm(ei,sl.text,Mp,gh)||rc(ph,gh)}else if(ff==="line-center")for(var pf=0,df=di.geometry;pf<df.length;pf+=1){var ic=df[pf];if(ic.length>1){var gf=bm(ic,Lc,da.vertical||sl,Fi,ll,nc);gf&&rc(ic,gf)}}else if(di.type==="Polygon")for(var ac=0,vf=lp(di.geometry,0);ac<vf.length;ac+=1){var mf=vf[ac],I0=Tm(mf,16);rc(mf[0],new bc(I0.x,I0.y,0))}else if(di.type==="LineString")for(var Ap=0,D0=di.geometry;Ap<D0.length;Ap+=1){var Sp=D0[Ap];rc(Sp,new bc(Sp[0].x,Sp[0].y,0))}else if(di.type==="Point")for(var Ep=0,R0=di.geometry;Ep<R0.length;Ep+=1)for(var Lp=0,z0=R0[Ep];Lp<z0.length;Lp+=1){var Cp=z0[Lp];rc([Cp],new bc(Cp.x,Cp.y,0))}}(A,vr,Gr,Ia,ce,At,Zr,Nr,zr,to,Ve)},rr=0,_r=A.features;rr<_r.length;rr+=1)Kn();Ie&&A.generateCollisionDebugBuffers()},i.perspective=function(A,D,W,ce,Se){var Ie,Ve=1/Math.tan(D/2);return A[0]=Ve/W,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=Ve,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,Se!=null&&Se!==1/0?(Ie=1/(ce-Se),A[10]=(Se+ce)*Ie,A[14]=2*Se*ce*Ie):(A[10]=-1,A[14]=-2*ce),A},i.pick=function(A,D){for(var W={},ce=0;ce<D.length;ce++){var Se=D[ce];Se in A&&(W[Se]=A[Se])}return W},i.plugin=Ha,i.polygonIntersectsPolygon=Ju,i.postMapLoadEvent=be,i.postTurnstileEvent=Fe,i.potpack=$d,i.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.register=Or,i.registerForPluginStateChange=function(A){return A({pluginStatus:oi,pluginURL:ya}),Va.on("pluginStateChange",A),A},i.renderColorRamp=Od,i.rotate=function(A,D,W){var ce=D[0],Se=D[1],Ie=D[2],Ve=D[3],tt=Math.sin(W),ct=Math.cos(W);return A[0]=ce*ct+Ie*tt,A[1]=Se*ct+Ve*tt,A[2]=ce*-tt+Ie*ct,A[3]=Se*-tt+Ve*ct,A},i.rotateX=function(A,D,W){var ce=Math.sin(W),Se=Math.cos(W),Ie=D[4],Ve=D[5],tt=D[6],ct=D[7],wt=D[8],At=D[9],Nt=D[10],Yt=D[11];return D!==A&&(A[0]=D[0],A[1]=D[1],A[2]=D[2],A[3]=D[3],A[12]=D[12],A[13]=D[13],A[14]=D[14],A[15]=D[15]),A[4]=Ie*Se+wt*ce,A[5]=Ve*Se+At*ce,A[6]=tt*Se+Nt*ce,A[7]=ct*Se+Yt*ce,A[8]=wt*Se-Ie*ce,A[9]=At*Se-Ve*ce,A[10]=Nt*Se-tt*ce,A[11]=Yt*Se-ct*ce,A},i.rotateZ=function(A,D,W){var ce=Math.sin(W),Se=Math.cos(W),Ie=D[0],Ve=D[1],tt=D[2],ct=D[3],wt=D[4],At=D[5],Nt=D[6],Yt=D[7];return D!==A&&(A[8]=D[8],A[9]=D[9],A[10]=D[10],A[11]=D[11],A[12]=D[12],A[13]=D[13],A[14]=D[14],A[15]=D[15]),A[0]=Ie*Se+wt*ce,A[1]=Ve*Se+At*ce,A[2]=tt*Se+Nt*ce,A[3]=ct*Se+Yt*ce,A[4]=wt*Se-Ie*ce,A[5]=At*Se-Ve*ce,A[6]=Nt*Se-tt*ce,A[7]=Yt*Se-ct*ce,A},i.scale=function(A,D,W){var ce=W[0],Se=W[1],Ie=W[2];return A[0]=D[0]*ce,A[1]=D[1]*ce,A[2]=D[2]*ce,A[3]=D[3]*ce,A[4]=D[4]*Se,A[5]=D[5]*Se,A[6]=D[6]*Se,A[7]=D[7]*Se,A[8]=D[8]*Ie,A[9]=D[9]*Ie,A[10]=D[10]*Ie,A[11]=D[11]*Ie,A[12]=D[12],A[13]=D[13],A[14]=D[14],A[15]=D[15],A},i.scale$1=function(A,D,W){return A[0]=D[0]*W,A[1]=D[1]*W,A[2]=D[2]*W,A[3]=D[3]*W,A},i.scale$2=function(A,D,W){return A[0]=D[0]*W,A[1]=D[1]*W,A[2]=D[2]*W,A},i.setCacheLimits=function(A,D){De=A,Ne=D},i.setRTLTextPlugin=function(A,D,W){if(W===void 0&&(W=!1),oi===Bo||oi===vo||oi===$o)throw new Error("setRTLTextPlugin cannot be called multiple times.");ya=X.resolveURL(A),oi=Bo,xs=D,No(),W||nl()},i.sphericalToCartesian=function(A){var D=A[0],W=A[1],ce=A[2];return W+=90,W*=Math.PI/180,ce*=Math.PI/180,{x:D*Math.cos(W)*Math.sin(ce),y:D*Math.sin(W)*Math.sin(ce),z:D*Math.cos(ce)}},i.sqrLen=gv,i.styleSpec=$e,i.sub=dv,i.symbolSize=xm,i.transformMat3=function(A,D,W){var ce=D[0],Se=D[1],Ie=D[2];return A[0]=ce*W[0]+Se*W[3]+Ie*W[6],A[1]=ce*W[1]+Se*W[4]+Ie*W[7],A[2]=ce*W[2]+Se*W[5]+Ie*W[8],A},i.transformMat4=Hf,i.translate=function(A,D,W){var ce,Se,Ie,Ve,tt,ct,wt,At,Nt,Yt,Ut,sn,un=W[0],En=W[1],Mn=W[2];return D===A?(A[12]=D[0]*un+D[4]*En+D[8]*Mn+D[12],A[13]=D[1]*un+D[5]*En+D[9]*Mn+D[13],A[14]=D[2]*un+D[6]*En+D[10]*Mn+D[14],A[15]=D[3]*un+D[7]*En+D[11]*Mn+D[15]):(ce=D[0],Se=D[1],Ie=D[2],Ve=D[3],tt=D[4],ct=D[5],wt=D[6],At=D[7],Nt=D[8],Yt=D[9],Ut=D[10],sn=D[11],A[0]=ce,A[1]=Se,A[2]=Ie,A[3]=Ve,A[4]=tt,A[5]=ct,A[6]=wt,A[7]=At,A[8]=Nt,A[9]=Yt,A[10]=Ut,A[11]=sn,A[12]=ce*un+tt*En+Nt*Mn+D[12],A[13]=Se*un+ct*En+Yt*Mn+D[13],A[14]=Ie*un+wt*En+Ut*Mn+D[14],A[15]=Ve*un+At*En+sn*Mn+D[15]),A},i.triggerPluginCompletionEvent=Ua,i.uniqueId=g,i.validateCustomStyleLayer=function(A){var D=[],W=A.id;return W===void 0&&D.push({message:"layers."+W+': missing required property "id"'}),A.render===void 0&&D.push({message:"layers."+W+': missing required method "render"'}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&D.push({message:"layers."+W+': property "renderingMode" must be either "2d" or "3d"'}),D},i.validateLight=Bs,i.validateStyle=Fo,i.values=function(A){var D=[];for(var W in A)D.push(A[W]);return D},i.vectorTile=vc,i.version=v,i.warnOnce=E,i.webpSupported=ee,i.window=n,i.wrap=p}),w(0,function(i){function _(Xe){var Ke=typeof Xe;if(Ke==="number"||Ke==="boolean"||Ke==="string"||Xe==null)return JSON.stringify(Xe);if(Array.isArray(Xe)){for(var He="[",Je=0,lt=Xe;Je<lt.length;Je+=1)He+=_(lt[Je])+",";return He+"]"}for(var ot=Object.keys(Xe).sort(),je="{",Ue=0;Ue<ot.length;Ue++)je+=JSON.stringify(ot[Ue])+":"+_(Xe[ot[Ue]])+",";return je+"}"}function v(Xe){for(var Ke="",He=0,Je=i.refProperties;He<Je.length;He+=1)Ke+="/"+_(Xe[Je[He]]);return Ke}var h=function(Xe){this.keyCache={},Xe&&this.replace(Xe)};h.prototype.replace=function(Xe){this._layerConfigs={},this._layers={},this.update(Xe,[])},h.prototype.update=function(Xe,Ke){for(var He=this,Je=0,lt=Xe;Je<lt.length;Je+=1){var ot=lt[Je];this._layerConfigs[ot.id]=ot;var je=this._layers[ot.id]=i.createStyleLayer(ot);je._featureFilter=i.featureFilter(je.filter),this.keyCache[ot.id]&&delete this.keyCache[ot.id]}for(var Ue=0,at=Ke;Ue<at.length;Ue+=1){var $e=at[Ue];delete this.keyCache[$e],delete this._layerConfigs[$e],delete this._layers[$e]}this.familiesBySource={};for(var gt=0,yt=function(Dt,Bt){for(var Xt={},an=0;an<Dt.length;an++){var Wt=Bt&&Bt[Dt[an].id]||v(Dt[an]);Bt&&(Bt[Dt[an].id]=Wt);var Vt=Xt[Wt];Vt||(Vt=Xt[Wt]=[]),Vt.push(Dt[an])}var on=[];for(var Sn in Xt)on.push(Xt[Sn]);return on}(i.values(this._layerConfigs),this.keyCache);gt<yt.length;gt+=1){var xt=yt[gt].map(function(Dt){return He._layers[Dt.id]}),dt=xt[0];if(dt.visibility!=="none"){var Lt=dt.source||"",Tt=this.familiesBySource[Lt];Tt||(Tt=this.familiesBySource[Lt]={});var bt=dt.sourceLayer||"_geojsonTileLayer",Ct=Tt[bt];Ct||(Ct=Tt[bt]=[]),Ct.push(xt)}}};var s=function(Xe){var Ke={},He=[];for(var Je in Xe){var lt=Xe[Je],ot=Ke[Je]={};for(var je in lt){var Ue=lt[+je];if(Ue&&Ue.bitmap.width!==0&&Ue.bitmap.height!==0){var at={x:0,y:0,w:Ue.bitmap.width+2,h:Ue.bitmap.height+2};He.push(at),ot[je]={rect:at,metrics:Ue.metrics}}}}var $e=i.potpack(He),gt=$e.w,yt=$e.h,xt=new i.AlphaImage({width:gt||1,height:yt||1});for(var dt in Xe){var Lt=Xe[dt];for(var Tt in Lt){var bt=Lt[+Tt];if(bt&&bt.bitmap.width!==0&&bt.bitmap.height!==0){var Ct=Ke[dt][Tt].rect;i.AlphaImage.copy(bt.bitmap,xt,{x:0,y:0},{x:Ct.x+1,y:Ct.y+1},bt.bitmap)}}}this.image=xt,this.positions=Ke};i.register("GlyphAtlas",s);var t=function(Xe){this.tileID=new i.OverscaledTileID(Xe.tileID.overscaledZ,Xe.tileID.wrap,Xe.tileID.canonical.z,Xe.tileID.canonical.x,Xe.tileID.canonical.y),this.uid=Xe.uid,this.zoom=Xe.zoom,this.pixelRatio=Xe.pixelRatio,this.tileSize=Xe.tileSize,this.source=Xe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Xe.showCollisionBoxes,this.collectResourceTiming=!!Xe.collectResourceTiming,this.returnDependencies=!!Xe.returnDependencies,this.promoteId=Xe.promoteId};function a(Xe,Ke,He){for(var Je=new i.EvaluationParameters(Ke),lt=0,ot=Xe;lt<ot.length;lt+=1)ot[lt].recalculate(Je,He)}function n(Xe,Ke){var He=i.getArrayBuffer(Xe.request,function(Je,lt,ot,je){Je?Ke(Je):lt&&Ke(null,{vectorTile:new i.vectorTile.VectorTile(new i.pbf(lt)),rawData:lt,cacheControl:ot,expires:je})});return function(){He.cancel(),Ke()}}t.prototype.parse=function(Xe,Ke,He,Je,lt){var ot=this;this.status="parsing",this.data=Xe,this.collisionBoxArray=new i.CollisionBoxArray;var je=new i.DictionaryCoder(Object.keys(Xe.layers).sort()),Ue=new i.FeatureIndex(this.tileID,this.promoteId);Ue.bucketLayerIDs=[];var at,$e,gt,yt,xt={},dt={featureIndex:Ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:He},Lt=Ke.familiesBySource[this.source];for(var Tt in Lt){var bt=Xe.layers[Tt];if(bt){bt.version===1&&i.warnOnce('Vector tile source "'+this.source+'" layer "'+Tt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ct=je.encode(Tt),Dt=[],Bt=0;Bt<bt.length;Bt++){var Xt=bt.feature(Bt),an=Ue.getId(Xt,Tt);Dt.push({feature:Xt,id:an,index:Bt,sourceLayerIndex:Ct})}for(var Wt=0,Vt=Lt[Tt];Wt<Vt.length;Wt+=1){var on=Vt[Wt],Sn=on[0];Sn.minzoom&&this.zoom<Math.floor(Sn.minzoom)||Sn.maxzoom&&this.zoom>=Sn.maxzoom||Sn.visibility!=="none"&&(a(on,this.zoom,He),(xt[Sn.id]=Sn.createBucket({index:Ue.bucketLayerIDs.length,layers:on,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ct,sourceID:this.source})).populate(Dt,dt,this.tileID.canonical),Ue.bucketLayerIDs.push(on.map(function(nn){return nn.id})))}}}var Ln=i.mapObject(dt.glyphDependencies,function(nn){return Object.keys(nn).map(Number)});Object.keys(Ln).length?Je.send("getGlyphs",{uid:this.uid,stacks:Ln},function(nn,cn){at||(at=nn,$e=cn,ln.call(ot))}):$e={};var fn=Object.keys(dt.iconDependencies);fn.length?Je.send("getImages",{icons:fn,source:this.source,tileID:this.tileID,type:"icons"},function(nn,cn){at||(at=nn,gt=cn,ln.call(ot))}):gt={};var Zt=Object.keys(dt.patternDependencies);function ln(){if(at)return lt(at);if($e&&gt&&yt){var nn=new s($e),cn=new i.ImageAtlas(gt,yt);for(var kn in xt){var An=xt[kn];An instanceof i.SymbolBucket?(a(An.layers,this.zoom,He),i.performSymbolLayout(An,$e,nn.positions,gt,cn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):An.hasPattern&&(An instanceof i.LineBucket||An instanceof i.FillBucket||An instanceof i.FillExtrusionBucket)&&(a(An.layers,this.zoom,He),An.addFeatures(dt,this.tileID.canonical,cn.patternPositions))}this.status="done",lt(null,{buckets:i.values(xt).filter(function(wn){return!wn.isEmpty()}),featureIndex:Ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nn.image,imageAtlas:cn,glyphMap:this.returnDependencies?$e:null,iconMap:this.returnDependencies?gt:null,glyphPositions:this.returnDependencies?nn.positions:null})}}Zt.length?Je.send("getImages",{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"},function(nn,cn){at||(at=nn,yt=cn,ln.call(ot))}):yt={},ln.call(this)};var r=function(Xe,Ke,He,Je){this.actor=Xe,this.layerIndex=Ke,this.availableImages=He,this.loadVectorData=Je||n,this.loading={},this.loaded={}};r.prototype.loadTile=function(Xe,Ke){var He=this,Je=Xe.uid;this.loading||(this.loading={});var lt=!!(Xe&&Xe.request&&Xe.request.collectResourceTiming)&&new i.RequestPerformance(Xe.request),ot=this.loading[Je]=new t(Xe);ot.abort=this.loadVectorData(Xe,function(je,Ue){if(delete He.loading[Je],je||!Ue)return ot.status="done",He.loaded[Je]=ot,Ke(je);var at=Ue.rawData,$e={};Ue.expires&&($e.expires=Ue.expires),Ue.cacheControl&&($e.cacheControl=Ue.cacheControl);var gt={};if(lt){var yt=lt.finish();yt&&(gt.resourceTiming=JSON.parse(JSON.stringify(yt)))}ot.vectorTile=Ue.vectorTile,ot.parse(Ue.vectorTile,He.layerIndex,He.availableImages,He.actor,function(xt,dt){if(xt||!dt)return Ke(xt);Ke(null,i.extend({rawTileData:at.slice(0)},dt,$e,gt))}),He.loaded=He.loaded||{},He.loaded[Je]=ot})},r.prototype.reloadTile=function(Xe,Ke){var He=this,Je=this.loaded,lt=Xe.uid,ot=this;if(Je&&Je[lt]){var je=Je[lt];je.showCollisionBoxes=Xe.showCollisionBoxes;var Ue=function(at,$e){var gt=je.reloadCallback;gt&&(delete je.reloadCallback,je.parse(je.vectorTile,ot.layerIndex,He.availableImages,ot.actor,gt)),Ke(at,$e)};je.status==="parsing"?je.reloadCallback=Ue:je.status==="done"&&(je.vectorTile?je.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor,Ue):Ue())}},r.prototype.abortTile=function(Xe,Ke){var He=this.loading,Je=Xe.uid;He&&He[Je]&&He[Je].abort&&(He[Je].abort(),delete He[Je]),Ke()},r.prototype.removeTile=function(Xe,Ke){var He=this.loaded,Je=Xe.uid;He&&He[Je]&&delete He[Je],Ke()};var l=i.window.ImageBitmap,o=function(){this.loaded={}};o.prototype.loadTile=function(Xe,Ke){var He=Xe.uid,Je=Xe.encoding,lt=Xe.rawImageData,ot=l&&lt instanceof l?this.getImageData(lt):lt,je=new i.DEMData(He,ot,Je);this.loaded=this.loaded||{},this.loaded[He]=je,Ke(null,je)},o.prototype.getImageData=function(Xe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Xe.width,Xe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Xe.width,this.offscreenCanvas.height=Xe.height,this.offscreenCanvasContext.drawImage(Xe,0,0,Xe.width,Xe.height);var Ke=this.offscreenCanvasContext.getImageData(-1,-1,Xe.width+2,Xe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new i.RGBAImage({width:Ke.width,height:Ke.height},Ke.data)},o.prototype.removeTile=function(Xe){var Ke=this.loaded,He=Xe.uid;Ke&&Ke[He]&&delete Ke[He]};var u=function Xe(Ke,He){var Je,lt=Ke&&Ke.type;if(lt==="FeatureCollection")for(Je=0;Je<Ke.features.length;Je++)Xe(Ke.features[Je],He);else if(lt==="GeometryCollection")for(Je=0;Je<Ke.geometries.length;Je++)Xe(Ke.geometries[Je],He);else if(lt==="Feature")Xe(Ke.geometry,He);else if(lt==="Polygon")p(Ke.coordinates,He);else if(lt==="MultiPolygon")for(Je=0;Je<Ke.coordinates.length;Je++)p(Ke.coordinates[Je],He);return Ke};function p(Xe,Ke){if(Xe.length!==0){c(Xe[0],Ke);for(var He=1;He<Xe.length;He++)c(Xe[He],!Ke)}}function c(Xe,Ke){for(var He=0,Je=0,lt=Xe.length,ot=lt-1;Je<lt;ot=Je++)He+=(Xe[Je][0]-Xe[ot][0])*(Xe[ot][1]+Xe[Je][1]);He>=0!=!!Ke&&Xe.reverse()}var b=i.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(Xe){this._feature=Xe,this.extent=i.EXTENT,this.type=Xe.type,this.properties=Xe.tags,"id"in Xe&&!isNaN(Xe.id)&&(this.id=parseInt(Xe.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Xe=[],Ke=0,He=this._feature.geometry;Ke<He.length;Ke+=1){var Je=He[Ke];Xe.push([new i.Point$1(Je[0],Je[1])])}return Xe}for(var lt=[],ot=0,je=this._feature.geometry;ot<je.length;ot+=1){for(var Ue=[],at=0,$e=je[ot];at<$e.length;at+=1){var gt=$e[at];Ue.push(new i.Point$1(gt[0],gt[1]))}lt.push(Ue)}return lt},g.prototype.toGeoJSON=function(Xe,Ke,He){return b.call(this,Xe,Ke,He)};var d=function(Xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=Xe.length,this._features=Xe};d.prototype.feature=function(Xe){return new g(this._features[Xe])};var m=i.vectorTile.VectorTileFeature,x=y;function y(Xe,Ke){this.options=Ke||{},this.features=Xe,this.length=Xe.length}function k(Xe,Ke){this.id=typeof Xe.id=="number"?Xe.id:void 0,this.type=Xe.type,this.rawGeometry=Xe.type===1?[Xe.geometry]:Xe.geometry,this.properties=Xe.tags,this.extent=Ke||4096}y.prototype.feature=function(Xe){return new k(this.features[Xe],this.options.extent)},k.prototype.loadGeometry=function(){var Xe=this.rawGeometry;this.geometry=[];for(var Ke=0;Ke<Xe.length;Ke++){for(var He=Xe[Ke],Je=[],lt=0;lt<He.length;lt++)Je.push(new i.Point$1(He[lt][0],He[lt][1]));this.geometry.push(Je)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Xe=this.geometry,Ke=1/0,He=-1/0,Je=1/0,lt=-1/0,ot=0;ot<Xe.length;ot++)for(var je=Xe[ot],Ue=0;Ue<je.length;Ue++){var at=je[Ue];Ke=Math.min(Ke,at.x),He=Math.max(He,at.x),Je=Math.min(Je,at.y),lt=Math.max(lt,at.y)}return[Ke,Je,He,lt]},k.prototype.toGeoJSON=m.prototype.toGeoJSON;var f=O,S=O,M=function(Xe,Ke){Ke=Ke||{};var He={};for(var Je in Xe)He[Je]=new x(Xe[Je].features,Ke),He[Je].name=Je,He[Je].version=Ke.version,He[Je].extent=Ke.extent;return O({layers:He})},E=x;function O(Xe){var Ke=new i.pbf;return function(He,Je){for(var lt in He.layers)Je.writeMessage(3,P,He.layers[lt])}(Xe,Ke),Ke.finish()}function P(Xe,Ke){var He;Ke.writeVarintField(15,Xe.version||1),Ke.writeStringField(1,Xe.name||""),Ke.writeVarintField(5,Xe.extent||4096);var Je={keys:[],values:[],keycache:{},valuecache:{}};for(He=0;He<Xe.length;He++)Je.feature=Xe.feature(He),Ke.writeMessage(2,I,Je);var lt=Je.keys;for(He=0;He<lt.length;He++)Ke.writeStringField(3,lt[He]);var ot=Je.values;for(He=0;He<ot.length;He++)Ke.writeMessage(4,Z,ot[He])}function I(Xe,Ke){var He=Xe.feature;He.id!==void 0&&Ke.writeVarintField(1,He.id),Ke.writeMessage(2,z,Xe),Ke.writeVarintField(3,He.type),Ke.writeMessage(4,j,He)}function z(Xe,Ke){var He=Xe.feature,Je=Xe.keys,lt=Xe.values,ot=Xe.keycache,je=Xe.valuecache;for(var Ue in He.properties){var at=ot[Ue];at===void 0&&(Je.push(Ue),at=Je.length-1,ot[Ue]=at),Ke.writeVarint(at);var $e=He.properties[Ue],gt=typeof $e;gt!=="string"&&gt!=="boolean"&&gt!=="number"&&($e=JSON.stringify($e));var yt=gt+":"+$e,xt=je[yt];xt===void 0&&(lt.push($e),xt=lt.length-1,je[yt]=xt),Ke.writeVarint(xt)}}function U(Xe,Ke){return(Ke<<3)+(7&Xe)}function R(Xe){return Xe<<1^Xe>>31}function j(Xe,Ke){for(var He=Xe.loadGeometry(),Je=Xe.type,lt=0,ot=0,je=He.length,Ue=0;Ue<je;Ue++){var at=He[Ue],$e=1;Je===1&&($e=at.length),Ke.writeVarint(U(1,$e));for(var gt=Je===3?at.length-1:at.length,yt=0;yt<gt;yt++){yt===1&&Je!==1&&Ke.writeVarint(U(2,gt-1));var xt=at[yt].x-lt,dt=at[yt].y-ot;Ke.writeVarint(R(xt)),Ke.writeVarint(R(dt)),lt+=xt,ot+=dt}Je===3&&Ke.writeVarint(U(7,1))}}function Z(Xe,Ke){var He=typeof Xe;He==="string"?Ke.writeStringField(1,Xe):He==="boolean"?Ke.writeBooleanField(7,Xe):He==="number"&&(Xe%1!=0?Ke.writeDoubleField(3,Xe):Xe<0?Ke.writeSVarintField(6,Xe):Ke.writeVarintField(5,Xe))}function F(Xe,Ke,He,Je,lt,ot){if(!(lt-Je<=He)){var je=Je+lt>>1;V(Xe,Ke,je,Je,lt,ot%2),F(Xe,Ke,He,Je,je-1,ot+1),F(Xe,Ke,He,je+1,lt,ot+1)}}function V(Xe,Ke,He,Je,lt,ot){for(;lt>Je;){if(lt-Je>600){var je=lt-Je+1,Ue=He-Je+1,at=Math.log(je),$e=.5*Math.exp(2*at/3),gt=.5*Math.sqrt(at*$e*(je-$e)/je)*(Ue-je/2<0?-1:1);V(Xe,Ke,He,Math.max(Je,Math.floor(He-Ue*$e/je+gt)),Math.min(lt,Math.floor(He+(je-Ue)*$e/je+gt)),ot)}var yt=Ke[2*He+ot],xt=Je,dt=lt;for(H(Xe,Ke,Je,He),Ke[2*lt+ot]>yt&&H(Xe,Ke,Je,lt);xt<dt;){for(H(Xe,Ke,xt,dt),xt++,dt--;Ke[2*xt+ot]<yt;)xt++;for(;Ke[2*dt+ot]>yt;)dt--}Ke[2*Je+ot]===yt?H(Xe,Ke,Je,dt):H(Xe,Ke,++dt,lt),dt<=He&&(Je=dt+1),He<=dt&&(lt=dt-1)}}function H(Xe,Ke,He,Je){te(Xe,He,Je),te(Ke,2*He,2*Je),te(Ke,2*He+1,2*Je+1)}function te(Xe,Ke,He){var Je=Xe[Ke];Xe[Ke]=Xe[He],Xe[He]=Je}function $(Xe,Ke,He,Je){var lt=Xe-He,ot=Ke-Je;return lt*lt+ot*ot}f.fromVectorTileJs=S,f.fromGeojsonVt=M,f.GeoJSONWrapper=E;var J=function(Xe){return Xe[0]},X=function(Xe){return Xe[1]},K=function(Xe,Ke,He,Je,lt){Ke===void 0&&(Ke=J),He===void 0&&(He=X),Je===void 0&&(Je=64),lt===void 0&&(lt=Float64Array),this.nodeSize=Je,this.points=Xe;for(var ot=Xe.length<65536?Uint16Array:Uint32Array,je=this.ids=new ot(Xe.length),Ue=this.coords=new lt(2*Xe.length),at=0;at<Xe.length;at++)je[at]=at,Ue[2*at]=Ke(Xe[at]),Ue[2*at+1]=He(Xe[at]);F(je,Ue,Je,0,je.length-1,0)};K.prototype.range=function(Xe,Ke,He,Je){return function(lt,ot,je,Ue,at,$e,gt){for(var yt,xt,dt=[0,lt.length-1,0],Lt=[];dt.length;){var Tt=dt.pop(),bt=dt.pop(),Ct=dt.pop();if(bt-Ct<=gt)for(var Dt=Ct;Dt<=bt;Dt++)yt=ot[2*Dt],xt=ot[2*Dt+1],yt>=je&&yt<=at&&xt>=Ue&&xt<=$e&&Lt.push(lt[Dt]);else{var Bt=Math.floor((Ct+bt)/2);yt=ot[2*Bt],xt=ot[2*Bt+1],yt>=je&&yt<=at&&xt>=Ue&&xt<=$e&&Lt.push(lt[Bt]);var Xt=(Tt+1)%2;(Tt===0?je<=yt:Ue<=xt)&&(dt.push(Ct),dt.push(Bt-1),dt.push(Xt)),(Tt===0?at>=yt:$e>=xt)&&(dt.push(Bt+1),dt.push(bt),dt.push(Xt))}}return Lt}(this.ids,this.coords,Xe,Ke,He,Je,this.nodeSize)},K.prototype.within=function(Xe,Ke,He){return function(Je,lt,ot,je,Ue,at){for(var $e=[0,Je.length-1,0],gt=[],yt=Ue*Ue;$e.length;){var xt=$e.pop(),dt=$e.pop(),Lt=$e.pop();if(dt-Lt<=at)for(var Tt=Lt;Tt<=dt;Tt++)$(lt[2*Tt],lt[2*Tt+1],ot,je)<=yt&&gt.push(Je[Tt]);else{var bt=Math.floor((Lt+dt)/2),Ct=lt[2*bt],Dt=lt[2*bt+1];$(Ct,Dt,ot,je)<=yt&&gt.push(Je[bt]);var Bt=(xt+1)%2;(xt===0?ot-Ue<=Ct:je-Ue<=Dt)&&($e.push(Lt),$e.push(bt-1),$e.push(Bt)),(xt===0?ot+Ue>=Ct:je+Ue>=Dt)&&($e.push(bt+1),$e.push(dt),$e.push(Bt))}}return gt}(this.ids,this.coords,Xe,Ke,He,this.nodeSize)};var ee={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Xe){return Xe}},ie=function(Xe){this.options=_e(Object.create(ee),Xe),this.trees=new Array(this.options.maxZoom+1)};function ae(Xe,Ke,He,Je,lt){return{x:Xe,y:Ke,zoom:1/0,id:He,parentId:-1,numPoints:Je,properties:lt}}function oe(Xe,Ke){var He=Xe.geometry.coordinates,Je=He[0],lt=He[1];return{x:ve(Je),y:xe(lt),zoom:1/0,index:Ke,parentId:-1}}function fe(Xe){return{type:"Feature",id:Xe.id,properties:ge(Xe),geometry:{type:"Point",coordinates:[(Je=Xe.x,360*(Je-.5)),(Ke=Xe.y,He=(180-360*Ke)*Math.PI/180,360*Math.atan(Math.exp(He))/Math.PI-90)]}};var Ke,He,Je}function ge(Xe){var Ke=Xe.numPoints,He=Ke>=1e4?Math.round(Ke/1e3)+"k":Ke>=1e3?Math.round(Ke/100)/10+"k":Ke;return _e(_e({},Xe.properties),{cluster:!0,cluster_id:Xe.id,point_count:Ke,point_count_abbreviated:He})}function ve(Xe){return Xe/360+.5}function xe(Xe){var Ke=Math.sin(Xe*Math.PI/180),He=.5-.25*Math.log((1+Ke)/(1-Ke))/Math.PI;return He<0?0:He>1?1:He}function _e(Xe,Ke){for(var He in Ke)Xe[He]=Ke[He];return Xe}function ye(Xe){return Xe.x}function Ce(Xe){return Xe.y}function ke(Xe,Ke,He,Je){for(var lt,ot=Je,je=He-Ke>>1,Ue=He-Ke,at=Xe[Ke],$e=Xe[Ke+1],gt=Xe[He],yt=Xe[He+1],xt=Ke+3;xt<He;xt+=3){var dt=Te(Xe[xt],Xe[xt+1],at,$e,gt,yt);if(dt>ot)lt=xt,ot=dt;else if(dt===ot){var Lt=Math.abs(xt-je);Lt<Ue&&(lt=xt,Ue=Lt)}}ot>Je&&(lt-Ke>3&&ke(Xe,Ke,lt,Je),Xe[lt+2]=ot,He-lt>3&&ke(Xe,lt,He,Je))}function Te(Xe,Ke,He,Je,lt,ot){var je=lt-He,Ue=ot-Je;if(je!==0||Ue!==0){var at=((Xe-He)*je+(Ke-Je)*Ue)/(je*je+Ue*Ue);at>1?(He=lt,Je=ot):at>0&&(He+=je*at,Je+=Ue*at)}return(je=Xe-He)*je+(Ue=Ke-Je)*Ue}function le(Xe,Ke,He,Je){var lt={id:Xe===void 0?null:Xe,type:Ke,geometry:He,tags:Je,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ot){var je=ot.geometry,Ue=ot.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")ue(ot,je);else if(Ue==="Polygon"||Ue==="MultiLineString")for(var at=0;at<je.length;at++)ue(ot,je[at]);else if(Ue==="MultiPolygon")for(at=0;at<je.length;at++)for(var $e=0;$e<je[at].length;$e++)ue(ot,je[at][$e])}(lt),lt}function ue(Xe,Ke){for(var He=0;He<Ke.length;He+=3)Xe.minX=Math.min(Xe.minX,Ke[He]),Xe.minY=Math.min(Xe.minY,Ke[He+1]),Xe.maxX=Math.max(Xe.maxX,Ke[He]),Xe.maxY=Math.max(Xe.maxY,Ke[He+1])}function de(Xe,Ke,He,Je){if(Ke.geometry){var lt=Ke.geometry.coordinates,ot=Ke.geometry.type,je=Math.pow(He.tolerance/((1<<He.maxZoom)*He.extent),2),Ue=[],at=Ke.id;if(He.promoteId?at=Ke.properties[He.promoteId]:He.generateId&&(at=Je||0),ot==="Point")Le(lt,Ue);else if(ot==="MultiPoint")for(var $e=0;$e<lt.length;$e++)Le(lt[$e],Ue);else if(ot==="LineString")we(lt,Ue,je,!1);else if(ot==="MultiLineString"){if(He.lineMetrics){for($e=0;$e<lt.length;$e++)Ue=[],we(lt[$e],Ue,je,!1),Xe.push(le(at,"LineString",Ue,Ke.properties));return}Ee(lt,Ue,je,!1)}else if(ot==="Polygon")Ee(lt,Ue,je,!0);else{if(ot!=="MultiPolygon"){if(ot==="GeometryCollection"){for($e=0;$e<Ke.geometry.geometries.length;$e++)de(Xe,{id:at,geometry:Ke.geometry.geometries[$e],properties:Ke.properties},He,Je);return}throw new Error("Input data is not a valid GeoJSON object.")}for($e=0;$e<lt.length;$e++){var gt=[];Ee(lt[$e],gt,je,!0),Ue.push(gt)}}Xe.push(le(at,ot,Ue,Ke.properties))}}function Le(Xe,Ke){Ke.push(Oe(Xe[0])),Ke.push(Fe(Xe[1])),Ke.push(0)}function we(Xe,Ke,He,Je){for(var lt,ot,je=0,Ue=0;Ue<Xe.length;Ue++){var at=Oe(Xe[Ue][0]),$e=Fe(Xe[Ue][1]);Ke.push(at),Ke.push($e),Ke.push(0),Ue>0&&(je+=Je?(lt*$e-at*ot)/2:Math.sqrt(Math.pow(at-lt,2)+Math.pow($e-ot,2))),lt=at,ot=$e}var gt=Ke.length-3;Ke[2]=1,ke(Ke,0,gt,He),Ke[gt+2]=1,Ke.size=Math.abs(je),Ke.start=0,Ke.end=Ke.size}function Ee(Xe,Ke,He,Je){for(var lt=0;lt<Xe.length;lt++){var ot=[];we(Xe[lt],ot,He,Je),Ke.push(ot)}}function Oe(Xe){return Xe/360+.5}function Fe(Xe){var Ke=Math.sin(Xe*Math.PI/180),He=.5-.25*Math.log((1+Ke)/(1-Ke))/Math.PI;return He<0?0:He>1?1:He}function pe(Xe,Ke,He,Je,lt,ot,je,Ue){if(Je/=Ke,ot>=(He/=Ke)&&je<Je)return Xe;if(je<He||ot>=Je)return null;for(var at=[],$e=0;$e<Xe.length;$e++){var gt=Xe[$e],yt=gt.geometry,xt=gt.type,dt=lt===0?gt.minX:gt.minY,Lt=lt===0?gt.maxX:gt.maxY;if(dt>=He&&Lt<Je)at.push(gt);else if(!(Lt<He||dt>=Je)){var Tt=[];if(xt==="Point"||xt==="MultiPoint")be(yt,Tt,He,Je,lt);else if(xt==="LineString")Me(yt,Tt,He,Je,lt,!1,Ue.lineMetrics);else if(xt==="MultiLineString")Ne(yt,Tt,He,Je,lt,!1);else if(xt==="Polygon")Ne(yt,Tt,He,Je,lt,!0);else if(xt==="MultiPolygon")for(var bt=0;bt<yt.length;bt++){var Ct=[];Ne(yt[bt],Ct,He,Je,lt,!0),Ct.length&&Tt.push(Ct)}if(Tt.length){if(Ue.lineMetrics&&xt==="LineString"){for(bt=0;bt<Tt.length;bt++)at.push(le(gt.id,xt,Tt[bt],gt.tags));continue}xt!=="LineString"&&xt!=="MultiLineString"||(Tt.length===1?(xt="LineString",Tt=Tt[0]):xt="MultiLineString"),xt!=="Point"&&xt!=="MultiPoint"||(xt=Tt.length===3?"Point":"MultiPoint"),at.push(le(gt.id,xt,Tt,gt.tags))}}}return at.length?at:null}function be(Xe,Ke,He,Je,lt){for(var ot=0;ot<Xe.length;ot+=3){var je=Xe[ot+lt];je>=He&&je<=Je&&(Ke.push(Xe[ot]),Ke.push(Xe[ot+1]),Ke.push(Xe[ot+2]))}}function Me(Xe,Ke,He,Je,lt,ot,je){for(var Ue,at,$e=De(Xe),gt=lt===0?Ye:We,yt=Xe.start,xt=0;xt<Xe.length-3;xt+=3){var dt=Xe[xt],Lt=Xe[xt+1],Tt=Xe[xt+2],bt=Xe[xt+3],Ct=Xe[xt+4],Dt=lt===0?dt:Lt,Bt=lt===0?bt:Ct,Xt=!1;je&&(Ue=Math.sqrt(Math.pow(dt-bt,2)+Math.pow(Lt-Ct,2))),Dt<He?Bt>He&&(at=gt($e,dt,Lt,bt,Ct,He),je&&($e.start=yt+Ue*at)):Dt>Je?Bt<Je&&(at=gt($e,dt,Lt,bt,Ct,Je),je&&($e.start=yt+Ue*at)):Be($e,dt,Lt,Tt),Bt<He&&Dt>=He&&(at=gt($e,dt,Lt,bt,Ct,He),Xt=!0),Bt>Je&&Dt<=Je&&(at=gt($e,dt,Lt,bt,Ct,Je),Xt=!0),!ot&&Xt&&(je&&($e.end=yt+Ue*at),Ke.push($e),$e=De(Xe)),je&&(yt+=Ue)}var an=Xe.length-3;dt=Xe[an],Lt=Xe[an+1],Tt=Xe[an+2],(Dt=lt===0?dt:Lt)>=He&&Dt<=Je&&Be($e,dt,Lt,Tt),an=$e.length-3,ot&&an>=3&&($e[an]!==$e[0]||$e[an+1]!==$e[1])&&Be($e,$e[0],$e[1],$e[2]),$e.length&&Ke.push($e)}function De(Xe){var Ke=[];return Ke.size=Xe.size,Ke.start=Xe.start,Ke.end=Xe.end,Ke}function Ne(Xe,Ke,He,Je,lt,ot){for(var je=0;je<Xe.length;je++)Me(Xe[je],Ke,He,Je,lt,ot,!1)}function Be(Xe,Ke,He,Je){Xe.push(Ke),Xe.push(He),Xe.push(Je)}function Ye(Xe,Ke,He,Je,lt,ot){var je=(ot-Ke)/(Je-Ke);return Xe.push(ot),Xe.push(He+(lt-He)*je),Xe.push(1),je}function We(Xe,Ke,He,Je,lt,ot){var je=(ot-He)/(lt-He);return Xe.push(Ke+(Je-Ke)*je),Xe.push(ot),Xe.push(1),je}function et(Xe,Ke){for(var He=[],Je=0;Je<Xe.length;Je++){var lt,ot=Xe[Je],je=ot.type;if(je==="Point"||je==="MultiPoint"||je==="LineString")lt=ft(ot.geometry,Ke);else if(je==="MultiLineString"||je==="Polygon"){lt=[];for(var Ue=0;Ue<ot.geometry.length;Ue++)lt.push(ft(ot.geometry[Ue],Ke))}else if(je==="MultiPolygon")for(lt=[],Ue=0;Ue<ot.geometry.length;Ue++){for(var at=[],$e=0;$e<ot.geometry[Ue].length;$e++)at.push(ft(ot.geometry[Ue][$e],Ke));lt.push(at)}He.push(le(ot.id,je,lt,ot.tags))}return He}function ft(Xe,Ke){var He=[];He.size=Xe.size,Xe.start!==void 0&&(He.start=Xe.start,He.end=Xe.end);for(var Je=0;Je<Xe.length;Je+=3)He.push(Xe[Je]+Ke,Xe[Je+1],Xe[Je+2]);return He}function ht(Xe,Ke){if(Xe.transformed)return Xe;var He,Je,lt,ot=1<<Xe.z,je=Xe.x,Ue=Xe.y;for(He=0;He<Xe.features.length;He++){var at=Xe.features[He],$e=at.geometry,gt=at.type;if(at.geometry=[],gt===1)for(Je=0;Je<$e.length;Je+=2)at.geometry.push(mt($e[Je],$e[Je+1],Ke,ot,je,Ue));else for(Je=0;Je<$e.length;Je++){var yt=[];for(lt=0;lt<$e[Je].length;lt+=2)yt.push(mt($e[Je][lt],$e[Je][lt+1],Ke,ot,je,Ue));at.geometry.push(yt)}}return Xe.transformed=!0,Xe}function mt(Xe,Ke,He,Je,lt,ot){return[Math.round(He*(Xe*Je-lt)),Math.round(He*(Ke*Je-ot))]}function Mt(Xe,Ke,He,Je,lt){for(var ot=Ke===lt.maxZoom?0:lt.tolerance/((1<<Ke)*lt.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:He,y:Je,z:Ke,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ue=0;Ue<Xe.length;Ue++){je.numFeatures++,_t(je,Xe[Ue],ot,lt);var at=Xe[Ue].minX,$e=Xe[Ue].minY,gt=Xe[Ue].maxX,yt=Xe[Ue].maxY;at<je.minX&&(je.minX=at),$e<je.minY&&(je.minY=$e),gt>je.maxX&&(je.maxX=gt),yt>je.maxY&&(je.maxY=yt)}return je}function _t(Xe,Ke,He,Je){var lt=Ke.geometry,ot=Ke.type,je=[];if(ot==="Point"||ot==="MultiPoint")for(var Ue=0;Ue<lt.length;Ue+=3)je.push(lt[Ue]),je.push(lt[Ue+1]),Xe.numPoints++,Xe.numSimplified++;else if(ot==="LineString")it(je,lt,Xe,He,!1,!1);else if(ot==="MultiLineString"||ot==="Polygon")for(Ue=0;Ue<lt.length;Ue++)it(je,lt[Ue],Xe,He,ot==="Polygon",Ue===0);else if(ot==="MultiPolygon")for(var at=0;at<lt.length;at++){var $e=lt[at];for(Ue=0;Ue<$e.length;Ue++)it(je,$e[Ue],Xe,He,!0,Ue===0)}if(je.length){var gt=Ke.tags||null;if(ot==="LineString"&&Je.lineMetrics){for(var yt in gt={},Ke.tags)gt[yt]=Ke.tags[yt];gt.mapbox_clip_start=lt.start/lt.size,gt.mapbox_clip_end=lt.end/lt.size}var xt={geometry:je,type:ot==="Polygon"||ot==="MultiPolygon"?3:ot==="LineString"||ot==="MultiLineString"?2:1,tags:gt};Ke.id!==null&&(xt.id=Ke.id),Xe.features.push(xt)}}function it(Xe,Ke,He,Je,lt,ot){var je=Je*Je;if(Je>0&&Ke.size<(lt?je:Je))He.numPoints+=Ke.length/3;else{for(var Ue=[],at=0;at<Ke.length;at+=3)(Je===0||Ke[at+2]>je)&&(He.numSimplified++,Ue.push(Ke[at]),Ue.push(Ke[at+1])),He.numPoints++;lt&&function($e,gt){for(var yt=0,xt=0,dt=$e.length,Lt=dt-2;xt<dt;Lt=xt,xt+=2)yt+=($e[xt]-$e[Lt])*($e[xt+1]+$e[Lt+1]);if(yt>0===gt)for(xt=0,dt=$e.length;xt<dt/2;xt+=2){var Tt=$e[xt],bt=$e[xt+1];$e[xt]=$e[dt-2-xt],$e[xt+1]=$e[dt-1-xt],$e[dt-2-xt]=Tt,$e[dt-1-xt]=bt}}(Ue,ot),Xe.push(Ue)}}function st(Xe,Ke){var He=(Ke=this.options=function(lt,ot){for(var je in ot)lt[je]=ot[je];return lt}(Object.create(this.options),Ke)).debug;if(He&&console.time("preprocess data"),Ke.maxZoom<0||Ke.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ke.promoteId&&Ke.generateId)throw new Error("promoteId and generateId cannot be used together.");var Je=function(lt,ot){var je=[];if(lt.type==="FeatureCollection")for(var Ue=0;Ue<lt.features.length;Ue++)de(je,lt.features[Ue],ot,Ue);else lt.type==="Feature"?de(je,lt,ot):de(je,{geometry:lt},ot);return je}(Xe,Ke);this.tiles={},this.tileCoords=[],He&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ke.indexMaxZoom,Ke.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Je=function(lt,ot){var je=ot.buffer/ot.extent,Ue=lt,at=pe(lt,1,-1-je,je,0,-1,2,ot),$e=pe(lt,1,1-je,2+je,0,-1,2,ot);return(at||$e)&&(Ue=pe(lt,1,-je,1+je,0,-1,2,ot)||[],at&&(Ue=et(at,1).concat(Ue)),$e&&(Ue=Ue.concat(et($e,-1)))),Ue}(Je,Ke)).length&&this.splitTile(Je,0,0,0),He&&(Je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function St(Xe,Ke,He){return 32*((1<<Xe)*He+Ke)+Xe}function zt(Xe,Ke){var He=Xe.tileID.canonical;if(!this._geoJSONIndex)return Ke(null,null);var Je=this._geoJSONIndex.getTile(He.z,He.x,He.y);if(!Je)return Ke(null,null);var lt=new d(Je.features),ot=f(lt);ot.byteOffset===0&&ot.byteLength===ot.buffer.byteLength||(ot=new Uint8Array(ot)),Ke(null,{vectorTile:lt,rawData:ot.buffer})}ie.prototype.load=function(Xe){var Ke=this.options,He=Ke.log,Je=Ke.minZoom,lt=Ke.maxZoom,ot=Ke.nodeSize;He&&console.time("total time");var je="prepare "+Xe.length+" points";He&&console.time(je),this.points=Xe;for(var Ue=[],at=0;at<Xe.length;at++)Xe[at].geometry&&Ue.push(oe(Xe[at],at));this.trees[lt+1]=new K(Ue,ye,Ce,ot,Float32Array),He&&console.timeEnd(je);for(var $e=lt;$e>=Je;$e--){var gt=+Date.now();Ue=this._cluster(Ue,$e),this.trees[$e]=new K(Ue,ye,Ce,ot,Float32Array),He&&console.log("z%d: %d clusters in %dms",$e,Ue.length,+Date.now()-gt)}return He&&console.timeEnd("total time"),this},ie.prototype.getClusters=function(Xe,Ke){var He=((Xe[0]+180)%360+360)%360-180,Je=Math.max(-90,Math.min(90,Xe[1])),lt=Xe[2]===180?180:((Xe[2]+180)%360+360)%360-180,ot=Math.max(-90,Math.min(90,Xe[3]));if(Xe[2]-Xe[0]>=360)He=-180,lt=180;else if(He>lt){var je=this.getClusters([He,Je,180,ot],Ke),Ue=this.getClusters([-180,Je,lt,ot],Ke);return je.concat(Ue)}for(var at=this.trees[this._limitZoom(Ke)],$e=[],gt=0,yt=at.range(ve(He),xe(ot),ve(lt),xe(Je));gt<yt.length;gt+=1){var xt=yt[gt],dt=at.points[xt];$e.push(dt.numPoints?fe(dt):this.points[dt.index])}return $e},ie.prototype.getChildren=function(Xe){var Ke=this._getOriginId(Xe),He=this._getOriginZoom(Xe),Je="No cluster with the specified id.",lt=this.trees[He];if(!lt)throw new Error(Je);var ot=lt.points[Ke];if(!ot)throw new Error(Je);for(var je=this.options.radius/(this.options.extent*Math.pow(2,He-1)),Ue=[],at=0,$e=lt.within(ot.x,ot.y,je);at<$e.length;at+=1){var gt=$e[at],yt=lt.points[gt];yt.parentId===Xe&&Ue.push(yt.numPoints?fe(yt):this.points[yt.index])}if(Ue.length===0)throw new Error(Je);return Ue},ie.prototype.getLeaves=function(Xe,Ke,He){Ke=Ke||10,He=He||0;var Je=[];return this._appendLeaves(Je,Xe,Ke,He,0),Je},ie.prototype.getTile=function(Xe,Ke,He){var Je=this.trees[this._limitZoom(Xe)],lt=Math.pow(2,Xe),ot=this.options,je=ot.extent,Ue=ot.radius/je,at=(He-Ue)/lt,$e=(He+1+Ue)/lt,gt={features:[]};return this._addTileFeatures(Je.range((Ke-Ue)/lt,at,(Ke+1+Ue)/lt,$e),Je.points,Ke,He,lt,gt),Ke===0&&this._addTileFeatures(Je.range(1-Ue/lt,at,1,$e),Je.points,lt,He,lt,gt),Ke===lt-1&&this._addTileFeatures(Je.range(0,at,Ue/lt,$e),Je.points,-1,He,lt,gt),gt.features.length?gt:null},ie.prototype.getClusterExpansionZoom=function(Xe){for(var Ke=this._getOriginZoom(Xe)-1;Ke<=this.options.maxZoom;){var He=this.getChildren(Xe);if(Ke++,He.length!==1)break;Xe=He[0].properties.cluster_id}return Ke},ie.prototype._appendLeaves=function(Xe,Ke,He,Je,lt){for(var ot=0,je=this.getChildren(Ke);ot<je.length;ot+=1){var Ue=je[ot],at=Ue.properties;if(at&&at.cluster?lt+at.point_count<=Je?lt+=at.point_count:lt=this._appendLeaves(Xe,at.cluster_id,He,Je,lt):lt<Je?lt++:Xe.push(Ue),Xe.length===He)break}return lt},ie.prototype._addTileFeatures=function(Xe,Ke,He,Je,lt,ot){for(var je=0,Ue=Xe;je<Ue.length;je+=1){var at=Ke[Ue[je]],$e=at.numPoints,gt={type:1,geometry:[[Math.round(this.options.extent*(at.x*lt-He)),Math.round(this.options.extent*(at.y*lt-Je))]],tags:$e?ge(at):this.points[at.index].properties},yt=void 0;$e?yt=at.id:this.options.generateId?yt=at.index:this.points[at.index].id&&(yt=this.points[at.index].id),yt!==void 0&&(gt.id=yt),ot.features.push(gt)}},ie.prototype._limitZoom=function(Xe){return Math.max(this.options.minZoom,Math.min(+Xe,this.options.maxZoom+1))},ie.prototype._cluster=function(Xe,Ke){for(var He=[],Je=this.options,lt=Je.radius,ot=Je.extent,je=Je.reduce,Ue=Je.minPoints,at=lt/(ot*Math.pow(2,Ke)),$e=0;$e<Xe.length;$e++){var gt=Xe[$e];if(!(gt.zoom<=Ke)){gt.zoom=Ke;for(var yt=this.trees[Ke+1],xt=yt.within(gt.x,gt.y,at),dt=gt.numPoints||1,Lt=dt,Tt=0,bt=xt;Tt<bt.length;Tt+=1){var Ct=bt[Tt],Dt=yt.points[Ct];Dt.zoom>Ke&&(Lt+=Dt.numPoints||1)}if(Lt>=Ue){for(var Bt=gt.x*dt,Xt=gt.y*dt,an=je&&dt>1?this._map(gt,!0):null,Wt=($e<<5)+(Ke+1)+this.points.length,Vt=0,on=xt;Vt<on.length;Vt+=1){var Sn=on[Vt],Ln=yt.points[Sn];if(!(Ln.zoom<=Ke)){Ln.zoom=Ke;var fn=Ln.numPoints||1;Bt+=Ln.x*fn,Xt+=Ln.y*fn,Ln.parentId=Wt,je&&(an||(an=this._map(gt,!0)),je(an,this._map(Ln)))}}gt.parentId=Wt,He.push(ae(Bt/Lt,Xt/Lt,Wt,Lt,an))}else if(He.push(gt),Lt>1)for(var Zt=0,ln=xt;Zt<ln.length;Zt+=1){var nn=ln[Zt],cn=yt.points[nn];cn.zoom<=Ke||(cn.zoom=Ke,He.push(cn))}}}return He},ie.prototype._getOriginId=function(Xe){return Xe-this.points.length>>5},ie.prototype._getOriginZoom=function(Xe){return(Xe-this.points.length)%32},ie.prototype._map=function(Xe,Ke){if(Xe.numPoints)return Ke?_e({},Xe.properties):Xe.properties;var He=this.points[Xe.index].properties,Je=this.options.map(He);return Ke&&Je===He?_e({},Je):Je},st.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},st.prototype.splitTile=function(Xe,Ke,He,Je,lt,ot,je){for(var Ue=[Xe,Ke,He,Je],at=this.options,$e=at.debug;Ue.length;){Je=Ue.pop(),He=Ue.pop(),Ke=Ue.pop(),Xe=Ue.pop();var gt=1<<Ke,yt=St(Ke,He,Je),xt=this.tiles[yt];if(!xt&&($e>1&&console.time("creation"),xt=this.tiles[yt]=Mt(Xe,Ke,He,Je,at),this.tileCoords.push({z:Ke,x:He,y:Je}),$e)){$e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ke,He,Je,xt.numFeatures,xt.numPoints,xt.numSimplified),console.timeEnd("creation"));var dt="z"+Ke;this.stats[dt]=(this.stats[dt]||0)+1,this.total++}if(xt.source=Xe,lt){if(Ke===at.maxZoom||Ke===lt)continue;var Lt=1<<lt-Ke;if(He!==Math.floor(ot/Lt)||Je!==Math.floor(je/Lt))continue}else if(Ke===at.indexMaxZoom||xt.numPoints<=at.indexMaxPoints)continue;if(xt.source=null,Xe.length!==0){$e>1&&console.time("clipping");var Tt,bt,Ct,Dt,Bt,Xt,an=.5*at.buffer/at.extent,Wt=.5-an,Vt=.5+an,on=1+an;Tt=bt=Ct=Dt=null,Bt=pe(Xe,gt,He-an,He+Vt,0,xt.minX,xt.maxX,at),Xt=pe(Xe,gt,He+Wt,He+on,0,xt.minX,xt.maxX,at),Xe=null,Bt&&(Tt=pe(Bt,gt,Je-an,Je+Vt,1,xt.minY,xt.maxY,at),bt=pe(Bt,gt,Je+Wt,Je+on,1,xt.minY,xt.maxY,at),Bt=null),Xt&&(Ct=pe(Xt,gt,Je-an,Je+Vt,1,xt.minY,xt.maxY,at),Dt=pe(Xt,gt,Je+Wt,Je+on,1,xt.minY,xt.maxY,at),Xt=null),$e>1&&console.timeEnd("clipping"),Ue.push(Tt||[],Ke+1,2*He,2*Je),Ue.push(bt||[],Ke+1,2*He,2*Je+1),Ue.push(Ct||[],Ke+1,2*He+1,2*Je),Ue.push(Dt||[],Ke+1,2*He+1,2*Je+1)}}},st.prototype.getTile=function(Xe,Ke,He){var Je=this.options,lt=Je.extent,ot=Je.debug;if(Xe<0||Xe>24)return null;var je=1<<Xe,Ue=St(Xe,Ke=(Ke%je+je)%je,He);if(this.tiles[Ue])return ht(this.tiles[Ue],lt);ot>1&&console.log("drilling down to z%d-%d-%d",Xe,Ke,He);for(var at,$e=Xe,gt=Ke,yt=He;!at&&$e>0;)$e--,gt=Math.floor(gt/2),yt=Math.floor(yt/2),at=this.tiles[St($e,gt,yt)];return at&&at.source?(ot>1&&console.log("found parent tile z%d-%d-%d",$e,gt,yt),ot>1&&console.time("drilling down"),this.splitTile(at.source,$e,gt,yt,Xe,Ke,He),ot>1&&console.timeEnd("drilling down"),this.tiles[Ue]?ht(this.tiles[Ue],lt):null):null};var Ft=function(Xe){function Ke(He,Je,lt,ot){Xe.call(this,He,Je,lt,zt),ot&&(this.loadGeoJSON=ot)}return Xe&&(Ke.__proto__=Xe),Ke.prototype=Object.create(Xe&&Xe.prototype),Ke.prototype.constructor=Ke,Ke.prototype.loadData=function(He,Je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Je,this._pendingLoadDataParams=He,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ke.prototype._loadData=function(){var He=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Je=this._pendingCallback,lt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ot=!!(lt&&lt.request&&lt.request.collectResourceTiming)&&new i.RequestPerformance(lt.request);this.loadGeoJSON(lt,function(je,Ue){if(je||!Ue)return Je(je);if(typeof Ue!="object")return Je(new Error("Input data given to '"+lt.source+"' is not a valid GeoJSON object."));u(Ue,!0);try{if(lt.filter){var at=i.createExpression(lt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(at.result==="error")throw new Error(at.value.map(function(xt){return xt.key+": "+xt.message}).join(", "));var $e=Ue.features.filter(function(xt){return at.value.evaluate({zoom:0},xt)});Ue={type:"FeatureCollection",features:$e}}He._geoJSONIndex=lt.cluster?new ie(function(xt){var dt=xt.superclusterOptions,Lt=xt.clusterProperties;if(!Lt||!dt)return dt;for(var Tt={},bt={},Ct={accumulated:null,zoom:0},Dt={properties:null},Bt=Object.keys(Lt),Xt=0,an=Bt;Xt<an.length;Xt+=1){var Wt=an[Xt],Vt=Lt[Wt],on=Vt[0],Sn=Vt[1],Ln=i.createExpression(Sn),fn=i.createExpression(typeof on=="string"?[on,["accumulated"],["get",Wt]]:on);Tt[Wt]=Ln.value,bt[Wt]=fn.value}return dt.map=function(Zt){Dt.properties=Zt;for(var ln={},nn=0,cn=Bt;nn<cn.length;nn+=1){var kn=cn[nn];ln[kn]=Tt[kn].evaluate(Ct,Dt)}return ln},dt.reduce=function(Zt,ln){Dt.properties=ln;for(var nn=0,cn=Bt;nn<cn.length;nn+=1){var kn=cn[nn];Ct.accumulated=Zt[kn],Zt[kn]=bt[kn].evaluate(Ct,Dt)}},dt}(lt)).load(Ue.features):function(xt,dt){return new st(xt,dt)}(Ue,lt.geojsonVtOptions)}catch(xt){return Je(xt)}He.loaded={};var gt={};if(ot){var yt=ot.finish();yt&&(gt.resourceTiming={},gt.resourceTiming[lt.source]=JSON.parse(JSON.stringify(yt)))}Je(null,gt)})}},Ke.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ke.prototype.reloadTile=function(He,Je){var lt=this.loaded,ot=He.uid;return lt&&lt[ot]?Xe.prototype.reloadTile.call(this,He,Je):this.loadTile(He,Je)},Ke.prototype.loadGeoJSON=function(He,Je){if(He.request)i.getJSON(He.request,Je);else{if(typeof He.data!="string")return Je(new Error("Input data given to '"+He.source+"' is not a valid GeoJSON object."));try{return Je(null,JSON.parse(He.data))}catch{return Je(new Error("Input data given to '"+He.source+"' is not a valid GeoJSON object."))}}},Ke.prototype.removeSource=function(He,Je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Je()},Ke.prototype.getClusterExpansionZoom=function(He,Je){try{Je(null,this._geoJSONIndex.getClusterExpansionZoom(He.clusterId))}catch(lt){Je(lt)}},Ke.prototype.getClusterChildren=function(He,Je){try{Je(null,this._geoJSONIndex.getChildren(He.clusterId))}catch(lt){Je(lt)}},Ke.prototype.getClusterLeaves=function(He,Je){try{Je(null,this._geoJSONIndex.getLeaves(He.clusterId,He.limit,He.offset))}catch(lt){Je(lt)}},Ke}(r),Pt=function(Xe){var Ke=this;this.self=Xe,this.actor=new i.Actor(Xe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:r,geojson:Ft},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(He,Je){if(Ke.workerSourceTypes[He])throw new Error('Worker source with name "'+He+'" already registered.');Ke.workerSourceTypes[He]=Je},this.self.registerRTLTextPlugin=function(He){if(i.plugin.isParsed())throw new Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=He.applyArabicShaping,i.plugin.processBidirectionalText=He.processBidirectionalText,i.plugin.processStyledBidirectionalText=He.processStyledBidirectionalText}};return Pt.prototype.setReferrer=function(Xe,Ke){this.referrer=Ke},Pt.prototype.setImages=function(Xe,Ke,He){for(var Je in this.availableImages[Xe]=Ke,this.workerSources[Xe]){var lt=this.workerSources[Xe][Je];for(var ot in lt)lt[ot].availableImages=Ke}He()},Pt.prototype.setLayers=function(Xe,Ke,He){this.getLayerIndex(Xe).replace(Ke),He()},Pt.prototype.updateLayers=function(Xe,Ke,He){this.getLayerIndex(Xe).update(Ke.layers,Ke.removedIds),He()},Pt.prototype.loadTile=function(Xe,Ke,He){this.getWorkerSource(Xe,Ke.type,Ke.source).loadTile(Ke,He)},Pt.prototype.loadDEMTile=function(Xe,Ke,He){this.getDEMWorkerSource(Xe,Ke.source).loadTile(Ke,He)},Pt.prototype.reloadTile=function(Xe,Ke,He){this.getWorkerSource(Xe,Ke.type,Ke.source).reloadTile(Ke,He)},Pt.prototype.abortTile=function(Xe,Ke,He){this.getWorkerSource(Xe,Ke.type,Ke.source).abortTile(Ke,He)},Pt.prototype.removeTile=function(Xe,Ke,He){this.getWorkerSource(Xe,Ke.type,Ke.source).removeTile(Ke,He)},Pt.prototype.removeDEMTile=function(Xe,Ke){this.getDEMWorkerSource(Xe,Ke.source).removeTile(Ke)},Pt.prototype.removeSource=function(Xe,Ke,He){if(this.workerSources[Xe]&&this.workerSources[Xe][Ke.type]&&this.workerSources[Xe][Ke.type][Ke.source]){var Je=this.workerSources[Xe][Ke.type][Ke.source];delete this.workerSources[Xe][Ke.type][Ke.source],Je.removeSource!==void 0?Je.removeSource(Ke,He):He()}},Pt.prototype.loadWorkerSource=function(Xe,Ke,He){try{this.self.importScripts(Ke.url),He()}catch(Je){He(Je.toString())}},Pt.prototype.syncRTLPluginState=function(Xe,Ke,He){try{i.plugin.setState(Ke);var Je=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&Je!=null){this.self.importScripts(Je);var lt=i.plugin.isParsed();He(lt?void 0:new Error("RTL Text Plugin failed to import scripts from "+Je),lt)}}catch(ot){He(ot.toString())}},Pt.prototype.getAvailableImages=function(Xe){var Ke=this.availableImages[Xe];return Ke||(Ke=[]),Ke},Pt.prototype.getLayerIndex=function(Xe){var Ke=this.layerIndexes[Xe];return Ke||(Ke=this.layerIndexes[Xe]=new h),Ke},Pt.prototype.getWorkerSource=function(Xe,Ke,He){var Je=this;if(this.workerSources[Xe]||(this.workerSources[Xe]={}),this.workerSources[Xe][Ke]||(this.workerSources[Xe][Ke]={}),!this.workerSources[Xe][Ke][He]){var lt={send:function(ot,je,Ue){Je.actor.send(ot,je,Ue,Xe)}};this.workerSources[Xe][Ke][He]=new this.workerSourceTypes[Ke](lt,this.getLayerIndex(Xe),this.getAvailableImages(Xe))}return this.workerSources[Xe][Ke][He]},Pt.prototype.getDEMWorkerSource=function(Xe,Ke){return this.demWorkerSources[Xe]||(this.demWorkerSources[Xe]={}),this.demWorkerSources[Xe][Ke]||(this.demWorkerSources[Xe][Ke]=new o),this.demWorkerSources[Xe][Ke]},Pt.prototype.enforceCacheSizeLimit=function(Xe,Ke){i.enforceCacheSizeLimit(Ke)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Pt(self)),Pt}),w(0,function(i){var _=i.createCommonjsModule(function(B){function G(q){return!Y(q)}function Y(q){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ne,he,me=new Blob([""],{type:"text/javascript"}),Pe=URL.createObjectURL(me);try{he=new Worker(Pe),ne=!0}catch{ne=!1}return he&&he.terminate(),URL.revokeObjectURL(Pe),ne}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ne=document.createElement("canvas");ne.width=ne.height=1;var he=ne.getContext("2d");if(!he)return!1;var me=he.getImageData(0,0,1,1);return me&&me.width===ne.width}()?(Q=q&&q.failIfMajorPerformanceCaveat,C[Q]===void 0&&(C[Q]=function(ne){var he=function(Pe){var ze=document.createElement("canvas"),qe=Object.create(G.webGLContextAttributes);return qe.failIfMajorPerformanceCaveat=Pe,ze.probablySupportsContext?ze.probablySupportsContext("webgl",qe)||ze.probablySupportsContext("experimental-webgl",qe):ze.supportsContext?ze.supportsContext("webgl",qe)||ze.supportsContext("experimental-webgl",qe):ze.getContext("webgl",qe)||ze.getContext("experimental-webgl",qe)}(ne);if(!he)return!1;var me=he.createShader(he.VERTEX_SHADER);return!(!me||he.isContextLost())&&(he.shaderSource(me,"void main() {}"),he.compileShader(me),he.getShaderParameter(me,he.COMPILE_STATUS)===!0)}(Q)),C[Q]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Q}B.exports?B.exports=G:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=G,window.mapboxgl.notSupportedReason=Y);var C={};G.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),v={create:function(B,G,Y){var C=i.window.document.createElement(B);return G!==void 0&&(C.className=G),Y&&Y.appendChild(C),C},createNS:function(B,G){return i.window.document.createElementNS(B,G)}},h=i.window.document&&i.window.document.documentElement.style;function s(B){if(!h)return B[0];for(var G=0;G<B.length;G++)if(B[G]in h)return B[G];return B[0]}var t,a=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);v.disableDrag=function(){h&&a&&(t=h[a],h[a]="none")},v.enableDrag=function(){h&&a&&(h[a]=t)};var n=s(["transform","WebkitTransform"]);v.setTransform=function(B,G){B.style[n]=G};var r=!1;try{var l=Object.defineProperty({},"passive",{get:function(){r=!0}});i.window.addEventListener("test",l,l),i.window.removeEventListener("test",l,l)}catch{r=!1}v.addEventListener=function(B,G,Y,C){C===void 0&&(C={}),"passive"in C&&r?B.addEventListener(G,Y,C):B.addEventListener(G,Y,C.capture)},v.removeEventListener=function(B,G,Y,C){C===void 0&&(C={}),"passive"in C&&r?B.removeEventListener(G,Y,C):B.removeEventListener(G,Y,C.capture)};var o=function(B){B.preventDefault(),B.stopPropagation(),i.window.removeEventListener("click",o,!0)};function u(B){var G=B.userImage;return!!(G&&G.render&&G.render())&&(B.data.replace(new Uint8Array(G.data.buffer)),!0)}v.suppressClick=function(){i.window.addEventListener("click",o,!0),i.window.setTimeout(function(){i.window.removeEventListener("click",o,!0)},0)},v.mousePos=function(B,G){var Y=B.getBoundingClientRect();return new i.Point(G.clientX-Y.left-B.clientLeft,G.clientY-Y.top-B.clientTop)},v.touchPos=function(B,G){for(var Y=B.getBoundingClientRect(),C=[],q=0;q<G.length;q++)C.push(new i.Point(G[q].clientX-Y.left-B.clientLeft,G[q].clientY-Y.top-B.clientTop));return C},v.mouseButton=function(B){return i.window.InstallTrigger!==void 0&&B.button===2&&B.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:B.button},v.remove=function(B){B.parentNode&&B.parentNode.removeChild(B)};var p=function(B){function G(){B.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.isLoaded=function(){return this.loaded},G.prototype.setLoaded=function(Y){if(this.loaded!==Y&&(this.loaded=Y,Y)){for(var C=0,q=this.requestors;C<q.length;C+=1){var Q=q[C],ne=Q.ids,he=Q.callback;this._notify(ne,he)}this.requestors=[]}},G.prototype.getImage=function(Y){return this.images[Y]},G.prototype.addImage=function(Y,C){this._validate(Y,C)&&(this.images[Y]=C)},G.prototype._validate=function(Y,C){var q=!0;return this._validateStretch(C.stretchX,C.data&&C.data.width)||(this.fire(new i.ErrorEvent(new Error('Image "'+Y+'" has invalid "stretchX" value'))),q=!1),this._validateStretch(C.stretchY,C.data&&C.data.height)||(this.fire(new i.ErrorEvent(new Error('Image "'+Y+'" has invalid "stretchY" value'))),q=!1),this._validateContent(C.content,C)||(this.fire(new i.ErrorEvent(new Error('Image "'+Y+'" has invalid "content" value'))),q=!1),q},G.prototype._validateStretch=function(Y,C){if(!Y)return!0;for(var q=0,Q=0,ne=Y;Q<ne.length;Q+=1){var he=ne[Q];if(he[0]<q||he[1]<he[0]||C<he[1])return!1;q=he[1]}return!0},G.prototype._validateContent=function(Y,C){return!(Y&&(Y.length!==4||Y[0]<0||C.data.width<Y[0]||Y[1]<0||C.data.height<Y[1]||Y[2]<0||C.data.width<Y[2]||Y[3]<0||C.data.height<Y[3]||Y[2]<Y[0]||Y[3]<Y[1]))},G.prototype.updateImage=function(Y,C){var q=this.images[Y];C.version=q.version+1,this.images[Y]=C,this.updatedImages[Y]=!0},G.prototype.removeImage=function(Y){var C=this.images[Y];delete this.images[Y],delete this.patterns[Y],C.userImage&&C.userImage.onRemove&&C.userImage.onRemove()},G.prototype.listImages=function(){return Object.keys(this.images)},G.prototype.getImages=function(Y,C){var q=!0;if(!this.isLoaded())for(var Q=0,ne=Y;Q<ne.length;Q+=1){var he=ne[Q];this.images[he]||(q=!1)}this.isLoaded()||q?this._notify(Y,C):this.requestors.push({ids:Y,callback:C})},G.prototype._notify=function(Y,C){for(var q={},Q=0,ne=Y;Q<ne.length;Q+=1){var he=ne[Q];this.images[he]||this.fire(new i.Event("styleimagemissing",{id:he}));var me=this.images[he];me?q[he]={data:me.data.clone(),pixelRatio:me.pixelRatio,sdf:me.sdf,version:me.version,stretchX:me.stretchX,stretchY:me.stretchY,content:me.content,hasRenderCallback:!!(me.userImage&&me.userImage.render)}:i.warnOnce('Image "'+he+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}C(null,q)},G.prototype.getPixelSize=function(){var Y=this.atlasImage;return{width:Y.width,height:Y.height}},G.prototype.getPattern=function(Y){var C=this.patterns[Y],q=this.getImage(Y);if(!q)return null;if(C&&C.position.version===q.version)return C.position;if(C)C.position.version=q.version;else{var Q={w:q.data.width+2,h:q.data.height+2,x:0,y:0},ne=new i.ImagePosition(Q,q);this.patterns[Y]={bin:Q,position:ne}}return this._updatePatternAtlas(),this.patterns[Y].position},G.prototype.bind=function(Y){var C=Y.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(Y,this.atlasImage,C.RGBA),this.atlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE)},G.prototype._updatePatternAtlas=function(){var Y=[];for(var C in this.patterns)Y.push(this.patterns[C].bin);var q=i.potpack(Y),Q=q.w,ne=q.h,he=this.atlasImage;for(var me in he.resize({width:Q||1,height:ne||1}),this.patterns){var Pe=this.patterns[me].bin,ze=Pe.x+1,qe=Pe.y+1,Ze=this.images[me].data,rt=Ze.width,pt=Ze.height;i.RGBAImage.copy(Ze,he,{x:0,y:0},{x:ze,y:qe},{width:rt,height:pt}),i.RGBAImage.copy(Ze,he,{x:0,y:pt-1},{x:ze,y:qe-1},{width:rt,height:1}),i.RGBAImage.copy(Ze,he,{x:0,y:0},{x:ze,y:qe+pt},{width:rt,height:1}),i.RGBAImage.copy(Ze,he,{x:rt-1,y:0},{x:ze-1,y:qe},{width:1,height:pt}),i.RGBAImage.copy(Ze,he,{x:0,y:0},{x:ze+rt,y:qe},{width:1,height:pt})}this.dirty=!0},G.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},G.prototype.dispatchRenderCallbacks=function(Y){for(var C=0,q=Y;C<q.length;C+=1){var Q=q[C];if(!this.callbackDispatchedThisFrame[Q]){this.callbackDispatchedThisFrame[Q]=!0;var ne=this.images[Q];u(ne)&&this.updateImage(Q,ne)}}},G}(i.Evented),c=d,b=d,g=1e20;function d(B,G,Y,C,q,Q){this.fontSize=B||24,this.buffer=G===void 0?3:G,this.cutoff=C||.25,this.fontFamily=q||"sans-serif",this.fontWeight=Q||"normal",this.radius=Y||8;var ne=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ne*ne),this.gridInner=new Float64Array(ne*ne),this.f=new Float64Array(ne),this.d=new Float64Array(ne),this.z=new Float64Array(ne+1),this.v=new Int16Array(ne),this.middle=Math.round(ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(B,G,Y,C,q,Q,ne){for(var he=0;he<G;he++){for(var me=0;me<Y;me++)C[me]=B[me*G+he];for(x(C,q,Q,ne,Y),me=0;me<Y;me++)B[me*G+he]=q[me]}for(me=0;me<Y;me++){for(he=0;he<G;he++)C[he]=B[me*G+he];for(x(C,q,Q,ne,G),he=0;he<G;he++)B[me*G+he]=Math.sqrt(q[he])}}function x(B,G,Y,C,q){Y[0]=0,C[0]=-g,C[1]=+g;for(var Q=1,ne=0;Q<q;Q++){for(var he=(B[Q]+Q*Q-(B[Y[ne]]+Y[ne]*Y[ne]))/(2*Q-2*Y[ne]);he<=C[ne];)ne--,he=(B[Q]+Q*Q-(B[Y[ne]]+Y[ne]*Y[ne]))/(2*Q-2*Y[ne]);Y[++ne]=Q,C[ne]=he,C[ne+1]=+g}for(Q=0,ne=0;Q<q;Q++){for(;C[ne+1]<Q;)ne++;G[Q]=(Q-Y[ne])*(Q-Y[ne])+B[Y[ne]]}}d.prototype.draw=function(B){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(B,this.buffer,this.middle);for(var G=this.ctx.getImageData(0,0,this.size,this.size),Y=new Uint8ClampedArray(this.size*this.size),C=0;C<this.size*this.size;C++){var q=G.data[4*C+3]/255;this.gridOuter[C]=q===1?0:q===0?g:Math.pow(Math.max(0,.5-q),2),this.gridInner[C]=q===1?g:q===0?0:Math.pow(Math.max(0,q-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),C=0;C<this.size*this.size;C++){var Q=this.gridOuter[C]-this.gridInner[C];Y[C]=Math.max(0,Math.min(255,Math.round(255-255*(Q/this.radius+this.cutoff))))}return Y},c.default=b;var y=function(B,G){this.requestManager=B,this.localIdeographFontFamily=G,this.entries={}};y.prototype.setURL=function(B){this.url=B},y.prototype.getGlyphs=function(B,G){var Y=this,C=[];for(var q in B)for(var Q=0,ne=B[q];Q<ne.length;Q+=1){var he=ne[Q];C.push({stack:q,id:he})}i.asyncAll(C,function(me,Pe){var ze=me.stack,qe=me.id,Ze=Y.entries[ze];Ze||(Ze=Y.entries[ze]={glyphs:{},requests:{},ranges:{}});var rt=Ze.glyphs[qe];if(rt===void 0){if(rt=Y._tinySDF(Ze,ze,qe))return Ze.glyphs[qe]=rt,void Pe(null,{stack:ze,id:qe,glyph:rt});var pt=Math.floor(qe/256);if(256*pt>65535)Pe(new Error("glyphs > 65535 not supported"));else if(Ze.ranges[pt])Pe(null,{stack:ze,id:qe,glyph:rt});else{var vt=Ze.requests[pt];vt||(vt=Ze.requests[pt]=[],y.loadGlyphRange(ze,pt,Y.url,Y.requestManager,function(kt,Ot){if(Ot){for(var Et in Ot)Y._doesCharSupportLocalGlyph(+Et)||(Ze.glyphs[+Et]=Ot[+Et]);Ze.ranges[pt]=!0}for(var jt=0,It=vt;jt<It.length;jt+=1)(0,It[jt])(kt,Ot);delete Ze.requests[pt]})),vt.push(function(kt,Ot){kt?Pe(kt):Ot&&Pe(null,{stack:ze,id:qe,glyph:Ot[qe]||null})})}}else Pe(null,{stack:ze,id:qe,glyph:rt})},function(me,Pe){if(me)G(me);else if(Pe){for(var ze={},qe=0,Ze=Pe;qe<Ze.length;qe+=1){var rt=Ze[qe],pt=rt.stack,vt=rt.id,kt=rt.glyph;(ze[pt]||(ze[pt]={}))[vt]=kt&&{id:kt.id,bitmap:kt.bitmap.clone(),metrics:kt.metrics}}G(null,ze)}})},y.prototype._doesCharSupportLocalGlyph=function(B){return!!this.localIdeographFontFamily&&(i.isChar["CJK Unified Ideographs"](B)||i.isChar["Hangul Syllables"](B)||i.isChar.Hiragana(B)||i.isChar.Katakana(B))},y.prototype._tinySDF=function(B,G,Y){var C=this.localIdeographFontFamily;if(C&&this._doesCharSupportLocalGlyph(Y)){var q=B.tinySDF;if(!q){var Q="400";/bold/i.test(G)?Q="900":/medium/i.test(G)?Q="500":/light/i.test(G)&&(Q="200"),q=B.tinySDF=new y.TinySDF(24,3,8,.25,C,Q)}return{id:Y,bitmap:new i.AlphaImage({width:30,height:30},q.draw(String.fromCharCode(Y))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(B,G,Y,C,q){var Q=256*G,ne=Q+255,he=C.transformRequest(C.normalizeGlyphsURL(Y).replace("{fontstack}",B).replace("{range}",Q+"-"+ne),i.ResourceType.Glyphs);i.getArrayBuffer(he,function(me,Pe){if(me)q(me);else if(Pe){for(var ze={},qe=0,Ze=i.parseGlyphPBF(Pe);qe<Ze.length;qe+=1){var rt=Ze[qe];ze[rt.id]=rt}q(null,ze)}})},y.TinySDF=c;var k=function(){this.specification=i.styleSpec.light.position};k.prototype.possiblyEvaluate=function(B,G){return i.sphericalToCartesian(B.expression.evaluate(G))},k.prototype.interpolate=function(B,G,Y){return{x:i.number(B.x,G.x,Y),y:i.number(B.y,G.y,Y),z:i.number(B.z,G.z,Y)}};var f=new i.Properties({anchor:new i.DataConstantProperty(i.styleSpec.light.anchor),position:new k,color:new i.DataConstantProperty(i.styleSpec.light.color),intensity:new i.DataConstantProperty(i.styleSpec.light.intensity)}),S="-transition",M=function(B){function G(Y){B.call(this),this._transitionable=new i.Transitionable(f),this.setLight(Y),this._transitioning=this._transitionable.untransitioned()}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getLight=function(){return this._transitionable.serialize()},G.prototype.setLight=function(Y,C){if(C===void 0&&(C={}),!this._validate(i.validateLight,Y,C))for(var q in Y){var Q=Y[q];i.endsWith(q,S)?this._transitionable.setTransition(q.slice(0,-11),Q):this._transitionable.setValue(q,Q)}},G.prototype.updateTransitions=function(Y){this._transitioning=this._transitionable.transitioned(Y,this._transitioning)},G.prototype.hasTransition=function(){return this._transitioning.hasTransition()},G.prototype.recalculate=function(Y){this.properties=this._transitioning.possiblyEvaluate(Y)},G.prototype._validate=function(Y,C,q){return(!q||q.validate!==!1)&&i.emitValidationErrors(this,Y.call(i.validateStyle,i.extend({value:C,style:{glyphs:!0,sprite:!0},styleSpec:i.styleSpec})))},G}(i.Evented),E=function(B,G){this.width=B,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(B,G){var Y=B.join(",")+String(G);return this.dashEntry[Y]||(this.dashEntry[Y]=this.addDash(B,G)),this.dashEntry[Y]},E.prototype.getDashRanges=function(B,G,Y){var C=[],q=B.length%2==1?-B[B.length-1]*Y:0,Q=B[0]*Y,ne=!0;C.push({left:q,right:Q,isDash:ne,zeroLength:B[0]===0});for(var he=B[0],me=1;me<B.length;me++){ne=!ne;var Pe=B[me];q=he*Y,Q=(he+=Pe)*Y,C.push({left:q,right:Q,isDash:ne,zeroLength:Pe===0})}return C},E.prototype.addRoundDash=function(B,G,Y){for(var C=G/2,q=-Y;q<=Y;q++)for(var Q=this.nextRow+Y+q,ne=this.width*Q,he=0,me=B[he],Pe=0;Pe<this.width;Pe++){Pe/me.right>1&&(me=B[++he]);var ze=Math.abs(Pe-me.left),qe=Math.abs(Pe-me.right),Ze=Math.min(ze,qe),rt=void 0,pt=q/Y*(C+1);if(me.isDash){var vt=C-Math.abs(pt);rt=Math.sqrt(Ze*Ze+vt*vt)}else rt=C-Math.sqrt(Ze*Ze+pt*pt);this.data[ne+Pe]=Math.max(0,Math.min(255,rt+128))}},E.prototype.addRegularDash=function(B){for(var G=B.length-1;G>=0;--G){var Y=B[G],C=B[G+1];Y.zeroLength?B.splice(G,1):C&&C.isDash===Y.isDash&&(C.left=Y.left,B.splice(G,1))}var q=B[0],Q=B[B.length-1];q.isDash===Q.isDash&&(q.left=Q.left-this.width,Q.right=q.right+this.width);for(var ne=this.width*this.nextRow,he=0,me=B[he],Pe=0;Pe<this.width;Pe++){Pe/me.right>1&&(me=B[++he]);var ze=Math.abs(Pe-me.left),qe=Math.abs(Pe-me.right),Ze=Math.min(ze,qe),rt=me.isDash?Ze:-Ze;this.data[ne+Pe]=Math.max(0,Math.min(255,rt+128))}},E.prototype.addDash=function(B,G){var Y=G?7:0,C=2*Y+1;if(this.nextRow+C>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var q=0,Q=0;Q<B.length;Q++)q+=B[Q];if(q!==0){var ne=this.width/q,he=this.getDashRanges(B,this.width,ne);G?this.addRoundDash(he,ne,Y):this.addRegularDash(he)}var me={y:(this.nextRow+Y+.5)/this.height,height:2*Y/this.height,width:q};return this.nextRow+=C,this.dirty=!0,me},E.prototype.bind=function(B){var G=B.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var O=function B(G,Y){this.workerPool=G,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var C=this.workerPool.acquire(this.id),q=0;q<C.length;q++){var Q=C[q],ne=new B.Actor(Q,Y,this.id);ne.name="Worker "+q,this.actors.push(ne)}};function P(B,G,Y){var C=function(q,Q){if(q)return Y(q);if(Q){var ne=i.pick(i.extend(Q,B),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Q.vector_layers&&(ne.vectorLayers=Q.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(function(he){return he.id})),ne.tiles=G.canonicalizeTileset(ne,B.url),Y(null,ne)}};return B.url?i.getJSON(G.transformRequest(G.normalizeSourceURL(B.url),i.ResourceType.Source),C):i.browser.frame(function(){return C(null,B)})}O.prototype.broadcast=function(B,G,Y){Y=Y||function(){},i.asyncAll(this.actors,function(C,q){C.send(B,G,q)},Y)},O.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},O.prototype.remove=function(){this.actors.forEach(function(B){B.remove()}),this.actors=[],this.workerPool.release(this.id)},O.Actor=i.Actor;var I=function(B,G,Y){this.bounds=i.LngLatBounds.convert(this.validateBounds(B)),this.minzoom=G||0,this.maxzoom=Y||24};I.prototype.validateBounds=function(B){return Array.isArray(B)&&B.length===4?[Math.max(-180,B[0]),Math.max(-90,B[1]),Math.min(180,B[2]),Math.min(90,B[3])]:[-180,-90,180,90]},I.prototype.contains=function(B){var G=Math.pow(2,B.z),Y=Math.floor(i.mercatorXfromLng(this.bounds.getWest())*G),C=Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*G),q=Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*G),Q=Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*G);return B.x>=Y&&B.x<q&&B.y>=C&&B.y<Q};var z=function(B){function G(Y,C,q,Q){if(B.call(this),this.id=Y,this.dispatcher=q,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(C,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},C),this._collectResourceTiming=C.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Q)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var Y=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,function(C,q){Y._tileJSONRequest=null,Y._loaded=!0,C?Y.fire(new i.ErrorEvent(C)):q&&(i.extend(Y,q),q.bounds&&(Y.tileBounds=new I(q.bounds,Y.minzoom,Y.maxzoom)),i.postTurnstileEvent(q.tiles,Y.map._requestManager._customAccessToken),i.postMapLoadEvent(q.tiles,Y.map._getMapId(),Y.map._requestManager._skuToken,Y.map._requestManager._customAccessToken),Y.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),Y.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.hasTile=function(Y){return!this.tileBounds||this.tileBounds.contains(Y.canonical)},G.prototype.onAdd=function(Y){this.map=Y,this.load()},G.prototype.setSourceProperty=function(Y){this._tileJSONRequest&&this._tileJSONRequest.cancel(),Y(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},G.prototype.setTiles=function(Y){var C=this;return this.setSourceProperty(function(){C._options.tiles=Y}),this},G.prototype.setUrl=function(Y){var C=this;return this.setSourceProperty(function(){C.url=Y,C._options.url=Y}),this},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return i.extend({},this._options)},G.prototype.loadTile=function(Y,C){var q=this.map._requestManager.normalizeTileURL(Y.tileID.canonical.url(this.tiles,this.scheme)),Q={request:this.map._requestManager.transformRequest(q,i.ResourceType.Tile),uid:Y.uid,tileID:Y.tileID,zoom:Y.tileID.overscaledZ,tileSize:this.tileSize*Y.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ne(he,me){return delete Y.request,Y.aborted?C(null):he&&he.status!==404?C(he):(me&&me.resourceTiming&&(Y.resourceTiming=me.resourceTiming),this.map._refreshExpiredTiles&&me&&Y.setExpiryData(me),Y.loadVectorData(me,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),C(null),void(Y.reloadCallback&&(this.loadTile(Y,Y.reloadCallback),Y.reloadCallback=null)))}Q.request.collectResourceTiming=this._collectResourceTiming,Y.actor&&Y.state!=="expired"?Y.state==="loading"?Y.reloadCallback=C:Y.request=Y.actor.send("reloadTile",Q,ne.bind(this)):(Y.actor=this.dispatcher.getActor(),Y.request=Y.actor.send("loadTile",Q,ne.bind(this)))},G.prototype.abortTile=function(Y){Y.request&&(Y.request.cancel(),delete Y.request),Y.actor&&Y.actor.send("abortTile",{uid:Y.uid,type:this.type,source:this.id},void 0)},G.prototype.unloadTile=function(Y){Y.unloadVectorData(),Y.actor&&Y.actor.send("removeTile",{uid:Y.uid,type:this.type,source:this.id},void 0)},G.prototype.hasTransition=function(){return!1},G}(i.Evented),U=function(B){function G(Y,C,q,Q){B.call(this),this.id=Y,this.dispatcher=q,this.setEventedParent(Q),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},C),i.extend(this,i.pick(C,["url","scheme","tileSize"]))}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var Y=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,function(C,q){Y._tileJSONRequest=null,Y._loaded=!0,C?Y.fire(new i.ErrorEvent(C)):q&&(i.extend(Y,q),q.bounds&&(Y.tileBounds=new I(q.bounds,Y.minzoom,Y.maxzoom)),i.postTurnstileEvent(q.tiles),i.postMapLoadEvent(q.tiles,Y.map._getMapId(),Y.map._requestManager._skuToken),Y.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),Y.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.onAdd=function(Y){this.map=Y,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return i.extend({},this._options)},G.prototype.hasTile=function(Y){return!this.tileBounds||this.tileBounds.contains(Y.canonical)},G.prototype.loadTile=function(Y,C){var q=this,Q=this.map._requestManager.normalizeTileURL(Y.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Y.request=i.getImage(this.map._requestManager.transformRequest(Q,i.ResourceType.Tile),function(ne,he){if(delete Y.request,Y.aborted)Y.state="unloaded",C(null);else if(ne)Y.state="errored",C(ne);else if(he){q.map._refreshExpiredTiles&&Y.setExpiryData(he),delete he.cacheControl,delete he.expires;var me=q.map.painter.context,Pe=me.gl;Y.texture=q.map.painter.getTileTexture(he.width),Y.texture?Y.texture.update(he,{useMipmap:!0}):(Y.texture=new i.Texture(me,he,Pe.RGBA,{useMipmap:!0}),Y.texture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST),me.extTextureFilterAnisotropic&&Pe.texParameterf(Pe.TEXTURE_2D,me.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,me.extTextureFilterAnisotropicMax)),Y.state="loaded",i.cacheEntryPossiblyAdded(q.dispatcher),C(null)}})},G.prototype.abortTile=function(Y,C){Y.request&&(Y.request.cancel(),delete Y.request),C()},G.prototype.unloadTile=function(Y,C){Y.texture&&this.map.painter.saveTileTexture(Y.texture),C()},G.prototype.hasTransition=function(){return!1},G}(i.Evented),R=function(B){function G(Y,C,q,Q){B.call(this,Y,C,q,Q),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},C),this.encoding=C.encoding||"mapbox"}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},G.prototype.loadTile=function(Y,C){var q=this.map._requestManager.normalizeTileURL(Y.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Q(ne,he){ne&&(Y.state="errored",C(ne)),he&&(Y.dem=he,Y.needsHillshadePrepare=!0,Y.state="loaded",C(null))}Y.request=i.getImage(this.map._requestManager.transformRequest(q,i.ResourceType.Tile),(function(ne,he){if(delete Y.request,Y.aborted)Y.state="unloaded",C(null);else if(ne)Y.state="errored",C(ne);else if(he){this.map._refreshExpiredTiles&&Y.setExpiryData(he),delete he.cacheControl,delete he.expires;var me=i.window.ImageBitmap&&he instanceof i.window.ImageBitmap&&i.offscreenCanvasSupported()?he:i.browser.getImageData(he,1),Pe={uid:Y.uid,coord:Y.tileID,source:this.id,rawImageData:me,encoding:this.encoding};Y.actor&&Y.state!=="expired"||(Y.actor=this.dispatcher.getActor(),Y.actor.send("loadDEMTile",Pe,Q.bind(this)))}}).bind(this)),Y.neighboringTiles=this._getNeighboringTiles(Y.tileID)},G.prototype._getNeighboringTiles=function(Y){var C=Y.canonical,q=Math.pow(2,C.z),Q=(C.x-1+q)%q,ne=C.x===0?Y.wrap-1:Y.wrap,he=(C.x+1+q)%q,me=C.x+1===q?Y.wrap+1:Y.wrap,Pe={};return Pe[new i.OverscaledTileID(Y.overscaledZ,ne,C.z,Q,C.y).key]={backfilled:!1},Pe[new i.OverscaledTileID(Y.overscaledZ,me,C.z,he,C.y).key]={backfilled:!1},C.y>0&&(Pe[new i.OverscaledTileID(Y.overscaledZ,ne,C.z,Q,C.y-1).key]={backfilled:!1},Pe[new i.OverscaledTileID(Y.overscaledZ,Y.wrap,C.z,C.x,C.y-1).key]={backfilled:!1},Pe[new i.OverscaledTileID(Y.overscaledZ,me,C.z,he,C.y-1).key]={backfilled:!1}),C.y+1<q&&(Pe[new i.OverscaledTileID(Y.overscaledZ,ne,C.z,Q,C.y+1).key]={backfilled:!1},Pe[new i.OverscaledTileID(Y.overscaledZ,Y.wrap,C.z,C.x,C.y+1).key]={backfilled:!1},Pe[new i.OverscaledTileID(Y.overscaledZ,me,C.z,he,C.y+1).key]={backfilled:!1}),Pe},G.prototype.unloadTile=function(Y){Y.demTexture&&this.map.painter.saveTileTexture(Y.demTexture),Y.fbo&&(Y.fbo.destroy(),delete Y.fbo),Y.dem&&delete Y.dem,delete Y.neighboringTiles,Y.state="unloaded",Y.actor&&Y.actor.send("removeDEMTile",{uid:Y.uid,source:this.id})},G}(U),j=function(B){function G(Y,C,q,Q){B.call(this),this.id=Y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=q.getActor(),this.setEventedParent(Q),this._data=C.data,this._options=i.extend({},C),this._collectResourceTiming=C.collectResourceTiming,this._resourceTiming=[],C.maxzoom!==void 0&&(this.maxzoom=C.maxzoom),C.type&&(this.type=C.type),C.attribution&&(this.attribution=C.attribution),this.promoteId=C.promoteId;var ne=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:C.cluster||!1,geojsonVtOptions:{buffer:(C.buffer!==void 0?C.buffer:128)*ne,tolerance:(C.tolerance!==void 0?C.tolerance:.375)*ne,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:C.lineMetrics||!1,generateId:C.generateId||!1},superclusterOptions:{maxZoom:C.clusterMaxZoom!==void 0?Math.min(C.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,C.clusterMinPoints||2),extent:i.EXTENT,radius:(C.clusterRadius||50)*ne,log:!1,generateId:C.generateId||!1},clusterProperties:C.clusterProperties,filter:C.filter},C.workerOptions)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var Y=this;this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(C){if(C)Y.fire(new i.ErrorEvent(C));else{var q={dataType:"source",sourceDataType:"metadata"};Y._collectResourceTiming&&Y._resourceTiming&&Y._resourceTiming.length>0&&(q.resourceTiming=Y._resourceTiming,Y._resourceTiming=[]),Y.fire(new i.Event("data",q))}})},G.prototype.onAdd=function(Y){this.map=Y,this.load()},G.prototype.setData=function(Y){var C=this;return this._data=Y,this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(q){if(q)C.fire(new i.ErrorEvent(q));else{var Q={dataType:"source",sourceDataType:"content"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(Q.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new i.Event("data",Q))}}),this},G.prototype.getClusterExpansionZoom=function(Y,C){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:Y,source:this.id},C),this},G.prototype.getClusterChildren=function(Y,C){return this.actor.send("geojson.getClusterChildren",{clusterId:Y,source:this.id},C),this},G.prototype.getClusterLeaves=function(Y,C,q,Q){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:Y,limit:C,offset:q},Q),this},G.prototype._updateWorkerData=function(Y){var C=this;this._loaded=!1;var q=i.extend({},this.workerOptions),Q=this._data;typeof Q=="string"?(q.request=this.map._requestManager.transformRequest(i.browser.resolveURL(Q),i.ResourceType.Source),q.request.collectResourceTiming=this._collectResourceTiming):q.data=JSON.stringify(Q),this.actor.send(this.type+".loadData",q,function(ne,he){C._removed||he&&he.abandoned||(C._loaded=!0,he&&he.resourceTiming&&he.resourceTiming[C.id]&&(C._resourceTiming=he.resourceTiming[C.id].slice(0)),C.actor.send(C.type+".coalesce",{source:q.source},null),Y(ne))})},G.prototype.loaded=function(){return this._loaded},G.prototype.loadTile=function(Y,C){var q=this,Q=Y.actor?"reloadTile":"loadTile";Y.actor=this.actor;var ne={type:this.type,uid:Y.uid,tileID:Y.tileID,zoom:Y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Y.request=this.actor.send(Q,ne,function(he,me){return delete Y.request,Y.unloadVectorData(),Y.aborted?C(null):he?C(he):(Y.loadVectorData(me,q.map.painter,Q==="reloadTile"),C(null))})},G.prototype.abortTile=function(Y){Y.request&&(Y.request.cancel(),delete Y.request),Y.aborted=!0},G.prototype.unloadTile=function(Y){Y.unloadVectorData(),this.actor.send("removeTile",{uid:Y.uid,type:this.type,source:this.id})},G.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},G.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},G.prototype.hasTransition=function(){return!1},G}(i.Evented),Z=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=function(B){function G(Y,C,q,Q){B.call(this),this.id=Y,this.dispatcher=q,this.coordinates=C.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Q),this.options=C}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(Y,C){var q=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),function(Q,ne){q._loaded=!0,Q?q.fire(new i.ErrorEvent(Q)):ne&&(q.image=ne,Y&&(q.coordinates=Y),C&&C(),q._finishLoading())})},G.prototype.loaded=function(){return this._loaded},G.prototype.updateImage=function(Y){var C=this;return this.image&&Y.url?(this.options.url=Y.url,this.load(Y.coordinates,function(){C.texture=null}),this):this},G.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))},G.prototype.onAdd=function(Y){this.map=Y,this.load()},G.prototype.setCoordinates=function(Y){var C=this;this.coordinates=Y;var q=Y.map(i.MercatorCoordinate.fromLngLat);this.tileID=function(ne){for(var he=1/0,me=1/0,Pe=-1/0,ze=-1/0,qe=0,Ze=ne;qe<Ze.length;qe+=1){var rt=Ze[qe];he=Math.min(he,rt.x),me=Math.min(me,rt.y),Pe=Math.max(Pe,rt.x),ze=Math.max(ze,rt.y)}var pt=Pe-he,vt=ze-me,kt=Math.max(pt,vt),Ot=Math.max(0,Math.floor(-Math.log(kt)/Math.LN2)),Et=Math.pow(2,Ot);return new i.CanonicalTileID(Ot,Math.floor((he+Pe)/2*Et),Math.floor((me+ze)/2*Et))}(q),this.minzoom=this.maxzoom=this.tileID.z;var Q=q.map(function(ne){return C.tileID.getTilePoint(ne)._round()});return this._boundsArray=new i.StructArrayLayout4i8,this._boundsArray.emplaceBack(Q[0].x,Q[0].y,0,0),this._boundsArray.emplaceBack(Q[1].x,Q[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(Q[3].x,Q[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(Q[2].x,Q[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this},G.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var Y=this.map.painter.context,C=Y.gl;for(var q in this.boundsBuffer||(this.boundsBuffer=Y.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new i.Texture(Y,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[q];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},G.prototype.loadTile=function(Y,C){this.tileID&&this.tileID.equals(Y.tileID.canonical)?(this.tiles[String(Y.tileID.wrap)]=Y,Y.buckets={},C(null)):(Y.state="errored",C(null))},G.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return!1},G}(i.Evented),V=function(B){function G(Y,C,q,Q){B.call(this,Y,C,q,Q),this.roundZoom=!0,this.type="video",this.options=C}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var Y=this;this._loaded=!1;var C=this.options;this.urls=[];for(var q=0,Q=C.urls;q<Q.length;q+=1){var ne=Q[q];this.urls.push(this.map._requestManager.transformRequest(ne,i.ResourceType.Source).url)}i.getVideo(this.urls,function(he,me){Y._loaded=!0,he?Y.fire(new i.ErrorEvent(he)):me&&(Y.video=me,Y.video.loop=!0,Y.video.addEventListener("playing",function(){Y.map.triggerRepaint()}),Y.map&&Y.video.play(),Y._finishLoading())})},G.prototype.pause=function(){this.video&&this.video.pause()},G.prototype.play=function(){this.video&&this.video.play()},G.prototype.seek=function(Y){if(this.video){var C=this.video.seekable;Y<C.start(0)||Y>C.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+C.start(0)+" and "+C.end(0)+"-second mark."))):this.video.currentTime=Y}},G.prototype.getVideo=function(){return this.video},G.prototype.onAdd=function(Y){this.map||(this.map=Y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},G.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var Y=this.map.painter.context,C=Y.gl;for(var q in this.boundsBuffer||(this.boundsBuffer=Y.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(Y,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[q];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this.video&&!this.video.paused},G}(F),H=function(B){function G(Y,C,q,Q){B.call(this,Y,C,q,Q),C.coordinates?Array.isArray(C.coordinates)&&C.coordinates.length===4&&!C.coordinates.some(function(ne){return!Array.isArray(ne)||ne.length!==2||ne.some(function(he){return typeof he!="number"})})||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+Y,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+Y,null,'missing required property "coordinates"'))),C.animate&&typeof C.animate!="boolean"&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+Y,null,'optional "animate" property must be a boolean value'))),C.canvas?typeof C.canvas=="string"||C.canvas instanceof i.window.HTMLCanvasElement||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+Y,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+Y,null,'missing required property "canvas"'))),this.options=C,this.animate=C.animate===void 0||C.animate}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},G.prototype.getCanvas=function(){return this.canvas},G.prototype.onAdd=function(Y){this.map=Y,this.load(),this.canvas&&this.animate&&this.play()},G.prototype.onRemove=function(){this.pause()},G.prototype.prepare=function(){var Y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,Y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,Y=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var C=this.map.painter.context,q=C.gl;for(var Q in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(Y||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(C,this.canvas,q.RGBA,{premultiply:!0}),this.tiles){var ne=this.tiles[Q];ne.state!=="loaded"&&(ne.state="loaded",ne.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this._playing},G.prototype._hasInvalidDimensions=function(){for(var Y=0,C=[this.canvas.width,this.canvas.height];Y<C.length;Y+=1){var q=C[Y];if(isNaN(q)||q<=0)return!0}return!1},G}(F),te={vector:z,raster:U,"raster-dem":R,geojson:j,video:V,image:F,canvas:H};function $(B,G){var Y=i.identity([]);return i.translate(Y,Y,[1,1,0]),i.scale(Y,Y,[.5*B.width,.5*B.height,1]),i.multiply(Y,Y,B.calculatePosMatrix(G.toUnwrapped()))}function J(B,G,Y,C,q,Q){var ne=function(vt,kt,Ot){if(vt)for(var Et=0,jt=vt;Et<jt.length;Et+=1){var It=kt[jt[Et]];if(It&&It.source===Ot&&It.type==="fill-extrusion")return!0}else for(var Jt in kt){var Gt=kt[Jt];if(Gt.source===Ot&&Gt.type==="fill-extrusion")return!0}return!1}(q&&q.layers,G,B.id),he=Q.maxPitchScaleFactor(),me=B.tilesIn(C,he,ne);me.sort(X);for(var Pe=[],ze=0,qe=me;ze<qe.length;ze+=1){var Ze=qe[ze];Pe.push({wrappedTileID:Ze.tileID.wrapped().key,queryResults:Ze.tile.queryRenderedFeatures(G,Y,B._state,Ze.queryGeometry,Ze.cameraQueryGeometry,Ze.scale,q,Q,he,$(B.transform,Ze.tileID))})}var rt=function(vt){for(var kt={},Ot={},Et=0,jt=vt;Et<jt.length;Et+=1){var It=jt[Et],Jt=It.queryResults,Gt=It.wrappedTileID,Ht=Ot[Gt]=Ot[Gt]||{};for(var mn in Jt)for(var yn=Jt[mn],In=Ht[mn]=Ht[mn]||{},Rn=kt[mn]=kt[mn]||[],Yn=0,er=yn;Yn<er.length;Yn+=1){var dr=er[Yn];In[dr.featureIndex]||(In[dr.featureIndex]=!0,Rn.push(dr))}}return kt}(Pe);for(var pt in rt)rt[pt].forEach(function(vt){var kt=vt.feature,Ot=B.getFeatureState(kt.layer["source-layer"],kt.id);kt.source=kt.layer.source,kt.layer["source-layer"]&&(kt.sourceLayer=kt.layer["source-layer"]),kt.state=Ot});return rt}function X(B,G){var Y=B.tileID,C=G.tileID;return Y.overscaledZ-C.overscaledZ||Y.canonical.y-C.canonical.y||Y.wrap-C.wrap||Y.canonical.x-C.canonical.x}var K=function(B,G){this.max=B,this.onRemove=G,this.reset()};K.prototype.reset=function(){for(var B in this.data)for(var G=0,Y=this.data[B];G<Y.length;G+=1){var C=Y[G];C.timeout&&clearTimeout(C.timeout),this.onRemove(C.value)}return this.data={},this.order=[],this},K.prototype.add=function(B,G,Y){var C=this,q=B.wrapped().key;this.data[q]===void 0&&(this.data[q]=[]);var Q={value:G,timeout:void 0};if(Y!==void 0&&(Q.timeout=setTimeout(function(){C.remove(B,Q)},Y)),this.data[q].push(Q),this.order.push(q),this.order.length>this.max){var ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this},K.prototype.has=function(B){return B.wrapped().key in this.data},K.prototype.getAndRemove=function(B){return this.has(B)?this._getAndRemoveByKey(B.wrapped().key):null},K.prototype._getAndRemoveByKey=function(B){var G=this.data[B].shift();return G.timeout&&clearTimeout(G.timeout),this.data[B].length===0&&delete this.data[B],this.order.splice(this.order.indexOf(B),1),G.value},K.prototype.getByKey=function(B){var G=this.data[B];return G?G[0].value:null},K.prototype.get=function(B){return this.has(B)?this.data[B.wrapped().key][0].value:null},K.prototype.remove=function(B,G){if(!this.has(B))return this;var Y=B.wrapped().key,C=G===void 0?0:this.data[Y].indexOf(G),q=this.data[Y][C];return this.data[Y].splice(C,1),q.timeout&&clearTimeout(q.timeout),this.data[Y].length===0&&delete this.data[Y],this.onRemove(q.value),this.order.splice(this.order.indexOf(Y),1),this},K.prototype.setMaxSize=function(B){for(this.max=B;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},K.prototype.filter=function(B){var G=[];for(var Y in this.data)for(var C=0,q=this.data[Y];C<q.length;C+=1){var Q=q[C];B(Q.value)||G.push(Q)}for(var ne=0,he=G;ne<he.length;ne+=1){var me=he[ne];this.remove(me.value.tileID,me)}};var ee=function(B,G,Y){this.context=B;var C=B.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!Y,this.context.unbindVAO(),B.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};ee.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ee.prototype.updateData=function(B){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,B.arrayBuffer)},ee.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var ie={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ae=function(B,G,Y,C){this.length=G.length,this.attributes=Y,this.itemSize=G.bytesPerElement,this.dynamicDraw=C,this.context=B;var q=B.gl;this.buffer=q.createBuffer(),B.bindVertexBuffer.set(this.buffer),q.bufferData(q.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};ae.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ae.prototype.updateData=function(B){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,B.arrayBuffer)},ae.prototype.enableAttributes=function(B,G){for(var Y=0;Y<this.attributes.length;Y++){var C=this.attributes[Y],q=G.attributes[C.name];q!==void 0&&B.enableVertexAttribArray(q)}},ae.prototype.setVertexAttribPointers=function(B,G,Y){for(var C=0;C<this.attributes.length;C++){var q=this.attributes[C],Q=G.attributes[q.name];Q!==void 0&&B.vertexAttribPointer(Q,q.components,B[ie[q.type]],!1,this.itemSize,q.offset+this.itemSize*(Y||0))}},ae.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var oe=function(B){this.gl=B.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};oe.prototype.get=function(){return this.current},oe.prototype.set=function(B){},oe.prototype.getDefault=function(){return this.default},oe.prototype.setDefault=function(){this.set(this.default)};var fe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return i.Color.transparent},G.prototype.set=function(Y){var C=this.current;(Y.r!==C.r||Y.g!==C.g||Y.b!==C.b||Y.a!==C.a||this.dirty)&&(this.gl.clearColor(Y.r,Y.g,Y.b,Y.a),this.current=Y,this.dirty=!1)},G}(oe),ge=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 1},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.clearDepth(Y),this.current=Y,this.dirty=!1)},G}(oe),ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 0},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.clearStencil(Y),this.current=Y,this.dirty=!1)},G}(oe),xe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[!0,!0,!0,!0]},G.prototype.set=function(Y){var C=this.current;(Y[0]!==C[0]||Y[1]!==C[1]||Y[2]!==C[2]||Y[3]!==C[3]||this.dirty)&&(this.gl.colorMask(Y[0],Y[1],Y[2],Y[3]),this.current=Y,this.dirty=!1)},G}(oe),_e=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!0},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.depthMask(Y),this.current=Y,this.dirty=!1)},G}(oe),ye=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 255},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.stencilMask(Y),this.current=Y,this.dirty=!1)},G}(oe),Ce=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},G.prototype.set=function(Y){var C=this.current;(Y.func!==C.func||Y.ref!==C.ref||Y.mask!==C.mask||this.dirty)&&(this.gl.stencilFunc(Y.func,Y.ref,Y.mask),this.current=Y,this.dirty=!1)},G}(oe),ke=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var Y=this.gl;return[Y.KEEP,Y.KEEP,Y.KEEP]},G.prototype.set=function(Y){var C=this.current;(Y[0]!==C[0]||Y[1]!==C[1]||Y[2]!==C[2]||this.dirty)&&(this.gl.stencilOp(Y[0],Y[1],Y[2]),this.current=Y,this.dirty=!1)},G}(oe),Te=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;Y?C.enable(C.STENCIL_TEST):C.disable(C.STENCIL_TEST),this.current=Y,this.dirty=!1}},G}(oe),le=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[0,1]},G.prototype.set=function(Y){var C=this.current;(Y[0]!==C[0]||Y[1]!==C[1]||this.dirty)&&(this.gl.depthRange(Y[0],Y[1]),this.current=Y,this.dirty=!1)},G}(oe),ue=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;Y?C.enable(C.DEPTH_TEST):C.disable(C.DEPTH_TEST),this.current=Y,this.dirty=!1}},G}(oe),de=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.LESS},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.depthFunc(Y),this.current=Y,this.dirty=!1)},G}(oe),Le=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;Y?C.enable(C.BLEND):C.disable(C.BLEND),this.current=Y,this.dirty=!1}},G}(oe),we=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var Y=this.gl;return[Y.ONE,Y.ZERO]},G.prototype.set=function(Y){var C=this.current;(Y[0]!==C[0]||Y[1]!==C[1]||this.dirty)&&(this.gl.blendFunc(Y[0],Y[1]),this.current=Y,this.dirty=!1)},G}(oe),Ee=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return i.Color.transparent},G.prototype.set=function(Y){var C=this.current;(Y.r!==C.r||Y.g!==C.g||Y.b!==C.b||Y.a!==C.a||this.dirty)&&(this.gl.blendColor(Y.r,Y.g,Y.b,Y.a),this.current=Y,this.dirty=!1)},G}(oe),Oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.FUNC_ADD},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.blendEquation(Y),this.current=Y,this.dirty=!1)},G}(oe),Fe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;Y?C.enable(C.CULL_FACE):C.disable(C.CULL_FACE),this.current=Y,this.dirty=!1}},G}(oe),pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.BACK},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.cullFace(Y),this.current=Y,this.dirty=!1)},G}(oe),be=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.CCW},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.frontFace(Y),this.current=Y,this.dirty=!1)},G}(oe),Me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.useProgram(Y),this.current=Y,this.dirty=!1)},G}(oe),De=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.TEXTURE0},G.prototype.set=function(Y){(Y!==this.current||this.dirty)&&(this.gl.activeTexture(Y),this.current=Y,this.dirty=!1)},G}(oe),Ne=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var Y=this.gl;return[0,0,Y.drawingBufferWidth,Y.drawingBufferHeight]},G.prototype.set=function(Y){var C=this.current;(Y[0]!==C[0]||Y[1]!==C[1]||Y[2]!==C[2]||Y[3]!==C[3]||this.dirty)&&(this.gl.viewport(Y[0],Y[1],Y[2],Y[3]),this.current=Y,this.dirty=!1)},G}(oe),Be=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,Y),this.current=Y,this.dirty=!1}},G}(oe),Ye=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;C.bindRenderbuffer(C.RENDERBUFFER,Y),this.current=Y,this.dirty=!1}},G}(oe),We=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;C.bindTexture(C.TEXTURE_2D,Y),this.current=Y,this.dirty=!1}},G}(oe),et=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;C.bindBuffer(C.ARRAY_BUFFER,Y),this.current=Y,this.dirty=!1}},G}(oe),ft=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Y){var C=this.gl;C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,Y),this.current=Y,this.dirty=!1},G}(oe),ht=function(B){function G(Y){B.call(this,Y),this.vao=Y.extVertexArrayObject}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Y){this.vao&&(Y!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(Y),this.current=Y,this.dirty=!1)},G}(oe),mt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 4},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_ALIGNMENT,Y),this.current=Y,this.dirty=!1}},G}(oe),Mt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y),this.current=Y,this.dirty=!1}},G}(oe),_t=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,Y),this.current=Y,this.dirty=!1}},G}(oe),it=function(B){function G(Y,C){B.call(this,Y),this.context=Y,this.parent=C}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G}(oe),st=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.setDirty=function(){this.dirty=!0},G.prototype.set=function(Y){if(Y!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,Y,0),this.current=Y,this.dirty=!1}},G}(it),St=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.set=function(Y){if(Y!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,Y),this.current=Y,this.dirty=!1}},G}(it),zt=function(B,G,Y,C){this.context=B,this.width=G,this.height=Y;var q=B.gl,Q=this.framebuffer=q.createFramebuffer();this.colorAttachment=new st(B,Q),C&&(this.depthAttachment=new St(B,Q))};zt.prototype.destroy=function(){var B=this.context.gl,G=this.colorAttachment.get();if(G&&B.deleteTexture(G),this.depthAttachment){var Y=this.depthAttachment.get();Y&&B.deleteRenderbuffer(Y)}B.deleteFramebuffer(this.framebuffer)};var Ft=function(B,G,Y){this.func=B,this.mask=G,this.range=Y};Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);var Pt=7680,Xe=function(B,G,Y,C,q,Q){this.test=B,this.ref=G,this.mask=Y,this.fail=C,this.depthFail=q,this.pass=Q};Xe.disabled=new Xe({func:519,mask:0},0,0,Pt,Pt,Pt);var Ke=function(B,G,Y){this.blendFunction=B,this.blendColor=G,this.mask=Y};Ke.Replace=[1,0],Ke.disabled=new Ke(Ke.Replace,i.Color.transparent,[!1,!1,!1,!1]),Ke.unblended=new Ke(Ke.Replace,i.Color.transparent,[!0,!0,!0,!0]),Ke.alphaBlended=new Ke([1,771],i.Color.transparent,[!0,!0,!0,!0]);var He=function(B,G,Y){this.enable=B,this.mode=G,this.frontFace=Y};He.disabled=new He(!1,1029,2305),He.backCCW=new He(!0,1029,2305);var Je=function(B){this.gl=B,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new fe(this),this.clearDepth=new ge(this),this.clearStencil=new ve(this),this.colorMask=new xe(this),this.depthMask=new _e(this),this.stencilMask=new ye(this),this.stencilFunc=new Ce(this),this.stencilOp=new ke(this),this.stencilTest=new Te(this),this.depthRange=new le(this),this.depthTest=new ue(this),this.depthFunc=new de(this),this.blend=new Le(this),this.blendFunc=new we(this),this.blendColor=new Ee(this),this.blendEquation=new Oe(this),this.cullFace=new Fe(this),this.cullFaceSide=new pe(this),this.frontFace=new be(this),this.program=new Me(this),this.activeTexture=new De(this),this.viewport=new Ne(this),this.bindFramebuffer=new Be(this),this.bindRenderbuffer=new Ye(this),this.bindTexture=new We(this),this.bindVertexBuffer=new et(this),this.bindElementBuffer=new ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ht(this),this.pixelStoreUnpack=new mt(this),this.pixelStoreUnpackPremultiplyAlpha=new Mt(this),this.pixelStoreUnpackFlipY=new _t(this),this.extTextureFilterAnisotropic=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=B.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=B.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(B.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=B.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=B.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE)};Je.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Je.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Je.prototype.createIndexBuffer=function(B,G){return new ee(this,B,G)},Je.prototype.createVertexBuffer=function(B,G,Y){return new ae(this,B,G,Y)},Je.prototype.createRenderbuffer=function(B,G,Y){var C=this.gl,q=C.createRenderbuffer();return this.bindRenderbuffer.set(q),C.renderbufferStorage(C.RENDERBUFFER,B,G,Y),this.bindRenderbuffer.set(null),q},Je.prototype.createFramebuffer=function(B,G,Y){return new zt(this,B,G,Y)},Je.prototype.clear=function(B){var G=B.color,Y=B.depth,C=this.gl,q=0;G&&(q|=C.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),Y!==void 0&&(q|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Y),this.depthMask.set(!0)),C.clear(q)},Je.prototype.setCullFace=function(B){B.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(B.mode),this.frontFace.set(B.frontFace))},Je.prototype.setDepthMode=function(B){B.func!==this.gl.ALWAYS||B.mask?(this.depthTest.set(!0),this.depthFunc.set(B.func),this.depthMask.set(B.mask),this.depthRange.set(B.range)):this.depthTest.set(!1)},Je.prototype.setStencilMode=function(B){B.test.func!==this.gl.ALWAYS||B.mask?(this.stencilTest.set(!0),this.stencilMask.set(B.mask),this.stencilOp.set([B.fail,B.depthFail,B.pass]),this.stencilFunc.set({func:B.test.func,ref:B.ref,mask:B.test.mask})):this.stencilTest.set(!1)},Je.prototype.setColorMode=function(B){i.deepEqual(B.blendFunction,Ke.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(B.blendFunction),this.blendColor.set(B.blendColor)),this.colorMask.set(B.mask)},Je.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var lt=function(B){function G(Y,C,q){var Q=this;B.call(this),this.id=Y,this.dispatcher=q,this.on("data",function(ne){ne.dataType==="source"&&ne.sourceDataType==="metadata"&&(Q._sourceLoaded=!0),Q._sourceLoaded&&!Q._paused&&ne.dataType==="source"&&ne.sourceDataType==="content"&&(Q.reload(),Q.transform&&Q.update(Q.transform))}),this.on("error",function(){Q._sourceErrored=!0}),this._source=function(ne,he,me,Pe){var ze=new te[he.type](ne,he,me,Pe);if(ze.id!==ne)throw new Error("Expected Source id to be "+ne+" instead of "+ze.id);return i.bindAll(["load","abort","unload","serialize","prepare"],ze),ze}(Y,C,q,this),this._tiles={},this._cache=new K(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new i.SourceFeatureState}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(Y){this.map=Y,this._maxTileCacheSize=Y?Y._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(Y)},G.prototype.onRemove=function(Y){this._source&&this._source.onRemove&&this._source.onRemove(Y)},G.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var Y in this._tiles){var C=this._tiles[Y];if(C.state!=="loaded"&&C.state!=="errored")return!1}return!0},G.prototype.getSource=function(){return this._source},G.prototype.pause=function(){this._paused=!0},G.prototype.resume=function(){if(this._paused){var Y=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,Y&&this.reload(),this.transform&&this.update(this.transform)}},G.prototype._loadTile=function(Y,C){return this._source.loadTile(Y,C)},G.prototype._unloadTile=function(Y){if(this._source.unloadTile)return this._source.unloadTile(Y,function(){})},G.prototype._abortTile=function(Y){if(this._source.abortTile)return this._source.abortTile(Y,function(){})},G.prototype.serialize=function(){return this._source.serialize()},G.prototype.prepare=function(Y){for(var C in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var q=this._tiles[C];q.upload(Y),q.prepare(this.map.style.imageManager)}},G.prototype.getIds=function(){return i.values(this._tiles).map(function(Y){return Y.tileID}).sort(ot).map(function(Y){return Y.key})},G.prototype.getRenderableIds=function(Y){var C=this,q=[];for(var Q in this._tiles)this._isIdRenderable(Q,Y)&&q.push(this._tiles[Q]);return Y?q.sort(function(ne,he){var me=ne.tileID,Pe=he.tileID,ze=new i.Point(me.canonical.x,me.canonical.y)._rotate(C.transform.angle),qe=new i.Point(Pe.canonical.x,Pe.canonical.y)._rotate(C.transform.angle);return me.overscaledZ-Pe.overscaledZ||qe.y-ze.y||qe.x-ze.x}).map(function(ne){return ne.tileID.key}):q.map(function(ne){return ne.tileID}).sort(ot).map(function(ne){return ne.key})},G.prototype.hasRenderableParent=function(Y){var C=this.findLoadedParent(Y,0);return!!C&&this._isIdRenderable(C.tileID.key)},G.prototype._isIdRenderable=function(Y,C){return this._tiles[Y]&&this._tiles[Y].hasData()&&!this._coveredTiles[Y]&&(C||!this._tiles[Y].holdingForFade())},G.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var Y in this._cache.reset(),this._tiles)this._tiles[Y].state!=="errored"&&this._reloadTile(Y,"reloading")},G.prototype._reloadTile=function(Y,C){var q=this._tiles[Y];q&&(q.state!=="loading"&&(q.state=C),this._loadTile(q,this._tileLoaded.bind(this,q,Y,C)))},G.prototype._tileLoaded=function(Y,C,q,Q){if(Q)return Y.state="errored",void(Q.status!==404?this._source.fire(new i.ErrorEvent(Q,{tile:Y})):this.update(this.transform));Y.timeAdded=i.browser.now(),q==="expired"&&(Y.refreshedUponExpiration=!0),this._setTileReloadTimer(C,Y),this.getSource().type==="raster-dem"&&Y.dem&&this._backfillDEM(Y),this._state.initializeTileState(Y,this.map?this.map.painter:null),this._source.fire(new i.Event("data",{dataType:"source",tile:Y,coord:Y.tileID}))},G.prototype._backfillDEM=function(Y){for(var C=this.getRenderableIds(),q=0;q<C.length;q++){var Q=C[q];if(Y.neighboringTiles&&Y.neighboringTiles[Q]){var ne=this.getTileByID(Q);he(Y,ne),he(ne,Y)}}function he(me,Pe){me.needsHillshadePrepare=!0;var ze=Pe.tileID.canonical.x-me.tileID.canonical.x,qe=Pe.tileID.canonical.y-me.tileID.canonical.y,Ze=Math.pow(2,me.tileID.canonical.z),rt=Pe.tileID.key;ze===0&&qe===0||Math.abs(qe)>1||(Math.abs(ze)>1&&(Math.abs(ze+Ze)===1?ze+=Ze:Math.abs(ze-Ze)===1&&(ze-=Ze)),Pe.dem&&me.dem&&(me.dem.backfillBorder(Pe.dem,ze,qe),me.neighboringTiles&&me.neighboringTiles[rt]&&(me.neighboringTiles[rt].backfilled=!0)))}},G.prototype.getTile=function(Y){return this.getTileByID(Y.key)},G.prototype.getTileByID=function(Y){return this._tiles[Y]},G.prototype._retainLoadedChildren=function(Y,C,q,Q){for(var ne in this._tiles){var he=this._tiles[ne];if(!(Q[ne]||!he.hasData()||he.tileID.overscaledZ<=C||he.tileID.overscaledZ>q)){for(var me=he.tileID;he&&he.tileID.overscaledZ>C+1;){var Pe=he.tileID.scaledTo(he.tileID.overscaledZ-1);(he=this._tiles[Pe.key])&&he.hasData()&&(me=Pe)}for(var ze=me;ze.overscaledZ>C;)if(Y[(ze=ze.scaledTo(ze.overscaledZ-1)).key]){Q[me.key]=me;break}}}},G.prototype.findLoadedParent=function(Y,C){if(Y.key in this._loadedParentTiles){var q=this._loadedParentTiles[Y.key];return q&&q.tileID.overscaledZ>=C?q:null}for(var Q=Y.overscaledZ-1;Q>=C;Q--){var ne=Y.scaledTo(Q),he=this._getLoadedTile(ne);if(he)return he}},G.prototype._getLoadedTile=function(Y){var C=this._tiles[Y.key];return C&&C.hasData()?C:this._cache.getByKey(Y.wrapped().key)},G.prototype.updateCacheSize=function(Y){var C=(Math.ceil(Y.width/this._source.tileSize)+1)*(Math.ceil(Y.height/this._source.tileSize)+1),q=Math.floor(5*C),Q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,q):q;this._cache.setMaxSize(Q)},G.prototype.handleWrapJump=function(Y){var C=(Y-(this._prevLng===void 0?Y:this._prevLng))/360,q=Math.round(C);if(this._prevLng=Y,q){var Q={};for(var ne in this._tiles){var he=this._tiles[ne];he.tileID=he.tileID.unwrapTo(he.tileID.wrap+q),Q[he.tileID.key]=he}for(var me in this._tiles=Q,this._timers)clearTimeout(this._timers[me]),delete this._timers[me];for(var Pe in this._tiles){var ze=this._tiles[Pe];this._setTileReloadTimer(Pe,ze)}}},G.prototype.update=function(Y){var C=this;if(this.transform=Y,this._sourceLoaded&&!this._paused){var q;this.updateCacheSize(Y),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?q=Y.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ht){return new i.OverscaledTileID(Ht.canonical.z,Ht.wrap,Ht.canonical.z,Ht.canonical.x,Ht.canonical.y)}):(q=Y.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(q=q.filter(function(Ht){return C._source.hasTile(Ht)}))):q=[];var Q=Y.coveringZoomLevel(this._source),ne=Math.max(Q-G.maxOverzooming,this._source.minzoom),he=Math.max(Q+G.maxUnderzooming,this._source.minzoom),me=this._updateRetainedTiles(q,Q);if(je(this._source.type)){for(var Pe={},ze={},qe=0,Ze=Object.keys(me);qe<Ze.length;qe+=1){var rt=Ze[qe],pt=me[rt],vt=this._tiles[rt];if(vt&&!(vt.fadeEndTime&&vt.fadeEndTime<=i.browser.now())){var kt=this.findLoadedParent(pt,ne);kt&&(this._addTile(kt.tileID),Pe[kt.tileID.key]=kt.tileID),ze[rt]=pt}}for(var Ot in this._retainLoadedChildren(ze,Q,he,me),Pe)me[Ot]||(this._coveredTiles[Ot]=!0,me[Ot]=Pe[Ot])}for(var Et in me)this._tiles[Et].clearFadeHold();for(var jt=0,It=i.keysDifference(this._tiles,me);jt<It.length;jt+=1){var Jt=It[jt],Gt=this._tiles[Jt];Gt.hasSymbolBuckets&&!Gt.holdingForFade()?Gt.setHoldDuration(this.map._fadeDuration):Gt.hasSymbolBuckets&&!Gt.symbolFadeFinished()||this._removeTile(Jt)}this._updateLoadedParentTileCache()}},G.prototype.releaseSymbolFadeTiles=function(){for(var Y in this._tiles)this._tiles[Y].holdingForFade()&&this._removeTile(Y)},G.prototype._updateRetainedTiles=function(Y,C){for(var q={},Q={},ne=Math.max(C-G.maxOverzooming,this._source.minzoom),he=Math.max(C+G.maxUnderzooming,this._source.minzoom),me={},Pe=0,ze=Y;Pe<ze.length;Pe+=1){var qe=ze[Pe],Ze=this._addTile(qe);q[qe.key]=qe,Ze.hasData()||C<this._source.maxzoom&&(me[qe.key]=qe)}this._retainLoadedChildren(me,C,he,q);for(var rt=0,pt=Y;rt<pt.length;rt+=1){var vt=pt[rt],kt=this._tiles[vt.key];if(!kt.hasData()){if(C+1>this._source.maxzoom){var Ot=vt.children(this._source.maxzoom)[0],Et=this.getTile(Ot);if(Et&&Et.hasData()){q[Ot.key]=Ot;continue}}else{var jt=vt.children(this._source.maxzoom);if(q[jt[0].key]&&q[jt[1].key]&&q[jt[2].key]&&q[jt[3].key])continue}for(var It=kt.wasRequested(),Jt=vt.overscaledZ-1;Jt>=ne;--Jt){var Gt=vt.scaledTo(Jt);if(Q[Gt.key]||(Q[Gt.key]=!0,!(kt=this.getTile(Gt))&&It&&(kt=this._addTile(Gt)),kt&&(q[Gt.key]=Gt,It=kt.wasRequested(),kt.hasData())))break}}}return q},G.prototype._updateLoadedParentTileCache=function(){for(var Y in this._loadedParentTiles={},this._tiles){for(var C=[],q=void 0,Q=this._tiles[Y].tileID;Q.overscaledZ>0;){if(Q.key in this._loadedParentTiles){q=this._loadedParentTiles[Q.key];break}C.push(Q.key);var ne=Q.scaledTo(Q.overscaledZ-1);if(q=this._getLoadedTile(ne))break;Q=ne}for(var he=0,me=C;he<me.length;he+=1){var Pe=me[he];this._loadedParentTiles[Pe]=q}}},G.prototype._addTile=function(Y){var C=this._tiles[Y.key];if(C)return C;(C=this._cache.getAndRemove(Y))&&(this._setTileReloadTimer(Y.key,C),C.tileID=Y,this._state.initializeTileState(C,this.map?this.map.painter:null),this._cacheTimers[Y.key]&&(clearTimeout(this._cacheTimers[Y.key]),delete this._cacheTimers[Y.key],this._setTileReloadTimer(Y.key,C)));var q=!!C;return q||(C=new i.Tile(Y,this._source.tileSize*Y.overscaleFactor()),this._loadTile(C,this._tileLoaded.bind(this,C,Y.key,C.state))),C?(C.uses++,this._tiles[Y.key]=C,q||this._source.fire(new i.Event("dataloading",{tile:C,coord:C.tileID,dataType:"source"})),C):null},G.prototype._setTileReloadTimer=function(Y,C){var q=this;Y in this._timers&&(clearTimeout(this._timers[Y]),delete this._timers[Y]);var Q=C.getExpiryTimeout();Q&&(this._timers[Y]=setTimeout(function(){q._reloadTile(Y,"expired"),delete q._timers[Y]},Q))},G.prototype._removeTile=function(Y){var C=this._tiles[Y];C&&(C.uses--,delete this._tiles[Y],this._timers[Y]&&(clearTimeout(this._timers[Y]),delete this._timers[Y]),C.uses>0||(C.hasData()&&C.state!=="reloading"?this._cache.add(C.tileID,C,C.getExpiryTimeout()):(C.aborted=!0,this._abortTile(C),this._unloadTile(C))))},G.prototype.clearTiles=function(){for(var Y in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(Y);this._cache.reset()},G.prototype.tilesIn=function(Y,C,q){var Q=this,ne=[],he=this.transform;if(!he)return ne;for(var me=q?he.getCameraQueryGeometry(Y):Y,Pe=Y.map(function(Jt){return he.pointCoordinate(Jt)}),ze=me.map(function(Jt){return he.pointCoordinate(Jt)}),qe=this.getIds(),Ze=1/0,rt=1/0,pt=-1/0,vt=-1/0,kt=0,Ot=ze;kt<Ot.length;kt+=1){var Et=Ot[kt];Ze=Math.min(Ze,Et.x),rt=Math.min(rt,Et.y),pt=Math.max(pt,Et.x),vt=Math.max(vt,Et.y)}for(var jt=function(Jt){var Gt=Q._tiles[qe[Jt]];if(!Gt.holdingForFade()){var Ht=Gt.tileID,mn=Math.pow(2,he.zoom-Gt.tileID.overscaledZ),yn=C*Gt.queryPadding*i.EXTENT/Gt.tileSize/mn,In=[Ht.getTilePoint(new i.MercatorCoordinate(Ze,rt)),Ht.getTilePoint(new i.MercatorCoordinate(pt,vt))];if(In[0].x-yn<i.EXTENT&&In[0].y-yn<i.EXTENT&&In[1].x+yn>=0&&In[1].y+yn>=0){var Rn=Pe.map(function(er){return Ht.getTilePoint(er)}),Yn=ze.map(function(er){return Ht.getTilePoint(er)});ne.push({tile:Gt,tileID:Ht,queryGeometry:Rn,cameraQueryGeometry:Yn,scale:mn})}}},It=0;It<qe.length;It++)jt(It);return ne},G.prototype.getVisibleCoordinates=function(Y){for(var C=this,q=this.getRenderableIds(Y).map(function(me){return C._tiles[me].tileID}),Q=0,ne=q;Q<ne.length;Q+=1){var he=ne[Q];he.posMatrix=this.transform.calculatePosMatrix(he.toUnwrapped())}return q},G.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(je(this._source.type))for(var Y in this._tiles){var C=this._tiles[Y];if(C.fadeEndTime!==void 0&&C.fadeEndTime>=i.browser.now())return!0}return!1},G.prototype.setFeatureState=function(Y,C,q){Y=Y||"_geojsonTileLayer",this._state.updateState(Y,C,q)},G.prototype.removeFeatureState=function(Y,C,q){Y=Y||"_geojsonTileLayer",this._state.removeFeatureState(Y,C,q)},G.prototype.getFeatureState=function(Y,C){return Y=Y||"_geojsonTileLayer",this._state.getState(Y,C)},G.prototype.setDependencies=function(Y,C,q){var Q=this._tiles[Y];Q&&Q.setDependencies(C,q)},G.prototype.reloadTilesForDependencies=function(Y,C){for(var q in this._tiles)this._tiles[q].hasDependency(Y,C)&&this._reloadTile(q,"reloading");this._cache.filter(function(Q){return!Q.hasDependency(Y,C)})},G}(i.Evented);function ot(B,G){var Y=Math.abs(2*B.wrap)-+(B.wrap<0),C=Math.abs(2*G.wrap)-+(G.wrap<0);return B.overscaledZ-G.overscaledZ||C-Y||G.canonical.y-B.canonical.y||G.canonical.x-B.canonical.x}function je(B){return B==="raster"||B==="image"||B==="video"}function Ue(){return new i.window.Worker(ut.workerUrl)}lt.maxOverzooming=10,lt.maxUnderzooming=3;var at="mapboxgl_preloaded_worker_pool",$e=function(){this.active={}};$e.prototype.acquire=function(B){if(!this.workers)for(this.workers=[];this.workers.length<$e.workerCount;)this.workers.push(new Ue);return this.active[B]=!0,this.workers.slice()},$e.prototype.release=function(B){delete this.active[B],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},$e.prototype.isPreloaded=function(){return!!this.active[at]},$e.prototype.numActive=function(){return Object.keys(this.active).length};var gt,yt=Math.floor(i.browser.hardwareConcurrency/2);function xt(){return gt||(gt=new $e),gt}function dt(B,G){var Y={};for(var C in B)C!=="ref"&&(Y[C]=B[C]);return i.refProperties.forEach(function(q){q in G&&(Y[q]=G[q])}),Y}function Lt(B){B=B.slice();for(var G=Object.create(null),Y=0;Y<B.length;Y++)G[B[Y].id]=B[Y];for(var C=0;C<B.length;C++)"ref"in B[C]&&(B[C]=dt(B[C],G[B[C].ref]));return B}$e.workerCount=Math.max(Math.min(yt,6),1);var Tt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function bt(B,G,Y){Y.push({command:Tt.addSource,args:[B,G[B]]})}function Ct(B,G,Y){G.push({command:Tt.removeSource,args:[B]}),Y[B]=!0}function Dt(B,G,Y,C){Ct(B,Y,C),bt(B,G,Y)}function Bt(B,G,Y){var C;for(C in B[Y])if(B[Y].hasOwnProperty(C)&&C!=="data"&&!i.deepEqual(B[Y][C],G[Y][C]))return!1;for(C in G[Y])if(G[Y].hasOwnProperty(C)&&C!=="data"&&!i.deepEqual(B[Y][C],G[Y][C]))return!1;return!0}function Xt(B,G,Y,C,q,Q){var ne;for(ne in G=G||{},B=B||{})B.hasOwnProperty(ne)&&(i.deepEqual(B[ne],G[ne])||Y.push({command:Q,args:[C,ne,G[ne],q]}));for(ne in G)G.hasOwnProperty(ne)&&!B.hasOwnProperty(ne)&&(i.deepEqual(B[ne],G[ne])||Y.push({command:Q,args:[C,ne,G[ne],q]}))}function an(B){return B.id}function Wt(B,G){return B[G.id]=G,B}function Vt(B,G){if(!B)return[{command:Tt.setStyle,args:[G]}];var Y=[];try{if(!i.deepEqual(B.version,G.version))return[{command:Tt.setStyle,args:[G]}];i.deepEqual(B.center,G.center)||Y.push({command:Tt.setCenter,args:[G.center]}),i.deepEqual(B.zoom,G.zoom)||Y.push({command:Tt.setZoom,args:[G.zoom]}),i.deepEqual(B.bearing,G.bearing)||Y.push({command:Tt.setBearing,args:[G.bearing]}),i.deepEqual(B.pitch,G.pitch)||Y.push({command:Tt.setPitch,args:[G.pitch]}),i.deepEqual(B.sprite,G.sprite)||Y.push({command:Tt.setSprite,args:[G.sprite]}),i.deepEqual(B.glyphs,G.glyphs)||Y.push({command:Tt.setGlyphs,args:[G.glyphs]}),i.deepEqual(B.transition,G.transition)||Y.push({command:Tt.setTransition,args:[G.transition]}),i.deepEqual(B.light,G.light)||Y.push({command:Tt.setLight,args:[G.light]});var C={},q=[];(function(ne,he,me,Pe){var ze;for(ze in he=he||{},ne=ne||{})ne.hasOwnProperty(ze)&&(he.hasOwnProperty(ze)||Ct(ze,me,Pe));for(ze in he)he.hasOwnProperty(ze)&&(ne.hasOwnProperty(ze)?i.deepEqual(ne[ze],he[ze])||(ne[ze].type==="geojson"&&he[ze].type==="geojson"&&Bt(ne,he,ze)?me.push({command:Tt.setGeoJSONSourceData,args:[ze,he[ze].data]}):Dt(ze,he,me,Pe)):bt(ze,he,me))})(B.sources,G.sources,q,C);var Q=[];B.layers&&B.layers.forEach(function(ne){C[ne.source]?Y.push({command:Tt.removeLayer,args:[ne.id]}):Q.push(ne)}),Y=Y.concat(q),function(ne,he,me){he=he||[];var Pe,ze,qe,Ze,rt,pt,vt,kt=(ne=ne||[]).map(an),Ot=he.map(an),Et=ne.reduce(Wt,{}),jt=he.reduce(Wt,{}),It=kt.slice(),Jt=Object.create(null);for(Pe=0,ze=0;Pe<kt.length;Pe++)qe=kt[Pe],jt.hasOwnProperty(qe)?ze++:(me.push({command:Tt.removeLayer,args:[qe]}),It.splice(It.indexOf(qe,ze),1));for(Pe=0,ze=0;Pe<Ot.length;Pe++)qe=Ot[Ot.length-1-Pe],It[It.length-1-Pe]!==qe&&(Et.hasOwnProperty(qe)?(me.push({command:Tt.removeLayer,args:[qe]}),It.splice(It.lastIndexOf(qe,It.length-ze),1)):ze++,pt=It[It.length-Pe],me.push({command:Tt.addLayer,args:[jt[qe],pt]}),It.splice(It.length-Pe,0,qe),Jt[qe]=!0);for(Pe=0;Pe<Ot.length;Pe++)if(Ze=Et[qe=Ot[Pe]],rt=jt[qe],!Jt[qe]&&!i.deepEqual(Ze,rt))if(i.deepEqual(Ze.source,rt.source)&&i.deepEqual(Ze["source-layer"],rt["source-layer"])&&i.deepEqual(Ze.type,rt.type)){for(vt in Xt(Ze.layout,rt.layout,me,qe,null,Tt.setLayoutProperty),Xt(Ze.paint,rt.paint,me,qe,null,Tt.setPaintProperty),i.deepEqual(Ze.filter,rt.filter)||me.push({command:Tt.setFilter,args:[qe,rt.filter]}),i.deepEqual(Ze.minzoom,rt.minzoom)&&i.deepEqual(Ze.maxzoom,rt.maxzoom)||me.push({command:Tt.setLayerZoomRange,args:[qe,rt.minzoom,rt.maxzoom]}),Ze)Ze.hasOwnProperty(vt)&&vt!=="layout"&&vt!=="paint"&&vt!=="filter"&&vt!=="metadata"&&vt!=="minzoom"&&vt!=="maxzoom"&&(vt.indexOf("paint.")===0?Xt(Ze[vt],rt[vt],me,qe,vt.slice(6),Tt.setPaintProperty):i.deepEqual(Ze[vt],rt[vt])||me.push({command:Tt.setLayerProperty,args:[qe,vt,rt[vt]]}));for(vt in rt)rt.hasOwnProperty(vt)&&!Ze.hasOwnProperty(vt)&&vt!=="layout"&&vt!=="paint"&&vt!=="filter"&&vt!=="metadata"&&vt!=="minzoom"&&vt!=="maxzoom"&&(vt.indexOf("paint.")===0?Xt(Ze[vt],rt[vt],me,qe,vt.slice(6),Tt.setPaintProperty):i.deepEqual(Ze[vt],rt[vt])||me.push({command:Tt.setLayerProperty,args:[qe,vt,rt[vt]]}))}else me.push({command:Tt.removeLayer,args:[qe]}),pt=It[It.lastIndexOf(qe)+1],me.push({command:Tt.addLayer,args:[rt,pt]})}(Q,G.layers,Y)}catch(ne){console.warn("Unable to compute style diff:",ne),Y=[{command:Tt.setStyle,args:[G]}]}return Y}var on=function(B,G){this.reset(B,G)};on.prototype.reset=function(B,G){this.points=B||[],this._distances=[0];for(var Y=1;Y<this.points.length;Y++)this._distances[Y]=this._distances[Y-1]+this.points[Y].dist(this.points[Y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,.5*this.length),this.paddedLength=this.length-2*this.padding},on.prototype.lerp=function(B){if(this.points.length===1)return this.points[0];B=i.clamp(B,0,1);for(var G=1,Y=this._distances[G],C=B*this.paddedLength+this.padding;Y<C&&G<this._distances.length;)Y=this._distances[++G];var q=G-1,Q=this._distances[q],ne=Y-Q,he=ne>0?(C-Q)/ne:0;return this.points[q].mult(1-he).add(this.points[G].mult(he))};var Sn=function(B,G,Y){var C=this.boxCells=[],q=this.circleCells=[];this.xCellCount=Math.ceil(B/Y),this.yCellCount=Math.ceil(G/Y);for(var Q=0;Q<this.xCellCount*this.yCellCount;Q++)C.push([]),q.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=B,this.height=G,this.xScale=this.xCellCount/B,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};function Ln(B,G,Y,C,q){var Q=i.create();return G?(i.scale(Q,Q,[1/q,1/q,1]),Y||i.rotateZ(Q,Q,C.angle)):i.multiply(Q,C.labelPlaneMatrix,B),Q}function fn(B,G,Y,C,q){if(G){var Q=i.clone(B);return i.scale(Q,Q,[q,q,1]),Y||i.rotateZ(Q,Q,-C.angle),Q}return C.glCoordMatrix}function Zt(B,G){var Y=[B.x,B.y,0,1];sr(Y,Y,G);var C=Y[3];return{point:new i.Point(Y[0]/C,Y[1]/C),signedDistanceFromCamera:C}}function ln(B,G){return .5+B/G*.5}function nn(B,G){var Y=B[0]/B[3],C=B[1]/B[3];return Y>=-G[0]&&Y<=G[0]&&C>=-G[1]&&C<=G[1]}function cn(B,G,Y,C,q,Q,ne,he){var me=C?B.textSizeData:B.iconSizeData,Pe=i.evaluateSizeForZoom(me,Y.transform.zoom),ze=[256/Y.width*2+1,256/Y.height*2+1],qe=C?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;qe.clear();for(var Ze=B.lineVertexArray,rt=C?B.text.placedSymbolArray:B.icon.placedSymbolArray,pt=Y.transform.width/Y.transform.height,vt=!1,kt=0;kt<rt.length;kt++){var Ot=rt.get(kt);if(Ot.hidden||Ot.writingMode===i.WritingMode.vertical&&!vt)qn(Ot.numGlyphs,qe);else{vt=!1;var Et=[Ot.anchorX,Ot.anchorY,0,1];if(i.transformMat4(Et,Et,G),nn(Et,ze)){var jt=Et[3],It=ln(Y.transform.cameraToCenterDistance,jt),Jt=i.evaluateSizeForFeature(me,Pe,Ot),Gt=ne?Jt/It:Jt*It,Ht=new i.Point(Ot.anchorX,Ot.anchorY),mn=Zt(Ht,q).point,yn={},In=wn(Ot,Gt,!1,he,G,q,Q,B.glyphOffsetArray,Ze,qe,mn,Ht,yn,pt);vt=In.useVertical,(In.notEnoughRoom||vt||In.needsFlipping&&wn(Ot,Gt,!0,he,G,q,Q,B.glyphOffsetArray,Ze,qe,mn,Ht,yn,pt).notEnoughRoom)&&qn(Ot.numGlyphs,qe)}else qn(Ot.numGlyphs,qe)}}C?B.text.dynamicLayoutVertexBuffer.updateData(qe):B.icon.dynamicLayoutVertexBuffer.updateData(qe)}function kn(B,G,Y,C,q,Q,ne,he,me,Pe,ze){var qe=he.glyphStartIndex+he.numGlyphs,Ze=he.lineStartIndex,rt=he.lineStartIndex+he.lineLength,pt=G.getoffsetX(he.glyphStartIndex),vt=G.getoffsetX(qe-1),kt=_n(B*pt,Y,C,q,Q,ne,he.segment,Ze,rt,me,Pe,ze);if(!kt)return null;var Ot=_n(B*vt,Y,C,q,Q,ne,he.segment,Ze,rt,me,Pe,ze);return Ot?{first:kt,last:Ot}:null}function An(B,G,Y,C){return B===i.WritingMode.horizontal&&Math.abs(Y.y-G.y)>Math.abs(Y.x-G.x)*C?{useVertical:!0}:(B===i.WritingMode.vertical?G.y<Y.y:G.x>Y.x)?{needsFlipping:!0}:null}function wn(B,G,Y,C,q,Q,ne,he,me,Pe,ze,qe,Ze,rt){var pt,vt=G/24,kt=B.lineOffsetX*vt,Ot=B.lineOffsetY*vt;if(B.numGlyphs>1){var Et=B.glyphStartIndex+B.numGlyphs,jt=B.lineStartIndex,It=B.lineStartIndex+B.lineLength,Jt=kn(vt,he,kt,Ot,Y,ze,qe,B,me,Q,Ze);if(!Jt)return{notEnoughRoom:!0};var Gt=Zt(Jt.first.point,ne).point,Ht=Zt(Jt.last.point,ne).point;if(C&&!Y){var mn=An(B.writingMode,Gt,Ht,rt);if(mn)return mn}pt=[Jt.first];for(var yn=B.glyphStartIndex+1;yn<Et-1;yn++)pt.push(_n(vt*he.getoffsetX(yn),kt,Ot,Y,ze,qe,B.segment,jt,It,me,Q,Ze));pt.push(Jt.last)}else{if(C&&!Y){var In=Zt(qe,q).point,Rn=B.lineStartIndex+B.segment+1,Yn=new i.Point(me.getx(Rn),me.gety(Rn)),er=Zt(Yn,q),dr=er.signedDistanceFromCamera>0?er.point:Cn(qe,Yn,In,1,q),Xn=An(B.writingMode,In,dr,rt);if(Xn)return Xn}var cr=_n(vt*he.getoffsetX(B.glyphStartIndex),kt,Ot,Y,ze,qe,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,me,Q,Ze);if(!cr)return{notEnoughRoom:!0};pt=[cr]}for(var Tr=0,Rr=pt;Tr<Rr.length;Tr+=1){var $n=Rr[Tr];i.addDynamicAttributes(Pe,$n.point,$n.angle)}return{}}function Cn(B,G,Y,C,q){var Q=Zt(B.add(B.sub(G)._unit()),q).point,ne=Y.sub(Q);return Y.add(ne._mult(C/ne.mag()))}function _n(B,G,Y,C,q,Q,ne,he,me,Pe,ze,qe){var Ze=C?B-G:B+G,rt=Ze>0?1:-1,pt=0;C&&(rt*=-1,pt=Math.PI),rt<0&&(pt+=Math.PI);for(var vt=rt>0?he+ne:he+ne+1,kt=q,Ot=q,Et=0,jt=0,It=Math.abs(Ze),Jt=[];Et+jt<=It;){if((vt+=rt)<he||vt>=me)return null;if(Ot=kt,Jt.push(kt),(kt=qe[vt])===void 0){var Gt=new i.Point(Pe.getx(vt),Pe.gety(vt)),Ht=Zt(Gt,ze);if(Ht.signedDistanceFromCamera>0)kt=qe[vt]=Ht.point;else{var mn=vt-rt;kt=Cn(Et===0?Q:new i.Point(Pe.getx(mn),Pe.gety(mn)),Gt,Ot,It-Et+1,ze)}}Et+=jt,jt=Ot.dist(kt)}var yn=(It-Et)/jt,In=kt.sub(Ot),Rn=In.mult(yn)._add(Ot);Rn._add(In._unit()._perp()._mult(Y*rt));var Yn=pt+Math.atan2(kt.y-Ot.y,kt.x-Ot.x);return Jt.push(Rn),{point:Rn,angle:Yn,path:Jt}}Sn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Sn.prototype.insert=function(B,G,Y,C,q){this._forEachCell(G,Y,C,q,this._insertBoxCell,this.boxUid++),this.boxKeys.push(B),this.bboxes.push(G),this.bboxes.push(Y),this.bboxes.push(C),this.bboxes.push(q)},Sn.prototype.insertCircle=function(B,G,Y,C){this._forEachCell(G-C,Y-C,G+C,Y+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(B),this.circles.push(G),this.circles.push(Y),this.circles.push(C)},Sn.prototype._insertBoxCell=function(B,G,Y,C,q,Q){this.boxCells[q].push(Q)},Sn.prototype._insertCircleCell=function(B,G,Y,C,q,Q){this.circleCells[q].push(Q)},Sn.prototype._query=function(B,G,Y,C,q,Q){if(Y<0||B>this.width||C<0||G>this.height)return!q&&[];var ne=[];if(B<=0&&G<=0&&this.width<=Y&&this.height<=C){if(q)return!0;for(var he=0;he<this.boxKeys.length;he++)ne.push({key:this.boxKeys[he],x1:this.bboxes[4*he],y1:this.bboxes[4*he+1],x2:this.bboxes[4*he+2],y2:this.bboxes[4*he+3]});for(var me=0;me<this.circleKeys.length;me++){var Pe=this.circles[3*me],ze=this.circles[3*me+1],qe=this.circles[3*me+2];ne.push({key:this.circleKeys[me],x1:Pe-qe,y1:ze-qe,x2:Pe+qe,y2:ze+qe})}return Q?ne.filter(Q):ne}var Ze={hitTest:q,seenUids:{box:{},circle:{}}};return this._forEachCell(B,G,Y,C,this._queryCell,ne,Ze,Q),q?ne.length>0:ne},Sn.prototype._queryCircle=function(B,G,Y,C,q){var Q=B-Y,ne=B+Y,he=G-Y,me=G+Y;if(ne<0||Q>this.width||me<0||he>this.height)return!C&&[];var Pe=[],ze={hitTest:C,circle:{x:B,y:G,radius:Y},seenUids:{box:{},circle:{}}};return this._forEachCell(Q,he,ne,me,this._queryCellCircle,Pe,ze,q),C?Pe.length>0:Pe},Sn.prototype.query=function(B,G,Y,C,q){return this._query(B,G,Y,C,!1,q)},Sn.prototype.hitTest=function(B,G,Y,C,q){return this._query(B,G,Y,C,!0,q)},Sn.prototype.hitTestCircle=function(B,G,Y,C){return this._queryCircle(B,G,Y,!0,C)},Sn.prototype._queryCell=function(B,G,Y,C,q,Q,ne,he){var me=ne.seenUids,Pe=this.boxCells[q];if(Pe!==null)for(var ze=this.bboxes,qe=0,Ze=Pe;qe<Ze.length;qe+=1){var rt=Ze[qe];if(!me.box[rt]){me.box[rt]=!0;var pt=4*rt;if(B<=ze[pt+2]&&G<=ze[pt+3]&&Y>=ze[pt+0]&&C>=ze[pt+1]&&(!he||he(this.boxKeys[rt]))){if(ne.hitTest)return Q.push(!0),!0;Q.push({key:this.boxKeys[rt],x1:ze[pt],y1:ze[pt+1],x2:ze[pt+2],y2:ze[pt+3]})}}}var vt=this.circleCells[q];if(vt!==null)for(var kt=this.circles,Ot=0,Et=vt;Ot<Et.length;Ot+=1){var jt=Et[Ot];if(!me.circle[jt]){me.circle[jt]=!0;var It=3*jt;if(this._circleAndRectCollide(kt[It],kt[It+1],kt[It+2],B,G,Y,C)&&(!he||he(this.circleKeys[jt]))){if(ne.hitTest)return Q.push(!0),!0;var Jt=kt[It],Gt=kt[It+1],Ht=kt[It+2];Q.push({key:this.circleKeys[jt],x1:Jt-Ht,y1:Gt-Ht,x2:Jt+Ht,y2:Gt+Ht})}}}},Sn.prototype._queryCellCircle=function(B,G,Y,C,q,Q,ne,he){var me=ne.circle,Pe=ne.seenUids,ze=this.boxCells[q];if(ze!==null)for(var qe=this.bboxes,Ze=0,rt=ze;Ze<rt.length;Ze+=1){var pt=rt[Ze];if(!Pe.box[pt]){Pe.box[pt]=!0;var vt=4*pt;if(this._circleAndRectCollide(me.x,me.y,me.radius,qe[vt+0],qe[vt+1],qe[vt+2],qe[vt+3])&&(!he||he(this.boxKeys[pt])))return Q.push(!0),!0}}var kt=this.circleCells[q];if(kt!==null)for(var Ot=this.circles,Et=0,jt=kt;Et<jt.length;Et+=1){var It=jt[Et];if(!Pe.circle[It]){Pe.circle[It]=!0;var Jt=3*It;if(this._circlesCollide(Ot[Jt],Ot[Jt+1],Ot[Jt+2],me.x,me.y,me.radius)&&(!he||he(this.circleKeys[It])))return Q.push(!0),!0}}},Sn.prototype._forEachCell=function(B,G,Y,C,q,Q,ne,he){for(var me=this._convertToXCellCoord(B),Pe=this._convertToYCellCoord(G),ze=this._convertToXCellCoord(Y),qe=this._convertToYCellCoord(C),Ze=me;Ze<=ze;Ze++)for(var rt=Pe;rt<=qe;rt++){var pt=this.xCellCount*rt+Ze;if(q.call(this,B,G,Y,C,pt,Q,ne,he))return}},Sn.prototype._convertToXCellCoord=function(B){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(B*this.xScale)))},Sn.prototype._convertToYCellCoord=function(B){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(B*this.yScale)))},Sn.prototype._circlesCollide=function(B,G,Y,C,q,Q){var ne=C-B,he=q-G,me=Y+Q;return me*me>ne*ne+he*he},Sn.prototype._circleAndRectCollide=function(B,G,Y,C,q,Q,ne){var he=(Q-C)/2,me=Math.abs(B-(C+he));if(me>he+Y)return!1;var Pe=(ne-q)/2,ze=Math.abs(G-(q+Pe));if(ze>Pe+Y)return!1;if(me<=he||ze<=Pe)return!0;var qe=me-he,Ze=ze-Pe;return qe*qe+Ze*Ze<=Y*Y};var zn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qn(B,G){for(var Y=0;Y<B;Y++){var C=G.length;G.resize(C+4),G.float32.set(zn,3*C)}}function sr(B,G,Y){var C=G[0],q=G[1];return B[0]=Y[0]*C+Y[4]*q+Y[12],B[1]=Y[1]*C+Y[5]*q+Y[13],B[3]=Y[3]*C+Y[7]*q+Y[15],B}var pr=100,ir=function(B,G,Y){G===void 0&&(G=new Sn(B.width+200,B.height+200,25)),Y===void 0&&(Y=new Sn(B.width+200,B.height+200,25)),this.transform=B,this.grid=G,this.ignoredGrid=Y,this.pitchfactor=Math.cos(B._pitch)*B.cameraToCenterDistance,this.screenRightBoundary=B.width+pr,this.screenBottomBoundary=B.height+pr,this.gridRightBoundary=B.width+200,this.gridBottomBoundary=B.height+200};function Jn(B,G,Y){return G*(i.EXTENT/(B.tileSize*Math.pow(2,Y-B.tileID.overscaledZ)))}ir.prototype.placeCollisionBox=function(B,G,Y,C,q){var Q=this.projectAndGetPerspectiveRatio(C,B.anchorPointX,B.anchorPointY),ne=Y*Q.perspectiveRatio,he=B.x1*ne+Q.point.x,me=B.y1*ne+Q.point.y,Pe=B.x2*ne+Q.point.x,ze=B.y2*ne+Q.point.y;return!this.isInsideGrid(he,me,Pe,ze)||!G&&this.grid.hitTest(he,me,Pe,ze,q)?{box:[],offscreen:!1}:{box:[he,me,Pe,ze],offscreen:this.isOffscreen(he,me,Pe,ze)}},ir.prototype.placeCollisionCircles=function(B,G,Y,C,q,Q,ne,he,me,Pe,ze,qe,Ze){var rt=[],pt=new i.Point(G.anchorX,G.anchorY),vt=Zt(pt,Q),kt=ln(this.transform.cameraToCenterDistance,vt.signedDistanceFromCamera),Ot=(Pe?q/kt:q*kt)/i.ONE_EM,Et=Zt(pt,ne).point,jt=kn(Ot,C,G.lineOffsetX*Ot,G.lineOffsetY*Ot,!1,Et,pt,G,Y,ne,{}),It=!1,Jt=!1,Gt=!0;if(jt){for(var Ht=.5*qe*kt+Ze,mn=new i.Point(-100,-100),yn=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),In=new on,Rn=jt.first,Yn=jt.last,er=[],dr=Rn.path.length-1;dr>=1;dr--)er.push(Rn.path[dr]);for(var Xn=1;Xn<Yn.path.length;Xn++)er.push(Yn.path[Xn]);var cr=2.5*Ht;if(he){var Tr=er.map(function(si){return Zt(si,he)});er=Tr.some(function(si){return si.signedDistanceFromCamera<=0})?[]:Tr.map(function(si){return si.point})}var Rr=[];if(er.length>0){for(var $n=er[0].clone(),ur=er[0].clone(),Sr=1;Sr<er.length;Sr++)$n.x=Math.min($n.x,er[Sr].x),$n.y=Math.min($n.y,er[Sr].y),ur.x=Math.max(ur.x,er[Sr].x),ur.y=Math.max(ur.y,er[Sr].y);Rr=$n.x>=mn.x&&ur.x<=yn.x&&$n.y>=mn.y&&ur.y<=yn.y?[er]:ur.x<mn.x||$n.x>yn.x||ur.y<mn.y||$n.y>yn.y?[]:i.clipLine([er],mn.x,mn.y,yn.x,yn.y)}for(var gr=0,Pr=Rr;gr<Pr.length;gr+=1){var jr=Pr[gr];In.reset(jr,.25*Ht);var Xr;Xr=In.length<=.5*Ht?1:Math.ceil(In.paddedLength/cr)+1;for(var Kr=0;Kr<Xr;Kr++){var ni=Kr/Math.max(Xr-1,1),ai=In.lerp(ni),Li=ai.x+pr,Ki=ai.y+pr;rt.push(Li,Ki,Ht,0);var Pa=Li-Ht,pa=Ki-Ht,Ma=Li+Ht,zi=Ki+Ht;if(Gt=Gt&&this.isOffscreen(Pa,pa,Ma,zi),Jt=Jt||this.isInsideGrid(Pa,pa,Ma,zi),!B&&this.grid.hitTestCircle(Li,Ki,Ht,ze)&&(It=!0,!me))return{circles:[],offscreen:!1,collisionDetected:It}}}}return{circles:!me&&It||!Jt?[]:rt,offscreen:Gt,collisionDetected:It}},ir.prototype.queryRenderedSymbols=function(B){if(B.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],Y=1/0,C=1/0,q=-1/0,Q=-1/0,ne=0,he=B;ne<he.length;ne+=1){var me=he[ne],Pe=new i.Point(me.x+pr,me.y+pr);Y=Math.min(Y,Pe.x),C=Math.min(C,Pe.y),q=Math.max(q,Pe.x),Q=Math.max(Q,Pe.y),G.push(Pe)}for(var ze={},qe={},Ze=0,rt=this.grid.query(Y,C,q,Q).concat(this.ignoredGrid.query(Y,C,q,Q));Ze<rt.length;Ze+=1){var pt=rt[Ze],vt=pt.key;if(ze[vt.bucketInstanceId]===void 0&&(ze[vt.bucketInstanceId]={}),!ze[vt.bucketInstanceId][vt.featureIndex]){var kt=[new i.Point(pt.x1,pt.y1),new i.Point(pt.x2,pt.y1),new i.Point(pt.x2,pt.y2),new i.Point(pt.x1,pt.y2)];i.polygonIntersectsPolygon(G,kt)&&(ze[vt.bucketInstanceId][vt.featureIndex]=!0,qe[vt.bucketInstanceId]===void 0&&(qe[vt.bucketInstanceId]=[]),qe[vt.bucketInstanceId].push(vt.featureIndex))}}return qe},ir.prototype.insertCollisionBox=function(B,G,Y,C,q){var Q={bucketInstanceId:Y,featureIndex:C,collisionGroupID:q};(G?this.ignoredGrid:this.grid).insert(Q,B[0],B[1],B[2],B[3])},ir.prototype.insertCollisionCircles=function(B,G,Y,C,q){for(var Q=G?this.ignoredGrid:this.grid,ne={bucketInstanceId:Y,featureIndex:C,collisionGroupID:q},he=0;he<B.length;he+=4)Q.insertCircle(ne,B[he],B[he+1],B[he+2])},ir.prototype.projectAndGetPerspectiveRatio=function(B,G,Y){var C=[G,Y,0,1];return sr(C,C,B),{point:new i.Point((C[0]/C[3]+1)/2*this.transform.width+pr,(-C[1]/C[3]+1)/2*this.transform.height+pr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}},ir.prototype.isOffscreen=function(B,G,Y,C){return Y<pr||B>=this.screenRightBoundary||C<pr||G>this.screenBottomBoundary},ir.prototype.isInsideGrid=function(B,G,Y,C){return Y>=0&&B<this.gridRightBoundary&&C>=0&&G<this.gridBottomBoundary},ir.prototype.getViewportMatrix=function(){var B=i.identity([]);return i.translate(B,B,[-100,-100,0]),B};var mr=function(B,G,Y,C){this.opacity=B?Math.max(0,Math.min(1,B.opacity+(B.placed?G:-G))):C&&Y?1:0,this.placed=Y};mr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var qt=function(B,G,Y,C,q){this.text=new mr(B?B.text:null,G,Y,q),this.icon=new mr(B?B.icon:null,G,C,q)};qt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var tn=function(B,G,Y){this.text=B,this.icon=G,this.skipFade=Y},dn=function(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]},vn=function(B,G,Y,C,q){this.bucketInstanceId=B,this.featureIndex=G,this.sourceLayerIndex=Y,this.bucketIndex=C,this.tileID=q},On=function(B){this.crossSourceCollisions=B,this.maxGroupID=0,this.collisionGroups={}};function Hn(B,G,Y,C,q){var Q=i.getAnchorAlignment(B),ne=-(Q.horizontalAlign-.5)*G,he=-(Q.verticalAlign-.5)*Y,me=i.evaluateVariableOffset(B,C);return new i.Point(ne+me[0]*q,he+me[1]*q)}function Bn(B,G,Y,C,q,Q){var ne=B.x1,he=B.x2,me=B.y1,Pe=B.y2,ze=B.anchorPointX,qe=B.anchorPointY,Ze=new i.Point(G,Y);return C&&Ze._rotate(q?Q:-Q),{x1:ne+Ze.x,y1:me+Ze.y,x2:he+Ze.x,y2:Pe+Ze.y,anchorPointX:ze,anchorPointY:qe}}On.prototype.get=function(B){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[B]){var G=++this.maxGroupID;this.collisionGroups[B]={ID:G,predicate:function(Y){return Y.collisionGroupID===G}}}return this.collisionGroups[B]};var Vn=function(B,G,Y,C){this.transform=B.clone(),this.collisionIndex=new ir(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new On(Y),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}};function nr(B,G,Y,C,q){B.emplaceBack(G?1:0,Y?1:0,C||0,q||0),B.emplaceBack(G?1:0,Y?1:0,C||0,q||0),B.emplaceBack(G?1:0,Y?1:0,C||0,q||0),B.emplaceBack(G?1:0,Y?1:0,C||0,q||0)}Vn.prototype.getBucketParts=function(B,G,Y,C){var q=Y.getBucket(G),Q=Y.latestFeatureIndex;if(q&&Q&&G.id===q.layerIds[0]){var ne=Y.collisionBoxArray,he=q.layers[0].layout,me=Math.pow(2,this.transform.zoom-Y.tileID.overscaledZ),Pe=Y.tileSize/i.EXTENT,ze=this.transform.calculatePosMatrix(Y.tileID.toUnwrapped()),qe=he.get("text-pitch-alignment")==="map",Ze=he.get("text-rotation-alignment")==="map",rt=Jn(Y,1,this.transform.zoom),pt=Ln(ze,qe,Ze,this.transform,rt),vt=null;if(qe){var kt=fn(ze,qe,Ze,this.transform,rt);vt=i.multiply([],this.transform.labelPlaneMatrix,kt)}this.retainedQueryData[q.bucketInstanceId]=new vn(q.bucketInstanceId,Q,q.sourceLayerIndex,q.index,Y.tileID);var Ot={bucket:q,layout:he,posMatrix:ze,textLabelPlaneMatrix:pt,labelToScreenMatrix:vt,scale:me,textPixelRatio:Pe,holdingForFade:Y.holdingForFade(),collisionBoxArray:ne,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(q.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(q.sourceID)};if(C)for(var Et=0,jt=q.sortKeyRanges;Et<jt.length;Et+=1){var It=jt[Et],Jt=It.sortKey,Gt=It.symbolInstanceStart,Ht=It.symbolInstanceEnd;B.push({sortKey:Jt,symbolInstanceStart:Gt,symbolInstanceEnd:Ht,parameters:Ot})}else B.push({symbolInstanceStart:0,symbolInstanceEnd:q.symbolInstances.length,parameters:Ot})}},Vn.prototype.attemptAnchorPlacement=function(B,G,Y,C,q,Q,ne,he,me,Pe,ze,qe,Ze,rt,pt){var vt,kt=[qe.textOffset0,qe.textOffset1],Ot=Hn(B,Y,C,kt,q),Et=this.collisionIndex.placeCollisionBox(Bn(G,Ot.x,Ot.y,Q,ne,this.transform.angle),ze,he,me,Pe.predicate);if(!pt||this.collisionIndex.placeCollisionBox(Bn(pt,Ot.x,Ot.y,Q,ne,this.transform.angle),ze,he,me,Pe.predicate).box.length!==0)return Et.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(vt=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),this.variableOffsets[qe.crossTileID]={textOffset:kt,width:Y,height:C,anchor:B,textBoxScale:q,prevAnchor:vt},this.markUsedJustification(Ze,B,qe,rt),Ze.allowVerticalPlacement&&(this.markUsedOrientation(Ze,rt,qe),this.placedOrientations[qe.crossTileID]=rt),{shift:Ot,placedGlyphBoxes:Et}):void 0},Vn.prototype.placeLayerBucketPart=function(B,G,Y){var C=this,q=B.parameters,Q=q.bucket,ne=q.layout,he=q.posMatrix,me=q.textLabelPlaneMatrix,Pe=q.labelToScreenMatrix,ze=q.textPixelRatio,qe=q.holdingForFade,Ze=q.collisionBoxArray,rt=q.partiallyEvaluatedTextSize,pt=q.collisionGroup,vt=ne.get("text-optional"),kt=ne.get("icon-optional"),Ot=ne.get("text-allow-overlap"),Et=ne.get("icon-allow-overlap"),jt=ne.get("text-rotation-alignment")==="map",It=ne.get("text-pitch-alignment")==="map",Jt=ne.get("icon-text-fit")!=="none",Gt=ne.get("symbol-z-order")==="viewport-y",Ht=Ot&&(Et||!Q.hasIconData()||kt),mn=Et&&(Ot||!Q.hasTextData()||vt);!Q.collisionArrays&&Ze&&Q.deserializeCollisionBoxes(Ze);var yn=function(Xn,cr){if(!G[Xn.crossTileID])if(qe)C.placements[Xn.crossTileID]=new tn(!1,!1,!1);else{var Tr,Rr=!1,$n=!1,ur=!0,Sr=null,gr={box:null,offscreen:null},Pr={box:null,offscreen:null},jr=null,Xr=null,Kr=0,ni=0,ai=0;cr.textFeatureIndex?Kr=cr.textFeatureIndex:Xn.useRuntimeCollisionCircles&&(Kr=Xn.featureIndex),cr.verticalTextFeatureIndex&&(ni=cr.verticalTextFeatureIndex);var Li=cr.textBox;if(Li){var Ki=function(Yi){var so=i.WritingMode.horizontal;if(Q.allowVerticalPlacement&&!Yi&&C.prevPlacement){var xa=C.prevPlacement.placedOrientations[Xn.crossTileID];xa&&(C.placedOrientations[Xn.crossTileID]=xa,so=xa,C.markUsedOrientation(Q,so,Xn))}return so},Pa=function(Yi,so){if(Q.allowVerticalPlacement&&Xn.numVerticalGlyphVertices>0&&cr.verticalTextBox)for(var xa=0,Ju=Q.writingModes;xa<Ju.length&&(Ju[xa]===i.WritingMode.vertical?(gr=so(),Pr=gr):gr=Yi(),!(gr&&gr.box&&gr.box.length));xa+=1);else gr=Yi()};if(ne.get("text-variable-anchor")){var pa=ne.get("text-variable-anchor");if(C.prevPlacement&&C.prevPlacement.variableOffsets[Xn.crossTileID]){var Ma=C.prevPlacement.variableOffsets[Xn.crossTileID];pa.indexOf(Ma.anchor)>0&&(pa=pa.filter(function(Yi){return Yi!==Ma.anchor})).unshift(Ma.anchor)}var zi=function(Yi,so,xa){for(var Ju=Yi.x2-Yi.x1,Qh=Yi.y2-Yi.y1,Ff=Xn.textBoxScale,$h=Jt&&!Et?so:null,Ru={box:[],offscreen:!1},ep=Ot?2*pa.length:pa.length,zu=0;zu<ep;++zu){var Bf=pa[zu%pa.length],Nf=zu>=pa.length,Kl=C.attemptAnchorPlacement(Bf,Yi,Ju,Qh,Ff,jt,It,ze,he,pt,Nf,Xn,Q,xa,$h);if(Kl&&(Ru=Kl.placedGlyphBoxes)&&Ru.box&&Ru.box.length){Rr=!0,Sr=Kl.shift;break}}return Ru};Pa(function(){return zi(Li,cr.iconBox,i.WritingMode.horizontal)},function(){var Yi=cr.verticalTextBox,so=gr&&gr.box&&gr.box.length;return Q.allowVerticalPlacement&&!so&&Xn.numVerticalGlyphVertices>0&&Yi?zi(Yi,cr.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}}),gr&&(Rr=gr.box,ur=gr.offscreen);var si=Ki(gr&&gr.box);if(!Rr&&C.prevPlacement){var Hi=C.prevPlacement.variableOffsets[Xn.crossTileID];Hi&&(C.variableOffsets[Xn.crossTileID]=Hi,C.markUsedJustification(Q,Hi.anchor,Xn,si))}}else{var wi=function(Yi,so){var xa=C.collisionIndex.placeCollisionBox(Yi,Ot,ze,he,pt.predicate);return xa&&xa.box&&xa.box.length&&(C.markUsedOrientation(Q,so,Xn),C.placedOrientations[Xn.crossTileID]=so),xa};Pa(function(){return wi(Li,i.WritingMode.horizontal)},function(){var Yi=cr.verticalTextBox;return Q.allowVerticalPlacement&&Xn.numVerticalGlyphVertices>0&&Yi?wi(Yi,i.WritingMode.vertical):{box:null,offscreen:null}}),Ki(gr&&gr.box&&gr.box.length)}}if(Rr=(Tr=gr)&&Tr.box&&Tr.box.length>0,ur=Tr&&Tr.offscreen,Xn.useRuntimeCollisionCircles){var hi=Q.text.placedSymbolArray.get(Xn.centerJustifiedTextSymbolIndex),qi=i.evaluateSizeForFeature(Q.textSizeData,rt,hi),Qi=ne.get("text-padding"),la=Xn.collisionCircleDiameter;jr=C.collisionIndex.placeCollisionCircles(Ot,hi,Q.lineVertexArray,Q.glyphOffsetArray,qi,he,me,Pe,Y,It,pt.predicate,la,Qi),Rr=Ot||jr.circles.length>0&&!jr.collisionDetected,ur=ur&&jr.offscreen}if(cr.iconFeatureIndex&&(ai=cr.iconFeatureIndex),cr.iconBox){var al=function(Yi){var so=Jt&&Sr?Bn(Yi,Sr.x,Sr.y,jt,It,C.transform.angle):Yi;return C.collisionIndex.placeCollisionBox(so,Et,ze,he,pt.predicate)};$n=Pr&&Pr.box&&Pr.box.length&&cr.verticalIconBox?(Xr=al(cr.verticalIconBox)).box.length>0:(Xr=al(cr.iconBox)).box.length>0,ur=ur&&Xr.offscreen}var ol=vt||Xn.numHorizontalGlyphVertices===0&&Xn.numVerticalGlyphVertices===0,pi=kt||Xn.numIconVertices===0;if(ol||pi?pi?ol||($n=$n&&Rr):Rr=$n&&Rr:$n=Rr=$n&&Rr,Rr&&Tr&&Tr.box&&(Pr&&Pr.box&&ni?C.collisionIndex.insertCollisionBox(Tr.box,ne.get("text-ignore-placement"),Q.bucketInstanceId,ni,pt.ID):C.collisionIndex.insertCollisionBox(Tr.box,ne.get("text-ignore-placement"),Q.bucketInstanceId,Kr,pt.ID)),$n&&Xr&&C.collisionIndex.insertCollisionBox(Xr.box,ne.get("icon-ignore-placement"),Q.bucketInstanceId,ai,pt.ID),jr&&(Rr&&C.collisionIndex.insertCollisionCircles(jr.circles,ne.get("text-ignore-placement"),Q.bucketInstanceId,Kr,pt.ID),Y)){var Jl=Q.bucketInstanceId,Sl=C.collisionCircleArrays[Jl];Sl===void 0&&(Sl=C.collisionCircleArrays[Jl]=new dn);for(var ts=0;ts<jr.circles.length;ts+=4)Sl.circles.push(jr.circles[ts+0]),Sl.circles.push(jr.circles[ts+1]),Sl.circles.push(jr.circles[ts+2]),Sl.circles.push(jr.collisionDetected?1:0)}C.placements[Xn.crossTileID]=new tn(Rr||Ht,$n||mn,ur||Q.justReloaded),G[Xn.crossTileID]=!0}};if(Gt)for(var In=Q.getSortedSymbolIndexes(this.transform.angle),Rn=In.length-1;Rn>=0;--Rn){var Yn=In[Rn];yn(Q.symbolInstances.get(Yn),Q.collisionArrays[Yn])}else for(var er=B.symbolInstanceStart;er<B.symbolInstanceEnd;er++)yn(Q.symbolInstances.get(er),Q.collisionArrays[er]);if(Y&&Q.bucketInstanceId in this.collisionCircleArrays){var dr=this.collisionCircleArrays[Q.bucketInstanceId];i.invert(dr.invProjMatrix,he),dr.viewportMatrix=this.collisionIndex.getViewportMatrix()}Q.justReloaded=!1},Vn.prototype.markUsedJustification=function(B,G,Y,C){var q,Q={left:Y.leftJustifiedTextSymbolIndex,center:Y.centerJustifiedTextSymbolIndex,right:Y.rightJustifiedTextSymbolIndex};q=C===i.WritingMode.vertical?Y.verticalPlacedTextSymbolIndex:Q[i.getAnchorJustification(G)];for(var ne=0,he=[Y.leftJustifiedTextSymbolIndex,Y.centerJustifiedTextSymbolIndex,Y.rightJustifiedTextSymbolIndex,Y.verticalPlacedTextSymbolIndex];ne<he.length;ne+=1){var me=he[ne];me>=0&&(B.text.placedSymbolArray.get(me).crossTileID=q>=0&&me!==q?0:Y.crossTileID)}},Vn.prototype.markUsedOrientation=function(B,G,Y){for(var C=G===i.WritingMode.horizontal||G===i.WritingMode.horizontalOnly?G:0,q=G===i.WritingMode.vertical?G:0,Q=0,ne=[Y.leftJustifiedTextSymbolIndex,Y.centerJustifiedTextSymbolIndex,Y.rightJustifiedTextSymbolIndex];Q<ne.length;Q+=1){var he=ne[Q];B.text.placedSymbolArray.get(he).placedOrientation=C}Y.verticalPlacedTextSymbolIndex&&(B.text.placedSymbolArray.get(Y.verticalPlacedTextSymbolIndex).placedOrientation=q)},Vn.prototype.commit=function(B){this.commitTime=B,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,Y=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var C=G?G.symbolFadeChange(B):1,q=G?G.opacities:{},Q=G?G.variableOffsets:{},ne=G?G.placedOrientations:{};for(var he in this.placements){var me=this.placements[he],Pe=q[he];Pe?(this.opacities[he]=new qt(Pe,C,me.text,me.icon),Y=Y||me.text!==Pe.text.placed||me.icon!==Pe.icon.placed):(this.opacities[he]=new qt(null,C,me.text,me.icon,me.skipFade),Y=Y||me.text||me.icon)}for(var ze in q){var qe=q[ze];if(!this.opacities[ze]){var Ze=new qt(qe,C,!1,!1);Ze.isHidden()||(this.opacities[ze]=Ze,Y=Y||qe.text.placed||qe.icon.placed)}}for(var rt in Q)this.variableOffsets[rt]||!this.opacities[rt]||this.opacities[rt].isHidden()||(this.variableOffsets[rt]=Q[rt]);for(var pt in ne)this.placedOrientations[pt]||!this.opacities[pt]||this.opacities[pt].isHidden()||(this.placedOrientations[pt]=ne[pt]);Y?this.lastPlacementChangeTime=B:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:B)},Vn.prototype.updateLayerOpacities=function(B,G){for(var Y={},C=0,q=G;C<q.length;C+=1){var Q=q[C],ne=Q.getBucket(B);ne&&Q.latestFeatureIndex&&B.id===ne.layerIds[0]&&this.updateBucketOpacities(ne,Y,Q.collisionBoxArray)}},Vn.prototype.updateBucketOpacities=function(B,G,Y){var C=this;B.hasTextData()&&B.text.opacityVertexArray.clear(),B.hasIconData()&&B.icon.opacityVertexArray.clear(),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexArray.clear(),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexArray.clear();var q=B.layers[0].layout,Q=new qt(null,0,!1,!1,!0),ne=q.get("text-allow-overlap"),he=q.get("icon-allow-overlap"),me=q.get("text-variable-anchor"),Pe=q.get("text-rotation-alignment")==="map",ze=q.get("text-pitch-alignment")==="map",qe=q.get("icon-text-fit")!=="none",Ze=new qt(null,0,ne&&(he||!B.hasIconData()||q.get("icon-optional")),he&&(ne||!B.hasTextData()||q.get("text-optional")),!0);!B.collisionArrays&&Y&&(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData())&&B.deserializeCollisionBoxes(Y);for(var rt=function(Ot,Et,jt){for(var It=0;It<Et/4;It++)Ot.opacityVertexArray.emplaceBack(jt)},pt=function(Ot){var Et=B.symbolInstances.get(Ot),jt=Et.numHorizontalGlyphVertices,It=Et.numVerticalGlyphVertices,Jt=Et.crossTileID,Gt=G[Jt],Ht=C.opacities[Jt];Gt?Ht=Q:Ht||(Ht=Ze,C.opacities[Jt]=Ht),G[Jt]=!0;var mn=jt>0||It>0,yn=Et.numIconVertices>0,In=C.placedOrientations[Et.crossTileID],Rn=In===i.WritingMode.vertical,Yn=In===i.WritingMode.horizontal||In===i.WritingMode.horizontalOnly;if(mn){var er=Pn(Ht.text),dr=Rn?pn:er;rt(B.text,jt,dr);var Xn=Yn?pn:er;rt(B.text,It,Xn);var cr=Ht.text.isHidden();[Et.rightJustifiedTextSymbolIndex,Et.centerJustifiedTextSymbolIndex,Et.leftJustifiedTextSymbolIndex].forEach(function(ai){ai>=0&&(B.text.placedSymbolArray.get(ai).hidden=cr||Rn?1:0)}),Et.verticalPlacedTextSymbolIndex>=0&&(B.text.placedSymbolArray.get(Et.verticalPlacedTextSymbolIndex).hidden=cr||Yn?1:0);var Tr=C.variableOffsets[Et.crossTileID];Tr&&C.markUsedJustification(B,Tr.anchor,Et,In);var Rr=C.placedOrientations[Et.crossTileID];Rr&&(C.markUsedJustification(B,"left",Et,Rr),C.markUsedOrientation(B,Rr,Et))}if(yn){var $n=Pn(Ht.icon),ur=!(qe&&Et.verticalPlacedIconSymbolIndex&&Rn);if(Et.placedIconSymbolIndex>=0){var Sr=ur?$n:pn;rt(B.icon,Et.numIconVertices,Sr),B.icon.placedSymbolArray.get(Et.placedIconSymbolIndex).hidden=Ht.icon.isHidden()}if(Et.verticalPlacedIconSymbolIndex>=0){var gr=ur?pn:$n;rt(B.icon,Et.numVerticalIconVertices,gr),B.icon.placedSymbolArray.get(Et.verticalPlacedIconSymbolIndex).hidden=Ht.icon.isHidden()}}if(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData()){var Pr=B.collisionArrays[Ot];if(Pr){var jr=new i.Point(0,0);if(Pr.textBox||Pr.verticalTextBox){var Xr=!0;if(me){var Kr=C.variableOffsets[Jt];Kr?(jr=Hn(Kr.anchor,Kr.width,Kr.height,Kr.textOffset,Kr.textBoxScale),Pe&&jr._rotate(ze?C.transform.angle:-C.transform.angle)):Xr=!1}Pr.textBox&&nr(B.textCollisionBox.collisionVertexArray,Ht.text.placed,!Xr||Rn,jr.x,jr.y),Pr.verticalTextBox&&nr(B.textCollisionBox.collisionVertexArray,Ht.text.placed,!Xr||Yn,jr.x,jr.y)}var ni=!!(!Yn&&Pr.verticalIconBox);Pr.iconBox&&nr(B.iconCollisionBox.collisionVertexArray,Ht.icon.placed,ni,qe?jr.x:0,qe?jr.y:0),Pr.verticalIconBox&&nr(B.iconCollisionBox.collisionVertexArray,Ht.icon.placed,!ni,qe?jr.x:0,qe?jr.y:0)}}},vt=0;vt<B.symbolInstances.length;vt++)pt(vt);if(B.sortFeatures(this.transform.angle),this.retainedQueryData[B.bucketInstanceId]&&(this.retainedQueryData[B.bucketInstanceId].featureSortOrder=B.featureSortOrder),B.hasTextData()&&B.text.opacityVertexBuffer&&B.text.opacityVertexBuffer.updateData(B.text.opacityVertexArray),B.hasIconData()&&B.icon.opacityVertexBuffer&&B.icon.opacityVertexBuffer.updateData(B.icon.opacityVertexArray),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexBuffer&&B.iconCollisionBox.collisionVertexBuffer.updateData(B.iconCollisionBox.collisionVertexArray),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexBuffer&&B.textCollisionBox.collisionVertexBuffer.updateData(B.textCollisionBox.collisionVertexArray),B.bucketInstanceId in this.collisionCircleArrays){var kt=this.collisionCircleArrays[B.bucketInstanceId];B.placementInvProjMatrix=kt.invProjMatrix,B.placementViewportMatrix=kt.viewportMatrix,B.collisionCircleArray=kt.circles,delete this.collisionCircleArrays[B.bucketInstanceId]}},Vn.prototype.symbolFadeChange=function(B){return this.fadeDuration===0?1:(B-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Vn.prototype.zoomAdjustment=function(B){return Math.max(0,(this.transform.zoom-B)/1.5)},Vn.prototype.hasTransitions=function(B){return this.stale||B-this.lastPlacementChangeTime<this.fadeDuration},Vn.prototype.stillRecent=function(B,G){var Y=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*Y>B},Vn.prototype.setStale=function(){this.stale=!0};var Qt=Math.pow(2,25),bn=Math.pow(2,24),Rt=Math.pow(2,17),Kt=Math.pow(2,16),rn=Math.pow(2,9),xn=Math.pow(2,8),Tn=Math.pow(2,1);function Pn(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;var G=B.placed?1:0,Y=Math.floor(127*B.opacity);return Y*Qt+G*bn+Y*Rt+G*Kt+Y*rn+G*xn+Y*Tn+G}var pn=0,$t=function(B){this._sortAcrossTiles=B.layout.get("symbol-z-order")!=="viewport-y"&&B.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};$t.prototype.continuePlacement=function(B,G,Y,C,q){for(var Q=this._bucketParts;this._currentTileIndex<B.length;){var ne=B[this._currentTileIndex];if(G.getBucketParts(Q,C,ne,this._sortAcrossTiles),this._currentTileIndex++,q())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Q.sort(function(me,Pe){return me.sortKey-Pe.sortKey}));this._currentPartIndex<Q.length;){var he=Q[this._currentPartIndex];if(G.placeLayerBucketPart(he,this._seenCrossTileIDs,Y),this._currentPartIndex++,q())return!0}return!1};var en=function(B,G,Y,C,q,Q,ne){this.placement=new Vn(B,q,Q,ne),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=Y,this._showCollisionBoxes=C,this._done=!1};en.prototype.isDone=function(){return this._done},en.prototype.continuePlacement=function(B,G,Y){for(var C=this,q=i.browser.now(),Q=function(){var me=i.browser.now()-q;return!C._forceFullPlacement&&me>2};this._currentPlacementIndex>=0;){var ne=G[B[this._currentPlacementIndex]],he=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=he)&&(!ne.maxzoom||ne.maxzoom>he)){if(this._inProgressLayer||(this._inProgressLayer=new $t(ne)),this._inProgressLayer.continuePlacement(Y[ne.source],this.placement,this._showCollisionBoxes,ne,Q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},en.prototype.commit=function(B){return this.placement.commit(B),this.placement};var hn=512/i.EXTENT/2,gn=function(B,G,Y){this.tileID=B,this.indexedSymbolInstances={},this.bucketInstanceId=Y;for(var C=0;C<G.length;C++){var q=G.get(C),Q=q.key;this.indexedSymbolInstances[Q]||(this.indexedSymbolInstances[Q]=[]),this.indexedSymbolInstances[Q].push({crossTileID:q.crossTileID,coord:this.getScaledCoordinates(q,B)})}};gn.prototype.getScaledCoordinates=function(B,G){var Y=G.canonical.z-this.tileID.canonical.z,C=hn/Math.pow(2,Y);return{x:Math.floor((G.canonical.x*i.EXTENT+B.anchorX)*C),y:Math.floor((G.canonical.y*i.EXTENT+B.anchorY)*C)}},gn.prototype.findMatches=function(B,G,Y){for(var C=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),q=0;q<B.length;q++){var Q=B.get(q);if(!Q.crossTileID){var ne=this.indexedSymbolInstances[Q.key];if(ne)for(var he=this.getScaledCoordinates(Q,G),me=0,Pe=ne;me<Pe.length;me+=1){var ze=Pe[me];if(Math.abs(ze.coord.x-he.x)<=C&&Math.abs(ze.coord.y-he.y)<=C&&!Y[ze.crossTileID]){Y[ze.crossTileID]=!0,Q.crossTileID=ze.crossTileID;break}}}}};var Dn=function(){this.maxCrossTileID=0};Dn.prototype.generate=function(){return++this.maxCrossTileID};var Fn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Fn.prototype.handleWrapJump=function(B){var G=Math.round((B-this.lng)/360);if(G!==0)for(var Y in this.indexes){var C=this.indexes[Y],q={};for(var Q in C){var ne=C[Q];ne.tileID=ne.tileID.unwrapTo(ne.tileID.wrap+G),q[ne.tileID.key]=ne}this.indexes[Y]=q}this.lng=B},Fn.prototype.addBucket=function(B,G,Y){if(this.indexes[B.overscaledZ]&&this.indexes[B.overscaledZ][B.key]){if(this.indexes[B.overscaledZ][B.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(B.overscaledZ,this.indexes[B.overscaledZ][B.key])}for(var C=0;C<G.symbolInstances.length;C++)G.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[B.overscaledZ]||(this.usedCrossTileIDs[B.overscaledZ]={});var q=this.usedCrossTileIDs[B.overscaledZ];for(var Q in this.indexes){var ne=this.indexes[Q];if(Number(Q)>B.overscaledZ)for(var he in ne){var me=ne[he];me.tileID.isChildOf(B)&&me.findMatches(G.symbolInstances,B,q)}else{var Pe=ne[B.scaledTo(Number(Q)).key];Pe&&Pe.findMatches(G.symbolInstances,B,q)}}for(var ze=0;ze<G.symbolInstances.length;ze++){var qe=G.symbolInstances.get(ze);qe.crossTileID||(qe.crossTileID=Y.generate(),q[qe.crossTileID]=!0)}return this.indexes[B.overscaledZ]===void 0&&(this.indexes[B.overscaledZ]={}),this.indexes[B.overscaledZ][B.key]=new gn(B,G.symbolInstances,G.bucketInstanceId),!0},Fn.prototype.removeBucketCrossTileIDs=function(B,G){for(var Y in G.indexedSymbolInstances)for(var C=0,q=G.indexedSymbolInstances[Y];C<q.length;C+=1){var Q=q[C];delete this.usedCrossTileIDs[B][Q.crossTileID]}},Fn.prototype.removeStaleBuckets=function(B){var G=!1;for(var Y in this.indexes){var C=this.indexes[Y];for(var q in C)B[C[q].bucketInstanceId]||(this.removeBucketCrossTileIDs(Y,C[q]),delete C[q],G=!0)}return G};var Zn=function(){this.layerIndexes={},this.crossTileIDs=new Dn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Zn.prototype.addLayer=function(B,G,Y){var C=this.layerIndexes[B.id];C===void 0&&(C=this.layerIndexes[B.id]=new Fn);var q=!1,Q={};C.handleWrapJump(Y);for(var ne=0,he=G;ne<he.length;ne+=1){var me=he[ne],Pe=me.getBucket(B);Pe&&B.id===Pe.layerIds[0]&&(Pe.bucketInstanceId||(Pe.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(me.tileID,Pe,this.crossTileIDs)&&(q=!0),Q[Pe.bucketInstanceId]=!0)}return C.removeStaleBuckets(Q)&&(q=!0),q},Zn.prototype.pruneUnusedLayers=function(B){var G={};for(var Y in B.forEach(function(C){G[C]=!0}),this.layerIndexes)G[Y]||delete this.layerIndexes[Y]};var Wn=function(B,G){return i.emitValidationErrors(B,G&&G.filter(function(Y){return Y.identifier!=="source.canvas"}))},tr=i.pick(Tt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Qn=i.pick(Tt,["setCenter","setZoom","setBearing","setPitch"]),or=function(){var B={},G=i.styleSpec.$version;for(var Y in i.styleSpec.$root){var C=i.styleSpec.$root[Y];if(C.required){var q;(q=Y==="version"?G:C.type==="array"?[]:{})!=null&&(B[Y]=q)}}return B}(),hr=function(B){function G(Y,C){var q=this;C===void 0&&(C={}),B.call(this),this.map=Y,this.dispatcher=new O(xt(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new y(Y._requestManager,C.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Zn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());var Q=this;this._rtlTextPluginCallback=G.registerForPluginStateChange(function(ne){var he={pluginStatus:ne.pluginStatus,pluginURL:ne.pluginURL};Q.dispatcher.broadcast("syncRTLPluginState",he,function(me,Pe){if(i.triggerPluginCompletionEvent(me),Pe&&Pe.every(function(qe){return qe}))for(var ze in Q.sourceCaches)Q.sourceCaches[ze].reload()})}),this.on("data",function(ne){if(ne.dataType==="source"&&ne.sourceDataType==="metadata"){var he=q.sourceCaches[ne.sourceId];if(he){var me=he.getSource();if(me&&me.vectorLayerIds)for(var Pe in q._layers){var ze=q._layers[Pe];ze.source===me.id&&q._validateLayer(ze)}}}})}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.loadURL=function(Y,C){var q=this;C===void 0&&(C={}),this.fire(new i.Event("dataloading",{dataType:"style"}));var Q=typeof C.validate=="boolean"?C.validate:!i.isMapboxURL(Y);Y=this.map._requestManager.normalizeStyleURL(Y,C.accessToken);var ne=this.map._requestManager.transformRequest(Y,i.ResourceType.Style);this._request=i.getJSON(ne,function(he,me){q._request=null,he?q.fire(new i.ErrorEvent(he)):me&&q._load(me,Q)})},G.prototype.loadJSON=function(Y,C){var q=this;C===void 0&&(C={}),this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.browser.frame(function(){q._request=null,q._load(Y,C.validate!==!1)})},G.prototype.loadEmpty=function(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(or,!1)},G.prototype._load=function(Y,C){if(!C||!Wn(this,i.validateStyle(Y))){for(var q in this._loaded=!0,this.stylesheet=Y,Y.sources)this.addSource(q,Y.sources[q],{validate:!1});Y.sprite?this._loadSprite(Y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Y.glyphs);var Q=Lt(this.stylesheet.layers);this._order=Q.map(function(Pe){return Pe.id}),this._layers={},this._serializedLayers={};for(var ne=0,he=Q;ne<he.length;ne+=1){var me=he[ne];(me=i.createStyleLayer(me)).setEventedParent(this,{layer:{id:me.id}}),this._layers[me.id]=me,this._serializedLayers[me.id]=me.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new M(this.stylesheet.light),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}},G.prototype._loadSprite=function(Y){var C=this;this._spriteRequest=function(q,Q,ne){var he,me,Pe,ze=i.browser.devicePixelRatio>1?"@2x":"",qe=i.getJSON(Q.transformRequest(Q.normalizeSpriteURL(q,ze,".json"),i.ResourceType.SpriteJSON),function(pt,vt){qe=null,Pe||(Pe=pt,he=vt,rt())}),Ze=i.getImage(Q.transformRequest(Q.normalizeSpriteURL(q,ze,".png"),i.ResourceType.SpriteImage),function(pt,vt){Ze=null,Pe||(Pe=pt,me=vt,rt())});function rt(){if(Pe)ne(Pe);else if(he&&me){var pt=i.browser.getImageData(me),vt={};for(var kt in he){var Ot=he[kt],Et=Ot.width,jt=Ot.height,It=Ot.x,Jt=Ot.y,Gt=Ot.sdf,Ht=Ot.pixelRatio,mn=Ot.stretchX,yn=Ot.stretchY,In=Ot.content,Rn=new i.RGBAImage({width:Et,height:jt});i.RGBAImage.copy(pt,Rn,{x:It,y:Jt},{x:0,y:0},{width:Et,height:jt}),vt[kt]={data:Rn,pixelRatio:Ht,sdf:Gt,stretchX:mn,stretchY:yn,content:In}}ne(null,vt)}}return{cancel:function(){qe&&(qe.cancel(),qe=null),Ze&&(Ze.cancel(),Ze=null)}}}(Y,this.map._requestManager,function(q,Q){if(C._spriteRequest=null,q)C.fire(new i.ErrorEvent(q));else if(Q)for(var ne in Q)C.imageManager.addImage(ne,Q[ne]);C.imageManager.setLoaded(!0),C._availableImages=C.imageManager.listImages(),C.dispatcher.broadcast("setImages",C._availableImages),C.fire(new i.Event("data",{dataType:"style"}))})},G.prototype._validateLayer=function(Y){var C=this.sourceCaches[Y.source];if(C){var q=Y.sourceLayer;if(q){var Q=C.getSource();(Q.type==="geojson"||Q.vectorLayerIds&&Q.vectorLayerIds.indexOf(q)===-1)&&this.fire(new i.ErrorEvent(new Error('Source layer "'+q+'" does not exist on source "'+Q.id+'" as specified by style layer "'+Y.id+'"')))}}},G.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var Y in this.sourceCaches)if(!this.sourceCaches[Y].loaded())return!1;return!!this.imageManager.isLoaded()},G.prototype._serializeLayers=function(Y){for(var C=[],q=0,Q=Y;q<Q.length;q+=1){var ne=Q[q],he=this._layers[ne];he.type!=="custom"&&C.push(he.serialize())}return C},G.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var Y in this.sourceCaches)if(this.sourceCaches[Y].hasTransition())return!0;for(var C in this._layers)if(this._layers[C].hasTransition())return!0;return!1},G.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},G.prototype.update=function(Y){if(this._loaded){var C=this._changed;if(this._changed){var q=Object.keys(this._updatedLayers),Q=Object.keys(this._removedLayers);for(var ne in(q.length||Q.length)&&this._updateWorkerLayers(q,Q),this._updatedSources){var he=this._updatedSources[ne];he==="reload"?this._reloadSource(ne):he==="clear"&&this._clearSource(ne)}for(var me in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[me].updateTransitions(Y);this.light.updateTransitions(Y),this._resetUpdates()}var Pe={};for(var ze in this.sourceCaches){var qe=this.sourceCaches[ze];Pe[ze]=qe.used,qe.used=!1}for(var Ze=0,rt=this._order;Ze<rt.length;Ze+=1){var pt=rt[Ze],vt=this._layers[pt];vt.recalculate(Y,this._availableImages),!vt.isHidden(Y.zoom)&&vt.source&&(this.sourceCaches[vt.source].used=!0)}for(var kt in Pe){var Ot=this.sourceCaches[kt];Pe[kt]!==Ot.used&&Ot.fire(new i.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:kt}))}this.light.recalculate(Y),this.z=Y.zoom,C&&this.fire(new i.Event("data",{dataType:"style"}))}},G.prototype._updateTilesForChangedImages=function(){var Y=Object.keys(this._changedImages);if(Y.length){for(var C in this.sourceCaches)this.sourceCaches[C].reloadTilesForDependencies(["icons","patterns"],Y);this._changedImages={}}},G.prototype._updateWorkerLayers=function(Y,C){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(Y),removedIds:C})},G.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},G.prototype.setState=function(Y){var C=this;if(this._checkLoaded(),Wn(this,i.validateStyle(Y)))return!1;(Y=i.clone$1(Y)).layers=Lt(Y.layers);var q=Vt(this.serialize(),Y).filter(function(ne){return!(ne.command in Qn)});if(q.length===0)return!1;var Q=q.filter(function(ne){return!(ne.command in tr)});if(Q.length>0)throw new Error("Unimplemented: "+Q.map(function(ne){return ne.command}).join(", ")+".");return q.forEach(function(ne){ne.command!=="setTransition"&&C[ne.command].apply(C,ne.args)}),this.stylesheet=Y,!0},G.prototype.addImage=function(Y,C){if(this.getImage(Y))return this.fire(new i.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(Y,C),this._afterImageUpdated(Y)},G.prototype.updateImage=function(Y,C){this.imageManager.updateImage(Y,C)},G.prototype.getImage=function(Y){return this.imageManager.getImage(Y)},G.prototype.removeImage=function(Y){if(!this.getImage(Y))return this.fire(new i.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(Y),this._afterImageUpdated(Y)},G.prototype._afterImageUpdated=function(Y){this._availableImages=this.imageManager.listImages(),this._changedImages[Y]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new i.Event("data",{dataType:"style"}))},G.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},G.prototype.addSource=function(Y,C,q){var Q=this;if(q===void 0&&(q={}),this._checkLoaded(),this.sourceCaches[Y]!==void 0)throw new Error("There is already a source with this ID");if(!C.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(C).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(C.type)>=0&&this._validate(i.validateStyle.source,"sources."+Y,C,null,q))){this.map&&this.map._collectResourceTiming&&(C.collectResourceTiming=!0);var ne=this.sourceCaches[Y]=new lt(Y,C,this.dispatcher);ne.style=this,ne.setEventedParent(this,function(){return{isSourceLoaded:Q.loaded(),source:ne.serialize(),sourceId:Y}}),ne.onAdd(this.map),this._changed=!0}},G.prototype.removeSource=function(Y){if(this._checkLoaded(),this.sourceCaches[Y]===void 0)throw new Error("There is no source with this ID");for(var C in this._layers)if(this._layers[C].source===Y)return this.fire(new i.ErrorEvent(new Error('Source "'+Y+'" cannot be removed while layer "'+C+'" is using it.')));var q=this.sourceCaches[Y];delete this.sourceCaches[Y],delete this._updatedSources[Y],q.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Y})),q.setEventedParent(null),q.clearTiles(),q.onRemove&&q.onRemove(this.map),this._changed=!0},G.prototype.setGeoJSONSourceData=function(Y,C){this._checkLoaded(),this.sourceCaches[Y].getSource().setData(C),this._changed=!0},G.prototype.getSource=function(Y){return this.sourceCaches[Y]&&this.sourceCaches[Y].getSource()},G.prototype.addLayer=function(Y,C,q){q===void 0&&(q={}),this._checkLoaded();var Q=Y.id;if(this.getLayer(Q))this.fire(new i.ErrorEvent(new Error('Layer with id "'+Q+'" already exists on this map')));else{var ne;if(Y.type==="custom"){if(Wn(this,i.validateCustomStyleLayer(Y)))return;ne=i.createStyleLayer(Y)}else{if(typeof Y.source=="object"&&(this.addSource(Q,Y.source),Y=i.clone$1(Y),Y=i.extend(Y,{source:Q})),this._validate(i.validateStyle.layer,"layers."+Q,Y,{arrayIndex:-1},q))return;ne=i.createStyleLayer(Y),this._validateLayer(ne),ne.setEventedParent(this,{layer:{id:Q}}),this._serializedLayers[ne.id]=ne.serialize()}var he=C?this._order.indexOf(C):this._order.length;if(C&&he===-1)this.fire(new i.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.')));else{if(this._order.splice(he,0,Q),this._layerOrderChanged=!0,this._layers[Q]=ne,this._removedLayers[Q]&&ne.source&&ne.type!=="custom"){var me=this._removedLayers[Q];delete this._removedLayers[Q],me.type!==ne.type?this._updatedSources[ne.source]="clear":(this._updatedSources[ne.source]="reload",this.sourceCaches[ne.source].pause())}this._updateLayer(ne),ne.onAdd&&ne.onAdd(this.map)}}},G.prototype.moveLayer=function(Y,C){if(this._checkLoaded(),this._changed=!0,this._layers[Y]){if(Y!==C){var q=this._order.indexOf(Y);this._order.splice(q,1);var Q=C?this._order.indexOf(C):this._order.length;C&&Q===-1?this.fire(new i.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.'))):(this._order.splice(Q,0,Y),this._layerOrderChanged=!0)}}else this.fire(new i.ErrorEvent(new Error("The layer '"+Y+"' does not exist in the map's style and cannot be moved.")))},G.prototype.removeLayer=function(Y){this._checkLoaded();var C=this._layers[Y];if(C){C.setEventedParent(null);var q=this._order.indexOf(Y);this._order.splice(q,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[Y]=C,delete this._layers[Y],delete this._serializedLayers[Y],delete this._updatedLayers[Y],delete this._updatedPaintProps[Y],C.onRemove&&C.onRemove(this.map)}else this.fire(new i.ErrorEvent(new Error("The layer '"+Y+"' does not exist in the map's style and cannot be removed.")))},G.prototype.getLayer=function(Y){return this._layers[Y]},G.prototype.hasLayer=function(Y){return Y in this._layers},G.prototype.setLayerZoomRange=function(Y,C,q){this._checkLoaded();var Q=this.getLayer(Y);Q?Q.minzoom===C&&Q.maxzoom===q||(C!=null&&(Q.minzoom=C),q!=null&&(Q.maxzoom=q),this._updateLayer(Q)):this.fire(new i.ErrorEvent(new Error("The layer '"+Y+"' does not exist in the map's style and cannot have zoom extent.")))},G.prototype.setFilter=function(Y,C,q){q===void 0&&(q={}),this._checkLoaded();var Q=this.getLayer(Y);if(Q){if(!i.deepEqual(Q.filter,C))return C==null?(Q.filter=void 0,void this._updateLayer(Q)):void(this._validate(i.validateStyle.filter,"layers."+Q.id+".filter",C,null,q)||(Q.filter=i.clone$1(C),this._updateLayer(Q)))}else this.fire(new i.ErrorEvent(new Error("The layer '"+Y+"' does not exist in the map's style and cannot be filtered.")))},G.prototype.getFilter=function(Y){return i.clone$1(this.getLayer(Y).filter)},G.prototype.setLayoutProperty=function(Y,C,q,Q){Q===void 0&&(Q={}),this._checkLoaded();var ne=this.getLayer(Y);ne?i.deepEqual(ne.getLayoutProperty(C),q)||(ne.setLayoutProperty(C,q,Q),this._updateLayer(ne)):this.fire(new i.ErrorEvent(new Error("The layer '"+Y+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getLayoutProperty=function(Y,C){var q=this.getLayer(Y);if(q)return q.getLayoutProperty(C);this.fire(new i.ErrorEvent(new Error("The layer '"+Y+"' does not exist in the map's style.")))},G.prototype.setPaintProperty=function(Y,C,q,Q){Q===void 0&&(Q={}),this._checkLoaded();var ne=this.getLayer(Y);ne?i.deepEqual(ne.getPaintProperty(C),q)||(ne.setPaintProperty(C,q,Q)&&this._updateLayer(ne),this._changed=!0,this._updatedPaintProps[Y]=!0):this.fire(new i.ErrorEvent(new Error("The layer '"+Y+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getPaintProperty=function(Y,C){return this.getLayer(Y).getPaintProperty(C)},G.prototype.setFeatureState=function(Y,C){this._checkLoaded();var q=Y.source,Q=Y.sourceLayer,ne=this.sourceCaches[q];if(ne!==void 0){var he=ne.getSource().type;he==="geojson"&&Q?this.fire(new i.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):he!=="vector"||Q?(Y.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),ne.setFeatureState(Q,Y.id,C)):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+q+"' does not exist in the map's style.")))},G.prototype.removeFeatureState=function(Y,C){this._checkLoaded();var q=Y.source,Q=this.sourceCaches[q];if(Q!==void 0){var ne=Q.getSource().type,he=ne==="vector"?Y.sourceLayer:void 0;ne!=="vector"||he?C&&typeof Y.id!="string"&&typeof Y.id!="number"?this.fire(new i.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Q.removeFeatureState(he,Y.id,C):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+q+"' does not exist in the map's style.")))},G.prototype.getFeatureState=function(Y){this._checkLoaded();var C=Y.source,q=Y.sourceLayer,Q=this.sourceCaches[C];if(Q!==void 0){if(Q.getSource().type!=="vector"||q)return Y.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),Q.getFeatureState(q,Y.id);this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+C+"' does not exist in the map's style.")))},G.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},G.prototype.serialize=function(){return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(Y){return Y.serialize()}),layers:this._serializeLayers(this._order)},function(Y){return Y!==void 0})},G.prototype._updateLayer=function(Y){this._updatedLayers[Y.id]=!0,Y.source&&!this._updatedSources[Y.source]&&this.sourceCaches[Y.source].getSource().type!=="raster"&&(this._updatedSources[Y.source]="reload",this.sourceCaches[Y.source].pause()),this._changed=!0},G.prototype._flattenAndSortRenderedFeatures=function(Y){for(var C=this,q=function(In){return C._layers[In].type==="fill-extrusion"},Q={},ne=[],he=this._order.length-1;he>=0;he--){var me=this._order[he];if(q(me)){Q[me]=he;for(var Pe=0,ze=Y;Pe<ze.length;Pe+=1){var qe=ze[Pe][me];if(qe)for(var Ze=0,rt=qe;Ze<rt.length;Ze+=1){var pt=rt[Ze];ne.push(pt)}}}}ne.sort(function(In,Rn){return Rn.intersectionZ-In.intersectionZ});for(var vt=[],kt=this._order.length-1;kt>=0;kt--){var Ot=this._order[kt];if(q(Ot))for(var Et=ne.length-1;Et>=0;Et--){var jt=ne[Et].feature;if(Q[jt.layer.id]<kt)break;vt.push(jt),ne.pop()}else for(var It=0,Jt=Y;It<Jt.length;It+=1){var Gt=Jt[It][Ot];if(Gt)for(var Ht=0,mn=Gt;Ht<mn.length;Ht+=1){var yn=mn[Ht];vt.push(yn.feature)}}}return vt},G.prototype.queryRenderedFeatures=function(Y,C,q){C&&C.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",C.filter,null,C);var Q={};if(C&&C.layers){if(!Array.isArray(C.layers))return this.fire(new i.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ne=0,he=C.layers;ne<he.length;ne+=1){var me=he[ne],Pe=this._layers[me];if(!Pe)return this.fire(new i.ErrorEvent(new Error("The layer '"+me+"' does not exist in the map's style and cannot be queried for features."))),[];Q[Pe.source]=!0}}var ze=[];for(var qe in C.availableImages=this._availableImages,this.sourceCaches)C.layers&&!Q[qe]||ze.push(J(this.sourceCaches[qe],this._layers,this._serializedLayers,Y,C,q));return this.placement&&ze.push(function(Ze,rt,pt,vt,kt,Ot,Et){for(var jt={},It=Ot.queryRenderedSymbols(vt),Jt=[],Gt=0,Ht=Object.keys(It).map(Number);Gt<Ht.length;Gt+=1){var mn=Ht[Gt];Jt.push(Et[mn])}Jt.sort(X);for(var yn=function(){var dr=Rn[In],Xn=dr.featureIndex.lookupSymbolFeatures(It[dr.bucketInstanceId],rt,dr.bucketIndex,dr.sourceLayerIndex,kt.filter,kt.layers,kt.availableImages,Ze);for(var cr in Xn){var Tr=jt[cr]=jt[cr]||[],Rr=Xn[cr];Rr.sort(function(gr,Pr){var jr=dr.featureSortOrder;if(jr){var Xr=jr.indexOf(gr.featureIndex);return jr.indexOf(Pr.featureIndex)-Xr}return Pr.featureIndex-gr.featureIndex});for(var $n=0,ur=Rr;$n<ur.length;$n+=1){var Sr=ur[$n];Tr.push(Sr)}}},In=0,Rn=Jt;In<Rn.length;In+=1)yn();var Yn=function(dr){jt[dr].forEach(function(Xn){var cr=Xn.feature,Tr=Ze[dr],Rr=pt[Tr.source].getFeatureState(cr.layer["source-layer"],cr.id);cr.source=cr.layer.source,cr.layer["source-layer"]&&(cr.sourceLayer=cr.layer["source-layer"]),cr.state=Rr})};for(var er in jt)Yn(er);return jt}(this._layers,this._serializedLayers,this.sourceCaches,Y,C,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ze)},G.prototype.querySourceFeatures=function(Y,C){C&&C.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",C.filter,null,C);var q=this.sourceCaches[Y];return q?function(Q,ne){for(var he=Q.getRenderableIds().map(function(rt){return Q.getTileByID(rt)}),me=[],Pe={},ze=0;ze<he.length;ze++){var qe=he[ze],Ze=qe.tileID.canonical.key;Pe[Ze]||(Pe[Ze]=!0,qe.querySourceFeatures(me,ne))}return me}(q,C):[]},G.prototype.addSourceType=function(Y,C,q){return G.getSourceType(Y)?q(new Error('A source type called "'+Y+'" already exists.')):(G.setSourceType(Y,C),C.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:Y,url:C.workerSourceURL},q):q(null,null))},G.prototype.getLight=function(){return this.light.getLight()},G.prototype.setLight=function(Y,C){C===void 0&&(C={}),this._checkLoaded();var q=this.light.getLight(),Q=!1;for(var ne in Y)if(!i.deepEqual(Y[ne],q[ne])){Q=!0;break}if(Q){var he={now:i.browser.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(Y,C),this.light.updateTransitions(he)}},G.prototype._validate=function(Y,C,q,Q,ne){return ne===void 0&&(ne={}),(!ne||ne.validate!==!1)&&Wn(this,Y.call(i.validateStyle,i.extend({key:C,style:this.serialize(),value:q,styleSpec:i.styleSpec},Q)))},G.prototype._remove=function(){for(var Y in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[Y].setEventedParent(null);for(var C in this.sourceCaches)this.sourceCaches[C].clearTiles(),this.sourceCaches[C].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},G.prototype._clearSource=function(Y){this.sourceCaches[Y].clearTiles()},G.prototype._reloadSource=function(Y){this.sourceCaches[Y].resume(),this.sourceCaches[Y].reload()},G.prototype._updateSources=function(Y){for(var C in this.sourceCaches)this.sourceCaches[C].update(Y)},G.prototype._generateCollisionBoxes=function(){for(var Y in this.sourceCaches)this._reloadSource(Y)},G.prototype._updatePlacement=function(Y,C,q,Q,ne){ne===void 0&&(ne=!1);for(var he=!1,me=!1,Pe={},ze=0,qe=this._order;ze<qe.length;ze+=1){var Ze=qe[ze],rt=this._layers[Ze];if(rt.type==="symbol"){if(!Pe[rt.source]){var pt=this.sourceCaches[rt.source];Pe[rt.source]=pt.getRenderableIds(!0).map(function(It){return pt.getTileByID(It)}).sort(function(It,Jt){return Jt.tileID.overscaledZ-It.tileID.overscaledZ||(It.tileID.isLessThan(Jt.tileID)?-1:1)})}var vt=this.crossTileSymbolIndex.addLayer(rt,Pe[rt.source],Y.center.lng);he=he||vt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ne=ne||this._layerOrderChanged||q===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.browser.now(),Y.zoom))&&(this.pauseablePlacement=new en(Y,this._order,ne,C,q,Q,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Pe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.browser.now()),me=!0),he&&this.pauseablePlacement.placement.setStale()),me||he)for(var kt=0,Ot=this._order;kt<Ot.length;kt+=1){var Et=Ot[kt],jt=this._layers[Et];jt.type==="symbol"&&this.placement.updateLayerOpacities(jt,Pe[jt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.browser.now())},G.prototype._releaseSymbolFadeTiles=function(){for(var Y in this.sourceCaches)this.sourceCaches[Y].releaseSymbolFadeTiles()},G.prototype.getImages=function(Y,C,q){this.imageManager.getImages(C.icons,q),this._updateTilesForChangedImages();var Q=this.sourceCaches[C.source];Q&&Q.setDependencies(C.tileID.key,C.type,C.icons)},G.prototype.getGlyphs=function(Y,C,q){this.glyphManager.getGlyphs(C.stacks,q)},G.prototype.getResource=function(Y,C,q){return i.makeRequest(C,q)},G}(i.Evented);hr.getSourceType=function(B){return te[B]},hr.setSourceType=function(B,G){te[B]=G},hr.registerForPluginStateChange=i.registerForPluginStateChange;var fr=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),xr=Di(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),yr=Di(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ir=Di(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),lr=Di(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),kr=Di("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Fr=Di(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Wr=Di(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ki=Di("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ai=Di("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),aa=Di("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),bi=Di(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Ji=Di(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ba=Di(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Na=Di(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ss=Di(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),qu=Di(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),dl=Di(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),vl=Di(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Nl=Di(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),bo=Di(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),jl=Di(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ul=Di(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Vl=Di(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Yo=Di(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),as=Di(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Es=Di(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Di(B,G){var Y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=G.match(/attribute ([\w]+) ([\w]+)/g),q=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Q=G.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ne=Q?Q.concat(q):q,he={};return{fragmentSource:B=B.replace(Y,function(me,Pe,ze,qe,Ze){return he[Ze]=!0,Pe==="define"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
varying `+ze+" "+qe+" "+Ze+`;
#else
uniform `+ze+" "+qe+" u_"+Ze+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ze+`
    `+ze+" "+qe+" "+Ze+" = u_"+Ze+`;
#endif
`}),vertexSource:G=G.replace(Y,function(me,Pe,ze,qe,Ze){var rt=qe==="float"?"vec2":"vec4",pt=Ze.match(/color/)?"color":rt;return he[Ze]?Pe==="define"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
uniform lowp float u_`+Ze+`_t;
attribute `+ze+" "+rt+" a_"+Ze+`;
varying `+ze+" "+qe+" "+Ze+`;
#else
uniform `+ze+" "+qe+" u_"+Ze+`;
#endif
`:pt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
    `+Ze+" = a_"+Ze+`;
#else
    `+ze+" "+qe+" "+Ze+" = u_"+Ze+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ze+`
    `+Ze+" = unpack_mix_"+pt+"(a_"+Ze+", u_"+Ze+`_t);
#else
    `+ze+" "+qe+" "+Ze+" = u_"+Ze+`;
#endif
`:Pe==="define"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
uniform lowp float u_`+Ze+`_t;
attribute `+ze+" "+rt+" a_"+Ze+`;
#else
uniform `+ze+" "+qe+" u_"+Ze+`;
#endif
`:pt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
    `+ze+" "+qe+" "+Ze+" = a_"+Ze+`;
#else
    `+ze+" "+qe+" "+Ze+" = u_"+Ze+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ze+`
    `+ze+" "+qe+" "+Ze+" = unpack_mix_"+pt+"(a_"+Ze+", u_"+Ze+`_t);
#else
    `+ze+" "+qe+" "+Ze+" = u_"+Ze+`;
#endif
`}),staticAttributes:C,staticUniforms:ne}}var ca=Object.freeze({__proto__:null,prelude:xr,background:yr,backgroundPattern:Ir,circle:lr,clippingMask:kr,heatmap:Fr,heatmapTexture:Wr,collisionBox:ki,collisionCircle:Ai,debug:aa,fill:bi,fillOutline:Ji,fillOutlinePattern:Ba,fillPattern:Na,fillExtrusion:Ss,fillExtrusionPattern:qu,hillshadePrepare:dl,hillshade:vl,line:Nl,lineGradient:bo,linePattern:jl,lineSDF:Ul,raster:Vl,symbolIcon:Yo,symbolSDF:as,symbolTextAndIcon:Es}),Go=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Io(B){for(var G=[],Y=0;Y<B.length;Y++)if(B[Y]!==null){var C=B[Y].split(" ");G.push(C.pop())}return G}Go.prototype.bind=function(B,G,Y,C,q,Q,ne,he){this.context=B;for(var me=this.boundPaintVertexBuffers.length!==C.length,Pe=0;!me&&Pe<C.length;Pe++)this.boundPaintVertexBuffers[Pe]!==C[Pe]&&(me=!0);var ze=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==Y||me||this.boundIndexBuffer!==q||this.boundVertexOffset!==Q||this.boundDynamicVertexBuffer!==ne||this.boundDynamicVertexBuffer2!==he;!B.extVertexArrayObject||ze?this.freshBind(G,Y,C,q,Q,ne,he):(B.bindVertexArrayOES.set(this.vao),ne&&ne.bind(),q&&q.dynamicDraw&&q.bind(),he&&he.bind())},Go.prototype.freshBind=function(B,G,Y,C,q,Q,ne){var he,me=B.numAttributes,Pe=this.context,ze=Pe.gl;if(Pe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Pe.extVertexArrayObject.createVertexArrayOES(),Pe.bindVertexArrayOES.set(this.vao),he=0,this.boundProgram=B,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=Y,this.boundIndexBuffer=C,this.boundVertexOffset=q,this.boundDynamicVertexBuffer=Q,this.boundDynamicVertexBuffer2=ne;else{he=Pe.currentNumAttributes||0;for(var qe=me;qe<he;qe++)ze.disableVertexAttribArray(qe)}G.enableAttributes(ze,B);for(var Ze=0,rt=Y;Ze<rt.length;Ze+=1)rt[Ze].enableAttributes(ze,B);Q&&Q.enableAttributes(ze,B),ne&&ne.enableAttributes(ze,B),G.bind(),G.setVertexAttribPointers(ze,B,q);for(var pt=0,vt=Y;pt<vt.length;pt+=1){var kt=vt[pt];kt.bind(),kt.setVertexAttribPointers(ze,B,q)}Q&&(Q.bind(),Q.setVertexAttribPointers(ze,B,q)),C&&C.bind(),ne&&(ne.bind(),ne.setVertexAttribPointers(ze,B,q)),Pe.currentNumAttributes=me},Go.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var _o=function(B,G,Y,C,q,Q){var ne=B.gl;this.program=ne.createProgram();for(var he=Io(Y.staticAttributes),me=C?C.getBinderAttributes():[],Pe=he.concat(me),ze=Y.staticUniforms?Io(Y.staticUniforms):[],qe=C?C.getBinderUniforms():[],Ze=[],rt=0,pt=ze.concat(qe);rt<pt.length;rt+=1){var vt=pt[rt];Ze.indexOf(vt)<0&&Ze.push(vt)}var kt=C?C.defines():[];Q&&kt.push("#define OVERDRAW_INSPECTOR;");var Ot=kt.concat(xr.fragmentSource,Y.fragmentSource).join(`
`),Et=kt.concat(xr.vertexSource,Y.vertexSource).join(`
`),jt=ne.createShader(ne.FRAGMENT_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(jt,Ot),ne.compileShader(jt),ne.attachShader(this.program,jt);var It=ne.createShader(ne.VERTEX_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(It,Et),ne.compileShader(It),ne.attachShader(this.program,It),this.attributes={};var Jt={};this.numAttributes=Pe.length;for(var Gt=0;Gt<this.numAttributes;Gt++)Pe[Gt]&&(ne.bindAttribLocation(this.program,Gt,Pe[Gt]),this.attributes[Pe[Gt]]=Gt);ne.linkProgram(this.program),ne.deleteShader(It),ne.deleteShader(jt);for(var Ht=0;Ht<Ze.length;Ht++){var mn=Ze[Ht];if(mn&&!Jt[mn]){var yn=ne.getUniformLocation(this.program,mn);yn&&(Jt[mn]=yn)}}this.fixedUniforms=q(B,Jt),this.binderUniforms=C?C.getUniforms(B,Jt):[]}}};function os(B,G,Y){var C=1/Jn(Y,1,G.transform.tileZoom),q=Math.pow(2,Y.tileID.overscaledZ),Q=Y.tileSize*Math.pow(2,G.transform.tileZoom)/q,ne=Q*(Y.tileID.canonical.x+Y.tileID.wrap*q),he=Q*Y.tileID.canonical.y;return{u_image:0,u_texsize:Y.imageAtlasTexture.size,u_scale:[C,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ne>>16,he>>16],u_pixel_coord_lower:[65535&ne,65535&he]}}_o.prototype.draw=function(B,G,Y,C,q,Q,ne,he,me,Pe,ze,qe,Ze,rt,pt,vt){var kt,Ot=B.gl;if(!this.failedToCreate){for(var Et in B.program.set(this.program),B.setDepthMode(Y),B.setStencilMode(C),B.setColorMode(q),B.setCullFace(Q),this.fixedUniforms)this.fixedUniforms[Et].set(ne[Et]);rt&&rt.setUniforms(B,this.binderUniforms,qe,{zoom:Ze});for(var jt=(kt={},kt[Ot.LINES]=2,kt[Ot.TRIANGLES]=3,kt[Ot.LINE_STRIP]=1,kt)[G],It=0,Jt=ze.get();It<Jt.length;It+=1){var Gt=Jt[It],Ht=Gt.vaos||(Gt.vaos={});(Ht[he]||(Ht[he]=new Go)).bind(B,this,me,rt?rt.getPaintVertexBuffers():[],Pe,Gt.vertexOffset,pt,vt),Ot.drawElements(G,Gt.primitiveLength*jt,Ot.UNSIGNED_SHORT,Gt.primitiveOffset*jt*2)}}};var Do=function(B,G,Y,C){var q=G.style.light,Q=q.properties.get("position"),ne=[Q.x,Q.y,Q.z],he=i.create$1();q.properties.get("anchor")==="viewport"&&i.fromRotation(he,-G.transform.angle),i.transformMat3(ne,ne,he);var me=q.properties.get("color");return{u_matrix:B,u_lightpos:ne,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[me.r,me.g,me.b],u_vertical_gradient:+Y,u_opacity:C}},ss=function(B,G,Y,C,q,Q,ne){return i.extend(Do(B,G,Y,C),os(Q,G,ne),{u_height_factor:-Math.pow(2,q.overscaledZ)/ne.tileSize/8})},Wo=function(B){return{u_matrix:B}},ls=function(B,G,Y,C){return i.extend(Wo(B),os(Y,G,C))},Ro=function(B,G){return{u_matrix:B,u_world:G}},su=function(B,G,Y,C,q){return i.extend(ls(B,G,Y,C),{u_world:q})},Hl=function(B,G,Y,C){var q,Q,ne=B.transform;if(C.paint.get("circle-pitch-alignment")==="map"){var he=Jn(Y,1,ne.zoom);q=!0,Q=[he,he]}else q=!1,Q=ne.pixelsToGLUnits;return{u_camera_to_center_distance:ne.cameraToCenterDistance,u_scale_with_map:+(C.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(G.posMatrix,Y,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_pitch_with_map:+q,u_device_pixel_ratio:i.browser.devicePixelRatio,u_extrude_scale:Q}},Ls=function(B,G,Y){var C=Jn(Y,1,G.zoom),q=Math.pow(2,G.zoom-Y.tileID.overscaledZ),Q=Y.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:G.cameraToCenterDistance,u_pixels_to_tile_units:C,u_extrude_scale:[G.pixelsToGLUnits[0]/(C*q),G.pixelsToGLUnits[1]/(C*q)],u_overscale_factor:Q}},Eu=function(B,G,Y){return{u_matrix:B,u_inv_matrix:G,u_camera_to_center_distance:Y.cameraToCenterDistance,u_viewport_size:[Y.width,Y.height]}},Lu=function(B,G,Y){return Y===void 0&&(Y=1),{u_matrix:B,u_color:G,u_overlay:0,u_overlay_scale:Y}},Cs=function(B){return{u_matrix:B}},Cu=function(B,G,Y,C){return{u_matrix:B,u_extrude_scale:Jn(G,1,Y),u_intensity:C}},Yu=function(B,G,Y,C){var q=i.create();i.ortho(q,0,B.width,B.height,0,0,1);var Q=B.context.gl;return{u_matrix:q,u_world:[Q.drawingBufferWidth,Q.drawingBufferHeight],u_image:Y,u_color_ramp:C,u_opacity:G.paint.get("heatmap-opacity")}},Gu=function(B,G,Y){var C=Y.paint.get("hillshade-shadow-color"),q=Y.paint.get("hillshade-highlight-color"),Q=Y.paint.get("hillshade-accent-color"),ne=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);Y.paint.get("hillshade-illumination-anchor")==="viewport"&&(ne-=B.transform.angle);var he,me,Pe,ze=!B.options.moving;return{u_matrix:B.transform.calculatePosMatrix(G.tileID.toUnwrapped(),ze),u_image:0,u_latrange:(he=G.tileID,me=Math.pow(2,he.canonical.z),Pe=he.canonical.y,[new i.MercatorCoordinate(0,Pe/me).toLngLat().lat,new i.MercatorCoordinate(0,(Pe+1)/me).toLngLat().lat]),u_light:[Y.paint.get("hillshade-exaggeration"),ne],u_shadow:C,u_highlight:q,u_accent:Q}},Os=function(B,G){var Y=G.stride,C=i.create();return i.ortho(C,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(C,C,[0,-i.EXTENT,0]),{u_matrix:C,u_image:1,u_dimension:[Y,Y],u_zoom:B.overscaledZ,u_unpack:G.getUnpackVector()}},zo=function(B,G,Y){var C=B.transform;return{u_matrix:wo(B,G,Y),u_ratio:1/Jn(G,1,C.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Ws=function(B,G,Y,C){return i.extend(zo(B,G,Y),{u_image:0,u_image_height:C})},Ps=function(B,G,Y,C){var q=B.transform,Q=Is(G,q);return{u_matrix:wo(B,G,Y),u_texsize:G.imageAtlasTexture.size,u_ratio:1/Jn(G,1,q.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_image:0,u_scale:[Q,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},ml=function(B,G,Y,C,q){var Q=B.transform,ne=B.lineAtlas,he=Is(G,Q),me=Y.layout.get("line-cap")==="round",Pe=ne.getDash(C.from,me),ze=ne.getDash(C.to,me),qe=Pe.width*q.fromScale,Ze=ze.width*q.toScale;return i.extend(zo(B,G,Y),{u_patternscale_a:[he/qe,-Pe.height/2],u_patternscale_b:[he/Ze,-ze.height/2],u_sdfgamma:ne.width/(256*Math.min(qe,Ze)*i.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Pe.y,u_tex_y_b:ze.y,u_mix:q.t})};function Is(B,G){return 1/Jn(B,1,G.tileZoom)}function wo(B,G,Y){return B.translatePosMatrix(G.tileID.posMatrix,G,Y.paint.get("line-translate"),Y.paint.get("line-translate-anchor"))}var lu=function(B,G,Y,C,q){return{u_matrix:B,u_tl_parent:G,u_scale_parent:Y,u_buffer_scale:1,u_fade_t:C.mix,u_opacity:C.opacity*q.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:q.paint.get("raster-brightness-min"),u_brightness_high:q.paint.get("raster-brightness-max"),u_saturation_factor:(ne=q.paint.get("raster-saturation"),ne>0?1-1/(1.001-ne):-ne),u_contrast_factor:(Q=q.paint.get("raster-contrast"),Q>0?1/(1-Q):1+Q),u_spin_weights:us(q.paint.get("raster-hue-rotate"))};var Q,ne};function us(B){B*=Math.PI/180;var G=Math.sin(B),Y=Math.cos(B);return[(2*Y+1)/3,(-Math.sqrt(3)*G-Y+1)/3,(Math.sqrt(3)*G-Y+1)/3]}var Zo,Xo=function(B,G,Y,C,q,Q,ne,he,me,Pe){var ze=q.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:G?G.uSizeT:0,u_size:G?G.uSize:0,u_camera_to_center_distance:ze.cameraToCenterDistance,u_pitch:ze.pitch/360*2*Math.PI,u_rotate_symbol:+Y,u_aspect_ratio:ze.width/ze.height,u_fade_change:q.options.fadeDuration?q.symbolFadeChange:1,u_matrix:Q,u_label_plane_matrix:ne,u_coord_matrix:he,u_is_text:+me,u_pitch_with_map:+C,u_texsize:Pe,u_texture:0}},cs=function(B,G,Y,C,q,Q,ne,he,me,Pe,ze){var qe=q.transform;return i.extend(Xo(B,G,Y,C,q,Q,ne,he,me,Pe),{u_gamma_scale:C?Math.cos(qe._pitch)*qe.cameraToCenterDistance:1,u_device_pixel_ratio:i.browser.devicePixelRatio,u_is_halo:+ze})},ri=function(B,G,Y,C,q,Q,ne,he,me,Pe){return i.extend(cs(B,G,Y,C,q,Q,ne,he,!0,me,!0),{u_texsize_icon:Pe,u_texture_icon:1})},Zs=function(B,G,Y){return{u_matrix:B,u_opacity:G,u_color:Y}},Wu=function(B,G,Y,C,q,Q){return i.extend(function(ne,he,me,Pe){var ze=me.imageManager.getPattern(ne.from.toString()),qe=me.imageManager.getPattern(ne.to.toString()),Ze=me.imageManager.getPixelSize(),rt=Ze.width,pt=Ze.height,vt=Math.pow(2,Pe.tileID.overscaledZ),kt=Pe.tileSize*Math.pow(2,me.transform.tileZoom)/vt,Ot=kt*(Pe.tileID.canonical.x+Pe.tileID.wrap*vt),Et=kt*Pe.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ze.tl,u_pattern_br_a:ze.br,u_pattern_tl_b:qe.tl,u_pattern_br_b:qe.br,u_texsize:[rt,pt],u_mix:he.t,u_pattern_size_a:ze.displaySize,u_pattern_size_b:qe.displaySize,u_scale_a:he.fromScale,u_scale_b:he.toScale,u_tile_units_to_pixels:1/Jn(Pe,1,me.transform.tileZoom),u_pixel_coord_upper:[Ot>>16,Et>>16],u_pixel_coord_lower:[65535&Ot,65535&Et]}}(C,Q,Y,q),{u_matrix:B,u_opacity:G})},ql={fillExtrusion:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_lightpos:new i.Uniform3f(B,G.u_lightpos),u_lightintensity:new i.Uniform1f(B,G.u_lightintensity),u_lightcolor:new i.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new i.Uniform1f(B,G.u_vertical_gradient),u_opacity:new i.Uniform1f(B,G.u_opacity)}},fillExtrusionPattern:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_lightpos:new i.Uniform3f(B,G.u_lightpos),u_lightintensity:new i.Uniform1f(B,G.u_lightintensity),u_lightcolor:new i.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new i.Uniform1f(B,G.u_vertical_gradient),u_height_factor:new i.Uniform1f(B,G.u_height_factor),u_image:new i.Uniform1i(B,G.u_image),u_texsize:new i.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new i.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new i.Uniform3f(B,G.u_scale),u_fade:new i.Uniform1f(B,G.u_fade),u_opacity:new i.Uniform1f(B,G.u_opacity)}},fill:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix)}},fillPattern:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_image:new i.Uniform1i(B,G.u_image),u_texsize:new i.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new i.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new i.Uniform3f(B,G.u_scale),u_fade:new i.Uniform1f(B,G.u_fade)}},fillOutline:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_world:new i.Uniform2f(B,G.u_world)}},fillOutlinePattern:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_world:new i.Uniform2f(B,G.u_world),u_image:new i.Uniform1i(B,G.u_image),u_texsize:new i.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new i.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new i.Uniform3f(B,G.u_scale),u_fade:new i.Uniform1f(B,G.u_fade)}},circle:function(B,G){return{u_camera_to_center_distance:new i.Uniform1f(B,G.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(B,G.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(B,G.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(B,G.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(B,G.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(B,G.u_matrix)}},collisionBox:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_camera_to_center_distance:new i.Uniform1f(B,G.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(B,G.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(B,G.u_extrude_scale),u_overscale_factor:new i.Uniform1f(B,G.u_overscale_factor)}},collisionCircle:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_inv_matrix:new i.UniformMatrix4f(B,G.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(B,G.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(B,G.u_viewport_size)}},debug:function(B,G){return{u_color:new i.UniformColor(B,G.u_color),u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_overlay:new i.Uniform1i(B,G.u_overlay),u_overlay_scale:new i.Uniform1f(B,G.u_overlay_scale)}},clippingMask:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix)}},heatmap:function(B,G){return{u_extrude_scale:new i.Uniform1f(B,G.u_extrude_scale),u_intensity:new i.Uniform1f(B,G.u_intensity),u_matrix:new i.UniformMatrix4f(B,G.u_matrix)}},heatmapTexture:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_world:new i.Uniform2f(B,G.u_world),u_image:new i.Uniform1i(B,G.u_image),u_color_ramp:new i.Uniform1i(B,G.u_color_ramp),u_opacity:new i.Uniform1f(B,G.u_opacity)}},hillshade:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_image:new i.Uniform1i(B,G.u_image),u_latrange:new i.Uniform2f(B,G.u_latrange),u_light:new i.Uniform2f(B,G.u_light),u_shadow:new i.UniformColor(B,G.u_shadow),u_highlight:new i.UniformColor(B,G.u_highlight),u_accent:new i.UniformColor(B,G.u_accent)}},hillshadePrepare:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_image:new i.Uniform1i(B,G.u_image),u_dimension:new i.Uniform2f(B,G.u_dimension),u_zoom:new i.Uniform1f(B,G.u_zoom),u_unpack:new i.Uniform4f(B,G.u_unpack)}},line:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_ratio:new i.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new i.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(B,G.u_units_to_pixels)}},lineGradient:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_ratio:new i.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new i.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(B,G.u_units_to_pixels),u_image:new i.Uniform1i(B,G.u_image),u_image_height:new i.Uniform1f(B,G.u_image_height)}},linePattern:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_texsize:new i.Uniform2f(B,G.u_texsize),u_ratio:new i.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new i.Uniform1f(B,G.u_device_pixel_ratio),u_image:new i.Uniform1i(B,G.u_image),u_units_to_pixels:new i.Uniform2f(B,G.u_units_to_pixels),u_scale:new i.Uniform3f(B,G.u_scale),u_fade:new i.Uniform1f(B,G.u_fade)}},lineSDF:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_ratio:new i.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new i.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(B,G.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(B,G.u_patternscale_a),u_patternscale_b:new i.Uniform2f(B,G.u_patternscale_b),u_sdfgamma:new i.Uniform1f(B,G.u_sdfgamma),u_image:new i.Uniform1i(B,G.u_image),u_tex_y_a:new i.Uniform1f(B,G.u_tex_y_a),u_tex_y_b:new i.Uniform1f(B,G.u_tex_y_b),u_mix:new i.Uniform1f(B,G.u_mix)}},raster:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_tl_parent:new i.Uniform2f(B,G.u_tl_parent),u_scale_parent:new i.Uniform1f(B,G.u_scale_parent),u_buffer_scale:new i.Uniform1f(B,G.u_buffer_scale),u_fade_t:new i.Uniform1f(B,G.u_fade_t),u_opacity:new i.Uniform1f(B,G.u_opacity),u_image0:new i.Uniform1i(B,G.u_image0),u_image1:new i.Uniform1i(B,G.u_image1),u_brightness_low:new i.Uniform1f(B,G.u_brightness_low),u_brightness_high:new i.Uniform1f(B,G.u_brightness_high),u_saturation_factor:new i.Uniform1f(B,G.u_saturation_factor),u_contrast_factor:new i.Uniform1f(B,G.u_contrast_factor),u_spin_weights:new i.Uniform3f(B,G.u_spin_weights)}},symbolIcon:function(B,G){return{u_is_size_zoom_constant:new i.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new i.Uniform1f(B,G.u_size_t),u_size:new i.Uniform1f(B,G.u_size),u_camera_to_center_distance:new i.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new i.Uniform1f(B,G.u_pitch),u_rotate_symbol:new i.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new i.Uniform1f(B,G.u_fade_change),u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new i.Uniform1i(B,G.u_is_text),u_pitch_with_map:new i.Uniform1i(B,G.u_pitch_with_map),u_texsize:new i.Uniform2f(B,G.u_texsize),u_texture:new i.Uniform1i(B,G.u_texture)}},symbolSDF:function(B,G){return{u_is_size_zoom_constant:new i.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new i.Uniform1f(B,G.u_size_t),u_size:new i.Uniform1f(B,G.u_size),u_camera_to_center_distance:new i.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new i.Uniform1f(B,G.u_pitch),u_rotate_symbol:new i.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new i.Uniform1f(B,G.u_fade_change),u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new i.Uniform1i(B,G.u_is_text),u_pitch_with_map:new i.Uniform1i(B,G.u_pitch_with_map),u_texsize:new i.Uniform2f(B,G.u_texsize),u_texture:new i.Uniform1i(B,G.u_texture),u_gamma_scale:new i.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(B,G.u_is_halo)}},symbolTextAndIcon:function(B,G){return{u_is_size_zoom_constant:new i.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new i.Uniform1f(B,G.u_size_t),u_size:new i.Uniform1f(B,G.u_size),u_camera_to_center_distance:new i.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new i.Uniform1f(B,G.u_pitch),u_rotate_symbol:new i.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new i.Uniform1f(B,G.u_fade_change),u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new i.Uniform1i(B,G.u_is_text),u_pitch_with_map:new i.Uniform1i(B,G.u_pitch_with_map),u_texsize:new i.Uniform2f(B,G.u_texsize),u_texsize_icon:new i.Uniform2f(B,G.u_texsize_icon),u_texture:new i.Uniform1i(B,G.u_texture),u_texture_icon:new i.Uniform1i(B,G.u_texture_icon),u_gamma_scale:new i.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(B,G.u_is_halo)}},background:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_opacity:new i.Uniform1f(B,G.u_opacity),u_color:new i.UniformColor(B,G.u_color)}},backgroundPattern:function(B,G){return{u_matrix:new i.UniformMatrix4f(B,G.u_matrix),u_opacity:new i.Uniform1f(B,G.u_opacity),u_image:new i.Uniform1i(B,G.u_image),u_pattern_tl_a:new i.Uniform2f(B,G.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(B,G.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(B,G.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(B,G.u_pattern_br_b),u_texsize:new i.Uniform2f(B,G.u_texsize),u_mix:new i.Uniform1f(B,G.u_mix),u_pattern_size_a:new i.Uniform2f(B,G.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(B,G.u_pattern_size_b),u_scale_a:new i.Uniform1f(B,G.u_scale_a),u_scale_b:new i.Uniform1f(B,G.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(B,G.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(B,G.u_tile_units_to_pixels)}}};function Xs(B,G,Y,C,q,Q,ne){for(var he=B.context,me=he.gl,Pe=B.useProgram("collisionBox"),ze=[],qe=0,Ze=0,rt=0;rt<C.length;rt++){var pt=C[rt],vt=G.getTile(pt),kt=vt.getBucket(Y);if(kt){var Ot=pt.posMatrix;q[0]===0&&q[1]===0||(Ot=B.translatePosMatrix(pt.posMatrix,vt,q,Q));var Et=ne?kt.textCollisionBox:kt.iconCollisionBox,jt=kt.collisionCircleArray;if(jt.length>0){var It=i.create(),Jt=Ot;i.mul(It,kt.placementInvProjMatrix,B.transform.glCoordMatrix),i.mul(It,It,kt.placementViewportMatrix),ze.push({circleArray:jt,circleOffset:Ze,transform:Jt,invTransform:It}),Ze=qe+=jt.length/4}Et&&Pe.draw(he,me.LINES,Ft.disabled,Xe.disabled,B.colorModeForRenderPass(),He.disabled,Ls(Ot,B.transform,vt),Y.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,null,B.transform.zoom,null,null,Et.collisionVertexBuffer)}}if(ne&&ze.length){var Gt=B.useProgram("collisionCircle"),Ht=new i.StructArrayLayout2f1f2i16;Ht.resize(4*qe),Ht._trim();for(var mn=0,yn=0,In=ze;yn<In.length;yn+=1)for(var Rn=In[yn],Yn=0;Yn<Rn.circleArray.length/4;Yn++){var er=4*Yn,dr=Rn.circleArray[er+0],Xn=Rn.circleArray[er+1],cr=Rn.circleArray[er+2],Tr=Rn.circleArray[er+3];Ht.emplace(mn++,dr,Xn,cr,Tr,0),Ht.emplace(mn++,dr,Xn,cr,Tr,1),Ht.emplace(mn++,dr,Xn,cr,Tr,2),Ht.emplace(mn++,dr,Xn,cr,Tr,3)}(!Zo||Zo.length<2*qe)&&(Zo=function(jr){var Xr=2*jr,Kr=new i.StructArrayLayout3ui6;Kr.resize(Xr),Kr._trim();for(var ni=0;ni<Xr;ni++){var ai=6*ni;Kr.uint16[ai+0]=4*ni+0,Kr.uint16[ai+1]=4*ni+1,Kr.uint16[ai+2]=4*ni+2,Kr.uint16[ai+3]=4*ni+2,Kr.uint16[ai+4]=4*ni+3,Kr.uint16[ai+5]=4*ni+0}return Kr}(qe));for(var Rr=he.createIndexBuffer(Zo,!0),$n=he.createVertexBuffer(Ht,i.collisionCircleLayout.members,!0),ur=0,Sr=ze;ur<Sr.length;ur+=1){var gr=Sr[ur],Pr=Eu(gr.transform,gr.invTransform,B.transform);Gt.draw(he,me.TRIANGLES,Ft.disabled,Xe.disabled,B.colorModeForRenderPass(),He.disabled,Pr,Y.id,$n,Rr,i.SegmentVector.simpleSegment(0,2*gr.circleOffset,gr.circleArray.length,gr.circleArray.length/2),null,B.transform.zoom,null,null,null)}$n.destroy(),Rr.destroy()}}var Ou=i.identity(new Float32Array(16));function Zu(B,G,Y,C,q,Q){var ne=i.getAnchorAlignment(B),he=-(ne.horizontalAlign-.5)*G,me=-(ne.verticalAlign-.5)*Y,Pe=i.evaluateVariableOffset(B,C);return new i.Point((he/q+Pe[0])*Q,(me/q+Pe[1])*Q)}function Yl(B,G,Y,C,q,Q,ne,he,me,Pe,ze){var qe=B.text.placedSymbolArray,Ze=B.text.dynamicLayoutVertexArray,rt=B.icon.dynamicLayoutVertexArray,pt={};Ze.clear();for(var vt=0;vt<qe.length;vt++){var kt=qe.get(vt),Ot=B.allowVerticalPlacement&&!kt.placedOrientation,Et=kt.hidden||!kt.crossTileID||Ot?null:C[kt.crossTileID];if(Et){var jt=new i.Point(kt.anchorX,kt.anchorY),It=Zt(jt,Y?he:ne),Jt=ln(Q.cameraToCenterDistance,It.signedDistanceFromCamera),Gt=q.evaluateSizeForFeature(B.textSizeData,Pe,kt)*Jt/i.ONE_EM;Y&&(Gt*=B.tilePixelRatio/me);for(var Ht=Et.width,mn=Et.height,yn=Zu(Et.anchor,Ht,mn,Et.textOffset,Et.textBoxScale,Gt),In=Y?Zt(jt.add(yn),ne).point:It.point.add(G?yn.rotate(-Q.angle):yn),Rn=B.allowVerticalPlacement&&kt.placedOrientation===i.WritingMode.vertical?Math.PI/2:0,Yn=0;Yn<kt.numGlyphs;Yn++)i.addDynamicAttributes(Ze,In,Rn);ze&&kt.associatedIconIndex>=0&&(pt[kt.associatedIconIndex]={shiftedAnchor:In,angle:Rn})}else qn(kt.numGlyphs,Ze)}if(ze){rt.clear();for(var er=B.icon.placedSymbolArray,dr=0;dr<er.length;dr++){var Xn=er.get(dr);if(Xn.hidden)qn(Xn.numGlyphs,rt);else{var cr=pt[dr];if(cr)for(var Tr=0;Tr<Xn.numGlyphs;Tr++)i.addDynamicAttributes(rt,cr.shiftedAnchor,cr.angle);else qn(Xn.numGlyphs,rt)}}B.icon.dynamicLayoutVertexBuffer.updateData(rt)}B.text.dynamicLayoutVertexBuffer.updateData(Ze)}function Xu(B,G,Y){return Y.iconsInText&&G?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function fs(B,G,Y,C,q,Q,ne,he,me,Pe,ze,qe){for(var Ze=B.context,rt=Ze.gl,pt=B.transform,vt=he==="map",kt=me==="map",Ot=vt&&Y.layout.get("symbol-placement")!=="point",Et=vt&&!kt&&!Ot,jt=Y.layout.get("symbol-sort-key").constantOr(1)!==void 0,It=!1,Jt=B.depthModeForSublayer(0,Ft.ReadOnly),Gt=Y.layout.get("text-variable-anchor"),Ht=[],mn=0,yn=C;mn<yn.length;mn+=1){var In=yn[mn],Rn=G.getTile(In),Yn=Rn.getBucket(Y);if(Yn){var er=q?Yn.text:Yn.icon;if(er&&er.segments.get().length){var dr=er.programConfigurations.get(Y.id),Xn=q||Yn.sdfIcons,cr=q?Yn.textSizeData:Yn.iconSizeData,Tr=kt||pt.pitch!==0,Rr=B.useProgram(Xu(Xn,q,Yn),dr),$n=i.evaluateSizeForZoom(cr,pt.zoom),ur=void 0,Sr=[0,0],gr=void 0,Pr=void 0,jr=null,Xr=void 0;if(q){if(gr=Rn.glyphAtlasTexture,Pr=rt.LINEAR,ur=Rn.glyphAtlasTexture.size,Yn.iconsInText){Sr=Rn.imageAtlasTexture.size,jr=Rn.imageAtlasTexture;var Kr=cr.kind==="composite"||cr.kind==="camera";Xr=Tr||B.options.rotating||B.options.zooming||Kr?rt.LINEAR:rt.NEAREST}}else{var ni=Y.layout.get("icon-size").constantOr(0)!==1||Yn.iconsNeedLinear;gr=Rn.imageAtlasTexture,Pr=Xn||B.options.rotating||B.options.zooming||ni||Tr?rt.LINEAR:rt.NEAREST,ur=Rn.imageAtlasTexture.size}var ai=Jn(Rn,1,B.transform.zoom),Li=Ln(In.posMatrix,kt,vt,B.transform,ai),Ki=fn(In.posMatrix,kt,vt,B.transform,ai),Pa=Gt&&Yn.hasTextData(),pa=Y.layout.get("icon-text-fit")!=="none"&&Pa&&Yn.hasIconData();Ot&&cn(Yn,In.posMatrix,B,q,Li,Ki,kt,Pe);var Ma=B.translatePosMatrix(In.posMatrix,Rn,Q,ne),zi=Ot||q&&Gt||pa?Ou:Li,si=B.translatePosMatrix(Ki,Rn,Q,ne,!0),Hi=Xn&&Y.paint.get(q?"text-halo-width":"icon-halo-width").constantOr(1)!==0,wi={program:Rr,buffers:er,uniformValues:Xn?Yn.iconsInText?ri(cr.kind,$n,Et,kt,B,Ma,zi,si,ur,Sr):cs(cr.kind,$n,Et,kt,B,Ma,zi,si,q,ur,!0):Xo(cr.kind,$n,Et,kt,B,Ma,zi,si,q,ur),atlasTexture:gr,atlasTextureIcon:jr,atlasInterpolation:Pr,atlasInterpolationIcon:Xr,isSDF:Xn,hasHalo:Hi};if(jt&&Yn.canOverlap){It=!0;for(var hi=0,qi=er.segments.get();hi<qi.length;hi+=1){var Qi=qi[hi];Ht.push({segments:new i.SegmentVector([Qi]),sortKey:Qi.sortKey,state:wi})}}else Ht.push({segments:er.segments,sortKey:0,state:wi})}}}It&&Ht.sort(function(Sl,ts){return Sl.sortKey-ts.sortKey});for(var la=0,al=Ht;la<al.length;la+=1){var ol=al[la],pi=ol.state;if(Ze.activeTexture.set(rt.TEXTURE0),pi.atlasTexture.bind(pi.atlasInterpolation,rt.CLAMP_TO_EDGE),pi.atlasTextureIcon&&(Ze.activeTexture.set(rt.TEXTURE1),pi.atlasTextureIcon&&pi.atlasTextureIcon.bind(pi.atlasInterpolationIcon,rt.CLAMP_TO_EDGE)),pi.isSDF){var Jl=pi.uniformValues;pi.hasHalo&&(Jl.u_is_halo=1,Ds(pi.buffers,ol.segments,Y,B,pi.program,Jt,ze,qe,Jl)),Jl.u_is_halo=0}Ds(pi.buffers,ol.segments,Y,B,pi.program,Jt,ze,qe,pi.uniformValues)}}function Ds(B,G,Y,C,q,Q,ne,he,me){var Pe=C.context,ze=Pe.gl;q.draw(Pe,ze.TRIANGLES,Q,ne,he,He.disabled,me,Y.id,B.layoutVertexBuffer,B.indexBuffer,G,Y.paint,C.transform.zoom,B.programConfigurations.get(Y.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function Jo(B,G,Y,C,q,Q,ne){var he,me,Pe,ze,qe,Ze=B.context.gl,rt=Y.paint.get("fill-pattern"),pt=rt&&rt.constantOr(1),vt=Y.getCrossfadeParameters();ne?(me=pt&&!Y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=Ze.LINES):(me=pt?"fillPattern":"fill",he=Ze.TRIANGLES);for(var kt=0,Ot=C;kt<Ot.length;kt+=1){var Et=Ot[kt],jt=G.getTile(Et);if(!pt||jt.patternsLoaded()){var It=jt.getBucket(Y);if(It){var Jt=It.programConfigurations.get(Y.id),Gt=B.useProgram(me,Jt);pt&&(B.context.activeTexture.set(Ze.TEXTURE0),jt.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),Jt.updatePaintBuffers(vt));var Ht=rt.constantOr(null);if(Ht&&jt.imageAtlas){var mn=jt.imageAtlas,yn=mn.patternPositions[Ht.to.toString()],In=mn.patternPositions[Ht.from.toString()];yn&&In&&Jt.setConstantPatternPositions(yn,In)}var Rn=B.translatePosMatrix(Et.posMatrix,jt,Y.paint.get("fill-translate"),Y.paint.get("fill-translate-anchor"));if(ne){ze=It.indexBuffer2,qe=It.segments2;var Yn=[Ze.drawingBufferWidth,Ze.drawingBufferHeight];Pe=me==="fillOutlinePattern"&&pt?su(Rn,B,vt,jt,Yn):Ro(Rn,Yn)}else ze=It.indexBuffer,qe=It.segments,Pe=pt?ls(Rn,B,vt,jt):Wo(Rn);Gt.draw(B.context,he,q,B.stencilModeForClipping(Et),Q,He.disabled,Pe,Y.id,It.layoutVertexBuffer,ze,qe,Y.paint,B.transform.zoom,Jt)}}}}function To(B,G,Y,C,q,Q,ne){for(var he=B.context,me=he.gl,Pe=Y.paint.get("fill-extrusion-pattern"),ze=Pe.constantOr(1),qe=Y.getCrossfadeParameters(),Ze=Y.paint.get("fill-extrusion-opacity"),rt=0,pt=C;rt<pt.length;rt+=1){var vt=pt[rt],kt=G.getTile(vt),Ot=kt.getBucket(Y);if(Ot){var Et=Ot.programConfigurations.get(Y.id),jt=B.useProgram(ze?"fillExtrusionPattern":"fillExtrusion",Et);ze&&(B.context.activeTexture.set(me.TEXTURE0),kt.imageAtlasTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE),Et.updatePaintBuffers(qe));var It=Pe.constantOr(null);if(It&&kt.imageAtlas){var Jt=kt.imageAtlas,Gt=Jt.patternPositions[It.to.toString()],Ht=Jt.patternPositions[It.from.toString()];Gt&&Ht&&Et.setConstantPatternPositions(Gt,Ht)}var mn=B.translatePosMatrix(vt.posMatrix,kt,Y.paint.get("fill-extrusion-translate"),Y.paint.get("fill-extrusion-translate-anchor")),yn=Y.paint.get("fill-extrusion-vertical-gradient"),In=ze?ss(mn,B,yn,Ze,vt,qe,kt):Do(mn,B,yn,Ze);jt.draw(he,he.gl.TRIANGLES,q,Q,ne,He.backCCW,In,Y.id,Ot.layoutVertexBuffer,Ot.indexBuffer,Ot.segments,Y.paint,B.transform.zoom,Et)}}}function Js(B,G,Y,C,q,Q){var ne=B.context,he=ne.gl,me=G.fbo;if(me){var Pe=B.useProgram("hillshade");ne.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,me.colorAttachment.get());var ze=Gu(B,G,Y);Pe.draw(ne,he.TRIANGLES,C,q,Q,He.disabled,ze,Y.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}}function Pu(B,G,Y,C,q,Q){var ne=B.context,he=ne.gl,me=G.dem;if(me&&me.data){var Pe=me.dim,ze=me.stride,qe=me.getPixels();if(ne.activeTexture.set(he.TEXTURE1),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),G.demTexture=G.demTexture||B.getTileTexture(ze),G.demTexture){var Ze=G.demTexture;Ze.update(qe,{premultiply:!1}),Ze.bind(he.NEAREST,he.CLAMP_TO_EDGE)}else G.demTexture=new i.Texture(ne,qe,he.RGBA,{premultiply:!1}),G.demTexture.bind(he.NEAREST,he.CLAMP_TO_EDGE);ne.activeTexture.set(he.TEXTURE0);var rt=G.fbo;if(!rt){var pt=new i.Texture(ne,{width:Pe,height:Pe,data:null},he.RGBA);pt.bind(he.LINEAR,he.CLAMP_TO_EDGE),(rt=G.fbo=ne.createFramebuffer(Pe,Pe,!0)).colorAttachment.set(pt.texture)}ne.bindFramebuffer.set(rt.framebuffer),ne.viewport.set([0,0,Pe,Pe]),B.useProgram("hillshadePrepare").draw(ne,he.TRIANGLES,C,q,Q,He.disabled,Os(G.tileID,me),Y.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),G.needsHillshadePrepare=!1}}function yl(B,G,Y,C,q){var Q=C.paint.get("raster-fade-duration");if(Q>0){var ne=i.browser.now(),he=(ne-B.timeAdded)/Q,me=G?(ne-G.timeAdded)/Q:-1,Pe=Y.getSource(),ze=q.coveringZoomLevel({tileSize:Pe.tileSize,roundZoom:Pe.roundZoom}),qe=!G||Math.abs(G.tileID.overscaledZ-ze)>Math.abs(B.tileID.overscaledZ-ze),Ze=qe&&B.refreshedUponExpiration?1:i.clamp(qe?he:1-me,0,1);return B.refreshedUponExpiration&&he>=1&&(B.refreshedUponExpiration=!1),G?{opacity:1,mix:1-Ze}:{opacity:Ze,mix:0}}return{opacity:1,mix:0}}var Gl=new i.Color(1,0,0,1),ro=new i.Color(0,1,0,1),Wl=new i.Color(0,0,1,1),Iu=new i.Color(1,0,1,1),Ks=new i.Color(0,1,1,1);function Rs(B){var G=B.transform.padding;Qs(B,B.transform.height-(G.top||0),3,Gl),Qs(B,G.bottom||0,3,ro),zs(B,G.left||0,3,Wl),zs(B,B.transform.width-(G.right||0),3,Iu);var Y=B.transform.centerPoint;(function(C,q,Q,ne){var he=20,me=2;Fs(C,q-me/2,Q-he/2,me,he,ne),Fs(C,q-he/2,Q-me/2,he,me,ne)})(B,Y.x,B.transform.height-Y.y,Ks)}function Qs(B,G,Y,C){Fs(B,0,G+Y/2,B.transform.width,Y,C)}function zs(B,G,Y,C){Fs(B,G-Y/2,0,Y,B.transform.height,C)}function Fs(B,G,Y,C,q,Q){var ne=B.context,he=ne.gl;he.enable(he.SCISSOR_TEST),he.scissor(G*i.browser.devicePixelRatio,Y*i.browser.devicePixelRatio,C*i.browser.devicePixelRatio,q*i.browser.devicePixelRatio),ne.clear({color:Q}),he.disable(he.SCISSOR_TEST)}function xl(B,G,Y){var C=B.context,q=C.gl,Q=Y.posMatrix,ne=B.useProgram("debug"),he=Ft.disabled,me=Xe.disabled,Pe=B.colorModeForRenderPass(),ze="$debug";C.activeTexture.set(q.TEXTURE0),B.emptyTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),ne.draw(C,q.LINE_STRIP,he,me,Pe,He.disabled,Lu(Q,i.Color.red),ze,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments);var qe=G.getTileByID(Y.key).latestRawTileData,Ze=qe&&qe.byteLength||0,rt=Math.floor(Ze/1024),pt=G.getTile(Y).tileSize,vt=512/Math.min(pt,512)*(Y.overscaledZ/B.transform.zoom)*.5,kt=Y.canonical.toString();Y.overscaledZ!==Y.canonical.z&&(kt+=" => "+Y.overscaledZ),function(Ot,Et){Ot.initDebugOverlayCanvas();var jt=Ot.debugOverlayCanvas,It=Ot.context.gl,Jt=Ot.debugOverlayCanvas.getContext("2d");Jt.clearRect(0,0,jt.width,jt.height),Jt.shadowColor="white",Jt.shadowBlur=2,Jt.lineWidth=1.5,Jt.strokeStyle="white",Jt.textBaseline="top",Jt.font="bold 36px Open Sans, sans-serif",Jt.fillText(Et,5,5),Jt.strokeText(Et,5,5),Ot.debugOverlayTexture.update(jt),Ot.debugOverlayTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE)}(B,kt+" "+rt+"kb"),ne.draw(C,q.TRIANGLES,he,me,Ke.alphaBlended,He.disabled,Lu(Q,i.Color.transparent,vt),ze,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments)}var Zl={symbol:function(B,G,Y,C,q){if(B.renderPass==="translucent"){var Q=Xe.disabled,ne=B.colorModeForRenderPass();Y.layout.get("text-variable-anchor")&&function(he,me,Pe,ze,qe,Ze,rt){for(var pt=me.transform,vt=qe==="map",kt=Ze==="map",Ot=0,Et=he;Ot<Et.length;Ot+=1){var jt=Et[Ot],It=ze.getTile(jt),Jt=It.getBucket(Pe);if(Jt&&Jt.text&&Jt.text.segments.get().length){var Gt=Jt.textSizeData,Ht=i.evaluateSizeForZoom(Gt,pt.zoom),mn=Jn(It,1,me.transform.zoom),yn=Ln(jt.posMatrix,kt,vt,me.transform,mn),In=Pe.layout.get("icon-text-fit")!=="none"&&Jt.hasIconData();if(Ht){var Rn=Math.pow(2,pt.zoom-It.tileID.overscaledZ);Yl(Jt,vt,kt,rt,i.symbolSize,pt,yn,jt.posMatrix,Rn,Ht,In)}}}}(C,B,Y,G,Y.layout.get("text-rotation-alignment"),Y.layout.get("text-pitch-alignment"),q),Y.paint.get("icon-opacity").constantOr(1)!==0&&fs(B,G,Y,C,!1,Y.paint.get("icon-translate"),Y.paint.get("icon-translate-anchor"),Y.layout.get("icon-rotation-alignment"),Y.layout.get("icon-pitch-alignment"),Y.layout.get("icon-keep-upright"),Q,ne),Y.paint.get("text-opacity").constantOr(1)!==0&&fs(B,G,Y,C,!0,Y.paint.get("text-translate"),Y.paint.get("text-translate-anchor"),Y.layout.get("text-rotation-alignment"),Y.layout.get("text-pitch-alignment"),Y.layout.get("text-keep-upright"),Q,ne),G.map.showCollisionBoxes&&(Xs(B,G,Y,C,Y.paint.get("text-translate"),Y.paint.get("text-translate-anchor"),!0),Xs(B,G,Y,C,Y.paint.get("icon-translate"),Y.paint.get("icon-translate-anchor"),!1))}},circle:function(B,G,Y,C){if(B.renderPass==="translucent"){var q=Y.paint.get("circle-opacity"),Q=Y.paint.get("circle-stroke-width"),ne=Y.paint.get("circle-stroke-opacity"),he=Y.layout.get("circle-sort-key").constantOr(1)!==void 0;if(q.constantOr(1)!==0||Q.constantOr(1)!==0&&ne.constantOr(1)!==0){for(var me=B.context,Pe=me.gl,ze=B.depthModeForSublayer(0,Ft.ReadOnly),qe=Xe.disabled,Ze=B.colorModeForRenderPass(),rt=[],pt=0;pt<C.length;pt++){var vt=C[pt],kt=G.getTile(vt),Ot=kt.getBucket(Y);if(Ot){var Et=Ot.programConfigurations.get(Y.id),jt={programConfiguration:Et,program:B.useProgram("circle",Et),layoutVertexBuffer:Ot.layoutVertexBuffer,indexBuffer:Ot.indexBuffer,uniformValues:Hl(B,vt,kt,Y)};if(he)for(var It=0,Jt=Ot.segments.get();It<Jt.length;It+=1){var Gt=Jt[It];rt.push({segments:new i.SegmentVector([Gt]),sortKey:Gt.sortKey,state:jt})}else rt.push({segments:Ot.segments,sortKey:0,state:jt})}}he&&rt.sort(function(Tr,Rr){return Tr.sortKey-Rr.sortKey});for(var Ht=0,mn=rt;Ht<mn.length;Ht+=1){var yn=mn[Ht],In=yn.state,Rn=In.programConfiguration,Yn=In.program,er=In.layoutVertexBuffer,dr=In.indexBuffer,Xn=In.uniformValues,cr=yn.segments;Yn.draw(me,Pe.TRIANGLES,ze,qe,Ze,He.disabled,Xn,Y.id,er,dr,cr,Y.paint,B.transform.zoom,Rn)}}}},heatmap:function(B,G,Y,C){if(Y.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){var q=B.context,Q=q.gl,ne=Xe.disabled,he=new Ke([Q.ONE,Q.ONE],i.Color.transparent,[!0,!0,!0,!0]);(function(vt,kt,Ot){var Et=vt.gl;vt.activeTexture.set(Et.TEXTURE1),vt.viewport.set([0,0,kt.width/4,kt.height/4]);var jt=Ot.heatmapFbo;if(jt)Et.bindTexture(Et.TEXTURE_2D,jt.colorAttachment.get()),vt.bindFramebuffer.set(jt.framebuffer);else{var It=Et.createTexture();Et.bindTexture(Et.TEXTURE_2D,It),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_S,Et.CLAMP_TO_EDGE),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_T,Et.CLAMP_TO_EDGE),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MIN_FILTER,Et.LINEAR),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MAG_FILTER,Et.LINEAR),jt=Ot.heatmapFbo=vt.createFramebuffer(kt.width/4,kt.height/4,!1),function(Jt,Gt,Ht,mn){var yn=Jt.gl,In=Jt.extRenderToTextureHalfFloat?Jt.extTextureHalfFloat.HALF_FLOAT_OES:yn.UNSIGNED_BYTE;yn.texImage2D(yn.TEXTURE_2D,0,yn.RGBA,Gt.width/4,Gt.height/4,0,yn.RGBA,In,null),mn.colorAttachment.set(Ht)}(vt,kt,It,jt)}})(q,B,Y),q.clear({color:i.Color.transparent});for(var me=0;me<C.length;me++){var Pe=C[me];if(!G.hasRenderableParent(Pe)){var ze=G.getTile(Pe),qe=ze.getBucket(Y);if(qe){var Ze=qe.programConfigurations.get(Y.id),rt=B.useProgram("heatmap",Ze),pt=B.transform.zoom;rt.draw(q,Q.TRIANGLES,Ft.disabled,ne,he,He.disabled,Cu(Pe.posMatrix,ze,pt,Y.paint.get("heatmap-intensity")),Y.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,Y.paint,B.transform.zoom,Ze)}}}q.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(vt,kt){var Ot=vt.context,Et=Ot.gl,jt=kt.heatmapFbo;if(jt){Ot.activeTexture.set(Et.TEXTURE0),Et.bindTexture(Et.TEXTURE_2D,jt.colorAttachment.get()),Ot.activeTexture.set(Et.TEXTURE1);var It=kt.colorRampTexture;It||(It=kt.colorRampTexture=new i.Texture(Ot,kt.colorRamp,Et.RGBA)),It.bind(Et.LINEAR,Et.CLAMP_TO_EDGE),vt.useProgram("heatmapTexture").draw(Ot,Et.TRIANGLES,Ft.disabled,Xe.disabled,vt.colorModeForRenderPass(),He.disabled,Yu(vt,kt,0,1),kt.id,vt.viewportBuffer,vt.quadTriangleIndexBuffer,vt.viewportSegments,kt.paint,vt.transform.zoom)}}(B,Y))},line:function(B,G,Y,C){if(B.renderPass==="translucent"){var q=Y.paint.get("line-opacity"),Q=Y.paint.get("line-width");if(q.constantOr(1)!==0&&Q.constantOr(1)!==0)for(var ne=B.depthModeForSublayer(0,Ft.ReadOnly),he=B.colorModeForRenderPass(),me=Y.paint.get("line-dasharray"),Pe=Y.paint.get("line-pattern"),ze=Pe.constantOr(1),qe=Y.paint.get("line-gradient"),Ze=Y.getCrossfadeParameters(),rt=ze?"linePattern":me?"lineSDF":qe?"lineGradient":"line",pt=B.context,vt=pt.gl,kt=!0,Ot=0,Et=C;Ot<Et.length;Ot+=1){var jt=Et[Ot],It=G.getTile(jt);if(!ze||It.patternsLoaded()){var Jt=It.getBucket(Y);if(Jt){var Gt=Jt.programConfigurations.get(Y.id),Ht=B.context.program.get(),mn=B.useProgram(rt,Gt),yn=kt||mn.program!==Ht,In=Pe.constantOr(null);if(In&&It.imageAtlas){var Rn=It.imageAtlas,Yn=Rn.patternPositions[In.to.toString()],er=Rn.patternPositions[In.from.toString()];Yn&&er&&Gt.setConstantPatternPositions(Yn,er)}var dr=ze?Ps(B,It,Y,Ze):me?ml(B,It,Y,me,Ze):qe?Ws(B,It,Y,Jt.lineClipsArray.length):zo(B,It,Y);if(ze)pt.activeTexture.set(vt.TEXTURE0),It.imageAtlasTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE),Gt.updatePaintBuffers(Ze);else if(me&&(yn||B.lineAtlas.dirty))pt.activeTexture.set(vt.TEXTURE0),B.lineAtlas.bind(pt);else if(qe){var Xn=Jt.gradients[Y.id],cr=Xn.texture;if(Y.gradientVersion!==Xn.version){var Tr=256;if(Y.stepInterpolant){var Rr=G.getSource().maxzoom,$n=jt.canonical.z===Rr?Math.ceil(1<<B.transform.maxZoom-jt.canonical.z):1,ur=Jt.maxLineLength/i.EXTENT*1024*$n;Tr=i.clamp(i.nextPowerOfTwo(ur),256,pt.maxTextureSize)}Xn.gradient=i.renderColorRamp({expression:Y.gradientExpression(),evaluationKey:"lineProgress",resolution:Tr,image:Xn.gradient||void 0,clips:Jt.lineClipsArray}),Xn.texture?Xn.texture.update(Xn.gradient):Xn.texture=new i.Texture(pt,Xn.gradient,vt.RGBA),Xn.version=Y.gradientVersion,cr=Xn.texture}pt.activeTexture.set(vt.TEXTURE0),cr.bind(Y.stepInterpolant?vt.NEAREST:vt.LINEAR,vt.CLAMP_TO_EDGE)}mn.draw(pt,vt.TRIANGLES,ne,B.stencilModeForClipping(jt),he,He.disabled,dr,Y.id,Jt.layoutVertexBuffer,Jt.indexBuffer,Jt.segments,Y.paint,B.transform.zoom,Gt,Jt.layoutVertexBuffer2),kt=!1}}}}},fill:function(B,G,Y,C){var q=Y.paint.get("fill-color"),Q=Y.paint.get("fill-opacity");if(Q.constantOr(1)!==0){var ne=B.colorModeForRenderPass(),he=Y.paint.get("fill-pattern"),me=B.opaquePassEnabledForLayer()&&!he.constantOr(1)&&q.constantOr(i.Color.transparent).a===1&&Q.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===me){var Pe=B.depthModeForSublayer(1,B.renderPass==="opaque"?Ft.ReadWrite:Ft.ReadOnly);Jo(B,G,Y,C,Pe,ne,!1)}if(B.renderPass==="translucent"&&Y.paint.get("fill-antialias")){var ze=B.depthModeForSublayer(Y.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly);Jo(B,G,Y,C,ze,ne,!0)}}},"fill-extrusion":function(B,G,Y,C){var q=Y.paint.get("fill-extrusion-opacity");if(q!==0&&B.renderPass==="translucent"){var Q=new Ft(B.context.gl.LEQUAL,Ft.ReadWrite,B.depthRangeFor3D);if(q!==1||Y.paint.get("fill-extrusion-pattern").constantOr(1))To(B,G,Y,C,Q,Xe.disabled,Ke.disabled),To(B,G,Y,C,Q,B.stencilModeFor3D(),B.colorModeForRenderPass());else{var ne=B.colorModeForRenderPass();To(B,G,Y,C,Q,Xe.disabled,ne)}}},hillshade:function(B,G,Y,C){if(B.renderPass==="offscreen"||B.renderPass==="translucent"){for(var q=B.context,Q=B.depthModeForSublayer(0,Ft.ReadOnly),ne=B.colorModeForRenderPass(),he=B.renderPass==="translucent"?B.stencilConfigForOverlap(C):[{},C],me=he[0],Pe=0,ze=he[1];Pe<ze.length;Pe+=1){var qe=ze[Pe],Ze=G.getTile(qe);Ze.needsHillshadePrepare&&B.renderPass==="offscreen"?Pu(B,Ze,Y,Q,Xe.disabled,ne):B.renderPass==="translucent"&&Js(B,Ze,Y,Q,me[qe.overscaledZ],ne)}q.viewport.set([0,0,B.width,B.height])}},raster:function(B,G,Y,C){if(B.renderPass==="translucent"&&Y.paint.get("raster-opacity")!==0&&C.length)for(var q=B.context,Q=q.gl,ne=G.getSource(),he=B.useProgram("raster"),me=B.colorModeForRenderPass(),Pe=ne instanceof F?[{},C]:B.stencilConfigForOverlap(C),ze=Pe[0],qe=Pe[1],Ze=qe[qe.length-1].overscaledZ,rt=!B.options.moving,pt=0,vt=qe;pt<vt.length;pt+=1){var kt=vt[pt],Ot=B.depthModeForSublayer(kt.overscaledZ-Ze,Y.paint.get("raster-opacity")===1?Ft.ReadWrite:Ft.ReadOnly,Q.LESS),Et=G.getTile(kt),jt=B.transform.calculatePosMatrix(kt.toUnwrapped(),rt);Et.registerFadeDuration(Y.paint.get("raster-fade-duration"));var It=G.findLoadedParent(kt,0),Jt=yl(Et,It,G,Y,B.transform),Gt=void 0,Ht=void 0,mn=Y.paint.get("raster-resampling")==="nearest"?Q.NEAREST:Q.LINEAR;q.activeTexture.set(Q.TEXTURE0),Et.texture.bind(mn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),q.activeTexture.set(Q.TEXTURE1),It?(It.texture.bind(mn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),Gt=Math.pow(2,It.tileID.overscaledZ-Et.tileID.overscaledZ),Ht=[Et.tileID.canonical.x*Gt%1,Et.tileID.canonical.y*Gt%1]):Et.texture.bind(mn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);var yn=lu(jt,Ht||[0,0],Gt||1,Jt,Y);ne instanceof F?he.draw(q,Q.TRIANGLES,Ot,Xe.disabled,me,He.disabled,yn,Y.id,ne.boundsBuffer,B.quadTriangleIndexBuffer,ne.boundsSegments):he.draw(q,Q.TRIANGLES,Ot,ze[kt.overscaledZ],me,He.disabled,yn,Y.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,G,Y){var C=Y.paint.get("background-color"),q=Y.paint.get("background-opacity");if(q!==0){var Q=B.context,ne=Q.gl,he=B.transform,me=he.tileSize,Pe=Y.paint.get("background-pattern");if(!B.isPatternMissing(Pe)){var ze=!Pe&&C.a===1&&q===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass===ze){var qe=Xe.disabled,Ze=B.depthModeForSublayer(0,ze==="opaque"?Ft.ReadWrite:Ft.ReadOnly),rt=B.colorModeForRenderPass(),pt=B.useProgram(Pe?"backgroundPattern":"background"),vt=he.coveringTiles({tileSize:me});Pe&&(Q.activeTexture.set(ne.TEXTURE0),B.imageManager.bind(B.context));for(var kt=Y.getCrossfadeParameters(),Ot=0,Et=vt;Ot<Et.length;Ot+=1){var jt=Et[Ot],It=B.transform.calculatePosMatrix(jt.toUnwrapped()),Jt=Pe?Wu(It,q,B,Pe,{tileID:jt,tileSize:me},kt):Zs(It,q,C);pt.draw(Q,ne.TRIANGLES,Ze,qe,rt,He.disabled,Jt,Y.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}}}}},debug:function(B,G,Y){for(var C=0;C<Y.length;C++)xl(B,G,Y[C])},custom:function(B,G,Y){var C=B.context,q=Y.implementation;if(B.renderPass==="offscreen"){var Q=q.prerender;Q&&(B.setCustomLayerDefaults(),C.setColorMode(B.colorModeForRenderPass()),Q.call(q,C.gl,B.transform.customLayerMatrix()),C.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),C.setColorMode(B.colorModeForRenderPass()),C.setStencilMode(Xe.disabled);var ne=q.renderingMode==="3d"?new Ft(B.context.gl.LEQUAL,Ft.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Ft.ReadOnly);C.setDepthMode(ne),q.render(C.gl,B.transform.customLayerMatrix()),C.setDirty(),B.setBaseState(),C.bindFramebuffer.set(null)}}},vi=function(B,G){this.context=new Je(B),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=lt.maxUnderzooming+lt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Zn,this.gpuTimers={}};vi.prototype.resize=function(B,G){if(this.width=B*i.browser.devicePixelRatio,this.height=G*i.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var Y=0,C=this.style._order;Y<C.length;Y+=1){var q=C[Y];this.style._layers[q].resize()}},vi.prototype.setup=function(){var B=this.context,G=new i.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(i.EXTENT,0),G.emplaceBack(0,i.EXTENT),G.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=B.createVertexBuffer(G,fr.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);var Y=new i.StructArrayLayout2i4;Y.emplaceBack(0,0),Y.emplaceBack(i.EXTENT,0),Y.emplaceBack(0,i.EXTENT),Y.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=B.createVertexBuffer(Y,fr.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);var C=new i.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(i.EXTENT,0,i.EXTENT,0),C.emplaceBack(0,i.EXTENT,0,i.EXTENT),C.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=B.createVertexBuffer(C,Z.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);var q=new i.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(1,0),q.emplaceBack(0,1),q.emplaceBack(1,1),this.viewportBuffer=B.createVertexBuffer(q,fr.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);var Q=new i.StructArrayLayout1ui2;Q.emplaceBack(0),Q.emplaceBack(1),Q.emplaceBack(3),Q.emplaceBack(2),Q.emplaceBack(0),this.tileBorderIndexBuffer=B.createIndexBuffer(Q);var ne=new i.StructArrayLayout3ui6;ne.emplaceBack(0,1,2),ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=B.createIndexBuffer(ne),this.emptyTexture=new i.Texture(B,{width:1,height:1,data:new Uint8Array([0,0,0,0])},B.gl.RGBA);var he=this.context.gl;this.stencilClearMode=new Xe({func:he.ALWAYS,mask:0},0,255,he.ZERO,he.ZERO,he.ZERO)},vi.prototype.clearStencil=function(){var B=this.context,G=B.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var Y=i.create();i.ortho(Y,0,this.width,this.height,0,0,1),i.scale(Y,Y,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(B,G.TRIANGLES,Ft.disabled,this.stencilClearMode,Ke.disabled,He.disabled,Cs(Y),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vi.prototype._renderTileClippingMasks=function(B,G){if(this.currentStencilSource!==B.source&&B.isTileClipped()&&G&&G.length){this.currentStencilSource=B.source;var Y=this.context,C=Y.gl;this.nextStencilID+G.length>256&&this.clearStencil(),Y.setColorMode(Ke.disabled),Y.setDepthMode(Ft.disabled);var q=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Q=0,ne=G;Q<ne.length;Q+=1){var he=ne[Q],me=this._tileClippingMaskIDs[he.key]=this.nextStencilID++;q.draw(Y,C.TRIANGLES,Ft.disabled,new Xe({func:C.ALWAYS,mask:0},me,255,C.KEEP,C.KEEP,C.REPLACE),Ke.disabled,He.disabled,Cs(he.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var B=this.nextStencilID++,G=this.context.gl;return new Xe({func:G.NOTEQUAL,mask:255},B,255,G.KEEP,G.KEEP,G.REPLACE)},vi.prototype.stencilModeForClipping=function(B){var G=this.context.gl;return new Xe({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[B.key],0,G.KEEP,G.KEEP,G.REPLACE)},vi.prototype.stencilConfigForOverlap=function(B){var G,Y=this.context.gl,C=B.sort(function(me,Pe){return Pe.overscaledZ-me.overscaledZ}),q=C[C.length-1].overscaledZ,Q=C[0].overscaledZ-q+1;if(Q>1){this.currentStencilSource=void 0,this.nextStencilID+Q>256&&this.clearStencil();for(var ne={},he=0;he<Q;he++)ne[he+q]=new Xe({func:Y.GEQUAL,mask:255},he+this.nextStencilID,255,Y.KEEP,Y.KEEP,Y.REPLACE);return this.nextStencilID+=Q,[ne,C]}return[(G={},G[q]=Xe.disabled,G),C]},vi.prototype.colorModeForRenderPass=function(){var B=this.context.gl;if(this._showOverdrawInspector){var G=.125;return new Ke([B.CONSTANT_COLOR,B.ONE],new i.Color(G,G,G,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Ke.unblended:Ke.alphaBlended},vi.prototype.depthModeForSublayer=function(B,G,Y){if(!this.opaquePassEnabledForLayer())return Ft.disabled;var C=1-((1+this.currentLayer)*this.numSublayers+B)*this.depthEpsilon;return new Ft(Y||this.context.gl.LEQUAL,G,[C,C])},vi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vi.prototype.render=function(B,G){var Y=this;this.style=B,this.options=G,this.lineAtlas=B.lineAtlas,this.imageManager=B.imageManager,this.glyphManager=B.glyphManager,this.symbolFadeChange=B.placement.symbolFadeChange(i.browser.now()),this.imageManager.beginFrame();var C=this.style._order,q=this.style.sourceCaches;for(var Q in q){var ne=q[Q];ne.used&&ne.prepare(this.context)}var he,me,Pe={},ze={},qe={};for(var Ze in q){var rt=q[Ze];Pe[Ze]=rt.getVisibleCoordinates(),ze[Ze]=Pe[Ze].slice().reverse(),qe[Ze]=rt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var pt=0;pt<C.length;pt++){var vt=C[pt];if(this.style._layers[vt].is3D()){this.opaquePassCutoff=pt;break}}this.renderPass="offscreen";for(var kt=0,Ot=C;kt<Ot.length;kt+=1){var Et=Ot[kt],jt=this.style._layers[Et];if(jt.hasOffscreenPass()&&!jt.isHidden(this.transform.zoom)){var It=ze[jt.source];(jt.type==="custom"||It.length)&&this.renderLayer(this,q[jt.source],jt,It)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(B._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=C.length-1;this.currentLayer>=0;this.currentLayer--){var Jt=this.style._layers[C[this.currentLayer]],Gt=q[Jt.source],Ht=Pe[Jt.source];this._renderTileClippingMasks(Jt,Ht),this.renderLayer(this,Gt,Jt,Ht)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<C.length;this.currentLayer++){var mn=this.style._layers[C[this.currentLayer]],yn=q[mn.source],In=(mn.type==="symbol"?qe:ze)[mn.source];this._renderTileClippingMasks(mn,Pe[mn.source]),this.renderLayer(this,yn,mn,In)}this.options.showTileBoundaries&&(i.values(this.style._layers).forEach(function(Rn){Rn.source&&!Rn.isHidden(Y.transform.zoom)&&(Rn.source!==(me&&me.id)&&(me=Y.style.sourceCaches[Rn.source]),(!he||he.getSource().maxzoom<me.getSource().maxzoom)&&(he=me))}),he&&Zl.debug(this,he,he.getVisibleCoordinates())),this.options.showPadding&&Rs(this),this.context.setDefault()},vi.prototype.renderLayer=function(B,G,Y,C){Y.isHidden(this.transform.zoom)||(Y.type==="background"||Y.type==="custom"||C.length)&&(this.id=Y.id,this.gpuTimingStart(Y),Zl[Y.type](B,G,Y,C,this.style.placement.variableOffsets),this.gpuTimingEnd())},vi.prototype.gpuTimingStart=function(B){if(this.options.gpuTiming){var G=this.context.extTimerQuery,Y=this.gpuTimers[B.id];Y||(Y=this.gpuTimers[B.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),Y.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,Y.query)}},vi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var B=this.context.extTimerQuery;B.endQueryEXT(B.TIME_ELAPSED_EXT)}},vi.prototype.collectGpuTimers=function(){var B=this.gpuTimers;return this.gpuTimers={},B},vi.prototype.queryGpuTimers=function(B){var G={};for(var Y in B){var C=B[Y],q=this.context.extTimerQuery,Q=q.getQueryObjectEXT(C.query,q.QUERY_RESULT_EXT)/1e6;q.deleteQueryEXT(C.query),G[Y]=Q}return G},vi.prototype.translatePosMatrix=function(B,G,Y,C,q){if(!Y[0]&&!Y[1])return B;var Q=q?C==="map"?this.transform.angle:0:C==="viewport"?-this.transform.angle:0;if(Q){var ne=Math.sin(Q),he=Math.cos(Q);Y=[Y[0]*he-Y[1]*ne,Y[0]*ne+Y[1]*he]}var me=[q?Y[0]:Jn(G,Y[0],this.transform.zoom),q?Y[1]:Jn(G,Y[1],this.transform.zoom),0],Pe=new Float32Array(16);return i.translate(Pe,B,me),Pe},vi.prototype.saveTileTexture=function(B){var G=this._tileTextures[B.size[0]];G?G.push(B):this._tileTextures[B.size[0]]=[B]},vi.prototype.getTileTexture=function(B){var G=this._tileTextures[B];return G&&G.length>0?G.pop():null},vi.prototype.isPatternMissing=function(B){if(!B)return!1;if(!B.from||!B.to)return!0;var G=this.imageManager.getPattern(B.from.toString()),Y=this.imageManager.getPattern(B.to.toString());return!G||!Y},vi.prototype.useProgram=function(B,G){this.cache=this.cache||{};var Y=""+B+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[Y]||(this.cache[Y]=new _o(this.context,B,ca[B],G,ql[B],this._showOverdrawInspector)),this.cache[Y]},vi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vi.prototype.setBaseState=function(){var B=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(B.FUNC_ADD)},vi.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var B=this.context.gl;this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,B.RGBA)}},vi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var hs=function(B,G){this.points=B,this.planes=G};hs.fromInvProjectionMatrix=function(B,G,Y){var C=Math.pow(2,Y),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ne){return i.transformMat4([],ne,B)}).map(function(ne){return i.scale$1([],ne,1/ne[3]/G*C)}),Q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ne){var he=i.sub([],q[ne[0]],q[ne[1]]),me=i.sub([],q[ne[2]],q[ne[1]]),Pe=i.normalize([],i.cross([],he,me)),ze=-i.dot(Pe,q[ne[1]]);return Pe.concat(ze)});return new hs(q,Q)};var ka=function(B,G){this.min=B,this.max=G,this.center=i.scale$2([],i.add([],this.min,this.max),.5)};ka.prototype.quadrant=function(B){for(var G=[B%2==0,B<2],Y=i.clone$2(this.min),C=i.clone$2(this.max),q=0;q<G.length;q++)Y[q]=G[q]?this.min[q]:this.center[q],C[q]=G[q]?this.center[q]:this.max[q];return C[2]=this.max[2],new ka(Y,C)},ka.prototype.distanceX=function(B){return Math.max(Math.min(this.max[0],B[0]),this.min[0])-B[0]},ka.prototype.distanceY=function(B){return Math.max(Math.min(this.max[1],B[1]),this.min[1])-B[1]},ka.prototype.intersects=function(B){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],Y=!0,C=0;C<B.planes.length;C++){for(var q=B.planes[C],Q=0,ne=0;ne<G.length;ne++)Q+=i.dot$1(q,G[ne])>=0;if(Q===0)return 0;Q!==G.length&&(Y=!1)}if(Y)return 2;for(var he=0;he<3;he++){for(var me=Number.MAX_VALUE,Pe=-Number.MAX_VALUE,ze=0;ze<B.points.length;ze++){var qe=B.points[ze][he]-this.min[he];me=Math.min(me,qe),Pe=Math.max(Pe,qe)}if(Pe<0||me>this.max[he]-this.min[he])return 0}return 1};var ko=function(B,G,Y,C){if(B===void 0&&(B=0),G===void 0&&(G=0),Y===void 0&&(Y=0),C===void 0&&(C=0),isNaN(B)||B<0||isNaN(G)||G<0||isNaN(Y)||Y<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=B,this.bottom=G,this.left=Y,this.right=C};ko.prototype.interpolate=function(B,G,Y){return G.top!=null&&B.top!=null&&(this.top=i.number(B.top,G.top,Y)),G.bottom!=null&&B.bottom!=null&&(this.bottom=i.number(B.bottom,G.bottom,Y)),G.left!=null&&B.left!=null&&(this.left=i.number(B.left,G.left,Y)),G.right!=null&&B.right!=null&&(this.right=i.number(B.right,G.right,Y)),this},ko.prototype.getCenter=function(B,G){var Y=i.clamp((this.left+B-this.right)/2,0,B),C=i.clamp((this.top+G-this.bottom)/2,0,G);return new i.Point(Y,C)},ko.prototype.equals=function(B){return this.top===B.top&&this.bottom===B.bottom&&this.left===B.left&&this.right===B.right},ko.prototype.clone=function(){return new ko(this.top,this.bottom,this.left,this.right)},ko.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ui=function(B,G,Y,C,q){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=q===void 0||q,this._minZoom=B||0,this._maxZoom=G||22,this._minPitch=Y??0,this._maxPitch=C??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ko,this._posMatrixCache={},this._alignedPosMatrixCache={}},gi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ui.prototype.clone=function(){var B=new ui(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return B.tileSize=this.tileSize,B.latRange=this.latRange,B.width=this.width,B.height=this.height,B._center=this._center,B.zoom=this.zoom,B.angle=this.angle,B._fov=this._fov,B._pitch=this._pitch,B._unmodified=this._unmodified,B._edgeInsets=this._edgeInsets.clone(),B._calcMatrices(),B},gi.minZoom.get=function(){return this._minZoom},gi.minZoom.set=function(B){this._minZoom!==B&&(this._minZoom=B,this.zoom=Math.max(this.zoom,B))},gi.maxZoom.get=function(){return this._maxZoom},gi.maxZoom.set=function(B){this._maxZoom!==B&&(this._maxZoom=B,this.zoom=Math.min(this.zoom,B))},gi.minPitch.get=function(){return this._minPitch},gi.minPitch.set=function(B){this._minPitch!==B&&(this._minPitch=B,this.pitch=Math.max(this.pitch,B))},gi.maxPitch.get=function(){return this._maxPitch},gi.maxPitch.set=function(B){this._maxPitch!==B&&(this._maxPitch=B,this.pitch=Math.min(this.pitch,B))},gi.renderWorldCopies.get=function(){return this._renderWorldCopies},gi.renderWorldCopies.set=function(B){B===void 0?B=!0:B===null&&(B=!1),this._renderWorldCopies=B},gi.worldSize.get=function(){return this.tileSize*this.scale},gi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},gi.size.get=function(){return new i.Point(this.width,this.height)},gi.bearing.get=function(){return-this.angle/Math.PI*180},gi.bearing.set=function(B){var G=-i.wrap(B,-180,180)*Math.PI/180;this.angle!==G&&(this._unmodified=!1,this.angle=G,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},gi.pitch.get=function(){return this._pitch/Math.PI*180},gi.pitch.set=function(B){var G=i.clamp(B,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==G&&(this._unmodified=!1,this._pitch=G,this._calcMatrices())},gi.fov.get=function(){return this._fov/Math.PI*180},gi.fov.set=function(B){B=Math.max(.01,Math.min(60,B)),this._fov!==B&&(this._unmodified=!1,this._fov=B/180*Math.PI,this._calcMatrices())},gi.zoom.get=function(){return this._zoom},gi.zoom.set=function(B){var G=Math.min(Math.max(B,this.minZoom),this.maxZoom);this._zoom!==G&&(this._unmodified=!1,this._zoom=G,this.scale=this.zoomScale(G),this.tileZoom=Math.floor(G),this.zoomFraction=G-this.tileZoom,this._constrain(),this._calcMatrices())},gi.center.get=function(){return this._center},gi.center.set=function(B){B.lat===this._center.lat&&B.lng===this._center.lng||(this._unmodified=!1,this._center=B,this._constrain(),this._calcMatrices())},gi.padding.get=function(){return this._edgeInsets.toJSON()},gi.padding.set=function(B){this._edgeInsets.equals(B)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,B,1),this._calcMatrices())},gi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ui.prototype.isPaddingEqual=function(B){return this._edgeInsets.equals(B)},ui.prototype.interpolatePadding=function(B,G,Y){this._unmodified=!1,this._edgeInsets.interpolate(B,G,Y),this._constrain(),this._calcMatrices()},ui.prototype.coveringZoomLevel=function(B){var G=(B.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/B.tileSize));return Math.max(0,G)},ui.prototype.getVisibleUnwrappedCoordinates=function(B){var G=[new i.UnwrappedTileID(0,B)];if(this._renderWorldCopies)for(var Y=this.pointCoordinate(new i.Point(0,0)),C=this.pointCoordinate(new i.Point(this.width,0)),q=this.pointCoordinate(new i.Point(this.width,this.height)),Q=this.pointCoordinate(new i.Point(0,this.height)),ne=Math.floor(Math.min(Y.x,C.x,q.x,Q.x)),he=Math.floor(Math.max(Y.x,C.x,q.x,Q.x)),me=ne-1;me<=he+1;me++)me!==0&&G.push(new i.UnwrappedTileID(me,B));return G},ui.prototype.coveringTiles=function(B){var G=this.coveringZoomLevel(B),Y=G;if(B.minzoom!==void 0&&G<B.minzoom)return[];B.maxzoom!==void 0&&G>B.maxzoom&&(G=B.maxzoom);var C=i.MercatorCoordinate.fromLngLat(this.center),q=Math.pow(2,G),Q=[q*C.x,q*C.y,0],ne=hs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),he=B.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(he=G);var me=function(In){return{aabb:new ka([In*q,0,0],[(In+1)*q,q,0]),zoom:0,x:0,y:0,wrap:In,fullyVisible:!1}},Pe=[],ze=[],qe=G,Ze=B.reparseOverscaled?Y:G;if(this._renderWorldCopies)for(var rt=1;rt<=3;rt++)Pe.push(me(-rt)),Pe.push(me(rt));for(Pe.push(me(0));Pe.length>0;){var pt=Pe.pop(),vt=pt.x,kt=pt.y,Ot=pt.fullyVisible;if(!Ot){var Et=pt.aabb.intersects(ne);if(Et===0)continue;Ot=Et===2}var jt=pt.aabb.distanceX(Q),It=pt.aabb.distanceY(Q),Jt=Math.max(Math.abs(jt),Math.abs(It)),Gt=3+(1<<qe-pt.zoom)-2;if(pt.zoom===qe||Jt>Gt&&pt.zoom>=he)ze.push({tileID:new i.OverscaledTileID(pt.zoom===qe?Ze:pt.zoom,pt.wrap,pt.zoom,vt,kt),distanceSq:i.sqrLen([Q[0]-.5-vt,Q[1]-.5-kt])});else for(var Ht=0;Ht<4;Ht++){var mn=(vt<<1)+Ht%2,yn=(kt<<1)+(Ht>>1);Pe.push({aabb:pt.aabb.quadrant(Ht),zoom:pt.zoom+1,x:mn,y:yn,wrap:pt.wrap,fullyVisible:Ot})}}return ze.sort(function(In,Rn){return In.distanceSq-Rn.distanceSq}).map(function(In){return In.tileID})},ui.prototype.resize=function(B,G){this.width=B,this.height=G,this.pixelsToGLUnits=[2/B,-2/G],this._constrain(),this._calcMatrices()},gi.unmodified.get=function(){return this._unmodified},ui.prototype.zoomScale=function(B){return Math.pow(2,B)},ui.prototype.scaleZoom=function(B){return Math.log(B)/Math.LN2},ui.prototype.project=function(B){var G=i.clamp(B.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i.Point(i.mercatorXfromLng(B.lng)*this.worldSize,i.mercatorYfromLat(G)*this.worldSize)},ui.prototype.unproject=function(B){return new i.MercatorCoordinate(B.x/this.worldSize,B.y/this.worldSize).toLngLat()},gi.point.get=function(){return this.project(this.center)},ui.prototype.setLocationAtPoint=function(B,G){var Y=this.pointCoordinate(G),C=this.pointCoordinate(this.centerPoint),q=this.locationCoordinate(B),Q=new i.MercatorCoordinate(q.x-(Y.x-C.x),q.y-(Y.y-C.y));this.center=this.coordinateLocation(Q),this._renderWorldCopies&&(this.center=this.center.wrap())},ui.prototype.locationPoint=function(B){return this.coordinatePoint(this.locationCoordinate(B))},ui.prototype.pointLocation=function(B){return this.coordinateLocation(this.pointCoordinate(B))},ui.prototype.locationCoordinate=function(B){return i.MercatorCoordinate.fromLngLat(B)},ui.prototype.coordinateLocation=function(B){return B.toLngLat()},ui.prototype.pointCoordinate=function(B){var G=[B.x,B.y,0,1],Y=[B.x,B.y,1,1];i.transformMat4(G,G,this.pixelMatrixInverse),i.transformMat4(Y,Y,this.pixelMatrixInverse);var C=G[3],q=Y[3],Q=G[0]/C,ne=Y[0]/q,he=G[1]/C,me=Y[1]/q,Pe=G[2]/C,ze=Y[2]/q,qe=Pe===ze?0:(0-Pe)/(ze-Pe);return new i.MercatorCoordinate(i.number(Q,ne,qe)/this.worldSize,i.number(he,me,qe)/this.worldSize)},ui.prototype.coordinatePoint=function(B){var G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return i.transformMat4(G,G,this.pixelMatrix),new i.Point(G[0]/G[3],G[1]/G[3])},ui.prototype.getBounds=function(){return new i.LngLatBounds().extend(this.pointLocation(new i.Point(0,0))).extend(this.pointLocation(new i.Point(this.width,0))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))},ui.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new i.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ui.prototype.setMaxBounds=function(B){B?(this.lngRange=[B.getWest(),B.getEast()],this.latRange=[B.getSouth(),B.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ui.prototype.calculatePosMatrix=function(B,G){G===void 0&&(G=!1);var Y=B.key,C=G?this._alignedPosMatrixCache:this._posMatrixCache;if(C[Y])return C[Y];var q=B.canonical,Q=this.worldSize/this.zoomScale(q.z),ne=q.x+Math.pow(2,q.z)*B.wrap,he=i.identity(new Float64Array(16));return i.translate(he,he,[ne*Q,q.y*Q,0]),i.scale(he,he,[Q/i.EXTENT,Q/i.EXTENT,1]),i.multiply(he,G?this.alignedProjMatrix:this.projMatrix,he),C[Y]=new Float32Array(he),C[Y]},ui.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ui.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var B,G,Y,C,q=-90,Q=90,ne=-180,he=180,me=this.size,Pe=this._unmodified;if(this.latRange){var ze=this.latRange;q=i.mercatorYfromLat(ze[1])*this.worldSize,B=(Q=i.mercatorYfromLat(ze[0])*this.worldSize)-q<me.y?me.y/(Q-q):0}if(this.lngRange){var qe=this.lngRange;ne=i.mercatorXfromLng(qe[0])*this.worldSize,G=(he=i.mercatorXfromLng(qe[1])*this.worldSize)-ne<me.x?me.x/(he-ne):0}var Ze=this.point,rt=Math.max(G||0,B||0);if(rt)return this.center=this.unproject(new i.Point(G?(he+ne)/2:Ze.x,B?(Q+q)/2:Ze.y)),this.zoom+=this.scaleZoom(rt),this._unmodified=Pe,void(this._constraining=!1);if(this.latRange){var pt=Ze.y,vt=me.y/2;pt-vt<q&&(C=q+vt),pt+vt>Q&&(C=Q-vt)}if(this.lngRange){var kt=Ze.x,Ot=me.x/2;kt-Ot<ne&&(Y=ne+Ot),kt+Ot>he&&(Y=he-Ot)}Y===void 0&&C===void 0||(this.center=this.unproject(new i.Point(Y!==void 0?Y:Ze.x,C!==void 0?C:Ze.y))),this._unmodified=Pe,this._constraining=!1}},ui.prototype._calcMatrices=function(){if(this.height){var B=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(B)*this.height;var Y=Math.PI/2+this._pitch,C=this._fov*(.5+G.y/this.height),q=Math.sin(C)*this.cameraToCenterDistance/Math.sin(i.clamp(Math.PI-Y-C,.01,Math.PI-.01)),Q=this.point,ne=Q.x,he=Q.y,me=1.01*(Math.cos(Math.PI/2-this._pitch)*q+this.cameraToCenterDistance),Pe=this.height/50,ze=new Float64Array(16);i.perspective(ze,this._fov,this.width/this.height,Pe,me),ze[8]=2*-G.x/this.width,ze[9]=2*G.y/this.height,i.scale(ze,ze,[1,-1,1]),i.translate(ze,ze,[0,0,-this.cameraToCenterDistance]),i.rotateX(ze,ze,this._pitch),i.rotateZ(ze,ze,this.angle),i.translate(ze,ze,[-ne,-he,0]),this.mercatorMatrix=i.scale([],ze,[this.worldSize,this.worldSize,this.worldSize]),i.scale(ze,ze,[1,1,i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ze,this.invProjMatrix=i.invert([],this.projMatrix);var qe=this.width%2/2,Ze=this.height%2/2,rt=Math.cos(this.angle),pt=Math.sin(this.angle),vt=ne-Math.round(ne)+rt*qe+pt*Ze,kt=he-Math.round(he)+rt*Ze+pt*qe,Ot=new Float64Array(ze);if(i.translate(Ot,Ot,[vt>.5?vt-1:vt,kt>.5?kt-1:kt,0]),this.alignedProjMatrix=Ot,ze=i.create(),i.scale(ze,ze,[this.width/2,-this.height/2,1]),i.translate(ze,ze,[1,-1,0]),this.labelPlaneMatrix=ze,ze=i.create(),i.scale(ze,ze,[1,-1,1]),i.translate(ze,ze,[-1,-1,0]),i.scale(ze,ze,[2/this.width,2/this.height,1]),this.glCoordMatrix=ze,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ze=i.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ze,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ui.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var B=this.pointCoordinate(new i.Point(0,0)),G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return i.transformMat4(G,G,this.pixelMatrix)[3]/this.cameraToCenterDistance},ui.prototype.getCameraPoint=function(){var B=this._pitch,G=Math.tan(B)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,G))},ui.prototype.getCameraQueryGeometry=function(B){var G=this.getCameraPoint();if(B.length===1)return[B[0],G];for(var Y=G.x,C=G.y,q=G.x,Q=G.y,ne=0,he=B;ne<he.length;ne+=1){var me=he[ne];Y=Math.min(Y,me.x),C=Math.min(C,me.y),q=Math.max(q,me.x),Q=Math.max(Q,me.y)}return[new i.Point(Y,C),new i.Point(q,C),new i.Point(q,Q),new i.Point(Y,Q),new i.Point(Y,C)]},Object.defineProperties(ui.prototype,gi);var io=function(B){var G,Y,C,q,Q;this._hashName=B&&encodeURIComponent(B),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(G=this._updateHashUnthrottled.bind(this),Y=300,C=!1,q=null,Q=function(){q=null,C&&(G(),q=setTimeout(Q,Y),C=!1)},function(){return C=!0,q||Q(),q})};io.prototype.addTo=function(B){return this._map=B,i.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},io.prototype.remove=function(){return i.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},io.prototype.getHashString=function(B){var G=this._map.getCenter(),Y=Math.round(100*this._map.getZoom())/100,C=Math.ceil((Y*Math.LN2+Math.log(512/360/.5))/Math.LN10),q=Math.pow(10,C),Q=Math.round(G.lng*q)/q,ne=Math.round(G.lat*q)/q,he=this._map.getBearing(),me=this._map.getPitch(),Pe="";if(Pe+=B?"/"+Q+"/"+ne+"/"+Y:Y+"/"+ne+"/"+Q,(he||me)&&(Pe+="/"+Math.round(10*he)/10),me&&(Pe+="/"+Math.round(me)),this._hashName){var ze=this._hashName,qe=!1,Ze=i.window.location.hash.slice(1).split("&").map(function(rt){var pt=rt.split("=")[0];return pt===ze?(qe=!0,pt+"="+Pe):rt}).filter(function(rt){return rt});return qe||Ze.push(ze+"="+Pe),"#"+Ze.join("&")}return"#"+Pe},io.prototype._getCurrentHash=function(){var B,G=this,Y=i.window.location.hash.replace("#","");return this._hashName?(Y.split("&").map(function(C){return C.split("=")}).forEach(function(C){C[0]===G._hashName&&(B=C)}),(B&&B[1]||"").split("/")):Y.split("/")},io.prototype._onHashChange=function(){var B=this._getCurrentHash();if(B.length>=3&&!B.some(function(Y){return isNaN(Y)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(B[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+B[2],+B[1]],zoom:+B[0],bearing:G,pitch:+(B[4]||0)}),!0}return!1},io.prototype._updateHashUnthrottled=function(){var B=i.window.location.href.replace(/(#.+)?$/,this.getHashString());try{i.window.history.replaceState(i.window.history.state,null,B)}catch{}};var $s={linearity:.3,easing:i.bezier(0,0,.3,1)},bl=i.extend({deceleration:2500,maxSpeed:1400},$s),Xl=i.extend({deceleration:20,maxSpeed:1400},$s),_l=i.extend({deceleration:1e3,maxSpeed:360},$s),wl=i.extend({deceleration:1e3,maxSpeed:90},$s),co=function(B){this._map=B,this.clear()};function ps(B,G){(!B.duration||B.duration<G.duration)&&(B.duration=G.duration,B.easing=G.easing)}function ds(B,G,Y){var C=Y.maxSpeed,q=Y.linearity,Q=Y.deceleration,ne=i.clamp(B*q/(G/1e3),-C,C),he=Math.abs(ne)/(Q*q);return{easing:Y.easing,duration:1e3*he,amount:ne*(he/2)}}co.prototype.clear=function(){this._inertiaBuffer=[]},co.prototype.record=function(B){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.browser.now(),settings:B})},co.prototype._drainInertiaBuffer=function(){for(var B=this._inertiaBuffer,G=i.browser.now();B.length>0&&G-B[0].time>160;)B.shift()},co.prototype._onMoveEnd=function(B){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0},Y=0,C=this._inertiaBuffer;Y<C.length;Y+=1){var q=C[Y].settings;G.zoom+=q.zoomDelta||0,G.bearing+=q.bearingDelta||0,G.pitch+=q.pitchDelta||0,q.panDelta&&G.pan._add(q.panDelta),q.around&&(G.around=q.around),q.pinchAround&&(G.pinchAround=q.pinchAround)}var Q=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ne={};if(G.pan.mag()){var he=ds(G.pan.mag(),Q,i.extend({},bl,B||{}));ne.offset=G.pan.mult(he.amount/G.pan.mag()),ne.center=this._map.transform.center,ps(ne,he)}if(G.zoom){var me=ds(G.zoom,Q,Xl);ne.zoom=this._map.transform.zoom+me.amount,ps(ne,me)}if(G.bearing){var Pe=ds(G.bearing,Q,_l);ne.bearing=this._map.transform.bearing+i.clamp(Pe.amount,-179,179),ps(ne,Pe)}if(G.pitch){var ze=ds(G.pitch,Q,wl);ne.pitch=this._map.transform.pitch+ze.amount,ps(ne,ze)}if(ne.zoom||ne.bearing){var qe=G.pinchAround===void 0?G.around:G.pinchAround;ne.around=qe?this._map.unproject(qe):this._map.getCenter()}return this.clear(),i.extend(ne,{noMoveStart:!0})}};var Ca=function(B){function G(C,q,Q,ne){ne===void 0&&(ne={});var he=v.mousePos(q.getCanvasContainer(),Q),me=q.unproject(he);B.call(this,C,i.extend({point:he,lngLat:me,originalEvent:Q},ne)),this._defaultPrevented=!1,this.target=q}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var Y={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},Y.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,Y),G}(i.Event),Tl=function(B){function G(C,q,Q){var ne=C==="touchend"?Q.changedTouches:Q.touches,he=v.touchPos(q.getCanvasContainer(),ne),me=he.map(function(qe){return q.unproject(qe)}),Pe=he.reduce(function(qe,Ze,rt,pt){return qe.add(Ze.div(pt.length))},new i.Point(0,0)),ze=q.unproject(Pe);B.call(this,C,{points:he,point:Pe,lngLats:me,lngLat:ze,originalEvent:Q}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var Y={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},Y.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,Y),G}(i.Event),fo=function(B){function G(C,q,Q){B.call(this,C,{originalEvent:Q}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var Y={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},Y.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,Y),G}(i.Event),fa=function(B,G){this._map=B,this._clickTolerance=G.clickTolerance};fa.prototype.reset=function(){delete this._mousedownPos},fa.prototype.wheel=function(B){return this._firePreventable(new fo(B.type,this._map,B))},fa.prototype.mousedown=function(B,G){return this._mousedownPos=G,this._firePreventable(new Ca(B.type,this._map,B))},fa.prototype.mouseup=function(B){this._map.fire(new Ca(B.type,this._map,B))},fa.prototype.click=function(B,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new Ca(B.type,this._map,B))},fa.prototype.dblclick=function(B){return this._firePreventable(new Ca(B.type,this._map,B))},fa.prototype.mouseover=function(B){this._map.fire(new Ca(B.type,this._map,B))},fa.prototype.mouseout=function(B){this._map.fire(new Ca(B.type,this._map,B))},fa.prototype.touchstart=function(B){return this._firePreventable(new Tl(B.type,this._map,B))},fa.prototype.touchmove=function(B){this._map.fire(new Tl(B.type,this._map,B))},fa.prototype.touchend=function(B){this._map.fire(new Tl(B.type,this._map,B))},fa.prototype.touchcancel=function(B){this._map.fire(new Tl(B.type,this._map,B))},fa.prototype._firePreventable=function(B){if(this._map.fire(B),B.defaultPrevented)return{}},fa.prototype.isEnabled=function(){return!0},fa.prototype.isActive=function(){return!1},fa.prototype.enable=function(){},fa.prototype.disable=function(){};var va=function(B){this._map=B};va.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},va.prototype.mousemove=function(B){this._map.fire(new Ca(B.type,this._map,B))},va.prototype.mousedown=function(){this._delayContextMenu=!0},va.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ca("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},va.prototype.contextmenu=function(B){this._delayContextMenu?this._contextMenuEvent=B:this._map.fire(new Ca(B.type,this._map,B)),this._map.listens("contextmenu")&&B.preventDefault()},va.prototype.isEnabled=function(){return!0},va.prototype.isActive=function(){return!1},va.prototype.enable=function(){},va.prototype.disable=function(){};var Mi=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._container=B.getContainer(),this._clickTolerance=G.clickTolerance||1};function ma(B,G){for(var Y={},C=0;C<B.length;C++)Y[B[C].identifier]=G[C];return Y}Mi.prototype.isEnabled=function(){return!!this._enabled},Mi.prototype.isActive=function(){return!!this._active},Mi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Mi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Mi.prototype.mousedown=function(B,G){this.isEnabled()&&B.shiftKey&&B.button===0&&(v.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},Mi.prototype.mousemoveWindow=function(B,G){if(this._active){var Y=G;if(!(this._lastPos.equals(Y)||!this._box&&Y.dist(this._startPos)<this._clickTolerance)){var C=this._startPos;this._lastPos=Y,this._box||(this._box=v.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",B));var q=Math.min(C.x,Y.x),Q=Math.max(C.x,Y.x),ne=Math.min(C.y,Y.y),he=Math.max(C.y,Y.y);v.setTransform(this._box,"translate("+q+"px,"+ne+"px)"),this._box.style.width=Q-q+"px",this._box.style.height=he-ne+"px"}}},Mi.prototype.mouseupWindow=function(B,G){var Y=this;if(this._active&&B.button===0){var C=this._startPos,q=G;if(this.reset(),v.suppressClick(),C.x!==q.x||C.y!==q.y)return this._map.fire(new i.Event("boxzoomend",{originalEvent:B})),{cameraAnimation:function(Q){return Q.fitScreenCoordinates(C,q,Y._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",B)}},Mi.prototype.keydown=function(B){this._active&&B.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",B))},Mi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(v.remove(this._box),this._box=null),v.enableDrag(),delete this._startPos,delete this._lastPos},Mi.prototype._fireEvent=function(B,G){return this._map.fire(new i.Event(B,{originalEvent:G}))};var Fo=function(B){this.reset(),this.numTouches=B.numTouches};Fo.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Fo.prototype.touchstart=function(B,G,Y){(this.centroid||Y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=B.timeStamp),Y.length===this.numTouches&&(this.centroid=function(C){for(var q=new i.Point(0,0),Q=0,ne=C;Q<ne.length;Q+=1){var he=ne[Q];q._add(he)}return q.div(C.length)}(G),this.touches=ma(Y,G)))},Fo.prototype.touchmove=function(B,G,Y){if(!this.aborted&&this.centroid){var C=ma(Y,G);for(var q in this.touches){var Q=this.touches[q],ne=C[q];(!ne||ne.dist(Q)>30)&&(this.aborted=!0)}}},Fo.prototype.touchend=function(B,G,Y){if((!this.centroid||B.timeStamp-this.startTime>500)&&(this.aborted=!0),Y.length===0){var C=!this.aborted&&this.centroid;if(this.reset(),C)return C}};var Bs=function(B){this.singleTap=new Fo(B),this.numTaps=B.numTaps,this.reset()};Bs.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Bs.prototype.touchstart=function(B,G,Y){this.singleTap.touchstart(B,G,Y)},Bs.prototype.touchmove=function(B,G,Y){this.singleTap.touchmove(B,G,Y)},Bs.prototype.touchend=function(B,G,Y){var C=this.singleTap.touchend(B,G,Y);if(C){var q=B.timeStamp-this.lastTime<500,Q=!this.lastTap||this.lastTap.dist(C)<30;if(q&&Q||this.reset(),this.count++,this.lastTime=B.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}};var Mo=function(){this._zoomIn=new Bs({numTouches:1,numTaps:2}),this._zoomOut=new Bs({numTouches:2,numTaps:1}),this.reset()};Mo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Mo.prototype.touchstart=function(B,G,Y){this._zoomIn.touchstart(B,G,Y),this._zoomOut.touchstart(B,G,Y)},Mo.prototype.touchmove=function(B,G,Y){this._zoomIn.touchmove(B,G,Y),this._zoomOut.touchmove(B,G,Y)},Mo.prototype.touchend=function(B,G,Y){var C=this,q=this._zoomIn.touchend(B,G,Y),Q=this._zoomOut.touchend(B,G,Y);return q?(this._active=!0,B.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(q)},{originalEvent:B})}}):Q?(this._active=!0,B.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject(Q)},{originalEvent:B})}}):void 0},Mo.prototype.touchcancel=function(){this.reset()},Mo.prototype.enable=function(){this._enabled=!0},Mo.prototype.disable=function(){this._enabled=!1,this.reset()},Mo.prototype.isEnabled=function(){return this._enabled},Mo.prototype.isActive=function(){return this._active};var gs={};gs[0]=1,gs[2]=2;var ja=function(B){this.reset(),this._clickTolerance=B.clickTolerance||1};ja.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ja.prototype._correctButton=function(B,G){return!1},ja.prototype._move=function(B,G){return{}},ja.prototype.mousedown=function(B,G){if(!this._lastPoint){var Y=v.mouseButton(B);this._correctButton(B,Y)&&(this._lastPoint=G,this._eventButton=Y)}},ja.prototype.mousemoveWindow=function(B,G){var Y=this._lastPoint;if(Y){if(B.preventDefault(),function(C,q){var Q=gs[q];return C.buttons===void 0||(C.buttons&Q)!==Q}(B,this._eventButton))this.reset();else if(this._moved||!(G.dist(Y)<this._clickTolerance))return this._moved=!0,this._lastPoint=G,this._move(Y,G)}},ja.prototype.mouseupWindow=function(B){this._lastPoint&&v.mouseButton(B)===this._eventButton&&(this._moved&&v.suppressClick(),this.reset())},ja.prototype.enable=function(){this._enabled=!0},ja.prototype.disable=function(){this._enabled=!1,this.reset()},ja.prototype.isEnabled=function(){return this._enabled},ja.prototype.isActive=function(){return this._active};var Ns=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.mousedown=function(Y,C){B.prototype.mousedown.call(this,Y,C),this._lastPoint&&(this._active=!0)},G.prototype._correctButton=function(Y,C){return C===0&&!Y.ctrlKey},G.prototype._move=function(Y,C){return{around:C,panDelta:C.sub(Y)}},G}(ja),Ko=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(Y,C){return C===0&&Y.ctrlKey||C===2},G.prototype._move=function(Y,C){var q=.8*(C.x-Y.x);if(q)return this._active=!0,{bearingDelta:q}},G.prototype.contextmenu=function(Y){Y.preventDefault()},G}(ja),ho=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(Y,C){return C===0&&Y.ctrlKey||C===2},G.prototype._move=function(Y,C){var q=-.5*(C.y-Y.y);if(q)return this._active=!0,{pitchDelta:q}},G.prototype.contextmenu=function(Y){Y.preventDefault()},G}(ja),po=function(B){this._minTouches=1,this._clickTolerance=B.clickTolerance||1,this.reset()};po.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)},po.prototype.touchstart=function(B,G,Y){return this._calculateTransform(B,G,Y)},po.prototype.touchmove=function(B,G,Y){if(this._active&&!(Y.length<this._minTouches))return B.preventDefault(),this._calculateTransform(B,G,Y)},po.prototype.touchend=function(B,G,Y){this._calculateTransform(B,G,Y),this._active&&Y.length<this._minTouches&&this.reset()},po.prototype.touchcancel=function(){this.reset()},po.prototype._calculateTransform=function(B,G,Y){Y.length>0&&(this._active=!0);var C=ma(Y,G),q=new i.Point(0,0),Q=new i.Point(0,0),ne=0;for(var he in C){var me=C[he],Pe=this._touches[he];Pe&&(q._add(me),Q._add(me.sub(Pe)),ne++,C[he]=me)}if(this._touches=C,!(ne<this._minTouches)&&Q.mag()){var ze=Q.div(ne);if(this._sum._add(ze),!(this._sum.mag()<this._clickTolerance))return{around:q.div(ne),panDelta:ze}}},po.prototype.enable=function(){this._enabled=!0},po.prototype.disable=function(){this._enabled=!1,this.reset()},po.prototype.isEnabled=function(){return this._enabled},po.prototype.isActive=function(){return this._active};var Si=function(){this.reset()};function Ao(B,G,Y){for(var C=0;C<B.length;C++)if(B[C].identifier===Y)return G[C]}Si.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Si.prototype._start=function(B){},Si.prototype._move=function(B,G,Y){return{}},Si.prototype.touchstart=function(B,G,Y){this._firstTwoTouches||Y.length<2||(this._firstTwoTouches=[Y[0].identifier,Y[1].identifier],this._start([G[0],G[1]]))},Si.prototype.touchmove=function(B,G,Y){if(this._firstTwoTouches){B.preventDefault();var C=this._firstTwoTouches,q=C[0],Q=C[1],ne=Ao(Y,G,q),he=Ao(Y,G,Q);if(ne&&he){var me=this._aroundCenter?null:ne.add(he).div(2);return this._move([ne,he],me,B)}}},Si.prototype.touchend=function(B,G,Y){if(this._firstTwoTouches){var C=this._firstTwoTouches,q=C[0],Q=C[1],ne=Ao(Y,G,q),he=Ao(Y,G,Q);ne&&he||(this._active&&v.suppressClick(),this.reset())}},Si.prototype.touchcancel=function(){this.reset()},Si.prototype.enable=function(B){this._enabled=!0,this._aroundCenter=!!B&&B.around==="center"},Si.prototype.disable=function(){this._enabled=!1,this.reset()},Si.prototype.isEnabled=function(){return this._enabled},Si.prototype.isActive=function(){return this._active};function Or(B,G){return Math.log(B/G)/Math.LN2}var kl=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._distance,delete this._startDistance},G.prototype._start=function(Y){this._startDistance=this._distance=Y[0].dist(Y[1])},G.prototype._move=function(Y,C){var q=this._distance;if(this._distance=Y[0].dist(Y[1]),this._active||!(Math.abs(Or(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Or(this._distance,q),pinchAround:C}},G}(Si);function uu(B,G){return 180*B.angleWith(G)/Math.PI}var vs=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},G.prototype._start=function(Y){this._startVector=this._vector=Y[0].sub(Y[1]),this._minDiameter=Y[0].dist(Y[1])},G.prototype._move=function(Y,C){var q=this._vector;if(this._vector=Y[0].sub(Y[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:uu(this._vector,q),pinchAround:C}},G.prototype._isBelowThreshold=function(Y){this._minDiameter=Math.min(this._minDiameter,Y.mag());var C=25/(Math.PI*this._minDiameter)*360,q=uu(Y,this._startVector);return Math.abs(q)<C},G}(Si);function ms(B){return Math.abs(B.y)>Math.abs(B.x)}var js=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},G.prototype._start=function(Y){this._lastPoints=Y,ms(Y[0].sub(Y[1]))&&(this._valid=!1)},G.prototype._move=function(Y,C,q){var Q=Y[0].sub(this._lastPoints[0]),ne=Y[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Q,ne,q.timeStamp),this._valid)return this._lastPoints=Y,this._active=!0,{pitchDelta:(Q.y+ne.y)/2*-.5}},G.prototype.gestureBeginsVertically=function(Y,C,q){if(this._valid!==void 0)return this._valid;var Q=Y.mag()>=2,ne=C.mag()>=2;if(Q||ne){if(!Q||!ne)return this._firstMove===void 0&&(this._firstMove=q),q-this._firstMove<100&&void 0;var he=Y.y>0==C.y>0;return ms(Y)&&ms(C)&&he}},G}(Si),el={panStep:100,bearingStep:15,pitchStep:10},wr=function(){var B=el;this._panStep=B.panStep,this._bearingStep=B.bearingStep,this._pitchStep=B.pitchStep,this._rotationDisabled=!1};function Ml(B){return B*(2-B)}wr.prototype.reset=function(){this._active=!1},wr.prototype.keydown=function(B){var G=this;if(!(B.altKey||B.ctrlKey||B.metaKey)){var Y=0,C=0,q=0,Q=0,ne=0;switch(B.keyCode){case 61:case 107:case 171:case 187:Y=1;break;case 189:case 109:case 173:Y=-1;break;case 37:B.shiftKey?C=-1:(B.preventDefault(),Q=-1);break;case 39:B.shiftKey?C=1:(B.preventDefault(),Q=1);break;case 38:B.shiftKey?q=1:(B.preventDefault(),ne=-1);break;case 40:B.shiftKey?q=-1:(B.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(C=0,q=0),{cameraAnimation:function(he){var me=he.getZoom();he.easeTo({duration:300,easeId:"keyboardHandler",easing:Ml,zoom:Y?Math.round(me)+Y*(B.shiftKey?2:1):me,bearing:he.getBearing()+C*G._bearingStep,pitch:he.getPitch()+q*G._pitchStep,offset:[-Q*G._panStep,-ne*G._panStep],center:he.getCenter()},{originalEvent:B})}}}},wr.prototype.enable=function(){this._enabled=!0},wr.prototype.disable=function(){this._enabled=!1,this.reset()},wr.prototype.isEnabled=function(){return this._enabled},wr.prototype.isActive=function(){return this._active},wr.prototype.disableRotation=function(){this._rotationDisabled=!0},wr.prototype.enableRotation=function(){this._rotationDisabled=!1};var Qo=4.000244140625,ha=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,i.bindAll(["_onTimeout"],this)};ha.prototype.setZoomRate=function(B){this._defaultZoomRate=B},ha.prototype.setWheelZoomRate=function(B){this._wheelZoomRate=B},ha.prototype.isEnabled=function(){return!!this._enabled},ha.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ha.prototype.isZooming=function(){return!!this._zooming},ha.prototype.enable=function(B){this.isEnabled()||(this._enabled=!0,this._aroundCenter=B&&B.around==="center")},ha.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ha.prototype.wheel=function(B){if(this.isEnabled()){var G=B.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?40*B.deltaY:B.deltaY,Y=i.browser.now(),C=Y-(this._lastWheelEventTime||0);this._lastWheelEventTime=Y,G!==0&&G%Qo==0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,B)):this._type||(this._type=Math.abs(C*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),B.shiftKey&&G&&(G/=4),this._type&&(this._lastWheelEvent=B,this._delta-=G,this._active||this._start(B)),B.preventDefault()}},ha.prototype._onTimeout=function(B){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(B)},ha.prototype._start=function(B){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=v.mousePos(this._el,B);this._around=i.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ha.prototype.renderFrame=function(){var B=this;if(this._frameId&&(this._frameId=null,this.isActive())){var G=this._map.transform;if(this._delta!==0){var Y=this._type==="wheel"&&Math.abs(this._delta)>Qo?this._wheelZoomRate:this._defaultZoomRate,C=2/(1+Math.exp(-Math.abs(this._delta*Y)));this._delta<0&&C!==0&&(C=1/C);var q=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(q*C))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Q,ne=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,he=this._startZoom,me=this._easing,Pe=!1;if(this._type==="wheel"&&he&&me){var ze=Math.min((i.browser.now()-this._lastWheelEventTime)/200,1),qe=me(ze);Q=i.number(he,ne,qe),ze<1?this._frameId||(this._frameId=!0):Pe=!0}else Q=ne,Pe=!0;return this._active=!0,Pe&&(this._active=!1,this._finishTimeout=setTimeout(function(){B._zooming=!1,B._handler._triggerRenderFrame(),delete B._targetZoom,delete B._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Pe,zoomDelta:Q-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ha.prototype._smoothOutEasing=function(B){var G=i.ease;if(this._prevEase){var Y=this._prevEase,C=(i.browser.now()-Y.start)/Y.duration,q=Y.easing(C+.01)-Y.easing(C),Q=.27/Math.sqrt(q*q+1e-4)*.01,ne=Math.sqrt(.0729-Q*Q);G=i.bezier(Q,ne,.25,1)}return this._prevEase={start:i.browser.now(),duration:B,easing:G},G},ha.prototype.reset=function(){this._active=!1};var ys=function(B,G){this._clickZoom=B,this._tapZoom=G};ys.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ys.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ys.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ys.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var So=function(){this.reset()};So.prototype.reset=function(){this._active=!1},So.prototype.dblclick=function(B,G){return B.preventDefault(),{cameraAnimation:function(Y){Y.easeTo({duration:300,zoom:Y.getZoom()+(B.shiftKey?-1:1),around:Y.unproject(G)},{originalEvent:B})}}},So.prototype.enable=function(){this._enabled=!0},So.prototype.disable=function(){this._enabled=!1,this.reset()},So.prototype.isEnabled=function(){return this._enabled},So.prototype.isActive=function(){return this._active};var go=function(){this._tap=new Bs({numTouches:1,numTaps:1}),this.reset()};go.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},go.prototype.touchstart=function(B,G,Y){this._swipePoint||(this._tapTime&&B.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?Y.length>0&&(this._swipePoint=G[0],this._swipeTouch=Y[0].identifier):this._tap.touchstart(B,G,Y))},go.prototype.touchmove=function(B,G,Y){if(this._tapTime){if(this._swipePoint){if(Y[0].identifier!==this._swipeTouch)return;var C=G[0],q=C.y-this._swipePoint.y;return this._swipePoint=C,B.preventDefault(),this._active=!0,{zoomDelta:q/128}}}else this._tap.touchmove(B,G,Y)},go.prototype.touchend=function(B,G,Y){this._tapTime?this._swipePoint&&Y.length===0&&this.reset():this._tap.touchend(B,G,Y)&&(this._tapTime=B.timeStamp)},go.prototype.touchcancel=function(){this.reset()},go.prototype.enable=function(){this._enabled=!0},go.prototype.disable=function(){this._enabled=!1,this.reset()},go.prototype.isEnabled=function(){return this._enabled},go.prototype.isActive=function(){return this._active};var Oa=function(B,G,Y){this._el=B,this._mousePan=G,this._touchPan=Y};Oa.prototype.enable=function(B){this._inertiaOptions=B||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Oa.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Oa.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Oa.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Bo=function(B,G,Y){this._pitchWithRotate=B.pitchWithRotate,this._mouseRotate=G,this._mousePitch=Y};Bo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Bo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Bo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Bo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var vo=function(B,G,Y,C){this._el=B,this._touchZoom=G,this._touchRotate=Y,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0};vo.prototype.enable=function(B){this._touchZoom.enable(B),this._rotationDisabled||this._touchRotate.enable(B),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},vo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},vo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},vo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},vo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},vo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var $o=function(B){return B.zoom||B.drag||B.pitch||B.rotate},Al=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G}(i.Event);function xs(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}var oi=function(B,G){this._map=B,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new co(B),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),i.bindAll(["handleEvent","handleWindowEvent"],this);var Y=this._el;this._listeners=[[Y,"touchstart",{passive:!0}],[Y,"touchmove",{passive:!1}],[Y,"touchend",void 0],[Y,"touchcancel",void 0],[Y,"mousedown",void 0],[Y,"mousemove",void 0],[Y,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[Y,"mouseover",void 0],[Y,"mouseout",void 0],[Y,"dblclick",void 0],[Y,"click",void 0],[Y,"keydown",{capture:!1}],[Y,"keyup",void 0],[Y,"wheel",{passive:!1}],[Y,"contextmenu",void 0],[i.window,"blur",void 0]];for(var C=0,q=this._listeners;C<q.length;C+=1){var Q=q[C],ne=Q[0],he=Q[1],me=Q[2];v.addEventListener(ne,he,ne===i.window.document?this.handleWindowEvent:this.handleEvent,me)}};oi.prototype.destroy=function(){for(var B=0,G=this._listeners;B<G.length;B+=1){var Y=G[B],C=Y[0],q=Y[1],Q=Y[2];v.removeEventListener(C,q,C===i.window.document?this.handleWindowEvent:this.handleEvent,Q)}},oi.prototype._addDefaultHandlers=function(B){var G=this._map,Y=G.getCanvasContainer();this._add("mapEvent",new fa(G,B));var C=G.boxZoom=new Mi(G,B);this._add("boxZoom",C);var q=new Mo,Q=new So;G.doubleClickZoom=new ys(Q,q),this._add("tapZoom",q),this._add("clickZoom",Q);var ne=new go;this._add("tapDragZoom",ne);var he=G.touchPitch=new js;this._add("touchPitch",he);var me=new Ko(B),Pe=new ho(B);G.dragRotate=new Bo(B,me,Pe),this._add("mouseRotate",me,["mousePitch"]),this._add("mousePitch",Pe,["mouseRotate"]);var ze=new Ns(B),qe=new po(B);G.dragPan=new Oa(Y,ze,qe),this._add("mousePan",ze),this._add("touchPan",qe,["touchZoom","touchRotate"]);var Ze=new vs,rt=new kl;G.touchZoomRotate=new vo(Y,rt,Ze,ne),this._add("touchRotate",Ze,["touchPan","touchZoom"]),this._add("touchZoom",rt,["touchPan","touchRotate"]);var pt=G.scrollZoom=new ha(G,this);this._add("scrollZoom",pt,["mousePan"]);var vt=G.keyboard=new wr;this._add("keyboard",vt),this._add("blockableMapEvent",new va(G));for(var kt=0,Ot=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];kt<Ot.length;kt+=1){var Et=Ot[kt];B.interactive&&B[Et]&&G[Et].enable(B[Et])}},oi.prototype._add=function(B,G,Y){this._handlers.push({handlerName:B,handler:G,allowed:Y}),this._handlersById[B]=G},oi.prototype.stop=function(B){if(!this._updatingCamera){for(var G=0,Y=this._handlers;G<Y.length;G+=1)Y[G].handler.reset();this._inertia.clear(),this._fireEvents({},{},B),this._changes=[]}},oi.prototype.isActive=function(){for(var B=0,G=this._handlers;B<G.length;B+=1)if(G[B].handler.isActive())return!0;return!1},oi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},oi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},oi.prototype.isMoving=function(){return!!$o(this._eventsInProgress)||this.isZooming()},oi.prototype._blockedByActive=function(B,G,Y){for(var C in B)if(C!==Y&&(!G||G.indexOf(C)<0))return!0;return!1},oi.prototype.handleWindowEvent=function(B){this.handleEvent(B,B.type+"Window")},oi.prototype._getMapTouches=function(B){for(var G=[],Y=0,C=B;Y<C.length;Y+=1){var q=C[Y],Q=q.target;this._el.contains(Q)&&G.push(q)}return G},oi.prototype.handleEvent=function(B,G){if(B.type!=="blur"){this._updatingCamera=!0;for(var Y=B.type==="renderFrame"?void 0:B,C={needsRenderFrame:!1},q={},Q={},ne=B.touches?this._getMapTouches(B.touches):void 0,he=ne?v.touchPos(this._el,ne):v.mousePos(this._el,B),me=0,Pe=this._handlers;me<Pe.length;me+=1){var ze=Pe[me],qe=ze.handlerName,Ze=ze.handler,rt=ze.allowed;if(Ze.isEnabled()){var pt=void 0;this._blockedByActive(Q,rt,qe)?Ze.reset():Ze[G||B.type]&&(pt=Ze[G||B.type](B,he,ne),this.mergeHandlerResult(C,q,pt,qe,Y),pt&&pt.needsRenderFrame&&this._triggerRenderFrame()),(pt||Ze.isActive())&&(Q[qe]=Ze)}}var vt={};for(var kt in this._previousActiveHandlers)Q[kt]||(vt[kt]=Y);this._previousActiveHandlers=Q,(Object.keys(vt).length||xs(C))&&(this._changes.push([C,q,vt]),this._triggerRenderFrame()),(Object.keys(Q).length||xs(C))&&this._map._stop(!0),this._updatingCamera=!1;var Ot=C.cameraAnimation;Ot&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ot(this._map))}else this.stop(!0)},oi.prototype.mergeHandlerResult=function(B,G,Y,C,q){if(Y){i.extend(B,Y);var Q={handlerName:C,originalEvent:Y.originalEvent||q};Y.zoomDelta!==void 0&&(G.zoom=Q),Y.panDelta!==void 0&&(G.drag=Q),Y.pitchDelta!==void 0&&(G.pitch=Q),Y.bearingDelta!==void 0&&(G.rotate=Q)}},oi.prototype._applyChanges=function(){for(var B={},G={},Y={},C=0,q=this._changes;C<q.length;C+=1){var Q=q[C],ne=Q[0],he=Q[1],me=Q[2];ne.panDelta&&(B.panDelta=(B.panDelta||new i.Point(0,0))._add(ne.panDelta)),ne.zoomDelta&&(B.zoomDelta=(B.zoomDelta||0)+ne.zoomDelta),ne.bearingDelta&&(B.bearingDelta=(B.bearingDelta||0)+ne.bearingDelta),ne.pitchDelta&&(B.pitchDelta=(B.pitchDelta||0)+ne.pitchDelta),ne.around!==void 0&&(B.around=ne.around),ne.pinchAround!==void 0&&(B.pinchAround=ne.pinchAround),ne.noInertia&&(B.noInertia=ne.noInertia),i.extend(G,he),i.extend(Y,me)}this._updateMapTransform(B,G,Y),this._changes=[]},oi.prototype._updateMapTransform=function(B,G,Y){var C=this._map,q=C.transform;if(!xs(B))return this._fireEvents(G,Y,!0);var Q=B.panDelta,ne=B.zoomDelta,he=B.bearingDelta,me=B.pitchDelta,Pe=B.around,ze=B.pinchAround;ze!==void 0&&(Pe=ze),C._stop(!0),Pe=Pe||C.transform.centerPoint;var qe=q.pointLocation(Q?Pe.sub(Q):Pe);he&&(q.bearing+=he),me&&(q.pitch+=me),ne&&(q.zoom+=ne),q.setLocationAtPoint(qe,Pe),this._map._update(),B.noInertia||this._inertia.record(B),this._fireEvents(G,Y,!0)},oi.prototype._fireEvents=function(B,G,Y){var C=this,q=$o(this._eventsInProgress),Q=$o(B),ne={};for(var he in B){var me=B[he].originalEvent;this._eventsInProgress[he]||(ne[he+"start"]=me),this._eventsInProgress[he]=B[he]}for(var Pe in!q&&Q&&this._fireEvent("movestart",Q.originalEvent),ne)this._fireEvent(Pe,ne[Pe]);for(var ze in Q&&this._fireEvent("move",Q.originalEvent),B){var qe=B[ze].originalEvent;this._fireEvent(ze,qe)}var Ze,rt={};for(var pt in this._eventsInProgress){var vt=this._eventsInProgress[pt],kt=vt.handlerName,Ot=vt.originalEvent;this._handlersById[kt].isActive()||(delete this._eventsInProgress[pt],Ze=G[kt]||Ot,rt[pt+"end"]=Ze)}for(var Et in rt)this._fireEvent(Et,rt[Et]);var jt=$o(this._eventsInProgress);if(Y&&(q||Q)&&!jt){this._updatingCamera=!0;var It=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Jt=function(Gt){return Gt!==0&&-C._bearingSnap<Gt&&Gt<C._bearingSnap};It?(Jt(It.bearing||this._map.getBearing())&&(It.bearing=0),this._map.easeTo(It,{originalEvent:Ze})):(this._map.fire(new i.Event("moveend",{originalEvent:Ze})),Jt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},oi.prototype._fireEvent=function(B,G){this._map.fire(new i.Event(B,G?{originalEvent:G}:{}))},oi.prototype._requestFrame=function(){var B=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(G){delete B._frameId,B.handleEvent(new Al("renderFrame",{timeStamp:G})),B._applyChanges()})},oi.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var ya=function(B){function G(Y,C){B.call(this),this._moving=!1,this._zooming=!1,this.transform=Y,this._bearingSnap=C.bearingSnap,i.bindAll(["_renderFrameCallback"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getCenter=function(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)},G.prototype.setCenter=function(Y,C){return this.jumpTo({center:Y},C)},G.prototype.panBy=function(Y,C,q){return Y=i.Point.convert(Y).mult(-1),this.panTo(this.transform.center,i.extend({offset:Y},C),q)},G.prototype.panTo=function(Y,C,q){return this.easeTo(i.extend({center:Y},C),q)},G.prototype.getZoom=function(){return this.transform.zoom},G.prototype.setZoom=function(Y,C){return this.jumpTo({zoom:Y},C),this},G.prototype.zoomTo=function(Y,C,q){return this.easeTo(i.extend({zoom:Y},C),q)},G.prototype.zoomIn=function(Y,C){return this.zoomTo(this.getZoom()+1,Y,C),this},G.prototype.zoomOut=function(Y,C){return this.zoomTo(this.getZoom()-1,Y,C),this},G.prototype.getBearing=function(){return this.transform.bearing},G.prototype.setBearing=function(Y,C){return this.jumpTo({bearing:Y},C),this},G.prototype.getPadding=function(){return this.transform.padding},G.prototype.setPadding=function(Y,C){return this.jumpTo({padding:Y},C),this},G.prototype.rotateTo=function(Y,C,q){return this.easeTo(i.extend({bearing:Y},C),q)},G.prototype.resetNorth=function(Y,C){return this.rotateTo(0,i.extend({duration:1e3},Y),C),this},G.prototype.resetNorthPitch=function(Y,C){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},Y),C),this},G.prototype.snapToNorth=function(Y,C){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(Y,C):this},G.prototype.getPitch=function(){return this.transform.pitch},G.prototype.setPitch=function(Y,C){return this.jumpTo({pitch:Y},C),this},G.prototype.cameraForBounds=function(Y,C){Y=i.LngLatBounds.convert(Y);var q=C&&C.bearing||0;return this._cameraForBoxAndBearing(Y.getNorthWest(),Y.getSouthEast(),q,C)},G.prototype._cameraForBoxAndBearing=function(Y,C,q,Q){var ne={top:0,bottom:0,right:0,left:0};if(typeof(Q=i.extend({padding:ne,offset:[0,0],maxZoom:this.transform.maxZoom},Q)).padding=="number"){var he=Q.padding;Q.padding={top:he,bottom:he,right:he,left:he}}Q.padding=i.extend(ne,Q.padding);var me=this.transform,Pe=me.padding,ze=me.project(i.LngLat.convert(Y)),qe=me.project(i.LngLat.convert(C)),Ze=ze.rotate(-q*Math.PI/180),rt=qe.rotate(-q*Math.PI/180),pt=new i.Point(Math.max(Ze.x,rt.x),Math.max(Ze.y,rt.y)),vt=new i.Point(Math.min(Ze.x,rt.x),Math.min(Ze.y,rt.y)),kt=pt.sub(vt),Ot=(me.width-(Pe.left+Pe.right+Q.padding.left+Q.padding.right))/kt.x,Et=(me.height-(Pe.top+Pe.bottom+Q.padding.top+Q.padding.bottom))/kt.y;if(!(Et<0||Ot<0)){var jt=Math.min(me.scaleZoom(me.scale*Math.min(Ot,Et)),Q.maxZoom),It=typeof Q.offset.x=="number"?new i.Point(Q.offset.x,Q.offset.y):i.Point.convert(Q.offset),Jt=(Q.padding.left-Q.padding.right)/2,Gt=(Q.padding.top-Q.padding.bottom)/2,Ht=new i.Point(Jt,Gt).rotate(q*Math.PI/180),mn=It.add(Ht).mult(me.scale/me.zoomScale(jt));return{center:me.unproject(ze.add(qe).div(2).sub(mn)),zoom:jt,bearing:q}}i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},G.prototype.fitBounds=function(Y,C,q){return this._fitInternal(this.cameraForBounds(Y,C),C,q)},G.prototype.fitScreenCoordinates=function(Y,C,q,Q,ne){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(Y)),this.transform.pointLocation(i.Point.convert(C)),q,Q),Q,ne)},G.prototype._fitInternal=function(Y,C,q){return Y?(delete(C=i.extend(Y,C)).padding,C.linear?this.easeTo(C,q):this.flyTo(C,q)):this},G.prototype.jumpTo=function(Y,C){this.stop();var q=this.transform,Q=!1,ne=!1,he=!1;return"zoom"in Y&&q.zoom!==+Y.zoom&&(Q=!0,q.zoom=+Y.zoom),Y.center!==void 0&&(q.center=i.LngLat.convert(Y.center)),"bearing"in Y&&q.bearing!==+Y.bearing&&(ne=!0,q.bearing=+Y.bearing),"pitch"in Y&&q.pitch!==+Y.pitch&&(he=!0,q.pitch=+Y.pitch),Y.padding==null||q.isPaddingEqual(Y.padding)||(q.padding=Y.padding),this.fire(new i.Event("movestart",C)).fire(new i.Event("move",C)),Q&&this.fire(new i.Event("zoomstart",C)).fire(new i.Event("zoom",C)).fire(new i.Event("zoomend",C)),ne&&this.fire(new i.Event("rotatestart",C)).fire(new i.Event("rotate",C)).fire(new i.Event("rotateend",C)),he&&this.fire(new i.Event("pitchstart",C)).fire(new i.Event("pitch",C)).fire(new i.Event("pitchend",C)),this.fire(new i.Event("moveend",C))},G.prototype.easeTo=function(Y,C){var q=this;this._stop(!1,Y.easeId),((Y=i.extend({offset:[0,0],duration:500,easing:i.ease},Y)).animate===!1||!Y.essential&&i.browser.prefersReducedMotion)&&(Y.duration=0);var Q=this.transform,ne=this.getZoom(),he=this.getBearing(),me=this.getPitch(),Pe=this.getPadding(),ze="zoom"in Y?+Y.zoom:ne,qe="bearing"in Y?this._normalizeBearing(Y.bearing,he):he,Ze="pitch"in Y?+Y.pitch:me,rt="padding"in Y?Y.padding:Q.padding,pt=i.Point.convert(Y.offset),vt=Q.centerPoint.add(pt),kt=Q.pointLocation(vt),Ot=i.LngLat.convert(Y.center||kt);this._normalizeCenter(Ot);var Et,jt,It=Q.project(kt),Jt=Q.project(Ot).sub(It),Gt=Q.zoomScale(ze-ne);Y.around&&(Et=i.LngLat.convert(Y.around),jt=Q.locationPoint(Et));var Ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ze!==ne,this._rotating=this._rotating||he!==qe,this._pitching=this._pitching||Ze!==me,this._padding=!Q.isPaddingEqual(rt),this._easeId=Y.easeId,this._prepareEase(C,Y.noMoveStart,Ht),this._ease(function(mn){if(q._zooming&&(Q.zoom=i.number(ne,ze,mn)),q._rotating&&(Q.bearing=i.number(he,qe,mn)),q._pitching&&(Q.pitch=i.number(me,Ze,mn)),q._padding&&(Q.interpolatePadding(Pe,rt,mn),vt=Q.centerPoint.add(pt)),Et)Q.setLocationAtPoint(Et,jt);else{var yn=Q.zoomScale(Q.zoom-ne),In=ze>ne?Math.min(2,Gt):Math.max(.5,Gt),Rn=Math.pow(In,1-mn),Yn=Q.unproject(It.add(Jt.mult(mn*Rn)).mult(yn));Q.setLocationAtPoint(Q.renderWorldCopies?Yn.wrap():Yn,vt)}q._fireMoveEvents(C)},function(mn){q._afterEase(C,mn)},Y),this},G.prototype._prepareEase=function(Y,C,q){q===void 0&&(q={}),this._moving=!0,C||q.moving||this.fire(new i.Event("movestart",Y)),this._zooming&&!q.zooming&&this.fire(new i.Event("zoomstart",Y)),this._rotating&&!q.rotating&&this.fire(new i.Event("rotatestart",Y)),this._pitching&&!q.pitching&&this.fire(new i.Event("pitchstart",Y))},G.prototype._fireMoveEvents=function(Y){this.fire(new i.Event("move",Y)),this._zooming&&this.fire(new i.Event("zoom",Y)),this._rotating&&this.fire(new i.Event("rotate",Y)),this._pitching&&this.fire(new i.Event("pitch",Y))},G.prototype._afterEase=function(Y,C){if(!this._easeId||!C||this._easeId!==C){delete this._easeId;var q=this._zooming,Q=this._rotating,ne=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,q&&this.fire(new i.Event("zoomend",Y)),Q&&this.fire(new i.Event("rotateend",Y)),ne&&this.fire(new i.Event("pitchend",Y)),this.fire(new i.Event("moveend",Y))}},G.prototype.flyTo=function(Y,C){var q=this;if(!Y.essential&&i.browser.prefersReducedMotion){var Q=i.pick(Y,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Q,C)}this.stop(),Y=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},Y);var ne=this.transform,he=this.getZoom(),me=this.getBearing(),Pe=this.getPitch(),ze=this.getPadding(),qe="zoom"in Y?i.clamp(+Y.zoom,ne.minZoom,ne.maxZoom):he,Ze="bearing"in Y?this._normalizeBearing(Y.bearing,me):me,rt="pitch"in Y?+Y.pitch:Pe,pt="padding"in Y?Y.padding:ne.padding,vt=ne.zoomScale(qe-he),kt=i.Point.convert(Y.offset),Ot=ne.centerPoint.add(kt),Et=ne.pointLocation(Ot),jt=i.LngLat.convert(Y.center||Et);this._normalizeCenter(jt);var It=ne.project(Et),Jt=ne.project(jt).sub(It),Gt=Y.curve,Ht=Math.max(ne.width,ne.height),mn=Ht/vt,yn=Jt.mag();if("minZoom"in Y){var In=i.clamp(Math.min(Y.minZoom,he,qe),ne.minZoom,ne.maxZoom),Rn=Ht/ne.zoomScale(In-he);Gt=Math.sqrt(Rn/yn*2)}var Yn=Gt*Gt;function er(gr){var Pr=(mn*mn-Ht*Ht+(gr?-1:1)*Yn*Yn*yn*yn)/(2*(gr?mn:Ht)*Yn*yn);return Math.log(Math.sqrt(Pr*Pr+1)-Pr)}function dr(gr){return(Math.exp(gr)-Math.exp(-gr))/2}function Xn(gr){return(Math.exp(gr)+Math.exp(-gr))/2}var cr=er(0),Tr=function(gr){return Xn(cr)/Xn(cr+Gt*gr)},Rr=function(gr){return Ht*((Xn(cr)*(dr(Pr=cr+Gt*gr)/Xn(Pr))-dr(cr))/Yn)/yn;var Pr},$n=(er(1)-cr)/Gt;if(Math.abs(yn)<1e-6||!isFinite($n)){if(Math.abs(Ht-mn)<1e-6)return this.easeTo(Y,C);var ur=mn<Ht?-1:1;$n=Math.abs(Math.log(mn/Ht))/Gt,Rr=function(){return 0},Tr=function(gr){return Math.exp(ur*Gt*gr)}}if("duration"in Y)Y.duration=+Y.duration;else{var Sr="screenSpeed"in Y?+Y.screenSpeed/Gt:+Y.speed;Y.duration=1e3*$n/Sr}return Y.maxDuration&&Y.duration>Y.maxDuration&&(Y.duration=0),this._zooming=!0,this._rotating=me!==Ze,this._pitching=rt!==Pe,this._padding=!ne.isPaddingEqual(pt),this._prepareEase(C,!1),this._ease(function(gr){var Pr=gr*$n,jr=1/Tr(Pr);ne.zoom=gr===1?qe:he+ne.scaleZoom(jr),q._rotating&&(ne.bearing=i.number(me,Ze,gr)),q._pitching&&(ne.pitch=i.number(Pe,rt,gr)),q._padding&&(ne.interpolatePadding(ze,pt,gr),Ot=ne.centerPoint.add(kt));var Xr=gr===1?jt:ne.unproject(It.add(Jt.mult(Rr(Pr))).mult(jr));ne.setLocationAtPoint(ne.renderWorldCopies?Xr.wrap():Xr,Ot),q._fireMoveEvents(C)},function(){return q._afterEase(C)},Y),this},G.prototype.isEasing=function(){return!!this._easeFrameId},G.prototype.stop=function(){return this._stop()},G.prototype._stop=function(Y,C){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var q=this._onEaseEnd;delete this._onEaseEnd,q.call(this,C)}if(!Y){var Q=this.handlers;Q&&Q.stop(!1)}return this},G.prototype._ease=function(Y,C,q){q.animate===!1||q.duration===0?(Y(1),C()):(this._easeStart=i.browser.now(),this._easeOptions=q,this._onEaseFrame=Y,this._onEaseEnd=C,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},G.prototype._renderFrameCallback=function(){var Y=Math.min((i.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(Y)),Y<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},G.prototype._normalizeBearing=function(Y,C){Y=i.wrap(Y,-180,180);var q=Math.abs(Y-C);return Math.abs(Y-360-C)<q&&(Y-=360),Math.abs(Y+360-C)<q&&(Y+=360),Y},G.prototype._normalizeCenter=function(Y){var C=this.transform;if(C.renderWorldCopies&&!C.lngRange){var q=Y.lng-C.center.lng;Y.lng+=q>180?-360:q<-180?360:0}},G}(i.Evented),Ua=function(B){B===void 0&&(B={}),this.options=B,i.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ua.prototype.getDefaultPosition=function(){return"bottom-right"},Ua.prototype.onAdd=function(B){var G=this.options&&this.options.compact;return this._map=B,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=v.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=v.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ua.prototype.onRemove=function(){v.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ua.prototype._setElementTitle=function(B,G){var Y=this._map._getUIString("AttributionControl."+G);B.title=Y,B.setAttribute("aria-label",Y)},Ua.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ua.prototype._updateEditLink=function(){var B=this._editLink;B||(B=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(B){var Y=G.reduce(function(C,q,Q){return q.value&&(C+=q.key+"="+q.value+(Q<G.length-1?"&":"")),C},"?");B.href=i.config.FEEDBACK_URL+"/"+Y+(this._map._hash?this._map._hash.getHashString(!0):""),B.rel="noopener nofollow",this._setElementTitle(B,"MapFeedback")}},Ua.prototype._updateData=function(B){!B||B.sourceDataType!=="metadata"&&B.sourceDataType!=="visibility"&&B.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ua.prototype._updateAttributions=function(){if(this._map.style){var B=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?B=B.concat(this.options.customAttribution.map(function(he){return typeof he!="string"?"":he})):typeof this.options.customAttribution=="string"&&B.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var Y=this._map.style.sourceCaches;for(var C in Y){var q=Y[C];if(q.used){var Q=q.getSource();Q.attribution&&B.indexOf(Q.attribution)<0&&B.push(Q.attribution)}}B.sort(function(he,me){return he.length-me.length});var ne=(B=B.filter(function(he,me){for(var Pe=me+1;Pe<B.length;Pe++)if(B[Pe].indexOf(he)>=0)return!1;return!0})).join(" | ");ne!==this._attribHTML&&(this._attribHTML=ne,B.length?(this._innerContainer.innerHTML=ne,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ua.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var No=function(){i.bindAll(["_updateLogo"],this),i.bindAll(["_updateCompact"],this)};No.prototype.onAdd=function(B){this._map=B,this._container=v.create("div","mapboxgl-ctrl");var G=v.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},No.prototype.onRemove=function(){v.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},No.prototype.getDefaultPosition=function(){return"bottom-left"},No.prototype._updateLogo=function(B){B&&B.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},No.prototype._logoRequired=function(){if(this._map.style){var B=this._map.style.sourceCaches;for(var G in B)if(B[G].getSource().mapbox_logo)return!0;return!1}},No.prototype._updateCompact=function(){var B=this._container.children;if(B.length){var G=B[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var Va=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Va.prototype.add=function(B){var G=++this._id;return this._queue.push({callback:B,id:G,cancelled:!1}),G},Va.prototype.remove=function(B){for(var G=this._currentlyRunning,Y=0,C=G?this._queue.concat(G):this._queue;Y<C.length;Y+=1){var q=C[Y];if(q.id===B)return void(q.cancelled=!0)}},Va.prototype.run=function(B){B===void 0&&(B=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var Y=0,C=G;Y<C.length;Y+=1){var q=C[Y];if(!q.cancelled&&(q.callback(B),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Va.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var tl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},nl=i.window.HTMLImageElement,Ha=i.window.HTMLElement,ii=i.window.ImageBitmap,jo=60,Us={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:jo,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Eo=function(B){function G(C){var q=this;if((C=i.extend({},Us,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>jo)throw new Error("maxPitch must be less than or equal to 60");var Q=new ui(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies);if(B.call(this,Q,C),this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new Va,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},tl,C.locale),this._clickTolerance=C.clickTolerance,this._requestManager=new i.RequestManager(C.transformRequest,C.accessToken),typeof C.container=="string"){if(this._container=i.window.document.getElementById(C.container),!this._container)throw new Error("Container '"+C.container+"' not found.")}else{if(!(C.container instanceof Ha))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return q._update(!1)}),this.on("moveend",function(){return q._update(!1)}),this.on("zoom",function(){return q._update(!0)}),i.window!==void 0&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1),i.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new oi(this,C);var ne=typeof C.hash=="string"&&C.hash||void 0;this._hash=C.hash&&new io(ne).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,i.extend({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Ua({customAttribution:C.customAttribution})),this.addControl(new No,C.logoPosition),this.on("style.load",function(){q.transform.unmodified&&q.jumpTo(q.style.stylesheet)}),this.on("data",function(he){q._update(he.dataType==="style"),q.fire(new i.Event(he.dataType+"data",he))}),this.on("dataloading",function(he){q.fire(new i.Event(he.dataType+"dataloading",he))})}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var Y={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return G.prototype._getMapId=function(){return this._mapId},G.prototype.addControl=function(C,q){if(q===void 0&&(q=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Q=C.onAdd(this);this._controls.push(C);var ne=this._controlPositions[q];return q.indexOf("bottom")!==-1?ne.insertBefore(Q,ne.firstChild):ne.appendChild(Q),this},G.prototype.removeControl=function(C){if(!C||!C.onRemove)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var q=this._controls.indexOf(C);return q>-1&&this._controls.splice(q,1),C.onRemove(this),this},G.prototype.hasControl=function(C){return this._controls.indexOf(C)>-1},G.prototype.resize=function(C){var q=this._containerDimensions(),Q=q[0],ne=q[1];this._resizeCanvas(Q,ne),this.transform.resize(Q,ne),this.painter.resize(Q,ne);var he=!this._moving;return he&&(this.stop(),this.fire(new i.Event("movestart",C)).fire(new i.Event("move",C))),this.fire(new i.Event("resize",C)),he&&this.fire(new i.Event("moveend",C)),this},G.prototype.getBounds=function(){return this.transform.getBounds()},G.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},G.prototype.setMaxBounds=function(C){return this.transform.setMaxBounds(i.LngLatBounds.convert(C)),this._update()},G.prototype.setMinZoom=function(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},G.prototype.getMinZoom=function(){return this.transform.minZoom},G.prototype.setMaxZoom=function(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")},G.prototype.getMaxZoom=function(){return this.transform.maxZoom},G.prototype.setMinPitch=function(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},G.prototype.getMinPitch=function(){return this.transform.minPitch},G.prototype.setMaxPitch=function(C){if((C=C??jo)>jo)throw new Error("maxPitch must be less than or equal to 60");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")},G.prototype.getMaxPitch=function(){return this.transform.maxPitch},G.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},G.prototype.setRenderWorldCopies=function(C){return this.transform.renderWorldCopies=C,this._update()},G.prototype.project=function(C){return this.transform.locationPoint(i.LngLat.convert(C))},G.prototype.unproject=function(C){return this.transform.pointLocation(i.Point.convert(C))},G.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},G.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},G.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},G.prototype._createDelegatedListener=function(C,q,Q){var ne,he=this;if(C==="mouseenter"||C==="mouseover"){var me=!1;return{layer:q,listener:Q,delegates:{mousemove:function(ze){var qe=he.getLayer(q)?he.queryRenderedFeatures(ze.point,{layers:[q]}):[];qe.length?me||(me=!0,Q.call(he,new Ca(C,he,ze.originalEvent,{features:qe}))):me=!1},mouseout:function(){me=!1}}}}if(C==="mouseleave"||C==="mouseout"){var Pe=!1;return{layer:q,listener:Q,delegates:{mousemove:function(ze){(he.getLayer(q)?he.queryRenderedFeatures(ze.point,{layers:[q]}):[]).length?Pe=!0:Pe&&(Pe=!1,Q.call(he,new Ca(C,he,ze.originalEvent)))},mouseout:function(ze){Pe&&(Pe=!1,Q.call(he,new Ca(C,he,ze.originalEvent)))}}}}return{layer:q,listener:Q,delegates:(ne={},ne[C]=function(ze){var qe=he.getLayer(q)?he.queryRenderedFeatures(ze.point,{layers:[q]}):[];qe.length&&(ze.features=qe,Q.call(he,ze),delete ze.features)},ne)}},G.prototype.on=function(C,q,Q){if(Q===void 0)return B.prototype.on.call(this,C,q);var ne=this._createDelegatedListener(C,q,Q);for(var he in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(ne),ne.delegates)this.on(he,ne.delegates[he]);return this},G.prototype.once=function(C,q,Q){if(Q===void 0)return B.prototype.once.call(this,C,q);var ne=this._createDelegatedListener(C,q,Q);for(var he in ne.delegates)this.once(he,ne.delegates[he]);return this},G.prototype.off=function(C,q,Q){var ne=this;return Q===void 0?B.prototype.off.call(this,C,q):(this._delegatedListeners&&this._delegatedListeners[C]&&function(he){for(var me=he[C],Pe=0;Pe<me.length;Pe++){var ze=me[Pe];if(ze.layer===q&&ze.listener===Q){for(var qe in ze.delegates)ne.off(qe,ze.delegates[qe]);return me.splice(Pe,1),ne}}}(this._delegatedListeners),this)},G.prototype.queryRenderedFeatures=function(C,q){if(!this.style)return[];var Q;if(q!==void 0||C===void 0||C instanceof i.Point||Array.isArray(C)||(q=C,C=void 0),q=q||{},(C=C||[[0,0],[this.transform.width,this.transform.height]])instanceof i.Point||typeof C[0]=="number")Q=[i.Point.convert(C)];else{var ne=i.Point.convert(C[0]),he=i.Point.convert(C[1]);Q=[ne,new i.Point(he.x,ne.y),he,new i.Point(ne.x,he.y),ne]}return this.style.queryRenderedFeatures(Q,q,this.transform)},G.prototype.querySourceFeatures=function(C,q){return this.style.querySourceFeatures(C,q)},G.prototype.setStyle=function(C,q){return(q=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},q)).diff!==!1&&q.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,q),this):(this._localIdeographFontFamily=q.localIdeographFontFamily,this._updateStyle(C,q))},G.prototype._getUIString=function(C){var q=this._locale[C];if(q==null)throw new Error("Missing UI string '"+C+"'");return q},G.prototype._updateStyle=function(C,q){return this.style&&(this.style.setEventedParent(null),this.style._remove()),C?(this.style=new hr(this,q||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C):this.style.loadJSON(C),this):(delete this.style,this)},G.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new hr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},G.prototype._diffStyle=function(C,q){var Q=this;if(typeof C=="string"){var ne=this._requestManager.normalizeStyleURL(C),he=this._requestManager.transformRequest(ne,i.ResourceType.Style);i.getJSON(he,function(me,Pe){me?Q.fire(new i.ErrorEvent(me)):Pe&&Q._updateDiff(Pe,q)})}else typeof C=="object"&&this._updateDiff(C,q)},G.prototype._updateDiff=function(C,q){try{this.style.setState(C)&&this._update(!0)}catch(Q){i.warnOnce("Unable to perform style diff: "+(Q.message||Q.error||Q)+".  Rebuilding the style from scratch."),this._updateStyle(C,q)}},G.prototype.getStyle=function(){if(this.style)return this.style.serialize()},G.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},G.prototype.addSource=function(C,q){return this._lazyInitEmptyStyle(),this.style.addSource(C,q),this._update(!0)},G.prototype.isSourceLoaded=function(C){var q=this.style&&this.style.sourceCaches[C];if(q!==void 0)return q.loaded();this.fire(new i.ErrorEvent(new Error("There is no source with ID '"+C+"'")))},G.prototype.areTilesLoaded=function(){var C=this.style&&this.style.sourceCaches;for(var q in C){var Q=C[q]._tiles;for(var ne in Q){var he=Q[ne];if(he.state!=="loaded"&&he.state!=="errored")return!1}}return!0},G.prototype.addSourceType=function(C,q,Q){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,q,Q)},G.prototype.removeSource=function(C){return this.style.removeSource(C),this._update(!0)},G.prototype.getSource=function(C){return this.style.getSource(C)},G.prototype.addImage=function(C,q,Q){Q===void 0&&(Q={});var ne=Q.pixelRatio;ne===void 0&&(ne=1);var he=Q.sdf;he===void 0&&(he=!1);var me=Q.stretchX,Pe=Q.stretchY,ze=Q.content;if(this._lazyInitEmptyStyle(),q instanceof nl||ii&&q instanceof ii){var qe=i.browser.getImageData(q),Ze=qe.width,rt=qe.height,pt=qe.data;this.style.addImage(C,{data:new i.RGBAImage({width:Ze,height:rt},pt),pixelRatio:ne,stretchX:me,stretchY:Pe,content:ze,sdf:he,version:0})}else{if(q.width===void 0||q.height===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var vt=q.width,kt=q.height,Ot=q.data,Et=q;this.style.addImage(C,{data:new i.RGBAImage({width:vt,height:kt},new Uint8Array(Ot)),pixelRatio:ne,stretchX:me,stretchY:Pe,content:ze,sdf:he,version:0,userImage:Et}),Et.onAdd&&Et.onAdd(this,C)}},G.prototype.updateImage=function(C,q){var Q=this.style.getImage(C);if(!Q)return this.fire(new i.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ne=q instanceof nl||ii&&q instanceof ii?i.browser.getImageData(q):q,he=ne.width,me=ne.height,Pe=ne.data;if(he===void 0||me===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(he!==Q.data.width||me!==Q.data.height)return this.fire(new i.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ze=!(q instanceof nl||ii&&q instanceof ii);Q.data.replace(Pe,ze),this.style.updateImage(C,Q)},G.prototype.hasImage=function(C){return C?!!this.style.getImage(C):(this.fire(new i.ErrorEvent(new Error("Missing required image id"))),!1)},G.prototype.removeImage=function(C){this.style.removeImage(C)},G.prototype.loadImage=function(C,q){i.getImage(this._requestManager.transformRequest(C,i.ResourceType.Image),q)},G.prototype.listImages=function(){return this.style.listImages()},G.prototype.addLayer=function(C,q){return this._lazyInitEmptyStyle(),this.style.addLayer(C,q),this._update(!0)},G.prototype.moveLayer=function(C,q){return this.style.moveLayer(C,q),this._update(!0)},G.prototype.removeLayer=function(C){return this.style.removeLayer(C),this._update(!0)},G.prototype.getLayer=function(C){return this.style.getLayer(C)},G.prototype.setLayerZoomRange=function(C,q,Q){return this.style.setLayerZoomRange(C,q,Q),this._update(!0)},G.prototype.setFilter=function(C,q,Q){return Q===void 0&&(Q={}),this.style.setFilter(C,q,Q),this._update(!0)},G.prototype.getFilter=function(C){return this.style.getFilter(C)},G.prototype.setPaintProperty=function(C,q,Q,ne){return ne===void 0&&(ne={}),this.style.setPaintProperty(C,q,Q,ne),this._update(!0)},G.prototype.getPaintProperty=function(C,q){return this.style.getPaintProperty(C,q)},G.prototype.setLayoutProperty=function(C,q,Q,ne){return ne===void 0&&(ne={}),this.style.setLayoutProperty(C,q,Q,ne),this._update(!0)},G.prototype.getLayoutProperty=function(C,q){return this.style.getLayoutProperty(C,q)},G.prototype.setLight=function(C,q){return q===void 0&&(q={}),this._lazyInitEmptyStyle(),this.style.setLight(C,q),this._update(!0)},G.prototype.getLight=function(){return this.style.getLight()},G.prototype.setFeatureState=function(C,q){return this.style.setFeatureState(C,q),this._update()},G.prototype.removeFeatureState=function(C,q){return this.style.removeFeatureState(C,q),this._update()},G.prototype.getFeatureState=function(C){return this.style.getFeatureState(C)},G.prototype.getContainer=function(){return this._container},G.prototype.getCanvasContainer=function(){return this._canvasContainer},G.prototype.getCanvas=function(){return this._canvas},G.prototype._containerDimensions=function(){var C=0,q=0;return this._container&&(C=this._container.clientWidth||400,q=this._container.clientHeight||300),[C,q]},G.prototype._detectMissingCSS=function(){i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},G.prototype._setupContainer=function(){var C=this._container;C.classList.add("mapboxgl-map"),(this._missingCSSCanary=v.create("div","mapboxgl-canary",C)).style.visibility="hidden",this._detectMissingCSS();var q=this._canvasContainer=v.create("div","mapboxgl-canvas-container",C);this._interactive&&q.classList.add("mapboxgl-interactive"),this._canvas=v.create("canvas","mapboxgl-canvas",q),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Q=this._containerDimensions();this._resizeCanvas(Q[0],Q[1]);var ne=this._controlContainer=v.create("div","mapboxgl-control-container",C),he=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(me){he[me]=v.create("div","mapboxgl-ctrl-"+me,ne)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},G.prototype._resizeCanvas=function(C,q){var Q=i.browser.devicePixelRatio||1;this._canvas.width=Q*C,this._canvas.height=Q*q,this._canvas.style.width=C+"px",this._canvas.style.height=q+"px"},G.prototype._setupPainter=function(){var C=i.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),q=this._canvas.getContext("webgl",C)||this._canvas.getContext("experimental-webgl",C);q?(this.painter=new vi(q,this.transform),i.webpSupported.testSupport(q)):this.fire(new i.ErrorEvent(new Error("Failed to initialize WebGL")))},G.prototype._contextLost=function(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:C}))},G.prototype._contextRestored=function(C){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:C}))},G.prototype._onMapScroll=function(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},G.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},G.prototype._update=function(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this},G.prototype._requestRenderFrame=function(C){return this._update(),this._renderTaskQueue.add(C)},G.prototype._cancelRenderFrame=function(C){this._renderTaskQueue.remove(C)},G.prototype._render=function(C){var q,Q=this,ne=0,he=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(q=he.createQueryEXT(),he.beginQueryEXT(he.TIME_ELAPSED_EXT,q),ne=i.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),!this._removed){var me=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Pe=this.transform.zoom,ze=i.browser.now();this.style.zoomHistory.update(Pe,ze);var qe=new i.EvaluationParameters(Pe,{now:ze,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ze=qe.crossFadingFactor();Ze===1&&Ze===this._crossFadingFactor||(me=!0,this._crossFadingFactor=Ze),this.style.update(qe)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||me)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var rt=i.browser.now()-ne;he.endQueryEXT(he.TIME_ELAPSED_EXT,q),setTimeout(function(){var kt=he.getQueryObjectEXT(q,he.QUERY_RESULT_EXT)/1e6;he.deleteQueryEXT(q),Q.fire(new i.Event("gpu-timing-frame",{cpuTime:rt,gpuTime:kt}))},50)}if(this.listens("gpu-timing-layer")){var pt=this.painter.collectGpuTimers();setTimeout(function(){var kt=Q.painter.queryGpuTimers(pt);Q.fire(new i.Event("gpu-timing-layer",{layerTimes:kt}))},50)}var vt=this._sourcesDirty||this._styleDirty||this._placementDirty;return vt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.Event("idle")),!this._loaded||this._fullyLoaded||vt||(this._fullyLoaded=!0),this}},G.prototype.remove=function(){this._hash&&this._hash.remove();for(var C=0,q=this._controls;C<q.length;C+=1)q[C].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),i.window!==void 0&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("orientationchange",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1));var Q=this.painter.context.gl.getExtension("WEBGL_lose_context");Q&&Q.loseContext&&Q.loseContext(),rl(this._canvasContainer),rl(this._controlContainer),rl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new i.Event("remove"))},G.prototype.triggerRepaint=function(){var C=this;this.style&&!this._frame&&(this._frame=i.browser.frame(function(q){C._frame=null,C._render(q)}))},G.prototype._onWindowOnline=function(){this._update()},G.prototype._onWindowResize=function(C){this._trackResize&&this.resize({originalEvent:C})._update()},Y.showTileBoundaries.get=function(){return!!this._showTileBoundaries},Y.showTileBoundaries.set=function(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())},Y.showPadding.get=function(){return!!this._showPadding},Y.showPadding.set=function(C){this._showPadding!==C&&(this._showPadding=C,this._update())},Y.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},Y.showCollisionBoxes.set=function(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())},Y.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},Y.showOverdrawInspector.set=function(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())},Y.repaint.get=function(){return!!this._repaint},Y.repaint.set=function(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())},Y.vertices.get=function(){return!!this._vertices},Y.vertices.set=function(C){this._vertices=C,this._update()},G.prototype._setCacheLimits=function(C,q){i.setCacheLimits(C,q)},Y.version.get=function(){return i.version},Object.defineProperties(G.prototype,Y),G}(ya);function rl(B){B.parentNode&&B.parentNode.removeChild(B)}var il={showCompass:!0,showZoom:!0,visualizePitch:!1},Lo=function(B){var G=this;this.options=i.extend({},il,B),this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(Y){return Y.preventDefault()}),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(Y){return G._map.zoomIn({},{originalEvent:Y})}),v.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(Y){return G._map.zoomOut({},{originalEvent:Y})}),v.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(Y){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:Y}):G._map.resetNorth({},{originalEvent:Y})}),this._compassIcon=v.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Lo.prototype._updateZoomButtons=function(){var B=this._map.getZoom(),G=B===this._map.getMaxZoom(),Y=B===this._map.getMinZoom();this._zoomInButton.disabled=G,this._zoomOutButton.disabled=Y,this._zoomInButton.setAttribute("aria-disabled",G.toString()),this._zoomOutButton.setAttribute("aria-disabled",Y.toString())},Lo.prototype._rotateCompassArrow=function(){var B=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=B},Lo.prototype.onAdd=function(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ei(this._map,this._compass,this.options.visualizePitch)),this._container},Lo.prototype.onRemove=function(){v.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Lo.prototype._createButton=function(B,G){var Y=v.create("button",B,this._container);return Y.type="button",Y.addEventListener("click",G),Y},Lo.prototype._setButtonTitle=function(B,G){var Y=this._map._getUIString("NavigationControl."+G);B.title=Y,B.setAttribute("aria-label",Y)};var Ei=function(B,G,Y){Y===void 0&&(Y=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new Ko({clickTolerance:B.dragRotate._mouseRotate._clickTolerance}),this.map=B,Y&&(this.mousePitch=new ho({clickTolerance:B.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),v.addEventListener(G,"mousedown",this.mousedown),v.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),v.addEventListener(G,"touchmove",this.touchmove),v.addEventListener(G,"touchend",this.touchend),v.addEventListener(G,"touchcancel",this.reset)};function Vs(B,G,Y){if(B=new i.LngLat(B.lng,B.lat),G){var C=new i.LngLat(B.lng-360,B.lat),q=new i.LngLat(B.lng+360,B.lat),Q=Y.locationPoint(B).distSqr(G);Y.locationPoint(C).distSqr(G)<Q?B=C:Y.locationPoint(q).distSqr(G)<Q&&(B=q)}for(;Math.abs(B.lng-Y.center.lng)>180;){var ne=Y.locationPoint(B);if(ne.x>=0&&ne.y>=0&&ne.x<=Y.width&&ne.y<=Y.height)break;B.lng>Y.center.lng?B.lng-=360:B.lng+=360}return B}Ei.prototype.down=function(B,G){this.mouseRotate.mousedown(B,G),this.mousePitch&&this.mousePitch.mousedown(B,G),v.disableDrag()},Ei.prototype.move=function(B,G){var Y=this.map,C=this.mouseRotate.mousemoveWindow(B,G);if(C&&C.bearingDelta&&Y.setBearing(Y.getBearing()+C.bearingDelta),this.mousePitch){var q=this.mousePitch.mousemoveWindow(B,G);q&&q.pitchDelta&&Y.setPitch(Y.getPitch()+q.pitchDelta)}},Ei.prototype.off=function(){var B=this.element;v.removeEventListener(B,"mousedown",this.mousedown),v.removeEventListener(B,"touchstart",this.touchstart,{passive:!1}),v.removeEventListener(B,"touchmove",this.touchmove),v.removeEventListener(B,"touchend",this.touchend),v.removeEventListener(B,"touchcancel",this.reset),this.offTemp()},Ei.prototype.offTemp=function(){v.enableDrag(),v.removeEventListener(i.window,"mousemove",this.mousemove),v.removeEventListener(i.window,"mouseup",this.mouseup)},Ei.prototype.mousedown=function(B){this.down(i.extend({},B,{ctrlKey:!0,preventDefault:function(){return B.preventDefault()}}),v.mousePos(this.element,B)),v.addEventListener(i.window,"mousemove",this.mousemove),v.addEventListener(i.window,"mouseup",this.mouseup)},Ei.prototype.mousemove=function(B){this.move(B,v.mousePos(this.element,B))},Ei.prototype.mouseup=function(B){this.mouseRotate.mouseupWindow(B),this.mousePitch&&this.mousePitch.mouseupWindow(B),this.offTemp()},Ei.prototype.touchstart=function(B){B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=v.touchPos(this.element,B.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return B.preventDefault()}},this._startPos))},Ei.prototype.touchmove=function(B){B.targetTouches.length!==1?this.reset():(this._lastPos=v.touchPos(this.element,B.targetTouches)[0],this.move({preventDefault:function(){return B.preventDefault()}},this._lastPos))},Ei.prototype.touchend=function(B){B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ei.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Dr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hr(B,G,Y){var C=B.classList;for(var q in Dr)C.remove("mapboxgl-"+Y+"-anchor-"+q);C.add("mapboxgl-"+Y+"-anchor-"+G)}var ao,Uo=function(B){function G(Y,C){if(B.call(this),(Y instanceof i.window.HTMLElement||C)&&(Y=i.extend({element:Y},C)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=Y&&Y.anchor||"center",this._color=Y&&Y.color||"#3FB1CE",this._scale=Y&&Y.scale||1,this._draggable=Y&&Y.draggable||!1,this._clickTolerance=Y&&Y.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=Y&&Y.rotation||0,this._rotationAlignment=Y&&Y.rotationAlignment||"auto",this._pitchAlignment=Y&&Y.pitchAlignment&&Y.pitchAlignment!=="auto"?Y.pitchAlignment:this._rotationAlignment,Y&&Y.element)this._element=Y.element,this._offset=i.Point.convert(Y&&Y.offset||[0,0]);else{this._defaultMarker=!0,this._element=v.create("div"),this._element.setAttribute("aria-label","Map marker");var q=v.createNS("http://www.w3.org/2000/svg","svg");q.setAttributeNS(null,"display","block"),q.setAttributeNS(null,"height","41px"),q.setAttributeNS(null,"width","27px"),q.setAttributeNS(null,"viewBox","0 0 27 41");var Q=v.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"stroke","none"),Q.setAttributeNS(null,"stroke-width","1"),Q.setAttributeNS(null,"fill","none"),Q.setAttributeNS(null,"fill-rule","evenodd");var ne=v.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"fill-rule","nonzero");var he=v.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(3.0, 29.0)"),he.setAttributeNS(null,"fill","#000000");for(var me=0,Pe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];me<Pe.length;me+=1){var ze=Pe[me],qe=v.createNS("http://www.w3.org/2000/svg","ellipse");qe.setAttributeNS(null,"opacity","0.04"),qe.setAttributeNS(null,"cx","10.5"),qe.setAttributeNS(null,"cy","5.80029008"),qe.setAttributeNS(null,"rx",ze.rx),qe.setAttributeNS(null,"ry",ze.ry),he.appendChild(qe)}var Ze=v.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"fill",this._color);var rt=v.createNS("http://www.w3.org/2000/svg","path");rt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ze.appendChild(rt);var pt=v.createNS("http://www.w3.org/2000/svg","g");pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"fill","#000000");var vt=v.createNS("http://www.w3.org/2000/svg","path");vt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),pt.appendChild(vt);var kt=v.createNS("http://www.w3.org/2000/svg","g");kt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),kt.setAttributeNS(null,"fill","#FFFFFF");var Ot=v.createNS("http://www.w3.org/2000/svg","g");Ot.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Et=v.createNS("http://www.w3.org/2000/svg","circle");Et.setAttributeNS(null,"fill","#000000"),Et.setAttributeNS(null,"opacity","0.25"),Et.setAttributeNS(null,"cx","5.5"),Et.setAttributeNS(null,"cy","5.5"),Et.setAttributeNS(null,"r","5.4999962");var jt=v.createNS("http://www.w3.org/2000/svg","circle");jt.setAttributeNS(null,"fill","#FFFFFF"),jt.setAttributeNS(null,"cx","5.5"),jt.setAttributeNS(null,"cy","5.5"),jt.setAttributeNS(null,"r","5.4999962"),Ot.appendChild(Et),Ot.appendChild(jt),ne.appendChild(he),ne.appendChild(Ze),ne.appendChild(pt),ne.appendChild(kt),ne.appendChild(Ot),q.appendChild(ne),q.setAttributeNS(null,"height",41*this._scale+"px"),q.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(q),this._offset=i.Point.convert(Y&&Y.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(It){It.preventDefault()}),this._element.addEventListener("mousedown",function(It){It.preventDefault()}),Hr(this._element,this._anchor,"marker"),this._popup=null}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(Y){return this.remove(),this._map=Y,Y.getCanvasContainer().appendChild(this._element),Y.on("move",this._update),Y.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},G.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),v.remove(this._element),this._popup&&this._popup.remove(),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(Y){return this._lngLat=i.LngLat.convert(Y),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},G.prototype.getElement=function(){return this._element},G.prototype.setPopup=function(Y){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),Y){if(!("offset"in Y.options)){var C=13.5,q=Math.sqrt(Math.pow(C,2)/2);Y.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[q,-1*(24.6+q)],"bottom-right":[-q,-1*(24.6+q)],left:[C,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=Y,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},G.prototype._onKeyPress=function(Y){var C=Y.code,q=Y.charCode||Y.keyCode;C!=="Space"&&C!=="Enter"&&q!==32&&q!==13||this.togglePopup()},G.prototype._onMapClick=function(Y){var C=Y.originalEvent.target,q=this._element;this._popup&&(C===q||q.contains(C))&&this.togglePopup()},G.prototype.getPopup=function(){return this._popup},G.prototype.togglePopup=function(){var Y=this._popup;return Y?(Y.isOpen()?Y.remove():Y.addTo(this._map),this):this},G.prototype._update=function(Y){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Vs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(C="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var q="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?q="rotateX(0deg)":this._pitchAlignment==="map"&&(q="rotateX("+this._map.getPitch()+"deg)"),Y&&Y.type!=="moveend"||(this._pos=this._pos.round()),v.setTransform(this._element,Dr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+q+" "+C)}},G.prototype.getOffset=function(){return this._offset},G.prototype.setOffset=function(Y){return this._offset=i.Point.convert(Y),this._update(),this},G.prototype._onMove=function(Y){if(!this._isDragging){var C=this._clickTolerance||this._map._clickTolerance;this._isDragging=Y.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=Y.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag")))},G.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.Event("dragend")),this._state="inactive"},G.prototype._addDragHandler=function(Y){this._element.contains(Y.originalEvent.target)&&(Y.preventDefault(),this._positionDelta=Y.point.sub(this._pos).add(this._offset),this._pointerdownPos=Y.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},G.prototype.setDraggable=function(Y){return this._draggable=!!Y,this._map&&(Y?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},G.prototype.isDraggable=function(){return this._draggable},G.prototype.setRotation=function(Y){return this._rotation=Y||0,this._update(),this},G.prototype.getRotation=function(){return this._rotation},G.prototype.setRotationAlignment=function(Y){return this._rotationAlignment=Y||"auto",this._update(),this},G.prototype.getRotationAlignment=function(){return this._rotationAlignment},G.prototype.setPitchAlignment=function(Y){return this._pitchAlignment=Y&&Y!=="auto"?Y:this._rotationAlignment,this._update(),this},G.prototype.getPitchAlignment=function(){return this._pitchAlignment},G}(i.Evented),es={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},na=0,Vo=!1,mi=function(B){function G(Y){B.call(this),this.options=i.extend({},es,Y),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(Y){return this._map=Y,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),C=this._setupUI,ao!==void 0?C(ao):i.window.navigator.permissions!==void 0?i.window.navigator.permissions.query({name:"geolocation"}).then(function(q){ao=q.state!=="denied",C(ao)}):(ao=!!i.window.navigator.geolocation,C(ao)),this._container;var C},G.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),v.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,na=0,Vo=!1},G.prototype._isOutOfMapMaxBounds=function(Y){var C=this._map.getMaxBounds(),q=Y.coords;return C&&(q.longitude<C.getWest()||q.longitude>C.getEast()||q.latitude<C.getSouth()||q.latitude>C.getNorth())},G.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},G.prototype._onSuccess=function(Y){if(this._map){if(this._isOutOfMapMaxBounds(Y))return this._setErrorState(),this.fire(new i.Event("outofmaxbounds",Y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=Y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(Y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(Y),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",Y)),this._finish()}},G.prototype._updateCamera=function(Y){var C=new i.LngLat(Y.coords.longitude,Y.coords.latitude),q=Y.coords.accuracy,Q=this._map.getBearing(),ne=i.extend({bearing:Q},this.options.fitBoundsOptions);this._map.fitBounds(C.toBounds(q),ne,{geolocateSource:!0})},G.prototype._updateMarker=function(Y){if(Y){var C=new i.LngLat(Y.coords.longitude,Y.coords.latitude);this._accuracyCircleMarker.setLngLat(C).addTo(this._map),this._userLocationDotMarker.setLngLat(C).addTo(this._map),this._accuracy=Y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},G.prototype._updateCircleRadius=function(){var Y=this._map._container.clientHeight/2,C=this._map.unproject([0,Y]),q=this._map.unproject([1,Y]),Q=C.distanceTo(q),ne=Math.ceil(2*this._accuracy/Q);this._circleElement.style.width=ne+"px",this._circleElement.style.height=ne+"px"},G.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},G.prototype._onError=function(Y){if(this._map){if(this.options.trackUserLocation)if(Y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var C=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(Y.code===3&&Vo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",Y)),this._finish()}},G.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},G.prototype._setupUI=function(Y){var C=this;if(this._container.addEventListener("contextmenu",function(ne){return ne.preventDefault()}),this._geolocateButton=v.create("button","mapboxgl-ctrl-geolocate",this._container),v.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",Y===!1){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=q,this._geolocateButton.setAttribute("aria-label",q)}else{var Q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=v.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Uo(this._dotElement),this._circleElement=v.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ne){var he=ne.originalEvent&&ne.originalEvent.type==="resize";ne.geolocateSource||C._watchState!=="ACTIVE_LOCK"||he||(C._watchState="BACKGROUND",C._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),C._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),C.fire(new i.Event("trackuserlocationend")))})},G.prototype.trigger=function(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":na--,Vo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var Y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++na>1?(Y={maximumAge:6e5,timeout:0},Vo=!0):(Y=this.options.positionOptions,Vo=!1),this._geolocationWatchID=i.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,Y)}}else i.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},G.prototype._clearWatch=function(){i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},G}(i.Evented),Du={maxWidth:100,unit:"metric"},oo=function(B){this.options=i.extend({},Du,B),i.bindAll(["_onMove","setUnit"],this)};function _i(B,G,Y){var C=Y&&Y.maxWidth||100,q=B._container.clientHeight/2,Q=B.unproject([0,q]),ne=B.unproject([C,q]),he=Q.distanceTo(ne);if(Y&&Y.unit==="imperial"){var me=3.2808*he;me>5280?Ri(G,C,me/5280,B._getUIString("ScaleControl.Miles")):Ri(G,C,me,B._getUIString("ScaleControl.Feet"))}else Y&&Y.unit==="nautical"?Ri(G,C,he/1852,B._getUIString("ScaleControl.NauticalMiles")):he>=1e3?Ri(G,C,he/1e3,B._getUIString("ScaleControl.Kilometers")):Ri(G,C,he,B._getUIString("ScaleControl.Meters"))}function Ri(B,G,Y,C){var q,Q,ne,he=(q=Y,(Q=Math.pow(10,(""+Math.floor(q)).length-1))*((ne=q/Q)>=10?10:ne>=5?5:ne>=3?3:ne>=2?2:ne>=1?1:function(Pe){var ze=Math.pow(10,Math.ceil(-Math.log(Pe)/Math.LN10));return Math.round(Pe*ze)/ze}(ne))),me=he/Y;B.style.width=G*me+"px",B.innerHTML=he+"&nbsp;"+C}oo.prototype.getDefaultPosition=function(){return"bottom-left"},oo.prototype._onMove=function(){_i(this._map,this._container,this.options)},oo.prototype.onAdd=function(B){return this._map=B,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},oo.prototype.onRemove=function(){v.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},oo.prototype.setUnit=function(B){this.options.unit=B,_i(this._map,this._container,this.options)};var Ka=function(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof i.window.HTMLElement?this._container=B.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ka.prototype.onAdd=function(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ka.prototype.onRemove=function(){v.remove(this._controlContainer),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ka.prototype._checkFullscreenSupport=function(){return!!(i.window.document.fullscreenEnabled||i.window.document.mozFullScreenEnabled||i.window.document.msFullscreenEnabled||i.window.document.webkitFullscreenEnabled)},Ka.prototype._setupUI=function(){var B=this._fullscreenButton=v.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);v.create("span","mapboxgl-ctrl-icon",B).setAttribute("aria-hidden",!0),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ka.prototype._updateTitle=function(){var B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B},Ka.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ka.prototype._isFullscreen=function(){return this._fullscreen},Ka.prototype._changeIcon=function(){(i.window.document.fullscreenElement||i.window.document.mozFullScreenElement||i.window.document.webkitFullscreenElement||i.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ka.prototype._onClickFullscreen=function(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.mozCancelFullScreen?i.window.document.mozCancelFullScreen():i.window.document.msExitFullscreen?i.window.document.msExitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var bs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},cu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Qe=function(B){function G(Y){B.call(this),this.options=i.extend(Object.create(bs),Y),i.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(Y){return this._map&&this.remove(),this._map=Y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this},G.prototype.isOpen=function(){return!!this._map},G.prototype.remove=function(){return this._content&&v.remove(this._content),this._container&&(v.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new i.Event("close")),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(Y){return this._lngLat=i.LngLat.convert(Y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},G.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},G.prototype.getElement=function(){return this._container},G.prototype.setText=function(Y){return this.setDOMContent(i.window.document.createTextNode(Y))},G.prototype.setHTML=function(Y){var C,q=i.window.document.createDocumentFragment(),Q=i.window.document.createElement("body");for(Q.innerHTML=Y;C=Q.firstChild;)q.appendChild(C);return this.setDOMContent(q)},G.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},G.prototype.setMaxWidth=function(Y){return this.options.maxWidth=Y,this._update(),this},G.prototype.setDOMContent=function(Y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=v.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(Y),this._createCloseButton(),this._update(),this._focusFirstElement(),this},G.prototype.addClassName=function(Y){this._container&&this._container.classList.add(Y)},G.prototype.removeClassName=function(Y){this._container&&this._container.classList.remove(Y)},G.prototype.setOffset=function(Y){return this.options.offset=Y,this._update(),this},G.prototype.toggleClassName=function(Y){if(this._container)return this._container.classList.toggle(Y)},G.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=v.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},G.prototype._onMouseUp=function(Y){this._update(Y.point)},G.prototype._onMouseMove=function(Y){this._update(Y.point)},G.prototype._onDrag=function(Y){this._update(Y.point)},G.prototype._update=function(Y){var C=this,q=this._lngLat||this._trackPointer;if(this._map&&q&&this._content&&(this._container||(this._container=v.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=v.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ze){return C._container.classList.add(Ze)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Vs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||Y)){var Q=this._pos=this._trackPointer&&Y?Y:this._map.project(this._lngLat),ne=this.options.anchor,he=nt(this.options.offset);if(!ne){var me,Pe=this._container.offsetWidth,ze=this._container.offsetHeight;me=Q.y+he.bottom.y<ze?["top"]:Q.y>this._map.transform.height-ze?["bottom"]:[],Q.x<Pe/2?me.push("left"):Q.x>this._map.transform.width-Pe/2&&me.push("right"),ne=me.length===0?"bottom":me.join("-")}var qe=Q.add(he[ne]).round();v.setTransform(this._container,Dr[ne]+" translate("+qe.x+"px,"+qe.y+"px)"),Hr(this._container,ne,"popup")}},G.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var Y=this._container.querySelector(cu);Y&&Y.focus()}},G.prototype._onClose=function(){this.remove()},G}(i.Evented);function nt(B){if(B){if(typeof B=="number"){var G=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new i.Point(0,0),top:new i.Point(0,B),"top-left":new i.Point(G,G),"top-right":new i.Point(-G,G),bottom:new i.Point(0,-B),"bottom-left":new i.Point(G,-G),"bottom-right":new i.Point(-G,-G),left:new i.Point(B,0),right:new i.Point(-B,0)}}if(B instanceof i.Point||Array.isArray(B)){var Y=i.Point.convert(B);return{center:Y,top:Y,"top-left":Y,"top-right":Y,bottom:Y,"bottom-left":Y,"bottom-right":Y,left:Y,right:Y}}return{center:i.Point.convert(B.center||[0,0]),top:i.Point.convert(B.top||[0,0]),"top-left":i.Point.convert(B["top-left"]||[0,0]),"top-right":i.Point.convert(B["top-right"]||[0,0]),bottom:i.Point.convert(B.bottom||[0,0]),"bottom-left":i.Point.convert(B["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(B["bottom-right"]||[0,0]),left:i.Point.convert(B.left||[0,0]),right:i.Point.convert(B.right||[0,0])}}return nt(new i.Point(0,0))}var ut={version:i.version,supported:_,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:Eo,NavigationControl:Lo,GeolocateControl:mi,AttributionControl:Ua,ScaleControl:oo,FullscreenControl:Ka,Popup:Qe,Marker:Uo,Style:hr,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,Evented:i.Evented,config:i.config,prewarm:function(){xt().acquire(at)},clearPrewarmedResources:function(){var B=gt;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(at),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(B){i.config.ACCESS_TOKEN=B},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(B){i.config.API_URL=B},get workerCount(){return $e.workerCount},set workerCount(B){$e.workerCount=B},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){i.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage:function(B){i.clearTileCache(B)},workerUrl:""};return ut}),T}()},88294:function(N,L,e){N.exports=e(62849)},62849:function(N,L,e){var T=e(91358),w=e(53435),i=e(18863),_=e(21527),v=e(71299),h=e(46775),s=e(30120),t=e(64941),a=e(90660),n=e(27084);function r(l,o){for(var u=o[0],p=o[1],c=1/(o[2]-u),b=1/(o[3]-p),g=new Array(l.length),d=0,m=l.length/2;d<m;d++)g[2*d]=w((l[2*d]-u)*c,0,1),g[2*d+1]=w((l[2*d+1]-p)*b,0,1);return g}N.exports=function(l,o){o||(o={}),l=s(l,"float64"),o=v(o,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=h(o.maxDepth,255),p=h(o.bounds,_(l,2));p[0]===p[2]&&p[2]++,p[1]===p[3]&&p[3]++;var c,b=r(l,p),g=l.length>>>1;o.dtype||(o.dtype="array"),typeof o.dtype=="string"?c=new(a(o.dtype))(g):o.dtype&&(c=o.dtype,Array.isArray(c)&&(c.length=g));for(var d=0;d<g;++d)c[d]=d;var m=[],x=[],y=[],k=[];(function z(U,R,j,Z,F,V){if(!Z.length)return null;var H=m[F]||(m[F]=[]),te=y[F]||(y[F]=[]),$=x[F]||(x[F]=[]),J=H.length;if(++F>u||V>1073741824){for(var X=0;X<Z.length;X++)H.push(Z[X]),te.push(V),$.push(null,null,null,null);return J}if(H.push(Z[0]),te.push(V),Z.length<=1)return $.push(null,null,null,null),J;for(var K=.5*j,ee=U+K,ie=R+K,ae=[],oe=[],fe=[],ge=[],ve=1,xe=Z.length;ve<xe;ve++){var _e=Z[ve],ye=b[2*_e],Ce=b[2*_e+1];ye<ee?Ce<ie?ae.push(_e):oe.push(_e):Ce<ie?fe.push(_e):ge.push(_e)}return V<<=2,$.push(z(U,R,K,ae,F,V),z(U,ie,K,oe,F,V+1),z(ee,R,K,fe,F,V+2),z(ee,ie,K,ge,F,V+3)),J})(0,0,1,c,0,1);for(var f=0,S=0;S<m.length;S++){var M=m[S];if(c.set)c.set(M,f);else for(var E=0,O=M.length;E<O;E++)c[E+f]=M[E];var P=f+m[S].length;k[S]=[f,P],f=P}return c.range=function(){for(var z,U=[],R=arguments.length;R--;)U[R]=arguments[R];if(t(U[U.length-1])){var j=U.pop();U.length||j.x==null&&j.l==null&&j.left==null||(U=[j],z={}),z=v(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};U.length||(U=p);var Z,F=i.apply(void 0,U),V=[Math.min(F.x,F.x+F.width),Math.min(F.y,F.y+F.height),Math.max(F.x,F.x+F.width),Math.max(F.y,F.y+F.height)],H=V[0],te=V[1],$=V[2],J=V[3],X=r([H,te,$,J],p),K=X[0],ee=X[1],ie=X[2],ae=X[3],oe=h(z.level,m.length);if(z.d!=null&&(typeof z.d=="number"?Z=[z.d,z.d]:z.d.length&&(Z=z.d),oe=Math.min(Math.max(Math.ceil(-n(Math.abs(Z[0])/(p[2]-p[0]))),Math.ceil(-n(Math.abs(Z[1])/(p[3]-p[1])))),oe)),oe=Math.min(oe,m.length),z.lod)return function(ge,ve,xe,_e,ye){for(var Ce=[],ke=0;ke<ye;ke++){var Te=y[ke],le=k[ke][0],ue=I(ge,ve,ke),de=I(xe,_e,ke),Le=T.ge(Te,ue),we=T.gt(Te,de,Le,Te.length-1);Ce[ke]=[Le+le,we+le]}return Ce}(K,ee,ie,ae,oe);var fe=[];return function ge(ve,xe,_e,ye,Ce,ke){if(Ce!==null&&ke!==null&&!(K>ve+_e||ee>xe+_e||ie<ve||ae<xe||ye>=oe||Ce===ke)){var Te=m[ye];ke===void 0&&(ke=Te.length);for(var le=Ce;le<ke;le++){var ue=Te[le],de=l[2*ue],Le=l[2*ue+1];de>=H&&de<=$&&Le>=te&&Le<=J&&fe.push(ue)}var we=x[ye],Ee=we[4*Ce+0],Oe=we[4*Ce+1],Fe=we[4*Ce+2],pe=we[4*Ce+3],be=function(Ne,Be){for(var Ye=null,We=0;Ye===null;)if(Ye=Ne[4*Be+We],++We>Ne.length)return null;return Ye}(we,Ce+1),Me=.5*_e,De=ye+1;ge(ve,xe,Me,De,Ee,Oe||Fe||pe||be),ge(ve,xe+Me,Me,De,Oe,Fe||pe||be),ge(ve+Me,xe,Me,De,Fe,pe||be),ge(ve+Me,xe+Me,Me,De,pe,be)}}(0,0,1,0,0,1),fe},c;function I(z,U,R){for(var j=1,Z=.5,F=.5,V=.5,H=0;H<R;H++)j<<=2,j+=z<Z?U<F?0:1:U<F?2:3,V*=.5,Z+=z<Z?-V:V,F+=U<F?-V:V;return j}}},30774:function(N,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(60302),w=6378137;function i(h){var s=0;if(h&&h.length>0){s+=Math.abs(_(h[0]));for(var t=1;t<h.length;t++)s-=Math.abs(_(h[t]))}return s}function _(h){var s,t,a,n,r,l,o=0,u=h.length;if(u>2){for(l=0;l<u;l++)l===u-2?(a=u-2,n=u-1,r=0):l===u-1?(a=u-1,n=0,r=1):(a=l,n=l+1,r=l+2),s=h[a],t=h[n],o+=(v(h[r][0])-v(s[0]))*Math.sin(v(t[1]));o=o*w*w/2}return o}function v(h){return h*Math.PI/180}L.default=function(h){return T.geomReduce(h,function(s,t){return s+function(a){var n,r=0;switch(a.type){case"Polygon":return i(a.coordinates);case"MultiPolygon":for(n=0;n<a.coordinates.length;n++)r+=i(a.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},23132:function(N,L){function e(l,o,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=o||{},p.geometry=l,p}function T(l,o,u){if(u===void 0&&(u={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(l[0])||!r(l[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:l},o,u)}function w(l,o,u){u===void 0&&(u={});for(var p=0,c=l;p<c.length;p++){var b=c[p];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<b[b.length-1].length;g++)if(b[b.length-1][g]!==b[0][g])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:l},o,u)}function i(l,o,u){if(u===void 0&&(u={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:l},o,u)}function _(l,o){o===void 0&&(o={});var u={type:"FeatureCollection"};return o.id&&(u.id=o.id),o.bbox&&(u.bbox=o.bbox),u.features=l,u}function v(l,o,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:l},o,u)}function h(l,o,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:l},o,u)}function s(l,o,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:l},o,u)}function t(l,o){o===void 0&&(o="kilometers");var u=L.factors[o];if(!u)throw new Error(o+" units is invalid");return l*u}function a(l,o){o===void 0&&(o="kilometers");var u=L.factors[o];if(!u)throw new Error(o+" units is invalid");return l/u}function n(l){return l%(2*Math.PI)*180/Math.PI}function r(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}Object.defineProperty(L,"__esModule",{value:!0}),L.earthRadius=63710088e-1,L.factors={centimeters:100*L.earthRadius,centimetres:100*L.earthRadius,degrees:L.earthRadius/111325,feet:3.28084*L.earthRadius,inches:39.37*L.earthRadius,kilometers:L.earthRadius/1e3,kilometres:L.earthRadius/1e3,meters:L.earthRadius,metres:L.earthRadius,miles:L.earthRadius/1609.344,millimeters:1e3*L.earthRadius,millimetres:1e3*L.earthRadius,nauticalmiles:L.earthRadius/1852,radians:1,yards:1.0936*L.earthRadius},L.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/L.earthRadius,yards:1.0936133},L.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},L.feature=e,L.geometry=function(l,o,u){switch(l){case"Point":return T(o).geometry;case"LineString":return i(o).geometry;case"Polygon":return w(o).geometry;case"MultiPoint":return h(o).geometry;case"MultiLineString":return v(o).geometry;case"MultiPolygon":return s(o).geometry;default:throw new Error(l+" is invalid")}},L.point=T,L.points=function(l,o,u){return u===void 0&&(u={}),_(l.map(function(p){return T(p,o)}),u)},L.polygon=w,L.polygons=function(l,o,u){return u===void 0&&(u={}),_(l.map(function(p){return w(p,o)}),u)},L.lineString=i,L.lineStrings=function(l,o,u){return u===void 0&&(u={}),_(l.map(function(p){return i(p,o)}),u)},L.featureCollection=_,L.multiLineString=v,L.multiPoint=h,L.multiPolygon=s,L.geometryCollection=function(l,o,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:l},o,u)},L.round=function(l,o){if(o===void 0&&(o=0),o&&!(o>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,o||0);return Math.round(l*u)/u},L.radiansToLength=t,L.lengthToRadians=a,L.lengthToDegrees=function(l,o){return n(a(l,o))},L.bearingToAzimuth=function(l){var o=l%360;return o<0&&(o+=360),o},L.radiansToDegrees=n,L.degreesToRadians=function(l){return l%360*Math.PI/180},L.convertLength=function(l,o,u){if(o===void 0&&(o="kilometers"),u===void 0&&(u="kilometers"),!(l>=0))throw new Error("length must be a positive number");return t(a(l,o),u)},L.convertArea=function(l,o,u){if(o===void 0&&(o="meters"),u===void 0&&(u="kilometers"),!(l>=0))throw new Error("area must be a positive number");var p=L.areaFactors[o];if(!p)throw new Error("invalid original units");var c=L.areaFactors[u];if(!c)throw new Error("invalid final units");return l/p*c},L.isNumber=r,L.isObject=function(l){return!!l&&l.constructor===Object},L.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(o){if(!r(o))throw new Error("bbox must only contain numbers")})},L.validateId=function(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")}},60302:function(N,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(23132);function w(a,n,r){if(a!==null)for(var l,o,u,p,c,b,g,d,m=0,x=0,y=a.type,k=y==="FeatureCollection",f=y==="Feature",S=k?a.features.length:1,M=0;M<S;M++){c=(d=!!(g=k?a.features[M].geometry:f?a.geometry:a)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var O=0,P=0;if((p=d?g.geometries[E]:g)!==null){b=p.coordinates;var I=p.type;switch(m=!r||I!=="Polygon"&&I!=="MultiPolygon"?0:1,I){case null:break;case"Point":if(n(b,x,M,O,P)===!1)return!1;x++,O++;break;case"LineString":case"MultiPoint":for(l=0;l<b.length;l++){if(n(b[l],x,M,O,P)===!1)return!1;x++,I==="MultiPoint"&&O++}I==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(l=0;l<b.length;l++){for(o=0;o<b[l].length-m;o++){if(n(b[l][o],x,M,O,P)===!1)return!1;x++}I==="MultiLineString"&&O++,I==="Polygon"&&P++}I==="Polygon"&&O++;break;case"MultiPolygon":for(l=0;l<b.length;l++){for(P=0,o=0;o<b[l].length;o++){for(u=0;u<b[l][o].length-m;u++){if(n(b[l][o][u],x,M,O,P)===!1)return!1;x++}P++}O++}break;case"GeometryCollection":for(l=0;l<p.geometries.length;l++)if(w(p.geometries[l],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(a,n){var r;switch(a.type){case"FeatureCollection":for(r=0;r<a.features.length&&n(a.features[r].properties,r)!==!1;r++);break;case"Feature":n(a.properties,0)}}function _(a,n){if(a.type==="Feature")n(a,0);else if(a.type==="FeatureCollection")for(var r=0;r<a.features.length&&n(a.features[r],r)!==!1;r++);}function v(a,n){var r,l,o,u,p,c,b,g,d,m,x=0,y=a.type==="FeatureCollection",k=a.type==="Feature",f=y?a.features.length:1;for(r=0;r<f;r++){for(c=y?a.features[r].geometry:k?a.geometry:a,g=y?a.features[r].properties:k?a.properties:{},d=y?a.features[r].bbox:k?a.bbox:void 0,m=y?a.features[r].id:k?a.id:void 0,p=(b=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,o=0;o<p;o++)if((u=b?c.geometries[o]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,x,g,d,m)===!1)return!1;break;case"GeometryCollection":for(l=0;l<u.geometries.length;l++)if(n(u.geometries[l],x,g,d,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,x,g,d,m)===!1)return!1;x++}}function h(a,n){v(a,function(r,l,o,u,p){var c,b=r===null?null:r.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return n(T.feature(r,o,{bbox:u,id:p}),l,0)!==!1&&void 0}switch(b){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<r.coordinates.length;g++){var d={type:c,coordinates:r.coordinates[g]};if(n(T.feature(d,o),l,g)===!1)return!1}})}function s(a,n){h(a,function(r,l,o){var u=0;if(r.geometry){var p=r.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,b=0,g=0,d=0;return w(r,function(m,x,y,k,f){if(c===void 0||l>b||k>g||f>d)return c=m,b=l,g=k,d=f,void(u=0);var S=T.lineString([c,m],r.properties);if(n(S,l,o,f,u)===!1)return!1;u++,c=m})!==!1&&void 0}}})}function t(a,n){if(!a)throw new Error("geojson is required");h(a,function(r,l,o){if(r.geometry!==null){var u=r.geometry.type,p=r.geometry.coordinates;switch(u){case"LineString":if(n(r,l,o,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(n(T.lineString(p[c],r.properties),l,o,c)===!1)return!1}}})}L.coordEach=w,L.coordReduce=function(a,n,r,l){var o=r;return w(a,function(u,p,c,b,g){o=p===0&&r===void 0?u:n(o,u,p,c,b,g)},l),o},L.propEach=i,L.propReduce=function(a,n,r){var l=r;return i(a,function(o,u){l=u===0&&r===void 0?o:n(l,o,u)}),l},L.featureEach=_,L.featureReduce=function(a,n,r){var l=r;return _(a,function(o,u){l=u===0&&r===void 0?o:n(l,o,u)}),l},L.coordAll=function(a){var n=[];return w(a,function(r){n.push(r)}),n},L.geomEach=v,L.geomReduce=function(a,n,r){var l=r;return v(a,function(o,u,p,c,b){l=u===0&&r===void 0?o:n(l,o,u,p,c,b)}),l},L.flattenEach=h,L.flattenReduce=function(a,n,r){var l=r;return h(a,function(o,u,p){l=u===0&&p===0&&r===void 0?o:n(l,o,u,p)}),l},L.segmentEach=s,L.segmentReduce=function(a,n,r){var l=r,o=!1;return s(a,function(u,p,c,b,g){l=o===!1&&r===void 0?u:n(l,u,p,c,b,g),o=!0}),l},L.lineEach=t,L.lineReduce=function(a,n,r){var l=r;return t(a,function(o,u,p,c){l=u===0&&r===void 0?o:n(l,o,u,p,c)}),l},L.findSegment=function(a,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,l=n.featureIndex||0,o=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.segmentIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),c=c||a.features[l].properties,r=a.features[l].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var b=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=b.length+p-1),T.lineString([b[p],b[p+1]],c,n);case"Polygon":return u<0&&(u=b.length+u),p<0&&(p=b[u].length+p-1),T.lineString([b[u][p],b[u][p+1]],c,n);case"MultiLineString":return o<0&&(o=b.length+o),p<0&&(p=b[o].length+p-1),T.lineString([b[o][p],b[o][p+1]],c,n);case"MultiPolygon":return o<0&&(o=b.length+o),u<0&&(u=b[o].length+u),p<0&&(p=b[o][u].length-p-1),T.lineString([b[o][u][p],b[o][u][p+1]],c,n)}throw new Error("geojson is invalid")},L.findPoint=function(a,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,l=n.featureIndex||0,o=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.coordIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),c=c||a.features[l].properties,r=a.features[l].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var b=r.coordinates;switch(r.type){case"Point":return T.point(b,c,n);case"MultiPoint":return o<0&&(o=b.length+o),T.point(b[o],c,n);case"LineString":return p<0&&(p=b.length+p),T.point(b[p],c,n);case"Polygon":return u<0&&(u=b.length+u),p<0&&(p=b[u].length+p),T.point(b[u][p],c,n);case"MultiLineString":return o<0&&(o=b.length+o),p<0&&(p=b[o].length+p),T.point(b[o][p],c,n);case"MultiPolygon":return o<0&&(o=b.length+o),u<0&&(u=b[o].length+u),p<0&&(p=b[o][u].length-p),T.point(b[o][u][p],c,n)}throw new Error("geojson is invalid")}},85268:function(N,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(27138);function w(i){var _=[1/0,1/0,-1/0,-1/0];return T.coordEach(i,function(v){_[0]>v[0]&&(_[0]=v[0]),_[1]>v[1]&&(_[1]=v[1]),_[2]<v[0]&&(_[2]=v[0]),_[3]<v[1]&&(_[3]=v[1])}),_}w.default=w,L.default=w},94228:function(N,L){function e(l,o,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=o||{},p.geometry=l,p}function T(l,o,u){if(u===void 0&&(u={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(l[0])||!r(l[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:l},o,u)}function w(l,o,u){u===void 0&&(u={});for(var p=0,c=l;p<c.length;p++){var b=c[p];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<b[b.length-1].length;g++)if(b[b.length-1][g]!==b[0][g])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:l},o,u)}function i(l,o,u){if(u===void 0&&(u={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:l},o,u)}function _(l,o){o===void 0&&(o={});var u={type:"FeatureCollection"};return o.id&&(u.id=o.id),o.bbox&&(u.bbox=o.bbox),u.features=l,u}function v(l,o,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:l},o,u)}function h(l,o,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:l},o,u)}function s(l,o,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:l},o,u)}function t(l,o){o===void 0&&(o="kilometers");var u=L.factors[o];if(!u)throw new Error(o+" units is invalid");return l*u}function a(l,o){o===void 0&&(o="kilometers");var u=L.factors[o];if(!u)throw new Error(o+" units is invalid");return l/u}function n(l){return l%(2*Math.PI)*180/Math.PI}function r(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}Object.defineProperty(L,"__esModule",{value:!0}),L.earthRadius=63710088e-1,L.factors={centimeters:100*L.earthRadius,centimetres:100*L.earthRadius,degrees:L.earthRadius/111325,feet:3.28084*L.earthRadius,inches:39.37*L.earthRadius,kilometers:L.earthRadius/1e3,kilometres:L.earthRadius/1e3,meters:L.earthRadius,metres:L.earthRadius,miles:L.earthRadius/1609.344,millimeters:1e3*L.earthRadius,millimetres:1e3*L.earthRadius,nauticalmiles:L.earthRadius/1852,radians:1,yards:1.0936*L.earthRadius},L.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/L.earthRadius,yards:1.0936133},L.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},L.feature=e,L.geometry=function(l,o,u){switch(l){case"Point":return T(o).geometry;case"LineString":return i(o).geometry;case"Polygon":return w(o).geometry;case"MultiPoint":return h(o).geometry;case"MultiLineString":return v(o).geometry;case"MultiPolygon":return s(o).geometry;default:throw new Error(l+" is invalid")}},L.point=T,L.points=function(l,o,u){return u===void 0&&(u={}),_(l.map(function(p){return T(p,o)}),u)},L.polygon=w,L.polygons=function(l,o,u){return u===void 0&&(u={}),_(l.map(function(p){return w(p,o)}),u)},L.lineString=i,L.lineStrings=function(l,o,u){return u===void 0&&(u={}),_(l.map(function(p){return i(p,o)}),u)},L.featureCollection=_,L.multiLineString=v,L.multiPoint=h,L.multiPolygon=s,L.geometryCollection=function(l,o,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:l},o,u)},L.round=function(l,o){if(o===void 0&&(o=0),o&&!(o>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,o||0);return Math.round(l*u)/u},L.radiansToLength=t,L.lengthToRadians=a,L.lengthToDegrees=function(l,o){return n(a(l,o))},L.bearingToAzimuth=function(l){var o=l%360;return o<0&&(o+=360),o},L.radiansToDegrees=n,L.degreesToRadians=function(l){return l%360*Math.PI/180},L.convertLength=function(l,o,u){if(o===void 0&&(o="kilometers"),u===void 0&&(u="kilometers"),!(l>=0))throw new Error("length must be a positive number");return t(a(l,o),u)},L.convertArea=function(l,o,u){if(o===void 0&&(o="meters"),u===void 0&&(u="kilometers"),!(l>=0))throw new Error("area must be a positive number");var p=L.areaFactors[o];if(!p)throw new Error("invalid original units");var c=L.areaFactors[u];if(!c)throw new Error("invalid final units");return l/p*c},L.isNumber=r,L.isObject=function(l){return!!l&&l.constructor===Object},L.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(o){if(!r(o))throw new Error("bbox must only contain numbers")})},L.validateId=function(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")}},27138:function(N,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(94228);function w(a,n,r){if(a!==null)for(var l,o,u,p,c,b,g,d,m=0,x=0,y=a.type,k=y==="FeatureCollection",f=y==="Feature",S=k?a.features.length:1,M=0;M<S;M++){c=(d=!!(g=k?a.features[M].geometry:f?a.geometry:a)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var O=0,P=0;if((p=d?g.geometries[E]:g)!==null){b=p.coordinates;var I=p.type;switch(m=!r||I!=="Polygon"&&I!=="MultiPolygon"?0:1,I){case null:break;case"Point":if(n(b,x,M,O,P)===!1)return!1;x++,O++;break;case"LineString":case"MultiPoint":for(l=0;l<b.length;l++){if(n(b[l],x,M,O,P)===!1)return!1;x++,I==="MultiPoint"&&O++}I==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(l=0;l<b.length;l++){for(o=0;o<b[l].length-m;o++){if(n(b[l][o],x,M,O,P)===!1)return!1;x++}I==="MultiLineString"&&O++,I==="Polygon"&&P++}I==="Polygon"&&O++;break;case"MultiPolygon":for(l=0;l<b.length;l++){for(P=0,o=0;o<b[l].length;o++){for(u=0;u<b[l][o].length-m;u++){if(n(b[l][o][u],x,M,O,P)===!1)return!1;x++}P++}O++}break;case"GeometryCollection":for(l=0;l<p.geometries.length;l++)if(w(p.geometries[l],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(a,n){var r;switch(a.type){case"FeatureCollection":for(r=0;r<a.features.length&&n(a.features[r].properties,r)!==!1;r++);break;case"Feature":n(a.properties,0)}}function _(a,n){if(a.type==="Feature")n(a,0);else if(a.type==="FeatureCollection")for(var r=0;r<a.features.length&&n(a.features[r],r)!==!1;r++);}function v(a,n){var r,l,o,u,p,c,b,g,d,m,x=0,y=a.type==="FeatureCollection",k=a.type==="Feature",f=y?a.features.length:1;for(r=0;r<f;r++){for(c=y?a.features[r].geometry:k?a.geometry:a,g=y?a.features[r].properties:k?a.properties:{},d=y?a.features[r].bbox:k?a.bbox:void 0,m=y?a.features[r].id:k?a.id:void 0,p=(b=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,o=0;o<p;o++)if((u=b?c.geometries[o]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,x,g,d,m)===!1)return!1;break;case"GeometryCollection":for(l=0;l<u.geometries.length;l++)if(n(u.geometries[l],x,g,d,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,x,g,d,m)===!1)return!1;x++}}function h(a,n){v(a,function(r,l,o,u,p){var c,b=r===null?null:r.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return n(T.feature(r,o,{bbox:u,id:p}),l,0)!==!1&&void 0}switch(b){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<r.coordinates.length;g++){var d={type:c,coordinates:r.coordinates[g]};if(n(T.feature(d,o),l,g)===!1)return!1}})}function s(a,n){h(a,function(r,l,o){var u=0;if(r.geometry){var p=r.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,b=0,g=0,d=0;return w(r,function(m,x,y,k,f){if(c===void 0||l>b||k>g||f>d)return c=m,b=l,g=k,d=f,void(u=0);var S=T.lineString([c,m],r.properties);if(n(S,l,o,f,u)===!1)return!1;u++,c=m})!==!1&&void 0}}})}function t(a,n){if(!a)throw new Error("geojson is required");h(a,function(r,l,o){if(r.geometry!==null){var u=r.geometry.type,p=r.geometry.coordinates;switch(u){case"LineString":if(n(r,l,o,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(n(T.lineString(p[c],r.properties),l,o,c)===!1)return!1}}})}L.coordEach=w,L.coordReduce=function(a,n,r,l){var o=r;return w(a,function(u,p,c,b,g){o=p===0&&r===void 0?u:n(o,u,p,c,b,g)},l),o},L.propEach=i,L.propReduce=function(a,n,r){var l=r;return i(a,function(o,u){l=u===0&&r===void 0?o:n(l,o,u)}),l},L.featureEach=_,L.featureReduce=function(a,n,r){var l=r;return _(a,function(o,u){l=u===0&&r===void 0?o:n(l,o,u)}),l},L.coordAll=function(a){var n=[];return w(a,function(r){n.push(r)}),n},L.geomEach=v,L.geomReduce=function(a,n,r){var l=r;return v(a,function(o,u,p,c,b){l=u===0&&r===void 0?o:n(l,o,u,p,c,b)}),l},L.flattenEach=h,L.flattenReduce=function(a,n,r){var l=r;return h(a,function(o,u,p){l=u===0&&p===0&&r===void 0?o:n(l,o,u,p)}),l},L.segmentEach=s,L.segmentReduce=function(a,n,r){var l=r,o=!1;return s(a,function(u,p,c,b,g){l=o===!1&&r===void 0?u:n(l,u,p,c,b,g),o=!0}),l},L.lineEach=t,L.lineReduce=function(a,n,r){var l=r;return t(a,function(o,u,p,c){l=u===0&&r===void 0?o:n(l,o,u,p,c)}),l},L.findSegment=function(a,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,l=n.featureIndex||0,o=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.segmentIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),c=c||a.features[l].properties,r=a.features[l].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var b=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=b.length+p-1),T.lineString([b[p],b[p+1]],c,n);case"Polygon":return u<0&&(u=b.length+u),p<0&&(p=b[u].length+p-1),T.lineString([b[u][p],b[u][p+1]],c,n);case"MultiLineString":return o<0&&(o=b.length+o),p<0&&(p=b[o].length+p-1),T.lineString([b[o][p],b[o][p+1]],c,n);case"MultiPolygon":return o<0&&(o=b.length+o),u<0&&(u=b[o].length+u),p<0&&(p=b[o][u].length-p-1),T.lineString([b[o][u][p],b[o][u][p+1]],c,n)}throw new Error("geojson is invalid")},L.findPoint=function(a,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,l=n.featureIndex||0,o=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.coordIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),c=c||a.features[l].properties,r=a.features[l].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var b=r.coordinates;switch(r.type){case"Point":return T.point(b,c,n);case"MultiPoint":return o<0&&(o=b.length+o),T.point(b[o],c,n);case"LineString":return p<0&&(p=b.length+p),T.point(b[p],c,n);case"Polygon":return u<0&&(u=b.length+u),p<0&&(p=b[u].length+p),T.point(b[u][p],c,n);case"MultiLineString":return o<0&&(o=b.length+o),p<0&&(p=b[o].length+p),T.point(b[o][p],c,n);case"MultiPolygon":return o<0&&(o=b.length+o),u<0&&(u=b[o].length+u),p<0&&(p=b[o][u].length-p),T.point(b[o][u][p],c,n)}throw new Error("geojson is invalid")}},29261:function(N,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(88553),w=e(64182);L.default=function(i,_){_===void 0&&(_={});var v=0,h=0,s=0;return T.coordEach(i,function(t){v+=t[0],h+=t[1],s++}),w.point([v/s,h/s],_.properties)}},64182:function(N,L){function e(l,o,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=o||{},p.geometry=l,p}function T(l,o,u){return u===void 0&&(u={}),e({type:"Point",coordinates:l},o,u)}function w(l,o,u){u===void 0&&(u={});for(var p=0,c=l;p<c.length;p++){var b=c[p];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<b[b.length-1].length;g++)if(b[b.length-1][g]!==b[0][g])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:l},o,u)}function i(l,o,u){if(u===void 0&&(u={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:l},o,u)}function _(l,o){o===void 0&&(o={});var u={type:"FeatureCollection"};return o.id&&(u.id=o.id),o.bbox&&(u.bbox=o.bbox),u.features=l,u}function v(l,o,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:l},o,u)}function h(l,o,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:l},o,u)}function s(l,o,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:l},o,u)}function t(l,o){o===void 0&&(o="kilometers");var u=L.factors[o];if(!u)throw new Error(o+" units is invalid");return l*u}function a(l,o){o===void 0&&(o="kilometers");var u=L.factors[o];if(!u)throw new Error(o+" units is invalid");return l/u}function n(l){return l%(2*Math.PI)*180/Math.PI}function r(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)&&!/^\s*$/.test(l)}Object.defineProperty(L,"__esModule",{value:!0}),L.earthRadius=63710088e-1,L.factors={centimeters:100*L.earthRadius,centimetres:100*L.earthRadius,degrees:L.earthRadius/111325,feet:3.28084*L.earthRadius,inches:39.37*L.earthRadius,kilometers:L.earthRadius/1e3,kilometres:L.earthRadius/1e3,meters:L.earthRadius,metres:L.earthRadius,miles:L.earthRadius/1609.344,millimeters:1e3*L.earthRadius,millimetres:1e3*L.earthRadius,nauticalmiles:L.earthRadius/1852,radians:1,yards:L.earthRadius/1.0936},L.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/L.earthRadius,yards:.91441111923921},L.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},L.feature=e,L.geometry=function(l,o,u){switch(l){case"Point":return T(o).geometry;case"LineString":return i(o).geometry;case"Polygon":return w(o).geometry;case"MultiPoint":return h(o).geometry;case"MultiLineString":return v(o).geometry;case"MultiPolygon":return s(o).geometry;default:throw new Error(l+" is invalid")}},L.point=T,L.points=function(l,o,u){return u===void 0&&(u={}),_(l.map(function(p){return T(p,o)}),u)},L.polygon=w,L.polygons=function(l,o,u){return u===void 0&&(u={}),_(l.map(function(p){return w(p,o)}),u)},L.lineString=i,L.lineStrings=function(l,o,u){return u===void 0&&(u={}),_(l.map(function(p){return i(p,o)}),u)},L.featureCollection=_,L.multiLineString=v,L.multiPoint=h,L.multiPolygon=s,L.geometryCollection=function(l,o,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:l},o,u)},L.round=function(l,o){if(o===void 0&&(o=0),o&&!(o>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,o||0);return Math.round(l*u)/u},L.radiansToLength=t,L.lengthToRadians=a,L.lengthToDegrees=function(l,o){return n(a(l,o))},L.bearingToAzimuth=function(l){var o=l%360;return o<0&&(o+=360),o},L.radiansToDegrees=n,L.degreesToRadians=function(l){return l%360*Math.PI/180},L.convertLength=function(l,o,u){if(o===void 0&&(o="kilometers"),u===void 0&&(u="kilometers"),!(l>=0))throw new Error("length must be a positive number");return t(a(l,o),u)},L.convertArea=function(l,o,u){if(o===void 0&&(o="meters"),u===void 0&&(u="kilometers"),!(l>=0))throw new Error("area must be a positive number");var p=L.areaFactors[o];if(!p)throw new Error("invalid original units");var c=L.areaFactors[u];if(!c)throw new Error("invalid final units");return l/p*c},L.isNumber=r,L.isObject=function(l){return!!l&&l.constructor===Object},L.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(o){if(!r(o))throw new Error("bbox must only contain numbers")})},L.validateId=function(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")},L.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},L.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},L.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},L.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},L.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},L.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},L.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function(N,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(64182);function w(a,n,r){if(a!==null)for(var l,o,u,p,c,b,g,d,m=0,x=0,y=a.type,k=y==="FeatureCollection",f=y==="Feature",S=k?a.features.length:1,M=0;M<S;M++){c=(d=!!(g=k?a.features[M].geometry:f?a.geometry:a)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var O=0,P=0;if((p=d?g.geometries[E]:g)!==null){b=p.coordinates;var I=p.type;switch(m=!r||I!=="Polygon"&&I!=="MultiPolygon"?0:1,I){case null:break;case"Point":if(n(b,x,M,O,P)===!1)return!1;x++,O++;break;case"LineString":case"MultiPoint":for(l=0;l<b.length;l++){if(n(b[l],x,M,O,P)===!1)return!1;x++,I==="MultiPoint"&&O++}I==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(l=0;l<b.length;l++){for(o=0;o<b[l].length-m;o++){if(n(b[l][o],x,M,O,P)===!1)return!1;x++}I==="MultiLineString"&&O++,I==="Polygon"&&P++}I==="Polygon"&&O++;break;case"MultiPolygon":for(l=0;l<b.length;l++){for(P=0,o=0;o<b[l].length;o++){for(u=0;u<b[l][o].length-m;u++){if(n(b[l][o][u],x,M,O,P)===!1)return!1;x++}P++}O++}break;case"GeometryCollection":for(l=0;l<p.geometries.length;l++)if(w(p.geometries[l],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(a,n){var r;switch(a.type){case"FeatureCollection":for(r=0;r<a.features.length&&n(a.features[r].properties,r)!==!1;r++);break;case"Feature":n(a.properties,0)}}function _(a,n){if(a.type==="Feature")n(a,0);else if(a.type==="FeatureCollection")for(var r=0;r<a.features.length&&n(a.features[r],r)!==!1;r++);}function v(a,n){var r,l,o,u,p,c,b,g,d,m,x=0,y=a.type==="FeatureCollection",k=a.type==="Feature",f=y?a.features.length:1;for(r=0;r<f;r++){for(c=y?a.features[r].geometry:k?a.geometry:a,g=y?a.features[r].properties:k?a.properties:{},d=y?a.features[r].bbox:k?a.bbox:void 0,m=y?a.features[r].id:k?a.id:void 0,p=(b=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,o=0;o<p;o++)if((u=b?c.geometries[o]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,x,g,d,m)===!1)return!1;break;case"GeometryCollection":for(l=0;l<u.geometries.length;l++)if(n(u.geometries[l],x,g,d,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,x,g,d,m)===!1)return!1;x++}}function h(a,n){v(a,function(r,l,o,u,p){var c,b=r===null?null:r.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return n(T.feature(r,o,{bbox:u,id:p}),l,0)!==!1&&void 0}switch(b){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<r.coordinates.length;g++){var d={type:c,coordinates:r.coordinates[g]};if(n(T.feature(d,o),l,g)===!1)return!1}})}function s(a,n){h(a,function(r,l,o){var u=0;if(r.geometry){var p=r.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,b=0,g=0,d=0;return w(r,function(m,x,y,k,f){if(c===void 0||l>b||k>g||f>d)return c=m,b=l,g=k,d=f,void(u=0);var S=T.lineString([c,m],r.properties);if(n(S,l,o,f,u)===!1)return!1;u++,c=m})!==!1&&void 0}}})}function t(a,n){if(!a)throw new Error("geojson is required");h(a,function(r,l,o){if(r.geometry!==null){var u=r.geometry.type,p=r.geometry.coordinates;switch(u){case"LineString":if(n(r,l,o,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(n(T.lineString(p[c],r.properties),l,o,c)===!1)return!1}}})}L.coordEach=w,L.coordReduce=function(a,n,r,l){var o=r;return w(a,function(u,p,c,b,g){o=p===0&&r===void 0?u:n(o,u,p,c,b,g)},l),o},L.propEach=i,L.propReduce=function(a,n,r){var l=r;return i(a,function(o,u){l=u===0&&r===void 0?o:n(l,o,u)}),l},L.featureEach=_,L.featureReduce=function(a,n,r){var l=r;return _(a,function(o,u){l=u===0&&r===void 0?o:n(l,o,u)}),l},L.coordAll=function(a){var n=[];return w(a,function(r){n.push(r)}),n},L.geomEach=v,L.geomReduce=function(a,n,r){var l=r;return v(a,function(o,u,p,c,b){l=u===0&&r===void 0?o:n(l,o,u,p,c,b)}),l},L.flattenEach=h,L.flattenReduce=function(a,n,r){var l=r;return h(a,function(o,u,p){l=u===0&&p===0&&r===void 0?o:n(l,o,u,p)}),l},L.segmentEach=s,L.segmentReduce=function(a,n,r){var l=r,o=!1;return s(a,function(u,p,c,b,g){l=o===!1&&r===void 0?u:n(l,u,p,c,b,g),o=!0}),l},L.lineEach=t,L.lineReduce=function(a,n,r){var l=r;return t(a,function(o,u,p,c){l=u===0&&r===void 0?o:n(l,o,u,p,c)}),l},L.findSegment=function(a,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,l=n.featureIndex||0,o=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.segmentIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),c=c||a.features[l].properties,r=a.features[l].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var b=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=b.length+p-1),T.lineString([b[p],b[p+1]],c,n);case"Polygon":return u<0&&(u=b.length+u),p<0&&(p=b[u].length+p-1),T.lineString([b[u][p],b[u][p+1]],c,n);case"MultiLineString":return o<0&&(o=b.length+o),p<0&&(p=b[o].length+p-1),T.lineString([b[o][p],b[o][p+1]],c,n);case"MultiPolygon":return o<0&&(o=b.length+o),u<0&&(u=b[o].length+u),p<0&&(p=b[o][u].length-p-1),T.lineString([b[o][u][p],b[o][u][p+1]],c,n)}throw new Error("geojson is invalid")},L.findPoint=function(a,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,l=n.featureIndex||0,o=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.coordIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),c=c||a.features[l].properties,r=a.features[l].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var b=r.coordinates;switch(r.type){case"Point":return T.point(b,c,n);case"MultiPoint":return o<0&&(o=b.length+o),T.point(b[o],c,n);case"LineString":return p<0&&(p=b.length+p),T.point(b[p],c,n);case"Polygon":return u<0&&(u=b.length+u),p<0&&(p=b[u].length+p),T.point(b[u][p],c,n);case"MultiLineString":return o<0&&(o=b.length+o),p<0&&(p=b[o].length+p),T.point(b[o][p],c,n);case"MultiPolygon":return o<0&&(o=b.length+o),u<0&&(u=b[o].length+u),p<0&&(p=b[o][u].length-p),T.point(b[o][u][p],c,n)}throw new Error("geojson is invalid")}},65185:function(N){N.exports=function(L){var e=0,T=0,w=0,i=0;return L.map(function(_){var v=(_=_.slice())[0],h=v.toUpperCase();if(v!=h)switch(_[0]=h,v){case"a":_[6]+=w,_[7]+=i;break;case"v":_[1]+=i;break;case"h":_[1]+=w;break;default:for(var s=1;s<_.length;)_[s++]+=w,_[s++]+=i}switch(h){case"Z":w=e,i=T;break;case"H":w=_[1];break;case"V":i=_[1];break;case"M":w=e=_[1],i=T=_[2];break;default:w=_[_.length-2],i=_[_.length-1]}return _})}},21527:function(N){N.exports=function(L,e){if(!L||L.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var T=Array(2*e),w=0;w<e;w++){for(var i=-1/0,_=1/0,v=w,h=L.length;v<h;v+=e)L[v]>i&&(i=L[v]),L[v]<_&&(_=L[v]);T[w]=_,T[e+w]=i}return T}},6851:function(N){N.exports=function(L,e,T){if(typeof Array.prototype.findIndex=="function")return L.findIndex(e,T);if(typeof e!="function")throw new TypeError("predicate must be a function");var w=Object(L),i=w.length;if(i===0)return-1;for(var _=0;_<i;_++)if(e.call(T,w[_],_,w))return _;return-1}},54:function(N,L,e){var T=e(21527);N.exports=function(w,i,_){if(!w||w.length==null)throw Error("Argument should be an array");i==null&&(i=1),_==null&&(_=T(w,i));for(var v=0;v<i;v++){var h=_[i+v],s=_[v],t=v,a=w.length;if(h===1/0&&s===-1/0)for(t=v;t<a;t+=i)w[t]=w[t]===h?1:w[t]===s?0:.5;else if(h===1/0)for(t=v;t<a;t+=i)w[t]=w[t]===h?1:0;else if(s===-1/0)for(t=v;t<a;t+=i)w[t]=w[t]===s?0:1;else{var n=h-s;for(t=v;t<a;t+=i)isNaN(w[t])||(w[t]=n===0?.5:(w[t]-s)/n)}}return w}},57471:function(N){N.exports=function(L,e){var T=typeof L=="number",w=typeof e=="number";T&&!w?(e=L,L=0):T||w||(L=0,e=0);var i=(e|=0)-(L|=0);if(i<0)throw new Error("array length must be positive");for(var _=new Array(i),v=0,h=L;v<i;v++,h++)_[v]=h;return _}},32791:function(N,L,e){var T=e(90386);function w(R){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},w(R)}var i,_,v=e(79616).codes,h=v.ERR_AMBIGUOUS_ARGUMENT,s=v.ERR_INVALID_ARG_TYPE,t=v.ERR_INVALID_ARG_VALUE,a=v.ERR_INVALID_RETURN_VALUE,n=v.ERR_MISSING_ARGS,r=e(73894),l=e(43827).inspect,o=e(43827).types,u=o.isPromise,p=o.isRegExp,c=Object.assign?Object.assign:e(73523).assign,b=Object.is?Object.is:e(64003);function g(){var R=e(74061);i=R.isDeepEqual,_=R.isDeepStrictEqual}var d=!1,m=N.exports=f,x={};function y(R){throw R.message instanceof Error?R.message:new r(R)}function k(R,j,Z,F){if(!Z){var V=!1;if(j===0)V=!0,F="No value argument passed to `assert.ok()`";else if(F instanceof Error)throw F;var H=new r({actual:Z,expected:!0,message:F,operator:"==",stackStartFn:R});throw H.generatedMessage=V,H}}function f(){for(var R=arguments.length,j=new Array(R),Z=0;Z<R;Z++)j[Z]=arguments[Z];k.apply(void 0,[f,j.length].concat(j))}m.fail=function R(j,Z,F,V,H){var te,$=arguments.length;if($===0?te="Failed":$===1?(F=j,j=void 0):(d===!1&&(d=!0,(T.emitWarning?T.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),$===2&&(V="!=")),F instanceof Error)throw F;var J={actual:j,expected:Z,operator:V===void 0?"fail":V,stackStartFn:H||R};F!==void 0&&(J.message=F);var X=new r(J);throw te&&(X.message=te,X.generatedMessage=!0),X},m.AssertionError=r,m.ok=f,m.equal=function R(j,Z,F){if(arguments.length<2)throw new n("actual","expected");j!=Z&&y({actual:j,expected:Z,message:F,operator:"==",stackStartFn:R})},m.notEqual=function R(j,Z,F){if(arguments.length<2)throw new n("actual","expected");j==Z&&y({actual:j,expected:Z,message:F,operator:"!=",stackStartFn:R})},m.deepEqual=function R(j,Z,F){if(arguments.length<2)throw new n("actual","expected");i===void 0&&g(),i(j,Z)||y({actual:j,expected:Z,message:F,operator:"deepEqual",stackStartFn:R})},m.notDeepEqual=function R(j,Z,F){if(arguments.length<2)throw new n("actual","expected");i===void 0&&g(),i(j,Z)&&y({actual:j,expected:Z,message:F,operator:"notDeepEqual",stackStartFn:R})},m.deepStrictEqual=function R(j,Z,F){if(arguments.length<2)throw new n("actual","expected");i===void 0&&g(),_(j,Z)||y({actual:j,expected:Z,message:F,operator:"deepStrictEqual",stackStartFn:R})},m.notDeepStrictEqual=function R(j,Z,F){if(arguments.length<2)throw new n("actual","expected");i===void 0&&g(),_(j,Z)&&y({actual:j,expected:Z,message:F,operator:"notDeepStrictEqual",stackStartFn:R})},m.strictEqual=function R(j,Z,F){if(arguments.length<2)throw new n("actual","expected");b(j,Z)||y({actual:j,expected:Z,message:F,operator:"strictEqual",stackStartFn:R})},m.notStrictEqual=function R(j,Z,F){if(arguments.length<2)throw new n("actual","expected");b(j,Z)&&y({actual:j,expected:Z,message:F,operator:"notStrictEqual",stackStartFn:R})};var S=function R(j,Z,F){var V=this;(function(H,te){if(!(H instanceof te))throw new TypeError("Cannot call a class as a function")})(this,R),Z.forEach(function(H){H in j&&(F!==void 0&&typeof F[H]=="string"&&p(j[H])&&j[H].test(F[H])?V[H]=F[H]:V[H]=j[H])})};function M(R,j,Z,F){if(typeof j!="function"){if(p(j))return j.test(R);if(arguments.length===2)throw new s("expected",["Function","RegExp"],j);if(w(R)!=="object"||R===null){var V=new r({actual:R,expected:j,message:Z,operator:"deepStrictEqual",stackStartFn:F});throw V.operator=F.name,V}var H=Object.keys(j);if(j instanceof Error)H.push("name","message");else if(H.length===0)throw new t("error",j,"may not be an empty object");return i===void 0&&g(),H.forEach(function(te){typeof R[te]=="string"&&p(j[te])&&j[te].test(R[te])||function($,J,X,K,ee,ie){if(!(X in $)||!_($[X],J[X])){if(!K){var ae=new S($,ee),oe=new S(J,ee,$),fe=new r({actual:ae,expected:oe,operator:"deepStrictEqual",stackStartFn:ie});throw fe.actual=$,fe.expected=J,fe.operator=ie.name,fe}y({actual:$,expected:J,message:K,operator:ie.name,stackStartFn:ie})}}(R,j,te,Z,H,F)}),!0}return j.prototype!==void 0&&R instanceof j||!Error.isPrototypeOf(j)&&j.call({},R)===!0}function E(R){if(typeof R!="function")throw new s("fn","Function",R);try{R()}catch(j){return j}return x}function O(R){return u(R)||R!==null&&w(R)==="object"&&typeof R.then=="function"&&typeof R.catch=="function"}function P(R){return Promise.resolve().then(function(){var j;if(typeof R=="function"){if(!O(j=R()))throw new a("instance of Promise","promiseFn",j)}else{if(!O(R))throw new s("promiseFn",["Function","Promise"],R);j=R}return Promise.resolve().then(function(){return j}).then(function(){return x}).catch(function(Z){return Z})})}function I(R,j,Z,F){if(typeof Z=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],Z);if(w(j)==="object"&&j!==null){if(j.message===Z)throw new h("error/message",'The error message "'.concat(j.message,'" is identical to the message.'))}else if(j===Z)throw new h("error/message",'The error "'.concat(j,'" is identical to the message.'));F=Z,Z=void 0}else if(Z!=null&&w(Z)!=="object"&&typeof Z!="function")throw new s("error",["Object","Error","Function","RegExp"],Z);if(j===x){var V="";Z&&Z.name&&(V+=" (".concat(Z.name,")")),V+=F?": ".concat(F):".";var H=R.name==="rejects"?"rejection":"exception";y({actual:void 0,expected:Z,operator:R.name,message:"Missing expected ".concat(H).concat(V),stackStartFn:R})}if(Z&&!M(j,Z,F,R))throw j}function z(R,j,Z,F){if(j!==x){if(typeof Z=="string"&&(F=Z,Z=void 0),!Z||M(j,Z)){var V=F?": ".concat(F):".",H=R.name==="doesNotReject"?"rejection":"exception";y({actual:j,expected:Z,operator:R.name,message:"Got unwanted ".concat(H).concat(V,`
`)+'Actual message: "'.concat(j&&j.message,'"'),stackStartFn:R})}throw j}}function U(){for(var R=arguments.length,j=new Array(R),Z=0;Z<R;Z++)j[Z]=arguments[Z];k.apply(void 0,[U,j.length].concat(j))}m.throws=function R(j){for(var Z=arguments.length,F=new Array(Z>1?Z-1:0),V=1;V<Z;V++)F[V-1]=arguments[V];I.apply(void 0,[R,E(j)].concat(F))},m.rejects=function R(j){for(var Z=arguments.length,F=new Array(Z>1?Z-1:0),V=1;V<Z;V++)F[V-1]=arguments[V];return P(j).then(function(H){return I.apply(void 0,[R,H].concat(F))})},m.doesNotThrow=function R(j){for(var Z=arguments.length,F=new Array(Z>1?Z-1:0),V=1;V<Z;V++)F[V-1]=arguments[V];z.apply(void 0,[R,E(j)].concat(F))},m.doesNotReject=function R(j){for(var Z=arguments.length,F=new Array(Z>1?Z-1:0),V=1;V<Z;V++)F[V-1]=arguments[V];return P(j).then(function(H){return z.apply(void 0,[R,H].concat(F))})},m.ifError=function R(j){if(j!=null){var Z="ifError got unwanted exception: ";w(j)==="object"&&typeof j.message=="string"?j.message.length===0&&j.constructor?Z+=j.constructor.name:Z+=j.message:Z+=l(j);var F=new r({actual:j,expected:null,operator:"ifError",message:Z,stackStartFn:R}),V=j.stack;if(typeof V=="string"){var H=V.split(`
`);H.shift();for(var te=F.stack.split(`
`),$=0;$<H.length;$++){var J=te.indexOf(H[$]);if(J!==-1){te=te.slice(0,J);break}}F.stack="".concat(te.join(`
`),`
`).concat(H.join(`
`))}throw F}},m.strict=c(U,m,{equal:m.strictEqual,deepEqual:m.deepStrictEqual,notEqual:m.notStrictEqual,notDeepEqual:m.notDeepStrictEqual}),m.strict.strict=m.strict},73894:function(N,L,e){var T=e(90386);function w(y,k,f){return k in y?Object.defineProperty(y,k,{value:f,enumerable:!0,configurable:!0,writable:!0}):y[k]=f,y}function i(y,k){for(var f=0;f<k.length;f++){var S=k[f];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}function _(y,k){return!k||n(k)!=="object"&&typeof k!="function"?v(y):k}function v(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function h(y){var k=typeof Map=="function"?new Map:void 0;return h=function(f){if(f===null||(S=f,Function.toString.call(S).indexOf("[native code]")===-1))return f;var S;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(k!==void 0){if(k.has(f))return k.get(f);k.set(f,M)}function M(){return s(f,arguments,a(this).constructor)}return M.prototype=Object.create(f.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),t(M,f)},h(y)}function s(y,k,f){return s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,M,E){var O=[null];O.push.apply(O,M);var P=new(Function.bind.apply(S,O));return E&&t(P,E.prototype),P},s.apply(null,arguments)}function t(y,k){return t=Object.setPrototypeOf||function(f,S){return f.__proto__=S,f},t(y,k)}function a(y){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},a(y)}function n(y){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},n(y)}var r=e(43827).inspect,l=e(79616).codes.ERR_INVALID_ARG_TYPE;function o(y,k,f){return(f===void 0||f>y.length)&&(f=y.length),y.substring(f-k.length,f)===k}var u="",p="",c="",b="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function d(y){var k=Object.keys(y),f=Object.create(Object.getPrototypeOf(y));return k.forEach(function(S){f[S]=y[S]}),Object.defineProperty(f,"message",{value:y.message}),f}function m(y){return r(y,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var x=function(y){function k(M){var E;if(function(te,$){if(!(te instanceof $))throw new TypeError("Cannot call a class as a function")}(this,k),n(M)!=="object"||M===null)throw new l("options","Object",M);var O=M.message,P=M.operator,I=M.stackStartFn,z=M.actual,U=M.expected,R=Error.stackTraceLimit;if(Error.stackTraceLimit=0,O!=null)E=_(this,a(k).call(this,String(O)));else if(T.stderr&&T.stderr.isTTY&&(T.stderr&&T.stderr.getColorDepth&&T.stderr.getColorDepth()!==1?(u="\x1B[34m",p="\x1B[32m",b="\x1B[39m",c="\x1B[31m"):(u="",p="",b="",c="")),n(z)==="object"&&z!==null&&n(U)==="object"&&U!==null&&"stack"in z&&z instanceof Error&&"stack"in U&&U instanceof Error&&(z=d(z),U=d(U)),P==="deepStrictEqual"||P==="strictEqual")E=_(this,a(k).call(this,function(te,$,J){var X="",K="",ee=0,ie="",ae=!1,oe=m(te),fe=oe.split(`
`),ge=m($).split(`
`),ve=0,xe="";if(J==="strictEqual"&&n(te)==="object"&&n($)==="object"&&te!==null&&$!==null&&(J="strictEqualObject"),fe.length===1&&ge.length===1&&fe[0]!==ge[0]){var _e=fe[0].length+ge[0].length;if(_e<=10){if(!(n(te)==="object"&&te!==null||n($)==="object"&&$!==null||te===0&&$===0))return"".concat(g[J],`

`)+"".concat(fe[0]," !== ").concat(ge[0],`
`)}else if(J!=="strictEqualObject"&&_e<(T.stderr&&T.stderr.isTTY?T.stderr.columns:80)){for(;fe[0][ve]===ge[0][ve];)ve++;ve>2&&(xe=`
  `.concat(function(Fe,pe){if(pe=Math.floor(pe),Fe.length==0||pe==0)return"";var be=Fe.length*pe;for(pe=Math.floor(Math.log(pe)/Math.log(2));pe;)Fe+=Fe,pe--;return Fe+Fe.substring(0,be-Fe.length)}(" ",ve),"^"),ve=0)}}for(var ye=fe[fe.length-1],Ce=ge[ge.length-1];ye===Ce&&(ve++<2?ie=`
  `.concat(ye).concat(ie):X=ye,fe.pop(),ge.pop(),fe.length!==0&&ge.length!==0);)ye=fe[fe.length-1],Ce=ge[ge.length-1];var ke=Math.max(fe.length,ge.length);if(ke===0){var Te=oe.split(`
`);if(Te.length>30)for(Te[26]="".concat(u,"...").concat(b);Te.length>27;)Te.pop();return"".concat(g.notIdentical,`

`).concat(Te.join(`
`),`
`)}ve>3&&(ie=`
`.concat(u,"...").concat(b).concat(ie),ae=!0),X!==""&&(ie=`
  `.concat(X).concat(ie),X="");var le=0,ue=g[J]+`
`.concat(p,"+ actual").concat(b," ").concat(c,"- expected").concat(b),de=" ".concat(u,"...").concat(b," Lines skipped");for(ve=0;ve<ke;ve++){var Le=ve-ee;if(fe.length<ve+1)Le>1&&ve>2&&(Le>4?(K+=`
`.concat(u,"...").concat(b),ae=!0):Le>3&&(K+=`
  `.concat(ge[ve-2]),le++),K+=`
  `.concat(ge[ve-1]),le++),ee=ve,X+=`
`.concat(c,"-").concat(b," ").concat(ge[ve]),le++;else if(ge.length<ve+1)Le>1&&ve>2&&(Le>4?(K+=`
`.concat(u,"...").concat(b),ae=!0):Le>3&&(K+=`
  `.concat(fe[ve-2]),le++),K+=`
  `.concat(fe[ve-1]),le++),ee=ve,K+=`
`.concat(p,"+").concat(b," ").concat(fe[ve]),le++;else{var we=ge[ve],Ee=fe[ve],Oe=Ee!==we&&(!o(Ee,",")||Ee.slice(0,-1)!==we);Oe&&o(we,",")&&we.slice(0,-1)===Ee&&(Oe=!1,Ee+=","),Oe?(Le>1&&ve>2&&(Le>4?(K+=`
`.concat(u,"...").concat(b),ae=!0):Le>3&&(K+=`
  `.concat(fe[ve-2]),le++),K+=`
  `.concat(fe[ve-1]),le++),ee=ve,K+=`
`.concat(p,"+").concat(b," ").concat(Ee),X+=`
`.concat(c,"-").concat(b," ").concat(we),le+=2):(K+=X,X="",Le!==1&&ve!==0||(K+=`
  `.concat(Ee),le++))}if(le>20&&ve<ke-2)return"".concat(ue).concat(de,`
`).concat(K,`
`).concat(u,"...").concat(b).concat(X,`
`)+"".concat(u,"...").concat(b)}return"".concat(ue).concat(ae?de:"",`
`).concat(K).concat(X).concat(ie).concat(xe)}(z,U,P)));else if(P==="notDeepStrictEqual"||P==="notStrictEqual"){var j=g[P],Z=m(z).split(`
`);if(P==="notStrictEqual"&&n(z)==="object"&&z!==null&&(j=g.notStrictEqualObject),Z.length>30)for(Z[26]="".concat(u,"...").concat(b);Z.length>27;)Z.pop();E=Z.length===1?_(this,a(k).call(this,"".concat(j," ").concat(Z[0]))):_(this,a(k).call(this,"".concat(j,`

`).concat(Z.join(`
`),`
`)))}else{var F=m(z),V="",H=g[P];P==="notDeepEqual"||P==="notEqual"?(F="".concat(g[P],`

`).concat(F)).length>1024&&(F="".concat(F.slice(0,1021),"...")):(V="".concat(m(U)),F.length>512&&(F="".concat(F.slice(0,509),"...")),V.length>512&&(V="".concat(V.slice(0,509),"...")),P==="deepEqual"||P==="equal"?F="".concat(H,`

`).concat(F,`

should equal

`):V=" ".concat(P," ").concat(V)),E=_(this,a(k).call(this,"".concat(F).concat(V)))}return Error.stackTraceLimit=R,E.generatedMessage=!O,Object.defineProperty(v(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=z,E.expected=U,E.operator=P,Error.captureStackTrace&&Error.captureStackTrace(v(E),I),E.stack,E.name="AssertionError",_(E)}var f,S;return function(M,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(E&&E.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),E&&t(M,E)}(k,y),f=k,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:r.custom,value:function(M,E){return r(this,function(O){for(var P=1;P<arguments.length;P++){var I=arguments[P]!=null?arguments[P]:{},z=Object.keys(I);typeof Object.getOwnPropertySymbols=="function"&&(z=z.concat(Object.getOwnPropertySymbols(I).filter(function(U){return Object.getOwnPropertyDescriptor(I,U).enumerable}))),z.forEach(function(U){w(O,U,I[U])})}return O}({},E,{customInspect:!1,depth:0}))}}],S&&i(f.prototype,S),k}(h(Error));N.exports=x},79616:function(N,L,e){function T(a){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},T(a)}function w(a){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},w(a)}function i(a,n){return i=Object.setPrototypeOf||function(r,l){return r.__proto__=l,r},i(a,n)}var _,v,h={};function s(a,n,r){r||(r=Error);var l=function(o){function u(p,c,b){var g;return function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,u),g=function(d,m){return!m||T(m)!=="object"&&typeof m!="function"?function(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(d):m}(this,w(u).call(this,function(d,m,x){return typeof n=="string"?n:n(d,m,x)}(p,c,b))),g.code=a,g}return function(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(c&&c.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),c&&i(p,c)}(u,o),u}(r);h[a]=l}function t(a,n){if(Array.isArray(a)){var r=a.length;return a=a.map(function(l){return String(l)}),r>2?"one of ".concat(n," ").concat(a.slice(0,r-1).join(", "),", or ")+a[r-1]:r===2?"one of ".concat(n," ").concat(a[0]," or ").concat(a[1]):"of ".concat(n," ").concat(a[0])}return"of ".concat(n," ").concat(String(a))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(a,n,r){var l,o,u,p,c;if(_===void 0&&(_=e(32791)),_(typeof a=="string","'name' must be a string"),typeof n=="string"&&(o="not ",n.substr(0,4)===o)?(l="must not be",n=n.replace(/^not /,"")):l="must be",function(g,d,m){return(m===void 0||m>g.length)&&(m=g.length),g.substring(m-9,m)===d}(a," argument"))u="The ".concat(a," ").concat(l," ").concat(t(n,"type"));else{var b=(typeof c!="number"&&(c=0),c+1>(p=a).length||p.indexOf(".",c)===-1?"argument":"property");u='The "'.concat(a,'" ').concat(b," ").concat(l," ").concat(t(n,"type"))}return u+". Received type ".concat(T(r))},TypeError),s("ERR_INVALID_ARG_VALUE",function(a,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";v===void 0&&(v=e(43827));var l=v.inspect(n);return l.length>128&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(a,"' ").concat(r,". Received ").concat(l)},TypeError),s("ERR_INVALID_RETURN_VALUE",function(a,n,r){var l;return l=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(T(r)),"Expected ".concat(a,' to be returned from the "').concat(n,'"')+" function but got ".concat(l,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];_===void 0&&(_=e(32791)),_(n.length>0,"At least one arg needs to be specified");var l="The ",o=n.length;switch(n=n.map(function(u){return'"'.concat(u,'"')}),o){case 1:l+="".concat(n[0]," argument");break;case 2:l+="".concat(n[0]," and ").concat(n[1]," arguments");break;default:l+=n.slice(0,o-1).join(", "),l+=", and ".concat(n[o-1]," arguments")}return"".concat(l," must be specified")},TypeError),N.exports.codes=h},74061:function(N,L,e){function T(ee,ie){return function(ae){if(Array.isArray(ae))return ae}(ee)||function(ae,oe){var fe=[],ge=!0,ve=!1,xe=void 0;try{for(var _e,ye=ae[Symbol.iterator]();!(ge=(_e=ye.next()).done)&&(fe.push(_e.value),!oe||fe.length!==oe);ge=!0);}catch(Ce){ve=!0,xe=Ce}finally{try{ge||ye.return==null||ye.return()}finally{if(ve)throw xe}}return fe}(ee,ie)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(ee){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},w(ee)}var i=/a/g.flags!==void 0,_=function(ee){var ie=[];return ee.forEach(function(ae){return ie.push(ae)}),ie},v=function(ee){var ie=[];return ee.forEach(function(ae,oe){return ie.push([oe,ae])}),ie},h=Object.is?Object.is:e(64003),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(15567);function a(ee){return ee.call.bind(ee)}var n=a(Object.prototype.hasOwnProperty),r=a(Object.prototype.propertyIsEnumerable),l=a(Object.prototype.toString),o=e(43827).types,u=o.isAnyArrayBuffer,p=o.isArrayBufferView,c=o.isDate,b=o.isMap,g=o.isRegExp,d=o.isSet,m=o.isNativeError,x=o.isBoxedPrimitive,y=o.isNumberObject,k=o.isStringObject,f=o.isBooleanObject,S=o.isBigIntObject,M=o.isSymbolObject,E=o.isFloat32Array,O=o.isFloat64Array;function P(ee){if(ee.length===0||ee.length>10)return!0;for(var ie=0;ie<ee.length;ie++){var ae=ee.charCodeAt(ie);if(ae<48||ae>57)return!0}return ee.length===10&&ee>=Math.pow(2,32)}function I(ee){return Object.keys(ee).filter(P).concat(s(ee).filter(Object.prototype.propertyIsEnumerable.bind(ee)))}function z(ee,ie){if(ee===ie)return 0;for(var ae=ee.length,oe=ie.length,fe=0,ge=Math.min(ae,oe);fe<ge;++fe)if(ee[fe]!==ie[fe]){ae=ee[fe],oe=ie[fe];break}return ae<oe?-1:oe<ae?1:0}var U=0,R=1,j=2,Z=3;function F(ee,ie,ae,oe){if(ee===ie)return ee!==0||!ae||h(ee,ie);if(ae){if(w(ee)!=="object")return typeof ee=="number"&&t(ee)&&t(ie);if(w(ie)!=="object"||ee===null||ie===null||Object.getPrototypeOf(ee)!==Object.getPrototypeOf(ie))return!1}else{if(ee===null||w(ee)!=="object")return(ie===null||w(ie)!=="object")&&ee==ie;if(ie===null||w(ie)!=="object")return!1}var fe,ge,ve,xe,_e=l(ee);if(_e!==l(ie))return!1;if(Array.isArray(ee)){if(ee.length!==ie.length)return!1;var ye=I(ee),Ce=I(ie);return ye.length===Ce.length&&H(ee,ie,ae,oe,R,ye)}if(_e==="[object Object]"&&(!b(ee)&&b(ie)||!d(ee)&&d(ie)))return!1;if(c(ee)){if(!c(ie)||Date.prototype.getTime.call(ee)!==Date.prototype.getTime.call(ie))return!1}else if(g(ee)){if(!g(ie)||(ve=ee,xe=ie,!(i?ve.source===xe.source&&ve.flags===xe.flags:RegExp.prototype.toString.call(ve)===RegExp.prototype.toString.call(xe))))return!1}else if(m(ee)||ee instanceof Error){if(ee.message!==ie.message||ee.name!==ie.name)return!1}else{if(p(ee)){if(ae||!E(ee)&&!O(ee)){if(!function(le,ue){return le.byteLength===ue.byteLength&&z(new Uint8Array(le.buffer,le.byteOffset,le.byteLength),new Uint8Array(ue.buffer,ue.byteOffset,ue.byteLength))===0}(ee,ie))return!1}else if(!function(le,ue){if(le.byteLength!==ue.byteLength)return!1;for(var de=0;de<le.byteLength;de++)if(le[de]!==ue[de])return!1;return!0}(ee,ie))return!1;var ke=I(ee),Te=I(ie);return ke.length===Te.length&&H(ee,ie,ae,oe,U,ke)}if(d(ee))return!(!d(ie)||ee.size!==ie.size)&&H(ee,ie,ae,oe,j);if(b(ee))return!(!b(ie)||ee.size!==ie.size)&&H(ee,ie,ae,oe,Z);if(u(ee)){if(ge=ie,(fe=ee).byteLength!==ge.byteLength||z(new Uint8Array(fe),new Uint8Array(ge))!==0)return!1}else if(x(ee)&&!function(le,ue){return y(le)?y(ue)&&h(Number.prototype.valueOf.call(le),Number.prototype.valueOf.call(ue)):k(le)?k(ue)&&String.prototype.valueOf.call(le)===String.prototype.valueOf.call(ue):f(le)?f(ue)&&Boolean.prototype.valueOf.call(le)===Boolean.prototype.valueOf.call(ue):S(le)?S(ue)&&BigInt.prototype.valueOf.call(le)===BigInt.prototype.valueOf.call(ue):M(ue)&&Symbol.prototype.valueOf.call(le)===Symbol.prototype.valueOf.call(ue)}(ee,ie))return!1}return H(ee,ie,ae,oe,U)}function V(ee,ie){return ie.filter(function(ae){return r(ee,ae)})}function H(ee,ie,ae,oe,fe,ge){if(arguments.length===5){ge=Object.keys(ee);var ve=Object.keys(ie);if(ge.length!==ve.length)return!1}for(var xe=0;xe<ge.length;xe++)if(!n(ie,ge[xe]))return!1;if(ae&&arguments.length===5){var _e=s(ee);if(_e.length!==0){var ye=0;for(xe=0;xe<_e.length;xe++){var Ce=_e[xe];if(r(ee,Ce)){if(!r(ie,Ce))return!1;ge.push(Ce),ye++}else if(r(ie,Ce))return!1}var ke=s(ie);if(_e.length!==ke.length&&V(ie,ke).length!==ye)return!1}else{var Te=s(ie);if(Te.length!==0&&V(ie,Te).length!==0)return!1}}if(ge.length===0&&(fe===U||fe===R&&ee.length===0||ee.size===0))return!0;if(oe===void 0)oe={val1:new Map,val2:new Map,position:0};else{var le=oe.val1.get(ee);if(le!==void 0){var ue=oe.val2.get(ie);if(ue!==void 0)return le===ue}oe.position++}oe.val1.set(ee,oe.position),oe.val2.set(ie,oe.position);var de=function(Le,we,Ee,Oe,Fe,pe){var be=0;if(pe===j){if(!function(Be,Ye,We,et){for(var ft=null,ht=_(Be),mt=0;mt<ht.length;mt++){var Mt=ht[mt];if(w(Mt)==="object"&&Mt!==null)ft===null&&(ft=new Set),ft.add(Mt);else if(!Ye.has(Mt)){if(We||!J(Be,Ye,Mt))return!1;ft===null&&(ft=new Set),ft.add(Mt)}}if(ft!==null){for(var _t=_(Ye),it=0;it<_t.length;it++){var st=_t[it];if(w(st)==="object"&&st!==null){if(!te(ft,st,We,et))return!1}else if(!We&&!Be.has(st)&&!te(ft,st,We,et))return!1}return ft.size===0}return!0}(Le,we,Ee,Fe))return!1}else if(pe===Z){if(!function(Be,Ye,We,et){for(var ft=null,ht=v(Be),mt=0;mt<ht.length;mt++){var Mt=T(ht[mt],2),_t=Mt[0],it=Mt[1];if(w(_t)==="object"&&_t!==null)ft===null&&(ft=new Set),ft.add(_t);else{var st=Ye.get(_t);if(st===void 0&&!Ye.has(_t)||!F(it,st,We,et)){if(We||!X(Be,Ye,_t,it,et))return!1;ft===null&&(ft=new Set),ft.add(_t)}}}if(ft!==null){for(var St=v(Ye),zt=0;zt<St.length;zt++){var Ft=T(St[zt],2),Pt=(_t=Ft[0],Ft[1]);if(w(_t)==="object"&&_t!==null){if(!K(ft,Be,_t,Pt,We,et))return!1}else if(!(We||Be.has(_t)&&F(Be.get(_t),Pt,!1,et)||K(ft,Be,_t,Pt,!1,et)))return!1}return ft.size===0}return!0}(Le,we,Ee,Fe))return!1}else if(pe===R)for(;be<Le.length;be++){if(!n(Le,be)){if(n(we,be))return!1;for(var Me=Object.keys(Le);be<Me.length;be++){var De=Me[be];if(!n(we,De)||!F(Le[De],we[De],Ee,Fe))return!1}return Me.length===Object.keys(we).length}if(!n(we,be)||!F(Le[be],we[be],Ee,Fe))return!1}for(be=0;be<Oe.length;be++){var Ne=Oe[be];if(!F(Le[Ne],we[Ne],Ee,Fe))return!1}return!0}(ee,ie,ae,ge,oe,fe);return oe.val1.delete(ee),oe.val2.delete(ie),de}function te(ee,ie,ae,oe){for(var fe=_(ee),ge=0;ge<fe.length;ge++){var ve=fe[ge];if(F(ie,ve,ae,oe))return ee.delete(ve),!0}return!1}function $(ee){switch(w(ee)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":ee=+ee;case"number":if(t(ee))return!1}return!0}function J(ee,ie,ae){var oe=$(ae);return oe??(ie.has(oe)&&!ee.has(oe))}function X(ee,ie,ae,oe,fe){var ge=$(ae);if(ge!=null)return ge;var ve=ie.get(ge);return!(ve===void 0&&!ie.has(ge)||!F(oe,ve,!1,fe))&&!ee.has(ge)&&F(oe,ve,!1,fe)}function K(ee,ie,ae,oe,fe,ge){for(var ve=_(ee),xe=0;xe<ve.length;xe++){var _e=ve[xe];if(F(ae,_e,fe,ge)&&F(oe,ie.get(_e),fe,ge))return ee.delete(_e),!0}return!1}N.exports={isDeepEqual:function(ee,ie){return F(ee,ie,!1)},isDeepStrictEqual:function(ee,ie){return F(ee,ie,!0)}}},11631:function(N,L,e){e.r(L),e.d(L,{decode:function(){return v},encode:function(){return _}});for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=typeof Uint8Array>"u"?[]:new Uint8Array(256),i=0;i<64;i++)w[T.charCodeAt(i)]=i;var _=function(h){var s,t=new Uint8Array(h),a=t.length,n="";for(s=0;s<a;s+=3)n+=T[t[s]>>2],n+=T[(3&t[s])<<4|t[s+1]>>4],n+=T[(15&t[s+1])<<2|t[s+2]>>6],n+=T[63&t[s+2]];return a%3==2?n=n.substring(0,n.length-1)+"=":a%3==1&&(n=n.substring(0,n.length-2)+"=="),n},v=function(h){var s,t,a,n,r,l=.75*h.length,o=h.length,u=0;h[h.length-1]==="="&&(l--,h[h.length-2]==="="&&l--);var p=new ArrayBuffer(l),c=new Uint8Array(p);for(s=0;s<o;s+=4)t=w[h.charCodeAt(s)],a=w[h.charCodeAt(s+1)],n=w[h.charCodeAt(s+2)],r=w[h.charCodeAt(s+3)],c[u++]=t<<2|a>>4,c[u++]=(15&a)<<4|n>>2,c[u++]=(3&n)<<6|63&r;return p}},95341:function(N,L){L.byteLength=function(s){var t=v(s),a=t[0],n=t[1];return 3*(a+n)/4-n},L.toByteArray=function(s){var t,a,n=v(s),r=n[0],l=n[1],o=new w(function(c,b,g){return 3*(b+g)/4-g}(0,r,l)),u=0,p=l>0?r-4:r;for(a=0;a<p;a+=4)t=T[s.charCodeAt(a)]<<18|T[s.charCodeAt(a+1)]<<12|T[s.charCodeAt(a+2)]<<6|T[s.charCodeAt(a+3)],o[u++]=t>>16&255,o[u++]=t>>8&255,o[u++]=255&t;return l===2&&(t=T[s.charCodeAt(a)]<<2|T[s.charCodeAt(a+1)]>>4,o[u++]=255&t),l===1&&(t=T[s.charCodeAt(a)]<<10|T[s.charCodeAt(a+1)]<<4|T[s.charCodeAt(a+2)]>>2,o[u++]=t>>8&255,o[u++]=255&t),o},L.fromByteArray=function(s){for(var t,a=s.length,n=a%3,r=[],l=16383,o=0,u=a-n;o<u;o+=l)r.push(h(s,o,o+l>u?u:o+l));return n===1?(t=s[a-1],r.push(e[t>>2]+e[t<<4&63]+"==")):n===2&&(t=(s[a-2]<<8)+s[a-1],r.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),r.join("")};for(var e=[],T=[],w=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0;_<64;++_)e[_]=i[_],T[i.charCodeAt(_)]=_;function v(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=s.indexOf("=");return a===-1&&(a=t),[a,a===t?0:4-a%4]}function h(s,t,a){for(var n,r,l=[],o=t;o<a;o+=3)n=(s[o]<<16&16711680)+(s[o+1]<<8&65280)+(255&s[o+2]),l.push(e[(r=n)>>18&63]+e[r>>12&63]+e[r>>6&63]+e[63&r]);return l.join("")}T["-".charCodeAt(0)]=62,T["_".charCodeAt(0)]=63},91358:function(N){function L(v,h,s,t,a){for(var n=a+1;t<=a;){var r=t+a>>>1,l=v[r];(s!==void 0?s(l,h):l-h)>=0?(n=r,a=r-1):t=r+1}return n}function e(v,h,s,t,a){for(var n=a+1;t<=a;){var r=t+a>>>1,l=v[r];(s!==void 0?s(l,h):l-h)>0?(n=r,a=r-1):t=r+1}return n}function T(v,h,s,t,a){for(var n=t-1;t<=a;){var r=t+a>>>1,l=v[r];(s!==void 0?s(l,h):l-h)<0?(n=r,t=r+1):a=r-1}return n}function w(v,h,s,t,a){for(var n=t-1;t<=a;){var r=t+a>>>1,l=v[r];(s!==void 0?s(l,h):l-h)<=0?(n=r,t=r+1):a=r-1}return n}function i(v,h,s,t,a){for(;t<=a;){var n=t+a>>>1,r=v[n],l=s!==void 0?s(r,h):r-h;if(l===0)return n;l<=0?t=n+1:a=n-1}return-1}function _(v,h,s,t,a,n){return typeof s=="function"?n(v,h,s,t===void 0?0:0|t,a===void 0?v.length-1:0|a):n(v,h,void 0,s===void 0?0:0|s,t===void 0?v.length-1:0|t)}N.exports={ge:function(v,h,s,t,a){return _(v,h,s,t,a,L)},gt:function(v,h,s,t,a){return _(v,h,s,t,a,e)},lt:function(v,h,s,t,a){return _(v,h,s,t,a,T)},le:function(v,h,s,t,a){return _(v,h,s,t,a,w)},eq:function(v,h,s,t,a){return _(v,h,s,t,a,i)}}},13547:function(N,L){function e(w){var i=32;return(w&=-w)&&i--,65535&w&&(i-=16),16711935&w&&(i-=8),252645135&w&&(i-=4),858993459&w&&(i-=2),1431655765&w&&(i-=1),i}L.INT_BITS=32,L.INT_MAX=2147483647,L.INT_MIN=-2147483648,L.sign=function(w){return(w>0)-(w<0)},L.abs=function(w){var i=w>>31;return(w^i)-i},L.min=function(w,i){return i^(w^i)&-(w<i)},L.max=function(w,i){return w^(w^i)&-(w<i)},L.isPow2=function(w){return!(w&w-1||!w)},L.log2=function(w){var i,_;return i=(w>65535)<<4,i|=_=((w>>>=i)>255)<<3,i|=_=((w>>>=_)>15)<<2,(i|=_=((w>>>=_)>3)<<1)|(w>>>=_)>>1},L.log10=function(w){return w>=1e9?9:w>=1e8?8:w>=1e7?7:w>=1e6?6:w>=1e5?5:w>=1e4?4:w>=1e3?3:w>=100?2:w>=10?1:0},L.popCount=function(w){return 16843009*((w=(858993459&(w-=w>>>1&1431655765))+(w>>>2&858993459))+(w>>>4)&252645135)>>>24},L.countTrailingZeros=e,L.nextPow2=function(w){return w+=w===0,--w,w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,1+(w|=w>>>16)},L.prevPow2=function(w){return w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,(w|=w>>>16)-(w>>>1)},L.parity=function(w){return w^=w>>>16,w^=w>>>8,w^=w>>>4,27030>>>(w&=15)&1};var T=new Array(256);(function(w){for(var i=0;i<256;++i){var _=i,v=i,h=7;for(_>>>=1;_;_>>>=1)v<<=1,v|=1&_,--h;w[i]=v<<h&255}})(T),L.reverse=function(w){return T[255&w]<<24|T[w>>>8&255]<<16|T[w>>>16&255]<<8|T[w>>>24&255]},L.interleave2=function(w,i){return(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w&=65535)|w<<8))|w<<4))|w<<2))|w<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))<<1},L.deinterleave2=function(w,i){return(w=65535&((w=16711935&((w=252645135&((w=858993459&((w=w>>>i&1431655765)|w>>>1))|w>>>2))|w>>>4))|w>>>16))<<16>>16},L.interleave3=function(w,i,_){return w=1227133513&((w=3272356035&((w=251719695&((w=4278190335&((w&=1023)|w<<16))|w<<8))|w<<4))|w<<2),(w|=(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<1)|(_=1227133513&((_=3272356035&((_=251719695&((_=4278190335&((_&=1023)|_<<16))|_<<8))|_<<4))|_<<2))<<2},L.deinterleave3=function(w,i){return(w=1023&((w=4278190335&((w=251719695&((w=3272356035&((w=w>>>i&1227133513)|w>>>2))|w>>>4))|w>>>8))|w>>>16))<<22>>22},L.nextCombination=function(w){var i=w|w-1;return i+1|(~i&-~i)-1>>>e(w)+1}},44781:function(N,L,e){var T=e(53435);N.exports=function(v,h){h||(h={});var s,t,a,n,r,l,o,u,p,c,b,g=h.cutoff==null?.25:h.cutoff,d=h.radius==null?8:h.radius,m=h.channel||0;if(ArrayBuffer.isView(v)||Array.isArray(v)){if(!h.width||!h.height)throw Error("For raw data width and height should be provided by options");s=h.width,t=h.height,n=v,l=h.stride?h.stride:Math.floor(v.length/s/t)}else window.HTMLCanvasElement&&v instanceof window.HTMLCanvasElement?(o=(u=v).getContext("2d"),s=u.width,t=u.height,n=(p=o.getImageData(0,0,s,t)).data,l=4):window.CanvasRenderingContext2D&&v instanceof window.CanvasRenderingContext2D?(o=v,s=(u=v.canvas).width,t=u.height,n=(p=o.getImageData(0,0,s,t)).data,l=4):window.ImageData&&v instanceof window.ImageData&&(p=v,s=v.width,t=v.height,n=p.data,l=4);if(a=Math.max(s,t),window.Uint8ClampedArray&&n instanceof window.Uint8ClampedArray||window.Uint8Array&&n instanceof window.Uint8Array)for(r=n,n=Array(s*t),c=0,b=r.length;c<b;c++)n[c]=r[c*l+m]/255;else if(l!==1)throw Error("Raw data can have only 1 value per pixel");var x=Array(s*t),y=Array(s*t),k=Array(a),f=Array(a),S=Array(a+1),M=Array(a);for(c=0,b=s*t;c<b;c++){var E=n[c];x[c]=E===1?0:E===0?w:Math.pow(Math.max(0,.5-E),2),y[c]=E===1?w:E===0?0:Math.pow(Math.max(0,E-.5),2)}i(x,s,t,k,f,M,S),i(y,s,t,k,f,M,S);var O=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(c=0,b=s*t;c<b;c++)O[c]=T(1-((x[c]-y[c])/d+g),0,1);return O};var w=1e20;function i(v,h,s,t,a,n,r){for(var l=0;l<h;l++){for(var o=0;o<s;o++)t[o]=v[o*h+l];for(_(t,a,n,r,s),o=0;o<s;o++)v[o*h+l]=a[o]}for(o=0;o<s;o++){for(l=0;l<h;l++)t[l]=v[o*h+l];for(_(t,a,n,r,h),l=0;l<h;l++)v[o*h+l]=Math.sqrt(a[l])}}function _(v,h,s,t,a){s[0]=0,t[0]=-w,t[1]=+w;for(var n=1,r=0;n<a;n++){for(var l=(v[n]+n*n-(v[s[r]]+s[r]*s[r]))/(2*n-2*s[r]);l<=t[r];)r--,l=(v[n]+n*n-(v[s[r]]+s[r]*s[r]))/(2*n-2*s[r]);s[++r]=n,t[r]=l,t[r+1]=+w}for(n=0,r=0;n<a;n++){for(;t[r+1]<n;)r++;h[n]=(n-s[r])*(n-s[r])+v[s[r]]}}},6614:function(N,L,e){var T=e(68318),w=e(68222),i=w(T("String.prototype.indexOf"));N.exports=function(_,v){var h=T(_,!!v);return typeof h=="function"&&i(_,".prototype.")>-1?w(h):h}},68222:function(N,L,e){var T=e(77575),w=e(68318),i=w("%Function.prototype.apply%"),_=w("%Function.prototype.call%"),v=w("%Reflect.apply%",!0)||T.call(_,i),h=w("%Object.getOwnPropertyDescriptor%",!0),s=w("%Object.defineProperty%",!0),t=w("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}N.exports=function(n){var r=v(T,_,arguments);return h&&s&&h(r,"length").configurable&&s(r,"length",{value:1+t(0,n.length-(arguments.length-1))}),r};var a=function(){return v(T,i,arguments)};s?s(N.exports,"apply",{value:a}):N.exports.apply=a},53435:function(N){N.exports=function(L,e,T){return e<T?L<e?e:L>T?T:L:L<T?T:L>e?e:L}},6475:function(N,L,e){var T=e(53435);function w(i,_){_==null&&(_=!0);var v=i[0],h=i[1],s=i[2],t=i[3];return t==null&&(t=_?1:255),_&&(v*=255,h*=255,s*=255,t*=255),16777216*(v=255&T(v,0,255))+((h=255&T(h,0,255))<<16)+((s=255&T(s,0,255))<<8)+(255&T(t,0,255))}N.exports=w,N.exports.to=w,N.exports.from=function(i,_){var v=(i=+i)>>>24,h=(16711680&i)>>>16,s=(65280&i)>>>8,t=255&i;return _===!1?[v,h,s,t]:[v/255,h/255,s/255,t/255]}},76857:function(N){N.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(N,L,e){var T=e(36652),w=e(53435),i=e(90660);N.exports=function(_,v){v!=="float"&&v||(v="array"),v==="uint"&&(v="uint8"),v==="uint_clamped"&&(v="uint8_clamped");var h=new(i(v))(4),s=v!=="uint8"&&v!=="uint8_clamped";return _.length&&typeof _!="string"||((_=T(_))[0]/=255,_[1]/=255,_[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(_)?(h[0]=_[0],h[1]=_[1],h[2]=_[2],h[3]=_[3]!=null?_[3]:255,s&&(h[0]/=255,h[1]/=255,h[2]/=255,h[3]/=255),h):(s?(h[0]=_[0],h[1]=_[1],h[2]=_[2],h[3]=_[3]!=null?_[3]:1):(h[0]=w(Math.floor(255*_[0]),0,255),h[1]=w(Math.floor(255*_[1]),0,255),h[2]=w(Math.floor(255*_[2]),0,255),h[3]=_[3]==null?255:w(Math.floor(255*_[3]),0,255)),h)}},90736:function(N,L,e){var T=e(76857),w=e(10973),i=e(46775);N.exports=function(v){var h,s,t=[],a=1;if(typeof v=="string")if(T[v])t=T[v].slice(),s="rgb";else if(v==="transparent")a=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(v)){var n=v.slice(1);a=1,(o=n.length)<=4?(t=[parseInt(n[0]+n[0],16),parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16)],o===4&&(a=parseInt(n[3]+n[3],16)/255)):(t=[parseInt(n[0]+n[1],16),parseInt(n[2]+n[3],16),parseInt(n[4]+n[5],16)],o===8&&(a=parseInt(n[6]+n[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(h=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(v)){var r=h[1],l=r==="rgb";s=n=r.replace(/a$/,"");var o=n==="cmyk"?4:n==="gray"?1:3;t=h[2].trim().split(/\s*,\s*/).map(function(p,c){if(/%$/.test(p))return c===o?parseFloat(p)/100:n==="rgb"?255*parseFloat(p)/100:parseFloat(p);if(n[c]==="h"){if(/deg$/.test(p))return parseFloat(p);if(_[p]!==void 0)return _[p]}return parseFloat(p)}),r===n&&t.push(1),a=l||t[o]===void 0?1:t[o],t=t.slice(0,o)}else v.length>10&&/[0-9](?:\s|\/)/.test(v)&&(t=v.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),s=v.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(v))if(w(v)){var u=i(v.r,v.red,v.R,null);u!==null?(s="rgb",t=[u,i(v.g,v.green,v.G),i(v.b,v.blue,v.B)]):(s="hsl",t=[i(v.h,v.hue,v.H),i(v.s,v.saturation,v.S),i(v.l,v.lightness,v.L,v.b,v.brightness)]),a=i(v.a,v.alpha,v.opacity,1),v.opacity!=null&&(a/=100)}else(Array.isArray(v)||e.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(v))&&(t=[v[0],v[1],v[2]],s="rgb",a=v.length===4?v[3]:1);else s="rgb",t=[v>>>16,(65280&v)>>>8,255&v];return{space:s,values:t,alpha:a}};var _={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(N,L,e){var T=e(90736),w=e(80009),i=e(53435);N.exports=function(_){var v,h=T(_);return h.space?((v=Array(3))[0]=i(h.values[0],0,255),v[1]=i(h.values[1],0,255),v[2]=i(h.values[2],0,255),h.space[0]==="h"&&(v=w.rgb(v)),v.push(i(h.alpha,0,1)),v):[]}},80009:function(N,L,e){var T=e(6866);N.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(w){var i,_,v,h,s,t=w[0]/360,a=w[1]/100,n=w[2]/100;if(a===0)return[s=255*n,s,s];i=2*n-(_=n<.5?n*(1+a):n+a-n*a),h=[0,0,0];for(var r=0;r<3;r++)(v=t+.3333333333333333*-(r-1))<0?v++:v>1&&v--,s=6*v<1?i+6*(_-i)*v:2*v<1?_:3*v<2?i+(_-i)*(.6666666666666666-v)*6:i,h[r]=255*s;return h}},T.hsl=function(w){var i,_,v=w[0]/255,h=w[1]/255,s=w[2]/255,t=Math.min(v,h,s),a=Math.max(v,h,s),n=a-t;return a===t?i=0:v===a?i=(h-s)/n:h===a?i=2+(s-v)/n:s===a&&(i=4+(v-h)/n),(i=Math.min(60*i,360))<0&&(i+=360),_=(t+a)/2,[i,100*(a===t?0:_<=.5?n/(a+t):n/(2-a-t)),100*_]}},6866:function(N){N.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(N){N.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(N,L,e){N.exports={parse:e(41004),stringify:e(53313)}},63625:function(N,L,e){var T=e(40402);N.exports={isSize:function(w){return/^[\d\.]/.test(w)||w.indexOf("/")!==-1||T.indexOf(w)!==-1}}},41004:function(N,L,e){var T=e(90448),w=e(38732),i=e(41901),_=e(15659),v=e(96209),h=e(83794),s=e(99011),t=e(63625).isSize;N.exports=n;var a=n.cache={};function n(l){if(typeof l!="string")throw new Error("Font argument must be a string.");if(a[l])return a[l];if(l==="")throw new Error("Cannot parse an empty string.");if(i.indexOf(l)!==-1)return a[l]={system:l};for(var o,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=s(l,/\s+/);o=p.shift();){if(w.indexOf(o)!==-1)return["style","variant","weight","stretch"].forEach(function(b){u[b]=o}),a[l]=u;if(v.indexOf(o)===-1)if(o!=="normal"&&o!=="small-caps")if(h.indexOf(o)===-1){if(_.indexOf(o)===-1){if(t(o)){var c=s(o,"/");if(u.size=c[0],c[1]!=null?u.lineHeight=r(c[1]):p[0]==="/"&&(p.shift(),u.lineHeight=r(p.shift())),!p.length)throw new Error("Missing required font-family.");return u.family=s(p.join(" "),/\s*,\s*/).map(T),a[l]=u}throw new Error("Unknown or unsupported font token: "+o)}u.weight=o}else u.stretch=o;else u.variant=o;else u.style=o}throw new Error("Missing required font-size.")}function r(l){var o=parseFloat(l);return o.toString()===l?o:l}},53313:function(N,L,e){var T=e(71299),w=e(63625).isSize,i=l(e(38732)),_=l(e(41901)),v=l(e(15659)),h=l(e(96209)),s=l(e(83794)),t={normal:1,"small-caps":1},a={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},n="serif";function r(o,u){if(o&&!u[o]&&!i[o])throw Error("Unknown keyword `"+o+"`");return o}function l(o){for(var u={},p=0;p<o.length;p++)u[o[p]]=1;return u}N.exports=function(o){if((o=T(o,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return o.system&&r(o.system,_),o.system;if(r(o.style,h),r(o.variant,t),r(o.weight,v),r(o.stretch,s),o.size==null&&(o.size="1rem"),typeof o.size=="number"&&(o.size+="px"),!w)throw Error("Bad size value `"+o.size+"`");o.family||(o.family=n),Array.isArray(o.family)&&(o.family.length||(o.family=[n]),o.family=o.family.map(function(p){return a[p]?p:'"'+p+'"'}).join(", "));var u=[];return u.push(o.style),o.variant!==o.style&&u.push(o.variant),o.weight!==o.variant&&o.weight!==o.style&&u.push(o.weight),o.stretch!==o.weight&&o.stretch!==o.variant&&o.stretch!==o.style&&u.push(o.stretch),u.push(o.size+(o.lineHeight==null||o.lineHeight==="normal"||o.lineHeight+""=="1"?"":"/"+o.lineHeight)),u.push(o.family),u.filter(Boolean).join(" ")}},55174:function(N,L,e){var T,w=e(24582),i=e(10424),_=e(82527),v=e(19012),h=e(21780),s=e(16906),t=Function.prototype.bind,a=Object.defineProperty,n=Object.prototype.hasOwnProperty;T=function(r,l,o){var u,p=i(l)&&_(l.value);return delete(u=v(l)).writable,delete u.value,u.get=function(){return!o.overwriteDefinition&&n.call(this,r)?p:(l.value=t.call(p,o.resolveContext?o.resolveContext(this):this),a(this,r,l),this[r])},u},N.exports=function(r){var l=h(arguments[1]);return w(l.resolveContext)&&_(l.resolveContext),s(r,function(o,u){return T(u,o,l)})}},62072:function(N,L,e){var T=e(24582),w=e(84985),i=e(95879),_=e(21780),v=e(66741),h=N.exports=function(s,t){var a,n,r,l,o;return arguments.length<2||typeof s!="string"?(l=t,t=s,s=null):l=arguments[2],T(s)?(a=v.call(s,"c"),n=v.call(s,"e"),r=v.call(s,"w")):(a=r=!0,n=!1),o={value:t,configurable:a,enumerable:n,writable:r},l?i(_(l),o):o};h.gs=function(s,t,a){var n,r,l,o;return typeof s!="string"?(l=a,a=t,t=s,s=null):l=arguments[3],T(t)?w(t)?T(a)?w(a)||(l=a,a=void 0):a=void 0:(l=t,t=a=void 0):t=void 0,T(s)?(n=v.call(s,"c"),r=v.call(s,"e")):(n=!0,r=!1),o={get:t,set:a,configurable:n,enumerable:r},l?i(_(l),o):o}},33064:function(N,L,e){function T(r,l){return r<l?-1:r>l?1:r>=l?0:NaN}e.d(L,{j2:function(){return T},Fp:function(){return _},J6:function(){return h},TS:function(){return s},VV:function(){return t},w6:function(){return a},Sm:function(){return n}}),(w=T).length===1&&(i=w,w=function(r,l){return T(i(r),l)});var w,i;function _(r,l){var o,u,p=r.length,c=-1;if(l==null){for(;++c<p;)if((o=r[c])!=null&&o>=o)for(u=o;++c<p;)(o=r[c])!=null&&o>u&&(u=o)}else for(;++c<p;)if((o=l(r[c],c,r))!=null&&o>=o)for(u=o;++c<p;)(o=l(r[c],c,r))!=null&&o>u&&(u=o);return u}function v(r){return r===null?NaN:+r}function h(r,l){var o,u=r.length,p=u,c=-1,b=0;if(l==null)for(;++c<u;)isNaN(o=v(r[c]))?--p:b+=o;else for(;++c<u;)isNaN(o=v(l(r[c],c,r)))?--p:b+=o;if(p)return b/p}function s(r){for(var l,o,u,p=r.length,c=-1,b=0;++c<p;)b+=r[c].length;for(o=new Array(b);--p>=0;)for(l=(u=r[p]).length;--l>=0;)o[--b]=u[l];return o}function t(r,l){var o,u,p=r.length,c=-1;if(l==null){for(;++c<p;)if((o=r[c])!=null&&o>=o)for(u=o;++c<p;)(o=r[c])!=null&&u>o&&(u=o)}else for(;++c<p;)if((o=l(r[c],c,r))!=null&&o>=o)for(u=o;++c<p;)(o=l(r[c],c,r))!=null&&u>o&&(u=o);return u}function a(r,l,o){r=+r,l=+l,o=(p=arguments.length)<2?(l=r,r=0,1):p<3?1:+o;for(var u=-1,p=0|Math.max(0,Math.ceil((l-r)/o)),c=new Array(p);++u<p;)c[u]=r+u*o;return c}function n(r,l){var o,u=r.length,p=-1,c=0;if(l==null)for(;++p<u;)(o=+r[p])&&(c+=o);else for(;++p<u;)(o=+l(r[p],p,r))&&(c+=o);return c}},15140:function(N,L,e){e.d(L,{UI:function(){return _},b1:function(){return v}});var T="$";function w(){}function i(l,o){var u=new w;if(l instanceof w)l.each(function(d,m){u.set(m,d)});else if(Array.isArray(l)){var p,c=-1,b=l.length;if(o==null)for(;++c<b;)u.set(c,l[c]);else for(;++c<b;)u.set(o(p=l[c],c,l),p)}else if(l)for(var g in l)u.set(g,l[g]);return u}w.prototype=i.prototype={constructor:w,has:function(l){return T+l in this},get:function(l){return this[T+l]},set:function(l,o){return this[T+l]=o,this},remove:function(l){var o=T+l;return o in this&&delete this[o]},clear:function(){for(var l in this)l[0]===T&&delete this[l]},keys:function(){var l=[];for(var o in this)o[0]===T&&l.push(o.slice(1));return l},values:function(){var l=[];for(var o in this)o[0]===T&&l.push(this[o]);return l},entries:function(){var l=[];for(var o in this)o[0]===T&&l.push({key:o.slice(1),value:this[o]});return l},size:function(){var l=0;for(var o in this)o[0]===T&&++l;return l},empty:function(){for(var l in this)if(l[0]===T)return!1;return!0},each:function(l){for(var o in this)o[0]===T&&l(this[o],o.slice(1),this)}};var _=i;function v(){var l,o,u,p=[],c=[];function b(d,m,x,y){if(m>=p.length)return l!=null&&d.sort(l),o!=null?o(d):d;for(var k,f,S,M=-1,E=d.length,O=p[m++],P=_(),I=x();++M<E;)(S=P.get(k=O(f=d[M])+""))?S.push(f):P.set(k,[f]);return P.each(function(z,U){y(I,U,b(z,m,x,y))}),I}function g(d,m){if(++m>p.length)return d;var x,y=c[m-1];return o!=null&&m>=p.length?x=d.entries():(x=[],d.each(function(k,f){x.push({key:f,values:g(k,m)})})),y!=null?x.sort(function(k,f){return y(k.key,f.key)}):x}return u={object:function(d){return b(d,0,h,s)},map:function(d){return b(d,0,t,a)},entries:function(d){return g(b(d,0,t,a),0)},key:function(d){return p.push(d),u},sortKeys:function(d){return c[p.length-1]=d,u},sortValues:function(d){return l=d,u},rollup:function(d){return o=d,u}}}function h(){return{}}function s(l,o,u){l[o]=u}function t(){return _()}function a(l,o,u){l.set(o,u)}function n(){}var r=_.prototype;n.prototype={constructor:n,has:r.has,add:function(l){return this[T+(l+="")]=l,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each}},49887:function(N,L,e){function T(_e,ye){var Ce;function ke(){var Te,le,ue=Ce.length,de=0,Le=0;for(Te=0;Te<ue;++Te)de+=(le=Ce[Te]).x,Le+=le.y;for(de=de/ue-_e,Le=Le/ue-ye,Te=0;Te<ue;++Te)(le=Ce[Te]).x-=de,le.y-=Le}return _e==null&&(_e=0),ye==null&&(ye=0),ke.initialize=function(Te){Ce=Te},ke.x=function(Te){return arguments.length?(_e=+Te,ke):_e},ke.y=function(Te){return arguments.length?(ye=+Te,ke):ye},ke}function w(_e){return function(){return _e}}function i(){return 1e-6*(Math.random()-.5)}function _(_e,ye,Ce,ke){if(isNaN(ye)||isNaN(Ce))return _e;var Te,le,ue,de,Le,we,Ee,Oe,Fe,pe=_e._root,be={data:ke},Me=_e._x0,De=_e._y0,Ne=_e._x1,Be=_e._y1;if(!pe)return _e._root=be,_e;for(;pe.length;)if((we=ye>=(le=(Me+Ne)/2))?Me=le:Ne=le,(Ee=Ce>=(ue=(De+Be)/2))?De=ue:Be=ue,Te=pe,!(pe=pe[Oe=Ee<<1|we]))return Te[Oe]=be,_e;if(de=+_e._x.call(null,pe.data),Le=+_e._y.call(null,pe.data),ye===de&&Ce===Le)return be.next=pe,Te?Te[Oe]=be:_e._root=be,_e;do Te=Te?Te[Oe]=new Array(4):_e._root=new Array(4),(we=ye>=(le=(Me+Ne)/2))?Me=le:Ne=le,(Ee=Ce>=(ue=(De+Be)/2))?De=ue:Be=ue;while((Oe=Ee<<1|we)==(Fe=(Le>=ue)<<1|de>=le));return Te[Fe]=pe,Te[Oe]=be,_e}function v(_e,ye,Ce,ke,Te){this.node=_e,this.x0=ye,this.y0=Ce,this.x1=ke,this.y1=Te}function h(_e){return _e[0]}function s(_e){return _e[1]}function t(_e,ye,Ce){var ke=new a(ye??h,Ce??s,NaN,NaN,NaN,NaN);return _e==null?ke:ke.addAll(_e)}function a(_e,ye,Ce,ke,Te,le){this._x=_e,this._y=ye,this._x0=Ce,this._y0=ke,this._x1=Te,this._y1=le,this._root=void 0}function n(_e){for(var ye={data:_e.data},Ce=ye;_e=_e.next;)Ce=Ce.next={data:_e.data};return ye}e.r(L),e.d(L,{forceCenter:function(){return T},forceCollide:function(){return u},forceLink:function(){return g},forceManyBody:function(){return fe},forceRadial:function(){return ge},forceSimulation:function(){return oe},forceX:function(){return ve},forceY:function(){return xe}});var r=t.prototype=a.prototype;function l(_e){return _e.x+_e.vx}function o(_e){return _e.y+_e.vy}function u(_e){var ye,Ce,ke=1,Te=1;function le(){for(var Le,we,Ee,Oe,Fe,pe,be,Me=ye.length,De=0;De<Te;++De)for(we=t(ye,l,o).visitAfter(ue),Le=0;Le<Me;++Le)Ee=ye[Le],pe=Ce[Ee.index],be=pe*pe,Oe=Ee.x+Ee.vx,Fe=Ee.y+Ee.vy,we.visit(Ne);function Ne(Be,Ye,We,et,ft){var ht=Be.data,mt=Be.r,Mt=pe+mt;if(!ht)return Ye>Oe+Mt||et<Oe-Mt||We>Fe+Mt||ft<Fe-Mt;if(ht.index>Ee.index){var _t=Oe-ht.x-ht.vx,it=Fe-ht.y-ht.vy,st=_t*_t+it*it;st<Mt*Mt&&(_t===0&&(st+=(_t=i())*_t),it===0&&(st+=(it=i())*it),st=(Mt-(st=Math.sqrt(st)))/st*ke,Ee.vx+=(_t*=st)*(Mt=(mt*=mt)/(be+mt)),Ee.vy+=(it*=st)*Mt,ht.vx-=_t*(Mt=1-Mt),ht.vy-=it*Mt)}}}function ue(Le){if(Le.data)return Le.r=Ce[Le.data.index];for(var we=Le.r=0;we<4;++we)Le[we]&&Le[we].r>Le.r&&(Le.r=Le[we].r)}function de(){if(ye){var Le,we,Ee=ye.length;for(Ce=new Array(Ee),Le=0;Le<Ee;++Le)we=ye[Le],Ce[we.index]=+_e(we,Le,ye)}}return typeof _e!="function"&&(_e=w(_e==null?1:+_e)),le.initialize=function(Le){ye=Le,de()},le.iterations=function(Le){return arguments.length?(Te=+Le,le):Te},le.strength=function(Le){return arguments.length?(ke=+Le,le):ke},le.radius=function(Le){return arguments.length?(_e=typeof Le=="function"?Le:w(+Le),de(),le):_e},le}r.copy=function(){var _e,ye,Ce=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),ke=this._root;if(!ke)return Ce;if(!ke.length)return Ce._root=n(ke),Ce;for(_e=[{source:ke,target:Ce._root=new Array(4)}];ke=_e.pop();)for(var Te=0;Te<4;++Te)(ye=ke.source[Te])&&(ye.length?_e.push({source:ye,target:ke.target[Te]=new Array(4)}):ke.target[Te]=n(ye));return Ce},r.add=function(_e){var ye=+this._x.call(null,_e),Ce=+this._y.call(null,_e);return _(this.cover(ye,Ce),ye,Ce,_e)},r.addAll=function(_e){var ye,Ce,ke,Te,le=_e.length,ue=new Array(le),de=new Array(le),Le=1/0,we=1/0,Ee=-1/0,Oe=-1/0;for(Ce=0;Ce<le;++Ce)isNaN(ke=+this._x.call(null,ye=_e[Ce]))||isNaN(Te=+this._y.call(null,ye))||(ue[Ce]=ke,de[Ce]=Te,ke<Le&&(Le=ke),ke>Ee&&(Ee=ke),Te<we&&(we=Te),Te>Oe&&(Oe=Te));if(Le>Ee||we>Oe)return this;for(this.cover(Le,we).cover(Ee,Oe),Ce=0;Ce<le;++Ce)_(this,ue[Ce],de[Ce],_e[Ce]);return this},r.cover=function(_e,ye){if(isNaN(_e=+_e)||isNaN(ye=+ye))return this;var Ce=this._x0,ke=this._y0,Te=this._x1,le=this._y1;if(isNaN(Ce))Te=(Ce=Math.floor(_e))+1,le=(ke=Math.floor(ye))+1;else{for(var ue,de,Le=Te-Ce,we=this._root;Ce>_e||_e>=Te||ke>ye||ye>=le;)switch(de=(ye<ke)<<1|_e<Ce,(ue=new Array(4))[de]=we,we=ue,Le*=2,de){case 0:Te=Ce+Le,le=ke+Le;break;case 1:Ce=Te-Le,le=ke+Le;break;case 2:Te=Ce+Le,ke=le-Le;break;case 3:Ce=Te-Le,ke=le-Le}this._root&&this._root.length&&(this._root=we)}return this._x0=Ce,this._y0=ke,this._x1=Te,this._y1=le,this},r.data=function(){var _e=[];return this.visit(function(ye){if(!ye.length)do _e.push(ye.data);while(ye=ye.next)}),_e},r.extent=function(_e){return arguments.length?this.cover(+_e[0][0],+_e[0][1]).cover(+_e[1][0],+_e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(_e,ye,Ce){var ke,Te,le,ue,de,Le,we,Ee=this._x0,Oe=this._y0,Fe=this._x1,pe=this._y1,be=[],Me=this._root;for(Me&&be.push(new v(Me,Ee,Oe,Fe,pe)),Ce==null?Ce=1/0:(Ee=_e-Ce,Oe=ye-Ce,Fe=_e+Ce,pe=ye+Ce,Ce*=Ce);Le=be.pop();)if(!(!(Me=Le.node)||(Te=Le.x0)>Fe||(le=Le.y0)>pe||(ue=Le.x1)<Ee||(de=Le.y1)<Oe))if(Me.length){var De=(Te+ue)/2,Ne=(le+de)/2;be.push(new v(Me[3],De,Ne,ue,de),new v(Me[2],Te,Ne,De,de),new v(Me[1],De,le,ue,Ne),new v(Me[0],Te,le,De,Ne)),(we=(ye>=Ne)<<1|_e>=De)&&(Le=be[be.length-1],be[be.length-1]=be[be.length-1-we],be[be.length-1-we]=Le)}else{var Be=_e-+this._x.call(null,Me.data),Ye=ye-+this._y.call(null,Me.data),We=Be*Be+Ye*Ye;if(We<Ce){var et=Math.sqrt(Ce=We);Ee=_e-et,Oe=ye-et,Fe=_e+et,pe=ye+et,ke=Me.data}}return ke},r.remove=function(_e){if(isNaN(le=+this._x.call(null,_e))||isNaN(ue=+this._y.call(null,_e)))return this;var ye,Ce,ke,Te,le,ue,de,Le,we,Ee,Oe,Fe,pe=this._root,be=this._x0,Me=this._y0,De=this._x1,Ne=this._y1;if(!pe)return this;if(pe.length)for(;;){if((we=le>=(de=(be+De)/2))?be=de:De=de,(Ee=ue>=(Le=(Me+Ne)/2))?Me=Le:Ne=Le,ye=pe,!(pe=pe[Oe=Ee<<1|we]))return this;if(!pe.length)break;(ye[Oe+1&3]||ye[Oe+2&3]||ye[Oe+3&3])&&(Ce=ye,Fe=Oe)}for(;pe.data!==_e;)if(ke=pe,!(pe=pe.next))return this;return(Te=pe.next)&&delete pe.next,ke?(Te?ke.next=Te:delete ke.next,this):ye?(Te?ye[Oe]=Te:delete ye[Oe],(pe=ye[0]||ye[1]||ye[2]||ye[3])&&pe===(ye[3]||ye[2]||ye[1]||ye[0])&&!pe.length&&(Ce?Ce[Fe]=pe:this._root=pe),this):(this._root=Te,this)},r.removeAll=function(_e){for(var ye=0,Ce=_e.length;ye<Ce;++ye)this.remove(_e[ye]);return this},r.root=function(){return this._root},r.size=function(){var _e=0;return this.visit(function(ye){if(!ye.length)do++_e;while(ye=ye.next)}),_e},r.visit=function(_e){var ye,Ce,ke,Te,le,ue,de=[],Le=this._root;for(Le&&de.push(new v(Le,this._x0,this._y0,this._x1,this._y1));ye=de.pop();)if(!_e(Le=ye.node,ke=ye.x0,Te=ye.y0,le=ye.x1,ue=ye.y1)&&Le.length){var we=(ke+le)/2,Ee=(Te+ue)/2;(Ce=Le[3])&&de.push(new v(Ce,we,Ee,le,ue)),(Ce=Le[2])&&de.push(new v(Ce,ke,Ee,we,ue)),(Ce=Le[1])&&de.push(new v(Ce,we,Te,le,Ee)),(Ce=Le[0])&&de.push(new v(Ce,ke,Te,we,Ee))}return this},r.visitAfter=function(_e){var ye,Ce=[],ke=[];for(this._root&&Ce.push(new v(this._root,this._x0,this._y0,this._x1,this._y1));ye=Ce.pop();){var Te=ye.node;if(Te.length){var le,ue=ye.x0,de=ye.y0,Le=ye.x1,we=ye.y1,Ee=(ue+Le)/2,Oe=(de+we)/2;(le=Te[0])&&Ce.push(new v(le,ue,de,Ee,Oe)),(le=Te[1])&&Ce.push(new v(le,Ee,de,Le,Oe)),(le=Te[2])&&Ce.push(new v(le,ue,Oe,Ee,we)),(le=Te[3])&&Ce.push(new v(le,Ee,Oe,Le,we))}ke.push(ye)}for(;ye=ke.pop();)_e(ye.node,ye.x0,ye.y0,ye.x1,ye.y1);return this},r.x=function(_e){return arguments.length?(this._x=_e,this):this._x},r.y=function(_e){return arguments.length?(this._y=_e,this):this._y};var p=e(15140);function c(_e){return _e.index}function b(_e,ye){var Ce=_e.get(ye);if(!Ce)throw new Error("missing: "+ye);return Ce}function g(_e){var ye,Ce,ke,Te,le,ue=c,de=function(be){return 1/Math.min(Te[be.source.index],Te[be.target.index])},Le=w(30),we=1;function Ee(be){for(var Me=0,De=_e.length;Me<we;++Me)for(var Ne,Be,Ye,We,et,ft,ht,mt=0;mt<De;++mt)Be=(Ne=_e[mt]).source,We=(Ye=Ne.target).x+Ye.vx-Be.x-Be.vx||i(),et=Ye.y+Ye.vy-Be.y-Be.vy||i(),We*=ft=((ft=Math.sqrt(We*We+et*et))-Ce[mt])/ft*be*ye[mt],et*=ft,Ye.vx-=We*(ht=le[mt]),Ye.vy-=et*ht,Be.vx+=We*(ht=1-ht),Be.vy+=et*ht}function Oe(){if(ke){var be,Me,De=ke.length,Ne=_e.length,Be=(0,p.UI)(ke,ue);for(be=0,Te=new Array(De);be<Ne;++be)(Me=_e[be]).index=be,typeof Me.source!="object"&&(Me.source=b(Be,Me.source)),typeof Me.target!="object"&&(Me.target=b(Be,Me.target)),Te[Me.source.index]=(Te[Me.source.index]||0)+1,Te[Me.target.index]=(Te[Me.target.index]||0)+1;for(be=0,le=new Array(Ne);be<Ne;++be)Me=_e[be],le[be]=Te[Me.source.index]/(Te[Me.source.index]+Te[Me.target.index]);ye=new Array(Ne),Fe(),Ce=new Array(Ne),pe()}}function Fe(){if(ke)for(var be=0,Me=_e.length;be<Me;++be)ye[be]=+de(_e[be],be,_e)}function pe(){if(ke)for(var be=0,Me=_e.length;be<Me;++be)Ce[be]=+Le(_e[be],be,_e)}return _e==null&&(_e=[]),Ee.initialize=function(be){ke=be,Oe()},Ee.links=function(be){return arguments.length?(_e=be,Oe(),Ee):_e},Ee.id=function(be){return arguments.length?(ue=be,Ee):ue},Ee.iterations=function(be){return arguments.length?(we=+be,Ee):we},Ee.strength=function(be){return arguments.length?(de=typeof be=="function"?be:w(+be),Fe(),Ee):de},Ee.distance=function(be){return arguments.length?(Le=typeof be=="function"?be:w(+be),pe(),Ee):Le},Ee}var d={value:function(){}};function m(){for(var _e,ye=0,Ce=arguments.length,ke={};ye<Ce;++ye){if(!(_e=arguments[ye]+"")||_e in ke||/[\s.]/.test(_e))throw new Error("illegal type: "+_e);ke[_e]=[]}return new x(ke)}function x(_e){this._=_e}function y(_e,ye){for(var Ce,ke=0,Te=_e.length;ke<Te;++ke)if((Ce=_e[ke]).name===ye)return Ce.value}function k(_e,ye,Ce){for(var ke=0,Te=_e.length;ke<Te;++ke)if(_e[ke].name===ye){_e[ke]=d,_e=_e.slice(0,ke).concat(_e.slice(ke+1));break}return Ce!=null&&_e.push({name:ye,value:Ce}),_e}x.prototype=m.prototype={constructor:x,on:function(_e,ye){var Ce,ke,Te=this._,le=(ke=Te,(_e+"").trim().split(/^|\s+/).map(function(Le){var we="",Ee=Le.indexOf(".");if(Ee>=0&&(we=Le.slice(Ee+1),Le=Le.slice(0,Ee)),Le&&!ke.hasOwnProperty(Le))throw new Error("unknown type: "+Le);return{type:Le,name:we}})),ue=-1,de=le.length;if(!(arguments.length<2)){if(ye!=null&&typeof ye!="function")throw new Error("invalid callback: "+ye);for(;++ue<de;)if(Ce=(_e=le[ue]).type)Te[Ce]=k(Te[Ce],_e.name,ye);else if(ye==null)for(Ce in Te)Te[Ce]=k(Te[Ce],_e.name,null);return this}for(;++ue<de;)if((Ce=(_e=le[ue]).type)&&(Ce=y(Te[Ce],_e.name)))return Ce},copy:function(){var _e={},ye=this._;for(var Ce in ye)_e[Ce]=ye[Ce].slice();return new x(_e)},call:function(_e,ye){if((Ce=arguments.length-2)>0)for(var Ce,ke,Te=new Array(Ce),le=0;le<Ce;++le)Te[le]=arguments[le+2];if(!this._.hasOwnProperty(_e))throw new Error("unknown type: "+_e);for(le=0,Ce=(ke=this._[_e]).length;le<Ce;++le)ke[le].value.apply(ye,Te)},apply:function(_e,ye,Ce){if(!this._.hasOwnProperty(_e))throw new Error("unknown type: "+_e);for(var ke=this._[_e],Te=0,le=ke.length;Te<le;++Te)ke[Te].value.apply(ye,Ce)}};var f,S,M=m,E=0,O=0,P=0,I=1e3,z=0,U=0,R=0,j=typeof performance=="object"&&performance.now?performance:Date,Z=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(_e){setTimeout(_e,17)};function F(){return U||(Z(V),U=j.now()+R)}function V(){U=0}function H(){this._call=this._time=this._next=null}function te(_e,ye,Ce){var ke=new H;return ke.restart(_e,ye,Ce),ke}function $(){U=(z=j.now())+R,E=O=0;try{(function(){F(),++E;for(var _e,ye=f;ye;)(_e=U-ye._time)>=0&&ye._call.call(null,_e),ye=ye._next;--E})()}finally{E=0,function(){for(var _e,ye,Ce=f,ke=1/0;Ce;)Ce._call?(ke>Ce._time&&(ke=Ce._time),_e=Ce,Ce=Ce._next):(ye=Ce._next,Ce._next=null,Ce=_e?_e._next=ye:f=ye);S=_e,X(ke)}(),U=0}}function J(){var _e=j.now(),ye=_e-z;ye>I&&(R-=ye,z=_e)}function X(_e){E||(O&&(O=clearTimeout(O)),_e-U>24?(_e<1/0&&(O=setTimeout($,_e-j.now()-R)),P&&(P=clearInterval(P))):(P||(z=j.now(),P=setInterval(J,I)),E=1,Z($)))}function K(_e){return _e.x}function ee(_e){return _e.y}H.prototype=te.prototype={constructor:H,restart:function(_e,ye,Ce){if(typeof _e!="function")throw new TypeError("callback is not a function");Ce=(Ce==null?F():+Ce)+(ye==null?0:+ye),this._next||S===this||(S?S._next=this:f=this,S=this),this._call=_e,this._time=Ce,X()},stop:function(){this._call&&(this._call=null,this._time=1/0,X())}};var ie=10,ae=Math.PI*(3-Math.sqrt(5));function oe(_e){var ye,Ce=1,ke=.001,Te=1-Math.pow(ke,1/300),le=0,ue=.6,de=(0,p.UI)(),Le=te(Ee),we=M("tick","end");function Ee(){Oe(),we.call("tick",ye),Ce<ke&&(Le.stop(),we.call("end",ye))}function Oe(be){var Me,De,Ne=_e.length;be===void 0&&(be=1);for(var Be=0;Be<be;++Be)for(Ce+=(le-Ce)*Te,de.each(function(Ye){Ye(Ce)}),Me=0;Me<Ne;++Me)(De=_e[Me]).fx==null?De.x+=De.vx*=ue:(De.x=De.fx,De.vx=0),De.fy==null?De.y+=De.vy*=ue:(De.y=De.fy,De.vy=0);return ye}function Fe(){for(var be,Me=0,De=_e.length;Me<De;++Me){if((be=_e[Me]).index=Me,be.fx!=null&&(be.x=be.fx),be.fy!=null&&(be.y=be.fy),isNaN(be.x)||isNaN(be.y)){var Ne=ie*Math.sqrt(Me),Be=Me*ae;be.x=Ne*Math.cos(Be),be.y=Ne*Math.sin(Be)}(isNaN(be.vx)||isNaN(be.vy))&&(be.vx=be.vy=0)}}function pe(be){return be.initialize&&be.initialize(_e),be}return _e==null&&(_e=[]),Fe(),ye={tick:Oe,restart:function(){return Le.restart(Ee),ye},stop:function(){return Le.stop(),ye},nodes:function(be){return arguments.length?(_e=be,Fe(),de.each(pe),ye):_e},alpha:function(be){return arguments.length?(Ce=+be,ye):Ce},alphaMin:function(be){return arguments.length?(ke=+be,ye):ke},alphaDecay:function(be){return arguments.length?(Te=+be,ye):+Te},alphaTarget:function(be){return arguments.length?(le=+be,ye):le},velocityDecay:function(be){return arguments.length?(ue=1-be,ye):1-ue},force:function(be,Me){return arguments.length>1?(Me==null?de.remove(be):de.set(be,pe(Me)),ye):de.get(be)},find:function(be,Me,De){var Ne,Be,Ye,We,et,ft=0,ht=_e.length;for(De==null?De=1/0:De*=De,ft=0;ft<ht;++ft)(Ye=(Ne=be-(We=_e[ft]).x)*Ne+(Be=Me-We.y)*Be)<De&&(et=We,De=Ye);return et},on:function(be,Me){return arguments.length>1?(we.on(be,Me),ye):we.on(be)}}}function fe(){var _e,ye,Ce,ke,Te=w(-30),le=1,ue=1/0,de=.81;function Le(Fe){var pe,be=_e.length,Me=t(_e,K,ee).visitAfter(Ee);for(Ce=Fe,pe=0;pe<be;++pe)ye=_e[pe],Me.visit(Oe)}function we(){if(_e){var Fe,pe,be=_e.length;for(ke=new Array(be),Fe=0;Fe<be;++Fe)pe=_e[Fe],ke[pe.index]=+Te(pe,Fe,_e)}}function Ee(Fe){var pe,be,Me,De,Ne,Be=0,Ye=0;if(Fe.length){for(Me=De=Ne=0;Ne<4;++Ne)(pe=Fe[Ne])&&(be=Math.abs(pe.value))&&(Be+=pe.value,Ye+=be,Me+=be*pe.x,De+=be*pe.y);Fe.x=Me/Ye,Fe.y=De/Ye}else{(pe=Fe).x=pe.data.x,pe.y=pe.data.y;do Be+=ke[pe.data.index];while(pe=pe.next)}Fe.value=Be}function Oe(Fe,pe,be,Me){if(!Fe.value)return!0;var De=Fe.x-ye.x,Ne=Fe.y-ye.y,Be=Me-pe,Ye=De*De+Ne*Ne;if(Be*Be/de<Ye)return Ye<ue&&(De===0&&(Ye+=(De=i())*De),Ne===0&&(Ye+=(Ne=i())*Ne),Ye<le&&(Ye=Math.sqrt(le*Ye)),ye.vx+=De*Fe.value*Ce/Ye,ye.vy+=Ne*Fe.value*Ce/Ye),!0;if(!(Fe.length||Ye>=ue)){(Fe.data!==ye||Fe.next)&&(De===0&&(Ye+=(De=i())*De),Ne===0&&(Ye+=(Ne=i())*Ne),Ye<le&&(Ye=Math.sqrt(le*Ye)));do Fe.data!==ye&&(Be=ke[Fe.data.index]*Ce/Ye,ye.vx+=De*Be,ye.vy+=Ne*Be);while(Fe=Fe.next)}}return Le.initialize=function(Fe){_e=Fe,we()},Le.strength=function(Fe){return arguments.length?(Te=typeof Fe=="function"?Fe:w(+Fe),we(),Le):Te},Le.distanceMin=function(Fe){return arguments.length?(le=Fe*Fe,Le):Math.sqrt(le)},Le.distanceMax=function(Fe){return arguments.length?(ue=Fe*Fe,Le):Math.sqrt(ue)},Le.theta=function(Fe){return arguments.length?(de=Fe*Fe,Le):Math.sqrt(de)},Le}function ge(_e,ye,Ce){var ke,Te,le,ue=w(.1);function de(we){for(var Ee=0,Oe=ke.length;Ee<Oe;++Ee){var Fe=ke[Ee],pe=Fe.x-ye||1e-6,be=Fe.y-Ce||1e-6,Me=Math.sqrt(pe*pe+be*be),De=(le[Ee]-Me)*Te[Ee]*we/Me;Fe.vx+=pe*De,Fe.vy+=be*De}}function Le(){if(ke){var we,Ee=ke.length;for(Te=new Array(Ee),le=new Array(Ee),we=0;we<Ee;++we)le[we]=+_e(ke[we],we,ke),Te[we]=isNaN(le[we])?0:+ue(ke[we],we,ke)}}return typeof _e!="function"&&(_e=w(+_e)),ye==null&&(ye=0),Ce==null&&(Ce=0),de.initialize=function(we){ke=we,Le()},de.strength=function(we){return arguments.length?(ue=typeof we=="function"?we:w(+we),Le(),de):ue},de.radius=function(we){return arguments.length?(_e=typeof we=="function"?we:w(+we),Le(),de):_e},de.x=function(we){return arguments.length?(ye=+we,de):ye},de.y=function(we){return arguments.length?(Ce=+we,de):Ce},de}function ve(_e){var ye,Ce,ke,Te=w(.1);function le(de){for(var Le,we=0,Ee=ye.length;we<Ee;++we)(Le=ye[we]).vx+=(ke[we]-Le.x)*Ce[we]*de}function ue(){if(ye){var de,Le=ye.length;for(Ce=new Array(Le),ke=new Array(Le),de=0;de<Le;++de)Ce[de]=isNaN(ke[de]=+_e(ye[de],de,ye))?0:+Te(ye[de],de,ye)}}return typeof _e!="function"&&(_e=w(_e==null?0:+_e)),le.initialize=function(de){ye=de,ue()},le.strength=function(de){return arguments.length?(Te=typeof de=="function"?de:w(+de),ue(),le):Te},le.x=function(de){return arguments.length?(_e=typeof de=="function"?de:w(+de),ue(),le):_e},le}function xe(_e){var ye,Ce,ke,Te=w(.1);function le(de){for(var Le,we=0,Ee=ye.length;we<Ee;++we)(Le=ye[we]).vy+=(ke[we]-Le.y)*Ce[we]*de}function ue(){if(ye){var de,Le=ye.length;for(Ce=new Array(Le),ke=new Array(Le),de=0;de<Le;++de)Ce[de]=isNaN(ke[de]=+_e(ye[de],de,ye))?0:+Te(ye[de],de,ye)}}return typeof _e!="function"&&(_e=w(_e==null?0:+_e)),le.initialize=function(de){ye=de,ue()},le.strength=function(de){return arguments.length?(Te=typeof de=="function"?de:w(+de),ue(),le):Te},le.y=function(de){return arguments.length?(_e=typeof de=="function"?de:w(+de),ue(),le):_e},le}},60721:function(N,L,e){function T(u,p){if((c=(u=p?u.toExponential(p-1):u.toExponential()).indexOf("e"))<0)return null;var c,b=u.slice(0,c);return[b.length>1?b[0]+b.slice(2):b,+u.slice(c+1)]}e.d(L,{WU:function(){return n},FF:function(){return o}});var w,i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _(u){if(!(p=i.exec(u)))throw new Error("invalid format: "+u);var p;return new v({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function v(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function h(u,p){var c=T(u,p);if(!c)return u+"";var b=c[0],g=c[1];return g<0?"0."+new Array(-g).join("0")+b:b.length>g+1?b.slice(0,g+1)+"."+b.slice(g+1):b+new Array(g-b.length+2).join("0")}_.prototype=v.prototype,v.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(u,p){return(100*u).toFixed(p)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,p){return u.toExponential(p)},f:function(u,p){return u.toFixed(p)},g:function(u,p){return u.toPrecision(p)},o:function(u){return Math.round(u).toString(8)},p:function(u,p){return h(100*u,p)},r:h,s:function(u,p){var c=T(u,p);if(!c)return u+"";var b=c[0],g=c[1],d=g-(w=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,m=b.length;return d===m?b:d>m?b+new Array(d-m+1).join("0"):d>0?b.slice(0,d)+"."+b.slice(d):"0."+new Array(1-d).join("0")+T(u,Math.max(0,p+d-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var a,n,r=Array.prototype.map,l=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function o(u){var p,c,b=u.grouping===void 0||u.thousands===void 0?t:(p=r.call(u.grouping,Number),c=u.thousands+"",function(M,E){for(var O=M.length,P=[],I=0,z=p[0],U=0;O>0&&z>0&&(U+z+1>E&&(z=Math.max(1,E-U)),P.push(M.substring(O-=z,O+z)),!((U+=z+1)>E));)z=p[I=(I+1)%p.length];return P.reverse().join(c)}),g=u.currency===void 0?"":u.currency[0]+"",d=u.currency===void 0?"":u.currency[1]+"",m=u.decimal===void 0?".":u.decimal+"",x=u.numerals===void 0?t:function(M){return function(E){return E.replace(/[0-9]/g,function(O){return M[+O]})}}(r.call(u.numerals,String)),y=u.percent===void 0?"%":u.percent+"",k=u.minus===void 0?"-":u.minus+"",f=u.nan===void 0?"NaN":u.nan+"";function S(M){var E=(M=_(M)).fill,O=M.align,P=M.sign,I=M.symbol,z=M.zero,U=M.width,R=M.comma,j=M.precision,Z=M.trim,F=M.type;F==="n"?(R=!0,F="g"):s[F]||(j===void 0&&(j=12),Z=!0,F="g"),(z||E==="0"&&O==="=")&&(z=!0,E="0",O="=");var V=I==="$"?g:I==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",H=I==="$"?d:/[%p]/.test(F)?y:"",te=s[F],$=/[defgprs%]/.test(F);function J(X){var K,ee,ie,ae=V,oe=H;if(F==="c")oe=te(X)+oe,X="";else{var fe=(X=+X)<0||1/X<0;if(X=isNaN(X)?f:te(Math.abs(X),j),Z&&(X=function(xe){e:for(var _e,ye=xe.length,Ce=1,ke=-1;Ce<ye;++Ce)switch(xe[Ce]){case".":ke=_e=Ce;break;case"0":ke===0&&(ke=Ce),_e=Ce;break;default:if(!+xe[Ce])break e;ke>0&&(ke=0)}return ke>0?xe.slice(0,ke)+xe.slice(_e+1):xe}(X)),fe&&+X==0&&P!=="+"&&(fe=!1),ae=(fe?P==="("?P:k:P==="-"||P==="("?"":P)+ae,oe=(F==="s"?l[8+w/3]:"")+oe+(fe&&P==="("?")":""),$){for(K=-1,ee=X.length;++K<ee;)if(48>(ie=X.charCodeAt(K))||ie>57){oe=(ie===46?m+X.slice(K+1):X.slice(K))+oe,X=X.slice(0,K);break}}}R&&!z&&(X=b(X,1/0));var ge=ae.length+X.length+oe.length,ve=ge<U?new Array(U-ge+1).join(E):"";switch(R&&z&&(X=b(ve+X,ve.length?U-oe.length:1/0),ve=""),O){case"<":X=ae+X+oe+ve;break;case"=":X=ae+ve+X+oe;break;case"^":X=ve.slice(0,ge=ve.length>>1)+ae+X+oe+ve.slice(ge);break;default:X=ve+ae+X+oe}return x(X)}return j=j===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),J.toString=function(){return M+""},J}return{format:S,formatPrefix:function(M,E){var O,P=S(((M=_(M)).type="f",M)),I=3*Math.max(-8,Math.min(8,Math.floor((O=E,((O=T(Math.abs(O)))?O[1]:NaN)/3)))),z=Math.pow(10,-I),U=l[8+I/3];return function(R){return P(z*R)+U}}}}a=o({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),n=a.format,a.formatPrefix},65704:function(N,L,e){e.r(L),e.d(L,{geoAiry:function(){return R},geoAiryRaw:function(){return U},geoAitoff:function(){return Z},geoAitoffRaw:function(){return j},geoArmadillo:function(){return V},geoArmadilloRaw:function(){return F},geoAugust:function(){return te},geoAugustRaw:function(){return H},geoBaker:function(){return K},geoBakerRaw:function(){return X},geoBerghaus:function(){return ae},geoBerghausRaw:function(){return ie},geoBertin1953:function(){return Ce},geoBertin1953Raw:function(){return ye},geoBoggs:function(){return Ee},geoBoggsRaw:function(){return we},geoBonne:function(){return Me},geoBonneRaw:function(){return be},geoBottomley:function(){return Ne},geoBottomleyRaw:function(){return De},geoBromley:function(){return Ye},geoBromleyRaw:function(){return Be},geoChamberlin:function(){return st},geoChamberlinAfrica:function(){return it},geoChamberlinRaw:function(){return Mt},geoCollignon:function(){return zt},geoCollignonRaw:function(){return St},geoCraig:function(){return Pt},geoCraigRaw:function(){return Ft},geoCraster:function(){return He},geoCrasterRaw:function(){return Ke},geoCylindricalEqualArea:function(){return lt},geoCylindricalEqualAreaRaw:function(){return Je},geoCylindricalStereographic:function(){return je},geoCylindricalStereographicRaw:function(){return ot},geoEckert1:function(){return at},geoEckert1Raw:function(){return Ue},geoEckert2:function(){return gt},geoEckert2Raw:function(){return $e},geoEckert3:function(){return xt},geoEckert3Raw:function(){return yt},geoEckert4:function(){return Lt},geoEckert4Raw:function(){return dt},geoEckert5:function(){return bt},geoEckert5Raw:function(){return Tt},geoEckert6:function(){return Dt},geoEckert6Raw:function(){return Ct},geoEisenlohr:function(){return an},geoEisenlohrRaw:function(){return Xt},geoFahey:function(){return on},geoFaheyRaw:function(){return Vt},geoFoucaut:function(){return Ln},geoFoucautRaw:function(){return Sn},geoFoucautSinusoidal:function(){return Zt},geoFoucautSinusoidalRaw:function(){return fn},geoGilbert:function(){return An},geoGingery:function(){return zn},geoGingeryRaw:function(){return wn},geoGinzburg4:function(){return pr},geoGinzburg4Raw:function(){return sr},geoGinzburg5:function(){return Jn},geoGinzburg5Raw:function(){return ir},geoGinzburg6:function(){return qt},geoGinzburg6Raw:function(){return mr},geoGinzburg8:function(){return dn},geoGinzburg8Raw:function(){return tn},geoGinzburg9:function(){return On},geoGinzburg9Raw:function(){return vn},geoGringorten:function(){return Vn},geoGringortenQuincuncial:function(){return ja},geoGringortenRaw:function(){return Bn},geoGuyou:function(){return Rt},geoGuyouRaw:function(){return bn},geoHammer:function(){return ve},geoHammerRaw:function(){return fe},geoHammerRetroazimuthal:function(){return Tn},geoHammerRetroazimuthalRaw:function(){return rn},geoHealpix:function(){return Zn},geoHealpixRaw:function(){return hn},geoHill:function(){return tr},geoHillRaw:function(){return Wn},geoHomolosine:function(){return yr},geoHomolosineRaw:function(){return xr},geoHufnagel:function(){return lr},geoHufnagelRaw:function(){return Ir},geoHyperelliptical:function(){return ki},geoHyperellipticalRaw:function(){return Wr},geoInterrupt:function(){return bi},geoInterruptedBoggs:function(){return Ba},geoInterruptedHomolosine:function(){return Ss},geoInterruptedMollweide:function(){return dl},geoInterruptedMollweideHemispheres:function(){return Nl},geoInterruptedQuarticAuthalic:function(){return Zu},geoInterruptedSinuMollweide:function(){return jl},geoInterruptedSinusoidal:function(){return Vl},geoKavrayskiy7:function(){return as},geoKavrayskiy7Raw:function(){return Yo},geoLagrange:function(){return Di},geoLagrangeRaw:function(){return Es},geoLarrivee:function(){return Io},geoLarriveeRaw:function(){return Go},geoLaskowski:function(){return os},geoLaskowskiRaw:function(){return _o},geoLittrow:function(){return ss},geoLittrowRaw:function(){return Do},geoLoximuthal:function(){return ls},geoLoximuthalRaw:function(){return Wo},geoMiller:function(){return su},geoMillerRaw:function(){return Ro},geoModifiedStereographic:function(){return Ps},geoModifiedStereographicAlaska:function(){return Yu},geoModifiedStereographicGs48:function(){return Gu},geoModifiedStereographicGs50:function(){return Os},geoModifiedStereographicLee:function(){return Ws},geoModifiedStereographicMiller:function(){return zo},geoModifiedStereographicRaw:function(){return Hl},geoMollweide:function(){return ue},geoMollweideRaw:function(){return le},geoMtFlatPolarParabolic:function(){return lu},geoMtFlatPolarParabolicRaw:function(){return wo},geoMtFlatPolarQuartic:function(){return Zo},geoMtFlatPolarQuarticRaw:function(){return us},geoMtFlatPolarSinusoidal:function(){return cs},geoMtFlatPolarSinusoidalRaw:function(){return Xo},geoNaturalEarth:function(){return ri.Z},geoNaturalEarth2:function(){return Wu},geoNaturalEarth2Raw:function(){return Zs},geoNaturalEarthRaw:function(){return ri.K},geoNellHammer:function(){return Xs},geoNellHammerRaw:function(){return ql},geoNicolosi:function(){return Xu},geoNicolosiRaw:function(){return Yl},geoPatterson:function(){return Iu},geoPattersonRaw:function(){return Wl},geoPeirceQuincuncial:function(){return Ns},geoPierceQuincuncial:function(){return Ns},geoPolyconic:function(){return Rs},geoPolyconicRaw:function(){return Ks},geoPolyhedral:function(){return vi},geoPolyhedralButterfly:function(){return $s},geoPolyhedralCollignon:function(){return _l},geoPolyhedralWaterman:function(){return wl},geoProject:function(){return Tl},geoQuantize:function(){return Ko},geoQuincuncial:function(){return gs},geoRectangularPolyconic:function(){return po},geoRectangularPolyconicRaw:function(){return ho},geoRobinson:function(){return Or},geoRobinsonRaw:function(){return Ao},geoSatellite:function(){return uu},geoSatelliteRaw:function(){return kl},geoSinuMollweide:function(){return fr},geoSinuMollweideRaw:function(){return hr},geoSinusoidal:function(){return pe},geoSinusoidalRaw:function(){return Fe},geoStitch:function(){return ya},geoTimes:function(){return No},geoTimesRaw:function(){return Ua},geoTwoPointAzimuthal:function(){return Ha},geoTwoPointAzimuthalRaw:function(){return tl},geoTwoPointAzimuthalUsa:function(){return nl},geoTwoPointEquidistant:function(){return Us},geoTwoPointEquidistantRaw:function(){return ii},geoTwoPointEquidistantUsa:function(){return jo},geoVanDerGrinten:function(){return rl},geoVanDerGrinten2:function(){return Lo},geoVanDerGrinten2Raw:function(){return il},geoVanDerGrinten3:function(){return Vs},geoVanDerGrinten3Raw:function(){return Ei},geoVanDerGrinten4:function(){return Hr},geoVanDerGrinten4Raw:function(){return Dr},geoVanDerGrintenRaw:function(){return Eo},geoWagner:function(){return Uo},geoWagner4:function(){return Du},geoWagner4Raw:function(){return mi},geoWagner6:function(){return _i},geoWagner6Raw:function(){return oo},geoWagner7:function(){return es},geoWagnerRaw:function(){return ao},geoWiechel:function(){return Ka},geoWiechelRaw:function(){return Ri},geoWinkel3:function(){return cu},geoWinkel3Raw:function(){return bs}});var T=e(15002),w=Math.abs,i=Math.atan,_=Math.atan2,v=Math.cos,h=Math.exp,s=Math.floor,t=Math.log,a=Math.max,n=Math.min,r=Math.pow,l=Math.round,o=Math.sign||function(Qe){return Qe>0?1:Qe<0?-1:0},u=Math.sin,p=Math.tan,c=1e-6,b=1e-12,g=Math.PI,d=g/2,m=g/4,x=Math.SQRT1_2,y=P(2),k=P(g),f=2*g,S=180/g,M=g/180;function E(Qe){return Qe>1?d:Qe<-1?-d:Math.asin(Qe)}function O(Qe){return Qe>1?0:Qe<-1?g:Math.acos(Qe)}function P(Qe){return Qe>0?Math.sqrt(Qe):0}function I(Qe){return(h(Qe)-h(-Qe))/2}function z(Qe){return(h(Qe)+h(-Qe))/2}function U(Qe){var nt=p(Qe/2),ut=2*t(v(Qe/2))/(nt*nt);function B(G,Y){var C=v(G),q=v(Y),Q=u(Y),ne=q*C,he=-((1-ne?t((1+ne)/2)/(1-ne):-.5)+ut/(1+ne));return[he*q*u(G),he*Q]}return B.invert=function(G,Y){var C,q=P(G*G+Y*Y),Q=-Qe/2,ne=50;if(!q)return[0,0];do{var he=Q/2,me=v(he),Pe=u(he),ze=Pe/me,qe=-t(w(me));Q-=C=(2/ze*qe-ut*ze-q)/(-qe/(Pe*Pe)+1-ut/(2*me*me))*(me<0?.7:1)}while(w(C)>c&&--ne>0);var Ze=u(Q);return[_(G*Ze,q*v(Q)),E(Y*Ze/q)]},B}function R(){var Qe=d,nt=(0,T.r)(U),ut=nt(Qe);return ut.radius=function(B){return arguments.length?nt(Qe=B*M):Qe*S},ut.scale(179.976).clipAngle(147)}function j(Qe,nt){var ut=v(nt),B=function(G){return G?G/Math.sin(G):1}(O(ut*v(Qe/=2)));return[2*ut*u(Qe)*B,u(nt)*B]}function Z(){return(0,T.Z)(j).scale(152.63)}function F(Qe){var nt=u(Qe),ut=v(Qe),B=Qe>=0?1:-1,G=p(B*Qe),Y=(1+nt-ut)/2;function C(q,Q){var ne=v(Q),he=v(q/=2);return[(1+ne)*u(q),(B*Q>-_(he,G)-.001?0:10*-B)+Y+u(Q)*ut-(1+ne)*nt*he]}return C.invert=function(q,Q){var ne=0,he=0,me=50;do{var Pe=v(ne),ze=u(ne),qe=v(he),Ze=u(he),rt=1+qe,pt=rt*ze-q,vt=Y+Ze*ut-rt*nt*Pe-Q,kt=rt*Pe/2,Ot=-ze*Ze,Et=nt*rt*ze/2,jt=ut*qe+nt*Pe*Ze,It=Ot*Et-jt*kt,Jt=(vt*Ot-pt*jt)/It/2,Gt=(pt*Et-vt*kt)/It;w(Gt)>2&&(Gt/=2),ne-=Jt,he-=Gt}while((w(Jt)>c||w(Gt)>c)&&--me>0);return B*he>-_(v(ne),G)-.001?[2*ne,he]:null},C}function V(){var Qe=20*M,nt=Qe>=0?1:-1,ut=p(nt*Qe),B=(0,T.r)(F),G=B(Qe),Y=G.stream;return G.parallel=function(C){return arguments.length?(ut=p((nt=(Qe=C*M)>=0?1:-1)*Qe),B(Qe)):Qe*S},G.stream=function(C){var q=G.rotate(),Q=Y(C),ne=(G.rotate([0,0]),Y(C)),he=G.precision();return G.rotate(q),Q.sphere=function(){ne.polygonStart(),ne.lineStart();for(var me=-180*nt;nt*me<180;me+=90*nt)ne.point(me,90*nt);if(Qe)for(;nt*(me-=3*nt*he)>=-180;)ne.point(me,nt*-_(v(me*M/2),ut)*S);ne.lineEnd(),ne.polygonEnd()},Q},G.scale(218.695).center([0,28.0974])}function H(Qe,nt){var ut=p(nt/2),B=P(1-ut*ut),G=1+B*v(Qe/=2),Y=u(Qe)*B/G,C=ut/G,q=Y*Y,Q=C*C;return[1.3333333333333333*Y*(3+q-3*Q),1.3333333333333333*C*(3+3*q-Q)]}function te(){return(0,T.Z)(H).scale(66.1603)}j.invert=function(Qe,nt){if(!(Qe*Qe+4*nt*nt>g*g+c)){var ut=Qe,B=nt,G=25;do{var Y,C=u(ut),q=u(ut/2),Q=v(ut/2),ne=u(B),he=v(B),me=u(2*B),Pe=ne*ne,ze=he*he,qe=q*q,Ze=1-ze*Q*Q,rt=Ze?O(he*Q)*P(Y=1/Ze):Y=0,pt=2*rt*he*q-Qe,vt=rt*ne-nt,kt=Y*(ze*qe+rt*he*Q*Pe),Ot=Y*(.5*C*me-2*rt*ne*q),Et=.25*Y*(me*q-rt*ne*ze*C),jt=Y*(Pe*Q+rt*qe*he),It=Ot*Et-jt*kt;if(!It)break;var Jt=(vt*Ot-pt*jt)/It,Gt=(pt*Et-vt*kt)/It;ut-=Jt,B-=Gt}while((w(Jt)>c||w(Gt)>c)&&--G>0);return[ut,B]}},H.invert=function(Qe,nt){if(nt*=.375,!(Qe*=.375)&&w(nt)>1)return null;var ut=1+Qe*Qe+nt*nt,B=P((ut-P(ut*ut-4*nt*nt))/2),G=E(B)/3,Y=B?function(ne){return t(ne+P(ne*ne-1))}(w(nt/B))/3:function(ne){return t(ne+P(ne*ne+1))}(w(Qe))/3,C=v(G),q=z(Y),Q=q*q-C*C;return[2*o(Qe)*_(I(Y)*C,.25-Q),2*o(nt)*_(q*u(G),.25+Q)]};var $=P(8),J=t(1+y);function X(Qe,nt){var ut=w(nt);return ut<m?[Qe,t(p(m+nt/2))]:[Qe*v(ut)*(2*y-1/u(ut)),o(nt)*(2*y*(ut-m)-t(p(ut/2)))]}function K(){return(0,T.Z)(X).scale(112.314)}X.invert=function(Qe,nt){if((B=w(nt))<J)return[Qe,2*i(h(nt))-d];var ut,B,G=m,Y=25;do{var C=v(G/2),q=p(G/2);G-=ut=($*(G-m)-t(q)-B)/($-C*C/(2*q))}while(w(ut)>b&&--Y>0);return[Qe/(v(G)*($-1/u(G))),o(nt)*G]};var ee=e(17889);function ie(Qe){var nt=2*g/Qe;function ut(B,G){var Y=(0,ee.N)(B,G);if(w(B)>d){var C=_(Y[1],Y[0]),q=P(Y[0]*Y[0]+Y[1]*Y[1]),Q=nt*l((C-d)/nt)+d,ne=_(u(C-=Q),2-v(C));C=Q+E(g/q*u(ne))-ne,Y[0]=q*v(C),Y[1]=q*u(C)}return Y}return ut.invert=function(B,G){var Y=P(B*B+G*G);if(Y>d){var C=_(G,B),q=nt*l((C-d)/nt)+d,Q=C>q?-1:1,ne=Y*v(q-C),he=1/p(Q*O((ne-g)/P(g*(g-2*ne)+Y*Y)));C=q+2*i((he+Q*P(he*he-3))/3),B=Y*v(C),G=Y*u(C)}return ee.N.invert(B,G)},ut}function ae(){var Qe=5,nt=(0,T.r)(ie),ut=nt(Qe),B=ut.stream,G=.01,Y=-v(G*M),C=u(G*M);return ut.lobes=function(q){return arguments.length?nt(Qe=+q):Qe},ut.stream=function(q){var Q=ut.rotate(),ne=B(q),he=(ut.rotate([0,0]),B(q));return ut.rotate(Q),ne.sphere=function(){he.polygonStart(),he.lineStart();for(var me=0,Pe=360/Qe,ze=2*g/Qe,qe=90-180/Qe,Ze=d;me<Qe;++me,qe-=Pe,Ze-=ze)he.point(_(C*v(Ze),Y)*S,E(C*u(Ze))*S),qe<-90?(he.point(-90,-180-qe-G),he.point(-90,-180-qe+G)):(he.point(90,qe+G),he.point(90,qe-G));he.lineEnd(),he.polygonEnd()},ne},ut.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var oe=e(12956);function fe(Qe,nt){if(arguments.length<2&&(nt=Qe),nt===1)return oe.l;if(nt===1/0)return ge;function ut(B,G){var Y=(0,oe.l)(B/nt,G);return Y[0]*=Qe,Y}return ut.invert=function(B,G){var Y=oe.l.invert(B/Qe,G);return Y[0]*=nt,Y},ut}function ge(Qe,nt){return[Qe*v(nt)/v(nt/=2),2*u(nt)]}function ve(){var Qe=2,nt=(0,T.r)(fe),ut=nt(Qe);return ut.coefficient=function(B){return arguments.length?nt(Qe=+B):Qe},ut.scale(169.529)}function xe(Qe,nt,ut){var B,G,Y,C=100;ut=ut===void 0?0:+ut,nt=+nt;do(G=Qe(ut))===(Y=Qe(ut+c))&&(Y=G+c),ut-=B=-1*c*(G-nt)/(G-Y);while(C-- >0&&w(B)>c);return C<0?NaN:ut}function _e(Qe,nt,ut){return nt===void 0&&(nt=40),ut===void 0&&(ut=b),function(B,G,Y,C){var q,Q,ne;Y=Y===void 0?0:+Y,C=C===void 0?0:+C;for(var he=0;he<nt;he++){var me=Qe(Y,C),Pe=me[0]-B,ze=me[1]-G;if(w(Pe)<ut&&w(ze)<ut)break;var qe=Pe*Pe+ze*ze;if(qe>q)Y-=Q/=2,C-=ne/=2;else{q=qe;var Ze=(Y>0?-1:1)*ut,rt=(C>0?-1:1)*ut,pt=Qe(Y+Ze,C),vt=Qe(Y,C+rt),kt=(pt[0]-me[0])/Ze,Ot=(pt[1]-me[1])/Ze,Et=(vt[0]-me[0])/rt,jt=(vt[1]-me[1])/rt,It=jt*kt-Ot*Et,Jt=(w(It)<.5?.5:1)/It;if(Y+=Q=(ze*Et-Pe*jt)*Jt,C+=ne=(Pe*Ot-ze*kt)*Jt,w(Q)<ut&&w(ne)<ut)break}}return[Y,C]}}function ye(){var Qe=fe(1.68,2);function nt(ut,B){if(ut+B<-1.4){var G=(ut-B+1.6)*(ut+B+1.4)/8;ut+=G,B-=.8*G*u(B+g/2)}var Y=Qe(ut,B),C=(1-v(ut*B))/12;return Y[1]<0&&(Y[0]*=1+C),Y[1]>0&&(Y[1]*=1+C/1.5*Y[0]*Y[0]),Y}return nt.invert=_e(nt),nt}function Ce(){return(0,T.Z)(ye()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ke(Qe,nt){var ut,B=Qe*u(nt),G=30;do nt-=ut=(nt+u(nt)-B)/(1+v(nt));while(w(ut)>c&&--G>0);return nt/2}function Te(Qe,nt,ut){function B(G,Y){return[Qe*G*v(Y=ke(ut,Y)),nt*u(Y)]}return B.invert=function(G,Y){return Y=E(Y/nt),[G/(Qe*v(Y)),E((2*Y+u(2*Y))/ut)]},B}ge.invert=function(Qe,nt){var ut=2*E(nt/2);return[Qe*v(ut/2)/v(ut),ut]};var le=Te(y/d,y,g);function ue(){return(0,T.Z)(le).scale(169.529)}var de=2.00276,Le=1.11072;function we(Qe,nt){var ut=ke(g,nt);return[de*Qe/(1/v(nt)+Le/v(ut)),(nt+y*u(ut))/de]}function Ee(){return(0,T.Z)(we).scale(160.857)}function Oe(Qe){var nt=0,ut=(0,T.r)(Qe),B=ut(nt);return B.parallel=function(G){return arguments.length?ut(nt=G*M):nt*S},B}function Fe(Qe,nt){return[Qe*v(nt),nt]}function pe(){return(0,T.Z)(Fe).scale(152.63)}function be(Qe){if(!Qe)return Fe;var nt=1/p(Qe);function ut(B,G){var Y=nt+Qe-G,C=Y&&B*v(G)/Y;return[Y*u(C),nt-Y*v(C)]}return ut.invert=function(B,G){var Y=P(B*B+(G=nt-G)*G),C=nt+Qe-Y;return[Y/v(C)*_(B,G),C]},ut}function Me(){return Oe(be).scale(123.082).center([0,26.1441]).parallel(45)}function De(Qe){function nt(ut,B){var G=d-B,Y=G&&ut*Qe*u(G)/G;return[G*u(Y)/Qe,d-G*v(Y)]}return nt.invert=function(ut,B){var G=ut*Qe,Y=d-B,C=P(G*G+Y*Y),q=_(G,Y);return[(C?C/u(C):1)*q/Qe,d-C]},nt}function Ne(){var Qe=.5,nt=(0,T.r)(De),ut=nt(Qe);return ut.fraction=function(B){return arguments.length?nt(Qe=+B):Qe},ut.scale(158.837)}we.invert=function(Qe,nt){var ut,B,G=de*nt,Y=nt<0?-m:m,C=25;do B=G-y*u(Y),Y-=ut=(u(2*Y)+2*Y-g*u(B))/(2*v(2*Y)+2+g*v(B)*y*v(Y));while(w(ut)>c&&--C>0);return B=G-y*u(Y),[Qe*(1/v(B)+Le/v(Y))/de,B]},Fe.invert=function(Qe,nt){return[Qe/v(nt),nt]};var Be=Te(1,4/g,g);function Ye(){return(0,T.Z)(Be).scale(152.63)}var We=e(66624),et=e(49386);function ft(Qe,nt,ut,B,G,Y){var C,q=v(Y);if(w(Qe)>1||w(Y)>1)C=O(ut*G+nt*B*q);else{var Q=u(Qe/2),ne=u(Y/2);C=2*E(P(Q*Q+nt*B*ne*ne))}return w(C)>c?[C,_(B*u(Y),nt*G-ut*B*q)]:[0,0]}function ht(Qe,nt,ut){return O((Qe*Qe+nt*nt-ut*ut)/(2*Qe*nt))}function mt(Qe){return Qe-2*g*s((Qe+g)/(2*g))}function Mt(Qe,nt,ut){for(var B,G=[[Qe[0],Qe[1],u(Qe[1]),v(Qe[1])],[nt[0],nt[1],u(nt[1]),v(nt[1])],[ut[0],ut[1],u(ut[1]),v(ut[1])]],Y=G[2],C=0;C<3;++C,Y=B)B=G[C],Y.v=ft(B[1]-Y[1],Y[3],Y[2],B[3],B[2],B[0]-Y[0]),Y.point=[0,0];var q=ht(G[0].v[0],G[2].v[0],G[1].v[0]),Q=ht(G[0].v[0],G[1].v[0],G[2].v[0]),ne=g-q;G[2].point[1]=0,G[0].point[0]=-(G[1].point[0]=G[0].v[0]/2);var he=[G[2].point[0]=G[0].point[0]+G[2].v[0]*v(q),2*(G[0].point[1]=G[1].point[1]=G[2].v[0]*u(q))];return function(me,Pe){var ze,qe=u(Pe),Ze=v(Pe),rt=new Array(3);for(ze=0;ze<3;++ze){var pt=G[ze];if(rt[ze]=ft(Pe-pt[1],pt[3],pt[2],Ze,qe,me-pt[0]),!rt[ze][0])return pt.point;rt[ze][1]=mt(rt[ze][1]-pt.v[1])}var vt=he.slice();for(ze=0;ze<3;++ze){var kt=ze==2?0:ze+1,Ot=ht(G[ze].v[0],rt[ze][0],rt[kt][0]);rt[ze][1]<0&&(Ot=-Ot),ze?ze==1?(Ot=Q-Ot,vt[0]-=rt[ze][0]*v(Ot),vt[1]-=rt[ze][0]*u(Ot)):(Ot=ne-Ot,vt[0]+=rt[ze][0]*v(Ot),vt[1]+=rt[ze][0]*u(Ot)):(vt[0]+=rt[ze][0]*v(Ot),vt[1]-=rt[ze][0]*u(Ot))}return vt[0]/=3,vt[1]/=3,vt}}function _t(Qe){return Qe[0]*=M,Qe[1]*=M,Qe}function it(){return st([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function st(Qe,nt,ut){var B=(0,We.Z)({type:"MultiPoint",coordinates:[Qe,nt,ut]}),G=[-B[0],-B[1]],Y=(0,et.Z)(G),C=Mt(_t(Y(Qe)),_t(Y(nt)),_t(Y(ut)));C.invert=_e(C);var q=(0,T.Z)(C).rotate(G),Q=q.center;return delete q.rotate,q.center=function(ne){return arguments.length?Q(Y(ne)):Y.invert(Q())},q.clipAngle(90)}function St(Qe,nt){var ut=P(1-u(nt));return[2/k*Qe*ut,k*(1-ut)]}function zt(){return(0,T.Z)(St).scale(95.6464).center([0,30])}function Ft(Qe){var nt=p(Qe);function ut(B,G){return[B,(B?B/u(B):1)*(u(G)*v(B)-nt*v(G))]}return ut.invert=nt?function(B,G){B&&(G*=u(B)/B);var Y=v(B);return[B,2*_(P(Y*Y+nt*nt-G*G)-Y,nt-G)]}:function(B,G){return[B,E(B?G*p(B)/B:G)]},ut}function Pt(){return Oe(Ft).scale(249.828).clipAngle(90)}St.invert=function(Qe,nt){var ut=(ut=nt/k-1)*ut;return[ut>0?Qe*P(g/ut)/2:0,E(1-ut)]};var Xe=P(3);function Ke(Qe,nt){return[Xe*Qe*(2*v(2*nt/3)-1)/k,Xe*k*u(nt/3)]}function He(){return(0,T.Z)(Ke).scale(156.19)}function Je(Qe){var nt=v(Qe);function ut(B,G){return[B*nt,u(G)/nt]}return ut.invert=function(B,G){return[B/nt,E(G*nt)]},ut}function lt(){return Oe(Je).parallel(38.58).scale(195.044)}function ot(Qe){var nt=v(Qe);function ut(B,G){return[B*nt,(1+nt)*p(G/2)]}return ut.invert=function(B,G){return[B/nt,2*i(G/(1+nt))]},ut}function je(){return Oe(ot).scale(124.75)}function Ue(Qe,nt){var ut=P(8/(3*g));return[ut*Qe*(1-w(nt)/g),ut*nt]}function at(){return(0,T.Z)(Ue).scale(165.664)}function $e(Qe,nt){var ut=P(4-3*u(w(nt)));return[2/P(6*g)*Qe*ut,o(nt)*P(2*g/3)*(2-ut)]}function gt(){return(0,T.Z)($e).scale(165.664)}function yt(Qe,nt){var ut=P(g*(4+g));return[2/ut*Qe*(1+P(1-4*nt*nt/(g*g))),4/ut*nt]}function xt(){return(0,T.Z)(yt).scale(180.739)}function dt(Qe,nt){var ut=(2+d)*u(nt);nt/=2;for(var B=0,G=1/0;B<10&&w(G)>c;B++){var Y=v(nt);nt-=G=(nt+u(nt)*(Y+2)-ut)/(2*Y*(1+Y))}return[2/P(g*(4+g))*Qe*(1+v(nt)),2*P(g/(4+g))*u(nt)]}function Lt(){return(0,T.Z)(dt).scale(180.739)}function Tt(Qe,nt){return[Qe*(1+v(nt))/P(2+g),2*nt/P(2+g)]}function bt(){return(0,T.Z)(Tt).scale(173.044)}function Ct(Qe,nt){for(var ut=(1+d)*u(nt),B=0,G=1/0;B<10&&w(G)>c;B++)nt-=G=(nt+u(nt)-ut)/(1+v(nt));return ut=P(2+g),[Qe*(1+v(nt))/ut,2*nt/ut]}function Dt(){return(0,T.Z)(Ct).scale(173.044)}Ke.invert=function(Qe,nt){var ut=3*E(nt/(Xe*k));return[k*Qe/(Xe*(2*v(2*ut/3)-1)),ut]},Ue.invert=function(Qe,nt){var ut=P(8/(3*g)),B=nt/ut;return[Qe/(ut*(1-w(B)/g)),B]},$e.invert=function(Qe,nt){var ut=2-w(nt)/P(2*g/3);return[Qe*P(6*g)/(2*ut),o(nt)*E((4-ut*ut)/3)]},yt.invert=function(Qe,nt){var ut=P(g*(4+g))/2;return[Qe*ut/(1+P(1-nt*nt*(4+g)/(4*g))),nt*ut/2]},dt.invert=function(Qe,nt){var ut=nt*P((4+g)/g)/2,B=E(ut),G=v(B);return[Qe/(2/P(g*(4+g))*(1+G)),E((B+ut*(G+2))/(2+d))]},Tt.invert=function(Qe,nt){var ut=P(2+g),B=nt*ut/2;return[ut*Qe/(1+v(B)),B]},Ct.invert=function(Qe,nt){var ut=1+d,B=P(ut/2);return[2*Qe*B/(1+v(nt*=B)),E((nt+u(nt))/ut)]};var Bt=3+2*y;function Xt(Qe,nt){var ut=u(Qe/=2),B=v(Qe),G=P(v(nt)),Y=v(nt/=2),C=u(nt)/(Y+y*B*G),q=P(2/(1+C*C)),Q=P((y*Y+(B+ut)*G)/(y*Y+(B-ut)*G));return[Bt*(q*(Q-1/Q)-2*t(Q)),Bt*(q*C*(Q+1/Q)-2*i(C))]}function an(){return(0,T.Z)(Xt).scale(62.5271)}Xt.invert=function(Qe,nt){if(!(ut=H.invert(Qe/1.2,1.065*nt)))return null;var ut,B=ut[0],G=ut[1],Y=20;Qe/=Bt,nt/=Bt;do{var C=B/2,q=G/2,Q=u(C),ne=v(C),he=u(q),me=v(q),Pe=v(G),ze=P(Pe),qe=he/(me+y*ne*ze),Ze=qe*qe,rt=P(2/(1+Ze)),pt=(y*me+(ne+Q)*ze)/(y*me+(ne-Q)*ze),vt=P(pt),kt=vt-1/vt,Ot=vt+1/vt,Et=rt*kt-2*t(vt)-Qe,jt=rt*qe*Ot-2*i(qe)-nt,It=he&&x*ze*Q*Ze/he,Jt=(y*ne*me+ze)/(2*(me+y*ne*ze)*(me+y*ne*ze)*ze),Gt=-.5*qe*rt*rt*rt,Ht=Gt*It,mn=Gt*Jt,yn=(yn=2*me+y*ze*(ne-Q))*yn*vt,In=(y*ne*me*ze+Pe)/yn,Rn=-y*Q*he/(ze*yn),Yn=kt*Ht-2*In/vt+rt*(In+In/pt),er=kt*mn-2*Rn/vt+rt*(Rn+Rn/pt),dr=qe*Ot*Ht-2*It/(1+Ze)+rt*Ot*It+rt*qe*(In-In/pt),Xn=qe*Ot*mn-2*Jt/(1+Ze)+rt*Ot*Jt+rt*qe*(Rn-Rn/pt),cr=er*dr-Xn*Yn;if(!cr)break;var Tr=(jt*er-Et*Xn)/cr,Rr=(Et*dr-jt*Yn)/cr;B-=Tr,G=a(-d,n(d,G-Rr))}while((w(Tr)>c||w(Rr)>c)&&--Y>0);return w(w(G)-d)<c?[0,G]:Y&&[B,G]};var Wt=v(35*M);function Vt(Qe,nt){var ut=p(nt/2);return[Qe*Wt*P(1-ut*ut),(1+Wt)*ut]}function on(){return(0,T.Z)(Vt).scale(137.152)}function Sn(Qe,nt){var ut=nt/2,B=v(ut);return[2*Qe/k*v(nt)*B*B,k*p(ut)]}function Ln(){return(0,T.Z)(Sn).scale(135.264)}function fn(Qe){var nt=1-Qe,ut=G(g,0)[0]-G(-g,0)[0],B=P(2*(G(0,d)[1]-G(0,-d)[1])/ut);function G(q,Q){var ne=v(Q),he=u(Q);return[ne/(nt+Qe*ne)*q,nt*Q+Qe*he]}function Y(q,Q){var ne=G(q,Q);return[ne[0]*B,ne[1]/B]}function C(q){return Y(0,q)[1]}return Y.invert=function(q,Q){var ne=xe(C,Q);return[q/B*(Qe+nt/v(ne)),ne]},Y}function Zt(){var Qe=.5,nt=(0,T.r)(fn),ut=nt(Qe);return ut.alpha=function(B){return arguments.length?nt(Qe=+B):Qe},ut.scale(168.725)}Vt.invert=function(Qe,nt){var ut=nt/(1+Wt);return[Qe&&Qe/(Wt*P(1-ut*ut)),2*i(ut)]},Sn.invert=function(Qe,nt){var ut=i(nt/k),B=v(ut),G=2*ut;return[Qe*k/2/(v(G)*B*B),G]};var ln=e(57962),nn=e(97492);function cn(Qe){return[Qe[0]/2,E(p(Qe[1]/2*M))*S]}function kn(Qe){return[2*Qe[0],2*i(u(Qe[1]*M))*S]}function An(Qe){Qe==null&&(Qe=ln.Z);var nt=Qe(),ut=(0,nn.Z)().scale(S).precision(0).clipAngle(null).translate([0,0]);function B(Y){return nt(cn(Y))}function G(Y){B[Y]=function(){return arguments.length?(nt[Y].apply(nt,arguments),B):nt[Y]()}}return nt.invert&&(B.invert=function(Y){return kn(nt.invert(Y))}),B.stream=function(Y){var C=nt.stream(Y),q=ut.stream({point:function(Q,ne){C.point(Q/2,E(p(-ne/2*M))*S)},lineStart:function(){C.lineStart()},lineEnd:function(){C.lineEnd()},polygonStart:function(){C.polygonStart()},polygonEnd:function(){C.polygonEnd()}});return q.sphere=C.sphere,q},B.rotate=function(Y){return arguments.length?(ut.rotate(Y),B):ut.rotate()},B.center=function(Y){return arguments.length?(nt.center(cn(Y)),B):kn(nt.center())},G("angle"),G("clipAngle"),G("clipExtent"),G("fitExtent"),G("fitHeight"),G("fitSize"),G("fitWidth"),G("scale"),G("translate"),G("precision"),B.scale(249.5)}function wn(Qe,nt){var ut=2*g/nt,B=Qe*Qe;function G(Y,C){var q=(0,ee.N)(Y,C),Q=q[0],ne=q[1],he=Q*Q+ne*ne;if(he>B){var me=P(he),Pe=_(ne,Q),ze=ut*l(Pe/ut),qe=Pe-ze,Ze=Qe*v(qe),rt=(Qe*u(qe)-qe*u(Ze))/(d-Ze),pt=Cn(qe,rt),vt=(g-Qe)/_n(pt,Ze,g);Q=me;var kt,Ot=50;do Q-=kt=(Qe+_n(pt,Ze,Q)*vt-me)/(pt(Q)*vt);while(w(kt)>c&&--Ot>0);ne=qe*u(Q),Q<d&&(ne-=rt*(Q-d));var Et=u(ze),jt=v(ze);q[0]=Q*jt-ne*Et,q[1]=Q*Et+ne*jt}return q}return G.invert=function(Y,C){var q=Y*Y+C*C;if(q>B){var Q=P(q),ne=_(C,Y),he=ut*l(ne/ut),me=ne-he;Y=Q*v(me),C=Q*u(me);for(var Pe=Y-d,ze=u(Y),qe=C/ze,Ze=Y<d?1/0:0,rt=10;;){var pt=Qe*u(qe),vt=Qe*v(qe),kt=u(vt),Ot=d-vt,Et=(pt-qe*kt)/Ot,jt=Cn(qe,Et);if(w(Ze)<b||!--rt)break;qe-=Ze=(qe*ze-Et*Pe-C)/(ze-2*Pe*(Ot*(vt+qe*pt*v(vt)-kt)-pt*(pt-qe*kt))/(Ot*Ot))}Y=(Q=Qe+_n(jt,vt,Y)*(g-Qe)/_n(jt,vt,g))*v(ne=he+qe),C=Q*u(ne)}return ee.N.invert(Y,C)},G}function Cn(Qe,nt){return function(ut){var B=Qe*v(ut);return ut<d&&(B-=nt),P(1+B*B)}}function _n(Qe,nt,ut){for(var B=(ut-nt)/50,G=Qe(nt)+Qe(ut),Y=1,C=nt;Y<50;++Y)G+=2*Qe(C+=B);return .5*G*B}function zn(){var Qe=6,nt=30*M,ut=v(nt),B=u(nt),G=(0,T.r)(wn),Y=G(nt,Qe),C=Y.stream,q=-v(.01*M),Q=u(.01*M);return Y.radius=function(ne){return arguments.length?(ut=v(nt=ne*M),B=u(nt),G(nt,Qe)):nt*S},Y.lobes=function(ne){return arguments.length?G(nt,Qe=+ne):Qe},Y.stream=function(ne){var he=Y.rotate(),me=C(ne),Pe=(Y.rotate([0,0]),C(ne));return Y.rotate(he),me.sphere=function(){Pe.polygonStart(),Pe.lineStart();for(var ze=0,qe=2*g/Qe,Ze=0;ze<Qe;++ze,Ze-=qe)Pe.point(_(Q*v(Ze),q)*S,E(Q*u(Ze))*S),Pe.point(_(B*v(Ze-qe/2),ut)*S,E(B*u(Ze-qe/2))*S);Pe.lineEnd(),Pe.polygonEnd()},me},Y.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function qn(Qe,nt,ut,B,G,Y,C,q){function Q(ne,he){if(!he)return[Qe*ne/g,0];var me=he*he,Pe=Qe+me*(nt+me*(ut+me*B)),ze=he*(G-1+me*(Y-q+me*C)),qe=(Pe*Pe+ze*ze)/(2*ze),Ze=ne*E(Pe/qe)/g;return[qe*u(Ze),he*(1+me*q)+qe*(1-v(Ze))]}return arguments.length<8&&(q=0),Q.invert=function(ne,he){var me,Pe,ze=g*ne/Qe,qe=he,Ze=50;do{var rt=qe*qe,pt=Qe+rt*(nt+rt*(ut+rt*B)),vt=qe*(G-1+rt*(Y-q+rt*C)),kt=pt*pt+vt*vt,Ot=2*vt,Et=kt/Ot,jt=Et*Et,It=E(pt/Et)/g,Jt=ze*It,Gt=pt*pt,Ht=(2*nt+rt*(4*ut+6*rt*B))*qe,mn=G+rt*(3*Y+5*rt*C),yn=(2*(pt*Ht+vt*(mn-1))*Ot-kt*(2*(mn-1)))/(Ot*Ot),In=v(Jt),Rn=u(Jt),Yn=Et*In,er=Et*Rn,dr=ze/g*(1/P(1-Gt/jt))*(Ht*Et-pt*yn)/jt,Xn=er-ne,cr=qe*(1+rt*q)+Et-Yn-he,Tr=yn*Rn+Yn*dr,Rr=Yn*It,$n=1+yn-(yn*In-er*dr),ur=er*It,Sr=Tr*ur-$n*Rr;if(!Sr)break;ze-=me=(cr*Tr-Xn*$n)/Sr,qe-=Pe=(Xn*ur-cr*Rr)/Sr}while((w(me)>c||w(Pe)>c)&&--Ze>0);return[ze,qe]},Q}var sr=qn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function pr(){return(0,T.Z)(sr).scale(149.995)}var ir=qn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Jn(){return(0,T.Z)(ir).scale(153.93)}var mr=qn(5/6*g,-.62636,-.0344,0,1.3493,-.05524,0,.045);function qt(){return(0,T.Z)(mr).scale(130.945)}function tn(Qe,nt){var ut=Qe*Qe,B=nt*nt;return[Qe*(1-.162388*B)*(.87-952426e-9*ut*ut),nt*(1+B/12)]}function dn(){return(0,T.Z)(tn).scale(131.747)}tn.invert=function(Qe,nt){var ut,B=Qe,G=nt,Y=50;do{var C=G*G;G-=ut=(G*(1+C/12)-nt)/(1+C/4)}while(w(ut)>c&&--Y>0);Y=50,Qe/=1-.162388*C;do{var q=(q=B*B)*q;B-=ut=(B*(.87-952426e-9*q)-Qe)/(.87-.00476213*q)}while(w(ut)>c&&--Y>0);return[B,G]};var vn=qn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function On(){return(0,T.Z)(vn).scale(131.087)}function Hn(Qe){var nt=Qe(d,0)[0]-Qe(-d,0)[0];function ut(B,G){var Y=B>0?-.5:.5,C=Qe(B+Y*g,G);return C[0]-=Y*nt,C}return Qe.invert&&(ut.invert=function(B,G){var Y=B>0?-.5:.5,C=Qe.invert(B+Y*nt,G),q=C[0]-Y*g;return q<-g?q+=2*g:q>g&&(q-=2*g),C[0]=q,C}),ut}function Bn(Qe,nt){var ut=o(Qe),B=o(nt),G=v(nt),Y=v(Qe)*G,C=u(Qe)*G,q=u(B*nt);Qe=w(_(C,q)),nt=E(Y),w(Qe-d)>c&&(Qe%=d);var Q=function(ne,he){if(he===d)return[0,0];var me,Pe,ze=u(he),qe=ze*ze,Ze=qe*qe,rt=1+Ze,pt=1+3*Ze,vt=1-Ze,kt=E(1/P(rt)),Ot=vt+qe*rt*kt,Et=(1-ze)/Ot,jt=P(Et),It=Et*rt,Jt=P(It),Gt=jt*vt;if(ne===0)return[0,-(Gt+qe*Jt)];var Ht,mn=v(he),yn=1/mn,In=2*ze*mn,Rn=(-Ot*mn-(1-ze)*((-3*qe+kt*pt)*In))/(Ot*Ot),Yn=-yn*In,er=-yn*(qe*rt*Rn+Et*pt*In),dr=-2*yn*(vt*(.5*Rn/jt)-2*qe*jt*In),Xn=4*ne/g;if(ne>.222*g||he<g/4&&ne>.175*g){if(me=(Gt+qe*P(It*(1+Ze)-Gt*Gt))/(1+Ze),ne>g/4)return[me,me];var cr=me,Tr=.5*me;me=.5*(Tr+cr),Pe=50;do{var Rr=me*(dr+Yn*P(It-me*me))+er*E(me/Jt)-Xn;if(!Rr)break;Rr<0?Tr=me:cr=me,me=.5*(Tr+cr)}while(w(cr-Tr)>c&&--Pe>0)}else{me=c,Pe=25;do{var $n=me*me,ur=P(It-$n),Sr=dr+Yn*ur,gr=me*Sr+er*E(me/Jt)-Xn;me-=Ht=ur?gr/(Sr+(er-Yn*$n)/ur):0}while(w(Ht)>c&&--Pe>0)}return[me,-Gt-qe*P(It-me*me)]}(Qe>g/4?d-Qe:Qe,nt);return Qe>g/4&&(q=Q[0],Q[0]=-Q[1],Q[1]=-q),Q[0]*=ut,Q[1]*=-B,Q}function Vn(){return(0,T.Z)(Hn(Bn)).scale(239.75)}function nr(Qe,nt){var ut,B,G,Y,C,q;if(nt<c)return[(Y=u(Qe))-(ut=nt*(Qe-Y*(B=v(Qe)))/4)*B,B+ut*Y,1-nt*Y*Y/2,Qe-ut];if(nt>=1-c)return ut=(1-nt)/4,G=1/(B=z(Qe)),[(Y=((q=h(2*(q=Qe)))-1)/(q+1))+ut*((C=B*I(Qe))-Qe)/(B*B),G-ut*Y*G*(C-Qe),G+ut*Y*G*(C+Qe),2*i(h(Qe))-d+ut*(C-Qe)/B];var Q=[1,0,0,0,0,0,0,0,0],ne=[P(nt),0,0,0,0,0,0,0,0],he=0;for(B=P(1-nt),C=1;w(ne[he]/Q[he])>c&&he<8;)ut=Q[he++],ne[he]=(ut-B)/2,Q[he]=(ut+B)/2,B=P(ut*B),C*=2;G=C*Q[he]*Qe;do G=(E(Y=ne[he]*u(B=G)/Q[he])+G)/2;while(--he);return[u(G),Y=v(G),Y/v(G-B),G]}function Qt(Qe,nt){if(!nt)return Qe;if(nt===1)return t(p(Qe/2+m));for(var ut=1,B=P(1-nt),G=P(nt),Y=0;w(G)>c;Y++){if(Qe%g){var C=i(B*p(Qe)/ut);C<0&&(C+=g),Qe+=C+~~(Qe/g)*g}else Qe+=Qe;G=(ut+B)/2,B=P(ut*B),G=((ut=G)-B)/2}return Qe/(r(2,Y)*ut)}function bn(Qe,nt){var ut=(y-1)/(y+1),B=P(1-ut*ut),G=Qt(d,B*B),Y=t(p(g/4+w(nt)/2)),C=h(-1*Y)/P(ut),q=function(ne,he){var me=ne*ne,Pe=he+1,ze=1-me-he*he;return[.5*((ne>=0?d:-d)-_(ze,2*ne)),-.25*t(ze*ze+4*me)+.5*t(Pe*Pe+me)]}(C*v(-1*Qe),C*u(-1*Qe)),Q=function(ne,he,me){var Pe=w(ne),ze=I(w(he));if(Pe){var qe=1/u(Pe),Ze=1/(p(Pe)*p(Pe)),rt=-(Ze+me*(ze*ze*qe*qe)-1+me),pt=(-rt+P(rt*rt-(me-1)*Ze*4))/2;return[Qt(i(1/P(pt)),me)*o(ne),Qt(i(P((pt/Ze-1)/me)),1-me)*o(he)]}return[0,Qt(i(ze),1-me)*o(he)]}(q[0],q[1],B*B);return[-Q[1],(nt>=0?1:-1)*(.5*G-Q[0])]}function Rt(){return(0,T.Z)(Hn(bn)).scale(151.496)}Bn.invert=function(Qe,nt){w(Qe)>1&&(Qe=2*o(Qe)-Qe),w(nt)>1&&(nt=2*o(nt)-nt);var ut=o(Qe),B=o(nt),G=-ut*Qe,Y=-B*nt,C=Y/G<1,q=function(me,Pe){for(var ze=0,qe=1,Ze=.5,rt=50;;){var pt=Ze*Ze,vt=P(Ze),kt=E(1/P(1+pt)),Ot=1-pt+Ze*(1+pt)*kt,Et=(1-vt)/Ot,jt=P(Et),It=Et*(1+pt),Jt=jt*(1-pt),Gt=P(It-me*me),Ht=Pe+Jt+Ze*Gt;if(w(qe-ze)<b||--rt==0||Ht===0)break;Ht>0?ze=Ze:qe=Ze,Ze=.5*(ze+qe)}if(!rt)return null;var mn=E(vt),yn=v(mn),In=1/yn,Rn=2*vt*yn,Yn=(-Ot*yn-(-3*Ze+kt*(1+3*pt))*Rn*(1-vt))/(Ot*Ot);return[g/4*(me*(-2*In*((1-pt)*(.5*Yn/jt)-2*Ze*jt*Rn)+-In*Rn*Gt)+-In*(Ze*(1+pt)*Yn+Et*(1+3*pt)*Rn)*E(me/P(It))),mn]}(C?Y:G,C?G:Y),Q=q[0],ne=q[1],he=v(ne);return C&&(Q=-d-Q),[ut*(_(u(Q)*he,-u(ne))+g),B*E(v(Q)*he)]},bn.invert=function(Qe,nt){var ut,B,G,Y,C,q,Q=(y-1)/(y+1),ne=P(1-Q*Q),he=(B=-Qe,G=ne*ne,(ut=.5*Qt(d,ne*ne)-nt)?(Y=nr(ut,G),B?(q=(C=nr(B,1-G))[1]*C[1]+G*Y[0]*Y[0]*C[0]*C[0],[[Y[0]*C[2]/q,Y[1]*Y[2]*C[0]*C[1]/q],[Y[1]*C[1]/q,-Y[0]*Y[2]*C[0]*C[2]/q],[Y[2]*C[1]*C[2]/q,-G*Y[0]*Y[1]*C[0]/q]]):[[Y[0],0],[Y[1],0],[Y[2],0]]):[[0,(C=nr(B,1-G))[0]/C[1]],[1/C[1],0],[C[2]/C[1],0]]),me=function(Pe,ze){var qe=ze[0]*ze[0]+ze[1]*ze[1];return[(Pe[0]*ze[0]+Pe[1]*ze[1])/qe,(Pe[1]*ze[0]-Pe[0]*ze[1])/qe]}(he[0],he[1]);return[_(me[1],me[0])/-1,2*i(h(-.5*t(Q*me[0]*me[0]+Q*me[1]*me[1])))-d]};var Kt=e(7613);function rn(Qe){var nt=u(Qe),ut=v(Qe),B=xn(Qe);function G(Y,C){var q=B(Y,C);Y=q[0],C=q[1];var Q=u(C),ne=v(C),he=v(Y),me=O(nt*Q+ut*ne*he),Pe=u(me),ze=w(Pe)>c?me/Pe:1;return[ze*ut*u(Y),(w(Y)>d?ze:-ze)*(nt*ne-ut*Q*he)]}return B.invert=xn(-Qe),G.invert=function(Y,C){var q=P(Y*Y+C*C),Q=-u(q),ne=v(q),he=q*ne,me=-C*Q,Pe=q*nt,ze=P(he*he+me*me-Pe*Pe),qe=_(he*Pe+me*ze,me*Pe-he*ze),Ze=(q>d?-1:1)*_(Y*Q,q*v(qe)*ne+C*u(qe)*Q);return B.invert(Ze,qe)},G}function xn(Qe){var nt=u(Qe),ut=v(Qe);return function(B,G){var Y=v(G),C=v(B)*Y,q=u(B)*Y,Q=u(G);return[_(q,C*ut-Q*nt),E(Q*ut+C*nt)]}}function Tn(){var Qe=0,nt=(0,T.r)(rn),ut=nt(Qe),B=ut.rotate,G=ut.stream,Y=(0,Kt.Z)();return ut.parallel=function(C){if(!arguments.length)return Qe*S;var q=ut.rotate();return nt(Qe=C*M).rotate(q)},ut.rotate=function(C){return arguments.length?(B.call(ut,[C[0],C[1]-Qe*S]),Y.center([-C[0],-C[1]]),ut):((C=B.call(ut))[1]+=Qe*S,C)},ut.stream=function(C){return(C=G(C)).sphere=function(){C.polygonStart();var q,Q=Y.radius(89.99)().coordinates[0],ne=Q.length-1,he=-1;for(C.lineStart();++he<ne;)C.point((q=Q[he])[0],q[1]);for(C.lineEnd(),ne=(Q=Y.radius(90.01)().coordinates[0]).length-1,C.lineStart();--he>=0;)C.point((q=Q[he])[0],q[1]);C.lineEnd(),C.polygonEnd()},C},ut.scale(79.4187).parallel(45).clipAngle(179.999)}var Pn=e(33064),pn=e(72736),$t=E(1-1/3)*S,en=Je(0);function hn(Qe){var nt=$t*M,ut=St(g,nt)[0]-St(-g,nt)[0],B=en(0,nt)[1],G=St(0,nt)[1],Y=k-G,C=f/Qe,q=4/f,Q=B+Y*Y*4/f;function ne(he,me){var Pe,ze=w(me);if(ze>nt){var qe=n(Qe-1,a(0,s((he+g)/C)));(Pe=St(he+=g*(Qe-1)/Qe-qe*C,ze))[0]=Pe[0]*f/ut-f*(Qe-1)/(2*Qe)+qe*f/Qe,Pe[1]=B+4*(Pe[1]-G)*Y/f,me<0&&(Pe[1]=-Pe[1])}else Pe=en(he,me);return Pe[0]*=q,Pe[1]/=Q,Pe}return ne.invert=function(he,me){he/=q;var Pe=w(me*=Q);if(Pe>B){var ze=n(Qe-1,a(0,s((he+g)/C)));he=(he+g*(Qe-1)/Qe-ze*C)*ut/f;var qe=St.invert(he,.25*(Pe-B)*f/Y+G);return qe[0]-=g*(Qe-1)/Qe-ze*C,me<0&&(qe[1]=-qe[1]),qe}return en.invert(he,me)},ne}function gn(Qe,nt){return[Qe,1&nt?90-c:$t]}function Dn(Qe,nt){return[Qe,1&nt?-90+c:-$t]}function Fn(Qe){return[Qe[0]*(1-c),Qe[1]]}function Zn(){var Qe=4,nt=(0,T.r)(hn),ut=nt(Qe),B=ut.stream;return ut.lobes=function(G){return arguments.length?nt(Qe=+G):Qe},ut.stream=function(G){var Y=ut.rotate(),C=B(G),q=(ut.rotate([0,0]),B(G));return ut.rotate(Y),C.sphere=function(){var Q,ne;(0,pn.Z)((Q=180/Qe,ne=[].concat((0,Pn.w6)(-180,180+Q/2,Q).map(gn),(0,Pn.w6)(180,-180-Q/2,-Q).map(Dn)),{type:"Polygon",coordinates:[Q===180?ne.map(Fn):ne]}),q)},C},ut.scale(239.75)}function Wn(Qe){var nt,ut=1+Qe,B=E(u(1/ut)),G=2*P(g/(nt=g+4*B*ut)),Y=.5*G*(ut+P(Qe*(2+Qe))),C=Qe*Qe,q=ut*ut;function Q(ne,he){var me,Pe,ze=1-u(he);if(ze&&ze<2){var qe,Ze=d-he,rt=25;do{var pt=u(Ze),vt=v(Ze),kt=B+_(pt,ut-vt),Ot=1+q-2*ut*vt;Ze-=qe=(Ze-C*B-ut*pt+Ot*kt-.5*ze*nt)/(2*ut*pt*kt)}while(w(qe)>b&&--rt>0);me=G*P(Ot),Pe=ne*kt/g}else me=G*(Qe+ze),Pe=ne*B/g;return[me*u(Pe),Y-me*v(Pe)]}return Q.invert=function(ne,he){var me=ne*ne+(he-=Y)*he,Pe=(1+q-me/(G*G))/(2*ut),ze=O(Pe),qe=u(ze),Ze=B+_(qe,ut-Pe);return[E(ne/P(me))*g/Ze,E(1-2*(ze-C*B-ut*qe+(1+q-2*ut*Pe)*Ze)/nt)]},Q}function tr(){var Qe=1,nt=(0,T.r)(Wn),ut=nt(Qe);return ut.ratio=function(B){return arguments.length?nt(Qe=+B):Qe},ut.scale(167.774).center([0,18.67])}var Qn=.7109889596207567,or=.0528035274542;function hr(Qe,nt){return nt>-Qn?((Qe=le(Qe,nt))[1]+=or,Qe):Fe(Qe,nt)}function fr(){return(0,T.Z)(hr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function xr(Qe,nt){return w(nt)>Qn?((Qe=le(Qe,nt))[1]-=nt>0?or:-or,Qe):Fe(Qe,nt)}function yr(){return(0,T.Z)(xr).scale(152.63)}function Ir(Qe,nt,ut,B){var G=P(4*g/(2*ut+(1+Qe-nt/2)*u(2*ut)+(Qe+nt)/2*u(4*ut)+nt/2*u(6*ut))),Y=P(B*u(ut)*P((1+Qe*v(2*ut)+nt*v(4*ut))/(1+Qe+nt))),C=ut*Q(1);function q(me){return P(1+Qe*v(2*me)+nt*v(4*me))}function Q(me){var Pe=me*ut;return(2*Pe+(1+Qe-nt/2)*u(2*Pe)+(Qe+nt)/2*u(4*Pe)+nt/2*u(6*Pe))/ut}function ne(me){return q(me)*u(me)}var he=function(me,Pe){var ze=ut*xe(Q,C*u(Pe)/ut,Pe/g);isNaN(ze)&&(ze=ut*o(Pe));var qe=G*q(ze);return[qe*Y*me/g*v(ze),qe/Y*u(ze)]};return he.invert=function(me,Pe){var ze=xe(ne,Pe*Y/G);return[me*g/(v(ze)*G*Y*q(ze)),E(ut*Q(ze/ut)/C)]},ut===0&&(G=P(B/g),(he=function(me,Pe){return[me*G,u(Pe)/G]}).invert=function(me,Pe){return[me/G,E(Pe*G)]}),he}function lr(){var Qe=1,nt=0,ut=45*M,B=2,G=(0,T.r)(Ir),Y=G(Qe,nt,ut,B);return Y.a=function(C){return arguments.length?G(Qe=+C,nt,ut,B):Qe},Y.b=function(C){return arguments.length?G(Qe,nt=+C,ut,B):nt},Y.psiMax=function(C){return arguments.length?G(Qe,nt,ut=+C*M,B):ut*S},Y.ratio=function(C){return arguments.length?G(Qe,nt,ut,B=+C):B},Y.scale(180.739)}function kr(Qe,nt,ut,B,G,Y,C,q,Q,ne,he){if(he.nanEncountered)return NaN;var me,Pe,ze,qe,Ze,rt,pt,vt,kt,Ot;if(Pe=Qe(nt+.25*(me=ut-nt)),ze=Qe(ut-.25*me),isNaN(Pe))he.nanEncountered=!0;else{if(!isNaN(ze))return Ot=((rt=(qe=me*(B+4*Pe+G)/12)+(Ze=me*(G+4*ze+Y)/12))-C)/15,ne>Q?(he.maxDepthCount++,rt+Ot):Math.abs(Ot)<q?rt+Ot:(vt=kr(Qe,nt,pt=nt+.5*me,B,Pe,G,qe,.5*q,Q,ne+1,he),isNaN(vt)?(he.nanEncountered=!0,NaN):(kt=kr(Qe,pt,ut,G,ze,Y,Ze,.5*q,Q,ne+1,he),isNaN(kt)?(he.nanEncountered=!0,NaN):vt+kt));he.nanEncountered=!0}}function Fr(Qe,nt,ut,B,G){B===void 0&&(B=1e-8),G===void 0&&(G=20);var Y=Qe(nt),C=Qe(.5*(nt+ut)),q=Qe(ut);return kr(Qe,nt,ut,Y,C,q,(Y+4*C+q)*(ut-nt)/6,B,G,1,{maxDepthCount:0,nanEncountered:!1})}function Wr(Qe,nt,ut){function B(ze){return Qe+(1-Qe)*r(1-r(ze,nt),1/nt)}function G(ze){return Fr(B,0,ze,1e-4)}for(var Y=1/G(1),C=1e3,q=1.00000001*Y,Q=[],ne=0;ne<=C;ne++)Q.push(G(ne/C)*q);function he(ze){var qe=0,Ze=C,rt=500;do Q[rt]>ze?Ze=rt:qe=rt,rt=qe+Ze>>1;while(rt>qe);var pt=Q[rt+1]-Q[rt];return pt&&(pt=(ze-Q[rt+1])/pt),(rt+1+pt)/C}var me=2*he(1)/g*Y/ut,Pe=function(ze,qe){var Ze=he(w(u(qe))),rt=B(Ze)*ze;return Ze/=me,[rt,qe>=0?Ze:-Ze]};return Pe.invert=function(ze,qe){var Ze;return w(qe*=me)<1&&(Ze=o(qe)*E(G(w(qe))*Y)),[ze/B(w(qe)),Ze]},Pe}function ki(){var Qe=0,nt=2.5,ut=1.183136,B=(0,T.r)(Wr),G=B(Qe,nt,ut);return G.alpha=function(Y){return arguments.length?B(Qe=+Y,nt,ut):Qe},G.k=function(Y){return arguments.length?B(Qe,nt=+Y,ut):nt},G.gamma=function(Y){return arguments.length?B(Qe,nt,ut=+Y):ut},G.scale(152.63)}function Ai(Qe,nt){return w(Qe[0]-nt[0])<c&&w(Qe[1]-nt[1])<c}function aa(Qe,nt){for(var ut,B,G,Y=-1,C=Qe.length,q=Qe[0],Q=[];++Y<C;){B=((ut=Qe[Y])[0]-q[0])/nt,G=(ut[1]-q[1])/nt;for(var ne=0;ne<nt;++ne)Q.push([q[0]+ne*B,q[1]+ne*G]);q=ut}return Q.push(ut),Q}function bi(Qe,nt,ut){var B,G;function Y(Q,ne){for(var he=ne<0?-1:1,me=nt[+(ne<0)],Pe=0,ze=me.length-1;Pe<ze&&Q>me[Pe][2][0];++Pe);var qe=Qe(Q-me[Pe][1][0],ne);return qe[0]+=Qe(me[Pe][1][0],he*ne>he*me[Pe][0][1]?me[Pe][0][1]:ne)[0],qe}ut?Y.invert=ut(Y):Qe.invert&&(Y.invert=function(Q,ne){for(var he=G[+(ne<0)],me=nt[+(ne<0)],Pe=0,ze=he.length;Pe<ze;++Pe){var qe=he[Pe];if(qe[0][0]<=Q&&Q<qe[1][0]&&qe[0][1]<=ne&&ne<qe[1][1]){var Ze=Qe.invert(Q-Qe(me[Pe][1][0],0)[0],ne);return Ze[0]+=me[Pe][1][0],Ai(Y(Ze[0],Ze[1]),[Q,ne])?Ze:null}}});var C=(0,T.Z)(Y),q=C.stream;return C.stream=function(Q){var ne=C.rotate(),he=q(Q),me=(C.rotate([0,0]),q(Q));return C.rotate(ne),he.sphere=function(){(0,pn.Z)(B,me)},he},C.lobes=function(Q){return arguments.length?(B=function(ne){var he,me,Pe,ze,qe,Ze,rt,pt=[],vt=ne[0].length;for(rt=0;rt<vt;++rt)me=(he=ne[0][rt])[0][0],Pe=he[0][1],ze=he[1][1],qe=he[2][0],Ze=he[2][1],pt.push(aa([[me+c,Pe+c],[me+c,ze-c],[qe-c,ze-c],[qe-c,Ze+c]],30));for(rt=ne[1].length-1;rt>=0;--rt)me=(he=ne[1][rt])[0][0],Pe=he[0][1],ze=he[1][1],qe=he[2][0],Ze=he[2][1],pt.push(aa([[qe-c,Ze-c],[qe-c,ze+c],[me+c,ze+c],[me+c,Pe-c]],30));return{type:"Polygon",coordinates:[(0,Pn.TS)(pt)]}}(Q),nt=Q.map(function(ne){return ne.map(function(he){return[[he[0][0]*M,he[0][1]*M],[he[1][0]*M,he[1][1]*M],[he[2][0]*M,he[2][1]*M]]})}),G=nt.map(function(ne){return ne.map(function(he){var me,Pe=Qe(he[0][0],he[0][1])[0],ze=Qe(he[2][0],he[2][1])[0],qe=Qe(he[1][0],he[0][1])[1],Ze=Qe(he[1][0],he[1][1])[1];return qe>Ze&&(me=qe,qe=Ze,Ze=me),[[Pe,qe],[ze,Ze]]})}),C):nt.map(function(ne){return ne.map(function(he){return[[he[0][0]*S,he[0][1]*S],[he[1][0]*S,he[1][1]*S],[he[2][0]*S,he[2][1]*S]]})})},nt!=null&&C.lobes(nt),C}hr.invert=function(Qe,nt){return nt>-Qn?le.invert(Qe,nt-or):Fe.invert(Qe,nt)},xr.invert=function(Qe,nt){return w(nt)>Qn?le.invert(Qe,nt+(nt>0?or:-or)):Fe.invert(Qe,nt)};var Ji=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ba(){return bi(we,Ji).scale(160.857)}var Na=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ss(){return bi(xr,Na).scale(152.63)}var qu=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function dl(){return bi(le,qu).scale(169.529)}var vl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Nl(){return bi(le,vl).scale(169.529).rotate([20,0])}var bo=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function jl(){return bi(hr,bo,_e).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ul=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Vl(){return bi(Fe,Ul).scale(152.63).rotate([-20,0])}function Yo(Qe,nt){return[3/f*Qe*P(g*g/3-nt*nt),nt]}function as(){return(0,T.Z)(Yo).scale(158.837)}function Es(Qe){function nt(ut,B){if(w(w(B)-d)<c)return[0,B<0?-2:2];var G=u(B),Y=r((1+G)/(1-G),Qe/2),C=.5*(Y+1/Y)+v(ut*=Qe);return[2*u(ut)/C,(Y-1/Y)/C]}return nt.invert=function(ut,B){var G=w(B);if(w(G-2)<c)return ut?null:[0,o(B)*d];if(G>2)return null;var Y=(ut/=2)*ut,C=(B/=2)*B,q=2*B/(1+Y+C);return q=r((1+q)/(1-q),1/Qe),[_(2*ut,1-Y-C)/Qe,E((q-1)/(q+1))]},nt}function Di(){var Qe=.5,nt=(0,T.r)(Es),ut=nt(Qe);return ut.spacing=function(B){return arguments.length?nt(Qe=+B):Qe},ut.scale(124.75)}Yo.invert=function(Qe,nt){return[f/3*Qe/P(g*g/3-nt*nt),nt]};var ca=g/y;function Go(Qe,nt){return[Qe*(1+P(v(nt)))/2,nt/(v(nt/2)*v(Qe/6))]}function Io(){return(0,T.Z)(Go).scale(97.2672)}function _o(Qe,nt){var ut=Qe*Qe,B=nt*nt;return[Qe*(.975534+B*(-.0143059*ut-.119161+-.0547009*B)),nt*(1.00384+ut*(.0802894+-.02855*B+199025e-9*ut)+B*(.0998909+-.0491032*B))]}function os(){return(0,T.Z)(_o).scale(139.98)}function Do(Qe,nt){return[u(Qe)/v(nt),p(nt)*v(Qe)]}function ss(){return(0,T.Z)(Do).scale(144.049).clipAngle(89.999)}function Wo(Qe){var nt=v(Qe),ut=p(m+Qe/2);function B(G,Y){var C=Y-Qe,q=w(C)<c?G*nt:w(q=m+Y/2)<c||w(w(q)-d)<c?0:G*C/t(p(q)/ut);return[q,C]}return B.invert=function(G,Y){var C,q=Y+Qe;return[w(Y)<c?G/nt:w(C=m+q/2)<c||w(w(C)-d)<c?0:G*t(p(C)/ut)/Y,q]},B}function ls(){return Oe(Wo).parallel(40).scale(158.837)}function Ro(Qe,nt){return[Qe,1.25*t(p(m+.4*nt))]}function su(){return(0,T.Z)(Ro).scale(108.318)}function Hl(Qe){var nt=Qe.length-1;function ut(B,G){for(var Y,C=v(G),q=2/(1+C*v(B)),Q=q*C*u(B),ne=q*u(G),he=nt,me=Qe[he],Pe=me[0],ze=me[1];--he>=0;)Pe=(me=Qe[he])[0]+Q*(Y=Pe)-ne*ze,ze=me[1]+Q*ze+ne*Y;return[Pe=Q*(Y=Pe)-ne*ze,ze=Q*ze+ne*Y]}return ut.invert=function(B,G){var Y=20,C=B,q=G;do{for(var Q,ne=nt,he=Qe[ne],me=he[0],Pe=he[1],ze=0,qe=0;--ne>=0;)ze=me+C*(Q=ze)-q*qe,qe=Pe+C*qe+q*Q,me=(he=Qe[ne])[0]+C*(Q=me)-q*Pe,Pe=he[1]+C*Pe+q*Q;var Ze,rt,pt=(ze=me+C*(Q=ze)-q*qe)*ze+(qe=Pe+C*qe+q*Q)*qe;C-=Ze=((me=C*(Q=me)-q*Pe-B)*ze+(Pe=C*Pe+q*Q-G)*qe)/pt,q-=rt=(Pe*ze-me*qe)/pt}while(w(Ze)+w(rt)>c*c&&--Y>0);if(Y){var vt=P(C*C+q*q),kt=2*i(.5*vt),Ot=u(kt);return[_(C*Ot,vt*v(kt)),vt?E(q*Ot/vt):0]}},ut}Go.invert=function(Qe,nt){var ut=w(Qe),B=w(nt),G=c,Y=d;B<ca?Y*=B/ca:G+=6*O(ca/B);for(var C=0;C<25;C++){var q=u(Y),Q=P(v(Y)),ne=u(Y/2),he=v(Y/2),me=u(G/6),Pe=v(G/6),ze=.5*G*(1+Q)-ut,qe=Y/(he*Pe)-B,Ze=Q?-.25*G*q/Q:0,rt=.5*(1+Q),pt=(1+.5*Y*ne/he)/(he*Pe),vt=Y/he*(me/6)/(Pe*Pe),kt=Ze*vt-pt*rt,Ot=(ze*vt-qe*rt)/kt,Et=(qe*Ze-ze*pt)/kt;if(Y-=Ot,G-=Et,w(Ot)<c&&w(Et)<c)break}return[Qe<0?-G:G,nt<0?-Y:Y]},_o.invert=function(Qe,nt){var ut=o(Qe)*g,B=nt/2,G=50;do{var Y=ut*ut,C=B*B,q=ut*B,Q=ut*(.975534+C*(-.0143059*Y-.119161+-.0547009*C))-Qe,ne=B*(1.00384+Y*(.0802894+-.02855*C+199025e-9*Y)+C*(.0998909+-.0491032*C))-nt,he=.975534-C*(.119161+3*Y*.0143059+.0547009*C),me=-q*(.238322+.2188036*C+.0286118*Y),Pe=q*(.1605788+7961e-7*Y+-.0571*C),ze=1.00384+Y*(.0802894+199025e-9*Y)+C*(3*(.0998909-.02855*Y)-.245516*C),qe=me*Pe-ze*he,Ze=(ne*me-Q*ze)/qe,rt=(Q*Pe-ne*he)/qe;ut-=Ze,B-=rt}while((w(Ze)>c||w(rt)>c)&&--G>0);return G&&[ut,B]},Do.invert=function(Qe,nt){var ut=Qe*Qe,B=nt*nt+1,G=ut+B,Y=Qe?x*P((G-P(G*G-4*ut))/ut):1/P(B);return[E(Qe*Y),o(nt)*O(Y)]},Ro.invert=function(Qe,nt){return[Qe,2.5*i(h(.8*nt))-.625*g]};var Ls=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Eu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Lu=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Cs=[[.9245,0],[0,0],[.01943,0]],Cu=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Yu(){return Ps(Ls,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Gu(){return Ps(Eu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Os(){return Ps(Lu,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function zo(){return Ps(Cs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Ws(){return Ps(Cu,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ps(Qe,nt){var ut=(0,T.Z)(Hl(Qe)).rotate(nt).clipAngle(90),B=(0,et.Z)(nt),G=ut.center;return delete ut.rotate,ut.center=function(Y){return arguments.length?G(B(Y)):B.invert(G())},ut}var ml=P(6),Is=P(7);function wo(Qe,nt){var ut=E(7*u(nt)/(3*ml));return[ml*Qe*(2*v(2*ut/3)-1)/Is,9*u(ut/3)/Is]}function lu(){return(0,T.Z)(wo).scale(164.859)}function us(Qe,nt){for(var ut,B=(1+x)*u(nt),G=nt,Y=0;Y<25&&(G-=ut=(u(G/2)+u(G)-B)/(.5*v(G/2)+v(G)),!(w(ut)<c));Y++);return[Qe*(1+2*v(G)/v(G/2))/(3*y),2*P(3)*u(G/2)/P(2+y)]}function Zo(){return(0,T.Z)(us).scale(188.209)}function Xo(Qe,nt){for(var ut,B=P(6/(4+g)),G=(1+g/4)*u(nt),Y=nt/2,C=0;C<25&&(Y-=ut=(Y/2+u(Y)-G)/(.5+v(Y)),!(w(ut)<c));C++);return[B*(.5+v(Y))*Qe/1.5,B*Y]}function cs(){return(0,T.Z)(Xo).scale(166.518)}wo.invert=function(Qe,nt){var ut=3*E(nt*Is/9);return[Qe*Is/(ml*(2*v(2*ut/3)-1)),E(3*u(ut)*ml/7)]},us.invert=function(Qe,nt){var ut=nt*P(2+y)/(2*P(3)),B=2*E(ut);return[3*y*Qe/(1+2*v(B)/v(B/2)),E((ut+u(B))/(1+x))]},Xo.invert=function(Qe,nt){var ut=P(6/(4+g)),B=nt/ut;return w(w(B)-d)<c&&(B=B<0?-d:d),[1.5*Qe/(ut*(.5+v(B))),E((B/2+u(B))/(1+g/4))]};var ri=e(26867);function Zs(Qe,nt){var ut=nt*nt,B=ut*ut,G=ut*B;return[Qe*(.84719-.13063*ut+G*G*(.05494*ut-.04515-.02326*B+.00331*G)),nt*(1.01183+B*B*(.01926*ut-.02625-.00396*B))]}function Wu(){return(0,T.Z)(Zs).scale(175.295)}function ql(Qe,nt){return[Qe*(1+v(nt))/2,2*(nt-p(nt/2))]}function Xs(){return(0,T.Z)(ql).scale(152.63)}Zs.invert=function(Qe,nt){var ut,B,G,Y,C=nt,q=25;do C-=ut=(C*(1.01183+(G=(B=C*C)*B)*G*(.01926*B-.02625-.00396*G))-nt)/(1.01183+G*G*(.21186*B-.23625+-.05148*G));while(w(ut)>b&&--q>0);return[Qe/(.84719-.13063*(B=C*C)+(Y=B*(G=B*B))*Y*(.05494*B-.04515-.02326*G+.00331*Y)),C]},ql.invert=function(Qe,nt){for(var ut=nt/2,B=0,G=1/0;B<10&&w(G)>c;++B){var Y=v(nt/2);nt-=G=(nt-p(nt/2)-ut)/(1-.5/(Y*Y))}return[2*Qe/(1+v(nt)),nt]};var Ou=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Zu(){return bi(fe(1/0),Ou).rotate([20,0]).scale(152.63)}function Yl(Qe,nt){var ut=u(nt),B=v(nt),G=o(Qe);if(Qe===0||w(nt)===d)return[0,nt];if(nt===0)return[Qe,0];if(w(Qe)===d)return[Qe*B,d*ut];var Y=g/(2*Qe)-2*Qe/g,C=2*nt/g,q=(1-C*C)/(ut-C),Q=Y*Y,ne=q*q,he=1+Q/ne,me=1+ne/Q,Pe=(Y*ut/q-Y/2)/he,ze=(ne*ut/Q+q/2)/me,qe=ze*ze-(ne*ut*ut/Q+q*ut-1)/me;return[d*(Pe+P(Pe*Pe+B*B/he)*G),d*(ze+P(qe<0?0:qe)*o(-nt*Y)*G)]}function Xu(){return(0,T.Z)(Yl).scale(127.267)}Yl.invert=function(Qe,nt){var ut=(Qe/=d)*Qe,B=ut+(nt/=d)*nt,G=g*g;return[Qe?(B-1+P((1-B)*(1-B)+4*ut))/(2*Qe)*d:0,xe(function(Y){return B*(g*u(Y)-2*Y)*g+4*Y*Y*(nt-u(Y))+2*g*Y-G*nt},0)]};var fs=1.0148,Ds=.23185,Jo=-.14499,To=.02406,Js=fs,Pu=5*Ds,yl=7*Jo,Gl=9*To,ro=1.790857183;function Wl(Qe,nt){var ut=nt*nt;return[Qe,nt*(fs+ut*ut*(Ds+ut*(Jo+To*ut)))]}function Iu(){return(0,T.Z)(Wl).scale(139.319)}function Ks(Qe,nt){if(w(nt)<c)return[Qe,0];var ut=p(nt),B=Qe*u(nt);return[u(B)/ut,nt+(1-v(B))/ut]}function Rs(){return(0,T.Z)(Ks).scale(103.74)}Wl.invert=function(Qe,nt){nt>ro?nt=ro:nt<-1.790857183&&(nt=-1.790857183);var ut,B=nt;do{var G=B*B;B-=ut=(B*(fs+G*G*(Ds+G*(Jo+To*G)))-nt)/(Js+G*G*(Pu+G*(yl+Gl*G)))}while(w(ut)>c);return[Qe,B]},Ks.invert=function(Qe,nt){if(w(nt)<c)return[Qe,0];var ut,B=Qe*Qe+nt*nt,G=.5*nt,Y=10;do{var C=p(G),q=1/v(G),Q=B-2*nt*G+G*G;G-=ut=(C*Q+2*(G-nt))/(2+Q*q*q+2*(G-nt)*C)}while(w(ut)>c&&--Y>0);return C=p(G),[(w(nt)<w(G+1/C)?E(Qe*C):o(nt)*o(Qe)*(O(w(Qe*C))+d))/u(G),G]};var Qs=e(77338),zs=e(83074);function Fs(Qe,nt){return[Qe[0]*nt[0]+Qe[1]*nt[3],Qe[0]*nt[1]+Qe[1]*nt[4],Qe[0]*nt[2]+Qe[1]*nt[5]+Qe[2],Qe[3]*nt[0]+Qe[4]*nt[3],Qe[3]*nt[1]+Qe[4]*nt[4],Qe[3]*nt[2]+Qe[4]*nt[5]+Qe[5]]}function xl(Qe,nt){return[Qe[0]-nt[0],Qe[1]-nt[1]]}function Zl(Qe){return P(Qe[0]*Qe[0]+Qe[1]*Qe[1])}function vi(Qe,nt,ut){function B(q,Q){var ne,he=nt(q,Q),me=he.project([q*S,Q*S]);return(ne=he.transform)?[ne[0]*me[0]+ne[1]*me[1]+ne[2],-(ne[3]*me[0]+ne[4]*me[1]+ne[5])]:(me[1]=-me[1],me)}function G(q,Q){var ne=q.project.invert,he=q.transform,me=Q;if(he&&(he=function(rt){var pt=1/(rt[0]*rt[4]-rt[1]*rt[3]);return[pt*rt[4],-pt*rt[1],pt*(rt[1]*rt[5]-rt[2]*rt[4]),-pt*rt[3],pt*rt[0],pt*(rt[2]*rt[3]-rt[0]*rt[5])]}(he),me=[he[0]*me[0]+he[1]*me[1]+he[2],he[3]*me[0]+he[4]*me[1]+he[5]]),ne&&q===function(rt){return nt(rt[0]*M,rt[1]*M)}(Pe=ne(me)))return Pe;for(var Pe,ze=q.children,qe=0,Ze=ze&&ze.length;qe<Ze;++qe)if(Pe=G(ze[qe],Q))return Pe}(function q(Q,ne){if(Q.edges=function(Et){for(var jt=Et.length,It=[],Jt=Et[jt-1],Gt=0;Gt<jt;++Gt)It.push([Jt,Jt=Et[Gt]]);return It}(Q.face),ne.face){var he=Q.shared=function(Et,jt){for(var It,Jt,Gt=Et.length,Ht=null,mn=0;mn<Gt;++mn){It=Et[mn];for(var yn=jt.length;--yn>=0;)if(Jt=jt[yn],It[0]===Jt[0]&&It[1]===Jt[1]){if(Ht)return[Ht,It];Ht=It}}}(Q.face,ne.face),me=(Ze=he.map(ne.project),rt=he.map(Q.project),pt=xl(Ze[1],Ze[0]),vt=xl(rt[1],rt[0]),kt=function(Et,jt){return _(Et[0]*jt[1]-Et[1]*jt[0],Et[0]*jt[0]+Et[1]*jt[1])}(pt,vt),Ot=Zl(pt)/Zl(vt),Fs([1,0,Ze[0][0],0,1,Ze[0][1]],Fs([Ot,0,0,0,Ot,0],Fs([v(kt),u(kt),0,-u(kt),v(kt),0],[1,0,-rt[0][0],0,1,-rt[0][1]]))));Q.transform=ne.transform?Fs(ne.transform,me):me;for(var Pe=ne.edges,ze=0,qe=Pe.length;ze<qe;++ze)ka(he[0],Pe[ze][1])&&ka(he[1],Pe[ze][0])&&(Pe[ze]=Q),ka(he[0],Pe[ze][0])&&ka(he[1],Pe[ze][1])&&(Pe[ze]=Q);for(ze=0,qe=(Pe=Q.edges).length;ze<qe;++ze)ka(he[0],Pe[ze][0])&&ka(he[1],Pe[ze][1])&&(Pe[ze]=ne),ka(he[0],Pe[ze][1])&&ka(he[1],Pe[ze][0])&&(Pe[ze]=ne)}else Q.transform=ne.transform;var Ze,rt,pt,vt,kt,Ot;return Q.children&&Q.children.forEach(function(Et){q(Et,Q)}),Q})(Qe,{transform:null}),ko(Qe)&&(B.invert=function(q,Q){var ne=G(Qe,[q,-Q]);return ne&&(ne[0]*=M,ne[1]*=M,ne)});var Y=(0,T.Z)(B),C=Y.stream;return Y.stream=function(q){var Q=Y.rotate(),ne=C(q),he=(Y.rotate([0,0]),C(q));return Y.rotate(Q),ne.sphere=function(){he.polygonStart(),he.lineStart(),hs(he,Qe),he.lineEnd(),he.polygonEnd()},ne},Y.angle(ut==null?-30:ut*S)}function hs(Qe,nt,ut){var B,G,Y=nt.edges,C=Y.length,q={type:"MultiPoint",coordinates:nt.face},Q=nt.face.filter(function(Ze){return w(Ze[1])!==90}),ne=(0,Qs.Z)({type:"MultiPoint",coordinates:Q}),he=!1,me=-1,Pe=ne[1][0]-ne[0][0],ze=Pe===180||Pe===360?[(ne[0][0]+ne[1][0])/2,(ne[0][1]+ne[1][1])/2]:(0,We.Z)(q);if(ut)for(;++me<C&&Y[me]!==ut;);++me;for(var qe=0;qe<C;++qe)G=Y[(qe+me)%C],Array.isArray(G)?(he||(Qe.point((B=(0,zs.Z)(G[0],ze)(c))[0],B[1]),he=!0),Qe.point((B=(0,zs.Z)(G[1],ze)(c))[0],B[1])):(he=!1,G!==ut&&hs(Qe,G,nt))}function ka(Qe,nt){return Qe&&nt&&Qe[0]===nt[0]&&Qe[1]===nt[1]}function ko(Qe){return Qe.project.invert||Qe.children&&Qe.children.some(ko)}var ui=e(98936),gi=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],io=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Qe){return Qe.map(function(nt){return gi[nt]})});function $s(Qe){Qe=Qe||function(ut){var B=(0,We.Z)({type:"MultiPoint",coordinates:ut});return(0,ui.Z)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var nt=io.map(function(ut){return{face:ut,project:Qe(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,B){var G=nt[ut];G&&(G.children||(G.children=[])).push(nt[B])}),vi(nt[0],function(ut,B){return nt[ut<-g/2?B<0?6:4:ut<0?B<0?2:0:ut<g/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var bl=2/P(3);function Xl(Qe,nt){var ut=St(Qe,nt);return[ut[0]*bl,ut[1]]}function _l(Qe){Qe=Qe||function(ut){var B=(0,We.Z)({type:"MultiPoint",coordinates:ut});return(0,T.Z)(Xl).translate([0,0]).scale(1).rotate(B[1]>0?[-B[0],0]:[180-B[0],180])};var nt=io.map(function(ut){return{face:ut,project:Qe(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,B){var G=nt[ut];G&&(G.children||(G.children=[])).push(nt[B])}),vi(nt[0],function(ut,B){return nt[ut<-g/2?B<0?6:4:ut<0?B<0?2:0:ut<g/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function wl(Qe){Qe=Qe||function(Y){var C=Y.length===6?(0,We.Z)({type:"MultiPoint",coordinates:Y}):Y[0];return(0,ui.Z)().scale(1).translate([0,0]).rotate([-C[0],-C[1]])};var nt=io.map(function(Y){for(var C,q=Y.map(ds),Q=q.length,ne=q[Q-1],he=[],me=0;me<Q;++me)C=q[me],he.push(ps([.9486832980505138*ne[0]+.31622776601683794*C[0],.9486832980505138*ne[1]+.31622776601683794*C[1],.9486832980505138*ne[2]+.31622776601683794*C[2]]),ps([.9486832980505138*C[0]+.31622776601683794*ne[0],.9486832980505138*C[1]+.31622776601683794*ne[1],.9486832980505138*C[2]+.31622776601683794*ne[2]])),ne=C;return he}),ut=[],B=[-1,0,0,1,0,1,4,5];nt.forEach(function(Y,C){for(var q,Q,ne=io[C],he=ne.length,me=ut[C]=[],Pe=0;Pe<he;++Pe)nt.push([ne[Pe],Y[(2*Pe+2)%(2*he)],Y[(2*Pe+1)%(2*he)]]),B.push(C),me.push((q=ds(Y[(2*Pe+2)%(2*he)]),Q=ds(Y[(2*Pe+1)%(2*he)]),[q[1]*Q[2]-q[2]*Q[1],q[2]*Q[0]-q[0]*Q[2],q[0]*Q[1]-q[1]*Q[0]]))});var G=nt.map(function(Y){return{project:Qe(Y),face:Y}});return B.forEach(function(Y,C){var q=G[Y];q&&(q.children||(q.children=[])).push(G[C])}),vi(G[0],function(Y,C){var q=v(C),Q=[q*v(Y),q*u(Y),u(C)],ne=Y<-g/2?C<0?6:4:Y<0?C<0?2:0:Y<g/2?C<0?3:1:C<0?7:5,he=ut[ne];return G[co(he[0],Q)<0?8+3*ne:co(he[1],Q)<0?8+3*ne+1:co(he[2],Q)<0?8+3*ne+2:ne]}).angle(-30).scale(110.625).center([0,45])}function co(Qe,nt){for(var ut=0,B=Qe.length,G=0;ut<B;++ut)G+=Qe[ut]*nt[ut];return G}function ps(Qe){return[_(Qe[1],Qe[0])*S,E(a(-1,n(1,Qe[2])))*S]}function ds(Qe){var nt=Qe[0]*M,ut=Qe[1]*M,B=v(ut);return[B*v(nt),B*u(nt),u(ut)]}function Ca(){}function Tl(Qe,nt){var ut,B=nt.stream;if(!B)throw new Error("invalid projection");switch(Qe&&Qe.type){case"Feature":ut=fa;break;case"FeatureCollection":ut=fo;break;default:ut=va}return ut(Qe,B)}function fo(Qe,nt){return{type:"FeatureCollection",features:Qe.features.map(function(ut){return fa(ut,nt)})}}function fa(Qe,nt){return{type:"Feature",id:Qe.id,properties:Qe.properties,geometry:va(Qe.geometry,nt)}}function va(Qe,nt){if(!Qe)return null;if(Qe.type==="GeometryCollection")return function(B,G){return{type:"GeometryCollection",geometries:B.geometries.map(function(Y){return va(Y,G)})}}(Qe,nt);var ut;switch(Qe.type){case"Point":case"MultiPoint":ut=Fo;break;case"LineString":case"MultiLineString":ut=Bs;break;case"Polygon":case"MultiPolygon":case"Sphere":ut=Mo;break;default:return null}return(0,pn.Z)(Qe,nt(ut)),ut.result()}Xl.invert=function(Qe,nt){return St.invert(Qe/bl,nt)};var Mi=[],ma=[],Fo={point:function(Qe,nt){Mi.push([Qe,nt])},result:function(){var Qe=Mi.length?Mi.length<2?{type:"Point",coordinates:Mi[0]}:{type:"MultiPoint",coordinates:Mi}:null;return Mi=[],Qe}},Bs={lineStart:Ca,point:function(Qe,nt){Mi.push([Qe,nt])},lineEnd:function(){Mi.length&&(ma.push(Mi),Mi=[])},result:function(){var Qe=ma.length?ma.length<2?{type:"LineString",coordinates:ma[0]}:{type:"MultiLineString",coordinates:ma}:null;return ma=[],Qe}},Mo={polygonStart:Ca,lineStart:Ca,point:function(Qe,nt){Mi.push([Qe,nt])},lineEnd:function(){var Qe=Mi.length;if(Qe){do Mi.push(Mi[0].slice());while(++Qe<4);ma.push(Mi),Mi=[]}},polygonEnd:Ca,result:function(){if(!ma.length)return null;var Qe=[],nt=[];return ma.forEach(function(ut){(function(B){if((G=B.length)<4)return!1;for(var G,Y=0,C=B[G-1][1]*B[0][0]-B[G-1][0]*B[0][1];++Y<G;)C+=B[Y-1][1]*B[Y][0]-B[Y-1][0]*B[Y][1];return C<=0})(ut)?Qe.push([ut]):nt.push(ut)}),nt.forEach(function(ut){var B=ut[0];Qe.some(function(G){if(function(Y,C){for(var q=C[0],Q=C[1],ne=!1,he=0,me=Y.length,Pe=me-1;he<me;Pe=he++){var ze=Y[he],qe=ze[0],Ze=ze[1],rt=Y[Pe],pt=rt[0],vt=rt[1];Ze>Q^vt>Q&&q<(pt-qe)*(Q-Ze)/(vt-Ze)+qe&&(ne=!ne)}return ne}(G[0],B))return G.push(ut),!0})||Qe.push([ut])}),ma=[],Qe.length?Qe.length>1?{type:"MultiPolygon",coordinates:Qe}:{type:"Polygon",coordinates:Qe[0]}:null}};function gs(Qe){var nt=Qe(d,0)[0]-Qe(-d,0)[0];function ut(B,G){var Y=w(B)<d,C=Qe(Y?B:B>0?B-g:B+g,G),q=(C[0]-C[1])*x,Q=(C[0]+C[1])*x;if(Y)return[q,Q];var ne=nt*x,he=q>0^Q>0?-1:1;return[he*q-o(Q)*ne,he*Q-o(q)*ne]}return Qe.invert&&(ut.invert=function(B,G){var Y=(B+G)*x,C=(G-B)*x,q=w(Y)<.5*nt&&w(C)<.5*nt;if(!q){var Q=nt*x,ne=Y>0^C>0?-1:1,he=-ne*B+(C>0?1:-1)*Q,me=-ne*G+(Y>0?1:-1)*Q;Y=(-he-me)*x,C=(he-me)*x}var Pe=Qe.invert(Y,C);return q||(Pe[0]+=Y>0?g:-g),Pe}),(0,T.Z)(ut).rotate([-90,-90,45]).clipAngle(179.999)}function ja(){return gs(Bn).scale(176.423)}function Ns(){return gs(bn).scale(111.48)}function Ko(Qe,nt){if(!(0<=(nt=+nt)&&nt<=20))throw new Error("invalid digits");function ut(ne){var he=ne.length,me=2,Pe=new Array(he);for(Pe[0]=+ne[0].toFixed(nt),Pe[1]=+ne[1].toFixed(nt);me<he;)Pe[me]=ne[me],++me;return Pe}function B(ne){return ne.map(ut)}function G(ne){for(var he=ut(ne[0]),me=[he],Pe=1;Pe<ne.length;Pe++){var ze=ut(ne[Pe]);(ze.length>2||ze[0]!=he[0]||ze[1]!=he[1])&&(me.push(ze),he=ze)}return me.length===1&&ne.length>1&&me.push(ut(ne[ne.length-1])),me}function Y(ne){return ne.map(G)}function C(ne){if(ne==null)return ne;var he;switch(ne.type){case"GeometryCollection":he={type:"GeometryCollection",geometries:ne.geometries.map(C)};break;case"Point":he={type:"Point",coordinates:ut(ne.coordinates)};break;case"MultiPoint":he={type:ne.type,coordinates:B(ne.coordinates)};break;case"LineString":he={type:ne.type,coordinates:G(ne.coordinates)};break;case"MultiLineString":case"Polygon":he={type:ne.type,coordinates:Y(ne.coordinates)};break;case"MultiPolygon":he={type:"MultiPolygon",coordinates:ne.coordinates.map(Y)};break;default:return ne}return ne.bbox!=null&&(he.bbox=ne.bbox),he}function q(ne){var he={type:"Feature",properties:ne.properties,geometry:C(ne.geometry)};return ne.id!=null&&(he.id=ne.id),ne.bbox!=null&&(he.bbox=ne.bbox),he}if(Qe!=null)switch(Qe.type){case"Feature":return q(Qe);case"FeatureCollection":var Q={type:"FeatureCollection",features:Qe.features.map(q)};return Qe.bbox!=null&&(Q.bbox=Qe.bbox),Q;default:return C(Qe)}return Qe}function ho(Qe){var nt=u(Qe);function ut(B,G){var Y=nt?p(B*nt/2)/nt:B/2;if(!G)return[2*Y,-Qe];var C=2*i(Y*u(G)),q=1/p(G);return[u(C)*q,G+(1-v(C))*q-Qe]}return ut.invert=function(B,G){if(w(G+=Qe)<c)return[nt?2*i(nt*B/2)/nt:B,0];var Y,C=B*B+G*G,q=0,Q=10;do{var ne=p(q),he=1/v(q),me=C-2*G*q+q*q;q-=Y=(ne*me+2*(q-G))/(2+me*he*he+2*(q-G)*ne)}while(w(Y)>c&&--Q>0);var Pe=B*(ne=p(q)),ze=p(w(G)<w(q+1/ne)?.5*E(Pe):.5*O(Pe)+g/4)/u(q);return[nt?2*i(nt*ze)/nt:2*ze,q]},ut}function po(){return Oe(ho).scale(131.215)}var Si=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Ao(Qe,nt){var ut,B=n(18,36*w(nt)/g),G=s(B),Y=B-G,C=(ut=Si[G])[0],q=ut[1],Q=(ut=Si[++G])[0],ne=ut[1],he=(ut=Si[n(19,++G)])[0],me=ut[1];return[Qe*(Q+Y*(he-C)/2+Y*Y*(he-2*Q+C)/2),(nt>0?d:-d)*(ne+Y*(me-q)/2+Y*Y*(me-2*ne+q)/2)]}function Or(){return(0,T.Z)(Ao).scale(152.63)}function kl(Qe,nt){var ut=function(C){function q(Q,ne){var he=v(ne),me=(C-1)/(C-he*v(Q));return[me*he*u(Q),me*u(ne)]}return q.invert=function(Q,ne){var he=Q*Q+ne*ne,me=P(he),Pe=(C-P(1-he*(C+1)/(C-1)))/((C-1)/me+me/(C-1));return[_(Q*Pe,me*P(1-Pe*Pe)),me?E(ne*Pe/me):0]},q}(Qe);if(!nt)return ut;var B=v(nt),G=u(nt);function Y(C,q){var Q=ut(C,q),ne=Q[1],he=ne*G/(Qe-1)+B;return[Q[0]*B/he,ne/he]}return Y.invert=function(C,q){var Q=(Qe-1)/(Qe-1-q*G);return ut.invert(Q*C,Q*q*B)},Y}function uu(){var Qe=2,nt=0,ut=(0,T.r)(kl),B=ut(Qe,nt);return B.distance=function(G){return arguments.length?ut(Qe=+G,nt):Qe},B.tilt=function(G){return arguments.length?ut(Qe,nt=G*M):nt*S},B.scale(432.147).clipAngle(O(1/Qe)*S-1e-6)}Si.forEach(function(Qe){Qe[1]*=1.0144}),Ao.invert=function(Qe,nt){var ut=nt/d,B=90*ut,G=n(18,w(B/5)),Y=a(0,s(G));do{var C=Si[Y][1],q=Si[Y+1][1],Q=Si[n(19,Y+2)][1],ne=Q-C,he=Q-2*q+C,me=2*(w(ut)-q)/ne,Pe=he/ne,ze=me*(1-Pe*me*(1-2*Pe*me));if(ze>=0||Y===1){B=(nt>=0?5:-5)*(ze+G);var qe,Ze=50;do ze=(G=n(18,w(B)/5))-(Y=s(G)),C=Si[Y][1],q=Si[Y+1][1],Q=Si[n(19,Y+2)][1],B-=(qe=(nt>=0?d:-d)*(q+ze*(Q-C)/2+ze*ze*(Q-2*q+C)/2)-nt)*S;while(w(qe)>b&&--Ze>0);break}}while(--Y>=0);var rt=Si[Y][0],pt=Si[Y+1][0],vt=Si[n(19,Y+2)][0];return[Qe/(pt+ze*(vt-rt)/2+ze*ze*(vt-2*pt+rt)/2),B*M]};var vs=1e-4,ms=1e4,js=-180,el=js+vs,wr=180,Ml=wr-vs,Qo=-90,ha=Qo+vs,ys=90,So=ys-vs;function go(Qe){return Qe.length>0}function Oa(Qe){return Qe===Qo||Qe===ys?[0,Qe]:[js,(nt=Qe,Math.floor(nt*ms)/ms)];var nt}function Bo(Qe){var nt=Qe[0],ut=Qe[1],B=!1;return nt<=el?(nt=js,B=!0):nt>=Ml&&(nt=wr,B=!0),ut<=ha?(ut=Qo,B=!0):ut>=So&&(ut=ys,B=!0),B?[nt,ut]:Qe}function vo(Qe){return Qe.map(Bo)}function $o(Qe,nt,ut){for(var B=0,G=Qe.length;B<G;++B){var Y=Qe[B].slice();ut.push({index:-1,polygon:nt,ring:Y});for(var C=0,q=Y.length;C<q;++C){var Q=Y[C],ne=Q[0],he=Q[1];if(ne<=el||ne>=Ml||he<=ha||he>=So){Y[C]=Bo(Q);for(var me=C+1;me<q;++me){var Pe=Y[me],ze=Pe[0],qe=Pe[1];if(ze>el&&ze<Ml&&qe>ha&&qe<So)break}if(me===C+1)continue;if(C){var Ze={index:-1,polygon:nt,ring:Y.slice(0,C+1)};Ze.ring[Ze.ring.length-1]=Oa(he),ut[ut.length-1]=Ze}else ut.pop();if(me>=q)break;ut.push({index:-1,polygon:nt,ring:Y=Y.slice(me-1)}),Y[0]=Oa(Y[0][1]),C=-1,q=Y.length}}}}function Al(Qe){var nt,ut,B,G,Y,C,q=Qe.length,Q={},ne={};for(nt=0;nt<q;++nt)B=(ut=Qe[nt]).ring[0],Y=ut.ring[ut.ring.length-1],B[0]!==Y[0]||B[1]!==Y[1]?(ut.index=nt,Q[B]=ne[Y]=ut):(ut.polygon.push(ut.ring),Qe[nt]=null);for(nt=0;nt<q;++nt)if(ut=Qe[nt]){if(B=ut.ring[0],Y=ut.ring[ut.ring.length-1],G=ne[B],C=Q[Y],delete Q[B],delete ne[Y],B[0]===Y[0]&&B[1]===Y[1]){ut.polygon.push(ut.ring);continue}G?(delete ne[B],delete Q[G.ring[0]],G.ring.pop(),Qe[G.index]=null,ut={index:-1,polygon:G.polygon,ring:G.ring.concat(ut.ring)},G===C?ut.polygon.push(ut.ring):(ut.index=q++,Qe.push(Q[ut.ring[0]]=ne[ut.ring[ut.ring.length-1]]=ut))):C?(delete Q[Y],delete ne[C.ring[C.ring.length-1]],ut.ring.pop(),ut={index:q++,polygon:C.polygon,ring:ut.ring.concat(C.ring)},Qe[C.index]=null,Qe.push(Q[ut.ring[0]]=ne[ut.ring[ut.ring.length-1]]=ut)):(ut.ring.push(ut.ring[0]),ut.polygon.push(ut.ring))}}function xs(Qe){var nt={type:"Feature",geometry:oi(Qe.geometry)};return Qe.id!=null&&(nt.id=Qe.id),Qe.bbox!=null&&(nt.bbox=Qe.bbox),Qe.properties!=null&&(nt.properties=Qe.properties),nt}function oi(Qe){if(Qe==null)return Qe;var nt,ut,B,G;switch(Qe.type){case"GeometryCollection":nt={type:"GeometryCollection",geometries:Qe.geometries.map(oi)};break;case"Point":nt={type:"Point",coordinates:Bo(Qe.coordinates)};break;case"MultiPoint":case"LineString":nt={type:Qe.type,coordinates:vo(Qe.coordinates)};break;case"MultiLineString":nt={type:"MultiLineString",coordinates:Qe.coordinates.map(vo)};break;case"Polygon":var Y=[];$o(Qe.coordinates,Y,ut=[]),Al(ut),nt={type:"Polygon",coordinates:Y};break;case"MultiPolygon":ut=[],B=-1,G=Qe.coordinates.length;for(var C=new Array(G);++B<G;)$o(Qe.coordinates[B],C[B]=[],ut);Al(ut),nt={type:"MultiPolygon",coordinates:C.filter(go)};break;default:return Qe}return Qe.bbox!=null&&(nt.bbox=Qe.bbox),nt}function ya(Qe){if(Qe==null)return Qe;switch(Qe.type){case"Feature":return xs(Qe);case"FeatureCollection":var nt={type:"FeatureCollection",features:Qe.features.map(xs)};return Qe.bbox!=null&&(nt.bbox=Qe.bbox),nt;default:return oi(Qe)}}function Ua(Qe,nt){var ut=p(nt/2),B=u(m*ut);return[Qe*(.74482-.34588*B*B),1.70711*ut]}function No(){return(0,T.Z)(Ua).scale(146.153)}function Va(Qe,nt,ut){var B=(0,zs.Z)(nt,ut),G=B(.5),Y=(0,et.Z)([-G[0],-G[1]])(nt),C=B.distance/2,q=-E(u(Y[1]*M)/u(C)),Q=[-G[0],-G[1],-(Y[0]>0?g-q:q)*S],ne=(0,T.Z)(Qe(C)).rotate(Q),he=(0,et.Z)(Q),me=ne.center;return delete ne.rotate,ne.center=function(Pe){return arguments.length?me(he(Pe)):he.invert(me())},ne.clipAngle(90)}function tl(Qe){var nt=v(Qe);function ut(B,G){var Y=(0,ui.M)(B,G);return Y[0]*=nt,Y}return ut.invert=function(B,G){return ui.M.invert(B/nt,G)},ut}function nl(){return Ha([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ha(Qe,nt){return Va(tl,Qe,nt)}function ii(Qe){if(!(Qe*=2))return ee.N;var nt=-Qe/2,ut=-nt,B=Qe*Qe,G=p(ut),Y=.5/u(ut);function C(q,Q){var ne=O(v(Q)*v(q-nt)),he=O(v(Q)*v(q-ut));return[((ne*=ne)-(he*=he))/(2*Qe),(Q<0?-1:1)*P(4*B*he-(B-ne+he)*(B-ne+he))/(2*Qe)]}return C.invert=function(q,Q){var ne,he,me=Q*Q,Pe=v(P(me+(ne=q+nt)*ne)),ze=v(P(me+(ne=q+ut)*ne));return[_(he=Pe-ze,ne=(Pe+ze)*G),(Q<0?-1:1)*O(P(ne*ne+he*he)*Y)]},C}function jo(){return Us([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Us(Qe,nt){return Va(ii,Qe,nt)}function Eo(Qe,nt){if(w(nt)<c)return[Qe,0];var ut=w(nt/d),B=E(ut);if(w(Qe)<c||w(w(nt)-d)<c)return[0,o(nt)*g*p(B/2)];var G=v(B),Y=w(g/Qe-Qe/g)/2,C=Y*Y,q=G/(ut+G-1),Q=q*(2/ut-1),ne=Q*Q,he=ne+C,me=q-ne,Pe=C+q;return[o(Qe)*g*(Y*me+P(C*me*me-he*(q*q-ne)))/he,o(nt)*g*(Q*Pe-Y*P((C+1)*he-Pe*Pe))/he]}function rl(){return(0,T.Z)(Eo).scale(79.4183)}function il(Qe,nt){if(w(nt)<c)return[Qe,0];var ut=w(nt/d),B=E(ut);if(w(Qe)<c||w(w(nt)-d)<c)return[0,o(nt)*g*p(B/2)];var G=v(B),Y=w(g/Qe-Qe/g)/2,C=Y*Y,q=G*(P(1+C)-Y*G)/(1+C*ut*ut);return[o(Qe)*g*q,o(nt)*g*P(1-q*(2*Y+q))]}function Lo(){return(0,T.Z)(il).scale(79.4183)}function Ei(Qe,nt){if(w(nt)<c)return[Qe,0];var ut=nt/d,B=E(ut);if(w(Qe)<c||w(w(nt)-d)<c)return[0,g*p(B/2)];var G=(g/Qe-Qe/g)/2,Y=ut/(1+v(B));return[g*(o(Qe)*P(G*G+1-Y*Y)-G),g*Y]}function Vs(){return(0,T.Z)(Ei).scale(79.4183)}function Dr(Qe,nt){if(!nt)return[Qe,0];var ut=w(nt);if(!Qe||ut===d)return[0,nt];var B=ut/d,G=B*B,Y=(8*B-G*(G+2)-5)/(2*G*(B-1)),C=Y*Y,q=B*Y,Q=G+C+2*q,ne=B+3*Y,he=Qe/d,me=he+1/he,Pe=o(w(Qe)-d)*P(me*me-4),ze=Pe*Pe,qe=(Pe*(Q+C-1)+2*P(Q*(G+C*ze-1)+(1-G)*(G*(ne*ne+4*C)+12*q*C+4*C*C)))/(4*Q+ze);return[o(Qe)*d*qe,o(nt)*d*P(1+Pe*w(qe)-qe*qe)]}function Hr(){return(0,T.Z)(Dr).scale(127.16)}function ao(Qe,nt,ut,B){var G=g/3;Qe=a(Qe,c),nt=a(nt,c),Qe=n(Qe,d),nt=n(nt,g-c),ut=a(ut,0),ut=n(ut,100-c);var Y=(B=a(B,c))/100,C=O((ut/100+1)*v(G))/G,q=u(Qe)/u(C*d),Q=nt/g,ne=P(Y*u(Qe/2)/u(nt/2));return function(he,me,Pe,ze,qe){function Ze(rt,pt){var vt=Pe*u(ze*pt),kt=P(1-vt*vt),Ot=P(2/(1+kt*v(rt*=qe)));return[he*kt*Ot*u(rt),me*vt*Ot]}return Ze.invert=function(rt,pt){var vt=rt/he,kt=pt/me,Ot=P(vt*vt+kt*kt),Et=2*E(Ot/2);return[_(rt*p(Et),he*Ot)/qe,Ot&&E(pt*u(Et)/(me*Pe*Ot))/ze]},Ze}(ne/P(Q*q*C),1/(ne*P(Q*q*C)),q,C,Q)}function Uo(){var Qe=65*M,nt=60*M,ut=20,B=200,G=(0,T.r)(ao),Y=G(Qe,nt,ut,B);return Y.poleline=function(C){return arguments.length?G(Qe=+C*M,nt,ut,B):Qe*S},Y.parallels=function(C){return arguments.length?G(Qe,nt=+C*M,ut,B):nt*S},Y.inflation=function(C){return arguments.length?G(Qe,nt,ut=+C,B):ut},Y.ratio=function(C){return arguments.length?G(Qe,nt,ut,B=+C):B},Y.scale(163.775)}function es(){return Uo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}Ua.invert=function(Qe,nt){var ut=nt/1.70711,B=u(m*ut);return[Qe/(.74482-.34588*B*B),2*i(ut)]},Eo.invert=function(Qe,nt){if(w(nt)<c)return[Qe,0];if(w(Qe)<c)return[0,d*u(2*i(nt/g))];var ut=(Qe/=g)*Qe,B=(nt/=g)*nt,G=ut+B,Y=G*G,C=-w(nt)*(1+G),q=C-2*B+ut,Q=-2*C+1+2*B+Y,ne=B/Q+(2*q*q*q/(Q*Q*Q)-9*C*q/(Q*Q))/27,he=(C-q*q/(3*Q))/Q,me=2*P(-he/3),Pe=O(3*ne/(he*me))/3;return[g*(G-1+P(1+2*(ut-B)+Y))/(2*Qe),o(nt)*g*(-me*v(Pe+g/3)-q/(3*Q))]},il.invert=function(Qe,nt){if(!Qe)return[0,d*u(2*i(nt/g))];var ut=w(Qe/g),B=(1-ut*ut-(nt/=g)*nt)/(2*ut),G=P(B*B+1);return[o(Qe)*g*(G-B),o(nt)*d*u(2*_(P((1-2*B*ut)*(B+G)-ut),P(G+B+ut)))]},Ei.invert=function(Qe,nt){if(!nt)return[Qe,0];var ut=nt/g,B=(g*g*(1-ut*ut)-Qe*Qe)/(2*g*Qe);return[Qe?g*(o(Qe)*P(B*B+1)-B):0,d*u(2*i(ut))]},Dr.invert=function(Qe,nt){var ut;if(!Qe||!nt)return[Qe,nt];nt/=g;var B=o(Qe)*Qe/d,G=(B*B-1+4*nt*nt)/w(B),Y=G*G,C=2*nt,q=50;do{var Q=C*C,ne=(8*C-Q*(Q+2)-5)/(2*Q*(C-1)),he=(3*C-Q*C-10)/(2*Q*C),me=ne*ne,Pe=C*ne,ze=C+ne,qe=ze*ze,Ze=C+3*ne,rt=-2*ze*(4*Pe*me+(1-4*Q+3*Q*Q)*(1+he)+me*(14*Q-6-Y+(8*Q-8-2*Y)*he)+Pe*(12*Q-8+(10*Q-10-Y)*he)),pt=P(qe*(Q+me*Y-1)+(1-Q)*(Q*(Ze*Ze+4*me)+me*(12*Pe+4*me)));C-=ut=(G*(qe+me-1)+2*pt-B*(4*qe+Y))/(G*(2*ne*he+2*ze*(1+he))+rt/pt-8*ze*(G*(-1+me+qe)+2*pt)*(1+he)/(Y+4*qe))}while(ut>c&&--q>0);return[o(Qe)*(P(G*G+4)+G)*g/4,d*C]};var na=4*g+3*P(3),Vo=2*P(2*g*P(3)/na),mi=Te(Vo*P(3)/g,Vo,na/6);function Du(){return(0,T.Z)(mi).scale(176.84)}function oo(Qe,nt){return[Qe*P(1-3*nt*nt/(g*g)),nt]}function _i(){return(0,T.Z)(oo).scale(152.63)}function Ri(Qe,nt){var ut=v(nt),B=v(Qe)*ut,G=1-B,Y=v(Qe=_(u(Qe)*ut,-u(nt))),C=u(Qe);return[C*(ut=P(1-B*B))-Y*G,-Y*ut-C*G]}function Ka(){return(0,T.Z)(Ri).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function bs(Qe,nt){var ut=j(Qe,nt);return[(ut[0]+Qe/d)/2,(ut[1]+nt)/2]}function cu(){return(0,T.Z)(bs).scale(158.837)}oo.invert=function(Qe,nt){return[Qe/P(1-3*nt*nt/(g*g)),nt]},Ri.invert=function(Qe,nt){var ut=(Qe*Qe+nt*nt)/-2,B=P(-ut*(2+ut)),G=nt*ut+Qe*B,Y=Qe*ut-nt*B,C=P(Y*Y+G*G);return[_(B*G,C*(1+ut)),C?-E(B*Y/C):0]},bs.invert=function(Qe,nt){var ut=Qe,B=nt,G=25;do{var Y,C=v(B),q=u(B),Q=u(2*B),ne=q*q,he=C*C,me=u(ut),Pe=v(ut/2),ze=u(ut/2),qe=ze*ze,Ze=1-he*Pe*Pe,rt=Ze?O(C*Pe)*P(Y=1/Ze):Y=0,pt=.5*(2*rt*C*ze+ut/d)-Qe,vt=.5*(rt*q+B)-nt,kt=.5*Y*(he*qe+rt*C*Pe*ne)+.5/d,Ot=Y*(me*Q/4-rt*q*ze),Et=.125*Y*(Q*ze-rt*q*he*me),jt=.5*Y*(ne*Pe+rt*qe*C)+.5,It=Ot*Et-jt*kt,Jt=(vt*Ot-pt*jt)/It,Gt=(pt*Et-vt*kt)/It;ut-=Jt,B-=Gt}while((w(Jt)>c||w(Gt)>c)&&--G>0);return[ut,B]}},33940:function(N,L,e){function T(){return new w}function w(){this.reset()}e.d(L,{Z:function(){return T}}),w.prototype={constructor:w,reset:function(){this.s=this.t=0},add:function(v){_(i,v,this.t),_(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new w;function _(v,h,s){var t=v.s=h+s,a=t-h,n=t-a;v.t=h-n+(s-a)}},97860:function(N,L,e){e.d(L,{L9:function(){return n},ZP:function(){return b},gL:function(){return l}});var T,w,i,_,v,h=e(33940),s=e(39695),t=e(73182),a=e(72736),n=(0,h.Z)(),r=(0,h.Z)(),l={point:t.Z,lineStart:t.Z,lineEnd:t.Z,polygonStart:function(){n.reset(),l.lineStart=o,l.lineEnd=u},polygonEnd:function(){var g=+n;r.add(g<0?s.BZ+g:g),this.lineStart=this.lineEnd=this.point=t.Z},sphere:function(){r.add(s.BZ)}};function o(){l.point=p}function u(){c(T,w)}function p(g,d){l.point=c,T=g,w=d,g*=s.uR,d*=s.uR,i=g,_=(0,s.mC)(d=d/2+s.pu),v=(0,s.O$)(d)}function c(g,d){g*=s.uR,d=(d*=s.uR)/2+s.pu;var m=g-i,x=m>=0?1:-1,y=x*m,k=(0,s.mC)(d),f=(0,s.O$)(d),S=v*f,M=_*k+S*(0,s.mC)(y),E=S*x*(0,s.O$)(y);n.add((0,s.fv)(E,M)),i=g,_=k,v=f}function b(g){return r.reset(),(0,a.Z)(g,l),2*r}},77338:function(N,L,e){e.d(L,{Z:function(){return O}});var T,w,i,_,v,h,s,t,a,n,r=e(33940),l=e(97860),o=e(7620),u=e(39695),p=e(72736),c=(0,r.Z)(),b={point:g,lineStart:m,lineEnd:x,polygonStart:function(){b.point=y,b.lineStart=k,b.lineEnd=f,c.reset(),l.gL.polygonStart()},polygonEnd:function(){l.gL.polygonEnd(),b.point=g,b.lineStart=m,b.lineEnd=x,l.L9<0?(T=-(i=180),w=-(_=90)):c>u.Ho?_=90:c<-u.Ho&&(w=-90),n[0]=T,n[1]=i},sphere:function(){T=-(i=180),w=-(_=90)}};function g(P,I){a.push(n=[T=P,i=P]),I<w&&(w=I),I>_&&(_=I)}function d(P,I){var z=(0,o.Og)([P*u.uR,I*u.uR]);if(t){var U=(0,o.T5)(t,z),R=[U[1],-U[0],0],j=(0,o.T5)(R,U);(0,o.iJ)(j),j=(0,o.Y1)(j);var Z,F=P-v,V=F>0?1:-1,H=j[0]*u.RW*V,te=(0,u.Wn)(F)>180;te^(V*v<H&&H<V*P)?(Z=j[1]*u.RW)>_&&(_=Z):te^(V*v<(H=(H+360)%360-180)&&H<V*P)?(Z=-j[1]*u.RW)<w&&(w=Z):(I<w&&(w=I),I>_&&(_=I)),te?P<v?S(T,P)>S(T,i)&&(i=P):S(P,i)>S(T,i)&&(T=P):i>=T?(P<T&&(T=P),P>i&&(i=P)):P>v?S(T,P)>S(T,i)&&(i=P):S(P,i)>S(T,i)&&(T=P)}else a.push(n=[T=P,i=P]);I<w&&(w=I),I>_&&(_=I),t=z,v=P}function m(){b.point=d}function x(){n[0]=T,n[1]=i,b.point=g,t=null}function y(P,I){if(t){var z=P-v;c.add((0,u.Wn)(z)>180?z+(z>0?360:-360):z)}else h=P,s=I;l.gL.point(P,I),d(P,I)}function k(){l.gL.lineStart()}function f(){y(h,s),l.gL.lineEnd(),(0,u.Wn)(c)>u.Ho&&(T=-(i=180)),n[0]=T,n[1]=i,t=null}function S(P,I){return(I-=P)<0?I+360:I}function M(P,I){return P[0]-I[0]}function E(P,I){return P[0]<=P[1]?P[0]<=I&&I<=P[1]:I<P[0]||P[1]<I}function O(P){var I,z,U,R,j,Z,F;if(_=i=-(T=w=1/0),a=[],(0,p.Z)(P,b),z=a.length){for(a.sort(M),I=1,j=[U=a[0]];I<z;++I)E(U,(R=a[I])[0])||E(U,R[1])?(S(U[0],R[1])>S(U[0],U[1])&&(U[1]=R[1]),S(R[0],U[1])>S(U[0],U[1])&&(U[0]=R[0])):j.push(U=R);for(Z=-1/0,I=0,U=j[z=j.length-1];I<=z;U=R,++I)R=j[I],(F=S(U[1],R[0]))>Z&&(Z=F,T=R[0],i=U[1])}return a=n=null,T===1/0||w===1/0?[[NaN,NaN],[NaN,NaN]]:[[T,w],[i,_]]}},7620:function(N,L,e){e.d(L,{Og:function(){return i},T:function(){return s},T5:function(){return v},Y1:function(){return w},iJ:function(){return t},j9:function(){return _},s0:function(){return h}});var T=e(39695);function w(a){return[(0,T.fv)(a[1],a[0]),(0,T.ZR)(a[2])]}function i(a){var n=a[0],r=a[1],l=(0,T.mC)(r);return[l*(0,T.mC)(n),l*(0,T.O$)(n),(0,T.O$)(r)]}function _(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}function v(a,n){return[a[1]*n[2]-a[2]*n[1],a[2]*n[0]-a[0]*n[2],a[0]*n[1]-a[1]*n[0]]}function h(a,n){a[0]+=n[0],a[1]+=n[1],a[2]+=n[2]}function s(a,n){return[a[0]*n,a[1]*n,a[2]*n]}function t(a){var n=(0,T._b)(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=n,a[1]/=n,a[2]/=n}},66624:function(N,L,e){e.d(L,{Z:function(){return z}});var T,w,i,_,v,h,s,t,a,n,r,l,o,u,p,c,b=e(39695),g=e(73182),d=e(72736),m={sphere:g.Z,point:x,lineStart:k,lineEnd:M,polygonStart:function(){m.lineStart=E,m.lineEnd=O},polygonEnd:function(){m.lineStart=k,m.lineEnd=M}};function x(U,R){U*=b.uR,R*=b.uR;var j=(0,b.mC)(R);y(j*(0,b.mC)(U),j*(0,b.O$)(U),(0,b.O$)(R))}function y(U,R,j){++T,i+=(U-i)/T,_+=(R-_)/T,v+=(j-v)/T}function k(){m.point=f}function f(U,R){U*=b.uR,R*=b.uR;var j=(0,b.mC)(R);u=j*(0,b.mC)(U),p=j*(0,b.O$)(U),c=(0,b.O$)(R),m.point=S,y(u,p,c)}function S(U,R){U*=b.uR,R*=b.uR;var j=(0,b.mC)(R),Z=j*(0,b.mC)(U),F=j*(0,b.O$)(U),V=(0,b.O$)(R),H=(0,b.fv)((0,b._b)((H=p*V-c*F)*H+(H=c*Z-u*V)*H+(H=u*F-p*Z)*H),u*Z+p*F+c*V);w+=H,h+=H*(u+(u=Z)),s+=H*(p+(p=F)),t+=H*(c+(c=V)),y(u,p,c)}function M(){m.point=x}function E(){m.point=P}function O(){I(l,o),m.point=x}function P(U,R){l=U,o=R,U*=b.uR,R*=b.uR,m.point=I;var j=(0,b.mC)(R);u=j*(0,b.mC)(U),p=j*(0,b.O$)(U),c=(0,b.O$)(R),y(u,p,c)}function I(U,R){U*=b.uR,R*=b.uR;var j=(0,b.mC)(R),Z=j*(0,b.mC)(U),F=j*(0,b.O$)(U),V=(0,b.O$)(R),H=p*V-c*F,te=c*Z-u*V,$=u*F-p*Z,J=(0,b._b)(H*H+te*te+$*$),X=(0,b.ZR)(J),K=J&&-X/J;a+=K*H,n+=K*te,r+=K*$,w+=X,h+=X*(u+(u=Z)),s+=X*(p+(p=F)),t+=X*(c+(c=V)),y(u,p,c)}function z(U){T=w=i=_=v=h=s=t=a=n=r=0,(0,d.Z)(U,m);var R=a,j=n,Z=r,F=R*R+j*j+Z*Z;return F<b.aW&&(R=h,j=s,Z=t,w<b.Ho&&(R=i,j=_,Z=v),(F=R*R+j*j+Z*Z)<b.aW)?[NaN,NaN]:[(0,b.fv)(j,R)*b.RW,(0,b.ZR)(Z/(0,b._b)(F))*b.RW]}},7613:function(N,L,e){e.d(L,{m:function(){return v},Z:function(){return s}});var T=e(7620);function w(t){return function(){return t}}var i=e(39695),_=e(49386);function v(t,a,n,r,l,o){if(n){var u=(0,i.mC)(a),p=(0,i.O$)(a),c=r*n;l==null?(l=a+r*i.BZ,o=a-c/2):(l=h(u,l),o=h(u,o),(r>0?l<o:l>o)&&(l+=r*i.BZ));for(var b,g=l;r>0?g>o:g<o;g-=c)b=(0,T.Y1)([u,-p*(0,i.mC)(g),-p*(0,i.O$)(g)]),t.point(b[0],b[1])}}function h(t,a){(a=(0,T.Og)(a))[0]-=t,(0,T.iJ)(a);var n=(0,i.Kh)(-a[1]);return((-a[2]<0?-n:n)+i.BZ-i.Ho)%i.BZ}function s(){var t,a,n=w([0,0]),r=w(90),l=w(6),o={point:function(p,c){t.push(p=a(p,c)),p[0]*=i.RW,p[1]*=i.RW}};function u(){var p=n.apply(this,arguments),c=r.apply(this,arguments)*i.uR,b=l.apply(this,arguments)*i.uR;return t=[],a=(0,_.I)(-p[0]*i.uR,-p[1]*i.uR,0).invert,v(o,c,b,1),p={type:"Polygon",coordinates:[t]},t=a=null,p}return u.center=function(p){return arguments.length?(n=typeof p=="function"?p:w([+p[0],+p[1]]),u):n},u.radius=function(p){return arguments.length?(r=typeof p=="function"?p:w(+p),u):r},u.precision=function(p){return arguments.length?(l=typeof p=="function"?p:w(+p),u):l},u}},87070:function(N,L,e){var T=e(97023),w=e(39695);L.Z=(0,T.Z)(function(){return!0},function(i){var _,v=NaN,h=NaN,s=NaN;return{lineStart:function(){i.lineStart(),_=1},point:function(t,a){var n=t>0?w.pi:-w.pi,r=(0,w.Wn)(t-v);(0,w.Wn)(r-w.pi)<w.Ho?(i.point(v,h=(h+a)/2>0?w.ou:-w.ou),i.point(s,h),i.lineEnd(),i.lineStart(),i.point(n,h),i.point(t,h),_=0):s!==n&&r>=w.pi&&((0,w.Wn)(v-s)<w.Ho&&(v-=s*w.Ho),(0,w.Wn)(t-n)<w.Ho&&(t-=n*w.Ho),h=function(l,o,u,p){var c,b,g=(0,w.O$)(l-u);return(0,w.Wn)(g)>w.Ho?(0,w.z4)(((0,w.O$)(o)*(b=(0,w.mC)(p))*(0,w.O$)(u)-(0,w.O$)(p)*(c=(0,w.mC)(o))*(0,w.O$)(l))/(c*b*g)):(o+p)/2}(v,h,t,a),i.point(s,h),i.lineEnd(),i.lineStart(),i.point(n,h),_=0),i.point(v=t,h=a),s=n},lineEnd:function(){i.lineEnd(),v=h=NaN},clean:function(){return 2-_}}},function(i,_,v,h){var s;if(i==null)s=v*w.ou,h.point(-w.pi,s),h.point(0,s),h.point(w.pi,s),h.point(w.pi,0),h.point(w.pi,-s),h.point(0,-s),h.point(-w.pi,-s),h.point(-w.pi,0),h.point(-w.pi,s);else if((0,w.Wn)(i[0]-_[0])>w.Ho){var t=i[0]<_[0]?w.pi:-w.pi;s=v*t/2,h.point(-t,s),h.point(0,s),h.point(t,s)}else h.point(_[0],_[1])},[-w.pi,-w.ou])},85272:function(N,L,e){e.d(L,{Z:function(){return w}});var T=e(73182);function w(){var i,_=[];return{point:function(v,h,s){i.push([v,h,s])},lineStart:function(){_.push(i=[])},lineEnd:T.Z,rejoin:function(){_.length>1&&_.push(_.pop().concat(_.shift()))},result:function(){var v=_;return _=[],i=null,v}}}},1457:function(N,L,e){e.d(L,{Z:function(){return h}});var T=e(7620),w=e(7613),i=e(39695),_=e(67108),v=e(97023);function h(s){var t=(0,i.mC)(s),a=6*i.uR,n=t>0,r=(0,i.Wn)(t)>i.Ho;function l(p,c){return(0,i.mC)(p)*(0,i.mC)(c)>t}function o(p,c,b){var g=(0,T.Og)(p),d=(0,T.Og)(c),m=[1,0,0],x=(0,T.T5)(g,d),y=(0,T.j9)(x,x),k=x[0],f=y-k*k;if(!f)return!b&&p;var S=t*y/f,M=-t*k/f,E=(0,T.T5)(m,x),O=(0,T.T)(m,S),P=(0,T.T)(x,M);(0,T.s0)(O,P);var I=E,z=(0,T.j9)(O,I),U=(0,T.j9)(I,I),R=z*z-U*((0,T.j9)(O,O)-1);if(!(R<0)){var j=(0,i._b)(R),Z=(0,T.T)(I,(-z-j)/U);if((0,T.s0)(Z,O),Z=(0,T.Y1)(Z),!b)return Z;var F,V=p[0],H=c[0],te=p[1],$=c[1];H<V&&(F=V,V=H,H=F);var J=H-V,X=(0,i.Wn)(J-i.pi)<i.Ho;if(!X&&$<te&&(F=te,te=$,$=F),X||J<i.Ho?X?te+$>0^Z[1]<((0,i.Wn)(Z[0]-V)<i.Ho?te:$):te<=Z[1]&&Z[1]<=$:J>i.pi^(V<=Z[0]&&Z[0]<=H)){var K=(0,T.T)(I,(-z+j)/U);return(0,T.s0)(K,O),[Z,(0,T.Y1)(K)]}}}function u(p,c){var b=n?s:i.pi-s,g=0;return p<-b?g|=1:p>b&&(g|=2),c<-b?g|=4:c>b&&(g|=8),g}return(0,v.Z)(l,function(p){var c,b,g,d,m;return{lineStart:function(){d=g=!1,m=1},point:function(x,y){var k,f=[x,y],S=l(x,y),M=n?S?0:u(x,y):S?u(x+(x<0?i.pi:-i.pi),y):0;if(!c&&(d=g=S)&&p.lineStart(),S!==g&&(!(k=o(c,f))||(0,_.Z)(c,k)||(0,_.Z)(f,k))&&(f[2]=1),S!==g)m=0,S?(p.lineStart(),k=o(f,c),p.point(k[0],k[1])):(k=o(c,f),p.point(k[0],k[1],2),p.lineEnd()),c=k;else if(r&&c&&n^S){var E;M&b||!(E=o(f,c,!0))||(m=0,n?(p.lineStart(),p.point(E[0][0],E[0][1]),p.point(E[1][0],E[1][1]),p.lineEnd()):(p.point(E[1][0],E[1][1]),p.lineEnd(),p.lineStart(),p.point(E[0][0],E[0][1],3)))}!S||c&&(0,_.Z)(c,f)||p.point(f[0],f[1]),c=f,g=S,b=M},lineEnd:function(){g&&p.lineEnd(),c=null},clean:function(){return m|(d&&g)<<1}}},function(p,c,b,g){(0,w.m)(g,s,a,b,p,c)},n?[0,-s]:[-i.pi,s-i.pi])}},97023:function(N,L,e){e.d(L,{Z:function(){return h}});var T=e(85272),w=e(46225),i=e(39695),_=e(23071),v=e(33064);function h(a,n,r,l){return function(o){var u,p,c,b=n(o),g=(0,T.Z)(),d=n(g),m=!1,x={point:y,lineStart:f,lineEnd:S,polygonStart:function(){x.point=M,x.lineStart=E,x.lineEnd=O,p=[],u=[]},polygonEnd:function(){x.point=y,x.lineStart=f,x.lineEnd=S,p=(0,v.TS)(p);var P=(0,_.Z)(u,l);p.length?(m||(o.polygonStart(),m=!0),(0,w.Z)(p,t,P,r,o)):P&&(m||(o.polygonStart(),m=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),m&&(o.polygonEnd(),m=!1),p=u=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(P,I){a(P,I)&&o.point(P,I)}function k(P,I){b.point(P,I)}function f(){x.point=k,b.lineStart()}function S(){x.point=y,b.lineEnd()}function M(P,I){c.push([P,I]),d.point(P,I)}function E(){d.lineStart(),c=[]}function O(){M(c[0][0],c[0][1]),d.lineEnd();var P,I,z,U,R=d.clean(),j=g.result(),Z=j.length;if(c.pop(),u.push(c),c=null,Z)if(1&R){if((I=(z=j[0]).length-1)>0){for(m||(o.polygonStart(),m=!0),o.lineStart(),P=0;P<I;++P)o.point((U=z[P])[0],U[1]);o.lineEnd()}}else Z>1&&2&R&&j.push(j.pop().concat(j.shift())),p.push(j.filter(s))}return x}}function s(a){return a.length>1}function t(a,n){return((a=a.x)[0]<0?a[1]-i.ou-i.Ho:i.ou-a[1])-((n=n.x)[0]<0?n[1]-i.ou-i.Ho:i.ou-n[1])}},87605:function(N,L,e){e.d(L,{Z:function(){return s}});var T=e(39695),w=e(85272),i=e(46225),_=e(33064),v=1e9,h=-v;function s(t,a,n,r){function l(b,g){return t<=b&&b<=n&&a<=g&&g<=r}function o(b,g,d,m){var x=0,y=0;if(b==null||(x=u(b,d))!==(y=u(g,d))||c(b,g)<0^d>0)do m.point(x===0||x===3?t:n,x>1?r:a);while((x=(x+d+4)%4)!==y);else m.point(g[0],g[1])}function u(b,g){return(0,T.Wn)(b[0]-t)<T.Ho?g>0?0:3:(0,T.Wn)(b[0]-n)<T.Ho?g>0?2:1:(0,T.Wn)(b[1]-a)<T.Ho?g>0?1:0:g>0?3:2}function p(b,g){return c(b.x,g.x)}function c(b,g){var d=u(b,1),m=u(g,1);return d!==m?d-m:d===0?g[1]-b[1]:d===1?b[0]-g[0]:d===2?b[1]-g[1]:g[0]-b[0]}return function(b){var g,d,m,x,y,k,f,S,M,E,O,P=b,I=(0,w.Z)(),z={point:U,lineStart:function(){z.point=R,d&&d.push(m=[]),E=!0,M=!1,f=S=NaN},lineEnd:function(){g&&(R(x,y),k&&M&&I.rejoin(),g.push(I.result())),z.point=U,M&&P.lineEnd()},polygonStart:function(){P=I,g=[],d=[],O=!0},polygonEnd:function(){var j=function(){for(var V=0,H=0,te=d.length;H<te;++H)for(var $,J,X=d[H],K=1,ee=X.length,ie=X[0],ae=ie[0],oe=ie[1];K<ee;++K)$=ae,J=oe,ae=(ie=X[K])[0],oe=ie[1],J<=r?oe>r&&(ae-$)*(r-J)>(oe-J)*(t-$)&&++V:oe<=r&&(ae-$)*(r-J)<(oe-J)*(t-$)&&--V;return V}(),Z=O&&j,F=(g=(0,_.TS)(g)).length;(Z||F)&&(b.polygonStart(),Z&&(b.lineStart(),o(null,null,1,b),b.lineEnd()),F&&(0,i.Z)(g,p,j,o,b),b.polygonEnd()),P=b,g=d=m=null}};function U(j,Z){l(j,Z)&&P.point(j,Z)}function R(j,Z){var F=l(j,Z);if(d&&m.push([j,Z]),E)x=j,y=Z,k=F,E=!1,F&&(P.lineStart(),P.point(j,Z));else if(F&&M)P.point(j,Z);else{var V=[f=Math.max(h,Math.min(v,f)),S=Math.max(h,Math.min(v,S))],H=[j=Math.max(h,Math.min(v,j)),Z=Math.max(h,Math.min(v,Z))];(function(te,$,J,X,K,ee){var ie,ae=te[0],oe=te[1],fe=0,ge=1,ve=$[0]-ae,xe=$[1]-oe;if(ie=J-ae,ve||!(ie>0)){if(ie/=ve,ve<0){if(ie<fe)return;ie<ge&&(ge=ie)}else if(ve>0){if(ie>ge)return;ie>fe&&(fe=ie)}if(ie=K-ae,ve||!(ie<0)){if(ie/=ve,ve<0){if(ie>ge)return;ie>fe&&(fe=ie)}else if(ve>0){if(ie<fe)return;ie<ge&&(ge=ie)}if(ie=X-oe,xe||!(ie>0)){if(ie/=xe,xe<0){if(ie<fe)return;ie<ge&&(ge=ie)}else if(xe>0){if(ie>ge)return;ie>fe&&(fe=ie)}if(ie=ee-oe,xe||!(ie<0)){if(ie/=xe,xe<0){if(ie>ge)return;ie>fe&&(fe=ie)}else if(xe>0){if(ie<fe)return;ie<ge&&(ge=ie)}return fe>0&&(te[0]=ae+fe*ve,te[1]=oe+fe*xe),ge<1&&($[0]=ae+ge*ve,$[1]=oe+ge*xe),!0}}}}})(V,H,t,a,n,r)?(M||(P.lineStart(),P.point(V[0],V[1])),P.point(H[0],H[1]),F||P.lineEnd(),O=!1):F&&(P.lineStart(),P.point(j,Z),O=!1)}f=j,S=Z,M=F}return z}}},46225:function(N,L,e){e.d(L,{Z:function(){return _}});var T=e(67108),w=e(39695);function i(h,s,t,a){this.x=h,this.z=s,this.o=t,this.e=a,this.v=!1,this.n=this.p=null}function _(h,s,t,a,n){var r,l,o=[],u=[];if(h.forEach(function(m){if(!((x=m.length-1)<=0)){var x,y,k=m[0],f=m[x];if((0,T.Z)(k,f)){if(!k[2]&&!f[2]){for(n.lineStart(),r=0;r<x;++r)n.point((k=m[r])[0],k[1]);return void n.lineEnd()}f[0]+=2*w.Ho}o.push(y=new i(k,m,null,!0)),u.push(y.o=new i(k,null,y,!1)),o.push(y=new i(f,m,null,!1)),u.push(y.o=new i(f,null,y,!0))}}),o.length){for(u.sort(s),v(o),v(u),r=0,l=u.length;r<l;++r)u[r].e=t=!t;for(var p,c,b=o[0];;){for(var g=b,d=!0;g.v;)if((g=g.n)===b)return;p=g.z,n.lineStart();do{if(g.v=g.o.v=!0,g.e){if(d)for(r=0,l=p.length;r<l;++r)n.point((c=p[r])[0],c[1]);else a(g.x,g.n.x,1,n);g=g.n}else{if(d)for(p=g.p.z,r=p.length-1;r>=0;--r)n.point((c=p[r])[0],c[1]);else a(g.x,g.p.x,-1,n);g=g.p}p=(g=g.o).z,d=!d}while(!g.v);n.lineEnd()}}}function v(h){if(s=h.length){for(var s,t,a=0,n=h[0];++a<s;)n.n=t=h[a],t.p=n,n=t;n.n=t=h[0],t.p=n}}},96059:function(N,L,e){function T(w,i){function _(v,h){return v=w(v,h),i(v[0],v[1])}return w.invert&&i.invert&&(_.invert=function(v,h){return(v=i.invert(v,h))&&w.invert(v[0],v[1])}),_}e.d(L,{Z:function(){return T}})},8593:function(N,L,e){function T(w){return w}e.d(L,{Z:function(){return T}})},27362:function(N,L,e){e.r(L),e.d(L,{geoAlbers:function(){return xt},geoAlbersUsa:function(){return Lt},geoArea:function(){return T.ZP},geoAzimuthalEqualArea:function(){return Tt.Z},geoAzimuthalEqualAreaRaw:function(){return Tt.l},geoAzimuthalEquidistant:function(){return bt.Z},geoAzimuthalEquidistantRaw:function(){return bt.N},geoBounds:function(){return w.Z},geoCentroid:function(){return i.Z},geoCircle:function(){return _.Z},geoClipAntimeridian:function(){return v.Z},geoClipCircle:function(){return h.Z},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.Z},geoConicConformal:function(){return Vt},geoConicConformalRaw:function(){return Wt},geoConicEqualArea:function(){return yt},geoConicEqualAreaRaw:function(){return gt},geoConicEquidistant:function(){return Ln},geoConicEquidistantRaw:function(){return Sn},geoContains:function(){return j},geoDistance:function(){return S},geoEqualEarth:function(){return An},geoEqualEarthRaw:function(){return kn},geoEquirectangular:function(){return on.Z},geoEquirectangularRaw:function(){return on.k},geoGnomonic:function(){return wn.Z},geoGnomonicRaw:function(){return wn.M},geoGraticule:function(){return H},geoGraticule10:function(){return te},geoIdentity:function(){return _n},geoInterpolate:function(){return ee.Z},geoLength:function(){return y},geoMercator:function(){return Bt},geoMercatorRaw:function(){return Dt},geoNaturalEarth1:function(){return zn.Z},geoNaturalEarth1Raw:function(){return zn.K},geoOrthographic:function(){return qn.Z},geoOrthographicRaw:function(){return qn.I},geoPath:function(){return Ue},geoProjection:function(){return at.Z},geoProjectionMutator:function(){return at.r},geoRotation:function(){return Ct.Z},geoStereographic:function(){return ir},geoStereographicRaw:function(){return pr},geoStream:function(){return c.Z},geoTransform:function(){return Cn.Z},geoTransverseMercator:function(){return mr},geoTransverseMercatorRaw:function(){return Jn}});var T=e(97860),w=e(77338),i=e(66624),_=e(7613),v=e(87070),h=e(1457),s=e(87605);function t(){var qt,tn,dn,vn=0,On=0,Hn=960,Bn=500;return dn={stream:function(Vn){return qt&&tn===Vn?qt:qt=(0,s.Z)(vn,On,Hn,Bn)(tn=Vn)},extent:function(Vn){return arguments.length?(vn=+Vn[0][0],On=+Vn[0][1],Hn=+Vn[1][0],Bn=+Vn[1][1],qt=tn=null,dn):[[vn,On],[Hn,Bn]]}}}var a,n,r,l=e(23071),o=e(33940),u=e(39695),p=e(73182),c=e(72736),b=(0,o.Z)(),g={sphere:p.Z,point:p.Z,lineStart:function(){g.point=m,g.lineEnd=d},lineEnd:p.Z,polygonStart:p.Z,polygonEnd:p.Z};function d(){g.point=g.lineEnd=p.Z}function m(qt,tn){qt*=u.uR,tn*=u.uR,a=qt,n=(0,u.O$)(tn),r=(0,u.mC)(tn),g.point=x}function x(qt,tn){qt*=u.uR,tn*=u.uR;var dn=(0,u.O$)(tn),vn=(0,u.mC)(tn),On=(0,u.Wn)(qt-a),Hn=(0,u.mC)(On),Bn=vn*(0,u.O$)(On),Vn=r*dn-n*vn*Hn,nr=n*dn+r*vn*Hn;b.add((0,u.fv)((0,u._b)(Bn*Bn+Vn*Vn),nr)),a=qt,n=dn,r=vn}function y(qt){return b.reset(),(0,c.Z)(qt,g),+b}var k=[null,null],f={type:"LineString",coordinates:k};function S(qt,tn){return k[0]=qt,k[1]=tn,y(f)}var M={Feature:function(qt,tn){return O(qt.geometry,tn)},FeatureCollection:function(qt,tn){for(var dn=qt.features,vn=-1,On=dn.length;++vn<On;)if(O(dn[vn].geometry,tn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(qt,tn){return P(qt.coordinates,tn)},MultiPoint:function(qt,tn){for(var dn=qt.coordinates,vn=-1,On=dn.length;++vn<On;)if(P(dn[vn],tn))return!0;return!1},LineString:function(qt,tn){return I(qt.coordinates,tn)},MultiLineString:function(qt,tn){for(var dn=qt.coordinates,vn=-1,On=dn.length;++vn<On;)if(I(dn[vn],tn))return!0;return!1},Polygon:function(qt,tn){return z(qt.coordinates,tn)},MultiPolygon:function(qt,tn){for(var dn=qt.coordinates,vn=-1,On=dn.length;++vn<On;)if(z(dn[vn],tn))return!0;return!1},GeometryCollection:function(qt,tn){for(var dn=qt.geometries,vn=-1,On=dn.length;++vn<On;)if(O(dn[vn],tn))return!0;return!1}};function O(qt,tn){return!(!qt||!E.hasOwnProperty(qt.type))&&E[qt.type](qt,tn)}function P(qt,tn){return S(qt,tn)===0}function I(qt,tn){for(var dn,vn,On,Hn=0,Bn=qt.length;Hn<Bn;Hn++){if((vn=S(qt[Hn],tn))===0||Hn>0&&(On=S(qt[Hn],qt[Hn-1]))>0&&dn<=On&&vn<=On&&(dn+vn-On)*(1-Math.pow((dn-vn)/On,2))<u.aW*On)return!0;dn=vn}return!1}function z(qt,tn){return!!(0,l.Z)(qt.map(U),R(tn))}function U(qt){return(qt=qt.map(R)).pop(),qt}function R(qt){return[qt[0]*u.uR,qt[1]*u.uR]}function j(qt,tn){return(qt&&M.hasOwnProperty(qt.type)?M[qt.type]:O)(qt,tn)}var Z=e(33064);function F(qt,tn,dn){var vn=(0,Z.w6)(qt,tn-u.Ho,dn).concat(tn);return function(On){return vn.map(function(Hn){return[On,Hn]})}}function V(qt,tn,dn){var vn=(0,Z.w6)(qt,tn-u.Ho,dn).concat(tn);return function(On){return vn.map(function(Hn){return[Hn,On]})}}function H(){var qt,tn,dn,vn,On,Hn,Bn,Vn,nr,Qt,bn,Rt,Kt=10,rn=Kt,xn=90,Tn=360,Pn=2.5;function pn(){return{type:"MultiLineString",coordinates:$t()}}function $t(){return(0,Z.w6)((0,u.mD)(vn/xn)*xn,dn,xn).map(bn).concat((0,Z.w6)((0,u.mD)(Vn/Tn)*Tn,Bn,Tn).map(Rt)).concat((0,Z.w6)((0,u.mD)(tn/Kt)*Kt,qt,Kt).filter(function(en){return(0,u.Wn)(en%xn)>u.Ho}).map(nr)).concat((0,Z.w6)((0,u.mD)(Hn/rn)*rn,On,rn).filter(function(en){return(0,u.Wn)(en%Tn)>u.Ho}).map(Qt))}return pn.lines=function(){return $t().map(function(en){return{type:"LineString",coordinates:en}})},pn.outline=function(){return{type:"Polygon",coordinates:[bn(vn).concat(Rt(Bn).slice(1),bn(dn).reverse().slice(1),Rt(Vn).reverse().slice(1))]}},pn.extent=function(en){return arguments.length?pn.extentMajor(en).extentMinor(en):pn.extentMinor()},pn.extentMajor=function(en){return arguments.length?(vn=+en[0][0],dn=+en[1][0],Vn=+en[0][1],Bn=+en[1][1],vn>dn&&(en=vn,vn=dn,dn=en),Vn>Bn&&(en=Vn,Vn=Bn,Bn=en),pn.precision(Pn)):[[vn,Vn],[dn,Bn]]},pn.extentMinor=function(en){return arguments.length?(tn=+en[0][0],qt=+en[1][0],Hn=+en[0][1],On=+en[1][1],tn>qt&&(en=tn,tn=qt,qt=en),Hn>On&&(en=Hn,Hn=On,On=en),pn.precision(Pn)):[[tn,Hn],[qt,On]]},pn.step=function(en){return arguments.length?pn.stepMajor(en).stepMinor(en):pn.stepMinor()},pn.stepMajor=function(en){return arguments.length?(xn=+en[0],Tn=+en[1],pn):[xn,Tn]},pn.stepMinor=function(en){return arguments.length?(Kt=+en[0],rn=+en[1],pn):[Kt,rn]},pn.precision=function(en){return arguments.length?(Pn=+en,nr=F(Hn,On,90),Qt=V(tn,qt,Pn),bn=F(Vn,Bn,90),Rt=V(vn,dn,Pn),pn):Pn},pn.extentMajor([[-180,-90+u.Ho],[180,90-u.Ho]]).extentMinor([[-180,-80-u.Ho],[180,80+u.Ho]])}function te(){return H()()}var $,J,X,K,ee=e(83074),ie=e(8593),ae=(0,o.Z)(),oe=(0,o.Z)(),fe={point:p.Z,lineStart:p.Z,lineEnd:p.Z,polygonStart:function(){fe.lineStart=ge,fe.lineEnd=_e},polygonEnd:function(){fe.lineStart=fe.lineEnd=fe.point=p.Z,ae.add((0,u.Wn)(oe)),oe.reset()},result:function(){var qt=ae/2;return ae.reset(),qt}};function ge(){fe.point=ve}function ve(qt,tn){fe.point=xe,$=X=qt,J=K=tn}function xe(qt,tn){oe.add(K*qt-X*tn),X=qt,K=tn}function _e(){xe($,J)}var ye,Ce,ke,Te,le=fe,ue=e(3559),de=0,Le=0,we=0,Ee=0,Oe=0,Fe=0,pe=0,be=0,Me=0,De={point:Ne,lineStart:Be,lineEnd:et,polygonStart:function(){De.lineStart=ft,De.lineEnd=ht},polygonEnd:function(){De.point=Ne,De.lineStart=Be,De.lineEnd=et},result:function(){var qt=Me?[pe/Me,be/Me]:Fe?[Ee/Fe,Oe/Fe]:we?[de/we,Le/we]:[NaN,NaN];return de=Le=we=Ee=Oe=Fe=pe=be=Me=0,qt}};function Ne(qt,tn){de+=qt,Le+=tn,++we}function Be(){De.point=Ye}function Ye(qt,tn){De.point=We,Ne(ke=qt,Te=tn)}function We(qt,tn){var dn=qt-ke,vn=tn-Te,On=(0,u._b)(dn*dn+vn*vn);Ee+=On*(ke+qt)/2,Oe+=On*(Te+tn)/2,Fe+=On,Ne(ke=qt,Te=tn)}function et(){De.point=Ne}function ft(){De.point=mt}function ht(){Mt(ye,Ce)}function mt(qt,tn){De.point=Mt,Ne(ye=ke=qt,Ce=Te=tn)}function Mt(qt,tn){var dn=qt-ke,vn=tn-Te,On=(0,u._b)(dn*dn+vn*vn);Ee+=On*(ke+qt)/2,Oe+=On*(Te+tn)/2,Fe+=On,pe+=(On=Te*qt-ke*tn)*(ke+qt),be+=On*(Te+tn),Me+=3*On,Ne(ke=qt,Te=tn)}var _t=De;function it(qt){this._context=qt}it.prototype={_radius:4.5,pointRadius:function(qt){return this._radius=qt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(qt,tn){switch(this._point){case 0:this._context.moveTo(qt,tn),this._point=1;break;case 1:this._context.lineTo(qt,tn);break;default:this._context.moveTo(qt+this._radius,tn),this._context.arc(qt,tn,this._radius,0,u.BZ)}},result:p.Z};var st,St,zt,Ft,Pt,Xe=(0,o.Z)(),Ke={point:p.Z,lineStart:function(){Ke.point=He},lineEnd:function(){st&&Je(St,zt),Ke.point=p.Z},polygonStart:function(){st=!0},polygonEnd:function(){st=null},result:function(){var qt=+Xe;return Xe.reset(),qt}};function He(qt,tn){Ke.point=Je,St=Ft=qt,zt=Pt=tn}function Je(qt,tn){Ft-=qt,Pt-=tn,Xe.add((0,u._b)(Ft*Ft+Pt*Pt)),Ft=qt,Pt=tn}var lt=Ke;function ot(){this._string=[]}function je(qt){return"m0,"+qt+"a"+qt+","+qt+" 0 1,1 0,"+-2*qt+"a"+qt+","+qt+" 0 1,1 0,"+2*qt+"z"}function Ue(qt,tn){var dn,vn,On=4.5;function Hn(Bn){return Bn&&(typeof On=="function"&&vn.pointRadius(+On.apply(this,arguments)),(0,c.Z)(Bn,dn(vn))),vn.result()}return Hn.area=function(Bn){return(0,c.Z)(Bn,dn(le)),le.result()},Hn.measure=function(Bn){return(0,c.Z)(Bn,dn(lt)),lt.result()},Hn.bounds=function(Bn){return(0,c.Z)(Bn,dn(ue.Z)),ue.Z.result()},Hn.centroid=function(Bn){return(0,c.Z)(Bn,dn(_t)),_t.result()},Hn.projection=function(Bn){return arguments.length?(dn=Bn==null?(qt=null,ie.Z):(qt=Bn).stream,Hn):qt},Hn.context=function(Bn){return arguments.length?(vn=Bn==null?(tn=null,new ot):new it(tn=Bn),typeof On!="function"&&vn.pointRadius(On),Hn):tn},Hn.pointRadius=function(Bn){return arguments.length?(On=typeof Bn=="function"?Bn:(vn.pointRadius(+Bn),+Bn),Hn):On},Hn.projection(qt).context(tn)}ot.prototype={_radius:4.5,_circle:je(4.5),pointRadius:function(qt){return(qt=+qt)!==this._radius&&(this._radius=qt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(qt,tn){switch(this._point){case 0:this._string.push("M",qt,",",tn),this._point=1;break;case 1:this._string.push("L",qt,",",tn);break;default:this._circle==null&&(this._circle=je(this._radius)),this._string.push("M",qt,",",tn,this._circle)}},result:function(){if(this._string.length){var qt=this._string.join("");return this._string=[],qt}return null}};var at=e(15002);function $e(qt){var tn=0,dn=u.pi/3,vn=(0,at.r)(qt),On=vn(tn,dn);return On.parallels=function(Hn){return arguments.length?vn(tn=Hn[0]*u.uR,dn=Hn[1]*u.uR):[tn*u.RW,dn*u.RW]},On}function gt(qt,tn){var dn=(0,u.O$)(qt),vn=(dn+(0,u.O$)(tn))/2;if((0,u.Wn)(vn)<u.Ho)return function(Vn){var nr=(0,u.mC)(Vn);function Qt(bn,Rt){return[bn*nr,(0,u.O$)(Rt)/nr]}return Qt.invert=function(bn,Rt){return[bn/nr,(0,u.ZR)(Rt*nr)]},Qt}(qt);var On=1+dn*(2*vn-dn),Hn=(0,u._b)(On)/vn;function Bn(Vn,nr){var Qt=(0,u._b)(On-2*vn*(0,u.O$)(nr))/vn;return[Qt*(0,u.O$)(Vn*=vn),Hn-Qt*(0,u.mC)(Vn)]}return Bn.invert=function(Vn,nr){var Qt=Hn-nr,bn=(0,u.fv)(Vn,(0,u.Wn)(Qt))*(0,u.Xx)(Qt);return Qt*vn<0&&(bn-=u.pi*(0,u.Xx)(Vn)*(0,u.Xx)(Qt)),[bn/vn,(0,u.ZR)((On-(Vn*Vn+Qt*Qt)*vn*vn)/(2*vn))]},Bn}function yt(){return $e(gt).scale(155.424).center([0,33.6442])}function xt(){return yt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var dt=e(47589);function Lt(){var qt,tn,dn,vn,On,Hn,Bn=xt(),Vn=yt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),nr=yt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Qt={point:function(Kt,rn){Hn=[Kt,rn]}};function bn(Kt){var rn=Kt[0],xn=Kt[1];return Hn=null,dn.point(rn,xn),Hn||(vn.point(rn,xn),Hn)||(On.point(rn,xn),Hn)}function Rt(){return qt=tn=null,bn}return bn.invert=function(Kt){var rn=Bn.scale(),xn=Bn.translate(),Tn=(Kt[0]-xn[0])/rn,Pn=(Kt[1]-xn[1])/rn;return(Pn>=.12&&Pn<.234&&Tn>=-.425&&Tn<-.214?Vn:Pn>=.166&&Pn<.234&&Tn>=-.214&&Tn<-.115?nr:Bn).invert(Kt)},bn.stream=function(Kt){return qt&&tn===Kt?qt:(rn=[Bn.stream(tn=Kt),Vn.stream(Kt),nr.stream(Kt)],xn=rn.length,qt={point:function(Tn,Pn){for(var pn=-1;++pn<xn;)rn[pn].point(Tn,Pn)},sphere:function(){for(var Tn=-1;++Tn<xn;)rn[Tn].sphere()},lineStart:function(){for(var Tn=-1;++Tn<xn;)rn[Tn].lineStart()},lineEnd:function(){for(var Tn=-1;++Tn<xn;)rn[Tn].lineEnd()},polygonStart:function(){for(var Tn=-1;++Tn<xn;)rn[Tn].polygonStart()},polygonEnd:function(){for(var Tn=-1;++Tn<xn;)rn[Tn].polygonEnd()}});var rn,xn},bn.precision=function(Kt){return arguments.length?(Bn.precision(Kt),Vn.precision(Kt),nr.precision(Kt),Rt()):Bn.precision()},bn.scale=function(Kt){return arguments.length?(Bn.scale(Kt),Vn.scale(.35*Kt),nr.scale(Kt),bn.translate(Bn.translate())):Bn.scale()},bn.translate=function(Kt){if(!arguments.length)return Bn.translate();var rn=Bn.scale(),xn=+Kt[0],Tn=+Kt[1];return dn=Bn.translate(Kt).clipExtent([[xn-.455*rn,Tn-.238*rn],[xn+.455*rn,Tn+.238*rn]]).stream(Qt),vn=Vn.translate([xn-.307*rn,Tn+.201*rn]).clipExtent([[xn-.425*rn+u.Ho,Tn+.12*rn+u.Ho],[xn-.214*rn-u.Ho,Tn+.234*rn-u.Ho]]).stream(Qt),On=nr.translate([xn-.205*rn,Tn+.212*rn]).clipExtent([[xn-.214*rn+u.Ho,Tn+.166*rn+u.Ho],[xn-.115*rn-u.Ho,Tn+.234*rn-u.Ho]]).stream(Qt),Rt()},bn.fitExtent=function(Kt,rn){return(0,dt.qg)(bn,Kt,rn)},bn.fitSize=function(Kt,rn){return(0,dt.mF)(bn,Kt,rn)},bn.fitWidth=function(Kt,rn){return(0,dt.V6)(bn,Kt,rn)},bn.fitHeight=function(Kt,rn){return(0,dt.rf)(bn,Kt,rn)},bn.scale(1070)}var Tt=e(12956),bt=e(17889),Ct=e(49386);function Dt(qt,tn){return[qt,(0,u.cM)((0,u.OR)((u.ou+tn)/2))]}function Bt(){return Xt(Dt).scale(961/u.BZ)}function Xt(qt){var tn,dn,vn,On=(0,at.Z)(qt),Hn=On.center,Bn=On.scale,Vn=On.translate,nr=On.clipExtent,Qt=null;function bn(){var Rt=u.pi*Bn(),Kt=On((0,Ct.Z)(On.rotate()).invert([0,0]));return nr(Qt==null?[[Kt[0]-Rt,Kt[1]-Rt],[Kt[0]+Rt,Kt[1]+Rt]]:qt===Dt?[[Math.max(Kt[0]-Rt,Qt),tn],[Math.min(Kt[0]+Rt,dn),vn]]:[[Qt,Math.max(Kt[1]-Rt,tn)],[dn,Math.min(Kt[1]+Rt,vn)]])}return On.scale=function(Rt){return arguments.length?(Bn(Rt),bn()):Bn()},On.translate=function(Rt){return arguments.length?(Vn(Rt),bn()):Vn()},On.center=function(Rt){return arguments.length?(Hn(Rt),bn()):Hn()},On.clipExtent=function(Rt){return arguments.length?(Rt==null?Qt=tn=dn=vn=null:(Qt=+Rt[0][0],tn=+Rt[0][1],dn=+Rt[1][0],vn=+Rt[1][1]),bn()):Qt==null?null:[[Qt,tn],[dn,vn]]},bn()}function an(qt){return(0,u.OR)((u.ou+qt)/2)}function Wt(qt,tn){var dn=(0,u.mC)(qt),vn=qt===tn?(0,u.O$)(qt):(0,u.cM)(dn/(0,u.mC)(tn))/(0,u.cM)(an(tn)/an(qt)),On=dn*(0,u.sQ)(an(qt),vn)/vn;if(!vn)return Dt;function Hn(Bn,Vn){On>0?Vn<-u.ou+u.Ho&&(Vn=-u.ou+u.Ho):Vn>u.ou-u.Ho&&(Vn=u.ou-u.Ho);var nr=On/(0,u.sQ)(an(Vn),vn);return[nr*(0,u.O$)(vn*Bn),On-nr*(0,u.mC)(vn*Bn)]}return Hn.invert=function(Bn,Vn){var nr=On-Vn,Qt=(0,u.Xx)(vn)*(0,u._b)(Bn*Bn+nr*nr),bn=(0,u.fv)(Bn,(0,u.Wn)(nr))*(0,u.Xx)(nr);return nr*vn<0&&(bn-=u.pi*(0,u.Xx)(Bn)*(0,u.Xx)(nr)),[bn/vn,2*(0,u.z4)((0,u.sQ)(On/Qt,1/vn))-u.ou]},Hn}function Vt(){return $e(Wt).scale(109.5).parallels([30,30])}Dt.invert=function(qt,tn){return[qt,2*(0,u.z4)((0,u.Qq)(tn))-u.ou]};var on=e(97492);function Sn(qt,tn){var dn=(0,u.mC)(qt),vn=qt===tn?(0,u.O$)(qt):(dn-(0,u.mC)(tn))/(tn-qt),On=dn/vn+qt;if((0,u.Wn)(vn)<u.Ho)return on.k;function Hn(Bn,Vn){var nr=On-Vn,Qt=vn*Bn;return[nr*(0,u.O$)(Qt),On-nr*(0,u.mC)(Qt)]}return Hn.invert=function(Bn,Vn){var nr=On-Vn,Qt=(0,u.fv)(Bn,(0,u.Wn)(nr))*(0,u.Xx)(nr);return nr*vn<0&&(Qt-=u.pi*(0,u.Xx)(Bn)*(0,u.Xx)(nr)),[Qt/vn,On-(0,u.Xx)(vn)*(0,u._b)(Bn*Bn+nr*nr)]},Hn}function Ln(){return $e(Sn).scale(131.154).center([0,13.9389])}var fn=1.340264,Zt=-.081106,ln=893e-6,nn=.003796,cn=(0,u._b)(3)/2;function kn(qt,tn){var dn=(0,u.ZR)(cn*(0,u.O$)(tn)),vn=dn*dn,On=vn*vn*vn;return[qt*(0,u.mC)(dn)/(cn*(fn+3*Zt*vn+On*(7*ln+9*nn*vn))),dn*(fn+Zt*vn+On*(ln+nn*vn))]}function An(){return(0,at.Z)(kn).scale(177.158)}kn.invert=function(qt,tn){for(var dn,vn=tn,On=vn*vn,Hn=On*On*On,Bn=0;Bn<12&&(Hn=(On=(vn-=dn=(vn*(fn+Zt*On+Hn*(ln+nn*On))-tn)/(fn+3*Zt*On+Hn*(7*ln+9*nn*On)))*vn)*On*On,!((0,u.Wn)(dn)<u.aW));++Bn);return[cn*qt*(fn+3*Zt*On+Hn*(7*ln+9*nn*On))/(0,u.mC)(vn),(0,u.ZR)((0,u.O$)(vn)/cn)]};var wn=e(98936),Cn=e(64684);function _n(){var qt,tn,dn,vn,On,Hn,Bn,Vn=1,nr=0,Qt=0,bn=1,Rt=1,Kt=0,rn=null,xn=1,Tn=1,Pn=(0,Cn.l)({point:function(hn,gn){var Dn=en([hn,gn]);this.stream.point(Dn[0],Dn[1])}}),pn=ie.Z;function $t(){return xn=Vn*bn,Tn=Vn*Rt,Hn=Bn=null,en}function en(hn){var gn=hn[0]*xn,Dn=hn[1]*Tn;if(Kt){var Fn=Dn*qt-gn*tn;gn=gn*qt+Dn*tn,Dn=Fn}return[gn+nr,Dn+Qt]}return en.invert=function(hn){var gn=hn[0]-nr,Dn=hn[1]-Qt;if(Kt){var Fn=Dn*qt+gn*tn;gn=gn*qt-Dn*tn,Dn=Fn}return[gn/xn,Dn/Tn]},en.stream=function(hn){return Hn&&Bn===hn?Hn:Hn=Pn(pn(Bn=hn))},en.postclip=function(hn){return arguments.length?(pn=hn,rn=dn=vn=On=null,$t()):pn},en.clipExtent=function(hn){return arguments.length?(pn=hn==null?(rn=dn=vn=On=null,ie.Z):(0,s.Z)(rn=+hn[0][0],dn=+hn[0][1],vn=+hn[1][0],On=+hn[1][1]),$t()):rn==null?null:[[rn,dn],[vn,On]]},en.scale=function(hn){return arguments.length?(Vn=+hn,$t()):Vn},en.translate=function(hn){return arguments.length?(nr=+hn[0],Qt=+hn[1],$t()):[nr,Qt]},en.angle=function(hn){return arguments.length?(Kt=hn%360*u.uR,tn=(0,u.O$)(Kt),qt=(0,u.mC)(Kt),$t()):Kt*u.RW},en.reflectX=function(hn){return arguments.length?(bn=hn?-1:1,$t()):bn<0},en.reflectY=function(hn){return arguments.length?(Rt=hn?-1:1,$t()):Rt<0},en.fitExtent=function(hn,gn){return(0,dt.qg)(en,hn,gn)},en.fitSize=function(hn,gn){return(0,dt.mF)(en,hn,gn)},en.fitWidth=function(hn,gn){return(0,dt.V6)(en,hn,gn)},en.fitHeight=function(hn,gn){return(0,dt.rf)(en,hn,gn)},en}var zn=e(26867),qn=e(57962),sr=e(25382);function pr(qt,tn){var dn=(0,u.mC)(tn),vn=1+(0,u.mC)(qt)*dn;return[dn*(0,u.O$)(qt)/vn,(0,u.O$)(tn)/vn]}function ir(){return(0,at.Z)(pr).scale(250).clipAngle(142)}function Jn(qt,tn){return[(0,u.cM)((0,u.OR)((u.ou+tn)/2)),-qt]}function mr(){var qt=Xt(Jn),tn=qt.center,dn=qt.rotate;return qt.center=function(vn){return arguments.length?tn([-vn[1],vn[0]]):[(vn=tn())[1],-vn[0]]},qt.rotate=function(vn){return arguments.length?dn([vn[0],vn[1],vn.length>2?vn[2]+90:90]):[(vn=dn())[0],vn[1],vn[2]-90]},dn([0,0,90]).scale(159.155)}pr.invert=(0,sr.O)(function(qt){return 2*(0,u.z4)(qt)}),Jn.invert=function(qt,tn){return[-tn,2*(0,u.z4)((0,u.Qq)(qt))-u.ou]}},83074:function(N,L,e){e.d(L,{Z:function(){return w}});var T=e(39695);function w(i,_){var v=i[0]*T.uR,h=i[1]*T.uR,s=_[0]*T.uR,t=_[1]*T.uR,a=(0,T.mC)(h),n=(0,T.O$)(h),r=(0,T.mC)(t),l=(0,T.O$)(t),o=a*(0,T.mC)(v),u=a*(0,T.O$)(v),p=r*(0,T.mC)(s),c=r*(0,T.O$)(s),b=2*(0,T.ZR)((0,T._b)((0,T.Jy)(t-h)+a*r*(0,T.Jy)(s-v))),g=(0,T.O$)(b),d=b?function(m){var x=(0,T.O$)(m*=b)/g,y=(0,T.O$)(b-m)/g,k=y*o+x*p,f=y*u+x*c,S=y*n+x*l;return[(0,T.fv)(f,k)*T.RW,(0,T.fv)(S,(0,T._b)(k*k+f*f))*T.RW]}:function(){return[v*T.RW,h*T.RW]};return d.distance=b,d}},39695:function(N,L,e){e.d(L,{BZ:function(){return h},Ho:function(){return T},Jy:function(){return k},Kh:function(){return x},O$:function(){return b},OR:function(){return m},Qq:function(){return u},RW:function(){return s},Wn:function(){return a},Xx:function(){return g},ZR:function(){return y},_b:function(){return d},aW:function(){return w},cM:function(){return p},fv:function(){return r},mC:function(){return l},mD:function(){return o},ou:function(){return _},pi:function(){return i},pu:function(){return v},sQ:function(){return c},uR:function(){return t},z4:function(){return n}});var T=1e-6,w=1e-12,i=Math.PI,_=i/2,v=i/4,h=2*i,s=180/i,t=i/180,a=Math.abs,n=Math.atan,r=Math.atan2,l=Math.cos,o=Math.ceil,u=Math.exp,p=Math.log,c=Math.pow,b=Math.sin,g=Math.sign||function(f){return f>0?1:f<0?-1:0},d=Math.sqrt,m=Math.tan;function x(f){return f>1?0:f<-1?i:Math.acos(f)}function y(f){return f>1?_:f<-1?-_:Math.asin(f)}function k(f){return(f=b(f/2))*f}},73182:function(N,L,e){function T(){}e.d(L,{Z:function(){return T}})},3559:function(N,L,e){var T=e(73182),w=1/0,i=w,_=-w,v=_,h={point:function(s,t){s<w&&(w=s),s>_&&(_=s),t<i&&(i=t),t>v&&(v=t)},lineStart:T.Z,lineEnd:T.Z,polygonStart:T.Z,polygonEnd:T.Z,result:function(){var s=[[w,i],[_,v]];return _=v=-(i=w=1/0),s}};L.Z=h},67108:function(N,L,e){e.d(L,{Z:function(){return w}});var T=e(39695);function w(i,_){return(0,T.Wn)(i[0]-_[0])<T.Ho&&(0,T.Wn)(i[1]-_[1])<T.Ho}},23071:function(N,L,e){e.d(L,{Z:function(){return h}});var T=e(33940),w=e(7620),i=e(39695),_=(0,T.Z)();function v(s){return(0,i.Wn)(s[0])<=i.pi?s[0]:(0,i.Xx)(s[0])*(((0,i.Wn)(s[0])+i.pi)%i.BZ-i.pi)}function h(s,t){var a=v(t),n=t[1],r=(0,i.O$)(n),l=[(0,i.O$)(a),-(0,i.mC)(a),0],o=0,u=0;_.reset(),r===1?n=i.ou+i.Ho:r===-1&&(n=-i.ou-i.Ho);for(var p=0,c=s.length;p<c;++p)if(g=(b=s[p]).length)for(var b,g,d=b[g-1],m=v(d),x=d[1]/2+i.pu,y=(0,i.O$)(x),k=(0,i.mC)(x),f=0;f<g;++f,m=M,y=O,k=P,d=S){var S=b[f],M=v(S),E=S[1]/2+i.pu,O=(0,i.O$)(E),P=(0,i.mC)(E),I=M-m,z=I>=0?1:-1,U=z*I,R=U>i.pi,j=y*O;if(_.add((0,i.fv)(j*z*(0,i.O$)(U),k*P+j*(0,i.mC)(U))),o+=R?I+z*i.BZ:I,R^m>=a^M>=a){var Z=(0,w.T5)((0,w.Og)(d),(0,w.Og)(S));(0,w.iJ)(Z);var F=(0,w.T5)(l,Z);(0,w.iJ)(F);var V=(R^I>=0?-1:1)*(0,i.ZR)(F[2]);(n>V||n===V&&(Z[0]||Z[1]))&&(u+=R^I>=0?1:-1)}}return(o<-i.Ho||o<i.Ho&&_<-i.Ho)^1&u}},25382:function(N,L,e){e.d(L,{O:function(){return i},W:function(){return w}});var T=e(39695);function w(_){return function(v,h){var s=(0,T.mC)(v),t=(0,T.mC)(h),a=_(s*t);return[a*t*(0,T.O$)(v),a*(0,T.O$)(h)]}}function i(_){return function(v,h){var s=(0,T._b)(v*v+h*h),t=_(s),a=(0,T.O$)(t),n=(0,T.mC)(t);return[(0,T.fv)(v*a,s*n),(0,T.ZR)(s&&h*a/s)]}}},12956:function(N,L,e){e.d(L,{Z:function(){return v},l:function(){return _}});var T=e(39695),w=e(25382),i=e(15002),_=(0,w.W)(function(h){return(0,T._b)(2/(1+h))});function v(){return(0,i.Z)(_).scale(124.75).clipAngle(179.999)}_.invert=(0,w.O)(function(h){return 2*(0,T.ZR)(h/2)})},17889:function(N,L,e){e.d(L,{N:function(){return _},Z:function(){return v}});var T=e(39695),w=e(25382),i=e(15002),_=(0,w.W)(function(h){return(h=(0,T.Kh)(h))&&h/(0,T.O$)(h)});function v(){return(0,i.Z)(_).scale(79.4188).clipAngle(179.999)}_.invert=(0,w.O)(function(h){return h})},97492:function(N,L,e){e.d(L,{Z:function(){return i},k:function(){return w}});var T=e(15002);function w(_,v){return[_,v]}function i(){return(0,T.Z)(w).scale(152.63)}w.invert=w},47589:function(N,L,e){e.d(L,{V6:function(){return h},mF:function(){return v},qg:function(){return _},rf:function(){return s}});var T=e(72736),w=e(3559);function i(t,a,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),(0,T.Z)(n,t.stream(w.Z)),a(w.Z.result()),r!=null&&t.clipExtent(r),t}function _(t,a,n){return i(t,function(r){var l=a[1][0]-a[0][0],o=a[1][1]-a[0][1],u=Math.min(l/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),p=+a[0][0]+(l-u*(r[1][0]+r[0][0]))/2,c=+a[0][1]+(o-u*(r[1][1]+r[0][1]))/2;t.scale(150*u).translate([p,c])},n)}function v(t,a,n){return _(t,[[0,0],a],n)}function h(t,a,n){return i(t,function(r){var l=+a,o=l/(r[1][0]-r[0][0]),u=(l-o*(r[1][0]+r[0][0]))/2,p=-o*r[0][1];t.scale(150*o).translate([u,p])},n)}function s(t,a,n){return i(t,function(r){var l=+a,o=l/(r[1][1]-r[0][1]),u=-o*r[0][0],p=(l-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([u,p])},n)}},98936:function(N,L,e){e.d(L,{M:function(){return _},Z:function(){return v}});var T=e(39695),w=e(25382),i=e(15002);function _(h,s){var t=(0,T.mC)(s),a=(0,T.mC)(h)*t;return[t*(0,T.O$)(h)/a,(0,T.O$)(s)/a]}function v(){return(0,i.Z)(_).scale(144.049).clipAngle(60)}_.invert=(0,w.O)(T.z4)},15002:function(N,L,e){e.d(L,{Z:function(){return b},r:function(){return g}});var T=e(87070),w=e(1457),i=e(87605),_=e(96059),v=e(8593),h=e(39695),s=e(49386),t=e(64684),a=e(47589),n=e(7620),r=16,l=(0,h.mC)(30*h.uR);function o(d,m){return+m?function(x,y){function k(f,S,M,E,O,P,I,z,U,R,j,Z,F,V){var H=I-f,te=z-S,$=H*H+te*te;if($>4*y&&F--){var J=E+R,X=O+j,K=P+Z,ee=(0,h._b)(J*J+X*X+K*K),ie=(0,h.ZR)(K/=ee),ae=(0,h.Wn)((0,h.Wn)(K)-1)<h.Ho||(0,h.Wn)(M-U)<h.Ho?(M+U)/2:(0,h.fv)(X,J),oe=x(ae,ie),fe=oe[0],ge=oe[1],ve=fe-f,xe=ge-S,_e=te*ve-H*xe;(_e*_e/$>y||(0,h.Wn)((H*ve+te*xe)/$-.5)>.3||E*R+O*j+P*Z<l)&&(k(f,S,M,E,O,P,fe,ge,ae,J/=ee,X/=ee,K,F,V),V.point(fe,ge),k(fe,ge,ae,J,X,K,I,z,U,R,j,Z,F,V))}}return function(f){var S,M,E,O,P,I,z,U,R,j,Z,F,V={point:H,lineStart:te,lineEnd:J,polygonStart:function(){f.polygonStart(),V.lineStart=X},polygonEnd:function(){f.polygonEnd(),V.lineStart=te}};function H(ie,ae){ie=x(ie,ae),f.point(ie[0],ie[1])}function te(){U=NaN,V.point=$,f.lineStart()}function $(ie,ae){var oe=(0,n.Og)([ie,ae]),fe=x(ie,ae);k(U,R,z,j,Z,F,U=fe[0],R=fe[1],z=ie,j=oe[0],Z=oe[1],F=oe[2],r,f),f.point(U,R)}function J(){V.point=H,f.lineEnd()}function X(){te(),V.point=K,V.lineEnd=ee}function K(ie,ae){$(S=ie,ae),M=U,E=R,O=j,P=Z,I=F,V.point=$}function ee(){k(U,R,z,j,Z,F,M,E,S,O,P,I,r,f),V.lineEnd=J,J()}return V}}(d,m):function(x){return(0,t.l)({point:function(y,k){y=x(y,k),this.stream.point(y[0],y[1])}})}(d)}var u=(0,t.l)({point:function(d,m){this.stream.point(d*h.uR,m*h.uR)}});function p(d,m,x,y,k){function f(S,M){return[m+d*(S*=y),x-d*(M*=k)]}return f.invert=function(S,M){return[(S-m)/d*y,(x-M)/d*k]},f}function c(d,m,x,y,k,f){var S=(0,h.mC)(f),M=(0,h.O$)(f),E=S*d,O=M*d,P=S/d,I=M/d,z=(M*x-S*m)/d,U=(M*m+S*x)/d;function R(j,Z){return[E*(j*=y)-O*(Z*=k)+m,x-O*j-E*Z]}return R.invert=function(j,Z){return[y*(P*j-I*Z+z),k*(U-I*j-P*Z)]},R}function b(d){return g(function(){return d})()}function g(d){var m,x,y,k,f,S,M,E,O,P,I=150,z=480,U=250,R=0,j=0,Z=0,F=0,V=0,H=0,te=1,$=1,J=null,X=T.Z,K=null,ee=v.Z,ie=.5;function ae(ve){return E(ve[0]*h.uR,ve[1]*h.uR)}function oe(ve){return(ve=E.invert(ve[0],ve[1]))&&[ve[0]*h.RW,ve[1]*h.RW]}function fe(){var ve=c(I,0,0,te,$,H).apply(null,m(R,j)),xe=(H?c:p)(I,z-ve[0],U-ve[1],te,$,H);return x=(0,s.I)(Z,F,V),M=(0,_.Z)(m,xe),E=(0,_.Z)(x,M),S=o(M,ie),ge()}function ge(){return O=P=null,ae}return ae.stream=function(ve){return O&&P===ve?O:O=u(function(xe){return(0,t.l)({point:function(_e,ye){var Ce=xe(_e,ye);return this.stream.point(Ce[0],Ce[1])}})}(x)(X(S(ee(P=ve)))))},ae.preclip=function(ve){return arguments.length?(X=ve,J=void 0,ge()):X},ae.postclip=function(ve){return arguments.length?(ee=ve,K=y=k=f=null,ge()):ee},ae.clipAngle=function(ve){return arguments.length?(X=+ve?(0,w.Z)(J=ve*h.uR):(J=null,T.Z),ge()):J*h.RW},ae.clipExtent=function(ve){return arguments.length?(ee=ve==null?(K=y=k=f=null,v.Z):(0,i.Z)(K=+ve[0][0],y=+ve[0][1],k=+ve[1][0],f=+ve[1][1]),ge()):K==null?null:[[K,y],[k,f]]},ae.scale=function(ve){return arguments.length?(I=+ve,fe()):I},ae.translate=function(ve){return arguments.length?(z=+ve[0],U=+ve[1],fe()):[z,U]},ae.center=function(ve){return arguments.length?(R=ve[0]%360*h.uR,j=ve[1]%360*h.uR,fe()):[R*h.RW,j*h.RW]},ae.rotate=function(ve){return arguments.length?(Z=ve[0]%360*h.uR,F=ve[1]%360*h.uR,V=ve.length>2?ve[2]%360*h.uR:0,fe()):[Z*h.RW,F*h.RW,V*h.RW]},ae.angle=function(ve){return arguments.length?(H=ve%360*h.uR,fe()):H*h.RW},ae.reflectX=function(ve){return arguments.length?(te=ve?-1:1,fe()):te<0},ae.reflectY=function(ve){return arguments.length?($=ve?-1:1,fe()):$<0},ae.precision=function(ve){return arguments.length?(S=o(M,ie=ve*ve),ge()):(0,h._b)(ie)},ae.fitExtent=function(ve,xe){return(0,a.qg)(ae,ve,xe)},ae.fitSize=function(ve,xe){return(0,a.mF)(ae,ve,xe)},ae.fitWidth=function(ve,xe){return(0,a.V6)(ae,ve,xe)},ae.fitHeight=function(ve,xe){return(0,a.rf)(ae,ve,xe)},function(){return m=d.apply(this,arguments),ae.invert=m.invert&&oe,fe()}}},26867:function(N,L,e){e.d(L,{K:function(){return i},Z:function(){return _}});var T=e(15002),w=e(39695);function i(v,h){var s=h*h,t=s*s;return[v*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),h*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function _(){return(0,T.Z)(i).scale(175.295)}i.invert=function(v,h){var s,t=h,a=25;do{var n=t*t,r=n*n;t-=s=(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))-h)/(1.007226+n*(.045255+r*(.259866*n-.311325-.06507600000000001*r)))}while((0,w.Wn)(s)>w.Ho&&--a>0);return[v/(.8707+(n=t*t)*(n*(n*n*n*(.003971-.001529*n)-.013791)-.131979)),t]}},57962:function(N,L,e){e.d(L,{I:function(){return _},Z:function(){return v}});var T=e(39695),w=e(25382),i=e(15002);function _(h,s){return[(0,T.mC)(s)*(0,T.O$)(h),(0,T.O$)(s)]}function v(){return(0,i.Z)(_).scale(249.5).clipAngle(90+T.Ho)}_.invert=(0,w.O)(T.ZR)},49386:function(N,L,e){e.d(L,{I:function(){return _},Z:function(){return t}});var T=e(96059),w=e(39695);function i(a,n){return[(0,w.Wn)(a)>w.pi?a+Math.round(-a/w.BZ)*w.BZ:a,n]}function _(a,n,r){return(a%=w.BZ)?n||r?(0,T.Z)(h(a),s(n,r)):h(a):n||r?s(n,r):i}function v(a){return function(n,r){return[(n+=a)>w.pi?n-w.BZ:n<-w.pi?n+w.BZ:n,r]}}function h(a){var n=v(a);return n.invert=v(-a),n}function s(a,n){var r=(0,w.mC)(a),l=(0,w.O$)(a),o=(0,w.mC)(n),u=(0,w.O$)(n);function p(c,b){var g=(0,w.mC)(b),d=(0,w.mC)(c)*g,m=(0,w.O$)(c)*g,x=(0,w.O$)(b),y=x*r+d*l;return[(0,w.fv)(m*o-y*u,d*r-x*l),(0,w.ZR)(y*o+m*u)]}return p.invert=function(c,b){var g=(0,w.mC)(b),d=(0,w.mC)(c)*g,m=(0,w.O$)(c)*g,x=(0,w.O$)(b),y=x*o-m*u;return[(0,w.fv)(m*o+x*u,d*r+y*l),(0,w.ZR)(y*r-d*l)]},p}function t(a){function n(r){return(r=a(r[0]*w.uR,r[1]*w.uR))[0]*=w.RW,r[1]*=w.RW,r}return a=_(a[0]*w.uR,a[1]*w.uR,a.length>2?a[2]*w.uR:0),n.invert=function(r){return(r=a.invert(r[0]*w.uR,r[1]*w.uR))[0]*=w.RW,r[1]*=w.RW,r},n}i.invert=i},72736:function(N,L,e){function T(s,t){s&&i.hasOwnProperty(s.type)&&i[s.type](s,t)}e.d(L,{Z:function(){return h}});var w={Feature:function(s,t){T(s.geometry,t)},FeatureCollection:function(s,t){for(var a=s.features,n=-1,r=a.length;++n<r;)T(a[n].geometry,t)}},i={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var a=s.coordinates,n=-1,r=a.length;++n<r;)s=a[n],t.point(s[0],s[1],s[2])},LineString:function(s,t){_(s.coordinates,t,0)},MultiLineString:function(s,t){for(var a=s.coordinates,n=-1,r=a.length;++n<r;)_(a[n],t,0)},Polygon:function(s,t){v(s.coordinates,t)},MultiPolygon:function(s,t){for(var a=s.coordinates,n=-1,r=a.length;++n<r;)v(a[n],t)},GeometryCollection:function(s,t){for(var a=s.geometries,n=-1,r=a.length;++n<r;)T(a[n],t)}};function _(s,t,a){var n,r=-1,l=s.length-a;for(t.lineStart();++r<l;)n=s[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function v(s,t){var a=-1,n=s.length;for(t.polygonStart();++a<n;)_(s[a],t,1);t.polygonEnd()}function h(s,t){s&&w.hasOwnProperty(s.type)?w[s.type](s,t):T(s,t)}},64684:function(N,L,e){function T(_){return{stream:w(_)}}function w(_){return function(v){var h=new i;for(var s in _)h[s]=_[s];return h.stream=v,h}}function i(){}e.d(L,{Z:function(){return T},l:function(){return w}}),i.prototype={constructor:i,point:function(_,v){this.stream.point(_,v)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(N,L,e){function T(ue,de){return ue.parent===de.parent?1:2}function w(ue,de){return ue+de.x}function i(ue,de){return Math.max(ue,de.y)}function _(){var ue=T,de=1,Le=1,we=!1;function Ee(Oe){var Fe,pe=0;Oe.eachAfter(function(Be){var Ye=Be.children;Ye?(Be.x=function(We){return We.reduce(w,0)/We.length}(Ye),Be.y=function(We){return 1+We.reduce(i,0)}(Ye)):(Be.x=Fe?pe+=ue(Be,Fe):0,Be.y=0,Fe=Be)});var be=function(Be){for(var Ye;Ye=Be.children;)Be=Ye[0];return Be}(Oe),Me=function(Be){for(var Ye;Ye=Be.children;)Be=Ye[Ye.length-1];return Be}(Oe),De=be.x-ue(be,Me)/2,Ne=Me.x+ue(Me,be)/2;return Oe.eachAfter(we?function(Be){Be.x=(Be.x-Oe.x)*de,Be.y=(Oe.y-Be.y)*Le}:function(Be){Be.x=(Be.x-De)/(Ne-De)*de,Be.y=(1-(Oe.y?Be.y/Oe.y:1))*Le})}return Ee.separation=function(Oe){return arguments.length?(ue=Oe,Ee):ue},Ee.size=function(Oe){return arguments.length?(we=!1,de=+Oe[0],Le=+Oe[1],Ee):we?null:[de,Le]},Ee.nodeSize=function(Oe){return arguments.length?(we=!0,de=+Oe[0],Le=+Oe[1],Ee):we?[de,Le]:null},Ee}function v(ue){var de=0,Le=ue.children,we=Le&&Le.length;if(we)for(;--we>=0;)de+=Le[we].value;else de=1;ue.value=de}function h(ue,de){var Le,we,Ee,Oe,Fe,pe=new n(ue),be=+ue.value&&(pe.value=ue.value),Me=[pe];for(de==null&&(de=s);Le=Me.pop();)if(be&&(Le.value=+Le.data.value),(Ee=de(Le.data))&&(Fe=Ee.length))for(Le.children=new Array(Fe),Oe=Fe-1;Oe>=0;--Oe)Me.push(we=Le.children[Oe]=new n(Ee[Oe])),we.parent=Le,we.depth=Le.depth+1;return pe.eachBefore(a)}function s(ue){return ue.children}function t(ue){ue.data=ue.data.data}function a(ue){var de=0;do ue.height=de;while((ue=ue.parent)&&ue.height<++de)}function n(ue){this.data=ue,this.depth=this.height=0,this.parent=null}e.r(L),e.d(L,{cluster:function(){return _},hierarchy:function(){return h},pack:function(){return I},packEnclose:function(){return l},packSiblings:function(){return S},partition:function(){return F},stratify:function(){return X},tree:function(){return ge},treemap:function(){return Ce},treemapBinary:function(){return ke},treemapDice:function(){return Z},treemapResquarify:function(){return le},treemapSlice:function(){return ve},treemapSliceDice:function(){return Te},treemapSquarify:function(){return ye}}),n.prototype=h.prototype={constructor:n,count:function(){return this.eachAfter(v)},each:function(ue){var de,Le,we,Ee,Oe=this,Fe=[Oe];do for(de=Fe.reverse(),Fe=[];Oe=de.pop();)if(ue(Oe),Le=Oe.children)for(we=0,Ee=Le.length;we<Ee;++we)Fe.push(Le[we]);while(Fe.length);return this},eachAfter:function(ue){for(var de,Le,we,Ee=this,Oe=[Ee],Fe=[];Ee=Oe.pop();)if(Fe.push(Ee),de=Ee.children)for(Le=0,we=de.length;Le<we;++Le)Oe.push(de[Le]);for(;Ee=Fe.pop();)ue(Ee);return this},eachBefore:function(ue){for(var de,Le,we=this,Ee=[we];we=Ee.pop();)if(ue(we),de=we.children)for(Le=de.length-1;Le>=0;--Le)Ee.push(de[Le]);return this},sum:function(ue){return this.eachAfter(function(de){for(var Le=+ue(de.data)||0,we=de.children,Ee=we&&we.length;--Ee>=0;)Le+=we[Ee].value;de.value=Le})},sort:function(ue){return this.eachBefore(function(de){de.children&&de.children.sort(ue)})},path:function(ue){for(var de=this,Le=function(Oe,Fe){if(Oe===Fe)return Oe;var pe=Oe.ancestors(),be=Fe.ancestors(),Me=null;for(Oe=pe.pop(),Fe=be.pop();Oe===Fe;)Me=Oe,Oe=pe.pop(),Fe=be.pop();return Me}(de,ue),we=[de];de!==Le;)de=de.parent,we.push(de);for(var Ee=we.length;ue!==Le;)we.splice(Ee,0,ue),ue=ue.parent;return we},ancestors:function(){for(var ue=this,de=[ue];ue=ue.parent;)de.push(ue);return de},descendants:function(){var ue=[];return this.each(function(de){ue.push(de)}),ue},leaves:function(){var ue=[];return this.eachBefore(function(de){de.children||ue.push(de)}),ue},links:function(){var ue=this,de=[];return ue.each(function(Le){Le!==ue&&de.push({source:Le.parent,target:Le})}),de},copy:function(){return h(this).eachBefore(t)}};var r=Array.prototype.slice;function l(ue){for(var de,Le,we=0,Ee=(ue=function(Fe){for(var pe,be,Me=Fe.length;Me;)be=Math.random()*Me--|0,pe=Fe[Me],Fe[Me]=Fe[be],Fe[be]=pe;return Fe}(r.call(ue))).length,Oe=[];we<Ee;)de=ue[we],Le&&p(Le,de)?++we:(Le=b(Oe=o(Oe,de)),we=0);return Le}function o(ue,de){var Le,we;if(c(de,ue))return[de];for(Le=0;Le<ue.length;++Le)if(u(de,ue[Le])&&c(g(ue[Le],de),ue))return[ue[Le],de];for(Le=0;Le<ue.length-1;++Le)for(we=Le+1;we<ue.length;++we)if(u(g(ue[Le],ue[we]),de)&&u(g(ue[Le],de),ue[we])&&u(g(ue[we],de),ue[Le])&&c(d(ue[Le],ue[we],de),ue))return[ue[Le],ue[we],de];throw new Error}function u(ue,de){var Le=ue.r-de.r,we=de.x-ue.x,Ee=de.y-ue.y;return Le<0||Le*Le<we*we+Ee*Ee}function p(ue,de){var Le=ue.r-de.r+1e-6,we=de.x-ue.x,Ee=de.y-ue.y;return Le>0&&Le*Le>we*we+Ee*Ee}function c(ue,de){for(var Le=0;Le<de.length;++Le)if(!p(ue,de[Le]))return!1;return!0}function b(ue){switch(ue.length){case 1:return{x:(de=ue[0]).x,y:de.y,r:de.r};case 2:return g(ue[0],ue[1]);case 3:return d(ue[0],ue[1],ue[2])}var de}function g(ue,de){var Le=ue.x,we=ue.y,Ee=ue.r,Oe=de.x,Fe=de.y,pe=de.r,be=Oe-Le,Me=Fe-we,De=pe-Ee,Ne=Math.sqrt(be*be+Me*Me);return{x:(Le+Oe+be/Ne*De)/2,y:(we+Fe+Me/Ne*De)/2,r:(Ne+Ee+pe)/2}}function d(ue,de,Le){var we=ue.x,Ee=ue.y,Oe=ue.r,Fe=de.x,pe=de.y,be=de.r,Me=Le.x,De=Le.y,Ne=Le.r,Be=we-Fe,Ye=we-Me,We=Ee-pe,et=Ee-De,ft=be-Oe,ht=Ne-Oe,mt=we*we+Ee*Ee-Oe*Oe,Mt=mt-Fe*Fe-pe*pe+be*be,_t=mt-Me*Me-De*De+Ne*Ne,it=Ye*We-Be*et,st=(We*_t-et*Mt)/(2*it)-we,St=(et*ft-We*ht)/it,zt=(Ye*Mt-Be*_t)/(2*it)-Ee,Ft=(Be*ht-Ye*ft)/it,Pt=St*St+Ft*Ft-1,Xe=2*(Oe+st*St+zt*Ft),Ke=st*st+zt*zt-Oe*Oe,He=-(Pt?(Xe+Math.sqrt(Xe*Xe-4*Pt*Ke))/(2*Pt):Ke/Xe);return{x:we+st+St*He,y:Ee+zt+Ft*He,r:He}}function m(ue,de,Le){var we,Ee,Oe,Fe,pe=ue.x-de.x,be=ue.y-de.y,Me=pe*pe+be*be;Me?(Ee=de.r+Le.r,Ee*=Ee,Fe=ue.r+Le.r,Ee>(Fe*=Fe)?(we=(Me+Fe-Ee)/(2*Me),Oe=Math.sqrt(Math.max(0,Fe/Me-we*we)),Le.x=ue.x-we*pe-Oe*be,Le.y=ue.y-we*be+Oe*pe):(we=(Me+Ee-Fe)/(2*Me),Oe=Math.sqrt(Math.max(0,Ee/Me-we*we)),Le.x=de.x+we*pe-Oe*be,Le.y=de.y+we*be+Oe*pe)):(Le.x=de.x+Le.r,Le.y=de.y)}function x(ue,de){var Le=ue.r+de.r-1e-6,we=de.x-ue.x,Ee=de.y-ue.y;return Le>0&&Le*Le>we*we+Ee*Ee}function y(ue){var de=ue._,Le=ue.next._,we=de.r+Le.r,Ee=(de.x*Le.r+Le.x*de.r)/we,Oe=(de.y*Le.r+Le.y*de.r)/we;return Ee*Ee+Oe*Oe}function k(ue){this._=ue,this.next=null,this.previous=null}function f(ue){if(!(Ee=ue.length))return 0;var de,Le,we,Ee,Oe,Fe,pe,be,Me,De,Ne;if((de=ue[0]).x=0,de.y=0,!(Ee>1))return de.r;if(Le=ue[1],de.x=-Le.r,Le.x=de.r,Le.y=0,!(Ee>2))return de.r+Le.r;m(Le,de,we=ue[2]),de=new k(de),Le=new k(Le),we=new k(we),de.next=we.previous=Le,Le.next=de.previous=we,we.next=Le.previous=de;e:for(pe=3;pe<Ee;++pe){m(de._,Le._,we=ue[pe]),we=new k(we),be=Le.next,Me=de.previous,De=Le._.r,Ne=de._.r;do if(De<=Ne){if(x(be._,we._)){Le=be,de.next=Le,Le.previous=de,--pe;continue e}De+=be._.r,be=be.next}else{if(x(Me._,we._)){(de=Me).next=Le,Le.previous=de,--pe;continue e}Ne+=Me._.r,Me=Me.previous}while(be!==Me.next);for(we.previous=de,we.next=Le,de.next=Le.previous=Le=we,Oe=y(de);(we=we.next)!==Le;)(Fe=y(we))<Oe&&(de=we,Oe=Fe);Le=de.next}for(de=[Le._],we=Le;(we=we.next)!==Le;)de.push(we._);for(we=l(de),pe=0;pe<Ee;++pe)(de=ue[pe]).x-=we.x,de.y-=we.y;return we.r}function S(ue){return f(ue),ue}function M(ue){if(typeof ue!="function")throw new Error;return ue}function E(){return 0}function O(ue){return function(){return ue}}function P(ue){return Math.sqrt(ue.value)}function I(){var ue=null,de=1,Le=1,we=E;function Ee(Oe){return Oe.x=de/2,Oe.y=Le/2,ue?Oe.eachBefore(z(ue)).eachAfter(U(we,.5)).eachBefore(R(1)):Oe.eachBefore(z(P)).eachAfter(U(E,1)).eachAfter(U(we,Oe.r/Math.min(de,Le))).eachBefore(R(Math.min(de,Le)/(2*Oe.r))),Oe}return Ee.radius=function(Oe){return arguments.length?(ue=(Fe=Oe)==null?null:M(Fe),Ee):ue;var Fe},Ee.size=function(Oe){return arguments.length?(de=+Oe[0],Le=+Oe[1],Ee):[de,Le]},Ee.padding=function(Oe){return arguments.length?(we=typeof Oe=="function"?Oe:O(+Oe),Ee):we},Ee}function z(ue){return function(de){de.children||(de.r=Math.max(0,+ue(de)||0))}}function U(ue,de){return function(Le){if(we=Le.children){var we,Ee,Oe,Fe=we.length,pe=ue(Le)*de||0;if(pe)for(Ee=0;Ee<Fe;++Ee)we[Ee].r+=pe;if(Oe=f(we),pe)for(Ee=0;Ee<Fe;++Ee)we[Ee].r-=pe;Le.r=Oe+pe}}}function R(ue){return function(de){var Le=de.parent;de.r*=ue,Le&&(de.x=Le.x+ue*de.x,de.y=Le.y+ue*de.y)}}function j(ue){ue.x0=Math.round(ue.x0),ue.y0=Math.round(ue.y0),ue.x1=Math.round(ue.x1),ue.y1=Math.round(ue.y1)}function Z(ue,de,Le,we,Ee){for(var Oe,Fe=ue.children,pe=-1,be=Fe.length,Me=ue.value&&(we-de)/ue.value;++pe<be;)(Oe=Fe[pe]).y0=Le,Oe.y1=Ee,Oe.x0=de,Oe.x1=de+=Oe.value*Me}function F(){var ue=1,de=1,Le=0,we=!1;function Ee(Oe){var Fe=Oe.height+1;return Oe.x0=Oe.y0=Le,Oe.x1=ue,Oe.y1=de/Fe,Oe.eachBefore(function(pe,be){return function(Me){Me.children&&Z(Me,Me.x0,pe*(Me.depth+1)/be,Me.x1,pe*(Me.depth+2)/be);var De=Me.x0,Ne=Me.y0,Be=Me.x1-Le,Ye=Me.y1-Le;Be<De&&(De=Be=(De+Be)/2),Ye<Ne&&(Ne=Ye=(Ne+Ye)/2),Me.x0=De,Me.y0=Ne,Me.x1=Be,Me.y1=Ye}}(de,Fe)),we&&Oe.eachBefore(j),Oe}return Ee.round=function(Oe){return arguments.length?(we=!!Oe,Ee):we},Ee.size=function(Oe){return arguments.length?(ue=+Oe[0],de=+Oe[1],Ee):[ue,de]},Ee.padding=function(Oe){return arguments.length?(Le=+Oe,Ee):Le},Ee}var V="$",H={depth:-1},te={};function $(ue){return ue.id}function J(ue){return ue.parentId}function X(){var ue=$,de=J;function Le(we){var Ee,Oe,Fe,pe,be,Me,De,Ne=we.length,Be=new Array(Ne),Ye={};for(Oe=0;Oe<Ne;++Oe)Ee=we[Oe],be=Be[Oe]=new n(Ee),(Me=ue(Ee,Oe,we))!=null&&(Me+="")&&(Ye[De=V+(be.id=Me)]=De in Ye?te:be);for(Oe=0;Oe<Ne;++Oe)if(be=Be[Oe],(Me=de(we[Oe],Oe,we))!=null&&(Me+="")){if(!(pe=Ye[V+Me]))throw new Error("missing: "+Me);if(pe===te)throw new Error("ambiguous: "+Me);pe.children?pe.children.push(be):pe.children=[be],be.parent=pe}else{if(Fe)throw new Error("multiple roots");Fe=be}if(!Fe)throw new Error("no root");if(Fe.parent=H,Fe.eachBefore(function(We){We.depth=We.parent.depth+1,--Ne}).eachBefore(a),Fe.parent=null,Ne>0)throw new Error("cycle");return Fe}return Le.id=function(we){return arguments.length?(ue=M(we),Le):ue},Le.parentId=function(we){return arguments.length?(de=M(we),Le):de},Le}function K(ue,de){return ue.parent===de.parent?1:2}function ee(ue){var de=ue.children;return de?de[0]:ue.t}function ie(ue){var de=ue.children;return de?de[de.length-1]:ue.t}function ae(ue,de,Le){var we=Le/(de.i-ue.i);de.c-=we,de.s+=Le,ue.c+=we,de.z+=Le,de.m+=Le}function oe(ue,de,Le){return ue.a.parent===de.parent?ue.a:Le}function fe(ue,de){this._=ue,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=de}function ge(){var ue=K,de=1,Le=1,we=null;function Ee(be){var Me=function(ht){for(var mt,Mt,_t,it,st,St=new fe(ht,0),zt=[St];mt=zt.pop();)if(_t=mt._.children)for(mt.children=new Array(st=_t.length),it=st-1;it>=0;--it)zt.push(Mt=mt.children[it]=new fe(_t[it],it)),Mt.parent=mt;return(St.parent=new fe(null,0)).children=[St],St}(be);if(Me.eachAfter(Oe),Me.parent.m=-Me.z,Me.eachBefore(Fe),we)be.eachBefore(pe);else{var De=be,Ne=be,Be=be;be.eachBefore(function(ht){ht.x<De.x&&(De=ht),ht.x>Ne.x&&(Ne=ht),ht.depth>Be.depth&&(Be=ht)});var Ye=De===Ne?1:ue(De,Ne)/2,We=Ye-De.x,et=de/(Ne.x+Ye+We),ft=Le/(Be.depth||1);be.eachBefore(function(ht){ht.x=(ht.x+We)*et,ht.y=ht.depth*ft})}return be}function Oe(be){var Me=be.children,De=be.parent.children,Ne=be.i?De[be.i-1]:null;if(Me){(function(Ye){for(var We,et=0,ft=0,ht=Ye.children,mt=ht.length;--mt>=0;)(We=ht[mt]).z+=et,We.m+=et,et+=We.s+(ft+=We.c)})(be);var Be=(Me[0].z+Me[Me.length-1].z)/2;Ne?(be.z=Ne.z+ue(be._,Ne._),be.m=be.z-Be):be.z=Be}else Ne&&(be.z=Ne.z+ue(be._,Ne._));be.parent.A=function(Ye,We,et){if(We){for(var ft,ht=Ye,mt=Ye,Mt=We,_t=ht.parent.children[0],it=ht.m,st=mt.m,St=Mt.m,zt=_t.m;Mt=ie(Mt),ht=ee(ht),Mt&&ht;)_t=ee(_t),(mt=ie(mt)).a=Ye,(ft=Mt.z+St-ht.z-it+ue(Mt._,ht._))>0&&(ae(oe(Mt,Ye,et),Ye,ft),it+=ft,st+=ft),St+=Mt.m,it+=ht.m,zt+=_t.m,st+=mt.m;Mt&&!ie(mt)&&(mt.t=Mt,mt.m+=St-st),ht&&!ee(_t)&&(_t.t=ht,_t.m+=it-zt,et=Ye)}return et}(be,Ne,be.parent.A||De[0])}function Fe(be){be._.x=be.z+be.parent.m,be.m+=be.parent.m}function pe(be){be.x*=de,be.y=be.depth*Le}return Ee.separation=function(be){return arguments.length?(ue=be,Ee):ue},Ee.size=function(be){return arguments.length?(we=!1,de=+be[0],Le=+be[1],Ee):we?null:[de,Le]},Ee.nodeSize=function(be){return arguments.length?(we=!0,de=+be[0],Le=+be[1],Ee):we?[de,Le]:null},Ee}function ve(ue,de,Le,we,Ee){for(var Oe,Fe=ue.children,pe=-1,be=Fe.length,Me=ue.value&&(Ee-Le)/ue.value;++pe<be;)(Oe=Fe[pe]).x0=de,Oe.x1=we,Oe.y0=Le,Oe.y1=Le+=Oe.value*Me}fe.prototype=Object.create(n.prototype);var xe=(1+Math.sqrt(5))/2;function _e(ue,de,Le,we,Ee,Oe){for(var Fe,pe,be,Me,De,Ne,Be,Ye,We,et,ft,ht=[],mt=de.children,Mt=0,_t=0,it=mt.length,st=de.value;Mt<it;){be=Ee-Le,Me=Oe-we;do De=mt[_t++].value;while(!De&&_t<it);for(Ne=Be=De,ft=De*De*(et=Math.max(Me/be,be/Me)/(st*ue)),We=Math.max(Be/ft,ft/Ne);_t<it;++_t){if(De+=pe=mt[_t].value,pe<Ne&&(Ne=pe),pe>Be&&(Be=pe),ft=De*De*et,(Ye=Math.max(Be/ft,ft/Ne))>We){De-=pe;break}We=Ye}ht.push(Fe={value:De,dice:be<Me,children:mt.slice(Mt,_t)}),Fe.dice?Z(Fe,Le,we,Ee,st?we+=Me*De/st:Oe):ve(Fe,Le,we,st?Le+=be*De/st:Ee,Oe),st-=De,Mt=_t}return ht}var ye=function ue(de){function Le(we,Ee,Oe,Fe,pe){_e(de,we,Ee,Oe,Fe,pe)}return Le.ratio=function(we){return ue((we=+we)>1?we:1)},Le}(xe);function Ce(){var ue=ye,de=!1,Le=1,we=1,Ee=[0],Oe=E,Fe=E,pe=E,be=E,Me=E;function De(Be){return Be.x0=Be.y0=0,Be.x1=Le,Be.y1=we,Be.eachBefore(Ne),Ee=[0],de&&Be.eachBefore(j),Be}function Ne(Be){var Ye=Ee[Be.depth],We=Be.x0+Ye,et=Be.y0+Ye,ft=Be.x1-Ye,ht=Be.y1-Ye;ft<We&&(We=ft=(We+ft)/2),ht<et&&(et=ht=(et+ht)/2),Be.x0=We,Be.y0=et,Be.x1=ft,Be.y1=ht,Be.children&&(Ye=Ee[Be.depth+1]=Oe(Be)/2,We+=Me(Be)-Ye,et+=Fe(Be)-Ye,(ft-=pe(Be)-Ye)<We&&(We=ft=(We+ft)/2),(ht-=be(Be)-Ye)<et&&(et=ht=(et+ht)/2),ue(Be,We,et,ft,ht))}return De.round=function(Be){return arguments.length?(de=!!Be,De):de},De.size=function(Be){return arguments.length?(Le=+Be[0],we=+Be[1],De):[Le,we]},De.tile=function(Be){return arguments.length?(ue=M(Be),De):ue},De.padding=function(Be){return arguments.length?De.paddingInner(Be).paddingOuter(Be):De.paddingInner()},De.paddingInner=function(Be){return arguments.length?(Oe=typeof Be=="function"?Be:O(+Be),De):Oe},De.paddingOuter=function(Be){return arguments.length?De.paddingTop(Be).paddingRight(Be).paddingBottom(Be).paddingLeft(Be):De.paddingTop()},De.paddingTop=function(Be){return arguments.length?(Fe=typeof Be=="function"?Be:O(+Be),De):Fe},De.paddingRight=function(Be){return arguments.length?(pe=typeof Be=="function"?Be:O(+Be),De):pe},De.paddingBottom=function(Be){return arguments.length?(be=typeof Be=="function"?Be:O(+Be),De):be},De.paddingLeft=function(Be){return arguments.length?(Me=typeof Be=="function"?Be:O(+Be),De):Me},De}function ke(ue,de,Le,we,Ee){var Oe,Fe,pe=ue.children,be=pe.length,Me=new Array(be+1);for(Me[0]=Fe=Oe=0;Oe<be;++Oe)Me[Oe+1]=Fe+=pe[Oe].value;(function De(Ne,Be,Ye,We,et,ft,ht){if(Ne>=Be-1){var mt=pe[Ne];return mt.x0=We,mt.y0=et,mt.x1=ft,void(mt.y1=ht)}for(var Mt=Me[Ne],_t=Ye/2+Mt,it=Ne+1,st=Be-1;it<st;){var St=it+st>>>1;Me[St]<_t?it=St+1:st=St}_t-Me[it-1]<Me[it]-_t&&Ne+1<it&&--it;var zt=Me[it]-Mt,Ft=Ye-zt;if(ft-We>ht-et){var Pt=(We*Ft+ft*zt)/Ye;De(Ne,it,zt,We,et,Pt,ht),De(it,Be,Ft,Pt,et,ft,ht)}else{var Xe=(et*Ft+ht*zt)/Ye;De(Ne,it,zt,We,et,ft,Xe),De(it,Be,Ft,We,Xe,ft,ht)}})(0,be,ue.value,de,Le,we,Ee)}function Te(ue,de,Le,we,Ee){(1&ue.depth?ve:Z)(ue,de,Le,we,Ee)}var le=function ue(de){function Le(we,Ee,Oe,Fe,pe){if((be=we._squarify)&&be.ratio===de)for(var be,Me,De,Ne,Be,Ye=-1,We=be.length,et=we.value;++Ye<We;){for(De=(Me=be[Ye]).children,Ne=Me.value=0,Be=De.length;Ne<Be;++Ne)Me.value+=De[Ne].value;Me.dice?Z(Me,Ee,Oe,Fe,Oe+=(pe-Oe)*Me.value/et):ve(Me,Ee,Oe,Ee+=(Fe-Ee)*Me.value/et,pe),et-=Me.value}else we._squarify=be=_e(de,we,Ee,Oe,Fe,pe),be.ratio=de}return Le.ratio=function(we){return ue((we=+we)>1?we:1)},Le}(xe)},45879:function(N,L,e){e.d(L,{h5:function(){return p}});var T=Math.PI,w=2*T,i=1e-6,_=w-i;function v(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function h(){return new v}v.prototype=h.prototype={constructor:v,moveTo:function(c,b){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+b)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,b){this._+="L"+(this._x1=+c)+","+(this._y1=+b)},quadraticCurveTo:function(c,b,g,d){this._+="Q"+ +c+","+ +b+","+(this._x1=+g)+","+(this._y1=+d)},bezierCurveTo:function(c,b,g,d,m,x){this._+="C"+ +c+","+ +b+","+ +g+","+ +d+","+(this._x1=+m)+","+(this._y1=+x)},arcTo:function(c,b,g,d,m){c=+c,b=+b,g=+g,d=+d,m=+m;var x=this._x1,y=this._y1,k=g-c,f=d-b,S=x-c,M=y-b,E=S*S+M*M;if(m<0)throw new Error("negative radius: "+m);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=b);else if(E>i)if(Math.abs(M*k-f*S)>i&&m){var O=g-x,P=d-y,I=k*k+f*f,z=O*O+P*P,U=Math.sqrt(I),R=Math.sqrt(E),j=m*Math.tan((T-Math.acos((I+E-z)/(2*U*R)))/2),Z=j/R,F=j/U;Math.abs(Z-1)>i&&(this._+="L"+(c+Z*S)+","+(b+Z*M)),this._+="A"+m+","+m+",0,0,"+ +(M*O>S*P)+","+(this._x1=c+F*k)+","+(this._y1=b+F*f)}else this._+="L"+(this._x1=c)+","+(this._y1=b)},arc:function(c,b,g,d,m,x){c=+c,b=+b,x=!!x;var y=(g=+g)*Math.cos(d),k=g*Math.sin(d),f=c+y,S=b+k,M=1^x,E=x?d-m:m-d;if(g<0)throw new Error("negative radius: "+g);this._x1===null?this._+="M"+f+","+S:(Math.abs(this._x1-f)>i||Math.abs(this._y1-S)>i)&&(this._+="L"+f+","+S),g&&(E<0&&(E=E%w+w),E>_?this._+="A"+g+","+g+",0,1,"+M+","+(c-y)+","+(b-k)+"A"+g+","+g+",0,1,"+M+","+(this._x1=f)+","+(this._y1=S):E>i&&(this._+="A"+g+","+g+",0,"+ +(E>=T)+","+M+","+(this._x1=c+g*Math.cos(m))+","+(this._y1=b+g*Math.sin(m))))},rect:function(c,b,g,d){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+b)+"h"+ +g+"v"+ +d+"h"+-g+"Z"},toString:function(){return this._}};var s=h,t=Array.prototype.slice;function a(c){return function(){return c}}function n(c){return c[0]}function r(c){return c[1]}function l(c){return c.source}function o(c){return c.target}function u(c,b,g,d,m){c.moveTo(b,g),c.bezierCurveTo(b=(b+d)/2,g,b,m,d,m)}function p(){return function(c){var b=l,g=o,d=n,m=r,x=null;function y(){var k,f=t.call(arguments),S=b.apply(this,f),M=g.apply(this,f);if(x||(x=k=s()),c(x,+d.apply(this,(f[0]=S,f)),+m.apply(this,f),+d.apply(this,(f[0]=M,f)),+m.apply(this,f)),k)return x=null,k+""||null}return y.source=function(k){return arguments.length?(b=k,y):b},y.target=function(k){return arguments.length?(g=k,y):g},y.x=function(k){return arguments.length?(d=typeof k=="function"?k:a(+k),y):d},y.y=function(k){return arguments.length?(m=typeof k=="function"?k:a(+k),y):m},y.context=function(k){return arguments.length?(x=k??null,y):x},y}(u)}},84096:function(N,L,e){e.d(L,{i$:function(){return l},Dq:function(){return n},g0:function(){return o}});var T=e(58176),w=e(48480),i=e(59879),_=e(82301),v=e(34823),h=e(79791);function s(it){if(0<=it.y&&it.y<100){var st=new Date(-1,it.m,it.d,it.H,it.M,it.S,it.L);return st.setFullYear(it.y),st}return new Date(it.y,it.m,it.d,it.H,it.M,it.S,it.L)}function t(it){if(0<=it.y&&it.y<100){var st=new Date(Date.UTC(-1,it.m,it.d,it.H,it.M,it.S,it.L));return st.setUTCFullYear(it.y),st}return new Date(Date.UTC(it.y,it.m,it.d,it.H,it.M,it.S,it.L))}function a(it,st,St){return{y:it,m:st,d:St,H:0,M:0,S:0,L:0}}function n(it){var st=it.dateTime,St=it.date,zt=it.time,Ft=it.periods,Pt=it.days,Xe=it.shortDays,Ke=it.months,He=it.shortMonths,Je=m(Ft),lt=x(Ft),ot=m(Pt),je=x(Pt),Ue=m(Xe),at=x(Xe),$e=m(Ke),gt=x(Ke),yt=m(He),xt=x(He),dt={a:function(Bt){return Xe[Bt.getDay()]},A:function(Bt){return Pt[Bt.getDay()]},b:function(Bt){return He[Bt.getMonth()]},B:function(Bt){return Ke[Bt.getMonth()]},c:null,d:X,e:X,f:oe,H:K,I:ee,j:ie,L:ae,m:fe,M:ge,p:function(Bt){return Ft[+(Bt.getHours()>=12)]},q:function(Bt){return 1+~~(Bt.getMonth()/3)},Q:Mt,s:_t,S:ve,u:xe,U:_e,V:ye,w:Ce,W:ke,x:null,X:null,y:Te,Y:le,Z:ue,"%":mt},Lt={a:function(Bt){return Xe[Bt.getUTCDay()]},A:function(Bt){return Pt[Bt.getUTCDay()]},b:function(Bt){return He[Bt.getUTCMonth()]},B:function(Bt){return Ke[Bt.getUTCMonth()]},c:null,d:de,e:de,f:Fe,H:Le,I:we,j:Ee,L:Oe,m:pe,M:be,p:function(Bt){return Ft[+(Bt.getUTCHours()>=12)]},q:function(Bt){return 1+~~(Bt.getUTCMonth()/3)},Q:Mt,s:_t,S:Me,u:De,U:Ne,V:Be,w:Ye,W:We,x:null,X:null,y:et,Y:ft,Z:ht,"%":mt},Tt={a:function(Bt,Xt,an){var Wt=Ue.exec(Xt.slice(an));return Wt?(Bt.w=at[Wt[0].toLowerCase()],an+Wt[0].length):-1},A:function(Bt,Xt,an){var Wt=ot.exec(Xt.slice(an));return Wt?(Bt.w=je[Wt[0].toLowerCase()],an+Wt[0].length):-1},b:function(Bt,Xt,an){var Wt=yt.exec(Xt.slice(an));return Wt?(Bt.m=xt[Wt[0].toLowerCase()],an+Wt[0].length):-1},B:function(Bt,Xt,an){var Wt=$e.exec(Xt.slice(an));return Wt?(Bt.m=gt[Wt[0].toLowerCase()],an+Wt[0].length):-1},c:function(Bt,Xt,an){return Dt(Bt,st,Xt,an)},d:U,e:U,f:H,H:j,I:j,j:R,L:V,m:z,M:Z,p:function(Bt,Xt,an){var Wt=Je.exec(Xt.slice(an));return Wt?(Bt.p=lt[Wt[0].toLowerCase()],an+Wt[0].length):-1},q:I,Q:$,s:J,S:F,u:k,U:f,V:S,w:y,W:M,x:function(Bt,Xt,an){return Dt(Bt,St,Xt,an)},X:function(Bt,Xt,an){return Dt(Bt,zt,Xt,an)},y:O,Y:E,Z:P,"%":te};function bt(Bt,Xt){return function(an){var Wt,Vt,on,Sn=[],Ln=-1,fn=0,Zt=Bt.length;for(an instanceof Date||(an=new Date(+an));++Ln<Zt;)Bt.charCodeAt(Ln)===37&&(Sn.push(Bt.slice(fn,Ln)),(Vt=u[Wt=Bt.charAt(++Ln)])!=null?Wt=Bt.charAt(++Ln):Vt=Wt==="e"?" ":"0",(on=Xt[Wt])&&(Wt=on(an,Vt)),Sn.push(Wt),fn=Ln+1);return Sn.push(Bt.slice(fn,Ln)),Sn.join("")}}function Ct(Bt,Xt){return function(an){var Wt,Vt,on=a(1900,void 0,1);if(Dt(on,Bt,an+="",0)!=an.length)return null;if("Q"in on)return new Date(on.Q);if("s"in on)return new Date(1e3*on.s+("L"in on?on.L:0));if(Xt&&!("Z"in on)&&(on.Z=0),"p"in on&&(on.H=on.H%12+12*on.p),on.m===void 0&&(on.m="q"in on?on.q:0),"V"in on){if(on.V<1||on.V>53)return null;"w"in on||(on.w=1),"Z"in on?(Vt=(Wt=t(a(on.y,0,1))).getUTCDay(),Wt=Vt>4||Vt===0?T.l6.ceil(Wt):(0,T.l6)(Wt),Wt=w.Z.offset(Wt,7*(on.V-1)),on.y=Wt.getUTCFullYear(),on.m=Wt.getUTCMonth(),on.d=Wt.getUTCDate()+(on.w+6)%7):(Vt=(Wt=s(a(on.y,0,1))).getDay(),Wt=Vt>4||Vt===0?i.wA.ceil(Wt):(0,i.wA)(Wt),Wt=_.Z.offset(Wt,7*(on.V-1)),on.y=Wt.getFullYear(),on.m=Wt.getMonth(),on.d=Wt.getDate()+(on.w+6)%7)}else("W"in on||"U"in on)&&("w"in on||(on.w="u"in on?on.u%7:"W"in on?1:0),Vt="Z"in on?t(a(on.y,0,1)).getUTCDay():s(a(on.y,0,1)).getDay(),on.m=0,on.d="W"in on?(on.w+6)%7+7*on.W-(Vt+5)%7:on.w+7*on.U-(Vt+6)%7);return"Z"in on?(on.H+=on.Z/100|0,on.M+=on.Z%100,t(on)):s(on)}}function Dt(Bt,Xt,an,Wt){for(var Vt,on,Sn=0,Ln=Xt.length,fn=an.length;Sn<Ln;){if(Wt>=fn)return-1;if((Vt=Xt.charCodeAt(Sn++))===37){if(Vt=Xt.charAt(Sn++),!(on=Tt[Vt in u?Xt.charAt(Sn++):Vt])||(Wt=on(Bt,an,Wt))<0)return-1}else if(Vt!=an.charCodeAt(Wt++))return-1}return Wt}return dt.x=bt(St,dt),dt.X=bt(zt,dt),dt.c=bt(st,dt),Lt.x=bt(St,Lt),Lt.X=bt(zt,Lt),Lt.c=bt(st,Lt),{format:function(Bt){var Xt=bt(Bt+="",dt);return Xt.toString=function(){return Bt},Xt},parse:function(Bt){var Xt=Ct(Bt+="",!1);return Xt.toString=function(){return Bt},Xt},utcFormat:function(Bt){var Xt=bt(Bt+="",Lt);return Xt.toString=function(){return Bt},Xt},utcParse:function(Bt){var Xt=Ct(Bt+="",!0);return Xt.toString=function(){return Bt},Xt}}}var r,l,o,u={"-":"",_:" ",0:"0"},p=/^\s*\d+/,c=/^%/,b=/[\\^$*+?|[\]().{}]/g;function g(it,st,St){var zt=it<0?"-":"",Ft=(zt?-it:it)+"",Pt=Ft.length;return zt+(Pt<St?new Array(St-Pt+1).join(st)+Ft:Ft)}function d(it){return it.replace(b,"\\$&")}function m(it){return new RegExp("^(?:"+it.map(d).join("|")+")","i")}function x(it){for(var st={},St=-1,zt=it.length;++St<zt;)st[it[St].toLowerCase()]=St;return st}function y(it,st,St){var zt=p.exec(st.slice(St,St+1));return zt?(it.w=+zt[0],St+zt[0].length):-1}function k(it,st,St){var zt=p.exec(st.slice(St,St+1));return zt?(it.u=+zt[0],St+zt[0].length):-1}function f(it,st,St){var zt=p.exec(st.slice(St,St+2));return zt?(it.U=+zt[0],St+zt[0].length):-1}function S(it,st,St){var zt=p.exec(st.slice(St,St+2));return zt?(it.V=+zt[0],St+zt[0].length):-1}function M(it,st,St){var zt=p.exec(st.slice(St,St+2));return zt?(it.W=+zt[0],St+zt[0].length):-1}function E(it,st,St){var zt=p.exec(st.slice(St,St+4));return zt?(it.y=+zt[0],St+zt[0].length):-1}function O(it,st,St){var zt=p.exec(st.slice(St,St+2));return zt?(it.y=+zt[0]+(+zt[0]>68?1900:2e3),St+zt[0].length):-1}function P(it,st,St){var zt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(st.slice(St,St+6));return zt?(it.Z=zt[1]?0:-(zt[2]+(zt[3]||"00")),St+zt[0].length):-1}function I(it,st,St){var zt=p.exec(st.slice(St,St+1));return zt?(it.q=3*zt[0]-3,St+zt[0].length):-1}function z(it,st,St){var zt=p.exec(st.slice(St,St+2));return zt?(it.m=zt[0]-1,St+zt[0].length):-1}function U(it,st,St){var zt=p.exec(st.slice(St,St+2));return zt?(it.d=+zt[0],St+zt[0].length):-1}function R(it,st,St){var zt=p.exec(st.slice(St,St+3));return zt?(it.m=0,it.d=+zt[0],St+zt[0].length):-1}function j(it,st,St){var zt=p.exec(st.slice(St,St+2));return zt?(it.H=+zt[0],St+zt[0].length):-1}function Z(it,st,St){var zt=p.exec(st.slice(St,St+2));return zt?(it.M=+zt[0],St+zt[0].length):-1}function F(it,st,St){var zt=p.exec(st.slice(St,St+2));return zt?(it.S=+zt[0],St+zt[0].length):-1}function V(it,st,St){var zt=p.exec(st.slice(St,St+3));return zt?(it.L=+zt[0],St+zt[0].length):-1}function H(it,st,St){var zt=p.exec(st.slice(St,St+6));return zt?(it.L=Math.floor(zt[0]/1e3),St+zt[0].length):-1}function te(it,st,St){var zt=c.exec(st.slice(St,St+1));return zt?St+zt[0].length:-1}function $(it,st,St){var zt=p.exec(st.slice(St));return zt?(it.Q=+zt[0],St+zt[0].length):-1}function J(it,st,St){var zt=p.exec(st.slice(St));return zt?(it.s=+zt[0],St+zt[0].length):-1}function X(it,st){return g(it.getDate(),st,2)}function K(it,st){return g(it.getHours(),st,2)}function ee(it,st){return g(it.getHours()%12||12,st,2)}function ie(it,st){return g(1+_.Z.count((0,v.Z)(it),it),st,3)}function ae(it,st){return g(it.getMilliseconds(),st,3)}function oe(it,st){return ae(it,st)+"000"}function fe(it,st){return g(it.getMonth()+1,st,2)}function ge(it,st){return g(it.getMinutes(),st,2)}function ve(it,st){return g(it.getSeconds(),st,2)}function xe(it){var st=it.getDay();return st===0?7:st}function _e(it,st){return g(i.OM.count((0,v.Z)(it)-1,it),st,2)}function ye(it,st){var St=it.getDay();return it=St>=4||St===0?(0,i.bL)(it):i.bL.ceil(it),g(i.bL.count((0,v.Z)(it),it)+((0,v.Z)(it).getDay()===4),st,2)}function Ce(it){return it.getDay()}function ke(it,st){return g(i.wA.count((0,v.Z)(it)-1,it),st,2)}function Te(it,st){return g(it.getFullYear()%100,st,2)}function le(it,st){return g(it.getFullYear()%1e4,st,4)}function ue(it){var st=it.getTimezoneOffset();return(st>0?"-":(st*=-1,"+"))+g(st/60|0,"0",2)+g(st%60,"0",2)}function de(it,st){return g(it.getUTCDate(),st,2)}function Le(it,st){return g(it.getUTCHours(),st,2)}function we(it,st){return g(it.getUTCHours()%12||12,st,2)}function Ee(it,st){return g(1+w.Z.count((0,h.Z)(it),it),st,3)}function Oe(it,st){return g(it.getUTCMilliseconds(),st,3)}function Fe(it,st){return Oe(it,st)+"000"}function pe(it,st){return g(it.getUTCMonth()+1,st,2)}function be(it,st){return g(it.getUTCMinutes(),st,2)}function Me(it,st){return g(it.getUTCSeconds(),st,2)}function De(it){var st=it.getUTCDay();return st===0?7:st}function Ne(it,st){return g(T.Ox.count((0,h.Z)(it)-1,it),st,2)}function Be(it,st){var St=it.getUTCDay();return it=St>=4||St===0?(0,T.hB)(it):T.hB.ceil(it),g(T.hB.count((0,h.Z)(it),it)+((0,h.Z)(it).getUTCDay()===4),st,2)}function Ye(it){return it.getUTCDay()}function We(it,st){return g(T.l6.count((0,h.Z)(it)-1,it),st,2)}function et(it,st){return g(it.getUTCFullYear()%100,st,2)}function ft(it,st){return g(it.getUTCFullYear()%1e4,st,4)}function ht(){return"+0000"}function mt(){return"%"}function Mt(it){return+it}function _t(it){return Math.floor(+it/1e3)}r=n({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),l=r.format,r.parse,o=r.utcFormat,r.utcParse},82301:function(N,L,e){e.d(L,{a:function(){return _}});var T=e(30052),w=e(54263),i=(0,T.Z)(function(v){v.setHours(0,0,0,0)},function(v,h){v.setDate(v.getDate()+h)},function(v,h){return(h-v-(h.getTimezoneOffset()-v.getTimezoneOffset())*w.yB)/w.UD},function(v){return v.getDate()-1});L.Z=i;var _=i.range},54263:function(N,L,e){e.d(L,{UD:function(){return _},Y2:function(){return i},Ym:function(){return T},iM:function(){return v},yB:function(){return w}});var T=1e3,w=6e4,i=36e5,_=864e5,v=6048e5},81041:function(N,L,e){e.r(L),e.d(L,{timeDay:function(){return p.Z},timeDays:function(){return p.a},timeFriday:function(){return c.mC},timeFridays:function(){return c.b$},timeHour:function(){return o},timeHours:function(){return u},timeInterval:function(){return T.Z},timeMillisecond:function(){return i},timeMilliseconds:function(){return _},timeMinute:function(){return n},timeMinutes:function(){return r},timeMonday:function(){return c.wA},timeMondays:function(){return c.bJ},timeMonth:function(){return g},timeMonths:function(){return d},timeSaturday:function(){return c.EY},timeSaturdays:function(){return c.Ff},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return c.OM},timeSundays:function(){return c.vm},timeThursday:function(){return c.bL},timeThursdays:function(){return c.$t},timeTuesday:function(){return c.sy},timeTuesdays:function(){return c.aU},timeWednesday:function(){return c.zg},timeWednesdays:function(){return c.Ld},timeWeek:function(){return c.OM},timeWeeks:function(){return c.vm},timeYear:function(){return m.Z},timeYears:function(){return m.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return O.QQ},utcFridays:function(){return O.fz},utcHour:function(){return S},utcHours:function(){return M},utcMillisecond:function(){return i},utcMilliseconds:function(){return _},utcMinute:function(){return y},utcMinutes:function(){return k},utcMonday:function(){return O.l6},utcMondays:function(){return O.$3},utcMonth:function(){return I},utcMonths:function(){return z},utcSaturday:function(){return O.g4},utcSaturdays:function(){return O.Q_},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return O.Ox},utcSundays:function(){return O.SU},utcThursday:function(){return O.hB},utcThursdays:function(){return O.xj},utcTuesday:function(){return O.J1},utcTuesdays:function(){return O.DK},utcWednesday:function(){return O.b3},utcWednesdays:function(){return O.uy},utcWeek:function(){return O.Ox},utcWeeks:function(){return O.SU},utcYear:function(){return U.Z},utcYears:function(){return U.D}});var T=e(30052),w=(0,T.Z)(function(){},function(R,j){R.setTime(+R+j)},function(R,j){return j-R});w.every=function(R){return R=Math.floor(R),isFinite(R)&&R>0?R>1?(0,T.Z)(function(j){j.setTime(Math.floor(j/R)*R)},function(j,Z){j.setTime(+j+Z*R)},function(j,Z){return(Z-j)/R}):w:null};var i=w,_=w.range,v=e(54263),h=(0,T.Z)(function(R){R.setTime(R-R.getMilliseconds())},function(R,j){R.setTime(+R+j*v.Ym)},function(R,j){return(j-R)/v.Ym},function(R){return R.getUTCSeconds()}),s=h,t=h.range,a=(0,T.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*v.Ym)},function(R,j){R.setTime(+R+j*v.yB)},function(R,j){return(j-R)/v.yB},function(R){return R.getMinutes()}),n=a,r=a.range,l=(0,T.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*v.Ym-R.getMinutes()*v.yB)},function(R,j){R.setTime(+R+j*v.Y2)},function(R,j){return(j-R)/v.Y2},function(R){return R.getHours()}),o=l,u=l.range,p=e(82301),c=e(59879),b=(0,T.Z)(function(R){R.setDate(1),R.setHours(0,0,0,0)},function(R,j){R.setMonth(R.getMonth()+j)},function(R,j){return j.getMonth()-R.getMonth()+12*(j.getFullYear()-R.getFullYear())},function(R){return R.getMonth()}),g=b,d=b.range,m=e(34823),x=(0,T.Z)(function(R){R.setUTCSeconds(0,0)},function(R,j){R.setTime(+R+j*v.yB)},function(R,j){return(j-R)/v.yB},function(R){return R.getUTCMinutes()}),y=x,k=x.range,f=(0,T.Z)(function(R){R.setUTCMinutes(0,0,0)},function(R,j){R.setTime(+R+j*v.Y2)},function(R,j){return(j-R)/v.Y2},function(R){return R.getUTCHours()}),S=f,M=f.range,E=e(48480),O=e(58176),P=(0,T.Z)(function(R){R.setUTCDate(1),R.setUTCHours(0,0,0,0)},function(R,j){R.setUTCMonth(R.getUTCMonth()+j)},function(R,j){return j.getUTCMonth()-R.getUTCMonth()+12*(j.getUTCFullYear()-R.getUTCFullYear())},function(R){return R.getUTCMonth()}),I=P,z=P.range,U=e(79791)},30052:function(N,L,e){e.d(L,{Z:function(){return i}});var T=new Date,w=new Date;function i(_,v,h,s){function t(a){return _(a=arguments.length===0?new Date:new Date(+a)),a}return t.floor=function(a){return _(a=new Date(+a)),a},t.ceil=function(a){return _(a=new Date(a-1)),v(a,1),_(a),a},t.round=function(a){var n=t(a),r=t.ceil(a);return a-n<r-a?n:r},t.offset=function(a,n){return v(a=new Date(+a),n==null?1:Math.floor(n)),a},t.range=function(a,n,r){var l,o=[];if(a=t.ceil(a),r=r==null?1:Math.floor(r),!(a<n&&r>0))return o;do o.push(l=new Date(+a)),v(a,r),_(a);while(l<a&&a<n);return o},t.filter=function(a){return i(function(n){if(n>=n)for(;_(n),!a(n);)n.setTime(n-1)},function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;v(n,-1),!a(n););else for(;--r>=0;)for(;v(n,1),!a(n););})},h&&(t.count=function(a,n){return T.setTime(+a),w.setTime(+n),_(T),_(w),Math.floor(h(T,w))},t.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?t.filter(s?function(n){return s(n)%a==0}:function(n){return t.count(0,n)%a==0}):t:null}),t}},48480:function(N,L,e){e.d(L,{y:function(){return _}});var T=e(30052),w=e(54263),i=(0,T.Z)(function(v){v.setUTCHours(0,0,0,0)},function(v,h){v.setUTCDate(v.getUTCDate()+h)},function(v,h){return(h-v)/w.UD},function(v){return v.getUTCDate()-1});L.Z=i;var _=i.range},58176:function(N,L,e){e.d(L,{$3:function(){return l},DK:function(){return o},J1:function(){return h},Ox:function(){return _},QQ:function(){return a},Q_:function(){return b},SU:function(){return r},b3:function(){return s},fz:function(){return c},g4:function(){return n},hB:function(){return t},l6:function(){return v},uy:function(){return u},xj:function(){return p}});var T=e(30052),w=e(54263);function i(g){return(0,T.Z)(function(d){d.setUTCDate(d.getUTCDate()-(d.getUTCDay()+7-g)%7),d.setUTCHours(0,0,0,0)},function(d,m){d.setUTCDate(d.getUTCDate()+7*m)},function(d,m){return(m-d)/w.iM})}var _=i(0),v=i(1),h=i(2),s=i(3),t=i(4),a=i(5),n=i(6),r=_.range,l=v.range,o=h.range,u=s.range,p=t.range,c=a.range,b=n.range},79791:function(N,L,e){e.d(L,{D:function(){return i}});var T=e(30052),w=(0,T.Z)(function(_){_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0)},function(_,v){_.setUTCFullYear(_.getUTCFullYear()+v)},function(_,v){return v.getUTCFullYear()-_.getUTCFullYear()},function(_){return _.getUTCFullYear()});w.every=function(_){return isFinite(_=Math.floor(_))&&_>0?(0,T.Z)(function(v){v.setUTCFullYear(Math.floor(v.getUTCFullYear()/_)*_),v.setUTCMonth(0,1),v.setUTCHours(0,0,0,0)},function(v,h){v.setUTCFullYear(v.getUTCFullYear()+h*_)}):null},L.Z=w;var i=w.range},59879:function(N,L,e){e.d(L,{$t:function(){return p},EY:function(){return n},Ff:function(){return b},Ld:function(){return u},OM:function(){return _},aU:function(){return o},b$:function(){return c},bJ:function(){return l},bL:function(){return t},mC:function(){return a},sy:function(){return h},vm:function(){return r},wA:function(){return v},zg:function(){return s}});var T=e(30052),w=e(54263);function i(g){return(0,T.Z)(function(d){d.setDate(d.getDate()-(d.getDay()+7-g)%7),d.setHours(0,0,0,0)},function(d,m){d.setDate(d.getDate()+7*m)},function(d,m){return(m-d-(m.getTimezoneOffset()-d.getTimezoneOffset())*w.yB)/w.iM})}var _=i(0),v=i(1),h=i(2),s=i(3),t=i(4),a=i(5),n=i(6),r=_.range,l=v.range,o=h.range,u=s.range,p=t.range,c=a.range,b=n.range},34823:function(N,L,e){e.d(L,{g:function(){return i}});var T=e(30052),w=(0,T.Z)(function(_){_.setMonth(0,1),_.setHours(0,0,0,0)},function(_,v){_.setFullYear(_.getFullYear()+v)},function(_,v){return v.getFullYear()-_.getFullYear()},function(_){return _.getFullYear()});w.every=function(_){return isFinite(_=Math.floor(_))&&_>0?(0,T.Z)(function(v){v.setFullYear(Math.floor(v.getFullYear()/_)*_),v.setMonth(0,1),v.setHours(0,0,0,0)},function(v,h){v.setFullYear(v.getFullYear()+h*_)}):null},L.Z=w;var i=w.range},17045:function(N,L,e){var T=e(8709),w=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",i=Object.prototype.toString,_=Array.prototype.concat,v=Object.defineProperty,h=e(55622)(),s=v&&h,t=function(n,r,l,o){if(r in n){if(o===!0){if(n[r]===l)return}else if(typeof(u=o)!="function"||i.call(u)!=="[object Function]"||!o())return}var u;s?v(n,r,{configurable:!0,enumerable:!1,value:l,writable:!0}):n[r]=l},a=function(n,r){var l=arguments.length>2?arguments[2]:{},o=T(r);w&&(o=_.call(o,Object.getOwnPropertySymbols(r)));for(var u=0;u<o.length;u+=1)t(n,o[u],r[o[u]],l[o[u]])};a.supportsDescriptors=!!s,N.exports=a},46775:function(N){N.exports=function(){for(var L=0;L<arguments.length;L++)if(arguments[L]!==void 0)return arguments[L]}},53545:function(N){N.exports=T;var L=(T.canvas=document.createElement("canvas")).getContext("2d"),e=w([32,126]);function T(i,_){Array.isArray(i)&&(i=i.join(", "));var v,h={},s=16,t=.05;_&&(_.length===2&&typeof _[0]=="number"?v=w(_):Array.isArray(_)?v=_:(_.o?v=w(_.o):_.pairs&&(v=_.pairs),_.fontSize&&(s=_.fontSize),_.threshold!=null&&(t=_.threshold))),v||(v=e),L.font=s+"px "+i;for(var a=0;a<v.length;a++){var n=v[a],r=L.measureText(n[0]).width+L.measureText(n[1]).width,l=L.measureText(n).width;if(Math.abs(r-l)>s*t){var o=(l-r)/s;h[n]=1e3*o}}return h}function w(i){for(var _=[],v=i[0];v<=i[1];v++)for(var h=String.fromCharCode(v),s=i[0];s<i[1];s++){var t=h+String.fromCharCode(s);_.push(t)}return _}T.createPairs=w,T.ascii=e},31457:function(N,L,e){var T=e(65185),w=e(18625),i={M:"moveTo",C:"bezierCurveTo"};N.exports=function(_,v){_.beginPath(),w(T(v)).forEach(function(h){var s=h[0],t=h.slice(1);_[i[s]].apply(_,t)}),_.closePath()}},90660:function(N){N.exports=function(L){switch(L){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(N){function L(e,T,w){var i=0|e[w];if(i<=0)return[];var _,v=new Array(i);if(w===e.length-1)for(_=0;_<i;++_)v[_]=T;else for(_=0;_<i;++_)v[_]=L(e,T,w+1);return v}N.exports=function(e,T){switch(T===void 0&&(T=0),typeof e){case"number":if(e>0)return function(w,i){var _,v;for(_=new Array(w),v=0;v<w;++v)_[v]=i;return _}(0|e,T);break;case"object":if(typeof e.length=="number")return L(e,T,0)}return[]}},11474:function(N){function L(S,M,E){E=E||2;var O,P,I,z,U,R,j,Z=M&&M.length,F=Z?M[0]*E:S.length,V=e(S,0,F,E,!0),H=[];if(!V||V.next===V.prev)return H;if(Z&&(V=function($,J,X,K){var ee,ie,ae,oe=[];for(ee=0,ie=J.length;ee<ie;ee++)(ae=e($,J[ee]*K,ee<ie-1?J[ee+1]*K:$.length,K,!1))===ae.next&&(ae.steiner=!0),oe.push(r(ae));for(oe.sort(s),ee=0;ee<oe.length;ee++)t(oe[ee],X),X=T(X,X.next);return X}(S,M,V,E)),S.length>80*E){O=I=S[0],P=z=S[1];for(var te=E;te<F;te+=E)(U=S[te])<O&&(O=U),(R=S[te+1])<P&&(P=R),U>I&&(I=U),R>z&&(z=R);j=(j=Math.max(I-O,z-P))!==0?1/j:0}return w(V,H,E,O,P,j),H}function e(S,M,E,O,P){var I,z;if(P===f(S,M,E,O)>0)for(I=M;I<E;I+=O)z=x(I,S[I],S[I+1],z);else for(I=E-O;I>=M;I-=O)z=x(I,S[I],S[I+1],z);return z&&p(z,z.next)&&(y(z),z=z.next),z}function T(S,M){if(!S)return S;M||(M=S);var E,O=S;do if(E=!1,O.steiner||!p(O,O.next)&&u(O.prev,O,O.next)!==0)O=O.next;else{if(y(O),(O=M=O.prev)===O.next)break;E=!0}while(E||O!==M);return M}function w(S,M,E,O,P,I,z){if(S){!z&&I&&function(Z,F,V,H){var te=Z;do te.z===null&&(te.z=n(te.x,te.y,F,V,H)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==Z);te.prevZ.nextZ=null,te.prevZ=null,function($){var J,X,K,ee,ie,ae,oe,fe,ge=1;do{for(X=$,$=null,ie=null,ae=0;X;){for(ae++,K=X,oe=0,J=0;J<ge&&(oe++,K=K.nextZ);J++);for(fe=ge;oe>0||fe>0&&K;)oe!==0&&(fe===0||!K||X.z<=K.z)?(ee=X,X=X.nextZ,oe--):(ee=K,K=K.nextZ,fe--),ie?ie.nextZ=ee:$=ee,ee.prevZ=ie,ie=ee;X=K}ie.nextZ=null,ge*=2}while(ae>1)}(te)}(S,O,P,I);for(var U,R,j=S;S.prev!==S.next;)if(U=S.prev,R=S.next,I?_(S,O,P,I):i(S))M.push(U.i/E),M.push(S.i/E),M.push(R.i/E),y(S),S=R.next,j=R.next;else if((S=R)===j){z?z===1?w(S=v(T(S),M,E),M,E,O,P,I,2):z===2&&h(S,M,E,O,P,I):w(T(S),M,E,O,P,I,1);break}}}function i(S){var M=S.prev,E=S,O=S.next;if(u(M,E,O)>=0)return!1;for(var P=S.next.next;P!==S.prev;){if(l(M.x,M.y,E.x,E.y,O.x,O.y,P.x,P.y)&&u(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function _(S,M,E,O){var P=S.prev,I=S,z=S.next;if(u(P,I,z)>=0)return!1;for(var U=P.x<I.x?P.x<z.x?P.x:z.x:I.x<z.x?I.x:z.x,R=P.y<I.y?P.y<z.y?P.y:z.y:I.y<z.y?I.y:z.y,j=P.x>I.x?P.x>z.x?P.x:z.x:I.x>z.x?I.x:z.x,Z=P.y>I.y?P.y>z.y?P.y:z.y:I.y>z.y?I.y:z.y,F=n(U,R,M,E,O),V=n(j,Z,M,E,O),H=S.prevZ,te=S.nextZ;H&&H.z>=F&&te&&te.z<=V;){if(H!==S.prev&&H!==S.next&&l(P.x,P.y,I.x,I.y,z.x,z.y,H.x,H.y)&&u(H.prev,H,H.next)>=0||(H=H.prevZ,te!==S.prev&&te!==S.next&&l(P.x,P.y,I.x,I.y,z.x,z.y,te.x,te.y)&&u(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;H&&H.z>=F;){if(H!==S.prev&&H!==S.next&&l(P.x,P.y,I.x,I.y,z.x,z.y,H.x,H.y)&&u(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;te&&te.z<=V;){if(te!==S.prev&&te!==S.next&&l(P.x,P.y,I.x,I.y,z.x,z.y,te.x,te.y)&&u(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function v(S,M,E){var O=S;do{var P=O.prev,I=O.next.next;!p(P,I)&&c(P,O,O.next,I)&&d(P,I)&&d(I,P)&&(M.push(P.i/E),M.push(O.i/E),M.push(I.i/E),y(O),y(O.next),O=S=I),O=O.next}while(O!==S);return T(O)}function h(S,M,E,O,P,I){var z=S;do{for(var U=z.next.next;U!==z.prev;){if(z.i!==U.i&&o(z,U)){var R=m(z,U);return z=T(z,z.next),R=T(R,R.next),w(z,M,E,O,P,I),void w(R,M,E,O,P,I)}U=U.next}z=z.next}while(z!==S)}function s(S,M){return S.x-M.x}function t(S,M){if(M=function(O,P){var I,z=P,U=O.x,R=O.y,j=-1/0;do{if(R<=z.y&&R>=z.next.y&&z.next.y!==z.y){var Z=z.x+(R-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(Z<=U&&Z>j){if(j=Z,Z===U){if(R===z.y)return z;if(R===z.next.y)return z.next}I=z.x<z.next.x?z:z.next}}z=z.next}while(z!==P);if(!I)return null;if(U===j)return I;var F,V=I,H=I.x,te=I.y,$=1/0;z=I;do U>=z.x&&z.x>=H&&U!==z.x&&l(R<te?U:j,R,H,te,R<te?j:U,R,z.x,z.y)&&(F=Math.abs(R-z.y)/(U-z.x),d(z,O)&&(F<$||F===$&&(z.x>I.x||z.x===I.x&&a(I,z)))&&(I=z,$=F)),z=z.next;while(z!==V);return I}(S,M),M){var E=m(M,S);T(M,M.next),T(E,E.next)}}function a(S,M){return u(S.prev,S,M.prev)<0&&u(M.next,S,S.next)<0}function n(S,M,E,O,P){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*P)|S<<8))|S<<4))|S<<2))|S<<1))|(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-O)*P)|M<<8))|M<<4))|M<<2))|M<<1))<<1}function r(S){var M=S,E=S;do(M.x<E.x||M.x===E.x&&M.y<E.y)&&(E=M),M=M.next;while(M!==S);return E}function l(S,M,E,O,P,I,z,U){return(P-z)*(M-U)-(S-z)*(I-U)>=0&&(S-z)*(O-U)-(E-z)*(M-U)>=0&&(E-z)*(I-U)-(P-z)*(O-U)>=0}function o(S,M){return S.next.i!==M.i&&S.prev.i!==M.i&&!function(E,O){var P=E;do{if(P.i!==E.i&&P.next.i!==E.i&&P.i!==O.i&&P.next.i!==O.i&&c(P,P.next,E,O))return!0;P=P.next}while(P!==E);return!1}(S,M)&&(d(S,M)&&d(M,S)&&function(E,O){var P=E,I=!1,z=(E.x+O.x)/2,U=(E.y+O.y)/2;do P.y>U!=P.next.y>U&&P.next.y!==P.y&&z<(P.next.x-P.x)*(U-P.y)/(P.next.y-P.y)+P.x&&(I=!I),P=P.next;while(P!==E);return I}(S,M)&&(u(S.prev,S,M.prev)||u(S,M.prev,M))||p(S,M)&&u(S.prev,S,S.next)>0&&u(M.prev,M,M.next)>0)}function u(S,M,E){return(M.y-S.y)*(E.x-M.x)-(M.x-S.x)*(E.y-M.y)}function p(S,M){return S.x===M.x&&S.y===M.y}function c(S,M,E,O){var P=g(u(S,M,E)),I=g(u(S,M,O)),z=g(u(E,O,S)),U=g(u(E,O,M));return P!==I&&z!==U||!(P!==0||!b(S,E,M))||!(I!==0||!b(S,O,M))||!(z!==0||!b(E,S,O))||!(U!==0||!b(E,M,O))}function b(S,M,E){return M.x<=Math.max(S.x,E.x)&&M.x>=Math.min(S.x,E.x)&&M.y<=Math.max(S.y,E.y)&&M.y>=Math.min(S.y,E.y)}function g(S){return S>0?1:S<0?-1:0}function d(S,M){return u(S.prev,S,S.next)<0?u(S,M,S.next)>=0&&u(S,S.prev,M)>=0:u(S,M,S.prev)<0||u(S,S.next,M)<0}function m(S,M){var E=new k(S.i,S.x,S.y),O=new k(M.i,M.x,M.y),P=S.next,I=M.prev;return S.next=M,M.prev=S,E.next=P,P.prev=E,O.next=E,E.prev=O,I.next=O,O.prev=I,O}function x(S,M,E,O){var P=new k(S,M,E);return O?(P.next=O.next,P.prev=O,O.next.prev=P,O.next=P):(P.prev=P,P.next=P),P}function y(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function k(S,M,E){this.i=S,this.x=M,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function f(S,M,E,O){for(var P=0,I=M,z=E-O;I<E;I+=O)P+=(S[z]-S[I])*(S[I+1]+S[z+1]),z=I;return P}N.exports=L,N.exports.default=L,L.deviation=function(S,M,E,O){var P=M&&M.length,I=P?M[0]*E:S.length,z=Math.abs(f(S,0,I,E));if(P)for(var U=0,R=M.length;U<R;U++){var j=M[U]*E,Z=U<R-1?M[U+1]*E:S.length;z-=Math.abs(f(S,j,Z,E))}var F=0;for(U=0;U<O.length;U+=3){var V=O[U]*E,H=O[U+1]*E,te=O[U+2]*E;F+=Math.abs((S[V]-S[te])*(S[H+1]-S[V+1])-(S[V]-S[H])*(S[te+1]-S[V+1]))}return z===0&&F===0?0:Math.abs((F-z)/z)},L.flatten=function(S){for(var M=S[0][0].length,E={vertices:[],holes:[],dimensions:M},O=0,P=0;P<S.length;P++){for(var I=0;I<S[P].length;I++)for(var z=0;z<M;z++)E.vertices.push(S[P][I][z]);P>0&&(O+=S[P-1].length,E.holes.push(O))}return E}},2502:function(N,L,e){var T=e(68664);N.exports=function(w,i){var _,v=[],h=[],s=[],t={},a=[];function n(d){s[d]=!1,t.hasOwnProperty(d)&&Object.keys(t[d]).forEach(function(m){delete t[d][m],s[m]&&n(m)})}function r(d){var m,x,y=!1;for(h.push(d),s[d]=!0,m=0;m<a[d].length;m++)(x=a[d][m])===_?(l(_,h),y=!0):s[x]||(y=r(x));if(y)n(d);else for(m=0;m<a[d].length;m++){x=a[d][m];var k=t[x];k||(k={},t[x]=k),k[x]=!0}return h.pop(),y}function l(d,m){var x=[].concat(m).concat(d);i?i(r):v.push(x)}function o(d){(function(E){for(var O=0;O<w.length;O++)O<E&&(w[O]=[]),w[O]=w[O].filter(function(P){return P>=E})})(d);for(var m,x=T(w).components.filter(function(E){return E.length>1}),y=1/0,k=0;k<x.length;k++)for(var f=0;f<x[k].length;f++)x[k][f]<y&&(y=x[k][f],m=k);var S=x[m];if(!S)return!1;var M=w.map(function(E,O){return S.indexOf(O)===-1?[]:E.filter(function(P){return S.indexOf(P)!==-1})});return{leastVertex:y,adjList:M}}_=0;for(var u=w.length;_<u;){var p=o(_);if(_=p.leastVertex,a=p.adjList){for(var c=0;c<a.length;c++)for(var b=0;b<a[c].length;b++){var g=a[c][b];s[+g]=!1,t[g]={}}r(_),_+=1}else _=u}return i?void 0:v}},16134:function(N,L,e){var T=e(36672);N.exports=function(){return T(this).length=0,this}},4892:function(N,L,e){N.exports=e(64404)()?Array.from:e(49441)},64404:function(N){N.exports=function(){var L,e,T=Array.from;return typeof T=="function"&&(e=T(L=["raz","dwa"]),!!(e&&e!==L&&e[1]==="dwa"))}},49441:function(N,L,e){var T=e(8260).iterator,w=e(73051),i=e(33717),_=e(35976),v=e(78513),h=e(36672),s=e(95296),t=e(87963),a=Array.isArray,n=Function.prototype.call,r={configurable:!0,enumerable:!0,writable:!0,value:null},l=Object.defineProperty;N.exports=function(o){var u,p,c,b,g,d,m,x,y,k,f=arguments[1],S=arguments[2];if(o=Object(h(o)),s(f)&&v(f),this&&this!==Array&&i(this))u=this;else{if(!f){if(w(o))return(g=o.length)!==1?Array.apply(null,o):((b=new Array(1))[0]=o[0],b);if(a(o)){for(b=new Array(g=o.length),p=0;p<g;++p)b[p]=o[p];return b}}b=[]}if(!a(o)){if((y=o[T])!==void 0){for(m=v(y).call(o),u&&(b=new u),x=m.next(),p=0;!x.done;)k=f?n.call(f,S,x.value,p):x.value,u?(r.value=k,l(b,p,r)):b[p]=k,x=m.next(),++p;g=p}else if(t(o)){for(g=o.length,u&&(b=new u),p=0,c=0;p<g;++p)k=o[p],p+1<g&&(d=k.charCodeAt(0))>=55296&&d<=56319&&(k+=o[++p]),k=f?n.call(f,S,k,c):k,u?(r.value=k,l(b,c,r)):b[c]=k,++c;g=c}}if(g===void 0)for(g=_(o.length),u&&(b=new u(g)),p=0;p<g;++p)k=f?n.call(f,S,o[p],p):o[p],u?(r.value=k,l(b,p,r)):b[p]=k;return u&&(r.value=null,b.length=g),b}},73051:function(N){var L=Object.prototype.toString,e=L.call(function(){return arguments}());N.exports=function(T){return L.call(T)===e}},33717:function(N){var L=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);N.exports=function(T){return typeof T=="function"&&e(L.call(T))}},52345:function(N){N.exports=function(){}},9953:function(N,L,e){N.exports=e(90436)()?Math.sign:e(6069)},90436:function(N){N.exports=function(){var L=Math.sign;return typeof L=="function"&&L(10)===1&&L(-20)===-1}},6069:function(N){N.exports=function(L){return L=Number(L),isNaN(L)||L===0?L:L>0?1:-1}},56247:function(N,L,e){var T=e(9953),w=Math.abs,i=Math.floor;N.exports=function(_){return isNaN(_)?0:(_=Number(_))!==0&&isFinite(_)?T(_)*i(w(_)):_}},35976:function(N,L,e){var T=e(56247),w=Math.max;N.exports=function(i){return w(0,T(i))}},67260:function(N,L,e){var T=e(78513),w=e(36672),i=Function.prototype.bind,_=Function.prototype.call,v=Object.keys,h=Object.prototype.propertyIsEnumerable;N.exports=function(s,t){return function(a,n){var r,l=arguments[2],o=arguments[3];return a=Object(w(a)),T(n),r=v(a),o&&r.sort(typeof o=="function"?i.call(o,a):void 0),typeof s!="function"&&(s=r[s]),_.call(s,r,function(u,p){return h.call(a,u)?_.call(n,l,a[u],u,a,p):t})}}},95879:function(N,L,e){N.exports=e(73583)()?Object.assign:e(34205)},73583:function(N){N.exports=function(){var L,e=Object.assign;return typeof e=="function"&&(e(L={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),L.foo+L.bar+L.trzy==="razdwatrzy")}},34205:function(N,L,e){var T=e(68700),w=e(36672),i=Math.max;N.exports=function(_,v){var h,s,t,a=i(arguments.length,2);for(_=Object(w(_)),t=function(n){try{_[n]=v[n]}catch(r){h||(h=r)}},s=1;s<a;++s)T(v=arguments[s]).forEach(t);if(h!==void 0)throw h;return _}},19012:function(N,L,e){var T=e(4892),w=e(95879),i=e(36672);N.exports=function(_){var v=Object(i(_)),h=arguments[1],s=Object(arguments[2]);if(v!==_&&!h)return v;var t={};return h?T(h,function(a){(s.ensure||a in _)&&(t[a]=_[a])}):w(t,_),t}},52818:function(N,L,e){var T,w,i,_,v=Object.create;e(33247)()||(T=e(51882)),N.exports=T?T.level!==1?v:(w={},i={},_={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(h){i[h]=h!=="__proto__"?_:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(w,i),Object.defineProperty(T,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:w}),function(h,s){return v(h===null?w:h,s)}):v},96437:function(N,L,e){N.exports=e(67260)("forEach")},99611:function(N,L,e){var T=e(95296),w={function:!0,object:!0};N.exports=function(i){return T(i)&&w[typeof i]||!1}},95296:function(N,L,e){var T=e(52345)();N.exports=function(w){return w!==T&&w!==null}},68700:function(N,L,e){N.exports=e(13895)()?Object.keys:e(25217)},13895:function(N){N.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function(N,L,e){var T=e(95296),w=Object.keys;N.exports=function(i){return w(T(i)?Object(i):i)}},16906:function(N,L,e){var T=e(78513),w=e(96437),i=Function.prototype.call;N.exports=function(_,v){var h={},s=arguments[2];return T(v),w(_,function(t,a,n,r){h[a]=i.call(v,s,t,a,n,r)}),h}},21780:function(N,L,e){var T=e(95296),w=Array.prototype.forEach,i=Object.create;N.exports=function(_){var v=i(null);return w.call(arguments,function(h){T(h)&&function(s,t){var a;for(a in s)t[a]=s[a]}(Object(h),v)}),v}},1496:function(N,L,e){N.exports=e(33247)()?Object.setPrototypeOf:e(51882)},33247:function(N){var L=Object.create,e=Object.getPrototypeOf,T={};N.exports=function(){var w=Object.setPrototypeOf;return typeof w=="function"&&e(w((arguments[0]||L)(null),T))===T}},51882:function(N,L,e){var T,w,i,_,v=e(99611),h=e(36672),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};T=function(n,r){if(h(n),r===null||v(r))return n;throw new TypeError("Prototype must be null or an object")},N.exports=(w=function(){var n,r=Object.create(null),l={},o=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(o){try{(n=o.set).call(r,l)}catch{}if(Object.getPrototypeOf(r)===l)return{set:n,level:2}}return r.__proto__=l,Object.getPrototypeOf(r)===l?{level:2}:((r={}).__proto__=l,Object.getPrototypeOf(r)===l&&{level:1})}(),w?(w.level===2?w.set?(_=w.set,i=function(n,r){return _.call(T(n,r),r),n}):i=function(n,r){return T(n,r).__proto__=r,n}:i=function n(r,l){var o;return T(r,l),(o=s.call(n.nullPolyfill,r))&&delete n.nullPolyfill.__proto__,l===null&&(l=n.nullPolyfill),r.__proto__=l,o&&t(n.nullPolyfill,"__proto__",a),r},Object.defineProperty(i,"level",{configurable:!1,enumerable:!1,writable:!1,value:w.level})):null),e(52818)},78513:function(N){N.exports=function(L){if(typeof L!="function")throw new TypeError(L+" is not a function");return L}},98976:function(N,L,e){var T=e(99611);N.exports=function(w){if(!T(w))throw new TypeError(w+" is not an Object");return w}},36672:function(N,L,e){var T=e(95296);N.exports=function(w){if(!T(w))throw new TypeError("Cannot use null or undefined");return w}},66741:function(N,L,e){N.exports=e(17557)()?String.prototype.contains:e(60381)},17557:function(N){var L="razdwatrzy";N.exports=function(){return typeof L.contains=="function"&&L.contains("dwa")===!0&&L.contains("foo")===!1}},60381:function(N){var L=String.prototype.indexOf;N.exports=function(e){return L.call(this,e,arguments[1])>-1}},87963:function(N){var L=Object.prototype.toString,e=L.call("");N.exports=function(T){return typeof T=="string"||T&&typeof T=="object"&&(T instanceof String||L.call(T)===e)||!1}},43043:function(N){var L=Object.create(null),e=Math.random;N.exports=function(){var T;do T=e().toString(36).slice(2);while(L[T]);return T}},32411:function(N,L,e){var T,w=e(1496),i=e(66741),_=e(62072),v=e(8260),h=e(95426),s=Object.defineProperty;T=N.exports=function(t,a){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");h.call(this,t),a=a?i.call(a,"key+value")?"key+value":i.call(a,"key")?"key":"value":"value",s(this,"__kind__",_("",a))},w&&w(T,h),delete T.prototype.constructor,T.prototype=Object.create(h.prototype,{_resolve:_(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(T.prototype,v.toStringTag,_("c","Array Iterator"))},27515:function(N,L,e){var T=e(73051),w=e(78513),i=e(87963),_=e(66661),v=Array.isArray,h=Function.prototype.call,s=Array.prototype.some;N.exports=function(t,a){var n,r,l,o,u,p,c,b,g=arguments[2];if(v(t)||T(t)?n="array":i(t)?n="string":t=_(t),w(a),l=function(){o=!0},n!=="array")if(n!=="string")for(r=t.next();!r.done;){if(h.call(a,g,r.value,l),o)return;r=t.next()}else for(p=t.length,u=0;u<p&&(c=t[u],u+1<p&&(b=c.charCodeAt(0))>=55296&&b<=56319&&(c+=t[++u]),h.call(a,g,c,l),!o);++u);else s.call(t,function(d){return h.call(a,g,d,l),o})}},66661:function(N,L,e){var T=e(73051),w=e(87963),i=e(32411),_=e(259),v=e(58095),h=e(8260).iterator;N.exports=function(s){return typeof v(s)[h]=="function"?s[h]():T(s)?new i(s):w(s)?new _(s):new i(s)}},95426:function(N,L,e){var T,w=e(16134),i=e(95879),_=e(78513),v=e(36672),h=e(62072),s=e(55174),t=e(8260),a=Object.defineProperty,n=Object.defineProperties;N.exports=T=function(r,l){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");n(this,{__list__:h("w",v(r)),__context__:h("w",l),__nextIndex__:h("w",0)}),l&&(_(l.on),l.on("_add",this._onAdd),l.on("_delete",this._onDelete),l.on("_clear",this._onClear))},delete T.prototype.constructor,n(T.prototype,i({_next:h(function(){var r;if(this.__list__)return this.__redo__&&(r=this.__redo__.shift())!==void 0?r:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:h(function(){return this._createResult(this._next())}),_createResult:h(function(r){return r===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(r)}}),_resolve:h(function(r){return this.__list__[r]}),_unBind:h(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:h(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:h(function(r){r>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(l,o){l>=r&&(this.__redo__[o]=++l)},this),this.__redo__.push(r)):a(this,"__redo__",h("c",[r])))}),_onDelete:h(function(r){var l;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((l=this.__redo__.indexOf(r))!==-1&&this.__redo__.splice(l,1),this.__redo__.forEach(function(o,u){o>r&&(this.__redo__[u]=--o)},this)))}),_onClear:h(function(){this.__redo__&&w.call(this.__redo__),this.__nextIndex__=0})}))),a(T.prototype,t.iterator,h(function(){return this}))},35940:function(N,L,e){var T=e(73051),w=e(95296),i=e(87963),_=e(8260).iterator,v=Array.isArray;N.exports=function(h){return!(!w(h)||!v(h)&&!i(h)&&!T(h)&&typeof h[_]!="function")}},259:function(N,L,e){var T,w=e(1496),i=e(62072),_=e(8260),v=e(95426),h=Object.defineProperty;T=N.exports=function(s){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");s=String(s),v.call(this,s),h(this,"__length__",i("",s.length))},w&&w(T,v),delete T.prototype.constructor,T.prototype=Object.create(v.prototype,{_next:i(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:i(function(s){var t,a=this.__list__[s];return this.__nextIndex__===this.__length__?a:(t=a.charCodeAt(0))>=55296&&t<=56319?a+this.__list__[this.__nextIndex__++]:a})}),h(T.prototype,_.toStringTag,i("c","String Iterator"))},58095:function(N,L,e){var T=e(35940);N.exports=function(w){if(!T(w))throw new TypeError(w+" is not iterable");return w}},73523:function(N){function L(e,T){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var w=Object(e),i=1;i<arguments.length;i++){var _=arguments[i];if(_!=null)for(var v=Object.keys(Object(_)),h=0,s=v.length;h<s;h++){var t=v[h],a=Object.getOwnPropertyDescriptor(_,t);a!==void 0&&a.enumerable&&(w[t]=_[t])}}return w}N.exports={assign:L,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:L})}}},8260:function(N,L,e){N.exports=e(69711)()?e(94908).Symbol:e(18415)},69711:function(N,L,e){var T=e(94908),w={object:!0,symbol:!0};N.exports=function(){var i,_=T.Symbol;if(typeof _!="function")return!1;i=_("test symbol");try{String(i)}catch{return!1}return!!w[typeof _.iterator]&&!!w[typeof _.toPrimitive]&&!!w[typeof _.toStringTag]}},82276:function(N){N.exports=function(L){return!!L&&(typeof L=="symbol"||!!L.constructor&&L.constructor.name==="Symbol"&&L[L.constructor.toStringTag]==="Symbol")}},29366:function(N,L,e){var T=e(62072),w=Object.create,i=Object.defineProperty,_=Object.prototype,v=w(null);N.exports=function(h){for(var s,t,a=0;v[h+(a||"")];)++a;return v[h+=a||""]=!0,i(_,s="@@"+h,T.gs(null,function(n){t||(t=!0,i(this,s,T(n)),t=!1)})),s}},92842:function(N,L,e){var T=e(62072),w=e(94908).Symbol;N.exports=function(i){return Object.defineProperties(i,{hasInstance:T("",w&&w.hasInstance||i("hasInstance")),isConcatSpreadable:T("",w&&w.isConcatSpreadable||i("isConcatSpreadable")),iterator:T("",w&&w.iterator||i("iterator")),match:T("",w&&w.match||i("match")),replace:T("",w&&w.replace||i("replace")),search:T("",w&&w.search||i("search")),species:T("",w&&w.species||i("species")),split:T("",w&&w.split||i("split")),toPrimitive:T("",w&&w.toPrimitive||i("toPrimitive")),toStringTag:T("",w&&w.toStringTag||i("toStringTag")),unscopables:T("",w&&w.unscopables||i("unscopables"))})}},13304:function(N,L,e){var T=e(62072),w=e(53308),i=Object.create(null);N.exports=function(_){return Object.defineProperties(_,{for:T(function(v){return i[v]?i[v]:i[v]=_(String(v))}),keyFor:T(function(v){var h;for(h in w(v),i)if(i[h]===v)return h})})}},18415:function(N,L,e){var T,w,i,_=e(62072),v=e(53308),h=e(94908).Symbol,s=e(29366),t=e(92842),a=e(13304),n=Object.create,r=Object.defineProperties,l=Object.defineProperty;if(typeof h=="function")try{String(h()),i=!0}catch{}else h=null;w=function(o){if(this instanceof w)throw new TypeError("Symbol is not a constructor");return T(o)},N.exports=T=function o(u){var p;if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i?h(u):(p=n(w.prototype),u=u===void 0?"":String(u),r(p,{__description__:_("",u),__name__:_("",s(u))}))},t(T),a(T),r(w.prototype,{constructor:_(T),toString:_("",function(){return this.__name__})}),r(T.prototype,{toString:_(function(){return"Symbol ("+v(this).__description__+")"}),valueOf:_(function(){return v(this)})}),l(T.prototype,T.toPrimitive,_("",function(){var o=v(this);return typeof o=="symbol"?o:o.toString()})),l(T.prototype,T.toStringTag,_("c","Symbol")),l(w.prototype,T.toStringTag,_("c",T.prototype[T.toStringTag])),l(w.prototype,T.toPrimitive,_("c",T.prototype[T.toPrimitive]))},53308:function(N,L,e){var T=e(82276);N.exports=function(w){if(!T(w))throw new TypeError(w+" is not a symbol");return w}},83522:function(N,L,e){N.exports=e(96402)()?WeakMap:e(329)},96402:function(N){N.exports=function(){var L,e;if(typeof WeakMap!="function")return!1;try{L=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(L)==="[object WeakMap]"&&typeof L.set=="function"&&L.set({},1)===L&&typeof L.delete=="function"&&typeof L.has=="function"&&L.get(e)==="one"}},96416:function(N){N.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},329:function(N,L,e){var T,w=e(95296),i=e(1496),_=e(98976),v=e(36672),h=e(43043),s=e(62072),t=e(66661),a=e(27515),n=e(8260).toStringTag,r=e(96416),l=Array.isArray,o=Object.defineProperty,u=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf;N.exports=T=function(){var c,b=arguments[0];if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");return c=r&&i&&WeakMap!==T?i(new WeakMap,p(this)):this,w(b)&&(l(b)||(b=t(b))),o(c,"__weakMapData__",s("c","$weakMap$"+h())),b&&a(b,function(g){v(g),c.set(g[0],g[1])}),c},r&&(i&&i(T,WeakMap),T.prototype=Object.create(WeakMap.prototype,{constructor:s(T)})),Object.defineProperties(T.prototype,{delete:s(function(c){return!!u.call(_(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:s(function(c){if(u.call(_(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:s(function(c){return u.call(_(c),this.__weakMapData__)}),set:s(function(c,b){return o(_(c),this.__weakMapData__,s("c",b)),this}),toString:s(function(){return"[object WeakMap]"})}),o(T.prototype,n,s("c","WeakMap"))},15398:function(N){var L,e=typeof Reflect=="object"?Reflect:null,T=e&&typeof e.apply=="function"?e.apply:function(u,p,c){return Function.prototype.apply.call(u,p,c)};L=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var w=Number.isNaN||function(u){return u!=u};function i(){i.init.call(this)}N.exports=i,N.exports.once=function(u,p){return new Promise(function(c,b){function g(m){u.removeListener(p,d),b(m)}function d(){typeof u.removeListener=="function"&&u.removeListener("error",g),c([].slice.call(arguments))}o(u,p,d,{once:!0}),p!=="error"&&function(m,x,y){typeof m.on=="function"&&o(m,"error",x,{once:!0})}(u,g)})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var _=10;function v(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function h(u){return u._maxListeners===void 0?i.defaultMaxListeners:u._maxListeners}function s(u,p,c,b){var g,d,m,x;if(v(c),(d=u._events)===void 0?(d=u._events=Object.create(null),u._eventsCount=0):(d.newListener!==void 0&&(u.emit("newListener",p,c.listener?c.listener:c),d=u._events),m=d[p]),m===void 0)m=d[p]=c,++u._eventsCount;else if(typeof m=="function"?m=d[p]=b?[c,m]:[m,c]:b?m.unshift(c):m.push(c),(g=h(u))>0&&m.length>g&&!m.warned){m.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=u,y.type=p,y.count=m.length,x=y,console&&console.warn&&console.warn(x)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(u,p,c){var b={fired:!1,wrapFn:void 0,target:u,type:p,listener:c},g=t.bind(b);return g.listener=c,b.wrapFn=g,g}function n(u,p,c){var b=u._events;if(b===void 0)return[];var g=b[p];return g===void 0?[]:typeof g=="function"?c?[g.listener||g]:[g]:c?function(d){for(var m=new Array(d.length),x=0;x<m.length;++x)m[x]=d[x].listener||d[x];return m}(g):l(g,g.length)}function r(u){var p=this._events;if(p!==void 0){var c=p[u];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function l(u,p){for(var c=new Array(p),b=0;b<p;++b)c[b]=u[b];return c}function o(u,p,c,b){if(typeof u.on=="function")b.once?u.once(p,c):u.on(p,c);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(p,function g(d){b.once&&u.removeEventListener(p,g),c(d)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(u){if(typeof u!="number"||u<0||w(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");_=u}}),i.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||w(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},i.prototype.getMaxListeners=function(){return h(this)},i.prototype.emit=function(u){for(var p=[],c=1;c<arguments.length;c++)p.push(arguments[c]);var b=u==="error",g=this._events;if(g!==void 0)b=b&&g.error===void 0;else if(!b)return!1;if(b){var d;if(p.length>0&&(d=p[0]),d instanceof Error)throw d;var m=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw m.context=d,m}var x=g[u];if(x===void 0)return!1;if(typeof x=="function")T(x,this,p);else{var y=x.length,k=l(x,y);for(c=0;c<y;++c)T(k[c],this,p)}return!0},i.prototype.addListener=function(u,p){return s(this,u,p,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(u,p){return s(this,u,p,!0)},i.prototype.once=function(u,p){return v(p),this.on(u,a(this,u,p)),this},i.prototype.prependOnceListener=function(u,p){return v(p),this.prependListener(u,a(this,u,p)),this},i.prototype.removeListener=function(u,p){var c,b,g,d,m;if(v(p),(b=this._events)===void 0)return this;if((c=b[u])===void 0)return this;if(c===p||c.listener===p)--this._eventsCount==0?this._events=Object.create(null):(delete b[u],b.removeListener&&this.emit("removeListener",u,c.listener||p));else if(typeof c!="function"){for(g=-1,d=c.length-1;d>=0;d--)if(c[d]===p||c[d].listener===p){m=c[d].listener,g=d;break}if(g<0)return this;g===0?c.shift():function(x,y){for(;y+1<x.length;y++)x[y]=x[y+1];x.pop()}(c,g),c.length===1&&(b[u]=c[0]),b.removeListener!==void 0&&this.emit("removeListener",u,m||p)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(u){var p,c,b;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[u]),this;if(arguments.length===0){var g,d=Object.keys(c);for(b=0;b<d.length;++b)(g=d[b])!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(p=c[u])=="function")this.removeListener(u,p);else if(p!==void 0)for(b=p.length-1;b>=0;b--)this.removeListener(u,p[b]);return this},i.prototype.listeners=function(u){return n(this,u,!0)},i.prototype.rawListeners=function(u){return n(this,u,!1)},i.listenerCount=function(u,p){return typeof u.listenerCount=="function"?u.listenerCount(p):r.call(u,p)},i.prototype.listenerCount=r,i.prototype.eventNames=function(){return this._eventsCount>0?L(this._events):[]}},60774:function(N){var L=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};N.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return L()}try{return __global__||L()}finally{delete Object.prototype.__global__}}()},94908:function(N,L,e){N.exports=e(51152)()?globalThis:e(60774)},51152:function(N){N.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},92770:function(N,L,e){var T=e(18546);N.exports=function(w){var i=typeof w;if(i==="string"){var _=w;if((w=+w)==0&&T(_))return!1}else if(i!=="number")return!1;return w-w<1}},30120:function(N,L,e){var T=e(90660);N.exports=function(w,i,_){if(!w)throw new TypeError("must specify data as first parameter");if(_=0|+(_||0),Array.isArray(w)&&w[0]&&typeof w[0][0]=="number"){var v,h,s,t,a=w[0].length,n=w.length*a;i&&typeof i!="string"||(i=new(T(i||"float32"))(n+_));var r=i.length-_;if(n!==r)throw new Error("source length "+n+" ("+a+"x"+w.length+") does not match destination length "+r);for(v=0,s=_;v<w.length;v++)for(h=0;h<a;h++)i[s++]=w[v][h]===null?NaN:w[v][h]}else if(i&&typeof i!="string")i.set(w,_);else{var l=T(i||"float32");if(Array.isArray(w)||i==="array")for(v=0,s=_,t=(i=new l(w.length+_)).length;s<t;s++,v++)i[s]=w[v]===null?NaN:w[v];else _===0?i=new l(w):(i=new l(w.length+_)).set(w,_)}return i}},68016:function(N,L,e){var T=e(53313),w=[32,126];N.exports=function(i){var _=(i=i||{}).shape?i.shape:i.canvas?[i.canvas.width,i.canvas.height]:[512,512],v=i.canvas||document.createElement("canvas"),h=i.font,s=typeof i.step=="number"?[i.step,i.step]:i.step||[32,32],t=i.chars||w;if(h&&typeof h!="string"&&(h=T(h)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var a=[],n=t[0],r=0;n<=t[1];n++)a[r++]=String.fromCharCode(n);t=a}}else t=String(t).split("");_=_.slice(),v.width=_[0],v.height=_[1];var l=v.getContext("2d");l.fillStyle="#000",l.fillRect(0,0,v.width,v.height),l.font=h,l.textAlign="center",l.textBaseline="middle",l.fillStyle="#fff";var o=s[0]/2,u=s[1]/2;for(n=0;n<t.length;n++)l.fillText(t[n],o,u),(o+=s[0])>_[0]-s[0]/2&&(o=s[0]/2,u+=s[1]);return v}},32879:function(N){function L(i,_){_||(_={}),(typeof i=="string"||Array.isArray(i))&&(_.family=i);var v=Array.isArray(_.family)?_.family.join(", "):_.family;if(!v)throw Error("`family` must be defined");var h=_.size||_.fontSize||_.em||48,s=_.weight||_.fontWeight||"",t=(i=[_.style||_.fontStyle||"",s,h].join(" ")+"px "+v,_.origin||"top");if(L.cache[v]&&h<=L.cache[v].em)return e(L.cache[v],t);var a=_.canvas||L.canvas,n=a.getContext("2d"),r={upper:_.upper!==void 0?_.upper:"H",lower:_.lower!==void 0?_.lower:"x",descent:_.descent!==void 0?_.descent:"p",ascent:_.ascent!==void 0?_.ascent:"h",tittle:_.tittle!==void 0?_.tittle:"i",overshoot:_.overshoot!==void 0?_.overshoot:"O"},l=Math.ceil(1.5*h);a.height=l,a.width=.5*l,n.font=i;var o="H",u={top:0};n.clearRect(0,0,l,l),n.textBaseline="top",n.fillStyle="black",n.fillText(o,0,0);var p=T(n.getImageData(0,0,l,l));n.clearRect(0,0,l,l),n.textBaseline="bottom",n.fillText(o,0,l);var c=T(n.getImageData(0,0,l,l));u.lineHeight=u.bottom=l-c+p,n.clearRect(0,0,l,l),n.textBaseline="alphabetic",n.fillText(o,0,l);var b=l-T(n.getImageData(0,0,l,l))-1+p;u.baseline=u.alphabetic=b,n.clearRect(0,0,l,l),n.textBaseline="middle",n.fillText(o,0,.5*l);var g=T(n.getImageData(0,0,l,l));u.median=u.middle=l-g-1+p-.5*l,n.clearRect(0,0,l,l),n.textBaseline="hanging",n.fillText(o,0,.5*l);var d=T(n.getImageData(0,0,l,l));u.hanging=l-d-1+p-.5*l,n.clearRect(0,0,l,l),n.textBaseline="ideographic",n.fillText(o,0,l);var m=T(n.getImageData(0,0,l,l));if(u.ideographic=l-m-1+p,r.upper&&(n.clearRect(0,0,l,l),n.textBaseline="top",n.fillText(r.upper,0,0),u.upper=T(n.getImageData(0,0,l,l)),u.capHeight=u.baseline-u.upper),r.lower&&(n.clearRect(0,0,l,l),n.textBaseline="top",n.fillText(r.lower,0,0),u.lower=T(n.getImageData(0,0,l,l)),u.xHeight=u.baseline-u.lower),r.tittle&&(n.clearRect(0,0,l,l),n.textBaseline="top",n.fillText(r.tittle,0,0),u.tittle=T(n.getImageData(0,0,l,l))),r.ascent&&(n.clearRect(0,0,l,l),n.textBaseline="top",n.fillText(r.ascent,0,0),u.ascent=T(n.getImageData(0,0,l,l))),r.descent&&(n.clearRect(0,0,l,l),n.textBaseline="top",n.fillText(r.descent,0,0),u.descent=w(n.getImageData(0,0,l,l))),r.overshoot){n.clearRect(0,0,l,l),n.textBaseline="top",n.fillText(r.overshoot,0,0);var x=w(n.getImageData(0,0,l,l));u.overshoot=x-b}for(var y in u)u[y]/=h;return u.em=h,L.cache[v]=u,e(u,t)}function e(i,_){var v={};for(var h in typeof _=="string"&&(_=i[_]),i)h!=="em"&&(v[h]=i[h]-_);return v}function T(i){for(var _=i.height,v=i.data,h=3;h<v.length;h+=4)if(v[h]!==0)return Math.floor(.25*(h-3)/_)}function w(i){for(var _=i.height,v=i.data,h=v.length-1;h>0;h-=4)if(v[h]!==0)return Math.floor(.25*(h-3)/_)}N.exports=L,L.canvas=document.createElement("canvas"),L.cache={}},31353:function(N,L,e){var T=e(85395),w=Object.prototype.toString,i=Object.prototype.hasOwnProperty;N.exports=function(_,v,h){if(!T(v))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=h),w.call(_)==="[object Array]"?function(t,a,n){for(var r=0,l=t.length;r<l;r++)i.call(t,r)&&(n==null?a(t[r],r,t):a.call(n,t[r],r,t))}(_,v,s):typeof _=="string"?function(t,a,n){for(var r=0,l=t.length;r<l;r++)n==null?a(t.charAt(r),r,t):a.call(n,t.charAt(r),r,t)}(_,v,s):function(t,a,n){for(var r in t)i.call(t,r)&&(n==null?a(t[r],r,t):a.call(n,t[r],r,t))}(_,v,s)}},73047:function(N){var L=Array.prototype.slice,e=Object.prototype.toString;N.exports=function(T){var w=this;if(typeof w!="function"||e.call(w)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+w);for(var i,_=L.call(arguments,1),v=Math.max(0,w.length-_.length),h=[],s=0;s<v;s++)h.push("$"+s);if(i=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var a=w.apply(this,_.concat(L.call(arguments)));return Object(a)===a?a:this}return w.apply(T,_.concat(L.call(arguments)))}),w.prototype){var t=function(){};t.prototype=w.prototype,i.prototype=new t,t.prototype=null}return i}},77575:function(N,L,e){var T=e(73047);N.exports=Function.prototype.bind||T},86249:function(N){N.exports=function(L,e){if(typeof L!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var T=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(T.width=e.width),typeof e.height=="number"&&(T.height=e.height);var w,i=e;try{var _=[L];L.indexOf("webgl")===0&&_.push("experimental-"+L);for(var v=0;v<_.length;v++)if(w=T.getContext(_[v],i))return w}catch{w=null}return w||null}},68318:function(N,L,e){var T,w=SyntaxError,i=Function,_=TypeError,v=function(E){try{return i('"use strict"; return ('+E+").constructor;")()}catch{}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var s=function(){throw new _},t=h?function(){try{return s}catch{try{return h(arguments,"callee").get}catch{return s}}}():s,a=e(57877)(),n=Object.getPrototypeOf||function(E){return E.__proto__},r={},l=typeof Uint8Array>"u"?T:n(Uint8Array),o={"%AggregateError%":typeof AggregateError>"u"?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?T:ArrayBuffer,"%ArrayIteratorPrototype%":a?n([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":r,"%AsyncGenerator%":r,"%AsyncGeneratorFunction%":r,"%AsyncIteratorPrototype%":r,"%Atomics%":typeof Atomics>"u"?T:Atomics,"%BigInt%":typeof BigInt>"u"?T:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?T:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?T:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?T:Float32Array,"%Float64Array%":typeof Float64Array>"u"?T:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?T:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":r,"%Int8Array%":typeof Int8Array>"u"?T:Int8Array,"%Int16Array%":typeof Int16Array>"u"?T:Int16Array,"%Int32Array%":typeof Int32Array>"u"?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":a?n(n([][Symbol.iterator]())):T,"%JSON%":typeof JSON=="object"?JSON:T,"%Map%":typeof Map>"u"?T:Map,"%MapIteratorPrototype%":typeof Map<"u"&&a?n(new Map()[Symbol.iterator]()):T,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?T:Promise,"%Proxy%":typeof Proxy>"u"?T:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?T:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?T:Set,"%SetIteratorPrototype%":typeof Set<"u"&&a?n(new Set()[Symbol.iterator]()):T,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":a?n(""[Symbol.iterator]()):T,"%Symbol%":a?Symbol:T,"%SyntaxError%":w,"%ThrowTypeError%":t,"%TypedArray%":l,"%TypeError%":_,"%Uint8Array%":typeof Uint8Array>"u"?T:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?T:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?T:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?T:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?T:WeakMap,"%WeakRef%":typeof WeakRef>"u"?T:WeakRef,"%WeakSet%":typeof WeakSet>"u"?T:WeakSet};try{null.error}catch(E){var u=n(n(E));o["%Error.prototype%"]=u}var p=function E(O){var P;if(O==="%AsyncFunction%")P=v("async function () {}");else if(O==="%GeneratorFunction%")P=v("function* () {}");else if(O==="%AsyncGeneratorFunction%")P=v("async function* () {}");else if(O==="%AsyncGenerator%"){var I=E("%AsyncGeneratorFunction%");I&&(P=I.prototype)}else if(O==="%AsyncIteratorPrototype%"){var z=E("%AsyncGenerator%");z&&(P=n(z.prototype))}return o[O]=P,P},c={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=e(77575),g=e(35065),d=b.call(Function.call,Array.prototype.concat),m=b.call(Function.apply,Array.prototype.splice),x=b.call(Function.call,String.prototype.replace),y=b.call(Function.call,String.prototype.slice),k=b.call(Function.call,RegExp.prototype.exec),f=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,M=function(E,O){var P,I=E;if(g(c,I)&&(I="%"+(P=c[I])[0]+"%"),g(o,I)){var z=o[I];if(z===r&&(z=p(I)),z===void 0&&!O)throw new _("intrinsic "+E+" exists, but is not available. Please file an issue!");return{alias:P,name:I,value:z}}throw new w("intrinsic "+E+" does not exist!")};N.exports=function(E,O){if(typeof E!="string"||E.length===0)throw new _("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof O!="boolean")throw new _('"allowMissing" argument must be a boolean');if(k(/^%?[^%]*%?$/,E)===null)throw new w("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var P=function(X){var K=y(X,0,1),ee=y(X,-1);if(K==="%"&&ee!=="%")throw new w("invalid intrinsic syntax, expected closing `%`");if(ee==="%"&&K!=="%")throw new w("invalid intrinsic syntax, expected opening `%`");var ie=[];return x(X,f,function(ae,oe,fe,ge){ie[ie.length]=fe?x(ge,S,"$1"):oe||ae}),ie}(E),I=P.length>0?P[0]:"",z=M("%"+I+"%",O),U=z.name,R=z.value,j=!1,Z=z.alias;Z&&(I=Z[0],m(P,d([0,1],Z)));for(var F=1,V=!0;F<P.length;F+=1){var H=P[F],te=y(H,0,1),$=y(H,-1);if((te==='"'||te==="'"||te==="`"||$==='"'||$==="'"||$==="`")&&te!==$)throw new w("property names with quotes must have matching quotes");if(H!=="constructor"&&V||(j=!0),g(o,U="%"+(I+="."+H)+"%"))R=o[U];else if(R!=null){if(!(H in R)){if(!O)throw new _("base intrinsic for "+E+" exists, but the property is not available.");return}if(h&&F+1>=P.length){var J=h(R,H);R=(V=!!J)&&"get"in J&&!("originalValue"in J.get)?J.get:R[H]}else V=g(R,H),R=R[H];V&&!j&&(o[U]=R)}}return R}},85400:function(N){N.exports=function(L,e){var T=e[0],w=e[1],i=e[2],_=e[3],v=e[4],h=e[5],s=e[6],t=e[7],a=e[8],n=e[9],r=e[10],l=e[11],o=e[12],u=e[13],p=e[14],c=e[15];return L[0]=h*(r*c-l*p)-n*(s*c-t*p)+u*(s*l-t*r),L[1]=-(w*(r*c-l*p)-n*(i*c-_*p)+u*(i*l-_*r)),L[2]=w*(s*c-t*p)-h*(i*c-_*p)+u*(i*t-_*s),L[3]=-(w*(s*l-t*r)-h*(i*l-_*r)+n*(i*t-_*s)),L[4]=-(v*(r*c-l*p)-a*(s*c-t*p)+o*(s*l-t*r)),L[5]=T*(r*c-l*p)-a*(i*c-_*p)+o*(i*l-_*r),L[6]=-(T*(s*c-t*p)-v*(i*c-_*p)+o*(i*t-_*s)),L[7]=T*(s*l-t*r)-v*(i*l-_*r)+a*(i*t-_*s),L[8]=v*(n*c-l*u)-a*(h*c-t*u)+o*(h*l-t*n),L[9]=-(T*(n*c-l*u)-a*(w*c-_*u)+o*(w*l-_*n)),L[10]=T*(h*c-t*u)-v*(w*c-_*u)+o*(w*t-_*h),L[11]=-(T*(h*l-t*n)-v*(w*l-_*n)+a*(w*t-_*h)),L[12]=-(v*(n*p-r*u)-a*(h*p-s*u)+o*(h*r-s*n)),L[13]=T*(n*p-r*u)-a*(w*p-i*u)+o*(w*r-i*n),L[14]=-(T*(h*p-s*u)-v*(w*p-i*u)+o*(w*s-i*h)),L[15]=T*(h*r-s*n)-v*(w*r-i*n)+a*(w*s-i*h),L}},42331:function(N){N.exports=function(L){var e=new Float32Array(16);return e[0]=L[0],e[1]=L[1],e[2]=L[2],e[3]=L[3],e[4]=L[4],e[5]=L[5],e[6]=L[6],e[7]=L[7],e[8]=L[8],e[9]=L[9],e[10]=L[10],e[11]=L[11],e[12]=L[12],e[13]=L[13],e[14]=L[14],e[15]=L[15],e}},31042:function(N){N.exports=function(L,e){return L[0]=e[0],L[1]=e[1],L[2]=e[2],L[3]=e[3],L[4]=e[4],L[5]=e[5],L[6]=e[6],L[7]=e[7],L[8]=e[8],L[9]=e[9],L[10]=e[10],L[11]=e[11],L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15],L}},11902:function(N){N.exports=function(){var L=new Float32Array(16);return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},89887:function(N){N.exports=function(L){var e=L[0],T=L[1],w=L[2],i=L[3],_=L[4],v=L[5],h=L[6],s=L[7],t=L[8],a=L[9],n=L[10],r=L[11],l=L[12],o=L[13],u=L[14],p=L[15];return(e*v-T*_)*(n*p-r*u)-(e*h-w*_)*(a*p-r*o)+(e*s-i*_)*(a*u-n*o)+(T*h-w*v)*(t*p-r*l)-(T*s-i*v)*(t*u-n*l)+(w*s-i*h)*(t*o-a*l)}},27812:function(N){N.exports=function(L,e){var T=e[0],w=e[1],i=e[2],_=e[3],v=T+T,h=w+w,s=i+i,t=T*v,a=w*v,n=w*h,r=i*v,l=i*h,o=i*s,u=_*v,p=_*h,c=_*s;return L[0]=1-n-o,L[1]=a+c,L[2]=r-p,L[3]=0,L[4]=a-c,L[5]=1-t-o,L[6]=l+u,L[7]=0,L[8]=r+p,L[9]=l-u,L[10]=1-t-n,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},34045:function(N){N.exports=function(L,e,T){var w,i,_,v=T[0],h=T[1],s=T[2],t=Math.sqrt(v*v+h*h+s*s);return Math.abs(t)<1e-6?null:(v*=t=1/t,h*=t,s*=t,w=Math.sin(e),_=1-(i=Math.cos(e)),L[0]=v*v*_+i,L[1]=h*v*_+s*w,L[2]=s*v*_-h*w,L[3]=0,L[4]=v*h*_-s*w,L[5]=h*h*_+i,L[6]=s*h*_+v*w,L[7]=0,L[8]=v*s*_+h*w,L[9]=h*s*_-v*w,L[10]=s*s*_+i,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L)}},45973:function(N){N.exports=function(L,e,T){var w=e[0],i=e[1],_=e[2],v=e[3],h=w+w,s=i+i,t=_+_,a=w*h,n=w*s,r=w*t,l=i*s,o=i*t,u=_*t,p=v*h,c=v*s,b=v*t;return L[0]=1-(l+u),L[1]=n+b,L[2]=r-c,L[3]=0,L[4]=n-b,L[5]=1-(a+u),L[6]=o+p,L[7]=0,L[8]=r+c,L[9]=o-p,L[10]=1-(a+l),L[11]=0,L[12]=T[0],L[13]=T[1],L[14]=T[2],L[15]=1,L}},81472:function(N){N.exports=function(L,e){return L[0]=e[0],L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=e[1],L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=e[2],L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},14669:function(N){N.exports=function(L,e){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=e[0],L[13]=e[1],L[14]=e[2],L[15]=1,L}},75262:function(N){N.exports=function(L,e){var T=Math.sin(e),w=Math.cos(e);return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=w,L[6]=T,L[7]=0,L[8]=0,L[9]=-T,L[10]=w,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},331:function(N){N.exports=function(L,e){var T=Math.sin(e),w=Math.cos(e);return L[0]=w,L[1]=0,L[2]=-T,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=T,L[9]=0,L[10]=w,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},11049:function(N){N.exports=function(L,e){var T=Math.sin(e),w=Math.cos(e);return L[0]=w,L[1]=T,L[2]=0,L[3]=0,L[4]=-T,L[5]=w,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},75195:function(N){N.exports=function(L,e,T,w,i,_,v){var h=1/(T-e),s=1/(i-w),t=1/(_-v);return L[0]=2*_*h,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=2*_*s,L[6]=0,L[7]=0,L[8]=(T+e)*h,L[9]=(i+w)*s,L[10]=(v+_)*t,L[11]=-1,L[12]=0,L[13]=0,L[14]=v*_*2*t,L[15]=0,L}},71551:function(N){N.exports=function(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},79576:function(N,L,e){N.exports={create:e(11902),clone:e(42331),copy:e(31042),identity:e(71551),transpose:e(88654),invert:e(95874),adjoint:e(85400),determinant:e(89887),multiply:e(91362),translate:e(31283),scale:e(10789),rotate:e(65074),rotateX:e(35545),rotateY:e(94918),rotateZ:e(15692),fromRotation:e(34045),fromRotationTranslation:e(45973),fromScaling:e(81472),fromTranslation:e(14669),fromXRotation:e(75262),fromYRotation:e(331),fromZRotation:e(11049),fromQuat:e(27812),frustum:e(75195),perspective:e(7864),perspectiveFromFieldOfView:e(35279),ortho:e(60378),lookAt:e(65551),str:e(6726)}},95874:function(N){N.exports=function(L,e){var T=e[0],w=e[1],i=e[2],_=e[3],v=e[4],h=e[5],s=e[6],t=e[7],a=e[8],n=e[9],r=e[10],l=e[11],o=e[12],u=e[13],p=e[14],c=e[15],b=T*h-w*v,g=T*s-i*v,d=T*t-_*v,m=w*s-i*h,x=w*t-_*h,y=i*t-_*s,k=a*u-n*o,f=a*p-r*o,S=a*c-l*o,M=n*p-r*u,E=n*c-l*u,O=r*c-l*p,P=b*O-g*E+d*M+m*S-x*f+y*k;return P?(P=1/P,L[0]=(h*O-s*E+t*M)*P,L[1]=(i*E-w*O-_*M)*P,L[2]=(u*y-p*x+c*m)*P,L[3]=(r*x-n*y-l*m)*P,L[4]=(s*S-v*O-t*f)*P,L[5]=(T*O-i*S+_*f)*P,L[6]=(p*d-o*y-c*g)*P,L[7]=(a*y-r*d+l*g)*P,L[8]=(v*E-h*S+t*k)*P,L[9]=(w*S-T*E-_*k)*P,L[10]=(o*x-u*d+c*b)*P,L[11]=(n*d-a*x-l*b)*P,L[12]=(h*f-v*M-s*k)*P,L[13]=(T*M-w*f+i*k)*P,L[14]=(u*g-o*m-p*b)*P,L[15]=(a*m-n*g+r*b)*P,L):null}},65551:function(N,L,e){var T=e(71551);N.exports=function(w,i,_,v){var h,s,t,a,n,r,l,o,u,p,c=i[0],b=i[1],g=i[2],d=v[0],m=v[1],x=v[2],y=_[0],k=_[1],f=_[2];return Math.abs(c-y)<1e-6&&Math.abs(b-k)<1e-6&&Math.abs(g-f)<1e-6?T(w):(l=c-y,o=b-k,u=g-f,h=m*(u*=p=1/Math.sqrt(l*l+o*o+u*u))-x*(o*=p),s=x*(l*=p)-d*u,t=d*o-m*l,(p=Math.sqrt(h*h+s*s+t*t))?(h*=p=1/p,s*=p,t*=p):(h=0,s=0,t=0),a=o*t-u*s,n=u*h-l*t,r=l*s-o*h,(p=Math.sqrt(a*a+n*n+r*r))?(a*=p=1/p,n*=p,r*=p):(a=0,n=0,r=0),w[0]=h,w[1]=a,w[2]=l,w[3]=0,w[4]=s,w[5]=n,w[6]=o,w[7]=0,w[8]=t,w[9]=r,w[10]=u,w[11]=0,w[12]=-(h*c+s*b+t*g),w[13]=-(a*c+n*b+r*g),w[14]=-(l*c+o*b+u*g),w[15]=1,w)}},91362:function(N){N.exports=function(L,e,T){var w=e[0],i=e[1],_=e[2],v=e[3],h=e[4],s=e[5],t=e[6],a=e[7],n=e[8],r=e[9],l=e[10],o=e[11],u=e[12],p=e[13],c=e[14],b=e[15],g=T[0],d=T[1],m=T[2],x=T[3];return L[0]=g*w+d*h+m*n+x*u,L[1]=g*i+d*s+m*r+x*p,L[2]=g*_+d*t+m*l+x*c,L[3]=g*v+d*a+m*o+x*b,g=T[4],d=T[5],m=T[6],x=T[7],L[4]=g*w+d*h+m*n+x*u,L[5]=g*i+d*s+m*r+x*p,L[6]=g*_+d*t+m*l+x*c,L[7]=g*v+d*a+m*o+x*b,g=T[8],d=T[9],m=T[10],x=T[11],L[8]=g*w+d*h+m*n+x*u,L[9]=g*i+d*s+m*r+x*p,L[10]=g*_+d*t+m*l+x*c,L[11]=g*v+d*a+m*o+x*b,g=T[12],d=T[13],m=T[14],x=T[15],L[12]=g*w+d*h+m*n+x*u,L[13]=g*i+d*s+m*r+x*p,L[14]=g*_+d*t+m*l+x*c,L[15]=g*v+d*a+m*o+x*b,L}},60378:function(N){N.exports=function(L,e,T,w,i,_,v){var h=1/(e-T),s=1/(w-i),t=1/(_-v);return L[0]=-2*h,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=-2*s,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=2*t,L[11]=0,L[12]=(e+T)*h,L[13]=(i+w)*s,L[14]=(v+_)*t,L[15]=1,L}},7864:function(N){N.exports=function(L,e,T,w,i){var _=1/Math.tan(e/2),v=1/(w-i);return L[0]=_/T,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=_,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=(i+w)*v,L[11]=-1,L[12]=0,L[13]=0,L[14]=2*i*w*v,L[15]=0,L}},35279:function(N){N.exports=function(L,e,T,w){var i=Math.tan(e.upDegrees*Math.PI/180),_=Math.tan(e.downDegrees*Math.PI/180),v=Math.tan(e.leftDegrees*Math.PI/180),h=Math.tan(e.rightDegrees*Math.PI/180),s=2/(v+h),t=2/(i+_);return L[0]=s,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=t,L[6]=0,L[7]=0,L[8]=-(v-h)*s*.5,L[9]=(i-_)*t*.5,L[10]=w/(T-w),L[11]=-1,L[12]=0,L[13]=0,L[14]=w*T/(T-w),L[15]=0,L}},65074:function(N){N.exports=function(L,e,T,w){var i,_,v,h,s,t,a,n,r,l,o,u,p,c,b,g,d,m,x,y,k,f,S,M,E=w[0],O=w[1],P=w[2],I=Math.sqrt(E*E+O*O+P*P);return Math.abs(I)<1e-6?null:(E*=I=1/I,O*=I,P*=I,i=Math.sin(T),v=1-(_=Math.cos(T)),h=e[0],s=e[1],t=e[2],a=e[3],n=e[4],r=e[5],l=e[6],o=e[7],u=e[8],p=e[9],c=e[10],b=e[11],g=E*E*v+_,d=O*E*v+P*i,m=P*E*v-O*i,x=E*O*v-P*i,y=O*O*v+_,k=P*O*v+E*i,f=E*P*v+O*i,S=O*P*v-E*i,M=P*P*v+_,L[0]=h*g+n*d+u*m,L[1]=s*g+r*d+p*m,L[2]=t*g+l*d+c*m,L[3]=a*g+o*d+b*m,L[4]=h*x+n*y+u*k,L[5]=s*x+r*y+p*k,L[6]=t*x+l*y+c*k,L[7]=a*x+o*y+b*k,L[8]=h*f+n*S+u*M,L[9]=s*f+r*S+p*M,L[10]=t*f+l*S+c*M,L[11]=a*f+o*S+b*M,e!==L&&(L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15]),L)}},35545:function(N){N.exports=function(L,e,T){var w=Math.sin(T),i=Math.cos(T),_=e[4],v=e[5],h=e[6],s=e[7],t=e[8],a=e[9],n=e[10],r=e[11];return e!==L&&(L[0]=e[0],L[1]=e[1],L[2]=e[2],L[3]=e[3],L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15]),L[4]=_*i+t*w,L[5]=v*i+a*w,L[6]=h*i+n*w,L[7]=s*i+r*w,L[8]=t*i-_*w,L[9]=a*i-v*w,L[10]=n*i-h*w,L[11]=r*i-s*w,L}},94918:function(N){N.exports=function(L,e,T){var w=Math.sin(T),i=Math.cos(T),_=e[0],v=e[1],h=e[2],s=e[3],t=e[8],a=e[9],n=e[10],r=e[11];return e!==L&&(L[4]=e[4],L[5]=e[5],L[6]=e[6],L[7]=e[7],L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15]),L[0]=_*i-t*w,L[1]=v*i-a*w,L[2]=h*i-n*w,L[3]=s*i-r*w,L[8]=_*w+t*i,L[9]=v*w+a*i,L[10]=h*w+n*i,L[11]=s*w+r*i,L}},15692:function(N){N.exports=function(L,e,T){var w=Math.sin(T),i=Math.cos(T),_=e[0],v=e[1],h=e[2],s=e[3],t=e[4],a=e[5],n=e[6],r=e[7];return e!==L&&(L[8]=e[8],L[9]=e[9],L[10]=e[10],L[11]=e[11],L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15]),L[0]=_*i+t*w,L[1]=v*i+a*w,L[2]=h*i+n*w,L[3]=s*i+r*w,L[4]=t*i-_*w,L[5]=a*i-v*w,L[6]=n*i-h*w,L[7]=r*i-s*w,L}},10789:function(N){N.exports=function(L,e,T){var w=T[0],i=T[1],_=T[2];return L[0]=e[0]*w,L[1]=e[1]*w,L[2]=e[2]*w,L[3]=e[3]*w,L[4]=e[4]*i,L[5]=e[5]*i,L[6]=e[6]*i,L[7]=e[7]*i,L[8]=e[8]*_,L[9]=e[9]*_,L[10]=e[10]*_,L[11]=e[11]*_,L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15],L}},6726:function(N){N.exports=function(L){return"mat4("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+", "+L[8]+", "+L[9]+", "+L[10]+", "+L[11]+", "+L[12]+", "+L[13]+", "+L[14]+", "+L[15]+")"}},31283:function(N){N.exports=function(L,e,T){var w,i,_,v,h,s,t,a,n,r,l,o,u=T[0],p=T[1],c=T[2];return e===L?(L[12]=e[0]*u+e[4]*p+e[8]*c+e[12],L[13]=e[1]*u+e[5]*p+e[9]*c+e[13],L[14]=e[2]*u+e[6]*p+e[10]*c+e[14],L[15]=e[3]*u+e[7]*p+e[11]*c+e[15]):(w=e[0],i=e[1],_=e[2],v=e[3],h=e[4],s=e[5],t=e[6],a=e[7],n=e[8],r=e[9],l=e[10],o=e[11],L[0]=w,L[1]=i,L[2]=_,L[3]=v,L[4]=h,L[5]=s,L[6]=t,L[7]=a,L[8]=n,L[9]=r,L[10]=l,L[11]=o,L[12]=w*u+h*p+n*c+e[12],L[13]=i*u+s*p+r*c+e[13],L[14]=_*u+t*p+l*c+e[14],L[15]=v*u+a*p+o*c+e[15]),L}},88654:function(N){N.exports=function(L,e){if(L===e){var T=e[1],w=e[2],i=e[3],_=e[6],v=e[7],h=e[11];L[1]=e[4],L[2]=e[8],L[3]=e[12],L[4]=T,L[6]=e[9],L[7]=e[13],L[8]=w,L[9]=_,L[11]=e[14],L[12]=i,L[13]=v,L[14]=h}else L[0]=e[0],L[1]=e[4],L[2]=e[8],L[3]=e[12],L[4]=e[1],L[5]=e[5],L[6]=e[9],L[7]=e[13],L[8]=e[2],L[9]=e[6],L[10]=e[10],L[11]=e[14],L[12]=e[3],L[13]=e[7],L[14]=e[11],L[15]=e[15];return L}},42505:function(N,L,e){var T=e(72791),w=e(71299),i=e(98580),_=e(12018),v=e(83522),h=e(25075),s=e(68016),t=e(58404),a=e(18863),n=e(10973),r=e(25677),l=e(75686),o=e(53545),u=e(56131),p=e(32879),c=e(30120),b=e(13547).nextPow2,g=new v,d=!1;if(document.body){var m=document.body.appendChild(document.createElement("div"));m.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(m).fontStretch&&(d=!0),document.body.removeChild(m)}var x=function(y){(function(k){return typeof k=="function"&&k._gl&&k.prop&&k.texture&&k.buffer})(y)?(y={regl:y},this.gl=y.regl._gl):this.gl=_(y),this.shader=g.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=y.regl||i({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),g.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(n(y)?y:{})};x.prototype.createShader=function(){var y=this.regl,k=y({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:y.prop("count"),offset:y.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:y.this("sizeBuffer")},width:{offset:0,stride:8,buffer:y.this("sizeBuffer")},char:y.this("charBuffer"),position:y.this("position")},uniforms:{atlasSize:function(f,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(f,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(f,S){return S.atlas.texture},charStep:function(f,S){return S.atlas.step},em:function(f,S){return S.atlas.em},color:y.prop("color"),opacity:y.prop("opacity"),viewport:y.this("viewportArray"),scale:y.this("scale"),align:y.prop("align"),baseline:y.prop("baseline"),translate:y.this("translate"),positionOffset:y.prop("positionOffset")},primitive:"points",viewport:y.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:y,draw:k,atlas:{}}},x.prototype.update=function(y){var k=this;if(typeof y=="string")y={text:y};else if(!y)return;(y=w(y,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(y.opacity)?this.opacity=y.opacity.map(function(de){return parseFloat(de)}):this.opacity=parseFloat(y.opacity)),y.viewport!=null&&(this.viewport=a(y.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),y.kerning!=null&&(this.kerning=y.kerning),y.offset!=null&&(typeof y.offset=="number"&&(y.offset=[y.offset,0]),this.positionOffset=c(y.offset)),y.direction&&(this.direction=y.direction),y.range&&(this.range=y.range,this.scale=[1/(y.range[2]-y.range[0]),1/(y.range[3]-y.range[1])],this.translate=[-y.range[0],-y.range[1]]),y.scale&&(this.scale=y.scale),y.translate&&(this.translate=y.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||y.font||(y.font=x.baseFontSize+"px sans-serif");var f,S=!1,M=!1;if(y.font&&(Array.isArray(y.font)?y.font:[y.font]).forEach(function(de,Le){if(typeof de=="string")try{de=T.parse(de)}catch{de=T.parse(x.baseFontSize+"px "+de)}else de=T.parse(T.stringify(de));var we=T.stringify({size:x.baseFontSize,family:de.family,stretch:d?de.stretch:void 0,variant:de.variant,weight:de.weight,style:de.style}),Ee=r(de.size),Oe=Math.round(Ee[0]*l(Ee[1]));if(Oe!==k.fontSize[Le]&&(M=!0,k.fontSize[Le]=Oe),!(k.font[Le]&&we==k.font[Le].baseString||(S=!0,k.font[Le]=x.fonts[we],k.font[Le]))){var Fe=de.family.join(", "),pe=[de.style];de.style!=de.variant&&pe.push(de.variant),de.variant!=de.weight&&pe.push(de.weight),d&&de.weight!=de.stretch&&pe.push(de.stretch),k.font[Le]={baseString:we,family:Fe,weight:de.weight,stretch:de.stretch,style:de.style,variant:de.variant,width:{},kerning:{},metrics:p(Fe,{origin:"top",fontSize:x.baseFontSize,fontStyle:pe.join(" ")})},x.fonts[we]=k.font[Le]}}),(S||M)&&this.font.forEach(function(de,Le){var we=T.stringify({size:k.fontSize[Le],family:de.family,stretch:d?de.stretch:void 0,variant:de.variant,weight:de.weight,style:de.style});if(k.fontAtlas[Le]=k.shader.atlas[we],!k.fontAtlas[Le]){var Ee=de.metrics;k.shader.atlas[we]=k.fontAtlas[Le]={fontString:we,step:2*Math.ceil(k.fontSize[Le]*Ee.bottom*.5),em:k.fontSize[Le],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:k.regl.texture()}}y.text==null&&(y.text=k.text)}),typeof y.text=="string"&&y.position&&y.position.length>2){for(var E=Array(.5*y.position.length),O=0;O<E.length;O++)E[O]=y.text;y.text=E}if(y.text!=null||S){if(this.textOffsets=[0],Array.isArray(y.text)){this.count=y.text[0].length,this.counts=[this.count];for(var P=1;P<y.text.length;P++)this.textOffsets[P]=this.textOffsets[P-1]+y.text[P-1].length,this.count+=y.text[P].length,this.counts.push(y.text[P].length);this.text=y.text.join("")}else this.text=y.text,this.count=this.text.length,this.counts=[this.count];f=[],this.font.forEach(function(de,Le){x.atlasContext.font=de.baseString;for(var we=k.fontAtlas[Le],Ee=0;Ee<k.text.length;Ee++){var Oe=k.text.charAt(Ee);if(we.ids[Oe]==null&&(we.ids[Oe]=we.chars.length,we.chars.push(Oe),f.push(Oe)),de.width[Oe]==null&&(de.width[Oe]=x.atlasContext.measureText(Oe).width/x.baseFontSize,k.kerning)){var Fe=[];for(var pe in de.width)Fe.push(pe+Oe,Oe+pe);u(de.kerning,o(de.family,{pairs:Fe}))}}})}if(y.position)if(y.position.length>2){for(var I=!y.position[0].length,z=t.mallocFloat(2*this.count),U=0,R=0;U<this.counts.length;U++){var j=this.counts[U];if(I)for(var Z=0;Z<j;Z++)z[R++]=y.position[2*U],z[R++]=y.position[2*U+1];else for(var F=0;F<j;F++)z[R++]=y.position[U][0],z[R++]=y.position[U][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),t.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:y.position};if(y.text||S){var V=t.mallocUint8(this.count),H=t.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,$=0;te<this.counts.length;te++){for(var J=this.counts[te],X=this.font[te]||this.font[0],K=this.fontAtlas[te]||this.fontAtlas[0],ee=0;ee<J;ee++){var ie=this.text.charAt($),ae=this.text.charAt($-1);if(V[$]=K.ids[ie],H[2*$]=X.width[ie],ee){var oe=H[2*$-2],fe=H[2*$],ge=H[2*$-1]+.5*oe+.5*fe;if(this.kerning){var ve=X.kerning[ae+ie];ve&&(ge+=.001*ve)}H[2*$+1]=ge}else H[2*$+1]=.5*H[2*$];$++}this.textWidth.push(H.length?.5*H[2*$-2]+H[2*$-1]:0)}y.align||(y.align=this.align),this.charBuffer({data:V,type:"uint8",usage:"stream"}),this.sizeBuffer({data:H,type:"float",usage:"stream"}),t.freeUint8(V),t.freeFloat(H),f.length&&this.font.forEach(function(de,Le){var we=k.fontAtlas[Le],Ee=we.step,Oe=Math.floor(x.maxAtlasSize/Ee),Fe=Math.min(Oe,we.chars.length),pe=Math.ceil(we.chars.length/Fe),be=b(Fe*Ee),Me=b(pe*Ee);we.width=be,we.height=Me,we.rows=pe,we.cols=Fe,we.em&&we.texture({data:s({canvas:x.atlasCanvas,font:we.fontString,chars:we.chars,shape:[be,Me],step:[Ee,Ee]})})})}if(y.align&&(this.align=y.align,this.alignOffset=this.textWidth.map(function(de,Le){var we=Array.isArray(k.align)?k.align.length>1?k.align[Le]:k.align[0]:k.align;if(typeof we=="number")return we;switch(we){case"right":case"end":return-de;case"center":case"centre":case"middle":return .5*-de}return 0})),this.baseline==null&&y.baseline==null&&(y.baseline=0),y.baseline!=null&&(this.baseline=y.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(de,Le){var we=(k.font[Le]||k.font[0]).metrics,Ee=0;return Ee+=.5*we.bottom,-1*(Ee+=typeof de=="number"?de-we.baseline:-we[de])})),y.color!=null)if(y.color||(y.color="transparent"),typeof y.color!="string"&&isNaN(y.color)){var xe;if(typeof y.color[0]=="number"&&y.color.length>this.counts.length){var _e=y.color.length;xe=t.mallocUint8(_e);for(var ye=(y.color.subarray||y.color.slice).bind(y.color),Ce=0;Ce<_e;Ce+=4)xe.set(h(ye(Ce,Ce+4),"uint8"),Ce)}else{var ke=y.color.length;xe=t.mallocUint8(4*ke);for(var Te=0;Te<ke;Te++)xe.set(h(y.color[Te]||0,"uint8"),4*Te)}this.color=xe}else this.color=h(y.color,"uint8");if(y.position||y.text||y.color||y.baseline||y.align||y.font||y.offset||y.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var le=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(le);for(var ue=0;ue<this.batch.length;ue++)this.batch[ue]={count:this.counts.length>1?this.counts[ue]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ue]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ue,4*ue+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ue]:this.opacity,baseline:this.baselineOffset[ue]!=null?this.baselineOffset[ue]:this.baselineOffset[0],align:this.align?this.alignOffset[ue]!=null?this.alignOffset[ue]:this.alignOffset[0]:0,atlas:this.fontAtlas[ue]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ue,2*ue+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},x.prototype.destroy=function(){},x.prototype.kerning=!0,x.prototype.position={constant:new Float32Array(2)},x.prototype.translate=null,x.prototype.scale=null,x.prototype.font=null,x.prototype.text="",x.prototype.positionOffset=[0,0],x.prototype.opacity=1,x.prototype.color=new Uint8Array([0,0,0,255]),x.prototype.alignOffset=[0,0],x.maxAtlasSize=1024,x.atlasCanvas=document.createElement("canvas"),x.atlasContext=x.atlasCanvas.getContext("2d",{alpha:!1}),x.baseFontSize=64,x.fonts={},N.exports=x},12018:function(N,L,e){var T=e(71299);function w(v){if(v.container)if(v.container==document.body)document.body.style.width||(v.canvas.width=v.width||v.pixelRatio*e.g.innerWidth),document.body.style.height||(v.canvas.height=v.height||v.pixelRatio*e.g.innerHeight);else{var h=v.container.getBoundingClientRect();v.canvas.width=v.width||h.right-h.left,v.canvas.height=v.height||h.bottom-h.top}}function i(v){return typeof v.getContext=="function"&&"width"in v&&"height"in v}function _(){var v=document.createElement("canvas");return v.style.position="absolute",v.style.top=0,v.style.left=0,v}N.exports=function(v){var h;if(v?typeof v=="string"&&(v={container:v}):v={},(v=i(v)||typeof(h=v).nodeName=="string"&&typeof h.appendChild=="function"&&typeof h.getBoundingClientRect=="function"?{container:v}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(v)?{gl:v}:T(v,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(v.pixelRatio=e.g.pixelRatio||1),v.gl)return v.gl;if(v.canvas&&(v.container=v.canvas.parentNode),v.container){if(typeof v.container=="string"){var s=document.querySelector(v.container);if(!s)throw Error("Element "+v.container+" is not found");v.container=s}i(v.container)?(v.canvas=v.container,v.container=v.canvas.parentNode):v.canvas||(v.canvas=_(),v.container.appendChild(v.canvas),w(v))}else if(!v.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");v.container=document.body||document.documentElement,v.canvas=_(),v.container.appendChild(v.canvas),w(v)}return v.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{v.gl=v.canvas.getContext(t,v.attrs)}catch{}return v.gl}),v.gl}},56068:function(N){N.exports=function(L){typeof L=="string"&&(L=[L]);for(var e=[].slice.call(arguments,1),T=[],w=0;w<L.length-1;w++)T.push(L[w],e[w]||"");return T.push(L[w]),T.join("")}},40383:function(N,L,e){var T=e(68318)("%Object.getOwnPropertyDescriptor%",!0);if(T)try{T([],"length")}catch{T=null}N.exports=T},57035:function(N,L,e){var T,w=e(54404);T=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:w,N.exports=T},38520:function(N,L,e){var T=e(54404);N.exports=T&&function(){var w=!1;try{var i=Object.defineProperty({},"passive",{get:function(){w=!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch{w=!1}return w}()},55622:function(N,L,e){var T=e(68318)("%Object.defineProperty%",!0),w=function(){if(T)try{return T({},"a",{value:1}),!0}catch{return!1}return!1};w.hasArrayLengthDefineBug=function(){if(!w())return null;try{return T([],"length",{value:1}).length!==1}catch{return!0}},N.exports=w},57877:function(N,L,e){var T=typeof Symbol<"u"&&Symbol,w=e(35638);N.exports=function(){return typeof T=="function"&&typeof Symbol=="function"&&typeof T("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&w()}},35638:function(N){N.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var L={},e=Symbol("test"),T=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(T)!=="[object Symbol]")return!1;for(e in L[e]=42,L)return!1;if(typeof Object.keys=="function"&&Object.keys(L).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(L).length!==0)return!1;var w=Object.getOwnPropertySymbols(L);if(w.length!==1||w[0]!==e||!Object.prototype.propertyIsEnumerable.call(L,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(L,e);if(i.value!==42||i.enumerable!==!0)return!1}return!0}},84543:function(N,L,e){var T=e(35638);N.exports=function(){return T()&&!!Symbol.toStringTag}},35065:function(N,L,e){var T=e(77575);N.exports=T.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(N,L){L.read=function(e,T,w,i,_){var v,h,s=8*_-i-1,t=(1<<s)-1,a=t>>1,n=-7,r=w?_-1:0,l=w?-1:1,o=e[T+r];for(r+=l,v=o&(1<<-n)-1,o>>=-n,n+=s;n>0;v=256*v+e[T+r],r+=l,n-=8);for(h=v&(1<<-n)-1,v>>=-n,n+=i;n>0;h=256*h+e[T+r],r+=l,n-=8);if(v===0)v=1-a;else{if(v===t)return h?NaN:1/0*(o?-1:1);h+=Math.pow(2,i),v-=a}return(o?-1:1)*h*Math.pow(2,v-i)},L.write=function(e,T,w,i,_,v){var h,s,t,a=8*v-_-1,n=(1<<a)-1,r=n>>1,l=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,o=i?0:v-1,u=i?1:-1,p=T<0||T===0&&1/T<0?1:0;for(T=Math.abs(T),isNaN(T)||T===1/0?(s=isNaN(T)?1:0,h=n):(h=Math.floor(Math.log(T)/Math.LN2),T*(t=Math.pow(2,-h))<1&&(h--,t*=2),(T+=h+r>=1?l/t:l*Math.pow(2,1-r))*t>=2&&(h++,t/=2),h+r>=n?(s=0,h=n):h+r>=1?(s=(T*t-1)*Math.pow(2,_),h+=r):(s=T*Math.pow(2,r-1)*Math.pow(2,_),h=0));_>=8;e[w+o]=255&s,o+=u,s/=256,_-=8);for(h=h<<_|s,a+=_;a>0;e[w+o]=255&h,o+=u,h/=256,a-=8);e[w+o-u]|=128*p}},42018:function(N){typeof Object.create=="function"?N.exports=function(L,e){e&&(L.super_=e,L.prototype=Object.create(e.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}))}:N.exports=function(L,e){if(e){L.super_=e;var T=function(){};T.prototype=e.prototype,L.prototype=new T,L.prototype.constructor=L}}},47216:function(N,L,e){var T=e(84543)(),w=e(6614)("Object.prototype.toString"),i=function(h){return!(T&&h&&typeof h=="object"&&Symbol.toStringTag in h)&&w(h)==="[object Arguments]"},_=function(h){return!!i(h)||h!==null&&typeof h=="object"&&typeof h.length=="number"&&h.length>=0&&w(h)!=="[object Array]"&&w(h.callee)==="[object Function]"},v=function(){return i(arguments)}();i.isLegacyArguments=_,N.exports=v?i:_},54404:function(N){N.exports=!0},85395:function(N){var L,e,T=Function.prototype.toString,w=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof w=="function"&&typeof Object.defineProperty=="function")try{L=Object.defineProperty({},"length",{get:function(){throw e}}),e={},w(function(){throw 42},null,L)}catch(r){r!==e&&(w=null)}else w=null;var i=/^\s*class\b/,_=function(r){try{var l=T.call(r);return i.test(l)}catch{return!1}},v=function(r){try{return!_(r)&&(T.call(r),!0)}catch{return!1}},h=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),a=function(){return!1};if(typeof document=="object"){var n=document.all;h.call(n)===h.call(document.all)&&(a=function(r){if((t||!r)&&(r===void 0||typeof r=="object"))try{var l=h.call(r);return(l==="[object HTMLAllCollection]"||l==="[object HTML document.all class]"||l==="[object HTMLCollection]"||l==="[object Object]")&&r("")==null}catch{}return!1})}N.exports=w?function(r){if(a(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;try{w(r,null,L)}catch(l){if(l!==e)return!1}return!_(r)&&v(r)}:function(r){if(a(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;if(s)return v(r);if(_(r))return!1;var l=h.call(r);return!(l!=="[object Function]"&&l!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(l))&&v(r)}},65481:function(N,L,e){var T,w=Object.prototype.toString,i=Function.prototype.toString,_=/^\s*(?:function)?\*/,v=e(84543)(),h=Object.getPrototypeOf;N.exports=function(s){if(typeof s!="function")return!1;if(_.test(i.call(s)))return!0;if(!v)return w.call(s)==="[object GeneratorFunction]";if(!h)return!1;if(T===void 0){var t=function(){if(!v)return!1;try{return Function("return function*() {}")()}catch{}}();T=!!t&&h(t)}return h(s)===T}},62683:function(N){N.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(N){N.exports=function(L){return L!=L}},15567:function(N,L,e){var T=e(68222),w=e(17045),i=e(64274),_=e(14922),v=e(22442),h=T(_(),Number);w(h,{getPolyfill:_,implementation:i,shim:v}),N.exports=h},14922:function(N,L,e){var T=e(64274);N.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:T}},22442:function(N,L,e){var T=e(17045),w=e(14922);N.exports=function(){var i=w();return T(Number,{isNaN:i},{isNaN:function(){return Number.isNaN!==i}}),i}},64941:function(N){N.exports=function(L){var e=typeof L;return L!==null&&(e==="object"||e==="function")}},10973:function(N){var L=Object.prototype.toString;N.exports=function(e){var T;return L.call(e)==="[object Object]"&&((T=Object.getPrototypeOf(e))===null||T===Object.getPrototypeOf({}))}},18546:function(N){N.exports=function(L){for(var e,T=L.length,w=0;w<T;w++)if(((e=L.charCodeAt(w))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},89546:function(N){N.exports=function(L){return typeof L=="string"&&(L=L.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(L)&&/[\dz]$/i.test(L)&&L.length>4))}},9187:function(N,L,e){var T=e(31353),w=e(72077),i=e(6614),_=i("Object.prototype.toString"),v=e(84543)(),h=e(40383),s=typeof globalThis>"u"?e.g:globalThis,t=w(),a=i("Array.prototype.indexOf",!0)||function(o,u){for(var p=0;p<o.length;p+=1)if(o[p]===u)return p;return-1},n=i("String.prototype.slice"),r={},l=Object.getPrototypeOf;v&&h&&l&&T(t,function(o){var u=new s[o];if(Symbol.toStringTag in u){var p=l(u),c=h(p,Symbol.toStringTag);if(!c){var b=l(p);c=h(b,Symbol.toStringTag)}r[o]=c.get}}),N.exports=function(o){if(!o||typeof o!="object")return!1;if(!v||!(Symbol.toStringTag in o)){var u=n(_(o),8,-1);return a(t,u)>-1}return!!h&&function(p){var c=!1;return T(r,function(b,g){if(!c)try{c=b.call(p)===g}catch{}}),c}(o)}},27084:function(N){N.exports=Math.log2||function(L){return Math.log(L)*Math.LOG2E}},16825:function(N,L,e){N.exports=function(w,i){i||(i=w,w=window);var _=0,v=0,h=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function a(d){var m=!1;return"altKey"in d&&(m=m||d.altKey!==s.alt,s.alt=!!d.altKey),"shiftKey"in d&&(m=m||d.shiftKey!==s.shift,s.shift=!!d.shiftKey),"ctrlKey"in d&&(m=m||d.ctrlKey!==s.control,s.control=!!d.ctrlKey),"metaKey"in d&&(m=m||d.metaKey!==s.meta,s.meta=!!d.metaKey),m}function n(d,m){var x=T.x(m),y=T.y(m);"buttons"in m&&(d=0|m.buttons),(d!==_||x!==v||y!==h||a(m))&&(_=0|d,v=x||0,h=y||0,i&&i(_,v,h,s))}function r(d){n(0,d)}function l(){(_||v||h||s.shift||s.alt||s.meta||s.control)&&(v=h=0,_=0,s.shift=s.alt=s.control=s.meta=!1,i&&i(0,0,0,s))}function o(d){a(d)&&i&&i(_,v,h,s)}function u(d){T.buttons(d)===0?n(0,d):n(_,d)}function p(d){n(_|T.buttons(d),d)}function c(d){n(_&~T.buttons(d),d)}function b(){t||(t=!0,w.addEventListener("mousemove",u),w.addEventListener("mousedown",p),w.addEventListener("mouseup",c),w.addEventListener("mouseleave",r),w.addEventListener("mouseenter",r),w.addEventListener("mouseout",r),w.addEventListener("mouseover",r),w.addEventListener("blur",l),w.addEventListener("keyup",o),w.addEventListener("keydown",o),w.addEventListener("keypress",o),w!==window&&(window.addEventListener("blur",l),window.addEventListener("keyup",o),window.addEventListener("keydown",o),window.addEventListener("keypress",o)))}b();var g={element:w};return Object.defineProperties(g,{enabled:{get:function(){return t},set:function(d){d?b():t&&(t=!1,w.removeEventListener("mousemove",u),w.removeEventListener("mousedown",p),w.removeEventListener("mouseup",c),w.removeEventListener("mouseleave",r),w.removeEventListener("mouseenter",r),w.removeEventListener("mouseout",r),w.removeEventListener("mouseover",r),w.removeEventListener("blur",l),w.removeEventListener("keyup",o),w.removeEventListener("keydown",o),w.removeEventListener("keypress",o),w!==window&&(window.removeEventListener("blur",l),window.removeEventListener("keyup",o),window.removeEventListener("keydown",o),window.removeEventListener("keypress",o)))},enumerable:!0},buttons:{get:function(){return _},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return h},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),g};var T=e(74311)},48956:function(N){var L={left:0,top:0};N.exports=function(e,T,w){T=T||e.currentTarget||e.srcElement,Array.isArray(w)||(w=[0,0]);var i,_=e.clientX||0,v=e.clientY||0,h=(i=T)===window||i===document||i===document.body?L:i.getBoundingClientRect();return w[0]=_-h.left,w[1]=v-h.top,w}},74311:function(N,L){function e(T){return T.target||T.srcElement||window}L.buttons=function(T){if(typeof T=="object"){if("buttons"in T)return T.buttons;if("which"in T){if((w=T.which)===2)return 4;if(w===3)return 2;if(w>0)return 1<<w-1}else if("button"in T){var w;if((w=T.button)===1)return 4;if(w===2)return 2;if(w>=0)return 1<<w}}return 0},L.element=e,L.x=function(T){if(typeof T=="object"){if("offsetX"in T)return T.offsetX;var w=e(T).getBoundingClientRect();return T.clientX-w.left}return 0},L.y=function(T){if(typeof T=="object"){if("offsetY"in T)return T.offsetY;var w=e(T).getBoundingClientRect();return T.clientY-w.top}return 0}},1195:function(N,L,e){var T=e(75686);N.exports=function(w,i,_){typeof w=="function"&&(_=!!i,i=w,w=window);var v=T("ex",w),h=function(s){_&&s.preventDefault();var t=s.deltaX||0,a=s.deltaY||0,n=s.deltaZ||0,r=1;switch(s.deltaMode){case 1:r=v;break;case 2:r=window.innerHeight}if(a*=r,n*=r,(t*=r)||a||n)return i(t,a,n,s)};return w.addEventListener("wheel",h),h}},7417:function(N,L,e){var T;(function(w,i,_){i[w]=i[w]||function(){var v,h,s,t=Object.prototype.toString,a=typeof setImmediate<"u"?function(x){return setImmediate(x)}:setTimeout;try{Object.defineProperty({},"x",{}),v=function(x,y,k,f){return Object.defineProperty(x,y,{value:k,writable:!0,configurable:f!==!1})}}catch{v=function(y,k,f){return y[k]=f,y}}function n(x,y){s.add(x,y),h||(h=a(s.drain))}function r(x){var y,k=typeof x;return x==null||k!="object"&&k!="function"||(y=x.then),typeof y=="function"&&y}function l(){for(var x=0;x<this.chain.length;x++)o(this,this.state===1?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function o(x,y,k){var f,S;try{y===!1?k.reject(x.msg):(f=y===!0?x.msg:y.call(void 0,x.msg))===k.promise?k.reject(TypeError("Promise-chain cycle")):(S=r(f))?S.call(f,k.resolve,k.reject):k.resolve(f)}catch(M){k.reject(M)}}function u(x){var y,k=this;if(!k.triggered){k.triggered=!0,k.def&&(k=k.def);try{(y=r(x))?n(function(){var f=new b(k);try{y.call(x,function(){u.apply(f,arguments)},function(){p.apply(f,arguments)})}catch(S){p.call(f,S)}}):(k.msg=x,k.state=1,k.chain.length>0&&n(l,k))}catch(f){p.call(new b(k),f)}}}function p(x){var y=this;y.triggered||(y.triggered=!0,y.def&&(y=y.def),y.msg=x,y.state=2,y.chain.length>0&&n(l,y))}function c(x,y,k,f){for(var S=0;S<y.length;S++)(function(M){x.resolve(y[M]).then(function(E){k(M,E)},f)})(S)}function b(x){this.def=x,this.triggered=!1}function g(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function d(x){if(typeof x!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var y=new g(this);this.then=function(k,f){var S={success:typeof k!="function"||k,failure:typeof f=="function"&&f};return S.promise=new this.constructor(function(M,E){if(typeof M!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=M,S.reject=E}),y.chain.push(S),y.state!==0&&n(l,y),S.promise},this.catch=function(k){return this.then(void 0,k)};try{x.call(void 0,function(k){u.call(y,k)},function(k){p.call(y,k)})}catch(k){p.call(y,k)}}s=function(){var x,y,k;function f(S,M){this.fn=S,this.self=M,this.next=void 0}return{add:function(S,M){k=new f(S,M),y?y.next=k:x=k,y=k,k=void 0},drain:function(){var S=x;for(x=y=h=void 0;S;)S.fn.call(S.self),S=S.next}}}();var m=v({},"constructor",d,!1);return d.prototype=m,v(m,"__NPO__",0,!1),v(d,"resolve",function(x){return x&&typeof x=="object"&&x.__NPO__===1?x:new this(function(y,k){if(typeof y!="function"||typeof k!="function")throw TypeError("Not a function");y(x)})}),v(d,"reject",function(x){return new this(function(y,k){if(typeof y!="function"||typeof k!="function")throw TypeError("Not a function");k(x)})}),v(d,"all",function(x){var y=this;return t.call(x)!="[object Array]"?y.reject(TypeError("Not an array")):x.length===0?y.resolve([]):new y(function(k,f){if(typeof k!="function"||typeof f!="function")throw TypeError("Not a function");var S=x.length,M=Array(S),E=0;c(y,x,function(O,P){M[O]=P,++E===S&&k(M)},f)})}),v(d,"race",function(x){var y=this;return t.call(x)!="[object Array]"?y.reject(TypeError("Not an array")):new y(function(k,f){if(typeof k!="function"||typeof f!="function")throw TypeError("Not a function");c(y,x,function(S,M){k(M)},f)})}),d}(),N.exports?N.exports=i[w]:(T=(function(){return i[w]}).call(L,e,L,N))===void 0||(N.exports=T)})("Promise",e.g!==void 0?e.g:this)},18625:function(N){var L=Math.PI,e=v(120);function T(h,s,t,a){return["C",h,s,t,a,t,a]}function w(h,s,t,a,n,r){return["C",h/3+.6666666666666666*t,s/3+.6666666666666666*a,n/3+.6666666666666666*t,r/3+.6666666666666666*a,n,r]}function i(h,s,t,a,n,r,l,o,u,p){if(p)S=p[0],M=p[1],k=p[2],f=p[3];else{var c=_(h,s,-n);h=c.x,s=c.y;var b=(h-(o=(c=_(o,u,-n)).x))/2,g=(s-(u=c.y))/2,d=b*b/(t*t)+g*g/(a*a);d>1&&(t*=d=Math.sqrt(d),a*=d);var m=t*t,x=a*a,y=(r==l?-1:1)*Math.sqrt(Math.abs((m*x-m*g*g-x*b*b)/(m*g*g+x*b*b)));y==1/0&&(y=1);var k=y*t*g/a+(h+o)/2,f=y*-a*b/t+(s+u)/2,S=Math.asin(((s-f)/a).toFixed(9)),M=Math.asin(((u-f)/a).toFixed(9));(S=h<k?L-S:S)<0&&(S=2*L+S),(M=o<k?L-M:M)<0&&(M=2*L+M),l&&S>M&&(S-=2*L),!l&&M>S&&(M-=2*L)}if(Math.abs(M-S)>e){var E=M,O=o,P=u;M=S+e*(l&&M>S?1:-1);var I=i(o=k+t*Math.cos(M),u=f+a*Math.sin(M),t,a,n,0,l,O,P,[M,E,k,f])}var z=Math.tan((M-S)/4),U=4/3*t*z,R=4/3*a*z,j=[2*h-(h+U*Math.sin(S)),2*s-(s-R*Math.cos(S)),o+U*Math.sin(M),u-R*Math.cos(M),o,u];if(p)return j;I&&(j=j.concat(I));for(var Z=0;Z<j.length;){var F=_(j[Z],j[Z+1],n);j[Z++]=F.x,j[Z++]=F.y}return j}function _(h,s,t){return{x:h*Math.cos(t)-s*Math.sin(t),y:h*Math.sin(t)+s*Math.cos(t)}}function v(h){return h*(L/180)}N.exports=function(h){for(var s,t=[],a=0,n=0,r=0,l=0,o=null,u=null,p=0,c=0,b=0,g=h.length;b<g;b++){var d=h[b],m=d[0];switch(m){case"M":r=d[1],l=d[2];break;case"A":(d=i(p,c,d[1],d[2],v(d[3]),d[4],d[5],d[6],d[7])).unshift("C"),d.length>7&&(t.push(d.splice(0,7)),d.unshift("C"));break;case"S":var x=p,y=c;s!="C"&&s!="S"||(x+=x-a,y+=y-n),d=["C",x,y,d[1],d[2],d[3],d[4]];break;case"T":s=="Q"||s=="T"?(o=2*p-o,u=2*c-u):(o=p,u=c),d=w(p,c,o,u,d[1],d[2]);break;case"Q":o=d[1],u=d[2],d=w(p,c,d[1],d[2],d[3],d[4]);break;case"L":d=T(p,c,d[1],d[2]);break;case"H":d=T(p,c,d[1],c);break;case"V":d=T(p,c,p,d[1]);break;case"Z":d=T(p,c,r,l)}s=m,p=d[d.length-2],c=d[d.length-1],d.length>4?(a=d[d.length-4],n=d[d.length-3]):(a=p,n=c),t.push(d)}return t}},56131:function(N){var L=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;N.exports=function(){try{if(!Object.assign)return!1;var w=new String("abc");if(w[5]="de",Object.getOwnPropertyNames(w)[0]==="5")return!1;for(var i={},_=0;_<10;_++)i["_"+String.fromCharCode(_)]=_;if(Object.getOwnPropertyNames(i).map(function(h){return i[h]}).join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(h){v[h]=h}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(w,i){for(var _,v,h=function(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}(w),s=1;s<arguments.length;s++){for(var t in _=Object(arguments[s]))e.call(_,t)&&(h[t]=_[t]);if(L){v=L(_);for(var a=0;a<v.length;a++)T.call(_,v[a])&&(h[v[a]]=_[v[a]])}}return h}},65848:function(N){var L=function(e){return e!=e};N.exports=function(e,T){return e===0&&T===0?1/e==1/T:e===T||!(!L(e)||!L(T))}},64003:function(N,L,e){var T=e(17045),w=e(68222),i=e(65848),_=e(27015),v=e(55572),h=w(_(),Object);T(h,{getPolyfill:_,implementation:i,shim:v}),N.exports=h},27015:function(N,L,e){var T=e(65848);N.exports=function(){return typeof Object.is=="function"?Object.is:T}},55572:function(N,L,e){var T=e(27015),w=e(17045);N.exports=function(){var i=T();return w(Object,{is:i},{is:function(){return Object.is!==i}}),i}},99019:function(N,L,e){var T;if(!Object.keys){var w=Object.prototype.hasOwnProperty,i=Object.prototype.toString,_=e(64178),v=Object.prototype.propertyIsEnumerable,h=!v.call({toString:null},"toString"),s=v.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=function(l){var o=l.constructor;return o&&o.prototype===l},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},r=function(){if(typeof window>"u")return!1;for(var l in window)try{if(!n["$"+l]&&w.call(window,l)&&window[l]!==null&&typeof window[l]=="object")try{a(window[l])}catch{return!0}}catch{return!0}return!1}();T=function(l){var o=l!==null&&typeof l=="object",u=i.call(l)==="[object Function]",p=_(l),c=o&&i.call(l)==="[object String]",b=[];if(!o&&!u&&!p)throw new TypeError("Object.keys called on a non-object");var g=s&&u;if(c&&l.length>0&&!w.call(l,0))for(var d=0;d<l.length;++d)b.push(String(d));if(p&&l.length>0)for(var m=0;m<l.length;++m)b.push(String(m));else for(var x in l)g&&x==="prototype"||!w.call(l,x)||b.push(String(x));if(h)for(var y=function(f){if(typeof window>"u"||!r)return a(f);try{return a(f)}catch{return!1}}(l),k=0;k<t.length;++k)y&&t[k]==="constructor"||!w.call(l,t[k])||b.push(t[k]);return b}}N.exports=T},8709:function(N,L,e){var T=Array.prototype.slice,w=e(64178),i=Object.keys,_=i?function(h){return i(h)}:e(99019),v=Object.keys;_.shim=function(){if(Object.keys){var h=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);h||(Object.keys=function(s){return w(s)?v(T.call(s)):v(s)})}else Object.keys=_;return Object.keys||_},N.exports=_},64178:function(N){var L=Object.prototype.toString;N.exports=function(e){var T=L.call(e),w=T==="[object Arguments]";return w||(w=T!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&L.call(e.callee)==="[object Function]"),w}},88641:function(N){function L(w,i){if(typeof w!="string")return[w];var _=[w];typeof i=="string"||Array.isArray(i)?i={brackets:i}:i||(i={});var v=i.brackets?Array.isArray(i.brackets)?i.brackets:[i.brackets]:["{}","[]","()"],h=i.escape||"___",s=!!i.flat;v.forEach(function(a){var n=new RegExp(["\\",a[0],"[^\\",a[0],"\\",a[1],"]*\\",a[1]].join("")),r=[];function l(o,u,p){var c=_.push(o.slice(a[0].length,-a[1].length))-1;return r.push(c),h+c+h}_.forEach(function(o,u){for(var p,c=0;o!=p;)if(p=o,o=o.replace(n,l),c++>1e4)throw Error("References have circular dependency. Please, check them.");_[u]=o}),r=r.reverse(),_=_.map(function(o){return r.forEach(function(u){o=o.replace(new RegExp("(\\"+h+u+"\\"+h+")","g"),a[0]+"$1"+a[1])}),o})});var t=new RegExp("\\"+h+"([0-9]+)\\"+h);return s?_:function a(n,r,l){for(var o,u=[],p=0;o=t.exec(n);){if(p++>1e4)throw Error("Circular references in parenthesis");u.push(n.slice(0,o.index)),u.push(a(r[o[1]],r)),n=n.slice(o.index+o[0].length)}return u.push(n),u}(_[0],_)}function e(w,i){if(i&&i.flat){var _,v=i&&i.escape||"___",h=w[0];if(!h)return"";for(var s=new RegExp("\\"+v+"([0-9]+)\\"+v),t=0;h!=_;){if(t++>1e4)throw Error("Circular references in "+w);_=h,h=h.replace(s,a)}return h}return w.reduce(function n(r,l){return Array.isArray(l)&&(l=l.reduce(n,"")),r+l},"");function a(n,r){if(w[r]==null)throw Error("Reference "+r+"is undefined");return w[r]}}function T(w,i){return Array.isArray(w)?e(w,i):L(w,i)}T.parse=L,T.stringify=e,N.exports=T},18863:function(N,L,e){var T=e(71299);N.exports=function(w){var i;return arguments.length>1&&(w=arguments),typeof w=="string"?w=w.split(/\s/).map(parseFloat):typeof w=="number"&&(w=[w]),w.length&&typeof w[0]=="number"?i=w.length===1?{width:w[0],height:w[0],x:0,y:0}:w.length===2?{width:w[0],height:w[1],x:0,y:0}:{x:w[0],y:w[1],width:w[2]-w[0]||0,height:w[3]-w[1]||0}:w&&(i={x:(w=T(w,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:w.top||0},w.width==null?w.right?i.width=w.right-i.x:i.width=0:i.width=w.width,w.height==null?w.bottom?i.height=w.bottom-i.y:i.height=0:i.height=w.height),i}},95616:function(N){N.exports=function(w){var i=[];return w.replace(e,function(_,v,h){var s=v.toLowerCase();for(h=function(t){var a=t.match(T);return a?a.map(Number):[]}(h),s=="m"&&h.length>2&&(i.push([v].concat(h.splice(0,2))),s="l",v=v=="m"?"l":"L");;){if(h.length==L[s])return h.unshift(v),i.push(h);if(h.length<L[s])throw new Error("malformed path data");i.push([v].concat(h.splice(0,L[s])))}}),i};var L={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(N){N.exports=function(L,e){e||(e=[0,""]),L=String(L);var T=parseFloat(L,10);return e[0]=T,e[1]=L.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},9748:function(N,L,e){var T=e(90386);(function(){var w,i,_,v,h,s;typeof performance<"u"&&performance!==null&&performance.now?N.exports=function(){return performance.now()}:T!=null&&T.hrtime?(N.exports=function(){return(w()-h)/1e6},i=T.hrtime,v=(w=function(){var t;return 1e9*(t=i())[0]+t[1]})(),s=1e9*T.uptime(),h=v-s):Date.now?(N.exports=function(){return Date.now()-_},_=Date.now()):(N.exports=function(){return new Date().getTime()-_},_=new Date().getTime())}).call(this)},71299:function(N){N.exports=function(T,w,i){var _,v,h={};if(typeof w=="string"&&(w=e(w)),Array.isArray(w)){var s={};for(v=0;v<w.length;v++)s[w[v]]=!0;w=s}for(_ in w)w[_]=e(w[_]);var t={};for(_ in w){var a=w[_];if(Array.isArray(a))for(v=0;v<a.length;v++){var n=a[v];if(i&&(t[n]=!0),n in T){if(h[_]=T[n],i)for(var r=v;r<a.length;r++)t[a[r]]=!0;break}}else _ in T&&(w[_]&&(h[_]=T[_]),i&&(t[_]=!0))}if(i)for(_ in T)t[_]||(h[_]=T[_]);return h};var L={};function e(T){return L[T]?L[T]:(typeof T=="string"&&(T=L[T]=T.split(/\s*,\s*|\s+/)),T)}},38258:function(N){N.exports=function(L,e,T,w){var i=L[0],_=L[1],v=!1;T===void 0&&(T=0),w===void 0&&(w=e.length);for(var h=w-T,s=0,t=h-1;s<h;t=s++){var a=e[s+T][0],n=e[s+T][1],r=e[t+T][0],l=e[t+T][1];n>_!=l>_&&i<(r-a)*(_-n)/(l-n)+a&&(v=!v)}return v}},52142:function(N,L,e){var T,w=e(69444),i=e(29023),_=e(87263),v=e(11328),h=e(55968),s=e(10670),t=!1,a=i();function n(r,l,o){var u=T.segments(r),p=T.segments(l),c=o(T.combine(u,p));return T.polygon(c)}T={buildLog:function(r){return r===!0?t=w():r===!1&&(t=!1),t!==!1&&t.list},epsilon:function(r){return a.epsilon(r)},segments:function(r){var l=_(!0,a,t);return r.regions.forEach(l.addRegion),{segments:l.calculate(r.inverted),inverted:r.inverted}},combine:function(r,l){return{combined:_(!1,a,t).calculate(r.segments,r.inverted,l.segments,l.inverted),inverted1:r.inverted,inverted2:l.inverted}},selectUnion:function(r){return{segments:h.union(r.combined,t),inverted:r.inverted1||r.inverted2}},selectIntersect:function(r){return{segments:h.intersect(r.combined,t),inverted:r.inverted1&&r.inverted2}},selectDifference:function(r){return{segments:h.difference(r.combined,t),inverted:r.inverted1&&!r.inverted2}},selectDifferenceRev:function(r){return{segments:h.differenceRev(r.combined,t),inverted:!r.inverted1&&r.inverted2}},selectXor:function(r){return{segments:h.xor(r.combined,t),inverted:r.inverted1!==r.inverted2}},polygon:function(r){return{regions:v(r.segments,a,t),inverted:r.inverted}},polygonFromGeoJSON:function(r){return s.toPolygon(T,r)},polygonToGeoJSON:function(r){return s.fromPolygon(T,a,r)},union:function(r,l){return n(r,l,T.selectUnion)},intersect:function(r,l){return n(r,l,T.selectIntersect)},difference:function(r,l){return n(r,l,T.selectDifference)},differenceRev:function(r,l){return n(r,l,T.selectDifferenceRev)},xor:function(r,l){return n(r,l,T.selectXor)}},typeof window=="object"&&(window.PolyBool=T),N.exports=T},69444:function(N){N.exports=function(){var L,e=0,T=!1;function w(i,_){return L.list.push({type:i,data:_?JSON.parse(JSON.stringify(_)):void 0}),L}return L={list:[],segmentId:function(){return e++},checkIntersection:function(i,_){return w("check",{seg1:i,seg2:_})},segmentChop:function(i,_){return w("div_seg",{seg:i,pt:_}),w("chop",{seg:i,pt:_})},statusRemove:function(i){return w("pop_seg",{seg:i})},segmentUpdate:function(i){return w("seg_update",{seg:i})},segmentNew:function(i,_){return w("new_seg",{seg:i,primary:_})},segmentRemove:function(i){return w("rem_seg",{seg:i})},tempStatus:function(i,_,v){return w("temp_status",{seg:i,above:_,below:v})},rewind:function(i){return w("rewind",{seg:i})},status:function(i,_,v){return w("status",{seg:i,above:_,below:v})},vert:function(i){return i===T?L:(T=i,w("vert",{x:i}))},log:function(i){return typeof i!="string"&&(i=JSON.stringify(i,!1,"  ")),w("log",{txt:i})},reset:function(){return w("reset")},selected:function(i){return w("selected",{segs:i})},chainStart:function(i){return w("chain_start",{seg:i})},chainRemoveHead:function(i,_){return w("chain_rem_head",{index:i,pt:_})},chainRemoveTail:function(i,_){return w("chain_rem_tail",{index:i,pt:_})},chainNew:function(i,_){return w("chain_new",{pt1:i,pt2:_})},chainMatch:function(i){return w("chain_match",{index:i})},chainClose:function(i){return w("chain_close",{index:i})},chainAddHead:function(i,_){return w("chain_add_head",{index:i,pt:_})},chainAddTail:function(i,_){return w("chain_add_tail",{index:i,pt:_})},chainConnect:function(i,_){return w("chain_con",{index1:i,index2:_})},chainReverse:function(i){return w("chain_rev",{index:i})},chainJoin:function(i,_){return w("chain_join",{index1:i,index2:_})},done:function(){return w("done")}}}},29023:function(N){N.exports=function(L){typeof L!="number"&&(L=1e-10);var e={epsilon:function(T){return typeof T=="number"&&(L=T),L},pointAboveOrOnLine:function(T,w,i){var _=w[0],v=w[1],h=i[0],s=i[1],t=T[0];return(h-_)*(T[1]-v)-(s-v)*(t-_)>=-L},pointBetween:function(T,w,i){var _=T[1]-w[1],v=i[0]-w[0],h=T[0]-w[0],s=i[1]-w[1],t=h*v+_*s;return!(t<L||t-(v*v+s*s)>-L)},pointsSameX:function(T,w){return Math.abs(T[0]-w[0])<L},pointsSameY:function(T,w){return Math.abs(T[1]-w[1])<L},pointsSame:function(T,w){return e.pointsSameX(T,w)&&e.pointsSameY(T,w)},pointsCompare:function(T,w){return e.pointsSameX(T,w)?e.pointsSameY(T,w)?0:T[1]<w[1]?-1:1:T[0]<w[0]?-1:1},pointsCollinear:function(T,w,i){var _=T[0]-w[0],v=T[1]-w[1],h=w[0]-i[0],s=w[1]-i[1];return Math.abs(_*s-h*v)<L},linesIntersect:function(T,w,i,_){var v=w[0]-T[0],h=w[1]-T[1],s=_[0]-i[0],t=_[1]-i[1],a=v*t-h*s;if(Math.abs(a)<L)return!1;var n=T[0]-i[0],r=T[1]-i[1],l=(s*r-t*n)/a,o=(v*r-h*n)/a,u={alongA:0,alongB:0,pt:[T[0]+l*v,T[1]+l*h]};return u.alongA=l<=-L?-2:l<L?-1:l-1<=-L?0:l-1<L?1:2,u.alongB=o<=-L?-2:o<L?-1:o-1<=-L?0:o-1<L?1:2,u},pointInsideRegion:function(T,w){for(var i=T[0],_=T[1],v=w[w.length-1][0],h=w[w.length-1][1],s=!1,t=0;t<w.length;t++){var a=w[t][0],n=w[t][1];n-_>L!=h-_>L&&(v-a)*(_-n)/(h-n)+a-i>L&&(s=!s),v=a,h=n}return s}};return e}},10670:function(N){var L={toPolygon:function(e,T){function w(v){if(v.length<=0)return e.segments({inverted:!1,regions:[]});function h(a){var n=a.slice(0,a.length-1);return e.segments({inverted:!1,regions:[n]})}for(var s=h(v[0]),t=1;t<v.length;t++)s=e.selectDifference(e.combine(s,h(v[t])));return s}if(T.type==="Polygon")return e.polygon(w(T.coordinates));if(T.type==="MultiPolygon"){for(var i=e.segments({inverted:!1,regions:[]}),_=0;_<T.coordinates.length;_++)i=e.selectUnion(e.combine(i,w(T.coordinates[_])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,T,w){function i(o,u){return T.pointInsideRegion([.5*(o[0][0]+o[1][0]),.5*(o[0][1]+o[1][1])],u)}function _(o){return{region:o,children:[]}}w=e.polygon(e.segments(w));var v=_(null);function h(o,u){for(var p=0;p<o.children.length;p++)if(i(u,(b=o.children[p]).region))return void h(b,u);var c=_(u);for(p=0;p<o.children.length;p++){var b;i((b=o.children[p]).region,u)&&(c.children.push(b),o.children.splice(p,1),p--)}o.children.push(c)}for(var s=0;s<w.regions.length;s++){var t=w.regions[s];t.length<3||h(v,t)}function a(o,u){for(var p=0,c=o[o.length-1][0],b=o[o.length-1][1],g=[],d=0;d<o.length;d++){var m=o[d][0],x=o[d][1];g.push([m,x]),p+=x*c-m*b,c=m,b=x}return p<0!==u&&g.reverse(),g.push([g[0][0],g[0][1]]),g}var n=[];function r(o){var u=[a(o.region,!1)];n.push(u);for(var p=0;p<o.children.length;p++)u.push(l(o.children[p]))}function l(o){for(var u=0;u<o.children.length;u++)r(o.children[u]);return a(o.region,!0)}for(s=0;s<v.children.length;s++)r(v.children[s]);return n.length<=0?{type:"Polygon",coordinates:[]}:n.length==1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}};N.exports=L},87263:function(N,L,e){var T=e(26859);N.exports=function(w,i,_){function v(r,l,o){return{id:_?_.segmentId():-1,start:r,end:l,myFill:{above:o.myFill.above,below:o.myFill.below},otherFill:null}}var h=T.create();function s(r,l){h.insertBefore(r,function(o){return u=r.isStart,p=r.pt,c=l,b=o.isStart,g=o.pt,d=o.other.pt,((m=i.pointsCompare(p,g))!==0?m:i.pointsSame(c,d)?0:u!==b?u?1:-1:i.pointAboveOrOnLine(c,b?g:d,b?d:g)?1:-1)<0;var u,p,c,b,g,d,m})}function t(r,l){var o=function(u,p){var c=T.node({isStart:!0,pt:u.start,seg:u,primary:p,other:null,status:null});return s(c,u.end),c}(r,l);return function(u,p,c){var b=T.node({isStart:!1,pt:p.end,seg:p,primary:c,other:u,status:null});u.other=b,s(b,u.pt)}(o,r,l),o}function a(r,l){var o=v(l,r.seg.end,r.seg);return function(u,p){_&&_.segmentChop(u.seg,p),u.other.remove(),u.seg.end=p,u.other.pt=p,s(u.other,u.pt)}(r,l),t(o,r.primary)}function n(r,l){var o=T.create();function u(E){return o.findTransition(function(O){var P,I,z,U,R,j;return P=E,I=O.ev,z=P.seg.start,U=P.seg.end,R=I.seg.start,j=I.seg.end,(i.pointsCollinear(z,R,j)?i.pointsCollinear(U,R,j)||i.pointAboveOrOnLine(U,R,j)?1:-1:i.pointAboveOrOnLine(z,R,j)?1:-1)>0})}function p(E,O){var P=E.seg,I=O.seg,z=P.start,U=P.end,R=I.start,j=I.end;_&&_.checkIntersection(P,I);var Z=i.linesIntersect(z,U,R,j);if(Z===!1){if(!i.pointsCollinear(z,U,R)||i.pointsSame(z,j)||i.pointsSame(U,R))return!1;var F=i.pointsSame(z,R),V=i.pointsSame(U,j);if(F&&V)return O;var H=!F&&i.pointBetween(z,R,j),te=!V&&i.pointBetween(U,R,j);if(F)return te?a(O,U):a(E,j),O;H&&(V||(te?a(O,U):a(E,j)),a(O,z))}else Z.alongA===0&&(Z.alongB===-1?a(E,R):Z.alongB===0?a(E,Z.pt):Z.alongB===1&&a(E,j)),Z.alongB===0&&(Z.alongA===-1?a(O,z):Z.alongA===0?a(O,Z.pt):Z.alongA===1&&a(O,U));return!1}for(var c=[];!h.isEmpty();){var b=h.getHead();if(_&&_.vert(b.pt[0]),b.isStart){let E=function(){if(d){var O=p(b,d);if(O)return O}return!!m&&p(b,m)};var M=E;_&&_.segmentNew(b.seg,b.primary);var g=u(b),d=g.before?g.before.ev:null,m=g.after?g.after.ev:null;_&&_.tempStatus(b.seg,!!d&&d.seg,!!m&&m.seg);var x,y,k=E();if(k&&(w?(y=b.seg.myFill.below===null||b.seg.myFill.above!==b.seg.myFill.below)&&(k.seg.myFill.above=!k.seg.myFill.above):k.seg.otherFill=b.seg.myFill,_&&_.segmentUpdate(k.seg),b.other.remove(),b.remove()),h.getHead()!==b){_&&_.rewind(b.seg);continue}w?(y=b.seg.myFill.below===null||b.seg.myFill.above!==b.seg.myFill.below,b.seg.myFill.below=m?m.seg.myFill.above:r,b.seg.myFill.above=y?!b.seg.myFill.below:b.seg.myFill.below):b.seg.otherFill===null&&(x=m?b.primary===m.primary?m.seg.otherFill.above:m.seg.myFill.above:b.primary?l:r,b.seg.otherFill={above:x,below:x}),_&&_.status(b.seg,!!d&&d.seg,!!m&&m.seg),b.other.status=g.insert(T.node({ev:b}))}else{var f=b.status;if(f===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(f.prev)&&o.exists(f.next)&&p(f.prev.ev,f.next.ev),_&&_.statusRemove(f.ev.seg),f.remove(),!b.primary){var S=b.seg.myFill;b.seg.myFill=b.seg.otherFill,b.seg.otherFill=S}c.push(b.seg)}h.getHead().remove()}return _&&_.done(),c}return w?{addRegion:function(r){for(var l,o,u,p=r[r.length-1],c=0;c<r.length;c++){l=p,p=r[c];var b=i.pointsCompare(l,p);b!==0&&t((o=b<0?l:p,u=b<0?p:l,{id:_?_.segmentId():-1,start:o,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(r){return n(r,!1)}}:{calculate:function(r,l,o,u){return r.forEach(function(p){t(v(p.start,p.end,p),!0)}),o.forEach(function(p){t(v(p.start,p.end,p),!1)}),n(l,u)}}}},26859:function(N){N.exports={create:function(){var L={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==L.root},isEmpty:function(){return L.root.next===null},getHead:function(){return L.root.next},insertBefore:function(e,T){for(var w=L.root,i=L.root.next;i!==null;){if(T(i))return e.prev=i.prev,e.next=i,i.prev.next=e,void(i.prev=e);w=i,i=i.next}w.next=e,e.prev=w,e.next=null},findTransition:function(e){for(var T=L.root,w=L.root.next;w!==null&&!e(w);)T=w,w=w.next;return{before:T===L.root?null:T,after:w,insert:function(i){return i.prev=T,i.next=w,T.next=i,w!==null&&(w.prev=i),i}}}};return L},node:function(L){return L.prev=null,L.next=null,L.remove=function(){L.prev.next=L.next,L.next&&(L.next.prev=L.prev),L.prev=null,L.next=null},L}}},11328:function(N){N.exports=function(L,e,T){var w=[],i=[];return L.forEach(function(_){var v=_.start,h=_.end;if(e.pointsSame(v,h))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{T&&T.chainStart(_);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},a=s,n=0;n<w.length;n++){var r=(c=w[n])[0],l=(c[1],c[c.length-1]);if(c[c.length-2],e.pointsSame(r,v)){if(f(n,!0,!0))break}else if(e.pointsSame(r,h)){if(f(n,!0,!1))break}else if(e.pointsSame(l,v)){if(f(n,!1,!0))break}else if(e.pointsSame(l,h)&&f(n,!1,!1))break}if(a===s)return w.push([v,h]),void(T&&T.chainNew(v,h));if(a===t){T&&T.chainMatch(s.index);var o=s.index,u=s.matches_pt1?h:v,p=s.matches_head,c=w[o],b=p?c[0]:c[c.length-1],g=p?c[1]:c[c.length-2],d=p?c[c.length-1]:c[0],m=p?c[c.length-2]:c[1];return e.pointsCollinear(g,b,u)&&(p?(T&&T.chainRemoveHead(s.index,u),c.shift()):(T&&T.chainRemoveTail(s.index,u),c.pop()),b=g),e.pointsSame(d,u)?(w.splice(o,1),e.pointsCollinear(m,d,b)&&(p?(T&&T.chainRemoveTail(s.index,b),c.pop()):(T&&T.chainRemoveHead(s.index,b),c.shift())),T&&T.chainClose(s.index),void i.push(c)):void(p?(T&&T.chainAddHead(s.index,u),c.unshift(u)):(T&&T.chainAddTail(s.index,u),c.push(u)))}var x=s.index,y=t.index;T&&T.chainConnect(x,y);var k=w[x].length<w[y].length;s.matches_head?t.matches_head?k?(S(x),M(x,y)):(S(y),M(y,x)):M(y,x):t.matches_head?M(x,y):k?(S(x),M(y,x)):(S(y),M(x,y))}function f(E,O,P){return a.index=E,a.matches_head=O,a.matches_pt1=P,a===s?(a=t,!1):(a=null,!0)}function S(E){T&&T.chainReverse(E),w[E].reverse()}function M(E,O){var P=w[E],I=w[O],z=P[P.length-1],U=P[P.length-2],R=I[0],j=I[1];e.pointsCollinear(U,z,R)&&(T&&T.chainRemoveTail(E,z),P.pop(),z=U),e.pointsCollinear(z,R,j)&&(T&&T.chainRemoveHead(O,R),I.shift()),T&&T.chainJoin(E,O),w[E]=P.concat(I),w.splice(O,1)}}),i}},55968:function(N){function L(T,w,i){var _=[];return T.forEach(function(v){var h=(v.myFill.above?8:0)+(v.myFill.below?4:0)+(v.otherFill&&v.otherFill.above?2:0)+(v.otherFill&&v.otherFill.below?1:0);w[h]!==0&&_.push({id:i?i.segmentId():-1,start:v.start,end:v.end,myFill:{above:w[h]===1,below:w[h]===2},otherFill:null})}),i&&i.selected(_),_}var e={union:function(T,w){return L(T,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],w)},intersect:function(T,w){return L(T,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],w)},difference:function(T,w){return L(T,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],w)},differenceRev:function(T,w){return L(T,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],w)},xor:function(T,w){return L(T,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],w)}};N.exports=e},14847:function(N,L,e){var T=e(21630).Transform,w=e(90715);function i(){T.call(this,{readableObjectMode:!0})}function _(v,h,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=v,h&&(this.code=h),s&&(this.statusCode=s)}i.prototype=Object.create(T.prototype),i.prototype.constructor=i,w(i.prototype),L.OF=function(v,h,s){for(var t=h,a=0;a<s.length;)if(v[t++]!==s[a++])return!1;return!0},L.eG=function(v,h){var s=[],t=0;if(h&&h==="hex")for(;t<v.length;)s.push(parseInt(v.slice(t,t+2),16)),t+=2;else for(;t<v.length;t++)s.push(255&v.charCodeAt(t));return s},L.mP=function(v,h){return v[h]|v[h+1]<<8},L.n8=function(v,h){return v[h+1]|v[h]<<8},L.nm=function(v,h){return v[h]|v[h+1]<<8|v[h+2]<<16|16777216*v[h+3]},L.Ag=function(v,h){return v[h+3]|v[h+2]<<8|v[h+1]<<16|16777216*v[h]},_.prototype=Object.create(Error.prototype),_.prototype.constructor=_},71371:function(N){function L(w,i){var _=new Error(w);return _.code=i,_}function e(w){try{return decodeURIComponent(escape(w))}catch{return w}}function T(w,i,_){this.input=w.subarray(i,_),this.start=i;var v=String.fromCharCode.apply(null,this.input.subarray(0,4));if(v!=="II*\0"&&v!=="MM\0*")throw L("invalid TIFF signature","EBADDATA");this.big_endian=v[0]==="M"}T.prototype.each=function(w){this.aborted=!1;var i=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:i}];this.ifds_to_read.length>0&&!this.aborted;){var _=this.ifds_to_read.shift();_.offset&&this.scan_ifd(_.id,_.offset,w)}},T.prototype.read_uint16=function(w){var i=this.input;if(w+2>i.length)throw L("unexpected EOF","EBADDATA");return this.big_endian?256*i[w]+i[w+1]:i[w]+256*i[w+1]},T.prototype.read_uint32=function(w){var i=this.input;if(w+4>i.length)throw L("unexpected EOF","EBADDATA");return this.big_endian?16777216*i[w]+65536*i[w+1]+256*i[w+2]+i[w+3]:i[w]+256*i[w+1]+65536*i[w+2]+16777216*i[w+3]},T.prototype.is_subifd_link=function(w,i){return w===0&&i===34665||w===0&&i===34853||w===34665&&i===40965},T.prototype.exif_format_length=function(w){switch(w){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},T.prototype.exif_format_read=function(w,i){var _;switch(w){case 1:case 2:return this.input[i];case 6:return(_=this.input[i])|33554430*(128&_);case 3:return this.read_uint16(i);case 8:return(_=this.read_uint16(i))|131070*(32768&_);case 4:return this.read_uint32(i);case 9:return 0|this.read_uint32(i);default:return null}},T.prototype.scan_ifd=function(w,i,_){var v=this.read_uint16(i);i+=2;for(var h=0;h<v;h++){var s=this.read_uint16(i),t=this.read_uint16(i+2),a=this.read_uint32(i+4),n=this.exif_format_length(t),r=a*n,l=r<=4?i+8:this.read_uint32(i+8),o=!1;if(l+r>this.input.length)throw L("unexpected EOF","EBADDATA");for(var u=[],p=l,c=0;c<a;c++,p+=n){var b=this.exif_format_read(t,p);if(b===null){u=null;break}u.push(b)}if(Array.isArray(u)&&t===2&&(u=e(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(w,s)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:s,offset:u[0]}),o=!0),_({is_big_endian:this.big_endian,ifd:w,tag:s,format:t,count:a,entry_offset:i+this.start,data_length:r,data_offset:l+this.start,value:u,is_subifd_link:o})===!1)return void(this.aborted=!0);i+=12}w===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(i)})},N.exports.ExifParser=T,N.exports.get_orientation=function(w){var i=0;try{return new T(w,0,w.length).each(function(_){if(_.ifd===0&&_.tag===274&&Array.isArray(_.value))return i=_.value[0],!1}),i}catch{return-1}}},76767:function(N,L,e){var T=e(14847).n8,w=e(14847).Ag;function i(a,n){if(a.length<4+n)return null;var r=w(a,n);return a.length<r+n||r<8?null:{boxtype:String.fromCharCode.apply(null,a.slice(n+4,n+8)),data:a.slice(n+8,n+r),end:n+r}}function _(a,n){for(var r=0;;){var l=i(a,r);if(!l)break;switch(l.boxtype){case"ispe":n.sizes.push({width:w(l.data,4),height:w(l.data,8)});break;case"irot":n.transforms.push({type:"irot",value:3&l.data[0]});break;case"imir":n.transforms.push({type:"imir",value:1&l.data[0]})}r=l.end}}function v(a,n,r){for(var l=0,o=0;o<r;o++)l=256*l+(a[n+o]||0);return l}function h(a,n){for(var r=a[4]>>4&15,l=15&a[4],o=a[5]>>4&15,u=T(a,6),p=8,c=0;c<u;c++){var b=T(a,p),g=T(a,p+=2),d=v(a,p+=2,o),m=T(a,p+=o);if(p+=2,g===0&&m===1){var x=v(a,p,r),y=v(a,p+r,l);n.item_loc[b]={length:y,offset:x+d}}p+=m*(r+l)}}function s(a,n){for(var r=T(a,4),l=6,o=0;o<r;o++){var u=i(a,l);if(!u)break;if(u.boxtype==="infe"){for(var p=T(u.data,4),c="",b=8;b<u.data.length&&u.data[b];b++)c+=String.fromCharCode(u.data[b]);n.item_inf[c]=p}l=u.end}}function t(a,n){for(var r=0;;){var l=i(a,r);if(!l)break;l.boxtype==="ipco"&&_(l.data,n),r=l.end}}N.exports.unbox=i,N.exports.readSizeFromMeta=function(a){var n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(b,g){for(var d=4;;){var m=i(b,d);if(!m)break;m.boxtype==="iprp"&&t(m.data,g),m.boxtype==="iloc"&&h(m.data,g),m.boxtype==="iinf"&&s(m.data,g),d=m.end}}(a,n),n.sizes.length){var r,l,o,u=(l=(r=n.sizes).reduce(function(b,g){return b.width>g.width||b.width===g.width&&b.height>g.height?b:g}),o=r.reduce(function(b,g){return b.height>g.height||b.height===g.height&&b.width>g.width?b:g}),l.width>o.height||l.width===o.height&&l.height>o.width?l:o),p=1;n.transforms.forEach(function(b){var g={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},d={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(b.type==="imir"&&(p=b.value===0?d[p]:g[p=g[p=d[p]]]),b.type==="irot")for(var m=0;m<b.value;m++)p=g[p]});var c=null;return n.item_inf.Exif&&(c=n.item_loc[n.item_inf.Exif]),{width:u.width,height:u.height,orientation:n.transforms.length?p:null,variants:n.sizes,exif_location:c}}},N.exports.getMimeType=function(a){var n=String.fromCharCode.apply(null,a.slice(0,4)),r={};r[n]=!0;for(var l=8;l<a.length;l+=4)r[String.fromCharCode.apply(null,a.slice(l,l+4))]=!0;if(r.mif1||r.msf1||r.miaf)return n==="avif"||n==="avis"||n==="avio"?{type:"avif",mime:"image/avif"}:n==="heic"||n==="heix"?{type:"heic",mime:"image/heic"}:n==="hevc"||n==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(N,L,e){var T=e(14847).eG,w=e(14847).OF,i=e(14847).Ag,_=e(76767),v=e(71371),h=T("ftyp");N.exports=function(s){if(w(s,4,h)){var t=_.unbox(s,0);if(t){var a=_.getMimeType(t.data);if(a){for(var n,r=t.end;;){var l=_.unbox(s,r);if(!l)break;if(r=l.end,l.boxtype==="mdat")return;if(l.boxtype==="meta"){n=l.data;break}}if(n){var o=_.readSizeFromMeta(n);if(o){var u={width:o.width,height:o.height,type:a.type,mime:a.mime,wUnits:"px",hUnits:"px"};if(o.variants.length>1&&(u.variants=o.variants),o.orientation&&(u.orientation=o.orientation),o.exif_location&&o.exif_location.offset+o.exif_location.length<=s.length){var p=i(s,o.exif_location.offset),c=s.slice(o.exif_location.offset+p+4,o.exif_location.offset+o.exif_location.length),b=v.get_orientation(c);b>0&&(u.orientation=b)}return u}}}}}}},2504:function(N,L,e){var T=e(14847).eG,w=e(14847).OF,i=e(14847).mP,_=T("BM");N.exports=function(v){if(!(v.length<26)&&w(v,0,_))return{width:i(v,18),height:i(v,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(N,L,e){var T=e(14847).eG,w=e(14847).OF,i=e(14847).mP,_=T("GIF87a"),v=T("GIF89a");N.exports=function(h){if(!(h.length<10)&&(w(h,0,_)||w(h,0,v)))return{width:i(h,6),height:i(h,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(N,L,e){var T=e(14847).mP;N.exports=function(w){var i=T(w,0),_=T(w,2),v=T(w,4);if(i===0&&_===1&&v){for(var h=[],s={width:0,height:0},t=0;t<v;t++){var a=w[6+16*t]||256,n=w[6+16*t+1]||256,r={width:a,height:n};h.push(r),(a>s.width||n>s.height)&&(s=r)}return{width:s.width,height:s.height,variants:h,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(N,L,e){var T=e(14847).n8,w=e(14847).eG,i=e(14847).OF,_=e(71371),v=w("Exif\0\0");N.exports=function(h){if(!(h.length<2)&&h[0]===255&&h[1]===216&&h[2]===255)for(var s=2;;){for(;;){if(h.length-s<2)return;if(h[s++]===255)break}for(var t,a,n=h[s++];n===255;)n=h[s++];if(208<=n&&n<=217||n===1)t=0;else{if(!(192<=n&&n<=254)||h.length-s<2)return;t=T(h,s)-2,s+=2}if(n===217||n===218)return;if(n===225&&t>=10&&i(h,s,v)&&(a=_.get_orientation(h.slice(s+6,s+t))),t>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(h.length-s<t)return;var r={width:T(h,s+3),height:T(h,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return a>0&&(r.orientation=a),r}s+=t}}},6303:function(N,L,e){var T=e(14847).eG,w=e(14847).OF,i=e(14847).Ag,_=T(`PNG\r

`),v=T("IHDR");N.exports=function(h){if(!(h.length<24)&&w(h,0,_)&&w(h,12,v))return{width:i(h,16),height:i(h,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(N,L,e){var T=e(14847).eG,w=e(14847).OF,i=e(14847).Ag,_=T("8BPS\0");N.exports=function(v){if(!(v.length<22)&&w(v,0,_))return{width:i(v,18),height:i(v,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(N){function L(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,T=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,w=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,i=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,_=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,v=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function h(s){return v.test(s)?s.match(v)[0]:"px"}N.exports=function(s){if(function(d){var m,x=0,y=d.length;for(d[0]===239&&d[1]===187&&d[2]===191&&(x=3);x<y&&((m=d[x])===32||m===9||m===13||m===10);)x++;return x!==y&&d[x]===60}(s)){for(var t="",a=0;a<s.length;a++)t+=String.fromCharCode(s[a]);var n=(t.match(e)||[""])[0];if(T.test(n)){var r=function(d){var m=d.match(w),x=d.match(i),y=d.match(_);return{width:m&&(m[1]||m[2]),height:x&&(x[1]||x[2]),viewbox:y&&(y[1]||y[2])}}(n),l=parseFloat(r.width),o=parseFloat(r.height);if(r.width&&r.height)return!L(l)||!L(o)?void 0:{width:l,height:o,type:"svg",mime:"image/svg+xml",wUnits:h(r.width),hUnits:h(r.height)};var u=(r.viewbox||"").split(" "),p={width:u[2],height:u[3]},c=parseFloat(p.width),b=parseFloat(p.height);if(L(c)&&L(b)&&h(p.width)===h(p.height)){var g=c/b;return r.width?L(l)?{width:l,height:l/g,type:"svg",mime:"image/svg+xml",wUnits:h(r.width),hUnits:h(r.width)}:void 0:r.height?L(o)?{width:o*g,height:o,type:"svg",mime:"image/svg+xml",wUnits:h(r.height),hUnits:h(r.height)}:void 0:{width:c,height:b,type:"svg",mime:"image/svg+xml",wUnits:h(p.width),hUnits:h(p.height)}}}}}},66278:function(N,L,e){var T=e(14847).eG,w=e(14847).OF,i=e(14847).mP,_=e(14847).n8,v=e(14847).nm,h=e(14847).Ag,s=T("II*\0"),t=T("MM\0*");function a(l,o,u){return u?_(l,o):i(l,o)}function n(l,o,u){return u?h(l,o):v(l,o)}function r(l,o,u){var p=a(l,o+2,u);return n(l,o+4,u)!==1||p!==3&&p!==4?null:p===3?a(l,o+8,u):n(l,o+8,u)}N.exports=function(l){if(!(l.length<8)&&(w(l,0,s)||w(l,0,t))){var o=l[0]===77,u=n(l,4,o)-8;if(!(u<0)){var p=u+8;if(!(l.length-p<2)){var c=12*a(l,p+0,o);if(!(c<=0||(p+=2,l.length-p<c))){var b,g,d,m;for(b=0;b<c;b+=12)(m=a(l,p+b,o))===256?g=r(l,p+b,o):m===257&&(d=r(l,p+b,o));return g&&d?{width:g,height:d,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function(N,L,e){var T=e(14847).eG,w=e(14847).OF,i=e(14847).mP,_=e(14847).nm,v=e(71371),h=T("RIFF"),s=T("WEBP");function t(r,l){if(r[l+3]===157&&r[l+4]===1&&r[l+5]===42)return{width:16383&i(r,l+6),height:16383&i(r,l+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function a(r,l){if(r[l]===47){var o=_(r,l+1);return{width:1+(16383&o),height:1+(o>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function n(r,l){return{width:1+(r[l+6]<<16|r[l+5]<<8|r[l+4]),height:1+(r[l+9]<<l|r[l+8]<<8|r[l+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}N.exports=function(r){if(!(r.length<16)&&(w(r,0,h)||w(r,8,s))){var l=12,o=null,u=0,p=_(r,4)+8;if(!(p>r.length)){for(;l+8<p;)if(r[l]!==0){var c=String.fromCharCode.apply(null,r.slice(l,l+4)),b=_(r,l+4);c==="VP8 "&&b>=10?o=o||t(r,l+8):c==="VP8L"&&b>=9?o=o||a(r,l+8):c==="VP8X"&&b>=10?o=o||n(r,l+8):c==="EXIF"&&(u=v.get_orientation(r.slice(l+8,l+8+b)),l=1/0),l+=8+b}else l++;if(o)return u>0&&(o.orientation=u),o}}}},91497:function(N,L,e){N.exports={avif:e(24461),bmp:e(2504),gif:e(47342),ico:e(31355),jpeg:e(54261),png:e(6303),psd:e(38689),svg:e(6881),tiff:e(66278),webp:e(90784)}},33575:function(N,L,e){var T=e(91497);N.exports=function(w){return function(i){for(var _=Object.keys(T),v=0;v<_.length;v++){var h=T[_[v]](i);if(h)return h}return null}(w)},N.exports.parsers=T},90386:function(N){var L,e,T=N.exports={};function w(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function _(o){if(L===setTimeout)return setTimeout(o,0);if((L===w||!L)&&setTimeout)return L=setTimeout,setTimeout(o,0);try{return L(o,0)}catch{try{return L.call(null,o,0)}catch{return L.call(this,o,0)}}}(function(){try{L=typeof setTimeout=="function"?setTimeout:w}catch{L=w}try{e=typeof clearTimeout=="function"?clearTimeout:i}catch{e=i}})();var v,h=[],s=!1,t=-1;function a(){s&&v&&(s=!1,v.length?h=v.concat(h):t=-1,h.length&&n())}function n(){if(!s){var o=_(a);s=!0;for(var u=h.length;u;){for(v=h,h=[];++t<u;)v&&v[t].run();t=-1,u=h.length}v=null,s=!1,function(p){if(e===clearTimeout)return clearTimeout(p);if((e===i||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(p);try{return e(p)}catch{try{return e.call(null,p)}catch{return e.call(this,p)}}}(o)}}function r(o,u){this.fun=o,this.array=u}function l(){}T.nextTick=function(o){var u=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)u[p-1]=arguments[p];h.push(new r(o,u)),h.length!==1||s||_(n)},r.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=l,T.addListener=l,T.once=l,T.off=l,T.removeListener=l,T.removeAllListeners=l,T.emit=l,T.prependListener=l,T.prependOnceListener=l,T.listeners=function(o){return[]},T.binding=function(o){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(o){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},5877:function(N,L,e){for(var T=e(9748),w=typeof window>"u"?e.g:window,i=["moz","webkit"],_="AnimationFrame",v=w["request"+_],h=w["cancel"+_]||w["cancelRequest"+_],s=0;!v&&s<i.length;s++)v=w[i[s]+"Request"+_],h=w[i[s]+"Cancel"+_]||w[i[s]+"CancelRequest"+_];if(!v||!h){var t=0,a=0,n=[];v=function(r){if(n.length===0){var l=T(),o=Math.max(0,16.666666666666668-(l-t));t=o+l,setTimeout(function(){var u=n.slice(0);n.length=0;for(var p=0;p<u.length;p++)if(!u[p].cancelled)try{u[p].callback(t)}catch(c){setTimeout(function(){throw c},0)}},Math.round(o))}return n.push({handle:++a,callback:r,cancelled:!1}),a},h=function(r){for(var l=0;l<n.length;l++)n[l].handle===r&&(n[l].cancelled=!0)}}N.exports=function(r){return v.call(w,r)},N.exports.cancel=function(){h.apply(w,arguments)},N.exports.polyfill=function(r){r||(r=w),r.requestAnimationFrame=v,r.cancelAnimationFrame=h}},3593:function(N,L,e){var T=e(21527),w=e(25075),i=e(93447),_=e(71299),v=e(56131),h=e(30120),s=e(57060),t=s.float32,a=s.fract32;N.exports=function(r,l){if(typeof r=="function"?(l||(l={}),l.regl=r):l=r,l.length&&(l.positions=l),!(r=l.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var o,u,p,c,b,g,d=r._gl,m={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},x=[];return c=r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),b=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=r.buffer({usage:"static",type:"float",data:n}),S(l),o=r({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:r.prop("range"),lineWidth:r.prop("lineWidth"),capSize:r.prop("capSize"),opacity:r.prop("opacity"),scale:r.prop("scale"),translate:r.prop("translate"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),viewport:function(E,O){return[O.viewport.x,O.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,O){return 4*O.offset},divisor:1},position:{buffer:u,offset:function(E,O){return 8*O.offset},divisor:1},positionFract:{buffer:p,offset:function(E,O){return 8*O.offset},divisor:1},error:{buffer:b,offset:function(E,O){return 16*O.offset},divisor:1},direction:{buffer:g,stride:24,offset:0},lineOffset:{buffer:g,stride:24,offset:8},capOffset:{buffer:g,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:!1,instances:r.prop("count"),count:n.length}),v(y,{update:S,draw:k,destroy:M,regl:r,gl:d,canvas:d.canvas,groups:x}),y;function y(E){E?S(E):E===null&&M(),k()}function k(E){if(typeof E=="number")return f(E);E&&!Array.isArray(E)&&(E=[E]),r._refresh(),x.forEach(function(O,P){O&&(E&&(E[P]?O.draw=!0:O.draw=!1),O.draw?f(P):O.draw=!0)})}function f(E){typeof E=="number"&&(E=x[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],o(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var O=0,P=0;if(y.groups=x=E.map(function(F,V){var H=x[V];return F&&(typeof F=="function"?F={after:F}:typeof F[0]=="number"&&(F={positions:F}),F=_(F,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),H||(x[V]=H={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},F=v({},m,F)),i(H,F,[{lineWidth:function(te){return .5*+te},capSize:function(te){return .5*+te},opacity:parseFloat,errors:function(te){return te=h(te),P+=te.length,te},positions:function(te,$){return te=h(te,"float64"),$.count=Math.floor(te.length/2),$.bounds=T(te,2),$.offset=O,O+=$.count,te}},{color:function(te,$){var J=$.count;if(te||(te="transparent"),!Array.isArray(te)||typeof te[0]=="number"){var X=te;te=Array(J);for(var K=0;K<J;K++)te[K]=X}if(te.length<J)throw Error("Not enough colors");for(var ee=new Uint8Array(4*J),ie=0;ie<J;ie++){var ae=w(te[ie],"uint8");ee.set(ae,4*ie)}return ee},range:function(te,$,J){var X=$.bounds;return te||(te=X),$.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],$.translate=[-te[0],-te[1]],$.scaleFract=a($.scale),$.translateFract=a($.translate),te},viewport:function(te){var $;return Array.isArray(te)?$={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?($={x:te.x||te.left||0,y:te.y||te.top||0},te.right?$.width=te.right-$.x:$.width=te.w||te.width||0,te.bottom?$.height=te.bottom-$.y:$.height=te.h||te.height||0):$={x:0,y:0,width:d.drawingBufferWidth,height:d.drawingBufferHeight},$}}])),H}),O||P){var I=x.reduce(function(F,V,H){return F+(V?V.count:0)},0),z=new Float64Array(2*I),U=new Uint8Array(4*I),R=new Float32Array(4*I);x.forEach(function(F,V){if(F){var H=F.positions,te=F.count,$=F.offset,J=F.color,X=F.errors;te&&(U.set(J,4*$),R.set(X,4*$),z.set(H,2*$))}});var j=t(z);u(j);var Z=a(z,j);p(Z),c(U),b(R)}}}function M(){u.destroy(),p.destroy(),c.destroy(),b.destroy(),g.destroy()}};var n=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(N,L,e){var T=e(25075),w=e(21527),i=e(56131),_=e(56068),v=e(71299),h=e(30120),s=e(11474),t=e(54),a=e(57060),n=a.float32,r=a.fract32,l=e(83522),o=e(18863),u=e(6851);function p(c,b){if(!(this instanceof p))return new p(c,b);if(typeof c=="function"?(b||(b={}),b.regl=c):b=c,b.length&&(b.positions=b),!(c=b.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=c._gl,this.regl=c,this.passes=[],this.shaders=p.shaders.has(c)?p.shaders.get(c):p.shaders.set(c,p.createShaders(c)).get(c),this.update(b)}N.exports=p,p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new l,p.createShaders=function(c){var b,g=c.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),d={primitive:"triangle strip",instances:c.prop("count"),count:4,offset:0,uniforms:{miterMode:function(x,y){return y.join==="round"?2:1},miterLimit:c.prop("miterLimit"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),thickness:c.prop("thickness"),dashTexture:c.prop("dashTexture"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),dashLength:c.prop("dashLength"),viewport:function(x,y){return[y.viewport.x,y.viewport.y,x.viewportWidth,x.viewportHeight]},depth:c.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(x,y){return!y.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport")},m=c(i({vert:_([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:_([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},d));try{b=c(i({cull:{enable:!0,face:"back"},vert:_([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:_([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aColor:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:c.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},d))}catch{b=m}return{fill:c({primitive:"triangle",elements:function(x,y){return y.triangles},offset:0,vert:_([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:_([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:c.prop("scale"),color:c.prop("fill"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),viewport:function(x,y){return[y.viewport.x,y.viewport.y,x.viewportWidth,x.viewportHeight]}},attributes:{position:{buffer:c.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8}},blend:d.blend,depth:{enable:!1},scissor:d.scissor,stencil:d.stencil,viewport:d.viewport}),rect:m,miter:b}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var c,b=[],g=arguments.length;g--;)b[g]=arguments[g];b.length&&(c=this).update.apply(c,b),this.draw()},p.prototype.draw=function(){for(var c=this,b=[],g=arguments.length;g--;)b[g]=arguments[g];return(b.length?b:this.passes).forEach(function(d,m){var x;if(d&&Array.isArray(d))return(x=c).draw.apply(x,d);typeof d=="number"&&(d=c.passes[d]),d&&d.count>1&&d.opacity&&(c.regl._refresh(),d.fill&&d.triangles&&d.triangles.length>2&&c.shaders.fill(d),d.thickness&&(d.scale[0]*d.viewport.width>p.precisionThreshold||d.scale[1]*d.viewport.height>p.precisionThreshold||d.join==="rect"||!d.join&&(d.thickness<=2||d.count>=p.maxPoints)?c.shaders.rect(d):c.shaders.miter(d)))}),this},p.prototype.update=function(c){var b=this;if(c){c.length!=null?typeof c[0]=="number"&&(c=[{positions:c}]):Array.isArray(c)||(c=[c]);var g=this.regl,d=this.gl;if(c.forEach(function(f,S){var M=b.passes[S];if(f!==void 0)if(f!==null){if(typeof f[0]=="number"&&(f={positions:f}),f=v(f,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),M||(b.passes[S]=M={id:S,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:g.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:g.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},f=i({},p.defaults,f)),f.thickness!=null&&(M.thickness=parseFloat(f.thickness)),f.opacity!=null&&(M.opacity=parseFloat(f.opacity)),f.miterLimit!=null&&(M.miterLimit=parseFloat(f.miterLimit)),f.overlay!=null&&(M.overlay=!!f.overlay,S<p.maxLines&&(M.depth=2*(p.maxLines-1-S%p.maxLines)/p.maxLines-1)),f.join!=null&&(M.join=f.join),f.hole!=null&&(M.hole=f.hole),f.fill!=null&&(M.fill=f.fill?T(f.fill,"uint8"):null),f.viewport!=null&&(M.viewport=o(f.viewport)),M.viewport||(M.viewport=o([d.drawingBufferWidth,d.drawingBufferHeight])),f.close!=null&&(M.close=f.close),f.positions===null&&(f.positions=[]),f.positions){var E,O;if(f.positions.x&&f.positions.y){var P=f.positions.x,I=f.positions.y;O=M.count=Math.max(P.length,I.length),E=new Float64Array(2*O);for(var z=0;z<O;z++)E[2*z]=P[z],E[2*z+1]=I[z]}else E=h(f.positions,"float64"),O=M.count=Math.floor(E.length/2);var U=M.bounds=w(E,2);if(M.fill){for(var R=[],j={},Z=0,F=0,V=0,H=M.count;F<H;F++){var te=E[2*F],$=E[2*F+1];isNaN(te)||isNaN($)||te==null||$==null?(te=E[2*Z],$=E[2*Z+1],j[F]=Z):Z=F,R[V++]=te,R[V++]=$}if(f.splitNull){M.count-1 in j||(j[M.count]=M.count-1);var J=Object.keys(j).map(Number).sort(function(_t,it){return _t-it}),X=[],K=0,ee=M.hole!=null?M.hole[0]:null;if(ee!=null){var ie=u(J,function(_t){return _t>=ee});(J=J.slice(0,ie)).push(ee)}for(var ae=function(_t){var it=R.slice(2*K,2*J[_t]).concat(ee?R.slice(2*ee):[]),st=(M.hole||[]).map(function(zt){return zt-ee+(J[_t]-K)}),St=s(it,st);St=St.map(function(zt){return zt+K+(zt+K<J[_t]?0:ee-J[_t])}),X.push.apply(X,St),K=J[_t]+1},oe=0;oe<J.length;oe++)ae(oe);for(var fe=0,ge=X.length;fe<ge;fe++)j[X[fe]]!=null&&(X[fe]=j[X[fe]]);M.triangles=X}else{for(var ve=s(R,M.hole||[]),xe=0,_e=ve.length;xe<_e;xe++)j[ve[xe]]!=null&&(ve[xe]=j[ve[xe]]);M.triangles=ve}}var ye=new Float64Array(E);t(ye,2,U);var Ce=new Float64Array(2*O+6);M.close?E[0]===E[2*O-2]&&E[1]===E[2*O-1]?(Ce[0]=ye[2*O-4],Ce[1]=ye[2*O-3]):(Ce[0]=ye[2*O-2],Ce[1]=ye[2*O-1]):(Ce[0]=ye[0],Ce[1]=ye[1]),Ce.set(ye,2),M.close?E[0]===E[2*O-2]&&E[1]===E[2*O-1]?(Ce[2*O+2]=ye[2],Ce[2*O+3]=ye[3],M.count-=1):(Ce[2*O+2]=ye[0],Ce[2*O+3]=ye[1],Ce[2*O+4]=ye[2],Ce[2*O+5]=ye[3]):(Ce[2*O+2]=ye[2*O-2],Ce[2*O+3]=ye[2*O-1],Ce[2*O+4]=ye[2*O-2],Ce[2*O+5]=ye[2*O-1]);var ke=n(Ce);M.positionBuffer(ke);var Te=r(Ce,ke);M.positionFractBuffer(Te)}if(f.range?M.range=f.range:M.range||(M.range=M.bounds),(f.range||f.positions)&&M.count){var le=M.bounds,ue=le[2]-le[0],de=le[3]-le[1],Le=M.range[2]-M.range[0],we=M.range[3]-M.range[1];M.scale=[ue/Le,de/we],M.translate=[-M.range[0]/Le+le[0]/Le||0,-M.range[1]/we+le[1]/we||0],M.scaleFract=r(M.scale),M.translateFract=r(M.translate)}if(f.dashes){var Ee,Oe=0;if(!f.dashes||f.dashes.length<2)Oe=1,Ee=new Uint8Array([255,255,255,255,255,255,255,255]);else{Oe=0;for(var Fe=0;Fe<f.dashes.length;++Fe)Oe+=f.dashes[Fe];Ee=new Uint8Array(Oe*p.dashMult);for(var pe=0,be=255,Me=0;Me<2;Me++)for(var De=0;De<f.dashes.length;++De){for(var Ne=0,Be=f.dashes[De]*p.dashMult*.5;Ne<Be;++Ne)Ee[pe++]=be;be^=255}}M.dashLength=Oe,M.dashTexture({channels:1,data:Ee,width:Ee.length,height:1,mag:"linear",min:"linear"},0,0)}if(f.color){var Ye=M.count,We=f.color;We||(We="transparent");var et=new Uint8Array(4*Ye+4);if(Array.isArray(We)&&typeof We[0]!="number"){for(var ft=0;ft<Ye;ft++){var ht=T(We[ft],"uint8");et.set(ht,4*ft)}et.set(T(We[0],"uint8"),4*Ye)}else for(var mt=T(We,"uint8"),Mt=0;Mt<Ye+1;Mt++)et.set(mt,4*Mt);M.colorBuffer({usage:"dynamic",type:"uint8",data:et})}}else b.passes[S]=null}),c.length<this.passes.length){for(var m=c.length;m<this.passes.length;m++){var x=this.passes[m];x&&(x.colorBuffer.destroy(),x.positionBuffer.destroy(),x.dashTexture.destroy())}this.passes.length=c.length}for(var y=[],k=0;k<this.passes.length;k++)this.passes[k]!==null&&y.push(this.passes[k]);return this.passes=y,this}},p.prototype.destroy=function(){return this.passes.forEach(function(c){c.colorBuffer.destroy(),c.positionBuffer.destroy(),c.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(N,L,e){function T(d,m){return function(x){if(Array.isArray(x))return x}(d)||function(x,y){var k=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(k!=null){var f,S,M,E,O=[],P=!0,I=!1;try{if(M=(k=k.call(x)).next,y===0){if(Object(k)!==k)return;P=!1}else for(;!(P=(f=M.call(k)).done)&&(O.push(f.value),O.length!==y);P=!0);}catch(z){I=!0,S=z}finally{try{if(!P&&k.return!=null&&(E=k.return(),Object(E)!==E))return}finally{if(I)throw S}}return O}}(d,m)||w(d,m)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function w(d,m){if(d){if(typeof d=="string")return i(d,m);var x=Object.prototype.toString.call(d).slice(8,-1);return x==="Object"&&d.constructor&&(x=d.constructor.name),x==="Map"||x==="Set"?Array.from(d):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?i(d,m):void 0}}function i(d,m){(m==null||m>d.length)&&(m=d.length);for(var x=0,y=new Array(m);x<m;x++)y[x]=d[x];return y}var _=e(25075),v=e(21527),h=e(6475),s=e(88294),t=e(56131),a=e(56068),n=e(71299),r=e(93447),l=e(30120),o=e(62683),u=e(57060),p=e(18863),c=b;function b(d,m){var x=this;if(!(this instanceof b))return new b(d,m);typeof d=="function"?(m||(m={}),m.regl=d):(m=d,d=null),m&&m.length&&(m.positions=m);var y,k=(d=m.regl)._gl,f=[];this.tooManyColors=o,y=d.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:d,gl:k,groups:[],markerCache:[null],markerTextures:[null],palette:f,paletteIds:{},paletteTexture:y,maxColors:255,maxSize:100,canvas:k.canvas}),this.update(m);var S={uniforms:{constPointSize:!!m.constPointSize,opacity:d.prop("opacity"),paletteSize:function(O,P){return[x.tooManyColors?0:255,y.height]},pixelRatio:d.context("pixelRatio"),scale:d.prop("scale"),scaleFract:d.prop("scaleFract"),translate:d.prop("translate"),translateFract:d.prop("translateFract"),markerTexture:d.prop("markerTexture"),paletteTexture:y},attributes:{x:function(O,P){return P.xAttr||{buffer:P.positionBuffer,stride:8,offset:0}},y:function(O,P){return P.yAttr||{buffer:P.positionBuffer,stride:8,offset:4}},xFract:function(O,P){return P.xAttr?{constant:[0,0]}:{buffer:P.positionFractBuffer,stride:8,offset:0}},yFract:function(O,P){return P.yAttr?{constant:[0,0]}:{buffer:P.positionFractBuffer,stride:8,offset:4}},size:function(O,P){return P.size.length?{buffer:P.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*P.size/x.maxSize)]}},borderSize:function(O,P){return P.borderSize.length?{buffer:P.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*P.borderSize/x.maxSize)]}},colorId:function(O,P){return P.color.length?{buffer:P.colorBuffer,stride:x.tooManyColors?8:4,offset:0}:{constant:x.tooManyColors?f.slice(4*P.color,4*P.color+4):[P.color]}},borderColorId:function(O,P){return P.borderColor.length?{buffer:P.colorBuffer,stride:x.tooManyColors?8:4,offset:x.tooManyColors?4:2}:{constant:x.tooManyColors?f.slice(4*P.borderColor,4*P.borderColor+4):[P.borderColor]}},isActive:function(O,P){return P.activation===!0?{constant:[1]}:P.activation?P.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:d.prop("elements"),count:d.prop("count"),offset:d.prop("offset"),primitive:"points"},M=t({},S);M.frag=a([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),M.vert=a([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=d(M);var E=t({},S);E.frag=a([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=a([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),o&&(E.frag=E.frag.replace("smoothstep","smoothStep"),M.frag=M.frag.replace("smoothstep","smoothStep")),this.drawCircle=d(E)}b.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},b.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},b.prototype.draw=function(){for(var d=this,m=arguments.length,x=new Array(m),y=0;y<m;y++)x[y]=arguments[y];var k=this.groups;if(x.length===1&&Array.isArray(x[0])&&(x[0][0]===null||Array.isArray(x[0][0]))&&(x=x[0]),this.regl._refresh(),x.length)for(var f=0;f<x.length;f++)this.drawItem(f,x[f]);else k.forEach(function(S,M){d.drawItem(M)});return this},b.prototype.drawItem=function(d,m){var x,y=this.groups,k=y[d];if(typeof m=="number"&&(d=m,k=y[m],m=null),k&&k.count&&k.opacity){k.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,k,m));for(var f=[],S=1;S<k.activation.length;S++)k.activation[S]&&(k.activation[S]===!0||k.activation[S].data.length)&&f.push.apply(f,function(M){if(Array.isArray(M))return i(M)}(x=this.getMarkerDrawOptions(S,k,m))||function(M){if(typeof Symbol<"u"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}(x)||w(x)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());f.length&&this.drawMarker(f)}},b.prototype.getMarkerDrawOptions=function(d,m,x){var y=m.range,k=m.tree,f=m.viewport,S=m.activation,M=m.selectionBuffer,E=m.count;if(this.regl,!k)return x?[t({},m,{markerTexture:this.markerTextures[d],activation:S[d],count:x.length,elements:x,offset:0})]:[t({},m,{markerTexture:this.markerTextures[d],activation:S[d],offset:0})];var O=[],P=k.range(y,{lod:!0,px:[(y[2]-y[0])/f.width,(y[3]-y[1])/f.height]});if(x){for(var I=S[d].data,z=new Uint8Array(E),U=0;U<x.length;U++){var R=x[U];z[R]=I?I[R]:1}M.subdata(z)}for(var j=P.length;j--;){var Z=T(P[j],2),F=Z[0],V=Z[1];O.push(t({},m,{markerTexture:this.markerTextures[d],activation:x?M:S[d],offset:F,count:V-F}))}return O},b.prototype.update=function(){for(var d=this,m=arguments.length,x=new Array(m),y=0;y<m;y++)x[y]=arguments[y];if(x.length){x.length===1&&Array.isArray(x[0])&&(x=x[0]);var k=this.groups,f=this.gl,S=this.regl,M=this.maxSize,E=this.maxColors,O=this.palette;this.groups=k=x.map(function(P,I){var z=k[I];if(P===void 0)return z;P===null?P={positions:null}:typeof P=="function"?P={ondraw:P}:typeof P[0]=="number"&&(P={positions:P}),(P=n(P,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(P.positions=[]),P.tooManyColors!=null&&(d.tooManyColors=P.tooManyColors),z||(k[I]=z={id:I,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},P=t({},b.defaults,P)),P.positions&&!("marker"in P)&&(P.marker=z.marker,delete z.marker),P.marker&&!("positions"in P)&&(P.positions=z.positions,delete z.positions);var U=0,R=0;if(r(z,P,[{snap:!0,size:function(xe,_e){return xe==null&&(xe=b.defaults.size),U+=xe&&xe.length?1:0,xe},borderSize:function(xe,_e){return xe==null&&(xe=b.defaults.borderSize),U+=xe&&xe.length?1:0,xe},opacity:parseFloat,color:function(xe,_e){return xe==null&&(xe=b.defaults.color),xe=d.updateColor(xe),R++,xe},borderColor:function(xe,_e){return xe==null&&(xe=b.defaults.borderColor),xe=d.updateColor(xe),R++,xe},bounds:function(xe,_e,ye){return"range"in ye||(ye.range=null),xe},positions:function(xe,_e,ye){var Ce=_e.snap,ke=_e.positionBuffer,Te=_e.positionFractBuffer,le=_e.selectionBuffer;if(xe.x||xe.y)return xe.x.length?_e.xAttr={buffer:S.buffer(xe.x),offset:0,stride:4,count:xe.x.length}:_e.xAttr={buffer:xe.x.buffer,offset:4*xe.x.offset||0,stride:4*(xe.x.stride||1),count:xe.x.count},xe.y.length?_e.yAttr={buffer:S.buffer(xe.y),offset:0,stride:4,count:xe.y.length}:_e.yAttr={buffer:xe.y.buffer,offset:4*xe.y.offset||0,stride:4*(xe.y.stride||1),count:xe.y.count},_e.count=Math.max(_e.xAttr.count,_e.yAttr.count),xe;xe=l(xe,"float64");var ue=_e.count=Math.floor(xe.length/2),de=_e.bounds=ue?v(xe,2):null;if(ye.range||_e.range||(delete _e.range,ye.range=de),ye.marker||_e.marker||(delete _e.marker,ye.marker=null),Ce&&(Ce===!0||ue>Ce)?_e.tree=s(xe,{bounds:de}):Ce&&Ce.length&&(_e.tree=Ce),_e.tree){var Le={primitive:"points",usage:"static",data:_e.tree,type:"uint32"};_e.elements?_e.elements(Le):_e.elements=S.elements(Le)}var we=u.float32(xe);return ke({data:we,usage:"dynamic"}),Te({data:u.fract32(xe,we),usage:"dynamic"}),le({data:new Uint8Array(ue),type:"uint8",usage:"stream"}),xe}},{marker:function(xe,_e,ye){var Ce=_e.activation;if(Ce.forEach(function(we){return we&&we.destroy&&we.destroy()}),Ce.length=0,xe&&typeof xe[0]!="number"){for(var ke=[],Te=0,le=Math.min(xe.length,_e.count);Te<le;Te++){var ue=d.addMarker(xe[Te]);ke[ue]||(ke[ue]=new Uint8Array(_e.count)),ke[ue][Te]=1}for(var de=0;de<ke.length;de++)if(ke[de]){var Le={data:ke[de],type:"uint8",usage:"static"};Ce[de]?Ce[de](Le):Ce[de]=S.buffer(Le),Ce[de].data=ke[de]}}else Ce[d.addMarker(xe)]=!0;return xe},range:function(xe,_e,ye){var Ce=_e.bounds;if(Ce)return xe||(xe=Ce),_e.scale=[1/(xe[2]-xe[0]),1/(xe[3]-xe[1])],_e.translate=[-xe[0],-xe[1]],_e.scaleFract=u.fract(_e.scale),_e.translateFract=u.fract(_e.translate),xe},viewport:function(xe){return p(xe||[f.drawingBufferWidth,f.drawingBufferHeight])}}]),U){var j=z,Z=j.count,F=j.size,V=j.borderSize,H=j.sizeBuffer,te=new Uint8Array(2*Z);if(F.length||V.length)for(var $=0;$<Z;$++)te[2*$]=Math.round(255*(F[$]==null?F:F[$])/M),te[2*$+1]=Math.round(255*(V[$]==null?V:V[$])/M);H({data:te,usage:"dynamic"})}if(R){var J,X=z,K=X.count,ee=X.color,ie=X.borderColor,ae=X.colorBuffer;if(d.tooManyColors){if(ee.length||ie.length){J=new Uint8Array(8*K);for(var oe=0;oe<K;oe++){var fe=ee[oe];J[8*oe]=O[4*fe],J[8*oe+1]=O[4*fe+1],J[8*oe+2]=O[4*fe+2],J[8*oe+3]=O[4*fe+3];var ge=ie[oe];J[8*oe+4]=O[4*ge],J[8*oe+5]=O[4*ge+1],J[8*oe+6]=O[4*ge+2],J[8*oe+7]=O[4*ge+3]}}}else if(ee.length||ie.length){J=new Uint8Array(4*K+2);for(var ve=0;ve<K;ve++)ee[ve]!=null&&(J[4*ve]=ee[ve]%E,J[4*ve+1]=Math.floor(ee[ve]/E)),ie[ve]!=null&&(J[4*ve+2]=ie[ve]%E,J[4*ve+3]=Math.floor(ie[ve]/E))}ae({data:J||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},b.prototype.addMarker=function(d){var m,x=this.markerTextures,y=this.regl,k=this.markerCache,f=d==null?0:k.indexOf(d);if(f>=0)return f;if(d instanceof Uint8Array||d instanceof Uint8ClampedArray)m=d;else{m=new Uint8Array(d.length);for(var S=0,M=d.length;S<M;S++)m[S]=255*d[S]}var E=Math.floor(Math.sqrt(m.length));return f=x.length,k.push(d),x.push(y.texture({channels:1,data:m,radius:E,mag:"linear",min:"linear"})),f},b.prototype.updateColor=function(d){var m=this.paletteIds,x=this.palette,y=this.maxColors;Array.isArray(d)||(d=[d]);var k=[];if(typeof d[0]=="number"){var f=[];if(Array.isArray(d))for(var S=0;S<d.length;S+=4)f.push(d.slice(S,S+4));else for(var M=0;M<d.length;M+=4)f.push(d.subarray(M,M+4));d=f}for(var E=0;E<d.length;E++){var O=d[E];O=_(O,"uint8");var P=h(O,!1);if(m[P]==null){var I=x.length;m[P]=Math.floor(I/4),x[I]=O[0],x[I+1]=O[1],x[I+2]=O[2],x[I+3]=O[3]}k[E]=m[P]}return!this.tooManyColors&&x.length>4*y&&(this.tooManyColors=!0),this.updatePalette(x),k.length===1?k[0]:k},b.prototype.updatePalette=function(d){if(!this.tooManyColors){var m=this.maxColors,x=this.paletteTexture,y=Math.ceil(.25*d.length/m);if(y>1)for(var k=.25*(d=d.slice()).length%m;k<y*m;k++)d.push(0,0,0,0);x.height<y&&x.resize(m,y),x.subimage({width:Math.min(.25*d.length,m),height:y,data:d},0,0)}},b.prototype.destroy=function(){return this.groups.forEach(function(d){d.sizeBuffer.destroy(),d.positionBuffer.destroy(),d.positionFractBuffer.destroy(),d.colorBuffer.destroy(),d.activation.forEach(function(m){return m&&m.destroy&&m.destroy()}),d.selectionBuffer.destroy(),d.elements&&d.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(d){return d&&d.destroy&&d.destroy()}),this};var g=e(56131);N.exports=function(d,m){var x=new c(d,m),y=x.render.bind(x);return g(y,{render:y,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette}),y}},60487:function(N,L,e){var T=e(11870),w=e(71299),i=e(21527),_=e(5877),v=e(57471),h=e(18863),s=e(30120);function t(l,o){if(!(this instanceof t))return new t(l);this.traces=[],this.passes={},this.regl=l,this.scatter=T(l),this.canvas=this.scatter.canvas}function a(l,o,u){return(l.id!=null?l.id:l)<<16|(255&o)<<8|255&u}function n(l,o,u){var p,c,b,g,d=l[o],m=l[u];return d.length>2?(d[0],d[2],p=d[1],c=d[3]):d.length?(p=d[0],c=d[1]):(d.x,p=d.y,d.x,d.width,c=d.y+d.height),m.length>2?(b=m[0],g=m[2],m[1],m[3]):m.length?(b=m[0],g=m[1]):(b=m.x,m.y,g=m.x+m.width,m.y,m.height),[b,p,g,c]}function r(l){if(typeof l=="number")return[l,l,l,l];if(l.length===2)return[l[0],l[1],l[0],l[1]];var o=h(l);return[o.x,o.y,o.x+o.width,o.y+o.height]}N.exports=t,t.prototype.render=function(){for(var l,o=this,u=[],p=arguments.length;p--;)u[p]=arguments[p];return u.length&&(l=this).update.apply(l,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=_(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,_(function(){o.dirty=!1})),this)},t.prototype.update=function(){for(var l,o=[],u=arguments.length;u--;)o[u]=arguments[u];if(o.length){for(var p=0;p<o.length;p++)this.updateItem(p,o[p]);this.traces=this.traces.filter(Boolean);for(var c=[],b=0,g=0;g<this.traces.length;g++){for(var d=this.traces[g],m=this.traces[g].passes,x=0;x<m.length;x++)c.push(this.passes[m[x]]);d.passOffset=b,b+=d.passes.length}return(l=this.scatter).update.apply(l,c),this}},t.prototype.updateItem=function(l,o){var u=this.regl;if(o===null)return this.traces[l]=null,this;if(!o)return this;var p,c=w(o,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),b=this.traces[l]||(this.traces[l]={id:l,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:h([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(b.color=c.color),c.size!=null&&(b.size=c.size),c.marker!=null&&(b.marker=c.marker),c.borderColor!=null&&(b.borderColor=c.borderColor),c.borderSize!=null&&(b.borderSize=c.borderSize),c.opacity!=null&&(b.opacity=c.opacity),c.viewport&&(b.viewport=h(c.viewport)),c.diagonal!=null&&(b.diagonal=c.diagonal),c.upper!=null&&(b.upper=c.upper),c.lower!=null&&(b.lower=c.lower),c.data){b.buffer(s(c.data)),b.columns=c.data.length,b.count=c.data[0].length,b.bounds=[];for(var g=0;g<b.columns;g++)b.bounds[g]=i(c.data[g],1)}c.range&&(b.range=c.range,p=b.range&&typeof b.range[0]!="number"),c.domain&&(b.domain=c.domain);var d=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===b.columns&&typeof c.padding[c.padding.length-1]=="number"?(b.padding=c.padding.map(r),d=!0):b.padding=r(c.padding));var m=b.columns,x=b.count,y=b.viewport.width,k=b.viewport.height,f=b.viewport.x,S=b.viewport.y,M=y/m,E=k/m;b.passes=[];for(var O=0;O<m;O++)for(var P=0;P<m;P++)if((b.diagonal||P!==O)&&(b.upper||!(O>P))&&(b.lower||!(O<P))){var I=a(b.id,O,P),z=this.passes[I]||(this.passes[I]={});if(c.data&&(c.transpose?z.positions={x:{buffer:b.buffer,offset:P,count:x,stride:m},y:{buffer:b.buffer,offset:O,count:x,stride:m}}:z.positions={x:{buffer:b.buffer,offset:P*x,count:x},y:{buffer:b.buffer,offset:O*x,count:x}},z.bounds=n(b.bounds,O,P)),c.domain||c.viewport||c.data){var U=d?n(b.padding,O,P):b.padding;if(b.domain){var R=n(b.domain,O,P),j=R[0],Z=R[1],F=R[2],V=R[3];z.viewport=[f+j*y+U[0],S+Z*k+U[1],f+F*y-U[2],S+V*k-U[3]]}else z.viewport=[f+P*M+M*U[0],S+O*E+E*U[1],f+(P+1)*M-M*U[2],S+(O+1)*E-E*U[3]]}c.color&&(z.color=b.color),c.size&&(z.size=b.size),c.marker&&(z.marker=b.marker),c.borderSize&&(z.borderSize=b.borderSize),c.borderColor&&(z.borderColor=b.borderColor),c.opacity&&(z.opacity=b.opacity),c.range&&(z.range=p?n(b.range,O,P):b.range||z.bounds),b.passes.push(I)}return this},t.prototype.draw=function(){for(var l,o=[],u=arguments.length;u--;)o[u]=arguments[u];if(o.length){for(var p=[],c=0;c<o.length;c++)if(typeof o[c]=="number"){var b=this.traces[o[c]],g=b.passes,d=b.passOffset;p.push.apply(p,v(d,d+g.length))}else if(o[c].length){var m=o[c],x=this.traces[c],y=x.passes,k=x.passOffset;y=y.map(function(f,S){p[k+S]=m})}(l=this.scatter).draw.apply(l,p)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(l){l.buffer&&l.buffer.destroy&&l.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(N){N.exports=function(){function L(He,Je){this.id=ie++,this.type=He,this.data=Je}function e(He){if(He.length===0)return[];var Je=He.charAt(0),lt=He.charAt(He.length-1);if(1<He.length&&Je===lt&&(Je==='"'||Je==="'"))return['"'+He.substr(1,He.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Je=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(He))return e(He.substr(0,Je.index)).concat(e(Je[1])).concat(e(He.substr(Je.index+Je[0].length)));if((Je=He.split(".")).length===1)return['"'+He.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(He=[],lt=0;lt<Je.length;++lt)He=He.concat(e(Je[lt]));return He}function T(He){return"["+e(He).join("][")+"]"}function w(He){return typeof He=="string"?He.split():He}function i(He){return typeof He=="string"?document.querySelector(He):He}function _(He){var Je,lt,ot,je,Ue=He||{};He={};var at=[],$e=[],gt=typeof window>"u"?1:window.devicePixelRatio,yt=!1,xt={},dt=function(Tt){},Lt=function(){};if(typeof Ue=="string"?Je=document.querySelector(Ue):typeof Ue=="object"&&(typeof Ue.nodeName=="string"&&typeof Ue.appendChild=="function"&&typeof Ue.getBoundingClientRect=="function"?Je=Ue:typeof Ue.drawArrays=="function"||typeof Ue.drawElements=="function"?ot=(je=Ue).canvas:("gl"in Ue?je=Ue.gl:"canvas"in Ue?ot=i(Ue.canvas):"container"in Ue&&(lt=i(Ue.container)),"attributes"in Ue&&(He=Ue.attributes),"extensions"in Ue&&(at=w(Ue.extensions)),"optionalExtensions"in Ue&&($e=w(Ue.optionalExtensions)),"onDone"in Ue&&(dt=Ue.onDone),"profile"in Ue&&(yt=!!Ue.profile),"pixelRatio"in Ue&&(gt=+Ue.pixelRatio),"cachedCode"in Ue&&(xt=Ue.cachedCode))),Je&&(Je.nodeName.toLowerCase()==="canvas"?ot=Je:lt=Je),!je){if(!ot){if(!(Je=function(Tt,bt,Ct){function Dt(){var an=window.innerWidth,Wt=window.innerHeight;Tt!==document.body&&(an=(Wt=Xt.getBoundingClientRect()).right-Wt.left,Wt=Wt.bottom-Wt.top),Xt.width=Ct*an,Xt.height=Ct*Wt}var Bt,Xt=document.createElement("canvas");return ee(Xt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Tt.appendChild(Xt),Tt===document.body&&(Xt.style.position="absolute",ee(Tt.style,{margin:0,padding:0})),Tt!==document.body&&typeof ResizeObserver=="function"?(Bt=new ResizeObserver(function(){setTimeout(Dt)})).observe(Tt):window.addEventListener("resize",Dt,!1),Dt(),{canvas:Xt,onDestroy:function(){Bt?Bt.disconnect():window.removeEventListener("resize",Dt),Tt.removeChild(Xt)}}}(lt||document.body,0,gt)))return null;ot=Je.canvas,Lt=Je.onDestroy}He.premultipliedAlpha===void 0&&(He.premultipliedAlpha=!0),je=function(Tt,bt){function Ct(Dt){try{return Tt.getContext(Dt,bt)}catch{return null}}return Ct("webgl")||Ct("experimental-webgl")||Ct("webgl-experimental")}(ot,He)}return je?{gl:je,canvas:ot,container:lt,extensions:at,optionalExtensions:$e,pixelRatio:gt,profile:yt,cachedCode:xt,onDone:dt,onDestroy:Lt}:(Lt(),dt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function v(He,Je){for(var lt=Array(He),ot=0;ot<He;++ot)lt[ot]=Je(ot);return lt}function h(He){var Je,lt;return Je=(65535<He)<<4,Je|=lt=(255<(He>>>=Je))<<3,(Je|=lt=(15<(He>>>=lt))<<2)|(lt=(3<(He>>>=lt))<<1)|He>>>lt>>1}function s(){function He(ot){e:{for(var je=16;268435456>=je;je*=16)if(ot<=je){ot=je;break e}ot=0}return 0<(je=lt[h(ot)>>2]).length?je.pop():new ArrayBuffer(ot)}function Je(ot){lt[h(ot.byteLength)>>2].push(ot)}var lt=v(8,function(){return[]});return{alloc:He,free:Je,allocType:function(ot,je){var Ue=null;switch(ot){case 5120:Ue=new Int8Array(He(je),0,je);break;case 5121:Ue=new Uint8Array(He(je),0,je);break;case 5122:Ue=new Int16Array(He(2*je),0,je);break;case 5123:Ue=new Uint16Array(He(2*je),0,je);break;case 5124:Ue=new Int32Array(He(4*je),0,je);break;case 5125:Ue=new Uint32Array(He(4*je),0,je);break;case 5126:Ue=new Float32Array(He(4*je),0,je);break;default:return null}return Ue.length!==je?Ue.subarray(0,je):Ue},freeType:function(ot){Je(ot.buffer)}}}function t(He){return!!He&&typeof He=="object"&&Array.isArray(He.shape)&&Array.isArray(He.stride)&&typeof He.offset=="number"&&He.shape.length===He.stride.length&&(Array.isArray(He.data)||xe(He.data))}function a(He,Je,lt,ot,je,Ue){for(var at=0;at<Je;++at)for(var $e=He[at],gt=0;gt<lt;++gt)for(var yt=$e[gt],xt=0;xt<ot;++xt)je[Ue++]=yt[xt]}function n(He,Je,lt,ot,je){for(var Ue=1,at=lt+1;at<Je.length;++at)Ue*=Je[at];var $e=Je[lt];if(Je.length-lt==4){var gt=Je[lt+1],yt=Je[lt+2];for(Je=Je[lt+3],at=0;at<$e;++at)a(He[at],gt,yt,Je,ot,je),je+=Ue}else for(at=0;at<$e;++at)n(He[at],Je,lt+1,ot,je),je+=Ue}function r(He){return 0|Ce[Object.prototype.toString.call(He)]}function l(He,Je){for(var lt=0;lt<Je.length;++lt)He[lt]=Je[lt]}function o(He,Je,lt,ot,je,Ue,at){for(var $e=0,gt=0;gt<lt;++gt)for(var yt=0;yt<ot;++yt)He[$e++]=Je[je*gt+Ue*yt+at]}function u(He,Je,lt,ot){function je(dt){this.id=gt++,this.buffer=He.createBuffer(),this.type=dt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,lt.profile&&(this.stats={size:0})}function Ue(dt,Lt,Tt){dt.byteLength=Lt.byteLength,He.bufferData(dt.type,Lt,Tt)}function at(dt,Lt,Tt,bt,Ct,Dt){if(dt.usage=Tt,Array.isArray(Lt)){if(dt.dtype=bt||5126,0<Lt.length)if(Array.isArray(Lt[0])){Ct=ue(Lt);for(var Bt=bt=1;Bt<Ct.length;++Bt)bt*=Ct[Bt];dt.dimension=bt,Ue(dt,Lt=le(Lt,Ct,dt.dtype),Tt),Dt?dt.persistentData=Lt:ge.freeType(Lt)}else typeof Lt[0]=="number"?(dt.dimension=Ct,l(Ct=ge.allocType(dt.dtype,Lt.length),Lt),Ue(dt,Ct,Tt),Dt?dt.persistentData=Ct:ge.freeType(Ct)):xe(Lt[0])&&(dt.dimension=Lt[0].length,dt.dtype=bt||r(Lt[0])||5126,Ue(dt,Lt=le(Lt,[Lt.length,Lt[0].length],dt.dtype),Tt),Dt?dt.persistentData=Lt:ge.freeType(Lt))}else if(xe(Lt))dt.dtype=bt||r(Lt),dt.dimension=Ct,Ue(dt,Lt,Tt),Dt&&(dt.persistentData=new Uint8Array(new Uint8Array(Lt.buffer)));else if(t(Lt)){Ct=Lt.shape;var Xt=Lt.stride,an=(Bt=Lt.offset,0),Wt=0,Vt=0,on=0;Ct.length===1?(an=Ct[0],Wt=1,Vt=Xt[0],on=0):Ct.length===2&&(an=Ct[0],Wt=Ct[1],Vt=Xt[0],on=Xt[1]),dt.dtype=bt||r(Lt.data)||5126,dt.dimension=Wt,o(Ct=ge.allocType(dt.dtype,an*Wt),Lt.data,an,Wt,Vt,on,Bt),Ue(dt,Ct,Tt),Dt?dt.persistentData=Ct:ge.freeType(Ct)}else Lt instanceof ArrayBuffer&&(dt.dtype=5121,dt.dimension=Ct,Ue(dt,Lt,Tt),Dt&&(dt.persistentData=new Uint8Array(new Uint8Array(Lt))))}function $e(dt){Je.bufferCount--,ot(dt),He.deleteBuffer(dt.buffer),dt.buffer=null,delete yt[dt.id]}var gt=0,yt={};je.prototype.bind=function(){He.bindBuffer(this.type,this.buffer)},je.prototype.destroy=function(){$e(this)};var xt=[];return lt.profile&&(Je.getTotalBufferSize=function(){var dt=0;return Object.keys(yt).forEach(function(Lt){dt+=yt[Lt].stats.size}),dt}),{create:function(dt,Lt,Tt,bt){function Ct(Bt){var Xt=35044,an=null,Wt=0,Vt=0,on=1;return Array.isArray(Bt)||xe(Bt)||t(Bt)||Bt instanceof ArrayBuffer?an=Bt:typeof Bt=="number"?Wt=0|Bt:Bt&&("data"in Bt&&(an=Bt.data),"usage"in Bt&&(Xt=Te[Bt.usage]),"type"in Bt&&(Vt=ke[Bt.type]),"dimension"in Bt&&(on=0|Bt.dimension),"length"in Bt&&(Wt=0|Bt.length)),Dt.bind(),an?at(Dt,an,Xt,Vt,on,bt):(Wt&&He.bufferData(Dt.type,Wt,Xt),Dt.dtype=Vt||5121,Dt.usage=Xt,Dt.dimension=on,Dt.byteLength=Wt),lt.profile&&(Dt.stats.size=Dt.byteLength*de[Dt.dtype]),Ct}Je.bufferCount++;var Dt=new je(Lt);return yt[Dt.id]=Dt,Tt||Ct(dt),Ct._reglType="buffer",Ct._buffer=Dt,Ct.subdata=function(Bt,Xt){var an,Wt=0|(Xt||0);if(Dt.bind(),xe(Bt)||Bt instanceof ArrayBuffer)He.bufferSubData(Dt.type,Wt,Bt);else if(Array.isArray(Bt)){if(0<Bt.length)if(typeof Bt[0]=="number"){var Vt=ge.allocType(Dt.dtype,Bt.length);l(Vt,Bt),He.bufferSubData(Dt.type,Wt,Vt),ge.freeType(Vt)}else(Array.isArray(Bt[0])||xe(Bt[0]))&&(an=ue(Bt),Vt=le(Bt,an,Dt.dtype),He.bufferSubData(Dt.type,Wt,Vt),ge.freeType(Vt))}else if(t(Bt)){an=Bt.shape;var on=Bt.stride,Sn=Vt=0,Ln=0,fn=0;an.length===1?(Vt=an[0],Sn=1,Ln=on[0],fn=0):an.length===2&&(Vt=an[0],Sn=an[1],Ln=on[0],fn=on[1]),an=Array.isArray(Bt.data)?Dt.dtype:r(Bt.data),o(an=ge.allocType(an,Vt*Sn),Bt.data,Vt,Sn,Ln,fn,Bt.offset),He.bufferSubData(Dt.type,Wt,an),ge.freeType(an)}return Ct},lt.profile&&(Ct.stats=Dt.stats),Ct.destroy=function(){$e(Dt)},Ct},createStream:function(dt,Lt){var Tt=xt.pop();return Tt||(Tt=new je(dt)),Tt.bind(),at(Tt,Lt,35040,0,1,!1),Tt},destroyStream:function(dt){xt.push(dt)},clear:function(){_e(yt).forEach($e),xt.forEach($e)},getBuffer:function(dt){return dt&&dt._buffer instanceof je?dt._buffer:null},restore:function(){_e(yt).forEach(function(dt){dt.buffer=He.createBuffer(),He.bindBuffer(dt.type,dt.buffer),He.bufferData(dt.type,dt.persistentData||dt.byteLength,dt.usage)})},_initBuffer:at}}function p(He,Je,lt,ot){function je(dt){this.id=gt++,$e[this.id]=this,this.buffer=dt,this.primType=4,this.type=this.vertCount=0}function Ue(dt,Lt,Tt,bt,Ct,Dt,Bt){var Xt;if(dt.buffer.bind(),Lt?((Xt=Bt)||xe(Lt)&&(!t(Lt)||xe(Lt.data))||(Xt=Je.oes_element_index_uint?5125:5123),lt._initBuffer(dt.buffer,Lt,Tt,Xt,3)):(He.bufferData(34963,Dt,Tt),dt.buffer.dtype=Xt||5121,dt.buffer.usage=Tt,dt.buffer.dimension=3,dt.buffer.byteLength=Dt),Xt=Bt,!Bt){switch(dt.buffer.dtype){case 5121:case 5120:Xt=5121;break;case 5123:case 5122:Xt=5123;break;case 5125:case 5124:Xt=5125}dt.buffer.dtype=Xt}dt.type=Xt,0>(Lt=Ct)&&(Lt=dt.buffer.byteLength,Xt===5123?Lt>>=1:Xt===5125&&(Lt>>=2)),dt.vertCount=Lt,Lt=bt,0>bt&&(Lt=4,(bt=dt.buffer.dimension)===1&&(Lt=0),bt===2&&(Lt=1),bt===3&&(Lt=4)),dt.primType=Lt}function at(dt){ot.elementsCount--,delete $e[dt.id],dt.buffer.destroy(),dt.buffer=null}var $e={},gt=0,yt={uint8:5121,uint16:5123};Je.oes_element_index_uint&&(yt.uint32=5125),je.prototype.bind=function(){this.buffer.bind()};var xt=[];return{create:function(dt,Lt){function Tt(Dt){if(Dt)if(typeof Dt=="number")bt(Dt),Ct.primType=4,Ct.vertCount=0|Dt,Ct.type=5121;else{var Bt=null,Xt=35044,an=-1,Wt=-1,Vt=0,on=0;Array.isArray(Dt)||xe(Dt)||t(Dt)?Bt=Dt:("data"in Dt&&(Bt=Dt.data),"usage"in Dt&&(Xt=Te[Dt.usage]),"primitive"in Dt&&(an=Le[Dt.primitive]),"count"in Dt&&(Wt=0|Dt.count),"type"in Dt&&(on=yt[Dt.type]),"length"in Dt?Vt=0|Dt.length:(Vt=Wt,on===5123||on===5122?Vt*=2:on!==5125&&on!==5124||(Vt*=4))),Ue(Ct,Bt,Xt,an,Wt,Vt,on)}else bt(),Ct.primType=4,Ct.vertCount=0,Ct.type=5121;return Tt}var bt=lt.create(null,34963,!0),Ct=new je(bt._buffer);return ot.elementsCount++,Tt(dt),Tt._reglType="elements",Tt._elements=Ct,Tt.subdata=function(Dt,Bt){return bt.subdata(Dt,Bt),Tt},Tt.destroy=function(){at(Ct)},Tt},createStream:function(dt){var Lt=xt.pop();return Lt||(Lt=new je(lt.create(null,34963,!0,!1)._buffer)),Ue(Lt,dt,35040,-1,-1,0,0),Lt},destroyStream:function(dt){xt.push(dt)},getElements:function(dt){return typeof dt=="function"&&dt._elements instanceof je?dt._elements:null},clear:function(){_e($e).forEach(at)}}}function c(He){for(var Je=ge.allocType(5123,He.length),lt=0;lt<He.length;++lt)if(isNaN(He[lt]))Je[lt]=65535;else if(He[lt]===1/0)Je[lt]=31744;else if(He[lt]===-1/0)Je[lt]=64512;else{we[0]=He[lt];var ot=(Ue=Ee[0])>>>31<<15,je=(Ue<<1>>>24)-127,Ue=Ue>>13&1023;Je[lt]=-24>je?ot:-14>je?ot+(Ue+1024>>-14-je):15<je?ot+31744:ot+(je+15<<10)+Ue}return Je}function b(He){return Array.isArray(He)||xe(He)}function g(He){return"[object "+He+"]"}function d(He){return Array.isArray(He)&&(He.length===0||typeof He[0]=="number")}function m(He){return!(!Array.isArray(He)||He.length===0||!b(He[0]))}function x(He){return Object.prototype.toString.call(He)}function y(He){if(!He)return!1;var Je=x(He);return 0<=We.indexOf(Je)||d(He)||m(He)||t(He)}function k(He,Je){He.type===36193?(He.data=c(Je),ge.freeType(Je)):He.data=Je}function f(He,Je,lt,ot,je,Ue){if(He=ft[He]!==void 0?ft[He]:pe[He]*et[Je],Ue&&(He*=6),je){for(ot=0;1<=lt;)ot+=He*lt*lt,lt/=2;return ot}return He*lt*ot}function S(He,Je,lt,ot,je,Ue,at){function $e(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function gt(Qt,bn){Qt.internalformat=bn.internalformat,Qt.format=bn.format,Qt.type=bn.type,Qt.compressed=bn.compressed,Qt.premultiplyAlpha=bn.premultiplyAlpha,Qt.flipY=bn.flipY,Qt.unpackAlignment=bn.unpackAlignment,Qt.colorSpace=bn.colorSpace,Qt.width=bn.width,Qt.height=bn.height,Qt.channels=bn.channels}function yt(Qt,bn){if(typeof bn=="object"&&bn){"premultiplyAlpha"in bn&&(Qt.premultiplyAlpha=bn.premultiplyAlpha),"flipY"in bn&&(Qt.flipY=bn.flipY),"alignment"in bn&&(Qt.unpackAlignment=bn.alignment),"colorSpace"in bn&&(Qt.colorSpace=Cn[bn.colorSpace]),"type"in bn&&(Qt.type=_n[bn.type]);var Rt=Qt.width,Kt=Qt.height,rn=Qt.channels,xn=!1;"shape"in bn?(Rt=bn.shape[0],Kt=bn.shape[1],bn.shape.length===3&&(rn=bn.shape[2],xn=!0)):("radius"in bn&&(Rt=Kt=bn.radius),"width"in bn&&(Rt=bn.width),"height"in bn&&(Kt=bn.height),"channels"in bn&&(rn=bn.channels,xn=!0)),Qt.width=0|Rt,Qt.height=0|Kt,Qt.channels=0|rn,Rt=!1,"format"in bn&&(Rt=bn.format,Kt=Qt.internalformat=zn[Rt],Qt.format=dn[Kt],Rt in _n&&!("type"in bn)&&(Qt.type=_n[Rt]),Rt in qn&&(Qt.compressed=!0),Rt=!0),!xn&&Rt?Qt.channels=pe[Qt.format]:xn&&!Rt&&Qt.channels!==Fe[Qt.format]&&(Qt.format=Qt.internalformat=Fe[Qt.channels])}}function xt(Qt){He.pixelStorei(37440,Qt.flipY),He.pixelStorei(37441,Qt.premultiplyAlpha),He.pixelStorei(37443,Qt.colorSpace),He.pixelStorei(3317,Qt.unpackAlignment)}function dt(){$e.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Lt(Qt,bn){var Rt=null;if(y(bn)?Rt=bn:bn&&(yt(Qt,bn),"x"in bn&&(Qt.xOffset=0|bn.x),"y"in bn&&(Qt.yOffset=0|bn.y),y(bn.data)&&(Rt=bn.data)),bn.copy){var Kt=je.viewportWidth,rn=je.viewportHeight;Qt.width=Qt.width||Kt-Qt.xOffset,Qt.height=Qt.height||rn-Qt.yOffset,Qt.needsCopy=!0}else if(Rt){if(xe(Rt))Qt.channels=Qt.channels||4,Qt.data=Rt,"type"in bn||Qt.type!==5121||(Qt.type=0|Ce[Object.prototype.toString.call(Rt)]);else if(d(Rt)){switch(Qt.channels=Qt.channels||4,rn=(Kt=Rt).length,Qt.type){case 5121:case 5123:case 5125:case 5126:(rn=ge.allocType(Qt.type,rn)).set(Kt),Qt.data=rn;break;case 36193:Qt.data=c(Kt)}Qt.alignment=1,Qt.needsFree=!0}else if(t(Rt)){Kt=Rt.data,Array.isArray(Kt)||Qt.type!==5121||(Qt.type=0|Ce[Object.prototype.toString.call(Kt)]),rn=Rt.shape;var xn,Tn,Pn,pn,$t=Rt.stride;rn.length===3?(Pn=rn[2],pn=$t[2]):pn=Pn=1,xn=rn[0],Tn=rn[1],rn=$t[0],$t=$t[1],Qt.alignment=1,Qt.width=xn,Qt.height=Tn,Qt.channels=Pn,Qt.format=Qt.internalformat=Fe[Pn],Qt.needsFree=!0,xn=pn,Rt=Rt.offset,Pn=Qt.width,pn=Qt.height,Tn=Qt.channels;for(var en=ge.allocType(Qt.type===36193?5126:Qt.type,Pn*pn*Tn),hn=0,gn=0;gn<pn;++gn)for(var Dn=0;Dn<Pn;++Dn)for(var Fn=0;Fn<Tn;++Fn)en[hn++]=Kt[rn*Dn+$t*gn+xn*Fn+Rt];k(Qt,en)}else if(x(Rt)===be||x(Rt)===Me||x(Rt)===De)x(Rt)===be||x(Rt)===Me?Qt.element=Rt:Qt.element=Rt.canvas,Qt.width=Qt.element.width,Qt.height=Qt.element.height,Qt.channels=4;else if(x(Rt)===Ne)Qt.element=Rt,Qt.width=Rt.width,Qt.height=Rt.height,Qt.channels=4;else if(x(Rt)===Be)Qt.element=Rt,Qt.width=Rt.naturalWidth,Qt.height=Rt.naturalHeight,Qt.channels=4;else if(x(Rt)===Ye)Qt.element=Rt,Qt.width=Rt.videoWidth,Qt.height=Rt.videoHeight,Qt.channels=4;else if(m(Rt)){for(Kt=Qt.width||Rt[0].length,rn=Qt.height||Rt.length,$t=Qt.channels,$t=b(Rt[0][0])?$t||Rt[0][0].length:$t||1,xn=ye.shape(Rt),Pn=1,pn=0;pn<xn.length;++pn)Pn*=xn[pn];Pn=ge.allocType(Qt.type===36193?5126:Qt.type,Pn),ye.flatten(Rt,xn,"",Pn),k(Qt,Pn),Qt.alignment=1,Qt.width=Kt,Qt.height=rn,Qt.channels=$t,Qt.format=Qt.internalformat=Fe[$t],Qt.needsFree=!0}}else Qt.width=Qt.width||1,Qt.height=Qt.height||1,Qt.channels=Qt.channels||4}function Tt(Qt,bn,Rt,Kt,rn){var xn=Qt.element,Tn=Qt.data,Pn=Qt.internalformat,pn=Qt.format,$t=Qt.type,en=Qt.width,hn=Qt.height;xt(Qt),xn?He.texSubImage2D(bn,rn,Rt,Kt,pn,$t,xn):Qt.compressed?He.compressedTexSubImage2D(bn,rn,Rt,Kt,Pn,en,hn,Tn):Qt.needsCopy?(ot(),He.copyTexSubImage2D(bn,rn,Rt,Kt,Qt.xOffset,Qt.yOffset,en,hn)):He.texSubImage2D(bn,rn,Rt,Kt,en,hn,pn,$t,Tn)}function bt(){return vn.pop()||new dt}function Ct(Qt){Qt.needsFree&&ge.freeType(Qt.data),dt.call(Qt),vn.push(Qt)}function Dt(){$e.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Bt(Qt,bn,Rt){var Kt=Qt.images[0]=bt();Qt.mipmask=1,Kt.width=Qt.width=bn,Kt.height=Qt.height=Rt,Kt.channels=Qt.channels=4}function Xt(Qt,bn){var Rt=null;if(y(bn))gt(Rt=Qt.images[0]=bt(),Qt),Lt(Rt,bn),Qt.mipmask=1;else if(yt(Qt,bn),Array.isArray(bn.mipmap))for(var Kt=bn.mipmap,rn=0;rn<Kt.length;++rn)gt(Rt=Qt.images[rn]=bt(),Qt),Rt.width>>=rn,Rt.height>>=rn,Lt(Rt,Kt[rn]),Qt.mipmask|=1<<rn;else gt(Rt=Qt.images[0]=bt(),Qt),Lt(Rt,bn),Qt.mipmask=1;gt(Qt,Qt.images[0])}function an(Qt,bn){for(var Rt=Qt.images,Kt=0;Kt<Rt.length&&Rt[Kt];++Kt){var rn=Rt[Kt],xn=bn,Tn=Kt,Pn=rn.element,pn=rn.data,$t=rn.internalformat,en=rn.format,hn=rn.type,gn=rn.width,Dn=rn.height;xt(rn),Pn?He.texImage2D(xn,Tn,en,en,hn,Pn):rn.compressed?He.compressedTexImage2D(xn,Tn,$t,gn,Dn,0,pn):rn.needsCopy?(ot(),He.copyTexImage2D(xn,Tn,en,rn.xOffset,rn.yOffset,gn,Dn,0)):He.texImage2D(xn,Tn,en,gn,Dn,0,en,hn,pn||null)}}function Wt(){var Qt=On.pop()||new Dt;$e.call(Qt);for(var bn=Qt.mipmask=0;16>bn;++bn)Qt.images[bn]=null;return Qt}function Vt(Qt){for(var bn=Qt.images,Rt=0;Rt<bn.length;++Rt)bn[Rt]&&Ct(bn[Rt]),bn[Rt]=null;On.push(Qt)}function on(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Sn(Qt,bn){"min"in bn&&(Qt.minFilter=wn[bn.min],0<=Oe.indexOf(Qt.minFilter)&&!("faces"in bn)&&(Qt.genMipmaps=!0)),"mag"in bn&&(Qt.magFilter=An[bn.mag]);var Rt=Qt.wrapS,Kt=Qt.wrapT;if("wrap"in bn){var rn=bn.wrap;typeof rn=="string"?Rt=Kt=kn[rn]:Array.isArray(rn)&&(Rt=kn[rn[0]],Kt=kn[rn[1]])}else"wrapS"in bn&&(Rt=kn[bn.wrapS]),"wrapT"in bn&&(Kt=kn[bn.wrapT]);if(Qt.wrapS=Rt,Qt.wrapT=Kt,"anisotropic"in bn&&(Qt.anisotropic=bn.anisotropic),"mipmap"in bn){switch(Rt=!1,typeof bn.mipmap){case"string":Qt.mipmapHint=cn[bn.mipmap],Rt=Qt.genMipmaps=!0;break;case"boolean":Rt=Qt.genMipmaps=bn.mipmap;break;case"object":Qt.genMipmaps=!1,Rt=!0}!Rt||"min"in bn||(Qt.minFilter=9984)}}function Ln(Qt,bn){He.texParameteri(bn,10241,Qt.minFilter),He.texParameteri(bn,10240,Qt.magFilter),He.texParameteri(bn,10242,Qt.wrapS),He.texParameteri(bn,10243,Qt.wrapT),Je.ext_texture_filter_anisotropic&&He.texParameteri(bn,34046,Qt.anisotropic),Qt.genMipmaps&&(He.hint(33170,Qt.mipmapHint),He.generateMipmap(bn))}function fn(Qt){$e.call(this),this.mipmask=0,this.internalformat=6408,this.id=Hn++,this.refCount=1,this.target=Qt,this.texture=He.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new on,at.profile&&(this.stats={size:0})}function Zt(Qt){He.activeTexture(33984),He.bindTexture(Qt.target,Qt.texture)}function ln(){var Qt=nr[0];Qt?He.bindTexture(Qt.target,Qt.texture):He.bindTexture(3553,null)}function nn(Qt){var bn=Qt.texture,Rt=Qt.unit,Kt=Qt.target;0<=Rt&&(He.activeTexture(33984+Rt),He.bindTexture(Kt,null),nr[Rt]=null),He.deleteTexture(bn),Qt.texture=null,Qt.params=null,Qt.pixels=null,Qt.refCount=0,delete Bn[Qt.id],Ue.textureCount--}var cn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},kn={repeat:10497,clamp:33071,mirror:33648},An={nearest:9728,linear:9729},wn=ee({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},An),Cn={none:0,browser:37444},_n={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},zn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},qn={};Je.ext_srgb&&(zn.srgb=35904,zn.srgba=35906),Je.oes_texture_float&&(_n.float32=_n.float=5126),Je.oes_texture_half_float&&(_n.float16=_n["half float"]=36193),Je.webgl_depth_texture&&(ee(zn,{depth:6402,"depth stencil":34041}),ee(_n,{uint16:5123,uint32:5125,"depth stencil":34042})),Je.webgl_compressed_texture_s3tc&&ee(qn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Je.webgl_compressed_texture_atc&&ee(qn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Je.webgl_compressed_texture_pvrtc&&ee(qn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Je.webgl_compressed_texture_etc1&&(qn["rgb etc1"]=36196);var sr=Array.prototype.slice.call(He.getParameter(34467));Object.keys(qn).forEach(function(Qt){var bn=qn[Qt];0<=sr.indexOf(bn)&&(zn[Qt]=bn)});var pr=Object.keys(zn);lt.textureFormats=pr;var ir=[];Object.keys(zn).forEach(function(Qt){ir[zn[Qt]]=Qt});var Jn=[];Object.keys(_n).forEach(function(Qt){Jn[_n[Qt]]=Qt});var mr=[];Object.keys(An).forEach(function(Qt){mr[An[Qt]]=Qt});var qt=[];Object.keys(wn).forEach(function(Qt){qt[wn[Qt]]=Qt});var tn=[];Object.keys(kn).forEach(function(Qt){tn[kn[Qt]]=Qt});var dn=pr.reduce(function(Qt,bn){var Rt=zn[bn];return Rt===6409||Rt===6406||Rt===6409||Rt===6410||Rt===6402||Rt===34041||Je.ext_srgb&&(Rt===35904||Rt===35906)?Qt[Rt]=Rt:Rt===32855||0<=bn.indexOf("rgba")?Qt[Rt]=6408:Qt[Rt]=6407,Qt},{}),vn=[],On=[],Hn=0,Bn={},Vn=lt.maxTextureUnits,nr=Array(Vn).map(function(){return null});return ee(fn.prototype,{bind:function(){this.bindCount+=1;var Qt=this.unit;if(0>Qt){for(var bn=0;bn<Vn;++bn){var Rt=nr[bn];if(Rt){if(0<Rt.bindCount)continue;Rt.unit=-1}nr[bn]=this,Qt=bn;break}at.profile&&Ue.maxTextureUnits<Qt+1&&(Ue.maxTextureUnits=Qt+1),this.unit=Qt,He.activeTexture(33984+Qt),He.bindTexture(this.target,this.texture)}return Qt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&nn(this)}}),at.profile&&(Ue.getTotalTextureSize=function(){var Qt=0;return Object.keys(Bn).forEach(function(bn){Qt+=Bn[bn].stats.size}),Qt}),{create2D:function(Qt,bn){function Rt(rn,xn){var Tn=Kt.texInfo;on.call(Tn);var Pn=Wt();return typeof rn=="number"?Bt(Pn,0|rn,typeof xn=="number"?0|xn:0|rn):rn?(Sn(Tn,rn),Xt(Pn,rn)):Bt(Pn,1,1),Tn.genMipmaps&&(Pn.mipmask=(Pn.width<<1)-1),Kt.mipmask=Pn.mipmask,gt(Kt,Pn),Kt.internalformat=Pn.internalformat,Rt.width=Pn.width,Rt.height=Pn.height,Zt(Kt),an(Pn,3553),Ln(Tn,3553),ln(),Vt(Pn),at.profile&&(Kt.stats.size=f(Kt.internalformat,Kt.type,Pn.width,Pn.height,Tn.genMipmaps,!1)),Rt.format=ir[Kt.internalformat],Rt.type=Jn[Kt.type],Rt.mag=mr[Tn.magFilter],Rt.min=qt[Tn.minFilter],Rt.wrapS=tn[Tn.wrapS],Rt.wrapT=tn[Tn.wrapT],Rt}var Kt=new fn(3553);return Bn[Kt.id]=Kt,Ue.textureCount++,Rt(Qt,bn),Rt.subimage=function(rn,xn,Tn,Pn){xn|=0,Tn|=0,Pn|=0;var pn=bt();return gt(pn,Kt),pn.width=0,pn.height=0,Lt(pn,rn),pn.width=pn.width||(Kt.width>>Pn)-xn,pn.height=pn.height||(Kt.height>>Pn)-Tn,Zt(Kt),Tt(pn,3553,xn,Tn,Pn),ln(),Ct(pn),Rt},Rt.resize=function(rn,xn){var Tn=0|rn,Pn=0|xn||Tn;if(Tn===Kt.width&&Pn===Kt.height)return Rt;Rt.width=Kt.width=Tn,Rt.height=Kt.height=Pn,Zt(Kt);for(var pn=0;Kt.mipmask>>pn;++pn){var $t=Tn>>pn,en=Pn>>pn;if(!$t||!en)break;He.texImage2D(3553,pn,Kt.format,$t,en,0,Kt.format,Kt.type,null)}return ln(),at.profile&&(Kt.stats.size=f(Kt.internalformat,Kt.type,Tn,Pn,!1,!1)),Rt},Rt._reglType="texture2d",Rt._texture=Kt,at.profile&&(Rt.stats=Kt.stats),Rt.destroy=function(){Kt.decRef()},Rt},createCube:function(Qt,bn,Rt,Kt,rn,xn){function Tn($t,en,hn,gn,Dn,Fn){var Zn,Wn=Pn.texInfo;for(on.call(Wn),Zn=0;6>Zn;++Zn)pn[Zn]=Wt();if(typeof $t!="number"&&$t){if(typeof $t=="object")if(en)Xt(pn[0],$t),Xt(pn[1],en),Xt(pn[2],hn),Xt(pn[3],gn),Xt(pn[4],Dn),Xt(pn[5],Fn);else if(Sn(Wn,$t),yt(Pn,$t),"faces"in $t)for($t=$t.faces,Zn=0;6>Zn;++Zn)gt(pn[Zn],Pn),Xt(pn[Zn],$t[Zn]);else for(Zn=0;6>Zn;++Zn)Xt(pn[Zn],$t)}else for($t=0|$t||1,Zn=0;6>Zn;++Zn)Bt(pn[Zn],$t,$t);for(gt(Pn,pn[0]),Pn.mipmask=Wn.genMipmaps?(pn[0].width<<1)-1:pn[0].mipmask,Pn.internalformat=pn[0].internalformat,Tn.width=pn[0].width,Tn.height=pn[0].height,Zt(Pn),Zn=0;6>Zn;++Zn)an(pn[Zn],34069+Zn);for(Ln(Wn,34067),ln(),at.profile&&(Pn.stats.size=f(Pn.internalformat,Pn.type,Tn.width,Tn.height,Wn.genMipmaps,!0)),Tn.format=ir[Pn.internalformat],Tn.type=Jn[Pn.type],Tn.mag=mr[Wn.magFilter],Tn.min=qt[Wn.minFilter],Tn.wrapS=tn[Wn.wrapS],Tn.wrapT=tn[Wn.wrapT],Zn=0;6>Zn;++Zn)Vt(pn[Zn]);return Tn}var Pn=new fn(34067);Bn[Pn.id]=Pn,Ue.cubeCount++;var pn=Array(6);return Tn(Qt,bn,Rt,Kt,rn,xn),Tn.subimage=function($t,en,hn,gn,Dn){hn|=0,gn|=0,Dn|=0;var Fn=bt();return gt(Fn,Pn),Fn.width=0,Fn.height=0,Lt(Fn,en),Fn.width=Fn.width||(Pn.width>>Dn)-hn,Fn.height=Fn.height||(Pn.height>>Dn)-gn,Zt(Pn),Tt(Fn,34069+$t,hn,gn,Dn),ln(),Ct(Fn),Tn},Tn.resize=function($t){if(($t|=0)!==Pn.width){Tn.width=Pn.width=$t,Tn.height=Pn.height=$t,Zt(Pn);for(var en=0;6>en;++en)for(var hn=0;Pn.mipmask>>hn;++hn)He.texImage2D(34069+en,hn,Pn.format,$t>>hn,$t>>hn,0,Pn.format,Pn.type,null);return ln(),at.profile&&(Pn.stats.size=f(Pn.internalformat,Pn.type,Tn.width,Tn.height,!1,!0)),Tn}},Tn._reglType="textureCube",Tn._texture=Pn,at.profile&&(Tn.stats=Pn.stats),Tn.destroy=function(){Pn.decRef()},Tn},clear:function(){for(var Qt=0;Qt<Vn;++Qt)He.activeTexture(33984+Qt),He.bindTexture(3553,null),nr[Qt]=null;_e(Bn).forEach(nn),Ue.cubeCount=0,Ue.textureCount=0},getTexture:function(Qt){return null},restore:function(){for(var Qt=0;Qt<Vn;++Qt){var bn=nr[Qt];bn&&(bn.bindCount=0,bn.unit=-1,nr[Qt]=null)}_e(Bn).forEach(function(Rt){Rt.texture=He.createTexture(),He.bindTexture(Rt.target,Rt.texture);for(var Kt=0;32>Kt;++Kt)if(Rt.mipmask&1<<Kt)if(Rt.target===3553)He.texImage2D(3553,Kt,Rt.internalformat,Rt.width>>Kt,Rt.height>>Kt,0,Rt.internalformat,Rt.type,null);else for(var rn=0;6>rn;++rn)He.texImage2D(34069+rn,Kt,Rt.internalformat,Rt.width>>Kt,Rt.height>>Kt,0,Rt.internalformat,Rt.type,null);Ln(Rt.texInfo,Rt.target)})},refresh:function(){for(var Qt=0;Qt<Vn;++Qt){var bn=nr[Qt];bn&&(bn.bindCount=0,bn.unit=-1,nr[Qt]=null),He.activeTexture(33984+Qt),He.bindTexture(3553,null),He.bindTexture(34067,null)}}}}function M(He,Je,lt,ot,je,Ue){function at(fn,Zt,ln){this.target=fn,this.texture=Zt,this.renderbuffer=ln;var nn=fn=0;Zt?(fn=Zt.width,nn=Zt.height):ln&&(fn=ln.width,nn=ln.height),this.width=fn,this.height=nn}function $e(fn){fn&&(fn.texture&&fn.texture._texture.decRef(),fn.renderbuffer&&fn.renderbuffer._renderbuffer.decRef())}function gt(fn,Zt,ln){fn&&(fn.texture?fn.texture._texture.refCount+=1:fn.renderbuffer._renderbuffer.refCount+=1)}function yt(fn,Zt){Zt&&(Zt.texture?He.framebufferTexture2D(36160,fn,Zt.target,Zt.texture._texture.texture,0):He.framebufferRenderbuffer(36160,fn,36161,Zt.renderbuffer._renderbuffer.renderbuffer))}function xt(fn){var Zt=3553,ln=null,nn=null,cn=fn;return typeof fn=="object"&&(cn=fn.data,"target"in fn&&(Zt=0|fn.target)),(fn=cn._reglType)==="texture2d"||fn==="textureCube"?ln=cn:fn==="renderbuffer"&&(nn=cn,Zt=36161),new at(Zt,ln,nn)}function dt(fn,Zt,ln,nn,cn){return ln?((fn=ot.create2D({width:fn,height:Zt,format:nn,type:cn}))._texture.refCount=0,new at(3553,fn,null)):((fn=je.create({width:fn,height:Zt,format:nn}))._renderbuffer.refCount=0,new at(36161,null,fn))}function Lt(fn){return fn&&(fn.texture||fn.renderbuffer)}function Tt(fn,Zt,ln){fn&&(fn.texture?fn.texture.resize(Zt,ln):fn.renderbuffer&&fn.renderbuffer.resize(Zt,ln),fn.width=Zt,fn.height=ln)}function bt(){this.id=Sn++,Ln[this.id]=this,this.framebuffer=He.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ct(fn){fn.colorAttachments.forEach($e),$e(fn.depthAttachment),$e(fn.stencilAttachment),$e(fn.depthStencilAttachment)}function Dt(fn){He.deleteFramebuffer(fn.framebuffer),fn.framebuffer=null,Ue.framebufferCount--,delete Ln[fn.id]}function Bt(fn){var Zt;He.bindFramebuffer(36160,fn.framebuffer);var ln=fn.colorAttachments;for(Zt=0;Zt<ln.length;++Zt)yt(36064+Zt,ln[Zt]);for(Zt=ln.length;Zt<lt.maxColorAttachments;++Zt)He.framebufferTexture2D(36160,36064+Zt,3553,null,0);He.framebufferTexture2D(36160,33306,3553,null,0),He.framebufferTexture2D(36160,36096,3553,null,0),He.framebufferTexture2D(36160,36128,3553,null,0),yt(36096,fn.depthAttachment),yt(36128,fn.stencilAttachment),yt(33306,fn.depthStencilAttachment),He.checkFramebufferStatus(36160),He.isContextLost(),He.bindFramebuffer(36160,an.next?an.next.framebuffer:null),an.cur=an.next,He.getError()}function Xt(fn,Zt){function ln(cn,kn){var An,wn=0,Cn=0,_n=!0,zn=!0;An=null;var qn=!0,sr="rgba",pr="uint8",ir=1,Jn=null,mr=null,qt=null,tn=!1;typeof cn=="number"?(wn=0|cn,Cn=0|kn||wn):cn?("shape"in cn?(wn=(Cn=cn.shape)[0],Cn=Cn[1]):("radius"in cn&&(wn=Cn=cn.radius),"width"in cn&&(wn=cn.width),"height"in cn&&(Cn=cn.height)),("color"in cn||"colors"in cn)&&(An=cn.color||cn.colors,Array.isArray(An)),An||("colorCount"in cn&&(ir=0|cn.colorCount),"colorTexture"in cn&&(qn=!!cn.colorTexture,sr="rgba4"),"colorType"in cn&&(pr=cn.colorType,!qn)&&(pr==="half float"||pr==="float16"?sr="rgba16f":pr!=="float"&&pr!=="float32"||(sr="rgba32f")),"colorFormat"in cn&&(sr=cn.colorFormat,0<=Wt.indexOf(sr)?qn=!0:0<=Vt.indexOf(sr)&&(qn=!1))),("depthTexture"in cn||"depthStencilTexture"in cn)&&(tn=!(!cn.depthTexture&&!cn.depthStencilTexture)),"depth"in cn&&(typeof cn.depth=="boolean"?_n=cn.depth:(Jn=cn.depth,zn=!1)),"stencil"in cn&&(typeof cn.stencil=="boolean"?zn=cn.stencil:(mr=cn.stencil,_n=!1)),"depthStencil"in cn&&(typeof cn.depthStencil=="boolean"?_n=zn=cn.depthStencil:(qt=cn.depthStencil,zn=_n=!1))):wn=Cn=1;var dn=null,vn=null,On=null,Hn=null;if(Array.isArray(An))dn=An.map(xt);else if(An)dn=[xt(An)];else for(dn=Array(ir),An=0;An<ir;++An)dn[An]=dt(wn,Cn,qn,sr,pr);for(wn=wn||dn[0].width,Cn=Cn||dn[0].height,Jn?vn=xt(Jn):_n&&!zn&&(vn=dt(wn,Cn,tn,"depth","uint32")),mr?On=xt(mr):zn&&!_n&&(On=dt(wn,Cn,!1,"stencil","uint8")),qt?Hn=xt(qt):!Jn&&!mr&&zn&&_n&&(Hn=dt(wn,Cn,tn,"depth stencil","depth stencil")),_n=null,An=0;An<dn.length;++An)gt(dn[An]),dn[An]&&dn[An].texture&&(zn=Mt[dn[An].texture._texture.format]*_t[dn[An].texture._texture.type],_n===null&&(_n=zn));return gt(vn),gt(On),gt(Hn),Ct(nn),nn.width=wn,nn.height=Cn,nn.colorAttachments=dn,nn.depthAttachment=vn,nn.stencilAttachment=On,nn.depthStencilAttachment=Hn,ln.color=dn.map(Lt),ln.depth=Lt(vn),ln.stencil=Lt(On),ln.depthStencil=Lt(Hn),ln.width=nn.width,ln.height=nn.height,Bt(nn),ln}var nn=new bt;return Ue.framebufferCount++,ln(fn,Zt),ee(ln,{resize:function(cn,kn){var An=Math.max(0|cn,1),wn=Math.max(0|kn||An,1);if(An===nn.width&&wn===nn.height)return ln;for(var Cn=nn.colorAttachments,_n=0;_n<Cn.length;++_n)Tt(Cn[_n],An,wn);return Tt(nn.depthAttachment,An,wn),Tt(nn.stencilAttachment,An,wn),Tt(nn.depthStencilAttachment,An,wn),nn.width=ln.width=An,nn.height=ln.height=wn,Bt(nn),ln},_reglType:"framebuffer",_framebuffer:nn,destroy:function(){Dt(nn),Ct(nn)},use:function(cn){an.setFBO({framebuffer:ln},cn)}})}var an={cur:null,next:null,dirty:!1,setFBO:null},Wt=["rgba"],Vt=["rgba4","rgb565","rgb5 a1"];Je.ext_srgb&&Vt.push("srgba"),Je.ext_color_buffer_half_float&&Vt.push("rgba16f","rgb16f"),Je.webgl_color_buffer_float&&Vt.push("rgba32f");var on=["uint8"];Je.oes_texture_half_float&&on.push("half float","float16"),Je.oes_texture_float&&on.push("float","float32");var Sn=0,Ln={};return ee(an,{getFramebuffer:function(fn){return typeof fn=="function"&&fn._reglType==="framebuffer"&&(fn=fn._framebuffer)instanceof bt?fn:null},create:Xt,createCube:function(fn){function Zt(nn){var cn,kn={color:null},An=0,wn=null;cn="rgba";var Cn="uint8",_n=1;if(typeof nn=="number"?An=0|nn:nn?("shape"in nn?An=nn.shape[0]:("radius"in nn&&(An=0|nn.radius),"width"in nn?An=0|nn.width:"height"in nn&&(An=0|nn.height)),("color"in nn||"colors"in nn)&&(wn=nn.color||nn.colors,Array.isArray(wn)),wn||("colorCount"in nn&&(_n=0|nn.colorCount),"colorType"in nn&&(Cn=nn.colorType),"colorFormat"in nn&&(cn=nn.colorFormat)),"depth"in nn&&(kn.depth=nn.depth),"stencil"in nn&&(kn.stencil=nn.stencil),"depthStencil"in nn&&(kn.depthStencil=nn.depthStencil)):An=1,wn)if(Array.isArray(wn))for(nn=[],cn=0;cn<wn.length;++cn)nn[cn]=wn[cn];else nn=[wn];else for(nn=Array(_n),wn={radius:An,format:cn,type:Cn},cn=0;cn<_n;++cn)nn[cn]=ot.createCube(wn);for(kn.color=Array(nn.length),cn=0;cn<nn.length;++cn)_n=nn[cn],An=An||_n.width,kn.color[cn]={target:34069,data:nn[cn]};for(cn=0;6>cn;++cn){for(_n=0;_n<nn.length;++_n)kn.color[_n].target=34069+cn;0<cn&&(kn.depth=ln[0].depth,kn.stencil=ln[0].stencil,kn.depthStencil=ln[0].depthStencil),ln[cn]?ln[cn](kn):ln[cn]=Xt(kn)}return ee(Zt,{width:An,height:An,color:nn})}var ln=Array(6);return Zt(fn),ee(Zt,{faces:ln,resize:function(nn){var cn=0|nn;if(cn===Zt.width)return Zt;var kn=Zt.color;for(nn=0;nn<kn.length;++nn)kn[nn].resize(cn);for(nn=0;6>nn;++nn)ln[nn].resize(cn);return Zt.width=Zt.height=cn,Zt},_reglType:"framebufferCube",destroy:function(){ln.forEach(function(nn){nn.destroy()})}})},clear:function(){_e(Ln).forEach(Dt)},restore:function(){an.cur=null,an.next=null,an.dirty=!0,_e(Ln).forEach(function(fn){fn.framebuffer=He.createFramebuffer(),Bt(fn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function O(He,Je,lt,ot,je,Ue,at){function $e(){this.id=++xt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Tt=Je.oes_vertex_array_object;this.vao=Tt?Tt.createVertexArrayOES():null,dt[this.id]=this,this.buffers=[]}var gt=lt.maxAttributes,yt=Array(gt);for(lt=0;lt<gt;++lt)yt[lt]=new E;var xt=0,dt={},Lt={Record:E,scope:{},state:yt,currentVAO:null,targetVAO:null,restore:Je.oes_vertex_array_object?function(){Je.oes_vertex_array_object&&_e(dt).forEach(function(Tt){Tt.refresh()})}:function(){},createVAO:function(Tt){function bt(Dt){var Bt;Array.isArray(Dt)?(Bt=Dt,Ct.elements&&Ct.ownsElements&&Ct.elements.destroy(),Ct.elements=null,Ct.ownsElements=!1,Ct.offset=0,Ct.count=0,Ct.instances=-1,Ct.primitive=4):(Dt.elements?(Bt=Dt.elements,Ct.ownsElements?(typeof Bt=="function"&&Bt._reglType==="elements"?Ct.elements.destroy():Ct.elements(Bt),Ct.ownsElements=!1):Ue.getElements(Dt.elements)?(Ct.elements=Dt.elements,Ct.ownsElements=!1):(Ct.elements=Ue.create(Dt.elements),Ct.ownsElements=!0)):(Ct.elements=null,Ct.ownsElements=!1),Bt=Dt.attributes,Ct.offset=0,Ct.count=-1,Ct.instances=-1,Ct.primitive=4,Ct.elements&&(Ct.count=Ct.elements._elements.vertCount,Ct.primitive=Ct.elements._elements.primType),"offset"in Dt&&(Ct.offset=0|Dt.offset),"count"in Dt&&(Ct.count=0|Dt.count),"instances"in Dt&&(Ct.instances=0|Dt.instances),"primitive"in Dt&&(Ct.primitive=Le[Dt.primitive])),Dt={};var Xt=Ct.attributes;Xt.length=Bt.length;for(var an=0;an<Bt.length;++an){var Wt,Vt=Bt[an],on=Xt[an]=new E,Sn=Vt.data||Vt;Array.isArray(Sn)||xe(Sn)||t(Sn)?(Ct.buffers[an]&&(Wt=Ct.buffers[an],xe(Sn)&&Wt._buffer.byteLength>=Sn.byteLength?Wt.subdata(Sn):(Wt.destroy(),Ct.buffers[an]=null)),Ct.buffers[an]||(Wt=Ct.buffers[an]=je.create(Vt,34962,!1,!0)),on.buffer=je.getBuffer(Wt),on.size=0|on.buffer.dimension,on.normalized=!1,on.type=on.buffer.dtype,on.offset=0,on.stride=0,on.divisor=0,on.state=1,Dt[an]=1):je.getBuffer(Vt)?(on.buffer=je.getBuffer(Vt),on.size=0|on.buffer.dimension,on.normalized=!1,on.type=on.buffer.dtype,on.offset=0,on.stride=0,on.divisor=0,on.state=1):je.getBuffer(Vt.buffer)?(on.buffer=je.getBuffer(Vt.buffer),on.size=0|(+Vt.size||on.buffer.dimension),on.normalized=!!Vt.normalized||!1,on.type="type"in Vt?ke[Vt.type]:on.buffer.dtype,on.offset=0|(Vt.offset||0),on.stride=0|(Vt.stride||0),on.divisor=0|(Vt.divisor||0),on.state=1):"x"in Vt&&(on.x=+Vt.x||0,on.y=+Vt.y||0,on.z=+Vt.z||0,on.w=+Vt.w||0,on.state=2)}for(Wt=0;Wt<Ct.buffers.length;++Wt)!Dt[Wt]&&Ct.buffers[Wt]&&(Ct.buffers[Wt].destroy(),Ct.buffers[Wt]=null);return Ct.refresh(),bt}var Ct=new $e;return ot.vaoCount+=1,bt.destroy=function(){for(var Dt=0;Dt<Ct.buffers.length;++Dt)Ct.buffers[Dt]&&Ct.buffers[Dt].destroy();Ct.buffers.length=0,Ct.ownsElements&&(Ct.elements.destroy(),Ct.elements=null,Ct.ownsElements=!1),Ct.destroy()},bt._vao=Ct,bt._reglType="vao",bt(Tt)},getVAO:function(Tt){return typeof Tt=="function"&&Tt._vao?Tt._vao:null},destroyBuffer:function(Tt){for(var bt=0;bt<yt.length;++bt){var Ct=yt[bt];Ct.buffer===Tt&&(He.disableVertexAttribArray(bt),Ct.buffer=null)}},setVAO:Je.oes_vertex_array_object?function(Tt){if(Tt!==Lt.currentVAO){var bt=Je.oes_vertex_array_object;Tt?bt.bindVertexArrayOES(Tt.vao):bt.bindVertexArrayOES(null),Lt.currentVAO=Tt}}:function(Tt){if(Tt!==Lt.currentVAO){if(Tt)Tt.bindAttrs();else{for(var bt=Je.angle_instanced_arrays,Ct=0;Ct<yt.length;++Ct){var Dt=yt[Ct];Dt.buffer?(He.enableVertexAttribArray(Ct),Dt.buffer.bind(),He.vertexAttribPointer(Ct,Dt.size,Dt.type,Dt.normalized,Dt.stride,Dt.offfset),bt&&Dt.divisor&&bt.vertexAttribDivisorANGLE(Ct,Dt.divisor)):(He.disableVertexAttribArray(Ct),He.vertexAttrib4f(Ct,Dt.x,Dt.y,Dt.z,Dt.w))}at.elements?He.bindBuffer(34963,at.elements.buffer.buffer):He.bindBuffer(34963,null)}Lt.currentVAO=Tt}},clear:Je.oes_vertex_array_object?function(){_e(dt).forEach(function(Tt){Tt.destroy()})}:function(){}};return $e.prototype.bindAttrs=function(){for(var Tt=Je.angle_instanced_arrays,bt=this.attributes,Ct=0;Ct<bt.length;++Ct){var Dt=bt[Ct];Dt.buffer?(He.enableVertexAttribArray(Ct),He.bindBuffer(34962,Dt.buffer.buffer),He.vertexAttribPointer(Ct,Dt.size,Dt.type,Dt.normalized,Dt.stride,Dt.offset),Tt&&Dt.divisor&&Tt.vertexAttribDivisorANGLE(Ct,Dt.divisor)):(He.disableVertexAttribArray(Ct),He.vertexAttrib4f(Ct,Dt.x,Dt.y,Dt.z,Dt.w))}for(Tt=bt.length;Tt<gt;++Tt)He.disableVertexAttribArray(Tt);(Tt=Ue.getElements(this.elements))?He.bindBuffer(34963,Tt.buffer.buffer):He.bindBuffer(34963,null)},$e.prototype.refresh=function(){var Tt=Je.oes_vertex_array_object;Tt&&(Tt.bindVertexArrayOES(this.vao),this.bindAttrs(),Lt.currentVAO=null,Tt.bindVertexArrayOES(null))},$e.prototype.destroy=function(){if(this.vao){var Tt=Je.oes_vertex_array_object;this===Lt.currentVAO&&(Lt.currentVAO=null,Tt.bindVertexArrayOES(null)),Tt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),dt[this.id]&&(delete dt[this.id],--ot.vaoCount)},Lt}function P(He,Je,lt,ot){function je(bt,Ct,Dt,Bt){this.name=bt,this.id=Ct,this.location=Dt,this.info=Bt}function Ue(bt,Ct){for(var Dt=0;Dt<bt.length;++Dt)if(bt[Dt].id===Ct.id)return void(bt[Dt].location=Ct.location);bt.push(Ct)}function at(bt,Ct,Dt){if(!(Xt=(Dt=bt===35632?yt:xt)[Ct])){var Bt=Je.str(Ct),Xt=He.createShader(bt);He.shaderSource(Xt,Bt),He.compileShader(Xt),Dt[Ct]=Xt}return Xt}function $e(bt,Ct){this.id=Tt++,this.fragId=bt,this.vertId=Ct,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ot.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function gt(bt,Ct,Dt){var Bt;Bt=at(35632,bt.fragId);var Xt=at(35633,bt.vertId);if(Ct=bt.program=He.createProgram(),He.attachShader(Ct,Bt),He.attachShader(Ct,Xt),Dt)for(Bt=0;Bt<Dt.length;++Bt)Xt=Dt[Bt],He.bindAttribLocation(Ct,Xt[0],Xt[1]);He.linkProgram(Ct),Xt=He.getProgramParameter(Ct,35718),ot.profile&&(bt.stats.uniformsCount=Xt);var an=bt.uniforms;for(Bt=0;Bt<Xt;++Bt)if(Dt=He.getActiveUniform(Ct,Bt))if(1<Dt.size)for(var Wt=0;Wt<Dt.size;++Wt){var Vt=Dt.name.replace("[0]","["+Wt+"]");Ue(an,new je(Vt,Je.id(Vt),He.getUniformLocation(Ct,Vt),Dt))}else Ue(an,new je(Dt.name,Je.id(Dt.name),He.getUniformLocation(Ct,Dt.name),Dt));for(Xt=He.getProgramParameter(Ct,35721),ot.profile&&(bt.stats.attributesCount=Xt),bt=bt.attributes,Bt=0;Bt<Xt;++Bt)(Dt=He.getActiveAttrib(Ct,Bt))&&Ue(bt,new je(Dt.name,Je.id(Dt.name),He.getAttribLocation(Ct,Dt.name),Dt))}var yt={},xt={},dt={},Lt=[],Tt=0;return ot.profile&&(lt.getMaxUniformsCount=function(){var bt=0;return Lt.forEach(function(Ct){Ct.stats.uniformsCount>bt&&(bt=Ct.stats.uniformsCount)}),bt},lt.getMaxAttributesCount=function(){var bt=0;return Lt.forEach(function(Ct){Ct.stats.attributesCount>bt&&(bt=Ct.stats.attributesCount)}),bt}),{clear:function(){var bt=He.deleteShader.bind(He);_e(yt).forEach(bt),yt={},_e(xt).forEach(bt),xt={},Lt.forEach(function(Ct){He.deleteProgram(Ct.program)}),Lt.length=0,dt={},lt.shaderCount=0},program:function(bt,Ct,Dt,Bt){var Xt=dt[Ct];Xt||(Xt=dt[Ct]={});var an=Xt[bt];if(an&&(an.refCount++,!Bt))return an;var Wt=new $e(Ct,bt);return lt.shaderCount++,gt(Wt,Dt,Bt),an||(Xt[bt]=Wt),Lt.push(Wt),ee(Wt,{destroy:function(){if(Wt.refCount--,0>=Wt.refCount){He.deleteProgram(Wt.program);var Vt=Lt.indexOf(Wt);Lt.splice(Vt,1),lt.shaderCount--}0>=Xt[Wt.vertId].refCount&&(He.deleteShader(xt[Wt.vertId]),delete xt[Wt.vertId],delete dt[Wt.fragId][Wt.vertId]),Object.keys(dt[Wt.fragId]).length||(He.deleteShader(yt[Wt.fragId]),delete yt[Wt.fragId],delete dt[Wt.fragId])}})},restore:function(){yt={},xt={};for(var bt=0;bt<Lt.length;++bt)gt(Lt[bt],null,Lt[bt].attributes.map(function(Ct){return[Ct.location,Ct.name]}))},shader:at,frag:-1,vert:-1}}function I(He,Je,lt,ot,je,Ue,at){function $e(gt){var yt;yt=Je.next===null?5121:Je.next.colorAttachments[0].texture._texture.type;var xt=0,dt=0,Lt=ot.framebufferWidth,Tt=ot.framebufferHeight,bt=null;return xe(gt)?bt=gt:gt&&(xt=0|gt.x,dt=0|gt.y,Lt=0|(gt.width||ot.framebufferWidth-xt),Tt=0|(gt.height||ot.framebufferHeight-dt),bt=gt.data||null),lt(),gt=Lt*Tt*4,bt||(yt===5121?bt=new Uint8Array(gt):yt===5126&&(bt=bt||new Float32Array(gt))),He.pixelStorei(3333,4),He.readPixels(xt,dt,Lt,Tt,6408,yt,bt),bt}return function(gt){return gt&&"framebuffer"in gt?function(yt){var xt;return Je.setFBO({framebuffer:yt.framebuffer},function(){xt=$e(yt)}),xt}(gt):$e(gt)}}function z(He,Je){return He>>>Je|He<<32-Je}function U(He,Je){var lt=(65535&He)+(65535&Je);return(He>>16)+(Je>>16)+(lt>>16)<<16|65535&lt}function R(He){return Array.prototype.slice.call(He)}function j(He){return R(He).join("")}function Z(He){function Je(){var xt=[],dt=[];return ee(function(){xt.push.apply(xt,R(arguments))},{def:function(){var Lt="v"+je++;return dt.push(Lt),0<arguments.length&&(xt.push(Lt,"="),xt.push.apply(xt,R(arguments)),xt.push(";")),Lt},toString:function(){return j([0<dt.length?"var "+dt.join(",")+";":"",j(xt)])}})}function lt(){function xt(Ct,Dt){Lt(Ct,Dt,"=",dt.def(Ct,Dt),";")}var dt=Je(),Lt=Je(),Tt=dt.toString,bt=Lt.toString;return ee(function(){dt.apply(dt,R(arguments))},{def:dt.def,entry:dt,exit:Lt,save:xt,set:function(Ct,Dt,Bt){xt(Ct,Dt),dt(Ct,Dt,"=",Bt,";")},toString:function(){return Tt()+bt()}})}var ot=He&&He.cache,je=0,Ue=[],at=[],$e=[],gt=Je(),yt={};return{global:gt,link:function(xt,dt){var Lt=dt&&dt.stable;if(!Lt){for(var Tt=0;Tt<at.length;++Tt)if(at[Tt]===xt&&!$e[Tt])return Ue[Tt]}return Tt="g"+je++,Ue.push(Tt),at.push(xt),$e.push(Lt),Tt},block:Je,proc:function(xt,dt){function Lt(){var Dt="a"+Tt.length;return Tt.push(Dt),Dt}var Tt=[];dt=dt||0;for(var bt=0;bt<dt;++bt)Lt();var Ct=(bt=lt()).toString;return yt[xt]=ee(bt,{arg:Lt,toString:function(){return j(["function(",Tt.join(),"){",Ct(),"}"])}})},scope:lt,cond:function(){var xt=j(arguments),dt=lt(),Lt=lt(),Tt=dt.toString,bt=Lt.toString;return ee(dt,{then:function(){return dt.apply(dt,R(arguments)),this},else:function(){return Lt.apply(Lt,R(arguments)),this},toString:function(){var Ct=bt();return Ct&&(Ct="else{"+Ct+"}"),j(["if(",xt,"){",Tt(),"}",Ct])}})},compile:function(){var xt=['"use strict";',gt,"return {"];Object.keys(yt).forEach(function(Tt){xt.push('"',Tt,'":',yt[Tt].toString(),",")}),xt.push("}");var dt,Lt=j(xt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return ot&&(dt=function(Tt){for(var bt,Ct="",Dt=0;Dt<Tt.length;Dt++)bt=Tt.charCodeAt(Dt),Ct+="0123456789abcdef".charAt(bt>>>4&15)+"0123456789abcdef".charAt(15&bt);return Ct}(function(Tt){for(var bt=Array(Tt.length>>2),Ct=0;Ct<bt.length;Ct++)bt[Ct]=0;for(Ct=0;Ct<8*Tt.length;Ct+=8)bt[Ct>>5]|=(255&Tt.charCodeAt(Ct/8))<<24-Ct%32;var Dt,Bt,Xt,an,Wt,Vt,on,Sn,Ln,fn,Zt,ln=8*Tt.length;for(Tt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Ct=Array(64),bt[ln>>5]|=128<<24-ln%32,bt[15+(ln+64>>9<<4)]=ln,Sn=0;Sn<bt.length;Sn+=16){for(ln=Tt[0],Dt=Tt[1],Bt=Tt[2],Xt=Tt[3],an=Tt[4],Wt=Tt[5],Vt=Tt[6],on=Tt[7],Ln=0;64>Ln;Ln++){var nn;16>Ln?Ct[Ln]=bt[Ln+Sn]:(fn=Ln,Zt=U(Zt=z(Zt=Ct[Ln-2],17)^z(Zt,19)^Zt>>>10,Ct[Ln-7]),nn=z(nn=Ct[Ln-15],7)^z(nn,18)^nn>>>3,Ct[fn]=U(U(Zt,nn),Ct[Ln-16])),fn=U(U(U(U(on,fn=z(fn=an,6)^z(fn,11)^z(fn,25)),an&Wt^~an&Vt),it[Ln]),Ct[Ln]),Zt=U(on=z(on=ln,2)^z(on,13)^z(on,22),ln&Dt^ln&Bt^Dt&Bt),on=Vt,Vt=Wt,Wt=an,an=U(Xt,fn),Xt=Bt,Bt=Dt,Dt=ln,ln=U(fn,Zt)}Tt[0]=U(ln,Tt[0]),Tt[1]=U(Dt,Tt[1]),Tt[2]=U(Bt,Tt[2]),Tt[3]=U(Xt,Tt[3]),Tt[4]=U(an,Tt[4]),Tt[5]=U(Wt,Tt[5]),Tt[6]=U(Vt,Tt[6]),Tt[7]=U(on,Tt[7])}for(bt="",Ct=0;Ct<32*Tt.length;Ct+=8)bt+=String.fromCharCode(Tt[Ct>>5]>>>24-Ct%32&255);return bt}(function(Tt){for(var bt,Ct,Dt="",Bt=-1;++Bt<Tt.length;)bt=Tt.charCodeAt(Bt),Ct=Bt+1<Tt.length?Tt.charCodeAt(Bt+1):0,55296<=bt&&56319>=bt&&56320<=Ct&&57343>=Ct&&(bt=65536+((1023&bt)<<10)+(1023&Ct),Bt++),127>=bt?Dt+=String.fromCharCode(bt):2047>=bt?Dt+=String.fromCharCode(192|bt>>>6&31,128|63&bt):65535>=bt?Dt+=String.fromCharCode(224|bt>>>12&15,128|bt>>>6&63,128|63&bt):2097151>=bt&&(Dt+=String.fromCharCode(240|bt>>>18&7,128|bt>>>12&63,128|bt>>>6&63,128|63&bt));return Dt}(Lt))),ot[dt])?ot[dt].apply(null,at):(Lt=Function.apply(null,Ue.concat(Lt)),ot&&(ot[dt]=Lt),Lt.apply(null,at))}}}function F(He){return Array.isArray(He)||xe(He)||t(He)}function V(He){return He.sort(function(Je,lt){return Je==="viewport"?-1:lt==="viewport"?1:Je<lt?-1:1})}function H(He,Je,lt,ot){this.thisDep=He,this.contextDep=Je,this.propDep=lt,this.append=ot}function te(He){return He&&!(He.thisDep||He.contextDep||He.propDep)}function $(He){return new H(!1,!1,!1,He)}function J(He,Je){var lt=He.type;if(lt===0)return new H(!0,1<=(lt=He.data.length),2<=lt,Je);if(lt===4)return new H((lt=He.data).thisDep,lt.contextDep,lt.propDep,Je);if(lt===5)return new H(!1,!1,!1,Je);if(lt===6){for(var ot=lt=!1,je=!1,Ue=0;Ue<He.data.length;++Ue){var at=He.data[Ue];at.type===1?je=!0:at.type===2?ot=!0:at.type===3?lt=!0:at.type===0?(lt=!0,1<=(at=at.data)&&(ot=!0),2<=at&&(je=!0)):at.type===4&&(lt=lt||at.data.thisDep,ot=ot||at.data.contextDep,je=je||at.data.propDep)}return new H(lt,ot,je,Je)}return new H(lt===3,lt===2,lt===1,Je)}function X(He,Je,lt,ot,je,Ue,at,$e,gt,yt,xt,dt,Lt,Tt,bt,Ct){function Dt(Rt){return Rt.replace(".","_")}function Bt(Rt,Kt,rn){var xn=Dt(Rt);Hn.push(Rt),On[xn]=vn[xn]=!!rn,Bn[xn]=Kt}function Xt(Rt,Kt,rn){var xn=Dt(Rt);Hn.push(Rt),Array.isArray(rn)?(vn[xn]=rn.slice(),On[xn]=rn.slice()):vn[xn]=On[xn]=rn,Vn[xn]=Kt}function an(){var Rt=Z({cache:bt}),Kt=Rt.link,rn=Rt.global;Rt.id=bn++,Rt.batchId="0";var xn=Kt(nr),Tn=Rt.shared={props:"a0"};Object.keys(nr).forEach(function(hn){Tn[hn]=rn.def(xn,".",hn)});var Pn=Rt.next={},pn=Rt.current={};Object.keys(Vn).forEach(function(hn){Array.isArray(vn[hn])&&(Pn[hn]=rn.def(Tn.next,".",hn),pn[hn]=rn.def(Tn.current,".",hn))});var $t=Rt.constants={};Object.keys(Qt).forEach(function(hn){$t[hn]=rn.def(JSON.stringify(Qt[hn]))}),Rt.invoke=function(hn,gn){switch(gn.type){case 0:var Dn=["this",Tn.context,Tn.props,Rt.batchId];return hn.def(Kt(gn.data),".call(",Dn.slice(0,Math.max(gn.data.length+1,4)),")");case 1:return hn.def(Tn.props,gn.data);case 2:return hn.def(Tn.context,gn.data);case 3:return hn.def("this",gn.data);case 4:return gn.data.append(Rt,hn),gn.data.ref;case 5:return gn.data.toString();case 6:return gn.data.map(function(Fn){return Rt.invoke(hn,Fn)})}},Rt.attribCache={};var en={};return Rt.scopeAttrib=function(hn){if((hn=Je.id(hn))in en)return en[hn];var gn=yt.scope[hn];return gn||(gn=yt.scope[hn]=new Jn),en[hn]=Kt(gn)},Rt}function Wt(Rt,Kt){var rn=Rt.static,xn=Rt.dynamic;if("framebuffer"in rn){var Tn=rn.framebuffer;return Tn?(Tn=$e.getFramebuffer(Tn),$(function(pn,$t){var en=pn.link(Tn),hn=pn.shared;return $t.set(hn.framebuffer,".next",en),hn=hn.context,$t.set(hn,".framebufferWidth",en+".width"),$t.set(hn,".framebufferHeight",en+".height"),en})):$(function(pn,$t){var en=pn.shared;return $t.set(en.framebuffer,".next","null"),en=en.context,$t.set(en,".framebufferWidth",en+".drawingBufferWidth"),$t.set(en,".framebufferHeight",en+".drawingBufferHeight"),"null"})}if("framebuffer"in xn){var Pn=xn.framebuffer;return J(Pn,function(pn,$t){var en=pn.invoke($t,Pn),hn=pn.shared,gn=hn.framebuffer;return en=$t.def(gn,".getFramebuffer(",en,")"),$t.set(gn,".next",en),hn=hn.context,$t.set(hn,".framebufferWidth",en+"?"+en+".width:"+hn+".drawingBufferWidth"),$t.set(hn,".framebufferHeight",en+"?"+en+".height:"+hn+".drawingBufferHeight"),en})}return null}function Vt(Rt,Kt,rn){function xn(hn){if(hn in Tn){var gn=Je.id(Tn[hn]);return(hn=$(function(){return gn})).id=gn,hn}if(hn in Pn){var Dn=Pn[hn];return J(Dn,function(Fn,Zn){var Wn=Fn.invoke(Zn,Dn);return Zn.def(Fn.shared.strings,".id(",Wn,")")})}return null}var Tn=Rt.static,Pn=Rt.dynamic,pn=xn("frag"),$t=xn("vert"),en=null;return te(pn)&&te($t)?(en=xt.program($t.id,pn.id,null,rn),Rt=$(function(hn,gn){return hn.link(en)})):Rt=new H(pn&&pn.thisDep||$t&&$t.thisDep,pn&&pn.contextDep||$t&&$t.contextDep,pn&&pn.propDep||$t&&$t.propDep,function(hn,gn){var Dn,Fn,Zn=hn.shared.shader;return Dn=pn?pn.append(hn,gn):gn.def(Zn,".","frag"),Fn=$t?$t.append(hn,gn):gn.def(Zn,".","vert"),gn.def(Zn+".program("+Fn+","+Dn+")")}),{frag:pn,vert:$t,progVar:Rt,program:en}}function on(Rt,Kt){function rn(Wn,tr){if(Wn in xn){var Qn=0|xn[Wn];return tr?Pn.offset=Qn:Pn.instances=Qn,$(function(hr,fr){return tr&&(hr.OFFSET=Qn),Qn})}if(Wn in Tn){var or=Tn[Wn];return J(or,function(hr,fr){var xr=hr.invoke(fr,or);return tr&&(hr.OFFSET=xr),xr})}if(tr){if(en)return $(function(hr,fr){return hr.OFFSET=0});if(pn)return new H($t.thisDep,$t.contextDep,$t.propDep,function(hr,fr){return fr.def(hr.shared.vao+".currentVAO?"+hr.shared.vao+".currentVAO.offset:0")})}else if(pn)return new H($t.thisDep,$t.contextDep,$t.propDep,function(hr,fr){return fr.def(hr.shared.vao+".currentVAO?"+hr.shared.vao+".currentVAO.instances:-1")});return null}var xn=Rt.static,Tn=Rt.dynamic,Pn={},pn=!1,$t=function(){if("vao"in xn){var Wn=xn.vao;return Wn!==null&&yt.getVAO(Wn)===null&&(Wn=yt.createVAO(Wn)),pn=!0,Pn.vao=Wn,$(function(Qn){var or=yt.getVAO(Wn);return or?Qn.link(or):"null"})}if("vao"in Tn){pn=!0;var tr=Tn.vao;return J(tr,function(Qn,or){var hr=Qn.invoke(or,tr);return or.def(Qn.shared.vao+".getVAO("+hr+")")})}return null}(),en=!1,hn=function(){if("elements"in xn){var Wn=xn.elements;if(Pn.elements=Wn,F(Wn)){var tr=Pn.elements=Ue.create(Wn,!0);Wn=Ue.getElements(tr),en=!0}else Wn&&(Wn=Ue.getElements(Wn),en=!0);return tr=$(function(or,hr){if(Wn){var fr=or.link(Wn);return or.ELEMENTS=fr}return or.ELEMENTS=null}),tr.value=Wn,tr}if("elements"in Tn){en=!0;var Qn=Tn.elements;return J(Qn,function(or,hr){var fr=(xr=or.shared).isBufferArgs,xr=xr.elements,yr=or.invoke(hr,Qn),Ir=hr.def("null");return fr=hr.def(fr,"(",yr,")"),yr=or.cond(fr).then(Ir,"=",xr,".createStream(",yr,");").else(Ir,"=",xr,".getElements(",yr,");"),hr.entry(yr),hr.exit(or.cond(fr).then(xr,".destroyStream(",Ir,");")),or.ELEMENTS=Ir})}return pn?new H($t.thisDep,$t.contextDep,$t.propDep,function(or,hr){return hr.def(or.shared.vao+".currentVAO?"+or.shared.elements+".getElements("+or.shared.vao+".currentVAO.elements):null")}):null}(),gn=rn("offset",!0),Dn=function(){if("primitive"in xn){var Wn=xn.primitive;return Pn.primitive=Wn,$(function(Qn,or){return Le[Wn]})}if("primitive"in Tn){var tr=Tn.primitive;return J(tr,function(Qn,or){var hr=Qn.constants.primTypes,fr=Qn.invoke(or,tr);return or.def(hr,"[",fr,"]")})}return en?te(hn)?hn.value?$(function(Qn,or){return or.def(Qn.ELEMENTS,".primType")}):$(function(){return 4}):new H(hn.thisDep,hn.contextDep,hn.propDep,function(Qn,or){var hr=Qn.ELEMENTS;return or.def(hr,"?",hr,".primType:",4)}):pn?new H($t.thisDep,$t.contextDep,$t.propDep,function(Qn,or){return or.def(Qn.shared.vao+".currentVAO?"+Qn.shared.vao+".currentVAO.primitive:4")}):null}(),Fn=function(){if("count"in xn){var Wn=0|xn.count;return Pn.count=Wn,$(function(){return Wn})}if("count"in Tn){var tr=Tn.count;return J(tr,function(Qn,or){return Qn.invoke(or,tr)})}return en?te(hn)?hn?gn?new H(gn.thisDep,gn.contextDep,gn.propDep,function(Qn,or){return or.def(Qn.ELEMENTS,".vertCount-",Qn.OFFSET)}):$(function(Qn,or){return or.def(Qn.ELEMENTS,".vertCount")}):$(function(){return-1}):new H(hn.thisDep||gn.thisDep,hn.contextDep||gn.contextDep,hn.propDep||gn.propDep,function(Qn,or){var hr=Qn.ELEMENTS;return Qn.OFFSET?or.def(hr,"?",hr,".vertCount-",Qn.OFFSET,":-1"):or.def(hr,"?",hr,".vertCount:-1")}):pn?new H($t.thisDep,$t.contextDep,$t.propDep,function(Qn,or){return or.def(Qn.shared.vao,".currentVAO?",Qn.shared.vao,".currentVAO.count:-1")}):null}(),Zn=rn("instances",!1);return{elements:hn,primitive:Dn,count:Fn,instances:Zn,offset:gn,vao:$t,vaoActive:pn,elementsActive:en,static:Pn}}function Sn(Rt,Kt){var rn=Rt.static,xn=Rt.dynamic,Tn={};return Object.keys(rn).forEach(function(Pn){var pn=rn[Pn],$t=Je.id(Pn),en=new Jn;if(F(pn))en.state=1,en.buffer=je.getBuffer(je.create(pn,34962,!1,!0)),en.type=0;else if(gn=je.getBuffer(pn))en.state=1,en.buffer=gn,en.type=0;else if("constant"in pn){var hn=pn.constant;en.buffer="null",en.state=2,typeof hn=="number"?en.x=hn:st.forEach(function(Qn,or){or<hn.length&&(en[Qn]=hn[or])})}else{var gn=F(pn.buffer)?je.getBuffer(je.create(pn.buffer,34962,!1,!0)):je.getBuffer(pn.buffer),Dn=0|pn.offset,Fn=0|pn.stride,Zn=0|pn.size,Wn=!!pn.normalized,tr=0;"type"in pn&&(tr=ke[pn.type]),pn=0|pn.divisor,en.buffer=gn,en.state=1,en.size=Zn,en.normalized=Wn,en.type=tr||gn.dtype,en.offset=Dn,en.stride=Fn,en.divisor=pn}Tn[Pn]=$(function(Qn,or){var hr=Qn.attribCache;if($t in hr)return hr[$t];var fr={isStream:!1};return Object.keys(en).forEach(function(xr){fr[xr]=en[xr]}),en.buffer&&(fr.buffer=Qn.link(en.buffer),fr.type=fr.type||fr.buffer+".dtype"),hr[$t]=fr})}),Object.keys(xn).forEach(function(Pn){var pn=xn[Pn];Tn[Pn]=J(pn,function($t,en){function hn(hr){en(Wn[hr],"=",gn,".",hr,"|0;")}var gn=$t.invoke(en,pn),Dn=$t.shared,Fn=$t.constants,Zn=Dn.isBufferArgs,Wn=(Dn=Dn.buffer,{isStream:en.def(!1)}),tr=new Jn;tr.state=1,Object.keys(tr).forEach(function(hr){Wn[hr]=en.def(""+tr[hr])});var Qn=Wn.buffer,or=Wn.type;return en("if(",Zn,"(",gn,")){",Wn.isStream,"=true;",Qn,"=",Dn,".createStream(",34962,",",gn,");",or,"=",Qn,".dtype;","}else{",Qn,"=",Dn,".getBuffer(",gn,");","if(",Qn,"){",or,"=",Qn,".dtype;",'}else if("constant" in ',gn,"){",Wn.state,"=",2,";","if(typeof "+gn+'.constant === "number"){',Wn[st[0]],"=",gn,".constant;",st.slice(1).map(function(hr){return Wn[hr]}).join("="),"=0;","}else{",st.map(function(hr,fr){return Wn[hr]+"="+gn+".constant.length>"+fr+"?"+gn+".constant["+fr+"]:0;"}).join(""),"}}else{","if(",Zn,"(",gn,".buffer)){",Qn,"=",Dn,".createStream(",34962,",",gn,".buffer);","}else{",Qn,"=",Dn,".getBuffer(",gn,".buffer);","}",or,'="type" in ',gn,"?",Fn.glTypes,"[",gn,".type]:",Qn,".dtype;",Wn.normalized,"=!!",gn,".normalized;"),hn("size"),hn("offset"),hn("stride"),hn("divisor"),en("}}"),en.exit("if(",Wn.isStream,"){",Dn,".destroyStream(",Qn,");","}"),Wn})}),Tn}function Ln(Rt,Kt,rn,xn,Tn){function Pn(tr){var Qn=$t[tr];Qn&&(hn[tr]=Qn)}var pn=function(tr,Qn){if(typeof(or=tr.static).frag=="string"&&typeof or.vert=="string"){if(0<Object.keys(Qn.dynamic).length)return null;var or=Qn.static,hr=Object.keys(or);if(0<hr.length&&typeof or[hr[0]]=="number"){for(var fr=[],xr=0;xr<hr.length;++xr)fr.push([0|or[hr[xr]],hr[xr]]);return fr}}return null}(Rt,Kt),$t=function(tr,Qn,or){function hr(Ir){if(Ir in fr){var lr=fr[Ir];Ir=!0;var kr,Fr,Wr=0|lr.x,ki=0|lr.y;return"width"in lr?kr=0|lr.width:Ir=!1,"height"in lr?Fr=0|lr.height:Ir=!1,new H(!Ir&&Qn&&Qn.thisDep,!Ir&&Qn&&Qn.contextDep,!Ir&&Qn&&Qn.propDep,function(aa,bi){var Ji=aa.shared.context,Ba=kr;"width"in lr||(Ba=bi.def(Ji,".","framebufferWidth","-",Wr));var Na=Fr;return"height"in lr||(Na=bi.def(Ji,".","framebufferHeight","-",ki)),[Wr,ki,Ba,Na]})}if(Ir in xr){var Ai=xr[Ir];return Ir=J(Ai,function(aa,bi){var Ji=aa.invoke(bi,Ai),Ba=aa.shared.context,Na=bi.def(Ji,".x|0"),Ss=bi.def(Ji,".y|0");return[Na,Ss,bi.def('"width" in ',Ji,"?",Ji,".width|0:","(",Ba,".","framebufferWidth","-",Na,")"),Ji=bi.def('"height" in ',Ji,"?",Ji,".height|0:","(",Ba,".","framebufferHeight","-",Ss,")")]}),Qn&&(Ir.thisDep=Ir.thisDep||Qn.thisDep,Ir.contextDep=Ir.contextDep||Qn.contextDep,Ir.propDep=Ir.propDep||Qn.propDep),Ir}return Qn?new H(Qn.thisDep,Qn.contextDep,Qn.propDep,function(aa,bi){var Ji=aa.shared.context;return[0,0,bi.def(Ji,".","framebufferWidth"),bi.def(Ji,".","framebufferHeight")]}):null}var fr=tr.static,xr=tr.dynamic;if(tr=hr("viewport")){var yr=tr;tr=new H(tr.thisDep,tr.contextDep,tr.propDep,function(Ir,lr){var kr=yr.append(Ir,lr),Fr=Ir.shared.context;return lr.set(Fr,".viewportWidth",kr[2]),lr.set(Fr,".viewportHeight",kr[3]),kr})}return{viewport:tr,scissor_box:hr("scissor.box")}}(Rt,Dn=Wt(Rt)),en=on(Rt),hn=function(tr,Qn){var or=tr.static,hr=tr.dynamic,fr={};return Hn.forEach(function(xr){function yr(lr,kr){if(xr in or){var Fr=lr(or[xr]);fr[Ir]=$(function(){return Fr})}else if(xr in hr){var Wr=hr[xr];fr[Ir]=J(Wr,function(ki,Ai){return kr(ki,Ai,ki.invoke(Ai,Wr))})}}var Ir=Dt(xr);switch(xr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return yr(function(lr){return lr},function(lr,kr,Fr){return Fr});case"depth.func":return yr(function(lr){return Ft[lr]},function(lr,kr,Fr){return kr.def(lr.constants.compareFuncs,"[",Fr,"]")});case"depth.range":return yr(function(lr){return lr},function(lr,kr,Fr){return[kr.def("+",Fr,"[0]"),kr=kr.def("+",Fr,"[1]")]});case"blend.func":return yr(function(lr){return[zt["srcRGB"in lr?lr.srcRGB:lr.src],zt["dstRGB"in lr?lr.dstRGB:lr.dst],zt["srcAlpha"in lr?lr.srcAlpha:lr.src],zt["dstAlpha"in lr?lr.dstAlpha:lr.dst]]},function(lr,kr,Fr){function Wr(bi,Ji){return kr.def('"',bi,Ji,'" in ',Fr,"?",Fr,".",bi,Ji,":",Fr,".",bi)}lr=lr.constants.blendFuncs;var ki=Wr("src","RGB"),Ai=Wr("dst","RGB"),aa=(ki=kr.def(lr,"[",ki,"]"),kr.def(lr,"[",Wr("src","Alpha"),"]"));return[ki,Ai=kr.def(lr,"[",Ai,"]"),aa,lr=kr.def(lr,"[",Wr("dst","Alpha"),"]")]});case"blend.equation":return yr(function(lr){return typeof lr=="string"?[mr[lr],mr[lr]]:typeof lr=="object"?[mr[lr.rgb],mr[lr.alpha]]:void 0},function(lr,kr,Fr){var Wr=lr.constants.blendEquations,ki=kr.def(),Ai=kr.def();return(lr=lr.cond("typeof ",Fr,'==="string"')).then(ki,"=",Ai,"=",Wr,"[",Fr,"];"),lr.else(ki,"=",Wr,"[",Fr,".rgb];",Ai,"=",Wr,"[",Fr,".alpha];"),kr(lr),[ki,Ai]});case"blend.color":return yr(function(lr){return v(4,function(kr){return+lr[kr]})},function(lr,kr,Fr){return v(4,function(Wr){return kr.def("+",Fr,"[",Wr,"]")})});case"stencil.mask":return yr(function(lr){return 0|lr},function(lr,kr,Fr){return kr.def(Fr,"|0")});case"stencil.func":return yr(function(lr){return[Ft[lr.cmp||"keep"],lr.ref||0,"mask"in lr?lr.mask:-1]},function(lr,kr,Fr){return[lr=kr.def('"cmp" in ',Fr,"?",lr.constants.compareFuncs,"[",Fr,".cmp]",":",7680),kr.def(Fr,".ref|0"),kr=kr.def('"mask" in ',Fr,"?",Fr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return yr(function(lr){return[xr==="stencil.opBack"?1029:1028,Pt[lr.fail||"keep"],Pt[lr.zfail||"keep"],Pt[lr.zpass||"keep"]]},function(lr,kr,Fr){function Wr(Ai){return kr.def('"',Ai,'" in ',Fr,"?",ki,"[",Fr,".",Ai,"]:",7680)}var ki=lr.constants.stencilOps;return[xr==="stencil.opBack"?1029:1028,Wr("fail"),Wr("zfail"),Wr("zpass")]});case"polygonOffset.offset":return yr(function(lr){return[0|lr.factor,0|lr.units]},function(lr,kr,Fr){return[kr.def(Fr,".factor|0"),kr=kr.def(Fr,".units|0")]});case"cull.face":return yr(function(lr){var kr=0;return lr==="front"?kr=1028:lr==="back"&&(kr=1029),kr},function(lr,kr,Fr){return kr.def(Fr,'==="front"?',1028,":",1029)});case"frontFace":return yr(function(lr){return Xe[lr]},function(lr,kr,Fr){return kr.def(Fr+'==="cw"?2304:2305')});case"colorMask":return yr(function(lr){return lr.map(function(kr){return!!kr})},function(lr,kr,Fr){return v(4,function(Wr){return"!!"+Fr+"["+Wr+"]"})});case"sample.coverage":return yr(function(lr){return["value"in lr?lr.value:1,!!lr.invert]},function(lr,kr,Fr){return[kr.def('"value" in ',Fr,"?+",Fr,".value:1"),kr=kr.def("!!",Fr,".invert")]})}}),fr}(Rt),gn=Vt(Rt,0,pn);Pn("viewport"),Pn(Dt("scissor.box"));var Dn,Fn=0<Object.keys(hn).length;if((Dn={framebuffer:Dn,draw:en,shader:gn,state:hn,dirty:Fn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(tr){var Qn,or=tr.static;if(tr=tr.dynamic,"profile"in or){var hr=!!or.profile;(Qn=$(function(xr,yr){return hr})).enable=hr}else if("profile"in tr){var fr=tr.profile;Qn=J(fr,function(xr,yr){return xr.invoke(yr,fr)})}return Qn}(Rt),Dn.uniforms=function(tr,Qn){var or=tr.static,hr=tr.dynamic,fr={};return Object.keys(or).forEach(function(xr){var yr,Ir=or[xr];if(typeof Ir=="number"||typeof Ir=="boolean")yr=$(function(){return Ir});else if(typeof Ir=="function"){var lr=Ir._reglType;lr==="texture2d"||lr==="textureCube"?yr=$(function(kr){return kr.link(Ir)}):lr!=="framebuffer"&&lr!=="framebufferCube"||(yr=$(function(kr){return kr.link(Ir.color[0])}))}else b(Ir)&&(yr=$(function(kr){return kr.global.def("[",v(Ir.length,function(Fr){return Ir[Fr]}),"]")}));yr.value=Ir,fr[xr]=yr}),Object.keys(hr).forEach(function(xr){var yr=hr[xr];fr[xr]=J(yr,function(Ir,lr){return Ir.invoke(lr,yr)})}),fr}(rn),Dn.drawVAO=Dn.scopeVAO=en.vao,!Dn.drawVAO&&gn.program&&!pn&&lt.angle_instanced_arrays&&en.static.elements){var Zn=!0;if(Rt=gn.program.attributes.map(function(tr){return tr=Kt.static[tr],Zn=Zn&&!!tr,tr}),Zn&&0<Rt.length){var Wn=yt.getVAO(yt.createVAO({attributes:Rt,elements:en.static.elements}));Dn.drawVAO=new H(null,null,null,function(tr,Qn){return tr.link(Wn)}),Dn.useVAO=!0}}return pn?Dn.useVAO=!0:Dn.attributes=Sn(Kt),Dn.context=function(tr){var Qn=tr.static,or=tr.dynamic,hr={};return Object.keys(Qn).forEach(function(fr){var xr=Qn[fr];hr[fr]=$(function(yr,Ir){return typeof xr=="number"||typeof xr=="boolean"?""+xr:yr.link(xr)})}),Object.keys(or).forEach(function(fr){var xr=or[fr];hr[fr]=J(xr,function(yr,Ir){return yr.invoke(Ir,xr)})}),hr}(xn),Dn}function fn(Rt,Kt,rn){var xn=Rt.shared.context,Tn=Rt.scope();Object.keys(rn).forEach(function(Pn){Kt.save(xn,"."+Pn);var pn=rn[Pn].append(Rt,Kt);Array.isArray(pn)?Tn(xn,".",Pn,"=[",pn.join(),"];"):Tn(xn,".",Pn,"=",pn,";")}),Kt(Tn)}function Zt(Rt,Kt,rn,xn){var Tn,Pn=($t=Rt.shared).gl,pn=$t.framebuffer;tn&&(Tn=Kt.def($t.extensions,".webgl_draw_buffers"));var $t=(en=Rt.constants).drawBuffer,en=en.backBuffer;Rt=rn?rn.append(Rt,Kt):Kt.def(pn,".next"),xn||Kt("if(",Rt,"!==",pn,".cur){"),Kt("if(",Rt,"){",Pn,".bindFramebuffer(",36160,",",Rt,".framebuffer);"),tn&&Kt(Tn,".drawBuffersWEBGL(",$t,"[",Rt,".colorAttachments.length]);"),Kt("}else{",Pn,".bindFramebuffer(",36160,",null);"),tn&&Kt(Tn,".drawBuffersWEBGL(",en,");"),Kt("}",pn,".cur=",Rt,";"),xn||Kt("}")}function ln(Rt,Kt,rn){var xn=Rt.shared,Tn=xn.gl,Pn=Rt.current,pn=Rt.next,$t=xn.current,en=xn.next,hn=Rt.cond($t,".dirty");Hn.forEach(function(gn){var Dn,Fn;if(!((gn=Dt(gn))in rn.state))if(gn in pn){Dn=pn[gn],Fn=Pn[gn];var Zn=v(vn[gn].length,function(Wn){return hn.def(Dn,"[",Wn,"]")});hn(Rt.cond(Zn.map(function(Wn,tr){return Wn+"!=="+Fn+"["+tr+"]"}).join("||")).then(Tn,".",Vn[gn],"(",Zn,");",Zn.map(function(Wn,tr){return Fn+"["+tr+"]="+Wn}).join(";"),";"))}else Dn=hn.def(en,".",gn),Zn=Rt.cond(Dn,"!==",$t,".",gn),hn(Zn),gn in Bn?Zn(Rt.cond(Dn).then(Tn,".enable(",Bn[gn],");").else(Tn,".disable(",Bn[gn],");"),$t,".",gn,"=",Dn,";"):Zn(Tn,".",Vn[gn],"(",Dn,");",$t,".",gn,"=",Dn,";")}),Object.keys(rn.state).length===0&&hn($t,".dirty=false;"),Kt(hn)}function nn(Rt,Kt,rn,xn){var Tn,Pn=Rt.shared,pn=Rt.current,$t=Pn.current,en=Pn.gl;V(Object.keys(rn)).forEach(function(hn){var gn=rn[hn];if(!xn||xn(gn)){var Dn=gn.append(Rt,Kt);if(Bn[hn]){var Fn=Bn[hn];te(gn)?(Tn=Rt.link(Dn,{stable:!0}),Kt(Rt.cond(Tn).then(en,".enable(",Fn,");").else(en,".disable(",Fn,");")),Kt($t,".",hn,"=",Tn,";")):(Kt(Rt.cond(Dn).then(en,".enable(",Fn,");").else(en,".disable(",Fn,");")),Kt($t,".",hn,"=",Dn,";"))}else if(b(Dn)){var Zn=pn[hn];Kt(en,".",Vn[hn],"(",Dn,");",Dn.map(function(Wn,tr){return Zn+"["+tr+"]="+Wn}).join(";"),";")}else te(gn)?(Tn=Rt.link(Dn,{stable:!0}),Kt(en,".",Vn[hn],"(",Tn,");",$t,".",hn,"=",Tn,";")):Kt(en,".",Vn[hn],"(",Dn,");",$t,".",hn,"=",Dn,";")}})}function cn(Rt,Kt){qt&&(Rt.instancing=Kt.def(Rt.shared.extensions,".angle_instanced_arrays"))}function kn(Rt,Kt,rn,xn,Tn){function Pn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function pn(tr){tr(hn=Kt.def(),"=",Pn(),";"),typeof Tn=="string"?tr(Fn,".count+=",Tn,";"):tr(Fn,".count++;"),Tt&&(xn?tr(gn=Kt.def(),"=",Wn,".getNumPendingQueries();"):tr(Wn,".beginQuery(",Fn,");"))}function $t(tr){tr(Fn,".cpuTime+=",Pn(),"-",hn,";"),Tt&&(xn?tr(Wn,".pushScopeStats(",gn,",",Wn,".getNumPendingQueries(),",Fn,");"):tr(Wn,".endQuery();"))}function en(tr){var Qn=Kt.def(Zn,".profile");Kt(Zn,".profile=",tr,";"),Kt.exit(Zn,".profile=",Qn,";")}var hn,gn,Dn=Rt.shared,Fn=Rt.stats,Zn=Dn.current,Wn=Dn.timer;if(rn=rn.profile){if(te(rn))return void(rn.enable?(pn(Kt),$t(Kt.exit),en("true")):en("false"));en(rn=rn.append(Rt,Kt))}else rn=Kt.def(Zn,".profile");pn(Dn=Rt.block()),Kt("if(",rn,"){",Dn,"}"),$t(Rt=Rt.block()),Kt.exit("if(",rn,"){",Rt,"}")}function An(Rt,Kt,rn,xn,Tn){function Pn($t,en,hn){function gn(){Kt("if(!",Wn,".buffer){",Fn,".enableVertexAttribArray(",Zn,");}");var hr,fr=hn.type;hr=hn.size?Kt.def(hn.size,"||",en):en,Kt("if(",Wn,".type!==",fr,"||",Wn,".size!==",hr,"||",or.map(function(xr){return Wn+"."+xr+"!=="+hn[xr]}).join("||"),"){",Fn,".bindBuffer(",34962,",",tr,".buffer);",Fn,".vertexAttribPointer(",[Zn,hr,fr,hn.normalized,hn.stride,hn.offset],");",Wn,".type=",fr,";",Wn,".size=",hr,";",or.map(function(xr){return Wn+"."+xr+"="+hn[xr]+";"}).join(""),"}"),qt&&(fr=hn.divisor,Kt("if(",Wn,".divisor!==",fr,"){",Rt.instancing,".vertexAttribDivisorANGLE(",[Zn,fr],");",Wn,".divisor=",fr,";}"))}function Dn(){Kt("if(",Wn,".buffer){",Fn,".disableVertexAttribArray(",Zn,");",Wn,".buffer=null;","}if(",st.map(function(hr,fr){return Wn+"."+hr+"!=="+Qn[fr]}).join("||"),"){",Fn,".vertexAttrib4f(",Zn,",",Qn,");",st.map(function(hr,fr){return Wn+"."+hr+"="+Qn[fr]+";"}).join(""),"}")}var Fn=pn.gl,Zn=Kt.def($t,".location"),Wn=Kt.def(pn.attributes,"[",Zn,"]");$t=hn.state;var tr=hn.buffer,Qn=[hn.x,hn.y,hn.z,hn.w],or=["buffer","normalized","offset","stride"];$t===1?gn():$t===2?Dn():(Kt("if(",$t,"===",1,"){"),gn(),Kt("}else{"),Dn(),Kt("}"))}var pn=Rt.shared;xn.forEach(function($t){var en,hn=$t.name,gn=rn.attributes[hn];if(gn){if(!Tn(gn))return;en=gn.append(Rt,Kt)}else{if(!Tn(Ke))return;var Dn=Rt.scopeAttrib(hn);en={},Object.keys(new Jn).forEach(function(Fn){en[Fn]=Kt.def(Dn,".",Fn)})}Pn(Rt.link($t),function(Fn){switch(Fn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}($t.info.type),en)})}function wn(Rt,Kt,rn,xn,Tn,Pn){for(var pn,$t=Rt.shared,en=$t.gl,hn=0;hn<xn.length;++hn){var gn,Dn=(Wn=xn[hn]).name,Fn=Wn.info.type,Zn=rn.uniforms[Dn],Wn=Rt.link(Wn)+".location";if(Zn){if(!Tn(Zn))continue;if(te(Zn)){if(Dn=Zn.value,Fn===35678||Fn===35680)Kt(en,".uniform1i(",Wn,",",(Fn=Rt.link(Dn._texture||Dn.color[0]._texture))+".bind());"),Kt.exit(Fn,".unbind();");else if(Fn===35674||Fn===35675||Fn===35676)Zn=2,Fn===35675?Zn=3:Fn===35676&&(Zn=4),Kt(en,".uniformMatrix",Zn,"fv(",Wn,",false,",Dn=Rt.global.def("new Float32Array(["+Array.prototype.slice.call(Dn)+"])"),");");else{switch(Fn){case 5126:pn="1f";break;case 35664:pn="2f";break;case 35665:pn="3f";break;case 35666:pn="4f";break;case 35670:case 5124:pn="1i";break;case 35671:case 35667:pn="2i";break;case 35672:case 35668:pn="3i";break;case 35673:case 35669:pn="4i"}Kt(en,".uniform",pn,"(",Wn,",",b(Dn)?Array.prototype.slice.call(Dn):Dn,");")}continue}gn=Zn.append(Rt,Kt)}else{if(!Tn(Ke))continue;gn=Kt.def($t.uniforms,"[",Je.id(Dn),"]")}switch(Fn===35678?Kt("if(",gn,"&&",gn,'._reglType==="framebuffer"){',gn,"=",gn,".color[0];","}"):Fn===35680&&Kt("if(",gn,"&&",gn,'._reglType==="framebufferCube"){',gn,"=",gn,".color[0];","}"),Dn=1,Fn){case 35678:case 35680:Fn=Kt.def(gn,"._texture"),Kt(en,".uniform1i(",Wn,",",Fn,".bind());"),Kt.exit(Fn,".unbind();");continue;case 5124:case 35670:pn="1i";break;case 35667:case 35671:pn="2i",Dn=2;break;case 35668:case 35672:pn="3i",Dn=3;break;case 35669:case 35673:pn="4i",Dn=4;break;case 5126:pn="1f";break;case 35664:pn="2f",Dn=2;break;case 35665:pn="3f",Dn=3;break;case 35666:pn="4f",Dn=4;break;case 35674:pn="Matrix2fv";break;case 35675:pn="Matrix3fv";break;case 35676:pn="Matrix4fv"}if(pn.charAt(0)==="M"){Kt(en,".uniform",pn,"(",Wn,","),Wn=Math.pow(Fn-35674+2,2);var tr=Rt.global.def("new Float32Array(",Wn,")");Array.isArray(gn)?Kt("false,(",v(Wn,function(or){return tr+"["+or+"]="+gn[or]}),",",tr,")"):Kt("false,(Array.isArray(",gn,")||",gn," instanceof Float32Array)?",gn,":(",v(Wn,function(or){return tr+"["+or+"]="+gn+"["+or+"]"}),",",tr,")"),Kt(");")}else{if(1<Dn){Fn=[];var Qn=[];for(Zn=0;Zn<Dn;++Zn)Array.isArray(gn)?Qn.push(gn[Zn]):Qn.push(Kt.def(gn+"["+Zn+"]")),Pn&&Fn.push(Kt.def());Pn&&Kt("if(!",Rt.batchId,"||",Fn.map(function(or,hr){return or+"!=="+Qn[hr]}).join("||"),"){",Fn.map(function(or,hr){return or+"="+Qn[hr]+";"}).join("")),Kt(en,".uniform",pn,"(",Wn,",",Qn.join(","),");")}else Pn&&(Fn=Kt.def(),Kt("if(!",Rt.batchId,"||",Fn,"!==",gn,"){",Fn,"=",gn,";")),Kt(en,".uniform",pn,"(",Wn,",",gn,");");Pn&&Kt("}")}}}function Cn(Rt,Kt,rn,xn){function Tn(fr){var xr=Fn[fr];return xr?xr.contextDep&&xn.contextDynamic||xr.propDep?xr.append(Rt,rn):xr.append(Rt,Kt):Kt.def(Dn,".",fr)}function Pn(){function fr(){rn(en,".drawElementsInstancedANGLE(",[Wn,Qn,or,tr+"<<(("+or+"-5121)>>1)",$t],");")}function xr(){rn(en,".drawArraysInstancedANGLE(",[Wn,tr,Qn,$t],");")}Zn&&Zn!=="null"?hr?fr():(rn("if(",Zn,"){"),fr(),rn("}else{"),xr(),rn("}")):xr()}function pn(){function fr(){rn(gn+".drawElements("+[Wn,Qn,or,tr+"<<(("+or+"-5121)>>1)"]+");")}function xr(){rn(gn+".drawArrays("+[Wn,tr,Qn]+");")}Zn&&Zn!=="null"?hr?fr():(rn("if(",Zn,"){"),fr(),rn("}else{"),xr(),rn("}")):xr()}var $t,en,hn=Rt.shared,gn=hn.gl,Dn=hn.draw,Fn=xn.draw,Zn=function(){var fr=Fn.elements,xr=Kt;return fr?((fr.contextDep&&xn.contextDynamic||fr.propDep)&&(xr=rn),fr=fr.append(Rt,xr),Fn.elementsActive&&xr("if("+fr+")"+gn+".bindBuffer(34963,"+fr+".buffer.buffer);")):(fr=xr.def(),xr(fr,"=",Dn,".","elements",";","if(",fr,"){",gn,".bindBuffer(",34963,",",fr,".buffer.buffer);}","else if(",hn.vao,".currentVAO){",fr,"=",Rt.shared.elements+".getElements("+hn.vao,".currentVAO.elements);",dn?"":"if("+fr+")"+gn+".bindBuffer(34963,"+fr+".buffer.buffer);","}")),fr}(),Wn=Tn("primitive"),tr=Tn("offset"),Qn=function(){var fr=Fn.count,xr=Kt;return fr?((fr.contextDep&&xn.contextDynamic||fr.propDep)&&(xr=rn),fr=fr.append(Rt,xr)):fr=xr.def(Dn,".","count"),fr}();if(typeof Qn=="number"){if(Qn===0)return}else rn("if(",Qn,"){"),rn.exit("}");qt&&($t=Tn("instances"),en=Rt.instancing);var or=Zn+".type",hr=Fn.elements&&te(Fn.elements)&&!Fn.vaoActive;qt&&(typeof $t!="number"||0<=$t)?typeof $t=="string"?(rn("if(",$t,">0){"),Pn(),rn("}else if(",$t,"<0){"),pn(),rn("}")):Pn():pn()}function _n(Rt,Kt,rn,xn,Tn){return Tn=(Kt=an()).proc("body",Tn),qt&&(Kt.instancing=Tn.def(Kt.shared.extensions,".angle_instanced_arrays")),Rt(Kt,Tn,rn,xn),Kt.compile().body}function zn(Rt,Kt,rn,xn){cn(Rt,Kt),rn.useVAO?rn.drawVAO?Kt(Rt.shared.vao,".setVAO(",rn.drawVAO.append(Rt,Kt),");"):Kt(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(Kt(Rt.shared.vao,".setVAO(null);"),An(Rt,Kt,rn,xn.attributes,function(){return!0})),wn(Rt,Kt,rn,xn.uniforms,function(){return!0},!1),Cn(Rt,Kt,Kt,rn)}function qn(Rt,Kt,rn,xn){function Tn(){return!0}Rt.batchId="a1",cn(Rt,Kt),An(Rt,Kt,rn,xn.attributes,Tn),wn(Rt,Kt,rn,xn.uniforms,Tn,!1),Cn(Rt,Kt,Kt,rn)}function sr(Rt,Kt,rn,xn){function Tn(Dn){return Dn.contextDep&&pn||Dn.propDep}function Pn(Dn){return!Tn(Dn)}cn(Rt,Kt);var pn=rn.contextDep,$t=Kt.def(),en=Kt.def();Rt.shared.props=en,Rt.batchId=$t;var hn=Rt.scope(),gn=Rt.scope();Kt(hn.entry,"for(",$t,"=0;",$t,"<","a1",";++",$t,"){",en,"=","a0","[",$t,"];",gn,"}",hn.exit),rn.needsContext&&fn(Rt,gn,rn.context),rn.needsFramebuffer&&Zt(Rt,gn,rn.framebuffer),nn(Rt,gn,rn.state,Tn),rn.profile&&Tn(rn.profile)&&kn(Rt,gn,rn,!1,!0),xn?(rn.useVAO?rn.drawVAO?Tn(rn.drawVAO)?gn(Rt.shared.vao,".setVAO(",rn.drawVAO.append(Rt,gn),");"):hn(Rt.shared.vao,".setVAO(",rn.drawVAO.append(Rt,hn),");"):hn(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(hn(Rt.shared.vao,".setVAO(null);"),An(Rt,hn,rn,xn.attributes,Pn),An(Rt,gn,rn,xn.attributes,Tn)),wn(Rt,hn,rn,xn.uniforms,Pn,!1),wn(Rt,gn,rn,xn.uniforms,Tn,!0),Cn(Rt,hn,gn,rn)):(Kt=Rt.global.def("{}"),xn=rn.shader.progVar.append(Rt,gn),en=gn.def(xn,".id"),hn=gn.def(Kt,"[",en,"]"),gn(Rt.shared.gl,".useProgram(",xn,".program);","if(!",hn,"){",hn,"=",Kt,"[",en,"]=",Rt.link(function(Dn){return _n(qn,Rt,rn,Dn,2)}),"(",xn,");}",hn,".call(this,a0[",$t,"],",$t,");"))}function pr(Rt,Kt){function rn($t){var en=Kt.shader[$t];en&&(en=en.append(Rt,xn),isNaN(en)?xn.set(Tn.shader,"."+$t,en):xn.set(Tn.shader,"."+$t,Rt.link(en,{stable:!0})))}var xn=Rt.proc("scope",3);Rt.batchId="a2";var Tn=Rt.shared,Pn=Tn.current;if(fn(Rt,xn,Kt.context),Kt.framebuffer&&Kt.framebuffer.append(Rt,xn),V(Object.keys(Kt.state)).forEach(function($t){var en=Kt.state[$t],hn=en.append(Rt,xn);b(hn)?hn.forEach(function(gn,Dn){isNaN(gn)?xn.set(Rt.next[$t],"["+Dn+"]",gn):xn.set(Rt.next[$t],"["+Dn+"]",Rt.link(gn,{stable:!0}))}):te(en)?xn.set(Tn.next,"."+$t,Rt.link(hn,{stable:!0})):xn.set(Tn.next,"."+$t,hn)}),kn(Rt,xn,Kt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function($t){var en=Kt.draw[$t];en&&(en=en.append(Rt,xn),isNaN(en)?xn.set(Tn.draw,"."+$t,en):xn.set(Tn.draw,"."+$t,Rt.link(en),{stable:!0}))}),Object.keys(Kt.uniforms).forEach(function($t){var en=Kt.uniforms[$t].append(Rt,xn);Array.isArray(en)&&(en="["+en.map(function(hn){return isNaN(hn)?hn:Rt.link(hn,{stable:!0})})+"]"),xn.set(Tn.uniforms,"["+Rt.link(Je.id($t),{stable:!0})+"]",en)}),Object.keys(Kt.attributes).forEach(function($t){var en=Kt.attributes[$t].append(Rt,xn),hn=Rt.scopeAttrib($t);Object.keys(new Jn).forEach(function(gn){xn.set(hn,"."+gn,en[gn])})}),Kt.scopeVAO){var pn=Kt.scopeVAO.append(Rt,xn);isNaN(pn)?xn.set(Tn.vao,".targetVAO",pn):xn.set(Tn.vao,".targetVAO",Rt.link(pn,{stable:!0}))}rn("vert"),rn("frag"),0<Object.keys(Kt.state).length&&(xn(Pn,".dirty=true;"),xn.exit(Pn,".dirty=true;")),xn("a1(",Rt.shared.context,",a0,",Rt.batchId,");")}function ir(Rt,Kt,rn){var xn=Kt.static[rn];if(xn&&function(gn){if(typeof gn=="object"&&!b(gn)){for(var Dn=Object.keys(gn),Fn=0;Fn<Dn.length;++Fn)if(ae.isDynamic(gn[Dn[Fn]]))return!0;return!1}}(xn)){var Tn=Rt.global,Pn=Object.keys(xn),pn=!1,$t=!1,en=!1,hn=Rt.global.def("{}");Pn.forEach(function(gn){var Dn=xn[gn];if(ae.isDynamic(Dn))typeof Dn=="function"&&(Dn=xn[gn]=ae.unbox(Dn)),gn=J(Dn,null),pn=pn||gn.thisDep,en=en||gn.propDep,$t=$t||gn.contextDep;else{switch(Tn(hn,".",gn,"="),typeof Dn){case"number":Tn(Dn);break;case"string":Tn('"',Dn,'"');break;case"object":Array.isArray(Dn)&&Tn("[",Dn.join(),"]");break;default:Tn(Rt.link(Dn))}Tn(";")}}),Kt.dynamic[rn]=new ae.DynamicVariable(4,{thisDep:pn,contextDep:$t,propDep:en,ref:hn,append:function(gn,Dn){Pn.forEach(function(Fn){var Zn=xn[Fn];ae.isDynamic(Zn)&&(Zn=gn.invoke(Dn,Zn),Dn(hn,".",Fn,"=",Zn,";"))})}}),delete Kt.static[rn]}}var Jn=yt.Record,mr={add:32774,subtract:32778,"reverse subtract":32779};lt.ext_blend_minmax&&(mr.min=32775,mr.max=32776);var qt=lt.angle_instanced_arrays,tn=lt.webgl_draw_buffers,dn=lt.oes_vertex_array_object,vn={dirty:!0,profile:Ct.profile},On={},Hn=[],Bn={},Vn={};Bt("dither",3024),Bt("blend.enable",3042),Xt("blend.color","blendColor",[0,0,0,0]),Xt("blend.equation","blendEquationSeparate",[32774,32774]),Xt("blend.func","blendFuncSeparate",[1,0,1,0]),Bt("depth.enable",2929,!0),Xt("depth.func","depthFunc",513),Xt("depth.range","depthRange",[0,1]),Xt("depth.mask","depthMask",!0),Xt("colorMask","colorMask",[!0,!0,!0,!0]),Bt("cull.enable",2884),Xt("cull.face","cullFace",1029),Xt("frontFace","frontFace",2305),Xt("lineWidth","lineWidth",1),Bt("polygonOffset.enable",32823),Xt("polygonOffset.offset","polygonOffset",[0,0]),Bt("sample.alpha",32926),Bt("sample.enable",32928),Xt("sample.coverage","sampleCoverage",[1,!1]),Bt("stencil.enable",2960),Xt("stencil.mask","stencilMask",-1),Xt("stencil.func","stencilFunc",[519,0,-1]),Xt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Xt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Bt("scissor.enable",3089),Xt("scissor.box","scissor",[0,0,He.drawingBufferWidth,He.drawingBufferHeight]),Xt("viewport","viewport",[0,0,He.drawingBufferWidth,He.drawingBufferHeight]);var nr={gl:He,context:Lt,strings:Je,next:On,current:vn,draw:dt,elements:Ue,buffer:je,shader:xt,attributes:yt.state,vao:yt,uniforms:gt,framebuffer:$e,extensions:lt,timer:Tt,isBufferArgs:F},Qt={primTypes:Le,compareFuncs:Ft,blendFuncs:zt,blendEquations:mr,stencilOps:Pt,glTypes:ke,orientationType:Xe};tn&&(Qt.backBuffer=[1029],Qt.drawBuffer=v(ot.maxDrawbuffers,function(Rt){return Rt===0?[0]:v(Rt,function(Kt){return 36064+Kt})}));var bn=0;return{next:On,current:vn,procs:function(){var Rt=an(),Kt=Rt.proc("poll"),rn=Rt.proc("refresh"),xn=Rt.block();Kt(xn),rn(xn);var Tn,Pn=(en=Rt.shared).gl,pn=en.next,$t=en.current;xn($t,".dirty=false;"),Zt(Rt,Kt),Zt(Rt,rn,null,!0),qt&&(Tn=Rt.link(qt)),lt.oes_vertex_array_object&&rn(Rt.link(lt.oes_vertex_array_object),".bindVertexArrayOES(null);");var en=rn.def(en.attributes),hn=rn.def(0),gn=Rt.cond(hn,".buffer");gn.then(Pn,".enableVertexAttribArray(i);",Pn,".bindBuffer(",34962,",",hn,".buffer.buffer);",Pn,".vertexAttribPointer(i,",hn,".size,",hn,".type,",hn,".normalized,",hn,".stride,",hn,".offset);").else(Pn,".disableVertexAttribArray(i);",Pn,".vertexAttrib4f(i,",hn,".x,",hn,".y,",hn,".z,",hn,".w);",hn,".buffer=null;");var Dn=Rt.link(ot.maxAttributes,{stable:!0});return rn("for(var i=0;i<",Dn,";++i){",hn,"=",en,"[i];",gn,"}"),qt&&rn("for(var i=0;i<",Dn,";++i){",Tn,".vertexAttribDivisorANGLE(i,",en,"[i].divisor);","}"),rn(Rt.shared.vao,".currentVAO=null;",Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"),Object.keys(Bn).forEach(function(Fn){var Zn=Bn[Fn],Wn=xn.def(pn,".",Fn),tr=Rt.block();tr("if(",Wn,"){",Pn,".enable(",Zn,")}else{",Pn,".disable(",Zn,")}",$t,".",Fn,"=",Wn,";"),rn(tr),Kt("if(",Wn,"!==",$t,".",Fn,"){",tr,"}")}),Object.keys(Vn).forEach(function(Fn){var Zn,Wn,tr=Vn[Fn],Qn=vn[Fn],or=Rt.block();or(Pn,".",tr,"("),b(Qn)?(tr=Qn.length,Zn=Rt.global.def(pn,".",Fn),Wn=Rt.global.def($t,".",Fn),or(v(tr,function(hr){return Zn+"["+hr+"]"}),");",v(tr,function(hr){return Wn+"["+hr+"]="+Zn+"["+hr+"];"}).join("")),Kt("if(",v(tr,function(hr){return Zn+"["+hr+"]!=="+Wn+"["+hr+"]"}).join("||"),"){",or,"}")):(Zn=xn.def(pn,".",Fn),Wn=xn.def($t,".",Fn),or(Zn,");",$t,".",Fn,"=",Zn,";"),Kt("if(",Zn,"!==",Wn,"){",or,"}")),rn(or)}),Rt.compile()}(),compile:function(Rt,Kt,rn,xn,Tn){var Pn=an();Pn.stats=Pn.link(Tn),Object.keys(Kt.static).forEach(function($t){ir(Pn,Kt,$t)}),St.forEach(function($t){ir(Pn,Rt,$t)});var pn=Ln(Rt,Kt,rn,xn);return pn.shader.program&&(pn.shader.program.attributes.sort(function($t,en){return $t.name<en.name?-1:1}),pn.shader.program.uniforms.sort(function($t,en){return $t.name<en.name?-1:1})),function($t,en){var hn=$t.proc("draw",1);cn($t,hn),fn($t,hn,en.context),Zt($t,hn,en.framebuffer),ln($t,hn,en),nn($t,hn,en.state),kn($t,hn,en,!1,!0);var gn=en.shader.progVar.append($t,hn);if(hn($t.shared.gl,".useProgram(",gn,".program);"),en.shader.program)zn($t,hn,en,en.shader.program);else{hn($t.shared.vao,".setVAO(null);");var Dn=$t.global.def("{}"),Fn=hn.def(gn,".id"),Zn=hn.def(Dn,"[",Fn,"]");hn($t.cond(Zn).then(Zn,".call(this,a0);").else(Zn,"=",Dn,"[",Fn,"]=",$t.link(function(Wn){return _n(zn,$t,en,Wn,1)}),"(",gn,");",Zn,".call(this,a0);"))}0<Object.keys(en.state).length&&hn($t.shared.current,".dirty=true;"),$t.shared.vao&&hn($t.shared.vao,".setVAO(null);")}(Pn,pn),pr(Pn,pn),function($t,en){function hn(Qn){return Qn.contextDep&&Dn||Qn.propDep}var gn=$t.proc("batch",2);$t.batchId="0",cn($t,gn);var Dn=!1,Fn=!0;Object.keys(en.context).forEach(function(Qn){Dn=Dn||en.context[Qn].propDep}),Dn||(fn($t,gn,en.context),Fn=!1);var Zn=!1;if((Wn=en.framebuffer)?(Wn.propDep?Dn=Zn=!0:Wn.contextDep&&Dn&&(Zn=!0),Zn||Zt($t,gn,Wn)):Zt($t,gn,null),en.state.viewport&&en.state.viewport.propDep&&(Dn=!0),ln($t,gn,en),nn($t,gn,en.state,function(Qn){return!hn(Qn)}),en.profile&&hn(en.profile)||kn($t,gn,en,!1,"a1"),en.contextDep=Dn,en.needsContext=Fn,en.needsFramebuffer=Zn,(Fn=en.shader.progVar).contextDep&&Dn||Fn.propDep)sr($t,gn,en,null);else if(Fn=Fn.append($t,gn),gn($t.shared.gl,".useProgram(",Fn,".program);"),en.shader.program)sr($t,gn,en,en.shader.program);else{gn($t.shared.vao,".setVAO(null);");var Wn=$t.global.def("{}"),tr=(Zn=gn.def(Fn,".id"),gn.def(Wn,"[",Zn,"]"));gn($t.cond(tr).then(tr,".call(this,a0,a1);").else(tr,"=",Wn,"[",Zn,"]=",$t.link(function(Qn){return _n(sr,$t,en,Qn,2)}),"(",Fn,");",tr,".call(this,a0,a1);"))}0<Object.keys(en.state).length&&gn($t.shared.current,".dirty=true;"),$t.shared.vao&&gn($t.shared.vao,".setVAO(null);")}(Pn,pn),ee(Pn.compile(),{destroy:function(){pn.shader.program.destroy()}})}}}function K(He,Je){for(var lt=0;lt<He.length;++lt)if(He[lt]===Je)return lt;return-1}var ee=function(He,Je){for(var lt=Object.keys(Je),ot=0;ot<lt.length;++ot)He[lt[ot]]=Je[lt[ot]];return He},ie=0,ae={DynamicVariable:L,define:function(He,Je){return new L(He,T(Je+""))},isDynamic:function(He){return typeof He=="function"&&!He._reglType||He instanceof L},unbox:function He(Je,lt){return typeof Je=="function"?new L(0,Je):typeof Je=="number"||typeof Je=="boolean"?new L(5,Je):Array.isArray(Je)?new L(6,Je.map(function(ot,je){return He(ot)})):Je instanceof L?Je:void 0},accessor:T},oe={next:typeof requestAnimationFrame=="function"?function(He){return requestAnimationFrame(He)}:function(He){return setTimeout(He,16)},cancel:typeof cancelAnimationFrame=="function"?function(He){return cancelAnimationFrame(He)}:clearTimeout},fe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ge=s();ge.zero=s();var ve=function(He,Je){var lt=1;Je.ext_texture_filter_anisotropic&&(lt=He.getParameter(34047));var ot=1,je=1;Je.webgl_draw_buffers&&(ot=He.getParameter(34852),je=He.getParameter(36063));var Ue=!!Je.oes_texture_float;if(Ue){Ue=He.createTexture(),He.bindTexture(3553,Ue),He.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var at=He.createFramebuffer();if(He.bindFramebuffer(36160,at),He.framebufferTexture2D(36160,36064,3553,Ue,0),He.bindTexture(3553,null),He.checkFramebufferStatus(36160)!==36053)Ue=!1;else{He.viewport(0,0,1,1),He.clearColor(1,0,0,1),He.clear(16384);var $e=ge.allocType(5126,4);He.readPixels(0,0,1,1,6408,5126,$e),He.getError()?Ue=!1:(He.deleteFramebuffer(at),He.deleteTexture(Ue),Ue=$e[0]===1),ge.freeType($e)}}return $e=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||($e=He.createTexture(),at=ge.allocType(5121,36),He.activeTexture(33984),He.bindTexture(34067,$e),He.texImage2D(34069,0,6408,3,3,0,6408,5121,at),ge.freeType(at),He.bindTexture(34067,null),He.deleteTexture($e),$e=!He.getError()),{colorBits:[He.getParameter(3410),He.getParameter(3411),He.getParameter(3412),He.getParameter(3413)],depthBits:He.getParameter(3414),stencilBits:He.getParameter(3415),subpixelBits:He.getParameter(3408),extensions:Object.keys(Je).filter(function(gt){return!!Je[gt]}),maxAnisotropic:lt,maxDrawbuffers:ot,maxColorAttachments:je,pointSizeDims:He.getParameter(33901),lineWidthDims:He.getParameter(33902),maxViewportDims:He.getParameter(3386),maxCombinedTextureUnits:He.getParameter(35661),maxCubeMapSize:He.getParameter(34076),maxRenderbufferSize:He.getParameter(34024),maxTextureUnits:He.getParameter(34930),maxTextureSize:He.getParameter(3379),maxAttributes:He.getParameter(34921),maxVertexUniforms:He.getParameter(36347),maxVertexTextureUnits:He.getParameter(35660),maxVaryingVectors:He.getParameter(36348),maxFragmentUniforms:He.getParameter(36349),glsl:He.getParameter(35724),renderer:He.getParameter(7937),vendor:He.getParameter(7936),version:He.getParameter(7938),readFloat:Ue,npotTextureCube:$e}},xe=function(He){return He instanceof Uint8Array||He instanceof Uint16Array||He instanceof Uint32Array||He instanceof Int8Array||He instanceof Int16Array||He instanceof Int32Array||He instanceof Float32Array||He instanceof Float64Array||He instanceof Uint8ClampedArray},_e=function(He){return Object.keys(He).map(function(Je){return He[Je]})},ye={shape:function(He){for(var Je=[];He.length;He=He[0])Je.push(He.length);return Je},flatten:function(He,Je,lt,ot){var je=1;if(Je.length)for(var Ue=0;Ue<Je.length;++Ue)je*=Je[Ue];else je=0;switch(lt=ot||ge.allocType(lt,je),Je.length){case 0:break;case 1:for(ot=Je[0],Je=0;Je<ot;++Je)lt[Je]=He[Je];break;case 2:for(ot=Je[0],Je=Je[1],Ue=je=0;Ue<ot;++Ue)for(var at=He[Ue],$e=0;$e<Je;++$e)lt[je++]=at[$e];break;case 3:a(He,Je[0],Je[1],Je[2],lt,0);break;default:n(He,Je,0,lt,0)}return lt}},Ce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ke={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Te={dynamic:35048,stream:35040,static:35044},le=ye.flatten,ue=ye.shape,de=[];de[5120]=1,de[5122]=2,de[5124]=4,de[5121]=1,de[5123]=2,de[5125]=4,de[5126]=4;var Le={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},we=new Float32Array(1),Ee=new Uint32Array(we.buffer),Oe=[9984,9986,9985,9987],Fe=[0,6409,6410,6407,6408],pe={};pe[6409]=pe[6406]=pe[6402]=1,pe[34041]=pe[6410]=2,pe[6407]=pe[35904]=3,pe[6408]=pe[35906]=4;var be=g("HTMLCanvasElement"),Me=g("OffscreenCanvas"),De=g("CanvasRenderingContext2D"),Ne=g("ImageBitmap"),Be=g("HTMLImageElement"),Ye=g("HTMLVideoElement"),We=Object.keys(Ce).concat([be,Me,De,Ne,Be,Ye]),et=[];et[5121]=1,et[5126]=4,et[36193]=2,et[5123]=2,et[5125]=4;var ft=[];ft[32854]=2,ft[32855]=2,ft[36194]=2,ft[34041]=4,ft[33776]=.5,ft[33777]=.5,ft[33778]=1,ft[33779]=1,ft[35986]=.5,ft[35987]=1,ft[34798]=1,ft[35840]=.5,ft[35841]=.25,ft[35842]=.5,ft[35843]=.25,ft[36196]=.5;var ht=[];ht[32854]=2,ht[32855]=2,ht[36194]=2,ht[33189]=2,ht[36168]=1,ht[34041]=4,ht[35907]=4,ht[34836]=16,ht[34842]=8,ht[34843]=6;var mt=function(He,Je,lt,ot,je){function Ue(dt){this.id=yt++,this.refCount=1,this.renderbuffer=dt,this.format=32854,this.height=this.width=0,je.profile&&(this.stats={size:0})}function at(dt){var Lt=dt.renderbuffer;He.bindRenderbuffer(36161,null),He.deleteRenderbuffer(Lt),dt.renderbuffer=null,dt.refCount=0,delete xt[dt.id],ot.renderbufferCount--}var $e={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Je.ext_srgb&&($e.srgba=35907),Je.ext_color_buffer_half_float&&($e.rgba16f=34842,$e.rgb16f=34843),Je.webgl_color_buffer_float&&($e.rgba32f=34836);var gt=[];Object.keys($e).forEach(function(dt){gt[$e[dt]]=dt});var yt=0,xt={};return Ue.prototype.decRef=function(){0>=--this.refCount&&at(this)},je.profile&&(ot.getTotalRenderbufferSize=function(){var dt=0;return Object.keys(xt).forEach(function(Lt){dt+=xt[Lt].stats.size}),dt}),{create:function(dt,Lt){function Tt(Ct,Dt){var Bt=0,Xt=0,an=32854;if(typeof Ct=="object"&&Ct?("shape"in Ct?(Bt=0|(Xt=Ct.shape)[0],Xt=0|Xt[1]):("radius"in Ct&&(Bt=Xt=0|Ct.radius),"width"in Ct&&(Bt=0|Ct.width),"height"in Ct&&(Xt=0|Ct.height)),"format"in Ct&&(an=$e[Ct.format])):typeof Ct=="number"?(Bt=0|Ct,Xt=typeof Dt=="number"?0|Dt:Bt):Ct||(Bt=Xt=1),Bt!==bt.width||Xt!==bt.height||an!==bt.format)return Tt.width=bt.width=Bt,Tt.height=bt.height=Xt,bt.format=an,He.bindRenderbuffer(36161,bt.renderbuffer),He.renderbufferStorage(36161,an,Bt,Xt),je.profile&&(bt.stats.size=ht[bt.format]*bt.width*bt.height),Tt.format=gt[bt.format],Tt}var bt=new Ue(He.createRenderbuffer());return xt[bt.id]=bt,ot.renderbufferCount++,Tt(dt,Lt),Tt.resize=function(Ct,Dt){var Bt=0|Ct,Xt=0|Dt||Bt;return Bt===bt.width&&Xt===bt.height||(Tt.width=bt.width=Bt,Tt.height=bt.height=Xt,He.bindRenderbuffer(36161,bt.renderbuffer),He.renderbufferStorage(36161,bt.format,Bt,Xt),je.profile&&(bt.stats.size=ht[bt.format]*bt.width*bt.height)),Tt},Tt._reglType="renderbuffer",Tt._renderbuffer=bt,je.profile&&(Tt.stats=bt.stats),Tt.destroy=function(){bt.decRef()},Tt},clear:function(){_e(xt).forEach(at)},restore:function(){_e(xt).forEach(function(dt){dt.renderbuffer=He.createRenderbuffer(),He.bindRenderbuffer(36161,dt.renderbuffer),He.renderbufferStorage(36161,dt.format,dt.width,dt.height)}),He.bindRenderbuffer(36161,null)}}},Mt=[];Mt[6408]=4,Mt[6407]=3;var _t=[];_t[5121]=1,_t[5126]=4,_t[36193]=2;var it=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],st=["x","y","z","w"],St="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),zt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ft={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Pt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xe={cw:2304,ccw:2305},Ke=new H(!1,!1,!1,function(){});return function(He){function Je(){if(qn.length===0)Wt&&Wt.update(),Jn=null;else{Jn=oe.next(Je),xt();for(var qt=qn.length-1;0<=qt;--qt){var tn=qn[qt];tn&&tn(Ln,null,0)}Tt.flush(),Wt&&Wt.update()}}function lt(){!Jn&&0<qn.length&&(Jn=oe.next(Je))}function ot(){Jn&&(oe.cancel(Je),Jn=null)}function je(qt){qt.preventDefault(),ot(),sr.forEach(function(tn){tn()})}function Ue(qt){Tt.getError(),Ct.restore(),cn.restore(),Zt.restore(),kn.restore(),An.restore(),wn.restore(),nn.restore(),Wt&&Wt.restore(),Cn.procs.refresh(),lt(),pr.forEach(function(tn){tn()})}function at(qt){function tn(Rt,Kt){var rn={},xn={};return Object.keys(Rt).forEach(function(Tn){var Pn=Rt[Tn];if(ae.isDynamic(Pn))xn[Tn]=ae.unbox(Pn,Tn);else{if(Kt&&Array.isArray(Pn)){for(var pn=0;pn<Pn.length;++pn)if(ae.isDynamic(Pn[pn]))return void(xn[Tn]=ae.unbox(Pn,Tn))}rn[Tn]=Pn}}),{dynamic:xn,static:rn}}var dn=tn(qt.context||{},!0),vn=tn(qt.uniforms||{},!0),On=tn(qt.attributes||{},!1);qt=tn(function(Rt){function Kt(xn){if(xn in rn){var Tn=rn[xn];delete rn[xn],Object.keys(Tn).forEach(function(Pn){rn[xn+"."+Pn]=Tn[Pn]})}}var rn=ee({},Rt);return delete rn.uniforms,delete rn.attributes,delete rn.context,delete rn.vao,"stencil"in rn&&rn.stencil.op&&(rn.stencil.opBack=rn.stencil.opFront=rn.stencil.op,delete rn.stencil.op),Kt("blend"),Kt("depth"),Kt("cull"),Kt("stencil"),Kt("polygonOffset"),Kt("scissor"),Kt("sample"),"vao"in Rt&&(rn.vao=Rt.vao),rn}(qt),!1);var Hn={gpuTime:0,cpuTime:0,count:0},Bn=Cn.compile(qt,On,vn,dn,Hn),Vn=Bn.draw,nr=Bn.batch,Qt=Bn.scope,bn=[];return ee(function(Rt,Kt){var rn;if(typeof Rt=="function")return Qt.call(this,null,Rt,0);if(typeof Kt=="function")if(typeof Rt=="number")for(rn=0;rn<Rt;++rn)Qt.call(this,null,Kt,rn);else{if(!Array.isArray(Rt))return Qt.call(this,Rt,Kt,0);for(rn=0;rn<Rt.length;++rn)Qt.call(this,Rt[rn],Kt,rn)}else if(typeof Rt=="number"){if(0<Rt)return nr.call(this,function(xn){for(;bn.length<xn;)bn.push(null);return bn}(0|Rt),0|Rt)}else{if(!Array.isArray(Rt))return Vn.call(this,Rt);if(Rt.length)return nr.call(this,Rt,Rt.length)}},{stats:Hn,destroy:function(){Bn.destroy()}})}function $e(qt,tn){var dn=0;Cn.procs.poll();var vn=tn.color;vn&&(Tt.clearColor(+vn[0]||0,+vn[1]||0,+vn[2]||0,+vn[3]||0),dn|=16384),"depth"in tn&&(Tt.clearDepth(+tn.depth),dn|=256),"stencil"in tn&&(Tt.clearStencil(0|tn.stencil),dn|=1024),Tt.clear(dn)}function gt(qt){return qn.push(qt),lt(),{cancel:function(){var tn=K(qn,qt);qn[tn]=function dn(){var vn=K(qn,dn);qn[vn]=qn[qn.length-1],--qn.length,0>=qn.length&&ot()}}}}function yt(){var qt=_n.viewport,tn=_n.scissor_box;qt[0]=qt[1]=tn[0]=tn[1]=0,Ln.viewportWidth=Ln.framebufferWidth=Ln.drawingBufferWidth=qt[2]=tn[2]=Tt.drawingBufferWidth,Ln.viewportHeight=Ln.framebufferHeight=Ln.drawingBufferHeight=qt[3]=tn[3]=Tt.drawingBufferHeight}function xt(){Ln.tick+=1,Ln.time=Lt(),yt(),Cn.procs.poll()}function dt(){kn.refresh(),yt(),Cn.procs.refresh(),Wt&&Wt.update()}function Lt(){return(fe()-Vt)/1e3}if(!(He=_(He)))return null;var Tt=He.gl,bt=Tt.getContextAttributes();Tt.isContextLost();var Ct=function(qt,tn){function dn(Bn){var Vn;Bn=Bn.toLowerCase();try{Vn=vn[Bn]=qt.getExtension(Bn)}catch{}return!!Vn}for(var vn={},On=0;On<tn.extensions.length;++On){var Hn=tn.extensions[On];if(!dn(Hn))return tn.onDestroy(),tn.onDone('"'+Hn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return tn.optionalExtensions.forEach(dn),{extensions:vn,restore:function(){Object.keys(vn).forEach(function(Bn){if(vn[Bn]&&!dn(Bn))throw Error("(regl): error restoring extension "+Bn)})}}}(Tt,He);if(!Ct)return null;var Dt=function(){var qt={"":0},tn=[""];return{id:function(dn){var vn=qt[dn];return vn||(vn=qt[dn]=tn.length,tn.push(dn),vn)},str:function(dn){return tn[dn]}}}(),Bt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Xt=He.cachedCode||{},an=Ct.extensions,Wt=function(qt,tn){function dn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function vn(bn,Rt,Kt){var rn=Bn.pop()||new dn;rn.startQueryIndex=bn,rn.endQueryIndex=Rt,rn.sum=0,rn.stats=Kt,Vn.push(rn)}if(!tn.ext_disjoint_timer_query)return null;var On=[],Hn=[],Bn=[],Vn=[],nr=[],Qt=[];return{beginQuery:function(bn){var Rt=On.pop()||tn.ext_disjoint_timer_query.createQueryEXT();tn.ext_disjoint_timer_query.beginQueryEXT(35007,Rt),Hn.push(Rt),vn(Hn.length-1,Hn.length,bn)},endQuery:function(){tn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:vn,update:function(){var bn,Rt;if((bn=Hn.length)!==0){Qt.length=Math.max(Qt.length,bn+1),nr.length=Math.max(nr.length,bn+1),nr[0]=0;var Kt=Qt[0]=0;for(Rt=bn=0;Rt<Hn.length;++Rt){var rn=Hn[Rt];tn.ext_disjoint_timer_query.getQueryObjectEXT(rn,34919)?(Kt+=tn.ext_disjoint_timer_query.getQueryObjectEXT(rn,34918),On.push(rn)):Hn[bn++]=rn,nr[Rt+1]=Kt,Qt[Rt+1]=bn}for(Hn.length=bn,Rt=bn=0;Rt<Vn.length;++Rt){var xn=(Kt=Vn[Rt]).startQueryIndex;rn=Kt.endQueryIndex,Kt.sum+=nr[rn]-nr[xn],xn=Qt[xn],(rn=Qt[rn])===xn?(Kt.stats.gpuTime+=Kt.sum/1e6,Bn.push(Kt)):(Kt.startQueryIndex=xn,Kt.endQueryIndex=rn,Vn[bn++]=Kt)}Vn.length=bn}},getNumPendingQueries:function(){return Hn.length},clear:function(){On.push.apply(On,Hn);for(var bn=0;bn<On.length;bn++)tn.ext_disjoint_timer_query.deleteQueryEXT(On[bn]);Hn.length=0,On.length=0},restore:function(){Hn.length=0,On.length=0}}}(0,an),Vt=fe(),on=Tt.drawingBufferWidth,Sn=Tt.drawingBufferHeight,Ln={tick:0,time:0,viewportWidth:on,viewportHeight:Sn,framebufferWidth:on,framebufferHeight:Sn,drawingBufferWidth:on,drawingBufferHeight:Sn,pixelRatio:He.pixelRatio},fn=(on={elements:null,primitive:4,count:-1,offset:0,instances:-1},ve(Tt,an)),Zt=u(Tt,Bt,He,function(qt){return nn.destroyBuffer(qt)}),ln=p(Tt,an,Zt,Bt),nn=O(Tt,an,fn,Bt,Zt,ln,on),cn=P(Tt,Dt,Bt,He),kn=S(Tt,an,fn,function(){Cn.procs.poll()},Ln,Bt,He),An=mt(Tt,an,0,Bt,He),wn=M(Tt,an,fn,kn,An,Bt),Cn=X(Tt,Dt,an,fn,Zt,ln,0,wn,{},nn,cn,on,Ln,Wt,Xt,He),_n=(Dt=I(Tt,wn,Cn.procs.poll,Ln),Cn.next),zn=Tt.canvas,qn=[],sr=[],pr=[],ir=[He.onDestroy],Jn=null;zn&&(zn.addEventListener("webglcontextlost",je,!1),zn.addEventListener("webglcontextrestored",Ue,!1));var mr=wn.setFBO=at({framebuffer:ae.define.call(null,1,"framebuffer")});return dt(),bt=ee(at,{clear:function(qt){if("framebuffer"in qt)if(qt.framebuffer&&qt.framebuffer_reglType==="framebufferCube")for(var tn=0;6>tn;++tn)mr(ee({framebuffer:qt.framebuffer.faces[tn]},qt),$e);else mr(qt,$e);else $e(0,qt)},prop:ae.define.bind(null,1),context:ae.define.bind(null,2),this:ae.define.bind(null,3),draw:at({}),buffer:function(qt){return Zt.create(qt,34962,!1,!1)},elements:function(qt){return ln.create(qt,!1)},texture:kn.create2D,cube:kn.createCube,renderbuffer:An.create,framebuffer:wn.create,framebufferCube:wn.createCube,vao:nn.createVAO,attributes:bt,frame:gt,on:function(qt,tn){var dn;switch(qt){case"frame":return gt(tn);case"lost":dn=sr;break;case"restore":dn=pr;break;case"destroy":dn=ir}return dn.push(tn),{cancel:function(){for(var vn=0;vn<dn.length;++vn)if(dn[vn]===tn){dn[vn]=dn[dn.length-1],dn.pop();break}}}},limits:fn,hasExtension:function(qt){return 0<=fn.extensions.indexOf(qt.toLowerCase())},read:Dt,destroy:function(){qn.length=0,ot(),zn&&(zn.removeEventListener("webglcontextlost",je),zn.removeEventListener("webglcontextrestored",Ue)),cn.clear(),wn.clear(),An.clear(),nn.clear(),kn.clear(),ln.clear(),Zt.clear(),Wt&&Wt.clear(),ir.forEach(function(qt){qt()})},_gl:Tt,_refresh:dt,poll:function(){xt(),Wt&&Wt.update()},now:Lt,stats:Bt,getCachedCode:function(){return Xt},preloadCachedCode:function(qt){Object.entries(qt).forEach(function(tn){Xt[tn[0]]=tn[1]})}}),He.onDone(null,bt),bt}}()},71665:function(N,L,e){var T=e(12856),w=T.Buffer;function i(v,h){for(var s in v)h[s]=v[s]}function _(v,h,s){return w(v,h,s)}w.from&&w.alloc&&w.allocUnsafe&&w.allocUnsafeSlow?N.exports=T:(i(T,L),L.Buffer=_),_.prototype=Object.create(w.prototype),i(w,_),_.from=function(v,h,s){if(typeof v=="number")throw new TypeError("Argument must not be a number");return w(v,h,s)},_.alloc=function(v,h,s){if(typeof v!="number")throw new TypeError("Argument must be a number");var t=w(v);return h!==void 0?typeof s=="string"?t.fill(h,s):t.fill(h):t.fill(0),t},_.allocUnsafe=function(v){if(typeof v!="number")throw new TypeError("Argument must be a number");return w(v)},_.allocUnsafeSlow=function(v){if(typeof v!="number")throw new TypeError("Argument must be a number");return T.SlowBuffer(v)}},21630:function(N,L,e){N.exports=w;var T=e(15398).EventEmitter;function w(){T.call(this)}e(42018)(w,T),w.Readable=e(40410),w.Writable=e(37493),w.Duplex=e(37865),w.Transform=e(74308),w.PassThrough=e(66897),w.finished=e(12726),w.pipeline=e(10168),w.Stream=w,w.prototype.pipe=function(i,_){var v=this;function h(o){i.writable&&i.write(o)===!1&&v.pause&&v.pause()}function s(){v.readable&&v.resume&&v.resume()}v.on("data",h),i.on("drain",s),i._isStdio||_&&_.end===!1||(v.on("end",a),v.on("close",n));var t=!1;function a(){t||(t=!0,i.end())}function n(){t||(t=!0,typeof i.destroy=="function"&&i.destroy())}function r(o){if(l(),T.listenerCount(this,"error")===0)throw o}function l(){v.removeListener("data",h),i.removeListener("drain",s),v.removeListener("end",a),v.removeListener("close",n),v.removeListener("error",r),i.removeListener("error",r),v.removeListener("end",l),v.removeListener("close",l),i.removeListener("close",l)}return v.on("error",r),i.on("error",r),v.on("end",l),v.on("close",l),i.on("close",l),i.emit("pipe",v),i}},74322:function(N){var L={};function e(w,i,_){_||(_=Error);var v=function(h){var s,t;function a(n,r,l){return h.call(this,function(o,u,p){return typeof i=="string"?i:i(o,u,p)}(n,r,l))||this}return t=h,(s=a).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,a}(_);v.prototype.name=_.name,v.prototype.code=w,L[w]=v}function T(w,i){if(Array.isArray(w)){var _=w.length;return w=w.map(function(v){return String(v)}),_>2?"one of ".concat(i," ").concat(w.slice(0,_-1).join(", "),", or ")+w[_-1]:_===2?"one of ".concat(i," ").concat(w[0]," or ").concat(w[1]):"of ".concat(i," ").concat(w[0])}return"of ".concat(i," ").concat(String(w))}e("ERR_INVALID_OPT_VALUE",function(w,i){return'The value "'+i+'" is invalid for option "'+w+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(w,i,_){var v,h,s,t,a;if(typeof i=="string"&&(h="not ",i.substr(0,4)===h)?(v="must not be",i=i.replace(/^not /,"")):v="must be",function(r,l,o){return(o===void 0||o>r.length)&&(o=r.length),r.substring(o-9,o)===l}(w," argument"))s="The ".concat(w," ").concat(v," ").concat(T(i,"type"));else{var n=(typeof a!="number"&&(a=0),a+1>(t=w).length||t.indexOf(".",a)===-1?"argument":"property");s='The "'.concat(w,'" ').concat(n," ").concat(v," ").concat(T(i,"type"))}return s+". Received type ".concat(typeof _)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(w){return"The "+w+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(w){return"Cannot call "+w+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(w){return"Unknown encoding: "+w},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),N.exports.q=L},37865:function(N,L,e){var T=e(90386),w=Object.keys||function(r){var l=[];for(var o in r)l.push(o);return l};N.exports=t;var i=e(40410),_=e(37493);e(42018)(t,i);for(var v=w(_.prototype),h=0;h<v.length;h++){var s=v[h];t.prototype[s]||(t.prototype[s]=_.prototype[s])}function t(r){if(!(this instanceof t))return new t(r);i.call(this,r),_.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||T.nextTick(n,this)}function n(r){r.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=r,this._writableState.destroyed=r)}})},66897:function(N,L,e){N.exports=w;var T=e(74308);function w(i){if(!(this instanceof w))return new w(i);T.call(this,i)}e(42018)(w,T),w.prototype._transform=function(i,_,v){v(null,i)}},40410:function(N,L,e){var T,w=e(90386);N.exports=k,k.ReadableState=y,e(15398).EventEmitter;var i,_=function($,J){return $.listeners(J).length},v=e(71405),h=e(12856).Buffer,s=e.g.Uint8Array||function(){},t=e(40964);i=t&&t.debuglog?t.debuglog("stream"):function(){};var a,n,r,l=e(31125),o=e(65756),u=e(56306).getHighWaterMark,p=e(74322).q,c=p.ERR_INVALID_ARG_TYPE,b=p.ERR_STREAM_PUSH_AFTER_EOF,g=p.ERR_METHOD_NOT_IMPLEMENTED,d=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(42018)(k,v);var m=o.errorOrDestroy,x=["error","close","destroy","pause","resume"];function y($,J,X){T=T||e(37865),$=$||{},typeof X!="boolean"&&(X=J instanceof T),this.objectMode=!!$.objectMode,X&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=u(this,$,"readableHighWaterMark",X),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(a||(a=e(68019).s),this.decoder=new a($.encoding),this.encoding=$.encoding)}function k($){if(T=T||e(37865),!(this instanceof k))return new k($);var J=this instanceof T;this._readableState=new y($,this,J),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),v.call(this)}function f($,J,X,K,ee){i("readableAddChunk",J);var ie,ae=$._readableState;if(J===null)ae.reading=!1,function(oe,fe){if(i("onEofChunk"),!fe.ended){if(fe.decoder){var ge=fe.decoder.end();ge&&ge.length&&(fe.buffer.push(ge),fe.length+=fe.objectMode?1:ge.length)}fe.ended=!0,fe.sync?O(oe):(fe.needReadable=!1,fe.emittedReadable||(fe.emittedReadable=!0,P(oe)))}}($,ae);else if(ee||(ie=function(oe,fe){var ge,ve;return ve=fe,h.isBuffer(ve)||ve instanceof s||typeof fe=="string"||fe===void 0||oe.objectMode||(ge=new c("chunk",["string","Buffer","Uint8Array"],fe)),ge}(ae,J)),ie)m($,ie);else if(ae.objectMode||J&&J.length>0)if(typeof J=="string"||ae.objectMode||Object.getPrototypeOf(J)===h.prototype||(J=function(oe){return h.from(oe)}(J)),K)ae.endEmitted?m($,new d):S($,ae,J,!0);else if(ae.ended)m($,new b);else{if(ae.destroyed)return!1;ae.reading=!1,ae.decoder&&!X?(J=ae.decoder.write(J),ae.objectMode||J.length!==0?S($,ae,J,!1):I($,ae)):S($,ae,J,!1)}else K||(ae.reading=!1,I($,ae));return!ae.ended&&(ae.length<ae.highWaterMark||ae.length===0)}function S($,J,X,K){J.flowing&&J.length===0&&!J.sync?(J.awaitDrain=0,$.emit("data",X)):(J.length+=J.objectMode?1:X.length,K?J.buffer.unshift(X):J.buffer.push(X),J.needReadable&&O($)),I($,J)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function($){this._readableState&&(this._readableState.destroyed=$)}}),k.prototype.destroy=o.destroy,k.prototype._undestroy=o.undestroy,k.prototype._destroy=function($,J){J($)},k.prototype.push=function($,J){var X,K=this._readableState;return K.objectMode?X=!0:typeof $=="string"&&((J=J||K.defaultEncoding)!==K.encoding&&($=h.from($,J),J=""),X=!0),f(this,$,J,!1,X)},k.prototype.unshift=function($){return f(this,$,null,!0,!1)},k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function($){a||(a=e(68019).s);var J=new a($);this._readableState.decoder=J,this._readableState.encoding=this._readableState.decoder.encoding;for(var X=this._readableState.buffer.head,K="";X!==null;)K+=J.write(X.data),X=X.next;return this._readableState.buffer.clear(),K!==""&&this._readableState.buffer.push(K),this._readableState.length=K.length,this};var M=1073741824;function E($,J){return $<=0||J.length===0&&J.ended?0:J.objectMode?1:$!=$?J.flowing&&J.length?J.buffer.head.data.length:J.length:($>J.highWaterMark&&(J.highWaterMark=function(X){return X>=M?X=M:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X}($)),$<=J.length?$:J.ended?J.length:(J.needReadable=!0,0))}function O($){var J=$._readableState;i("emitReadable",J.needReadable,J.emittedReadable),J.needReadable=!1,J.emittedReadable||(i("emitReadable",J.flowing),J.emittedReadable=!0,w.nextTick(P,$))}function P($){var J=$._readableState;i("emitReadable_",J.destroyed,J.length,J.ended),J.destroyed||!J.length&&!J.ended||($.emit("readable"),J.emittedReadable=!1),J.needReadable=!J.flowing&&!J.ended&&J.length<=J.highWaterMark,Z($)}function I($,J){J.readingMore||(J.readingMore=!0,w.nextTick(z,$,J))}function z($,J){for(;!J.reading&&!J.ended&&(J.length<J.highWaterMark||J.flowing&&J.length===0);){var X=J.length;if(i("maybeReadMore read 0"),$.read(0),X===J.length)break}J.readingMore=!1}function U($){var J=$._readableState;J.readableListening=$.listenerCount("readable")>0,J.resumeScheduled&&!J.paused?J.flowing=!0:$.listenerCount("data")>0&&$.resume()}function R($){i("readable nexttick read 0"),$.read(0)}function j($,J){i("resume",J.reading),J.reading||$.read(0),J.resumeScheduled=!1,$.emit("resume"),Z($),J.flowing&&!J.reading&&$.read(0)}function Z($){var J=$._readableState;for(i("flow",J.flowing);J.flowing&&$.read()!==null;);}function F($,J){return J.length===0?null:(J.objectMode?X=J.buffer.shift():!$||$>=J.length?(X=J.decoder?J.buffer.join(""):J.buffer.length===1?J.buffer.first():J.buffer.concat(J.length),J.buffer.clear()):X=J.buffer.consume($,J.decoder),X);var X}function V($){var J=$._readableState;i("endReadable",J.endEmitted),J.endEmitted||(J.ended=!0,w.nextTick(H,J,$))}function H($,J){if(i("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,J.readable=!1,J.emit("end"),$.autoDestroy)){var X=J._writableState;(!X||X.autoDestroy&&X.finished)&&J.destroy()}}function te($,J){for(var X=0,K=$.length;X<K;X++)if($[X]===J)return X;return-1}k.prototype.read=function($){i("read",$),$=parseInt($,10);var J=this._readableState,X=$;if($!==0&&(J.emittedReadable=!1),$===0&&J.needReadable&&((J.highWaterMark!==0?J.length>=J.highWaterMark:J.length>0)||J.ended))return i("read: emitReadable",J.length,J.ended),J.length===0&&J.ended?V(this):O(this),null;if(($=E($,J))===0&&J.ended)return J.length===0&&V(this),null;var K,ee=J.needReadable;return i("need readable",ee),(J.length===0||J.length-$<J.highWaterMark)&&i("length less than watermark",ee=!0),J.ended||J.reading?i("reading or ended",ee=!1):ee&&(i("do read"),J.reading=!0,J.sync=!0,J.length===0&&(J.needReadable=!0),this._read(J.highWaterMark),J.sync=!1,J.reading||($=E(X,J))),(K=$>0?F($,J):null)===null?(J.needReadable=J.length<=J.highWaterMark,$=0):(J.length-=$,J.awaitDrain=0),J.length===0&&(J.ended||(J.needReadable=!0),X!==$&&J.ended&&V(this)),K!==null&&this.emit("data",K),K},k.prototype._read=function($){m(this,new g("_read()"))},k.prototype.pipe=function($,J){var X=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=$;break;case 1:K.pipes=[K.pipes,$];break;default:K.pipes.push($)}K.pipesCount+=1,i("pipe count=%d opts=%j",K.pipesCount,J);var ee=J&&J.end===!1||$===w.stdout||$===w.stderr?_e:ie;function ie(){i("onend"),$.end()}K.endEmitted?w.nextTick(ee):X.once("end",ee),$.on("unpipe",function ye(Ce,ke){i("onunpipe"),Ce===X&&ke&&ke.hasUnpiped===!1&&(ke.hasUnpiped=!0,i("cleanup"),$.removeListener("close",ve),$.removeListener("finish",xe),$.removeListener("drain",ae),$.removeListener("error",ge),$.removeListener("unpipe",ye),X.removeListener("end",ie),X.removeListener("end",_e),X.removeListener("data",fe),oe=!0,!K.awaitDrain||$._writableState&&!$._writableState.needDrain||ae())});var ae=function(ye){return function(){var Ce=ye._readableState;i("pipeOnDrain",Ce.awaitDrain),Ce.awaitDrain&&Ce.awaitDrain--,Ce.awaitDrain===0&&_(ye,"data")&&(Ce.flowing=!0,Z(ye))}}(X);$.on("drain",ae);var oe=!1;function fe(ye){i("ondata");var Ce=$.write(ye);i("dest.write",Ce),Ce===!1&&((K.pipesCount===1&&K.pipes===$||K.pipesCount>1&&te(K.pipes,$)!==-1)&&!oe&&(i("false write response, pause",K.awaitDrain),K.awaitDrain++),X.pause())}function ge(ye){i("onerror",ye),_e(),$.removeListener("error",ge),_($,"error")===0&&m($,ye)}function ve(){$.removeListener("finish",xe),_e()}function xe(){i("onfinish"),$.removeListener("close",ve),_e()}function _e(){i("unpipe"),X.unpipe($)}return X.on("data",fe),function(ye,Ce,ke){if(typeof ye.prependListener=="function")return ye.prependListener(Ce,ke);ye._events&&ye._events[Ce]?Array.isArray(ye._events[Ce])?ye._events[Ce].unshift(ke):ye._events[Ce]=[ke,ye._events[Ce]]:ye.on(Ce,ke)}($,"error",ge),$.once("close",ve),$.once("finish",xe),$.emit("pipe",X),K.flowing||(i("pipe resume"),X.resume()),$},k.prototype.unpipe=function($){var J=this._readableState,X={hasUnpiped:!1};if(J.pipesCount===0)return this;if(J.pipesCount===1)return $&&$!==J.pipes||($||($=J.pipes),J.pipes=null,J.pipesCount=0,J.flowing=!1,$&&$.emit("unpipe",this,X)),this;if(!$){var K=J.pipes,ee=J.pipesCount;J.pipes=null,J.pipesCount=0,J.flowing=!1;for(var ie=0;ie<ee;ie++)K[ie].emit("unpipe",this,{hasUnpiped:!1});return this}var ae=te(J.pipes,$);return ae===-1||(J.pipes.splice(ae,1),J.pipesCount-=1,J.pipesCount===1&&(J.pipes=J.pipes[0]),$.emit("unpipe",this,X)),this},k.prototype.on=function($,J){var X=v.prototype.on.call(this,$,J),K=this._readableState;return $==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):$==="readable"&&(K.endEmitted||K.readableListening||(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,i("on readable",K.length,K.reading),K.length?O(this):K.reading||w.nextTick(R,this))),X},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function($,J){var X=v.prototype.removeListener.call(this,$,J);return $==="readable"&&w.nextTick(U,this),X},k.prototype.removeAllListeners=function($){var J=v.prototype.removeAllListeners.apply(this,arguments);return $!=="readable"&&$!==void 0||w.nextTick(U,this),J},k.prototype.resume=function(){var $=this._readableState;return $.flowing||(i("resume"),$.flowing=!$.readableListening,function(J,X){X.resumeScheduled||(X.resumeScheduled=!0,w.nextTick(j,J,X))}(this,$)),$.paused=!1,this},k.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function($){var J=this,X=this._readableState,K=!1;for(var ee in $.on("end",function(){if(i("wrapped end"),X.decoder&&!X.ended){var ae=X.decoder.end();ae&&ae.length&&J.push(ae)}J.push(null)}),$.on("data",function(ae){i("wrapped data"),X.decoder&&(ae=X.decoder.write(ae)),X.objectMode&&ae==null||(X.objectMode||ae&&ae.length)&&(J.push(ae)||(K=!0,$.pause()))}),$)this[ee]===void 0&&typeof $[ee]=="function"&&(this[ee]=function(ae){return function(){return $[ae].apply($,arguments)}}(ee));for(var ie=0;ie<x.length;ie++)$.on(x[ie],this.emit.bind(this,x[ie]));return this._read=function(ae){i("wrapped _read",ae),K&&(K=!1,$.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return n===void 0&&(n=e(68221)),n(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($){this._readableState&&(this._readableState.flowing=$)}}),k._fromList=F,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(k.from=function($,J){return r===void 0&&(r=e(31748)),r(k,$,J)})},74308:function(N,L,e){N.exports=t;var T=e(74322).q,w=T.ERR_METHOD_NOT_IMPLEMENTED,i=T.ERR_MULTIPLE_CALLBACK,_=T.ERR_TRANSFORM_ALREADY_TRANSFORMING,v=T.ERR_TRANSFORM_WITH_LENGTH_0,h=e(37865);function s(r,l){var o=this._transformState;o.transforming=!1;var u=o.writecb;if(u===null)return this.emit("error",new i);o.writechunk=null,o.writecb=null,l!=null&&this.push(l),u(r);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function t(r){if(!(this instanceof t))return new t(r);h.call(this,r),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",a)}function a(){var r=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(l,o){n(r,l,o)})}function n(r,l,o){if(l)return r.emit("error",l);if(o!=null&&r.push(o),r._writableState.length)throw new v;if(r._transformState.transforming)throw new _;return r.push(null)}e(42018)(t,h),t.prototype.push=function(r,l){return this._transformState.needTransform=!1,h.prototype.push.call(this,r,l)},t.prototype._transform=function(r,l,o){o(new w("_transform()"))},t.prototype._write=function(r,l,o){var u=this._transformState;if(u.writecb=o,u.writechunk=r,u.writeencoding=l,!u.transforming){var p=this._readableState;(u.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},t.prototype._read=function(r){var l=this._transformState;l.writechunk===null||l.transforming?l.needTransform=!0:(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform))},t.prototype._destroy=function(r,l){h.prototype._destroy.call(this,r,function(o){l(o)})}},37493:function(N,L,e){var T,w=e(90386);function i(I){var z=this;this.next=null,this.entry=null,this.finish=function(){(function(U,R,j){var Z=U.entry;for(U.entry=null;Z;){var F=Z.callback;R.pendingcb--,F(void 0),Z=Z.next}R.corkedRequestsFree.next=U})(z,I)}}N.exports=k,k.WritableState=y;var _,v={deprecate:e(20588)},h=e(71405),s=e(12856).Buffer,t=e.g.Uint8Array||function(){},a=e(65756),n=e(56306).getHighWaterMark,r=e(74322).q,l=r.ERR_INVALID_ARG_TYPE,o=r.ERR_METHOD_NOT_IMPLEMENTED,u=r.ERR_MULTIPLE_CALLBACK,p=r.ERR_STREAM_CANNOT_PIPE,c=r.ERR_STREAM_DESTROYED,b=r.ERR_STREAM_NULL_VALUES,g=r.ERR_STREAM_WRITE_AFTER_END,d=r.ERR_UNKNOWN_ENCODING,m=a.errorOrDestroy;function x(){}function y(I,z,U){T=T||e(37865),I=I||{},typeof U!="boolean"&&(U=z instanceof T),this.objectMode=!!I.objectMode,U&&(this.objectMode=this.objectMode||!!I.writableObjectMode),this.highWaterMark=n(this,I,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var R=I.decodeStrings===!1;this.decodeStrings=!R,this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){(function(Z,F){var V=Z._writableState,H=V.sync,te=V.writecb;if(typeof te!="function")throw new u;if(function(J){J.writing=!1,J.writecb=null,J.length-=J.writelen,J.writelen=0}(V),F)(function(J,X,K,ee,ie){--X.pendingcb,K?(w.nextTick(ie,ee),w.nextTick(P,J,X),J._writableState.errorEmitted=!0,m(J,ee)):(ie(ee),J._writableState.errorEmitted=!0,m(J,ee),P(J,X))})(Z,V,H,F,te);else{var $=E(V)||Z.destroyed;$||V.corked||V.bufferProcessing||!V.bufferedRequest||M(Z,V),H?w.nextTick(S,Z,V,$,te):S(Z,V,$,te)}})(z,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=I.emitClose!==!1,this.autoDestroy=!!I.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function k(I){var z=this instanceof(T=T||e(37865));if(!z&&!_.call(k,this))return new k(I);this._writableState=new y(I,this,z),this.writable=!0,I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final)),h.call(this)}function f(I,z,U,R,j,Z,F){z.writelen=R,z.writecb=F,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new c("write")):U?I._writev(j,z.onwrite):I._write(j,Z,z.onwrite),z.sync=!1}function S(I,z,U,R){U||function(j,Z){Z.length===0&&Z.needDrain&&(Z.needDrain=!1,j.emit("drain"))}(I,z),z.pendingcb--,R(),P(I,z)}function M(I,z){z.bufferProcessing=!0;var U=z.bufferedRequest;if(I._writev&&U&&U.next){var R=z.bufferedRequestCount,j=new Array(R),Z=z.corkedRequestsFree;Z.entry=U;for(var F=0,V=!0;U;)j[F]=U,U.isBuf||(V=!1),U=U.next,F+=1;j.allBuffers=V,f(I,z,!0,z.length,j,"",Z.finish),z.pendingcb++,z.lastBufferedRequest=null,Z.next?(z.corkedRequestsFree=Z.next,Z.next=null):z.corkedRequestsFree=new i(z),z.bufferedRequestCount=0}else{for(;U;){var H=U.chunk,te=U.encoding,$=U.callback;if(f(I,z,!1,z.objectMode?1:H.length,H,te,$),U=U.next,z.bufferedRequestCount--,z.writing)break}U===null&&(z.lastBufferedRequest=null)}z.bufferedRequest=U,z.bufferProcessing=!1}function E(I){return I.ending&&I.length===0&&I.bufferedRequest===null&&!I.finished&&!I.writing}function O(I,z){I._final(function(U){z.pendingcb--,U&&m(I,U),z.prefinished=!0,I.emit("prefinish"),P(I,z)})}function P(I,z){var U=E(z);if(U&&(function(j,Z){Z.prefinished||Z.finalCalled||(typeof j._final!="function"||Z.destroyed?(Z.prefinished=!0,j.emit("prefinish")):(Z.pendingcb++,Z.finalCalled=!0,w.nextTick(O,j,Z)))}(I,z),z.pendingcb===0&&(z.finished=!0,I.emit("finish"),z.autoDestroy))){var R=I._readableState;(!R||R.autoDestroy&&R.endEmitted)&&I.destroy()}return U}e(42018)(k,h),y.prototype.getBuffer=function(){for(var I=this.bufferedRequest,z=[];I;)z.push(I),I=I.next;return z},function(){try{Object.defineProperty(y.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(I){return!!_.call(this,I)||this===k&&I&&I._writableState instanceof y}})):_=function(I){return I instanceof this},k.prototype.pipe=function(){m(this,new p)},k.prototype.write=function(I,z,U){var R,j=this._writableState,Z=!1,F=!j.objectMode&&(R=I,s.isBuffer(R)||R instanceof t);return F&&!s.isBuffer(I)&&(I=function(V){return s.from(V)}(I)),typeof z=="function"&&(U=z,z=null),F?z="buffer":z||(z=j.defaultEncoding),typeof U!="function"&&(U=x),j.ending?function(V,H){var te=new g;m(V,te),w.nextTick(H,te)}(this,U):(F||function(V,H,te,$){var J;return te===null?J=new b:typeof te=="string"||H.objectMode||(J=new l("chunk",["string","Buffer"],te)),!J||(m(V,J),w.nextTick($,J),!1)}(this,j,I,U))&&(j.pendingcb++,Z=function(V,H,te,$,J,X){if(!te){var K=function(oe,fe,ge){return oe.objectMode||oe.decodeStrings===!1||typeof fe!="string"||(fe=s.from(fe,ge)),fe}(H,$,J);$!==K&&(te=!0,J="buffer",$=K)}var ee=H.objectMode?1:$.length;H.length+=ee;var ie=H.length<H.highWaterMark;if(ie||(H.needDrain=!0),H.writing||H.corked){var ae=H.lastBufferedRequest;H.lastBufferedRequest={chunk:$,encoding:J,isBuf:te,callback:X,next:null},ae?ae.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else f(V,H,!1,ee,$,J,X);return ie}(this,j,F,I,z,U)),Z},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,I.writing||I.corked||I.bufferProcessing||!I.bufferedRequest||M(this,I))},k.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new d(I);return this._writableState.defaultEncoding=I,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(I,z,U){U(new o("_write()"))},k.prototype._writev=null,k.prototype.end=function(I,z,U){var R=this._writableState;return typeof I=="function"?(U=I,I=null,z=null):typeof z=="function"&&(U=z,z=null),I!=null&&this.write(I,z),R.corked&&(R.corked=1,this.uncork()),R.ending||function(j,Z,F){Z.ending=!0,P(j,Z),F&&(Z.finished?w.nextTick(F):j.once("finish",F)),Z.ended=!0,j.writable=!1}(this,R,U),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(I){this._writableState&&(this._writableState.destroyed=I)}}),k.prototype.destroy=a.destroy,k.prototype._undestroy=a.undestroy,k.prototype._destroy=function(I,z){z(I)}},68221:function(N,L,e){var T,w=e(90386);function i(b,g,d){return g in b?Object.defineProperty(b,g,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[g]=d,b}var _=e(12726),v=Symbol("lastResolve"),h=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),a=Symbol("lastPromise"),n=Symbol("handlePromise"),r=Symbol("stream");function l(b,g){return{value:b,done:g}}function o(b){var g=b[v];if(g!==null){var d=b[r].read();d!==null&&(b[a]=null,b[v]=null,b[h]=null,g(l(d,!1)))}}function u(b){w.nextTick(o,b)}var p=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((i(T={get stream(){return this[r]},next:function(){var b=this,g=this[s];if(g!==null)return Promise.reject(g);if(this[t])return Promise.resolve(l(void 0,!0));if(this[r].destroyed)return new Promise(function(y,k){w.nextTick(function(){b[s]?k(b[s]):y(l(void 0,!0))})});var d,m=this[a];if(m)d=new Promise(function(y,k){return function(f,S){y.then(function(){k[t]?f(l(void 0,!0)):k[n](f,S)},S)}}(m,this));else{var x=this[r].read();if(x!==null)return Promise.resolve(l(x,!1));d=new Promise(this[n])}return this[a]=d,d}},Symbol.asyncIterator,function(){return this}),i(T,"return",function(){var b=this;return new Promise(function(g,d){b[r].destroy(null,function(m){m?d(m):g(l(void 0,!0))})})}),T),p);N.exports=function(b){var g,d=Object.create(c,(i(g={},r,{value:b,writable:!0}),i(g,v,{value:null,writable:!0}),i(g,h,{value:null,writable:!0}),i(g,s,{value:null,writable:!0}),i(g,t,{value:b._readableState.endEmitted,writable:!0}),i(g,n,{value:function(m,x){var y=d[r].read();y?(d[a]=null,d[v]=null,d[h]=null,m(l(y,!1))):(d[v]=m,d[h]=x)},writable:!0}),g));return d[a]=null,_(b,function(m){if(m&&m.code!=="ERR_STREAM_PREMATURE_CLOSE"){var x=d[h];return x!==null&&(d[a]=null,d[v]=null,d[h]=null,x(m)),void(d[s]=m)}var y=d[v];y!==null&&(d[a]=null,d[v]=null,d[h]=null,y(l(void 0,!0))),d[t]=!0}),b.on("readable",u.bind(null,d)),d}},31125:function(N,L,e){function T(s,t){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),a.push.apply(a,n)}return a}function w(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function i(s,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}}var _=e(12856).Buffer,v=e(69862).inspect,h=v&&v.custom||"inspect";N.exports=function(){function s(){(function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,a;return t=s,a=[{key:"push",value:function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var r=this.head,l=""+r.data;r=r.next;)l+=n+r.data;return l}},{key:"concat",value:function(n){if(this.length===0)return _.alloc(0);for(var r,l,o,u=_.allocUnsafe(n>>>0),p=this.head,c=0;p;)r=p.data,l=u,o=c,_.prototype.copy.call(r,l,o),c+=p.data.length,p=p.next;return u}},{key:"consume",value:function(n,r){var l;return n<this.head.data.length?(l=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):l=n===this.head.data.length?this.shift():r?this._getString(n):this._getBuffer(n),l}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var r=this.head,l=1,o=r.data;for(n-=o.length;r=r.next;){var u=r.data,p=n>u.length?u.length:n;if(p===u.length?o+=u:o+=u.slice(0,n),(n-=p)==0){p===u.length?(++l,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=u.slice(p));break}++l}return this.length-=l,o}},{key:"_getBuffer",value:function(n){var r=_.allocUnsafe(n),l=this.head,o=1;for(l.data.copy(r),n-=l.data.length;l=l.next;){var u=l.data,p=n>u.length?u.length:n;if(u.copy(r,r.length-n,0,p),(n-=p)==0){p===u.length?(++o,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=u.slice(p));break}++o}return this.length-=o,r}},{key:h,value:function(n,r){return v(this,function(l){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?T(Object(u),!0).forEach(function(p){w(l,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(u)):T(Object(u)).forEach(function(p){Object.defineProperty(l,p,Object.getOwnPropertyDescriptor(u,p))})}return l}({},r,{depth:0,customInspect:!1}))}}],a&&i(t.prototype,a),s}()},65756:function(N,L,e){var T=e(90386);function w(v,h){_(v,h),i(v)}function i(v){v._writableState&&!v._writableState.emitClose||v._readableState&&!v._readableState.emitClose||v.emit("close")}function _(v,h){v.emit("error",h)}N.exports={destroy:function(v,h){var s=this,t=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return t||a?(h?h(v):v&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,T.nextTick(_,this,v)):T.nextTick(_,this,v)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(v||null,function(n){!h&&n?s._writableState?s._writableState.errorEmitted?T.nextTick(i,s):(s._writableState.errorEmitted=!0,T.nextTick(w,s,n)):T.nextTick(w,s,n):h?(T.nextTick(i,s),h(n)):T.nextTick(i,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(v,h){var s=v._readableState,t=v._writableState;s&&s.autoDestroy||t&&t.autoDestroy?v.destroy(h):v.emit("error",h)}}},12726:function(N,L,e){var T=e(74322).q.ERR_STREAM_PREMATURE_CLOSE;function w(){}N.exports=function i(_,v,h){if(typeof v=="function")return i(_,null,v);v||(v={}),h=function(b){var g=!1;return function(){if(!g){g=!0;for(var d=arguments.length,m=new Array(d),x=0;x<d;x++)m[x]=arguments[x];b.apply(this,m)}}}(h||w);var s=v.readable||v.readable!==!1&&_.readable,t=v.writable||v.writable!==!1&&_.writable,a=function(){_.writable||r()},n=_._writableState&&_._writableState.finished,r=function(){t=!1,n=!0,s||h.call(_)},l=_._readableState&&_._readableState.endEmitted,o=function(){s=!1,l=!0,t||h.call(_)},u=function(b){h.call(_,b)},p=function(){var b;return s&&!l?(_._readableState&&_._readableState.ended||(b=new T),h.call(_,b)):t&&!n?(_._writableState&&_._writableState.ended||(b=new T),h.call(_,b)):void 0},c=function(){_.req.on("finish",r)};return function(b){return b.setHeader&&typeof b.abort=="function"}(_)?(_.on("complete",r),_.on("abort",p),_.req?c():_.on("request",c)):t&&!_._writableState&&(_.on("end",a),_.on("close",a)),_.on("end",o),_.on("finish",r),v.error!==!1&&_.on("error",u),_.on("close",p),function(){_.removeListener("complete",r),_.removeListener("abort",p),_.removeListener("request",c),_.req&&_.req.removeListener("finish",r),_.removeListener("end",a),_.removeListener("close",a),_.removeListener("finish",r),_.removeListener("end",o),_.removeListener("error",u),_.removeListener("close",p)}}},31748:function(N){N.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(N,L,e){var T,w=e(74322).q,i=w.ERR_MISSING_ARGS,_=w.ERR_STREAM_DESTROYED;function v(t){if(t)throw t}function h(t){t()}function s(t,a){return t.pipe(a)}N.exports=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var r,l=function(u){return u.length?typeof u[u.length-1]!="function"?v:u.pop():v}(a);if(Array.isArray(a[0])&&(a=a[0]),a.length<2)throw new i("streams");var o=a.map(function(u,p){var c=p<a.length-1;return function(b,g,d,m){m=function(k){var f=!1;return function(){f||(f=!0,k.apply(void 0,arguments))}}(m);var x=!1;b.on("close",function(){x=!0}),T===void 0&&(T=e(12726)),T(b,{readable:g,writable:d},function(k){if(k)return m(k);x=!0,m()});var y=!1;return function(k){if(!x&&!y)return y=!0,function(f){return f.setHeader&&typeof f.abort=="function"}(b)?b.abort():typeof b.destroy=="function"?b.destroy():void m(k||new _("pipe"))}}(u,c,p>0,function(b){r||(r=b),b&&o.forEach(h),c||(o.forEach(h),l(r))})});return a.reduce(s)}},56306:function(N,L,e){var T=e(74322).q.ERR_INVALID_OPT_VALUE;N.exports={getHighWaterMark:function(w,i,_,v){var h=function(s,t,a){return s.highWaterMark!=null?s.highWaterMark:t?s[a]:null}(i,v,_);if(h!=null){if(!isFinite(h)||Math.floor(h)!==h||h<0)throw new T(v?_:"highWaterMark",h);return Math.floor(h)}return w.objectMode?16:16384}}},71405:function(N,L,e){N.exports=e(15398).EventEmitter},68019:function(N,L,e){var T=e(71665).Buffer,w=T.isEncoding||function(l){switch((l=""+l)&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(l){var o;switch(this.encoding=function(u){var p=function(c){if(!c)return"utf8";for(var b;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(b)return;c=(""+c).toLowerCase(),b=!0}}(u);if(typeof p!="string"&&(T.isEncoding===w||!w(u)))throw new Error("Unknown encoding: "+u);return p||u}(l),this.encoding){case"utf16le":this.text=h,this.end=s,o=4;break;case"utf8":this.fillLast=v,o=4;break;case"base64":this.text=t,this.end=a,o=3;break;default:return this.write=n,void(this.end=r)}this.lastNeed=0,this.lastTotal=0,this.lastChar=T.allocUnsafe(o)}function _(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function v(l){var o=this.lastTotal-this.lastNeed,u=function(p,c,b){if((192&c[0])!=128)return p.lastNeed=0,"";if(p.lastNeed>1&&c.length>1){if((192&c[1])!=128)return p.lastNeed=1,"";if(p.lastNeed>2&&c.length>2&&(192&c[2])!=128)return p.lastNeed=2,""}}(this,l);return u!==void 0?u:this.lastNeed<=l.length?(l.copy(this.lastChar,o,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(l.copy(this.lastChar,o,0,l.length),void(this.lastNeed-=l.length))}function h(l,o){if((l.length-o)%2==0){var u=l.toString("utf16le",o);if(u){var p=u.charCodeAt(u.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",o,l.length-1)}function s(l){var o=l&&l.length?this.write(l):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return o+this.lastChar.toString("utf16le",0,u)}return o}function t(l,o){var u=(l.length-o)%3;return u===0?l.toString("base64",o):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",o,l.length-u))}function a(l){var o=l&&l.length?this.write(l):"";return this.lastNeed?o+this.lastChar.toString("base64",0,3-this.lastNeed):o}function n(l){return l.toString(this.encoding)}function r(l){return l&&l.length?this.write(l):""}L.s=i,i.prototype.write=function(l){if(l.length===0)return"";var o,u;if(this.lastNeed){if((o=this.fillLast(l))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<l.length?o?o+this.text(l,u):this.text(l,u):o||""},i.prototype.end=function(l){var o=l&&l.length?this.write(l):"";return this.lastNeed?o+"":o},i.prototype.text=function(l,o){var u=function(c,b,g){var d=b.length-1;if(d<g)return 0;var m=_(b[d]);return m>=0?(m>0&&(c.lastNeed=m-1),m):--d<g||m===-2?0:(m=_(b[d]))>=0?(m>0&&(c.lastNeed=m-2),m):--d<g||m===-2?0:(m=_(b[d]))>=0?(m>0&&(m===2?m=0:c.lastNeed=m-3),m):0}(this,l,o);if(!this.lastNeed)return l.toString("utf8",o);this.lastTotal=u;var p=l.length-(u-this.lastNeed);return l.copy(this.lastChar,0,p),l.toString("utf8",o,p)},i.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length}},90715:function(N,L,e){var T=e(32791),w=e(41633)("stream-parser");N.exports=function(c){var b=c&&typeof c._transform=="function",g=c&&typeof c._write=="function";if(!b&&!g)throw new Error("must pass a Writable or Transform stream in");w("extending Parser into stream"),c._bytes=t,c._skipBytes=a,b&&(c._passthrough=n),b?c._transform=l:c._write=r};var i=-1,_=0,v=1,h=2;function s(c){w("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=i,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,b){T(!this._parserCallback,'there is already a "callback" set!'),T(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||s(this),w("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=b,this._parserState=_}function a(c,b){T(!this._parserCallback,'there is already a "callback" set!'),T(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||s(this),w("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=b,this._parserState=v}function n(c,b){T(!this._parserCallback,'There is already a "callback" set!'),T(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||s(this),w("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=b,this._parserState=h}function r(c,b,g){this._parserInit||s(this),w("write(%o bytes)",c.length),typeof b=="function"&&(g=b),u(this,c,null,g)}function l(c,b,g){this._parserInit||s(this),w("transform(%o bytes)",c.length),typeof b!="function"&&(b=this._parserOutput),u(this,c,b,g)}function o(c,b,g,d){if(c._parserBytesLeft-=b.length,w("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===_?(c._parserBuffers.push(b),c._parserBuffered+=b.length):c._parserState===h&&g(b),c._parserBytesLeft!==0)return d;var m=c._parserCallback;if(m&&c._parserState===_&&c._parserBuffers.length>1&&(b=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==_&&(b=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=i,c._parserBuffers.splice(0),m){var x=[];b&&x.push(b),g&&x.push(g);var y=m.length>x.length;y&&x.push(p(d));var k=m.apply(c,x);if(!y||d===k)return d}}var u=p(function c(b,g,d,m){return b._parserBytesLeft<=0?m(new Error("got data but not currently parsing anything")):g.length<=b._parserBytesLeft?function(){return o(b,g,d,m)}:function(){var x=g.slice(0,b._parserBytesLeft);return o(b,x,d,function(y){return y?m(y):g.length>x.length?function(){return c(b,g.slice(x.length),d,m)}:void 0})}});function p(c){return function(){for(var b=c.apply(this,arguments);typeof b=="function";)b=b();return b}}},41633:function(N,L,e){var T=e(90386);function w(){var i;try{i=L.storage.debug}catch{}return!i&&T!==void 0&&"env"in T&&(i=T.env.DEBUG),i}(L=N.exports=e(74469)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},L.formatArgs=function(i){var _=this.useColors;if(i[0]=(_?"%c":"")+this.namespace+(_?" %c":" ")+i[0]+(_?"%c ":" ")+"+"+L.humanize(this.diff),_){var v="color: "+this.color;i.splice(1,0,v,"color: inherit");var h=0,s=0;i[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(h++,t==="%c"&&(s=h))}),i.splice(s,0,v)}},L.save=function(i){try{i==null?L.storage.removeItem("debug"):L.storage.debug=i}catch{}},L.load=w,L.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},L.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),L.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],L.formatters.j=function(i){try{return JSON.stringify(i)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}},L.enable(w())},74469:function(N,L,e){var T;function w(i){function _(){if(_.enabled){var v=_,h=+new Date,s=h-(T||h);v.diff=s,v.prev=T,v.curr=h,T=h;for(var t=new Array(arguments.length),a=0;a<t.length;a++)t[a]=arguments[a];t[0]=L.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var n=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(r,l){if(r==="%%")return r;n++;var o=L.formatters[l];if(typeof o=="function"){var u=t[n];r=o.call(v,u),t.splice(n,1),n--}return r}),L.formatArgs.call(v,t),(_.log||L.log||console.log.bind(console)).apply(v,t)}}return _.namespace=i,_.enabled=L.enabled(i),_.useColors=L.useColors(),_.color=function(v){var h,s=0;for(h in v)s=(s<<5)-s+v.charCodeAt(h),s|=0;return L.colors[Math.abs(s)%L.colors.length]}(i),typeof L.init=="function"&&L.init(_),_}(L=N.exports=w.debug=w.default=w).coerce=function(i){return i instanceof Error?i.stack||i.message:i},L.disable=function(){L.enable("")},L.enable=function(i){L.save(i),L.names=[],L.skips=[];for(var _=(typeof i=="string"?i:"").split(/[\s,]+/),v=_.length,h=0;h<v;h++)_[h]&&((i=_[h].replace(/\*/g,".*?"))[0]==="-"?L.skips.push(new RegExp("^"+i.substr(1)+"$")):L.names.push(new RegExp("^"+i+"$")))},L.enabled=function(i){var _,v;for(_=0,v=L.skips.length;_<v;_++)if(L.skips[_].test(i))return!1;for(_=0,v=L.names.length;_<v;_++)if(L.names[_].test(i))return!0;return!1},L.humanize=e(11375),L.names=[],L.skips=[],L.formatters={}},11375:function(N){var L=1e3,e=60*L,T=60*e,w=24*T;function i(_,v,h){if(!(_<v))return _<1.5*v?Math.floor(_/v)+" "+h:Math.ceil(_/v)+" "+h+"s"}N.exports=function(_,v){v=v||{};var h,s=typeof _;if(s==="string"&&_.length>0)return function(t){if(!((t=String(t)).length>100)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(a){var n=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*w;case"hours":case"hour":case"hrs":case"hr":case"h":return n*T;case"minutes":case"minute":case"mins":case"min":case"m":return n*e;case"seconds":case"second":case"secs":case"sec":case"s":return n*L;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(_);if(s==="number"&&isNaN(_)===!1)return v.long?i(h=_,w,"day")||i(h,T,"hour")||i(h,e,"minute")||i(h,L,"second")||h+" ms":function(t){return t>=w?Math.round(t/w)+"d":t>=T?Math.round(t/T)+"h":t>=e?Math.round(t/e)+"m":t>=L?Math.round(t/L)+"s":t+"ms"}(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))}},99011:function(N,L,e){var T=e(88641);N.exports=function(w,i,_){if(w==null)throw Error("First argument should be a string");if(i==null)throw Error("Separator should be a string or a RegExp");_?(typeof _=="string"||Array.isArray(_))&&(_={ignore:_}):_={},_.escape==null&&(_.escape=!0),_.ignore==null?_.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof _.ignore=="string"&&(_.ignore=[_.ignore]),_.ignore=_.ignore.map(function(r){return r.length===1&&(r+=r),r}));var v=T.parse(w,{flat:!0,brackets:_.ignore}),h=v[0].split(i);if(_.escape){for(var s=[],t=0;t<h.length;t++){var a=h[t],n=h[t+1];a[a.length-1]==="\\"&&a[a.length-2]!=="\\"?(s.push(a+i+n),t++):s.push(a)}h=s}for(t=0;t<h.length;t++)v[0]=h[t],h[t]=T.stringify(v,{flat:!0});return h}},68664:function(N){N.exports=function(L){for(var e=L.length,T=new Array(e),w=new Array(e),i=new Array(e),_=new Array(e),v=new Array(e),h=new Array(e),s=0;s<e;++s)T[s]=-1,w[s]=0,i[s]=!1,_[s]=0,v[s]=-1,h[s]=[];var t,a=0,n=[],r=[];function l(p){var c=[p],b=[p];for(T[p]=w[p]=a,i[p]=!0,a+=1;b.length>0;){p=b[b.length-1];var g=L[p];if(_[p]<g.length){for(var d=_[p];d<g.length;++d){var m=g[d];if(T[m]<0){T[m]=w[m]=a,i[m]=!0,a+=1,c.push(m),b.push(m);break}i[m]&&(w[p]=0|Math.min(w[p],w[m])),v[m]>=0&&h[p].push(v[m])}_[p]=d}else{if(w[p]===T[p]){var x=[],y=[],k=0;for(d=c.length-1;d>=0;--d){var f=c[d];if(i[f]=!1,x.push(f),y.push(h[f]),k+=h[f].length,v[f]=n.length,f===p){c.length=d;break}}n.push(x);var S=new Array(k);for(d=0;d<y.length;d++)for(var M=0;M<y[d].length;M++)S[--k]=y[d][M];r.push(S)}b.pop()}}}for(s=0;s<e;++s)T[s]<0&&l(s);for(s=0;s<r.length;s++){var o=r[s];if(o.length!==0){o.sort(function(p,c){return p-c}),t=[o[0]];for(var u=1;u<o.length;u++)o[u]!==o[u-1]&&t.push(o[u]);r[s]=t}}return{components:n,adjacencyList:r}}},7095:function(N,L,e){e.r(L);var T=2*Math.PI,w=function(v,h,s,t,a,n,r){var l=v.x,o=v.y;return{x:t*(l*=h)-a*(o*=s)+n,y:a*l+t*o+r}},i=function(v,h){var s=h===1.5707963267948966?.551915024494:h===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(h/4),t=Math.cos(v),a=Math.sin(v),n=Math.cos(v+h),r=Math.sin(v+h);return[{x:t-a*s,y:a+t*s},{x:n+r*s,y:r-n*s},{x:n,y:r}]},_=function(v,h,s,t){var a=v*s+h*t;return a>1&&(a=1),a<-1&&(a=-1),(v*t-h*s<0?-1:1)*Math.acos(a)};L.default=function(v){var h=v.px,s=v.py,t=v.cx,a=v.cy,n=v.rx,r=v.ry,l=v.xAxisRotation,o=l===void 0?0:l,u=v.largeArcFlag,p=u===void 0?0:u,c=v.sweepFlag,b=c===void 0?0:c,g=[];if(n===0||r===0)return[];var d=Math.sin(o*T/360),m=Math.cos(o*T/360),x=m*(h-t)/2+d*(s-a)/2,y=-d*(h-t)/2+m*(s-a)/2;if(x===0&&y===0)return[];n=Math.abs(n),r=Math.abs(r);var k=Math.pow(x,2)/Math.pow(n,2)+Math.pow(y,2)/Math.pow(r,2);k>1&&(n*=Math.sqrt(k),r*=Math.sqrt(k));var f=function(R,j,Z,F,V,H,te,$,J,X,K,ee){var ie=Math.pow(V,2),ae=Math.pow(H,2),oe=Math.pow(K,2),fe=Math.pow(ee,2),ge=ie*ae-ie*fe-ae*oe;ge<0&&(ge=0),ge/=ie*fe+ae*oe;var ve=(ge=Math.sqrt(ge)*(te===$?-1:1))*V/H*ee,xe=ge*-H/V*K,_e=X*ve-J*xe+(R+Z)/2,ye=J*ve+X*xe+(j+F)/2,Ce=(K-ve)/V,ke=(ee-xe)/H,Te=(-K-ve)/V,le=(-ee-xe)/H,ue=_(1,0,Ce,ke),de=_(Ce,ke,Te,le);return $===0&&de>0&&(de-=T),$===1&&de<0&&(de+=T),[_e,ye,ue,de]}(h,s,t,a,n,r,p,b,d,m,x,y),S=function(R,j){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function(Z,F){var V=[],H=!0,te=!1,$=void 0;try{for(var J,X=Z[Symbol.iterator]();!(H=(J=X.next()).done)&&(V.push(J.value),!F||V.length!==F);H=!0);}catch(K){te=!0,$=K}finally{try{!H&&X.return&&X.return()}finally{if(te)throw $}}return V}(R,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(f,4),M=S[0],E=S[1],O=S[2],P=S[3],I=Math.abs(P)/(T/4);Math.abs(1-I)<1e-7&&(I=1);var z=Math.max(Math.ceil(I),1);P/=z;for(var U=0;U<z;U++)g.push(i(O,P)),O+=P;return g.map(function(R){var j=w(R[0],n,r,m,d,M,E),Z=j.x,F=j.y,V=w(R[1],n,r,m,d,M,E),H=V.x,te=V.y,$=w(R[2],n,r,m,d,M,E);return{x1:Z,y1:F,x2:H,y2:te,x:$.x,y:$.y}})}},1750:function(N,L,e){var T=e(95616),w=e(65185),i=e(29988),_=e(89546),v=e(32791);N.exports=function(h){if(Array.isArray(h)&&h.length===1&&typeof h[0]=="string"&&(h=h[0]),typeof h=="string"&&(v(_(h),"String is not an SVG path."),h=T(h)),v(Array.isArray(h),"Argument should be a string or an array of path segments."),h=w(h),!(h=i(h)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,a=h.length;t<a;t++)for(var n=h[t].slice(1),r=0;r<n.length;r+=2)n[r+0]<s[0]&&(s[0]=n[r+0]),n[r+1]<s[1]&&(s[1]=n[r+1]),n[r+0]>s[2]&&(s[2]=n[r+0]),n[r+1]>s[3]&&(s[3]=n[r+1]);return s}},29988:function(N,L,e){N.exports=function(_){for(var v,h=[],s=0,t=0,a=0,n=0,r=null,l=null,o=0,u=0,p=0,c=_.length;p<c;p++){var b=_[p],g=b[0];switch(g){case"M":a=b[1],n=b[2];break;case"A":var d=T({px:o,py:u,cx:b[6],cy:b[7],rx:b[1],ry:b[2],xAxisRotation:b[3],largeArcFlag:b[4],sweepFlag:b[5]});if(!d.length)continue;for(var m,x=0;x<d.length;x++)b=["C",(m=d[x]).x1,m.y1,m.x2,m.y2,m.x,m.y],x<d.length-1&&h.push(b);break;case"S":var y=o,k=u;v!="C"&&v!="S"||(y+=y-s,k+=k-t),b=["C",y,k,b[1],b[2],b[3],b[4]];break;case"T":v=="Q"||v=="T"?(r=2*o-r,l=2*u-l):(r=o,l=u),b=i(o,u,r,l,b[1],b[2]);break;case"Q":r=b[1],l=b[2],b=i(o,u,b[1],b[2],b[3],b[4]);break;case"L":b=w(o,u,b[1],b[2]);break;case"H":b=w(o,u,b[1],u);break;case"V":b=w(o,u,o,b[1]);break;case"Z":b=w(o,u,a,n)}v=g,o=b[b.length-2],u=b[b.length-1],b.length>4?(s=b[b.length-4],t=b[b.length-3]):(s=o,t=u),h.push(b)}return h};var T=e(7095);function w(_,v,h,s){return["C",_,v,h,s,h,s]}function i(_,v,h,s,t,a){return["C",_/3+.6666666666666666*h,v/3+.6666666666666666*s,t/3+.6666666666666666*h,a/3+.6666666666666666*s,t,a]}},82019:function(N,L,e){var T,w=e(1750),i=e(95616),_=e(31457),v=e(89546),h=e(44781),s=document.createElement("canvas"),t=s.getContext("2d");N.exports=function(a,n){if(!v(a))throw Error("Argument should be valid svg path string");var r,l;n||(n={}),n.shape?(r=n.shape[0],l=n.shape[1]):(r=s.width=n.w||n.width||200,l=s.height=n.h||n.height||200);var o=Math.min(r,l),u=n.stroke||0,p=n.viewbox||n.viewBox||w(a),c=[r/(p[2]-p[0]),l/(p[3]-p[1])],b=Math.min(c[0]||0,c[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,r,l),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*r,.5*l),t.scale(b,b),function(){if(T!=null)return T;var m=document.createElement("canvas").getContext("2d");if(m.canvas.width=m.canvas.height=1,!window.Path2D)return T=!1;var x=new Path2D("M0,0h1v1h-1v-1Z");m.fillStyle="black",m.fill(x);var y=m.getImageData(0,0,1,1);return T=y&&y.data&&y.data[3]===255}()){var g=new Path2D(a);t.fill(g),u&&t.stroke(g)}else{var d=i(a);_(t,d),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),h(t,{cutoff:n.cutoff!=null?n.cutoff:.5,radius:n.radius!=null?n.radius:.5*o})}},84267:function(N,L,e){var T;(function(w){var i=/^\s+/,_=/\s+$/,v=0,h=w.round,s=w.min,t=w.max,a=w.random;function n(K,ee){if(ee=ee||{},(K=K||"")instanceof n)return K;if(!(this instanceof n))return new n(K,ee);var ie=function(ae){var oe,fe,ge,ve={r:0,g:0,b:0},xe=1,_e=null,ye=null,Ce=null,ke=!1,Te=!1;return typeof ae=="string"&&(ae=function(le){le=le.replace(i,"").replace(_,"").toLowerCase();var ue,de=!1;if(O[le])le=O[le],de=!0;else if(le=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ue=J.rgb.exec(le))?{r:ue[1],g:ue[2],b:ue[3]}:(ue=J.rgba.exec(le))?{r:ue[1],g:ue[2],b:ue[3],a:ue[4]}:(ue=J.hsl.exec(le))?{h:ue[1],s:ue[2],l:ue[3]}:(ue=J.hsla.exec(le))?{h:ue[1],s:ue[2],l:ue[3],a:ue[4]}:(ue=J.hsv.exec(le))?{h:ue[1],s:ue[2],v:ue[3]}:(ue=J.hsva.exec(le))?{h:ue[1],s:ue[2],v:ue[3],a:ue[4]}:(ue=J.hex8.exec(le))?{r:R(ue[1]),g:R(ue[2]),b:R(ue[3]),a:V(ue[4]),format:de?"name":"hex8"}:(ue=J.hex6.exec(le))?{r:R(ue[1]),g:R(ue[2]),b:R(ue[3]),format:de?"name":"hex"}:(ue=J.hex4.exec(le))?{r:R(ue[1]+""+ue[1]),g:R(ue[2]+""+ue[2]),b:R(ue[3]+""+ue[3]),a:V(ue[4]+""+ue[4]),format:de?"name":"hex8"}:!!(ue=J.hex3.exec(le))&&{r:R(ue[1]+""+ue[1]),g:R(ue[2]+""+ue[2]),b:R(ue[3]+""+ue[3]),format:de?"name":"hex"}}(ae)),typeof ae=="object"&&(X(ae.r)&&X(ae.g)&&X(ae.b)?(oe=ae.r,fe=ae.g,ge=ae.b,ve={r:255*z(oe,255),g:255*z(fe,255),b:255*z(ge,255)},ke=!0,Te=String(ae.r).substr(-1)==="%"?"prgb":"rgb"):X(ae.h)&&X(ae.s)&&X(ae.v)?(_e=Z(ae.s),ye=Z(ae.v),ve=function(le,ue,de){le=6*z(le,360),ue=z(ue,100),de=z(de,100);var Le=w.floor(le),we=le-Le,Ee=de*(1-ue),Oe=de*(1-we*ue),Fe=de*(1-(1-we)*ue),pe=Le%6;return{r:255*[de,Oe,Ee,Ee,Fe,de][pe],g:255*[Fe,de,de,Oe,Ee,Ee][pe],b:255*[Ee,Ee,Fe,de,de,Oe][pe]}}(ae.h,_e,ye),ke=!0,Te="hsv"):X(ae.h)&&X(ae.s)&&X(ae.l)&&(_e=Z(ae.s),Ce=Z(ae.l),ve=function(le,ue,de){var Le,we,Ee;function Oe(be,Me,De){return De<0&&(De+=1),De>1&&(De-=1),De<1/6?be+6*(Me-be)*De:De<.5?Me:De<2/3?be+(Me-be)*(2/3-De)*6:be}if(le=z(le,360),ue=z(ue,100),de=z(de,100),ue===0)Le=we=Ee=de;else{var Fe=de<.5?de*(1+ue):de+ue-de*ue,pe=2*de-Fe;Le=Oe(pe,Fe,le+1/3),we=Oe(pe,Fe,le),Ee=Oe(pe,Fe,le-1/3)}return{r:255*Le,g:255*we,b:255*Ee}}(ae.h,_e,Ce),ke=!0,Te="hsl"),ae.hasOwnProperty("a")&&(xe=ae.a)),xe=I(xe),{ok:ke,format:ae.format||Te,r:s(255,t(ve.r,0)),g:s(255,t(ve.g,0)),b:s(255,t(ve.b,0)),a:xe}}(K);this._originalInput=K,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=h(100*this._a)/100,this._format=ee.format||ie.format,this._gradientType=ee.gradientType,this._r<1&&(this._r=h(this._r)),this._g<1&&(this._g=h(this._g)),this._b<1&&(this._b=h(this._b)),this._ok=ie.ok,this._tc_id=v++}function r(K,ee,ie){K=z(K,255),ee=z(ee,255),ie=z(ie,255);var ae,oe,fe=t(K,ee,ie),ge=s(K,ee,ie),ve=(fe+ge)/2;if(fe==ge)ae=oe=0;else{var xe=fe-ge;switch(oe=ve>.5?xe/(2-fe-ge):xe/(fe+ge),fe){case K:ae=(ee-ie)/xe+(ee<ie?6:0);break;case ee:ae=(ie-K)/xe+2;break;case ie:ae=(K-ee)/xe+4}ae/=6}return{h:ae,s:oe,l:ve}}function l(K,ee,ie){K=z(K,255),ee=z(ee,255),ie=z(ie,255);var ae,oe,fe=t(K,ee,ie),ge=s(K,ee,ie),ve=fe,xe=fe-ge;if(oe=fe===0?0:xe/fe,fe==ge)ae=0;else{switch(fe){case K:ae=(ee-ie)/xe+(ee<ie?6:0);break;case ee:ae=(ie-K)/xe+2;break;case ie:ae=(K-ee)/xe+4}ae/=6}return{h:ae,s:oe,v:ve}}function o(K,ee,ie,ae){var oe=[j(h(K).toString(16)),j(h(ee).toString(16)),j(h(ie).toString(16))];return ae&&oe[0].charAt(0)==oe[0].charAt(1)&&oe[1].charAt(0)==oe[1].charAt(1)&&oe[2].charAt(0)==oe[2].charAt(1)?oe[0].charAt(0)+oe[1].charAt(0)+oe[2].charAt(0):oe.join("")}function u(K,ee,ie,ae){return[j(F(ae)),j(h(K).toString(16)),j(h(ee).toString(16)),j(h(ie).toString(16))].join("")}function p(K,ee){ee=ee===0?0:ee||10;var ie=n(K).toHsl();return ie.s-=ee/100,ie.s=U(ie.s),n(ie)}function c(K,ee){ee=ee===0?0:ee||10;var ie=n(K).toHsl();return ie.s+=ee/100,ie.s=U(ie.s),n(ie)}function b(K){return n(K).desaturate(100)}function g(K,ee){ee=ee===0?0:ee||10;var ie=n(K).toHsl();return ie.l+=ee/100,ie.l=U(ie.l),n(ie)}function d(K,ee){ee=ee===0?0:ee||10;var ie=n(K).toRgb();return ie.r=t(0,s(255,ie.r-h(-ee/100*255))),ie.g=t(0,s(255,ie.g-h(-ee/100*255))),ie.b=t(0,s(255,ie.b-h(-ee/100*255))),n(ie)}function m(K,ee){ee=ee===0?0:ee||10;var ie=n(K).toHsl();return ie.l-=ee/100,ie.l=U(ie.l),n(ie)}function x(K,ee){var ie=n(K).toHsl(),ae=(ie.h+ee)%360;return ie.h=ae<0?360+ae:ae,n(ie)}function y(K){var ee=n(K).toHsl();return ee.h=(ee.h+180)%360,n(ee)}function k(K){var ee=n(K).toHsl(),ie=ee.h;return[n(K),n({h:(ie+120)%360,s:ee.s,l:ee.l}),n({h:(ie+240)%360,s:ee.s,l:ee.l})]}function f(K){var ee=n(K).toHsl(),ie=ee.h;return[n(K),n({h:(ie+90)%360,s:ee.s,l:ee.l}),n({h:(ie+180)%360,s:ee.s,l:ee.l}),n({h:(ie+270)%360,s:ee.s,l:ee.l})]}function S(K){var ee=n(K).toHsl(),ie=ee.h;return[n(K),n({h:(ie+72)%360,s:ee.s,l:ee.l}),n({h:(ie+216)%360,s:ee.s,l:ee.l})]}function M(K,ee,ie){ee=ee||6,ie=ie||30;var ae=n(K).toHsl(),oe=360/ie,fe=[n(K)];for(ae.h=(ae.h-(oe*ee>>1)+720)%360;--ee;)ae.h=(ae.h+oe)%360,fe.push(n(ae));return fe}function E(K,ee){ee=ee||6;for(var ie=n(K).toHsv(),ae=ie.h,oe=ie.s,fe=ie.v,ge=[],ve=1/ee;ee--;)ge.push(n({h:ae,s:oe,v:fe})),fe=(fe+ve)%1;return ge}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var K=this.toRgb();return(299*K.r+587*K.g+114*K.b)/1e3},getLuminance:function(){var K,ee,ie,ae=this.toRgb();return K=ae.r/255,ee=ae.g/255,ie=ae.b/255,.2126*(K<=.03928?K/12.92:w.pow((K+.055)/1.055,2.4))+.7152*(ee<=.03928?ee/12.92:w.pow((ee+.055)/1.055,2.4))+.0722*(ie<=.03928?ie/12.92:w.pow((ie+.055)/1.055,2.4))},setAlpha:function(K){return this._a=I(K),this._roundA=h(100*this._a)/100,this},toHsv:function(){var K=l(this._r,this._g,this._b);return{h:360*K.h,s:K.s,v:K.v,a:this._a}},toHsvString:function(){var K=l(this._r,this._g,this._b),ee=h(360*K.h),ie=h(100*K.s),ae=h(100*K.v);return this._a==1?"hsv("+ee+", "+ie+"%, "+ae+"%)":"hsva("+ee+", "+ie+"%, "+ae+"%, "+this._roundA+")"},toHsl:function(){var K=r(this._r,this._g,this._b);return{h:360*K.h,s:K.s,l:K.l,a:this._a}},toHslString:function(){var K=r(this._r,this._g,this._b),ee=h(360*K.h),ie=h(100*K.s),ae=h(100*K.l);return this._a==1?"hsl("+ee+", "+ie+"%, "+ae+"%)":"hsla("+ee+", "+ie+"%, "+ae+"%, "+this._roundA+")"},toHex:function(K){return o(this._r,this._g,this._b,K)},toHexString:function(K){return"#"+this.toHex(K)},toHex8:function(K){return function(ee,ie,ae,oe,fe){var ge=[j(h(ee).toString(16)),j(h(ie).toString(16)),j(h(ae).toString(16)),j(F(oe))];return fe&&ge[0].charAt(0)==ge[0].charAt(1)&&ge[1].charAt(0)==ge[1].charAt(1)&&ge[2].charAt(0)==ge[2].charAt(1)&&ge[3].charAt(0)==ge[3].charAt(1)?ge[0].charAt(0)+ge[1].charAt(0)+ge[2].charAt(0)+ge[3].charAt(0):ge.join("")}(this._r,this._g,this._b,this._a,K)},toHex8String:function(K){return"#"+this.toHex8(K)},toRgb:function(){return{r:h(this._r),g:h(this._g),b:h(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+h(this._r)+", "+h(this._g)+", "+h(this._b)+")":"rgba("+h(this._r)+", "+h(this._g)+", "+h(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:h(100*z(this._r,255))+"%",g:h(100*z(this._g,255))+"%",b:h(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+h(100*z(this._r,255))+"%, "+h(100*z(this._g,255))+"%, "+h(100*z(this._b,255))+"%)":"rgba("+h(100*z(this._r,255))+"%, "+h(100*z(this._g,255))+"%, "+h(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(P[o(this._r,this._g,this._b,!0)]||!1)},toFilter:function(K){var ee="#"+u(this._r,this._g,this._b,this._a),ie=ee,ae=this._gradientType?"GradientType = 1, ":"";if(K){var oe=n(K);ie="#"+u(oe._r,oe._g,oe._b,oe._a)}return"progid:DXImageTransform.Microsoft.gradient("+ae+"startColorstr="+ee+",endColorstr="+ie+")"},toString:function(K){var ee=!!K;K=K||this._format;var ie=!1,ae=this._a<1&&this._a>=0;return ee||!ae||K!=="hex"&&K!=="hex6"&&K!=="hex3"&&K!=="hex4"&&K!=="hex8"&&K!=="name"?(K==="rgb"&&(ie=this.toRgbString()),K==="prgb"&&(ie=this.toPercentageRgbString()),K!=="hex"&&K!=="hex6"||(ie=this.toHexString()),K==="hex3"&&(ie=this.toHexString(!0)),K==="hex4"&&(ie=this.toHex8String(!0)),K==="hex8"&&(ie=this.toHex8String()),K==="name"&&(ie=this.toName()),K==="hsl"&&(ie=this.toHslString()),K==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString()):K==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(K,ee){var ie=K.apply(null,[this].concat([].slice.call(ee)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(K,ee){return K.apply(null,[this].concat([].slice.call(ee)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(f,arguments)}},n.fromRatio=function(K,ee){if(typeof K=="object"){var ie={};for(var ae in K)K.hasOwnProperty(ae)&&(ie[ae]=ae==="a"?K[ae]:Z(K[ae]));K=ie}return n(K,ee)},n.equals=function(K,ee){return!(!K||!ee)&&n(K).toRgbString()==n(ee).toRgbString()},n.random=function(){return n.fromRatio({r:a(),g:a(),b:a()})},n.mix=function(K,ee,ie){ie=ie===0?0:ie||50;var ae=n(K).toRgb(),oe=n(ee).toRgb(),fe=ie/100;return n({r:(oe.r-ae.r)*fe+ae.r,g:(oe.g-ae.g)*fe+ae.g,b:(oe.b-ae.b)*fe+ae.b,a:(oe.a-ae.a)*fe+ae.a})},n.readability=function(K,ee){var ie=n(K),ae=n(ee);return(w.max(ie.getLuminance(),ae.getLuminance())+.05)/(w.min(ie.getLuminance(),ae.getLuminance())+.05)},n.isReadable=function(K,ee,ie){var ae,oe,fe,ge,ve,xe=n.readability(K,ee);switch(oe=!1,(fe=ie,(ge=((fe=fe||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ge!=="AAA"&&(ge="AA"),(ve=(fe.size||"small").toLowerCase())!=="small"&&ve!=="large"&&(ve="small"),ae={level:ge,size:ve}).level+ae.size){case"AAsmall":case"AAAlarge":oe=xe>=4.5;break;case"AAlarge":oe=xe>=3;break;case"AAAsmall":oe=xe>=7}return oe},n.mostReadable=function(K,ee,ie){var ae,oe,fe,ge,ve=null,xe=0;oe=(ie=ie||{}).includeFallbackColors,fe=ie.level,ge=ie.size;for(var _e=0;_e<ee.length;_e++)(ae=n.readability(K,ee[_e]))>xe&&(xe=ae,ve=n(ee[_e]));return n.isReadable(K,ve,{level:fe,size:ge})||!oe?ve:(ie.includeFallbackColors=!1,n.mostReadable(K,["#fff","#000"],ie))};var O=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=n.hexNames=function(K){var ee={};for(var ie in K)K.hasOwnProperty(ie)&&(ee[K[ie]]=ie);return ee}(O);function I(K){return K=parseFloat(K),(isNaN(K)||K<0||K>1)&&(K=1),K}function z(K,ee){(function(ae){return typeof ae=="string"&&ae.indexOf(".")!=-1&&parseFloat(ae)===1})(K)&&(K="100%");var ie=function(ae){return typeof ae=="string"&&ae.indexOf("%")!=-1}(K);return K=s(ee,t(0,parseFloat(K))),ie&&(K=parseInt(K*ee,10)/100),w.abs(K-ee)<1e-6?1:K%ee/parseFloat(ee)}function U(K){return s(1,t(0,K))}function R(K){return parseInt(K,16)}function j(K){return K.length==1?"0"+K:""+K}function Z(K){return K<=1&&(K=100*K+"%"),K}function F(K){return w.round(255*parseFloat(K)).toString(16)}function V(K){return R(K)/255}var H,te,$,J=(te="[\\s|\\(]+("+(H="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",$="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",{CSS_UNIT:new RegExp(H),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+$),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+$),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+$),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function X(K){return!!J.CSS_UNIT.exec(K)}N.exports?N.exports=n:(T=(function(){return n}).call(L,e,L,N))===void 0||(N.exports=T)})(Math)},57060:function(N){N.exports=e,N.exports.float32=N.exports.float=e,N.exports.fract32=N.exports.fract=function(T,w){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);w instanceof Float32Array||(w=e(T));for(var i=0,_=w.length;i<_;i++)w[i]=T[i]-w[i];return w}return e(T-e(T))};var L=new Float32Array(1);function e(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(L[0]=T,L[0])}},75686:function(N,L,e){var T=e(25677);N.exports=_;var w=96;function i(v,h){var s=T(getComputedStyle(v).getPropertyValue(h));return s[0]*_(s[1],v)}function _(v,h){switch(h=h||document.body,v=(v||"px").trim().toLowerCase(),h!==window&&h!==document||(h=document.body),v){case"%":return h.clientHeight/100;case"ch":case"ex":return function(s,t){var a=document.createElement("div");a.style["font-size"]="128"+s,t.appendChild(a);var n=i(a,"font-size")/128;return t.removeChild(a),n}(v,h);case"em":return i(h,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return w;case"cm":return w/2.54;case"mm":return w/25.4;case"pt":return w/72;case"pc":return w/6}return 1}},96892:function(N,L,e){function T(_){return _}function w(_,v){return typeof v=="string"&&(v=_.objects[v]),v.type==="GeometryCollection"?{type:"FeatureCollection",features:v.geometries.map(function(h){return i(_,h)})}:i(_,v)}function i(_,v){var h=v.id,s=v.bbox,t=v.properties==null?{}:v.properties,a=function(n,r){var l=function(d){if(d==null)return T;var m,x,y=d.scale[0],k=d.scale[1],f=d.translate[0],S=d.translate[1];return function(M,E){E||(m=x=0);var O=2,P=M.length,I=new Array(P);for(I[0]=(m+=M[0])*y+f,I[1]=(x+=M[1])*k+S;O<P;)I[O]=M[O],++O;return I}}(n.transform),o=n.arcs;function u(d,m){m.length&&m.pop();for(var x=o[d<0?~d:d],y=0,k=x.length;y<k;++y)m.push(l(x[y],y));d<0&&function(f,S){for(var M,E=f.length,O=E-S;O<--E;)M=f[O],f[O++]=f[E],f[E]=M}(m,k)}function p(d){return l(d)}function c(d){for(var m=[],x=0,y=d.length;x<y;++x)u(d[x],m);return m.length<2&&m.push(m[0]),m}function b(d){for(var m=c(d);m.length<4;)m.push(m[0]);return m}function g(d){return d.map(b)}return function d(m){var x,y=m.type;switch(y){case"GeometryCollection":return{type:y,geometries:m.geometries.map(d)};case"Point":x=p(m.coordinates);break;case"MultiPoint":x=m.coordinates.map(p);break;case"LineString":x=c(m.arcs);break;case"MultiLineString":x=m.arcs.map(c);break;case"Polygon":x=g(m.arcs);break;case"MultiPolygon":x=m.arcs.map(g);break;default:return null}return{type:y,coordinates:x}}(r)}(_,v);return h==null&&s==null?{type:"Feature",properties:t,geometry:a}:s==null?{type:"Feature",id:h,properties:t,geometry:a}:{type:"Feature",id:h,bbox:s,properties:t,geometry:a}}e.d(L,{zL:function(){return w}})},73116:function(N,L,e){var T=e(24511);N.exports=function(w){if(typeof w!="function"||!hasOwnProperty.call(w,"length"))return!1;try{if(typeof w.length!="number"||typeof w.call!="function"||typeof w.apply!="function")return!1}catch{return!1}return!T(w)}},69190:function(N,L,e){var T=e(24582),w=e(47403),i=e(9234),_=e(6048),v=function(h,s){return h.replace("%v",_(s))};N.exports=function(h,s,t){if(!w(t))throw new TypeError(v(s,h));if(!T(h)){if("default"in t)return t.default;if(t.isOptional)return null}var a=i(t.errorMessage);throw T(a)||(a=s),new TypeError(v(a,h))}},18497:function(N){N.exports=function(L){try{return L.toString()}catch{try{return String(L)}catch{return null}}}},6048:function(N,L,e){var T=e(18497),w=/[\n\r\u2028\u2029]/g;N.exports=function(i){var _=T(i);return _===null?"<Non-coercible to string value>":(_.length>100&&(_=_.slice(0,99)+""),_=_.replace(w,function(v){switch(v){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function(N,L,e){var T=e(24582),w={object:!0,function:!0,undefined:!0};N.exports=function(i){return!!T(i)&&hasOwnProperty.call(w,typeof i)}},82527:function(N,L,e){var T=e(69190),w=e(84985);N.exports=function(i){return w(i)?i:T(i,"%v is not a plain function",arguments[1])}},84985:function(N,L,e){var T=e(73116),w=/^\s*class[\s{/}]/,i=Function.prototype.toString;N.exports=function(_){return!!T(_)&&!w.test(i.call(_))}},24511:function(N,L,e){var T=e(47403);N.exports=function(w){if(!T(w))return!1;try{return!!w.constructor&&w.constructor.prototype===w}catch{return!1}}},9234:function(N,L,e){var T=e(24582),w=e(47403),i=Object.prototype.toString;N.exports=function(_){if(!T(_))return null;if(w(_)){var v=_.toString;if(typeof v!="function"||v===i)return null}try{return""+_}catch{return null}}},10424:function(N,L,e){var T=e(69190),w=e(24582);N.exports=function(i){return w(i)?i:T(i,"Cannot use %v",arguments[1])}},24582:function(N){N.exports=function(L){return L!=null}},58404:function(N,L,e){var T=e(13547),w=e(12129),i=e(12856).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:w([32,0]),UINT16:w([32,0]),UINT32:w([32,0]),BIGUINT64:w([32,0]),INT8:w([32,0]),INT16:w([32,0]),INT32:w([32,0]),BIGINT64:w([32,0]),FLOAT:w([32,0]),DOUBLE:w([32,0]),DATA:w([32,0]),UINT8C:w([32,0]),BUFFER:w([32,0])});var _=typeof Uint8ClampedArray<"u",v=typeof BigUint64Array<"u",h=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=w([32,0])),s.BIGUINT64||(s.BIGUINT64=w([32,0])),s.BIGINT64||(s.BIGINT64=w([32,0])),s.BUFFER||(s.BUFFER=w([32,0]));var t=s.DATA,a=s.BUFFER;function n(S){if(S){var M=S.length||S.byteLength,E=T.log2(M);t[E].push(S)}}function r(S){S=T.nextPow2(S);var M=T.log2(S),E=t[M];return E.length>0?E.pop():new ArrayBuffer(S)}function l(S){return new Uint8Array(r(S),0,S)}function o(S){return new Uint16Array(r(2*S),0,S)}function u(S){return new Uint32Array(r(4*S),0,S)}function p(S){return new Int8Array(r(S),0,S)}function c(S){return new Int16Array(r(2*S),0,S)}function b(S){return new Int32Array(r(4*S),0,S)}function g(S){return new Float32Array(r(4*S),0,S)}function d(S){return new Float64Array(r(8*S),0,S)}function m(S){return _?new Uint8ClampedArray(r(S),0,S):l(S)}function x(S){return v?new BigUint64Array(r(8*S),0,S):null}function y(S){return h?new BigInt64Array(r(8*S),0,S):null}function k(S){return new DataView(r(S),0,S)}function f(S){S=T.nextPow2(S);var M=T.log2(S),E=a[M];return E.length>0?E.pop():new i(S)}L.free=function(S){if(i.isBuffer(S))a[T.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var M=S.length||S.byteLength,E=0|T.log2(M);t[E].push(S)}},L.freeUint8=L.freeUint16=L.freeUint32=L.freeBigUint64=L.freeInt8=L.freeInt16=L.freeInt32=L.freeBigInt64=L.freeFloat32=L.freeFloat=L.freeFloat64=L.freeDouble=L.freeUint8Clamped=L.freeDataView=function(S){n(S.buffer)},L.freeArrayBuffer=n,L.freeBuffer=function(S){a[T.log2(S.length)].push(S)},L.malloc=function(S,M){if(M===void 0||M==="arraybuffer")return r(S);switch(M){case"uint8":return l(S);case"uint16":return o(S);case"uint32":return u(S);case"int8":return p(S);case"int16":return c(S);case"int32":return b(S);case"float":case"float32":return g(S);case"double":case"float64":return d(S);case"uint8_clamped":return m(S);case"bigint64":return y(S);case"biguint64":return x(S);case"buffer":return f(S);case"data":case"dataview":return k(S);default:return null}return null},L.mallocArrayBuffer=r,L.mallocUint8=l,L.mallocUint16=o,L.mallocUint32=u,L.mallocInt8=p,L.mallocInt16=c,L.mallocInt32=b,L.mallocFloat32=L.mallocFloat=g,L.mallocFloat64=L.mallocDouble=d,L.mallocUint8Clamped=m,L.mallocBigUint64=x,L.mallocBigInt64=y,L.mallocDataView=k,L.mallocBuffer=f,L.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,a[S].length=0}},90448:function(N){var L=/[\'\"]/;N.exports=function(e){return e?(L.test(e.charAt(0))&&(e=e.substr(1)),L.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},93447:function(N){N.exports=function(L,e,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var w=0,i=T.length;w<i;w++){var _=T[w];for(var v in _)if((e[v]===void 0||Array.isArray(e[v])||L[v]!==e[v])&&v in e){var h;if(_[v]===!0)h=e[v];else if(_[v]===!1||typeof _[v]=="function"&&(h=_[v](e[v],L,e))===void 0)continue;L[v]=h}}return L}},20588:function(N,L,e){function T(w){try{if(!e.g.localStorage)return!1}catch{return!1}var i=e.g.localStorage[w];return i!=null&&String(i).toLowerCase()==="true"}N.exports=function(w,i){if(T("noDeprecation"))return w;var _=!1;return function(){if(!_){if(T("throwDeprecation"))throw new Error(i);T("traceDeprecation")?console.trace(i):console.warn(i),_=!0}return w.apply(this,arguments)}}},45920:function(N){N.exports=function(L){return L&&typeof L=="object"&&typeof L.copy=="function"&&typeof L.fill=="function"&&typeof L.readUInt8=="function"}},4936:function(N,L,e){var T=e(47216),w=e(65481),i=e(21099),_=e(9187);function v(z){return z.call.bind(z)}var h=typeof BigInt<"u",s=typeof Symbol<"u",t=v(Object.prototype.toString),a=v(Number.prototype.valueOf),n=v(String.prototype.valueOf),r=v(Boolean.prototype.valueOf);if(h)var l=v(BigInt.prototype.valueOf);if(s)var o=v(Symbol.prototype.valueOf);function u(z,U){if(typeof z!="object")return!1;try{return U(z),!0}catch{return!1}}function p(z){return t(z)==="[object Map]"}function c(z){return t(z)==="[object Set]"}function b(z){return t(z)==="[object WeakMap]"}function g(z){return t(z)==="[object WeakSet]"}function d(z){return t(z)==="[object ArrayBuffer]"}function m(z){return typeof ArrayBuffer<"u"&&(d.working?d(z):z instanceof ArrayBuffer)}function x(z){return t(z)==="[object DataView]"}function y(z){return typeof DataView<"u"&&(x.working?x(z):z instanceof DataView)}L.isArgumentsObject=T,L.isGeneratorFunction=w,L.isTypedArray=_,L.isPromise=function(z){return typeof Promise<"u"&&z instanceof Promise||z!==null&&typeof z=="object"&&typeof z.then=="function"&&typeof z.catch=="function"},L.isArrayBufferView=function(z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(z):_(z)||y(z)},L.isUint8Array=function(z){return i(z)==="Uint8Array"},L.isUint8ClampedArray=function(z){return i(z)==="Uint8ClampedArray"},L.isUint16Array=function(z){return i(z)==="Uint16Array"},L.isUint32Array=function(z){return i(z)==="Uint32Array"},L.isInt8Array=function(z){return i(z)==="Int8Array"},L.isInt16Array=function(z){return i(z)==="Int16Array"},L.isInt32Array=function(z){return i(z)==="Int32Array"},L.isFloat32Array=function(z){return i(z)==="Float32Array"},L.isFloat64Array=function(z){return i(z)==="Float64Array"},L.isBigInt64Array=function(z){return i(z)==="BigInt64Array"},L.isBigUint64Array=function(z){return i(z)==="BigUint64Array"},p.working=typeof Map<"u"&&p(new Map),L.isMap=function(z){return typeof Map<"u"&&(p.working?p(z):z instanceof Map)},c.working=typeof Set<"u"&&c(new Set),L.isSet=function(z){return typeof Set<"u"&&(c.working?c(z):z instanceof Set)},b.working=typeof WeakMap<"u"&&b(new WeakMap),L.isWeakMap=function(z){return typeof WeakMap<"u"&&(b.working?b(z):z instanceof WeakMap)},g.working=typeof WeakSet<"u"&&g(new WeakSet),L.isWeakSet=function(z){return g(z)},d.working=typeof ArrayBuffer<"u"&&d(new ArrayBuffer),L.isArrayBuffer=m,x.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&x(new DataView(new ArrayBuffer(1),0,1)),L.isDataView=y;var k=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function f(z){return t(z)==="[object SharedArrayBuffer]"}function S(z){return k!==void 0&&(f.working===void 0&&(f.working=f(new k)),f.working?f(z):z instanceof k)}function M(z){return u(z,a)}function E(z){return u(z,n)}function O(z){return u(z,r)}function P(z){return h&&u(z,l)}function I(z){return s&&u(z,o)}L.isSharedArrayBuffer=S,L.isAsyncFunction=function(z){return t(z)==="[object AsyncFunction]"},L.isMapIterator=function(z){return t(z)==="[object Map Iterator]"},L.isSetIterator=function(z){return t(z)==="[object Set Iterator]"},L.isGeneratorObject=function(z){return t(z)==="[object Generator]"},L.isWebAssemblyCompiledModule=function(z){return t(z)==="[object WebAssembly.Module]"},L.isNumberObject=M,L.isStringObject=E,L.isBooleanObject=O,L.isBigIntObject=P,L.isSymbolObject=I,L.isBoxedPrimitive=function(z){return M(z)||E(z)||O(z)||P(z)||I(z)},L.isAnyArrayBuffer=function(z){return typeof Uint8Array<"u"&&(m(z)||S(z))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(z){Object.defineProperty(L,z,{enumerable:!1,value:function(){throw new Error(z+" is not supported in userland")}})})},43827:function(N,L,e){var T=e(90386),w=Object.getOwnPropertyDescriptors||function(I){for(var z=Object.keys(I),U={},R=0;R<z.length;R++)U[z[R]]=Object.getOwnPropertyDescriptor(I,z[R]);return U},i=/%[sdj%]/g;L.format=function(I){if(!b(I)){for(var z=[],U=0;U<arguments.length;U++)z.push(s(arguments[U]));return z.join(" ")}U=1;for(var R=arguments,j=R.length,Z=String(I).replace(i,function(V){if(V==="%%")return"%";if(U>=j)return V;switch(V){case"%s":return String(R[U++]);case"%d":return Number(R[U++]);case"%j":try{return JSON.stringify(R[U++])}catch{return"[Circular]"}default:return V}}),F=R[U];U<j;F=R[++U])p(F)||!m(F)?Z+=" "+F:Z+=" "+s(F);return Z},L.deprecate=function(I,z){if(T!==void 0&&T.noDeprecation===!0)return I;if(T===void 0)return function(){return L.deprecate(I,z).apply(this,arguments)};var U=!1;return function(){if(!U){if(T.throwDeprecation)throw new Error(z);T.traceDeprecation?console.trace(z):console.error(z),U=!0}return I.apply(this,arguments)}};var _={},v=/^$/;if(T.env.NODE_DEBUG){var h=T.env.NODE_DEBUG;h=h.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),v=new RegExp("^"+h+"$","i")}function s(I,z){var U={seen:[],stylize:a};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),u(z)?U.showHidden=z:z&&L._extend(U,z),g(U.showHidden)&&(U.showHidden=!1),g(U.depth)&&(U.depth=2),g(U.colors)&&(U.colors=!1),g(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=t),n(U,I,U.depth)}function t(I,z){var U=s.styles[z];return U?"\x1B["+s.colors[U][0]+"m"+I+"\x1B["+s.colors[U][1]+"m":I}function a(I,z){return I}function n(I,z,U){if(I.customInspect&&z&&k(z.inspect)&&z.inspect!==L.inspect&&(!z.constructor||z.constructor.prototype!==z)){var R=z.inspect(U,I);return b(R)||(R=n(I,R,U)),R}var j=function(X,K){if(g(K))return X.stylize("undefined","undefined");if(b(K)){var ee="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return X.stylize(ee,"string")}return c(K)?X.stylize(""+K,"number"):u(K)?X.stylize(""+K,"boolean"):p(K)?X.stylize("null","null"):void 0}(I,z);if(j)return j;var Z=Object.keys(z),F=function(X){var K={};return X.forEach(function(ee,ie){K[ee]=!0}),K}(Z);if(I.showHidden&&(Z=Object.getOwnPropertyNames(z)),y(z)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return r(z);if(Z.length===0){if(k(z)){var V=z.name?": "+z.name:"";return I.stylize("[Function"+V+"]","special")}if(d(z))return I.stylize(RegExp.prototype.toString.call(z),"regexp");if(x(z))return I.stylize(Date.prototype.toString.call(z),"date");if(y(z))return r(z)}var H,te="",$=!1,J=["{","}"];return o(z)&&($=!0,J=["[","]"]),k(z)&&(te=" [Function"+(z.name?": "+z.name:"")+"]"),d(z)&&(te=" "+RegExp.prototype.toString.call(z)),x(z)&&(te=" "+Date.prototype.toUTCString.call(z)),y(z)&&(te=" "+r(z)),Z.length!==0||$&&z.length!=0?U<0?d(z)?I.stylize(RegExp.prototype.toString.call(z),"regexp"):I.stylize("[Object]","special"):(I.seen.push(z),H=$?function(X,K,ee,ie,ae){for(var oe=[],fe=0,ge=K.length;fe<ge;++fe)E(K,String(fe))?oe.push(l(X,K,ee,ie,String(fe),!0)):oe.push("");return ae.forEach(function(ve){ve.match(/^\d+$/)||oe.push(l(X,K,ee,ie,ve,!0))}),oe}(I,z,U,F,Z):Z.map(function(X){return l(I,z,U,F,X,$)}),I.seen.pop(),function(X,K,ee){return X.reduce(function(ie,ae){return ae.indexOf(`
`),ie+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ee[0]+(K===""?"":K+`
 `)+" "+X.join(`,
  `)+" "+ee[1]:ee[0]+K+" "+X.join(", ")+" "+ee[1]}(H,te,J)):J[0]+te+J[1]}function r(I){return"["+Error.prototype.toString.call(I)+"]"}function l(I,z,U,R,j,Z){var F,V,H;if((H=Object.getOwnPropertyDescriptor(z,j)||{value:z[j]}).get?V=H.set?I.stylize("[Getter/Setter]","special"):I.stylize("[Getter]","special"):H.set&&(V=I.stylize("[Setter]","special")),E(R,j)||(F="["+j+"]"),V||(I.seen.indexOf(H.value)<0?(V=p(U)?n(I,H.value,null):n(I,H.value,U-1)).indexOf(`
`)>-1&&(V=Z?V.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):`
`+V.split(`
`).map(function(te){return"   "+te}).join(`
`)):V=I.stylize("[Circular]","special")),g(F)){if(Z&&j.match(/^\d+$/))return V;(F=JSON.stringify(""+j)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=I.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=I.stylize(F,"string"))}return F+": "+V}function o(I){return Array.isArray(I)}function u(I){return typeof I=="boolean"}function p(I){return I===null}function c(I){return typeof I=="number"}function b(I){return typeof I=="string"}function g(I){return I===void 0}function d(I){return m(I)&&f(I)==="[object RegExp]"}function m(I){return typeof I=="object"&&I!==null}function x(I){return m(I)&&f(I)==="[object Date]"}function y(I){return m(I)&&(f(I)==="[object Error]"||I instanceof Error)}function k(I){return typeof I=="function"}function f(I){return Object.prototype.toString.call(I)}function S(I){return I<10?"0"+I.toString(10):I.toString(10)}L.debuglog=function(I){if(I=I.toUpperCase(),!_[I])if(v.test(I)){var z=T.pid;_[I]=function(){var U=L.format.apply(L,arguments);console.error("%s %d: %s",I,z,U)}}else _[I]=function(){};return _[I]},L.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},L.types=e(4936),L.isArray=o,L.isBoolean=u,L.isNull=p,L.isNullOrUndefined=function(I){return I==null},L.isNumber=c,L.isString=b,L.isSymbol=function(I){return typeof I=="symbol"},L.isUndefined=g,L.isRegExp=d,L.types.isRegExp=d,L.isObject=m,L.isDate=x,L.types.isDate=x,L.isError=y,L.types.isNativeError=y,L.isFunction=k,L.isPrimitive=function(I){return I===null||typeof I=="boolean"||typeof I=="number"||typeof I=="string"||typeof I=="symbol"||I===void 0},L.isBuffer=e(45920);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(I,z){return Object.prototype.hasOwnProperty.call(I,z)}L.log=function(){var I,z;console.log("%s - %s",(z=[S((I=new Date).getHours()),S(I.getMinutes()),S(I.getSeconds())].join(":"),[I.getDate(),M[I.getMonth()],z].join(" ")),L.format.apply(L,arguments))},L.inherits=e(42018),L._extend=function(I,z){if(!z||!m(z))return I;for(var U=Object.keys(z),R=U.length;R--;)I[U[R]]=z[U[R]];return I};var O=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function P(I,z){if(!I){var U=new Error("Promise was rejected with a falsy value");U.reason=I,I=U}return z(I)}L.promisify=function(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');if(O&&I[O]){var z;if(typeof(z=I[O])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(z,O,{value:z,enumerable:!1,writable:!1,configurable:!0}),z}function z(){for(var U,R,j=new Promise(function(V,H){U=V,R=H}),Z=[],F=0;F<arguments.length;F++)Z.push(arguments[F]);Z.push(function(V,H){V?R(V):U(H)});try{I.apply(this,Z)}catch(V){R(V)}return j}return Object.setPrototypeOf(z,Object.getPrototypeOf(I)),O&&Object.defineProperty(z,O,{value:z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(z,w(I))},L.promisify.custom=O,L.callbackify=function(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');function z(){for(var U=[],R=0;R<arguments.length;R++)U.push(arguments[R]);var j=U.pop();if(typeof j!="function")throw new TypeError("The last argument must be of type Function");var Z=this,F=function(){return j.apply(Z,arguments)};I.apply(this,U).then(function(V){T.nextTick(F.bind(null,null,V))},function(V){T.nextTick(P.bind(null,V,F))})}return Object.setPrototypeOf(z,Object.getPrototypeOf(I)),Object.defineProperties(z,w(I)),z}},40372:function(N,L,e){var T=e(86249);N.exports=function(w){return T("webgl",w)}},21099:function(N,L,e){var T=e(31353),w=e(72077),i=e(6614),_=e(40383),v=i("Object.prototype.toString"),h=e(84543)(),s=typeof globalThis>"u"?e.g:globalThis,t=w(),a=i("String.prototype.slice"),n={},r=Object.getPrototypeOf;h&&_&&r&&T(t,function(o){if(typeof s[o]=="function"){var u=new s[o];if(Symbol.toStringTag in u){var p=r(u),c=_(p,Symbol.toStringTag);if(!c){var b=r(p);c=_(b,Symbol.toStringTag)}n[o]=c.get}}});var l=e(9187);N.exports=function(o){return!!l(o)&&(h&&Symbol.toStringTag in o?function(u){var p=!1;return T(n,function(c,b){if(!p)try{var g=c.call(u);g===b&&(p=g)}catch{}}),p}(o):a(v(o),8,-1))}},3961:function(N,L,e){var T=e(63489),w=e(56131),i=T.instance();function _(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}_.prototype=new T.baseCalendar,w(_.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(r,l){if(typeof r=="string"){var o=r.match(h);return o?o[0]:""}var u=this._validateYear(r),p=r.month(),c=""+this.toChineseMonth(u,p);return l&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,p)&&(c+="i"),c},monthNames:function(r){if(typeof r=="string"){var l=r.match(s);return l?l[0]:""}var o=this._validateYear(r),u=r.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(o,u)-1];return this.isIntercalaryMonth(o,u)&&(p=""+p),p},monthNamesShort:function(r){if(typeof r=="string"){var l=r.match(t);return l?l[0]:""}var o=this._validateYear(r),u=r.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(o,u)-1];return this.isIntercalaryMonth(o,u)&&(p=""+p),p},parseMonth:function(r,l){r=this._validateYear(r);var o,u=parseInt(l);if(isNaN(u))l[0]===""&&(o=!0,l=l.substring(1)),l[l.length-1]===""&&(l=l.substring(0,l.length-1)),u=1+["","","","","","","","","","","",""].indexOf(l);else{var p=l[l.length-1];o=p==="i"||p==="I"}return this.toMonthIndex(r,u,o)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(r,l){if(r.year&&(r=r.year()),typeof r!="number"||r<1888||r>2111)throw l.replace(/\{0\}/,this.local.name);return r},toMonthIndex:function(r,l,o){var u=this.intercalaryMonth(r);if(o&&l!==u||l<1||l>12)throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!o&&l<=u?l-1:l:l-1},toChineseMonth:function(r,l){r.year&&(l=(r=r.year()).month());var o=this.intercalaryMonth(r);if(l<0||l>(o?12:11))throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return o?l<o?l+1:l:l+1},intercalaryMonth:function(r){return r=this._validateYear(r),a[r-a[0]]>>13},isIntercalaryMonth:function(r,l){r.year&&(l=(r=r.year()).month());var o=this.intercalaryMonth(r);return!!o&&o===l},leapYear:function(r){return this.intercalaryMonth(r)!==0},weekOfYear:function(r,l,o){var u,p=this._validateYear(r,T.local.invalidyear),c=n[p-n[0]],b=c>>9&4095,g=c>>5&15,d=31&c;(u=i.newDate(b,g,d)).add(4-(u.dayOfWeek()||7),"d");var m=this.toJD(r,l,o)-u.toJD();return 1+Math.floor(m/7)},monthsInYear:function(r){return this.leapYear(r)?13:12},daysInMonth:function(r,l){r.year&&(l=r.month(),r=r.year()),r=this._validateYear(r);var o=a[r-a[0]];if(l>(o>>13?12:11))throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return o&1<<12-l?30:29},weekDay:function(r,l,o){return(this.dayOfWeek(r,l,o)||7)<6},toJD:function(r,l,o){var u=this._validate(r,c,o,T.local.invalidDate);r=this._validateYear(u.year()),l=u.month(),o=u.day();var p=this.isIntercalaryMonth(r,l),c=this.toChineseMonth(r,l),b=function(g,d,m,x,y){var k,f,S;if(typeof g=="object")f=g,k=d||{};else{var M;if(!(typeof g=="number"&&g>=1888&&g<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof d=="number"&&d>=1&&d<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof m=="number"&&m>=1&&m<=30))throw new Error("Lunar day outside range 1 - 30");typeof x=="object"?(M=!1,k=x):(M=!!x,k={}),f={year:g,month:d,day:m,isIntercalary:M}}S=f.day-1;var E,O=a[f.year-a[0]],P=O>>13;E=P&&(f.month>P||f.isIntercalary)?f.month:f.month-1;for(var I=0;I<E;I++)S+=O&1<<12-I?30:29;var z=n[f.year-n[0]],U=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+S);return k.year=U.getFullYear(),k.month=1+U.getMonth(),k.day=U.getDate(),k}(r,c,o,p);return i.toJD(b.year,b.month,b.day)},fromJD:function(r){var l=i.fromJD(r),o=function(p,c,b,g){var d,m;if(typeof p=="object")d=p,m=c||{};else{if(!(typeof p=="number"&&p>=1888&&p<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof b=="number"&&b>=1&&b<=31))throw new Error("Solar day outside range 1 - 31");d={year:p,month:c,day:b},m={}}var x=n[d.year-n[0]],y=d.year<<9|d.month<<5|d.day;m.year=y>=x?d.year:d.year-1,x=n[m.year-n[0]];var k,f=new Date(x>>9&4095,(x>>5&15)-1,31&x),S=new Date(d.year,d.month-1,d.day);k=Math.round((S-f)/864e5);var M,E=a[m.year-a[0]];for(M=0;M<13;M++){var O=E&1<<12-M?30:29;if(k<O)break;k-=O}var P=E>>13;return!P||M<P?(m.isIntercalary=!1,m.month=1+M):M===P?(m.isIntercalary=!0,m.month=M):(m.isIntercalary=!1,m.month=M),m.day=1+k,m}(l.year(),l.month(),l.day()),u=this.toMonthIndex(o.year,o.month,o.isIntercalary);return this.newDate(o.year,u,o.day)},fromString:function(r){var l=r.match(v),o=this._validateYear(+l[1]),u=+l[2],p=!!l[3],c=this.toMonthIndex(o,u,p),b=+l[4];return this.newDate(o,c,b)},add:function(r,l,o){var u=r.year(),p=r.month(),c=this.isIntercalaryMonth(u,p),b=this.toChineseMonth(u,p),g=Object.getPrototypeOf(_.prototype).add.call(this,r,l,o);if(o==="y"){var d=g.year(),m=g.month(),x=this.isIntercalaryMonth(d,b),y=c&&x?this.toMonthIndex(d,b,!0):this.toMonthIndex(d,b,!1);y!==m&&g.month(y)}return g}});var v=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,h=/^\d?\d[iI]?/m,s=/^??[]?/m,t=/^??[]?/m;T.calendars.chinese=_;var a=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],n=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(N,L,e){var T=e(63489),w=e(56131);function i(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}i.prototype=new T.baseCalendar,w(i.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var v=this._validate(_,this.minMonth,this.minDay,T.local.invalidYear);return(_=v.year()+(v.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(_,v,h){var s=this.newDate(_,v,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(_,v){var h=this._validate(_,v,this.minDay,T.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(_,v,h){return(this.dayOfWeek(_,v,h)||7)<6},toJD:function(_,v,h){var s=this._validate(_,v,h,T.local.invalidDate);return(_=s.year())<0&&_++,s.day()+30*(s.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var v=Math.floor(_)+.5-this.jdEpoch,h=Math.floor((v-Math.floor((v+366)/1461))/365)+1;h<=0&&h--,v=Math.floor(_)+.5-this.newDate(h,1,1).toJD();var s=Math.floor(v/30)+1,t=v-30*(s-1)+1;return this.newDate(h,s,t)}}),T.calendars.coptic=i},86825:function(N,L,e){var T=e(63489),w=e(56131);function i(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}i.prototype=new T.baseCalendar,w(i.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(v){return this._validate(v,this.minMonth,this.minDay,T.local.invalidYear),!1},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,T.local.invalidYear),13},daysInYear:function(v){return this._validate(v,this.minMonth,this.minDay,T.local.invalidYear),400},weekOfYear:function(v,h,s){var t=this.newDate(v,h,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(v,h){var s=this._validate(v,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(v,h,s){return(this._validate(v,h,s,T.local.invalidDate).day()+1)%8},weekDay:function(v,h,s){var t=this.dayOfWeek(v,h,s);return t>=2&&t<=6},extraInfo:function(v,h,s){var t=this._validate(v,h,s,T.local.invalidDate);return{century:_[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(v,h,s){var t=this._validate(v,h,s,T.local.invalidDate);return v=t.year()+(t.year()<0?1:0),h=t.month(),(s=t.day())+(h>1?16:0)+(h>2?32*(h-2):0)+400*(v-1)+this.jdEpoch-1},fromJD:function(v){v=Math.floor(v+.5)-Math.floor(this.jdEpoch)-1;var h=Math.floor(v/400)+1;v-=400*(h-1),v+=v>15?16:0;var s=Math.floor(v/32)+1,t=v-32*(s-1)+1;return this.newDate(h<=0?h-1:h,s,t)}});var _={20:"Fruitbat",21:"Anchovy"};T.calendars.discworld=i},37715:function(N,L,e){var T=e(63489),w=e(56131);function i(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}i.prototype=new T.baseCalendar,w(i.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var v=this._validate(_,this.minMonth,this.minDay,T.local.invalidYear);return(_=v.year()+(v.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(_,v,h){var s=this.newDate(_,v,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(_,v){var h=this._validate(_,v,this.minDay,T.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(_,v,h){return(this.dayOfWeek(_,v,h)||7)<6},toJD:function(_,v,h){var s=this._validate(_,v,h,T.local.invalidDate);return(_=s.year())<0&&_++,s.day()+30*(s.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var v=Math.floor(_)+.5-this.jdEpoch,h=Math.floor((v-Math.floor((v+366)/1461))/365)+1;h<=0&&h--,v=Math.floor(_)+.5-this.newDate(h,1,1).toJD();var s=Math.floor(v/30)+1,t=v-30*(s-1)+1;return this.newDate(h,s,t)}}),T.calendars.ethiopian=i},99384:function(N,L,e){var T=e(63489),w=e(56131);function i(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}function _(v,h){return v-h*Math.floor(v/h)}i.prototype=new T.baseCalendar,w(i.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var h=this._validate(v,this.minMonth,this.minDay,T.local.invalidYear);return this._leapYear(h.year())},_leapYear:function(v){return _(7*(v=v<0?v+1:v)+1,19)<7},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,T.local.invalidYear),this._leapYear(v.year?v.year():v)?13:12},weekOfYear:function(v,h,s){var t=this.newDate(v,h,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(v){return v=this._validate(v,this.minMonth,this.minDay,T.local.invalidYear).year(),this.toJD(v===-1?1:v+1,7,1)-this.toJD(v,7,1)},daysInMonth:function(v,h){return v.year&&(h=v.month(),v=v.year()),this._validate(v,h,this.minDay,T.local.invalidMonth),h===12&&this.leapYear(v)||h===8&&_(this.daysInYear(v),10)===5?30:h===9&&_(this.daysInYear(v),10)===3?29:this.daysPerMonth[h-1]},weekDay:function(v,h,s){return this.dayOfWeek(v,h,s)!==6},extraInfo:function(v,h,s){var t=this._validate(v,h,s,T.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(v,h,s){var t=this._validate(v,h,s,T.local.invalidDate);v=t.year(),h=t.month(),s=t.day();var a=v<=0?v+1:v,n=this.jdEpoch+this._delay1(a)+this._delay2(a)+s+1;if(h<7){for(var r=7;r<=this.monthsInYear(v);r++)n+=this.daysInMonth(v,r);for(r=1;r<h;r++)n+=this.daysInMonth(v,r)}else for(r=7;r<h;r++)n+=this.daysInMonth(v,r);return n},_delay1:function(v){var h=Math.floor((235*v-234)/19),s=12084+13753*h,t=29*h+Math.floor(s/25920);return _(3*(t+1),7)<3&&t++,t},_delay2:function(v){var h=this._delay1(v-1),s=this._delay1(v);return this._delay1(v+1)-s==356?2:s-h==382?1:0},fromJD:function(v){v=Math.floor(v)+.5;for(var h=Math.floor(98496*(v-this.jdEpoch)/35975351)-1;v>=this.toJD(h===-1?1:h+1,7,1);)h++;for(var s=v<this.toJD(h,1,1)?7:1;v>this.toJD(h,s,this.daysInMonth(h,s));)s++;var t=v-this.toJD(h,s,1)+1;return this.newDate(h,s,t)}}),T.calendars.hebrew=i},43805:function(N,L,e){var T=e(63489),w=e(56131);function i(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}i.prototype=new T.baseCalendar,w(i.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(_){return(11*this._validate(_,this.minMonth,this.minDay,T.local.invalidYear).year()+14)%30<11},weekOfYear:function(_,v,h){var s=this.newDate(_,v,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(_){return this.leapYear(_)?355:354},daysInMonth:function(_,v){var h=this._validate(_,v,this.minDay,T.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===12&&this.leapYear(h.year())?1:0)},weekDay:function(_,v,h){return this.dayOfWeek(_,v,h)!==5},toJD:function(_,v,h){var s=this._validate(_,v,h,T.local.invalidDate);return _=s.year(),v=s.month(),_=_<=0?_+1:_,(h=s.day())+Math.ceil(29.5*(v-1))+354*(_-1)+Math.floor((3+11*_)/30)+this.jdEpoch-1},fromJD:function(_){_=Math.floor(_)+.5;var v=Math.floor((30*(_-this.jdEpoch)+10646)/10631);v=v<=0?v-1:v;var h=Math.min(12,Math.ceil((_-29-this.toJD(v,1,1))/29.5)+1),s=_-this.toJD(v,h,1)+1;return this.newDate(v,h,s)}}),T.calendars.islamic=i},88874:function(N,L,e){var T=e(63489),w=e(56131);function i(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}i.prototype=new T.baseCalendar,w(i.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var v=this._validate(_,this.minMonth,this.minDay,T.local.invalidYear);return(_=v.year()<0?v.year()+1:v.year())%4==0},weekOfYear:function(_,v,h){var s=this.newDate(_,v,h);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(_,v){var h=this._validate(_,v,this.minDay,T.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(_,v,h){return(this.dayOfWeek(_,v,h)||7)<6},toJD:function(_,v,h){var s=this._validate(_,v,h,T.local.invalidDate);return _=s.year(),v=s.month(),h=s.day(),_<0&&_++,v<=2&&(_--,v+=12),Math.floor(365.25*(_+4716))+Math.floor(30.6001*(v+1))+h-1524.5},fromJD:function(_){var v=Math.floor(_+.5)+1524,h=Math.floor((v-122.1)/365.25),s=Math.floor(365.25*h),t=Math.floor((v-s)/30.6001),a=t-Math.floor(t<14?1:13),n=h-Math.floor(a>2?4716:4715),r=v-s-Math.floor(30.6001*t);return n<=0&&n--,this.newDate(n,a,r)}}),T.calendars.julian=i},83290:function(N,L,e){var T=e(63489),w=e(56131);function i(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function _(h,s){return h-s*Math.floor(h/s)}function v(h,s){return _(h-1,s)+1}i.prototype=new T.baseCalendar,w(i.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),!1},formatYear:function(h){h=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear).year();var s=Math.floor(h/400);return h%=400,h+=h<0?400:0,s+"."+Math.floor(h/20)+"."+h%20},forYear:function(h){if((h=h.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<h.length;t++){var a=parseInt(h[t],10);if(Math.abs(a)>19||t>0&&a<0)throw"Invalid Mayan year";s=20*s+a}return s},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),18},weekOfYear:function(h,s,t){return this._validate(h,s,t,T.local.invalidDate),0},daysInYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),360},daysInMonth:function(h,s){return this._validate(h,s,this.minDay,T.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(h,s,t){return this._validate(h,s,t,T.local.invalidDate).day()},weekDay:function(h,s,t){return this._validate(h,s,t,T.local.invalidDate),!0},extraInfo:function(h,s,t){var a=this._validate(h,s,t,T.local.invalidDate).toJD(),n=this._toHaab(a),r=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[r[0]-1],tzolkinDay:r[0],tzolkinTrecena:r[1]}},_toHaab:function(h){var s=_(8+(h-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,_(s,20)]},_toTzolkin:function(h){return[v(20+(h-=this.jdEpoch),20),v(h+4,13)]},toJD:function(h,s,t){var a=this._validate(h,s,t,T.local.invalidDate);return a.day()+20*a.month()+360*a.year()+this.jdEpoch},fromJD:function(h){h=Math.floor(h)+.5-this.jdEpoch;var s=Math.floor(h/360);h%=360,h+=h<0?360:0;var t=Math.floor(h/20),a=h%20;return this.newDate(s,t,a)}}),T.calendars.mayan=i},29108:function(N,L,e){var T=e(63489),w=e(56131);function i(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}i.prototype=new T.baseCalendar;var _=T.instance("gregorian");w(i.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var h=this._validate(v,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear);return _.leapYear(h.year()+(h.year()<1?1:0)+1469)},weekOfYear:function(v,h,s){var t=this.newDate(v,h,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(v,h){var s=this._validate(v,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(v,h,s){return(this.dayOfWeek(v,h,s)||7)<6},toJD:function(v,h,s){var t=this._validate(v,h,s,T.local.invalidMonth);(v=t.year())<0&&v++;for(var a=t.day(),n=1;n<t.month();n++)a+=this.daysPerMonth[n-1];return a+_.toJD(v+1468,3,13)},fromJD:function(v){v=Math.floor(v+.5);for(var h=Math.floor((v-(this.jdEpoch-1))/366);v>=this.toJD(h+1,1,1);)h++;for(var s=v-Math.floor(this.toJD(h,1,1)+.5)+1,t=1;s>this.daysInMonth(h,t);)s-=this.daysInMonth(h,t),t++;return this.newDate(h,t,s)}}),T.calendars.nanakshahi=i},55422:function(N,L,e){var T=e(63489),w=e(56131);function i(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}i.prototype=new T.baseCalendar,w(i.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(_){return this.daysInYear(_)!==this.daysPerYear},weekOfYear:function(_,v,h){var s=this.newDate(_,v,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(_){if(_=this._validate(_,this.minMonth,this.minDay,T.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[_]===void 0)return this.daysPerYear;for(var v=0,h=this.minMonth;h<=12;h++)v+=this.NEPALI_CALENDAR_DATA[_][h];return v},daysInMonth:function(_,v){return _.year&&(v=_.month(),_=_.year()),this._validate(_,v,this.minDay,T.local.invalidMonth),this.NEPALI_CALENDAR_DATA[_]===void 0?this.daysPerMonth[v-1]:this.NEPALI_CALENDAR_DATA[_][v]},weekDay:function(_,v,h){return this.dayOfWeek(_,v,h)!==6},toJD:function(_,v,h){var s=this._validate(_,v,h,T.local.invalidDate);_=s.year(),v=s.month(),h=s.day();var t=T.instance(),a=0,n=v,r=_;this._createMissingCalendarData(_);var l=_-(n>9||n===9&&h>=this.NEPALI_CALENDAR_DATA[r][0]?56:57);for(v!==9&&(a=h,n--);n!==9;)n<=0&&(n=12,r--),a+=this.NEPALI_CALENDAR_DATA[r][n],n--;return v===9?(a+=h-this.NEPALI_CALENDAR_DATA[r][0])<0&&(a+=t.daysInYear(l)):a+=this.NEPALI_CALENDAR_DATA[r][9]-this.NEPALI_CALENDAR_DATA[r][0],t.newDate(l,1,1).add(a,"d").toJD()},fromJD:function(_){var v=T.instance().fromJD(_),h=v.year(),s=v.dayOfYear(),t=h+56;this._createMissingCalendarData(t);for(var a=9,n=this.NEPALI_CALENDAR_DATA[t][0],r=this.NEPALI_CALENDAR_DATA[t][a]-n+1;s>r;)++a>12&&(a=1,t++),r+=this.NEPALI_CALENDAR_DATA[t][a];var l=this.NEPALI_CALENDAR_DATA[t][a]-(r-s);return this.newDate(t,a,l)},_createMissingCalendarData:function(_){var v=this.daysPerMonth.slice(0);v.unshift(17);for(var h=_-1;h<_+2;h++)this.NEPALI_CALENDAR_DATA[h]===void 0&&(this.NEPALI_CALENDAR_DATA[h]=v)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),T.calendars.nepali=i},94320:function(N,L,e){var T=e(63489),w=e(56131);function i(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}function _(v,h){return v-h*Math.floor(v/h)}i.prototype=new T.baseCalendar,w(i.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(v){var h=this._validate(v,this.minMonth,this.minDay,T.local.invalidYear);return 682*((h.year()-(h.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(v,h,s){var t=this.newDate(v,h,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(v,h){var s=this._validate(v,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(v,h,s){return this.dayOfWeek(v,h,s)!==5},toJD:function(v,h,s){var t=this._validate(v,h,s,T.local.invalidDate);v=t.year(),h=t.month(),s=t.day();var a=v-(v>=0?474:473),n=474+_(a,2820);return s+(h<=7?31*(h-1):30*(h-1)+6)+Math.floor((682*n-110)/2816)+365*(n-1)+1029983*Math.floor(a/2820)+this.jdEpoch-1},fromJD:function(v){var h=(v=Math.floor(v)+.5)-this.toJD(475,1,1),s=Math.floor(h/1029983),t=_(h,1029983),a=2820;if(t!==1029982){var n=Math.floor(t/366),r=_(t,366);a=Math.floor((2134*n+2816*r+2815)/1028522)+n+1}var l=a+2820*s+474;l=l<=0?l-1:l;var o=v-this.toJD(l,1,1)+1,u=o<=186?Math.ceil(o/31):Math.ceil((o-6)/30),p=v-this.toJD(l,u,1)+1;return this.newDate(l,u,p)}}),T.calendars.persian=i,T.calendars.jalali=i},31320:function(N,L,e){var T=e(63489),w=e(56131),i=T.instance();function _(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}_.prototype=new T.baseCalendar,w(_.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(v){var h=this._validate(v,this.minMonth,this.minDay,T.local.invalidYear);return v=this._t2gYear(h.year()),i.leapYear(v)},weekOfYear:function(v,h,s){var t=this._validate(v,this.minMonth,this.minDay,T.local.invalidYear);return v=this._t2gYear(t.year()),i.weekOfYear(v,t.month(),t.day())},daysInMonth:function(v,h){var s=this._validate(v,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(v,h,s){return(this.dayOfWeek(v,h,s)||7)<6},toJD:function(v,h,s){var t=this._validate(v,h,s,T.local.invalidDate);return v=this._t2gYear(t.year()),i.toJD(v,t.month(),t.day())},fromJD:function(v){var h=i.fromJD(v),s=this._g2tYear(h.year());return this.newDate(s,h.month(),h.day())},_t2gYear:function(v){return v+this.yearsOffset+(v>=-this.yearsOffset&&v<=-1?1:0)},_g2tYear:function(v){return v-this.yearsOffset-(v>=1&&v<=this.yearsOffset?1:0)}}),T.calendars.taiwan=_},51367:function(N,L,e){var T=e(63489),w=e(56131),i=T.instance();function _(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}_.prototype=new T.baseCalendar,w(_.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var h=this._validate(v,this.minMonth,this.minDay,T.local.invalidYear);return v=this._t2gYear(h.year()),i.leapYear(v)},weekOfYear:function(v,h,s){var t=this._validate(v,this.minMonth,this.minDay,T.local.invalidYear);return v=this._t2gYear(t.year()),i.weekOfYear(v,t.month(),t.day())},daysInMonth:function(v,h){var s=this._validate(v,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(v,h,s){return(this.dayOfWeek(v,h,s)||7)<6},toJD:function(v,h,s){var t=this._validate(v,h,s,T.local.invalidDate);return v=this._t2gYear(t.year()),i.toJD(v,t.month(),t.day())},fromJD:function(v){var h=i.fromJD(v),s=this._g2tYear(h.year());return this.newDate(s,h.month(),h.day())},_t2gYear:function(v){return v-this.yearsOffset-(v>=1&&v<=this.yearsOffset?1:0)},_g2tYear:function(v){return v+this.yearsOffset+(v>=-this.yearsOffset&&v<=-1?1:0)}}),T.calendars.thai=_},21457:function(N,L,e){var T=e(63489),w=e(56131);function i(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}i.prototype=new T.baseCalendar,w(i.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(v){var h=this._validate(v,this.minMonth,this.minDay,T.local.invalidYear);return this.daysInYear(h.year())===355},weekOfYear:function(v,h,s){var t=this.newDate(v,h,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(v){for(var h=0,s=1;s<=12;s++)h+=this.daysInMonth(v,s);return h},daysInMonth:function(v,h){for(var s=this._validate(v,h,this.minDay,T.local.invalidMonth).toJD()-24e5+.5,t=0,a=0;a<_.length;a++){if(_[a]>s)return _[t]-_[t-1];t++}return 30},weekDay:function(v,h,s){return this.dayOfWeek(v,h,s)!==5},toJD:function(v,h,s){var t=this._validate(v,h,s,T.local.invalidDate),a=12*(t.year()-1)+t.month()-15292;return t.day()+_[a-1]-1+24e5-.5},fromJD:function(v){for(var h=v-24e5+.5,s=0,t=0;t<_.length&&!(_[t]>h);t++)s++;var a=s+15292,n=Math.floor((a-1)/12),r=n+1,l=a-12*n,o=h-_[s-1]+1;return this.newDate(r,l,o)},isValid:function(v,h,s){var t=T.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(v=v.year!=null?v.year:v)>=1276&&v<=1500),t},_validate:function(v,h,s,t){var a=T.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||a.year>1500)throw t.replace(/\{0\}/,this.local.name);return a}}),T.calendars.ummalqura=i;var _=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(N,L,e){var T=e(56131);function w(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function i(t,a,n,r){if(this._calendar=t,this._year=a,this._month=n,this._day=r,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function _(t,a){return"000000".substring(0,a-(t=""+t).length)+t}function v(){this.shortYearCutoff="+10"}function h(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}T(w.prototype,{instance:function(t,a){t=(t||"gregorian").toLowerCase(),a=a||"";var n=this._localCals[t+"-"+a];if(!n&&this.calendars[t]&&(n=new this.calendars[t](a),this._localCals[t+"-"+a]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return n},newDate:function(t,a,n,r,l){return(r=(t!=null&&t.year?t.calendar():typeof r=="string"?this.instance(r,l):r)||this.instance()).newDate(t,a,n)},substituteDigits:function(t){return function(a){return(a+"").replace(/[0-9]/g,function(n){return t[n]})}},substituteChineseDigits:function(t,a){return function(n){for(var r="",l=0;n>0;){var o=n%10;r=(o===0?"":t[o]+a[l])+r,l++,n=Math.floor(n/10)}return r.indexOf(t[1]+a[1])===0&&(r=r.substr(1)),r||t[0]}}}),T(i.prototype,{newDate:function(t,a,n){return this._calendar.newDate(t??this,a,n)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,a,n){if(!this._calendar.isValid(t,a,n))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=a,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,a){return this._calendar.add(this,t,a)},set:function(t,a){return this._calendar.set(this,t,a)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var a=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return a===0?0:a<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+_(Math.abs(this.year()),4)+"-"+_(this.month(),2)+"-"+_(this.day(),2)}}),T(v.prototype,{_validateLevel:0,newDate:function(t,a,n){return t==null?this.today():(t.year&&(this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),n=t.day(),a=t.month(),t=t.year()),new i(this,t,a,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(a.year()<0?"-":"")+_(Math.abs(a.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,a){var n=this._validate(t,a,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(t,a){var n=(a+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,n,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),n},daysInYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(a)?366:365},dayOfYear:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(t,a,n){return this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,a,n){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,a,n),a,n)},_add:function(t,a,n){if(this._validateLevel++,n==="d"||n==="w"){var r=t.toJD()+a*(n==="w"?this.daysInWeek():1),l=t.calendar().fromJD(r);return this._validateLevel--,[l.year(),l.month(),l.day()]}try{var o=t.year()+(n==="y"?a:0),u=t.monthOfYear()+(n==="m"?a:0);l=t.day(),n==="y"?(t.month()!==this.fromMonthOfYear(o,u)&&(u=this.newDate(o,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(o)),l=Math.min(l,this.daysInMonth(o,this.fromMonthOfYear(o,u)))):n==="m"&&(function(c){for(;u<c.minMonth;)o--,u+=c.monthsInYear(o);for(var b=c.monthsInYear(o);u>b-1+c.minMonth;)o++,u-=b,b=c.monthsInYear(o)}(this),l=Math.min(l,this.daysInMonth(o,this.fromMonthOfYear(o,u))));var p=[o,this.fromMonthOfYear(o,u),l];return this._validateLevel--,p}catch(c){throw this._validateLevel--,c}},_correctAdd:function(t,a,n,r){if(!(this.hasYearZero||r!=="y"&&r!=="m"||a[0]!==0&&t.year()>0==a[0]>0)){var l={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],o=n<0?-1:1;a=this._add(t,n*l[0]+o*l[1],l[2])}return t.date(a[0],a[1],a[2])},set:function(t,a,n){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var r=n==="y"?a:t.year(),l=n==="m"?a:t.month(),o=n==="d"?a:t.day();return n!=="y"&&n!=="m"||(o=Math.min(o,this.daysInMonth(r,l))),t.date(r,l,o)},isValid:function(t,a,n){this._validateLevel++;var r=this.hasYearZero||t!==0;if(r){var l=this.newDate(t,a,this.minDay);r=a>=this.minMonth&&a-this.minMonth<this.monthsInYear(l)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(l)}return this._validateLevel--,r},toJSDate:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,a,n,r){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,a,n))throw r.replace(/\{0\}/,this.local.name);var l=this.newDate(t,a,n);return this._validateLevel--,l}catch(o){throw this._validateLevel--,o}}}),h.prototype=new v,T(h.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=a.year()+(a.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,a,n){var r=this.newDate(t,a,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,a){var n=this._validate(t,a,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,a,n){return(this.dayOfWeek(t,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=r.year(),a=r.month(),n=r.day(),t<0&&t++,a<3&&(a+=12,t--);var l=Math.floor(t/100),o=2-l+Math.floor(l/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(a+1))+n+o-1524.5},fromJD:function(t){var a=Math.floor(t+.5),n=Math.floor((a-186721625e-2)/36524.25),r=1524+(n=a+1+n-Math.floor(n/4)),l=Math.floor((r-122.1)/365.25),o=Math.floor(365.25*l),u=Math.floor((r-o)/30.6001),p=r-o-Math.floor(30.6001*u),c=u-(u>13.5?13:1),b=l-(c>2.5?4716:4715);return b<=0&&b--,this.newDate(b,c,p)},toJSDate:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),l=new Date(r.year(),r.month()-1,r.day());return l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),l.setHours(l.getHours()>12?l.getHours()+2:0),l},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=N.exports=new w;s.cdate=i,s.baseCalendar=v,s.calendars.gregorian=h},94338:function(N,L,e){var T=e(56131),w=e(63489);T(w.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),w.local=w.regionalOptions[""],T(w.cdate.prototype,{formatDate:function(i,_){return typeof i!="string"&&(_=i,i=""),this._calendar.formatDate(i||"",this,_)}}),T(w.baseCalendar.prototype,{UNIX_EPOCH:w.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:w.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(i,_,v){if(typeof i!="string"&&(v=_,_=i,i=""),!_)return"";if(_.calendar()!==this)throw w.local.invalidFormat||w.regionalOptions[""].invalidFormat;i=i||this.local.dateFormat;for(var h,s,t,a=(v=v||{}).dayNamesShort||this.local.dayNamesShort,n=v.dayNames||this.local.dayNames,r=v.monthNumbers||this.local.monthNumbers,l=v.monthNamesShort||this.local.monthNamesShort,o=v.monthNames||this.local.monthNames,u=(v.calculateWeek||this.local.calculateWeek,function(f,S){for(var M=1;k+M<i.length&&i.charAt(k+M)===f;)M++;return k+=M-1,Math.floor(M/(S||1))>1}),p=function(f,S,M,E){var O=""+S;if(u(f,E))for(;O.length<M;)O="0"+O;return O},c=this,b=function(f){return typeof r=="function"?r.call(c,f,u("m")):m(p("m",f.month(),2))},g=function(f,S){return S?typeof o=="function"?o.call(c,f):o[f.month()-c.minMonth]:typeof l=="function"?l.call(c,f):l[f.month()-c.minMonth]},d=this.local.digits,m=function(f){return v.localNumbers&&d?d(f):f},x="",y=!1,k=0;k<i.length;k++)if(y)i.charAt(k)!=="'"||u("'")?x+=i.charAt(k):y=!1;else switch(i.charAt(k)){case"d":x+=m(p("d",_.day(),2));break;case"D":x+=(h=_.dayOfWeek(),s=a,t=n,u("D")?t[h]:s[h]);break;case"o":x+=p("o",_.dayOfYear(),3);break;case"w":x+=p("w",_.weekOfYear(),2);break;case"m":x+=b(_);break;case"M":x+=g(_,u("M"));break;case"y":x+=u("y",2)?_.year():(_.year()%100<10?"0":"")+_.year()%100;break;case"Y":u("Y",2),x+=_.formatYear();break;case"J":x+=_.toJD();break;case"@":x+=(_.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(_.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?x+="'":y=!0;break;default:x+=i.charAt(k)}return x},parseDate:function(i,_,v){if(_==null)throw w.local.invalidArguments||w.regionalOptions[""].invalidArguments;if((_=typeof _=="object"?_.toString():_+"")==="")return null;i=i||this.local.dateFormat;var h=(v=v||{}).shortYearCutoff||this.shortYearCutoff;h=typeof h!="string"?h:this.today().year()%100+parseInt(h,10);for(var s=v.dayNamesShort||this.local.dayNamesShort,t=v.dayNames||this.local.dayNames,a=v.parseMonth||this.local.parseMonth,n=v.monthNumbers||this.local.monthNumbers,r=v.monthNamesShort||this.local.monthNamesShort,l=v.monthNames||this.local.monthNames,o=-1,u=-1,p=-1,c=-1,b=-1,g=!1,d=!1,m=function(z,U){for(var R=1;O+R<i.length&&i.charAt(O+R)===z;)R++;return O+=R-1,Math.floor(R/(U||1))>1},x=function(z,U){var R=m(z,U),j=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],Z=new RegExp("^-?\\d{1,"+j+"}"),F=_.substring(E).match(Z);if(!F)throw(w.local.missingNumberAt||w.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=F[0].length,parseInt(F[0],10)},y=this,k=function(){if(typeof n=="function"){m("m");var z=n.call(y,_.substring(E));return E+=z.length,z}return x("m")},f=function(z,U,R,j){for(var Z=m(z,j)?R:U,F=0;F<Z.length;F++)if(_.substr(E,Z[F].length).toLowerCase()===Z[F].toLowerCase())return E+=Z[F].length,F+y.minMonth;throw(w.local.unknownNameAt||w.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof l=="function"){var z=m("M")?l.call(y,_.substring(E)):r.call(y,_.substring(E));return E+=z.length,z}return f("M",r,l)},M=function(){if(_.charAt(E)!==i.charAt(O))throw(w.local.unexpectedLiteralAt||w.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,O=0;O<i.length;O++)if(d)i.charAt(O)!=="'"||m("'")?M():d=!1;else switch(i.charAt(O)){case"d":c=x("d");break;case"D":f("D",s,t);break;case"o":b=x("o");break;case"w":x("w");break;case"m":p=k();break;case"M":p=S();break;case"y":var P=O;g=!m("y",2),O=P,u=x("y",2);break;case"Y":u=x("Y",2);break;case"J":o=x("J")+.5,_.charAt(E)==="."&&(E++,x("J"));break;case"@":o=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":o=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=_.length;break;case"'":m("'")?M():d=!0;break;default:M()}if(E<_.length)throw w.local.unexpectedText||w.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&g&&(u+=h===-1?1900:this.today().year()-this.today().year()%100-(u<=h?0:100)),typeof p=="string"&&(p=a.call(this,u,p)),b>-1){p=1,c=b;for(var I=this.daysInMonth(u,p);c>I;I=this.daysInMonth(u,p))p++,c-=I}return o>-1?this.fromJD(o):this.newDate(u,p,c)},determineDate:function(i,_,v,h,s){v&&typeof v!="object"&&(s=h,h=v,v=null),typeof h!="string"&&(s=h,h="");var t=this;return _=_?_.newDate():null,i==null?_:typeof i=="string"?function(a){try{return t.parseDate(h,a,s)}catch{}for(var n=((a=a.toLowerCase()).match(/^c/)&&v?v.newDate():null)||t.today(),r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,l=r.exec(a);l;)n.add(parseInt(l[1],10),l[2]||"d"),l=r.exec(a);return n}(i):typeof i=="number"?isNaN(i)||i===1/0||i===-1/0?_:t.today().add(i,"d"):t.newDate(i)}})},69862:function(){},40964:function(){},72077:function(N,L,e){var T=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],w=typeof globalThis>"u"?e.g:globalThis;N.exports=function(){for(var i=[],_=0;_<T.length;_++)typeof w[T[_]]=="function"&&(i[i.length]=T[_]);return i}},81684:function(N,L,e){function T(ge,ve,xe){ge.prototype=ve.prototype=xe,xe.constructor=ge}function w(ge,ve){var xe=Object.create(ge.prototype);for(var _e in ve)xe[_e]=ve[_e];return xe}function i(){}e.d(L,{sX:function(){return fe},k4:function(){return $}});var _=.7,v=1/_,h="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\(".concat(h,",").concat(h,",").concat(h,"\\)$")),r=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),l=new RegExp("^rgba\\(".concat(h,",").concat(h,",").concat(h,",").concat(s,"\\)$")),o=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),u=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),p=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function d(ge){var ve,xe;return ge=(ge+"").trim().toLowerCase(),(ve=a.exec(ge))?(xe=ve[1].length,ve=parseInt(ve[1],16),xe===6?m(ve):xe===3?new k(ve>>8&15|ve>>4&240,ve>>4&15|240&ve,(15&ve)<<4|15&ve,1):xe===8?x(ve>>24&255,ve>>16&255,ve>>8&255,(255&ve)/255):xe===4?x(ve>>12&15|ve>>8&240,ve>>8&15|ve>>4&240,ve>>4&15|240&ve,((15&ve)<<4|15&ve)/255):null):(ve=n.exec(ge))?new k(ve[1],ve[2],ve[3],1):(ve=r.exec(ge))?new k(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,1):(ve=l.exec(ge))?x(ve[1],ve[2],ve[3],ve[4]):(ve=o.exec(ge))?x(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,ve[4]):(ve=u.exec(ge))?P(ve[1],ve[2]/100,ve[3]/100,1):(ve=p.exec(ge))?P(ve[1],ve[2]/100,ve[3]/100,ve[4]):c.hasOwnProperty(ge)?m(c[ge]):ge==="transparent"?new k(NaN,NaN,NaN,0):null}function m(ge){return new k(ge>>16&255,ge>>8&255,255&ge,1)}function x(ge,ve,xe,_e){return _e<=0&&(ge=ve=xe=NaN),new k(ge,ve,xe,_e)}function y(ge,ve,xe,_e){return arguments.length===1?((ye=ge)instanceof i||(ye=d(ye)),ye?new k((ye=ye.rgb()).r,ye.g,ye.b,ye.opacity):new k):new k(ge,ve,xe,_e??1);var ye}function k(ge,ve,xe,_e){this.r=+ge,this.g=+ve,this.b=+xe,this.opacity=+_e}function f(){return"#".concat(O(this.r)).concat(O(this.g)).concat(O(this.b))}function S(){var ge=M(this.opacity);return"".concat(ge===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(ge===1?")":", ".concat(ge,")"))}function M(ge){return isNaN(ge)?1:Math.max(0,Math.min(1,ge))}function E(ge){return Math.max(0,Math.min(255,Math.round(ge)||0))}function O(ge){return((ge=E(ge))<16?"0":"")+ge.toString(16)}function P(ge,ve,xe,_e){return _e<=0?ge=ve=xe=NaN:xe<=0||xe>=1?ge=ve=NaN:ve<=0&&(ge=NaN),new z(ge,ve,xe,_e)}function I(ge){if(ge instanceof z)return new z(ge.h,ge.s,ge.l,ge.opacity);if(ge instanceof i||(ge=d(ge)),!ge)return new z;if(ge instanceof z)return ge;var ve=(ge=ge.rgb()).r/255,xe=ge.g/255,_e=ge.b/255,ye=Math.min(ve,xe,_e),Ce=Math.max(ve,xe,_e),ke=NaN,Te=Ce-ye,le=(Ce+ye)/2;return Te?(ke=ve===Ce?(xe-_e)/Te+6*(xe<_e):xe===Ce?(_e-ve)/Te+2:(ve-xe)/Te+4,Te/=le<.5?Ce+ye:2-Ce-ye,ke*=60):Te=le>0&&le<1?0:ke,new z(ke,Te,le,ge.opacity)}function z(ge,ve,xe,_e){this.h=+ge,this.s=+ve,this.l=+xe,this.opacity=+_e}function U(ge){return(ge=(ge||0)%360)<0?ge+360:ge}function R(ge){return Math.max(0,Math.min(1,ge||0))}function j(ge,ve,xe){return 255*(ge<60?ve+(xe-ve)*ge/60:ge<180?xe:ge<240?ve+(xe-ve)*(240-ge)/60:ve)}T(i,d,{copy:function(ge){return Object.assign(new this.constructor,this,ge)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return I(this).formatHsl()},formatRgb:g,toString:g}),T(k,y,w(i,{brighter:function(ge){return ge=ge==null?v:Math.pow(v,ge),new k(this.r*ge,this.g*ge,this.b*ge,this.opacity)},darker:function(ge){return ge=ge==null?_:Math.pow(_,ge),new k(this.r*ge,this.g*ge,this.b*ge,this.opacity)},rgb:function(){return this},clamp:function(){return new k(E(this.r),E(this.g),E(this.b),M(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f,formatHex:f,formatHex8:function(){return"#".concat(O(this.r)).concat(O(this.g)).concat(O(this.b)).concat(O(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),T(z,function(ge,ve,xe,_e){return arguments.length===1?I(ge):new z(ge,ve,xe,_e??1)},w(i,{brighter:function(ge){return ge=ge==null?v:Math.pow(v,ge),new z(this.h,this.s,this.l*ge,this.opacity)},darker:function(ge){return ge=ge==null?_:Math.pow(_,ge),new z(this.h,this.s,this.l*ge,this.opacity)},rgb:function(){var ge=this.h%360+360*(this.h<0),ve=isNaN(ge)||isNaN(this.s)?0:this.s,xe=this.l,_e=xe+(xe<.5?xe:1-xe)*ve,ye=2*xe-_e;return new k(j(ge>=240?ge-240:ge+120,ye,_e),j(ge,ye,_e),j(ge<120?ge+240:ge-120,ye,_e),this.opacity)},clamp:function(){return new z(U(this.h),R(this.s),R(this.l),M(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ge=M(this.opacity);return"".concat(ge===1?"hsl(":"hsla(").concat(U(this.h),", ").concat(100*R(this.s),"%, ").concat(100*R(this.l),"%").concat(ge===1?")":", ".concat(ge,")"))}}));var Z=function(ge){return function(){return ge}};function F(ge,ve){var xe=ve-ge;return xe?function(_e,ye){return function(Ce){return _e+Ce*ye}}(ge,xe):Z(isNaN(ge)?ve:ge)}var V=function ge(ve){var xe=function(ye){return(ye=+ye)==1?F:function(Ce,ke){return ke-Ce?function(Te,le,ue){return Te=Math.pow(Te,ue),le=Math.pow(le,ue)-Te,ue=1/ue,function(de){return Math.pow(Te+de*le,ue)}}(Ce,ke,ye):Z(isNaN(Ce)?ke:Ce)}}(ve);function _e(ye,Ce){var ke=xe((ye=y(ye)).r,(Ce=y(Ce)).r),Te=xe(ye.g,Ce.g),le=xe(ye.b,Ce.b),ue=F(ye.opacity,Ce.opacity);return function(de){return ye.r=ke(de),ye.g=Te(de),ye.b=le(de),ye.opacity=ue(de),ye+""}}return _e.gamma=ge,_e}(1);function H(ge,ve){var xe,_e=ve?ve.length:0,ye=ge?Math.min(_e,ge.length):0,Ce=new Array(ye),ke=new Array(_e);for(xe=0;xe<ye;++xe)Ce[xe]=fe(ge[xe],ve[xe]);for(;xe<_e;++xe)ke[xe]=ve[xe];return function(Te){for(xe=0;xe<ye;++xe)ke[xe]=Ce[xe](Te);return ke}}function te(ge,ve){var xe=new Date;return ge=+ge,ve=+ve,function(_e){return xe.setTime(ge*(1-_e)+ve*_e),xe}}function $(ge,ve){return ge=+ge,ve=+ve,function(xe){return ge*(1-xe)+ve*xe}}function J(ge){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},J(ge)}function X(ge,ve){var xe,_e={},ye={};for(xe in ge!==null&&J(ge)==="object"||(ge={}),ve!==null&&J(ve)==="object"||(ve={}),ve)xe in ge?_e[xe]=fe(ge[xe],ve[xe]):ye[xe]=ve[xe];return function(Ce){for(xe in _e)ye[xe]=_e[xe](Ce);return ye}}var K=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ee=new RegExp(K.source,"g");function ie(ge,ve){var xe,_e,ye,Ce=K.lastIndex=ee.lastIndex=0,ke=-1,Te=[],le=[];for(ge+="",ve+="";(xe=K.exec(ge))&&(_e=ee.exec(ve));)(ye=_e.index)>Ce&&(ye=ve.slice(Ce,ye),Te[ke]?Te[ke]+=ye:Te[++ke]=ye),(xe=xe[0])===(_e=_e[0])?Te[ke]?Te[ke]+=_e:Te[++ke]=_e:(Te[++ke]=null,le.push({i:ke,x:$(xe,_e)})),Ce=ee.lastIndex;return Ce<ve.length&&(ye=ve.slice(Ce),Te[ke]?Te[ke]+=ye:Te[++ke]=ye),Te.length<2?le[0]?function(ue){return function(de){return ue(de)+""}}(le[0].x):function(ue){return function(){return ue}}(ve):(ve=le.length,function(ue){for(var de,Le=0;Le<ve;++Le)Te[(de=le[Le]).i]=de.x(ue);return Te.join("")})}function ae(ge,ve){ve||(ve=[]);var xe,_e=ge?Math.min(ve.length,ge.length):0,ye=ve.slice();return function(Ce){for(xe=0;xe<_e;++xe)ye[xe]=ge[xe]*(1-Ce)+ve[xe]*Ce;return ye}}function oe(ge){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},oe(ge)}function fe(ge,ve){var xe,_e,ye=oe(ve);return ve==null||ye==="boolean"?Z(ve):(ye==="number"?$:ye==="string"?(xe=d(ve))?(ve=xe,V):ie:ve instanceof d?V:ve instanceof Date?te:(_e=ve,!ArrayBuffer.isView(_e)||_e instanceof DataView?Array.isArray(ve)?H:typeof ve.valueOf!="function"&&typeof ve.toString!="function"||isNaN(ve)?X:$:ae))(ge,ve)}},40402:function(N){N.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(N){N.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(N){N.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(N){N.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(N){N.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(N){N.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Re={};function Ge(N){var L=Re[N];if(L!==void 0)return L.exports;var e=Re[N]={exports:{}};return Ae[N].call(e.exports,e,e.exports,Ge),e.exports}return Ge.n=function(N){var L=N&&N.__esModule?function(){return N.default}:function(){return N};return Ge.d(L,{a:L}),L},Ge.d=function(N,L){for(var e in L)Ge.o(L,e)&&!Ge.o(N,e)&&Object.defineProperty(N,e,{enumerable:!0,get:L[e]})},Ge.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ge.o=function(N,L){return Object.prototype.hasOwnProperty.call(N,L)},Ge.r=function(N){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})},Ge(27909)}()})})(uv);var C3=uv.exports;const Yc=g3(C3);function O3(re){let se,Ae;return{c(){se=br("div"),Ae=br("div"),Un(Ae,"id","plotDiv"),Un(Ae,"class","svelte-1wq0m82"),Un(se,"class","container svelte-1wq0m82"),Ms(se,"hidden",!re[0])},m(Re,Ge){Lr(Re,se,Ge),ar(se,Ae),re[5](Ae)},p(Re,[Ge]){Ge&1&&Ms(se,"hidden",!Re[0])},i:xi,o:xi,d(Re){Re&&Er(se),re[5](null)}}}function P3(re,se,Ae){function Re(v){var s;const h={};for(let t=0;t<v.extraction.length;t++){if(!(w in v.extraction[t].params))continue;const a=v.extraction[t].params[w];typeof a.value=="number"&&(h[s=a.value]||(h[s]=0),h[a.value]+=1)}return h}function Ge(v){const h=Object.keys(v).sort(),s=Array(h.length).fill(0);for(const t of h)s[h.indexOf(t)]=v[t];Yc.newPlot(e,[{x:h,y:s,type:"bar",marker:{color:i}}],{title:!1,hovermode:"closest",plot_bgcolor:"transparent",paper_bgcolor:"transparent",margin:{t:0,l:40,b:40,r:20},autosize:!0,dragmode:!1,yaxis:{gridcolor:"gray",showgrid:!1},xaxis:{fixedrange:!0}},{responsive:!0,showSendToCloud:!1,displayModeBar:!1})}function N(){if(e)try{Yc.restyle(e,{"marker.color":i})}catch{}}let L=!1,e;Mu(async()=>{const v=Re(T);Object.keys(v).length!==0&&(Ae(0,L=!0),Ge(v),window.dispatchEvent(new Event("resize")))});let{data:T,token:w,hex:i}=se;function _(v){Ja[v?"unshift":"push"](()=>{e=v,Ae(1,e)})}return re.$$set=v=>{"data"in v&&Ae(2,T=v.data),"token"in v&&Ae(3,w=v.token),"hex"in v&&Ae(4,i=v.hex)},re.$$.update=()=>{re.$$.dirty&16&&i&&N()},[L,e,T,w,i,_]}class I3 extends Fa{constructor(se){super(),za(this,se,P3,O3,Ra,{data:2,token:3,hex:4})}}function D3(re){let se,Ae;return{c(){se=br("div"),Ae=br("div"),Un(Ae,"id","plotDiv"),Un(Ae,"class","svelte-bbthu8"),Un(se,"class","container svelte-bbthu8")},m(Re,Ge){Lr(Re,se,Ge),ar(se,Ae),re[4](Ae)},p:xi,i:xi,o:xi,d(Re){Re&&Er(se),re[4](null)}}}function R3(re,se){const Ae=se.map(N=>new Date(N).getTime()),Re=Array(se.length).fill(0);for(let N=0;N<re.length;N++){const L={index:-1,diff:Number.MAX_VALUE},e=re[N].getTime();for(let T=0;T<Ae.length;T++){const w=Math.abs(Ae[T]-e);if(w<L.diff)L.index=T,L.diff=w;else break}Re[L.index]+=1}return[se.map(N=>new Date(N)),Re]}function z3(re,se,Ae){const Re=lv.extendMoment(Br);function Ge(v){const h=[];for(let s=0;s<v.extraction.length;s++){if(!(w in v.extraction[s].params))continue;const t=v.extraction[s].params[w].value;h.push(new Date(t))}return h}function N(){const v=Ge(T).sort((n,r)=>n.getTime()-r.getTime()),h=Re.range(v[0],v[v.length-1]),s=Array.from(h.by("minutes",{step:20})),[t,a]=R3(v,s);Yc.newPlot(e,[{x:t,y:a,type:"bar",marker:{color:i}}],{title:!1,hovermode:"closest",plot_bgcolor:"transparent",paper_bgcolor:"transparent",margin:{t:0,l:50,b:30,r:10},autosize:!0,dragmode:!1,height:300,yaxis:{gridcolor:"gray",showgrid:!1},xaxis:{fixedrange:!0}},{responsive:!0,showSendToCloud:!1,displayModeBar:!1})}function L(){e&&Yc.restyle(e,{"marker.color":i})}let e;Mu(async()=>{N()});let{data:T,token:w,hex:i}=se;function _(v){Ja[v?"unshift":"push"](()=>{e=v,Ae(0,e)})}return re.$$set=v=>{"data"in v&&Ae(1,T=v.data),"token"in v&&Ae(2,w=v.token),"hex"in v&&Ae(3,i=v.hex)},re.$$.update=()=>{re.$$.dirty&8&&i&&L()},[e,T,w,i,_]}class F3 extends Fa{constructor(se){super(),za(this,se,z3,D3,Ra,{data:1,token:2,hex:3})}}function B3(re){let se,Ae;return{c(){se=br("div"),Ae=br("div"),Un(Ae,"id","plotDiv"),Un(Ae,"class","svelte-1gnvj1i"),Un(se,"class","container svelte-1gnvj1i"),Ms(se,"hidden",!F1(re[0],re[1]))},m(Re,Ge){Lr(Re,se,Ge),ar(se,Ae),re[4](Ae)},p(Re,[Ge]){Ge&3&&Ms(se,"hidden",!F1(Re[0],Re[1]))},i:xi,o:xi,d(Re){Re&&Er(se),re[4](null)}}}function F1(re,se){for(let Ae=0;Ae<re.extraction.length;Ae++){const Re=re.extraction[Ae].params;if(se in Re&&Re[se].type==="ip"&&Re[se].value in re.locations)return!0}return!1}function N3(re){const se=[],Ae=[];for(const[Re,Ge]of Object.entries(re))se.push(Re),Ae.push(Ge);return[se,Ae]}function j3(re,se,Ae){function Re(v){const h={};for(let s=0;s<v.extraction.length;s++){const t=v.extraction[s].params;if(w in t&&t[w].type==="ip"){const a=v.locations[t[w].value];h[a]||(h[a]=0),h[a]+=1}}return h}function Ge(){const v=Re(T),[h,s]=N3(v);e=[{type:"choropleth",locations:h,z:s,text:h,locationmode:"country names",colorscale:[[0,i],[.4,i],[1,"#101010"]],autocolorscale:!1,reversescale:!0,marker:{line:{color:"rgb(90,90,90)",width:.1}},tick0:0,zmin:0,colorbar:{autotic:!1}}],Yc.newPlot(L,e,{title:!1,hovermode:"closest",plot_bgcolor:"transparent",paper_bgcolor:"transparent",margin:{t:50,l:0,b:0,r:0},autosize:!0,height:600,dragmode:!1,yaxis:{gridcolor:"gray",showgrid:!1},xaxis:{fixedrange:!0},geo:{showframe:!1,countrycolor:"rgb(255, 255, 255)",showland:!0,landcolor:"#111",showlakes:!0,lakecolor:"black",lonaxis:{},lataxis:{},bgcolor:"transparent"},mapbox:{style:"dark"}},{responsive:!0,showSendToCloud:!1,displayModeBar:!1})}function N(){L&&(e[0].colorscale[0][1]=i,e[0].colorscale[1][1]=i,Yc.redraw(L))}let L,e;Mu(async()=>{Ge()});let{data:T,token:w,hex:i}=se;function _(v){Ja[v?"unshift":"push"](()=>{L=v,Ae(2,L)})}return re.$$set=v=>{"data"in v&&Ae(0,T=v.data),"token"in v&&Ae(1,w=v.token),"hex"in v&&Ae(3,i=v.hex)},re.$$.update=()=>{re.$$.dirty&8&&i&&N()},[T,w,L,i,_]}class U3 extends Fa{constructor(se){super(),za(this,se,j3,B3,Ra,{data:0,token:1,hex:3})}}function B1(re,se,Ae){const Re=re.slice();return Re[5]=se[Ae],Re}function N1(re,se,Ae){const Re=re.slice();return Re[8]=se[Ae],Re}function j1(re,se,Ae){const Re=re.slice();return Re[11]=se[Ae],Re}function U1(re){let se,Ae=no(re[0].slice(0,10)),Re=[];for(let Ge=0;Ge<Ae.length;Ge+=1)Re[Ge]=q1(B1(re,Ae,Ge));return{c(){se=br("div");for(let Ge=0;Ge<Re.length;Ge+=1)Re[Ge].c();Un(se,"class","freq-graph svelte-mzx7y3")},m(Ge,N){Lr(Ge,se,N);for(let L=0;L<Re.length;L+=1)Re[L]&&Re[L].m(se,null)},p(Ge,N){if(N&1){Ae=no(Ge[0].slice(0,10));let L;for(L=0;L<Ae.length;L+=1){const e=B1(Ge,Ae,L);Re[L]?Re[L].p(e,N):(Re[L]=q1(e),Re[L].c(),Re[L].m(se,null))}for(;L<Re.length;L+=1)Re[L].d(1);Re.length=Ae.length}},d(Ge){Ge&&Er(se),iu(Re,Ge)}}}function V1(re){let se,Ae,Re=re[11].dependentTokenValue+"",Ge,N,L;return{c(){se=br("div"),Ae=br("div"),Ge=li(Re),N=qr(),Un(Ae,"class","bar svelte-mzx7y3"),Xa(Ae,"width",re[11].width+"%"),Un(se,"class","token-frequency svelte-mzx7y3"),Un(se,"title",L=re[11].count.toString())},m(e,T){Lr(e,se,T),ar(se,Ae),ar(Ae,Ge),ar(se,N)},p(e,T){T&1&&Re!==(Re=e[11].dependentTokenValue+"")&&Pi(Ge,Re),T&1&&Xa(Ae,"width",e[11].width+"%"),T&1&&L!==(L=e[11].count.toString())&&Un(se,"title",L)},d(e){e&&Er(se)}}}function H1(re){let se,Ae=re[8]+"",Re,Ge,N,L=no(re[5][re[8]]),e=[];for(let T=0;T<L.length;T+=1)e[T]=V1(j1(re,L,T));return{c(){se=br("div"),Re=li(Ae),Ge=qr();for(let T=0;T<e.length;T+=1)e[T].c();N=As(),Un(se,"class","value-name svelte-mzx7y3")},m(T,w){Lr(T,se,w),ar(se,Re),Lr(T,Ge,w);for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(T,w);Lr(T,N,w)},p(T,w){if(w&1&&Ae!==(Ae=T[8]+"")&&Pi(Re,Ae),w&1){L=no(T[5][T[8]]);let i;for(i=0;i<L.length;i+=1){const _=j1(T,L,i);e[i]?e[i].p(_,w):(e[i]=V1(_),e[i].c(),e[i].m(N.parentNode,N))}for(;i<e.length;i+=1)e[i].d(1);e.length=L.length}},d(T){T&&(Er(se),Er(Ge),Er(N)),iu(e,T)}}}function q1(re){let se,Ae=no(Object.keys(re[5])),Re=[];for(let Ge=0;Ge<Ae.length;Ge+=1)Re[Ge]=H1(N1(re,Ae,Ge));return{c(){for(let Ge=0;Ge<Re.length;Ge+=1)Re[Ge].c();se=As()},m(Ge,N){for(let L=0;L<Re.length;L+=1)Re[L]&&Re[L].m(Ge,N);Lr(Ge,se,N)},p(Ge,N){if(N&1){Ae=no(Object.keys(Ge[5]));let L;for(L=0;L<Ae.length;L+=1){const e=N1(Ge,Ae,L);Re[L]?Re[L].p(e,N):(Re[L]=H1(e),Re[L].c(),Re[L].m(se.parentNode,se))}for(;L<Re.length;L+=1)Re[L].d(1);Re.length=Ae.length}},d(Ge){Ge&&Er(se),iu(Re,Ge)}}}function V3(re){let se,Ae=re[0].length>0&&U1(re);return{c(){Ae&&Ae.c(),se=As()},m(Re,Ge){Ae&&Ae.m(Re,Ge),Lr(Re,se,Ge)},p(Re,[Ge]){Re[0].length>0?Ae?Ae.p(Re,Ge):(Ae=U1(Re),Ae.c(),Ae.m(se.parentNode,se)):Ae&&(Ae.d(1),Ae=null)},i:xi,o:xi,d(Re){Re&&Er(se),Ae&&Ae.d(Re)}}}const H3=10;function q3(re){const se={};for(const N of Object.values(re))for(const L of Object.values(N))for(const[e,T]of Object.entries(L))for(const[w,i]of Object.entries(T))se[e]||(se[e]=[]),se[e].push({dependentTokenValue:w,count:i,width:0});for(const N in se)se[N].sort((L,e)=>e.count-L.count);let Ae=0;for(const N in se)for(let L=0;L<se[N].length;L++)se[N][L].count>Ae&&(Ae=se[N][L].count);for(const N in se){for(let L=0;L<se[N].length;L++)se[N][L].width=se[N][L].count/Ae*100;se[N]=se[N].slice(0,H3)}const Re={};for(const N in se){const L=se[N].reduce((e,T)=>e+T.count,0);Re[N]=L}const Ge=[];for(const N in se){const L={};L[N]=se[N],Ge.push(L)}return Ge.sort((N,L)=>{const e=Object.keys(N).reduce((w,i)=>w+Re[i],0);return Object.keys(L).reduce((w,i)=>w+Re[i],0)-e}),Ge}function Y3(re,se,Ae){var Ge,N,L;const Re={};for(let e=0;e<re.extraction.length;e++)if(se in re.extraction[e].params&&Ae in re.extraction[e].params){const T=re.extraction[e].params[se].value,w=re.extraction[e].params[Ae].value;Re[se]||(Re[se]={}),(Ge=Re[se])[Ae]||(Ge[Ae]={}),(N=Re[se][Ae])[T]||(N[T]={}),(L=Re[se][Ae][T])[w]||(L[w]=0),Re[se][Ae][T][w]+=1}return Re}function G3(re,se,Ae){let Re=[];function Ge(T){Ae(0,Re=q3(T))}Mu(()=>{const T=Y3(N,L,e);Ge(T)});let{data:N,token:L,dependentToken:e}=se;return re.$$set=T=>{"data"in T&&Ae(1,N=T.data),"token"in T&&Ae(2,L=T.token),"dependentToken"in T&&Ae(3,e=T.dependentToken)},[Re,N,L,e]}class W3 extends Fa{constructor(se){super(),za(this,se,G3,V3,Ra,{data:1,token:2,dependentToken:3})}}function Z3(re){let se;return{c(){se=li(re[1])},m(Ae,Re){Lr(Ae,se,Re)},p(Ae,Re){Re&2&&Pi(se,Ae[1])},d(Ae){Ae&&Er(se)}}}function X3(re){let se,Ae,Re;return{c(){se=li(re[1]),Ae=li(" & "),Re=li(re[2])},m(Ge,N){Lr(Ge,se,N),Lr(Ge,Ae,N),Lr(Ge,Re,N)},p(Ge,N){N&2&&Pi(se,Ge[1]),N&4&&Pi(Re,Ge[2])},d(Ge){Ge&&(Er(se),Er(Ae),Er(Re))}}}function J3(re){let se,Ae,Re,Ge,N,L,e,T,w,i;return se=new L3({props:{data:re[0],token:re[1]}}),Re=new I3({props:{data:re[0],token:re[1],hex:re[5]}}),N=new hx({props:{data:re[0],token:re[1]}}),e=new k3({props:{data:re[0],token:re[1],timestampToken:re[4]}}),w=new U3({props:{data:re[0],token:re[1],hex:re[5]}}),{c(){ta(se.$$.fragment),Ae=qr(),ta(Re.$$.fragment),Ge=qr(),ta(N.$$.fragment),L=qr(),ta(e.$$.fragment),T=qr(),ta(w.$$.fragment)},m(_,v){Zi(se,_,v),Lr(_,Ae,v),Zi(Re,_,v),Lr(_,Ge,v),Zi(N,_,v),Lr(_,L,v),Zi(e,_,v),Lr(_,T,v),Zi(w,_,v),i=!0},p(_,v){const h={};v&1&&(h.data=_[0]),v&2&&(h.token=_[1]),se.$set(h);const s={};v&1&&(s.data=_[0]),v&2&&(s.token=_[1]),v&32&&(s.hex=_[5]),Re.$set(s);const t={};v&1&&(t.data=_[0]),v&2&&(t.token=_[1]),N.$set(t);const a={};v&1&&(a.data=_[0]),v&2&&(a.token=_[1]),v&16&&(a.timestampToken=_[4]),e.$set(a);const n={};v&1&&(n.data=_[0]),v&2&&(n.token=_[1]),v&32&&(n.hex=_[5]),w.$set(n)},i(_){i||(Qr(se.$$.fragment,_),Qr(Re.$$.fragment,_),Qr(N.$$.fragment,_),Qr(e.$$.fragment,_),Qr(w.$$.fragment,_),i=!0)},o(_){ti(se.$$.fragment,_),ti(Re.$$.fragment,_),ti(N.$$.fragment,_),ti(e.$$.fragment,_),ti(w.$$.fragment,_),i=!1},d(_){_&&(Er(Ae),Er(Ge),Er(L),Er(T)),Xi(se,_),Xi(Re,_),Xi(N,_),Xi(e,_),Xi(w,_)}}}function K3(re){let se,Ae;return se=new F3({props:{data:re[0],token:re[1],hex:re[5]}}),{c(){ta(se.$$.fragment)},m(Re,Ge){Zi(se,Re,Ge),Ae=!0},p(Re,Ge){const N={};Ge&1&&(N.data=Re[0]),Ge&2&&(N.token=Re[1]),Ge&32&&(N.hex=Re[5]),se.$set(N)},i(Re){Ae||(Qr(se.$$.fragment,Re),Ae=!0)},o(Re){ti(se.$$.fragment,Re),Ae=!1},d(Re){Xi(se,Re)}}}function Q3(re){let se,Ae;return se=new W3({props:{data:re[0],token:re[1],dependentToken:re[2]}}),{c(){ta(se.$$.fragment)},m(Re,Ge){Zi(se,Re,Ge),Ae=!0},p(Re,Ge){const N={};Ge&1&&(N.data=Re[0]),Ge&2&&(N.token=Re[1]),Ge&4&&(N.dependentToken=Re[2]),se.$set(N)},i(Re){Ae||(Qr(se.$$.fragment,Re),Ae=!0)},o(Re){ti(se.$$.fragment,Re),Ae=!1},d(Re){Xi(se,Re)}}}function $3(re){let se,Ae,Re,Ge,N,L=re[3].toLocaleString()+"",e,T,w,i,_,v;function h(l,o){return l[2]?X3:Z3}let s=h(re),t=s(re);const a=[Q3,K3,J3],n=[];function r(l,o){return l[2]?0:l[1]===l[4]?1:2}return i=r(re),_=n[i]=a[i](re),{c(){se=br("div"),Ae=br("div"),Re=br("div"),t.c(),Ge=qr(),N=br("div"),e=li(L),T=li(" lines"),w=qr(),_.c(),Un(Re,"class","title svelte-9aim4u"),Un(N,"class","line-count svelte-9aim4u"),Un(Ae,"class","header svelte-9aim4u"),Un(se,"class","card svelte-9aim4u")},m(l,o){Lr(l,se,o),ar(se,Ae),ar(Ae,Re),t.m(Re,null),ar(Ae,Ge),ar(Ae,N),ar(N,e),ar(N,T),ar(se,w),n[i].m(se,null),v=!0},p(l,[o]){s===(s=h(l))&&t?t.p(l,o):(t.d(1),t=s(l),t&&(t.c(),t.m(Re,null))),(!v||o&8)&&L!==(L=l[3].toLocaleString()+"")&&Pi(e,L);let u=i;i=r(l),i===u?n[i].p(l,o):(qs(),ti(n[u],1,1,()=>{n[u]=null}),Ys(),_=n[i],_?_.p(l,o):(_=n[i]=a[i](l),_.c()),Qr(_,1),_.m(se,null))},i(l){v||(Qr(_),v=!0)},o(l){ti(_),v=!1},d(l){l&&Er(se),t.d(),n[i].d()}}}function ew(re,se,Ae){let{data:Re,token:Ge,dependentToken:N,lineCount:L,timestampToken:e,hex:T}=se;return re.$$set=w=>{"data"in w&&Ae(0,Re=w.data),"token"in w&&Ae(1,Ge=w.token),"dependentToken"in w&&Ae(2,N=w.dependentToken),"lineCount"in w&&Ae(3,L=w.lineCount),"timestampToken"in w&&Ae(4,e=w.timestampToken),"hex"in w&&Ae(5,T=w.hex)},[Re,Ge,N,L,e,T]}class tw extends Fa{constructor(se){super(),za(this,se,ew,$3,Ra,{data:0,token:1,dependentToken:2,lineCount:3,timestampToken:4,hex:5})}}function Y1(re,se,Ae){const Re=re.slice();return Re[1]=se[Ae][0],Re[2]=se[Ae][1],Re}function G1(re){let se,Ae=no(Object.entries(re[0]).slice(0,100)),Re=[];for(let Ge=0;Ge<Ae.length;Ge+=1)Re[Ge]=W1(Y1(re,Ae,Ge));return{c(){se=br("div");for(let Ge=0;Ge<Re.length;Ge+=1)Re[Ge].c();Un(se,"class","card svelte-y530d")},m(Ge,N){Lr(Ge,se,N);for(let L=0;L<Re.length;L+=1)Re[L]&&Re[L].m(se,null)},p(Ge,N){if(N&1){Ae=no(Object.entries(Ge[0]).slice(0,100));let L;for(L=0;L<Ae.length;L+=1){const e=Y1(Ge,Ae,L);Re[L]?Re[L].p(e,N):(Re[L]=W1(e),Re[L].c(),Re[L].m(se,null))}for(;L<Re.length;L+=1)Re[L].d(1);Re.length=Ae.length}},d(Ge){Ge&&Er(se),iu(Re,Ge)}}}function W1(re){let se,Ae,Re=re[1]+"",Ge,N,L,e=re[2]+"",T,w;return{c(){se=br("div"),Ae=br("div"),Ge=li(Re),N=qr(),L=br("div"),T=li(e),w=qr(),Un(Ae,"class","lineNumber svelte-y530d"),Un(L,"class","line svelte-y530d"),Un(se,"class","line-container svelte-y530d")},m(i,_){Lr(i,se,_),ar(se,Ae),ar(Ae,Ge),ar(se,N),ar(se,L),ar(L,T),ar(se,w)},p(i,_){_&1&&Re!==(Re=i[1]+"")&&Pi(Ge,Re),_&1&&e!==(e=i[2]+"")&&Pi(T,e)},d(i){i&&Er(se)}}}function nw(re){let se=Object.keys(re[0]).length>0,Ae,Re=se&&G1(re);return{c(){Re&&Re.c(),Ae=As()},m(Ge,N){Re&&Re.m(Ge,N),Lr(Ge,Ae,N)},p(Ge,[N]){N&1&&(se=Object.keys(Ge[0]).length>0),se?Re?Re.p(Ge,N):(Re=G1(Ge),Re.c(),Re.m(Ae.parentNode,Ae)):Re&&(Re.d(1),Re=null)},i:xi,o:xi,d(Ge){Ge&&Er(Ae),Re&&Re.d(Ge)}}}function rw(re,se,Ae){let{failedLines:Re}=se;return re.$$set=Ge=>{"failedLines"in Ge&&Ae(0,Re=Ge.failedLines)},[Re]}class iw extends Fa{constructor(se){super(),za(this,se,rw,nw,Ra,{failedLines:0})}}function Z1(re,se,Ae){const Re=re.slice();return Re[5]=se[Ae][0],Re[6]=se[Ae][1],Re}function X1(re,se,Ae){const Re=re.slice();return Re[9]=se[Ae][0],Re[10]=se[Ae][1],Re}function J1(re){let se,Ae=no(Object.entries(re[1][re[5]])),Re=[];for(let Ge=0;Ge<Ae.length;Ge+=1)Re[Ge]=K1(X1(re,Ae,Ge));return{c(){for(let Ge=0;Ge<Re.length;Ge+=1)Re[Ge].c();se=As()},m(Ge,N){for(let L=0;L<Re.length;L+=1)Re[L]&&Re[L].m(Ge,N);Lr(Ge,se,N)},p(Ge,N){if(N&3){Ae=no(Object.entries(Ge[1][Ge[5]]));let L;for(L=0;L<Ae.length;L+=1){const e=X1(Ge,Ae,L);Re[L]?Re[L].p(e,N):(Re[L]=K1(e),Re[L].c(),Re[L].m(se.parentNode,se))}for(;L<Re.length;L+=1)Re[L].d(1);Re.length=Ae.length}},d(Ge){Ge&&Er(se),iu(Re,Ge)}}}function K1(re){let se,Ae,Re,Ge=re[9]+"",N,L,e,T=re[10].line+"",w,i,_,v,h=re[10].pattern+"",s,t;return{c(){se=br("div"),Ae=br("div"),Re=br("b"),N=li(Ge),L=qr(),e=br("div"),w=li(T),i=qr(),_=br("div"),v=li("Pattern: "),s=li(h),t=qr(),Un(Ae,"class","token"),Un(e,"class","example-line svelte-u6ym3t"),Un(_,"class","example-pattern svelte-u6ym3t"),Un(se,"class","examples svelte-u6ym3t")},m(a,n){Lr(a,se,n),ar(se,Ae),ar(Ae,Re),ar(Re,N),ar(se,L),ar(se,e),ar(e,w),ar(se,i),ar(se,_),ar(_,v),ar(_,s),ar(se,t)},p(a,n){n&3&&Ge!==(Ge=a[9]+"")&&Pi(N,Ge),n&3&&T!==(T=a[10].line+"")&&Pi(w,T),n&3&&h!==(h=a[10].pattern+"")&&Pi(s,h)},d(a){a&&Er(se)}}}function Q1(re){let se,Ae,Re,Ge=re[5]+"",N,L,e=Object.keys(re[6]).length+"",T,w,i=$1(re[6])+"",_,v,h,s=re[1]!==void 0&&J1(re);return{c(){se=br("div"),Ae=br("div"),Re=br("b"),N=li(Ge),L=li(" has "),T=li(e),w=li(" data types - "),_=li(i),v=qr(),s&&s.c(),h=qr(),Un(Ae,"class","lineNumber svelte-u6ym3t"),Un(se,"class","line-container svelte-u6ym3t")},m(t,a){Lr(t,se,a),ar(se,Ae),ar(Ae,Re),ar(Re,N),ar(Ae,L),ar(Ae,T),ar(Ae,w),ar(Ae,_),ar(se,v),s&&s.m(se,null),ar(se,h)},p(t,a){a&1&&Ge!==(Ge=t[5]+"")&&Pi(N,Ge),a&1&&e!==(e=Object.keys(t[6]).length+"")&&Pi(T,e),a&1&&i!==(i=$1(t[6])+"")&&Pi(_,i),t[1]!==void 0?s?s.p(t,a):(s=J1(t),s.c(),s.m(se,h)):s&&(s.d(1),s=null)},d(t){t&&Er(se),s&&s.d()}}}function aw(re){let se,Ae=no(Object.entries(re[0])),Re=[];for(let Ge=0;Ge<Ae.length;Ge+=1)Re[Ge]=Q1(Z1(re,Ae,Ge));return{c(){se=br("div");for(let Ge=0;Ge<Re.length;Ge+=1)Re[Ge].c();Un(se,"class","card svelte-u6ym3t"),Ms(se,"hidden",Object.keys(re[0]).length===0)},m(Ge,N){Lr(Ge,se,N);for(let L=0;L<Re.length;L+=1)Re[L]&&Re[L].m(se,null)},p(Ge,[N]){if(N&3){Ae=no(Object.entries(Ge[0]));let L;for(L=0;L<Ae.length;L+=1){const e=Z1(Ge,Ae,L);Re[L]?Re[L].p(e,N):(Re[L]=Q1(e),Re[L].c(),Re[L].m(se,null))}for(;L<Re.length;L+=1)Re[L].d(1);Re.length=Ae.length}N&1&&Ms(se,"hidden",Object.keys(Ge[0]).length===0)},i:xi,o:xi,d(Ge){Ge&&Er(se),iu(Re,Ge)}}}function $1(re){let se="";for(const[Ae,Re]of Object.entries(re))se+=Ae+": "+Re.toLocaleString()+", ";return se=se.slice(0,-2),se}function ow(re,se,Ae){function Re(T,w){const i={};for(const _ in w)if(!(_ in i))for(const v of L.extraction)!(T in v.params)||v.params[T].type!=_||(i[v.params[T].type]={line:v.line,pattern:v.pattern});return i}function Ge(T){const w={};for(const[i,_]of Object.entries(T))w[i]=Re(i,_);return w}let N;Mu(()=>{Ae(1,N=Ge(e))});let{data:L,multiTypes:e}=se;return re.$$set=T=>{"data"in T&&Ae(2,L=T.data),"multiTypes"in T&&Ae(0,e=T.multiTypes)},[e,N,L]}class sw extends Fa{constructor(se){super(),za(this,se,ow,aw,Ra,{data:2,multiTypes:0})}}function lw(re){let se;return{c(){se=br("div"),se.innerHTML='<a class="github-logo-container" href="https://github.com/tom-draper/log-analyzer"><img class="github-icon svelte-i06q5a" src="./github.png" alt=""/></a> <div class="logo-container svelte-i06q5a"><div>Log Analyzer</div> <img class="icon svelte-i06q5a" src="./icon.png" alt=""/></div>',Un(se,"class","footer svelte-i06q5a")},m(Ae,Re){Lr(Ae,se,Re)},p:xi,i:xi,o:xi,d(Ae){Ae&&Er(se)}}}class uw extends Fa{constructor(se){super(),za(this,se,null,lw,Ra,{})}}function eg(re,se,Ae){const Re=re.slice();return Re[10]=se[Ae],Re}function tg(re){let se,Ae,Re,Ge,N,L,e,T,w,i,_;function v(n){re[6](n)}let h={failedLines:re[1],multiTypeTokens:re[2],lineCount:re[0].extraction.length};re[5]!==void 0&&(h.hex=re[5]),Ae=new sx({props:h}),Ja.push(()=>nu(Ae,"hex",v));let s=no(re[3]),t=[];for(let n=0;n<s.length;n+=1)t[n]=ng(eg(re,s,n));const a=n=>ti(t[n],1,1,()=>{t[n]=null});return L=new sw({props:{data:re[0],multiTypes:re[2]}}),T=new iw({props:{failedLines:re[1]}}),i=new uw({}),{c(){se=br("div"),ta(Ae.$$.fragment),Ge=qr();for(let n=0;n<t.length;n+=1)t[n].c();N=qr(),ta(L.$$.fragment),e=qr(),ta(T.$$.fragment),w=qr(),ta(i.$$.fragment),Un(se,"class","content svelte-13ecet7")},m(n,r){Lr(n,se,r),Zi(Ae,se,null),ar(se,Ge);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(se,null);ar(se,N),Zi(L,se,null),ar(se,e),Zi(T,se,null),ar(se,w),Zi(i,se,null),_=!0},p(n,r){const l={};if(r&2&&(l.failedLines=n[1]),r&4&&(l.multiTypeTokens=n[2]),r&1&&(l.lineCount=n[0].extraction.length),!Re&&r&32&&(Re=!0,l.hex=n[5],hc(()=>Re=!1)),Ae.$set(l),r&57){s=no(n[3]);let p;for(p=0;p<s.length;p+=1){const c=eg(n,s,p);t[p]?(t[p].p(c,r),Qr(t[p],1)):(t[p]=ng(c),t[p].c(),Qr(t[p],1),t[p].m(se,N))}for(qs(),p=s.length;p<t.length;p+=1)a(p);Ys()}const o={};r&1&&(o.data=n[0]),r&4&&(o.multiTypes=n[2]),L.$set(o);const u={};r&2&&(u.failedLines=n[1]),T.$set(u)},i(n){if(!_){Qr(Ae.$$.fragment,n);for(let r=0;r<s.length;r+=1)Qr(t[r]);Qr(L.$$.fragment,n),Qr(T.$$.fragment,n),Qr(i.$$.fragment,n),_=!0}},o(n){ti(Ae.$$.fragment,n),t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)ti(t[r]);ti(L.$$.fragment,n),ti(T.$$.fragment,n),ti(i.$$.fragment,n),_=!1},d(n){n&&Er(se),Xi(Ae),iu(t,n),Xi(L),Xi(T),Xi(i)}}}function ng(re){let se,Ae;return se=new tw({props:{data:re[0],token:re[10].token,dependentToken:re[10].dependentToken??null,lineCount:re[10].count,timestampToken:re[4],hex:re[5]}}),{c(){ta(se.$$.fragment)},m(Re,Ge){Zi(se,Re,Ge),Ae=!0},p(Re,Ge){const N={};Ge&1&&(N.data=Re[0]),Ge&8&&(N.token=Re[10].token),Ge&8&&(N.dependentToken=Re[10].dependentToken??null),Ge&8&&(N.lineCount=Re[10].count),Ge&16&&(N.timestampToken=Re[4]),Ge&32&&(N.hex=Re[5]),se.$set(N)},i(Re){Ae||(Qr(se.$$.fragment,Re),Ae=!0)},o(Re){ti(se.$$.fragment,Re),Ae=!1},d(Re){Xi(se,Re)}}}function cw(re){let se,Ae,Re=re[3]!==void 0&&tg(re);return{c(){se=br("main"),Re&&Re.c()},m(Ge,N){Lr(Ge,se,N),Re&&Re.m(se,null),Ae=!0},p(Ge,[N]){Ge[3]!==void 0?Re?(Re.p(Ge,N),N&8&&Qr(Re,1)):(Re=tg(Ge),Re.c(),Qr(Re,1),Re.m(se,null)):Re&&(qs(),ti(Re,1,1,()=>{Re=null}),Ys())},i(Ge){Ae||(Qr(Re),Ae=!0)},o(Ge){ti(Re),Ae=!1},d(Ge){Ge&&Er(se),Re&&Re.d()}}}function fw(re){const se={};for(let Re=0;Re<re.extraction.length;Re++)for(const[Ge,N]of Object.entries(re.extraction[Re].params))se[Ge]||(se[Ge]=0),N.type==="time"&&(se[Ge]+=1);const Ae={token:null,total:0};for(const[Re,Ge]of Object.entries(se))Ge>Ae.total&&(Ae.token=Re,Ae.total=Ge);return Ae.total<re.extraction.length*.5?null:Ae.token}function hw(re){if(re.config.conversions!==void 0)for(let se=0;se<re.extraction.length;se++){const Ae=re.extraction[se].params;for(let[Re,Ge]of Object.entries(re.config.conversions)){if(!(Re in Ae)||typeof Ae[Re]!="number")continue;const N=Ae[Re];typeof N=="number"&&(Ae[Ge.token].value=Ge.multiplier*N,delete Ae[Re])}}}function pw(re){const se={};for(let Ae=0;Ae<re.extraction.length;Ae++)re.extraction[Ae].pattern===""&&(se[re.extraction[Ae].lineNumber]=re.extraction[Ae].line);return se}function dw(re){var Ae,Re;const se={};for(let Ge=0;Ge<re.extraction.length;Ge++)for(const[N,L]of Object.entries(re.extraction[Ge].params))se[N]||(se[N]={}),(Ae=se[N])[Re=L.type]||(Ae[Re]=0),se[N][L.type]+=1;return se}function gw(re){const se={};for(const[Ae,Re]of Object.entries(re))Object.keys(Re).length>1&&(se[Ae]=Re);return se}function vw(re,se,Ae){function Re(v){const h={};for(let t=0;t<v.extraction.length;t++)for(const a in v.extraction[t].params)h[a]||(h[a]=0),h[a]+=1;const s=[];for(const[t,a]of Object.entries(h))s.push({token:t,count:a});return s.sort((t,a)=>t.token===w?Number.MIN_SAFE_INTEGER:a.count-t.count),s}function Ge(v){if(v.config.dependencies===void 0)return[];const h=new Map;for(const t in v.config.dependencies)for(const a of v.config.dependencies[t]){const n=[t,a];for(let r=0;r<v.extraction.length;r++)t in v.extraction[r].params&&a in v.extraction[r].params&&(h.has(n)||h.set(n,0),h.set(n,(h.get(n)??0)+1))}const s=[];for(const[[t,a],n]of h.entries())s.push({token:t,dependentToken:a,count:n});return s.sort((t,a)=>t.token===w?Number.MIN_SAFE_INTEGER:a.count-t.count),s}let N,L,e,T,w,i="#ffdfaf";Mu(async()=>{{const s=await fetch("/data");Ae(0,N=await s.json())}hw(N),console.log(N),Ae(4,w=fw(N)),Ae(1,L=pw(N));const v=dw(N);Ae(2,e=gw(v)),Ae(3,T=Re(N));const h=Ge(N);T.push(...h)});function _(v){i=v,Ae(5,i)}return[N,L,e,T,w,i,_]}class mw extends Fa{constructor(se){super(),za(this,se,vw,cw,Ra,{})}}new mw({target:document.getElementById("app")})});export default yw();
